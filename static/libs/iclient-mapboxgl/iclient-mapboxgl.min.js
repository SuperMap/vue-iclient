/*!
 * 
 *          iclient-mapboxgl
 *          CopyrightÂ© 2000 - 2023 SuperMap Software Co.Ltd
 *          license: Apache-2.0
 *          version: v11.2.0-beta
 *
 */!function(){var t={7238:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=function(t,e){var r=t.nodes,n=t.edges,o=[],i={};if(!r)throw new Error("invalid nodes data!");return r&&r.forEach(function(t,e){i[t.id]=e,o.push([])}),n&&n.forEach(function(t){var r=t.source,n=t.target,a=i[r],s=i[n];!a&&0!==a||!s&&0!==s||(o[a][s]=1,e||(o[s][a]=1))}),o};e.default=r},6765:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"GADDIAsync",{enumerable:!0,get:function(){return n.GADDIAsync}}),Object.defineProperty(e,"connectedComponentAsync",{enumerable:!0,get:function(){return n.connectedComponentAsync}}),e.default=void 0,Object.defineProperty(e,"detectAllCyclesAsync",{enumerable:!0,get:function(){return n.detectAllCyclesAsync}}),Object.defineProperty(e,"detectAllDirectedCycleAsync",{enumerable:!0,get:function(){return n.detectAllDirectedCycleAsync}}),Object.defineProperty(e,"detectAllUndirectedCycleAsync",{enumerable:!0,get:function(){return n.detectAllUndirectedCycleAsync}}),Object.defineProperty(e,"detectCycleAsync",{enumerable:!0,get:function(){return n.detectCycleAsync}}),e.detectDirectedCycleAsync=void 0,Object.defineProperty(e,"dijkstraAsync",{enumerable:!0,get:function(){return n.dijkstraAsync}}),Object.defineProperty(e,"findAllPathAsync",{enumerable:!0,get:function(){return n.findAllPathAsync}}),Object.defineProperty(e,"findShortestPathAsync",{enumerable:!0,get:function(){return n.findShortestPathAsync}}),Object.defineProperty(e,"floydWarshallAsync",{enumerable:!0,get:function(){return n.floydWarshallAsync}}),Object.defineProperty(e,"getAdjMatrixAsync",{enumerable:!0,get:function(){return n.getAdjMatrixAsync}}),Object.defineProperty(e,"getDegreeAsync",{enumerable:!0,get:function(){return n.getDegreeAsync}}),Object.defineProperty(e,"getInDegreeAsync",{enumerable:!0,get:function(){return n.getInDegreeAsync}}),Object.defineProperty(e,"getNeighborsAsync",{enumerable:!0,get:function(){return n.getNeighborsAsync}}),Object.defineProperty(e,"getOutDegreeAsync",{enumerable:!0,get:function(){return n.getOutDegreeAsync}}),Object.defineProperty(e,"labelPropagationAsync",{enumerable:!0,get:function(){return n.labelPropagationAsync}}),Object.defineProperty(e,"louvainAsync",{enumerable:!0,get:function(){return n.louvainAsync}}),Object.defineProperty(e,"minimumSpanningTreeAsync",{enumerable:!0,get:function(){return n.minimumSpanningTreeAsync}}),Object.defineProperty(e,"pageRankAsync",{enumerable:!0,get:function(){return n.pageRankAsync}});var n=r(4613),o=n.detectCycleAsync;e.detectDirectedCycleAsync=o;var i={getAdjMatrixAsync:n.getAdjMatrixAsync,connectedComponentAsync:n.connectedComponentAsync,getDegreeAsync:n.getDegreeAsync,getInDegreeAsync:n.getInDegreeAsync,getOutDegreeAsync:n.getOutDegreeAsync,detectCycleAsync:n.detectCycleAsync,detectDirectedCycleAsync:o,detectAllCyclesAsync:n.detectAllCyclesAsync,detectAllDirectedCycleAsync:n.detectAllDirectedCycleAsync,detectAllUndirectedCycleAsync:n.detectAllUndirectedCycleAsync,dijkstraAsync:n.dijkstraAsync,findAllPathAsync:n.findAllPathAsync,findShortestPathAsync:n.findShortestPathAsync,floydWarshallAsync:n.floydWarshallAsync,labelPropagationAsync:n.labelPropagationAsync,louvainAsync:n.louvainAsync,minimumSpanningTreeAsync:n.minimumSpanningTreeAsync,pageRankAsync:n.pageRankAsync,getNeighborsAsync:n.getNeighborsAsync,GADDIAsync:n.GADDIAsync};e.default=i},1264:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n,o=(n=r(3247))&&n.__esModule?n:{default:n},i=r(8182);var a=function(t,e,r,n){void 0===n&&(n=!0);var a=function(t){void 0===t&&(t={});var e,r=t,n=function(){},o=(e={},function(t){var r=t.next;return!e[r]&&(e[r]=!0,!0)});return r.allowTraversal=t.allowTraversal||o,r.enter=t.enter||n,r.leave=t.leave||n,r}(r),s=new o.default,u=t.edges,l=void 0===u?[]:u;s.enqueue(e);for(var c="",f=function(){var t=s.dequeue();a.enter({current:t,previous:c}),(0,i.getNeighbors)(t,l,n?"target":void 0).forEach(function(e){a.allowTraversal({previous:c,current:t,next:e})&&s.enqueue(e)}),a.leave({current:t,previous:c}),c=t};!s.isEmpty();)f()};e.default=a},6616:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){return e?i(t):o(t)},e.detectStrongConnectComponents=e.detectConnectedComponents=void 0;var n=r(8182),o=function(t){for(var e=t.nodes,r=void 0===e?[]:e,o=t.edges,i=void 0===o?[]:o,a=[],s={},u=[],l=function t(e){u.push(e),s[e.id]=!0;for(var o=(0,n.getNeighbors)(e.id,i),a=function(e){var n=o[e];if(!s[n]){var i=r.filter(function(t){return t.id===n});i.length>0&&t(i[0])}},l=0;l<o.length;++l)a(l)},c=0;c<r.length;c++){var f=r[c];if(!s[f.id]){l(f);for(var h=[];u.length>0;)h.push(u.pop());a.push(h)}}return a};e.detectConnectedComponents=o;var i=function(t){for(var e=t.nodes,r=void 0===e?[]:e,o=t.edges,i=void 0===o?[]:o,a=[],s={},u={},l={},c=[],f=0,h=function t(e){u[e.id]=f,l[e.id]=f,f+=1,a.push(e),s[e.id]=!0;for(var o=(0,n.getNeighbors)(e.id,i,"target").filter(function(t){return r.map(function(t){return t.id}).indexOf(t)>-1}),h=function(n){var i=o[n];if(u[i]||0===u[i])s[i]&&(l[e.id]=Math.min(l[e.id],u[i]));else{var a=r.filter(function(t){return t.id===i});a.length>0&&t(a[0]),l[e.id]=Math.min(l[e.id],l[i])}},p=0;p<o.length;p++)h(p);if(l[e.id]===u[e.id]){for(var d=[];a.length>0;){var y=a.pop();if(s[y.id]=!1,d.push(y),y===e)break}d.length>0&&c.push(d)}},p=0,d=r;p<d.length;p++){var y=d[p];u[y.id]||0===u[y.id]||h(y)}return c};e.detectStrongConnectComponents=i},9023:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.secondReg=e.dateReg=void 0;e.secondReg=/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2})$/;e.dateReg=/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})$/},3597:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getOutDegree=e.getInDegree=e.default=void 0;var r=function(t){var e={},r=t.nodes,n=void 0===r?[]:r,o=t.edges,i=void 0===o?[]:o;return n.forEach(function(t){e[t.id]={degree:0,inDegree:0,outDegree:0}}),i.forEach(function(t){e[t.source].degree++,e[t.source].outDegree++,e[t.target].degree++,e[t.target].inDegree++}),e},n=r;e.default=n;e.getInDegree=function(t,e){return r(t)[e]?r(t)[e].inDegree:0};e.getOutDegree=function(t,e){return r(t)[e]?r(t)[e].outDegree:0}},2465:function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.detectAllUndirectedCycle=e.detectAllDirectedCycle=e.detectAllCycles=e.default=void 0;var o,i=(o=r(1940))&&o.__esModule?o:{default:o},a=function(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!==n(t)&&"function"!=typeof t)return{default:t};var r=u(e);if(r&&r.has(t))return r.get(t);var o={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if("default"!==a&&Object.prototype.hasOwnProperty.call(t,a)){var s=i?Object.getOwnPropertyDescriptor(t,a):null;s&&(s.get||s.set)?Object.defineProperty(o,a,s):o[a]=t[a]}o.default=t,r&&r.set(t,o);return o}(r(6616)),s=r(8182);function u(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,r=new WeakMap;return(u=function(t){return t?r:e})(t)}var l=function(t,e,r){var n,o;void 0===r&&(r=!0);for(var i=[],u=0,l=(0,a.default)(t,!1);u<l.length;u++){var c=l[u];if(c.length)for(var f=c[0],h=f.id,p=[f],d=((n={})[h]=f,n),y=((o={})[h]=new Set,o);p.length>0;)for(var v=p.pop(),g=v.id,m=(0,s.getNeighbors)(g,t.edges),b=function(n){var o,a=m[n],s=t.nodes.find(function(t){return t.id===a});if(a===g)i.push(((o={})[a]=v,o));else if(a in y){if(!y[g].has(s)){for(var u=!0,l=[s,v],c=d[g];y[a].size&&!y[a].has(c)&&(l.push(c),c!==d[c.id]);)c=d[c.id];if(l.push(c),e&&r?(u=!1,l.findIndex(function(t){return e.indexOf(t.id)>-1})>-1&&(u=!0)):e&&!r&&l.findIndex(function(t){return e.indexOf(t.id)>-1})>-1&&(u=!1),u){for(var f={},h=1;h<l.length;h+=1)f[l[h-1].id]=l[h];l.length&&(f[l[l.length-1].id]=l[0]),i.push(f)}y[a].add(v)}}else d[a]=v,p.push(s),y[a]=new Set([v])},w=0;w<m.length;w+=1)b(w)}return i};e.detectAllUndirectedCycle=l;var c=function(t,e,r){void 0===r&&(r=!0);for(var n=[],o=new Set,i=[],u=[],l={},c={},f=function t(a,s,c){var f=!1;if(e&&!1===r&&e.indexOf(a.id)>-1)return f;n.push(a),o.add(a);for(var h=c[a.id],p=0;p<h.length;p+=1){if((v=l[h[p]])===s){for(var d={},y=1;y<n.length;y+=1)d[n[y-1].id]=n[y];n.length&&(d[n[n.length-1].id]=n[0]),u.push(d),f=!0}else o.has(v)||t(v,s,c)&&(f=!0)}if(f)!function(t){for(var e=[t];e.length>0;){var r=e.pop();o.has(r)&&(o.delete(r),i[r.id].forEach(function(t){e.push(t)}),i[r.id].clear())}}(a);else for(p=0;p<h.length;p+=1){var v=l[h[p]];i[v.id].has(a)||i[v.id].add(a)}return n.pop(),f},h=t.nodes,p=void 0===h?[]:h,d=0;d<p.length;d+=1){var y=p[d],v=y.id;c[v]=d,l[d]=y}if(e&&r){var g=function(t){var r=e[t];c[p[t].id]=c[r],c[r]=0,l[0]=p.find(function(t){return t.id===r}),l[c[p[t].id]]=p[t]};for(d=0;d<e.length;d++)g(d)}for(var m=function(n){for(var o,i,a=1/0,l=0;l<n.length;l+=1)for(var f=n[l],h=0;h<f.length;h++){var p=c[f[h].id];p<a&&(a=p,i=l)}var d=n[i],y=[];for(l=0;l<d.length;l+=1){var v=d[l];y[v.id]=[];for(var g=0,m=(0,s.getNeighbors)(v.id,t.edges,"target").filter(function(t){return d.map(function(t){return t.id}).indexOf(t)>-1});g<m.length;g++){var b=m[g];b!==v.id||!1===r&&e.indexOf(v.id)>-1?y[v.id].push(c[b]):u.push(((o={})[v.id]=v,o))}}return{component:d,adjList:y,minIdx:a}},b=0;b<p.length;){var w=p.filter(function(t){return c[t.id]>=b}),S=(0,a.detectStrongConnectComponents)({nodes:w,edges:t.edges}).filter(function(t){return t.length>1});if(0===S.length)break;var x=m(S),_=x.minIdx,E=x.adjList,O=x.component;if(!(O.length>1))break;O.forEach(function(t){i[t.id]=new Set});var P=l[_];if(e&&r&&-1===e.indexOf(P.id))return u;f(P,P,E),b=_+1}return u};e.detectAllDirectedCycle=c;e.detectAllCycles=function(t,e,r,n){return void 0===n&&(n=!0),e?c(t,r,n):l(t,r,n)};var f=function(t){var e=null,r=t.nodes,n={},o={},a={},s={};(void 0===r?[]:r).forEach(function(t){o[t.id]=t});for(var u={enter:function(t){var r=t.current,i=t.previous;if(a[r]){e={};for(var s=r,u=i;u!==r;)e[s]=u,s=u,u=n[u];e[s]=u}else a[r]=r,delete o[r],n[r]=i},leave:function(t){var e=t.current;s[e]=e,delete a[e]},allowTraversal:function(t){var r=t.next;return!e&&!s[r]}};Object.keys(o).length;){var l=Object.keys(o)[0];(0,i.default)(t,l,u)}return e};e.default=f},1940:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,r,o){void 0===o&&(o=!0);!function t(e,r,o,i,a){void 0===a&&(a=!0);i.enter({current:r,previous:o});var s=e.edges,u=void 0===s?[]:s;(0,n.getNeighbors)(r,u,a?"target":void 0).forEach(function(n){i.allowTraversal({previous:o,current:r,next:n})&&t(e,n,r,i,a)});i.leave({current:r,previous:o})}(t,e,"",function(t){void 0===t&&(t={});var e=t,r=function(){},n=(o={},function(t){var e=t.next;return!o[e]&&(o[e]=!0,!0)});var o;return e.allowTraversal=t.allowTraversal||n,e.enter=t.enter||r,e.leave=t.leave||r,e}(r),o)};var n=r(8182)},7618:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=r(7582),o=r(7061),i=r(8182),a=function(t,e,r,n){var o=t.nodes,a=void 0===o?[]:o,u=t.edges,l=void 0===u?[]:u,c=[],f={},h={},p={};a.forEach(function(t,r){var n=t.id;c.push(n),h[n]=1/0,n===e&&(h[n]=0)});for(var d=a.length,y=function(t){var e=function(t,e,r){for(var n,o=1/0,i=0;i<e.length;i++){var a=e[i].id;!r[a]&&t[a]<=o&&(o=t[a],n=e[i])}return n}(h,a,f),o=e.id;if(f[o]=!0,h[o]===1/0)return"continue";(r?(0,i.getOutEdgesNodeId)(o,l):(0,i.getEdgesByNodeId)(o,l)).forEach(function(t){var r=t.target,i=t.source,a=r===o?i:r,s=n&&t[n]?t[n]:1;h[a]>h[e.id]+s?(h[a]=h[e.id]+s,p[a]=[e.id]):h[a]===h[e.id]+s&&p[a].push(e.id)})},v=0;v<d;v++)y();p[e]=[e];var g={};for(var m in h)h[m]!==1/0&&s(e,m,p,g);var b={};for(var m in g)b[m]=g[m][0];return{length:h,path:b,allPath:g}};function s(t,e,r,i){if(t===e)return[t];if(i[e])return i[e];for(var a=[],u=0,l=r[e];u<l.length;u++){var c=s(t,l[u],r,i);if(!c)return;for(var f=0,h=c;f<h.length;f++){var p=h[f];(0,o.isArray)(p)?a.push((0,n.__spreadArray)((0,n.__spreadArray)([],p,!0),[e],!1)):a.push([p,e])}}return i[e]=a,i[e]}e.default=a},56:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.findShortestPath=e.findAllPath=void 0;var n,o=(n=r(7618))&&n.__esModule?n:{default:n},i=r(8182);e.findShortestPath=function(t,e,r,n,i){var a=(0,o.default)(t,e,n,i),s=a.length,u=a.path,l=a.allPath;return{length:s[r],path:u[r],allPath:l[r]}};e.findAllPath=function(t,e,r,n){var o;if(e===r)return[[e]];var a=t.edges,s=void 0===a?[]:a,u=[e],l=((o={})[e]=!0,o),c=[],f=[],h=n?(0,i.getNeighbors)(e,s,"target"):(0,i.getNeighbors)(e,s);for(c.push(h);u.length>0&&c.length>0;){var p=c[c.length-1];if(p.length){var d=p.shift();if(d&&(u.push(d),l[d]=!0,h=n?(0,i.getNeighbors)(d,s,"target"):(0,i.getNeighbors)(d,s),c.push(h.filter(function(t){return!l[t]}))),u[u.length-1]===r){var y=u.map(function(t){return t});f.push(y),v=u.pop(),l[v]=!1,c.pop()}}else{var v=u.pop();l[v]=!1,c.pop()}}return f}},1613:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n,o=(n=r(7238))&&n.__esModule?n:{default:n};var i=function(t,e){for(var r=(0,o.default)(t,e),n=[],i=r.length,a=0;a<i;a+=1){n[a]=[];for(var s=0;s<i;s+=1)a===s?n[a][s]=0:0!==r[a][s]&&r[a][s]?n[a][s]=r[a][s]:n[a][s]=1/0}for(var u=0;u<i;u+=1)for(a=0;a<i;a+=1)for(s=0;s<i;s+=1)n[a][s]>n[a][u]+n[u][s]&&(n[a][s]=n[a][u]+n[u][s]);return n};e.default=i},5654:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=r(7061),o=r(1821),i=function(){function t(t,e,r,n,i){this.fromNode=t,this.toNode=e,this.nodeEdgeNodeLabel={nodeLabel1:r||o.VACANT_NODE_LABEL,edgeLabel:n||o.VACANT_EDGE_LABEL,nodeLabel2:i||o.VACANT_NODE_LABEL}}return t.prototype.equalTo=function(t){return this.fromNode===t.formNode&&this.toNode===t.toNode&&this.nodeEdgeNodeLabel===t.nodeEdgeNodeLabel},t.prototype.notEqualTo=function(t){return!this.equalTo(t)},t}(),a=function(){function t(){this.rmpath=[],this.dfsEdgeList=[]}return t.prototype.equalTo=function(t){var e=this.dfsEdgeList.length;if(e!==t.length)return!1;for(var r=0;r<e;r++)if(this.dfsEdgeList[r]!==t[r])return!1;return!0},t.prototype.notEqualTo=function(t){return!this.equalTo(t)},t.prototype.pushBack=function(t,e,r,n,o){return this.dfsEdgeList.push(new i(t,e,r,n,o)),this.dfsEdgeList},t.prototype.toGraph=function(t,e){void 0===t&&(t=o.VACANT_GRAPH_ID),void 0===e&&(e=!1);var r=new o.Graph(t,!0,e);return this.dfsEdgeList.forEach(function(t){var e=t.fromNode,n=t.toNode,i=t.nodeEdgeNodeLabel,a=i.nodeLabel1,s=i.edgeLabel,u=i.nodeLabel2;a!==o.VACANT_NODE_LABEL&&r.addNode(e,a),u!==o.VACANT_NODE_LABEL&&r.addNode(n,u),a!==o.VACANT_NODE_LABEL&&u!==a&&r.addEdge(void 0,e,n,s)}),r},t.prototype.buildRmpath=function(){this.rmpath=[];for(var t=void 0,e=this.dfsEdgeList.length-1;e>=0;e--){var r=this.dfsEdgeList[e],n=r.fromNode,o=r.toNode;n<o&&(void 0===t||o===t)&&(this.rmpath.push(e),t=n)}return this.rmpath},t.prototype.getNodeNum=function(){var t={};return this.dfsEdgeList.forEach(function(e){t[e.fromNode]||(t[e.fromNode]=!0),t[e.toNode]||(t[e.toNode]=!0)}),Object.keys(t).length},t}(),s=function(){function t(t){if(this.his={},this.nodesUsed={},this.edgesUsed={},this.edges=[],t){for(;t;){var e=t.edge;this.edges.push(e),this.nodesUsed[e.from]=1,this.nodesUsed[e.to]=1,this.edgesUsed[e.id]=1,t=t.preNode}this.edges=this.edges.reverse()}}return t.prototype.hasNode=function(t){return 1===this.nodesUsed[t.id]},t.prototype.hasEdge=function(t){return 1===this.edgesUsed[t.id]},t}(),u=function(){function t(t){var e=t.graphs,r=t.minSupport,n=void 0===r?2:r,o=t.minNodeNum,i=void 0===o?1:o,s=t.maxNodeNum,u=void 0===s?4:s,l=t.top,c=void 0===l?10:l,f=t.directed,h=void 0!==f&&f,p=t.verbose,d=void 0!==p&&p;this.graphs=e,this.dfsCode=new a,this.support=0,this.frequentSize1Subgraphs=[],this.frequentSubgraphs=[],this.minSupport=n,this.top=c,this.directed=h,this.counter=0,this.maxNodeNum=u,this.minNodeNum=i,this.verbose=d,this.maxNodeNum<this.minNodeNum&&(this.maxNodeNum=this.minNodeNum),this.reportDF=[]}return t.prototype.findForwardRootEdges=function(t,e){var r=this,n=[],o=t.nodeMap;return e.edges.forEach(function(t){(r.directed||e.label<=o[t.to].label)&&n.push(t)}),n},t.prototype.findBackwardEdge=function(t,e,r,n){if(!this.directed&&e===r)return null;for(var o=t.nodeMap,i=o[r.to].edges,a=i.length,s=0;s<a;s++){var u=i[s];if(!n.hasEdge(u)&&u.to===e.from)if(this.directed){if(o[e.from].label<o[r.to].label||o[e.from].label===o[r.to].label&&e.label<=u.label)return u}else if(e.label<u.label||e.label===u.label&&o[e.to].label<=o[r.to].label)return u}return null},t.prototype.findForwardPureEdges=function(t,e,r,n){for(var o=[],i=e.to,a=t.nodeMap[i].edges,s=a.length,u=0;u<s;u++){var l=a[u],c=t.nodeMap[l.to];r<=c.label&&!n.hasNode(c)&&o.push(l)}return o},t.prototype.findForwardRmpathEdges=function(t,e,r,n){for(var o=[],i=t.nodeMap,a=i[e.to].label,s=i[e.from].edges,u=s.length,l=0;l<u;l++){var c=s[l],f=i[c.to].label;e.to===c.to||r>f||n.hasNode(i[c.to])||(e.label<c.label||e.label===c.label&&a<=f)&&o.push(c)}return o},t.prototype.getSupport=function(t){var e={};return t.forEach(function(t){e[t.graphId]||(e[t.graphId]=!0)}),Object.keys(e).length},t.prototype.findMinLabel=function(t){var e=void 0;return Object.keys(t).forEach(function(r){var n=t[r],o=n.nodeLabel1,i=n.edgeLabel,a=n.nodeLabel2;e?(o<e.nodeLabel1||o===e.nodeLabel1&&i<e.edgeLabel||o===e.nodeLabel1&&i===e.edgeLabel&&a<e.nodeLabel2)&&(e={nodeLabel1:o,edgeLabel:i,nodeLabel2:a}):e={nodeLabel1:o,edgeLabel:i,nodeLabel2:a}}),e},t.prototype.isMin=function(){var t=this,e=this.dfsCode;if(this.verbose&&console.log("isMin checking",e),1===e.dfsEdgeList.length)return!0;var r=this.directed,n=e.toGraph(o.VACANT_GRAPH_ID,r),u=n.nodeMap,l=new a,c={};n.nodes.forEach(function(e){t.findForwardRootEdges(n,e).forEach(function(t){var r=u[t.to],o="".concat(e.label,"-").concat(t.label,"-").concat(r.label);c[o]||(c[o]={projected:[],nodeLabel1:e.label,edgeLabel:t.label,nodeLabel2:r.label});var i={graphId:n.id,edge:t,preNode:null};c[o].projected.push(i)})});var f=this.findMinLabel(c);if(f){l.dfsEdgeList.push(new i(0,1,f.nodeLabel1,f.edgeLabel,f.nodeLabel2));var h="".concat(f.nodeLabel1,"-").concat(f.edgeLabel,"-").concat(f.nodeLabel2);return function a(c){for(var f=l.buildRmpath(),h=l.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,p=l.dfsEdgeList[f[0]].toNode,d={},y=!1,v=0,g=r?-1:0,m=function(e){if(y)return"break";c.forEach(function(r){var o=new s(r),i=t.findBackwardEdge(n,o.edges[f[e]],o.edges[f[0]],o);i&&(d[i.label]||(d[i.label]={projected:[],edgeLabel:i.label}),d[i.label].projected.push({graphId:n.id,edge:d,preNode:r}),v=l.dfsEdgeList[f[e]].fromNode,y=!0)})},b=f.length-1;b>g&&"break"!==m(b);b--);if(y){var w=t.findMinLabel(d);l.dfsEdgeList.push(new i(p,v,o.VACANT_NODE_LABEL,w.edgeLabel,o.VACANT_NODE_LABEL));var S=l.dfsEdgeList.length-1;return t.dfsCode.dfsEdgeList[S]===l.dfsEdgeList[S]&&a(d[w.edgeLabel].projected)}var x={};y=!1;var _=0;c.forEach(function(e){var r=new s(e),o=t.findForwardPureEdges(n,r.edges[f[0]],h,r);o.length>0&&(y=!0,_=p,o.forEach(function(t){var r="".concat(t.label,"-").concat(u[t.to].label);x[r]||(x[r]={projected:[],edgeLabel:t.label,nodeLabel2:u[t.to].label}),x[r].projected.push({graphId:n.id,edge:t,preNode:e})}))});var E=f.length,O=function(e){if(y)return"break";var r=f[e];c.forEach(function(e){var o=new s(e),i=t.findForwardRmpathEdges(n,o.edges[r],h,o);i.length>0&&(y=!0,_=l.dfsEdgeList[r].fromNode,i.forEach(function(t){var r="".concat(t.label,"-").concat(u[t.to].label);x[r]||(x[r]={projected:[],edgeLabel:t.label,nodeLabel2:u[t.to].label}),x[r].projected.push({graphId:n.id,edge:t,preNode:e})}))})};for(b=0;b<E&&"break"!==O(b);b++);if(!y)return!0;var P=t.findMinLabel(x);l.dfsEdgeList.push(new i(_,p+1,o.VACANT_NODE_LABEL,P.edgeLabel,P.nodeLabel2));var k=l.dfsEdgeList.length-1;return e.dfsEdgeList[k]===l.dfsEdgeList[k]&&a(x["".concat(P.edgeLabel,"-").concat(P.nodeLabel2)].projected)}(c[h].projected)}},t.prototype.report=function(){if(!(this.dfsCode.getNodeNum()<this.minNodeNum)){this.counter++;var t=this.dfsCode.toGraph(this.counter,this.directed);this.frequentSubgraphs.push((0,n.clone)(t))}},t.prototype.subGraphMining=function(t){var e=this;if(!(this.getSupport(t)<this.minSupport)&&this.isMin()){this.report();var r=this.dfsCode.getNodeNum(),n=this.dfsCode.buildRmpath(),a=this.dfsCode.dfsEdgeList[n[0]].toNode,u=this.dfsCode.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,l={},c={};t.forEach(function(t){for(var o=e.graphs[t.graphId],i=o.nodeMap,f=new s(t),h=n.length-1;h>=0;h--){var p=e.findBackwardEdge(o,f.edges[n[h]],f.edges[n[0]],f);if(p){var d="".concat(e.dfsCode.dfsEdgeList[n[h]].fromNode,"-").concat(p.label);c[d]||(c[d]={projected:[],toNodeId:e.dfsCode.dfsEdgeList[n[h]].fromNode,edgeLabel:p.label}),c[d].projected.push({graphId:t.graphId,edge:p,preNode:t})}}if(!(r>=e.maxNodeNum)){e.findForwardPureEdges(o,f.edges[n[0]],u,f).forEach(function(e){var r="".concat(a,"-").concat(e.label,"-").concat(i[e.to].label);l[r]||(l[r]={projected:[],fromNodeId:a,edgeLabel:e.label,nodeLabel2:i[e.to].label}),l[r].projected.push({graphId:t.graphId,edge:e,preNode:t})});var y=function(r){e.findForwardRmpathEdges(o,f.edges[n[r]],u,f).forEach(function(o){var a="".concat(e.dfsCode.dfsEdgeList[n[r]].fromNode,"-").concat(o.label,"-").concat(i[o.to].label);l[a]||(l[a]={projected:[],fromNodeId:e.dfsCode.dfsEdgeList[n[r]].fromNode,edgeLabel:o.label,nodeLabel2:i[o.to].label}),l[a].projected.push({graphId:t.graphId,edge:o,preNode:t})})};for(h=0;h<n.length;h++)y(h)}}),Object.keys(c).forEach(function(t){var r=c[t],n=r.toNodeId,o=r.edgeLabel;e.dfsCode.dfsEdgeList.push(new i(a,n,"-1",o,"-1")),e.subGraphMining(c[t].projected),e.dfsCode.dfsEdgeList.pop()}),Object.keys(l).forEach(function(t){var r=l[t],n=r.fromNodeId,s=r.edgeLabel,u=r.nodeLabel2;e.dfsCode.dfsEdgeList.push(new i(n,a+1,o.VACANT_NODE_LABEL,s,u)),e.subGraphMining(l[t].projected),e.dfsCode.dfsEdgeList.pop()})}},t.prototype.generate1EdgeFrequentSubGraphs=function(){var t=this.graphs,e=this.directed,r=this.minSupport,n=this.frequentSize1Subgraphs,o={},i={},a={},s={};return Object.keys(t).forEach(function(r){var n=t[r],u=n.nodeMap;n.nodes.forEach(function(t,n){var l=t.label,c="".concat(r,"-").concat(l);if(!a[c]){var f=o[l]||0;f++,o[l]=f}a[c]={graphKey:r,label:l},t.edges.forEach(function(t){var n=l,o=u[t.to].label;if(!e&&n>o){var a=o;o=n,n=a}var c=t.label,f="".concat(r,"-").concat(n,"-").concat(c,"-").concat(o),h="".concat(n,"-").concat(c,"-").concat(o);if(!i[h]){var p=i[h]||0;p++,i[h]=p}s[f]={graphId:r,nodeLabel1:n,edgeLabel:c,nodeLabel2:o}})})}),Object.keys(o).forEach(function(t){if(!(o[t]<r)){var e={nodes:[],edges:[]};e.nodes.push({id:"0",label:t}),n.push(e)}}),n},t.prototype.run=function(){var t=this;if(this.frequentSize1Subgraphs=this.generate1EdgeFrequentSubGraphs(),!(this.maxNodeNum<2)){var e=this.graphs,r=(this.directed,{});Object.keys(e).forEach(function(n){var o=e[n],i=o.nodeMap;o.nodes.forEach(function(e){t.findForwardRootEdges(o,e).forEach(function(t){var o=i[t.to],a="".concat(e.label,"-").concat(t.label,"-").concat(o.label);r[a]||(r[a]={projected:[],nodeLabel1:e.label,edgeLabel:t.label,nodeLabel2:o.label});var s={graphId:n,edge:t,preNode:null};r[a].projected.push(s)})})}),Object.keys(r).forEach(function(e){var n=r[e],o=n.projected,a=n.nodeLabel1,s=n.edgeLabel,u=n.nodeLabel2;t.dfsCode.dfsEdgeList.push(new i(0,1,a,s,u)),t.subGraphMining(o),t.dfsCode.dfsEdgeList.pop()})}},t}(),l=function(t){var e=t.graphs,r=t.directed,n=void 0!==r&&r,i=t.nodeLabelProp,a=void 0===i?"cluster":i,s=t.edgeLabelProp,l=void 0===s?"cluster":s,c=function(t,e,r,n){var i={};return Object.keys(t).forEach(function(a,s){var u=t[a],l=new o.Graph(s,!0,e),c={};u.nodes.forEach(function(t,e){l.addNode(e,t[r]),c[t.id]=e}),u.edges.forEach(function(t,e){var r=c[t.source],o=c[t.target];l.addEdge(-1,r,o,t[n])}),l&&l.getNodeNum()&&(i[l.id]=l)}),i}(e,n,a,l),f=t.minSupport,h=t.maxNodeNum,p=t.minNodeNum,d=t.verbose,y=t.top,v=new u({graphs:c,minSupport:f,maxNodeNum:h,minNodeNum:p,top:y,verbose:d,directed:n});return v.run(),function(t,e,r){var n=[];return t.forEach(function(t){var o={nodes:[],edges:[]};t.nodes.forEach(function(t){var r;o.nodes.push(((r={id:"".concat(t.id)})[e]=t.label,r))}),t.edges.forEach(function(t){var e;o.edges.push(((e={source:"".concat(t.from),target:"".concat(t.to)})[r]=t.label,e))}),n.push(o)}),n}(v.frequentSubgraphs,a,l)};e.default=l},1821:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.VACANT_NODE_LABEL=e.VACANT_NODE_ID=e.VACANT_GRAPH_ID=e.VACANT_EDGE_LABEL=e.VACANT_EDGE_ID=e.Node=e.Graph=e.Edge=e.AUTO_EDGE_ID=void 0;var r=-1;e.VACANT_EDGE_ID=r;var n=-1;e.VACANT_NODE_ID=n;var o="-1";e.VACANT_EDGE_LABEL=o;var i="-1";e.VACANT_NODE_LABEL=i;e.VACANT_GRAPH_ID=-1;e.AUTO_EDGE_ID="-1";var a=function(){return function(t,e,i,a){void 0===t&&(t=r),void 0===e&&(e=n),void 0===i&&(i=n),void 0===a&&(a=o),this.id=t,this.from=e,this.to=i,this.label=a}}();e.Edge=a;var s=function(){function t(t,e){void 0===t&&(t=n),void 0===e&&(e=i),this.id=t,this.label=e,this.edges=[],this.edgeMap={}}return t.prototype.addEdge=function(t){this.edges.push(t),this.edgeMap[t.id]=t},t}();e.Node=s;var u=function(){function t(t,e,r){void 0===t&&(t=n),void 0===e&&(e=!0),void 0===r&&(r=!1),this.id=t,this.edgeIdAutoIncrease=e,this.edges=[],this.nodes=[],this.nodeMap={},this.edgeMap={},this.nodeLabelMap={},this.edgeLabelMap={},this.counter=0,this.directed=r}return t.prototype.getNodeNum=function(){return this.nodes.length},t.prototype.addNode=function(t,e){if(!this.nodeMap[t]){var r=new s(t,e);this.nodes.push(r),this.nodeMap[t]=r,this.nodeLabelMap[e]||(this.nodeLabelMap[e]=[]),this.nodeLabelMap[e].push(t)}},t.prototype.addEdge=function(t,e,r,n){if((this.edgeIdAutoIncrease||void 0===t)&&(t=this.counter++),!(this.nodeMap[e]&&this.nodeMap[r]&&this.nodeMap[r].edgeMap[t])){var o=new a(t,e,r,n);if(this.edges.push(o),this.edgeMap[t]=o,this.nodeMap[e].addEdge(o),this.edgeLabelMap[n]||(this.edgeLabelMap[n]=[]),this.edgeLabelMap[n].push(o),!this.directed){var i=new a(t,r,e,n);this.nodeMap[r].addEdge(i),this.edgeLabelMap[n].push(i)}}},t}();e.Graph=u},9317:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=r(7582),o=u(r(1613)),i=u(r(5654)),a=u(r(7618)),s=r(8182);function u(t){return t&&t.__esModule?t:{default:t}}var l=function(t,e,r,n){void 0===r&&(r="cluster"),void 0===n&&(n=2);var o=[],i=t.nodes;return e.forEach(function(t,e){o.push(c(i,t,e,r,n))}),o},c=function(t,e,r,n,o){var i=[r],a=[],s={};return e.forEach(function(e,u){if(e<=o&&r!==u){i.push(u),a.push(t[u]);var l=t[u][n];s[l]?(s[l].count++,s[l].dists.push(e)):s[l]={count:1,dists:[e]}}}),Object.keys(s).forEach(function(t){s[t].dists=s[t].dists.sort(function(t,e){return t-e})}),{nodeIdx:r,nodeId:t[r].id,nodeIdxs:i,neighbors:a,neighborNum:i.length-1,nodeLabelCountMap:s}},f=function(t,e,r,n){var o=r.nodes;return n||(n={}),Object.keys(t).forEach(function(i){var a,s;if(!n||!n[i]){n[i]={nodes:[],edges:[]};var u=t[i],l=null===(a=e[u.start])||void 0===a?void 0:a.nodeIdxs,c=null===(s=e[u.end])||void 0===s?void 0:s.nodeIdxs;if(l&&c){var f=new Set(c),h=l.filter(function(t){return f.has(t)});if(h&&h.length){for(var p={},d=h.length,y=0;y<d;y++){var v=o[h[y]];n[i].nodes.push(v),p[v.id]=!0}r.edges.forEach(function(t){p[t.source]&&p[t.target]&&n[i].edges.push(t)})}}}}),n},h=function(t,e,r,n){var o,i,a={};t.nodes.forEach(function(t){a[t.id]=t});var s=0;return!(null===(o=null===e||void 0===e?void 0:e.edges)||void 0===o?void 0:o.length)||(null===(i=null===e||void 0===e?void 0:e.nodes)||void 0===i?void 0:i.length)<2?0:(t.edges.forEach(function(t){var o=a[t.source][r],i=a[t.target][r],u=null===e||void 0===e?void 0:e.nodes[0][r],l=null===e||void 0===e?void 0:e.nodes[1][r],c=null===e||void 0===e?void 0:e.edges[0][n];t[n]===c&&(o===u&&i===l||o===l&&i===u)&&s++}),s)},p=function(t,e){var r={},n={};return t.forEach(function(t,o){r[t.id]={idx:o,node:t,degree:0,inDegree:0,outDegree:0};var i=t[e];n[i]||(n[i]=[]),n[i].push(t)}),{nodeMap:r,nodeLabelMap:n}},d=function(t,e,r){var n={},o={};return t.forEach(function(t,i){n["".concat(s.uniqueId)]={idx:i,edge:t};var a=t[e];o[a]||(o[a]=[]),o[a].push(t);var u=r[t.source];u&&(u.degree++,u.outDegree++);var l=r[t.target];l&&(l.degree++,l.inDegree++)}),{edgeMap:n,edgeLabelMap:o}},y=function(t,e,r){var n=e.length,o={};return e.forEach(function(e,i){for(var a=r?0:i+1,s=t[i].id,u=a;u<n;u++)if(i!==u){var l=t[u].id,c=e[u];o["".concat(s,"-").concat(l)]=c,r||(o["".concat(l,"-").concat(s)]=c)}}),o},v=function(t,e,r,n,o,i,a,s,u,l,c){var p,d="".concat(e.id,"-").concat(r.id);if(l&&l[d])return l[d];var y=c?c[d]:void 0;if(!y){var v=((p={})[d]={start:n[e.id].idx,end:n[r.id].idx,distance:o},p);y=(c=f(v,i,t,c))[d]}return h(y,a,s,u)},g=function(t,e,r,n){var o,i,a,s=null===(o=t[e])||void 0===o?void 0:o.degree,u=null===(i=t[e])||void 0===i?void 0:i.inDegree,l=null===(a=t[e])||void 0===a?void 0:a.outDegree;return void 0===t[e]&&(s=1/0,u=1/0,l=1/0,n[e].forEach(function(t){var e=r[t.id].degree;s>e&&(s=e);var n=r[t.id].inDegree;u>n&&(u=n);var o=r[t.id].outDegree;l>o&&(l=o)}),t[e]={degree:s,inDegree:u,outDegree:l}),{minPatternNodeLabelDegree:s,minPatternNodeLabelInDegree:u,minPatternNodeLabelOutDegree:l}},m=function(t,e,r,s,u,m,b){var w;if(void 0===r&&(r=!1),void 0===m&&(m="cluster"),void 0===b&&(b="cluster"),t&&t.nodes){var S=t.nodes.length;if(S){var x=(0,o.default)(t,r),_=(0,o.default)(e,r),E=y(t.nodes,x,r),O=y(e.nodes,_,r),P=p(t.nodes,m),k=P.nodeMap,C=P.nodeLabelMap,T=p(e.nodes,m),A=T.nodeMap,M=T.nodeLabelMap;d(t.edges,b,k);var j=d(e.edges,b,A).edgeLabelMap,I=[];null===_||void 0===_||_.forEach(function(t){I=I.concat(t)}),u||(u=Math.max.apply(Math,(0,n.__spreadArray)((0,n.__spreadArray)([],I,!1),[2],!1))),s||(s=u);var N=l(t,x,m,s),L=l(e,_,m,s),R=function(t,e,r,n,o){var i=Math.ceil(r/e),a={},s=0;return n.forEach(function(t,n){for(var u=0,l=0,c=t.nodeIdxs,f=t.neighborNum-1;u<i;){for(var h=c[1+Math.floor(Math.random()*f)],p=0;(a["".concat(n,"-").concat(h)]||a["".concat(h,"-").concat(n)])&&(h=Math.floor(Math.random()*e),!(++p>2*e)););if(p<2*e&&(a["".concat(n,"-").concat(h)]={start:n,end:h,distance:o[n][h]},u++,++s>=r))return a;if(++l>2*e)break}u<i&&(i=(i+(i-u))/(e-n-1))}),a}(0,S,Math.min(100,S*(S-1)/2),N,x),D=f(R,N,t),B={graphs:D,nodeLabelProp:m,edgeLabelProp:b,minSupport:1,minNodeNum:1,maxNodeNum:4,directed:r},F=(0,i.default)(B).slice(0,10),G=F.length,U=[];F.forEach(function(t,e){U[e]={},Object.keys(D).forEach(function(r){var n=D[r],o=h(n,t,m,b);U[e][r]=o})});var z=function(t,e,r){for(var n=1/0,o=0,i=function(e){var r=t[e],i=[];Object.keys(r).sort(function(t,e){return r[t]-r[e]}).forEach(function(t,e){i[e%10]||(i[e%10]={graphs:[],totalCount:0,aveCount:0}),i[e%10].graphs.push(t),i[e%10].totalCount+=r[t]});var a=0,s=[];i.forEach(function(t){var e=t.totalCount/t.graphs.length;t.aveCount=e,s.push(e);var n=0,o=t.length;t.graphs.forEach(function(e,o){var i=r[e];t.graphs.forEach(function(t,e){o!==e&&(n+=Math.abs(i-r[t]))})}),a+=n/=o*(o-1)/2}),a/=i.length;var u=0;s.forEach(function(t,e){s.forEach(function(r,n){e!==n&&(u+=Math.abs(t-r))}),u/=s.length*(s.length-1)/2});var l=u-a;n<l&&(n=l,o=e)},a=0;a<e;a++)i(a);return{structure:r[o],structureCountMap:t[o]}}(U,G,F),V=z.structure,H=z.structureCountMap,W=e.nodes[0],q=[],Y=null===(w=e.nodes[0])||void 0===w?void 0:w[m],X=-1/0;e.nodes.forEach(function(t){var e=t[m],r=C[e];(null===r||void 0===r?void 0:r.length)>X&&(X=r.length,q=r,Y=e,W=t)});var J={},K={},Q={},Z={},$={},tt={};Object.keys(M).forEach(function(n,o){$[n]=[],r&&(tt[n]=[]);var i=-1/0,a={};M[n].forEach(function(t){var e=O["".concat(W.id,"-").concat(t.id)];if(e&&$[n].push(e),i<e&&(i=e),a["".concat(W.id,"-").concat(t.id)]={start:0,end:A[t.id].idx,distance:e},r){var o=O["".concat(t.id,"-").concat(W.id)];o&&tt[n].push(o)}}),$[n]=$[n].sort(function(t,e){return t-e}),r&&(tt[n]=tt[n].sort(function(t,e){return t-e})),K=f(a,L,e,K);var s=[];if(Object.keys(a).forEach(function(t){if(Q[t])s.push(Q[t]);else{var e=K[t];Q[t]=h(e,V,m,b),s.push(Q[t])}}),s=s.sort(function(t,e){return e-t}),Z["".concat(W.id,"-").concat(n)]=s,n!==Y)for(var u=function(e){var r=q[e],o=N[k[r.id].idx],i=o.nodeLabelCountMap[n],a=M[n].length;if(!i||i.count<a)return q.splice(e,1),"continue";for(var u=!1,l=0;l<a;l++)if(i.dists[l]>$[n][l]){u=!0;break}if(u)return q.splice(e,1),"continue";var c={};o.neighbors.forEach(function(t){var e=E["".concat(r.id,"-").concat(t.id)];c["".concat(r.id,"-").concat(t.id)]={start:k[r.id].idx,end:k[t.id].idx,distance:e}}),D=f(c,N,t,D);var p=[];Object.keys(c).forEach(function(t){if(H[t])p.push(H[t]);else{var e=D[t];H[t]=h(e,V,m,b),p.push(H[t])}}),p=p.sort(function(t,e){return e-t});var d=!1;for(l=0;l<a;l++)if(p[l]<s[l]){d=!0;break}return d?(q.splice(e,1),"continue"):void 0},l=((null===q||void 0===q?void 0:q.length)||0)-1;l>=0;l--)u(l)});var et=[];null===q||void 0===q||q.forEach(function(n){for(var o=k[n.id].idx,i=c(t.nodes,x[o],o,m,u).neighbors,a=!1,s=i.length-1;s>=0;s--){if(i.length+1<e.nodes.length)return void(a=!0);var l=i[s],f=l[m];if(M[f]&&M[f].length)if($[f]&&$[f].length){var h="".concat(n.id,"-").concat(l.id),p=E[h],d=$[f].length-1;if(p>$[f][d])i.splice(s,1);else{if(r){var y="".concat(l.id,"-").concat(n.id),w=E[y];if(d=tt[f].length-1,w>tt[f][d]){i.splice(s,1);continue}}var S=H[h]?H[h]:v(t,n,l,k,p,N,V,m,b,H,D),_="".concat(W.id,"-").concat(f);if(S<Z[_][Z[_].length-1])i.splice(s,1);else{var O=g(J,f,A,M),P=O.minPatternNodeLabelDegree;O.minPatternNodeLabelInDegree,O.minPatternNodeLabelOutDegree,k[l.id].degree<P&&i.splice(s,1)}}}else i.splice(s,1);else i.splice(s,1)}a||et.push({nodes:[n].concat(i)})});var rt=(0,a.default)(e,W.id,!1).length,nt={};r?(Object.keys(rt).forEach(function(t){var e=A[t].node[m];nt[e]?nt[e].push(rt[t]):nt[e]=[rt[t]]}),Object.keys(nt).forEach(function(t){nt[t].sort(function(t,e){return t-e})})):nt=$;for(var ot=function(n){var o=et[n],i=o.nodes[0],s={},u={};o.nodes.forEach(function(t,e){u[t.id]={idx:e,node:t,degree:0,inDegree:0,outDegree:0};var r=t[m];s[r]?s[r]++:s[r]=1});var l=[],c={};t.edges.forEach(function(t){u[t.source]&&u[t.target]&&(l.push(t),c[t[b]]?c[t[b]]++:c[t[b]]=1,u[t.source].degree++,u[t.target].degree++,u[t.source].outDegree++,u[t.target].inDegree++)});for(var f=Object.keys(j).length,h=!1,p=0;p<f;p++){var d=Object.keys(j)[p];if(!c[d]||c[d]<j[d].length){h=!0;break}}if(h)return et.splice(n,1),"continue";var y=l.length;if(y<e.edges.length)return et.splice(n,1),"break";var v=!1,w=function(t){var e=l[t],n=e[b],o=j[n];if(!o||!o.length)return c[n]--,o&&c[n]<o.length?(v=!0,"break"):(l.splice(t,1),u[e.source].degree--,u[e.target].degree--,u[e.source].outDegree--,u[e.target].inDegree--,"continue");var i=u[e.source].node[m],a=u[e.target].node[m],s=!1;return o.forEach(function(t){var e=A[t.source].node,n=A[t.target].node;e[m]===i&&n[m]===a&&(s=!0),r||e[m]!==a||n[m]!==i||(s=!0)}),s?void 0:(c[n]--,o&&c[n]<o.length?(v=!0,"break"):(l.splice(t,1),u[e.source].degree--,u[e.target].degree--,u[e.source].outDegree--,u[e.target].inDegree--,"continue"))};for(p=y-1;p>=0&&"break"!==w(p);p--);if(v)return et.splice(n,1),"continue";o.edges=l;var S=(0,a.default)(o,o.nodes[0].id,!1).length;if(Object.keys(S).reverse().forEach(function(t){if(t!==o.nodes[0].id&&!v){if(S[t]===1/0){var e=u[t].node[m];if(s[e]--,s[e]<M[e].length)return void(v=!0);var r=o.nodes.indexOf(u[t].node);return o.nodes.splice(r,1),void(u[t]=void 0)}var n=k[t].node[m];if(!nt[n]||!nt[n].length||S[t]>nt[n][nt[n].length-1]){if(e=u[t].node[m],s[e]--,s[e]<M[e].length)return void(v=!0);r=o.nodes.indexOf(u[t].node),o.nodes.splice(r,1),u[t]=void 0}}}),v)return et.splice(n,1),"continue";for(var x=!0,_=0;x&&!v;){if(x=!1,r?u[i.id].degree<A[W.id].degree||u[i.id].inDegree<A[W.id].inDegree||u[i.id].outDegree<A[W.id].outDegree:u[i.id].degree<A[W.id].degree){v=!0;break}if(s[i[m]]<M[i[m]].length){v=!0;break}for(var E=o.nodes.length-1;E>=0;E--){var O=o.nodes[E],P=u[O.id].degree,C=u[O.id].inDegree,T=u[O.id].outDegree,I=O[m],N=g(J,I,A,M),L=N.minPatternNodeLabelDegree,R=N.minPatternNodeLabelInDegree,D=N.minPatternNodeLabelOutDegree;if(r?P<L||C<R||T<D:P<L){if(s[O[m]]--,s[O[m]]<M[O[m]].length){v=!0;break}o.nodes.splice(E,1),u[O.id]=void 0,x=!0}}if(v||!x&&0!==_)break;for(var B=(y=l.length)-1;B>=0;B--){var F=l[B];if(!u[F.source]||!u[F.target]){l.splice(B,1);var G=F[b];if(c[G]--,u[F.source]&&(u[F.source].degree--,u[F.source].outDegree--),u[F.target]&&(u[F.target].degree--,u[F.target].inDegree--),j[G]&&c[G]<j[G].length){v=!0;break}x=!0}}_++}return v?(et.splice(n,1),"continue"):v||o.nodes.length<e.nodes.length||l.length<e.edges.length?(et.splice(n,1),"continue"):void 0},it=et.length-1;it>=0&&"break"!==ot(it);it--);var at=et.length,st=function(t){var e={};et[t].edges.forEach(function(t){var r="".concat(t.source,"-").concat(t.target,"-").concat(t.label);e[r]?e[r]++:e[r]=1});for(var r=function(t){var r={};et[t].edges.forEach(function(t){var e="".concat(t.source,"-").concat(t.target,"-").concat(t.label);r[e]?r[e]++:r[e]=1});var n=!0;Object.keys(r).length!==Object.keys(e).length?n=!1:Object.keys(e).forEach(function(t){r[t]!==e[t]&&(n=!1)}),n&&et.splice(t,1)},n=at-1;n>t;n--)r(n);at=et.length};for(it=0;it<=at-1;it++)st(it);return et}}};e.default=m},3760:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n,o=(n=r(7238))&&n.__esModule?n:{default:n},i=r(8182);var a=function(t,e,r,n){void 0===e&&(e=!1),void 0===r&&(r="weight"),void 0===n&&(n=1e3);var a=t.nodes,s=void 0===a?[]:a,u=t.edges,l=void 0===u?[]:u,c={},f={};s.forEach(function(t,e){var r=(0,i.uniqueId)();t.clusterId=r,c[r]={id:r,nodes:[t]},f[t.id]={node:t,idx:e}});var h=[],p={};(0,o.default)(t,e).forEach(function(t,e){var r=0,n=s[e].id;p[n]={},t.forEach(function(t,e){if(t){r+=t;var o=s[e].id;p[n][o]=t}}),h.push(r)});for(var d=0,y=function(){var t=!1;if(s.forEach(function(e){var r={};Object.keys(p[e.id]).forEach(function(t){var n=p[e.id][t],o=f[t].node.clusterId;r[o]||(r[o]=0),r[o]+=n});var n=-1/0,o=[];if(Object.keys(r).forEach(function(t){n<r[t]?(n=r[t],o=[t]):n===r[t]&&o.push(t)}),1!==o.length||o[0]!==e.clusterId){var i=o.indexOf(e.clusterId);if(i>=0&&o.splice(i,1),o&&o.length){t=!0;var a=c[e.clusterId],s=a.nodes.indexOf(e);a.nodes.splice(s,1);var u=Math.floor(Math.random()*o.length),l=c[o[u]];l.nodes.push(e),e.clusterId=l.id}}}),!t)return"break";d++};d<n&&"break"!==y(););Object.keys(c).forEach(function(t){var e=c[t];e.nodes&&e.nodes.length||delete c[t]});var v=[],g={};l.forEach(function(t){var e=t.source,n=t.target,o=t[r]||1,i=f[e].node.clusterId,a=f[n].node.clusterId,s="".concat(i,"---").concat(a);if(g[s])g[s].weight+=o,g[s].count++;else{var u={source:i,target:a,weight:o,count:1};g[s]=u,v.push(u)}});var m=[];return Object.keys(c).forEach(function(t){m.push(c[t])}),{clusters:m,clusterEdges:v}};e.default=a},2006:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=r(7061),o=u(r(7238)),i=u(r(3532)),a=r(2594),s=r(2821);function u(t){return t&&t.__esModule?t:{default:t}}var l=function(t,e,r,n){for(var o=e.length,i=2*n,a=0,s=0;s<o;s++)for(var u=t[s].clusterId,l=0;l<o;l++){if(u===t[l].clusterId)a+=(e[s][l]||0)-(r[s]||0)*(r[l]||0)/i}return a*=1/i},c=function(t,e){void 0===t&&(t=[]);for(var r=t.length,n=new i.default([]),o=0;o<r;o++)n=n.add(new i.default(e[o]));var a=n.avg(r);a.normalize();var s=0;for(o=0;o<r;o++){s+=(l=new i.default(e[o])).squareEuclideanDistance(a)}var u=[];t.forEach(function(){u.push([])});for(o=0;o<r;o++){var l=new i.default(e[o]);t[o].clusterInertial=0;for(var c=0;c<r;c++)if(o!==c){var f=new i.default(e[c]);u[o][c]=l.squareEuclideanDistance(f),t[o].clusterInertial+=u[o][c]}else u[o][c]=0}var h=0,p=2*r*s;for(o=0;o<r;o++){var d=t[o].clusterId;for(c=0;c<r;c++){var y=t[c].clusterId;if(o!==c&&d===y)h+=t[o].clusterInertial*t[c].clusterInertial/Math.pow(p,2)-u[o][c]/p}}return Number(h.toFixed(4))},f=function(t,e,r,i,u,f,h,p,d){void 0===e&&(e=!1),void 0===r&&(r="weight"),void 0===i&&(i=1e-4),void 0===u&&(u=!1),void 0===f&&(f=void 0),void 0===h&&(h=[]),void 0===p&&(p=["id"]),void 0===d&&(d=1);var y=t.nodes,v=void 0===y?[]:y,g=t.edges,m=void 0===g?[]:g,b=[];if(u){v.forEach(function(t,e){t.properties=t.properties||{},t.originIndex=e});var w=[];v.every(function(t){return t.hasOwnProperty("nodeType")})&&(w=Array.from(new Set(v.map(function(t){return t.nodeType}))),v.forEach(function(t){t.properties.nodeType=w.findIndex(function(e){return e===t.nodeType})}));var S=(0,a.getAllProperties)(v,f);b=(0,s.oneHot)(S,h,p)}var x=1,_={},E={};v.forEach(function(t,e){var r=String(x++);t.clusterId=r,_[r]={id:r,nodes:[t]},E[t.id]={node:t,idx:e}});var O=(0,o.default)(t,e),P=[],k={},C=0;O.forEach(function(t,e){var r=0,n=v[e].id;k[n]={},t.forEach(function(t,e){if(t){r+=t;var o=v[e].id;k[n][o]=t,C+=t}}),P.push(r)}),C/=2;for(var T=1/0,A=1/0,M=0,j=[],I={};;){T=u&&v.every(function(t){return t.hasOwnProperty("properties")})?l(v,O,P,C)+c(v,b)*d:l(v,O,P,C),0===M&&(A=T,j=v,I=_);var N=T>0&&T>A&&T-A<i;if(T>A&&(j=v.map(function(t){return{node:t,clusterId:t.clusterId}}),I=(0,n.clone)(_),A=T),N||M>100)break;M++,Object.keys(_).forEach(function(t){var e=0;m.forEach(function(n){var o=n.source,i=n.target,a=E[o].node.clusterId,s=E[i].node.clusterId;(a===t&&s!==t||s===t&&a!==t)&&(e+=n[r]||1)}),_[t].sumTot=e}),v.forEach(function(t,e){var n,o=_[t.clusterId],i=0,a=P[e]/(2*C),s=0,l=o.nodes;l.forEach(function(t){var r=E[t.id].idx;s+=O[e][r]||0});var f=s-o.sumTot*a,h=l.filter(function(e){return e.id!==t.id}),p=[];h.forEach(function(t,e){p[e]=b[t.originIndex]});var y=c(h,b)*d,v=k[t.id];if(Object.keys(v).forEach(function(r){var o=E[r].node.clusterId;if(o!==t.clusterId){var s=_[o],l=s.nodes;if(l&&l.length){var h=0;l.forEach(function(t){var r=E[t.id].idx;h+=O[e][r]||0});var p=h-s.sumTot*a,v=l.concat([t]),g=[];v.forEach(function(t,e){g[e]=b[t.originIndex]});var m=c(v,b)*d,w=p-f;u&&(w=p+m-(f+y)),w>i&&(i=w,n=s)}}}),i>0){n.nodes.push(t);var g=t.clusterId;t.clusterId=n.id;var w=o.nodes.indexOf(t);o.nodes.splice(w,1);var S=0,x=0;m.forEach(function(t){var e=t.source,o=t.target,i=E[e].node.clusterId,a=E[o].node.clusterId;(i===n.id&&a!==n.id||a===n.id&&i!==n.id)&&(S+=t[r]||1),(i===g&&a!==g||a===g&&i!==g)&&(x+=t[r]||1)}),n.sumTot=S,o.sumTot=x}})}var L={},R=0;Object.keys(I).forEach(function(t){var e=I[t];if(e.nodes&&e.nodes.length){var r=String(R+1);r!==t&&(e.id=r,e.nodes=e.nodes.map(function(t){return{id:t.id,clusterId:r}}),I[r]=e,L[t]=r,delete I[t],R++)}else delete I[t]}),j.forEach(function(t){var e=t.node,r=t.clusterId;e&&(e.clusterId=r,e.clusterId&&L[e.clusterId]&&(e.clusterId=L[e.clusterId]))});var D=[],B={};m.forEach(function(t){var e=t.source,n=t.target,o=t[r]||1,i=E[e].node.clusterId,a=E[n].node.clusterId;if(i&&a){var s="".concat(i,"---").concat(a);if(B[s])B[s].weight+=o,B[s].count++;else{var u={source:i,target:a,weight:o,count:1};B[s]=u,D.push(u)}}});var F=[];return Object.keys(I).forEach(function(t){F.push(I[t])}),{clusters:F,clusterEdges:D}};e.default=f},15:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=a(r(9511)),o=a(r(7605)),i=r(8182);function a(t){return t&&t.__esModule?t:{default:t}}var s=function(t,e){var r=[],n=t.nodes,a=void 0===n?[]:n,s=t.edges,u=void 0===s?[]:s;if(0===a.length)return r;var l=a[0],c=new Set;c.add(l);var f=new o.default(function(t,r){return e?t.weight-r.weight:0});for((0,i.getEdgesByNodeId)(l.id,u).forEach(function(t){f.insert(t)});!f.isEmpty();){var h=f.delMin(),p=h.source,d=h.target;c.has(p)&&c.has(d)||(r.push(h),c.has(p)||(c.add(p),(0,i.getEdgesByNodeId)(p,u).forEach(function(t){f.insert(t)})),c.has(d)||(c.add(d),(0,i.getEdgesByNodeId)(d,u).forEach(function(t){f.insert(t)})))}return r},u=function(t,e){var r=[],o=t.nodes,i=void 0===o?[]:o,a=t.edges,s=void 0===a?[]:a;if(0===i.length)return r;var u=s.map(function(t){return t});e&&u.sort(function(t,e){return t.weight-e.weight});for(var l=new n.default(i.map(function(t){return t.id}));u.length>0;){var c=u.shift(),f=c.source,h=c.target;l.connected(f,h)||(r.push(c),l.union(f,h))}return r},l=function(t,e,r){return r?{prim:s,kruskal:u}[r](t,e):u(t,e)};e.default=l},6155:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n,o=(n=r(3597))&&n.__esModule?n:{default:n},i=r(8182);var a=function(t,e,r){"number"!=typeof e&&(e=1e-6),"number"!=typeof r&&(r=.85);for(var n,a=1,s=0,u=1e3,l=t.nodes,c=void 0===l?[]:l,f=t.edges,h=void 0===f?[]:f,p=c.length,d={},y={},v=0;v<p;++v)d[m=(_=c[v]).id]=1/p,y[m]=1/p;for(var g=(0,o.default)(t);u>0&&a>e;){for(s=0,v=0;v<p;++v){var m=(_=c[v]).id;if(n=0,0===g[_.id].inDegree)d[m]=0;else{for(var b=(0,i.getNeighbors)(m,h,"source"),w=0;w<b.length;++w){var S=b[w],x=g[S].outDegree;x>0&&(n+=y[S]/x)}d[m]=r*n,s+=d[m]}}for(s=(1-s)/p,a=0,v=0;v<p;++v){var _;n=d[m=(_=c[v]).id]+s,a+=Math.abs(n-y[m]),y[m]=n}u-=1}return y};e.default=a},7605:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=function(t,e){return t-e},n=function(){function t(t){void 0===t&&(t=r),this.compareFn=t,this.list=[]}return t.prototype.getLeft=function(t){return 2*t+1},t.prototype.getRight=function(t){return 2*t+2},t.prototype.getParent=function(t){return 0===t?null:Math.floor((t-1)/2)},t.prototype.isEmpty=function(){return this.list.length<=0},t.prototype.top=function(){return this.isEmpty()?void 0:this.list[0]},t.prototype.delMin=function(){var t=this.top(),e=this.list.pop();return this.list.length>0&&(this.list[0]=e,this.moveDown(0)),t},t.prototype.insert=function(t){if(null!==t){this.list.push(t);var e=this.list.length-1;return this.moveUp(e),!0}return!1},t.prototype.moveUp=function(t){for(var e=this.getParent(t);t&&t>0&&this.compareFn(this.list[e],this.list[t])>0;){var r=this.list[e];this.list[e]=this.list[t],this.list[t]=r,t=e,e=this.getParent(t)}},t.prototype.moveDown=function(t){var e,r=t,n=this.getLeft(t),o=this.getRight(t),i=this.list.length;null!==n&&n<i&&this.compareFn(this.list[r],this.list[n])>0?r=n:null!==o&&o<i&&this.compareFn(this.list[r],this.list[o])>0&&(r=o),t!==r&&(e=[this.list[r],this.list[t]],this.list[t]=e[0],this.list[r]=e[1],this.moveDown(r))},t}();e.default=n},800:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.LinkedListNode=void 0;var r=function(t,e){return t===e},n=function(){function t(t,e){void 0===e&&(e=null),this.value=t,this.next=e}return t.prototype.toString=function(t){return t?t(this.value):"".concat(this.value)},t}();e.LinkedListNode=n;var o=function(){function t(t){void 0===t&&(t=r),this.head=null,this.tail=null,this.compare=t}return t.prototype.prepend=function(t){var e=new n(t,this.head);return this.head=e,this.tail||(this.tail=e),this},t.prototype.append=function(t){var e=new n(t);return this.head?(this.tail.next=e,this.tail=e,this):(this.head=e,this.tail=e,this)},t.prototype.delete=function(t){if(!this.head)return null;for(var e=null;this.head&&this.compare(this.head.value,t);)e=this.head,this.head=this.head.next;var r=this.head;if(null!==r)for(;r.next;)this.compare(r.next.value,t)?(e=r.next,r.next=r.next.next):r=r.next;return this.compare(this.tail.value,t)&&(this.tail=r),e},t.prototype.find=function(t){var e=t.value,r=void 0===e?void 0:e,n=t.callback,o=void 0===n?void 0:n;if(!this.head)return null;for(var i=this.head;i;){if(o&&o(i.value))return i;if(void 0!==r&&this.compare(i.value,r))return i;i=i.next}return null},t.prototype.deleteTail=function(){var t=this.tail;if(this.head===this.tail)return this.head=null,this.tail=null,t;for(var e=this.head;e.next;)e.next.next?e=e.next:e.next=null;return this.tail=e,t},t.prototype.deleteHead=function(){if(!this.head)return null;var t=this.head;return this.head.next?this.head=this.head.next:(this.head=null,this.tail=null),t},t.prototype.fromArray=function(t){var e=this;return t.forEach(function(t){return e.append(t)}),this},t.prototype.toArray=function(){for(var t=[],e=this.head;e;)t.push(e),e=e.next;return t},t.prototype.reverse=function(){for(var t=this.head,e=null,r=null;t;)r=t.next,t.next=e,e=t,t=r;this.tail=this.head,this.head=e},t.prototype.toString=function(t){return void 0===t&&(t=void 0),this.toArray().map(function(e){return e.toString(t)}).toString()},t}();e.default=o},3247:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n,o=(n=r(800))&&n.__esModule?n:{default:n};var i=function(){function t(){this.linkedList=new o.default}return t.prototype.isEmpty=function(){return!this.linkedList.head},t.prototype.peek=function(){return this.linkedList.head?this.linkedList.head.value:null},t.prototype.enqueue=function(t){this.linkedList.append(t)},t.prototype.dequeue=function(){var t=this.linkedList.deleteHead();return t?t.value:null},t.prototype.toString=function(t){return this.linkedList.toString(t)},t}();e.default=i},9511:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=function(){function t(t){this.count=t.length,this.parent={};for(var e=0,r=t;e<r.length;e++){var n=r[e];this.parent[n]=n}}return t.prototype.find=function(t){for(;this.parent[t]!==t;)t=this.parent[t];return t},t.prototype.union=function(t,e){var r=this.find(t),n=this.find(e);r!==n&&(r<n?(this.parent[e]!==e&&this.union(this.parent[e],t),this.parent[e]=this.parent[t]):(this.parent[t]!==t&&this.union(this.parent[t],e),this.parent[t]=this.parent[e]))},t.prototype.connected=function(t,e){return this.find(t)===this.find(e)},t}();e.default=r},9332:function(t,e){"use strict";var r;Object.defineProperty(e,"__esModule",{value:!0}),e.DistanceType=void 0,e.DistanceType=r,function(t){t.EuclideanDistance="euclideanDistance"}(r||(e.DistanceType=r={}))},8182:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.uniqueId=e.getOutEdgesNodeId=e.getNeighbors=e.getEdgesByNodeId=void 0;e.getNeighbors=function(t,e,r){void 0===e&&(e=[]);var n=e.filter(function(e){return e.source===t||e.target===t});if("target"===r)return n.filter(function(e){return e.source===t}).map(function(t){return t.target});if("source"===r)return n.filter(function(e){return e.target===t}).map(function(t){return t.source});return n.map(function(e){return e.source===t?e.target:e.source})};e.getOutEdgesNodeId=function(t,e){return e.filter(function(e){return e.source===t})};e.getEdgesByNodeId=function(t,e){return e.filter(function(e){return e.source===t||e.target===t})};e.uniqueId=function(t){void 0===t&&(t=0);var e="".concat(Math.random()).split(".")[1].substr(0,5),r="".concat(Math.random()).split(".")[1].substr(0,5);return"".concat(t,"-").concat(e).concat(r)}},2821:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.oneHot=e.getDistance=e.getAllKeyValueMap=e.default=void 0;var n,o=r(7061),i=r(9332),a=(n=r(3532))&&n.__esModule?n:{default:n};var s=function(t,e,r){var n=[];(null===e||void 0===e?void 0:e.length)?n=e:(t.forEach(function(t){n=n.concat(Object.keys(t))}),n=(0,o.uniq)(n));var i={};return n.forEach(function(e){var n=[];t.forEach(function(t){void 0!==t[e]&&""!==t[e]&&n.push(t[e])}),n.length&&!(null===r||void 0===r?void 0:r.includes(e))&&(i[e]=(0,o.uniq)(n))}),i};e.getAllKeyValueMap=s;var u=function(t,e,r){var n=s(t,e,r),o=[];if(!Object.keys(n).length)return o;var i=Object.values(n).every(function(t){return t.every(function(t){return"number"==typeof t})});return t.forEach(function(t,e){var r=[];Object.keys(n).forEach(function(e){var o=t[e],a=n[e],s=a.findIndex(function(t){return o===t}),u=[];if(i)u.push(o);else for(var l=0;l<a.length;l++)l===s?u.push(1):u.push(0);r=r.concat(u)}),o[e]=r}),o};e.oneHot=u;var l=function(t,e,r,n){void 0===r&&(r=i.DistanceType.EuclideanDistance);var o=0;switch(r){case i.DistanceType.EuclideanDistance:o=new a.default(t).euclideanDistance(new a.default(e))}return o};e.getDistance=l;var c={getAllKeyValueMap:s,oneHot:u,getDistance:l};e.default=c},2594:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getPropertyWeight=e.getAllSortProperties=e.getAllProperties=e.default=void 0;var n=r(9023),o=function(t,e){void 0===t&&(t=[]),void 0===e&&(e=100);var r={};t.forEach(function(t){t.properties&&Object.keys(t.properties).forEach(function(e){"id"===e||!"".concat(t.properties[e]).match(n.secondReg)&&!"".concat(t.properties[e]).match(n.dateReg)&&isNaN(Number(t.properties[e]))?r.hasOwnProperty(e)&&delete r[e]:r.hasOwnProperty(e)?r[e]+=1:r[e]=1})});var o=Object.keys(r).sort(function(t,e){return r[e]-r[t]});return o.length<e?o:o.slice(0,e)};e.getAllSortProperties=o;var i=function(t,e){return e.map(function(e){return t.hasOwnProperty(e)?t[e]:0})},a=function(t){for(var e=o(t),r=[],n=0;n<t.length;n++)r[n]=i(t[n].properties,e);return r};e.getPropertyWeight=a;var s=function(t,e){void 0===e&&(e=void 0);var r=[];return t.forEach(function(t){void 0===e&&r.push(t),void 0!==t[e]&&r.push(t[e])}),r};e.getAllProperties=s;var u={getAllSortProperties:o,getPropertyWeight:a,getAllProperties:s};e.default=u},3532:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=r(7061),o=function(){function t(t){this.arr=t}return t.prototype.getArr=function(){return this.arr||[]},t.prototype.add=function(e){var r,n=e.arr;if(!(null===(r=this.arr)||void 0===r?void 0:r.length))return new t(n);if(!(null===n||void 0===n?void 0:n.length))return new t(this.arr);if(this.arr.length===n.length){var o=[];for(var i in this.arr)o[i]=this.arr[i]+n[i];return new t(o)}},t.prototype.subtract=function(e){var r,n=e.arr;if(!(null===(r=this.arr)||void 0===r?void 0:r.length))return new t(n);if(!(null===n||void 0===n?void 0:n.length))return new t(this.arr);if(this.arr.length===n.length){var o=[];for(var i in this.arr)o[i]=this.arr[i]-n[i];return new t(o)}},t.prototype.avg=function(e){var r=[];if(0!==e)for(var n in this.arr)r[n]=this.arr[n]/e;return new t(r)},t.prototype.negate=function(){var e=[];for(var r in this.arr)e[r]=-this.arr[r];return new t(e)},t.prototype.squareEuclideanDistance=function(t){var e,r=t.arr;if(!(null===(e=this.arr)||void 0===e?void 0:e.length)||!(null===r||void 0===r?void 0:r.length))return 0;if(this.arr.length===r.length){var n=0;for(var o in this.arr)n+=Math.pow(this.arr[o]-t.arr[o],2);return n}},t.prototype.euclideanDistance=function(t){var e,r=t.arr;if(!(null===(e=this.arr)||void 0===e?void 0:e.length)||!(null===r||void 0===r?void 0:r.length))return 0;if(this.arr.length===r.length){var n=0;for(var o in this.arr)n+=Math.pow(this.arr[o]-t.arr[o],2);return Math.sqrt(n)}console.error("The two vectors are unequal in length.")},t.prototype.normalize=function(){var e=[],r=(0,n.clone)(this.arr);r.sort(function(t,e){return t-e});var o=r[r.length-1],i=r[0];for(var a in this.arr)e[a]=(this.arr[a]-i)/(o-i);return new t(e)},t.prototype.norm2=function(){var t;if(!(null===(t=this.arr)||void 0===t?void 0:t.length))return 0;var e=0;for(var r in this.arr)e+=Math.pow(this.arr[r],2);return Math.sqrt(e)},t.prototype.dot=function(t){var e,r=t.arr;if(!(null===(e=this.arr)||void 0===e?void 0:e.length)||!(null===r||void 0===r?void 0:r.length))return 0;if(this.arr.length===r.length){var n=0;for(var o in this.arr)n+=this.arr[o]*t.arr[o];return n}console.error("The two vectors are unequal in length.")},t.prototype.equal=function(t){var e,r=t.arr;if((null===(e=this.arr)||void 0===e?void 0:e.length)!==(null===r||void 0===r?void 0:r.length))return!1;for(var n in this.arr)if(this.arr[n]!==r[n])return!1;return!0},t}();e.default=o},6490:function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"GADDI",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(e,"breadthFirstSearch",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(e,"connectedComponent",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(e,"depthFirstSearch",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(e,"detectCycle",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(e,"dijkstra",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(e,"findAllPath",{enumerable:!0,get:function(){return f.findAllPath}}),Object.defineProperty(e,"findShortestPath",{enumerable:!0,get:function(){return f.findShortestPath}}),Object.defineProperty(e,"floydWarshall",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(e,"getAdjMatrix",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(e,"getDegree",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(e,"getInDegree",{enumerable:!0,get:function(){return s.getInDegree}}),Object.defineProperty(e,"getNeighbors",{enumerable:!0,get:function(){return m.getNeighbors}}),Object.defineProperty(e,"getOutDegree",{enumerable:!0,get:function(){return s.getOutDegree}}),Object.defineProperty(e,"labelPropagation",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(e,"louvain",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(e,"minimumSpanningTree",{enumerable:!0,get:function(){return y.default}}),Object.defineProperty(e,"pageRank",{enumerable:!0,get:function(){return v.default}});var o=w(r(7238)),i=w(r(1264)),a=w(r(6616)),s=function(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!==n(t)&&"function"!=typeof t)return{default:t};var r=b(e);if(r&&r.has(t))return r.get(t);var o={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if("default"!==a&&Object.prototype.hasOwnProperty.call(t,a)){var s=i?Object.getOwnPropertyDescriptor(t,a):null;s&&(s.get||s.set)?Object.defineProperty(o,a,s):o[a]=t[a]}o.default=t,r&&r.set(t,o);return o}(r(3597)),u=w(r(2465)),l=w(r(1940)),c=w(r(7618)),f=r(56),h=w(r(1613)),p=w(r(3760)),d=w(r(2006)),y=w(r(15)),v=w(r(6155)),g=w(r(9317)),m=r(8182);function b(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,r=new WeakMap;return(b=function(t){return t?r:e})(t)}function w(t){return t&&t.__esModule?t:{default:t}}},8983:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MESSAGE=e.ALGORITHM=void 0;e.ALGORITHM={pageRank:"pageRank",breadthFirstSearch:"breadthFirstSearch",connectedComponent:"connectedComponent",depthFirstSearch:"depthFirstSearch",detectCycle:"detectCycle",detectDirectedCycle:"detectDirectedCycle",detectAllCycles:"detectAllCycles",detectAllDirectedCycle:"detectAllDirectedCycle",detectAllUndirectedCycle:"detectAllUndirectedCycle",dijkstra:"dijkstra",findAllPath:"findAllPath",findShortestPath:"findShortestPath",floydWarshall:"floydWarshall",getAdjMatrix:"getAdjMatrix",getDegree:"getDegree",getInDegree:"getInDegree",getNeighbors:"getNeighbors",getOutDegree:"getOutDegree",labelPropagation:"labelPropagation",louvain:"louvain",GADDI:"GADDI",minimumSpanningTree:"minimumSpanningTree",SUCCESS:"SUCCESS",FAILURE:"FAILURE"};e.MESSAGE={SUCCESS:"SUCCESS",FAILURE:"FAILURE"}},7414:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n,o=r(8983),i=(n=r(7477))&&n.__esModule?n:{default:n};var a=function(t){return function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return new Promise(function(r,n){var a=new i.default;a.postMessage({_algorithmType:t,data:e}),a.onmessage=function(t){var e=t.data,i=e.data,s=e._algorithmType;o.MESSAGE.SUCCESS===s?r(i):n(),a.terminate()}})}};e.default=a},4613:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.pageRankAsync=e.minimumSpanningTreeAsync=e.louvainAsync=e.labelPropagationAsync=e.getOutDegreeAsync=e.getNeighborsAsync=e.getInDegreeAsync=e.getDegreeAsync=e.getAdjMatrixAsync=e.floydWarshallAsync=e.findShortestPathAsync=e.findAllPathAsync=e.dijkstraAsync=e.detectCycleAsync=e.detectAllUndirectedCycleAsync=e.detectAllDirectedCycleAsync=e.detectAllCyclesAsync=e.connectedComponentAsync=e.GADDIAsync=void 0;var n,o=(n=r(7414))&&n.__esModule?n:{default:n},i=r(8983);e.getAdjMatrixAsync=function(t,e){return(0,o.default)(i.ALGORITHM.getAdjMatrix).apply(void 0,[t,e])};e.connectedComponentAsync=function(t,e){return(0,o.default)(i.ALGORITHM.connectedComponent).apply(void 0,[t,e])};e.getDegreeAsync=function(t){return(0,o.default)(i.ALGORITHM.getDegree)(t)};e.getInDegreeAsync=function(t,e){return(0,o.default)(i.ALGORITHM.getInDegree)(t,e)};e.getOutDegreeAsync=function(t,e){return(0,o.default)(i.ALGORITHM.getOutDegree)(t,e)};e.detectCycleAsync=function(t){return(0,o.default)(i.ALGORITHM.detectCycle)(t)};e.detectAllCyclesAsync=function(t){return(0,o.default)(i.ALGORITHM.detectAllCycles)(t)};e.detectAllDirectedCycleAsync=function(t){return(0,o.default)(i.ALGORITHM.detectAllDirectedCycle)(t)};e.detectAllUndirectedCycleAsync=function(t){return(0,o.default)(i.ALGORITHM.detectAllUndirectedCycle)(t)};e.dijkstraAsync=function(t,e,r,n){return(0,o.default)(i.ALGORITHM.dijkstra).apply(void 0,[t,e,r,n])};e.findAllPathAsync=function(t,e,r,n){return(0,o.default)(i.ALGORITHM.findAllPath).apply(void 0,[t,e,r,n])};e.findShortestPathAsync=function(t,e,r,n,a){return(0,o.default)(i.ALGORITHM.findShortestPath).apply(void 0,[t,e,r,n,a])};e.floydWarshallAsync=function(t,e){return(0,o.default)(i.ALGORITHM.floydWarshall).apply(void 0,[t,e])};e.labelPropagationAsync=function(t,e,r,n){return void 0===n&&(n=1e3),(0,o.default)(i.ALGORITHM.labelPropagation)(t,e,r,n)};e.louvainAsync=function(t,e,r,n){return(0,o.default)(i.ALGORITHM.louvain)(t,e,r,n)};e.minimumSpanningTreeAsync=function(t,e,r){return(0,o.default)(i.ALGORITHM.minimumSpanningTree).apply(void 0,[t,e,r])};e.pageRankAsync=function(t,e,r){return(0,o.default)(i.ALGORITHM.pageRank).apply(void 0,[t,e,r])};e.getNeighborsAsync=function(t,e,r){return(0,o.default)(i.ALGORITHM.getNeighbors).apply(void 0,[t,e,r])};e.GADDIAsync=function(t,e,r,n,a,s,u){return void 0===r&&(r=!1),void 0===s&&(s="cluster"),void 0===u&&(u="cluster"),(0,o.default)(i.ALGORITHM.GADDI).apply(void 0,[t,e,r,n,a,s,u])}},7477:function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=function(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!==n(t)&&"function"!=typeof t)return{default:t};var r=a(e);if(r&&r.has(t))return r.get(t);var o={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in t)if("default"!==s&&Object.prototype.hasOwnProperty.call(t,s)){var u=i?Object.getOwnPropertyDescriptor(t,s):null;u&&(u.get||u.set)?Object.defineProperty(o,s,u):o[s]=t[s]}o.default=t,r&&r.set(t,o);return o}(r(6490)),i=r(8983);function a(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,r=new WeakMap;return(a=function(t){return t?r:e})(t)}var s="undefined"!=typeof self?self:{};s.onmessage=function(t){var e=t.data,r=e._algorithmType,n=e.data;if(r)if("function"!=typeof o[r])s.postMessage({_algorithmType:i.MESSAGE.FAILURE});else{var a=o[r].apply(o,n);s.postMessage({_algorithmType:i.MESSAGE.SUCCESS,data:a})}};e.default=null},2587:function(t,e,r){"use strict";function n(t,e,r,n,o,i,a){try{var s=t[i](a),u=s.value}catch(t){return void r(t)}s.done?e(u):Promise.resolve(u).then(n,o)}function o(t){return function(){var e=this,r=arguments;return new Promise(function(o,i){var a=t.apply(e,r);function s(t){n(a,o,i,s,u,"next",t)}function u(t){n(a,o,i,s,u,"throw",t)}s(void 0)})}}function i(t){"@babel/helpers - typeof";return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t){var e=function(t,e){if("object"!==i(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===i(e)?e:String(e)}function s(t,e,r){return(e=a(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,a(n.key),n)}}function c(t,e,r){return e&&l(t.prototype,e),r&&l(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}r.r(e),r.d(e,{Kernel:function(){return V},World:function(){return Pt}});var f=r(9906),h=r.n(f),p=r(9505),d=r.n(p),y=r(3936),v=r.n(y),g=r(1364),m=r.n(g),b=1;function w(){return b++}var S;!function(t){t[t.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",t[t.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",t[t.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN",t[t.ZERO=0]="ZERO",t[t.ONE=1]="ONE",t[t.SRC_COLOR=768]="SRC_COLOR",t[t.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",t[t.SRC_ALPHA=770]="SRC_ALPHA",t[t.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",t[t.DST_ALPHA=772]="DST_ALPHA",t[t.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",t[t.DST_COLOR=774]="DST_COLOR",t[t.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",t[t.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",t[t.FUNC_ADD=32774]="FUNC_ADD",t[t.BLEND_EQUATION=32777]="BLEND_EQUATION",t[t.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",t[t.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",t[t.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",t[t.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",t[t.MAX_EXT=32776]="MAX_EXT",t[t.MIN_EXT=32775]="MIN_EXT",t[t.BLEND_DST_RGB=32968]="BLEND_DST_RGB",t[t.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",t[t.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",t[t.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",t[t.CONSTANT_COLOR=32769]="CONSTANT_COLOR",t[t.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",t[t.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",t[t.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",t[t.BLEND_COLOR=32773]="BLEND_COLOR",t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",t[t.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",t[t.STREAM_DRAW=35040]="STREAM_DRAW",t[t.STATIC_DRAW=35044]="STATIC_DRAW",t[t.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",t[t.BUFFER_SIZE=34660]="BUFFER_SIZE",t[t.BUFFER_USAGE=34661]="BUFFER_USAGE",t[t.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",t[t.FRONT=1028]="FRONT",t[t.BACK=1029]="BACK",t[t.FRONT_AND_BACK=1032]="FRONT_AND_BACK",t[t.CULL_FACE=2884]="CULL_FACE",t[t.BLEND=3042]="BLEND",t[t.DITHER=3024]="DITHER",t[t.STENCIL_TEST=2960]="STENCIL_TEST",t[t.DEPTH_TEST=2929]="DEPTH_TEST",t[t.SCISSOR_TEST=3089]="SCISSOR_TEST",t[t.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",t[t.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",t[t.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",t[t.NO_ERROR=0]="NO_ERROR",t[t.INVALID_ENUM=1280]="INVALID_ENUM",t[t.INVALID_VALUE=1281]="INVALID_VALUE",t[t.INVALID_OPERATION=1282]="INVALID_OPERATION",t[t.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",t[t.CW=2304]="CW",t[t.CCW=2305]="CCW",t[t.LINE_WIDTH=2849]="LINE_WIDTH",t[t.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",t[t.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",t[t.CULL_FACE_MODE=2885]="CULL_FACE_MODE",t[t.FRONT_FACE=2886]="FRONT_FACE",t[t.DEPTH_RANGE=2928]="DEPTH_RANGE",t[t.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",t[t.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",t[t.DEPTH_FUNC=2932]="DEPTH_FUNC",t[t.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",t[t.STENCIL_FUNC=2962]="STENCIL_FUNC",t[t.STENCIL_FAIL=2964]="STENCIL_FAIL",t[t.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",t[t.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",t[t.STENCIL_REF=2967]="STENCIL_REF",t[t.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",t[t.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",t[t.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",t[t.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",t[t.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",t[t.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",t[t.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",t[t.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",t[t.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",t[t.VIEWPORT=2978]="VIEWPORT",t[t.SCISSOR_BOX=3088]="SCISSOR_BOX",t[t.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",t[t.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",t[t.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",t[t.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",t[t.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",t[t.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",t[t.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",t[t.RED_BITS=3410]="RED_BITS",t[t.GREEN_BITS=3411]="GREEN_BITS",t[t.BLUE_BITS=3412]="BLUE_BITS",t[t.ALPHA_BITS=3413]="ALPHA_BITS",t[t.DEPTH_BITS=3414]="DEPTH_BITS",t[t.STENCIL_BITS=3415]="STENCIL_BITS",t[t.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",t[t.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",t[t.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",t[t.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",t[t.SAMPLES=32937]="SAMPLES",t[t.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",t[t.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",t[t.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",t[t.DONT_CARE=4352]="DONT_CARE",t[t.FASTEST=4353]="FASTEST",t[t.NICEST=4354]="NICEST",t[t.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",t[t.BYTE=5120]="BYTE",t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.SHORT=5122]="SHORT",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.INT=5124]="INT",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.FLOAT=5126]="FLOAT",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.ALPHA=6406]="ALPHA",t[t.RGB=6407]="RGB",t[t.RGBA=6408]="RGBA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",t[t.VERTEX_SHADER=35633]="VERTEX_SHADER",t[t.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",t[t.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",t[t.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",t[t.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",t[t.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",t[t.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",t[t.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",t[t.SHADER_TYPE=35663]="SHADER_TYPE",t[t.DELETE_STATUS=35712]="DELETE_STATUS",t[t.LINK_STATUS=35714]="LINK_STATUS",t[t.VALIDATE_STATUS=35715]="VALIDATE_STATUS",t[t.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",t[t.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",t[t.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",t[t.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",t[t.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",t[t.NEVER=512]="NEVER",t[t.LESS=513]="LESS",t[t.EQUAL=514]="EQUAL",t[t.LEQUAL=515]="LEQUAL",t[t.GREATER=516]="GREATER",t[t.NOTEQUAL=517]="NOTEQUAL",t[t.GEQUAL=518]="GEQUAL",t[t.ALWAYS=519]="ALWAYS",t[t.KEEP=7680]="KEEP",t[t.REPLACE=7681]="REPLACE",t[t.INCR=7682]="INCR",t[t.DECR=7683]="DECR",t[t.INVERT=5386]="INVERT",t[t.INCR_WRAP=34055]="INCR_WRAP",t[t.DECR_WRAP=34056]="DECR_WRAP",t[t.VENDOR=7936]="VENDOR",t[t.RENDERER=7937]="RENDERER",t[t.VERSION=7938]="VERSION",t[t.NEAREST=9728]="NEAREST",t[t.LINEAR=9729]="LINEAR",t[t.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",t[t.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",t[t.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",t[t.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",t[t.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",t[t.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",t[t.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",t[t.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE=5890]="TEXTURE",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",t[t.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",t[t.TEXTURE0=33984]="TEXTURE0",t[t.TEXTURE1=33985]="TEXTURE1",t[t.TEXTURE2=33986]="TEXTURE2",t[t.TEXTURE3=33987]="TEXTURE3",t[t.TEXTURE4=33988]="TEXTURE4",t[t.TEXTURE5=33989]="TEXTURE5",t[t.TEXTURE6=33990]="TEXTURE6",t[t.TEXTURE7=33991]="TEXTURE7",t[t.TEXTURE8=33992]="TEXTURE8",t[t.TEXTURE9=33993]="TEXTURE9",t[t.TEXTURE10=33994]="TEXTURE10",t[t.TEXTURE11=33995]="TEXTURE11",t[t.TEXTURE12=33996]="TEXTURE12",t[t.TEXTURE13=33997]="TEXTURE13",t[t.TEXTURE14=33998]="TEXTURE14",t[t.TEXTURE15=33999]="TEXTURE15",t[t.TEXTURE16=34e3]="TEXTURE16",t[t.TEXTURE17=34001]="TEXTURE17",t[t.TEXTURE18=34002]="TEXTURE18",t[t.TEXTURE19=34003]="TEXTURE19",t[t.TEXTURE20=34004]="TEXTURE20",t[t.TEXTURE21=34005]="TEXTURE21",t[t.TEXTURE22=34006]="TEXTURE22",t[t.TEXTURE23=34007]="TEXTURE23",t[t.TEXTURE24=34008]="TEXTURE24",t[t.TEXTURE25=34009]="TEXTURE25",t[t.TEXTURE26=34010]="TEXTURE26",t[t.TEXTURE27=34011]="TEXTURE27",t[t.TEXTURE28=34012]="TEXTURE28",t[t.TEXTURE29=34013]="TEXTURE29",t[t.TEXTURE30=34014]="TEXTURE30",t[t.TEXTURE31=34015]="TEXTURE31",t[t.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",t[t.REPEAT=10497]="REPEAT",t[t.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",t[t.FLOAT_VEC2=35664]="FLOAT_VEC2",t[t.FLOAT_VEC3=35665]="FLOAT_VEC3",t[t.FLOAT_VEC4=35666]="FLOAT_VEC4",t[t.INT_VEC2=35667]="INT_VEC2",t[t.INT_VEC3=35668]="INT_VEC3",t[t.INT_VEC4=35669]="INT_VEC4",t[t.BOOL=35670]="BOOL",t[t.BOOL_VEC2=35671]="BOOL_VEC2",t[t.BOOL_VEC3=35672]="BOOL_VEC3",t[t.BOOL_VEC4=35673]="BOOL_VEC4",t[t.FLOAT_MAT2=35674]="FLOAT_MAT2",t[t.FLOAT_MAT3=35675]="FLOAT_MAT3",t[t.FLOAT_MAT4=35676]="FLOAT_MAT4",t[t.SAMPLER_2D=35678]="SAMPLER_2D",t[t.SAMPLER_CUBE=35680]="SAMPLER_CUBE",t[t.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",t[t.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",t[t.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",t[t.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",t[t.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",t[t.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",t[t.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",t[t.COMPILE_STATUS=35713]="COMPILE_STATUS",t[t.LOW_FLOAT=36336]="LOW_FLOAT",t[t.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",t[t.HIGH_FLOAT=36338]="HIGH_FLOAT",t[t.LOW_INT=36339]="LOW_INT",t[t.MEDIUM_INT=36340]="MEDIUM_INT",t[t.HIGH_INT=36341]="HIGH_INT",t[t.FRAMEBUFFER=36160]="FRAMEBUFFER",t[t.RENDERBUFFER=36161]="RENDERBUFFER",t[t.RGBA4=32854]="RGBA4",t[t.RGB5_A1=32855]="RGB5_A1",t[t.RGB565=36194]="RGB565",t[t.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",t[t.STENCIL_INDEX=6401]="STENCIL_INDEX",t[t.STENCIL_INDEX8=36168]="STENCIL_INDEX8",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL",t[t.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",t[t.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",t[t.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",t[t.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",t[t.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",t[t.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",t[t.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",t[t.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",t[t.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",t[t.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",t[t.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",t[t.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",t[t.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",t[t.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",t[t.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",t[t.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",t[t.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",t[t.NONE=0]="NONE",t[t.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",t[t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",t[t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",t[t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",t[t.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",t[t.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",t[t.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",t[t.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",t[t.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",t[t.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",t[t.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",t[t.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",t[t.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",t[t.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL",t[t.COPY_SRC=1]="COPY_SRC",t[t.COPY_DST=2]="COPY_DST",t[t.SAMPLED=4]="SAMPLED",t[t.STORAGE=8]="STORAGE",t[t.RENDER_ATTACHMENT=16]="RENDER_ATTACHMENT"}(S||(S={}));var x,_,E,O,P=function(){function t(){u(this,t),this.config=void 0}return c(t,[{key:"get",value:function(){return this.config}},{key:"set",value:function(t){this.config=t}}]),t}();"undefined"!=typeof navigator&&/Version\/[\d\.]+.*Safari/.test(navigator.userAgent);!function(t){t.Void="Void",t.Boolean="Boolean",t.Float="Float",t.Uint32="Uint32",t.Int32="Int32",t.Vector="Vector",t.Vector2Float="vec2<f32>",t.Vector3Float="vec3<f32>",t.Vector4Float="vec4<f32>",t.Vector2Boolean="vec2<bool>",t.Vector3Boolean="vec3<bool>",t.Vector4Boolean="vec4<bool>",t.Vector2Uint="vec2<u32>",t.Vector3Uint="vec3<u32>",t.Vector4Uint="vec4<u32>",t.Vector2Int="vec2<i32>",t.Vector3Int="vec3<i32>",t.Vector4Int="vec4<i32>",t.Matrix="Matrix",t.Matrix3x3Float="mat3x3<f32>",t.Matrix4x4Float="mat4x4<i32>",t.Struct="Struct",t.FloatArray="Float[]",t.Vector4FloatArray="vec4<f32>[]"}(x||(x={})),function(t){t.Program="Program",t.Identifier="Identifier",t.VariableDeclaration="VariableDeclaration",t.BlockStatement="BlockStatement",t.ReturnStatement="ReturnStatement",t.FunctionDeclaration="FunctionDeclaration",t.VariableDeclarator="VariableDeclarator",t.AssignmentExpression="AssignmentExpression",t.LogicalExpression="LogicalExpression",t.BinaryExpression="BinaryExpression",t.ArrayExpression="ArrayExpression",t.UnaryExpression="UnaryExpression",t.UpdateExpression="UpdateExpression",t.FunctionExpression="FunctionExpression",t.MemberExpression="MemberExpression",t.ConditionalExpression="ConditionalExpression",t.ExpressionStatement="ExpressionStatement",t.CallExpression="CallExpression",t.NumThreadStatement="NumThreadStatement",t.StorageStatement="StorageStatement",t.DoWhileStatement="DoWhileStatement",t.WhileStatement="WhileStatement",t.ForStatement="ForStatement",t.BreakStatement="BreakStatement",t.ContinueStatement="ContinueStatement",t.IfStatement="IfStatement",t.ImportedFunctionStatement="ImportedFunctionStatement"}(_||(_={})),function(t){t.Input="Input",t.Output="Output",t.Uniform="Uniform",t.Workgroup="Workgroup",t.UniformConstant="UniformConstant",t.Image="Image",t.StorageBuffer="StorageBuffer",t.Private="Private",t.Function="Function"}(E||(E={})),function(t){t.GLSL100="GLSL100",t.GLSL450="GLSL450",t.WGSL="WGSL"}(O||(O={}));function k(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function C(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?k(Object(r),!0).forEach(function(e){s(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):k(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}var T,A,M,j,I,N,L,R,D,B,F,G,U,z,V=function(){function t(e,r){u(this,t),this.engine=e,this.configService=r,this.model=void 0,this.dirty=!0,this.compiledBundle=void 0,this.initPromise=void 0}return c(t,[{key:"init",value:function(){var t=this.configService.get(),e=t.canvas,r=t.engineOptions;this.initPromise=this.engine.init(C({canvas:e||function(){if("undefined"!=typeof document)return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}(),antialiasing:!1},r))}},{key:"setBundle",value:function(t){this.compiledBundle=JSON.parse(JSON.stringify(t))}},{key:"setDispatch",value:function(t){return this.compiledBundle.context&&(this.compiledBundle.context.dispatch=t),this}},{key:"setMaxIteration",value:function(t){return this.compiledBundle.context&&(this.compiledBundle.context.maxIteration=t),this}},{key:"setBinding",value:function(t,e){var r=this;if("string"==typeof t){var n=d()(e)||h()(e)||v()(e);if(this.compiledBundle&&this.compiledBundle.context){var o=this.compiledBundle.context.defines.find(function(e){return e.name===t});if(o)return o.value=e,this;var i=this.compiledBundle.context.uniforms.find(function(e){return e.name===t});i&&(n?(i.data=e,i.isReferer=!1,i.storageClass===E.Uniform?this.model&&this.model.updateUniform(t,e):this.model&&this.model.updateBuffer(t,e)):(i.isReferer=!0,i.data=e))}}else Object.keys(t).forEach(function(e){r.setBinding(e,t[e])});return this}},{key:"execute",value:function(){var t=o(m().mark(function t(){var e,r,n=this,o=arguments;return m().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e=o.length>0&&void 0!==o[0]?o[0]:1,!this.dirty){t.next=6;break}return this.compiledBundle.context&&(e>1?this.compiledBundle.context.maxIteration=e:this.compiledBundle.context.maxIteration++),t.next=5,this.compile();case 5:this.dirty=!1;case 6:for(this.engine.beginFrame(),this.engine.clear({}),this.compiledBundle.context&&this.compiledBundle.context.uniforms.filter(function(t){return t.isReferer}).forEach(function(t){var e=t.data,r=t.name;n.model.confirmInput(e.model,r)}),r=0;r<e;r++)this.model.run();return this.engine.endFrame(),t.abrupt("return",this);case 12:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"getOutput",value:function(){var t=o(m().mark(function t(){return m().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.model.readData());case 1:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"compile",value:function(){var t=o(m().mark(function t(){var e,r,n;return m().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.initPromise;case 2:return e=C({},this.compiledBundle.context),r=this.engine.supportWebGPU?this.engine.useWGSL?O.WGSL:O.GLSL450:O.GLSL100,n=this.compiledBundle.shaders[r],e.defines.filter(function(t){return t.runtime}).forEach(function(t){var e="".concat("__DefineValuePlaceholder__").concat(t.name);n=n.replace(e,"".concat(t.value))}),e.shader=n,e.uniforms.forEach(function(t){if(!t.data&&t.storageClass===E.StorageBuffer){var r=1;t.type===x.FloatArray?r=1:t.type===x.Vector4FloatArray&&(r=4),t.data=new Float32Array(e.output.length*r).fill(0)}}),this.compiledBundle.context=e,t.next=11,this.engine.createComputeModel(this.compiledBundle.context);case 11:this.model=t.sent;case 12:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()}]),t}(),H=r(4934),W=r.n(H),q=function(){function t(e,r){u(this,t),this.attribute=void 0,this.buffer=void 0;var n=r.buffer,o=r.offset,i=r.stride,a=r.normalized,s=r.size,l=r.divisor;this.buffer=n,this.attribute={buffer:n.get(),offset:o||0,stride:i||0,normalized:a||!1,divisor:l||0},s&&(this.attribute.size=s)}return c(t,[{key:"get",value:function(){return this.attribute}},{key:"updateBuffer",value:function(t){this.buffer.subData(t)}},{key:"destroy",value:function(){this.buffer.destroy()}}]),t}(),Y=(s(T={},S.POINTS,"points"),s(T,S.LINES,"lines"),s(T,S.LINE_LOOP,"line loop"),s(T,S.LINE_STRIP,"line strip"),s(T,S.TRIANGLES,"triangles"),s(T,S.TRIANGLE_FAN,"triangle fan"),s(T,S.TRIANGLE_STRIP,"triangle strip"),T),X=(s(A={},S.STATIC_DRAW,"static"),s(A,S.DYNAMIC_DRAW,"dynamic"),s(A,S.STREAM_DRAW,"stream"),A),J=(s(M={},S.BYTE,"int8"),s(M,S.UNSIGNED_INT,"int16"),s(M,S.INT,"int32"),s(M,S.UNSIGNED_BYTE,"uint8"),s(M,S.UNSIGNED_SHORT,"uint16"),s(M,S.UNSIGNED_INT,"uint32"),s(M,S.FLOAT,"float"),M),K=(s(j={},S.ALPHA,"alpha"),s(j,S.LUMINANCE,"luminance"),s(j,S.LUMINANCE_ALPHA,"luminance alpha"),s(j,S.RGB,"rgb"),s(j,S.RGBA,"rgba"),s(j,S.RGBA4,"rgba4"),s(j,S.RGB5_A1,"rgb5 a1"),s(j,S.RGB565,"rgb565"),s(j,S.DEPTH_COMPONENT,"depth"),s(j,S.DEPTH_STENCIL,"depth stencil"),j),Q=(s(I={},S.DONT_CARE,"dont care"),s(I,S.NICEST,"nice"),s(I,S.FASTEST,"fast"),I),Z=(s(N={},S.NEAREST,"nearest"),s(N,S.LINEAR,"linear"),s(N,S.LINEAR_MIPMAP_LINEAR,"mipmap"),s(N,S.NEAREST_MIPMAP_LINEAR,"nearest mipmap linear"),s(N,S.LINEAR_MIPMAP_NEAREST,"linear mipmap nearest"),s(N,S.NEAREST_MIPMAP_NEAREST,"nearest mipmap nearest"),N),$=(s(L={},S.REPEAT,"repeat"),s(L,S.CLAMP_TO_EDGE,"clamp"),s(L,S.MIRRORED_REPEAT,"mirror"),L),tt=(s(R={},S.NONE,"none"),s(R,S.BROWSER_DEFAULT_WEBGL,"browser"),R),et=(s(D={},S.NEVER,"never"),s(D,S.ALWAYS,"always"),s(D,S.LESS,"less"),s(D,S.LEQUAL,"lequal"),s(D,S.GREATER,"greater"),s(D,S.GEQUAL,"gequal"),s(D,S.EQUAL,"equal"),s(D,S.NOTEQUAL,"notequal"),D),rt=(s(B={},S.FUNC_ADD,"add"),s(B,S.MIN_EXT,"min"),s(B,S.MAX_EXT,"max"),s(B,S.FUNC_SUBTRACT,"subtract"),s(B,S.FUNC_REVERSE_SUBTRACT,"reverse subtract"),B),nt=(s(F={},S.ZERO,"zero"),s(F,S.ONE,"one"),s(F,S.SRC_COLOR,"src color"),s(F,S.ONE_MINUS_SRC_COLOR,"one minus src color"),s(F,S.SRC_ALPHA,"src alpha"),s(F,S.ONE_MINUS_SRC_ALPHA,"one minus src alpha"),s(F,S.DST_COLOR,"dst color"),s(F,S.ONE_MINUS_DST_COLOR,"one minus dst color"),s(F,S.DST_ALPHA,"dst alpha"),s(F,S.ONE_MINUS_DST_ALPHA,"one minus dst alpha"),s(F,S.CONSTANT_COLOR,"constant color"),s(F,S.ONE_MINUS_CONSTANT_COLOR,"one minus constant color"),s(F,S.CONSTANT_ALPHA,"constant alpha"),s(F,S.ONE_MINUS_CONSTANT_ALPHA,"one minus constant alpha"),s(F,S.SRC_ALPHA_SATURATE,"src alpha saturate"),F),ot=(s(G={},S.NEVER,"never"),s(G,S.ALWAYS,"always"),s(G,S.LESS,"less"),s(G,S.LEQUAL,"lequal"),s(G,S.GREATER,"greater"),s(G,S.GEQUAL,"gequal"),s(G,S.EQUAL,"equal"),s(G,S.NOTEQUAL,"notequal"),G),it=(s(U={},S.ZERO,"zero"),s(U,S.KEEP,"keep"),s(U,S.REPLACE,"replace"),s(U,S.INVERT,"invert"),s(U,S.INCR,"increment"),s(U,S.DECR,"decrement"),s(U,S.INCR_WRAP,"increment wrap"),s(U,S.DECR_WRAP,"decrement wrap"),U),at=(s(z={},S.FRONT,"front"),s(z,S.BACK,"back"),z),st=function(){function t(e,r){u(this,t),this.buffer=void 0;var n=r.data,o=r.usage,i=r.type;this.buffer=e.buffer({data:n,usage:X[o||S.STATIC_DRAW],type:J[i||S.UNSIGNED_BYTE]})}return c(t,[{key:"get",value:function(){return this.buffer}},{key:"destroy",value:function(){}},{key:"subData",value:function(t){var e=t.data,r=t.offset;this.buffer.subdata(e,r)}}]),t}();function ut(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function lt(t){return function(t){if(Array.isArray(t))return ut(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return ut(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ut(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ct(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function ft(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ct(Object(r),!0).forEach(function(e){s(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ct(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}var ht="attribute vec3 a_Position;\nattribute vec2 a_TexCoord;\n\nvarying vec2 v_TexCoord;\n\nvoid main() {\n  gl_Position = vec4(a_Position, 1.0);\n  v_TexCoord = a_TexCoord;\n}",pt=0,dt=!1,yt=function(){function t(e,r){var n=this;u(this,t),this.reGl=e,this.context=r,this.entity=w(),this.texFBO=void 0,this.computeCommand=void 0,this.textureCache={},this.outputTextureName=void 0,this.swapOutputTextureName=void 0,this.compiledPingpong=void 0,this.dynamicPingpong=void 0;var o={};this.context.uniforms.forEach(function(t){var e=t.name,r=t.type,i=t.data,a=t.isReferer,s=t.storageClass;if(s===E.StorageBuffer){if(a)n.textureCache[e]={data:void 0},o["".concat(e,"Size")]=function(){return i.compiledBundle.context.output.textureSize};else{n.textureCache[e]=n.calcDataTexture(e,r,i);var u=n.textureCache[e],l=u.textureWidth,c=u.isOutput;o["".concat(e,"Size")]=[l,l],c&&(n.outputTextureName=e,n.context.needPingpong&&(n.outputTextureName="".concat(e,"Output"),n.textureCache[n.outputTextureName]=n.calcDataTexture(e,r,i)))}o[e]=function(){return dt&&console.log("[".concat(n.entity,"]: ").concat(e," ").concat(n.textureCache[e].id)),n.textureCache[e].texture}}else if(s===E.Uniform){if(i&&(Array.isArray(i)||h()(i))&&i.length>16)throw new Error("invalid data type ".concat(r));o[e]=function(){return t.data}}});var i=this.getOuputDataTexture(),a=i.textureWidth,s=i.texelCount;o.u_OutputTextureSize=[a,a],o.u_OutputTexelCount=s,this.context.output.textureSize=[a,a];var l={attributes:{a_Position:[[-1,1,0],[-1,-1,0],[1,1,0],[1,-1,0]],a_TexCoord:[[0,1],[0,0],[1,1],[1,0]]},frag:"#ifdef GL_FRAGMENT_PRECISION_HIGH\n  precision highp float;\n#else\n  precision mediump float;\n#endif\n".concat(this.context.shader),uniforms:o,vert:ht,primitive:"triangle strip",count:4};this.computeCommand=this.reGl(l)}return c(t,[{key:"run",value:function(){var t=this;this.context.maxIteration>1&&this.context.needPingpong&&(this.compiledPingpong=!0),(this.compiledPingpong||this.dynamicPingpong)&&this.swap(),this.texFBO=this.reGl.framebuffer({color:this.getOuputDataTexture().texture}),this.texFBO.use(function(){t.computeCommand()}),dt&&console.log("[".concat(this.entity,"]: output ").concat(this.getOuputDataTexture().id))}},{key:"readData",value:function(){var t=o(m().mark(function t(){var e,r,n,o,i,a,s,u,l=this;return m().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.reGl({framebuffer:this.texFBO})(function(){e=l.reGl.read()}),!e){t.next=6;break}if(r=this.getOuputDataTexture(),n=r.originalDataLength,o=r.elementsPerTexel,i=r.typedArrayConstructor,a=void 0===i?Float32Array:i,s=[],4!==o)for(u=0;u<e.length;u+=4)1===o?s.push(e[u]):2===o?s.push(e[u],e[u+1]):s.push(e[u],e[u+1],e[u+2]);else s=e;return t.abrupt("return",new a(s.slice(0,n)));case 6:return t.abrupt("return",new Float32Array);case 7:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"confirmInput",value:function(t,e){var r;this.entity===t.entity?(this.dynamicPingpong=!0,r=this):r=t,this.textureCache[e].id=r.getOuputDataTexture().id,this.textureCache[e].texture=r.getOuputDataTexture().texture,dt&&console.log("[".concat(this.entity,"]: confirm input ").concat(e," from model ").concat(r.entity,", ").concat(r.getOuputDataTexture().id))}},{key:"updateUniform",value:function(){}},{key:"updateBuffer",value:function(t,e){arguments.length>2&&void 0!==arguments[2]&&arguments[2];var r=this.context.uniforms.find(function(e){return e.name===t});if(r){var n=this.calcDataTexture(t,r.type,e),o=n.texture,i=n.data;this.textureCache[t].data=i,this.textureCache[t].texture=o}}},{key:"destroy",value:function(){}},{key:"swap",value:function(){if(this.swapOutputTextureName||this.createSwapOutputDataTexture(),this.compiledPingpong){var t=this.context.output.name;this.textureCache[t].id=this.getOuputDataTexture().id,this.textureCache[t].texture=this.getOuputDataTexture().texture}var e=this.outputTextureName;this.outputTextureName=this.swapOutputTextureName,this.swapOutputTextureName=e,dt&&console.log("[".concat(this.entity,"]: after swap, output ").concat(this.getOuputDataTexture().id))}},{key:"getOuputDataTexture",value:function(){return this.textureCache[this.outputTextureName]}},{key:"createSwapOutputDataTexture",value:function(){var t=this.cloneDataTexture(this.getOuputDataTexture());this.swapOutputTextureName="".concat(this.entity,"-swap"),this.textureCache[this.swapOutputTextureName]=t}},{key:"cloneDataTexture",value:function(t){var e=t.data,r=t.textureWidth;return ft(ft({},t),{},{id:pt++,texture:this.reGl.texture({width:r,height:r,data:e,type:"float"})})}},{key:"calcDataTexture",value:function(t,e,r){var n=1;e===x.Vector4FloatArray&&(n=4);for(var o=[],i=0;i<r.length;i+=n)1===n?o.push(r[i],0,0,0):2===n?o.push(r[i],r[i+1],0,0):3===n?o.push(r[i],r[i+1],r[i+2],0):4===n&&o.push(r[i],r[i+1],r[i+2],r[i+3]);var a=r.length,s=Math.ceil(a/n),u=Math.ceil(Math.sqrt(s)),l=u*u;s<l&&o.push.apply(o,lt(new Array(4*(l-s)).fill(0)));var c=this.reGl.texture({width:u,height:u,data:o,type:"float"});return{id:pt++,data:o,originalDataLength:a,typedArrayConstructor:h()(r)?r.constructor:void 0,textureWidth:u,texture:c,texelCount:s,elementsPerTexel:n,isOutput:t===this.context.output.name}}}]),t}(),vt=function(){function t(e,r){u(this,t),this.elements=void 0;var n=r.data,o=r.usage,i=r.type,a=r.count;this.elements=e.elements({data:n,usage:X[o||S.STATIC_DRAW],type:J[i||S.UNSIGNED_BYTE],count:a})}return c(t,[{key:"get",value:function(){return this.elements}},{key:"subData",value:function(t){var e=t.data;this.elements.subdata(e)}},{key:"destroy",value:function(){this.elements.destroy()}}]),t}(),gt=function(){function t(e,r){u(this,t),this.framebuffer=void 0;var n=r.width,o=r.height,i=r.color,a=r.colors,s=(r.depth,r.stencil,{width:n,height:o});Array.isArray(a)&&(s.colors=a.map(function(t){return t.get()})),i&&"boolean"!=typeof i&&(s.color=i.get()),this.framebuffer=e.framebuffer(s)}return c(t,[{key:"get",value:function(){return this.framebuffer}},{key:"destroy",value:function(){this.framebuffer.destroy()}},{key:"resize",value:function(t){var e=t.width,r=t.height;this.framebuffer.resize(e,r)}}]),t}(),mt=r(4361),bt=r.n(mt);function wt(t){var e={};return Object.keys(t).forEach(function(r){!function t(e,r,n,o){if(null===r||"number"==typeof r||"boolean"==typeof r||Array.isArray(r)&&"number"==typeof r[0]||h()(r)||""===r||void 0!==r.resize)return void(n["".concat(o&&o+".").concat(e)]=r);bt()(r)&&Object.keys(r).forEach(function(i){t(i,r[i],n,"".concat(o&&o+".").concat(e))});Array.isArray(r)&&r.forEach(function(r,i){Object.keys(r).forEach(function(a){t(a,r[a],n,"".concat(o&&o+".").concat(e,"[").concat(i,"]"))})})}(r,t[r],e,"")}),e}function St(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function xt(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?St(Object(r),!0).forEach(function(e){s(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):St(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}var _t=function(){function t(e,r){u(this,t),this.reGl=void 0,this.drawCommand=void 0,this.uniforms={},this.reGl=e;var n=r.vs,o=r.fs,i=r.defines,a=r.attributes,s=r.uniforms,l=r.primitive,c=r.count,f=r.elements,h=r.depth,p=r.blend,d=r.stencil,y=r.cull,v=r.instances,g=r.scissor,m=r.viewport,b={};s&&(this.uniforms=wt(s),Object.keys(s).forEach(function(t){b[t]=e.prop(t)}));var w={};Object.keys(a).forEach(function(t){w[t]=a[t].get()});var x=i&&this.generateDefines(i)||"",_={attributes:w,frag:"#ifdef GL_FRAGMENT_PRECISION_HIGH\n  precision highp float;\n#else\n  precision mediump float;\n#endif\n".concat(x,"\n").concat(o),uniforms:b,vert:"\n".concat(x,"\n").concat(n),primitive:Y[void 0===l?S.TRIANGLES:l]};v&&(_.instances=v),c&&(_.count=c),f&&(_.elements=f.get()),g&&(_.scissor=g),m&&(_.viewport=m),this.initDepthDrawParams({depth:h},_),this.initBlendDrawParams({blend:p},_),this.initStencilDrawParams({stencil:d},_),this.initCullDrawParams({cull:y},_),this.drawCommand=e(_)}return c(t,[{key:"addUniforms",value:function(t){this.uniforms=xt(xt({},this.uniforms),wt(t))}},{key:"draw",value:function(t){var e=xt(xt({},this.uniforms),wt(t.uniforms||{})),r={};Object.keys(e).forEach(function(t){var n=i(e[t]);"boolean"===n||"number"===n||Array.isArray(e[t])||e[t].BYTES_PER_ELEMENT?r[t]=e[t]:"string"===n||(r[t]=e[t].get())}),this.drawCommand(r)}},{key:"destroy",value:function(){}},{key:"initDepthDrawParams",value:function(t,e){var r=t.depth;r&&(e.depth={enable:void 0===r.enable||!!r.enable,mask:void 0===r.mask||!!r.mask,func:et[r.func||S.LESS],range:r.range||[0,1]})}},{key:"initBlendDrawParams",value:function(t,e){var r=t.blend;if(r){var n=r.enable,o=r.func,i=r.equation,a=r.color,s=void 0===a?[0,0,0,0]:a;e.blend={enable:!!n,func:{srcRGB:nt[o&&o.srcRGB||S.SRC_ALPHA],srcAlpha:nt[o&&o.srcAlpha||S.SRC_ALPHA],dstRGB:nt[o&&o.dstRGB||S.ONE_MINUS_SRC_ALPHA],dstAlpha:nt[o&&o.dstAlpha||S.ONE_MINUS_SRC_ALPHA]},equation:{rgb:rt[i&&i.rgb||S.FUNC_ADD],alpha:rt[i&&i.alpha||S.FUNC_ADD]},color:s}}}},{key:"initStencilDrawParams",value:function(t,e){var r=t.stencil;if(r){var n=r.enable,o=r.mask,i=void 0===o?-1:o,a=r.func,s=void 0===a?{cmp:S.ALWAYS,ref:0,mask:-1}:a,u=r.opFront,l=void 0===u?{fail:S.KEEP,zfail:S.KEEP,zpass:S.KEEP}:u,c=r.opBack,f=void 0===c?{fail:S.KEEP,zfail:S.KEEP,zpass:S.KEEP}:c;e.stencil={enable:!!n,mask:i,func:xt(xt({},s),{},{cmp:ot[s.cmp]}),opFront:{fail:it[l.fail],zfail:it[l.zfail],zpass:it[l.zpass]},opBack:{fail:it[f.fail],zfail:it[f.zfail],zpass:it[f.zpass]}}}}},{key:"initCullDrawParams",value:function(t,e){var r=t.cull;if(r){var n=r.enable,o=r.face,i=void 0===o?S.BACK:o;e.cull={enable:!!n,face:at[i]}}}},{key:"generateDefines",value:function(t){return Object.keys(t).map(function(e){return"#define ".concat(e," ").concat(Number(t[e]))}).join("\n")}}]),t}(),Et=function(){function t(e,r){u(this,t),this.texture=void 0,this.width=void 0,this.height=void 0;var n=r.data,o=r.type,i=void 0===o?S.UNSIGNED_BYTE:o,a=r.width,s=r.height,l=r.flipY,c=void 0!==l&&l,f=r.format,h=void 0===f?S.RGBA:f,p=r.mipmap,d=void 0!==p&&p,y=r.wrapS,v=void 0===y?S.CLAMP_TO_EDGE:y,g=r.wrapT,m=void 0===g?S.CLAMP_TO_EDGE:g,b=r.aniso,w=void 0===b?0:b,x=r.alignment,_=void 0===x?1:x,E=r.premultiplyAlpha,O=void 0!==E&&E,P=r.mag,k=void 0===P?S.NEAREST:P,C=r.min,T=void 0===C?S.NEAREST:C,A=r.colorSpace,M=void 0===A?S.BROWSER_DEFAULT_WEBGL:A;this.width=a,this.height=s;var j={width:a,height:s,type:J[i],format:K[h],wrapS:$[v],wrapT:$[m],mag:Z[k],min:Z[T],alignment:_,flipY:c,colorSpace:tt[M],premultiplyAlpha:O,aniso:w};n&&(j.data=n),"number"==typeof d?j.mipmap=Q[d]:"boolean"==typeof d&&(j.mipmap=d),this.texture=e.texture(j)}return c(t,[{key:"get",value:function(){return this.texture}},{key:"update",value:function(){this.texture._texture.bind()}},{key:"resize",value:function(t){var e=t.width,r=t.height;this.texture.resize(e,r),this.width=e,this.height=r}},{key:"destroy",value:function(){this.texture.destroy()}}]),t}(),Ot=function(){function t(){var e=this;u(this,t),this.supportWebGPU=!1,this.useWGSL=!1,this.$canvas=void 0,this.gl=void 0,this.inited=void 0,this.createModel=function(){var t=o(m().mark(function t(r){return m().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!r.uniforms){t.next=3;break}return t.next=3,Promise.all(Object.keys(r.uniforms).map(function(){var t=o(m().mark(function t(e){var n;return m().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!r.uniforms[e]||void 0===r.uniforms[e].load){t.next=5;break}return t.next=3,r.uniforms[e].load();case 3:n=t.sent,r.uniforms[e]=n;case 5:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()));case 3:return t.abrupt("return",new _t(e.gl,r));case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),this.createAttribute=function(t){return new q(e.gl,t)},this.createBuffer=function(t){return new st(e.gl,t)},this.createElements=function(t){return new vt(e.gl,t)},this.createTexture2D=function(t){return new Et(e.gl,t)},this.createFramebuffer=function(t){return new gt(e.gl,t)},this.useFramebuffer=function(t,r){e.gl({framebuffer:t?t.get():null})(r)},this.createComputeModel=function(){var t=o(m().mark(function t(r){return m().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new yt(e.gl,r));case 1:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),this.clear=function(t){var r=t.color,n=t.depth,o=t.stencil,i=t.framebuffer,a=void 0===i?null:i,s={color:r,depth:n,stencil:o};s.framebuffer=null===a?a:a.get(),e.gl.clear(s)},this.setScissor=function(t){e.gl&&e.gl._gl&&(t.enable&&t.box?(e.gl._gl.enable(S.SCISSOR_TEST),e.gl._gl.scissor(t.box.x,t.box.y,t.box.width,t.box.height)):e.gl._gl.disable(S.SCISSOR_TEST),e.gl._refresh())},this.viewport=function(t){var r=t.x,n=t.y,o=t.width,i=t.height;e.gl&&e.gl._gl&&(e.gl._gl.viewport(r,n,o,i),e.gl._refresh())},this.readPixels=function(t){var r=t.framebuffer,n={x:t.x,y:t.y,width:t.width,height:t.height};return r&&(n.framebuffer=r.get()),e.gl.read(n)},this.getCanvas=function(){return e.$canvas},this.getGLContext=function(){return e.gl._gl},this.destroy=function(){e.gl&&(e.gl.destroy(),e.inited=!1)}}return c(t,[{key:"init",value:function(){var t=o(m().mark(function t(e){return m().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.inited){t.next=2;break}return t.abrupt("return");case 2:return this.$canvas=e.canvas,t.next=5,new Promise(function(t,r){W()({canvas:e.canvas,attributes:{alpha:!0,antialias:e.antialias,premultipliedAlpha:!0},pixelRatio:1,extensions:["OES_element_index_uint","OES_texture_float","OES_standard_derivatives","angle_instanced_arrays"],optionalExtensions:["EXT_texture_filter_anisotropic","EXT_blend_minmax","WEBGL_depth_texture"],profile:!0,onDone:function(e,n){!e&&n||r(e),t(n)}})});case 5:this.gl=t.sent,this.inited=!0;case 7:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"isFloatSupported",value:function(){return this.gl.limits.readFloat}},{key:"beginFrame",value:function(){}},{key:"endFrame",value:function(){}}]),t}(),Pt=function(){function t(){u(this,t),this.engine=void 0,this.configService=new P}return c(t,[{key:"setConfig",value:function(t){this.configService.set(t)}},{key:"setEngine",value:function(t){this.engine=t}},{key:"createEntity",value:function(){return w()}},{key:"createKernel",value:function(t){var e=new V(this.engine,this.configService);return"string"==typeof t?e.setBundle(JSON.parse(t)):e.setBundle(t),e.init(),e}},{key:"destroy",value:function(){this.engine.destroy()}}],[{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=new t;return r.setConfig(e),r.setEngine(new Ot),r}}]),t}()},2314:function(t,e,r){"use strict";r.r(e),r.d(e,{Graph:function(){return w},GraphWithEvent:function(){return k},algorithm:function(){return n},comparision:function(){return i},essence:function(){return o},generate:function(){return s}});var n={};r.r(n),r.d(n,{components:function(){return M},dfs:function(){return j},dijkstra:function(){return D},dijkstraAll:function(){return B},findCycles:function(){return G},floydWarshall:function(){return et},isAcyclic:function(){return Q},postorder:function(){return Z},preorder:function(){return $},prim:function(){return A},tarjan:function(){return F},topsort:function(){return K}});var o={};r.r(o),r.d(o,{hasSelfLoop:function(){return vt},isGraph:function(){return pt},isNullGraph:function(){return yt},isSimpleGraph:function(){return dt}});var i={};r.r(i),r.d(i,{containAllSameEdges:function(){return ut},containAllSameNodes:function(){return st},containSameEdges:function(){return nt},containSameNodes:function(){return rt},getSameEdges:function(){return it},getSameNodes:function(){return ot},isGraphComplement:function(){return gt},isGraphContainsAnother:function(){return ct},isGraphOptionSame:function(){return at},isGraphSame:function(){return lt}});var a,s={};function u(t,e){var r=t.get(e)||0;t.set(e,r+1)}function l(t,e){var r=t.get(e);void 0!==r&&((r-=1)>0?t.set(e,r):t.delete(e))}function c(t,e,r,n){var o=String(e),i=String(r);if(!t&&o>i){var s=o;o=i,i=s}return o+a.EDGE_KEY_DELIM+i+a.EDGE_KEY_DELIM+(void 0===n?a.DEFAULT_EDGE_NAME:n)}function f(t,e,r,n){var o=String(e),i=String(r),a={v:e,w:r};if(!t&&o>i){var s=a.v;a.v=a.w,a.w=s}return void 0!==n&&(a.name=n),a}function h(t,e){return c(t,e.v,e.w,e.name)}function p(t){return"function"==typeof t}r.r(s),r.d(s,{getGraphComplement:function(){return mt}}),function(t){t.DEFAULT_EDGE_NAME="\0",t.GRAPH_NODE="\0",t.EDGE_KEY_DELIM=""}(a||(a={}));var d=function(t){var e={options:{directed:t.isDirected(),multigraph:t.isMultigraph(),compound:t.isCompound()},nodes:function(t){return t.nodes().map(function(e){var r={id:e,value:t.node(e),parent:t.parent(e)};return void 0===r.value&&delete r.value,void 0===r.parent&&delete r.parent,r})}(t),edges:function(t){return t.edges().map(function(e){var r=t.edge(e),n={v:e.v,w:e.w,value:r,name:e.name};return void 0===n.name&&delete n.name,void 0===n.value&&delete n.value,n})}(t),value:t.graph()};return void 0===e.value&&delete e.value,e};function y(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function v(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?y(Object(r),!0).forEach(function(e){g(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function g(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function m(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var b={compound:!1,multigraph:!1,directed:!0},w=function(){function t(){var e=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.directed=!0,this.multigraph=!1,this.compound=!1,this.GRAPH_NODE=a.GRAPH_NODE,this.label=void 0,this.nodeCountNum=0,this.edgeCountNum=0,this.defaultNodeLabelFn=function(){},this.defaultEdgeLabelFn=function(){},this.parentMap=void 0,this.childrenMap=void 0,this.nodesLabelMap=new Map,this.inEdgesMap=new Map,this.outEdgesMap=new Map,this.predecessorsMap=new Map,this.successorsMap=new Map,this.edgesMap=new Map,this.edgesLabelsMap=new Map,this.isDirected=function(){return e.directed},this.isMultigraph=function(){return e.multigraph},this.isCompound=function(){return e.compound},this.setGraph=function(t){return e.label=t,e},this.graph=function(){return e.label},this.setDefaultNodeLabel=function(t){return p(t)?e.defaultNodeLabelFn=t:e.defaultNodeLabelFn=function(){return t},e},this.nodeCount=function(){return e.nodeCountNum},this.node=function(t){return e.nodesLabelMap.get(t)},this.nodes=function(){return Array.from(e.nodesLabelMap.keys())},this.sources=function(){return e.nodes().filter(function(t){var r;return!(null===(r=e.inEdgesMap.get(t))||void 0===r?void 0:r.size)})},this.sinks=function(){return e.nodes().filter(function(t){var r;return!(null===(r=e.outEdgesMap.get(t))||void 0===r?void 0:r.size)})},this.setNodes=function(t,r){return t.map(function(t){return e.setNode(t,r)}),e},this.hasNode=function(t){return e.nodesLabelMap.has(t)},this.checkCompound=function(){if(!e.isCompound())throw new Error("Cannot construct parent-children relations in a non-compound graph")},this.parent=function(t){if(e.isCompound()){var r,n=null===(r=e.parentMap)||void 0===r?void 0:r.get(t);if(n!==e.GRAPH_NODE)return n}},this.removeFromParentsChildList=function(t){var r=e.parentMap.get(t);e.childrenMap.get(r).delete(t)},this.setParent=function(t,r){var n,o;e.checkCompound();for(var i=void 0===r?e.GRAPH_NODE:r,a=e.parent(i);a;){if(t===a)throw new Error("Setting "+r+" as parent of "+t+" would create a cycle");a=e.parent(a)}r&&e.setNode(r),e.setNode(t),e.removeFromParentsChildList(t),null===(n=e.parentMap)||void 0===n||n.set(t,i);var s=e.childrenMap.get(i);return s.set(t,!0),null===(o=e.childrenMap)||void 0===o||o.set(i,s),e},this.children=function(t){var r=void 0===t?e.GRAPH_NODE:t;if(e.isCompound()){var n,o=null===(n=e.childrenMap)||void 0===n?void 0:n.get(r);return o?Array.from(o.keys()):void 0}return r===e.GRAPH_NODE?e.nodes():t&&e.hasNode(t)?[]:void 0},this.predecessors=function(t){var r=e.predecessorsMap.get(t);return r?Array.from(r.keys()):void 0},this.successors=function(t){var r=e.successorsMap.get(t);return r?Array.from(r.keys()):void 0},this.neighbors=function(t){var r;if(e.hasNode(t))return Array.from(new Set(null===(r=e.predecessors(t))||void 0===r?void 0:r.concat(e.successors(t))))},this.isLeaf=function(t){var r,n;return e.isDirected()?!(null===(n=e.successors(t))||void 0===n?void 0:n.length):!(null===(r=e.neighbors(t))||void 0===r?void 0:r.length)},this.filterNodes=function(r){var n=e.directed,o=e.multigraph,i=e.compound,a=new t({directed:n,multigraph:o,compound:i});if(a.setGraph(e.graph()),e.nodes().forEach(function(t){r(t)&&a.setNode(t,e.node(t))}),e.edges().forEach(function(t){a.hasNode(t.v)&&a.hasNode(t.w)&&a.setEdgeObj(t,e.edge(t))}),i){a.nodes().forEach(function(t){a.setParent(t,function(t){for(var r=e.parent(t);void 0!==r&&!a.hasNode(r);)r=e.parent(r);return r}(t))})}return a},this.setDefaultEdgeLabel=function(t){return p(t)?e.defaultEdgeLabelFn=t:e.defaultEdgeLabelFn=function(){return t},e},this.edgeCount=function(){return e.edgeCountNum},this.setEdgeObj=function(t,r){return e.setEdge(t.v,t.w,r,t.name)},this.setPath=function(t,r){return t.reduce(function(t,n){return e.setEdge(t,n,r),n}),e},this.edgeFromArgs=function(t,r,n){return e.edge({v:t,w:r,name:n})},this.edge=function(t){return e.edgesLabelsMap.get(h(e.isDirected(),t))},this.hasEdge=function(t,r,n){return e.edgesLabelsMap.has(h(e.isDirected(),{v:t,w:r,name:n}))},this.removeEdgeObj=function(t){var r=t.v,n=t.w,o=t.name;return e.removeEdge(r,n,o)},this.edges=function(){return Array.from(e.edgesMap.values())},this.inEdges=function(t,r){var n=e.inEdgesMap.get(t);if(n)return Array.from(n.values()).filter(function(t){return!r||t.v===r})},this.outEdges=function(t,r){var n=e.outEdgesMap.get(t);if(n)return Array.from(n.values()).filter(function(t){return!r||t.w===r})},this.nodeEdges=function(t,r){var n;if(e.hasNode(t))return null===(n=e.inEdges(t,r))||void 0===n?void 0:n.concat(e.outEdges(t,r))},this.toJSON=function(){return d(e)},this.nodeInDegree=function(t){var r=e.inEdgesMap.get(t);return r?r.size:0},this.nodeOutDegree=function(t){var r=e.outEdgesMap.get(t);return r?r.size:0},this.nodeDegree=function(t){return e.nodeInDegree(t)+e.nodeOutDegree(t)},this.source=function(t){return t.v},this.target=function(t){return t.w};var n=v(v({},b),r);this.compound=n.compound,this.directed=n.directed,this.multigraph=n.multigraph,this.compound&&(this.parentMap=new Map,this.childrenMap=new Map)}var e,r,n;return e=t,(r=[{key:"setNode",value:function(t,e){var r,n=this.nodesLabelMap,o=this.defaultNodeLabelFn,i=this.isCompound,a=this.parentMap,s=this.childrenMap,u=this.inEdgesMap,l=this.outEdgesMap,c=this.predecessorsMap,f=this.successorsMap;if(n.has(t))return void 0!==e&&n.set(t,e),this;(n.set(t,e||o(t)),i())&&(null===a||void 0===a||a.set(t,this.GRAPH_NODE),null===s||void 0===s||s.set(t,new Map),(null===s||void 0===s?void 0:s.has(this.GRAPH_NODE))||null===s||void 0===s||s.set(this.GRAPH_NODE,new Map),null===s||void 0===s||null===(r=s.get(this.GRAPH_NODE))||void 0===r||r.set(t,!0));return[u,l,c,f].forEach(function(e){return e.set(t,new Map)}),this.nodeCountNum+=1,this}},{key:"removeNode",value:function(t){var e=this;if(this.hasNode(t)){var r,n,o,i=function(t){e.removeEdge(t.v,t.w,t.name)},a=this.inEdgesMap,s=this.outEdgesMap,u=this.predecessorsMap,l=this.successorsMap,c=this.nodesLabelMap;if(this.isCompound())this.removeFromParentsChildList(t),null===(r=this.parentMap)||void 0===r||r.delete(t),null===(n=this.children(t))||void 0===n||n.forEach(function(t){return e.setParent(t)}),null===(o=this.childrenMap)||void 0===o||o.delete(t);var f=a.get(t),h=s.get(t);Array.from(f.values()).forEach(function(t){return i(t)}),Array.from(h.values()).forEach(function(t){return i(t)}),c.delete(t),a.delete(t),s.delete(t),u.delete(t),l.delete(t),this.nodeCountNum-=1}return this}},{key:"setEdge",value:function(t,e,r,n){var o,i,a=f(this.isDirected(),t,e,n),s=h(this.isDirected(),a),l=a.v,c=a.w;if(this.edgesLabelsMap.has(s))return this.edgesLabelsMap.set(s,r),this;if(void 0!==n&&!this.isMultigraph())throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(l),this.setNode(c),this.edgesLabelsMap.set(s,r||this.defaultEdgeLabelFn(l,c,n)),Object.freeze(a),this.edgesMap.set(s,a);var p=this.predecessorsMap.get(c),d=this.successorsMap.get(l);return u(p,l),u(d,c),null===(o=this.inEdgesMap.get(c))||void 0===o||o.set(s,a),null===(i=this.outEdgesMap.get(l))||void 0===i||i.set(s,a),this.edgeCountNum+=1,this}},{key:"removeEdge",value:function(t,e,r){var n=c(this.isDirected(),t,e,r);if(this.edgesMap.get(n)){var o=f(this.isDirected(),t,e,r),i=o.v,a=o.w;this.edgesLabelsMap.delete(n),this.edgesMap.delete(n);var s=this.predecessorsMap.get(a),u=this.successorsMap.get(i);l(s,i),l(u,a),this.inEdgesMap.get(a).delete(n),this.outEdgesMap.get(i).delete(n),this.edgeCountNum-=1}return this}}])&&m(e.prototype,r),n&&m(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function S(t){"@babel/helpers - typeof";return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function x(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function _(){return(_="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=P(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function E(t,e){return(E=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function O(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=P(t);if(e){var o=P(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===S(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function P(t){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}w.fromJSON=function(t){var e=new w(t.options);return void 0!==t.value&&e.setGraph(t.value),t.nodes.forEach(function(t){e.setNode(t.id,t.value),t.parent&&e.setParent(t.id,t.parent)}),t.edges.forEach(function(t){e.setEdge(t.v,t.w,t.value,t.name)}),e};var k=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&E(t,e)}(i,w);var e,r,n,o=O(i);function i(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=o.call.apply(o,[this].concat(r))).eventPool={},t}return e=i,(r=[{key:"appendEvent",value:function(t,e){this.eventPool[t]||(this.eventPool[t]=[]),this.eventPool[t].push(e)}},{key:"removeEvent",value:function(t,e){if(this.eventPool[t]){var r=this.eventPool[t].indexOf(e);r>-1&&this.eventPool[t].splice(r,1)}}},{key:"emitEvent",value:function(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];this.eventPool[t]&&this.eventPool[t].forEach(function(t){t.apply(void 0,r)})}},{key:"setNode",value:function(t,e){return _(P(i.prototype),"setNode",this).call(this,t,e),this.emitEvent("nodeAdd",t,e),this}},{key:"removeNode",value:function(t){return _(P(i.prototype),"removeNode",this).call(this,t),this.emitEvent("nodeRemove",t),this}},{key:"setEdge",value:function(t,e,r,n){return _(P(i.prototype),"setEdge",this).call(this,t,e,r,n),this.emitEvent("edgeAdd",t,e,r,n),this}},{key:"removeEdge",value:function(t,e,r){return _(P(i.prototype),"removeEdge",this).call(this,t,e,r),this.emitEvent("edgeRemove",t,e,r),this}}])&&x(e.prototype,r),n&&x(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function C(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var T=function(t,e,r){return e&&C(t.prototype,e),r&&C(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.arr=[],this.keyIndice=new Map,this.size=function(){return e.arr.length},this.keys=function(){return e.arr.map(function(t){return t.key})},this.has=function(t){return e.keyIndice.has(t)},this.priority=function(t){var r=e.keyIndice.get(t);if(void 0!==r)return e.arr[r].priority},this.swap=function(t,r){var n=e.arr,o=e.keyIndice,i=[n[t],n[r]],a=i[0],s=i[1];n[t]=s,n[r]=a,o.set(a.key,r),o.set(s.key,t)},this.innerDecrease=function(t){for(var r,n=e.arr,o=n[t].priority,i=t;0!==i;){var a;if((null===(a=n[r=i>>1])||void 0===a?void 0:a.priority)<o)break;e.swap(i,r),i=r}},this.heapify=function(t){var r=e.arr,n=t<<1,o=n+1,i=t;n<r.length&&(i=r[n].priority<r[i].priority?n:i,o<r.length&&(i=r[o].priority<r[i].priority?o:i),i!==t&&(e.swap(t,i),e.heapify(i)))},this.min=function(){if(0===e.size())throw new Error("Queue underflow");return e.arr[0].key},this.add=function(t,r){var n=e.keyIndice,o=e.arr;if(!n.has(t)){var i=o.length;return n.set(t,i),o.push({key:t,priority:r}),e.innerDecrease(i),!0}return!1},this.removeMin=function(){e.swap(0,e.arr.length-1);var t=e.arr.pop();return e.keyIndice.delete(t.key),e.heapify(0),t.key},this.decrease=function(t,r){if(!e.has(t))throw new Error("There's no key named ".concat(t));var n=e.keyIndice.get(t);if(r>e.arr[n].priority)throw new Error("New priority is greater than current priority.Key: ".concat(t," Old: + ").concat(e.arr[n].priority," New: ").concat(r));e.arr[n].priority=r,e.innerDecrease(n)}}),A=function(t,e){var r,n=new w,o=new Map,i=new T;function a(t){var n=t.v===r?t.w:t.v,a=i.priority(n);if(void 0!==a){var s=e(t);s<a&&(o.set(n,r),i.decrease(n,s))}}if(0===t.nodeCount())return n;t.nodes().forEach(function(t){i.add(t,Number.POSITIVE_INFINITY),n.setNode(t)}),i.decrease(t.nodes()[0],0);for(var s=!1;i.size()>0;){var u;if(r=i.removeMin(),o.has(r))n.setEdge(r,o.get(r));else{if(s)throw new Error("Input graph is not connected: "+t.graph());s=!0}null===(u=t.nodeEdges(r))||void 0===u||u.forEach(a)}return n},M=function(t){var e=new Set,r=[];return t.nodes().forEach(function(n){for(var o=[],i=[n];i.length>0;){var a,s,u=i.pop();e.has(u)||(e.add(u),o.push(u),null===(a=t.successors(u))||void 0===a||a.forEach(function(t){return i.push(t)}),null===(s=t.predecessors(u))||void 0===s||s.forEach(function(t){return i.push(t)}))}o.length&&r.push(o)}),r},j=function(t,e,r){var n=function(e){return t.isDirected()?t.successors(e):t.neighbors(e)},o=[],i=[];return(Array.isArray(e)?e:[e]).forEach(function(e){if(!t.hasNode(e))throw new Error("Graph does not have node: "+e);!function t(e,r,n,o,i,a){o.includes(r)||(o.push(r),n||a.push(r),i(r).forEach(function(r){return t(e,r,n,o,i,a)}),n&&a.push(r))}(t,e,"post"===r,i,n,o)}),o};function I(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,s=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){s=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(s)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return N(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return N(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var L=function(){return 1},R=function(t,e,r,n){var o,i,a=new Map,s=new T,u=function(t){var e=t.v!==o?t.v:t.w,n=a.get(e),u=r(t),l=i.distance+u;if(u<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+t+" Weight: "+u);l<n.distance&&(n.distance=l,n.predecessor=o,s.decrease(e,l))};for(t.nodes().forEach(function(t){var r=t===e?0:Number.POSITIVE_INFINITY;a.set(t,{distance:r}),s.add(t,r)});s.size()>0&&(o=s.removeMin(),!(i=a.get(o))||i.distance!==Number.POSITIVE_INFINITY);)n(o).forEach(u);var l={};return Array.from(a.entries()).forEach(function(t){var e=I(t,2),r=e[0],n=e[1];return l[String(r)]=n,l}),l},D=function(t,e,r,n){return R(t,e,r||L,n||function(e){return t.outEdges(e)})},B=function(t,e,r){var n={};return t.nodes().forEach(function(o){return n[String(o)]=D(t,o,e,r),n}),n},F=function(t){var e=0,r=[],n=new Map,o=[];return t.nodes().forEach(function(i){n.has(i)||function i(a){var s,u={onStack:!0,lowlink:e,index:e};if(n.set(a,u),e+=1,r.push(a),null===(s=t.successors(a))||void 0===s||s.forEach(function(t){var e;if(n.has(t)){if(null===(e=n.get(t))||void 0===e?void 0:e.onStack){var r=n.get(t);u.lowlink=Math.min(u.lowlink,r.index)}}else{i(t);var o=n.get(t);u.lowlink=Math.min(u.lowlink,o.lowlink)}}),u.lowlink===u.index){var l,c=[];do{l=r.pop(),n.get(l).onStack=!1,c.push(l)}while(a!==l);o.push(c)}}(i)}),o},G=function(t){return F(t).filter(function(e){return e.length>1||1===e.length&&t.hasEdge(e[0],e[0])})};function U(t){"@babel/helpers - typeof";return(U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function z(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function V(t){var e=q();return function(){var r,n=X(t);if(e){var o=X(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===U(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function H(t){var e="function"==typeof Map?new Map:void 0;return(H=function(t){if(null===t||(r=t,-1===Function.toString.call(r).indexOf("[native code]")))return t;var r;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return W(t,arguments,X(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Y(n,t)})(t)}function W(t,e,r){return(W=q()?Reflect.construct:function(t,e,r){var n=[null];n.push.apply(n,e);var o=new(Function.bind.apply(t,n));return r&&Y(o,r.prototype),o}).apply(null,arguments)}function q(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function Y(t,e){return(Y=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function X(t){return(X=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var J=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Y(t,e)}(i,H(Error));var e,r,n,o=V(i);function i(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return e=i,r&&z(e.prototype,r),n&&z(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}();var K=function(t){var e=new Set,r=new Set,n=[];if(t.sinks().forEach(function o(i){if(r.has(i))throw new J;var a;e.has(i)||(r.add(i),e.add(i),null===(a=t.predecessors(i))||void 0===a||a.forEach(o),r.delete(i),n.push(i))}),e.size!==t.nodeCount())throw new J;return n},Q=function(t){try{K(t)}catch(t){if(t instanceof J)return!1;throw t}return!0},Z=function(t,e){return j(t,e,"post")},$=function(t,e){return j(t,e,"pre")},tt=function(){return 1};var et=function(t,e,r){return function(t,e,r){var n={},o=t.nodes();return o.forEach(function(t){var i=String(t);n[i]={},n[i][i]={distance:0},o.forEach(function(e){t!==e&&(n[i][String(e)]={distance:Number.POSITIVE_INFINITY})}),r(t).forEach(function(r){var o=r.v===t?r.w:r.v,a=e(r);n[i][String(o)]={distance:a,predecessor:t}})}),o.forEach(function(t){var e=String(t),r=n[e];o.forEach(function(t){var i=String(t),a=n[i];o.forEach(function(t){var n=String(t),o=a[e],i=r[n],s=a[n],u=o.distance+i.distance;u<s.distance&&(s.distance=u,s.predecessor=i.predecessor)})})}),n}(t,e||tt,r||function(e){return t.outEdges(e)})},rt=function(t,e){for(var r=t.nodes(),n=0;n<r.length;n++){var o=r[n];if(e.hasNode(o))return!0}return!1},nt=function(t,e){for(var r=t.edges(),n=0;n<r.length;n++){var o=r[n];if(e.hasEdge(o.v,o.w,o.name))return!0}return!1},ot=function(t,e){return t.nodes().filter(function(t){return e.hasNode(t)})},it=function(t,e){return t.edges().filter(function(t){return e.hasEdge(t.v,t.w,t.name)})},at=function(t,e){return t.isCompound()===e.isCompound()&&t.isDirected()===e.isDirected()&&t.isMultigraph()===e.isMultigraph()},st=function(t,e){return ot(t,e).length===t.nodes().length},ut=function(t,e){return it(t,e).length===t.edges().length},lt=function(t,e){return at(t,e)&&t.nodeCount()===e.nodeCount()&&st(t,e)&&t.edgeCount()===e.edgeCount()&&ut(t,e)},ct=function(t,e){return st(t,e)&&ut(t,e)};function ft(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,s=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){s=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(s)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return ht(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ht(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ht(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function pt(t){return t instanceof w}function dt(t){if(t.isMultigraph())return!1;for(var e=t.edges(),r=new Map,n=0;n<e.length;n++){var o=e[n];if(o.v===o.w)return!1;var i=ft([o.v,o.w].sort(),2),a=i[0],s=i[1],u="".concat(a,"-").concat(s);if(r.has(u))return!1;r.set(u,!0)}return!0}function yt(t){return 0===t.nodes().length}function vt(t){for(var e=t.edges(),r=0;r<e.length;r++){var n=e[r];if(n.v===n.w)return!0}return!1}var gt=function(t,e){if(!dt(t)||!dt(e))return!1;if(!st(t,e))return!1;if(nt(t,e))return!1;var r=t.nodeCount();return t.edgeCount()+e.edgeCount()===r*(r-1)/2},mt=function(t){if(!dt(t))return null;for(var e=t.nodeCount(),r=new w({compound:t.isCompound(),directed:t.isDirected(),multigraph:t.isMultigraph()}),n=t.nodes(),o=0;o<e;o++){var i=n[o];r.setNode(i,t.node(i));for(var a=o+1;a<e;a++){var s=n[a];t.hasEdge(i,s)||r.setEdge(i,s)}}return r}},5680:function(t,e,r){function n(t,e){return(n=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var o=r(210),i=r(5160),a=r(4507),s=r(1102),u=function(t){var e,r;function o(){return t.apply(this,arguments)||this}return r=t,(e=o).prototype=Object.create(r.prototype),e.prototype.constructor=e,n(e,r),o.prototype.execute=function(){return a(this.rootNode,this.options,i)},o}(o),l={};t.exports=function(t,e){return e=s.assign({},l,e),new u(t,e).execute()}},8447:function(t,e,r){function n(t,e){return(n=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var o=r(210),i=r(6080),a=r(4507),s=r(1102),u=function(t){var e,r;function o(){return t.apply(this,arguments)||this}return r=t,(e=o).prototype=Object.create(r.prototype),e.prototype.constructor=e,n(e,r),o.prototype.execute=function(){return this.rootNode.width=0,a(this.rootNode,this.options,i)},o}(o),l={};t.exports=function(t,e){return e=s.assign({},l,e),new u(t,e).execute()}},618:function(t,e,r){function n(t,e){return(n=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var o=r(210),i=r(1179),a=r(5097),s=r(1102),u=["LR","RL","H"],l=u[0],c=function(t){var e,r;function o(){return t.apply(this,arguments)||this}return r=t,(e=o).prototype=Object.create(r.prototype),e.prototype.constructor=e,n(e,r),o.prototype.execute=function(){var t=this.options,e=this.rootNode;t.isHorizontal=!0;var r=t.indent,n=void 0===r?20:r,o=t.dropCap,s=void 0===o||o,c=t.direction,f=void 0===c?l:c,h=t.align;if(f&&-1===u.indexOf(f))throw new TypeError("Invalid direction: "+f);if(f===u[0])i(e,n,s,h);else if(f===u[1])i(e,n,s,h),e.right2left();else if(f===u[2]){var p=a(e,t),d=p.left,y=p.right;i(d,n,s,h),d.right2left(),i(y,n,s,h);var v=d.getBoundingBox();y.translate(v.width,0),e.x=y.x-e.width/2}return e},o}(o),f={};t.exports=function(t,e){return e=s.assign({},f,e),new c(t,e).execute()}},8716:function(t,e,r){var n={compactBox:r(5680),dendrogram:r(8447),indented:r(618),mindmap:r(4842)};t.exports=n},210:function(t,e,r){var n=r(5406),o=function(){function t(t,e){void 0===e&&(e={});this.options=e,this.rootNode=n(t,e)}return t.prototype.execute=function(){throw new Error("please override this method")},t}();t.exports=o},6080:function(t,e,r){var n=r(1102);var o={isHorizontal:!0,nodeSep:20,nodeSize:20,rankSep:200,subTreeSep:10};t.exports=function(t,e){void 0===e&&(e={}),e=n.assign({},o,e);var r,i=0;var a=function t(e){if(!e)return null;e.width=0,e.depth&&e.depth>i&&(i=e.depth);var r=e.children,n=r.length,o=new function(t,e){void 0===t&&(t=0),void 0===e&&(e=[]);var r=this;r.x=r.y=0,r.leftChild=r.rightChild=null,r.height=0,r.children=e}(e.height,[]);return r.forEach(function(e,r){var i=t(e);o.children.push(i),0===r&&(o.leftChild=i),r===n-1&&(o.rightChild=i)}),o.originNode=e,o.isLeaf=e.isLeaf(),o}(t);return function t(e){if(e.isLeaf||0===e.children.length)e.drawingDepth=i;else{var r=e.children.map(function(e){return t(e)}),n=Math.min.apply(null,r);e.drawingDepth=n-1}return e.drawingDepth}(a),function t(n){n.x=n.drawingDepth*e.rankSep,n.isLeaf?(n.y=0,r&&(n.y=r.y+r.height+e.nodeSep,n.originNode.parent!==r.originNode.parent&&(n.y+=e.subTreeSep)),r=n):(n.children.forEach(function(e){t(e)}),n.y=(n.leftChild.y+n.rightChild.y)/2)}(a),function t(e,r,n){n?(r.x=e.x,r.y=e.y):(r.x=e.y,r.y=e.x),e.children.forEach(function(e,o){t(e,r.children[o],n)})}(a,t,e.isHorizontal),t}},4507:function(t,e,r){var n=r(5097),o=["LR","RL","TB","BT","H","V"],i=["LR","RL","H"],a=o[0];t.exports=function(t,e,r){var s=e.direction||a;if(e.isHorizontal=function(t){return i.indexOf(t)>-1}(s),s&&-1===o.indexOf(s))throw new TypeError("Invalid direction: "+s);if(s===o[0])r(t,e);else if(s===o[1])r(t,e),t.right2left();else if(s===o[2])r(t,e);else if(s===o[3])r(t,e),t.bottom2top();else if(s===o[4]||s===o[5]){var u=n(t,e),l=u.left,c=u.right;r(l,e),r(c,e),e.isHorizontal?l.right2left():l.bottom2top(),c.translate(l.x-c.x,l.y-c.y),t.x=l.x,t.y=c.y;var f=t.getBoundingBox();e.isHorizontal?f.top<0&&t.translate(0,-f.top):f.left<0&&t.translate(-f.left,0)}var h=e.fixedRoot;return void 0===h&&(h=!0),h&&t.translate(-(t.x+t.width/2+t.hgap),-(t.y+t.height/2+t.vgap)),t}},5406:function(t,e,r){var n=r(1102),o={getId:function(t){return t.id||t.name},getPreH:function(t){return t.preH||0},getPreV:function(t){return t.preV||0},getHGap:function(t){return t.hgap||18},getVGap:function(t){return t.vgap||18},getChildren:function(t){return t.children},getHeight:function(t){return t.height||36},getWidth:function(t){var e=t.label||" ";return t.width||18*e.split("").length}};function i(t,e){var r=this;if(r.vgap=r.hgap=0,t instanceof i)return t;r.data=t;var n=e.getHGap(t),o=e.getVGap(t);return r.preH=e.getPreH(t),r.preV=e.getPreV(t),r.width=e.getWidth(t),r.height=e.getHeight(t),r.width+=r.preH,r.height+=r.preV,r.id=e.getId(t),r.x=r.y=0,r.depth=0,r.children||(r.children=[]),r.addGap(n,o),r}n.assign(i.prototype,{isRoot:function(){return 0===this.depth},isLeaf:function(){return 0===this.children.length},addGap:function(t,e){this.hgap+=t,this.vgap+=e,this.width+=2*t,this.height+=2*e},eachNode:function(t){for(var e,r=[this];e=r.shift();)t(e),r=e.children.concat(r)},DFTraverse:function(t){this.eachNode(t)},BFTraverse:function(t){for(var e,r=[this];e=r.shift();)t(e),r=r.concat(e.children)},getBoundingBox:function(){var t={left:Number.MAX_VALUE,top:Number.MAX_VALUE,width:0,height:0};return this.eachNode(function(e){t.left=Math.min(t.left,e.x),t.top=Math.min(t.top,e.y),t.width=Math.max(t.width,e.x+e.width),t.height=Math.max(t.height,e.y+e.height)}),t},translate:function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.eachNode(function(r){r.x+=t,r.y+=e,r.x+=r.preH,r.y+=r.preV})},right2left:function(){var t=this.getBoundingBox();this.eachNode(function(e){e.x=e.x-2*(e.x-t.left)-e.width}),this.translate(t.width,0)},bottom2top:function(){var t=this.getBoundingBox();this.eachNode(function(e){e.y=e.y-2*(e.y-t.top)-e.height}),this.translate(0,t.height)}}),t.exports=function(t,e,r){void 0===e&&(e={});var a,s=new i(t,e=n.assign({},o,e)),u=[s];if(!r&&!t.collapsed)for(;a=u.shift();)if(!a.data.collapsed){var l=e.getChildren(a.data),c=l?l.length:0;if(a.children=new Array(c),l&&c)for(var f=0;f<c;f++){var h=new i(l[f],e);a.children[f]=h,u.push(h),h.parent=a,h.depth=a.depth+1}}return s}},1179:function(t,e,r){var n=r(1102);t.exports=function(t,e,r,o){var i=null;t.eachNode(function(t){!function(t,e,r,o,i){var a="function"==typeof r?r(t):r*t.depth;if(!o)try{if(t.id===t.parent.children[0].id)return t.x+=a,void(t.y=e?e.y:0)}catch(t){}if(t.x+=a,e){if(t.y=e.y+n.getHeight(e,t,i),e.parent&&t.parent.id!==e.parent.id){var s=e.parent,u=s.y+n.getHeight(s,t,i);t.y=u>t.y?u:t.y}}else t.y=0}(t,i,e,r,o),i=t})}},7397:function(t,e,r){var n=r(1102);var o={getSubTreeSep:function(){return 0}};t.exports=function(t,e){void 0===e&&(e={}),e=n.assign({},o,e),t.parent={x:0,width:0,height:0,y:0},t.BFTraverse(function(t){t.x=t.parent.x+t.parent.width}),t.parent=null,function t(e,r){var n=0;return e.children.length?e.children.forEach(function(e){n+=t(e,r)}):n=e.height,e._subTreeSep=r.getSubTreeSep(e.data),e.totalHeight=Math.max(e.height,n)+2*e._subTreeSep,e.totalHeight}(t,e),t.startY=0,t.y=t.totalHeight/2-t.height/2,t.eachNode(function(t){var e=t.children,r=e.length;if(r){var n=e[0];if(n.startY=t.startY+t._subTreeSep,1===r)n.y=t.y+t.height/2-n.height/2;else{n.y=n.startY+n.totalHeight/2-n.height/2;for(var o=1;o<r;o++){var i=e[o];i.startY=e[o-1].startY+e[o-1].totalHeight,i.y=i.startY+i.totalHeight/2-i.height/2}}}}),function t(e){var r=e.children,n=r.length;if(n){r.forEach(function(e){t(e)});var o=r[0],i=r[n-1],a=i.y-o.y+i.height,s=0;if(r.forEach(function(t){s+=t.totalHeight}),a>e.height)e.y=o.y+a/2-e.height/2;else if(1!==r.length||e.height>s){var u=e.y+(e.height-a)/2-o.y;r.forEach(function(t){t.translate(0,u)})}else e.y=(o.y+o.height/2+i.y+i.height/2)/2-e.height/2}}(t)}},5160:function(t){function e(t,e,r,n){void 0===n&&(n=[]);var o=this;o.w=t||0,o.h=e||0,o.y=r||0,o.x=0,o.c=n||[],o.cs=n.length,o.prelim=0,o.mod=0,o.shift=0,o.change=0,o.tl=null,o.tr=null,o.el=null,o.er=null,o.msel=0,o.mser=0}function r(t,e){!function t(e,r,n){n?e.y+=r:e.x+=r,e.children.forEach(function(e){t(e,r,n)})}(t,-function t(e,r){var n=r?e.y:e.x;return e.children.forEach(function(e){n=Math.min(t(e,r),n)}),n}(t,e),e)}e.fromNode=function(t,r){if(!t)return null;var n=[];return t.children.forEach(function(t){n.push(e.fromNode(t,r))}),r?new e(t.height,t.width,t.x,n):new e(t.width,t.height,t.y,n)},t.exports=function(t,n){void 0===n&&(n={});var o=n.isHorizontal;function i(t){0===t.cs?(t.el=t,t.er=t,t.msel=t.mser=0):(t.el=t.c[0].el,t.msel=t.c[0].msel,t.er=t.c[t.cs-1].er,t.mser=t.c[t.cs-1].mser)}function a(t,e,r){for(var n=t.c[e-1],o=n.mod,i=t.c[e],a=i.mod;null!==n&&null!==i;){c(n)>r.low&&(r=r.nxt);var f=o+n.prelim+n.w-(a+i.prelim);f>0&&(a+=f,s(t,e,r.index,f));var h=c(n),p=c(i);h<=p&&null!==(n=l(n))&&(o+=n.mod),h>=p&&null!==(i=u(i))&&(a+=i.mod)}!n&&i?function(t,e,r,n){var o=t.c[0].el;o.tl=r;var i=n-r.mod-t.c[0].msel;o.mod+=i,o.prelim-=i,t.c[0].el=t.c[e].el,t.c[0].msel=t.c[e].msel}(t,e,i,a):n&&!i&&function(t,e,r,n){var o=t.c[e].er;o.tr=r;var i=n-r.mod-t.c[e].mser;o.mod+=i,o.prelim-=i,t.c[e].er=t.c[e-1].er,t.c[e].mser=t.c[e-1].mser}(t,e,n,o)}function s(t,e,r,n){t.c[e].mod+=n,t.c[e].msel+=n,t.c[e].mser+=n,function(t,e,r,n){if(r!==e-1){var o=e-r;t.c[r+1].shift+=n/o,t.c[e].shift-=n/o,t.c[e].change-=n-n/o}}(t,e,r,n)}function u(t){return 0===t.cs?t.tl:t.c[0]}function l(t){return 0===t.cs?t.tr:t.c[t.cs-1]}function c(t){return t.y+t.h}function f(t,e,r){for(;null!==r&&t>=r.low;)r=r.nxt;return{low:t,index:e,nxt:r}}!function t(e,r,n){void 0===n&&(n=0),r?(e.x=n,n+=e.width):(e.y=n,n+=e.height),e.children.forEach(function(e){t(e,r,n)})}(t,o);var h=e.fromNode(t,o);return function t(e){if(0!==e.cs){t(e.c[0]);for(var r=f(c(e.c[0].el),0,null),n=1;n<e.cs;++n){t(e.c[n]);var o=c(e.c[n].er);a(e,n,r),r=f(o,n,r)}!function(t){t.prelim=(t.c[0].prelim+t.c[0].mod+t.c[t.cs-1].mod+t.c[t.cs-1].prelim+t.c[t.cs-1].w)/2-t.w/2}(e),i(e)}else i(e)}(h),function t(e,r){r+=e.mod,e.x=e.prelim+r,function(t){for(var e=0,r=0,n=0;n<t.cs;n++)e+=t.c[n].shift,r+=e+t.c[n].change,t.c[n].mod+=r}(e);for(var n=0;n<e.cs;n++)t(e.c[n],r)}(h,0),function t(e,r,n){n?r.y=e.x:r.x=e.x,e.c.forEach(function(e,o){t(e,r.children[o],n)})}(h,t,o),r(t,o),t}},5097:function(t,e,r){var n=r(5406);t.exports=function(t,e){for(var r=n(t.data,e,!0),o=n(t.data,e,!0),i=t.children.length,a=Math.round(i/2),s=e.getSide||function(t,e){return e<a?"right":"left"},u=0;u<i;u++){var l=t.children[u];"right"===s(l,u)?o.children.push(l):r.children.push(l)}return r.eachNode(function(t){t.isRoot()||(t.side="left")}),o.eachNode(function(t){t.isRoot()||(t.side="right")}),{left:r,right:o}}},4842:function(t,e,r){function n(t,e){return(n=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var o=r(210),i=r(7397),a=r(4507),s=r(1102),u=function(t){var e,r;function o(){return t.apply(this,arguments)||this}return r=t,(e=o).prototype=Object.create(r.prototype),e.prototype.constructor=e,n(e,r),o.prototype.execute=function(){return a(this.rootNode,this.options,i)},o}(o),l={};t.exports=function(t,e){return e=s.assign({},l,e),new u(t,e).execute()}},1102:function(t,e,r){var n=r(7061).mix;t.exports={assign:n,getHeight:function(t,e,r,n){return void 0===n&&(n="height"),"center"===r?(t[n]+e[n])/2:t.height}}},6038:function(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);o&&("get"in o?e.__esModule:!o.writable&&!o.configurable)||(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),o=this&&this.__exportStar||function(t,e){for(var r in t)"default"===r||Object.prototype.hasOwnProperty.call(e,r)||n(e,t,r)};Object.defineProperty(e,"__esModule",{value:!0}),e.getLayoutByName=e.unRegisterLayout=e.registerLayout=void 0;var i=r(2235);Object.defineProperty(e,"registerLayout",{enumerable:!0,get:function(){return i.registerLayout}}),Object.defineProperty(e,"unRegisterLayout",{enumerable:!0,get:function(){return i.unRegisterLayout}}),Object.defineProperty(e,"getLayoutByName",{enumerable:!0,get:function(){return i.getLayoutByName}}),o(r(1812),e)},9284:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Base=void 0;var r=function(){function t(){this.nodes=[],this.edges=[],this.combos=[],this.comboEdges=[],this.hiddenNodes=[],this.hiddenEdges=[],this.hiddenCombos=[],this.vedges=[],this.positions=[],this.destroyed=!1,this.onLayoutEnd=function(){}}return t.prototype.layout=function(t){return this.init(t),this.execute(!0)},t.prototype.init=function(t){this.nodes=t.nodes||[],this.edges=t.edges||[],this.combos=t.combos||[],this.comboEdges=t.comboEdges||[],this.hiddenNodes=t.hiddenNodes||[],this.hiddenEdges=t.hiddenEdges||[],this.hiddenCombos=t.hiddenCombos||[],this.vedges=t.vedges||[]},t.prototype.execute=function(t){},t.prototype.executeWithWorker=function(){},t.prototype.getDefaultCfg=function(){return{}},t.prototype.updateCfg=function(t){t&&Object.assign(this,t)},t.prototype.getType=function(){return"base"},t.prototype.destroy=function(){this.nodes=null,this.edges=null,this.combos=null,this.positions=null,this.destroyed=!0},t}();e.Base=r},4933:function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.CircularLayout=void 0;var i=r(9284),a=r(8652);function s(t,e){var r=t.degree,n=e.degree;return r<n?-1:r>n?1:0}var u=function(t){function e(e){var r=t.call(this)||this;return r.radius=null,r.nodeSize=void 0,r.startRadius=null,r.endRadius=null,r.startAngle=0,r.endAngle=2*Math.PI,r.clockwise=!0,r.divisions=1,r.ordering=null,r.angleRatio=1,r.nodes=[],r.edges=[],r.nodeMap={},r.degrees=[],r.width=300,r.height=300,r.updateCfg(e),r}return o(e,t),e.prototype.getDefaultCfg=function(){return{radius:null,startRadius:null,endRadius:null,startAngle:0,endAngle:2*Math.PI,clockwise:!0,divisions:1,ordering:null,angleRatio:1}},e.prototype.execute=function(){var t,e=this.nodes,r=this.edges,n=e.length;if(0!==n){this.width||"undefined"==typeof window||(this.width=window.innerWidth),this.height||"undefined"==typeof window||(this.height=window.innerHeight),this.center||(this.center=[this.width/2,this.height/2]);var o=this.center;if(1===n)return e[0].x=o[0],e[0].y=o[1],void(this.onLayoutEnd&&this.onLayoutEnd());var i=this.radius,s=this.startRadius,u=this.endRadius,l=this.divisions,c=this.startAngle,f=this.endAngle,h=this.angleRatio,p=this.ordering,d=this.clockwise,y=this.nodeSpacing,v=this.nodeSize,g=(f-c)/n,m={};e.forEach(function(t,e){m[t.id]=e}),this.nodeMap=m;var b=(0,a.getDegree)(e.length,m,r);if(this.degrees=b,y){var w=(0,a.getFuncByUnknownType)(10,y),S=(0,a.getFuncByUnknownType)(10,v),x=-1/0;e.forEach(function(t){var e=S(t);x<e&&(x=e)});var _=0;e.forEach(function(t,e){_+=0===e?x||10:(w(t)||0)+(x||10)}),i=_/(2*Math.PI)}else i||s||u?!s&&u?s=u:s&&!u&&(u=s):i=this.height>this.width?this.width/2:this.height/2;var E=g*h,O=[];O="topology"===p?this.topologyOrdering():"topology-directed"===p?this.topologyOrdering(!0):"degree"===p?this.degreeOrdering():e;for(var P=Math.ceil(n/l),k=0;k<n;++k){var C=i;C||null===s||null===u||(C=s+k*(u-s)/(n-1)),C||(C=10+100*k/(n-1));var T=c+k%P*E+2*Math.PI/l*Math.floor(k/P);d||(T=f-k%P*E-2*Math.PI/l*Math.floor(k/P)),O[k].x=o[0]+Math.cos(T)*C,O[k].y=o[1]+Math.sin(T)*C,O[k].weight=b[k].all}return null===(t=this.onLayoutEnd)||void 0===t||t.call(this),{nodes:O,edges:this.edges}}this.onLayoutEnd&&this.onLayoutEnd()},e.prototype.topologyOrdering=function(t){void 0===t&&(t=!1);var e=this.degrees,r=this.edges,n=this.nodes,o=(0,a.clone)(n),i=this.nodeMap,s=[o[0]],u=[n[0]],l=[],c=n.length;l[0]=!0,function(t,e,r,n){t.forEach(function(e,r){t[r].children=[],t[r].parent=[]}),n?e.forEach(function(e){var n=(0,a.getEdgeTerminal)(e,"source"),o=(0,a.getEdgeTerminal)(e,"target"),i=0;n&&(i=r[n]);var s=0;o&&(s=r[o]);var u=t[i].children,l=t[s].parent;u.push(t[s].id),l.push(t[i].id)}):e.forEach(function(e){var n=(0,a.getEdgeTerminal)(e,"source"),o=(0,a.getEdgeTerminal)(e,"target"),i=0;n&&(i=r[n]);var s=0;o&&(s=r[o]);var u=t[i].children,l=t[s].children;u.push(t[s].id),l.push(t[i].id)})}(o,r,i,t);var f=0;return o.forEach(function(t,h){if(0!==h)if(h!==c-1&&e[h].all===e[h+1].all&&!function(t,e,r){for(var n=r.length,o=0;o<n;o++){var i=(0,a.getEdgeTerminal)(r[o],"source"),s=(0,a.getEdgeTerminal)(r[o],"target");if(t.id===i&&e.id===s||e.id===i&&t.id===s)return!0}return!1}(s[f],t,r)||l[h]){for(var p=s[f].children,d=!1,y=0;y<p.length;y++){var v=i[p[y]];if(e[v].all===e[h].all&&!l[v]){s.push(o[v]),u.push(n[i[o[v].id]]),l[v]=!0,d=!0;break}}for(var g=0;!d&&(l[g]||(s.push(o[g]),u.push(n[i[o[g].id]]),l[g]=!0,d=!0),++g!==c););}else s.push(t),u.push(n[i[t.id]]),l[h]=!0,f++}),u},e.prototype.degreeOrdering=function(){var t=this.nodes,e=[],r=this.degrees;return t.forEach(function(t,n){t.degree=r[n].all,e.push(t)}),e.sort(s),e},e.prototype.getType=function(){return"circular"},e}(i.Base);e.CircularLayout=u},9266:function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__assign||function(){return(i=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.ComboCombinedLayout=void 0;var a=r(4587),s=r(9284),u=r(8652),l=r(1812),c=function(t){function e(e){var r=t.call(this)||this;return r.center=[0,0],r.nodes=[],r.edges=[],r.combos=[],r.comboEdges=[],r.comboPadding=10,r.comboTrees=[],r.updateCfg(e),r}return o(e,t),e.prototype.getDefaultCfg=function(){return{}},e.prototype.execute=function(){var t=this.nodes,e=this.center;if(t&&0!==t.length){if(1===t.length)return t[0].x=e[0],t[0].y=e[1],void(this.onLayoutEnd&&this.onLayoutEnd());this.initVals(),this.run(),this.onLayoutEnd&&this.onLayoutEnd()}else this.onLayoutEnd&&this.onLayoutEnd()},e.prototype.run=function(){var t,e=this.nodes,r=this.edges,n=this.combos,o=this.comboEdges,s=this.center,c={};e.forEach(function(t){c[t.id]=t});var f={};n.forEach(function(t){f[t.id]=t});var h=this.getInnerGraphs(c),p=[],d=[],y={},v=!0;this.comboTrees.forEach(function(t){var e=h[t.id];if(e){var r=i(i({},t),{x:e.x||f[t.id].x,y:e.y||f[t.id].y,fx:e.fx||f[t.id].fx,fy:e.fy||f[t.id].fy,mass:e.mass||f[t.id].mass,size:e.size});d.push(r),isNaN(r.x)||0===r.x||isNaN(r.y)||0===r.y?(r.x=100*Math.random(),r.y=100*Math.random()):v=!1,p.push(t.id),(0,u.traverseTreeUp)(t,function(e){return e.id!==t.id&&(y[e.id]=t.id),!0})}}),e.forEach(function(t){if(!t.comboId||!f[t.comboId]){var e=i({},t);d.push(e),isNaN(e.x)||0===e.x||isNaN(e.y)||0===e.y?(e.x=100*Math.random(),e.y=100*Math.random()):v=!1,p.push(t.id)}});var g=[];if(r.concat(o).forEach(function(t){var e=y[t.source]||t.source,r=y[t.target]||t.target;e!==r&&p.includes(e)&&p.includes(r)&&g.push({source:e,target:r})}),null===d||void 0===d?void 0:d.length){if(1===d.length)d[0].x=s[0],d[0].y=s[1];else{var m={nodes:d,edges:g},b=this.outerLayout||new l.GForceLayout({gravity:1,factor:4,linkDistance:function(t,e,r){var n,o,i=(((null===(n=e.size)||void 0===n?void 0:n[0])||30)+((null===(o=r.size)||void 0===o?void 0:o[0])||30))/2;return Math.min(1.5*i,700)}}),w=null===(t=b.getType)||void 0===t?void 0:t.call(b);if(b.updateCfg({center:s,kg:5,preventOverlap:!0,animate:!1}),v&&a.FORCE_LAYOUT_TYPE_MAP[w])(d.length<100?new l.MDSLayout:new l.GridLayout).layout(m);b.layout(m)}d.forEach(function(t){var e=h[t.id];if(e)e.visited=!0,e.x=t.x,e.y=t.y,e.nodes.forEach(function(e){e.x+=t.x,e.y+=t.y});else{var r=c[t.id];r&&(r.x=t.x,r.y=t.y)}})}for(var S=Object.keys(h),x=function(t){var e=S[t],r=h[e];if(!r)return"continue";r.nodes.forEach(function(t){r.visited||(t.x+=r.x||0,t.y+=r.y||0),c[t.id]&&(c[t.id].x=t.x,c[t.id].y=t.y)}),f[e]&&(f[e].x=r.x,f[e].y=r.y)},_=S.length-1;_>=0;_--)x(_);return{nodes:e,edges:r,combos:n,comboEdges:o}},e.prototype.getInnerGraphs=function(t){var e=this.comboTrees,r=this.nodeSize,n=this.edges,o=this.comboPadding,a=this.spacing,s={},c=this.innerLayout||new l.ConcentricLayout({type:"concentric",sortBy:"id"});return c.center=[0,0],c.preventOverlap=!0,c.nodeSpacing=a,(e||[]).forEach(function(e){(0,u.traverseTreeUp)(e,function(e){var a,l=(null===o||void 0===o?void 0:o(e))||10;if((0,u.isArray)(l)&&(l=Math.max.apply(Math,l)),null===(a=e.children)||void 0===a?void 0:a.length){var f=e.children.map(function(e){if("combo"===e.itemType)return s[e.id];var r=t[e.id]||{};return i(i({},r),e)}),h=f.map(function(t){return t.id}),p={nodes:f,edges:n.filter(function(t){return h.includes(t.source)&&h.includes(t.target)})},d=1/0;f.forEach(function(t){var e;t.size||(t.size=(null===(e=s[t.id])||void 0===e?void 0:e.size)||(null===r||void 0===r?void 0:r(t))||[30,30]),(0,u.isNumber)(t.size)&&(t.size=[t.size,t.size]),d>t.size[0]&&(d=t.size[0]),d>t.size[1]&&(d=t.size[1])}),c.layout(p);var y=(0,u.getLayoutBBox)(f),v=y.minX,g=y.minY,m=y.maxX,b=y.maxY,w={x:(m+v)/2,y:(b+g)/2};p.nodes.forEach(function(t){t.x-=w.x,t.y-=w.y});var S=Math.max(m-v,d)+2*l,x=Math.max(b-g,d)+2*l;s[e.id]={id:e.id,nodes:f,size:[S,x]}}else if("combo"===e.itemType){var _=l?[2*l,2*l]:[30,30];s[e.id]={id:e.id,nodes:[],size:_}}return!0})}),s},e.prototype.initVals=function(){var t,e,r=this.nodeSize,n=this.spacing;if(e=(0,u.isNumber)(n)?function(){return n}:(0,u.isFunction)(n)?n:function(){return 0},this.spacing=e,r)if((0,u.isFunction)(r))t=function(t){var n=r(t),o=e(t);return(0,u.isArray)(t.size)?((t.size[0]>t.size[1]?t.size[0]:t.size[1])+o)/2:((n||10)+o)/2};else if((0,u.isArray)(r)){var o=(r[0]>r[1]?r[0]:r[1])/2;t=function(t){return o+e(t)/2}}else{var i=r/2;t=function(t){return i+e(t)/2}}else t=function(t){var r=e(t);return t.size?(0,u.isArray)(t.size)?((t.size[0]>t.size[1]?t.size[0]:t.size[1])+r)/2:(0,u.isObject)(t.size)?((t.size.width>t.size.height?t.size.width:t.size.height)+r)/2:(t.size+r)/2:10+r/2};this.nodeSize=t;var a,s=this.comboPadding;a=(0,u.isNumber)(s)?function(){return s}:(0,u.isArray)(s)?function(){return Math.max.apply(null,s)}:(0,u.isFunction)(s)?s:function(){return 0},this.comboPadding=a},e.prototype.getType=function(){return"comboCombined"},e}(s.Base);e.ComboCombinedLayout=c},5428:function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.ComboForceLayout=void 0;var i=r(9284),a=r(8652),s=function(t){function e(e){var r=t.call(this)||this;return r.center=[0,0],r.maxIteration=100,r.gravity=10,r.comboGravity=10,r.linkDistance=10,r.alpha=1,r.alphaMin=.001,r.alphaDecay=1-Math.pow(r.alphaMin,1/300),r.alphaTarget=0,r.velocityDecay=.6,r.edgeStrength=.6,r.nodeStrength=30,r.preventOverlap=!1,r.preventNodeOverlap=!1,r.preventComboOverlap=!1,r.collideStrength=void 0,r.nodeCollideStrength=.5,r.comboCollideStrength=.5,r.comboSpacing=20,r.comboPadding=10,r.optimizeRangeFactor=1,r.onTick=function(){},r.onLayoutEnd=function(){},r.depthAttractiveForceScale=1,r.depthRepulsiveForceScale=2,r.nodes=[],r.edges=[],r.combos=[],r.comboTrees=[],r.width=300,r.height=300,r.bias=[],r.nodeMap={},r.oriComboMap={},r.indexMap={},r.comboMap={},r.previousLayouted=!1,r.updateCfg(e),r}return o(e,t),e.prototype.getDefaultCfg=function(){return{maxIteration:100,center:[0,0],gravity:10,speed:1,comboGravity:30,preventOverlap:!1,preventComboOverlap:!0,preventNodeOverlap:!0,nodeSpacing:void 0,collideStrength:void 0,nodeCollideStrength:.5,comboCollideStrength:.5,comboSpacing:20,comboPadding:10,edgeStrength:.6,nodeStrength:30,linkDistance:10}},e.prototype.execute=function(){var t=this.nodes,e=this.center;if(this.comboTree={id:"comboTreeRoot",depth:-1,children:this.comboTrees},t&&0!==t.length){if(1===t.length)return t[0].x=e[0],t[0].y=e[1],void(this.onLayoutEnd&&this.onLayoutEnd());this.initVals(),this.run(),this.onLayoutEnd&&this.onLayoutEnd()}else this.onLayoutEnd&&this.onLayoutEnd()},e.prototype.run=function(){var t=this,e=t.nodes,r=t.previousLayouted?t.maxIteration/5:t.maxIteration;t.width||"undefined"==typeof window||(t.width=window.innerWidth),t.height||"undefined"==typeof window||(t.height=window.innerHeight);var n=t.center,o=t.velocityDecay,i=t.comboMap;t.previousLayouted||t.initPos(i);for(var s=function(r){var n=[];e.forEach(function(t,e){n[e]={x:0,y:0}}),t.applyCalculate(n),t.applyComboCenterForce(n),e.forEach(function(t,e){(0,a.isNumber)(t.x)&&(0,a.isNumber)(t.y)&&(t.x+=n[e].x*o,t.y+=n[e].y*o)}),t.alpha+=(t.alphaTarget-t.alpha)*t.alphaDecay,t.onTick()},u=0;u<r;u++)s();var l=[0,0];e.forEach(function(t){(0,a.isNumber)(t.x)&&(0,a.isNumber)(t.y)&&(l[0]+=t.x,l[1]+=t.y)}),l[0]/=e.length,l[1]/=e.length;var c=[n[0]-l[0],n[1]-l[1]];e.forEach(function(t,e){(0,a.isNumber)(t.x)&&(0,a.isNumber)(t.y)&&(t.x+=c[0],t.y+=c[1])}),t.combos.forEach(function(t){var e=i[t.id];e&&e.empty&&(t.x=e.cx||t.x,t.y=e.cy||t.y)}),t.previousLayouted=!0},e.prototype.initVals=function(){var t=this.edges,e=this.nodes,r=this.combos,n={},o={},i={};e.forEach(function(t,e){o[t.id]=t,i[t.id]=e}),this.nodeMap=o,this.indexMap=i;var s={};r.forEach(function(t){s[t.id]=t}),this.oriComboMap=s,this.comboMap=this.getComboMap();var u=this.preventOverlap;this.preventComboOverlap=this.preventComboOverlap||u,this.preventNodeOverlap=this.preventNodeOverlap||u;var l=this.collideStrength;l&&(this.comboCollideStrength=l,this.nodeCollideStrength=l),this.comboCollideStrength=this.comboCollideStrength?this.comboCollideStrength:0,this.nodeCollideStrength=this.nodeCollideStrength?this.nodeCollideStrength:0;for(var c=0;c<t.length;++c){var f=(0,a.getEdgeTerminal)(t[c],"source"),h=(0,a.getEdgeTerminal)(t[c],"target");n[f]?n[f]++:n[f]=1,n[h]?n[h]++:n[h]=1}var p=[];for(c=0;c<t.length;++c){f=(0,a.getEdgeTerminal)(t[c],"source"),h=(0,a.getEdgeTerminal)(t[c],"target");p[c]=n[f]/(n[f]+n[h])}this.bias=p;var d,y,v=this.nodeSize,g=this.nodeSpacing;if(y=(0,a.isNumber)(g)?function(){return g}:(0,a.isFunction)(g)?g:function(){return 0},this.nodeSpacing=y,v)if((0,a.isFunction)(v))d=function(t){return v(t)};else if((0,a.isArray)(v)){var m=(v[0]>v[1]?v[0]:v[1])/2;d=function(t){return m}}else{var b=v/2;d=function(t){return b}}else d=function(t){return t.size?(0,a.isArray)(t.size)?(t.size[0]>t.size[1]?t.size[0]:t.size[1])/2:(0,a.isObject)(t.size)?(t.size.width>t.size.height?t.size.width:t.size.height)/2:t.size/2:10};this.nodeSize=d;var w,S=this.comboSpacing;w=(0,a.isNumber)(S)?function(){return S}:(0,a.isFunction)(S)?S:function(){return 0},this.comboSpacing=w;var x,_=this.comboPadding;x=(0,a.isNumber)(_)?function(){return _}:(0,a.isArray)(_)?function(){return Math.max.apply(null,_)}:(0,a.isFunction)(_)?_:function(){return 0},this.comboPadding=x;var E,O=this.linkDistance;O||(O=10),E=(0,a.isNumber)(O)?function(t){return O}:O,this.linkDistance=E;var P,k=this.edgeStrength;k||(k=1),P=(0,a.isNumber)(k)?function(t){return k}:k,this.edgeStrength=P;var C,T=this.nodeStrength;T||(T=30),C=(0,a.isNumber)(T)?function(t){return T}:T,this.nodeStrength=C},e.prototype.initPos=function(t){this.nodes.forEach(function(e,r){var n=e.comboId,o=t[n];n&&o?(e.x=o.cx+100/(r+1),e.y=o.cy+100/(r+1)):(e.x=100/(r+1),e.y=100/(r+1))})},e.prototype.getComboMap=function(){var t=this,e=t.nodeMap,r=t.comboTrees,n=t.oriComboMap,o={};return(r||[]).forEach(function(r){var i=[];(0,a.traverseTreeUp)(r,function(r){if("node"===r.itemType)return!0;if(!n[r.id])return!0;if(void 0===o[r.id]){var s={id:r.id,name:r.id,cx:0,cy:0,count:0,depth:t.oriComboMap[r.id].depth||0,children:[]};o[r.id]=s}var u=r.children;u&&u.forEach(function(t){if(!o[t.id]&&!e[t.id])return!0;i.push(t)});var l=o[r.id];if(l.cx=0,l.cy=0,0===i.length){l.empty=!0;var c=n[r.id];l.cx=c.x,l.cy=c.y}return i.forEach(function(t){if(l.count++,"node"!==t.itemType){var r=o[t.id];return(0,a.isNumber)(r.cx)&&(l.cx+=r.cx),void((0,a.isNumber)(r.cy)&&(l.cy+=r.cy))}var n=e[t.id];n&&((0,a.isNumber)(n.x)&&(l.cx+=n.x),(0,a.isNumber)(n.y)&&(l.cy+=n.y))}),l.cx/=l.count||1,l.cy/=l.count||1,l.children=i,!0})}),o},e.prototype.applyComboCenterForce=function(t){var e=this.gravity,r=this.comboGravity||e,n=this.alpha,o=this.comboTrees,i=this.indexMap,s=this.nodeMap,u=this.comboMap;(o||[]).forEach(function(e){(0,a.traverseTreeUp)(e,function(e){if("node"===e.itemType)return!0;if(!u[e.id])return!0;var o=u[e.id],l=(o.depth+1)/10*.5,c=o.cx,f=o.cy;return o.cx=0,o.cy=0,o.children.forEach(function(e){if("node"!==e.itemType){var h=u[e.id];return h&&(0,a.isNumber)(h.cx)&&(o.cx+=h.cx),void(h&&(0,a.isNumber)(h.cy)&&(o.cy+=h.cy))}var p=s[e.id],d=p.x-c||.005,y=p.y-f||.005,v=Math.sqrt(d*d+y*y),g=i[p.id],m=r*n/v*l;t[g].x-=d*m,t[g].y-=y*m,(0,a.isNumber)(p.x)&&(o.cx+=p.x),(0,a.isNumber)(p.y)&&(o.cy+=p.y)}),o.cx/=o.count||1,o.cy/=o.count||1,!0})})},e.prototype.applyCalculate=function(t){var e=this.comboMap,r=this.nodes,n={};r.forEach(function(t,e){r.forEach(function(r,o){if(!(e<o)){var i=t.x-r.x||.005,a=t.y-r.y||.005,s=i*i+a*a,u=Math.sqrt(s);s<1&&(s=u),n["".concat(t.id,"-").concat(r.id)]={vx:i,vy:a,vl2:s,vl:u},n["".concat(r.id,"-").concat(t.id)]={vl2:s,vl:u,vx:-i,vy:-a}}})}),this.updateComboSizes(e),this.calRepulsive(t,n),this.calAttractive(t,n),this.preventComboOverlap&&this.comboNonOverlapping(t,e)},e.prototype.updateComboSizes=function(t){var e=this,r=e.comboTrees,n=e.nodeMap,o=e.nodeSize,i=e.comboSpacing,s=e.comboPadding;(r||[]).forEach(function(r){var u=[];(0,a.traverseTreeUp)(r,function(r){if("node"===r.itemType)return!0;var l=t[r.id];if(!l)return!1;var c=r.children;c&&c.forEach(function(e){(t[e.id]||n[e.id])&&u.push(e)}),l.minX=1/0,l.minY=1/0,l.maxX=-1/0,l.maxY=-1/0,u.forEach(function(t){if("node"!==t.itemType)return!0;var e=n[t.id];if(!e)return!0;var r=o(e),i=e.x-r,a=e.y-r,s=e.x+r,u=e.y+r;l.minX>i&&(l.minX=i),l.minY>a&&(l.minY=a),l.maxX<s&&(l.maxX=s),l.maxY<u&&(l.maxY=u)});var f=e.oriComboMap[r.id].size||10;(0,a.isArray)(f)&&(f=f[0]);var h=Math.max(l.maxX-l.minX,l.maxY-l.minY,f);return l.r=h/2+i(l)/2+s(l),!0})})},e.prototype.comboNonOverlapping=function(t,e){var r=this.comboTree,n=this.comboCollideStrength,o=this.indexMap,i=this.nodeMap;(0,a.traverseTreeUp)(r,function(r){if(!e[r.id]&&!i[r.id]&&"comboTreeRoot"!==r.id)return!1;var a=r.children;return a&&a.length>1&&a.forEach(function(r,s){if("node"===r.itemType)return!1;var u=e[r.id];u&&a.forEach(function(a,l){if(s<=l)return!1;if("node"===a.itemType)return!1;var c=e[a.id];if(!c)return!1;var f=u.cx-c.cx||.005,h=u.cy-c.cy||.005,p=f*f+h*h,d=u.r||1,y=c.r||1,v=d+y,g=y*y,m=d*d;if(p<v*v){var b=r.children;if(!b||0===b.length)return!1;var w=a.children;if(!w||0===w.length)return!1;var S=Math.sqrt(p),x=(v-S)/S*n,_=f*x,E=h*x,O=g/(m+g),P=1-O;b.forEach(function(e){if("node"!==e.itemType)return!1;if(i[e.id]){var r=o[e.id];w.forEach(function(e){if("node"!==e.itemType)return!1;if(!i[e.id])return!1;var n=o[e.id];t[r].x+=_*O,t[r].y+=E*O,t[n].x-=_*P,t[n].y-=E*P})}})}})}),!0})},e.prototype.calRepulsive=function(t,e){var r=this,n=r.nodes,o=r.width*r.optimizeRangeFactor,i=r.nodeStrength,a=r.alpha,s=r.nodeCollideStrength,u=r.preventNodeOverlap,l=r.nodeSize,c=r.nodeSpacing,f=r.depthRepulsiveForceScale,h=r.center;n.forEach(function(p,d){if(p.x&&p.y){if(h){var y=r.gravity,v=p.x-h[0]||.005,g=p.y-h[1]||.005,m=Math.sqrt(v*v+g*g);t[d].x-=v*y*a/m,t[d].y-=g*y*a/m}n.forEach(function(r,n){if(d!==n&&r.x&&r.y){var h=e["".concat(p.id,"-").concat(r.id)],y=h.vl2,v=h.vl;if(!(v>o)){var g=e["".concat(p.id,"-").concat(r.id)],m=g.vx,b=g.vy,w=Math.log(Math.abs(r.depth-p.depth)/10)+1||1;w=w<1?1:w,r.comboId!==p.comboId&&(w+=1);var S=w?Math.pow(f,w):1,x=i(r)*a/y*S;if(t[d].x+=m*x,t[d].y+=b*x,d<n&&u){var _=l(p)+c(p)||1,E=l(r)+c(r)||1,O=_+E;if(y<O*O){var P=(O-v)/v*s,k=E*E,C=k/(_*_+k),T=m*P,A=b*P;t[d].x+=T*C,t[d].y+=A*C,C=1-C,t[n].x-=T*C,t[n].y-=A*C}}}}})}})},e.prototype.calAttractive=function(t,e){var r=this,n=r.edges,o=r.linkDistance,i=r.alpha,s=r.edgeStrength,u=r.bias,l=r.depthAttractiveForceScale;n.forEach(function(n,c){var f=(0,a.getEdgeTerminal)(n,"source"),h=(0,a.getEdgeTerminal)(n,"target");if(f&&h&&f!==h){var p=r.indexMap[f],d=r.indexMap[h],y=r.nodeMap[f],v=r.nodeMap[h];if(y&&v){var g=y.depth===v.depth?0:Math.log(Math.abs(y.depth-v.depth)/10);y.comboId===v.comboId&&(g/=2);var m=g?Math.pow(l,g):1;if(y.comboId!==v.comboId&&1===m?m=l/2:y.comboId===v.comboId&&(m=2),(0,a.isNumber)(v.x)&&(0,a.isNumber)(y.x)&&(0,a.isNumber)(v.y)&&(0,a.isNumber)(y.y)){var b=e["".concat(h,"-").concat(f)],w=b.vl,S=b.vx,x=b.vy,_=(w-o(n))/w*i*s(n)*m,E=S*_,O=x*_,P=u[c];t[d].x-=E*P,t[d].y-=O*P,t[p].x+=E*(1-P),t[p].y+=O*(1-P)}}}})},e.prototype.getType=function(){return"comboForce"},e}(i.Base);e.ComboForceLayout=s},7940:function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.ConcentricLayout=void 0;var i=r(8652),a=function(t){function e(e){var r=t.call(this)||this;return r.nodeSize=30,r.minNodeSpacing=10,r.nodeSpacing=10,r.preventOverlap=!1,r.equidistant=!1,r.startAngle=1.5*Math.PI,r.clockwise=!0,r.sortBy="degree",r.nodes=[],r.edges=[],r.width=300,r.height=300,r.onLayoutEnd=function(){},r.updateCfg(e),r}return o(e,t),e.prototype.getDefaultCfg=function(){return{nodeSize:30,minNodeSpacing:10,nodeSpacing:10,preventOverlap:!1,sweep:void 0,equidistant:!1,startAngle:1.5*Math.PI,clockwise:!0,maxLevelDiff:void 0,sortBy:"degree"}},e.prototype.execute=function(){var t,e,r=this,n=r.nodes,o=r.edges,a=n.length;if(0!==a){r.width||"undefined"==typeof window||(r.width=window.innerWidth),r.height||"undefined"==typeof window||(r.height=window.innerHeight),r.center||(r.center=[r.width/2,r.height/2]);var s=r.center;if(1===a)return n[0].x=s[0],n[0].y=s[1],void(null===(e=r.onLayoutEnd)||void 0===e||e.call(r));var u,l=r.nodeSize,c=r.nodeSpacing,f=[],h=0;u=(0,i.isArray)(l)?Math.max(l[0],l[1]):l,(0,i.isArray)(c)?h=Math.max(c[0],c[1]):(0,i.isNumber)(c)&&(h=c),n.forEach(function(t){f.push(t);var e=u;(0,i.isArray)(t.size)?e=Math.max(t.size[0],t.size[1]):(0,i.isNumber)(t.size)?e=t.size:(0,i.isObject)(t.size)&&(e=Math.max(t.size.width,t.size.height)),u=Math.max(u,e),(0,i.isFunction)(c)&&(h=Math.max(c(t),h))}),r.clockwise=void 0!==r.counterclockwise?!r.counterclockwise:r.clockwise;var p={},d={};if(f.forEach(function(t,e){p[t.id]=t,d[t.id]=e}),!("degree"!==r.sortBy&&(0,i.isString)(r.sortBy)&&void 0!==f[0][r.sortBy]||(r.sortBy="degree",(0,i.isNumber)(n[0].degree)))){var y=(0,i.getDegree)(n.length,d,o);f.forEach(function(t,e){t.degree=y[e].all})}f.sort(function(t,e){return e[r.sortBy]-t[r.sortBy]}),r.maxValueNode=f[0],r.maxLevelDiff=r.maxLevelDiff||r.maxValueNode[r.sortBy]/4;var v=[[]],g=v[0];f.forEach(function(t){if(g.length>0){var e=Math.abs(g[0][r.sortBy]-t[r.sortBy]);r.maxLevelDiff&&e>=r.maxLevelDiff&&(g=[],v.push(g))}g.push(t)});var m=u+(h||r.minNodeSpacing);if(!r.preventOverlap){var b=v.length>0&&v[0].length>1,w=(Math.min(r.width,r.height)/2-m)/(v.length+(b?1:0));m=Math.min(m,w)}var S=0;if(v.forEach(function(t){var e=r.sweep;void 0===e&&(e=2*Math.PI-2*Math.PI/t.length);var n=t.dTheta=e/Math.max(1,t.length-1);if(t.length>1&&r.preventOverlap){var o=Math.cos(n)-Math.cos(0),i=Math.sin(n)-Math.sin(0),a=Math.sqrt(m*m/(o*o+i*i));S=Math.max(a,S)}t.r=S,S+=m}),r.equidistant){for(var x=0,_=0,E=0;E<v.length;E++){var O=v[E].r-_;x=Math.max(x,O)}_=0,v.forEach(function(t,e){0===e&&(_=t.r),t.r=_,_+=x})}return v.forEach(function(t){var e=t.dTheta,n=t.r;t.forEach(function(t,o){var i=r.startAngle+(r.clockwise?1:-1)*e*o;t.x=s[0]+n*Math.cos(i),t.y=s[1]+n*Math.sin(i)})}),r.onLayoutEnd&&r.onLayoutEnd(),{nodes:n,edges:o}}null===(t=r.onLayoutEnd)||void 0===t||t.call(r)},e.prototype.getType=function(){return"concentric"},e}(r(9284).Base);e.ConcentricLayout=a},4587:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FORCE_LAYOUT_TYPE_MAP=e.LAYOUT_MESSAGE=void 0,e.LAYOUT_MESSAGE={RUN:"LAYOUT_RUN",END:"LAYOUT_END",ERROR:"LAYOUT_ERROR",TICK:"LAYOUT_TICK",GPURUN:"GPU_LAYOUT_RUN",GPUEND:"GPU_LAYOUT_END"},e.FORCE_LAYOUT_TYPE_MAP={gForce:!0,force2:!0,fruchterman:!0,forceAtlas2:!0,force:!0,"graphin-force":!0}},813:function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.DagreLayout=void 0;var a=i(r(6269)),s=r(8652),u=r(9284),l=r(5317),c=function(t){function e(e){var r=t.call(this)||this;return r.rankdir="TB",r.nodesep=50,r.ranksep=50,r.controlPoints=!1,r.sortByCombo=!1,r.edgeLabelSpace=!0,r.radial=!1,r.nodes=[],r.edges=[],r.onLayoutEnd=function(){},r.layoutNode=function(t){var e=r.nodes.find(function(e){return e.id===t});return!e||!1!==e.layout},r.updateCfg(e),r}return o(e,t),e.prototype.getDefaultCfg=function(){return{rankdir:"TB",align:void 0,nodeSize:void 0,nodesepFunc:void 0,ranksepFunc:void 0,nodesep:50,ranksep:50,controlPoints:!1,radial:!1,focusNode:null}},e.prototype.execute=function(){var t,e,r,n,o=this,i=this,u=i.nodes,c=i.nodeSize,h=i.rankdir,p=i.combos,d=i.begin,y=i.radial,v=i.comboEdges,g=void 0===v?[]:v,m=i.vedges,b=void 0===m?[]:m;if(u){var w=i.edges||[],S=new l.Graph({multigraph:!0,compound:!0});i.nodeMap={};var x={};u.forEach(function(t){i.nodeMap[t.id]=t,t.comboId&&(x[t.comboId]=x[t.comboId]||[],x[t.comboId].push(t.id))});var _,E=[],O={};(null===(t=i.nodeOrder)||void 0===t?void 0:t.length)?(i.nodeOrder.forEach(function(t){O[t]=!0,E.push(i.nodeMap[t])}),u.forEach(function(t){O[t.id]||E.push(t)})):E=u,_=c?(0,s.isArray)(c)?function(){return c}:function(){return[c,c]}:function(t){return t.size?(0,s.isArray)(t.size)?t.size:(0,s.isObject)(t.size)?[t.size.width||40,t.size.height||40]:[t.size,t.size]:[40,40]};var P=(0,s.getFunc)(i.ranksep,50,i.ranksepFunc),k=(0,s.getFunc)(i.nodesep,50,i.nodesepFunc),C=k,T=P;"LR"!==h&&"RL"!==h||(C=P,T=k),S.setDefaultEdgeLabel(function(){return{}}),S.setGraph(i);var A={};this.sortByCombo&&p&&p.forEach(function(t){if(A[t.id]=t,t.collapsed){var e=_(t),r=T(t),n=C(t),o=e[0]+2*n,i=e[1]+2*r;S.setNode(t.id,{width:o,height:i})}t.parentId&&(A[t.parentId]||S.setNode(t.parentId,{}),S.setParent(t.id,t.parentId))}),E.filter(function(t){return!1!==t.layout}).forEach(function(t){var e=_(t),r=T(t),n=C(t),i=e[0]+2*n,a=e[1]+2*r,u=t.layer;(0,s.isNumber)(u)?S.setNode(t.id,{width:i,height:a,layer:u}):S.setNode(t.id,{width:i,height:a}),o.sortByCombo&&t.comboId&&(A[t.comboId]||(A[t.comboId]={id:t.comboId},S.setNode(t.comboId,{})),S.setParent(t.id,t.comboId))}),w.forEach(function(t){var e=(0,s.getEdgeTerminal)(t,"source"),r=(0,s.getEdgeTerminal)(t,"target");o.layoutNode(e)&&o.layoutNode(r)&&S.setEdge(e,r,{weight:t.weight||1})}),null===(e=null===g||void 0===g?void 0:g.concat(b||[]))||void 0===e||e.forEach(function(t){var e,r,n=t.source,o=t.target,i=(null===(e=A[n])||void 0===e?void 0:e.collapsed)?[n]:x[n]||[n],a=(null===(r=A[o])||void 0===r?void 0:r.collapsed)?[o]:x[o]||[o];i.forEach(function(e){a.forEach(function(r){S.setEdge(e,r,{weight:t.weight||1})})})});var M=void 0;(null===(r=i.preset)||void 0===r?void 0:r.nodes)&&(M=new l.Graph({multigraph:!0,compound:!0}),i.preset.nodes.forEach(function(t){null===M||void 0===M||M.setNode(t.id,t)})),a.default.layout(S,{prevGraph:M,edgeLabelSpace:i.edgeLabelSpace,keepNodeOrder:Boolean(!!i.nodeOrder),nodeOrder:i.nodeOrder});var j=[0,0];if(d){var I=1/0,N=1/0;S.nodes().forEach(function(t){var e=S.node(t);I>e.x&&(I=e.x),N>e.y&&(N=e.y)}),S.edges().forEach(function(t){var e;null===(e=S.edge(t).points)||void 0===e||e.forEach(function(t){I>t.x&&(I=t.x),N>t.y&&(N=t.y)})}),j[0]=d[0]-I,j[1]=d[1]-N}var L="LR"===h||"RL"===h;if(y){var R=this.focusNode,D=this.ranksep,B=this.getRadialPos,F=(0,s.isString)(R)?R:null===R||void 0===R?void 0:R.id,G=F?null===(n=S.node(F))||void 0===n?void 0:n._rank:0,U=[],z=L?"y":"x",V=L?"height":"width",H=1/0,W=-1/0;S.nodes().forEach(function(t){var e=S.node(t);if(i.nodeMap[t]){var r=k(i.nodeMap[t]);if(0===G)U[e._rank]||(U[e._rank]={nodes:[],totalWidth:0,maxSize:-1/0}),U[e._rank].nodes.push(t),U[e._rank].totalWidth+=2*r+e[V],U[e._rank].maxSize<Math.max(e.width,e.height)&&(U[e._rank].maxSize=Math.max(e.width,e.height));else{var n=e._rank-G;if(0===n)U[n]||(U[n]={nodes:[],totalWidth:0,maxSize:-1/0}),U[n].nodes.push(t),U[n].totalWidth+=2*r+e[V],U[n].maxSize<Math.max(e.width,e.height)&&(U[n].maxSize=Math.max(e.width,e.height));else{var o=Math.abs(n);U[o]||(U[o]={left:[],right:[],totalWidth:0,maxSize:-1/0}),U[o].totalWidth+=2*r+e[V],U[o].maxSize<Math.max(e.width,e.height)&&(U[o].maxSize=Math.max(e.width,e.height)),n<0?U[o].left.push(t):U[o].right.push(t)}}var a=e[z]-e[V]/2-r,s=e[z]+e[V]/2+r;a<H&&(H=a),s>W&&(W=s)}});var q=D||50,Y={},X=(W-H)/.9,J=[.5*(H+W-X),.5*(H+W+X)],K=function(t,e,r,n){void 0===r&&(r=-1/0),void 0===n&&(n=[0,1]);var o=r;return t.forEach(function(t){var r=S.node(t);Y[t]=e;var a=B(r[z],J,X,e,n),s=a.x,u=a.y;if(i.nodeMap[t]){i.nodeMap[t].x=s+j[0],i.nodeMap[t].y=u+j[1],i.nodeMap[t]._order=r._order;var l=P(i.nodeMap[t]);o<l&&(o=l)}}),o},Q=!0;U.forEach(function(t){var e,r,n,o,a,s,u;if((null===(e=null===t||void 0===t?void 0:t.nodes)||void 0===e?void 0:e.length)||(null===(r=null===t||void 0===t?void 0:t.left)||void 0===r?void 0:r.length)||(null===(n=null===t||void 0===t?void 0:t.right)||void 0===n?void 0:n.length)){if(Q&&1===t.nodes.length){var l=t.nodes[0];if(!i.nodeMap[l])return;return i.nodeMap[l].x=j[0],i.nodeMap[l].y=j[1],Y[t.nodes[0]]=0,q=P(i.nodeMap[l]),void(Q=!1)}q=Math.max(q,t.totalWidth/(2*Math.PI));var c=-1/0;if(0===G||(null===(o=t.nodes)||void 0===o?void 0:o.length))c=K(t.nodes,q,c,[0,1]);else{var f=(null===(a=t.left)||void 0===a?void 0:a.length)/((null===(s=t.left)||void 0===s?void 0:s.length)+(null===(u=t.right)||void 0===u?void 0:u.length));c=K(t.left,q,c,[0,f]),c=K(t.right,q,c,[f+.05,1])}q+=c,Q=!1,t.maxSize}}),S.edges().forEach(function(t){var e,r,n,o=S.edge(t),a=w.findIndex(function(e){var r=(0,s.getEdgeTerminal)(e,"source"),n=(0,s.getEdgeTerminal)(e,"target");return r===t.v&&n===t.w});if(!(a<=-1)&&i.edgeLabelSpace&&i.controlPoints&&"loop"!==w[a].type){var u="x"===z?"y":"x",l=null===(e=null===o||void 0===o?void 0:o.points)||void 0===e?void 0:e.slice(1,o.points.length-1),c=[],f=null===(r=S.node(t.v))||void 0===r?void 0:r[u],h=f-(null===(n=S.node(t.w))||void 0===n?void 0:n[u]),p=Y[t.v],d=p-Y[t.w];null===l||void 0===l||l.forEach(function(t){var e=(t[u]-f)/h*d+p,r=B(t[z],J,X,e);c.push({x:r.x+j[0],y:r.y+j[1]})}),w[a].controlPoints=c}})}else{var Z=new Set,$="BT"===h||"RL"===h?function(t,e){return e-t}:function(t,e){return t-e};S.nodes().forEach(function(t){var e=S.node(t);if(e){var r=o.nodeMap[t];r||(r=null===p||void 0===p?void 0:p.find(function(e){return e.id===t})),r&&(r.x=e.x+j[0],r.y=e.y+j[1],r._order=e._order,Z.add(L?r.x:r.y))}});var tt=Array.from(Z).sort($),et=L?function(t,e){return t.x!==e.x}:function(t,e){return t.y!==e.y},rt=L?function(t,e,r){var n=Math.max(e.y,r.y),o=Math.min(e.y,r.y);return t.filter(function(t){return t.y<=n&&t.y>=o})}:function(t,e,r){var n=Math.max(e.x,r.x),o=Math.min(e.x,r.x);return t.filter(function(t){return t.x<=n&&t.x>=o})};S.edges().forEach(function(t){var e,r=S.edge(t),n=w.findIndex(function(e){var r=(0,s.getEdgeTerminal)(e,"source"),n=(0,s.getEdgeTerminal)(e,"target");return r===t.v&&n===t.w});if(!(n<=-1)&&i.edgeLabelSpace&&i.controlPoints&&"loop"!==w[n].type){null===(e=null===r||void 0===r?void 0:r.points)||void 0===e||e.forEach(function(t){t.x+=j[0],t.y+=j[1]});var o=i.nodeMap[t.v],a=i.nodeMap[t.w];w[n].controlPoints=f(null===r||void 0===r?void 0:r.points,o,a,tt,L,et,rt)}})}return i.onLayoutEnd&&i.onLayoutEnd(),{nodes:u,edges:w}}},e.prototype.getRadialPos=function(t,e,r,n,o){void 0===o&&(o=[0,1]);var i=(t-e[0])/r,a=2*(i=i*(o[1]-o[0])+o[0])*Math.PI;return{x:Math.cos(a)*n,y:Math.sin(a)*n}},e.prototype.getType=function(){return"dagre"},e}(u.Base);e.DagreLayout=c;var f=function(t,e,r,n,o,i,a){var s=(null===t||void 0===t?void 0:t.slice(1,t.length-1))||[];if(e&&r){var u=e.x,l=e.y,c=r.x,f=r.y;if(o&&(u=e.y,l=e.x,c=r.y,f=r.x),f!==l&&u!==c){var h=n.indexOf(l),p=n[h+1];if(p){var d=s[0],y=o?{x:(l+p)/2,y:(null===d||void 0===d?void 0:d.y)||c}:{x:(null===d||void 0===d?void 0:d.x)||c,y:(l+p)/2};d&&!i(d,y)||s.unshift(y)}var v=n.indexOf(f),g=Math.abs(v-h);if(1===g)(s=a(s,e,r)).length||s.push(o?{x:(l+f)/2,y:u}:{x:u,y:(l+f)/2});else if(g>1){var m=n[v-1];if(m){var b=s[s.length-1],w=o?{x:(f+m)/2,y:(null===b||void 0===b?void 0:b.y)||c}:{x:(null===b||void 0===b?void 0:b.x)||u,y:(f+m)/2};b&&!i(b,w)||s.push(w)}}}}return s}},1083:function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__assign||function(){return(i=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},a=this&&this.__spreadArray||function(t,e,r){if(r||2===arguments.length)for(var n,o=0,i=e.length;o<i;o++)!n&&o in e||(n||(n=Array.prototype.slice.call(e,0,o)),n[o]=e[o]);return t.concat(n||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0}),e.DagreCompoundLayout=void 0;var s=r(9284),u=r(7628),l=r(8652),c=function(t){function e(e){var r=t.call(this)||this;return r.rankdir="TB",r.nodesep=50,r.edgesep=5,r.ranksep=50,r.controlPoints=!0,r.anchorPoint=!0,r.nodes=[],r.edges=[],r.combos=[],r.onLayoutEnd=function(){},r.updateCfg(e),r}return o(e,t),e.prototype.getDefaultCfg=function(){return{rankdir:"TB",align:void 0,begin:void 0,nodeSize:void 0,nodesep:50,ranksep:50,controlPoints:!0,anchorPoint:!0}},e.prototype.init=function(t){var e=t.hiddenNodes||[],r=t.hiddenEdges||[],n=t.hiddenCombos||[];this.nodes=this.getDataByOrder((t.nodes||[]).concat(e)),this.edges=this.getDataByOrder((t.edges||[]).concat(r)),this.combos=(t.combos||[]).concat(n.map(function(t){return i(i({},t),{collapsed:!0})}))},e.prototype.execute=function(){var t=this.nodes,e=this.edges;if(t){var r=this.getLayoutConfig(),n=r.graphDef,o=r.graphOption,i=r.graphSettings,a=(0,u.buildGraph)(n,o,i),s=(0,u.flatGraph)(a,!0);return this.updatePosition(s),this.onLayoutEnd&&this.onLayoutEnd(),{nodes:t,edges:e}}},e.prototype.getNodePath=function(t){var e=this.nodes,r=this.combos,n=e.find(function(e){return e.id===t});return n&&n.comboId?function t(e,n){void 0===n&&(n=[]);var o=r.find(function(t){return t.id===e});return o?(n.unshift(e),o.parentId?t(o.parentId,n):n):n}(n.comboId,[t]):[t]},e.prototype.getLayoutConfig=function(){var t,e,r,n,o=this.nodes,s=this.edges,c=this.combos,f=this.nodeSize,h=this.rankdir,p=this.align,d=this.edgesep,y=this.nodesep,v=this.ranksep,g=this.settings,m=(c||[]).reduce(function(t,e){var r=o.filter(function(t){return t.comboId===e.id}).map(function(t){return t.id}),n=(c||[]).filter(function(t){return t.parentId===e.id}).map(function(t){return t.id});return(r.length||n.length)&&(t[e.id]=a(a([],r,!0),n,!0)),t},{});n=f?(0,l.isArray)(f)?function(){return f}:function(){return[f,f]}:function(t){return t&&t.size?(0,l.isArray)(t.size)?t.size:(0,l.isObject)(t.size)?[t.size.width||40,t.size.height||40]:[t.size,t.size]:[40,40]};var b,w=(b=null===c||void 0===c?void 0:c[0])&&b.size?(0,l.isArray)(b.size)?b.size:[b.size,b.size]:[80,40],S=w[0],x=w[1],_=null===(e=null===(t=this.graphSettings)||void 0===t?void 0:t.subScene)||void 0===e?void 0:e.meta,E=(null===(r=c.find(function(t){return!t.collapsed}))||void 0===r?void 0:r.padding)||[20,20,20,20],O=E[0],P=E[1],k=E[2],C=E[3],T={compound:m,nodes:a([],(o||[]).map(function(t){var e=n(t),r=e[0],o=e[1];return i(i({},t),{width:r,height:o})}),!0),edges:a([],(s||[]).map(function(t){return i(i({},t),{v:t.source,w:t.target})}),!0)},A={expanded:(c||[]).filter(function(t){return!t.collapsed}).map(function(t){return t.id})},M={graph:{meta:{align:p,rankDir:h,nodeSep:y,edgeSep:d,rankSep:v}},subScene:{meta:{paddingTop:O||(null===_||void 0===_?void 0:_.paddingTop)||20,paddingRight:P||(null===_||void 0===_?void 0:_.paddingRight)||20,paddingBottom:k||(null===_||void 0===_?void 0:_.paddingBottom)||20,paddingLeft:C||(null===_||void 0===_?void 0:_.paddingLeft)||20,labelHeight:0}},nodeSize:{meta:{width:S,height:x}}},j=(0,u.mergeConfig)(g,i({},(0,u.mergeConfig)(M,u.LAYOUT_CONFIG)));return this.graphSettings=j,{graphDef:T,graphOption:A,graphSettings:j}},e.prototype.updatePosition=function(t){var e=t.nodes,r=t.edges;this.updateNodePosition(e,r),this.updateEdgePosition(e,r)},e.prototype.getBegin=function(t,e){var r=this.begin,n=[0,0];if(r){var o=1/0,i=1/0;t.forEach(function(t){o>t.x&&(o=t.x),i>t.y&&(i=t.y)}),e.forEach(function(t){t.points.forEach(function(t){o>t.x&&(o=t.x),i>t.y&&(i=t.y)})}),n[0]=r[0]-o,n[1]=r[1]-i}return n},e.prototype.updateNodePosition=function(t,e){var r=this.combos,n=this.nodes,o=this.edges,i=this.anchorPoint,a=this.graphSettings,s=this.getBegin(t,e);t.forEach(function(t){var l,c=t.x,f=t.y,h=t.id,p=t.type,d=t.coreBox;if(p===u.HierarchyNodeType.META&&h!==u.ROOT_NAME){var y=r.findIndex(function(t){return t.id===h}),v=null===(l=null===a||void 0===a?void 0:a.subScene)||void 0===l?void 0:l.meta;r[y].offsetX=c+s[0],r[y].offsetY=f+s[1],r[y].fixSize=[d.width,d.height],r[y].fixCollapseSize=[d.width,d.height],t.expanded?r[y].padding=[null===v||void 0===v?void 0:v.paddingTop,null===v||void 0===v?void 0:v.paddingRight,null===v||void 0===v?void 0:v.paddingBottom,null===v||void 0===v?void 0:v.paddingLeft]:r[y].padding=[0,0,0,0]}else if(p===u.HierarchyNodeType.OP){y=n.findIndex(function(t){return t.id===h});if(n[y].x=c+s[0],n[y].y=f+s[1],i){var g=[],m=e.filter(function(t){return t.v===h}),b=e.filter(function(t){return t.w===h});m.length>0&&m.forEach(function(e){var r=e.points[0],n=(r.x-c)/t.width+.5,i=(r.y-f)/t.height+.5;g.push([n,i]),e.baseEdgeList.forEach(function(t){var e=o.find(function(e){return e.source===t.v&&e.target===t.w});e&&(e.sourceAnchor=g.length-1)})}),b.length>0&&b.forEach(function(e){var r=e.points[e.points.length-1],n=(r.x-c)/t.width+.5,i=(r.y-f)/t.height+.5;g.push([n,i]),e.baseEdgeList.forEach(function(t){var e=o.find(function(e){return e.source===t.v&&e.target===t.w});e&&(e.targetAnchor=g.length-1)})}),n[y].anchorPoints=g.length>0?g:n[y].anchorPoints||[]}}})},e.prototype.updateEdgePosition=function(t,e){var r=this,n=r.combos,o=r.edges,s=r.controlPoints,l=this.getBegin(t,e);s&&(n.forEach(function(t){t.inEdges=[],t.outEdges=[]}),o.forEach(function(e){var o,s,c,f,h=t.find(function(t){return t.id===e.source}),p=t.find(function(t){return t.id===e.target}),d=[],y=[];if(h&&p)y=(0,u.getEdges)(null===h||void 0===h?void 0:h.id,null===p||void 0===p?void 0:p.id,t);else if(!h||!p){var v=r.getNodePath(e.source),g=r.getNodePath(e.target),m=v.reverse().slice(h?0:1).find(function(e){return t.find(function(t){return t.id===e})}),b=g.reverse().slice(p?0:1).find(function(e){return t.find(function(t){return t.id===e})});h=t.find(function(t){return t.id===m}),p=t.find(function(t){return t.id===b}),y=(0,u.getEdges)(null===h||void 0===h?void 0:h.id,null===p||void 0===p?void 0:p.id,t,{v:e.source,w:e.target})}if(d=(d=y.reduce(function(t,e){return a(a([],t,!0),e.points.map(function(t){return i(i({},t),{x:t.x+l[0],y:t.y+l[1]})}),!0)},[])).slice(1,-1),e.controlPoints=d,(null===p||void 0===p?void 0:p.type)===u.NodeType.META){var w=n.findIndex(function(t){return t.id===(null===p||void 0===p?void 0:p.id)});if(!n[w]||(null===(o=n[w].inEdges)||void 0===o?void 0:o.some(function(t){return t.source===h.id&&t.target===p.id})))return;null===(s=n[w].inEdges)||void 0===s||s.push({source:h.id,target:p.id,controlPoints:d})}if((null===h||void 0===h?void 0:h.type)===u.NodeType.META){w=n.findIndex(function(t){return t.id===(null===h||void 0===h?void 0:h.id)});if(!n[w]||(null===(c=n[w].outEdges)||void 0===c?void 0:c.some(function(t){return t.source===h.id&&t.target===p.id})))return;null===(f=n[w].outEdges)||void 0===f||f.push({source:h.id,target:p.id,controlPoints:d})}}))},e.prototype.getType=function(){return"dagreCompound"},e.prototype.getDataByOrder=function(t){return t.every(function(t){return void 0!==t.layoutOrder})||t.forEach(function(t,e){t.layoutOrder=e}),t.sort(function(t,e){return t.layoutOrder-e.layoutOrder})},e}(s.Base);e.DagreCompoundLayout=c},5317:function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.Graph=void 0;var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e}(r(2314).Graph);e.Graph=i},6269:function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=n(r(1449)),i=r(656);e.default={layout:o.default,util:{time:i.time,notime:i.notime}}},2051:function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=n(r(6791)),i=function(t){var e=[],r={},n={};return t.nodes().forEach(function o(i){var a;n[i]||(n[i]=!0,r[i]=!0,null===(a=t.outEdges(i))||void 0===a||a.forEach(function(t){r[t.w]?e.push(t):o(t.w)}),delete r[i])}),e};e.default={run:function(t){var e="greedy"===t.graph().acyclicer?(0,o.default)(t,function(t){return function(e){var r;return(null===(r=t.edge(e))||void 0===r?void 0:r.weight)||1}}(t)):i(t);null===e||void 0===e||e.forEach(function(e){var r=t.edge(e);t.removeEdgeObj(e),r.forwardName=e.name,r.reversed=!0,t.setEdge(e.w,e.v,r,"rev-".concat(Math.random()))})},undo:function(t){t.edges().forEach(function(e){var r=t.edge(e);if(r.reversed){t.removeEdgeObj(e);var n=r.forwardName;delete r.reversed,delete r.forwardName,t.setEdge(e.w,e.v,r,n)}})}}},1850:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(656),o=function(t,e,r,o,i,a){var s={rank:a,borderType:e,width:0,height:0},u=i[e][a-1],l=(0,n.addDummyNode)(t,"border",s,r);i[e][a]=l,t.setParent(l,o),u&&t.setEdge(u,l,{weight:1})};e.default=function(t){var e;null===(e=t.children())||void 0===e||e.forEach(function(e){return function e(r){var n=t.children(r),i=t.node(r);if((null===n||void 0===n?void 0:n.length)&&n.forEach(function(t){return e(t)}),i.hasOwnProperty("minRank")){i.borderLeft=[],i.borderRight=[];for(var a=i.minRank,s=i.maxRank+1;a<s;a+=1)o(t,"borderLeft","_bl",r,i,a),o(t,"borderRight","_br",r,i,a)}}(e)})}},7359:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){t.nodes().forEach(function(e){n(t.node(e))}),t.edges().forEach(function(e){n(t.edge(e))})},n=function(t){var e=t.width;t.width=t.height,t.height=e},o=function(t){t.nodes().forEach(function(e){i(t.node(e))}),t.edges().forEach(function(e){var r,n=t.edge(e);null===(r=n.points)||void 0===r||r.forEach(function(t){return i(t)}),n.hasOwnProperty("y")&&i(n)})},i=function(t){(null===t||void 0===t?void 0:t.y)&&(t.y=-t.y)},a=function(t){t.nodes().forEach(function(e){s(t.node(e))}),t.edges().forEach(function(e){var r,n=t.edge(e);null===(r=n.points)||void 0===r||r.forEach(function(t){return s(t)}),n.hasOwnProperty("x")&&s(n)})},s=function(t){var e=t.x;t.x=t.y,t.y=e};e.default={adjust:function(t){var e,n=null===(e=t.graph().rankdir)||void 0===e?void 0:e.toLowerCase();"lr"!==n&&"rl"!==n||r(t)},undo:function(t){var e,n=null===(e=t.graph().rankdir)||void 0===e?void 0:e.toLowerCase();"bt"!==n&&"rl"!==n||o(t),"lr"!==n&&"rl"!==n||(a(t),r(t))}}},5272:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t,e){if("next"!==t&&"prev"!==t)return e},n=function(t){t.prev.next=t.next,t.next.prev=t.prev,delete t.next,delete t.prev},o=function(){function t(){var t={};t.prev=t,t.next=t.prev,this.shortcut=t}return t.prototype.dequeue=function(){var t=this.shortcut,e=t.prev;if(e&&e!==t)return n(e),e},t.prototype.enqueue=function(t){var e=this.shortcut;t.prev&&t.next&&n(t),t.next=e.next,e.next.prev=t,e.next=t,t.prev=e},t.prototype.toString=function(){for(var t=[],e=this.shortcut,n=e.prev;n!==e;)t.push(JSON.stringify(n,r)),n=null===n||void 0===n?void 0:n.prev;return"[".concat(t.join(", "),"]")},t}();e.default=o},6791:function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var a=i(r(5272)),s=r(2314),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e}(a.default),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e}(s.Graph),c=function(){return 1},f=function(t,e,r){for(var n,o=[],i=e[e.length-1],a=e[0];t.nodeCount();){for(;n=a.dequeue();)h(t,e,r,n);for(;n=i.dequeue();)h(t,e,r,n);if(t.nodeCount())for(var s=e.length-2;s>0;--s)if(n=e[s].dequeue()){o=o.concat(h(t,e,r,n,!0));break}}return o},h=function(t,e,r,n,o){var i,a,s=[];return null===(i=t.inEdges(n.v))||void 0===i||i.forEach(function(n){var i=t.edge(n),a=t.node(n.v);o&&s.push({v:n.v,w:n.w,in:0,out:0}),void 0===a.out&&(a.out=0),a.out-=i,d(e,r,a)}),null===(a=t.outEdges(n.v))||void 0===a||a.forEach(function(n){var o=t.edge(n),i=n.w,a=t.node(i);void 0===a.in&&(a.in=0),a.in-=o,d(e,r,a)}),t.removeNode(n.v),o?s:void 0},p=function(t,e){var r=new l,n=0,o=0;t.nodes().forEach(function(t){r.setNode(t,{v:t,in:0,out:0})}),t.edges().forEach(function(t){var i=r.edge(t)||0,a=(null===e||void 0===e?void 0:e(t))||1,s=i+a;r.setEdge(t.v,t.w,s),o=Math.max(o,r.node(t.v).out+=a),n=Math.max(n,r.node(t.w).in+=a)});for(var i=[],a=o+n+3,s=0;s<a;s++)i.push(new u);var c=n+1;return r.nodes().forEach(function(t){d(i,c,r.node(t))}),{buckets:i,zeroIdx:c,graph:r}},d=function(t,e,r){r.out?r.in?t[r.out-r.in+e].enqueue(r):t[t.length-1].enqueue(r):t[0].enqueue(r)};e.default=function(t,e){var r;if(t.nodeCount()<=1)return[];var n=p(t,e||c);return null===(r=f(n.graph,n.buckets,n.zeroIdx).map(function(e){return t.outEdges(e.v,e.w)}))||void 0===r?void 0:r.flat()}},1449:function(t,e,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=o(r(2051)),a=o(r(2749)),s=o(r(5378)),u=r(656),l=o(r(1745)),c=o(r(3077)),f=o(r(1850)),h=o(r(7359)),p=o(r(4962)),d=o(r(4831)),y=o(r(6590)),v=r(5317),g=function(t,e,r){e("    removeSelfEdges",function(){B(t)}),e("    acyclic",function(){i.default.run(t)}),e("    nestingGraph.run",function(){c.default.run(t)}),e("    rank",function(){(0,s.default)((0,u.asNonCompoundGraph)(t))}),e("    injectEdgeLabelProxies",function(){A(t)}),e("    removeEmptyRanks",function(){(0,u.removeEmptyRanks)(t)}),e("    nestingGraph.cleanup",function(){c.default.cleanup(t)}),e("    normalizeRanks",function(){(0,u.normalizeRanks)(t)}),e("    assignRankMinMax",function(){M(t)}),e("    removeEdgeLabelProxies",function(){j(t)}),e("    normalize.run",function(){a.default.run(t)}),e("    parentDummyChains",function(){(0,l.default)(t)}),e("    addBorderSegments",function(){(0,f.default)(t)}),r&&r.keepNodeOrder&&e("    initDataOrder",function(){(0,y.default)(t,r.nodeOrder)}),e("    order",function(){(0,p.default)(t,null===r||void 0===r?void 0:r.keepNodeOrder)}),e("    insertSelfEdges",function(){F(t)}),e("    adjustCoordinateSystem",function(){h.default.adjust(t)}),e("    position",function(){(0,d.default)(t)}),e("    positionSelfEdges",function(){G(t)}),e("    removeBorderNodes",function(){D(t)}),e("    normalize.undo",function(){a.default.undo(t)}),e("    fixupEdgeLabelCoords",function(){L(t)}),e("    undoCoordinateSystem",function(){h.default.undo(t)}),e("    translateGraph",function(){I(t)}),e("    assignNodeIntersects",function(){N(t)}),e("    reversePoints",function(){R(t)}),e("    acyclic.undo",function(){i.default.undo(t)})},m=function(t,e){t.nodes().forEach(function(r){var n=t.node(r),o=e.node(r);void 0!==o?(n.fixorder=o._order,delete o._order):delete n.fixorder})},b=function(t,e){t.nodes().forEach(function(r){var n,o=t.node(r);if(o){var i=e.node(r);o.x=i.x,o.y=i.y,o._order=i.order,o._rank=i.rank,(null===(n=e.children(r))||void 0===n?void 0:n.length)&&(o.width=i.width,o.height=i.height)}}),t.edges().forEach(function(r){var n=t.edge(r),o=e.edge(r);n.points=o?o.points:[],o&&o.hasOwnProperty("x")&&(n.x=o.x,n.y=o.y)}),t.graph().width=e.graph().width,t.graph().height=e.graph().height},w=["nodesep","edgesep","ranksep","marginx","marginy"],S={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},x=["acyclicer","ranker","rankdir","align"],_=["width","height","layer","fixorder"],E={width:0,height:0},O=["minlen","weight","width","height","labeloffset"],P={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},k=["labelpos"],C=function(t){var e=new v.Graph({multigraph:!0,compound:!0}),r=z(t.graph()),o={};return null===x||void 0===x||x.forEach(function(t){void 0!==r[t]&&(o[t]=r[t])}),e.setGraph(Object.assign({},S,U(r,w),o)),t.nodes().forEach(function(r){var o=z(t.node(r)),i=n(n({},E),o),a=U(i,_);e.setNode(r,a),e.setParent(r,t.parent(r))}),t.edges().forEach(function(r){var n=z(t.edge(r)),o={};null===k||void 0===k||k.forEach(function(t){void 0!==n[t]&&(o[t]=n[t])}),e.setEdgeObj(r,Object.assign({},P,U(n,O),o))}),e},T=function(t){var e=t.graph();e.ranksep||(e.ranksep=0),e.ranksep/=2,t.nodes().forEach(function(e){var r=t.node(e);isNaN(r.layer)||r.layer||(r.layer=0)}),t.edges().forEach(function(r){var n,o=t.edge(r);o.minlen*=2,"c"!==(null===(n=o.labelpos)||void 0===n?void 0:n.toLowerCase())&&("TB"===e.rankdir||"BT"===e.rankdir?o.width+=o.labeloffset:o.height+=o.labeloffset)})},A=function(t){t.edges().forEach(function(e){var r=t.edge(e);if(r.width&&r.height){var n=t.node(e.v),o={e:e,rank:(t.node(e.w).rank-n.rank)/2+n.rank};(0,u.addDummyNode)(t,"edge-proxy",o,"_ep")}})},M=function(t){var e=0;t.nodes().forEach(function(r){var n,o,i=t.node(r);i.borderTop&&(i.minRank=null===(n=t.node(i.borderTop))||void 0===n?void 0:n.rank,i.maxRank=null===(o=t.node(i.borderBottom))||void 0===o?void 0:o.rank,e=Math.max(e,i.maxRank||-1/0))}),t.graph().maxRank=e},j=function(t){t.nodes().forEach(function(e){var r=t.node(e);"edge-proxy"===r.dummy&&(t.edge(r.e).labelRank=r.rank,t.removeNode(e))})},I=function(t){var e,r,n=0,o=0,i=t.graph(),a=i.marginx||0,s=i.marginy||0,u=function(t){if(t){var i=t.x,a=t.y,s=t.width,u=t.height;isNaN(i)||isNaN(s)||(void 0===e&&(e=i-s/2),e=Math.min(e,i-s/2),n=Math.max(n,i+s/2)),isNaN(a)||isNaN(u)||(void 0===r&&(r=a-u/2),r=Math.min(r,a-u/2),o=Math.max(o,a+u/2))}};t.nodes().forEach(function(e){u(t.node(e))}),t.edges().forEach(function(e){var r=t.edge(e);(null===r||void 0===r?void 0:r.hasOwnProperty("x"))&&u(r)}),e-=a,r-=s,t.nodes().forEach(function(n){var o=t.node(n);o&&(o.x-=e,o.y-=r)}),t.edges().forEach(function(n){var o,i=t.edge(n);null===(o=i.points)||void 0===o||o.forEach(function(t){t.x-=e,t.y-=r}),i.hasOwnProperty("x")&&(i.x-=e),i.hasOwnProperty("y")&&(i.y-=r)}),i.width=n-e+a,i.height=o-r+s},N=function(t){t.edges().forEach(function(e){var r,n,o=t.edge(e),i=t.node(e.v),a=t.node(e.w);o.points?(r=o.points[0],n=o.points[o.points.length-1]):(o.points=[],r=a,n=i),o.points.unshift((0,u.intersectRect)(i,r)),o.points.push((0,u.intersectRect)(a,n))})},L=function(t){t.edges().forEach(function(e){var r=t.edge(e);if(null===r||void 0===r?void 0:r.hasOwnProperty("x"))switch("l"!==r.labelpos&&"r"!==r.labelpos||(r.width-=r.labeloffset),r.labelpos){case"l":r.x-=r.width/2+r.labeloffset;break;case"r":r.x+=r.width/2+r.labeloffset}})},R=function(t){t.edges().forEach(function(e){var r,n=t.edge(e);n.reversed&&(null===(r=n.points)||void 0===r||r.reverse())})},D=function(t){t.nodes().forEach(function(e){var r,n,o;if(null===(r=t.children(e))||void 0===r?void 0:r.length){var i=t.node(e),a=t.node(i.borderTop),s=t.node(i.borderBottom),u=t.node(i.borderLeft[(null===(n=i.borderLeft)||void 0===n?void 0:n.length)-1]),l=t.node(i.borderRight[(null===(o=i.borderRight)||void 0===o?void 0:o.length)-1]);i.width=Math.abs((null===l||void 0===l?void 0:l.x)-(null===u||void 0===u?void 0:u.x))||10,i.height=Math.abs((null===s||void 0===s?void 0:s.y)-(null===a||void 0===a?void 0:a.y))||10,i.x=((null===u||void 0===u?void 0:u.x)||0)+i.width/2,i.y=((null===a||void 0===a?void 0:a.y)||0)+i.height/2}}),t.nodes().forEach(function(e){var r;"border"===(null===(r=t.node(e))||void 0===r?void 0:r.dummy)&&t.removeNode(e)})},B=function(t){t.edges().forEach(function(e){if(e.v===e.w){var r=t.node(e.v);r.selfEdges||(r.selfEdges=[]),r.selfEdges.push({e:e,label:t.edge(e)}),t.removeEdgeObj(e)}})},F=function(t){var e=(0,u.buildLayerMatrix)(t);null===e||void 0===e||e.forEach(function(e){var r=0;null===e||void 0===e||e.forEach(function(e,n){var o,i=t.node(e);i.order=n+r,null===(o=i.selfEdges)||void 0===o||o.forEach(function(e){(0,u.addDummyNode)(t,"selfedge",{width:e.label.width,height:e.label.height,rank:i.rank,order:n+ ++r,e:e.e,label:e.label},"_se")}),delete i.selfEdges})})},G=function(t){t.nodes().forEach(function(e){var r=t.node(e);if("selfedge"===r.dummy){var n=t.node(r.e.v),o=n.x+n.width/2,i=n.y,a=r.x-o,s=n.height/2;t.setEdgeObj(r.e,r.label),t.removeNode(e),r.label.points=[{x:o+2*a/3,y:i-s},{x:o+5*a/6,y:i-s},{y:i,x:o+a},{x:o+5*a/6,y:i+s},{x:o+2*a/3,y:i+s}],r.label.x=r.x,r.label.y=r.y}})},U=function(t,e){var r={};return null===e||void 0===e||e.forEach(function(e){void 0!==t[e]&&(r[e]=+t[e])}),r},z=function(t){void 0===t&&(t={});var e={};return Object.keys(t).forEach(function(r){e[r.toLowerCase()]=t[r]}),e};e.default=function(t,e){var r=e&&e.debugTiming?u.time:u.notime;r("layout",function(){e&&!e.keepNodeOrder&&e.prevGraph&&r("  inheritOrder",function(){m(t,e.prevGraph)});var n=r("  buildLayoutGraph",function(){return C(t)});e&&!1===e.edgeLabelSpace||r("  makeSpaceForEdgeLabels",function(){T(n)});try{r("  runLayout",function(){g(n,r,e)})}catch(t){if("Not possible to find intersection inside of the rectangle"===t.message)return void console.error("The following error may be caused by improper layer setting, please make sure your manual layer setting does not violate the graph's structure:\n",t);throw t}r("  updateInputGraph",function(){b(t,n)})})}},3077:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(656),o=function t(e,r,o,i,a,s,u){var l=e.children(u);if(null===l||void 0===l?void 0:l.length){var c=(0,n.addBorderNode)(e,"_bt"),f=(0,n.addBorderNode)(e,"_bb"),h=e.node(u);e.setParent(c,u),h.borderTop=c,e.setParent(f,u),h.borderBottom=f,null===l||void 0===l||l.forEach(function(n){t(e,r,o,i,a,s,n);var l=e.node(n),h=l.borderTop?l.borderTop:n,p=l.borderBottom?l.borderBottom:n,d=l.borderTop?i:2*i,y=h!==p?1:a-s[u]+1;e.setEdge(c,h,{minlen:y,weight:d,nestingEdge:!0}),e.setEdge(p,f,{minlen:y,weight:d,nestingEdge:!0})}),e.parent(u)||e.setEdge(r,c,{weight:0,minlen:a+s[u]})}else u!==r&&e.setEdge(r,u,{weight:0,minlen:o})},i=function(t){var e,r={};return null===(e=t.children())||void 0===e||e.forEach(function(e){return function e(n,o){var i=t.children(n);null===i||void 0===i||i.forEach(function(t){return e(t,o+1)}),r[n]=o}(e,1)}),r},a=function(t){var e=0;return t.edges().forEach(function(r){e+=t.edge(r).weight}),e};e.default={run:function(t){var e,r=(0,n.addDummyNode)(t,"root",{},"_root"),s=i(t),u=Math.max.apply(Math,Object.values(s));Math.abs(u)===1/0&&(u=1);var l=u-1,c=2*l+1;t.graph().nestingRoot=r,t.edges().forEach(function(e){t.edge(e).minlen*=c});var f=a(t)+1;null===(e=t.children())||void 0===e||e.forEach(function(e){o(t,r,c,f,l,s,e)}),t.graph().nodeRankFactor=c},cleanup:function(t){var e=t.graph();e.nestingRoot&&t.removeNode(e.nestingRoot),delete e.nestingRoot,t.edges().forEach(function(e){t.edge(e).nestingEdge&&t.removeEdgeObj(e)})}}},2749:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(656),o=function(t,e){var r=e.v,o=t.node(r).rank,i=e.w,a=t.node(i).rank,s=e.name,u=t.edge(e),l=u.labelRank;if(a!==o+1){t.removeEdgeObj(e);var c,f,h,p=t.graph();for(h=0,++o;o<a;++h,++o)u.points=[],f={edgeLabel:u,width:0,height:0,edgeObj:e,rank:o},c=(0,n.addDummyNode)(t,"edge",f,"_d"),o===l&&(f.width=u.width,f.height=u.height,f.dummy="edge-label",f.labelpos=u.labelpos),t.setEdge(r,c,{weight:u.weight},s),0===h&&(p.dummyChains||(p.dummyChains=[]),p.dummyChains.push(c)),r=c;t.setEdge(r,i,{weight:u.weight},s)}};e.default={run:function(t){t.graph().dummyChains=[],t.edges().forEach(function(e){return o(t,e)})},undo:function(t){var e;null===(e=t.graph().dummyChains)||void 0===e||e.forEach(function(e){var r,n=t.node(e),o=n.edgeLabel;n.edgeObj&&t.setEdgeObj(n.edgeObj,o);for(var i=e;n.dummy;)r=t.successors(i)[0],t.removeNode(i),o.points.push({x:n.x,y:n.y}),"edge-label"===n.dummy&&(o.x=n.x,o.y=n.y,o.width=n.width,o.height=n.height),i=r,n=t.node(i)})}}},2059:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=function(t,e,r){var n,o={};null===r||void 0===r||r.forEach(function(r){for(var i,a,s=t.parent(r);s;){if((i=t.parent(s))?(a=o[i],o[i]=s):(a=n,n=s),a&&a!==s)return void e.setEdge(a,s);s=i}})}},6771:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=function(t,e){return e.map(function(e){var r=t.inEdges(e);if(!(null===r||void 0===r?void 0:r.length))return{v:e};var n={sum:0,weight:0};return null===r||void 0===r||r.forEach(function(e){var r=t.edge(e),o=t.node(e.v);n.sum+=r.weight*o.order,n.weight+=r.weight}),{v:e,barycenter:n.sum/n.weight,weight:n.weight}})}},5053:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(5317),o=function(t){for(var e;t.hasNode(e="_root".concat(Math.random())););return e};e.default=function(t,e,r){var i=o(t),a=new n.Graph({compound:!0}).setGraph({root:i}).setDefaultNodeLabel(function(e){return t.node(e)});return t.nodes().forEach(function(n){var o,s=t.node(n),u=t.parent(n);(s.rank===e||s.minRank<=e&&e<=s.maxRank)&&(a.setNode(n),a.setParent(n,u||i),null===(o=t[r](n))||void 0===o||o.forEach(function(e){var r=e.v===n?e.w:e.v,o=a.edgeFromArgs(r,n),i=void 0!==o?o.weight:0;a.setEdge(r,n,{weight:t.edge(e).weight+i})}),s.hasOwnProperty("minRank")&&a.setNode(n,{borderLeft:s.borderLeft[e],borderRight:s.borderRight[e]}))}),a}},2468:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(656),o=function(t,e,r){for(var o=(0,n.zipObject)(r,r.map(function(t,e){return e})),i=e.map(function(e){var r,n=null===(r=t.outEdges(e))||void 0===r?void 0:r.map(function(e){return{pos:o[e.w]||0,weight:t.edge(e).weight}});return null===n||void 0===n?void 0:n.sort(function(t,e){return t.pos-e.pos})}).flat().filter(function(t){return void 0!==t}),a=1;a<r.length;)a<<=1;var s=2*a-1;a-=1;var u=Array(s).fill(0,0,s),l=0;return null===i||void 0===i||i.forEach(function(t){if(t){var e=t.pos+a;u[e]+=t.weight;for(var r=0;e>0;)e%2&&(r+=u[e+1]),u[e=e-1>>1]+=t.weight;l+=t.weight*r}}),l};e.default=function(t,e){for(var r=0,n=1;n<(null===e||void 0===e?void 0:e.length);n+=1)r+=o(t,e[n-1],e[n]);return r}},4962:function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=n(r(9883)),i=n(r(2468)),a=n(r(5053)),s=n(r(2059)),u=n(r(9514)),l=r(8652),c=r(5317),f=r(656),h=function(t,e,r){return e.map(function(e){return(0,a.default)(t,e,r)})},p=function(t,e,r,n){var o=new c.Graph;null===t||void 0===t||t.forEach(function(t){for(var i,a=t.graph().root,l=(0,u.default)(t,a,o,e,r,n),c=0;c<(null===(i=l.vs)||void 0===i?void 0:i.length);c++){var f=t.node(l.vs[c]);f&&(f.order=c)}(0,s.default)(t,o,l.vs)})},d=function(t,e){null===e||void 0===e||e.forEach(function(e){null===e||void 0===e||e.forEach(function(e,r){t.node(e).order=r})})};e.default=function(t,e){for(var r=(0,f.maxRank)(t),n=[],a=[],s=1;s<r+1;s++)n.push(s);for(s=r-1;s>-1;s--)a.push(s);var u=h(t,n,"inEdges"),c=h(t,a,"outEdges"),y=(0,o.default)(t);d(t,y);for(var v,g=Number.POSITIVE_INFINITY,m=(s=0,0);m<4;++s,++m)p(s%2?u:c,s%4>=2,!1,e),y=(0,f.buildLayerMatrix)(t),(b=(0,i.default)(t,y))<g&&(m=0,v=(0,l.clone)(y),g=b);y=(0,o.default)(t),d(t,y);for(s=0,m=0;m<4;++s,++m){var b;p(s%2?u:c,s%4>=2,!0,e),y=(0,f.buildLayerMatrix)(t),(b=(0,i.default)(t,y))<g&&(m=0,v=(0,l.clone)(y),g=b)}d(t,v)}},6590:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=function(t,e){for(var r=t.nodes().filter(function(e){var r;return!(null===(r=t.children(e))||void 0===r?void 0:r.length)}).map(function(e){return t.node(e).rank}),n=Math.max.apply(Math,r),o=[],i=0;i<n+1;i++)o[i]=[];null===e||void 0===e||e.forEach(function(e){var r=t.node(e);!r||null!==r&&void 0!==r&&r.dummy||isNaN(r.rank)||(r.fixorder=o[r.rank].length,o[r.rank].push(e))})}},9883:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(4171);e.default=function(t){for(var e={},r=t.nodes().filter(function(e){var r;return!(null===(r=t.children(e))||void 0===r?void 0:r.length)}),o=r.map(function(e){return t.node(e).rank}),i=(0,n.max)(o),a=[],s=0;s<i+1;s++)a.push([]);var u=r.sort(function(e,r){return t.node(e).rank-t.node(r).rank}),l=u.filter(function(e){return void 0!==t.node(e).fixorder}).sort(function(e,r){return t.node(e).fixorder-t.node(r).fixorder});return null===l||void 0===l||l.forEach(function(r){isNaN(t.node(r).rank)||a[t.node(r).rank].push(r),e[r]=!0}),null===u||void 0===u||u.forEach(function r(n){var o;if(!e.hasOwnProperty(n)){e[n]=!0;var i=t.node(n);isNaN(i.rank)||a[i.rank].push(n),null===(o=t.successors(n))||void 0===o||o.forEach(function(t){return r(t)})}}),a}},135:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){for(var e,r,o=[],i=function(){var i=t.pop();o.push(i),null===(e=i.in.reverse())||void 0===e||e.forEach(function(t){return(e=i,function(t){t.merged||(void 0===t.barycenter||void 0===e.barycenter||t.barycenter>=e.barycenter)&&n(e,t)})(t);var e}),null===(r=i.out)||void 0===r||r.forEach(function(e){return(r=i,function(e){e.in.push(r),0==--e.indegree&&t.push(e)})(e);var r})};null===t||void 0===t?void 0:t.length;)i();var a=["vs","i","barycenter","weight"];return o.filter(function(t){return!t.merged}).map(function(t){var e={};return null===a||void 0===a||a.forEach(function(r){void 0!==t[r]&&(e[r]=t[r])}),e})},n=function(t,e){var r,n=0,o=0;t.weight&&(n+=t.barycenter*t.weight,o+=t.weight),e.weight&&(n+=e.barycenter*e.weight,o+=e.weight),t.vs=null===(r=e.vs)||void 0===r?void 0:r.concat(t.vs),t.barycenter=n/o,t.weight=o,t.i=Math.min(e.i,t.i),e.merged=!0};e.default=function(t,e){var n,o,i,a={};null===t||void 0===t||t.forEach(function(t,e){a[t.v]={i:e,indegree:0,in:[],out:[],vs:[t.v]};var r=a[t.v];void 0!==t.barycenter&&(r.barycenter=t.barycenter,r.weight=t.weight)}),null===(n=e.edges())||void 0===n||n.forEach(function(t){var e=a[t.v],r=a[t.w];void 0!==e&&void 0!==r&&(r.indegree++,e.out.push(a[t.w]))});var s=null===(i=(o=Object.values(a)).filter)||void 0===i?void 0:i.call(o,function(t){return!t.indegree});return r(s)}},9514:function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=n(r(6771)),i=n(r(135)),a=n(r(728)),s=function(t,e){null===t||void 0===t||t.forEach(function(t){var r,n=null===(r=t.vs)||void 0===r?void 0:r.map(function(t){return e[t]?e[t].vs:t});t.vs=n.flat()})},u=function(t,e){void 0!==t.barycenter?(t.barycenter=(t.barycenter*t.weight+e.barycenter*e.weight)/(t.weight+e.weight),t.weight+=e.weight):(t.barycenter=e.barycenter,t.weight=e.weight)};e.default=function t(e,r,n,l,c,f){var h,p,d,y,v=e.children(r),g=e.node(r),m=g?g.borderLeft:void 0,b=g?g.borderRight:void 0,w={};m&&(v=null===v||void 0===v?void 0:v.filter(function(t){return t!==m&&t!==b}));var S=(0,o.default)(e,v||[]);null===S||void 0===S||S.forEach(function(r){var o;if(null===(o=e.children(r.v))||void 0===o?void 0:o.length){var i=t(e,r.v,n,l,f);w[r.v]=i,i.hasOwnProperty("barycenter")&&u(r,i)}});var x=(0,i.default)(S,n);s(x,w),null===(h=x.filter(function(t){return t.vs.length>0}))||void 0===h||h.forEach(function(t){var r=e.node(t.vs[0]);r&&(t.fixorder=r.fixorder,t.order=r.order)});var _=(0,a.default)(x,l,c,f);if(m&&(_.vs=[m,_.vs,b].flat(),null===(p=e.predecessors(m))||void 0===p?void 0:p.length)){var E=e.node((null===(d=e.predecessors(m))||void 0===d?void 0:d[0])||""),O=e.node((null===(y=e.predecessors(b))||void 0===y?void 0:y[0])||"");_.hasOwnProperty("barycenter")||(_.barycenter=0,_.weight=0),_.barycenter=(_.barycenter*_.weight+E.order+O.order)/(_.weight+2),_.weight+=2}return _}},728:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(656),o=function(t,e,r){for(var n,o=r;e.length&&(n=e[e.length-1]).i<=o;)e.pop(),null===t||void 0===t||t.push(n.vs),o++;return o},i=function(t,e){return function(r,n){if(void 0!==r.fixorder&&void 0!==n.fixorder)return r.fixorder-n.fixorder;if(r.barycenter<n.barycenter)return-1;if(r.barycenter>n.barycenter)return 1;if(e&&void 0!==r.order&&void 0!==n.order){if(r.order<n.order)return-1;if(r.order>n.order)return 1}return t?n.i-r.i:r.i-n.i}};e.default=function(t,e,r,a){var s=(0,n.partition)(t,function(t){var e=t.hasOwnProperty("fixorder")&&!isNaN(t.fixorder);return a?!e&&t.hasOwnProperty("barycenter"):e||t.hasOwnProperty("barycenter")}),u=s.lhs,l=s.rhs.sort(function(t,e){return-t.i- -e.i}),c=[],f=0,h=0,p=0;null===u||void 0===u||u.sort(i(!!e,!!r)),p=o(c,l,p),null===u||void 0===u||u.forEach(function(t){var e;p+=null===(e=t.vs)||void 0===e?void 0:e.length,c.push(t.vs),f+=t.barycenter*t.weight,h+=t.weight,p=o(c,l,p)});var d={vs:c.flat()};return h&&(d.barycenter=f/h,d.weight=h),d}},1745:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=function(t){var e,r=function(t){var e,r={},n=0;return null===(e=t.children())||void 0===e||e.forEach(function e(o){var i,a=n;null===(i=t.children(o))||void 0===i||i.forEach(e),r[o]={low:a,lim:n++}}),r}(t);null===(e=t.graph().dummyChains)||void 0===e||e.forEach(function(e){var n,o,i=e,a=t.node(i),s=a.edgeObj;if(s)for(var u=function(t,e,r,n){var o,i,a=[],s=[],u=Math.min(e[r].low,e[n].low),l=Math.max(e[r].lim,e[n].lim);o=r;do{o=t.parent(o),a.push(o)}while(o&&(e[o].low>u||l>e[o].lim));for(i=o,o=n;o&&o!==i;)s.push(o),o=t.parent(o);return{lca:i,path:a.concat(s.reverse())}}(t,r,s.v,s.w),l=u.path,c=u.lca,f=0,h=l[f],p=!0;i!==s.w;){if(a=t.node(i),p){for(;h!==c&&(null===(n=t.node(h))||void 0===n?void 0:n.maxRank)<a.rank;)h=l[++f];h===c&&(p=!1)}if(!p){for(;f<l.length-1&&(null===(o=t.node(l[f+1]))||void 0===o?void 0:o.minRank)<=a.rank;)f++;h=l[f]}t.setParent(i,h),i=t.successors(i)[0]}})}},2438:function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.width=e.sep=e.positionX=e.balance=e.alignCoordinates=e.findSmallestWidthAlignment=e.buildBlockGraph=e.horizontalCompaction=e.verticalAlignment=e.hasConflict=e.addConflict=e.findOtherInnerSegmentNode=e.findType2Conflicts=e.findType1Conflicts=void 0;var i=r(2314),a=r(4171),s=r(656),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e}(i.Graph);e.findType1Conflicts=function(t,r){var n={};return(null===r||void 0===r?void 0:r.length)&&r.reduce(function(r,o){var i=0,a=0,s=r.length,u=null===o||void 0===o?void 0:o[(null===o||void 0===o?void 0:o.length)-1];return null===o||void 0===o||o.forEach(function(r,l){var c,f=(0,e.findOtherInnerSegmentNode)(t,r),h=f?t.node(f).order:s;(f||r===u)&&(null===(c=o.slice(a,l+1))||void 0===c||c.forEach(function(r){var o;null===(o=t.predecessors(r))||void 0===o||o.forEach(function(o){var a,s=t.node(o),u=s.order;!(u<i||h<u)||s.dummy&&(null===(a=t.node(r))||void 0===a?void 0:a.dummy)||(0,e.addConflict)(n,o,r)})}),a=l+1,i=h)}),o}),n};e.findType2Conflicts=function(t,r){var n={};function o(r,o){var i=function(t){return JSON.stringify(t.slice(1))}(r);o.get(i)||(function(r,o,i,a,s){for(var u,l,c,f=o;f<i;f++)c=r[f],(null===(u=t.node(c))||void 0===u?void 0:u.dummy)&&(null===(l=t.predecessors(c))||void 0===l||l.forEach(function(r){var o=t.node(r);o.dummy&&(o.order<a||o.order>s)&&(0,e.addConflict)(n,r,c)}))}.apply(void 0,r),o.set(i,!0))}return(null===r||void 0===r?void 0:r.length)&&r.reduce(function(e,r){var n,i=-1,a=0,s=new Map;return null===r||void 0===r||r.forEach(function(u,l){var c;if("border"===(null===(c=t.node(u))||void 0===c?void 0:c.dummy)){var f=t.predecessors(u)||[];f.length&&(n=t.node(f[0]).order,o([r,a,l,i,n],s),a=l,i=n)}o([r,a,r.length,n,e.length],s)}),r}),n};e.findOtherInnerSegmentNode=function(t,e){var r,n;if(null===(r=t.node(e))||void 0===r?void 0:r.dummy)return null===(n=t.predecessors(e))||void 0===n?void 0:n.find(function(e){return t.node(e).dummy})};e.addConflict=function(t,e,r){var n=e,o=r;if(n>o){var i=n;n=o,o=i}var a=t[n];a||(t[n]=a={}),a[o]=!0};e.hasConflict=function(t,e,r){var n=e;n>r&&(n=r);return!!t[n]};e.verticalAlignment=function(t,r,n,o){var i={},a={},s={};return null===r||void 0===r||r.forEach(function(t){null===t||void 0===t||t.forEach(function(t,e){i[t]=t,a[t]=t,s[t]=e})}),null===r||void 0===r||r.forEach(function(t){var r=-1;null===t||void 0===t||t.forEach(function(t){var u=o(t);if(u.length)for(var l=((u=u.sort(function(t,e){return s[t]-s[e]})).length-1)/2,c=Math.floor(l),f=Math.ceil(l);c<=f;++c){var h=u[c];a[t]===t&&r<s[h]&&!(0,e.hasConflict)(n,t,h)&&(a[h]=t,a[t]=i[t]=i[h],r=s[h])}})}),{root:i,align:a}};e.horizontalCompaction=function(t,r,n,o,i){var a,s={},u=(0,e.buildBlockGraph)(t,r,n,i),l=i?"borderLeft":"borderRight",c=function(t,e){for(var r=u.nodes(),n=r.pop(),o={};n;)o[n]?t(n):(o[n]=!0,r.push(n),r=r.concat(e(n))),n=r.pop()};return c(function(t){s[t]=(u.inEdges(t)||[]).reduce(function(t,e){return Math.max(t,(s[e.v]||0)+u.edge(e))},0)},u.predecessors.bind(u)),c(function(e){var r=(u.outEdges(e)||[]).reduce(function(t,e){return Math.min(t,(s[e.w]||0)-u.edge(e))},Number.POSITIVE_INFINITY),n=t.node(e);r!==Number.POSITIVE_INFINITY&&n.borderType!==l&&(s[e]=Math.max(s[e],r))},u.successors.bind(u)),null===(a=Object.values(o))||void 0===a||a.forEach(function(t){s[t]=s[n[t]]}),s};e.buildBlockGraph=function(t,r,n,o){var i=new u,a=t.graph(),s=(0,e.sep)(a.nodesep,a.edgesep,o);return null===r||void 0===r||r.forEach(function(e){var r;null===e||void 0===e||e.forEach(function(e){var o=n[e];if(i.setNode(o),r){var a=n[r],u=i.edgeFromArgs(a,o);i.setEdge(a,o,Math.max(s(t,e,r),u||0))}r=e})}),i};function l(t,e){var r=Object.values(e),n=(0,a.min)(r),o=(0,a.max)(r);["u","d"].forEach(function(r){["l","r"].forEach(function(i){var s,u=r+i,l=t[u];if(l!==e){var c=Object.values(l);(s="l"===i?n-(0,a.min)(c):o-(0,a.max)(c))&&(t[u]={},Object.keys(l).forEach(function(e){t[u][e]=l[e]+s}))}})})}e.findSmallestWidthAlignment=function(t,r){return(0,s.minBy)(Object.values(r),function(r){var n,o=Number.NEGATIVE_INFINITY,i=Number.POSITIVE_INFINITY;return null===(n=Object.keys(r))||void 0===n||n.forEach(function(n){var a=r[n],s=(0,e.width)(t,n)/2;o=Math.max(a+s,o),i=Math.min(a-s,i)}),o-i})},e.alignCoordinates=l;e.balance=function(t,e){var r={};return Object.keys(t.ul).forEach(function(n){if(e)r[n]=t[e.toLowerCase()][n];else{var o=Object.values(t).map(function(t){return t[n]});r[n]=(o[0]+o[1])/2}}),r};e.positionX=function(t){var r,n=(0,s.buildLayerMatrix)(t),o=Object.assign((0,e.findType1Conflicts)(t,n),(0,e.findType2Conflicts)(t,n)),i={};["u","d"].forEach(function(a){r="u"===a?n:Object.values(n).reverse(),["l","r"].forEach(function(n){"r"===n&&(r=r.map(function(t){return Object.values(t).reverse()}));var s=("u"===a?t.predecessors:t.successors).bind(t),u=(0,e.verticalAlignment)(t,r,o,s),l=(0,e.horizontalCompaction)(t,r,u.root,u.align,"r"===n);"r"===n&&Object.keys(l).forEach(function(t){l[t]=-l[t]}),i[a+n]=l})});var a=(0,e.findSmallestWidthAlignment)(t,i);return l(i,a),(0,e.balance)(i,t.graph().align)};e.sep=function(t,e,r){return function(n,o,i){var a,s=n.node(o),u=n.node(i),l=0;if(l+=s.width/2,s.hasOwnProperty("labelpos"))switch((s.labelpos||"").toLowerCase()){case"l":a=-s.width/2;break;case"r":a=s.width/2}if(a&&(l+=r?a:-a),a=0,l+=(s.dummy?e:t)/2,l+=(u.dummy?e:t)/2,l+=u.width/2,u.labelpos)switch((u.labelpos||"").toLowerCase()){case"l":a=u.width/2;break;case"r":a=-u.width/2}return a&&(l+=r?a:-a),a=0,l}};e.width=function(t,e){return t.node(e).width||0}},4831:function(t,e,r){"use strict";var n=this&&this.__spreadArray||function(t,e,r){if(r||2===arguments.length)for(var n,o=0,i=e.length;o<i;o++)!n&&o in e||(n||(n=Array.prototype.slice.call(e,0,o)),n[o]=e[o]);return t.concat(n||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0});var o=r(656),i=r(2438);e.default=function(t){var e,r=(0,o.asNonCompoundGraph)(t);!function(t){var e=(0,o.buildLayerMatrix)(t),r=t.graph().ranksep,i=0;null===e||void 0===e||e.forEach(function(e){var o=e.map(function(e){return t.node(e).height}),a=Math.max.apply(Math,n(n([],o,!1),[0],!1));null===e||void 0===e||e.forEach(function(e){t.node(e).y=i+a/2}),i+=a+r})}(r);var a=function(t){var e=(0,o.buildLayerMatrix)(t),r=Object.assign((0,i.findType1Conflicts)(t,e),(0,i.findType2Conflicts)(t,e)),n={},a=[];["u","d"].forEach(function(o){a="u"===o?e:Object.values(e).reverse(),["l","r"].forEach(function(e){"r"===e&&(a=a.map(function(t){return Object.values(t).reverse()}));var s=("u"===o?t.predecessors:t.successors).bind(t),u=(0,i.verticalAlignment)(t,a,r,s),l=(0,i.horizontalCompaction)(t,a,u.root,u.align,"r"===e);"r"===e&&Object.keys(l).forEach(function(t){return l[t]=-l[t]}),n[o+e]=l})});var s=(0,i.findSmallestWidthAlignment)(t,n);return s&&(0,i.alignCoordinates)(n,s),(0,i.balance)(n,t.graph().align)}(r);null===(e=Object.keys(a))||void 0===e||e.forEach(function(t){r.node(t).x=a[t]})}},6838:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.feasibleTreeWithLayer=e.feasibleTree=void 0;var n=r(8861),o=r(656),i=r(5317),a=function(t){var e,r,o=new i.Graph({directed:!1}),a=t.nodes()[0],u=t.nodeCount();for(o.setNode(a,{});s(o,t)<u;)e=c(o,t),r=o.hasNode(e.v)?(0,n.slack)(t,e):-(0,n.slack)(t,e),f(o,t,r);return o};e.feasibleTree=a;var s=function(t,e){return t.nodes().forEach(function r(o){e.nodeEdges(o).forEach(function(i){var a=i.v,s=o===a?i.w:a;t.hasNode(s)||(0,n.slack)(e,i)||(t.setNode(s,{}),t.setEdge(o,s,{}),r(s))})}),t.nodeCount()},u=function(t){var e,r,o=new i.Graph({directed:!1}),a=t.nodes()[0],s=t.nodes().filter(function(e){return!!t.node(e)}).length;for(o.setNode(a,{});l(o,t)<s;)e=c(o,t),r=o.hasNode(e.v)?(0,n.slack)(t,e):-(0,n.slack)(t,e),f(o,t,r);return o};e.feasibleTreeWithLayer=u;var l=function(t,e){return t.nodes().forEach(function r(o){var i;null===(i=e.nodeEdges(o))||void 0===i||i.forEach(function(i){var a=i.v,s=o===a?i.w:a;t.hasNode(s)||void 0===e.node(s).layer&&(0,n.slack)(e,i)||(t.setNode(s,{}),t.setEdge(o,s,{}),r(s))})}),t.nodeCount()},c=function(t,e){return(0,o.minBy)(e.edges(),function(r){return t.hasNode(r.v)!==t.hasNode(r.w)?(0,n.slack)(e,r):1/0})},f=function(t,e,r){t.nodes().forEach(function(t){e.node(t).rank||(e.node(t).rank=0),e.node(t).rank+=r})};e.default={feasibleTree:a,feasibleTreeWithLayer:u}},5378:function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=r(8861),i=r(6838),a=n(r(2035)),s=o.longestPath,u=function(t){(0,o.longestPathWithLayer)(t),(0,i.feasibleTreeWithLayer)(t)},l=function(t){(0,a.default)(t)};e.default=function(t){switch(t.graph().ranker){case"network-simplex":l(t);break;case"tight-tree":u(t);break;case"longest-path":s(t);break;default:u(t)}}},2035:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.exchangeEdges=e.enterEdge=e.leaveEdge=e.initLowLimValues=e.calcCutValue=e.initCutValues=void 0;var n=r(6838),o=r(8861),i=r(656),a=r(2314),s=a.algorithm.preorder,u=a.algorithm.postorder;e.initCutValues=function(t,e){var r=u(t,t.nodes());null===(r=null===r||void 0===r?void 0:r.slice(0,(null===r||void 0===r?void 0:r.length)-1))||void 0===r||r.forEach(function(r){l(t,e,r)})};var l=function(t,r,n){var o=t.node(n).parent;t.edgeFromArgs(n,o).cutvalue=(0,e.calcCutValue)(t,r,n)};e.calcCutValue=function(t,e,r){var n,o=t.node(r).parent,i=!0,a=e.edgeFromArgs(r,o),s=0;return a||(i=!1,a=e.edgeFromArgs(o,r)),s=a.weight,null===(n=e.nodeEdges(r))||void 0===n||n.forEach(function(n){var a=n.v===r,u=a?n.w:n.v;if(u!==o){var l=a===i,c=e.edge(n).weight;if(s+=l?c:-c,h(t,r,u)){var f=t.edgeFromArgs(r,u).cutvalue;s+=l?-f:f}}}),s};e.initLowLimValues=function(t,e){void 0===e&&(e=t.nodes()[0]),c(t,{},1,e)};var c=function t(e,r,n,o,i){var a,s=n,u=n,l=e.node(o);return r[o]=!0,null===(a=e.neighbors(o))||void 0===a||a.forEach(function(n){r[n]||(u=t(e,r,u,n,o))}),l.low=s,l.lim=u++,i?l.parent=i:delete l.parent,u};e.leaveEdge=function(t){return t.edges().find(function(e){return t.edge(e).cutvalue<0})};e.enterEdge=function(t,e,r){var n=r.v,a=r.w;e.hasEdge(n,a)||(n=r.w,a=r.v);var s=t.node(n),u=t.node(a),l=s,c=!1;s.lim>u.lim&&(l=u,c=!0);var f=e.edges().filter(function(e){return c===p(t,t.node(e.v),l)&&c!==p(t,t.node(e.w),l)});return(0,i.minBy)(f,function(t){return(0,o.slack)(e,t)})};e.exchangeEdges=function(t,r,n,o){var i=n.v,a=n.w;t.removeEdge(i,a),t.setEdge(o.v,o.w,{}),(0,e.initLowLimValues)(t),(0,e.initCutValues)(t,r),f(t,r)};var f=function(t,e){var r=t.nodes().find(function(t){var r;return!(null===(r=e.node(t))||void 0===r?void 0:r.parent)}),n=s(t,r);null===(n=null===n||void 0===n?void 0:n.slice(1))||void 0===n||n.forEach(function(r){var n=t.node(r).parent,o=e.edgeFromArgs(r,n),i=!1;o||(o=e.edgeFromArgs(n,r),i=!0),e.node(r).rank=e.node(n).rank+(i?o.minlen:-o.minlen)})},h=function(t,e,r){return t.hasEdge(e,r)},p=function(t,e,r){return r.low<=e.lim&&e.lim<=r.lim};e.default=function(t){var r=(0,i.simplify)(t);(0,o.longestPath)(r);var a,s,u=(0,n.feasibleTree)(r);for((0,e.initLowLimValues)(u),(0,e.initCutValues)(u,r);a=(0,e.leaveEdge)(u);)s=(0,e.enterEdge)(u,r,a),(0,e.exchangeEdges)(u,r,a,s)}},8861:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.slack=e.longestPathWithLayer=e.longestPath=void 0;var r=function(t){var e,r={};null===(e=t.sources())||void 0===e||e.forEach(function(e){return function e(n){var o,i,a=t.node(n);return a?r[n]?a.rank:(r[n]=!0,null===(o=t.outEdges(n))||void 0===o||o.forEach(function(r){var n=e(r.w)-t.edge(r).minlen;n&&(void 0===i||n<i)&&(i=n)}),i||(i=0),a.rank=i,i):0}(e)})};e.longestPath=r;var n=function(t){var e,r,n={};null===(e=t.sources())||void 0===e||e.forEach(function(e){t.node(e)&&function e(o){var i,a,s=t.node(o);return s?n[o]?s.rank:(n[o]=!0,null===(i=t.outEdges(o))||void 0===i||i.forEach(function(r){var n=e(r.w)-t.edge(r).minlen;n&&(void 0===a||n<a)&&(a=n)}),a||(a=0),(void 0===r||a<r)&&(r=a),s.rank=a,a):0}(e)}),void 0===r&&(r=0);var o={};t.nodes().forEach(function(e){var n=t.node(e);n&&(isNaN(n.layer)?n.rank-=r:function e(r,n){var i,a=t.node(r),s=isNaN(a.layer)?n:a.layer;(void 0===a.rank||a.rank<s)&&(a.rank=s),o[r]||(o[r]=!0,null===(i=t.outEdges(r))||void 0===i||i.map(function(r){e(r.w,s+t.edge(r).minlen)}))}(e,n.layer))})};e.longestPathWithLayer=n;var o=function(t,e){return t.node(e.w).rank-t.node(e.v).rank-t.edge(e).minlen};e.slack=o,e.default={longestPath:r,longestPathWithLayer:n,slack:o}},656:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.minBy=e.notime=e.time=e.partition=e.maxRank=e.addBorderNode=e.removeEmptyRanks=e.normalizeRanks=e.buildLayerMatrix=e.intersectRect=e.predecessorWeights=e.successorWeights=e.zipObject=e.asNonCompoundGraph=e.simplify=e.addDummyNode=void 0;var n=r(8652),o=r(5317);e.addDummyNode=function(t,e,r,n){var o;do{o="".concat(n).concat(Math.random())}while(t.hasNode(o));return r.dummy=e,t.setNode(o,r),o};e.simplify=function(t){var e=(new o.Graph).setGraph(t.graph());return t.nodes().forEach(function(r){e.setNode(r,t.node(r))}),t.edges().forEach(function(r){var n=e.edgeFromArgs(r.v,r.w)||{weight:0,minlen:1},o=t.edge(r);e.setEdge(r.v,r.w,{weight:n.weight+o.weight,minlen:Math.max(n.minlen,o.minlen)})}),e};e.asNonCompoundGraph=function(t){var e=new o.Graph({multigraph:t.isMultigraph()}).setGraph(t.graph());return t.nodes().forEach(function(r){var n;(null===(n=t.children(r))||void 0===n?void 0:n.length)||e.setNode(r,t.node(r))}),t.edges().forEach(function(r){e.setEdgeObj(r,t.edge(r))}),e};e.zipObject=function(t,e){return null===t||void 0===t?void 0:t.reduce(function(t,r,n){return t[r]=e[n],t},{})};e.successorWeights=function(t){var e={};return t.nodes().forEach(function(r){var n,o={};null===(n=t.outEdges(r))||void 0===n||n.forEach(function(e){var r;o[e.w]=(o[e.w]||0)+((null===(r=t.edge(e))||void 0===r?void 0:r.weight)||0)}),e[r]=o}),e};e.predecessorWeights=function(t){var r=t.nodes(),n=r.map(function(e){var r,n={};return null===(r=t.inEdges(e))||void 0===r||r.forEach(function(e){n[e.v]=(n[e.v]||0)+t.edge(e).weight}),n});return(0,e.zipObject)(r,n)};e.intersectRect=function(t,e){var r,n,o=Number(t.x),i=Number(t.y),a=Number(e.x)-o,s=Number(e.y)-i,u=Number(t.width)/2,l=Number(t.height)/2;return a||s?(Math.abs(s)*u>Math.abs(a)*l?(s<0&&(l=-l),r=l*a/s,n=l):(a<0&&(u=-u),r=u,n=u*s/a),{x:o+r,y:i+n}):{x:0,y:0}};e.buildLayerMatrix=function(t){for(var r=[],n=(0,e.maxRank)(t)+1,o=0;o<n;o++)r.push([]);t.nodes().forEach(function(e){var n=t.node(e);if(n){var o=n.rank;void 0!==o&&r[o]&&r[o].push(e)}});for(o=0;o<n;o++)r[o]=r[o].sort(function(e,r){var n,o,i,a;return i=null===(n=t.node(e))||void 0===n?void 0:n.order,a=null===(o=t.node(r))||void 0===o?void 0:o.order,Number(i)-Number(a)});return r};e.normalizeRanks=function(t){var e=t.nodes().filter(function(e){var r;return void 0!==(null===(r=t.node(e))||void 0===r?void 0:r.rank)}).map(function(e){return t.node(e).rank}),r=Math.min.apply(Math,e);t.nodes().forEach(function(e){var n=t.node(e);n.hasOwnProperty("rank")&&r!==1/0&&(n.rank-=r)})};e.removeEmptyRanks=function(t){var e=t.nodes(),r=e.filter(function(e){var r;return void 0!==(null===(r=t.node(e))||void 0===r?void 0:r.rank)}).map(function(e){return t.node(e).rank}),n=Math.min.apply(Math,r),o=[];e.forEach(function(e){var r,i=((null===(r=t.node(e))||void 0===r?void 0:r.rank)||0)-n;o[i]||(o[i]=[]),o[i].push(e)});for(var i=0,a=t.graph().nodeRankFactor||0,s=0;s<o.length;s++){var u=o[s];void 0===u?s%a!=0&&(i-=1):i&&(null===u||void 0===u||u.forEach(function(e){var r=t.node(e);r&&(r.rank=r.rank||0,r.rank+=i)}))}};e.addBorderNode=function(t,r,o,i){var a={width:0,height:0};return(0,n.isNumber)(o)&&(0,n.isNumber)(i)&&(a.rank=o,a.order=i),(0,e.addDummyNode)(t,"border",a,r)};e.maxRank=function(t){var e;return t.nodes().forEach(function(r){var n,o=null===(n=t.node(r))||void 0===n?void 0:n.rank;void 0!==o&&(void 0===e||o>e)&&(e=o)}),e||(e=0),e};e.partition=function(t,e){var r={lhs:[],rhs:[]};return null===t||void 0===t||t.forEach(function(t){e(t)?r.lhs.push(t):r.rhs.push(t)}),r};e.time=function(t,e){var r=Date.now();try{return e()}finally{console.log("".concat(t," time: ").concat(Date.now()-r,"ms"))}};e.notime=function(t,e){return e()};e.minBy=function(t,e){return t.reduce(function(t,r){return e(t)>e(r)?r:t})}},245:function(t,e,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},o=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);o&&("get"in o?e.__esModule:!o.writable&&!o.configurable)||(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&o(e,t,r);return i(e,t),e},s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var u=a(r(918)),l=s(r(7858)),c=s(r(8528)),f=r(813);e.default=function(t,e){var r=t.nodes,o=t.edges,i=e.width,a=e.height;if(!(null===r||void 0===r?void 0:r.length))return Promise.resolve();var s=[];r.forEach(function(t){if(o.filter(function(e){return e.source===t.id||e.target===t.id}).length>1){var e=n({},t);delete e.size,s.push(e)}});var h=[];o.forEach(function(t){var e=s.find(function(e){return e.id===t.source}),r=s.find(function(e){return e.id===t.target});e&&r&&h.push(t)});var p=new f.DagreLayout({type:"dagre",ranksep:e.nodeMinGap,nodesep:e.nodeMinGap}).layout({nodes:s,edges:h}).nodes;r.forEach(function(t){var e=(p||[]).find(function(e){return e.id===t.id});t.x=(null===e||void 0===e?void 0:e.x)||i/2,t.y=(null===e||void 0===e?void 0:e.y)||a/2});var d=JSON.parse(JSON.stringify(r)),y=JSON.parse(JSON.stringify(o)),v=u.forceSimulation().nodes(d).force("link",u.forceLink(y).id(function(t){return t.id}).distance(function(t){return h.find(function(e){return e.source===t.source&&e.target===t.target})?30:20})).force("charge",u.forceManyBody()).force("center",u.forceCenter(i/2,a/2)).force("x",u.forceX(i/2)).force("y",u.forceY(a/2)).alpha(.3).alphaDecay(.08).alphaMin(.001);return new Promise(function(t){v.on("end",function(){r.forEach(function(t){var e=d.find(function(e){return e.id===t.id});e&&(t.x=e.x,t.y=e.y)});var n=Math.min.apply(Math,r.map(function(t){return t.x})),s=Math.max.apply(Math,r.map(function(t){return t.x})),u=Math.min.apply(Math,r.map(function(t){return t.y})),f=Math.max.apply(Math,r.map(function(t){return t.y})),h=i/(s-n),p=a/(f-u);r.forEach(function(t){void 0!==t.x&&h<1&&(t.x=(t.x-n)*h),void 0!==t.y&&p<1&&(t.y=(t.y-u)*p)}),r.forEach(function(t){t.sizeTemp=t.size,t.size=[10,10]}),(0,c.default)(r,o),r.forEach(function(t){t.size=t.sizeTemp||[],delete t.sizeTemp}),(0,l.default)({nodes:r,edges:o},e),t()})})}},7858:function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=n(r(1860));e.default=function(t,e){if(!t.nodes||0===t.nodes.length)return t;var r=e.width,n=e.height,i=e.nodeMinGap,a=1e4,s=1e4;t.nodes.forEach(function(t){var e=t.size[0]||50,r=t.size[1]||50;a=Math.min(e,a),s=Math.min(r,s)});var u=new o.default;u.init(r,n,{CELL_H:s,CELL_W:a}),t.nodes.forEach(function(t){var e=u.occupyNearest(t);e&&(e.node={id:t.id,size:t.size},t.x=e.x,t.y=e.y,t.dx=e.dx,t.dy=e.dy)});for(var l=0;l<t.nodes.length;l++){var c=t.nodes[l],f=u.findGridByNodeId(c.id);if(!f)throw new Error("can not find node cell");var h=f.column,p=f.row;if(c.size[0]+i>a){for(var d=v=Math.ceil((c.size[0]+i)/a)-1,y=0;y<v&&(u.additionColumn.indexOf(h+y+1)>-1&&!u.cells[h+y+1][p].node);y++)d--;u.insertColumn(h,d)}if(c.size[1]+i>s){var v;for(d=v=Math.ceil((c.size[1]+i)/s)-1,y=0;y<v&&(u.additionRow.indexOf(p+y+1)>-1&&!u.cells[h][p+y+1].node);y++)d--;u.insertRow(p,d)}}for(l=0;l<u.columnNum;l++){var g=function(e){var r=u.cells[l][e];if(r.node){var n=t.nodes.find(function(t){var e;return t.id===(null===(e=null===r||void 0===r?void 0:r.node)||void 0===e?void 0:e.id)});n&&(n.x=r.x+n.size[0]/2,n.y=r.y+n.size[1]/2)}};for(y=0;y<u.rowNum;y++)g(y)}}},1860:function(t,e){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){this.cells=[],this.columnNum=0,this.rowNum=0,this.additionColumn=[],this.additionRow=[]}return t.prototype.init=function(e,r,n){this.cells=[],this.CELL_W=n.CELL_W||t.DEFAULT_CELL_W,this.CELL_H=n.CELL_H||t.DEFAULT_CELL_H,this.columnNum=Math.ceil(e/this.CELL_W),this.rowNum=Math.ceil(r/this.CELL_H),t.MIN_DIST=Math.pow(e,2)+Math.pow(r,2);for(var o=0;o<this.columnNum;o++){for(var i=[],a=0;a<this.rowNum;a++){var s={dx:o,dy:a,x:o*this.CELL_W,y:a*this.CELL_H,occupied:!1};i.push(s)}this.cells.push(i)}},t.prototype.findGridByNodeId=function(t){for(var e,r,n=0;n<this.columnNum;n++)for(var o=0;o<this.rowNum;o++)if(this.cells[n][o].node&&(null===(r=null===(e=this.cells[n][o])||void 0===e?void 0:e.node)||void 0===r?void 0:r.id)===t)return{column:n,row:o};return null},t.prototype.sqdist=function(t,e){return Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)},t.prototype.occupyNearest=function(e){for(var r,n=t.MIN_DIST,o=null,i=0;i<this.columnNum;i++)for(var a=0;a<this.rowNum;a++)!this.cells[i][a].occupied&&(r=this.sqdist(e,this.cells[i][a]))<n&&(n=r,o=this.cells[i][a]);return o&&(o.occupied=!0),o},t.prototype.insertColumn=function(t,e){if(!(e<=0)){for(var n=0;n<e;n++){this.cells[n+this.columnNum]=[];for(var o=0;o<this.rowNum;o++)this.cells[n+this.columnNum][o]={dx:n,dy:o,x:n*this.CELL_W,y:o*this.CELL_H,occupied:!1,node:null}}for(n=this.columnNum-1;n>t;n--)for(o=0;o<this.rowNum;o++)this.cells[n+e][o]=r(r({},this.cells[n][o]),{x:(n+e)*this.CELL_W,y:o*this.CELL_H}),this.cells[n][o]={x:n*this.CELL_W,y:o*this.CELL_H,occupied:!0,node:null};for(o=0;o<this.additionColumn.length;o++)this.additionColumn[o]>=t&&(this.additionColumn[o]+=e);for(n=0;n<e;n++)this.additionColumn.push(t+n+1);this.columnNum+=e}},t.prototype.insertRow=function(t,e){if(!(e<=0)){for(var n=0;n<e;n++)for(var o=0;o<this.columnNum;o++)this.cells[o][n+this.rowNum]={dx:o,dy:n,x:o*this.CELL_W,y:n*this.CELL_H,occupied:!1,node:null};for(o=0;o<this.columnNum;o++)for(n=this.rowNum-1;n>t;n--)this.cells[o][n+e]=r(r({},this.cells[o][n]),{dx:o,dy:n+e,x:o*this.CELL_W,y:(n+e)*this.CELL_H}),this.cells[o][n]={dx:o,dy:n,x:o*this.CELL_W,y:n*this.CELL_H,occupied:!1,node:null};for(n=0;n<this.additionRow.length;n++)this.additionRow[n]>=t&&(this.additionRow[n]+=e);for(o=0;o<e;o++)this.additionRow.push(t+o+1);this.rowNum+=e}},t.prototype.getNodes=function(){for(var t=[],e=0;e<this.columnNum;e++)for(var r=0;r<this.rowNum;r++)this.cells[e][r].node&&t.push(this.cells[e][r]);return t},t.MIN_DIST=50,t.DEFAULT_CELL_W=80,t.DEFAULT_CELL_H=80,t}();e.default=n},4957:function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.ERLayout=void 0;var a=r(9284),s=i(r(245)),u=function(t){function e(e){var r=t.call(this)||this;return r.width=300,r.height=300,r.nodeMinGap=50,r.onLayoutEnd=function(){},e&&r.updateCfg(e),r}return o(e,t),e.prototype.getDefaultCfg=function(){return{width:300,height:300,nodeMinGap:50}},e.prototype.execute=function(){var t=this,e=t.nodes,r=t.edges;return null===e||void 0===e||e.forEach(function(t){t.size||(t.size=[50,50])}),(0,s.default)({nodes:e,edges:r},{width:this.width,height:this.height,nodeMinGap:this.nodeMinGap}).then(function(){t.onLayoutEnd&&t.onLayoutEnd()})},e.prototype.getType=function(){return"er"},e}(a.Base);e.ERLayout=u},8528:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=1200,n=800,o=1e7,i=10,a=3.141592653589793,s=1.5707963267948966,u=.375*a,l=.625*a,c=new Map,f=10,h=10,p=.8,d=.1,y=.5;function v(t,e){var r=(c.get(t.id)||[]).find(function(t){return t.source===e.id||t.target===e.id}),n=t.size[0]*t.size[1],a=e.size[0]*e.size[1],f=n>a?e:t,h=n>a?t:e,p=f.x-f.size[0]/2,d=f.y-f.size[1]/2,y=f.x+f.size[0]/2,v=f.y+f.size[1]/2,g=h.x-h.size[0]/2,m=h.y-h.size[1]/2,b=h.x+h.size[0]/2,w=h.y+h.size[1]/2,S=f.x,x=f.y,_=h.x,E=h.y,O=0,P=0;if(y>=g&&b>=p&&v>=m&&w>=d){0===(P=Math.sqrt(Math.pow(_-S,2)+Math.pow(E-x,2)))&&(P=1e-7),O=1*i/P*100+((y<b?y:b)-(p>g?p:g))*((v<w?v:w)-(d>m?d:m)),O*=o}else{var k=!1,C=function(t,e,r){var n=t.x-t.size[0]/2,o=t.y-t.size[1]/2,i=t.x+t.size[0]/2,a=t.y+t.size[1]/2,c=e.x-e.size[0]/2,f=e.y-e.size[1]/2,h=e.x+e.size[0]/2,p=e.y+e.size[1]/2,d=t.x,y=t.y,v=e.x,g=e.y,m=v-d,b=Math.atan2(m,g-y),w=0,S=0,x=0,_=0;b>s?(S=o-p,w=c-i,x=parseFloat(S?(S/Math.cos(b)).toFixed(2):w.toFixed(2)),_=parseFloat(w?(w/Math.sin(b)).toFixed(2):S.toFixed(2))):x=_=0<b&&b<=s?(S=f-a)>(w=c-i)?parseFloat(S?(S/Math.cos(b)).toFixed(2):w.toFixed(2)):parseFloat(w?(w/Math.sin(b)).toFixed(2):S.toFixed(2)):b<-s?(S=o-p)>(w=-(h-n))?parseFloat(S?(S/Math.cos(b)).toFixed(2):w.toFixed(2)):parseFloat(w?(w/Math.sin(b)).toFixed(2):S.toFixed(2)):(S=f-a)>(w=Math.abs(m)>(i-n)/2?n-h:m)?parseFloat(S?(S/Math.cos(b)).toFixed(2):w.toFixed(2)):parseFloat(w&&0!==b?(w/Math.sin(b)).toFixed(2):S.toFixed(2));var E=parseFloat(b.toFixed(2)),O=r;return r&&(O=u<E&&E<l),{distance:Math.abs(x<_?x:_),isHoriz:O}}(f,h,k);P=C.distance,k=C.isHoriz,P<=i?O+=0!==P?r?i+1*o/P:i+o*i/P:o:(O+=P,r&&(O+=P*P))}return O}function g(t){for(var e=0,o=0;o<t.length;o++){var i=t[o];(i.x<0||i.y<0||i.x>r||i.y>n)&&(e+=1e12);for(var a=o+1;a<t.length;a++)e+=v(i,t[a])}return e}function m(t,e,r,n){var o=new Map;r.forEach(function(t,e){o.set(t.id,t)});var i=[];(n.filter(function(e){return e.source===t.id||e.target===t.id})||[]).forEach(function(e){var r=e.source===t.id?e.target:e.source,n=o.get(r);n&&i.push(n)});for(var a=!0,s=0;s<i.length;s++){var u=i[s],l=180*Math.atan((t.y-u.y)/(u.x-t.y)),c=180*Math.atan((e.y-u.y)/(u.x-e.y));if((l<30||l>150)&&!(c<30||c>150)||l*c<0){a=!1;break}if(l>70&&l<110&&!(c>70&&c<110)||l*c<0){a=!1;break}if((u.x-t.x)*(u.x-e.x)<0){a=!1;break}if((u.y-t.y)*(u.y-e.y)<0){a=!1;break}}return a}function b(t,e){for(var r=!1,n=1*f,o=1*h,i=[n,-n,0,0],a=[0,0,o,-o],s=0;s<t.length;++s)for(var u=t[s],l=w(u,t),c=0;c<i.length;c++){if(m(u,{x:u.x+i[c],y:u.y+a[c]},t,e)){u.x+=i[c],u.y+=a[c];var v=w(u,t),b=Math.random();v<l?(l=v,r=!0):b<p&&b>d?(l=v,r=!0):(u.x-=i[c],u.y-=a[c])}}return p>d&&(p*=y),r?g(t):0}function w(t,e){var o=0;(t.x<0||t.y<0||t.x+t.size[0]+20>r||t.y+t.size[1]+20>n)&&(o+=1e12);for(var i=0;i<e.length;++i)t.id!==e[i].id&&(o+=v(t,e[i]));return o}e.default=function(t,e){if(0===t.length)return{nodes:t,edges:e};t.forEach(function(t){var r=e.filter(function(e){return e.source===t.id||e.target===t.id});c.set(t,r)}),t.sort(function(t,e){var r,n;return(null===(r=c.get(t.id))||void 0===r?void 0:r.length)-(null===(n=c.get(e.id))||void 0===n?void 0:n.length)});for(var r=g(t),n=20,o=1,i=0,a=0;n>0&&!(++a>=50);){var s=b(t,e);0!==s&&(i=s),o=i-r,r=i,0===o?--n:n=20}return t.forEach(function(t){t.x=t.x-t.size[0]/2,t.y=t.y-t.size[1]/2}),{nodes:t,edges:e}}},2569:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.forceNBody=void 0;var n=r(6835);function o(t){var e=0,r=0,n=0;if(t.length){for(var o=0;o<4;o++){(i=t[o])&&i.weight&&(e+=i.weight,r+=i.x*i.weight,n+=i.y*i.weight)}t.x=r/e,t.y=n/e,t.weight=e}else{var i=t;t.x=i.data.x,t.y=i.data.y,t.weight=i.data.weight}}e.forceNBody=function(t,e,r,a,s){var u=r/a,l=t.map(function(t,r){var n=e[t.id],o=n.data,i=n.x,a=n.y,s=n.size,l=o.layout.force.nodeStrength;return{x:i,y:a,size:s,index:r,vx:0,vy:0,weight:u*l}}),c=(0,n.quadtree)(l,function(t){return t.x},function(t){return t.y}).visitAfter(o);return l.forEach(function(t){!function(t,e){e.visit(function(e,r,n,o,a){return i(e,r,n,o,a,t)})}(t,c)}),l.map(function(r,n){var o=e[t[n].id].data.layout.force.mass,i=void 0===o?1:o;s[2*n]=r.vx/i,s[2*n+1]=r.vy/i}),s};var i=function(t,e,r,n,o,i){var a=i.x-t.x||.1,s=i.y-t.y||.1,u=n-e,l=a*a+s*s,c=Math.sqrt(l)*l;if(u*u*.81<l){var f=t.weight/c;return i.vx+=a*f,i.vy+=s*f,!0}if(t.length)return!1;if(t.data!==i){f=t.data.weight/c;i.vx+=a*f,i.vy+=s*f}}},3490:function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__assign||function(){return(i=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.Force2Layout=void 0;var a=r(9284),s=r(8652),u=r(2569),l=function(t,e){return t?(0,s.isNumber)(t)?function(e){return t}:t:function(t){return e||1}},c=function(t){function e(e){var r=t.call(this)||this;r.maxIteration=1e3,r.workerEnabled=!1,r.edgeStrength=200,r.nodeStrength=1e3,r.coulombDisScale=.005,r.damping=.9,r.maxSpeed=500,r.minMovement=.4,r.interval=.02,r.factor=1,r.linkDistance=200,r.gravity=0,r.clusterNodeStrength=20,r.preventOverlap=!0,r.distanceThresholdMode="mean",r.tick=function(){},r.nodes=[],r.edges=[],r.width=300,r.height=300,r.nodeMap={},r.nodeIdxMap={},r.judgingDistance=0,r.centripetalOptions={leaf:2,single:2,others:1,center:function(t){return{x:r.width/2,y:r.height/2}}};var n=e.getMass;return r.propsGetMass=n,r.updateCfg(e),r}return o(e,t),e.prototype.getCentripetalOptions=function(){var t,e=this,r=e.leafCluster,n=e.clustering,o=e.nodeClusterBy,a=e.nodes,u=e.nodeMap,l=e.clusterNodeStrength,c=function(t){return"function"==typeof l?l(t):l},f={};if(r){t=this.getSameTypeLeafMap()||{};var h=Array.from(new Set(null===a||void 0===a?void 0:a.map(function(t){return t[o]})))||[];f={single:100,leaf:function(e,r,n){var o=t[e.id]||{},i=o.relativeLeafNodes,a=o.sameTypeLeafNodes;return(null===a||void 0===a?void 0:a.length)===(null===i||void 0===i?void 0:i.length)||1===(null===h||void 0===h?void 0:h.length)?1:c(e)},others:1,center:function(e,r,n){var o,i,a=((null===(o=e.data)||void 0===o?void 0:o.layout)||{}).degree;if(!a)return{x:100,y:100};if(1===a){var u=(t[e.id]||{}).sameTypeLeafNodes,l=void 0===u?[]:u;1===l.length?i=void 0:l.length>1&&(i=(0,s.getAvgNodePosition)(l))}else i=void 0;return{x:null===i||void 0===i?void 0:i.x,y:null===i||void 0===i?void 0:i.y}}}}if(n){t||(t=this.getSameTypeLeafMap());var p={};Array.from(new Set(a.map(function(t,e){return t[o]}))).filter(function(t){return void 0!==t}).forEach(function(t){var e=a.filter(function(e){return e[o]===t}).map(function(t){return u[t.id]});p[t]=(0,s.getAvgNodePosition)(e)}),f={single:function(t){return c(t)},leaf:function(t){return c(t)},others:function(t){return c(t)},center:function(t,e,r){var n=p[t[o]];return{x:null===n||void 0===n?void 0:n.x,y:null===n||void 0===n?void 0:n.y}}}}this.centripetalOptions=i(i({},this.centripetalOptions),f);var d=this.centripetalOptions,y=d.leaf,v=d.single,g=d.others;y&&"function"!=typeof y&&(this.centripetalOptions.leaf=function(){return y}),v&&"function"!=typeof v&&(this.centripetalOptions.single=function(){return v}),g&&"function"!=typeof g&&(this.centripetalOptions.others=function(){return g})},e.prototype.updateCfg=function(t){t&&Object.assign(this,t)},e.prototype.getDefaultCfg=function(){return{maxIteration:500,gravity:10,enableTick:!0,animate:!0}},e.prototype.execute=function(){var t=this;t.stop();var e=t.nodes,r=t.edges,n=t.defSpringLen;if(t.judgingDistance=0,e&&0!==e.length){t.width||"undefined"==typeof window||(t.width=window.innerWidth),t.height||"undefined"==typeof window||(t.height=window.innerHeight),t.center||(t.center=[t.width/2,t.height/2]);var o=t.center;if(1===e.length)return e[0].x=o[0],e[0].y=o[1],void t.onLayoutEnd([i({},e[0])]);t.degreesMap=(0,s.getDegreeMap)(e,r),t.propsGetMass?t.getMass=t.propsGetMass:t.getMass=function(e){var r=1;(0,s.isNumber)(e.mass)&&(r=e.mass);var n=t.degreesMap[e.id].all;return!n||n<5?r:5*n*r};var a,u=t.nodeSize;if(t.preventOverlap){var c,f=t.nodeSpacing;c=(0,s.isNumber)(f)?function(){return f}:(0,s.isFunction)(f)?f:function(){return 0},a=u?(0,s.isArray)(u)?function(t){return Math.max(u[0],u[1])+c(t)}:function(t){return u+c(t)}:function(t){return t.size?(0,s.isArray)(t.size)?Math.max(t.size[0],t.size[1])+c(t):(0,s.isObject)(t.size)?Math.max(t.size.width,t.size.height)+c(t):t.size+c(t):10+c(t)}}t.nodeSize=a,t.linkDistance=l(t.linkDistance,1),t.nodeStrength=l(t.nodeStrength,1),t.edgeStrength=l(t.edgeStrength,1);var h={},p={};e.forEach(function(e,n){(0,s.isNumber)(e.x)||(e.x=Math.random()*t.width),(0,s.isNumber)(e.y)||(e.y=Math.random()*t.height);var o=t.degreesMap[e.id];h[e.id]=i(i({},e),{data:i(i({},e.data),{size:t.nodeSize(e)||30,layout:{inDegree:o.in,outDegree:o.out,degree:o.all,tDegree:o.in,sDegree:o.out,force:{mass:t.getMass(e),nodeStrength:t.nodeStrength(e,r)}}})}),p[e.id]=n}),t.nodeMap=h,t.nodeIdxMap=p,t.edgeInfos=[],null===r||void 0===r||r.forEach(function(e){var r=h[e.source],o=h[e.target];r&&o?t.edgeInfos.push({edgeStrength:t.edgeStrength(e),linkDistance:n?n(i(i({},e),{source:r,target:o}),r,o):t.linkDistance(e,r,o)||1+(u(r)+u(r)||0)/2}):elf.edgeInfos.push({})}),this.getCentripetalOptions(),t.onLayoutEnd=t.onLayoutEnd||function(){},t.run()}else t.onLayoutEnd([])},e.prototype.run=function(){var t=this,e=t.maxIteration,r=t.nodes,n=t.edges,o=t.workerEnabled,i=t.minMovement,a=t.animate,s=t.nodeMap,u=t.height;if(t.currentMinY=0,t.currentMaxY=u,r){var l=[];if(r.forEach(function(t,e){l[2*e]=0,l[2*e+1]=0}),this.defSideCoe&&"function"==typeof this.defSideCoe){var c={};n.forEach(function(t){var e=t.source,r=t.target;c[e]=c[e]||[],c[e].push(t),c[r]=c[r]||[],c[r].push(t)}),this.relatedEdges=c}var f=e;if(o||!a){for(var h=0;(t.judgingDistance>i||h<1)&&h<f;h++)h,t.runOneStep(h,l);t.onLayoutEnd(Object.values(s))}else{if("undefined"==typeof window)return;var p=0;this.timeInterval=window.setInterval(function(){r&&(t.runOneStep(p,l),(++p>=f||t.judgingDistance<i)&&(t.onLayoutEnd(Object.values(s)),window.clearInterval(t.timeInterval)))},0)}}},e.prototype.runOneStep=function(t,e){var r,n=this.nodes,o=this.edges,i=(this.nodeMap,this.monitor),a=[];if(null===n||void 0===n?void 0:n.length){this.calRepulsive(a),o&&this.calAttractive(a),this.calGravity(a),this.attractToSide(a);var s=this.interval;if(this.updateVelocity(a,e,s),this.updatePosition(e,s),null===(r=this.tick)||void 0===r||r.call(this),i)i({energy:this.calTotalEnergy(a),nodes:n,edges:o,iterations:t})}},e.prototype.calTotalEnergy=function(t){var e=this.nodes,r=this.nodeMap;if(!(null===e||void 0===e?void 0:e.length))return 0;var n=0;return e.forEach(function(e,o){var i=t[2*o],a=t[2*o+1],s=i*i+a*a,u=r[e.id].data.layout.force.mass;n+=(void 0===u?1:u)*s*.5}),n},e.prototype.calRepulsive=function(t){var e=this.nodes,r=this.nodeMap,n=this.factor,o=this.coulombDisScale;this.nodeSize;(0,u.forceNBody)(e,r,n,o*o,t)},e.prototype.calAttractive=function(t){var e=this.edges,r=this.nodeMap,n=this.nodeIdxMap,o=this.edgeInfos;this.nodeSize;e.forEach(function(e,i){var a=(0,s.getEdgeTerminal)(e,"source"),u=(0,s.getEdgeTerminal)(e,"target"),l=r[a],c=r[u];if(l&&c){var f=c.x-l.x,h=c.y-l.y;f||h||(f=.01*Math.random(),h=.01*Math.random());var p=Math.sqrt(f*f+h*h),d=f/p,y=h/p,v=o[i]||{},g=v.linkDistance,m=void 0===g?200:g,b=v.edgeStrength,w=(m-p)*(void 0===b?200:b),S=1/(l.data.layout.force.mass||1),x=1/(c.data.layout.force.mass||1),_=d*w,E=y*w,O=2*n[a],P=2*n[u];t[O]-=_*S,t[O+1]-=E*S,t[P]+=_*x,t[P+1]+=E*x}})},e.prototype.calGravity=function(t){var e,r=this.nodes,n=this.edges,o=void 0===n?[]:n,i=this.nodeMap,a=this.width,u=this.height,l=this.center,c=this.gravity,f=this.degreesMap,h=this.centripetalOptions;if(r)for(var p=r.length,d=0;d<p;d++){var y=2*d,v=i[r[d].id],g=v.data.layout.force.mass,m=void 0===g?1:g,b=0,w=0,S=c,x=f[v.id],_=x.in,E=x.out,O=x.all,P=null===(e=this.getCenter)||void 0===e?void 0:e.call(this,v,O);if(P){var k=P[0],C=P[1],T=P[2];b=v.x-k,w=v.y-C,S=T}else b=v.x-l[0],w=v.y-l[1];if(S&&(t[y]-=S*b/m,t[y+1]-=S*w/m),h){var A=h.leaf,M=h.single,j=h.others,I=h.center,N=(null===I||void 0===I?void 0:I(v,r,o,a,u))||{x:0,y:0,centerStrength:0},L=N.x,R=N.y,D=N.centerStrength;if(!(0,s.isNumber)(L)||!(0,s.isNumber)(R))continue;var B=(v.x-L)/m,F=(v.y-R)/m;if(D&&(t[y]-=D*B,t[y+1]-=D*F),0===O){var G=M(v);if(!G)continue;t[y]-=G*B,t[y+1]-=G*F;continue}if(0===_||0===E){var U=A(v,r,o);if(!U)continue;t[y]-=U*B,t[y+1]-=U*F;continue}var z=j(v);if(!z)continue;t[y]-=z*B,t[y+1]-=z*F}}},e.prototype.attractToSide=function(t){var e=this,r=e.defSideCoe,n=(e.height,e.nodes),o=e.relatedEdges,i=e.currentMinY,a=void 0===i?0:i,s=e.currentMaxY,u=void 0===s?this.height:s;r&&"function"==typeof r&&(null===n||void 0===n?void 0:n.length)&&n.forEach(function(e,n){var i=r(e,o[e.id]||[]);if(0!==i){var s=i<0?a:u,l=Math.abs(i);t[2*n+1]-=l*(e.y-s)}})},e.prototype.updateVelocity=function(t,e,r){var n=this.nodes,o=this.damping,i=this.maxSpeed;(null===n||void 0===n?void 0:n.length)&&n.forEach(function(n,a){var s=(e[2*a]+t[2*a]*r)*o||.01,u=(e[2*a+1]+t[2*a+1]*r)*o||.01,l=Math.sqrt(s*s+u*u);if(l>i){var c=i/l;s*=c,u*=c}e[2*a]=s,e[2*a+1]=u})},e.prototype.updatePosition=function(t,e){var r=this,n=r.nodes,o=r.distanceThresholdMode,i=r.nodeMap;if(null===n||void 0===n?void 0:n.length){var a=0;"max"===o?r.judgingDistance=-1/0:"min"===o&&(r.judgingDistance=1/0);var u=1/0,l=-1/0;n.forEach(function(n,c){var f=i[n.id];if((0,s.isNumber)(n.fx)&&(0,s.isNumber)(n.fy))return n.x=n.fx,n.y=n.fy,f.x=n.x,void(f.y=n.y);var h=t[2*c]*e,p=t[2*c+1]*e;n.x+=h,n.y+=p,f.x=n.x,f.y=n.y,n.y<u&&(u=n.y),n.y>l&&(l=n.y);var d=Math.sqrt(h*h+p*p);switch(o){case"max":r.judgingDistance<d&&(r.judgingDistance=d);break;case"min":r.judgingDistance>d&&(r.judgingDistance=d);break;default:a+=d}}),this.currentMinY=u,this.currentMaxY=l,o&&"mean"!==o||(r.judgingDistance=a/n.length)}else this.judgingDistance=0},e.prototype.stop=function(){this.timeInterval&&"undefined"!=typeof window&&window.clearInterval(this.timeInterval)},e.prototype.destroy=function(){this.stop(),this.tick=null,this.nodes=null,this.edges=null,this.destroyed=!0},e.prototype.getType=function(){return"force2"},e.prototype.getSameTypeLeafMap=function(){var t=this,e=t.nodeClusterBy,r=t.nodes,n=t.edges,o=t.nodeMap,i=t.degreesMap;if(null===r||void 0===r?void 0:r.length){var a={};return r.forEach(function(t,r){1===i[t.id].all&&(a[t.id]=(0,s.getCoreNodeAndRelativeLeafNodes)("leaf",t,n,e,i,o))}),a}},e}(a.Base);e.Force2Layout=c},5454:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t){this.id=t.id||0,this.rx=t.rx,this.ry=t.ry,this.fx=0,this.fy=0,this.mass=t.mass,this.degree=t.degree,this.g=t.g||0}return t.prototype.distanceTo=function(t){var e=this.rx-t.rx,r=this.ry-t.ry;return Math.hypot(e,r)},t.prototype.setPos=function(t,e){this.rx=t,this.ry=e},t.prototype.resetForce=function(){this.fx=0,this.fy=0},t.prototype.addForce=function(t){var e=t.rx-this.rx,r=t.ry-this.ry,n=Math.hypot(e,r);n=n<1e-4?1e-4:n;var o=this.g*(this.degree+1)*(t.degree+1)/n;this.fx+=o*e/n,this.fy+=o*r/n},t.prototype.in=function(t){return t.contains(this.rx,this.ry)},t.prototype.add=function(e){var r=this.mass+e.mass;return new t({rx:(this.rx*this.mass+e.rx*e.mass)/r,ry:(this.ry*this.mass+e.ry*e.mass)/r,mass:r,degree:this.degree+e.degree})},t}();e.default=r},432:function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.ForceAtlas2Layout=void 0;var a=r(9284),s=r(8652),u=i(r(5454)),l=i(r(9785)),c=i(r(9122)),f=function(t){function e(e){var r=t.call(this)||this;return r.center=[0,0],r.width=300,r.height=300,r.nodes=[],r.edges=[],r.kr=5,r.kg=1,r.mode="normal",r.preventOverlap=!1,r.dissuadeHubs=!1,r.barnesHut=void 0,r.maxIteration=0,r.ks=.1,r.ksmax=10,r.tao=.1,r.onLayoutEnd=function(){},r.prune=void 0,r.updateCfg(e),r}return o(e,t),e.prototype.getDefaultCfg=function(){return{}},e.prototype.execute=function(){var t=this.nodes,e=this.onLayoutEnd,r=this.prune,n=this.maxIteration;this.width||"undefined"==typeof window||(this.width=window.innerWidth),this.height||"undefined"==typeof window||(this.height=window.innerHeight);for(var o=[],i=t.length,a=0;a<i;a+=1){var u=t[a],l=10,c=10;(0,s.isNumber)(u.size)&&(l=u.size,c=u.size),(0,s.isArray)(u.size)?(isNaN(u.size[0])||(l=u.size[0]),isNaN(u.size[1])||(c=u.size[1])):(0,s.isObject)(u.size)&&(l=u.size.width,c=u.size.height),this.getWidth&&!isNaN(this.getWidth(u))&&(c=this.getWidth(u)),this.getHeight&&!isNaN(this.getHeight(u))&&(l=this.getHeight(u));var f=Math.max(l,c);o.push(f)}void 0===this.barnesHut&&i>250&&(this.barnesHut=!0),void 0===this.prune&&i>100&&(this.prune=!0),0!==this.maxIteration||this.prune?0===this.maxIteration&&r&&(n=100,i<=200&&i>100?n=500:i>200&&(n=950),this.maxIteration=n):(n=250,i<=200&&i>100?n=1e3:i>200&&(n=1200),this.maxIteration=n),this.kr||(this.kr=50,i>100&&i<=500?this.kr=20:i>500&&(this.kr=1)),this.kg||(this.kg=20,i>100&&i<=500?this.kg=10:i>500&&(this.kg=1)),this.nodes=this.updateNodesByForces(o),e()},e.prototype.updateNodesByForces=function(t){for(var e=this.edges,r=this.maxIteration,n=this.nodes,o=e.filter(function(t){return(0,s.getEdgeTerminal)(t,"source")!==(0,s.getEdgeTerminal)(t,"target")}),i=n.length,a=o.length,u=[],l={},c={},f=[],h=0;h<i;h+=1)l[n[h].id]=h,u[h]=0,(void 0===n[h].x||isNaN(n[h].x))&&(n[h].x=1e3*Math.random()),(void 0===n[h].y||isNaN(n[h].y))&&(n[h].y=1e3*Math.random()),f.push({x:n[h].x,y:n[h].y});for(h=0;h<a;h+=1){for(var p=void 0,d=void 0,y=0,v=0,g=0;g<i;g+=1){var m=(0,s.getEdgeTerminal)(o[h],"source"),b=(0,s.getEdgeTerminal)(o[h],"target");n[g].id===m?(p=n[g],y=g):n[g].id===b&&(d=n[g],v=g),c[h]={sourceIdx:y,targetIdx:v}}p&&(u[l[p.id]]+=1),d&&(u[l[d.id]]+=1)}var w=r;if(n=this.iterate(w,l,c,a,u,t),this.prune){for(g=0;g<a;g+=1)u[c[g].sourceIdx]<=1?(n[c[g].sourceIdx].x=n[c[g].targetIdx].x,n[c[g].sourceIdx].y=n[c[g].targetIdx].y):u[c[g].targetIdx]<=1&&(n[c[g].targetIdx].x=n[c[g].sourceIdx].x,n[c[g].targetIdx].y=n[c[g].sourceIdx].y);this.prune=!1,this.barnesHut=!1,w=100,n=this.iterate(w,l,c,a,u,t)}return n},e.prototype.iterate=function(t,e,r,n,o,i){for(var a=this.nodes,s=this.kr,l=this.preventOverlap,c=this.barnesHut,f=a.length,h=0,p=t,d=[],y=[],v=[],g=0;g<f;g+=1)if(d[2*g]=0,d[2*g+1]=0,c){var m={id:g,rx:a[g].x,ry:a[g].y,mass:1,g:s,degree:o[g]};v[g]=new u.default(m)}for(;p>0;){for(g=0;g<f;g+=1)y[2*g]=d[2*g],y[2*g+1]=d[2*g+1],d[2*g]=0,d[2*g+1]=0;d=this.getAttrForces(p,50,n,e,r,o,i,d),d=c&&(l&&p>50||!l)?this.getOptRepGraForces(d,v,o):this.getRepGraForces(p,50,d,100,i,o);var b=this.updatePos(d,y,h,o);a=b.nodes,h=b.sg,p--,this.tick&&this.tick()}return a},e.prototype.getAttrForces=function(t,e,r,n,o,i,a,s){for(var u=this.nodes,l=this.preventOverlap,c=this.dissuadeHubs,f=this.mode,h=this.prune,p=0;p<r;p+=1){var d=u[o[p].sourceIdx],y=o[p].sourceIdx,v=u[o[p].targetIdx],g=o[p].targetIdx;if(!h||!(i[y]<=1||i[g]<=1)){var m=[v.x-d.x,v.y-d.y],b=Math.hypot(m[0],m[1]);b=b<1e-4?1e-4:b,m[0]=m[0]/b,m[1]=m[1]/b,l&&t<e&&(b=b-a[y]-a[g]);var w=b,S=w;"linlog"===f&&(S=w=Math.log(1+b)),c&&(w=b/i[y],S=b/i[g]),l&&t<e&&b<=0?(w=0,S=0):l&&t<e&&b>0&&(w=b,S=b),s[2*n[d.id]]+=w*m[0],s[2*n[v.id]]-=S*m[0],s[2*n[d.id]+1]+=w*m[1],s[2*n[v.id]+1]-=S*m[1]}}return s},e.prototype.getRepGraForces=function(t,e,r,n,o,i){for(var a=this.nodes,s=this.preventOverlap,u=this.kr,l=this.kg,c=this.center,f=this.prune,h=a.length,p=0;p<h;p+=1){for(var d=p+1;d<h;d+=1)if(!f||!(i[p]<=1||i[d]<=1)){var y=[a[d].x-a[p].x,a[d].y-a[p].y],v=Math.hypot(y[0],y[1]);v=v<1e-4?1e-4:v,y[0]=y[0]/v,y[1]=y[1]/v,s&&t<e&&(v=v-o[p]-o[d]);var g=u*(i[p]+1)*(i[d]+1)/v;s&&t<e&&v<0?g=n*(i[p]+1)*(i[d]+1):s&&t<e&&0===v?g=0:s&&t<e&&v>0&&(g=u*(i[p]+1)*(i[d]+1)/v),r[2*p]-=g*y[0],r[2*d]+=g*y[0],r[2*p+1]-=g*y[1],r[2*d+1]+=g*y[1]}var m=[a[p].x-c[0],a[p].y-c[1]],b=Math.hypot(m[0],m[1]);m[0]=m[0]/b,m[1]=m[1]/b;var w=l*(i[p]+1);r[2*p]-=w*m[0],r[2*p+1]-=w*m[1]}return r},e.prototype.getOptRepGraForces=function(t,e,r){for(var n=this.nodes,o=this.kg,i=this.center,a=this.prune,s=n.length,u=9e10,f=-9e10,h=9e10,p=-9e10,d=0;d<s;d+=1)a&&r[d]<=1||(e[d].setPos(n[d].x,n[d].y),n[d].x>=f&&(f=n[d].x),n[d].x<=u&&(u=n[d].x),n[d].y>=p&&(p=n[d].y),n[d].y<=h&&(h=n[d].y));var y={xmid:(f+u)/2,ymid:(p+h)/2,length:Math.max(f-u,p-h),massCenter:i,mass:s},v=new l.default(y),g=new c.default(v);for(d=0;d<s;d+=1)a&&r[d]<=1||e[d].in(v)&&g.insert(e[d]);for(d=0;d<s;d+=1)if(!(a&&r[d]<=1)){e[d].resetForce(),g.updateForce(e[d]),t[2*d]-=e[d].fx,t[2*d+1]-=e[d].fy;var m=[n[d].x-i[0],n[d].y-i[1]],b=Math.hypot(m[0],m[1]);b=b<1e-4?1e-4:b,m[0]=m[0]/b,m[1]=m[1]/b;var w=o*(r[d]+1);t[2*d]-=w*m[0],t[2*d+1]-=w*m[1]}return t},e.prototype.updatePos=function(t,e,r,n){for(var o=this.nodes,i=this.ks,a=this.tao,u=this.prune,l=this.ksmax,c=o.length,f=[],h=[],p=0,d=0,y=0;y<c;y+=1)if(!(u&&n[y]<=1)){var v=[t[2*y]-e[2*y],t[2*y+1]-e[2*y+1]],g=Math.hypot(v[0],v[1]),m=[t[2*y]+e[2*y],t[2*y+1]+e[2*y+1]],b=Math.hypot(m[0],m[1]);f[y]=g,h[y]=b/2,p+=(n[y]+1)*f[y],d+=(n[y]+1)*h[y]}var w=r;r=a*d/p,0!==w&&(r=r>1.5*w?1.5*w:r);for(y=0;y<c;y+=1)if(!(u&&n[y]<=1||(0,s.isNumber)(o[y].fx)&&(0,s.isNumber)(o[y].fy))){var S=i*r/(1+r*Math.sqrt(f[y])),x=Math.hypot(t[2*y],t[2*y+1]),_=l/(x=x<1e-4?1e-4:x),E=(S=S>_?_:S)*t[2*y],O=S*t[2*y+1];o[y].x+=E,o[y].y+=O}return{nodes:o,sg:r}},e}(a.Base);e.ForceAtlas2Layout=f},9785:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t){this.xmid=t.xmid,this.ymid=t.ymid,this.length=t.length,this.massCenter=t.massCenter||[0,0],this.mass=t.mass||1}return t.prototype.getLength=function(){return this.length},t.prototype.contains=function(t,e){var r=this.length/2;return t<=this.xmid+r&&t>=this.xmid-r&&e<=this.ymid+r&&e>=this.ymid-r},t.prototype.NW=function(){return new t({xmid:this.xmid-this.length/4,ymid:this.ymid+this.length/4,length:this.length/2})},t.prototype.NE=function(){return new t({xmid:this.xmid+this.length/4,ymid:this.ymid+this.length/4,length:this.length/2})},t.prototype.SW=function(){return new t({xmid:this.xmid-this.length/4,ymid:this.ymid-this.length/4,length:this.length/2})},t.prototype.SE=function(){return new t({xmid:this.xmid+this.length/4,ymid:this.ymid-this.length/4,length:this.length/2})},t}();e.default=r},9122:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t){this.body=null,this.quad=null,this.NW=null,this.NE=null,this.SW=null,this.SE=null,this.theta=.5,null!=t&&(this.quad=t)}return t.prototype.insert=function(e){null!=this.body?this._isExternal()?(this.quad&&(this.NW=new t(this.quad.NW()),this.NE=new t(this.quad.NE()),this.SW=new t(this.quad.SW()),this.SE=new t(this.quad.SE())),this._putBody(this.body),this._putBody(e),this.body=this.body.add(e)):(this.body=this.body.add(e),this._putBody(e)):this.body=e},t.prototype._putBody=function(t){this.quad&&(t.in(this.quad.NW())&&this.NW?this.NW.insert(t):t.in(this.quad.NE())&&this.NE?this.NE.insert(t):t.in(this.quad.SW())&&this.SW?this.SW.insert(t):t.in(this.quad.SE())&&this.SE&&this.SE.insert(t))},t.prototype._isExternal=function(){return null==this.NW&&null==this.NE&&null==this.SW&&null==this.SE},t.prototype.updateForce=function(t){null!=this.body&&t!==this.body&&(this._isExternal()?t.addForce(this.body):(this.quad?this.quad.getLength():0)/this.body.distanceTo(t)<this.theta?t.addForce(this.body):(this.NW&&this.NW.updateForce(t),this.NE&&this.NE.updateForce(t),this.SW&&this.SW.updateForce(t),this.SE&&this.SE.updateForce(t)))},t}();e.default=r},556:function(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);o&&("get"in o?e.__esModule:!o.writable&&!o.configurable)||(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&n(e,t,r);return o(e,t),e};Object.defineProperty(e,"__esModule",{value:!0});var a=i(r(918)),s=r(8652);e.default=function(){function t(t){return function(){return t}}var e,r=function(t){return t.cluster},n=t(1),o=t(-1),i=t(100),u=t(.1),l=[0,0],c=[],f={},h=[],p=100,d=100,y={none:{x:0,y:0}},v=[],g="force",m=!0,b=.1;function w(t){if(!m)return w;e.tick(),x();for(var n=0,o=c.length,i=void 0,a=t*b;n<o;++n)(i=c[n]).vx+=(y[r(i)].x-i.x)*a,i.vy+=(y[r(i)].y-i.y)*a}function S(){c&&function(){if(c&&c.length){if(void 0===r(c[0]))throw Error("Couldnt find the grouping attribute for the nodes. Make sure to set it up with forceInABox.groupBy('clusterAttr') before calling .links()");var t,l,y,g,m,b,w,S=(y=[],g=[],m={},b={},w=[],b=function(t){var e={};return t.forEach(function(t){var n=r(t);e[n]||(e[n]={count:0,sumforceNodeSize:0})}),t.forEach(function(t){var o=r(t),i=n(t),a=e[o];a.count=a.count+1,a.sumforceNodeSize=a.sumforceNodeSize+Math.PI*(i*i)*1.3,e[o]=a}),e}(c),t={},l=[],h.forEach(function(e){var n=function(t){var e=(0,s.getEdgeTerminal)(t,"source"),n=(0,s.getEdgeTerminal)(t,"target"),o=r(f[e]),i=r(f[n]);return o<=i?"".concat(o,"~").concat(i):"".concat(i,"~").concat(o)}(e),o=0;void 0!==t[n]&&(o=t[n]),o+=1,t[n]=o}),Object.entries(t).forEach(function(t){var e=t[0],r=t[1],n=e.split("~")[0],o=e.split("~")[1];void 0!==n&&void 0!==o&&l.push({source:n,target:o,count:r})}),w=l,Object.keys(b).forEach(function(t,e){var r=b[t];y.push({id:t,size:r.count,r:Math.sqrt(r.sumforceNodeSize/Math.PI)}),m[t]=e}),w.forEach(function(t){var e=(0,s.getEdgeTerminal)(t,"source"),r=(0,s.getEdgeTerminal)(t,"target"),n=m[e],o=m[r];void 0!==n&&void 0!==o&&g.push({source:n,target:o,count:t.count})}),{nodes:y,links:g});e=a.forceSimulation(S.nodes).force("x",a.forceX(p).strength(.1)).force("y",a.forceY(d).strength(.1)).force("collide",a.forceCollide(function(t){return t.r}).iterations(4)).force("charge",a.forceManyBody().strength(o)).force("links",a.forceLink(S.nodes.length?S.links:[]).distance(i).strength(u)),v=e.nodes(),x()}}()}function x(){return y={none:{x:0,y:0}},v.forEach(function(t){y[t.id]={x:t.x-l[0],y:t.y-l[1]}}),y}return w.initialize=function(t){c=t,S()},w.template=function(t){return arguments.length?(g=t,S(),w):g},w.groupBy=function(t){return arguments.length?"string"==typeof t?(r=function(e){return e[t]},w):(r=t,w):r},w.enableGrouping=function(t){return arguments.length?(m=t,w):m},w.strength=function(t){return arguments.length?(b=t,w):b},w.centerX=function(t){return arguments.length?(p=t,w):p},w.centerY=function(t){return arguments.length?(d=t,w):d},w.nodes=function(t){return arguments.length?(function(t){f={},t.forEach(function(t){f[t.id]=t})}(t||[]),c=t||[],w):c},w.links=function(t){return arguments.length?(h=t||[],S(),w):h},w.forceNodeSize=function(e){return arguments.length?(n="function"==typeof e?e:t(+e),S(),w):n},w.nodeSize=w.forceNodeSize,w.forceCharge=function(e){return arguments.length?(o="function"==typeof e?e:t(+e),S(),w):o},w.forceLinkDistance=function(e){return arguments.length?(i="function"==typeof e?e:t(+e),S(),w):i},w.forceLinkStrength=function(e){return arguments.length?(u="function"==typeof e?e:t(+e),S(),w):u},w.offset=function(t){return arguments.length?(l=t,w):l},w.getFocis=x,w}},461:function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);o&&("get"in o?e.__esModule:!o.writable&&!o.configurable)||(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),a=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),s=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&i(e,t,r);return a(e,t),e},u=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.ForceLayout=void 0;var l=s(r(918)),c=u(r(556)),f=r(8652),h=r(9284),p=r(4587),d=function(t){function e(e){var r=t.call(this)||this;return r.center=[0,0],r.nodeStrength=null,r.edgeStrength=null,r.preventOverlap=!1,r.clusterNodeStrength=null,r.clusterEdgeStrength=null,r.clusterEdgeDistance=null,r.clusterNodeSize=null,r.clusterFociStrength=null,r.linkDistance=50,r.alphaDecay=.028,r.alphaMin=.001,r.alpha=.3,r.collideStrength=1,r.workerEnabled=!1,r.tick=function(){},r.onLayoutEnd=function(){},r.ticking=void 0,e&&r.updateCfg(e),r}return o(e,t),e.prototype.getDefaultCfg=function(){return{center:[0,0],nodeStrength:null,edgeStrength:null,preventOverlap:!1,nodeSize:void 0,nodeSpacing:void 0,linkDistance:50,forceSimulation:null,alphaDecay:.028,alphaMin:.001,alpha:.3,collideStrength:1,clustering:!1,clusterNodeStrength:-1,clusterEdgeStrength:.1,clusterEdgeDistance:100,clusterFociStrength:.8,clusterNodeSize:10,tick:function(){},onLayoutEnd:function(){},workerEnabled:!1}},e.prototype.init=function(t){this.nodes=t.nodes||[];var e=t.edges||[];this.edges=e.map(function(t){var e={},r=["targetNode","sourceNode","startPoint","endPoint"];return Object.keys(t).forEach(function(n){r.indexOf(n)>-1||(e[n]=t[n])}),e}),this.ticking=!1},e.prototype.execute=function(t){var e=this,r=e.nodes,n=e.edges;if(!e.ticking){var o=e.forceSimulation,i=e.alphaMin,a=e.alphaDecay,s=e.alpha;if(o){if(t)if(e.clustering&&e.clusterForce&&(e.clusterForce.nodes(r),e.clusterForce.links(n)),o.nodes(r),n&&e.edgeForce)e.edgeForce.links(n);else if(n&&!e.edgeForce){h=l.forceLink().id(function(t){return t.id}).links(n);e.edgeStrength&&h.strength(e.edgeStrength),e.linkDistance&&h.distance(e.linkDistance),e.edgeForce=h,o.force("link",h)}e.preventOverlap&&e.overlapProcess(o),o.alpha(s).restart(),this.ticking=!0}else try{var u=l.forceManyBody();if(e.nodeStrength&&u.strength(e.nodeStrength),o=l.forceSimulation().nodes(r),e.clustering){var f=(0,c.default)();f.centerX(e.center[0]).centerY(e.center[1]).template("force").strength(e.clusterFociStrength),n&&f.links(n),r&&f.nodes(r),f.forceLinkDistance(e.clusterEdgeDistance).forceLinkStrength(e.clusterEdgeStrength).forceCharge(e.clusterNodeStrength).forceNodeSize(e.clusterNodeSize),e.clusterForce=f,o.force("group",f)}if(o.force("center",l.forceCenter(e.center[0],e.center[1])).force("charge",u).alpha(s).alphaDecay(a).alphaMin(i),e.preventOverlap&&e.overlapProcess(o),n){var h=l.forceLink().id(function(t){return t.id}).links(n);e.edgeStrength&&h.strength(e.edgeStrength),e.linkDistance&&h.distance(e.linkDistance),e.edgeForce=h,o.force("link",h)}if(e.workerEnabled&&!y()&&(e.workerEnabled=!1,console.warn("workerEnabled option is only supported when running in web worker.")),e.workerEnabled){o.stop();for(var d=function(t){var e=t.alphaMin(),r=t.alphaTarget(),n=t.alpha(),o=Math.log((e-r)/(n-r))/Math.log(1-t.alphaDecay());return Math.ceil(o)}(o),v=1;v<=d;v++)o.tick(),postMessage({nodes:r,currentTick:v,totalTicks:d,type:p.LAYOUT_MESSAGE.TICK},void 0);e.ticking=!1}else o.on("tick",function(){e.tick()}).on("end",function(){e.ticking=!1,e.onLayoutEnd&&e.onLayoutEnd()}),e.ticking=!0;e.forceSimulation=o,e.ticking=!0}catch(t){e.ticking=!1,console.warn(t)}}},e.prototype.overlapProcess=function(t){var e,r,n=this.nodeSize,o=this.nodeSpacing,i=this.collideStrength;if(r=(0,f.isNumber)(o)?function(){return o}:(0,f.isFunction)(o)?o:function(){return 0},n)if((0,f.isFunction)(n))e=function(t){return n(t)+r(t)};else if((0,f.isArray)(n)){var a=(n[0]>n[1]?n[0]:n[1])/2;e=function(t){return a+r(t)}}else if((0,f.isNumber)(n)){var s=n/2;e=function(t){return s+r(t)}}else e=function(){return 10};else e=function(t){return t.size?(0,f.isArray)(t.size)?(t.size[0]>t.size[1]?t.size[0]:t.size[1])/2+r(t):(0,f.isObject)(t.size)?(t.size.width>t.size.height?t.size.width:t.size.height)/2+r(t):t.size/2+r(t):10+r(t)};t.force("collisionForce",l.forceCollide(e).strength(i))},e.prototype.updateCfg=function(t){this.ticking&&(this.forceSimulation.stop(),this.ticking=!1),this.forceSimulation=null,Object.assign(this,t)},e.prototype.destroy=function(){this.ticking&&(this.forceSimulation.stop(),this.ticking=!1),this.nodes=null,this.edges=null,this.destroyed=!0},e}(h.Base);function y(){return"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope}e.ForceLayout=d},1878:function(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);o&&("get"in o?e.__esModule:!o.writable&&!o.configurable)||(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),o=this&&this.__exportStar||function(t,e){for(var r in t)"default"===r||Object.prototype.hasOwnProperty.call(e,r)||n(e,t,r)};Object.defineProperty(e,"__esModule",{value:!0}),o(r(461),e)},6865:function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.FruchtermanLayout=void 0;var i=r(9284),a=r(8652),s=function(t){function e(e){var r=t.call(this)||this;return r.maxIteration=1e3,r.workerEnabled=!1,r.gravity=10,r.speed=5,r.clustering=!1,r.clusterGravity=10,r.nodes=[],r.edges=[],r.width=300,r.height=300,r.nodeMap={},r.nodeIdxMap={},r.onLayoutEnd=function(){},r.tick=function(){},r.animate=!0,r.updateCfg(e),r}return o(e,t),e.prototype.getDefaultCfg=function(){return{maxIteration:1e3,gravity:10,speed:1,clustering:!1,clusterGravity:10,animate:!0}},e.prototype.execute=function(){var t,e,r=this,n=this.nodes;if(void 0!==this.timeInterval&&"undefined"!=typeof window&&window.clearInterval(this.timeInterval),n&&0!==n.length){this.width||"undefined"==typeof window||(this.width=window.innerWidth),this.height||"undefined"==typeof window||(this.height=window.innerHeight),this.center||(this.center=[this.width/2,this.height/2]);var o=this.center;if(1===n.length)return n[0].x=o[0],n[0].y=o[1],void(null===(e=this.onLayoutEnd)||void 0===e||e.call(this));var i={},s={};return n.forEach(function(t,e){(0,a.isNumber)(t.x)||(t.x=Math.random()*r.width),(0,a.isNumber)(t.y)||(t.y=Math.random()*r.height),i[t.id]=t,s[t.id]=e}),this.nodeMap=i,this.nodeIdxMap=s,this.run()}null===(t=this.onLayoutEnd)||void 0===t||t.call(this)},e.prototype.run=function(){var t,e=this,r=e.nodes;if(r){var n=e.edges,o=e.maxIteration,i=e.workerEnabled,a=e.clustering,s=e.animate,u={};if(a&&r.forEach(function(t){void 0===u[t.cluster]&&(u[t.cluster]={name:t.cluster,cx:0,cy:0,count:0})}),i||!s){for(var l=0;l<o;l++)e.runOneStep(u);null===(t=e.onLayoutEnd)||void 0===t||t.call(e)}else{if("undefined"==typeof window)return;var c=0;this.timeInterval=window.setInterval(function(){var t;e.runOneStep(u),++c>=o&&(null===(t=e.onLayoutEnd)||void 0===t||t.call(e),window.clearInterval(e.timeInterval))},0)}return{nodes:r,edges:n}}},e.prototype.runOneStep=function(t){var e,r=this.nodes;if(r){var n=this.edges,o=this.center,i=this.gravity,s=this.speed,u=this.clustering,l=this.height*this.width,c=Math.sqrt(l)/10,f=l/(r.length+1),h=Math.sqrt(f),p=[];if(r.forEach(function(t,e){p[e]={x:0,y:0}}),this.applyCalculate(r,n,p,h,f),u){for(var d in t)t[d].cx=0,t[d].cy=0,t[d].count=0;for(var d in r.forEach(function(e){var r=t[e.cluster];(0,a.isNumber)(e.x)&&(r.cx+=e.x),(0,a.isNumber)(e.y)&&(r.cy+=e.y),r.count++}),t)t[d].cx/=t[d].count,t[d].cy/=t[d].count;var y=this.clusterGravity||i;r.forEach(function(e,r){if((0,a.isNumber)(e.x)&&(0,a.isNumber)(e.y)){var n=t[e.cluster],o=Math.sqrt((e.x-n.cx)*(e.x-n.cx)+(e.y-n.cy)*(e.y-n.cy)),i=h*y;p[r].x-=i*(e.x-n.cx)/o,p[r].y-=i*(e.y-n.cy)/o}})}r.forEach(function(t,e){if((0,a.isNumber)(t.x)&&(0,a.isNumber)(t.y)){var r=.01*h*i;p[e].x-=r*(t.x-o[0]),p[e].y-=r*(t.y-o[1])}}),r.forEach(function(t,e){if((0,a.isNumber)(t.fx)&&(0,a.isNumber)(t.fy))return t.x=t.fx,void(t.y=t.fy);if((0,a.isNumber)(t.x)&&(0,a.isNumber)(t.y)){var r=Math.sqrt(p[e].x*p[e].x+p[e].y*p[e].y);if(r>0){var n=Math.min(c*(s/800),r);t.x+=p[e].x/r*n,t.y+=p[e].y/r*n}}}),null===(e=this.tick)||void 0===e||e.call(this)}},e.prototype.applyCalculate=function(t,e,r,n,o){this.calRepulsive(t,r,o),e&&this.calAttractive(e,r,n)},e.prototype.calRepulsive=function(t,e,r){t.forEach(function(n,o){e[o]={x:0,y:0},t.forEach(function(t,i){if(o!==i&&(0,a.isNumber)(n.x)&&(0,a.isNumber)(t.x)&&(0,a.isNumber)(n.y)&&(0,a.isNumber)(t.y)){var s=n.x-t.x,u=n.y-t.y,l=s*s+u*u;if(0===l){l=1;var c=o>i?1:-1;s=.01*c,u=.01*c}var f=r/l;e[o].x+=s*f,e[o].y+=u*f}})})},e.prototype.calAttractive=function(t,e,r){var n=this;t.forEach(function(t){var o=(0,a.getEdgeTerminal)(t,"source"),i=(0,a.getEdgeTerminal)(t,"target");if(o&&i){var s=n.nodeIdxMap[o],u=n.nodeIdxMap[i];if(s!==u){var l=n.nodeMap[o],c=n.nodeMap[i];if((0,a.isNumber)(c.x)&&(0,a.isNumber)(l.x)&&(0,a.isNumber)(c.y)&&(0,a.isNumber)(l.y)){var f=c.x-l.x,h=c.y-l.y,p=Math.sqrt(f*f+h*h),d=p*p/r;e[u].x-=f/p*d,e[u].y-=h/p*d,e[s].x+=f/p*d,e[s].y+=h/p*d}}}})},e.prototype.stop=function(){this.timeInterval&&"undefined"!=typeof window&&window.clearInterval(this.timeInterval)},e.prototype.destroy=function(){this.stop(),this.tick=null,this.nodes=null,this.edges=null,this.destroyed=!0},e.prototype.getType=function(){return"fruchterman"},e}(i.Base);e.FruchtermanLayout=s},6007:function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.GForceLayout=void 0;var i=r(9284),a=r(8652),s=function(t,e){return t?(0,a.isNumber)(t)?function(e){return t}:t:function(t){return e||1}},u=function(t){function e(e){var r=t.call(this)||this;return r.maxIteration=500,r.workerEnabled=!1,r.edgeStrength=200,r.nodeStrength=1e3,r.coulombDisScale=.005,r.damping=.9,r.maxSpeed=1e3,r.minMovement=.5,r.interval=.02,r.factor=1,r.linkDistance=1,r.gravity=10,r.preventOverlap=!0,r.collideStrength=1,r.tick=function(){},r.nodes=[],r.edges=[],r.width=300,r.height=300,r.nodeMap={},r.nodeIdxMap={},r.animate=!0,r.updateCfg(e),r}return o(e,t),e.prototype.getDefaultCfg=function(){return{maxIteration:500,gravity:10,enableTick:!0,animate:!0}},e.prototype.execute=function(){var t,e,r=this,n=r.nodes;if(void 0!==r.timeInterval&&"undefined"!=typeof window&&window.clearInterval(r.timeInterval),n&&0!==n.length){r.width||"undefined"==typeof window||(r.width=window.innerWidth),r.height||"undefined"==typeof window||(r.height=window.innerHeight),r.center||(r.center=[r.width/2,r.height/2]);var o=r.center;if(1===n.length)return n[0].x=o[0],n[0].y=o[1],void(null===(e=r.onLayoutEnd)||void 0===e||e.call(r));var i={},u={};n.forEach(function(t,e){(0,a.isNumber)(t.x)||(t.x=Math.random()*r.width),(0,a.isNumber)(t.y)||(t.y=Math.random()*r.height),i[t.id]=t,u[t.id]=e}),r.nodeMap=i,r.nodeIdxMap=u,r.linkDistance=s(r.linkDistance,1),r.nodeStrength=s(r.nodeStrength,1),r.edgeStrength=s(r.edgeStrength,1);var l,c=r.nodeSize;if(r.preventOverlap){var f,h=r.nodeSpacing;f=(0,a.isNumber)(h)?function(){return h}:(0,a.isFunction)(h)?h:function(){return 0},l=c?(0,a.isArray)(c)?function(t){return Math.max(c[0],c[1])+f(t)}:function(t){return c+f(t)}:function(t){return t.size?(0,a.isArray)(t.size)?Math.max(t.size[0],t.size[1])+f(t):(0,a.isObject)(t.size)?Math.max(t.size.width,t.size.height)+f(t):t.size+f(t):10+f(t)}}r.nodeSize=l;var p=r.edges;r.degrees=(0,a.getDegree)(n.length,r.nodeIdxMap,p),r.getMass||(r.getMass=function(t){return t.mass||r.degrees[r.nodeIdxMap[t.id]].all||1}),r.run()}else null===(t=r.onLayoutEnd)||void 0===t||t.call(r)},e.prototype.run=function(){var t,e=this,r=e.maxIteration,n=e.nodes,o=e.workerEnabled,i=e.minMovement,a=e.animate;if(n)if(o||!a){for(var s=0;s<r;s++){var u=e.runOneStep(s);if(e.reachMoveThreshold(n,u,i))break}null===(t=e.onLayoutEnd)||void 0===t||t.call(e)}else{if("undefined"==typeof window)return;var l=0;this.timeInterval=window.setInterval(function(){var t,o;if(n){var a=e.runOneStep(l)||[];e.reachMoveThreshold(n,a,i)&&(null===(t=e.onLayoutEnd)||void 0===t||t.call(e),window.clearInterval(e.timeInterval)),++l>=r&&(null===(o=e.onLayoutEnd)||void 0===o||o.call(e),window.clearInterval(e.timeInterval))}},0)}},e.prototype.reachMoveThreshold=function(t,e,r){var n=0;return t.forEach(function(t,r){var o=t.x-e[r].x,i=t.y-e[r].y;n+=Math.sqrt(o*o+i*i)}),(n/=t.length)<r},e.prototype.runOneStep=function(t){var e,r=this.nodes,n=this.edges,o=[],i=[];if(r){r.forEach(function(t,e){o[2*e]=0,o[2*e+1]=0,i[2*e]=0,i[2*e+1]=0}),this.calRepulsive(o,r),n&&this.calAttractive(o,n),this.calGravity(o,r);var a=Math.max(.02,this.interval-.002*t);this.updateVelocity(o,i,a,r);var s=[];return r.forEach(function(t){s.push({x:t.x,y:t.y})}),this.updatePosition(i,a,r),null===(e=this.tick)||void 0===e||e.call(this),s}},e.prototype.calRepulsive=function(t,e){var r=this.getMass,n=this.factor,o=this.coulombDisScale,i=this.preventOverlap,a=this.collideStrength,s=void 0===a?1:a,u=this.nodeStrength,l=this.nodeSize;e.forEach(function(a,c){var f=r?r(a):1;e.forEach(function(e,h){if(!(c>=h)){var p=a.x-e.x,d=a.y-e.y;0===p&&0===d&&(p=.01*Math.random(),d=.01*Math.random());var y=p*p+d*d,v=Math.sqrt(y),g=(v+.1)*o,m=p/v,b=d/v,w=.5*(u(a)+u(e))*n/(g*g),S=r?r(e):1;if(t[2*c]+=m*w,t[2*c+1]+=b*w,t[2*h]-=m*w,t[2*h+1]-=b*w,i&&(l(a)+l(e))/2>v){var x=s*(u(a)+u(e))*.5/y;t[2*c]+=m*x/f,t[2*c+1]+=b*x/f,t[2*h]-=m*x/S,t[2*h+1]-=b*x/S}}})})},e.prototype.calAttractive=function(t,e){var r=this.nodeMap,n=this.nodeIdxMap,o=this.linkDistance,i=this.edgeStrength,s=this.nodeSize,u=this.getMass;e.forEach(function(e,l){var c=(0,a.getEdgeTerminal)(e,"source"),f=(0,a.getEdgeTerminal)(e,"target"),h=r[c],p=r[f],d=p.x-h.x,y=p.y-h.y;0===d&&0===y&&(d=.01*Math.random(),y=.01*Math.random());var v=Math.sqrt(d*d+y*y),g=d/v,m=y/v,b=((o(e,h,p)||1+(s(h)+s(p)||0)/2)-v)*i(e),w=n[c],S=n[f],x=u?u(h):1,_=u?u(p):1;t[2*w]-=g*b/x,t[2*w+1]-=m*b/x,t[2*S]+=g*b/_,t[2*S+1]+=m*b/_})},e.prototype.calGravity=function(t,e){for(var r=this.center,n=this.gravity,o=this.degrees,i=e.length,s=0;s<i;s++){var u=e[s],l=u.x-r[0],c=u.y-r[1],f=n;if(this.getCenter){var h=this.getCenter(u,o[s].all);h&&(0,a.isNumber)(h[0])&&(0,a.isNumber)(h[1])&&(0,a.isNumber)(h[2])&&(l=u.x-h[0],c=u.y-h[1],f=h[2])}f&&(t[2*s]-=f*l,t[2*s+1]-=f*c)}},e.prototype.updateVelocity=function(t,e,r,n){var o=this,i=r*o.damping;n.forEach(function(r,n){var a=t[2*n]*i||.01,s=t[2*n+1]*i||.01,u=Math.sqrt(a*a+s*s);if(u>o.maxSpeed){var l=o.maxSpeed/u;a*=l,s*=l}e[2*n]=a,e[2*n+1]=s})},e.prototype.updatePosition=function(t,e,r){r.forEach(function(r,n){if((0,a.isNumber)(r.fx)&&(0,a.isNumber)(r.fy))return r.x=r.fx,void(r.y=r.fy);var o=t[2*n]*e,i=t[2*n+1]*e;r.x+=o,r.y+=i})},e.prototype.stop=function(){this.timeInterval&&"undefined"!=typeof window&&window.clearInterval(this.timeInterval)},e.prototype.destroy=function(){this.stop(),this.tick=null,this.nodes=null,this.edges=null,this.destroyed=!0},e.prototype.getType=function(){return"gForce"},e}(i.Base);e.GForceLayout=u},9720:function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))(function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function s(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r(function(t){t(e)})).then(a,s)}u((n=n.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(u){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(r=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===s[0]||2===s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],n=0}finally{r=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.FruchtermanGPULayout=void 0;var s=r(9284),u=r(8652),l=r(2587),c=r(446),f=r(2444),h=r(4587),p=function(t){function e(e){var r=t.call(this)||this;return r.maxIteration=1e3,r.gravity=10,r.speed=1,r.clustering=!1,r.clusterField="cluster",r.clusterGravity=10,r.workerEnabled=!1,r.nodes=[],r.edges=[],r.width=300,r.height=300,r.nodeMap={},r.nodeIdxMap={},r.updateCfg(e),r}return o(e,t),e.prototype.getDefaultCfg=function(){return{maxIteration:1e3,gravity:10,speed:1,clustering:!1,clusterGravity:10}},e.prototype.execute=function(){return i(this,void 0,void 0,function(){var t,e,r,n,o,i=this;return a(this,function(a){switch(a.label){case 0:return(e=(t=this).nodes)&&0!==e.length?(t.width||"undefined"==typeof window||(t.width=window.innerWidth),t.height||"undefined"==typeof window||(t.height=window.innerHeight),t.center||(t.center=[t.width/2,t.height/2]),r=t.center,1===e.length?(e[0].x=r[0],e[0].y=r[1],t.onLayoutEnd&&t.onLayoutEnd(),[2]):(n={},o={},e.forEach(function(t,e){(0,u.isNumber)(t.x)||(t.x=Math.random()*i.width),(0,u.isNumber)(t.y)||(t.y=Math.random()*i.height),n[t.id]=t,o[t.id]=e}),t.nodeMap=n,t.nodeIdxMap=o,[4,t.run()])):(t.onLayoutEnd&&t.onLayoutEnd(),[2]);case 1:return a.sent(),[2]}})})},e.prototype.executeWithWorker=function(t,e){return i(this,void 0,void 0,function(){var r,n,o,i,s,l=this;return a(this,function(a){switch(a.label){case 0:return n=(r=this).nodes,o=r.center,n&&0!==n.length?1===n.length?(n[0].x=o[0],n[0].y=o[1],[2]):(i={},s={},n.forEach(function(t,e){(0,u.isNumber)(t.x)||(t.x=Math.random()*l.width),(0,u.isNumber)(t.y)||(t.y=Math.random()*l.height),i[t.id]=t,s[t.id]=e}),r.nodeMap=i,r.nodeIdxMap=s,[4,r.run(t,e)]):[2];case 1:return a.sent(),[2]}})})},e.prototype.run=function(t,e){return i(this,void 0,void 0,function(){var r,n,o,s,p,d,y,v,g,m,b,w,S,x,_,E,O,P,k,C,T,A,M,j,I,N=this;return a(this,function(L){switch(L.label){case 0:for(n=(r=this).nodes,o=r.edges,s=r.maxIteration,p=r.center,d=r.height*r.width,y=Math.sqrt(d)/10,v=d/(n.length+1),g=Math.sqrt(v),m=r.speed,b=r.clustering,w=(0,c.attributesToTextureData)([r.clusterField],n),S=w.array,x=w.count,n.forEach(function(t,e){var r=0,n=0;(0,u.isNumber)(t.fx)&&(0,u.isNumber)(t.fy)&&(r=t.fx||.001,n=t.fy||.001),S[4*e+1]=r,S[4*e+2]=n}),_=n.length,E=(0,c.buildTextureData)(n,o),O=E.maxEdgePerVetex,P=E.array,k=r.workerEnabled,C=k?l.World.create({canvas:t,engineOptions:{supportCompute:!0}}):l.World.create({engineOptions:{supportCompute:!0}}),T=r.onLayoutEnd,A=[],M=0;M<x;M++)A.push(0,0,0,0);return j=C.createKernel(f.fruchtermanBundle).setDispatch([_,1,1]).setBinding({u_Data:P,u_K:g,u_K2:v,u_Gravity:r.gravity,u_ClusterGravity:r.clusterGravity||r.gravity||1,u_Speed:m,u_MaxDisplace:y,u_Clustering:b?1:0,u_Center:p,u_AttributeArray:S,u_ClusterCenters:A,MAX_EDGE_PER_VERTEX:O,VERTEX_COUNT:_}),b&&(I=C.createKernel(f.clusterBundle).setDispatch([x,1,1]).setBinding({u_Data:P,u_NodeAttributes:S,u_ClusterCenters:A,VERTEX_COUNT:_,CLUSTER_COUNT:x})),[4,function(){return i(N,void 0,void 0,function(){var r,o;return a(this,function(i){switch(i.label){case 0:r=0,i.label=1;case 1:return r<s?[4,j.execute()]:[3,6];case 2:return i.sent(),b?(I.setBinding({u_Data:j}),[4,I.execute()]):[3,4];case 3:i.sent(),j.setBinding({u_ClusterCenters:I}),i.label=4;case 4:j.setBinding({u_MaxDisplace:y*=.99}),i.label=5;case 5:return r++,[3,1];case 6:return[4,j.getOutput()];case 7:return o=i.sent(),t?e.postMessage({type:h.LAYOUT_MESSAGE.GPUEND,vertexEdgeData:o}):n.forEach(function(t,e){var r=o[4*e],n=o[4*e+1];t.x=r,t.y=n}),T&&T(),[2]}})})}()];case 1:return L.sent(),[2]}})})},e.prototype.getType=function(){return"fruchterman-gpu"},e}(s.Base);e.FruchtermanGPULayout=p},2444:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.clusterBundle=e.clusterCode=e.fruchtermanBundle=e.fruchtermanCode=void 0,e.fruchtermanCode="\nimport { globalInvocationID } from 'g-webgpu';\nconst MAX_EDGE_PER_VERTEX;\nconst VERTEX_COUNT;\n@numthreads(1, 1, 1)\nclass Fruchterman {\n  @in @out\n  u_Data: vec4[];\n  @in\n  u_K: float;\n  @in\n  u_K2: float;\n  \n  @in\n  u_Center: vec2;\n  @in\n  u_Gravity: float;\n  @in\n  u_ClusterGravity: float;\n  @in\n  u_Speed: float;\n  @in\n  u_MaxDisplace: float;\n  @in\n  u_Clustering: float;\n  @in\n  u_AttributeArray: vec4[];\n  @in\n  u_ClusterCenters: vec4[];\n  calcRepulsive(i: int, currentNode: vec4): vec2 {\n    let dx = 0, dy = 0;\n    for (let j = 0; j < VERTEX_COUNT; j++) {\n      if (i != j) {\n        const nextNode = this.u_Data[j];\n        const xDist = currentNode[0] - nextNode[0];\n        const yDist = currentNode[1] - nextNode[1];\n        const dist = (xDist * xDist + yDist * yDist) + 0.01;\n        let param = this.u_K2 / dist;\n        \n        if (dist > 0.0) {\n          dx += param * xDist;\n          dy += param * yDist;\n          if (xDist == 0 && yDist == 0) {\n            const sign = i < j ? 1 : -1;\n            dx += param * sign;\n            dy += param * sign;\n          }\n        }\n      }\n    }\n    return [dx, dy];\n  }\n  calcGravity(currentNode: vec4, nodeAttributes: vec4): vec2 { // \n    let dx = 0, dy = 0;\n    const vx = currentNode[0] - this.u_Center[0];\n    const vy = currentNode[1] - this.u_Center[1];\n    const gf = 0.01 * this.u_K * this.u_Gravity;\n    dx = gf * vx;\n    dy = gf * vy;\n    if (this.u_Clustering == 1) {\n      const clusterIdx = int(nodeAttributes[0]);\n      const center = this.u_ClusterCenters[clusterIdx];\n      const cvx = currentNode[0] - center[0];\n      const cvy = currentNode[1] - center[1];\n      const dist = sqrt(cvx * cvx + cvy * cvy) + 0.01;\n      const parma = this.u_K * this.u_ClusterGravity / dist;\n      dx += parma * cvx;\n      dy += parma * cvy;\n    }\n    return [dx, dy];\n  }\n  calcAttractive(i: int, currentNode: vec4): vec2 {\n    let dx = 0, dy = 0;\n    const arr_offset = int(floor(currentNode[2] + 0.5));\n    const length = int(floor(currentNode[3] + 0.5));\n    const node_buffer: vec4;\n    for (let p = 0; p < MAX_EDGE_PER_VERTEX; p++) {\n      if (p >= length) break;\n      const arr_idx = arr_offset + p;\n      // when arr_idx % 4 == 0 update currentNodedx_buffer\n      const buf_offset = arr_idx - arr_idx / 4 * 4;\n      if (p == 0 || buf_offset == 0) {\n        node_buffer = this.u_Data[int(arr_idx / 4)];\n      }\n      const float_j = buf_offset == 0 ? node_buffer[0] :\n                      buf_offset == 1 ? node_buffer[1] :\n                      buf_offset == 2 ? node_buffer[2] :\n                                        node_buffer[3];\n      const nextNode = this.u_Data[int(float_j)];\n      const xDist = currentNode[0] - nextNode[0];\n      const yDist = currentNode[1] - nextNode[1];\n      const dist = sqrt(xDist * xDist + yDist * yDist) + 0.01;\n      let attractiveF = dist / this.u_K;\n    \n      if (dist > 0.0) {\n        dx -= xDist * attractiveF;\n        dy -= yDist * attractiveF;\n        if (xDist == 0 && yDist == 0) {\n          const sign = i < int(float_j) ? 1 : -1;\n          dx -= sign * attractiveF;\n          dy -= sign * attractiveF;\n        }\n      }\n    }\n    return [dx, dy];\n  }\n  @main\n  compute() {\n    const i = globalInvocationID.x;\n    const currentNode = this.u_Data[i];\n    let dx = 0, dy = 0;\n    if (i >= VERTEX_COUNT) {\n      this.u_Data[i] = currentNode;\n      return;\n    }\n\n    // [gravity, fx, fy, 0]\n    const nodeAttributes = this.u_AttributeArray[i];\n\n    if (nodeAttributes[1] != 0 && nodeAttributes[2] != 0) {\n      // the node is fixed\n      this.u_Data[i] = [\n        nodeAttributes[1],\n        nodeAttributes[2],\n        currentNode[2],\n        currentNode[3]\n      ];\n      return;\n    }\n\n    // repulsive\n    const repulsive = this.calcRepulsive(i, currentNode);\n    dx += repulsive[0];\n    dy += repulsive[1];\n    // attractive\n    const attractive = this.calcAttractive(i, currentNode);\n    dx += attractive[0];\n    dy += attractive[1];\n    // gravity\n    const gravity = this.calcGravity(currentNode, nodeAttributes);\n    dx -= gravity[0];\n    dy -= gravity[1];\n    // speed\n    dx *= this.u_Speed;\n    dy *= this.u_Speed;\n\n    // move\n    const distLength = sqrt(dx * dx + dy * dy);\n    if (distLength > 0.0) {\n      const limitedDist = min(this.u_MaxDisplace * this.u_Speed, distLength);\n      this.u_Data[i] = [\n        currentNode[0] + dx / distLength * limitedDist,\n        currentNode[1] + dy / distLength * limitedDist,\n        currentNode[2],\n        currentNode[3]\n      ];\n    }\n  }\n}\n",e.fruchtermanBundle='{"shaders":{"WGSL":"","GLSL450":"","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_K;\\nuniform float u_K2;\\nuniform vec2 u_Center;\\nuniform float u_Gravity;\\nuniform float u_ClusterGravity;\\nuniform float u_Speed;\\nuniform float u_MaxDisplace;\\nuniform float u_Clustering;\\nuniform sampler2D u_AttributeArray;\\nuniform vec2 u_AttributeArraySize;\\nvec4 getDatau_AttributeArray(vec2 address2D) {\\n  return vec4(texture2D(u_AttributeArray, address2D).rgba);\\n}\\nvec4 getDatau_AttributeArray(float address1D) {\\n  return getDatau_AttributeArray(addrTranslation_1Dto2D(address1D, u_AttributeArraySize));\\n}\\nvec4 getDatau_AttributeArray(int address1D) {\\n  return getDatau_AttributeArray(float(address1D));\\n}\\nuniform sampler2D u_ClusterCenters;\\nuniform vec2 u_ClusterCentersSize;\\nvec4 getDatau_ClusterCenters(vec2 address2D) {\\n  return vec4(texture2D(u_ClusterCenters, address2D).rgba);\\n}\\nvec4 getDatau_ClusterCenters(float address1D) {\\n  return getDatau_ClusterCenters(addrTranslation_1Dto2D(address1D, u_ClusterCentersSize));\\n}\\nvec4 getDatau_ClusterCenters(int address1D) {\\n  return getDatau_ClusterCenters(float(address1D));\\n}\\nvec2 calcRepulsive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = getDatau_Data(j);\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = ((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat param = u_K2 / dist;\\nif (dist > 0.0) {dx += param * xDist;\\ndy += param * yDist;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < j) ? (1.0) : (-1.0);\\ndx += param * sign;\\ndy += param * sign;}}}}\\nreturn vec2(dx, dy);}\\nvec2 calcGravity(vec4 currentNode, vec4 nodeAttributes) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nfloat vx = currentNode.x - u_Center.x;\\nfloat vy = currentNode.y - u_Center.y;\\nfloat gf = (0.01 * u_K) * u_Gravity;\\ndx = gf * vx;\\ndy = gf * vy;\\nif (u_Clustering == 1.0) {int clusterIdx = int(nodeAttributes.x);\\nvec4 center = getDatau_ClusterCenters(clusterIdx);\\nfloat cvx = currentNode.x - center.x;\\nfloat cvy = currentNode.y - center.y;\\nfloat dist = sqrt((cvx * cvx) + (cvy * cvy)) + 0.01;\\nfloat parma = (u_K * u_ClusterGravity) / dist;\\ndx += parma * cvx;\\ndy += parma * cvy;}\\nreturn vec2(dx, dy);}\\nvec2 calcAttractive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nint arr_offset = int(floor(currentNode.z + 0.5));\\nint length = int(floor(currentNode.w + 0.5));\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + int(p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = getDatau_Data(int(arr_idx / 4));}\\nfloat float_j = (buf_offset == 0) ? (node_buffer.x) : ((buf_offset == 1) ? (node_buffer.y) : ((buf_offset == 2) ? (node_buffer.z) : (node_buffer.w)));\\nvec4 nextNode = getDatau_Data(int(float_j));\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = sqrt((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat attractiveF = dist / u_K;\\nif (dist > 0.0) {dx -= xDist * attractiveF;\\ndy -= yDist * attractiveF;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < int(float_j)) ? (1.0) : (-1.0);\\ndx -= sign * attractiveF;\\ndy -= sign * attractiveF;}}}\\nreturn vec2(dx, dy);}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 currentNode = getDatau_Data(i);\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nif (i >= VERTEX_COUNT) {gl_FragColor = vec4(currentNode);\\nreturn ;}\\nvec4 nodeAttributes = getDatau_AttributeArray(i);\\nif ((nodeAttributes.y != 0.0) && (nodeAttributes.z != 0.0)) {gl_FragColor = vec4(vec4(nodeAttributes.y, nodeAttributes.z, currentNode.z, currentNode.w));\\nreturn ;}\\nvec2 repulsive = calcRepulsive(i, currentNode);\\ndx += repulsive.x;\\ndy += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode);\\ndx += attractive.x;\\ndy += attractive.y;\\nvec2 gravity = calcGravity(currentNode, nodeAttributes);\\ndx -= gravity.x;\\ndy -= gravity.y;\\ndx *= u_Speed;\\ndy *= u_Speed;\\nfloat distLength = sqrt((dx * dx) + (dy * dy));\\nif (distLength > 0.0) {float limitedDist = min(u_MaxDisplace * u_Speed, distLength);\\ngl_FragColor = vec4(vec4(currentNode.x + ((dx / distLength) * limitedDist), currentNode.y + ((dy / distLength) * limitedDist), currentNode.z, currentNode.w));}if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"MAX_EDGE_PER_VERTEX","type":"Float","runtime":true},{"name":"VERTEX_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]},{"name":"u_K","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_K2","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Center","type":"vec2<f32>","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Gravity","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterGravity","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Speed","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_MaxDisplace","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Clustering","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AttributeArray","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterCenters","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_Data","size":[1,1],"length":1},"needPingpong":true}}',e.clusterCode="\nimport { globalInvocationID } from 'g-webgpu';\nconst VERTEX_COUNT;\nconst CLUSTER_COUNT;\n@numthreads(1, 1, 1)\nclass CalcCenter {\n  @in\n  u_Data: vec4[];\n  @in\n  u_NodeAttributes: vec4[]; // [[clusterIdx, 0, 0, 0], ...]\n  @in @out\n  u_ClusterCenters: vec4[]; // [[cx, cy, nodeCount, clusterIdx], ...]\n  @main\n  compute() {\n    const i = globalInvocationID.x;\n    const center = this.u_ClusterCenters[i];\n    let sumx = 0;\n    let sumy = 0;\n    let count = 0;\n    for (let j = 0; j < VERTEX_COUNT; j++) {\n      const attributes = this.u_NodeAttributes[j];\n      const clusterIdx = int(attributes[0]);\n      const vertex = this.u_Data[j];\n      if (clusterIdx == i) {\n        sumx += vertex.x;\n        sumy += vertex.y;\n        count += 1;\n      }\n    }\n    this.u_ClusterCenters[i] = [\n      sumx / count,\n      sumy / count,\n      count,\n      i\n    ];\n  }\n}\n",e.clusterBundle='{"shaders":{"WGSL":"","GLSL450":"","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define CLUSTER_COUNT __DefineValuePlaceholder__CLUSTER_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform sampler2D u_NodeAttributes;\\nuniform vec2 u_NodeAttributesSize;\\nvec4 getDatau_NodeAttributes(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributes, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributes(float address1D) {\\n  return getDatau_NodeAttributes(addrTranslation_1Dto2D(address1D, u_NodeAttributesSize));\\n}\\nvec4 getDatau_NodeAttributes(int address1D) {\\n  return getDatau_NodeAttributes(float(address1D));\\n}\\nuniform sampler2D u_ClusterCenters;\\nuniform vec2 u_ClusterCentersSize;\\nvec4 getDatau_ClusterCenters(vec2 address2D) {\\n  return vec4(texture2D(u_ClusterCenters, address2D).rgba);\\n}\\nvec4 getDatau_ClusterCenters(float address1D) {\\n  return getDatau_ClusterCenters(addrTranslation_1Dto2D(address1D, u_ClusterCentersSize));\\n}\\nvec4 getDatau_ClusterCenters(int address1D) {\\n  return getDatau_ClusterCenters(float(address1D));\\n}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 center = getDatau_ClusterCenters(i);\\nfloat sumx = 0.0;\\nfloat sumy = 0.0;\\nfloat count = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 attributes = getDatau_NodeAttributes(j);\\nint clusterIdx = int(attributes.x);\\nvec4 vertex = getDatau_Data(j);\\nif (clusterIdx == i) {sumx += vertex.x;\\nsumy += vertex.y;\\ncount += 1.0;}}\\ngl_FragColor = vec4(vec4(sumx / count, sumy / count, count, i));if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"VERTEX_COUNT","type":"Float","runtime":true},{"name":"CLUSTER_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributes","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterCenters","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_ClusterCenters","size":[1,1],"length":1},"needPingpong":true}}'},4790:function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))(function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function s(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r(function(t){t(e)})).then(a,s)}u((n=n.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(u){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(r=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===s[0]||2===s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],n=0}finally{r=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.GForceGPULayout=void 0;var s=r(9284),u=r(8652),l=r(2587),c=r(446),f=r(3979),h=r(6920),p=r(4587),d=function(t){function e(e){var r=t.call(this)||this;return r.maxIteration=1e3,r.edgeStrength=200,r.nodeStrength=1e3,r.coulombDisScale=.005,r.damping=.9,r.maxSpeed=1e3,r.minMovement=.5,r.interval=.02,r.factor=1,r.linkDistance=1,r.gravity=10,r.workerEnabled=!1,r.nodes=[],r.edges=[],r.width=300,r.height=300,r.nodeMap={},r.nodeIdxMap={},r.updateCfg(e),r}return o(e,t),e.prototype.getDefaultCfg=function(){return{maxIteration:2e3,gravity:10,clustering:!1,clusterGravity:10}},e.prototype.execute=function(){return i(this,void 0,void 0,function(){var t,e,r,n,o;return a(this,function(i){switch(i.label){case 0:return(e=(t=this).nodes)&&0!==e.length?(t.width||"undefined"==typeof window||(t.width=window.innerWidth),t.height||"undefined"==typeof window||(t.height=window.innerHeight),t.center||(t.center=[t.width/2,t.height/2]),r=t.center,1===e.length?(e[0].x=r[0],e[0].y=r[1],t.onLayoutEnd&&t.onLayoutEnd(),[2]):(n={},o={},e.forEach(function(e,r){(0,u.isNumber)(e.x)||(e.x=Math.random()*t.width),(0,u.isNumber)(e.y)||(e.y=Math.random()*t.height),n[e.id]=e,o[e.id]=r}),t.nodeMap=n,t.nodeIdxMap=o,t.nodeStrength=(0,c.proccessToFunc)(t.nodeStrength,1),t.edgeStrength=(0,c.proccessToFunc)(t.edgeStrength,1),[4,t.run()])):(t.onLayoutEnd&&t.onLayoutEnd(),[2]);case 1:return i.sent(),[2]}})})},e.prototype.executeWithWorker=function(t,e){var r=this,n=r.nodes,o=r.center;if(n&&0!==n.length){if(1===n.length)return n[0].x=o[0],void(n[0].y=o[1]);var i={},a={};n.forEach(function(t,e){(0,u.isNumber)(t.x)||(t.x=Math.random()*r.width),(0,u.isNumber)(t.y)||(t.y=Math.random()*r.height),i[t.id]=t,a[t.id]=e}),r.nodeMap=i,r.nodeIdxMap=a,r.nodeStrength=(0,c.proccessToFunc)(r.nodeStrength,1),r.edgeStrength=(0,c.proccessToFunc)(r.edgeStrength,1),r.run(t,e)}},e.prototype.run=function(t,e){return i(this,void 0,void 0,function(){var r,n,o,s,d,y,v,g,m,b,w,S,x,_,E,O,P,k,C,T,A,M,j,I,N,L,R=this;return a(this,function(D){switch(D.label){case 0:for(n=(r=this).nodes,o=r.edges,s=r.maxIteration,r.width||"undefined"==typeof window||(r.width=window.innerWidth),r.height||"undefined"==typeof window||(r.height=window.innerHeight),d=n.length,r.linkDistance=(0,c.proccessToFunc)(r.linkDistance),r.edgeStrength=(0,c.proccessToFunc)(r.edgeStrength),y=(0,c.buildTextureDataWithTwoEdgeAttr)(n,o,r.linkDistance,r.edgeStrength),v=y.maxEdgePerVetex,g=y.array,r.degrees=(0,f.getDegree)(n.length,r.nodeIdxMap,o).map(function(t){return t.all}),m=[],b=[],w=[],S=[],x=[],_=[],E=[],r.getMass||(r.getMass=function(t){return r.degrees[r.nodeIdxMap[t.id]]||1}),O=r.gravity,P=r.center,n.forEach(function(t,e){m.push(r.getMass(t)),b.push(r.nodeStrength(t)),r.degrees[e]||(r.degrees[e]=0);var n=[P[0],P[1],O];if(r.getCenter){var o=r.getCenter(t,r.degrees[e]);o&&(0,u.isNumber)(o[0])&&(0,u.isNumber)(o[1])&&(0,u.isNumber)(o[2])&&(n=o)}w.push(n[0]),S.push(n[1]),x.push(n[2]),(0,u.isNumber)(t.fx)&&(0,u.isNumber)(t.fy)?(_.push(t.fx||.001),E.push(t.fy||.001)):(_.push(0),E.push(0))}),k=(0,c.arrayToTextureData)([m,r.degrees,b,_]),C=(0,c.arrayToTextureData)([w,S,x,E]),T=r.workerEnabled,A=T?l.World.create({canvas:t,engineOptions:{supportCompute:!0}}):l.World.create({engineOptions:{supportCompute:!0}}),M=r.onLayoutEnd,j=[],g.forEach(function(t){j.push(t)}),I=0;I<4;I++)j.push(0);return N=A.createKernel(h.gForceBundle).setDispatch([d,1,1]).setBinding({u_Data:g,u_damping:r.damping,u_maxSpeed:r.maxSpeed,u_minMovement:r.minMovement,u_coulombDisScale:r.coulombDisScale,u_factor:r.factor,u_NodeAttributeArray1:k,u_NodeAttributeArray2:C,MAX_EDGE_PER_VERTEX:v,VERTEX_COUNT:d,u_AveMovement:j,u_interval:r.interval}),L=A.createKernel(h.aveMovementBundle).setDispatch([1,1,1]).setBinding({u_Data:g,VERTEX_COUNT:d,u_AveMovement:[0,0,0,0]}),[4,function(){return i(R,void 0,void 0,function(){var o,i,u;return a(this,function(a){switch(a.label){case 0:o=0,a.label=1;case 1:return o<s?[4,N.execute()]:[3,5];case 2:return a.sent(),L.setBinding({u_Data:N}),[4,L.execute()];case 3:a.sent(),i=Math.max(.02,r.interval-.002*o),N.setBinding({u_interval:i,u_AveMovement:L}),a.label=4;case 4:return o++,[3,1];case 5:return[4,N.getOutput()];case 6:return u=a.sent(),t?e.postMessage({type:p.LAYOUT_MESSAGE.GPUEND,vertexEdgeData:u}):n.forEach(function(t,e){var r=u[4*e],n=u[4*e+1];t.x=r,t.y=n}),M&&M(),[2]}})})}()];case 1:return D.sent(),[2]}})})},e.prototype.getType=function(){return"gForce-gpu"},e}(s.Base);e.GForceGPULayout=d},6920:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.aveMovementBundle=e.aveMovementCode=e.gForceBundle=e.gForceCode=void 0,e.gForceCode="\nimport { globalInvocationID } from 'g-webgpu';\n\nconst MAX_EDGE_PER_VERTEX;\nconst VERTEX_COUNT;\nconst SHIFT_20 = 1048576;\n\n@numthreads(1, 1, 1)\nclass GGForce {\n  @in @out\n  u_Data: vec4[];\n\n  @in\n  u_damping: float;\n  \n  @in\n  u_maxSpeed: float;\n\n  @in\n  u_minMovement: float;\n\n  @in\n  u_AveMovement: vec4[];\n\n  @in\n  u_coulombDisScale: float;\n\n  @in\n  u_factor: float;\n\n  @in\n  u_NodeAttributeArray1: vec4[];\n\n  @in\n  u_NodeAttributeArray2: vec4[];\n\n  @in\n  u_interval: float;\n\n  unpack_float(packedValue: float): ivec2 {\n    const packedIntValue = int(packedValue);\n    const v0 = packedIntValue / SHIFT_20;\n    return [v0, packedIntValue - v0 * SHIFT_20];\n  }\n\n  calcRepulsive(i: int, currentNode: vec4): vec2 {\n    let ax = 0, ay = 0;\n    for (let j: int = 0; j < VERTEX_COUNT; j++) {\n      if (i != j) {\n        const nextNode = this.u_Data[j];\n        const vx = currentNode[0] - nextNode[0];\n        const vy = currentNode[1] - nextNode[1];\n        const dist = sqrt(vx * vx + vy * vy) + 0.01;\n        const n_dist = (dist + 0.1) * this.u_coulombDisScale;\n        const direx = vx / dist;\n        const direy = vy / dist;\n        const attributesi = this.u_NodeAttributeArray1[i];\n        const attributesj = this.u_NodeAttributeArray1[j];\n        const massi = attributesi[0];\n        const nodeStrengthi = attributesi[2];\n        const nodeStrengthj = attributesj[2];\n        const nodeStrength = (nodeStrengthi + nodeStrengthj) / 2;\n        // const param = nodeStrength * this.u_factor / (n_dist * n_dist * massi);\n        const param = nodeStrength * this.u_factor / (n_dist * n_dist);\n        ax += direx * param;\n        ay += direy * param;\n      }\n    }\n    return [ax, ay];\n  }\n\n  calcGravity(i: int, currentNode: vec4, attributes2: vec4): vec2 {\n    // note: attributes2 = [centerX, centerY, gravity, 0]\n\n    const vx = currentNode[0] - attributes2[0];\n    const vy = currentNode[1] - attributes2[1];\n    \n    const ax = vx * attributes2[2];\n    const ay = vy * attributes2[2];\n    \n    return [ax, ay];\n  }\n\n  calcAttractive(i: int, currentNode: vec4, attributes1: vec4): vec2 {\n    // note: attributes1 = [mass, degree, nodeSterngth, 0]\n\n    const mass = attributes1[0];\n    let ax = 0, ay = 0;\n    // const arr_offset = int(floor(currentNode[2] + 0.5));\n    // const length = int(floor(currentNode[3] + 0.5));\n\n    const compressed = this.unpack_float(currentNode[2]);\n    const length = compressed[0];\n    const arr_offset = compressed[1];\n\n    const node_buffer: vec4;\n    for (let p: int = 0; p < MAX_EDGE_PER_VERTEX; p++) {\n      if (p >= length) break;\n      const arr_idx = arr_offset + 4 * p; // i èç¹çç¬¬ p æ¡è¾¹å¼å§çå°æ ¼å­ä½ç½®\n      const buf_offset = arr_idx - arr_idx / 4 * 4;\n      if (p == 0 || buf_offset == 0) {\n        node_buffer = this.u_Data[int(arr_idx / 4)]; // å¤§æ ¼å­ï¼å¤§æ ¼å­ä½ç½®=å°ä¸ªå­ä½ç½® / 4ï¼\n      }\n\n      let float_j: float = node_buffer[0];\n\n      const nextNode = this.u_Data[int(float_j)];\n      const vx = nextNode[0] - currentNode[0];\n      const vy = nextNode[1] - currentNode[1];\n      const dist = sqrt(vx * vx + vy * vy) + 0.01;\n      const direx = vx / dist;\n      const direy = vy / dist;\n      const edgeLength = node_buffer[1];\n      const edgeStrength = node_buffer[2];\n      const diff: float = edgeLength - dist;//edgeLength\n      // const param = diff * this.u_stiffness / mass; //\n      const param = diff * edgeStrength / mass; // \n      ax -= direx * param;\n      ay -= direy * param;\n    }\n    return [ax, ay];\n  }\n\n  @main\n  compute() {\n    const i = globalInvocationID.x;\n    const currentNode = this.u_Data[i];\n    const movement = u_AveMovement[0];\n    let ax = 0, ay = 0;\n\n    if (i >= VERTEX_COUNT || movement.x < u_minMovement) {\n      this.u_Data[i] = currentNode;\n      return;\n    }\n\n    // æ¯ä¸ªèç¹å±æ§å ä¸¤ä¸ªæ°ç»ä¸­åä¸æ ¼\n    // [mass, degree, nodeStrength, fx]\n    const nodeAttributes1 = this.u_NodeAttributeArray1[i];\n    // [centerX, centerY, centerGravity, fy]\n    const nodeAttributes2 = this.u_NodeAttributeArray2[i];\n\n    // repulsive\n    const repulsive = this.calcRepulsive(i, currentNode);\n    ax += repulsive[0];\n    ay += repulsive[1];\n\n    // attractive\n    const attractive = this.calcAttractive(i, currentNode, nodeAttributes1);\n    ax += attractive[0];\n    ay += attractive[1];\n\n    // gravity\n    const gravity = this.calcGravity(i, currentNode, nodeAttributes2);\n    ax -= gravity[0];\n    ay -= gravity[1];\n\n    // speed\n    const param = this.u_interval * this.u_damping;\n    let vx = ax * param;\n    let vy = ay * param;\n    const vlength = sqrt(vx * vx + vy * vy) + 0.0001;\n    if (vlength > this.u_maxSpeed) {\n      const param2 = this.u_maxSpeed / vlength;\n      vx = param2 * vx;\n      vy = param2 * vy;\n    }\n\n    // move\n    if (nodeAttributes1[3] != 0 && nodeAttributes2[3] != 0) {\n      this.u_Data[i] = [\n        nodeAttributes1[3],\n        nodeAttributes2[3],\n        currentNode[2],\n        0\n      ];\n    } else {\n      const distx = vx * this.u_interval;\n      const disty = vy * this.u_interval;\n      const distLength = sqrt(distx * distx + disty * disty);\n      this.u_Data[i] = [\n        currentNode[0] + distx,\n        currentNode[1] + disty,\n        currentNode[2],\n        distLength\n      ];\n    }\n    \n    // the avarage move distance\n    // need to share memory\n    \n  }\n}\n",e.gForceBundle='{"shaders":{"WGSL":"","GLSL450":"","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define SHIFT_20 1048576.0\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_damping;\\nuniform float u_maxSpeed;\\nuniform float u_minMovement;\\nuniform sampler2D u_AveMovement;\\nuniform vec2 u_AveMovementSize;\\nvec4 getDatau_AveMovement(vec2 address2D) {\\n  return vec4(texture2D(u_AveMovement, address2D).rgba);\\n}\\nvec4 getDatau_AveMovement(float address1D) {\\n  return getDatau_AveMovement(addrTranslation_1Dto2D(address1D, u_AveMovementSize));\\n}\\nvec4 getDatau_AveMovement(int address1D) {\\n  return getDatau_AveMovement(float(address1D));\\n}\\nuniform float u_coulombDisScale;\\nuniform float u_factor;\\nuniform sampler2D u_NodeAttributeArray1;\\nuniform vec2 u_NodeAttributeArray1Size;\\nvec4 getDatau_NodeAttributeArray1(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributeArray1, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributeArray1(float address1D) {\\n  return getDatau_NodeAttributeArray1(addrTranslation_1Dto2D(address1D, u_NodeAttributeArray1Size));\\n}\\nvec4 getDatau_NodeAttributeArray1(int address1D) {\\n  return getDatau_NodeAttributeArray1(float(address1D));\\n}\\nuniform sampler2D u_NodeAttributeArray2;\\nuniform vec2 u_NodeAttributeArray2Size;\\nvec4 getDatau_NodeAttributeArray2(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributeArray2, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributeArray2(float address1D) {\\n  return getDatau_NodeAttributeArray2(addrTranslation_1Dto2D(address1D, u_NodeAttributeArray2Size));\\n}\\nvec4 getDatau_NodeAttributeArray2(int address1D) {\\n  return getDatau_NodeAttributeArray2(float(address1D));\\n}\\nuniform float u_interval;\\nivec2 unpack_float(float packedValue) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint packedIntValue = int(packedValue);\\nint v0 = packedIntValue / int(SHIFT_20);\\nreturn ivec2(v0, packedIntValue - (v0 * int(SHIFT_20)));}\\nvec2 calcRepulsive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = getDatau_Data(j);\\nfloat vx = currentNode.x - nextNode.x;\\nfloat vy = currentNode.y - nextNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat n_dist = (dist + 0.1) * u_coulombDisScale;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nvec4 attributesi = getDatau_NodeAttributeArray1(i);\\nvec4 attributesj = getDatau_NodeAttributeArray1(j);\\nfloat massi = attributesi.x;\\nfloat nodeStrengthi = attributesi.z;\\nfloat nodeStrengthj = attributesj.z;\\nfloat nodeStrength = (nodeStrengthi + nodeStrengthj) / 2.0;\\nfloat param = (nodeStrength * u_factor) / (n_dist * n_dist);\\nax += direx * param;\\nay += direy * param;}}\\nreturn vec2(ax, ay);}\\nvec2 calcGravity(int i, vec4 currentNode, vec4 attributes2) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat vx = currentNode.x - attributes2.x;\\nfloat vy = currentNode.y - attributes2.y;\\nfloat ax = vx * attributes2.z;\\nfloat ay = vy * attributes2.z;\\nreturn vec2(ax, ay);}\\nvec2 calcAttractive(int i, vec4 currentNode, vec4 attributes1) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat mass = attributes1.x;\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nivec2 compressed = unpack_float(currentNode.z);\\nint length = compressed.x;\\nint arr_offset = compressed.y;\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + (4 * p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = getDatau_Data(int(arr_idx / 4));}\\nfloat float_j = node_buffer.x;\\nvec4 nextNode = getDatau_Data(int(float_j));\\nfloat vx = nextNode.x - currentNode.x;\\nfloat vy = nextNode.y - currentNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nfloat edgeLength = node_buffer.y;\\nfloat edgeStrength = node_buffer.z;\\nfloat diff = edgeLength - dist;\\nfloat param = (diff * edgeStrength) / mass;\\nax -= direx * param;\\nay -= direy * param;}\\nreturn vec2(ax, ay);}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 currentNode = getDatau_Data(i);\\nvec4 movement = getDatau_AveMovement(0.0);\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nif ((i >= VERTEX_COUNT) || (movement.x < u_minMovement)) {gl_FragColor = vec4(currentNode);\\nreturn ;}\\nvec4 nodeAttributes1 = getDatau_NodeAttributeArray1(i);\\nvec4 nodeAttributes2 = getDatau_NodeAttributeArray2(i);\\nvec2 repulsive = calcRepulsive(i, currentNode);\\nax += repulsive.x;\\nay += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode, nodeAttributes1);\\nax += attractive.x;\\nay += attractive.y;\\nvec2 gravity = calcGravity(i, currentNode, nodeAttributes2);\\nax -= gravity.x;\\nay -= gravity.y;\\nfloat param = u_interval * u_damping;\\nfloat vx = ax * param;\\nfloat vy = ay * param;\\nfloat vlength = sqrt((vx * vx) + (vy * vy)) + 0.0001;\\nif (vlength > u_maxSpeed) {float param2 = u_maxSpeed / vlength;\\nvx = param2 * vx;\\nvy = param2 * vy;}\\nif ((nodeAttributes1.w != 0.0) && (nodeAttributes2.w != 0.0)) {gl_FragColor = vec4(vec4(nodeAttributes1.w, nodeAttributes2.w, currentNode.z, 0.0));}else {float distx = vx * u_interval;\\nfloat disty = vy * u_interval;\\nfloat distLength = sqrt((distx * distx) + (disty * disty));\\ngl_FragColor = vec4(vec4(currentNode.x + distx, currentNode.y + disty, currentNode.z, distLength));}if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"MAX_EDGE_PER_VERTEX","type":"Float","runtime":true},{"name":"VERTEX_COUNT","type":"Float","runtime":true},{"name":"SHIFT_20","type":"Float","value":1048576,"runtime":false}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]},{"name":"u_damping","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_maxSpeed","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_minMovement","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AveMovement","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_coulombDisScale","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_factor","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributeArray1","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributeArray2","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_interval","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_Data","size":[1,1],"length":1},"needPingpong":true}}',e.aveMovementCode="\nconst VERTEX_COUNT;\n@numthreads(1, 1, 1)\nclass CalcAveMovement {\n  @in\n  u_Data: vec4[];\n  @in\n  u_iter: float;\n  @in @out\n  u_AveMovement: vec4[];\n  @main\n  compute() {\n    let movement = 0;\n    for (let j: int = 0; j < VERTEX_COUNT; j++) {\n      const vertex = this.u_Data[j];\n      movement += vertex[3];\n    }\n    movement = movement / float(VERTEX_COUNT);\n    this.u_AveMovement[0] = [movement, 0, 0, 0];\n  }\n}\n",e.aveMovementBundle='{"shaders":{"WGSL":"","GLSL450":"","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_iter;\\nuniform sampler2D u_AveMovement;\\nuniform vec2 u_AveMovementSize;\\nvec4 getDatau_AveMovement(vec2 address2D) {\\n  return vec4(texture2D(u_AveMovement, address2D).rgba);\\n}\\nvec4 getDatau_AveMovement(float address1D) {\\n  return getDatau_AveMovement(addrTranslation_1Dto2D(address1D, u_AveMovementSize));\\n}\\nvec4 getDatau_AveMovement(int address1D) {\\n  return getDatau_AveMovement(float(address1D));\\n}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat movement = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 vertex = getDatau_Data(j);\\nmovement += vertex.w;}\\nmovement = movement / float(VERTEX_COUNT);\\ngl_FragColor = vec4(vec4(movement, 0.0, 0.0, 0.0));if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"VERTEX_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_iter","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AveMovement","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_AveMovement","size":[1,1],"length":1},"needPingpong":true}}'},790:function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.GridLayout=void 0;var i=r(8652),a=function(t){function e(e){var r=t.call(this)||this;return r.begin=[0,0],r.preventOverlap=!0,r.preventOverlapPadding=10,r.condense=!1,r.sortBy="degree",r.nodes=[],r.edges=[],r.width=300,r.height=300,r.row=0,r.col=0,r.cellWidth=0,r.cellHeight=0,r.cellUsed={},r.id2manPos={},r.onLayoutEnd=function(){},r.updateCfg(e),r}return o(e,t),e.prototype.getDefaultCfg=function(){return{begin:[0,0],preventOverlap:!0,preventOverlapPadding:10,condense:!1,rows:void 0,cols:void 0,position:void 0,sortBy:"degree",nodeSize:30}},e.prototype.execute=function(){var t=this,e=t.nodes,r=t.edges,n=t.begin,o=e.length;if(0===o)return t.onLayoutEnd&&t.onLayoutEnd(),{nodes:e,edges:r};if(1===o)return e[0].x=n[0],e[0].y=n[1],t.onLayoutEnd&&t.onLayoutEnd(),{nodes:e,edges:r};var a=t.sortBy,s=t.width,u=t.height,l=t.condense,c=t.preventOverlapPadding,f=t.preventOverlap,h=t.nodeSpacing,p=t.nodeSize,d=[];e.forEach(function(t){d.push(t)});var y={};if(d.forEach(function(t,e){y[t.id]=e}),("degree"===a||!(0,i.isString)(a)||void 0===d[0][a])&&(a="degree",(0,i.isNaN)(e[0].degree))){var v=(0,i.getDegree)(d.length,y,r);d.forEach(function(t,e){t.degree=v[e].all})}d.sort(function(t,e){return e[a]-t[a]}),s||"undefined"==typeof window||(s=window.innerWidth),u||"undefined"==typeof window||(u=window.innerHeight);var g=t.rows,m=null!=t.cols?t.cols:t.columns;if(t.cells=o,null!=g&&null!=m?(t.rows=g,t.cols=m):null!=g&&null==m?(t.rows=g,t.cols=Math.ceil(t.cells/t.rows)):null==g&&null!=m?(t.cols=m,t.rows=Math.ceil(t.cells/t.cols)):(t.splits=Math.sqrt(t.cells*t.height/t.width),t.rows=Math.round(t.splits),t.cols=Math.round(t.width/t.height*t.splits)),t.rows=Math.max(t.rows,1),t.cols=Math.max(t.cols,1),t.cols*t.rows>t.cells)((w=t.small())-1)*(b=t.large())>=t.cells?t.small(w-1):(b-1)*w>=t.cells&&t.large(b-1);else for(;t.cols*t.rows<t.cells;){var b,w=t.small();((b=t.large())+1)*w>=t.cells?t.large(b+1):t.small(w+1)}if(t.cellWidth=s/t.cols,t.cellHeight=u/t.rows,l&&(t.cellWidth=0,t.cellHeight=0),f||h){var S=(0,i.getFuncByUnknownType)(10,h),x=(0,i.getFuncByUnknownType)(30,p,!1);d.forEach(function(e){e.x&&e.y||(e.x=0,e.y=0);var r,n,o=x(e)||30;(0,i.isArray)(o)?(r=o[0],n=o[1]):(r=o,n=o);var a=void 0!==S?S(e):c,s=r+a,u=n+a;t.cellWidth=Math.max(t.cellWidth,s),t.cellHeight=Math.max(t.cellHeight,u)})}t.cellUsed={},t.row=0,t.col=0,t.id2manPos={};for(var _=0;_<d.length;_++){var E=d[_],O=void 0;if(t.position&&(O=t.position(E)),O&&(void 0!==O.row||void 0!==O.col)){var P={row:O.row,col:O.col};if(void 0===P.col)for(P.col=0;t.used(P.row,P.col);)P.col++;else if(void 0===P.row)for(P.row=0;t.used(P.row,P.col);)P.row++;t.id2manPos[E.id]=P,t.use(P.row,P.col)}t.getPos(E)}return t.onLayoutEnd&&t.onLayoutEnd(),{edges:r,nodes:d}},e.prototype.small=function(t){var e,r=this.rows||5,n=this.cols||5;null==t?e=Math.min(r,n):Math.min(r,n)===this.rows?this.rows=t:this.cols=t;return e},e.prototype.large=function(t){var e,r=this.rows||5,n=this.cols||5;null==t?e=Math.max(r,n):Math.max(r,n)===this.rows?this.rows=t:this.cols=t;return e},e.prototype.used=function(t,e){return this.cellUsed["c-".concat(t,"-").concat(e)]||!1},e.prototype.use=function(t,e){this.cellUsed["c-".concat(t,"-").concat(e)]=!0},e.prototype.moveToNextCell=function(){var t=this.cols||5;this.col++,this.col>=t&&(this.col=0,this.row++)},e.prototype.getPos=function(t){var e,r,n=this.begin,o=this.cellWidth,i=this.cellHeight,a=this.id2manPos[t.id];if(a)e=a.col*o+o/2+n[0],r=a.row*i+i/2+n[1];else{for(;this.used(this.row,this.col);)this.moveToNextCell();e=this.col*o+o/2+n[0],r=this.row*i+i/2+n[1],this.use(this.row,this.col),this.moveToNextCell()}t.x=e,t.y=r},e.prototype.getType=function(){return"grid"},e}(r(9284).Base);e.GridLayout=a},1812:function(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);o&&("get"in o?e.__esModule:!o.writable&&!o.configurable)||(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),o=this&&this.__exportStar||function(t,e){for(var r in t)"default"===r||Object.prototype.hasOwnProperty.call(e,r)||n(e,t,r)};Object.defineProperty(e,"__esModule",{value:!0}),e.ERLayout=e.ForceAtlas2Layout=e.ComboCombinedLayout=e.ComboForceLayout=e.GForceGPULayout=e.FruchtermanGPULayout=e.FruchtermanLayout=e.MDSLayout=e.ConcentricLayout=e.RadialLayout=e.DagreCompoundLayout=e.DagreLayout=e.CircularLayout=e.ForceLayout=e.Force2Layout=e.GForceLayout=e.RandomLayout=e.GridLayout=e.Layouts=e.Layout=void 0;var i=r(790);Object.defineProperty(e,"GridLayout",{enumerable:!0,get:function(){return i.GridLayout}});var a=r(3846);Object.defineProperty(e,"RandomLayout",{enumerable:!0,get:function(){return a.RandomLayout}});var s=r(6007);Object.defineProperty(e,"GForceLayout",{enumerable:!0,get:function(){return s.GForceLayout}});var u=r(3490);Object.defineProperty(e,"Force2Layout",{enumerable:!0,get:function(){return u.Force2Layout}});var l=r(1878);Object.defineProperty(e,"ForceLayout",{enumerable:!0,get:function(){return l.ForceLayout}});var c=r(4933);Object.defineProperty(e,"CircularLayout",{enumerable:!0,get:function(){return c.CircularLayout}});var f=r(813);Object.defineProperty(e,"DagreLayout",{enumerable:!0,get:function(){return f.DagreLayout}});var h=r(1083);Object.defineProperty(e,"DagreCompoundLayout",{enumerable:!0,get:function(){return h.DagreCompoundLayout}});var p=r(4318);Object.defineProperty(e,"RadialLayout",{enumerable:!0,get:function(){return p.RadialLayout}});var d=r(7940);Object.defineProperty(e,"ConcentricLayout",{enumerable:!0,get:function(){return d.ConcentricLayout}});var y=r(5031);Object.defineProperty(e,"MDSLayout",{enumerable:!0,get:function(){return y.MDSLayout}});var v=r(6865);Object.defineProperty(e,"FruchtermanLayout",{enumerable:!0,get:function(){return v.FruchtermanLayout}});var g=r(9720);Object.defineProperty(e,"FruchtermanGPULayout",{enumerable:!0,get:function(){return g.FruchtermanGPULayout}});var m=r(4790);Object.defineProperty(e,"GForceGPULayout",{enumerable:!0,get:function(){return m.GForceGPULayout}});var b=r(5428);Object.defineProperty(e,"ComboForceLayout",{enumerable:!0,get:function(){return b.ComboForceLayout}});var w=r(9266);Object.defineProperty(e,"ComboCombinedLayout",{enumerable:!0,get:function(){return w.ComboCombinedLayout}});var S=r(432);Object.defineProperty(e,"ForceAtlas2Layout",{enumerable:!0,get:function(){return S.ForceAtlas2Layout}});var x=r(4957);Object.defineProperty(e,"ERLayout",{enumerable:!0,get:function(){return x.ERLayout}});var _=r(4199);Object.defineProperty(e,"Layout",{enumerable:!0,get:function(){return _.Layout}}),Object.defineProperty(e,"Layouts",{enumerable:!0,get:function(){return _.Layouts}}),o(r(8312),e)},4199:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Layouts=e.Layout=void 0;var n=r(2235),o=r(790),i=r(3846),a=r(3490),s=r(6007),u=r(1878),l=r(4933),c=r(813),f=r(4318),h=r(7940),p=r(5031),d=r(6865),y=r(9720),v=r(4790),g=r(5428),m=r(9266),b=r(432),w=r(4957),S=r(1083),x=r(8652),_=function(){function t(t){var e=(0,n.getLayoutByName)(t.type);this.layoutInstance=new e(t)}return t.prototype.layout=function(t){return this.layoutInstance.layout(t)},t.prototype.updateCfg=function(t){this.layoutInstance.updateCfg(t)},t.prototype.init=function(t){this.correctLayers(t.nodes),this.layoutInstance.init(t)},t.prototype.correctLayers=function(t){if(null===t||void 0===t?void 0:t.length){var e=1/0,r=[];if(t.forEach(function(t){(0,x.isString)(t.layer)&&(t.layer=parseInt(t.layer,10)),void 0===t.layer||isNaN(t.layer)||(r.push(t),t.layer<e&&(e=t.layer))}),e<=0){var n=Math.abs(e)+1;r.forEach(function(t){return t.layer+=n})}}},t.prototype.execute=function(){this.layoutInstance.execute()},t.prototype.getDefaultCfg=function(){return this.layoutInstance.getDefaultCfg()},t.prototype.destroy=function(){return this.layoutInstance.destroy()},t}();e.Layout=_,e.Layouts={force:u.ForceLayout,fruchterman:d.FruchtermanLayout,forceAtlas2:b.ForceAtlas2Layout,gForce:s.GForceLayout,force2:a.Force2Layout,dagre:c.DagreLayout,dagreCompound:S.DagreCompoundLayout,circular:l.CircularLayout,radial:f.RadialLayout,concentric:h.ConcentricLayout,grid:o.GridLayout,mds:p.MDSLayout,comboForce:g.ComboForceLayout,comboCombined:m.ComboCombinedLayout,random:i.RandomLayout,"gForce-gpu":v.GForceGPULayout,"fruchterman-gpu":y.FruchtermanGPULayout,er:w.ERLayout}},5031:function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.MDSLayout=void 0;var i=r(5208),a=r(8652),s=function(t){function e(e){var r=t.call(this)||this;return r.center=[0,0],r.linkDistance=50,r.nodes=[],r.edges=[],r.onLayoutEnd=function(){},r.updateCfg(e),r}return o(e,t),e.prototype.getDefaultCfg=function(){return{center:[0,0],linkDistance:50}},e.prototype.execute=function(){var t=this.nodes,e=this.edges,r=void 0===e?[]:e,n=this.center;if(t&&0!==t.length){if(1===t.length)return t[0].x=n[0],t[0].y=n[1],void(this.onLayoutEnd&&this.onLayoutEnd());var o=this.linkDistance,i=(0,a.getAdjMatrix)({nodes:t,edges:r},!1),s=(0,a.floydWarshall)(i);this.handleInfinity(s);var u=(0,a.scaleMatrix)(s,o);this.scaledDistances=u;var l=this.runMDS();return this.positions=l,l.forEach(function(e,r){t[r].x=e[0]+n[0],t[r].y=e[1]+n[1]}),this.onLayoutEnd&&this.onLayoutEnd(),{nodes:t,edges:r}}this.onLayoutEnd&&this.onLayoutEnd()},e.prototype.runMDS=function(){var t=this.scaledDistances,e=i.Matrix.mul(i.Matrix.pow(t,2),-.5),r=e.mean("row"),n=e.mean("column"),o=e.mean();e.add(o).subRowVector(r).subColumnVector(n);var a=new i.SingularValueDecomposition(e),s=i.Matrix.sqrt(a.diagonalMatrix).diagonal();return a.leftSingularVectors.toJSON().map(function(t){return i.Matrix.mul([t],[s]).toJSON()[0].splice(0,2)})},e.prototype.handleInfinity=function(t){var e=-999999;t.forEach(function(t){t.forEach(function(t){t!==1/0&&e<t&&(e=t)})}),t.forEach(function(r,n){r.forEach(function(r,o){r===1/0&&(t[n][o]=e)})})},e.prototype.getType=function(){return"mds"},e}(r(9284).Base);e.MDSLayout=s},4318:function(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);o&&("get"in o?e.__esModule:!o.writable&&!o.configurable)||(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),o=this&&this.__exportStar||function(t,e){for(var r in t)"default"===r||Object.prototype.hasOwnProperty.call(e,r)||n(e,t,r)};Object.defineProperty(e,"__esModule",{value:!0}),o(r(910),e)},7655:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(5208),o=function(){function t(t){this.distances=t.distances,this.dimension=t.dimension||2,this.linkDistance=t.linkDistance}return t.prototype.layout=function(){var t=this.dimension,e=this.distances,r=this.linkDistance;try{var o=n.Matrix.mul(n.Matrix.pow(e,2),-.5),i=o.mean("row"),a=o.mean("column"),s=o.mean();o.add(s).subRowVector(i).subColumnVector(a);var u=new n.SingularValueDecomposition(o),l=n.Matrix.sqrt(u.diagonalMatrix).diagonal();return u.leftSingularVectors.toJSON().map(function(e){return n.Matrix.mul([e],[l]).toJSON()[0].splice(0,t)})}catch(t){for(var c=[],f=0;f<e.length;f++){var h=Math.random()*r,p=Math.random()*r;c.push([h,p])}return c}},t}();e.default=o},910:function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.RadialLayout=void 0;var a=r(8652),s=r(9284),u=i(r(7655)),l=i(r(632));function c(t,e){return Math.sqrt((t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1]))}var f=function(t){function e(e){var r=t.call(this)||this;return r.maxIteration=1e3,r.focusNode=null,r.unitRadius=null,r.linkDistance=50,r.preventOverlap=!1,r.strictRadial=!0,r.maxPreventOverlapIteration=200,r.sortStrength=10,r.nodes=[],r.edges=[],r.updateCfg(e),r}return o(e,t),e.prototype.getDefaultCfg=function(){return{maxIteration:1e3,focusNode:null,unitRadius:null,linkDistance:50,preventOverlap:!1,nodeSize:void 0,nodeSpacing:void 0,strictRadial:!0,maxPreventOverlapIteration:200,sortBy:void 0,sortStrength:10}},e.prototype.execute=function(){var t=this,e=t.nodes,r=t.edges||[];if(e&&0!==e.length){t.width||"undefined"==typeof window||(t.width=window.innerWidth),t.height||"undefined"==typeof window||(t.height=window.innerHeight),t.center||(t.center=[t.width/2,t.height/2]);var n=t.center;if(1===e.length)return e[0].x=n[0],e[0].y=n[1],void(t.onLayoutEnd&&t.onLayoutEnd());var o=t.linkDistance,i=null;if((0,a.isString)(t.focusNode)){for(var s=!1,c=0;c<e.length;c++)e[c].id===t.focusNode&&(i=e[c],t.focusNode=i,s=!0,c=e.length);s||(i=null)}else i=t.focusNode;i||(i=e[0],t.focusNode=i);var f,h,p,d=(f=e,h=i.id,p=-1,f.forEach(function(t,e){t.id===h&&(p=e)}),p);d<0&&(d=0),t.focusIndex=d;var y=(0,a.getAdjMatrix)({nodes:e,edges:r},!1),v=(0,a.floydWarshall)(y),g=t.maxToFocus(v,d);t.handleInfinity(v,d,g+1),t.distances=v;var m=v[d],b=t.width||500,w=t.height||500,S=b-n[0]>n[0]?n[0]:b-n[0],x=w-n[1]>n[1]?n[1]:w-n[1];0===S&&(S=b/2),0===x&&(x=w/2);var _=x>S?S:x,E=Math.max.apply(Math,m),O=[];m.forEach(function(e,r){t.unitRadius||(t.unitRadius=_/E),O[r]=e*t.unitRadius}),t.radii=O;var P=t.eIdealDisMatrix();t.eIdealDistances=P;var k=function(t){for(var e=t.length,r=t[0].length,n=[],o=0;o<e;o++){for(var i=[],a=0;a<r;a++)0!==t[o][a]?i.push(1/(t[o][a]*t[o][a])):i.push(0);n.push(i)}return n}(P);t.weights=k;var C=new u.default({linkDistance:o,distances:P}).layout();C.forEach(function(t){(0,a.isNaN)(t[0])&&(t[0]=Math.random()*o),(0,a.isNaN)(t[1])&&(t[1]=Math.random()*o)}),t.positions=C,C.forEach(function(t,r){e[r].x=t[0]+n[0],e[r].y=t[1]+n[1]}),C.forEach(function(t){t[0]-=C[d][0],t[1]-=C[d][1]}),t.run();var T,A=t.preventOverlap,M=t.nodeSize,j=t.strictRadial;if(A){var I,N=t.nodeSpacing;I=(0,a.isNumber)(N)?function(){return N}:(0,a.isFunction)(N)?N:function(){return 0},T=M?(0,a.isArray)(M)?function(t){return(M[0]>M[1]?M[0]:M[1])+I(t)}:function(t){return M+I(t)}:function(t){return t.size?(0,a.isArray)(t.size)?(t.size[0]>t.size[1]?t.size[0]:t.size[1])+I(t):(0,a.isObject)(t.size)?(t.size.width>t.size.height?t.size.width:t.size.height)+I(t):t.size+I(t):10+I(t)};var L={nodes:e,nodeSizeFunc:T,adjMatrix:y,positions:C,radii:O,height:w,width:b,strictRadial:j,focusID:d,iterations:t.maxPreventOverlapIteration||200,k:C.length/4.5},R=new l.default(L);C=R.layout()}return C.forEach(function(t,r){e[r].x=t[0]+n[0],e[r].y=t[1]+n[1]}),t.onLayoutEnd&&t.onLayoutEnd(),{nodes:e,edges:r}}t.onLayoutEnd&&t.onLayoutEnd()},e.prototype.run=function(){for(var t=this.maxIteration,e=this.positions||[],r=this.weights||[],n=this.eIdealDistances||[],o=this.radii||[],i=0;i<=t;i++){var a=i/t;this.oneIteration(a,e,o,n,r)}},e.prototype.oneIteration=function(t,e,r,n,o){var i=1-t,a=this.focusIndex;e.forEach(function(s,u){var l=c(s,[0,0]),f=0===l?0:1/l;if(u!==a){var h=0,p=0,d=0;e.forEach(function(t,e){if(u!==e){var r=c(s,t),i=0===r?0:1/r,a=n[e][u];d+=o[u][e],h+=o[u][e]*(t[0]+a*(s[0]-t[0])*i),p+=o[u][e]*(t[1]+a*(s[1]-t[1])*i)}});var y=0===r[u]?0:1/r[u];d*=i,d+=t*y*y,h*=i,h+=t*y*s[0]*f,s[0]=h/d,p*=i,p+=t*y*s[1]*f,s[1]=p/d}})},e.prototype.eIdealDisMatrix=function(){var t=this,e=t.nodes;if(!e)return[];var r=t.distances,n=t.linkDistance,o=t.radii||[],i=t.unitRadius||50,s=[];return r&&r.forEach(function(r,u){var l=[];r.forEach(function(r,s){if(u===s)l.push(0);else if(o[u]===o[s])if("data"===t.sortBy)l.push(r*(Math.abs(u-s)*t.sortStrength)/(o[u]/i));else if(t.sortBy){var c=e[u][t.sortBy]||0,f=e[s][t.sortBy]||0;(0,a.isString)(c)&&(c=c.charCodeAt(0)),(0,a.isString)(f)&&(f=f.charCodeAt(0)),l.push(r*(Math.abs(c-f)*t.sortStrength)/(o[u]/i))}else l.push(r*n/(o[u]/i));else{var h=(n+i)/2;l.push(r*h)}}),s.push(l)}),s},e.prototype.handleInfinity=function(t,e,r){for(var n=t.length,o=0;o<n;o++)if(t[e][o]===1/0){t[e][o]=r,t[o][e]=r;for(var i=0;i<n;i++)t[o][i]!==1/0&&t[e][i]===1/0&&(t[e][i]=r+t[o][i],t[i][e]=r+t[o][i])}for(o=0;o<n;o++)if(o!==e)for(i=0;i<n;i++)if(t[o][i]===1/0){var a=Math.abs(t[e][o]-t[e][i]);a=0===a?1:a,t[o][i]=a}},e.prototype.maxToFocus=function(t,e){for(var r=0,n=0;n<t[e].length;n++)t[e][n]!==1/0&&(r=t[e][n]>r?t[e][n]:r);return r},e.prototype.getType=function(){return"radial"},e}(s.Base);e.RadialLayout=f},632:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t){this.disp=[],this.positions=t.positions,this.adjMatrix=t.adjMatrix,this.focusID=t.focusID,this.radii=t.radii,this.iterations=t.iterations||10,this.height=t.height||10,this.width=t.width||10,this.speed=t.speed||100,this.gravity=t.gravity||10,this.nodeSizeFunc=t.nodeSizeFunc,this.k=t.k||5,this.strictRadial=t.strictRadial,this.nodes=t.nodes}return t.prototype.layout=function(){var t=this.positions,e=[],r=this.iterations,n=this.width/10;this.maxDisplace=n,this.disp=e;for(var o=0;o<r;o++)t.forEach(function(t,r){e[r]={x:0,y:0}}),this.getRepulsion(),this.updatePositions();return t},t.prototype.getRepulsion=function(){var t=this,e=t.positions,r=t.nodes,n=t.disp,o=t.k,i=t.radii||[];e.forEach(function(a,s){n[s]={x:0,y:0},e.forEach(function(e,u){if(s!==u&&i[s]===i[u]){var l=a[0]-e[0],c=a[1]-e[1],f=Math.sqrt(l*l+c*c);if(0===f){f=1;var h=s>u?1:-1;l=.01*h,c=.01*h}if(f<t.nodeSizeFunc(r[s])/2+t.nodeSizeFunc(r[u])/2){var p=o*o/f;n[s].x+=l/f*p,n[s].y+=c/f*p}}})})},t.prototype.updatePositions=function(){var t=this.positions,e=this.disp,r=this.speed,n=this.strictRadial,o=this.focusID,i=this.maxDisplace||this.width/10;n&&e.forEach(function(e,r){var n=t[r][0]-t[o][0],i=t[r][1]-t[o][1],a=Math.sqrt(n*n+i*i),s=i/a,u=-n/a,l=Math.sqrt(e.x*e.x+e.y*e.y),c=Math.acos((s*e.x+u*e.y)/l);c>Math.PI/2&&(c-=Math.PI/2,s*=-1,u*=-1);var f=Math.cos(c)*l;e.x=s*f,e.y=u*f});var a=this.radii;t.forEach(function(s,u){if(u!==o){var l=Math.sqrt(e[u].x*e[u].x+e[u].y*e[u].y);if(l>0&&u!==o){var c=Math.min(i*(r/800),l);if(s[0]+=e[u].x/l*c,s[1]+=e[u].y/l*c,n){var f=s[0]-t[o][0],h=s[1]-t[o][1],p=Math.sqrt(f*f+h*h);f=f/p*a[u],h=h/p*a[u],s[0]=t[o][0]+f,s[1]=t[o][1]+h}}}})},t}();e.default=r},3846:function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.RandomLayout=void 0;var i=function(t){function e(e){var r=t.call(this)||this;return r.center=[0,0],r.width=300,r.height=300,r.nodes=[],r.edges=[],r.onLayoutEnd=function(){},r.updateCfg(e),r}return o(e,t),e.prototype.getDefaultCfg=function(){return{center:[0,0],width:300,height:300}},e.prototype.execute=function(){var t=this,e=t.nodes,r=t.center;return t.width||"undefined"==typeof window||(t.width=window.innerWidth),t.height||"undefined"==typeof window||(t.height=window.innerHeight),e&&e.forEach(function(e){e.x=.9*(Math.random()-.5)*t.width+r[0],e.y=.9*(Math.random()-.5)*t.height+r[1]}),t.onLayoutEnd&&t.onLayoutEnd(),{nodes:e,edges:this.edges}},e.prototype.getType=function(){return"random"},e}(r(9284).Base);e.RandomLayout=i},8312:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},2235:function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.getLayoutByName=e.unRegisterLayout=e.registerLayout=void 0;var i=r(9284),a=r(8652),s=new Map;e.registerLayout=function(t,e){if(s.get(t)&&console.warn("The layout with the name ".concat(t," exists already, it will be overridden")),(0,a.isObject)(e)){var r=function(t){function r(r){var n,o,i=n=t.call(this)||this,a={},s=Object.assign({},i.getDefaultCfg(),(null===(o=e.getDefaultCfg)||void 0===o?void 0:o.call(e))||{});return Object.assign(a,s,e,r),Object.keys(a).forEach(function(t){var e=a[t];i[t]=e}),n}return o(r,t),r}(i.Base);s.set(t,r)}else s.set(t,e);return s.get(t)};e.unRegisterLayout=function(t){s.has(t)&&s.delete(t)};e.getLayoutByName=function(t){return s.has(t)?s.get(t):null}},5458:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isArray=void 0,e.isArray=Array.isArray},7102:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getFuncByUnknownType=e.getFunc=e.isFunction=void 0;var n=r(8652),o=r(8325);e.isFunction=function(t){return"function"==typeof t};e.getFunc=function(t,e,r){return r||((0,o.isNumber)(t)?function(){return t}:function(){return e})};e.getFuncByUnknownType=function(t,r,i){return void 0===i&&(i=!0),r||0===r?(0,e.isFunction)(r)?r:(0,o.isNumber)(r)?function(){return r}:(0,n.isArray)(r)?function(){if(i){var e=Math.max.apply(Math,r);return isNaN(e)?t:e}return r}:(0,n.isObject)(r)?function(){if(i){var e=Math.max(r.width,r.height);return isNaN(e)?t:e}return[r.width,r.height]}:function(){return t}:function(e){return e.size?(0,n.isArray)(e.size)?e.size[0]>e.size[1]?e.size[0]:e.size[1]:(0,n.isObject)(e.size)?e.size.width>e.size.height?e.size.width:e.size.height:e.size:t}}},446:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.arrayToTextureData=e.attributesToTextureData=e.buildTextureDataWithTwoEdgeAttr=e.buildTextureData=e.proccessToFunc=void 0;var n=r(8652),o=r(3979);e.proccessToFunc=function(t,e){return t?(0,n.isNumber)(t)?function(){return t}:t:function(){return e||1}};e.buildTextureData=function(t,e){var r=[],n=[],i={},a=0;for(a=0;a<t.length;a++){var s=t[a];i[s.id]=a,r.push(s.x),r.push(s.y),r.push(0),r.push(0),n.push([])}for(a=0;a<e.length;a++){var u=e[a],l=(0,o.getEdgeTerminal)(u,"source"),c=(0,o.getEdgeTerminal)(u,"target");isNaN(i[l])||isNaN(i[c])||(n[i[l]].push(i[c]),n[i[c]].push(i[l]))}var f=0;for(a=0;a<t.length;a++){var h=r.length,p=n[a],d=p.length;r[4*a+2]=h,r[4*a+3]=d,f=Math.max(f,d);for(var y=0;y<d;++y){var v=p[y];r.push(+v)}}for(;r.length%4!=0;)r.push(0);return{maxEdgePerVetex:f,array:new Float32Array(r)}};e.buildTextureDataWithTwoEdgeAttr=function(t,e,r,n){var i=[],a=[],s={},u=0;for(u=0;u<t.length;u++){var l=t[u];s[l.id]=u,i.push(l.x),i.push(l.y),i.push(0),i.push(0),a.push([])}for(u=0;u<e.length;u++){var c=e[u],f=(0,o.getEdgeTerminal)(c,"source"),h=(0,o.getEdgeTerminal)(c,"target");a[s[f]].push(s[h]),a[s[f]].push(r(c)),a[s[f]].push(n(c)),a[s[f]].push(0),a[s[h]].push(s[f]),a[s[h]].push(r(c)),a[s[h]].push(n(c)),a[s[h]].push(0)}var p=0;for(u=0;u<t.length;u++){var d=i.length,y=a[u],v=y.length;i[4*u+2]=d+1048576*v/4,i[4*u+3]=0,p=Math.max(p,v/4);for(var g=0;g<v;++g){var m=y[g];i.push(+m)}}for(;i.length%4!=0;)i.push(0);return{maxEdgePerVetex:p,array:new Float32Array(i)}};e.attributesToTextureData=function(t,e){var r=[],n=t.length,o={};return e.forEach(function(e){t.forEach(function(t,i){if(void 0===o[e[t]]&&(o[e[t]]=Object.keys(o).length),r.push(o[e[t]]),i===n-1)for(;r.length%4!=0;)r.push(0)})}),{array:new Float32Array(r),count:Object.keys(o).length}};e.arrayToTextureData=function(t){for(var e=[],r=t.length,n=t[0].length,o=function(n){t.forEach(function(t,o){if(e.push(t[n]),o===r-1)for(;e.length%4!=0;)e.push(0)})},i=0;i<n;i++)o(i);return new Float32Array(e)}},8652:function(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);o&&("get"in o?e.__esModule:!o.writable&&!o.configurable)||(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),o=this&&this.__exportStar||function(t,e){for(var r in t)"default"===r||Object.prototype.hasOwnProperty.call(e,r)||n(e,t,r)};Object.defineProperty(e,"__esModule",{value:!0}),o(r(6515),e),o(r(5458),e),o(r(8325),e),o(r(3979),e),o(r(4584),e),o(r(7102),e)},3979:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getCoreNodeAndRelativeLeafNodes=e.getAvgNodePosition=e.getLayoutBBox=e.traverseTreeUp=e.scaleMatrix=e.getAdjMatrix=e.floydWarshall=e.getDegreeMap=e.getDegree=e.getEdgeTerminal=void 0;var n=r(5458),o=r(8325),i=r(4584);e.getEdgeTerminal=function(t,e){var r=t[e];return(0,i.isObject)(r)?r.cell:r};e.getDegree=function(t,r,n){for(var o=[],i=0;i<t;i++)o[i]={in:0,out:0,all:0};return n?(n.forEach(function(t){var n=(0,e.getEdgeTerminal)(t,"source"),i=(0,e.getEdgeTerminal)(t,"target");n&&o[r[n]]&&(o[r[n]].out+=1,o[r[n]].all+=1),i&&o[r[i]]&&(o[r[i]].in+=1,o[r[i]].all+=1)}),o):o};e.getDegreeMap=function(t,r){var n={};return t.forEach(function(t){n[t.id]={in:0,out:0,all:0}}),r?(r.forEach(function(t){var r=(0,e.getEdgeTerminal)(t,"source"),o=(0,e.getEdgeTerminal)(t,"target");r&&(n[r].out+=1,n[r].all+=1),o&&(n[o].in+=1,n[o].all+=1)}),n):n};e.floydWarshall=function(t){for(var e=[],r=t.length,n=0;n<r;n+=1){e[n]=[];for(var o=0;o<r;o+=1)n===o?e[n][o]=0:0!==t[n][o]&&t[n][o]?e[n][o]=t[n][o]:e[n][o]=1/0}for(var i=0;i<r;i+=1)for(n=0;n<r;n+=1)for(o=0;o<r;o+=1)e[n][o]>e[n][i]+e[i][o]&&(e[n][o]=e[n][i]+e[i][o]);return e};e.getAdjMatrix=function(t,r){var n=t.nodes,o=t.edges,i=[],a={};if(!n)throw new Error("invalid nodes data!");return n&&n.forEach(function(t,e){a[t.id]=e,i.push([])}),null===o||void 0===o||o.forEach(function(t){var n=(0,e.getEdgeTerminal)(t,"source"),o=(0,e.getEdgeTerminal)(t,"target"),s=a[n],u=a[o];void 0!==s&&void 0!==u&&(i[s][u]=1,r||(i[u][s]=1))}),i};e.scaleMatrix=function(t,e){var r=[];return t.forEach(function(t){var n=[];t.forEach(function(t){n.push(t*e)}),r.push(n)}),r};e.traverseTreeUp=function(t,e){"function"==typeof e&&function t(e,r){if(e&&e.children)for(var n=e.children.length-1;n>=0;n--)if(!t(e.children[n],r))return;return!!r(e)}(t,e)};e.getLayoutBBox=function(t){var e=1/0,r=1/0,i=-1/0,a=-1/0;return t.forEach(function(t){var s=t.size;(0,n.isArray)(s)?1===s.length&&(s=[s[0],s[0]]):(0,o.isNumber)(s)?s=[s,s]:(void 0===s||isNaN(s))&&(s=[30,30]);var u=[s[0]/2,s[1]/2],l=t.x-u[0],c=t.x+u[0],f=t.y-u[1],h=t.y+u[1];e>l&&(e=l),r>f&&(r=f),i<c&&(i=c),a<h&&(a=h)}),{minX:e,minY:r,maxX:i,maxY:a}};e.getAvgNodePosition=function(t){var e={x:0,y:0};t.forEach(function(t){e.x+=t.x||0,e.y+=t.y||0});var r=t.length||1;return{x:e.x/r,y:e.y/r}};var a=function(t,e,r){var n,o;return"source"===t?(null===(n=null===r||void 0===r?void 0:r.find(function(t){return t.target===e.id}))||void 0===n?void 0:n.source)||{}:(null===(o=null===r||void 0===r?void 0:r.find(function(t){return t.source===e.id}))||void 0===o?void 0:o.target)||{}},s=function(t,e,r){var n=[];switch(t){case"source":n=null===r||void 0===r?void 0:r.filter(function(t){return t.source===e.id}).map(function(t){return t.target});break;case"target":n=null===r||void 0===r?void 0:r.filter(function(t){return t.target===e.id}).map(function(t){return t.source});break;case"both":n=null===r||void 0===r?void 0:r.filter(function(t){return t.source===e.id}).map(function(t){return t.target}).concat(null===r||void 0===r?void 0:r.filter(function(t){return t.target===e.id}).map(function(t){return t.source}))}var o=new Set(n);return Array.from(o)};e.getCoreNodeAndRelativeLeafNodes=function(t,e,r,n,o,i){var u=o[e.id],l=u.in,c=u.out,f=e,h=[];return 0===l?(f=a("source",e,r),h=s("both",f,r).map(function(t){return i[t]})):0===c&&(f=a("target",e,r),h=s("both",f,r).map(function(t){return i[t]})),{coreNode:f,relativeLeafNodes:h=h.filter(function(t){return o[t.id]&&(0===o[t.id].in||0===o[t.id].out)}),sameTypeLeafNodes:function(t,e,r,n,o){var i=r[e]||"",a=(null===n||void 0===n?void 0:n.filter(function(t){return t[e]===i}))||[];return"leaf"===t&&(a=a.filter(function(t){var e,r;return 0===(null===(e=o[t.id])||void 0===e?void 0:e.in)||0===(null===(r=o[t.id])||void 0===r?void 0:r.out)})),a}(t,n,e,h,o)}}},8325:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.toNumber=e.isNaN=e.isNumber=void 0;e.isNumber=function(t){return"number"==typeof t};e.isNaN=function(t){return Number.isNaN(Number(t))};e.toNumber=function(t){var r=parseFloat(t);return(0,e.isNaN)(r)?t:r}},4584:function(t,e){"use strict";function r(t){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var n=this&&this.__assign||function(){return(n=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.clone=e.isObject=void 0;e.isObject=function(t){return null!==t&&"object"===r(t)};e.clone=function(t){if(null===t)return t;if(t instanceof Date)return new Date(t.getTime());if(t instanceof Array){var o=[];return t.forEach(function(t){o.push(t)}),o.map(function(t){return(0,e.clone)(t)})}if("object"===r(t)&&Object.keys(t).length){var i=n({},t);return Object.keys(i).forEach(function(t){i[t]=(0,e.clone)(i[t])}),i}return t}},6515:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.camelize=e.isString=void 0;e.isString=function(t){return"string"==typeof t};var r,n,o=/-(\w)/g;e.camelize=(r=function(t){return t.replace(o,function(t,e){return e?e.toUpperCase():""})},n=Object.create(null),function(t){return n[t]||(n[t]=r(t))})},4171:function(t,e,r){"use strict";function n(t){return[parseInt(t.substr(1,2),16),parseInt(t.substr(3,2),16),parseInt(t.substr(5,2),16)]}function o(t){var e=Math.round(t).toString(16);return 1===e.length?"0"+e:e}function i(t){return"#"+o(t[0])+o(t[1])+o(t[2])}r.r(e),r.d(e,{Cache:function(){return zr},angleTo:function(){return E},arcToCubic:function(){return Y},assign:function(){return hr},augment:function(){return pr},clamp:function(){return we},clearAnimationFrame:function(){return cr},clone:function(){return yr},clonePath:function(){return $},contains:function(){return _t},createDOM:function(){return Zr},debounce:function(){return vr},deepMix:function(){return wr},difference:function(){return Ot},direction:function(){return _},distanceSquareRoot:function(){return et},each:function(){return jt},endsWith:function(){return ue},equalizeSegments:function(){return St},every:function(){return le},extend:function(){return Sr},filter:function(){return Et},find:function(){return Bt},findIndex:function(){return Ft},firstValue:function(){return Gt},fixedBase:function(){return Se},flatten:function(){return Ut},flattenDeep:function(){return zt},forIn:function(){return Fe},get:function(){return Ar},getDrawDirection:function(){return vt},getPathArea:function(){return yt},getPathBBox:function(){return ft},getPathBBoxTotalLength:function(){return pt},getPointAtLength:function(){return gt},getRange:function(){return Wt},getRotatedCurve:function(){return dt},getTotalLength:function(){return ht},getType:function(){return Qe},getWrapBehavior:function(){return ye},gradient:function(){return h},group:function(){return de},groupBy:function(){return he},groupToMap:function(){return pe},has:function(){return Ge},hasKey:function(){return Ue},hasValue:function(){return Ve},head:function(){return ie},identity:function(){return Gr},includes:function(){return _t},indexOf:function(){return xr},isArguments:function(){return Ze},isArray:function(){return Tt},isArrayLike:function(){return xt},isBoolean:function(){return $e},isDate:function(){return tr},isDecimal:function(){return _e},isElement:function(){return ur},isEmpty:function(){return Er},isEqual:function(){return Or},isEqualWith:function(){return Pr},isError:function(){return er},isEven:function(){return Ee},isFinite:function(){return rr},isFunction:function(){return a},isInteger:function(){return Oe},isMatch:function(){return Nt},isNegative:function(){return Pe},isNil:function(){return Pt},isNull:function(){return nr},isNumber:function(){return xe},isNumberEqual:function(){return Ce},isObject:function(){return Mt},isObjectLike:function(){return Rt},isOdd:function(){return Te},isPlainObject:function(){return Dt},isPointInPolygon:function(){return qr},isPointInStroke:function(){return bt},isPolygonsIntersect:function(){return Qr},isPositive:function(){return Ae},isPrototype:function(){return ir},isRegExp:function(){return ar},isString:function(){return te},isType:function(){return Ct},isUndefined:function(){return sr},keys:function(){return It},last:function(){return ae},lowerCase:function(){return We},lowerFirst:function(){return qe},map:function(){return kr},mapValues:function(){return Tr},max:function(){return Vt},maxBy:function(){return Me},memoize:function(){return u},min:function(){return Ht},minBy:function(){return je},mix:function(){return hr},mod:function(){return Ie},modifyCSS:function(){return $r},noop:function(){return Fr},normalizePath:function(){return W},number2color:function(){return me},omit:function(){return Nr},parseRadius:function(){return be},path2Absolute:function(){return V},path2Array:function(){return Z},path2Curve:function(){return Q},path2String:function(){return P},pick:function(){return Ir},pull:function(){return Jt},pullAt:function(){return Qt},reduce:function(){return Zt},remove:function(){return $t},requestAnimationFrame:function(){return lr},reverseCurve:function(){return tt},rgb2arr:function(){return n},set:function(){return Mr},size:function(){return Ur},some:function(){return ce},sortBy:function(){return ee},startsWith:function(){return se},substitute:function(){return Ye},throttle:function(){return Lr},toArray:function(){return Rr},toCSSGradient:function(){return v},toDegree:function(){return Le},toInteger:function(){return Re},toRGB:function(){return c},toRadian:function(){return Be},toString:function(){return He},transform:function(){return S},union:function(){return ne},uniq:function(){return re},uniqueId:function(){return Br},upperCase:function(){return Xe},upperFirst:function(){return Je},values:function(){return ze},valuesOfKey:function(){return oe},vertical:function(){return O},wrapBehavior:function(){return ve}});var a=function(t){return"function"==typeof t};var s,u=function(t,e,r){if(void 0===r&&(r=128),!a(t))throw new TypeError("Expected a function");var n=function r(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];var i=e?e.apply(this,n):n[0],a=r.cache;if(a.has(i))return a.get(i);var s=t.apply(this,n);return a.set(i,s),s};return n.cache=function(t){var e,r,n,o=t||1;function i(t,i){++e>o&&(n=r,a(1),++e),r[t]=i}function a(t){e=0,r=Object.create(null),t||(n=Object.create(null))}return a(),{clear:a,has:function(t){return void 0!==r[t]||void 0!==n[t]},get:function(t){var e=r[t];return void 0!==e?e:void 0!==(e=n[t])?(i(t,e),e):void 0},set:function(t,e){void 0!==r[t]?r[t]=e:i(t,e)}}}(r),n},l=/rgba?\(([\s.,0-9]+)\)/;var c=u(function(t){if("#"===t[0]&&7===t.length)return t;var e;s||((e=document.createElement("i")).title="Web Colour Picker",e.style.display="none",document.body.appendChild(e),s=e),s.style.color=t;var r=document.defaultView.getComputedStyle(s,"").getPropertyValue("color");return r=i(l.exec(r)[1].split(/\s*,\s*/).map(function(t){return Number(t)}))},function(t){return t},256);function f(t,e,r,n){return t[n]+(e[n]-t[n])*r}function h(t){var e=("string"==typeof t?t.split("-"):t).map(function(t){return n(-1===t.indexOf("#")?c(t):t)});return function(t){return function(t,e){var r=isNaN(Number(e))||e<0?0:e>1?1:Number(e),n=t.length-1,o=Math.floor(n*r),a=n*r-o,s=t[o],u=o===n?s:t[o+1];return i([f(s,u,a,0),f(s,u,a,1),f(s,u,a,2)])}(e,t)}}var p=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,d=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,y=/[\d.]+:(#[^\s]+|[^)]+\))/gi;function v(t){if(/^[r,R,L,l]{1}[\s]*\(/.test(t)){var e,r=void 0;if("l"===t[0]){var n=+(o=p.exec(t))[1]+90;r=o[2],e="linear-gradient("+n+"deg, "}else if("r"===t[0]){var o;e="radial-gradient(",r=(o=d.exec(t))[4]}var i=r.match(y);return i.forEach(function(t,r){var n=t.split(":");e+=n[1]+" "+100*Number(n[0])+"%",r!==i.length-1&&(e+=", ")}),e+=")"}return t}var g=r(8610);function m(t,e,r){var n=[0,0,0,0,0,0,0,0,0];return g.fromRotation(n,r),g.multiply(t,n,e)}function b(t,e,r){var n=[0,0,0,0,0,0,0,0,0];return g.fromScaling(n,r),g.multiply(t,n,e)}function w(t,e,r){return g.multiply(t,r,e)}function S(t,e){for(var r,n,o,i,a=t?[].concat(t):[1,0,0,0,1,0,0,0,1],s=0,u=e.length;s<u;s++){var l=e[s];switch(l[0]){case"t":r=a,n=a,o=[l[1],l[2]],void 0,i=[0,0,0,0,0,0,0,0,0],g.fromTranslation(i,o),g.multiply(r,i,n);break;case"s":b(a,a,[l[1],l[2]]);break;case"r":m(a,a,l[1]);break;case"m":w(a,a,l[1])}}return a}var x=r(8699);function _(t,e){return t[0]*e[1]-e[0]*t[1]}function E(t,e,r){var n=x.angle(t,e),o=_(t,e)>=0;return r?o?2*Math.PI-n:n:o?n:2*Math.PI-n}function O(t,e,r){return r?(t[0]=e[1],t[1]=-1*e[0]):(t[0]=-1*e[1],t[1]=e[0]),t}function P(t,e){return void 0===e&&(e="off"),function(t,e){if("off"===e)return[].concat(t);var r="number"==typeof e&&e>=1?Math.pow(10,e):1;return t.map(function(t){var n=t.slice(1).map(Number).map(function(t){return e?Math.round(t*r)/r:Math.round(t)});return[t[0]].concat(n)})}(t,e).map(function(t){return t[0]+t.slice(1).join(" ")}).join("")}var k=r(7582),C={x1:0,y1:0,x2:0,y2:0,x:0,y:0,qx:null,qy:null};function T(t,e,r){if(t[r].length>7){t[r].shift();for(var n=t[r],o=r;n.length;)e[r]="A",t.splice(o+=1,0,["C"].concat(n.splice(0,6)));t.splice(r,1)}}var A={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0};function M(t){return Array.isArray(t)&&t.every(function(t){var e=t[0].toLowerCase();return A[e]===t.length-1&&"achlmqstvz".includes(e)})}function j(t){return M(t)&&t.every(function(t){var e=t[0];return e===e.toUpperCase()})}function I(t){return j(t)&&t.every(function(t){var e=t[0];return"ACLMQZ".includes(e)})}function N(t){for(var e=t.pathValue[t.segmentStart],r=e.toLowerCase(),n=t.data;n.length>=A[r]&&("m"===r&&n.length>2?(t.segments.push([e].concat(n.splice(0,2))),r="l",e="m"===e?"l":"L"):t.segments.push([e].concat(n.splice(0,A[r]))),A[r]););}function L(t){var e=t.index,r=t.pathValue,n=r.charCodeAt(e);return 48===n?(t.param=0,void(t.index+=1)):49===n?(t.param=1,void(t.index+=1)):void(t.err='[path-util]: invalid Arc flag "'+r[e]+'", expecting 0 or 1 at index '+e)}function R(t){return t>=48&&t<=57||43===t||45===t||46===t}function D(t){return t>=48&&t<=57}function B(t){var e,r=t.max,n=t.pathValue,o=t.index,i=o,a=!1,s=!1,u=!1,l=!1;if(i>=r)t.err="[path-util]: Invalid path value at index "+i+', "pathValue" is missing param';else if(43!==(e=n.charCodeAt(i))&&45!==e||(i+=1,e=n.charCodeAt(i)),D(e)||46===e){if(46!==e){if(a=48===e,i+=1,e=n.charCodeAt(i),a&&i<r&&e&&D(e))return void(t.err="[path-util]: Invalid path value at index "+o+', "'+n[o]+'" illegal number');for(;i<r&&D(n.charCodeAt(i));)i+=1,s=!0;e=n.charCodeAt(i)}if(46===e){for(l=!0,i+=1;D(n.charCodeAt(i));)i+=1,u=!0;e=n.charCodeAt(i)}if(101===e||69===e){if(l&&!s&&!u)return void(t.err="[path-util]: Invalid path value at index "+i+', "'+n[i]+'" invalid float exponent');if(i+=1,43!==(e=n.charCodeAt(i))&&45!==e||(i+=1),!(i<r&&D(n.charCodeAt(i))))return void(t.err="[path-util]: Invalid path value at index "+i+', "'+n[i]+'" invalid integer exponent');for(;i<r&&D(n.charCodeAt(i));)i+=1}t.index=i,t.param=+t.pathValue.slice(o,i)}else t.err="[path-util]: Invalid path value at index "+i+', "'+n[i]+'" is not a number'}function F(t){for(var e,r=t.pathValue,n=t.max;t.index<n&&(10===(e=r.charCodeAt(t.index))||13===e||8232===e||8233===e||32===e||9===e||11===e||12===e||160===e||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].includes(e));)t.index+=1}function G(t){var e=t.max,r=t.pathValue,n=t.index,o=r.charCodeAt(n),i=A[r[n].toLowerCase()];if(t.segmentStart=n,function(t){switch(32|t){case 109:case 122:case 108:case 104:case 118:case 99:case 115:case 113:case 116:case 97:return!0;default:return!1}}(o))if(t.index+=1,F(t),t.data=[],i){for(;;){for(var a=i;a>0;a-=1){if(97!=(32|o)||3!==a&&4!==a?B(t):L(t),t.err.length)return;t.data.push(t.param),F(t),t.index<e&&44===r.charCodeAt(t.index)&&(t.index+=1,F(t))}if(t.index>=t.max)break;if(!R(r.charCodeAt(t.index)))break}N(t)}else N(t);else t.err='[path-util]: Invalid path value "'+r[n]+'" is not a path command'}var U=function(){return function(t){this.pathValue=t,this.segments=[],this.max=t.length,this.index=0,this.param=0,this.segmentStart=0,this.data=[],this.err=""}}();function z(t){if(M(t))return[].concat(t);var e=new U(t);for(F(e);e.index<e.max&&!e.err.length;)G(e);return e.err?e.err:e.segments}function V(t){if(j(t))return[].concat(t);var e=0,r=0,n=0,o=0;return z(t).map(function(t){var i,a=t.slice(1).map(Number),s=t[0],u=s.toUpperCase();if("M"===s)return e=a[0],r=a[1],n=e,o=r,["M",e,r];if(s!==u)switch(u){case"A":i=[u,a[0],a[1],a[2],a[3],a[4],a[5]+e,a[6]+r];break;case"V":i=[u,a[0]+r];break;case"H":i=[u,a[0]+e];break;default:var l=a.map(function(t,n){return t+(n%2?r:e)});i=[u].concat(l)}else i=[u].concat(a);var c=i.length;switch(u){case"Z":e=n,r=o;break;case"H":e=i[1];break;case"V":r=i[1];break;default:e=i[c-2],r=i[c-1],"M"===u&&(n=e,o=r)}return i})}function H(t,e){var r=t[0],n=e.x1,o=e.y1,i=e.x2,a=e.y2,s=t.slice(1).map(Number),u=t;if("TQ".includes(r)||(e.qx=null,e.qy=null),"H"===r)u=["L",t[1],o];else if("V"===r)u=["L",n,t[1]];else if("S"===r){var l=2*n-i,c=2*o-a;e.x1=l,e.y1=c,u=["C",l,c].concat(s)}else if("T"===r){var f=2*n-e.qx,h=2*o-e.qy;e.qx=f,e.qy=h,u=["Q",f,h].concat(s)}else if("Q"===r){var p=s[0],d=s[1];e.qx=p,e.qy=d}return u}function W(t){if(I(t))return[].concat(t);for(var e=V(t),r=(0,k.__assign)({},C),n=0;n<e.length;n+=1){e[n]=H(e[n],r);var o=e[n],i=o.length;r.x1=+o[i-2],r.y1=+o[i-1],r.x2=+o[i-4]||r.x1,r.y2=+o[i-3]||r.y1}return e}function q(t,e,r){return{x:t*Math.cos(r)-e*Math.sin(r),y:t*Math.sin(r)+e*Math.cos(r)}}function Y(t,e,r,n,o,i,a,s,u,l){var c,f,h,p,d,y=t,v=e,g=r,m=n,b=s,w=u,S=120*Math.PI/180,x=Math.PI/180*(+o||0),_=[];if(l)f=l[0],h=l[1],p=l[2],d=l[3];else{y=(c=q(y,v,-x)).x,v=c.y;var E=(y-(b=(c=q(b,w,-x)).x))/2,O=(v-(w=c.y))/2,P=E*E/(g*g)+O*O/(m*m);P>1&&(g*=P=Math.sqrt(P),m*=P);var k=g*g,C=m*m,T=(i===a?-1:1)*Math.sqrt(Math.abs((k*C-k*O*O-C*E*E)/(k*O*O+C*E*E)));p=T*g*O/m+(y+b)/2,d=T*-m*E/g+(v+w)/2,f=Math.asin(((v-d)/m*Math.pow(10,9)>>0)/Math.pow(10,9)),h=Math.asin(((w-d)/m*Math.pow(10,9)>>0)/Math.pow(10,9)),f=y<p?Math.PI-f:f,h=b<p?Math.PI-h:h,f<0&&(f=2*Math.PI+f),h<0&&(h=2*Math.PI+h),a&&f>h&&(f-=2*Math.PI),!a&&h>f&&(h-=2*Math.PI)}var A=h-f;if(Math.abs(A)>S){var M=h,j=b,I=w;h=f+S*(a&&h>f?1:-1),_=Y(b=p+g*Math.cos(h),w=d+m*Math.sin(h),g,m,o,0,a,j,I,[h,M,p,d])}A=h-f;var N=Math.cos(f),L=Math.sin(f),R=Math.cos(h),D=Math.sin(h),B=Math.tan(A/4),F=4/3*g*B,G=4/3*m*B,U=[y,v],z=[y+F*L,v-G*N],V=[b+F*D,w-G*R],H=[b,w];if(z[0]=2*U[0]-z[0],z[1]=2*U[1]-z[1],l)return z.concat(V,H,_);for(var W=[],X=0,J=(_=z.concat(V,H,_)).length;X<J;X+=1)W[X]=X%2?q(_[X-1],_[X],x).y:q(_[X],_[X+1],x).x;return W}function X(t,e,r){var n=t[0],o=t[1];return[n+(e[0]-n)*r,o+(e[1]-o)*r]}var J=function(t,e,r,n){var o=X([t,e],[r,n],.5);return(0,k.__spreadArray)((0,k.__spreadArray)([],o,!0),[r,n,r,n],!1)};function K(t,e){var r,n,o,i,a,s,u,l=t[0],c=t.slice(1).map(Number),f=c[0],h=c[1],p=e.x1,d=e.y1,y=e.x,v=e.y;switch("TQ".includes(l)||(e.qx=null,e.qy=null),l){case"M":return e.x=f,e.y=h,t;case"A":return r=[p,d].concat(c),["C"].concat(Y(r[0],r[1],r[2],r[3],r[4],r[5],r[6],r[7],r[8],r[9]));case"Q":return e.qx=f,e.qy=h,r=[p,d].concat(c),["C"].concat((n=r[0],o=r[1],i=r[2],a=r[3],s=r[4],u=r[5],[1/3*n+2/3*i,1/3*o+2/3*a,1/3*s+2/3*i,1/3*u+2/3*a,s,u]));case"L":return["C"].concat(J(p,d,f,h));case"Z":return p===y&&d===v?["C",p,d,y,v,y,v]:["C"].concat(J(p,d,y,v))}return t}function Q(t,e){if(void 0===e&&(e=!1),function(t){return I(t)&&t.every(function(t){var e=t[0];return"MC".includes(e)})}(t)){var r=[].concat(t);return e?[r,[]]:r}for(var n,o,i=W(t),a=(0,k.__assign)({},C),s=[],u="",l=i.length,c=[],f=0;f<l;f+=1){i[f]&&(u=i[f][0]),s[f]=u;var h=K(i[f],a);i[f]=h,T(i,s,f),l=i.length,"Z"===u&&c.push(f),o=(n=i[f]).length,a.x1=+n[o-2],a.y1=+n[o-1],a.x2=+n[o-4]||a.x1,a.y2=+n[o-3]||a.y1}return e?[i,c]:i}function Z(t){return z(t)}function $(t){return t.map(function(t){return Array.isArray(t)?[].concat(t):t})}function tt(t){var e=t.slice(1).map(function(e,r,n){return r?n[r-1].slice(-2).concat(e.slice(1)):t[0].slice(1).concat(e.slice(1))}).map(function(t){return t.map(function(e,r){return t[t.length-r-2*(1-r%2)]})}).reverse();return[["M"].concat(e[0].slice(0,2))].concat(e.map(function(t){return["C"].concat(t.slice(2))}))}function et(t,e){return Math.sqrt((t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1]))}function rt(t,e,r,n,o){var i=et([t,e],[r,n]),a={x:0,y:0};if("number"==typeof o)if(o<=0)a={x:t,y:e};else if(o>=i)a={x:r,y:n};else{var s=X([t,e],[r,n],o/i);a={x:s[0],y:s[1]}}return{length:i,point:a,min:{x:Math.min(t,r),y:Math.min(e,n)},max:{x:Math.max(t,r),y:Math.max(e,n)}}}function nt(t,e){var r=t.x,n=t.y,o=e.x,i=e.y,a=r*o+n*i,s=Math.sqrt((Math.pow(r,2)+Math.pow(n,2))*(Math.pow(o,2)+Math.pow(i,2)));return(r*i-n*o<0?-1:1)*Math.acos(a/s)}function ot(t,e,r,n,o,i,a,s,u,l){var c=Math.abs,f=Math.sin,h=Math.cos,p=Math.sqrt,d=Math.PI,y=c(r),v=c(n),g=(o%360+360)%360*(d/180);if(t===s&&e===u)return{x:t,y:e};if(0===y||0===v)return rt(t,e,s,u,l).point;var m=(t-s)/2,b=(e-u)/2,w={x:h(g)*m+f(g)*b,y:-f(g)*m+h(g)*b},S=Math.pow(w.x,2)/Math.pow(y,2)+Math.pow(w.y,2)/Math.pow(v,2);S>1&&(y*=p(S),v*=p(S));var x=(Math.pow(y,2)*Math.pow(v,2)-Math.pow(y,2)*Math.pow(w.y,2)-Math.pow(v,2)*Math.pow(w.x,2))/(Math.pow(y,2)*Math.pow(w.y,2)+Math.pow(v,2)*Math.pow(w.x,2));x=x<0?0:x;var _=(i!==a?1:-1)*p(x),E=_*(y*w.y/v),O=_*(-v*w.x/y),P=h(g)*E-f(g)*O+(t+s)/2,k=f(g)*E+h(g)*O+(e+u)/2,C={x:(w.x-E)/y,y:(w.y-O)/v},T=nt({x:1,y:0},C),A=nt(C,{x:(-w.x-E)/y,y:(-w.y-O)/v});!a&&A>0?A-=2*d:a&&A<0&&(A+=2*d);var M=T+(A%=2*d)*l,j=y*h(M),I=v*f(M);return{x:h(g)*j-f(g)*I+P,y:f(g)*j+h(g)*I+k}}function it(t,e,r,n,o,i,a,s,u,l,c){var f,h=c.bbox,p=void 0===h||h,d=c.length,y=void 0===d||d,v=c.sampleSize,g=void 0===v?30:v,m="number"==typeof l,b=t,w=e,S=0,x=[b,w,S],_=[b,w],E={x:0,y:0},O=[{x:b,y:w}];m&&l<=0&&(E={x:b,y:w});for(var P=0;P<=g;P+=1){if(b=(f=ot(t,e,r,n,o,i,a,s,u,P/g)).x,w=f.y,p&&O.push({x:b,y:w}),y&&(S+=et(_,[b,w])),_=[b,w],m&&S>=l&&l>x[2]){var k=(S-l)/(S-x[2]);E={x:_[0]*(1-k)+x[0]*k,y:_[1]*(1-k)+x[1]*k}}x=[b,w,S]}return m&&l>=S&&(E={x:s,y:u}),{length:S,point:E,min:{x:Math.min.apply(null,O.map(function(t){return t.x})),y:Math.min.apply(null,O.map(function(t){return t.y}))},max:{x:Math.max.apply(null,O.map(function(t){return t.x})),y:Math.max.apply(null,O.map(function(t){return t.y}))}}}function at(t,e,r,n,o,i,a,s,u){var l=1-u;return{x:Math.pow(l,3)*t+3*Math.pow(l,2)*u*r+3*l*Math.pow(u,2)*o+Math.pow(u,3)*a,y:Math.pow(l,3)*e+3*Math.pow(l,2)*u*n+3*l*Math.pow(u,2)*i+Math.pow(u,3)*s}}function st(t,e,r,n,o,i,a,s,u,l){var c,f=l.bbox,h=void 0===f||f,p=l.length,d=void 0===p||p,y=l.sampleSize,v=void 0===y?10:y,g="number"==typeof u,m=t,b=e,w=0,S=[m,b,w],x=[m,b],_={x:0,y:0},E=[{x:m,y:b}];g&&u<=0&&(_={x:m,y:b});for(var O=0;O<=v;O+=1){if(m=(c=at(t,e,r,n,o,i,a,s,O/v)).x,b=c.y,h&&E.push({x:m,y:b}),d&&(w+=et(x,[m,b])),x=[m,b],g&&w>=u&&u>S[2]){var P=(w-u)/(w-S[2]);_={x:x[0]*(1-P)+S[0]*P,y:x[1]*(1-P)+S[1]*P}}S=[m,b,w]}return g&&u>=w&&(_={x:a,y:s}),{length:w,point:_,min:{x:Math.min.apply(null,E.map(function(t){return t.x})),y:Math.min.apply(null,E.map(function(t){return t.y}))},max:{x:Math.max.apply(null,E.map(function(t){return t.x})),y:Math.max.apply(null,E.map(function(t){return t.y}))}}}function ut(t,e,r,n,o,i,a){var s=1-a;return{x:Math.pow(s,2)*t+2*s*a*r+Math.pow(a,2)*o,y:Math.pow(s,2)*e+2*s*a*n+Math.pow(a,2)*i}}function lt(t,e,r,n,o,i,a,s){var u,l=s.bbox,c=void 0===l||l,f=s.length,h=void 0===f||f,p=s.sampleSize,d=void 0===p?10:p,y="number"==typeof a,v=t,g=e,m=0,b=[v,g,m],w=[v,g],S={x:0,y:0},x=[{x:v,y:g}];y&&a<=0&&(S={x:v,y:g});for(var _=0;_<=d;_+=1){if(v=(u=ut(t,e,r,n,o,i,_/d)).x,g=u.y,c&&x.push({x:v,y:g}),h&&(m+=et(w,[v,g])),w=[v,g],y&&m>=a&&a>b[2]){var E=(m-a)/(m-b[2]);S={x:w[0]*(1-E)+b[0]*E,y:w[1]*(1-E)+b[1]*E}}b=[v,g,m]}return y&&a>=m&&(S={x:o,y:i}),{length:m,point:S,min:{x:Math.min.apply(null,x.map(function(t){return t.x})),y:Math.min.apply(null,x.map(function(t){return t.y}))},max:{x:Math.max.apply(null,x.map(function(t){return t.x})),y:Math.max.apply(null,x.map(function(t){return t.y}))}}}function ct(t,e,r){for(var n,o,i,a,s,u,l,c,f,h=W(t),p="number"==typeof e,d=[],y=0,v=0,g=0,m=0,b=[],w=[],S=0,x={x:0,y:0},_=x,E=x,O=x,P=0,k=0,C=h.length;k<C;k+=1)d=(l="M"===(c=(f=h[k])[0]))?d:[y,v].concat(f.slice(1)),l?(_=x={x:g=f[1],y:m=f[2]},S=0,p&&e<.001&&(O=x)):"L"===c?(S=(n=rt(d[0],d[1],d[2],d[3],(e||0)-P)).length,x=n.min,_=n.max,E=n.point):"A"===c?(S=(o=it(d[0],d[1],d[2],d[3],d[4],d[5],d[6],d[7],d[8],(e||0)-P,r||{})).length,x=o.min,_=o.max,E=o.point):"C"===c?(S=(i=st(d[0],d[1],d[2],d[3],d[4],d[5],d[6],d[7],(e||0)-P,r||{})).length,x=i.min,_=i.max,E=i.point):"Q"===c?(S=(a=lt(d[0],d[1],d[2],d[3],d[4],d[5],(e||0)-P,r||{})).length,x=a.min,_=a.max,E=a.point):"Z"===c&&(S=(s=rt((d=[y,v,g,m])[0],d[1],d[2],d[3],(e||0)-P)).length,x=s.min,_=s.max,E=s.point),p&&P<e&&P+S>=e&&(O=E),w.push(_),b.push(x),P+=S,y=(u="Z"!==c?f.slice(-2):[g,m])[0],v=u[1];return p&&e>=P&&(O={x:y,y:v}),{length:P,point:O,min:{x:Math.min.apply(null,b.map(function(t){return t.x})),y:Math.min.apply(null,b.map(function(t){return t.y}))},max:{x:Math.max.apply(null,w.map(function(t){return t.x})),y:Math.max.apply(null,w.map(function(t){return t.y}))}}}function ft(t,e){if(!t)return{x:0,y:0,width:0,height:0,x2:0,y2:0,cx:0,cy:0,cz:0};var r=ct(t,void 0,(0,k.__assign)((0,k.__assign)({},e),{length:!1})),n=r.min,o=n.x,i=n.y,a=r.max,s=a.x,u=a.y,l=s-o,c=u-i;return{width:l,height:c,x:o,y:i,x2:s,y2:u,cx:o+l/2,cy:i+c/2,cz:Math.max(l,c)+Math.min(l,c)/2}}function ht(t,e){return ct(t,void 0,(0,k.__assign)((0,k.__assign)({},e),{bbox:!1,length:!0})).length}function pt(t,e){if(!t)return{length:0,x:0,y:0,width:0,height:0,x2:0,y2:0,cx:0,cy:0,cz:0};var r=ct(t,void 0,(0,k.__assign)((0,k.__assign)({},e),{bbox:!0,length:!0})),n=r.length,o=r.min,i=o.x,a=o.y,s=r.max,u=s.x,l=s.y,c=u-i,f=l-a;return{length:n,width:c,height:f,x:i,y:a,x2:u,y2:l,cx:i+c/2,cy:a+f/2,cz:Math.max(c,f)+Math.min(c,f)/2}}function dt(t,e){var r=t.length-1,n=[],o=0,i=function(t){var e=t.length,r=e-1;return t.map(function(n,o){return t.map(function(n,i){var a,s=o+i;return 0===i||t[s]&&"M"===t[s][0]?(a=t[s],["M"].concat(a.slice(-2))):(s>=e&&(s-=r),t[s])})})}(t);return i.forEach(function(i,a){t.slice(1).forEach(function(n,i){o+=et(t[(a+i)%r].slice(-2),e[i%r].slice(-2))}),n[a]=o,o=0}),i[n.indexOf(Math.min.apply(null,n))]}function yt(t){var e=0,r=0,n=0;return Q(t).map(function(t){var o;switch(t[0]){case"M":return e=t[1],r=t[2],0;default:var i=t.slice(1),a=i[0],s=i[1],u=i[2],l=i[3],c=i[4],f=i[5];return n=function(t,e,r,n,o,i,a,s){return 3*((s-e)*(r+o)-(a-t)*(n+i)+n*(t-o)-r*(e-i)+s*(o+t/3)-a*(i+e/3))/20}(e,r,a,s,u,l,c,f),o=t.slice(-2),e=o[0],r=o[1],n}}).reduce(function(t,e){return t+e},0)}function vt(t){return yt(t)>=0}function gt(t,e,r){return ct(t,e,(0,k.__assign)((0,k.__assign)({},r),{bbox:!1,length:!0})).point}function mt(t,e){for(var r,n,o,i,a=z(t),s=W(a),u=ht(a),l=function(t){var r=t.x-e.x,n=t.y-e.y;return r*r+n*n},c=8,f=0,h=0,p=1/0,d=0;d<=u;d+=c)(f=l(r=gt(s,d)))<p&&(n=r,h=d,p=f);c/=2;for(var y=0,v=0,g=0,m=0;c>.5;)g=l(o=gt(s,y=h-c)),m=l(i=gt(s,v=h+c)),y>=0&&g<p?(n=o,h=y,p=g):v<=u&&m<p?(n=i,h=v,p=m):c/=2;var b=function(t,e){var r=z(t);if("string"==typeof r)throw TypeError(r);var n=r.slice(),o=ht(n),i=n.length-1,a=0,s=0,u=r[0],l=u.slice(-2),c={x:l[0],y:l[1]};if(i<=0||!e||!Number.isFinite(e))return{segment:u,index:0,length:s,point:c,lengthAtSegment:a};if(e>=o)return s=o-(a=ht(n=r.slice(0,-1))),{segment:r[i],index:i,length:s,lengthAtSegment:a};for(var f=[];i>0;)u=n[i],s=o-(a=ht(n=n.slice(0,-1))),o=a,f.push({segment:u,index:i,length:s,lengthAtSegment:a}),i-=1;return f.find(function(t){return t.lengthAtSegment<=e})}(a,h);return{closest:n,distance:Math.sqrt(p),segment:b}}function bt(t,e){var r=mt(t,e).distance;return Math.abs(r)<.001}function wt(t){return t.map(function(t,e,r){var n=e&&r[e-1].slice(-2).concat(t.slice(1)),o=e?st(n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8],{bbox:!1}).length:0;return{s:t,ss:e?o?function(t,e){void 0===e&&(e=.5);var r=t.slice(0,2),n=t.slice(2,4),o=t.slice(4,6),i=t.slice(6,8),a=X(r,n,e),s=X(n,o,e),u=X(o,i,e),l=X(a,s,e),c=X(s,u,e),f=X(l,c,e);return[["C"].concat(a,l,f),["C"].concat(c,u,i)]}(n):[t,t]:[t],l:o}})}function St(t,e,r){var n=wt(t),o=wt(e),i=n.length,a=o.length,s=n.filter(function(t){return t.l}).length,u=o.filter(function(t){return t.l}).length,l=n.filter(function(t){return t.l}).reduce(function(t,e){return t+e.l},0)/s||0,c=o.filter(function(t){return t.l}).reduce(function(t,e){return t+e.l},0)/u||0,f=r||Math.max(i,a),h=[l,c],p=[f-i,f-a],d=0,y=[n,o].map(function(t,e){return t.l===f?t.map(function(t){return t.s}):t.map(function(t,r){return d=r&&p[e]&&t.l>=h[e],p[e]-=d?1:0,d?t.ss:[t.s]}).flat()});return y[0].length===y[1].length?y:St(y[0],y[1],f)}var xt=function(t){return null!==t&&"function"!=typeof t&&isFinite(t.length)},_t=function(t,e){return!!xt(t)&&t.indexOf(e)>-1},Et=function(t,e){if(!xt(t))return t;for(var r=[],n=0;n<t.length;n++){var o=t[n];e(o,n)&&r.push(o)}return r},Ot=function(t,e){return void 0===e&&(e=[]),Et(t,function(t){return!_t(e,t)})},Pt=function(t){return null===t||void 0===t},kt={}.toString,Ct=function(t,e){return kt.call(t)==="[object "+e+"]"},Tt=function(t){return Array.isArray?Array.isArray(t):Ct(t,"Array")};function At(t){"@babel/helpers - typeof";return(At="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var Mt=function(t){var e=At(t);return null!==t&&"object"===e||"function"===e};var jt=function(t,e){if(t)if(Tt(t))for(var r=0,n=t.length;r<n&&!1!==e(t[r],r);r++);else if(Mt(t))for(var o in t)if(t.hasOwnProperty(o)&&!1===e(t[o],o))break},It=Object.keys?function(t){return Object.keys(t)}:function(t){var e=[];return jt(t,function(r,n){a(t)&&"prototype"===n||e.push(n)}),e};var Nt=function(t,e){var r=It(e),n=r.length;if(Pt(t))return!n;for(var o=0;o<n;o+=1){var i=r[o];if(e[i]!==t[i]||!(i in t))return!1}return!0};function Lt(t){"@babel/helpers - typeof";return(Lt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var Rt=function(t){return"object"===Lt(t)&&null!==t},Dt=function(t){if(!Rt(t)||!Ct(t,"Object"))return!1;if(null===Object.getPrototypeOf(t))return!0;for(var e=t;null!==Object.getPrototypeOf(e);)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e};var Bt=function(t,e){if(!Tt(t))return null;var r;if(a(e)&&(r=e),Dt(e)&&(r=function(t){return Nt(t,e)}),r)for(var n=0;n<t.length;n+=1)if(r(t[n]))return t[n];return null};var Ft=function(t,e,r){void 0===r&&(r=0);for(var n=r;n<t.length;n++)if(e(t[n],n))return n;return-1},Gt=function(t,e){for(var r=null,n=0;n<t.length;n++){var o=t[n][e];if(!Pt(o)){r=Tt(o)?o[0]:o;break}}return r},Ut=function(t){if(!Tt(t))return[];for(var e=[],r=0;r<t.length;r++)e=e.concat(t[r]);return e},zt=function t(e,r){if(void 0===r&&(r=[]),Tt(e))for(var n=0;n<e.length;n+=1)t(e[n],r);else r.push(e);return r},Vt=function(t){if(Tt(t))return t.reduce(function(t,e){return Math.max(t,e)},t[0])},Ht=function(t){if(Tt(t))return t.reduce(function(t,e){return Math.min(t,e)},t[0])},Wt=function(t){var e=t.filter(function(t){return!isNaN(t)});if(!e.length)return{min:0,max:0};if(Tt(t[0])){for(var r=[],n=0;n<t.length;n++)r=r.concat(t[n]);e=r}var o=Vt(e);return{min:Ht(e),max:o}},qt=Array.prototype,Yt=qt.splice,Xt=qt.indexOf,Jt=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];for(var n=0;n<e.length;n++)for(var o=e[n],i=-1;(i=Xt.call(t,o))>-1;)Yt.call(t,i,1);return t},Kt=Array.prototype.splice,Qt=function(t,e){if(!xt(t))return[];for(var r=t?e.length:0,n=r-1;r--;){var o=void 0,i=e[r];r!==n&&i===o||(o=i,Kt.call(t,i,1))}return t},Zt=function(t,e,r){if(!Tt(t)&&!Dt(t))return t;var n=r;return jt(t,function(t,r){n=e(n,t,r)}),n},$t=function(t,e){var r=[];if(!xt(t))return r;for(var n=-1,o=[],i=t.length;++n<i;){var a=t[n];e(a,n,t)&&(r.push(a),o.push(n))}return Qt(t,o),r},te=function(t){return Ct(t,"String")};var ee=function(t,e){var r;if(a(e))r=function(t,r){return e(t)-e(r)};else{var n=[];te(e)?n.push(e):Tt(e)&&(n=e),r=function(t,e){for(var r=0;r<n.length;r+=1){var o=n[r];if(t[o]>e[o])return 1;if(t[o]<e[o])return-1}return 0}}return t.sort(r),t};function re(t,e){void 0===e&&(e=new Map);var r=[];if(Array.isArray(t))for(var n=0,o=t.length;n<o;n++){var i=t[n];e.has(i)||(r.push(i),e.set(i,!0))}return r}var ne=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return re([].concat.apply([],t))},oe=function(t,e){for(var r=[],n={},o=0;o<t.length;o++){var i=t[o][e];if(!Pt(i)){Tt(i)||(i=[i]);for(var a=0;a<i.length;a++){var s=i[a];n[s]||(r.push(s),n[s]=!0)}}}return r};function ie(t){if(xt(t))return t[0]}function ae(t){if(xt(t)){return t[t.length-1]}}var se=function(t,e){return!(!Tt(t)&&!te(t))&&t[0]===e};var ue=function(t,e){return!(!Tt(t)&&!te(t))&&t[t.length-1]===e},le=function(t,e){for(var r=0;r<t.length;r++)if(!e(t[r],r))return!1;return!0},ce=function(t,e){for(var r=0;r<t.length;r++)if(e(t[r],r))return!0;return!1},fe=Object.prototype.hasOwnProperty;var he=function(t,e){if(!e||!Tt(t))return{};for(var r,n={},o=a(e)?e:function(t){return t[e]},i=0;i<t.length;i++){var s=t[i];r=o(s),fe.call(n,r)?n[r].push(s):n[r]=[s]}return n};function pe(t,e){if(!e)return{0:t};if(!a(e)){var r=Tt(e)?e:e.replace(/\s+/g,"").split("*");e=function(t){for(var e="_",n=0,o=r.length;n<o;n++)e+=t[r[n]]&&t[r[n]].toString();return e}}return he(t,e)}var de=function(t,e){if(!e)return[t];var r=pe(t,e),n=[];for(var o in r)n.push(r[o]);return n};var ye=function(t,e){return t["_wrap_"+e]};var ve=function(t,e){if(t["_wrap_"+e])return t["_wrap_"+e];var r=function(r){t[e](r)};return t["_wrap_"+e]=r,r},ge={};var me=function(t){var e=ge[t];if(!e){for(var r=t.toString(16),n=r.length;n<6;n++)r="0"+r;e="#"+r,ge[t]=e}return e};var be=function(t){var e=0,r=0,n=0,o=0;return Tt(t)?1===t.length?e=r=n=o=t[0]:2===t.length?(e=n=t[0],r=o=t[1]):3===t.length?(e=t[0],r=o=t[1],n=t[2]):(e=t[0],r=t[1],n=t[2],o=t[3]):e=r=n=o=t,{r1:e,r2:r,r3:n,r4:o}},we=function(t,e,r){return t<e?e:t>r?r:t},Se=function(t,e){var r=e.toString(),n=r.indexOf(".");if(-1===n)return Math.round(t);var o=r.substr(n+1).length;return o>20&&(o=20),parseFloat(t.toFixed(o))},xe=function(t){return Ct(t,"Number")},_e=function(t){return xe(t)&&t%1!=0},Ee=function(t){return xe(t)&&t%2==0},Oe=Number.isInteger?Number.isInteger:function(t){return xe(t)&&t%1==0},Pe=function(t){return xe(t)&&t<0},ke=1e-5;function Ce(t,e,r){return void 0===r&&(r=ke),Math.abs(t-e)<r}var Te=function(t){return xe(t)&&t%2!=0},Ae=function(t){return xe(t)&&t>0},Me=function(t,e){if(Tt(t)){for(var r,n=-1/0,o=0;o<t.length;o++){var i=t[o],s=a(e)?e(i):i[e];s>n&&(r=i,n=s)}return r}},je=function(t,e){if(Tt(t)){for(var r,n=1/0,o=0;o<t.length;o++){var i=t[o],s=a(e)?e(i):i[e];s<n&&(r=i,n=s)}return r}},Ie=function(t,e){return(t%e+e)%e},Ne=180/Math.PI,Le=function(t){return Ne*t},Re=parseInt,De=Math.PI/180,Be=function(t){return De*t},Fe=jt,Ge=function(t,e){return t.hasOwnProperty(e)},Ue=Ge,ze=Object.values?function(t){return Object.values(t)}:function(t){var e=[];return jt(t,function(r,n){a(t)&&"prototype"===n||e.push(r)}),e},Ve=function(t,e){return _t(ze(t),e)},He=function(t){return Pt(t)?"":t.toString()},We=function(t){return He(t).toLowerCase()},qe=function(t){var e=He(t);return e.charAt(0).toLowerCase()+e.substring(1)};var Ye=function(t,e){return t&&e?t.replace(/\\?\{([^{}]+)\}/g,function(t,r){return"\\"===t.charAt(0)?t.slice(1):void 0===e[r]?"":e[r]}):t},Xe=function(t){return He(t).toUpperCase()},Je=function(t){var e=He(t);return e.charAt(0).toUpperCase()+e.substring(1)},Ke={}.toString,Qe=function(t){return Ke.call(t).replace(/^\[object /,"").replace(/]$/,"")},Ze=function(t){return Ct(t,"Arguments")},$e=function(t){return Ct(t,"Boolean")},tr=function(t){return Ct(t,"Date")},er=function(t){return Ct(t,"Error")};function rr(t){return xe(t)&&isFinite(t)}var nr=function(t){return null===t},or=Object.prototype,ir=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||or)},ar=function(t){return Ct(t,"RegExp")},sr=function(t){return void 0===t},ur=function(t){return t instanceof Element||t instanceof Document};function lr(t){return(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return setTimeout(t,16)})(t)}function cr(t){(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout)(t)}function fr(t,e){for(var r in e)e.hasOwnProperty(r)&&"constructor"!==r&&void 0!==e[r]&&(t[r]=e[r])}function hr(t,e,r,n){return e&&fr(t,e),r&&fr(t,r),n&&fr(t,n),t}var pr=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var r=t[0],n=1;n<t.length;n++){var o=t[n];a(o)&&(o=o.prototype),hr(r.prototype,o)}};function dr(t){"@babel/helpers - typeof";return(dr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var yr=function t(e){if("object"!==dr(e)||null===e)return e;var r;if(Tt(e)){r=[];for(var n=0,o=e.length;n<o;n++)"object"===dr(e[n])&&null!=e[n]?r[n]=t(e[n]):r[n]=e[n]}else for(var i in r={},e)"object"===dr(e[i])&&null!=e[i]?r[i]=t(e[i]):r[i]=e[i];return r};var vr=function(t,e,r){var n;return function(){var o=this,i=arguments,a=r&&!n;clearTimeout(n),n=setTimeout(function(){n=null,r||t.apply(o,i)},e),a&&t.apply(o,i)}},gr=5;function mr(t,e){if(Object.hasOwn)return Object.hasOwn(t,e);if(null==t)throw new TypeError("Cannot convert undefined or null to object");return Object.prototype.hasOwnProperty.call(Object(t),e)}function br(t,e,r,n){for(var o in r=r||0,n=n||gr,e)if(mr(e,o)){var i=e[o];null!==i&&Dt(i)?(Dt(t[o])||(t[o]={}),r<n?br(t[o],i,r+1,n):t[o]=e[o]):Tt(i)?(t[o]=[],t[o]=t[o].concat(i)):void 0!==i&&(t[o]=i)}}var wr=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];for(var n=0;n<e.length;n+=1)br(t,e[n]);return t},Sr=function(t,e,r,n){a(e)||(r=e,e=t,t=function(){});var o=Object.create?function(t,e){return Object.create(t,{constructor:{value:e}})}:function(t,e){function r(){}r.prototype=t;var n=new r;return n.constructor=e,n},i=o(e.prototype,t);return t.prototype=hr(i,t.prototype),t.superclass=o(e.prototype,e),hr(i,r),hr(t,n),t},xr=function(t,e){if(!xt(t))return-1;var r=Array.prototype.indexOf;if(r)return r.call(t,e);for(var n=-1,o=0;o<t.length;o++)if(t[o]===e){n=o;break}return n},_r=Object.prototype.hasOwnProperty;var Er=function(t){if(Pt(t))return!0;if(xt(t))return!t.length;var e=Qe(t);if("Map"===e||"Set"===e)return!t.size;if(ir(t))return!Object.keys(t).length;for(var r in t)if(_r.call(t,r))return!1;return!0},Or=function t(e,r){if(e===r)return!0;if(!e||!r)return!1;if(te(e)||te(r))return!1;if(xt(e)||xt(r)){if(e.length!==r.length)return!1;for(var n=!0,o=0;o<e.length&&(n=t(e[o],r[o]));o++);return n}if(Rt(e)||Rt(r)){var i=Object.keys(e),a=Object.keys(r);if(i.length!==a.length)return!1;for(n=!0,o=0;o<i.length&&(n=t(e[i[o]],r[i[o]]));o++);return n}return!1},Pr=function(t,e,r){return a(r)?!!r(t,e):Or(t,e)},kr=function(t,e){if(!xt(t))return t;for(var r=[],n=0;n<t.length;n++){var o=t[n];r.push(e(o,n))}return r},Cr=function(t){return t},Tr=function(t,e){void 0===e&&(e=Cr);var r={};return Mt(t)&&!Pt(t)&&Object.keys(t).forEach(function(n){r[n]=e(t[n],n)}),r},Ar=function(t,e,r){for(var n=0,o=te(e)?e.split("."):e;t&&n<o.length;)t=t[o[n++]];return void 0===t||n<o.length?r:t},Mr=function(t,e,r){var n=t,o=te(e)?e.split("."):e;return o.forEach(function(t,e){e<o.length-1?(Mt(n[t])||(n[t]=xe(o[e+1])?[]:{}),n=n[t]):n[t]=r}),t},jr=Object.prototype.hasOwnProperty,Ir=function(t,e){if(null===t||!Dt(t))return{};var r={};return jt(e,function(e){jr.call(t,e)&&(r[e]=t[e])}),r},Nr=function(t,e){return Zt(t,function(t,r,n){return e.includes(n)||(t[n]=r),t},{})},Lr=function(t,e,r){var n,o,i,a,s=0;r||(r={});var u=function(){s=!1===r.leading?0:Date.now(),n=null,a=t.apply(o,i),n||(o=i=null)},l=function(){var l=Date.now();s||!1!==r.leading||(s=l);var c=e-(l-s);return o=this,i=arguments,c<=0||c>e?(n&&(clearTimeout(n),n=null),s=l,a=t.apply(o,i),n||(o=i=null)):n||!1===r.trailing||(n=setTimeout(u,c)),a};return l.cancel=function(){clearTimeout(n),s=0,n=o=i=null},l},Rr=function(t){return xt(t)?Array.prototype.slice.call(t):[]},Dr={},Br=function(t){return Dr[t=t||"g"]?Dr[t]+=1:Dr[t]=1,t+Dr[t]},Fr=function(){},Gr=function(t){return t};function Ur(t){return Pt(t)?0:xt(t)?t.length:Object.keys(t).length}var zr=function(){function t(){this.map={}}return t.prototype.has=function(t){return void 0!==this.map[t]},t.prototype.get=function(t,e){var r=this.map[t];return void 0===r?e:r},t.prototype.set=function(t,e){this.map[t]=e},t.prototype.clear=function(){this.map={}},t.prototype.delete=function(t){delete this.map[t]},t.prototype.size=function(){return Object.keys(this.map).length},t}(),Vr=1e-6;function Hr(t){return Math.abs(t)<Vr?0:t<0?-1:1}function Wr(t,e,r){return(r[0]-t[0])*(e[1]-t[1])==(e[0]-t[0])*(r[1]-t[1])&&Math.min(t[0],e[0])<=r[0]&&r[0]<=Math.max(t[0],e[0])&&Math.min(t[1],e[1])<=r[1]&&r[1]<=Math.max(t[1],e[1])}function qr(t,e,r){var n=!1,o=t.length;if(o<=2)return!1;for(var i=0;i<o;i++){var a=t[i],s=t[(i+1)%o];if(Wr(a,s,[e,r]))return!0;Hr(a[1]-r)>0!=Hr(s[1]-r)>0&&Hr(e-(r-a[1])*(a[0]-s[0])/(a[1]-s[1])-a[0])<0&&(n=!n)}return n}var Yr=function(t,e,r){return t>=e&&t<=r};function Xr(t){for(var e=[],r=t.length,n=0;n<r-1;n++){var o=t[n],i=t[n+1];e.push({from:{x:o[0],y:o[1]},to:{x:i[0],y:i[1]}})}if(e.length>1){var a=t[0],s=t[r-1];e.push({from:{x:s[0],y:s[1]},to:{x:a[0],y:a[1]}})}return e}function Jr(t,e){var r=!1;return t.forEach(function(t){if(function(t,e,r,n){var o=r.x-t.x,i=r.y-t.y,a=e.x-t.x,s=e.y-t.y,u=n.x-r.x,l=n.y-r.y,c=a*l-s*u,f=null;if(c*c>.001*(a*a+s*s)*(u*u+l*l)){var h=(o*l-i*u)/c,p=(o*s-i*a)/c;Yr(h,0,1)&&Yr(p,0,1)&&(f={x:t.x+h*a,y:t.y+h*s})}return f}(t.from,t.to,e.from,e.to))return r=!0,!1}),r}function Kr(t){var e=t.map(function(t){return t[0]}),r=t.map(function(t){return t[1]});return{minX:Math.min.apply(null,e),maxX:Math.max.apply(null,e),minY:Math.min.apply(null,r),maxY:Math.max.apply(null,r)}}function Qr(t,e){if(t.length<2||e.length<2)return!1;var r,n,o=Kr(t),i=Kr(e);if(r=o,(n=i).minX>r.maxX||n.maxX<r.minX||n.minY>r.maxY||n.maxY<r.minY)return!1;var a=!1;if(e.forEach(function(e){if(qr(t,e[0],e[1]))return a=!0,!1}),a)return!0;if(t.forEach(function(t){if(qr(e,t[0],t[1]))return a=!0,!1}),a)return!0;var s=Xr(t),u=!1;return Xr(e).forEach(function(t){if(Jr(s,t))return u=!0,!1}),u}function Zr(t){var e=document.createElement("div");e.innerHTML=t;var r=e.childNodes[0];return r&&e.contains(r)&&e.removeChild(r),r}function $r(t,e){if(t)return Object.keys(e).forEach(function(r){t.style[r]=e[r]}),t}},5208:function(t,e,r){"use strict";r.r(e),r.d(e,{AbstractMatrix:function(){return A},CHO:function(){return ze},CholeskyDecomposition:function(){return ze},EVD:function(){return De},EigenvalueDecomposition:function(){return De},LU:function(){return pe},LuDecomposition:function(){return pe},Matrix:function(){return j},MatrixColumnSelectionView:function(){return $},MatrixColumnView:function(){return q},MatrixFlipColumnView:function(){return at},MatrixFlipRowView:function(){return pt},MatrixRowSelectionView:function(){return kt},MatrixRowView:function(){return wt},MatrixSelectionView:function(){return Nt},MatrixSubView:function(){return Ut},MatrixTransposeView:function(){return Xt},NIPALS:function(){return qe},Nipals:function(){return qe},QR:function(){return me},QrDecomposition:function(){return me},SVD:function(){return xe},SingularValueDecomposition:function(){return xe},WrapperMatrix1D:function(){return ee},WrapperMatrix2D:function(){return ue},correlation:function(){return Ie},covariance:function(){return Me},default:function(){return j},determinant:function(){return Oe},inverse:function(){return _e},linearDependencies:function(){return Ce},pseudoInverse:function(){return Te},solve:function(){return Ee},wrap:function(){return le}});var n=Object.prototype.toString;function o(t){var e=n.call(t);return e.endsWith("Array]")&&!e.includes("Big")}function i(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!o(t))throw new TypeError("input must be an array");if(0===t.length)throw new TypeError("input must not be empty");if(void 0!==r.output){if(!o(r.output))throw new TypeError("output option must be an array if specified");e=r.output}else e=new Array(t.length);var n=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!o(t))throw new TypeError("input must be an array");if(0===t.length)throw new TypeError("input must not be empty");var r=e.fromIndex,n=void 0===r?0:r,i=e.toIndex,a=void 0===i?t.length:i;if(n<0||n>=t.length||!Number.isInteger(n))throw new Error("fromIndex must be a positive integer smaller than length");if(a<=n||a>t.length||!Number.isInteger(a))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var s=t[n],u=n+1;u<a;u++)t[u]<s&&(s=t[u]);return s}(t),i=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!o(t))throw new TypeError("input must be an array");if(0===t.length)throw new TypeError("input must not be empty");var r=e.fromIndex,n=void 0===r?0:r,i=e.toIndex,a=void 0===i?t.length:i;if(n<0||n>=t.length||!Number.isInteger(n))throw new Error("fromIndex must be a positive integer smaller than length");if(a<=n||a>t.length||!Number.isInteger(a))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var s=t[n],u=n+1;u<a;u++)t[u]>s&&(s=t[u]);return s}(t);if(n===i)throw new RangeError("minimum and maximum input values are equal. Cannot rescale a constant array");var a=r.min,s=void 0===a?r.autoMinMax?n:0:a,u=r.max,l=void 0===u?r.autoMinMax?i:1:u;if(s>=l)throw new RangeError("min option must be smaller than max option");for(var c=(l-s)/(i-n),f=0;f<t.length;f++)e[f]=(t[f]-n)*c+s;return e}var a=" ".repeat(2),s=" ".repeat(4);function u(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.maxRows,n=void 0===r?15:r,o=e.maxColumns,i=void 0===o?10:o,u=e.maxNumSize,c=void 0===u?8:u;return"".concat(t.constructor.name," {\n").concat(a,"[\n").concat(s).concat(function(t,e,r,n){for(var o=t.rows,i=t.columns,a=Math.min(o,e),u=Math.min(i,r),c=[],f=0;f<a;f++){for(var h=[],p=0;p<u;p++)h.push(l(t.get(f,p),n));c.push("".concat(h.join(" ")))}u!==i&&(c[c.length-1]+=" ... ".concat(i-r," more columns"));a!==o&&c.push("... ".concat(o-e," more rows"));return c.join("\n".concat(s))}(t,n,i,c),"\n").concat(a,"]\n").concat(a,"rows: ").concat(t.rows,"\n").concat(a,"columns: ").concat(t.columns,"\n}")}function l(t,e){var r=String(t);if(r.length<=e)return r.padEnd(e," ");var n=t.toPrecision(e-2);if(n.length<=e)return n;var o=t.toExponential(e-2),i=o.indexOf("e"),a=o.slice(i);return o.slice(0,e-a.length)+a}function c(t){"@babel/helpers - typeof";return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function f(t,e,r){var n=r?t.rows:t.rows-1;if(e<0||e>n)throw new RangeError("Row index out of range")}function h(t,e,r){var n=r?t.columns:t.columns-1;if(e<0||e>n)throw new RangeError("Column index out of range")}function p(t,e){if(e.to1DArray&&(e=e.to1DArray()),e.length!==t.columns)throw new RangeError("vector size must be the same as the number of columns");return e}function d(t,e){if(e.to1DArray&&(e=e.to1DArray()),e.length!==t.rows)throw new RangeError("vector size must be the same as the number of rows");return e}function y(t,e,r){return{row:v(t,e),column:g(t,r)}}function v(t,e){if("object"!==c(e))throw new TypeError("unexpected type for row indices");if(e.some(function(e){return e<0||e>=t.rows}))throw new RangeError("row indices are out of range");return Array.isArray(e)||(e=Array.from(e)),e}function g(t,e){if("object"!==c(e))throw new TypeError("unexpected type for column indices");if(e.some(function(e){return e<0||e>=t.columns}))throw new RangeError("column indices are out of range");return Array.isArray(e)||(e=Array.from(e)),e}function m(t,e,r,n,o){if(5!==arguments.length)throw new RangeError("expected 4 arguments");if(w("startRow",e),w("endRow",r),w("startColumn",n),w("endColumn",o),e>r||n>o||e<0||e>=t.rows||r<0||r>=t.rows||n<0||n>=t.columns||o<0||o>=t.columns)throw new RangeError("Submatrix indices are out of range")}function b(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=[],n=0;n<t;n++)r.push(e);return r}function w(t,e){if("number"!=typeof e)throw new TypeError("".concat(t," must be a number"))}function S(t,e,r){return e=_(e),x(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],_(t).constructor):e.apply(t,r))}function x(t,e){if(e&&("object"===O(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function _(t){return(_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function E(t,e){return(E=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function O(t){"@babel/helpers - typeof";return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function P(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function k(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,T(n.key),n)}}function C(t,e,r){return e&&k(t.prototype,e),r&&k(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function T(t){var e=function(t,e){if("object"!=O(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=O(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==O(e)?e:e+""}var A=function(){function t(){P(this,t)}return C(t,[{key:"size",get:function(){return this.rows*this.columns}},{key:"apply",value:function(t){if("function"!=typeof t)throw new TypeError("callback must be a function");for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)t.call(this,e,r);return this}},{key:"to1DArray",value:function(){for(var t=[],e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)t.push(this.get(e,r));return t}},{key:"to2DArray",value:function(){for(var t=[],e=0;e<this.rows;e++){t.push([]);for(var r=0;r<this.columns;r++)t[e].push(this.get(e,r))}return t}},{key:"toJSON",value:function(){return this.to2DArray()}},{key:"isRowVector",value:function(){return 1===this.rows}},{key:"isColumnVector",value:function(){return 1===this.columns}},{key:"isVector",value:function(){return 1===this.rows||1===this.columns}},{key:"isSquare",value:function(){return this.rows===this.columns}},{key:"isSymmetric",value:function(){if(this.isSquare()){for(var t=0;t<this.rows;t++)for(var e=0;e<=t;e++)if(this.get(t,e)!==this.get(e,t))return!1;return!0}return!1}},{key:"isEchelonForm",value:function(){for(var t=0,e=0,r=-1,n=!0,o=!1;t<this.rows&&n;){for(e=0,o=!1;e<this.columns&&!1===o;)0===this.get(t,e)?e++:1===this.get(t,e)&&e>r?(o=!0,r=e):(n=!1,o=!0);t++}return n}},{key:"isReducedEchelonForm",value:function(){for(var t=0,e=0,r=-1,n=!0,o=!1;t<this.rows&&n;){for(e=0,o=!1;e<this.columns&&!1===o;)0===this.get(t,e)?e++:1===this.get(t,e)&&e>r?(o=!0,r=e):(n=!1,o=!0);for(var i=e+1;i<this.rows;i++)0!==this.get(t,i)&&(n=!1);t++}return n}},{key:"echelonForm",value:function(){for(var t=this.clone(),e=0,r=0;e<t.rows&&r<t.columns;){for(var n=e,o=e;o<t.rows;o++)t.get(o,r)>t.get(n,r)&&(n=o);if(0===t.get(n,r))r++;else{t.swapRows(e,n);for(var i=t.get(e,r),a=r;a<t.columns;a++)t.set(e,a,t.get(e,a)/i);for(var s=e+1;s<t.rows;s++){var u=t.get(s,r)/t.get(e,r);t.set(s,r,0);for(var l=r+1;l<t.columns;l++)t.set(s,l,t.get(s,l)-t.get(e,l)*u)}e++,r++}}return t}},{key:"reducedEchelonForm",value:function(){for(var t=this.echelonForm(),e=t.columns,r=t.rows,n=r-1;n>=0;)if(0===t.maxRow(n))n--;else{for(var o=0,i=!1;o<r&&!1===i;)1===t.get(n,o)?i=!0:o++;for(var a=0;a<n;a++)for(var s=t.get(a,o),u=o;u<e;u++){var l=t.get(a,u)-s*t.get(n,u);t.set(a,u,l)}n--}return t}},{key:"set",value:function(){throw new Error("set method is unimplemented")}},{key:"get",value:function(){throw new Error("get method is unimplemented")}},{key:"repeat",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("object"!==O(t))throw new TypeError("options must be an object");var e=t.rows,r=void 0===e?1:e,n=t.columns,o=void 0===n?1:n;if(!Number.isInteger(r)||r<=0)throw new TypeError("rows must be a positive integer");if(!Number.isInteger(o)||o<=0)throw new TypeError("columns must be a positive integer");for(var i=new j(this.rows*r,this.columns*o),a=0;a<r;a++)for(var s=0;s<o;s++)i.setSubMatrix(this,this.rows*a,this.columns*s);return i}},{key:"fill",value:function(t){for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,t);return this}},{key:"neg",value:function(){return this.mulS(-1)}},{key:"getRow",value:function(t){f(this,t);for(var e=[],r=0;r<this.columns;r++)e.push(this.get(t,r));return e}},{key:"getRowVector",value:function(t){return j.rowVector(this.getRow(t))}},{key:"setRow",value:function(t,e){f(this,t),e=p(this,e);for(var r=0;r<this.columns;r++)this.set(t,r,e[r]);return this}},{key:"swapRows",value:function(t,e){f(this,t),f(this,e);for(var r=0;r<this.columns;r++){var n=this.get(t,r);this.set(t,r,this.get(e,r)),this.set(e,r,n)}return this}},{key:"getColumn",value:function(t){h(this,t);for(var e=[],r=0;r<this.rows;r++)e.push(this.get(r,t));return e}},{key:"getColumnVector",value:function(t){return j.columnVector(this.getColumn(t))}},{key:"setColumn",value:function(t,e){h(this,t),e=d(this,e);for(var r=0;r<this.rows;r++)this.set(r,t,e[r]);return this}},{key:"swapColumns",value:function(t,e){h(this,t),h(this,e);for(var r=0;r<this.rows;r++){var n=this.get(r,t);this.set(r,t,this.get(r,e)),this.set(r,e,n)}return this}},{key:"addRowVector",value:function(t){t=p(this,t);for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)+t[r]);return this}},{key:"subRowVector",value:function(t){t=p(this,t);for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)-t[r]);return this}},{key:"mulRowVector",value:function(t){t=p(this,t);for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)*t[r]);return this}},{key:"divRowVector",value:function(t){t=p(this,t);for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)/t[r]);return this}},{key:"addColumnVector",value:function(t){t=d(this,t);for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)+t[e]);return this}},{key:"subColumnVector",value:function(t){t=d(this,t);for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)-t[e]);return this}},{key:"mulColumnVector",value:function(t){t=d(this,t);for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)*t[e]);return this}},{key:"divColumnVector",value:function(t){t=d(this,t);for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)/t[e]);return this}},{key:"mulRow",value:function(t,e){f(this,t);for(var r=0;r<this.columns;r++)this.set(t,r,this.get(t,r)*e);return this}},{key:"mulColumn",value:function(t,e){h(this,t);for(var r=0;r<this.rows;r++)this.set(r,t,this.get(r,t)*e);return this}},{key:"max",value:function(){for(var t=this.get(0,0),e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.get(e,r)>t&&(t=this.get(e,r));return t}},{key:"maxIndex",value:function(){for(var t=this.get(0,0),e=[0,0],r=0;r<this.rows;r++)for(var n=0;n<this.columns;n++)this.get(r,n)>t&&(t=this.get(r,n),e[0]=r,e[1]=n);return e}},{key:"min",value:function(){for(var t=this.get(0,0),e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.get(e,r)<t&&(t=this.get(e,r));return t}},{key:"minIndex",value:function(){for(var t=this.get(0,0),e=[0,0],r=0;r<this.rows;r++)for(var n=0;n<this.columns;n++)this.get(r,n)<t&&(t=this.get(r,n),e[0]=r,e[1]=n);return e}},{key:"maxRow",value:function(t){f(this,t);for(var e=this.get(t,0),r=1;r<this.columns;r++)this.get(t,r)>e&&(e=this.get(t,r));return e}},{key:"maxRowIndex",value:function(t){f(this,t);for(var e=this.get(t,0),r=[t,0],n=1;n<this.columns;n++)this.get(t,n)>e&&(e=this.get(t,n),r[1]=n);return r}},{key:"minRow",value:function(t){f(this,t);for(var e=this.get(t,0),r=1;r<this.columns;r++)this.get(t,r)<e&&(e=this.get(t,r));return e}},{key:"minRowIndex",value:function(t){f(this,t);for(var e=this.get(t,0),r=[t,0],n=1;n<this.columns;n++)this.get(t,n)<e&&(e=this.get(t,n),r[1]=n);return r}},{key:"maxColumn",value:function(t){h(this,t);for(var e=this.get(0,t),r=1;r<this.rows;r++)this.get(r,t)>e&&(e=this.get(r,t));return e}},{key:"maxColumnIndex",value:function(t){h(this,t);for(var e=this.get(0,t),r=[0,t],n=1;n<this.rows;n++)this.get(n,t)>e&&(e=this.get(n,t),r[0]=n);return r}},{key:"minColumn",value:function(t){h(this,t);for(var e=this.get(0,t),r=1;r<this.rows;r++)this.get(r,t)<e&&(e=this.get(r,t));return e}},{key:"minColumnIndex",value:function(t){h(this,t);for(var e=this.get(0,t),r=[0,t],n=1;n<this.rows;n++)this.get(n,t)<e&&(e=this.get(n,t),r[0]=n);return r}},{key:"diag",value:function(){for(var t=Math.min(this.rows,this.columns),e=[],r=0;r<t;r++)e.push(this.get(r,r));return e}},{key:"norm",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"frobenius",e=0;if("max"===t)return this.max();if("frobenius"===t){for(var r=0;r<this.rows;r++)for(var n=0;n<this.columns;n++)e+=this.get(r,n)*this.get(r,n);return Math.sqrt(e)}throw new RangeError("unknown norm type: ".concat(t))}},{key:"cumulativeSum",value:function(){for(var t=0,e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)t+=this.get(e,r),this.set(e,r,t);return this}},{key:"dot",value:function(e){t.isMatrix(e)&&(e=e.to1DArray());var r=this.to1DArray();if(r.length!==e.length)throw new RangeError("vectors do not have the same size");for(var n=0,o=0;o<r.length;o++)n+=r[o]*e[o];return n}},{key:"mmul",value:function(t){t=j.checkMatrix(t);for(var e=this.rows,r=this.columns,n=t.columns,o=new j(e,n),i=new Float64Array(r),a=0;a<n;a++){for(var s=0;s<r;s++)i[s]=t.get(s,a);for(var u=0;u<e;u++){for(var l=0,c=0;c<r;c++)l+=this.get(u,c)*i[c];o.set(u,a,l)}}return o}},{key:"strassen2x2",value:function(t){t=j.checkMatrix(t);var e=new j(2,2),r=this.get(0,0),n=t.get(0,0),o=this.get(0,1),i=t.get(0,1),a=this.get(1,0),s=t.get(1,0),u=this.get(1,1),l=t.get(1,1),c=(r+u)*(n+l),f=(a+u)*n,h=r*(i-l),p=u*(s-n),d=(r+o)*l,y=c+p-d+(o-u)*(s+l),v=h+d,g=f+p,m=c-f+h+(a-r)*(n+i);return e.set(0,0,y),e.set(0,1,v),e.set(1,0,g),e.set(1,1,m),e}},{key:"strassen3x3",value:function(t){t=j.checkMatrix(t);var e=new j(3,3),r=this.get(0,0),n=this.get(0,1),o=this.get(0,2),i=this.get(1,0),a=this.get(1,1),s=this.get(1,2),u=this.get(2,0),l=this.get(2,1),c=this.get(2,2),f=t.get(0,0),h=t.get(0,1),p=t.get(0,2),d=t.get(1,0),y=t.get(1,1),v=t.get(1,2),g=t.get(2,0),m=t.get(2,1),b=t.get(2,2),w=(r-i)*(-h+y),S=(-r+i+a)*(f-h+y),x=(i+a)*(-f+h),_=r*f,E=(-r+u+l)*(f-p+v),O=(-r+u)*(p-v),P=(u+l)*(-f+p),k=(-o+l+c)*(y+g-m),C=(o-c)*(y-m),T=o*g,A=(l+c)*(-g+m),M=(-o+a+s)*(v+g-b),I=(o-s)*(v-b),N=(a+s)*(-g+b),L=_+T+n*d,R=(r+n+o-i-a-l-c)*y+S+x+_+k+T+A,D=_+E+P+(r+n+o-a-s-u-l)*v+T+M+N,B=w+a*(-f+h+d-y-v-g+b)+S+_+T+M+I,F=w+S+x+_+s*m,G=T+M+I+N+i*p,U=_+E+O+l*(-f+p+d-y-v-g+m)+k+C+T,z=k+C+T+A+u*h,V=_+E+O+P+c*b;return e.set(0,0,L),e.set(0,1,R),e.set(0,2,D),e.set(1,0,B),e.set(1,1,F),e.set(1,2,G),e.set(2,0,U),e.set(2,1,z),e.set(2,2,V),e}},{key:"mmulStrassen",value:function(e){e=j.checkMatrix(e);var r=this.clone(),n=r.rows,o=r.columns,i=e.rows,a=e.columns;function s(e,r,n){var o=e.rows,i=e.columns;if(o===r&&i===n)return e;var a=t.zeros(r,n);return a=a.setSubMatrix(e,0,0)}o!==i&&console.warn("Multiplying ".concat(n," x ").concat(o," and ").concat(i," x ").concat(a," matrix: dimensions do not match."));var u=Math.max(n,i),l=Math.max(o,a);return function e(r,n,o,i){if(o<=512||i<=512)return r.mmul(n);o%2==1&&i%2==1?(r=s(r,o+1,i+1),n=s(n,o+1,i+1)):o%2==1?(r=s(r,o+1,i),n=s(n,o+1,i)):i%2==1&&(r=s(r,o,i+1),n=s(n,o,i+1));var a=parseInt(r.rows/2,10),u=parseInt(r.columns/2,10),l=r.subMatrix(0,a-1,0,u-1),c=n.subMatrix(0,a-1,0,u-1),f=r.subMatrix(0,a-1,u,r.columns-1),h=n.subMatrix(0,a-1,u,n.columns-1),p=r.subMatrix(a,r.rows-1,0,u-1),d=n.subMatrix(a,n.rows-1,0,u-1),y=r.subMatrix(a,r.rows-1,u,r.columns-1),v=n.subMatrix(a,n.rows-1,u,n.columns-1),g=e(t.add(l,y),t.add(c,v),a,u),m=e(t.add(p,y),c,a,u),b=e(l,t.sub(h,v),a,u),w=e(y,t.sub(d,c),a,u),S=e(t.add(l,f),v,a,u),x=e(t.sub(p,l),t.add(c,h),a,u),_=e(t.sub(f,y),t.add(d,v),a,u),E=t.add(g,w);E.sub(S),E.add(_);var O=t.add(b,S),P=t.add(m,w),k=t.sub(g,m);k.add(b),k.add(x);var C=t.zeros(2*E.rows,2*E.columns);return(C=(C=(C=(C=C.setSubMatrix(E,0,0)).setSubMatrix(O,E.rows,0)).setSubMatrix(P,0,E.columns)).setSubMatrix(k,E.rows,E.columns)).subMatrix(0,o-1,0,i-1)}(r=s(r,u,l),e=s(e,u,l),u,l)}},{key:"scaleRows",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("object"!==O(t))throw new TypeError("options must be an object");var e=t.min,r=void 0===e?0:e,n=t.max,o=void 0===n?1:n;if(!Number.isFinite(r))throw new TypeError("min must be a number");if(!Number.isFinite(o))throw new TypeError("max must be a number");if(r>=o)throw new RangeError("min must be smaller than max");for(var a=new j(this.rows,this.columns),s=0;s<this.rows;s++){var u=this.getRow(s);i(u,{min:r,max:o,output:u}),a.setRow(s,u)}return a}},{key:"scaleColumns",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("object"!==O(t))throw new TypeError("options must be an object");var e=t.min,r=void 0===e?0:e,n=t.max,o=void 0===n?1:n;if(!Number.isFinite(r))throw new TypeError("min must be a number");if(!Number.isFinite(o))throw new TypeError("max must be a number");if(r>=o)throw new RangeError("min must be smaller than max");for(var a=new j(this.rows,this.columns),s=0;s<this.columns;s++){var u=this.getColumn(s);i(u,{min:r,max:o,output:u}),a.setColumn(s,u)}return a}},{key:"flipRows",value:function(){for(var t=Math.ceil(this.columns/2),e=0;e<this.rows;e++)for(var r=0;r<t;r++){var n=this.get(e,r),o=this.get(e,this.columns-1-r);this.set(e,r,o),this.set(e,this.columns-1-r,n)}return this}},{key:"flipColumns",value:function(){for(var t=Math.ceil(this.rows/2),e=0;e<this.columns;e++)for(var r=0;r<t;r++){var n=this.get(r,e),o=this.get(this.rows-1-r,e);this.set(r,e,o),this.set(this.rows-1-r,e,n)}return this}},{key:"kroneckerProduct",value:function(t){t=j.checkMatrix(t);for(var e=this.rows,r=this.columns,n=t.rows,o=t.columns,i=new j(e*n,r*o),a=0;a<e;a++)for(var s=0;s<r;s++)for(var u=0;u<n;u++)for(var l=0;l<o;l++)i.set(n*a+u,o*s+l,this.get(a,s)*t.get(u,l));return i}},{key:"transpose",value:function(){for(var t=new j(this.columns,this.rows),e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)t.set(r,e,this.get(e,r));return t}},{key:"sortRows",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,e=0;e<this.rows;e++)this.setRow(e,this.getRow(e).sort(t));return this}},{key:"sortColumns",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,e=0;e<this.columns;e++)this.setColumn(e,this.getColumn(e).sort(t));return this}},{key:"subMatrix",value:function(t,e,r,n){m(this,t,e,r,n);for(var o=new j(e-t+1,n-r+1),i=t;i<=e;i++)for(var a=r;a<=n;a++)o.set(i-t,a-r,this.get(i,a));return o}},{key:"subMatrixRow",value:function(t,e,r){if(void 0===e&&(e=0),void 0===r&&(r=this.columns-1),e>r||e<0||e>=this.columns||r<0||r>=this.columns)throw new RangeError("Argument out of range");for(var n=new j(t.length,r-e+1),o=0;o<t.length;o++)for(var i=e;i<=r;i++){if(t[o]<0||t[o]>=this.rows)throw new RangeError("Row index out of range: ".concat(t[o]));n.set(o,i-e,this.get(t[o],i))}return n}},{key:"subMatrixColumn",value:function(t,e,r){if(void 0===e&&(e=0),void 0===r&&(r=this.rows-1),e>r||e<0||e>=this.rows||r<0||r>=this.rows)throw new RangeError("Argument out of range");for(var n=new j(r-e+1,t.length),o=0;o<t.length;o++)for(var i=e;i<=r;i++){if(t[o]<0||t[o]>=this.columns)throw new RangeError("Column index out of range: ".concat(t[o]));n.set(i-e,o,this.get(i,t[o]))}return n}},{key:"setSubMatrix",value:function(t,e,r){m(this,e,e+(t=j.checkMatrix(t)).rows-1,r,r+t.columns-1);for(var n=0;n<t.rows;n++)for(var o=0;o<t.columns;o++)this.set(e+n,r+o,t.get(n,o));return this}},{key:"selection",value:function(t,e){for(var r=y(this,t,e),n=new j(t.length,e.length),o=0;o<r.row.length;o++)for(var i=r.row[o],a=0;a<r.column.length;a++){var s=r.column[a];n.set(o,a,this.get(i,s))}return n}},{key:"trace",value:function(){for(var t=Math.min(this.rows,this.columns),e=0,r=0;r<t;r++)e+=this.get(r,r);return e}},{key:"clone",value:function(){for(var t=new j(this.rows,this.columns),e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)t.set(e,r,this.get(e,r));return t}},{key:"sum",value:function(t){switch(t){case"row":return function(t){for(var e=b(t.rows),r=0;r<t.rows;++r)for(var n=0;n<t.columns;++n)e[r]+=t.get(r,n);return e}(this);case"column":return function(t){for(var e=b(t.columns),r=0;r<t.rows;++r)for(var n=0;n<t.columns;++n)e[n]+=t.get(r,n);return e}(this);case void 0:return function(t){for(var e=0,r=0;r<t.rows;r++)for(var n=0;n<t.columns;n++)e+=t.get(r,n);return e}(this);default:throw new Error("invalid option: ".concat(t))}}},{key:"product",value:function(t){switch(t){case"row":return function(t){for(var e=b(t.rows,1),r=0;r<t.rows;++r)for(var n=0;n<t.columns;++n)e[r]*=t.get(r,n);return e}(this);case"column":return function(t){for(var e=b(t.columns,1),r=0;r<t.rows;++r)for(var n=0;n<t.columns;++n)e[n]*=t.get(r,n);return e}(this);case void 0:return function(t){for(var e=1,r=0;r<t.rows;r++)for(var n=0;n<t.columns;n++)e*=t.get(r,n);return e}(this);default:throw new Error("invalid option: ".concat(t))}}},{key:"mean",value:function(t){var e=this.sum(t);switch(t){case"row":for(var r=0;r<this.rows;r++)e[r]/=this.columns;return e;case"column":for(var n=0;n<this.columns;n++)e[n]/=this.rows;return e;case void 0:return e/this.size;default:throw new Error("invalid option: ".concat(t))}}},{key:"variance",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"===O(t)&&(e=t,t=void 0),"object"!==O(e))throw new TypeError("options must be an object");var r=e,n=r.unbiased,o=void 0===n||n,i=r.mean,a=void 0===i?this.mean(t):i;if("boolean"!=typeof o)throw new TypeError("unbiased must be a boolean");switch(t){case"row":if(!Array.isArray(a))throw new TypeError("mean must be an array");return function(t,e,r){for(var n=t.rows,o=t.columns,i=[],a=0;a<n;a++){for(var s=0,u=0,l=0,c=0;c<o;c++)s+=l=t.get(a,c)-r[a],u+=l*l;e?i.push((u-s*s/o)/(o-1)):i.push((u-s*s/o)/o)}return i}(this,o,a);case"column":if(!Array.isArray(a))throw new TypeError("mean must be an array");return function(t,e,r){for(var n=t.rows,o=t.columns,i=[],a=0;a<o;a++){for(var s=0,u=0,l=0,c=0;c<n;c++)s+=l=t.get(c,a)-r[a],u+=l*l;e?i.push((u-s*s/n)/(n-1)):i.push((u-s*s/n)/n)}return i}(this,o,a);case void 0:if("number"!=typeof a)throw new TypeError("mean must be a number");return function(t,e,r){for(var n=t.rows,o=t.columns,i=n*o,a=0,s=0,u=0,l=0;l<n;l++)for(var c=0;c<o;c++)a+=u=t.get(l,c)-r,s+=u*u;return e?(s-a*a/i)/(i-1):(s-a*a/i)/i}(this,o,a);default:throw new Error("invalid option: ".concat(t))}}},{key:"standardDeviation",value:function(t,e){"object"===O(t)&&(e=t,t=void 0);var r=this.variance(t,e);if(void 0===t)return Math.sqrt(r);for(var n=0;n<r.length;n++)r[n]=Math.sqrt(r[n]);return r}},{key:"center",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"===O(t)&&(e=t,t=void 0),"object"!==O(e))throw new TypeError("options must be an object");var r=e.center,n=void 0===r?this.mean(t):r;switch(t){case"row":if(!Array.isArray(n))throw new TypeError("center must be an array");return function(t,e){for(var r=0;r<t.rows;r++)for(var n=0;n<t.columns;n++)t.set(r,n,t.get(r,n)-e[r])}(this,n),this;case"column":if(!Array.isArray(n))throw new TypeError("center must be an array");return function(t,e){for(var r=0;r<t.rows;r++)for(var n=0;n<t.columns;n++)t.set(r,n,t.get(r,n)-e[n])}(this,n),this;case void 0:if("number"!=typeof n)throw new TypeError("center must be a number");return function(t,e){for(var r=0;r<t.rows;r++)for(var n=0;n<t.columns;n++)t.set(r,n,t.get(r,n)-e)}(this,n),this;default:throw new Error("invalid option: ".concat(t))}}},{key:"scale",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"===O(t)&&(e=t,t=void 0),"object"!==O(e))throw new TypeError("options must be an object");var r=e.scale;switch(t){case"row":if(void 0===r)r=function(t){for(var e=[],r=0;r<t.rows;r++){for(var n=0,o=0;o<t.columns;o++)n+=Math.pow(t.get(r,o),2)/(t.columns-1);e.push(Math.sqrt(n))}return e}(this);else if(!Array.isArray(r))throw new TypeError("scale must be an array");return function(t,e){for(var r=0;r<t.rows;r++)for(var n=0;n<t.columns;n++)t.set(r,n,t.get(r,n)/e[r])}(this,r),this;case"column":if(void 0===r)r=function(t){for(var e=[],r=0;r<t.columns;r++){for(var n=0,o=0;o<t.rows;o++)n+=Math.pow(t.get(o,r),2)/(t.rows-1);e.push(Math.sqrt(n))}return e}(this);else if(!Array.isArray(r))throw new TypeError("scale must be an array");return function(t,e){for(var r=0;r<t.rows;r++)for(var n=0;n<t.columns;n++)t.set(r,n,t.get(r,n)/e[n])}(this,r),this;case void 0:if(void 0===r)r=function(t){for(var e=t.size-1,r=0,n=0;n<t.columns;n++)for(var o=0;o<t.rows;o++)r+=Math.pow(t.get(o,n),2)/e;return Math.sqrt(r)}(this);else if("number"!=typeof r)throw new TypeError("scale must be a number");return function(t,e){for(var r=0;r<t.rows;r++)for(var n=0;n<t.columns;n++)t.set(r,n,t.get(r,n)/e)}(this,r),this;default:throw new Error("invalid option: ".concat(t))}}},{key:"toString",value:function(t){return u(this,t)}}],[{key:"from1DArray",value:function(t,e,r){if(t*e!==r.length)throw new RangeError("data length does not match given dimensions");for(var n=new j(t,e),o=0;o<t;o++)for(var i=0;i<e;i++)n.set(o,i,r[o*e+i]);return n}},{key:"rowVector",value:function(t){for(var e=new j(1,t.length),r=0;r<t.length;r++)e.set(0,r,t[r]);return e}},{key:"columnVector",value:function(t){for(var e=new j(t.length,1),r=0;r<t.length;r++)e.set(r,0,t[r]);return e}},{key:"zeros",value:function(t,e){return new j(t,e)}},{key:"ones",value:function(t,e){return new j(t,e).fill(1)}},{key:"rand",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("object"!==O(r))throw new TypeError("options must be an object");for(var n=r.random,o=void 0===n?Math.random:n,i=new j(t,e),a=0;a<t;a++)for(var s=0;s<e;s++)i.set(a,s,o());return i}},{key:"randInt",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("object"!==O(r))throw new TypeError("options must be an object");var n=r.min,o=void 0===n?0:n,i=r.max,a=void 0===i?1e3:i,s=r.random,u=void 0===s?Math.random:s;if(!Number.isInteger(o))throw new TypeError("min must be an integer");if(!Number.isInteger(a))throw new TypeError("max must be an integer");if(o>=a)throw new RangeError("min must be smaller than max");for(var l=a-o,c=new j(t,e),f=0;f<t;f++)for(var h=0;h<e;h++){var p=o+Math.round(u()*l);c.set(f,h,p)}return c}},{key:"eye",value:function(t,e,r){void 0===e&&(e=t),void 0===r&&(r=1);for(var n=Math.min(t,e),o=this.zeros(t,e),i=0;i<n;i++)o.set(i,i,r);return o}},{key:"diag",value:function(t,e,r){var n=t.length;void 0===e&&(e=n),void 0===r&&(r=e);for(var o=Math.min(n,e,r),i=this.zeros(e,r),a=0;a<o;a++)i.set(a,a,t[a]);return i}},{key:"min",value:function(t,e){t=this.checkMatrix(t),e=this.checkMatrix(e);for(var r=t.rows,n=t.columns,o=new j(r,n),i=0;i<r;i++)for(var a=0;a<n;a++)o.set(i,a,Math.min(t.get(i,a),e.get(i,a)));return o}},{key:"max",value:function(t,e){t=this.checkMatrix(t),e=this.checkMatrix(e);for(var r=t.rows,n=t.columns,o=new this(r,n),i=0;i<r;i++)for(var a=0;a<n;a++)o.set(i,a,Math.max(t.get(i,a),e.get(i,a)));return o}},{key:"checkMatrix",value:function(e){return t.isMatrix(e)?e:new j(e)}},{key:"isMatrix",value:function(t){return null!=t&&"Matrix"===t.klass}}])}();function M(t,e){return t-e}A.prototype.klass="Matrix","undefined"!=typeof Symbol&&(A.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return u(this)}),A.random=A.rand,A.randomInt=A.randInt,A.diagonal=A.diag,A.prototype.diagonal=A.prototype.diag,A.identity=A.eye,A.prototype.negate=A.prototype.neg,A.prototype.tensorProduct=A.prototype.kroneckerProduct;var j=function(t){function e(t,r){var n;if(P(this,e),n=S(this,e),e.isMatrix(t))return x(n,t.clone());if(Number.isInteger(t)&&t>0){if(n.data=[],!(Number.isInteger(r)&&r>0))throw new TypeError("nColumns must be a positive integer");for(var o=0;o<t;o++)n.data.push(new Float64Array(r))}else{if(!Array.isArray(t))throw new TypeError("First argument must be a positive number or an array");var i=t;if(t=i.length,"number"!=typeof(r=i[0].length)||0===r)throw new TypeError("Data must be a 2D array with at least one element");n.data=[];for(var a=0;a<t;a++){if(i[a].length!==r)throw new RangeError("Inconsistent array dimensions");n.data.push(Float64Array.from(i[a]))}}return n.rows=t,n.columns=r,x(n,n)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&E(t,e)}(e,A),C(e,[{key:"set",value:function(t,e,r){return this.data[t][e]=r,this}},{key:"get",value:function(t,e){return this.data[t][e]}},{key:"removeRow",value:function(t){if(f(this,t),1===this.rows)throw new RangeError("A matrix cannot have less than one row");return this.data.splice(t,1),this.rows-=1,this}},{key:"addRow",value:function(t,e){return void 0===e&&(e=t,t=this.rows),f(this,t,!0),e=Float64Array.from(p(this,e)),this.data.splice(t,0,e),this.rows+=1,this}},{key:"removeColumn",value:function(t){if(h(this,t),1===this.columns)throw new RangeError("A matrix cannot have less than one column");for(var e=0;e<this.rows;e++){for(var r=new Float64Array(this.columns-1),n=0;n<t;n++)r[n]=this.data[e][n];for(var o=t+1;o<this.columns;o++)r[o-1]=this.data[e][o];this.data[e]=r}return this.columns-=1,this}},{key:"addColumn",value:function(t,e){void 0===e&&(e=t,t=this.columns),h(this,t,!0),e=d(this,e);for(var r=0;r<this.rows;r++){for(var n=new Float64Array(this.columns+1),o=0;o<t;o++)n[o]=this.data[r][o];for(n[o++]=e[r];o<this.columns+1;o++)n[o]=this.data[r][o-1];this.data[r]=n}return this.columns+=1,this}}])}();function I(t){"@babel/helpers - typeof";return(I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function N(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,L(n.key),n)}}function L(t){var e=function(t,e){if("object"!=I(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=I(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==I(e)?e:e+""}function R(t,e,r){return e=D(e),function(t,e){if(e&&("object"===I(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],D(t).constructor):e.apply(t,r))}function D(t){return(D=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function B(t,e){return(B=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}!function(t,e){t.prototype.add=function(t){return"number"==typeof t?this.addS(t):this.addM(t)},t.prototype.addS=function(t){for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)+t);return this},t.prototype.addM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var r=0;r<this.rows;r++)for(var n=0;n<this.columns;n++)this.set(r,n,this.get(r,n)+t.get(r,n));return this},t.add=function(t,r){return new e(t).add(r)},t.prototype.sub=function(t){return"number"==typeof t?this.subS(t):this.subM(t)},t.prototype.subS=function(t){for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)-t);return this},t.prototype.subM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var r=0;r<this.rows;r++)for(var n=0;n<this.columns;n++)this.set(r,n,this.get(r,n)-t.get(r,n));return this},t.sub=function(t,r){return new e(t).sub(r)},t.prototype.subtract=t.prototype.sub,t.prototype.subtractS=t.prototype.subS,t.prototype.subtractM=t.prototype.subM,t.subtract=t.sub,t.prototype.mul=function(t){return"number"==typeof t?this.mulS(t):this.mulM(t)},t.prototype.mulS=function(t){for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)*t);return this},t.prototype.mulM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var r=0;r<this.rows;r++)for(var n=0;n<this.columns;n++)this.set(r,n,this.get(r,n)*t.get(r,n));return this},t.mul=function(t,r){return new e(t).mul(r)},t.prototype.multiply=t.prototype.mul,t.prototype.multiplyS=t.prototype.mulS,t.prototype.multiplyM=t.prototype.mulM,t.multiply=t.mul,t.prototype.div=function(t){return"number"==typeof t?this.divS(t):this.divM(t)},t.prototype.divS=function(t){for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)/t);return this},t.prototype.divM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var r=0;r<this.rows;r++)for(var n=0;n<this.columns;n++)this.set(r,n,this.get(r,n)/t.get(r,n));return this},t.div=function(t,r){return new e(t).div(r)},t.prototype.divide=t.prototype.div,t.prototype.divideS=t.prototype.divS,t.prototype.divideM=t.prototype.divM,t.divide=t.div,t.prototype.mod=function(t){return"number"==typeof t?this.modS(t):this.modM(t)},t.prototype.modS=function(t){for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)%t);return this},t.prototype.modM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var r=0;r<this.rows;r++)for(var n=0;n<this.columns;n++)this.set(r,n,this.get(r,n)%t.get(r,n));return this},t.mod=function(t,r){return new e(t).mod(r)},t.prototype.modulus=t.prototype.mod,t.prototype.modulusS=t.prototype.modS,t.prototype.modulusM=t.prototype.modM,t.modulus=t.mod,t.prototype.and=function(t){return"number"==typeof t?this.andS(t):this.andM(t)},t.prototype.andS=function(t){for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)&t);return this},t.prototype.andM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var r=0;r<this.rows;r++)for(var n=0;n<this.columns;n++)this.set(r,n,this.get(r,n)&t.get(r,n));return this},t.and=function(t,r){return new e(t).and(r)},t.prototype.or=function(t){return"number"==typeof t?this.orS(t):this.orM(t)},t.prototype.orS=function(t){for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)|t);return this},t.prototype.orM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var r=0;r<this.rows;r++)for(var n=0;n<this.columns;n++)this.set(r,n,this.get(r,n)|t.get(r,n));return this},t.or=function(t,r){return new e(t).or(r)},t.prototype.xor=function(t){return"number"==typeof t?this.xorS(t):this.xorM(t)},t.prototype.xorS=function(t){for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)^t);return this},t.prototype.xorM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var r=0;r<this.rows;r++)for(var n=0;n<this.columns;n++)this.set(r,n,this.get(r,n)^t.get(r,n));return this},t.xor=function(t,r){return new e(t).xor(r)},t.prototype.leftShift=function(t){return"number"==typeof t?this.leftShiftS(t):this.leftShiftM(t)},t.prototype.leftShiftS=function(t){for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)<<t);return this},t.prototype.leftShiftM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var r=0;r<this.rows;r++)for(var n=0;n<this.columns;n++)this.set(r,n,this.get(r,n)<<t.get(r,n));return this},t.leftShift=function(t,r){return new e(t).leftShift(r)},t.prototype.signPropagatingRightShift=function(t){return"number"==typeof t?this.signPropagatingRightShiftS(t):this.signPropagatingRightShiftM(t)},t.prototype.signPropagatingRightShiftS=function(t){for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)>>t);return this},t.prototype.signPropagatingRightShiftM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var r=0;r<this.rows;r++)for(var n=0;n<this.columns;n++)this.set(r,n,this.get(r,n)>>t.get(r,n));return this},t.signPropagatingRightShift=function(t,r){return new e(t).signPropagatingRightShift(r)},t.prototype.rightShift=function(t){return"number"==typeof t?this.rightShiftS(t):this.rightShiftM(t)},t.prototype.rightShiftS=function(t){for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)>>>t);return this},t.prototype.rightShiftM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var r=0;r<this.rows;r++)for(var n=0;n<this.columns;n++)this.set(r,n,this.get(r,n)>>>t.get(r,n));return this},t.rightShift=function(t,r){return new e(t).rightShift(r)},t.prototype.zeroFillRightShift=t.prototype.rightShift,t.prototype.zeroFillRightShiftS=t.prototype.rightShiftS,t.prototype.zeroFillRightShiftM=t.prototype.rightShiftM,t.zeroFillRightShift=t.rightShift,t.prototype.not=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,~this.get(t,e));return this},t.not=function(t){return new e(t).not()},t.prototype.abs=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.abs(this.get(t,e)));return this},t.abs=function(t){return new e(t).abs()},t.prototype.acos=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.acos(this.get(t,e)));return this},t.acos=function(t){return new e(t).acos()},t.prototype.acosh=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.acosh(this.get(t,e)));return this},t.acosh=function(t){return new e(t).acosh()},t.prototype.asin=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.asin(this.get(t,e)));return this},t.asin=function(t){return new e(t).asin()},t.prototype.asinh=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.asinh(this.get(t,e)));return this},t.asinh=function(t){return new e(t).asinh()},t.prototype.atan=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.atan(this.get(t,e)));return this},t.atan=function(t){return new e(t).atan()},t.prototype.atanh=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.atanh(this.get(t,e)));return this},t.atanh=function(t){return new e(t).atanh()},t.prototype.cbrt=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.cbrt(this.get(t,e)));return this},t.cbrt=function(t){return new e(t).cbrt()},t.prototype.ceil=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.ceil(this.get(t,e)));return this},t.ceil=function(t){return new e(t).ceil()},t.prototype.clz32=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.clz32(this.get(t,e)));return this},t.clz32=function(t){return new e(t).clz32()},t.prototype.cos=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.cos(this.get(t,e)));return this},t.cos=function(t){return new e(t).cos()},t.prototype.cosh=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.cosh(this.get(t,e)));return this},t.cosh=function(t){return new e(t).cosh()},t.prototype.exp=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.exp(this.get(t,e)));return this},t.exp=function(t){return new e(t).exp()},t.prototype.expm1=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.expm1(this.get(t,e)));return this},t.expm1=function(t){return new e(t).expm1()},t.prototype.floor=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.floor(this.get(t,e)));return this},t.floor=function(t){return new e(t).floor()},t.prototype.fround=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.fround(this.get(t,e)));return this},t.fround=function(t){return new e(t).fround()},t.prototype.log=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.log(this.get(t,e)));return this},t.log=function(t){return new e(t).log()},t.prototype.log1p=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.log1p(this.get(t,e)));return this},t.log1p=function(t){return new e(t).log1p()},t.prototype.log10=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.log10(this.get(t,e)));return this},t.log10=function(t){return new e(t).log10()},t.prototype.log2=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.log2(this.get(t,e)));return this},t.log2=function(t){return new e(t).log2()},t.prototype.round=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.round(this.get(t,e)));return this},t.round=function(t){return new e(t).round()},t.prototype.sign=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.sign(this.get(t,e)));return this},t.sign=function(t){return new e(t).sign()},t.prototype.sin=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.sin(this.get(t,e)));return this},t.sin=function(t){return new e(t).sin()},t.prototype.sinh=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.sinh(this.get(t,e)));return this},t.sinh=function(t){return new e(t).sinh()},t.prototype.sqrt=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.sqrt(this.get(t,e)));return this},t.sqrt=function(t){return new e(t).sqrt()},t.prototype.tan=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.tan(this.get(t,e)));return this},t.tan=function(t){return new e(t).tan()},t.prototype.tanh=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.tanh(this.get(t,e)));return this},t.tanh=function(t){return new e(t).tanh()},t.prototype.trunc=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.trunc(this.get(t,e)));return this},t.trunc=function(t){return new e(t).trunc()},t.pow=function(t,r){return new e(t).pow(r)},t.prototype.pow=function(t){return"number"==typeof t?this.powS(t):this.powM(t)},t.prototype.powS=function(t){for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,Math.pow(this.get(e,r),t));return this},t.prototype.powM=function(t){if(t=e.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var r=0;r<this.rows;r++)for(var n=0;n<this.columns;n++)this.set(r,n,Math.pow(this.get(r,n),t.get(r,n)));return this}}(A,j);var F=function(t){function e(t,r,n){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(o=R(this,e)).matrix=t,o.rows=r,o.columns=n,o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&B(t,e)}(e,A),r=e,n&&N(r.prototype,n),o&&N(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function G(t){"@babel/helpers - typeof";return(G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function U(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,z(n.key),n)}}function z(t){var e=function(t,e){if("object"!=G(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=G(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==G(e)?e:e+""}function V(t,e,r){return e=H(e),function(t,e){if(e&&("object"===G(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],H(t).constructor):e.apply(t,r))}function H(t){return(H=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function W(t,e){return(W=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var q=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),h(t,r),(n=V(this,e,[t,t.rows,1])).column=r,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&W(t,e)}(e,F),r=e,(n=[{key:"set",value:function(t,e,r){return this.matrix.set(t,this.column,r),this}},{key:"get",value:function(t){return this.matrix.get(t,this.column)}}])&&U(r.prototype,n),o&&U(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function Y(t){"@babel/helpers - typeof";return(Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function X(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,J(n.key),n)}}function J(t){var e=function(t,e){if("object"!=Y(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Y(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Y(e)?e:e+""}function K(t,e,r){return e=Q(e),function(t,e){if(e&&("object"===Y(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Q(t).constructor):e.apply(t,r))}function Q(t){return(Q=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Z(t,e){return(Z=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var $=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r=g(t,r),(n=K(this,e,[t,t.rows,r.length])).columnIndices=r,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Z(t,e)}(e,F),r=e,(n=[{key:"set",value:function(t,e,r){return this.matrix.set(t,this.columnIndices[e],r),this}},{key:"get",value:function(t,e){return this.matrix.get(t,this.columnIndices[e])}}])&&X(r.prototype,n),o&&X(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function tt(t){"@babel/helpers - typeof";return(tt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function et(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,rt(n.key),n)}}function rt(t){var e=function(t,e){if("object"!=tt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=tt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==tt(e)?e:e+""}function nt(t,e,r){return e=ot(e),function(t,e){if(e&&("object"===tt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],ot(t).constructor):e.apply(t,r))}function ot(t){return(ot=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function it(t,e){return(it=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var at=function(t){function e(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),nt(this,e,[t,t.rows,t.columns])}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&it(t,e)}(e,F),r=e,(n=[{key:"set",value:function(t,e,r){return this.matrix.set(t,this.columns-e-1,r),this}},{key:"get",value:function(t,e){return this.matrix.get(t,this.columns-e-1)}}])&&et(r.prototype,n),o&&et(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function st(t){"@babel/helpers - typeof";return(st="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ut(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,lt(n.key),n)}}function lt(t){var e=function(t,e){if("object"!=st(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=st(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==st(e)?e:e+""}function ct(t,e,r){return e=ft(e),function(t,e){if(e&&("object"===st(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],ft(t).constructor):e.apply(t,r))}function ft(t){return(ft=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ht(t,e){return(ht=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var pt=function(t){function e(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),ct(this,e,[t,t.rows,t.columns])}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ht(t,e)}(e,F),r=e,(n=[{key:"set",value:function(t,e,r){return this.matrix.set(this.rows-t-1,e,r),this}},{key:"get",value:function(t,e){return this.matrix.get(this.rows-t-1,e)}}])&&ut(r.prototype,n),o&&ut(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function dt(t){"@babel/helpers - typeof";return(dt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function yt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,vt(n.key),n)}}function vt(t){var e=function(t,e){if("object"!=dt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=dt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==dt(e)?e:e+""}function gt(t,e,r){return e=mt(e),function(t,e){if(e&&("object"===dt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],mt(t).constructor):e.apply(t,r))}function mt(t){return(mt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function bt(t,e){return(bt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var wt=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),f(t,r),(n=gt(this,e,[t,1,t.columns])).row=r,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&bt(t,e)}(e,F),r=e,(n=[{key:"set",value:function(t,e,r){return this.matrix.set(this.row,e,r),this}},{key:"get",value:function(t,e){return this.matrix.get(this.row,e)}}])&&yt(r.prototype,n),o&&yt(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function St(t){"@babel/helpers - typeof";return(St="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function xt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,_t(n.key),n)}}function _t(t){var e=function(t,e){if("object"!=St(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=St(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==St(e)?e:e+""}function Et(t,e,r){return e=Ot(e),function(t,e){if(e&&("object"===St(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Ot(t).constructor):e.apply(t,r))}function Ot(t){return(Ot=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Pt(t,e){return(Pt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var kt=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Et(this,e,[t,(r=v(t,r)).length,t.columns])).rowIndices=r,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Pt(t,e)}(e,F),r=e,(n=[{key:"set",value:function(t,e,r){return this.matrix.set(this.rowIndices[t],e,r),this}},{key:"get",value:function(t,e){return this.matrix.get(this.rowIndices[t],e)}}])&&xt(r.prototype,n),o&&xt(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function Ct(t){"@babel/helpers - typeof";return(Ct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Tt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,At(n.key),n)}}function At(t){var e=function(t,e){if("object"!=Ct(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Ct(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Ct(e)?e:e+""}function Mt(t,e,r){return e=jt(e),function(t,e){if(e&&("object"===Ct(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],jt(t).constructor):e.apply(t,r))}function jt(t){return(jt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function It(t,e){return(It=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Nt=function(t){function e(t,r,n){var o;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=y(t,r,n);return(o=Mt(this,e,[t,i.row.length,i.column.length])).rowIndices=i.row,o.columnIndices=i.column,o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&It(t,e)}(e,F),r=e,(n=[{key:"set",value:function(t,e,r){return this.matrix.set(this.rowIndices[t],this.columnIndices[e],r),this}},{key:"get",value:function(t,e){return this.matrix.get(this.rowIndices[t],this.columnIndices[e])}}])&&Tt(r.prototype,n),o&&Tt(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function Lt(t){"@babel/helpers - typeof";return(Lt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Rt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Dt(n.key),n)}}function Dt(t){var e=function(t,e){if("object"!=Lt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Lt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Lt(e)?e:e+""}function Bt(t,e,r){return e=Ft(e),function(t,e){if(e&&("object"===Lt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Ft(t).constructor):e.apply(t,r))}function Ft(t){return(Ft=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Gt(t,e){return(Gt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Ut=function(t){function e(t,r,n,o,i){var a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),m(t,r,n,o,i),(a=Bt(this,e,[t,n-r+1,i-o+1])).startRow=r,a.startColumn=o,a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Gt(t,e)}(e,F),r=e,(n=[{key:"set",value:function(t,e,r){return this.matrix.set(this.startRow+t,this.startColumn+e,r),this}},{key:"get",value:function(t,e){return this.matrix.get(this.startRow+t,this.startColumn+e)}}])&&Rt(r.prototype,n),o&&Rt(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function zt(t){"@babel/helpers - typeof";return(zt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Vt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ht(n.key),n)}}function Ht(t){var e=function(t,e){if("object"!=zt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=zt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==zt(e)?e:e+""}function Wt(t,e,r){return e=qt(e),function(t,e){if(e&&("object"===zt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],qt(t).constructor):e.apply(t,r))}function qt(t){return(qt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Yt(t,e){return(Yt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Xt=function(t){function e(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Wt(this,e,[t,t.columns,t.rows])}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Yt(t,e)}(e,F),r=e,(n=[{key:"set",value:function(t,e,r){return this.matrix.set(e,t,r),this}},{key:"get",value:function(t,e){return this.matrix.get(e,t)}}])&&Vt(r.prototype,n),o&&Vt(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function Jt(t){"@babel/helpers - typeof";return(Jt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Kt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Qt(n.key),n)}}function Qt(t){var e=function(t,e){if("object"!=Jt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Jt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Jt(e)?e:e+""}function Zt(t,e,r){return e=$t(e),function(t,e){if(e&&("object"===Jt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],$t(t).constructor):e.apply(t,r))}function $t(t){return($t=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function te(t,e){return(te=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var ee=function(t){function e(t){var r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var o=n.rows,i=void 0===o?1:o;if(t.length%i!=0)throw new Error("the data length is not divisible by the number of rows");return(r=Zt(this,e)).rows=i,r.columns=t.length/i,r.data=t,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&te(t,e)}(e,A),r=e,(n=[{key:"set",value:function(t,e,r){var n=this._calculateIndex(t,e);return this.data[n]=r,this}},{key:"get",value:function(t,e){var r=this._calculateIndex(t,e);return this.data[r]}},{key:"_calculateIndex",value:function(t,e){return t*this.columns+e}}])&&Kt(r.prototype,n),o&&Kt(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function re(t){"@babel/helpers - typeof";return(re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ne(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,oe(n.key),n)}}function oe(t){var e=function(t,e){if("object"!=re(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=re(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==re(e)?e:e+""}function ie(t,e,r){return e=ae(e),function(t,e){if(e&&("object"===re(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],ae(t).constructor):e.apply(t,r))}function ae(t){return(ae=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function se(t,e){return(se=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var ue=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=ie(this,e)).data=t,r.rows=t.length,r.columns=t[0].length,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&se(t,e)}(e,A),r=e,(n=[{key:"set",value:function(t,e,r){return this.data[t][e]=r,this}},{key:"get",value:function(t,e){return this.data[t][e]}}])&&ne(r.prototype,n),o&&ne(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function le(t,e){if(Array.isArray(t))return t[0]&&Array.isArray(t[0])?new ue(t):new ee(t,e);throw new Error("the argument is not an array")}function ce(t){"@babel/helpers - typeof";return(ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function fe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,he(n.key),n)}}function he(t){var e=function(t,e){if("object"!=ce(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=ce(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ce(e)?e:e+""}var pe=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var r,n,o,i,a,s,u,l,c,f=(e=ue.checkMatrix(e)).clone(),h=f.rows,p=f.columns,d=new Float64Array(h),y=1;for(r=0;r<h;r++)d[r]=r;for(l=new Float64Array(h),n=0;n<p;n++){for(r=0;r<h;r++)l[r]=f.get(r,n);for(r=0;r<h;r++){for(c=Math.min(r,n),a=0,o=0;o<c;o++)a+=f.get(r,o)*l[o];l[r]-=a,f.set(r,n,l[r])}for(i=n,r=n+1;r<h;r++)Math.abs(l[r])>Math.abs(l[i])&&(i=r);if(i!==n){for(o=0;o<p;o++)s=f.get(i,o),f.set(i,o,f.get(n,o)),f.set(n,o,s);u=d[i],d[i]=d[n],d[n]=u,y=-y}if(n<h&&0!==f.get(n,n))for(r=n+1;r<h;r++)f.set(r,n,f.get(r,n)/f.get(n,n))}this.LU=f,this.pivotVector=d,this.pivotSign=y},(e=[{key:"isSingular",value:function(){for(var t=this.LU,e=t.columns,r=0;r<e;r++)if(0===t.get(r,r))return!0;return!1}},{key:"solve",value:function(t){t=j.checkMatrix(t);var e=this.LU;if(e.rows!==t.rows)throw new Error("Invalid matrix dimensions");if(this.isSingular())throw new Error("LU matrix is singular");var r,n,o,i=t.columns,a=t.subMatrixRow(this.pivotVector,0,i-1),s=e.columns;for(o=0;o<s;o++)for(r=o+1;r<s;r++)for(n=0;n<i;n++)a.set(r,n,a.get(r,n)-a.get(o,n)*e.get(r,o));for(o=s-1;o>=0;o--){for(n=0;n<i;n++)a.set(o,n,a.get(o,n)/e.get(o,o));for(r=0;r<o;r++)for(n=0;n<i;n++)a.set(r,n,a.get(r,n)-a.get(o,n)*e.get(r,o))}return a}},{key:"determinant",get:function(){var t=this.LU;if(!t.isSquare())throw new Error("Matrix must be square");for(var e=this.pivotSign,r=t.columns,n=0;n<r;n++)e*=t.get(n,n);return e}},{key:"lowerTriangularMatrix",get:function(){for(var t=this.LU,e=t.rows,r=t.columns,n=new j(e,r),o=0;o<e;o++)for(var i=0;i<r;i++)o>i?n.set(o,i,t.get(o,i)):o===i?n.set(o,i,1):n.set(o,i,0);return n}},{key:"upperTriangularMatrix",get:function(){for(var t=this.LU,e=t.rows,r=t.columns,n=new j(e,r),o=0;o<e;o++)for(var i=0;i<r;i++)o<=i?n.set(o,i,t.get(o,i)):n.set(o,i,0);return n}},{key:"pivotPermutationVector",get:function(){return Array.from(this.pivotVector)}}])&&fe(t.prototype,e),r&&fe(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function de(t,e){var r=0;return Math.abs(t)>Math.abs(e)?(r=e/t,Math.abs(t)*Math.sqrt(1+r*r)):0!==e?(r=t/e,Math.abs(e)*Math.sqrt(1+r*r)):0}function ye(t){"@babel/helpers - typeof";return(ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ve(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ge(n.key),n)}}function ge(t){var e=function(t,e){if("object"!=ye(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=ye(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ye(e)?e:e+""}var me=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var r,n,o,i,a=(e=ue.checkMatrix(e)).clone(),s=e.rows,u=e.columns,l=new Float64Array(u);for(o=0;o<u;o++){var c=0;for(r=o;r<s;r++)c=de(c,a.get(r,o));if(0!==c){for(a.get(o,o)<0&&(c=-c),r=o;r<s;r++)a.set(r,o,a.get(r,o)/c);for(a.set(o,o,a.get(o,o)+1),n=o+1;n<u;n++){for(i=0,r=o;r<s;r++)i+=a.get(r,o)*a.get(r,n);for(i=-i/a.get(o,o),r=o;r<s;r++)a.set(r,n,a.get(r,n)+i*a.get(r,o))}}l[o]=-c}this.QR=a,this.Rdiag=l},(e=[{key:"solve",value:function(t){t=j.checkMatrix(t);var e=this.QR,r=e.rows;if(t.rows!==r)throw new Error("Matrix row dimensions must agree");if(!this.isFullRank())throw new Error("Matrix is rank deficient");var n,o,i,a,s=t.columns,u=t.clone(),l=e.columns;for(i=0;i<l;i++)for(o=0;o<s;o++){for(a=0,n=i;n<r;n++)a+=e.get(n,i)*u.get(n,o);for(a=-a/e.get(i,i),n=i;n<r;n++)u.set(n,o,u.get(n,o)+a*e.get(n,i))}for(i=l-1;i>=0;i--){for(o=0;o<s;o++)u.set(i,o,u.get(i,o)/this.Rdiag[i]);for(n=0;n<i;n++)for(o=0;o<s;o++)u.set(n,o,u.get(n,o)-u.get(i,o)*e.get(n,i))}return u.subMatrix(0,l-1,0,s-1)}},{key:"isFullRank",value:function(){for(var t=this.QR.columns,e=0;e<t;e++)if(0===this.Rdiag[e])return!1;return!0}},{key:"upperTriangularMatrix",get:function(){var t,e,r=this.QR,n=r.columns,o=new j(n,n);for(t=0;t<n;t++)for(e=0;e<n;e++)t<e?o.set(t,e,r.get(t,e)):t===e?o.set(t,e,this.Rdiag[t]):o.set(t,e,0);return o}},{key:"orthogonalMatrix",get:function(){var t,e,r,n,o=this.QR,i=o.rows,a=o.columns,s=new j(i,a);for(r=a-1;r>=0;r--){for(t=0;t<i;t++)s.set(t,r,0);for(s.set(r,r,1),e=r;e<a;e++)if(0!==o.get(r,r)){for(n=0,t=r;t<i;t++)n+=o.get(t,r)*s.get(t,e);for(n=-n/o.get(r,r),t=r;t<i;t++)s.set(t,e,s.get(t,e)+n*o.get(t,r))}}return s}}])&&ve(t.prototype,e),r&&ve(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function be(t){"@babel/helpers - typeof";return(be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function we(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Se(n.key),n)}}function Se(t){var e=function(t,e){if("object"!=be(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=be(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==be(e)?e:e+""}var xe=function(){return t=function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var n,o=(e=ue.checkMatrix(e)).rows,i=e.columns,a=r.computeLeftSingularVectors,s=void 0===a||a,u=r.computeRightSingularVectors,l=void 0===u||u,c=r.autoTranspose,f=void 0!==c&&c,h=Boolean(s),p=Boolean(l),d=!1;if(o<i)if(f){o=(n=e.transpose()).rows,i=n.columns,d=!0;var y=h;h=p,p=y}else n=e.clone(),console.warn("Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose");else n=e.clone();for(var v=Math.min(o,i),g=Math.min(o+1,i),m=new Float64Array(g),b=new j(o,v),w=new j(i,i),S=new Float64Array(i),x=new Float64Array(o),_=new Float64Array(g),E=0;E<g;E++)_[E]=E;for(var O=Math.min(o-1,i),P=Math.max(0,Math.min(i-2,o)),k=Math.max(O,P),C=0;C<k;C++){if(C<O){m[C]=0;for(var T=C;T<o;T++)m[C]=de(m[C],n.get(T,C));if(0!==m[C]){n.get(C,C)<0&&(m[C]=-m[C]);for(var A=C;A<o;A++)n.set(A,C,n.get(A,C)/m[C]);n.set(C,C,n.get(C,C)+1)}m[C]=-m[C]}for(var M=C+1;M<i;M++){if(C<O&&0!==m[C]){for(var I=0,N=C;N<o;N++)I+=n.get(N,C)*n.get(N,M);I=-I/n.get(C,C);for(var L=C;L<o;L++)n.set(L,M,n.get(L,M)+I*n.get(L,C))}S[M]=n.get(C,M)}if(h&&C<O)for(var R=C;R<o;R++)b.set(R,C,n.get(R,C));if(C<P){S[C]=0;for(var D=C+1;D<i;D++)S[C]=de(S[C],S[D]);if(0!==S[C]){S[C+1]<0&&(S[C]=0-S[C]);for(var B=C+1;B<i;B++)S[B]/=S[C];S[C+1]+=1}if(S[C]=-S[C],C+1<o&&0!==S[C]){for(var F=C+1;F<o;F++)x[F]=0;for(var G=C+1;G<o;G++)for(var U=C+1;U<i;U++)x[G]+=S[U]*n.get(G,U);for(var z=C+1;z<i;z++)for(var V=-S[z]/S[C+1],H=C+1;H<o;H++)n.set(H,z,n.get(H,z)+V*x[H])}if(p)for(var W=C+1;W<i;W++)w.set(W,C,S[W])}}var q=Math.min(i,o+1);if(O<i&&(m[O]=n.get(O,O)),o<q&&(m[q-1]=0),P+1<q&&(S[P]=n.get(P,q-1)),S[q-1]=0,h){for(var Y=O;Y<v;Y++){for(var X=0;X<o;X++)b.set(X,Y,0);b.set(Y,Y,1)}for(var J=O-1;J>=0;J--)if(0!==m[J]){for(var K=J+1;K<v;K++){for(var Q=0,Z=J;Z<o;Z++)Q+=b.get(Z,J)*b.get(Z,K);Q=-Q/b.get(J,J);for(var $=J;$<o;$++)b.set($,K,b.get($,K)+Q*b.get($,J))}for(var tt=J;tt<o;tt++)b.set(tt,J,-b.get(tt,J));b.set(J,J,1+b.get(J,J));for(var et=0;et<J-1;et++)b.set(et,J,0)}else{for(var rt=0;rt<o;rt++)b.set(rt,J,0);b.set(J,J,1)}}if(p)for(var nt=i-1;nt>=0;nt--){if(nt<P&&0!==S[nt])for(var ot=nt+1;ot<i;ot++){for(var it=0,at=nt+1;at<i;at++)it+=w.get(at,nt)*w.get(at,ot);it=-it/w.get(nt+1,nt);for(var st=nt+1;st<i;st++)w.set(st,ot,w.get(st,ot)+it*w.get(st,nt))}for(var ut=0;ut<i;ut++)w.set(ut,nt,0);w.set(nt,nt,1)}for(var lt=q-1,ct=Number.EPSILON;q>0;){var ft=void 0,ht=void 0;for(ft=q-2;ft>=-1&&-1!==ft;ft--){var pt=Number.MIN_VALUE+ct*Math.abs(m[ft]+Math.abs(m[ft+1]));if(Math.abs(S[ft])<=pt||Number.isNaN(S[ft])){S[ft]=0;break}}if(ft===q-2)ht=4;else{var dt=void 0;for(dt=q-1;dt>=ft&&dt!==ft;dt--){var yt=(dt!==q?Math.abs(S[dt]):0)+(dt!==ft+1?Math.abs(S[dt-1]):0);if(Math.abs(m[dt])<=ct*yt){m[dt]=0;break}}dt===ft?ht=3:dt===q-1?ht=1:(ht=2,ft=dt)}switch(ft++,ht){case 1:var vt=S[q-2];S[q-2]=0;for(var gt=q-2;gt>=ft;gt--){var mt=de(m[gt],vt),bt=m[gt]/mt,wt=vt/mt;if(m[gt]=mt,gt!==ft&&(vt=-wt*S[gt-1],S[gt-1]=bt*S[gt-1]),p)for(var St=0;St<i;St++)mt=bt*w.get(St,gt)+wt*w.get(St,q-1),w.set(St,q-1,-wt*w.get(St,gt)+bt*w.get(St,q-1)),w.set(St,gt,mt)}break;case 2:var xt=S[ft-1];S[ft-1]=0;for(var _t=ft;_t<q;_t++){var Et=de(m[_t],xt),Ot=m[_t]/Et,Pt=xt/Et;if(m[_t]=Et,xt=-Pt*S[_t],S[_t]=Ot*S[_t],h)for(var kt=0;kt<o;kt++)Et=Ot*b.get(kt,_t)+Pt*b.get(kt,ft-1),b.set(kt,ft-1,-Pt*b.get(kt,_t)+Ot*b.get(kt,ft-1)),b.set(kt,_t,Et)}break;case 3:var Ct=Math.max(Math.abs(m[q-1]),Math.abs(m[q-2]),Math.abs(S[q-2]),Math.abs(m[ft]),Math.abs(S[ft])),Tt=m[q-1]/Ct,At=m[q-2]/Ct,Mt=S[q-2]/Ct,jt=m[ft]/Ct,It=S[ft]/Ct,Nt=((At+Tt)*(At-Tt)+Mt*Mt)/2,Lt=Tt*Mt*(Tt*Mt),Rt=0;0===Nt&&0===Lt||(Rt=Lt/(Nt+(Rt=Nt<0?0-Math.sqrt(Nt*Nt+Lt):Math.sqrt(Nt*Nt+Lt))));for(var Dt=(jt+Tt)*(jt-Tt)+Rt,Bt=jt*It,Ft=ft;Ft<q-1;Ft++){var Gt=de(Dt,Bt);0===Gt&&(Gt=Number.MIN_VALUE);var Ut=Dt/Gt,zt=Bt/Gt;if(Ft!==ft&&(S[Ft-1]=Gt),Dt=Ut*m[Ft]+zt*S[Ft],S[Ft]=Ut*S[Ft]-zt*m[Ft],Bt=zt*m[Ft+1],m[Ft+1]=Ut*m[Ft+1],p)for(var Vt=0;Vt<i;Vt++)Gt=Ut*w.get(Vt,Ft)+zt*w.get(Vt,Ft+1),w.set(Vt,Ft+1,-zt*w.get(Vt,Ft)+Ut*w.get(Vt,Ft+1)),w.set(Vt,Ft,Gt);if(0===(Gt=de(Dt,Bt))&&(Gt=Number.MIN_VALUE),Ut=Dt/Gt,zt=Bt/Gt,m[Ft]=Gt,Dt=Ut*S[Ft]+zt*m[Ft+1],m[Ft+1]=-zt*S[Ft]+Ut*m[Ft+1],Bt=zt*S[Ft+1],S[Ft+1]=Ut*S[Ft+1],h&&Ft<o-1)for(var Ht=0;Ht<o;Ht++)Gt=Ut*b.get(Ht,Ft)+zt*b.get(Ht,Ft+1),b.set(Ht,Ft+1,-zt*b.get(Ht,Ft)+Ut*b.get(Ht,Ft+1)),b.set(Ht,Ft,Gt)}S[q-2]=Dt;break;case 4:if(m[ft]<=0&&(m[ft]=m[ft]<0?-m[ft]:0,p))for(var Wt=0;Wt<=lt;Wt++)w.set(Wt,ft,-w.get(Wt,ft));for(;ft<lt&&!(m[ft]>=m[ft+1]);){var qt=m[ft];if(m[ft]=m[ft+1],m[ft+1]=qt,p&&ft<i-1)for(var Yt=0;Yt<i;Yt++)qt=w.get(Yt,ft+1),w.set(Yt,ft+1,w.get(Yt,ft)),w.set(Yt,ft,qt);if(h&&ft<o-1)for(var Xt=0;Xt<o;Xt++)qt=b.get(Xt,ft+1),b.set(Xt,ft+1,b.get(Xt,ft)),b.set(Xt,ft,qt);ft++}q--}}if(d){var Jt=w;w=b,b=Jt}this.m=o,this.n=i,this.s=m,this.U=b,this.V=w},(e=[{key:"solve",value:function(t){for(var e=t,r=this.threshold,n=this.s.length,o=j.zeros(n,n),i=0;i<n;i++)Math.abs(this.s[i])<=r?o.set(i,i,0):o.set(i,i,1/this.s[i]);for(var a=this.U,s=this.rightSingularVectors,u=s.mmul(o),l=s.rows,c=a.rows,f=j.zeros(l,c),h=0;h<l;h++)for(var p=0;p<c;p++){for(var d=0,y=0;y<n;y++)d+=u.get(h,y)*a.get(p,y);f.set(h,p,d)}return f.mmul(e)}},{key:"solveForDiagonal",value:function(t){return this.solve(j.diag(t))}},{key:"inverse",value:function(){for(var t=this.V,e=this.threshold,r=t.rows,n=t.columns,o=new j(r,this.s.length),i=0;i<r;i++)for(var a=0;a<n;a++)Math.abs(this.s[a])>e&&o.set(i,a,t.get(i,a)/this.s[a]);for(var s=this.U,u=s.rows,l=s.columns,c=new j(r,u),f=0;f<r;f++)for(var h=0;h<u;h++){for(var p=0,d=0;d<l;d++)p+=o.get(f,d)*s.get(h,d);c.set(f,h,p)}return c}},{key:"condition",get:function(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]}},{key:"norm2",get:function(){return this.s[0]}},{key:"rank",get:function(){for(var t=Math.max(this.m,this.n)*this.s[0]*Number.EPSILON,e=0,r=this.s,n=0,o=r.length;n<o;n++)r[n]>t&&e++;return e}},{key:"diagonal",get:function(){return Array.from(this.s)}},{key:"threshold",get:function(){return Number.EPSILON/2*Math.max(this.m,this.n)*this.s[0]}},{key:"leftSingularVectors",get:function(){return this.U}},{key:"rightSingularVectors",get:function(){return this.V}},{key:"diagonalMatrix",get:function(){return j.diag(this.s)}}])&&we(t.prototype,e),r&&we(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function _e(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t=ue.checkMatrix(t),e?new xe(t).inverse():Ee(t,j.eye(t.rows))}function Ee(t,e){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return t=ue.checkMatrix(t),e=ue.checkMatrix(e),r?new xe(t).solve(e):t.isSquare()?new pe(t).solve(e):new me(t).solve(e)}function Oe(t){var e,r,n,o,i,a;if((t=j.checkMatrix(t)).isSquare())return 2===t.columns?(e=t.get(0,0),r=t.get(0,1),n=t.get(1,0),e*t.get(1,1)-r*n):3===t.columns?(o=new Nt(t,[1,2],[1,2]),i=new Nt(t,[1,2],[0,2]),a=new Nt(t,[1,2],[0,1]),e=t.get(0,0),r=t.get(0,1),n=t.get(0,2),e*Oe(o)-r*Oe(i)+n*Oe(a)):new pe(t).determinant;throw Error("determinant can only be calculated for a square matrix")}function Pe(t,e){for(var r=[],n=0;n<t;n++)n!==e&&r.push(n);return r}function ke(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e-9;if(t>(arguments.length>4&&void 0!==arguments[4]?arguments[4]:1e-9))return new Array(e.rows+1).fill(0);for(var o=e.addRow(r,[0]),i=0;i<o.rows;i++)Math.abs(o.get(i,0))<n&&o.set(i,0,0);return o.to1DArray()}function Ce(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.thresholdValue,n=void 0===r?1e-9:r,o=e.thresholdError,i=void 0===o?1e-9:o,a=(t=j.checkMatrix(t)).rows,s=new j(a,a),u=0;u<a;u++){var l=j.columnVector(t.getRow(u)),c=t.subMatrixRow(Pe(a,u)).transpose(),f=new xe(c).solve(l),h=j.sub(l,c.mmul(f)).abs().max();s.setRow(u,ke(h,f,u,n,i))}return s}function Te(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.EPSILON;t=j.checkMatrix(t);for(var r=new xe(t,{autoTranspose:!0}),n=r.leftSingularVectors,o=r.rightSingularVectors,i=r.diagonal,a=0;a<i.length;a++)Math.abs(i[a])>e?i[a]=1/i[a]:i[a]=0;return o.mmul(j.diag(i).mmul(n.transpose()))}function Ae(t){"@babel/helpers - typeof";return(Ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Me(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};t=new j(t);var n=!1;if("object"!==Ae(e)||j.isMatrix(e)||Array.isArray(e)?e=new j(e):(r=e,e=t,n=!0),t.rows!==e.rows)throw new TypeError("Both matrices must have the same number of rows");var o=r.center;(void 0===o||o)&&(t=t.center("column"),n||(e=e.center("column")));for(var i=t.transpose().mmul(e),a=0;a<i.rows;a++)for(var s=0;s<i.columns;s++)i.set(a,s,i.get(a,s)*(1/(t.rows-1)));return i}function je(t){"@babel/helpers - typeof";return(je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ie(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};t=new j(t);var n=!1;if("object"!==je(e)||j.isMatrix(e)||Array.isArray(e)?e=new j(e):(r=e,e=t,n=!0),t.rows!==e.rows)throw new TypeError("Both matrices must have the same number of rows");var o=r,i=o.center,a=void 0===i||i,s=o.scale,u=void 0===s||s;a&&(t.center("column"),n||e.center("column")),u&&(t.scale("column"),n||e.scale("column"));for(var l=t.standardDeviation("column",{unbiased:!0}),c=n?l:e.standardDeviation("column",{unbiased:!0}),f=t.transpose().mmul(e),h=0;h<f.rows;h++)for(var p=0;p<f.columns;p++)f.set(h,p,f.get(h,p)*(1/(l[h]*c[p]))*(1/(t.rows-1)));return f}function Ne(t){"@babel/helpers - typeof";return(Ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Le(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Re(n.key),n)}}function Re(t){var e=function(t,e){if("object"!=Ne(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Ne(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Ne(e)?e:e+""}var De=function(){return t=function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var n=r.assumeSymmetric,o=void 0!==n&&n;if(!(e=ue.checkMatrix(e)).isSquare())throw new Error("Matrix is not a square matrix");var i,a,s=e.columns,u=new j(s,s),l=new Float64Array(s),c=new Float64Array(s),f=e;if(o||e.isSymmetric()){for(i=0;i<s;i++)for(a=0;a<s;a++)u.set(i,a,f.get(i,a));!function(t,e,r,n){var o,i,a,s,u,l,c,f;for(u=0;u<t;u++)r[u]=n.get(t-1,u);for(s=t-1;s>0;s--){for(f=0,a=0,l=0;l<s;l++)f+=Math.abs(r[l]);if(0===f)for(e[s]=r[s-1],u=0;u<s;u++)r[u]=n.get(s-1,u),n.set(s,u,0),n.set(u,s,0);else{for(l=0;l<s;l++)r[l]/=f,a+=r[l]*r[l];for(o=r[s-1],i=Math.sqrt(a),o>0&&(i=-i),e[s]=f*i,a-=o*i,r[s-1]=o-i,u=0;u<s;u++)e[u]=0;for(u=0;u<s;u++){for(o=r[u],n.set(u,s,o),i=e[u]+n.get(u,u)*o,l=u+1;l<=s-1;l++)i+=n.get(l,u)*r[l],e[l]+=n.get(l,u)*o;e[u]=i}for(o=0,u=0;u<s;u++)e[u]/=a,o+=e[u]*r[u];for(c=o/(a+a),u=0;u<s;u++)e[u]-=c*r[u];for(u=0;u<s;u++){for(o=r[u],i=e[u],l=u;l<=s-1;l++)n.set(l,u,n.get(l,u)-(o*e[l]+i*r[l]));r[u]=n.get(s-1,u),n.set(s,u,0)}}r[s]=a}for(s=0;s<t-1;s++){if(n.set(t-1,s,n.get(s,s)),n.set(s,s,1),0!==(a=r[s+1])){for(l=0;l<=s;l++)r[l]=n.get(l,s+1)/a;for(u=0;u<=s;u++){for(i=0,l=0;l<=s;l++)i+=n.get(l,s+1)*n.get(l,u);for(l=0;l<=s;l++)n.set(l,u,n.get(l,u)-i*r[l])}}for(l=0;l<=s;l++)n.set(l,s+1,0)}for(u=0;u<t;u++)r[u]=n.get(t-1,u),n.set(t-1,u,0);n.set(t-1,t-1,1),e[0]=0}(s,c,l,u),function(t,e,r,n){var o,i,a,s,u,l,c,f,h,p,d,y,v,g,m,b;for(a=1;a<t;a++)e[a-1]=e[a];e[t-1]=0;var w=0,S=0,x=Number.EPSILON;for(l=0;l<t;l++){for(S=Math.max(S,Math.abs(r[l])+Math.abs(e[l])),c=l;c<t&&!(Math.abs(e[c])<=x*S);)c++;if(c>l)do{for(o=r[l],f=(r[l+1]-o)/(2*e[l]),h=de(f,1),f<0&&(h=-h),r[l]=e[l]/(f+h),r[l+1]=e[l]*(f+h),p=r[l+1],i=o-r[l],a=l+2;a<t;a++)r[a]-=i;for(w+=i,f=r[c],y=d=1,v=d,g=e[l+1],m=0,b=0,a=c-1;a>=l;a--)for(v=y,y=d,b=m,o=d*e[a],i=d*f,h=de(f,e[a]),e[a+1]=m*h,m=e[a]/h,f=(d=f/h)*r[a]-m*o,r[a+1]=i+m*(d*o+m*r[a]),u=0;u<t;u++)i=n.get(u,a+1),n.set(u,a+1,m*n.get(u,a)+d*i),n.set(u,a,d*n.get(u,a)-m*i);f=-m*b*v*g*e[l]/p,e[l]=m*f,r[l]=d*f}while(Math.abs(e[l])>x*S);r[l]=r[l]+w,e[l]=0}for(a=0;a<t-1;a++){for(u=a,f=r[a],s=a+1;s<t;s++)r[s]<f&&(u=s,f=r[s]);if(u!==a)for(r[u]=r[a],r[a]=f,s=0;s<t;s++)f=n.get(s,a),n.set(s,a,n.get(s,u)),n.set(s,u,f)}}(s,c,l,u)}else{var h=new j(s,s),p=new Float64Array(s);for(a=0;a<s;a++)for(i=0;i<s;i++)h.set(i,a,f.get(i,a));!function(t,e,r,n){var o,i,a,s,u,l,c,f=t-1;for(l=1;l<=f-1;l++){for(c=0,s=l;s<=f;s++)c+=Math.abs(e.get(s,l-1));if(0!==c){for(a=0,s=f;s>=l;s--)r[s]=e.get(s,l-1)/c,a+=r[s]*r[s];for(i=Math.sqrt(a),r[l]>0&&(i=-i),a-=r[l]*i,r[l]=r[l]-i,u=l;u<t;u++){for(o=0,s=f;s>=l;s--)o+=r[s]*e.get(s,u);for(o/=a,s=l;s<=f;s++)e.set(s,u,e.get(s,u)-o*r[s])}for(s=0;s<=f;s++){for(o=0,u=f;u>=l;u--)o+=r[u]*e.get(s,u);for(o/=a,u=l;u<=f;u++)e.set(s,u,e.get(s,u)-o*r[u])}r[l]=c*r[l],e.set(l,l-1,c*i)}}for(s=0;s<t;s++)for(u=0;u<t;u++)n.set(s,u,s===u?1:0);for(l=f-1;l>=1;l--)if(0!==e.get(l,l-1)){for(s=l+1;s<=f;s++)r[s]=e.get(s,l-1);for(u=l;u<=f;u++){for(i=0,s=l;s<=f;s++)i+=r[s]*n.get(s,u);for(i=i/r[l]/e.get(l,l-1),s=l;s<=f;s++)n.set(s,u,n.get(s,u)+i*r[s])}}}(s,h,p,u),function(t,e,r,n,o){var i,a,s,u,l,c,f,h,p,d,y,v,g,m,b,w=t-1,S=t-1,x=Number.EPSILON,_=0,E=0,O=0,P=0,k=0,C=0,T=0,A=0;for(i=0;i<t;i++)for((i<0||i>S)&&(r[i]=o.get(i,i),e[i]=0),a=Math.max(i-1,0);a<t;a++)E+=Math.abs(o.get(i,a));for(;w>=0;){for(u=w;u>0&&(0===(C=Math.abs(o.get(u-1,u-1))+Math.abs(o.get(u,u)))&&(C=E),!(Math.abs(o.get(u,u-1))<x*C));)u--;if(u===w)o.set(w,w,o.get(w,w)+_),r[w]=o.get(w,w),e[w]=0,w--,A=0;else if(u===w-1){if(f=o.get(w,w-1)*o.get(w-1,w),O=(o.get(w-1,w-1)-o.get(w,w))/2,P=O*O+f,T=Math.sqrt(Math.abs(P)),o.set(w,w,o.get(w,w)+_),o.set(w-1,w-1,o.get(w-1,w-1)+_),h=o.get(w,w),P>=0){for(T=O>=0?O+T:O-T,r[w-1]=h+T,r[w]=r[w-1],0!==T&&(r[w]=h-f/T),e[w-1]=0,e[w]=0,h=o.get(w,w-1),C=Math.abs(h)+Math.abs(T),O=h/C,P=T/C,k=Math.sqrt(O*O+P*P),O/=k,P/=k,a=w-1;a<t;a++)T=o.get(w-1,a),o.set(w-1,a,P*T+O*o.get(w,a)),o.set(w,a,P*o.get(w,a)-O*T);for(i=0;i<=w;i++)T=o.get(i,w-1),o.set(i,w-1,P*T+O*o.get(i,w)),o.set(i,w,P*o.get(i,w)-O*T);for(i=0;i<=S;i++)T=n.get(i,w-1),n.set(i,w-1,P*T+O*n.get(i,w)),n.set(i,w,P*n.get(i,w)-O*T)}else r[w-1]=h+O,r[w]=h+O,e[w-1]=T,e[w]=-T;w-=2,A=0}else{if(h=o.get(w,w),p=0,f=0,u<w&&(p=o.get(w-1,w-1),f=o.get(w,w-1)*o.get(w-1,w)),10===A){for(_+=h,i=0;i<=w;i++)o.set(i,i,o.get(i,i)-h);C=Math.abs(o.get(w,w-1))+Math.abs(o.get(w-1,w-2)),h=p=.75*C,f=-.4375*C*C}if(30===A&&(C=(C=(p-h)/2)*C+f)>0){for(C=Math.sqrt(C),p<h&&(C=-C),C=h-f/((p-h)/2+C),i=0;i<=w;i++)o.set(i,i,o.get(i,i)-C);_+=C,h=p=f=.964}for(A+=1,l=w-2;l>=u&&(T=o.get(l,l),O=((k=h-T)*(C=p-T)-f)/o.get(l+1,l)+o.get(l,l+1),P=o.get(l+1,l+1)-T-k-C,k=o.get(l+2,l+1),C=Math.abs(O)+Math.abs(P)+Math.abs(k),O/=C,P/=C,k/=C,l!==u)&&!(Math.abs(o.get(l,l-1))*(Math.abs(P)+Math.abs(k))<x*(Math.abs(O)*(Math.abs(o.get(l-1,l-1))+Math.abs(T)+Math.abs(o.get(l+1,l+1)))));)l--;for(i=l+2;i<=w;i++)o.set(i,i-2,0),i>l+2&&o.set(i,i-3,0);for(s=l;s<=w-1&&(m=s!==w-1,s!==l&&(O=o.get(s,s-1),P=o.get(s+1,s-1),k=m?o.get(s+2,s-1):0,0!==(h=Math.abs(O)+Math.abs(P)+Math.abs(k))&&(O/=h,P/=h,k/=h)),0!==h);s++)if(C=Math.sqrt(O*O+P*P+k*k),O<0&&(C=-C),0!==C){for(s!==l?o.set(s,s-1,-C*h):u!==l&&o.set(s,s-1,-o.get(s,s-1)),h=(O+=C)/C,p=P/C,T=k/C,P/=O,k/=O,a=s;a<t;a++)O=o.get(s,a)+P*o.get(s+1,a),m&&(O+=k*o.get(s+2,a),o.set(s+2,a,o.get(s+2,a)-O*T)),o.set(s,a,o.get(s,a)-O*h),o.set(s+1,a,o.get(s+1,a)-O*p);for(i=0;i<=Math.min(w,s+3);i++)O=h*o.get(i,s)+p*o.get(i,s+1),m&&(O+=T*o.get(i,s+2),o.set(i,s+2,o.get(i,s+2)-O*k)),o.set(i,s,o.get(i,s)-O),o.set(i,s+1,o.get(i,s+1)-O*P);for(i=0;i<=S;i++)O=h*n.get(i,s)+p*n.get(i,s+1),m&&(O+=T*n.get(i,s+2),n.set(i,s+2,n.get(i,s+2)-O*k)),n.set(i,s,n.get(i,s)-O),n.set(i,s+1,n.get(i,s+1)-O*P)}}}if(0!==E){for(w=t-1;w>=0;w--)if(O=r[w],0===(P=e[w]))for(u=w,o.set(w,w,1),i=w-1;i>=0;i--){for(f=o.get(i,i)-O,k=0,a=u;a<=w;a++)k+=o.get(i,a)*o.get(a,w);if(e[i]<0)T=f,C=k;else if(u=i,0===e[i]?o.set(i,w,0!==f?-k/f:-k/(x*E)):(h=o.get(i,i+1),p=o.get(i+1,i),P=(r[i]-O)*(r[i]-O)+e[i]*e[i],c=(h*C-T*k)/P,o.set(i,w,c),o.set(i+1,w,Math.abs(h)>Math.abs(T)?(-k-f*c)/h:(-C-p*c)/T)),c=Math.abs(o.get(i,w)),x*c*c>1)for(a=i;a<=w;a++)o.set(a,w,o.get(a,w)/c)}else if(P<0)for(u=w-1,Math.abs(o.get(w,w-1))>Math.abs(o.get(w-1,w))?(o.set(w-1,w-1,P/o.get(w,w-1)),o.set(w-1,w,-(o.get(w,w)-O)/o.get(w,w-1))):(b=Be(0,-o.get(w-1,w),o.get(w-1,w-1)-O,P),o.set(w-1,w-1,b[0]),o.set(w-1,w,b[1])),o.set(w,w-1,0),o.set(w,w,1),i=w-2;i>=0;i--){for(d=0,y=0,a=u;a<=w;a++)d+=o.get(i,a)*o.get(a,w-1),y+=o.get(i,a)*o.get(a,w);if(f=o.get(i,i)-O,e[i]<0)T=f,k=d,C=y;else if(u=i,0===e[i]?(b=Be(-d,-y,f,P),o.set(i,w-1,b[0]),o.set(i,w,b[1])):(h=o.get(i,i+1),p=o.get(i+1,i),v=(r[i]-O)*(r[i]-O)+e[i]*e[i]-P*P,g=2*(r[i]-O)*P,0===v&&0===g&&(v=x*E*(Math.abs(f)+Math.abs(P)+Math.abs(h)+Math.abs(p)+Math.abs(T))),b=Be(h*k-T*d+P*y,h*C-T*y-P*d,v,g),o.set(i,w-1,b[0]),o.set(i,w,b[1]),Math.abs(h)>Math.abs(T)+Math.abs(P)?(o.set(i+1,w-1,(-d-f*o.get(i,w-1)+P*o.get(i,w))/h),o.set(i+1,w,(-y-f*o.get(i,w)-P*o.get(i,w-1))/h)):(b=Be(-k-p*o.get(i,w-1),-C-p*o.get(i,w),T,P),o.set(i+1,w-1,b[0]),o.set(i+1,w,b[1]))),c=Math.max(Math.abs(o.get(i,w-1)),Math.abs(o.get(i,w))),x*c*c>1)for(a=i;a<=w;a++)o.set(a,w-1,o.get(a,w-1)/c),o.set(a,w,o.get(a,w)/c)}for(i=0;i<t;i++)if(i<0||i>S)for(a=i;a<t;a++)n.set(i,a,o.get(i,a));for(a=t-1;a>=0;a--)for(i=0;i<=S;i++){for(T=0,s=0;s<=Math.min(a,S);s++)T+=n.get(i,s)*o.get(s,a);n.set(i,a,T)}}}(s,c,l,u,h)}this.n=s,this.e=c,this.d=l,this.V=u},(e=[{key:"realEigenvalues",get:function(){return Array.from(this.d)}},{key:"imaginaryEigenvalues",get:function(){return Array.from(this.e)}},{key:"eigenvectorMatrix",get:function(){return this.V}},{key:"diagonalMatrix",get:function(){var t,e,r=this.n,n=this.e,o=this.d,i=new j(r,r);for(t=0;t<r;t++){for(e=0;e<r;e++)i.set(t,e,0);i.set(t,t,o[t]),n[t]>0?i.set(t,t+1,n[t]):n[t]<0&&i.set(t,t-1,n[t])}return i}}])&&Le(t.prototype,e),r&&Le(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function Be(t,e,r,n){var o,i;return Math.abs(r)>Math.abs(n)?[(t+(o=n/r)*e)/(i=r+o*n),(e-o*t)/i]:[((o=r/n)*t+e)/(i=n+o*r),(o*e-t)/i]}function Fe(t){"@babel/helpers - typeof";return(Fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ge(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ue(n.key),n)}}function Ue(t){var e=function(t,e){if("object"!=Fe(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Fe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Fe(e)?e:e+""}var ze=function(){return t=function t(e){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),!(e=ue.checkMatrix(e)).isSymmetric())throw new Error("Matrix is not symmetric");var r,n,o,i=e,a=i.rows,s=new j(a,a),u=!0;for(n=0;n<a;n++){var l=0;for(o=0;o<n;o++){var c=0;for(r=0;r<o;r++)c+=s.get(o,r)*s.get(n,r);c=(i.get(n,o)-c)/s.get(o,o),s.set(n,o,c),l+=c*c}for(u&=(l=i.get(n,n)-l)>0,s.set(n,n,Math.sqrt(Math.max(l,0))),o=n+1;o<a;o++)s.set(n,o,0)}this.L=s,this.positiveDefinite=Boolean(u)},(e=[{key:"isPositiveDefinite",value:function(){return this.positiveDefinite}},{key:"solve",value:function(t){t=ue.checkMatrix(t);var e=this.L,r=e.rows;if(t.rows!==r)throw new Error("Matrix dimensions do not match");if(!1===this.isPositiveDefinite())throw new Error("Matrix is not positive definite");var n,o,i,a=t.columns,s=t.clone();for(i=0;i<r;i++)for(o=0;o<a;o++){for(n=0;n<i;n++)s.set(i,o,s.get(i,o)-s.get(n,o)*e.get(i,n));s.set(i,o,s.get(i,o)/e.get(i,i))}for(i=r-1;i>=0;i--)for(o=0;o<a;o++){for(n=i+1;n<r;n++)s.set(i,o,s.get(i,o)-s.get(n,o)*e.get(n,i));s.set(i,o,s.get(i,o)/e.get(i,i))}return s}},{key:"lowerTriangularMatrix",get:function(){return this.L}}])&&Ge(t.prototype,e),r&&Ge(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function Ve(t){"@babel/helpers - typeof";return(Ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function He(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,We(n.key),n)}}function We(t){var e=function(t,e){if("object"!=Ve(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Ve(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Ve(e)?e:e+""}var qe=function(t,e,r){return e&&He(t.prototype,e),r&&He(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=ue.checkMatrix(e);var n,o=r.Y,i=r.scaleScores,a=void 0!==i&&i,s=r.maxIterations,u=void 0===s?1e3:s,l=r.terminationCriteria,c=void 0===l?1e-10:l;if(o){if(!(o=Array.isArray(o)&&"number"==typeof o[0]?j.columnVector(o):ue.checkMatrix(o)).isColumnVector()||o.rows!==e.rows)throw new Error("Y must be a column vector of length X.rows");n=o}else n=e.getColumnVector(0);for(var f,h,p,d,y=1,v=0;v<u&&y>c;v++)p=(p=e.transpose().mmul(n).div(n.transpose().mmul(n).get(0,0))).div(p.norm()),f=e.mmul(p).div(p.transpose().mmul(p).get(0,0)),v>0&&(y=f.clone().sub(d).pow(2).sum()),d=f.clone(),o?(h=(h=o.transpose().mmul(f).div(f.transpose().mmul(f).get(0,0))).div(h.norm()),n=o.mmul(h).div(h.transpose().mmul(h).get(0,0))):n=f;if(o){var g=e.transpose().mmul(f).div(f.transpose().mmul(f).get(0,0));g=g.div(g.norm());var m=e.clone().sub(f.clone().mmul(g.transpose())),b=n.transpose().mmul(f).div(f.transpose().mmul(f).get(0,0)),w=o.clone().sub(f.clone().mulS(b.get(0,0)).mmul(h.transpose()));this.t=f,this.p=g.transpose(),this.w=p.transpose(),this.q=h,this.u=n,this.s=f.transpose().mmul(f),this.xResidual=m,this.yResidual=w,this.betas=b}else this.w=p.transpose(),this.s=f.transpose().mmul(f).sqrt(),this.t=a?f.clone().div(this.s.get(0,0)):f,this.xResidual=e.sub(f.mmul(p.transpose()))})},7592:function(t,e,r){"use strict";var n=r(2917);function o(t,e,r){var o=[0,0,0,0,0,0,0,0,0];return n.mat3.fromTranslation(o,r),n.mat3.multiply(t,o,e)}function i(t,e,r){var o=[0,0,0,0,0,0,0,0,0];return n.mat3.fromRotation(o,r),n.mat3.multiply(t,o,e)}function a(t,e,r){var o=[0,0,0,0,0,0,0,0,0];return n.mat3.fromScaling(o,r),n.mat3.multiply(t,o,e)}function s(t,e){return t[0]*e[1]-e[0]*t[1]}e.vs=function(t,e){for(var r,s,u,l=t?[].concat(t):[1,0,0,0,1,0,0,0,1],c=0,f=e.length;c<f;c++){var h=e[c];switch(h[0]){case"t":o(l,l,[h[1],h[2]]);break;case"s":a(l,l,[h[1],h[2]]);break;case"r":i(l,l,h[1]);break;case"m":r=l,s=l,u=h[1],n.mat3.multiply(r,u,s)}}return l}},7061:function(t,e,r){"use strict";r.r(e),r.d(e,{Cache:function(){return Ce},assign:function(){return Xt},augment:function(){return Jt},clamp:function(){return rt},clearAnimationFrame:function(){return qt},clone:function(){return Qt},contains:function(){return o},debounce:function(){return Zt},deepMix:function(){return re},difference:function(){return a},each:function(){return d},endsWith:function(){return H},every:function(){return W},extend:function(){return ne},filter:function(){return i},find:function(){return w},findIndex:function(){return S},firstValue:function(){return x},fixedBase:function(){return nt},flatten:function(){return _},flattenDeep:function(){return E},forIn:function(){return St},get:function(){return he},getEllipsisText:function(){return ke},getRange:function(){return k},getType:function(){return It},getWrapBehavior:function(){return Q},group:function(){return K},groupBy:function(){return X},groupToMap:function(){return J},has:function(){return xt},hasKey:function(){return _t},hasValue:function(){return Ot},head:function(){return U},identity:function(){return xe},includes:function(){return o},indexOf:function(){return oe},isArguments:function(){return Nt},isArray:function(){return f},isArrayLike:function(){return n},isBoolean:function(){return Lt},isDate:function(){return Rt},isDecimal:function(){return it},isElement:function(){return Ht},isEmpty:function(){return ae},isEqual:function(){return se},isEqualWith:function(){return ue},isError:function(){return Dt},isEven:function(){return at},isFinite:function(){return Bt},isFunction:function(){return l},isInteger:function(){return st},isMatch:function(){return v},isNegative:function(){return ut},isNil:function(){return c},isNull:function(){return Ft},isNumber:function(){return ot},isNumberEqual:function(){return ct},isObject:function(){return p},isObjectLike:function(){return m},isOdd:function(){return ft},isPlainObject:function(){return b},isPositive:function(){return ht},isPrototype:function(){return Ut},isRegExp:function(){return zt},isString:function(){return R},isType:function(){return u},isUndefined:function(){return Vt},keys:function(){return y},last:function(){return z},lowerCase:function(){return kt},lowerFirst:function(){return Ct},map:function(){return le},mapValues:function(){return fe},max:function(){return O},maxBy:function(){return pt},measureTextWidth:function(){return Pe},memoize:function(){return $t},min:function(){return P},minBy:function(){return dt},mix:function(){return Xt},mod:function(){return yt},noop:function(){return Se},number2color:function(){return tt},omit:function(){return ve},parseRadius:function(){return et},pick:function(){return ye},pull:function(){return M},pullAt:function(){return I},reduce:function(){return N},remove:function(){return L},requestAnimationFrame:function(){return Wt},set:function(){return pe},size:function(){return _e},some:function(){return q},sortBy:function(){return D},startsWith:function(){return V},substitute:function(){return Tt},throttle:function(){return ge},toArray:function(){return me},toDegree:function(){return gt},toInteger:function(){return mt},toRadian:function(){return wt},toString:function(){return Pt},union:function(){return F},uniq:function(){return B},uniqueId:function(){return we},upperCase:function(){return At},upperFirst:function(){return Mt},values:function(){return Et},valuesOfKey:function(){return G},wrapBehavior:function(){return Z}});var n=function(t){return null!==t&&"function"!=typeof t&&isFinite(t.length)},o=function(t,e){return!!n(t)&&t.indexOf(e)>-1},i=function(t,e){if(!n(t))return t;for(var r=[],o=0;o<t.length;o++){var i=t[o];e(i,o)&&r.push(i)}return r},a=function(t,e){return void 0===e&&(e=[]),i(t,function(t){return!o(e,t)})},s={}.toString,u=function(t,e){return s.call(t)==="[object "+e+"]"},l=function(t){return u(t,"Function")},c=function(t){return null===t||void 0===t},f=function(t){return Array.isArray?Array.isArray(t):u(t,"Array")};function h(t){"@babel/helpers - typeof";return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var p=function(t){var e=h(t);return null!==t&&"object"===e||"function"===e};var d=function(t,e){if(t)if(f(t))for(var r=0,n=t.length;r<n&&!1!==e(t[r],r);r++);else if(p(t))for(var o in t)if(t.hasOwnProperty(o)&&!1===e(t[o],o))break},y=Object.keys?function(t){return Object.keys(t)}:function(t){var e=[];return d(t,function(r,n){l(t)&&"prototype"===n||e.push(n)}),e};var v=function(t,e){var r=y(e),n=r.length;if(c(t))return!n;for(var o=0;o<n;o+=1){var i=r[o];if(e[i]!==t[i]||!(i in t))return!1}return!0};function g(t){"@babel/helpers - typeof";return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var m=function(t){return"object"===g(t)&&null!==t},b=function(t){if(!m(t)||!u(t,"Object"))return!1;if(null===Object.getPrototypeOf(t))return!0;for(var e=t;null!==Object.getPrototypeOf(e);)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e};var w=function(t,e){if(!f(t))return null;var r;if(l(e)&&(r=e),b(e)&&(r=function(t){return v(t,e)}),r)for(var n=0;n<t.length;n+=1)if(r(t[n]))return t[n];return null};var S=function(t,e,r){void 0===r&&(r=0);for(var n=r;n<t.length;n++)if(e(t[n],n))return n;return-1},x=function(t,e){for(var r=null,n=0;n<t.length;n++){var o=t[n][e];if(!c(o)){r=f(o)?o[0]:o;break}}return r},_=function(t){if(!f(t))return[];for(var e=[],r=0;r<t.length;r++)e=e.concat(t[r]);return e},E=function t(e,r){if(void 0===r&&(r=[]),f(e))for(var n=0;n<e.length;n+=1)t(e[n],r);else r.push(e);return r},O=function(t){if(f(t))return t.reduce(function(t,e){return Math.max(t,e)},t[0])},P=function(t){if(f(t))return t.reduce(function(t,e){return Math.min(t,e)},t[0])},k=function(t){var e=t.filter(function(t){return!isNaN(t)});if(!e.length)return{min:0,max:0};if(f(t[0])){for(var r=[],n=0;n<t.length;n++)r=r.concat(t[n]);e=r}var o=O(e);return{min:P(e),max:o}},C=Array.prototype,T=C.splice,A=C.indexOf,M=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];for(var n=0;n<e.length;n++)for(var o=e[n],i=-1;(i=A.call(t,o))>-1;)T.call(t,i,1);return t},j=Array.prototype.splice,I=function(t,e){if(!n(t))return[];for(var r=t?e.length:0,o=r-1;r--;){var i=void 0,a=e[r];r!==o&&a===i||(i=a,j.call(t,a,1))}return t},N=function(t,e,r){if(!f(t)&&!b(t))return t;var n=r;return d(t,function(t,r){n=e(n,t,r)}),n},L=function(t,e){var r=[];if(!n(t))return r;for(var o=-1,i=[],a=t.length;++o<a;){var s=t[o];e(s,o,t)&&(r.push(s),i.push(o))}return I(t,i),r},R=function(t){return u(t,"String")};var D=function(t,e){var r;if(l(e))r=function(t,r){return e(t)-e(r)};else{var n=[];R(e)?n.push(e):f(e)&&(n=e),r=function(t,e){for(var r=0;r<n.length;r+=1){var o=n[r];if(t[o]>e[o])return 1;if(t[o]<e[o])return-1}return 0}}return t.sort(r),t};function B(t,e){void 0===e&&(e=new Map);var r=[];if(Array.isArray(t))for(var n=0,o=t.length;n<o;n++){var i=t[n];e.has(i)||(r.push(i),e.set(i,!0))}return r}var F=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return B([].concat.apply([],t))},G=function(t,e){for(var r=[],n={},o=0;o<t.length;o++){var i=t[o][e];if(!c(i)){f(i)||(i=[i]);for(var a=0;a<i.length;a++){var s=i[a];n[s]||(r.push(s),n[s]=!0)}}}return r};function U(t){if(n(t))return t[0]}function z(t){if(n(t)){return t[t.length-1]}}var V=function(t,e){return!(!f(t)&&!R(t))&&t[0]===e};var H=function(t,e){return!(!f(t)&&!R(t))&&t[t.length-1]===e},W=function(t,e){for(var r=0;r<t.length;r++)if(!e(t[r],r))return!1;return!0},q=function(t,e){for(var r=0;r<t.length;r++)if(e(t[r],r))return!0;return!1},Y=Object.prototype.hasOwnProperty;var X=function(t,e){if(!e||!f(t))return{};for(var r,n={},o=l(e)?e:function(t){return t[e]},i=0;i<t.length;i++){var a=t[i];r=o(a),Y.call(n,r)?n[r].push(a):n[r]=[a]}return n};function J(t,e){if(!e)return{0:t};if(!l(e)){var r=f(e)?e:e.replace(/\s+/g,"").split("*");e=function(t){for(var e="_",n=0,o=r.length;n<o;n++)e+=t[r[n]]&&t[r[n]].toString();return e}}return X(t,e)}var K=function(t,e){if(!e)return[t];var r=J(t,e),n=[];for(var o in r)n.push(r[o]);return n};var Q=function(t,e){return t["_wrap_"+e]};var Z=function(t,e){if(t["_wrap_"+e])return t["_wrap_"+e];var r=function(r){t[e](r)};return t["_wrap_"+e]=r,r},$={};var tt=function(t){var e=$[t];if(!e){for(var r=t.toString(16),n=r.length;n<6;n++)r="0"+r;e="#"+r,$[t]=e}return e};var et=function(t){var e=0,r=0,n=0,o=0;return f(t)?1===t.length?e=r=n=o=t[0]:2===t.length?(e=n=t[0],r=o=t[1]):3===t.length?(e=t[0],r=o=t[1],n=t[2]):(e=t[0],r=t[1],n=t[2],o=t[3]):e=r=n=o=t,{r1:e,r2:r,r3:n,r4:o}},rt=function(t,e,r){return t<e?e:t>r?r:t},nt=function(t,e){var r=e.toString(),n=r.indexOf(".");if(-1===n)return Math.round(t);var o=r.substr(n+1).length;return o>20&&(o=20),parseFloat(t.toFixed(o))},ot=function(t){return u(t,"Number")},it=function(t){return ot(t)&&t%1!=0},at=function(t){return ot(t)&&t%2==0},st=Number.isInteger?Number.isInteger:function(t){return ot(t)&&t%1==0},ut=function(t){return ot(t)&&t<0},lt=1e-5;function ct(t,e,r){return void 0===r&&(r=lt),Math.abs(t-e)<r}var ft=function(t){return ot(t)&&t%2!=0},ht=function(t){return ot(t)&&t>0},pt=function(t,e){if(f(t)){for(var r,n=-1/0,o=0;o<t.length;o++){var i=t[o],a=l(e)?e(i):i[e];a>n&&(r=i,n=a)}return r}},dt=function(t,e){if(f(t)){for(var r,n=1/0,o=0;o<t.length;o++){var i=t[o],a=l(e)?e(i):i[e];a<n&&(r=i,n=a)}return r}},yt=function(t,e){return(t%e+e)%e},vt=180/Math.PI,gt=function(t){return vt*t},mt=parseInt,bt=Math.PI/180,wt=function(t){return bt*t},St=d,xt=function(t,e){return t.hasOwnProperty(e)},_t=xt,Et=Object.values?function(t){return Object.values(t)}:function(t){var e=[];return d(t,function(r,n){l(t)&&"prototype"===n||e.push(r)}),e},Ot=function(t,e){return o(Et(t),e)},Pt=function(t){return c(t)?"":t.toString()},kt=function(t){return Pt(t).toLowerCase()},Ct=function(t){var e=Pt(t);return e.charAt(0).toLowerCase()+e.substring(1)};var Tt=function(t,e){return t&&e?t.replace(/\\?\{([^{}]+)\}/g,function(t,r){return"\\"===t.charAt(0)?t.slice(1):void 0===e[r]?"":e[r]}):t},At=function(t){return Pt(t).toUpperCase()},Mt=function(t){var e=Pt(t);return e.charAt(0).toUpperCase()+e.substring(1)},jt={}.toString,It=function(t){return jt.call(t).replace(/^\[object /,"").replace(/]$/,"")},Nt=function(t){return u(t,"Arguments")},Lt=function(t){return u(t,"Boolean")},Rt=function(t){return u(t,"Date")},Dt=function(t){return u(t,"Error")};function Bt(t){return ot(t)&&isFinite(t)}var Ft=function(t){return null===t},Gt=Object.prototype,Ut=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Gt)},zt=function(t){return u(t,"RegExp")},Vt=function(t){return void 0===t},Ht=function(t){return t instanceof Element||t instanceof HTMLDocument};function Wt(t){return(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return setTimeout(t,16)})(t)}function qt(t){(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout)(t)}function Yt(t,e){for(var r in e)e.hasOwnProperty(r)&&"constructor"!==r&&void 0!==e[r]&&(t[r]=e[r])}function Xt(t,e,r,n){return e&&Yt(t,e),r&&Yt(t,r),n&&Yt(t,n),t}var Jt=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var r=t[0],n=1;n<t.length;n++){var o=t[n];l(o)&&(o=o.prototype),Xt(r.prototype,o)}};function Kt(t){"@babel/helpers - typeof";return(Kt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var Qt=function t(e){if("object"!==Kt(e)||null===e)return e;var r;if(f(e)){r=[];for(var n=0,o=e.length;n<o;n++)"object"===Kt(e[n])&&null!=e[n]?r[n]=t(e[n]):r[n]=e[n]}else for(var i in r={},e)"object"===Kt(e[i])&&null!=e[i]?r[i]=t(e[i]):r[i]=e[i];return r};var Zt=function(t,e,r){var n;return function(){var o=this,i=arguments,a=r&&!n;clearTimeout(n),n=setTimeout(function(){n=null,r||t.apply(o,i)},e),a&&t.apply(o,i)}},$t=function(t,e){if(!l(t))throw new TypeError("Expected a function");var r=function r(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];var i=e?e.apply(this,n):n[0],a=r.cache;if(a.has(i))return a.get(i);var s=t.apply(this,n);return a.set(i,s),s};return r.cache=new Map,r},te=5;function ee(t,e,r,n){for(var o in r=r||0,n=n||te,e)if(e.hasOwnProperty(o)){var i=e[o];null!==i&&b(i)?(b(t[o])||(t[o]={}),r<n?ee(t[o],i,r+1,n):t[o]=e[o]):f(i)?(t[o]=[],t[o]=t[o].concat(i)):void 0!==i&&(t[o]=i)}}var re=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];for(var n=0;n<e.length;n+=1)ee(t,e[n]);return t},ne=function(t,e,r,n){l(e)||(r=e,e=t,t=function(){});var o=Object.create?function(t,e){return Object.create(t,{constructor:{value:e}})}:function(t,e){function r(){}r.prototype=t;var n=new r;return n.constructor=e,n},i=o(e.prototype,t);return t.prototype=Xt(i,t.prototype),t.superclass=o(e.prototype,e),Xt(i,r),Xt(t,n),t},oe=function(t,e){if(!n(t))return-1;var r=Array.prototype.indexOf;if(r)return r.call(t,e);for(var o=-1,i=0;i<t.length;i++)if(t[i]===e){o=i;break}return o},ie=Object.prototype.hasOwnProperty;var ae=function(t){if(c(t))return!0;if(n(t))return!t.length;var e=It(t);if("Map"===e||"Set"===e)return!t.size;if(Ut(t))return!Object.keys(t).length;for(var r in t)if(ie.call(t,r))return!1;return!0},se=function t(e,r){if(e===r)return!0;if(!e||!r)return!1;if(R(e)||R(r))return!1;if(n(e)||n(r)){if(e.length!==r.length)return!1;for(var o=!0,i=0;i<e.length&&(o=t(e[i],r[i]));i++);return o}if(m(e)||m(r)){var a=Object.keys(e),s=Object.keys(r);if(a.length!==s.length)return!1;for(o=!0,i=0;i<a.length&&(o=t(e[a[i]],r[a[i]]));i++);return o}return!1},ue=function(t,e,r){return l(r)?!!r(t,e):se(t,e)},le=function(t,e){if(!n(t))return t;for(var r=[],o=0;o<t.length;o++){var i=t[o];r.push(e(i,o))}return r},ce=function(t){return t},fe=function(t,e){void 0===e&&(e=ce);var r={};return p(t)&&!c(t)&&Object.keys(t).forEach(function(n){r[n]=e(t[n],n)}),r},he=function(t,e,r){for(var n=0,o=R(e)?e.split("."):e;t&&n<o.length;)t=t[o[n++]];return void 0===t||n<o.length?r:t},pe=function(t,e,r){var n=t,o=R(e)?e.split("."):e;return o.forEach(function(t,e){e<o.length-1?(p(n[t])||(n[t]=ot(o[e+1])?[]:{}),n=n[t]):n[t]=r}),t},de=Object.prototype.hasOwnProperty,ye=function(t,e){if(null===t||!b(t))return{};var r={};return d(e,function(e){de.call(t,e)&&(r[e]=t[e])}),r},ve=function(t,e){return N(t,function(t,r,n){return e.includes(n)||(t[n]=r),t},{})},ge=function(t,e,r){var n,o,i,a,s=0;r||(r={});var u=function(){s=!1===r.leading?0:Date.now(),n=null,a=t.apply(o,i),n||(o=i=null)},l=function(){var l=Date.now();s||!1!==r.leading||(s=l);var c=e-(l-s);return o=this,i=arguments,c<=0||c>e?(n&&(clearTimeout(n),n=null),s=l,a=t.apply(o,i),n||(o=i=null)):n||!1===r.trailing||(n=setTimeout(u,c)),a};return l.cancel=function(){clearTimeout(n),s=0,n=o=i=null},l},me=function(t){return n(t)?Array.prototype.slice.call(t):[]},be={},we=function(t){return be[t=t||"g"]?be[t]+=1:be[t]=1,t+be[t]},Se=function(){},xe=function(t){return t};function _e(t){return c(t)?0:n(t)?t.length:Object.keys(t).length}var Ee,Oe=r(7582),Pe=$t(function(t,e){void 0===e&&(e={});var r=e.fontSize,n=e.fontFamily,o=e.fontWeight,i=e.fontStyle,a=e.fontVariant;return Ee||(Ee=document.createElement("canvas").getContext("2d")),Ee.font=[i,a,o,r+"px",n].join(" "),Ee.measureText(R(t)?t:"").width},function(t,e){return void 0===e&&(e={}),(0,Oe.__spreadArrays)([t],Et(e)).join("")}),ke=function(t,e,r,n){void 0===n&&(n="...");var o,i,a=Pe(n,r),s=R(t)?t:Pt(t),u=e,l=[];if(Pe(t,r)<=e)return t;for(;o=s.substr(0,16),!((i=Pe(o,r))+a>u&&i>u);)if(l.push(o),u-=i,!(s=s.substr(16)))return l.join("");for(;o=s.substr(0,1),!((i=Pe(o,r))+a>u);)if(l.push(o),u-=i,!(s=s.substr(1)))return l.join("");return""+l.join("")+n},Ce=function(){function t(){this.map={}}return t.prototype.has=function(t){return void 0!==this.map[t]},t.prototype.get=function(t,e){var r=this.map[t];return void 0===r?e:r},t.prototype.set=function(t,e){this.map[t]=e},t.prototype.clear=function(){this.map={}},t.prototype.delete=function(t){delete this.map[t]},t.prototype.size=function(){return Object.keys(this.map).length},t}()},7380:function(t){"use strict";t.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},9289:function(t,e,r){var n=r(7380),o=r(344),i=Object.hasOwnProperty,a=Object.create(null);for(var s in n)i.call(n,s)&&(a[n[s]]=s);var u=t.exports={to:{},get:{}};function l(t,e,r){return Math.min(Math.max(e,t),r)}function c(t){var e=Math.round(t).toString(16).toUpperCase();return e.length<2?"0"+e:e}u.get=function(t){var e,r;switch(t.substring(0,3).toLowerCase()){case"hsl":e=u.get.hsl(t),r="hsl";break;case"hwb":e=u.get.hwb(t),r="hwb";break;default:e=u.get.rgb(t),r="rgb"}return e?{model:r,value:e}:null},u.get.rgb=function(t){if(!t)return null;var e,r,o,a=[0,0,0,1];if(e=t.match(/^#([a-f0-9]{6})([a-f0-9]{2})?$/i)){for(o=e[2],e=e[1],r=0;r<3;r++){var s=2*r;a[r]=parseInt(e.slice(s,s+2),16)}o&&(a[3]=parseInt(o,16)/255)}else if(e=t.match(/^#([a-f0-9]{3,4})$/i)){for(o=(e=e[1])[3],r=0;r<3;r++)a[r]=parseInt(e[r]+e[r],16);o&&(a[3]=parseInt(o+o,16)/255)}else if(e=t.match(/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/)){for(r=0;r<3;r++)a[r]=parseInt(e[r+1],0);e[4]&&(e[5]?a[3]=.01*parseFloat(e[4]):a[3]=parseFloat(e[4]))}else{if(!(e=t.match(/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/)))return(e=t.match(/^(\w+)$/))?"transparent"===e[1]?[0,0,0,0]:i.call(n,e[1])?((a=n[e[1]])[3]=1,a):null:null;for(r=0;r<3;r++)a[r]=Math.round(2.55*parseFloat(e[r+1]));e[4]&&(e[5]?a[3]=.01*parseFloat(e[4]):a[3]=parseFloat(e[4]))}for(r=0;r<3;r++)a[r]=l(a[r],0,255);return a[3]=l(a[3],0,1),a},u.get.hsl=function(t){if(!t)return null;var e=t.match(/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/);if(e){var r=parseFloat(e[4]);return[(parseFloat(e[1])%360+360)%360,l(parseFloat(e[2]),0,100),l(parseFloat(e[3]),0,100),l(isNaN(r)?1:r,0,1)]}return null},u.get.hwb=function(t){if(!t)return null;var e=t.match(/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/);if(e){var r=parseFloat(e[4]);return[(parseFloat(e[1])%360+360)%360,l(parseFloat(e[2]),0,100),l(parseFloat(e[3]),0,100),l(isNaN(r)?1:r,0,1)]}return null},u.to.hex=function(){var t=o(arguments);return"#"+c(t[0])+c(t[1])+c(t[2])+(t[3]<1?c(Math.round(255*t[3])):"")},u.to.rgb=function(){var t=o(arguments);return t.length<4||1===t[3]?"rgb("+Math.round(t[0])+", "+Math.round(t[1])+", "+Math.round(t[2])+")":"rgba("+Math.round(t[0])+", "+Math.round(t[1])+", "+Math.round(t[2])+", "+t[3]+")"},u.to.rgb.percent=function(){var t=o(arguments),e=Math.round(t[0]/255*100),r=Math.round(t[1]/255*100),n=Math.round(t[2]/255*100);return t.length<4||1===t[3]?"rgb("+e+"%, "+r+"%, "+n+"%)":"rgba("+e+"%, "+r+"%, "+n+"%, "+t[3]+")"},u.to.hsl=function(){var t=o(arguments);return t.length<4||1===t[3]?"hsl("+t[0]+", "+t[1]+"%, "+t[2]+"%)":"hsla("+t[0]+", "+t[1]+"%, "+t[2]+"%, "+t[3]+")"},u.to.hwb=function(){var t=o(arguments),e="";return t.length>=4&&1!==t[3]&&(e=", "+t[3]),"hwb("+t[0]+", "+t[1]+"%, "+t[2]+"%"+e+")"},u.to.keyword=function(t){return a[t.slice(0,3)]}},9630:function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=r(9289),i=r(738),a=[].slice,s=["keyword","gray","hex"],u={};Object.keys(i).forEach(function(t){u[a.call(i[t].labels).sort().join("")]=t});var l={};function c(t,e){if(!(this instanceof c))return new c(t,e);if(e&&e in s&&(e=null),e&&!(e in i))throw new Error("Unknown model: "+e);var r,n;if(null==t)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(t instanceof c)this.model=t.model,this.color=t.color.slice(),this.valpha=t.valpha;else if("string"==typeof t){var f=o.get(t);if(null===f)throw new Error("Unable to parse color from string: "+t);this.model=f.model,n=i[this.model].channels,this.color=f.value.slice(0,n),this.valpha="number"==typeof f.value[n]?f.value[n]:1}else if(t.length){this.model=e||"rgb",n=i[this.model].channels;var h=a.call(t,0,n);this.color=p(h,n),this.valpha="number"==typeof t[n]?t[n]:1}else if("number"==typeof t)t&=16777215,this.model="rgb",this.color=[t>>16&255,t>>8&255,255&t],this.valpha=1;else{this.valpha=1;var d=Object.keys(t);"alpha"in t&&(d.splice(d.indexOf("alpha"),1),this.valpha="number"==typeof t.alpha?t.alpha:0);var y=d.sort().join("");if(!(y in u))throw new Error("Unable to parse color from object: "+JSON.stringify(t));this.model=u[y];var v=i[this.model].labels,g=[];for(r=0;r<v.length;r++)g.push(t[v[r]]);this.color=p(g)}if(l[this.model])for(n=i[this.model].channels,r=0;r<n;r++){var m=l[this.model][r];m&&(this.color[r]=m(this.color[r]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}function f(t,e,r){return(t=Array.isArray(t)?t:[t]).forEach(function(t){(l[t]||(l[t]=[]))[e]=r}),t=t[0],function(n){var o;return arguments.length?(r&&(n=r(n)),(o=this[t]()).color[e]=n,o):(o=this[t]().color[e],r&&(o=r(o)),o)}}function h(t){return function(e){return Math.max(0,Math.min(t,e))}}function p(t,e){for(var r=0;r<e;r++)"number"!=typeof t[r]&&(t[r]=0);return t}c.prototype={toString:function(){return this.string()},toJSON:function(){return this[this.model]()},string:function(t){var e=this.model in o.to?this:this.rgb(),r=1===(e=e.round("number"==typeof t?t:1)).valpha?e.color:e.color.concat(this.valpha);return o.to[e.model](r)},percentString:function(t){var e=this.rgb().round("number"==typeof t?t:1),r=1===e.valpha?e.color:e.color.concat(this.valpha);return o.to.rgb.percent(r)},array:function(){return 1===this.valpha?this.color.slice():this.color.concat(this.valpha)},object:function(){for(var t={},e=i[this.model].channels,r=i[this.model].labels,n=0;n<e;n++)t[r[n]]=this.color[n];return 1!==this.valpha&&(t.alpha=this.valpha),t},unitArray:function(){var t=this.rgb().color;return t[0]/=255,t[1]/=255,t[2]/=255,1!==this.valpha&&t.push(this.valpha),t},unitObject:function(){var t=this.rgb().object();return t.r/=255,t.g/=255,t.b/=255,1!==this.valpha&&(t.alpha=this.valpha),t},round:function(t){return t=Math.max(t||0,0),new c(this.color.map(function(t){return function(e){return function(t,e){return Number(t.toFixed(e))}(e,t)}}(t)).concat(this.valpha),this.model)},alpha:function(t){return arguments.length?new c(this.color.concat(Math.max(0,Math.min(1,t))),this.model):this.valpha},red:f("rgb",0,h(255)),green:f("rgb",1,h(255)),blue:f("rgb",2,h(255)),hue:f(["hsl","hsv","hsl","hwb","hcg"],0,function(t){return(t%360+360)%360}),saturationl:f("hsl",1,h(100)),lightness:f("hsl",2,h(100)),saturationv:f("hsv",1,h(100)),value:f("hsv",2,h(100)),chroma:f("hcg",1,h(100)),gray:f("hcg",2,h(100)),white:f("hwb",1,h(100)),wblack:f("hwb",2,h(100)),cyan:f("cmyk",0,h(100)),magenta:f("cmyk",1,h(100)),yellow:f("cmyk",2,h(100)),black:f("cmyk",3,h(100)),x:f("xyz",0,h(100)),y:f("xyz",1,h(100)),z:f("xyz",2,h(100)),l:f("lab",0,h(100)),a:f("lab",1),b:f("lab",2),keyword:function(t){return arguments.length?new c(t):i[this.model].keyword(this.color)},hex:function(t){return arguments.length?new c(t):o.to.hex(this.rgb().round().color)},rgbNumber:function(){var t=this.rgb().color;return(255&t[0])<<16|(255&t[1])<<8|255&t[2]},luminosity:function(){for(var t=this.rgb().color,e=[],r=0;r<t.length;r++){var n=t[r]/255;e[r]=n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4)}return.2126*e[0]+.7152*e[1]+.0722*e[2]},contrast:function(t){var e=this.luminosity(),r=t.luminosity();return e>r?(e+.05)/(r+.05):(r+.05)/(e+.05)},level:function(t){var e=this.contrast(t);return e>=7.1?"AAA":e>=4.5?"AA":""},isDark:function(){var t=this.rgb().color;return(299*t[0]+587*t[1]+114*t[2])/1e3<128},isLight:function(){return!this.isDark()},negate:function(){for(var t=this.rgb(),e=0;e<3;e++)t.color[e]=255-t.color[e];return t},lighten:function(t){var e=this.hsl();return e.color[2]+=e.color[2]*t,e},darken:function(t){var e=this.hsl();return e.color[2]-=e.color[2]*t,e},saturate:function(t){var e=this.hsl();return e.color[1]+=e.color[1]*t,e},desaturate:function(t){var e=this.hsl();return e.color[1]-=e.color[1]*t,e},whiten:function(t){var e=this.hwb();return e.color[1]+=e.color[1]*t,e},blacken:function(t){var e=this.hwb();return e.color[2]+=e.color[2]*t,e},grayscale:function(){var t=this.rgb().color,e=.3*t[0]+.59*t[1]+.11*t[2];return c.rgb(e,e,e)},fade:function(t){return this.alpha(this.valpha-this.valpha*t)},opaquer:function(t){return this.alpha(this.valpha+this.valpha*t)},rotate:function(t){var e=this.hsl(),r=e.color[0];return r=(r=(r+t)%360)<0?360+r:r,e.color[0]=r,e},mix:function(t,e){if(!t||!t.rgb)throw new Error('Argument to "mix" was not a Color instance, but rather an instance of '+n(t));var r=t.rgb(),o=this.rgb(),i=void 0===e?.5:e,a=2*i-1,s=r.alpha()-o.alpha(),u=((a*s==-1?a:(a+s)/(1+a*s))+1)/2,l=1-u;return c.rgb(u*r.red()+l*o.red(),u*r.green()+l*o.green(),u*r.blue()+l*o.blue(),r.alpha()*i+o.alpha()*(1-i))}},Object.keys(i).forEach(function(t){if(-1===s.indexOf(t)){var e=i[t].channels;c.prototype[t]=function(){if(this.model===t)return new c(this);if(arguments.length)return new c(arguments,t);var r,n="number"==typeof arguments[e]?e:this.valpha;return new c((r=i[this.model][t].raw(this.color),Array.isArray(r)?r:[r]).concat(n),t)},c[t]=function(r){return"number"==typeof r&&(r=p(a.call(arguments),e)),new c(r,t)}}}),t.exports=c},6786:function(t,e,r){var n=r(1719),o={};for(var i in n)n.hasOwnProperty(i)&&(o[n[i]]=i);var a=t.exports={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};for(var s in a)if(a.hasOwnProperty(s)){if(!("channels"in a[s]))throw new Error("missing channels property: "+s);if(!("labels"in a[s]))throw new Error("missing channel labels property: "+s);if(a[s].labels.length!==a[s].channels)throw new Error("channel and label counts mismatch: "+s);var u=a[s].channels,l=a[s].labels;delete a[s].channels,delete a[s].labels,Object.defineProperty(a[s],"channels",{value:u}),Object.defineProperty(a[s],"labels",{value:l})}a.rgb.hsl=function(t){var e,r,n=t[0]/255,o=t[1]/255,i=t[2]/255,a=Math.min(n,o,i),s=Math.max(n,o,i),u=s-a;return s===a?e=0:n===s?e=(o-i)/u:o===s?e=2+(i-n)/u:i===s&&(e=4+(n-o)/u),(e=Math.min(60*e,360))<0&&(e+=360),r=(a+s)/2,[e,100*(s===a?0:r<=.5?u/(s+a):u/(2-s-a)),100*r]},a.rgb.hsv=function(t){var e,r,n,o,i,a=t[0]/255,s=t[1]/255,u=t[2]/255,l=Math.max(a,s,u),c=l-Math.min(a,s,u),f=function(t){return(l-t)/6/c+.5};return 0===c?o=i=0:(i=c/l,e=f(a),r=f(s),n=f(u),a===l?o=n-r:s===l?o=1/3+e-n:u===l&&(o=2/3+r-e),o<0?o+=1:o>1&&(o-=1)),[360*o,100*i,100*l]},a.rgb.hwb=function(t){var e=t[0],r=t[1],n=t[2];return[a.rgb.hsl(t)[0],100*(1/255*Math.min(e,Math.min(r,n))),100*(n=1-1/255*Math.max(e,Math.max(r,n)))]},a.rgb.cmyk=function(t){var e,r=t[0]/255,n=t[1]/255,o=t[2]/255;return[100*((1-r-(e=Math.min(1-r,1-n,1-o)))/(1-e)||0),100*((1-n-e)/(1-e)||0),100*((1-o-e)/(1-e)||0),100*e]},a.rgb.keyword=function(t){var e=o[t];if(e)return e;var r,i,a,s=1/0;for(var u in n)if(n.hasOwnProperty(u)){var l=n[u],c=(i=t,a=l,Math.pow(i[0]-a[0],2)+Math.pow(i[1]-a[1],2)+Math.pow(i[2]-a[2],2));c<s&&(s=c,r=u)}return r},a.keyword.rgb=function(t){return n[t]},a.rgb.xyz=function(t){var e=t[0]/255,r=t[1]/255,n=t[2]/255;return[100*(.4124*(e=e>.04045?Math.pow((e+.055)/1.055,2.4):e/12.92)+.3576*(r=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92)+.1805*(n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92)),100*(.2126*e+.7152*r+.0722*n),100*(.0193*e+.1192*r+.9505*n)]},a.rgb.lab=function(t){var e=a.rgb.xyz(t),r=e[0],n=e[1],o=e[2];return n/=100,o/=108.883,r=(r/=95.047)>.008856?Math.pow(r,1/3):7.787*r+16/116,[116*(n=n>.008856?Math.pow(n,1/3):7.787*n+16/116)-16,500*(r-n),200*(n-(o=o>.008856?Math.pow(o,1/3):7.787*o+16/116))]},a.hsl.rgb=function(t){var e,r,n,o,i,a=t[0]/360,s=t[1]/100,u=t[2]/100;if(0===s)return[i=255*u,i,i];e=2*u-(r=u<.5?u*(1+s):u+s-u*s),o=[0,0,0];for(var l=0;l<3;l++)(n=a+1/3*-(l-1))<0&&n++,n>1&&n--,i=6*n<1?e+6*(r-e)*n:2*n<1?r:3*n<2?e+(r-e)*(2/3-n)*6:e,o[l]=255*i;return o},a.hsl.hsv=function(t){var e=t[0],r=t[1]/100,n=t[2]/100,o=r,i=Math.max(n,.01);return r*=(n*=2)<=1?n:2-n,o*=i<=1?i:2-i,[e,100*(0===n?2*o/(i+o):2*r/(n+r)),100*((n+r)/2)]},a.hsv.rgb=function(t){var e=t[0]/60,r=t[1]/100,n=t[2]/100,o=Math.floor(e)%6,i=e-Math.floor(e),a=255*n*(1-r),s=255*n*(1-r*i),u=255*n*(1-r*(1-i));switch(n*=255,o){case 0:return[n,u,a];case 1:return[s,n,a];case 2:return[a,n,u];case 3:return[a,s,n];case 4:return[u,a,n];case 5:return[n,a,s]}},a.hsv.hsl=function(t){var e,r,n,o=t[0],i=t[1]/100,a=t[2]/100,s=Math.max(a,.01);return n=(2-i)*a,r=i*s,[o,100*(r=(r/=(e=(2-i)*s)<=1?e:2-e)||0),100*(n/=2)]},a.hwb.rgb=function(t){var e,r,n,o,i,a,s,u=t[0]/360,l=t[1]/100,c=t[2]/100,f=l+c;switch(f>1&&(l/=f,c/=f),r=1-c,n=6*u-(e=Math.floor(6*u)),0!=(1&e)&&(n=1-n),o=l+n*(r-l),e){default:case 6:case 0:i=r,a=o,s=l;break;case 1:i=o,a=r,s=l;break;case 2:i=l,a=r,s=o;break;case 3:i=l,a=o,s=r;break;case 4:i=o,a=l,s=r;break;case 5:i=r,a=l,s=o}return[255*i,255*a,255*s]},a.cmyk.rgb=function(t){var e=t[0]/100,r=t[1]/100,n=t[2]/100,o=t[3]/100;return[255*(1-Math.min(1,e*(1-o)+o)),255*(1-Math.min(1,r*(1-o)+o)),255*(1-Math.min(1,n*(1-o)+o))]},a.xyz.rgb=function(t){var e,r,n,o=t[0]/100,i=t[1]/100,a=t[2]/100;return r=-.9689*o+1.8758*i+.0415*a,n=.0557*o+-.204*i+1.057*a,e=(e=3.2406*o+-1.5372*i+-.4986*a)>.0031308?1.055*Math.pow(e,1/2.4)-.055:12.92*e,r=r>.0031308?1.055*Math.pow(r,1/2.4)-.055:12.92*r,n=n>.0031308?1.055*Math.pow(n,1/2.4)-.055:12.92*n,[255*(e=Math.min(Math.max(0,e),1)),255*(r=Math.min(Math.max(0,r),1)),255*(n=Math.min(Math.max(0,n),1))]},a.xyz.lab=function(t){var e=t[0],r=t[1],n=t[2];return r/=100,n/=108.883,e=(e/=95.047)>.008856?Math.pow(e,1/3):7.787*e+16/116,[116*(r=r>.008856?Math.pow(r,1/3):7.787*r+16/116)-16,500*(e-r),200*(r-(n=n>.008856?Math.pow(n,1/3):7.787*n+16/116))]},a.lab.xyz=function(t){var e,r,n,o=t[0],i=t[1],a=t[2];e=i/500+(r=(o+16)/116),n=r-a/200;var s=Math.pow(r,3),u=Math.pow(e,3),l=Math.pow(n,3);return r=s>.008856?s:(r-16/116)/7.787,e=u>.008856?u:(e-16/116)/7.787,n=l>.008856?l:(n-16/116)/7.787,[e*=95.047,r*=100,n*=108.883]},a.lab.lch=function(t){var e,r=t[0],n=t[1],o=t[2];return(e=360*Math.atan2(o,n)/2/Math.PI)<0&&(e+=360),[r,Math.sqrt(n*n+o*o),e]},a.lch.lab=function(t){var e,r=t[0],n=t[1];return e=t[2]/360*2*Math.PI,[r,n*Math.cos(e),n*Math.sin(e)]},a.rgb.ansi16=function(t){var e=t[0],r=t[1],n=t[2],o=1 in arguments?arguments[1]:a.rgb.hsv(t)[2];if(0===(o=Math.round(o/50)))return 30;var i=30+(Math.round(n/255)<<2|Math.round(r/255)<<1|Math.round(e/255));return 2===o&&(i+=60),i},a.hsv.ansi16=function(t){return a.rgb.ansi16(a.hsv.rgb(t),t[2])},a.rgb.ansi256=function(t){var e=t[0],r=t[1],n=t[2];return e===r&&r===n?e<8?16:e>248?231:Math.round((e-8)/247*24)+232:16+36*Math.round(e/255*5)+6*Math.round(r/255*5)+Math.round(n/255*5)},a.ansi16.rgb=function(t){var e=t%10;if(0===e||7===e)return t>50&&(e+=3.5),[e=e/10.5*255,e,e];var r=.5*(1+~~(t>50));return[(1&e)*r*255,(e>>1&1)*r*255,(e>>2&1)*r*255]},a.ansi256.rgb=function(t){if(t>=232){var e=10*(t-232)+8;return[e,e,e]}var r;return t-=16,[Math.floor(t/36)/5*255,Math.floor((r=t%36)/6)/5*255,r%6/5*255]},a.rgb.hex=function(t){var e=(((255&Math.round(t[0]))<<16)+((255&Math.round(t[1]))<<8)+(255&Math.round(t[2]))).toString(16).toUpperCase();return"000000".substring(e.length)+e},a.hex.rgb=function(t){var e=t.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!e)return[0,0,0];var r=e[0];3===e[0].length&&(r=r.split("").map(function(t){return t+t}).join(""));var n=parseInt(r,16);return[n>>16&255,n>>8&255,255&n]},a.rgb.hcg=function(t){var e,r,n=t[0]/255,o=t[1]/255,i=t[2]/255,a=Math.max(Math.max(n,o),i),s=Math.min(Math.min(n,o),i),u=a-s;return e=u<1?s/(1-u):0,r=u<=0?0:a===n?(o-i)/u%6:a===o?2+(i-n)/u:4+(n-o)/u+4,r/=6,[360*(r%=1),100*u,100*e]},a.hsl.hcg=function(t){var e=t[1]/100,r=t[2]/100,n=1,o=0;return(n=r<.5?2*e*r:2*e*(1-r))<1&&(o=(r-.5*n)/(1-n)),[t[0],100*n,100*o]},a.hsv.hcg=function(t){var e=t[1]/100,r=t[2]/100,n=e*r,o=0;return n<1&&(o=(r-n)/(1-n)),[t[0],100*n,100*o]},a.hcg.rgb=function(t){var e=t[0]/360,r=t[1]/100,n=t[2]/100;if(0===r)return[255*n,255*n,255*n];var o,i=[0,0,0],a=e%1*6,s=a%1,u=1-s;switch(Math.floor(a)){case 0:i[0]=1,i[1]=s,i[2]=0;break;case 1:i[0]=u,i[1]=1,i[2]=0;break;case 2:i[0]=0,i[1]=1,i[2]=s;break;case 3:i[0]=0,i[1]=u,i[2]=1;break;case 4:i[0]=s,i[1]=0,i[2]=1;break;default:i[0]=1,i[1]=0,i[2]=u}return o=(1-r)*n,[255*(r*i[0]+o),255*(r*i[1]+o),255*(r*i[2]+o)]},a.hcg.hsv=function(t){var e=t[1]/100,r=e+t[2]/100*(1-e),n=0;return r>0&&(n=e/r),[t[0],100*n,100*r]},a.hcg.hsl=function(t){var e=t[1]/100,r=t[2]/100*(1-e)+.5*e,n=0;return r>0&&r<.5?n=e/(2*r):r>=.5&&r<1&&(n=e/(2*(1-r))),[t[0],100*n,100*r]},a.hcg.hwb=function(t){var e=t[1]/100,r=e+t[2]/100*(1-e);return[t[0],100*(r-e),100*(1-r)]},a.hwb.hcg=function(t){var e=t[1]/100,r=1-t[2]/100,n=r-e,o=0;return n<1&&(o=(r-n)/(1-n)),[t[0],100*n,100*o]},a.apple.rgb=function(t){return[t[0]/65535*255,t[1]/65535*255,t[2]/65535*255]},a.rgb.apple=function(t){return[t[0]/255*65535,t[1]/255*65535,t[2]/255*65535]},a.gray.rgb=function(t){return[t[0]/100*255,t[0]/100*255,t[0]/100*255]},a.gray.hsl=a.gray.hsv=function(t){return[0,0,t[0]]},a.gray.hwb=function(t){return[0,100,t[0]]},a.gray.cmyk=function(t){return[0,0,0,t[0]]},a.gray.lab=function(t){return[t[0],0,0]},a.gray.hex=function(t){var e=255&Math.round(t[0]/100*255),r=((e<<16)+(e<<8)+e).toString(16).toUpperCase();return"000000".substring(r.length)+r},a.rgb.gray=function(t){return[(t[0]+t[1]+t[2])/3/255*100]}},738:function(t,e,r){function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=r(6786),i=r(2511),a={};Object.keys(o).forEach(function(t){a[t]={},Object.defineProperty(a[t],"channels",{value:o[t].channels}),Object.defineProperty(a[t],"labels",{value:o[t].labels});var e=i(t);Object.keys(e).forEach(function(r){var o=e[r];a[t][r]=function(t){var e=function(e){if(void 0===e||null===e)return e;arguments.length>1&&(e=Array.prototype.slice.call(arguments));var r=t(e);if("object"===n(r))for(var o=r.length,i=0;i<o;i++)r[i]=Math.round(r[i]);return r};return"conversion"in t&&(e.conversion=t.conversion),e}(o),a[t][r].raw=function(t){var e=function(e){return void 0===e||null===e?e:(arguments.length>1&&(e=Array.prototype.slice.call(arguments)),t(e))};return"conversion"in t&&(e.conversion=t.conversion),e}(o)})}),t.exports=a},2511:function(t,e,r){var n=r(6786);function o(t){var e=function(){for(var t={},e=Object.keys(n),r=e.length,o=0;o<r;o++)t[e[o]]={distance:-1,parent:null};return t}(),r=[t];for(e[t].distance=0;r.length;)for(var o=r.pop(),i=Object.keys(n[o]),a=i.length,s=0;s<a;s++){var u=i[s],l=e[u];-1===l.distance&&(l.distance=e[o].distance+1,l.parent=o,r.unshift(u))}return e}function i(t,e){return function(r){return e(t(r))}}function a(t,e){for(var r=[e[t].parent,t],o=n[e[t].parent][t],a=e[t].parent;e[a].parent;)r.unshift(e[a].parent),o=i(n[e[a].parent][a],o),a=e[a].parent;return o.conversion=r,o}t.exports=function(t){for(var e=o(t),r={},n=Object.keys(e),i=n.length,s=0;s<i;s++){var u=n[s];null!==e[u].parent&&(r[u]=a(u,e))}return r}},1719:function(t){"use strict";t.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},918:function(t,e,r){"use strict";function n(t,e){var r,n=1;function o(){var o,i,a=r.length,s=0,u=0;for(o=0;o<a;++o)s+=(i=r[o]).x,u+=i.y;for(s=(s/a-t)*n,u=(u/a-e)*n,o=0;o<a;++o)(i=r[o]).x-=s,i.y-=u}return null==t&&(t=0),null==e&&(e=0),o.initialize=function(t){r=t},o.x=function(e){return arguments.length?(t=+e,o):t},o.y=function(t){return arguments.length?(e=+t,o):e},o.strength=function(t){return arguments.length?(n=+t,o):n},o}r.r(e),r.d(e,{forceCenter:function(){return n},forceCollide:function(){return l},forceLink:function(){return p},forceManyBody:function(){return T},forceRadial:function(){return A},forceSimulation:function(){return C},forceX:function(){return M},forceY:function(){return j}});var o=r(2547);function i(t){return function(){return t}}function a(t){return 1e-6*(t()-.5)}function s(t){return t.x+t.vx}function u(t){return t.y+t.vy}function l(t){var e,r,n,l=1,c=1;function f(){for(var t,i,f,p,d,y,v,g=e.length,m=0;m<c;++m)for(i=(0,o.Z)(e,s,u).visitAfter(h),t=0;t<g;++t)f=e[t],y=r[f.index],v=y*y,p=f.x+f.vx,d=f.y+f.vy,i.visit(b);function b(t,e,r,o,i){var s=t.data,u=t.r,c=y+u;if(!s)return e>p+c||o<p-c||r>d+c||i<d-c;if(s.index>f.index){var h=p-s.x-s.vx,g=d-s.y-s.vy,m=h*h+g*g;m<c*c&&(0===h&&(m+=(h=a(n))*h),0===g&&(m+=(g=a(n))*g),m=(c-(m=Math.sqrt(m)))/m*l,f.vx+=(h*=m)*(c=(u*=u)/(v+u)),f.vy+=(g*=m)*c,s.vx-=h*(c=1-c),s.vy-=g*c)}}}function h(t){if(t.data)return t.r=r[t.data.index];for(var e=t.r=0;e<4;++e)t[e]&&t[e].r>t.r&&(t.r=t[e].r)}function p(){if(e){var n,o,i=e.length;for(r=new Array(i),n=0;n<i;++n)o=e[n],r[o.index]=+t(o,n,e)}}return"function"!=typeof t&&(t=i(null==t?1:+t)),f.initialize=function(t,r){e=t,n=r,p()},f.iterations=function(t){return arguments.length?(c=+t,f):c},f.strength=function(t){return arguments.length?(l=+t,f):l},f.radius=function(e){return arguments.length?(t="function"==typeof e?e:i(+e),p(),f):t},f}function c(t){"@babel/helpers - typeof";return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function f(t){return t.index}function h(t,e){var r=t.get(e);if(!r)throw new Error("node not found: "+e);return r}function p(t){var e,r,n,o,s,u,l=f,p=function(t){return 1/Math.min(o[t.source.index],o[t.target.index])},d=i(30),y=1;function v(n){for(var o=0,i=t.length;o<y;++o)for(var l,c,f,h,p,d,v,g=0;g<i;++g)c=(l=t[g]).source,h=(f=l.target).x+f.vx-c.x-c.vx||a(u),p=f.y+f.vy-c.y-c.vy||a(u),h*=d=((d=Math.sqrt(h*h+p*p))-r[g])/d*n*e[g],p*=d,f.vx-=h*(v=s[g]),f.vy-=p*v,c.vx+=h*(v=1-v),c.vy+=p*v}function g(){if(n){var i,a,u=n.length,f=t.length,p=new Map(n.map(function(t,e){return[l(t,e,n),t]}));for(i=0,o=new Array(u);i<f;++i)(a=t[i]).index=i,"object"!==c(a.source)&&(a.source=h(p,a.source)),"object"!==c(a.target)&&(a.target=h(p,a.target)),o[a.source.index]=(o[a.source.index]||0)+1,o[a.target.index]=(o[a.target.index]||0)+1;for(i=0,s=new Array(f);i<f;++i)a=t[i],s[i]=o[a.source.index]/(o[a.source.index]+o[a.target.index]);e=new Array(f),m(),r=new Array(f),b()}}function m(){if(n)for(var r=0,o=t.length;r<o;++r)e[r]=+p(t[r],r,t)}function b(){if(n)for(var e=0,o=t.length;e<o;++e)r[e]=+d(t[e],e,t)}return null==t&&(t=[]),v.initialize=function(t,e){n=t,u=e,g()},v.links=function(e){return arguments.length?(t=e,g(),v):t},v.id=function(t){return arguments.length?(l=t,v):l},v.iterations=function(t){return arguments.length?(y=+t,v):y},v.strength=function(t){return arguments.length?(p="function"==typeof t?t:i(+t),m(),v):p},v.distance=function(t){return arguments.length?(d="function"==typeof t?t:i(+t),b(),v):d},v}var d={value:function(){}};function y(){for(var t,e=0,r=arguments.length,n={};e<r;++e){if(!(t=arguments[e]+"")||t in n||/[\s.]/.test(t))throw new Error("illegal type: "+t);n[t]=[]}return new v(n)}function v(t){this._=t}function g(t,e){for(var r,n=0,o=t.length;n<o;++n)if((r=t[n]).name===e)return r.value}function m(t,e,r){for(var n=0,o=t.length;n<o;++n)if(t[n].name===e){t[n]=d,t=t.slice(0,n).concat(t.slice(n+1));break}return null!=r&&t.push({name:e,value:r}),t}v.prototype=y.prototype={constructor:v,on:function(t,e){var r,n,o=this._,i=(n=o,(t+"").trim().split(/^|\s+/).map(function(t){var e="",r=t.indexOf(".");if(r>=0&&(e=t.slice(r+1),t=t.slice(0,r)),t&&!n.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:e}})),a=-1,s=i.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++a<s;)if(r=(t=i[a]).type)o[r]=m(o[r],t.name,e);else if(null==e)for(r in o)o[r]=m(o[r],t.name,null);return this}for(;++a<s;)if((r=(t=i[a]).type)&&(r=g(o[r],t.name)))return r},copy:function(){var t={},e=this._;for(var r in e)t[r]=e[r].slice();return new v(t)},call:function(t,e){if((r=arguments.length-2)>0)for(var r,n,o=new Array(r),i=0;i<r;++i)o[i]=arguments[i+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(i=0,r=(n=this._[t]).length;i<r;++i)n[i].value.apply(e,o)},apply:function(t,e,r){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var n=this._[t],o=0,i=n.length;o<i;++o)n[o].value.apply(e,r)}};var b=y,w=r(4751),S=1664525,x=1013904223,_=4294967296;function E(t){return t.x}function O(t){return t.y}var P=10,k=Math.PI*(3-Math.sqrt(5));function C(t){var e,r,n=1,o=.001,i=1-Math.pow(o,1/300),a=0,s=.6,u=new Map,l=(0,w.HT)(h),c=b("tick","end"),f=(r=1,function(){return(r=(S*r+x)%_)/_});function h(){p(),c.call("tick",e),n<o&&(l.stop(),c.call("end",e))}function p(r){var o,l,c=t.length;void 0===r&&(r=1);for(var f=0;f<r;++f)for(n+=(a-n)*i,u.forEach(function(t){t(n)}),o=0;o<c;++o)null==(l=t[o]).fx?l.x+=l.vx*=s:(l.x=l.fx,l.vx=0),null==l.fy?l.y+=l.vy*=s:(l.y=l.fy,l.vy=0);return e}function d(){for(var e,r=0,n=t.length;r<n;++r){if((e=t[r]).index=r,null!=e.fx&&(e.x=e.fx),null!=e.fy&&(e.y=e.fy),isNaN(e.x)||isNaN(e.y)){var o=P*Math.sqrt(.5+r),i=r*k;e.x=o*Math.cos(i),e.y=o*Math.sin(i)}(isNaN(e.vx)||isNaN(e.vy))&&(e.vx=e.vy=0)}}function y(e){return e.initialize&&e.initialize(t,f),e}return null==t&&(t=[]),d(),e={tick:p,restart:function(){return l.restart(h),e},stop:function(){return l.stop(),e},nodes:function(r){return arguments.length?(t=r,d(),u.forEach(y),e):t},alpha:function(t){return arguments.length?(n=+t,e):n},alphaMin:function(t){return arguments.length?(o=+t,e):o},alphaDecay:function(t){return arguments.length?(i=+t,e):+i},alphaTarget:function(t){return arguments.length?(a=+t,e):a},velocityDecay:function(t){return arguments.length?(s=1-t,e):1-s},randomSource:function(t){return arguments.length?(f=t,u.forEach(y),e):f},force:function(t,r){return arguments.length>1?(null==r?u.delete(t):u.set(t,y(r)),e):u.get(t)},find:function(e,r,n){var o,i,a,s,u,l=0,c=t.length;for(null==n?n=1/0:n*=n,l=0;l<c;++l)(a=(o=e-(s=t[l]).x)*o+(i=r-s.y)*i)<n&&(u=s,n=a);return u},on:function(t,r){return arguments.length>1?(c.on(t,r),e):c.on(t)}}}function T(){var t,e,r,n,s,u=i(-30),l=1,c=1/0,f=.81;function h(r){var i,a=t.length,s=(0,o.Z)(t,E,O).visitAfter(d);for(n=r,i=0;i<a;++i)e=t[i],s.visit(y)}function p(){if(t){var e,r,n=t.length;for(s=new Array(n),e=0;e<n;++e)r=t[e],s[r.index]=+u(r,e,t)}}function d(t){var e,r,n,o,i,a=0,u=0;if(t.length){for(n=o=i=0;i<4;++i)(e=t[i])&&(r=Math.abs(e.value))&&(a+=e.value,u+=r,n+=r*e.x,o+=r*e.y);t.x=n/u,t.y=o/u}else{(e=t).x=e.data.x,e.y=e.data.y;do{a+=s[e.data.index]}while(e=e.next)}t.value=a}function y(t,o,i,u){if(!t.value)return!0;var h=t.x-e.x,p=t.y-e.y,d=u-o,y=h*h+p*p;if(d*d/f<y)return y<c&&(0===h&&(y+=(h=a(r))*h),0===p&&(y+=(p=a(r))*p),y<l&&(y=Math.sqrt(l*y)),e.vx+=h*t.value*n/y,e.vy+=p*t.value*n/y),!0;if(!(t.length||y>=c)){(t.data!==e||t.next)&&(0===h&&(y+=(h=a(r))*h),0===p&&(y+=(p=a(r))*p),y<l&&(y=Math.sqrt(l*y)));do{t.data!==e&&(d=s[t.data.index]*n/y,e.vx+=h*d,e.vy+=p*d)}while(t=t.next)}}return h.initialize=function(e,n){t=e,r=n,p()},h.strength=function(t){return arguments.length?(u="function"==typeof t?t:i(+t),p(),h):u},h.distanceMin=function(t){return arguments.length?(l=t*t,h):Math.sqrt(l)},h.distanceMax=function(t){return arguments.length?(c=t*t,h):Math.sqrt(c)},h.theta=function(t){return arguments.length?(f=t*t,h):Math.sqrt(f)},h}function A(t,e,r){var n,o,a,s=i(.1);function u(t){for(var i=0,s=n.length;i<s;++i){var u=n[i],l=u.x-e||1e-6,c=u.y-r||1e-6,f=Math.sqrt(l*l+c*c),h=(a[i]-f)*o[i]*t/f;u.vx+=l*h,u.vy+=c*h}}function l(){if(n){var e,r=n.length;for(o=new Array(r),a=new Array(r),e=0;e<r;++e)a[e]=+t(n[e],e,n),o[e]=isNaN(a[e])?0:+s(n[e],e,n)}}return"function"!=typeof t&&(t=i(+t)),null==e&&(e=0),null==r&&(r=0),u.initialize=function(t){n=t,l()},u.strength=function(t){return arguments.length?(s="function"==typeof t?t:i(+t),l(),u):s},u.radius=function(e){return arguments.length?(t="function"==typeof e?e:i(+e),l(),u):t},u.x=function(t){return arguments.length?(e=+t,u):e},u.y=function(t){return arguments.length?(r=+t,u):r},u}function M(t){var e,r,n,o=i(.1);function a(t){for(var o,i=0,a=e.length;i<a;++i)(o=e[i]).vx+=(n[i]-o.x)*r[i]*t}function s(){if(e){var i,a=e.length;for(r=new Array(a),n=new Array(a),i=0;i<a;++i)r[i]=isNaN(n[i]=+t(e[i],i,e))?0:+o(e[i],i,e)}}return"function"!=typeof t&&(t=i(null==t?0:+t)),a.initialize=function(t){e=t,s()},a.strength=function(t){return arguments.length?(o="function"==typeof t?t:i(+t),s(),a):o},a.x=function(e){return arguments.length?(t="function"==typeof e?e:i(+e),s(),a):t},a}function j(t){var e,r,n,o=i(.1);function a(t){for(var o,i=0,a=e.length;i<a;++i)(o=e[i]).vy+=(n[i]-o.y)*r[i]*t}function s(){if(e){var i,a=e.length;for(r=new Array(a),n=new Array(a),i=0;i<a;++i)r[i]=isNaN(n[i]=+t(e[i],i,e))?0:+o(e[i],i,e)}}return"function"!=typeof t&&(t=i(null==t?0:+t)),a.initialize=function(t){e=t,s()},a.strength=function(t){return arguments.length?(o="function"==typeof t?t:i(+t),s(),a):o},a.y=function(e){return arguments.length?(t="function"==typeof e?e:i(+e),s(),a):t},a}},6835:function(t,e,r){"use strict";r.r(e),r.d(e,{quadtree:function(){return n.Z}});var n=r(2547)},2547:function(t,e,r){"use strict";function n(t,e,r,n){if(isNaN(e)||isNaN(r))return t;var o,i,a,s,u,l,c,f,h,p=t._root,d={data:n},y=t._x0,v=t._y0,g=t._x1,m=t._y1;if(!p)return t._root=d,t;for(;p.length;)if((l=e>=(i=(y+g)/2))?y=i:g=i,(c=r>=(a=(v+m)/2))?v=a:m=a,o=p,!(p=p[f=c<<1|l]))return o[f]=d,t;if(s=+t._x.call(null,p.data),u=+t._y.call(null,p.data),e===s&&r===u)return d.next=p,o?o[f]=d:t._root=d,t;do{o=o?o[f]=new Array(4):t._root=new Array(4),(l=e>=(i=(y+g)/2))?y=i:g=i,(c=r>=(a=(v+m)/2))?v=a:m=a}while((f=c<<1|l)==(h=(u>=a)<<1|s>=i));return o[h]=p,o[f]=d,t}function o(t,e,r,n,o){this.node=t,this.x0=e,this.y0=r,this.x1=n,this.y1=o}function i(t){return t[0]}function a(t){return t[1]}function s(t,e,r){var n=new u(null==e?i:e,null==r?a:r,NaN,NaN,NaN,NaN);return null==t?n:n.addAll(t)}function u(t,e,r,n,o,i){this._x=t,this._y=e,this._x0=r,this._y0=n,this._x1=o,this._y1=i,this._root=void 0}function l(t){for(var e={data:t.data},r=e;t=t.next;)r=r.next={data:t.data};return e}r.d(e,{Z:function(){return s}});var c=s.prototype=u.prototype;c.copy=function(){var t,e,r=new u(this._x,this._y,this._x0,this._y0,this._x1,this._y1),n=this._root;if(!n)return r;if(!n.length)return r._root=l(n),r;for(t=[{source:n,target:r._root=new Array(4)}];n=t.pop();)for(var o=0;o<4;++o)(e=n.source[o])&&(e.length?t.push({source:e,target:n.target[o]=new Array(4)}):n.target[o]=l(e));return r},c.add=function(t){var e=+this._x.call(null,t),r=+this._y.call(null,t);return n(this.cover(e,r),e,r,t)},c.addAll=function(t){var e,r,o,i,a=t.length,s=new Array(a),u=new Array(a),l=1/0,c=1/0,f=-1/0,h=-1/0;for(r=0;r<a;++r)isNaN(o=+this._x.call(null,e=t[r]))||isNaN(i=+this._y.call(null,e))||(s[r]=o,u[r]=i,o<l&&(l=o),o>f&&(f=o),i<c&&(c=i),i>h&&(h=i));if(l>f||c>h)return this;for(this.cover(l,c).cover(f,h),r=0;r<a;++r)n(this,s[r],u[r],t[r]);return this},c.cover=function(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var r=this._x0,n=this._y0,o=this._x1,i=this._y1;if(isNaN(r))o=(r=Math.floor(t))+1,i=(n=Math.floor(e))+1;else{for(var a,s,u=o-r||1,l=this._root;r>t||t>=o||n>e||e>=i;)switch(s=(e<n)<<1|t<r,(a=new Array(4))[s]=l,l=a,u*=2,s){case 0:o=r+u,i=n+u;break;case 1:r=o-u,i=n+u;break;case 2:o=r+u,n=i-u;break;case 3:r=o-u,n=i-u}this._root&&this._root.length&&(this._root=l)}return this._x0=r,this._y0=n,this._x1=o,this._y1=i,this},c.data=function(){var t=[];return this.visit(function(e){if(!e.length)do{t.push(e.data)}while(e=e.next)}),t},c.extent=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},c.find=function(t,e,r){var n,i,a,s,u,l,c,f=this._x0,h=this._y0,p=this._x1,d=this._y1,y=[],v=this._root;for(v&&y.push(new o(v,f,h,p,d)),null==r?r=1/0:(f=t-r,h=e-r,p=t+r,d=e+r,r*=r);l=y.pop();)if(!(!(v=l.node)||(i=l.x0)>p||(a=l.y0)>d||(s=l.x1)<f||(u=l.y1)<h))if(v.length){var g=(i+s)/2,m=(a+u)/2;y.push(new o(v[3],g,m,s,u),new o(v[2],i,m,g,u),new o(v[1],g,a,s,m),new o(v[0],i,a,g,m)),(c=(e>=m)<<1|t>=g)&&(l=y[y.length-1],y[y.length-1]=y[y.length-1-c],y[y.length-1-c]=l)}else{var b=t-+this._x.call(null,v.data),w=e-+this._y.call(null,v.data),S=b*b+w*w;if(S<r){var x=Math.sqrt(r=S);f=t-x,h=e-x,p=t+x,d=e+x,n=v.data}}return n},c.remove=function(t){if(isNaN(i=+this._x.call(null,t))||isNaN(a=+this._y.call(null,t)))return this;var e,r,n,o,i,a,s,u,l,c,f,h,p=this._root,d=this._x0,y=this._y0,v=this._x1,g=this._y1;if(!p)return this;if(p.length)for(;;){if((l=i>=(s=(d+v)/2))?d=s:v=s,(c=a>=(u=(y+g)/2))?y=u:g=u,e=p,!(p=p[f=c<<1|l]))return this;if(!p.length)break;(e[f+1&3]||e[f+2&3]||e[f+3&3])&&(r=e,h=f)}for(;p.data!==t;)if(n=p,!(p=p.next))return this;return(o=p.next)&&delete p.next,n?(o?n.next=o:delete n.next,this):e?(o?e[f]=o:delete e[f],(p=e[0]||e[1]||e[2]||e[3])&&p===(e[3]||e[2]||e[1]||e[0])&&!p.length&&(r?r[h]=p:this._root=p),this):(this._root=o,this)},c.removeAll=function(t){for(var e=0,r=t.length;e<r;++e)this.remove(t[e]);return this},c.root=function(){return this._root},c.size=function(){var t=0;return this.visit(function(e){if(!e.length)do{++t}while(e=e.next)}),t},c.visit=function(t){var e,r,n,i,a,s,u=[],l=this._root;for(l&&u.push(new o(l,this._x0,this._y0,this._x1,this._y1));e=u.pop();)if(!t(l=e.node,n=e.x0,i=e.y0,a=e.x1,s=e.y1)&&l.length){var c=(n+a)/2,f=(i+s)/2;(r=l[3])&&u.push(new o(r,c,f,a,s)),(r=l[2])&&u.push(new o(r,n,f,c,s)),(r=l[1])&&u.push(new o(r,c,i,a,f)),(r=l[0])&&u.push(new o(r,n,i,c,f))}return this},c.visitAfter=function(t){var e,r=[],n=[];for(this._root&&r.push(new o(this._root,this._x0,this._y0,this._x1,this._y1));e=r.pop();){var i=e.node;if(i.length){var a,s=e.x0,u=e.y0,l=e.x1,c=e.y1,f=(s+l)/2,h=(u+c)/2;(a=i[0])&&r.push(new o(a,s,u,f,h)),(a=i[1])&&r.push(new o(a,f,u,l,h)),(a=i[2])&&r.push(new o(a,s,h,f,c)),(a=i[3])&&r.push(new o(a,f,h,l,c))}n.push(e)}for(;e=n.pop();)t(e.node,e.x0,e.y0,e.x1,e.y1);return this},c.x=function(t){return arguments.length?(this._x=t,this):this._x},c.y=function(t){return arguments.length?(this._y=t,this):this._y}},4751:function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}r.d(e,{HT:function(){return m}});var o,i,a=0,s=0,u=0,l=1e3,c=0,f=0,h=0,p="object"===("undefined"==typeof performance?"undefined":n(performance))&&performance.now?performance:Date,d="object"===("undefined"==typeof window?"undefined":n(window))&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function y(){return f||(d(v),f=p.now()+h)}function v(){f=0}function g(){this._call=this._time=this._next=null}function m(t,e,r){var n=new g;return n.restart(t,e,r),n}function b(){f=(c=p.now())+h,a=s=0;try{!function(){y(),++a;for(var t,e=o;e;)(t=f-e._time)>=0&&e._call.call(null,t),e=e._next;--a}()}finally{a=0,function(){var t,e,r=o,n=1/0;for(;r;)r._call?(n>r._time&&(n=r._time),t=r,r=r._next):(e=r._next,r._next=null,r=t?t._next=e:o=e);i=t,S(n)}(),f=0}}function w(){var t=p.now(),e=t-c;e>l&&(h-=e,c=t)}function S(t){a||(s&&(s=clearTimeout(s)),t-f>24?(t<1/0&&(s=setTimeout(b,t-p.now()-h)),u&&(u=clearInterval(u))):(u||(c=p.now(),u=setInterval(w,l)),a=1,d(b)))}g.prototype=m.prototype={constructor:g,restart:function(t,e,r){if("function"!=typeof t)throw new TypeError("callback is not a function");r=(null==r?y():+r)+(null==e?0:+e),this._next||i===this||(i?i._next=this:o=this,i=this),this._call=t,this._time=r,S()},stop:function(){this._call&&(this._call=null,this._time=1/0,S())}}},7628:function(t,e,r){"use strict";function n(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=l(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){s=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function o(t){return function(t){if(Array.isArray(t))return c(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||l(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,e,r){return e=a(e),function(t,e){if(e&&("object"===y(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],a(t).constructor):e.apply(t,r))}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function u(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,s=[],u=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(s.push(n.value),s.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(t,e)||l(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(t,e){if(t){if("string"==typeof t)return c(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(t,e):void 0}}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function f(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,p(n.key),n)}}function h(t,e,r){return e&&f(t.prototype,e),r&&f(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function p(t){var e=function(t,e){if("object"!=y(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=y(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==y(e)?e:e+""}function d(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function y(t){"@babel/helpers - typeof";return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}r.r(e),r.d(e,{BRIDGE_GRAPH_NAME:function(){return E},GraphType:function(){return S},HierarchyNodeType:function(){return x},InclusionType:function(){return w},LAYOUT_CONFIG:function(){return v},NodeType:function(){return b},ROOT_NAME:function(){return _},buildGraph:function(){return ma},flatGraph:function(){return ba},getEdges:function(){return wa},mergeConfig:function(){return g}});var v={graph:{meta:{rankDir:"TB",nodeSep:50,rankSep:50,edgeSep:5,align:void 0}},subScene:{meta:{paddingTop:20,paddingBottom:20,paddingLeft:20,paddingRight:20,labelHeight:20}},nodeSize:{meta:{width:100,maxLabelWidth:0,height:20},node:{width:80,height:20,labelOffset:10,maxLabelWidth:40},bridge:{width:5,height:5,radius:2,labelOffset:0}}};function g(){var t,e,r,n,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:v,a=JSON.parse(JSON.stringify(i)),s=(null===(t=null==o?void 0:o.graph)||void 0===t?void 0:t.meta)||{},u=(null===(e=null==o?void 0:o.subScene)||void 0===e?void 0:e.meta)||{},l=(null===(r=null==o?void 0:o.nodeSize)||void 0===r?void 0:r.meta)||{},c=(null===(n=null==o?void 0:o.nodeSize)||void 0===n?void 0:n.node)||{},f=a.nodeSize.bridge;return{graph:{meta:Object.assign(a.graph.meta,s)},subScene:{meta:Object.assign(a.subScene.meta,u)},nodeSize:{meta:Object.assign(a.nodeSize.meta,l),node:Object.assign(a.nodeSize.node,c),bridge:f}}}function m(t){return"â¬".concat(t,"â¬")}var b,w,S,x,_=m("ROOT"),E=m("BRIDGE_GRAPH");!function(t){t[t.META=0]="META",t[t.NODE=1]="NODE",t[t.BRIDGE=2]="BRIDGE"}(b||(b={})),function(t){t[t.INCLUDE=0]="INCLUDE",t[t.EXCLUDE=1]="EXCLUDE",t[t.UNSPECIFIED=2]="UNSPECIFIED"}(w||(w={})),function(t){t[t.META=0]="META",t[t.CORE=1]="CORE",t[t.BRIDGE=2]="BRIDGE"}(S||(S={})),function(t){t[t.META=0]="META",t[t.OP=1]="OP",t[t.SERIES=2]="SERIES"}(x||(x={}));var O="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==r.g?r.g:"undefined"!=typeof self?self:{};function P(t,e){return t(e={exports:{}},e.exports),e.exports}var k=function(t,e){return t===e||t!=t&&e!=e},C=function(t,e){for(var r=t.length;r--;)if(k(t[r][0],e))return r;return-1},T=Array.prototype.splice;function A(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}A.prototype.clear=function(){this.__data__=[],this.size=0},A.prototype.delete=function(t){var e=this.__data__,r=C(e,t);return!(r<0||(r==e.length-1?e.pop():T.call(e,r,1),--this.size,0))},A.prototype.get=function(t){var e=this.__data__,r=C(e,t);return r<0?void 0:e[r][1]},A.prototype.has=function(t){return C(this.__data__,t)>-1},A.prototype.set=function(t,e){var r=this.__data__,n=C(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this};var M,j=A,I="object"==y(O)&&O&&O.Object===Object&&O,N="object"==("undefined"==typeof self?"undefined":y(self))&&self&&self.Object===Object&&self,L=I||N||Function("return this")(),R=L.Symbol,D=Object.prototype,B=D.hasOwnProperty,F=D.toString,G=R?R.toStringTag:void 0,U=Object.prototype.toString,z=R?R.toStringTag:void 0,V=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":z&&z in Object(t)?function(t){var e=B.call(t,G),r=t[G];try{t[G]=void 0;var n=!0}catch(t){}var o=F.call(t);return n&&(e?t[G]=r:delete t[G]),o}(t):function(t){return U.call(t)}(t)},H=function(t){var e=y(t);return null!=t&&("object"==e||"function"==e)},W=function(t){if(!H(t))return!1;var e=V(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e},q=L["__core-js_shared__"],Y=(M=/[^.]+$/.exec(q&&q.keys&&q.keys.IE_PROTO||""))?"Symbol(src)_1."+M:"",X=Function.prototype.toString,J=function(t){if(null!=t){try{return X.call(t)}catch(t){}try{return t+""}catch(t){}}return""},K=/^\[object .+?Constructor\]$/,Q=Function.prototype,Z=Object.prototype,$=Q.toString,tt=Z.hasOwnProperty,et=RegExp("^"+$.call(tt).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),rt=function(t){return!(!H(t)||function(t){return!!Y&&Y in t}(t))&&(W(t)?et:K).test(J(t))},nt=function(t,e){var r=function(t,e){return null==t?void 0:t[e]}(t,e);return rt(r)?r:void 0},ot=nt(L,"Map"),it=nt(Object,"create"),at=Object.prototype.hasOwnProperty,st=Object.prototype.hasOwnProperty;function ut(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}ut.prototype.clear=function(){this.__data__=it?it(null):{},this.size=0},ut.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},ut.prototype.get=function(t){var e=this.__data__;if(it){var r=e[t];return"__lodash_hash_undefined__"===r?void 0:r}return at.call(e,t)?e[t]:void 0},ut.prototype.has=function(t){var e=this.__data__;return it?void 0!==e[t]:st.call(e,t)},ut.prototype.set=function(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=it&&void 0===e?"__lodash_hash_undefined__":e,this};var lt=ut,ct=function(t,e){var r=t.__data__;return function(t){var e=y(t);return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}(e)?r["string"==typeof e?"string":"hash"]:r.map};function ft(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}ft.prototype.clear=function(){this.size=0,this.__data__={hash:new lt,map:new(ot||j),string:new lt}},ft.prototype.delete=function(t){var e=ct(this,t).delete(t);return this.size-=e?1:0,e},ft.prototype.get=function(t){return ct(this,t).get(t)},ft.prototype.has=function(t){return ct(this,t).has(t)},ft.prototype.set=function(t,e){var r=ct(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this};var ht=ft;function pt(t){var e=this.__data__=new j(t);this.size=e.size}pt.prototype.clear=function(){this.__data__=new j,this.size=0},pt.prototype.delete=function(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r},pt.prototype.get=function(t){return this.__data__.get(t)},pt.prototype.has=function(t){return this.__data__.has(t)},pt.prototype.set=function(t,e){var r=this.__data__;if(r instanceof j){var n=r.__data__;if(!ot||n.length<199)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new ht(n)}return r.set(t,e),this.size=r.size,this};var dt=pt,yt=function(t,e){for(var r=-1,n=null==t?0:t.length;++r<n&&!1!==e(t[r],r,t););return t},vt=function(){try{var t=nt(Object,"defineProperty");return t({},"",{}),t}catch(t){}}(),gt=function(t,e,r){"__proto__"==e&&vt?vt(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r},mt=Object.prototype.hasOwnProperty,bt=function(t,e,r){var n=t[e];mt.call(t,e)&&k(n,r)&&(void 0!==r||e in t)||gt(t,e,r)},wt=function(t,e,r,n){var o=!r;r||(r={});for(var i=-1,a=e.length;++i<a;){var s=e[i],u=n?n(r[s],t[s],s,r,t):void 0;void 0===u&&(u=t[s]),o?gt(r,s,u):bt(r,s,u)}return r},St=function(t){return null!=t&&"object"==y(t)},xt=function(t){return St(t)&&"[object Arguments]"==V(t)},_t=Object.prototype,Et=_t.hasOwnProperty,Ot=_t.propertyIsEnumerable,Pt=xt(function(){return arguments}())?xt:function(t){return St(t)&&Et.call(t,"callee")&&!Ot.call(t,"callee")},kt=Array.isArray,Ct=function(){return!1},Tt=P(function(t,e){var r=e&&!e.nodeType&&e,n=r&&t&&!t.nodeType&&t,o=n&&n.exports===r?L.Buffer:void 0,i=(o?o.isBuffer:void 0)||Ct;t.exports=i}),At=/^(?:0|[1-9]\d*)$/,Mt=function(t,e){var r=y(t);return!!(e=null==e?9007199254740991:e)&&("number"==r||"symbol"!=r&&At.test(t))&&t>-1&&t%1==0&&t<e},jt=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991},It={};It["[object Float32Array]"]=It["[object Float64Array]"]=It["[object Int8Array]"]=It["[object Int16Array]"]=It["[object Int32Array]"]=It["[object Uint8Array]"]=It["[object Uint8ClampedArray]"]=It["[object Uint16Array]"]=It["[object Uint32Array]"]=!0,It["[object Arguments]"]=It["[object Array]"]=It["[object ArrayBuffer]"]=It["[object Boolean]"]=It["[object DataView]"]=It["[object Date]"]=It["[object Error]"]=It["[object Function]"]=It["[object Map]"]=It["[object Number]"]=It["[object Object]"]=It["[object RegExp]"]=It["[object Set]"]=It["[object String]"]=It["[object WeakMap]"]=!1;var Nt=function(t){return function(e){return t(e)}},Lt=P(function(t,e){var r=e&&!e.nodeType&&e,n=r&&t&&!t.nodeType&&t,o=n&&n.exports===r&&I.process,i=function(){try{return n&&n.require&&n.require("util").types||o&&o.binding&&o.binding("util")}catch(t){}}();t.exports=i}),Rt=Lt&&Lt.isTypedArray,Dt=Rt?Nt(Rt):function(t){return St(t)&&jt(t.length)&&!!It[V(t)]},Bt=Object.prototype.hasOwnProperty,Ft=function(t,e){var r=kt(t),n=!r&&Pt(t),o=!r&&!n&&Tt(t),i=!r&&!n&&!o&&Dt(t),a=r||n||o||i,s=a?function(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}(t.length,String):[],u=s.length;for(var l in t)!e&&!Bt.call(t,l)||a&&("length"==l||o&&("offset"==l||"parent"==l)||i&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||Mt(l,u))||s.push(l);return s},Gt=Object.prototype,Ut=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Gt)},zt=function(t,e){return function(r){return t(e(r))}},Vt=zt(Object.keys,Object),Ht=Object.prototype.hasOwnProperty,Wt=function(t){if(!Ut(t))return Vt(t);var e=[];for(var r in Object(t))Ht.call(t,r)&&"constructor"!=r&&e.push(r);return e},qt=function(t){return null!=t&&jt(t.length)&&!W(t)},Yt=function(t){return qt(t)?Ft(t):Wt(t)},Xt=Object.prototype.hasOwnProperty,Jt=function(t){if(!H(t))return function(t){var e=[];if(null!=t)for(var r in Object(t))e.push(r);return e}(t);var e=Ut(t),r=[];for(var n in t)("constructor"!=n||!e&&Xt.call(t,n))&&r.push(n);return r},Kt=function(t){return qt(t)?Ft(t,!0):Jt(t)},Qt=P(function(t,e){var r=e&&!e.nodeType&&e,n=r&&t&&!t.nodeType&&t,o=n&&n.exports===r?L.Buffer:void 0,i=o?o.allocUnsafe:void 0;t.exports=function(t,e){if(e)return t.slice();var r=t.length,n=i?i(r):new t.constructor(r);return t.copy(n),n}}),Zt=function(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e},$t=function(t,e){for(var r=-1,n=null==t?0:t.length,o=0,i=[];++r<n;){var a=t[r];e(a,r,t)&&(i[o++]=a)}return i},te=function(){return[]},ee=Object.prototype.propertyIsEnumerable,re=Object.getOwnPropertySymbols,ne=re?function(t){return null==t?[]:(t=Object(t),$t(re(t),function(e){return ee.call(t,e)}))}:te,oe=function(t,e){for(var r=-1,n=e.length,o=t.length;++r<n;)t[o+r]=e[r];return t},ie=zt(Object.getPrototypeOf,Object),ae=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)oe(e,ne(t)),t=ie(t);return e}:te,se=function(t,e,r){var n=e(t);return kt(t)?n:oe(n,r(t))},ue=function(t){return se(t,Yt,ne)},le=nt(L,"DataView"),ce=nt(L,"Promise"),fe=nt(L,"Set"),he=nt(L,"WeakMap"),pe=J(le),de=J(ot),ye=J(ce),ve=J(fe),ge=J(he),me=V;(le&&"[object DataView]"!=me(new le(new ArrayBuffer(1)))||ot&&"[object Map]"!=me(new ot)||ce&&"[object Promise]"!=me(ce.resolve())||fe&&"[object Set]"!=me(new fe)||he&&"[object WeakMap]"!=me(new he))&&(me=function(t){var e=V(t),r="[object Object]"==e?t.constructor:void 0,n=r?J(r):"";if(n)switch(n){case pe:return"[object DataView]";case de:return"[object Map]";case ye:return"[object Promise]";case ve:return"[object Set]";case ge:return"[object WeakMap]"}return e});var be=me,we=Object.prototype.hasOwnProperty,Se=L.Uint8Array,xe=function(t){var e=new t.constructor(t.byteLength);return new Se(e).set(new Se(t)),e},_e=/\w*$/,Ee=R?R.prototype:void 0,Oe=Ee?Ee.valueOf:void 0,Pe=function(t,e){var r=e?xe(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)},ke=function(t,e,r){var n=t.constructor;switch(e){case"[object ArrayBuffer]":return xe(t);case"[object Boolean]":case"[object Date]":return new n(+t);case"[object DataView]":return function(t,e){var r=e?xe(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)}(t,r);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return Pe(t,r);case"[object Map]":return new n;case"[object Number]":case"[object String]":return new n(t);case"[object RegExp]":return function(t){var e=new t.constructor(t.source,_e.exec(t));return e.lastIndex=t.lastIndex,e}(t);case"[object Set]":return new n;case"[object Symbol]":return function(t){return Oe?Object(Oe.call(t)):{}}(t)}},Ce=Object.create,Te=function(){function t(){}return function(e){if(!H(e))return{};if(Ce)return Ce(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}(),Ae=function(t){return"function"!=typeof t.constructor||Ut(t)?{}:Te(ie(t))},Me=Lt&&Lt.isMap,je=Me?Nt(Me):function(t){return St(t)&&"[object Map]"==be(t)},Ie=Lt&&Lt.isSet,Ne=Ie?Nt(Ie):function(t){return St(t)&&"[object Set]"==be(t)},Le={};Le["[object Arguments]"]=Le["[object Array]"]=Le["[object ArrayBuffer]"]=Le["[object DataView]"]=Le["[object Boolean]"]=Le["[object Date]"]=Le["[object Float32Array]"]=Le["[object Float64Array]"]=Le["[object Int8Array]"]=Le["[object Int16Array]"]=Le["[object Int32Array]"]=Le["[object Map]"]=Le["[object Number]"]=Le["[object Object]"]=Le["[object RegExp]"]=Le["[object Set]"]=Le["[object String]"]=Le["[object Symbol]"]=Le["[object Uint8Array]"]=Le["[object Uint8ClampedArray]"]=Le["[object Uint16Array]"]=Le["[object Uint32Array]"]=!0,Le["[object Error]"]=Le["[object Function]"]=Le["[object WeakMap]"]=!1;var Re=function t(e,r,n,o,i,a){var s,u=1&r,l=2&r,c=4&r;if(n&&(s=i?n(e,o,i,a):n(e)),void 0!==s)return s;if(!H(e))return e;var f=kt(e);if(f){if(s=function(t){var e=t.length,r=new t.constructor(e);return e&&"string"==typeof t[0]&&we.call(t,"index")&&(r.index=t.index,r.input=t.input),r}(e),!u)return Zt(e,s)}else{var h=be(e),p="[object Function]"==h||"[object GeneratorFunction]"==h;if(Tt(e))return Qt(e,u);if("[object Object]"==h||"[object Arguments]"==h||p&&!i){if(s=l||p?{}:Ae(e),!u)return l?function(t,e){return wt(t,ae(t),e)}(e,function(t,e){return t&&wt(e,Kt(e),t)}(s,e)):function(t,e){return wt(t,ne(t),e)}(e,function(t,e){return t&&wt(e,Yt(e),t)}(s,e))}else{if(!Le[h])return i?e:{};s=ke(e,h,u)}}a||(a=new dt);var d=a.get(e);if(d)return d;a.set(e,s),Ne(e)?e.forEach(function(o){s.add(t(o,r,n,o,e,a))}):je(e)&&e.forEach(function(o,i){s.set(i,t(o,r,n,i,e,a))});var y=f?void 0:(c?l?function(t){return se(t,Kt,ae)}:ue:l?Kt:Yt)(e);return yt(y||e,function(o,i){y&&(o=e[i=o]),bt(s,i,t(o,r,n,i,e,a))}),s},De=function(t){return function(){return t}},Be=function(t,e,r){for(var n=-1,o=Object(t),i=r(t),a=i.length;a--;){var s=i[++n];if(!1===e(o[s],s,o))break}return t},Fe=function(t,e){return t&&Be(t,e,Yt)},Ge=function(t,e){return function(e,r){if(null==e)return e;if(!qt(e))return t(e,r);for(var n=e.length,o=-1,i=Object(e);++o<n&&!1!==r(i[o],o,i););return e}}(Fe),Ue=function(t){return t},ze=function(t){return"function"==typeof t?t:Ue},Ve=function(t,e){return(kt(t)?yt:Ge)(t,ze(e))},He=Ve;function We(t){var e=-1,r=null==t?0:t.length;for(this.__data__=new ht;++e<r;)this.add(t[e])}We.prototype.add=We.prototype.push=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},We.prototype.has=function(t){return this.__data__.has(t)};var qe=We,Ye=function(t,e){for(var r=-1,n=null==t?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1},Xe=function(t,e){return t.has(e)},Je=function(t,e,r,n,o,i){var a=1&r,s=t.length,u=e.length;if(s!=u&&!(a&&u>s))return!1;var l=i.get(t),c=i.get(e);if(l&&c)return l==e&&c==t;var f=-1,h=!0,p=2&r?new qe:void 0;for(i.set(t,e),i.set(e,t);++f<s;){var d=t[f],y=e[f];if(n)var v=a?n(y,d,f,e,t,i):n(d,y,f,t,e,i);if(void 0!==v){if(v)continue;h=!1;break}if(p){if(!Ye(e,function(t,e){if(!Xe(p,e)&&(d===t||o(d,t,r,n,i)))return p.push(e)})){h=!1;break}}else if(d!==y&&!o(d,y,r,n,i)){h=!1;break}}return i.delete(t),i.delete(e),h},Ke=function(t){var e=-1,r=Array(t.size);return t.forEach(function(t,n){r[++e]=[n,t]}),r},Qe=function(t){var e=-1,r=Array(t.size);return t.forEach(function(t){r[++e]=t}),r},Ze=R?R.prototype:void 0,$e=Ze?Ze.valueOf:void 0,tr=function(t,e,r,n,o,i,a){switch(r){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!i(new Se(t),new Se(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return k(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var s=Ke;case"[object Set]":var u=1&n;if(s||(s=Qe),t.size!=e.size&&!u)return!1;var l=a.get(t);if(l)return l==e;n|=2,a.set(t,e);var c=Je(s(t),s(e),n,o,i,a);return a.delete(t),c;case"[object Symbol]":if($e)return $e.call(t)==$e.call(e)}return!1},er=Object.prototype.hasOwnProperty,rr=Object.prototype.hasOwnProperty,nr=function(t,e,r,n,o,i){var a=kt(t),s=kt(e),u=a?"[object Array]":be(t),l=s?"[object Array]":be(e),c="[object Object]"==(u="[object Arguments]"==u?"[object Object]":u),f="[object Object]"==(l="[object Arguments]"==l?"[object Object]":l),h=u==l;if(h&&Tt(t)){if(!Tt(e))return!1;a=!0,c=!1}if(h&&!c)return i||(i=new dt),a||Dt(t)?Je(t,e,r,n,o,i):tr(t,e,u,r,n,o,i);if(!(1&r)){var p=c&&rr.call(t,"__wrapped__"),d=f&&rr.call(e,"__wrapped__");if(p||d){var y=p?t.value():t,v=d?e.value():e;return i||(i=new dt),o(y,v,r,n,i)}}return!!h&&(i||(i=new dt),function(t,e,r,n,o,i){var a=1&r,s=ue(t),u=s.length;if(u!=ue(e).length&&!a)return!1;for(var l=u;l--;){var c=s[l];if(!(a?c in e:er.call(e,c)))return!1}var f=i.get(t),h=i.get(e);if(f&&h)return f==e&&h==t;var p=!0;i.set(t,e),i.set(e,t);for(var d=a;++l<u;){var y=t[c=s[l]],v=e[c];if(n)var g=a?n(v,y,c,e,t,i):n(y,v,c,t,e,i);if(!(void 0===g?y===v||o(y,v,r,n,i):g)){p=!1;break}d||(d="constructor"==c)}if(p&&!d){var m=t.constructor,b=e.constructor;m==b||!("constructor"in t)||!("constructor"in e)||"function"==typeof m&&m instanceof m&&"function"==typeof b&&b instanceof b||(p=!1)}return i.delete(t),i.delete(e),p}(t,e,r,n,o,i))},or=function t(e,r,n,o,i){return e===r||(null==e||null==r||!St(e)&&!St(r)?e!=e&&r!=r:nr(e,r,n,o,t,i))},ir=function(t){return t==t&&!H(t)},ar=function(t,e){return function(r){return null!=r&&r[t]===e&&(void 0!==e||t in Object(r))}},sr=function(t){var e=function(t){for(var e=Yt(t),r=e.length;r--;){var n=e[r],o=t[n];e[r]=[n,o,ir(o)]}return e}(t);return 1==e.length&&e[0][2]?ar(e[0][0],e[0][1]):function(r){return r===t||function(t,e,r,n){var o=r.length,i=o,a=!n;if(null==t)return!i;for(t=Object(t);o--;){var s=r[o];if(a&&s[2]?s[1]!==t[s[0]]:!(s[0]in t))return!1}for(;++o<i;){var u=(s=r[o])[0],l=t[u],c=s[1];if(a&&s[2]){if(void 0===l&&!(u in t))return!1}else{var f=new dt;if(n)var h=n(l,c,u,t,e,f);if(!(void 0===h?or(c,l,3,n,f):h))return!1}}return!0}(r,t,e)}},ur=function(t){return"symbol"==y(t)||St(t)&&"[object Symbol]"==V(t)},lr=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,cr=/^\w*$/,fr=function(t,e){if(kt(t))return!1;var r=y(t);return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=t&&!ur(t))||cr.test(t)||!lr.test(t)||null!=e&&t in Object(e)};function hr(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var r=function r(){var n=arguments,o=e?e.apply(this,n):n[0],i=r.cache;if(i.has(o))return i.get(o);var a=t.apply(this,n);return r.cache=i.set(o,a)||i,a};return r.cache=new(hr.Cache||ht),r}hr.Cache=ht;var pr,dr=hr,yr=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,vr=/\\(\\)?/g,gr=function(t){var e=dr(function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(yr,function(t,r,n,o){e.push(n?o.replace(vr,"$1"):r||t)}),e},function(t){return 500===r.size&&r.clear(),t}),r=e.cache;return e}(),mr=function(t,e){for(var r=-1,n=null==t?0:t.length,o=Array(n);++r<n;)o[r]=e(t[r],r,t);return o},br=R?R.prototype:void 0,wr=br?br.toString:void 0,Sr=function(t){return null==t?"":function t(e){if("string"==typeof e)return e;if(kt(e))return mr(e,t)+"";if(ur(e))return wr?wr.call(e):"";var r=e+"";return"0"==r&&1/e==-1/0?"-0":r}(t)},xr=function(t,e){return kt(t)?t:fr(t,e)?[t]:gr(Sr(t))},_r=function(t){if("string"==typeof t||ur(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e},Er=function(t,e){for(var r=0,n=(e=xr(e,t)).length;null!=t&&r<n;)t=t[_r(e[r++])];return r&&r==n?t:void 0},Or=function(t,e){return null!=t&&e in Object(t)},Pr=function(t,e,r){for(var n=-1,o=(e=xr(e,t)).length,i=!1;++n<o;){var a=_r(e[n]);if(!(i=null!=t&&r(t,a)))break;t=t[a]}return i||++n!=o?i:!!(o=null==t?0:t.length)&&jt(o)&&Mt(a,o)&&(kt(t)||Pt(t))},kr=function(t,e){return null!=t&&Pr(t,e,Or)},Cr=function(t,e){return fr(t)&&ir(e)?ar(_r(t),e):function(r){var n=function(t,e,r){var n=null==t?void 0:Er(t,e);return void 0===n?r:n}(r,t);return void 0===n&&n===e?kr(r,t):or(e,n,3)}},Tr=function(t){return function(e){return null==e?void 0:e[t]}},Ar=function(t){return fr(t)?Tr(_r(t)):function(t){return function(e){return Er(e,t)}}(t)},Mr=function(t){return"function"==typeof t?t:null==t?Ue:"object"==y(t)?kt(t)?Cr(t[0],t[1]):sr(t):Ar(t)},jr=function(t,e){return(kt(t)?$t:function(t,e){var r=[];return Ge(t,function(t,n,o){e(t,n,o)&&r.push(t)}),r})(t,Mr(e))},Ir=Object.prototype.hasOwnProperty,Nr=function(t,e){return null!=t&&Ir.call(t,e)},Lr=function(t,e){return null!=t&&Pr(t,e,Nr)},Rr=Object.prototype.hasOwnProperty,Dr=function(t){return void 0===t},Br=function(t,e){var r=-1,n=qt(t)?Array(t.length):[];return Ge(t,function(t,o,i){n[++r]=e(t,o,i)}),n},Fr=function(t,e){return(kt(t)?mr:Br)(t,Mr(e))},Gr=function(t,e,r,n){var o=-1,i=null==t?0:t.length;for(n&&i&&(r=t[++o]);++o<i;)r=e(r,t[o],o,t);return r},Ur=function(t,e,r,n,o){return o(t,function(t,o,i){r=n?(n=!1,t):e(r,t,o,i)}),r},zr=function(t,e,r){var n=kt(t)?Gr:Ur,o=arguments.length<3;return n(t,Mr(e),r,o,Ge)},Vr=Tr("length"),Hr=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]"),Wr="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",qr="\\ud83c[\\udffb-\\udfff]",Yr="[^\\ud800-\\udfff]",Xr="(?:\\ud83c[\\udde6-\\uddff]){2}",Jr="[\\ud800-\\udbff][\\udc00-\\udfff]",Kr="(?:"+Wr+"|"+qr+")?",Qr="[\\ufe0e\\ufe0f]?"+Kr+"(?:\\u200d(?:"+[Yr,Xr,Jr].join("|")+")[\\ufe0e\\ufe0f]?"+Kr+")*",Zr="(?:"+[Yr+Wr+"?",Wr,Xr,Jr,"[\\ud800-\\udfff]"].join("|")+")",$r=RegExp(qr+"(?="+qr+")|"+Zr+Qr,"g"),tn=function(t){return function(t){return Hr.test(t)}(t)?function(t){for(var e=$r.lastIndex=0;$r.test(t);)++e;return e}(t):Vr(t)},en=R?R.isConcatSpreadable:void 0,rn=function(t){return kt(t)||Pt(t)||!!(en&&t&&t[en])},nn=function t(e,r,n,o,i){var a=-1,s=e.length;for(n||(n=rn),i||(i=[]);++a<s;){var u=e[a];r>0&&n(u)?r>1?t(u,r-1,n,o,i):oe(i,u):o||(i[i.length]=u)}return i},on=Math.max,an=function(t,e,r){return e=on(void 0===e?t.length-1:e,0),function(){for(var n=arguments,o=-1,i=on(n.length-e,0),a=Array(i);++o<i;)a[o]=n[e+o];o=-1;for(var s=Array(e+1);++o<e;)s[o]=n[o];return s[e]=r(a),function(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}(t,this,s)}},sn=vt?function(t,e){return vt(t,"toString",{configurable:!0,enumerable:!1,value:De(e),writable:!0})}:Ue,un=Date.now,ln=function(t){var e=0,r=0;return function(){var n=un(),o=16-(n-r);if(r=n,o>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}(sn),cn=function(t,e){return ln(an(t,e,Ue),t+"")},fn=function(t,e,r,n){for(var o=t.length,i=r+(n?1:-1);n?i--:++i<o;)if(e(t[i],i,t))return i;return-1},hn=function(t){return t!=t},pn=function(t,e){return!(null==t||!t.length)&&function(t,e,r){return e==e?function(t,e,r){for(var n=r-1,o=t.length;++n<o;)if(t[n]===e)return n;return-1}(t,e,r):fn(t,hn,r)}(t,e,0)>-1},dn=function(t,e,r){for(var n=-1,o=null==t?0:t.length;++n<o;)if(r(e,t[n]))return!0;return!1},yn=fe&&1/Qe(new fe([,-0]))[1]==1/0?function(t){return new fe(t)}:function(){},vn=function(t){return St(t)&&qt(t)},gn=cn(function(t){return function(t,e,r){var n=-1,o=pn,i=t.length,a=!0,s=[],u=s;if(r)a=!1,o=dn;else if(i>=200){var l=e?null:yn(t);if(l)return Qe(l);a=!1,o=Xe,u=new qe}else u=e?[]:s;t:for(;++n<i;){var c=t[n],f=e?e(c):c;if(c=r||0!==c?c:0,a&&f==f){for(var h=u.length;h--;)if(u[h]===f)continue t;e&&u.push(f),s.push(c)}else o(u,f,r)||(u!==s&&u.push(f),s.push(c))}return s}(nn(t,1,vn,!0))}),mn=function(t){return null==t?[]:function(t,e){return mr(e,function(e){return t[e]})}(t,Yt(t))};try{pr={clone:function(t){return Re(t,4)},constant:De,each:He,filter:jr,has:Lr,isArray:kt,isEmpty:function(t){if(null==t)return!0;if(qt(t)&&(kt(t)||"string"==typeof t||"function"==typeof t.splice||Tt(t)||Dt(t)||Pt(t)))return!t.length;var e=be(t);if("[object Map]"==e||"[object Set]"==e)return!t.size;if(Ut(t))return!Wt(t).length;for(var r in t)if(Rr.call(t,r))return!1;return!0},isFunction:W,isUndefined:Dr,keys:Yt,map:Fr,reduce:zr,size:function(t){if(null==t)return 0;if(qt(t))return function(t){return"string"==typeof t||!kt(t)&&St(t)&&"[object String]"==V(t)}(t)?tn(t):t.length;var e=be(t);return"[object Map]"==e||"[object Set]"==e?t.size:Wt(t).length},transform:function(t,e,r){var n=kt(t),o=n||Tt(t)||Dt(t);if(e=Mr(e),null==r){var i=t&&t.constructor;r=o?n?new i:[]:H(t)&&W(i)?Te(ie(t)):{}}return(o?yt:Fe)(t,function(t,n,o){return e(r,t,n,o)}),r},union:gn,values:mn}}catch(v){}pr||(pr=window._);var bn=pr,wn=Sn;function Sn(t){this._isDirected=!bn.has(t,"directed")||t.directed,this._isMultigraph=!!bn.has(t,"multigraph")&&t.multigraph,this._isCompound=!!bn.has(t,"compound")&&t.compound,this._label=void 0,this._defaultNodeLabelFn=bn.constant(void 0),this._defaultEdgeLabelFn=bn.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children["\0"]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}function xn(t,e){t[e]?t[e]++:t[e]=1}function _n(t,e){--t[e]||delete t[e]}function En(t,e,r,n){var o=""+e,i=""+r;if(!t&&o>i){var a=o;o=i,i=a}return o+""+i+""+(bn.isUndefined(n)?"\0":n)}function On(t,e){return En(t,e.v,e.w,e.name)}Sn.prototype._nodeCount=0,Sn.prototype._edgeCount=0,Sn.prototype.isDirected=function(){return this._isDirected},Sn.prototype.isMultigraph=function(){return this._isMultigraph},Sn.prototype.isCompound=function(){return this._isCompound},Sn.prototype.setGraph=function(t){return this._label=t,this},Sn.prototype.graph=function(){return this._label},Sn.prototype.setDefaultNodeLabel=function(t){return bn.isFunction(t)||(t=bn.constant(t)),this._defaultNodeLabelFn=t,this},Sn.prototype.nodeCount=function(){return this._nodeCount},Sn.prototype.nodes=function(){return bn.keys(this._nodes)},Sn.prototype.sources=function(){var t=this;return bn.filter(this.nodes(),function(e){return bn.isEmpty(t._in[e])})},Sn.prototype.sinks=function(){var t=this;return bn.filter(this.nodes(),function(e){return bn.isEmpty(t._out[e])})},Sn.prototype.setNodes=function(t,e){var r=arguments,n=this;return bn.each(t,function(t){r.length>1?n.setNode(t,e):n.setNode(t)}),this},Sn.prototype.setNode=function(t,e){return bn.has(this._nodes,t)?(arguments.length>1&&(this._nodes[t]=e),this):(this._nodes[t]=arguments.length>1?e:this._defaultNodeLabelFn(t),this._isCompound&&(this._parent[t]="\0",this._children[t]={},this._children["\0"][t]=!0),this._in[t]={},this._preds[t]={},this._out[t]={},this._sucs[t]={},++this._nodeCount,this)},Sn.prototype.node=function(t){return this._nodes[t]},Sn.prototype.hasNode=function(t){return bn.has(this._nodes,t)},Sn.prototype.removeNode=function(t){var e=this;if(bn.has(this._nodes,t)){var r=function(t){e.removeEdge(e._edgeObjs[t])};delete this._nodes[t],this._isCompound&&(this._removeFromParentsChildList(t),delete this._parent[t],bn.each(this.children(t),function(t){e.setParent(t)}),delete this._children[t]),bn.each(bn.keys(this._in[t]),r),delete this._in[t],delete this._preds[t],bn.each(bn.keys(this._out[t]),r),delete this._out[t],delete this._sucs[t],--this._nodeCount}return this},Sn.prototype.setParent=function(t,e){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(bn.isUndefined(e))e="\0";else{for(var r=e+="";!bn.isUndefined(r);r=this.parent(r))if(r===t)throw new Error("Setting "+e+" as parent of "+t+" would create a cycle");this.setNode(e)}return this.setNode(t),this._removeFromParentsChildList(t),this._parent[t]=e,this._children[e][t]=!0,this},Sn.prototype._removeFromParentsChildList=function(t){delete this._children[this._parent[t]][t]},Sn.prototype.parent=function(t){if(this._isCompound){var e=this._parent[t];if("\0"!==e)return e}},Sn.prototype.children=function(t){if(bn.isUndefined(t)&&(t="\0"),this._isCompound){var e=this._children[t];if(e)return bn.keys(e)}else{if("\0"===t)return this.nodes();if(this.hasNode(t))return[]}},Sn.prototype.predecessors=function(t){var e=this._preds[t];if(e)return bn.keys(e)},Sn.prototype.successors=function(t){var e=this._sucs[t];if(e)return bn.keys(e)},Sn.prototype.neighbors=function(t){var e=this.predecessors(t);if(e)return bn.union(e,this.successors(t))},Sn.prototype.isLeaf=function(t){return 0===(this.isDirected()?this.successors(t):this.neighbors(t)).length},Sn.prototype.filterNodes=function(t){var e=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});e.setGraph(this.graph());var r=this;bn.each(this._nodes,function(r,n){t(n)&&e.setNode(n,r)}),bn.each(this._edgeObjs,function(t){e.hasNode(t.v)&&e.hasNode(t.w)&&e.setEdge(t,r.edge(t))});var n={};return this._isCompound&&bn.each(e.nodes(),function(t){e.setParent(t,function t(o){var i=r.parent(o);return void 0===i||e.hasNode(i)?(n[o]=i,i):i in n?n[i]:t(i)}(t))}),e},Sn.prototype.setDefaultEdgeLabel=function(t){return bn.isFunction(t)||(t=bn.constant(t)),this._defaultEdgeLabelFn=t,this},Sn.prototype.edgeCount=function(){return this._edgeCount},Sn.prototype.edges=function(){return bn.values(this._edgeObjs)},Sn.prototype.setPath=function(t,e){var r=this,n=arguments;return bn.reduce(t,function(t,o){return n.length>1?r.setEdge(t,o,e):r.setEdge(t,o),o}),this},Sn.prototype.setEdge=function(){var t,e,r,n,o=!1,i=arguments[0];"object"==y(i)&&null!==i&&"v"in i?(t=i.v,e=i.w,r=i.name,2===arguments.length&&(n=arguments[1],o=!0)):(t=i,e=arguments[1],r=arguments[3],arguments.length>2&&(n=arguments[2],o=!0)),t=""+t,e=""+e,bn.isUndefined(r)||(r=""+r);var a=En(this._isDirected,t,e,r);if(bn.has(this._edgeLabels,a))return o&&(this._edgeLabels[a]=n),this;if(!bn.isUndefined(r)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(t),this.setNode(e),this._edgeLabels[a]=o?n:this._defaultEdgeLabelFn(t,e,r);var s=function(t,e,r,n){var o=""+e,i=""+r;if(!t&&o>i){var a=o;o=i,i=a}var s={v:o,w:i};return n&&(s.name=n),s}(this._isDirected,t,e,r);return t=s.v,e=s.w,Object.freeze(s),this._edgeObjs[a]=s,xn(this._preds[e],t),xn(this._sucs[t],e),this._in[e][a]=s,this._out[t][a]=s,this._edgeCount++,this},Sn.prototype.edge=function(t,e,r){var n=1===arguments.length?On(this._isDirected,arguments[0]):En(this._isDirected,t,e,r);return this._edgeLabels[n]},Sn.prototype.hasEdge=function(t,e,r){var n=1===arguments.length?On(this._isDirected,arguments[0]):En(this._isDirected,t,e,r);return bn.has(this._edgeLabels,n)},Sn.prototype.removeEdge=function(t,e,r){var n=1===arguments.length?On(this._isDirected,arguments[0]):En(this._isDirected,t,e,r),o=this._edgeObjs[n];return o&&(t=o.v,e=o.w,delete this._edgeLabels[n],delete this._edgeObjs[n],_n(this._preds[e],t),_n(this._sucs[t],e),delete this._in[e][n],delete this._out[t][n],this._edgeCount--),this},Sn.prototype.inEdges=function(t,e){var r=this._in[t];if(r){var n=bn.values(r);return e?bn.filter(n,function(t){return t.v===e}):n}},Sn.prototype.outEdges=function(t,e){var r=this._out[t];if(r){var n=bn.values(r);return e?bn.filter(n,function(t){return t.w===e}):n}},Sn.prototype.nodeEdges=function(t,e){var r=this.inEdges(t,e);if(r)return r.concat(this.outEdges(t,e))};var Pn={Graph:wn,version:"2.1.8"},kn={write:function(t){var e={options:{directed:t.isDirected(),multigraph:t.isMultigraph(),compound:t.isCompound()},nodes:function(t){return bn.map(t.nodes(),function(e){var r=t.node(e),n=t.parent(e),o={v:e};return bn.isUndefined(r)||(o.value=r),bn.isUndefined(n)||(o.parent=n),o})}(t),edges:function(t){return bn.map(t.edges(),function(e){var r=t.edge(e),n={v:e.v,w:e.w};return bn.isUndefined(e.name)||(n.name=e.name),bn.isUndefined(r)||(n.value=r),n})}(t)};return bn.isUndefined(t.graph())||(e.value=bn.clone(t.graph())),e},read:function(t){var e=new wn(t.options).setGraph(t.value);return bn.each(t.nodes,function(t){e.setNode(t.v,t.value),t.parent&&e.setParent(t.v,t.parent)}),bn.each(t.edges,function(t){e.setEdge({v:t.v,w:t.w,name:t.name},t.value)}),e}};var Cn=Tn;function Tn(){this._arr=[],this._keyIndices={}}Tn.prototype.size=function(){return this._arr.length},Tn.prototype.keys=function(){return this._arr.map(function(t){return t.key})},Tn.prototype.has=function(t){return bn.has(this._keyIndices,t)},Tn.prototype.priority=function(t){var e=this._keyIndices[t];if(void 0!==e)return this._arr[e].priority},Tn.prototype.min=function(){if(0===this.size())throw new Error("Queue underflow");return this._arr[0].key},Tn.prototype.add=function(t,e){var r=this._keyIndices;if(t=String(t),!bn.has(r,t)){var n=this._arr,o=n.length;return r[t]=o,n.push({key:t,priority:e}),this._decrease(o),!0}return!1},Tn.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var t=this._arr.pop();return delete this._keyIndices[t.key],this._heapify(0),t.key},Tn.prototype.decrease=function(t,e){var r=this._keyIndices[t];if(e>this._arr[r].priority)throw new Error("New priority is greater than current priority. Key: "+t+" Old: "+this._arr[r].priority+" New: "+e);this._arr[r].priority=e,this._decrease(r)},Tn.prototype._heapify=function(t){var e=this._arr,r=2*t,n=r+1,o=t;r<e.length&&(o=e[r].priority<e[o].priority?r:o,n<e.length&&(o=e[n].priority<e[o].priority?n:o),o!==t&&(this._swap(t,o),this._heapify(o)))},Tn.prototype._decrease=function(t){for(var e,r=this._arr,n=r[t].priority;0!==t&&!(r[e=t>>1].priority<n);)this._swap(t,e),t=e},Tn.prototype._swap=function(t,e){var r=this._arr,n=this._keyIndices,o=r[t],i=r[e];r[t]=i,r[e]=o,n[i.key]=t,n[o.key]=e};var An=function(t,e,r,n){return function(t,e,r,n){var o,i,a={},s=new Cn,u=function(t){var e=t.v!==o?t.v:t.w,n=a[e],u=r(t),l=i.distance+u;if(u<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+t+" Weight: "+u);l<n.distance&&(n.distance=l,n.predecessor=o,s.decrease(e,l))};for(t.nodes().forEach(function(t){var r=t===e?0:Number.POSITIVE_INFINITY;a[t]={distance:r},s.add(t,r)});s.size()>0&&(o=s.removeMin(),(i=a[o]).distance!==Number.POSITIVE_INFINITY);)n(o).forEach(u);return a}(t,String(e),r||Mn,n||function(e){return t.outEdges(e)})},Mn=bn.constant(1),jn=function(t){var e=0,r=[],n={},o=[];function i(a){var s=n[a]={onStack:!0,lowlink:e,index:e++};if(r.push(a),t.successors(a).forEach(function(t){bn.has(n,t)?n[t].onStack&&(s.lowlink=Math.min(s.lowlink,n[t].index)):(i(t),s.lowlink=Math.min(s.lowlink,n[t].lowlink))}),s.lowlink===s.index){var u,l=[];do{u=r.pop(),n[u].onStack=!1,l.push(u)}while(a!==u);o.push(l)}}return t.nodes().forEach(function(t){bn.has(n,t)||i(t)}),o},In=bn.constant(1),Nn=Ln;function Ln(t){var e={},r={},n=[];if(bn.each(t.sinks(),function o(i){if(bn.has(r,i))throw new Rn;bn.has(e,i)||(r[i]=!0,e[i]=!0,bn.each(t.predecessors(i),o),delete r[i],n.push(i))}),bn.size(e)!==t.nodeCount())throw new Rn;return n}function Rn(){}Ln.CycleException=Rn,Rn.prototype=new Error;var Dn=function(t,e,r){bn.isArray(e)||(e=[e]);var n=(t.isDirected()?t.successors:t.neighbors).bind(t),o=[],i={};return bn.each(e,function(e){if(!t.hasNode(e))throw new Error("Graph does not have node: "+e);!function t(e,r,n,o,i,a){bn.has(o,r)||(o[r]=!0,n||a.push(r),bn.each(i(r),function(r){t(e,r,n,o,i,a)}),n&&a.push(r))}(t,e,"post"===r,i,n,o)}),o};var Bn,Fn={Graph:Pn.Graph,json:kn,alg:{components:function(t){var e,r={},n=[];function o(n){bn.has(r,n)||(r[n]=!0,e.push(n),bn.each(t.successors(n),o),bn.each(t.predecessors(n),o))}return bn.each(t.nodes(),function(t){e=[],o(t),e.length&&n.push(e)}),n},dijkstra:An,dijkstraAll:function(t,e,r){return bn.transform(t.nodes(),function(n,o){n[o]=An(t,o,e,r)},{})},findCycles:function(t){return bn.filter(jn(t),function(e){return e.length>1||1===e.length&&t.hasEdge(e[0],e[0])})},floydWarshall:function(t,e,r){return function(t,e,r){var n={},o=t.nodes();return o.forEach(function(t){n[t]={},n[t][t]={distance:0},o.forEach(function(e){t!==e&&(n[t][e]={distance:Number.POSITIVE_INFINITY})}),r(t).forEach(function(r){var o=r.v===t?r.w:r.v,i=e(r);n[t][o]={distance:i,predecessor:t}})}),o.forEach(function(t){var e=n[t];o.forEach(function(r){var i=n[r];o.forEach(function(r){var n=i[t],o=e[r],a=i[r],s=n.distance+o.distance;s<a.distance&&(a.distance=s,a.predecessor=o.predecessor)})})}),n}(t,e||In,r||function(e){return t.outEdges(e)})},isAcyclic:function(t){try{Nn(t)}catch(t){if(t instanceof Nn.CycleException)return!1;throw t}return!0},postorder:function(t,e){return Dn(t,e,"post")},preorder:function(t,e){return Dn(t,e,"pre")},prim:function(t,e){var r,n=new wn,o={},i=new Cn;function a(t){var n=t.v===r?t.w:t.v,a=i.priority(n);if(void 0!==a){var s=e(t);s<a&&(o[n]=r,i.decrease(n,s))}}if(0===t.nodeCount())return n;bn.each(t.nodes(),function(t){i.add(t,Number.POSITIVE_INFINITY),n.setNode(t)}),i.decrease(t.nodes()[0],0);for(var s=!1;i.size()>0;){if(r=i.removeMin(),bn.has(o,r))n.setEdge(r,o[r]);else{if(s)throw new Error("Input graph is not connected: "+t);s=!0}t.nodeEdges(r).forEach(a)}return n},tarjan:jn,topsort:Nn},version:Pn.version};try{Bn=Fn}catch(v){}Bn||(Bn=window.graphlib);var Gn,Un=Bn,zn=function(t,e,r){if(!H(r))return!1;var n=y(e);return!!("number"==n?qt(r)&&Mt(e,r.length):"string"==n&&e in r)&&k(r[e],t)},Vn=Object.prototype,Hn=Vn.hasOwnProperty,Wn=cn(function(t,e){t=Object(t);var r=-1,n=e.length,o=n>2?e[2]:void 0;for(o&&zn(e[0],e[1],o)&&(n=1);++r<n;)for(var i=e[r],a=Kt(i),s=-1,u=a.length;++s<u;){var l=a[s],c=t[l];(void 0===c||k(c,Vn[l])&&!Hn.call(t,l))&&(t[l]=i[l])}return t}),qn=/^\s+|\s+$/g,Yn=/^[-+]0x[0-9a-f]+$/i,Xn=/^0b[01]+$/i,Jn=/^0o[0-7]+$/i,Kn=parseInt,Qn=function(t){return t?1/0===(t=function(t){if("number"==typeof t)return t;if(ur(t))return NaN;if(H(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=H(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(qn,"");var r=Xn.test(t);return r||Jn.test(t)?Kn(t.slice(2),r?2:8):Yn.test(t)?NaN:+t}(t))||-1/0===t?1.7976931348623157e308*(t<0?-1:1):t==t?t:0:0===t?t:0},Zn=Math.max,$n=function(t){return function(e,r,n){var o=Object(e);if(!qt(e)){var i=Mr(r);e=Yt(e),r=function(t){return i(o[t],t,o)}}var a=t(e,r,n);return a>-1?o[i?e[a]:a]:void 0}}(function(t,e,r){var n=null==t?0:t.length;if(!n)return-1;var o=null==r?0:function(t){var e=Qn(t),r=e%1;return e==e?r?e-r:e:0}(r);return o<0&&(o=Zn(n+o,0)),fn(t,Mr(e),o)}),to=function(t){return null!=t&&t.length?nn(t,1):[]},eo=function(t,e,r){for(var n=-1,o=t.length;++n<o;){var i=t[n],a=e(i);if(null!=a&&(void 0===s?a==a&&!ur(a):r(a,s)))var s=a,u=i}return u},ro=function(t,e){return t>e},no=function(t,e,r){(void 0!==r&&!k(t[e],r)||void 0===r&&!(e in t))&&gt(t,e,r)},oo=Function.prototype,io=Object.prototype,ao=oo.toString,so=io.hasOwnProperty,uo=ao.call(Object),lo=function(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]},co=function(t,e,r,n,o,i,a){var s=lo(t,r),u=lo(e,r),l=a.get(u);if(l)no(t,r,l);else{var c=i?i(s,u,r+"",t,e,a):void 0,f=void 0===c;if(f){var h=kt(u),p=!h&&Tt(u),d=!h&&!p&&Dt(u);c=u,h||p||d?kt(s)?c=s:vn(s)?c=Zt(s):p?(f=!1,c=Qt(u,!0)):d?(f=!1,c=Pe(u,!0)):c=[]:function(t){if(!St(t)||"[object Object]"!=V(t))return!1;var e=ie(t);if(null===e)return!0;var r=so.call(e,"constructor")&&e.constructor;return"function"==typeof r&&r instanceof r&&ao.call(r)==uo}(u)||Pt(u)?(c=s,Pt(s)?c=function(t){return wt(t,Kt(t))}(s):H(s)&&!W(s)||(c=Ae(u))):f=!1}f&&(a.set(u,c),o(c,u,n,i,a),a.delete(u)),no(t,r,c)}},fo=function(t){return cn(function(e,r){var n=-1,o=r.length,i=o>1?r[o-1]:void 0,a=o>2?r[2]:void 0;for(i=t.length>3&&"function"==typeof i?(o--,i):void 0,a&&zn(r[0],r[1],a)&&(i=o<3?void 0:i,o=1),e=Object(e);++n<o;){var s=r[n];s&&t(e,s,n)}return e})}(function(t,e,r){!function t(e,r,n,o,i){e!==r&&Be(r,function(a,s){if(i||(i=new dt),H(a))co(e,r,s,n,t,o,i);else{var u=o?o(lo(e,s),a,s+"",e,r,i):void 0;void 0===u&&(u=a),no(e,s,u)}},Kt)}(t,e,r)}),ho=function(t,e){return t<e},po=function(t,e,r,n){if(!H(t))return t;for(var o=-1,i=(e=xr(e,t)).length,a=i-1,s=t;null!=s&&++o<i;){var u=_r(e[o]),l=r;if("__proto__"===u||"constructor"===u||"prototype"===u)return t;if(o!=a){var c=s[u];void 0===(l=n?n(c,u,s):void 0)&&(l=H(c)?c:Mt(e[o+1])?[]:{})}bt(s,u,l),s=s[u]}return t},yo=function(t,e){return function(t,e,r){for(var n=-1,o=e.length,i={};++n<o;){var a=e[n],s=Er(t,a);r(s,a)&&po(i,xr(a,t),s)}return i}(t,e,function(e,r){return kr(t,r)})},vo=function(t){return ln(an(t,void 0,to),t+"")}(function(t,e){return null==t?{}:yo(t,e)}),go=Math.ceil,mo=Math.max,bo=function(t,e,r){return r&&"number"!=typeof r&&zn(t,e,r)&&(e=r=void 0),t=Qn(t),void 0===e?(e=t,t=0):e=Qn(e),function(t,e,r,n){for(var o=-1,i=mo(go((e-t)/(r||1)),0),a=Array(i);i--;)a[n?i:++o]=t,t+=r;return a}(t,e,r=void 0===r?t<e?1:-1:Qn(r),void 0)},wo=function(t,e){if(t!==e){var r=void 0!==t,n=null===t,o=t==t,i=ur(t),a=void 0!==e,s=null===e,u=e==e,l=ur(e);if(!s&&!l&&!i&&t>e||i&&a&&u&&!s&&!l||n&&a&&u||!r&&u||!o)return 1;if(!n&&!i&&!l&&t<e||l&&r&&o&&!n&&!i||s&&r&&o||!a&&o||!u)return-1}return 0},So=function(t,e,r){e=e.length?mr(e,function(t){return kt(t)?function(e){return Er(e,1===t.length?t[0]:t)}:t}):[Ue];var n=-1;return e=mr(e,Nt(Mr)),function(t,e){var r=t.length;for(t.sort(e);r--;)t[r]=t[r].value;return t}(Br(t,function(t,r,o){return{criteria:mr(e,function(e){return e(t)}),index:++n,value:t}}),function(t,e){return function(t,e,r){for(var n=-1,o=t.criteria,i=e.criteria,a=o.length,s=r.length;++n<a;){var u=wo(o[n],i[n]);if(u)return n>=s?u:u*("desc"==r[n]?-1:1)}return t.index-e.index}(t,e,r)})},xo=cn(function(t,e){if(null==t)return[];var r=e.length;return r>1&&zn(t,e[0],e[1])?e=[]:r>2&&zn(e[0],e[1],e[2])&&(e=[e[0]]),So(t,nn(e,1),[])}),_o=0;try{Gn={cloneDeep:function(t){return Re(t,5)},constant:De,defaults:Wn,each:He,filter:jr,find:$n,flatten:to,forEach:Ve,forIn:function(t,e){return null==t?t:Be(t,ze(e),Kt)},has:Lr,isUndefined:Dr,last:function(t){var e=null==t?0:t.length;return e?t[e-1]:void 0},map:Fr,mapValues:function(t,e){var r={};return e=Mr(e),Fe(t,function(t,n,o){gt(r,n,e(t,n,o))}),r},max:function(t){return t&&t.length?eo(t,Ue,ro):void 0},merge:fo,min:function(t){return t&&t.length?eo(t,Ue,ho):void 0},minBy:function(t,e){return t&&t.length?eo(t,Mr(e),ho):void 0},now:function(){return L.Date.now()},pick:vo,range:bo,reduce:zr,sortBy:xo,uniqueId:function(t){var e=++_o;return Sr(t)+e},values:mn,zipObject:function(t,e){return function(t,e,r){for(var n=-1,o=t.length,i=e.length,a={};++n<o;){var s=n<i?e[n]:void 0;r(a,t[n],s)}return a}(t||[],e||[],bt)}}}catch(v){}Gn||(Gn=window._);var Eo=Gn,Oo=Po;function Po(){var t={};t._next=t._prev=t,this._sentinel=t}function ko(t){t._prev._next=t._next,t._next._prev=t._prev,delete t._next,delete t._prev}function Co(t,e){if("_next"!==t&&"_prev"!==t)return e}Po.prototype.dequeue=function(){var t=this._sentinel,e=t._prev;if(e!==t)return ko(e),e},Po.prototype.enqueue=function(t){var e=this._sentinel;t._prev&&t._next&&ko(t),t._next=e._next,e._next._prev=t,e._next=t,t._prev=e},Po.prototype.toString=function(){for(var t=[],e=this._sentinel,r=e._prev;r!==e;)t.push(JSON.stringify(r,Co)),r=r._prev;return"["+t.join(", ")+"]"};var To=Un.Graph,Ao=Eo.constant(1);function Mo(t,e,r,n,o){var i=o?[]:void 0;return Eo.forEach(t.inEdges(n.v),function(n){var a=t.edge(n),s=t.node(n.v);o&&i.push({v:n.v,w:n.w}),s.out-=a,jo(e,r,s)}),Eo.forEach(t.outEdges(n.v),function(n){var o=t.edge(n),i=n.w,a=t.node(i);a.in-=o,jo(e,r,a)}),t.removeNode(n.v),i}function jo(t,e,r){r.out?r.in?t[r.out-r.in+e].enqueue(r):t[t.length-1].enqueue(r):t[0].enqueue(r)}var Io=function(t){var e="greedy"===t.graph().acyclicer?function(t,e){if(t.nodeCount()<=1)return[];var r=function(t,e){var r=new To,n=0,o=0;Eo.forEach(t.nodes(),function(t){r.setNode(t,{v:t,in:0,out:0})}),Eo.forEach(t.edges(),function(t){var i=r.edge(t.v,t.w)||0,a=e(t),s=i+a;r.setEdge(t.v,t.w,s),o=Math.max(o,r.node(t.v).out+=a),n=Math.max(n,r.node(t.w).in+=a)});var i=Eo.range(o+n+3).map(function(){return new Oo}),a=n+1;return Eo.forEach(r.nodes(),function(t){jo(i,a,r.node(t))}),{graph:r,buckets:i,zeroIdx:a}}(t,e||Ao),n=function(t,e,r){for(var n,o=[],i=e[e.length-1],a=e[0];t.nodeCount();){for(;n=a.dequeue();)Mo(t,e,r,n);for(;n=i.dequeue();)Mo(t,e,r,n);if(t.nodeCount())for(var s=e.length-2;s>0;--s)if(n=e[s].dequeue()){o=o.concat(Mo(t,e,r,n,!0));break}}return o}(r.graph,r.buckets,r.zeroIdx);return Eo.flatten(Eo.map(n,function(e){return t.outEdges(e.v,e.w)}),!0)}(t,function(t){return function(e){return t.edge(e).weight}}(t)):function(t){var e=[],r={},n={};return Eo.forEach(t.nodes(),function o(i){Eo.has(n,i)||(n[i]=!0,r[i]=!0,Eo.forEach(t.outEdges(i),function(t){Eo.has(r,t.w)?e.push(t):o(t.w)}),delete r[i])}),e}(t);Eo.forEach(e,function(e){var r=t.edge(e);t.removeEdge(e),r.forwardName=e.name,r.reversed=!0,t.setEdge(e.w,e.v,r,Eo.uniqueId("rev"))})},No=function(t){Eo.forEach(t.edges(),function(e){var r=t.edge(e);if(r.reversed){t.removeEdge(e);var n=r.forwardName;delete r.reversed,delete r.forwardName,t.setEdge(e.w,e.v,r,n)}})},Lo=Un.Graph,Ro={addDummyNode:Do,simplify:function(t){var e=(new Lo).setGraph(t.graph());return Eo.forEach(t.nodes(),function(r){e.setNode(r,t.node(r))}),Eo.forEach(t.edges(),function(r){var n=e.edge(r.v,r.w)||{weight:0,minlen:1},o=t.edge(r);e.setEdge(r.v,r.w,{weight:n.weight+o.weight,minlen:Math.max(n.minlen,o.minlen)})}),e},asNonCompoundGraph:function(t){var e=new Lo({multigraph:t.isMultigraph()}).setGraph(t.graph());return Eo.forEach(t.nodes(),function(r){t.children(r).length||e.setNode(r,t.node(r))}),Eo.forEach(t.edges(),function(r){e.setEdge(r,t.edge(r))}),e},successorWeights:function(t){var e=Eo.map(t.nodes(),function(e){var r={};return Eo.forEach(t.outEdges(e),function(e){r[e.w]=(r[e.w]||0)+t.edge(e).weight}),r});return Eo.zipObject(t.nodes(),e)},predecessorWeights:function(t){var e=Eo.map(t.nodes(),function(e){var r={};return Eo.forEach(t.inEdges(e),function(e){r[e.v]=(r[e.v]||0)+t.edge(e).weight}),r});return Eo.zipObject(t.nodes(),e)},intersectRect:function(t,e){var r,n,o=t.x,i=t.y,a=e.x-o,s=e.y-i,u=t.width/2,l=t.height/2;if(!a&&!s)throw new Error("Not possible to find intersection inside of the rectangle");return Math.abs(s)*u>Math.abs(a)*l?(s<0&&(l=-l),r=l*a/s,n=l):(a<0&&(u=-u),r=u,n=u*s/a),{x:o+r,y:i+n}},buildLayerMatrix:function(t){var e=Eo.map(Eo.range(Bo(t)+1),function(){return[]});return Eo.forEach(t.nodes(),function(r){var n=t.node(r),o=n.rank;Eo.isUndefined(o)||(e[o][n.order]=r)}),e},normalizeRanks:function(t){var e=Eo.min(Eo.map(t.nodes(),function(e){return t.node(e).rank}));Eo.forEach(t.nodes(),function(r){var n=t.node(r);Eo.has(n,"rank")&&(n.rank-=e)})},removeEmptyRanks:function(t){var e=Eo.min(Eo.map(t.nodes(),function(e){return t.node(e).rank})),r=[];Eo.forEach(t.nodes(),function(n){var o=t.node(n).rank-e;r[o]||(r[o]=[]),r[o].push(n)});var n=0,o=t.graph().nodeRankFactor;Eo.forEach(r,function(e,r){Eo.isUndefined(e)&&r%o!=0?--n:n&&Eo.forEach(e,function(e){t.node(e).rank+=n})})},addBorderNode:function(t,e,r,n){var o={width:0,height:0};return arguments.length>=4&&(o.rank=r,o.order=n),Do(t,"border",o,e)},maxRank:Bo,partition:function(t,e){var r={lhs:[],rhs:[]};return Eo.forEach(t,function(t){e(t)?r.lhs.push(t):r.rhs.push(t)}),r},time:function(t,e){var r=Eo.now();try{return e()}finally{console.log(t+" time: "+(Eo.now()-r)+"ms")}},notime:function(t,e){return e()}};function Do(t,e,r,n){var o;do{o=Eo.uniqueId(n)}while(t.hasNode(o));return r.dummy=e,t.setNode(o,r),o}function Bo(t){return Eo.max(Eo.map(t.nodes(),function(e){var r=t.node(e).rank;if(!Eo.isUndefined(r))return r}))}var Fo=function(t){t.graph().dummyChains=[],Eo.forEach(t.edges(),function(e){!function(t,e){var r,n,o,i=e.v,a=t.node(i).rank,s=e.w,u=t.node(s).rank,l=e.name,c=t.edge(e),f=c.labelRank;if(u!==a+1){for(t.removeEdge(e),o=0,++a;a<u;++o,++a)c.points=[],n={width:0,height:0,edgeLabel:c,edgeObj:e,rank:a},r=Ro.addDummyNode(t,"edge",n,"_d"),a===f&&(n.width=c.width,n.height=c.height,n.dummy="edge-label",n.labelpos=c.labelpos),t.setEdge(i,r,{weight:c.weight},l),0===o&&t.graph().dummyChains.push(r),i=r;t.setEdge(i,s,{weight:c.weight},l)}}(t,e)})},Go=function(t){Eo.forEach(t.graph().dummyChains,function(e){var r,n=t.node(e),o=n.edgeLabel;for(t.setEdge(n.edgeObj,o);n.dummy;)r=t.successors(e)[0],t.removeNode(e),o.points.push({x:n.x,y:n.y}),"edge-label"===n.dummy&&(o.x=n.x,o.y=n.y,o.width=n.width,o.height=n.height),e=r,n=t.node(e)})},Uo=function(t){var e={};Eo.forEach(t.sources(),function r(n){var o=t.node(n);if(Eo.has(e,n))return o.rank;e[n]=!0;var i=Eo.min(Eo.map(t.outEdges(n),function(e){return r(e.w)-t.edge(e).minlen}));return i!==Number.POSITIVE_INFINITY&&null!=i||(i=0),o.rank=i})},zo=function(t,e){return t.node(e.w).rank-t.node(e.v).rank-t.edge(e).minlen},Vo=Un.Graph,Ho=zo,Wo=function(t){var e,r=new Vo({directed:!1}),n=t.nodes()[0],o=t.nodeCount();for(r.setNode(n,{});qo(r,t)<o;)e=Yo(r,t),Xo(r,t,r.hasNode(e.v)?Ho(t,e):-Ho(t,e));return r};function qo(t,e){return Eo.forEach(t.nodes(),function r(n){Eo.forEach(e.nodeEdges(n),function(o){var i=o.v,a=n===i?o.w:i;t.hasNode(a)||Ho(e,o)||(t.setNode(a,{}),t.setEdge(n,a,{}),r(a))})}),t.nodeCount()}function Yo(t,e){return Eo.minBy(e.edges(),function(r){if(t.hasNode(r.v)!==t.hasNode(r.w))return Ho(e,r)})}function Xo(t,e,r){Eo.forEach(t.nodes(),function(t){e.node(t).rank+=r})}var Jo=zo,Ko=Uo,Qo=Un.alg.preorder,Zo=Un.alg.postorder,$o=Ro.simplify,ti=ei;function ei(t){t=$o(t),Ko(t);var e,r=Wo(t);for(oi(r),ri(r,t);e=ii(r);)si(r,t,e,ai(r,t,e))}function ri(t,e){var r=Zo(t,t.nodes());r=r.slice(0,r.length-1),Eo.forEach(r,function(r){!function(t,e,r){var n=t.node(r).parent;t.edge(r,n).cutvalue=ni(t,e,r)}(t,e,r)})}function ni(t,e,r){var n=t.node(r).parent,o=!0,i=e.edge(r,n),a=0;return i||(o=!1,i=e.edge(n,r)),a=i.weight,Eo.forEach(e.nodeEdges(r),function(i){var s,u,l=i.v===r,c=l?i.w:i.v;if(c!==n){var f=l===o,h=e.edge(i).weight;if(a+=f?h:-h,s=r,u=c,t.hasEdge(s,u)){var p=t.edge(r,c).cutvalue;a+=f?-p:p}}}),a}function oi(t,e){arguments.length<2&&(e=t.nodes()[0]),function t(e,r,n,o,i){var a=n,s=e.node(o);return r[o]=!0,Eo.forEach(e.neighbors(o),function(i){Eo.has(r,i)||(n=t(e,r,n,i,o))}),s.low=a,s.lim=n++,i?s.parent=i:delete s.parent,n}(t,{},1,e)}function ii(t){return Eo.find(t.edges(),function(e){return t.edge(e).cutvalue<0})}function ai(t,e,r){var n=r.v,o=r.w;e.hasEdge(n,o)||(n=r.w,o=r.v);var i=t.node(n),a=t.node(o),s=i,u=!1;i.lim>a.lim&&(s=a,u=!0);var l=Eo.filter(e.edges(),function(e){return u===ui(t,t.node(e.v),s)&&u!==ui(t,t.node(e.w),s)});return Eo.minBy(l,function(t){return Jo(e,t)})}function si(t,e,r,n){var o=r.v,i=r.w;t.removeEdge(o,i),t.setEdge(n.v,n.w,{}),oi(t),ri(t,e),function(t,e){var r=Eo.find(t.nodes(),function(t){return!e.node(t).parent}),n=Qo(t,r);n=n.slice(1),Eo.forEach(n,function(r){var n=t.node(r).parent,o=e.edge(r,n),i=!1;o||(o=e.edge(n,r),i=!0),e.node(r).rank=e.node(n).rank+(i?o.minlen:-o.minlen)})}(t,e)}function ui(t,e,r){return r.low<=e.lim&&e.lim<=r.lim}ei.initLowLimValues=oi,ei.initCutValues=ri,ei.calcCutValue=ni,ei.leaveEdge=ii,ei.enterEdge=ai,ei.exchangeEdges=si;var li=Uo,ci=li;function fi(t){ti(t)}var hi=function(t){var e=Ro.addDummyNode(t,"root",{},"_root"),r=function(t){var e={};function r(n,o){var i=t.children(n);i&&i.length&&Eo.forEach(i,function(t){r(t,o+1)}),e[n]=o}return Eo.forEach(t.children(),function(t){r(t,1)}),e}(t),n=Eo.max(Eo.values(r))-1,o=2*n+1;t.graph().nestingRoot=e,Eo.forEach(t.edges(),function(e){t.edge(e).minlen*=o});var i=function(t){return Eo.reduce(t.edges(),function(e,r){return e+t.edge(r).weight},0)}(t)+1;Eo.forEach(t.children(),function(a){!function t(e,r,n,o,i,a,s){var u=e.children(s);if(u.length){var l=Ro.addBorderNode(e,"_bt"),c=Ro.addBorderNode(e,"_bb"),f=e.node(s);e.setParent(l,s),f.borderTop=l,e.setParent(c,s),f.borderBottom=c,Eo.forEach(u,function(u){t(e,r,n,o,i,a,u);var f=e.node(u),h=f.borderTop?f.borderTop:u,p=f.borderBottom?f.borderBottom:u,d=f.borderTop?o:2*o,y=h!==p?1:i-a[s]+1;e.setEdge(l,h,{weight:d,minlen:y,nestingEdge:!0}),e.setEdge(p,c,{weight:d,minlen:y,nestingEdge:!0})}),e.parent(s)||e.setEdge(r,l,{weight:0,minlen:i+a[s]})}else s!==r&&e.setEdge(r,s,{weight:0,minlen:n})}(t,e,o,i,n,r,a)}),t.graph().nodeRankFactor=o},pi=function(t){var e=t.graph();t.removeNode(e.nestingRoot),delete e.nestingRoot,Eo.forEach(t.edges(),function(e){t.edge(e).nestingEdge&&t.removeEdge(e)})};function di(t,e,r,n,o,i){var a={width:0,height:0,rank:i,borderType:e},s=o[e][i-1],u=Ro.addDummyNode(t,"border",a,r);o[e][i]=u,t.setParent(u,n),s&&t.setEdge(s,u,{weight:1})}var yi=function(t){var e=t.graph().rankdir.toLowerCase();"lr"!==e&&"rl"!==e||gi(t)},vi=function(t){var e=t.graph().rankdir.toLowerCase();"bt"!==e&&"rl"!==e||function(t){Eo.forEach(t.nodes(),function(e){bi(t.node(e))}),Eo.forEach(t.edges(),function(e){var r=t.edge(e);Eo.forEach(r.points,bi),Eo.has(r,"y")&&bi(r)})}(t),"lr"!==e&&"rl"!==e||(function(t){Eo.forEach(t.nodes(),function(e){wi(t.node(e))}),Eo.forEach(t.edges(),function(e){var r=t.edge(e);Eo.forEach(r.points,wi),Eo.has(r,"x")&&wi(r)})}(t),gi(t))};function gi(t){Eo.forEach(t.nodes(),function(e){mi(t.node(e))}),Eo.forEach(t.edges(),function(e){mi(t.edge(e))})}function mi(t){var e=t.width;t.width=t.height,t.height=e}function bi(t){t.y=-t.y}function wi(t){var e=t.x;t.x=t.y,t.y=e}var Si=function(t,e){for(var r=0,n=1;n<e.length;++n)r+=xi(t,e[n-1],e[n]);return r};function xi(t,e,r){for(var n=Eo.zipObject(r,Eo.map(r,function(t,e){return e})),o=Eo.flatten(Eo.map(e,function(e){return Eo.sortBy(Eo.map(t.outEdges(e),function(e){return{pos:n[e.w],weight:t.edge(e).weight}}),"pos")}),!0),i=1;i<r.length;)i<<=1;var a=2*i-1;i-=1;var s=Eo.map(new Array(a),function(){return 0}),u=0;return Eo.forEach(o.forEach(function(t){var e=t.pos+i;s[e]+=t.weight;for(var r=0;e>0;)e%2&&(r+=s[e+1]),s[e=e-1>>1]+=t.weight;u+=t.weight*r})),u}function _i(t,e,r){for(var n;e.length&&(n=Eo.last(e)).i<=r;)e.pop(),t.push(n.vs),r++;return r}var Ei=function t(e,r,n,o){var i=e.children(r),a=e.node(r),s=a?a.borderLeft:void 0,u=a?a.borderRight:void 0,l={};s&&(i=Eo.filter(i,function(t){return t!==s&&t!==u}));var c=function(t,e){return Eo.map(e,function(e){var r=t.inEdges(e);if(r.length){var n=Eo.reduce(r,function(e,r){var n=t.edge(r),o=t.node(r.v);return{sum:e.sum+n.weight*o.order,weight:e.weight+n.weight}},{sum:0,weight:0});return{v:e,barycenter:n.sum/n.weight,weight:n.weight}}return{v:e}})}(e,i);Eo.forEach(c,function(r){if(e.children(r.v).length){var i=t(e,r.v,n,o);l[r.v]=i,Eo.has(i,"barycenter")&&(a=r,s=i,Eo.isUndefined(a.barycenter)?(a.barycenter=s.barycenter,a.weight=s.weight):(a.barycenter=(a.barycenter*a.weight+s.barycenter*s.weight)/(a.weight+s.weight),a.weight+=s.weight))}var a,s});var f=function(t,e){var r={};return Eo.forEach(t,function(t,e){var n=r[t.v]={indegree:0,in:[],out:[],vs:[t.v],i:e};Eo.isUndefined(t.barycenter)||(n.barycenter=t.barycenter,n.weight=t.weight)}),Eo.forEach(e.edges(),function(t){var e=r[t.v],n=r[t.w];Eo.isUndefined(e)||Eo.isUndefined(n)||(n.indegree++,e.out.push(r[t.w]))}),function(t){var e=[];function r(t){return function(e){e.merged||(Eo.isUndefined(e.barycenter)||Eo.isUndefined(t.barycenter)||e.barycenter>=t.barycenter)&&function(t,e){var r=0,n=0;t.weight&&(r+=t.barycenter*t.weight,n+=t.weight),e.weight&&(r+=e.barycenter*e.weight,n+=e.weight),t.vs=e.vs.concat(t.vs),t.barycenter=r/n,t.weight=n,t.i=Math.min(e.i,t.i),e.merged=!0}(t,e)}}function n(e){return function(r){r.in.push(e),0==--r.indegree&&t.push(r)}}for(;t.length;){var o=t.pop();e.push(o),Eo.forEach(o.in.reverse(),r(o)),Eo.forEach(o.out,n(o))}return Eo.map(Eo.filter(e,function(t){return!t.merged}),function(t){return Eo.pick(t,["vs","i","barycenter","weight"])})}(Eo.filter(r,function(t){return!t.indegree}))}(c,n);!function(t,e){Eo.forEach(t,function(t){t.vs=Eo.flatten(t.vs.map(function(t){return e[t]?e[t].vs:t}),!0)})}(f,l);var h=function(t,e){var r,n=Ro.partition(t,function(t){return Eo.has(t,"barycenter")}),o=n.lhs,i=Eo.sortBy(n.rhs,function(t){return-t.i}),a=[],s=0,u=0,l=0;o.sort((r=!!e,function(t,e){return t.barycenter<e.barycenter?-1:t.barycenter>e.barycenter?1:r?e.i-t.i:t.i-e.i})),l=_i(a,i,l),Eo.forEach(o,function(t){l+=t.vs.length,a.push(t.vs),s+=t.barycenter*t.weight,u+=t.weight,l=_i(a,i,l)});var c={vs:Eo.flatten(a,!0)};return u&&(c.barycenter=s/u,c.weight=u),c}(f,o);if(s&&(h.vs=Eo.flatten([s,h.vs,u],!0),e.predecessors(s).length)){var p=e.node(e.predecessors(s)[0]),d=e.node(e.predecessors(u)[0]);Eo.has(h,"barycenter")||(h.barycenter=0,h.weight=0),h.barycenter=(h.barycenter*h.weight+p.order+d.order)/(h.weight+2),h.weight+=2}return h},Oi=Un.Graph,Pi=function(t,e,r){var n=function(t){for(var e;t.hasNode(e=Eo.uniqueId("_root")););return e}(t),o=new Oi({compound:!0}).setGraph({root:n}).setDefaultNodeLabel(function(e){return t.node(e)});return Eo.forEach(t.nodes(),function(i){var a=t.node(i),s=t.parent(i);(a.rank===e||a.minRank<=e&&e<=a.maxRank)&&(o.setNode(i),o.setParent(i,s||n),Eo.forEach(t[r](i),function(e){var r=e.v===i?e.w:e.v,n=o.edge(r,i),a=Eo.isUndefined(n)?0:n.weight;o.setEdge(r,i,{weight:t.edge(e).weight+a})}),Eo.has(a,"minRank")&&o.setNode(i,{borderLeft:a.borderLeft[e],borderRight:a.borderRight[e]}))}),o},ki=function(t,e,r){var n,o={};Eo.forEach(r,function(r){for(var i,a,s=t.parent(r);s;){if((i=t.parent(s))?(a=o[i],o[i]=s):(a=n,n=s),a&&a!==s)return void e.setEdge(a,s);s=i}})},Ci=Un.Graph,Ti=function(t){var e=Ro.maxRank(t),r=Ai(t,Eo.range(1,e+1),"inEdges"),n=Ai(t,Eo.range(e-1,-1,-1),"outEdges"),o=function(t){var e={},r=Eo.filter(t.nodes(),function(e){return!t.children(e).length}),n=Eo.max(Eo.map(r,function(e){return t.node(e).rank})),o=Eo.map(Eo.range(n+1),function(){return[]});var i=Eo.sortBy(r,function(e){return t.node(e).rank});return Eo.forEach(i,function r(n){if(!Eo.has(e,n)){e[n]=!0;var i=t.node(n);o[i.rank].push(n),Eo.forEach(t.successors(n),r)}}),o}(t);ji(t,o);for(var i,a=Number.POSITIVE_INFINITY,s=0,u=0;u<4;++s,++u){Mi(s%2?r:n,s%4>=2),o=Ro.buildLayerMatrix(t);var l=Si(t,o);l<a&&(u=0,i=Eo.cloneDeep(o),a=l)}ji(t,i)};function Ai(t,e,r){return Eo.map(e,function(e){return Pi(t,e,r)})}function Mi(t,e){var r=new Ci;Eo.forEach(t,function(t){var n=t.graph().root,o=Ei(t,n,r,e);Eo.forEach(o.vs,function(e,r){t.node(e).order=r}),ki(t,r,o.vs)})}function ji(t,e){Eo.forEach(e,function(e){Eo.forEach(e,function(e,r){t.node(e).order=r})})}var Ii=Un.Graph;function Ni(t,e,r){if(e>r){var n=e;e=r,r=n}var o=t[e];o||(t[e]=o={}),o[r]=!0}function Li(t,e,r){if(e>r){var n=e;e=r,r=n}return Eo.has(t[e],r)}var Ri=function(t){var e,r=Ro.buildLayerMatrix(t),n=Eo.merge(function(t,e){var r={};return Eo.reduce(e,function(e,n){var o=0,i=0,a=e.length,s=Eo.last(n);return Eo.forEach(n,function(e,u){var l=function(t,e){if(t.node(e).dummy)return Eo.find(t.predecessors(e),function(e){return t.node(e).dummy})}(t,e),c=l?t.node(l).order:a;(l||e===s)&&(Eo.forEach(n.slice(i,u+1),function(e){Eo.forEach(t.predecessors(e),function(n){var i=t.node(n),a=i.order;!(a<o||c<a)||i.dummy&&t.node(e).dummy||Ni(r,n,e)})}),i=u+1,o=c)}),n}),r}(t,r),function(t,e){var r={};function n(e,n,o,i,a){var s;Eo.forEach(Eo.range(n,o),function(n){s=e[n],t.node(s).dummy&&Eo.forEach(t.predecessors(s),function(e){var n=t.node(e);n.dummy&&(n.order<i||n.order>a)&&Ni(r,e,s)})})}return Eo.reduce(e,function(e,r){var o,i=-1,a=0;return Eo.forEach(r,function(s,u){if("border"===t.node(s).dummy){var l=t.predecessors(s);l.length&&(o=t.node(l[0]).order,n(r,a,u,i,o),a=u,i=o)}n(r,a,r.length,o,e.length)}),r}),r}(t,r)),o={};Eo.forEach(["u","d"],function(i){e="u"===i?r:Eo.values(r).reverse(),Eo.forEach(["l","r"],function(r){"r"===r&&(e=Eo.map(e,function(t){return Eo.values(t).reverse()}));var a=("u"===i?t.predecessors:t.successors).bind(t),s=function(t,e,r,n){var o={},i={},a={};return Eo.forEach(e,function(t){Eo.forEach(t,function(t,e){o[t]=t,i[t]=t,a[t]=e})}),Eo.forEach(e,function(t){var e=-1;Eo.forEach(t,function(t){var s=n(t);if(s.length)for(var u=((s=Eo.sortBy(s,function(t){return a[t]})).length-1)/2,l=Math.floor(u),c=Math.ceil(u);l<=c;++l){var f=s[l];i[t]===t&&e<a[f]&&!Li(r,t,f)&&(i[f]=t,i[t]=o[t]=o[f],e=a[f])}})}),{root:o,align:i}}(0,e,n,a),u=function(t,e,r,n,o){var i={},a=function(t,e,r,n){var o=new Ii,i=t.graph(),a=function(t,e,r){return function(n,o,i){var a,s=n.node(o),u=n.node(i),l=0;if(l+=s.width/2,Eo.has(s,"labelpos"))switch(s.labelpos.toLowerCase()){case"l":a=-s.width/2;break;case"r":a=s.width/2}if(a&&(l+=r?a:-a),a=0,l+=(s.dummy?e:t)/2,l+=(u.dummy?e:t)/2,l+=u.width/2,Eo.has(u,"labelpos"))switch(u.labelpos.toLowerCase()){case"l":a=u.width/2;break;case"r":a=-u.width/2}return a&&(l+=r?a:-a),a=0,l}}(i.nodesep,i.edgesep,n);return Eo.forEach(e,function(e){var n;Eo.forEach(e,function(e){var i=r[e];if(o.setNode(i),n){var s=r[n],u=o.edge(s,i);o.setEdge(s,i,Math.max(a(t,e,n),u||0))}n=e})}),o}(t,e,r,o),s=o?"borderLeft":"borderRight";function u(t,e){for(var r=a.nodes(),n=r.pop(),o={};n;)o[n]?t(n):(o[n]=!0,r.push(n),r=r.concat(e(n))),n=r.pop()}return u(function(t){i[t]=a.inEdges(t).reduce(function(t,e){return Math.max(t,i[e.v]+a.edge(e))},0)},a.predecessors.bind(a)),u(function(e){var r=a.outEdges(e).reduce(function(t,e){return Math.min(t,i[e.w]-a.edge(e))},Number.POSITIVE_INFINITY),n=t.node(e);r!==Number.POSITIVE_INFINITY&&n.borderType!==s&&(i[e]=Math.max(i[e],r))},a.successors.bind(a)),Eo.forEach(n,function(t){i[t]=i[r[t]]}),i}(t,e,s.root,s.align,"r"===r);"r"===r&&(u=Eo.mapValues(u,function(t){return-t})),o[i+r]=u})});var i=function(t,e){return Eo.minBy(Eo.values(e),function(e){var r=Number.NEGATIVE_INFINITY,n=Number.POSITIVE_INFINITY;return Eo.forIn(e,function(e,o){var i=function(t,e){return t.node(e).width}(t,o)/2;r=Math.max(e+i,r),n=Math.min(e-i,n)}),r-n})}(t,o);return function(t,e){var r=Eo.values(e),n=Eo.min(r),o=Eo.max(r);Eo.forEach(["u","d"],function(r){Eo.forEach(["l","r"],function(i){var a,s=r+i,u=t[s];if(u!==e){var l=Eo.values(u);(a="l"===i?n-Eo.min(l):o-Eo.max(l))&&(t[s]=Eo.mapValues(u,function(t){return t+a}))}})})}(o,i),function(t,e){return Eo.mapValues(t.ul,function(r,n){if(e)return t[e.toLowerCase()][n];var o=Eo.sortBy(Eo.map(t,n));return(o[1]+o[2])/2})}(o,t.graph().align)},Di=Ro.normalizeRanks,Bi=Ro.removeEmptyRanks,Fi=Ro,Gi=Un.Graph,Ui=["nodesep","edgesep","ranksep","marginx","marginy"],zi={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},Vi=["acyclicer","ranker","rankdir","align"],Hi=["width","height"],Wi={width:0,height:0},qi=["minlen","weight","width","height","labeloffset"],Yi={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},Xi=["labelpos"];function Ji(t,e){return Eo.mapValues(Eo.pick(t,e),Number)}function Ki(t){var e={};return Eo.forEach(t,function(t,r){e[r.toLowerCase()]=t}),e}var Qi=Un.Graph,Zi={graphlib:Un,layout:function(t,e){var r=e&&e.debugTiming?Fi.time:Fi.notime;r("layout",function(){var e=r("  buildLayoutGraph",function(){return function(t){var e=new Gi({multigraph:!0,compound:!0}),r=Ki(t.graph());return e.setGraph(Eo.merge({},zi,Ji(r,Ui),Eo.pick(r,Vi))),Eo.forEach(t.nodes(),function(r){var n=Ki(t.node(r));e.setNode(r,Eo.defaults(Ji(n,Hi),Wi)),e.setParent(r,t.parent(r))}),Eo.forEach(t.edges(),function(r){var n=Ki(t.edge(r));e.setEdge(r,Eo.merge({},Yi,Ji(n,qi),Eo.pick(n,Xi)))}),e}(t)});r("  runLayout",function(){!function(t,e){e("    makeSpaceForEdgeLabels",function(){!function(t){var e=t.graph();e.ranksep/=2,Eo.forEach(t.edges(),function(r){var n=t.edge(r);n.minlen*=2,"c"!==n.labelpos.toLowerCase()&&("TB"===e.rankdir||"BT"===e.rankdir?n.width+=n.labeloffset:n.height+=n.labeloffset)})}(t)}),e("    removeSelfEdges",function(){!function(t){Eo.forEach(t.edges(),function(e){if(e.v===e.w){var r=t.node(e.v);r.selfEdges||(r.selfEdges=[]),r.selfEdges.push({e:e,label:t.edge(e)}),t.removeEdge(e)}})}(t)}),e("    acyclic",function(){Io(t)}),e("    nestingGraph.run",function(){hi(t)}),e("    rank",function(){!function(t){switch(t.graph().ranker){case"network-simplex":fi(t);break;case"tight-tree":!function(t){li(t),Wo(t)}(t);break;case"longest-path":ci(t);break;default:fi(t)}}(Fi.asNonCompoundGraph(t))}),e("    injectEdgeLabelProxies",function(){!function(t){Eo.forEach(t.edges(),function(e){var r=t.edge(e);if(r.width&&r.height){var n=t.node(e.v),o={rank:(t.node(e.w).rank-n.rank)/2+n.rank,e:e};Fi.addDummyNode(t,"edge-proxy",o,"_ep")}})}(t)}),e("    removeEmptyRanks",function(){Bi(t)}),e("    nestingGraph.cleanup",function(){pi(t)}),e("    normalizeRanks",function(){Di(t)}),e("    assignRankMinMax",function(){!function(t){var e=0;Eo.forEach(t.nodes(),function(r){var n=t.node(r);n.borderTop&&(n.minRank=t.node(n.borderTop).rank,n.maxRank=t.node(n.borderBottom).rank,e=Eo.max(e,n.maxRank))}),t.graph().maxRank=e}(t)}),e("    removeEdgeLabelProxies",function(){!function(t){Eo.forEach(t.nodes(),function(e){var r=t.node(e);"edge-proxy"===r.dummy&&(t.edge(r.e).labelRank=r.rank,t.removeNode(e))})}(t)}),e("    normalize.run",function(){Fo(t)}),e("    parentDummyChains",function(){!function(t){var e=function(t){var e={},r=0;return Eo.forEach(t.children(),function n(o){var i=r;Eo.forEach(t.children(o),n),e[o]={low:i,lim:r++}}),e}(t);Eo.forEach(t.graph().dummyChains,function(r){for(var n=t.node(r),o=n.edgeObj,i=function(t,e,r,n){var o,i,a=[],s=[],u=Math.min(e[r].low,e[n].low),l=Math.max(e[r].lim,e[n].lim);o=r;do{o=t.parent(o),a.push(o)}while(o&&(e[o].low>u||l>e[o].lim));for(i=o,o=n;(o=t.parent(o))!==i;)s.push(o);return{path:a.concat(s.reverse()),lca:i}}(t,e,o.v,o.w),a=i.path,s=i.lca,u=0,l=a[u],c=!0;r!==o.w;){if(n=t.node(r),c){for(;(l=a[u])!==s&&t.node(l).maxRank<n.rank;)u++;l===s&&(c=!1)}if(!c){for(;u<a.length-1&&t.node(l=a[u+1]).minRank<=n.rank;)u++;l=a[u]}t.setParent(r,l),r=t.successors(r)[0]}})}(t)}),e("    addBorderSegments",function(){!function(t){Eo.forEach(t.children(),function e(r){var n=t.children(r),o=t.node(r);if(n.length&&Eo.forEach(n,e),Eo.has(o,"minRank")){o.borderLeft=[],o.borderRight=[];for(var i=o.minRank,a=o.maxRank+1;i<a;++i)di(t,"borderLeft","_bl",r,o,i),di(t,"borderRight","_br",r,o,i)}})}(t)}),e("    order",function(){Ti(t)}),e("    insertSelfEdges",function(){!function(t){var e=Fi.buildLayerMatrix(t);Eo.forEach(e,function(e){var r=0;Eo.forEach(e,function(e,n){var o=t.node(e);o.order=n+r,Eo.forEach(o.selfEdges,function(e){Fi.addDummyNode(t,"selfedge",{width:e.label.width,height:e.label.height,rank:o.rank,order:n+ ++r,e:e.e,label:e.label},"_se")}),delete o.selfEdges})})}(t)}),e("    adjustCoordinateSystem",function(){yi(t)}),e("    position",function(){!function(t){(function(t){var e=Ro.buildLayerMatrix(t),r=t.graph().ranksep,n=0;Eo.forEach(e,function(e){var o=Eo.max(Eo.map(e,function(e){return t.node(e).height}));Eo.forEach(e,function(e){t.node(e).y=n+o/2}),n+=o+r})})(t=Ro.asNonCompoundGraph(t)),Eo.forEach(Ri(t),function(e,r){t.node(r).x=e})}(t)}),e("    positionSelfEdges",function(){!function(t){Eo.forEach(t.nodes(),function(e){var r=t.node(e);if("selfedge"===r.dummy){var n=t.node(r.e.v),o=n.x+n.width/2,i=n.y,a=r.x-o,s=n.height/2;t.setEdge(r.e,r.label),t.removeNode(e),r.label.points=[{x:o+2*a/3,y:i-s},{x:o+5*a/6,y:i-s},{x:o+a,y:i},{x:o+5*a/6,y:i+s},{x:o+2*a/3,y:i+s}],r.label.x=r.x,r.label.y=r.y}})}(t)}),e("    removeBorderNodes",function(){!function(t){Eo.forEach(t.nodes(),function(e){if(t.children(e).length){var r=t.node(e),n=t.node(r.borderTop),o=t.node(r.borderBottom),i=t.node(Eo.last(r.borderLeft)),a=t.node(Eo.last(r.borderRight));r.width=Math.abs(a.x-i.x),r.height=Math.abs(o.y-n.y),r.x=i.x+r.width/2,r.y=n.y+r.height/2}}),Eo.forEach(t.nodes(),function(e){"border"===t.node(e).dummy&&t.removeNode(e)})}(t)}),e("    normalize.undo",function(){Go(t)}),e("    fixupEdgeLabelCoords",function(){!function(t){Eo.forEach(t.edges(),function(e){var r=t.edge(e);if(Eo.has(r,"x"))switch("l"!==r.labelpos&&"r"!==r.labelpos||(r.width-=r.labeloffset),r.labelpos){case"l":r.x-=r.width/2+r.labeloffset;break;case"r":r.x+=r.width/2+r.labeloffset}})}(t)}),e("    undoCoordinateSystem",function(){vi(t)}),e("    translateGraph",function(){!function(t){var e=Number.POSITIVE_INFINITY,r=0,n=Number.POSITIVE_INFINITY,o=0,i=t.graph(),a=i.marginx||0,s=i.marginy||0;function u(t){var i=t.x,a=t.y,s=t.width,u=t.height;e=Math.min(e,i-s/2),r=Math.max(r,i+s/2),n=Math.min(n,a-u/2),o=Math.max(o,a+u/2)}Eo.forEach(t.nodes(),function(e){u(t.node(e))}),Eo.forEach(t.edges(),function(e){var r=t.edge(e);Eo.has(r,"x")&&u(r)}),e-=a,n-=s,Eo.forEach(t.nodes(),function(r){var o=t.node(r);o.x-=e,o.y-=n}),Eo.forEach(t.edges(),function(r){var o=t.edge(r);Eo.forEach(o.points,function(t){t.x-=e,t.y-=n}),Eo.has(o,"x")&&(o.x-=e),Eo.has(o,"y")&&(o.y-=n)}),i.width=r-e+a,i.height=o-n+s}(t)}),e("    assignNodeIntersects",function(){!function(t){Eo.forEach(t.edges(),function(e){var r,n,o=t.edge(e),i=t.node(e.v),a=t.node(e.w);o.points?(r=o.points[0],n=o.points[o.points.length-1]):(o.points=[],r=a,n=i),o.points.unshift(Fi.intersectRect(i,r)),o.points.push(Fi.intersectRect(a,n))})}(t)}),e("    reversePoints",function(){!function(t){Eo.forEach(t.edges(),function(e){var r=t.edge(e);r.reversed&&r.points.reverse()})}(t)}),e("    acyclic.undo",function(){No(t)})}(e,r)}),r("  updateInputGraph",function(){!function(t,e){Eo.forEach(t.nodes(),function(r){var n=t.node(r),o=e.node(r);n&&(n.x=o.x,n.y=o.y,e.children(r).length&&(n.width=o.width,n.height=o.height))}),Eo.forEach(t.edges(),function(r){var n=t.edge(r),o=e.edge(r);n.points=o.points,Eo.has(o,"x")&&(n.x=o.x,n.y=o.y)}),t.graph().width=e.graph().width,t.graph().height=e.graph().height}(t,e)})})},debug:{debugOrdering:function(t){var e=Ro.buildLayerMatrix(t),r=new Qi({compound:!0,multigraph:!0}).setGraph({});return Eo.forEach(t.nodes(),function(e){r.setNode(e,{label:e}),r.setParent(e,"layer"+t.node(e).rank)}),Eo.forEach(t.edges(),function(t){r.setEdge(t.v,t.w,{},t.name)}),Eo.forEach(e,function(t,e){var n="layer"+e;r.setNode(n,{rank:"same"}),Eo.reduce(t,function(t,e){return r.setEdge(t,e,{style:"invis"}),e})}),r}},util:{time:Ro.time,notime:Ro.notime},version:"0.8.5"},$i=Zi.graphlib,ta=Zi.layout,ea=h(function t(e){d(this,t),this.cardinality=1,this.include=w.UNSPECIFIED,this.isGroupNode=!1,this.parentNode=null,this.type=b.NODE,this.name=e.name,this.attr=e.attr||{},this.inputs=e.inputs,this.path=e.path||[],this.width=e.width,this.height=e.height}),ra=h(function t(){d(this,t),this.nodes={},this.edges=[],this.nodes={},this.edges=[]});var na=function(){return h(function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};d(this,t),this.attr=null,this.bridgeGraph=null,this.cardinality=0,this.depth=1,this.include=w.UNSPECIFIED,this.isGroupNode=!0,this.parentNode=null,this.type=b.META,this.path=[],this.name=e,this.metaGraph=sa(e,S.META,r)},[{key:"getFirstChild",value:function(){return this.metaGraph.node(this.metaGraph.nodes()[0])}},{key:"getChildren",value:function(){var t=this;return this.metaGraph.nodes().map(function(e){return t.metaGraph.node(e)})}},{key:"leaves",value:function(){for(var t,e=[],r=[this];r.length;){var n=r.shift();n.isGroupNode?(t=n.metaGraph).nodes().forEach(function(e){return r.push(t.node(e))}):e.push(n.name)}return e}}])}(),oa=function(){return h(function t(e,r){d(this,t),this.v=e,this.w=r,this.baseEdgeList=[],this.inbound=null,this.name=null},[{key:"addBaseEdge",value:function(t,e){this.baseEdgeList.push(t)}}])}();function ia(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new na(t,e)}function aa(t,e){return new oa(t,e)}function sa(t,e,r){var n=r||{},o=new $i.Graph(n);return o.setGraph({name:t,rankdir:n.rankdir,type:e,align:n.align}),o}var ua=function(){return h(function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};d(this,t),this.graphOptions=e,this.index={},this.graphOptions.compound=!0,this.root=ia(_,this.graphOptions),this.index[_]=this.root},[{key:"getNodeMap",value:function(){return this.index}},{key:"node",value:function(t){return this.index[t]}},{key:"setNode",value:function(t,e){this.index[t]=e}},{key:"getBridgeGraph",value:function(t){var e=this,r=this.index[t];if(!r)throw Error("Could not find node in hierarchy: "+t);if(!("metaGraph"in r))return null;var n=r;if(n.bridgeGraph)return n.bridgeGraph;var o=sa(E,S.BRIDGE,this.graphOptions);if(n.bridgeGraph=o,!(r.parentNode&&"metaGraph"in r.parentNode))return o;var i=r.parentNode;return[i.metaGraph,this.getBridgeGraph(i.name)].forEach(function(r){r.edges().filter(function(e){return e.v===t||e.w===t}).forEach(function(n){var i=n.w===t;r.edge(n).baseEdgeList.forEach(function(r){var a=u(i?[r.w,n.v]:[r.v,n.w],2),s=a[0],l=a[1],c=e.getChildName(t,s),f={v:i?l:c,w:i?c:l},h=o.edge(f);h||((h=aa(f.v,f.w)).inbound=i,o.setEdge(f.v,f.w,h)),h.addBaseEdge(r,e)})})}),o}},{key:"getChildName",value:function(t,e){for(var r=this.index[e];r;){if(r.parentNode&&r.parentNode.name===t)return r.name;r=r.parentNode}throw Error("Could not find immediate child for descendant: "+e)}},{key:"getPredecessors",value:function(t){var e=this.index[t];if(!e)throw Error("Could not find node with name: "+t);return this.getOneWayEdges(e,!0)}},{key:"getSuccessors",value:function(t){var e=this.index[t];if(!e)throw Error("Could not find node with name: "+t);return this.getOneWayEdges(e,!1)}},{key:"getOneWayEdges",value:function(t,e){var r=[];if(!t.parentNode||!t.parentNode.isGroupNode)return r;var n=t.parentNode,o=n.metaGraph,i=this.getBridgeGraph(n.name);return la(o,t,e,r),la(i,t,e,r),r}}])}();function la(t,e,r,n){(r?t.inEdges(e.name):t.outEdges(e.name)).forEach(function(e){var r=t.edge(e);n.push(r)})}var ca=function(){return h(function t(e){d(this,t),this.hierarchy=e,this.index={},this.hasSubHierarchy={},this.root=new pa(this.hierarchy.root,this.hierarchy.graphOptions),this.index[e.root.name]=this.root,this.buildSubHierarchy(e.root.name),this.root.expanded=!0},[{key:"getRenderInfoNodes",value:function(){return Object.values(this.index)}},{key:"getSubHierarchy",value:function(){return this.hasSubHierarchy}},{key:"buildSubHierarchy",value:function(t){var e=this;if(!(t in this.hasSubHierarchy)){this.hasSubHierarchy[t]=!0;var r=this.index[t];if(r.node.type===b.META){var n=r,o=n.node.metaGraph,i=n.coreGraph;o.nodes().forEach(function(t){var r=e.getOrCreateRenderNodeByName(t);i.setNode(t,r)}),o.edges().forEach(function(t){var e=o.edge(t),r=new ha(e);i.setEdge(t.v,t.w,r)});var a=n.node.parentNode;if(a){var s=this.getRenderNodeByName(a.name),l=function(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];return r.concat([t?"IN":"OUT"]).join("~~")},c=this.hierarchy.getBridgeGraph(t);c.edges().forEach(function(r){var n=c.edge(r),f=!!o.node(r.w),h=u(f?[r.w,r.v]:[r.v,r.w],2),p=h[0],d=h[1],y=function(e){var r=f?{v:e,w:t}:{v:t,w:e};return s.coreGraph.edge(r)},v=y(d);v||(v=y(l(f,d,a.name)));var g=l(f,t),m=l(f,d,t),S=i.node(m);if(!S){var x=i.node(g);if(!x){var _={name:g,type:b.BRIDGE,isGroupNode:!1,cardinality:0,parentNode:null,include:w.UNSPECIFIED,inbound:f,attr:{}};x=new fa(_),e.index[g]=x,i.setNode(g,x)}var E={name:m,type:b.BRIDGE,isGroupNode:!1,cardinality:1,parentNode:null,include:w.UNSPECIFIED,inbound:f,attr:{}};S=new fa(E),e.index[m]=S,i.setNode(m,S),i.setParent(m,g),x.node.cardinality++}var O=new ha(n);O.adjoiningMetaEdge=v,f?i.setEdge(m,p,O):i.setEdge(p,m,O)})}}}}},{key:"getOrCreateRenderNodeByName",value:function(t){if(!t)return null;if(t in this.index)return this.index[t];var e=this.getNodeByName(t);return e?(this.index[t]=e.isGroupNode?new pa(e,this.hierarchy.graphOptions):new fa(e),this.index[t]):null}},{key:"getRenderNodeByName",value:function(t){return this.index[t]}},{key:"getNodeByName",value:function(t){return this.hierarchy.node(t)}}])}(),fa=h(function t(e){d(this,t),this.node=e,this.expanded=!1,this.x=0,this.y=0,this.coreBox={width:0,height:0},this.outboxWidth=0,this.labelOffset=0,this.radius=0,this.labelHeight=0,this.paddingTop=0,this.paddingLeft=0,this.paddingRight=0,this.paddingBottom=0,this.width=e.width||0,this.height=e.height||0,this.displayName=e.name,this.attr=e.attr}),ha=h(function t(e){d(this,t),this.metaEdge=e,this.adjoiningMetaEdge=null,this.weight=1,this.points=[]}),pa=function(t){function e(t,r){var n;d(this,e),n=i(this,e,[t]);var o=t.metaGraph.graph();return r.compound=!0,n.coreGraph=sa(o.name,S.CORE,r),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}(e,fa),h(e)}();function da(t,e){t.node.isGroupNode&&function(t,e){var r=g(e);t.coreGraph.nodes().map(function(e){return t.coreGraph.node(e)}).forEach(function(t){var n,o,i,a,s,u,l=t.height,c=t.width;switch(t.node.type){case b.NODE:Object.assign(t,r.nodeSize.node),t.height=l||r.nodeSize.node.height,t.width=c||r.nodeSize.node.width;break;case b.BRIDGE:Object.assign(t,r.nodeSize.bridge);break;case b.META:t.expanded?da(t,e):(Object.assign(t,r.nodeSize.meta),t.height=r.nodeSize.meta.height,t.width=r.nodeSize.meta.width);break;default:throw Error("Unrecognized node type: "+t.node.type)}if(!t.expanded){var f=t.attr;!function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t.coreBox.width=t.width,t.coreBox.height=t.height,!e){var r="".concat(t.displayName).length;t.width=Math.max(t.coreBox.width,3*r)}}(t,e&&(0===t.node.type&&!!(null===(o=null===(n=null==e?void 0:e.nodeSize)||void 0===n?void 0:n.meta)||void 0===o?void 0:o.width)||1===t.node.type&&(!!(null===(a=null===(i=null==e?void 0:e.nodeSize)||void 0===i?void 0:i.node)||void 0===a?void 0:a.width)||!!f.width)||2===t.node.type&&!!(null===(u=null===(s=null==e?void 0:e.nodeSize)||void 0===s?void 0:s.bridge)||void 0===u?void 0:u.width)))}})}(t,e),t.node.type===b.META&&function(t,e){var r=g(e),n=r.subScene.meta;Object.assign(t,n);var o=r.graph.meta,i={nodesep:o.nodeSep,ranksep:o.rankSep,edgesep:o.edgeSep,align:o.align};Object.assign(t.coreBox,function(t,e){var r=e.ranksep,n=e.nodesep,o=e.edgesep,i=e.align;Object.assign(t.graph(),{ranksep:r,nodesep:n,edgesep:o,align:i});var a=[];if(t.nodes().forEach(function(e){t.node(e).node.type!==b.BRIDGE&&a.push(e)}),!a.length)return{width:0,height:0};ta(t);var s=1/0,u=1/0,l=-1/0,c=-1/0;return a.forEach(function(e){var r=t.node(e),n=.5*r.width,o=r.x-n,i=r.x+n;s=o<s?o:s,l=i>l?i:l;var a=.5*r.height,f=r.y-a,h=r.y+a;u=f<u?f:u,c=h>c?h:c}),t.edges().forEach(function(e){var r=t.edge(e),n=t.node(r.metaEdge.v),o=t.node(r.metaEdge.w);if(3===r.points.length&&function(t){for(var e=ya(t[0],t[1]),r=1;r<t.length-1;r++){var n=ya(t[r],t[r+1]);if(Math.abs(n-e)>1)return!1;e=n}return!0}(r.points)){if(null!=n){var i=n.expanded?n.x:va(n);r.points[0].x=i}if(null!=o){var a=o.expanded?o.x:va(o);r.points[2].x=a}r.points=[r.points[0],r.points[1]]}var f=r.points[r.points.length-2];null!=o&&(r.points[r.points.length-1]=ga(f,o));var h=r.points[1];null!=n&&(r.points[0]=ga(h,n)),r.points.forEach(function(t){s=t.x<s?t.x:s,l=t.x>l?t.x:l,u=t.y<u?t.y:u,c=t.y>c?t.y:c})}),t.nodes().forEach(function(e){var r=t.node(e);r.x-=s,r.y-=u}),t.edges().forEach(function(e){t.edge(e).points.forEach(function(t){t.x-=s,t.y-=u})}),{width:l-s,height:c-u}}(t.coreGraph,i));var a=0;t.coreGraph.nodeCount()>0&&a++;var s=a<=1?0:a;t.coreBox.width+=s+s,t.coreBox.height=n.labelHeight+t.coreBox.height,t.width=t.coreBox.width+n.paddingLeft+n.paddingRight,t.height=t.paddingTop+t.coreBox.height+t.paddingBottom}(t,e)}function ya(t,e){var r=e.x-t.x,n=e.y-t.y;return 180*Math.atan(n/r)/Math.PI}function va(t){return t.expanded?t.x:t.x-t.width/2+0+t.coreBox.width/2}function ga(t,e){var r,n,o=e.expanded?e.x:va(e),i=e.y,a=t.x-o,s=t.y-i,u=e.expanded?e.width:e.coreBox.width,l=e.expanded?e.height:e.coreBox.height;return Math.abs(s)*u/2>Math.abs(a)*l/2?(s<0&&(l=-l),r=0===s?0:l/2*a/s,n=l/2):(a<0&&(u=-u),r=u/2,n=0===a?0:u/2*s/a),{x:o+r,y:i+n}}function ma(t,e,r){var i,a,s,l,c=t.nodes.filter(function(t,e,r){return r.findIndex(function(e){return e.id===t.id})!==e}).map(function(t){return t.id});if(c.length)throw new Error("Duplicated ids found: ".concat(c.join(", ")));var f=function(t){var e={nodes:[]},r=t.compound,n=Object.keys(r||{}),i=new Map,a=function t(e){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(i.has(e))return i.get(e);for(var a=0;a<n.length;a++){var s=n[a];if(r&&-1!==r[s].indexOf(e))return o.unshift(s),t(s,o)}return 0===o.length&&i.set(e,o),o},s=function(e){return t.edges.filter(function(t){return t.w===e}).map(function(t){return{name:t.v}})};return t.nodes.forEach(function(t){var r=t.id,n=[].concat(o(a(r)),[r]),i=s(r);e.nodes.push({name:r,path:n,inputs:i,width:t.width,height:t.height,attr:Object.assign({},t)})}),e}(t),h=function(t,e){var r=function(t,e){var r,o=n(e.values());try{for(o.s();!(r=o.n()).done;){if(r.value.includes(t))return!0}}catch(t){o.e(t)}finally{o.f()}return!1};return function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(0===Object.keys(e).length)return o(new Set(i));var a,s=new Map(Object.keys(e).map(function(t){return[t,e[t]]})),l={},c=n(s);try{for(c.s();!(a=c.n()).done;){var f=u(a.value,2),h=f[0],p=f[1];r(h,s)?l[h]=p:i=i.concat(h,p)}}catch(t){c.e(t)}finally{c.f()}return t(l,i)}(t).filter(function(t){return e.includes(t)})}(t.compound||{},(null==e?void 0:e.expanded)||[]),p=function(t,e){return function(t){return new ca(t)}(function(t,e){var r=e.rankDirection,n=e.align,o=new ua({rankdir:r,align:n});return function(t,e){Object.keys(e.nodes).forEach(function(r){var n=e.nodes[r],o=n.path,i=t.root;i.depth=Math.max(o.length,i.depth);for(var a=0;a<o.length&&(i.depth=Math.max(i.depth,o.length-a),i.cardinality+=n.cardinality,a!==o.length-1);a++){var s=o[a],u=t.node(s);u||((u=ia(s,t.graphOptions)).path=n.path.slice(0,a+1),u.parentNode=i,t.setNode(s,u),i.metaGraph.setNode(s,u)),i=u}t.setNode(n.name,n),n.parentNode=i,i.metaGraph.setNode(n.name,n)})}(o,t),function(t,e){var r=t.getNodeMap(),n=[],o=[],i=function(t,e){for(var r=0;t;)e[r++]=t.name,t=t.parentNode;return r-1};e.edges.forEach(function(a){n=[],o=[];for(var s=i(e.nodes[a.v],n),u=i(e.nodes[a.w],o);n[s]===o[u];)if(u--,--s<0||u<0)throw Error("No difference found between ancestor paths.");var l=r[n[s+1]],c=n[s],f=o[u],h=l.metaGraph.edge(c,f);h||(h=aa(c,f),l.metaGraph.setEdge(c,f,h)),h.addBaseEdge(a,t)})}(o,t),o}(function(t){var e=new ra;return t.nodes.map(function(t){return new ea(t)}).forEach(function(t){e.nodes[t.name]=t,t.inputs.forEach(function(r){!function(t,e,r){r.name!==e.name&&t.edges.push(Object.assign(Object.assign({},r.attr),{v:r.name,w:e.name}))}(e,t,r)})}),e}(t),e))}(f,{rankDirection:(null===(a=null===(i=null==r?void 0:r.graph)||void 0===i?void 0:i.meta)||void 0===a?void 0:a.rankDir)||(null==e?void 0:e.rankDirection)||v.graph.meta.rankDir,align:(null===(l=null===(s=null==r?void 0:r.graph)||void 0===s?void 0:s.meta)||void 0===l?void 0:l.align)||v.graph.meta.align});return function(t,e){h.forEach(function(e){var r=t.getRenderInfoNodes().find(function(t){return t.displayName===e}),n=r&&r.node&&r.node.name||"",o=t.getRenderNodeByName(n);if(!o)throw new Error("No nodes found: ".concat(n));o.expanded=!0,t.buildSubHierarchy(n)})}(p),da(p.root,r),Sa(p.root)}function ba(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=JSON.parse(JSON.stringify(t)),n={nodes:[r],edges:o(r.edges)};return r.nodes.forEach(function t(e){(0===e.type||1===e.type)&&n.nodes.push(e),0===e.type&&(n.edges=n.edges.concat(e.edges)),Array.isArray(e.nodes)&&e.nodes.forEach(t)}),e&&n.nodes.forEach(function(t){var e=n.nodes.find(function(e){return e.id===t.parentNodeName});if(e){var r=e.x-e.width/2+e.paddingLeft,o=e.y-e.height/2+e.labelHeight+e.paddingTop;e.id!==_&&(t.x+=r,t.y+=o),0===t.type&&t.edges.forEach(function(e){e.points.forEach(function(e){e.x+=t.x-t.width/2+t.paddingLeft,e.y+=t.y-t.height/2+t.labelHeight+t.paddingTop})})}}),n}function wa(t,e,r,n){var i,a,s=[],u=(null===(i=r.find(function(e){return e.id===t}))||void 0===i?void 0:i.path)||[],l=(null===(a=r.find(function(t){return t.id===e}))||void 0===a?void 0:a.path)||[],c=[_].concat(o(u)).slice(0,u.length).reverse(),f=[_].concat(o(l)).slice(0,l.length);return c.forEach(function(o){var i=r.find(function(t){return t.id===o});s=s.concat(i.edges.filter(function(r){return r.baseEdgeList.some(function(r){return r.v===((null==n?void 0:n.v)||t)&&r.w===((null==n?void 0:n.w)||e)})}))}),f.filter(function(t){return!c.includes(t)}).forEach(function(o){var i=r.find(function(t){return t.id===o});s=s.concat(i.edges.filter(function(r){return r.baseEdgeList.some(function(r){return r.v===((null==n?void 0:n.v)||t)&&r.w===((null==n?void 0:n.w)||e)})}))}),s}function Sa(t){var e,r=t.coreGraph.nodes().map(function(e){return t.coreGraph.node(e)});return Object.assign(Object.assign({},xa(t)),{expanded:t.expanded,nodes:t.expanded?(e=r,e.map(function(t){return t.node.type===b.META?Sa(t):xa(t)})):[],edges:t.expanded?function(t){return t.coreGraph.edges().map(function(e){return{renderInfoEdge:t.coreGraph.edge(e),edge:e}}).filter(function(t){var e=t.renderInfoEdge;return e.metaEdge}).map(function(e){var r=e.edge,n=e.renderInfoEdge,o=function(t,e){var r=e.points.map(function(t){return Object.assign({},t)});if(e.adjoiningMetaEdge){var n=e.adjoiningMetaEdge.points,o=e.metaEdge.inbound,i=o?n[n.length-1]:n[0],a=r[o?0:r.length-1],s=t.x-t.width/2,u=t.y-t.height/2,l=i.x-s,c=i.y-u,f=-t.paddingLeft,h=-(t.paddingTop+t.labelHeight);a.x=l+f,a.y=c+h}return r}(t,n);return{adjoiningEdge:n.adjoiningMetaEdge?{w:n.adjoiningMetaEdge.metaEdge.w,v:n.adjoiningMetaEdge.metaEdge.v}:null,inbound:n.metaEdge.inbound,w:r.w,v:r.v,points:o,weight:n.weight,baseEdgeList:n.metaEdge.baseEdgeList,parentNodeName:t.node.name}})}(t):[]})}function xa(t){return{id:t.node.name,name:t.node.name,type:t.node.type,cardinality:t.node.cardinality,attr:t.attr,parentNodeName:t.node.parentNode?t.node.parentNode.name:null,coreBox:Object.assign({},t.coreBox),x:t.x,y:t.y,width:t.width,height:t.height,radius:t.radius,labelHeight:t.labelHeight,labelOffset:t.labelOffset,outboxWidth:t.outboxWidth,paddingLeft:t.paddingLeft,paddingTop:t.paddingTop,paddingRight:t.paddingRight,paddingBottom:t.paddingBottom,path:t.node.path}}},2057:function(t,e,r){"use strict";var n=r(5954),o=r(9162),i=r(1290);t.exports={XMLParser:o,XMLValidator:n,XMLBuilder:i}},144:function(t,e){"use strict";var r=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",n="["+r+"][:A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*",o=new RegExp("^"+n+"$");e.isExist=function(t){return void 0!==t},e.isEmptyObject=function(t){return 0===Object.keys(t).length},e.merge=function(t,e,r){if(e)for(var n=Object.keys(e),o=n.length,i=0;i<o;i++)t[n[i]]="strict"===r?[e[n[i]]]:e[n[i]]},e.getValue=function(t){return e.isExist(t)?t:""},e.isName=function(t){var e=o.exec(t);return!(null===e||void 0===e)},e.getAllMatches=function(t,e){for(var r=[],n=e.exec(t);n;){var o=[];o.startIndex=e.lastIndex-n[0].length;for(var i=n.length,a=0;a<i;a++)o.push(n[a]);r.push(o),n=e.exec(t)}return r},e.nameRegexp=n},5954:function(t,e,r){"use strict";var n=r(144),o={allowBooleanAttributes:!1,unpairedTags:[]};function i(t){return" "===t||"\t"===t||"\n"===t||"\r"===t}function a(t,e){for(var r=e;e<t.length;e++)if("?"!=t[e]&&" "!=t[e]);else{var n=t.substr(r,e-r);if(e>5&&"xml"===n)return d("InvalidXml","XML declaration allowed only at the start of the document.",v(t,e));if("?"==t[e]&&">"==t[e+1]){e++;break}}return e}function s(t,e){if(t.length>e+5&&"-"===t[e+1]&&"-"===t[e+2]){for(e+=3;e<t.length;e++)if("-"===t[e]&&"-"===t[e+1]&&">"===t[e+2]){e+=2;break}}else if(t.length>e+8&&"D"===t[e+1]&&"O"===t[e+2]&&"C"===t[e+3]&&"T"===t[e+4]&&"Y"===t[e+5]&&"P"===t[e+6]&&"E"===t[e+7]){var r=1;for(e+=8;e<t.length;e++)if("<"===t[e])r++;else if(">"===t[e]&&0===--r)break}else if(t.length>e+9&&"["===t[e+1]&&"C"===t[e+2]&&"D"===t[e+3]&&"A"===t[e+4]&&"T"===t[e+5]&&"A"===t[e+6]&&"["===t[e+7])for(e+=8;e<t.length;e++)if("]"===t[e]&&"]"===t[e+1]&&">"===t[e+2]){e+=2;break}return e}e.validate=function(t,e){e=Object.assign({},o,e);var r,u=[],l=!1,f=!1;"\ufeff"===t[0]&&(t=t.substr(1));for(var y=0;y<t.length;y++)if("<"===t[y]&&"?"===t[y+1]){if((y=a(t,y+=2)).err)return y}else{if("<"!==t[y]){if(i(t[y]))continue;return d("InvalidChar","char '"+t[y]+"' is not expected.",v(t,y))}var g=y;if("!"===t[++y]){y=s(t,y);continue}var m=!1;"/"===t[y]&&(m=!0,y++);for(var b="";y<t.length&&">"!==t[y]&&" "!==t[y]&&"\t"!==t[y]&&"\n"!==t[y]&&"\r"!==t[y];y++)b+=t[y];if("/"===(b=b.trim())[b.length-1]&&(b=b.substring(0,b.length-1),y--),r=b,!n.isName(r)){return d("InvalidTag",0===b.trim().length?"Invalid space after '<'.":"Tag '"+b+"' is an invalid name.",v(t,y))}var w=c(t,y);if(!1===w)return d("InvalidAttr","Attributes for '"+b+"' have open quote.",v(t,y));var S=w.value;if(y=w.index,"/"===S[S.length-1]){var x=y-S.length,_=h(S=S.substring(0,S.length-1),e);if(!0!==_)return d(_.err.code,_.err.msg,v(t,x+_.err.line));l=!0}else if(m){if(!w.tagClosed)return d("InvalidTag","Closing tag '"+b+"' doesn't have proper closing.",v(t,y));if(S.trim().length>0)return d("InvalidTag","Closing tag '"+b+"' can't have attributes or invalid starting.",v(t,g));var E=u.pop();if(b!==E.tagName){var O=v(t,E.tagStartPos);return d("InvalidTag","Expected closing tag '"+E.tagName+"' (opened in line "+O.line+", col "+O.col+") instead of closing tag '"+b+"'.",v(t,g))}0==u.length&&(f=!0)}else{var P=h(S,e);if(!0!==P)return d(P.err.code,P.err.msg,v(t,y-S.length+P.err.line));if(!0===f)return d("InvalidXml","Multiple possible root nodes found.",v(t,y));-1!==e.unpairedTags.indexOf(b)||u.push({tagName:b,tagStartPos:g}),l=!0}for(y++;y<t.length;y++)if("<"===t[y]){if("!"===t[y+1]){y=s(t,++y);continue}if("?"!==t[y+1])break;if((y=a(t,++y)).err)return y}else if("&"===t[y]){var k=p(t,y);if(-1==k)return d("InvalidChar","char '&' is not expected.",v(t,y));y=k}else if(!0===f&&!i(t[y]))return d("InvalidXml","Extra text at the end",v(t,y));"<"===t[y]&&y--}return l?1==u.length?d("InvalidTag","Unclosed tag '"+u[0].tagName+"'.",v(t,u[0].tagStartPos)):!(u.length>0)||d("InvalidXml","Invalid '"+JSON.stringify(u.map(function(t){return t.tagName}),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1}):d("InvalidXml","Start tag expected.",1)};var u='"',l="'";function c(t,e){for(var r="",n="",o=!1;e<t.length;e++){if(t[e]===u||t[e]===l)""===n?n=t[e]:n!==t[e]||(n="");else if(">"===t[e]&&""===n){o=!0;break}r+=t[e]}return""===n&&{value:r,index:e,tagClosed:o}}var f=new RegExp("(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['\"])(([\\s\\S])*?)\\5)?","g");function h(t,e){for(var r=n.getAllMatches(t,f),o={},i=0;i<r.length;i++){if(0===r[i][1].length)return d("InvalidAttr","Attribute '"+r[i][2]+"' has no space in starting.",g(r[i]));if(void 0!==r[i][3]&&void 0===r[i][4])return d("InvalidAttr","Attribute '"+r[i][2]+"' is without value.",g(r[i]));if(void 0===r[i][3]&&!e.allowBooleanAttributes)return d("InvalidAttr","boolean attribute '"+r[i][2]+"' is not allowed.",g(r[i]));var a=r[i][2];if(!y(a))return d("InvalidAttr","Attribute '"+a+"' is an invalid name.",g(r[i]));if(o.hasOwnProperty(a))return d("InvalidAttr","Attribute '"+a+"' is repeated.",g(r[i]));o[a]=1}return!0}function p(t,e){if(";"===t[++e])return-1;if("#"===t[e])return function(t,e){var r=/\d/;for("x"===t[e]&&(e++,r=/[\da-fA-F]/);e<t.length;e++){if(";"===t[e])return e;if(!t[e].match(r))break}return-1}(t,++e);for(var r=0;e<t.length;e++,r++)if(!(t[e].match(/\w/)&&r<20)){if(";"===t[e])break;return-1}return e}function d(t,e,r){return{err:{code:t,msg:e,line:r.line||r,col:r.col}}}function y(t){return n.isName(t)}function v(t,e){var r=t.substring(0,e).split(/\r?\n/);return{line:r.length,col:r[r.length-1].length+1}}function g(t){return t.startIndex+t[1].length}},1290:function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e,r){var o;return(e="symbol"==n(o=function(t,e){if("object"!=n(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"))?o:o+"")in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var i=r(8183),a={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(t,e){return e},attributeValueProcessor:function(t,e){return e},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[],oneListGroup:!1};function s(t){this.options=Object.assign({},a,t),this.options.ignoreAttributes||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=c),this.processTextOrObjNode=u,this.options.format?(this.indentate=l,this.tagEndChar=">\n",this.newLine="\n"):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine="")}function u(t,e,r){var n=this.j2x(t,r+1);return void 0!==t[this.options.textNodeName]&&1===Object.keys(t).length?this.buildTextValNode(t[this.options.textNodeName],e,n.attrStr,r):this.buildObjectNode(n.val,e,n.attrStr,r)}function l(t){return this.options.indentBy.repeat(t)}function c(t){return!(!t.startsWith(this.options.attributeNamePrefix)||t===this.options.textNodeName)&&t.substr(this.attrPrefixLen)}s.prototype.build=function(t){return this.options.preserveOrder?i(t,this.options):(Array.isArray(t)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(t=o({},this.options.arrayNodeName,t)),this.j2x(t,0).val)},s.prototype.j2x=function(t,e){var r="",o="";for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i))if(void 0===t[i])this.isAttribute(i)&&(o+="");else if(null===t[i])this.isAttribute(i)?o+="":"?"===i[0]?o+=this.indentate(e)+"<"+i+"?"+this.tagEndChar:o+=this.indentate(e)+"<"+i+"/"+this.tagEndChar;else if(t[i]instanceof Date)o+=this.buildTextValNode(t[i],i,"",e);else if("object"!==n(t[i])){var a=this.isAttribute(i);if(a)r+=this.buildAttrPairStr(a,""+t[i]);else if(i===this.options.textNodeName){var s=this.options.tagValueProcessor(i,""+t[i]);o+=this.replaceEntitiesValue(s)}else o+=this.buildTextValNode(t[i],i,"",e)}else if(Array.isArray(t[i])){for(var u=t[i].length,l="",c=0;c<u;c++){var f=t[i][c];void 0===f||(null===f?"?"===i[0]?o+=this.indentate(e)+"<"+i+"?"+this.tagEndChar:o+=this.indentate(e)+"<"+i+"/"+this.tagEndChar:"object"===n(f)?this.options.oneListGroup?l+=this.j2x(f,e+1).val:l+=this.processTextOrObjNode(f,i,e):l+=this.buildTextValNode(f,i,"",e))}this.options.oneListGroup&&(l=this.buildObjectNode(l,i,"",e)),o+=l}else if(this.options.attributesGroupName&&i===this.options.attributesGroupName)for(var h=Object.keys(t[i]),p=h.length,d=0;d<p;d++)r+=this.buildAttrPairStr(h[d],""+t[i][h[d]]);else o+=this.processTextOrObjNode(t[i],i,e);return{attrStr:r,val:o}},s.prototype.buildAttrPairStr=function(t,e){return e=this.options.attributeValueProcessor(t,""+e),e=this.replaceEntitiesValue(e),this.options.suppressBooleanAttributes&&"true"===e?" "+t:" "+t+'="'+e+'"'},s.prototype.buildObjectNode=function(t,e,r,n){if(""===t)return"?"===e[0]?this.indentate(n)+"<"+e+r+"?"+this.tagEndChar:this.indentate(n)+"<"+e+r+this.closeTag(e)+this.tagEndChar;var o="</"+e+this.tagEndChar,i="";return"?"===e[0]&&(i="?",o=""),!r&&""!==r||-1!==t.indexOf("<")?!1!==this.options.commentPropName&&e===this.options.commentPropName&&0===i.length?this.indentate(n)+"\x3c!--".concat(t,"--\x3e")+this.newLine:this.indentate(n)+"<"+e+r+i+this.tagEndChar+t+this.indentate(n)+o:this.indentate(n)+"<"+e+r+i+">"+t+o},s.prototype.closeTag=function(t){var e="";return-1!==this.options.unpairedTags.indexOf(t)?this.options.suppressUnpairedNode||(e="/"):e=this.options.suppressEmptyNode?"/":"></".concat(t),e},s.prototype.buildTextValNode=function(t,e,r,n){if(!1!==this.options.cdataPropName&&e===this.options.cdataPropName)return this.indentate(n)+"<![CDATA[".concat(t,"]]>")+this.newLine;if(!1!==this.options.commentPropName&&e===this.options.commentPropName)return this.indentate(n)+"\x3c!--".concat(t,"--\x3e")+this.newLine;if("?"===e[0])return this.indentate(n)+"<"+e+r+"?"+this.tagEndChar;var o=this.options.tagValueProcessor(e,t);return""===(o=this.replaceEntitiesValue(o))?this.indentate(n)+"<"+e+r+this.closeTag(e)+this.tagEndChar:this.indentate(n)+"<"+e+r+">"+o+"</"+e+this.tagEndChar},s.prototype.replaceEntitiesValue=function(t){if(t&&t.length>0&&this.options.processEntities)for(var e=0;e<this.options.entities.length;e++){var r=this.options.entities[e];t=t.replace(r.regex,r.val)}return t},t.exports=s},8183:function(t){var e="\n";function r(t){for(var e=Object.keys(t),r=0;r<e.length;r++){var n=e[r];if(t.hasOwnProperty(n)&&":@"!==n)return n}}function n(t,e){var r="";if(t&&!e.ignoreAttributes)for(var n in t)if(t.hasOwnProperty(n)){var o=e.attributeValueProcessor(n,t[n]);!0===(o=i(o,e))&&e.suppressBooleanAttributes?r+=" ".concat(n.substr(e.attributeNamePrefix.length)):r+=" ".concat(n.substr(e.attributeNamePrefix.length),'="').concat(o,'"')}return r}function o(t,e){var r=(t=t.substr(0,t.length-e.textNodeName.length-1)).substr(t.lastIndexOf(".")+1);for(var n in e.stopNodes)if(e.stopNodes[n]===t||e.stopNodes[n]==="*."+r)return!0;return!1}function i(t,e){if(t&&t.length>0&&e.processEntities)for(var r=0;r<e.entities.length;r++){var n=e.entities[r];t=t.replace(n.regex,n.val)}return t}t.exports=function(t,a){var s="";return a.format&&a.indentBy.length>0&&(s=e),function t(e,a,s,u){for(var l="",c=!1,f=0;f<e.length;f++){var h=e[f],p=r(h);if(void 0!==p){var d="";if(d=0===s.length?p:"".concat(s,".").concat(p),p!==a.textNodeName)if(p!==a.cdataPropName)if(p!==a.commentPropName)if("?"!==p[0]){var y=u;""!==y&&(y+=a.indentBy);var v=n(h[":@"],a),g=u+"<".concat(p).concat(v),m=t(h[p],a,d,y);-1!==a.unpairedTags.indexOf(p)?a.suppressUnpairedNode?l+=g+">":l+=g+"/>":m&&0!==m.length||!a.suppressEmptyNode?m&&m.endsWith(">")?l+=g+">".concat(m).concat(u,"</").concat(p,">"):(l+=g+">",m&&""!==u&&(m.includes("/>")||m.includes("</"))?l+=u+a.indentBy+m+u:l+=m,l+="</".concat(p,">")):l+=g+"/>",c=!0}else{var b=n(h[":@"],a),w="?xml"===p?"":u,S=h[p][0][a.textNodeName];S=0!==S.length?" "+S:"",l+=w+"<".concat(p).concat(S).concat(b,"?>"),c=!0}else l+=u+"\x3c!--".concat(h[p][0][a.textNodeName],"--\x3e"),c=!0;else c&&(l+=u),l+="<![CDATA[".concat(h[p][0][a.textNodeName],"]]>"),c=!1;else{var x=h[p];o(d,a)||(x=i(x=a.tagValueProcessor(p,x),a)),c&&(l+=u),l+=x,c=!1}}}return l}(t,a,"",s)}},8763:function(t,e,r){function n(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,s=[],u=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(s.push(n.value),s.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return o(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var i=r(144);function a(t,e){for(var r="";e<t.length&&"'"!==t[e]&&'"'!==t[e];e++)r+=t[e];if(-1!==(r=r.trim()).indexOf(" "))throw new Error("External entites are not supported");for(var n=t[e++],o="";e<t.length&&t[e]!==n;e++)o+=t[e];return[r,o,e]}function s(t,e){return"!"===t[e+1]&&"-"===t[e+2]&&"-"===t[e+3]}function u(t,e){return"!"===t[e+1]&&"E"===t[e+2]&&"N"===t[e+3]&&"T"===t[e+4]&&"I"===t[e+5]&&"T"===t[e+6]&&"Y"===t[e+7]}function l(t,e){return"!"===t[e+1]&&"E"===t[e+2]&&"L"===t[e+3]&&"E"===t[e+4]&&"M"===t[e+5]&&"E"===t[e+6]&&"N"===t[e+7]&&"T"===t[e+8]}function c(t,e){return"!"===t[e+1]&&"A"===t[e+2]&&"T"===t[e+3]&&"T"===t[e+4]&&"L"===t[e+5]&&"I"===t[e+6]&&"S"===t[e+7]&&"T"===t[e+8]}function f(t,e){return"!"===t[e+1]&&"N"===t[e+2]&&"O"===t[e+3]&&"T"===t[e+4]&&"A"===t[e+5]&&"T"===t[e+6]&&"I"===t[e+7]&&"O"===t[e+8]&&"N"===t[e+9]}function h(t){if(i.isName(t))return t;throw new Error("Invalid entity name ".concat(t))}t.exports=function(t,e){var r={};if("O"!==t[e+3]||"C"!==t[e+4]||"T"!==t[e+5]||"Y"!==t[e+6]||"P"!==t[e+7]||"E"!==t[e+8])throw new Error("Invalid Tag instead of DOCTYPE");e+=9;for(var o=1,i=!1,p=!1;e<t.length;e++)if("<"!==t[e]||p)if(">"===t[e]){if(p?"-"===t[e-1]&&"-"===t[e-2]&&(p=!1,o--):o--,0===o)break}else"["===t[e]?i=!0:t[e];else{if(i&&u(t,e)){var d=n(a(t,(e+=7)+1),3);entityName=d[0],val=d[1],e=d[2],-1===val.indexOf("&")&&(r[h(entityName)]={regx:RegExp("&".concat(entityName,";"),"g"),val:val})}else if(i&&l(t,e))e+=8;else if(i&&c(t,e))e+=8;else if(i&&f(t,e))e+=9;else{if(!s)throw new Error("Invalid DOCTYPE");p=!0}o++}if(0!==o)throw new Error("Unclosed DOCTYPE");return{entities:r,i:e}}},4706:function(t,e){var r={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(t,e){return e},attributeValueProcessor:function(t,e){return e},stopNodes:[],alwaysCreateTextNode:!1,isArray:function(){return!1},commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(t,e,r){return t}};e.buildOptions=function(t){return Object.assign({},r,t)},e.defaultOptions=r},9244:function(t,e,r){"use strict";function n(t,e,r){return(e=a(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function o(t){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,a(n.key),n)}}function a(t){var e=function(t,e){if("object"!=o(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==o(e)?e:e+""}var s=r(144),u=r(5295),l=r(8763),c=r(8795),f=function(t,e,r){return e&&i(t.prototype,e),r&&i(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.options=e,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"Â¢"},pound:{regex:/&(pound|#163);/g,val:"Â£"},yen:{regex:/&(yen|#165);/g,val:"Â¥"},euro:{regex:/&(euro|#8364);/g,val:"â¬"},copyright:{regex:/&(copy|#169);/g,val:"Â©"},reg:{regex:/&(reg|#174);/g,val:"Â®"},inr:{regex:/&(inr|#8377);/g,val:"â¹"}},this.addExternalEntities=h,this.parseXml=g,this.parseTextData=p,this.resolveNameSpace=d,this.buildAttributesMap=v,this.isItStopNode=S,this.replaceEntitiesValue=b,this.readStopNodeData=E,this.saveTextToParentTag=w,this.addChild=m});function h(t){for(var e=Object.keys(t),r=0;r<e.length;r++){var n=e[r];this.lastEntities[n]={regex:new RegExp("&"+n+";","g"),val:t[n]}}}function p(t,e,r,n,i,a,s){if(void 0!==t&&(this.options.trimValues&&!n&&(t=t.trim()),t.length>0)){s||(t=this.replaceEntitiesValue(t));var u=this.options.tagValueProcessor(e,t,r,i,a);return null===u||void 0===u?t:o(u)!==o(t)||u!==t?u:this.options.trimValues?O(t,this.options.parseTagValue,this.options.numberParseOptions):t.trim()===t?O(t,this.options.parseTagValue,this.options.numberParseOptions):t}}function d(t){if(this.options.removeNSPrefix){var e=t.split(":"),r="/"===t.charAt(0)?"/":"";if("xmlns"===e[0])return"";2===e.length&&(t=r+e[1])}return t}var y=new RegExp("([^\\s=]+)\\s*(=\\s*(['\"])([\\s\\S]*?)\\3)?","gm");function v(t,e,r){if(!this.options.ignoreAttributes&&"string"==typeof t){for(var n=s.getAllMatches(t,y),i=n.length,a={},u=0;u<i;u++){var l=this.resolveNameSpace(n[u][1]),c=n[u][4],f=this.options.attributeNamePrefix+l;if(l.length)if(this.options.transformAttributeName&&(f=this.options.transformAttributeName(f)),"__proto__"===f&&(f="#__proto__"),void 0!==c){this.options.trimValues&&(c=c.trim()),c=this.replaceEntitiesValue(c);var h=this.options.attributeValueProcessor(l,c,e);null===h||void 0===h?a[f]=c:o(h)!==o(c)||h!==c?a[f]=h:a[f]=O(c,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(a[f]=!0)}if(!Object.keys(a).length)return;if(this.options.attributesGroupName){var p={};return p[this.options.attributesGroupName]=a,p}return a}}var g=function(t){t=t.replace(/\r\n?/g,"\n");for(var e=new u("!xml"),r=e,o="",i="",a=0;a<t.length;a++){if("<"===t[a])if("/"===t[a+1]){var s=x(t,">",a,"Closing Tag is not closed."),c=t.substring(a+2,s).trim();if(this.options.removeNSPrefix){var f=c.indexOf(":");-1!==f&&(c=c.substr(f+1))}this.options.transformTagName&&(c=this.options.transformTagName(c)),r&&(o=this.saveTextToParentTag(o,r,i));var h=i.substring(i.lastIndexOf(".")+1);if(c&&-1!==this.options.unpairedTags.indexOf(c))throw new Error("Unpaired tag can not be used as closing tag: </".concat(c,">"));var p=0;h&&-1!==this.options.unpairedTags.indexOf(h)?(p=i.lastIndexOf(".",i.lastIndexOf(".")-1),this.tagsNodeStack.pop()):p=i.lastIndexOf("."),i=i.substring(0,p),r=this.tagsNodeStack.pop(),o="",a=s}else if("?"===t[a+1]){var d=_(t,a,!1,"?>");if(!d)throw new Error("Pi Tag is not closed.");if(o=this.saveTextToParentTag(o,r,i),this.options.ignoreDeclaration&&"?xml"===d.tagName||this.options.ignorePiTags);else{var y=new u(d.tagName);y.add(this.options.textNodeName,""),d.tagName!==d.tagExp&&d.attrExpPresent&&(y[":@"]=this.buildAttributesMap(d.tagExp,i,d.tagName)),this.addChild(r,y,i)}a=d.closeIndex+1}else if("!--"===t.substr(a+1,3)){var v=x(t,"--\x3e",a+4,"Comment is not closed.");if(this.options.commentPropName){var g=t.substring(a+4,v-2);o=this.saveTextToParentTag(o,r,i),r.add(this.options.commentPropName,[n({},this.options.textNodeName,g)])}a=v}else if("!D"===t.substr(a+1,2)){var m=l(t,a);this.docTypeEntities=m.entities,a=m.i}else if("!["===t.substr(a+1,2)){var b=x(t,"]]>",a,"CDATA is not closed.")-2,w=t.substring(a+9,b);o=this.saveTextToParentTag(o,r,i);var S=this.parseTextData(w,r.tagname,i,!0,!1,!0,!0);void 0==S&&(S=""),this.options.cdataPropName?r.add(this.options.cdataPropName,[n({},this.options.textNodeName,w)]):r.add(this.options.textNodeName,S),a=b+2}else{var E=_(t,a,this.options.removeNSPrefix),O=E.tagName,P=E.rawTagName,k=E.tagExp,C=E.attrExpPresent,T=E.closeIndex;this.options.transformTagName&&(O=this.options.transformTagName(O)),r&&o&&"!xml"!==r.tagname&&(o=this.saveTextToParentTag(o,r,i,!1));var A=r;if(A&&-1!==this.options.unpairedTags.indexOf(A.tagname)&&(r=this.tagsNodeStack.pop(),i=i.substring(0,i.lastIndexOf("."))),O!==e.tagname&&(i+=i?"."+O:O),this.isItStopNode(this.options.stopNodes,i,O)){var M="";if(k.length>0&&k.lastIndexOf("/")===k.length-1)a=E.closeIndex;else if(-1!==this.options.unpairedTags.indexOf(O))a=E.closeIndex;else{var j=this.readStopNodeData(t,P,T+1);if(!j)throw new Error("Unexpected end of ".concat(P));a=j.i,M=j.tagContent}var I=new u(O);O!==k&&C&&(I[":@"]=this.buildAttributesMap(k,i,O)),M&&(M=this.parseTextData(M,O,i,!0,C,!0,!0)),i=i.substr(0,i.lastIndexOf(".")),I.add(this.options.textNodeName,M),this.addChild(r,I,i)}else{if(k.length>0&&k.lastIndexOf("/")===k.length-1){"/"===O[O.length-1]?(O=O.substr(0,O.length-1),i=i.substr(0,i.length-1),k=O):k=k.substr(0,k.length-1),this.options.transformTagName&&(O=this.options.transformTagName(O));var N=new u(O);O!==k&&C&&(N[":@"]=this.buildAttributesMap(k,i,O)),this.addChild(r,N,i),i=i.substr(0,i.lastIndexOf("."))}else{var L=new u(O);this.tagsNodeStack.push(r),O!==k&&C&&(L[":@"]=this.buildAttributesMap(k,i,O)),this.addChild(r,L,i),r=L}o="",a=T}}else o+=t[a]}return e.child};function m(t,e,r){var n=this.options.updateTag(e.tagname,r,e[":@"]);!1===n||("string"==typeof n?(e.tagname=n,t.addChild(e)):t.addChild(e))}var b=function(t){if(this.options.processEntities){for(var e in this.docTypeEntities){var r=this.docTypeEntities[e];t=t.replace(r.regx,r.val)}for(var n in this.lastEntities){var o=this.lastEntities[n];t=t.replace(o.regex,o.val)}if(this.options.htmlEntities)for(var i in this.htmlEntities){var a=this.htmlEntities[i];t=t.replace(a.regex,a.val)}t=t.replace(this.ampEntity.regex,this.ampEntity.val)}return t};function w(t,e,r,n){return t&&(void 0===n&&(n=0===Object.keys(e.child).length),void 0!==(t=this.parseTextData(t,e.tagname,r,!1,!!e[":@"]&&0!==Object.keys(e[":@"]).length,n))&&""!==t&&e.add(this.options.textNodeName,t),t=""),t}function S(t,e,r){var n="*."+r;for(var o in t){var i=t[o];if(n===i||e===i)return!0}return!1}function x(t,e,r,n){var o=t.indexOf(e,r);if(-1===o)throw new Error(n);return o+e.length-1}function _(t,e,r){var n=function(t,e){for(var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:">",o="",i=e;i<t.length;i++){var a=t[i];if(r)a===r&&(r="");else if('"'===a||"'"===a)r=a;else if(a===n[0]){if(!n[1])return{data:o,index:i};if(t[i+1]===n[1])return{data:o,index:i}}else"\t"===a&&(a=" ");o+=a}}(t,e+1,arguments.length>3&&void 0!==arguments[3]?arguments[3]:">");if(n){var o=n.data,i=n.index,a=o.search(/\s/),s=o,u=!0;-1!==a&&(s=o.substring(0,a),o=o.substring(a+1).trimStart());var l=s;if(r){var c=s.indexOf(":");-1!==c&&(u=(s=s.substr(c+1))!==n.data.substr(c+1))}return{tagName:s,tagExp:o,closeIndex:i,attrExpPresent:u,rawTagName:l}}}function E(t,e,r){for(var n=r,o=1;r<t.length;r++)if("<"===t[r])if("/"===t[r+1]){var i=x(t,">",r,"".concat(e," is not closed"));if(t.substring(r+2,i).trim()===e&&0===--o)return{tagContent:t.substring(n,r),i:i};r=i}else if("?"===t[r+1]){r=x(t,"?>",r+1,"StopNode is not closed.")}else if("!--"===t.substr(r+1,3)){r=x(t,"--\x3e",r+3,"StopNode is not closed.")}else if("!["===t.substr(r+1,2)){r=x(t,"]]>",r,"StopNode is not closed.")-2}else{var a=_(t,r,">");if(a)(a&&a.tagName)===e&&"/"!==a.tagExp[a.tagExp.length-1]&&o++,r=a.closeIndex}}function O(t,e,r){if(e&&"string"==typeof t){var n=t.trim();return"true"===n||"false"!==n&&c(t,r)}return s.isExist(t)?t:""}t.exports=f},9162:function(t,e,r){function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,i(n.key),n)}}function i(t){var e=function(t,e){if("object"!=n(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==n(e)?e:e+""}var a=r(4706).buildOptions,s=r(9244),u=r(1520).prettify,l=r(5954),c=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.externalEntities={},this.options=a(e)},(e=[{key:"parse",value:function(t,e){if("string"==typeof t);else{if(!t.toString)throw new Error("XML data is accepted in String or Bytes[] form.");t=t.toString()}if(e){!0===e&&(e={});var r=l.validate(t,e);if(!0!==r)throw Error("".concat(r.err.msg,":").concat(r.err.line,":").concat(r.err.col))}var n=new s(this.options);n.addExternalEntities(this.externalEntities);var o=n.parseXml(t);return this.options.preserveOrder||void 0===o?o:u(o,this.options)}},{key:"addEntity",value:function(t,e){if(-1!==e.indexOf("&"))throw new Error("Entity value can't have '&'");if(-1!==t.indexOf("&")||-1!==t.indexOf(";"))throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if("&"===e)throw new Error("An entity with value '&' is not permitted");this.externalEntities[t]=e}}])&&o(t.prototype,e),r&&o(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();t.exports=c},1520:function(t,e){"use strict";function r(t){for(var e=Object.keys(t),r=0;r<e.length;r++){var n=e[r];if(":@"!==n)return n}}function n(t,e,r,n){if(e)for(var o=Object.keys(e),i=o.length,a=0;a<i;a++){var s=o[a];n.isArray(s,r+"."+s,!0,!0)?t[s]=[e[s]]:t[s]=e[s]}}function o(t,e){var r=e.textNodeName,n=Object.keys(t).length;return 0===n||!(1!==n||!t[r]&&"boolean"!=typeof t[r]&&0!==t[r])}e.prettify=function(t,e){return function t(e,i,a){for(var s,u={},l=0;l<e.length;l++){var c=e[l],f=r(c),h="";if(h=void 0===a?f:a+"."+f,f===i.textNodeName)void 0===s?s=c[f]:s+=""+c[f];else{if(void 0===f)continue;if(c[f]){var p=t(c[f],i,h),d=o(p,i);c[":@"]?n(p,c[":@"],h,i):1!==Object.keys(p).length||void 0===p[i.textNodeName]||i.alwaysCreateTextNode?0===Object.keys(p).length&&(i.alwaysCreateTextNode?p[i.textNodeName]="":p=""):p=p[i.textNodeName],void 0!==u[f]&&u.hasOwnProperty(f)?(Array.isArray(u[f])||(u[f]=[u[f]]),u[f].push(p)):i.isArray(f,h,d)?u[f]=[p]:u[f]=p}}}return"string"==typeof s?s.length>0&&(u[i.textNodeName]=s):void 0!==s&&(u[i.textNodeName]=s),u}(t,e)}},5295:function(t){"use strict";function e(t){"@babel/helpers - typeof";return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e,r){return(e=o(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,o(n.key),n)}}function o(t){var r=function(t,r){if("object"!=e(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,r||"default");if("object"!=e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==e(r)?r:r+""}var i=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.tagname=e,this.child=[],this[":@"]={}},(e=[{key:"add",value:function(t,e){"__proto__"===t&&(t="#__proto__"),this.child.push(r({},t,e))}},{key:"addChild",value:function(t){"__proto__"===t.tagname&&(t.tagname="#__proto__"),t[":@"]&&Object.keys(t[":@"]).length>0?this.child.push(r(r({},t.tagname,t.child),":@",t[":@"])):this.child.push(r({},t.tagname,t.child))}}])&&n(t.prototype,e),o&&n(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,o}();t.exports=i},5937:function(t){!function(e){"use strict";if(e.__disableNativeFetch||!e.fetch){s.prototype.append=function(t,e){t=i(t),e=a(e);var r=this.map[t];r||(r=[],this.map[t]=r),r.push(e)},s.prototype.delete=function(t){delete this.map[i(t)]},s.prototype.get=function(t){var e=this.map[i(t)];return e?e[0]:null},s.prototype.getAll=function(t){return this.map[i(t)]||[]},s.prototype.has=function(t){return this.map.hasOwnProperty(i(t))},s.prototype.set=function(t,e){this.map[i(t)]=[a(e)]},s.prototype.forEach=function(t,e){Object.getOwnPropertyNames(this.map).forEach(function(r){this.map[r].forEach(function(n){t.call(e,n,r,this)},this)},this)};var r={blob:"FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e},n=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];h.prototype.clone=function(){return new h(this)},f.call(h.prototype),f.call(d.prototype),d.prototype.clone=function(){return new d(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new s(this.headers),url:this.url})},d.error=function(){var t=new d(null,{status:0,statusText:""});return t.type="error",t};var o=[301,302,303,307,308];d.redirect=function(t,e){if(-1===o.indexOf(e))throw new RangeError("Invalid status code");return new d(null,{status:e,headers:{location:t}})},e.Headers=s,e.Request=h,e.Response=d,e.fetch=function(t,e){return new Promise(function(n,o){var i;i=h.prototype.isPrototypeOf(t)&&!e?t:new h(t,e);var a=new XMLHttpRequest;var u=!1;function l(){if(4===a.readyState){var t=1223===a.status?204:a.status;if(t<100||t>599){if(u)return;return u=!0,void o(new TypeError("Network request failed"))}var e={status:t,statusText:a.statusText,headers:function(t){var e=new s;return t.getAllResponseHeaders().trim().split("\n").forEach(function(t){var r=t.trim().split(":"),n=r.shift().trim(),o=r.join(":").trim();e.append(n,o)}),e}(a),url:"responseURL"in a?a.responseURL:/^X-Request-URL:/m.test(a.getAllResponseHeaders())?a.getResponseHeader("X-Request-URL"):void 0},r="response"in a?a.response:a.responseText;u||(u=!0,n(new d(r,e)))}}a.onreadystatechange=l,a.onload=l,a.onerror=function(){u||(u=!0,o(new TypeError("Network request failed")))},a.open(i.method,i.url,!0);try{"include"===i.credentials&&("withCredentials"in a?a.withCredentials=!0:console&&console.warn&&console.warn("withCredentials is not supported, you can ignore this warning"))}catch(t){console&&console.warn&&console.warn("set withCredentials error:"+t)}"responseType"in a&&r.blob&&(a.responseType="blob"),i.headers.forEach(function(t,e){a.setRequestHeader(e,t)}),a.send(void 0===i._bodyInit?null:i._bodyInit)})},e.fetch.polyfill=!0,t.exports&&(t.exports=e.fetch)}function i(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function a(t){return"string"!=typeof t&&(t=String(t)),t}function s(t){this.map={},t instanceof s?t.forEach(function(t,e){this.append(e,t)},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}function u(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function l(t){return new Promise(function(e,r){t.onload=function(){e(t.result)},t.onerror=function(){r(t.error)}})}function c(t){var e=new FileReader;return e.readAsArrayBuffer(t),l(e)}function f(){return this.bodyUsed=!1,this._initBody=function(t,e){if(this._bodyInit=t,"string"==typeof t)this._bodyText=t;else if(r.blob&&Blob.prototype.isPrototypeOf(t))this._bodyBlob=t,this._options=e;else if(r.formData&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else if(t){if(!r.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(t))throw new Error("unsupported BodyInit type")}else this._bodyText=""},r.blob?(this.blob=function(){var t=u(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this.blob().then(c)},this.text=function(){var t,e,r,n,o,i,a,s=u(this);if(s)return s;if(this._bodyBlob)return t=this._bodyBlob,e=this._options,r=new FileReader,n=e.headers.map["content-type"]?e.headers.map["content-type"].toString():"",o=/charset\=[0-9a-zA-Z\-\_]*;?/,i=t.type.match(o)||n.match(o),a=[t],i&&a.push(i[0].replace(/^charset\=/,"").replace(/;$/,"")),r.readAsText.apply(r,a),l(r);if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)}):this.text=function(){var t=u(this);return t||Promise.resolve(this._bodyText)},r.formData&&(this.formData=function(){return this.text().then(p)}),this.json=function(){return this.text().then(JSON.parse)},this}function h(t,e){var r,o,i=(e=e||{}).body;if(h.prototype.isPrototypeOf(t)){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new s(t.headers)),this.method=t.method,this.mode=t.mode,i||(i=t._bodyInit,t.bodyUsed=!0)}else this.url=t;if(this.credentials=e.credentials||this.credentials||"omit",!e.headers&&this.headers||(this.headers=new s(e.headers)),this.method=(r=e.method||this.method||"GET",o=r.toUpperCase(),n.indexOf(o)>-1?o:r),this.mode=e.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(i,e)}function p(t){var e=new FormData;return t.trim().split("&").forEach(function(t){if(t){var r=t.split("="),n=r.shift().replace(/\+/g," "),o=r.join("=").replace(/\+/g," ");e.append(decodeURIComponent(n),decodeURIComponent(o))}}),e}function d(t,e){e||(e={}),this._initBody(t,e),this.type="default",this.status=e.status,this.ok=this.status>=200&&this.status<300,this.statusText=e.statusText,this.headers=e.headers instanceof s?e.headers:new s(e.headers),this.url=e.url||""}}("undefined"!=typeof self?self:this)},4238:function(t,e){var r,n,o;n=[e,t],void 0===(o="function"==typeof(r=function(t,e){"use strict";var r={timeout:5e3,jsonpCallback:"callback",jsonpCallbackFunction:null};function n(t){try{delete window[t]}catch(e){window[t]=void 0}}function o(t){var e=document.getElementById(t);e&&document.getElementsByTagName("head")[0].removeChild(e)}e.exports=function(t){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],i=t,a=e.timeout||r.timeout,s=e.jsonpCallback||r.jsonpCallback,u=void 0;return new Promise(function(r,l){var c=e.jsonpCallbackFunction||"jsonp_"+Date.now()+"_"+Math.ceil(1e5*Math.random()),f=s+"_"+c;window[c]=function(t){r({ok:!0,json:function(){return Promise.resolve(t)}}),u&&clearTimeout(u),o(f),n(c)},i+=-1===i.indexOf("?")?"?":"&";var h=document.createElement("script");h.setAttribute("src",""+i+s+"="+c),e.charset&&h.setAttribute("charset",e.charset),h.id=f,document.getElementsByTagName("head")[0].appendChild(h),u=setTimeout(function(){l(new Error("JSONP request to "+t+" timed out")),n(c),o(f),window[c]=function(){n(c)}},a),h.onerror=function(){l(new Error("JSONP request to "+t+" failed")),n(c),o(f),u&&clearTimeout(u)}})}})?r.apply(e,n):r)||(t.exports=o)},8428:function(t,e,r){"use strict";r.r(e),r.d(e,{ARRAY_TYPE:function(){return o},EPSILON:function(){return n},RANDOM:function(){return i},equals:function(){return l},setMatrixArrayType:function(){return a},toRadian:function(){return u}});var n=1e-6,o="undefined"!=typeof Float32Array?Float32Array:Array,i=Math.random;function a(t){o=t}var s=Math.PI/180;function u(t){return t*s}function l(t,e){return Math.abs(t-e)<=n*Math.max(1,Math.abs(t),Math.abs(e))}Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)})},2917:function(t,e,r){"use strict";r.r(e),r.d(e,{glMatrix:function(){return l},mat2:function(){return n},mat2d:function(){return o},mat3:function(){return st},mat4:function(){return i},quat:function(){return s},quat2:function(){return u},vec2:function(){return On},vec3:function(){return ie},vec4:function(){return a}});var n={};r.r(n),r.d(n,{LDU:function(){return k},add:function(){return C},adjoint:function(){return m},clone:function(){return f},copy:function(){return h},create:function(){return c},determinant:function(){return b},equals:function(){return M},exactEquals:function(){return A},frob:function(){return P},fromRotation:function(){return _},fromScaling:function(){return E},fromValues:function(){return d},identity:function(){return p},invert:function(){return g},mul:function(){return N},multiply:function(){return w},multiplyScalar:function(){return j},multiplyScalarAndAdd:function(){return I},rotate:function(){return S},scale:function(){return x},set:function(){return y},str:function(){return O},sub:function(){return L},subtract:function(){return T},transpose:function(){return v}});var o={};r.r(o),r.d(o,{add:function(){return $},clone:function(){return D},copy:function(){return B},create:function(){return R},determinant:function(){return V},equals:function(){return ot},exactEquals:function(){return nt},frob:function(){return Z},fromRotation:function(){return X},fromScaling:function(){return J},fromTranslation:function(){return K},fromValues:function(){return G},identity:function(){return F},invert:function(){return z},mul:function(){return it},multiply:function(){return H},multiplyScalar:function(){return et},multiplyScalarAndAdd:function(){return rt},rotate:function(){return W},scale:function(){return q},set:function(){return U},str:function(){return Q},sub:function(){return at},subtract:function(){return tt},translate:function(){return Y}});var i={};r.r(i),r.d(i,{add:function(){return Qt},adjoint:function(){return vt},clone:function(){return lt},copy:function(){return ct},create:function(){return ut},determinant:function(){return gt},equals:function(){return re},exactEquals:function(){return ee},frob:function(){return Kt},fromQuat:function(){return Bt},fromQuat2:function(){return jt},fromRotation:function(){return kt},fromRotationTranslation:function(){return Mt},fromRotationTranslationScale:function(){return Rt},fromRotationTranslationScaleOrigin:function(){return Dt},fromScaling:function(){return Pt},fromTranslation:function(){return Ot},fromValues:function(){return ft},fromXRotation:function(){return Ct},fromYRotation:function(){return Tt},fromZRotation:function(){return At},frustum:function(){return Ft},getRotation:function(){return Lt},getScaling:function(){return Nt},getTranslation:function(){return It},identity:function(){return pt},invert:function(){return yt},lookAt:function(){return Yt},mul:function(){return ne},multiply:function(){return mt},multiplyScalar:function(){return $t},multiplyScalarAndAdd:function(){return te},ortho:function(){return Wt},orthoNO:function(){return Ht},orthoZO:function(){return qt},perspective:function(){return Ut},perspectiveFromFieldOfView:function(){return Vt},perspectiveNO:function(){return Gt},perspectiveZO:function(){return zt},rotate:function(){return St},rotateX:function(){return xt},rotateY:function(){return _t},rotateZ:function(){return Et},scale:function(){return wt},set:function(){return ht},str:function(){return Jt},sub:function(){return oe},subtract:function(){return Zt},targetTo:function(){return Xt},translate:function(){return bt},transpose:function(){return dt}});var a={};r.r(a),r.d(a,{add:function(){return fe},ceil:function(){return ye},clone:function(){return se},copy:function(){return le},create:function(){return ae},cross:function(){return Ae},dist:function(){return Ve},distance:function(){return xe},div:function(){return ze},divide:function(){return de},dot:function(){return Te},equals:function(){return Be},exactEquals:function(){return De},floor:function(){return ve},forEach:function(){return Ye},fromValues:function(){return ue},inverse:function(){return ke},len:function(){return We},length:function(){return Ee},lerp:function(){return Me},max:function(){return me},min:function(){return ge},mul:function(){return Ue},multiply:function(){return pe},negate:function(){return Pe},normalize:function(){return Ce},random:function(){return je},round:function(){return be},scale:function(){return we},scaleAndAdd:function(){return Se},set:function(){return ce},sqrDist:function(){return He},sqrLen:function(){return qe},squaredDistance:function(){return _e},squaredLength:function(){return Oe},str:function(){return Re},sub:function(){return Ge},subtract:function(){return he},transformMat4:function(){return Ie},transformQuat:function(){return Ne},zero:function(){return Le}});var s={};r.r(s),r.d(s,{add:function(){return Er},calculateW:function(){return nr},clone:function(){return wr},conjugate:function(){return cr},copy:function(){return xr},create:function(){return Xe},dot:function(){return kr},equals:function(){return Lr},exactEquals:function(){return Nr},exp:function(){return or},fromEuler:function(){return hr},fromMat3:function(){return fr},fromValues:function(){return Sr},getAngle:function(){return Ze},getAxisAngle:function(){return Qe},identity:function(){return Je},invert:function(){return lr},len:function(){return Ar},length:function(){return Tr},lerp:function(){return Cr},ln:function(){return ir},mul:function(){return Or},multiply:function(){return $e},normalize:function(){return Ir},pow:function(){return ar},random:function(){return ur},rotateX:function(){return tr},rotateY:function(){return er},rotateZ:function(){return rr},rotationTo:function(){return Rr},scale:function(){return Pr},set:function(){return _r},setAxes:function(){return Br},setAxisAngle:function(){return Ke},slerp:function(){return sr},sqlerp:function(){return Dr},sqrLen:function(){return jr},squaredLength:function(){return Mr},str:function(){return pr}});var u={};r.r(u),r.d(u,{add:function(){return ln},clone:function(){return Gr},conjugate:function(){return vn},copy:function(){return Yr},create:function(){return Fr},dot:function(){return pn},equals:function(){return En},exactEquals:function(){return _n},fromMat4:function(){return qr},fromRotation:function(){return Wr},fromRotationTranslation:function(){return Vr},fromRotationTranslationValues:function(){return zr},fromTranslation:function(){return Hr},fromValues:function(){return Ur},getDual:function(){return Qr},getReal:function(){return Kr},getTranslation:function(){return tn},identity:function(){return Xr},invert:function(){return yn},len:function(){return mn},length:function(){return gn},lerp:function(){return dn},mul:function(){return fn},multiply:function(){return cn},normalize:function(){return Sn},rotateAroundAxis:function(){return un},rotateByQuatAppend:function(){return an},rotateByQuatPrepend:function(){return sn},rotateX:function(){return rn},rotateY:function(){return nn},rotateZ:function(){return on},scale:function(){return hn},set:function(){return Jr},setDual:function(){return $r},setReal:function(){return Zr},sqrLen:function(){return wn},squaredLength:function(){return bn},str:function(){return xn},translate:function(){return en}});var l=r(8428);function c(){var t=new l.ARRAY_TYPE(4);return l.ARRAY_TYPE!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t}function f(t){var e=new l.ARRAY_TYPE(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function h(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function p(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t}function d(t,e,r,n){var o=new l.ARRAY_TYPE(4);return o[0]=t,o[1]=e,o[2]=r,o[3]=n,o}function y(t,e,r,n,o){return t[0]=e,t[1]=r,t[2]=n,t[3]=o,t}function v(t,e){if(t===e){var r=e[1];t[1]=e[2],t[2]=r}else t[0]=e[0],t[1]=e[2],t[2]=e[1],t[3]=e[3];return t}function g(t,e){var r=e[0],n=e[1],o=e[2],i=e[3],a=r*i-o*n;return a?(a=1/a,t[0]=i*a,t[1]=-n*a,t[2]=-o*a,t[3]=r*a,t):null}function m(t,e){var r=e[0];return t[0]=e[3],t[1]=-e[1],t[2]=-e[2],t[3]=r,t}function b(t){return t[0]*t[3]-t[2]*t[1]}function w(t,e,r){var n=e[0],o=e[1],i=e[2],a=e[3],s=r[0],u=r[1],l=r[2],c=r[3];return t[0]=n*s+i*u,t[1]=o*s+a*u,t[2]=n*l+i*c,t[3]=o*l+a*c,t}function S(t,e,r){var n=e[0],o=e[1],i=e[2],a=e[3],s=Math.sin(r),u=Math.cos(r);return t[0]=n*u+i*s,t[1]=o*u+a*s,t[2]=n*-s+i*u,t[3]=o*-s+a*u,t}function x(t,e,r){var n=e[0],o=e[1],i=e[2],a=e[3],s=r[0],u=r[1];return t[0]=n*s,t[1]=o*s,t[2]=i*u,t[3]=a*u,t}function _(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=r,t[2]=-r,t[3]=n,t}function E(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t}function O(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function P(t){return Math.hypot(t[0],t[1],t[2],t[3])}function k(t,e,r,n){return t[2]=n[2]/n[0],r[0]=n[0],r[1]=n[1],r[3]=n[3]-t[2]*r[1],[t,e,r]}function C(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t}function T(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t}function A(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function M(t,e){var r=t[0],n=t[1],o=t[2],i=t[3],a=e[0],s=e[1],u=e[2],c=e[3];return Math.abs(r-a)<=l.EPSILON*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(n-s)<=l.EPSILON*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(o-u)<=l.EPSILON*Math.max(1,Math.abs(o),Math.abs(u))&&Math.abs(i-c)<=l.EPSILON*Math.max(1,Math.abs(i),Math.abs(c))}function j(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t}function I(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t}var N=w,L=T;function R(){var t=new l.ARRAY_TYPE(6);return l.ARRAY_TYPE!=Float32Array&&(t[1]=0,t[2]=0,t[4]=0,t[5]=0),t[0]=1,t[3]=1,t}function D(t){var e=new l.ARRAY_TYPE(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function B(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function F(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function G(t,e,r,n,o,i){var a=new l.ARRAY_TYPE(6);return a[0]=t,a[1]=e,a[2]=r,a[3]=n,a[4]=o,a[5]=i,a}function U(t,e,r,n,o,i,a){return t[0]=e,t[1]=r,t[2]=n,t[3]=o,t[4]=i,t[5]=a,t}function z(t,e){var r=e[0],n=e[1],o=e[2],i=e[3],a=e[4],s=e[5],u=r*i-n*o;return u?(u=1/u,t[0]=i*u,t[1]=-n*u,t[2]=-o*u,t[3]=r*u,t[4]=(o*s-i*a)*u,t[5]=(n*a-r*s)*u,t):null}function V(t){return t[0]*t[3]-t[1]*t[2]}function H(t,e,r){var n=e[0],o=e[1],i=e[2],a=e[3],s=e[4],u=e[5],l=r[0],c=r[1],f=r[2],h=r[3],p=r[4],d=r[5];return t[0]=n*l+i*c,t[1]=o*l+a*c,t[2]=n*f+i*h,t[3]=o*f+a*h,t[4]=n*p+i*d+s,t[5]=o*p+a*d+u,t}function W(t,e,r){var n=e[0],o=e[1],i=e[2],a=e[3],s=e[4],u=e[5],l=Math.sin(r),c=Math.cos(r);return t[0]=n*c+i*l,t[1]=o*c+a*l,t[2]=n*-l+i*c,t[3]=o*-l+a*c,t[4]=s,t[5]=u,t}function q(t,e,r){var n=e[0],o=e[1],i=e[2],a=e[3],s=e[4],u=e[5],l=r[0],c=r[1];return t[0]=n*l,t[1]=o*l,t[2]=i*c,t[3]=a*c,t[4]=s,t[5]=u,t}function Y(t,e,r){var n=e[0],o=e[1],i=e[2],a=e[3],s=e[4],u=e[5],l=r[0],c=r[1];return t[0]=n,t[1]=o,t[2]=i,t[3]=a,t[4]=n*l+i*c+s,t[5]=o*l+a*c+u,t}function X(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=r,t[2]=-r,t[3]=n,t[4]=0,t[5]=0,t}function J(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t[4]=0,t[5]=0,t}function K(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0],t[5]=e[1],t}function Q(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"}function Z(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],1)}function $(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t[4]=e[4]+r[4],t[5]=e[5]+r[5],t}function tt(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t[4]=e[4]-r[4],t[5]=e[5]-r[5],t}function et(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*r,t[5]=e[5]*r,t}function rt(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t[4]=e[4]+r[4]*n,t[5]=e[5]+r[5]*n,t}function nt(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]}function ot(t,e){var r=t[0],n=t[1],o=t[2],i=t[3],a=t[4],s=t[5],u=e[0],c=e[1],f=e[2],h=e[3],p=e[4],d=e[5];return Math.abs(r-u)<=l.EPSILON*Math.max(1,Math.abs(r),Math.abs(u))&&Math.abs(n-c)<=l.EPSILON*Math.max(1,Math.abs(n),Math.abs(c))&&Math.abs(o-f)<=l.EPSILON*Math.max(1,Math.abs(o),Math.abs(f))&&Math.abs(i-h)<=l.EPSILON*Math.max(1,Math.abs(i),Math.abs(h))&&Math.abs(a-p)<=l.EPSILON*Math.max(1,Math.abs(a),Math.abs(p))&&Math.abs(s-d)<=l.EPSILON*Math.max(1,Math.abs(s),Math.abs(d))}var it=H,at=tt,st=r(8610);function ut(){var t=new l.ARRAY_TYPE(16);return l.ARRAY_TYPE!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function lt(t){var e=new l.ARRAY_TYPE(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function ct(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function ft(t,e,r,n,o,i,a,s,u,c,f,h,p,d,y,v){var g=new l.ARRAY_TYPE(16);return g[0]=t,g[1]=e,g[2]=r,g[3]=n,g[4]=o,g[5]=i,g[6]=a,g[7]=s,g[8]=u,g[9]=c,g[10]=f,g[11]=h,g[12]=p,g[13]=d,g[14]=y,g[15]=v,g}function ht(t,e,r,n,o,i,a,s,u,l,c,f,h,p,d,y,v){return t[0]=e,t[1]=r,t[2]=n,t[3]=o,t[4]=i,t[5]=a,t[6]=s,t[7]=u,t[8]=l,t[9]=c,t[10]=f,t[11]=h,t[12]=p,t[13]=d,t[14]=y,t[15]=v,t}function pt(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function dt(t,e){if(t===e){var r=e[1],n=e[2],o=e[3],i=e[6],a=e[7],s=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=r,t[6]=e[9],t[7]=e[13],t[8]=n,t[9]=i,t[11]=e[14],t[12]=o,t[13]=a,t[14]=s}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function yt(t,e){var r=e[0],n=e[1],o=e[2],i=e[3],a=e[4],s=e[5],u=e[6],l=e[7],c=e[8],f=e[9],h=e[10],p=e[11],d=e[12],y=e[13],v=e[14],g=e[15],m=r*s-n*a,b=r*u-o*a,w=r*l-i*a,S=n*u-o*s,x=n*l-i*s,_=o*l-i*u,E=c*y-f*d,O=c*v-h*d,P=c*g-p*d,k=f*v-h*y,C=f*g-p*y,T=h*g-p*v,A=m*T-b*C+w*k+S*P-x*O+_*E;return A?(A=1/A,t[0]=(s*T-u*C+l*k)*A,t[1]=(o*C-n*T-i*k)*A,t[2]=(y*_-v*x+g*S)*A,t[3]=(h*x-f*_-p*S)*A,t[4]=(u*P-a*T-l*O)*A,t[5]=(r*T-o*P+i*O)*A,t[6]=(v*w-d*_-g*b)*A,t[7]=(c*_-h*w+p*b)*A,t[8]=(a*C-s*P+l*E)*A,t[9]=(n*P-r*C-i*E)*A,t[10]=(d*x-y*w+g*m)*A,t[11]=(f*w-c*x-p*m)*A,t[12]=(s*O-a*k-u*E)*A,t[13]=(r*k-n*O+o*E)*A,t[14]=(y*b-d*S-v*m)*A,t[15]=(c*S-f*b+h*m)*A,t):null}function vt(t,e){var r=e[0],n=e[1],o=e[2],i=e[3],a=e[4],s=e[5],u=e[6],l=e[7],c=e[8],f=e[9],h=e[10],p=e[11],d=e[12],y=e[13],v=e[14],g=e[15];return t[0]=s*(h*g-p*v)-f*(u*g-l*v)+y*(u*p-l*h),t[1]=-(n*(h*g-p*v)-f*(o*g-i*v)+y*(o*p-i*h)),t[2]=n*(u*g-l*v)-s*(o*g-i*v)+y*(o*l-i*u),t[3]=-(n*(u*p-l*h)-s*(o*p-i*h)+f*(o*l-i*u)),t[4]=-(a*(h*g-p*v)-c*(u*g-l*v)+d*(u*p-l*h)),t[5]=r*(h*g-p*v)-c*(o*g-i*v)+d*(o*p-i*h),t[6]=-(r*(u*g-l*v)-a*(o*g-i*v)+d*(o*l-i*u)),t[7]=r*(u*p-l*h)-a*(o*p-i*h)+c*(o*l-i*u),t[8]=a*(f*g-p*y)-c*(s*g-l*y)+d*(s*p-l*f),t[9]=-(r*(f*g-p*y)-c*(n*g-i*y)+d*(n*p-i*f)),t[10]=r*(s*g-l*y)-a*(n*g-i*y)+d*(n*l-i*s),t[11]=-(r*(s*p-l*f)-a*(n*p-i*f)+c*(n*l-i*s)),t[12]=-(a*(f*v-h*y)-c*(s*v-u*y)+d*(s*h-u*f)),t[13]=r*(f*v-h*y)-c*(n*v-o*y)+d*(n*h-o*f),t[14]=-(r*(s*v-u*y)-a*(n*v-o*y)+d*(n*u-o*s)),t[15]=r*(s*h-u*f)-a*(n*h-o*f)+c*(n*u-o*s),t}function gt(t){var e=t[0],r=t[1],n=t[2],o=t[3],i=t[4],a=t[5],s=t[6],u=t[7],l=t[8],c=t[9],f=t[10],h=t[11],p=t[12],d=t[13],y=t[14],v=t[15];return(e*a-r*i)*(f*v-h*y)-(e*s-n*i)*(c*v-h*d)+(e*u-o*i)*(c*y-f*d)+(r*s-n*a)*(l*v-h*p)-(r*u-o*a)*(l*y-f*p)+(n*u-o*s)*(l*d-c*p)}function mt(t,e,r){var n=e[0],o=e[1],i=e[2],a=e[3],s=e[4],u=e[5],l=e[6],c=e[7],f=e[8],h=e[9],p=e[10],d=e[11],y=e[12],v=e[13],g=e[14],m=e[15],b=r[0],w=r[1],S=r[2],x=r[3];return t[0]=b*n+w*s+S*f+x*y,t[1]=b*o+w*u+S*h+x*v,t[2]=b*i+w*l+S*p+x*g,t[3]=b*a+w*c+S*d+x*m,b=r[4],w=r[5],S=r[6],x=r[7],t[4]=b*n+w*s+S*f+x*y,t[5]=b*o+w*u+S*h+x*v,t[6]=b*i+w*l+S*p+x*g,t[7]=b*a+w*c+S*d+x*m,b=r[8],w=r[9],S=r[10],x=r[11],t[8]=b*n+w*s+S*f+x*y,t[9]=b*o+w*u+S*h+x*v,t[10]=b*i+w*l+S*p+x*g,t[11]=b*a+w*c+S*d+x*m,b=r[12],w=r[13],S=r[14],x=r[15],t[12]=b*n+w*s+S*f+x*y,t[13]=b*o+w*u+S*h+x*v,t[14]=b*i+w*l+S*p+x*g,t[15]=b*a+w*c+S*d+x*m,t}function bt(t,e,r){var n,o,i,a,s,u,l,c,f,h,p,d,y=r[0],v=r[1],g=r[2];return e===t?(t[12]=e[0]*y+e[4]*v+e[8]*g+e[12],t[13]=e[1]*y+e[5]*v+e[9]*g+e[13],t[14]=e[2]*y+e[6]*v+e[10]*g+e[14],t[15]=e[3]*y+e[7]*v+e[11]*g+e[15]):(n=e[0],o=e[1],i=e[2],a=e[3],s=e[4],u=e[5],l=e[6],c=e[7],f=e[8],h=e[9],p=e[10],d=e[11],t[0]=n,t[1]=o,t[2]=i,t[3]=a,t[4]=s,t[5]=u,t[6]=l,t[7]=c,t[8]=f,t[9]=h,t[10]=p,t[11]=d,t[12]=n*y+s*v+f*g+e[12],t[13]=o*y+u*v+h*g+e[13],t[14]=i*y+l*v+p*g+e[14],t[15]=a*y+c*v+d*g+e[15]),t}function wt(t,e,r){var n=r[0],o=r[1],i=r[2];return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*o,t[5]=e[5]*o,t[6]=e[6]*o,t[7]=e[7]*o,t[8]=e[8]*i,t[9]=e[9]*i,t[10]=e[10]*i,t[11]=e[11]*i,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function St(t,e,r,n){var o,i,a,s,u,c,f,h,p,d,y,v,g,m,b,w,S,x,_,E,O,P,k,C,T=n[0],A=n[1],M=n[2],j=Math.hypot(T,A,M);return j<l.EPSILON?null:(T*=j=1/j,A*=j,M*=j,o=Math.sin(r),a=1-(i=Math.cos(r)),s=e[0],u=e[1],c=e[2],f=e[3],h=e[4],p=e[5],d=e[6],y=e[7],v=e[8],g=e[9],m=e[10],b=e[11],w=T*T*a+i,S=A*T*a+M*o,x=M*T*a-A*o,_=T*A*a-M*o,E=A*A*a+i,O=M*A*a+T*o,P=T*M*a+A*o,k=A*M*a-T*o,C=M*M*a+i,t[0]=s*w+h*S+v*x,t[1]=u*w+p*S+g*x,t[2]=c*w+d*S+m*x,t[3]=f*w+y*S+b*x,t[4]=s*_+h*E+v*O,t[5]=u*_+p*E+g*O,t[6]=c*_+d*E+m*O,t[7]=f*_+y*E+b*O,t[8]=s*P+h*k+v*C,t[9]=u*P+p*k+g*C,t[10]=c*P+d*k+m*C,t[11]=f*P+y*k+b*C,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function xt(t,e,r){var n=Math.sin(r),o=Math.cos(r),i=e[4],a=e[5],s=e[6],u=e[7],l=e[8],c=e[9],f=e[10],h=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=i*o+l*n,t[5]=a*o+c*n,t[6]=s*o+f*n,t[7]=u*o+h*n,t[8]=l*o-i*n,t[9]=c*o-a*n,t[10]=f*o-s*n,t[11]=h*o-u*n,t}function _t(t,e,r){var n=Math.sin(r),o=Math.cos(r),i=e[0],a=e[1],s=e[2],u=e[3],l=e[8],c=e[9],f=e[10],h=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=i*o-l*n,t[1]=a*o-c*n,t[2]=s*o-f*n,t[3]=u*o-h*n,t[8]=i*n+l*o,t[9]=a*n+c*o,t[10]=s*n+f*o,t[11]=u*n+h*o,t}function Et(t,e,r){var n=Math.sin(r),o=Math.cos(r),i=e[0],a=e[1],s=e[2],u=e[3],l=e[4],c=e[5],f=e[6],h=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=i*o+l*n,t[1]=a*o+c*n,t[2]=s*o+f*n,t[3]=u*o+h*n,t[4]=l*o-i*n,t[5]=c*o-a*n,t[6]=f*o-s*n,t[7]=h*o-u*n,t}function Ot(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function Pt(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function kt(t,e,r){var n,o,i,a=r[0],s=r[1],u=r[2],c=Math.hypot(a,s,u);return c<l.EPSILON?null:(a*=c=1/c,s*=c,u*=c,n=Math.sin(e),i=1-(o=Math.cos(e)),t[0]=a*a*i+o,t[1]=s*a*i+u*n,t[2]=u*a*i-s*n,t[3]=0,t[4]=a*s*i-u*n,t[5]=s*s*i+o,t[6]=u*s*i+a*n,t[7]=0,t[8]=a*u*i+s*n,t[9]=s*u*i-a*n,t[10]=u*u*i+o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}function Ct(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n,t[6]=r,t[7]=0,t[8]=0,t[9]=-r,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Tt(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=0,t[2]=-r,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=r,t[9]=0,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function At(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=r,t[2]=0,t[3]=0,t[4]=-r,t[5]=n,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Mt(t,e,r){var n=e[0],o=e[1],i=e[2],a=e[3],s=n+n,u=o+o,l=i+i,c=n*s,f=n*u,h=n*l,p=o*u,d=o*l,y=i*l,v=a*s,g=a*u,m=a*l;return t[0]=1-(p+y),t[1]=f+m,t[2]=h-g,t[3]=0,t[4]=f-m,t[5]=1-(c+y),t[6]=d+v,t[7]=0,t[8]=h+g,t[9]=d-v,t[10]=1-(c+p),t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t}function jt(t,e){var r=new l.ARRAY_TYPE(3),n=-e[0],o=-e[1],i=-e[2],a=e[3],s=e[4],u=e[5],c=e[6],f=e[7],h=n*n+o*o+i*i+a*a;return h>0?(r[0]=2*(s*a+f*n+u*i-c*o)/h,r[1]=2*(u*a+f*o+c*n-s*i)/h,r[2]=2*(c*a+f*i+s*o-u*n)/h):(r[0]=2*(s*a+f*n+u*i-c*o),r[1]=2*(u*a+f*o+c*n-s*i),r[2]=2*(c*a+f*i+s*o-u*n)),Mt(t,e,r),t}function It(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function Nt(t,e){var r=e[0],n=e[1],o=e[2],i=e[4],a=e[5],s=e[6],u=e[8],l=e[9],c=e[10];return t[0]=Math.hypot(r,n,o),t[1]=Math.hypot(i,a,s),t[2]=Math.hypot(u,l,c),t}function Lt(t,e){var r=new l.ARRAY_TYPE(3);Nt(r,e);var n=1/r[0],o=1/r[1],i=1/r[2],a=e[0]*n,s=e[1]*o,u=e[2]*i,c=e[4]*n,f=e[5]*o,h=e[6]*i,p=e[8]*n,d=e[9]*o,y=e[10]*i,v=a+f+y,g=0;return v>0?(g=2*Math.sqrt(v+1),t[3]=.25*g,t[0]=(h-d)/g,t[1]=(p-u)/g,t[2]=(s-c)/g):a>f&&a>y?(g=2*Math.sqrt(1+a-f-y),t[3]=(h-d)/g,t[0]=.25*g,t[1]=(s+c)/g,t[2]=(p+u)/g):f>y?(g=2*Math.sqrt(1+f-a-y),t[3]=(p-u)/g,t[0]=(s+c)/g,t[1]=.25*g,t[2]=(h+d)/g):(g=2*Math.sqrt(1+y-a-f),t[3]=(s-c)/g,t[0]=(p+u)/g,t[1]=(h+d)/g,t[2]=.25*g),t}function Rt(t,e,r,n){var o=e[0],i=e[1],a=e[2],s=e[3],u=o+o,l=i+i,c=a+a,f=o*u,h=o*l,p=o*c,d=i*l,y=i*c,v=a*c,g=s*u,m=s*l,b=s*c,w=n[0],S=n[1],x=n[2];return t[0]=(1-(d+v))*w,t[1]=(h+b)*w,t[2]=(p-m)*w,t[3]=0,t[4]=(h-b)*S,t[5]=(1-(f+v))*S,t[6]=(y+g)*S,t[7]=0,t[8]=(p+m)*x,t[9]=(y-g)*x,t[10]=(1-(f+d))*x,t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t}function Dt(t,e,r,n,o){var i=e[0],a=e[1],s=e[2],u=e[3],l=i+i,c=a+a,f=s+s,h=i*l,p=i*c,d=i*f,y=a*c,v=a*f,g=s*f,m=u*l,b=u*c,w=u*f,S=n[0],x=n[1],_=n[2],E=o[0],O=o[1],P=o[2],k=(1-(y+g))*S,C=(p+w)*S,T=(d-b)*S,A=(p-w)*x,M=(1-(h+g))*x,j=(v+m)*x,I=(d+b)*_,N=(v-m)*_,L=(1-(h+y))*_;return t[0]=k,t[1]=C,t[2]=T,t[3]=0,t[4]=A,t[5]=M,t[6]=j,t[7]=0,t[8]=I,t[9]=N,t[10]=L,t[11]=0,t[12]=r[0]+E-(k*E+A*O+I*P),t[13]=r[1]+O-(C*E+M*O+N*P),t[14]=r[2]+P-(T*E+j*O+L*P),t[15]=1,t}function Bt(t,e){var r=e[0],n=e[1],o=e[2],i=e[3],a=r+r,s=n+n,u=o+o,l=r*a,c=n*a,f=n*s,h=o*a,p=o*s,d=o*u,y=i*a,v=i*s,g=i*u;return t[0]=1-f-d,t[1]=c+g,t[2]=h-v,t[3]=0,t[4]=c-g,t[5]=1-l-d,t[6]=p+y,t[7]=0,t[8]=h+v,t[9]=p-y,t[10]=1-l-f,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Ft(t,e,r,n,o,i,a){var s=1/(r-e),u=1/(o-n),l=1/(i-a);return t[0]=2*i*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*i*u,t[6]=0,t[7]=0,t[8]=(r+e)*s,t[9]=(o+n)*u,t[10]=(a+i)*l,t[11]=-1,t[12]=0,t[13]=0,t[14]=a*i*2*l,t[15]=0,t}function Gt(t,e,r,n,o){var i,a=1/Math.tan(e/2);return t[0]=a/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=o&&o!==1/0?(i=1/(n-o),t[10]=(o+n)*i,t[14]=2*o*n*i):(t[10]=-1,t[14]=-2*n),t}var Ut=Gt;function zt(t,e,r,n,o){var i,a=1/Math.tan(e/2);return t[0]=a/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=o&&o!==1/0?(i=1/(n-o),t[10]=o*i,t[14]=o*n*i):(t[10]=-1,t[14]=-n),t}function Vt(t,e,r,n){var o=Math.tan(e.upDegrees*Math.PI/180),i=Math.tan(e.downDegrees*Math.PI/180),a=Math.tan(e.leftDegrees*Math.PI/180),s=Math.tan(e.rightDegrees*Math.PI/180),u=2/(a+s),l=2/(o+i);return t[0]=u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=l,t[6]=0,t[7]=0,t[8]=-(a-s)*u*.5,t[9]=(o-i)*l*.5,t[10]=n/(r-n),t[11]=-1,t[12]=0,t[13]=0,t[14]=n*r/(r-n),t[15]=0,t}function Ht(t,e,r,n,o,i,a){var s=1/(e-r),u=1/(n-o),l=1/(i-a);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*l,t[11]=0,t[12]=(e+r)*s,t[13]=(o+n)*u,t[14]=(a+i)*l,t[15]=1,t}var Wt=Ht;function qt(t,e,r,n,o,i,a){var s=1/(e-r),u=1/(n-o),l=1/(i-a);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=l,t[11]=0,t[12]=(e+r)*s,t[13]=(o+n)*u,t[14]=i*l,t[15]=1,t}function Yt(t,e,r,n){var o,i,a,s,u,c,f,h,p,d,y=e[0],v=e[1],g=e[2],m=n[0],b=n[1],w=n[2],S=r[0],x=r[1],_=r[2];return Math.abs(y-S)<l.EPSILON&&Math.abs(v-x)<l.EPSILON&&Math.abs(g-_)<l.EPSILON?pt(t):(f=y-S,h=v-x,p=g-_,o=b*(p*=d=1/Math.hypot(f,h,p))-w*(h*=d),i=w*(f*=d)-m*p,a=m*h-b*f,(d=Math.hypot(o,i,a))?(o*=d=1/d,i*=d,a*=d):(o=0,i=0,a=0),s=h*a-p*i,u=p*o-f*a,c=f*i-h*o,(d=Math.hypot(s,u,c))?(s*=d=1/d,u*=d,c*=d):(s=0,u=0,c=0),t[0]=o,t[1]=s,t[2]=f,t[3]=0,t[4]=i,t[5]=u,t[6]=h,t[7]=0,t[8]=a,t[9]=c,t[10]=p,t[11]=0,t[12]=-(o*y+i*v+a*g),t[13]=-(s*y+u*v+c*g),t[14]=-(f*y+h*v+p*g),t[15]=1,t)}function Xt(t,e,r,n){var o=e[0],i=e[1],a=e[2],s=n[0],u=n[1],l=n[2],c=o-r[0],f=i-r[1],h=a-r[2],p=c*c+f*f+h*h;p>0&&(c*=p=1/Math.sqrt(p),f*=p,h*=p);var d=u*h-l*f,y=l*c-s*h,v=s*f-u*c;return(p=d*d+y*y+v*v)>0&&(d*=p=1/Math.sqrt(p),y*=p,v*=p),t[0]=d,t[1]=y,t[2]=v,t[3]=0,t[4]=f*v-h*y,t[5]=h*d-c*v,t[6]=c*y-f*d,t[7]=0,t[8]=c,t[9]=f,t[10]=h,t[11]=0,t[12]=o,t[13]=i,t[14]=a,t[15]=1,t}function Jt(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function Kt(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}function Qt(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t[4]=e[4]+r[4],t[5]=e[5]+r[5],t[6]=e[6]+r[6],t[7]=e[7]+r[7],t[8]=e[8]+r[8],t[9]=e[9]+r[9],t[10]=e[10]+r[10],t[11]=e[11]+r[11],t[12]=e[12]+r[12],t[13]=e[13]+r[13],t[14]=e[14]+r[14],t[15]=e[15]+r[15],t}function Zt(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t[4]=e[4]-r[4],t[5]=e[5]-r[5],t[6]=e[6]-r[6],t[7]=e[7]-r[7],t[8]=e[8]-r[8],t[9]=e[9]-r[9],t[10]=e[10]-r[10],t[11]=e[11]-r[11],t[12]=e[12]-r[12],t[13]=e[13]-r[13],t[14]=e[14]-r[14],t[15]=e[15]-r[15],t}function $t(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*r,t[9]=e[9]*r,t[10]=e[10]*r,t[11]=e[11]*r,t[12]=e[12]*r,t[13]=e[13]*r,t[14]=e[14]*r,t[15]=e[15]*r,t}function te(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t[4]=e[4]+r[4]*n,t[5]=e[5]+r[5]*n,t[6]=e[6]+r[6]*n,t[7]=e[7]+r[7]*n,t[8]=e[8]+r[8]*n,t[9]=e[9]+r[9]*n,t[10]=e[10]+r[10]*n,t[11]=e[11]+r[11]*n,t[12]=e[12]+r[12]*n,t[13]=e[13]+r[13]*n,t[14]=e[14]+r[14]*n,t[15]=e[15]+r[15]*n,t}function ee(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}function re(t,e){var r=t[0],n=t[1],o=t[2],i=t[3],a=t[4],s=t[5],u=t[6],c=t[7],f=t[8],h=t[9],p=t[10],d=t[11],y=t[12],v=t[13],g=t[14],m=t[15],b=e[0],w=e[1],S=e[2],x=e[3],_=e[4],E=e[5],O=e[6],P=e[7],k=e[8],C=e[9],T=e[10],A=e[11],M=e[12],j=e[13],I=e[14],N=e[15];return Math.abs(r-b)<=l.EPSILON*Math.max(1,Math.abs(r),Math.abs(b))&&Math.abs(n-w)<=l.EPSILON*Math.max(1,Math.abs(n),Math.abs(w))&&Math.abs(o-S)<=l.EPSILON*Math.max(1,Math.abs(o),Math.abs(S))&&Math.abs(i-x)<=l.EPSILON*Math.max(1,Math.abs(i),Math.abs(x))&&Math.abs(a-_)<=l.EPSILON*Math.max(1,Math.abs(a),Math.abs(_))&&Math.abs(s-E)<=l.EPSILON*Math.max(1,Math.abs(s),Math.abs(E))&&Math.abs(u-O)<=l.EPSILON*Math.max(1,Math.abs(u),Math.abs(O))&&Math.abs(c-P)<=l.EPSILON*Math.max(1,Math.abs(c),Math.abs(P))&&Math.abs(f-k)<=l.EPSILON*Math.max(1,Math.abs(f),Math.abs(k))&&Math.abs(h-C)<=l.EPSILON*Math.max(1,Math.abs(h),Math.abs(C))&&Math.abs(p-T)<=l.EPSILON*Math.max(1,Math.abs(p),Math.abs(T))&&Math.abs(d-A)<=l.EPSILON*Math.max(1,Math.abs(d),Math.abs(A))&&Math.abs(y-M)<=l.EPSILON*Math.max(1,Math.abs(y),Math.abs(M))&&Math.abs(v-j)<=l.EPSILON*Math.max(1,Math.abs(v),Math.abs(j))&&Math.abs(g-I)<=l.EPSILON*Math.max(1,Math.abs(g),Math.abs(I))&&Math.abs(m-N)<=l.EPSILON*Math.max(1,Math.abs(m),Math.abs(N))}var ne=mt,oe=Zt,ie=r(4010);function ae(){var t=new l.ARRAY_TYPE(4);return l.ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function se(t){var e=new l.ARRAY_TYPE(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function ue(t,e,r,n){var o=new l.ARRAY_TYPE(4);return o[0]=t,o[1]=e,o[2]=r,o[3]=n,o}function le(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function ce(t,e,r,n,o){return t[0]=e,t[1]=r,t[2]=n,t[3]=o,t}function fe(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t}function he(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t}function pe(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t[2]=e[2]*r[2],t[3]=e[3]*r[3],t}function de(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t[2]=e[2]/r[2],t[3]=e[3]/r[3],t}function ye(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t}function ve(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t}function ge(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t[2]=Math.min(e[2],r[2]),t[3]=Math.min(e[3],r[3]),t}function me(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t[2]=Math.max(e[2],r[2]),t[3]=Math.max(e[3],r[3]),t}function be(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t}function we(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t}function Se(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t}function xe(t,e){var r=e[0]-t[0],n=e[1]-t[1],o=e[2]-t[2],i=e[3]-t[3];return Math.hypot(r,n,o,i)}function _e(t,e){var r=e[0]-t[0],n=e[1]-t[1],o=e[2]-t[2],i=e[3]-t[3];return r*r+n*n+o*o+i*i}function Ee(t){var e=t[0],r=t[1],n=t[2],o=t[3];return Math.hypot(e,r,n,o)}function Oe(t){var e=t[0],r=t[1],n=t[2],o=t[3];return e*e+r*r+n*n+o*o}function Pe(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t}function ke(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t}function Ce(t,e){var r=e[0],n=e[1],o=e[2],i=e[3],a=r*r+n*n+o*o+i*i;return a>0&&(a=1/Math.sqrt(a)),t[0]=r*a,t[1]=n*a,t[2]=o*a,t[3]=i*a,t}function Te(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function Ae(t,e,r,n){var o=r[0]*n[1]-r[1]*n[0],i=r[0]*n[2]-r[2]*n[0],a=r[0]*n[3]-r[3]*n[0],s=r[1]*n[2]-r[2]*n[1],u=r[1]*n[3]-r[3]*n[1],l=r[2]*n[3]-r[3]*n[2],c=e[0],f=e[1],h=e[2],p=e[3];return t[0]=f*l-h*u+p*s,t[1]=-c*l+h*a-p*i,t[2]=c*u-f*a+p*o,t[3]=-c*s+f*i-h*o,t}function Me(t,e,r,n){var o=e[0],i=e[1],a=e[2],s=e[3];return t[0]=o+n*(r[0]-o),t[1]=i+n*(r[1]-i),t[2]=a+n*(r[2]-a),t[3]=s+n*(r[3]-s),t}function je(t,e){var r,n,o,i,a,s;e=e||1;do{a=(r=2*l.RANDOM()-1)*r+(n=2*l.RANDOM()-1)*n}while(a>=1);do{s=(o=2*l.RANDOM()-1)*o+(i=2*l.RANDOM()-1)*i}while(s>=1);var u=Math.sqrt((1-a)/s);return t[0]=e*r,t[1]=e*n,t[2]=e*o*u,t[3]=e*i*u,t}function Ie(t,e,r){var n=e[0],o=e[1],i=e[2],a=e[3];return t[0]=r[0]*n+r[4]*o+r[8]*i+r[12]*a,t[1]=r[1]*n+r[5]*o+r[9]*i+r[13]*a,t[2]=r[2]*n+r[6]*o+r[10]*i+r[14]*a,t[3]=r[3]*n+r[7]*o+r[11]*i+r[15]*a,t}function Ne(t,e,r){var n=e[0],o=e[1],i=e[2],a=r[0],s=r[1],u=r[2],l=r[3],c=l*n+s*i-u*o,f=l*o+u*n-a*i,h=l*i+a*o-s*n,p=-a*n-s*o-u*i;return t[0]=c*l+p*-a+f*-u-h*-s,t[1]=f*l+p*-s+h*-a-c*-u,t[2]=h*l+p*-u+c*-s-f*-a,t[3]=e[3],t}function Le(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t}function Re(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function De(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function Be(t,e){var r=t[0],n=t[1],o=t[2],i=t[3],a=e[0],s=e[1],u=e[2],c=e[3];return Math.abs(r-a)<=l.EPSILON*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(n-s)<=l.EPSILON*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(o-u)<=l.EPSILON*Math.max(1,Math.abs(o),Math.abs(u))&&Math.abs(i-c)<=l.EPSILON*Math.max(1,Math.abs(i),Math.abs(c))}var Fe,Ge=he,Ue=pe,ze=de,Ve=xe,He=_e,We=Ee,qe=Oe,Ye=(Fe=ae(),function(t,e,r,n,o,i){var a,s;for(e||(e=4),r||(r=0),s=n?Math.min(n*e+r,t.length):t.length,a=r;a<s;a+=e)Fe[0]=t[a],Fe[1]=t[a+1],Fe[2]=t[a+2],Fe[3]=t[a+3],o(Fe,Fe,i),t[a]=Fe[0],t[a+1]=Fe[1],t[a+2]=Fe[2],t[a+3]=Fe[3];return t});function Xe(){var t=new l.ARRAY_TYPE(4);return l.ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function Je(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function Ke(t,e,r){r*=.5;var n=Math.sin(r);return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=Math.cos(r),t}function Qe(t,e){var r=2*Math.acos(e[3]),n=Math.sin(r/2);return n>l.EPSILON?(t[0]=e[0]/n,t[1]=e[1]/n,t[2]=e[2]/n):(t[0]=1,t[1]=0,t[2]=0),r}function Ze(t,e){var r=kr(t,e);return Math.acos(2*r*r-1)}function $e(t,e,r){var n=e[0],o=e[1],i=e[2],a=e[3],s=r[0],u=r[1],l=r[2],c=r[3];return t[0]=n*c+a*s+o*l-i*u,t[1]=o*c+a*u+i*s-n*l,t[2]=i*c+a*l+n*u-o*s,t[3]=a*c-n*s-o*u-i*l,t}function tr(t,e,r){r*=.5;var n=e[0],o=e[1],i=e[2],a=e[3],s=Math.sin(r),u=Math.cos(r);return t[0]=n*u+a*s,t[1]=o*u+i*s,t[2]=i*u-o*s,t[3]=a*u-n*s,t}function er(t,e,r){r*=.5;var n=e[0],o=e[1],i=e[2],a=e[3],s=Math.sin(r),u=Math.cos(r);return t[0]=n*u-i*s,t[1]=o*u+a*s,t[2]=i*u+n*s,t[3]=a*u-o*s,t}function rr(t,e,r){r*=.5;var n=e[0],o=e[1],i=e[2],a=e[3],s=Math.sin(r),u=Math.cos(r);return t[0]=n*u+o*s,t[1]=o*u-n*s,t[2]=i*u+a*s,t[3]=a*u-i*s,t}function nr(t,e){var r=e[0],n=e[1],o=e[2];return t[0]=r,t[1]=n,t[2]=o,t[3]=Math.sqrt(Math.abs(1-r*r-n*n-o*o)),t}function or(t,e){var r=e[0],n=e[1],o=e[2],i=e[3],a=Math.sqrt(r*r+n*n+o*o),s=Math.exp(i),u=a>0?s*Math.sin(a)/a:0;return t[0]=r*u,t[1]=n*u,t[2]=o*u,t[3]=s*Math.cos(a),t}function ir(t,e){var r=e[0],n=e[1],o=e[2],i=e[3],a=Math.sqrt(r*r+n*n+o*o),s=a>0?Math.atan2(a,i)/a:0;return t[0]=r*s,t[1]=n*s,t[2]=o*s,t[3]=.5*Math.log(r*r+n*n+o*o+i*i),t}function ar(t,e,r){return ir(t,e),Pr(t,t,r),or(t,t),t}function sr(t,e,r,n){var o,i,a,s,u,c=e[0],f=e[1],h=e[2],p=e[3],d=r[0],y=r[1],v=r[2],g=r[3];return(i=c*d+f*y+h*v+p*g)<0&&(i=-i,d=-d,y=-y,v=-v,g=-g),1-i>l.EPSILON?(o=Math.acos(i),a=Math.sin(o),s=Math.sin((1-n)*o)/a,u=Math.sin(n*o)/a):(s=1-n,u=n),t[0]=s*c+u*d,t[1]=s*f+u*y,t[2]=s*h+u*v,t[3]=s*p+u*g,t}function ur(t){var e=l.RANDOM(),r=l.RANDOM(),n=l.RANDOM(),o=Math.sqrt(1-e),i=Math.sqrt(e);return t[0]=o*Math.sin(2*Math.PI*r),t[1]=o*Math.cos(2*Math.PI*r),t[2]=i*Math.sin(2*Math.PI*n),t[3]=i*Math.cos(2*Math.PI*n),t}function lr(t,e){var r=e[0],n=e[1],o=e[2],i=e[3],a=r*r+n*n+o*o+i*i,s=a?1/a:0;return t[0]=-r*s,t[1]=-n*s,t[2]=-o*s,t[3]=i*s,t}function cr(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t}function fr(t,e){var r,n=e[0]+e[4]+e[8];if(n>0)r=Math.sqrt(n+1),t[3]=.5*r,r=.5/r,t[0]=(e[5]-e[7])*r,t[1]=(e[6]-e[2])*r,t[2]=(e[1]-e[3])*r;else{var o=0;e[4]>e[0]&&(o=1),e[8]>e[3*o+o]&&(o=2);var i=(o+1)%3,a=(o+2)%3;r=Math.sqrt(e[3*o+o]-e[3*i+i]-e[3*a+a]+1),t[o]=.5*r,r=.5/r,t[3]=(e[3*i+a]-e[3*a+i])*r,t[i]=(e[3*i+o]+e[3*o+i])*r,t[a]=(e[3*a+o]+e[3*o+a])*r}return t}function hr(t,e,r,n){var o=.5*Math.PI/180;e*=o,r*=o,n*=o;var i=Math.sin(e),a=Math.cos(e),s=Math.sin(r),u=Math.cos(r),l=Math.sin(n),c=Math.cos(n);return t[0]=i*u*c-a*s*l,t[1]=a*s*c+i*u*l,t[2]=a*u*l-i*s*c,t[3]=a*u*c+i*s*l,t}function pr(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}var dr,yr,vr,gr,mr,br,wr=se,Sr=ue,xr=le,_r=ce,Er=fe,Or=$e,Pr=we,kr=Te,Cr=Me,Tr=Ee,Ar=Tr,Mr=Oe,jr=Mr,Ir=Ce,Nr=De,Lr=Be,Rr=(dr=ie.create(),yr=ie.fromValues(1,0,0),vr=ie.fromValues(0,1,0),function(t,e,r){var n=ie.dot(e,r);return n<-.999999?(ie.cross(dr,yr,e),ie.len(dr)<1e-6&&ie.cross(dr,vr,e),ie.normalize(dr,dr),Ke(t,dr,Math.PI),t):n>.999999?(t[0]=0,t[1]=0,t[2]=0,t[3]=1,t):(ie.cross(dr,e,r),t[0]=dr[0],t[1]=dr[1],t[2]=dr[2],t[3]=1+n,Ir(t,t))}),Dr=(gr=Xe(),mr=Xe(),function(t,e,r,n,o,i){return sr(gr,e,o,i),sr(mr,r,n,i),sr(t,gr,mr,2*i*(1-i)),t}),Br=(br=st.create(),function(t,e,r,n){return br[0]=r[0],br[3]=r[1],br[6]=r[2],br[1]=n[0],br[4]=n[1],br[7]=n[2],br[2]=-e[0],br[5]=-e[1],br[8]=-e[2],Ir(t,fr(t,br))});function Fr(){var t=new l.ARRAY_TYPE(8);return l.ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0),t[3]=1,t}function Gr(t){var e=new l.ARRAY_TYPE(8);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e}function Ur(t,e,r,n,o,i,a,s){var u=new l.ARRAY_TYPE(8);return u[0]=t,u[1]=e,u[2]=r,u[3]=n,u[4]=o,u[5]=i,u[6]=a,u[7]=s,u}function zr(t,e,r,n,o,i,a){var s=new l.ARRAY_TYPE(8);s[0]=t,s[1]=e,s[2]=r,s[3]=n;var u=.5*o,c=.5*i,f=.5*a;return s[4]=u*n+c*r-f*e,s[5]=c*n+f*t-u*r,s[6]=f*n+u*e-c*t,s[7]=-u*t-c*e-f*r,s}function Vr(t,e,r){var n=.5*r[0],o=.5*r[1],i=.5*r[2],a=e[0],s=e[1],u=e[2],l=e[3];return t[0]=a,t[1]=s,t[2]=u,t[3]=l,t[4]=n*l+o*u-i*s,t[5]=o*l+i*a-n*u,t[6]=i*l+n*s-o*a,t[7]=-n*a-o*s-i*u,t}function Hr(t,e){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=.5*e[0],t[5]=.5*e[1],t[6]=.5*e[2],t[7]=0,t}function Wr(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=0,t[5]=0,t[6]=0,t[7]=0,t}function qr(t,e){var r=Xe();Lt(r,e);var n=new l.ARRAY_TYPE(3);return It(n,e),Vr(t,r,n),t}function Yr(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t}function Xr(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t}function Jr(t,e,r,n,o,i,a,s,u){return t[0]=e,t[1]=r,t[2]=n,t[3]=o,t[4]=i,t[5]=a,t[6]=s,t[7]=u,t}var Kr=xr;function Qr(t,e){return t[0]=e[4],t[1]=e[5],t[2]=e[6],t[3]=e[7],t}var Zr=xr;function $r(t,e){return t[4]=e[0],t[5]=e[1],t[6]=e[2],t[7]=e[3],t}function tn(t,e){var r=e[4],n=e[5],o=e[6],i=e[7],a=-e[0],s=-e[1],u=-e[2],l=e[3];return t[0]=2*(r*l+i*a+n*u-o*s),t[1]=2*(n*l+i*s+o*a-r*u),t[2]=2*(o*l+i*u+r*s-n*a),t}function en(t,e,r){var n=e[0],o=e[1],i=e[2],a=e[3],s=.5*r[0],u=.5*r[1],l=.5*r[2],c=e[4],f=e[5],h=e[6],p=e[7];return t[0]=n,t[1]=o,t[2]=i,t[3]=a,t[4]=a*s+o*l-i*u+c,t[5]=a*u+i*s-n*l+f,t[6]=a*l+n*u-o*s+h,t[7]=-n*s-o*u-i*l+p,t}function rn(t,e,r){var n=-e[0],o=-e[1],i=-e[2],a=e[3],s=e[4],u=e[5],l=e[6],c=e[7],f=s*a+c*n+u*i-l*o,h=u*a+c*o+l*n-s*i,p=l*a+c*i+s*o-u*n,d=c*a-s*n-u*o-l*i;return tr(t,e,r),n=t[0],o=t[1],i=t[2],a=t[3],t[4]=f*a+d*n+h*i-p*o,t[5]=h*a+d*o+p*n-f*i,t[6]=p*a+d*i+f*o-h*n,t[7]=d*a-f*n-h*o-p*i,t}function nn(t,e,r){var n=-e[0],o=-e[1],i=-e[2],a=e[3],s=e[4],u=e[5],l=e[6],c=e[7],f=s*a+c*n+u*i-l*o,h=u*a+c*o+l*n-s*i,p=l*a+c*i+s*o-u*n,d=c*a-s*n-u*o-l*i;return er(t,e,r),n=t[0],o=t[1],i=t[2],a=t[3],t[4]=f*a+d*n+h*i-p*o,t[5]=h*a+d*o+p*n-f*i,t[6]=p*a+d*i+f*o-h*n,t[7]=d*a-f*n-h*o-p*i,t}function on(t,e,r){var n=-e[0],o=-e[1],i=-e[2],a=e[3],s=e[4],u=e[5],l=e[6],c=e[7],f=s*a+c*n+u*i-l*o,h=u*a+c*o+l*n-s*i,p=l*a+c*i+s*o-u*n,d=c*a-s*n-u*o-l*i;return rr(t,e,r),n=t[0],o=t[1],i=t[2],a=t[3],t[4]=f*a+d*n+h*i-p*o,t[5]=h*a+d*o+p*n-f*i,t[6]=p*a+d*i+f*o-h*n,t[7]=d*a-f*n-h*o-p*i,t}function an(t,e,r){var n=r[0],o=r[1],i=r[2],a=r[3],s=e[0],u=e[1],l=e[2],c=e[3];return t[0]=s*a+c*n+u*i-l*o,t[1]=u*a+c*o+l*n-s*i,t[2]=l*a+c*i+s*o-u*n,t[3]=c*a-s*n-u*o-l*i,s=e[4],u=e[5],l=e[6],c=e[7],t[4]=s*a+c*n+u*i-l*o,t[5]=u*a+c*o+l*n-s*i,t[6]=l*a+c*i+s*o-u*n,t[7]=c*a-s*n-u*o-l*i,t}function sn(t,e,r){var n=e[0],o=e[1],i=e[2],a=e[3],s=r[0],u=r[1],l=r[2],c=r[3];return t[0]=n*c+a*s+o*l-i*u,t[1]=o*c+a*u+i*s-n*l,t[2]=i*c+a*l+n*u-o*s,t[3]=a*c-n*s-o*u-i*l,s=r[4],u=r[5],l=r[6],c=r[7],t[4]=n*c+a*s+o*l-i*u,t[5]=o*c+a*u+i*s-n*l,t[6]=i*c+a*l+n*u-o*s,t[7]=a*c-n*s-o*u-i*l,t}function un(t,e,r,n){if(Math.abs(n)<l.EPSILON)return Yr(t,e);var o=Math.hypot(r[0],r[1],r[2]);n*=.5;var i=Math.sin(n),a=i*r[0]/o,s=i*r[1]/o,u=i*r[2]/o,c=Math.cos(n),f=e[0],h=e[1],p=e[2],d=e[3];t[0]=f*c+d*a+h*u-p*s,t[1]=h*c+d*s+p*a-f*u,t[2]=p*c+d*u+f*s-h*a,t[3]=d*c-f*a-h*s-p*u;var y=e[4],v=e[5],g=e[6],m=e[7];return t[4]=y*c+m*a+v*u-g*s,t[5]=v*c+m*s+g*a-y*u,t[6]=g*c+m*u+y*s-v*a,t[7]=m*c-y*a-v*s-g*u,t}function ln(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t[4]=e[4]+r[4],t[5]=e[5]+r[5],t[6]=e[6]+r[6],t[7]=e[7]+r[7],t}function cn(t,e,r){var n=e[0],o=e[1],i=e[2],a=e[3],s=r[4],u=r[5],l=r[6],c=r[7],f=e[4],h=e[5],p=e[6],d=e[7],y=r[0],v=r[1],g=r[2],m=r[3];return t[0]=n*m+a*y+o*g-i*v,t[1]=o*m+a*v+i*y-n*g,t[2]=i*m+a*g+n*v-o*y,t[3]=a*m-n*y-o*v-i*g,t[4]=n*c+a*s+o*l-i*u+f*m+d*y+h*g-p*v,t[5]=o*c+a*u+i*s-n*l+h*m+d*v+p*y-f*g,t[6]=i*c+a*l+n*u-o*s+p*m+d*g+f*v-h*y,t[7]=a*c-n*s-o*u-i*l+d*m-f*y-h*v-p*g,t}var fn=cn;function hn(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t}var pn=kr;function dn(t,e,r,n){var o=1-n;return pn(e,r)<0&&(n=-n),t[0]=e[0]*o+r[0]*n,t[1]=e[1]*o+r[1]*n,t[2]=e[2]*o+r[2]*n,t[3]=e[3]*o+r[3]*n,t[4]=e[4]*o+r[4]*n,t[5]=e[5]*o+r[5]*n,t[6]=e[6]*o+r[6]*n,t[7]=e[7]*o+r[7]*n,t}function yn(t,e){var r=bn(e);return t[0]=-e[0]/r,t[1]=-e[1]/r,t[2]=-e[2]/r,t[3]=e[3]/r,t[4]=-e[4]/r,t[5]=-e[5]/r,t[6]=-e[6]/r,t[7]=e[7]/r,t}function vn(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t[4]=-e[4],t[5]=-e[5],t[6]=-e[6],t[7]=e[7],t}var gn=Tr,mn=gn,bn=Mr,wn=bn;function Sn(t,e){var r=bn(e);if(r>0){r=Math.sqrt(r);var n=e[0]/r,o=e[1]/r,i=e[2]/r,a=e[3]/r,s=e[4],u=e[5],l=e[6],c=e[7],f=n*s+o*u+i*l+a*c;t[0]=n,t[1]=o,t[2]=i,t[3]=a,t[4]=(s-n*f)/r,t[5]=(u-o*f)/r,t[6]=(l-i*f)/r,t[7]=(c-a*f)/r}return t}function xn(t){return"quat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+")"}function _n(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]}function En(t,e){var r=t[0],n=t[1],o=t[2],i=t[3],a=t[4],s=t[5],u=t[6],c=t[7],f=e[0],h=e[1],p=e[2],d=e[3],y=e[4],v=e[5],g=e[6],m=e[7];return Math.abs(r-f)<=l.EPSILON*Math.max(1,Math.abs(r),Math.abs(f))&&Math.abs(n-h)<=l.EPSILON*Math.max(1,Math.abs(n),Math.abs(h))&&Math.abs(o-p)<=l.EPSILON*Math.max(1,Math.abs(o),Math.abs(p))&&Math.abs(i-d)<=l.EPSILON*Math.max(1,Math.abs(i),Math.abs(d))&&Math.abs(a-y)<=l.EPSILON*Math.max(1,Math.abs(a),Math.abs(y))&&Math.abs(s-v)<=l.EPSILON*Math.max(1,Math.abs(s),Math.abs(v))&&Math.abs(u-g)<=l.EPSILON*Math.max(1,Math.abs(u),Math.abs(g))&&Math.abs(c-m)<=l.EPSILON*Math.max(1,Math.abs(c),Math.abs(m))}var On=r(8699)},8610:function(t,e,r){"use strict";r.r(e),r.d(e,{add:function(){return C},adjoint:function(){return p},clone:function(){return a},copy:function(){return s},create:function(){return o},determinant:function(){return d},equals:function(){return I},exactEquals:function(){return j},frob:function(){return k},fromMat2d:function(){return x},fromMat4:function(){return i},fromQuat:function(){return _},fromRotation:function(){return w},fromScaling:function(){return S},fromTranslation:function(){return b},fromValues:function(){return u},identity:function(){return c},invert:function(){return h},mul:function(){return N},multiply:function(){return y},multiplyScalar:function(){return A},multiplyScalarAndAdd:function(){return M},normalFromMat4:function(){return E},projection:function(){return O},rotate:function(){return g},scale:function(){return m},set:function(){return l},str:function(){return P},sub:function(){return L},subtract:function(){return T},translate:function(){return v},transpose:function(){return f}});var n=r(8428);function o(){var t=new n.ARRAY_TYPE(9);return n.ARRAY_TYPE!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function i(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t}function a(t){var e=new n.ARRAY_TYPE(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function s(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function u(t,e,r,o,i,a,s,u,l){var c=new n.ARRAY_TYPE(9);return c[0]=t,c[1]=e,c[2]=r,c[3]=o,c[4]=i,c[5]=a,c[6]=s,c[7]=u,c[8]=l,c}function l(t,e,r,n,o,i,a,s,u,l){return t[0]=e,t[1]=r,t[2]=n,t[3]=o,t[4]=i,t[5]=a,t[6]=s,t[7]=u,t[8]=l,t}function c(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function f(t,e){if(t===e){var r=e[1],n=e[2],o=e[5];t[1]=e[3],t[2]=e[6],t[3]=r,t[5]=e[7],t[6]=n,t[7]=o}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t}function h(t,e){var r=e[0],n=e[1],o=e[2],i=e[3],a=e[4],s=e[5],u=e[6],l=e[7],c=e[8],f=c*a-s*l,h=-c*i+s*u,p=l*i-a*u,d=r*f+n*h+o*p;return d?(d=1/d,t[0]=f*d,t[1]=(-c*n+o*l)*d,t[2]=(s*n-o*a)*d,t[3]=h*d,t[4]=(c*r-o*u)*d,t[5]=(-s*r+o*i)*d,t[6]=p*d,t[7]=(-l*r+n*u)*d,t[8]=(a*r-n*i)*d,t):null}function p(t,e){var r=e[0],n=e[1],o=e[2],i=e[3],a=e[4],s=e[5],u=e[6],l=e[7],c=e[8];return t[0]=a*c-s*l,t[1]=o*l-n*c,t[2]=n*s-o*a,t[3]=s*u-i*c,t[4]=r*c-o*u,t[5]=o*i-r*s,t[6]=i*l-a*u,t[7]=n*u-r*l,t[8]=r*a-n*i,t}function d(t){var e=t[0],r=t[1],n=t[2],o=t[3],i=t[4],a=t[5],s=t[6],u=t[7],l=t[8];return e*(l*i-a*u)+r*(-l*o+a*s)+n*(u*o-i*s)}function y(t,e,r){var n=e[0],o=e[1],i=e[2],a=e[3],s=e[4],u=e[5],l=e[6],c=e[7],f=e[8],h=r[0],p=r[1],d=r[2],y=r[3],v=r[4],g=r[5],m=r[6],b=r[7],w=r[8];return t[0]=h*n+p*a+d*l,t[1]=h*o+p*s+d*c,t[2]=h*i+p*u+d*f,t[3]=y*n+v*a+g*l,t[4]=y*o+v*s+g*c,t[5]=y*i+v*u+g*f,t[6]=m*n+b*a+w*l,t[7]=m*o+b*s+w*c,t[8]=m*i+b*u+w*f,t}function v(t,e,r){var n=e[0],o=e[1],i=e[2],a=e[3],s=e[4],u=e[5],l=e[6],c=e[7],f=e[8],h=r[0],p=r[1];return t[0]=n,t[1]=o,t[2]=i,t[3]=a,t[4]=s,t[5]=u,t[6]=h*n+p*a+l,t[7]=h*o+p*s+c,t[8]=h*i+p*u+f,t}function g(t,e,r){var n=e[0],o=e[1],i=e[2],a=e[3],s=e[4],u=e[5],l=e[6],c=e[7],f=e[8],h=Math.sin(r),p=Math.cos(r);return t[0]=p*n+h*a,t[1]=p*o+h*s,t[2]=p*i+h*u,t[3]=p*a-h*n,t[4]=p*s-h*o,t[5]=p*u-h*i,t[6]=l,t[7]=c,t[8]=f,t}function m(t,e,r){var n=r[0],o=r[1];return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=o*e[3],t[4]=o*e[4],t[5]=o*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function b(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t}function w(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=r,t[2]=0,t[3]=-r,t[4]=n,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function S(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function x(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t}function _(t,e){var r=e[0],n=e[1],o=e[2],i=e[3],a=r+r,s=n+n,u=o+o,l=r*a,c=n*a,f=n*s,h=o*a,p=o*s,d=o*u,y=i*a,v=i*s,g=i*u;return t[0]=1-f-d,t[3]=c-g,t[6]=h+v,t[1]=c+g,t[4]=1-l-d,t[7]=p-y,t[2]=h-v,t[5]=p+y,t[8]=1-l-f,t}function E(t,e){var r=e[0],n=e[1],o=e[2],i=e[3],a=e[4],s=e[5],u=e[6],l=e[7],c=e[8],f=e[9],h=e[10],p=e[11],d=e[12],y=e[13],v=e[14],g=e[15],m=r*s-n*a,b=r*u-o*a,w=r*l-i*a,S=n*u-o*s,x=n*l-i*s,_=o*l-i*u,E=c*y-f*d,O=c*v-h*d,P=c*g-p*d,k=f*v-h*y,C=f*g-p*y,T=h*g-p*v,A=m*T-b*C+w*k+S*P-x*O+_*E;return A?(A=1/A,t[0]=(s*T-u*C+l*k)*A,t[1]=(u*P-a*T-l*O)*A,t[2]=(a*C-s*P+l*E)*A,t[3]=(o*C-n*T-i*k)*A,t[4]=(r*T-o*P+i*O)*A,t[5]=(n*P-r*C-i*E)*A,t[6]=(y*_-v*x+g*S)*A,t[7]=(v*w-d*_-g*b)*A,t[8]=(d*x-y*w+g*m)*A,t):null}function O(t,e,r){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/r,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t}function P(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"}function k(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])}function C(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t[4]=e[4]+r[4],t[5]=e[5]+r[5],t[6]=e[6]+r[6],t[7]=e[7]+r[7],t[8]=e[8]+r[8],t}function T(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t[4]=e[4]-r[4],t[5]=e[5]-r[5],t[6]=e[6]-r[6],t[7]=e[7]-r[7],t[8]=e[8]-r[8],t}function A(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*r,t}function M(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t[4]=e[4]+r[4]*n,t[5]=e[5]+r[5]*n,t[6]=e[6]+r[6]*n,t[7]=e[7]+r[7]*n,t[8]=e[8]+r[8]*n,t}function j(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]}function I(t,e){var r=t[0],o=t[1],i=t[2],a=t[3],s=t[4],u=t[5],l=t[6],c=t[7],f=t[8],h=e[0],p=e[1],d=e[2],y=e[3],v=e[4],g=e[5],m=e[6],b=e[7],w=e[8];return Math.abs(r-h)<=n.EPSILON*Math.max(1,Math.abs(r),Math.abs(h))&&Math.abs(o-p)<=n.EPSILON*Math.max(1,Math.abs(o),Math.abs(p))&&Math.abs(i-d)<=n.EPSILON*Math.max(1,Math.abs(i),Math.abs(d))&&Math.abs(a-y)<=n.EPSILON*Math.max(1,Math.abs(a),Math.abs(y))&&Math.abs(s-v)<=n.EPSILON*Math.max(1,Math.abs(s),Math.abs(v))&&Math.abs(u-g)<=n.EPSILON*Math.max(1,Math.abs(u),Math.abs(g))&&Math.abs(l-m)<=n.EPSILON*Math.max(1,Math.abs(l),Math.abs(m))&&Math.abs(c-b)<=n.EPSILON*Math.max(1,Math.abs(c),Math.abs(b))&&Math.abs(f-w)<=n.EPSILON*Math.max(1,Math.abs(f),Math.abs(w))}var N=y,L=T},8699:function(t,e,r){"use strict";r.r(e),r.d(e,{add:function(){return l},angle:function(){return R},ceil:function(){return p},clone:function(){return i},copy:function(){return s},create:function(){return o},cross:function(){return C},dist:function(){return q},distance:function(){return w},div:function(){return W},divide:function(){return h},dot:function(){return k},equals:function(){return G},exactEquals:function(){return F},floor:function(){return d},forEach:function(){return J},fromValues:function(){return a},inverse:function(){return O},len:function(){return z},length:function(){return x},lerp:function(){return T},max:function(){return v},min:function(){return y},mul:function(){return H},multiply:function(){return f},negate:function(){return E},normalize:function(){return P},random:function(){return A},rotate:function(){return L},round:function(){return g},scale:function(){return m},scaleAndAdd:function(){return b},set:function(){return u},sqrDist:function(){return Y},sqrLen:function(){return X},squaredDistance:function(){return S},squaredLength:function(){return _},str:function(){return B},sub:function(){return V},subtract:function(){return c},transformMat2:function(){return M},transformMat2d:function(){return j},transformMat3:function(){return I},transformMat4:function(){return N},zero:function(){return D}});var n=r(8428);function o(){var t=new n.ARRAY_TYPE(2);return n.ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0),t}function i(t){var e=new n.ARRAY_TYPE(2);return e[0]=t[0],e[1]=t[1],e}function a(t,e){var r=new n.ARRAY_TYPE(2);return r[0]=t,r[1]=e,r}function s(t,e){return t[0]=e[0],t[1]=e[1],t}function u(t,e,r){return t[0]=e,t[1]=r,t}function l(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t}function c(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t}function f(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t}function h(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t}function p(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t}function d(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t}function y(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t}function v(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t}function g(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t}function m(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t}function b(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t}function w(t,e){var r=e[0]-t[0],n=e[1]-t[1];return Math.hypot(r,n)}function S(t,e){var r=e[0]-t[0],n=e[1]-t[1];return r*r+n*n}function x(t){var e=t[0],r=t[1];return Math.hypot(e,r)}function _(t){var e=t[0],r=t[1];return e*e+r*r}function E(t,e){return t[0]=-e[0],t[1]=-e[1],t}function O(t,e){return t[0]=1/e[0],t[1]=1/e[1],t}function P(t,e){var r=e[0],n=e[1],o=r*r+n*n;return o>0&&(o=1/Math.sqrt(o)),t[0]=e[0]*o,t[1]=e[1]*o,t}function k(t,e){return t[0]*e[0]+t[1]*e[1]}function C(t,e,r){var n=e[0]*r[1]-e[1]*r[0];return t[0]=t[1]=0,t[2]=n,t}function T(t,e,r,n){var o=e[0],i=e[1];return t[0]=o+n*(r[0]-o),t[1]=i+n*(r[1]-i),t}function A(t,e){e=e||1;var r=2*n.RANDOM()*Math.PI;return t[0]=Math.cos(r)*e,t[1]=Math.sin(r)*e,t}function M(t,e,r){var n=e[0],o=e[1];return t[0]=r[0]*n+r[2]*o,t[1]=r[1]*n+r[3]*o,t}function j(t,e,r){var n=e[0],o=e[1];return t[0]=r[0]*n+r[2]*o+r[4],t[1]=r[1]*n+r[3]*o+r[5],t}function I(t,e,r){var n=e[0],o=e[1];return t[0]=r[0]*n+r[3]*o+r[6],t[1]=r[1]*n+r[4]*o+r[7],t}function N(t,e,r){var n=e[0],o=e[1];return t[0]=r[0]*n+r[4]*o+r[12],t[1]=r[1]*n+r[5]*o+r[13],t}function L(t,e,r,n){var o=e[0]-r[0],i=e[1]-r[1],a=Math.sin(n),s=Math.cos(n);return t[0]=o*s-i*a+r[0],t[1]=o*a+i*s+r[1],t}function R(t,e){var r=t[0],n=t[1],o=e[0],i=e[1],a=Math.sqrt(r*r+n*n)*Math.sqrt(o*o+i*i),s=a&&(r*o+n*i)/a;return Math.acos(Math.min(Math.max(s,-1),1))}function D(t){return t[0]=0,t[1]=0,t}function B(t){return"vec2("+t[0]+", "+t[1]+")"}function F(t,e){return t[0]===e[0]&&t[1]===e[1]}function G(t,e){var r=t[0],o=t[1],i=e[0],a=e[1];return Math.abs(r-i)<=n.EPSILON*Math.max(1,Math.abs(r),Math.abs(i))&&Math.abs(o-a)<=n.EPSILON*Math.max(1,Math.abs(o),Math.abs(a))}var U,z=x,V=c,H=f,W=h,q=w,Y=S,X=_,J=(U=o(),function(t,e,r,n,o,i){var a,s;for(e||(e=2),r||(r=0),s=n?Math.min(n*e+r,t.length):t.length,a=r;a<s;a+=e)U[0]=t[a],U[1]=t[a+1],o(U,U,i),t[a]=U[0],t[a+1]=U[1];return t})},4010:function(t,e,r){"use strict";r.r(e),r.d(e,{add:function(){return c},angle:function(){return F},bezier:function(){return M},ceil:function(){return d},clone:function(){return i},copy:function(){return u},create:function(){return o},cross:function(){return C},dist:function(){return X},distance:function(){return S},div:function(){return Y},divide:function(){return p},dot:function(){return k},equals:function(){return V},exactEquals:function(){return z},floor:function(){return y},forEach:function(){return Z},fromValues:function(){return s},hermite:function(){return A},inverse:function(){return O},len:function(){return K},length:function(){return a},lerp:function(){return T},max:function(){return g},min:function(){return v},mul:function(){return q},multiply:function(){return h},negate:function(){return E},normalize:function(){return P},random:function(){return j},rotateX:function(){return R},rotateY:function(){return D},rotateZ:function(){return B},round:function(){return m},scale:function(){return b},scaleAndAdd:function(){return w},set:function(){return l},sqrDist:function(){return J},sqrLen:function(){return Q},squaredDistance:function(){return x},squaredLength:function(){return _},str:function(){return U},sub:function(){return W},subtract:function(){return f},transformMat3:function(){return N},transformMat4:function(){return I},transformQuat:function(){return L},zero:function(){return G}});var n=r(8428);function o(){var t=new n.ARRAY_TYPE(3);return n.ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function i(t){var e=new n.ARRAY_TYPE(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function a(t){var e=t[0],r=t[1],n=t[2];return Math.hypot(e,r,n)}function s(t,e,r){var o=new n.ARRAY_TYPE(3);return o[0]=t,o[1]=e,o[2]=r,o}function u(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function l(t,e,r,n){return t[0]=e,t[1]=r,t[2]=n,t}function c(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t}function f(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t}function h(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t[2]=e[2]*r[2],t}function p(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t[2]=e[2]/r[2],t}function d(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t}function y(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t}function v(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t[2]=Math.min(e[2],r[2]),t}function g(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t[2]=Math.max(e[2],r[2]),t}function m(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t}function b(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t}function w(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t}function S(t,e){var r=e[0]-t[0],n=e[1]-t[1],o=e[2]-t[2];return Math.hypot(r,n,o)}function x(t,e){var r=e[0]-t[0],n=e[1]-t[1],o=e[2]-t[2];return r*r+n*n+o*o}function _(t){var e=t[0],r=t[1],n=t[2];return e*e+r*r+n*n}function E(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function O(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}function P(t,e){var r=e[0],n=e[1],o=e[2],i=r*r+n*n+o*o;return i>0&&(i=1/Math.sqrt(i)),t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t}function k(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function C(t,e,r){var n=e[0],o=e[1],i=e[2],a=r[0],s=r[1],u=r[2];return t[0]=o*u-i*s,t[1]=i*a-n*u,t[2]=n*s-o*a,t}function T(t,e,r,n){var o=e[0],i=e[1],a=e[2];return t[0]=o+n*(r[0]-o),t[1]=i+n*(r[1]-i),t[2]=a+n*(r[2]-a),t}function A(t,e,r,n,o,i){var a=i*i,s=a*(2*i-3)+1,u=a*(i-2)+i,l=a*(i-1),c=a*(3-2*i);return t[0]=e[0]*s+r[0]*u+n[0]*l+o[0]*c,t[1]=e[1]*s+r[1]*u+n[1]*l+o[1]*c,t[2]=e[2]*s+r[2]*u+n[2]*l+o[2]*c,t}function M(t,e,r,n,o,i){var a=1-i,s=a*a,u=i*i,l=s*a,c=3*i*s,f=3*u*a,h=u*i;return t[0]=e[0]*l+r[0]*c+n[0]*f+o[0]*h,t[1]=e[1]*l+r[1]*c+n[1]*f+o[1]*h,t[2]=e[2]*l+r[2]*c+n[2]*f+o[2]*h,t}function j(t,e){e=e||1;var r=2*n.RANDOM()*Math.PI,o=2*n.RANDOM()-1,i=Math.sqrt(1-o*o)*e;return t[0]=Math.cos(r)*i,t[1]=Math.sin(r)*i,t[2]=o*e,t}function I(t,e,r){var n=e[0],o=e[1],i=e[2],a=r[3]*n+r[7]*o+r[11]*i+r[15];return a=a||1,t[0]=(r[0]*n+r[4]*o+r[8]*i+r[12])/a,t[1]=(r[1]*n+r[5]*o+r[9]*i+r[13])/a,t[2]=(r[2]*n+r[6]*o+r[10]*i+r[14])/a,t}function N(t,e,r){var n=e[0],o=e[1],i=e[2];return t[0]=n*r[0]+o*r[3]+i*r[6],t[1]=n*r[1]+o*r[4]+i*r[7],t[2]=n*r[2]+o*r[5]+i*r[8],t}function L(t,e,r){var n=r[0],o=r[1],i=r[2],a=r[3],s=e[0],u=e[1],l=e[2],c=o*l-i*u,f=i*s-n*l,h=n*u-o*s,p=o*h-i*f,d=i*c-n*h,y=n*f-o*c,v=2*a;return c*=v,f*=v,h*=v,p*=2,d*=2,y*=2,t[0]=s+c+p,t[1]=u+f+d,t[2]=l+h+y,t}function R(t,e,r,n){var o=[],i=[];return o[0]=e[0]-r[0],o[1]=e[1]-r[1],o[2]=e[2]-r[2],i[0]=o[0],i[1]=o[1]*Math.cos(n)-o[2]*Math.sin(n),i[2]=o[1]*Math.sin(n)+o[2]*Math.cos(n),t[0]=i[0]+r[0],t[1]=i[1]+r[1],t[2]=i[2]+r[2],t}function D(t,e,r,n){var o=[],i=[];return o[0]=e[0]-r[0],o[1]=e[1]-r[1],o[2]=e[2]-r[2],i[0]=o[2]*Math.sin(n)+o[0]*Math.cos(n),i[1]=o[1],i[2]=o[2]*Math.cos(n)-o[0]*Math.sin(n),t[0]=i[0]+r[0],t[1]=i[1]+r[1],t[2]=i[2]+r[2],t}function B(t,e,r,n){var o=[],i=[];return o[0]=e[0]-r[0],o[1]=e[1]-r[1],o[2]=e[2]-r[2],i[0]=o[0]*Math.cos(n)-o[1]*Math.sin(n),i[1]=o[0]*Math.sin(n)+o[1]*Math.cos(n),i[2]=o[2],t[0]=i[0]+r[0],t[1]=i[1]+r[1],t[2]=i[2]+r[2],t}function F(t,e){var r=t[0],n=t[1],o=t[2],i=e[0],a=e[1],s=e[2],u=Math.sqrt(r*r+n*n+o*o)*Math.sqrt(i*i+a*a+s*s),l=u&&k(t,e)/u;return Math.acos(Math.min(Math.max(l,-1),1))}function G(t){return t[0]=0,t[1]=0,t[2]=0,t}function U(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"}function z(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}function V(t,e){var r=t[0],o=t[1],i=t[2],a=e[0],s=e[1],u=e[2];return Math.abs(r-a)<=n.EPSILON*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(o-s)<=n.EPSILON*Math.max(1,Math.abs(o),Math.abs(s))&&Math.abs(i-u)<=n.EPSILON*Math.max(1,Math.abs(i),Math.abs(u))}var H,W=f,q=h,Y=p,X=S,J=x,K=a,Q=_,Z=(H=o(),function(t,e,r,n,o,i){var a,s;for(e||(e=3),r||(r=0),s=n?Math.min(n*e+r,t.length):t.length,a=r;a<s;a+=e)H[0]=t[a],H[1]=t[a+1],H[2]=t[a+2],o(H,H,i),t[a]=H[0],t[a+1]=H[1],t[a+2]=H[2];return t})},8813:function(t){var e=[],r=[],n="insert-css: You need to provide a CSS string. Usage: insertCss(cssString[, options]).";function o(t,o){if(o=o||{},void 0===t)throw new Error(n);var i,a=!0===o.prepend?"prepend":"append",s=void 0!==o.container?o.container:document.querySelector("head"),u=e.indexOf(s);return-1===u&&(u=e.push(s)-1,r[u]={}),void 0!==r[u]&&void 0!==r[u][a]?i=r[u][a]:(i=r[u][a]=function(){var t=document.createElement("style");return t.setAttribute("type","text/css"),t}(),"prepend"===a?s.insertBefore(i,s.childNodes[0]):s.appendChild(i)),65279===t.charCodeAt(0)&&(t=t.substr(1,t.length)),i.styleSheet?i.styleSheet.cssText+=t:i.textContent+=t,i}t.exports=o,t.exports.insertCss=o},6730:function(t){t.exports=function(t){return!(!t||"string"==typeof t)&&(t instanceof Array||Array.isArray(t)||t.length>=0&&(t.splice instanceof Function||Object.getOwnPropertyDescriptor(t,t.length-1)&&"String"!==t.constructor.name))}},2138:function(t,e,r){function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}t=r.nmd(t);var o=200,i="__lodash_hash_undefined__",a=9007199254740991,s="[object Arguments]",u="[object Boolean]",l="[object Date]",c="[object Function]",f="[object GeneratorFunction]",h="[object Map]",p="[object Number]",d="[object Object]",y="[object RegExp]",v="[object Set]",g="[object String]",m="[object Symbol]",b="[object ArrayBuffer]",w="[object DataView]",S="[object Float32Array]",x="[object Float64Array]",_="[object Int8Array]",E="[object Int16Array]",O="[object Int32Array]",P="[object Uint8Array]",k="[object Uint8ClampedArray]",C="[object Uint16Array]",T="[object Uint32Array]",A=/\w*$/,M=/^\[object .+?Constructor\]$/,j=/^(?:0|[1-9]\d*)$/,I={};I[s]=I["[object Array]"]=I[b]=I[w]=I[u]=I[l]=I[S]=I[x]=I[_]=I[E]=I[O]=I[h]=I[p]=I[d]=I[y]=I[v]=I[g]=I[m]=I[P]=I[k]=I[C]=I[T]=!0,I["[object Error]"]=I[c]=I["[object WeakMap]"]=!1;var N="object"==(void 0===r.g?"undefined":n(r.g))&&r.g&&r.g.Object===Object&&r.g,L="object"==("undefined"==typeof self?"undefined":n(self))&&self&&self.Object===Object&&self,R=N||L||Function("return this")(),D="object"==n(e)&&e&&!e.nodeType&&e,B=D&&"object"==n(t)&&t&&!t.nodeType&&t,F=B&&B.exports===D;function G(t,e){return t.set(e[0],e[1]),t}function U(t,e){return t.add(e),t}function z(t,e,r,n){var o=-1,i=t?t.length:0;for(n&&i&&(r=t[++o]);++o<i;)r=e(r,t[o],o,t);return r}function V(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}function H(t){var e=-1,r=Array(t.size);return t.forEach(function(t,n){r[++e]=[n,t]}),r}function W(t,e){return function(r){return t(e(r))}}function q(t){var e=-1,r=Array(t.size);return t.forEach(function(t){r[++e]=t}),r}var Y,X=Array.prototype,J=Function.prototype,K=Object.prototype,Q=R["__core-js_shared__"],Z=(Y=/[^.]+$/.exec(Q&&Q.keys&&Q.keys.IE_PROTO||""))?"Symbol(src)_1."+Y:"",$=J.toString,tt=K.hasOwnProperty,et=K.toString,rt=RegExp("^"+$.call(tt).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),nt=F?R.Buffer:void 0,ot=R.Symbol,it=R.Uint8Array,at=W(Object.getPrototypeOf,Object),st=Object.create,ut=K.propertyIsEnumerable,lt=X.splice,ct=Object.getOwnPropertySymbols,ft=nt?nt.isBuffer:void 0,ht=W(Object.keys,Object),pt=Bt(R,"DataView"),dt=Bt(R,"Map"),yt=Bt(R,"Promise"),vt=Bt(R,"Set"),gt=Bt(R,"WeakMap"),mt=Bt(Object,"create"),bt=Vt(pt),wt=Vt(dt),St=Vt(yt),xt=Vt(vt),_t=Vt(gt),Et=ot?ot.prototype:void 0,Ot=Et?Et.valueOf:void 0;function Pt(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function kt(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function Ct(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function Tt(t){this.__data__=new kt(t)}function At(t,e){var r=Wt(t)||function(t){return function(t){return function(t){return!!t&&"object"==n(t)}(t)&&qt(t)}(t)&&tt.call(t,"callee")&&(!ut.call(t,"callee")||et.call(t)==s)}(t)?function(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}(t.length,String):[],o=r.length,i=!!o;for(var a in t)!e&&!tt.call(t,a)||i&&("length"==a||Ut(a,o))||r.push(a);return r}function Mt(t,e,r){var n=t[e];tt.call(t,e)&&Ht(n,r)&&(void 0!==r||e in t)||(t[e]=r)}function jt(t,e){for(var r=t.length;r--;)if(Ht(t[r][0],e))return r;return-1}function It(t,e,r,n,o,i,a){var M;if(n&&(M=i?n(t,o,i,a):n(t)),void 0!==M)return M;if(!Jt(t))return t;var j=Wt(t);if(j){if(M=function(t){var e=t.length,r=t.constructor(e);e&&"string"==typeof t[0]&&tt.call(t,"index")&&(r.index=t.index,r.input=t.input);return r}(t),!e)return function(t,e){var r=-1,n=t.length;e||(e=Array(n));for(;++r<n;)e[r]=t[r];return e}(t,M)}else{var N=Gt(t),L=N==c||N==f;if(Yt(t))return function(t,e){if(e)return t.slice();var r=new t.constructor(t.length);return t.copy(r),r}(t,e);if(N==d||N==s||L&&!i){if(V(t))return i?t:{};if(M=function(t){return"function"!=typeof t.constructor||zt(t)?{}:(e=at(t),Jt(e)?st(e):{});var e}(L?{}:t),!e)return function(t,e){return Rt(t,Ft(t),e)}(t,function(t,e){return t&&Rt(e,Kt(e),t)}(M,t))}else{if(!I[N])return i?t:{};M=function(t,e,r,n){var o=t.constructor;switch(e){case b:return Lt(t);case u:case l:return new o(+t);case w:return function(t,e){var r=e?Lt(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)}(t,n);case S:case x:case _:case E:case O:case P:case k:case C:case T:return function(t,e){var r=e?Lt(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}(t,n);case h:return function(t,e,r){return z(e?r(H(t),!0):H(t),G,new t.constructor)}(t,n,r);case p:case g:return new o(t);case y:return(s=new(a=t).constructor(a.source,A.exec(a))).lastIndex=a.lastIndex,s;case v:return function(t,e,r){return z(e?r(q(t),!0):q(t),U,new t.constructor)}(t,n,r);case m:return i=t,Ot?Object(Ot.call(i)):{}}var i;var a,s}(t,N,It,e)}}a||(a=new Tt);var R=a.get(t);if(R)return R;if(a.set(t,M),!j)var D=r?function(t){return function(t,e,r){var n=e(t);return Wt(t)?n:function(t,e){for(var r=-1,n=e.length,o=t.length;++r<n;)t[o+r]=e[r];return t}(n,r(t))}(t,Kt,Ft)}(t):Kt(t);return function(t,e){for(var r=-1,n=t?t.length:0;++r<n&&!1!==e(t[r],r,t););}(D||t,function(o,i){D&&(o=t[i=o]),Mt(M,i,It(o,e,r,n,i,t,a))}),M}function Nt(t){return!(!Jt(t)||Z&&Z in t)&&(Xt(t)||V(t)?rt:M).test(Vt(t))}function Lt(t){var e=new t.constructor(t.byteLength);return new it(e).set(new it(t)),e}function Rt(t,e,r,n){r||(r={});for(var o=-1,i=e.length;++o<i;){var a=e[o],s=n?n(r[a],t[a],a,r,t):void 0;Mt(r,a,void 0===s?t[a]:s)}return r}function Dt(t,e){var r,o,i=t.__data__;return("string"==(o=n(r=e))||"number"==o||"symbol"==o||"boolean"==o?"__proto__"!==r:null===r)?i["string"==typeof e?"string":"hash"]:i.map}function Bt(t,e){var r=function(t,e){return null==t?void 0:t[e]}(t,e);return Nt(r)?r:void 0}Pt.prototype.clear=function(){this.__data__=mt?mt(null):{}},Pt.prototype.delete=function(t){return this.has(t)&&delete this.__data__[t]},Pt.prototype.get=function(t){var e=this.__data__;if(mt){var r=e[t];return r===i?void 0:r}return tt.call(e,t)?e[t]:void 0},Pt.prototype.has=function(t){var e=this.__data__;return mt?void 0!==e[t]:tt.call(e,t)},Pt.prototype.set=function(t,e){return this.__data__[t]=mt&&void 0===e?i:e,this},kt.prototype.clear=function(){this.__data__=[]},kt.prototype.delete=function(t){var e=this.__data__,r=jt(e,t);return!(r<0||(r==e.length-1?e.pop():lt.call(e,r,1),0))},kt.prototype.get=function(t){var e=this.__data__,r=jt(e,t);return r<0?void 0:e[r][1]},kt.prototype.has=function(t){return jt(this.__data__,t)>-1},kt.prototype.set=function(t,e){var r=this.__data__,n=jt(r,t);return n<0?r.push([t,e]):r[n][1]=e,this},Ct.prototype.clear=function(){this.__data__={hash:new Pt,map:new(dt||kt),string:new Pt}},Ct.prototype.delete=function(t){return Dt(this,t).delete(t)},Ct.prototype.get=function(t){return Dt(this,t).get(t)},Ct.prototype.has=function(t){return Dt(this,t).has(t)},Ct.prototype.set=function(t,e){return Dt(this,t).set(t,e),this},Tt.prototype.clear=function(){this.__data__=new kt},Tt.prototype.delete=function(t){return this.__data__.delete(t)},Tt.prototype.get=function(t){return this.__data__.get(t)},Tt.prototype.has=function(t){return this.__data__.has(t)},Tt.prototype.set=function(t,e){var r=this.__data__;if(r instanceof kt){var n=r.__data__;if(!dt||n.length<o-1)return n.push([t,e]),this;r=this.__data__=new Ct(n)}return r.set(t,e),this};var Ft=ct?W(ct,Object):function(){return[]},Gt=function(t){return et.call(t)};function Ut(t,e){return!!(e=null==e?a:e)&&("number"==typeof t||j.test(t))&&t>-1&&t%1==0&&t<e}function zt(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||K)}function Vt(t){if(null!=t){try{return $.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function Ht(t,e){return t===e||t!=t&&e!=e}(pt&&Gt(new pt(new ArrayBuffer(1)))!=w||dt&&Gt(new dt)!=h||yt&&"[object Promise]"!=Gt(yt.resolve())||vt&&Gt(new vt)!=v||gt&&"[object WeakMap]"!=Gt(new gt))&&(Gt=function(t){var e=et.call(t),r=e==d?t.constructor:void 0,n=r?Vt(r):void 0;if(n)switch(n){case bt:return w;case wt:return h;case St:return"[object Promise]";case xt:return v;case _t:return"[object WeakMap]"}return e});var Wt=Array.isArray;function qt(t){return null!=t&&function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=a}(t.length)&&!Xt(t)}var Yt=ft||function(){return!1};function Xt(t){var e=Jt(t)?et.call(t):"";return e==c||e==f}function Jt(t){var e=n(t);return!!t&&("object"==e||"function"==e)}function Kt(t){return qt(t)?At(t):function(t){if(!zt(t))return ht(t);var e=[];for(var r in Object(t))tt.call(t,r)&&"constructor"!=r&&e.push(r);return e}(t)}t.exports=function(t){return It(t,!0,!0)}},7820:function(t,e,r){function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=9007199254740991,i="[object Arguments]",a="[object Function]",s="[object GeneratorFunction]",u="[object Map]",l="[object Set]",c=/^\[object .+?Constructor\]$/,f=/^(?:0|[1-9]\d*)$/,h="object"==(void 0===r.g?"undefined":n(r.g))&&r.g&&r.g.Object===Object&&r.g,p="object"==("undefined"==typeof self?"undefined":n(self))&&self&&self.Object===Object&&self,d=h||p||Function("return this")();function y(t,e){return function(t,e){for(var r=-1,n=t?t.length:0,o=Array(n);++r<n;)o[r]=e(t[r],r,t);return o}(e,function(e){return[e,t[e]]})}var v,g,m,b=Function.prototype,w=Object.prototype,S=d["__core-js_shared__"],x=(v=/[^.]+$/.exec(S&&S.keys&&S.keys.IE_PROTO||""))?"Symbol(src)_1."+v:"",_=b.toString,E=w.hasOwnProperty,O=w.toString,P=RegExp("^"+_.call(E).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),k=w.propertyIsEnumerable,C=(g=Object.keys,m=Object,function(t){return g(m(t))}),T=z(d,"DataView"),A=z(d,"Map"),M=z(d,"Promise"),j=z(d,"Set"),I=z(d,"WeakMap"),N=W(T),L=W(A),R=W(M),D=W(j),B=W(I);function F(t,e){var r=q(t)||function(t){return function(t){return function(t){return!!t&&"object"==n(t)}(t)&&Y(t)}(t)&&E.call(t,"callee")&&(!k.call(t,"callee")||O.call(t)==i)}(t)?function(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}(t.length,String):[],o=r.length,a=!!o;for(var s in t)!e&&!E.call(t,s)||a&&("length"==s||H(s,o))||r.push(s);return r}function G(t){return!(!J(t)||x&&x in t)&&(X(t)||function(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}(t)?P:c).test(W(t))}function U(t){if(r=(e=t)&&e.constructor,n="function"==typeof r&&r.prototype||w,e!==n)return C(t);var e,r,n,o=[];for(var i in Object(t))E.call(t,i)&&"constructor"!=i&&o.push(i);return o}function z(t,e){var r=function(t,e){return null==t?void 0:t[e]}(t,e);return G(r)?r:void 0}var V=function(t){return O.call(t)};function H(t,e){return!!(e=null==e?o:e)&&("number"==typeof t||f.test(t))&&t>-1&&t%1==0&&t<e}function W(t){if(null!=t){try{return _.call(t)}catch(t){}try{return t+""}catch(t){}}return""}(T&&"[object DataView]"!=V(new T(new ArrayBuffer(1)))||A&&V(new A)!=u||M&&"[object Promise]"!=V(M.resolve())||j&&V(new j)!=l||I&&"[object WeakMap]"!=V(new I))&&(V=function(t){var e=O.call(t),r="[object Object]"==e?t.constructor:void 0,n=r?W(r):void 0;if(n)switch(n){case N:return"[object DataView]";case L:return u;case R:return"[object Promise]";case D:return l;case B:return"[object WeakMap]"}return e});var q=Array.isArray;function Y(t){return null!=t&&function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=o}(t.length)&&!X(t)}function X(t){var e=J(t)?O.call(t):"";return e==a||e==s}function J(t){var e=n(t);return!!t&&("object"==e||"function"==e)}var K,Q=(K=function(t){return Y(t)?F(t):U(t)},function(t){var e,r,n,o=V(t);return o==u?(e=t,r=-1,n=Array(e.size),e.forEach(function(t,e){n[++r]=[e,t]}),n):o==l?function(t){var e=-1,r=Array(t.size);return t.forEach(function(t){r[++e]=[t,t]}),r}(t):y(t,K(t))});t.exports=Q},9819:function(t,e,r){function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}t=r.nmd(t);var o=200,i="Expected a function",a="__lodash_hash_undefined__",s=1,u=2,l=1/0,c=9007199254740991,f="[object Arguments]",h="[object Array]",p="[object Boolean]",d="[object Date]",y="[object Error]",v="[object Function]",g="[object GeneratorFunction]",m="[object Map]",b="[object Number]",w="[object Object]",S="[object RegExp]",x="[object Set]",_="[object String]",E="[object Symbol]",O="[object ArrayBuffer]",P="[object DataView]",k=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,C=/^\w*$/,T=/^\./,A=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,M=/\\(\\)?/g,j=/^\[object .+?Constructor\]$/,I=/^(?:0|[1-9]\d*)$/,N={};N["[object Float32Array]"]=N["[object Float64Array]"]=N["[object Int8Array]"]=N["[object Int16Array]"]=N["[object Int32Array]"]=N["[object Uint8Array]"]=N["[object Uint8ClampedArray]"]=N["[object Uint16Array]"]=N["[object Uint32Array]"]=!0,N[f]=N[h]=N[O]=N[p]=N[P]=N[d]=N[y]=N[v]=N[m]=N[b]=N[w]=N[S]=N[x]=N[_]=N["[object WeakMap]"]=!1;var L="object"==(void 0===r.g?"undefined":n(r.g))&&r.g&&r.g.Object===Object&&r.g,R="object"==("undefined"==typeof self?"undefined":n(self))&&self&&self.Object===Object&&self,D=L||R||Function("return this")(),B="object"==n(e)&&e&&!e.nodeType&&e,F=B&&"object"==n(t)&&t&&!t.nodeType&&t,G=F&&F.exports===B&&L.process,U=function(){try{return G&&G.binding("util")}catch(t){}}(),z=U&&U.isTypedArray;function V(t,e){return!!(t?t.length:0)&&function(t,e,r){if(e!=e)return function(t,e,r,n){var o=t.length,i=r+(n?1:-1);for(;n?i--:++i<o;)if(e(t[i],i,t))return i;return-1}(t,q,r);var n=r-1,o=t.length;for(;++n<o;)if(t[n]===e)return n;return-1}(t,e,0)>-1}function H(t,e,r){for(var n=-1,o=t?t.length:0;++n<o;)if(r(e,t[n]))return!0;return!1}function W(t,e){for(var r=-1,n=t?t.length:0;++r<n;)if(e(t[r],r,t))return!0;return!1}function q(t){return t!=t}function Y(t,e){return t.has(e)}function X(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}function J(t){var e=-1,r=Array(t.size);return t.forEach(function(t,n){r[++e]=[n,t]}),r}function K(t){var e=-1,r=Array(t.size);return t.forEach(function(t){r[++e]=t}),r}var Q,Z,$,tt=Array.prototype,et=Function.prototype,rt=Object.prototype,nt=D["__core-js_shared__"],ot=(Q=/[^.]+$/.exec(nt&&nt.keys&&nt.keys.IE_PROTO||""))?"Symbol(src)_1."+Q:"",it=et.toString,at=rt.hasOwnProperty,st=rt.toString,ut=RegExp("^"+it.call(at).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),lt=D.Symbol,ct=D.Uint8Array,ft=rt.propertyIsEnumerable,ht=tt.splice,pt=(Z=Object.keys,$=Object,function(t){return Z($(t))}),dt=Wt(D,"DataView"),yt=Wt(D,"Map"),vt=Wt(D,"Promise"),gt=Wt(D,"Set"),mt=Wt(D,"WeakMap"),bt=Wt(Object,"create"),wt=$t(dt),St=$t(yt),xt=$t(vt),_t=$t(gt),Et=$t(mt),Ot=lt?lt.prototype:void 0,Pt=Ot?Ot.valueOf:void 0,kt=Ot?Ot.toString:void 0;function Ct(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function Tt(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function At(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function Mt(t){var e=-1,r=t?t.length:0;for(this.__data__=new At;++e<r;)this.add(t[e])}function jt(t){this.__data__=new Tt(t)}function It(t,e){var r=ne(t)||re(t)?function(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}(t.length,String):[],n=r.length,o=!!n;for(var i in t)!e&&!at.call(t,i)||o&&("length"==i||Yt(i,n))||r.push(i);return r}function Nt(t,e){for(var r=t.length;r--;)if(ee(t[r][0],e))return r;return-1}function Lt(t,e){for(var r=0,n=(e=Xt(e,t)?[e]:Ut(e)).length;null!=t&&r<n;)t=t[Zt(e[r++])];return r&&r==n?t:void 0}function Rt(t,e){return null!=t&&e in Object(t)}function Dt(t,e,r,n,o){return t===e||(null==t||null==e||!se(t)&&!ue(e)?t!=t&&e!=e:function(t,e,r,n,o,i){var a=ne(t),l=ne(e),c=h,v=h;a||(c=(c=qt(t))==f?w:c);l||(v=(v=qt(e))==f?w:v);var g=c==w&&!X(t),k=v==w&&!X(e),C=c==v;if(C&&!g)return i||(i=new jt),a||ce(t)?Vt(t,e,r,n,o,i):function(t,e,r,n,o,i,a){switch(r){case P:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case O:return!(t.byteLength!=e.byteLength||!n(new ct(t),new ct(e)));case p:case d:case b:return ee(+t,+e);case y:return t.name==e.name&&t.message==e.message;case S:case _:return t==e+"";case m:var l=J;case x:var c=i&u;if(l||(l=K),t.size!=e.size&&!c)return!1;var f=a.get(t);if(f)return f==e;i|=s,a.set(t,e);var h=Vt(l(t),l(e),n,o,i,a);return a.delete(t),h;case E:if(Pt)return Pt.call(t)==Pt.call(e)}return!1}(t,e,c,r,n,o,i);if(!(o&u)){var T=g&&at.call(t,"__wrapped__"),A=k&&at.call(e,"__wrapped__");if(T||A){var M=T?t.value():t,j=A?e.value():e;return i||(i=new jt),r(M,j,n,o,i)}}if(!C)return!1;return i||(i=new jt),function(t,e,r,n,o,i){var a=o&u,s=fe(t),l=s.length,c=fe(e).length;if(l!=c&&!a)return!1;for(var f=l;f--;){var h=s[f];if(!(a?h in e:at.call(e,h)))return!1}var p=i.get(t);if(p&&i.get(e))return p==e;var d=!0;i.set(t,e),i.set(e,t);for(var y=a;++f<l;){h=s[f];var v=t[h],g=e[h];if(n)var m=a?n(g,v,h,e,t,i):n(v,g,h,t,e,i);if(!(void 0===m?v===g||r(v,g,n,o,i):m)){d=!1;break}y||(y="constructor"==h)}if(d&&!y){var b=t.constructor,w=e.constructor;b!=w&&"constructor"in t&&"constructor"in e&&!("function"==typeof b&&b instanceof b&&"function"==typeof w&&w instanceof w)&&(d=!1)}return i.delete(t),i.delete(e),d}(t,e,r,n,o,i)}(t,e,Dt,r,n,o))}function Bt(t){return!(!se(t)||ot&&ot in t)&&(ie(t)||X(t)?ut:j).test($t(t))}function Ft(t){return"function"==typeof t?t:null==t?he:"object"==n(t)?ne(t)?function(t,e){if(Xt(t)&&Jt(e))return Kt(Zt(t),e);return function(r){var n=function(t,e,r){var n=null==t?void 0:Lt(t,e);return void 0===n?r:n}(r,t);return void 0===n&&n===e?function(t,e){return null!=t&&function(t,e,r){var n,o=-1,i=(e=Xt(e,t)?[e]:Ut(e)).length;for(;++o<i;){var a=Zt(e[o]);if(!(n=null!=t&&r(t,a)))break;t=t[a]}if(n)return n;return!!(i=t?t.length:0)&&ae(i)&&Yt(a,i)&&(ne(t)||re(t))}(t,e,Rt)}(r,t):Dt(e,n,void 0,s|u)}}(t[0],t[1]):function(t){var e=function(t){var e=fe(t),r=e.length;for(;r--;){var n=e[r],o=t[n];e[r]=[n,o,Jt(o)]}return e}(t);if(1==e.length&&e[0][2])return Kt(e[0][0],e[0][1]);return function(r){return r===t||function(t,e,r,n){var o=r.length,i=o,a=!n;if(null==t)return!i;for(t=Object(t);o--;){var l=r[o];if(a&&l[2]?l[1]!==t[l[0]]:!(l[0]in t))return!1}for(;++o<i;){var c=(l=r[o])[0],f=t[c],h=l[1];if(a&&l[2]){if(void 0===f&&!(c in t))return!1}else{var p=new jt;if(n)var d=n(f,h,c,t,e,p);if(!(void 0===d?Dt(h,f,n,s|u,p):d))return!1}}return!0}(r,t,e)}}(t):Xt(e=t)?(r=Zt(e),function(t){return null==t?void 0:t[r]}):function(t){return function(e){return Lt(e,t)}}(e);var e,r}function Gt(t){if(r=(e=t)&&e.constructor,n="function"==typeof r&&r.prototype||rt,e!==n)return pt(t);var e,r,n,o=[];for(var i in Object(t))at.call(t,i)&&"constructor"!=i&&o.push(i);return o}function Ut(t){return ne(t)?t:Qt(t)}Ct.prototype.clear=function(){this.__data__=bt?bt(null):{}},Ct.prototype.delete=function(t){return this.has(t)&&delete this.__data__[t]},Ct.prototype.get=function(t){var e=this.__data__;if(bt){var r=e[t];return r===a?void 0:r}return at.call(e,t)?e[t]:void 0},Ct.prototype.has=function(t){var e=this.__data__;return bt?void 0!==e[t]:at.call(e,t)},Ct.prototype.set=function(t,e){return this.__data__[t]=bt&&void 0===e?a:e,this},Tt.prototype.clear=function(){this.__data__=[]},Tt.prototype.delete=function(t){var e=this.__data__,r=Nt(e,t);return!(r<0||(r==e.length-1?e.pop():ht.call(e,r,1),0))},Tt.prototype.get=function(t){var e=this.__data__,r=Nt(e,t);return r<0?void 0:e[r][1]},Tt.prototype.has=function(t){return Nt(this.__data__,t)>-1},Tt.prototype.set=function(t,e){var r=this.__data__,n=Nt(r,t);return n<0?r.push([t,e]):r[n][1]=e,this},At.prototype.clear=function(){this.__data__={hash:new Ct,map:new(yt||Tt),string:new Ct}},At.prototype.delete=function(t){return Ht(this,t).delete(t)},At.prototype.get=function(t){return Ht(this,t).get(t)},At.prototype.has=function(t){return Ht(this,t).has(t)},At.prototype.set=function(t,e){return Ht(this,t).set(t,e),this},Mt.prototype.add=Mt.prototype.push=function(t){return this.__data__.set(t,a),this},Mt.prototype.has=function(t){return this.__data__.has(t)},jt.prototype.clear=function(){this.__data__=new Tt},jt.prototype.delete=function(t){return this.__data__.delete(t)},jt.prototype.get=function(t){return this.__data__.get(t)},jt.prototype.has=function(t){return this.__data__.has(t)},jt.prototype.set=function(t,e){var r=this.__data__;if(r instanceof Tt){var n=r.__data__;if(!yt||n.length<o-1)return n.push([t,e]),this;r=this.__data__=new At(n)}return r.set(t,e),this};var zt=gt&&1/K(new gt([,-0]))[1]==l?function(t){return new gt(t)}:function(){};function Vt(t,e,r,n,o,i){var a=o&u,l=t.length,c=e.length;if(l!=c&&!(a&&c>l))return!1;var f=i.get(t);if(f&&i.get(e))return f==e;var h=-1,p=!0,d=o&s?new Mt:void 0;for(i.set(t,e),i.set(e,t);++h<l;){var y=t[h],v=e[h];if(n)var g=a?n(v,y,h,e,t,i):n(y,v,h,t,e,i);if(void 0!==g){if(g)continue;p=!1;break}if(d){if(!W(e,function(t,e){if(!d.has(e)&&(y===t||r(y,t,n,o,i)))return d.add(e)})){p=!1;break}}else if(y!==v&&!r(y,v,n,o,i)){p=!1;break}}return i.delete(t),i.delete(e),p}function Ht(t,e){var r,o,i=t.__data__;return("string"==(o=n(r=e))||"number"==o||"symbol"==o||"boolean"==o?"__proto__"!==r:null===r)?i["string"==typeof e?"string":"hash"]:i.map}function Wt(t,e){var r=function(t,e){return null==t?void 0:t[e]}(t,e);return Bt(r)?r:void 0}var qt=function(t){return st.call(t)};function Yt(t,e){return!!(e=null==e?c:e)&&("number"==typeof t||I.test(t))&&t>-1&&t%1==0&&t<e}function Xt(t,e){if(ne(t))return!1;var r=n(t);return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=t&&!le(t))||(C.test(t)||!k.test(t)||null!=e&&t in Object(e))}function Jt(t){return t==t&&!se(t)}function Kt(t,e){return function(r){return null!=r&&(r[t]===e&&(void 0!==e||t in Object(r)))}}(dt&&qt(new dt(new ArrayBuffer(1)))!=P||yt&&qt(new yt)!=m||vt&&"[object Promise]"!=qt(vt.resolve())||gt&&qt(new gt)!=x||mt&&"[object WeakMap]"!=qt(new mt))&&(qt=function(t){var e=st.call(t),r=e==w?t.constructor:void 0,n=r?$t(r):void 0;if(n)switch(n){case wt:return P;case St:return m;case xt:return"[object Promise]";case _t:return x;case Et:return"[object WeakMap]"}return e});var Qt=te(function(t){var e;t=null==(e=t)?"":function(t){if("string"==typeof t)return t;if(le(t))return kt?kt.call(t):"";var e=t+"";return"0"==e&&1/t==-l?"-0":e}(e);var r=[];return T.test(t)&&r.push(""),t.replace(A,function(t,e,n,o){r.push(n?o.replace(M,"$1"):e||t)}),r});function Zt(t){if("string"==typeof t||le(t))return t;var e=t+"";return"0"==e&&1/t==-l?"-0":e}function $t(t){if(null!=t){try{return it.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function te(t,e){if("function"!=typeof t||e&&"function"!=typeof e)throw new TypeError(i);var r=function r(){var n=arguments,o=e?e.apply(this,n):n[0],i=r.cache;if(i.has(o))return i.get(o);var a=t.apply(this,n);return r.cache=i.set(o,a),a};return r.cache=new(te.Cache||At),r}function ee(t,e){return t===e||t!=t&&e!=e}function re(t){return function(t){return ue(t)&&oe(t)}(t)&&at.call(t,"callee")&&(!ft.call(t,"callee")||st.call(t)==f)}te.Cache=At;var ne=Array.isArray;function oe(t){return null!=t&&ae(t.length)&&!ie(t)}function ie(t){var e=se(t)?st.call(t):"";return e==v||e==g}function ae(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=c}function se(t){var e=n(t);return!!t&&("object"==e||"function"==e)}function ue(t){return!!t&&"object"==n(t)}function le(t){return"symbol"==n(t)||ue(t)&&st.call(t)==E}var ce=z?function(t){return function(e){return t(e)}}(z):function(t){return ue(t)&&ae(t.length)&&!!N[st.call(t)]};function fe(t){return oe(t)?It(t):Gt(t)}function he(t){return t}t.exports=function(t,e){return t&&t.length?function(t,e,r){var n=-1,i=V,a=t.length,s=!0,u=[],l=u;if(r)s=!1,i=H;else if(a>=o){var c=e?null:zt(t);if(c)return K(c);s=!1,i=Y,l=new Mt}else l=e?[]:u;t:for(;++n<a;){var f=t[n],h=e?e(f):f;if(f=r||0!==f?f:0,s&&h==h){for(var p=l.length;p--;)if(l[p]===h)continue t;e&&l.push(h),u.push(f)}else i(l,h,r)||(l!==u&&l.push(h),u.push(f))}return u}(t,Ft(e)):[]}},442:function(t,e,r){var n=r(1203).Symbol;t.exports=n},5244:function(t,e,r){var n=r(442),o=r(861),i=r(9671),a="[object Null]",s="[object Undefined]",u=n?n.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?s:a:u&&u in Object(t)?o(t):i(t)}},4323:function(t,e,r){var n=r(5244),o=r(501),i=r(8223),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1,t.exports=function(t){return i(t)&&o(t.length)&&!!a[n(t)]}},9679:function(t){t.exports=function(t){return function(e){return t(e)}}},9747:function(t,e,r){function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o="object"==(void 0===r.g?"undefined":n(r.g))&&r.g&&r.g.Object===Object&&r.g;t.exports=o},2264:function(t,e,r){var n=r(1182)(Object.getPrototypeOf,Object);t.exports=n},861:function(t,e,r){var n=r(442),o=Object.prototype,i=o.hasOwnProperty,a=o.toString,s=n?n.toStringTag:void 0;t.exports=function(t){var e=i.call(t,s),r=t[s];try{t[s]=void 0;var n=!0}catch(t){}var o=a.call(t);return n&&(e?t[s]=r:delete t[s]),o}},5684:function(t,e,r){function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}t=r.nmd(t);var o=r(9747),i="object"==n(e)&&e&&!e.nodeType&&e,a=i&&"object"==n(t)&&t&&!t.nodeType&&t,s=a&&a.exports===i&&o.process,u=function(){try{var t=a&&a.require&&a.require("util").types;return t||s&&s.binding&&s.binding("util")}catch(t){}}();t.exports=u},9671:function(t){var e=Object.prototype.toString;t.exports=function(t){return e.call(t)}},1182:function(t){t.exports=function(t,e){return function(r){return t(e(r))}}},1203:function(t,e,r){function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=r(9747),i="object"==("undefined"==typeof self?"undefined":n(self))&&self&&self.Object===Object&&self,a=o||i||Function("return this")();t.exports=a},3936:function(t){var e=Array.isArray;t.exports=e},501:function(t){var e=9007199254740991;t.exports=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=e}},9505:function(t,e,r){var n=r(5244),o=r(8223),i="[object Number]";t.exports=function(t){return"number"==typeof t||o(t)&&n(t)==i}},8223:function(t){function e(t){"@babel/helpers - typeof";return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}t.exports=function(t){return null!=t&&"object"==e(t)}},4361:function(t,e,r){var n=r(5244),o=r(2264),i=r(8223),a="[object Object]",s=Function.prototype,u=Object.prototype,l=s.toString,c=u.hasOwnProperty,f=l.call(Object);t.exports=function(t){if(!i(t)||n(t)!=a)return!1;var e=o(t);if(null===e)return!0;var r=c.call(e,"constructor")&&e.constructor;return"function"==typeof r&&r instanceof r&&l.call(r)==f}},9906:function(t,e,r){var n=r(4323),o=r(9679),i=r(5684),a=i&&i.isTypedArray,s=a?o(a):n;t.exports=s},7367:function(t,e,r){var n,o,i,a;function s(t){"@babel/helpers - typeof";return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}t=r.nmd(t),window,a=function(){return function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==s(t)&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(n,o,function(e){return t[e]}.bind(null,o));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=32)}([function(t,e){t.exports={options:{usePureJavaScript:!1}}},function(t,e,r){(function(e){var n=r(0),o=r(35),i=t.exports=n.util=n.util||{};function a(t){if(8!==t&&16!==t&&24!==t&&32!==t)throw new Error("Only 8, 16, 24, or 32 bits supported: "+t)}function u(t){if(this.data="",this.read=0,"string"==typeof t)this.data=t;else if(i.isArrayBuffer(t)||i.isArrayBufferView(t))if("undefined"!=typeof Buffer&&t instanceof Buffer)this.data=t.toString("binary");else{var e=new Uint8Array(t);try{this.data=String.fromCharCode.apply(null,e)}catch(t){for(var r=0;r<e.length;++r)this.putByte(e[r])}}else(t instanceof u||"object"==s(t)&&"string"==typeof t.data&&"number"==typeof t.read)&&(this.data=t.data,this.read=t.read);this._constructedStringLength=0}!function(){if("undefined"!=typeof process&&process.nextTick&&!process.browser)return i.nextTick=process.nextTick,void("function"==typeof setImmediate?i.setImmediate=setImmediate:i.setImmediate=i.nextTick);if("function"==typeof setImmediate)return i.setImmediate=function(){return setImmediate.apply(void 0,arguments)},void(i.nextTick=function(t){return setImmediate(t)});if(i.setImmediate=function(t){setTimeout(t,0)},"undefined"!=typeof window&&"function"==typeof window.postMessage){var t="forge.setImmediate",e=[];i.setImmediate=function(r){e.push(r),1===e.length&&window.postMessage(t,"*")},window.addEventListener("message",function(r){if(r.source===window&&r.data===t){r.stopPropagation();var n=e.slice();e.length=0,n.forEach(function(t){t()})}},!0)}if("undefined"!=typeof MutationObserver){var r=Date.now(),n=!0,o=document.createElement("div");e=[],new MutationObserver(function(){var t=e.slice();e.length=0,t.forEach(function(t){t()})}).observe(o,{attributes:!0});var a=i.setImmediate;i.setImmediate=function(t){Date.now()-r>15?(r=Date.now(),a(t)):(e.push(t),1===e.length&&o.setAttribute("a",n=!n))}}i.nextTick=i.setImmediate}(),i.isNodejs="undefined"!=typeof process&&process.versions&&process.versions.node,i.globalScope=i.isNodejs?e:"undefined"==typeof self?window:self,i.isArray=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},i.isArrayBuffer=function(t){return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer},i.isArrayBufferView=function(t){return t&&i.isArrayBuffer(t.buffer)&&void 0!==t.byteLength},i.ByteBuffer=u,i.ByteStringBuffer=u,i.ByteStringBuffer.prototype._optimizeConstructedString=function(t){this._constructedStringLength+=t,this._constructedStringLength>4096&&(this.data.substr(0,1),this._constructedStringLength=0)},i.ByteStringBuffer.prototype.length=function(){return this.data.length-this.read},i.ByteStringBuffer.prototype.isEmpty=function(){return this.length()<=0},i.ByteStringBuffer.prototype.putByte=function(t){return this.putBytes(String.fromCharCode(t))},i.ByteStringBuffer.prototype.fillWithByte=function(t,e){t=String.fromCharCode(t);for(var r=this.data;e>0;)1&e&&(r+=t),(e>>>=1)>0&&(t+=t);return this.data=r,this._optimizeConstructedString(e),this},i.ByteStringBuffer.prototype.putBytes=function(t){return this.data+=t,this._optimizeConstructedString(t.length),this},i.ByteStringBuffer.prototype.putString=function(t){return this.putBytes(i.encodeUtf8(t))},i.ByteStringBuffer.prototype.putInt16=function(t){return this.putBytes(String.fromCharCode(t>>8&255)+String.fromCharCode(255&t))},i.ByteStringBuffer.prototype.putInt24=function(t){return this.putBytes(String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(255&t))},i.ByteStringBuffer.prototype.putInt32=function(t){return this.putBytes(String.fromCharCode(t>>24&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(255&t))},i.ByteStringBuffer.prototype.putInt16Le=function(t){return this.putBytes(String.fromCharCode(255&t)+String.fromCharCode(t>>8&255))},i.ByteStringBuffer.prototype.putInt24Le=function(t){return this.putBytes(String.fromCharCode(255&t)+String.fromCharCode(t>>8&255)+String.fromCharCode(t>>16&255))},i.ByteStringBuffer.prototype.putInt32Le=function(t){return this.putBytes(String.fromCharCode(255&t)+String.fromCharCode(t>>8&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>24&255))},i.ByteStringBuffer.prototype.putInt=function(t,e){a(e);var r="";do{e-=8,r+=String.fromCharCode(t>>e&255)}while(e>0);return this.putBytes(r)},i.ByteStringBuffer.prototype.putSignedInt=function(t,e){return t<0&&(t+=2<<e-1),this.putInt(t,e)},i.ByteStringBuffer.prototype.putBuffer=function(t){return this.putBytes(t.getBytes())},i.ByteStringBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)},i.ByteStringBuffer.prototype.getInt16=function(){var t=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);return this.read+=2,t},i.ByteStringBuffer.prototype.getInt24=function(){var t=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);return this.read+=3,t},i.ByteStringBuffer.prototype.getInt32=function(){var t=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,t},i.ByteStringBuffer.prototype.getInt16Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;return this.read+=2,t},i.ByteStringBuffer.prototype.getInt24Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;return this.read+=3,t},i.ByteStringBuffer.prototype.getInt32Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;return this.read+=4,t},i.ByteStringBuffer.prototype.getInt=function(t){a(t);var e=0;do{e=(e<<8)+this.data.charCodeAt(this.read++),t-=8}while(t>0);return e},i.ByteStringBuffer.prototype.getSignedInt=function(t){var e=this.getInt(t),r=2<<t-2;return e>=r&&(e-=r<<1),e},i.ByteStringBuffer.prototype.getBytes=function(t){var e;return t?(t=Math.min(this.length(),t),e=this.data.slice(this.read,this.read+t),this.read+=t):0===t?e="":(e=0===this.read?this.data:this.data.slice(this.read),this.clear()),e},i.ByteStringBuffer.prototype.bytes=function(t){return void 0===t?this.data.slice(this.read):this.data.slice(this.read,this.read+t)},i.ByteStringBuffer.prototype.at=function(t){return this.data.charCodeAt(this.read+t)},i.ByteStringBuffer.prototype.setAt=function(t,e){return this.data=this.data.substr(0,this.read+t)+String.fromCharCode(e)+this.data.substr(this.read+t+1),this},i.ByteStringBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1)},i.ByteStringBuffer.prototype.copy=function(){var t=i.createBuffer(this.data);return t.read=this.read,t},i.ByteStringBuffer.prototype.compact=function(){return this.read>0&&(this.data=this.data.slice(this.read),this.read=0),this},i.ByteStringBuffer.prototype.clear=function(){return this.data="",this.read=0,this},i.ByteStringBuffer.prototype.truncate=function(t){var e=Math.max(0,this.length()-t);return this.data=this.data.substr(this.read,e),this.read=0,this},i.ByteStringBuffer.prototype.toHex=function(){for(var t="",e=this.read;e<this.data.length;++e){var r=this.data.charCodeAt(e);r<16&&(t+="0"),t+=r.toString(16)}return t},i.ByteStringBuffer.prototype.toString=function(){return i.decodeUtf8(this.bytes())},i.DataBuffer=function(t,e){e=e||{},this.read=e.readOffset||0,this.growSize=e.growSize||1024;var r=i.isArrayBuffer(t),n=i.isArrayBufferView(t);if(r||n)return this.data=r?new DataView(t):new DataView(t.buffer,t.byteOffset,t.byteLength),void(this.write="writeOffset"in e?e.writeOffset:this.data.byteLength);this.data=new DataView(new ArrayBuffer(0)),this.write=0,null!=t&&this.putBytes(t),"writeOffset"in e&&(this.write=e.writeOffset)},i.DataBuffer.prototype.length=function(){return this.write-this.read},i.DataBuffer.prototype.isEmpty=function(){return this.length()<=0},i.DataBuffer.prototype.accommodate=function(t,e){if(this.length()>=t)return this;e=Math.max(e||this.growSize,t);var r=new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength),n=new Uint8Array(this.length()+e);return n.set(r),this.data=new DataView(n.buffer),this},i.DataBuffer.prototype.putByte=function(t){return this.accommodate(1),this.data.setUint8(this.write++,t),this},i.DataBuffer.prototype.fillWithByte=function(t,e){this.accommodate(e);for(var r=0;r<e;++r)this.data.setUint8(t);return this},i.DataBuffer.prototype.putBytes=function(t,e){if(i.isArrayBufferView(t)){var r=(n=new Uint8Array(t.buffer,t.byteOffset,t.byteLength)).byteLength-n.byteOffset;return this.accommodate(r),new Uint8Array(this.data.buffer,this.write).set(n),this.write+=r,this}if(i.isArrayBuffer(t)){var n=new Uint8Array(t);return this.accommodate(n.byteLength),new Uint8Array(this.data.buffer).set(n,this.write),this.write+=n.byteLength,this}if(t instanceof i.DataBuffer||"object"==s(t)&&"number"==typeof t.read&&"number"==typeof t.write&&i.isArrayBufferView(t.data))return n=new Uint8Array(t.data.byteLength,t.read,t.length()),this.accommodate(n.byteLength),new Uint8Array(t.data.byteLength,this.write).set(n),this.write+=n.byteLength,this;if(t instanceof i.ByteStringBuffer&&(t=t.data,e="binary"),e=e||"binary","string"==typeof t){var o;if("hex"===e)return this.accommodate(Math.ceil(t.length/2)),o=new Uint8Array(this.data.buffer,this.write),this.write+=i.binary.hex.decode(t,o,this.write),this;if("base64"===e)return this.accommodate(3*Math.ceil(t.length/4)),o=new Uint8Array(this.data.buffer,this.write),this.write+=i.binary.base64.decode(t,o,this.write),this;if("utf8"===e&&(t=i.encodeUtf8(t),e="binary"),"binary"===e||"raw"===e)return this.accommodate(t.length),o=new Uint8Array(this.data.buffer,this.write),this.write+=i.binary.raw.decode(o),this;if("utf16"===e)return this.accommodate(2*t.length),o=new Uint16Array(this.data.buffer,this.write),this.write+=i.text.utf16.encode(o),this;throw new Error("Invalid encoding: "+e)}throw Error("Invalid parameter: "+t)},i.DataBuffer.prototype.putBuffer=function(t){return this.putBytes(t),t.clear(),this},i.DataBuffer.prototype.putString=function(t){return this.putBytes(t,"utf16")},i.DataBuffer.prototype.putInt16=function(t){return this.accommodate(2),this.data.setInt16(this.write,t),this.write+=2,this},i.DataBuffer.prototype.putInt24=function(t){return this.accommodate(3),this.data.setInt16(this.write,t>>8&65535),this.data.setInt8(this.write,t>>16&255),this.write+=3,this},i.DataBuffer.prototype.putInt32=function(t){return this.accommodate(4),this.data.setInt32(this.write,t),this.write+=4,this},i.DataBuffer.prototype.putInt16Le=function(t){return this.accommodate(2),this.data.setInt16(this.write,t,!0),this.write+=2,this},i.DataBuffer.prototype.putInt24Le=function(t){return this.accommodate(3),this.data.setInt8(this.write,t>>16&255),this.data.setInt16(this.write,t>>8&65535,!0),this.write+=3,this},i.DataBuffer.prototype.putInt32Le=function(t){return this.accommodate(4),this.data.setInt32(this.write,t,!0),this.write+=4,this},i.DataBuffer.prototype.putInt=function(t,e){a(e),this.accommodate(e/8);do{e-=8,this.data.setInt8(this.write++,t>>e&255)}while(e>0);return this},i.DataBuffer.prototype.putSignedInt=function(t,e){return a(e),this.accommodate(e/8),t<0&&(t+=2<<e-1),this.putInt(t,e)},i.DataBuffer.prototype.getByte=function(){return this.data.getInt8(this.read++)},i.DataBuffer.prototype.getInt16=function(){var t=this.data.getInt16(this.read);return this.read+=2,t},i.DataBuffer.prototype.getInt24=function(){var t=this.data.getInt16(this.read)<<8^this.data.getInt8(this.read+2);return this.read+=3,t},i.DataBuffer.prototype.getInt32=function(){var t=this.data.getInt32(this.read);return this.read+=4,t},i.DataBuffer.prototype.getInt16Le=function(){var t=this.data.getInt16(this.read,!0);return this.read+=2,t},i.DataBuffer.prototype.getInt24Le=function(){var t=this.data.getInt8(this.read)^this.data.getInt16(this.read+1,!0)<<8;return this.read+=3,t},i.DataBuffer.prototype.getInt32Le=function(){var t=this.data.getInt32(this.read,!0);return this.read+=4,t},i.DataBuffer.prototype.getInt=function(t){a(t);var e=0;do{e=(e<<8)+this.data.getInt8(this.read++),t-=8}while(t>0);return e},i.DataBuffer.prototype.getSignedInt=function(t){var e=this.getInt(t),r=2<<t-2;return e>=r&&(e-=r<<1),e},i.DataBuffer.prototype.getBytes=function(t){var e;return t?(t=Math.min(this.length(),t),e=this.data.slice(this.read,this.read+t),this.read+=t):0===t?e="":(e=0===this.read?this.data:this.data.slice(this.read),this.clear()),e},i.DataBuffer.prototype.bytes=function(t){return void 0===t?this.data.slice(this.read):this.data.slice(this.read,this.read+t)},i.DataBuffer.prototype.at=function(t){return this.data.getUint8(this.read+t)},i.DataBuffer.prototype.setAt=function(t,e){return this.data.setUint8(t,e),this},i.DataBuffer.prototype.last=function(){return this.data.getUint8(this.write-1)},i.DataBuffer.prototype.copy=function(){return new i.DataBuffer(this)},i.DataBuffer.prototype.compact=function(){if(this.read>0){var t=new Uint8Array(this.data.buffer,this.read),e=new Uint8Array(t.byteLength);e.set(t),this.data=new DataView(e),this.write-=this.read,this.read=0}return this},i.DataBuffer.prototype.clear=function(){return this.data=new DataView(new ArrayBuffer(0)),this.read=this.write=0,this},i.DataBuffer.prototype.truncate=function(t){return this.write=Math.max(0,this.length()-t),this.read=Math.min(this.read,this.write),this},i.DataBuffer.prototype.toHex=function(){for(var t="",e=this.read;e<this.data.byteLength;++e){var r=this.data.getUint8(e);r<16&&(t+="0"),t+=r.toString(16)}return t},i.DataBuffer.prototype.toString=function(t){var e=new Uint8Array(this.data,this.read,this.length());if("binary"===(t=t||"utf8")||"raw"===t)return i.binary.raw.encode(e);if("hex"===t)return i.binary.hex.encode(e);if("base64"===t)return i.binary.base64.encode(e);if("utf8"===t)return i.text.utf8.decode(e);if("utf16"===t)return i.text.utf16.decode(e);throw new Error("Invalid encoding: "+t)},i.createBuffer=function(t,e){return e=e||"raw",void 0!==t&&"utf8"===e&&(t=i.encodeUtf8(t)),new i.ByteBuffer(t)},i.fillString=function(t,e){for(var r="";e>0;)1&e&&(r+=t),(e>>>=1)>0&&(t+=t);return r},i.xorBytes=function(t,e,r){for(var n="",o="",i="",a=0,s=0;r>0;--r,++a)o=t.charCodeAt(a)^e.charCodeAt(a),s>=10&&(n+=i,i="",s=0),i+=String.fromCharCode(o),++s;return n+i},i.hexToBytes=function(t){var e="",r=0;for(!0&t.length&&(r=1,e+=String.fromCharCode(parseInt(t[0],16)));r<t.length;r+=2)e+=String.fromCharCode(parseInt(t.substr(r,2),16));return e},i.bytesToHex=function(t){return i.createBuffer(t).toHex()},i.int32ToBytes=function(t){return String.fromCharCode(t>>24&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(255&t)};var l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",c=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],f="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";i.encode64=function(t,e){for(var r,n,o,i="",a="",s=0;s<t.length;)r=t.charCodeAt(s++),n=t.charCodeAt(s++),o=t.charCodeAt(s++),i+=l.charAt(r>>2),i+=l.charAt((3&r)<<4|n>>4),isNaN(n)?i+="==":(i+=l.charAt((15&n)<<2|o>>6),i+=isNaN(o)?"=":l.charAt(63&o)),e&&i.length>e&&(a+=i.substr(0,e)+"\r\n",i=i.substr(e));return a+i},i.decode64=function(t){t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var e,r,n,o,i="",a=0;a<t.length;)e=c[t.charCodeAt(a++)-43],r=c[t.charCodeAt(a++)-43],n=c[t.charCodeAt(a++)-43],o=c[t.charCodeAt(a++)-43],i+=String.fromCharCode(e<<2|r>>4),64!==n&&(i+=String.fromCharCode((15&r)<<4|n>>2),64!==o&&(i+=String.fromCharCode((3&n)<<6|o)));return i},i.encodeUtf8=function(t){return unescape(encodeURIComponent(t))},i.decodeUtf8=function(t){return decodeURIComponent(escape(t))},i.binary={raw:{},hex:{},base64:{},base58:{},baseN:{encode:o.encode,decode:o.decode}},i.binary.raw.encode=function(t){return String.fromCharCode.apply(null,t)},i.binary.raw.decode=function(t,e,r){var n=e;n||(n=new Uint8Array(t.length));for(var o=r=r||0,i=0;i<t.length;++i)n[o++]=t.charCodeAt(i);return e?o-r:n},i.binary.hex.encode=i.bytesToHex,i.binary.hex.decode=function(t,e,r){var n=e;n||(n=new Uint8Array(Math.ceil(t.length/2)));var o=0,i=r=r||0;for(1&t.length&&(o=1,n[i++]=parseInt(t[0],16));o<t.length;o+=2)n[i++]=parseInt(t.substr(o,2),16);return e?i-r:n},i.binary.base64.encode=function(t,e){for(var r,n,o,i="",a="",s=0;s<t.byteLength;)r=t[s++],n=t[s++],o=t[s++],i+=l.charAt(r>>2),i+=l.charAt((3&r)<<4|n>>4),isNaN(n)?i+="==":(i+=l.charAt((15&n)<<2|o>>6),i+=isNaN(o)?"=":l.charAt(63&o)),e&&i.length>e&&(a+=i.substr(0,e)+"\r\n",i=i.substr(e));return a+i},i.binary.base64.decode=function(t,e,r){var n,o,i,a,s=e;s||(s=new Uint8Array(3*Math.ceil(t.length/4))),t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var u=0,l=r=r||0;u<t.length;)n=c[t.charCodeAt(u++)-43],o=c[t.charCodeAt(u++)-43],i=c[t.charCodeAt(u++)-43],a=c[t.charCodeAt(u++)-43],s[l++]=n<<2|o>>4,64!==i&&(s[l++]=(15&o)<<4|i>>2,64!==a&&(s[l++]=(3&i)<<6|a));return e?l-r:s.subarray(0,l)},i.binary.base58.encode=function(t,e){return i.binary.baseN.encode(t,f,e)},i.binary.base58.decode=function(t,e){return i.binary.baseN.decode(t,f,e)},i.text={utf8:{},utf16:{}},i.text.utf8.encode=function(t,e,r){t=i.encodeUtf8(t);var n=e;n||(n=new Uint8Array(t.length));for(var o=r=r||0,a=0;a<t.length;++a)n[o++]=t.charCodeAt(a);return e?o-r:n},i.text.utf8.decode=function(t){return i.decodeUtf8(String.fromCharCode.apply(null,t))},i.text.utf16.encode=function(t,e,r){var n=e;n||(n=new Uint8Array(2*t.length));for(var o=new Uint16Array(n.buffer),i=r=r||0,a=r,s=0;s<t.length;++s)o[a++]=t.charCodeAt(s),i+=2;return e?i-r:n},i.text.utf16.decode=function(t){return String.fromCharCode.apply(null,new Uint16Array(t.buffer))},i.deflate=function(t,e,r){if(e=i.decode64(t.deflate(i.encode64(e)).rval),r){var n=2;32&e.charCodeAt(1)&&(n=6),e=e.substring(n,e.length-4)}return e},i.inflate=function(t,e,r){var n=t.inflate(i.encode64(e)).rval;return null===n?null:i.decode64(n)};var h=function(t,e,r){if(!t)throw new Error("WebStorage not available.");var n;if(null===r?n=t.removeItem(e):(r=i.encode64(JSON.stringify(r)),n=t.setItem(e,r)),void 0!==n&&!0!==n.rval){var o=new Error(n.error.message);throw o.id=n.error.id,o.name=n.error.name,o}},p=function(t,e){if(!t)throw new Error("WebStorage not available.");var r=t.getItem(e);if(t.init)if(null===r.rval){if(r.error){var n=new Error(r.error.message);throw n.id=r.error.id,n.name=r.error.name,n}r=null}else r=r.rval;return null!==r&&(r=JSON.parse(i.decode64(r))),r},d=function(t,e,r,n){var o=p(t,e);null===o&&(o={}),o[r]=n,h(t,e,o)},y=function(t,e,r){var n=p(t,e);return null!==n&&(n=r in n?n[r]:null),n},v=function(t,e,r){var n=p(t,e);if(null!==n&&r in n){delete n[r];var o=!0;for(var i in n){o=!1;break}o&&(n=null),h(t,e,n)}},g=function(t,e){h(t,e,null)},m=function(t,e,r){var n,o=null;void 0===r&&(r=["web","flash"]);var i=!1,a=null;for(var s in r){n=r[s];try{if("flash"===n||"both"===n){if(null===e[0])throw new Error("Flash local storage not available.");o=t.apply(this,e),i="flash"===n}"web"!==n&&"both"!==n||(e[0]=localStorage,o=t.apply(this,e),i=!0)}catch(t){a=t}if(i)break}if(!i)throw a;return o};i.setItem=function(t,e,r,n,o){m(d,arguments,o)},i.getItem=function(t,e,r,n){return m(y,arguments,n)},i.removeItem=function(t,e,r,n){m(v,arguments,n)},i.clearItems=function(t,e,r){m(g,arguments,r)},i.isEmpty=function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0},i.format=function(t){for(var e,r,n=/%./g,o=0,i=[],a=0;e=n.exec(t);){(r=t.substring(a,n.lastIndex-2)).length>0&&i.push(r),a=n.lastIndex;var s=e[0][1];switch(s){case"s":case"o":o<arguments.length?i.push(arguments[1+o++]):i.push("<?>");break;case"%":i.push("%");break;default:i.push("<%"+s+"?>")}}return i.push(t.substring(a)),i.join("")},i.formatNumber=function(t,e,r,n){var o=t,i=isNaN(e=Math.abs(e))?2:e,a=void 0===r?",":r,s=void 0===n?".":n,u=o<0?"-":"",l=parseInt(o=Math.abs(+o||0).toFixed(i),10)+"",c=l.length>3?l.length%3:0;return u+(c?l.substr(0,c)+s:"")+l.substr(c).replace(/(\d{3})(?=\d)/g,"$1"+s)+(i?a+Math.abs(o-l).toFixed(i).slice(2):"")},i.formatSize=function(t){return t>=1073741824?i.formatNumber(t/1073741824,2,".","")+" GiB":t>=1048576?i.formatNumber(t/1048576,2,".","")+" MiB":t>=1024?i.formatNumber(t/1024,0)+" KiB":i.formatNumber(t,0)+" bytes"},i.bytesFromIP=function(t){return-1!==t.indexOf(".")?i.bytesFromIPv4(t):-1!==t.indexOf(":")?i.bytesFromIPv6(t):null},i.bytesFromIPv4=function(t){if(4!==(t=t.split(".")).length)return null;for(var e=i.createBuffer(),r=0;r<t.length;++r){var n=parseInt(t[r],10);if(isNaN(n))return null;e.putByte(n)}return e.getBytes()},i.bytesFromIPv6=function(t){for(var e=0,r=2*(8-(t=t.split(":").filter(function(t){return 0===t.length&&++e,!0})).length+e),n=i.createBuffer(),o=0;o<8;++o)if(t[o]&&0!==t[o].length){var a=i.hexToBytes(t[o]);a.length<2&&n.putByte(0),n.putBytes(a)}else n.fillWithByte(0,r),r=0;return n.getBytes()},i.bytesToIP=function(t){return 4===t.length?i.bytesToIPv4(t):16===t.length?i.bytesToIPv6(t):null},i.bytesToIPv4=function(t){if(4!==t.length)return null;for(var e=[],r=0;r<t.length;++r)e.push(t.charCodeAt(r));return e.join(".")},i.bytesToIPv6=function(t){if(16!==t.length)return null;for(var e=[],r=[],n=0,o=0;o<t.length;o+=2){for(var a=i.bytesToHex(t[o]+t[o+1]);"0"===a[0]&&"0"!==a;)a=a.substr(1);if("0"===a){var s=r[r.length-1],u=e.length;s&&u===s.end+1?(s.end=u,s.end-s.start>r[n].end-r[n].start&&(n=r.length-1)):r.push({start:u,end:u})}e.push(a)}if(r.length>0){var l=r[n];l.end-l.start>0&&(e.splice(l.start,l.end-l.start+1,""),0===l.start&&e.unshift(""),7===l.end&&e.push(""))}return e.join(":")},i.estimateCores=function(t,e){if("function"==typeof t&&(e=t,t={}),t=t||{},"cores"in i&&!t.update)return e(null,i.cores);if("undefined"!=typeof navigator&&"hardwareConcurrency"in navigator&&navigator.hardwareConcurrency>0)return i.cores=navigator.hardwareConcurrency,e(null,i.cores);if("undefined"==typeof Worker)return i.cores=1,e(null,i.cores);if("undefined"==typeof Blob)return i.cores=2,e(null,i.cores);var r=URL.createObjectURL(new Blob(["(",function(){self.addEventListener("message",function(t){for(var e=Date.now(),r=e+4;Date.now()<r;);self.postMessage({st:e,et:r})})}.toString(),")()"],{type:"application/javascript"}));!function t(n,o,a){if(0===o){var s=Math.floor(n.reduce(function(t,e){return t+e},0)/n.length);return i.cores=Math.max(1,s),URL.revokeObjectURL(r),e(null,i.cores)}!function(t,e){for(var n=[],o=[],i=0;i<t;++i){var a=new Worker(r);a.addEventListener("message",function(r){if(o.push(r.data),o.length===t){for(var i=0;i<t;++i)n[i].terminate();e(null,o)}}),n.push(a)}for(i=0;i<t;++i)n[i].postMessage(i)}(a,function(e,r){n.push(function(t,e){for(var r=[],n=0;n<t;++n)for(var o=e[n],i=r[n]=[],a=0;a<t;++a)if(n!==a){var s=e[a];(o.st>s.st&&o.st<s.et||s.st>o.st&&s.st<o.et)&&i.push(a)}return r.reduce(function(t,e){return Math.max(t,e.length)},0)}(a,r)),t(n,o-1,a)})}([],5,16)}}).call(this,r(34))},function(t,e,r){var n=r(0);r(5),r(23),r(24),r(1),n.random&&n.random.getBytes?t.exports=n.random:function(e){var r={},o=new Array(4),i=n.util.createBuffer();function a(){var t=n.prng.create(r);return t.getBytes=function(e,r){return t.generate(e,r)},t.getBytesSync=function(e){return t.generate(e)},t}r.formatKey=function(t){var e=n.util.createBuffer(t);return(t=new Array(4))[0]=e.getInt32(),t[1]=e.getInt32(),t[2]=e.getInt32(),t[3]=e.getInt32(),n.aes._expandKey(t,!1)},r.formatSeed=function(t){var e=n.util.createBuffer(t);return(t=new Array(4))[0]=e.getInt32(),t[1]=e.getInt32(),t[2]=e.getInt32(),t[3]=e.getInt32(),t},r.cipher=function(t,e){return n.aes._updateBlock(t,e,o,!1),i.putInt32(o[0]),i.putInt32(o[1]),i.putInt32(o[2]),i.putInt32(o[3]),i.getBytes()},r.increment=function(t){return++t[3],t},r.md=n.md.sha256;var s=a(),u=null,l=n.util.globalScope,c=l.crypto||l.msCrypto;if(c&&c.getRandomValues&&(u=function(t){return c.getRandomValues(t)}),n.options.usePureJavaScript||!n.util.isNodejs&&!u){if("undefined"==typeof window||window.document,s.collectInt(+new Date,32),"undefined"!=typeof navigator){var f="";for(var h in navigator)try{"string"==typeof navigator[h]&&(f+=navigator[h])}catch(t){}s.collect(f),f=null}e&&(e().mousemove(function(t){s.collectInt(t.clientX,16),s.collectInt(t.clientY,16)}),e().keypress(function(t){s.collectInt(t.charCode,8)}))}if(n.random)for(var h in s)n.random[h]=s[h];else n.random=s;n.random.createInstance=a,t.exports=n.random}("undefined"!=typeof jQuery?jQuery:null)},function(t,e,r){var n=r(0);r(1),r(6);var o=t.exports=n.asn1=n.asn1||{};function i(t,e,r){if(r>e){var n=new Error("Too few bytes to parse DER.");throw n.available=t.length(),n.remaining=e,n.requested=r,n}}o.Class={UNIVERSAL:0,APPLICATION:64,CONTEXT_SPECIFIC:128,PRIVATE:192},o.Type={NONE:0,BOOLEAN:1,INTEGER:2,BITSTRING:3,OCTETSTRING:4,NULL:5,OID:6,ODESC:7,EXTERNAL:8,REAL:9,ENUMERATED:10,EMBEDDED:11,UTF8:12,ROID:13,SEQUENCE:16,SET:17,PRINTABLESTRING:19,IA5STRING:22,UTCTIME:23,GENERALIZEDTIME:24,BMPSTRING:30},o.create=function(t,e,r,i,a){if(n.util.isArray(i)){for(var s=[],u=0;u<i.length;++u)void 0!==i[u]&&s.push(i[u]);i=s}var l={tagClass:t,type:e,constructed:r,composed:r||n.util.isArray(i),value:i};return a&&"bitStringContents"in a&&(l.bitStringContents=a.bitStringContents,l.original=o.copy(l)),l},o.copy=function(t,e){var r;if(n.util.isArray(t)){r=[];for(var i=0;i<t.length;++i)r.push(o.copy(t[i],e));return r}return"string"==typeof t?t:(r={tagClass:t.tagClass,type:t.type,constructed:t.constructed,composed:t.composed,value:o.copy(t.value,e)},e&&!e.excludeBitStringContents&&(r.bitStringContents=t.bitStringContents),r)},o.equals=function(t,e,r){if(n.util.isArray(t)){if(!n.util.isArray(e))return!1;if(t.length!==e.length)return!1;for(var i=0;i<t.length;++i)if(!o.equals(t[i],e[i]))return!1;return!0}if(s(t)!=s(e))return!1;if("string"==typeof t)return t===e;var a=t.tagClass===e.tagClass&&t.type===e.type&&t.constructed===e.constructed&&t.composed===e.composed&&o.equals(t.value,e.value);return r&&r.includeBitStringContents&&(a=a&&t.bitStringContents===e.bitStringContents),a},o.getBerValueLength=function(t){var e=t.getByte();if(128!==e)return 128&e?t.getInt((127&e)<<3):e},o.fromDer=function(t,e){void 0===e&&(e={strict:!0,parseAllBytes:!0,decodeBitStrings:!0}),"boolean"==typeof e&&(e={strict:e,parseAllBytes:!0,decodeBitStrings:!0}),"strict"in e||(e.strict=!0),"parseAllBytes"in e||(e.parseAllBytes=!0),"decodeBitStrings"in e||(e.decodeBitStrings=!0),"string"==typeof t&&(t=n.util.createBuffer(t));var r=t.length(),a=function t(e,r,n,a){var s;i(e,r,2);var u=e.getByte();r--;var l=192&u,c=31&u;s=e.length();var f,h,p=function(t,e){var r=t.getByte();if(e--,128!==r){var n;if(128&r){var o=127&r;i(t,e,o),n=t.getInt(o<<3)}else n=r;if(n<0)throw new Error("Negative length: "+n);return n}}(e,r);if(r-=s-e.length(),void 0!==p&&p>r){if(a.strict){var d=new Error("Too few bytes to read ASN.1 value.");throw d.available=e.length(),d.remaining=r,d.requested=p,d}p=r}var y=32==(32&u);if(y)if(f=[],void 0===p)for(;;){if(i(e,r,2),e.bytes(2)===String.fromCharCode(0,0)){e.getBytes(2),r-=2;break}s=e.length(),f.push(t(e,r,n+1,a)),r-=s-e.length()}else for(;p>0;)s=e.length(),f.push(t(e,p,n+1,a)),r-=s-e.length(),p-=s-e.length();if(void 0===f&&l===o.Class.UNIVERSAL&&c===o.Type.BITSTRING&&(h=e.bytes(p)),void 0===f&&a.decodeBitStrings&&l===o.Class.UNIVERSAL&&c===o.Type.BITSTRING&&p>1){var v=e.read,g=r,m=0;if(c===o.Type.BITSTRING&&(i(e,r,1),m=e.getByte(),r--),0===m)try{s=e.length();var b=t(e,r,n+1,{strict:!0,decodeBitStrings:!0}),w=s-e.length();r-=w,c==o.Type.BITSTRING&&w++;var S=b.tagClass;w!==p||S!==o.Class.UNIVERSAL&&S!==o.Class.CONTEXT_SPECIFIC||(f=[b])}catch(t){}void 0===f&&(e.read=v,r=g)}if(void 0===f){if(void 0===p){if(a.strict)throw new Error("Non-constructed ASN.1 object of indefinite length.");p=r}if(c===o.Type.BMPSTRING)for(f="";p>0;p-=2)i(e,r,2),f+=String.fromCharCode(e.getInt16()),r-=2;else f=e.getBytes(p),r-=p}var x=void 0===h?null:{bitStringContents:h};return o.create(l,c,y,f,x)}(t,t.length(),0,e);if(e.parseAllBytes&&0!==t.length()){var s=new Error("Unparsed DER bytes remain after ASN.1 parsing.");throw s.byteCount=r,s.remaining=t.length(),s}return a},o.toDer=function(t){var e=n.util.createBuffer(),r=t.tagClass|t.type,i=n.util.createBuffer(),a=!1;if("bitStringContents"in t&&(a=!0,t.original&&(a=o.equals(t,t.original))),a)i.putBytes(t.bitStringContents);else if(t.composed){t.constructed?r|=32:i.putByte(0);for(var s=0;s<t.value.length;++s)void 0!==t.value[s]&&i.putBuffer(o.toDer(t.value[s]))}else if(t.type===o.Type.BMPSTRING)for(s=0;s<t.value.length;++s)i.putInt16(t.value.charCodeAt(s));else t.type===o.Type.INTEGER&&t.value.length>1&&(0===t.value.charCodeAt(0)&&0==(128&t.value.charCodeAt(1))||255===t.value.charCodeAt(0)&&128==(128&t.value.charCodeAt(1)))?i.putBytes(t.value.substr(1)):i.putBytes(t.value);if(e.putByte(r),i.length()<=127)e.putByte(127&i.length());else{var u=i.length(),l="";do{l+=String.fromCharCode(255&u),u>>>=8}while(u>0);for(e.putByte(128|l.length),s=l.length-1;s>=0;--s)e.putByte(l.charCodeAt(s))}return e.putBuffer(i),e},o.oidToDer=function(t){var e,r,o,i,a=t.split("."),s=n.util.createBuffer();s.putByte(40*parseInt(a[0],10)+parseInt(a[1],10));for(var u=2;u<a.length;++u){e=!0,r=[],o=parseInt(a[u],10);do{i=127&o,o>>>=7,e||(i|=128),r.push(i),e=!1}while(o>0);for(var l=r.length-1;l>=0;--l)s.putByte(r[l])}return s},o.derToOid=function(t){var e;"string"==typeof t&&(t=n.util.createBuffer(t));var r=t.getByte();e=Math.floor(r/40)+"."+r%40;for(var o=0;t.length()>0;)o<<=7,128&(r=t.getByte())?o+=127&r:(e+="."+(o+r),o=0);return e},o.utcTimeToDate=function(t){var e=new Date,r=parseInt(t.substr(0,2),10);r=r>=50?1900+r:2e3+r;var n=parseInt(t.substr(2,2),10)-1,o=parseInt(t.substr(4,2),10),i=parseInt(t.substr(6,2),10),a=parseInt(t.substr(8,2),10),s=0;if(t.length>11){var u=t.charAt(10),l=10;"+"!==u&&"-"!==u&&(s=parseInt(t.substr(10,2),10),l+=2)}if(e.setUTCFullYear(r,n,o),e.setUTCHours(i,a,s,0),l&&("+"===(u=t.charAt(l))||"-"===u)){var c=60*parseInt(t.substr(l+1,2),10)+parseInt(t.substr(l+4,2),10);c*=6e4,"+"===u?e.setTime(+e-c):e.setTime(+e+c)}return e},o.generalizedTimeToDate=function(t){var e=new Date,r=parseInt(t.substr(0,4),10),n=parseInt(t.substr(4,2),10)-1,o=parseInt(t.substr(6,2),10),i=parseInt(t.substr(8,2),10),a=parseInt(t.substr(10,2),10),s=parseInt(t.substr(12,2),10),u=0,l=0,c=!1;"Z"===t.charAt(t.length-1)&&(c=!0);var f=t.length-5,h=t.charAt(f);return"+"!==h&&"-"!==h||(l=60*parseInt(t.substr(f+1,2),10)+parseInt(t.substr(f+4,2),10),l*=6e4,"+"===h&&(l*=-1),c=!0),"."===t.charAt(14)&&(u=1e3*parseFloat(t.substr(14),10)),c?(e.setUTCFullYear(r,n,o),e.setUTCHours(i,a,s,u),e.setTime(+e+l)):(e.setFullYear(r,n,o),e.setHours(i,a,s,u)),e},o.dateToUtcTime=function(t){if("string"==typeof t)return t;var e="",r=[];r.push((""+t.getUTCFullYear()).substr(2)),r.push(""+(t.getUTCMonth()+1)),r.push(""+t.getUTCDate()),r.push(""+t.getUTCHours()),r.push(""+t.getUTCMinutes()),r.push(""+t.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(e+="0"),e+=r[n];return e+"Z"},o.dateToGeneralizedTime=function(t){if("string"==typeof t)return t;var e="",r=[];r.push(""+t.getUTCFullYear()),r.push(""+(t.getUTCMonth()+1)),r.push(""+t.getUTCDate()),r.push(""+t.getUTCHours()),r.push(""+t.getUTCMinutes()),r.push(""+t.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(e+="0"),e+=r[n];return e+"Z"},o.integerToDer=function(t){var e=n.util.createBuffer();if(t>=-128&&t<128)return e.putSignedInt(t,8);if(t>=-32768&&t<32768)return e.putSignedInt(t,16);if(t>=-8388608&&t<8388608)return e.putSignedInt(t,24);if(t>=-2147483648&&t<2147483648)return e.putSignedInt(t,32);var r=new Error("Integer too large; max is 32-bits.");throw r.integer=t,r},o.derToInteger=function(t){"string"==typeof t&&(t=n.util.createBuffer(t));var e=8*t.length();if(e>32)throw new Error("Integer too large; max is 32-bits.");return t.getSignedInt(e)},o.validate=function(t,e,r,i){var a=!1;if(t.tagClass!==e.tagClass&&void 0!==e.tagClass||t.type!==e.type&&void 0!==e.type)i&&(t.tagClass!==e.tagClass&&i.push("["+e.name+'] Expected tag class "'+e.tagClass+'", got "'+t.tagClass+'"'),t.type!==e.type&&i.push("["+e.name+'] Expected type "'+e.type+'", got "'+t.type+'"'));else if(t.constructed===e.constructed||void 0===e.constructed){if(a=!0,e.value&&n.util.isArray(e.value))for(var s=0,u=0;a&&u<e.value.length;++u)a=e.value[u].optional||!1,t.value[s]&&((a=o.validate(t.value[s],e.value[u],r,i))?++s:e.value[u].optional&&(a=!0)),!a&&i&&i.push("["+e.name+'] Tag class "'+e.tagClass+'", type "'+e.type+'" expected value length "'+e.value.length+'", got "'+t.value.length+'"');if(a&&r&&(e.capture&&(r[e.capture]=t.value),e.captureAsn1&&(r[e.captureAsn1]=t),e.captureBitStringContents&&"bitStringContents"in t&&(r[e.captureBitStringContents]=t.bitStringContents),e.captureBitStringValue&&"bitStringContents"in t))if(t.bitStringContents.length<2)r[e.captureBitStringValue]="";else{if(0!==t.bitStringContents.charCodeAt(0))throw new Error("captureBitStringValue only supported for zero unused bits");r[e.captureBitStringValue]=t.bitStringContents.slice(1)}}else i&&i.push("["+e.name+'] Expected constructed "'+e.constructed+'", got "'+t.constructed+'"');return a};var a=/[^\\u0000-\\u00ff]/;o.prettyPrint=function(t,e,r){var i="";r=r||2,(e=e||0)>0&&(i+="\n");for(var s="",u=0;u<e*r;++u)s+=" ";switch(i+=s+"Tag: ",t.tagClass){case o.Class.UNIVERSAL:i+="Universal:";break;case o.Class.APPLICATION:i+="Application:";break;case o.Class.CONTEXT_SPECIFIC:i+="Context-Specific:";break;case o.Class.PRIVATE:i+="Private:"}if(t.tagClass===o.Class.UNIVERSAL)switch(i+=t.type,t.type){case o.Type.NONE:i+=" (None)";break;case o.Type.BOOLEAN:i+=" (Boolean)";break;case o.Type.INTEGER:i+=" (Integer)";break;case o.Type.BITSTRING:i+=" (Bit string)";break;case o.Type.OCTETSTRING:i+=" (Octet string)";break;case o.Type.NULL:i+=" (Null)";break;case o.Type.OID:i+=" (Object Identifier)";break;case o.Type.ODESC:i+=" (Object Descriptor)";break;case o.Type.EXTERNAL:i+=" (External or Instance of)";break;case o.Type.REAL:i+=" (Real)";break;case o.Type.ENUMERATED:i+=" (Enumerated)";break;case o.Type.EMBEDDED:i+=" (Embedded PDV)";break;case o.Type.UTF8:i+=" (UTF8)";break;case o.Type.ROID:i+=" (Relative Object Identifier)";break;case o.Type.SEQUENCE:i+=" (Sequence)";break;case o.Type.SET:i+=" (Set)";break;case o.Type.PRINTABLESTRING:i+=" (Printable String)";break;case o.Type.IA5String:i+=" (IA5String (ASCII))";break;case o.Type.UTCTIME:i+=" (UTC time)";break;case o.Type.GENERALIZEDTIME:i+=" (Generalized time)";break;case o.Type.BMPSTRING:i+=" (BMP String)"}else i+=t.type;if(i+="\n",i+=s+"Constructed: "+t.constructed+"\n",t.composed){var l=0,c="";for(u=0;u<t.value.length;++u)void 0!==t.value[u]&&(l+=1,c+=o.prettyPrint(t.value[u],e+1,r),u+1<t.value.length&&(c+=","));i+=s+"Sub values: "+l+c}else{if(i+=s+"Value: ",t.type===o.Type.OID){var f=o.derToOid(t.value);i+=f,n.pki&&n.pki.oids&&f in n.pki.oids&&(i+=" ("+n.pki.oids[f]+") ")}if(t.type===o.Type.INTEGER)try{i+=o.derToInteger(t.value)}catch(e){i+="0x"+n.util.bytesToHex(t.value)}else if(t.type===o.Type.BITSTRING){if(t.value.length>1?i+="0x"+n.util.bytesToHex(t.value.slice(1)):i+="(none)",t.value.length>0){var h=t.value.charCodeAt(0);1==h?i+=" (1 unused bit shown)":h>1&&(i+=" ("+h+" unused bits shown)")}}else if(t.type===o.Type.OCTETSTRING)a.test(t.value)||(i+="("+t.value+") "),i+="0x"+n.util.bytesToHex(t.value);else if(t.type===o.Type.UTF8)try{i+=n.util.decodeUtf8(t.value)}catch(e){if("URI malformed"!==e.message)throw e;i+="0x"+n.util.bytesToHex(t.value)+" (malformed UTF8)"}else t.type===o.Type.PRINTABLESTRING||t.type===o.Type.IA5String?i+=t.value:a.test(t.value)?i+="0x"+n.util.bytesToHex(t.value):0===t.value.length?i+="[null]":i+=t.value}return i}},function(t,e,r){var n=r(0);t.exports=n.md=n.md||{},n.md.algorithms=n.md.algorithms||{}},function(t,e,r){var n=r(0);function o(t,e){n.cipher.registerAlgorithm(t,function(){return new n.aes.Algorithm(t,e)})}r(13),r(19),r(1),t.exports=n.aes=n.aes||{},n.aes.startEncrypting=function(t,e,r,n){var o=d({key:t,output:r,decrypt:!1,mode:n});return o.start(e),o},n.aes.createEncryptionCipher=function(t,e){return d({key:t,output:null,decrypt:!1,mode:e})},n.aes.startDecrypting=function(t,e,r,n){var o=d({key:t,output:r,decrypt:!0,mode:n});return o.start(e),o},n.aes.createDecryptionCipher=function(t,e){return d({key:t,output:null,decrypt:!0,mode:e})},n.aes.Algorithm=function(t,e){c||f();var r=this;r.name=t,r.mode=new e({blockSize:16,cipher:{encrypt:function(t,e){return p(r._w,t,e,!1)},decrypt:function(t,e){return p(r._w,t,e,!0)}}}),r._init=!1},n.aes.Algorithm.prototype.initialize=function(t){if(!this._init){var e,r=t.key;if("string"!=typeof r||16!==r.length&&24!==r.length&&32!==r.length){if(n.util.isArray(r)&&(16===r.length||24===r.length||32===r.length)){e=r,r=n.util.createBuffer();for(var o=0;o<e.length;++o)r.putByte(e[o])}}else r=n.util.createBuffer(r);if(!n.util.isArray(r)){e=r,r=[];var i=e.length();if(16===i||24===i||32===i)for(i>>>=2,o=0;o<i;++o)r.push(e.getInt32())}if(!n.util.isArray(r)||4!==r.length&&6!==r.length&&8!==r.length)throw new Error("Invalid key parameter.");var a=this.mode.name,s=-1!==["CFB","OFB","CTR","GCM"].indexOf(a);this._w=h(r,t.decrypt&&!s),this._init=!0}},n.aes._expandKey=function(t,e){return c||f(),h(t,e)},n.aes._updateBlock=p,o("AES-ECB",n.cipher.modes.ecb),o("AES-CBC",n.cipher.modes.cbc),o("AES-CFB",n.cipher.modes.cfb),o("AES-OFB",n.cipher.modes.ofb),o("AES-CTR",n.cipher.modes.ctr),o("AES-GCM",n.cipher.modes.gcm);var i,a,s,u,l,c=!1;function f(){c=!0,s=[0,1,2,4,8,16,32,64,128,27,54];for(var t=new Array(256),e=0;e<128;++e)t[e]=e<<1,t[e+128]=e+128<<1^283;for(i=new Array(256),a=new Array(256),u=new Array(4),l=new Array(4),e=0;e<4;++e)u[e]=new Array(256),l[e]=new Array(256);var r,n,o,f,h,p,d,y=0,v=0;for(e=0;e<256;++e){f=(f=v^v<<1^v<<2^v<<3^v<<4)>>8^255&f^99,i[y]=f,a[f]=y,p=(h=t[f])<<24^f<<16^f<<8^f^h,d=((r=t[y])^(n=t[r])^(o=t[n]))<<24^(y^o)<<16^(y^n^o)<<8^y^r^o;for(var g=0;g<4;++g)u[g][y]=p,l[g][f]=d,p=p<<24|p>>>8,d=d<<24|d>>>8;0===y?y=v=1:(y=r^t[t[t[r^o]]],v^=t[t[v]])}}function h(t,e){for(var r,n=t.slice(0),o=1,a=n.length,u=4*(a+6+1),c=a;c<u;++c)r=n[c-1],c%a==0?(r=i[r>>>16&255]<<24^i[r>>>8&255]<<16^i[255&r]<<8^i[r>>>24]^s[o]<<24,o++):a>6&&c%a==4&&(r=i[r>>>24]<<24^i[r>>>16&255]<<16^i[r>>>8&255]<<8^i[255&r]),n[c]=n[c-a]^r;if(e){for(var f,h=l[0],p=l[1],d=l[2],y=l[3],v=n.slice(0),g=(c=0,(u=n.length)-4);c<u;c+=4,g-=4)if(0===c||c===u-4)v[c]=n[g],v[c+1]=n[g+3],v[c+2]=n[g+2],v[c+3]=n[g+1];else for(var m=0;m<4;++m)f=n[g+m],v[c+(3&-m)]=h[i[f>>>24]]^p[i[f>>>16&255]]^d[i[f>>>8&255]]^y[i[255&f]];n=v}return n}function p(t,e,r,n){var o,s,c,f,h,p,d,y,v,g,m,b,w=t.length/4-1;n?(o=l[0],s=l[1],c=l[2],f=l[3],h=a):(o=u[0],s=u[1],c=u[2],f=u[3],h=i),p=e[0]^t[0],d=e[n?3:1]^t[1],y=e[2]^t[2],v=e[n?1:3]^t[3];for(var S=3,x=1;x<w;++x)g=o[p>>>24]^s[d>>>16&255]^c[y>>>8&255]^f[255&v]^t[++S],m=o[d>>>24]^s[y>>>16&255]^c[v>>>8&255]^f[255&p]^t[++S],b=o[y>>>24]^s[v>>>16&255]^c[p>>>8&255]^f[255&d]^t[++S],v=o[v>>>24]^s[p>>>16&255]^c[d>>>8&255]^f[255&y]^t[++S],p=g,d=m,y=b;r[0]=h[p>>>24]<<24^h[d>>>16&255]<<16^h[y>>>8&255]<<8^h[255&v]^t[++S],r[n?3:1]=h[d>>>24]<<24^h[y>>>16&255]<<16^h[v>>>8&255]<<8^h[255&p]^t[++S],r[2]=h[y>>>24]<<24^h[v>>>16&255]<<16^h[p>>>8&255]<<8^h[255&d]^t[++S],r[n?1:3]=h[v>>>24]<<24^h[p>>>16&255]<<16^h[d>>>8&255]<<8^h[255&y]^t[++S]}function d(t){var e,r="AES-"+((t=t||{}).mode||"CBC").toUpperCase(),o=(e=t.decrypt?n.cipher.createDecipher(r,t.key):n.cipher.createCipher(r,t.key)).start;return e.start=function(t,r){var i=null;r instanceof n.util.ByteBuffer&&(i=r,r={}),(r=r||{}).output=i,r.iv=t,o.call(e,r)},e}},function(t,e,r){var n=r(0);n.pki=n.pki||{};var o=t.exports=n.pki.oids=n.oids=n.oids||{};function i(t,e){o[t]=e,o[e]=t}function a(t,e){o[t]=e}i("1.2.840.113549.1.1.1","rsaEncryption"),i("1.2.840.113549.1.1.4","md5WithRSAEncryption"),i("1.2.840.113549.1.1.5","sha1WithRSAEncryption"),i("1.2.840.113549.1.1.7","RSAES-OAEP"),i("1.2.840.113549.1.1.8","mgf1"),i("1.2.840.113549.1.1.9","pSpecified"),i("1.2.840.113549.1.1.10","RSASSA-PSS"),i("1.2.840.113549.1.1.11","sha256WithRSAEncryption"),i("1.2.840.113549.1.1.12","sha384WithRSAEncryption"),i("1.2.840.113549.1.1.13","sha512WithRSAEncryption"),i("1.3.101.112","EdDSA25519"),i("1.2.840.10040.4.3","dsa-with-sha1"),i("1.3.14.3.2.7","desCBC"),i("1.3.14.3.2.26","sha1"),i("1.3.14.3.2.29","sha1WithRSASignature"),i("2.16.840.1.101.3.4.2.1","sha256"),i("2.16.840.1.101.3.4.2.2","sha384"),i("2.16.840.1.101.3.4.2.3","sha512"),i("2.16.840.1.101.3.4.2.4","sha224"),i("2.16.840.1.101.3.4.2.5","sha512-224"),i("2.16.840.1.101.3.4.2.6","sha512-256"),i("1.2.840.113549.2.2","md2"),i("1.2.840.113549.2.5","md5"),i("1.2.840.113549.1.7.1","data"),i("1.2.840.113549.1.7.2","signedData"),i("1.2.840.113549.1.7.3","envelopedData"),i("1.2.840.113549.1.7.4","signedAndEnvelopedData"),i("1.2.840.113549.1.7.5","digestedData"),i("1.2.840.113549.1.7.6","encryptedData"),i("1.2.840.113549.1.9.1","emailAddress"),i("1.2.840.113549.1.9.2","unstructuredName"),i("1.2.840.113549.1.9.3","contentType"),i("1.2.840.113549.1.9.4","messageDigest"),i("1.2.840.113549.1.9.5","signingTime"),i("1.2.840.113549.1.9.6","counterSignature"),i("1.2.840.113549.1.9.7","challengePassword"),i("1.2.840.113549.1.9.8","unstructuredAddress"),i("1.2.840.113549.1.9.14","extensionRequest"),i("1.2.840.113549.1.9.20","friendlyName"),i("1.2.840.113549.1.9.21","localKeyId"),i("1.2.840.113549.1.9.22.1","x509Certificate"),i("1.2.840.113549.1.12.10.1.1","keyBag"),i("1.2.840.113549.1.12.10.1.2","pkcs8ShroudedKeyBag"),i("1.2.840.113549.1.12.10.1.3","certBag"),i("1.2.840.113549.1.12.10.1.4","crlBag"),i("1.2.840.113549.1.12.10.1.5","secretBag"),i("1.2.840.113549.1.12.10.1.6","safeContentsBag"),i("1.2.840.113549.1.5.13","pkcs5PBES2"),i("1.2.840.113549.1.5.12","pkcs5PBKDF2"),i("1.2.840.113549.1.12.1.1","pbeWithSHAAnd128BitRC4"),i("1.2.840.113549.1.12.1.2","pbeWithSHAAnd40BitRC4"),i("1.2.840.113549.1.12.1.3","pbeWithSHAAnd3-KeyTripleDES-CBC"),i("1.2.840.113549.1.12.1.4","pbeWithSHAAnd2-KeyTripleDES-CBC"),i("1.2.840.113549.1.12.1.5","pbeWithSHAAnd128BitRC2-CBC"),i("1.2.840.113549.1.12.1.6","pbewithSHAAnd40BitRC2-CBC"),i("1.2.840.113549.2.7","hmacWithSHA1"),i("1.2.840.113549.2.8","hmacWithSHA224"),i("1.2.840.113549.2.9","hmacWithSHA256"),i("1.2.840.113549.2.10","hmacWithSHA384"),i("1.2.840.113549.2.11","hmacWithSHA512"),i("1.2.840.113549.3.7","des-EDE3-CBC"),i("2.16.840.1.101.3.4.1.2","aes128-CBC"),i("2.16.840.1.101.3.4.1.22","aes192-CBC"),i("2.16.840.1.101.3.4.1.42","aes256-CBC"),i("2.5.4.3","commonName"),i("2.5.4.4","surname"),i("2.5.4.5","serialNumber"),i("2.5.4.6","countryName"),i("2.5.4.7","localityName"),i("2.5.4.8","stateOrProvinceName"),i("2.5.4.9","streetAddress"),i("2.5.4.10","organizationName"),i("2.5.4.11","organizationalUnitName"),i("2.5.4.12","title"),i("2.5.4.13","description"),i("2.5.4.15","businessCategory"),i("2.5.4.17","postalCode"),i("2.5.4.42","givenName"),i("1.3.6.1.4.1.311.60.2.1.2","jurisdictionOfIncorporationStateOrProvinceName"),i("1.3.6.1.4.1.311.60.2.1.3","jurisdictionOfIncorporationCountryName"),i("2.16.840.1.113730.1.1","nsCertType"),i("2.16.840.1.113730.1.13","nsComment"),a("2.5.29.1","authorityKeyIdentifier"),a("2.5.29.2","keyAttributes"),a("2.5.29.3","certificatePolicies"),a("2.5.29.4","keyUsageRestriction"),a("2.5.29.5","policyMapping"),a("2.5.29.6","subtreesConstraint"),a("2.5.29.7","subjectAltName"),a("2.5.29.8","issuerAltName"),a("2.5.29.9","subjectDirectoryAttributes"),a("2.5.29.10","basicConstraints"),a("2.5.29.11","nameConstraints"),a("2.5.29.12","policyConstraints"),a("2.5.29.13","basicConstraints"),i("2.5.29.14","subjectKeyIdentifier"),i("2.5.29.15","keyUsage"),a("2.5.29.16","privateKeyUsagePeriod"),i("2.5.29.17","subjectAltName"),i("2.5.29.18","issuerAltName"),i("2.5.29.19","basicConstraints"),a("2.5.29.20","cRLNumber"),a("2.5.29.21","cRLReason"),a("2.5.29.22","expirationDate"),a("2.5.29.23","instructionCode"),a("2.5.29.24","invalidityDate"),a("2.5.29.25","cRLDistributionPoints"),a("2.5.29.26","issuingDistributionPoint"),a("2.5.29.27","deltaCRLIndicator"),a("2.5.29.28","issuingDistributionPoint"),a("2.5.29.29","certificateIssuer"),a("2.5.29.30","nameConstraints"),i("2.5.29.31","cRLDistributionPoints"),i("2.5.29.32","certificatePolicies"),a("2.5.29.33","policyMappings"),a("2.5.29.34","policyConstraints"),i("2.5.29.35","authorityKeyIdentifier"),a("2.5.29.36","policyConstraints"),i("2.5.29.37","extKeyUsage"),a("2.5.29.46","freshestCRL"),a("2.5.29.54","inhibitAnyPolicy"),i("1.3.6.1.4.1.11129.2.4.2","timestampList"),i("1.3.6.1.5.5.7.1.1","authorityInfoAccess"),i("1.3.6.1.5.5.7.3.1","serverAuth"),i("1.3.6.1.5.5.7.3.2","clientAuth"),i("1.3.6.1.5.5.7.3.3","codeSigning"),i("1.3.6.1.5.5.7.3.4","emailProtection"),i("1.3.6.1.5.5.7.3.8","timeStamping")},function(t,e,r){var n=r(0);r(1);var o=t.exports=n.pem=n.pem||{};function i(t){for(var e=t.name+": ",r=[],n=function(t,e){return" "+e},o=0;o<t.values.length;++o)r.push(t.values[o].replace(/^(\S+\r\n)/,n));e+=r.join(",")+"\r\n";var i=0,a=-1;for(o=0;o<e.length;++o,++i)if(i>65&&-1!==a){var s=e[a];","===s?(++a,e=e.substr(0,a)+"\r\n "+e.substr(a)):e=e.substr(0,a)+"\r\n"+s+e.substr(a+1),i=o-a-1,a=-1,++o}else" "!==e[o]&&"\t"!==e[o]&&","!==e[o]||(a=o);return e}function a(t){return t.replace(/^\s+/,"")}o.encode=function(t,e){e=e||{};var r,o="-----BEGIN "+t.type+"-----\r\n";if(t.procType&&(o+=i(r={name:"Proc-Type",values:[String(t.procType.version),t.procType.type]})),t.contentDomain&&(o+=i(r={name:"Content-Domain",values:[t.contentDomain]})),t.dekInfo&&(r={name:"DEK-Info",values:[t.dekInfo.algorithm]},t.dekInfo.parameters&&r.values.push(t.dekInfo.parameters),o+=i(r)),t.headers)for(var a=0;a<t.headers.length;++a)o+=i(t.headers[a]);return t.procType&&(o+="\r\n"),(o+=n.util.encode64(t.body,e.maxline||64)+"\r\n")+"-----END "+t.type+"-----\r\n"},o.decode=function(t){for(var e,r=[],o=/\s*-----BEGIN ([A-Z0-9- ]+)-----\r?\n?([\x21-\x7e\s]+?(?:\r?\n\r?\n))?([:A-Za-z0-9+\/=\s]+?)-----END \1-----/g,i=/([\x21-\x7e]+):\s*([\x21-\x7e\s^:]+)/,s=/\r?\n/;e=o.exec(t);){var u=e[1];"NEW CERTIFICATE REQUEST"===u&&(u="CERTIFICATE REQUEST");var l={type:u,procType:null,contentDomain:null,dekInfo:null,headers:[],body:n.util.decode64(e[3])};if(r.push(l),e[2]){for(var c=e[2].split(s),f=0;e&&f<c.length;){for(var h=c[f].replace(/\s+$/,""),p=f+1;p<c.length;++p){var d=c[p];if(!/\s/.test(d[0]))break;h+=d,f=p}if(e=h.match(i)){for(var y={name:e[1],values:[]},v=e[2].split(","),g=0;g<v.length;++g)y.values.push(a(v[g]));if(l.procType)if(l.contentDomain||"Content-Domain"!==y.name)if(l.dekInfo||"DEK-Info"!==y.name)l.headers.push(y);else{if(0===y.values.length)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must have at least one subfield.');l.dekInfo={algorithm:v[0],parameters:v[1]||null}}else l.contentDomain=v[0]||"";else{if("Proc-Type"!==y.name)throw new Error('Invalid PEM formatted message. The first encapsulated header must be "Proc-Type".');if(2!==y.values.length)throw new Error('Invalid PEM formatted message. The "Proc-Type" header must have two subfields.');l.procType={version:v[0],type:v[1]}}}++f}if("ENCRYPTED"===l.procType&&!l.dekInfo)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must be present if "Proc-Type" is "ENCRYPTED".')}}if(0===r.length)throw new Error("Invalid PEM formatted message.");return r}},function(t,e,r){var n=r(0);r(4),r(1),(t.exports=n.hmac=n.hmac||{}).create=function(){var t=null,e=null,r=null,o=null,i={start:function(i,a){if(null!==i)if("string"==typeof i){if(!((i=i.toLowerCase())in n.md.algorithms))throw new Error('Unknown hash algorithm "'+i+'"');e=n.md.algorithms[i].create()}else e=i;if(null===a)a=t;else{if("string"==typeof a)a=n.util.createBuffer(a);else if(n.util.isArray(a)){var s=a;a=n.util.createBuffer();for(var u=0;u<s.length;++u)a.putByte(s[u])}var l=a.length();for(l>e.blockLength&&(e.start(),e.update(a.bytes()),a=e.digest()),r=n.util.createBuffer(),o=n.util.createBuffer(),l=a.length(),u=0;u<l;++u)s=a.at(u),r.putByte(54^s),o.putByte(92^s);if(l<e.blockLength)for(s=e.blockLength-l,u=0;u<s;++u)r.putByte(54),o.putByte(92);t=a,r=r.bytes(),o=o.bytes()}e.start(),e.update(r)},update:function(t){e.update(t)},getMac:function(){var t=e.digest().bytes();return e.start(),e.update(o),e.update(t),e.digest()}};return i.digest=i.getMac,i}},function(t,e,r){var n=r(0);r(4),r(1);var o=t.exports=n.sha1=n.sha1||{};n.md.sha1=n.md.algorithms.sha1=o,o.create=function(){a||(i=String.fromCharCode(128),i+=n.util.fillString(String.fromCharCode(0),64),a=!0);var t=null,e=n.util.createBuffer(),r=new Array(80),o={algorithm:"sha1",blockLength:64,digestLength:20,messageLength:0,fullMessageLength:null,messageLengthSize:8,start:function(){o.messageLength=0,o.fullMessageLength=o.messageLength64=[];for(var r=o.messageLengthSize/4,i=0;i<r;++i)o.fullMessageLength.push(0);return e=n.util.createBuffer(),t={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520},o}};return o.start(),o.update=function(i,a){"utf8"===a&&(i=n.util.encodeUtf8(i));var u=i.length;o.messageLength+=u,u=[u/4294967296>>>0,u>>>0];for(var l=o.fullMessageLength.length-1;l>=0;--l)o.fullMessageLength[l]+=u[1],u[1]=u[0]+(o.fullMessageLength[l]/4294967296>>>0),o.fullMessageLength[l]=o.fullMessageLength[l]>>>0,u[0]=u[1]/4294967296>>>0;return e.putBytes(i),s(t,r,e),(e.read>2048||0===e.length())&&e.compact(),o},o.digest=function(){var a=n.util.createBuffer();a.putBytes(e.bytes());var u,l=o.fullMessageLength[o.fullMessageLength.length-1]+o.messageLengthSize&o.blockLength-1;a.putBytes(i.substr(0,o.blockLength-l));for(var c=8*o.fullMessageLength[0],f=0;f<o.fullMessageLength.length-1;++f)c+=(u=8*o.fullMessageLength[f+1])/4294967296>>>0,a.putInt32(c>>>0),c=u>>>0;a.putInt32(c);var h={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3,h4:t.h4};s(h,r,a);var p=n.util.createBuffer();return p.putInt32(h.h0),p.putInt32(h.h1),p.putInt32(h.h2),p.putInt32(h.h3),p.putInt32(h.h4),p},o};var i=null,a=!1;function s(t,e,r){for(var n,o,i,a,s,u,l,c=r.length();c>=64;){for(o=t.h0,i=t.h1,a=t.h2,s=t.h3,u=t.h4,l=0;l<16;++l)n=r.getInt32(),e[l]=n,n=(o<<5|o>>>27)+(s^i&(a^s))+u+1518500249+n,u=s,s=a,a=(i<<30|i>>>2)>>>0,i=o,o=n;for(;l<20;++l)n=(n=e[l-3]^e[l-8]^e[l-14]^e[l-16])<<1|n>>>31,e[l]=n,n=(o<<5|o>>>27)+(s^i&(a^s))+u+1518500249+n,u=s,s=a,a=(i<<30|i>>>2)>>>0,i=o,o=n;for(;l<32;++l)n=(n=e[l-3]^e[l-8]^e[l-14]^e[l-16])<<1|n>>>31,e[l]=n,n=(o<<5|o>>>27)+(i^a^s)+u+1859775393+n,u=s,s=a,a=(i<<30|i>>>2)>>>0,i=o,o=n;for(;l<40;++l)n=(n=e[l-6]^e[l-16]^e[l-28]^e[l-32])<<2|n>>>30,e[l]=n,n=(o<<5|o>>>27)+(i^a^s)+u+1859775393+n,u=s,s=a,a=(i<<30|i>>>2)>>>0,i=o,o=n;for(;l<60;++l)n=(n=e[l-6]^e[l-16]^e[l-28]^e[l-32])<<2|n>>>30,e[l]=n,n=(o<<5|o>>>27)+(i&a|s&(i^a))+u+2400959708+n,u=s,s=a,a=(i<<30|i>>>2)>>>0,i=o,o=n;for(;l<80;++l)n=(n=e[l-6]^e[l-16]^e[l-28]^e[l-32])<<2|n>>>30,e[l]=n,n=(o<<5|o>>>27)+(i^a^s)+u+3395469782+n,u=s,s=a,a=(i<<30|i>>>2)>>>0,i=o,o=n;t.h0=t.h0+o|0,t.h1=t.h1+i|0,t.h2=t.h2+a|0,t.h3=t.h3+s|0,t.h4=t.h4+u|0,c-=64}}},function(t,e,r){var n=r(0);function o(t,e){n.cipher.registerAlgorithm(t,function(){return new n.des.Algorithm(t,e)})}r(13),r(19),r(1),t.exports=n.des=n.des||{},n.des.startEncrypting=function(t,e,r,n){var o=d({key:t,output:r,decrypt:!1,mode:n||(null===e?"ECB":"CBC")});return o.start(e),o},n.des.createEncryptionCipher=function(t,e){return d({key:t,output:null,decrypt:!1,mode:e})},n.des.startDecrypting=function(t,e,r,n){var o=d({key:t,output:r,decrypt:!0,mode:n||(null===e?"ECB":"CBC")});return o.start(e),o},n.des.createDecryptionCipher=function(t,e){return d({key:t,output:null,decrypt:!0,mode:e})},n.des.Algorithm=function(t,e){var r=this;r.name=t,r.mode=new e({blockSize:8,cipher:{encrypt:function(t,e){return p(r._keys,t,e,!1)},decrypt:function(t,e){return p(r._keys,t,e,!0)}}}),r._init=!1},n.des.Algorithm.prototype.initialize=function(t){if(!this._init){var e=n.util.createBuffer(t.key);if(0===this.name.indexOf("3DES")&&24!==e.length())throw new Error("Invalid Triple-DES key size: "+8*e.length());this._keys=function(t){for(var e,r=[0,4,536870912,536870916,65536,65540,536936448,536936452,512,516,536871424,536871428,66048,66052,536936960,536936964],n=[0,1,1048576,1048577,67108864,67108865,68157440,68157441,256,257,1048832,1048833,67109120,67109121,68157696,68157697],o=[0,8,2048,2056,16777216,16777224,16779264,16779272,0,8,2048,2056,16777216,16777224,16779264,16779272],i=[0,2097152,134217728,136314880,8192,2105344,134225920,136323072,131072,2228224,134348800,136445952,139264,2236416,134356992,136454144],a=[0,262144,16,262160,0,262144,16,262160,4096,266240,4112,266256,4096,266240,4112,266256],s=[0,1024,32,1056,0,1024,32,1056,33554432,33555456,33554464,33555488,33554432,33555456,33554464,33555488],u=[0,268435456,524288,268959744,2,268435458,524290,268959746,0,268435456,524288,268959744,2,268435458,524290,268959746],l=[0,65536,2048,67584,536870912,536936448,536872960,536938496,131072,196608,133120,198656,537001984,537067520,537004032,537069568],c=[0,262144,0,262144,2,262146,2,262146,33554432,33816576,33554432,33816576,33554434,33816578,33554434,33816578],f=[0,268435456,8,268435464,0,268435456,8,268435464,1024,268436480,1032,268436488,1024,268436480,1032,268436488],h=[0,32,0,32,1048576,1048608,1048576,1048608,8192,8224,8192,8224,1056768,1056800,1056768,1056800],p=[0,16777216,512,16777728,2097152,18874368,2097664,18874880,67108864,83886080,67109376,83886592,69206016,85983232,69206528,85983744],d=[0,4096,134217728,134221824,524288,528384,134742016,134746112,16,4112,134217744,134221840,524304,528400,134742032,134746128],y=[0,4,256,260,0,4,256,260,1,5,257,261,1,5,257,261],v=t.length()>8?3:1,g=[],m=[0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,0],b=0,w=0;w<v;w++){var S=t.getInt32(),x=t.getInt32();S^=(e=252645135&(S>>>4^x))<<4,S^=e=65535&((x^=e)>>>-16^S),S^=(e=858993459&(S>>>2^(x^=e<<-16)))<<2,S^=e=65535&((x^=e)>>>-16^S),S^=(e=1431655765&(S>>>1^(x^=e<<-16)))<<1,S^=e=16711935&((x^=e)>>>8^S),e=(S^=(e=1431655765&(S>>>1^(x^=e<<8)))<<1)<<8|(x^=e)>>>20&240,S=x<<24|x<<8&16711680|x>>>8&65280|x>>>24&240,x=e;for(var _=0;_<m.length;++_){m[_]?(S=S<<2|S>>>26,x=x<<2|x>>>26):(S=S<<1|S>>>27,x=x<<1|x>>>27);var E=r[(S&=-15)>>>28]|n[S>>>24&15]|o[S>>>20&15]|i[S>>>16&15]|a[S>>>12&15]|s[S>>>8&15]|u[S>>>4&15],O=l[(x&=-15)>>>28]|c[x>>>24&15]|f[x>>>20&15]|h[x>>>16&15]|p[x>>>12&15]|d[x>>>8&15]|y[x>>>4&15];e=65535&(O>>>16^E),g[b++]=E^e,g[b++]=O^e<<16}}return g}(e),this._init=!0}},o("DES-ECB",n.cipher.modes.ecb),o("DES-CBC",n.cipher.modes.cbc),o("DES-CFB",n.cipher.modes.cfb),o("DES-OFB",n.cipher.modes.ofb),o("DES-CTR",n.cipher.modes.ctr),o("3DES-ECB",n.cipher.modes.ecb),o("3DES-CBC",n.cipher.modes.cbc),o("3DES-CFB",n.cipher.modes.cfb),o("3DES-OFB",n.cipher.modes.ofb),o("3DES-CTR",n.cipher.modes.ctr);var i=[16843776,0,65536,16843780,16842756,66564,4,65536,1024,16843776,16843780,1024,16778244,16842756,16777216,4,1028,16778240,16778240,66560,66560,16842752,16842752,16778244,65540,16777220,16777220,65540,0,1028,66564,16777216,65536,16843780,4,16842752,16843776,16777216,16777216,1024,16842756,65536,66560,16777220,1024,4,16778244,66564,16843780,65540,16842752,16778244,16777220,1028,66564,16843776,1028,16778240,16778240,0,65540,66560,0,16842756],a=[-2146402272,-2147450880,32768,1081376,1048576,32,-2146435040,-2147450848,-2147483616,-2146402272,-2146402304,-2147483648,-2147450880,1048576,32,-2146435040,1081344,1048608,-2147450848,0,-2147483648,32768,1081376,-2146435072,1048608,-2147483616,0,1081344,32800,-2146402304,-2146435072,32800,0,1081376,-2146435040,1048576,-2147450848,-2146435072,-2146402304,32768,-2146435072,-2147450880,32,-2146402272,1081376,32,32768,-2147483648,32800,-2146402304,1048576,-2147483616,1048608,-2147450848,-2147483616,1048608,1081344,0,-2147450880,32800,-2147483648,-2146435040,-2146402272,1081344],s=[520,134349312,0,134348808,134218240,0,131592,134218240,131080,134217736,134217736,131072,134349320,131080,134348800,520,134217728,8,134349312,512,131584,134348800,134348808,131592,134218248,131584,131072,134218248,8,134349320,512,134217728,134349312,134217728,131080,520,131072,134349312,134218240,0,512,131080,134349320,134218240,134217736,512,0,134348808,134218248,131072,134217728,134349320,8,131592,131584,134217736,134348800,134218248,520,134348800,131592,8,134348808,131584],u=[8396801,8321,8321,128,8396928,8388737,8388609,8193,0,8396800,8396800,8396929,129,0,8388736,8388609,1,8192,8388608,8396801,128,8388608,8193,8320,8388737,1,8320,8388736,8192,8396928,8396929,129,8388736,8388609,8396800,8396929,129,0,0,8396800,8320,8388736,8388737,1,8396801,8321,8321,128,8396929,129,1,8192,8388609,8193,8396928,8388737,8193,8320,8388608,8396801,128,8388608,8192,8396928],l=[256,34078976,34078720,1107296512,524288,256,1073741824,34078720,1074266368,524288,33554688,1074266368,1107296512,1107820544,524544,1073741824,33554432,1074266112,1074266112,0,1073742080,1107820800,1107820800,33554688,1107820544,1073742080,0,1107296256,34078976,33554432,1107296256,524544,524288,1107296512,256,33554432,1073741824,34078720,1107296512,1074266368,33554688,1073741824,1107820544,34078976,1074266368,256,33554432,1107820544,1107820800,524544,1107296256,1107820800,34078720,0,1074266112,1107296256,524544,33554688,1073742080,524288,0,1074266112,34078976,1073742080],c=[536870928,541065216,16384,541081616,541065216,16,541081616,4194304,536887296,4210704,4194304,536870928,4194320,536887296,536870912,16400,0,4194320,536887312,16384,4210688,536887312,16,541065232,541065232,0,4210704,541081600,16400,4210688,541081600,536870912,536887296,16,541065232,4210688,541081616,4194304,16400,536870928,4194304,536887296,536870912,16400,536870928,541081616,4210688,541065216,4210704,541081600,0,541065232,16,16384,541065216,4210704,16384,4194320,536887312,0,541081600,536870912,4194320,536887312],f=[2097152,69206018,67110914,0,2048,67110914,2099202,69208064,69208066,2097152,0,67108866,2,67108864,69206018,2050,67110912,2099202,2097154,67110912,67108866,69206016,69208064,2097154,69206016,2048,2050,69208066,2099200,2,67108864,2099200,67108864,2099200,2097152,67110914,67110914,69206018,69206018,2,2097154,67108864,67110912,2097152,69208064,2050,2099202,69208064,2050,67108866,69208066,69206016,2099200,0,2,69208066,0,2099202,69206016,2048,67108866,67110912,2048,2097154],h=[268439616,4096,262144,268701760,268435456,268439616,64,268435456,262208,268697600,268701760,266240,268701696,266304,4096,64,268697600,268435520,268439552,4160,266240,262208,268697664,268701696,4160,0,0,268697664,268435520,268439552,266304,262144,266304,262144,268701696,4096,64,268697664,4096,266304,268439552,64,268435520,268697600,268697664,268435456,262144,268439616,0,268701760,262208,268435520,268697600,268439552,268439616,0,268701760,266240,266240,4160,4160,262208,268435456,268701696];function p(t,e,r,n){var o,p,d=32===t.length?3:9;o=3===d?n?[30,-2,-2]:[0,32,2]:n?[94,62,-2,32,64,2,30,-2,-2]:[0,32,2,62,30,-2,64,96,2];var y=e[0],v=e[1];y^=(p=252645135&(y>>>4^v))<<4,y^=(p=65535&(y>>>16^(v^=p)))<<16,y^=p=858993459&((v^=p)>>>2^y),y^=p=16711935&((v^=p<<2)>>>8^y),y=(y^=(p=1431655765&(y>>>1^(v^=p<<8)))<<1)<<1|y>>>31,v=(v^=p)<<1|v>>>31;for(var g=0;g<d;g+=3){for(var m=o[g+1],b=o[g+2],w=o[g];w!=m;w+=b){var S=v^t[w],x=(v>>>4|v<<28)^t[w+1];p=y,y=v,v=p^(a[S>>>24&63]|u[S>>>16&63]|c[S>>>8&63]|h[63&S]|i[x>>>24&63]|s[x>>>16&63]|l[x>>>8&63]|f[63&x])}p=y,y=v,v=p}v=v>>>1|v<<31,v^=p=1431655765&((y=y>>>1|y<<31)>>>1^v),v^=(p=16711935&(v>>>8^(y^=p<<1)))<<8,v^=(p=858993459&(v>>>2^(y^=p)))<<2,v^=p=65535&((y^=p)>>>16^v),v^=p=252645135&((y^=p<<16)>>>4^v),y^=p<<4,r[0]=y,r[1]=v}function d(t){var e,r="DES-"+((t=t||{}).mode||"CBC").toUpperCase(),o=(e=t.decrypt?n.cipher.createDecipher(r,t.key):n.cipher.createCipher(r,t.key)).start;return e.start=function(t,r){var i=null;r instanceof n.util.ByteBuffer&&(i=r,r={}),(r=r||{}).output=i,r.iv=t,o.call(e,r)},e}},function(t,e,r){var n=r(0);if(r(3),r(12),r(6),r(26),r(27),r(2),r(1),void 0===o)var o=n.jsbn.BigInteger;var i=n.util.isNodejs?r(16):null,a=n.asn1,u=n.util;n.pki=n.pki||{},t.exports=n.pki.rsa=n.rsa=n.rsa||{};var l=n.pki,c=[6,4,2,4,2,4,6,2],f={name:"PrivateKeyInfo",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:a.Class.UNIVERSAL,type:a.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:a.Class.UNIVERSAL,type:a.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:a.Class.UNIVERSAL,type:a.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]},h={name:"RSAPrivateKey",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPrivateKey.version",tagClass:a.Class.UNIVERSAL,type:a.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"RSAPrivateKey.modulus",tagClass:a.Class.UNIVERSAL,type:a.Type.INTEGER,constructed:!1,capture:"privateKeyModulus"},{name:"RSAPrivateKey.publicExponent",tagClass:a.Class.UNIVERSAL,type:a.Type.INTEGER,constructed:!1,capture:"privateKeyPublicExponent"},{name:"RSAPrivateKey.privateExponent",tagClass:a.Class.UNIVERSAL,type:a.Type.INTEGER,constructed:!1,capture:"privateKeyPrivateExponent"},{name:"RSAPrivateKey.prime1",tagClass:a.Class.UNIVERSAL,type:a.Type.INTEGER,constructed:!1,capture:"privateKeyPrime1"},{name:"RSAPrivateKey.prime2",tagClass:a.Class.UNIVERSAL,type:a.Type.INTEGER,constructed:!1,capture:"privateKeyPrime2"},{name:"RSAPrivateKey.exponent1",tagClass:a.Class.UNIVERSAL,type:a.Type.INTEGER,constructed:!1,capture:"privateKeyExponent1"},{name:"RSAPrivateKey.exponent2",tagClass:a.Class.UNIVERSAL,type:a.Type.INTEGER,constructed:!1,capture:"privateKeyExponent2"},{name:"RSAPrivateKey.coefficient",tagClass:a.Class.UNIVERSAL,type:a.Type.INTEGER,constructed:!1,capture:"privateKeyCoefficient"}]},p={name:"RSAPublicKey",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPublicKey.modulus",tagClass:a.Class.UNIVERSAL,type:a.Type.INTEGER,constructed:!1,capture:"publicKeyModulus"},{name:"RSAPublicKey.exponent",tagClass:a.Class.UNIVERSAL,type:a.Type.INTEGER,constructed:!1,capture:"publicKeyExponent"}]},d=n.pki.rsa.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:a.Class.UNIVERSAL,type:a.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{name:"SubjectPublicKeyInfo.subjectPublicKey",tagClass:a.Class.UNIVERSAL,type:a.Type.BITSTRING,constructed:!1,value:[{name:"SubjectPublicKeyInfo.subjectPublicKey.RSAPublicKey",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"rsaPublicKey"}]}]},y={name:"DigestInfo",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm.algorithmIdentifier",tagClass:a.Class.UNIVERSAL,type:a.Type.OID,constructed:!1,capture:"algorithmIdentifier"},{name:"DigestInfo.DigestAlgorithm.parameters",tagClass:a.Class.UNIVERSAL,type:a.Type.NULL,capture:"parameters",optional:!0,constructed:!1}]},{name:"DigestInfo.digest",tagClass:a.Class.UNIVERSAL,type:a.Type.OCTETSTRING,constructed:!1,capture:"digest"}]},v=function(t){var e;if(!(t.algorithm in l.oids)){var r=new Error("Unknown message digest algorithm.");throw r.algorithm=t.algorithm,r}e=l.oids[t.algorithm];var n=a.oidToDer(e).getBytes(),o=a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[]),i=a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[]);i.value.push(a.create(a.Class.UNIVERSAL,a.Type.OID,!1,n)),i.value.push(a.create(a.Class.UNIVERSAL,a.Type.NULL,!1,""));var s=a.create(a.Class.UNIVERSAL,a.Type.OCTETSTRING,!1,t.digest().getBytes());return o.value.push(i),o.value.push(s),a.toDer(o).getBytes()},g=function(t,e,r){if(r)return t.modPow(e.e,e.n);if(!e.p||!e.q)return t.modPow(e.d,e.n);var i;e.dP||(e.dP=e.d.mod(e.p.subtract(o.ONE))),e.dQ||(e.dQ=e.d.mod(e.q.subtract(o.ONE))),e.qInv||(e.qInv=e.q.modInverse(e.p));do{i=new o(n.util.bytesToHex(n.random.getBytes(e.n.bitLength()/8)),16)}while(i.compareTo(e.n)>=0||!i.gcd(e.n).equals(o.ONE));for(var a=(t=t.multiply(i.modPow(e.e,e.n)).mod(e.n)).mod(e.p).modPow(e.dP,e.p),s=t.mod(e.q).modPow(e.dQ,e.q);a.compareTo(s)<0;)a=a.add(e.p);var u=a.subtract(s).multiply(e.qInv).mod(e.p).multiply(e.q).add(s);return u.multiply(i.modInverse(e.n)).mod(e.n)};function m(t,e,r){var o=n.util.createBuffer(),i=Math.ceil(e.n.bitLength()/8);if(t.length>i-11){var a=new Error("Message is too long for PKCS#1 v1.5 padding.");throw a.length=t.length,a.max=i-11,a}o.putByte(0),o.putByte(r);var s,u=i-3-t.length;if(0===r||1===r){s=0===r?0:255;for(var l=0;l<u;++l)o.putByte(s)}else for(;u>0;){var c=0,f=n.random.getBytes(u);for(l=0;l<u;++l)0===(s=f.charCodeAt(l))?++c:o.putByte(s);u=c}return o.putByte(0),o.putBytes(t),o}function b(t,e,r,o){var i=Math.ceil(e.n.bitLength()/8),a=n.util.createBuffer(t),s=a.getByte(),u=a.getByte();if(0!==s||r&&0!==u&&1!==u||!r&&2!=u||r&&0===u&&void 0===o)throw new Error("Encryption block is invalid.");var l=0;if(0===u){l=i-3-o;for(var c=0;c<l;++c)if(0!==a.getByte())throw new Error("Encryption block is invalid.")}else if(1===u)for(l=0;a.length()>1;){if(255!==a.getByte()){--a.read;break}++l}else if(2===u)for(l=0;a.length()>1;){if(0===a.getByte()){--a.read;break}++l}if(0!==a.getByte()||l!==i-3-a.length())throw new Error("Encryption block is invalid.");return a.getBytes()}function w(t,e,r){"function"==typeof e&&(r=e,e={});var i={algorithm:{name:(e=e||{}).algorithm||"PRIMEINC",options:{workers:e.workers||2,workLoad:e.workLoad||100,workerScript:e.workerScript}}};function a(){s(t.pBits,function(e,n){return e?r(e):(t.p=n,null!==t.q?u(e,t.q):void s(t.qBits,u))})}function s(t,e){n.prime.generateProbablePrime(t,i,e)}function u(e,n){if(e)return r(e);if(t.q=n,t.p.compareTo(t.q)<0){var i=t.p;t.p=t.q,t.q=i}if(0!==t.p.subtract(o.ONE).gcd(t.e).compareTo(o.ONE))return t.p=null,void a();if(0!==t.q.subtract(o.ONE).gcd(t.e).compareTo(o.ONE))return t.q=null,void s(t.qBits,u);if(t.p1=t.p.subtract(o.ONE),t.q1=t.q.subtract(o.ONE),t.phi=t.p1.multiply(t.q1),0!==t.phi.gcd(t.e).compareTo(o.ONE))return t.p=t.q=null,void a();if(t.n=t.p.multiply(t.q),t.n.bitLength()!==t.bits)return t.q=null,void s(t.qBits,u);var c=t.e.modInverse(t.phi);t.keys={privateKey:l.rsa.setPrivateKey(t.n,t.e,c,t.p,t.q,c.mod(t.p1),c.mod(t.q1),t.q.modInverse(t.p)),publicKey:l.rsa.setPublicKey(t.n,t.e)},r(null,t.keys)}"prng"in e&&(i.prng=e.prng),a()}function S(t){var e=t.toString(16);e[0]>="8"&&(e="00"+e);var r=n.util.hexToBytes(e);return r.length>1&&(0===r.charCodeAt(0)&&0==(128&r.charCodeAt(1))||255===r.charCodeAt(0)&&128==(128&r.charCodeAt(1)))?r.substr(1):r}function x(t){return t<=100?27:t<=150?18:t<=200?15:t<=250?12:t<=300?9:t<=350?8:t<=400?7:t<=500?6:t<=600?5:t<=800?4:t<=1250?3:2}function _(t){return n.util.isNodejs&&"function"==typeof i[t]}function E(t){return void 0!==u.globalScope&&"object"==s(u.globalScope.crypto)&&"object"==s(u.globalScope.crypto.subtle)&&"function"==typeof u.globalScope.crypto.subtle[t]}function O(t){return void 0!==u.globalScope&&"object"==s(u.globalScope.msCrypto)&&"object"==s(u.globalScope.msCrypto.subtle)&&"function"==typeof u.globalScope.msCrypto.subtle[t]}function P(t){for(var e=n.util.hexToBytes(t.toString(16)),r=new Uint8Array(e.length),o=0;o<e.length;++o)r[o]=e.charCodeAt(o);return r}l.rsa.encrypt=function(t,e,r){var i,a=r,s=Math.ceil(e.n.bitLength()/8);!1!==r&&!0!==r?(a=2===r,i=m(t,e,r)):(i=n.util.createBuffer()).putBytes(t);for(var u=new o(i.toHex(),16),l=g(u,e,a).toString(16),c=n.util.createBuffer(),f=s-Math.ceil(l.length/2);f>0;)c.putByte(0),--f;return c.putBytes(n.util.hexToBytes(l)),c.getBytes()},l.rsa.decrypt=function(t,e,r,i){var a=Math.ceil(e.n.bitLength()/8);if(t.length!==a){var s=new Error("Encrypted message length is invalid.");throw s.length=t.length,s.expected=a,s}var u=new o(n.util.createBuffer(t).toHex(),16);if(u.compareTo(e.n)>=0)throw new Error("Encrypted message is invalid.");for(var l=g(u,e,r).toString(16),c=n.util.createBuffer(),f=a-Math.ceil(l.length/2);f>0;)c.putByte(0),--f;return c.putBytes(n.util.hexToBytes(l)),!1!==i?b(c.getBytes(),e,r):c.getBytes()},l.rsa.createKeyPairGenerationState=function(t,e,r){"string"==typeof t&&(t=parseInt(t,10)),t=t||2048;var i,a=(r=r||{}).prng||n.random,s={nextBytes:function(t){for(var e=a.getBytesSync(t.length),r=0;r<t.length;++r)t[r]=e.charCodeAt(r)}},u=r.algorithm||"PRIMEINC";if("PRIMEINC"!==u)throw new Error("Invalid key generation algorithm: "+u);return(i={algorithm:u,state:0,bits:t,rng:s,eInt:e||65537,e:new o(null),p:null,q:null,qBits:t>>1,pBits:t-(t>>1),pqState:0,num:null,keys:null}).e.fromInt(i.eInt),i},l.rsa.stepKeyPairGenerationState=function(t,e){"algorithm"in t||(t.algorithm="PRIMEINC");var r=new o(null);r.fromInt(30);for(var n,i=0,a=function(t,e){return t|e},s=+new Date,u=0;null===t.keys&&(e<=0||u<e);){if(0===t.state){var f=null===t.p?t.pBits:t.qBits,h=f-1;0===t.pqState?(t.num=new o(f,t.rng),t.num.testBit(h)||t.num.bitwiseTo(o.ONE.shiftLeft(h),a,t.num),t.num.dAddOffset(31-t.num.mod(r).byteValue(),0),i=0,++t.pqState):1===t.pqState?t.num.bitLength()>f?t.pqState=0:t.num.isProbablePrime(x(t.num.bitLength()))?++t.pqState:t.num.dAddOffset(c[i++%8],0):2===t.pqState?t.pqState=0===t.num.subtract(o.ONE).gcd(t.e).compareTo(o.ONE)?3:0:3===t.pqState&&(t.pqState=0,null===t.p?t.p=t.num:t.q=t.num,null!==t.p&&null!==t.q&&++t.state,t.num=null)}else if(1===t.state)t.p.compareTo(t.q)<0&&(t.num=t.p,t.p=t.q,t.q=t.num),++t.state;else if(2===t.state)t.p1=t.p.subtract(o.ONE),t.q1=t.q.subtract(o.ONE),t.phi=t.p1.multiply(t.q1),++t.state;else if(3===t.state)0===t.phi.gcd(t.e).compareTo(o.ONE)?++t.state:(t.p=null,t.q=null,t.state=0);else if(4===t.state)t.n=t.p.multiply(t.q),t.n.bitLength()===t.bits?++t.state:(t.q=null,t.state=0);else if(5===t.state){var p=t.e.modInverse(t.phi);t.keys={privateKey:l.rsa.setPrivateKey(t.n,t.e,p,t.p,t.q,p.mod(t.p1),p.mod(t.q1),t.q.modInverse(t.p)),publicKey:l.rsa.setPublicKey(t.n,t.e)}}u+=(n=+new Date)-s,s=n}return null!==t.keys},l.rsa.generateKeyPair=function(t,e,r,o){if(1===arguments.length?"object"==s(t)?(r=t,t=void 0):"function"==typeof t&&(o=t,t=void 0):2===arguments.length?"number"==typeof t?"function"==typeof e?(o=e,e=void 0):"number"!=typeof e&&(r=e,e=void 0):(r=t,o=e,t=void 0,e=void 0):3===arguments.length&&("number"==typeof e?"function"==typeof r&&(o=r,r=void 0):(o=r,r=e,e=void 0)),r=r||{},void 0===t&&(t=r.bits||2048),void 0===e&&(e=r.e||65537),!n.options.usePureJavaScript&&!r.prng&&t>=256&&t<=16384&&(65537===e||3===e))if(o){if(_("generateKeyPair"))return i.generateKeyPair("rsa",{modulusLength:t,publicExponent:e,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}},function(t,e,r){if(t)return o(t);o(null,{privateKey:l.privateKeyFromPem(r),publicKey:l.publicKeyFromPem(e)})});if(E("generateKey")&&E("exportKey"))return u.globalScope.crypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:P(e),hash:{name:"SHA-256"}},!0,["sign","verify"]).then(function(t){return u.globalScope.crypto.subtle.exportKey("pkcs8",t.privateKey)}).then(void 0,function(t){o(t)}).then(function(t){if(t){var e=l.privateKeyFromAsn1(a.fromDer(n.util.createBuffer(t)));o(null,{privateKey:e,publicKey:l.setRsaPublicKey(e.n,e.e)})}});if(O("generateKey")&&O("exportKey")){var c=u.globalScope.msCrypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:P(e),hash:{name:"SHA-256"}},!0,["sign","verify"]);return c.oncomplete=function(t){var e=t.target.result,r=u.globalScope.msCrypto.subtle.exportKey("pkcs8",e.privateKey);r.oncomplete=function(t){var e=t.target.result,r=l.privateKeyFromAsn1(a.fromDer(n.util.createBuffer(e)));o(null,{privateKey:r,publicKey:l.setRsaPublicKey(r.n,r.e)})},r.onerror=function(t){o(t)}},void(c.onerror=function(t){o(t)})}}else if(_("generateKeyPairSync")){var f=i.generateKeyPairSync("rsa",{modulusLength:t,publicExponent:e,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}});return{privateKey:l.privateKeyFromPem(f.privateKey),publicKey:l.publicKeyFromPem(f.publicKey)}}var h=l.rsa.createKeyPairGenerationState(t,e,r);if(!o)return l.rsa.stepKeyPairGenerationState(h,0),h.keys;w(h,r,o)},l.setRsaPublicKey=l.rsa.setPublicKey=function(t,e){var r={n:t,e:e,encrypt:function(t,e,o){if("string"==typeof e?e=e.toUpperCase():void 0===e&&(e="RSAES-PKCS1-V1_5"),"RSAES-PKCS1-V1_5"===e)e={encode:function(t,e,r){return m(t,e,2).getBytes()}};else if("RSA-OAEP"===e||"RSAES-OAEP"===e)e={encode:function(t,e){return n.pkcs1.encode_rsa_oaep(e,t,o)}};else if(-1!==["RAW","NONE","NULL",null].indexOf(e))e={encode:function(t){return t}};else if("string"==typeof e)throw new Error('Unsupported encryption scheme: "'+e+'".');var i=e.encode(t,r,!0);return l.rsa.encrypt(i,r,!0)},verify:function(t,e,o,i){"string"==typeof o?o=o.toUpperCase():void 0===o&&(o="RSASSA-PKCS1-V1_5"),void 0===i&&(i={_parseAllDigestBytes:!0}),"_parseAllDigestBytes"in i||(i._parseAllDigestBytes=!0),"RSASSA-PKCS1-V1_5"===o?o={verify:function(t,e){e=b(e,r,!0);var o=a.fromDer(e,{parseAllBytes:i._parseAllDigestBytes}),s={},u=[];if(!a.validate(o,y,s,u))throw(l=new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value.")).errors=u,l;var l,c=a.derToOid(s.algorithmIdentifier);if(c!==n.oids.md2&&c!==n.oids.md5&&c!==n.oids.sha1&&c!==n.oids.sha224&&c!==n.oids.sha256&&c!==n.oids.sha384&&c!==n.oids.sha512&&c!==n.oids["sha512-224"]&&c!==n.oids["sha512-256"])throw(l=new Error("Unknown RSASSA-PKCS1-v1_5 DigestAlgorithm identifier.")).oid=c,l;if(!(c!==n.oids.md2&&c!==n.oids.md5||"parameters"in s))throw new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value. Missing algorithm identifer NULL parameters.");return t===s.digest}}:"NONE"!==o&&"NULL"!==o&&null!==o||(o={verify:function(t,e){return t===b(e,r,!0)}});var s=l.rsa.decrypt(e,r,!0,!1);return o.verify(t,s,r.n.bitLength())}};return r},l.setRsaPrivateKey=l.rsa.setPrivateKey=function(t,e,r,o,i,a,s,u){var c={n:t,e:e,d:r,p:o,q:i,dP:a,dQ:s,qInv:u,decrypt:function(t,e,r){"string"==typeof e?e=e.toUpperCase():void 0===e&&(e="RSAES-PKCS1-V1_5");var o=l.rsa.decrypt(t,c,!1,!1);if("RSAES-PKCS1-V1_5"===e)e={decode:b};else if("RSA-OAEP"===e||"RSAES-OAEP"===e)e={decode:function(t,e){return n.pkcs1.decode_rsa_oaep(e,t,r)}};else{if(-1===["RAW","NONE","NULL",null].indexOf(e))throw new Error('Unsupported encryption scheme: "'+e+'".');e={decode:function(t){return t}}}return e.decode(o,c,!1)},sign:function(t,e){var r=!1;"string"==typeof e&&(e=e.toUpperCase()),void 0===e||"RSASSA-PKCS1-V1_5"===e?(e={encode:v},r=1):"NONE"!==e&&"NULL"!==e&&null!==e||(e={encode:function(){return t}},r=1);var n=e.encode(t,c.n.bitLength());return l.rsa.encrypt(n,c,r)}};return c},l.wrapRsaPrivateKey=function(t){return a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.INTEGER,!1,a.integerToDer(0).getBytes()),a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.OID,!1,a.oidToDer(l.oids.rsaEncryption).getBytes()),a.create(a.Class.UNIVERSAL,a.Type.NULL,!1,"")]),a.create(a.Class.UNIVERSAL,a.Type.OCTETSTRING,!1,a.toDer(t).getBytes())])},l.privateKeyFromAsn1=function(t){var e,r,i,s,u,c,p,d,y={},v=[];if(a.validate(t,f,y,v)&&(t=a.fromDer(n.util.createBuffer(y.privateKey))),y={},v=[],!a.validate(t,h,y,v)){var g=new Error("Cannot read private key. ASN.1 object does not contain an RSAPrivateKey.");throw g.errors=v,g}return e=n.util.createBuffer(y.privateKeyModulus).toHex(),r=n.util.createBuffer(y.privateKeyPublicExponent).toHex(),i=n.util.createBuffer(y.privateKeyPrivateExponent).toHex(),s=n.util.createBuffer(y.privateKeyPrime1).toHex(),u=n.util.createBuffer(y.privateKeyPrime2).toHex(),c=n.util.createBuffer(y.privateKeyExponent1).toHex(),p=n.util.createBuffer(y.privateKeyExponent2).toHex(),d=n.util.createBuffer(y.privateKeyCoefficient).toHex(),l.setRsaPrivateKey(new o(e,16),new o(r,16),new o(i,16),new o(s,16),new o(u,16),new o(c,16),new o(p,16),new o(d,16))},l.privateKeyToAsn1=l.privateKeyToRSAPrivateKey=function(t){return a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.INTEGER,!1,a.integerToDer(0).getBytes()),a.create(a.Class.UNIVERSAL,a.Type.INTEGER,!1,S(t.n)),a.create(a.Class.UNIVERSAL,a.Type.INTEGER,!1,S(t.e)),a.create(a.Class.UNIVERSAL,a.Type.INTEGER,!1,S(t.d)),a.create(a.Class.UNIVERSAL,a.Type.INTEGER,!1,S(t.p)),a.create(a.Class.UNIVERSAL,a.Type.INTEGER,!1,S(t.q)),a.create(a.Class.UNIVERSAL,a.Type.INTEGER,!1,S(t.dP)),a.create(a.Class.UNIVERSAL,a.Type.INTEGER,!1,S(t.dQ)),a.create(a.Class.UNIVERSAL,a.Type.INTEGER,!1,S(t.qInv))])},l.publicKeyFromAsn1=function(t){var e={},r=[];if(a.validate(t,d,e,r)){var i,s=a.derToOid(e.publicKeyOid);if(s!==l.oids.rsaEncryption)throw(i=new Error("Cannot read public key. Unknown OID.")).oid=s,i;t=e.rsaPublicKey}if(r=[],!a.validate(t,p,e,r))throw(i=new Error("Cannot read public key. ASN.1 object does not contain an RSAPublicKey.")).errors=r,i;var u=n.util.createBuffer(e.publicKeyModulus).toHex(),c=n.util.createBuffer(e.publicKeyExponent).toHex();return l.setRsaPublicKey(new o(u,16),new o(c,16))},l.publicKeyToAsn1=l.publicKeyToSubjectPublicKeyInfo=function(t){return a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.OID,!1,a.oidToDer(l.oids.rsaEncryption).getBytes()),a.create(a.Class.UNIVERSAL,a.Type.NULL,!1,"")]),a.create(a.Class.UNIVERSAL,a.Type.BITSTRING,!1,[l.publicKeyToRSAPublicKey(t)])])},l.publicKeyToRSAPublicKey=function(t){return a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.INTEGER,!1,S(t.n)),a.create(a.Class.UNIVERSAL,a.Type.INTEGER,!1,S(t.e))])}},function(t,e,r){var n,o=r(0);function i(t,e,r){this.data=[],null!=t&&("number"==typeof t?this.fromNumber(t,e,r):null==e&&"string"!=typeof t?this.fromString(t,256):this.fromString(t,e))}function a(){return new i(null)}function s(t,e,r,n,o,i){for(var a=16383&e,s=e>>14;--i>=0;){var u=16383&this.data[t],l=this.data[t++]>>14,c=s*u+l*a;o=((u=a*u+((16383&c)<<14)+r.data[n]+o)>>28)+(c>>14)+s*l,r.data[n++]=268435455&u}return o}t.exports=o.jsbn=o.jsbn||{},o.jsbn.BigInteger=i,"undefined"==typeof navigator?(i.prototype.am=s,n=28):"Microsoft Internet Explorer"==navigator.appName?(i.prototype.am=function(t,e,r,n,o,i){for(var a=32767&e,s=e>>15;--i>=0;){var u=32767&this.data[t],l=this.data[t++]>>15,c=s*u+l*a;o=((u=a*u+((32767&c)<<15)+r.data[n]+(1073741823&o))>>>30)+(c>>>15)+s*l+(o>>>30),r.data[n++]=1073741823&u}return o},n=30):"Netscape"!=navigator.appName?(i.prototype.am=function(t,e,r,n,o,i){for(;--i>=0;){var a=e*this.data[t++]+r.data[n]+o;o=Math.floor(a/67108864),r.data[n++]=67108863&a}return o},n=26):(i.prototype.am=s,n=28),i.prototype.DB=n,i.prototype.DM=(1<<n)-1,i.prototype.DV=1<<n,i.prototype.FV=Math.pow(2,52),i.prototype.F1=52-n,i.prototype.F2=2*n-52;var u,l,c=new Array;for(u="0".charCodeAt(0),l=0;l<=9;++l)c[u++]=l;for(u="a".charCodeAt(0),l=10;l<36;++l)c[u++]=l;for(u="A".charCodeAt(0),l=10;l<36;++l)c[u++]=l;function f(t){return"0123456789abcdefghijklmnopqrstuvwxyz".charAt(t)}function h(t,e){var r=c[t.charCodeAt(e)];return null==r?-1:r}function p(t){var e=a();return e.fromInt(t),e}function d(t){var e,r=1;return 0!=(e=t>>>16)&&(t=e,r+=16),0!=(e=t>>8)&&(t=e,r+=8),0!=(e=t>>4)&&(t=e,r+=4),0!=(e=t>>2)&&(t=e,r+=2),0!=(e=t>>1)&&(t=e,r+=1),r}function y(t){this.m=t}function v(t){this.m=t,this.mp=t.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}function g(t,e){return t&e}function m(t,e){return t|e}function b(t,e){return t^e}function w(t,e){return t&~e}function S(t){if(0==t)return-1;var e=0;return 0==(65535&t)&&(t>>=16,e+=16),0==(255&t)&&(t>>=8,e+=8),0==(15&t)&&(t>>=4,e+=4),0==(3&t)&&(t>>=2,e+=2),0==(1&t)&&++e,e}function x(t){for(var e=0;0!=t;)t&=t-1,++e;return e}function _(){}function E(t){return t}function O(t){this.r2=a(),this.q3=a(),i.ONE.dlShiftTo(2*t.t,this.r2),this.mu=this.r2.divide(t),this.m=t}y.prototype.convert=function(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t},y.prototype.revert=function(t){return t},y.prototype.reduce=function(t){t.divRemTo(this.m,null,t)},y.prototype.mulTo=function(t,e,r){t.multiplyTo(e,r),this.reduce(r)},y.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)},v.prototype.convert=function(t){var e=a();return t.abs().dlShiftTo(this.m.t,e),e.divRemTo(this.m,null,e),t.s<0&&e.compareTo(i.ZERO)>0&&this.m.subTo(e,e),e},v.prototype.revert=function(t){var e=a();return t.copyTo(e),this.reduce(e),e},v.prototype.reduce=function(t){for(;t.t<=this.mt2;)t.data[t.t++]=0;for(var e=0;e<this.m.t;++e){var r=32767&t.data[e],n=r*this.mpl+((r*this.mph+(t.data[e]>>15)*this.mpl&this.um)<<15)&t.DM;for(r=e+this.m.t,t.data[r]+=this.m.am(0,n,t,e,0,this.m.t);t.data[r]>=t.DV;)t.data[r]-=t.DV,t.data[++r]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)},v.prototype.mulTo=function(t,e,r){t.multiplyTo(e,r),this.reduce(r)},v.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)},i.prototype.copyTo=function(t){for(var e=this.t-1;e>=0;--e)t.data[e]=this.data[e];t.t=this.t,t.s=this.s},i.prototype.fromInt=function(t){this.t=1,this.s=t<0?-1:0,t>0?this.data[0]=t:t<-1?this.data[0]=t+this.DV:this.t=0},i.prototype.fromString=function(t,e){var r;if(16==e)r=4;else if(8==e)r=3;else if(256==e)r=8;else if(2==e)r=1;else if(32==e)r=5;else{if(4!=e)return void this.fromRadix(t,e);r=2}this.t=0,this.s=0;for(var n=t.length,o=!1,a=0;--n>=0;){var s=8==r?255&t[n]:h(t,n);s<0?"-"==t.charAt(n)&&(o=!0):(o=!1,0==a?this.data[this.t++]=s:a+r>this.DB?(this.data[this.t-1]|=(s&(1<<this.DB-a)-1)<<a,this.data[this.t++]=s>>this.DB-a):this.data[this.t-1]|=s<<a,(a+=r)>=this.DB&&(a-=this.DB))}8==r&&0!=(128&t[0])&&(this.s=-1,a>0&&(this.data[this.t-1]|=(1<<this.DB-a)-1<<a)),this.clamp(),o&&i.ZERO.subTo(this,this)},i.prototype.clamp=function(){for(var t=this.s&this.DM;this.t>0&&this.data[this.t-1]==t;)--this.t},i.prototype.dlShiftTo=function(t,e){var r;for(r=this.t-1;r>=0;--r)e.data[r+t]=this.data[r];for(r=t-1;r>=0;--r)e.data[r]=0;e.t=this.t+t,e.s=this.s},i.prototype.drShiftTo=function(t,e){for(var r=t;r<this.t;++r)e.data[r-t]=this.data[r];e.t=Math.max(this.t-t,0),e.s=this.s},i.prototype.lShiftTo=function(t,e){var r,n=t%this.DB,o=this.DB-n,i=(1<<o)-1,a=Math.floor(t/this.DB),s=this.s<<n&this.DM;for(r=this.t-1;r>=0;--r)e.data[r+a+1]=this.data[r]>>o|s,s=(this.data[r]&i)<<n;for(r=a-1;r>=0;--r)e.data[r]=0;e.data[a]=s,e.t=this.t+a+1,e.s=this.s,e.clamp()},i.prototype.rShiftTo=function(t,e){e.s=this.s;var r=Math.floor(t/this.DB);if(r>=this.t)e.t=0;else{var n=t%this.DB,o=this.DB-n,i=(1<<n)-1;e.data[0]=this.data[r]>>n;for(var a=r+1;a<this.t;++a)e.data[a-r-1]|=(this.data[a]&i)<<o,e.data[a-r]=this.data[a]>>n;n>0&&(e.data[this.t-r-1]|=(this.s&i)<<o),e.t=this.t-r,e.clamp()}},i.prototype.subTo=function(t,e){for(var r=0,n=0,o=Math.min(t.t,this.t);r<o;)n+=this.data[r]-t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;if(t.t<this.t){for(n-=t.s;r<this.t;)n+=this.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<t.t;)n-=t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n-=t.s}e.s=n<0?-1:0,n<-1?e.data[r++]=this.DV+n:n>0&&(e.data[r++]=n),e.t=r,e.clamp()},i.prototype.multiplyTo=function(t,e){var r=this.abs(),n=t.abs(),o=r.t;for(e.t=o+n.t;--o>=0;)e.data[o]=0;for(o=0;o<n.t;++o)e.data[o+r.t]=r.am(0,n.data[o],e,o,0,r.t);e.s=0,e.clamp(),this.s!=t.s&&i.ZERO.subTo(e,e)},i.prototype.squareTo=function(t){for(var e=this.abs(),r=t.t=2*e.t;--r>=0;)t.data[r]=0;for(r=0;r<e.t-1;++r){var n=e.am(r,e.data[r],t,2*r,0,1);(t.data[r+e.t]+=e.am(r+1,2*e.data[r],t,2*r+1,n,e.t-r-1))>=e.DV&&(t.data[r+e.t]-=e.DV,t.data[r+e.t+1]=1)}t.t>0&&(t.data[t.t-1]+=e.am(r,e.data[r],t,2*r,0,1)),t.s=0,t.clamp()},i.prototype.divRemTo=function(t,e,r){var n=t.abs();if(!(n.t<=0)){var o=this.abs();if(o.t<n.t)return null!=e&&e.fromInt(0),void(null!=r&&this.copyTo(r));null==r&&(r=a());var s=a(),u=this.s,l=t.s,c=this.DB-d(n.data[n.t-1]);c>0?(n.lShiftTo(c,s),o.lShiftTo(c,r)):(n.copyTo(s),o.copyTo(r));var f=s.t,h=s.data[f-1];if(0!=h){var p=h*(1<<this.F1)+(f>1?s.data[f-2]>>this.F2:0),y=this.FV/p,v=(1<<this.F1)/p,g=1<<this.F2,m=r.t,b=m-f,w=null==e?a():e;for(s.dlShiftTo(b,w),r.compareTo(w)>=0&&(r.data[r.t++]=1,r.subTo(w,r)),i.ONE.dlShiftTo(f,w),w.subTo(s,s);s.t<f;)s.data[s.t++]=0;for(;--b>=0;){var S=r.data[--m]==h?this.DM:Math.floor(r.data[m]*y+(r.data[m-1]+g)*v);if((r.data[m]+=s.am(0,S,r,b,0,f))<S)for(s.dlShiftTo(b,w),r.subTo(w,r);r.data[m]<--S;)r.subTo(w,r)}null!=e&&(r.drShiftTo(f,e),u!=l&&i.ZERO.subTo(e,e)),r.t=f,r.clamp(),c>0&&r.rShiftTo(c,r),u<0&&i.ZERO.subTo(r,r)}}},i.prototype.invDigit=function(){if(this.t<1)return 0;var t=this.data[0];if(0==(1&t))return 0;var e=3&t;return(e=(e=(e=(e=e*(2-(15&t)*e)&15)*(2-(255&t)*e)&255)*(2-((65535&t)*e&65535))&65535)*(2-t*e%this.DV)%this.DV)>0?this.DV-e:-e},i.prototype.isEven=function(){return 0==(this.t>0?1&this.data[0]:this.s)},i.prototype.exp=function(t,e){if(t>4294967295||t<1)return i.ONE;var r=a(),n=a(),o=e.convert(this),s=d(t)-1;for(o.copyTo(r);--s>=0;)if(e.sqrTo(r,n),(t&1<<s)>0)e.mulTo(n,o,r);else{var u=r;r=n,n=u}return e.revert(r)},i.prototype.toString=function(t){if(this.s<0)return"-"+this.negate().toString(t);var e;if(16==t)e=4;else if(8==t)e=3;else if(2==t)e=1;else if(32==t)e=5;else{if(4!=t)return this.toRadix(t);e=2}var r,n=(1<<e)-1,o=!1,i="",a=this.t,s=this.DB-a*this.DB%e;if(a-- >0)for(s<this.DB&&(r=this.data[a]>>s)>0&&(o=!0,i=f(r));a>=0;)s<e?(r=(this.data[a]&(1<<s)-1)<<e-s,r|=this.data[--a]>>(s+=this.DB-e)):(r=this.data[a]>>(s-=e)&n,s<=0&&(s+=this.DB,--a)),r>0&&(o=!0),o&&(i+=f(r));return o?i:"0"},i.prototype.negate=function(){var t=a();return i.ZERO.subTo(this,t),t},i.prototype.abs=function(){return this.s<0?this.negate():this},i.prototype.compareTo=function(t){var e=this.s-t.s;if(0!=e)return e;var r=this.t;if(0!=(e=r-t.t))return this.s<0?-e:e;for(;--r>=0;)if(0!=(e=this.data[r]-t.data[r]))return e;return 0},i.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+d(this.data[this.t-1]^this.s&this.DM)},i.prototype.mod=function(t){var e=a();return this.abs().divRemTo(t,null,e),this.s<0&&e.compareTo(i.ZERO)>0&&t.subTo(e,e),e},i.prototype.modPowInt=function(t,e){var r;return r=t<256||e.isEven()?new y(e):new v(e),this.exp(t,r)},i.ZERO=p(0),i.ONE=p(1),_.prototype.convert=E,_.prototype.revert=E,_.prototype.mulTo=function(t,e,r){t.multiplyTo(e,r)},_.prototype.sqrTo=function(t,e){t.squareTo(e)},O.prototype.convert=function(t){if(t.s<0||t.t>2*this.m.t)return t.mod(this.m);if(t.compareTo(this.m)<0)return t;var e=a();return t.copyTo(e),this.reduce(e),e},O.prototype.revert=function(t){return t},O.prototype.reduce=function(t){for(t.drShiftTo(this.m.t-1,this.r2),t.t>this.m.t+1&&(t.t=this.m.t+1,t.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);t.compareTo(this.r2)<0;)t.dAddOffset(1,this.m.t+1);for(t.subTo(this.r2,t);t.compareTo(this.m)>=0;)t.subTo(this.m,t)},O.prototype.mulTo=function(t,e,r){t.multiplyTo(e,r),this.reduce(r)},O.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)};var P=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],k=(1<<26)/P[P.length-1];i.prototype.chunkSize=function(t){return Math.floor(Math.LN2*this.DB/Math.log(t))},i.prototype.toRadix=function(t){if(null==t&&(t=10),0==this.signum()||t<2||t>36)return"0";var e=this.chunkSize(t),r=Math.pow(t,e),n=p(r),o=a(),i=a(),s="";for(this.divRemTo(n,o,i);o.signum()>0;)s=(r+i.intValue()).toString(t).substr(1)+s,o.divRemTo(n,o,i);return i.intValue().toString(t)+s},i.prototype.fromRadix=function(t,e){this.fromInt(0),null==e&&(e=10);for(var r=this.chunkSize(e),n=Math.pow(e,r),o=!1,a=0,s=0,u=0;u<t.length;++u){var l=h(t,u);l<0?"-"==t.charAt(u)&&0==this.signum()&&(o=!0):(s=e*s+l,++a>=r&&(this.dMultiply(n),this.dAddOffset(s,0),a=0,s=0))}a>0&&(this.dMultiply(Math.pow(e,a)),this.dAddOffset(s,0)),o&&i.ZERO.subTo(this,this)},i.prototype.fromNumber=function(t,e,r){if("number"==typeof e)if(t<2)this.fromInt(1);else for(this.fromNumber(t,r),this.testBit(t-1)||this.bitwiseTo(i.ONE.shiftLeft(t-1),m,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(e);)this.dAddOffset(2,0),this.bitLength()>t&&this.subTo(i.ONE.shiftLeft(t-1),this);else{var n=new Array,o=7&t;n.length=1+(t>>3),e.nextBytes(n),o>0?n[0]&=(1<<o)-1:n[0]=0,this.fromString(n,256)}},i.prototype.bitwiseTo=function(t,e,r){var n,o,i=Math.min(t.t,this.t);for(n=0;n<i;++n)r.data[n]=e(this.data[n],t.data[n]);if(t.t<this.t){for(o=t.s&this.DM,n=i;n<this.t;++n)r.data[n]=e(this.data[n],o);r.t=this.t}else{for(o=this.s&this.DM,n=i;n<t.t;++n)r.data[n]=e(o,t.data[n]);r.t=t.t}r.s=e(this.s,t.s),r.clamp()},i.prototype.changeBit=function(t,e){var r=i.ONE.shiftLeft(t);return this.bitwiseTo(r,e,r),r},i.prototype.addTo=function(t,e){for(var r=0,n=0,o=Math.min(t.t,this.t);r<o;)n+=this.data[r]+t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;if(t.t<this.t){for(n+=t.s;r<this.t;)n+=this.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<t.t;)n+=t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n+=t.s}e.s=n<0?-1:0,n>0?e.data[r++]=n:n<-1&&(e.data[r++]=this.DV+n),e.t=r,e.clamp()},i.prototype.dMultiply=function(t){this.data[this.t]=this.am(0,t-1,this,0,0,this.t),++this.t,this.clamp()},i.prototype.dAddOffset=function(t,e){if(0!=t){for(;this.t<=e;)this.data[this.t++]=0;for(this.data[e]+=t;this.data[e]>=this.DV;)this.data[e]-=this.DV,++e>=this.t&&(this.data[this.t++]=0),++this.data[e]}},i.prototype.multiplyLowerTo=function(t,e,r){var n,o=Math.min(this.t+t.t,e);for(r.s=0,r.t=o;o>0;)r.data[--o]=0;for(n=r.t-this.t;o<n;++o)r.data[o+this.t]=this.am(0,t.data[o],r,o,0,this.t);for(n=Math.min(t.t,e);o<n;++o)this.am(0,t.data[o],r,o,0,e-o);r.clamp()},i.prototype.multiplyUpperTo=function(t,e,r){--e;var n=r.t=this.t+t.t-e;for(r.s=0;--n>=0;)r.data[n]=0;for(n=Math.max(e-this.t,0);n<t.t;++n)r.data[this.t+n-e]=this.am(e-n,t.data[n],r,0,0,this.t+n-e);r.clamp(),r.drShiftTo(1,r)},i.prototype.modInt=function(t){if(t<=0)return 0;var e=this.DV%t,r=this.s<0?t-1:0;if(this.t>0)if(0==e)r=this.data[0]%t;else for(var n=this.t-1;n>=0;--n)r=(e*r+this.data[n])%t;return r},i.prototype.millerRabin=function(t){var e=this.subtract(i.ONE),r=e.getLowestSetBit();if(r<=0)return!1;for(var n,o=e.shiftRight(r),a={nextBytes:function(t){for(var e=0;e<t.length;++e)t[e]=Math.floor(256*Math.random())}},s=0;s<t;++s){do{n=new i(this.bitLength(),a)}while(n.compareTo(i.ONE)<=0||n.compareTo(e)>=0);var u=n.modPow(o,this);if(0!=u.compareTo(i.ONE)&&0!=u.compareTo(e)){for(var l=1;l++<r&&0!=u.compareTo(e);)if(0==(u=u.modPowInt(2,this)).compareTo(i.ONE))return!1;if(0!=u.compareTo(e))return!1}}return!0},i.prototype.clone=function(){var t=a();return this.copyTo(t),t},i.prototype.intValue=function(){if(this.s<0){if(1==this.t)return this.data[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this.data[0];if(0==this.t)return 0}return(this.data[1]&(1<<32-this.DB)-1)<<this.DB|this.data[0]},i.prototype.byteValue=function(){return 0==this.t?this.s:this.data[0]<<24>>24},i.prototype.shortValue=function(){return 0==this.t?this.s:this.data[0]<<16>>16},i.prototype.signum=function(){return this.s<0?-1:this.t<=0||1==this.t&&this.data[0]<=0?0:1},i.prototype.toByteArray=function(){var t=this.t,e=new Array;e[0]=this.s;var r,n=this.DB-t*this.DB%8,o=0;if(t-- >0)for(n<this.DB&&(r=this.data[t]>>n)!=(this.s&this.DM)>>n&&(e[o++]=r|this.s<<this.DB-n);t>=0;)n<8?(r=(this.data[t]&(1<<n)-1)<<8-n,r|=this.data[--t]>>(n+=this.DB-8)):(r=this.data[t]>>(n-=8)&255,n<=0&&(n+=this.DB,--t)),0!=(128&r)&&(r|=-256),0==o&&(128&this.s)!=(128&r)&&++o,(o>0||r!=this.s)&&(e[o++]=r);return e},i.prototype.equals=function(t){return 0==this.compareTo(t)},i.prototype.min=function(t){return this.compareTo(t)<0?this:t},i.prototype.max=function(t){return this.compareTo(t)>0?this:t},i.prototype.and=function(t){var e=a();return this.bitwiseTo(t,g,e),e},i.prototype.or=function(t){var e=a();return this.bitwiseTo(t,m,e),e},i.prototype.xor=function(t){var e=a();return this.bitwiseTo(t,b,e),e},i.prototype.andNot=function(t){var e=a();return this.bitwiseTo(t,w,e),e},i.prototype.not=function(){for(var t=a(),e=0;e<this.t;++e)t.data[e]=this.DM&~this.data[e];return t.t=this.t,t.s=~this.s,t},i.prototype.shiftLeft=function(t){var e=a();return t<0?this.rShiftTo(-t,e):this.lShiftTo(t,e),e},i.prototype.shiftRight=function(t){var e=a();return t<0?this.lShiftTo(-t,e):this.rShiftTo(t,e),e},i.prototype.getLowestSetBit=function(){for(var t=0;t<this.t;++t)if(0!=this.data[t])return t*this.DB+S(this.data[t]);return this.s<0?this.t*this.DB:-1},i.prototype.bitCount=function(){for(var t=0,e=this.s&this.DM,r=0;r<this.t;++r)t+=x(this.data[r]^e);return t},i.prototype.testBit=function(t){var e=Math.floor(t/this.DB);return e>=this.t?0!=this.s:0!=(this.data[e]&1<<t%this.DB)},i.prototype.setBit=function(t){return this.changeBit(t,m)},i.prototype.clearBit=function(t){return this.changeBit(t,w)},i.prototype.flipBit=function(t){return this.changeBit(t,b)},i.prototype.add=function(t){var e=a();return this.addTo(t,e),e},i.prototype.subtract=function(t){var e=a();return this.subTo(t,e),e},i.prototype.multiply=function(t){var e=a();return this.multiplyTo(t,e),e},i.prototype.divide=function(t){var e=a();return this.divRemTo(t,e,null),e},i.prototype.remainder=function(t){var e=a();return this.divRemTo(t,null,e),e},i.prototype.divideAndRemainder=function(t){var e=a(),r=a();return this.divRemTo(t,e,r),new Array(e,r)},i.prototype.modPow=function(t,e){var r,n,o=t.bitLength(),i=p(1);if(o<=0)return i;r=o<18?1:o<48?3:o<144?4:o<768?5:6,n=o<8?new y(e):e.isEven()?new O(e):new v(e);var s=new Array,u=3,l=r-1,c=(1<<r)-1;if(s[1]=n.convert(this),r>1){var f=a();for(n.sqrTo(s[1],f);u<=c;)s[u]=a(),n.mulTo(f,s[u-2],s[u]),u+=2}var h,g,m=t.t-1,b=!0,w=a();for(o=d(t.data[m])-1;m>=0;){for(o>=l?h=t.data[m]>>o-l&c:(h=(t.data[m]&(1<<o+1)-1)<<l-o,m>0&&(h|=t.data[m-1]>>this.DB+o-l)),u=r;0==(1&h);)h>>=1,--u;if((o-=u)<0&&(o+=this.DB,--m),b)s[h].copyTo(i),b=!1;else{for(;u>1;)n.sqrTo(i,w),n.sqrTo(w,i),u-=2;u>0?n.sqrTo(i,w):(g=i,i=w,w=g),n.mulTo(w,s[h],i)}for(;m>=0&&0==(t.data[m]&1<<o);)n.sqrTo(i,w),g=i,i=w,w=g,--o<0&&(o=this.DB-1,--m)}return n.revert(i)},i.prototype.modInverse=function(t){var e=t.isEven();if(this.isEven()&&e||0==t.signum())return i.ZERO;for(var r=t.clone(),n=this.clone(),o=p(1),a=p(0),s=p(0),u=p(1);0!=r.signum();){for(;r.isEven();)r.rShiftTo(1,r),e?(o.isEven()&&a.isEven()||(o.addTo(this,o),a.subTo(t,a)),o.rShiftTo(1,o)):a.isEven()||a.subTo(t,a),a.rShiftTo(1,a);for(;n.isEven();)n.rShiftTo(1,n),e?(s.isEven()&&u.isEven()||(s.addTo(this,s),u.subTo(t,u)),s.rShiftTo(1,s)):u.isEven()||u.subTo(t,u),u.rShiftTo(1,u);r.compareTo(n)>=0?(r.subTo(n,r),e&&o.subTo(s,o),a.subTo(u,a)):(n.subTo(r,n),e&&s.subTo(o,s),u.subTo(a,u))}return 0!=n.compareTo(i.ONE)?i.ZERO:u.compareTo(t)>=0?u.subtract(t):u.signum()<0?(u.addTo(t,u),u.signum()<0?u.add(t):u):u},i.prototype.pow=function(t){return this.exp(t,new _)},i.prototype.gcd=function(t){var e=this.s<0?this.negate():this.clone(),r=t.s<0?t.negate():t.clone();if(e.compareTo(r)<0){var n=e;e=r,r=n}var o=e.getLowestSetBit(),i=r.getLowestSetBit();if(i<0)return e;for(o<i&&(i=o),i>0&&(e.rShiftTo(i,e),r.rShiftTo(i,r));e.signum()>0;)(o=e.getLowestSetBit())>0&&e.rShiftTo(o,e),(o=r.getLowestSetBit())>0&&r.rShiftTo(o,r),e.compareTo(r)>=0?(e.subTo(r,e),e.rShiftTo(1,e)):(r.subTo(e,r),r.rShiftTo(1,r));return i>0&&r.lShiftTo(i,r),r},i.prototype.isProbablePrime=function(t){var e,r=this.abs();if(1==r.t&&r.data[0]<=P[P.length-1]){for(e=0;e<P.length;++e)if(r.data[0]==P[e])return!0;return!1}if(r.isEven())return!1;for(e=1;e<P.length;){for(var n=P[e],o=e+1;o<P.length&&n<k;)n*=P[o++];for(n=r.modInt(n);e<o;)if(n%P[e++]==0)return!1}return r.millerRabin(t)}},function(t,e,r){var n=r(0);r(1),t.exports=n.cipher=n.cipher||{},n.cipher.algorithms=n.cipher.algorithms||{},n.cipher.createCipher=function(t,e){var r=t;if("string"==typeof r&&(r=n.cipher.getAlgorithm(r))&&(r=r()),!r)throw new Error("Unsupported algorithm: "+t);return new n.cipher.BlockCipher({algorithm:r,key:e,decrypt:!1})},n.cipher.createDecipher=function(t,e){var r=t;if("string"==typeof r&&(r=n.cipher.getAlgorithm(r))&&(r=r()),!r)throw new Error("Unsupported algorithm: "+t);return new n.cipher.BlockCipher({algorithm:r,key:e,decrypt:!0})},n.cipher.registerAlgorithm=function(t,e){t=t.toUpperCase(),n.cipher.algorithms[t]=e},n.cipher.getAlgorithm=function(t){return(t=t.toUpperCase())in n.cipher.algorithms?n.cipher.algorithms[t]:null};var o=n.cipher.BlockCipher=function(t){this.algorithm=t.algorithm,this.mode=this.algorithm.mode,this.blockSize=this.mode.blockSize,this._finish=!1,this._input=null,this.output=null,this._op=t.decrypt?this.mode.decrypt:this.mode.encrypt,this._decrypt=t.decrypt,this.algorithm.initialize(t)};o.prototype.start=function(t){t=t||{};var e={};for(var r in t)e[r]=t[r];e.decrypt=this._decrypt,this._finish=!1,this._input=n.util.createBuffer(),this.output=t.output||n.util.createBuffer(),this.mode.start(e)},o.prototype.update=function(t){for(t&&this._input.putBuffer(t);!this._op.call(this.mode,this._input,this.output,this._finish)&&!this._finish;);this._input.compact()},o.prototype.finish=function(t){!t||"ECB"!==this.mode.name&&"CBC"!==this.mode.name||(this.mode.pad=function(e){return t(this.blockSize,e,!1)},this.mode.unpad=function(e){return t(this.blockSize,e,!0)});var e={};return e.decrypt=this._decrypt,e.overflow=this._input.length()%this.blockSize,!(!this._decrypt&&this.mode.pad&&!this.mode.pad(this._input,e)||(this._finish=!0,this.update(),this._decrypt&&this.mode.unpad&&!this.mode.unpad(this.output,e)||this.mode.afterFinish&&!this.mode.afterFinish(this.output,e)))}},function(t,e,r){var n=r(0);r(4),r(1);var o=t.exports=n.md5=n.md5||{};n.md.md5=n.md.algorithms.md5=o,o.create=function(){l||function(){i=String.fromCharCode(128),i+=n.util.fillString(String.fromCharCode(0),64),a=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,1,6,11,0,5,10,15,4,9,14,3,8,13,2,7,12,5,8,11,14,1,4,7,10,13,0,3,6,9,12,15,2,0,7,14,5,12,3,10,1,8,15,6,13,4,11,2,9],s=[7,12,17,22,7,12,17,22,7,12,17,22,7,12,17,22,5,9,14,20,5,9,14,20,5,9,14,20,5,9,14,20,4,11,16,23,4,11,16,23,4,11,16,23,4,11,16,23,6,10,15,21,6,10,15,21,6,10,15,21,6,10,15,21],u=new Array(64);for(var t=0;t<64;++t)u[t]=Math.floor(4294967296*Math.abs(Math.sin(t+1)));l=!0}();var t=null,e=n.util.createBuffer(),r=new Array(16),o={algorithm:"md5",blockLength:64,digestLength:16,messageLength:0,fullMessageLength:null,messageLengthSize:8,start:function(){o.messageLength=0,o.fullMessageLength=o.messageLength64=[];for(var r=o.messageLengthSize/4,i=0;i<r;++i)o.fullMessageLength.push(0);return e=n.util.createBuffer(),t={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878},o}};return o.start(),o.update=function(i,a){"utf8"===a&&(i=n.util.encodeUtf8(i));var s=i.length;o.messageLength+=s,s=[s/4294967296>>>0,s>>>0];for(var u=o.fullMessageLength.length-1;u>=0;--u)o.fullMessageLength[u]+=s[1],s[1]=s[0]+(o.fullMessageLength[u]/4294967296>>>0),o.fullMessageLength[u]=o.fullMessageLength[u]>>>0,s[0]=s[1]/4294967296>>>0;return e.putBytes(i),c(t,r,e),(e.read>2048||0===e.length())&&e.compact(),o},o.digest=function(){var a=n.util.createBuffer();a.putBytes(e.bytes());var s=o.fullMessageLength[o.fullMessageLength.length-1]+o.messageLengthSize&o.blockLength-1;a.putBytes(i.substr(0,o.blockLength-s));for(var u,l=0,f=o.fullMessageLength.length-1;f>=0;--f)l=(u=8*o.fullMessageLength[f]+l)/4294967296>>>0,a.putInt32Le(u>>>0);var h={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3};c(h,r,a);var p=n.util.createBuffer();return p.putInt32Le(h.h0),p.putInt32Le(h.h1),p.putInt32Le(h.h2),p.putInt32Le(h.h3),p},o};var i=null,a=null,s=null,u=null,l=!1;function c(t,e,r){for(var n,o,i,l,c,f,h,p=r.length();p>=64;){for(o=t.h0,i=t.h1,l=t.h2,c=t.h3,h=0;h<16;++h)e[h]=r.getInt32Le(),n=o+(c^i&(l^c))+u[h]+e[h],o=c,c=l,l=i,i+=n<<(f=s[h])|n>>>32-f;for(;h<32;++h)n=o+(l^c&(i^l))+u[h]+e[a[h]],o=c,c=l,l=i,i+=n<<(f=s[h])|n>>>32-f;for(;h<48;++h)n=o+(i^l^c)+u[h]+e[a[h]],o=c,c=l,l=i,i+=n<<(f=s[h])|n>>>32-f;for(;h<64;++h)n=o+(l^(i|~c))+u[h]+e[a[h]],o=c,c=l,l=i,i+=n<<(f=s[h])|n>>>32-f;t.h0=t.h0+o|0,t.h1=t.h1+i|0,t.h2=t.h2+l|0,t.h3=t.h3+c|0,p-=64}}},function(t,e,r){var n=r(0);r(8),r(4),r(1);var o,i=n.pkcs5=n.pkcs5||{};n.util.isNodejs&&!n.options.usePureJavaScript&&(o=r(16)),t.exports=n.pbkdf2=i.pbkdf2=function(t,e,r,i,a,u){if("function"==typeof a&&(u=a,a=null),n.util.isNodejs&&!n.options.usePureJavaScript&&o.pbkdf2&&(null===a||"object"!=s(a))&&(o.pbkdf2Sync.length>4||!a||"sha1"===a))return"string"!=typeof a&&(a="sha1"),t=Buffer.from(t,"binary"),e=Buffer.from(e,"binary"),u?4===o.pbkdf2Sync.length?o.pbkdf2(t,e,r,i,function(t,e){if(t)return u(t);u(null,e.toString("binary"))}):o.pbkdf2(t,e,r,i,a,function(t,e){if(t)return u(t);u(null,e.toString("binary"))}):4===o.pbkdf2Sync.length?o.pbkdf2Sync(t,e,r,i).toString("binary"):o.pbkdf2Sync(t,e,r,i,a).toString("binary");if(null==a&&(a="sha1"),"string"==typeof a){if(!(a in n.md.algorithms))throw new Error("Unknown hash algorithm: "+a);a=n.md[a].create()}var l=a.digestLength;if(i>4294967295*l){var c=new Error("Derived key is too long.");if(u)return u(c);throw c}var f=Math.ceil(i/l),h=i-(f-1)*l,p=n.hmac.create();p.start(a,t);var d,y,v,g="";if(!u){for(var m=1;m<=f;++m){p.start(null,null),p.update(e),p.update(n.util.int32ToBytes(m)),d=v=p.digest().getBytes();for(var b=2;b<=r;++b)p.start(null,null),p.update(v),y=p.digest().getBytes(),d=n.util.xorBytes(d,y,l),v=y;g+=m<f?d:d.substr(0,h)}return g}function w(){if(m>f)return u(null,g);p.start(null,null),p.update(e),p.update(n.util.int32ToBytes(m)),d=v=p.digest().getBytes(),b=2,S()}function S(){if(b<=r)return p.start(null,null),p.update(v),y=p.digest().getBytes(),d=n.util.xorBytes(d,y,l),v=y,++b,n.util.setImmediate(S);g+=m<f?d:d.substr(0,h),++m,w()}m=1,w()}},function(t,e){},function(t,e,r){var n=r(0);r(5),r(3),r(10),r(4),r(37),r(6),r(7),r(18),r(11),r(1);var o=n.asn1,i=t.exports=n.pki=n.pki||{},a=i.oids,u={};u.CN=a.commonName,u.commonName="CN",u.C=a.countryName,u.countryName="C",u.L=a.localityName,u.localityName="L",u.ST=a.stateOrProvinceName,u.stateOrProvinceName="ST",u.O=a.organizationName,u.organizationName="O",u.OU=a.organizationalUnitName,u.organizationalUnitName="OU",u.E=a.emailAddress,u.emailAddress="E";var l=n.pki.rsa.publicKeyValidator,c={name:"Certificate",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,captureAsn1:"tbsCertificate",value:[{name:"Certificate.TBSCertificate.version",tagClass:o.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.version.integer",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"certVersion"}]},{name:"Certificate.TBSCertificate.serialNumber",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"certSerialNumber"},{name:"Certificate.TBSCertificate.signature",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.signature.algorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"certinfoSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:o.Class.UNIVERSAL,optional:!0,captureAsn1:"certinfoSignatureParams"}]},{name:"Certificate.TBSCertificate.issuer",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,captureAsn1:"certIssuer"},{name:"Certificate.TBSCertificate.validity",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.validity.notBefore (utc)",tagClass:o.Class.UNIVERSAL,type:o.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity1UTCTime"},{name:"Certificate.TBSCertificate.validity.notBefore (generalized)",tagClass:o.Class.UNIVERSAL,type:o.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity2GeneralizedTime"},{name:"Certificate.TBSCertificate.validity.notAfter (utc)",tagClass:o.Class.UNIVERSAL,type:o.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity3UTCTime"},{name:"Certificate.TBSCertificate.validity.notAfter (generalized)",tagClass:o.Class.UNIVERSAL,type:o.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity4GeneralizedTime"}]},{name:"Certificate.TBSCertificate.subject",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,captureAsn1:"certSubject"},l,{name:"Certificate.TBSCertificate.issuerUniqueID",tagClass:o.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.issuerUniqueID.id",tagClass:o.Class.UNIVERSAL,type:o.Type.BITSTRING,constructed:!1,captureBitStringValue:"certIssuerUniqueId"}]},{name:"Certificate.TBSCertificate.subjectUniqueID",tagClass:o.Class.CONTEXT_SPECIFIC,type:2,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.subjectUniqueID.id",tagClass:o.Class.UNIVERSAL,type:o.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSubjectUniqueId"}]},{name:"Certificate.TBSCertificate.extensions",tagClass:o.Class.CONTEXT_SPECIFIC,type:3,constructed:!0,captureAsn1:"certExtensions",optional:!0}]},{name:"Certificate.signatureAlgorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.signatureAlgorithm.algorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"certSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:o.Class.UNIVERSAL,optional:!0,captureAsn1:"certSignatureParams"}]},{name:"Certificate.signatureValue",tagClass:o.Class.UNIVERSAL,type:o.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSignature"}]},f={name:"rsapss",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.hashAlgorithm",tagClass:o.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier",tagClass:o.Class.UNIVERSAL,type:o.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier.algorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"hashOid"}]}]},{name:"rsapss.maskGenAlgorithm",tagClass:o.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier",tagClass:o.Class.UNIVERSAL,type:o.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.algorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"maskGenOid"},{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params.algorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"maskGenHashOid"}]}]}]},{name:"rsapss.saltLength",tagClass:o.Class.CONTEXT_SPECIFIC,type:2,optional:!0,value:[{name:"rsapss.saltLength.saltLength",tagClass:o.Class.UNIVERSAL,type:o.Class.INTEGER,constructed:!1,capture:"saltLength"}]},{name:"rsapss.trailerField",tagClass:o.Class.CONTEXT_SPECIFIC,type:3,optional:!0,value:[{name:"rsapss.trailer.trailer",tagClass:o.Class.UNIVERSAL,type:o.Class.INTEGER,constructed:!1,capture:"trailer"}]}]},h={name:"CertificationRequestInfo",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfo",value:[{name:"CertificationRequestInfo.integer",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"certificationRequestInfoVersion"},{name:"CertificationRequestInfo.subject",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfoSubject"},l,{name:"CertificationRequestInfo.attributes",tagClass:o.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"certificationRequestInfoAttributes",value:[{name:"CertificationRequestInfo.attributes",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequestInfo.attributes.type",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1},{name:"CertificationRequestInfo.attributes.value",tagClass:o.Class.UNIVERSAL,type:o.Type.SET,constructed:!0}]}]}]},p={name:"CertificationRequest",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,captureAsn1:"csr",value:[h,{name:"CertificationRequest.signatureAlgorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequest.signatureAlgorithm.algorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"csrSignatureOid"},{name:"CertificationRequest.signatureAlgorithm.parameters",tagClass:o.Class.UNIVERSAL,optional:!0,captureAsn1:"csrSignatureParams"}]},{name:"CertificationRequest.signature",tagClass:o.Class.UNIVERSAL,type:o.Type.BITSTRING,constructed:!1,captureBitStringValue:"csrSignature"}]};function d(t,e){"string"==typeof e&&(e={shortName:e});for(var r,n=null,o=0;null===n&&o<t.attributes.length;++o)r=t.attributes[o],(e.type&&e.type===r.type||e.name&&e.name===r.name||e.shortName&&e.shortName===r.shortName)&&(n=r);return n}i.RDNAttributesAsArray=function(t,e){for(var r,n,i,s=[],l=0;l<t.value.length;++l){r=t.value[l];for(var c=0;c<r.value.length;++c)i={},n=r.value[c],i.type=o.derToOid(n.value[0].value),i.value=n.value[1].value,i.valueTagClass=n.value[1].type,i.type in a&&(i.name=a[i.type],i.name in u&&(i.shortName=u[i.name])),e&&(e.update(i.type),e.update(i.value)),s.push(i)}return s},i.CRIAttributesAsArray=function(t){for(var e=[],r=0;r<t.length;++r)for(var n=t[r],s=o.derToOid(n.value[0].value),l=n.value[1].value,c=0;c<l.length;++c){var f={};if(f.type=s,f.value=l[c].value,f.valueTagClass=l[c].type,f.type in a&&(f.name=a[f.type],f.name in u&&(f.shortName=u[f.name])),f.type===a.extensionRequest){f.extensions=[];for(var h=0;h<f.value.length;++h)f.extensions.push(i.certificateExtensionFromAsn1(f.value[h]))}e.push(f)}return e};var y=function(t,e,r){var n={};if(t!==a["RSASSA-PSS"])return n;r&&(n={hash:{algorithmOid:a.sha1},mgf:{algorithmOid:a.mgf1,hash:{algorithmOid:a.sha1}},saltLength:20});var i={},s=[];if(!o.validate(e,f,i,s)){var u=new Error("Cannot read RSASSA-PSS parameter block.");throw u.errors=s,u}return void 0!==i.hashOid&&(n.hash=n.hash||{},n.hash.algorithmOid=o.derToOid(i.hashOid)),void 0!==i.maskGenOid&&(n.mgf=n.mgf||{},n.mgf.algorithmOid=o.derToOid(i.maskGenOid),n.mgf.hash=n.mgf.hash||{},n.mgf.hash.algorithmOid=o.derToOid(i.maskGenHashOid)),void 0!==i.saltLength&&(n.saltLength=i.saltLength.charCodeAt(0)),n},v=function(t){switch(a[t.signatureOid]){case"sha1WithRSAEncryption":case"sha1WithRSASignature":return n.md.sha1.create();case"md5WithRSAEncryption":return n.md.md5.create();case"sha256WithRSAEncryption":return n.md.sha256.create();case"sha384WithRSAEncryption":return n.md.sha384.create();case"sha512WithRSAEncryption":return n.md.sha512.create();case"RSASSA-PSS":return n.md.sha256.create();default:var e=new Error("Could not compute "+t.type+" digest. Unknown signature OID.");throw e.signatureOid=t.signatureOid,e}},g=function(t){var e,r=t.certificate;switch(r.signatureOid){case a.sha1WithRSAEncryption:case a.sha1WithRSASignature:break;case a["RSASSA-PSS"]:var o,i,s;if(void 0===(o=a[r.signatureParameters.mgf.hash.algorithmOid])||void 0===n.md[o])throw(s=new Error("Unsupported MGF hash function.")).oid=r.signatureParameters.mgf.hash.algorithmOid,s.name=o,s;if(void 0===(i=a[r.signatureParameters.mgf.algorithmOid])||void 0===n.mgf[i])throw(s=new Error("Unsupported MGF function.")).oid=r.signatureParameters.mgf.algorithmOid,s.name=i,s;if(i=n.mgf[i].create(n.md[o].create()),void 0===(o=a[r.signatureParameters.hash.algorithmOid])||void 0===n.md[o])throw(s=new Error("Unsupported RSASSA-PSS hash function.")).oid=r.signatureParameters.hash.algorithmOid,s.name=o,s;e=n.pss.create(n.md[o].create(),i,r.signatureParameters.saltLength)}return r.publicKey.verify(t.md.digest().getBytes(),t.signature,e)};function m(t){for(var e,r,i=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[]),a=t.attributes,s=0;s<a.length;++s){var u=(e=a[s]).value,l=o.Type.PRINTABLESTRING;"valueTagClass"in e&&(l=e.valueTagClass)===o.Type.UTF8&&(u=n.util.encodeUtf8(u)),r=o.create(o.Class.UNIVERSAL,o.Type.SET,!0,[o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(e.type).getBytes()),o.create(o.Class.UNIVERSAL,l,!1,u)])]),i.value.push(r)}return i}function b(t){for(var e,r=0;r<t.length;++r){if(void 0===(e=t[r]).name&&(e.type&&e.type in i.oids?e.name=i.oids[e.type]:e.shortName&&e.shortName in u&&(e.name=i.oids[u[e.shortName]])),void 0===e.type){if(!(e.name&&e.name in i.oids))throw(s=new Error("Attribute type not specified.")).attribute=e,s;e.type=i.oids[e.name]}if(void 0===e.shortName&&e.name&&e.name in u&&(e.shortName=u[e.name]),e.type===a.extensionRequest&&(e.valueConstructed=!0,e.valueTagClass=o.Type.SEQUENCE,!e.value&&e.extensions)){e.value=[];for(var n=0;n<e.extensions.length;++n)e.value.push(i.certificateExtensionToAsn1(w(e.extensions[n])))}var s;if(void 0===e.value)throw(s=new Error("Attribute value not specified.")).attribute=e,s}}function w(t,e){if(e=e||{},void 0===t.name&&t.id&&t.id in i.oids&&(t.name=i.oids[t.id]),void 0===t.id){if(!(t.name&&t.name in i.oids))throw(S=new Error("Extension ID not specified.")).extension=t,S;t.id=i.oids[t.name]}if(void 0!==t.value)return t;if("keyUsage"===t.name){var r=0,s=0,u=0;t.digitalSignature&&(s|=128,r=7),t.nonRepudiation&&(s|=64,r=6),t.keyEncipherment&&(s|=32,r=5),t.dataEncipherment&&(s|=16,r=4),t.keyAgreement&&(s|=8,r=3),t.keyCertSign&&(s|=4,r=2),t.cRLSign&&(s|=2,r=1),t.encipherOnly&&(s|=1,r=0),t.decipherOnly&&(u|=128,r=7);var l=String.fromCharCode(r);0!==u?l+=String.fromCharCode(s)+String.fromCharCode(u):0!==s&&(l+=String.fromCharCode(s)),t.value=o.create(o.Class.UNIVERSAL,o.Type.BITSTRING,!1,l)}else if("basicConstraints"===t.name)t.value=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[]),t.cA&&t.value.value.push(o.create(o.Class.UNIVERSAL,o.Type.BOOLEAN,!1,String.fromCharCode(255))),"pathLenConstraint"in t&&t.value.value.push(o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,o.integerToDer(t.pathLenConstraint).getBytes()));else if("extKeyUsage"===t.name){t.value=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[]);var c=t.value.value;for(var f in t)!0===t[f]&&(f in a?c.push(o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(a[f]).getBytes())):-1!==f.indexOf(".")&&c.push(o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(f).getBytes())))}else if("nsCertType"===t.name)r=0,s=0,t.client&&(s|=128,r=7),t.server&&(s|=64,r=6),t.email&&(s|=32,r=5),t.objsign&&(s|=16,r=4),t.reserved&&(s|=8,r=3),t.sslCA&&(s|=4,r=2),t.emailCA&&(s|=2,r=1),t.objCA&&(s|=1,r=0),l=String.fromCharCode(r),0!==s&&(l+=String.fromCharCode(s)),t.value=o.create(o.Class.UNIVERSAL,o.Type.BITSTRING,!1,l);else if("subjectAltName"===t.name||"issuerAltName"===t.name){t.value=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[]);for(var h=0;h<t.altNames.length;++h){if(l=(g=t.altNames[h]).value,7===g.type&&g.ip){if(null===(l=n.util.bytesFromIP(g.ip)))throw(S=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.')).extension=t,S}else 8===g.type&&(l=g.oid?o.oidToDer(o.oidToDer(g.oid)):o.oidToDer(l));t.value.value.push(o.create(o.Class.CONTEXT_SPECIFIC,g.type,!1,l))}}else if("nsComment"===t.name&&e.cert){if(!/^[\x00-\x7F]*$/.test(t.comment)||t.comment.length<1||t.comment.length>128)throw new Error('Invalid "nsComment" content.');t.value=o.create(o.Class.UNIVERSAL,o.Type.IA5STRING,!1,t.comment)}else if("subjectKeyIdentifier"===t.name&&e.cert){var p=e.cert.generateSubjectKeyIdentifier();t.subjectKeyIdentifier=p.toHex(),t.value=o.create(o.Class.UNIVERSAL,o.Type.OCTETSTRING,!1,p.getBytes())}else if("authorityKeyIdentifier"===t.name&&e.cert){if(t.value=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[]),c=t.value.value,t.keyIdentifier){var d=!0===t.keyIdentifier?e.cert.generateSubjectKeyIdentifier().getBytes():t.keyIdentifier;c.push(o.create(o.Class.CONTEXT_SPECIFIC,0,!1,d))}if(t.authorityCertIssuer){var y=[o.create(o.Class.CONTEXT_SPECIFIC,4,!0,[m(!0===t.authorityCertIssuer?e.cert.issuer:t.authorityCertIssuer)])];c.push(o.create(o.Class.CONTEXT_SPECIFIC,1,!0,y))}if(t.serialNumber){var v=n.util.hexToBytes(!0===t.serialNumber?e.cert.serialNumber:t.serialNumber);c.push(o.create(o.Class.CONTEXT_SPECIFIC,2,!1,v))}}else if("cRLDistributionPoints"===t.name){t.value=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[]),c=t.value.value;var g,b=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[]),w=o.create(o.Class.CONTEXT_SPECIFIC,0,!0,[]);for(h=0;h<t.altNames.length;++h){if(l=(g=t.altNames[h]).value,7===g.type&&g.ip){if(null===(l=n.util.bytesFromIP(g.ip)))throw(S=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.')).extension=t,S}else 8===g.type&&(l=g.oid?o.oidToDer(o.oidToDer(g.oid)):o.oidToDer(l));w.value.push(o.create(o.Class.CONTEXT_SPECIFIC,g.type,!1,l))}b.value.push(o.create(o.Class.CONTEXT_SPECIFIC,0,!0,[w])),c.push(b)}var S;if(void 0===t.value)throw(S=new Error("Extension value not specified.")).extension=t,S;return t}function S(t,e){switch(t){case a["RSASSA-PSS"]:var r=[];return void 0!==e.hash.algorithmOid&&r.push(o.create(o.Class.CONTEXT_SPECIFIC,0,!0,[o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(e.hash.algorithmOid).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.NULL,!1,"")])])),void 0!==e.mgf.algorithmOid&&r.push(o.create(o.Class.CONTEXT_SPECIFIC,1,!0,[o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(e.mgf.algorithmOid).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(e.mgf.hash.algorithmOid).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.NULL,!1,"")])])])),void 0!==e.saltLength&&r.push(o.create(o.Class.CONTEXT_SPECIFIC,2,!0,[o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,o.integerToDer(e.saltLength).getBytes())])),o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,r);default:return o.create(o.Class.UNIVERSAL,o.Type.NULL,!1,"")}}i.certificateFromPem=function(t,e,r){var a=n.pem.decode(t)[0];if("CERTIFICATE"!==a.type&&"X509 CERTIFICATE"!==a.type&&"TRUSTED CERTIFICATE"!==a.type){var s=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw s.headerType=a.type,s}if(a.procType&&"ENCRYPTED"===a.procType.type)throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var u=o.fromDer(a.body,r);return i.certificateFromAsn1(u,e)},i.certificateToPem=function(t,e){var r={type:"CERTIFICATE",body:o.toDer(i.certificateToAsn1(t)).getBytes()};return n.pem.encode(r,{maxline:e})},i.publicKeyFromPem=function(t){var e=n.pem.decode(t)[0];if("PUBLIC KEY"!==e.type&&"RSA PUBLIC KEY"!==e.type){var r=new Error('Could not convert public key from PEM; PEM header type is not "PUBLIC KEY" or "RSA PUBLIC KEY".');throw r.headerType=e.type,r}if(e.procType&&"ENCRYPTED"===e.procType.type)throw new Error("Could not convert public key from PEM; PEM is encrypted.");var a=o.fromDer(e.body);return i.publicKeyFromAsn1(a)},i.publicKeyToPem=function(t,e){var r={type:"PUBLIC KEY",body:o.toDer(i.publicKeyToAsn1(t)).getBytes()};return n.pem.encode(r,{maxline:e})},i.publicKeyToRSAPublicKeyPem=function(t,e){var r={type:"RSA PUBLIC KEY",body:o.toDer(i.publicKeyToRSAPublicKey(t)).getBytes()};return n.pem.encode(r,{maxline:e})},i.getPublicKeyFingerprint=function(t,e){var r,a=(e=e||{}).md||n.md.sha1.create();switch(e.type||"RSAPublicKey"){case"RSAPublicKey":r=o.toDer(i.publicKeyToRSAPublicKey(t)).getBytes();break;case"SubjectPublicKeyInfo":r=o.toDer(i.publicKeyToAsn1(t)).getBytes();break;default:throw new Error('Unknown fingerprint type "'+e.type+'".')}a.start(),a.update(r);var s=a.digest();if("hex"===e.encoding){var u=s.toHex();return e.delimiter?u.match(/.{2}/g).join(e.delimiter):u}if("binary"===e.encoding)return s.getBytes();if(e.encoding)throw new Error('Unknown encoding "'+e.encoding+'".');return s},i.certificationRequestFromPem=function(t,e,r){var a=n.pem.decode(t)[0];if("CERTIFICATE REQUEST"!==a.type){var s=new Error('Could not convert certification request from PEM; PEM header type is not "CERTIFICATE REQUEST".');throw s.headerType=a.type,s}if(a.procType&&"ENCRYPTED"===a.procType.type)throw new Error("Could not convert certification request from PEM; PEM is encrypted.");var u=o.fromDer(a.body,r);return i.certificationRequestFromAsn1(u,e)},i.certificationRequestToPem=function(t,e){var r={type:"CERTIFICATE REQUEST",body:o.toDer(i.certificationRequestToAsn1(t)).getBytes()};return n.pem.encode(r,{maxline:e})},i.createCertificate=function(){var t={version:2,serialNumber:"00",signatureOid:null,signature:null,siginfo:{}};return t.siginfo.algorithmOid=null,t.validity={},t.validity.notBefore=new Date,t.validity.notAfter=new Date,t.issuer={},t.issuer.getField=function(e){return d(t.issuer,e)},t.issuer.addField=function(e){b([e]),t.issuer.attributes.push(e)},t.issuer.attributes=[],t.issuer.hash=null,t.subject={},t.subject.getField=function(e){return d(t.subject,e)},t.subject.addField=function(e){b([e]),t.subject.attributes.push(e)},t.subject.attributes=[],t.subject.hash=null,t.extensions=[],t.publicKey=null,t.md=null,t.setSubject=function(e,r){b(e),t.subject.attributes=e,delete t.subject.uniqueId,r&&(t.subject.uniqueId=r),t.subject.hash=null},t.setIssuer=function(e,r){b(e),t.issuer.attributes=e,delete t.issuer.uniqueId,r&&(t.issuer.uniqueId=r),t.issuer.hash=null},t.setExtensions=function(e){for(var r=0;r<e.length;++r)w(e[r],{cert:t});t.extensions=e},t.getExtension=function(e){"string"==typeof e&&(e={name:e});for(var r,n=null,o=0;null===n&&o<t.extensions.length;++o)r=t.extensions[o],(e.id&&r.id===e.id||e.name&&r.name===e.name)&&(n=r);return n},t.sign=function(e,r){t.md=r||n.md.sha1.create();var s=a[t.md.algorithm+"WithRSAEncryption"];if(!s){var u=new Error("Could not compute certificate digest. Unknown message digest algorithm OID.");throw u.algorithm=t.md.algorithm,u}t.signatureOid=t.siginfo.algorithmOid=s,t.tbsCertificate=i.getTBSCertificate(t);var l=o.toDer(t.tbsCertificate);t.md.update(l.getBytes()),t.signature=e.sign(t.md)},t.verify=function(e){var r=!1;if(!t.issued(e)){var n=e.issuer,a=t.subject,s=new Error("The parent certificate did not issue the given child certificate; the child certificate's issuer does not match the parent's subject.");throw s.expectedIssuer=a.attributes,s.actualIssuer=n.attributes,s}var u=e.md;if(null===u){u=v({signatureOid:e.signatureOid,type:"certificate"});var l=e.tbsCertificate||i.getTBSCertificate(e),c=o.toDer(l);u.update(c.getBytes())}return null!==u&&(r=g({certificate:t,md:u,signature:e.signature})),r},t.isIssuer=function(e){var r=!1,n=t.issuer,o=e.subject;if(n.hash&&o.hash)r=n.hash===o.hash;else if(n.attributes.length===o.attributes.length){var i,a;r=!0;for(var s=0;r&&s<n.attributes.length;++s)i=n.attributes[s],a=o.attributes[s],i.type===a.type&&i.value===a.value||(r=!1)}return r},t.issued=function(e){return e.isIssuer(t)},t.generateSubjectKeyIdentifier=function(){return i.getPublicKeyFingerprint(t.publicKey,{type:"RSAPublicKey"})},t.verifySubjectKeyIdentifier=function(){for(var e=a.subjectKeyIdentifier,r=0;r<t.extensions.length;++r){var o=t.extensions[r];if(o.id===e){var i=t.generateSubjectKeyIdentifier().getBytes();return n.util.hexToBytes(o.subjectKeyIdentifier)===i}}return!1},t},i.certificateFromAsn1=function(t,e){var r={},a=[];if(!o.validate(t,c,r,a)){var s=new Error("Cannot read X.509 certificate. ASN.1 object is not an X509v3 Certificate.");throw s.errors=a,s}if(o.derToOid(r.publicKeyOid)!==i.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var u=i.createCertificate();u.version=r.certVersion?r.certVersion.charCodeAt(0):0;var l=n.util.createBuffer(r.certSerialNumber);u.serialNumber=l.toHex(),u.signatureOid=n.asn1.derToOid(r.certSignatureOid),u.signatureParameters=y(u.signatureOid,r.certSignatureParams,!0),u.siginfo.algorithmOid=n.asn1.derToOid(r.certinfoSignatureOid),u.siginfo.parameters=y(u.siginfo.algorithmOid,r.certinfoSignatureParams,!1),u.signature=r.certSignature;var f=[];if(void 0!==r.certValidity1UTCTime&&f.push(o.utcTimeToDate(r.certValidity1UTCTime)),void 0!==r.certValidity2GeneralizedTime&&f.push(o.generalizedTimeToDate(r.certValidity2GeneralizedTime)),void 0!==r.certValidity3UTCTime&&f.push(o.utcTimeToDate(r.certValidity3UTCTime)),void 0!==r.certValidity4GeneralizedTime&&f.push(o.generalizedTimeToDate(r.certValidity4GeneralizedTime)),f.length>2)throw new Error("Cannot read notBefore/notAfter validity times; more than two times were provided in the certificate.");if(f.length<2)throw new Error("Cannot read notBefore/notAfter validity times; they were not provided as either UTCTime or GeneralizedTime.");if(u.validity.notBefore=f[0],u.validity.notAfter=f[1],u.tbsCertificate=r.tbsCertificate,e){u.md=v({signatureOid:u.signatureOid,type:"certificate"});var h=o.toDer(u.tbsCertificate);u.md.update(h.getBytes())}var p=n.md.sha1.create(),g=o.toDer(r.certIssuer);p.update(g.getBytes()),u.issuer.getField=function(t){return d(u.issuer,t)},u.issuer.addField=function(t){b([t]),u.issuer.attributes.push(t)},u.issuer.attributes=i.RDNAttributesAsArray(r.certIssuer),r.certIssuerUniqueId&&(u.issuer.uniqueId=r.certIssuerUniqueId),u.issuer.hash=p.digest().toHex();var m=n.md.sha1.create(),w=o.toDer(r.certSubject);return m.update(w.getBytes()),u.subject.getField=function(t){return d(u.subject,t)},u.subject.addField=function(t){b([t]),u.subject.attributes.push(t)},u.subject.attributes=i.RDNAttributesAsArray(r.certSubject),r.certSubjectUniqueId&&(u.subject.uniqueId=r.certSubjectUniqueId),u.subject.hash=m.digest().toHex(),r.certExtensions?u.extensions=i.certificateExtensionsFromAsn1(r.certExtensions):u.extensions=[],u.publicKey=i.publicKeyFromAsn1(r.subjectPublicKeyInfo),u},i.certificateExtensionsFromAsn1=function(t){for(var e=[],r=0;r<t.value.length;++r)for(var n=t.value[r],o=0;o<n.value.length;++o)e.push(i.certificateExtensionFromAsn1(n.value[o]));return e},i.certificateExtensionFromAsn1=function(t){var e={};if(e.id=o.derToOid(t.value[0].value),e.critical=!1,t.value[1].type===o.Type.BOOLEAN?(e.critical=0!==t.value[1].value.charCodeAt(0),e.value=t.value[2].value):e.value=t.value[1].value,e.id in a)if(e.name=a[e.id],"keyUsage"===e.name){var r=0,i=0;(u=o.fromDer(e.value)).value.length>1&&(r=u.value.charCodeAt(1),i=u.value.length>2?u.value.charCodeAt(2):0),e.digitalSignature=128==(128&r),e.nonRepudiation=64==(64&r),e.keyEncipherment=32==(32&r),e.dataEncipherment=16==(16&r),e.keyAgreement=8==(8&r),e.keyCertSign=4==(4&r),e.cRLSign=2==(2&r),e.encipherOnly=1==(1&r),e.decipherOnly=128==(128&i)}else if("basicConstraints"===e.name){(u=o.fromDer(e.value)).value.length>0&&u.value[0].type===o.Type.BOOLEAN?e.cA=0!==u.value[0].value.charCodeAt(0):e.cA=!1;var s=null;u.value.length>0&&u.value[0].type===o.Type.INTEGER?s=u.value[0].value:u.value.length>1&&(s=u.value[1].value),null!==s&&(e.pathLenConstraint=o.derToInteger(s))}else if("extKeyUsage"===e.name)for(var u=o.fromDer(e.value),l=0;l<u.value.length;++l){var c=o.derToOid(u.value[l].value);c in a?e[a[c]]=!0:e[c]=!0}else if("nsCertType"===e.name)r=0,(u=o.fromDer(e.value)).value.length>1&&(r=u.value.charCodeAt(1)),e.client=128==(128&r),e.server=64==(64&r),e.email=32==(32&r),e.objsign=16==(16&r),e.reserved=8==(8&r),e.sslCA=4==(4&r),e.emailCA=2==(2&r),e.objCA=1==(1&r);else if("subjectAltName"===e.name||"issuerAltName"===e.name){var f;e.altNames=[],u=o.fromDer(e.value);for(var h=0;h<u.value.length;++h){var p={type:(f=u.value[h]).type,value:f.value};switch(e.altNames.push(p),f.type){case 1:case 2:case 6:break;case 7:p.ip=n.util.bytesToIP(f.value);break;case 8:p.oid=o.derToOid(f.value)}}}else"subjectKeyIdentifier"===e.name&&(u=o.fromDer(e.value),e.subjectKeyIdentifier=n.util.bytesToHex(u.value));return e},i.certificationRequestFromAsn1=function(t,e){var r={},a=[];if(!o.validate(t,p,r,a)){var s=new Error("Cannot read PKCS#10 certificate request. ASN.1 object is not a PKCS#10 CertificationRequest.");throw s.errors=a,s}if(o.derToOid(r.publicKeyOid)!==i.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var u=i.createCertificationRequest();if(u.version=r.csrVersion?r.csrVersion.charCodeAt(0):0,u.signatureOid=n.asn1.derToOid(r.csrSignatureOid),u.signatureParameters=y(u.signatureOid,r.csrSignatureParams,!0),u.siginfo.algorithmOid=n.asn1.derToOid(r.csrSignatureOid),u.siginfo.parameters=y(u.siginfo.algorithmOid,r.csrSignatureParams,!1),u.signature=r.csrSignature,u.certificationRequestInfo=r.certificationRequestInfo,e){u.md=v({signatureOid:u.signatureOid,type:"certification request"});var l=o.toDer(u.certificationRequestInfo);u.md.update(l.getBytes())}var c=n.md.sha1.create();return u.subject.getField=function(t){return d(u.subject,t)},u.subject.addField=function(t){b([t]),u.subject.attributes.push(t)},u.subject.attributes=i.RDNAttributesAsArray(r.certificationRequestInfoSubject,c),u.subject.hash=c.digest().toHex(),u.publicKey=i.publicKeyFromAsn1(r.subjectPublicKeyInfo),u.getAttribute=function(t){return d(u,t)},u.addAttribute=function(t){b([t]),u.attributes.push(t)},u.attributes=i.CRIAttributesAsArray(r.certificationRequestInfoAttributes||[]),u},i.createCertificationRequest=function(){var t={version:0,signatureOid:null,signature:null,siginfo:{}};return t.siginfo.algorithmOid=null,t.subject={},t.subject.getField=function(e){return d(t.subject,e)},t.subject.addField=function(e){b([e]),t.subject.attributes.push(e)},t.subject.attributes=[],t.subject.hash=null,t.publicKey=null,t.attributes=[],t.getAttribute=function(e){return d(t,e)},t.addAttribute=function(e){b([e]),t.attributes.push(e)},t.md=null,t.setSubject=function(e){b(e),t.subject.attributes=e,t.subject.hash=null},t.setAttributes=function(e){b(e),t.attributes=e},t.sign=function(e,r){t.md=r||n.md.sha1.create();var s=a[t.md.algorithm+"WithRSAEncryption"];if(!s){var u=new Error("Could not compute certification request digest. Unknown message digest algorithm OID.");throw u.algorithm=t.md.algorithm,u}t.signatureOid=t.siginfo.algorithmOid=s,t.certificationRequestInfo=i.getCertificationRequestInfo(t);var l=o.toDer(t.certificationRequestInfo);t.md.update(l.getBytes()),t.signature=e.sign(t.md)},t.verify=function(){var e=!1,r=t.md;if(null===r){r=v({signatureOid:t.signatureOid,type:"certification request"});var n=t.certificationRequestInfo||i.getCertificationRequestInfo(t),a=o.toDer(n);r.update(a.getBytes())}return null!==r&&(e=g({certificate:t,md:r,signature:t.signature})),e},t};var x=new Date("1950-01-01T00:00:00Z"),_=new Date("2050-01-01T00:00:00Z");function E(t){return t>=x&&t<_?o.create(o.Class.UNIVERSAL,o.Type.UTCTIME,!1,o.dateToUtcTime(t)):o.create(o.Class.UNIVERSAL,o.Type.GENERALIZEDTIME,!1,o.dateToGeneralizedTime(t))}i.getTBSCertificate=function(t){var e=E(t.validity.notBefore),r=E(t.validity.notAfter),a=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.CONTEXT_SPECIFIC,0,!0,[o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,o.integerToDer(t.version).getBytes())]),o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,n.util.hexToBytes(t.serialNumber)),o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(t.siginfo.algorithmOid).getBytes()),S(t.siginfo.algorithmOid,t.siginfo.parameters)]),m(t.issuer),o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[e,r]),m(t.subject),i.publicKeyToAsn1(t.publicKey)]);return t.issuer.uniqueId&&a.value.push(o.create(o.Class.CONTEXT_SPECIFIC,1,!0,[o.create(o.Class.UNIVERSAL,o.Type.BITSTRING,!1,String.fromCharCode(0)+t.issuer.uniqueId)])),t.subject.uniqueId&&a.value.push(o.create(o.Class.CONTEXT_SPECIFIC,2,!0,[o.create(o.Class.UNIVERSAL,o.Type.BITSTRING,!1,String.fromCharCode(0)+t.subject.uniqueId)])),t.extensions.length>0&&a.value.push(i.certificateExtensionsToAsn1(t.extensions)),a},i.getCertificationRequestInfo=function(t){return o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,o.integerToDer(t.version).getBytes()),m(t.subject),i.publicKeyToAsn1(t.publicKey),function(t){var e=o.create(o.Class.CONTEXT_SPECIFIC,0,!0,[]);if(0===t.attributes.length)return e;for(var r=t.attributes,i=0;i<r.length;++i){var a=r[i],s=a.value,u=o.Type.UTF8;"valueTagClass"in a&&(u=a.valueTagClass),u===o.Type.UTF8&&(s=n.util.encodeUtf8(s));var l=!1;"valueConstructed"in a&&(l=a.valueConstructed);var c=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(a.type).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.SET,!0,[o.create(o.Class.UNIVERSAL,u,l,s)])]);e.value.push(c)}return e}(t)])},i.distinguishedNameToAsn1=function(t){return m(t)},i.certificateToAsn1=function(t){var e=t.tbsCertificate||i.getTBSCertificate(t);return o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[e,o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(t.signatureOid).getBytes()),S(t.signatureOid,t.signatureParameters)]),o.create(o.Class.UNIVERSAL,o.Type.BITSTRING,!1,String.fromCharCode(0)+t.signature)])},i.certificateExtensionsToAsn1=function(t){var e=o.create(o.Class.CONTEXT_SPECIFIC,3,!0,[]),r=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[]);e.value.push(r);for(var n=0;n<t.length;++n)r.value.push(i.certificateExtensionToAsn1(t[n]));return e},i.certificateExtensionToAsn1=function(t){var e=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[]);e.value.push(o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(t.id).getBytes())),t.critical&&e.value.push(o.create(o.Class.UNIVERSAL,o.Type.BOOLEAN,!1,String.fromCharCode(255)));var r=t.value;return"string"!=typeof t.value&&(r=o.toDer(r).getBytes()),e.value.push(o.create(o.Class.UNIVERSAL,o.Type.OCTETSTRING,!1,r)),e},i.certificationRequestToAsn1=function(t){var e=t.certificationRequestInfo||i.getCertificationRequestInfo(t);return o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[e,o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(t.signatureOid).getBytes()),S(t.signatureOid,t.signatureParameters)]),o.create(o.Class.UNIVERSAL,o.Type.BITSTRING,!1,String.fromCharCode(0)+t.signature)])},i.createCaStore=function(t){var e={certs:{}};function r(t){return a(t),e.certs[t.hash]||null}function a(t){if(!t.hash){var e=n.md.sha1.create();t.attributes=i.RDNAttributesAsArray(m(t),e),t.hash=e.digest().toHex()}}if(e.getIssuer=function(t){return r(t.issuer)},e.addCertificate=function(t){if("string"==typeof t&&(t=n.pki.certificateFromPem(t)),a(t.subject),!e.hasCertificate(t))if(t.subject.hash in e.certs){var r=e.certs[t.subject.hash];n.util.isArray(r)||(r=[r]),r.push(t),e.certs[t.subject.hash]=r}else e.certs[t.subject.hash]=t},e.hasCertificate=function(t){"string"==typeof t&&(t=n.pki.certificateFromPem(t));var e=r(t.subject);if(!e)return!1;n.util.isArray(e)||(e=[e]);for(var a=o.toDer(i.certificateToAsn1(t)).getBytes(),s=0;s<e.length;++s)if(a===o.toDer(i.certificateToAsn1(e[s])).getBytes())return!0;return!1},e.listAllCertificates=function(){var t=[];for(var r in e.certs)if(e.certs.hasOwnProperty(r)){var o=e.certs[r];if(n.util.isArray(o))for(var i=0;i<o.length;++i)t.push(o[i]);else t.push(o)}return t},e.removeCertificate=function(t){var s;if("string"==typeof t&&(t=n.pki.certificateFromPem(t)),a(t.subject),!e.hasCertificate(t))return null;var u=r(t.subject);if(!n.util.isArray(u))return s=e.certs[t.subject.hash],delete e.certs[t.subject.hash],s;for(var l=o.toDer(i.certificateToAsn1(t)).getBytes(),c=0;c<u.length;++c)l===o.toDer(i.certificateToAsn1(u[c])).getBytes()&&(s=u[c],u.splice(c,1));return 0===u.length&&delete e.certs[t.subject.hash],s},t)for(var s=0;s<t.length;++s){var u=t[s];e.addCertificate(u)}return e},i.certificateError={bad_certificate:"forge.pki.BadCertificate",unsupported_certificate:"forge.pki.UnsupportedCertificate",certificate_revoked:"forge.pki.CertificateRevoked",certificate_expired:"forge.pki.CertificateExpired",certificate_unknown:"forge.pki.CertificateUnknown",unknown_ca:"forge.pki.UnknownCertificateAuthority"},i.verifyCertificateChain=function(t,e,r){"function"==typeof r&&(r={verify:r}),r=r||{};var o=(e=e.slice(0)).slice(0),a=r.validityCheckDate;void 0===a&&(a=new Date);var u=!0,l=null,c=0;do{var f=e.shift(),h=null,p=!1;if(a&&(a<f.validity.notBefore||a>f.validity.notAfter)&&(l={message:"Certificate is not valid yet or has expired.",error:i.certificateError.certificate_expired,notBefore:f.validity.notBefore,notAfter:f.validity.notAfter,now:a}),null===l){if(null===(h=e[0]||t.getIssuer(f))&&f.isIssuer(f)&&(p=!0,h=f),h){var d=h;n.util.isArray(d)||(d=[d]);for(var y=!1;!y&&d.length>0;){h=d.shift();try{y=h.verify(f)}catch(t){}}y||(l={message:"Certificate signature is invalid.",error:i.certificateError.bad_certificate})}null!==l||h&&!p||t.hasCertificate(f)||(l={message:"Certificate is not trusted.",error:i.certificateError.unknown_ca})}if(null===l&&h&&!f.isIssuer(h)&&(l={message:"Certificate issuer is invalid.",error:i.certificateError.bad_certificate}),null===l)for(var v={keyUsage:!0,basicConstraints:!0},g=0;null===l&&g<f.extensions.length;++g){var m=f.extensions[g];m.critical&&!(m.name in v)&&(l={message:"Certificate has an unsupported critical extension.",error:i.certificateError.unsupported_certificate})}if(null===l&&(!u||0===e.length&&(!h||p))){var b=f.getExtension("basicConstraints"),w=f.getExtension("keyUsage");null!==w&&(w.keyCertSign&&null!==b||(l={message:"Certificate keyUsage or basicConstraints conflict or indicate that the certificate is not a CA. If the certificate is the only one in the chain or isn't the first then the certificate must be a valid CA.",error:i.certificateError.bad_certificate})),null!==l||null===b||b.cA||(l={message:"Certificate basicConstraints indicates the certificate is not a CA.",error:i.certificateError.bad_certificate}),null===l&&null!==w&&"pathLenConstraint"in b&&c-1>b.pathLenConstraint&&(l={message:"Certificate basicConstraints pathLenConstraint violated.",error:i.certificateError.bad_certificate})}var S=null===l||l.error,x=r.verify?r.verify(S,c,o):S;if(!0!==x)throw!0===S&&(l={message:"The application rejected the certificate.",error:i.certificateError.bad_certificate}),(x||0===x)&&("object"!=s(x)||n.util.isArray(x)?"string"==typeof x&&(l.error=x):(x.message&&(l.message=x.message),x.error&&(l.error=x.error))),l;l=null,u=!1,++c}while(e.length>0);return!0}},function(t,e,r){var n=r(0);r(2),r(1),(t.exports=n.pss=n.pss||{}).create=function(t){3===arguments.length&&(t={md:arguments[0],mgf:arguments[1],saltLength:arguments[2]});var e,r=t.md,o=t.mgf,i=r.digestLength,a=t.salt||null;if("string"==typeof a&&(a=n.util.createBuffer(a)),"saltLength"in t)e=t.saltLength;else{if(null===a)throw new Error("Salt length not specified or specific salt not given.");e=a.length()}if(null!==a&&a.length()!==e)throw new Error("Given salt length does not match length of given salt.");var s=t.prng||n.random;return{encode:function(t,u){var l,c,f=u-1,h=Math.ceil(f/8),p=t.digest().getBytes();if(h<i+e+2)throw new Error("Message is too long to encrypt.");c=null===a?s.getBytesSync(e):a.bytes();var d=new n.util.ByteBuffer;d.fillWithByte(0,8),d.putBytes(p),d.putBytes(c),r.start(),r.update(d.getBytes());var y=r.digest().getBytes(),v=new n.util.ByteBuffer;v.fillWithByte(0,h-e-i-2),v.putByte(1),v.putBytes(c);var g=v.getBytes(),m=h-i-1,b=o.generate(y,m),w="";for(l=0;l<m;l++)w+=String.fromCharCode(g.charCodeAt(l)^b.charCodeAt(l));var S=65280>>8*h-f&255;return(w=String.fromCharCode(w.charCodeAt(0)&~S)+w.substr(1))+y+String.fromCharCode(188)},verify:function(t,a,s){var u,l=s-1,c=Math.ceil(l/8);if(a=a.substr(-c),c<i+e+2)throw new Error("Inconsistent parameters to PSS signature verification.");if(188!==a.charCodeAt(c-1))throw new Error("Encoded message does not end in 0xBC.");var f=c-i-1,h=a.substr(0,f),p=a.substr(f,i),d=65280>>8*c-l&255;if(0!=(h.charCodeAt(0)&d))throw new Error("Bits beyond keysize not zero as expected.");var y=o.generate(p,f),v="";for(u=0;u<f;u++)v+=String.fromCharCode(h.charCodeAt(u)^y.charCodeAt(u));v=String.fromCharCode(v.charCodeAt(0)&~d)+v.substr(1);var g=c-i-e-2;for(u=0;u<g;u++)if(0!==v.charCodeAt(u))throw new Error("Leftmost octets not zero as expected");if(1!==v.charCodeAt(g))throw new Error("Inconsistent PSS signature, 0x01 marker not found");var m=v.substr(-e),b=new n.util.ByteBuffer;return b.fillWithByte(0,8),b.putBytes(t),b.putBytes(m),r.start(),r.update(b.getBytes()),p===r.digest().getBytes()}}}},function(t,e,r){var n=r(0);r(1),n.cipher=n.cipher||{};var o=t.exports=n.cipher.modes=n.cipher.modes||{};function i(t,e){if("string"==typeof t&&(t=n.util.createBuffer(t)),n.util.isArray(t)&&t.length>4){var r=t;t=n.util.createBuffer();for(var o=0;o<r.length;++o)t.putByte(r[o])}if(t.length()<e)throw new Error("Invalid IV length; got "+t.length()+" bytes and expected "+e+" bytes.");if(!n.util.isArray(t)){var i=[],a=e/4;for(o=0;o<a;++o)i.push(t.getInt32());t=i}return t}function a(t){t[t.length-1]=t[t.length-1]+1&4294967295}function s(t){return[t/4294967296|0,4294967295&t]}o.ecb=function(t){t=t||{},this.name="ECB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)},o.ecb.prototype.start=function(t){},o.ecb.prototype.encrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32();for(this.cipher.encrypt(this._inBlock,this._outBlock),n=0;n<this._ints;++n)e.putInt32(this._outBlock[n])},o.ecb.prototype.decrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32();for(this.cipher.decrypt(this._inBlock,this._outBlock),n=0;n<this._ints;++n)e.putInt32(this._outBlock[n])},o.ecb.prototype.pad=function(t,e){var r=t.length()===this.blockSize?this.blockSize:this.blockSize-t.length();return t.fillWithByte(r,r),!0},o.ecb.prototype.unpad=function(t,e){if(e.overflow>0)return!1;var r=t.length(),n=t.at(r-1);return!(n>this.blockSize<<2||(t.truncate(n),0))},o.cbc=function(t){t=t||{},this.name="CBC",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)},o.cbc.prototype.start=function(t){if(null===t.iv){if(!this._prev)throw new Error("Invalid IV parameter.");this._iv=this._prev.slice(0)}else{if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=i(t.iv,this.blockSize),this._prev=this._iv.slice(0)}},o.cbc.prototype.encrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=this._prev[n]^t.getInt32();for(this.cipher.encrypt(this._inBlock,this._outBlock),n=0;n<this._ints;++n)e.putInt32(this._outBlock[n]);this._prev=this._outBlock},o.cbc.prototype.decrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32();for(this.cipher.decrypt(this._inBlock,this._outBlock),n=0;n<this._ints;++n)e.putInt32(this._prev[n]^this._outBlock[n]);this._prev=this._inBlock.slice(0)},o.cbc.prototype.pad=function(t,e){var r=t.length()===this.blockSize?this.blockSize:this.blockSize-t.length();return t.fillWithByte(r,r),!0},o.cbc.prototype.unpad=function(t,e){if(e.overflow>0)return!1;var r=t.length(),n=t.at(r-1);return!(n>this.blockSize<<2||(t.truncate(n),0))},o.cfb=function(t){t=t||{},this.name="CFB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialBlock=new Array(this._ints),this._partialOutput=n.util.createBuffer(),this._partialBytes=0},o.cfb.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=i(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0},o.cfb.prototype.encrypt=function(t,e,r){var n=t.length();if(0===n)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&n>=this.blockSize)for(var o=0;o<this._ints;++o)this._inBlock[o]=t.getInt32()^this._outBlock[o],e.putInt32(this._inBlock[o]);else{var i=(this.blockSize-n)%this.blockSize;for(i>0&&(i=this.blockSize-i),this._partialOutput.clear(),o=0;o<this._ints;++o)this._partialBlock[o]=t.getInt32()^this._outBlock[o],this._partialOutput.putInt32(this._partialBlock[o]);if(i>0)t.read-=this.blockSize;else for(o=0;o<this._ints;++o)this._inBlock[o]=this._partialBlock[o];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),i>0&&!r)return e.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=i,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}},o.cfb.prototype.decrypt=function(t,e,r){var n=t.length();if(0===n)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&n>=this.blockSize)for(var o=0;o<this._ints;++o)this._inBlock[o]=t.getInt32(),e.putInt32(this._inBlock[o]^this._outBlock[o]);else{var i=(this.blockSize-n)%this.blockSize;for(i>0&&(i=this.blockSize-i),this._partialOutput.clear(),o=0;o<this._ints;++o)this._partialBlock[o]=t.getInt32(),this._partialOutput.putInt32(this._partialBlock[o]^this._outBlock[o]);if(i>0)t.read-=this.blockSize;else for(o=0;o<this._ints;++o)this._inBlock[o]=this._partialBlock[o];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),i>0&&!r)return e.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=i,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}},o.ofb=function(t){t=t||{},this.name="OFB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=n.util.createBuffer(),this._partialBytes=0},o.ofb.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=i(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0},o.ofb.prototype.encrypt=function(t,e,r){var n=t.length();if(0===t.length())return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&n>=this.blockSize)for(var o=0;o<this._ints;++o)e.putInt32(t.getInt32()^this._outBlock[o]),this._inBlock[o]=this._outBlock[o];else{var i=(this.blockSize-n)%this.blockSize;for(i>0&&(i=this.blockSize-i),this._partialOutput.clear(),o=0;o<this._ints;++o)this._partialOutput.putInt32(t.getInt32()^this._outBlock[o]);if(i>0)t.read-=this.blockSize;else for(o=0;o<this._ints;++o)this._inBlock[o]=this._outBlock[o];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),i>0&&!r)return e.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=i,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}},o.ofb.prototype.decrypt=o.ofb.prototype.encrypt,o.ctr=function(t){t=t||{},this.name="CTR",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=n.util.createBuffer(),this._partialBytes=0},o.ctr.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=i(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0},o.ctr.prototype.encrypt=function(t,e,r){var n=t.length();if(0===n)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&n>=this.blockSize)for(var o=0;o<this._ints;++o)e.putInt32(t.getInt32()^this._outBlock[o]);else{var i=(this.blockSize-n)%this.blockSize;for(i>0&&(i=this.blockSize-i),this._partialOutput.clear(),o=0;o<this._ints;++o)this._partialOutput.putInt32(t.getInt32()^this._outBlock[o]);if(i>0&&(t.read-=this.blockSize),this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),i>0&&!r)return e.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=i,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}a(this._inBlock)},o.ctr.prototype.decrypt=o.ctr.prototype.encrypt,o.gcm=function(t){t=t||{},this.name="GCM",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints),this._partialOutput=n.util.createBuffer(),this._partialBytes=0,this._R=3774873600},o.gcm.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");var e,r=n.util.createBuffer(t.iv);if(this._cipherLength=0,e="additionalData"in t?n.util.createBuffer(t.additionalData):n.util.createBuffer(),this._tagLength="tagLength"in t?t.tagLength:128,this._tag=null,t.decrypt&&(this._tag=n.util.createBuffer(t.tag).getBytes(),this._tag.length!==this._tagLength/8))throw new Error("Authentication tag does not match tag length.");this._hashBlock=new Array(this._ints),this.tag=null,this._hashSubkey=new Array(this._ints),this.cipher.encrypt([0,0,0,0],this._hashSubkey),this.componentBits=4,this._m=this.generateHashTable(this._hashSubkey,this.componentBits);var o=r.length();if(12===o)this._j0=[r.getInt32(),r.getInt32(),r.getInt32(),1];else{for(this._j0=[0,0,0,0];r.length()>0;)this._j0=this.ghash(this._hashSubkey,this._j0,[r.getInt32(),r.getInt32(),r.getInt32(),r.getInt32()]);this._j0=this.ghash(this._hashSubkey,this._j0,[0,0].concat(s(8*o)))}this._inBlock=this._j0.slice(0),a(this._inBlock),this._partialBytes=0,e=n.util.createBuffer(e),this._aDataLength=s(8*e.length());var i=e.length()%this.blockSize;for(i&&e.fillWithByte(0,this.blockSize-i),this._s=[0,0,0,0];e.length()>0;)this._s=this.ghash(this._hashSubkey,this._s,[e.getInt32(),e.getInt32(),e.getInt32(),e.getInt32()])},o.gcm.prototype.encrypt=function(t,e,r){var n=t.length();if(0===n)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&n>=this.blockSize){for(var o=0;o<this._ints;++o)e.putInt32(this._outBlock[o]^=t.getInt32());this._cipherLength+=this.blockSize}else{var i=(this.blockSize-n)%this.blockSize;for(i>0&&(i=this.blockSize-i),this._partialOutput.clear(),o=0;o<this._ints;++o)this._partialOutput.putInt32(t.getInt32()^this._outBlock[o]);if(i<=0||r){if(r){var s=n%this.blockSize;this._cipherLength+=s,this._partialOutput.truncate(this.blockSize-s)}else this._cipherLength+=this.blockSize;for(o=0;o<this._ints;++o)this._outBlock[o]=this._partialOutput.getInt32();this._partialOutput.read-=this.blockSize}if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),i>0&&!r)return t.read-=this.blockSize,e.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=i,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}this._s=this.ghash(this._hashSubkey,this._s,this._outBlock),a(this._inBlock)},o.gcm.prototype.decrypt=function(t,e,r){var n=t.length();if(n<this.blockSize&&!(r&&n>0))return!0;this.cipher.encrypt(this._inBlock,this._outBlock),a(this._inBlock),this._hashBlock[0]=t.getInt32(),this._hashBlock[1]=t.getInt32(),this._hashBlock[2]=t.getInt32(),this._hashBlock[3]=t.getInt32(),this._s=this.ghash(this._hashSubkey,this._s,this._hashBlock);for(var o=0;o<this._ints;++o)e.putInt32(this._outBlock[o]^this._hashBlock[o]);n<this.blockSize?this._cipherLength+=n%this.blockSize:this._cipherLength+=this.blockSize},o.gcm.prototype.afterFinish=function(t,e){var r=!0;e.decrypt&&e.overflow&&t.truncate(this.blockSize-e.overflow),this.tag=n.util.createBuffer();var o=this._aDataLength.concat(s(8*this._cipherLength));this._s=this.ghash(this._hashSubkey,this._s,o);var i=[];this.cipher.encrypt(this._j0,i);for(var a=0;a<this._ints;++a)this.tag.putInt32(this._s[a]^i[a]);return this.tag.truncate(this.tag.length()%(this._tagLength/8)),e.decrypt&&this.tag.bytes()!==this._tag&&(r=!1),r},o.gcm.prototype.multiply=function(t,e){for(var r=[0,0,0,0],n=e.slice(0),o=0;o<128;++o)t[o/32|0]&1<<31-o%32&&(r[0]^=n[0],r[1]^=n[1],r[2]^=n[2],r[3]^=n[3]),this.pow(n,n);return r},o.gcm.prototype.pow=function(t,e){for(var r=1&t[3],n=3;n>0;--n)e[n]=t[n]>>>1|(1&t[n-1])<<31;e[0]=t[0]>>>1,r&&(e[0]^=this._R)},o.gcm.prototype.tableMultiply=function(t){for(var e=[0,0,0,0],r=0;r<32;++r){var n=t[r/8|0]>>>4*(7-r%8)&15,o=this._m[r][n];e[0]^=o[0],e[1]^=o[1],e[2]^=o[2],e[3]^=o[3]}return e},o.gcm.prototype.ghash=function(t,e,r){return e[0]^=r[0],e[1]^=r[1],e[2]^=r[2],e[3]^=r[3],this.tableMultiply(e)},o.gcm.prototype.generateHashTable=function(t,e){for(var r=8/e,n=4*r,o=16*r,i=new Array(o),a=0;a<o;++a){var s=[0,0,0,0],u=(n-1-a%n)*e;s[a/n|0]=1<<e-1<<u,i[a]=this.generateSubHashTable(this.multiply(s,t),e)}return i},o.gcm.prototype.generateSubHashTable=function(t,e){var r=1<<e,n=r>>>1,o=new Array(r);o[n]=t.slice(0);for(var i=n>>>1;i>0;)this.pow(o[2*i],o[i]=[]),i>>=1;for(i=2;i<n;){for(var a=1;a<i;++a){var s=o[i],u=o[a];o[i+a]=[s[0]^u[0],s[1]^u[1],s[2]^u[2],s[3]^u[3]]}i*=2}for(o[0]=[0,0,0,0],i=n+1;i<r;++i){var l=o[i^n];o[i]=[t[0]^l[0],t[1]^l[1],t[2]^l[2],t[3]^l[3]]}return o}},function(t,e,r){var n=r(0);r(3),r(8),r(14),r(7),r(21),r(2),r(9),r(1);var o=function(t,e,r,o){var i=n.util.createBuffer(),a=t.length>>1,s=a+(1&t.length),u=t.substr(0,s),l=t.substr(a,s),c=n.util.createBuffer(),f=n.hmac.create();r=e+r;var h=Math.ceil(o/16),p=Math.ceil(o/20);f.start("MD5",u);var d=n.util.createBuffer();c.putBytes(r);for(var y=0;y<h;++y)f.start(null,null),f.update(c.getBytes()),c.putBuffer(f.digest()),f.start(null,null),f.update(c.bytes()+r),d.putBuffer(f.digest());f.start("SHA1",l);var v=n.util.createBuffer();for(c.clear(),c.putBytes(r),y=0;y<p;++y)f.start(null,null),f.update(c.getBytes()),c.putBuffer(f.digest()),f.start(null,null),f.update(c.bytes()+r),v.putBuffer(f.digest());return i.putBytes(n.util.xorBytes(d.getBytes(),v.getBytes(),o)),i},i=function(t,e,r){var o=!1;try{var i=t.deflate(e.fragment.getBytes());e.fragment=n.util.createBuffer(i),e.length=i.length,o=!0}catch(t){}return o},a=function(t,e,r){var o=!1;try{var i=t.inflate(e.fragment.getBytes());e.fragment=n.util.createBuffer(i),e.length=i.length,o=!0}catch(t){}return o},u=function(t,e){var r=0;switch(e){case 1:r=t.getByte();break;case 2:r=t.getInt16();break;case 3:r=t.getInt24();break;case 4:r=t.getInt32()}return n.util.createBuffer(t.getBytes(r))},l=function(t,e,r){t.putInt(r.length(),e<<3),t.putBuffer(r)},c={Versions:{TLS_1_0:{major:3,minor:1},TLS_1_1:{major:3,minor:2},TLS_1_2:{major:3,minor:3}}};c.SupportedVersions=[c.Versions.TLS_1_1,c.Versions.TLS_1_0],c.Version=c.SupportedVersions[0],c.MaxFragment=15360,c.ConnectionEnd={server:0,client:1},c.PRFAlgorithm={tls_prf_sha256:0},c.BulkCipherAlgorithm={none:null,rc4:0,des3:1,aes:2},c.CipherType={stream:0,block:1,aead:2},c.MACAlgorithm={none:null,hmac_md5:0,hmac_sha1:1,hmac_sha256:2,hmac_sha384:3,hmac_sha512:4},c.CompressionMethod={none:0,deflate:1},c.ContentType={change_cipher_spec:20,alert:21,handshake:22,application_data:23,heartbeat:24},c.HandshakeType={hello_request:0,client_hello:1,server_hello:2,certificate:11,server_key_exchange:12,certificate_request:13,server_hello_done:14,certificate_verify:15,client_key_exchange:16,finished:20},c.Alert={},c.Alert.Level={warning:1,fatal:2},c.Alert.Description={close_notify:0,unexpected_message:10,bad_record_mac:20,decryption_failed:21,record_overflow:22,decompression_failure:30,handshake_failure:40,bad_certificate:42,unsupported_certificate:43,certificate_revoked:44,certificate_expired:45,certificate_unknown:46,illegal_parameter:47,unknown_ca:48,access_denied:49,decode_error:50,decrypt_error:51,export_restriction:60,protocol_version:70,insufficient_security:71,internal_error:80,user_canceled:90,no_renegotiation:100},c.HeartbeatMessageType={heartbeat_request:1,heartbeat_response:2},c.CipherSuites={},c.getCipherSuite=function(t){var e=null;for(var r in c.CipherSuites){var n=c.CipherSuites[r];if(n.id[0]===t.charCodeAt(0)&&n.id[1]===t.charCodeAt(1)){e=n;break}}return e},c.handleUnexpected=function(t,e){!t.open&&t.entity===c.ConnectionEnd.client||t.error(t,{message:"Unexpected message. Received TLS record out of order.",send:!0,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.unexpected_message}})},c.handleHelloRequest=function(t,e,r){!t.handshaking&&t.handshakes>0&&(c.queue(t,c.createAlert(t,{level:c.Alert.Level.warning,description:c.Alert.Description.no_renegotiation})),c.flush(t)),t.process()},c.parseHelloMessage=function(t,e,r){var o=null,i=t.entity===c.ConnectionEnd.client;if(r<38)t.error(t,{message:i?"Invalid ServerHello message. Message too short.":"Invalid ClientHello message. Message too short.",send:!0,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.illegal_parameter}});else{var a=e.fragment,s=a.length();if(o={version:{major:a.getByte(),minor:a.getByte()},random:n.util.createBuffer(a.getBytes(32)),session_id:u(a,1),extensions:[]},i?(o.cipher_suite=a.getBytes(2),o.compression_method=a.getByte()):(o.cipher_suites=u(a,2),o.compression_methods=u(a,1)),(s=r-(s-a.length()))>0){for(var l=u(a,2);l.length()>0;)o.extensions.push({type:[l.getByte(),l.getByte()],data:u(l,2)});if(!i)for(var f=0;f<o.extensions.length;++f){var h=o.extensions[f];if(0===h.type[0]&&0===h.type[1])for(var p=u(h.data,2);p.length()>0&&0===p.getByte();)t.session.extensions.server_name.serverNameList.push(u(p,2).getBytes())}}if(t.session.version&&(o.version.major!==t.session.version.major||o.version.minor!==t.session.version.minor))return t.error(t,{message:"TLS version change is disallowed during renegotiation.",send:!0,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.protocol_version}});if(i)t.session.cipherSuite=c.getCipherSuite(o.cipher_suite);else for(var d=n.util.createBuffer(o.cipher_suites.bytes());d.length()>0&&(t.session.cipherSuite=c.getCipherSuite(d.getBytes(2)),null===t.session.cipherSuite););if(null===t.session.cipherSuite)return t.error(t,{message:"No cipher suites in common.",send:!0,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.handshake_failure},cipherSuite:n.util.bytesToHex(o.cipher_suite)});t.session.compressionMethod=i?o.compression_method:c.CompressionMethod.none}return o},c.createSecurityParameters=function(t,e){var r=t.entity===c.ConnectionEnd.client,n=e.random.bytes(),o=r?t.session.sp.client_random:n,i=r?n:c.createRandom().getBytes();t.session.sp={entity:t.entity,prf_algorithm:c.PRFAlgorithm.tls_prf_sha256,bulk_cipher_algorithm:null,cipher_type:null,enc_key_length:null,block_length:null,fixed_iv_length:null,record_iv_length:null,mac_algorithm:null,mac_length:null,mac_key_length:null,compression_algorithm:t.session.compressionMethod,pre_master_secret:null,master_secret:null,client_random:o,server_random:i}},c.handleServerHello=function(t,e,r){var n=c.parseHelloMessage(t,e,r);if(!t.fail){if(!(n.version.minor<=t.version.minor))return t.error(t,{message:"Incompatible TLS version.",send:!0,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.protocol_version}});t.version.minor=n.version.minor,t.session.version=t.version;var o=n.session_id.bytes();o.length>0&&o===t.session.id?(t.expect=y,t.session.resuming=!0,t.session.sp.server_random=n.random.bytes()):(t.expect=f,t.session.resuming=!1,c.createSecurityParameters(t,n)),t.session.id=o,t.process()}},c.handleClientHello=function(t,e,r){var o=c.parseHelloMessage(t,e,r);if(!t.fail){var i=o.session_id.bytes(),a=null;if(t.sessionCache&&(null===(a=t.sessionCache.getSession(i))?i="":(a.version.major!==o.version.major||a.version.minor>o.version.minor)&&(a=null,i="")),0===i.length&&(i=n.random.getBytes(32)),t.session.id=i,t.session.clientHelloVersion=o.version,t.session.sp={},a)t.version=t.session.version=a.version,t.session.sp=a.sp;else{for(var s,u=1;u<c.SupportedVersions.length&&!((s=c.SupportedVersions[u]).minor<=o.version.minor);++u);t.version={major:s.major,minor:s.minor},t.session.version=t.version}null!==a?(t.expect=x,t.session.resuming=!0,t.session.sp.client_random=o.random.bytes()):(t.expect=!1!==t.verifyClient?b:w,t.session.resuming=!1,c.createSecurityParameters(t,o)),t.open=!0,c.queue(t,c.createRecord(t,{type:c.ContentType.handshake,data:c.createServerHello(t)})),t.session.resuming?(c.queue(t,c.createRecord(t,{type:c.ContentType.change_cipher_spec,data:c.createChangeCipherSpec()})),t.state.pending=c.createConnectionState(t),t.state.current.write=t.state.pending.write,c.queue(t,c.createRecord(t,{type:c.ContentType.handshake,data:c.createFinished(t)}))):(c.queue(t,c.createRecord(t,{type:c.ContentType.handshake,data:c.createCertificate(t)})),t.fail||(c.queue(t,c.createRecord(t,{type:c.ContentType.handshake,data:c.createServerKeyExchange(t)})),!1!==t.verifyClient&&c.queue(t,c.createRecord(t,{type:c.ContentType.handshake,data:c.createCertificateRequest(t)})),c.queue(t,c.createRecord(t,{type:c.ContentType.handshake,data:c.createServerHelloDone(t)})))),c.flush(t),t.process()}},c.handleCertificate=function(t,e,r){if(r<3)return t.error(t,{message:"Invalid Certificate message. Message too short.",send:!0,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.illegal_parameter}});var o,i,a=e.fragment,s={certificate_list:u(a,3)},l=[];try{for(;s.certificate_list.length()>0;)o=u(s.certificate_list,3),i=n.asn1.fromDer(o),o=n.pki.certificateFromAsn1(i,!0),l.push(o)}catch(e){return t.error(t,{message:"Could not parse certificate list.",cause:e,send:!0,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.bad_certificate}})}var f=t.entity===c.ConnectionEnd.client;!f&&!0!==t.verifyClient||0!==l.length?0===l.length?t.expect=f?h:w:(f?t.session.serverCertificate=l[0]:t.session.clientCertificate=l[0],c.verifyCertificateChain(t,l)&&(t.expect=f?h:w)):t.error(t,{message:f?"No server certificate provided.":"No client certificate provided.",send:!0,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.illegal_parameter}}),t.process()},c.handleServerKeyExchange=function(t,e,r){if(r>0)return t.error(t,{message:"Invalid key parameters. Only RSA is supported.",send:!0,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.unsupported_certificate}});t.expect=p,t.process()},c.handleClientKeyExchange=function(t,e,r){if(r<48)return t.error(t,{message:"Invalid key parameters. Only RSA is supported.",send:!0,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.unsupported_certificate}});var o=e.fragment,i={enc_pre_master_secret:u(o,2).getBytes()},a=null;if(t.getPrivateKey)try{a=t.getPrivateKey(t,t.session.serverCertificate),a=n.pki.privateKeyFromPem(a)}catch(e){t.error(t,{message:"Could not get private key.",cause:e,send:!0,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.internal_error}})}if(null===a)return t.error(t,{message:"No private key set.",send:!0,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.internal_error}});try{var s=t.session.sp;s.pre_master_secret=a.decrypt(i.enc_pre_master_secret);var l=t.session.clientHelloVersion;if(l.major!==s.pre_master_secret.charCodeAt(0)||l.minor!==s.pre_master_secret.charCodeAt(1))throw new Error("TLS version rollback attack detected.")}catch(t){s.pre_master_secret=n.random.getBytes(48)}t.expect=x,null!==t.session.clientCertificate&&(t.expect=S),t.process()},c.handleCertificateRequest=function(t,e,r){if(r<3)return t.error(t,{message:"Invalid CertificateRequest. Message too short.",send:!0,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.illegal_parameter}});var n=e.fragment,o={certificate_types:u(n,1),certificate_authorities:u(n,2)};t.session.certificateRequest=o,t.expect=d,t.process()},c.handleCertificateVerify=function(t,e,r){if(r<2)return t.error(t,{message:"Invalid CertificateVerify. Message too short.",send:!0,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.illegal_parameter}});var o=e.fragment;o.read-=4;var i=o.bytes();o.read+=4;var a={signature:u(o,2).getBytes()},s=n.util.createBuffer();s.putBuffer(t.session.md5.digest()),s.putBuffer(t.session.sha1.digest()),s=s.getBytes();try{if(!t.session.clientCertificate.publicKey.verify(s,a.signature,"NONE"))throw new Error("CertificateVerify signature does not match.");t.session.md5.update(i),t.session.sha1.update(i)}catch(e){return t.error(t,{message:"Bad signature in CertificateVerify.",send:!0,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.handshake_failure}})}t.expect=x,t.process()},c.handleServerHelloDone=function(t,e,r){if(r>0)return t.error(t,{message:"Invalid ServerHelloDone message. Invalid length.",send:!0,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.record_overflow}});if(null===t.serverCertificate){var o={message:"No server certificate provided. Not enough security.",send:!0,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.insufficient_security}},i=t.verify(t,o.alert.description,0,[]);if(!0!==i)return(i||0===i)&&("object"!=s(i)||n.util.isArray(i)?"number"==typeof i&&(o.alert.description=i):(i.message&&(o.message=i.message),i.alert&&(o.alert.description=i.alert))),t.error(t,o)}null!==t.session.certificateRequest&&(e=c.createRecord(t,{type:c.ContentType.handshake,data:c.createCertificate(t)}),c.queue(t,e)),e=c.createRecord(t,{type:c.ContentType.handshake,data:c.createClientKeyExchange(t)}),c.queue(t,e),t.expect=m;var a=function(t,e){null!==t.session.certificateRequest&&null!==t.session.clientCertificate&&c.queue(t,c.createRecord(t,{type:c.ContentType.handshake,data:c.createCertificateVerify(t,e)})),c.queue(t,c.createRecord(t,{type:c.ContentType.change_cipher_spec,data:c.createChangeCipherSpec()})),t.state.pending=c.createConnectionState(t),t.state.current.write=t.state.pending.write,c.queue(t,c.createRecord(t,{type:c.ContentType.handshake,data:c.createFinished(t)})),t.expect=y,c.flush(t),t.process()};if(null===t.session.certificateRequest||null===t.session.clientCertificate)return a(t,null);c.getClientSignature(t,a)},c.handleChangeCipherSpec=function(t,e){if(1!==e.fragment.getByte())return t.error(t,{message:"Invalid ChangeCipherSpec message received.",send:!0,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.illegal_parameter}});var r=t.entity===c.ConnectionEnd.client;(t.session.resuming&&r||!t.session.resuming&&!r)&&(t.state.pending=c.createConnectionState(t)),t.state.current.read=t.state.pending.read,(!t.session.resuming&&r||t.session.resuming&&!r)&&(t.state.pending=null),t.expect=r?v:_,t.process()},c.handleFinished=function(t,e,r){var i=e.fragment;i.read-=4;var a=i.bytes();i.read+=4;var s=e.fragment.getBytes();(i=n.util.createBuffer()).putBuffer(t.session.md5.digest()),i.putBuffer(t.session.sha1.digest());var u=t.entity===c.ConnectionEnd.client,l=u?"server finished":"client finished",f=t.session.sp;if((i=o(f.master_secret,l,i.getBytes(),12)).getBytes()!==s)return t.error(t,{message:"Invalid verify_data in Finished message.",send:!0,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.decrypt_error}});t.session.md5.update(a),t.session.sha1.update(a),(t.session.resuming&&u||!t.session.resuming&&!u)&&(c.queue(t,c.createRecord(t,{type:c.ContentType.change_cipher_spec,data:c.createChangeCipherSpec()})),t.state.current.write=t.state.pending.write,t.state.pending=null,c.queue(t,c.createRecord(t,{type:c.ContentType.handshake,data:c.createFinished(t)}))),t.expect=u?g:E,t.handshaking=!1,++t.handshakes,t.peerCertificate=u?t.session.serverCertificate:t.session.clientCertificate,c.flush(t),t.isConnected=!0,t.connected(t),t.process()},c.handleAlert=function(t,e){var r,n=e.fragment,o={level:n.getByte(),description:n.getByte()};switch(o.description){case c.Alert.Description.close_notify:r="Connection closed.";break;case c.Alert.Description.unexpected_message:r="Unexpected message.";break;case c.Alert.Description.bad_record_mac:r="Bad record MAC.";break;case c.Alert.Description.decryption_failed:r="Decryption failed.";break;case c.Alert.Description.record_overflow:r="Record overflow.";break;case c.Alert.Description.decompression_failure:r="Decompression failed.";break;case c.Alert.Description.handshake_failure:r="Handshake failure.";break;case c.Alert.Description.bad_certificate:r="Bad certificate.";break;case c.Alert.Description.unsupported_certificate:r="Unsupported certificate.";break;case c.Alert.Description.certificate_revoked:r="Certificate revoked.";break;case c.Alert.Description.certificate_expired:r="Certificate expired.";break;case c.Alert.Description.certificate_unknown:r="Certificate unknown.";break;case c.Alert.Description.illegal_parameter:r="Illegal parameter.";break;case c.Alert.Description.unknown_ca:r="Unknown certificate authority.";break;case c.Alert.Description.access_denied:r="Access denied.";break;case c.Alert.Description.decode_error:r="Decode error.";break;case c.Alert.Description.decrypt_error:r="Decrypt error.";break;case c.Alert.Description.export_restriction:r="Export restriction.";break;case c.Alert.Description.protocol_version:r="Unsupported protocol version.";break;case c.Alert.Description.insufficient_security:r="Insufficient security.";break;case c.Alert.Description.internal_error:r="Internal error.";break;case c.Alert.Description.user_canceled:r="User canceled.";break;case c.Alert.Description.no_renegotiation:r="Renegotiation not supported.";break;default:r="Unknown error."}if(o.description===c.Alert.Description.close_notify)return t.close();t.error(t,{message:r,send:!1,origin:t.entity===c.ConnectionEnd.client?"server":"client",alert:o}),t.process()},c.handleHandshake=function(t,e){var r=e.fragment,o=r.getByte(),i=r.getInt24();if(i>r.length())return t.fragmented=e,e.fragment=n.util.createBuffer(),r.read-=4,t.process();t.fragmented=null,r.read-=4;var a=r.bytes(i+4);r.read+=4,o in F[t.entity][t.expect]?(t.entity!==c.ConnectionEnd.server||t.open||t.fail||(t.handshaking=!0,t.session={version:null,extensions:{server_name:{serverNameList:[]}},cipherSuite:null,compressionMethod:null,serverCertificate:null,clientCertificate:null,md5:n.md.md5.create(),sha1:n.md.sha1.create()}),o!==c.HandshakeType.hello_request&&o!==c.HandshakeType.certificate_verify&&o!==c.HandshakeType.finished&&(t.session.md5.update(a),t.session.sha1.update(a)),F[t.entity][t.expect][o](t,e,i)):c.handleUnexpected(t,e)},c.handleApplicationData=function(t,e){t.data.putBuffer(e.fragment),t.dataReady(t),t.process()},c.handleHeartbeat=function(t,e){var r=e.fragment,o=r.getByte(),i=r.getInt16(),a=r.getBytes(i);if(o===c.HeartbeatMessageType.heartbeat_request){if(t.handshaking||i>a.length)return t.process();c.queue(t,c.createRecord(t,{type:c.ContentType.heartbeat,data:c.createHeartbeat(c.HeartbeatMessageType.heartbeat_response,a)})),c.flush(t)}else if(o===c.HeartbeatMessageType.heartbeat_response){if(a!==t.expectedHeartbeatPayload)return t.process();t.heartbeatReceived&&t.heartbeatReceived(t,n.util.createBuffer(a))}t.process()};var f=1,h=2,p=3,d=4,y=5,v=6,g=7,m=8,b=1,w=2,S=3,x=4,_=5,E=6,O=c.handleUnexpected,P=c.handleChangeCipherSpec,k=c.handleAlert,C=c.handleHandshake,T=c.handleApplicationData,A=c.handleHeartbeat,M=[];M[c.ConnectionEnd.client]=[[O,k,C,O,A],[O,k,C,O,A],[O,k,C,O,A],[O,k,C,O,A],[O,k,C,O,A],[P,k,O,O,A],[O,k,C,O,A],[O,k,C,T,A],[O,k,C,O,A]],M[c.ConnectionEnd.server]=[[O,k,C,O,A],[O,k,C,O,A],[O,k,C,O,A],[O,k,C,O,A],[P,k,O,O,A],[O,k,C,O,A],[O,k,C,T,A],[O,k,C,O,A]];var j=c.handleHelloRequest,I=c.handleServerHello,N=c.handleCertificate,L=c.handleServerKeyExchange,R=c.handleCertificateRequest,D=c.handleServerHelloDone,B=c.handleFinished,F=[];F[c.ConnectionEnd.client]=[[O,O,I,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O],[j,O,O,O,O,O,O,O,O,O,O,N,L,R,D,O,O,O,O,O,O],[j,O,O,O,O,O,O,O,O,O,O,O,L,R,D,O,O,O,O,O,O],[j,O,O,O,O,O,O,O,O,O,O,O,O,R,D,O,O,O,O,O,O],[j,O,O,O,O,O,O,O,O,O,O,O,O,O,D,O,O,O,O,O,O],[j,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O],[j,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,B],[j,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O],[j,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O]];var G=c.handleClientHello,U=c.handleClientKeyExchange,z=c.handleCertificateVerify;F[c.ConnectionEnd.server]=[[O,G,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O],[O,O,O,O,O,O,O,O,O,O,O,N,O,O,O,O,O,O,O,O,O],[O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,U,O,O,O,O],[O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,z,O,O,O,O,O],[O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O],[O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,B],[O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O],[O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O]],c.generateKeys=function(t,e){var r=o,n=e.client_random+e.server_random;t.session.resuming||(e.master_secret=r(e.pre_master_secret,"master secret",n,48).bytes(),e.pre_master_secret=null),n=e.server_random+e.client_random;var i=2*e.mac_key_length+2*e.enc_key_length,a=t.version.major===c.Versions.TLS_1_0.major&&t.version.minor===c.Versions.TLS_1_0.minor;a&&(i+=2*e.fixed_iv_length);var s=r(e.master_secret,"key expansion",n,i),u={client_write_MAC_key:s.getBytes(e.mac_key_length),server_write_MAC_key:s.getBytes(e.mac_key_length),client_write_key:s.getBytes(e.enc_key_length),server_write_key:s.getBytes(e.enc_key_length)};return a&&(u.client_write_IV=s.getBytes(e.fixed_iv_length),u.server_write_IV=s.getBytes(e.fixed_iv_length)),u},c.createConnectionState=function(t){var e=t.entity===c.ConnectionEnd.client,r=function(){var t={sequenceNumber:[0,0],macKey:null,macLength:0,macFunction:null,cipherState:null,cipherFunction:function(t){return!0},compressionState:null,compressFunction:function(t){return!0},updateSequenceNumber:function(){4294967295===t.sequenceNumber[1]?(t.sequenceNumber[1]=0,++t.sequenceNumber[0]):++t.sequenceNumber[1]}};return t},n={read:r(),write:r()};if(n.read.update=function(t,e){return n.read.cipherFunction(e,n.read)?n.read.compressFunction(t,e,n.read)||t.error(t,{message:"Could not decompress record.",send:!0,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.decompression_failure}}):t.error(t,{message:"Could not decrypt record or bad MAC.",send:!0,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.bad_record_mac}}),!t.fail},n.write.update=function(t,e){return n.write.compressFunction(t,e,n.write)?n.write.cipherFunction(e,n.write)||t.error(t,{message:"Could not encrypt record.",send:!1,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.internal_error}}):t.error(t,{message:"Could not compress record.",send:!1,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.internal_error}}),!t.fail},t.session){var o=t.session.sp;switch(t.session.cipherSuite.initSecurityParameters(o),o.keys=c.generateKeys(t,o),n.read.macKey=e?o.keys.server_write_MAC_key:o.keys.client_write_MAC_key,n.write.macKey=e?o.keys.client_write_MAC_key:o.keys.server_write_MAC_key,t.session.cipherSuite.initConnectionState(n,t,o),o.compression_algorithm){case c.CompressionMethod.none:break;case c.CompressionMethod.deflate:n.read.compressFunction=a,n.write.compressFunction=i;break;default:throw new Error("Unsupported compression algorithm.")}}return n},c.createRandom=function(){var t=new Date,e=+t+6e4*t.getTimezoneOffset(),r=n.util.createBuffer();return r.putInt32(e),r.putBytes(n.random.getBytes(28)),r},c.createRecord=function(t,e){return e.data?{type:e.type,version:{major:t.version.major,minor:t.version.minor},length:e.data.length(),fragment:e.data}:null},c.createAlert=function(t,e){var r=n.util.createBuffer();return r.putByte(e.level),r.putByte(e.description),c.createRecord(t,{type:c.ContentType.alert,data:r})},c.createClientHello=function(t){t.session.clientHelloVersion={major:t.version.major,minor:t.version.minor};for(var e=n.util.createBuffer(),r=0;r<t.cipherSuites.length;++r){var o=t.cipherSuites[r];e.putByte(o.id[0]),e.putByte(o.id[1])}var i=e.length(),a=n.util.createBuffer();a.putByte(c.CompressionMethod.none);var s=a.length(),u=n.util.createBuffer();if(t.virtualHost){var f=n.util.createBuffer();f.putByte(0),f.putByte(0);var h=n.util.createBuffer();h.putByte(0),l(h,2,n.util.createBuffer(t.virtualHost));var p=n.util.createBuffer();l(p,2,h),l(f,2,p),u.putBuffer(f)}var d=u.length();d>0&&(d+=2);var y=t.session.id,v=y.length+1+2+4+28+2+i+1+s+d,g=n.util.createBuffer();return g.putByte(c.HandshakeType.client_hello),g.putInt24(v),g.putByte(t.version.major),g.putByte(t.version.minor),g.putBytes(t.session.sp.client_random),l(g,1,n.util.createBuffer(y)),l(g,2,e),l(g,1,a),d>0&&l(g,2,u),g},c.createServerHello=function(t){var e=t.session.id,r=e.length+1+2+4+28+2+1,o=n.util.createBuffer();return o.putByte(c.HandshakeType.server_hello),o.putInt24(r),o.putByte(t.version.major),o.putByte(t.version.minor),o.putBytes(t.session.sp.server_random),l(o,1,n.util.createBuffer(e)),o.putByte(t.session.cipherSuite.id[0]),o.putByte(t.session.cipherSuite.id[1]),o.putByte(t.session.compressionMethod),o},c.createCertificate=function(t){var e,r=t.entity===c.ConnectionEnd.client,o=null;t.getCertificate&&(e=r?t.session.certificateRequest:t.session.extensions.server_name.serverNameList,o=t.getCertificate(t,e));var i=n.util.createBuffer();if(null!==o)try{n.util.isArray(o)||(o=[o]);for(var a=null,s=0;s<o.length;++s){var u=n.pem.decode(o[s])[0];if("CERTIFICATE"!==u.type&&"X509 CERTIFICATE"!==u.type&&"TRUSTED CERTIFICATE"!==u.type){var f=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw f.headerType=u.type,f}if(u.procType&&"ENCRYPTED"===u.procType.type)throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var h=n.util.createBuffer(u.body);null===a&&(a=n.asn1.fromDer(h.bytes(),!1));var p=n.util.createBuffer();l(p,3,h),i.putBuffer(p)}o=n.pki.certificateFromAsn1(a),r?t.session.clientCertificate=o:t.session.serverCertificate=o}catch(e){return t.error(t,{message:"Could not send certificate list.",cause:e,send:!0,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.bad_certificate}})}var d=3+i.length(),y=n.util.createBuffer();return y.putByte(c.HandshakeType.certificate),y.putInt24(d),l(y,3,i),y},c.createClientKeyExchange=function(t){var e=n.util.createBuffer();e.putByte(t.session.clientHelloVersion.major),e.putByte(t.session.clientHelloVersion.minor),e.putBytes(n.random.getBytes(46));var r=t.session.sp;r.pre_master_secret=e.getBytes();var o=(e=t.session.serverCertificate.publicKey.encrypt(r.pre_master_secret)).length+2,i=n.util.createBuffer();return i.putByte(c.HandshakeType.client_key_exchange),i.putInt24(o),i.putInt16(e.length),i.putBytes(e),i},c.createServerKeyExchange=function(t){return n.util.createBuffer()},c.getClientSignature=function(t,e){var r=n.util.createBuffer();r.putBuffer(t.session.md5.digest()),r.putBuffer(t.session.sha1.digest()),r=r.getBytes(),t.getSignature=t.getSignature||function(t,e,r){var o=null;if(t.getPrivateKey)try{o=t.getPrivateKey(t,t.session.clientCertificate),o=n.pki.privateKeyFromPem(o)}catch(e){t.error(t,{message:"Could not get private key.",cause:e,send:!0,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.internal_error}})}null===o?t.error(t,{message:"No private key set.",send:!0,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.internal_error}}):e=o.sign(e,null),r(t,e)},t.getSignature(t,r,e)},c.createCertificateVerify=function(t,e){var r=e.length+2,o=n.util.createBuffer();return o.putByte(c.HandshakeType.certificate_verify),o.putInt24(r),o.putInt16(e.length),o.putBytes(e),o},c.createCertificateRequest=function(t){var e=n.util.createBuffer();e.putByte(1);var r=n.util.createBuffer();for(var o in t.caStore.certs){var i=t.caStore.certs[o],a=n.pki.distinguishedNameToAsn1(i.subject),s=n.asn1.toDer(a);r.putInt16(s.length()),r.putBuffer(s)}var u=1+e.length()+2+r.length(),f=n.util.createBuffer();return f.putByte(c.HandshakeType.certificate_request),f.putInt24(u),l(f,1,e),l(f,2,r),f},c.createServerHelloDone=function(t){var e=n.util.createBuffer();return e.putByte(c.HandshakeType.server_hello_done),e.putInt24(0),e},c.createChangeCipherSpec=function(){var t=n.util.createBuffer();return t.putByte(1),t},c.createFinished=function(t){var e=n.util.createBuffer();e.putBuffer(t.session.md5.digest()),e.putBuffer(t.session.sha1.digest());var r=t.entity===c.ConnectionEnd.client,i=t.session.sp,a=r?"client finished":"server finished";e=o(i.master_secret,a,e.getBytes(),12);var s=n.util.createBuffer();return s.putByte(c.HandshakeType.finished),s.putInt24(e.length()),s.putBuffer(e),s},c.createHeartbeat=function(t,e,r){void 0===r&&(r=e.length);var o=n.util.createBuffer();o.putByte(t),o.putInt16(r),o.putBytes(e);var i=o.length(),a=Math.max(16,i-r-3);return o.putBytes(n.random.getBytes(a)),o},c.queue=function(t,e){if(e&&(0!==e.fragment.length()||e.type!==c.ContentType.handshake&&e.type!==c.ContentType.alert&&e.type!==c.ContentType.change_cipher_spec)){if(e.type===c.ContentType.handshake){var r=e.fragment.bytes();t.session.md5.update(r),t.session.sha1.update(r),r=null}var o;if(e.fragment.length()<=c.MaxFragment)o=[e];else{o=[];for(var i=e.fragment.bytes();i.length>c.MaxFragment;)o.push(c.createRecord(t,{type:e.type,data:n.util.createBuffer(i.slice(0,c.MaxFragment))})),i=i.slice(c.MaxFragment);i.length>0&&o.push(c.createRecord(t,{type:e.type,data:n.util.createBuffer(i)}))}for(var a=0;a<o.length&&!t.fail;++a){var s=o[a];t.state.current.write.update(t,s)&&t.records.push(s)}}},c.flush=function(t){for(var e=0;e<t.records.length;++e){var r=t.records[e];t.tlsData.putByte(r.type),t.tlsData.putByte(r.version.major),t.tlsData.putByte(r.version.minor),t.tlsData.putInt16(r.fragment.length()),t.tlsData.putBuffer(t.records[e].fragment)}return t.records=[],t.tlsDataReady(t)};var V=function(t){switch(t){case!0:return!0;case n.pki.certificateError.bad_certificate:return c.Alert.Description.bad_certificate;case n.pki.certificateError.unsupported_certificate:return c.Alert.Description.unsupported_certificate;case n.pki.certificateError.certificate_revoked:return c.Alert.Description.certificate_revoked;case n.pki.certificateError.certificate_expired:return c.Alert.Description.certificate_expired;case n.pki.certificateError.certificate_unknown:return c.Alert.Description.certificate_unknown;case n.pki.certificateError.unknown_ca:return c.Alert.Description.unknown_ca;default:return c.Alert.Description.bad_certificate}};for(var H in c.verifyCertificateChain=function(t,e){try{var r={};for(var o in t.verifyOptions)r[o]=t.verifyOptions[o];r.verify=function(e,r,o){V(e);var i=t.verify(t,e,r,o);if(!0!==i){if("object"==s(i)&&!n.util.isArray(i)){var a=new Error("The application rejected the certificate.");throw a.send=!0,a.alert={level:c.Alert.Level.fatal,description:c.Alert.Description.bad_certificate},i.message&&(a.message=i.message),i.alert&&(a.alert.description=i.alert),a}i!==e&&(i=function(t){switch(i){case!0:return!0;case c.Alert.Description.bad_certificate:return n.pki.certificateError.bad_certificate;case c.Alert.Description.unsupported_certificate:return n.pki.certificateError.unsupported_certificate;case c.Alert.Description.certificate_revoked:return n.pki.certificateError.certificate_revoked;case c.Alert.Description.certificate_expired:return n.pki.certificateError.certificate_expired;case c.Alert.Description.certificate_unknown:return n.pki.certificateError.certificate_unknown;case c.Alert.Description.unknown_ca:return n.pki.certificateError.unknown_ca;default:return n.pki.certificateError.bad_certificate}}())}return i},n.pki.verifyCertificateChain(t.caStore,e,r)}catch(e){var i=e;("object"!=s(i)||n.util.isArray(i))&&(i={send:!0,alert:{level:c.Alert.Level.fatal,description:V(e)}}),"send"in i||(i.send=!0),"alert"in i||(i.alert={level:c.Alert.Level.fatal,description:V(i.error)}),t.error(t,i)}return!t.fail},c.createSessionCache=function(t,e){var r=null;if(t&&t.getSession&&t.setSession&&t.order)r=t;else{for(var o in(r={}).cache=t||{},r.capacity=Math.max(e||100,1),r.order=[],t)r.order.length<=e?r.order.push(o):delete t[o];r.getSession=function(t){var e=null,o=null;if(t?o=n.util.bytesToHex(t):r.order.length>0&&(o=r.order[0]),null!==o&&o in r.cache)for(var i in e=r.cache[o],delete r.cache[o],r.order)if(r.order[i]===o){r.order.splice(i,1);break}return e},r.setSession=function(t,e){if(r.order.length===r.capacity){var o=r.order.shift();delete r.cache[o]}o=n.util.bytesToHex(t),r.order.push(o),r.cache[o]=e}}return r},c.createConnection=function(t){var e;e=t.caStore?n.util.isArray(t.caStore)?n.pki.createCaStore(t.caStore):t.caStore:n.pki.createCaStore();var r=t.cipherSuites||null;if(null===r)for(var o in r=[],c.CipherSuites)r.push(c.CipherSuites[o]);var i=t.server?c.ConnectionEnd.server:c.ConnectionEnd.client,a=t.sessionCache?c.createSessionCache(t.sessionCache):null,s={version:{major:c.Version.major,minor:c.Version.minor},entity:i,sessionId:t.sessionId,caStore:e,sessionCache:a,cipherSuites:r,connected:t.connected,virtualHost:t.virtualHost||null,verifyClient:t.verifyClient||!1,verify:t.verify||function(t,e,r,n){return e},verifyOptions:t.verifyOptions||{},getCertificate:t.getCertificate||null,getPrivateKey:t.getPrivateKey||null,getSignature:t.getSignature||null,input:n.util.createBuffer(),tlsData:n.util.createBuffer(),data:n.util.createBuffer(),tlsDataReady:t.tlsDataReady,dataReady:t.dataReady,heartbeatReceived:t.heartbeatReceived,closed:t.closed,error:function(e,r){r.origin=r.origin||(e.entity===c.ConnectionEnd.client?"client":"server"),r.send&&(c.queue(e,c.createAlert(e,r.alert)),c.flush(e));var n=!1!==r.fatal;n&&(e.fail=!0),t.error(e,r),n&&e.close(!1)},deflate:t.deflate||null,inflate:t.inflate||null,reset:function(t){s.version={major:c.Version.major,minor:c.Version.minor},s.record=null,s.session=null,s.peerCertificate=null,s.state={pending:null,current:null},s.expect=(s.entity,c.ConnectionEnd.client,0),s.fragmented=null,s.records=[],s.open=!1,s.handshakes=0,s.handshaking=!1,s.isConnected=!1,s.fail=!(t||void 0===t),s.input.clear(),s.tlsData.clear(),s.data.clear(),s.state.current=c.createConnectionState(s)}};return s.reset(),s.handshake=function(t){if(s.entity!==c.ConnectionEnd.client)s.error(s,{message:"Cannot initiate handshake as a server.",fatal:!1});else if(s.handshaking)s.error(s,{message:"Handshake already in progress.",fatal:!1});else{s.fail&&!s.open&&0===s.handshakes&&(s.fail=!1),s.handshaking=!0;var e=null;(t=t||"").length>0&&(s.sessionCache&&(e=s.sessionCache.getSession(t)),null===e&&(t="")),0===t.length&&s.sessionCache&&null!==(e=s.sessionCache.getSession())&&(t=e.id),s.session={id:t,version:null,cipherSuite:null,compressionMethod:null,serverCertificate:null,certificateRequest:null,clientCertificate:null,sp:{},md5:n.md.md5.create(),sha1:n.md.sha1.create()},e&&(s.version=e.version,s.session.sp=e.sp),s.session.sp.client_random=c.createRandom().getBytes(),s.open=!0,c.queue(s,c.createRecord(s,{type:c.ContentType.handshake,data:c.createClientHello(s)})),c.flush(s)}},s.process=function(t){var e=0;return t&&s.input.putBytes(t),s.fail||(null!==s.record&&s.record.ready&&s.record.fragment.isEmpty()&&(s.record=null),null===s.record&&(e=function(t){var e=0,r=t.input,o=r.length();if(o<5)e=5-o;else{t.record={type:r.getByte(),version:{major:r.getByte(),minor:r.getByte()},length:r.getInt16(),fragment:n.util.createBuffer(),ready:!1};var i=t.record.version.major===t.version.major;i&&t.session&&t.session.version&&(i=t.record.version.minor===t.version.minor),i||t.error(t,{message:"Incompatible TLS version.",send:!0,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.protocol_version}})}return e}(s)),s.fail||null===s.record||s.record.ready||(e=function(t){var e=0,r=t.input,n=r.length();return n<t.record.length?e=t.record.length-n:(t.record.fragment.putBytes(r.getBytes(t.record.length)),r.compact(),t.state.current.read.update(t,t.record)&&(null!==t.fragmented&&(t.fragmented.type===t.record.type?(t.fragmented.fragment.putBuffer(t.record.fragment),t.record=t.fragmented):t.error(t,{message:"Invalid fragmented record.",send:!0,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.unexpected_message}})),t.record.ready=!0)),e}(s)),!s.fail&&null!==s.record&&s.record.ready&&function(t,e){var r=e.type-c.ContentType.change_cipher_spec,n=M[t.entity][t.expect];r in n?n[r](t,e):c.handleUnexpected(t,e)}(s,s.record)),e},s.prepare=function(t){return c.queue(s,c.createRecord(s,{type:c.ContentType.application_data,data:n.util.createBuffer(t)})),c.flush(s)},s.prepareHeartbeatRequest=function(t,e){return t instanceof n.util.ByteBuffer&&(t=t.bytes()),void 0===e&&(e=t.length),s.expectedHeartbeatPayload=t,c.queue(s,c.createRecord(s,{type:c.ContentType.heartbeat,data:c.createHeartbeat(c.HeartbeatMessageType.heartbeat_request,t,e)})),c.flush(s)},s.close=function(t){if(!s.fail&&s.sessionCache&&s.session){var e={id:s.session.id,version:s.session.version,sp:s.session.sp};e.sp.keys=null,s.sessionCache.setSession(e.id,e)}s.open&&(s.open=!1,s.input.clear(),(s.isConnected||s.handshaking)&&(s.isConnected=s.handshaking=!1,c.queue(s,c.createAlert(s,{level:c.Alert.Level.warning,description:c.Alert.Description.close_notify})),c.flush(s)),s.closed(s)),s.reset(t)},s},t.exports=n.tls=n.tls||{},c)"function"!=typeof c[H]&&(n.tls[H]=c[H]);n.tls.prf_tls1=o,n.tls.hmac_sha1=function(t,e,r){var o=n.hmac.create();o.start("SHA1",t);var i=n.util.createBuffer();return i.putInt32(e[0]),i.putInt32(e[1]),i.putByte(r.type),i.putByte(r.version.major),i.putByte(r.version.minor),i.putInt16(r.length),i.putBytes(r.fragment.bytes()),o.update(i.getBytes()),o.digest().getBytes()},n.tls.createSessionCache=c.createSessionCache,n.tls.createConnection=c.createConnection},function(t,e,r){var n=r(0);r(3),r(6),r(22),r(7),r(15),r(28),r(18),r(11),r(1),r(17);var o=n.asn1,i=t.exports=n.pki=n.pki||{};i.pemToDer=function(t){var e=n.pem.decode(t)[0];if(e.procType&&"ENCRYPTED"===e.procType.type)throw new Error("Could not convert PEM to DER; PEM is encrypted.");return n.util.createBuffer(e.body)},i.privateKeyFromPem=function(t){var e=n.pem.decode(t)[0];if("PRIVATE KEY"!==e.type&&"RSA PRIVATE KEY"!==e.type){var r=new Error('Could not convert private key from PEM; PEM header type is not "PRIVATE KEY" or "RSA PRIVATE KEY".');throw r.headerType=e.type,r}if(e.procType&&"ENCRYPTED"===e.procType.type)throw new Error("Could not convert private key from PEM; PEM is encrypted.");var a=o.fromDer(e.body);return i.privateKeyFromAsn1(a)},i.privateKeyToPem=function(t,e){var r={type:"RSA PRIVATE KEY",body:o.toDer(i.privateKeyToAsn1(t)).getBytes()};return n.pem.encode(r,{maxline:e})},i.privateKeyInfoToPem=function(t,e){var r={type:"PRIVATE KEY",body:o.toDer(t).getBytes()};return n.pem.encode(r,{maxline:e})}},function(t,e,r){var n=r(0);if(r(5),r(3),r(10),r(4),r(6),r(15),r(7),r(2),r(25),r(11),r(1),void 0===o)var o=n.jsbn.BigInteger;var i=n.asn1,a=n.pki=n.pki||{};t.exports=a.pbe=n.pbe=n.pbe||{};var s=a.oids,u={name:"EncryptedPrivateKeyInfo",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedPrivateKeyInfo.encryptionAlgorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"encryptionOid"},{name:"AlgorithmIdentifier.parameters",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,captureAsn1:"encryptionParams"}]},{name:"EncryptedPrivateKeyInfo.encryptedData",tagClass:i.Class.UNIVERSAL,type:i.Type.OCTETSTRING,constructed:!1,capture:"encryptedData"}]},l={name:"PBES2Algorithms",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc.oid",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"kdfOid"},{name:"PBES2Algorithms.params",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.params.salt",tagClass:i.Class.UNIVERSAL,type:i.Type.OCTETSTRING,constructed:!1,capture:"kdfSalt"},{name:"PBES2Algorithms.params.iterationCount",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"kdfIterationCount"},{name:"PBES2Algorithms.params.keyLength",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,optional:!0,capture:"keyLength"},{name:"PBES2Algorithms.params.prf",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,optional:!0,value:[{name:"PBES2Algorithms.params.prf.algorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"prfOid"}]}]}]},{name:"PBES2Algorithms.encryptionScheme",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.encryptionScheme.oid",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"encOid"},{name:"PBES2Algorithms.encryptionScheme.iv",tagClass:i.Class.UNIVERSAL,type:i.Type.OCTETSTRING,constructed:!1,capture:"encIv"}]}]},c={name:"pkcs-12PbeParams",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"pkcs-12PbeParams.salt",tagClass:i.Class.UNIVERSAL,type:i.Type.OCTETSTRING,constructed:!1,capture:"salt"},{name:"pkcs-12PbeParams.iterations",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"iterations"}]};function f(t,e){return t.start().update(e).digest().getBytes()}function h(t){var e;if(t){if(!(e=a.oids[i.derToOid(t)])){var r=new Error("Unsupported PRF OID.");throw r.oid=t,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}}else e="hmacWithSHA1";return p(e)}function p(t){var e=n.md;switch(t){case"hmacWithSHA224":e=n.md.sha512;case"hmacWithSHA1":case"hmacWithSHA256":case"hmacWithSHA384":case"hmacWithSHA512":t=t.substr(8).toLowerCase();break;default:var r=new Error("Unsupported PRF algorithm.");throw r.algorithm=t,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}if(!(e&&t in e))throw new Error("Unknown hash algorithm: "+t);return e[t].create()}a.encryptPrivateKeyInfo=function(t,e,r){(r=r||{}).saltSize=r.saltSize||8,r.count=r.count||2048,r.algorithm=r.algorithm||"aes128",r.prfAlgorithm=r.prfAlgorithm||"sha1";var o,u,l,c=n.random.getBytesSync(r.saltSize),f=r.count,h=i.integerToDer(f);if(0===r.algorithm.indexOf("aes")||"des"===r.algorithm){var d,y,v;switch(r.algorithm){case"aes128":o=16,d=16,y=s["aes128-CBC"],v=n.aes.createEncryptionCipher;break;case"aes192":o=24,d=16,y=s["aes192-CBC"],v=n.aes.createEncryptionCipher;break;case"aes256":o=32,d=16,y=s["aes256-CBC"],v=n.aes.createEncryptionCipher;break;case"des":o=8,d=8,y=s.desCBC,v=n.des.createEncryptionCipher;break;default:throw(x=new Error("Cannot encrypt private key. Unknown encryption algorithm.")).algorithm=r.algorithm,x}var g="hmacWith"+r.prfAlgorithm.toUpperCase(),m=p(g),b=n.pkcs5.pbkdf2(e,c,f,o,m),w=n.random.getBytesSync(d);(_=v(b)).start(w),_.update(i.toDer(t)),_.finish(),l=_.output.getBytes();var S=function(t,e,r,o){var s=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,t),i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,e.getBytes())]);return"hmacWithSHA1"!==o&&s.value.push(i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,n.util.hexToBytes(r.toString(16))),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(a.oids[o]).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.NULL,!1,"")])),s}(c,h,o,g);u=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(s.pkcs5PBES2).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(s.pkcs5PBKDF2).getBytes()),S]),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(y).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,w)])])])}else{var x;if("3des"!==r.algorithm)throw(x=new Error("Cannot encrypt private key. Unknown encryption algorithm.")).algorithm=r.algorithm,x;o=24;var _,E=new n.util.ByteBuffer(c);b=a.pbe.generatePkcs12Key(e,E,1,f,o),w=a.pbe.generatePkcs12Key(e,E,2,f,o),(_=n.des.createEncryptionCipher(b)).start(w),_.update(i.toDer(t)),_.finish(),l=_.output.getBytes(),u=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(s["pbeWithSHAAnd3-KeyTripleDES-CBC"]).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,c),i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,h.getBytes())])])}return i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[u,i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,l)])},a.decryptPrivateKeyInfo=function(t,e){var r=null,o={},s=[];if(!i.validate(t,u,o,s)){var l=new Error("Cannot read encrypted private key. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw l.errors=s,l}var c=i.derToOid(o.encryptionOid),f=a.pbe.getCipher(c,o.encryptionParams,e),h=n.util.createBuffer(o.encryptedData);return f.update(h),f.finish()&&(r=i.fromDer(f.output)),r},a.encryptedPrivateKeyToPem=function(t,e){var r={type:"ENCRYPTED PRIVATE KEY",body:i.toDer(t).getBytes()};return n.pem.encode(r,{maxline:e})},a.encryptedPrivateKeyFromPem=function(t){var e=n.pem.decode(t)[0];if("ENCRYPTED PRIVATE KEY"!==e.type){var r=new Error('Could not convert encrypted private key from PEM; PEM header type is "ENCRYPTED PRIVATE KEY".');throw r.headerType=e.type,r}if(e.procType&&"ENCRYPTED"===e.procType.type)throw new Error("Could not convert encrypted private key from PEM; PEM is encrypted.");return i.fromDer(e.body)},a.encryptRsaPrivateKey=function(t,e,r){if(!(r=r||{}).legacy){var o=a.wrapRsaPrivateKey(a.privateKeyToAsn1(t));return o=a.encryptPrivateKeyInfo(o,e,r),a.encryptedPrivateKeyToPem(o)}var s,u,l,c;switch(r.algorithm){case"aes128":s="AES-128-CBC",l=16,u=n.random.getBytesSync(16),c=n.aes.createEncryptionCipher;break;case"aes192":s="AES-192-CBC",l=24,u=n.random.getBytesSync(16),c=n.aes.createEncryptionCipher;break;case"aes256":s="AES-256-CBC",l=32,u=n.random.getBytesSync(16),c=n.aes.createEncryptionCipher;break;case"3des":s="DES-EDE3-CBC",l=24,u=n.random.getBytesSync(8),c=n.des.createEncryptionCipher;break;case"des":s="DES-CBC",l=8,u=n.random.getBytesSync(8),c=n.des.createEncryptionCipher;break;default:var f=new Error('Could not encrypt RSA private key; unsupported encryption algorithm "'+r.algorithm+'".');throw f.algorithm=r.algorithm,f}var h=c(n.pbe.opensslDeriveBytes(e,u.substr(0,8),l));h.start(u),h.update(i.toDer(a.privateKeyToAsn1(t))),h.finish();var p={type:"RSA PRIVATE KEY",procType:{version:"4",type:"ENCRYPTED"},dekInfo:{algorithm:s,parameters:n.util.bytesToHex(u).toUpperCase()},body:h.output.getBytes()};return n.pem.encode(p)},a.decryptRsaPrivateKey=function(t,e){var r=null,o=n.pem.decode(t)[0];if("ENCRYPTED PRIVATE KEY"!==o.type&&"PRIVATE KEY"!==o.type&&"RSA PRIVATE KEY"!==o.type)throw(l=new Error('Could not convert private key from PEM; PEM header type is not "ENCRYPTED PRIVATE KEY", "PRIVATE KEY", or "RSA PRIVATE KEY".')).headerType=l,l;if(o.procType&&"ENCRYPTED"===o.procType.type){var s,u;switch(o.dekInfo.algorithm){case"DES-CBC":s=8,u=n.des.createDecryptionCipher;break;case"DES-EDE3-CBC":s=24,u=n.des.createDecryptionCipher;break;case"AES-128-CBC":s=16,u=n.aes.createDecryptionCipher;break;case"AES-192-CBC":s=24,u=n.aes.createDecryptionCipher;break;case"AES-256-CBC":s=32,u=n.aes.createDecryptionCipher;break;case"RC2-40-CBC":s=5,u=function(t){return n.rc2.createDecryptionCipher(t,40)};break;case"RC2-64-CBC":s=8,u=function(t){return n.rc2.createDecryptionCipher(t,64)};break;case"RC2-128-CBC":s=16,u=function(t){return n.rc2.createDecryptionCipher(t,128)};break;default:var l;throw(l=new Error('Could not decrypt private key; unsupported encryption algorithm "'+o.dekInfo.algorithm+'".')).algorithm=o.dekInfo.algorithm,l}var c=n.util.hexToBytes(o.dekInfo.parameters),f=u(n.pbe.opensslDeriveBytes(e,c.substr(0,8),s));if(f.start(c),f.update(n.util.createBuffer(o.body)),!f.finish())return r;r=f.output.getBytes()}else r=o.body;return null!==(r="ENCRYPTED PRIVATE KEY"===o.type?a.decryptPrivateKeyInfo(i.fromDer(r),e):i.fromDer(r))&&(r=a.privateKeyFromAsn1(r)),r},a.pbe.generatePkcs12Key=function(t,e,r,o,i,a){var s,u;if(null==a){if(!("sha1"in n.md))throw new Error('"sha1" hash algorithm unavailable.');a=n.md.sha1.create()}var l=a.digestLength,c=a.blockLength,f=new n.util.ByteBuffer,h=new n.util.ByteBuffer;if(null!=t){for(u=0;u<t.length;u++)h.putInt16(t.charCodeAt(u));h.putInt16(0)}var p=h.length(),d=e.length(),y=new n.util.ByteBuffer;y.fillWithByte(r,c);var v=c*Math.ceil(d/c),g=new n.util.ByteBuffer;for(u=0;u<v;u++)g.putByte(e.at(u%d));var m=c*Math.ceil(p/c),b=new n.util.ByteBuffer;for(u=0;u<m;u++)b.putByte(h.at(u%p));var w=g;w.putBuffer(b);for(var S=Math.ceil(i/l),x=1;x<=S;x++){var _=new n.util.ByteBuffer;_.putBytes(y.bytes()),_.putBytes(w.bytes());for(var E=0;E<o;E++)a.start(),a.update(_.getBytes()),_=a.digest();var O=new n.util.ByteBuffer;for(u=0;u<c;u++)O.putByte(_.at(u%l));var P=Math.ceil(d/c)+Math.ceil(p/c),k=new n.util.ByteBuffer;for(s=0;s<P;s++){var C=new n.util.ByteBuffer(w.getBytes(c)),T=511;for(u=O.length()-1;u>=0;u--)T>>=8,T+=O.at(u)+C.at(u),C.setAt(u,255&T);k.putBuffer(C)}w=k,f.putBuffer(_)}return f.truncate(f.length()-i),f},a.pbe.getCipher=function(t,e,r){switch(t){case a.oids.pkcs5PBES2:return a.pbe.getCipherForPBES2(t,e,r);case a.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:case a.oids["pbewithSHAAnd40BitRC2-CBC"]:return a.pbe.getCipherForPKCS12PBE(t,e,r);default:var n=new Error("Cannot read encrypted PBE data block. Unsupported OID.");throw n.oid=t,n.supportedOids=["pkcs5PBES2","pbeWithSHAAnd3-KeyTripleDES-CBC","pbewithSHAAnd40BitRC2-CBC"],n}},a.pbe.getCipherForPBES2=function(t,e,r){var o,s={},u=[];if(!i.validate(e,l,s,u))throw(o=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.")).errors=u,o;if((t=i.derToOid(s.kdfOid))!==a.oids.pkcs5PBKDF2)throw(o=new Error("Cannot read encrypted private key. Unsupported key derivation function OID.")).oid=t,o.supportedOids=["pkcs5PBKDF2"],o;if((t=i.derToOid(s.encOid))!==a.oids["aes128-CBC"]&&t!==a.oids["aes192-CBC"]&&t!==a.oids["aes256-CBC"]&&t!==a.oids["des-EDE3-CBC"]&&t!==a.oids.desCBC)throw(o=new Error("Cannot read encrypted private key. Unsupported encryption scheme OID.")).oid=t,o.supportedOids=["aes128-CBC","aes192-CBC","aes256-CBC","des-EDE3-CBC","desCBC"],o;var c,f,p=s.kdfSalt,d=n.util.createBuffer(s.kdfIterationCount);switch(d=d.getInt(d.length()<<3),a.oids[t]){case"aes128-CBC":c=16,f=n.aes.createDecryptionCipher;break;case"aes192-CBC":c=24,f=n.aes.createDecryptionCipher;break;case"aes256-CBC":c=32,f=n.aes.createDecryptionCipher;break;case"des-EDE3-CBC":c=24,f=n.des.createDecryptionCipher;break;case"desCBC":c=8,f=n.des.createDecryptionCipher}var y=h(s.prfOid),v=n.pkcs5.pbkdf2(r,p,d,c,y),g=s.encIv,m=f(v);return m.start(g),m},a.pbe.getCipherForPKCS12PBE=function(t,e,r){var o={},s=[];if(!i.validate(e,c,o,s))throw(y=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.")).errors=s,y;var u,l,f,p=n.util.createBuffer(o.salt),d=n.util.createBuffer(o.iterations);switch(d=d.getInt(d.length()<<3),t){case a.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:u=24,l=8,f=n.des.startDecrypting;break;case a.oids["pbewithSHAAnd40BitRC2-CBC"]:u=5,l=8,f=function(t,e){var r=n.rc2.createDecryptionCipher(t,40);return r.start(e,null),r};break;default:var y;throw(y=new Error("Cannot read PKCS #12 PBE data block. Unsupported OID.")).oid=t,y}var v=h(o.prfOid),g=a.pbe.generatePkcs12Key(r,p,1,d,u,v);return v.start(),f(g,a.pbe.generatePkcs12Key(r,p,2,d,l,v))},a.pbe.opensslDeriveBytes=function(t,e,r,o){if(null==o){if(!("md5"in n.md))throw new Error('"md5" hash algorithm unavailable.');o=n.md.md5.create()}null===e&&(e="");for(var i=[f(o,t+e)],a=16,s=1;a<r;++s,a+=16)i.push(f(o,i[s-1]+t+e));return i.join("").substr(0,r)}},function(t,e,r){var n=r(0);r(4),r(1);var o=t.exports=n.sha256=n.sha256||{};n.md.sha256=n.md.algorithms.sha256=o,o.create=function(){a||(i=String.fromCharCode(128),i+=n.util.fillString(String.fromCharCode(0),64),s=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],a=!0);var t=null,e=n.util.createBuffer(),r=new Array(64),o={algorithm:"sha256",blockLength:64,digestLength:32,messageLength:0,fullMessageLength:null,messageLengthSize:8,start:function(){o.messageLength=0,o.fullMessageLength=o.messageLength64=[];for(var r=o.messageLengthSize/4,i=0;i<r;++i)o.fullMessageLength.push(0);return e=n.util.createBuffer(),t={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225},o}};return o.start(),o.update=function(i,a){"utf8"===a&&(i=n.util.encodeUtf8(i));var s=i.length;o.messageLength+=s,s=[s/4294967296>>>0,s>>>0];for(var l=o.fullMessageLength.length-1;l>=0;--l)o.fullMessageLength[l]+=s[1],s[1]=s[0]+(o.fullMessageLength[l]/4294967296>>>0),o.fullMessageLength[l]=o.fullMessageLength[l]>>>0,s[0]=s[1]/4294967296>>>0;return e.putBytes(i),u(t,r,e),(e.read>2048||0===e.length())&&e.compact(),o},o.digest=function(){var a=n.util.createBuffer();a.putBytes(e.bytes());var s,l=o.fullMessageLength[o.fullMessageLength.length-1]+o.messageLengthSize&o.blockLength-1;a.putBytes(i.substr(0,o.blockLength-l));for(var c=8*o.fullMessageLength[0],f=0;f<o.fullMessageLength.length-1;++f)c+=(s=8*o.fullMessageLength[f+1])/4294967296>>>0,a.putInt32(c>>>0),c=s>>>0;a.putInt32(c);var h={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3,h4:t.h4,h5:t.h5,h6:t.h6,h7:t.h7};u(h,r,a);var p=n.util.createBuffer();return p.putInt32(h.h0),p.putInt32(h.h1),p.putInt32(h.h2),p.putInt32(h.h3),p.putInt32(h.h4),p.putInt32(h.h5),p.putInt32(h.h6),p.putInt32(h.h7),p},o};var i=null,a=!1,s=null;function u(t,e,r){for(var n,o,i,a,u,l,c,f,h,p,d,y,v,g=r.length();g>=64;){for(u=0;u<16;++u)e[u]=r.getInt32();for(;u<64;++u)n=((n=e[u-2])>>>17|n<<15)^(n>>>19|n<<13)^n>>>10,o=((o=e[u-15])>>>7|o<<25)^(o>>>18|o<<14)^o>>>3,e[u]=n+e[u-7]+o+e[u-16]|0;for(l=t.h0,c=t.h1,f=t.h2,h=t.h3,p=t.h4,d=t.h5,y=t.h6,v=t.h7,u=0;u<64;++u)i=(l>>>2|l<<30)^(l>>>13|l<<19)^(l>>>22|l<<10),a=l&c|f&(l^c),n=v+((p>>>6|p<<26)^(p>>>11|p<<21)^(p>>>25|p<<7))+(y^p&(d^y))+s[u]+e[u],v=y,y=d,d=p,p=h+n>>>0,h=f,f=c,c=l,l=n+(o=i+a)>>>0;t.h0=t.h0+l|0,t.h1=t.h1+c|0,t.h2=t.h2+f|0,t.h3=t.h3+h|0,t.h4=t.h4+p|0,t.h5=t.h5+d|0,t.h6=t.h6+y|0,t.h7=t.h7+v|0,g-=64}}},function(t,e,r){var n=r(0);r(1);var o=null;!n.util.isNodejs||n.options.usePureJavaScript||process.versions["node-webkit"]||(o=r(16)),(t.exports=n.prng=n.prng||{}).create=function(t){for(var e={plugin:t,key:null,seed:null,time:null,reseeds:0,generated:0,keyBytes:""},r=t.md,i=new Array(32),a=0;a<32;++a)i[a]=r.create();function s(){if(e.pools[0].messageLength>=32)return u();var t=32-e.pools[0].messageLength<<5;e.collect(e.seedFileSync(t)),u()}function u(){e.reseeds=4294967295===e.reseeds?0:e.reseeds+1;var t=e.plugin.md.create();t.update(e.keyBytes);for(var r=1,n=0;n<32;++n)e.reseeds%r==0&&(t.update(e.pools[n].digest().getBytes()),e.pools[n].start()),r<<=1;e.keyBytes=t.digest().getBytes(),t.start(),t.update(e.keyBytes);var o=t.digest().getBytes();e.key=e.plugin.formatKey(e.keyBytes),e.seed=e.plugin.formatSeed(o),e.generated=0}function l(t){var e=null,r=n.util.globalScope,o=r.crypto||r.msCrypto;o&&o.getRandomValues&&(e=function(t){return o.getRandomValues(t)});var i=n.util.createBuffer();if(e)for(;i.length()<t;){var a=Math.max(1,Math.min(t-i.length(),65536)/4),s=new Uint32Array(Math.floor(a));try{e(s);for(var u=0;u<s.length;++u)i.putInt32(s[u])}catch(t){if(!("undefined"!=typeof QuotaExceededError&&t instanceof QuotaExceededError))throw t}}if(i.length()<t)for(var l,c,f,h=Math.floor(65536*Math.random());i.length()<t;)for(c=16807*(65535&h),c+=(32767&(l=16807*(h>>16)))<<16,h=4294967295&(c=(2147483647&(c+=l>>15))+(c>>31)),u=0;u<3;++u)f=h>>>(u<<3),f^=Math.floor(256*Math.random()),i.putByte(255&f);return i.getBytes(t)}return e.pools=i,e.pool=0,e.generate=function(t,r){if(!r)return e.generateSync(t);var o=e.plugin.cipher,i=e.plugin.increment,a=e.plugin.formatKey,s=e.plugin.formatSeed,l=n.util.createBuffer();e.key=null,function c(f){if(f)return r(f);if(l.length()>=t)return r(null,l.getBytes(t));if(e.generated>1048575&&(e.key=null),null===e.key)return n.util.nextTick(function(){!function(t){if(e.pools[0].messageLength>=32)return u(),t();var r=32-e.pools[0].messageLength<<5;e.seedFile(r,function(r,n){if(r)return t(r);e.collect(n),u(),t()})}(c)});var h=o(e.key,e.seed);e.generated+=h.length,l.putBytes(h),e.key=a(o(e.key,i(e.seed))),e.seed=s(o(e.key,e.seed)),n.util.setImmediate(c)}()},e.generateSync=function(t){var r=e.plugin.cipher,o=e.plugin.increment,i=e.plugin.formatKey,a=e.plugin.formatSeed;e.key=null;for(var u=n.util.createBuffer();u.length()<t;){e.generated>1048575&&(e.key=null),null===e.key&&s();var l=r(e.key,e.seed);e.generated+=l.length,u.putBytes(l),e.key=i(r(e.key,o(e.seed))),e.seed=a(r(e.key,e.seed))}return u.getBytes(t)},o?(e.seedFile=function(t,e){o.randomBytes(t,function(t,r){if(t)return e(t);e(null,r.toString())})},e.seedFileSync=function(t){return o.randomBytes(t).toString()}):(e.seedFile=function(t,e){try{e(null,l(t))}catch(t){e(t)}},e.seedFileSync=l),e.collect=function(t){for(var r=t.length,n=0;n<r;++n)e.pools[e.pool].update(t.substr(n,1)),e.pool=31===e.pool?0:e.pool+1},e.collectInt=function(t,r){for(var n="",o=0;o<r;o+=8)n+=String.fromCharCode(t>>o&255);e.collect(n)},e.registerWorker=function(t){t===self?e.seedFile=function(t,e){self.addEventListener("message",function t(r){var n=r.data;n.forge&&n.forge.prng&&(self.removeEventListener("message",t),e(n.forge.prng.err,n.forge.prng.bytes))}),self.postMessage({forge:{prng:{needed:t}}})}:t.addEventListener("message",function(r){var n=r.data;n.forge&&n.forge.prng&&e.seedFile(n.forge.prng.needed,function(e,r){t.postMessage({forge:{prng:{err:e,bytes:r}}})})})},e}},function(t,e,r){var n=r(0);r(1);var o=[217,120,249,196,25,221,181,237,40,233,253,121,74,160,216,157,198,126,55,131,43,118,83,142,98,76,100,136,68,139,251,162,23,154,89,245,135,179,79,19,97,69,109,141,9,129,125,50,189,143,64,235,134,183,123,11,240,149,33,34,92,107,78,130,84,214,101,147,206,96,178,28,115,86,192,20,167,140,241,220,18,117,202,31,59,190,228,209,66,61,212,48,163,60,182,38,111,191,14,218,70,105,7,87,39,242,29,155,188,148,67,3,248,17,199,246,144,239,62,231,6,195,213,47,200,102,30,215,8,232,234,222,128,82,238,247,132,170,114,172,53,77,106,42,150,26,210,113,90,21,73,116,75,159,208,94,4,24,164,236,194,224,65,110,15,81,203,204,36,145,175,80,161,244,112,57,153,124,58,133,35,184,180,122,252,2,54,91,37,85,151,49,45,93,250,152,227,138,146,174,5,223,41,16,103,108,186,201,211,0,230,207,225,158,168,44,99,22,1,63,88,226,137,169,13,56,52,27,171,51,255,176,187,72,12,95,185,177,205,46,197,243,219,71,229,165,156,119,10,166,32,104,254,127,193,173],i=[1,2,3,5],a=function(t,e){return t<<e&65535|(65535&t)>>16-e},s=function(t,e){return(65535&t)>>e|t<<16-e&65535};t.exports=n.rc2=n.rc2||{},n.rc2.expandKey=function(t,e){"string"==typeof t&&(t=n.util.createBuffer(t)),e=e||128;var r,i=t,a=t.length(),s=e,u=Math.ceil(s/8),l=255>>(7&s);for(r=a;r<128;r++)i.putByte(o[i.at(r-1)+i.at(r-a)&255]);for(i.setAt(128-u,o[i.at(128-u)&l]),r=127-u;r>=0;r--)i.setAt(r,o[i.at(r+1)^i.at(r+u)]);return i};var u=function(t,e,r){var o,u,l,c,f=!1,h=null,p=null,d=null,y=[];for(t=n.rc2.expandKey(t,e),l=0;l<64;l++)y.push(t.getInt16Le());r?(o=function(t){for(l=0;l<4;l++)t[l]+=y[c]+(t[(l+3)%4]&t[(l+2)%4])+(~t[(l+3)%4]&t[(l+1)%4]),t[l]=a(t[l],i[l]),c++},u=function(t){for(l=0;l<4;l++)t[l]+=y[63&t[(l+3)%4]]}):(o=function(t){for(l=3;l>=0;l--)t[l]=s(t[l],i[l]),t[l]-=y[c]+(t[(l+3)%4]&t[(l+2)%4])+(~t[(l+3)%4]&t[(l+1)%4]),c--},u=function(t){for(l=3;l>=0;l--)t[l]-=y[63&t[(l+3)%4]]});var v=function(t){var e=[];for(l=0;l<4;l++){var n=h.getInt16Le();null!==d&&(r?n^=d.getInt16Le():d.putInt16Le(n)),e.push(65535&n)}c=r?0:63;for(var o=0;o<t.length;o++)for(var i=0;i<t[o][0];i++)t[o][1](e);for(l=0;l<4;l++)null!==d&&(r?d.putInt16Le(e[l]):e[l]^=d.getInt16Le()),p.putInt16Le(e[l])},g=null;return g={start:function(t,e){t&&"string"==typeof t&&(t=n.util.createBuffer(t)),f=!1,h=n.util.createBuffer(),p=e||new n.util.createBuffer,d=t,g.output=p},update:function(t){for(f||h.putBuffer(t);h.length()>=8;)v([[5,o],[1,u],[6,o],[1,u],[5,o]])},finish:function(t){var e=!0;if(r)if(t)e=t(8,h,!r);else{var n=8===h.length()?8:8-h.length();h.fillWithByte(n,n)}if(e&&(f=!0,g.update()),!r&&(e=0===h.length()))if(t)e=t(8,p,!r);else{var o=p.length(),i=p.at(o-1);i>o?e=!1:p.truncate(i)}return e}}};n.rc2.startEncrypting=function(t,e,r){var o=n.rc2.createEncryptionCipher(t,128);return o.start(e,r),o},n.rc2.createEncryptionCipher=function(t,e){return u(t,e,!0)},n.rc2.startDecrypting=function(t,e,r){var o=n.rc2.createDecryptionCipher(t,128);return o.start(e,r),o},n.rc2.createDecryptionCipher=function(t,e){return u(t,e,!1)}},function(t,e,r){var n=r(0);r(1),r(2),r(9);var o=t.exports=n.pkcs1=n.pkcs1||{};function i(t,e,r){r||(r=n.md.sha1.create());for(var o="",i=Math.ceil(e/r.digestLength),a=0;a<i;++a){var s=String.fromCharCode(a>>24&255,a>>16&255,a>>8&255,255&a);r.start(),r.update(t+s),o+=r.digest().getBytes()}return o.substring(0,e)}o.encode_rsa_oaep=function(t,e,r){var o,a,s,u;"string"==typeof r?(o=r,a=arguments[3]||void 0,s=arguments[4]||void 0):r&&(o=r.label||void 0,a=r.seed||void 0,s=r.md||void 0,r.mgf1&&r.mgf1.md&&(u=r.mgf1.md)),s?s.start():s=n.md.sha1.create(),u||(u=s);var l=Math.ceil(t.n.bitLength()/8),c=l-2*s.digestLength-2;if(e.length>c)throw(y=new Error("RSAES-OAEP input message length is too long.")).length=e.length,y.maxLength=c,y;o||(o=""),s.update(o,"raw");for(var f=s.digest(),h="",p=c-e.length,d=0;d<p;d++)h+="\0";var y,v=f.getBytes()+h+""+e;if(a){if(a.length!==s.digestLength)throw(y=new Error("Invalid RSAES-OAEP seed. The seed length must match the digest length.")).seedLength=a.length,y.digestLength=s.digestLength,y}else a=n.random.getBytes(s.digestLength);var g=i(a,l-s.digestLength-1,u),m=n.util.xorBytes(v,g,v.length),b=i(m,s.digestLength,u);return"\0"+n.util.xorBytes(a,b,a.length)+m},o.decode_rsa_oaep=function(t,e,r){var o,a,s;"string"==typeof r?(o=r,a=arguments[3]||void 0):r&&(o=r.label||void 0,a=r.md||void 0,r.mgf1&&r.mgf1.md&&(s=r.mgf1.md));var u=Math.ceil(t.n.bitLength()/8);if(e.length!==u)throw(g=new Error("RSAES-OAEP encoded message length is invalid.")).length=e.length,g.expectedLength=u,g;if(void 0===a?a=n.md.sha1.create():a.start(),s||(s=a),u<2*a.digestLength+2)throw new Error("RSAES-OAEP key is too short for the hash function.");o||(o=""),a.update(o,"raw");for(var l=a.digest().getBytes(),c=e.charAt(0),f=e.substring(1,a.digestLength+1),h=e.substring(1+a.digestLength),p=i(h,a.digestLength,s),d=i(n.util.xorBytes(f,p,f.length),u-a.digestLength-1,s),y=n.util.xorBytes(h,d,h.length),v=y.substring(0,a.digestLength),g="\0"!==c,m=0;m<a.digestLength;++m)g|=l.charAt(m)!==v.charAt(m);for(var b=1,w=a.digestLength,S=a.digestLength;S<y.length;S++){var x=y.charCodeAt(S);g|=x&(b?65534:0),w+=b&=1&x^1}if(g||1!==y.charCodeAt(w))throw new Error("Invalid RSAES-OAEP padding.");return y.substring(w+1)}},function(t,e,r){var n=r(0);r(1),r(12),r(2),function(){if(n.prime)t.exports=n.prime;else{var e=t.exports=n.prime=n.prime||{},r=n.jsbn.BigInteger,o=[6,4,2,4,2,4,6,2],i=new r(null);i.fromInt(30);var a=function(t,e){return t|e};e.generateProbablePrime=function(t,e,o){"function"==typeof e&&(o=e,e={});var i=(e=e||{}).algorithm||"PRIMEINC";"string"==typeof i&&(i={name:i}),i.options=i.options||{};var a=e.prng||n.random,l={nextBytes:function(t){for(var e=a.getBytesSync(t.length),r=0;r<t.length;++r)t[r]=e.charCodeAt(r)}};if("PRIMEINC"===i.name)return function(t,e,o,i){return"workers"in o?function(t,e,o,i){if("undefined"==typeof Worker)return s(t,e,o,i);var a=u(t,e),l=o.workers,c=o.workLoad||100,f=30*c/8,h=o.workerScript||"forge/prime.worker.js";if(-1===l)return n.util.estimateCores(function(t,e){t&&(e=2),l=e-1,p()});function p(){l=Math.max(1,l);for(var n=[],o=0;o<l;++o)n[o]=new Worker(h);for(o=0;o<l;++o)n[o].addEventListener("message",p);var s=!1;function p(o){if(!s){var l=o.data;if(l.found){for(var h=0;h<n.length;++h)n[h].terminate();return s=!0,i(null,new r(l.prime,16))}a.bitLength()>t&&(a=u(t,e));var p=a.toString(16);o.target.postMessage({hex:p,workLoad:c}),a.dAddOffset(f,0)}}}p()}(t,e,o,i):s(t,e,o,i)}(t,l,i.options,o);throw new Error("Invalid prime generation algorithm: "+i.name)}}function s(t,e,r,i){var a=u(t,e),s=function(t){return t<=100?27:t<=150?18:t<=200?15:t<=250?12:t<=300?9:t<=350?8:t<=400?7:t<=500?6:t<=600?5:t<=800?4:t<=1250?3:2}(a.bitLength());"millerRabinTests"in r&&(s=r.millerRabinTests);var l=10;"maxBlockTime"in r&&(l=r.maxBlockTime),function t(e,r,i,a,s,l,c){var f=+new Date;do{if(e.bitLength()>r&&(e=u(r,i)),e.isProbablePrime(s))return c(null,e);e.dAddOffset(o[a++%8],0)}while(l<0||+new Date-f<l);n.util.setImmediate(function(){t(e,r,i,a,s,l,c)})}(a,t,e,0,s,l,i)}function u(t,e){var n=new r(t,e),o=t-1;return n.testBit(o)||n.bitwiseTo(r.ONE.shiftLeft(o),a,n),n.dAddOffset(31-n.mod(i).byteValue(),0),n}}()},function(t,e,r){var n=r(0);r(3),r(8),r(6),r(29),r(22),r(2),r(11),r(9),r(1),r(17);var o=n.asn1,i=n.pki,a=t.exports=n.pkcs12=n.pkcs12||{},s={name:"ContentInfo",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.contentType",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:o.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"content"}]},u={name:"PFX",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.version",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"version"},s,{name:"PFX.macData",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"mac",value:[{name:"PFX.macData.mac",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm.algorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"macAlgorithm"},{name:"PFX.macData.mac.digestAlgorithm.parameters",tagClass:o.Class.UNIVERSAL,captureAsn1:"macAlgorithmParameters"}]},{name:"PFX.macData.mac.digest",tagClass:o.Class.UNIVERSAL,type:o.Type.OCTETSTRING,constructed:!1,capture:"macDigest"}]},{name:"PFX.macData.macSalt",tagClass:o.Class.UNIVERSAL,type:o.Type.OCTETSTRING,constructed:!1,capture:"macSalt"},{name:"PFX.macData.iterations",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,optional:!0,capture:"macIterations"}]}]},l={name:"SafeBag",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"SafeBag.bagId",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"bagId"},{name:"SafeBag.bagValue",tagClass:o.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"bagValue"},{name:"SafeBag.bagAttributes",tagClass:o.Class.UNIVERSAL,type:o.Type.SET,constructed:!0,optional:!0,capture:"bagAttributes"}]},c={name:"Attribute",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"Attribute.attrId",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"oid"},{name:"Attribute.attrValues",tagClass:o.Class.UNIVERSAL,type:o.Type.SET,constructed:!0,capture:"values"}]},f={name:"CertBag",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"CertBag.certId",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"certId"},{name:"CertBag.certValue",tagClass:o.Class.CONTEXT_SPECIFIC,constructed:!0,value:[{name:"CertBag.certValue[0]",tagClass:o.Class.UNIVERSAL,type:o.Class.OCTETSTRING,constructed:!1,capture:"cert"}]}]};function h(t,e,r,n){for(var o=[],i=0;i<t.length;i++)for(var a=0;a<t[i].safeBags.length;a++){var s=t[i].safeBags[a];void 0!==n&&s.type!==n||(null!==e?void 0!==s.attributes[e]&&s.attributes[e].indexOf(r)>=0&&o.push(s):o.push(s))}return o}function p(t){if(t.composed||t.constructed){for(var e=n.util.createBuffer(),r=0;r<t.value.length;++r)e.putBytes(t.value[r].value);t.composed=t.constructed=!1,t.value=e.getBytes()}return t}function d(t,e){var r={},a=[];if(!o.validate(t,n.pkcs7.asn1.encryptedDataValidator,r,a))throw(s=new Error("Cannot read EncryptedContentInfo.")).errors=a,s;var s,u=o.derToOid(r.contentType);if(u!==i.oids.data)throw(s=new Error("PKCS#12 EncryptedContentInfo ContentType is not Data.")).oid=u,s;u=o.derToOid(r.encAlgorithm);var l=i.pbe.getCipher(u,r.encParameter,e),c=p(r.encryptedContentAsn1),f=n.util.createBuffer(c.value);if(l.update(f),!l.finish())throw new Error("Failed to decrypt PKCS#12 SafeContents.");return l.output.getBytes()}function y(t,e,r){if(!e&&0===t.length)return[];if((t=o.fromDer(t,e)).tagClass!==o.Class.UNIVERSAL||t.type!==o.Type.SEQUENCE||!0!==t.constructed)throw new Error("PKCS#12 SafeContents expected to be a SEQUENCE OF SafeBag.");for(var n=[],a=0;a<t.value.length;a++){var s=t.value[a],u={},c=[];if(!o.validate(s,l,u,c))throw(g=new Error("Cannot read SafeBag.")).errors=c,g;var h,p,d={type:o.derToOid(u.bagId),attributes:v(u.bagAttributes)};n.push(d);var y=u.bagValue.value[0];switch(d.type){case i.oids.pkcs8ShroudedKeyBag:if(null===(y=i.decryptPrivateKeyInfo(y,r)))throw new Error("Unable to decrypt PKCS#8 ShroudedKeyBag, wrong password?");case i.oids.keyBag:try{d.key=i.privateKeyFromAsn1(y)}catch(t){d.key=null,d.asn1=y}continue;case i.oids.certBag:h=f,p=function(){if(o.derToOid(u.certId)!==i.oids.x509Certificate){var t=new Error("Unsupported certificate type, only X.509 supported.");throw t.oid=o.derToOid(u.certId),t}var r=o.fromDer(u.cert,e);try{d.cert=i.certificateFromAsn1(r,!0)}catch(t){d.cert=null,d.asn1=r}};break;default:var g;throw(g=new Error("Unsupported PKCS#12 SafeBag type.")).oid=d.type,g}if(void 0!==h&&!o.validate(y,h,u,c))throw(g=new Error("Cannot read PKCS#12 "+h.name)).errors=c,g;p()}return n}function v(t){var e={};if(void 0!==t)for(var r=0;r<t.length;++r){var n={},a=[];if(!o.validate(t[r],c,n,a)){var s=new Error("Cannot read PKCS#12 BagAttribute.");throw s.errors=a,s}var u=o.derToOid(n.oid);if(void 0!==i.oids[u]){e[i.oids[u]]=[];for(var l=0;l<n.values.length;++l)e[i.oids[u]].push(n.values[l].value)}}return e}a.pkcs12FromAsn1=function(t,e,r){"string"==typeof e?(r=e,e=!0):void 0===e&&(e=!0);var l={};if(!o.validate(t,u,l,[]))throw(c=new Error("Cannot read PKCS#12 PFX. ASN.1 object is not an PKCS#12 PFX.")).errors=c,c;var c,f={version:l.version.charCodeAt(0),safeContents:[],getBags:function(t){var e,r={};return"localKeyId"in t?e=t.localKeyId:"localKeyIdHex"in t&&(e=n.util.hexToBytes(t.localKeyIdHex)),void 0===e&&!("friendlyName"in t)&&"bagType"in t&&(r[t.bagType]=h(f.safeContents,null,null,t.bagType)),void 0!==e&&(r.localKeyId=h(f.safeContents,"localKeyId",e,t.bagType)),"friendlyName"in t&&(r.friendlyName=h(f.safeContents,"friendlyName",t.friendlyName,t.bagType)),r},getBagsByFriendlyName:function(t,e){return h(f.safeContents,"friendlyName",t,e)},getBagsByLocalKeyId:function(t,e){return h(f.safeContents,"localKeyId",t,e)}};if(3!==l.version.charCodeAt(0))throw(c=new Error("PKCS#12 PFX of version other than 3 not supported.")).version=l.version.charCodeAt(0),c;if(o.derToOid(l.contentType)!==i.oids.data)throw(c=new Error("Only PKCS#12 PFX in password integrity mode supported.")).oid=o.derToOid(l.contentType),c;var v=l.content.value[0];if(v.tagClass!==o.Class.UNIVERSAL||v.type!==o.Type.OCTETSTRING)throw new Error("PKCS#12 authSafe content data is not an OCTET STRING.");if(v=p(v),l.mac){var g=null,m=0,b=o.derToOid(l.macAlgorithm);switch(b){case i.oids.sha1:g=n.md.sha1.create(),m=20;break;case i.oids.sha256:g=n.md.sha256.create(),m=32;break;case i.oids.sha384:g=n.md.sha384.create(),m=48;break;case i.oids.sha512:g=n.md.sha512.create(),m=64;break;case i.oids.md5:g=n.md.md5.create(),m=16}if(null===g)throw new Error("PKCS#12 uses unsupported MAC algorithm: "+b);var w=new n.util.ByteBuffer(l.macSalt),S="macIterations"in l?parseInt(n.util.bytesToHex(l.macIterations),16):1,x=a.generateKey(r,w,3,S,m,g),_=n.hmac.create();if(_.start(g,x),_.update(v.value),_.getMac().getBytes()!==l.macDigest)throw new Error("PKCS#12 MAC could not be verified. Invalid password?")}return function(t,e,r,n){if((e=o.fromDer(e,r)).tagClass!==o.Class.UNIVERSAL||e.type!==o.Type.SEQUENCE||!0!==e.constructed)throw new Error("PKCS#12 AuthenticatedSafe expected to be a SEQUENCE OF ContentInfo");for(var a=0;a<e.value.length;a++){var u=e.value[a],l={},c=[];if(!o.validate(u,s,l,c))throw(g=new Error("Cannot read ContentInfo.")).errors=c,g;var f={encrypted:!1},h=null,v=l.content.value[0];switch(o.derToOid(l.contentType)){case i.oids.data:if(v.tagClass!==o.Class.UNIVERSAL||v.type!==o.Type.OCTETSTRING)throw new Error("PKCS#12 SafeContents Data is not an OCTET STRING.");h=p(v).value;break;case i.oids.encryptedData:h=d(v,n),f.encrypted=!0;break;default:var g;throw(g=new Error("Unsupported PKCS#12 contentType.")).contentType=o.derToOid(l.contentType),g}f.safeBags=y(h,r,n),t.safeContents.push(f)}}(f,v.value,e,r),f},a.toPkcs12Asn1=function(t,e,r,s){(s=s||{}).saltSize=s.saltSize||8,s.count=s.count||2048,s.algorithm=s.algorithm||s.encAlgorithm||"aes128","useMac"in s||(s.useMac=!0),"localKeyId"in s||(s.localKeyId=null),"generateLocalKeyId"in s||(s.generateLocalKeyId=!0);var u,l=s.localKeyId;if(null!==l)l=n.util.hexToBytes(l);else if(s.generateLocalKeyId)if(e){var c=n.util.isArray(e)?e[0]:e;"string"==typeof c&&(c=i.certificateFromPem(c)),(k=n.md.sha1.create()).update(o.toDer(i.certificateToAsn1(c)).getBytes()),l=k.digest().getBytes()}else l=n.random.getBytes(20);var f=[];null!==l&&f.push(o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(i.oids.localKeyId).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.SET,!0,[o.create(o.Class.UNIVERSAL,o.Type.OCTETSTRING,!1,l)])])),"friendlyName"in s&&f.push(o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(i.oids.friendlyName).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.SET,!0,[o.create(o.Class.UNIVERSAL,o.Type.BMPSTRING,!1,s.friendlyName)])])),f.length>0&&(u=o.create(o.Class.UNIVERSAL,o.Type.SET,!0,f));var h=[],p=[];null!==e&&(p=n.util.isArray(e)?e:[e]);for(var d=[],y=0;y<p.length;++y){"string"==typeof(e=p[y])&&(e=i.certificateFromPem(e));var v=0===y?u:void 0,g=i.certificateToAsn1(e),m=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(i.oids.certBag).getBytes()),o.create(o.Class.CONTEXT_SPECIFIC,0,!0,[o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(i.oids.x509Certificate).getBytes()),o.create(o.Class.CONTEXT_SPECIFIC,0,!0,[o.create(o.Class.UNIVERSAL,o.Type.OCTETSTRING,!1,o.toDer(g).getBytes())])])]),v]);d.push(m)}if(d.length>0){var b=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,d),w=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(i.oids.data).getBytes()),o.create(o.Class.CONTEXT_SPECIFIC,0,!0,[o.create(o.Class.UNIVERSAL,o.Type.OCTETSTRING,!1,o.toDer(b).getBytes())])]);h.push(w)}var S=null;if(null!==t){var x=i.wrapRsaPrivateKey(i.privateKeyToAsn1(t));S=null===r?o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(i.oids.keyBag).getBytes()),o.create(o.Class.CONTEXT_SPECIFIC,0,!0,[x]),u]):o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(i.oids.pkcs8ShroudedKeyBag).getBytes()),o.create(o.Class.CONTEXT_SPECIFIC,0,!0,[i.encryptPrivateKeyInfo(x,r,s)]),u]);var _=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[S]),E=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(i.oids.data).getBytes()),o.create(o.Class.CONTEXT_SPECIFIC,0,!0,[o.create(o.Class.UNIVERSAL,o.Type.OCTETSTRING,!1,o.toDer(_).getBytes())])]);h.push(E)}var O,P=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,h);if(s.useMac){var k=n.md.sha1.create(),C=new n.util.ByteBuffer(n.random.getBytes(s.saltSize)),T=s.count,A=(t=a.generateKey(r,C,3,T,20),n.hmac.create());A.start(k,t),A.update(o.toDer(P).getBytes());var M=A.getMac();O=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(i.oids.sha1).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.NULL,!1,"")]),o.create(o.Class.UNIVERSAL,o.Type.OCTETSTRING,!1,M.getBytes())]),o.create(o.Class.UNIVERSAL,o.Type.OCTETSTRING,!1,C.getBytes()),o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,o.integerToDer(T).getBytes())])}return o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,o.integerToDer(3).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(i.oids.data).getBytes()),o.create(o.Class.CONTEXT_SPECIFIC,0,!0,[o.create(o.Class.UNIVERSAL,o.Type.OCTETSTRING,!1,o.toDer(P).getBytes())])]),O])},a.generateKey=n.pbe.generatePkcs12Key},function(t,e,r){var n=r(0);r(3),r(1);var o=n.asn1,i=t.exports=n.pkcs7asn1=n.pkcs7asn1||{};n.pkcs7=n.pkcs7||{},n.pkcs7.asn1=i;var a={name:"ContentInfo",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.ContentType",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:o.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,captureAsn1:"content"}]};i.contentInfoValidator=a;var s={name:"EncryptedContentInfo",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentType",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"contentType"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentEncryptionAlgorithm.algorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm.parameter",tagClass:o.Class.UNIVERSAL,captureAsn1:"encParameter"}]},{name:"EncryptedContentInfo.encryptedContent",tagClass:o.Class.CONTEXT_SPECIFIC,type:0,capture:"encryptedContent",captureAsn1:"encryptedContentAsn1"}]};i.envelopedDataValidator={name:"EnvelopedData",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"EnvelopedData.Version",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"version"},{name:"EnvelopedData.RecipientInfos",tagClass:o.Class.UNIVERSAL,type:o.Type.SET,constructed:!0,captureAsn1:"recipientInfos"}].concat(s)},i.encryptedDataValidator={name:"EncryptedData",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedData.Version",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"version"}].concat(s)};var u={name:"SignerInfo",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.version",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1},{name:"SignerInfo.issuerAndSerialNumber",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.issuerAndSerialNumber.issuer",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"SignerInfo.issuerAndSerialNumber.serialNumber",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"SignerInfo.digestAlgorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.digestAlgorithm.algorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"digestAlgorithm"},{name:"SignerInfo.digestAlgorithm.parameter",tagClass:o.Class.UNIVERSAL,constructed:!1,captureAsn1:"digestParameter",optional:!0}]},{name:"SignerInfo.authenticatedAttributes",tagClass:o.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"authenticatedAttributes"},{name:"SignerInfo.digestEncryptionAlgorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,capture:"signatureAlgorithm"},{name:"SignerInfo.encryptedDigest",tagClass:o.Class.UNIVERSAL,type:o.Type.OCTETSTRING,constructed:!1,capture:"signature"},{name:"SignerInfo.unauthenticatedAttributes",tagClass:o.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,capture:"unauthenticatedAttributes"}]};i.signedDataValidator={name:"SignedData",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"SignedData.Version",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"version"},{name:"SignedData.DigestAlgorithms",tagClass:o.Class.UNIVERSAL,type:o.Type.SET,constructed:!0,captureAsn1:"digestAlgorithms"},a,{name:"SignedData.Certificates",tagClass:o.Class.CONTEXT_SPECIFIC,type:0,optional:!0,captureAsn1:"certificates"},{name:"SignedData.CertificateRevocationLists",tagClass:o.Class.CONTEXT_SPECIFIC,type:1,optional:!0,captureAsn1:"crls"},{name:"SignedData.SignerInfos",tagClass:o.Class.UNIVERSAL,type:o.Type.SET,capture:"signerInfos",optional:!0,value:[u]}]},i.recipientInfoValidator={name:"RecipientInfo",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.version",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"version"},{name:"RecipientInfo.issuerAndSerial",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.issuerAndSerial.issuer",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"RecipientInfo.issuerAndSerial.serialNumber",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"RecipientInfo.keyEncryptionAlgorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.keyEncryptionAlgorithm.algorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"RecipientInfo.keyEncryptionAlgorithm.parameter",tagClass:o.Class.UNIVERSAL,constructed:!1,captureAsn1:"encParameter",optional:!0}]},{name:"RecipientInfo.encryptedKey",tagClass:o.Class.UNIVERSAL,type:o.Type.OCTETSTRING,constructed:!1,capture:"encKey"}]}},function(t,e,r){var n=r(0);r(1),n.mgf=n.mgf||{},(t.exports=n.mgf.mgf1=n.mgf1=n.mgf1||{}).create=function(t){return{generate:function(e,r){for(var o=new n.util.ByteBuffer,i=Math.ceil(r/t.digestLength),a=0;a<i;a++){var s=new n.util.ByteBuffer;s.putInt32(a),t.start(),t.update(e+s.getBytes()),o.putBuffer(t.digest())}return o.truncate(o.length()-r),o.getBytes()}}}},function(t,e,r){var n=r(0);r(4),r(1);var o=t.exports=n.sha512=n.sha512||{};n.md.sha512=n.md.algorithms.sha512=o;var i=n.sha384=n.sha512.sha384=n.sha512.sha384||{};i.create=function(){return o.create("SHA-384")},n.md.sha384=n.md.algorithms.sha384=i,n.sha512.sha256=n.sha512.sha256||{create:function(){return o.create("SHA-512/256")}},n.md["sha512/256"]=n.md.algorithms["sha512/256"]=n.sha512.sha256,n.sha512.sha224=n.sha512.sha224||{create:function(){return o.create("SHA-512/224")}},n.md["sha512/224"]=n.md.algorithms["sha512/224"]=n.sha512.sha224,o.create=function(t){if(s||(a=String.fromCharCode(128),a+=n.util.fillString(String.fromCharCode(0),128),u=[[1116352408,3609767458],[1899447441,602891725],[3049323471,3964484399],[3921009573,2173295548],[961987163,4081628472],[1508970993,3053834265],[2453635748,2937671579],[2870763221,3664609560],[3624381080,2734883394],[310598401,1164996542],[607225278,1323610764],[1426881987,3590304994],[1925078388,4068182383],[2162078206,991336113],[2614888103,633803317],[3248222580,3479774868],[3835390401,2666613458],[4022224774,944711139],[264347078,2341262773],[604807628,2007800933],[770255983,1495990901],[1249150122,1856431235],[1555081692,3175218132],[1996064986,2198950837],[2554220882,3999719339],[2821834349,766784016],[2952996808,2566594879],[3210313671,3203337956],[3336571891,1034457026],[3584528711,2466948901],[113926993,3758326383],[338241895,168717936],[666307205,1188179964],[773529912,1546045734],[1294757372,1522805485],[1396182291,2643833823],[1695183700,2343527390],[1986661051,1014477480],[2177026350,1206759142],[2456956037,344077627],[2730485921,1290863460],[2820302411,3158454273],[3259730800,3505952657],[3345764771,106217008],[3516065817,3606008344],[3600352804,1432725776],[4094571909,1467031594],[275423344,851169720],[430227734,3100823752],[506948616,1363258195],[659060556,3750685593],[883997877,3785050280],[958139571,3318307427],[1322822218,3812723403],[1537002063,2003034995],[1747873779,3602036899],[1955562222,1575990012],[2024104815,1125592928],[2227730452,2716904306],[2361852424,442776044],[2428436474,593698344],[2756734187,3733110249],[3204031479,2999351573],[3329325298,3815920427],[3391569614,3928383900],[3515267271,566280711],[3940187606,3454069534],[4118630271,4000239992],[116418474,1914138554],[174292421,2731055270],[289380356,3203993006],[460393269,320620315],[685471733,587496836],[852142971,1086792851],[1017036298,365543100],[1126000580,2618297676],[1288033470,3409855158],[1501505948,4234509866],[1607167915,987167468],[1816402316,1246189591]],(l={})["SHA-512"]=[[1779033703,4089235720],[3144134277,2227873595],[1013904242,4271175723],[2773480762,1595750129],[1359893119,2917565137],[2600822924,725511199],[528734635,4215389547],[1541459225,327033209]],l["SHA-384"]=[[3418070365,3238371032],[1654270250,914150663],[2438529370,812702999],[355462360,4144912697],[1731405415,4290775857],[2394180231,1750603025],[3675008525,1694076839],[1203062813,3204075428]],l["SHA-512/256"]=[[573645204,4230739756],[2673172387,3360449730],[596883563,1867755857],[2520282905,1497426621],[2519219938,2827943907],[3193839141,1401305490],[721525244,746961066],[246885852,2177182882]],l["SHA-512/224"]=[[2352822216,424955298],[1944164710,2312950998],[502970286,855612546],[1738396948,1479516111],[258812777,2077511080],[2011393907,79989058],[1067287976,1780299464],[286451373,2446758561]],s=!0),void 0===t&&(t="SHA-512"),!(t in l))throw new Error("Invalid SHA-512 algorithm: "+t);for(var e=l[t],r=null,o=n.util.createBuffer(),i=new Array(80),f=0;f<80;++f)i[f]=new Array(2);var h=64;switch(t){case"SHA-384":h=48;break;case"SHA-512/256":h=32;break;case"SHA-512/224":h=28}var p={algorithm:t.replace("-","").toLowerCase(),blockLength:128,digestLength:h,messageLength:0,fullMessageLength:null,messageLengthSize:16,start:function(){p.messageLength=0,p.fullMessageLength=p.messageLength128=[];for(var t=p.messageLengthSize/4,i=0;i<t;++i)p.fullMessageLength.push(0);for(o=n.util.createBuffer(),r=new Array(e.length),i=0;i<e.length;++i)r[i]=e[i].slice(0);return p}};return p.start(),p.update=function(t,e){"utf8"===e&&(t=n.util.encodeUtf8(t));var a=t.length;p.messageLength+=a,a=[a/4294967296>>>0,a>>>0];for(var s=p.fullMessageLength.length-1;s>=0;--s)p.fullMessageLength[s]+=a[1],a[1]=a[0]+(p.fullMessageLength[s]/4294967296>>>0),p.fullMessageLength[s]=p.fullMessageLength[s]>>>0,a[0]=a[1]/4294967296>>>0;return o.putBytes(t),c(r,i,o),(o.read>2048||0===o.length())&&o.compact(),p},p.digest=function(){var e=n.util.createBuffer();e.putBytes(o.bytes());var s,u=p.fullMessageLength[p.fullMessageLength.length-1]+p.messageLengthSize&p.blockLength-1;e.putBytes(a.substr(0,p.blockLength-u));for(var l=8*p.fullMessageLength[0],f=0;f<p.fullMessageLength.length-1;++f)l+=(s=8*p.fullMessageLength[f+1])/4294967296>>>0,e.putInt32(l>>>0),l=s>>>0;e.putInt32(l);var h=new Array(r.length);for(f=0;f<r.length;++f)h[f]=r[f].slice(0);c(h,i,e);var d,y=n.util.createBuffer();for(d="SHA-512"===t?h.length:"SHA-384"===t?h.length-2:h.length-4,f=0;f<d;++f)y.putInt32(h[f][0]),f===d-1&&"SHA-512/224"===t||y.putInt32(h[f][1]);return y},p};var a=null,s=!1,u=null,l=null;function c(t,e,r){for(var n,o,i,a,s,l,c,f,h,p,d,y,v,g,m,b,w,S,x,_,E,O,P,k,C,T,A,M,j,I,N,L,R,D=r.length();D>=128;){for(A=0;A<16;++A)e[A][0]=r.getInt32()>>>0,e[A][1]=r.getInt32()>>>0;for(;A<80;++A)n=(((M=(I=e[A-2])[0])>>>19|(j=I[1])<<13)^(j>>>29|M<<3)^M>>>6)>>>0,o=((M<<13|j>>>19)^(j<<3|M>>>29)^(M<<26|j>>>6))>>>0,i=(((M=(L=e[A-15])[0])>>>1|(j=L[1])<<31)^(M>>>8|j<<24)^M>>>7)>>>0,a=((M<<31|j>>>1)^(M<<24|j>>>8)^(M<<25|j>>>7))>>>0,N=e[A-7],R=e[A-16],j=o+N[1]+a+R[1],e[A][0]=n+N[0]+i+R[0]+(j/4294967296>>>0)>>>0,e[A][1]=j>>>0;for(d=t[0][0],y=t[0][1],v=t[1][0],g=t[1][1],m=t[2][0],b=t[2][1],w=t[3][0],S=t[3][1],x=t[4][0],_=t[4][1],E=t[5][0],O=t[5][1],P=t[6][0],k=t[6][1],C=t[7][0],T=t[7][1],A=0;A<80;++A)c=((x>>>14|_<<18)^(x>>>18|_<<14)^(_>>>9|x<<23))>>>0,f=(P^x&(E^P))>>>0,s=((d>>>28|y<<4)^(y>>>2|d<<30)^(y>>>7|d<<25))>>>0,l=((d<<4|y>>>28)^(y<<30|d>>>2)^(y<<25|d>>>7))>>>0,h=(d&v|m&(d^v))>>>0,p=(y&g|b&(y^g))>>>0,j=T+(((x<<18|_>>>14)^(x<<14|_>>>18)^(_<<23|x>>>9))>>>0)+((k^_&(O^k))>>>0)+u[A][1]+e[A][1],n=C+c+f+u[A][0]+e[A][0]+(j/4294967296>>>0)>>>0,o=j>>>0,i=s+h+((j=l+p)/4294967296>>>0)>>>0,a=j>>>0,C=P,T=k,P=E,k=O,E=x,O=_,x=w+n+((j=S+o)/4294967296>>>0)>>>0,_=j>>>0,w=m,S=b,m=v,b=g,v=d,g=y,d=n+i+((j=o+a)/4294967296>>>0)>>>0,y=j>>>0;j=t[0][1]+y,t[0][0]=t[0][0]+d+(j/4294967296>>>0)>>>0,t[0][1]=j>>>0,j=t[1][1]+g,t[1][0]=t[1][0]+v+(j/4294967296>>>0)>>>0,t[1][1]=j>>>0,j=t[2][1]+b,t[2][0]=t[2][0]+m+(j/4294967296>>>0)>>>0,t[2][1]=j>>>0,j=t[3][1]+S,t[3][0]=t[3][0]+w+(j/4294967296>>>0)>>>0,t[3][1]=j>>>0,j=t[4][1]+_,t[4][0]=t[4][0]+x+(j/4294967296>>>0)>>>0,t[4][1]=j>>>0,j=t[5][1]+O,t[5][0]=t[5][0]+E+(j/4294967296>>>0)>>>0,t[5][1]=j>>>0,j=t[6][1]+k,t[6][0]=t[6][0]+P+(j/4294967296>>>0)>>>0,t[6][1]=j>>>0,j=t[7][1]+T,t[7][0]=t[7][0]+C+(j/4294967296>>>0)>>>0,t[7][1]=j>>>0,D-=128}}},function(t,e,r){t.exports=r(33)},function(t,e,r){t.exports=r(0),r(5),r(36),r(3),r(13),r(10),r(38),r(8),r(40),r(41),r(42),r(30),r(15),r(7),r(26),r(28),r(43),r(21),r(27),r(24),r(18),r(2),r(25),r(44),r(20),r(1)},function(t,e){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(t){"object"==("undefined"==typeof window?"undefined":s(window))&&(r=window)}t.exports=r},function(t,e){var r={};t.exports=r;var n={};r.encode=function(t,e,r){if("string"!=typeof e)throw new TypeError('"alphabet" must be a string.');if(void 0!==r&&"number"!=typeof r)throw new TypeError('"maxline" must be a number.');var n="";if(t instanceof Uint8Array){var o=0,i=e.length,a=e.charAt(0),s=[0];for(o=0;o<t.length;++o){for(var u=0,l=t[o];u<s.length;++u)l+=s[u]<<8,s[u]=l%i,l=l/i|0;for(;l>0;)s.push(l%i),l=l/i|0}for(o=0;0===t[o]&&o<t.length-1;++o)n+=a;for(o=s.length-1;o>=0;--o)n+=e[s[o]]}else n=function(t,e){var r=0,n=e.length,o=e.charAt(0),i=[0];for(r=0;r<t.length();++r){for(var a=0,s=t.at(r);a<i.length;++a)s+=i[a]<<8,i[a]=s%n,s=s/n|0;for(;s>0;)i.push(s%n),s=s/n|0}var u="";for(r=0;0===t.at(r)&&r<t.length()-1;++r)u+=o;for(r=i.length-1;r>=0;--r)u+=e[i[r]];return u}(t,e);if(r){var c=new RegExp(".{1,"+r+"}","g");n=n.match(c).join("\r\n")}return n},r.decode=function(t,e){if("string"!=typeof t)throw new TypeError('"input" must be a string.');if("string"!=typeof e)throw new TypeError('"alphabet" must be a string.');var r=n[e];if(!r){r=n[e]=[];for(var o=0;o<e.length;++o)r[e.charCodeAt(o)]=o}t=t.replace(/\s/g,"");var i=e.length,a=e.charAt(0),s=[0];for(o=0;o<t.length;o++){var u=r[t.charCodeAt(o)];if(void 0===u)return;for(var l=0,c=u;l<s.length;++l)c+=s[l]*i,s[l]=255&c,c>>=8;for(;c>0;)s.push(255&c),c>>=8}for(var f=0;t[f]===a&&f<t.length-1;++f)s.push(0);return"undefined"!=typeof Buffer?Buffer.from(s.reverse()):new Uint8Array(s.reverse())}},function(t,e,r){var n=r(0);r(5),r(20);var o=t.exports=n.tls;function i(t,e,r){var i=e.entity===n.tls.ConnectionEnd.client;t.read.cipherState={init:!1,cipher:n.cipher.createDecipher("AES-CBC",i?r.keys.server_write_key:r.keys.client_write_key),iv:i?r.keys.server_write_IV:r.keys.client_write_IV},t.write.cipherState={init:!1,cipher:n.cipher.createCipher("AES-CBC",i?r.keys.client_write_key:r.keys.server_write_key),iv:i?r.keys.client_write_IV:r.keys.server_write_IV},t.read.cipherFunction=l,t.write.cipherFunction=a,t.read.macLength=t.write.macLength=r.mac_length,t.read.macFunction=t.write.macFunction=o.hmac_sha1}function a(t,e){var r,i=!1,a=e.macFunction(e.macKey,e.sequenceNumber,t);t.fragment.putBytes(a),e.updateSequenceNumber(),r=t.version.minor===o.Versions.TLS_1_0.minor?e.cipherState.init?null:e.cipherState.iv:n.random.getBytesSync(16),e.cipherState.init=!0;var u=e.cipherState.cipher;return u.start({iv:r}),t.version.minor>=o.Versions.TLS_1_1.minor&&u.output.putBytes(r),u.update(t.fragment),u.finish(s)&&(t.fragment=u.output,t.length=t.fragment.length(),i=!0),i}function s(t,e,r){if(!r){var n=t-e.length()%t;e.fillWithByte(n-1,n)}return!0}function u(t,e,r){var n=!0;if(r){for(var o=e.length(),i=e.last(),a=o-1-i;a<o-1;++a)n=n&&e.at(a)==i;n&&e.truncate(i+1)}return n}function l(t,e){var r,i=!1;r=t.version.minor===o.Versions.TLS_1_0.minor?e.cipherState.init?null:e.cipherState.iv:t.fragment.getBytes(16),e.cipherState.init=!0;var a=e.cipherState.cipher;a.start({iv:r}),a.update(t.fragment),i=a.finish(u);var s=e.macLength,l=n.random.getBytesSync(s),c=a.output.length();c>=s?(t.fragment=a.output.getBytes(c-s),l=a.output.getBytes(s)):t.fragment=a.output.getBytes(),t.fragment=n.util.createBuffer(t.fragment),t.length=t.fragment.length();var f=e.macFunction(e.macKey,e.sequenceNumber,t);return e.updateSequenceNumber(),function(t,e,r){var o=n.hmac.create();return o.start("SHA1",t),o.update(e),e=o.digest().getBytes(),o.start(null,null),o.update(r),e===(r=o.digest().getBytes())}(e.macKey,l,f)&&i}o.CipherSuites.TLS_RSA_WITH_AES_128_CBC_SHA={id:[0,47],name:"TLS_RSA_WITH_AES_128_CBC_SHA",initSecurityParameters:function(t){t.bulk_cipher_algorithm=o.BulkCipherAlgorithm.aes,t.cipher_type=o.CipherType.block,t.enc_key_length=16,t.block_length=16,t.fixed_iv_length=16,t.record_iv_length=16,t.mac_algorithm=o.MACAlgorithm.hmac_sha1,t.mac_length=20,t.mac_key_length=20},initConnectionState:i},o.CipherSuites.TLS_RSA_WITH_AES_256_CBC_SHA={id:[0,53],name:"TLS_RSA_WITH_AES_256_CBC_SHA",initSecurityParameters:function(t){t.bulk_cipher_algorithm=o.BulkCipherAlgorithm.aes,t.cipher_type=o.CipherType.block,t.enc_key_length=32,t.block_length=16,t.fixed_iv_length=16,t.record_iv_length=16,t.mac_algorithm=o.MACAlgorithm.hmac_sha1,t.mac_length=20,t.mac_key_length=20},initConnectionState:i}},function(t,e,r){var n=r(0);r(30),t.exports=n.mgf=n.mgf||{},n.mgf.mgf1=n.mgf1},function(t,e,r){var n=r(0);r(12),r(2),r(31),r(1);var o=r(39),i=o.publicKeyValidator,a=o.privateKeyValidator;if(void 0===s)var s=n.jsbn.BigInteger;var u=n.util.ByteBuffer,l="undefined"==typeof Buffer?Uint8Array:Buffer;n.pki=n.pki||{},t.exports=n.pki.ed25519=n.ed25519=n.ed25519||{};var c=n.ed25519;function f(t){var e=t.message;if(e instanceof Uint8Array||e instanceof l)return e;var r=t.encoding;if(void 0===e){if(!t.md)throw new TypeError('"options.message" or "options.md" not specified.');e=t.md.digest().getBytes(),r="binary"}if("string"==typeof e&&!r)throw new TypeError('"options.encoding" must be "binary" or "utf8".');if("string"==typeof e){if("undefined"!=typeof Buffer)return Buffer.from(e,r);e=new u(e,r)}else if(!(e instanceof u))throw new TypeError('"options.message" must be a node.js Buffer, a Uint8Array, a forge ByteBuffer, or a string with "options.encoding" specifying its encoding.');for(var n=new l(e.length()),o=0;o<n.length;++o)n[o]=e.at(o);return n}c.constants={},c.constants.PUBLIC_KEY_BYTE_LENGTH=32,c.constants.PRIVATE_KEY_BYTE_LENGTH=64,c.constants.SEED_BYTE_LENGTH=32,c.constants.SIGN_BYTE_LENGTH=64,c.constants.HASH_BYTE_LENGTH=64,c.generateKeyPair=function(t){var e=(t=t||{}).seed;if(void 0===e)e=n.random.getBytesSync(c.constants.SEED_BYTE_LENGTH);else if("string"==typeof e){if(e.length!==c.constants.SEED_BYTE_LENGTH)throw new TypeError('"seed" must be '+c.constants.SEED_BYTE_LENGTH+" bytes in length.")}else if(!(e instanceof Uint8Array))throw new TypeError('"seed" must be a node.js Buffer, Uint8Array, or a binary string.');e=f({message:e,encoding:"binary"});for(var r=new l(c.constants.PUBLIC_KEY_BYTE_LENGTH),o=new l(c.constants.PRIVATE_KEY_BYTE_LENGTH),i=0;i<32;++i)o[i]=e[i];return function(t,e){var r,n=[L(),L(),L(),L()],o=w(e,32);for(o[0]&=248,o[31]&=127,o[31]|=64,M(n,o),O(t,n),r=0;r<32;++r)e[r+32]=t[r]}(r,o),{publicKey:r,privateKey:o}},c.privateKeyFromAsn1=function(t){var e={},r=[];if(!n.asn1.validate(t,a,e,r)){var o=new Error("Invalid Key.");throw o.errors=r,o}var i=n.asn1.derToOid(e.privateKeyOid),s=n.oids.EdDSA25519;if(i!==s)throw new Error('Invalid OID "'+i+'"; OID must be "'+s+'".');var u=e.privateKey;return{privateKeyBytes:f({message:n.asn1.fromDer(u).value,encoding:"binary"})}},c.publicKeyFromAsn1=function(t){var e={},r=[];if(!n.asn1.validate(t,i,e,r)){var o=new Error("Invalid Key.");throw o.errors=r,o}var a=n.asn1.derToOid(e.publicKeyOid),s=n.oids.EdDSA25519;if(a!==s)throw new Error('Invalid OID "'+a+'"; OID must be "'+s+'".');var u=e.ed25519PublicKey;if(u.length!==c.constants.PUBLIC_KEY_BYTE_LENGTH)throw new Error("Key length is invalid.");return f({message:u,encoding:"binary"})},c.publicKeyFromPrivateKey=function(t){var e=f({message:(t=t||{}).privateKey,encoding:"binary"});if(e.length!==c.constants.PRIVATE_KEY_BYTE_LENGTH)throw new TypeError('"options.privateKey" must have a byte length of '+c.constants.PRIVATE_KEY_BYTE_LENGTH);for(var r=new l(c.constants.PUBLIC_KEY_BYTE_LENGTH),n=0;n<r.length;++n)r[n]=e[32+n];return r},c.sign=function(t){var e=f(t=t||{}),r=f({message:t.privateKey,encoding:"binary"});if(r.length===c.constants.SEED_BYTE_LENGTH)r=c.generateKeyPair({seed:r}).privateKey;else if(r.length!==c.constants.PRIVATE_KEY_BYTE_LENGTH)throw new TypeError('"options.privateKey" must have a byte length of '+c.constants.SEED_BYTE_LENGTH+" or "+c.constants.PRIVATE_KEY_BYTE_LENGTH);var n=new l(c.constants.SIGN_BYTE_LENGTH+e.length);!function(t,e,r,n){var o,i,a=new Float64Array(64),s=[L(),L(),L(),L()],u=w(n,32);u[0]&=248,u[31]&=127,u[31]|=64;for(o=0;o<r;++o)t[64+o]=e[o];for(o=0;o<32;++o)t[32+o]=u[32+o];var l=w(t.subarray(32),r+32);for(x(l),M(s,l),O(t,s),o=32;o<64;++o)t[o]=n[o];var c=w(t,r+64);for(x(c),o=32;o<64;++o)a[o]=0;for(o=0;o<32;++o)a[o]=l[o];for(o=0;o<32;++o)for(i=0;i<32;i++)a[o+i]+=c[o]*u[i];S(t.subarray(32),a)}(n,e,e.length,r);for(var o=new l(c.constants.SIGN_BYTE_LENGTH),i=0;i<o.length;++i)o[i]=n[i];return o},c.verify=function(t){var e=f(t=t||{});if(void 0===t.signature)throw new TypeError('"options.signature" must be a node.js Buffer, a Uint8Array, a forge ByteBuffer, or a binary string.');var r=f({message:t.signature,encoding:"binary"});if(r.length!==c.constants.SIGN_BYTE_LENGTH)throw new TypeError('"options.signature" must have a byte length of '+c.constants.SIGN_BYTE_LENGTH);var n=f({message:t.publicKey,encoding:"binary"});if(n.length!==c.constants.PUBLIC_KEY_BYTE_LENGTH)throw new TypeError('"options.publicKey" must have a byte length of '+c.constants.PUBLIC_KEY_BYTE_LENGTH);var o,i=new l(c.constants.SIGN_BYTE_LENGTH+e.length),a=new l(c.constants.SIGN_BYTE_LENGTH+e.length);for(o=0;o<c.constants.SIGN_BYTE_LENGTH;++o)i[o]=r[o];for(o=0;o<e.length;++o)i[o+c.constants.SIGN_BYTE_LENGTH]=e[o];return function(t,e,r,n){var o,i=new l(32),a=[L(),L(),L(),L()],s=[L(),L(),L(),L()];if(r<64)return-1;if(function(t,e){var r=L(),n=L(),o=L(),i=L(),a=L(),s=L(),u=L();return j(t[2],p),function(t,e){var r;for(r=0;r<16;++r)t[r]=e[2*r]+(e[2*r+1]<<8);t[15]&=32767}(t[1],e),B(o,t[1]),F(i,o,d),D(o,o,t[2]),R(i,t[2],i),B(a,i),B(s,a),F(u,s,a),F(r,u,o),F(r,r,i),function(t,e){var r,n=L();for(r=0;r<16;++r)n[r]=e[r];for(r=250;r>=0;--r)B(n,n),1!==r&&F(n,n,e);for(r=0;r<16;++r)t[r]=n[r]}(r,r),F(r,r,o),F(r,r,i),F(r,r,i),F(t[0],r,i),B(n,t[0]),F(n,n,i),k(n,o)&&F(t[0],t[0],b),B(n,t[0]),F(n,n,i),k(n,o)?-1:(T(t[0])===e[31]>>7&&D(t[0],h,t[0]),F(t[3],t[0],t[1]),0)}(s,n))return-1;for(o=0;o<r;++o)t[o]=e[o];for(o=0;o<32;++o)t[o+32]=n[o];var u=w(t,r);if(x(u),A(a,s,u),M(s,e.subarray(32)),_(a,s),O(i,a),r-=64,C(e,0,i,0)){for(o=0;o<r;++o)t[o]=0;return-1}for(o=0;o<r;++o)t[o]=e[o+64];return r}(a,i,i.length,n)>=0};var h=L(),p=L([1]),d=L([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),y=L([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),v=L([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),g=L([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),m=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]),b=L([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function w(t,e){var r=n.md.sha512.create(),o=new u(t);r.update(o.getBytes(e),"binary");var i=r.digest().getBytes();if("undefined"!=typeof Buffer)return Buffer.from(i,"binary");for(var a=new l(c.constants.HASH_BYTE_LENGTH),s=0;s<64;++s)a[s]=i.charCodeAt(s);return a}function S(t,e){var r,n,o,i;for(n=63;n>=32;--n){for(r=0,o=n-32,i=n-12;o<i;++o)e[o]+=r-16*e[n]*m[o-(n-32)],r=e[o]+128>>8,e[o]-=256*r;e[o]+=r,e[n]=0}for(r=0,o=0;o<32;++o)e[o]+=r-(e[31]>>4)*m[o],r=e[o]>>8,e[o]&=255;for(o=0;o<32;++o)e[o]-=r*m[o];for(n=0;n<32;++n)e[n+1]+=e[n]>>8,t[n]=255&e[n]}function x(t){for(var e=new Float64Array(64),r=0;r<64;++r)e[r]=t[r],t[r]=0;S(t,e)}function _(t,e){var r=L(),n=L(),o=L(),i=L(),a=L(),s=L(),u=L(),l=L(),c=L();D(r,t[1],t[0]),D(c,e[1],e[0]),F(r,r,c),R(n,t[0],t[1]),R(c,e[0],e[1]),F(n,n,c),F(o,t[3],e[3]),F(o,o,y),F(i,t[2],e[2]),R(i,i,i),D(a,n,r),D(s,i,o),R(u,i,o),R(l,n,r),F(t[0],a,s),F(t[1],l,u),F(t[2],u,s),F(t[3],a,l)}function E(t,e,r){for(var n=0;n<4;++n)N(t[n],e[n],r)}function O(t,e){var r=L(),n=L(),o=L();!function(t,e){var r,n=L();for(r=0;r<16;++r)n[r]=e[r];for(r=253;r>=0;--r)B(n,n),2!==r&&4!==r&&F(n,n,e);for(r=0;r<16;++r)t[r]=n[r]}(o,e[2]),F(r,e[0],o),F(n,e[1],o),P(t,n),t[31]^=T(r)<<7}function P(t,e){var r,n,o,i=L(),a=L();for(r=0;r<16;++r)a[r]=e[r];for(I(a),I(a),I(a),n=0;n<2;++n){for(i[0]=a[0]-65517,r=1;r<15;++r)i[r]=a[r]-65535-(i[r-1]>>16&1),i[r-1]&=65535;i[15]=a[15]-32767-(i[14]>>16&1),o=i[15]>>16&1,i[14]&=65535,N(a,i,1-o)}for(r=0;r<16;r++)t[2*r]=255&a[r],t[2*r+1]=a[r]>>8}function k(t,e){var r=new l(32),n=new l(32);return P(r,t),P(n,e),C(r,0,n,0)}function C(t,e,r,n){return function(t,e,r,n,o){var i,a=0;for(i=0;i<32;++i)a|=t[e+i]^r[n+i];return(1&a-1>>>8)-1}(t,e,r,n)}function T(t){var e=new l(32);return P(e,t),1&e[0]}function A(t,e,r){var n,o;for(j(t[0],h),j(t[1],p),j(t[2],p),j(t[3],h),o=255;o>=0;--o)E(t,e,n=r[o/8|0]>>(7&o)&1),_(e,t),_(t,t),E(t,e,n)}function M(t,e){var r=[L(),L(),L(),L()];j(r[0],v),j(r[1],g),j(r[2],p),F(r[3],v,g),A(t,r,e)}function j(t,e){var r;for(r=0;r<16;r++)t[r]=0|e[r]}function I(t){var e,r,n=1;for(e=0;e<16;++e)r=t[e]+n+65535,n=Math.floor(r/65536),t[e]=r-65536*n;t[0]+=n-1+37*(n-1)}function N(t,e,r){for(var n,o=~(r-1),i=0;i<16;++i)n=o&(t[i]^e[i]),t[i]^=n,e[i]^=n}function L(t){var e,r=new Float64Array(16);if(t)for(e=0;e<t.length;++e)r[e]=t[e];return r}function R(t,e,r){for(var n=0;n<16;++n)t[n]=e[n]+r[n]}function D(t,e,r){for(var n=0;n<16;++n)t[n]=e[n]-r[n]}function B(t,e){F(t,e,e)}function F(t,e,r){var n,o,i=0,a=0,s=0,u=0,l=0,c=0,f=0,h=0,p=0,d=0,y=0,v=0,g=0,m=0,b=0,w=0,S=0,x=0,_=0,E=0,O=0,P=0,k=0,C=0,T=0,A=0,M=0,j=0,I=0,N=0,L=0,R=r[0],D=r[1],B=r[2],F=r[3],G=r[4],U=r[5],z=r[6],V=r[7],H=r[8],W=r[9],q=r[10],Y=r[11],X=r[12],J=r[13],K=r[14],Q=r[15];i+=(n=e[0])*R,a+=n*D,s+=n*B,u+=n*F,l+=n*G,c+=n*U,f+=n*z,h+=n*V,p+=n*H,d+=n*W,y+=n*q,v+=n*Y,g+=n*X,m+=n*J,b+=n*K,w+=n*Q,a+=(n=e[1])*R,s+=n*D,u+=n*B,l+=n*F,c+=n*G,f+=n*U,h+=n*z,p+=n*V,d+=n*H,y+=n*W,v+=n*q,g+=n*Y,m+=n*X,b+=n*J,w+=n*K,S+=n*Q,s+=(n=e[2])*R,u+=n*D,l+=n*B,c+=n*F,f+=n*G,h+=n*U,p+=n*z,d+=n*V,y+=n*H,v+=n*W,g+=n*q,m+=n*Y,b+=n*X,w+=n*J,S+=n*K,x+=n*Q,u+=(n=e[3])*R,l+=n*D,c+=n*B,f+=n*F,h+=n*G,p+=n*U,d+=n*z,y+=n*V,v+=n*H,g+=n*W,m+=n*q,b+=n*Y,w+=n*X,S+=n*J,x+=n*K,_+=n*Q,l+=(n=e[4])*R,c+=n*D,f+=n*B,h+=n*F,p+=n*G,d+=n*U,y+=n*z,v+=n*V,g+=n*H,m+=n*W,b+=n*q,w+=n*Y,S+=n*X,x+=n*J,_+=n*K,E+=n*Q,c+=(n=e[5])*R,f+=n*D,h+=n*B,p+=n*F,d+=n*G,y+=n*U,v+=n*z,g+=n*V,m+=n*H,b+=n*W,w+=n*q,S+=n*Y,x+=n*X,_+=n*J,E+=n*K,O+=n*Q,f+=(n=e[6])*R,h+=n*D,p+=n*B,d+=n*F,y+=n*G,v+=n*U,g+=n*z,m+=n*V,b+=n*H,w+=n*W,S+=n*q,x+=n*Y,_+=n*X,E+=n*J,O+=n*K,P+=n*Q,h+=(n=e[7])*R,p+=n*D,d+=n*B,y+=n*F,v+=n*G,g+=n*U,m+=n*z,b+=n*V,w+=n*H,S+=n*W,x+=n*q,_+=n*Y,E+=n*X,O+=n*J,P+=n*K,k+=n*Q,p+=(n=e[8])*R,d+=n*D,y+=n*B,v+=n*F,g+=n*G,m+=n*U,b+=n*z,w+=n*V,S+=n*H,x+=n*W,_+=n*q,E+=n*Y,O+=n*X,P+=n*J,k+=n*K,C+=n*Q,d+=(n=e[9])*R,y+=n*D,v+=n*B,g+=n*F,m+=n*G,b+=n*U,w+=n*z,S+=n*V,x+=n*H,_+=n*W,E+=n*q,O+=n*Y,P+=n*X,k+=n*J,C+=n*K,T+=n*Q,y+=(n=e[10])*R,v+=n*D,g+=n*B,m+=n*F,b+=n*G,w+=n*U,S+=n*z,x+=n*V,_+=n*H,E+=n*W,O+=n*q,P+=n*Y,k+=n*X,C+=n*J,T+=n*K,A+=n*Q,v+=(n=e[11])*R,g+=n*D,m+=n*B,b+=n*F,w+=n*G,S+=n*U,x+=n*z,_+=n*V,E+=n*H,O+=n*W,P+=n*q,k+=n*Y,C+=n*X,T+=n*J,A+=n*K,M+=n*Q,g+=(n=e[12])*R,m+=n*D,b+=n*B,w+=n*F,S+=n*G,x+=n*U,_+=n*z,E+=n*V,O+=n*H,P+=n*W,k+=n*q,C+=n*Y,T+=n*X,A+=n*J,M+=n*K,j+=n*Q,m+=(n=e[13])*R,b+=n*D,w+=n*B,S+=n*F,x+=n*G,_+=n*U,E+=n*z,O+=n*V,P+=n*H,k+=n*W,C+=n*q,T+=n*Y,A+=n*X,M+=n*J,j+=n*K,I+=n*Q,b+=(n=e[14])*R,w+=n*D,S+=n*B,x+=n*F,_+=n*G,E+=n*U,O+=n*z,P+=n*V,k+=n*H,C+=n*W,T+=n*q,A+=n*Y,M+=n*X,j+=n*J,I+=n*K,N+=n*Q,w+=(n=e[15])*R,a+=38*(x+=n*B),s+=38*(_+=n*F),u+=38*(E+=n*G),l+=38*(O+=n*U),c+=38*(P+=n*z),f+=38*(k+=n*V),h+=38*(C+=n*H),p+=38*(T+=n*W),d+=38*(A+=n*q),y+=38*(M+=n*Y),v+=38*(j+=n*X),g+=38*(I+=n*J),m+=38*(N+=n*K),b+=38*(L+=n*Q),i=(n=(i+=38*(S+=n*D))+(o=1)+65535)-65536*(o=Math.floor(n/65536)),a=(n=a+o+65535)-65536*(o=Math.floor(n/65536)),s=(n=s+o+65535)-65536*(o=Math.floor(n/65536)),u=(n=u+o+65535)-65536*(o=Math.floor(n/65536)),l=(n=l+o+65535)-65536*(o=Math.floor(n/65536)),c=(n=c+o+65535)-65536*(o=Math.floor(n/65536)),f=(n=f+o+65535)-65536*(o=Math.floor(n/65536)),h=(n=h+o+65535)-65536*(o=Math.floor(n/65536)),p=(n=p+o+65535)-65536*(o=Math.floor(n/65536)),d=(n=d+o+65535)-65536*(o=Math.floor(n/65536)),y=(n=y+o+65535)-65536*(o=Math.floor(n/65536)),v=(n=v+o+65535)-65536*(o=Math.floor(n/65536)),g=(n=g+o+65535)-65536*(o=Math.floor(n/65536)),m=(n=m+o+65535)-65536*(o=Math.floor(n/65536)),b=(n=b+o+65535)-65536*(o=Math.floor(n/65536)),w=(n=w+o+65535)-65536*(o=Math.floor(n/65536)),i=(n=(i+=o-1+37*(o-1))+(o=1)+65535)-65536*(o=Math.floor(n/65536)),a=(n=a+o+65535)-65536*(o=Math.floor(n/65536)),s=(n=s+o+65535)-65536*(o=Math.floor(n/65536)),u=(n=u+o+65535)-65536*(o=Math.floor(n/65536)),l=(n=l+o+65535)-65536*(o=Math.floor(n/65536)),c=(n=c+o+65535)-65536*(o=Math.floor(n/65536)),f=(n=f+o+65535)-65536*(o=Math.floor(n/65536)),h=(n=h+o+65535)-65536*(o=Math.floor(n/65536)),p=(n=p+o+65535)-65536*(o=Math.floor(n/65536)),d=(n=d+o+65535)-65536*(o=Math.floor(n/65536)),y=(n=y+o+65535)-65536*(o=Math.floor(n/65536)),v=(n=v+o+65535)-65536*(o=Math.floor(n/65536)),g=(n=g+o+65535)-65536*(o=Math.floor(n/65536)),m=(n=m+o+65535)-65536*(o=Math.floor(n/65536)),b=(n=b+o+65535)-65536*(o=Math.floor(n/65536)),w=(n=w+o+65535)-65536*(o=Math.floor(n/65536)),i+=o-1+37*(o-1),t[0]=i,t[1]=a,t[2]=s,t[3]=u,t[4]=l,t[5]=c,t[6]=f,t[7]=h,t[8]=p,t[9]=d,t[10]=y,t[11]=v,t[12]=g,t[13]=m,t[14]=b,t[15]=w}},function(t,e,r){var n=r(0);r(3);var o=n.asn1;e.privateKeyValidator={name:"PrivateKeyInfo",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:o.Class.UNIVERSAL,type:o.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]},e.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{tagClass:o.Class.UNIVERSAL,type:o.Type.BITSTRING,constructed:!1,composed:!0,captureBitStringValue:"ed25519PublicKey"}]}},function(t,e,r){var n=r(0);r(1),r(2),r(12),t.exports=n.kem=n.kem||{};var o=n.jsbn.BigInteger;function i(t,e,r,o){t.generate=function(t,i){for(var a=new n.util.ByteBuffer,s=Math.ceil(i/o)+r,u=new n.util.ByteBuffer,l=r;l<s;++l){u.putInt32(l),e.start(),e.update(t+u.getBytes());var c=e.digest();a.putBytes(c.getBytes(o))}return a.truncate(a.length()-i),a.getBytes()}}n.kem.rsa={},n.kem.rsa.create=function(t,e){var r=(e=e||{}).prng||n.random;return{encrypt:function(e,i){var a,s=Math.ceil(e.n.bitLength()/8);do{a=new o(n.util.bytesToHex(r.getBytesSync(s)),16).mod(e.n)}while(a.compareTo(o.ONE)<=0);var u=s-(a=n.util.hexToBytes(a.toString(16))).length;return u>0&&(a=n.util.fillString(String.fromCharCode(0),u)+a),{encapsulation:e.encrypt(a,"NONE"),key:t.generate(a,i)}},decrypt:function(e,r,n){var o=e.decrypt(r,"NONE");return t.generate(o,n)}}},n.kem.kdf1=function(t,e){i(this,t,0,e||t.digestLength)},n.kem.kdf2=function(t,e){i(this,t,1,e||t.digestLength)}},function(t,e,r){var n=r(0);r(1),t.exports=n.log=n.log||{},n.log.levels=["none","error","warning","info","debug","verbose","max"];var o={},i=[],a=null;n.log.LEVEL_LOCKED=2,n.log.NO_LEVEL_CHECK=4,n.log.INTERPOLATE=8;for(var s=0;s<n.log.levels.length;++s){var u=n.log.levels[s];o[u]={index:s,name:u.toUpperCase()}}n.log.logMessage=function(t){for(var e=o[t.level].index,r=0;r<i.length;++r){var a=i[r];a.flags&n.log.NO_LEVEL_CHECK?a.f(t):e<=o[a.level].index&&a.f(a,t)}},n.log.prepareStandard=function(t){"standard"in t||(t.standard=o[t.level].name+" ["+t.category+"] "+t.message)},n.log.prepareFull=function(t){if(!("full"in t)){var e=[t.message];e=e.concat([]||0),t.full=n.util.format.apply(this,e)}},n.log.prepareStandardFull=function(t){"standardFull"in t||(n.log.prepareStandard(t),t.standardFull=t.standard)};var l=["error","warning","info","debug","verbose"];for(s=0;s<l.length;++s)!function(t){n.log[t]=function(e,r){var o=Array.prototype.slice.call(arguments).slice(2),i={timestamp:new Date,level:t,category:e,message:r,arguments:o};n.log.logMessage(i)}}(l[s]);if(n.log.makeLogger=function(t){var e={flags:0,f:t};return n.log.setLevel(e,"none"),e},n.log.setLevel=function(t,e){var r=!1;if(t&&!(t.flags&n.log.LEVEL_LOCKED))for(var o=0;o<n.log.levels.length;++o)if(e==n.log.levels[o]){t.level=e,r=!0;break}return r},n.log.lock=function(t,e){void 0===e||e?t.flags|=n.log.LEVEL_LOCKED:t.flags&=~n.log.LEVEL_LOCKED},n.log.addLogger=function(t){i.push(t)},"undefined"!=typeof console&&"log"in console){var c;if(console.error&&console.warn&&console.info&&console.debug){var f={error:console.error,warning:console.warn,info:console.info,debug:console.debug,verbose:console.debug},h=function(t,e){n.log.prepareStandard(e);var r=f[e.level],o=[e.standard];o=o.concat(e.arguments.slice()),r.apply(console,o)};c=n.log.makeLogger(h)}else h=function(t,e){n.log.prepareStandardFull(e),console.log(e.standardFull)},c=n.log.makeLogger(h);n.log.setLevel(c,"debug"),n.log.addLogger(c),a=c}else console={log:function(){}};if(null!==a&&"undefined"!=typeof window&&window.location){var p=new URL(window.location.href).searchParams;p.has("console.level")&&n.log.setLevel(a,p.get("console.level").slice(-1)[0]),p.has("console.lock")&&"true"==p.get("console.lock").slice(-1)[0]&&n.log.lock(a)}n.log.consoleLogger=a},function(t,e,r){t.exports=r(4),r(14),r(9),r(23),r(31)},function(t,e,r){var n=r(0);r(5),r(3),r(10),r(6),r(7),r(29),r(2),r(1),r(17);var o=n.asn1,i=t.exports=n.pkcs7=n.pkcs7||{};function a(t){var e={},r=[];if(!o.validate(t,i.asn1.recipientInfoValidator,e,r)){var a=new Error("Cannot read PKCS#7 RecipientInfo. ASN.1 object is not an PKCS#7 RecipientInfo.");throw a.errors=r,a}return{version:e.version.charCodeAt(0),issuer:n.pki.RDNAttributesAsArray(e.issuer),serialNumber:n.util.createBuffer(e.serial).toHex(),encryptedContent:{algorithm:o.derToOid(e.encAlgorithm),parameter:e.encParameter?e.encParameter.value:void 0,content:e.encKey}}}function u(t){var e=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,o.integerToDer(t.version).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[n.pki.distinguishedNameToAsn1({attributes:t.issuer}),o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,n.util.hexToBytes(t.serialNumber))]),o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(t.digestAlgorithm).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.NULL,!1,"")])]);if(t.authenticatedAttributesAsn1&&e.value.push(t.authenticatedAttributesAsn1),e.value.push(o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(t.signatureAlgorithm).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.NULL,!1,"")])),e.value.push(o.create(o.Class.UNIVERSAL,o.Type.OCTETSTRING,!1,t.signature)),t.unauthenticatedAttributes.length>0){for(var r=o.create(o.Class.CONTEXT_SPECIFIC,1,!0,[]),i=0;i<t.unauthenticatedAttributes.length;++i){var a=t.unauthenticatedAttributes[i];r.values.push(l(a))}e.value.push(r)}return e}function l(t){var e;if(t.type===n.pki.oids.contentType)e=o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(t.value).getBytes());else if(t.type===n.pki.oids.messageDigest)e=o.create(o.Class.UNIVERSAL,o.Type.OCTETSTRING,!1,t.value.bytes());else if(t.type===n.pki.oids.signingTime){var r=new Date("1950-01-01T00:00:00Z"),i=new Date("2050-01-01T00:00:00Z"),a=t.value;if("string"==typeof a){var s=Date.parse(a);a=isNaN(s)?13===a.length?o.utcTimeToDate(a):o.generalizedTimeToDate(a):new Date(s)}e=a>=r&&a<i?o.create(o.Class.UNIVERSAL,o.Type.UTCTIME,!1,o.dateToUtcTime(a)):o.create(o.Class.UNIVERSAL,o.Type.GENERALIZEDTIME,!1,o.dateToGeneralizedTime(a))}return o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(t.type).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.SET,!0,[e])])}function c(t,e,r){var i={};if(!o.validate(e,r,i,[])){var a=new Error("Cannot read PKCS#7 message. ASN.1 object is not a supported PKCS#7 message.");throw a.errors=a,a}if(o.derToOid(i.contentType)!==n.pki.oids.data)throw new Error("Unsupported PKCS#7 message. Only wrapped ContentType Data supported.");if(i.encryptedContent){var s="";if(n.util.isArray(i.encryptedContent))for(var u=0;u<i.encryptedContent.length;++u){if(i.encryptedContent[u].type!==o.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting encrypted content constructed of only OCTET STRING objects.");s+=i.encryptedContent[u].value}else s=i.encryptedContent;t.encryptedContent={algorithm:o.derToOid(i.encAlgorithm),parameter:n.util.createBuffer(i.encParameter.value),content:n.util.createBuffer(s)}}if(i.content){if(s="",n.util.isArray(i.content))for(u=0;u<i.content.length;++u){if(i.content[u].type!==o.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting content constructed of only OCTET STRING objects.");s+=i.content[u].value}else s=i.content;t.content=n.util.createBuffer(s)}return t.version=i.version.charCodeAt(0),t.rawCapture=i,i}function f(t){if(void 0===t.encryptedContent.key)throw new Error("Symmetric key not available.");if(void 0===t.content){var e;switch(t.encryptedContent.algorithm){case n.pki.oids["aes128-CBC"]:case n.pki.oids["aes192-CBC"]:case n.pki.oids["aes256-CBC"]:e=n.aes.createDecryptionCipher(t.encryptedContent.key);break;case n.pki.oids.desCBC:case n.pki.oids["des-EDE3-CBC"]:e=n.des.createDecryptionCipher(t.encryptedContent.key);break;default:throw new Error("Unsupported symmetric cipher, OID "+t.encryptedContent.algorithm)}if(e.start(t.encryptedContent.parameter),e.update(t.encryptedContent.content),!e.finish())throw new Error("Symmetric decryption failed.");t.content=e.output}}i.messageFromPem=function(t){var e=n.pem.decode(t)[0];if("PKCS7"!==e.type){var r=new Error('Could not convert PKCS#7 message from PEM; PEM header type is not "PKCS#7".');throw r.headerType=e.type,r}if(e.procType&&"ENCRYPTED"===e.procType.type)throw new Error("Could not convert PKCS#7 message from PEM; PEM is encrypted.");var a=o.fromDer(e.body);return i.messageFromAsn1(a)},i.messageToPem=function(t,e){var r={type:"PKCS7",body:o.toDer(t.toAsn1()).getBytes()};return n.pem.encode(r,{maxline:e})},i.messageFromAsn1=function(t){var e={},r=[];if(!o.validate(t,i.asn1.contentInfoValidator,e,r)){var a=new Error("Cannot read PKCS#7 message. ASN.1 object is not an PKCS#7 ContentInfo.");throw a.errors=r,a}var s,u=o.derToOid(e.contentType);switch(u){case n.pki.oids.envelopedData:s=i.createEnvelopedData();break;case n.pki.oids.encryptedData:s=i.createEncryptedData();break;case n.pki.oids.signedData:s=i.createSignedData();break;default:throw new Error("Cannot read PKCS#7 message. ContentType with OID "+u+" is not (yet) supported.")}return s.fromAsn1(e.content.value[0]),s},i.createSignedData=function(){var t=null;return t={type:n.pki.oids.signedData,version:1,certificates:[],crls:[],signers:[],digestAlgorithmIdentifiers:[],contentInfo:null,signerInfos:[],fromAsn1:function(e){if(c(t,e,i.asn1.signedDataValidator),t.certificates=[],t.crls=[],t.digestAlgorithmIdentifiers=[],t.contentInfo=null,t.signerInfos=[],t.rawCapture.certificates)for(var r=t.rawCapture.certificates.value,o=0;o<r.length;++o)t.certificates.push(n.pki.certificateFromAsn1(r[o]))},toAsn1:function(){t.contentInfo||t.sign();for(var e=[],r=0;r<t.certificates.length;++r)e.push(n.pki.certificateToAsn1(t.certificates[r]));var i=[],a=o.create(o.Class.CONTEXT_SPECIFIC,0,!0,[o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,o.integerToDer(t.version).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.SET,!0,t.digestAlgorithmIdentifiers),t.contentInfo])]);return e.length>0&&a.value[0].value.push(o.create(o.Class.CONTEXT_SPECIFIC,0,!0,e)),i.length>0&&a.value[0].value.push(o.create(o.Class.CONTEXT_SPECIFIC,1,!0,i)),a.value[0].value.push(o.create(o.Class.UNIVERSAL,o.Type.SET,!0,t.signerInfos)),o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(t.type).getBytes()),a])},addSigner:function(e){var r=e.issuer,o=e.serialNumber;if(e.certificate){var i=e.certificate;"string"==typeof i&&(i=n.pki.certificateFromPem(i)),r=i.issuer.attributes,o=i.serialNumber}var a=e.key;if(!a)throw new Error("Could not add PKCS#7 signer; no private key specified.");"string"==typeof a&&(a=n.pki.privateKeyFromPem(a));var s=e.digestAlgorithm||n.pki.oids.sha1;switch(s){case n.pki.oids.sha1:case n.pki.oids.sha256:case n.pki.oids.sha384:case n.pki.oids.sha512:case n.pki.oids.md5:break;default:throw new Error("Could not add PKCS#7 signer; unknown message digest algorithm: "+s)}var u=e.authenticatedAttributes||[];if(u.length>0){for(var l=!1,c=!1,f=0;f<u.length;++f){var h=u[f];if(l||h.type!==n.pki.oids.contentType){if(c||h.type!==n.pki.oids.messageDigest);else if(c=!0,l)break}else if(l=!0,c)break}if(!l||!c)throw new Error("Invalid signer.authenticatedAttributes. If signer.authenticatedAttributes is specified, then it must contain at least two attributes, PKCS #9 content-type and PKCS #9 message-digest.")}t.signers.push({key:a,version:1,issuer:r,serialNumber:o,digestAlgorithm:s,signatureAlgorithm:n.pki.oids.rsaEncryption,signature:null,authenticatedAttributes:u,unauthenticatedAttributes:[]})},sign:function(e){var r;e=e||{},("object"!=s(t.content)||null===t.contentInfo)&&(t.contentInfo=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(n.pki.oids.data).getBytes())]),"content"in t&&(t.content instanceof n.util.ByteBuffer?r=t.content.bytes():"string"==typeof t.content&&(r=n.util.encodeUtf8(t.content)),e.detached?t.detachedContent=o.create(o.Class.UNIVERSAL,o.Type.OCTETSTRING,!1,r):t.contentInfo.value.push(o.create(o.Class.CONTEXT_SPECIFIC,0,!0,[o.create(o.Class.UNIVERSAL,o.Type.OCTETSTRING,!1,r)])))),0!==t.signers.length&&function(e){var r;if(!(r=t.detachedContent?t.detachedContent:(r=t.contentInfo.value[1]).value[0]))throw new Error("Could not sign PKCS#7 message; there is no content to sign.");var i=o.derToOid(t.contentInfo.value[0].value),a=o.toDer(r);for(var s in a.getByte(),o.getBerValueLength(a),a=a.getBytes(),e)e[s].start().update(a);for(var c=new Date,f=0;f<t.signers.length;++f){var h=t.signers[f];if(0===h.authenticatedAttributes.length){if(i!==n.pki.oids.data)throw new Error("Invalid signer; authenticatedAttributes must be present when the ContentInfo content type is not PKCS#7 Data.")}else{h.authenticatedAttributesAsn1=o.create(o.Class.CONTEXT_SPECIFIC,0,!0,[]);for(var p=o.create(o.Class.UNIVERSAL,o.Type.SET,!0,[]),d=0;d<h.authenticatedAttributes.length;++d){var y=h.authenticatedAttributes[d];y.type===n.pki.oids.messageDigest?y.value=e[h.digestAlgorithm].digest():y.type===n.pki.oids.signingTime&&(y.value||(y.value=c)),p.value.push(l(y)),h.authenticatedAttributesAsn1.value.push(l(y))}a=o.toDer(p).getBytes(),h.md.start().update(a)}h.signature=h.key.sign(h.md,"RSASSA-PKCS1-V1_5")}t.signerInfos=function(t){for(var e=[],r=0;r<t.length;++r)e.push(u(t[r]));return e}(t.signers)}(function(){for(var e={},r=0;r<t.signers.length;++r){var i=t.signers[r];(a=i.digestAlgorithm)in e||(e[a]=n.md[n.pki.oids[a]].create()),0===i.authenticatedAttributes.length?i.md=e[a]:i.md=n.md[n.pki.oids[a]].create()}for(var a in t.digestAlgorithmIdentifiers=[],e)t.digestAlgorithmIdentifiers.push(o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(a).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.NULL,!1,"")]));return e}())},verify:function(){throw new Error("PKCS#7 signature verification not yet implemented.")},addCertificate:function(e){"string"==typeof e&&(e=n.pki.certificateFromPem(e)),t.certificates.push(e)},addCertificateRevokationList:function(t){throw new Error("PKCS#7 CRL support not yet implemented.")}}},i.createEncryptedData=function(){var t=null;return t={type:n.pki.oids.encryptedData,version:0,encryptedContent:{algorithm:n.pki.oids["aes256-CBC"]},fromAsn1:function(e){c(t,e,i.asn1.encryptedDataValidator)},decrypt:function(e){void 0!==e&&(t.encryptedContent.key=e),f(t)}}},i.createEnvelopedData=function(){var t=null;return t={type:n.pki.oids.envelopedData,version:0,recipients:[],encryptedContent:{algorithm:n.pki.oids["aes256-CBC"]},fromAsn1:function(e){var r=c(t,e,i.asn1.envelopedDataValidator);t.recipients=function(t){for(var e=[],r=0;r<t.length;++r)e.push(a(t[r]));return e}(r.recipientInfos.value)},toAsn1:function(){return o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(t.type).getBytes()),o.create(o.Class.CONTEXT_SPECIFIC,0,!0,[o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,o.integerToDer(t.version).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.SET,!0,function(t){for(var e,r=[],i=0;i<t.length;++i)r.push((e=t[i],o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,o.integerToDer(e.version).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[n.pki.distinguishedNameToAsn1({attributes:e.issuer}),o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,n.util.hexToBytes(e.serialNumber))]),o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(e.encryptedContent.algorithm).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.NULL,!1,"")]),o.create(o.Class.UNIVERSAL,o.Type.OCTETSTRING,!1,e.encryptedContent.content)])));return r}(t.recipients)),o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,(e=t.encryptedContent,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(n.pki.oids.data).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(e.algorithm).getBytes()),e.parameter?o.create(o.Class.UNIVERSAL,o.Type.OCTETSTRING,!1,e.parameter.getBytes()):void 0]),o.create(o.Class.CONTEXT_SPECIFIC,0,!0,[o.create(o.Class.UNIVERSAL,o.Type.OCTETSTRING,!1,e.content.getBytes())])]))])])]);var e},findRecipient:function(e){for(var r=e.issuer.attributes,n=0;n<t.recipients.length;++n){var o=t.recipients[n],i=o.issuer;if(o.serialNumber===e.serialNumber&&i.length===r.length){for(var a=!0,s=0;s<r.length;++s)if(i[s].type!==r[s].type||i[s].value!==r[s].value){a=!1;break}if(a)return o}}return null},decrypt:function(e,r){if(void 0===t.encryptedContent.key&&void 0!==e&&void 0!==r)switch(e.encryptedContent.algorithm){case n.pki.oids.rsaEncryption:case n.pki.oids.desCBC:var o=r.decrypt(e.encryptedContent.content);t.encryptedContent.key=n.util.createBuffer(o);break;default:throw new Error("Unsupported asymmetric cipher, OID "+e.encryptedContent.algorithm)}f(t)},addRecipient:function(e){t.recipients.push({version:0,issuer:e.issuer.attributes,serialNumber:e.serialNumber,encryptedContent:{algorithm:n.pki.oids.rsaEncryption,key:e.publicKey}})},encrypt:function(e,r){if(void 0===t.encryptedContent.content){var o,i,a;switch(r=r||t.encryptedContent.algorithm,e=e||t.encryptedContent.key,r){case n.pki.oids["aes128-CBC"]:o=16,i=16,a=n.aes.createEncryptionCipher;break;case n.pki.oids["aes192-CBC"]:o=24,i=16,a=n.aes.createEncryptionCipher;break;case n.pki.oids["aes256-CBC"]:o=32,i=16,a=n.aes.createEncryptionCipher;break;case n.pki.oids["des-EDE3-CBC"]:o=24,i=8,a=n.des.createEncryptionCipher;break;default:throw new Error("Unsupported symmetric cipher, OID "+r)}if(void 0===e)e=n.util.createBuffer(n.random.getBytes(o));else if(e.length()!=o)throw new Error("Symmetric key has wrong length; got "+e.length()+" bytes, expected "+o+".");t.encryptedContent.algorithm=r,t.encryptedContent.key=e,t.encryptedContent.parameter=n.util.createBuffer(n.random.getBytes(i));var s=a(e);if(s.start(t.encryptedContent.parameter.copy()),s.update(t.content),!s.finish())throw new Error("Symmetric encryption failed.");t.encryptedContent.content=s.output}for(var u=0;u<t.recipients.length;++u){var l=t.recipients[u];if(void 0===l.encryptedContent.content)switch(l.encryptedContent.algorithm){case n.pki.oids.rsaEncryption:l.encryptedContent.content=l.encryptedContent.key.encrypt(t.encryptedContent.key.data);break;default:throw new Error("Unsupported asymmetric cipher, OID "+l.encryptedContent.algorithm)}}}}}},function(t,e,r){var n=r(0);r(5),r(8),r(14),r(9),r(1);var o=t.exports=n.ssh=n.ssh||{};function i(t,e){var r=e.toString(16);r[0]>="8"&&(r="00"+r);var o=n.util.hexToBytes(r);t.putInt32(o.length),t.putBytes(o)}function a(t,e){t.putInt32(e.length),t.putString(e)}function s(){for(var t=n.md.sha1.create(),e=arguments.length,r=0;r<e;++r)t.update(arguments[r]);return t.digest()}o.privateKeyToPutty=function(t,e,r){var o=""===(e=e||"")?"none":"aes256-cbc",u="PuTTY-User-Key-File-2: ssh-rsa\r\n";u+="Encryption: "+o+"\r\n",u+="Comment: "+(r=r||"")+"\r\n";var l=n.util.createBuffer();a(l,"ssh-rsa"),i(l,t.e),i(l,t.n);var c=n.util.encode64(l.bytes(),64),f=Math.floor(c.length/66)+1;u+="Public-Lines: "+f+"\r\n",u+=c;var h,p=n.util.createBuffer();if(i(p,t.d),i(p,t.p),i(p,t.q),i(p,t.qInv),e){var d=p.length()+16-1;d-=d%16;var y=s(p.bytes());y.truncate(y.length()-d+p.length()),p.putBuffer(y);var v=n.util.createBuffer();v.putBuffer(s("\0\0\0\0",e)),v.putBuffer(s("\0\0\0",e));var g=n.aes.createEncryptionCipher(v.truncate(8),"CBC");g.start(n.util.createBuffer().fillWithByte(0,16)),g.update(p.copy()),g.finish();var m=g.output;m.truncate(16),h=n.util.encode64(m.bytes(),64)}else h=n.util.encode64(p.bytes(),64);u+="\r\nPrivate-Lines: "+(f=Math.floor(h.length/66)+1)+"\r\n",u+=h;var b=s("putty-private-key-file-mac-key",e),w=n.util.createBuffer();a(w,"ssh-rsa"),a(w,o),a(w,r),w.putInt32(l.length()),w.putBuffer(l),w.putInt32(p.length()),w.putBuffer(p);var S=n.hmac.create();return S.start("sha1",b),S.update(w.bytes()),u+"\r\nPrivate-MAC: "+S.digest().toHex()+"\r\n"},o.publicKeyToOpenSSH=function(t,e){e=e||"";var r=n.util.createBuffer();return a(r,"ssh-rsa"),i(r,t.e),i(r,t.n),"ssh-rsa "+n.util.encode64(r.bytes())+" "+e},o.privateKeyToOpenSSH=function(t,e){return e?n.pki.encryptRsaPrivateKey(t,e,{legacy:!0,algorithm:"aes128"}):n.pki.privateKeyToPem(t)},o.getPublicKeyFingerprint=function(t,e){var r=(e=e||{}).md||n.md.md5.create(),o=n.util.createBuffer();a(o,"ssh-rsa"),i(o,t.e),i(o,t.n),r.start(),r.update(o.getBytes());var s=r.digest();if("hex"===e.encoding){var u=s.toHex();return e.delimiter?u.match(/.{2}/g).join(e.delimiter):u}if("binary"===e.encoding)return s.getBytes();if(e.encoding)throw new Error('Unknown encoding "'+e.encoding+'".');return s}}])},"object"==s(e)&&"object"==s(t)?t.exports=a():(o=[],void 0===(i="function"==typeof(n=a)?n.apply(e,o):n)||(t.exports=i))},9957:function(t,e,r){var n,o,i;function a(t){"@babel/helpers - typeof";return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}i=function(){"use strict";function t(t){var e=this.constructor;return this.then(function(r){return e.resolve(t()).then(function(){return r})},function(r){return e.resolve(t()).then(function(){return e.reject(r)})})}function e(t){return new this(function(e,r){if(!t||void 0===t.length)return r(new TypeError(a(t)+" "+t+" is not iterable(cannot read property Symbol(Symbol.iterator))"));var n=Array.prototype.slice.call(t);if(0===n.length)return e([]);var o=n.length;function i(t,r){if(r&&("object"===a(r)||"function"==typeof r)){var s=r.then;if("function"==typeof s)return void s.call(r,function(e){i(t,e)},function(r){n[t]={status:"rejected",reason:r},0==--o&&e(n)})}n[t]={status:"fulfilled",value:r},0==--o&&e(n)}for(var s=0;s<n.length;s++)i(s,n[s])})}var n=setTimeout;function o(t){return Boolean(t&&void 0!==t.length)}function i(){}function s(t){if(!(this instanceof s))throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],h(t,this)}function u(t,e){for(;3===t._state;)t=t._value;0!==t._state?(t._handled=!0,s._immediateFn(function(){var r=1===t._state?e.onFulfilled:e.onRejected;if(null!==r){var n;try{n=r(t._value)}catch(t){return void c(e.promise,t)}l(e.promise,n)}else(1===t._state?l:c)(e.promise,t._value)})):t._deferreds.push(e)}function l(t,e){try{if(e===t)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"===a(e)||"function"==typeof e)){var r=e.then;if(e instanceof s)return t._state=3,t._value=e,void f(t);if("function"==typeof r)return void h((n=r,o=e,function(){n.apply(o,arguments)}),t)}t._state=1,t._value=e,f(t)}catch(e){c(t,e)}var n,o}function c(t,e){t._state=2,t._value=e,f(t)}function f(t){2===t._state&&0===t._deferreds.length&&s._immediateFn(function(){t._handled||s._unhandledRejectionFn(t._value)});for(var e=0,r=t._deferreds.length;e<r;e++)u(t,t._deferreds[e]);t._deferreds=null}function h(t,e){var r=!1;try{t(function(t){r||(r=!0,l(e,t))},function(t){r||(r=!0,c(e,t))})}catch(t){if(r)return;r=!0,c(e,t)}}s.prototype.catch=function(t){return this.then(null,t)},s.prototype.then=function(t,e){var r=new this.constructor(i);return u(this,new function(t,e,r){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=r}(t,e,r)),r},s.prototype.finally=t,s.all=function(t){return new s(function(e,r){if(!o(t))return r(new TypeError("Promise.all accepts an array"));var n=Array.prototype.slice.call(t);if(0===n.length)return e([]);var i=n.length;function s(t,o){try{if(o&&("object"===a(o)||"function"==typeof o)){var u=o.then;if("function"==typeof u)return void u.call(o,function(e){s(t,e)},r)}n[t]=o,0==--i&&e(n)}catch(t){r(t)}}for(var u=0;u<n.length;u++)s(u,n[u])})},s.allSettled=e,s.resolve=function(t){return t&&"object"===a(t)&&t.constructor===s?t:new s(function(e){e(t)})},s.reject=function(t){return new s(function(e,r){r(t)})},s.race=function(t){return new s(function(e,r){if(!o(t))return r(new TypeError("Promise.race accepts an array"));for(var n=0,i=t.length;n<i;n++)s.resolve(t[n]).then(e,r)})},s._immediateFn="function"==typeof setImmediate&&function(t){setImmediate(t)}||function(t){n(t,0)},s._unhandledRejectionFn=function(t){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)};var p=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==r.g)return r.g;throw new Error("unable to locate global object")}();"function"!=typeof p.Promise?p.Promise=s:(p.Promise.prototype.finally||(p.Promise.prototype.finally=t),p.Promise.allSettled||(p.Promise.allSettled=e))},"object"===a(e)?i():void 0===(o="function"==typeof(n=i)?n.call(e,r,e,t):n)||(t.exports=o)},3861:function(t,e,r){"use strict";t.exports=o,t.exports.default=o;var n=r(4333);function o(t,e){if(!(this instanceof o))return new o(t,e);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&this._initFormat(e),this.clear()}function i(t,e,r){if(!r)return e.indexOf(t);for(var n=0;n<e.length;n++)if(r(t,e[n]))return n;return-1}function a(t,e){s(t,0,t.children.length,e,t)}function s(t,e,r,n,o){o||(o=y(null)),o.minX=1/0,o.minY=1/0,o.maxX=-1/0,o.maxY=-1/0;for(var i,a=e;a<r;a++)i=t.children[a],u(o,t.leaf?n(i):i);return o}function u(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function l(t,e){return t.minX-e.minX}function c(t,e){return t.minY-e.minY}function f(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function h(t){return t.maxX-t.minX+(t.maxY-t.minY)}function p(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function d(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function y(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function v(t,e,r,o,i){for(var a,s=[e,r];s.length;)(r=s.pop())-(e=s.pop())<=o||(a=e+Math.ceil((r-e)/o/2)*o,n(t,a,e,r,i),s.push(e,a,a,r))}o.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,r=[],n=this.toBBox;if(!d(t,e))return r;for(var o,i,a,s,u=[];e;){for(o=0,i=e.children.length;o<i;o++)a=e.children[o],d(t,s=e.leaf?n(a):a)&&(e.leaf?r.push(a):p(t,s)?this._all(a,r):u.push(a));e=u.pop()}return r},collides:function(t){var e=this.data,r=this.toBBox;if(!d(t,e))return!1;for(var n,o,i,a,s=[];e;){for(n=0,o=e.children.length;n<o;n++)if(i=e.children[n],d(t,a=e.leaf?r(i):i)){if(e.leaf||p(t,a))return!0;s.push(i)}e=s.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,r=t.length;e<r;e++)this.insert(t[e]);return this}var n=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){var o=this.data;this.data=n,n=o}this._insert(n,this.data.height-n.height-1,!0)}else this.data=n;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=y([]),this},remove:function(t,e){if(!t)return this;for(var r,n,o,a,s=this.data,u=this.toBBox(t),l=[],c=[];s||l.length;){if(s||(s=l.pop(),n=l[l.length-1],r=c.pop(),a=!0),s.leaf&&-1!==(o=i(t,s.children,e)))return s.children.splice(o,1),l.push(s),this._condense(l),this;a||s.leaf||!p(s,u)?n?(r++,s=n.children[r],a=!1):s=null:(l.push(s),c.push(r),r=0,n=s,s=s.children[0])}return this},toBBox:function(t){return t},compareMinX:l,compareMinY:c,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var r=[];t;)t.leaf?e.push.apply(e,t.children):r.push.apply(r,t.children),t=r.pop();return e},_build:function(t,e,r,n){var o,i=r-e+1,s=this._maxEntries;if(i<=s)return a(o=y(t.slice(e,r+1)),this.toBBox),o;n||(n=Math.ceil(Math.log(i)/Math.log(s)),s=Math.ceil(i/Math.pow(s,n-1))),(o=y([])).leaf=!1,o.height=n;var u,l,c,f,h=Math.ceil(i/s),p=h*Math.ceil(Math.sqrt(s));for(v(t,e,r,p,this.compareMinX),u=e;u<=r;u+=p)for(v(t,u,c=Math.min(u+p-1,r),h,this.compareMinY),l=u;l<=c;l+=h)f=Math.min(l+h-1,c),o.children.push(this._build(t,l,f,n-1));return a(o,this.toBBox),o},_chooseSubtree:function(t,e,r,n){for(var o,i,a,s,u,l,c,h,p,d;n.push(e),!e.leaf&&n.length-1!==r;){for(c=h=1/0,o=0,i=e.children.length;o<i;o++)u=f(a=e.children[o]),p=t,d=a,(l=(Math.max(d.maxX,p.maxX)-Math.min(d.minX,p.minX))*(Math.max(d.maxY,p.maxY)-Math.min(d.minY,p.minY))-u)<h?(h=l,c=u<c?u:c,s=a):l===h&&u<c&&(c=u,s=a);e=s||e.children[0]}return e},_insert:function(t,e,r){var n=this.toBBox,o=r?t:n(t),i=[],a=this._chooseSubtree(o,this.data,e,i);for(a.children.push(t),u(a,o);e>=0&&i[e].children.length>this._maxEntries;)this._split(i,e),e--;this._adjustParentBBoxes(o,i,e)},_split:function(t,e){var r=t[e],n=r.children.length,o=this._minEntries;this._chooseSplitAxis(r,o,n);var i=this._chooseSplitIndex(r,o,n),s=y(r.children.splice(i,r.children.length-i));s.height=r.height,s.leaf=r.leaf,a(r,this.toBBox),a(s,this.toBBox),e?t[e-1].children.push(s):this._splitRoot(r,s)},_splitRoot:function(t,e){this.data=y([t,e]),this.data.height=t.height+1,this.data.leaf=!1,a(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,r){var n,o,i,a,u,l,c,h,p,d,y,v,g,m;for(l=c=1/0,n=e;n<=r-e;n++)o=s(t,0,n,this.toBBox),i=s(t,n,r,this.toBBox),p=o,d=i,void 0,void 0,void 0,void 0,y=Math.max(p.minX,d.minX),v=Math.max(p.minY,d.minY),g=Math.min(p.maxX,d.maxX),m=Math.min(p.maxY,d.maxY),a=Math.max(0,g-y)*Math.max(0,m-v),u=f(o)+f(i),a<l?(l=a,h=n,c=u<c?u:c):a===l&&u<c&&(c=u,h=n);return h},_chooseSplitAxis:function(t,e,r){var n=t.leaf?this.compareMinX:l,o=t.leaf?this.compareMinY:c;this._allDistMargin(t,e,r,n)<this._allDistMargin(t,e,r,o)&&t.children.sort(n)},_allDistMargin:function(t,e,r,n){t.children.sort(n);var o,i,a=this.toBBox,l=s(t,0,e,a),c=s(t,r-e,r,a),f=h(l)+h(c);for(o=e;o<r-e;o++)i=t.children[o],u(l,t.leaf?a(i):i),f+=h(l);for(o=r-e-1;o>=e;o--)i=t.children[o],u(c,t.leaf?a(i):i),f+=h(c);return f},_adjustParentBBoxes:function(t,e,r){for(var n=r;n>=0;n--)u(e[n],t)},_condense:function(t){for(var e,r=t.length-1;r>=0;r--)0===t[r].children.length?r>0?(e=t[r-1].children).splice(e.indexOf(t[r]),1):this.clear():a(t[r],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}}},4333:function(t,e,r){var n,o,i;function a(t){"@babel/helpers - typeof";return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}i=function(){"use strict";function t(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function e(t,e){return t<e?-1:t>e?1:0}return function(r,n,o,i,a){!function e(r,n,o,i,a){for(;i>o;){if(i-o>600){var s=i-o+1,u=n-o+1,l=Math.log(s),c=.5*Math.exp(2*l/3),f=.5*Math.sqrt(l*c*(s-c)/s)*(u-s/2<0?-1:1),h=Math.max(o,Math.floor(n-u*c/s+f)),p=Math.min(i,Math.floor(n+(s-u)*c/s+f));e(r,n,h,p,a)}var d=r[n],y=o,v=i;for(t(r,o,n),a(r[i],d)>0&&t(r,o,i);y<v;){for(t(r,y,v),y++,v--;a(r[y],d)<0;)y++;for(;a(r[v],d)>0;)v--}0===a(r[o],d)?t(r,o,v):t(r,++v,i),v<=n&&(o=v+1),n<=v&&(i=v-1)}}(r,n,o||0,i||r.length-1,a||e)}},"object"===a(e)?t.exports=i():void 0===(o="function"==typeof(n=i)?n.call(e,r,e,t):n)||(t.exports=o)},4934:function(t,e,r){var n,o,i;function a(t){"@babel/helpers - typeof";return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}i=function(){"use strict";var t=function(t){return t instanceof Uint8Array||t instanceof Uint16Array||t instanceof Uint32Array||t instanceof Int8Array||t instanceof Int16Array||t instanceof Int32Array||t instanceof Float32Array||t instanceof Float64Array||t instanceof Uint8ClampedArray},e=function(t,e){for(var r=Object.keys(e),n=0;n<r.length;++n)t[r[n]]=e[r[n]];return t},r="\n";function n(t){var e=new Error("(regl) "+t);throw console.error(e),e}function o(t,e){t||n(e)}function i(t){return t?": "+t:""}function s(t,e){switch(e){case"number":return"number"==typeof t;case"object":return"object"===a(t);case"string":return"string"==typeof t;case"boolean":return"boolean"==typeof t;case"function":return"function"==typeof t;case"undefined":return void 0===t;case"symbol":return"symbol"===a(t)}}function u(t,e,r){e.indexOf(t)<0&&n("invalid value"+i(r)+". must be one of: "+e)}var l=["gl","canvas","container","attributes","pixelRatio","extensions","optionalExtensions","profile","onDone"];function c(t,e){for(t+="";t.length<e;)t=" "+t;return t}function f(){this.name="unknown",this.lines=[],this.index={},this.hasErrors=!1}function h(t,e){this.number=t,this.line=e,this.errors=[]}function p(t,e,r){this.file=t,this.line=e,this.message=r}function d(){var t=new Error,e=(t.stack||t).toString(),r=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(e);if(r)return r[1];var n=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(e);return n?n[1]:"unknown"}function y(){var t=new Error,e=(t.stack||t).toString(),r=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(e);if(r)return r[1];var n=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(e);return n?n[1]:"unknown"}function v(t,e){var r,n=t.split("\n"),o=1,i=0,a={unknown:new f,0:new f};a.unknown.name=a[0].name=e||d(),a.unknown.lines.push(new h(0,""));for(var s=0;s<n.length;++s){var u=n[s],l=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(u);if(l)switch(l[1]){case"line":var c=/(\d+)(\s+\d+)?/.exec(l[2]);c&&(o=0|c[1],c[2]&&((i=0|c[2])in a||(a[i]=new f)));break;case"define":var p=/SHADER_NAME(_B64)?\s+(.*)$/.exec(l[2]);p&&(a[i].name=p[1]?(r=p[2],"undefined"!=typeof atob?atob(r):"base64:"+r):p[2])}a[i].lines.push(new h(o++,u))}return Object.keys(a).forEach(function(t){var e=a[t];e.lines.forEach(function(t){e.index[t.number]=t})}),a}function g(t){t._commandRef=d()}function m(t,e){var r=y();n(t+" in command "+(e||d())+("unknown"===r?"":" called from "+r))}function b(t,e,r,n){s(t,e)||m("invalid parameter type"+i(r)+". expected "+e+", got "+a(t),n||d())}var w=33071,S=9728,x=9984,_=9985,E=9986,O=9987,P=5126,k=32819,C=32820,T=33635,A=34042,M={};function j(t,e){return t===C||t===k||t===T?2:t===A?4:M[t]*e}function I(t){return!(t&t-1||!t)}M[5120]=M[5121]=1,M[5122]=M[5123]=M[36193]=M[T]=M[k]=M[C]=2,M[5124]=M[5125]=M[P]=M[A]=4;var N=e(o,{optional:function(t){t()},raise:n,commandRaise:m,command:function(t,e,r){t||m(e,r||d())},parameter:function(t,e,r){t in e||n("unknown parameter ("+t+")"+i(r)+". possible values: "+Object.keys(e).join())},commandParameter:function(t,e,r,n){t in e||m("unknown parameter ("+t+")"+i(r)+". possible values: "+Object.keys(e).join(),n||d())},constructor:function(t){Object.keys(t).forEach(function(t){l.indexOf(t)<0&&n('invalid regl constructor argument "'+t+'". must be one of '+l)})},type:function(t,e,r){s(t,e)||n("invalid parameter type"+i(r)+". expected "+e+", got "+a(t))},commandType:b,isTypedArray:function(e,r){t(e)||n("invalid parameter type"+i(r)+". must be a typed array")},nni:function(t,e){t>=0&&(0|t)===t||n("invalid parameter type, ("+t+")"+i(e)+". must be a nonnegative integer")},oneOf:u,shaderError:function(t,e,n,i,a){if(!t.getShaderParameter(e,t.COMPILE_STATUS)){var s=t.getShaderInfoLog(e),u=i===t.FRAGMENT_SHADER?"fragment":"vertex";b(n,"string",u+" shader source must be a string",a);var l=v(n,a),f=function(t){var e=[];return t.split("\n").forEach(function(t){if(!(t.length<5)){var r=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(t);r?e.push(new p(0|r[1],0|r[2],r[3].trim())):t.length>0&&e.push(new p("unknown",0,t))}}),e}(s);!function(t,e){e.forEach(function(e){var r=t[e.file];if(r){var n=r.index[e.line];if(n)return n.errors.push(e),void(r.hasErrors=!0)}t.unknown.hasErrors=!0,t.unknown.lines[0].errors.push(e)})}(l,f),Object.keys(l).forEach(function(t){var e=l[t];if(e.hasErrors){var n=[""],o=[""];i("file number "+t+": "+e.name+"\n","color:red;text-decoration:underline;font-weight:bold"),e.lines.forEach(function(t){if(t.errors.length>0){i(c(t.number,4)+"|  ","background-color:yellow; font-weight:bold"),i(t.line+r,"color:red; background-color:yellow; font-weight:bold");var e=0;t.errors.forEach(function(n){var o=n.message,a=/^\s*'(.*)'\s*:\s*(.*)$/.exec(o);if(a){var s=a[1];switch(o=a[2],s){case"assign":s="="}e=Math.max(t.line.indexOf(s,e),0)}else e=0;i(c("| ",6)),i(c("^^^",e+3)+r,"font-weight:bold"),i(c("| ",6)),i(o+r,"font-weight:bold")}),i(c("| ",6)+r)}else i(c(t.number,4)+"|  "),i(t.line+r,"color:red")}),"undefined"==typeof document||window.chrome?console.log(n.join("")):(o[0]=n.join("%c"),console.log.apply(console,o))}function i(t,e){n.push(t),o.push(e||"")}}),o.raise("Error compiling "+u+" shader, "+l[0].name)}},linkError:function(t,e,n,i,a){if(!t.getProgramParameter(e,t.LINK_STATUS)){var s=t.getProgramInfoLog(e),u=v(n,a),l='Error linking program with vertex shader, "'+v(i,a)[0].name+'", and fragment shader "'+u[0].name+'"';"undefined"!=typeof document?console.log("%c"+l+r+"%c"+s,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(l+r+s),o.raise(l)}},callSite:y,saveCommandRef:g,saveDrawInfo:function(t,e,r,n){function o(t){return t?n.id(t):0}function i(t,e){Object.keys(e).forEach(function(e){t[n.id(e)]=!0})}g(t),t._fragId=o(t.static.frag),t._vertId=o(t.static.vert);var a=t._uniformSet={};i(a,e.static),i(a,e.dynamic);var s=t._attributeSet={};i(s,r.static),i(s,r.dynamic),t._hasCount="count"in t.static||"count"in t.dynamic||"elements"in t.static||"elements"in t.dynamic},framebufferFormat:function(t,e,r){t.texture?u(t.texture._texture.internalformat,e,"unsupported texture format for attachment"):u(t.renderbuffer._renderbuffer.format,r,"unsupported renderbuffer format for attachment")},guessCommand:d,texture2D:function(t,e,r){var n,i=e.width,a=e.height,s=e.channels;o(i>0&&i<=r.maxTextureSize&&a>0&&a<=r.maxTextureSize,"invalid texture shape"),t.wrapS===w&&t.wrapT===w||o(I(i)&&I(a),"incompatible wrap mode for texture, both width and height must be power of 2"),1===e.mipmask?1!==i&&1!==a&&o(t.minFilter!==x&&t.minFilter!==E&&t.minFilter!==_&&t.minFilter!==O,"min filter requires mipmap"):(o(I(i)&&I(a),"texture must be a square power of 2 to support mipmapping"),o(e.mipmask===(i<<1)-1,"missing or incomplete mipmap data")),e.type===P&&(r.extensions.indexOf("oes_texture_float_linear")<0&&o(t.minFilter===S&&t.magFilter===S,"filter not supported, must enable oes_texture_float_linear"),o(!t.genMipmaps,"mipmap generation not supported with float textures"));var u=e.images;for(n=0;n<16;++n)if(u[n]){var l=i>>n,c=a>>n;o(e.mipmask&1<<n,"missing mipmap data");var f=u[n];if(o(f.width===l&&f.height===c,"invalid shape for mip images"),o(f.format===e.format&&f.internalformat===e.internalformat&&f.type===e.type,"incompatible type for mip image"),f.compressed);else if(f.data){var h=Math.ceil(j(f.type,s)*l/f.unpackAlignment)*f.unpackAlignment;o(f.data.byteLength===h*c,"invalid data for image, buffer size is inconsistent with image format")}else f.element||f.copy}else t.genMipmaps||o(0==(e.mipmask&1<<n),"extra mipmap data");e.compressed&&o(!t.genMipmaps,"mipmap generation for compressed images not supported")},textureCube:function(t,e,r,n){var i=t.width,a=t.height,s=t.channels;o(i>0&&i<=n.maxTextureSize&&a>0&&a<=n.maxTextureSize,"invalid texture shape"),o(i===a,"cube map must be square"),o(e.wrapS===w&&e.wrapT===w,"wrap mode not supported by cube map");for(var u=0;u<r.length;++u){var l=r[u];o(l.width===i&&l.height===a,"inconsistent cube map face shape"),e.genMipmaps&&(o(!l.compressed,"can not generate mipmap for compressed textures"),o(1===l.mipmask,"can not specify mipmaps and generate mipmaps"));for(var c=l.images,f=0;f<16;++f){var h=c[f];if(h){var p=i>>f,d=a>>f;o(l.mipmask&1<<f,"missing mipmap data"),o(h.width===p&&h.height===d,"invalid shape for mip images"),o(h.format===t.format&&h.internalformat===t.internalformat&&h.type===t.type,"incompatible type for mip image"),h.compressed||(h.data?o(h.data.byteLength===p*d*Math.max(j(h.type,s),h.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format"):h.element||h.copy)}}}}}),L=0,R=0,D=5,B=6;function F(t,e){this.id=L++,this.type=t,this.data=e}function G(t){return t.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function U(t){return"["+function t(e){if(0===e.length)return[];var r=e.charAt(0),n=e.charAt(e.length-1);if(e.length>1&&r===n&&('"'===r||"'"===r))return['"'+G(e.substr(1,e.length-2))+'"'];var o=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(e);if(o)return t(e.substr(0,o.index)).concat(t(o[1])).concat(t(e.substr(o.index+o[0].length)));var i=e.split(".");if(1===i.length)return['"'+G(e)+'"'];for(var a=[],s=0;s<i.length;++s)a=a.concat(t(i[s]));return a}(t).join("][")+"]"}var z={DynamicVariable:F,define:function(t,e){return new F(t,U(e+""))},isDynamic:function(t){return"function"==typeof t&&!t._reglType||t instanceof F},unbox:function t(e,r){return"function"==typeof e?new F(R,e):"number"==typeof e||"boolean"==typeof e?new F(D,e):Array.isArray(e)?new F(B,e.map(function(e,n){return t(e,r+"["+n+"]")})):e instanceof F?e:void N(!1,"invalid option type in uniform "+r)},accessor:U},V={next:"function"==typeof requestAnimationFrame?function(t){return requestAnimationFrame(t)}:function(t){return setTimeout(t,16)},cancel:"function"==typeof cancelAnimationFrame?function(t){return cancelAnimationFrame(t)}:clearTimeout},H="undefined"!=typeof performance&&performance.now?function(){return performance.now()}:function(){return+new Date};function W(t){return"string"==typeof t?t.split():(N(Array.isArray(t),"invalid extension array"),t)}function q(t){return"string"==typeof t?(N("undefined"!=typeof document,"not supported outside of DOM"),document.querySelector(t)):t}function Y(t){var r,n,o,i,s,u=t||{},l={},c=[],f=[],h="undefined"==typeof window?1:window.devicePixelRatio,p=!1,d=function(t){t&&N.raise(t)},y=function(){};if("string"==typeof u?(N("undefined"!=typeof document,"selector queries only supported in DOM enviroments"),r=document.querySelector(u),N(r,"invalid query string for element")):"object"===a(u)?"string"==typeof(s=u).nodeName&&"function"==typeof s.appendChild&&"function"==typeof s.getBoundingClientRect?r=u:!function(t){return"function"==typeof t.drawArrays||"function"==typeof t.drawElements}(u)?(N.constructor(u),"gl"in u?i=u.gl:"canvas"in u?o=q(u.canvas):"container"in u&&(n=q(u.container)),"attributes"in u&&(l=u.attributes,N.type(l,"object","invalid context attributes")),"extensions"in u&&(c=W(u.extensions)),"optionalExtensions"in u&&(f=W(u.optionalExtensions)),"onDone"in u&&(N.type(u.onDone,"function","invalid or missing onDone callback"),d=u.onDone),"profile"in u&&(p=!!u.profile),"pixelRatio"in u&&(h=+u.pixelRatio,N(h>0,"invalid pixel ratio"))):o=(i=u).canvas:N.raise("invalid arguments to regl"),r&&("canvas"===r.nodeName.toLowerCase()?o=r:n=r),!i){if(!o){N("undefined"!=typeof document,"must manually specify webgl context outside of DOM environments");var v=function(t,r,n){var o,i=document.createElement("canvas");function a(){var r=window.innerWidth,o=window.innerHeight;if(t!==document.body){var a=t.getBoundingClientRect();r=a.right-a.left,o=a.bottom-a.top}i.width=n*r,i.height=n*o,e(i.style,{width:r+"px",height:o+"px"})}return e(i.style,{border:0,margin:0,padding:0,top:0,left:0}),t.appendChild(i),t===document.body&&(i.style.position="absolute",e(t.style,{margin:0,padding:0})),t!==document.body&&"function"==typeof ResizeObserver?(o=new ResizeObserver(function(){setTimeout(a)})).observe(t):window.addEventListener("resize",a,!1),a(),{canvas:i,onDestroy:function(){o?o.disconnect():window.removeEventListener("resize",a),t.removeChild(i)}}}(n||document.body,0,h);if(!v)return null;o=v.canvas,y=v.onDestroy}void 0===l.premultipliedAlpha&&(l.premultipliedAlpha=!0),i=function(t,e){function r(r){try{return t.getContext(r,e)}catch(t){return null}}return r("webgl")||r("experimental-webgl")||r("webgl-experimental")}(o,l)}return i?{gl:i,canvas:o,container:n,extensions:c,optionalExtensions:f,pixelRatio:h,profile:p,onDone:d,onDestroy:y}:(y(),d("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function X(t,e){for(var r=Array(t),n=0;n<t;++n)r[n]=e(n);return r}var J=5120,K=5121,Q=5122,Z=5123,$=5124,tt=5125,et=5126;function rt(t){var e,r;return e=(t>65535)<<4,e|=r=((t>>>=e)>255)<<3,e|=r=((t>>>=r)>15)<<2,(e|=r=((t>>>=r)>3)<<1)|(t>>>=r)>>1}function nt(){var t=X(8,function(){return[]});function e(e){var r=function(t){for(var e=16;e<=1<<28;e*=16)if(t<=e)return e;return 0}(e),n=t[rt(r)>>2];return n.length>0?n.pop():new ArrayBuffer(r)}function r(e){t[rt(e.byteLength)>>2].push(e)}return{alloc:e,free:r,allocType:function(t,r){var n=null;switch(t){case J:n=new Int8Array(e(r),0,r);break;case K:n=new Uint8Array(e(r),0,r);break;case Q:n=new Int16Array(e(2*r),0,r);break;case Z:n=new Uint16Array(e(2*r),0,r);break;case $:n=new Int32Array(e(4*r),0,r);break;case tt:n=new Uint32Array(e(4*r),0,r);break;case et:n=new Float32Array(e(4*r),0,r);break;default:return null}return n.length!==r?n.subarray(0,r):n},freeType:function(t){r(t.buffer)}}}var ot=nt();ot.zero=nt();var it=function(t,e){var r=1;e.ext_texture_filter_anisotropic&&(r=t.getParameter(34047));var n=1,o=1;e.webgl_draw_buffers&&(n=t.getParameter(34852),o=t.getParameter(36063));var i=!!e.oes_texture_float;if(i){var a=t.createTexture();t.bindTexture(3553,a),t.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var s=t.createFramebuffer();if(t.bindFramebuffer(36160,s),t.framebufferTexture2D(36160,36064,3553,a,0),t.bindTexture(3553,null),36053!==t.checkFramebufferStatus(36160))i=!1;else{t.viewport(0,0,1,1),t.clearColor(1,0,0,1),t.clear(16384);var u=ot.allocType(5126,4);t.readPixels(0,0,1,1,6408,5126,u),t.getError()?i=!1:(t.deleteFramebuffer(s),t.deleteTexture(a),i=1===u[0]),ot.freeType(u)}}var l=!0;if(!("undefined"!=typeof navigator&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent)))){var c=t.createTexture(),f=ot.allocType(5121,36);t.activeTexture(33984),t.bindTexture(34067,c),t.texImage2D(34069,0,6408,3,3,0,6408,5121,f),ot.freeType(f),t.bindTexture(34067,null),t.deleteTexture(c),l=!t.getError()}return{colorBits:[t.getParameter(3410),t.getParameter(3411),t.getParameter(3412),t.getParameter(3413)],depthBits:t.getParameter(3414),stencilBits:t.getParameter(3415),subpixelBits:t.getParameter(3408),extensions:Object.keys(e).filter(function(t){return!!e[t]}),maxAnisotropic:r,maxDrawbuffers:n,maxColorAttachments:o,pointSizeDims:t.getParameter(33901),lineWidthDims:t.getParameter(33902),maxViewportDims:t.getParameter(3386),maxCombinedTextureUnits:t.getParameter(35661),maxCubeMapSize:t.getParameter(34076),maxRenderbufferSize:t.getParameter(34024),maxTextureUnits:t.getParameter(34930),maxTextureSize:t.getParameter(3379),maxAttributes:t.getParameter(34921),maxVertexUniforms:t.getParameter(36347),maxVertexTextureUnits:t.getParameter(35660),maxVaryingVectors:t.getParameter(36348),maxFragmentUniforms:t.getParameter(36349),glsl:t.getParameter(35724),renderer:t.getParameter(7937),vendor:t.getParameter(7936),version:t.getParameter(7938),readFloat:i,npotTextureCube:l}};function at(e){return!!e&&"object"===a(e)&&Array.isArray(e.shape)&&Array.isArray(e.stride)&&"number"==typeof e.offset&&e.shape.length===e.stride.length&&(Array.isArray(e.data)||t(e.data))}var st=function(t){return Object.keys(t).map(function(e){return t[e]})},ut={shape:function(t){for(var e=[],r=t;r.length;r=r[0])e.push(r.length);return e},flatten:function(t,e,r,n){var o=1;if(e.length)for(var i=0;i<e.length;++i)o*=e[i];else o=0;var a=n||ot.allocType(r,o);switch(e.length){case 0:break;case 1:!function(t,e,r){for(var n=0;n<e;++n)r[n]=t[n]}(t,e[0],a);break;case 2:!function(t,e,r,n){for(var o=0,i=0;i<e;++i)for(var a=t[i],s=0;s<r;++s)n[o++]=a[s]}(t,e[0],e[1],a);break;case 3:lt(t,e[0],e[1],e[2],a,0);break;default:!function t(e,r,n,o,i){var a=1;for(var s=n+1;s<r.length;++s)a*=r[s];var u=r[n];if(r.length-n==4){var l=r[n+1],c=r[n+2],f=r[n+3];for(s=0;s<u;++s)lt(e[s],l,c,f,o,i),i+=a}else for(s=0;s<u;++s)t(e[s],r,n+1,o,i),i+=a}(t,e,0,a,0)}return a}};function lt(t,e,r,n,o,i){for(var a=i,s=0;s<e;++s)for(var u=t[s],l=0;l<r;++l)for(var c=u[l],f=0;f<n;++f)o[a++]=c[f]}var ct={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},ft={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,float:5126,float32:5126},ht={dynamic:35048,stream:35040,static:35044},pt=ut.flatten,dt=ut.shape,yt=35044,vt=35040,gt=5121,mt=5126,bt=[];function wt(t){return 0|ct[Object.prototype.toString.call(t)]}function St(t,e){for(var r=0;r<e.length;++r)t[r]=e[r]}function xt(t,e,r,n,o,i,a){for(var s=0,u=0;u<r;++u)for(var l=0;l<n;++l)t[s++]=e[o*u+i*l+a]}bt[5120]=1,bt[5122]=2,bt[5124]=4,bt[5121]=1,bt[5123]=2,bt[5125]=4,bt[5126]=4;var _t={points:0,point:0,lines:1,line:1,triangles:4,triangle:4,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},Et=0,Ot=1,Pt=4,kt=5120,Ct=5121,Tt=5122,At=5123,Mt=5124,jt=5125,It=34963,Nt=35040,Lt=35044;var Rt=new Float32Array(1),Dt=new Uint32Array(Rt.buffer),Bt=5123;function Ft(t){for(var e=ot.allocType(Bt,t.length),r=0;r<t.length;++r)if(isNaN(t[r]))e[r]=65535;else if(t[r]===1/0)e[r]=31744;else if(t[r]===-1/0)e[r]=64512;else{Rt[0]=t[r];var n=Dt[0],o=n>>>31<<15,i=(n<<1>>>24)-127,a=n>>13&1023;if(i<-24)e[r]=o;else if(i<-14){var s=-14-i;e[r]=o+(a+1024>>s)}else e[r]=i>15?o+31744:o+(i+15<<10)+a}return e}function Gt(e){return Array.isArray(e)||t(e)}var Ut=function(t){return!(t&t-1||!t)},zt=34467,Vt=3553,Ht=34067,Wt=34069,qt=6408,Yt=6406,Xt=6407,Jt=6409,Kt=6410,Qt=32854,Zt=32855,$t=36194,te=32819,ee=32820,re=33635,ne=34042,oe=6402,ie=34041,ae=35904,se=35906,ue=36193,le=33776,ce=33777,fe=33778,he=33779,pe=35986,de=35987,ye=34798,ve=35840,ge=35841,me=35842,be=35843,we=36196,Se=5121,xe=5123,_e=5125,Ee=5126,Oe=10242,Pe=10243,ke=10497,Ce=33071,Te=33648,Ae=10240,Me=10241,je=9728,Ie=9729,Ne=9984,Le=9985,Re=9986,De=9987,Be=33170,Fe=4352,Ge=4353,Ue=4354,ze=34046,Ve=3317,He=37440,We=37441,qe=37443,Ye=37444,Xe=33984,Je=[Ne,Re,Le,De],Ke=[0,Jt,Kt,Xt,qt],Qe={};function Ze(t){return"[object "+t+"]"}Qe[Jt]=Qe[Yt]=Qe[oe]=1,Qe[ie]=Qe[Kt]=2,Qe[Xt]=Qe[ae]=3,Qe[qt]=Qe[se]=4;var $e=Ze("HTMLCanvasElement"),tr=Ze("OffscreenCanvas"),er=Ze("CanvasRenderingContext2D"),rr=Ze("ImageBitmap"),nr=Ze("HTMLImageElement"),or=Ze("HTMLVideoElement"),ir=Object.keys(ct).concat([$e,tr,er,rr,nr,or]),ar=[];ar[Se]=1,ar[Ee]=4,ar[ue]=2,ar[xe]=2,ar[_e]=4;var sr=[];function ur(t){return Array.isArray(t)&&(0===t.length||"number"==typeof t[0])}function lr(t){return!!Array.isArray(t)&&!(0===t.length||!Gt(t[0]))}function cr(t){return Object.prototype.toString.call(t)}function fr(t){return cr(t)===$e}function hr(t){return cr(t)===tr}function pr(t){if(!t)return!1;var e=cr(t);return ir.indexOf(e)>=0||(ur(t)||lr(t)||at(t))}function dr(t){return 0|ct[Object.prototype.toString.call(t)]}function yr(t,e){return ot.allocType(t.type===ue?Ee:t.type,e)}function vr(t,e){t.type===ue?(t.data=Ft(e),ot.freeType(e)):t.data=e}function gr(t,e,r,n,o,i){var a;if(a=void 0!==sr[t]?sr[t]:Qe[t]*ar[e],i&&(a*=6),o){for(var s=0,u=r;u>=1;)s+=a*u*u,u/=2;return s}return a*r*n}function mr(r,n,o,i,s,u,l){var c={"don't care":Fe,"dont care":Fe,nice:Ue,fast:Ge},f={repeat:ke,clamp:Ce,mirror:Te},h={nearest:je,linear:Ie},p=e({mipmap:De,"nearest mipmap nearest":Ne,"linear mipmap nearest":Le,"nearest mipmap linear":Re,"linear mipmap linear":De},h),d={none:0,browser:Ye},y={uint8:Se,rgba4:te,rgb565:re,"rgb5 a1":ee},v={alpha:Yt,luminance:Jt,"luminance alpha":Kt,rgb:Xt,rgba:qt,rgba4:Qt,"rgb5 a1":Zt,rgb565:$t},g={};n.ext_srgb&&(v.srgb=ae,v.srgba=se),n.oes_texture_float&&(y.float32=y.float=Ee),n.oes_texture_half_float&&(y.float16=y["half float"]=ue),n.webgl_depth_texture&&(e(v,{depth:oe,"depth stencil":ie}),e(y,{uint16:xe,uint32:_e,"depth stencil":ne})),n.webgl_compressed_texture_s3tc&&e(g,{"rgb s3tc dxt1":le,"rgba s3tc dxt1":ce,"rgba s3tc dxt3":fe,"rgba s3tc dxt5":he}),n.webgl_compressed_texture_atc&&e(g,{"rgb atc":pe,"rgba atc explicit alpha":de,"rgba atc interpolated alpha":ye}),n.webgl_compressed_texture_pvrtc&&e(g,{"rgb pvrtc 4bppv1":ve,"rgb pvrtc 2bppv1":ge,"rgba pvrtc 4bppv1":me,"rgba pvrtc 2bppv1":be}),n.webgl_compressed_texture_etc1&&(g["rgb etc1"]=we);var m=Array.prototype.slice.call(r.getParameter(zt));Object.keys(g).forEach(function(t){var e=g[t];m.indexOf(e)>=0&&(v[t]=e)});var b=Object.keys(v);o.textureFormats=b;var w=[];Object.keys(v).forEach(function(t){var e=v[t];w[e]=t});var S=[];Object.keys(y).forEach(function(t){var e=y[t];S[e]=t});var x=[];Object.keys(h).forEach(function(t){var e=h[t];x[e]=t});var _=[];Object.keys(p).forEach(function(t){var e=p[t];_[e]=t});var E=[];Object.keys(f).forEach(function(t){var e=f[t];E[e]=t});var O=b.reduce(function(t,e){var r=v[e];return r===Jt||r===Yt||r===Jt||r===Kt||r===oe||r===ie||n.ext_srgb&&(r===ae||r===se)?t[r]=r:r===Zt||e.indexOf("rgba")>=0?t[r]=qt:t[r]=Xt,t},{});function P(){this.internalformat=qt,this.format=qt,this.type=Se,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=Ye,this.width=0,this.height=0,this.channels=0}function k(t,e){t.internalformat=e.internalformat,t.format=e.format,t.type=e.type,t.compressed=e.compressed,t.premultiplyAlpha=e.premultiplyAlpha,t.flipY=e.flipY,t.unpackAlignment=e.unpackAlignment,t.colorSpace=e.colorSpace,t.width=e.width,t.height=e.height,t.channels=e.channels}function C(t,e){if("object"===a(e)&&e){if("premultiplyAlpha"in e&&(N.type(e.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),t.premultiplyAlpha=e.premultiplyAlpha),"flipY"in e&&(N.type(e.flipY,"boolean","invalid texture flip"),t.flipY=e.flipY),"alignment"in e&&(N.oneOf(e.alignment,[1,2,4,8],"invalid texture unpack alignment"),t.unpackAlignment=e.alignment),"colorSpace"in e&&(N.parameter(e.colorSpace,d,"invalid colorSpace"),t.colorSpace=d[e.colorSpace]),"type"in e){var r=e.type;N(n.oes_texture_float||!("float"===r||"float32"===r),"you must enable the OES_texture_float extension in order to use floating point textures."),N(n.oes_texture_half_float||!("half float"===r||"float16"===r),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures."),N(n.webgl_depth_texture||!("uint16"===r||"uint32"===r||"depth stencil"===r),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),N.parameter(r,y,"invalid texture type"),t.type=y[r]}var i=t.width,s=t.height,u=t.channels,l=!1;"shape"in e?(N(Array.isArray(e.shape)&&e.shape.length>=2,"shape must be an array"),i=e.shape[0],s=e.shape[1],3===e.shape.length&&(u=e.shape[2],N(u>0&&u<=4,"invalid number of channels"),l=!0),N(i>=0&&i<=o.maxTextureSize,"invalid width"),N(s>=0&&s<=o.maxTextureSize,"invalid height")):("radius"in e&&(i=s=e.radius,N(i>=0&&i<=o.maxTextureSize,"invalid radius")),"width"in e&&(i=e.width,N(i>=0&&i<=o.maxTextureSize,"invalid width")),"height"in e&&(s=e.height,N(s>=0&&s<=o.maxTextureSize,"invalid height")),"channels"in e&&(u=e.channels,N(u>0&&u<=4,"invalid number of channels"),l=!0)),t.width=0|i,t.height=0|s,t.channels=0|u;var c=!1;if("format"in e){var f=e.format;N(n.webgl_depth_texture||!("depth"===f||"depth stencil"===f),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),N.parameter(f,v,"invalid texture format");var h=t.internalformat=v[f];t.format=O[h],f in y&&("type"in e||(t.type=y[f])),f in g&&(t.compressed=!0),c=!0}!l&&c?t.channels=Qe[t.format]:l&&!c?t.channels!==Ke[t.format]&&(t.format=t.internalformat=Ke[t.channels]):c&&l&&N(t.channels===Qe[t.format],"number of channels inconsistent with specified format")}}function T(t){r.pixelStorei(He,t.flipY),r.pixelStorei(We,t.premultiplyAlpha),r.pixelStorei(qe,t.colorSpace),r.pixelStorei(Ve,t.unpackAlignment)}function A(){P.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function M(e,r){var n=null;if(pr(r)?n=r:r&&(N.type(r,"object","invalid pixel data type"),C(e,r),"x"in r&&(e.xOffset=0|r.x),"y"in r&&(e.yOffset=0|r.y),pr(r.data)&&(n=r.data)),N(!e.compressed||n instanceof Uint8Array,"compressed texture data must be stored in a uint8array"),r.copy){N(!n,"can not specify copy and data field for the same texture");var i=s.viewportWidth,a=s.viewportHeight;e.width=e.width||i-e.xOffset,e.height=e.height||a-e.yOffset,e.needsCopy=!0,N(e.xOffset>=0&&e.xOffset<i&&e.yOffset>=0&&e.yOffset<a&&e.width>0&&e.width<=i&&e.height>0&&e.height<=a,"copy texture read out of bounds")}else if(n){if(t(n))e.channels=e.channels||4,e.data=n,"type"in r||e.type!==Se||(e.type=dr(n));else if(ur(n))e.channels=e.channels||4,function(t,e){var r=e.length;switch(t.type){case Se:case xe:case _e:case Ee:var n=ot.allocType(t.type,r);n.set(e),t.data=n;break;case ue:t.data=Ft(e);break;default:N.raise("unsupported texture type, must specify a typed array")}}(e,n),e.alignment=1,e.needsFree=!0;else if(at(n)){var u=n.data;Array.isArray(u)||e.type!==Se||(e.type=dr(u));var l,c,f,h,p,d,y=n.shape,v=n.stride;3===y.length?(f=y[2],d=v[2]):(N(2===y.length,"invalid ndarray pixel data, must be 2 or 3D"),f=1,d=1),l=y[0],c=y[1],h=v[0],p=v[1],e.alignment=1,e.width=l,e.height=c,e.channels=f,e.format=e.internalformat=Ke[f],e.needsFree=!0,function(t,e,r,n,o,i){for(var a=t.width,s=t.height,u=t.channels,l=yr(t,a*s*u),c=0,f=0;f<s;++f)for(var h=0;h<a;++h)for(var p=0;p<u;++p)l[c++]=e[r*h+n*f+o*p+i];vr(t,l)}(e,u,h,p,d,n.offset)}else if(fr(n)||hr(n)||cr(n)===er)fr(n)||hr(n)?e.element=n:e.element=n.canvas,e.width=e.element.width,e.height=e.element.height,e.channels=4;else if(function(t){return cr(t)===rr}(n))e.element=n,e.width=n.width,e.height=n.height,e.channels=4;else if(function(t){return cr(t)===nr}(n))e.element=n,e.width=n.naturalWidth,e.height=n.naturalHeight,e.channels=4;else if(function(t){return cr(t)===or}(n))e.element=n,e.width=n.videoWidth,e.height=n.videoHeight,e.channels=4;else if(lr(n)){var g=e.width||n[0].length,m=e.height||n.length,b=e.channels;b=Gt(n[0][0])?b||n[0][0].length:b||1;for(var w=ut.shape(n),S=1,x=0;x<w.length;++x)S*=w[x];var _=yr(e,S);ut.flatten(n,w,"",_),vr(e,_),e.alignment=1,e.width=g,e.height=m,e.channels=b,e.format=e.internalformat=Ke[b],e.needsFree=!0}}else e.width=e.width||1,e.height=e.height||1,e.channels=e.channels||4;e.type===Ee?N(o.extensions.indexOf("oes_texture_float")>=0,"oes_texture_float extension not enabled"):e.type===ue&&N(o.extensions.indexOf("oes_texture_half_float")>=0,"oes_texture_half_float extension not enabled")}function j(t,e,n){var o=t.element,a=t.data,s=t.internalformat,u=t.format,l=t.type,c=t.width,f=t.height;T(t),o?r.texImage2D(e,n,u,u,l,o):t.compressed?r.compressedTexImage2D(e,n,s,c,f,0,a):t.needsCopy?(i(),r.copyTexImage2D(e,n,u,t.xOffset,t.yOffset,c,f,0)):r.texImage2D(e,n,u,c,f,0,u,l,a||null)}function I(t,e,n,o,a){var s=t.element,u=t.data,l=t.internalformat,c=t.format,f=t.type,h=t.width,p=t.height;T(t),s?r.texSubImage2D(e,a,n,o,c,f,s):t.compressed?r.compressedTexSubImage2D(e,a,n,o,l,h,p,u):t.needsCopy?(i(),r.copyTexSubImage2D(e,a,n,o,t.xOffset,t.yOffset,h,p)):r.texSubImage2D(e,a,n,o,h,p,c,f,u)}var L=[];function R(){return L.pop()||new A}function D(t){t.needsFree&&ot.freeType(t.data),A.call(t),L.push(t)}function B(t,e,r){var n=t.images[0]=R();t.mipmask=1,n.width=t.width=e,n.height=t.height=r,n.channels=t.channels=4}function F(t,e){var r=null;if(pr(e))k(r=t.images[0]=R(),t),M(r,e),t.mipmask=1;else if(C(t,e),Array.isArray(e.mipmap))for(var n=e.mipmap,o=0;o<n.length;++o)k(r=t.images[o]=R(),t),r.width>>=o,r.height>>=o,M(r,n[o]),t.mipmask|=1<<o;else k(r=t.images[0]=R(),t),M(r,e),t.mipmask=1;k(t,t.images[0]),!t.compressed||t.internalformat!==le&&t.internalformat!==ce&&t.internalformat!==fe&&t.internalformat!==he||N(t.width%4==0&&t.height%4==0,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function G(t,e){for(var r=t.images,n=0;n<r.length;++n){if(!r[n])return;j(r[n],e,n)}}var U=[];function z(){var t=U.pop()||new function(){P.call(this),this.genMipmaps=!1,this.mipmapHint=Fe,this.mipmask=0,this.images=Array(16)};P.call(t),t.mipmask=0;for(var e=0;e<16;++e)t.images[e]=null;return t}function V(t){for(var e=t.images,r=0;r<e.length;++r)e[r]&&D(e[r]),e[r]=null;U.push(t)}function H(){this.minFilter=je,this.magFilter=je,this.wrapS=Ce,this.wrapT=Ce,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=Fe}function W(t,e){if("min"in e){var r=e.min;N.parameter(r,p),t.minFilter=p[r],Je.indexOf(t.minFilter)>=0&&!("faces"in e)&&(t.genMipmaps=!0)}if("mag"in e){var n=e.mag;N.parameter(n,h),t.magFilter=h[n]}var i=t.wrapS,s=t.wrapT;if("wrap"in e){var u=e.wrap;"string"==typeof u?(N.parameter(u,f),i=s=f[u]):Array.isArray(u)&&(N.parameter(u[0],f),N.parameter(u[1],f),i=f[u[0]],s=f[u[1]])}else{if("wrapS"in e){var l=e.wrapS;N.parameter(l,f),i=f[l]}if("wrapT"in e){var d=e.wrapT;N.parameter(d,f),s=f[d]}}if(t.wrapS=i,t.wrapT=s,"anisotropic"in e){var y=e.anisotropic;N("number"==typeof y&&y>=1&&y<=o.maxAnisotropic,"aniso samples must be between 1 and "),t.anisotropic=e.anisotropic}if("mipmap"in e){var v=!1;switch(a(e.mipmap)){case"string":N.parameter(e.mipmap,c,"invalid mipmap hint"),t.mipmapHint=c[e.mipmap],t.genMipmaps=!0,v=!0;break;case"boolean":v=t.genMipmaps=e.mipmap;break;case"object":N(Array.isArray(e.mipmap),"invalid mipmap type"),t.genMipmaps=!1,v=!0;break;default:N.raise("invalid mipmap type")}!v||"min"in e||(t.minFilter=Ne)}}function q(t,e){r.texParameteri(e,Me,t.minFilter),r.texParameteri(e,Ae,t.magFilter),r.texParameteri(e,Oe,t.wrapS),r.texParameteri(e,Pe,t.wrapT),n.ext_texture_filter_anisotropic&&r.texParameteri(e,ze,t.anisotropic),t.genMipmaps&&(r.hint(Be,t.mipmapHint),r.generateMipmap(e))}var Y=0,X={},J=o.maxTextureUnits,K=Array(J).map(function(){return null});function Q(t){P.call(this),this.mipmask=0,this.internalformat=qt,this.id=Y++,this.refCount=1,this.target=t,this.texture=r.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new H,l.profile&&(this.stats={size:0})}function Z(t){r.activeTexture(Xe),r.bindTexture(t.target,t.texture)}function $(){var t=K[0];t?r.bindTexture(t.target,t.texture):r.bindTexture(Vt,null)}function tt(t){var e=t.texture;N(e,"must not double destroy texture");var n=t.unit,o=t.target;n>=0&&(r.activeTexture(Xe+n),r.bindTexture(o,null),K[n]=null),r.deleteTexture(e),t.texture=null,t.params=null,t.pixels=null,t.refCount=0,delete X[t.id],u.textureCount--}return e(Q.prototype,{bind:function(){this.bindCount+=1;var t=this.unit;if(t<0){for(var e=0;e<J;++e){var n=K[e];if(n){if(n.bindCount>0)continue;n.unit=-1}K[e]=this,t=e;break}t>=J&&N.raise("insufficient number of texture units"),l.profile&&u.maxTextureUnits<t+1&&(u.maxTextureUnits=t+1),this.unit=t,r.activeTexture(Xe+t),r.bindTexture(this.target,this.texture)}return t},unbind:function(){this.bindCount-=1},decRef:function(){--this.refCount<=0&&tt(this)}}),l.profile&&(u.getTotalTextureSize=function(){var t=0;return Object.keys(X).forEach(function(e){t+=X[e].stats.size}),t}),{create2D:function(t,e){var n=new Q(Vt);function i(t,e){var r=n.texInfo;H.call(r);var a=z();return"number"==typeof t?B(a,0|t,"number"==typeof e?0|e:0|t):t?(N.type(t,"object","invalid arguments to regl.texture"),W(r,t),F(a,t)):B(a,1,1),r.genMipmaps&&(a.mipmask=(a.width<<1)-1),n.mipmask=a.mipmask,k(n,a),N.texture2D(r,a,o),n.internalformat=a.internalformat,i.width=a.width,i.height=a.height,Z(n),G(a,Vt),q(r,Vt),$(),V(a),l.profile&&(n.stats.size=gr(n.internalformat,n.type,a.width,a.height,r.genMipmaps,!1)),i.format=w[n.internalformat],i.type=S[n.type],i.mag=x[r.magFilter],i.min=_[r.minFilter],i.wrapS=E[r.wrapS],i.wrapT=E[r.wrapT],i}return X[n.id]=n,u.textureCount++,i(t,e),i.subimage=function(t,e,r,o){N(!!t,"must specify image data");var a=0|e,s=0|r,u=0|o,l=R();return k(l,n),l.width=0,l.height=0,M(l,t),l.width=l.width||(n.width>>u)-a,l.height=l.height||(n.height>>u)-s,N(n.type===l.type&&n.format===l.format&&n.internalformat===l.internalformat,"incompatible format for texture.subimage"),N(a>=0&&s>=0&&a+l.width<=n.width&&s+l.height<=n.height,"texture.subimage write out of bounds"),N(n.mipmask&1<<u,"missing mipmap data"),N(l.data||l.element||l.needsCopy,"missing image data"),Z(n),I(l,Vt,a,s,u),$(),D(l),i},i.resize=function(t,e){var o=0|t,a=0|e||o;if(o===n.width&&a===n.height)return i;i.width=n.width=o,i.height=n.height=a,Z(n);for(var s=0;n.mipmask>>s;++s){var u=o>>s,c=a>>s;if(!u||!c)break;r.texImage2D(Vt,s,n.format,u,c,0,n.format,n.type,null)}return $(),l.profile&&(n.stats.size=gr(n.internalformat,n.type,o,a,!1,!1)),i},i._reglType="texture2d",i._texture=n,l.profile&&(i.stats=n.stats),i.destroy=function(){n.decRef()},i},createCube:function(t,e,n,i,s,c){var f=new Q(Ht);X[f.id]=f,u.cubeCount++;var h=new Array(6);function p(t,e,r,n,i,s){var u,c=f.texInfo;for(H.call(c),u=0;u<6;++u)h[u]=z();if("number"!=typeof t&&t)if("object"===a(t))if(e)F(h[0],t),F(h[1],e),F(h[2],r),F(h[3],n),F(h[4],i),F(h[5],s);else if(W(c,t),C(f,t),"faces"in t){var d=t.faces;for(N(Array.isArray(d)&&6===d.length,"cube faces must be a length 6 array"),u=0;u<6;++u)N("object"===a(d[u])&&!!d[u],"invalid input for cube map face"),k(h[u],f),F(h[u],d[u])}else for(u=0;u<6;++u)F(h[u],t);else N.raise("invalid arguments to cube map");else{var y=0|t||1;for(u=0;u<6;++u)B(h[u],y,y)}for(k(f,h[0]),o.npotTextureCube||N(Ut(f.width)&&Ut(f.height),"your browser does not support non power or two texture dimensions"),c.genMipmaps?f.mipmask=(h[0].width<<1)-1:f.mipmask=h[0].mipmask,N.textureCube(f,c,h,o),f.internalformat=h[0].internalformat,p.width=h[0].width,p.height=h[0].height,Z(f),u=0;u<6;++u)G(h[u],Wt+u);for(q(c,Ht),$(),l.profile&&(f.stats.size=gr(f.internalformat,f.type,p.width,p.height,c.genMipmaps,!0)),p.format=w[f.internalformat],p.type=S[f.type],p.mag=x[c.magFilter],p.min=_[c.minFilter],p.wrapS=E[c.wrapS],p.wrapT=E[c.wrapT],u=0;u<6;++u)V(h[u]);return p}return p(t,e,n,i,s,c),p.subimage=function(t,e,r,n,o){N(!!e,"must specify image data"),N("number"==typeof t&&t===(0|t)&&t>=0&&t<6,"invalid face");var i=0|r,a=0|n,s=0|o,u=R();return k(u,f),u.width=0,u.height=0,M(u,e),u.width=u.width||(f.width>>s)-i,u.height=u.height||(f.height>>s)-a,N(f.type===u.type&&f.format===u.format&&f.internalformat===u.internalformat,"incompatible format for texture.subimage"),N(i>=0&&a>=0&&i+u.width<=f.width&&a+u.height<=f.height,"texture.subimage write out of bounds"),N(f.mipmask&1<<s,"missing mipmap data"),N(u.data||u.element||u.needsCopy,"missing image data"),Z(f),I(u,Wt+t,i,a,s),$(),D(u),p},p.resize=function(t){var e=0|t;if(e!==f.width){p.width=f.width=e,p.height=f.height=e,Z(f);for(var n=0;n<6;++n)for(var o=0;f.mipmask>>o;++o)r.texImage2D(Wt+n,o,f.format,e>>o,e>>o,0,f.format,f.type,null);return $(),l.profile&&(f.stats.size=gr(f.internalformat,f.type,p.width,p.height,!1,!0)),p}},p._reglType="textureCube",p._texture=f,l.profile&&(p.stats=f.stats),p.destroy=function(){f.decRef()},p},clear:function(){for(var t=0;t<J;++t)r.activeTexture(Xe+t),r.bindTexture(Vt,null),K[t]=null;st(X).forEach(tt),u.cubeCount=0,u.textureCount=0},getTexture:function(t){return null},restore:function(){for(var t=0;t<J;++t){var e=K[t];e&&(e.bindCount=0,e.unit=-1,K[t]=null)}st(X).forEach(function(t){t.texture=r.createTexture(),r.bindTexture(t.target,t.texture);for(var e=0;e<32;++e)if(0!=(t.mipmask&1<<e))if(t.target===Vt)r.texImage2D(Vt,e,t.internalformat,t.width>>e,t.height>>e,0,t.internalformat,t.type,null);else for(var n=0;n<6;++n)r.texImage2D(Wt+n,e,t.internalformat,t.width>>e,t.height>>e,0,t.internalformat,t.type,null);q(t.texInfo,t.target)})},refresh:function(){for(var t=0;t<J;++t){var e=K[t];e&&(e.bindCount=0,e.unit=-1,K[t]=null),r.activeTexture(Xe+t),r.bindTexture(Vt,null),r.bindTexture(Ht,null)}}}}sr[Qt]=2,sr[Zt]=2,sr[$t]=2,sr[ie]=4,sr[le]=.5,sr[ce]=.5,sr[fe]=1,sr[he]=1,sr[pe]=.5,sr[de]=1,sr[ye]=1,sr[ve]=.5,sr[ge]=.25,sr[me]=.5,sr[be]=.25,sr[we]=.5;var br=36161,wr=32854,Sr=[];function xr(t,e,r){return Sr[t]*e*r}Sr[wr]=2,Sr[32855]=2,Sr[36194]=2,Sr[33189]=2,Sr[36168]=1,Sr[34041]=4,Sr[35907]=4,Sr[34836]=16,Sr[34842]=8,Sr[34843]=6;var _r=function(t,e,r,n,o){var i={rgba4:wr,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};e.ext_srgb&&(i.srgba=35907),e.ext_color_buffer_half_float&&(i.rgba16f=34842,i.rgb16f=34843),e.webgl_color_buffer_float&&(i.rgba32f=34836);var s=[];Object.keys(i).forEach(function(t){var e=i[t];s[e]=t});var u=0,l={};function c(t){this.id=u++,this.refCount=1,this.renderbuffer=t,this.format=wr,this.width=0,this.height=0,o.profile&&(this.stats={size:0})}function f(e){var r=e.renderbuffer;N(r,"must not double destroy renderbuffer"),t.bindRenderbuffer(br,null),t.deleteRenderbuffer(r),e.renderbuffer=null,e.refCount=0,delete l[e.id],n.renderbufferCount--}return c.prototype.decRef=function(){--this.refCount<=0&&f(this)},o.profile&&(n.getTotalRenderbufferSize=function(){var t=0;return Object.keys(l).forEach(function(e){t+=l[e].stats.size}),t}),{create:function(e,u){var f=new c(t.createRenderbuffer());function h(e,n){var u=0,l=0,c=wr;if("object"===a(e)&&e){var p=e;if("shape"in p){var d=p.shape;N(Array.isArray(d)&&d.length>=2,"invalid renderbuffer shape"),u=0|d[0],l=0|d[1]}else"radius"in p&&(u=l=0|p.radius),"width"in p&&(u=0|p.width),"height"in p&&(l=0|p.height);"format"in p&&(N.parameter(p.format,i,"invalid renderbuffer format"),c=i[p.format])}else"number"==typeof e?(u=0|e,l="number"==typeof n?0|n:u):e?N.raise("invalid arguments to renderbuffer constructor"):u=l=1;if(N(u>0&&l>0&&u<=r.maxRenderbufferSize&&l<=r.maxRenderbufferSize,"invalid renderbuffer size"),u!==f.width||l!==f.height||c!==f.format)return h.width=f.width=u,h.height=f.height=l,f.format=c,t.bindRenderbuffer(br,f.renderbuffer),t.renderbufferStorage(br,c,u,l),N(0===t.getError(),"invalid render buffer format"),o.profile&&(f.stats.size=xr(f.format,f.width,f.height)),h.format=s[f.format],h}return l[f.id]=f,n.renderbufferCount++,h(e,u),h.resize=function(e,n){var i=0|e,a=0|n||i;return i===f.width&&a===f.height?h:(N(i>0&&a>0&&i<=r.maxRenderbufferSize&&a<=r.maxRenderbufferSize,"invalid renderbuffer size"),h.width=f.width=i,h.height=f.height=a,t.bindRenderbuffer(br,f.renderbuffer),t.renderbufferStorage(br,f.format,i,a),N(0===t.getError(),"invalid render buffer format"),o.profile&&(f.stats.size=xr(f.format,f.width,f.height)),h)},h._reglType="renderbuffer",h._renderbuffer=f,o.profile&&(h.stats=f.stats),h.destroy=function(){f.decRef()},h},clear:function(){st(l).forEach(f)},restore:function(){st(l).forEach(function(e){e.renderbuffer=t.createRenderbuffer(),t.bindRenderbuffer(br,e.renderbuffer),t.renderbufferStorage(br,e.format,e.width,e.height)}),t.bindRenderbuffer(br,null)}}},Er=36160,Or=36161,Pr=3553,kr=34069,Cr=36064,Tr=36096,Ar=36128,Mr=33306,jr=36053,Ir=6402,Nr=[6407,6408],Lr=[];Lr[6408]=4,Lr[6407]=3;var Rr=[];Rr[5121]=1,Rr[5126]=4,Rr[36193]=2;var Dr=33189,Br=36168,Fr=34041,Gr=[32854,32855,36194,35907,34842,34843,34836],Ur={};Ur[jr]="complete",Ur[36054]="incomplete attachment",Ur[36057]="incomplete dimensions",Ur[36055]="incomplete, missing attachment",Ur[36061]="unsupported";var zr=5126,Vr=34962;function Hr(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=zr,this.offset=0,this.stride=0,this.divisor=0}var Wr=35632,qr=35633,Yr=35718,Xr=35721;function Jr(t,r,n,o){var i={},a={};function s(t,e,r,n){this.name=t,this.id=e,this.location=r,this.info=n}function u(t,e){for(var r=0;r<t.length;++r)if(t[r].id===e.id)return void(t[r].location=e.location);t.push(e)}function l(e,n,o){var s=e===Wr?i:a,u=s[n];if(!u){var l=r.str(n);u=t.createShader(e),t.shaderSource(u,l),t.compileShader(u),N.shaderError(t,u,l,e,o),s[n]=u}return u}var c={},f=[],h=0;function p(e,n,i){var a,c,f=l(Wr,e.fragId),h=l(qr,e.vertId),p=e.program=t.createProgram();if(t.attachShader(p,f),t.attachShader(p,h),i)for(a=0;a<i.length;++a){var d=i[a];t.bindAttribLocation(p,d[0],d[1])}t.linkProgram(p),N.linkError(t,p,r.str(e.fragId),r.str(e.vertId),n);var y=t.getProgramParameter(p,Yr);o.profile&&(e.stats.uniformsCount=y);var v=e.uniforms;for(a=0;a<y;++a)if(c=t.getActiveUniform(p,a))if(c.size>1)for(var g=0;g<c.size;++g){var m=c.name.replace("[0]","["+g+"]");u(v,new s(m,r.id(m),t.getUniformLocation(p,m),c))}else u(v,new s(c.name,r.id(c.name),t.getUniformLocation(p,c.name),c));var b=t.getProgramParameter(p,Xr);o.profile&&(e.stats.attributesCount=b);var w=e.attributes;for(a=0;a<b;++a)(c=t.getActiveAttrib(p,a))&&u(w,new s(c.name,r.id(c.name),t.getAttribLocation(p,c.name),c))}return o.profile&&(n.getMaxUniformsCount=function(){var t=0;return f.forEach(function(e){e.stats.uniformsCount>t&&(t=e.stats.uniformsCount)}),t},n.getMaxAttributesCount=function(){var t=0;return f.forEach(function(e){e.stats.attributesCount>t&&(t=e.stats.attributesCount)}),t}),{clear:function(){var e=t.deleteShader.bind(t);st(i).forEach(e),i={},st(a).forEach(e),a={},f.forEach(function(e){t.deleteProgram(e.program)}),f.length=0,c={},n.shaderCount=0},program:function(r,s,u,l){N.command(r>=0,"missing vertex shader",u),N.command(s>=0,"missing fragment shader",u);var d=c[s];d||(d=c[s]={});var y=d[r];if(y&&(y.refCount++,!l))return y;var v=new function(t,e){this.id=h++,this.fragId=t,this.vertId=e,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,o.profile&&(this.stats={uniformsCount:0,attributesCount:0})}(s,r);return n.shaderCount++,p(v,u,l),y||(d[r]=v),f.push(v),e(v,{destroy:function(){if(v.refCount--,v.refCount<=0){t.deleteProgram(v.program);var e=f.indexOf(v);f.splice(e,1),n.shaderCount--}d[v.vertId].refCount<=0&&(t.deleteShader(a[v.vertId]),delete a[v.vertId],delete c[v.fragId][v.vertId]),Object.keys(c[v.fragId]).length||(t.deleteShader(i[v.fragId]),delete i[v.fragId],delete c[v.fragId])}})},restore:function(){i={},a={};for(var t=0;t<f.length;++t)p(f[t],null,f[t].attributes.map(function(t){return[t.location,t.name]}))},shader:l,frag:-1,vert:-1}}var Kr=6408,Qr=5121,Zr=3333,$r=5126;function tn(e,r,n,o,i,a,s){function u(u){var l;null===r.next?(N(i.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),l=Qr):(N(null!==r.next.colorAttachments[0].texture,"You cannot read from a renderbuffer"),l=r.next.colorAttachments[0].texture._texture.type,a.oes_texture_float?(N(l===Qr||l===$r,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),l===$r&&N(s.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):N(l===Qr,"Reading from a framebuffer is only allowed for the type 'uint8'"));var c=0,f=0,h=o.framebufferWidth,p=o.framebufferHeight,d=null;t(u)?d=u:u&&(N.type(u,"object","invalid arguments to regl.read()"),c=0|u.x,f=0|u.y,N(c>=0&&c<o.framebufferWidth,"invalid x offset for regl.read"),N(f>=0&&f<o.framebufferHeight,"invalid y offset for regl.read"),h=0|(u.width||o.framebufferWidth-c),p=0|(u.height||o.framebufferHeight-f),d=u.data||null),d&&(l===Qr?N(d instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):l===$r&&N(d instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'")),N(h>0&&h+c<=o.framebufferWidth,"invalid width for read pixels"),N(p>0&&p+f<=o.framebufferHeight,"invalid height for read pixels"),n();var y=h*p*4;return d||(l===Qr?d=new Uint8Array(y):l===$r&&(d=d||new Float32Array(y))),N.isTypedArray(d,"data buffer for regl.read() must be a typedarray"),N(d.byteLength>=y,"data buffer for regl.read() too small"),e.pixelStorei(Zr,4),e.readPixels(c,f,h,p,Kr,l,d),d}return function(t){return t&&"framebuffer"in t?function(t){var e;return r.setFBO({framebuffer:t.framebuffer},function(){e=u(t)}),e}(t):u(t)}}function en(t){return Array.prototype.slice.call(t)}function rn(t){return en(t).join("")}var nn="xyzw".split(""),on=5121,an=1,sn=2,un=0,ln=1,cn=2,fn=3,hn=4,pn=5,dn=6,yn="dither",vn="blend.enable",gn="blend.color",mn="blend.equation",bn="blend.func",wn="depth.enable",Sn="depth.func",xn="depth.range",_n="depth.mask",En="colorMask",On="cull.enable",Pn="cull.face",kn="frontFace",Cn="lineWidth",Tn="polygonOffset.enable",An="polygonOffset.offset",Mn="sample.alpha",jn="sample.enable",In="sample.coverage",Nn="stencil.enable",Ln="stencil.mask",Rn="stencil.func",Dn="stencil.opFront",Bn="stencil.opBack",Fn="scissor.enable",Gn="scissor.box",Un="viewport",zn="profile",Vn="framebuffer",Hn="vert",Wn="frag",qn="elements",Yn="primitive",Xn="count",Jn="offset",Kn="instances",Qn="vao",Zn=Vn+"Width",$n=Vn+"Height",to=Un+"Width",eo=Un+"Height",ro="drawingBufferWidth",no="drawingBufferHeight",oo=[bn,mn,Rn,Dn,Bn,In,Un,Gn,An],io=34962,ao=34963,so=3553,uo=34067,lo=2884,co=3042,fo=3024,ho=2960,po=2929,yo=3089,vo=32823,go=32926,mo=32928,bo=5126,wo=35664,So=35665,xo=35666,_o=5124,Eo=35667,Oo=35668,Po=35669,ko=35670,Co=35671,To=35672,Ao=35673,Mo=35674,jo=35675,Io=35676,No=35678,Lo=35680,Ro=4,Do=1028,Bo=1029,Fo=2304,Go=2305,Uo=32775,zo=32776,Vo=519,Ho=7680,Wo=0,qo=1,Yo=32774,Xo=513,Jo=36160,Ko=36064,Qo={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},Zo=["constant color, constant alpha","one minus constant color, constant alpha","constant color, one minus constant alpha","one minus constant color, one minus constant alpha","constant alpha, constant color","constant alpha, one minus constant color","one minus constant alpha, constant color","one minus constant alpha, one minus constant color"],$o={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},ti={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},ei={frag:35632,vert:35633},ri={cw:Fo,ccw:Go};function ni(e){return Array.isArray(e)||t(e)||at(e)}function oi(t){return t.sort(function(t,e){return t===Un?-1:e===Un?1:t<e?-1:1})}function ii(t,e,r,n){this.thisDep=t,this.contextDep=e,this.propDep=r,this.append=n}function ai(t){return t&&!(t.thisDep||t.contextDep||t.propDep)}function si(t){return new ii(!1,!1,!1,t)}function ui(t,e){var r=t.type;if(r===un){var n=t.data.length;return new ii(!0,n>=1,n>=2,e)}if(r===hn){var o=t.data;return new ii(o.thisDep,o.contextDep,o.propDep,e)}if(r===pn)return new ii(!1,!1,!1,e);if(r===dn){for(var i=!1,a=!1,s=!1,u=0;u<t.data.length;++u){var l=t.data[u];if(l.type===ln)s=!0;else if(l.type===cn)a=!0;else if(l.type===fn)i=!0;else if(l.type===un){i=!0;var c=l.data;c>=1&&(a=!0),c>=2&&(s=!0)}else l.type===hn&&(i=i||l.data.thisDep,a=a||l.data.contextDep,s=s||l.data.propDep)}return new ii(i,a,s,e)}return new ii(r===fn,r===cn,r===ln,e)}var li=new ii(!1,!1,!1,function(){});function ci(t,r,n,o,i,s,u,l,c,f,h,p,d,y,v){var g=f.Record,m={add:32774,subtract:32778,"reverse subtract":32779};n.ext_blend_minmax&&(m.min=Uo,m.max=zo);var b=n.angle_instanced_arrays,w=n.webgl_draw_buffers,S={dirty:!0,profile:v.profile},x={},_=[],E={},O={};function P(t){return t.replace(".","_")}function k(t,e,r){var n=P(t);_.push(t),x[n]=S[n]=!!r,E[n]=e}function C(t,e,r){var n=P(t);_.push(t),Array.isArray(r)?(S[n]=r.slice(),x[n]=r.slice()):S[n]=x[n]=r,O[n]=e}k(yn,fo),k(vn,co),C(gn,"blendColor",[0,0,0,0]),C(mn,"blendEquationSeparate",[Yo,Yo]),C(bn,"blendFuncSeparate",[qo,Wo,qo,Wo]),k(wn,po,!0),C(Sn,"depthFunc",Xo),C(xn,"depthRange",[0,1]),C(_n,"depthMask",!0),C(En,En,[!0,!0,!0,!0]),k(On,lo),C(Pn,"cullFace",Bo),C(kn,kn,Go),C(Cn,Cn,1),k(Tn,vo),C(An,"polygonOffset",[0,0]),k(Mn,go),k(jn,mo),C(In,"sampleCoverage",[1,!1]),k(Nn,ho),C(Ln,"stencilMask",-1),C(Rn,"stencilFunc",[Vo,0,-1]),C(Dn,"stencilOpSeparate",[Do,Ho,Ho,Ho]),C(Bn,"stencilOpSeparate",[Bo,Ho,Ho,Ho]),k(Fn,yo),C(Gn,"scissor",[0,0,t.drawingBufferWidth,t.drawingBufferHeight]),C(Un,Un,[0,0,t.drawingBufferWidth,t.drawingBufferHeight]);var T={gl:t,context:d,strings:r,next:x,current:S,draw:p,elements:s,buffer:i,shader:h,attributes:f.state,vao:f,uniforms:c,framebuffer:l,extensions:n,timer:y,isBufferArgs:ni},A={primTypes:_t,compareFuncs:$o,blendFuncs:Qo,blendEquations:m,stencilOps:ti,glTypes:ft,orientationType:ri};N.optional(function(){T.isArrayLike=Gt}),w&&(A.backBuffer=[Bo],A.drawBuffer=X(o.maxDrawbuffers,function(t){return 0===t?[0]:X(t,function(t){return Ko+t})}));var M=0;function j(){var t=function(){var t=0,r=[],n=[];function o(){var r=[],n=[];return e(function(){r.push.apply(r,en(arguments))},{def:function(){var e="v"+t++;return n.push(e),arguments.length>0&&(r.push(e,"="),r.push.apply(r,en(arguments)),r.push(";")),e},toString:function(){return rn([n.length>0?"var "+n.join(",")+";":"",rn(r)])}})}function i(){var t=o(),r=o(),n=t.toString,i=r.toString;function a(e,n){r(e,n,"=",t.def(e,n),";")}return e(function(){t.apply(t,en(arguments))},{def:t.def,entry:t,exit:r,save:a,set:function(e,r,n){a(e,r),t(e,r,"=",n,";")},toString:function(){return n()+i()}})}var a=o(),s={};return{global:a,link:function(e){for(var o=0;o<n.length;++o)if(n[o]===e)return r[o];var i="g"+t++;return r.push(i),n.push(e),i},block:o,proc:function(t,r){var n=[];function o(){var t="a"+n.length;return n.push(t),t}r=r||0;for(var a=0;a<r;++a)o();var u=i(),l=u.toString;return s[t]=e(u,{arg:o,toString:function(){return rn(["function(",n.join(),"){",l(),"}"])}})},scope:i,cond:function(){var t=rn(arguments),r=i(),n=i(),o=r.toString,a=n.toString;return e(r,{then:function(){return r.apply(r,en(arguments)),this},else:function(){return n.apply(n,en(arguments)),this},toString:function(){var e=a();return e&&(e="else{"+e+"}"),rn(["if(",t,"){",o(),"}",e])}})},compile:function(){var t=['"use strict";',a,"return {"];Object.keys(s).forEach(function(e){t.push('"',e,'":',s[e].toString(),",")}),t.push("}");var e=rn(t).replace(/;/g,";\n").replace(/}/g,"}\n").replace(/{/g,"{\n");return Function.apply(null,r.concat(e)).apply(null,n)}}}(),n=t.link,o=t.global;t.id=M++,t.batchId="0";var i=n(T),a=t.shared={props:"a0"};Object.keys(T).forEach(function(t){a[t]=o.def(i,".",t)}),N.optional(function(){t.CHECK=n(N),t.commandStr=N.guessCommand(),t.command=n(t.commandStr),t.assert=function(t,e,r){t("if(!(",e,"))",this.CHECK,".commandRaise(",n(r),",",this.command,");")},A.invalidBlendCombinations=Zo});var s=t.next={},u=t.current={};Object.keys(O).forEach(function(t){Array.isArray(S[t])&&(s[t]=o.def(a.next,".",t),u[t]=o.def(a.current,".",t))});var l=t.constants={};Object.keys(A).forEach(function(t){l[t]=o.def(JSON.stringify(A[t]))}),t.invoke=function(e,r){switch(r.type){case un:var o=["this",a.context,a.props,t.batchId];return e.def(n(r.data),".call(",o.slice(0,Math.max(r.data.length+1,4)),")");case ln:return e.def(a.props,r.data);case cn:return e.def(a.context,r.data);case fn:return e.def("this",r.data);case hn:return r.data.append(t,e),r.data.ref;case pn:return r.data.toString();case dn:return r.data.map(function(r){return t.invoke(e,r)})}},t.attribCache={};var c={};return t.scopeAttrib=function(t){var e=r.id(t);if(e in c)return c[e];var o=f.scope[e];return o||(o=f.scope[e]=new g),c[e]=n(o)},t}function I(t,e,u,c,p){var d=t.static,y=t.dynamic;N.optional(function(){var t=[Vn,Hn,Wn,qn,Yn,Jn,Xn,Kn,zn,Qn].concat(_);function e(e){Object.keys(e).forEach(function(e){N.command(t.indexOf(e)>=0,'unknown parameter "'+e+'"',p.commandStr)})}e(d),e(y)});var v=function(t,e){var r=t.static;if("string"==typeof r[Wn]&&"string"==typeof r[Hn]){if(Object.keys(e.dynamic).length>0)return null;var n=e.static,o=Object.keys(n);if(o.length>0&&"number"==typeof n[o[0]]){for(var i=[],a=0;a<o.length;++a)N("number"==typeof n[o[a]],"must specify all vertex attribute locations when using vaos"),i.push([0|n[o[a]],o[a]]);return i}}return null}(t,e),w=function(t,e){var r=t.static,n=t.dynamic;if(Vn in r){var o=r[Vn];return o?(o=l.getFramebuffer(o),N.command(o,"invalid framebuffer object"),si(function(t,e){var r=t.link(o),n=t.shared;e.set(n.framebuffer,".next",r);var i=n.context;return e.set(i,"."+Zn,r+".width"),e.set(i,"."+$n,r+".height"),r})):si(function(t,e){var r=t.shared;e.set(r.framebuffer,".next","null");var n=r.context;return e.set(n,"."+Zn,n+"."+ro),e.set(n,"."+$n,n+"."+no),"null"})}if(Vn in n){var i=n[Vn];return ui(i,function(t,e){var r=t.invoke(e,i),n=t.shared,o=n.framebuffer,a=e.def(o,".getFramebuffer(",r,")");N.optional(function(){t.assert(e,"!"+r+"||"+a,"invalid framebuffer object")}),e.set(o,".next",a);var s=n.context;return e.set(s,"."+Zn,a+"?"+a+".width:"+s+"."+ro),e.set(s,"."+$n,a+"?"+a+".height:"+s+"."+no),a})}return null}(t),S=function(t,e,r){var n=t.static,o=t.dynamic;function i(t){if(t in n){var i=n[t];N.commandType(i,"object","invalid "+t,r.commandStr);var a,s,u=!0,l=0|i.x,c=0|i.y;return"width"in i?(a=0|i.width,N.command(a>=0,"invalid "+t,r.commandStr)):u=!1,"height"in i?(s=0|i.height,N.command(s>=0,"invalid "+t,r.commandStr)):u=!1,new ii(!u&&e&&e.thisDep,!u&&e&&e.contextDep,!u&&e&&e.propDep,function(t,e){var r=t.shared.context,n=a;"width"in i||(n=e.def(r,".",Zn,"-",l));var o=s;return"height"in i||(o=e.def(r,".",$n,"-",c)),[l,c,n,o]})}if(t in o){var f=o[t],h=ui(f,function(e,r){var n=e.invoke(r,f);N.optional(function(){e.assert(r,n+"&&typeof "+n+'==="object"',"invalid "+t)});var o=e.shared.context,i=r.def(n,".x|0"),a=r.def(n,".y|0"),s=r.def('"width" in ',n,"?",n,".width|0:","(",o,".",Zn,"-",i,")"),u=r.def('"height" in ',n,"?",n,".height|0:","(",o,".",$n,"-",a,")");return N.optional(function(){e.assert(r,s+">=0&&"+u+">=0","invalid "+t)}),[i,a,s,u]});return e&&(h.thisDep=h.thisDep||e.thisDep,h.contextDep=h.contextDep||e.contextDep,h.propDep=h.propDep||e.propDep),h}return e?new ii(e.thisDep,e.contextDep,e.propDep,function(t,e){var r=t.shared.context;return[0,0,e.def(r,".",Zn),e.def(r,".",$n)]}):null}var a=i(Un);if(a){var s=a;a=new ii(a.thisDep,a.contextDep,a.propDep,function(t,e){var r=s.append(t,e),n=t.shared.context;return e.set(n,"."+to,r[2]),e.set(n,"."+eo,r[3]),r})}return{viewport:a,scissor_box:i(Gn)}}(t,w,p),x=function(t,e){var r=t.static,n=t.dynamic,o=function(){if(qn in r){var t=r[qn];ni(t)?t=s.getElements(s.create(t,!0)):t&&(t=s.getElements(t),N.command(t,"invalid elements",e.commandStr));var o=si(function(e,r){if(t){var n=e.link(t);return e.ELEMENTS=n,n}return e.ELEMENTS=null,null});return o.value=t,o}if(qn in n){var i=n[qn];return ui(i,function(t,e){var r=t.shared,n=r.isBufferArgs,o=r.elements,a=t.invoke(e,i),s=e.def("null"),u=e.def(n,"(",a,")"),l=t.cond(u).then(s,"=",o,".createStream(",a,");").else(s,"=",o,".getElements(",a,");");return N.optional(function(){t.assert(l.else,"!"+a+"||"+s,"invalid elements")}),e.entry(l),e.exit(t.cond(u).then(o,".destroyStream(",s,");")),t.ELEMENTS=s,s})}return null}();function i(t,i){if(t in r){var a=0|r[t];return N.command(!i||a>=0,"invalid "+t,e.commandStr),si(function(t,e){return i&&(t.OFFSET=a),a})}if(t in n){var s=n[t];return ui(s,function(e,r){var n=e.invoke(r,s);return i&&(e.OFFSET=n,N.optional(function(){e.assert(r,n+">=0","invalid "+t)})),n})}return i&&o?si(function(t,e){return t.OFFSET="0",0}):null}var a=i(Jn,!0);return{elements:o,primitive:function(){if(Yn in r){var t=r[Yn];return N.commandParameter(t,_t,"invalid primitve",e.commandStr),si(function(e,r){return _t[t]})}if(Yn in n){var i=n[Yn];return ui(i,function(t,e){var r=t.constants.primTypes,n=t.invoke(e,i);return N.optional(function(){t.assert(e,n+" in "+r,"invalid primitive, must be one of "+Object.keys(_t))}),e.def(r,"[",n,"]")})}return o?ai(o)?o.value?si(function(t,e){return e.def(t.ELEMENTS,".primType")}):si(function(){return Ro}):new ii(o.thisDep,o.contextDep,o.propDep,function(t,e){var r=t.ELEMENTS;return e.def(r,"?",r,".primType:",Ro)}):null}(),count:function(){if(Xn in r){var t=0|r[Xn];return N.command("number"==typeof t&&t>=0,"invalid vertex count",e.commandStr),si(function(){return t})}if(Xn in n){var i=n[Xn];return ui(i,function(t,e){var r=t.invoke(e,i);return N.optional(function(){t.assert(e,"typeof "+r+'==="number"&&'+r+">=0&&"+r+"===("+r+"|0)","invalid vertex count")}),r})}if(o){if(ai(o)){if(o)return a?new ii(a.thisDep,a.contextDep,a.propDep,function(t,e){var r=e.def(t.ELEMENTS,".vertCount-",t.OFFSET);return N.optional(function(){t.assert(e,r+">=0","invalid vertex offset/element buffer too small")}),r}):si(function(t,e){return e.def(t.ELEMENTS,".vertCount")});var s=si(function(){return-1});return N.optional(function(){s.MISSING=!0}),s}var u=new ii(o.thisDep||a.thisDep,o.contextDep||a.contextDep,o.propDep||a.propDep,function(t,e){var r=t.ELEMENTS;return t.OFFSET?e.def(r,"?",r,".vertCount-",t.OFFSET,":-1"):e.def(r,"?",r,".vertCount:-1")});return N.optional(function(){u.DYNAMIC=!0}),u}return null}(),instances:i(Kn,!1),offset:a}}(t,p),E=function(t,e){var r=t.static,n=t.dynamic,i={};return _.forEach(function(t){var s=P(t);function u(e,o){if(t in r){var a=e(r[t]);i[s]=si(function(){return a})}else if(t in n){var u=n[t];i[s]=ui(u,function(t,e){return o(t,e,t.invoke(e,u))})}}switch(t){case On:case vn:case yn:case Nn:case wn:case Fn:case Tn:case Mn:case jn:case _n:return u(function(r){return N.commandType(r,"boolean",t,e.commandStr),r},function(e,r,n){return N.optional(function(){e.assert(r,"typeof "+n+'==="boolean"',"invalid flag "+t,e.commandStr)}),n});case Sn:return u(function(r){return N.commandParameter(r,$o,"invalid "+t,e.commandStr),$o[r]},function(e,r,n){var o=e.constants.compareFuncs;return N.optional(function(){e.assert(r,n+" in "+o,"invalid "+t+", must be one of "+Object.keys($o))}),r.def(o,"[",n,"]")});case xn:return u(function(t){return N.command(Gt(t)&&2===t.length&&"number"==typeof t[0]&&"number"==typeof t[1]&&t[0]<=t[1],"depth range is 2d array",e.commandStr),t},function(t,e,r){return N.optional(function(){t.assert(e,t.shared.isArrayLike+"("+r+")&&"+r+".length===2&&typeof "+r+'[0]==="number"&&typeof '+r+'[1]==="number"&&'+r+"[0]<="+r+"[1]","depth range must be a 2d array")}),[e.def("+",r,"[0]"),e.def("+",r,"[1]")]});case bn:return u(function(t){N.commandType(t,"object","blend.func",e.commandStr);var r="srcRGB"in t?t.srcRGB:t.src,n="srcAlpha"in t?t.srcAlpha:t.src,o="dstRGB"in t?t.dstRGB:t.dst,i="dstAlpha"in t?t.dstAlpha:t.dst;return N.commandParameter(r,Qo,s+".srcRGB",e.commandStr),N.commandParameter(n,Qo,s+".srcAlpha",e.commandStr),N.commandParameter(o,Qo,s+".dstRGB",e.commandStr),N.commandParameter(i,Qo,s+".dstAlpha",e.commandStr),N.command(-1===Zo.indexOf(r+", "+o),"unallowed blending combination (srcRGB, dstRGB) = ("+r+", "+o+")",e.commandStr),[Qo[r],Qo[o],Qo[n],Qo[i]]},function(e,r,n){var o=e.constants.blendFuncs;function i(i,a){var s=r.def('"',i,a,'" in ',n,"?",n,".",i,a,":",n,".",i);return N.optional(function(){e.assert(r,s+" in "+o,"invalid "+t+"."+i+a+", must be one of "+Object.keys(Qo))}),s}N.optional(function(){e.assert(r,n+"&&typeof "+n+'==="object"',"invalid blend func, must be an object")});var a=i("src","RGB"),s=i("dst","RGB");N.optional(function(){var t=e.constants.invalidBlendCombinations;e.assert(r,t+".indexOf("+a+'+", "+'+s+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var u=r.def(o,"[",a,"]"),l=r.def(o,"[",i("src","Alpha"),"]");return[u,r.def(o,"[",s,"]"),l,r.def(o,"[",i("dst","Alpha"),"]")]});case mn:return u(function(r){return"string"==typeof r?(N.commandParameter(r,m,"invalid "+t,e.commandStr),[m[r],m[r]]):"object"===a(r)?(N.commandParameter(r.rgb,m,t+".rgb",e.commandStr),N.commandParameter(r.alpha,m,t+".alpha",e.commandStr),[m[r.rgb],m[r.alpha]]):void N.commandRaise("invalid blend.equation",e.commandStr)},function(e,r,n){var o=e.constants.blendEquations,i=r.def(),a=r.def(),s=e.cond("typeof ",n,'==="string"');return N.optional(function(){function r(t,r,n){e.assert(t,n+" in "+o,"invalid "+r+", must be one of "+Object.keys(m))}r(s.then,t,n),e.assert(s.else,n+"&&typeof "+n+'==="object"',"invalid "+t),r(s.else,t+".rgb",n+".rgb"),r(s.else,t+".alpha",n+".alpha")}),s.then(i,"=",a,"=",o,"[",n,"];"),s.else(i,"=",o,"[",n,".rgb];",a,"=",o,"[",n,".alpha];"),r(s),[i,a]});case gn:return u(function(t){return N.command(Gt(t)&&4===t.length,"blend.color must be a 4d array",e.commandStr),X(4,function(e){return+t[e]})},function(t,e,r){return N.optional(function(){t.assert(e,t.shared.isArrayLike+"("+r+")&&"+r+".length===4","blend.color must be a 4d array")}),X(4,function(t){return e.def("+",r,"[",t,"]")})});case Ln:return u(function(t){return N.commandType(t,"number",s,e.commandStr),0|t},function(t,e,r){return N.optional(function(){t.assert(e,"typeof "+r+'==="number"',"invalid stencil.mask")}),e.def(r,"|0")});case Rn:return u(function(r){N.commandType(r,"object",s,e.commandStr);var n=r.cmp||"keep",o=r.ref||0,i="mask"in r?r.mask:-1;return N.commandParameter(n,$o,t+".cmp",e.commandStr),N.commandType(o,"number",t+".ref",e.commandStr),N.commandType(i,"number",t+".mask",e.commandStr),[$o[n],o,i]},function(t,e,r){var n=t.constants.compareFuncs;return N.optional(function(){function o(){t.assert(e,Array.prototype.join.call(arguments,""),"invalid stencil.func")}o(r+"&&typeof ",r,'==="object"'),o('!("cmp" in ',r,")||(",r,".cmp in ",n,")")}),[e.def('"cmp" in ',r,"?",n,"[",r,".cmp]",":",Ho),e.def(r,".ref|0"),e.def('"mask" in ',r,"?",r,".mask|0:-1")]});case Dn:case Bn:return u(function(r){N.commandType(r,"object",s,e.commandStr);var n=r.fail||"keep",o=r.zfail||"keep",i=r.zpass||"keep";return N.commandParameter(n,ti,t+".fail",e.commandStr),N.commandParameter(o,ti,t+".zfail",e.commandStr),N.commandParameter(i,ti,t+".zpass",e.commandStr),[t===Bn?Bo:Do,ti[n],ti[o],ti[i]]},function(e,r,n){var o=e.constants.stencilOps;function i(i){return N.optional(function(){e.assert(r,'!("'+i+'" in '+n+")||("+n+"."+i+" in "+o+")","invalid "+t+"."+i+", must be one of "+Object.keys(ti))}),r.def('"',i,'" in ',n,"?",o,"[",n,".",i,"]:",Ho)}return N.optional(function(){e.assert(r,n+"&&typeof "+n+'==="object"',"invalid "+t)}),[t===Bn?Bo:Do,i("fail"),i("zfail"),i("zpass")]});case An:return u(function(t){N.commandType(t,"object",s,e.commandStr);var r=0|t.factor,n=0|t.units;return N.commandType(r,"number",s+".factor",e.commandStr),N.commandType(n,"number",s+".units",e.commandStr),[r,n]},function(e,r,n){return N.optional(function(){e.assert(r,n+"&&typeof "+n+'==="object"',"invalid "+t)}),[r.def(n,".factor|0"),r.def(n,".units|0")]});case Pn:return u(function(t){var r=0;return"front"===t?r=Do:"back"===t&&(r=Bo),N.command(!!r,s,e.commandStr),r},function(t,e,r){return N.optional(function(){t.assert(e,r+'==="front"||'+r+'==="back"',"invalid cull.face")}),e.def(r,'==="front"?',Do,":",Bo)});case Cn:return u(function(t){return N.command("number"==typeof t&&t>=o.lineWidthDims[0]&&t<=o.lineWidthDims[1],"invalid line width, must be a positive number between "+o.lineWidthDims[0]+" and "+o.lineWidthDims[1],e.commandStr),t},function(t,e,r){return N.optional(function(){t.assert(e,"typeof "+r+'==="number"&&'+r+">="+o.lineWidthDims[0]+"&&"+r+"<="+o.lineWidthDims[1],"invalid line width")}),r});case kn:return u(function(t){return N.commandParameter(t,ri,s,e.commandStr),ri[t]},function(t,e,r){return N.optional(function(){t.assert(e,r+'==="cw"||'+r+'==="ccw"',"invalid frontFace, must be one of cw,ccw")}),e.def(r+'==="cw"?'+Fo+":"+Go)});case En:return u(function(t){return N.command(Gt(t)&&4===t.length,"color.mask must be length 4 array",e.commandStr),t.map(function(t){return!!t})},function(t,e,r){return N.optional(function(){t.assert(e,t.shared.isArrayLike+"("+r+")&&"+r+".length===4","invalid color.mask")}),X(4,function(t){return"!!"+r+"["+t+"]"})});case In:return u(function(t){N.command("object"===a(t)&&t,s,e.commandStr);var r="value"in t?t.value:1,n=!!t.invert;return N.command("number"==typeof r&&r>=0&&r<=1,"sample.coverage.value must be a number between 0 and 1",e.commandStr),[r,n]},function(t,e,r){return N.optional(function(){t.assert(e,r+"&&typeof "+r+'==="object"',"invalid sample.coverage")}),[e.def('"value" in ',r,"?+",r,".value:1"),e.def("!!",r,".invert")]})}}),i}(t,p),O=function(t,e,n){var o=t.static,i=t.dynamic;function a(t){if(t in o){var e=r.id(o[t]);N.optional(function(){h.shader(ei[t],e,N.guessCommand())});var n=si(function(){return e});return n.id=e,n}if(t in i){var a=i[t];return ui(a,function(e,r){var n=e.invoke(r,a),o=r.def(e.shared.strings,".id(",n,")");return N.optional(function(){r(e.shared.shader,".shader(",ei[t],",",o,",",e.command,");")}),o})}return null}var s,u=a(Wn),l=a(Hn),c=null;return ai(u)&&ai(l)?(c=h.program(l.id,u.id,null,n),s=si(function(t,e){return t.link(c)})):s=new ii(u&&u.thisDep||l&&l.thisDep,u&&u.contextDep||l&&l.contextDep,u&&u.propDep||l&&l.propDep,function(t,e){var r,n=t.shared.shader;r=u?u.append(t,e):e.def(n,".",Wn);var o=n+".program("+(l?l.append(t,e):e.def(n,".",Hn))+","+r;return N.optional(function(){o+=","+t.command}),e.def(o+")")}),{frag:u,vert:l,progVar:s,program:c}}(t,0,v);function k(t){var e=S[t];e&&(E[t]=e)}k(Un),k(P(Gn));var C=Object.keys(E).length>0,T={framebuffer:w,draw:x,shader:O,state:E,dirty:C,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(T.profile=function(t){var e,r=t.static,n=t.dynamic;if(zn in r){var o=!!r[zn];(e=si(function(t,e){return o})).enable=o}else if(zn in n){var i=n[zn];e=ui(i,function(t,e){return t.invoke(e,i)})}return e}(t),T.uniforms=function(t,e){var r=t.static,n=t.dynamic,o={};return Object.keys(r).forEach(function(t){var n,i=r[t];if("number"==typeof i||"boolean"==typeof i)n=si(function(){return i});else if("function"==typeof i){var a=i._reglType;"texture2d"===a||"textureCube"===a?n=si(function(t){return t.link(i)}):"framebuffer"===a||"framebufferCube"===a?(N.command(i.color.length>0,'missing color attachment for framebuffer sent to uniform "'+t+'"',e.commandStr),n=si(function(t){return t.link(i.color[0])})):N.commandRaise('invalid data for uniform "'+t+'"',e.commandStr)}else Gt(i)?n=si(function(e){return e.global.def("[",X(i.length,function(r){return N.command("number"==typeof i[r]||"boolean"==typeof i[r],"invalid uniform "+t,e.commandStr),i[r]}),"]")}):N.commandRaise('invalid or missing data for uniform "'+t+'"',e.commandStr);n.value=i,o[t]=n}),Object.keys(n).forEach(function(t){var e=n[t];o[t]=ui(e,function(t,r){return t.invoke(r,e)})}),o}(u,p),T.drawVAO=T.scopeVAO=function(t,e){var r=t.static,n=t.dynamic;if(Qn in r){var o=r[Qn];return null!==o&&null===f.getVAO(o)&&(o=f.createVAO(o)),si(function(t){return t.link(f.getVAO(o))})}if(Qn in n){var i=n[Qn];return ui(i,function(t,e){var r=t.invoke(e,i);return e.def(t.shared.vao+".getVAO("+r+")")})}return null}(t),!T.drawVAO&&O.program&&!v&&n.angle_instanced_arrays){var A=!0,M=O.program.attributes.map(function(t){var r=e.static[t];return A=A&&!!r,r});if(A&&M.length>0){var j=f.getVAO(f.createVAO(M));T.drawVAO=new ii(null,null,null,function(t,e){return t.link(j)}),T.useVAO=!0}}return v?T.useVAO=!0:T.attributes=function(t,e){var n=t.static,o=t.dynamic,s={};return Object.keys(n).forEach(function(t){var o=n[t],u=r.id(t),l=new g;if(ni(o))l.state=an,l.buffer=i.getBuffer(i.create(o,io,!1,!0)),l.type=0;else{var c=i.getBuffer(o);if(c)l.state=an,l.buffer=c,l.type=0;else if(N.command("object"===a(o)&&o,"invalid data for attribute "+t,e.commandStr),"constant"in o){var f=o.constant;l.buffer="null",l.state=sn,"number"==typeof f?l.x=f:(N.command(Gt(f)&&f.length>0&&f.length<=4,"invalid constant for attribute "+t,e.commandStr),nn.forEach(function(t,e){e<f.length&&(l[t]=f[e])}))}else{c=ni(o.buffer)?i.getBuffer(i.create(o.buffer,io,!1,!0)):i.getBuffer(o.buffer),N.command(!!c,'missing buffer for attribute "'+t+'"',e.commandStr);var h=0|o.offset;N.command(h>=0,'invalid offset for attribute "'+t+'"',e.commandStr);var p=0|o.stride;N.command(p>=0&&p<256,'invalid stride for attribute "'+t+'", must be integer betweeen [0, 255]',e.commandStr);var d=0|o.size;N.command(!("size"in o)||d>0&&d<=4,'invalid size for attribute "'+t+'", must be 1,2,3,4',e.commandStr);var y=!!o.normalized,v=0;"type"in o&&(N.commandParameter(o.type,ft,"invalid type for attribute "+t,e.commandStr),v=ft[o.type]);var m=0|o.divisor;"divisor"in o&&(N.command(0===m||b,'cannot specify divisor for attribute "'+t+'", instancing not supported',e.commandStr),N.command(m>=0,'invalid divisor for attribute "'+t+'"',e.commandStr)),N.optional(function(){var r=e.commandStr,n=["buffer","offset","divisor","normalized","type","size","stride"];Object.keys(o).forEach(function(e){N.command(n.indexOf(e)>=0,'unknown parameter "'+e+'" for attribute pointer "'+t+'" (valid parameters are '+n+")",r)})}),l.buffer=c,l.state=an,l.size=d,l.normalized=y,l.type=v||c.dtype,l.offset=h,l.stride=p,l.divisor=m}}s[t]=si(function(t,e){var r=t.attribCache;if(u in r)return r[u];var n={isStream:!1};return Object.keys(l).forEach(function(t){n[t]=l[t]}),l.buffer&&(n.buffer=t.link(l.buffer),n.type=n.type||n.buffer+".dtype"),r[u]=n,n})}),Object.keys(o).forEach(function(t){var e=o[t];s[t]=ui(e,function(r,n){var o=r.invoke(n,e),i=r.shared,a=r.constants,s=i.isBufferArgs,u=i.buffer;N.optional(function(){r.assert(n,o+"&&(typeof "+o+'==="object"||typeof '+o+'==="function")&&('+s+"("+o+")||"+u+".getBuffer("+o+")||"+u+".getBuffer("+o+".buffer)||"+s+"("+o+'.buffer)||("constant" in '+o+"&&(typeof "+o+'.constant==="number"||'+i.isArrayLike+"("+o+".constant))))",'invalid dynamic attribute "'+t+'"')});var l={isStream:n.def(!1)},c=new g;c.state=an,Object.keys(c).forEach(function(t){l[t]=n.def(""+c[t])});var f=l.buffer,h=l.type;function p(t){n(l[t],"=",o,".",t,"|0;")}return n("if(",s,"(",o,")){",l.isStream,"=true;",f,"=",u,".createStream(",io,",",o,");",h,"=",f,".dtype;","}else{",f,"=",u,".getBuffer(",o,");","if(",f,"){",h,"=",f,".dtype;",'}else if("constant" in ',o,"){",l.state,"=",sn,";","if(typeof "+o+'.constant === "number"){',l[nn[0]],"=",o,".constant;",nn.slice(1).map(function(t){return l[t]}).join("="),"=0;","}else{",nn.map(function(t,e){return l[t]+"="+o+".constant.length>"+e+"?"+o+".constant["+e+"]:0;"}).join(""),"}}else{","if(",s,"(",o,".buffer)){",f,"=",u,".createStream(",io,",",o,".buffer);","}else{",f,"=",u,".getBuffer(",o,".buffer);","}",h,'="type" in ',o,"?",a.glTypes,"[",o,".type]:",f,".dtype;",l.normalized,"=!!",o,".normalized;"),p("size"),p("offset"),p("stride"),p("divisor"),n("}}"),n.exit("if(",l.isStream,"){",u,".destroyStream(",f,");","}"),l})}),s}(e,p),T.context=function(t){var e=t.static,r=t.dynamic,n={};return Object.keys(e).forEach(function(t){var r=e[t];n[t]=si(function(t,e){return"number"==typeof r||"boolean"==typeof r?""+r:t.link(r)})}),Object.keys(r).forEach(function(t){var e=r[t];n[t]=ui(e,function(t,r){return t.invoke(r,e)})}),n}(c),T}function L(t,e,r){var n=t.shared.context,o=t.scope();Object.keys(r).forEach(function(i){e.save(n,"."+i);var a=r[i].append(t,e);Array.isArray(a)?o(n,".",i,"=[",a.join(),"];"):o(n,".",i,"=",a,";")}),e(o)}function R(t,e,r,n){var o,i=t.shared,a=i.gl,s=i.framebuffer;w&&(o=e.def(i.extensions,".webgl_draw_buffers"));var u,l=t.constants,c=l.drawBuffer,f=l.backBuffer;u=r?r.append(t,e):e.def(s,".next"),n||e("if(",u,"!==",s,".cur){"),e("if(",u,"){",a,".bindFramebuffer(",Jo,",",u,".framebuffer);"),w&&e(o,".drawBuffersWEBGL(",c,"[",u,".colorAttachments.length]);"),e("}else{",a,".bindFramebuffer(",Jo,",null);"),w&&e(o,".drawBuffersWEBGL(",f,");"),e("}",s,".cur=",u,";"),n||e("}")}function D(t,e,r){var n=t.shared,o=n.gl,i=t.current,a=t.next,s=n.current,u=n.next,l=t.cond(s,".dirty");_.forEach(function(e){var n,c,f=P(e);if(!(f in r.state))if(f in a){n=a[f],c=i[f];var h=X(S[f].length,function(t){return l.def(n,"[",t,"]")});l(t.cond(h.map(function(t,e){return t+"!=="+c+"["+e+"]"}).join("||")).then(o,".",O[f],"(",h,");",h.map(function(t,e){return c+"["+e+"]="+t}).join(";"),";"))}else{n=l.def(u,".",f);var p=t.cond(n,"!==",s,".",f);l(p),f in E?p(t.cond(n).then(o,".enable(",E[f],");").else(o,".disable(",E[f],");"),s,".",f,"=",n,";"):p(o,".",O[f],"(",n,");",s,".",f,"=",n,";")}}),0===Object.keys(r.state).length&&l(s,".dirty=false;"),e(l)}function B(t,e,r,n){var o=t.shared,i=t.current,a=o.current,s=o.gl;oi(Object.keys(r)).forEach(function(o){var u=r[o];if(!n||n(u)){var l=u.append(t,e);if(E[o]){var c=E[o];ai(u)?e(s,l?".enable(":".disable(",c,");"):e(t.cond(l).then(s,".enable(",c,");").else(s,".disable(",c,");")),e(a,".",o,"=",l,";")}else if(Gt(l)){var f=i[o];e(s,".",O[o],"(",l,");",l.map(function(t,e){return f+"["+e+"]="+t}).join(";"),";")}else e(s,".",O[o],"(",l,");",a,".",o,"=",l,";")}})}function F(t,e){b&&(t.instancing=e.def(t.shared.extensions,".angle_instanced_arrays"))}function G(t,e,r,n,o){var i,a,s,u=t.shared,l=t.stats,c=u.current,f=u.timer,h=r.profile;function p(){return"undefined"==typeof performance?"Date.now()":"performance.now()"}function d(t){t(i=e.def(),"=",p(),";"),"string"==typeof o?t(l,".count+=",o,";"):t(l,".count++;"),y&&(n?t(a=e.def(),"=",f,".getNumPendingQueries();"):t(f,".beginQuery(",l,");"))}function v(t){t(l,".cpuTime+=",p(),"-",i,";"),y&&(n?t(f,".pushScopeStats(",a,",",f,".getNumPendingQueries(),",l,");"):t(f,".endQuery();"))}function g(t){var r=e.def(c,".profile");e(c,".profile=",t,";"),e.exit(c,".profile=",r,";")}if(h){if(ai(h))return void(h.enable?(d(e),v(e.exit),g("true")):g("false"));g(s=h.append(t,e))}else s=e.def(c,".profile");var m=t.block();d(m),e("if(",s,"){",m,"}");var b=t.block();v(b),e.exit("if(",s,"){",b,"}")}function U(t,e,r,n,o){var i=t.shared;n.forEach(function(n){var a,s=n.name,u=r.attributes[s];if(u){if(!o(u))return;a=u.append(t,e)}else{if(!o(li))return;var l=t.scopeAttrib(s);N.optional(function(){t.assert(e,l+".state","missing attribute "+s)}),a={},Object.keys(new g).forEach(function(t){a[t]=e.def(l,".",t)})}!function(r,n,o){var a=i.gl,s=e.def(r,".location"),u=e.def(i.attributes,"[",s,"]"),l=o.state,c=o.buffer,f=[o.x,o.y,o.z,o.w],h=["buffer","normalized","offset","stride"];function p(){e("if(!",u,".buffer){",a,".enableVertexAttribArray(",s,");}");var r,i=o.type;if(r=o.size?e.def(o.size,"||",n):n,e("if(",u,".type!==",i,"||",u,".size!==",r,"||",h.map(function(t){return u+"."+t+"!=="+o[t]}).join("||"),"){",a,".bindBuffer(",io,",",c,".buffer);",a,".vertexAttribPointer(",[s,r,i,o.normalized,o.stride,o.offset],");",u,".type=",i,";",u,".size=",r,";",h.map(function(t){return u+"."+t+"="+o[t]+";"}).join(""),"}"),b){var l=o.divisor;e("if(",u,".divisor!==",l,"){",t.instancing,".vertexAttribDivisorANGLE(",[s,l],");",u,".divisor=",l,";}")}}function d(){e("if(",u,".buffer){",a,".disableVertexAttribArray(",s,");",u,".buffer=null;","}if(",nn.map(function(t,e){return u+"."+t+"!=="+f[e]}).join("||"),"){",a,".vertexAttrib4f(",s,",",f,");",nn.map(function(t,e){return u+"."+t+"="+f[e]+";"}).join(""),"}")}l===an?p():l===sn?d():(e("if(",l,"===",an,"){"),p(),e("}else{"),d(),e("}"))}(t.link(n),function(t){switch(t){case wo:case Eo:case Co:return 2;case So:case Oo:case To:return 3;case xo:case Po:case Ao:return 4;default:return 1}}(n.info.type),a)})}function V(t,e,n,o,i){for(var a,s=t.shared,u=s.gl,l=0;l<o.length;++l){var c,f=o[l],h=f.name,p=f.info.type,d=n.uniforms[h],y=t.link(f)+".location";if(d){if(!i(d))continue;if(ai(d)){var v=d.value;if(N.command(null!==v&&void 0!==v,'missing uniform "'+h+'"',t.commandStr),p===No||p===Lo){N.command("function"==typeof v&&(p===No&&("texture2d"===v._reglType||"framebuffer"===v._reglType)||p===Lo&&("textureCube"===v._reglType||"framebufferCube"===v._reglType)),"invalid texture for uniform "+h,t.commandStr);var g=t.link(v._texture||v.color[0]._texture);e(u,".uniform1i(",y,",",g+".bind());"),e.exit(g,".unbind();")}else if(p===Mo||p===jo||p===Io){N.optional(function(){N.command(Gt(v),"invalid matrix for uniform "+h,t.commandStr),N.command(p===Mo&&4===v.length||p===jo&&9===v.length||p===Io&&16===v.length,"invalid length for matrix uniform "+h,t.commandStr)});var m=t.global.def("new Float32Array(["+Array.prototype.slice.call(v)+"])"),b=2;p===jo?b=3:p===Io&&(b=4),e(u,".uniformMatrix",b,"fv(",y,",false,",m,");")}else{switch(p){case bo:N.commandType(v,"number","uniform "+h,t.commandStr),a="1f";break;case wo:N.command(Gt(v)&&2===v.length,"uniform "+h,t.commandStr),a="2f";break;case So:N.command(Gt(v)&&3===v.length,"uniform "+h,t.commandStr),a="3f";break;case xo:N.command(Gt(v)&&4===v.length,"uniform "+h,t.commandStr),a="4f";break;case ko:N.commandType(v,"boolean","uniform "+h,t.commandStr),a="1i";break;case _o:N.commandType(v,"number","uniform "+h,t.commandStr),a="1i";break;case Co:case Eo:N.command(Gt(v)&&2===v.length,"uniform "+h,t.commandStr),a="2i";break;case To:case Oo:N.command(Gt(v)&&3===v.length,"uniform "+h,t.commandStr),a="3i";break;case Ao:case Po:N.command(Gt(v)&&4===v.length,"uniform "+h,t.commandStr),a="4i"}e(u,".uniform",a,"(",y,",",Gt(v)?Array.prototype.slice.call(v):v,");")}continue}c=d.append(t,e)}else{if(!i(li))continue;c=e.def(s.uniforms,"[",r.id(h),"]")}p===No?(N(!Array.isArray(c),"must specify a scalar prop for textures"),e("if(",c,"&&",c,'._reglType==="framebuffer"){',c,"=",c,".color[0];","}")):p===Lo&&(N(!Array.isArray(c),"must specify a scalar prop for cube maps"),e("if(",c,"&&",c,'._reglType==="framebufferCube"){',c,"=",c,".color[0];","}")),N.optional(function(){function r(r,n){t.assert(e,r,'bad data or missing for uniform "'+h+'".  '+n)}function n(t){N(!Array.isArray(c),"must not specify an array type for uniform"),r("typeof "+c+'==="'+t+'"',"invalid type, expected "+t)}function o(e,n){Array.isArray(c)?N(c.length===e,"must have length "+e):r(s.isArrayLike+"("+c+")&&"+c+".length==="+e,"invalid vector, should have length "+e,t.commandStr)}function i(e){N(!Array.isArray(c),"must not specify a value type"),r("typeof "+c+'==="function"&&'+c+'._reglType==="texture'+(e===so?"2d":"Cube")+'"',"invalid texture type",t.commandStr)}switch(p){case _o:n("number");break;case Eo:o(2);break;case Oo:o(3);break;case Po:o(4);break;case bo:n("number");break;case wo:o(2);break;case So:o(3);break;case xo:o(4);break;case ko:n("boolean");break;case Co:o(2);break;case To:o(3);break;case Ao:case Mo:o(4);break;case jo:o(9);break;case Io:o(16);break;case No:i(so);break;case Lo:i(uo)}});var w=1;switch(p){case No:case Lo:var S=e.def(c,"._texture");e(u,".uniform1i(",y,",",S,".bind());"),e.exit(S,".unbind();");continue;case _o:case ko:a="1i";break;case Eo:case Co:a="2i",w=2;break;case Oo:case To:a="3i",w=3;break;case Po:case Ao:a="4i",w=4;break;case bo:a="1f";break;case wo:a="2f",w=2;break;case So:a="3f",w=3;break;case xo:a="4f",w=4;break;case Mo:a="Matrix2fv";break;case jo:a="Matrix3fv";break;case Io:a="Matrix4fv"}if(e(u,".uniform",a,"(",y,","),"M"===a.charAt(0)){var x=Math.pow(p-Mo+2,2),_=t.global.def("new Float32Array(",x,")");Array.isArray(c)?e("false,(",X(x,function(t){return _+"["+t+"]="+c[t]}),",",_,")"):e("false,(Array.isArray(",c,")||",c," instanceof Float32Array)?",c,":(",X(x,function(t){return _+"["+t+"]="+c+"["+t+"]"}),",",_,")")}else w>1?e(X(w,function(t){return Array.isArray(c)?c[t]:c+"["+t+"]"})):(N(!Array.isArray(c),"uniform value must not be an array"),e(c));e(");")}}function H(t,e,r,n){var o=t.shared,i=o.gl,a=o.draw,s=n.draw;var u=function(){var o,u=s.elements,l=e;return u?((u.contextDep&&n.contextDynamic||u.propDep)&&(l=r),o=u.append(t,l)):o=l.def(a,".",qn),o&&l("if("+o+")"+i+".bindBuffer("+ao+","+o+".buffer.buffer);"),o}();function l(o){var i=s[o];return i?i.contextDep&&n.contextDynamic||i.propDep?i.append(t,r):i.append(t,e):e.def(a,".",o)}var c,f,h=l(Yn),p=l(Jn),d=function(){var o,i=s.count,u=e;return i?((i.contextDep&&n.contextDynamic||i.propDep)&&(u=r),o=i.append(t,u),N.optional(function(){i.MISSING&&t.assert(e,"false","missing vertex count"),i.DYNAMIC&&t.assert(u,o+">=0","missing vertex count")})):(o=u.def(a,".",Xn),N.optional(function(){t.assert(u,o+">=0","missing vertex count")})),o}();if("number"==typeof d){if(0===d)return}else r("if(",d,"){"),r.exit("}");b&&(c=l(Kn),f=t.instancing);var y=u+".type",v=s.elements&&ai(s.elements);function g(){function t(){r(f,".drawElementsInstancedANGLE(",[h,d,y,p+"<<(("+y+"-"+on+")>>1)",c],");")}function e(){r(f,".drawArraysInstancedANGLE(",[h,p,d,c],");")}u?v?t():(r("if(",u,"){"),t(),r("}else{"),e(),r("}")):e()}function m(){function t(){r(i+".drawElements("+[h,d,y,p+"<<(("+y+"-"+on+")>>1)"]+");")}function e(){r(i+".drawArrays("+[h,p,d]+");")}u?v?t():(r("if(",u,"){"),t(),r("}else{"),e(),r("}")):e()}b&&("number"!=typeof c||c>=0)?"string"==typeof c?(r("if(",c,">0){"),g(),r("}else if(",c,"<0){"),m(),r("}")):g():m()}function W(t,e,r,n,o){var i=j(),a=i.proc("body",o);return N.optional(function(){i.commandStr=e.commandStr,i.command=i.link(e.commandStr)}),b&&(i.instancing=a.def(i.shared.extensions,".angle_instanced_arrays")),t(i,a,r,n),i.compile().body}function q(t,e,r,n){F(t,e),r.useVAO?r.drawVAO?e(t.shared.vao,".setVAO(",r.drawVAO.append(t,e),");"):e(t.shared.vao,".setVAO(",t.shared.vao,".targetVAO);"):(e(t.shared.vao,".setVAO(null);"),U(t,e,r,n.attributes,function(){return!0})),V(t,e,r,n.uniforms,function(){return!0}),H(t,e,e,r)}function Y(t,e,r,n){function o(){return!0}t.batchId="a1",F(t,e),U(t,e,r,n.attributes,o),V(t,e,r,n.uniforms,o),H(t,e,e,r)}function J(t,e,r,n){F(t,e);var o=r.contextDep,i=e.def(),a=e.def();t.shared.props=a,t.batchId=i;var s=t.scope(),u=t.scope();function l(t){return t.contextDep&&o||t.propDep}function c(t){return!l(t)}if(e(s.entry,"for(",i,"=0;",i,"<","a1",";++",i,"){",a,"=","a0","[",i,"];",u,"}",s.exit),r.needsContext&&L(t,u,r.context),r.needsFramebuffer&&R(t,u,r.framebuffer),B(t,u,r.state,l),r.profile&&l(r.profile)&&G(t,u,r,!1,!0),n)r.useVAO?r.drawVAO?l(r.drawVAO)?u(t.shared.vao,".setVAO(",r.drawVAO.append(t,u),");"):s(t.shared.vao,".setVAO(",r.drawVAO.append(t,s),");"):s(t.shared.vao,".setVAO(",t.shared.vao,".targetVAO);"):(s(t.shared.vao,".setVAO(null);"),U(t,s,r,n.attributes,c),U(t,u,r,n.attributes,l)),V(t,s,r,n.uniforms,c),V(t,u,r,n.uniforms,l),H(t,s,u,r);else{var f=t.global.def("{}"),h=r.shader.progVar.append(t,u),p=u.def(h,".id"),d=u.def(f,"[",p,"]");u(t.shared.gl,".useProgram(",h,".program);","if(!",d,"){",d,"=",f,"[",p,"]=",t.link(function(e){return W(Y,t,r,e,2)}),"(",h,");}",d,".call(this,a0[",i,"],",i,");")}}function K(t,e,r){var n=e.static[r];if(n&&function(t){if("object"===a(t)&&!Gt(t)){for(var e=Object.keys(t),r=0;r<e.length;++r)if(z.isDynamic(t[e[r]]))return!0;return!1}}(n)){var o=t.global,i=Object.keys(n),s=!1,u=!1,l=!1,c=t.global.def("{}");i.forEach(function(e){var r=n[e];if(z.isDynamic(r)){"function"==typeof r&&(r=n[e]=z.unbox(r));var i=ui(r,null);s=s||i.thisDep,l=l||i.propDep,u=u||i.contextDep}else{switch(o(c,".",e,"="),a(r)){case"number":o(r);break;case"string":o('"',r,'"');break;case"object":Array.isArray(r)&&o("[",r.join(),"]");break;default:o(t.link(r))}o(";")}}),e.dynamic[r]=new z.DynamicVariable(hn,{thisDep:s,contextDep:u,propDep:l,ref:c,append:function(t,e){i.forEach(function(r){var o=n[r];if(z.isDynamic(o)){var i=t.invoke(e,o);e(c,".",r,"=",i,";")}})}}),delete e.static[r]}}return{next:x,current:S,procs:function(){var t=j(),e=t.proc("poll"),r=t.proc("refresh"),i=t.block();e(i),r(i);var a,s=t.shared,u=s.gl,l=s.next,c=s.current;i(c,".dirty=false;"),R(t,e),R(t,r,null,!0),b&&(a=t.link(b)),n.oes_vertex_array_object&&r(t.link(n.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var f=0;f<o.maxAttributes;++f){var h=r.def(s.attributes,"[",f,"]"),p=t.cond(h,".buffer");p.then(u,".enableVertexAttribArray(",f,");",u,".bindBuffer(",io,",",h,".buffer.buffer);",u,".vertexAttribPointer(",f,",",h,".size,",h,".type,",h,".normalized,",h,".stride,",h,".offset);").else(u,".disableVertexAttribArray(",f,");",u,".vertexAttrib4f(",f,",",h,".x,",h,".y,",h,".z,",h,".w);",h,".buffer=null;"),r(p),b&&r(a,".vertexAttribDivisorANGLE(",f,",",h,".divisor);")}return r(t.shared.vao,".currentVAO=null;",t.shared.vao,".setVAO(",t.shared.vao,".targetVAO);"),Object.keys(E).forEach(function(n){var o=E[n],a=i.def(l,".",n),s=t.block();s("if(",a,"){",u,".enable(",o,")}else{",u,".disable(",o,")}",c,".",n,"=",a,";"),r(s),e("if(",a,"!==",c,".",n,"){",s,"}")}),Object.keys(O).forEach(function(n){var o,a,s=O[n],f=S[n],h=t.block();if(h(u,".",s,"("),Gt(f)){var p=f.length;o=t.global.def(l,".",n),a=t.global.def(c,".",n),h(X(p,function(t){return o+"["+t+"]"}),");",X(p,function(t){return a+"["+t+"]="+o+"["+t+"];"}).join("")),e("if(",X(p,function(t){return o+"["+t+"]!=="+a+"["+t+"]"}).join("||"),"){",h,"}")}else o=i.def(l,".",n),a=i.def(c,".",n),h(o,");",c,".",n,"=",o,";"),e("if(",o,"!==",a,"){",h,"}");r(h)}),t.compile()}(),compile:function(t,n,o,i,a){var s=j();s.stats=s.link(a),Object.keys(n.static).forEach(function(t){K(s,n,t)}),oo.forEach(function(e){K(s,t,e)});var u=I(t,n,o,i,s);return function(t,e){var r=t.proc("draw",1);F(t,r),L(t,r,e.context),R(t,r,e.framebuffer),D(t,r,e),B(t,r,e.state),G(t,r,e,!1,!0);var n=e.shader.progVar.append(t,r);if(r(t.shared.gl,".useProgram(",n,".program);"),e.shader.program)q(t,r,e,e.shader.program);else{r(t.shared.vao,".setVAO(null);");var o=t.global.def("{}"),i=r.def(n,".id"),a=r.def(o,"[",i,"]");r(t.cond(a).then(a,".call(this,a0);").else(a,"=",o,"[",i,"]=",t.link(function(r){return W(q,t,e,r,1)}),"(",n,");",a,".call(this,a0);"))}Object.keys(e.state).length>0&&r(t.shared.current,".dirty=true;")}(s,u),function(t,e){var n=t.proc("scope",3);t.batchId="a2";var o=t.shared,i=o.current;function a(r){var i=e.shader[r];i&&n.set(o.shader,"."+r,i.append(t,n))}L(t,n,e.context),e.framebuffer&&e.framebuffer.append(t,n),oi(Object.keys(e.state)).forEach(function(r){var i=e.state[r].append(t,n);Gt(i)?i.forEach(function(e,o){n.set(t.next[r],"["+o+"]",e)}):n.set(o.next,"."+r,i)}),G(t,n,e,!0,!0),[qn,Jn,Xn,Kn,Yn].forEach(function(r){var i=e.draw[r];i&&n.set(o.draw,"."+r,""+i.append(t,n))}),Object.keys(e.uniforms).forEach(function(i){var a=e.uniforms[i].append(t,n);Array.isArray(a)&&(a="["+a.join()+"]"),n.set(o.uniforms,"["+r.id(i)+"]",a)}),Object.keys(e.attributes).forEach(function(r){var o=e.attributes[r].append(t,n),i=t.scopeAttrib(r);Object.keys(new g).forEach(function(t){n.set(i,"."+t,o[t])})}),e.scopeVAO&&n.set(o.vao,".targetVAO",e.scopeVAO.append(t,n)),a(Hn),a(Wn),Object.keys(e.state).length>0&&(n(i,".dirty=true;"),n.exit(i,".dirty=true;")),n("a1(",t.shared.context,",a0,",t.batchId,");")}(s,u),function(t,e){var r=t.proc("batch",2);t.batchId="0",F(t,r);var n=!1,o=!0;Object.keys(e.context).forEach(function(t){n=n||e.context[t].propDep}),n||(L(t,r,e.context),o=!1);var i=e.framebuffer,a=!1;function s(t){return t.contextDep&&n||t.propDep}i?(i.propDep?n=a=!0:i.contextDep&&n&&(a=!0),a||R(t,r,i)):R(t,r,null),e.state.viewport&&e.state.viewport.propDep&&(n=!0),D(t,r,e),B(t,r,e.state,function(t){return!s(t)}),e.profile&&s(e.profile)||G(t,r,e,!1,"a1"),e.contextDep=n,e.needsContext=o,e.needsFramebuffer=a;var u=e.shader.progVar;if(u.contextDep&&n||u.propDep)J(t,r,e,null);else{var l=u.append(t,r);if(r(t.shared.gl,".useProgram(",l,".program);"),e.shader.program)J(t,r,e,e.shader.program);else{r(t.shared.vao,".setVAO(null);");var c=t.global.def("{}"),f=r.def(l,".id"),h=r.def(c,"[",f,"]");r(t.cond(h).then(h,".call(this,a0,a1);").else(h,"=",c,"[",f,"]=",t.link(function(r){return W(J,t,e,r,2)}),"(",l,");",h,".call(this,a0,a1);"))}}Object.keys(e.state).length>0&&r(t.shared.current,".dirty=true;")}(s,u),e(s.compile(),{destroy:function(){u.shader.program.destroy()}})}}}var fi=34918,hi=34919,pi=35007,di=function(t,e){if(!e.ext_disjoint_timer_query)return null;var r=[];function n(t){r.push(t)}var o=[];var i=[];function a(t){i.push(t)}var s=[];function u(t,e,r){var n=i.pop()||new function(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null};n.startQueryIndex=t,n.endQueryIndex=e,n.sum=0,n.stats=r,s.push(n)}var l=[],c=[];return{beginQuery:function(t){var n=r.pop()||e.ext_disjoint_timer_query.createQueryEXT();e.ext_disjoint_timer_query.beginQueryEXT(pi,n),o.push(n),u(o.length-1,o.length,t)},endQuery:function(){e.ext_disjoint_timer_query.endQueryEXT(pi)},pushScopeStats:u,update:function(){var t,r,i=o.length;if(0!==i){c.length=Math.max(c.length,i+1),l.length=Math.max(l.length,i+1),l[0]=0,c[0]=0;var u=0;for(t=0,r=0;r<o.length;++r){var f=o[r];e.ext_disjoint_timer_query.getQueryObjectEXT(f,hi)?(u+=e.ext_disjoint_timer_query.getQueryObjectEXT(f,fi),n(f)):o[t++]=f,l[r+1]=u,c[r+1]=t}for(o.length=t,t=0,r=0;r<s.length;++r){var h=s[r],p=h.startQueryIndex,d=h.endQueryIndex;h.sum+=l[d]-l[p];var y=c[p],v=c[d];v===y?(h.stats.gpuTime+=h.sum/1e6,a(h)):(h.startQueryIndex=y,h.endQueryIndex=v,s[t++]=h)}s.length=t}},getNumPendingQueries:function(){return o.length},clear:function(){r.push.apply(r,o);for(var t=0;t<r.length;t++)e.ext_disjoint_timer_query.deleteQueryEXT(r[t]);o.length=0,r.length=0},restore:function(){o.length=0,r.length=0}}},yi=16384,vi=256,gi=1024,mi=34962,bi="webglcontextlost",wi="webglcontextrestored",Si=1,xi=2,_i=3;function Ei(t,e){for(var r=0;r<t.length;++r)if(t[r]===e)return r;return-1}return function(r){var n=Y(r);if(!n)return null;var o=n.gl,i=o.getContextAttributes(),s=o.isContextLost(),u=function(t,e){var r={};function n(e){N.type(e,"string","extension name must be string");var n,o=e.toLowerCase();try{n=r[o]=t.getExtension(o)}catch(t){}return!!n}for(var o=0;o<e.extensions.length;++o){var i=e.extensions[o];if(!n(i))return e.onDestroy(),e.onDone('"'+i+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return e.optionalExtensions.forEach(n),{extensions:r,restore:function(){Object.keys(r).forEach(function(t){if(r[t]&&!n(t))throw new Error("(regl): error restoring extension "+t)})}}}(o,n);if(!u)return null;var l,c,f=(l={"":0},c=[""],{id:function(t){var e=l[t];return e||(e=l[t]=c.length,c.push(t),e)},str:function(t){return c[t]}}),h={vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0},p=u.extensions,d=di(o,p),y=H(),v=o.drawingBufferWidth,g=o.drawingBufferHeight,m={tick:0,time:0,viewportWidth:v,viewportHeight:g,framebufferWidth:v,framebufferHeight:g,drawingBufferWidth:v,drawingBufferHeight:g,pixelRatio:n.pixelRatio},b=it(o,p),w=function(e,r,n,o){var i=0,a={};function s(t){this.id=i++,this.buffer=e.createBuffer(),this.type=t,this.usage=yt,this.byteLength=0,this.dimension=1,this.dtype=gt,this.persistentData=null,n.profile&&(this.stats={size:0})}s.prototype.bind=function(){e.bindBuffer(this.type,this.buffer)},s.prototype.destroy=function(){f(this)};var u=[];function l(t,r,n){t.byteLength=r.byteLength,e.bufferData(t.type,r,n)}function c(e,r,n,o,i,a){var s,u;if(e.usage=n,Array.isArray(r)){if(e.dtype=o||mt,r.length>0)if(Array.isArray(r[0])){s=dt(r);for(var c=1,f=1;f<s.length;++f)c*=s[f];e.dimension=c,l(e,u=pt(r,s,e.dtype),n),a?e.persistentData=u:ot.freeType(u)}else if("number"==typeof r[0]){e.dimension=i;var h=ot.allocType(e.dtype,r.length);St(h,r),l(e,h,n),a?e.persistentData=h:ot.freeType(h)}else t(r[0])?(e.dimension=r[0].length,e.dtype=o||wt(r[0])||mt,l(e,u=pt(r,[r.length,r[0].length],e.dtype),n),a?e.persistentData=u:ot.freeType(u)):N.raise("invalid buffer data")}else if(t(r))e.dtype=o||wt(r),e.dimension=i,l(e,r,n),a&&(e.persistentData=new Uint8Array(new Uint8Array(r.buffer)));else if(at(r)){s=r.shape;var p=r.stride,d=r.offset,y=0,v=0,g=0,m=0;1===s.length?(y=s[0],v=1,g=p[0],m=0):2===s.length?(y=s[0],v=s[1],g=p[0],m=p[1]):N.raise("invalid shape"),e.dtype=o||wt(r.data)||mt,e.dimension=v;var b=ot.allocType(e.dtype,y*v);xt(b,r.data,y,v,g,m,d),l(e,b,n),a?e.persistentData=b:ot.freeType(b)}else r instanceof ArrayBuffer?(e.dtype=gt,e.dimension=i,l(e,r,n),a&&(e.persistentData=new Uint8Array(new Uint8Array(r)))):N.raise("invalid buffer data")}function f(t){r.bufferCount--,o(t);var n=t.buffer;N(n,"buffer must not be deleted already"),e.deleteBuffer(n),t.buffer=null,delete a[t.id]}return n.profile&&(r.getTotalBufferSize=function(){var t=0;return Object.keys(a).forEach(function(e){t+=a[e].stats.size}),t}),{create:function(o,i,u,l){r.bufferCount++;var h=new s(i);function p(r){var o=yt,i=null,a=0,s=0,u=1;return Array.isArray(r)||t(r)||at(r)||r instanceof ArrayBuffer?i=r:"number"==typeof r?a=0|r:r&&(N.type(r,"object","buffer arguments must be an object, a number or an array"),"data"in r&&(N(null===i||Array.isArray(i)||t(i)||at(i),"invalid data for buffer"),i=r.data),"usage"in r&&(N.parameter(r.usage,ht,"invalid buffer usage"),o=ht[r.usage]),"type"in r&&(N.parameter(r.type,ft,"invalid buffer type"),s=ft[r.type]),"dimension"in r&&(N.type(r.dimension,"number","invalid dimension"),u=0|r.dimension),"length"in r&&(N.nni(a,"buffer length must be a nonnegative integer"),a=0|r.length)),h.bind(),i?c(h,i,o,s,u,l):(a&&e.bufferData(h.type,a,o),h.dtype=s||gt,h.usage=o,h.dimension=u,h.byteLength=a),n.profile&&(h.stats.size=h.byteLength*bt[h.dtype]),p}function d(t,r){N(r+t.byteLength<=h.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+t.byteLength+" starting from offset "+r+" to a buffer of size "+h.byteLength),e.bufferSubData(h.type,r,t)}return a[h.id]=h,u||p(o),p._reglType="buffer",p._buffer=h,p.subdata=function(e,r){var n,o=0|(r||0);if(h.bind(),t(e)||e instanceof ArrayBuffer)d(e,o);else if(Array.isArray(e)){if(e.length>0)if("number"==typeof e[0]){var i=ot.allocType(h.dtype,e.length);St(i,e),d(i,o),ot.freeType(i)}else if(Array.isArray(e[0])||t(e[0])){n=dt(e);var a=pt(e,n,h.dtype);d(a,o),ot.freeType(a)}else N.raise("invalid buffer data")}else if(at(e)){n=e.shape;var s=e.stride,u=0,l=0,c=0,f=0;1===n.length?(u=n[0],l=1,c=s[0],f=0):2===n.length?(u=n[0],l=n[1],c=s[0],f=s[1]):N.raise("invalid shape");var y=Array.isArray(e.data)?h.dtype:wt(e.data),v=ot.allocType(y,u*l);xt(v,e.data,u,l,c,f,e.offset),d(v,o),ot.freeType(v)}else N.raise("invalid data for buffer subdata");return p},n.profile&&(p.stats=h.stats),p.destroy=function(){f(h)},p},createStream:function(t,e){var r=u.pop();return r||(r=new s(t)),r.bind(),c(r,e,vt,0,1,!1),r},destroyStream:function(t){u.push(t)},clear:function(){st(a).forEach(f),u.forEach(f)},getBuffer:function(t){return t&&t._buffer instanceof s?t._buffer:null},restore:function(){st(a).forEach(function(t){t.buffer=e.createBuffer(),e.bindBuffer(t.type,t.buffer),e.bufferData(t.type,t.persistentData||t.byteLength,t.usage)})},_initBuffer:c}}(o,h,n,function(t){return S.destroyBuffer(t)}),S=function(e,r,n,o,i){for(var a=n.maxAttributes,s=new Array(a),u=0;u<a;++u)s[u]=new Hr;var l=0,c={},f={Record:Hr,scope:{},state:s,currentVAO:null,targetVAO:null,restore:h()?function(){h()&&st(c).forEach(function(t){t.refresh()})}:function(){},createVAO:function(e){var n=new d;function s(e){N(Array.isArray(e),"arguments to vertex array constructor must be an array"),N(e.length<a,"too many attributes"),N(e.length>0,"must specify at least one attribute");var o={},u=n.attributes;u.length=e.length;for(var l=0;l<e.length;++l){var c,f=e[l],h=u[l]=new Hr,p=f.data||f;Array.isArray(p)||t(p)||at(p)?(n.buffers[l]&&(c=n.buffers[l],t(p)&&c._buffer.byteLength>=p.byteLength?c.subdata(p):(c.destroy(),n.buffers[l]=null)),n.buffers[l]||(c=n.buffers[l]=i.create(f,Vr,!1,!0)),h.buffer=i.getBuffer(c),h.size=0|h.buffer.dimension,h.normalized=!1,h.type=h.buffer.dtype,h.offset=0,h.stride=0,h.divisor=0,h.state=1,o[l]=1):i.getBuffer(f)?(h.buffer=i.getBuffer(f),h.size=0|h.buffer.dimension,h.normalized=!1,h.type=h.buffer.dtype,h.offset=0,h.stride=0,h.divisor=0,h.state=1):i.getBuffer(f.buffer)?(h.buffer=i.getBuffer(f.buffer),h.size=0|(+f.size||h.buffer.dimension),h.normalized=!!f.normalized||!1,"type"in f?(N.parameter(f.type,ft,"invalid buffer type"),h.type=ft[f.type]):h.type=h.buffer.dtype,h.offset=0|(f.offset||0),h.stride=0|(f.stride||0),h.divisor=0|(f.divisor||0),h.state=1,N(h.size>=1&&h.size<=4,"size must be between 1 and 4"),N(h.offset>=0,"invalid offset"),N(h.stride>=0&&h.stride<=255,"stride must be between 0 and 255"),N(h.divisor>=0,"divisor must be positive"),N(!h.divisor||!!r.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in f?(N(l>0,"first attribute must not be a constant"),h.x=+f.x||0,h.y=+f.y||0,h.z=+f.z||0,h.w=+f.w||0,h.state=2):N(!1,"invalid attribute spec for location "+l)}for(var d=0;d<n.buffers.length;++d)!o[d]&&n.buffers[d]&&(n.buffers[d].destroy(),n.buffers[d]=null);return n.refresh(),s}return o.vaoCount+=1,s.destroy=function(){for(var t=0;t<n.buffers.length;++t)n.buffers[t]&&n.buffers[t].destroy();n.buffers.length=0,n.destroy()},s._vao=n,s._reglType="vao",s(e)},getVAO:function(t){return"function"==typeof t&&t._vao?t._vao:null},destroyBuffer:function(t){for(var r=0;r<s.length;++r){var n=s[r];n.buffer===t&&(e.disableVertexAttribArray(r),n.buffer=null)}},setVAO:h()?function(t){if(t!==f.currentVAO){var e=h();t?e.bindVertexArrayOES(t.vao):e.bindVertexArrayOES(null),f.currentVAO=t}}:function(t){if(t!==f.currentVAO){if(t)t.bindAttrs();else for(var r=p(),n=0;n<s.length;++n){var o=s[n];o.buffer?(e.enableVertexAttribArray(n),e.vertexAttribPointer(n,o.size,o.type,o.normalized,o.stride,o.offfset),r&&o.divisor&&r.vertexAttribDivisorANGLE(n,o.divisor)):(e.disableVertexAttribArray(n),e.vertexAttrib4f(n,o.x,o.y,o.z,o.w))}f.currentVAO=t}},clear:h()?function(){st(c).forEach(function(t){t.destroy()})}:function(){}};function h(){return r.oes_vertex_array_object}function p(){return r.angle_instanced_arrays}function d(){this.id=++l,this.attributes=[];var t=h();this.vao=t?t.createVertexArrayOES():null,c[this.id]=this,this.buffers=[]}return d.prototype.bindAttrs=function(){for(var t=p(),r=this.attributes,n=0;n<r.length;++n){var o=r[n];o.buffer?(e.enableVertexAttribArray(n),e.bindBuffer(Vr,o.buffer.buffer),e.vertexAttribPointer(n,o.size,o.type,o.normalized,o.stride,o.offset),t&&o.divisor&&t.vertexAttribDivisorANGLE(n,o.divisor)):(e.disableVertexAttribArray(n),e.vertexAttrib4f(n,o.x,o.y,o.z,o.w))}for(var i=r.length;i<a;++i)e.disableVertexAttribArray(i)},d.prototype.refresh=function(){var t=h();t&&(t.bindVertexArrayOES(this.vao),this.bindAttrs(),f.currentVAO=this)},d.prototype.destroy=function(){if(this.vao){var t=h();this===f.currentVAO&&(f.currentVAO=null,t.bindVertexArrayOES(null)),t.deleteVertexArrayOES(this.vao),this.vao=null}c[this.id]&&(delete c[this.id],o.vaoCount-=1)},f}(o,p,b,h,w),x=function(e,r,n,o){var i={},a=0,s={uint8:Ct,uint16:At};function u(t){this.id=a++,i[this.id]=this,this.buffer=t,this.primType=Pt,this.vertCount=0,this.type=0}r.oes_element_index_uint&&(s.uint32=jt),u.prototype.bind=function(){this.buffer.bind()};var l=[];function c(o,i,a,s,u,l,c){var f;if(o.buffer.bind(),i){var h=c;c||t(i)&&(!at(i)||t(i.data))||(h=r.oes_element_index_uint?jt:At),n._initBuffer(o.buffer,i,a,h,3)}else e.bufferData(It,l,a),o.buffer.dtype=f||Ct,o.buffer.usage=a,o.buffer.dimension=3,o.buffer.byteLength=l;if(f=c,!c){switch(o.buffer.dtype){case Ct:case kt:f=Ct;break;case At:case Tt:f=At;break;case jt:case Mt:f=jt;break;default:N.raise("unsupported type for element array")}o.buffer.dtype=f}o.type=f,N(f!==jt||!!r.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");var p=u;p<0&&(p=o.buffer.byteLength,f===At?p>>=1:f===jt&&(p>>=2)),o.vertCount=p;var d=s;if(s<0){d=Pt;var y=o.buffer.dimension;1===y&&(d=Et),2===y&&(d=Ot),3===y&&(d=Pt)}o.primType=d}function f(t){o.elementsCount--,N(null!==t.buffer,"must not double destroy elements"),delete i[t.id],t.buffer.destroy(),t.buffer=null}return{create:function(e,r){var i=n.create(null,It,!0),a=new u(i._buffer);function l(e){if(e)if("number"==typeof e)i(e),a.primType=Pt,a.vertCount=0|e,a.type=Ct;else{var r=null,n=Lt,o=-1,u=-1,f=0,h=0;Array.isArray(e)||t(e)||at(e)?r=e:(N.type(e,"object","invalid arguments for elements"),"data"in e&&(r=e.data,N(Array.isArray(r)||t(r)||at(r),"invalid data for element buffer")),"usage"in e&&(N.parameter(e.usage,ht,"invalid element buffer usage"),n=ht[e.usage]),"primitive"in e&&(N.parameter(e.primitive,_t,"invalid element buffer primitive"),o=_t[e.primitive]),"count"in e&&(N("number"==typeof e.count&&e.count>=0,"invalid vertex count for elements"),u=0|e.count),"type"in e&&(N.parameter(e.type,s,"invalid buffer type"),h=s[e.type]),"length"in e?f=0|e.length:(f=u,h===At||h===Tt?f*=2:h!==jt&&h!==Mt||(f*=4))),c(a,r,n,o,u,f,h)}else i(),a.primType=Pt,a.vertCount=0,a.type=Ct;return l}return o.elementsCount++,l(e),l._reglType="elements",l._elements=a,l.subdata=function(t,e){return i.subdata(t,e),l},l.destroy=function(){f(a)},l},createStream:function(t){var e=l.pop();return e||(e=new u(n.create(null,It,!0,!1)._buffer)),c(e,t,Nt,-1,-1,0,0),e},destroyStream:function(t){l.push(t)},getElements:function(t){return"function"==typeof t&&t._elements instanceof u?t._elements:null},clear:function(){st(i).forEach(f)}}}(o,p,w,h),_=Jr(o,f,h,n),E=mr(o,p,b,function(){k.procs.poll()},m,h,n),O=_r(o,p,b,h,n),P=function(t,r,n,o,i,s){var u={cur:null,next:null,dirty:!1,setFBO:null},l=["rgba"],c=["rgba4","rgb565","rgb5 a1"];r.ext_srgb&&c.push("srgba"),r.ext_color_buffer_half_float&&c.push("rgba16f","rgb16f"),r.webgl_color_buffer_float&&c.push("rgba32f");var f=["uint8"];function h(t,e,r){this.target=t,this.texture=e,this.renderbuffer=r;var n=0,o=0;e?(n=e.width,o=e.height):r&&(n=r.width,o=r.height),this.width=n,this.height=o}function p(t){t&&(t.texture&&t.texture._texture.decRef(),t.renderbuffer&&t.renderbuffer._renderbuffer.decRef())}function d(t,e,r){if(t)if(t.texture){var n=t.texture._texture,o=Math.max(1,n.width),i=Math.max(1,n.height);N(o===e&&i===r,"inconsistent width/height for supplied texture"),n.refCount+=1}else{var a=t.renderbuffer._renderbuffer;N(a.width===e&&a.height===r,"inconsistent width/height for renderbuffer"),a.refCount+=1}}function y(e,r){r&&(r.texture?t.framebufferTexture2D(Er,e,r.target,r.texture._texture.texture,0):t.framebufferRenderbuffer(Er,e,Or,r.renderbuffer._renderbuffer.renderbuffer))}function v(t){var e=Pr,r=null,n=null,o=t;"object"===a(t)&&(o=t.data,"target"in t&&(e=0|t.target)),N.type(o,"function","invalid attachment data");var i=o._reglType;return"texture2d"===i?(r=o,N(e===Pr)):"textureCube"===i?(r=o,N(e>=kr&&e<kr+6,"invalid cube map target")):"renderbuffer"===i?(n=o,e=Or):N.raise("invalid regl object for attachment"),new h(e,r,n)}function g(t,e,r,n,a){if(r){var s=o.create2D({width:t,height:e,format:n,type:a});return s._texture.refCount=0,new h(Pr,s,null)}var u=i.create({width:t,height:e,format:n});return u._renderbuffer.refCount=0,new h(Or,null,u)}function m(t){return t&&(t.texture||t.renderbuffer)}function b(t,e,r){t&&(t.texture?t.texture.resize(e,r):t.renderbuffer&&t.renderbuffer.resize(e,r),t.width=e,t.height=r)}r.oes_texture_half_float&&f.push("half float","float16"),r.oes_texture_float&&f.push("float","float32");var w=0,S={};function x(){this.id=w++,S[this.id]=this,this.framebuffer=t.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function _(t){t.colorAttachments.forEach(p),p(t.depthAttachment),p(t.stencilAttachment),p(t.depthStencilAttachment)}function E(e){var r=e.framebuffer;N(r,"must not double destroy framebuffer"),t.deleteFramebuffer(r),e.framebuffer=null,s.framebufferCount--,delete S[e.id]}function O(e){var r;t.bindFramebuffer(Er,e.framebuffer);var o=e.colorAttachments;for(r=0;r<o.length;++r)y(Cr+r,o[r]);for(r=o.length;r<n.maxColorAttachments;++r)t.framebufferTexture2D(Er,Cr+r,Pr,null,0);t.framebufferTexture2D(Er,Mr,Pr,null,0),t.framebufferTexture2D(Er,Tr,Pr,null,0),t.framebufferTexture2D(Er,Ar,Pr,null,0),y(Tr,e.depthAttachment),y(Ar,e.stencilAttachment),y(Mr,e.depthStencilAttachment);var i=t.checkFramebufferStatus(Er);t.isContextLost()||i===jr||N.raise("framebuffer configuration not supported, status = "+Ur[i]),t.bindFramebuffer(Er,u.next?u.next.framebuffer:null),u.cur=u.next,t.getError()}function P(t,o){var i=new x;function a(t,e){var o;N(u.next!==i,"can not update framebuffer which is currently in use");var s=0,h=0,p=!0,y=!0,b=null,w=!0,S="rgba",x="uint8",E=1,P=null,k=null,C=null,T=!1;if("number"==typeof t)s=0|t,h=0|e||s;else if(t){N.type(t,"object","invalid arguments for framebuffer");var A=t;if("shape"in A){var M=A.shape;N(Array.isArray(M)&&M.length>=2,"invalid shape for framebuffer"),s=M[0],h=M[1]}else"radius"in A&&(s=h=A.radius),"width"in A&&(s=A.width),"height"in A&&(h=A.height);("color"in A||"colors"in A)&&(b=A.color||A.colors,Array.isArray(b)&&N(1===b.length||r.webgl_draw_buffers,"multiple render targets not supported")),b||("colorCount"in A&&(E=0|A.colorCount,N(E>0,"invalid color buffer count")),"colorTexture"in A&&(w=!!A.colorTexture,S="rgba4"),"colorType"in A&&(x=A.colorType,w?(N(r.oes_texture_float||!("float"===x||"float32"===x),"you must enable OES_texture_float in order to use floating point framebuffer objects"),N(r.oes_texture_half_float||!("half float"===x||"float16"===x),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects")):"half float"===x||"float16"===x?(N(r.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),S="rgba16f"):"float"!==x&&"float32"!==x||(N(r.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),S="rgba32f"),N.oneOf(x,f,"invalid color type")),"colorFormat"in A&&(S=A.colorFormat,l.indexOf(S)>=0?w=!0:c.indexOf(S)>=0?w=!1:w?N.oneOf(A.colorFormat,l,"invalid color format for texture"):N.oneOf(A.colorFormat,c,"invalid color format for renderbuffer"))),("depthTexture"in A||"depthStencilTexture"in A)&&(T=!(!A.depthTexture&&!A.depthStencilTexture),N(!T||r.webgl_depth_texture,"webgl_depth_texture extension not supported")),"depth"in A&&("boolean"==typeof A.depth?p=A.depth:(P=A.depth,y=!1)),"stencil"in A&&("boolean"==typeof A.stencil?y=A.stencil:(k=A.stencil,p=!1)),"depthStencil"in A&&("boolean"==typeof A.depthStencil?p=y=A.depthStencil:(C=A.depthStencil,p=!1,y=!1))}else s=h=1;var j=null,I=null,L=null,R=null;if(Array.isArray(b))j=b.map(v);else if(b)j=[v(b)];else for(j=new Array(E),o=0;o<E;++o)j[o]=g(s,h,w,S,x);N(r.webgl_draw_buffers||j.length<=1,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers."),N(j.length<=n.maxColorAttachments,"too many color attachments, not supported"),s=s||j[0].width,h=h||j[0].height,P?I=v(P):p&&!y&&(I=g(s,h,T,"depth","uint32")),k?L=v(k):y&&!p&&(L=g(s,h,!1,"stencil","uint8")),C?R=v(C):!P&&!k&&y&&p&&(R=g(s,h,T,"depth stencil","depth stencil")),N(!!P+!!k+!!C<=1,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");var D=null;for(o=0;o<j.length;++o)if(d(j[o],s,h),N(!j[o]||j[o].texture&&Nr.indexOf(j[o].texture._texture.format)>=0||j[o].renderbuffer&&Gr.indexOf(j[o].renderbuffer._renderbuffer.format)>=0,"framebuffer color attachment "+o+" is invalid"),j[o]&&j[o].texture){var B=Lr[j[o].texture._texture.format]*Rr[j[o].texture._texture.type];null===D?D=B:N(D===B,"all color attachments much have the same number of bits per pixel.")}return d(I,s,h),N(!I||I.texture&&I.texture._texture.format===Ir||I.renderbuffer&&I.renderbuffer._renderbuffer.format===Dr,"invalid depth attachment for framebuffer object"),d(L,s,h),N(!L||L.renderbuffer&&L.renderbuffer._renderbuffer.format===Br,"invalid stencil attachment for framebuffer object"),d(R,s,h),N(!R||R.texture&&R.texture._texture.format===Fr||R.renderbuffer&&R.renderbuffer._renderbuffer.format===Fr,"invalid depth-stencil attachment for framebuffer object"),_(i),i.width=s,i.height=h,i.colorAttachments=j,i.depthAttachment=I,i.stencilAttachment=L,i.depthStencilAttachment=R,a.color=j.map(m),a.depth=m(I),a.stencil=m(L),a.depthStencil=m(R),a.width=i.width,a.height=i.height,O(i),a}return s.framebufferCount++,a(t,o),e(a,{resize:function(t,e){N(u.next!==i,"can not resize a framebuffer which is currently in use");var r=Math.max(0|t,1),n=Math.max(0|e||r,1);if(r===i.width&&n===i.height)return a;for(var o=i.colorAttachments,s=0;s<o.length;++s)b(o[s],r,n);return b(i.depthAttachment,r,n),b(i.stencilAttachment,r,n),b(i.depthStencilAttachment,r,n),i.width=a.width=r,i.height=a.height=n,O(i),a},_reglType:"framebuffer",_framebuffer:i,destroy:function(){E(i),_(i)},use:function(t){u.setFBO({framebuffer:a},t)}})}return e(u,{getFramebuffer:function(t){if("function"==typeof t&&"framebuffer"===t._reglType){var e=t._framebuffer;if(e instanceof x)return e}return null},create:P,createCube:function(t){var i=Array(6);function a(t){var n;N(i.indexOf(u.next)<0,"can not update framebuffer which is currently in use");var s,c={color:null},h=0,p=null,d="rgba",y="uint8",v=1;if("number"==typeof t)h=0|t;else if(t){N.type(t,"object","invalid arguments for framebuffer");var g=t;if("shape"in g){var m=g.shape;N(Array.isArray(m)&&m.length>=2,"invalid shape for framebuffer"),N(m[0]===m[1],"cube framebuffer must be square"),h=m[0]}else"radius"in g&&(h=0|g.radius),"width"in g?(h=0|g.width,"height"in g&&N(g.height===h,"must be square")):"height"in g&&(h=0|g.height);("color"in g||"colors"in g)&&(p=g.color||g.colors,Array.isArray(p)&&N(1===p.length||r.webgl_draw_buffers,"multiple render targets not supported")),p||("colorCount"in g&&(v=0|g.colorCount,N(v>0,"invalid color buffer count")),"colorType"in g&&(N.oneOf(g.colorType,f,"invalid color type"),y=g.colorType),"colorFormat"in g&&(d=g.colorFormat,N.oneOf(g.colorFormat,l,"invalid color format for texture"))),"depth"in g&&(c.depth=g.depth),"stencil"in g&&(c.stencil=g.stencil),"depthStencil"in g&&(c.depthStencil=g.depthStencil)}else h=1;if(p)if(Array.isArray(p))for(s=[],n=0;n<p.length;++n)s[n]=p[n];else s=[p];else{s=Array(v);var b={radius:h,format:d,type:y};for(n=0;n<v;++n)s[n]=o.createCube(b)}for(c.color=Array(s.length),n=0;n<s.length;++n){var w=s[n];N("function"==typeof w&&"textureCube"===w._reglType,"invalid cube map"),h=h||w.width,N(w.width===h&&w.height===h,"invalid cube map shape"),c.color[n]={target:kr,data:s[n]}}for(n=0;n<6;++n){for(var S=0;S<s.length;++S)c.color[S].target=kr+n;n>0&&(c.depth=i[0].depth,c.stencil=i[0].stencil,c.depthStencil=i[0].depthStencil),i[n]?i[n](c):i[n]=P(c)}return e(a,{width:h,height:h,color:s})}return a(t),e(a,{faces:i,resize:function(t){var e,r=0|t;if(N(r>0&&r<=n.maxCubeMapSize,"invalid radius for cube fbo"),r===a.width)return a;var o=a.color;for(e=0;e<o.length;++e)o[e].resize(r);for(e=0;e<6;++e)i[e].resize(r);return a.width=a.height=r,a},_reglType:"framebufferCube",destroy:function(){i.forEach(function(t){t.destroy()})}})},clear:function(){st(S).forEach(E)},restore:function(){u.cur=null,u.next=null,u.dirty=!0,st(S).forEach(function(e){e.framebuffer=t.createFramebuffer(),O(e)})}})}(o,p,b,E,O,h),k=ci(o,f,p,b,w,x,0,P,{},S,_,{elements:null,primitive:4,count:-1,offset:0,instances:-1},m,d,n),C=tn(o,P,k.procs.poll,m,i,p,b),T=k.next,A=o.canvas,M=[],j=[],I=[],L=[n.onDestroy],R=null;function D(){if(0===M.length)return d&&d.update(),void(R=null);R=V.next(D),Q();for(var t=M.length-1;t>=0;--t){var e=M[t];e&&e(m,null,0)}o.flush(),d&&d.update()}function B(){!R&&M.length>0&&(R=V.next(D))}function F(){R&&(V.cancel(D),R=null)}function G(t){t.preventDefault(),s=!0,F(),j.forEach(function(t){t()})}function U(t){o.getError(),s=!1,u.restore(),_.restore(),w.restore(),E.restore(),O.restore(),P.restore(),S.restore(),d&&d.restore(),k.procs.refresh(),B(),I.forEach(function(t){t()})}function W(t){function r(t,e){var r={},n={};return Object.keys(t).forEach(function(o){var i=t[o];if(z.isDynamic(i))n[o]=z.unbox(i,o);else{if(e&&Array.isArray(i))for(var a=0;a<i.length;++a)if(z.isDynamic(i[a]))return void(n[o]=z.unbox(i,o));r[o]=i}}),{dynamic:n,static:r}}N(!!t,"invalid args to regl({...})"),N.type(t,"object","invalid args to regl({...})");var n=r(t.context||{},!0),o=r(t.uniforms||{},!0),i=r(t.attributes||{},!1),a=r(function(t){var r=e({},t);function n(t){if(t in r){var e=r[t];delete r[t],Object.keys(e).forEach(function(n){r[t+"."+n]=e[n]})}}return delete r.uniforms,delete r.attributes,delete r.context,delete r.vao,"stencil"in r&&r.stencil.op&&(r.stencil.opBack=r.stencil.opFront=r.stencil.op,delete r.stencil.op),n("blend"),n("depth"),n("cull"),n("stencil"),n("polygonOffset"),n("scissor"),n("sample"),"vao"in t&&(r.vao=t.vao),r}(t),!1),u={gpuTime:0,cpuTime:0,count:0},l=k.compile(a,i,o,n,u),c=l.draw,f=l.batch,h=l.scope,p=[];return e(function(t,e){var r;if(s&&N.raise("context lost"),"function"==typeof t)return h.call(this,null,t,0);if("function"==typeof e)if("number"==typeof t)for(r=0;r<t;++r)h.call(this,null,e,r);else{if(!Array.isArray(t))return h.call(this,t,e,0);for(r=0;r<t.length;++r)h.call(this,t[r],e,r)}else if("number"==typeof t){if(t>0)return f.call(this,function(t){for(;p.length<t;)p.push(null);return p}(0|t),0|t)}else{if(!Array.isArray(t))return c.call(this,t);if(t.length)return f.call(this,t,t.length)}},{stats:u,destroy:function(){l.destroy()}})}A&&(A.addEventListener(bi,G,!1),A.addEventListener(wi,U,!1));var q=P.setFBO=W({framebuffer:z.define.call(null,Si,"framebuffer")});function X(t,e){var r=0;k.procs.poll();var n=e.color;n&&(o.clearColor(+n[0]||0,+n[1]||0,+n[2]||0,+n[3]||0),r|=yi),"depth"in e&&(o.clearDepth(+e.depth),r|=vi),"stencil"in e&&(o.clearStencil(0|e.stencil),r|=gi),N(!!r,"called regl.clear with no buffer specified"),o.clear(r)}function J(t){return N.type(t,"function","regl.frame() callback must be a function"),M.push(t),B(),{cancel:function(){var e=Ei(M,t);N(e>=0,"cannot cancel a frame twice"),M[e]=function t(){var e=Ei(M,t);M[e]=M[M.length-1],M.length-=1,M.length<=0&&F()}}}}function K(){var t=T.viewport,e=T.scissor_box;t[0]=t[1]=e[0]=e[1]=0,m.viewportWidth=m.framebufferWidth=m.drawingBufferWidth=t[2]=e[2]=o.drawingBufferWidth,m.viewportHeight=m.framebufferHeight=m.drawingBufferHeight=t[3]=e[3]=o.drawingBufferHeight}function Q(){m.tick+=1,m.time=$(),K(),k.procs.poll()}function Z(){E.refresh(),K(),k.procs.refresh(),d&&d.update()}function $(){return(H()-y)/1e3}Z();var tt=e(W,{clear:function(t){if(N("object"===a(t)&&t,"regl.clear() takes an object as input"),"framebuffer"in t)if(t.framebuffer&&"framebufferCube"===t.framebuffer_reglType)for(var r=0;r<6;++r)q(e({framebuffer:t.framebuffer.faces[r]},t),X);else q(t,X);else X(0,t)},prop:z.define.bind(null,Si),context:z.define.bind(null,xi),this:z.define.bind(null,_i),draw:W({}),buffer:function(t){return w.create(t,mi,!1,!1)},elements:function(t){return x.create(t,!1)},texture:E.create2D,cube:E.createCube,renderbuffer:O.create,framebuffer:P.create,framebufferCube:P.createCube,vao:S.createVAO,attributes:i,frame:J,on:function(t,e){var r;switch(N.type(e,"function","listener callback must be a function"),t){case"frame":return J(e);case"lost":r=j;break;case"restore":r=I;break;case"destroy":r=L;break;default:N.raise("invalid event, must be one of frame,lost,restore,destroy")}return r.push(e),{cancel:function(){for(var t=0;t<r.length;++t)if(r[t]===e)return r[t]=r[r.length-1],void r.pop()}}},limits:b,hasExtension:function(t){return b.extensions.indexOf(t.toLowerCase())>=0},read:C,destroy:function(){M.length=0,F(),A&&(A.removeEventListener(bi,G),A.removeEventListener(wi,U)),_.clear(),P.clear(),O.clear(),E.clear(),x.clear(),w.clear(),S.clear(),d&&d.clear(),L.forEach(function(t){t()})},_gl:o,_refresh:Z,poll:function(){Q(),d&&d.update()},now:$,stats:h});return n.onDone(null,tt),tt}},"object"===a(e)?t.exports=i():void 0===(o="function"==typeof(n=i)?n.call(e,r,e,t):n)||(t.exports=o)},344:function(t,e,r){"use strict";var n=r(6730),o=Array.prototype.concat,i=Array.prototype.slice,a=t.exports=function(t){for(var e=[],r=0,a=t.length;r<a;r++){var s=t[r];n(s)?e=o.call(e,i.call(s)):e.push(s)}return e};a.wrap=function(t){return function(){return t(a(arguments))}}},8795:function(t){var e=/^[-+]?0x[a-fA-F0-9]+$/,r=/^([\-\+])?(0*)(\.[0-9]+([eE]\-?[0-9]+)?|[0-9]+(\.[0-9]+([eE]\-?[0-9]+)?)?)$/;!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt),!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);var n={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};t.exports=function(t){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(o=Object.assign({},n,o),!t||"string"!=typeof t)return t;var i=t.trim();if(void 0!==o.skipLike&&o.skipLike.test(i))return t;if(o.hex&&e.test(i))return Number.parseInt(i,16);var a=r.exec(i);if(a){var s=a[1],u=a[2],l=function(t){return t&&-1!==t.indexOf(".")?("."===(t=t.replace(/0+$/,""))?t="0":"."===t[0]?t="0"+t:"."===t[t.length-1]&&(t=t.substr(0,t.length-1)),t):t}(a[3]),c=a[4]||a[6];if(!o.leadingZeros&&u.length>0&&s&&"."!==i[2])return t;if(!o.leadingZeros&&u.length>0&&!s&&"."!==i[1])return t;var f=Number(i),h=""+f;return-1!==h.search(/[eE]/)?o.eNotation?f:t:c?o.eNotation?f:t:-1!==i.indexOf(".")?"0"===h&&""===l?f:h===l?f:s&&h==="-"+l?f:t:u?l===h?f:s+l===h?f:t:i===h?f:i===s+h?f:t}return t}},12:function(t,e,r){var n,o;function i(t){"@babel/helpers - typeof";return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}t=r.nmd(t),function(a,s){"use strict";"object"===i(t)&&t.exports?t.exports=s():void 0===(o="function"==typeof(n=s)?n.call(e,r,e,t):n)||(t.exports=o)}(0,function(t){"use strict";var e=t&&t.IPv6;return{best:function(t){var e,r,n=t.toLowerCase().split(":"),o=n.length,i=8;for(""===n[0]&&""===n[1]&&""===n[2]?(n.shift(),n.shift()):""===n[0]&&""===n[1]?n.shift():""===n[o-1]&&""===n[o-2]&&n.pop(),-1!==n[(o=n.length)-1].indexOf(".")&&(i=7),e=0;e<o&&""!==n[e];e++);if(e<i)for(n.splice(e,1,"0000");n.length<i;)n.splice(e,0,"0000");for(var a=0;a<i;a++){r=n[a].split("");for(var s=0;s<3&&"0"===r[0]&&r.length>1;s++)r.splice(0,1);n[a]=r.join("")}var u=-1,l=0,c=0,f=-1,h=!1;for(a=0;a<i;a++)h?"0"===n[a]?c+=1:(h=!1,c>l&&(u=f,l=c)):"0"===n[a]&&(h=!0,f=a,c=1);c>l&&(u=f,l=c),l>1&&n.splice(u,l,""),o=n.length;var p="";for(""===n[0]&&(p=":"),a=0;a<o&&(p+=n[a],a!==o-1);a++)p+=":";return""===n[o-1]&&(p+=":"),p},noConflict:function(){return t.IPv6===this&&(t.IPv6=e),this}}})},5199:function(t,e,r){var n,o;function i(t){"@babel/helpers - typeof";return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}t=r.nmd(t),function(a,s){"use strict";"object"===i(t)&&t.exports?t.exports=s():void 0===(o="function"==typeof(n=s)?n.call(e,r,e,t):n)||(t.exports=o)}(0,function(t){"use strict";var e=t&&t.SecondLevelDomains,r={list:{ac:" com gov mil net org ",ae:" ac co gov mil name net org pro sch ",af:" com edu gov net org ",al:" com edu gov mil net org ",ao:" co ed gv it og pb ",ar:" com edu gob gov int mil net org tur ",at:" ac co gv or ",au:" asn com csiro edu gov id net org ",ba:" co com edu gov mil net org rs unbi unmo unsa untz unze ",bb:" biz co com edu gov info net org store tv ",bh:" biz cc com edu gov info net org ",bn:" com edu gov net org ",bo:" com edu gob gov int mil net org tv ",br:" adm adv agr am arq art ato b bio blog bmd cim cng cnt com coop ecn edu eng esp etc eti far flog fm fnd fot fst g12 ggf gov imb ind inf jor jus lel mat med mil mus net nom not ntr odo org ppg pro psc psi qsl rec slg srv tmp trd tur tv vet vlog wiki zlg ",bs:" com edu gov net org ",bz:" du et om ov rg ",ca:" ab bc mb nb nf nl ns nt nu on pe qc sk yk ",ck:" biz co edu gen gov info net org ",cn:" ac ah bj com cq edu fj gd gov gs gx gz ha hb he hi hl hn jl js jx ln mil net nm nx org qh sc sd sh sn sx tj tw xj xz yn zj ",co:" com edu gov mil net nom org ",cr:" ac c co ed fi go or sa ",cy:" ac biz com ekloges gov ltd name net org parliament press pro tm ",do:" art com edu gob gov mil net org sld web ",dz:" art asso com edu gov net org pol ",ec:" com edu fin gov info med mil net org pro ",eg:" com edu eun gov mil name net org sci ",er:" com edu gov ind mil net org rochest w ",es:" com edu gob nom org ",et:" biz com edu gov info name net org ",fj:" ac biz com info mil name net org pro ",fk:" ac co gov net nom org ",fr:" asso com f gouv nom prd presse tm ",gg:" co net org ",gh:" com edu gov mil org ",gn:" ac com gov net org ",gr:" com edu gov mil net org ",gt:" com edu gob ind mil net org ",gu:" com edu gov net org ",hk:" com edu gov idv net org ",hu:" 2000 agrar bolt casino city co erotica erotika film forum games hotel info ingatlan jogasz konyvelo lakas media news org priv reklam sex shop sport suli szex tm tozsde utazas video ",id:" ac co go mil net or sch web ",il:" ac co gov idf k12 muni net org ",in:" ac co edu ernet firm gen gov i ind mil net nic org res ",iq:" com edu gov i mil net org ",ir:" ac co dnssec gov i id net org sch ",it:" edu gov ",je:" co net org ",jo:" com edu gov mil name net org sch ",jp:" ac ad co ed go gr lg ne or ",ke:" ac co go info me mobi ne or sc ",kh:" com edu gov mil net org per ",ki:" biz com de edu gov info mob net org tel ",km:" asso com coop edu gouv k medecin mil nom notaires pharmaciens presse tm veterinaire ",kn:" edu gov net org ",kr:" ac busan chungbuk chungnam co daegu daejeon es gangwon go gwangju gyeongbuk gyeonggi gyeongnam hs incheon jeju jeonbuk jeonnam k kg mil ms ne or pe re sc seoul ulsan ",kw:" com edu gov net org ",ky:" com edu gov net org ",kz:" com edu gov mil net org ",lb:" com edu gov net org ",lk:" assn com edu gov grp hotel int ltd net ngo org sch soc web ",lr:" com edu gov net org ",lv:" asn com conf edu gov id mil net org ",ly:" com edu gov id med net org plc sch ",ma:" ac co gov m net org press ",mc:" asso tm ",me:" ac co edu gov its net org priv ",mg:" com edu gov mil nom org prd tm ",mk:" com edu gov inf name net org pro ",ml:" com edu gov net org presse ",mn:" edu gov org ",mo:" com edu gov net org ",mt:" com edu gov net org ",mv:" aero biz com coop edu gov info int mil museum name net org pro ",mw:" ac co com coop edu gov int museum net org ",mx:" com edu gob net org ",my:" com edu gov mil name net org sch ",nf:" arts com firm info net other per rec store web ",ng:" biz com edu gov mil mobi name net org sch ",ni:" ac co com edu gob mil net nom org ",np:" com edu gov mil net org ",nr:" biz com edu gov info net org ",om:" ac biz co com edu gov med mil museum net org pro sch ",pe:" com edu gob mil net nom org sld ",ph:" com edu gov i mil net ngo org ",pk:" biz com edu fam gob gok gon gop gos gov net org web ",pl:" art bialystok biz com edu gda gdansk gorzow gov info katowice krakow lodz lublin mil net ngo olsztyn org poznan pwr radom slupsk szczecin torun warszawa waw wroc wroclaw zgora ",pr:" ac biz com edu est gov info isla name net org pro prof ",ps:" com edu gov net org plo sec ",pw:" belau co ed go ne or ",ro:" arts com firm info nom nt org rec store tm www ",rs:" ac co edu gov in org ",sb:" com edu gov net org ",sc:" com edu gov net org ",sh:" co com edu gov net nom org ",sl:" com edu gov net org ",st:" co com consulado edu embaixada gov mil net org principe saotome store ",sv:" com edu gob org red ",sz:" ac co org ",tr:" av bbs bel biz com dr edu gen gov info k12 name net org pol tel tsk tv web ",tt:" aero biz cat co com coop edu gov info int jobs mil mobi museum name net org pro tel travel ",tw:" club com ebiz edu game gov idv mil net org ",mu:" ac co com gov net or org ",mz:" ac co edu gov org ",na:" co com ",nz:" ac co cri geek gen govt health iwi maori mil net org parliament school ",pa:" abo ac com edu gob ing med net nom org sld ",pt:" com edu gov int net nome org publ ",py:" com edu gov mil net org ",qa:" com edu gov mil net org ",re:" asso com nom ",ru:" ac adygeya altai amur arkhangelsk astrakhan bashkiria belgorod bir bryansk buryatia cbg chel chelyabinsk chita chukotka chuvashia com dagestan e-burg edu gov grozny int irkutsk ivanovo izhevsk jar joshkar-ola kalmykia kaluga kamchatka karelia kazan kchr kemerovo khabarovsk khakassia khv kirov koenig komi kostroma kranoyarsk kuban kurgan kursk lipetsk magadan mari mari-el marine mil mordovia mosreg msk murmansk nalchik net nnov nov novosibirsk nsk omsk orenburg org oryol penza perm pp pskov ptz rnd ryazan sakhalin samara saratov simbirsk smolensk spb stavropol stv surgut tambov tatarstan tom tomsk tsaritsyn tsk tula tuva tver tyumen udm udmurtia ulan-ude vladikavkaz vladimir vladivostok volgograd vologda voronezh vrn vyatka yakutia yamal yekaterinburg yuzhno-sakhalinsk ",rw:" ac co com edu gouv gov int mil net ",sa:" com edu gov med net org pub sch ",sd:" com edu gov info med net org tv ",se:" a ac b bd c d e f g h i k l m n o org p parti pp press r s t tm u w x y z ",sg:" com edu gov idn net org per ",sn:" art com edu gouv org perso univ ",sy:" com edu gov mil net news org ",th:" ac co go in mi net or ",tj:" ac biz co com edu go gov info int mil name net nic org test web ",tn:" agrinet com defense edunet ens fin gov ind info intl mincom nat net org perso rnrt rns rnu tourism ",tz:" ac co go ne or ",ua:" biz cherkassy chernigov chernovtsy ck cn co com crimea cv dn dnepropetrovsk donetsk dp edu gov if in ivano-frankivsk kh kharkov kherson khmelnitskiy kiev kirovograd km kr ks kv lg lugansk lutsk lviv me mk net nikolaev od odessa org pl poltava pp rovno rv sebastopol sumy te ternopil uzhgorod vinnica vn zaporizhzhe zhitomir zp zt ",ug:" ac co go ne or org sc ",uk:" ac bl british-library co cym gov govt icnet jet lea ltd me mil mod national-library-scotland nel net nhs nic nls org orgn parliament plc police sch scot soc ",us:" dni fed isa kids nsn ",uy:" com edu gub mil net org ",ve:" co com edu gob info mil net org web ",vi:" co com k12 net org ",vn:" ac biz com edu gov health info int name net org pro ",ye:" co com gov ltd me net org plc ",yu:" ac co edu gov org ",za:" ac agric alt bourse city co cybernet db edu gov grondar iaccess imt inca landesign law mil net ngo nis nom olivetti org pix school tm web ",zm:" ac co com edu gov net org sch ",com:"ar br cn de eu gb gr hu jpn kr no qc ru sa se uk us uy za ",net:"gb jp se uk ",org:"ae",de:"com "},has:function(t){var e=t.lastIndexOf(".");if(e<=0||e>=t.length-1)return!1;var n=t.lastIndexOf(".",e-1);if(n<=0||n>=e-1)return!1;var o=r.list[t.slice(e+1)];return!!o&&o.indexOf(" "+t.slice(n+1,e)+" ")>=0},is:function(t){var e=t.lastIndexOf(".");if(e<=0||e>=t.length-1)return!1;if(t.lastIndexOf(".",e-1)>=0)return!1;var n=r.list[t.slice(e+1)];return!!n&&n.indexOf(" "+t.slice(0,e)+" ")>=0},get:function(t){var e=t.lastIndexOf(".");if(e<=0||e>=t.length-1)return null;var n=t.lastIndexOf(".",e-1);if(n<=0||n>=e-1)return null;var o=r.list[t.slice(e+1)];return o?o.indexOf(" "+t.slice(n+1,e)+" ")<0?null:t.slice(n+1):null},noConflict:function(){return t.SecondLevelDomains===this&&(t.SecondLevelDomains=e),this}};return r})},9545:function(t,e,r){var n,o,i;function a(t){"@babel/helpers - typeof";return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}t=r.nmd(t),function(s,u){"use strict";"object"===a(t)&&t.exports?t.exports=u(r(9167),r(12),r(5199)):(o=[r(9167),r(12),r(5199)],void 0===(i="function"==typeof(n=u)?n.apply(e,o):n)||(t.exports=i))}(0,function(t,e,r,n){"use strict";var o=n&&n.URI;function i(t,e){var r=arguments.length>=1,n=arguments.length>=2;if(!(this instanceof i))return r?n?new i(t,e):new i(t):new i;if(void 0===t){if(r)throw new TypeError("undefined is not a valid argument for URI");t="undefined"!=typeof location?location.href+"":""}if(null===t&&r)throw new TypeError("null is not a valid argument for URI");return this.href(t),void 0!==e?this.absoluteTo(e):this}i.version="1.19.11";var s=i.prototype,u=Object.prototype.hasOwnProperty;function l(t){return t.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}function c(t){return void 0===t?"Undefined":String(Object.prototype.toString.call(t)).slice(8,-1)}function f(t){return"Array"===c(t)}function h(t,e){var r,n,o={};if("RegExp"===c(e))o=null;else if(f(e))for(r=0,n=e.length;r<n;r++)o[e[r]]=!0;else o[e]=!0;for(r=0,n=t.length;r<n;r++){(o&&void 0!==o[t[r]]||!o&&e.test(t[r]))&&(t.splice(r,1),n--,r--)}return t}function p(t,e){var r,n;if(f(e)){for(r=0,n=e.length;r<n;r++)if(!p(t,e[r]))return!1;return!0}var o=c(e);for(r=0,n=t.length;r<n;r++)if("RegExp"===o){if("string"==typeof t[r]&&t[r].match(e))return!0}else if(t[r]===e)return!0;return!1}function d(t,e){if(!f(t)||!f(e))return!1;if(t.length!==e.length)return!1;t.sort(),e.sort();for(var r=0,n=t.length;r<n;r++)if(t[r]!==e[r])return!1;return!0}function y(t){return t.replace(/^\/+|\/+$/g,"")}function v(t){return escape(t)}function g(t){return encodeURIComponent(t).replace(/[!'()*]/g,v).replace(/\*/g,"%2A")}i._parts=function(){return{protocol:null,username:null,password:null,hostname:null,urn:null,port:null,path:null,query:null,fragment:null,preventInvalidHostname:i.preventInvalidHostname,duplicateQueryParameters:i.duplicateQueryParameters,escapeQuerySpace:i.escapeQuerySpace}},i.preventInvalidHostname=!1,i.duplicateQueryParameters=!1,i.escapeQuerySpace=!0,i.protocol_expression=/^[a-z][a-z0-9.+-]*$/i,i.idn_expression=/[^a-z0-9\._-]/i,i.punycode_expression=/(xn--)/i,i.ip4_expression=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,i.ip6_expression=/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/,i.find_uri_expression=/\b((?:[a-z][\w-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?Â«Â»ââââ]))/gi,i.findUri={start:/\b(?:([a-z][a-z0-9.+-]*:\/\/)|www\.)/gi,end:/[\s\r\n]|$/,trim:/[`!()\[\]{};:'".,<>?Â«Â»âââââ]+$/,parens:/(\([^\)]*\)|\[[^\]]*\]|\{[^}]*\}|<[^>]*>)/g},i.leading_whitespace_expression=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,i.ascii_tab_whitespace=/[\u0009\u000A\u000D]+/g,i.defaultPorts={http:"80",https:"443",ftp:"21",gopher:"70",ws:"80",wss:"443"},i.hostProtocols=["http","https"],i.invalid_hostname_characters=/[^a-zA-Z0-9\.\-:_]/,i.domAttributes={a:"href",blockquote:"cite",link:"href",base:"href",script:"src",form:"action",img:"src",area:"href",iframe:"src",embed:"src",source:"src",track:"src",input:"src",audio:"src",video:"src"},i.getDomAttribute=function(t){if(t&&t.nodeName){var e=t.nodeName.toLowerCase();if("input"!==e||"image"===t.type)return i.domAttributes[e]}},i.encode=g,i.decode=decodeURIComponent,i.iso8859=function(){i.encode=escape,i.decode=unescape},i.unicode=function(){i.encode=g,i.decode=decodeURIComponent},i.characters={pathname:{encode:{expression:/%(24|26|2B|2C|3B|3D|3A|40)/gi,map:{"%24":"$","%26":"&","%2B":"+","%2C":",","%3B":";","%3D":"=","%3A":":","%40":"@"}},decode:{expression:/[\/\?#]/g,map:{"/":"%2F","?":"%3F","#":"%23"}}},reserved:{encode:{expression:/%(21|23|24|26|27|28|29|2A|2B|2C|2F|3A|3B|3D|3F|40|5B|5D)/gi,map:{"%3A":":","%2F":"/","%3F":"?","%23":"#","%5B":"[","%5D":"]","%40":"@","%21":"!","%24":"$","%26":"&","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"="}}},urnpath:{encode:{expression:/%(21|24|27|28|29|2A|2B|2C|3B|3D|40)/gi,map:{"%21":"!","%24":"$","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"=","%40":"@"}},decode:{expression:/[\/\?#:]/g,map:{"/":"%2F","?":"%3F","#":"%23",":":"%3A"}}}},i.encodeQuery=function(t,e){var r=i.encode(t+"");return void 0===e&&(e=i.escapeQuerySpace),e?r.replace(/%20/g,"+"):r},i.decodeQuery=function(t,e){t+="",void 0===e&&(e=i.escapeQuerySpace);try{return i.decode(e?t.replace(/\+/g,"%20"):t)}catch(e){return t}};var m,b={encode:"encode",decode:"decode"},w=function(t,e){return function(r){try{return i[e](r+"").replace(i.characters[t][e].expression,function(r){return i.characters[t][e].map[r]})}catch(t){return r}}};for(m in b)i[m+"PathSegment"]=w("pathname",b[m]),i[m+"UrnPathSegment"]=w("urnpath",b[m]);var S=function(t,e,r){return function(n){var o;o=r?function(t){return i[e](i[r](t))}:i[e];for(var a=(n+"").split(t),s=0,u=a.length;s<u;s++)a[s]=o(a[s]);return a.join(t)}};function x(t){return function(e,r){return void 0===e?this._parts[t]||"":(this._parts[t]=e||null,this.build(!r),this)}}function _(t,e){return function(r,n){return void 0===r?this._parts[t]||"":(null!==r&&(r+="").charAt(0)===e&&(r=r.substring(1)),this._parts[t]=r,this.build(!n),this)}}i.decodePath=S("/","decodePathSegment"),i.decodeUrnPath=S(":","decodeUrnPathSegment"),i.recodePath=S("/","encodePathSegment","decode"),i.recodeUrnPath=S(":","encodeUrnPathSegment","decode"),i.encodeReserved=w("reserved","encode"),i.parse=function(t,e){var r;return e||(e={preventInvalidHostname:i.preventInvalidHostname}),(r=(t=(t=t.replace(i.leading_whitespace_expression,"")).replace(i.ascii_tab_whitespace,"")).indexOf("#"))>-1&&(e.fragment=t.substring(r+1)||null,t=t.substring(0,r)),(r=t.indexOf("?"))>-1&&(e.query=t.substring(r+1)||null,t=t.substring(0,r)),"//"===(t=(t=t.replace(/^(https?|ftp|wss?)?:+[/\\]*/i,"$1://")).replace(/^[/\\]{2,}/i,"//")).substring(0,2)?(e.protocol=null,t=t.substring(2),t=i.parseAuthority(t,e)):(r=t.indexOf(":"))>-1&&(e.protocol=t.substring(0,r)||null,e.protocol&&!e.protocol.match(i.protocol_expression)?e.protocol=void 0:"//"===t.substring(r+1,r+3).replace(/\\/g,"/")?(t=t.substring(r+3),t=i.parseAuthority(t,e)):(t=t.substring(r+1),e.urn=!0)),e.path=t,e},i.parseHost=function(t,e){t||(t="");var r,n,o=(t=t.replace(/\\/g,"/")).indexOf("/");if(-1===o&&(o=t.length),"["===t.charAt(0))r=t.indexOf("]"),e.hostname=t.substring(1,r)||null,e.port=t.substring(r+2,o)||null,"/"===e.port&&(e.port=null);else{var a=t.indexOf(":"),s=t.indexOf("/"),u=t.indexOf(":",a+1);-1!==u&&(-1===s||u<s)?(e.hostname=t.substring(0,o)||null,e.port=null):(n=t.substring(0,o).split(":"),e.hostname=n[0]||null,e.port=n[1]||null)}return e.hostname&&"/"!==t.substring(o).charAt(0)&&(o++,t="/"+t),e.preventInvalidHostname&&i.ensureValidHostname(e.hostname,e.protocol),e.port&&i.ensureValidPort(e.port),t.substring(o)||"/"},i.parseAuthority=function(t,e){return t=i.parseUserinfo(t,e),i.parseHost(t,e)},i.parseUserinfo=function(t,e){var r=t;-1!==t.indexOf("\\")&&(t=t.replace(/\\/g,"/"));var n,o=t.indexOf("/"),a=t.lastIndexOf("@",o>-1?o:t.length-1);return a>-1&&(-1===o||a<o)?(n=t.substring(0,a).split(":"),e.username=n[0]?i.decode(n[0]):null,n.shift(),e.password=n[0]?i.decode(n.join(":")):null,t=r.substring(a+1)):(e.username=null,e.password=null),t},i.parseQuery=function(t,e){if(!t)return{};if(!(t=t.replace(/&+/g,"&").replace(/^\?*&*|&+$/g,"")))return{};for(var r,n,o,a={},s=t.split("&"),l=s.length,c=0;c<l;c++)r=s[c].split("="),n=i.decodeQuery(r.shift(),e),o=r.length?i.decodeQuery(r.join("="),e):null,"__proto__"!==n&&(u.call(a,n)?("string"!=typeof a[n]&&null!==a[n]||(a[n]=[a[n]]),a[n].push(o)):a[n]=o);return a},i.build=function(t){var e="",r=!1;return t.protocol&&(e+=t.protocol+":"),t.urn||!e&&!t.hostname||(e+="//",r=!0),e+=i.buildAuthority(t)||"","string"==typeof t.path&&("/"!==t.path.charAt(0)&&r&&(e+="/"),e+=t.path),"string"==typeof t.query&&t.query&&(e+="?"+t.query),"string"==typeof t.fragment&&t.fragment&&(e+="#"+t.fragment),e},i.buildHost=function(t){var e="";return t.hostname?(i.ip6_expression.test(t.hostname)?e+="["+t.hostname+"]":e+=t.hostname,t.port&&(e+=":"+t.port),e):""},i.buildAuthority=function(t){return i.buildUserinfo(t)+i.buildHost(t)},i.buildUserinfo=function(t){var e="";return t.username&&(e+=i.encode(t.username)),t.password&&(e+=":"+i.encode(t.password)),e&&(e+="@"),e},i.buildQuery=function(t,e,r){var n,o,a,s,l="";for(o in t)if("__proto__"!==o&&u.call(t,o))if(f(t[o]))for(n={},a=0,s=t[o].length;a<s;a++)void 0!==t[o][a]&&void 0===n[t[o][a]+""]&&(l+="&"+i.buildQueryParameter(o,t[o][a],r),!0!==e&&(n[t[o][a]+""]=!0));else void 0!==t[o]&&(l+="&"+i.buildQueryParameter(o,t[o],r));return l.substring(1)},i.buildQueryParameter=function(t,e,r){return i.encodeQuery(t,r)+(null!==e?"="+i.encodeQuery(e,r):"")},i.addQuery=function(t,e,r){if("object"===a(e))for(var n in e)u.call(e,n)&&i.addQuery(t,n,e[n]);else{if("string"!=typeof e)throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");if(void 0===t[e])return void(t[e]=r);"string"==typeof t[e]&&(t[e]=[t[e]]),f(r)||(r=[r]),t[e]=(t[e]||[]).concat(r)}},i.setQuery=function(t,e,r){if("object"===a(e))for(var n in e)u.call(e,n)&&i.setQuery(t,n,e[n]);else{if("string"!=typeof e)throw new TypeError("URI.setQuery() accepts an object, string as the name parameter");t[e]=void 0===r?null:r}},i.removeQuery=function(t,e,r){var n,o,s;if(f(e))for(n=0,o=e.length;n<o;n++)t[e[n]]=void 0;else if("RegExp"===c(e))for(s in t)e.test(s)&&(t[s]=void 0);else if("object"===a(e))for(s in e)u.call(e,s)&&i.removeQuery(t,s,e[s]);else{if("string"!=typeof e)throw new TypeError("URI.removeQuery() accepts an object, string, RegExp as the first parameter");void 0!==r?"RegExp"===c(r)?!f(t[e])&&r.test(t[e])?t[e]=void 0:t[e]=h(t[e],r):t[e]!==String(r)||f(r)&&1!==r.length?f(t[e])&&(t[e]=h(t[e],r)):t[e]=void 0:t[e]=void 0}},i.hasQuery=function(t,e,r,n){switch(c(e)){case"String":break;case"RegExp":for(var o in t)if(u.call(t,o)&&e.test(o)&&(void 0===r||i.hasQuery(t,o,r)))return!0;return!1;case"Object":for(var a in e)if(u.call(e,a)&&!i.hasQuery(t,a,e[a]))return!1;return!0;default:throw new TypeError("URI.hasQuery() accepts a string, regular expression or object as the name parameter")}switch(c(r)){case"Undefined":return e in t;case"Boolean":return r===Boolean(f(t[e])?t[e].length:t[e]);case"Function":return!!r(t[e],e,t);case"Array":return!!f(t[e])&&(n?p:d)(t[e],r);case"RegExp":return f(t[e])?!!n&&p(t[e],r):Boolean(t[e]&&t[e].match(r));case"Number":r=String(r);case"String":return f(t[e])?!!n&&p(t[e],r):t[e]===r;default:throw new TypeError("URI.hasQuery() accepts undefined, boolean, string, number, RegExp, Function as the value parameter")}},i.joinPaths=function(){for(var t=[],e=[],r=0,n=0;n<arguments.length;n++){var o=new i(arguments[n]);t.push(o);for(var a=o.segment(),s=0;s<a.length;s++)"string"==typeof a[s]&&e.push(a[s]),a[s]&&r++}if(!e.length||!r)return new i("");var u=new i("").segment(e);return""!==t[0].path()&&"/"!==t[0].path().slice(0,1)||u.path("/"+u.path()),u.normalize()},i.commonPath=function(t,e){var r,n=Math.min(t.length,e.length);for(r=0;r<n;r++)if(t.charAt(r)!==e.charAt(r)){r--;break}return r<1?t.charAt(0)===e.charAt(0)&&"/"===t.charAt(0)?"/":"":("/"===t.charAt(r)&&"/"===e.charAt(r)||(r=t.substring(0,r).lastIndexOf("/")),t.substring(0,r+1))},i.withinString=function(t,e,r){r||(r={});var n=r.start||i.findUri.start,o=r.end||i.findUri.end,a=r.trim||i.findUri.trim,s=r.parens||i.findUri.parens,u=/[a-z0-9-]=["']?$/i;for(n.lastIndex=0;;){var l=n.exec(t);if(!l)break;var c=l.index;if(r.ignoreHtml){var f=t.slice(Math.max(c-3,0),c);if(f&&u.test(f))continue}for(var h=c+t.slice(c).search(o),p=t.slice(c,h),d=-1;;){var y=s.exec(p);if(!y)break;var v=y.index+y[0].length;d=Math.max(d,v)}if(!((p=d>-1?p.slice(0,d)+p.slice(d).replace(a,""):p.replace(a,"")).length<=l[0].length||r.ignore&&r.ignore.test(p))){var g=e(p,c,h=c+p.length,t);void 0!==g?(g=String(g),t=t.slice(0,c)+g+t.slice(h),n.lastIndex=c+g.length):n.lastIndex=h}}return n.lastIndex=0,t},i.ensureValidHostname=function(e,r){var n=!!e,o=!1;if(!!r&&(o=p(i.hostProtocols,r)),o&&!n)throw new TypeError("Hostname cannot be empty, if protocol is "+r);if(e&&e.match(i.invalid_hostname_characters)){if(!t)throw new TypeError('Hostname "'+e+'" contains characters other than [A-Z0-9.-:_] and Punycode.js is not available');if(t.toASCII(e).match(i.invalid_hostname_characters))throw new TypeError('Hostname "'+e+'" contains characters other than [A-Z0-9.-:_]')}},i.ensureValidPort=function(t){if(t){var e=Number(t);if(!(/^[0-9]+$/.test(e)&&e>0&&e<65536))throw new TypeError('Port "'+t+'" is not a valid port')}},i.noConflict=function(t){if(t){var e={URI:this.noConflict()};return n.URITemplate&&"function"==typeof n.URITemplate.noConflict&&(e.URITemplate=n.URITemplate.noConflict()),n.IPv6&&"function"==typeof n.IPv6.noConflict&&(e.IPv6=n.IPv6.noConflict()),n.SecondLevelDomains&&"function"==typeof n.SecondLevelDomains.noConflict&&(e.SecondLevelDomains=n.SecondLevelDomains.noConflict()),e}return n.URI===this&&(n.URI=o),this},s.build=function(t){return!0===t?this._deferred_build=!0:(void 0===t||this._deferred_build)&&(this._string=i.build(this._parts),this._deferred_build=!1),this},s.clone=function(){return new i(this)},s.valueOf=s.toString=function(){return this.build(!1)._string},s.protocol=x("protocol"),s.username=x("username"),s.password=x("password"),s.hostname=x("hostname"),s.port=x("port"),s.query=_("query","?"),s.fragment=_("fragment","#"),s.search=function(t,e){var r=this.query(t,e);return"string"==typeof r&&r.length?"?"+r:r},s.hash=function(t,e){var r=this.fragment(t,e);return"string"==typeof r&&r.length?"#"+r:r},s.pathname=function(t,e){if(void 0===t||!0===t){var r=this._parts.path||(this._parts.hostname?"/":"");return t?(this._parts.urn?i.decodeUrnPath:i.decodePath)(r):r}return this._parts.urn?this._parts.path=t?i.recodeUrnPath(t):"":this._parts.path=t?i.recodePath(t):"/",this.build(!e),this},s.path=s.pathname,s.href=function(t,e){var r;if(void 0===t)return this.toString();this._string="",this._parts=i._parts();var n=t instanceof i,o="object"===a(t)&&(t.hostname||t.path||t.pathname);t.nodeName&&(t=t[i.getDomAttribute(t)]||"",o=!1);if(!n&&o&&void 0!==t.pathname&&(t=t.toString()),"string"==typeof t||t instanceof String)this._parts=i.parse(String(t),this._parts);else{if(!n&&!o)throw new TypeError("invalid input");var s=n?t._parts:t;for(r in s)"query"!==r&&u.call(this._parts,r)&&(this._parts[r]=s[r]);s.query&&this.query(s.query,!1)}return this.build(!e),this},s.is=function(t){var e=!1,n=!1,o=!1,a=!1,s=!1,u=!1,l=!1,c=!this._parts.urn;switch(this._parts.hostname&&(c=!1,n=i.ip4_expression.test(this._parts.hostname),o=i.ip6_expression.test(this._parts.hostname),s=(a=!(e=n||o))&&r&&r.has(this._parts.hostname),u=a&&i.idn_expression.test(this._parts.hostname),l=a&&i.punycode_expression.test(this._parts.hostname)),t.toLowerCase()){case"relative":return c;case"absolute":return!c;case"domain":case"name":return a;case"sld":return s;case"ip":return e;case"ip4":case"ipv4":case"inet4":return n;case"ip6":case"ipv6":case"inet6":return o;case"idn":return u;case"url":return!this._parts.urn;case"urn":return!!this._parts.urn;case"punycode":return l}return null};var E=s.protocol,O=s.port,P=s.hostname;s.protocol=function(t,e){if(t&&!(t=t.replace(/:(\/\/)?$/,"")).match(i.protocol_expression))throw new TypeError('Protocol "'+t+"\" contains characters other than [A-Z0-9.+-] or doesn't start with [A-Z]");return E.call(this,t,e)},s.scheme=s.protocol,s.port=function(t,e){return this._parts.urn?void 0===t?"":this:(void 0!==t&&(0===t&&(t=null),t&&(":"===(t+="").charAt(0)&&(t=t.substring(1)),i.ensureValidPort(t))),O.call(this,t,e))},s.hostname=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0!==t){var r={preventInvalidHostname:this._parts.preventInvalidHostname};if("/"!==i.parseHost(t,r))throw new TypeError('Hostname "'+t+'" contains characters other than [A-Z0-9.-]');t=r.hostname,this._parts.preventInvalidHostname&&i.ensureValidHostname(t,this._parts.protocol)}return P.call(this,t,e)},s.origin=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0===t){var r=this.protocol();return this.authority()?(r?r+"://":"")+this.authority():""}var n=i(t);return this.protocol(n.protocol()).authority(n.authority()).build(!e),this},s.host=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0===t)return this._parts.hostname?i.buildHost(this._parts):"";if("/"!==i.parseHost(t,this._parts))throw new TypeError('Hostname "'+t+'" contains characters other than [A-Z0-9.-]');return this.build(!e),this},s.authority=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0===t)return this._parts.hostname?i.buildAuthority(this._parts):"";if("/"!==i.parseAuthority(t,this._parts))throw new TypeError('Hostname "'+t+'" contains characters other than [A-Z0-9.-]');return this.build(!e),this},s.userinfo=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0===t){var r=i.buildUserinfo(this._parts);return r?r.substring(0,r.length-1):r}return"@"!==t[t.length-1]&&(t+="@"),i.parseUserinfo(t,this._parts),this.build(!e),this},s.resource=function(t,e){var r;return void 0===t?this.path()+this.search()+this.hash():(r=i.parse(t),this._parts.path=r.path,this._parts.query=r.query,this._parts.fragment=r.fragment,this.build(!e),this)},s.subdomain=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0===t){if(!this._parts.hostname||this.is("IP"))return"";var r=this._parts.hostname.length-this.domain().length-1;return this._parts.hostname.substring(0,r)||""}var n=this._parts.hostname.length-this.domain().length,o=this._parts.hostname.substring(0,n),a=new RegExp("^"+l(o));if(t&&"."!==t.charAt(t.length-1)&&(t+="."),-1!==t.indexOf(":"))throw new TypeError("Domains cannot contain colons");return t&&i.ensureValidHostname(t,this._parts.protocol),this._parts.hostname=this._parts.hostname.replace(a,t),this.build(!e),this},s.domain=function(t,e){if(this._parts.urn)return void 0===t?"":this;if("boolean"==typeof t&&(e=t,t=void 0),void 0===t){if(!this._parts.hostname||this.is("IP"))return"";var r=this._parts.hostname.match(/\./g);if(r&&r.length<2)return this._parts.hostname;var n=this._parts.hostname.length-this.tld(e).length-1;return n=this._parts.hostname.lastIndexOf(".",n-1)+1,this._parts.hostname.substring(n)||""}if(!t)throw new TypeError("cannot set domain empty");if(-1!==t.indexOf(":"))throw new TypeError("Domains cannot contain colons");if(i.ensureValidHostname(t,this._parts.protocol),!this._parts.hostname||this.is("IP"))this._parts.hostname=t;else{var o=new RegExp(l(this.domain())+"$");this._parts.hostname=this._parts.hostname.replace(o,t)}return this.build(!e),this},s.tld=function(t,e){if(this._parts.urn)return void 0===t?"":this;if("boolean"==typeof t&&(e=t,t=void 0),void 0===t){if(!this._parts.hostname||this.is("IP"))return"";var n=this._parts.hostname.lastIndexOf("."),o=this._parts.hostname.substring(n+1);return!0!==e&&r&&r.list[o.toLowerCase()]&&r.get(this._parts.hostname)||o}var i;if(!t)throw new TypeError("cannot set TLD empty");if(t.match(/[^a-zA-Z0-9-]/)){if(!r||!r.is(t))throw new TypeError('TLD "'+t+'" contains characters other than [A-Z0-9]');i=new RegExp(l(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(i,t)}else{if(!this._parts.hostname||this.is("IP"))throw new ReferenceError("cannot set TLD on non-domain host");i=new RegExp(l(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(i,t)}return this.build(!e),this},s.directory=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0===t||!0===t){if(!this._parts.path&&!this._parts.hostname)return"";if("/"===this._parts.path)return"/";var r=this._parts.path.length-this.filename().length-1,n=this._parts.path.substring(0,r)||(this._parts.hostname?"/":"");return t?i.decodePath(n):n}var o=this._parts.path.length-this.filename().length,a=this._parts.path.substring(0,o),s=new RegExp("^"+l(a));return this.is("relative")||(t||(t="/"),"/"!==t.charAt(0)&&(t="/"+t)),t&&"/"!==t.charAt(t.length-1)&&(t+="/"),t=i.recodePath(t),this._parts.path=this._parts.path.replace(s,t),this.build(!e),this},s.filename=function(t,e){if(this._parts.urn)return void 0===t?"":this;if("string"!=typeof t){if(!this._parts.path||"/"===this._parts.path)return"";var r=this._parts.path.lastIndexOf("/"),n=this._parts.path.substring(r+1);return t?i.decodePathSegment(n):n}var o=!1;"/"===t.charAt(0)&&(t=t.substring(1)),t.match(/\.?\//)&&(o=!0);var a=new RegExp(l(this.filename())+"$");return t=i.recodePath(t),this._parts.path=this._parts.path.replace(a,t),o?this.normalizePath(e):this.build(!e),this},s.suffix=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0===t||!0===t){if(!this._parts.path||"/"===this._parts.path)return"";var r,n,o=this.filename(),a=o.lastIndexOf(".");return-1===a?"":(r=o.substring(a+1),n=/^[a-z0-9%]+$/i.test(r)?r:"",t?i.decodePathSegment(n):n)}"."===t.charAt(0)&&(t=t.substring(1));var s,u=this.suffix();if(u)s=t?new RegExp(l(u)+"$"):new RegExp(l("."+u)+"$");else{if(!t)return this;this._parts.path+="."+i.recodePath(t)}return s&&(t=i.recodePath(t),this._parts.path=this._parts.path.replace(s,t)),this.build(!e),this},s.segment=function(t,e,r){var n=this._parts.urn?":":"/",o=this.path(),i="/"===o.substring(0,1),a=o.split(n);if(void 0!==t&&"number"!=typeof t&&(r=e,e=t,t=void 0),void 0!==t&&"number"!=typeof t)throw new Error('Bad segment "'+t+'", must be 0-based integer');if(i&&a.shift(),t<0&&(t=Math.max(a.length+t,0)),void 0===e)return void 0===t?a:a[t];if(null===t||void 0===a[t])if(f(e)){a=[];for(var s=0,u=e.length;s<u;s++)(e[s].length||a.length&&a[a.length-1].length)&&(a.length&&!a[a.length-1].length&&a.pop(),a.push(y(e[s])))}else(e||"string"==typeof e)&&(e=y(e),""===a[a.length-1]?a[a.length-1]=e:a.push(e));else e?a[t]=y(e):a.splice(t,1);return i&&a.unshift(""),this.path(a.join(n),r)},s.segmentCoded=function(t,e,r){var n,o,a;if("number"!=typeof t&&(r=e,e=t,t=void 0),void 0===e){if(f(n=this.segment(t,e,r)))for(o=0,a=n.length;o<a;o++)n[o]=i.decode(n[o]);else n=void 0!==n?i.decode(n):void 0;return n}if(f(e))for(o=0,a=e.length;o<a;o++)e[o]=i.encode(e[o]);else e="string"==typeof e||e instanceof String?i.encode(e):e;return this.segment(t,e,r)};var k=s.query;return s.query=function(t,e){if(!0===t)return i.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if("function"==typeof t){var r=i.parseQuery(this._parts.query,this._parts.escapeQuerySpace),n=t.call(this,r);return this._parts.query=i.buildQuery(n||r,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!e),this}return void 0!==t&&"string"!=typeof t?(this._parts.query=i.buildQuery(t,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!e),this):k.call(this,t,e)},s.setQuery=function(t,e,r){var n=i.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if("string"==typeof t||t instanceof String)n[t]=void 0!==e?e:null;else{if("object"!==a(t))throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");for(var o in t)u.call(t,o)&&(n[o]=t[o])}return this._parts.query=i.buildQuery(n,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof t&&(r=e),this.build(!r),this},s.addQuery=function(t,e,r){var n=i.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return i.addQuery(n,t,void 0===e?null:e),this._parts.query=i.buildQuery(n,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof t&&(r=e),this.build(!r),this},s.removeQuery=function(t,e,r){var n=i.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return i.removeQuery(n,t,e),this._parts.query=i.buildQuery(n,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof t&&(r=e),this.build(!r),this},s.hasQuery=function(t,e,r){var n=i.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return i.hasQuery(n,t,e,r)},s.setSearch=s.setQuery,s.addSearch=s.addQuery,s.removeSearch=s.removeQuery,s.hasSearch=s.hasQuery,s.normalize=function(){return this._parts.urn?this.normalizeProtocol(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build():this.normalizeProtocol(!1).normalizeHostname(!1).normalizePort(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build()},s.normalizeProtocol=function(t){return"string"==typeof this._parts.protocol&&(this._parts.protocol=this._parts.protocol.toLowerCase(),this.build(!t)),this},s.normalizeHostname=function(r){return this._parts.hostname&&(this.is("IDN")&&t?this._parts.hostname=t.toASCII(this._parts.hostname):this.is("IPv6")&&e&&(this._parts.hostname=e.best(this._parts.hostname)),this._parts.hostname=this._parts.hostname.toLowerCase(),this.build(!r)),this},s.normalizePort=function(t){return"string"==typeof this._parts.protocol&&this._parts.port===i.defaultPorts[this._parts.protocol]&&(this._parts.port=null,this.build(!t)),this},s.normalizePath=function(t){var e,r=this._parts.path;if(!r)return this;if(this._parts.urn)return this._parts.path=i.recodeUrnPath(this._parts.path),this.build(!t),this;if("/"===this._parts.path)return this;var n,o,a="";for("/"!==(r=i.recodePath(r)).charAt(0)&&(e=!0,r="/"+r),"/.."!==r.slice(-3)&&"/."!==r.slice(-2)||(r+="/"),r=r.replace(/(\/(\.\/)+)|(\/\.$)/g,"/").replace(/\/{2,}/g,"/"),e&&(a=r.substring(1).match(/^(\.\.\/)+/)||"")&&(a=a[0]);-1!==(n=r.search(/\/\.\.(\/|$)/));)0!==n?(-1===(o=r.substring(0,n).lastIndexOf("/"))&&(o=n),r=r.substring(0,o)+r.substring(n+3)):r=r.substring(3);return e&&this.is("relative")&&(r=a+r.substring(1)),this._parts.path=r,this.build(!t),this},s.normalizePathname=s.normalizePath,s.normalizeQuery=function(t){return"string"==typeof this._parts.query&&(this._parts.query.length?this.query(i.parseQuery(this._parts.query,this._parts.escapeQuerySpace)):this._parts.query=null,this.build(!t)),this},s.normalizeFragment=function(t){return this._parts.fragment||(this._parts.fragment=null,this.build(!t)),this},s.normalizeSearch=s.normalizeQuery,s.normalizeHash=s.normalizeFragment,s.iso8859=function(){var t=i.encode,e=i.decode;i.encode=escape,i.decode=decodeURIComponent;try{this.normalize()}finally{i.encode=t,i.decode=e}return this},s.unicode=function(){var t=i.encode,e=i.decode;i.encode=g,i.decode=unescape;try{this.normalize()}finally{i.encode=t,i.decode=e}return this},s.readable=function(){var e=this.clone();e.username("").password("").normalize();var r="";if(e._parts.protocol&&(r+=e._parts.protocol+"://"),e._parts.hostname&&(e.is("punycode")&&t?(r+=t.toUnicode(e._parts.hostname),e._parts.port&&(r+=":"+e._parts.port)):r+=e.host()),e._parts.hostname&&e._parts.path&&"/"!==e._parts.path.charAt(0)&&(r+="/"),r+=e.path(!0),e._parts.query){for(var n="",o=0,a=e._parts.query.split("&"),s=a.length;o<s;o++){var u=(a[o]||"").split("=");n+="&"+i.decodeQuery(u[0],this._parts.escapeQuerySpace).replace(/&/g,"%26"),void 0!==u[1]&&(n+="="+i.decodeQuery(u[1],this._parts.escapeQuerySpace).replace(/&/g,"%26"))}r+="?"+n.substring(1)}return r+=i.decodeQuery(e.hash(),!0)},s.absoluteTo=function(t){var e,r,n,o=this.clone(),a=["protocol","username","password","hostname","port"];if(this._parts.urn)throw new Error("URNs do not have any generally defined hierarchical components");if(t instanceof i||(t=new i(t)),o._parts.protocol)return o;if(o._parts.protocol=t._parts.protocol,this._parts.hostname)return o;for(r=0;n=a[r];r++)o._parts[n]=t._parts[n];return o._parts.path?(".."===o._parts.path.substring(-2)&&(o._parts.path+="/"),"/"!==o.path().charAt(0)&&(e=(e=t.directory())||(0===t.path().indexOf("/")?"/":""),o._parts.path=(e?e+"/":"")+o._parts.path,o.normalizePath())):(o._parts.path=t._parts.path,o._parts.query||(o._parts.query=t._parts.query)),o.build(),o},s.relativeTo=function(t){var e,r,n,o,a,s=this.clone().normalize();if(s._parts.urn)throw new Error("URNs do not have any generally defined hierarchical components");if(t=new i(t).normalize(),e=s._parts,r=t._parts,o=s.path(),a=t.path(),"/"!==o.charAt(0))throw new Error("URI is already relative");if("/"!==a.charAt(0))throw new Error("Cannot calculate a URI relative to another relative URI");if(e.protocol===r.protocol&&(e.protocol=null),e.username!==r.username||e.password!==r.password)return s.build();if(null!==e.protocol||null!==e.username||null!==e.password)return s.build();if(e.hostname!==r.hostname||e.port!==r.port)return s.build();if(e.hostname=null,e.port=null,o===a)return e.path="",s.build();if(!(n=i.commonPath(o,a)))return s.build();var u=r.path.substring(n.length).replace(/[^\/]*$/,"").replace(/.*?\//g,"../");return e.path=u+e.path.substring(n.length)||"./",s.build()},s.equals=function(t){var e,r,n,o,a,s=this.clone(),l=new i(t),c={};if(s.normalize(),l.normalize(),s.toString()===l.toString())return!0;if(n=s.query(),o=l.query(),s.query(""),l.query(""),s.toString()!==l.toString())return!1;if(n.length!==o.length)return!1;for(a in e=i.parseQuery(n,this._parts.escapeQuerySpace),r=i.parseQuery(o,this._parts.escapeQuerySpace),e)if(u.call(e,a)){if(f(e[a])){if(!d(e[a],r[a]))return!1}else if(e[a]!==r[a])return!1;c[a]=!0}for(a in r)if(u.call(r,a)&&!c[a])return!1;return!0},s.preventInvalidHostname=function(t){return this._parts.preventInvalidHostname=!!t,this},s.duplicateQueryParameters=function(t){return this._parts.duplicateQueryParameters=!!t,this},s.escapeQuerySpace=function(t){return this._parts.escapeQuerySpace=!!t,this},i})},9167:function(t,e,r){var n;function o(t){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}t=r.nmd(t),function(i){var a="object"==o(e)&&e&&!e.nodeType&&e,s="object"==o(t)&&t&&!t.nodeType&&t,u="object"==(void 0===r.g?"undefined":o(r.g))&&r.g;u.global!==u&&u.window!==u&&u.self!==u||(i=u);var l,c,f=2147483647,h=36,p=1,d=26,y=38,v=700,g=72,m=128,b="-",w=/^xn--/,S=/[^\x20-\x7E]/,x=/[\x2E\u3002\uFF0E\uFF61]/g,_={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},E=h-p,O=Math.floor,P=String.fromCharCode;function k(t){throw new RangeError(_[t])}function C(t,e){for(var r=t.length,n=[];r--;)n[r]=e(t[r]);return n}function T(t,e){var r=t.split("@"),n="";return r.length>1&&(n=r[0]+"@",t=r[1]),n+C((t=t.replace(x,".")).split("."),e).join(".")}function A(t){for(var e,r,n=[],o=0,i=t.length;o<i;)(e=t.charCodeAt(o++))>=55296&&e<=56319&&o<i?56320==(64512&(r=t.charCodeAt(o++)))?n.push(((1023&e)<<10)+(1023&r)+65536):(n.push(e),o--):n.push(e);return n}function M(t){return C(t,function(t){var e="";return t>65535&&(e+=P((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+=P(t)}).join("")}function j(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function I(t,e,r){var n=0;for(t=r?O(t/v):t>>1,t+=O(t/e);t>E*d>>1;n+=h)t=O(t/E);return O(n+(E+1)*t/(t+y))}function N(t){var e,r,n,o,i,a,s,u,l,c,y,v=[],w=t.length,S=0,x=m,_=g;for((r=t.lastIndexOf(b))<0&&(r=0),n=0;n<r;++n)t.charCodeAt(n)>=128&&k("not-basic"),v.push(t.charCodeAt(n));for(o=r>0?r+1:0;o<w;){for(i=S,a=1,s=h;o>=w&&k("invalid-input"),((u=(y=t.charCodeAt(o++))-48<10?y-22:y-65<26?y-65:y-97<26?y-97:h)>=h||u>O((f-S)/a))&&k("overflow"),S+=u*a,!(u<(l=s<=_?p:s>=_+d?d:s-_));s+=h)a>O(f/(c=h-l))&&k("overflow"),a*=c;_=I(S-i,e=v.length+1,0==i),O(S/e)>f-x&&k("overflow"),x+=O(S/e),S%=e,v.splice(S++,0,x)}return M(v)}function L(t){var e,r,n,o,i,a,s,u,l,c,y,v,w,S,x,_=[];for(v=(t=A(t)).length,e=m,r=0,i=g,a=0;a<v;++a)(y=t[a])<128&&_.push(P(y));for(n=o=_.length,o&&_.push(b);n<v;){for(s=f,a=0;a<v;++a)(y=t[a])>=e&&y<s&&(s=y);for(s-e>O((f-r)/(w=n+1))&&k("overflow"),r+=(s-e)*w,e=s,a=0;a<v;++a)if((y=t[a])<e&&++r>f&&k("overflow"),y==e){for(u=r,l=h;!(u<(c=l<=i?p:l>=i+d?d:l-i));l+=h)x=u-c,S=h-c,_.push(P(j(c+x%S,0))),u=O(x/S);_.push(P(j(u,0))),i=I(r,w,n==o),r=0,++n}++r,++e}return _.join("")}if(l={version:"1.3.2",ucs2:{decode:A,encode:M},decode:N,encode:L,toASCII:function(t){return T(t,function(t){return S.test(t)?"xn--"+L(t):t})},toUnicode:function(t){return T(t,function(t){return w.test(t)?N(t.slice(4).toLowerCase()):t})}},"object"==o(r.amdO)&&r.amdO)void 0===(n=function(){return l}.call(e,r,e,t))||(t.exports=n);else if(a&&s)if(t.exports==a)s.exports=l;else for(c in l)l.hasOwnProperty(c)&&(a[c]=l[c]);else i.punycode=l}(this)},3679:function(){"use strict"},7271:function(t,e,r){"use strict";var n={};r.r(n),r.d(n,{GADDI:function(){return Tm},Stack:function(){return Am},breadthFirstSearch:function(){return Sg},connectedComponent:function(){return Eg},cosineSimilarity:function(){return $g},default:function(){return jm},depthFirstSearch:function(){return Tg},detectAllCycles:function(){return jg},detectAllDirectedCycle:function(){return Mg},detectAllUndirectedCycle:function(){return Ag},detectCycle:function(){return Ig},detectDirectedCycle:function(){return Mm},dijkstra:function(){return Ng},findAllPath:function(){return Bg},findShortestPath:function(){return Dg},floydWarshall:function(){return Fg},getAdjMatrix:function(){return pg},getDegree:function(){return Pg},getInDegree:function(){return kg},getNeighbors:function(){return mg},getOutDegree:function(){return Cg},iLouvain:function(){return Jg},kCore:function(){return Kg},kMeans:function(){return Zg},labelPropagation:function(){return Gg},louvain:function(){return Xg},minimumSpanningTree:function(){return am},nodesCosineSimilarity:function(){return tm},pageRank:function(){return sm}});var o={};r.r(o),r.d(o,{Line:function(){return ob},applyMatrix:function(){return zm},compare:function(){return Rm},distance:function(){return Wm},floydWarshall:function(){return Ym},fractionToLine:function(){return ub},getAdjMatrix:function(){return Xm},getBBoxBoundLine:function(){return ib},getCircleCenterByPoints:function(){return Hm},getCircleIntersectByPoint:function(){return Gm},getDegree:function(){return $m},getEllipseIntersectByPoint:function(){return Um},getLineIntersect:function(){return Bm},getPointsCenter:function(){return lb},getRectIntersectByPoint:function(){return Fm},intersectBBox:function(){return rb},invertMatrix:function(){return Vm},isPointInPolygon:function(){return eb},isPointsOverlap:function(){return hb},isPolygonsIntersect:function(){return nb},itemIntersectByLine:function(){return sb},lerp:function(){return yb},lerpArray:function(){return vb},move:function(){return Km},pointLineDistance:function(){return db},pointLineSquareDist:function(){return fb},pointRectSquareDist:function(){return pb},rotate:function(){return Zm},scale:function(){return Qm},scaleMatrix:function(){return qm},squareDist:function(){return cb},translate:function(){return Jm}});var i={};r.r(i),r.d(i,{cloneBesidesImg:function(){return Ub},getAnimateCfgWithCallback:function(){return zb},getBBox:function(){return Tb},getComboBBox:function(){return Fb},getLabelPosition:function(){return Mb},getLetterWidth:function(){return Nb},getLoopCfgs:function(){return Ab},getTextSize:function(){return Lb},plainCombosToTrees:function(){return Db},reconstructTree:function(){return Bb},shouldRefreshEdge:function(){return Gb},traverseTree:function(){return jb},traverseTreeUp:function(){return Ib},truncateLabelByLength:function(){return Rb}});var a={};r.r(a),r.d(a,{catmullRomToBezier:function(){return Jb},fillPath:function(){return yw},fillPathByDiff:function(){return mw},formatPath:function(){return Sw},intersection:function(){return hw},parsePathArray:function(){return rw},parsePathString:function(){return Xb},pathToAbsolute:function(){return Qb},pathToCurve:function(){return tw},rectPath:function(){return sw}});var s={};r.r(s),r.d(s,{easeBack:function(){return Tx},easeBackIn:function(){return kx},easeBackInOut:function(){return Tx},easeBackOut:function(){return Cx},easeBounce:function(){return Ox},easeBounceIn:function(){return Ex},easeBounceInOut:function(){return Px},easeBounceOut:function(){return Ox},easeCircle:function(){return px},easeCircleIn:function(){return fx},easeCircleInOut:function(){return px},easeCircleOut:function(){return hx},easeCubic:function(){return ZS},easeCubicIn:function(){return KS},easeCubicInOut:function(){return ZS},easeCubicOut:function(){return QS},easeElastic:function(){return jx},easeElasticIn:function(){return Mx},easeElasticInOut:function(){return Ix},easeElasticOut:function(){return jx},easeExp:function(){return cx},easeExpIn:function(){return ux},easeExpInOut:function(){return cx},easeExpOut:function(){return lx},easeLinear:function(){return qS},easePoly:function(){return ex},easePolyIn:function(){return $S},easePolyInOut:function(){return ex},easePolyOut:function(){return tx},easeQuad:function(){return JS},easeQuadIn:function(){return YS},easeQuadInOut:function(){return JS},easeQuadOut:function(){return XS},easeSin:function(){return ax},easeSinIn:function(){return ox},easeSinInOut:function(){return ax},easeSinOut:function(){return ix}});var u={};r.r(u),r.d(u,{calculationItemsBBox:function(){return oE},cloneEvent:function(){return eE},formatPadding:function(){return tE},isNaN:function(){return nE},isViewportChanged:function(){return rE},processParallelEdges:function(){return iE},uniqueId:function(){return $_}});var l={};r.r(l),r.d(l,{getClosedSpline:function(){return jE},getControlPoint:function(){return TE},getSpline:function(){return CE},getStarPath:function(){return BE},paddedHull:function(){return DE},pathToPoints:function(){return ME},pointsToPolygon:function(){return AE},roundedHull:function(){return RE}});var c={};r.r(c),r.d(c,{defaultSubjectColors:function(){return pO}});var f={};r.r(f),r.d(f,{isForce:function(){return dO}});var h={};r.r(h),r.d(h,{Base:function(){return iP},Circle:function(){return aP},Ellipse:function(){return uP},Image:function(){return cP},Line:function(){return hP},Marker:function(){return dP},Path:function(){return EP},Polygon:function(){return PP},Polyline:function(){return kP},Rect:function(){return CP},Text:function(){return TP}});var p={};r.r(p),r.d(p,{Base:function(){return VP},Circle:function(){return HP},Dom:function(){return WP},Ellipse:function(){return qP},Image:function(){return YP},Line:function(){return XP},Marker:function(){return QP},Path:function(){return ZP},Polygon:function(){return $P},Polyline:function(){return tk},Rect:function(){return ek},Text:function(){return ik}});var d={};r.r(d),r.d(d,{getColorSetsBySubjectColors:function(){return OC},getColorsWithSubjectColor:function(){return EC},mixColor:function(){return _C}});var y={};r.r(y),r.d(y,{arrayToTextureData:function(){return zC},attributesToTextureData:function(){return UC},buildTextureData:function(){return BC},buildTextureDataWithOneEdgeAttr:function(){return FC},buildTextureDataWithTwoEdgeAttr:function(){return GC},proccessToFunc:function(){return DC},radialLayout:function(){return VC}});var v={};r.r(v),r.d(v,{gpuDetector:function(){return HC}});var g={};r.r(g),r.d(g,{getBrowserName:function(){return WC}});var m={};r.r(m),r.d(m,{assign:function(){return wA},default:function(){return GA},defaultI18n:function(){return EA},format:function(){return BA},parse:function(){return FA},setGlobalDateI18n:function(){return PA},setGlobalDateMasks:function(){return DA}});var b=mapboxgl,w=r.n(b),S={values:[],set:function(t){return this.values=t,this.values},add:function(t){return this.values.push(t),this.values}},x=(r(9957),r(5937),r(4238)),_=r.n(x);function E(t){"@babel/helpers - typeof";return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function O(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,P(n.key),n)}}function P(t){var e=function(t,e){if("object"!=E(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=E(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==E(e)?e:e+""}var k=function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];for(var n=function(t,e,r){return e&&O(t.prototype,e),r&&O(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=0;n<e.length;n++)a(this,new e[n](r))}),o=0;o<e.length;o++){var i=e[o];a(n,i),a(n.prototype,i.prototype),a(n.prototype,new i)}return n;function a(t,e){var r=Object.getOwnPropertyNames(e);Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(e)));for(var n=0;n<r.length;n++){var o=r[n];if("constructor"!==o&&"prototype"!==o&&"name"!==o&&"length"!==o){var i=Object.getOwnPropertyDescriptor(e,o);window.ActiveXObject?Object.defineProperty(t,o,i||{}):Object.defineProperty(t,o,i)}}}},C={startsWith:function(t,e){return 0==t.indexOf(e)},contains:function(t,e){return-1!=t.indexOf(e)},trim:function(t){return t.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},camelize:function(t){for(var e=t.split("-"),r=e[0],n=1,o=e.length;n<o;n++){var i=e[n];r+=i.charAt(0).toUpperCase()+i.substring(1)}return r},format:function(t,e,r){e||(e=window);return t.replace(C.tokenRegEx,function(t,n){for(var o,i=n.split(/\.+/),a=0;a<i.length;a++)0==a&&(o=e),o=o[i[a]];return"function"==typeof o&&(o=r?o.apply(null,r):o()),void 0===o?"undefined":o})},tokenRegEx:/\$\{([\w.]+?)\}/g,numberRegEx:/^([+-]?)(?=\d|\.\d)\d*(\.\d*)?([Ee]([+-]?\d+))?$/,isNumeric:function(t){return C.numberRegEx.test(t)},numericIf:function(t){return C.isNumeric(t)?parseFloat(t):t}},T={decimalSeparator:".",thousandsSeparator:",",limitSigDigs:function(t,e){var r=0;return e>0&&(r=parseFloat(t.toPrecision(e))),r},format:function(t,e,r,n){e=void 0!==e?e:0,r=void 0!==r?r:T.thousandsSeparator,n=void 0!==n?n:T.decimalSeparator,null!=e&&(t=parseFloat(t.toFixed(e)));var o=t.toString().split(".");1===o.length&&null==e&&(e=0);var i,a=o[0];if(r)for(var s=/(-?[0-9]+)([0-9]{3})/;s.test(a);)a=a.replace(s,"$1"+r+"$2");if(0==e)i=a;else{var u=o.length>1?o[1]:"0";null!=e&&(u+=new Array(e-u.length+1).join("0")),i=a+n+u}return i}};Number.prototype.limitSigDigs||(Number.prototype.limitSigDigs=function(t){return T.limitSigDigs(this,t)});var A={bind:function(t,e){var r=Array.prototype.slice.apply(arguments,[2]);return function(){var n=r.concat(Array.prototype.slice.apply(arguments,[0]));return t.apply(e,n)}},bindAsEventListener:function(t,e){return function(r){return t.call(e,r||window.event)}},False:function(){return!1},True:function(){return!0},Void:function(){}},M={filter:function(t,e,r){var n=[];if(Array.prototype.filter)n=t.filter(e,r);else{var o=t.length;if("function"!=typeof e)throw new TypeError;for(var i=0;i<o;i++)if(i in t){var a=t[i];e.call(r,a,i,t)&&n.push(a)}}return n}};function j(t){"@babel/helpers - typeof";return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function I(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,N(n.key),n)}}function N(t){var e=function(t,e){if("object"!=j(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=j(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==j(e)?e:e+""}var L=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.CLASS_NAME="SuperMap.Geometry",this.id=W.createUniqueID(this.CLASS_NAME+"_"),this.parent=null,this.bounds=null,this.SRID=null}return e=t,(r=[{key:"destroy",value:function(){this.id=null,this.bounds=null,this.SRID=null}},{key:"clone",value:function(){return new t}},{key:"setBounds",value:function(t){t&&(this.bounds=t.clone())}},{key:"clearBounds",value:function(){this.bounds=null,this.parent&&this.parent.clearBounds()}},{key:"extendBounds",value:function(t){this.getBounds()?this.bounds.extend(t):this.setBounds(t)}},{key:"getBounds",value:function(){return null==this.bounds&&this.calculateBounds(),this.bounds}},{key:"calculateBounds",value:function(){}},{key:"getVertices",value:function(t){}},{key:"getArea",value:function(){return 0}}])&&I(e.prototype,r),n&&I(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,r,n}(),R=r(9545),D=r.n(R);function B(t){"@babel/helpers - typeof";return(B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var F,G,U,z=function(){var t,e="",r="",n="pc",o=navigator.userAgent.toLowerCase();return o.indexOf("msie")>-1||o.indexOf("trident")>-1&&o.indexOf("rv")>-1?(e="msie",t=o.match(/msie ([\d.]+)/)||o.match(/rv:([\d.]+)/)):o.indexOf("chrome")>-1?(e="chrome",t=o.match(/chrome\/([\d.]+)/)):o.indexOf("firefox")>-1?(e="firefox",t=o.match(/firefox\/([\d.]+)/)):o.indexOf("opera")>-1?(e="opera",t=o.match(/version\/([\d.]+)/)):o.indexOf("safari")>-1&&(e="safari",t=o.match(/version\/([\d.]+)/)),r=t?t[1]:"",o.indexOf("ipad")>-1||o.indexOf("ipod")>-1||o.indexOf("iphone")>-1?n="apple":o.indexOf("android")>-1&&(r=(t=o.match(/version\/([\d.]+)/))?t[1]:"",n="android"),{name:e,version:r,device:n}}(),V=(F=!0,G=z,document.createElement("canvas").getContext?("firefox"===G.name&&parseFloat(G.version)<5&&(F=!1),"safari"===G.name&&parseFloat(G.version)<4&&(F=!1),"opera"===G.name&&parseFloat(G.version)<10&&(F=!1),"msie"===G.name&&parseFloat(G.version)<9&&(F=!1)):F=!1,F),H=-1===(U=navigator.userAgent.toLowerCase()).indexOf("webkit")&&-1!==U.indexOf("gecko"),W={assign:function(t){for(var e=0;e<Object.getOwnPropertyNames(arguments).length;e++){var r=Object.getOwnPropertyNames(arguments)[e];if("caller"!=r&&"callee"!=r&&"length"!=r&&"arguments"!=r){var n=arguments[r];if(n)for(var o=0;o<Object.getOwnPropertyNames(n).length;o++){var i=Object.getOwnPropertyNames(n)[o];"caller"!=r&&"callee"!=r&&"length"!=r&&"arguments"!=r&&(t[i]=n[i])}}}return t},extend:function(t,e){if(t=t||{},e){for(var r in e){var n=e[r];void 0!==n&&(t[r]=n)}!("function"==typeof window.Event&&e instanceof window.Event)&&e.hasOwnProperty&&e.hasOwnProperty("toString")&&(t.toString=e.toString)}return t},copy:function(t,e){var r;if(t=t||{},e)for(var n in t)void 0!==(r=e[n])&&(t[n]=r)},reset:function(t){for(var e in t=t||{})if(t.hasOwnProperty(e)){if("object"===B(t[e])&&t[e]instanceof Array){for(var r in t[e])t[e][r].destroy&&t[e][r].destroy();t[e].length=0}else"object"===B(t[e])&&t[e]instanceof Object&&t[e].destroy&&t[e].destroy();t[e]=null}},getElement:function(){for(var t=[],e=0,r=arguments.length;e<r;e++){var n=arguments[e];if("string"==typeof n&&(n=document.getElementById(n)),1===arguments.length)return n;t.push(n)}return t},isElement:function(t){return!(!t||1!==t.nodeType)},isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},removeItem:function(t,e){for(var r=t.length-1;r>=0;r--)t[r]===e&&t.splice(r,1);return t},indexOf:function(t,e){if(null==t)return-1;if("function"==typeof t.indexOf)return t.indexOf(e);for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1},modifyDOMElement:function(t,e,r,n,o,i,a,s){e&&(t.id=e),r&&(t.style.left=r.x+"px",t.style.top=r.y+"px"),n&&(t.style.width=n.w+"px",t.style.height=n.h+"px"),o&&(t.style.position=o),i&&(t.style.border=i),a&&(t.style.overflow=a),parseFloat(s)>=0&&parseFloat(s)<1?(t.style.filter="alpha(opacity="+100*s+")",t.style.opacity=s):1===parseFloat(s)&&(t.style.filter="",t.style.opacity="")},applyDefaults:function(t,e){t=t||{};var r="function"==typeof window.Event&&e instanceof window.Event;for(var n in e)(void 0===t[n]||!r&&e.hasOwnProperty&&e.hasOwnProperty(n)&&!t.hasOwnProperty(n))&&(t[n]=e[n]);return!r&&e&&e.hasOwnProperty&&e.hasOwnProperty("toString")&&!t.hasOwnProperty("toString")&&(t.toString=e.toString),t},getParameterString:function(t){var e=[];for(var r in t){var n,o=t[r];if(null!=o&&"function"!=typeof o)n=Array.isArray(o)||"[object Object]"===o.toString()?encodeURIComponent(JSON.stringify(o)):encodeURIComponent(o),e.push(encodeURIComponent(r)+"="+n)}return e.join("&")},urlAppend:function(t,e){var r=t;if(e){0===e.indexOf("?")&&(e=e.substring(1));var n=(t+" ").split(/[?&]/);r+=" "===n.pop()?e:n.length?"&"+e:"?"+e}return r},urlPathAppend:function(t,e){var r=t;if(!e)return r;0===e.indexOf("/")&&(e=e.substring(1));var n=t.split("?");return n[0].indexOf("/",n[0].length-1)<0&&(n[0]+="/"),r="".concat(n[0]).concat(e).concat(n.length>1?"?".concat(n[1]):"")},DEFAULT_PRECISION:14,toFloat:function(t,e){return null==e&&(e=W.DEFAULT_PRECISION),"number"!=typeof t&&(t=parseFloat(t)),0===e?t:parseFloat(t.toPrecision(e))},rad:function(t){return t*Math.PI/180},getParameters:function(t){t=null===t||void 0===t?window.location.href:t;var e="";if(C.contains(t,"?")){var r=t.indexOf("?")+1,n=C.contains(t,"#")?t.indexOf("#"):t.length;e=t.substring(r,n)}for(var o={},i=e.split(/[&;]/),a=0,s=i.length;a<s;++a){var u=i[a].split("=");if(u[0]){var l=u[0];try{l=decodeURIComponent(l)}catch(t){l=unescape(l)}var c=(u[1]||"").replace(/\+/g," ");try{c=decodeURIComponent(c)}catch(t){c=unescape(c)}1==(c=c.split(",")).length&&(c=c[0]),o[l]=c}}return o},lastSeqID:0,createUniqueID:function(t){return null==t&&(t="id_"),W.lastSeqID+=1,t+W.lastSeqID},normalizeScale:function(t){return t>1?1/t:t},getResolutionFromScale:function(t,e){var r;t&&(null==e&&(e="degrees"),r=1/(W.normalizeScale(t)*q[e]*96));return r},getScaleFromResolution:function(t,e){return null==e&&(e="degrees"),t*q[e]*96},getBrowser:function(){return z},isSupportCanvas:V,supportCanvas:function(){return W.isSupportCanvas},isInTheSameDomain:function(t){return!t||(-1===t.indexOf("//")||W.isSameDomain(t,document.location.toString()))},isSameDomain:function(t,e){return new(D())(t).normalize().origin()===new(D())(e).normalize().origin()},calculateDpi:function(t,e,r,n,o){if(t&&e&&r){var i,a=t.getWidth(),s=t.getHeight(),u=e.w,l=e.h;if(o=o||6378137,"degree"===(n=n||"degrees").toLowerCase()||"degrees"===n.toLowerCase()||"dd"===n.toLowerCase()){var c=a/u,f=s/l;i=254/(c>f?c:f)/r/(2*Math.PI*o/360)/1e4}else{i=254/(a/u)/r/1e4}return i}},toJSON:function(t){var e=t;if(null==e)return null;switch(e.constructor){case String:return e=(e=(e=(e=(e=(e=(e='"'+e.replace(/(["\\])/g,"\\$1")+'"').replace(/\n/g,"\\n")).replace(/\r/g,"\\r")).replace("<","&lt;")).replace(">","&gt;")).replace(/%/g,"%25")).replace(/&/g,"%26");case Array:for(var r="",n=0,o=e.length;n<o;n++)r+=W.toJSON(e[n]),n!==e.length-1&&(r+=",");return"["+r+"]";case Number:return isFinite(e)?String(e):null;case Boolean:return String(e);case Date:return"{'__type':\"System.DateTime\",'Year':"+e.getFullYear()+",'Month':"+(e.getMonth()+1)+",'Day':"+e.getDate()+",'Hour':"+e.getHours()+",'Minute':"+e.getMinutes()+",'Second':"+e.getSeconds()+",'Millisecond':"+e.getMilliseconds()+",'TimezoneOffset':"+e.getTimezoneOffset()+"}";default:if(null!=e.toJSON&&"function"==typeof e.toJSON)return e.toJSON();if("object"===B(e)){if(e.length){for(var i=[],a=0,s=e.length;a<s;a++)i.push(W.toJSON(e[a]));return"["+i.join(",")+"]"}var u=[];for(var l in e)"function"!=typeof e[l]&&"CLASS_NAME"!==l&&"parent"!==l&&u.push("'"+l+"':"+W.toJSON(e[l]));return u.length>0?"{"+u.join(",")+"}":"{}"}return e.toString()}},getResolutionFromScaleDpi:function(t,e,r,n){return n=n||6378137,r=r||"",t>0&&e>0?(t=W.normalizeScale(t),"degree"===r.toLowerCase()||"degrees"===r.toLowerCase()||"dd"===r.toLowerCase()?254/e/t/(2*Math.PI*n/360)/1e4:254/e/t/1e4):-1},getScaleFromResolutionDpi:function(t,e,r,n){return n=n||6378137,r=r||"",t>0&&e>0?"degree"===r.toLowerCase()||"degrees"===r.toLowerCase()||"dd"===r.toLowerCase()?254/e/t/(2*Math.PI*n/360)/1e4:254/e/t/1e4:-1},transformResult:function(t){return t.responseText&&"string"==typeof t.responseText&&(t=JSON.parse(t.responseText)),t},copyAttributes:function(t,e){if(t=t||{},e)for(var r in e){var n=e[r];void 0!==n&&"CLASS_NAME"!==r&&"function"!=typeof n&&(t[r]=n)}return t},copyAttributesWithClip:function(t,e,r){if(t=t||{},e)for(var n in e){var o=!1;if(r&&r.length)for(var i=0,a=r.length;i<a;i++)if(n===r[i]){o=!0;break}if(!0!==o){var s=e[n];void 0!==s&&"CLASS_NAME"!==n&&"function"!=typeof s&&(t[n]=s)}}return t},cloneObject:function(t){if(null===t||"object"!==B(t))return t;if(t instanceof Date){var e=new Date;return e.setTime(t.getTime()),e}if(t instanceof Array)return t.slice(0);if(t instanceof Object){var r={};for(var n in t)t.hasOwnProperty(n)&&(r[n]=W.cloneObject(t[n]));return r}throw new Error("Unable to copy obj! Its type isn't supported.")},lineIntersection:function(t,e,r,n){var o,i,a=null,s=(n.x-r.x)*(t.y-r.y)-(n.y-r.y)*(t.x-r.x),u=(e.x-t.x)*(t.y-r.y)-(e.y-t.y)*(t.x-r.x),l=(n.y-r.y)*(e.x-t.x)-(n.x-r.x)*(e.y-t.y);if(0!=l)i=u/l,a=(o=s/l)>=0&&i<=1&&o<=1&&i>=0?new L.Point(t.x+o*(e.x-t.x),t.y+o*(e.y-t.y)):"No Intersection";else if(0==s&&0==u){var c=Math.max(t.y,e.y),f=Math.min(t.y,e.y),h=Math.max(t.x,e.x),p=Math.min(t.x,e.x);a=(r.y>=f&&r.y<=c||n.y>=f&&n.y<=c)&&r.x>=p&&r.x<=h||n.x>=p&&n.x<=h?"Coincident":"Parallel"}else a="Parallel";return a},getTextBounds:function(t,e,r){document.body.appendChild(r),r.style.width="auto",r.style.height="auto",t.fontSize&&(r.style.fontSize=t.fontSize),t.fontFamily&&(r.style.fontFamily=t.fontFamily),t.fontWeight&&(r.style.fontWeight=t.fontWeight),r.style.position="relative",r.style.visibility="hidden",r.style.display="inline-block",r.innerHTML=e;var n=r.clientWidth,o=r.clientHeight;return document.body.removeChild(r),{textWidth:n,textHeight:o}},convertPath:function(t,e){return e?t.replace(/\{([\w-\.]+)\}/g,function(t,r){var n;return n=e.hasOwnProperty(r)?function(t){if(void 0==t||null==t)return"";if(t instanceof Date)return t.toJSON();if(function(t){if("string"!=typeof t&&"object"!==B(t))return!1;try{var e=t.toString();return"[object Object]"===e||"[object Array]"===e}catch(t){return!1}}(t))return JSON.stringify(t);return t.toString()}(e[r]):t,encodeURIComponent(n)}):t}},q={inches:1,ft:12,mi:63360,m:39.3701,km:39370.1,dd:4374754,yd:36};q.in=q.inches,q.degrees=q.dd,q.nmi=1852*q.m;var Y=.0254000508001016;W.extend(q,{Inch:q.inches,Meter:39.37,Foot:12,IFoot:11.999976,ClarkeFoot:11.999868327581488,SearsFoot:11.999955194477684,GoldCoastFoot:11.999964589846002,IInch:.9999979999999999,MicroInch:999998e-9,Mil:9.99998e-7,Centimeter:.3937,Kilometer:39370,Yard:36,SearsYard:35.99986558343306,IndianYard:35.99987015540864,IndianYd37:35.999740205100004,IndianYd62:35.999880755999996,IndianYd75:35.999868945,IndianFoot:11.9999567087,IndianFt37:11.9999134017,IndianFt62:11.999960252000001,IndianFt75:11.999956315,Mile:63360,IYard:35.999928,IMile:63359.87328,NautM:72913.24,"Lat-66":4367838.370169282,"Lat-83":4367954.152606599,Decimeter:3.9370000000000003,Millimeter:.03937,Dekameter:393.7,Decameter:393.7,Hectometer:3937,GermanMeter:39.370535294205006,CaGrid:39.359685060000004,ClarkeChain:791.991309620512,GunterChain:792.0000000000001,BenoitChain:791.9977268035781,SearsChain:791.9970428354235,ClarkeLink:7.91991309620512,GunterLink:7.920000000000001,BenoitLink:7.919977268035781,SearsLink:7.919970428354236,Rod:198.00000000000014,IntnlChain:791.998416,IntnlLink:7.91998416,Perch:198.00000000000014,Pole:198.00000000000014,Furlong:7919.999999999997,Rood:148.75036777426,CapeFoot:11.999868185255002,Brealey:14763.75,ModAmFt:12.000458400000001,Fathom:71.999856,"NautM-UK":72959.85408,"50kilometers":1968500,"150kilometers":5905500}),W.extend(q,{mm:q.Meter/1e3,cm:q.Meter/100,dm:100*q.Meter,km:1e3*q.Meter,kmi:q.nmi,fath:q.Fathom,ch:q.IntnlChain,link:q.IntnlLink,"us-in":q.inches,"us-ft":q.Foot,"us-yd":q.Yard,"us-ch":q.GunterChain,"us-mi":q.Mile,"ind-yd":q.IndianYd37,"ind-ft":q.IndianFt37,"ind-ch":791.9942845122}),q.degree=q.dd,q.meter=q.m,q.foot=q.ft,q.inch=q.inches,q.mile=q.mi,q.kilometer=q.km,q.yard=q.yd;var X,J,K=window.fetch,Q={limitLength:1500,queryKeys:[],queryValues:[],supermap_callbacks:{},addQueryStrings:function(t){for(var e in t){this.queryKeys.push(e),"string"!=typeof t[e]&&(t[e]=W.toJSON(t[e]));var r=encodeURIComponent(t[e]);this.queryValues.push(r)}},issue:function(t){for(var e=this,r=e.getUid(),n=t.url,o=[],i=n,a=0,s=e.queryKeys?e.queryKeys.length:0,u=0;u<s;u++)if(i.length+e.queryKeys[u].length+2>=e.limitLength){if(0==a)return!1;o.push(i),i=n,a=0,u--}else if(i.length+e.queryKeys[u].length+2+e.queryValues[u].length>e.limitLength)for(var l=e.queryValues[u];l.length>0;){var c=e.limitLength-i.length-e.queryKeys[u].length-2;i.indexOf("?")>-1?i+="&":i+="?";var f=l.substring(0,c);"%"===f.substring(c-1,c)?(c-=1,f=l.substring(0,c)):"%"===f.substring(c-2,c-1)&&(c-=2,f=l.substring(0,c)),i+=e.queryKeys[u]+"="+f,l=l.substring(c),f.length>0&&(o.push(i),i=n,a=0)}else a++,i.indexOf("?")>-1?i+="&":i+="?",i+=e.queryKeys[u]+"="+e.queryValues[u];return o.push(i),e.send(o,"SuperMapJSONPCallbacks_"+r,t&&t.proxy)},getUid:function(){return 1e3*(new Date).getTime()+Math.floor(1e17*Math.random())},send:function(t,e,r){var n=t.length;if(n>0)return new Promise(function(o){for(var i=(new Date).getTime(),a=0;a<n;a++){var s=t[a];s.indexOf("?")>-1?s+="&":s+="?",s+="sectionCount="+n,s+="&sectionIndex="+a,s+="&jsonpUserID="+i,r&&(s=decodeURIComponent(s),s=r+encodeURIComponent(s)),_()(s,{jsonpCallbackFunction:e,timeout:3e4}).then(function(t){o(t.json())})}})},GET:function(t){return this.queryKeys.length=0,this.queryValues.length=0,this.addQueryStrings(t.params),this.issue(t)},POST:function(t){return this.queryKeys.length=0,this.queryValues.length=0,this.addQueryStrings({requestEntity:t.data}),this.issue(t)},PUT:function(t){return this.queryKeys.length=0,this.queryValues.length=0,this.addQueryStrings({requestEntity:t.data}),this.issue(t)},DELETE:function(t){return this.queryKeys.length=0,this.queryValues.length=0,this.addQueryStrings({requestEntity:t.data}),this.issue(t)}},Z=function(){return void 0!=X?X:window.XMLHttpRequest&&"withCredentials"in new window.XMLHttpRequest},$=function(){return J||45e3},tt={commit:function(t,e,r,n){switch(t=t?t.toUpperCase():t){case"GET":return this.get(e,r,n);case"POST":return this.post(e,r,n);case"PUT":return this.put(e,r,n);case"DELETE":return this.delete(e,r,n);default:return this.get(e,r,n)}},supportDirectRequest:function(t,e){return!!W.isInTheSameDomain(t)||(void 0!=e.crossOrigin?e.crossOrigin:Z()||e.proxy)},get:function(t,e,r){r=r||{};if(t=W.urlAppend(t,this._getParameterString(e||{})),t=this._processUrl(t,r),!this.supportDirectRequest(t,r)){var n={url:t=t.replace(".json",".jsonp"),data:e};return Q.GET(n)}return this.urlIsLong(t)?this._postSimulatie("GET",t.substring(0,t.indexOf("?")),e,r):this._fetch(t,e,r,"GET")},delete:function(t,e,r){r=r||{};if(t=W.urlAppend(t,this._getParameterString(e||{})),t=this._processUrl(t,r),!this.supportDirectRequest(t,r)){t=t.replace(".json",".jsonp");var n={url:t+="&_method=DELETE",data:e};return Q.DELETE(n)}return this.urlIsLong(t)?this._postSimulatie("DELETE",t.substring(0,t.indexOf("?")),e,r):this._fetch(t,e,r,"DELETE")},post:function(t,e,r){if(r=r||{},t=this._processUrl(t,r),!this.supportDirectRequest(t,r)){t=t.replace(".json",".jsonp");var n={url:W.urlAppend(t,"_method=POST"),data:e};return Q.POST(n)}return this._fetch(t,e,r,"POST")},put:function(t,e,r){if(r=r||{},t=this._processUrl(t,r),!this.supportDirectRequest(t,r)){t=t.replace(".json",".jsonp");var n={url:t+="&_method=PUT",data:e};return Q.PUT(n)}return this._fetch(t,e,r,"PUT")},urlIsLong:function(t){for(var e=0,r=null,n=0,o=t.length;n<o;n++)(r=t.charCodeAt(n))<127?e++:128<=r&&r<=2047?e+=2:2048<=r&&r<=65535&&(e+=3);return!(e<2e3)},_postSimulatie:function(t,e,r,n){return e+=(e.indexOf("?")>-1?"&":"?")+"_method="+t,"string"!=typeof r&&(r=JSON.stringify(r)),this.post(e,r,n)},_processUrl:function(t,e){if(this._isMVTRequest(t))return t;if(-1===t.indexOf(".json")&&!e.withoutFormatSuffix)if(t.indexOf("?")<0)t+=".json";else{var r=t.split("?");2===r.length&&(t=r[0]+".json?"+r[1])}return e&&e.proxy&&("function"==typeof e.proxy?t=e.proxy(t):(t=decodeURIComponent(t),t=e.proxy+encodeURIComponent(t))),t},_fetch:function(t,e,r,n){return(r=r||{}).headers=r.headers||{},r.headers["Content-Type"]||FormData.prototype.isPrototypeOf(e)||(r.headers["Content-Type"]="application/x-www-form-urlencoded;charset=UTF-8"),r.timeout?this._timeout(r.timeout,K(t,{method:n,headers:r.headers,body:"PUT"===n||"POST"===n?e:void 0,credentials:this._getWithCredentials(r),mode:"cors",timeout:$()}).then(function(t){return t})):K(t,{method:n,body:"PUT"===n||"POST"===n?e:void 0,headers:r.headers,credentials:this._getWithCredentials(r),mode:"cors",timeout:$()}).then(function(t){return t})},_getWithCredentials:function(t){return!0===t.withCredentials?"include":!1===t.withCredentials?"omit":"same-origin"},_fetchJsonp:function(t,e){return e=e||{},_()(t,{method:"GET",timeout:e.timeout}).then(function(t){return t})},_timeout:function(t,e){return new Promise(function(r,n){setTimeout(function(){n(new Error("timeout"))},t),e.then(r,n)})},_getParameterString:function(t){var e=[];for(var r in t){var n,o=t[r];if(null!=o&&"function"!=typeof o)n=Array.isArray(o)||"[object Object]"===o.toString()?encodeURIComponent(JSON.stringify(o)):encodeURIComponent(o),e.push(encodeURIComponent(r)+"="+n)}return e.join("&")},_isMVTRequest:function(t){return t.indexOf(".mvt")>-1||t.indexOf(".pbf")>-1}},et=r(7367);function rt(t,e){t&&-1===t.indexOf("BEGIN PUBLIC KEY")&&(t="-----BEGIN PUBLIC KEY-----\n".concat(t,"\n-----END PUBLIC KEY-----"));var r=et.pki.publicKeyFromPem(t),n={md:et.md.sha256.create(),mgf1:{md:et.md.sha1.create()}},o=r.encrypt(e,"RSA-OAEP",n);return!!o&&window.btoa(o)}function nt(t,e,r){r=et.util.encodeUtf8(r);var n=et.cipher.createCipher("AES-GCM",t);if(n.start({iv:e,additionalData:"",tagLength:128}),n.update(et.util.createBuffer(r)),n.finish()){var o=n.output,i=n.mode.tag;return window.btoa(o.data+i.data)}return!1}function ot(t){for(var e="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",r="",n=t;n>0;--n)r+=e[Math.floor(Math.random()*e.length)];return r}function it(t){"@babel/helpers - typeof";return(it="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function at(){at=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var i=e&&e.prototype instanceof g?e:g,a=Object.create(i.prototype),s=new A(n||[]);return o(a,"_invoke",{value:P(t,r,s)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var h="suspendedStart",p="suspendedYield",d="executing",y="completed",v={};function g(){}function m(){}function b(){}var w={};l(w,a,function(){return this});var S=Object.getPrototypeOf,x=S&&S(S(M([])));x&&x!==r&&n.call(x,a)&&(w=x);var _=b.prototype=g.prototype=Object.create(w);function E(t){["next","throw","return"].forEach(function(e){l(t,e,function(t){return this._invoke(e,t)})})}function O(t,e){function r(o,i,a,s){var u=f(t[o],t,i);if("throw"!==u.type){var l=u.arg,c=l.value;return c&&"object"==it(c)&&n.call(c,"__await")?e.resolve(c.__await).then(function(t){r("next",t,a,s)},function(t){r("throw",t,a,s)}):e.resolve(c).then(function(t){l.value=t,a(l)},function(t){return r("throw",t,a,s)})}s(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e(function(e,o){r(t,n,e,o)})}return i=i?i.then(o,o):o()}})}function P(e,r,n){var o=h;return function(i,a){if(o===d)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var u=k(s,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var l=f(e,r,n);if("normal"===l.type){if(o=n.done?y:p,l.arg===v)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=y,n.method="throw",n.arg=l.arg)}}}function k(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,k(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function T(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function A(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function M(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(it(e)+" is not iterable")}return m.prototype=b,o(_,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:m,configurable:!0}),m.displayName=l(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,l(t,u,"GeneratorFunction")),t.prototype=Object.create(_),t},e.awrap=function(t){return{__await:t}},E(O.prototype),l(O.prototype,s,function(){return this}),e.AsyncIterator=O,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new O(c(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next()})},E(_),l(_,u,"Generator"),l(_,a,function(){return this}),l(_,"toString",function(){return"[object Generator]"}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=M,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(T),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),T(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;T(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:M(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function st(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return ut(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ut(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){s=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function ut(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function lt(t,e,r,n,o,i,a){try{var s=t[i](a),u=s.value}catch(t){return void r(t)}s.done?e(u):Promise.resolve(u).then(n,o)}function ct(t){return function(){var e=this,r=arguments;return new Promise(function(n,o){var i=t.apply(e,r);function a(t){lt(i,n,o,a,s,"next",t)}function s(t){lt(i,n,o,a,s,"throw",t)}a(void 0)})}}function ft(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ht(n.key),n)}}function ht(t){var e=function(t,e){if("object"!=it(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=it(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==it(e)?e:e+""}var pt=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.serverUrl=e,this.tunnelUrl=void 0,this.blockedUrlRegex={HEAD:[],POST:[],GET:[],PUT:[],DELETE:[]},this.encryptAESKey=ot(16),this.encryptAESIV=ot(12)},(e=[{key:"request",value:function(){var t=ct(at().mark(function t(e){var r,n,o,i,a,s,u,l,c,f;return at().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.serverUrl){t.next=2;break}throw"serverUrl can not be empty.";case 2:return r=Object.assign({baseURL:""},e),t.next=5,this._createTunnel();case 5:if(t.sent){t.next=8;break}return t.abrupt("return");case 8:n=st(this.blockedUrlRegex[r.method.toUpperCase()]),t.prev=9,n.s();case 11:if((o=n.n()).done){t.next=24;break}if(i=o.value,!new RegExp(i).test(r.baseURL+r.url)){t.next=22;break}if(a={url:r.baseURL+(r.url.startsWith("/")?r.url.substring(1,r.url.length):r.url),method:r.method,timeout:r.timeout,headers:r.headers,body:r.data},r.method="post",r.data=nt(this.encryptAESKey,this.encryptAESIV,JSON.stringify(a)),r.data){t.next=20;break}throw"encrypt failed";case 20:return r.url=this.tunnelUrl,t.abrupt("break",24);case 22:t.next=11;break;case 24:t.next=29;break;case 26:t.prev=26,t.t0=t.catch(9),n.e(t.t0);case 29:return t.prev=29,n.f(),t.finish(29);case 32:return t.next=34,tt.commit(r.method,r.url,r.data,r.options);case 34:if(s=t.sent,r.url!==this.tunnelUrl){t.next=46;break}return t.next=38,s.text();case 38:if(u=t.sent,h=this.encryptAESKey,p=this.encryptAESIV,d=u,y=void 0,void 0,void 0,m=void 0,y=window.atob(d),v=y.substring(0,y.length-16),g=y.substring(y.length-16),(m=et.cipher.createDecipher("AES-GCM",et.util.createBuffer(h))).start({iv:et.util.createBuffer(p),additionalData:"",tagLength:128,tag:g}),m.update(et.util.createBuffer(v)),l=!!m.finish()&&et.util.decodeUtf8(m.output.data)){t.next=43;break}return console.debug("è§£å¯è¯·æ±ååºå¤±è´¥"),t.abrupt("return");case 43:return c=JSON.parse(l),f=Object.create({json:function(){return Promise.resolve(c.data)}}),t.abrupt("return",Object.assign(f,c));case 46:return t.abrupt("return",s);case 47:case"end":return t.stop()}var h,p,d,y,v,g,m},t,this,[[9,26,29,32]])}));return function(e){return t.apply(this,arguments)}}()},{key:"_getRSAPublicKey",value:function(){var t=ct(at().mark(function t(){var e,r,n,o;return at().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,tt.get(D()(this.serverUrl).segment("services/security/tunnel/v1/publickey").toString());case 3:return e=t.sent,t.next=6,e.json();case 6:return r=t.sent,n={key:this.encryptAESKey,iv:this.encryptAESIV,mode:"GCM",padding:"NoPadding"},o=rt(r.publicKey,n.key+n.iv),t.abrupt("return",o);case 12:t.prev=12,t.t0=t.catch(0),console.debug("RSAå¬é¥è·åå¤±è´¥ï¼éè¯¯è¯¦æï¼"+t.t0);case 15:case"end":return t.stop()}},t,this,[[0,12]])}));return function(){return t.apply(this,arguments)}}()},{key:"_createTunnel",value:function(){var t=ct(at().mark(function t(){var e,r,n;return at().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.tunnelUrl){t.next=19;break}return t.prev=1,t.next=4,this._getRSAPublicKey();case 4:if(e=t.sent){t.next=7;break}throw"fetch RSA publicKey failed";case 7:return t.next=9,tt.post(D()(this.serverUrl).segment("services/security/tunnel/v1/tunnels").toString(),e);case 9:return r=t.sent,t.next=12,r.json();case 12:n=t.sent,Object.assign(this,{tunnelUrl:n.tunnelUrl,blockedUrlRegex:Object.assign({},this.blockedUrlRegex,n.blockedUrlRegex)}),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(1),console.debug("å®å¨é§éåå»ºå¤±è´¥ï¼éè¯¯è¯¦æï¼"+t.t0);case 19:return t.abrupt("return",this.tunnelUrl);case 20:case"end":return t.stop()}},t,this,[[1,16]])}));return function(){return t.apply(this,arguments)}}()}])&&ft(t.prototype,e),r&&ft(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function dt(t){return yt.apply(this,arguments)}function yt(){return(yt=ct(at().mark(function t(e){var r,n,o,i,a,s,u,l;return at().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,r=(e&&e.match(/.+(?=(\/restjsr\/v1\/vectortile\/|\/rest\/maps\/))/)||[])[0]){t.next=4;break}return t.abrupt("return");case 4:return t.next=6,tt.get(r);case 6:return n=t.sent,t.next=9,n.json();case 9:if(o=t.sent,i=(o||[]).find(function(t){return e.includes(t.name)&&t.serviceEncryptInfo})){t.next=13;break}return t.abrupt("return");case 13:return a=r.split("/services/")[0],s=new pt(a),u=i&&"".concat(a,"/services/security/svckeys/").concat(i.serviceEncryptInfo.encrptKeyID,".json"),t.next=18,s.request({method:"get",url:u});case 18:return l=t.sent,t.abrupt("return",l.json());case 22:t.prev=22,t.t0=t.catch(0),console.error(t.t0);case 25:case"end":return t.stop()}},t,null,[[0,22]])}))).apply(this,arguments)}function vt(t){"@babel/helpers - typeof";return(vt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function gt(t){return function(t){if(Array.isArray(t))return mt(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return mt(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return mt(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function mt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function bt(){bt=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var i=e&&e.prototype instanceof g?e:g,a=Object.create(i.prototype),s=new A(n||[]);return o(a,"_invoke",{value:P(t,r,s)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var h="suspendedStart",p="suspendedYield",d="executing",y="completed",v={};function g(){}function m(){}function b(){}var w={};l(w,a,function(){return this});var S=Object.getPrototypeOf,x=S&&S(S(M([])));x&&x!==r&&n.call(x,a)&&(w=x);var _=b.prototype=g.prototype=Object.create(w);function E(t){["next","throw","return"].forEach(function(e){l(t,e,function(t){return this._invoke(e,t)})})}function O(t,e){function r(o,i,a,s){var u=f(t[o],t,i);if("throw"!==u.type){var l=u.arg,c=l.value;return c&&"object"==vt(c)&&n.call(c,"__await")?e.resolve(c.__await).then(function(t){r("next",t,a,s)},function(t){r("throw",t,a,s)}):e.resolve(c).then(function(t){l.value=t,a(l)},function(t){return r("throw",t,a,s)})}s(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e(function(e,o){r(t,n,e,o)})}return i=i?i.then(o,o):o()}})}function P(e,r,n){var o=h;return function(i,a){if(o===d)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var u=k(s,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var l=f(e,r,n);if("normal"===l.type){if(o=n.done?y:p,l.arg===v)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=y,n.method="throw",n.arg=l.arg)}}}function k(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,k(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function T(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function A(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function M(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(vt(e)+" is not iterable")}return m.prototype=b,o(_,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:m,configurable:!0}),m.displayName=l(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,l(t,u,"GeneratorFunction")),t.prototype=Object.create(_),t},e.awrap=function(t){return{__await:t}},E(O.prototype),l(O.prototype,s,function(){return this}),e.AsyncIterator=O,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new O(c(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next()})},E(_),l(_,u,"Generator"),l(_,a,function(){return this}),l(_,"toString",function(){return"[object Generator]"}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=M,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(T),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),T(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;T(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:M(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function wt(t,e,r,n,o,i,a){try{var s=t[i](a),u=s.value}catch(t){return void r(t)}s.done?e(u):Promise.resolve(u).then(n,o)}!function(){w().VectorTileSource&&void 0===w().VectorTileSource.prototype.beforeLoadBak&&(w().VectorTileSource.prototype.beforeLoadBak=w().VectorTileSource.prototype.beforeLoad,w().VectorTileSource.prototype.beforeLoad=function(){var t,e=(t=bt().mark(function t(e,r){var n,o;return bt().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=r&&r.tiles&&r.tiles[0],!S.values.includes(e)||!n){t.next=6;break}return t.next=4,dt(n);case 4:o=t.sent,this.decryptKey=o;case 6:this.beforeLoadBak(e,r);case 7:case"end":return t.stop()}},t,this)}),function(){var e=this,r=arguments;return new Promise(function(n,o){var i=t.apply(e,r);function a(t){wt(i,n,o,a,s,"next",t)}function s(t){wt(i,n,o,a,s,"throw",t)}a(void 0)})});return function(t,r){return e.apply(this,arguments)}}()),w().Map.prototype.overlayLayersManager={},void 0===w().Map.prototype.addLayerBak&&(w().Map.prototype.addLayerBak=w().Map.prototype.addLayer,w().Map.prototype.addLayer=function(t,e){return t.source||"custom"===t.type||"background"===t.type?(this.addLayerBak(t,e),t.overlay&&!this.overlayLayersManager[t.id]&&(this.overlayLayersManager[t.id]=t),this):this.overlayLayersManager[t.id]||this.style._layers[t.id]?void this.fire("error",{error:new Error("A layer with this id already exists.")}):(function(t,e){t.onAdd&&t.onAdd(e)}(t,this),this.overlayLayersManager[t.id]=t,this)}),w().Map.prototype.listLayers=function(){var t=[],e=this.style._order||[];for(var r in t.push.apply(t,gt(e)),this.overlayLayersManager){var n=this.overlayLayersManager[r].id;t.includes(n)||t.push(n)}return t},w().Map.prototype.getLayer=function(t){return this.overlayLayersManager[t]?this.overlayLayersManager[t]:this.style.getLayer(t)},w().Map.prototype.moveLayer=function(t,e){return this.overlayLayersManager[t]?(this.overlayLayersManager[t].moveLayer?this.overlayLayersManager[t].moveLayer(t,e):function(t,e){var r=document.getElementById(t);if(e){var n=document.getElementById(e);n||w().Evented.prototype.fire("error",{error:new Error('Layer with id "'.concat(e,'" does not exist on this document.'))})}r&&n?n.parentNode.insertBefore(r,n):r.parentNode.appendChild(r)}(t,e),this):this.style._layers[t]?(this.style.moveLayer(t,e),this._update(!0),this):void 0},w().Map.prototype.removeLayer=function(t){return this.overlayLayersManager[t]&&delete this.overlayLayersManager[t],this.style.removeLayer(t),this._update(!0),this},w().Map.prototype.setLayoutProperty=function(t,e,r){return this.overlayLayersManager[t]?("visibility"===e&&(r="visible"===r,n=this.overlayLayersManager[t],o=r,n.setVisibility&&n.setVisibility(o),this.style.fire("data",{dataType:"style"})),this):(this.style.setLayoutProperty(t,e,r),this._update(!0),this);var n,o},w().Map.prototype.updateTransform=function(t,e,r,n,o,i,a){this.transform.units=t;var s=this.mercatorZfromAltitude;w().MercatorCoordinate.fromLngLat=function(t,n){n=n||0;var o=w().LngLat.convert(t);return new(w().MercatorCoordinate)((o.lng-e)/i,(r-o.lat)/a,s(n,o.lat))},w().MercatorCoordinate.prototype.toLngLat=function(){return new(w().LngLat)(this.x*i+e,r-this.y*a)},this.customConvertPoint=window.URL.createObjectURL(new Blob(["customConvertPoint = {projectX:function(x){return (x - "+n+") / "+i+" + 0.5},projectY:function(y){y = 0.5 - ((y - "+o+") / "+a+");return y < 0 ? 0 : y > 1 ? 1 : y;},toY:function(y){return (0.5-y)*"+a+"+"+o+";}}"],{type:"text/javascript"}))}}();function St(t){"@babel/helpers - typeof";return(St="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function xt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,_t(n.key),n)}}function _t(t){var e=function(t,e){if("object"!=St(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=St(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==St(e)?e:e+""}var Et=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.imageUrl=null,this.link=null,this.width=null,this.height=null,this.alt="SuperMap iClient",this._extend(this,e)},(e=[{key:"onAdd",value:function(t){this._map=t,this._container=document.createElement("div"),this._container.className="mapboxgl-ctrl iclient-logo",this._container.style.marginTop=0,this._container.style.marginBottom=0,this._container.style.marginLeft=0,this._container.style.marginRight=0;var e="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAF4AAAAdCAYAAAAjHtusAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA4ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDY3IDc5LjE1Nzc0NywgMjAxNS8wMy8zMC0yMzo0MDo0MiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDozYWZlOGIwMi01MWE3LTRiZjYtYWVkYS05MGQ2ZTQ4YjZiMmUiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6ODg0NkFBQUE3RjEzMTFFNzhFRjJFQkY4RjcxQjc1NjIiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6ODg0NkFBQTk3RjEzMTFFNzhFRjJFQkY4RjcxQjc1NjIiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUgKE1hY2ludG9zaCkiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo4MWI3NzdhNC1lZmEyLTQ1MzUtOGQzNi03MmRjNDkyODMzN2UiIHN0UmVmOmRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDpjYTYzODVjMi1jNDQ1LTExN2EtYTc0ZC1lM2I5MzJlMGE4Y2QiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5q1HM0AAAF/ElEQVR42tSabYhUVRjHZ7W01C1uaCRW4F3oi9SXCUnwQ9gsGUFvOEtQH1bLu5VS9sbYh5KicjYt29qiGQwVg2xWWKgocob91AvC+CWsoJqB3qHMSdTMpZyeU/+Df07n3pk7997Z6cBv99z7nHvOvf/z/pxJNZvNVI/jCKXmv6EquAmVkxPSlvtp2GItr0/96fFQForChJAWDiVYTkMYMu4XBFcYjLOwWS3sNwmn8NGzZ0h4Flv/zwIdchAnh/slCGmmKUNIBzYPaXOUr0vPuEjD71JAPh7l61embzinhV3V8nnCGmGT8LwlzSL8/yUh4Tfjo9T/CgnCIYNKycA2Qq21AcHU/VHE80Idoo3Qs0W6p0UtUnkZvEMDeVcCyqxEafF7hL8Qf0oYsIj+lfC9cH1CwhchWAGCtZO+AooQOkdC1Km1VtCb63StW73uFSzgKFUkNwBbmZGGmqowhvg8ZNpH9oXChcIcYRdeNomgxLkaH+S1SGubAxyIpFv+Zp+0DYjrAS00j/dem2VGEl6FJ4Qa4quEu8j2hTCJ+GJhe4JjfQMf6JCYPPbysMPxBlp0BUKOogEF9Rg9/heNvNKYfM0KsZUZaYxX4STGrzJa+zbhPeFH2DcK10KItcI+pI0rVElwXl1ULaKnIJhDw0oRQpTQc1zcbwRU8ATy4DR6yMlTzwkqMziEWHvubJ4Nk4ZtHdnqwvwY17xq3Z4FjrG+z2Kdrdf2ZSGD+xlLPh6t1R0jP9fI22ZzKI92yvQl7EbmBxI4S7Y+vIAOL87QZqsc5uNnssxZIcfYjXT9snCR7jjobidp+FkxA2v+Cq1QervMDmp4P7Xs3YZtE9kOC3P/By6JGaETl8ElwueYTNTDq4UDsKnd7YfCNbT239LF1udS72xYJt1UWxNfN4IIP4bWuTpEja01JtMFZFsm/AHbtHBlDE6yasA4moYTrUbvdBTXHqUrAH4uSadbyzF+vbBM2IsNkS3MNa5305JxqfA02T4TnkX8XOH1mPw8ruVejpxbI9hZD2Cz1U7LdrrUvjP/WfZinNZhr6V27hP+FPZh9aLvLxVO4DllX0G2OcKnlO/DCblxaz6uXBtmi+8mBaP3/SP8IuEIiTRoPPQm2TaEmEyXo0JU+F0YiPFD0hhOsiE/vqeEVwyTgF8L51OilcIZ2I4Ll5NttvAJPfukUeB2sk0ZPSbKIUUJpCII7+DasWy08uhNNazT0wGHI7mAtB7KqMKm38HhDdAUibTVKGicbB8YAqrJ9DRsp43JdB4qUof1HQrPE6XTQWu3Ce/inVzjXhXpMiTwUYugNVQ+p80jrUsV5EH0POKeuXO9QjhFq5GryNYvfEMCDhsftYVsB9ETtG0V9ZjfhCURhbcJFpfwVZ9jvhxsLHwTYtp2svlWQw3vXL8UnqHVSIG8l8ex+tHhBXgjddgqHEZ8ufAA2aaEnYgrF/KrPXrEmMUqZ9THLW06xhoBaVueQpkug+ewOUphE3Qv2Q5gGamXYa+QbVq4O+DQ5FHyZqrjxNt7UHh9uuRa0F7HjCF8o9PCTOGnscM7g2u1Hl9C9oeEnxC/1ajZg8JLiM9Hj9GHJseMShwL2DO0G5yEWn3Zh1QUods5CPkIoqlwAZxhXMsb6HrcEPBxchhdJ6wj29vCW4hfLOzo8J3rltYX50nXQAATSf/K4DEaGlTLvplsk/QCpoD60EQ7gLYZc8H9wq+I3yncEOEcNhuz6HWf3XEiwU/4Y8YEqVp2P10rt+8REvBGw026i4aDcbL9jF8r8Blmf4fCOzhViiscskygXRdehf3CO4hfigmTBXyQrl8TFtD1IzQX3CbcQrY3hPcRv4z8OmHPXwchVNln2MmE7BX6VwIFi/he6uxvb6JM3m0fdqvx/ATidxg2JeC7VDErAw5NzGfvwRJVheEIQ8Mg/pdwIM+UOmi9Q8ivCsrIy0tF+wVbEcLrd3Pb2XisEb4Tdlhsi4WP4RBbaLGrHfC3PrvMIezy9rTpGm5lz9LOMG15xvFxD/j5gjzjjDbMOzk+9zzt3v5bgAEAibzFeFHVgYkAAAAASUVORK5CYII=";this.imageUrl&&(e=this.imageUrl);var r=this.alt,n="94px",o="29px",i="width:"+n+";height:"+o+";";this.imageUrl&&(i="width:"+(n=this.width)+";height:"+(o=this.height)+";",n&&o||(i=""));var a=this.link;return this._container.innerHTML="<a href='"+a+"' target='_blank'><img src="+e+" alt='"+r+"' style='"+i+"margin-bottom: 2px'></a>",this._createStyleSheet(),this._container}},{key:"_createStyleSheet",value:function(){var t=document.createElement("style");t.type="text/css",t.innerHTML=".iclient-logo{margin:0 !important;}.iclient-logo a{border: none;display: block;height:31px;}.iclient-logo img{border: none;white-space: nowrap}",document.getElementsByTagName("head")[0].appendChild(t)}},{key:"_extend",value:function(t){for(var e=0;e<Object.getOwnPropertyNames(arguments).length;e++){var r=Object.getOwnPropertyNames(arguments)[e];if("caller"!=r&&"callee"!=r&&"length"!=r&&"arguments"!=r){var n=arguments[r];if(n)for(var o=0;o<Object.getOwnPropertyNames(n).length;o++){var i=Object.getOwnPropertyNames(n)[o];"caller"!=r&&"callee"!=r&&"length"!=r&&"arguments"!=r&&(t[i]=n[i])}}}return t}}])&&xt(t.prototype,e),r&&xt(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function Ot(t){"@babel/helpers - typeof";return(Ot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Pt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,kt(n.key),n)}}function kt(t){var e=function(t,e){if("object"!=Ot(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Ot(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Ot(e)?e:e+""}var Ct=function(){function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.w=e?parseFloat(e):0,this.h=e?parseFloat(r):0,this.CLASS_NAME="SuperMap.Size"}return e=t,(r=[{key:"toString",value:function(){return"w="+this.w+",h="+this.h}},{key:"clone",value:function(){return new t(this.w,this.h)}},{key:"equals",value:function(t){var e=!1;return null!=t&&(e=this.w===t.w&&this.h===t.h||isNaN(this.w)&&isNaN(this.h)&&isNaN(t.w)&&isNaN(t.h)),e}},{key:"destroy",value:function(){this.w=null,this.h=null}}])&&Pt(e.prototype,r),n&&Pt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,r,n}();function Tt(t){"@babel/helpers - typeof";return(Tt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function At(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Mt(n.key),n)}}function Mt(t){var e=function(t,e){if("object"!=Tt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Tt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Tt(e)?e:e+""}var jt=function(){function t(e,r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.x=e?parseFloat(e):0,this.y=r?parseFloat(r):0,this.mode=n,this.CLASS_NAME="SuperMap.Pixel"}return e=t,(r=[{key:"toString",value:function(){return"x="+this.x+",y="+this.y}},{key:"clone",value:function(){return new t(this.x,this.y,this.mode)}},{key:"equals",value:function(t){var e=!1;return null!=t&&(e=this.x==t.x&&this.y==t.y||isNaN(this.x)&&isNaN(this.y)&&isNaN(t.x)&&isNaN(t.y)),e}},{key:"distanceTo",value:function(t){return Math.sqrt(Math.pow(this.x-t.x,2)+Math.pow(this.y-t.y,2))}},{key:"add",value:function(e,r){if(null==e||null==r)throw new TypeError("Pixel.add cannot receive null values");return new t(this.x+e,this.y+r)}},{key:"offset",value:function(t){var e=this.clone();return t&&(e=this.add(t.x,t.y)),e}},{key:"destroy",value:function(){this.x=null,this.y=null,this.mode=null}}])&&At(e.prototype,r),n&&At(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,r,n}();function It(t){"@babel/helpers - typeof";return(It="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Nt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Lt(n.key),n)}}function Lt(t){var e=function(t,e){if("object"!=It(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=It(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==It(e)?e:e+""}jt.Mode={LeftTop:"lefttop",RightTop:"righttop",RightBottom:"rightbottom",LeftBottom:"leftbottom"};var Rt=function(){function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),W.isArray(e)&&(r=e[1],e=e[0]),this.lon=e?W.toFloat(e):0,this.lat=r?W.toFloat(r):0,this.CLASS_NAME="SuperMap.LonLat"}return e=t,n=[{key:"fromString",value:function(e){var r=e.split(",");return new t(r[0],r[1])}},{key:"fromArray",value:function(e){var r=W.isArray(e);return new t(r&&e[0],r&&e[1])}}],(r=[{key:"toString",value:function(){return"lon="+this.lon+",lat="+this.lat}},{key:"toShortString",value:function(){return this.lon+","+this.lat}},{key:"clone",value:function(){return new t(this.lon,this.lat)}},{key:"add",value:function(e,r){if(null==e||null==r)throw new TypeError("LonLat.add cannot receive null values");return new t(this.lon+W.toFloat(e),this.lat+W.toFloat(r))}},{key:"equals",value:function(t){var e=!1;return null!=t&&(e=this.lon===t.lon&&this.lat===t.lat||isNaN(this.lon)&&isNaN(this.lat)&&isNaN(t.lon)&&isNaN(t.lat)),e}},{key:"wrapDateLine",value:function(t){var e=this.clone();if(t){for(;e.lon<t.left;)e.lon+=t.getWidth();for(;e.lon>t.right;)e.lon-=t.getWidth()}return e}},{key:"destroy",value:function(){this.lon=null,this.lat=null}}])&&Nt(e.prototype,r),n&&Nt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,r,n}();function Dt(t){"@babel/helpers - typeof";return(Dt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Bt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ft(n.key),n)}}function Ft(t){var e=function(t,e){if("object"!=Dt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Dt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Dt(e)?e:e+""}var Gt=function(){function t(e,r,n,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),W.isArray(e)&&(o=e[3],n=e[2],r=e[1],e=e[0]),this.left=null!=e?W.toFloat(e):this.left,this.bottom=null!=r?W.toFloat(r):this.bottom,this.right=null!=n?W.toFloat(n):this.right,this.top=null!=o?W.toFloat(o):this.top,this.centerLonLat=null,this.CLASS_NAME="SuperMap.Bounds"}return e=t,n=[{key:"fromString",value:function(e,r){var n=e.split(",");return t.fromArray(n,r)}},{key:"fromArray",value:function(e,r){return!0===r?new t(e[1],e[0],e[3],e[2]):new t(e[0],e[1],e[2],e[3])}},{key:"fromSize",value:function(e){return new t(0,e.h,e.w,0)}},{key:"oppositeQuadrant",value:function(t){var e="";return e+="t"===t.charAt(0)?"b":"t",e+="l"===t.charAt(1)?"r":"l"}}],(r=[{key:"clone",value:function(){return new t(this.left,this.bottom,this.right,this.top)}},{key:"equals",value:function(t){var e=!1;return null!=t&&(e=this.left===t.left&&this.right===t.right&&this.top===t.top&&this.bottom===t.bottom),e}},{key:"toString",value:function(){return[this.left,this.bottom,this.right,this.top].join(",")}},{key:"toArray",value:function(t){return!0===t?[this.bottom,this.left,this.top,this.right]:[this.left,this.bottom,this.right,this.top]}},{key:"toBBOX",value:function(t,e){null==t&&(t=6);var r=Math.pow(10,t),n=Math.round(this.left*r)/r,o=Math.round(this.bottom*r)/r,i=Math.round(this.right*r)/r,a=Math.round(this.top*r)/r;return!0===e?o+","+n+","+a+","+i:n+","+o+","+i+","+a}},{key:"getWidth",value:function(){return this.right-this.left}},{key:"getHeight",value:function(){return this.top-this.bottom}},{key:"getSize",value:function(){return new Ct(this.getWidth(),this.getHeight())}},{key:"getCenterPixel",value:function(){return new jt((this.left+this.right)/2,(this.bottom+this.top)/2)}},{key:"getCenterLonLat",value:function(){return this.centerLonLat||(this.centerLonLat=new Rt((this.left+this.right)/2,(this.bottom+this.top)/2)),this.centerLonLat}},{key:"scale",value:function(e,r){var n,o;return e=e||1,null==r&&(r=this.getCenterLonLat()),"SuperMap.LonLat"===r.CLASS_NAME?(n=r.lon,o=r.lat):(n=r.x,o=r.y),new t((this.left-n)*e+n,(this.bottom-o)*e+o,(this.right-n)*e+n,(this.top-o)*e+o)}},{key:"add",value:function(e,r){if(null==e||null==r)throw new TypeError("Bounds.add cannot receive null values");return new t(this.left+e,this.bottom+r,this.right+e,this.top+r)}},{key:"extend",value:function(e){var r=null;if(e){switch(e.CLASS_NAME){case"SuperMap.LonLat":r=new t(e.lon,e.lat,e.lon,e.lat);break;case"SuperMap.Geometry.Point":r=new t(e.x,e.y,e.x,e.y);break;case"SuperMap.Bounds":r=e}r&&(this.centerLonLat=null,(null==this.left||r.left<this.left)&&(this.left=r.left),(null==this.bottom||r.bottom<this.bottom)&&(this.bottom=r.bottom),(null==this.right||r.right>this.right)&&(this.right=r.right),(null==this.top||r.top>this.top)&&(this.top=r.top))}}},{key:"containsLonLat",value:function(t,e){"boolean"==typeof e&&(e={inclusive:e}),e=e||{};var r=this.contains(t.lon,t.lat,e.inclusive),n=e.worldBounds;if(n&&!r){var o=n.getWidth(),i=(n.left+n.right)/2,a=Math.round((t.lon-i)/o);r=this.containsLonLat({lon:t.lon-a*o,lat:t.lat},{inclusive:e.inclusive})}return r}},{key:"containsPixel",value:function(t,e){return this.contains(t.x,t.y,e)}},{key:"contains",value:function(t,e,r){if(null==r&&(r=!0),null==t||null==e)return!1;var n=!1;return n=r?t>=this.left&&t<=this.right&&e>=this.bottom&&e<=this.top:t>this.left&&t<this.right&&e>this.bottom&&e<this.top,n}},{key:"intersectsBounds",value:function(t,e){if("boolean"==typeof e&&(e={inclusive:e}),(e=e||{}).worldBounds){var r=this.wrapDateLine(e.worldBounds);t=t.wrapDateLine(e.worldBounds)}else r=this;null==e.inclusive&&(e.inclusive=!0);var n=!1,o=r.left===t.right||r.right===t.left||r.top===t.bottom||r.bottom===t.top;if(e.inclusive||!o){var i=t.bottom>=r.bottom&&t.bottom<=r.top||r.bottom>=t.bottom&&r.bottom<=t.top,a=t.top>=r.bottom&&t.top<=r.top||r.top>t.bottom&&r.top<t.top,s=t.left>=r.left&&t.left<=r.right||r.left>=t.left&&r.left<=t.right,u=t.right>=r.left&&t.right<=r.right||r.right>=t.left&&r.right<=t.right;n=(i||a)&&(s||u)}if(e.worldBounds&&!n){var l=e.worldBounds,c=l.getWidth(),f=!l.containsBounds(r),h=!l.containsBounds(t);f&&!h?(t=t.add(-c,0),n=r.intersectsBounds(t,{inclusive:e.inclusive})):h&&!f&&(r=r.add(-c,0),n=t.intersectsBounds(r,{inclusive:e.inclusive}))}return n}},{key:"containsBounds",value:function(t,e,r){null==e&&(e=!1),null==r&&(r=!0);var n=this.contains(t.left,t.bottom,r),o=this.contains(t.right,t.bottom,r),i=this.contains(t.left,t.top,r),a=this.contains(t.right,t.top,r);return e?n||o||i||a:n&&o&&i&&a}},{key:"determineQuadrant",value:function(t){var e="",r=this.getCenterLonLat();return e+=t.lat<r.lat?"b":"t",e+=t.lon<r.lon?"l":"r"}},{key:"wrapDateLine",value:function(t,e){var r=(e=e||{}).leftTolerance||0,n=e.rightTolerance||0,o=this.clone();if(t){for(var i=t.getWidth();o.left<t.left&&o.right-n<=t.left;)o=o.add(i,0);for(;o.left+r>=t.right&&o.right>t.right;)o=o.add(-i,0);var a=o.left+r;a<t.right&&a>t.left&&o.right-n>t.right&&(o=o.add(-i,0))}return o}},{key:"toServerJSONObject",value:function(){return{rightTop:{x:this.right,y:this.top},leftBottom:{x:this.left,y:this.bottom},left:this.left,right:this.right,top:this.top,bottom:this.bottom}}},{key:"destroy",value:function(){this.left=null,this.right=null,this.top=null,this.bottom=null,this.centerLonLat=null}}])&&Bt(e.prototype,r),n&&Bt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,r,n}();function Ut(t){"@babel/helpers - typeof";return(Ut="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function zt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Vt(n.key),n)}}function Vt(t){var e=function(t,e){if("object"!=Ut(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Ut(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Ut(e)?e:e+""}function Ht(t,e,r){return e=qt(e),function(t,e){if(e&&("object"===Ut(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],qt(t).constructor):e.apply(t,r))}function Wt(){return(Wt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=qt(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function qt(t){return(qt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Yt(t,e){return(Yt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Xt=function(t){function e(t,r,n,o){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(i=Ht(this,e,[t,r,n,o])).x=parseFloat(t),i.y=parseFloat(r),i.tag=o||0==o?parseFloat(o):null,i.type=n||"Point",i.CLASS_NAME="SuperMap.Geometry.Point",i.geometryType="Point",i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Yt(t,e)}(e,L),r=e,(n=[{key:"clone",value:function(t){return null==t&&(t=new e(this.x,this.y)),W.applyDefaults(t,this),t}},{key:"calculateBounds",value:function(){this.bounds=new Gt(this.x,this.y,this.x,this.y)}},{key:"equals",value:function(t){var e=!1;return null!=t&&(e=this.x===t.x&&this.y===t.y||isNaN(this.x)&&isNaN(this.y)&&isNaN(t.x)&&isNaN(t.y)),e}},{key:"move",value:function(t,e){this.x=this.x+t,this.y=this.y+e,this.clearBounds()}},{key:"toShortString",value:function(){return this.x+", "+this.y}},{key:"destroy",value:function(){this.x=null,this.y=null,this.tag=null,Wt(qt(e.prototype),"destroy",this).call(this)}},{key:"getVertices",value:function(){return[this]}}])&&zt(r.prototype,n),o&&zt(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function Jt(t){"@babel/helpers - typeof";return(Jt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Kt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Qt(n.key),n)}}function Qt(t){var e=function(t,e){if("object"!=Jt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Jt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Jt(e)?e:e+""}function Zt(t,e,r){return e=te(e),function(t,e){if(e&&("object"===Jt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],te(t).constructor):e.apply(t,r))}function $t(){return($t="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=te(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function te(t){return(te=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ee(t,e){return(ee=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var re=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=Zt(this,e)).components=[],r.componentTypes=null,null!=t&&r.addComponents(t),r.CLASS_NAME="SuperMap.Geometry.Collection",r.geometryType="Collection",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ee(t,e)}(e,L),r=e,(n=[{key:"destroy",value:function(){this.components.length=0,this.components=null,$t(te(e.prototype),"destroy",this).call(this)}},{key:"clone",value:function(){for(var t=new e,r=0,n=this.components.length;r<n;r++)t.addComponent(this.components[r].clone());return W.applyDefaults(t,this),t}},{key:"getComponentsString",value:function(){for(var t=[],e=0,r=this.components.length;e<r;e++)t.push(this.components[e].toShortString());return t.join(",")}},{key:"calculateBounds",value:function(){this.bounds=null;var t=new Gt,e=this.components;if(e)for(var r=0,n=e.length;r<n;r++)t.extend(e[r].getBounds());null!=t.left&&null!=t.bottom&&null!=t.right&&null!=t.top&&this.setBounds(t)}},{key:"addComponents",value:function(t){W.isArray(t)||(t=[t]);for(var e=0,r=t.length;e<r;e++)this.addComponent(t[e])}},{key:"addComponent",value:function(t,e){var r=!1;if(t&&(null==this.componentTypes||W.indexOf(this.componentTypes,t.CLASS_NAME)>-1)){if(null!=e&&e<this.components.length){var n=this.components.slice(0,e),o=this.components.slice(e,this.components.length);n.push(t),this.components=n.concat(o)}else this.components.push(t);t.parent=this,this.clearBounds(),r=!0}return r}},{key:"removeComponents",value:function(t){var e=!1;W.isArray(t)||(t=[t]);for(var r=t.length-1;r>=0;--r)e=this.removeComponent(t[r])||e;return e}},{key:"removeComponent",value:function(t){return W.removeItem(this.components,t),this.clearBounds(),!0}},{key:"getArea",value:function(){for(var t=0,e=0,r=this.components.length;e<r;e++)t+=this.components[e].getArea();return t}},{key:"equals",value:function(t){var e=!0;if(t&&t.CLASS_NAME&&this.CLASS_NAME===t.CLASS_NAME)if(W.isArray(t.components)&&t.components.length===this.components.length){for(var r=0,n=this.components.length;r<n;++r)if(!this.components[r].equals(t.components[r])){e=!1;break}}else e=!1;else e=!1;return e}},{key:"getVertices",value:function(t){for(var e=[],r=0,n=this.components.length;r<n;++r)Array.prototype.push.apply(e,this.components[r].getVertices(t));return e}}])&&Kt(r.prototype,n),o&&Kt(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function ne(t){"@babel/helpers - typeof";return(ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function oe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ie(n.key),n)}}function ie(t){var e=function(t,e){if("object"!=ne(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=ne(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ne(e)?e:e+""}function ae(t,e,r){return e=se(e),function(t,e){if(e&&("object"===ne(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],se(t).constructor):e.apply(t,r))}function se(t){return(se=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ue(t,e){return(ue=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var le=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=ae(this,e,[t])).componentTypes=["SuperMap.Geometry.Point"],r.CLASS_NAME="SuperMap.Geometry.MultiPoint",r.geometryType="MultiPoint",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ue(t,e)}(e,re),r=e,(n=[{key:"addPoint",value:function(t,e){this.addComponent(t,e)}},{key:"removePoint",value:function(t){this.removeComponent(t)}}])&&oe(r.prototype,n),o&&oe(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function ce(t){"@babel/helpers - typeof";return(ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function fe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,he(n.key),n)}}function he(t){var e=function(t,e){if("object"!=ce(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=ce(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ce(e)?e:e+""}function pe(t,e,r){return e=de(e),function(t,e){if(e&&("object"===ce(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],de(t).constructor):e.apply(t,r))}function de(t){return(de=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ye(t,e){return(ye=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var ve=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=pe(this,e,[t])).componentTypes=["SuperMap.Geometry.Point","SuperMap.PointWithMeasure"],r.CLASS_NAME="SuperMap.Geometry.Curve",r.geometryType="Curve",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ye(t,e)}(e,le),r=e,n&&fe(r.prototype,n),o&&fe(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function ge(t){"@babel/helpers - typeof";return(ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function me(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,be(n.key),n)}}function be(t){var e=function(t,e){if("object"!=ge(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=ge(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ge(e)?e:e+""}function we(t,e,r){return e=xe(e),function(t,e){if(e&&("object"===ge(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],xe(t).constructor):e.apply(t,r))}function Se(){return(Se="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=xe(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function xe(t){return(xe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _e(t,e){return(_e=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Ee=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=we(this,e,[t])).CLASS_NAME="SuperMap.Geometry.LineString",r.geometryType="LineString",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_e(t,e)}(e,ve),r=e,o=[{key:"calculateCircle",value:function(t){if(t.length<3)return t;var e={},r=t[0],n=t[1],o=t[2],i=0,a=0,s=!0,u=0,l=0,c=0,f=[],h=(o.y-r.y)/(o.x-r.x),p=o.y-h*o.x;if(o.x!=r.x&&o.y!=r.y&&n.y==h*n.x+p||o.x==r.x&&n.x==r.x||o.y==r.y&&n.y==r.y||o.x==r.x&&o.y==r.y||o.x==n.x&&o.y==n.y||r.x==n.x&&r.y==n.y)f.push(r),f.push(n),f.push(o);else{var d=(n.x*n.x+n.y*n.y-(r.x*r.x+r.y*r.y))*(2*(o.y-r.y))-(o.x*o.x+o.y*o.y-(r.x*r.x+r.y*r.y))*(2*(n.y-r.y)),y=2*(n.x-r.x)*(o.x*o.x+o.y*o.y-(r.x*r.x+r.y*r.y))-2*(o.x-r.x)*(n.x*n.x+n.y*n.y-(r.x*r.x+r.y*r.y)),v=4*((n.x-r.x)*(o.y-r.y)-(o.x-r.x)*(n.y-r.y));e.x=d/v,e.y=y/v;var g=(2*(i=Math.sqrt((r.x-e.x)*(r.x-e.x)+(r.y-e.y)*(r.y-e.y)))*i-((r.x-o.x)*(r.x-o.x)+(r.y-o.y)*(r.y-o.y)))/(2*i*i);g=(g=g>=1?1:g)<=-1?-1:g,c=180*Math.acos(g)/Math.PI,a=(c=o.x==r.x?e.x>r.x&&n.x>r.x||e.x<r.x&&n.x<r.x?360-c:c:e.y>h*e.x+p&&n.y>h*n.x+p||e.y<h*e.x+p&&n.y<h*n.x+p?360-c:c)/72,o.y!=r.y?o.x==r.x?o.y>r.y?n.x<r.x&&(s=!1):n.x>r.x&&(s=!1):o.x<r.x?n.y<h*n.x+p&&(s=!1):n.y>h*n.x+p&&(s=!1):o.x>r.x?n.y>r.y&&(s=!1):n.y<r.y&&(s=!1);var m=(r.y-e.y)/(r.x-e.x),b=m>=0?180*Math.atan(m)/Math.PI:Math.abs(180*Math.atan(m)/Math.PI)+90,w=Math.abs(e.y);r.y==w&&w==o.y&&r.x<o.x&&(b+=180);var S=r.y-e.y;f.push(r);for(var x=1;x<72;x++){u=a*x,l=b,s?S>=0?m>=0?l+=u:l=180-(l-90)+u:l=m>0?l-180+u:90-l+u:S>=0?m>=0?l-=u:l=180-(l-90)-u:l=m>=0?l-180-u:90-l-u,l=l*Math.PI/180;var _=e.x+i*Math.cos(l),E=e.y+i*Math.sin(l);f.push(new Xt(_,E))}f.push(o)}return f}},{key:"createLineEPS",value:function(t){var r=[],n=t.length;if(n<2)return t;for(var o=0;o<n;){if("LTypeArc"==t[o].type){var i=e.createLineArc(r,o,n,t);r=i[0],o=i[1]}else r.push(t[o]),o++}return r}},{key:"createLineArc",value:function(t,r,n,o){if(0==r){var i=e.addPointEPS(o,r,n,"LTypeArc");Array.prototype.push.apply(t,i[0]),r=i[1]+1}else if(r==n-1){var a=[o[r-1],o[r]],s=e.calculateCircle(a);Array.prototype.push.apply(t,s),r++}else{var u=e.addPointEPS(o,r,n,"LTypeArc");t.pop(),Array.prototype.push.apply(t,u[0]),r=u[1]+1}return[t,r]}},{key:"addPointEPS",value:function(t,r,n,o){var i,a=[],s=r+1;return 0==r?Array.prototype.push.apply(a,[t[r],t[r+1]]):r==n-1?Array.prototype.push.apply(a,[t[r-1],t[r]]):Array.prototype.push.apply(a,[t[r-1],t[r],t[r+1]]),"LTypeCurve"==o?i=e.calculatePointsFBZN(a):"LTypeArc"==o&&(i=e.calculateCircle(a)),[i,s]}}],(n=[{key:"removeComponent",value:function(t){var r=this.components&&this.components.length>2;return r&&Se(xe(e.prototype),"removeComponent",this).apply(this,arguments),r}},{key:"getSortedSegments",value:function(){for(var t,e,r=this.components.length-1,n=new Array(r),o=0;o<r;++o)t=this.components[o],e=this.components[o+1],t.x<e.x?n[o]={x1:t.x,y1:t.y,x2:e.x,y2:e.y}:n[o]={x1:e.x,y1:e.y,x2:t.x,y2:t.y};return n.sort(function(t,e){return t.x1-e.x1})}},{key:"getVertices",value:function(t){return!0===t?[this.components[0],this.components[this.components.length-1]]:!1===t?this.components.slice(1,this.components.length-1):this.components.slice()}}])&&me(r.prototype,n),o&&me(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function Oe(t){"@babel/helpers - typeof";return(Oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Pe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ke(n.key),n)}}function ke(t){var e=function(t,e){if("object"!=Oe(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Oe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Oe(e)?e:e+""}function Ce(t,e,r){return e=Ae(e),function(t,e){if(e&&("object"===Oe(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Ae(t).constructor):e.apply(t,r))}function Te(){return(Te="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ae(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Ae(t){return(Ae=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Me(t,e){return(Me=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var je=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=Ce(this,e,[t])).componentTypes=["SuperMap.Geometry.Point"],r.CLASS_NAME="SuperMap.Geometry.LinearRing",r.geometryType="LinearRing",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Me(t,e)}(e,Ee),r=e,(n=[{key:"addComponent",value:function(t,r){var n=!1,o=this.components.pop();null==r&&t.equals(o)||(n=Te(Ae(e.prototype),"addComponent",this).apply(this,arguments));var i=this.components[0];return Te(Ae(e.prototype),"addComponent",this).apply(this,[i]),n}},{key:"removeComponent",value:function(t){var r=this.components&&this.components.length>3;if(r){this.components.pop(),Te(Ae(e.prototype),"removeComponent",this).apply(this,arguments);var n=this.components[0];Te(Ae(e.prototype),"addComponent",this).apply(this,[n])}return r}},{key:"getArea",value:function(){var t=0;if(this.components&&this.components.length>2){for(var e=0,r=0,n=this.components.length;r<n-1;r++){var o=this.components[r],i=this.components[r+1];e+=(o.x+i.x)*(i.y-o.y)}t=-e/2}return t}},{key:"getVertices",value:function(t){return!0===t?[]:this.components.slice(0,this.components.length-1)}}])&&Pe(r.prototype,n),o&&Pe(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function Ie(t){"@babel/helpers - typeof";return(Ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ne(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Le(n.key),n)}}function Le(t){var e=function(t,e){if("object"!=Ie(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Ie(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Ie(e)?e:e+""}function Re(t,e,r){return e=De(e),function(t,e){if(e&&("object"===Ie(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],De(t).constructor):e.apply(t,r))}function De(t){return(De=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Be(t,e){return(Be=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Fe=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=Re(this,e,[t])).componentTypes=["SuperMap.Geometry.LinearRing"],r.CLASS_NAME="SuperMap.Geometry.Polygon",r.geometryType="Polygon",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Be(t,e)}(e,re),r=e,(n=[{key:"getArea",value:function(){var t=0;if(this.components&&this.components.length>0){t+=Math.abs(this.components[0].getArea());for(var e=1,r=this.components.length;e<r;e++)t-=Math.abs(this.components[e].getArea())}return t}}])&&Ne(r.prototype,n),o&&Ne(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function Ge(t){"@babel/helpers - typeof";return(Ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ue(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ze(n.key),n)}}function ze(t){var e=function(t,e){if("object"!=Ge(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Ge(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Ge(e)?e:e+""}var Ve=function(){return t=function t(e,r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.CLASS_NAME="SuperMap.Feature",this.layer=e,this.id=W.createUniqueID(this.CLASS_NAME+"_"),this.lonlat=r,this.data=null!=n?n:{}},(e=[{key:"destroy",value:function(){this.id=null,this.lonlat=null,this.data=null}}])&&Ue(t.prototype,e),r&&Ue(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function He(t){"@babel/helpers - typeof";return(He="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function We(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,qe(n.key),n)}}function qe(t){var e=function(t,e){if("object"!=He(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=He(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==He(e)?e:e+""}function Ye(t,e,r){return e=Je(e),function(t,e){if(e&&("object"===He(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Je(t).constructor):e.apply(t,r))}function Xe(){return(Xe="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Je(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Je(t){return(Je=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ke(t,e){return(Ke=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Qe="Unknown",Ze="Insert",$e="Update",tr="Delete",er=function(t){function e(t,r,n){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(o=Ye(this,e,[null,null,r])).fid=null,o.geometry=t||null,o.attributes={},r&&(o.attributes=W.extend(o.attributes,r)),o.bounds=null,o.state=null,o.style=n||null,o.url=null,o.lonlat=null,o.CLASS_NAME="SuperMap.Feature.Vector",e.style={default:{fillColor:"#ee9900",fillOpacity:.4,hoverFillColor:"white",hoverFillOpacity:.8,strokeColor:"#ee9900",strokeOpacity:1,strokeWidth:1,strokeLinecap:"round",strokeDashstyle:"solid",hoverStrokeColor:"red",hoverStrokeOpacity:1,hoverStrokeWidth:.2,pointRadius:6,hoverPointRadius:1,hoverPointUnit:"%",pointerEvents:"visiblePainted",cursor:"inherit",fontColor:"#000000",labelAlign:"cm",labelOutlineColor:"white",labelOutlineWidth:3},select:{fillColor:"blue",fillOpacity:.4,hoverFillColor:"white",hoverFillOpacity:.8,strokeColor:"blue",strokeOpacity:1,strokeWidth:2,strokeLinecap:"round",strokeDashstyle:"solid",hoverStrokeColor:"red",hoverStrokeOpacity:1,hoverStrokeWidth:.2,pointRadius:6,hoverPointRadius:1,hoverPointUnit:"%",pointerEvents:"visiblePainted",cursor:"pointer",fontColor:"#000000",labelAlign:"cm",labelOutlineColor:"white",labelOutlineWidth:3},temporary:{fillColor:"#66cccc",fillOpacity:.2,hoverFillColor:"white",hoverFillOpacity:.8,strokeColor:"#66cccc",strokeOpacity:1,strokeLinecap:"round",strokeWidth:2,strokeDashstyle:"solid",hoverStrokeColor:"red",hoverStrokeOpacity:1,hoverStrokeWidth:.2,pointRadius:6,hoverPointRadius:1,hoverPointUnit:"%",pointerEvents:"visiblePainted",cursor:"default",fontColor:"#000000",labelAlign:"cm",labelOutlineColor:"white",labelOutlineWidth:3},delete:{display:"none"}},o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ke(t,e)}(e,Ve),r=e,(n=[{key:"destroy",value:function(){this.layer&&(this.layer.removeFeatures(this),this.layer=null),this.geometry=null,Xe(Je(e.prototype),"destroy",this).call(this)}},{key:"clone",value:function(){return new e(this.geometry?this.geometry.clone():null,this.attributes,this.style)}},{key:"toState",value:function(t){if(t===$e)switch(this.state){case Qe:case tr:this.state=t}else if(t===Ze)switch(this.state){case Qe:break;default:this.state=t}else if(t===tr)switch(this.state){case Ze:case tr:break;case Qe:case $e:this.state=t}else t===Qe&&(this.state=t)}}])&&We(r.prototype,n),o&&We(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function rr(t){"@babel/helpers - typeof";return(rr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function nr(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,or(n.key),n)}}function or(t){var e=function(t,e){if("object"!=rr(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=rr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==rr(e)?e:e+""}var ir=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.data=null,this.keepData=!1,W.extend(this,e),this.options=e,this.CLASS_NAME="SuperMap.Format"},(e=[{key:"destroy",value:function(){}},{key:"read",value:function(t){}},{key:"write",value:function(t){}}])&&nr(t.prototype,e),r&&nr(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function ar(t){"@babel/helpers - typeof";return(ar="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function sr(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ur(n.key),n)}}function ur(t){var e=function(t,e){if("object"!=ar(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=ar(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ar(e)?e:e+""}function lr(t,e,r){return e=cr(e),function(t,e){if(e&&("object"===ar(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],cr(t).constructor):e.apply(t,r))}function cr(t){return(cr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function fr(t,e){return(fr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var hr=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=lr(this,e,[t])).indent="    ",r.space=" ",r.newline="\n",r.level=0,r.pretty=!1,r.nativeJSON=!(!window.JSON||"function"!=typeof JSON.parse||"function"!=typeof JSON.stringify),r.CLASS_NAME="SuperMap.Format.JSON",r.serialize={object:function(t){if(null==t)return"null";if(t.constructor===Date)return this.serialize.date.apply(this,[t]);if(t.constructor===Array)return this.serialize.array.apply(this,[t]);var e,r,n,o=["{"];this.level+=1;var i=!1;for(e in t)t.hasOwnProperty(e)&&(r=this.write.apply(this,[e,this.pretty]),n=this.write.apply(this,[t[e],this.pretty]),null!=r&&null!=n&&(i&&o.push(","),o.push(this.writeNewline(),this.writeIndent(),r,":",this.writeSpace(),n),i=!0));return this.level-=1,o.push(this.writeNewline(),this.writeIndent(),"}"),o.join("")},array:function(t){var e,r=["["];this.level+=1;for(var n=0,o=t.length;n<o;++n)null!=(e=this.write.apply(this,[t[n],this.pretty]))&&(n>0&&r.push(","),r.push(this.writeNewline(),this.writeIndent(),e));return this.level-=1,r.push(this.writeNewline(),this.writeIndent(),"]"),r.join("")},string:function(t){var e={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};return/["\\\x00-\x1f]/.test(t)?'"'+t.replace(/([\x00-\x1f\\"])/g,function(t,r){var n=e[r];return n||(n=r.charCodeAt(),"\\u00"+Math.floor(n/16).toString(16)+(n%16).toString(16))})+'"':'"'+t+'"'},number:function(t){return isFinite(t)?String(t):"null"},boolean:function(t){return String(t)},date:function(t){function e(t){return t<10?"0"+t:t}return'"'+t.getFullYear()+"-"+e(t.getMonth()+1)+"-"+e(t.getDate())+"T"+e(t.getHours())+":"+e(t.getMinutes())+":"+e(t.getSeconds())+'"'}},r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&fr(t,e)}(e,ir),r=e,(n=[{key:"read",value:function(t,e){var r;if(this.nativeJSON)try{r=JSON.parse(t,e)}catch(e){return{data:t}}return this.keepData&&(this.data=r),r}},{key:"write",value:function(t,e){this.pretty=!!e;var r=null,n=ar(t);if(this.serialize[n])try{r=!this.pretty&&this.nativeJSON?JSON.stringify(t):this.serialize[n].apply(this,[t])}catch(t){}return r}},{key:"writeIndent",value:function(){var t=[];if(this.pretty)for(var e=0;e<this.level;++e)t.push(this.indent);return t.join("")}},{key:"writeNewline",value:function(){return this.pretty?this.newline:""}},{key:"writeSpace",value:function(){return this.pretty?this.space:""}}])&&sr(r.prototype,n),o&&sr(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function pr(t){"@babel/helpers - typeof";return(pr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function dr(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,yr(n.key),n)}}function yr(t){var e=function(t,e){if("object"!=pr(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=pr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==pr(e)?e:e+""}function vr(t,e,r){return e=gr(e),function(t,e){if(e&&("object"===pr(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],gr(t).constructor):e.apply(t,r))}function gr(t){return(gr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function mr(t,e){return(mr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var br=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=vr(this,e,[t])).componentTypes=["SuperMap.Geometry.LineString"],r.CLASS_NAME="SuperMap.Geometry.MultiLineString",r.geometryType="MultiLineString",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&mr(t,e)}(e,re),r=e,n&&dr(r.prototype,n),o&&dr(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function wr(t){"@babel/helpers - typeof";return(wr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Sr(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,xr(n.key),n)}}function xr(t){var e=function(t,e){if("object"!=wr(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=wr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==wr(e)?e:e+""}function _r(t,e,r){return e=Er(e),function(t,e){if(e&&("object"===wr(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Er(t).constructor):e.apply(t,r))}function Er(t){return(Er=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Or(t,e){return(Or=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Pr=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=_r(this,e,[t])).componentTypes=["SuperMap.Geometry.Polygon"],r.CLASS_NAME="SuperMap.Geometry.MultiPolygon",r.geometryType="MultiPolygon",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Or(t,e)}(e,re),r=e,n&&Sr(r.prototype,n),o&&Sr(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function kr(t){"@babel/helpers - typeof";return(kr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Cr(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Tr(n.key),n)}}function Tr(t){var e=function(t,e){if("object"!=kr(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=kr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==kr(e)?e:e+""}var Ar=function(){function t(e,r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.red=e||0==e?e:255,this.green=r||0,this.blue=n||0,this.CLASS_NAME="SuperMap.ServerColor"}return e=t,n=[{key:"fromJson",value:function(e){if(e){var r=new t,n=255;null!==e.red&&(n=Number(e.red)),r.red=n;var o=0;null!==e.green&&(o=Number(e.green)),r.green=o;var i=0;return null!==e.blue&&(i=Number(e.blue)),r.blue=i,r}}}],(r=[{key:"destroy",value:function(){this.red=null,this.green=null,this.blue=null}}])&&Cr(e.prototype,r),n&&Cr(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,r,n}();function Mr(t){"@babel/helpers - typeof";return(Mr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function jr(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ir(n.key),n)}}function Ir(t){var e=function(t,e){if("object"!=Mr(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Mr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Mr(e)?e:e+""}var Nr=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.fillBackColor=new Ar(255,255,255),this.fillBackOpaque=!1,this.fillForeColor=new Ar(255,0,0),this.fillGradientMode=null,this.fillGradientAngle=0,this.fillGradientOffsetRatioX=0,this.fillGradientOffsetRatioY=0,this.fillOpaqueRate=100,this.fillSymbolID=0,this.lineColor=new Ar(0,0,0),this.lineSymbolID=0,this.lineWidth=1,this.markerAngle=0,this.markerSize=1,this.markerSymbolID=-1,e&&W.extend(this,e),this.CLASS_NAME="SuperMap.ServerStyle"}return e=t,n=[{key:"fromJson",value:function(e){if(e)return new t({fillBackColor:Ar.fromJson(e.fillBackColor),fillBackOpaque:e.fillBackOpaque,fillForeColor:Ar.fromJson(e.fillForeColor),fillGradientMode:e.fillGradientMode,fillGradientAngle:e.fillGradientAngle,fillGradientOffsetRatioX:e.fillGradientOffsetRatioX,fillGradientOffsetRatioY:e.fillGradientOffsetRatioY,fillOpaqueRate:e.fillOpaqueRate,fillSymbolID:e.fillSymbolID,lineColor:Ar.fromJson(e.lineColor),lineSymbolID:e.lineSymbolID,lineWidth:e.lineWidth,markerAngle:e.markerAngle,markerSize:e.markerSize,markerSymbolID:e.markerSymbolID})}}],(r=[{key:"destroy",value:function(){var t=this;t.fillBackColor&&(t.fillBackColor.destroy(),t.fillBackColor=null),t.fillBackOpaque=null,t.fillForeColor&&(t.fillForeColor.destroy(),t.fillForeColor=null),t.fillGradientMode=null,t.fillGradientAngle=null,t.fillGradientOffsetRatioX=null,t.fillGradientOffsetRatioY=null,t.fillOpaqueRate=null,t.fillSymbolID=null,t.lineColor&&(t.lineColor.destroy(),t.lineColor=null),t.lineSymbolID=null,t.lineWidth=null,t.markerAngle=null,t.markerSize=null,t.markerSymbolID=null}},{key:"toServerJSONObject",value:function(){var t={};return t=W.copyAttributes(t,this)}}])&&jr(e.prototype,r),n&&jr(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,r,n}();function Lr(t){"@babel/helpers - typeof";return(Lr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Rr(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Dr(n.key),n)}}function Dr(t){var e=function(t,e){if("object"!=Lr(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Lr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Lr(e)?e:e+""}function Br(t,e,r){return e=Fr(e),function(t,e){if(e&&("object"===Lr(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Fr(t).constructor):e.apply(t,r))}function Fr(t){return(Fr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Gr(t,e){return(Gr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Ur=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=Br(this,e,[t])).measure=null,t&&W.extend(r,t),r.CLASS_NAME="SuperMap.PointWithMeasure",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Gr(t,e)}(e,Xt),r=e,o=[{key:"fromJson",value:function(t){if(t)return new e({x:t.x,y:t.y,measure:t.measure})}}],(n=[{key:"equals",value:function(t){var e=!1;if(null!=t){var r=this.x===t.x&&this.y===t.y&&this.measure===t.measure,n=isNaN(this.x)&&isNaN(this.y)&&isNaN(this.measure),o=isNaN(t.x)&&isNaN(t.y)&&isNaN(t.measure);e=r||n&&o}return e}},{key:"toJson",value:function(){var t="{";return null!=this.measure&&void 0!=this.measure&&(t+='"measure":'+this.measure+","),t+='"x":'+this.x+",",t+='"y":'+this.y,t+="}"}},{key:"destroy",value:function(){this.measure=null,this.x=null,this.y=null}}])&&Rr(r.prototype,n),o&&Rr(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function zr(t){"@babel/helpers - typeof";return(zr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Vr(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Hr(n.key),n)}}function Hr(t){var e=function(t,e){if("object"!=zr(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=zr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==zr(e)?e:e+""}function Wr(t,e,r){return e=qr(e),function(t,e){if(e&&("object"===zr(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],qr(t).constructor):e.apply(t,r))}function qr(t){return(qr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Yr(t,e){return(Yr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Xr=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Wr(this,e,[t,r])).id=null,n.center=null,n.style=null,n.length=null,n.maxM=null,n.minM=null,n.parts=null,n.points=null,n.type=null,n.componentTypes=["SuperMap.Geometry.LinearRing","SuperMap.Geometry.LineString"],r&&W.extend(n,r),n.CLASS_NAME="SuperMap.Route",n.geometryType="LINEM",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Yr(t,e)}(e,re),r=e,o=[{key:"fromJson",value:function(t){if(t){var r=t.parts||[],n=t.points||[],o=r.length,i=[];if(!(o>0))return null;for(var a=0,s=0,u=[];a<o;a++){for(var l=0;l<r[a];l++)u.push(Ur.fromJson(n[s+l]));s+=r[a],u[0].equals(u[r[a]-1])?i.push(new je(u)):i.push(new Ee(u)),u=[]}return new e(i,{id:t.id,center:t.center,style:t.style,length:t.length,maxM:t.maxM,minM:t.minM,type:t.type,parts:t.parts})}}}],(n=[{key:"toJson",value:function(){var t="{";if(null!=this.id&&void 0!=this.id&&(t+='"id":'+this.id+","),null!=this.center&&void 0!=this.center&&(t+='"center":'+this.center+","),null!=this.style&&void 0!=this.style&&(t+='"style":'+this.style+","),null!=this.length&&void 0!=this.length&&(t+='"length":'+this.length+","),null!=this.maxM&&void 0!=this.maxM&&(t+='"maxM":'+this.maxM+","),null!=this.minM&&void 0!=this.minM&&(t+='"minM":'+this.minM+","),null!=this.type&&void 0!=this.type&&(t+='"type":"'+this.type+'",'),null!=this.parts&&void 0!=this.parts){t+='"parts":['+this.parts[0];for(var e=1;e<this.parts.length;e++)t+=","+this.parts[e];t+="],"}if(null!=this.components&&this.components.length>0){t+='"points":[';for(var r=0,n=this.components.length;r<n;r++)for(var o=0,i=this.components[r].components.length;o<i;o++)t+=this.components[r].components[o].toJson()+",";t=t.replace(/,$/g,""),t+="]"}return t=t.replace(/,$/g,""),t+="}"}},{key:"destroy",value:function(){var t=this;t.id=null,t.center=null,t.style=null,t.length=null,t.maxM=null,t.minM=null,t.type=null,t.parts=null,t.components.length=0,t.components=null,t.componentTypes=null}}])&&Vr(r.prototype,n),o&&Vr(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}(),Jr={GEOJSON:"GEOJSON",ISERVER:"ISERVER",FGB:"FGB"},Kr={ISERVER:"ISERVER",IPORTAL:"IPORTAL",ONLINE:"ONLINE"},Qr={LINE:"LINE",LINEM:"LINEM",POINT:"POINT",REGION:"REGION",POINTEPS:"POINTEPS",LINEEPS:"LINEEPS",REGIONEPS:"REGIONEPS",ELLIPSE:"ELLIPSE",CIRCLE:"CIRCLE",TEXT:"TEXT",RECTANGLE:"RECTANGLE",UNKNOWN:"UNKNOWN",GEOCOMPOUND:"GEOCOMPOUND"},Zr={ATTRIBUTE:"ATTRIBUTE",ATTRIBUTEANDGEOMETRY:"ATTRIBUTEANDGEOMETRY",GEOMETRY:"GEOMETRY"},$r={CONTAIN:"CONTAIN",CROSS:"CROSS",DISJOINT:"DISJOINT",IDENTITY:"IDENTITY",INTERSECT:"INTERSECT",NONE:"NONE",OVERLAP:"OVERLAP",TOUCH:"TOUCH",WITHIN:"WITHIN"},tn={DISTANCE:"DISTANCE",AREA:"AREA"},en={METER:"METER",KILOMETER:"KILOMETER",MILE:"MILE",YARD:"YARD",DEGREE:"DEGREE",MILLIMETER:"MILLIMETER",CENTIMETER:"CENTIMETER",INCH:"INCH",DECIMETER:"DECIMETER",FOOT:"FOOT",SECOND:"SECOND",MINUTE:"MINUTE",RADIAN:"RADIAN"},rn={CENTIMETER:"CENTIMETER",DECIMETER:"DECIMETER",FOOT:"FOOT",INCH:"INCH",KILOMETER:"KILOMETER",METER:"METER",MILE:"MILE",MILLIMETER:"MILLIMETER",YARD:"YARD"},nn={CAPTION:"CAPTION",CAPTION_PERCENT:"CAPTION_PERCENT",CAPTION_VALUE:"CAPTION_VALUE",PERCENT:"PERCENT",VALUE:"VALUE"},on={AREA:"AREA",BAR:"BAR",BAR3D:"BAR3D",LINE:"LINE",PIE:"PIE",PIE3D:"PIE3D",POINT:"POINT",RING:"RING",ROSE:"ROSE",ROSE3D:"ROSE3D",STACK_BAR:"STACK_BAR",STACK_BAR3D:"STACK_BAR3D",STEP:"STEP"},an={ALL:"ALL",NONE:"NONE",YAXES:"YAXES"},sn={CONSTANT:"CONSTANT",LOGARITHM:"LOGARITHM",SQUAREROOT:"SQUAREROOT"},un={CUSTOMINTERVAL:"CUSTOMINTERVAL",EQUALINTERVAL:"EQUALINTERVAL",LOGARITHM:"LOGARITHM",QUANTILE:"QUANTILE",SQUAREROOT:"SQUAREROOT",STDDEVIATION:"STDDEVIATION"},ln={BLACK_WHITE:"BLACKWHITE",BLUE_BLACK:"BLUEBLACK",BLUE_RED:"BLUERED",BLUE_WHITE:"BLUEWHITE",CYAN_BLACK:"CYANBLACK",CYAN_BLUE:"CYANBLUE",CYAN_GREEN:"CYANGREEN",CYAN_WHITE:"CYANWHITE",GREEN_BLACK:"GREENBLACK",GREEN_BLUE:"GREENBLUE",GREEN_ORANGE_VIOLET:"GREENORANGEVIOLET",GREEN_RED:"GREENRED",GREEN_WHITE:"GREENWHITE",PINK_BLACK:"PINKBLACK",PINK_BLUE:"PINKBLUE",PINK_RED:"PINKRED",PINK_WHITE:"PINKWHITE",RAIN_BOW:"RAINBOW",RED_BLACK:"REDBLACK",RED_WHITE:"REDWHITE",SPECTRUM:"SPECTRUM",TERRAIN:"TERRAIN",YELLOW_BLACK:"YELLOWBLACK",YELLOW_BLUE:"YELLOWBLUE",YELLOW_GREEN:"YELLOWGREEN",YELLOW_RED:"YELLOWRED",YELLOW_WHITE:"YELLOWWHITE"},cn={TOPLEFT:"TOPLEFT",TOPCENTER:"TOPCENTER",TOPRIGHT:"TOPRIGHT",BASELINELEFT:"BASELINELEFT",BASELINECENTER:"BASELINECENTER",BASELINERIGHT:"BASELINERIGHT",BOTTOMLEFT:"BOTTOMLEFT",BOTTOMCENTER:"BOTTOMCENTER",BOTTOMRIGHT:"BOTTOMRIGHT",MIDDLELEFT:"MIDDLELEFT",MIDDLECENTER:"MIDDLECENTER",MIDDLERIGHT:"MIDDLERIGHT"},fn={NORMAL:"ALONG_LINE_NORMAL",LB_TO_RT:"LEFT_BOTTOM_TO_RIGHT_TOP",LT_TO_RB:"LEFT_TOP_TO_RIGHT_BOTTOM",RB_TO_LT:"RIGHT_BOTTOM_TO_LEFT_TOP",RT_TO_LB:"RIGHT_TOP_TO_LEFT_BOTTOM"},hn={DIAMOND:"DIAMOND",ELLIPSE:"ELLIPSE",MARKER:"MARKER",NONE:"NONE",RECT:"RECT",ROUNDRECT:"ROUNDRECT",TRIANGLE:"TRIANGLE"},pn={NEWLINE:"NEWLINE",NONE:"NONE",OMIT:"OMIT"},dn={FLAT:"FLAT",ROUND:"ROUND"},yn={CLIP:"CLIP",ERASE:"ERASE",IDENTITY:"IDENTITY",INTERSECT:"INTERSECT",UNION:"UNION",UPDATE:"UPDATE",XOR:"XOR"},vn={INDEXEDHDFS:"INDEXEDHDFS",UDB:"UDB",MONGODB:"MONGODB",PG:"PG"},gn={BSPLINE:"BSPLINE",POLISH:"POLISH"},mn={ISOLINE:"ISOLINE",ISOREGION:"ISOREGION"},bn={DATASET_AND_RECORDSET:"DATASET_AND_RECORDSET",DATASET_ONLY:"DATASET_ONLY",RECORDSET_ONLY:"RECORDSET_ONLY"},wn={ADD:"add",UPDATE:"update",DELETE:"delete"},Sn={LESS_TIME:"LESS_TIME",LESS_TRANSFER:"LESS_TRANSFER",LESS_WALK:"LESS_WALK",MIN_DISTANCE:"MIN_DISTANCE"},xn={BUS:"BUS",SUBWAY:"SUBWAY",NO_SUBWAY:"NO_SUBWAY",NONE:"NONE"},_n={EXPONENTIAL:"EXPONENTIAL",GAUSSIAN:"GAUSSIAN",SPHERICAL:"SPHERICAL"},En={EXP1:"EXP1",EXP2:"EXP2"},On={IP:"IP",REFERER:"Referer",REQUESTIP:"RequestIP",NONE:"NONE",SERVER:"SERVER",WEB:"WEB"},Pn={CLIP:"clip",INTERSECT:"intersect"},kn={SQUAREMETER:"SquareMeter",SQUAREKILOMETER:"SquareKiloMeter",HECTARE:"Hectare",ARE:"Are",ACRE:"Acre",SQUAREFOOT:"SquareFoot",SQUAREYARD:"SquareYard",SQUAREMILE:"SquareMile"},Cn={METER:"Meter",KILOMETER:"Kilometer",YARD:"Yard",FOOT:"Foot",MILE:"Mile"},Tn={MAX:"max",MIN:"min",AVERAGE:"average",SUM:"sum",VARIANCE:"variance",STDDEVIATION:"stdDeviation"},An={SUMMARYMESH:"SUMMARYMESH",SUMMARYREGION:"SUMMARYREGION"},Mn={REGIONNOOVERLAP:"REGIONNOOVERLAP",REGIONNOOVERLAPWITH:"REGIONNOOVERLAPWITH",REGIONCONTAINEDBYREGION:"REGIONCONTAINEDBYREGION",REGIONCOVEREDBYREGION:"REGIONCOVEREDBYREGION",LINENOOVERLAP:"LINENOOVERLAP",LINENOOVERLAPWITH:"LINENOOVERLAPWITH",POINTNOIDENTICAL:"POINTNOIDENTICAL"},jn={GEOHASH_GRID:"geohash_grid"},In={AVG:"avg",MAX:"max",MIN:"min",SUM:"sum"},Nn={NDVI:"NDVI",HILLSHADE:"HILLSHADE"},Ln={CUSTOM:"CUSTOM",INTERSECTION:"INTERSECTION",UNION:"UNION"},Rn={CUSTOM:"CUSTOM",MAX:"MAX",MIN:"MIN"},Dn={DAY_BRIGHT:"DAY_BRIGHT",DUSK:"DUSK",NIGHT:"NIGHT"},Bn={BASIC:"BASIC",STANDARD:"STANDARD",OTHER:"OTHER"};function Fn(t){"@babel/helpers - typeof";return(Fn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Gn(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Un(n.key),n)}}function Un(t){var e=function(t,e){if("object"!=Fn(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Fn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Fn(e)?e:e+""}var zn=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=0,this.style=null,this.parts=null,this.points=null,this.type=null,this.prjCoordSys=null,e&&W.extend(this,e),this.CLASS_NAME="SuperMap.ServerGeometry"}return e=t,n=[{key:"fromJson",value:function(e){if(e)return new t({id:e.id,style:Nr.fromJson(e.style),parts:e.parts,partTopo:e.partTopo,points:e.points,center:e.center,length:e.length,maxM:e.maxM,minM:e.minM,type:e.type})}},{key:"fromGeometry",value:function(e){if(e){var r=0,n=[],o=[],i=null,a=e.components,s=e.CLASS_NAME,u={epsgCode:e.SRID};if(isNaN(e.id)||(r=e.id),"SuperMap.Geometry.LinearRing"!=s&&"SuperMap.Geometry.LineString"!=s&&(e instanceof le||e instanceof br)){for(var l=a.length,c=0;c<l;c++){var f=a[c].getVertices(),h=f.length;n.push(h);for(var p=0;p<h;p++)o.push(new Xt(f[p].x,f[p].y))}i="SuperMap.Geometry.MultiPoint"==s?Qr.POINT:Qr.LINE}else if(e instanceof Pr){for(var d=a.length,y=0;y<d;y++)for(var v=a[y].components,g=v.length,m=0;m<g;m++){var b=v[m].getVertices(),w=b.length+1;n.push(w);for(var S=0;S<w-1;S++)o.push(new Xt(b[S].x,b[S].y));o.push(new Xt(b[0].x,b[0].y))}i=Qr.REGION}else if(e instanceof Fe){for(var x=a.length,_=0;_<x;_++){var E=a[_].getVertices(),O=E.length+1;n.push(O);for(var P=0;P<O-1;P++)o.push(new Xt(E[P].x,E[P].y));o.push(new Xt(E[0].x,E[0].y))}i=Qr.REGION}else{for(var k=e.getVertices(),C=k.length,T=0;T<C;T++)o.push(new Xt(k[T].x,k[T].y));e instanceof je&&(o.push(new Xt(k[0].x,k[0].y)),C++),n.push(C),i=e instanceof Xt?Qr.POINT:Qr.LINE}return new t({id:r,style:null,parts:n,points:o,type:i,prjCoordSys:u})}}},{key:"IsClockWise",value:function(t){var e=t.length;if(e<3)return 0;var r=t[0].y*(t[e-1].x-t[1].x);t.push(t[0]);for(var n=1;n<e;n++)r+=t[n].y*(t[n-1].x-t[n+1].x);return.5*r}},{key:"bubbleSort",value:function(t,e,r,n){for(var o=0;o<t.length;o++)for(var i=0;i<t.length;i++)if(t[o]>t[i]){var a=t[i];t[i]=t[o],t[o]=a;var s=e[i];if(e[i]=e[o],e[o]=s,r&&r.length>0){var u=r[i];r[i]=r[o],r[o]=u}if(n&&n.length>0){var l=n[i];n[i]=n[o],n[o]=l}}}}],(r=[{key:"destroy",value:function(){var t=this;t.id=null,t.style=null,t.parts=null,t.partTopo=null,t.points=null,t.type=null,t.prjCoordSys=null}},{key:"toGeometry",value:function(){var t=this;switch(t.type.toUpperCase()){case Qr.POINT:return t.toGeoPoint();case Qr.LINE:return t.toGeoLine();case Qr.LINEM:return t.toGeoLinem();case Qr.REGION:return t.toGeoRegion();case Qr.POINTEPS:return t.toGeoPoint();case Qr.LINEEPS:return t.toGeoLineEPS();case Qr.REGIONEPS:return t.toGeoRegionEPS();case Qr.GEOCOMPOUND:return t.transformGeoCompound()}}},{key:"toGeoPoint",value:function(){var t=this.parts||[],e=this.points||[],r=t.length;if(r>0){if(1===r)return new Xt(e[0].x,e[0].y);for(var n=[],o=0;o<r;o++)n.push(new Xt(e[o].x,e[o].y));return new le(n)}return null}},{key:"toGeoLine",value:function(){var t=this.parts||[],e=this.points||[],r=t.length;if(r>0){if(1===r){for(var n=[],o=0;o<t[0];o++)n.push(new Xt(e[o].x,e[o].y));return n[0].equals(n[t[0]-1])?new je(n):new Ee(n)}for(var i=[],a=0;a<r;a++){for(var s=[],u=0;u<t[a];u++)s.push(new Xt(e[u].x,e[u].y));i.push(new Ee(s)),e.splice(0,t[a])}return new br(i)}return null}},{key:"toGeoLineEPS",value:function(){var t,e,r,n,o,i=this.parts||[],a=this.points||[],s=i.length;if(s>0){if(1===s){for(t=0,r=[];t<i[0];t++)r.push(new Xt(a[t].x,a[t].y,a[t].type));return r[0].equals(r[i[0]-1])?(o=Ee.createLineEPS(r),new je(o)):(o=Ee.createLineEPS(r),new Ee(o))}for(t=0,n=[];t<s;t++){for(e=0,r=[];e<i[t];e++)r.push(new Xt(a[e].x,a[e].y));o=Ee.createLineEPS(r),n.push(new Ee(o)),a.splice(0,i[t])}return new br(n)}return null}},{key:"toGeoLinem",value:function(){return Xr.fromJson(this)}},{key:"toGeoRegion",value:function(){var e=this.parts||[],r=this.partTopo||[],n=this.points||[],o=e.length;if(o<=0)return null;var i=[],a=[];if(1==o){for(var s=0;s<n.length;s++)a.push(new Xt(n[s].x,n[s].y));return i.push(new Fe([new je(a)])),new Pr(i)}for(var u=[],l=[],c=[],f=[],h=[],p=0,d=0;p<o;p++){for(var y=0;y<e[p];y++)a.push(new Xt(n[d+y].x,n[d+y].y));d+=e[p];var v=new Fe([new je(a)]);a=[],c.push(v),0===r.length&&f.push(v.getBounds()),h.push(1),l.push(v.getArea())}if(0===r.length){t.bubbleSort(l,c,r,f);for(var g=[],m=1;m<c.length;m++)for(var b=m-1;b>=0;b--)if(g[m]=-1,f[b].containsBounds(f[m])){h[m]=-1*h[b],h[m]<0&&(g[m]=b);break}for(var w=0;w<c.length;w++)h[w]>0?i.push(c[w]):(i[g[w]].components=i[g[w]].components.concat(c[w].components),i.push(""))}else{i=new Array;for(var S=0;S<c.length;S++)if(r[S]&&-1==r[S]?u=u.concat(c[S].components):(u.length>0&&i.length>0&&(i[i.length-1].components=i[i.length-1].components.concat(u),u=[]),i.push(c[S])),S==o-1){var x=i.length;if(x)i[x-1].components=i[x-1].components.concat(u);else for(var _=0,E=u.length;_<E;_++)i.push(new Fe(u))}}return new Pr(i)}},{key:"toGeoRegionEPS",value:function(){var e=this.parts||[],r=this.partTopo||[],n=this.points||[],o=e.length;if(o<=0)return null;var i,a=[],s=[];if(1==o){for(var u=0;u<n.length;u++)s.push(new Xt(n[u].x,n[u].y));return i=Ee.createLineEPS(s),a.push(new Fe([new je(i)])),new Pr(a)}for(var l=[],c=[],f=[],h=[],p=[],d=0,y=0;d<o;d++){for(var v=0;v<e[d];v++)s.push(new Xt(n[y+v].x,n[y+v].y));y+=e[d],i=Ee.createLineEPS(s);var g=new Fe([new je(i)]);s=[],f.push(g),0===r.length&&h.push(g.getBounds()),p.push(1),c.push(g.getArea())}if(0===r.length){t.bubbleSort(c,f,r,h);for(var m=[],b=1;b<f.length;b++)for(var w=b-1;w>=0;w--)if(m[b]=-1,h[w].containsBounds(h[b])){p[b]=-1*p[w],p[b]<0&&(m[b]=w);break}for(var S=0;S<f.length;S++)p[S]>0?a.push(f[S]):(a[m[S]].components=a[m[S]].components.concat(f[S].components),a.push(""))}else{a=new Array;for(var x=0;x<f.length;x++)if(r[x]&&-1==r[x]?l=l.concat(f[x].components):(l.length>0&&a.length>0&&(a[a.length-1].components=a[a.length-1].components.concat(l),l=[]),a.push(f[x])),x==o-1){var _=a.length;if(_)a[_-1].components=a[_-1].components.concat(l);else for(var E=0,O=l.length;E<O;E++)a.push(new Fe(l))}}return new Pr(a)}},{key:"transformGeoCompound",value:function(){var e=this.geoParts||[],r=e.length;if(r<=0)return null;for(var n=[],o=0;o<r;o++){var i=e[o];n.push(new t(i).toGeometry())}return new re(n)}}])&&Gn(e.prototype,r),n&&Gn(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,r,n}();function Vn(t){"@babel/helpers - typeof";return(Vn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Hn(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Wn(n.key),n)}}function Wn(t){var e=function(t,e){if("object"!=Vn(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Vn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Vn(e)?e:e+""}function qn(t,e,r){return e=Xn(e),function(t,e){if(e&&("object"===Vn(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Xn(t).constructor):e.apply(t,r))}function Yn(){return(Yn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Xn(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Xn(t){return(Xn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Jn(t,e){return(Jn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Kn=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=qn(this,e,[t])).ignoreExtraDims=!0,r.CLASS_NAME="SuperMap.Format.GeoJSON",r.parseCoords={point:function(t){if(!1===this.ignoreExtraDims&&2!=t.length)throw"Only 2D points are supported: "+t;return new Xt(t[0],t[1])},multipoint:function(t){for(var e=[],r=null,n=0,o=t.length;n<o;++n){try{r=this.parseCoords.point.apply(this,[t[n]])}catch(t){throw t}e.push(r)}return new le(e)},linestring:function(t){for(var e=[],r=null,n=0,o=t.length;n<o;++n){try{r=this.parseCoords.point.apply(this,[t[n]])}catch(t){throw t}e.push(r)}return new Ee(e)},multilinestring:function(t){for(var e=[],r=null,n=0,o=t.length;n<o;++n){try{r=this.parseCoords.linestring.apply(this,[t[n]])}catch(t){throw t}e.push(r)}return new br(e)},polygon:function(t){for(var e,r,n=[],o=0,i=t.length;o<i;++o){try{r=this.parseCoords.linestring.apply(this,[t[o]])}catch(t){throw t}e=new je(r.components),n.push(e)}return new Fe(n)},multipolygon:function(t){for(var e=[],r=null,n=0,o=t.length;n<o;++n){try{r=this.parseCoords.polygon.apply(this,[t[n]])}catch(t){throw t}e.push(r)}return new Pr(e)},box:function(t){if(2!=t.length)throw"GeoJSON box coordinates must have 2 elements";return new Fe([new je([new Xt(t[0][0],t[0][1]),new Xt(t[1][0],t[0][1]),new Xt(t[1][0],t[1][1]),new Xt(t[0][0],t[1][1]),new Xt(t[0][0],t[0][1])])])}},r.extract={feature:function(t){var e=this.extract.geometry.apply(this,[t.geometry]),r={type:"Feature",properties:this.createAttributes(t),geometry:e};return t.geometry&&"TEXT"===t.geometry.type&&(r.properties.texts=t.geometry.texts,r.properties.textStyle=t.geometry.textStyle),t.fid&&(r.id=t.fid),t.ID&&(r.id=t.ID),r},geometry:function(t){if(null==t)return null;!t.parts&&t.points&&(t.parts=[t.points.length]);var e,r=t.hasOwnProperty("geometryType")?t:new zn(t).toGeometry()||t,n=r.geometryType||r.type;return"LinearRing"===n&&(n="LineString"),"LINEM"===n&&(n="MultiLineString"),e=this.extract[n.toLowerCase()].apply(this,[r]),"Collection"===(n="TEXT"===n?"Point":n)?{type:"GeometryCollection",geometries:e}:{type:n,coordinates:e}},point:function(t){var e=[t.x,t.y];for(var r in t)"x"===r||"y"===r||null===t[r]||isNaN(t[r])||e.push(t[r]);return e},text:function(t){return[t.points[0].x,t.points[0].y]},multipoint:function(t){for(var e=[],r=0,n=t.components.length;r<n;++r)e.push(this.extract.point.apply(this,[t.components[r]]));return e},linestring:function(t){for(var e=[],r=0,n=t.components.length;r<n;++r)e.push(this.extract.point.apply(this,[t.components[r]]));return e},multilinestring:function(t){for(var e=[],r=0,n=t.components.length;r<n;++r)e.push(this.extract.linestring.apply(this,[t.components[r]]));return e},polygon:function(t){for(var e=[],r=0,n=t.components.length;r<n;++r)e.push(this.extract.linestring.apply(this,[t.components[r]]));return e},multipolygon:function(t){for(var e=[],r=0,n=t.components.length;r<n;++r)e.push(this.extract.polygon.apply(this,[t.components[r]]));return e},collection:function(t){for(var e=t.components.length,r=new Array(e),n=0;n<e;++n)r[n]=this.extract.geometry.apply(this,[t.components[n]]);return r}},r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Jn(t,e)}(e,hr),r=e,(n=[{key:"read",value:function(t,r,n){r=r||"FeatureCollection";var o=null,i=null;if(i="string"==typeof t?Yn(Xn(e.prototype),"read",this).call(this,t,n):t){if("string"!=typeof i.type);else if(this.isValidType(i,r))switch(r){case"Geometry":try{o=this.parseGeometry(i)}catch(t){}break;case"Feature":try{(o=this.parseFeature(i)).type="Feature"}catch(t){}break;case"FeatureCollection":switch(o=[],i.type){case"Feature":try{o.push(this.parseFeature(i))}catch(t){o=null}break;case"FeatureCollection":for(var a=0,s=i.features.length;a<s;++a)try{o.push(this.parseFeature(i.features[a]))}catch(t){o=null}break;default:try{var u=this.parseGeometry(i);o.push(new er(u))}catch(t){o=null}}}}else;return o}},{key:"write",value:function(t,r){return Yn(Xn(e.prototype),"write",this).call(this,this.toGeoJSON(t),r)}},{key:"fromGeoJSON",value:function(t,e,r){var n=this,o=this.read(t,e,r);return W.isArray(o)?o.map(function(t){return n._toiSevrerFeature(t)}):this._toiSevrerFeature(o)}},{key:"toGeoJSON",value:function(t){var e={type:null};if(W.isArray(t)){e.type="FeatureCollection";var r=t.length;e.features=new Array(r);for(var n=0;n<r;++n){var o=t[n];if(s(o)){var i={};i.geometry=o,e.features[n]=this.extract.feature.apply(this,[i])}else e.features[n]=this.extract.feature.apply(this,[o])}}else if(s(t)){var a={};a.geometry=t,e=this.extract.feature.apply(this,[a])}else e=this.extract.feature.apply(this,[t]);function s(t){return t.hasOwnProperty("parts")&&t.hasOwnProperty("points")||t.hasOwnProperty("geoParts")}return e}},{key:"isValidType",value:function(t,e){var r=!1;switch(e){case"Geometry":-1==W.indexOf(["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon","Box","GeometryCollection"],t.type)||(r=!0);break;case"FeatureCollection":r=!0;break;default:t.type==e&&(r=!0)}return r}},{key:"parseFeature",value:function(t){var e,r,n,o;n=t.properties?t.properties:{},o=t.geometry&&t.geometry.bbox||t.bbox;try{r=this.parseGeometry(t.geometry)}catch(t){throw t}return e=new er(r,n),o&&(e.bounds=Gt.fromArray(o)),t.id&&(e.geometry.id=t.id,e.fid=t.id),e}},{key:"parseGeometry",value:function(t){if(null==t)return null;var e;if("GeometryCollection"==t.type){if(!W.isArray(t.geometries))throw"GeometryCollection must have geometries array: "+t;for(var r=t.geometries.length,n=new Array(r),o=0;o<r;++o)n[o]=this.parseGeometry.apply(this,[t.geometries[o]]);e=new re(n)}else{if(!W.isArray(t.coordinates))throw"Geometry must have coordinates array: "+t;if(!this.parseCoords[t.type.toLowerCase()])throw"Unsupported geometry type: "+t.type;try{e=this.parseCoords[t.type.toLowerCase()].apply(this,[t.coordinates])}catch(t){throw t}}return e}},{key:"createCRSObject",value:function(t){var e=t.layer.projection.toString(),r={};if(e.match(/epsg:/i)){var n=parseInt(e.substring(e.indexOf(":")+1));r=4326==n?{type:"name",properties:{name:"urn:ogc:def:crs:OGC:1.3:CRS84"}}:{type:"name",properties:{name:"EPSG:"+n}}}return r}},{key:"_toiSevrerFeature",value:function(t){var e=t.attributes,r=[],n=[];for(var o in e)r.push(o),n.push(e[o]);var i={fieldNames:r,fieldValues:n,geometry:zn.fromGeometry(t.geometry)};return i.geometry.id=t.fid,i}},{key:"createAttributes",value:function(t){if(!t)return null;var e={};!function(t,e){if(!t.hasOwnProperty("fieldNames")||!t.hasOwnProperty("fieldValues"))return;var r=t.fieldNames,n=t.fieldValues;for(var o in r)e[r[o]]=n[o]}(t,e);var r=["fieldNames","fieldValues","geometry","stringID","ID"];for(var n in t)r.indexOf(n)>-1||(e[n]=t[n]);return e}}])&&Hn(r.prototype,n),o&&Hn(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}(),Qn=function(t){return"[object Array]"==Object.prototype.toString.call(t)},Zn=function(t){return"string"==typeof t&&t.constructor===String},$n={toSuperMapGeometry:function(t){if(t&&t.type)return(new Kn).read(t,"FeatureCollection")[0].geometry},toSuperMapBounds:function(t){return Qn(t)?new Gt(t[0],t[1],t[2],t[3]):t instanceof w().LngLatBounds?new Gt(t.getWest(),t.getSouth(),t.getEast(),t.getNorth()):t},toSuperMapPoint:function(t){return Qn(t)?new Xt(t[0],t[1]):t.lng&&t.lat?new Xt(t.lng,t.lat):new Xt(t.geometry.coordinates[0],t.geometry.coordinates[1])},toSuperMapPolygon:function(t){var e=t.getWest(),r=t.getEast(),n=t.getSouth(),o=t.getNorth();return new Fe([new je([new Xt(e,n),new Xt(r,n),new Xt(r,o),new Xt(e,o)])])},isArray:Qn,toGeoJSON:function(t){if(t)return(new Kn).toGeoJSON(t)},toProcessingParam:function(t){var e={};if(t.length<1)e="";else{for(var r=[],n=0;n<t.length;n++){var o={};o.x=t[n][0],o.y=t[n][1],r.push(o)}e.type="REGION",e.points=r}return e},extend:function(t){for(var e=0;e<Object.getOwnPropertyNames(arguments).length;e++){var r=Object.getOwnPropertyNames(arguments)[e];if("caller"!=r&&"callee"!=r&&"length"!=r&&"arguments"!=r){var n=arguments[r];if(n)for(var o=0;o<Object.getOwnPropertyNames(n).length;o++){var i=Object.getOwnPropertyNames(n)[o];"caller"!=r&&"callee"!=r&&"length"!=r&&"arguments"!=r&&(t[i]=n[i])}}}return t},isNumber:function(t){if(""===t)return!1;var e=Number(t);return 0===e||!isNaN(e)},isString:Zn,newGuid:function(t){for(var e=t||32,r="",n=1;n<e;n++){r+=Math.floor(16*Math.random()).toString(16)}return r},hexToRgba:function(t,e){var r=[],n=[];if(3==(t=t.replace(/#/,"")).length){for(var o=[],i=0;i<3;i++)o.push(t.charAt(i)+t.charAt(i));t=o.join("")}for(var a=0;a<6;a+=2)r[a]="0x"+t.substr(a,2),n.push(parseInt(Number(r[a])));return n.push(e),"rgba("+n.join(",")+")"},isMatchAdministrativeName:function(t,e){if(Zn(e)){var r=t.substr(0,2);return"å¼ å®¶"===r&&(r=t.substr(0,3)),!!e.match(new RegExp(r))}return!1},unproject:function(t){for(var e,r=180/Math.PI,n=6378137,o=Math.exp(-t[1]/n),i=Math.PI/2-2*Math.atan(o),a=0,s=.1;a<15&&Math.abs(s)>1e-7;a++)e=1,i+=s=Math.PI/2-2*Math.atan(o*e)-i;return new(w().LngLat)(t[0]*r/n,i*r)},transformUrl:function(t){var e=t.url,r=t.server,n=t.excludePortalProxyUrl,o=t.credentialValue,i=t.credentialKey,a=-1===e.indexOf(".json")?"".concat(e,".json"):e,s="getUrlResource.json?url=";if(n&&r.indexOf(s)>-1){var u=r.split(s);u.length>1&&(a=u[0]+s+a)}return o&&i&&(a+="?"+i+"="+o),a}};function to(t){"@babel/helpers - typeof";return(to="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function eo(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ro(n.key),n)}}function ro(t){var e=function(t,e){if("object"!=to(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=to(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==to(e)?e:e+""}function no(t,e,r){return e=io(e),function(t,e){if(e&&("object"===to(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],io(t).constructor):e.apply(t,r))}function oo(){return(oo="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=io(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function io(t){return(io=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ao(t,e){return(ao=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var so=function(t){function e(t,r,n){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(o=no(this,e,[t,r,n])).x=parseFloat(t),o.y=parseFloat(r),o.text=n.toString(),o.bsInfo={h:null,w:null},o.element=document.createElement("span"),o.CLASS_NAME="SuperMap.Geometry.GeoText",o.geometryType="GeoText",o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ao(t,e)}(e,L),r=e,(n=[{key:"destroy",value:function(){oo(io(e.prototype),"destroy",this).call(this),this.x=null,this.y=null,this.text=null}},{key:"getCentroid",value:function(){return new Xt(this.x,this.y)}},{key:"clone",value:function(t){return null==t&&(t=new e(this.x,this.y,this.text)),W.applyDefaults(t,this),t}},{key:"calculateBounds",value:function(){this.bounds=new Gt(this.x,this.y,this.x,this.y)}},{key:"getLabelPxBoundsByLabel",value:function(t,e,r,n){var o,i,a,s,u=W.cloneObject(t),l=(n.label||this.text).split("\n").length;if(e=parseFloat(e),r=parseFloat(r),l>1&&(r=parseFloat(r)*l),n.labelAlign&&"cm"!==n.labelAlign)switch(n.labelAlign){case"lt":u.x+=e/2,u.y+=r/2;break;case"lm":u.x+=e/2;break;case"lb":u.x+=e/2,u.y-=r/2;break;case"ct":u.y+=r/2;break;case"cb":u.y-=r/2;break;case"rt":u.x-=e/2,u.y+=r/2;break;case"rm":u.x-=e/2;break;case"rb":u.x-=e/2,u.y-=r/2}return this.bsInfo.h=r,this.bsInfo.w=e,o=u.x-parseFloat(e)/2,i=u.y+parseFloat(r)/2,s=u.x+parseFloat(e)/2,a=u.y-parseFloat(r)/2,new Gt(o,i,s,a)}},{key:"getLabelPxBoundsByText",value:function(t,e){var r,n,o,i,a=this.getLabelPxSize(e),s=W.cloneObject(t);if(e.labelAlign&&"cm"!==e.labelAlign)switch(e.labelAlign){case"lt":s.x+=a.w/2,s.y+=a.h/2;break;case"lm":s.x+=a.w/2;break;case"lb":s.x+=a.w/2,s.y-=a.h/2;break;case"ct":s.y+=a.h/2;break;case"cb":s.y-=a.h/2;break;case"rt":s.x-=a.w/2,s.y+=a.h/2;break;case"rm":s.x-=a.w/2;break;case"rb":s.x-=a.w/2,s.y-=a.h/2}return this.bsInfo.h=a.h,this.bsInfo.w=a.w,r=s.x-a.w/2,n=s.y+a.h/2,i=e.fontStyle&&"italic"===e.fontStyle?s.x+a.w/2+parseInt(parseFloat(e.fontSize)/2):s.x+a.w/2,o=s.y-a.h/2,new Gt(r,n,i,o)}},{key:"getLabelPxSize",value:function(t){var e,r,n,o,i=parseFloat(t.strokeWidth);e=t.label||this.text,r=t.fontSize?parseFloat(t.fontSize):parseFloat("12px");var a=e.split("\n"),s=a.length;o=s>1?r*s+s+i+.2*r:r+i+.2*r+1,n=0,this.labelWTmp&&n<this.labelWTmp&&(n=this.labelWTmp);for(var u=0;u<s;u++){var l=this.getTextCount(a[u]),c=this.labelWTmp=W.getTextBounds(t,a[u],this.element).textWidth+1*l.textC+i;n<c&&(n=c)}var f=new Object;return f.h=o,f.w=n,f}},{key:"getTextCount",value:function(t){for(var e={},r=0,n=0,o=0;o<t.length;o++)t.charCodeAt(o)>255?r++:n++;return e.cnC=r,e.enC=n,e.textC=t.length,e}}])&&eo(r.prototype,n),o&&eo(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function uo(t){"@babel/helpers - typeof";return(uo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function lo(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,co(n.key),n)}}function co(t){var e=function(t,e){if("object"!=uo(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=uo(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==uo(e)?e:e+""}var fo=function(){return t=function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e&&r&&r.map&&r.renderer&&(this.id=W.createUniqueID(this.CLASS_NAME+"_"),this.lonlat=null,this.location=[],this.data=e,this.shapes=[],this.layer=r,this.CLASS_NAME="SuperMap.Feature.Theme")},(e=[{key:"destroy",value:function(){this.data=null,this.id=null,this.lonlat=null,this.location=null,this.shapes=null,this.layer=null}},{key:"getLocalXY",value:function(t){var e=this.layer.map.getResolution(),r=this.layer.map.getExtent();return t instanceof Xt||t instanceof so?[t.x/e+-r.left/e,r.top/e-t.y/e]:t instanceof Rt?[t.lon/e+-r.left/e,r.top/e-t.lat/e]:null}}])&&lo(t.prototype,e),r&&lo(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function ho(t){"@babel/helpers - typeof";return(ho="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function po(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,yo(n.key),n)}}function yo(t){var e=function(t,e){if("object"!=ho(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=ho(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ho(e)?e:e+""}var vo=function(){return t=function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.geometry=e,this.attributes=r},(e=[{key:"toFeature",value:function(){var t=$n.toSuperMapGeometry(this.geometry),e=[];return this.geometry instanceof w().LngLat?e=[this.geometry.lng,this.geometry.lat]:this.geometry instanceof w().Point?e=[this.geometry.x,this.geometry.y]:3===this.geometry.length&&(t=new so(this.geometry[0],this.geometry[1],this.geometry[2])),e.length>1&&(t=new Xt(e[0],e[1])),new er(t,this.attributes)}}])&&po(t.prototype,e),r&&po(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function go(t){"@babel/helpers - typeof";return(go="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function mo(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,bo(n.key),n)}}function bo(t){var e=function(t,e){if("object"!=go(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=go(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==go(e)?e:e+""}var wo=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.BUILTIN_OBJECT={"[object Function]":1,"[object RegExp]":1,"[object Date]":1,"[object Error]":1,"[object CanvasGradient]":1},this._ctx=null,this._canvas=null,this._pixelCtx=null,this._width=null,this._height=null,this._offsetX=0,this._offsetY=0,this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Util"},(e=[{key:"clone",value:function(t){var e=this.BUILTIN_OBJECT;if("object"==go(t)&&null!==t){var r=t;if(t instanceof Array){r=[];for(var n=0,o=t.length;n<o;n++)r[n]=this.clone(t[n])}else if(!e[Object.prototype.toString.call(t)])for(var i in r={},t)t.hasOwnProperty(i)&&(r[i]=this.clone(t[i]));return r}return t}},{key:"mergeItem",value:function(t,e,r,n){var o=this.BUILTIN_OBJECT;e.hasOwnProperty(r)&&("object"!=go(t[r])||o[Object.prototype.toString.call(t[r])]?!n&&r in t||(t[r]=e[r]):this.merge(t[r],e[r],n))}},{key:"merge",value:function(t,e,r){for(var n in e)this.mergeItem(t,e,n,r);return t}},{key:"getContext",value:function(){return this._ctx||(this._ctx=document.createElement("canvas").getContext("2d")),this._ctx}},{key:"getPixelContext",value:function(){return this._pixelCtx||(this._canvas=document.createElement("canvas"),this._width=this._canvas.width,this._height=this._canvas.height,this._pixelCtx=this._canvas.getContext("2d")),this._pixelCtx}},{key:"adjustCanvasSize",value:function(t,e){var r,n=this._canvas,o=this._pixelCtx,i=this._width,a=this._height,s=this._offsetX,u=this._offsetY;t+s>i&&(i=t+s+100,n.width=i,r=!0),e+u>a&&(a=e+u+100,n.height=a,r=!0),t<-s&&(i+=s=100*Math.ceil(-t/100),n.width=i,r=!0),e<-u&&(a+=u=100*Math.ceil(-e/100),n.height=a,r=!0),r&&o.translate(s,u)}},{key:"getPixelOffset",value:function(){return{x:this._offsetX,y:this._offsetY}}},{key:"indexOf",value:function(t,e){if(t.indexOf)return t.indexOf(e);for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}},{key:"inherits",value:function(t,e){var r=t.prototype;function n(){}for(var o in n.prototype=e.prototype,t.prototype=new n,r)t.prototype[o]=r[o];t.constructor=t}}])&&mo(t.prototype,e),r&&mo(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function So(t){"@babel/helpers - typeof";return(So="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function xo(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,_o(n.key),n)}}function _o(t){var e=function(t,e){if("object"!=So(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=So(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==So(e)?e:e+""}var Eo=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._handlers={},this.CLASS_NAME="SuperMap.LevelRenderer.Eventful"},(e=[{key:"destroy",value:function(){this._handlers=null}},{key:"one",value:function(t,e,r){var n=this._handlers;return e&&t?(n[t]||(n[t]=[]),n[t].push({h:e,one:!0,ctx:r||this}),this):this}},{key:"bind",value:function(t,e,r){var n=this._handlers;return e&&t?(n[t]||(n[t]=[]),n[t].push({h:e,one:!1,ctx:r||this}),this):this}},{key:"unbind",value:function(t,e){var r=this._handlers;if(!t)return this._handlers={},this;if(e){if(r[t]){for(var n=[],o=0,i=r[t].length;o<i;o++)r[t][o].h!=e&&n.push(r[t][o]);r[t]=n}r[t]&&0===r[t].length&&delete r[t]}else delete r[t];return this}},{key:"dispatch",value:function(t){if(this._handlers[t]){var e=arguments,r=e.length;r>3&&(e=Array.prototype.slice.call(e,1));for(var n=this._handlers[t],o=n.length,i=0;i<o;){switch(r){case 1:n[i].h.call(n[i].ctx);break;case 2:n[i].h.call(n[i].ctx,e[1]);break;case 3:n[i].h.call(n[i].ctx,e[1],e[2]);break;default:n[i].h.apply(n[i].ctx,e)}n[i].one?(n.splice(i,1),o--):i++}}return this}},{key:"dispatchWithContext",value:function(t){if(this._handlers[t]){var e=arguments,r=e.length;r>4&&(e=Array.prototype.slice.call(e,1,e.length-1));for(var n=e[e.length-1],o=this._handlers[t],i=o.length,a=0;a<i;){switch(r){case 1:o[a].h.call(n);break;case 2:o[a].h.call(n,e[1]);break;case 3:o[a].h.call(n,e[1],e[2]);break;default:o[a].h.apply(n,e)}o[a].one?(o.splice(a,1),i--):a++}}return this}}])&&xo(t.prototype,e),r&&xo(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function Oo(t){"@babel/helpers - typeof";return(Oo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Po(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ko(n.key),n)}}function ko(t){var e=function(t,e){if("object"!=Oo(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Oo(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Oo(e)?e:e+""}var Co=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.ArrayCtor="undefined"==typeof Float32Array?Array:Float32Array,this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Vector"},(e=[{key:"create",value:function(t,e){var r=new(0,this.ArrayCtor)(2);return r[0]=t||0,r[1]=e||0,r}},{key:"copy",value:function(t,e){return t[0]=e[0],t[1]=e[1],t}},{key:"set",value:function(t,e,r){return t[0]=e,t[1]=r,t}},{key:"add",value:function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t}},{key:"scaleAndAdd",value:function(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t}},{key:"sub",value:function(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t}},{key:"len",value:function(t){return Math.sqrt(this.lenSquare(t))}},{key:"lenSquare",value:function(t){return t[0]*t[0]+t[1]*t[1]}},{key:"mul",value:function(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t}},{key:"div",value:function(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t}},{key:"dot",value:function(t,e){return t[0]*e[0]+t[1]*e[1]}},{key:"scale",value:function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t}},{key:"normalize",value:function(t,e){var r=this.len(e);return 0===r?(t[0]=0,t[1]=0):(t[0]=e[0]/r,t[1]=e[1]/r),t}},{key:"distance",value:function(t,e){return Math.sqrt((t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1]))}},{key:"distanceSquare",value:function(t,e){return(t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1])}},{key:"negate",value:function(t,e){return t[0]=-e[0],t[1]=-e[1],t}},{key:"lerp",value:function(t,e,r,n){return t[0]=e[0]+n*(r[0]-e[0]),t[1]=e[1]+n*(r[1]-e[1]),t}},{key:"applyTransform",value:function(t,e,r){var n=e[0],o=e[1];return t[0]=r[0]*n+r[2]*o+r[4],t[1]=r[1]*n+r[3]*o+r[5],t}},{key:"min",value:function(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t}},{key:"max",value:function(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t}},{key:"length",value:function(t){return this.len(t)}},{key:"lengthSquare",value:function(t){return this.lenSquare(t)}},{key:"dist",value:function(t,e){return this.distance(t,e)}},{key:"distSquare",value:function(t,e){return this.distanceSquare(t,e)}}])&&Po(t.prototype,e),r&&Po(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function To(t){"@babel/helpers - typeof";return(To="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ao(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Mo(n.key),n)}}function Mo(t){var e=function(t,e){if("object"!=To(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=To(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==To(e)?e:e+""}var jo=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.vector=new Co,this.EPSILON=1e-4,this.THREE_SQRT=Math.sqrt(3),this.ONE_THIRD=1/3,this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Curve"},(e=[{key:"isAroundZero",value:function(t){return t>-this.EPSILON&&t<this.EPSILON}},{key:"isNotAroundZero",value:function(t){return t>this.EPSILON||t<-this.EPSILON}},{key:"cubicAt",value:function(t,e,r,n,o){var i=1-o;return i*i*(i*t+3*o*e)+o*o*(o*n+3*i*r)}},{key:"cubicDerivativeAt",value:function(t,e,r,n,o){var i=1-o;return 3*(((e-t)*i+2*(r-e)*o)*i+(n-r)*o*o)}},{key:"cubicRootAt",value:function(t,e,r,n,o,i){var a=n+3*(e-r)-t,s=3*(r-2*e+t),u=3*(e-t),l=t-o,c=s*s-3*a*u,f=s*u-9*a*l,h=u*u-3*s*l,p=0;if(this.isAroundZero(c)&&this.isAroundZero(f))if(this.isAroundZero(s))i[0]=0;else{var d=-u/s;d>=0&&d<=1&&(i[p++]=d)}else{var y=f*f-4*c*h;if(this.isAroundZero(y)){var v=f/c,g=-s/a+v,m=-v/2;g>=0&&g<=1&&(i[p++]=g),m>=0&&m<=1&&(i[p++]=m)}else if(y>0){var b=Math.sqrt(y),w=c*s+1.5*a*(-f+b),S=c*s+1.5*a*(-f-b),x=(-s-((w=w<0?-Math.pow(-w,this.ONE_THIRD):Math.pow(w,this.ONE_THIRD))+(S=S<0?-Math.pow(-S,this.ONE_THIRD):Math.pow(S,this.ONE_THIRD))))/(3*a);x>=0&&x<=1&&(i[p++]=x)}else{var _=(2*c*s-3*a*f)/(2*Math.sqrt(c*c*c)),E=Math.acos(_)/3,O=Math.sqrt(c),P=Math.cos(E),k=(-s-2*O*P)/(3*a),C=(-s+O*(P+this.THREE_SQRT*Math.sin(E)))/(3*a),T=(-s+O*(P-this.THREE_SQRT*Math.sin(E)))/(3*a);k>=0&&k<=1&&(i[p++]=k),C>=0&&C<=1&&(i[p++]=C),T>=0&&T<=1&&(i[p++]=T)}}return p}},{key:"cubicExtrema",value:function(t,e,r,n,o){var i=6*r-12*e+6*t,a=9*e+3*n-3*t-9*r,s=3*e-3*t,u=0;if(this.isAroundZero(a)){if(this.isNotAroundZero(i)){var l=-s/i;l>=0&&l<=1&&(o[u++]=l)}}else{var c=i*i-4*a*s;if(this.isAroundZero(c))o[0]=-i/(2*a);else if(c>0){var f=Math.sqrt(c),h=(-i+f)/(2*a),p=(-i-f)/(2*a);h>=0&&h<=1&&(o[u++]=h),p>=0&&p<=1&&(o[u++]=p)}}return u}},{key:"cubicSubdivide",value:function(t,e,r,n,o,i){var a=(e-t)*o+t,s=(r-e)*o+e,u=(n-r)*o+r,l=(s-a)*o+a,c=(u-s)*o+s,f=(c-l)*o+l;i[0]=t,i[1]=a,i[2]=l,i[3]=f,i[4]=f,i[5]=c,i[6]=u,i[7]=n}},{key:"cubicProjectPoint",value:function(t,e,r,n,o,i,a,s,u,l,c){var f,h=this.vector.create(),p=this.vector.create(),d=this.vector.create(),y=.005,v=1/0;h[0]=u,h[1]=l;for(var g=0;g<1;g+=.05){p[0]=this.cubicAt(t,r,o,a,g),p[1]=this.cubicAt(e,n,i,s,g);var m=this.vector.distSquare(h,p);m<v&&(f=g,v=m)}v=1/0;for(var b=0;b<32&&!(y<this.EPSILON);b++){var w=f-y,S=f+y;p[0]=this.cubicAt(t,r,o,a,w),p[1]=this.cubicAt(e,n,i,s,w);var x=this.vector.distSquare(p,h);if(w>=0&&x<v)f=w,v=x;else{d[0]=this.cubicAt(t,r,o,a,S),d[1]=this.cubicAt(e,n,i,s,S);var _=this.vector.distSquare(d,h);S<=1&&_<v?(f=S,v=_):y*=.5}}return c&&(c[0]=this.cubicAt(t,r,o,a,f),c[1]=this.cubicAt(e,n,i,s,f)),Math.sqrt(v)}},{key:"quadraticAt",value:function(t,e,r,n){var o=1-n;return o*(o*t+2*n*e)+n*n*r}},{key:"quadraticDerivativeAt",value:function(t,e,r,n){return 2*((1-n)*(e-t)+n*(r-e))}},{key:"quadraticRootAt",value:function(t,e,r,n,o){var i=t-2*e+r,a=2*(e-t),s=t-n,u=0;if(this.isAroundZero(i)){if(this.isNotAroundZero(a)){var l=-s/a;l>=0&&l<=1&&(o[u++]=l)}}else{var c=a*a-4*i*s;if(this.isAroundZero(c)){var f=-a/(2*i);f>=0&&f<=1&&(o[u++]=f)}else if(c>0){var h=Math.sqrt(c),p=(-a+h)/(2*i),d=(-a-h)/(2*i);p>=0&&p<=1&&(o[u++]=p),d>=0&&d<=1&&(o[u++]=d)}}return u}},{key:"quadraticExtremum",value:function(t,e,r){var n=t+r-2*e;return 0===n?.5:(t-e)/n}},{key:"quadraticProjectPoint",value:function(t,e,r,n,o,i,a,s,u){var l,c=this.vector.create(),f=this.vector.create(),h=this.vector.create(),p=.005,d=1/0;c[0]=a,c[1]=s;for(var y=0;y<1;y+=.05){f[0]=this.quadraticAt(t,r,o,y),f[1]=this.quadraticAt(e,n,i,y);var v=this.vector.distSquare(c,f);v<d&&(l=y,d=v)}d=1/0;for(var g=0;g<32&&!(p<this.EPSILON);g++){var m=l-p,b=l+p;f[0]=this.quadraticAt(t,r,o,m),f[1]=this.quadraticAt(e,n,i,m);var w=this.vector.distSquare(f,c);if(m>=0&&w<d)l=m,d=w;else{h[0]=this.quadraticAt(t,r,o,b),h[1]=this.quadraticAt(e,n,i,b);var S=this.vector.distSquare(h,c);b<=1&&S<d?(l=b,d=S):p*=.5}}return u&&(u[0]=this.quadraticAt(t,r,o,l),u[1]=this.quadraticAt(e,n,i,l)),Math.sqrt(d)}}])&&Ao(t.prototype,e),r&&Ao(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function Io(t){"@babel/helpers - typeof";return(Io="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function No(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Lo(n.key),n)}}function Lo(t){var e=function(t,e){if("object"!=Io(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Io(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Io(e)?e:e+""}var Ro=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.util=new wo,this.curve=new jo,this._ctx=null,this._textWidthCache={},this._textHeightCache={},this._textWidthCacheCounter=0,this._textHeightCacheCounter=0,this.TEXT_CACHE_MAX=5e3,this.PI2=2*Math.PI,this.roots=[-1,-1,-1],this.extrema=[-1,-1],this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Area"},(e=[{key:"normalizeRadian",value:function(t){return(t%=this.PI2)<0&&(t+=this.PI2),t}},{key:"isInside",value:function(t,e,r,n){if(!e||!t)return!1;var o=t.type;this._ctx=this._ctx||this.util.getContext();var i=this._mathMethod(t,e,r,n);if(void 0!==i)return i;if(t.buildPath&&this._ctx.isPointInPath)return this._buildPathMethod(t,this._ctx,e,r,n);switch(o){case"ellipse":case"smicellipse":return!0;case"trochoid":var a="out"==e.location?e.r1+e.r2+e.d:e.r1-e.r2+e.d;return this.isInsideCircle(e,r,n,a);case"rose":return this.isInsideCircle(e,r,n,e.maxr);default:return!1}}},{key:"_mathMethod",value:function(t,e,r,n){switch(t.type){case"bezier-curve":return void 0===e.cpX2?this.isInsideQuadraticStroke(e.xStart,e.yStart,e.cpX1,e.cpY1,e.xEnd,e.yEnd,e.lineWidth,r,n):this.isInsideCubicStroke(e.xStart,e.yStart,e.cpX1,e.cpY1,e.cpX2,e.cpY2,e.xEnd,e.yEnd,e.lineWidth,r,n);case"line":return this.isInsideLine(e.xStart,e.yStart,e.xEnd,e.yEnd,e.lineWidth,r,n);case"broken-line":return this.isInsideBrokenLine(e.pointList,e.lineWidth,r,n);case"smicbroken-line":var o=r,i=n;return t.refOriginalPosition&&(o=r-t.refOriginalPosition[0],i=n-t.refOriginalPosition[1]),this.isInsideBrokenLine(e.pointList,e.lineWidth,o,i);case"ring":return this.isInsideRing(e.x,e.y,e.r0,e.r,r,n);case"smicring":var a=e.x,s=e.y;return t.refOriginalPosition&&(a=e.x+t.refOriginalPosition[0],s=e.y+t.refOriginalPosition[1]),this.isInsideRing(a,s,e.r0,e.r,r,n);case"circle":return this.isInsideCircle(e.x,e.y,e.r,r,n);case"smicpoint":var u=r,l=n;return t.refOriginalPosition&&(u=r-t.refOriginalPosition[0],l=n-t.refOriginalPosition[1]),this.isInsideCircle(e.x,e.y,e.r,u,l);case"sector":var c=e.startAngle*Math.PI/180,f=e.endAngle*Math.PI/180;return e.clockWise||(c=-c,f=-f),this.isInsideSector(e.x,e.y,e.r0,e.r,c,f,!e.clockWise,r,n);case"smicsector":var h=e.startAngle*Math.PI/180,p=e.endAngle*Math.PI/180;e.clockWise||(h=-h,p=-p);var d=e.x,y=e.y;return t.refOriginalPosition&&(d=e.x+t.refOriginalPosition[0],y=e.y+t.refOriginalPosition[1]),this.isInsideSector(d,y,e.r0,e.r,h,p,!e.clockWise,r,n);case"path":return this.isInsidePath(e.pathArray,Math.max(e.lineWidth,5),e.brushType,r,n);case"polygon":case"star":case"smicstar":case"isogon":case"smicisogon":return this.isInsidePolygon(e.pointList,r,n);case"smicpolygon":var v=r,g=n;if(t.refOriginalPosition&&(v=r-t.refOriginalPosition[0],g=n-t.refOriginalPosition[1]),t.holePolygonPointLists&&t.holePolygonPointLists.length>0){for(var m=this.isInsidePolygon(e.pointList,v,g),b=t.holePolygonPointLists,w=!1,S=0,x=b.length;S<x;S++){var _=b[S];!0===this.isInsidePolygon(_,v,g)&&(w=!0)}return!0===m&&!1===w}return this.isInsidePolygon(e.pointList,v,g);case"text":var E=e.__rect||t.getRect(e);return this.isInsideRect(E.x,E.y,E.width,E.height,r,n);case"smictext":var O=t.getTextBackground(e);return this.isInsidePolygon(O,r,n);case"rectangle":case"image":return this.isInsideRect(e.x,e.y,e.width,e.height,r,n);case"smicimage":var P=e.x,k=e.y;return t.refOriginalPosition&&(P=e.x+t.refOriginalPosition[0],k=e.y+t.refOriginalPosition[1]),this.isInsideRect(P,k,e.width,e.height,r,n)}}},{key:"_buildPathMethod",value:function(t,e,r,n,o){return e.beginPath(),t.buildPath(e,r),e.closePath(),e.isPointInPath(n,o)}},{key:"isOutside",value:function(t,e,r,n){return!this.isInside(t,e,r,n)}},{key:"isInsideLine",value:function(t,e,r,n,o,i,a){if(0===o)return!1;var s=Math.max(o,5),u=0;if(a>e+s&&a>n+s||a<e-s&&a<n-s||i>t+s&&i>r+s||i<t-s&&i<r-s)return!1;if(t===r)return Math.abs(i-t)<=s/2;var l=(u=(e-n)/(t-r))*i-a+(t*n-r*e)/(t-r);return l*l/(u*u+1)<=s/2*s/2}},{key:"isInsideCubicStroke",value:function(t,e,r,n,o,i,a,s,u,l,c){if(0===u)return!1;var f=Math.max(u,5);return!(c>e+f&&c>n+f&&c>i+f&&c>s+f||c<e-f&&c<n-f&&c<i-f&&c<s-f||l>t+f&&l>r+f&&l>o+f&&l>a+f||l<t-f&&l<r-f&&l<o-f&&l<a-f)&&this.curve.cubicProjectPoint(t,e,r,n,o,i,a,s,l,c,null)<=f/2}},{key:"isInsideQuadraticStroke",value:function(t,e,r,n,o,i,a,s,u){if(0===a)return!1;var l=Math.max(a,5);return!(u>e+l&&u>n+l&&u>i+l||u<e-l&&u<n-l&&u<i-l||s>t+l&&s>r+l&&s>o+l||s<t-l&&s<r-l&&s<o-l)&&this.curve.quadraticProjectPoint(t,e,r,n,o,i,s,u,null)<=l/2}},{key:"isInsideArcStroke",value:function(t,e,r,n,o,i,a,s,u){var l=this.PI2;if(0===a)return!1;var c=Math.max(a,5);s-=t,u-=e;var f=Math.sqrt(s*s+u*u);if(f-c>r||f+c<r)return!1;if(Math.abs(n-o)>=l)return!0;if(i){var h=n;n=this.normalizeRadian(o),o=this.normalizeRadian(h)}else n=this.normalizeRadian(n),o=this.normalizeRadian(o);n>o&&(o+=l);var p=Math.atan2(u,s);return p<0&&(p+=l),p>=n&&p<=o||p+l>=n&&p+l<=o}},{key:"isInsideBrokenLine",value:function(t,e,r,n){for(var o=Math.max(e,10),i=0,a=t.length-1;i<a;i++){var s=t[i][0],u=t[i][1],l=t[i+1][0],c=t[i+1][1];if(this.isInsideLine(s,u,l,c,o,r,n))return!0}return!1}},{key:"isInsideRing",value:function(t,e,r,n,o,i){var a=(o-t)*(o-t)+(i-e)*(i-e);return a<n*n&&a>r*r}},{key:"isInsideRect",value:function(t,e,r,n,o,i){return o>=t&&o<=t+r&&i>=e&&i<=e+n}},{key:"isInsideCircle",value:function(t,e,r,n,o){return(n-t)*(n-t)+(o-e)*(o-e)<r*r}},{key:"isInsideSector",value:function(t,e,r,n,o,i,a,s,u){return this.isInsideArcStroke(t,e,(r+n)/2,o,i,a,n-r,s,u)}},{key:"isInsidePolygon",value:function(t,e,r){for(var n=t.length,o=0,i=0,a=n-1;i<n;i++){var s=t[a][0],u=t[a][1],l=t[i][0],c=t[i][1];o+=this.windingLine(s,u,l,c,e,r),a=i}return 0!==o}},{key:"windingLine",value:function(t,e,r,n,o,i){return i>e&&i>n||i<e&&i<n?0:n==e?0:(i-e)/(n-e)*(r-t)+t>o?n<e?1:-1:0}},{key:"swapExtrema",value:function(){var t=this.extrema[0];this.extrema[0]=this.extrema[1],this.extrema[1]=t}},{key:"windingCubic",value:function(t,e,r,n,o,i,a,s,u,l){var c=this.curve,f=this.roots,h=this.extrema;if(l>e&&l>n&&l>i&&l>s||l<e&&l<n&&l<i&&l<s)return 0;var p=c.cubicRootAt(e,n,i,s,l,f);if(0===p)return 0;for(var d,y,v=0,g=-1,m=0;m<p;m++){var b=f[m];c.cubicAt(t,r,o,a,b)<u||(g<0&&(g=c.cubicExtrema(e,n,i,s,h),h[1]<h[0]&&g>1&&this.swapExtrema(),d=c.cubicAt(e,n,i,s,h[0]),g>1&&(y=c.cubicAt(e,n,i,s,h[1]))),2==g?b<h[0]?v+=d<e?1:-1:b<h[1]?v+=y<d?1:-1:v+=s<y?1:-1:b<h[0]?v+=d<e?1:-1:v+=s<d?1:-1)}return v}},{key:"windingQuadratic",value:function(t,e,r,n,o,i,a,s){var u=this.curve,l=this.roots;if(s>e&&s>n&&s>i||s<e&&s<n&&s<i)return 0;var c=u.quadraticRootAt(e,n,i,s,l);if(0===c)return 0;var f=u.quadraticExtremum(e,n,i);if(f>=0&&f<=1){for(var h=0,p=u.quadraticAt(e,n,i,f),d=0;d<c;d++){u.quadraticAt(t,r,o,l[d])>a||(l[d]<f?h+=p<e?1:-1:h+=i<p?1:-1)}return h}return u.quadraticAt(t,r,o,l[0])>a?0:i<e?1:-1}},{key:"windingArc",value:function(t,e,r,n,o,i,a,s){var u=this.roots,l=this.PI2;if((s-=e)>r||s<-r)return 0;var c=Math.sqrt(r*r-s*s);if(u[0]=-c,u[1]=c,Math.abs(n-o)>=l){n=0,o=l;var f=i?1:-1;return a>=u[0]+t&&a<=u[1]+t?f:0}if(i){var h=n;n=this.normalizeRadian(o),o=this.normalizeRadian(h)}else n=this.normalizeRadian(n),o=this.normalizeRadian(o);n>o&&(o+=l);for(var p=0,d=0;d<2;d++){var y=u[d];if(y+t>a){var v=Math.atan2(s,y),g=i?1:-1;v<0&&(v=l+v),(v>=n&&v<=o||v+l>=n&&v+l<=o)&&(v>Math.PI/2&&v<1.5*Math.PI&&(g=-g),p+=g)}}return p}},{key:"isInsidePath",value:function(t,e,r,n,o){for(var i=0,a=0,s=0,u=0,l=0,c=!0,f=!0,h="stroke"===(r=r||"fill")||"both"===r,p="fill"===r||"both"===r,d=0;d<t.length;d++){var y=t[d],v=y.points;if(c||"M"===y.command){if(d>0&&(p&&(i+=this.windingLine(a,s,u,l,n,o)),0!==i))return!0;u=v[v.length-2],l=v[v.length-1],c=!1,f&&"A"!==y.command&&(f=!1,a=u,s=l)}switch(y.command){case"M":a=v[0],s=v[1];break;case"L":if(h&&this.isInsideLine(a,s,v[0],v[1],e,n,o))return!0;p&&(i+=this.windingLine(a,s,v[0],v[1],n,o)),a=v[0],s=v[1];break;case"C":if(h&&this.isInsideCubicStroke(a,s,v[0],v[1],v[2],v[3],v[4],v[5],e,n,o))return!0;p&&(i+=this.windingCubic(a,s,v[0],v[1],v[2],v[3],v[4],v[5],n,o)),a=v[4],s=v[5];break;case"Q":if(h&&this.isInsideQuadraticStroke(a,s,v[0],v[1],v[2],v[3],e,n,o))return!0;p&&(i+=this.windingQuadratic(a,s,v[0],v[1],v[2],v[3],n,o)),a=v[2],s=v[3];break;case"A":var g=v[0],m=v[1],b=v[2],w=v[3],S=v[4],x=v[5],_=Math.cos(S)*b+g,E=Math.sin(S)*w+m;f?(f=!1,u=_,l=E):i+=this.windingLine(a,s,_,E);var O=(n-g)*w/b+g;if(h&&this.isInsideArcStroke(g,m,w,S,S+x,1-v[7],e,O,o))return!0;p&&(i+=this.windingArc(g,m,w,S,S+x,1-v[7],O,o)),a=Math.cos(S+x)*b+g,s=Math.sin(S+x)*w+m;break;case"z":if(h&&this.isInsideLine(a,s,u,l,e,n,o))return!0;c=!0}}return p&&(i+=this.windingLine(a,s,u,l,n,o)),0!==i}},{key:"getTextWidth",value:function(t,e){var r=t+":"+e;if(this._textWidthCache[r])return this._textWidthCache[r];this._ctx=this._ctx||this.util.getContext(),this._ctx.save(),e&&(this._ctx.font=e);for(var n=0,o=0,i=(t=(t+"").split("\n")).length;o<i;o++)n=Math.max(this._ctx.measureText(t[o]).width,n);return this._ctx.restore(),this._textWidthCache[r]=n,++this._textWidthCacheCounter>this.TEXT_CACHE_MAX&&(this._textWidthCacheCounter=0,this._textWidthCache={}),n}},{key:"getTextHeight",value:function(t,e){var r=t+":"+e;if(this._textHeightCache[r])return this._textHeightCache[r];this._ctx=this._ctx||this.util.getContext(),this._ctx.save(),e&&(this._ctx.font=e),t=(t+"").split("\n");var n=(this._ctx.measureText("ZH").width+2)*t.length;return this._ctx.restore(),this._textHeightCache[r]=n,++this._textHeightCacheCounter>this.TEXT_CACHE_MAX&&(this._textHeightCacheCounter=0,this._textHeightCache={}),n}}])&&No(t.prototype,e),r&&No(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function Do(t){"@babel/helpers - typeof";return(Do="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Bo(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Fo(n.key),n)}}function Fo(t){var e=function(t,e){if("object"!=Do(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Do(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Do(e)?e:e+""}var Go=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.util=new wo,this._ctx=null,this.palette=["#ff9277"," #dddd00"," #ffc877"," #bbe3ff"," #d5ffbb","#bbbbff"," #ddb000"," #b0dd00"," #e2bbff"," #ffbbe3","#ff7777"," #ff9900"," #83dd00"," #77e3ff"," #778fff","#c877ff"," #ff77ab"," #ff6600"," #aa8800"," #77c7ff","#ad77ff"," #ff77ff"," #dd0083"," #777700"," #00aa00","#0088aa"," #8400dd"," #aa0088"," #dd0000"," #772e00"],this._palette=this.palette,this.highlightColor="rgba(0,0,255,1)",this._highlightColor=this.highlightColor,this.colorRegExp=/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i,this._nameColors={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#0ff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000",blanchedalmond:"#ffebcd",blue:"#00f",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#0ff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgrey:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#f0f",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#789",lightslategrey:"#789",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#0f0",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#f0f",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#f00",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#fff",whitesmoke:"#f5f5f5",yellow:"#ff0",yellowgreen:"#9acd32"},this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Color"}return e=t,(r=[{key:"customPalette",value:function(t){this.palette=t}},{key:"resetPalette",value:function(){this.palette=this._palette}},{key:"getColor",value:function(t,e){return t|=0,(e=e||this.palette)[t%e.length]}},{key:"customHighlight",value:function(t){this.highlightColor=t}},{key:"resetHighlight",value:function(){this.highlightColor=this._highlightColor}},{key:"getHighlightColor",value:function(){return this.highlightColor}},{key:"getRadialGradient",value:function(t,e,r,n,o,i,a){var s=this.util;this._ctx||(this._ctx=s.getContext());for(var u=this._ctx.createRadialGradient(t,e,r,n,o,i),l=0,c=a.length;l<c;l++)u.addColorStop(a[l][0],a[l][1]);return u.__nonRecursion=!0,u}},{key:"getLinearGradient",value:function(t,e,r,n,o){var i=this.util;this._ctx||(this._ctx=i.getContext());for(var a=this._ctx.createLinearGradient(t,e,r,n),s=0,u=o.length;s<u;s++)a.addColorStop(o[s][0],o[s][1]);return a.__nonRecursion=!0,a}},{key:"getStepColors",value:function(t,e,r){t=this.toRGBA(t),e=this.toRGBA(e),t=this.getData(t);for(var n=[],o=((e=this.getData(e))[0]-t[0])/r,i=(e[1]-t[1])/r,a=(e[2]-t[2])/r,s=(e[3]-t[3])/r,u=0,l=t[0],c=t[1],f=t[2],h=t[3];u<r;u++)n[u]=this.toColor([this.adjust(Math.floor(l),[0,255]),this.adjust(Math.floor(c),[0,255]),this.adjust(Math.floor(f),[0,255]),h.toFixed(4)-0],"rgba"),l+=o,c+=i,f+=a,h+=s;return l=e[0],c=e[1],f=e[2],h=e[3],n[u]=this.toColor([l,c,f,h],"rgba"),n}},{key:"getGradientColors",value:function(t,e){var r=[],n=t.length;if(void 0===e&&(e=20),1===n)r=this.getStepColors(t[0],t[0],e);else if(n>1)for(var o=0,i=n-1;o<i;o++){var a=this.getStepColors(t[o],t[o+1],e);o<i-1&&a.pop(),r=r.concat(a)}return r}},{key:"toColor",value:function(t,e){if(e=e||"rgb",t&&(3===t.length||4===t.length)){if(t=this.map(t,function(t){return t>1?Math.ceil(t):t}),e.indexOf("hex")>-1)return"#"+((1<<24)+(t[0]<<16)+(t[1]<<8)+ +t[2]).toString(16).slice(1);if(e.indexOf("hs")>-1){var r=this.map(t.slice(1,3),function(t){return t+"%"});t[1]=r[0],t[2]=r[1]}return e.indexOf("a")>-1?(3===t.length&&t.push(1),t[3]=this.adjust(t[3],[0,1]),e+"("+t.slice(0,4).join(",")+")"):e+"("+t.slice(0,3).join(",")+")"}}},{key:"toArray",value:function(t){(t=this.trim(t)).indexOf("rgba")<0&&(t=this.toRGBA(t));var e=[],r=0;return t.replace(/[\d.]+/g,function(t){r<3?t|=0:t=+t,e[r++]=t}),e}},{key:"convert",value:function(t,e){if(!this.isCalculableColor(t))return t;var r=this.getData(t),n=r[3];return void 0===n&&(n=1),t.indexOf("hsb")>-1?r=this._HSV_2_RGB(r):t.indexOf("hsl")>-1&&(r=this._HSL_2_RGB(r)),e.indexOf("hsb")>-1||e.indexOf("hsv")>-1?r=this._RGB_2_HSB(r):e.indexOf("hsl")>-1&&(r=this._RGB_2_HSL(r)),r[3]=n,this.toColor(r,e)}},{key:"toRGBA",value:function(t){return this.convert(t,"rgba")}},{key:"toRGB",value:function(t){return this.convert(t,"rgb")}},{key:"toHex",value:function(t){return this.convert(t,"hex")}},{key:"toHSVA",value:function(t){return this.convert(t,"hsva")}},{key:"toHSV",value:function(t){return this.convert(t,"hsv")}},{key:"toHSBA",value:function(t){return this.convert(t,"hsba")}},{key:"toHSB",value:function(t){return this.convert(t,"hsb")}},{key:"toHSLA",value:function(t){return this.convert(t,"hsla")}},{key:"toHSL",value:function(t){return this.convert(t,"hsl")}},{key:"toName",value:function(t){for(var e in this._nameColors)if(this.toHex(this._nameColors[e])===this.toHex(t))return e;return null}},{key:"trim",value:function(t){return String(t).replace(/\s+/g,"")}},{key:"normalize",value:function(t){if(this._nameColors[t]&&(t=this._nameColors[t]),t=(t=this.trim(t)).replace(/hsv/i,"hsb"),/^#[\da-f]{3}$/i.test(t)){var e=(3840&(t=parseInt(t.slice(1),16)))<<8,r=(240&t)<<4,n=15&t;t="#"+((1<<24)+(e<<4)+e+(r<<4)+r+(n<<4)+n).toString(16).slice(1)}return t}},{key:"lift",value:function(t,e){if(!this.isCalculableColor(t))return t;var r=e>0?1:-1;void 0===e&&(e=0),e=Math.abs(e)>1?1:Math.abs(e),t=this.toRGB(t);for(var n=this.getData(t),o=0;o<3;o++)n[o]=1===r?n[o]*(1-e)|0:(255-n[o])*e+n[o]|0;return"rgb("+n.join(",")+")"}},{key:"reverse",value:function(t){if(!this.isCalculableColor(t))return t;var e=this.getData(this.toRGBA(t));return e=this.map(e,function(t){return 255-t}),this.toColor(e,"rgb")}},{key:"mix",value:function(t,e,r){if(!this.isCalculableColor(t)||!this.isCalculableColor(e))return t;void 0===r&&(r=.5);for(var n=2*(r=1-this.adjust(r,[0,1]))-1,o=this.getData(this.toRGBA(t)),i=this.getData(this.toRGBA(e)),a=o[3]-i[3],s=((n*a==-1?n:(n+a)/(1+n*a))+1)/2,u=1-s,l=[],c=0;c<3;c++)l[c]=o[c]*s+i[c]*u;var f=o[3]*r+i[3]*(1-r);return f=Math.max(0,Math.min(1,f)),1===o[3]&&1===i[3]?this.toColor(l,"rgb"):(l[3]=f,this.toColor(l,"rgba"))}},{key:"random",value:function(){return"#"+Math.random().toString(16).slice(2,8)}},{key:"getData",value:function(e){var r,n,o=(e=this.normalize(e)).match(this.colorRegExp);if(null===o)throw new Error("The color format error");var i,a=[];if(o[2])i=[(r=o[2].replace("#","").split(""))[0]+r[1],r[2]+r[3],r[4]+r[5]],a=this.map(i,function(e){return t.prototype.adjust.call(this,parseInt(e,16),[0,255])});else if(o[4]){var s=o[4].split(",");n=s[3],i=s.slice(0,3),a=this.map(i,function(e){return e=Math.floor(e.indexOf("%")>0?2.55*parseInt(e,0):e),t.prototype.adjust.call(this,e,[0,255])}),void 0!==n&&a.push(this.adjust(parseFloat(n),[0,1]))}else if(o[5]||o[6]){var u=(o[5]||o[6]).split(","),l=parseInt(u[0],0)/360,c=u[1],f=u[2];n=u[3],(a=this.map([c,f],function(e){return t.prototype.adjust.call(this,parseFloat(e)/100,[0,1])})).unshift(l),void 0!==n&&a.push(this.adjust(parseFloat(n),[0,1]))}return a}},{key:"alpha",value:function(t,e){if(!this.isCalculableColor(t))return t;null===e&&(e=1);var r=this.getData(this.toRGBA(t));return r[3]=this.adjust(Number(e).toFixed(4),[0,1]),this.toColor(r,"rgba")}},{key:"map",value:function(t,e){if("function"!=typeof e)throw new TypeError;for(var r=t?t.length:0,n=0;n<r;n++)t[n]=e(t[n]);return t}},{key:"adjust",value:function(t,e){return t<=e[0]?t=e[0]:t>=e[1]&&(t=e[1]),t}},{key:"isCalculableColor",value:function(t){return t instanceof Array||"string"==typeof t}},{key:"_HSV_2_RGB",value:function(t){var e,r,n,o=t[0],i=t[1],a=t[2];if(0===i)e=255*a,r=255*a,n=255*a;else{var s=6*o;6===s&&(s=0);var u=0|s,l=a*(1-i),c=a*(1-i*(s-u)),f=a*(1-i*(1-(s-u))),h=0,p=0,d=0;0===u?(h=a,p=f,d=l):1===u?(h=c,p=a,d=l):2===u?(h=l,p=a,d=f):3===u?(h=l,p=c,d=a):4===u?(h=f,p=l,d=a):(h=a,p=l,d=c),e=255*h,r=255*p,n=255*d}return[e,r,n]}},{key:"_HSL_2_RGB",value:function(t){var e,r,n,o=t[0],i=t[1],a=t[2];if(0===i)e=255*a,r=255*a,n=255*a;else{var s,u=2*a-(s=a<.5?a*(1+i):a+i-i*a);e=255*this._HUE_2_RGB(u,s,o+1/3),r=255*this._HUE_2_RGB(u,s,o),n=255*this._HUE_2_RGB(u,s,o-1/3)}return[e,r,n]}},{key:"_HUE_2_RGB",value:function(t,e,r){return r<0&&(r+=1),r>1&&(r-=1),6*r<1?t+6*(e-t)*r:2*r<1?e:3*r<2?t+(e-t)*(2/3-r)*6:t}},{key:"_RGB_2_HSB",value:function(t){var e,r,n=t[0]/255,o=t[1]/255,i=t[2]/255,a=Math.min(n,o,i),s=Math.max(n,o,i),u=s-a,l=s;if(0===u)e=0,r=0;else{r=u/s;var c=((s-n)/6+u/2)/u,f=((s-o)/6+u/2)/u,h=((s-i)/6+u/2)/u;n===s?e=h-f:o===s?e=1/3+c-h:i===s&&(e=2/3+f-c),e<0&&(e+=1),e>1&&(e-=1)}return[e*=360,r*=100,l*=100]}},{key:"_RGB_2_HSL",value:function(t){var e,r,n=t[0]/255,o=t[1]/255,i=t[2]/255,a=Math.min(n,o,i),s=Math.max(n,o,i),u=s-a,l=(s+a)/2;if(0===u)e=0,r=0;else{r=l<.5?u/(s+a):u/(2-s-a);var c=((s-n)/6+u/2)/u,f=((s-o)/6+u/2)/u,h=((s-i)/6+u/2)/u;n===s?e=h-f:o===s?e=1/3+c-h:i===s&&(e=2/3+f-c),e<0&&(e+=1),e>1&&(e-=1)}return[e*=360,r*=100,l*=100]}}])&&Bo(e.prototype,r),n&&Bo(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,r,n}();function Uo(t){"@babel/helpers - typeof";return(Uo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function zo(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Vo(n.key),n)}}function Vo(t){var e=function(t,e){if("object"!=Uo(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Uo(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Uo(e)?e:e+""}var Ho=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),3===arguments.length&&this.computeBoundingBox(arguments),this.CLASS_NAME="SuperMap.LevelRenderer.Tool.ComputeBoundingBox"},(e=[{key:"computeBoundingBox",value:function(t,e,r){if(0!==t.length){for(var n=t[0][0],o=t[0][0],i=t[0][1],a=t[0][1],s=1;s<t.length;s++){var u=t[s];u[0]<n&&(n=u[0]),u[0]>o&&(o=u[0]),u[1]<i&&(i=u[1]),u[1]>a&&(a=u[1])}e[0]=n,e[1]=i,r[0]=o,r[1]=a}}},{key:"cubeBezier",value:function(t,e,r,n,o,i){var a=new jo,s=[];a.cubicExtrema(t[0],e[0],r[0],n[0],s);for(var u=0;u<s.length;u++)s[u]=a.cubicAt(t[0],e[0],r[0],n[0],s[u]);var l=[];a.cubicExtrema(t[1],e[1],r[1],n[1],l);for(var c=0;c<l.length;c++)l[c]=a.cubicAt(t[1],e[1],r[1],n[1],l[c]);s.push(t[0],n[0]),l.push(t[1],n[1]);var f=Math.min.apply(null,s),h=Math.max.apply(null,s),p=Math.min.apply(null,l),d=Math.max.apply(null,l);o[0]=f,o[1]=p,i[0]=h,i[1]=d}},{key:"quadraticBezier",value:function(t,e,r,n,o){var i=new jo,a=i.quadraticExtremum(t[0],e[0],r[0]),s=i.quadraticExtremum(t[1],e[1],r[1]),u=1-(a=Math.max(Math.min(a,1),0)),l=1-(s=Math.max(Math.min(s,1),0)),c=u*u*t[0]+2*u*a*e[0]+a*a*r[0],f=u*u*t[1]+2*u*a*e[1]+a*a*r[1],h=l*l*t[0]+2*l*s*e[0]+s*s*r[0],p=l*l*t[1]+2*l*s*e[1]+s*s*r[1];n[0]=Math.min(t[0],r[0],c,h),n[1]=Math.min(t[1],r[1],f,p),o[0]=Math.max(t[0],r[0],c,h),o[1]=Math.max(t[1],r[1],f,p)}},{key:"arc",value:function(t,e,r,n,o,i,a,s){var u=new Co,l=u.create(),c=u.create(),f=u.create();if(l[0]=Math.cos(n)*r+t,l[1]=Math.sin(n)*r+e,c[0]=Math.cos(o)*r+t,c[1]=Math.sin(o)*r+e,u.min(a,l,c),u.max(s,l,c),(n%=2*Math.PI)<0&&(n+=2*Math.PI),(o%=2*Math.PI)<0&&(o+=2*Math.PI),n>o&&!i?o+=2*Math.PI:n<o&&i&&(n+=2*Math.PI),i){var h=o;o=n,n=h}for(var p=0;p<o;p+=Math.PI/2)p>n&&(f[0]=Math.cos(p)*r+t,f[1]=Math.sin(p)*r+e,u.min(a,f,a),u.max(s,f,s))}}])&&zo(t.prototype,e),r&&zo(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function Wo(t){"@babel/helpers - typeof";return(Wo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function qo(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Yo(n.key),n)}}function Yo(t){var e=function(t,e){if("object"!=Wo(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Wo(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Wo(e)?e:e+""}var Xo=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Env";var e,r,n,o,i,a,s,u,l,c,f,h,p,d,y,v,g,m,b,w,S,x=this;return e=navigator.userAgent,r=x.os={},n=x.browser={},o=e.match(/Web[kK]it[\/]{0,1}([\d.]+)/),i=e.match(/(Android);?[\s\/]+([\d.]+)?/),a=e.match(/(iPad).*OS\s([\d_]+)/),s=e.match(/(iPod)(.*OS\s([\d_]+))?/),u=!a&&e.match(/(iPhone\sOS)\s([\d_]+)/),l=e.match(/(webOS|hpwOS)[\s\/]([\d.]+)/),c=l&&e.match(/TouchPad/),f=e.match(/Kindle\/([\d.]+)/),h=e.match(/Silk\/([\d._]+)/),p=e.match(/(BlackBerry).*Version\/([\d.]+)/),d=e.match(/(BB10).*Version\/([\d.]+)/),y=e.match(/(RIM\sTablet\sOS)\s([\d.]+)/),v=e.match(/PlayBook/),g=e.match(/Chrome\/([\d.]+)/)||e.match(/CriOS\/([\d.]+)/),m=e.match(/Firefox\/([\d.]+)/),b=e.match(/MSIE ([\d.]+)/),w=o&&e.match(/Mobile\//)&&!g,S=e.match(/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/)&&!g,(n.webkit=!!o)&&(n.version=o[1]),i&&(r.android=!0,r.version=i[2]),u&&!s&&(r.ios=r.iphone=!0,r.version=u[2].replace(/_/g,".")),a&&(r.ios=r.ipad=!0,r.version=a[2].replace(/_/g,".")),s&&(r.ios=r.ipod=!0,r.version=s[3]?s[3].replace(/_/g,"."):null),l&&(r.webos=!0,r.version=l[2]),c&&(r.touchpad=!0),p&&(r.blackberry=!0,r.version=p[2]),d&&(r.bb10=!0,r.version=d[2]),y&&(r.rimtabletos=!0,r.version=y[2]),v&&(n.playbook=!0),f&&(r.kindle=!0,r.version=f[1]),h&&(n.silk=!0,n.version=h[1]),!h&&r.android&&e.match(/Kindle Fire/)&&(n.silk=!0),g&&(n.chrome=!0,n.version=g[1]),m&&(n.firefox=!0,n.version=m[1]),b&&(n.ie=!0,n.version=b[1]),w&&(e.match(/Safari/)||r.ios)&&(n.safari=!0),S&&(n.webview=!0),b&&(n.ie=!0,n.version=b[1]),r.tablet=!!(a||v||i&&!e.match(/Mobile/)||m&&e.match(/Tablet/)||b&&!e.match(/Phone/)&&e.match(/Touch/)),r.phone=!(r.tablet||r.ipod||!(i||u||l||p||d||g&&e.match(/Android/)||g&&e.match(/CriOS\/([\d.]+)/)||m&&e.match(/Mobile/)||b&&e.match(/Touch/))),{browser:n,os:r,canvasSupported:!!document.createElement("canvas").getContext}},(e=[{key:"destory",value:function(){return!0}}])&&qo(t.prototype,e),r&&qo(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function Jo(t){"@babel/helpers - typeof";return(Jo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ko(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Qo(n.key),n)}}function Qo(t){var e=function(t,e){if("object"!=Jo(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Jo(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Jo(e)?e:e+""}var Zo=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.stop="function"==typeof window.addEventListener?function(t){t.preventDefault(),t.stopPropagation(),t.cancelBubble=!0}:function(t){t.returnValue=!1,t.cancelBubble=!0},this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Event"},(e=[{key:"getX",value:function(t){return void 0!==t.zrenderX&&t.zrenderX||void 0!==t.offsetX&&t.offsetX||void 0!==t.layerX&&t.layerX||void 0!==t.clientX&&t.clientX}},{key:"getY",value:function(t){return void 0!==t.zrenderY&&t.zrenderY||void 0!==t.offsetY&&t.offsetY||void 0!==t.layerY&&t.layerY||void 0!==t.clientY&&t.clientY}},{key:"getDelta",value:function(t){return void 0!==t.zrenderDelta&&t.zrenderDelta||void 0!==t.wheelDelta&&t.wheelDelta||void 0!==t.detail&&-t.detail}}])&&Ko(t.prototype,e),r&&Ko(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function $o(t){"@babel/helpers - typeof";return($o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ti(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ei(n.key),n)}}function ei(t){var e=function(t,e){if("object"!=$o(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=$o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==$o(e)?e:e+""}var ri=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Http"},(e=[{key:"get",value:function(t,e,r){if("object"===$o(t)){var n=t;t=n.url,e=n.onsuccess,r=n.onerror}var o=window.XMLHttpRequest?new XMLHttpRequest:new window.ActiveXObject("Microsoft.XMLHTTP");o.open("GET",t,!0),o.onreadystatechange=function(){4==o.readyState&&(o.status>=200&&o.status<300||304===o.status?e&&e(o.responseText):r&&r(),o.onreadystatechange=new Function,o=null)},o.send(null)}}])&&ti(t.prototype,e),r&&ti(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function ni(t){"@babel/helpers - typeof";return(ni="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function oi(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ii(n.key),n)}}function ii(t){var e=function(t,e){if("object"!=ni(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=ni(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ni(e)?e:e+""}var ai=function(t,e,r){return e&&oi(t.prototype,e),r&&oi(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)});function si(t){"@babel/helpers - typeof";return(si="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ui(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,li(n.key),n)}}function li(t){var e=function(t,e){if("object"!=si(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=si(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==si(e)?e:e+""}ai.EVENT={RESIZE:"resize",CLICK:"click",DBLCLICK:"dblclick",MOUSEWHEEL:"mousewheel",MOUSEMOVE:"mousemove",MOUSEOVER:"mouseover",MOUSEOUT:"mouseout",MOUSEDOWN:"mousedown",MOUSEUP:"mouseup",GLOBALOUT:"globalout",DRAGSTART:"dragstart",DRAGEND:"dragend",DRAGENTER:"dragenter",DRAGOVER:"dragover",DRAGLEAVE:"dragleave",DROP:"drop",touchClickDelay:300},ai.catchBrushException=!1,ai.debugMode=0;var ci=function(){return t=function t(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Log",function(){if(0!=+ai.debugMode)if(1==+ai.debugMode)for(var t in arguments)throw new Error(arguments[t]);else if(+ai.debugMode>1)for(var e in arguments)console.log(arguments[e])}},(e=[{key:"destory",value:function(){return!0}}])&&ui(t.prototype,e),r&&ui(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function fi(t){"@babel/helpers - typeof";return(fi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function hi(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,pi(n.key),n)}}function pi(t){var e=function(t,e){if("object"!=fi(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=fi(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==fi(e)?e:e+""}var di=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._radians=window.Math.PI/180,this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Math"},(e=[{key:"sin",value:function(t,e){return window.Math.sin(e?t*this._radians:t)}},{key:"cos",value:function(t,e){return window.Math.cos(e?t*this._radians:t)}},{key:"degreeToRadian",value:function(t){return t*this._radians}},{key:"radianToDegree",value:function(t){return t/this._radians}}])&&hi(t.prototype,e),r&&hi(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function yi(t){"@babel/helpers - typeof";return(yi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function vi(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,gi(n.key),n)}}function gi(t){var e=function(t,e){if("object"!=yi(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=yi(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==yi(e)?e:e+""}var mi=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.ArrayCtor="undefined"==typeof Float32Array?Array:Float32Array,this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Matrix"},(e=[{key:"create",value:function(){var t=new(0,this.ArrayCtor)(6);return this.identity(t),t}},{key:"identity",value:function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}},{key:"copy",value:function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}},{key:"mul",value:function(t,e,r){return t[0]=e[0]*r[0]+e[2]*r[1],t[1]=e[1]*r[0]+e[3]*r[1],t[2]=e[0]*r[2]+e[2]*r[3],t[3]=e[1]*r[2]+e[3]*r[3],t[4]=e[0]*r[4]+e[2]*r[5]+e[4],t[5]=e[1]*r[4]+e[3]*r[5]+e[5],t}},{key:"translate",value:function(t,e,r){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4]+r[0],t[5]=e[5]+r[1],t}},{key:"rotate",value:function(t,e,r){var n=e[0],o=e[2],i=e[4],a=e[1],s=e[3],u=e[5],l=Math.sin(r),c=Math.cos(r);return t[0]=n*c+a*l,t[1]=-n*l+a*c,t[2]=o*c+s*l,t[3]=-o*l+c*s,t[4]=c*i+l*u,t[5]=c*u-l*i,t}},{key:"scale",value:function(t,e,r){var n=r[0],o=r[1];return t[0]=e[0]*n,t[1]=e[1]*o,t[2]=e[2]*n,t[3]=e[3]*o,t[4]=e[4]*n,t[5]=e[5]*o,t}},{key:"invert",value:function(t,e){var r=e[0],n=e[2],o=e[4],i=e[1],a=e[3],s=e[5],u=r*a-i*n;return u?(u=1/u,t[0]=a*u,t[1]=-i*u,t[2]=-n*u,t[3]=r*u,t[4]=(n*s-a*o)*u,t[5]=(i*o-r*s)*u,t):null}},{key:"mulVector",value:function(t,e,r){var n=e[0],o=e[2],i=e[4],a=e[1],s=e[3],u=e[5];return t[0]=r[0]*n+r[1]*o+i,t[1]=r[0]*a+r[1]*s+u,t}}])&&vi(t.prototype,e),r&&vi(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function bi(t){"@babel/helpers - typeof";return(bi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function wi(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Si(n.key),n)}}function Si(t){var e=function(t,e){if("object"!=bi(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=bi(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==bi(e)?e:e+""}var xi=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return e=t,n=[{key:"SUtil_smoothBezier",value:function(e,r,n,o,i){i&&2===i.length||(i=[0,0]);var a,s,u=i,l=[],c=[],f=[],h=[],p=!!o;if(p){a=[1/0,1/0],s=[-1/0,-1/0];for(var d=e.length,y=0;y<d;y++)t.Util_vector.min(a,a,[e[y][0]+u[0],e[y][1]+u[1]]),t.Util_vector.max(s,s,[e[y][0]+u[0],e[y][1]+u[1]]);t.Util_vector.min(a,a,o[0]),t.Util_vector.max(s,s,o[1])}for(var v=e.length,g=0;g<v;g++){var m=[e[g][0]+u[0],e[g][1]+u[1]],b=void 0,w=void 0;if(n)b=[e[g?g-1:v-1][0]+u[0],e[g?g-1:v-1][1]+u[1]],w=[e[(g+1)%v][0]+u[0],e[(g+1)%v][1]+u[1]];else{if(0===g||g===v-1){l.push([e[g][0]+u[0],e[g][1]+u[1]]);continue}b=[e[g-1][0]+u[0],e[g-1][1]+u[1]],w=[e[g+1][0]+u[0],e[g+1][1]+u[1]]}t.Util_vector.sub(c,w,b),t.Util_vector.scale(c,c,r);var S=t.Util_vector.distance(m,b),x=t.Util_vector.distance(m,w),_=S+x;0!==_&&(S/=_,x/=_),t.Util_vector.scale(f,c,-S),t.Util_vector.scale(h,c,x);var E=t.Util_vector.add([],m,f),O=t.Util_vector.add([],m,h);p&&(t.Util_vector.max(E,E,a),t.Util_vector.min(E,E,s),t.Util_vector.max(O,O,a),t.Util_vector.min(O,O,s)),l.push(E),l.push(O)}return n&&l.push(l.shift()),l}},{key:"SUtil_smoothSpline",value:function(e,r,n,o){o&&2===o.length||(o=[0,0]);for(var i=o,a=e.length,s=[],u=0,l=1;l<a;l++)u+=t.Util_vector.distance([e[l-1][0]+i[0],e[l-1][1]+i[1]],[e[l][0]+i[0],e[l][1]+i[1]]);var c=u/5;c=c<a?a:c;for(var f=0;f<c;f++){var h=f/(c-1)*(r?a:a-1),p=Math.floor(h),d=h-p,y=void 0,v=[e[p%a][0]+i[0],e[p%a][1]+i[1]],g=void 0,m=void 0;r?(y=[e[(p-1+a)%a][0]+i[0],e[(p-1+a)%a][1]+i[1]],g=[e[(p+1)%a][0]+i[0],e[(p+1)%a][1]+i[1]],m=[e[(p+2)%a][0]+i[0],e[(p+2)%a][1]+i[1]]):(y=[e[0===p?p:p-1][0]+i[0],e[0===p?p:p-1][1]+i[1]],g=[e[p>a-2?a-1:p+1][0]+i[0],e[p>a-2?a-1:p+1][1]+i[1]],m=[e[p>a-3?a-1:p+2][0]+i[0],e[p>a-3?a-1:p+2][1]+i[1]]);var b=d*d,w=d*b;s.push([S(y[0],v[0],g[0],m[0],d,b,w),S(y[1],v[1],g[1],m[1],d,b,w)])}return s;function S(t,e,r,n,o,i,a){var s=.5*(r-t),u=.5*(n-e);return(2*(e-r)+s+u)*a+(-3*(e-r)-2*s-u)*i+s*o+e}}},{key:"SUtil_dashedLineTo",value:function(t,e,r,n,o,i,a){var s=[5,5];if(i="number"!=typeof i?5:i,t.setLineDash)return s[0]=i,s[1]=i,a&&a instanceof Array?t.setLineDash(a):t.setLineDash(s),t.moveTo(e,r),void t.lineTo(n,o);var u=n-e,l=o-r,c=Math.floor(Math.sqrt(u*u+l*l)/i);u/=c,l/=c;for(var f=!0,h=0;h<c;++h)f?t.moveTo(e,r):t.lineTo(e,r),f=!f,e+=u,r+=l;t.lineTo(n,o)}}],(r=null)&&wi(e.prototype,r),n&&wi(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,r,n}();function _i(t){"@babel/helpers - typeof";return(_i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ei(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Oi(n.key),n)}}function Oi(t){var e=function(t,e){if("object"!=_i(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=_i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==_i(e)?e:e+""}xi.Util_area=new Ro,xi.Util_color=new Go,xi.Util_computeBoundingBox=new Ho,xi.Util_curve=new jo,xi.Util_env=new Xo,xi.Util_event=new Zo,xi.Util_http=new ri,xi.Util_log=new ci,xi.Util_math=new di,xi.Util_matrix=new mi,xi.Util=new wo,xi.Util_vector=new Co;var Pi=function(){return t=function t(){var e;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.position=[0,0],this.rotation=[0,0,0],this.scale=[1,1,0,0],this.needLocalTransform=!1,this.needTransform=!1,this.CLASS_NAME="SuperMap.LevelRenderer.Transformable",this.lookAt=(e=xi.Util_vector.create(),function(t){this.transform||(this.transform=xi.Util_matrix.create());var r=this.transform;function n(t){return t>-5e-5&&t<5e-5}xi.Util_vector.sub(e,t,this.position),n(e[0])&&n(e[1])||(xi.Util_vector.normalize(e,e),r[2]=e[0]*this.scale[1],r[3]=e[1]*this.scale[1],r[0]=e[1]*this.scale[0],r[1]=-e[0]*this.scale[0],r[4]=this.position[0],r[5]=this.position[1],this.decomposeTransform())})},(e=[{key:"destroy",value:function(){this.position=null,this.rotation=null,this.scale=null,this.needLocalTransform=null,this.needTransform=null}},{key:"updateNeedTransform",value:function(){function t(t){return t>5e-5||t<-5e-5}this.needLocalTransform=t(this.rotation[0])||t(this.position[0])||t(this.position[1])||t(this.scale[0]-1)||t(this.scale[1]-1)}},{key:"updateTransform",value:function(){if(this.updateNeedTransform(),this.parent?this.needTransform=this.needLocalTransform||this.parent.needTransform:this.needTransform=this.needLocalTransform,this.needTransform){var t=[0,0],e=this.transform||xi.Util_matrix.create();if(xi.Util_matrix.identity(e),this.needLocalTransform){if(o(this.scale[0])||o(this.scale[1])){t[0]=-this.scale[2]||0,t[1]=-this.scale[3]||0;var r=o(t[0])||o(t[1]);r&&xi.Util_matrix.translate(e,e,t),xi.Util_matrix.scale(e,e,this.scale),r&&(t[0]=-t[0],t[1]=-t[1],xi.Util_matrix.translate(e,e,t))}if(this.rotation instanceof Array){if(0!==this.rotation[0]){t[0]=-this.rotation[1]||0,t[1]=-this.rotation[2]||0;var n=o(t[0])||o(t[1]);n&&xi.Util_matrix.translate(e,e,t),xi.Util_matrix.rotate(e,e,this.rotation[0]),n&&(t[0]=-t[0],t[1]=-t[1],xi.Util_matrix.translate(e,e,t))}}else 0!=+this.rotation&&xi.Util_matrix.rotate(e,e,this.rotation);(o(this.position[0])||o(this.position[1]))&&xi.Util_matrix.translate(e,e,this.position)}this.transform=e,this.parent&&this.parent.needTransform&&(this.needLocalTransform?xi.Util_matrix.mul(this.transform,this.parent.transform,this.transform):xi.Util_matrix.copy(this.transform,this.parent.transform))}function o(t){return t>5e-5||t<-5e-5}}},{key:"setTransform",value:function(t){if(this.needTransform){var e=this.transform;t.transform(e[0],e[1],e[2],e[3],e[4],e[5])}}},{key:"decomposeTransform",value:function(){if(this.transform){var t=this.transform,e=t[0]*t[0]+t[1]*t[1],r=this.position,n=this.scale,o=this.rotation;a(e-1)&&(e=Math.sqrt(e));var i=t[2]*t[2]+t[3]*t[3];a(i-1)&&(i=Math.sqrt(i)),r[0]=t[4],r[1]=t[5],n[0]=e,n[1]=i,n[2]=n[3]=0,o[0]=Math.atan2(-t[1]/i,t[0]/e),o[1]=o[2]=0}function a(t){return t>5e-5||t<-5e-5}}}])&&Ei(t.prototype,e),r&&Ei(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function ki(t){"@babel/helpers - typeof";return(ki="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ci(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ti(n.key),n)}}function Ti(t){var e=function(t,e){if("object"!=ki(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=ki(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ki(e)?e:e+""}function Ai(t,e,r){return e=ji(e),function(t,e){if(e&&("object"===ki(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],ji(t).constructor):e.apply(t,r))}function Mi(){return(Mi="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ji(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function ji(t){return(ji=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ii(t,e){return(Ii=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Ni=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r=Ai(this,e,[t]),t=t||{},r.id=null,r.type="group",r.clipShape=null,r._children=[],r._storage=null,r.__dirty=!0,r.ignore=!1,W.extend(r,t),r.id=r.id||W.createUniqueID("smShapeGroup_"),r.CLASS_NAME="SuperMap.LevelRenderer.Group",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ii(t,e)}(e,k(Eo,Pi)),r=e,(n=[{key:"destroy",value:function(){this.id=null,this.type=null,this.clipShape=null,this._children=null,this._storage=null,this.__dirty=null,this.ignore=null,Mi(ji(e.prototype),"destroy",this).call(this)}},{key:"children",value:function(){return this._children.slice()}},{key:"childAt",value:function(t){return this._children[t]}},{key:"addChild",value:function(t){t!=this&&t.parent!=this&&(t.parent&&t.parent.removeChild(t),this._children.push(t),t.parent=this,this._storage&&this._storage!==t._storage&&(this._storage.addToMap(t),t instanceof e&&t.addChildrenToStorage(this._storage)))}},{key:"removeChild",value:function(t){var r=W.indexOf(this._children,t);this._children.splice(r,1),t.parent=null,this._storage&&(this._storage.delFromMap(t.id),t instanceof e&&t.delChildrenFromStorage(this._storage))}},{key:"eachChild",value:function(t,e){for(var r=!!e,n=0;n<this._children.length;n++){var o=this._children[n];r?t.call(e,o):t(o)}}},{key:"traverse",value:function(t,e){for(var r=!!e,n=0;n<this._children.length;n++){var o=this._children[n];r?t.call(e,o):t(o),"group"===o.type&&o.traverse(t,e)}}},{key:"addChildrenToStorage",value:function(t){for(var e=0;e<this._children.length;e++){var r=this._children[e];t.addToMap(r),"group"===r.type&&r.addChildrenToStorage(t)}}},{key:"delChildrenFromStorage",value:function(t){for(var e=0;e<this._children.length;e++){var r=this._children[e];t.delFromMap(r.id),"group"===r.type&&r.delChildrenFromStorage(t)}}},{key:"modSelf",value:function(){this.__dirty=!0}}])&&Ci(r.prototype,n),o&&Ci(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function Li(t){"@babel/helpers - typeof";return(Li="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ri(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Di(n.key),n)}}function Di(t){var e=function(t,e){if("object"!=Li(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Li(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Li(e)?e:e+""}var Bi=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._elements={},this._hoverElements=[],this._roots=[],this._shapeList=[],this._shapeListOffset=0,this.CLASS_NAME="SuperMap.LevelRenderer.Storage"}return e=t,n=[{key:"shapeCompareFunc",value:function(t,e){return t.zlevel==e.zlevel?t.z==e.z?t.__renderidx-e.__renderidx:t.z-e.z:t.zlevel-e.zlevel}}],(r=[{key:"destroy",value:function(){this.dispose(),this._shapeList=null,this._shapeListOffset=null}},{key:"iterShape",value:function(t,e){if(!e){e={hover:!1,normal:"down",update:!1}}if(e.hover)for(var r=0,n=this._hoverElements.length;r<n;r++){var o=this._hoverElements[r];if(o.updateTransform(),t(o))return this}switch(e.update&&this.updateShapeList(),e.normal){case"down":for(var i=this._shapeList.length;i--;)if(t(this._shapeList[i]))return this;break;default:for(var a=0,s=this._shapeList.length;a<s;a++)if(t(this._shapeList[a]))return this}return this}},{key:"getHoverShapes",value:function(e){for(var r=[],n=this._hoverElements.length,o=0;o<n;o++){r.push(this._hoverElements[o]);var i=this._hoverElements[o].hoverConnect;if(i)for(var a,s=0,u=(i=i instanceof Array?i:[i]).length;s<u;s++)(a=i[s].id?i[s]:this.get(i[s]))&&r.push(a)}if(r.sort(t.shapeCompareFunc),e)for(var l=0,c=r.length;l<c;l++)r[l].updateTransform();return r}},{key:"getShapeList",value:function(t){return t&&this.updateShapeList(),this._shapeList}},{key:"updateShapeList",value:function(){this._shapeListOffset=0;for(var e=this._roots.length,r=0;r<e;r++){var n=this._roots[r];this._updateAndAddShape(n)}this._shapeList.length=this._shapeListOffset;for(var o=this._shapeList.length,i=0;i<o;i++)this._shapeList[i].__renderidx=i;this._shapeList.sort(t.shapeCompareFunc)}},{key:"_updateAndAddShape",value:function(t,e){if(!t.ignore)if(t.updateTransform(),"group"==t.type){t.clipShape&&(t.clipShape.parent=t,t.clipShape.updateTransform(),e?(e=e.slice()).push(t.clipShape):e=[t.clipShape]);for(var r=0;r<t._children.length;r++){var n=t._children[r];n.__dirty=t.__dirty||n.__dirty,this._updateAndAddShape(n,e)}t.__dirty=!1}else t.__clipShapes=e,this._shapeList[this._shapeListOffset++]=t}},{key:"mod",value:function(t,e){var r=this._elements[t];if(r&&(r.modSelf(),e))if(e.parent||e._storage||e.__startClip){var n={};for(var o in e)"parent"!=o&&"_storage"!=o&&"__startClip"!=o&&e.hasOwnProperty(o)&&(n[o]=e[o]);(new wo).merge(r,n,!0)}else(new wo).merge(r,e,!0);return this}},{key:"drift",value:function(t,e,r){var n=this._elements[t];return n&&(n.needTransform=!0,"horizontal"===n.draggable?r=0:"vertical"===n.draggable&&(e=0),(!n.ondrift||n.ondrift&&!n.ondrift(e,r))&&n.drift(e,r)),this}},{key:"addHover",value:function(t){return t.updateNeedTransform(),this._hoverElements.push(t),this}},{key:"delHover",value:function(){return this._hoverElements=[],this}},{key:"hasHoverShape",value:function(){return this._hoverElements.length>0}},{key:"addRoot",value:function(t){t instanceof Ni&&t.addChildrenToStorage(this),this.addToMap(t),this._roots.push(t)}},{key:"delRoot",value:function(t){if(void 0===t){for(var e=0;e<this._roots.length;e++){var r=this._roots[e];r instanceof Ni&&r.delChildrenFromStorage(this)}return this._elements={},this._hoverElements=[],void(this._roots=[])}if(t instanceof Array)for(var n=t.length,o=0;o<n;o++)this.delRoot(t[o]);else{var i;i="string"==typeof t?this._elements[t]:t;var a=(new wo).indexOf(this._roots,i);a>=0&&(this.delFromMap(i.id),this._roots.splice(a,1),i instanceof Ni&&i.delChildrenFromStorage(this))}}},{key:"addToMap",value:function(t){return t instanceof Ni&&(t._storage=this),t.modSelf(),this._elements[t.id]=t,this}},{key:"get",value:function(t){return this._elements[t]}},{key:"delFromMap",value:function(t){var e=this._elements[t];return e&&(delete this._elements[t],e instanceof Ni&&(e._storage=null)),this}},{key:"dispose",value:function(){this._elements=null,this._roots=null,this._hoverElements=null}}])&&Ri(e.prototype,r),n&&Ri(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,r,n}();function Fi(t){"@babel/helpers - typeof";return(Fi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Gi(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ui(n.key),n)}}function Ui(t){var e=function(t,e){if("object"!=Fi(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Fi(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Fi(e)?e:e+""}function zi(t,e,r){return e=Vi(e),function(t,e){if(e&&("object"===Fi(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Vi(t).constructor):e.apply(t,r))}function Vi(t){return(Vi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Hi(t,e){return(Hi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Wi=function(t){function e(t,r,n,o){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(i=zi(this,e,[t,r,n,o])).x=t,i.y=r,i.width=n,i.height=o,i.CLASS_NAME="SuperMap.Geometry.Rectangle",i.geometryType="Rectangle",i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Hi(t,e)}(e,L),r=e,(n=[{key:"calculateBounds",value:function(){this.bounds=new Gt(this.x,this.y,this.x+this.width,this.y+this.height)}},{key:"getArea",value:function(){return this.width*this.height}}])&&Gi(r.prototype,n),o&&Gi(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function qi(t){"@babel/helpers - typeof";return(qi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Yi(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Xi(n.key),n)}}function Xi(t){var e=function(t,e){if("object"!=qi(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=qi(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==qi(e)?e:e+""}var Ji=function(){return t=function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.value=e||"",this.name=r||"token",this.CLASS_NAME="SuperMap.Credential"},(e=[{key:"getUrlParameters",value:function(){return this.name+"="+this.value}},{key:"getValue",value:function(){return this.value}},{key:"destroy",value:function(){this.value=null,this.name=null}}])&&Yi(t.prototype,e),r&&Yi(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();Ji.CREDENTIAL=null;var Ki={toISOString:function(){if("toISOString"in Date.prototype)return function(t){return t.toISOString()};var t=function(t,e){for(var r=t+"";r.length<e;)r="0"+r;return r};return function(e){return isNaN(e.getTime())?"Invalid Date":e.getUTCFullYear()+"-"+t(e.getUTCMonth()+1,2)+"-"+t(e.getUTCDate(),2)+"T"+t(e.getUTCHours(),2)+":"+t(e.getUTCMinutes(),2)+":"+t(e.getUTCSeconds(),2)+"."+t(e.getUTCMilliseconds(),3)+"Z"}}(),parse:function(t){var e,r=t.match(/^(?:(\d{4})(?:-(\d{2})(?:-(\d{2}))?)?)?(?:(?:T(\d{1,2}):(\d{2}):(\d{2}(?:\.\d+)?)(Z|(?:[+-]\d{1,2}(?::(\d{2}))?)))|Z)?$/);if(r&&(r[1]||r[7])){var n=parseInt(r[1],10)||0,o=parseInt(r[2],10)-1||0,i=parseInt(r[3],10)||1;e=new Date(Date.UTC(n,o,i));var a=r[7];if(a){var s=parseInt(r[4],10),u=parseInt(r[5],10),l=parseFloat(r[6]),c=0|l,f=Math.round(1e3*(l-c));if(e.setUTCHours(s,u,c,f),"Z"!==a){var h=-1e3*(60*parseInt(a,10)*60+60*(parseInt(r[8],10)||0));e=new Date(e.getTime()+h)}}}else e=new Date("invalid");return e}},Qi={observers:!1,KEY_SPACE:32,KEY_BACKSPACE:8,KEY_TAB:9,KEY_RETURN:13,KEY_ESC:27,KEY_LEFT:37,KEY_UP:38,KEY_RIGHT:39,KEY_DOWN:40,KEY_DELETE:46,element:function(t){return t.target||t.srcElement},isSingleTouch:function(t){return t.touches&&1===t.touches.length},isMultiTouch:function(t){return t.touches&&t.touches.length>1},isLeftClick:function(t){return t.which&&1===t.which||t.button&&1===t.button},isRightClick:function(t){return t.which&&3===t.which||t.button&&2===t.button},stop:function(t,e){e||(t.preventDefault?t.preventDefault():t.returnValue=!1),t.stopPropagation?t.stopPropagation():t.cancelBubble=!0},findElement:function(t,e){for(var r=Qi.element(t);r.parentNode&&(!r.tagName||r.tagName.toUpperCase()!=e.toUpperCase());)r=r.parentNode;return r},observe:function(t,e,r,n){var o=W.getElement(t);if(n=n||!1,"keypress"===e&&(navigator.appVersion.match(/Konqueror|Safari|KHTML/)||o.attachEvent)&&(e="keydown"),this.observers||(this.observers={}),!o._eventCacheID){var i="eventCacheID_";o.id&&(i=o.id+"_"+i),o._eventCacheID=W.createUniqueID(i)}var a=o._eventCacheID;this.observers[a]||(this.observers[a]=[]),this.observers[a].push({element:o,name:e,observer:r,useCapture:n}),o.addEventListener?"mousewheel"===e?o.addEventListener(e,r,{useCapture:n,passive:!1}):o.addEventListener(e,r,n):o.attachEvent&&o.attachEvent("on"+e,r)},stopObservingElement:function(t){var e=W.getElement(t)._eventCacheID;this._removeElementObservers(Qi.observers[e])},_removeElementObservers:function(t){if(t)for(var e=t.length-1;e>=0;e--){var r=t[e],n=new Array(r.element,r.name,r.observer,r.useCapture);Qi.stopObserving.apply(this,n)}},stopObserving:function(t,e,r,n){n=n||!1;var o=W.getElement(t),i=o._eventCacheID;"keypress"===e&&(navigator.appVersion.match(/Konqueror|Safari|KHTML/)||o.detachEvent)&&(e="keydown");var a=!1,s=Qi.observers[i];if(s)for(var u=0;!a&&u<s.length;){var l=s[u];if(l.name===e&&l.observer===r&&l.useCapture===n){s.splice(u,1),0==s.length&&delete Qi.observers[i],a=!0;break}u++}return a&&(o.removeEventListener?o.removeEventListener(e,r,n):o&&o.detachEvent&&o.detachEvent("on"+e,r)),a},unloadCache:function(){if(Qi&&Qi.observers){for(var t in Qi.observers){var e=Qi.observers[t];Qi._removeElementObservers.apply(this,[e])}Qi.observers=!1}},CLASS_NAME:"SuperMap.Event"};function Zi(t){"@babel/helpers - typeof";return(Zi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function $i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ta(n.key),n)}}function ta(t){var e=function(t,e){if("object"!=Zi(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Zi(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Zi(e)?e:e+""}Qi.observe(window,"resize",Qi.unloadCache,!1);var ea=function(){function t(e,r,n,o,i){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.BROWSER_EVENTS=["mouseover","mouseout","mousedown","mouseup","mousemove","click","dblclick","rightclick","dblrightclick","resize","focus","blur","touchstart","touchmove","touchend","keydown","MSPointerDown","MSPointerUp","pointerdown","pointerup","MSGestureStart","MSGestureChange","MSGestureEnd","contextmenu"],this.listeners={},this.object=e,this.element=null,this.eventTypes=[],this.eventHandler=null,this.fallThrough=o,this.includeXY=!1,this.extensions={},this.extensionCount={},this.clearMouseListener=null,W.extend(this,i),null!=n)for(var a=0,s=n.length;a<s;a++)this.addEventType(n[a]);null!=r&&this.attachToElement(r),this.CLASS_NAME="SuperMap.Events"}return e=t,(r=[{key:"destroy",value:function(){for(var t in this.extensions)"boolean"!=typeof this.extensions[t]&&this.extensions[t].destroy();this.extensions=null,this.element&&(Qi.stopObservingElement(this.element),this.element.hasScrollEvent&&Qi.stopObserving(window,"scroll",this.clearMouseListener)),this.element=null,this.listeners=null,this.object=null,this.eventTypes=null,this.fallThrough=null,this.eventHandler=null}},{key:"addEventType",value:function(t){this.listeners[t]||(this.eventTypes.push(t),this.listeners[t]=[])}},{key:"attachToElement",value:function(t){this.element?Qi.stopObservingElement(this.element):(this.eventHandler=A.bindAsEventListener(this.handleBrowserEvent,this),this.clearMouseListener=A.bind(this.clearMouseCache,this)),this.element=t;for(var e=0,r=this.BROWSER_EVENTS.length;e<r;e++){var n=this.BROWSER_EVENTS[e];this.addEventType(n),Qi.observe(t,n,this.eventHandler)}Qi.observe(t,"dragstart",Qi.stop)}},{key:"on",value:function(t){for(var e in t)"scope"!==e&&t.hasOwnProperty(e)&&this.register(e,t.scope,t[e])}},{key:"register",value:function(e,r,n,o){if(e in t&&!this.extensions[e]&&(this.extensions[e]=new t[e](this)),null!=n&&-1!==W.indexOf(this.eventTypes,e)){null==r&&(r=this.object);var i=this.listeners[e];i||(i=[],this.listeners[e]=i,this.extensionCount[e]=0);var a={obj:r,func:n};o?(i.splice(this.extensionCount[e],0,a),"object"===Zi(o)&&o.extension&&this.extensionCount[e]++):i.push(a)}}},{key:"registerPriority",value:function(t,e,r){this.register(t,e,r,!0)}},{key:"un",value:function(t){for(var e in t)"scope"!==e&&t.hasOwnProperty(e)&&this.unregister(e,t.scope,t[e])}},{key:"unregister",value:function(t,e,r){null==e&&(e=this.object);var n=this.listeners[t];if(null!=n)for(var o=0,i=n.length;o<i;o++)if(n[o].obj===e&&n[o].func===r){n.splice(o,1);break}}},{key:"remove",value:function(t){null!=this.listeners[t]&&(this.listeners[t]=[])}},{key:"triggerEvent",value:function(t,e){var r=this.listeners[t];if(r&&0!=r.length){var n;null==e&&(e={}),e.object=this.object,e.element=this.element,e.type||(e.type=t);for(var o=0,i=(r=r.slice()).length;o<i;o++){var a=r[o];if(void 0!=(n=a.func.apply(a.obj,[e]))&&!1===n)break}return this.fallThrough||Qi.stop(e,!0),n}}},{key:"handleBrowserEvent",value:function(t){var e=t.type,r=this.listeners[e];if(r&&0!=r.length){var n=t.touches;if(n&&n[0]){for(var o,i=0,a=0,s=n.length,u=0;u<s;++u)i+=(o=n[u]).clientX,a+=o.clientY;t.clientX=i/s,t.clientY=a/s}this.includeXY&&(t.xy=this.getMousePosition(t)),this.triggerEvent(e,t)}}},{key:"clearMouseCache",value:function(){this.element.scrolls=null,this.element.lefttop=null;var t=document.body;t&&(0==t.scrollTop&&0==t.scrollLeft||!navigator.userAgent.match(/iPhone/i))&&(this.element.offsets=null)}},{key:"getMousePosition",value:function(t){if(this.includeXY?this.element.hasScrollEvent||(Qi.observe(window,"scroll",this.clearMouseListener),this.element.hasScrollEvent=!0):this.clearMouseCache(),!this.element.scrolls){var e=W.getViewportElement();this.element.scrolls=[e.scrollLeft,e.scrollTop]}return this.element.lefttop||(this.element.lefttop=[document.documentElement.clientLeft||0,document.documentElement.clientTop||0]),this.element.offsets||(this.element.offsets=W.pagePosition(this.element)),new jt(t.clientX+this.element.scrolls[0]-this.element.offsets[0]-this.element.lefttop[0],t.clientY+this.element.scrolls[1]-this.element.offsets[1]-this.element.lefttop[1])}}])&&$i(e.prototype,r),n&&$i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,r,n}();function ra(t){"@babel/helpers - typeof";return(ra="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function na(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,oa(n.key),n)}}function oa(t){var e=function(t,e){if("object"!=ra(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=ra(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ra(e)?e:e+""}function ia(t,e,r){return e=aa(e),function(t,e){if(e&&("object"===ra(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],aa(t).constructor):e.apply(t,r))}function aa(t){return(aa=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function sa(t,e){return(sa=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}ea.prototype.BROWSER_EVENTS=["mouseover","mouseout","mousedown","mouseup","mousemove","click","dblclick","rightclick","dblrightclick","resize","focus","blur","touchstart","touchmove","touchend","keydown","MSPointerDown","MSPointerUp","pointerdown","pointerup","MSGestureStart","MSGestureChange","MSGestureEnd","contextmenu"];var ua=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=ia(this,e,[t])).CLASS_NAME="SuperMap.Geometry3D",r.position=null,r.rotationX=null,r.rotationY=null,r.rotationZ=null,r.scaleX=null,r.scaleY=null,r.scaleZ=null,W.extend(r,t),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&sa(t,e)}(e,zn),r=e,(n=[{key:"destroy",value:function(){this.position=null,this.rotationX=null,this.rotationY=null,this.rotationZ=null,this.scaleX=null,this.scaleY=null,this.scaleZ=null}}])&&na(r.prototype,n),o&&na(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function la(t){"@babel/helpers - typeof";return(la="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ca(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,fa(n.key),n)}}function fa(t){var e=function(t,e){if("object"!=la(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=la(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==la(e)?e:e+""}function ha(t,e,r){return e=da(e),function(t,e){if(e&&("object"===la(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],da(t).constructor):e.apply(t,r))}function pa(){return(pa="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=da(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function da(t){return(da=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ya(t,e){return(ya=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var va=function(t){function e(t){var r,n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r=ha(this,e,[t]),t=t||{},r.id=null,r.style={},r.highlightStyle=null,r.parent=null,r.__dirty=!0,r.__clipShapes=[],r.invisible=!1,r.ignore=!1,r.zlevel=0,r.draggable=!1,r.clickable=!1,r.hoverable=!0,r.z=0,r.refOriginalPosition=[0,0],r.refDataID=null,r.isHoverByRefDataID=!1,r.refDataHoverGroup=null,r.dataInfo=null,W.extend(r,t),r.id=r.id||W.createUniqueID("smShape_"),r.CLASS_NAME="SuperMap.LevelRenderer.Shape",r.getTansform=(n=[],function(t,e){var r=[t,e];return this.needTransform&&this.transform&&(xi.Util_matrix.invert(n,this.transform),xi.Util_matrix.mulVector(r,n,[t,e,1]),t==r[0]&&e==r[1]&&this.updateNeedTransform()),r}),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ya(t,e)}(e,k(Eo,Pi)),r=e,o=[{key:"_fillText",value:function(t,r,n,o,i,a,s){i&&(t.font=i),t.textAlign=a,t.textBaseline=s;var u=e._getTextRect(r,n,o,i,a,s);r=(r+"").split("\n");var l=xi.Util_area.getTextHeight("ZH",i);switch(s){case"top":o=u.y;break;case"bottom":o=u.y+l;break;default:o=u.y+l/2}for(var c=0,f=r.length;c<f;c++)t.fillText(r[c],n,o),o+=l}},{key:"_getTextRect",value:function(t,e,r,n,o,i){var a=xi.Util_area.getTextWidth(t,n),s=xi.Util_area.getTextHeight("ZH",n);switch(t=(t+"").split("\n"),o){case"end":case"right":e-=a;break;case"center":e-=a/2}switch(i){case"top":break;case"bottom":r-=s*t.length;break;default:r-=s*t.length/2}return{x:e,y:r,width:a,height:s*t.length}}}],(n=[{key:"destroy",value:function(){this.id=null,this.style=null,this.highlightStyle=null,this.parent=null,this.__dirty=null,this.__clipShapes=null,this.invisible=null,this.ignore=null,this.zlevel=null,this.draggable=null,this.clickable=null,this.hoverable=null,this.z=null,this.refOriginalPosition=null,this.refDataID=null,this.refDataHoverGroup=null,this.isHoverByRefDataID=null,this.dataInfo=null,pa(da(e.prototype),"destroy",this).call(this)}},{key:"brush",value:function(t,e){var r=this.beforeBrush(t,e);switch(t.beginPath(),this.buildPath(t,r),r.brushType){case"both":this.setCtxGlobalAlpha(t,"fill",r),t.fill(),r.lineWidth>0&&(this.setCtxGlobalAlpha(t,"stroke",r),t.stroke()),this.setCtxGlobalAlpha(t,"reset",r);break;case"stroke":this.setCtxGlobalAlpha(t,"stroke",r),r.lineWidth>0&&t.stroke(),this.setCtxGlobalAlpha(t,"reset",r);break;default:this.setCtxGlobalAlpha(t,"fill",r),t.fill(),this.setCtxGlobalAlpha(t,"reset",r)}this.drawText(t,r,this.style),this.afterBrush(t)}},{key:"beforeBrush",value:function(t,e){var r=this.style;return this.brushTypeOnly&&(r.brushType=this.brushTypeOnly),e&&(r=this.getHighlightStyle(r,this.highlightStyle||{},this.brushTypeOnly)),"stroke"==this.brushTypeOnly&&(r.strokeColor=r.strokeColor||r.color),t.save(),this.doClip(t),this.setContext(t,r),this.setTransform(t),r}},{key:"afterBrush",value:function(t){t.restore()}},{key:"setContext",value:function(t,e){for(var r=[["color","fillStyle"],["strokeColor","strokeStyle"],["opacity","globalAlpha"],["lineCap","lineCap"],["lineJoin","lineJoin"],["miterLimit","miterLimit"],["lineWidth","lineWidth"],["shadowBlur","shadowBlur"],["shadowColor","shadowColor"],["shadowOffsetX","shadowOffsetX"],["shadowOffsetY","shadowOffsetY"]],n=0,o=r.length;n<o;n++){var i=e[r[n][0]],a=r[n][1];void 0!==i&&(t[a]=i)}}},{key:"doClip",value:function(t){var e=xi.Util_matrix.create();if(this.__clipShapes)for(var r=0;r<this.__clipShapes.length;r++){var n=this.__clipShapes[r];if(n.needTransform){var o=n.transform;xi.Util_matrix.invert(e,o),t.transform(o[0],o[1],o[2],o[3],o[4],o[5])}if(t.beginPath(),n.buildPath(t,n.style),t.clip(),n.needTransform){var i=e;t.transform(i[0],i[1],i[2],i[3],i[4],i[5])}}}},{key:"getHighlightStyle",value:function(t,e,r){var n={};for(var o in t)n[o]=t[o];var i=xi.Util_color.getHighlightColor();for(var a in"stroke"!=t.brushType?(n.strokeColor=i,n.lineWidth=t.lineWidth||1,n.brushType="both"):"stroke"!=r?(n.strokeColor=i,n.lineWidth=t.lineWidth||1):n.strokeColor=e.strokeColor||xi.Util_color.mix(t.strokeColor,xi.Util_color.toRGB(i)),e)void 0!==e[a]&&(n[a]=e[a]);return n}},{key:"getHighlightZoom",value:function(){return"text"!=this.type?6:2}},{key:"drift",value:function(t,e){this.position[0]+=t,this.position[1]+=e}},{key:"buildPath",value:function(t,e){xi.Util_log("buildPath not implemented in "+this.type)}},{key:"getRect",value:function(t){xi.Util_log("getRect not implemented in "+this.type)}},{key:"isCover",value:function(t,e){var r=this.getTansform(t,e);t=r[0],e=r[1];var n=this.style.__rect;return n||(n=this.style.__rect=this.getRect(this.style)),t>=n.x&&t<=n.x+n.width&&e>=n.y&&e<=n.y+n.height&&xi.Util_area.isInside(this,this.style,t,e)}},{key:"drawText",value:function(t,r,n){if(void 0!==r.text&&!1!==r.text){var o=r.textColor||r.color||r.strokeColor;t.fillStyle=o;var i,a,s,u,l=10,c=r.textPosition||this.textPosition||"top",f=[];switch(f=this.refOriginalPosition&&2===this.refOriginalPosition.length?this.refOriginalPosition:[0,0],c){case"inside":case"top":case"bottom":case"left":case"right":if(this.getRect){var h=(n||r).__rect||this.getRect(n||r);switch(c){case"inside":s=h.x+h.width/2,u=h.y+h.height/2,i="center",a="middle","stroke"!=r.brushType&&o==r.color&&(t.fillStyle="#fff");break;case"left":s=h.x-l,u=h.y+h.height/2,i="end",a="middle";break;case"right":s=h.x+h.width+l,u=h.y+h.height/2,i="start",a="middle";break;case"top":s=h.x+h.width/2,u=h.y-l,i="center",a="bottom";break;case"bottom":s=h.x+h.width/2,u=h.y+h.height+l,i="center",a="top"}}break;case"start":case"end":var p=0,d=0,y=0,v=0;if(void 0!==r.pointList){var g=r.pointList;if(g.length<2)return;var m=g.length;switch(c){case"start":p=g[0][0]+f[0],d=g[1][0]+f[0],y=g[0][1]+f[1],v=g[1][1]+f[1];break;case"end":p=g[m-2][0]+f[0],d=g[m-1][0]+f[0],y=g[m-2][1]+f[1],v=g[m-1][1]+f[1]}}else p=r.xStart+f[0]||0,d=r.xEnd+f[0]||0,y=r.yStart+f[1]||0,v=r.yEnd+f[1]||0;switch(c){case"start":i=p<d?"end":"start",a=y<v?"bottom":"top",s=p,u=y;break;case"end":i=p<d?"start":"end",a=y<v?"top":"bottom",s=d,u=v}l-=4,p&&d&&p!=d?s-="end"==i?l:-l:i="center",y!=v?u-="bottom"==a?l:-l:a="middle";break;case"specific":s=r.textX||0,u=r.textY||0,i="start",a="middle"}r.labelXOffset&&!isNaN(r.labelXOffset)&&(s+=r.labelXOffset),r.labelYOffset&&!isNaN(r.labelYOffset)&&(u+=r.labelYOffset),null!=s&&null!=u&&e._fillText(t,r.text,s,u,r.textFont,r.textAlign||i,r.textBaseline||a)}}},{key:"modSelf",value:function(){this.__dirty=!0,this.style&&(this.style.__rect=null),this.highlightStyle&&(this.highlightStyle.__rect=null)}},{key:"isSilent",value:function(){return!(this.hoverable||this.draggable||this.clickable||this.onmousemove||this.onmouseover||this.onmouseout||this.onmousedown||this.onmouseup||this.onclick||this.ondragenter||this.ondragover||this.ondragleave||this.ondrop)}},{key:"setCtxGlobalAlpha",value:function(t,e,r){t.globalAlpha="fill"===e?void 0===r.fillOpacity?void 0===r.opacity?1:r.opacity:r.fillOpacity:"stroke"===e?void 0===r.strokeOpacity?void 0===r.opacity?1:r.opacity:r.strokeOpacity:void 0===r.opacity?1:r.opacity}}])&&ca(r.prototype,n),o&&ca(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function ga(t){"@babel/helpers - typeof";return(ga="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ma(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ba(n.key),n)}}function ba(t){var e=function(t,e){if("object"!=ga(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=ga(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ga(e)?e:e+""}function wa(t,e,r){return e=xa(e),function(t,e){if(e&&("object"===ga(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],xa(t).constructor):e.apply(t,r))}function Sa(){return(Sa="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=xa(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function xa(t){return(xa=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _a(t,e){return(_a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Ea=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=wa(this,e,[t])).type="smicimage",r._imageCache={},r.refOriginalPosition&&2===r.refOriginalPosition.length||(r.refOriginalPosition=[0,0]),r.CLASS_NAME="SuperMap.LevelRenderer.Shape.SmicImage",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_a(t,e)}(e,va),r=e,(n=[{key:"destroy",value:function(){this.type=null,this._imageCache=null,Sa(xa(e.prototype),"destroy",this).call(this)}},{key:"brush",value:function(t,r,n){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var o=this.refOriginalPosition,i=this.style||{};r&&(i=this.getHighlightStyle(i,this.highlightStyle||{}));var a=i.image,s=this;if("string"==typeof a){var u=a;this._imageCache[u]?a=this._imageCache[u]:((a=new Image).onload=function(){a.onload=null,clearTimeout(e._refreshTimeout),e._needsRefresh.push(s),e._refreshTimeout=setTimeout(function(){n&&n(e._needsRefresh),e._needsRefresh=[]},10)},a.src=u,this._imageCache[u]=a)}if(a){if("IMG"==a.nodeName.toUpperCase())if(window.ActiveXObject){if("complete"!=a.readyState)return}else if(!a.complete)return;var l=i.width||a.width,c=i.height||a.height,f=i.x+o[0],h=i.y+o[1];if(!a.width||!a.height)return;if(t.save(),this.doClip(t),this.setContext(t,i),this.setTransform(t),i.sWidth&&i.sHeight){var p=i.sx+o[0]||0,d=i.sy+o[1]||0;t.drawImage(a,p,d,i.sWidth,i.sHeight,f,h,l,c)}else if(i.sx&&i.sy){var y=i.sx+o[0],v=i.sy+o[1],g=l-y,m=c-v;t.drawImage(a,y,v,g,m,f,h,l,c)}else t.drawImage(a,f,h,l,c);i.width||(i.width=l),i.height||(i.height=c),this.style.width||(this.style.width=l),this.style.height||(this.style.height=c),this.drawText(t,i,this.style),t.restore()}}},{key:"getRect",value:function(t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var e=this.refOriginalPosition;return{x:t.x+e[0],y:t.y+e[1],width:t.width,height:t.height}}},{key:"clearCache",value:function(){this._imageCache={}}}])&&ma(r.prototype,n),o&&ma(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function Oa(t){"@babel/helpers - typeof";return(Oa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Pa(t,e,r){return e=ka(e),function(t,e){if(e&&("object"===Oa(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],ka(t).constructor):e.apply(t,r))}function ka(t){return(ka=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ca(t,e){return(Ca=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Ta(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Aa(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ja(n.key),n)}}function Ma(t,e,r){return e&&Aa(t.prototype,e),r&&Aa(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function ja(t){var e=function(t,e){if("object"!=Oa(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Oa(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Oa(e)?e:e+""}Ea._needsRefresh=[],Ea._refreshTimeout=null;var Ia=function(){function t(e,r){Ta(this,t),this.root=e,this.storage=r,this._domRoot=null,this._layers={},this._zlevelList=[],this._layerConfig={},this._bgDom=null,this.shapeToImage=null,t.devicePixelRatio=Math.max(window.devicePixelRatio||1,1),this.CLASS_NAME="SuperMap.LevelRenderer.Painter",this.root.innerHTML="",this._width=this._getWidth(),this._height=this._getHeight();var n=document.createElement("div");this._domRoot=n,n.style.position="relative",n.style.overflow="hidden",n.style.width=this._width+"px",n.style.height=this._height+"px",this.root.appendChild(n),this.shapeToImage=this._createShapeToImageProcessor(),this._bgDom=t.createDom(W.createUniqueID("SuperMap.Theme_background_"),"div",this),n.appendChild(this._bgDom),this._bgDom.onselectstart=a,this._bgDom.style["-webkit-user-select"]="none",this._bgDom.style["user-select"]="none",this._bgDom.style["-webkit-touch-callout"]="none";var o=new Na(W.createUniqueID("_highLightLayer_"),this);this._layers.hover=o,n.appendChild(o.dom),o.initContext(),o.dom.onselectstart=a,o.dom.style["-webkit-user-select"]="none",o.dom.style["user-select"]="none",o.dom.style["-webkit-touch-callout"]="none";var i=this;function a(){return!1}this.updatePainter=function(t,e){i.refreshShapes(t,e)}}return Ma(t,[{key:"destroy",value:function(){this.dispose(),this._zlevelList=null,this._layerConfig=null,this._bgDom=null,this.shapeToImage=null}},{key:"render",value:function(t){return this.refresh(t,!0),this}},{key:"refresh",value:function(t,e){var r=this.storage.getShapeList(!0);return this._paintList(r,e),"function"==typeof t&&t(),this}},{key:"_paintList",value:function(t,e){var r,n,o;for(var i in void 0===e&&(e=!1),this._updateLayerStatus(t),this._layers)"hover"!==i&&(this._layers[i].unusedCount++,this._layers[i].updateTransform());for(var a=[],s=0,u=t.length;s<u;s++){var l=t[s];if(n!==l.zlevel&&(r&&r.needTransform&&o.restore(),o=(r=this.getLayer(l.zlevel)).ctx,n=l.zlevel,r.unusedCount=0,(r.dirty||e)&&r.clear(),r.needTransform&&(o.save(),r.setTransform(o))),o&&l.__startClip){var c=l.__startClip;if(o.save(),c.needTransform){var f=c.transform;xi.Util_matrix.invert(a,f),o.transform(f[0],f[1],f[2],f[3],f[4],f[5])}if(o.beginPath(),c.buildPath(o,c.style),o.clip(),c.needTransform){var h=a;o.transform(h[0],h[1],h[2],h[3],h[4],h[5])}}if((r&&r.dirty||e)&&!l.invisible&&(!l.onbrush||l.onbrush&&!l.onbrush(o,!1)))if(ai.catchBrushException)try{l.brush(o,!1,this.updatePainter)}catch(t){xi.Util_log(t,"brush error of "+l.type,l)}else l.brush(o,!1,this.updatePainter);o&&l.__stopClip&&o.restore(),l.__dirty=!1}for(var p in o&&r&&r.needTransform&&o.restore(),this._layers)if("hover"!==p){var d=this._layers[p];d.dirty=!1,1==d.unusedCount&&d.clear()}}},{key:"getLayer",value:function(t){var e=this._layers[t];if(!e){var r=this._zlevelList.length,n=null,o=-1;if(r>0&&t>this._zlevelList[0]){for(o=0;o<r-1&&!(this._zlevelList[o]<t&&this._zlevelList[o+1]>t);o++);n=this._layers[this._zlevelList[o]]}this._zlevelList.splice(o+1,0,t),e=new Na(W.createUniqueID("_levelLayer_"+t),this);var i=n?n.dom:this._bgDom;i.nextSibling?i.parentNode.insertBefore(e.dom,i.nextSibling):i.parentNode.appendChild(e.dom),e.initContext(),this._layers[t]=e,this._layerConfig[t]&&(new wo).merge(e,this._layerConfig[t],!0),e.updateTransform()}return e}},{key:"getLayers",value:function(){return this._layers}},{key:"_updateLayerStatus",value:function(t){var e=this._layers,r={};for(var n in e)"hover"!==n&&(r[n]=e[n].elCount,e[n].elCount=0);for(var o=0;o<t.length;o++){var i=t[o],a=e[i.zlevel];if(a){if(a.elCount++,a.dirty)continue;a.dirty=i.__dirty}}for(var s in e)"hover"!==s&&r[s]!==e[s].elCount&&(e[s].dirty=!0)}},{key:"refreshShapes",value:function(t,e){for(var r=0,n=t.length;r<n;r++){var o=t[r];this.storage.mod(o.id)}return this.refresh(e),this}},{key:"clear",value:function(){for(var t in this._layers)"hover"!=t&&this._layers[t].clear();return this}},{key:"modLayer",value:function(t,e){if(e){this._layerConfig[t]?(new wo).merge(this._layerConfig[t],e,!0):this._layerConfig[t]=e;var r=this._layers[t];r&&(new wo).merge(r,this._layerConfig[t],!0)}}},{key:"delLayer",value:function(t){var e=this._layers[t];e&&(this.modLayer(t,{position:e.position,rotation:e.rotation,scale:e.scale}),e.dom.parentNode.removeChild(e.dom),delete this._layers[t],this._zlevelList.splice((new wo).indexOf(this._zlevelList,t),1))}},{key:"refreshHover",value:function(){this.clearHover();for(var t=this.storage.getHoverShapes(!0),e=0,r=t.length;e<r;e++)this._brushHover(t[e]);return this.storage.delHover(),this}},{key:"clearHover",value:function(){var t=this._layers.hover;return t&&t.clear(),this}},{key:"resize",value:function(){var t=this._domRoot;t.style.display="none";var e=this._getWidth(),r=this._getHeight();if(t.style.display="",this._width!=e||r!=this._height){for(var n in this._width=e,this._height=r,t.style.width=e+"px",t.style.height=r+"px",this._layers)this._layers[n].resize(e,r);this.refresh(null,!0)}return this}},{key:"clearLayer",value:function(t){var e=this._layers[t];e&&e.clear()}},{key:"dispose",value:function(){this.root.innerHTML="",this.root=null,this.storage=null,this._domRoot=null,this._layers=null}},{key:"getDomHover",value:function(){return this._layers.hover.dom}},{key:"toDataURL",value:function(e,r,n){var o=t.createDom(W.createUniqueID("SuperMap.Theme.image_"),"canvas",this);this._bgDom.appendChild(o);var i=o.getContext("2d");1!=t.devicePixelRatio&&i.scale(t.devicePixelRatio,t.devicePixelRatio),i.fillStyle=r||"#fff",i.rect(0,0,this._width*t.devicePixelRatio,this._height*t.devicePixelRatio),i.fill();var a=this;this.storage.iterShape(function(t){if(!t.invisible&&(!t.onbrush||t.onbrush&&!t.onbrush(i,!1)))if(ai.catchBrushException)try{t.brush(i,!1,a.updatePainter)}catch(e){xi.Util_log(e,"brush error of "+t.type,t)}else t.brush(i,!1,a.updatePainter)},{normal:"up",update:!0});var s=o.toDataURL(e,n);return i=null,this._bgDom.removeChild(o),s}},{key:"getWidth",value:function(){return this._width}},{key:"getHeight",value:function(){return this._height}},{key:"_getWidth",value:function(){var t=this.root,e=t.currentStyle||document.defaultView.getComputedStyle(t);return((t.clientWidth||parseInt(e.width,10))-parseInt(e.paddingLeft,10)-parseInt(e.paddingRight,10)).toFixed(0)-0}},{key:"_getHeight",value:function(){var t=this.root,e=t.currentStyle||document.defaultView.getComputedStyle(t);return((t.clientHeight||parseInt(e.height,10))-parseInt(e.paddingTop,10)-parseInt(e.paddingBottom,10)).toFixed(0)-0}},{key:"_brushHover",value:function(t){var e=this._layers.hover.ctx;if(!t.onbrush||t.onbrush&&!t.onbrush(e,!0)){var r=this.getLayer(t.zlevel);if(r.needTransform&&(e.save(),r.setTransform(e)),ai.catchBrushException)try{t.brush(e,!0,this.updatePainter)}catch(e){xi.Util_log(e,"hoverBrush error of "+t.type,t)}else t.brush(e,!0,this.updatePainter);r.needTransform&&e.restore()}}},{key:"_shapeToImage",value:function(t,e,r,n,o){var i=document.createElement("canvas"),a=i.getContext("2d"),s=o||window.devicePixelRatio||1;i.style.width=r+"px",i.style.height=n+"px",i.setAttribute("width",r*s),i.setAttribute("height",n*s),a.clearRect(0,0,r*s,n*s);var u={position:e.position,rotation:e.rotation,scale:e.scale};e.position=[0,0,0],e.rotation=0,e.scale=[1,1],e&&e.brush(a,!1);var l=new Ea({id:t,style:{x:0,y:0,image:i}});return null!=u.position&&(l.position=e.position=u.position),null!=u.rotation&&(l.rotation=e.rotation=u.rotation),null!=u.scale&&(l.scale=e.scale=u.scale),l}},{key:"_createShapeToImageProcessor",value:function(){var e=this;return function(r,n,o,i){return e._shapeToImage(r,n,o,i,t.devicePixelRatio)}}},{key:"updateHoverLayer",value:function(t){if(!(t instanceof Array))return this;this.clearHover(),this.storage.delHover();for(var e=0;e<t.length;e++)this.storage.addHover(t[e]),this._brushHover(t[e])}}],[{key:"createDom",value:function(e,r,n){var o=document.createElement(r),i=n._width,a=n._height;return o.style.position="absolute",o.style.left=0,o.style.top=0,o.style.width=i+"px",o.style.height=a+"px",o.setAttribute("width",i*t.devicePixelRatio),o.setAttribute("height",a*t.devicePixelRatio),o.setAttribute("id",e),o}}])}(),Na=function(t){function e(t,r){var n;return Ta(this,e),(n=Pa(this,e,[t,r])).dom=null,n.domBack=null,n.ctxBack=null,n.painter=r,n.unusedCount=0,n.config=null,n.dirty=!0,n.elCount=0,n.clearColor=0,n.motionBlur=!1,n.lastFrameAlpha=.7,n.zoomable=!1,n.panable=!1,n.maxZoom=1/0,n.minZoom=0,n.ctx=null,n.dom=Ia.createDom(W.createUniqueID("SuperMap.Theme"+t),"canvas",r),n.dom.onselectstart=function(){return!1},n.dom.style["-webkit-user-select"]="none",n.dom.style["user-select"]="none",n.dom.style["-webkit-touch-callout"]="none",n.CLASS_NAME="SuperMap.LevelRenderer.Painter.Layer",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ca(t,e)}(e,Pi),Ma(e,[{key:"destroy",value:function(){this.dom=null,this.domBack=null,this.ctxBack=null,this.painter=null,this.unusedCount=null,this.config=null,this.dirty=null,this.elCount=null,this.clearColor=null,this.motionBlur=null,this.lastFrameAlpha=null,this.zoomable=null,this.panable=null,this.maxZoom=null,this.minZoom=null,this.ctx=null,Pi.destroy.apply(this,arguments)}},{key:"initContext",value:function(){this.ctx=this.dom.getContext("2d"),1!=Ia.devicePixelRatio&&this.ctx.scale(Ia.devicePixelRatio,Ia.devicePixelRatio)}},{key:"createBackBuffer",value:function(){this.domBack=Ia.createDom(W.createUniqueID("SuperMap.Theme.back-"+this.id),"canvas",this.painter),this.ctxBack=this.domBack.getContext("2d"),1!=Ia.devicePixelRatio&&this.ctxBack.scale(Ia.devicePixelRatio,Ia.devicePixelRatio)}},{key:"resize",value:function(t,e){this.dom.style.width=t+"px",this.dom.style.height=e+"px",this.dom.setAttribute("width",t*Ia.devicePixelRatio),this.dom.setAttribute("height",e*Ia.devicePixelRatio),1!=Ia.devicePixelRatio&&this.ctx.scale(Ia.devicePixelRatio,Ia.devicePixelRatio),this.domBack&&(this.domBack.setAttribute("width",t*Ia.devicePixelRatio),this.domBack.setAttribute("height",e*Ia.devicePixelRatio),1!=Ia.devicePixelRatio&&this.ctxBack.scale(Ia.devicePixelRatio,Ia.devicePixelRatio))}},{key:"clear",value:function(){var t=this.dom,e=this.ctx,r=t.width,n=t.height,o=this.clearColor,i=this.motionBlur,a=this.lastFrameAlpha;if(i&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(t,0,0,r/Ia.devicePixelRatio,n/Ia.devicePixelRatio)),o?(e.save(),e.fillStyle=this.config.clearColor,e.fillRect(0,0,r/Ia.devicePixelRatio,n/Ia.devicePixelRatio),e.restore()):e.clearRect(0,0,r/Ia.devicePixelRatio,n/Ia.devicePixelRatio),i){var s=this.domBack;e.save(),e.globalAlpha=a,e.drawImage(s,0,0,r/Ia.devicePixelRatio,n/Ia.devicePixelRatio),e.restore()}}}])}();function La(t){"@babel/helpers - typeof";return(La="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ra(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Da(n.key),n)}}function Da(t){var e=function(t,e){if("object"!=La(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=La(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==La(e)?e:e+""}function Ba(t,e,r){return e=Fa(e),function(t,e){if(e&&("object"===La(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Fa(t).constructor):e.apply(t,r))}function Fa(t){return(Fa=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ga(t,e){return(Ga=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Ua=function(t){function e(t,r,n){var o,i,a;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(o=Ba(this,e,[t,r,n])).root=t,o.storage=r,o.painter=n,o._lastX=0,o._lastY=0,o._mouseX=0,o._mouseY=0,o._findHover=null,o._domHover=null,o._findHover=(i=function(t,e,r){var n=this;if(n._draggingTarget&&n._draggingTarget.id==t.id||t.isSilent())return!1;var o=n._event;if(t.isCover(e,r)){if(t.hoverable)if(t.isHoverByRefDataID&&!0===t.isHoverByRefDataID){if(t.refDataID){var i=t.refDataID,a=null;t.refDataHoverGroup&&(a=t.refDataHoverGroup);for(var s=n.storage._shapeList,u=0,l=s.length;u<l;u++){var c=s[u];c.refDataID&&i===c.refDataID&&(a?c.refDataHoverGroup&&a===c.refDataHoverGroup&&n.storage.addHover(c):n.storage.addHover(c))}}}else n.storage.addHover(t);for(var f=t.parent;f;){if(f.clipShape&&!f.clipShape.isCover(n._mouseX,n._mouseY))return!1;f=f.parent}return n._lastHover!=t&&(n._processOutShape(o),n._processDragLeave(o),n._lastHover=t,n._processDragEnter(o)),n._processOverShape(o),n._processDragOver(o),n._hasfound=1,!0}return!1},a=o,function(t,e,r){return i.call(a,t,e,r)}),o._domHover=n.getDomHover(),o.CLASS_NAME="SuperMap.LevelRenderer.Handler";var s={resize:function(t){t=t||window.event,this._lastHover=null,this._isMouseDown=0,this.dispatch(ai.EVENT.RESIZE,t)},click:function(t){t=this._zrenderEventFixed(t);var e=this._lastHover;(e&&e.clickable||!e)&&this._clickThreshold<10&&this._dispatchAgency(e,ai.EVENT.CLICK,t),this._mousemoveHandler(t)},dblclick:function(t){t=t||window.event,t=this._zrenderEventFixed(t);var e=this._lastHover;(e&&e.clickable||!e)&&this._clickThreshold<5&&this._dispatchAgency(e,ai.EVENT.DBLCLICK,t),this._mousemoveHandler(t)},mousewheel:function(t){var e=((t=this._zrenderEventFixed(t)).wheelDelta||-t.detail)>0?1.1:1/1.1,r=this.painter.getLayers(),n=!1;for(var o in r)if("hover"!==o){var i=r[o],a=i.position;if(i.zoomable){i.__zoom=i.__zoom||1;var s=i.__zoom;s*=e,e=(s=Math.max(Math.min(i.maxZoom,s),i.minZoom))/i.__zoom,i.__zoom=s,a[0]-=(this._mouseX-a[0])*(e-1),a[1]-=(this._mouseY-a[1])*(e-1),i.scale[0]*=e,i.scale[1]*=e,i.dirty=!0,n=!0}}n&&this.painter.refresh(),this._dispatchAgency(this._lastHover,ai.EVENT.MOUSEWHEEL,t),this._mousemoveHandler(t)},mousemove:function(t){this._clickThreshold++,t=this._zrenderEventFixed(t),this._lastX=this._mouseX,this._lastY=this._mouseY,this._mouseX=xi.Util_event.getX(t),this._mouseY=xi.Util_event.getY(t);var e=this._mouseX-this._lastX,r=this._mouseY-this._lastY;this._processDragStart(t),this._hasfound=0,this._event=t,this._iterateAndFindHover(),this._hasfound||((!this._draggingTarget||this._lastHover&&this._lastHover!=this._draggingTarget)&&(this._processOutShape(t),this._processDragLeave(t)),this._lastHover=null,this.storage.delHover(),this.painter.clearHover());var n="";if(this._draggingTarget)this.storage.drift(this._draggingTarget.id,e,r),this._draggingTarget.modSelf(),this.storage.addHover(this._draggingTarget);else if(this._isMouseDown){var o=this.painter.getLayers(),i=!1;for(var a in o)if("hover"!==a){var s=o[a];s.panable&&(n="move",s.position[0]+=e,s.position[1]+=r,i=!0,s.dirty=!0)}i&&this.painter.refresh()}this._draggingTarget||this._hasfound&&this._lastHover.draggable?n="move":this._hasfound&&this._lastHover.clickable&&(n="pointer"),this.root.style.cursor=n,this._dispatchAgency(this._lastHover,ai.EVENT.MOUSEMOVE,t),(this._draggingTarget||this._hasfound||this.storage.hasHoverShape())&&this.painter.refreshHover()},mouseout:function(t){var e=(t=this._zrenderEventFixed(t)).toElement||t.relatedTarget;if(e!=this.root)for(;e&&9!=e.nodeType;){if(e==this.root)return void this._mousemoveHandler(t);e=e.parentNode}t.zrenderX=this._lastX,t.zrenderY=this._lastY,this.root.style.cursor="",this._isMouseDown=0,this._processOutShape(t),this._processDrop(t),this._processDragEnd(t),this.painter.refreshHover(),this.dispatch(ai.EVENT.GLOBALOUT,t)},mousedown:function(t){if(this._clickThreshold=0,2==this._lastDownButton)return this._lastDownButton=t.button,void(this._mouseDownTarget=null);this._lastMouseDownMoment=new Date,t=this._zrenderEventFixed(t),this._isMouseDown=1,this._mouseDownTarget=this._lastHover,this._dispatchAgency(this._lastHover,ai.EVENT.MOUSEDOWN,t),this._lastDownButton=t.button},mouseup:function(t){t=this._zrenderEventFixed(t),this.root.style.cursor="",this._isMouseDown=0,this._mouseDownTarget=null,this._dispatchAgency(this._lastHover,ai.EVENT.MOUSEUP,t),this._processDrop(t),this._processDragEnd(t)},touchstart:function(t){t=this._zrenderEventFixed(t,!0),this._lastTouchMoment=new Date,this._mobildFindFixed(t),this._mousedownHandler(t)},touchmove:function(t){t=this._zrenderEventFixed(t,!0),this._mousemoveHandler(t),this._isDragging&&xi.Util_event.stop(t)},touchend:function(t){t=this._zrenderEventFixed(t,!0),this._mouseupHandler(t);var e=new Date;e-this._lastTouchMoment<ai.EVENT.touchClickDelay&&(this._mobildFindFixed(t),this._clickHandler(t),e-this._lastClickMoment<ai.EVENT.touchClickDelay/2&&(this._dblclickHandler(t),this._lastHover&&this._lastHover.clickable&&xi.Util_event.stop(t)),this._lastClickMoment=e),this.painter.clearHover()}};function u(t,e){return function(r){return t.call(e,r)}}return function(t){var e=["resize","click","dblclick","mousewheel","mousemove","mouseout","mouseup","mousedown","touchstart","touchend","touchmove"],r=e.length;for(;r--;){var n=e[r];t["_"+n+"Handler"]=u(s[n],t)}}(o),window.addEventListener?(window.addEventListener("resize",o._resizeHandler),xi.Util_env.os.tablet||xi.Util_env.os.phone?(t.addEventListener("touchstart",o._touchstartHandler),t.addEventListener("touchmove",o._touchmoveHandler),t.addEventListener("touchend",o._touchendHandler)):(t.addEventListener("click",o._clickHandler),t.addEventListener("dblclick",o._dblclickHandler),t.addEventListener("mousewheel",o._mousewheelHandler),t.addEventListener("mousemove",o._mousemoveHandler),t.addEventListener("mousedown",o._mousedownHandler),t.addEventListener("mouseup",o._mouseupHandler)),t.addEventListener("DOMMouseScroll",o._mousewheelHandler),t.addEventListener("mouseout",o._mouseoutHandler)):(window.attachEvent("onresize",o._resizeHandler),t.attachEvent("onclick",o._clickHandler),t.ondblclick=o._dblclickHandler,t.attachEvent("onmousewheel",o._mousewheelHandler),t.attachEvent("onmousemove",o._mousemoveHandler),t.attachEvent("onmouseout",o._mouseoutHandler),t.attachEvent("onmousedown",o._mousedownHandler),t.attachEvent("onmouseup",o._mouseupHandler)),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ga(t,e)}(e,Eo),r=e,(n=[{key:"destroy",value:function(){this.dispose(),this._lastX=null,this._lastY=null,this._mouseX=null,this._mouseY=null,this._findHover=null,Eo.prototype.destroy.apply(this,arguments)}},{key:"on",value:function(t,e){return this.bind(t,e),this}},{key:"un",value:function(t,e){return this.unbind(t,e),this}},{key:"trigger",value:function(t,e){var r=ai.EVENT;switch(t){case r.RESIZE:case r.CLICK:case r.DBLCLICK:case r.MOUSEWHEEL:case r.MOUSEMOVE:case r.MOUSEDOWN:case r.MOUSEUP:case r.MOUSEOUT:this["_"+t+"Handler"](e)}}},{key:"dispose",value:function(){var t=this.root;window.removeEventListener?(window.removeEventListener("resize",this._resizeHandler),xi.Util_env.os.tablet||xi.Util_env.os.phone?(t.removeEventListener("touchstart",this._touchstartHandler),t.removeEventListener("touchmove",this._touchmoveHandler),t.removeEventListener("touchend",this._touchendHandler)):(t.removeEventListener("click",this._clickHandler),t.removeEventListener("dblclick",this._dblclickHandler),t.removeEventListener("mousewheel",this._mousewheelHandler),t.removeEventListener("mousemove",this._mousemoveHandler),t.removeEventListener("mousedown",this._mousedownHandler),t.removeEventListener("mouseup",this._mouseupHandler)),t.removeEventListener("DOMMouseScroll",this._mousewheelHandler),t.removeEventListener("mouseout",this._mouseoutHandler)):(window.detachEvent("onresize",this._resizeHandler),t.detachEvent("onclick",this._clickHandler),t.detachEvent("dblclick",this._dblclickHandler),t.detachEvent("onmousewheel",this._mousewheelHandler),t.detachEvent("onmousemove",this._mousemoveHandler),t.detachEvent("onmouseout",this._mouseoutHandler),t.detachEvent("onmousedown",this._mousedownHandler),t.detachEvent("onmouseup",this._mouseupHandler)),this.root=null,this._domHover=null,this.storage=null,this.painter=null,this.un()}},{key:"_processDragStart",value:function(t){var e=this._lastHover;if(this._isMouseDown&&e&&e.draggable&&!this._draggingTarget&&this._mouseDownTarget==e){if(e.dragEnableTime&&new Date-this._lastMouseDownMoment<e.dragEnableTime)return;var r=e;this._draggingTarget=r,this._isDragging=1,r.invisible=!0,this.storage.mod(r.id),this._dispatchAgency(r,ai.EVENT.DRAGSTART,t),this.painter.refresh()}}},{key:"_processDragEnter",value:function(t){this._draggingTarget&&this._dispatchAgency(this._lastHover,ai.EVENT.DRAGENTER,t,this._draggingTarget)}},{key:"_processDragOver",value:function(t){this._draggingTarget&&this._dispatchAgency(this._lastHover,ai.EVENT.DRAGOVER,t,this._draggingTarget)}},{key:"_processDragLeave",value:function(t){this._draggingTarget&&this._dispatchAgency(this._lastHover,ai.EVENT.DRAGLEAVE,t,this._draggingTarget)}},{key:"_processDrop",value:function(t){this._draggingTarget&&(this._draggingTarget.invisible=!1,this.storage.mod(this._draggingTarget.id),this.painter.refresh(),this._dispatchAgency(this._lastHover,ai.EVENT.DROP,t,this._draggingTarget))}},{key:"_processDragEnd",value:function(t){this._draggingTarget&&(this._dispatchAgency(this._draggingTarget,ai.EVENT.DRAGEND,t),this._lastHover=null),this._isDragging=0,this._draggingTarget=null}},{key:"_processOverShape",value:function(t){this._dispatchAgency(this._lastHover,ai.EVENT.MOUSEOVER,t)}},{key:"_processOutShape",value:function(t){this._dispatchAgency(this._lastHover,ai.EVENT.MOUSEOUT,t)}},{key:"_dispatchAgency",value:function(t,e,r,n){var o="on"+e,i={type:e,event:r,target:t,cancelBubble:!1},a=t;for(n&&(i.dragged=n);a&&(a[o]&&(i.cancelBubble=a[o](i)),a.dispatch(e,i),a=a.parent,!i.cancelBubble););t?i.cancelBubble||this.dispatch(e,i):n||this.dispatch(e,{type:e,event:r})}},{key:"_iterateAndFindHover",value:function(){for(var t,e=xi.Util_matrix.create(),r=this.storage.getShapeList(),n=[0,0],o=r.length-1;o>=0;o--){var i=r[o];if(void 0!==i.zlevel&&(t=this.painter.getLayer(i.zlevel,t),n[0]=this._mouseX,n[1]=this._mouseY,t.needTransform&&(xi.Util_matrix.invert(e,t.transform),xi.Util_vector.applyTransform(n,n,e))),this._findHover(i,n[0],n[1]))break}}},{key:"_mobildFindFixed",value:function(t){var e=[{x:10},{x:-20},{x:10,y:10},{y:-20}];this._lastHover=null,this._mouseX=t.zrenderX,this._mouseY=t.zrenderY,this._event=t,this._iterateAndFindHover();for(var r=0;!this._lastHover&&r<e.length;r++){var n=e[r];n.x&&(this._mouseX+=n.x),n.y&&(this._mouseX+=n.y),this._iterateAndFindHover()}this._lastHover&&(t.zrenderX=this._mouseX,t.zrenderY=this._mouseY)}},{key:"_zrenderEventFixed",value:function(t,e){if(t.zrenderFixed)return t;if(e){var r="touchend"!=t.type?t.targetTouches[0]:t.changedTouches[0];if(r){var n=this.root.getBoundingClientRect();t.zrenderX=r.clientX-n.left,t.zrenderY=r.clientY-n.top}}else{var o=(t=t||window.event).toElement||t.relatedTarget||t.srcElement||t.target;o&&o!=this._domHover&&(t.zrenderX=(void 0!==t.offsetX?t.offsetX:t.layerX)+o.offsetLeft,t.zrenderY=(void 0!==t.offsetY?t.offsetY:t.layerY)+o.offsetTop)}return t.zrenderFixed=1,t}},{key:"getLastHoverOne",value:function(){return this._lastHover?this._lastHover:null}}])&&Ra(r.prototype,n),o&&Ra(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function za(t){"@babel/helpers - typeof";return(za="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Va(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ha(n.key),n)}}function Ha(t){var e=function(t,e){if("object"!=za(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=za(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==za(e)?e:e+""}var Wa=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.CLASS_NAME="SuperMap.LevelRenderer.Animation.easing"},(e=[{key:"destroy",value:function(){}},{key:"Linear",value:function(t){return t}},{key:"QuadraticIn",value:function(t){return t*t}},{key:"QuadraticOut",value:function(t){return t*(2-t)}},{key:"QuadraticInOut",value:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}},{key:"CubicIn",value:function(t){return t*t*t}},{key:"CubicOut",value:function(t){return--t*t*t+1}},{key:"CubicInOut",value:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}},{key:"QuarticIn",value:function(t){return t*t*t*t}},{key:"QuarticOut",value:function(t){return 1- --t*t*t*t}},{key:"QuarticInOut",value:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}},{key:"QuinticIn",value:function(t){return t*t*t*t*t}},{key:"QuinticOut",value:function(t){return--t*t*t*t*t+1}},{key:"QuinticInOut",value:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}},{key:"SinusoidalIn",value:function(t){return 1-Math.cos(t*Math.PI/2)}},{key:"SinusoidalOut",value:function(t){return Math.sin(t*Math.PI/2)}},{key:"SinusoidalInOut",value:function(t){return.5*(1-Math.cos(Math.PI*t))}},{key:"ExponentialIn",value:function(t){return 0===t?0:Math.pow(1024,t-1)}},{key:"ExponentialOut",value:function(t){return 1===t?1:1-Math.pow(2,-10*t)}},{key:"ExponentialInOut",value:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(2-Math.pow(2,-10*(t-1)))}},{key:"CircularIn",value:function(t){return 1-Math.sqrt(1-t*t)}},{key:"CircularOut",value:function(t){return Math.sqrt(1- --t*t)}},{key:"CircularInOut",value:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}},{key:"ElasticIn",value:function(t){var e,r=.1;return 0===t?0:1===t?1:(r<1?(r=1,e=.1):e=.4*Math.asin(1/r)/(2*Math.PI),-r*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/.4))}},{key:"ElasticOut",value:function(t){var e,r=.1;return 0===t?0:1===t?1:(r<1?(r=1,e=.1):e=.4*Math.asin(1/r)/(2*Math.PI),r*Math.pow(2,-10*t)*Math.sin((t-e)*(2*Math.PI)/.4)+1)}},{key:"ElasticInOut",value:function(t){var e,r=.1;return 0===t?0:1===t?1:(r<1?(r=1,e=.1):e=.4*Math.asin(1/r)/(2*Math.PI),(t*=2)<1?r*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/.4)*-.5:r*Math.pow(2,-10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/.4)*.5+1)}},{key:"BackIn",value:function(t){var e=1.70158;return t*t*((e+1)*t-e)}},{key:"BackOut",value:function(t){var e=1.70158;return--t*t*((e+1)*t+e)+1}},{key:"BackInOut",value:function(t){var e=2.5949095;return(t*=2)<1?t*t*((e+1)*t-e)*.5:.5*((t-=2)*t*((e+1)*t+e)+2)}},{key:"BounceIn",value:function(t){return 1-this.BounceOut(1-t)}},{key:"BounceOut",value:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}},{key:"BounceInOut",value:function(t){return t<.5?.5*this.BounceIn(2*t):.5*this.BounceOut(2*t-1)+.5}}])&&Va(t.prototype,e),r&&Va(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function qa(t){"@babel/helpers - typeof";return(qa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ya(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Xa(n.key),n)}}function Xa(t){var e=function(t,e){if("object"!=qa(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=qa(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==qa(e)?e:e+""}var Ja=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._targetPool=e.target||{},this._targetPool instanceof Array||(this._targetPool=[this._targetPool]),this._life=e.life||1e3,this._delay=e.delay||0,this._startTime=(new Date).getTime()+this._delay,this._endTime=this._startTime+1e3*this._life,this.loop=void 0!==e.loop&&e.loop,this.gap=e.gap||0,this.easing=e.easing||"Linear",this.onframe=e.onframe,this.ondestroy=e.ondestroy,this.onrestart=e.onrestart,this.CLASS_NAME="SuperMap.LevelRenderer.Animation.Clip"},(e=[{key:"destroy",value:function(){}},{key:"step",value:function(t){var e=new Wa,r=(t-this._startTime)/this._life;if(!(r<0)){r=Math.min(r,1);var n="string"==typeof this.easing?e[this.easing]:this.easing,o="function"==typeof n?n(r):r;return this.fire("frame",o),1==r?this.loop?(this.restart(),"restart"):(this._needsRemove=!0,"destroy"):null}}},{key:"restart",value:function(){var t=((new Date).getTime()-this._startTime)%this._life;this._startTime=(new Date).getTime()-t+this.gap}},{key:"fire",value:function(t,e){for(var r=0,n=this._targetPool.length;r<n;r++)this["on"+t]&&this["on"+t](this._targetPool[r],e)}}])&&Ya(t.prototype,e),r&&Ya(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function Ka(t){"@babel/helpers - typeof";return(Ka="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Qa(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Za(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ts(n.key),n)}}function $a(t,e,r){return e&&Za(t.prototype,e),r&&Za(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function ts(t){var e=function(t,e){if("object"!=Ka(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Ka(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Ka(e)?e:e+""}function es(t,e,r){return e=rs(e),function(t,e){if(e&&("object"===Ka(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],rs(t).constructor):e.apply(t,r))}function rs(t){return(rs=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ns(t,e){return(ns=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var os=function(t){function e(t){var r;return Qa(this,e),r=es(this,e,[t]),t=t||{},r.stage={},r.onframe=function(){},r._clips=[],r._running=!1,r._time=0,W.extend(r,t),r.CLASS_NAME="SuperMap.LevelRenderer.Animation",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ns(t,e)}(e,Eo),$a(e,[{key:"add",value:function(t){this._clips.push(t)}},{key:"remove",value:function(t){var e=(new wo).indexOf(this._clips,t);e>=0&&this._clips.splice(e,1)}},{key:"_update",value:function(){for(var t=(new Date).getTime(),e=t-this._time,r=this._clips,n=r.length,o=[],i=[],a=0;a<n;a++){var s=r[a],u=s.step(t);u&&(o.push(u),i.push(s))}this.stage.update&&this.stage.update();for(var l=0;l<n;)r[l]._needsRemove?(r[l]=r[n-1],r.pop(),n--):l++;n=o.length;for(var c=0;c<n;c++)i[c].fire(o[c]);this._time=t,this.onframe(e),this.dispatch("frame",e)}},{key:"start",value:function(){var t=window.requestAnimationFrame||window.msRequestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(t){setTimeout(t,16)},e=this;this._running=!0,this._time=(new Date).getTime(),t(function r(){e._running&&(e._update(),t(r))})}},{key:"stop",value:function(){this._running=!1}},{key:"clear",value:function(){this._clips=[]}},{key:"animate",value:function(t,e){var r=new is(t,(e=e||{}).loop,e.getter,e.setter);return r.animation=this,r}}],[{key:"_interpolateNumber",value:function(t,e,r){return(e-t)*r+t}},{key:"_interpolateArray",value:function(t,r,n,o,i){var a=t.length;if(1==i)for(var s=0;s<a;s++)o[s]=e._interpolateNumber(t[s],r[s],n);else for(var u=t[0].length,l=0;l<a;l++)for(var c=0;c<u;c++)o[l][c]=e._interpolateNumber(t[l][c],r[l][c],n)}},{key:"_isArrayLike",value:function(t){switch(Ka(t)){case"undefined":case"string":return!1}return void 0!==t.length}},{key:"_catmullRomInterpolateArray",value:function(t,r,n,o,i,a,s,u,l){var c=t.length;if(1==l)for(var f=0;f<c;f++)u[f]=e._catmullRomInterpolate(t[f],r[f],n[f],o[f],i,a,s);else for(var h=t[0].length,p=0;p<c;p++)for(var d=0;d<h;d++)u[p][d]=e._catmullRomInterpolate(t[p][d],r[p][d],n[p][d],o[p][d],i,a,s)}},{key:"_catmullRomInterpolate",value:function(t,e,r,n,o,i,a){var s=.5*(r-t),u=.5*(n-e);return(2*(e-r)+s+u)*a+(-3*(e-r)-2*s-u)*i+s*o+e}},{key:"_cloneValue",value:function(t){var r=Array.prototype.slice;if(e._isArrayLike(t)){var n=t.length;if(e._isArrayLike(t[0])){for(var o=[],i=0;i<n;i++)o.push(r.call(t[i]));return o}return r.call(t)}return t}},{key:"rgba2String",value:function(t){return t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.floor(t[2]),"rgba("+t.join(",")+")"}}])}(),is=function(){return $a(function t(e,r,n,o){Qa(this,t),this._tracks={},this._target=e,this._loop=r||!1,this._getter=n||function(t,e){return t[e]},this._setter=o||function(t,e,r){t[e]=r},this._clipCount=0,this._delay=0,this._doneList=[],this._onframeList=[],this._clipList=[],this.CLASS_NAME="SuperMap.LevelRenderer.Animation.Animator"},[{key:"when",value:function(t,e){for(var r in e)this._tracks[r]||(this._tracks[r]=[],0!==t&&this._tracks[r].push({time:0,value:os._cloneValue(this._getter(this._target,r))})),this._tracks[r].push({time:parseInt(t,10),value:e[r]});return this}},{key:"during",value:function(t){return this._onframeList.push(t),this}},{key:"start",value:function(t){var e=this,r=this._setter,n=this._getter,o=e._onframeList.length,i="spline"===t,a=function(){if(e._clipCount--,0===e._clipCount){e._tracks={};for(var t=e._doneList.length,r=0;r<t;r++)e._doneList[r].call(e)}},s=function(s,u){var l=s.length;if(l){var c=s[0].value,f=os._isArrayLike(c),h=!1,p=f&&os._isArrayLike(c[0])?2:1;s.sort(function(t,e){return t.time-e.time});for(var d=s[l-1].time,y=[],v=[],g=0;g<l;g++){y.push(s[g].time/d);var m=s[g].value;"string"==typeof m&&(0===(m=xi.Util_color.toArray(m)).length&&(m[0]=m[1]=m[2]=0,m[3]=1),h=!0),v.push(m)}var b,w,S,x,_,E,O,P=0,k=0;if(h)var C=[0,0,0,0];var T=new Ja({target:e._target,life:d,loop:e._loop,delay:e._delay,onframe:function(t,a){if(a<k){for(b=Math.min(P+1,l-1),w=b;w>=0&&!(y[w]<=a);w--);w=Math.min(w,l-2)}else{for(w=P;w<l&&!(y[w]>a);w++);w=Math.min(w-1,l-2)}P=w,k=a;var s=y[w+1]-y[w];if(0!==s){var c,d;for(S=(a-y[w])/s,i?(_=v[w],x=v[0===w?w:w-1],E=v[w>l-2?l-1:w+1],O=v[w>l-3?l-1:w+2],f?os._catmullRomInterpolateArray(x,_,E,O,S,S*S,S*S*S,n(t,u),p):(c=h?os.rgba2String(C):os._catmullRomInterpolate(x,_,E,O,S,S*S,S*S*S),r(t,u,c))):f?os._interpolateArray(v[w],v[w+1],S,n(t,u),p):(h?(os._interpolateArray(v[w],v[w+1],S,C,1),d=os.rgba2String(C)):d=os._interpolateNumber(v[w],v[w+1],S),r(t,u,d)),w=0;w<o;w++)e._onframeList[w](t,a)}},ondestroy:a});t&&"spline"!==t&&(T.easing=t),e._clipList.push(T),e._clipCount++,e.animation.add(T)}};for(var u in this._tracks)s(this._tracks[u],u);return this}},{key:"stop",value:function(){for(var t=0;t<this._clipList.length;t++){var e=this._clipList[t];this.animation.remove(e)}this._clipList=[]}},{key:"delay",value:function(t){return this._delay=t,this}},{key:"done",value:function(t){return t&&this._doneList.push(t),this}}])}();function as(t){"@babel/helpers - typeof";return(as="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ss(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,us(n.key),n)}}function us(t){var e=function(t,e){if("object"!=as(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=as(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==as(e)?e:e+""}var ls=function(){return t=function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=e,this.storage=new Bi,this.painter=new Ia(r,this.storage),this.handler=new Ua(r,this.storage,this.painter),this.animatingElements=[],this.animation=new os({stage:{update:t.getFrameCallback(this)}}),this._needsRefreshNextFrame=!1,this.animation.start(),this.CLASS_NAME="SuperMap.LevelRenderer.Render"},r=[{key:"getFrameCallback",value:function(t){return function(){var e=t.animatingElements;if(e instanceof Array){for(var r=0,n=e.length;r<n;r++)t.storage.mod(e[r].id);(e.length||t._needsRefreshNextFrame)&&t.refresh()}}}}],(e=[{key:"destroy",value:function(){this.id=null,this.storage=null,this.painter=null,this.handler=null,this.animatingElements=null,this.animation=null,this._needsRefreshNextFrame=null}},{key:"getId",value:function(){return this.id}},{key:"addShape",value:function(t){return this.storage.addRoot(t),this}},{key:"addGroup",value:function(t){return this.storage.addRoot(t),this}},{key:"delShape",value:function(t){return this.storage.delRoot(t),this}},{key:"delGroup",value:function(t){return this.storage.delRoot(t),this}},{key:"modShape",value:function(t,e){return this.storage.mod(t,e),this}},{key:"modGroup",value:function(t,e){return this.storage.mod(t,e),this}},{key:"modLayer",value:function(t,e){return this.painter.modLayer(t,e),this}},{key:"addHoverShape",value:function(t){return this.storage.addHover(t),this}},{key:"render",value:function(t){return this.painter.render(t),this._needsRefreshNextFrame=!1,this}},{key:"refresh",value:function(t){return this.painter.refresh(t),this._needsRefreshNextFrame=!1,this}},{key:"refreshNextFrame",value:function(){return this._needsRefreshNextFrame=!0,this}},{key:"refreshHover",value:function(t){return this.painter.refreshHover(t),this}},{key:"refreshShapes",value:function(t,e){return this.painter.refreshShapes(t,e),this}},{key:"resize",value:function(){return this.painter.resize(),this}},{key:"animate",value:function(t,e,r){if("string"==typeof t&&(t=this.storage.get(t)),t){var n;if(e){for(var o=e.split("."),i=t,a=0,s=o.length;a<s;a++)i&&(i=i[o[a]]);i&&(n=i)}else n=t;if(!n)return void xi.Util_log('Property "'+e+'" is not existed in element '+t.id);var u=this.animatingElements;return void 0===t.__aniCount&&(t.__aniCount=0),0===t.__aniCount&&u.push(t),t.__aniCount++,this.animation.animate(n,{loop:r}).done(function(){if(t.__aniCount--,0===t.__aniCount){var e=(new wo).indexOf(u,t);u.splice(e,1)}})}xi.Util_log("Element not existed")}},{key:"clearAnimation",value:function(){this.animation.clear()}},{key:"getWidth",value:function(){return this.painter.getWidth()}},{key:"getHeight",value:function(){return this.painter.getHeight()}},{key:"toDataURL",value:function(t,e,r){return this.painter.toDataURL(t,e,r)}},{key:"shapeToImage",value:function(t,e,r){var n=W.createUniqueID("SuperMap.LevelRenderer.ToImage_");return this.painter.shapeToImage(n,t,e,r)}},{key:"on",value:function(t,e){return this.handler.on(t,e),this}},{key:"un",value:function(t,e){return this.handler.un(t,e),this}},{key:"trigger",value:function(t,e){return this.handler.trigger(t,e),this.handler.dispatch(t,e),this}},{key:"clear",value:function(){return this.storage.delRoot(),this.painter.clear(),this}},{key:"dispose",value:function(){this.animation.stop(),this.clear(),this.storage.dispose(),this.painter.dispose(),this.handler.dispose(),this.animation=null,this.animatingElements=null,this.storage=null,this.painter=null,this.handler=null}},{key:"updateHoverShapes",value:function(t){return this.painter.updateHoverLayer(t),this}},{key:"getAllShapes",value:function(){return this.storage._shapeList}},{key:"clearAll",value:function(){return this.clear(),this.painter.clearHover(),this}},{key:"getHoverOne",value:function(){return this.handler.getLastHoverOne()}}])&&ss(t.prototype,e),r&&ss(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function cs(t){"@babel/helpers - typeof";return(cs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function fs(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,hs(n.key),n)}}function hs(t){var e=function(t,e){if("object"!=cs(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=cs(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==cs(e)?e:e+""}var ps=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),t._instances={},t.Tool={},this.version="2.0.4",this.CLASS_NAME="SuperMap.LevelRenderer"}return e=t,(r=[{key:"destroy",value:function(){this.dispose(),this.version=null}},{key:"init",value:function(e){var r=new ls(W.createUniqueID("LRenderer_"),e);return t._instances[r.id]=r,r}},{key:"dispose",value:function(e){if(e)e.dispose(),this.delInstance(e.id);else{for(var r in t._instances)t._instances[r].dispose();t._instances={}}return this}},{key:"getInstance",value:function(e){return t._instances[e]}},{key:"delInstance",value:function(e){return delete t._instances[e],this}}])&&fs(e.prototype,r),n&&fs(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,r,n}();function ds(t){"@babel/helpers - typeof";return(ds="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ys(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,vs(n.key),n)}}function vs(t){var e=function(t,e){if("object"!=ds(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=ds(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ds(e)?e:e+""}var gs=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.fieldNames=null,this.fieldValues=null,this.geometry=null,e&&W.extend(this,e),this.CLASS_NAME="SuperMap.ServerFeature"}return e=t,n=[{key:"fromJson",value:function(e){var r=null;if(e)return(r=e.geometry)&&(r=zn.fromJson(r)),new t({fieldNames:e.fieldNames,fieldValues:e.fieldValues,geometry:r})}}],(r=[{key:"destroy",value:function(){var t=this;t.fieldNames=null,t.fieldValues=null,t.geometry&&(t.geometry.destroy(),t.geometry=null)}},{key:"toFeature",value:function(){var t,e,r,n,o={},i=this;for(var a in t=i.fieldNames,e=i.fieldValues,t)o[t[a]]=e[a];return i.geometry&&(r=i.geometry.toGeometry()),n=new er(r,o),i.geometry&&i.geometry.id&&(n.fid=i.geometry.id),n}}])&&ys(e.prototype,r),n&&ys(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,r,n}();function ms(t){"@babel/helpers - typeof";return(ms="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function bs(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ws(n.key),n)}}function ws(t){var e=function(t,e){if("object"!=ms(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=ms(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ms(e)?e:e+""}var Ss=function(){return t=function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var n=r||{};this.name=e,this.id=n.id?n.id:W.createUniqueID("themeLayer_"),this.opacity=n.opacity?n.opacity:1,this.visibility=!0,this.loadWhileAnimating=void 0===n.loadWhileAnimating||n.loadWhileAnimating,this.map=n.map?n.map:null,this.features=[],this.TFEvents=[],this.map&&this.map.addLayer(this)},(e=[{key:"onAdd",value:function(t){this.map=t,this._createCanvasContainer(),this.addTFEvents(),this.map.on("resize",this.resizeEvent.bind(this)),this.map.on("zoomstart",this.zoomStartEvent.bind(this)),this.map.on("zoomend",this.zoomEndEvent.bind(this)),this.map.on("rotatestart",this.rotateStartEvent.bind(this)),this.map.on("rotate",this.rotateEvent.bind(this)),this.map.on("rotateend",this.rotateEndEvent.bind(this)),this.map.on("dragend",this.dragEndEvent.bind(this)),this.map.on("movestart",this.moveStartEvent.bind(this)),this.map.on("move",this.moveEvent.bind(this)),this.map.on("moveend",this.moveEndEvent.bind(this)),this.map.on("remove",this.removeFromMap.bind(this)),this.refresh()}},{key:"refresh",value:function(){0!==this.features.length&&this.map&&this.redrawThematicFeatures(this.map.getBounds())}},{key:"_createCanvasContainer",value:function(){this.movingOffset=[0,0],this.mapContainer=this.map.getCanvasContainer(),this.div=document.createElement("div"),this.div.id=this.id,this.div.style.position="absolute";var t=this.map.getCanvasContainer(),e=this.map.getCanvas();this.mapContainer.style.perspective=this.map.transform.cameraToCenterDistance+"px",this.div.style.width=e.style.width,this.div.style.height=e.style.height,this.div.className="themeLayer",this.div.width=parseInt(e.width),this.div.height=parseInt(e.height),t.appendChild(this.div),this.setOpacity(this.opacity),this.levelRenderer=new ps,this.renderer=this.levelRenderer.init(this.div),this.renderer.clear()}},{key:"destroyFeatures",value:function(t){if(void 0===t&&(t=this.features),t){this.removeFeatures(t),Array.isArray(t)||(t=[t]);for(var e=t.length-1;e>=0;e--)t[e].destroy()}}},{key:"setVisibility",value:function(t){t!==this.visibility&&(this.visibility=t,this.display(t),this.redrawThematicFeatures(this.map.getBounds()))}},{key:"display",value:function(t){this.div.style.display=t?"block":"none"}},{key:"setOpacity",value:function(t){if(t!==this.opacity){this.opacity=t;var e=this.div;W.modifyDOMElement(e,null,null,null,null,null,null,t),null!==this.map&&w().Evented.prototype.fire("changelayer",{layer:this,property:"opacity"})}}},{key:"addFeatures",value:function(t){}},{key:"removeFeatures",value:function(t){var e=this;if(t){if(t===e.features)return e.removeAllFeatures();W.isArray(t)||"function"==typeof t||(t=[t]);for(var r=[],n=0;n<e.features.length;n++){var o=e.features[n];if(t&&"function"==typeof t)t(o)&&e.features.splice(n--,1);else-1===W.indexOf(t,o)?r.push(o):e.features.splice(n--,1)}for(var i=[],a=0,s=this.features.length;a<s;a++)o=this.features[a],i.push(o);this.features=[],this.addFeatures(i),this.renderer&&this.redrawThematicFeatures(this.map.getBounds());var u=0==r.length;w().Evented.prototype.fire("featuresremoved",{features:r,succeed:u})}}},{key:"removeAllFeatures",value:function(){this.renderer&&this.renderer.clear(),this.features=[],w().Evented.prototype.fire("featuresremoved",{features:[],succeed:!0})}},{key:"getFeatures",value:function(t){for(var e=this.features.length,r=[],n=0;n<e;++n)(!t||t&&"function"==typeof t&&t(this.features[n]))&&r.push(this.features[n]);return r}},{key:"getFeatureBy",value:function(t,e){var r=null;for(var n in this.features)if(this.features[n][t]===e){r=this.features[n];break}return r}},{key:"getFeatureById",value:function(t){return this.getFeatureBy("id",t)}},{key:"getFeaturesByAttribute",value:function(t,e){var r,n=[];for(var o in this.features)(r=this.features[o])&&r.attributes&&r.attributes[t]===e&&n.push(r);return n}},{key:"redrawThematicFeatures",value:function(t){}},{key:"on",value:function(t,e,r){return this.renderer?this.renderer.on(t,e):this.map.on(t,e),this}},{key:"off",value:function(t,e,r){return this.renderer?this.renderer.un(t,e):this.map.off(t,e),this}},{key:"addTFEvents",value:function(){for(var t=this.TFEvents,e=t.length,r=0;r<e;r++)this.renderer.on(t[r][0],t[r][1])}},{key:"getLocalXY",value:function(t){var e,r=this.map;if(t instanceof Xt||t instanceof so){var n=r.project(new(w().LngLat)(t.x,t.y));e=[n.x,n.y]}if(t instanceof Rt){var o=r.project(new(w().LngLat)(t.lon,t.lat));e=[o.x,o.y]}return e}},{key:"toiClientFeature",value:function(t){W.isArray(t)||(t=[t]);for(var e=[],r=0;r<t.length;r++)if(t[r]instanceof vo)e.push(t[r].toFeature());else if(t[r]instanceof er)e.push(t[r]);else if(-1!=["FeatureCollection","Feature","Geometry"].indexOf(t[r].type)){var n=new Kn;e=e.concat(n.read(t[r]))}else{if(!t[r].geometry||!t[r].geometry.parts)throw new Error("features's type is not be supported.");e.push(gs.fromJson(t[r]).toFeature())}return e}},{key:"toFeature",value:function(t){return this.toiClientFeature(t)}},{key:"moveEndEvent",value:function(){!this.loadWhileAnimating&&this.visibility&&(this.div.style.transform="",this.redrawThematicFeatures(this.map.getBounds()),this._show())}},{key:"moveStartEvent",value:function(){if(!this.loadWhileAnimating&&this.visibility){this.startPitch=this.map.getPitch(),this.startBearing=this.map.getBearing();var t=this.map.project(new(w().LngLat)(0,0));this.startMoveX=t.x,this.startMoveY=t.y}}},{key:"moveEvent",value:function(){if(!this.loadWhileAnimating&&this.visibility){if(!this.rotating&&!this.zooming){0!==this.map.getPitch()&&this._hide(),this.mapContainer.style.perspective=this.map.transform.cameraToCenterDistance+"px";var t=this.map.getPitch()-this.startPitch,e=-this.map.getBearing()+this.startBearing,r=this.map.project(new(w().LngLat)(0,0)),n=r.x-this.startMoveX,o=r.y-this.startMoveY;this.div.style.transform="rotateX("+t+"deg) rotateZ("+e+"deg) translate3d("+n+"px, "+o+"px, 0px)"}}else this.redrawThematicFeatures(this.map.getBounds())}},{key:"zoomStartEvent",value:function(){!this.loadWhileAnimating&&this.visibility&&(this.zooming=!0,this._hide())}},{key:"zoomEndEvent",value:function(){!this.loadWhileAnimating&&this.visibility&&(this.zooming=!1,this._show())}},{key:"rotateStartEvent",value:function(){!this.loadWhileAnimating&&this.visibility&&(this.rotating=!0)}},{key:"rotateEvent",value:function(){if(!this.loadWhileAnimating&&this.visibility){0!==this.map.getPitch()&&this._hide(),this.mapContainer.style.perspective=this.map.transform.cameraToCenterDistance+"px";var t=this.map.getPitch()-this.startPitch,e=-this.map.getBearing()+this.startBearing;this.div.style.transform="rotateX("+t+"deg) rotateZ("+e+"deg)"}}},{key:"rotateEndEvent",value:function(){!this.loadWhileAnimating&&this.visibility&&(this.rotating=!1,this._show())}},{key:"dragEndEvent",value:function(){!this.loadWhileAnimating&&this.visibility&&this._hide()}},{key:"resizeEvent",value:function(){this.mapContainer.style.perspective=this.map.transform.cameraToCenterDistance+"px";var t=this.map.getCanvas();this.div.style.width=t.style.width,this.div.style.height=t.style.height,this.div.width=parseInt(t.width),this.div.height=parseInt(t.height),this.renderer.resize()}},{key:"removeFromMap",value:function(){this.mapContainer.removeChild(this.div),this.removeAllFeatures()}},{key:"moveTo",value:function(t,e){var r=document.getElementById(this.div.id);if(e=void 0===e||e){var n=document.getElementById(t);r&&n&&n.parentNode.insertBefore(r,n)}else{var o=document.getElementById(t);if(r){if(o.nextSibling)return void o.parentNode.insertBefore(r,o.nextSibling);o.parentNode.appendChild(r)}}}},{key:"_hide",value:function(){this.renderer.painter.root.style.display="none"}},{key:"_show",value:function(){this.renderer.painter.root.style.display="block"}}])&&bs(t.prototype,e),r&&bs(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function xs(t){"@babel/helpers - typeof";return(xs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _s(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Es(n.key),n)}}function Es(t){var e=function(t,e){if("object"!=xs(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=xs(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==xs(e)?e:e+""}function Os(t,e,r){return e=ks(e),function(t,e){if(e&&("object"===xs(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],ks(t).constructor):e.apply(t,r))}function Ps(){return(Ps="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ks(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function ks(t){return(ks=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Cs(t,e){return(Cs=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Ts=function(t){function e(t,r,n){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(o=Os(this,e,[t,n])).chartsSetting=n.chartsSetting||{},o.themeFields=n.themeFields||null,o.overlayWeightField=n.overlayWeightField||null,o.isOverLay=void 0===n.isOverLay||n.isOverLay,o.charts=n.charts||[],o.cache=n.cache||{},o.chartsType=r,o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Cs(t,e)}(e,Ss),r=e,(n=[{key:"setChartsType",value:function(t){this.chartsType=t,this.redraw()}},{key:"addFeatures",value:function(t){!1!==w().Evented.prototype.fire("beforefeaturesadded",{features:t})&&(this.features=this.toiClientFeature(t),this.renderer&&this.redrawThematicFeatures(this.map.getBounds()))}},{key:"redrawThematicFeatures",value:function(){this.clearCache(),this.renderer.clearAll();for(var t=this.features,e=0,r=t.length;e<r;e++){var n=t[e],o=this.cache,i=n.id;if(!o[i]){o[i]=i;var a=this.createThematicFeature(n);a&&this.overlayWeightField&&n.attributes[this.overlayWeightField]&&!isNaN(n.attributes[this.overlayWeightField])&&(a.__overlayWeight=n.attributes[this.overlayWeightField]),a&&this.charts.push(a)}}this.drawCharts()}},{key:"createThematicFeature",value:function(t){var e;return fo[this.chartsType]&&this.themeFields&&this.chartsSetting&&(e=new fo[this.chartsType](t,this,this.themeFields,this.chartsSetting)),!!e&&(e.assembleShapes(),e)}},{key:"drawCharts",value:function(){if(this.renderer){var t=this.charts;if(this.overlayWeightField&&t.sort(function(t,e){return void 0===t.__overlayWeight&&void 0===e.__overlayWeight?0:void 0!==t.__overlayWeight&&void 0===e.__overlayWeight?-1:void 0===t.__overlayWeight&&void 0!==e.__overlayWeight?1:void 0!==t.__overlayWeight&&void 0!==e.__overlayWeight?parseFloat(t.__overlayWeight)<parseFloat(e.__overlayWeight)?1:-1:0}),this.isOverLay)for(var e=[],r=0,n=t.length;r<n;r++){var o=t[r],i=o.resetLocation(),a=o.chartBounds,s=[{x:a.left,y:a.top},{x:a.left,y:a.bottom},{x:a.right,y:a.bottom},{x:a.right,y:a.top},{x:a.left,y:a.top}],u=!1;if(0!==r)for(var l=0;l<e.length;l++)if(this.isQuadrilateralOverLap(s,e[l])){u=!0;break}if(!u){e.push(s);for(var c=o.shapes,f=0,h=c.length;f<h;f++)c[f].refOriginalPosition=i,this.renderer.addShape(c[f])}}else for(var p=0,d=t.length;p<d;p++)for(var y=t[p],v=y.resetLocation(),g=y.shapes,m=0,b=g.length;m<b;m++)g[m].refOriginalPosition=v,this.renderer.addShape(g[m]);this.renderer.render()}}},{key:"getShapesByFeatureID",value:function(t){var e=[],r=this.renderer.getAllShapes();if(!t)return r;for(var n=0,o=r.length;n<o;n++){var i=r[n];i.refDataID&&t===i.refDataID&&e.push(i)}return e}},{key:"isQuadrilateralOverLap",value:function(t,e){var r=t.length,n=e.length;if(5!==r||5!==n)return null;for(var o=!1,i=0;i<r;i++)if(this.isPointInPoly(t[i],e)){o=!0;break}for(var a=0;a<n;a++)if(this.isPointInPoly(e[a],t)){o=!0;break}for(var s=0;s<r-1&&!o;s++)for(var u=0;u<n-1;u++){if("SuperMap.Geometry.Point"===W.lineIntersection(t[s],t[s+1],e[u],e[u+1]).CLASS_NAME){o=!0;break}}return o}},{key:"isPointInPoly",value:function(t,e){for(var r=!1,n=-1,o=e.length,i=o-1;++n<o;i=n)(e[n].y<=t.y&&t.y<e[i].y||e[i].y<=t.y&&t.y<e[n].y)&&t.x<(e[i].x-e[n].x)*(t.y-e[n].y)/(e[i].y-e[n].y)+e[n].x&&(r=!r);return r}},{key:"isChartInMap",value:function(t,e){for(var r=t,n=!1,o=0,i=e.length;o<i;o++){var a=e[o];if(a.x>=r.left&&a.x<=r.right&&a.y>=r.top&&a.y<=r.bottom){n=!0;break}}return n}},{key:"clearCache",value:function(){this.cache={},this.charts=[]}},{key:"removeFeatures",value:function(t){this.clearCache(),Ps(ks(e.prototype),"removeFeatures",this).call(this,t)}},{key:"removeAllFeatures",value:function(){this.clearCache(),Ps(ks(e.prototype),"removeAllFeatures",this).call(this)}},{key:"redraw",value:function(){return this.clearCache(),!!this.renderer&&(this.redrawThematicFeatures(this.map.getBounds()),!0)}},{key:"clear",value:function(){this.renderer&&(this.renderer.clearAll(),this.renderer.refresh()),this.removeAllFeatures(),this.clearCache()}}])&&_s(r.prototype,n),o&&_s(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function As(t){"@babel/helpers - typeof";return(As="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ms(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,js(n.key),n)}}function js(t){var e=function(t,e){if("object"!=As(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=As(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==As(e)?e:e+""}var Is=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.refOriginalPosition=[0,0],this.refDataID=null,this.isHoverByRefDataID=!1,this.refDataHoverGroup=null,this.dataInfo=null,this.clickable=!0,this.hoverable=!0,this.style=null,this.highlightStyle={},this.CLASS_NAME="SuperMap.Feature.ShapeParameters"},(e=[{key:"destroy",value:function(){this.refOriginalPosition=null,this.refDataID=null,this.isHoverByRefDataID=null,this.refDataHoverGroup=null,this.dataInfo=null,this.clickable=null,this.hoverable=null,this.style=null,this.highlightStyle=null}}])&&Ms(t.prototype,e),r&&Ms(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function Ns(t){"@babel/helpers - typeof";return(Ns="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ls(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Rs(n.key),n)}}function Rs(t){var e=function(t,e){if("object"!=Ns(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Ns(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Ns(e)?e:e+""}function Ds(t,e,r){return e=Fs(e),function(t,e){if(e&&("object"===Ns(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Fs(t).constructor):e.apply(t,r))}function Bs(){return(Bs="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Fs(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Fs(t){return(Fs=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Gs(t,e){return(Gs=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Us=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Ds(this,e,[t,r])).x=isNaN(t)?0:t,n.y=isNaN(r)?0:r,n.r=6,n.CLASS_NAME="SuperMap.Feature.ShapeParameters.Point",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Gs(t,e)}(e,Is),r=e,(n=[{key:"destroy",value:function(){this.x=null,this.y=null,this.r=null,Bs(Fs(e.prototype),"destroy",this).call(this)}}])&&Ls(r.prototype,n),o&&Ls(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function zs(t){"@babel/helpers - typeof";return(zs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Vs(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Hs(n.key),n)}}function Hs(t){var e=function(t,e){if("object"!=zs(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=zs(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==zs(e)?e:e+""}function Ws(t,e,r){return e=Ys(e),function(t,e){if(e&&("object"===zs(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Ys(t).constructor):e.apply(t,r))}function qs(){return(qs="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ys(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Ys(t){return(Ys=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Xs(t,e){return(Xs=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Js=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=Ws(this,e,[t])).pointList=t,r.CLASS_NAME="SuperMap.Feature.ShapeParameters.Line",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Xs(t,e)}(e,Is),r=e,(n=[{key:"destroy",value:function(){this.pointList=null,qs(Ys(e.prototype),"destroy",this).call(this)}}])&&Vs(r.prototype,n),o&&Vs(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function Ks(t){"@babel/helpers - typeof";return(Ks="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Qs(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Zs(n.key),n)}}function Zs(t){var e=function(t,e){if("object"!=Ks(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Ks(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Ks(e)?e:e+""}function $s(t,e,r){return e=eu(e),function(t,e){if(e&&("object"===Ks(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],eu(t).constructor):e.apply(t,r))}function tu(){return(tu="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=eu(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function eu(t){return(eu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ru(t,e){return(ru=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var nu=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=$s(this,e,[t])).pointList=t,r.holePolygonPointLists=null,r.CLASS_NAME="SuperMap.Feature.ShapeParameters.Polygon",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ru(t,e)}(e,Is),r=e,(n=[{key:"destroy",value:function(){this.pointList=null,this.holePolygonPointLists=null,tu(eu(e.prototype),"destroy",this).call(this)}}])&&Qs(r.prototype,n),o&&Qs(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function ou(t){"@babel/helpers - typeof";return(ou="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function iu(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,au(n.key),n)}}function au(t){var e=function(t,e){if("object"!=ou(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=ou(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ou(e)?e:e+""}function su(t,e,r){return e=lu(e),function(t,e){if(e&&("object"===ou(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],lu(t).constructor):e.apply(t,r))}function uu(){return(uu="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=lu(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function lu(t){return(lu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function cu(t,e){return(cu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var fu=function(t){function e(t,r,n,o){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(i=su(this,e,[t,r,n,o])).x=isNaN(t)?0:t,i.y=isNaN(t)?0:r,i.width=isNaN(n)?0:n,i.height=isNaN(o)?0:o,i.CLASS_NAME="SuperMap.Feature.ShapeParameters.Rectangle",i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&cu(t,e)}(e,Is),r=e,(n=[{key:"destroy",value:function(){this.x=null,this.y=null,this.width=null,this.height=null,uu(lu(e.prototype),"destroy",this).call(this)}}])&&iu(r.prototype,n),o&&iu(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function hu(t){"@babel/helpers - typeof";return(hu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function pu(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,du(n.key),n)}}function du(t){var e=function(t,e){if("object"!=hu(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=hu(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==hu(e)?e:e+""}function yu(t,e,r){return e=gu(e),function(t,e){if(e&&("object"===hu(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],gu(t).constructor):e.apply(t,r))}function vu(){return(vu="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=gu(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function gu(t){return(gu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function mu(t,e){return(mu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var bu=function(t){function e(t,r,n,o,i,a,s){var u;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(u=yu(this,e,[t,r,n,o,i,a,s])).x=isNaN(t)?0:t,u.y=isNaN(r)?0:r,u.r=isNaN(n)?0:n,u.startAngle=isNaN(o)?0:o,u.endAngle=isNaN(i)?0:i,u.r0=isNaN(a)?0:a,u.clockWise=s,u.CLASS_NAME="SuperMap.Feature.ShapeParameters.Sector",u}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&mu(t,e)}(e,Is),r=e,(n=[{key:"destroy",value:function(){this.x=null,this.y=null,this.r=null,this.startAngle=null,this.endAngle=null,this.r0=null,this.clockWise=null,vu(gu(e.prototype),"destroy",this).call(this)}}])&&pu(r.prototype,n),o&&pu(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function wu(t){"@babel/helpers - typeof";return(wu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Su(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,xu(n.key),n)}}function xu(t){var e=function(t,e){if("object"!=wu(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=wu(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==wu(e)?e:e+""}function _u(t,e,r){return e=Ou(e),function(t,e){if(e&&("object"===wu(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Ou(t).constructor):e.apply(t,r))}function Eu(){return(Eu="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ou(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Ou(t){return(Ou=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Pu(t,e){return(Pu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var ku=function(t){function e(t,r,n){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(o=_u(this,e,[t,r,n])).x=t,o.y=r,o.text=n,o.CLASS_NAME="SuperMap.Feature.ShapeParameters.Label",o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Pu(t,e)}(e,Is),r=e,(n=[{key:"destroy",value:function(){this.x=null,this.y=null,this.text=null,Eu(Ou(e.prototype),"destroy",this).call(this)}}])&&Su(r.prototype,n),o&&Su(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function Cu(t){"@babel/helpers - typeof";return(Cu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Tu(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Au(n.key),n)}}function Au(t){var e=function(t,e){if("object"!=Cu(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Cu(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Cu(e)?e:e+""}function Mu(t,e,r){return e=Iu(e),function(t,e){if(e&&("object"===Cu(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Iu(t).constructor):e.apply(t,r))}function ju(){return(ju="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Iu(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Iu(t){return(Iu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Nu(t,e){return(Nu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Lu=function(t){function e(t,r,n,o,i,a,s,u,l){var c;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(c=Mu(this,e,[t,r,n,o,i,a,s,u,l])).x=t,c.y=r,c.image=n,c.width=o,c.height=i,c.sx=a,c.sy=s,c.sWidth=u,c.sHeight=l,c.CLASS_NAME="SuperMap.Feature.ShapeParameters.Image",c}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Nu(t,e)}(e,Is),r=e,(n=[{key:"destroy",value:function(){this.x=null,this.y=null,this.image=null,this.width=null,this.height=null,this.sx=null,this.sy=null,this.sWidth=null,this.sHeight=null,ju(Iu(e.prototype),"destroy",this).call(this)}}])&&Tu(r.prototype,n),o&&Tu(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function Ru(t){"@babel/helpers - typeof";return(Ru="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Du(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Bu(n.key),n)}}function Bu(t){var e=function(t,e){if("object"!=Ru(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Ru(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Ru(e)?e:e+""}function Fu(t,e,r){return e=Uu(e),function(t,e){if(e&&("object"===Ru(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Uu(t).constructor):e.apply(t,r))}function Gu(){return(Gu="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Uu(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Uu(t){return(Uu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function zu(t,e){return(zu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Vu=function(t){function e(t,r,n){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(o=Fu(this,e,[t,r,n])).x=isNaN(t)?0:t,o.y=isNaN(r)?0:r,o.r=isNaN(n)?0:n,o.CLASS_NAME="SuperMap.Feature.ShapeParameters.Circle",o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&zu(t,e)}(e,Is),r=e,(n=[{key:"destroy",value:function(){this.x=null,this.y=null,this.r=null,Gu(Uu(e.prototype),"destroy",this).call(this)}}])&&Du(r.prototype,n),o&&Du(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function Hu(t){"@babel/helpers - typeof";return(Hu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Wu(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,qu(n.key),n)}}function qu(t){var e=function(t,e){if("object"!=Hu(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Hu(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Hu(e)?e:e+""}function Yu(t,e,r){return e=Ju(e),function(t,e){if(e&&("object"===Hu(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Ju(t).constructor):e.apply(t,r))}function Xu(){return(Xu="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ju(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Ju(t){return(Ju=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ku(t,e){return(Ku=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Qu=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=Yu(this,e,[t])).type="smicpoint",r.refOriginalPosition&&2===r.refOriginalPosition.length||(r.refOriginalPosition=[0,0]),r.CLASS_NAME="SuperMap.LevelRenderer.Shape.SmicPoint",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ku(t,e)}(e,va),r=e,(n=[{key:"destroy",value:function(){this.type=null,Xu(Ju(e.prototype),"destroy",this).call(this)}},{key:"buildPath",value:function(t,e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var r=this.refOriginalPosition;t.arc(e.x+r[0],e.y+r[1],e.r,0,2*Math.PI,!0)}},{key:"getRect",value:function(t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var e,r=this.refOriginalPosition;return t.__rect?t.__rect:(e="stroke"==t.brushType||"fill"==t.brushType?t.lineWidth||1:0,t.__rect={x:Math.round(t.x+r[0]-t.r-e/2),y:Math.round(t.y+r[1]-t.r-e/2),width:2*t.r+e,height:2*t.r+e},t.__rect)}}])&&Wu(r.prototype,n),o&&Wu(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function Zu(t){"@babel/helpers - typeof";return(Zu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function $u(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,tl(n.key),n)}}function tl(t){var e=function(t,e){if("object"!=Zu(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Zu(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Zu(e)?e:e+""}function el(t,e,r){return e=nl(e),function(t,e){if(e&&("object"===Zu(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],nl(t).constructor):e.apply(t,r))}function rl(){return(rl="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=nl(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function nl(t){return(nl=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ol(t,e){return(ol=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var il=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=el(this,e,[t])).type="smictext",r.refOriginalPosition&&2===r.refOriginalPosition.length||(r.refOriginalPosition=[0,0]),r.CLASS_NAME="SuperMap.LevelRenderer.Shape.SmicText",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ol(t,e)}(e,va),r=e,(n=[{key:"destroy",value:function(){this.type=null,rl(nl(e.prototype),"destroy",this).call(this)}},{key:"brush",value:function(t,e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var r=this.refOriginalPosition,n=this.style;if(e&&(n=this.getHighlightStyle(n,this.highlightStyle||{})),void 0!==n.text&&!1!==n.text){t.save(),this.doClip(t),this.setContext(t,n),this.setTransform(t),n.textFont&&(t.font=n.textFont),t.textAlign=n.textAlign||"start",t.textBaseline=n.textBaseline||"middle";var o,i=(n.text+"").split("\n"),a=xi.Util_area.getTextHeight("ZH",n.textFont),s=this.getRectNoRotation(n),u=n.x+r[0];o="top"==n.textBaseline?s.y:"bottom"==n.textBaseline?s.y+a:s.y+a/2;for(var l=n.x+r[0],c=n.y+r[1],f=0,h=i.length;f<h;f++){switch(n.labelRect&&(t.fillRect(s.x-2,s.y,s.width+4,s.height),t.fillStyle=n.strokeColor,t.strokeRect(s.x-2,s.y,s.width+4,s.height),t.fillStyle=n.textColor),n.brushType){case"stroke":this.setCtxGlobalAlpha(t,"stroke",n),n.textRotation&&0!==n.textRotation?(t.save(),t.translate(l,c),t.rotate(n.textRotation*Math.PI/180),"top"==n.textBaseline?n.maxWidth?t.strokeText(i[f],0,a*f,n.maxWidth):t.strokeText(i[f],0,a*f):"bottom"==n.textBaseline?n.maxWidth?t.strokeText(i[f],0,a*(f+1)-s.height,n.maxWidth):t.strokeText(i[f],0,a*(f+1)-s.height):n.maxWidth?t.strokeText(i[f],0,a*(f+1)-s.height/2-a/2,n.maxWidth):t.strokeText(i[f],0,a*(f+1)-s.height/2-a/2),t.restore()):n.maxWidth?t.strokeText(i[f],u,o,n.maxWidth):t.strokeText(i[f],u,o),this.setCtxGlobalAlpha(t,"reset",n);break;case"both":n.textRotation&&0!==n.textRotation?(t.save(),t.translate(l,c),t.rotate(n.textRotation*Math.PI/180),"top"==n.textBaseline?n.maxWidth?(this.setCtxGlobalAlpha(t,"fill",n),t.fillText(i[f],0,a*f,n.maxWidth),this.setCtxGlobalAlpha(t,"reset",n),this.setCtxGlobalAlpha(t,"stroke",n),t.strokeText(i[f],0,a*f,n.maxWidth),this.setCtxGlobalAlpha(t,"reset",n)):(this.setCtxGlobalAlpha(t,"fill",n),t.fillText(i[f],0,a*f),this.setCtxGlobalAlpha(t,"reset",n),this.setCtxGlobalAlpha(t,"stroke",n),t.strokeText(i[f],0,a*f),this.setCtxGlobalAlpha(t,"reset",n)):"bottom"==n.textBaseline?n.maxWidth?(this.setCtxGlobalAlpha(t,"fill",n),t.fillText(i[f],0,a*(f+1)-s.height,n.maxWidth),this.setCtxGlobalAlpha(t,"reset",n),this.setCtxGlobalAlpha(t,"stroke",n),t.strokeText(i[f],0,a*(f+1)-s.height,n.maxWidth),this.setCtxGlobalAlpha(t,"reset",n)):(this.setCtxGlobalAlpha(t,"fill",n),t.fillText(i[f],0,a*(f+1)-s.height),this.setCtxGlobalAlpha(t,"reset",n),this.setCtxGlobalAlpha(t,"stroke",n),t.strokeText(i[f],0,a*(f+1)-s.height),this.setCtxGlobalAlpha(t,"reset",n)):n.maxWidth?(this.setCtxGlobalAlpha(t,"fill",n),t.fillText(i[f],0,a*(f+1)-s.height/2-a/2,n.maxWidth),this.setCtxGlobalAlpha(t,"reset",n),this.setCtxGlobalAlpha(t,"stroke",n),t.strokeText(i[f],0,a*(f+1)-s.height/2-a/2,n.maxWidth),this.setCtxGlobalAlpha(t,"reset",n)):(this.setCtxGlobalAlpha(t,"fill",n),t.fillText(i[f],0,a*(f+1)-s.height/2-a/2),this.setCtxGlobalAlpha(t,"reset",n),this.setCtxGlobalAlpha(t,"stroke",n),t.strokeText(i[f],0,a*(f+1)-s.height/2-a/2),this.setCtxGlobalAlpha(t,"reset",n)),t.restore()):n.maxWidth?(this.setCtxGlobalAlpha(t,"fill",n),t.fillText(i[f],u,o,n.maxWidth),this.setCtxGlobalAlpha(t,"reset",n),this.setCtxGlobalAlpha(t,"stroke",n),t.strokeText(i[f],u,o,n.maxWidth),this.setCtxGlobalAlpha(t,"reset",n)):(this.setCtxGlobalAlpha(t,"fill",n),t.fillText(i[f],u,o),this.setCtxGlobalAlpha(t,"reset",n),this.setCtxGlobalAlpha(t,"stroke",n),t.strokeText(i[f],u,o),this.setCtxGlobalAlpha(t,"reset",n));break;default:this.setCtxGlobalAlpha(t,"fill",n),n.textRotation&&0!==n.textRotation?(t.save(),t.translate(l,c),t.rotate(n.textRotation*Math.PI/180),"top"==n.textBaseline?n.maxWidth?t.fillText(i[f],0,a*f,n.maxWidth):t.fillText(i[f],0,a*f):"bottom"==n.textBaseline?n.maxWidth?t.fillText(i[f],0,a*(f+1)-s.height,n.maxWidth):t.fillText(i[f],0,a*(f+1)-s.height):n.maxWidth?t.fillText(i[f],0,a*(f+1)-s.height/2-a/2,n.maxWidth):t.fillText(i[f],0,a*(f+1)-s.height/2-a/2),t.restore()):n.maxWidth?t.fillText(i[f],u,o,n.maxWidth):t.fillText(i[f],u,o),this.setCtxGlobalAlpha(t,"reset",n)}o+=a}t.restore()}}},{key:"getRect",value:function(t){if(t.__rect)return t.__rect;for(var e,r,n,o,i=this.getTextBackground(t,!0),a=0,s=i.length;a<s;a++){var u=i[a];0==a?(e=u[0],n=u[0],r=u[1],o=u[1]):(u[0]<e&&(e=u[0]),u[0]>n&&(n=u[0]),u[1]<r&&(r=u[1]),u[1]>o&&(o=u[1]))}return t.__rect={x:e,y:r,width:n-e,height:o-r},t.__rect}},{key:"getRectNoRotation",value:function(t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var e,r=this.refOriginalPosition,n=xi.Util_area.getTextHeight("ZH",t.textFont),o=xi.Util_area.getTextWidth(t.text,t.textFont),i=xi.Util_area.getTextHeight(t.text,t.textFont),a=t.x+r[0];"end"==t.textAlign||"right"==t.textAlign?a-=o:"center"==t.textAlign&&(a-=o/2),e="top"==t.textBaseline?t.y+r[1]:"bottom"==t.textBaseline?t.y+r[1]-i:t.y+r[1]-i/2;var s,u=!1;if(t.maxWidth){var l=parseInt(t.maxWidth);l<o&&(s=o,u=!0,o=l),a=t.x+r[0],"end"==t.textAlign||"right"==t.textAlign?a-=o:"center"==t.textAlign&&(a-=o/2)}t.textFont&&(t.textFont.toLowerCase().indexOf("italic")>-1&&(o+=!0===u?n/3*(o/s):n/3));return{x:a,y:e,width:o,height:i}}},{key:"getTextBackground",value:function(t,e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var r=this.refOriginalPosition;if(!e&&t.__textBackground)return t.__textBackground;var n=this.getRectNoRotation(t),o=t.x+r[0],i=t.y+r[1],a=[];if(t.textRotation&&0!==t.textRotation){var s=t.textRotation,u=this.getRotatedLocation(n.x,n.y,o,i,s),l=this.getRotatedLocation(n.x+n.width,n.y,o,i,s),c=this.getRotatedLocation(n.x+n.width,n.y+n.height,o,i,s),f=this.getRotatedLocation(n.x,n.y+n.height,o,i,s);a.push(u),a.push(l),a.push(c),a.push(f)}else{var h=[n.x,n.y],p=[n.x+n.width,n.y],d=[n.x+n.width,n.y+n.height],y=[n.x,n.y+n.height];a.push(h),a.push(p),a.push(d),a.push(y)}return t.__textBackground=a,t.__textBackground}},{key:"getRotatedLocation",value:function(t,e,r,n,o){var i,a,s=new Array;return e=-e,n=-n,o=-o,i=(t-r)*Math.cos(o/180*Math.PI)-(e-n)*Math.sin(o/180*Math.PI)+r,a=(t-r)*Math.sin(o/180*Math.PI)+(e-n)*Math.cos(o/180*Math.PI)+n,s[0]=i,s[1]=-a,s}}])&&$u(r.prototype,n),o&&$u(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function al(t){"@babel/helpers - typeof";return(al="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function sl(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ul(n.key),n)}}function ul(t){var e=function(t,e){if("object"!=al(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=al(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==al(e)?e:e+""}function ll(t,e,r){return e=fl(e),function(t,e){if(e&&("object"===al(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],fl(t).constructor):e.apply(t,r))}function cl(){return(cl="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=fl(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function fl(t){return(fl=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function hl(t,e){return(hl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var pl=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=ll(this,e,[t])).type="smiccircle",r.refOriginalPosition&&2===r.refOriginalPosition.length||(r.refOriginalPosition=[0,0]),r.CLASS_NAME="SuperMap.LevelRenderer.Shape.SmicCircle",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&hl(t,e)}(e,va),r=e,(n=[{key:"destroy",value:function(){this.type=null,cl(fl(e.prototype),"destroy",this).call(this)}},{key:"buildPath",value:function(t,e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var r=this.refOriginalPosition,n=e.x+r[0],o=e.y+r[1];return t.moveTo(n+e.r,o),t.arc(n,o,e.r,0,2*Math.PI,!0),!0}},{key:"getRect",value:function(t){if(t.__rect)return t.__rect;this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var e,r=this.refOriginalPosition,n=t.x+r[0],o=t.y+r[1],i=t.r;return e="stroke"==t.brushType||"fill"==t.brushType?t.lineWidth||1:0,t.__rect={x:Math.round(n-i-e/2),y:Math.round(o-i-e/2),width:2*i+e,height:2*i+e},t.__rect}}])&&sl(r.prototype,n),o&&sl(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function dl(t){"@babel/helpers - typeof";return(dl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function yl(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,vl(n.key),n)}}function vl(t){var e=function(t,e){if("object"!=dl(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=dl(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==dl(e)?e:e+""}function gl(t,e,r){return e=bl(e),function(t,e){if(e&&("object"===dl(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],bl(t).constructor):e.apply(t,r))}function ml(){return(ml="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=bl(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function bl(t){return(bl=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function wl(t,e){return(wl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Sl=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=gl(this,e,[t])).type="smicpolygon",r.holePolygonPointLists=null,r.refOriginalPosition&&2===r.refOriginalPosition.length||(r.refOriginalPosition=[0,0]),r.CLASS_NAME="SuperMap.LevelRenderer.Shape.SmicPolygon",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&wl(t,e)}(e,va),r=e,(n=[{key:"destroy",value:function(){this.type=null,this.holePolygonPointLists=null,ml(bl(e.prototype),"destroy",this).call(this)}},{key:"brush",value:function(t,e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var r=this.style;e&&(r=this.getHighlightStyle(r,this.highlightStyle||{})),t.save(),this.setContext(t,r),this.setTransform(t);var n=!1;"fill"!=r.brushType&&"both"!=r.brushType&&void 0!==r.brushType||(t.beginPath(),"dashed"==r.lineType||"dotted"==r.lineType||"dot"==r.lineType||"dash"==r.lineType||"dashdot"==r.lineType||"longdash"==r.lineType||"longdashdot"==r.lineType?this.buildPath(t,{lineType:"solid",lineWidth:r.lineWidth,pointList:r.pointList}):(this.buildPath(t,r),n=!0),t.closePath(),this.setCtxGlobalAlpha(t,"fill",r),t.fill(),this.setCtxGlobalAlpha(t,"reset",r)),r.lineWidth>0&&("stroke"==r.brushType||"both"==r.brushType)&&(n||(t.beginPath(),this.buildPath(t,r)),this.setCtxGlobalAlpha(t,"stroke",r),t.stroke(),this.setCtxGlobalAlpha(t,"reset",r)),this.drawText(t,r,this.style);var o=W.cloneObject(r);if(o.pointList&&this.holePolygonPointLists&&this.holePolygonPointLists.length>0)for(var i=this.holePolygonPointLists,a=i.length,s=0;s<a;s++){var u=i[s];o.pointList=u,t.globalCompositeOperation="destination-out",n=!1,"fill"!=o.brushType&&"both"!=o.brushType&&void 0!==o.brushType||(t.beginPath(),"dashed"==o.lineType||"dotted"==o.lineType||"dot"==o.lineType||"dash"==o.lineType||"dashdot"==o.lineType||"longdash"==o.lineType||"longdashdot"==o.lineType?this.buildPath(t,{lineType:"solid",lineWidth:o.lineWidth,pointList:o.pointList}):(this.buildPath(t,o),n=!0),t.closePath(),this.setCtxGlobalAlpha(t,"fill",o),t.fill(),this.setCtxGlobalAlpha(t,"reset",o)),o.lineWidth>0&&("stroke"==o.brushType||"both"==o.brushType)?(n||(t.beginPath(),this.buildPath(t,o)),t.globalCompositeOperation="source-over",this.setCtxGlobalAlpha(t,"stroke",o),t.stroke(),this.setCtxGlobalAlpha(t,"reset",o)):t.globalCompositeOperation="source-over"}t.restore()}},{key:"buildPath",value:function(t,e){e.showShadow&&(t.shadowBlur=e.shadowBlur,t.shadowColor=e.shadowColor,t.shadowOffsetX=e.shadowOffsetX,t.shadowOffsetY=e.shadowOffsetY),this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var r=this.refOriginalPosition,n=e.pointList;if(!(n.length<2))if(e.smooth&&"spline"!==e.smooth){var o,i,a,s=xi.SUtil_smoothBezier(n,e.smooth,!0,e.smoothConstraint,r);t.moveTo(n[0][0]+r[0],n[0][1]+r[1]);for(var u=n.length,l=0;l<u;l++)o=s[2*l],i=s[2*l+1],a=[n[(l+1)%u][0]+r[0],n[(l+1)%u][1]+r[1]],t.bezierCurveTo(o[0],o[1],i[0],i[1],a[0],a[1])}else if("spline"===e.smooth&&(n=xi.SUtil_smoothSpline(n,!0,null,r)),e.lineType&&"solid"!=e.lineType){if("dashed"===e.lineType||"dotted"===e.lineType||"dot"===e.lineType||"dash"===e.lineType||"longdash"===e.lineType){var c=e._dashLength||(e.lineWidth||1)*("dashed"==e.lineType?5:1);e._dashLength=c;var f=e.lineWidth||1,h=f,p=f;"dashed"===e.lineType&&(h*=5,p*=5,e.lineCap&&"butt"!==e.lineCap&&(h-=f,p+=f)),"dotted"===e.lineType&&e.lineCap&&"butt"!==e.lineCap&&(h=1,p+=f),"dot"===e.lineType&&(p*=4,e.lineCap&&"butt"!==e.lineCap&&(h=1,p+=f)),"dash"===e.lineType&&(h*=4,p*=4,e.lineCap&&"butt"!==e.lineCap&&(h-=f,p+=f)),"longdash"===e.lineType&&(h*=8,p*=4,e.lineCap&&"butt"!==e.lineCap&&(h-=f,p+=f)),t.moveTo(n[0][0]+r[0],n[0][1]+r[1]);for(var d=1;d<n.length;d++)xi.SUtil_dashedLineTo(t,n[d-1][0]+r[0],n[d-1][1]+r[1],n[d][0]+r[0],n[d][1]+r[1],f,[h,p]);xi.SUtil_dashedLineTo(t,n[n.length-1][0]+r[0],n[n.length-1][1]+r[1],n[0][0]+r[0],n[0][1]+r[1],f,[h,p])}else if("dashdot"===e.lineType||"longdashdot"===e.lineType){var y=e._dashLength||(e.lineWidth||1)*("dashed"==e.lineType?5:1);e._dashLength=y;var v=e.lineWidth||1,g=v,m=v,b=v,w=v;"dashdot"===e.lineType&&(g*=4,m*=4,w*=4,e.lineCap&&"butt"!==e.lineCap&&(g-=v,m+=v,b=1,w+=v)),"longdashdot"===e.lineType&&(g*=8,m*=4,w*=4,e.lineCap&&"butt"!==e.lineCap&&(g-=v,m+=v,b=1,w+=v)),t.moveTo(n[0][0]+r[0],n[0][1]+r[1]);for(var S=1;S<n.length;S++)xi.SUtil_dashedLineTo(t,n[S-1][0]+r[0],n[S-1][1]+r[1],n[S][0]+r[0],n[S][1]+r[1],v,[g,m,b,w]);xi.SUtil_dashedLineTo(t,n[n.length-1][0]+r[0],n[n.length-1][1]+r[1],n[0][0]+r[0],n[0][1]+r[1],v,[g,m,b,w])}}else{t.moveTo(n[0][0]+r[0],n[0][1]+r[1]);for(var x=1;x<n.length;x++)t.lineTo(n[x][0]+r[0],n[x][1]+r[1]);t.lineTo(n[0][0]+r[0],n[0][1]+r[1])}}},{key:"getRect",value:function(t,e){var r;if(e?r=e:(this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]),r=this.refOriginalPosition),t.__rect)return t.__rect;for(var n,o=Number.MAX_VALUE,i=Number.MIN_VALUE,a=Number.MAX_VALUE,s=Number.MIN_VALUE,u=t.pointList,l=0,c=u.length;l<c;l++)u[l][0]+r[0]<o&&(o=u[l][0]+r[0]),u[l][0]+r[0]>i&&(i=u[l][0]+r[0]),u[l][1]+r[1]<a&&(a=u[l][1]+r[1]),u[l][1]+r[1]>s&&(s=u[l][1]+r[1]);return n="stroke"==t.brushType||"fill"==t.brushType?t.lineWidth||1:0,t.__rect={x:Math.round(o-n/2),y:Math.round(a-n/2),width:i-o+n,height:s-a+n},t.__rect}}])&&yl(r.prototype,n),o&&yl(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function xl(t){"@babel/helpers - typeof";return(xl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _l(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,El(n.key),n)}}function El(t){var e=function(t,e){if("object"!=xl(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=xl(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==xl(e)?e:e+""}function Ol(t,e,r){return e=kl(e),function(t,e){if(e&&("object"===xl(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],kl(t).constructor):e.apply(t,r))}function Pl(){return(Pl="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=kl(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function kl(t){return(kl=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Cl(t,e){return(Cl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Tl=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=Ol(this,e,[t])).brushTypeOnly="stroke",r.textPosition="end",r.type="smicbroken-line",r.refOriginalPosition&&2===r.refOriginalPosition.length||(r.refOriginalPosition=[0,0]),r.CLASS_NAME="SuperMap.LevelRenderer.Shape.SmicBrokenLine",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Cl(t,e)}(e,va),r=e,(n=[{key:"destroy",value:function(){this.brushTypeOnly=null,this.textPosition=null,this.type=null,Pl(kl(e.prototype),"destroy",this).call(this)}},{key:"buildPath",value:function(t,e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var r=this.refOriginalPosition,n=e.pointList;if(!(n.length<2)){var o=Math.min(e.pointList.length,Math.round(e.pointListLength||e.pointList.length));if(e.smooth&&"spline"!==e.smooth){var i,a,s,u=xi.SUtil_smoothBezier(n,e.smooth,!1,e.smoothConstraint,r);t.moveTo(n[0][0]+r[0],n[0][1]+r[1]);for(var l=0;l<o-1;l++)i=u[2*l],a=u[2*l+1],s=[n[l+1][0]+r[0],n[l+1][1]+r[1]],t.bezierCurveTo(i[0],i[1],a[0],a[1],s[0],s[1])}else if("spline"===e.smooth&&(o=(n=xi.SUtil_smoothSpline(n,null,null,r)).length),e.lineType&&"solid"!==e.lineType){if("dashed"===e.lineType||"dotted"===e.lineType||"dot"===e.lineType||"dash"===e.lineType||"longdash"===e.lineType){var c=e.lineWidth||1,f=c,h=c;"dashed"===e.lineType&&(f*=5,h*=5,e.lineCap&&"butt"!==e.lineCap&&(f-=c,h+=c)),"dotted"===e.lineType&&e.lineCap&&"butt"!==e.lineCap&&(f=1,h+=c),"dot"===e.lineType&&(h*=4,e.lineCap&&"butt"!==e.lineCap&&(f=1,h+=c)),"dash"===e.lineType&&(f*=4,h*=4,e.lineCap&&"butt"!==e.lineCap&&(f-=c,h+=c)),"longdash"===e.lineType&&(f*=8,h*=4,e.lineCap&&"butt"!==e.lineCap&&(f-=c,h+=c)),t.moveTo(n[0][0]+r[0],n[0][1]+r[1]);for(var p=1;p<o;p++)xi.SUtil_dashedLineTo(t,n[p-1][0]+r[0],n[p-1][1]+r[1],n[p][0]+r[0],n[p][1]+r[1],c,[f,h])}else if("dashdot"===e.lineType||"longdashdot"===e.lineType){var d=e.lineWidth||1,y=d,v=d,g=d,m=d;"dashdot"===e.lineType&&(y*=4,v*=4,m*=4,e.lineCap&&"butt"!==e.lineCap&&(y-=d,v+=d,g=1,m+=d)),"longdashdot"===e.lineType&&(y*=8,v*=4,m*=4,e.lineCap&&"butt"!==e.lineCap&&(y-=d,v+=d,g=1,m+=d)),d=(e.lineWidth||1)*("dashed"===e.lineType?5:1),t.moveTo(n[0][0]+r[0],n[0][1]+r[1]);for(var b=1;b<o;b++)xi.SUtil_dashedLineTo(t,n[b-1][0]+r[0],n[b-1][1]+r[1],n[b][0]+r[0],n[b][1]+r[1],d,[y,v,g,m])}}else{t.moveTo(n[0][0]+r[0],n[0][1]+r[1]);for(var w=1;w<o;w++)t.lineTo(n[w][0]+r[0],n[w][1]+r[1])}}}},{key:"getRect",value:function(t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var e=this.refOriginalPosition;return Sl.prototype.getRect.apply(this,[t,e])}}])&&_l(r.prototype,n),o&&_l(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function Al(t){"@babel/helpers - typeof";return(Al="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ml(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,jl(n.key),n)}}function jl(t){var e=function(t,e){if("object"!=Al(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Al(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Al(e)?e:e+""}function Il(t,e,r){return e=Ll(e),function(t,e){if(e&&("object"===Al(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Ll(t).constructor):e.apply(t,r))}function Nl(){return(Nl="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ll(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Ll(t){return(Ll=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Rl(t,e){return(Rl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Dl=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=Il(this,e,[t])).type="smicrectangle",r.refOriginalPosition&&2===r.refOriginalPosition.length||(r.refOriginalPosition=[0,0]),r.CLASS_NAME="SuperMap.LevelRenderer.Shape.SmicRectangle",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Rl(t,e)}(e,va),r=e,(n=[{key:"destroy",value:function(){this.type=null,Nl(Ll(e.prototype),"destroy",this).call(this)}},{key:"_buildRadiusPath",value:function(t,e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var r,n,o,i,a,s=this.refOriginalPosition,u=e.x+s[0],l=e.y+s[1],c=e.width,f=e.height,h=e.radius;"number"==typeof h?r=n=o=i=h:h instanceof Array?1===h.length?r=n=o=i=h[0]:2===h.length?(r=o=h[0],n=i=h[1]):3===h.length?(r=h[0],n=i=h[1],o=h[2]):(r=h[0],n=h[1],o=h[2],i=h[3]):r=n=o=i=0,r+n>c&&(r*=c/(a=r+n),n*=c/a),o+i>c&&(o*=c/(a=o+i),i*=c/a),n+o>f&&(n*=f/(a=n+o),o*=f/a),r+i>f&&(r*=f/(a=r+i),i*=f/a),t.moveTo(u+r,l),t.lineTo(u+c-n,l),0!==n&&t.quadraticCurveTo(u+c,l,u+c,l+n),t.lineTo(u+c,l+f-o),0!==o&&t.quadraticCurveTo(u+c,l+f,u+c-o,l+f),t.lineTo(u+i,l+f),0!==i&&t.quadraticCurveTo(u,l+f,u,l+f-i),t.lineTo(u,l+r),0!==r&&t.quadraticCurveTo(u,l,u+r,l)}},{key:"buildPath",value:function(t,e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var r=this.refOriginalPosition;e.radius?this._buildRadiusPath(t,e):(t.moveTo(e.x+r[0],e.y+r[1]),t.lineTo(e.x+r[0]+e.width,e.y+r[1]),t.lineTo(e.x+r[0]+e.width,e.y+r[1]+e.height),t.lineTo(e.x+r[0],e.y+r[1]+e.height),t.lineTo(e.x+r[0],e.y+r[1])),t.closePath()}},{key:"getRect",value:function(t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var e,r=this.refOriginalPosition;return t.__rect?t.__rect:(e="stroke"==t.brushType||"fill"==t.brushType?t.lineWidth||1:0,t.__rect={x:Math.round(t.x+r[0]-e/2),y:Math.round(t.y+r[1]-e/2),width:t.width+e,height:t.height+e},t.__rect)}}])&&Ml(r.prototype,n),o&&Ml(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function Bl(t){"@babel/helpers - typeof";return(Bl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Fl(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Gl(n.key),n)}}function Gl(t){var e=function(t,e){if("object"!=Bl(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Bl(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Bl(e)?e:e+""}function Ul(t,e,r){return e=Vl(e),function(t,e){if(e&&("object"===Bl(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Vl(t).constructor):e.apply(t,r))}function zl(){return(zl="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Vl(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Vl(t){return(Vl=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Hl(t,e){return(Hl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Wl=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=Ul(this,e,[t])).type="smicsector",r.refOriginalPosition&&2===r.refOriginalPosition.length||(r.refOriginalPosition=[0,0]),r.CLASS_NAME="SuperMap.LevelRenderer.Shape.SmicSector",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Hl(t,e)}(e,va),r=e,(n=[{key:"destroy",value:function(){this.type=null,zl(Vl(e.prototype),"destroy",this).call(this)}},{key:"buildPath",value:function(t,e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var r=this.refOriginalPosition,n=e.x+r[0],o=e.y+r[1],i=e.r0||0,a=e.r,s=e.startAngle,u=e.endAngle,l=e.clockWise||!1;s=xi.Util_math.degreeToRadian(s),u=xi.Util_math.degreeToRadian(u),l||(s=-s,u=-u);var c=xi.Util_math.cos(s),f=xi.Util_math.sin(s);t.moveTo(c*i+n,f*i+o),t.lineTo(c*a+n,f*a+o),t.arc(n,o,a,s,u,!l),t.lineTo(xi.Util_math.cos(u)*i+n,xi.Util_math.sin(u)*i+o),0!==i&&t.arc(n,o,i,u,s,l),t.closePath()}},{key:"getRect",value:function(t){if(t.__rect)return t.__rect;this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var e=this.refOriginalPosition,r=xi.Util_vector.create(),n=xi.Util_vector.create(),o=xi.Util_vector.create(),i=xi.Util_vector.create(),a=t.x+e[0],s=t.y+e[1],u=t.r0||0,l=t.r,c=xi.Util_math.degreeToRadian(t.startAngle),f=xi.Util_math.degreeToRadian(t.endAngle),h=t.clockWise;return h||(c=-c,f=-f),u>1?xi.Util_computeBoundingBox.arc(a,s,u,c,f,!h,r,o):(r[0]=o[0]=a,r[1]=o[1]=s),xi.Util_computeBoundingBox.arc(a,s,l,c,f,!h,n,i),xi.Util_vector.min(r,r,n),xi.Util_vector.max(o,o,i),t.__rect={x:r[0],y:r[1],width:o[0]-r[0],height:o[1]-r[1]},t.__rect}}])&&Fl(r.prototype,n),o&&Fl(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function ql(t){"@babel/helpers - typeof";return(ql="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Yl(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Xl(n.key),n)}}function Xl(t){var e=function(t,e){if("object"!=ql(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=ql(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ql(e)?e:e+""}var Jl=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.shapeParameters=e,this.CLASS_NAME="SuperMap.Feature.ShapeFactory"}return e=t,n=[{key:"transformStyle",value:function(t){var e={},r=["normal","normal","normal","12","arial,sans-serif"],n=[!0,!1];for(var o in t)switch(o){case"fill":n[0]=t[o];break;case"fillColor":e.color=t[o];break;case"stroke":n[1]=t[o];break;case"strokeWidth":e.lineWidth=t[o];break;case"strokeLinecap":e.lineCap=t[o];break;case"strokeLineJoin":e.lineJoin=t[o];break;case"strokeDashstyle":e.lineType=t[o];break;case"pointRadius":e.r=t[o];break;case"label":e.text=t[o];break;case"labelRect":e.labelRect=t[o];break;case"fontColor":e.textColor=t[o];break;case"fontStyle":r[0]=t[o];break;case"fontVariant":r[1]=t[o];break;case"fontWeight":r[2]=t[o];break;case"fontSize":var i="";t[o]&&t[o].toString().indexOf("px")<0&&(i="px"),r[3]=t[o]+i;break;case"fontFamily":r[4]=t[o];break;case"fontOpacity":e.opacity=t[o];break;case"labelPosition":e.textPosition=t[o];break;case"labelAlign":e.textAlign=t[o];break;case"labelBaseline":e.textBaseline=t[o];break;case"labelRotation":e.textRotation=t[o];break;default:e[o]=t[o]}return e.textFont=r.join(" "),!0===n[0]&&!1===n[1]?e.brushType="fill":!1===n[0]&&!0===n[1]?e.brushType="stroke":!0===n[0]&&!0===n[1]?e.brushType="both":e.brushType="fill",null==e.lineWidth&&(e.lineWidth=1),e}},{key:"Background",value:function(t,e,r){var n=r||{},o=new fu(e[0],e[3],Math.abs(e[2]-e[0]),Math.abs(e[3]-e[1]));return o.style={fillColor:"#f3f3f3"},n.backgroundStyle&&W.copyAttributesWithClip(o.style,n.backgroundStyle),n.backgroundRadius&&(o.style.radius=n.backgroundRadius),o.clickable=!1,o.hoverable=!1,t.createShape(o)}},{key:"GraphAxis",value:function(t,e,r,n){var o=e,i=r||{},a=[],s=[],u=!!i.useXReferenceLine&&i.useXReferenceLine,l=i.axisYTick&&!isNaN(i.axisYTick)?i.axisYTick:0,c=[],f=[];if(0==l){if(f.push([o[0],o[3]-5]),f.push([o[0],o[1]]),i.axis3DParameter&&!isNaN(i.axis3DParameter)&&i.axis3DParameter>=15){var h=parseInt(i.axis3DParameter),p=[o[0]-h,o[1]+h];i.axisUseArrow?(c.push([p[0]+1.5,p[1]-7.5]),c.push([p[0]-1,p[1]+1]),c.push([p[0]+7.5,p[1]-1.5]),f.push([p[0],p[1]])):f.push([p[0],p[1]]),f.push([o[0],o[1]])}f.push([o[2]+5,o[1]])}else{var d=Math.abs(o[1]-o[3])/l,y=o[3];f.push([o[0],y-5]);for(var v=0;v<l;v++){if(f.push([o[0],y]),f.push([o[0]-5,y]),f.push([o[0],y]),u){var g=new Js([[o[0],y],[o[2],y]]);g.style={strokeColor:"#cfcfcf",strokeLinecap:"butt",strokeLineJoin:"round",strokeWidth:1},g.clickable=!1,g.hoverable=!1,i.xReferenceLineStyle&&W.copyAttributesWithClip(g.style,i.xReferenceLineStyle),a.push(t.createShape(g))}y+=d}if(f.push([o[0],o[1]]),i.axis3DParameter&&!isNaN(i.axis3DParameter)&&i.axis3DParameter>=15){var m=parseInt(i.axis3DParameter),b=[o[0]-m,o[1]+m];i.axisUseArrow?(c.push([b[0]+1.5,b[1]-7.5]),c.push([b[0]-1,b[1]+1]),c.push([b[0]+7.5,b[1]-1.5]),f.push([b[0],b[1]])):f.push([b[0],b[1]]),f.push([o[0],o[1]])}f.push([o[2]+5,o[1]])}if(i.axisUseArrow){var w=[[o[2]+5,o[1]+4],[o[2]+13,o[1]],[o[2]+5,o[1]-4]],S=[[o[0]-4,o[3]-5],[o[0],o[3]-13],[o[0]+4,o[3]-5]],x=new nu(w);x.style={fillColor:"#008acd"},W.copyAttributesWithClip(x.style,i.axisStyle),s.push(t.createShape(x));var _=new nu(S);if(_.style={fillColor:"#008acd"},W.copyAttributesWithClip(_.style,i.axisStyle),s.push(t.createShape(_)),i.axis3DParameter&&!isNaN(i.axis3DParameter)&&i.axis3DParameter>=15){var E=new nu(c);E.style={fillColor:"#008acd"},W.copyAttributesWithClip(E.style,i.axisStyle),s.push(t.createShape(E))}}var O=new Js(f);O.style={strokeLinecap:"butt",strokeLineJoin:"round",strokeColor:"#008acd",strokeWidth:1},i.axisStyle&&W.copyAttributesWithClip(O.style,i.axisStyle),O.clickable=!1,O.hoverable=!1;var P=[t.createShape(O)],k=[];if(i.axisYLabels&&i.axisYLabels.length&&i.axisYLabels.length>0){var C=i.axisYLabels,T=C.length,A=[0,0];if(i.axisYLabelsOffset&&i.axisYLabelsOffset.length&&(A=i.axisYLabelsOffset),1==T){var M=new ku(o[0]-5+A[0],o[3]+A[1],C[0]);M.style={labelAlign:"right"},i.axisYLabelsStyle&&W.copyAttributesWithClip(M.style,i.axisYLabelsStyle),M.clickable=!1,M.hoverable=!1,k.push(t.createShape(M))}else for(var j=o[3],I=Math.abs(o[1]-o[3])/(T-1),N=0;N<T;N++){var L=new ku(o[0]-5+A[0],j+A[1],C[N]);L.style={labelAlign:"right"},i.axisYLabelsStyle&&W.copyAttributesWithClip(L.style,i.axisYLabelsStyle),L.clickable=!1,L.hoverable=!1,k.push(t.createShape(L)),j+=I}}var R=[];if(i.axisXLabels&&i.axisXLabels.length&&i.axisXLabels.length>0){var D=i.axisXLabels,B=D.length,F=[0,0];if(i.axisXLabelsOffset&&i.axisXLabelsOffset.length&&(F=i.axisXLabelsOffset),n&&n.xPositions&&n.xPositions.length&&n.xPositions.length==B)for(var G=n.xPositions,U=0;U<B;U++){var z=new ku(G[U]+F[0],o[1]+F[1],D[U]);z.style={labelAlign:"center",labelBaseline:"top"},i.axisXLabelsStyle&&W.copyAttributesWithClip(z.style,i.axisXLabelsStyle),z.clickable=!1,z.hoverable=!1,R.push(t.createShape(z))}else if(1==B){var V=new ku(o[0]-5+F[0],o[1]+F[0],D[0]);V.style={labelAlign:"center",labelBaseline:"top"},i.axisXLabelsStyle&&W.copyAttributesWithClip(V.style,i.axisXLabelsStyle),V.clickable=!1,V.hoverable=!1,R.push(t.createShape(V))}else for(var H=o[0],q=Math.abs(o[2]-o[0])/(B-1),Y=0;Y<B;Y++){var X=new ku(H+F[0],o[1]+F[1],D[Y]);X.style={labelAlign:"center",labelBaseline:"top"},i.axisXLabelsStyle&&W.copyAttributesWithClip(X.style,i.axisXLabelsStyle),X.clickable=!1,X.hoverable=!1,R.push(t.createShape(X)),H+=q}}return a.concat(P).concat(k).concat(R).concat(s)}},{key:"ShapeStyleTool",value:function(t,e,r,n,o,i){var a=t||{};if(e&&W.copyAttributesWithClip(a,e),r&&r.length&&void 0!==o&&!isNaN(o)&&o>=0&&r[o]&&W.copyAttributesWithClip(a,r[o]),n&&n.length&&void 0!==i)for(var s=n,u=s.length,l=parseFloat(i),c=0;c<u;c++)if(s[c].start<=l&&l<s[c].end){W.copyAttributesWithClip(a,s[c].style);break}return a}}],(r=[{key:"destroy",value:function(){this.shapeParameters=null}},{key:"createShape",value:function(e){if(e&&(this.shapeParameters=e),!this.shapeParameters)return null;var r=this.shapeParameters;if(r instanceof Us){var n=new Object;n.x=r.x,n.y=r.y,n.r=r.r,n=W.copyAttributesWithClip(n,r.style,["x","y"]);var o=new Qu;return o.style=t.transformStyle(n),o.highlightStyle=t.transformStyle(r.highlightStyle),W.copyAttributesWithClip(o,r,["x","y","style","highlightStyle"]),o}if(r instanceof Js){if(!r.pointList)return null;var i=new Object;i.pointList=r.pointList,i=W.copyAttributesWithClip(i,r.style,["pointList"]);var a=new Tl;return a.style=t.transformStyle(i),a.highlightStyle=t.transformStyle(r.highlightStyle),W.copyAttributesWithClip(a,r,["pointList","style","highlightStyle"]),a}if(r instanceof nu){if(!r.pointList)return null;var s=new Object;s.pointList=r.pointList,s=W.copyAttributesWithClip(s,r.style,["pointList"]);var u=new Sl;return u.style=t.transformStyle(s),u.highlightStyle=t.transformStyle(r.highlightStyle),W.copyAttributesWithClip(u,r,["pointList","style","highlightStyle"]),u}if(r instanceof fu){if(!r.x&&!r.y&!r.width&!r.height)return null;var l=new Object;l.x=r.x,l.y=r.y,l.width=r.width,l.height=r.height,l=W.copyAttributesWithClip(l,r.style,["x","y","width","height"]);var c=new Dl;return c.style=t.transformStyle(l),c.highlightStyle=t.transformStyle(r.highlightStyle),W.copyAttributesWithClip(c,r,["x","y","width","height","style","highlightStyle"]),c}if(r instanceof bu){var f=new Object;f.x=r.x,f.y=r.y,f.r=r.r,f.startAngle=r.startAngle,f.endAngle=r.endAngle,r.r0&&(f.r0=r.r0),r.clockWise&&(f.clockWise=r.clockWise),f=W.copyAttributesWithClip(f,r.style,["x","y","r","startAngle","endAngle","r0","endAngle"]);var h=new Wl;return h.style=t.transformStyle(f),h.highlightStyle=t.transformStyle(r.highlightStyle),W.copyAttributesWithClip(h,r,["x","y","r","startAngle","endAngle","r0","endAngle","style","highlightStyle"]),h}if(r instanceof ku){var p=new Object;p.x=r.x,p.y=r.y,p.text=r.text,p=W.copyAttributesWithClip(p,r.style,["x","y","text"]);var d=new il;return d.style=t.transformStyle(p),d.highlightStyle=t.transformStyle(r.highlightStyle),W.copyAttributesWithClip(d,r,["x","y","text","style","highlightStyle"]),d}if(r instanceof Lu){var y=new Object;y.x=r.x,y.y=r.y,r.image&&(y.image=r.image),r.width&&(y.width=r.width),r.height&&(y.height=r.height),r.sx&&(y.sx=r.sx),r.sy&&(y.sy=r.sy),r.sWidth&&(y.sWidth=r.sWidth),r.sHeight&&(y.sHeight=r.sHeight),y=W.copyAttributesWithClip(y,r.style,["x","y","image","width","height","sx","sy","sWidth","sHeight"]);var v=new Ea;return v.style=t.transformStyle(y),v.highlightStyle=t.transformStyle(r.highlightStyle),W.copyAttributesWithClip(v,r,["x","y","image","width","height","style","highlightStyle"]),v}if(r instanceof Vu){var g=new Object;g.x=r.x,g.r=r.r,g.y=r.y,g=W.copyAttributesWithClip(g,r.style,["x","y","r"]);var m=new pl;return m.style=t.transformStyle(g),m.highlightStyle=t.transformStyle(r.highlightStyle),W.copyAttributesWithClip(m,r,["x","y","r","style","highlightStyle","lineWidth","text","textPosition"]),m}return null}}])&&Yl(e.prototype,r),n&&Yl(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,r,n}();function Kl(t){"@babel/helpers - typeof";return(Kl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ql(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Zl(n.key),n)}}function Zl(t){var e=function(t,e){if("object"!=Kl(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Kl(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Kl(e)?e:e+""}function $l(t,e,r){return e=rc(e),tc(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],rc(t).constructor):e.apply(t,r))}function tc(t,e){if(e&&("object"===Kl(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function ec(){return(ec="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=rc(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function rc(t){return(rc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function nc(t,e){return(nc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var oc=function(t){function e(t,r,n,o,i){var a;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),a=$l(this,e,[t,r]),!t.geometry)return tc(a);if(!(t.geometry instanceof L))return tc(a);a.dataBounds=t.geometry.getBounds(),a.nodesClipPixel=2,a.isHoverAble=!0,a.isMultiHover=!0,a.isClickAble=!0,a.highlightStyle=null,a.shapeOptions={},a.style=n||{},a.CLASS_NAME="SuperMap.Feature.Theme.Vector",a.style=n||{},o&&W.copyAttributesWithClip(a,o,["shapeOptions","dataBounds"]),i&&W.copyAttributesWithClip(a.shapeOptions,i);var s=t.geometry;return a.lonlat=a.dataBounds.getCenterLonLat(),a.location=a.getLocalXY(a.lonlat),s instanceof je?a.lineToTF(s):s instanceof Ee?a.lineToTF(s):s instanceof ve||(s instanceof le?a.multiPointToTF(s):s instanceof br?a.multiLineStringToTF(s):s instanceof Pr?a.multiPolygonToTF(s):s instanceof Fe?a.polygonToTF(s):s instanceof re||(s instanceof Xt?a.pointToTF(s):s instanceof Wi?a.rectangleToTF(s):s instanceof so&&a.geoTextToTF(s))),a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&nc(t,e)}(e,fo),r=e,(n=[{key:"destroy",value:function(){this.style=null,this.dataBounds=null,this.nodesClipPixel=null,this.isHoverAble=null,this.isMultiHover=null,this.isClickAble=null,this.highlightStyle=null,this.shapeOptions=null,ec(rc(e.prototype),"destroy",this).call(this)}},{key:"lineToTF",value:function(t){for(var e=t.components,r=[],n=[],o=this.location,i=[],a=this.nodesClipPixel,s=0;s<e.length;s++){var u=e[s];if(n=[],r=this.getLocalXY(u),n[0]=r[0]-o[0],n[1]=r[1]-o[1],i.length>0){var l=i[i.length-1];if(Math.abs(l[0]-n[0])<=a&&Math.abs(l[1]-n[1])<=a)continue}i.push(n)}if(i.length<2)return null;var c=new Object;(c=W.copyAttributesWithClip(c,this.style,["pointList"])).pointList=i;var f=new Tl({style:c,clickable:this.isClickAble,hoverable:this.isHoverAble});this.highlightStyle&&(f.highlightStyle=this.highlightStyle),f.refOriginalPosition=this.location,f.refDataID=this.data.id,f.isHoverByRefDataID=this.isMultiHover,this.shapeOptions&&W.copyAttributesWithClip(f,this.shapeOptions),this.shapes.push(f)}},{key:"multiPointToTF",value:function(t){for(var e=t.components,r=[],n=[],o=this.location,i=[],a=this.nodesClipPixel,s=0;s<e.length;s++){var u=e[s];if(n=[],r=this.getLocalXY(u),n[0]=r[0]-o[0],n[1]=r[1]-o[1],i.length>0){var l=i[i.length-1];if(Math.abs(l[0]-n[0])<=a&&Math.abs(l[1]-n[1])<=a)continue}i.push(n);var c=new Object;c.r=6,(c=W.copyAttributesWithClip(c,this.style)).x=n[0],c.y=n[1];var f=new Qu({style:c,clickable:this.isClickAble,hoverable:this.isHoverAble});this.highlightStyle&&(f.highlightStyle=this.highlightStyle),f.refOriginalPosition=o,f.refDataID=this.data.id,f.isHoverByRefDataID=this.isMultiHover,this.shapeOptions&&W.copyAttributesWithClip(f,this.shapeOptions),this.shapes.push(f)}}},{key:"multiLineStringToTF",value:function(t){for(var e=t.components,r=0;r<e.length;r++){var n=e[r];this.lineToTF(n)}}},{key:"multiPolygonToTF",value:function(t){for(var e=t.components,r=0;r<e.length;r++){var n=e[r];this.polygonToTF(n)}}},{key:"pointToTF",value:function(t){var e=this.location,r=this.getLocalXY(t),n=new Object;n.r=6,(n=W.copyAttributesWithClip(n,this.style)).x=r[0]-e[0],n.y=r[1]-e[1];var o=new Qu({style:n,clickable:this.isClickAble,hoverable:this.isHoverAble});this.highlightStyle&&(o.highlightStyle=this.highlightStyle),o.refOriginalPosition=e,o.refDataID=this.data.id,o.isHoverByRefDataID=this.isMultiHover,this.shapeOptions&&W.copyAttributesWithClip(o,this.shapeOptions),this.shapes.push(o)}},{key:"polygonToTF",value:function(t){for(var e=t.components,r=[],n=[],o=this.location,i=[],a=[],s=[],u=this.nodesClipPixel,l=0;l<e.length;l++){var c=e[l].components;if(0===l){i=[];for(var f=0;f<c.length;f++){if(n=[],r=this.getLocalXY(c[f]),n[0]=r[0]-o[0],n[1]=r[1]-o[1],i.length>0){var h=i[i.length-1];if(Math.abs(h[0]-n[0])<=u&&Math.abs(h[1]-n[1])<=u)continue}i.push(n)}}else{a=[];for(var p=0;p<c.length;p++){if(n=[],r=this.getLocalXY(c[p]),n[0]=r[0]-o[0],n[1]=r[1]-o[1],a.length>0){var d=a[a.length-1];if(Math.abs(d[0]-n[0])<=u&&Math.abs(d[1]-n[1])<=u)continue}a.push(n)}}a.length<2||s.push(a)}if(!(i.length<2)){var y={};(y=W.copyAttributesWithClip(y,this.style,["pointList"])).pointList=i;var v=new Sl({style:y,clickable:this.isClickAble,hoverable:this.isHoverAble});this.highlightStyle&&(v.highlightStyle=this.highlightStyle),v.refOriginalPosition=this.location,v.refDataID=this.data.id,v.isHoverByRefDataID=this.isMultiHover,s.length>0&&(v.holePolygonPointLists=s),this.shapeOptions&&W.copyAttributesWithClip(v,this.shapeOptions),this.shapes.push(v)}}},{key:"rectangleToTF",value:function(t){var e=this.location,r=new Rt(t.x,t.y),n=this.layer.map.getResolution(),o=this.getLocalXY(r),i=new Object;i.r=6,(i=W.copyAttributesWithClip(i,this.style)).x=o[0]-e[0],i.y=o[1]-e[1]-2*t.width/n,i.width=t.width/n,i.height=t.height/n;var a=new Dl({style:i,clickable:this.isClickAble,hoverable:this.isHoverAble});this.highlightStyle&&(a.highlightStyle=this.highlightStyle),a.refOriginalPosition=e,a.refDataID=this.data.id,a.isHoverByRefDataID=this.isMultiHover,this.shapeOptions&&W.copyAttributesWithClip(a,this.shapeOptions),this.shapes.push(a)}},{key:"geoTextToTF",value:function(t){var e=this.location,r=this.getLocalXY(t),n=new Object;n.r=6,(n=W.copyAttributesWithClip(n,this.style,["x","y","text"])).x=r[0]-e[0],n.y=r[1]-e[1],n.text=t.text;var o=new il({style:n,clickable:this.isClickAble,hoverable:this.isHoverAble});this.highlightStyle&&(o.highlightStyle=this.highlightStyle),o.refOriginalPosition=e,o.refDataID=this.data.id,o.isHoverByRefDataID=this.isMultiHover,this.shapeOptions&&W.copyAttributesWithClip(o,this.shapeOptions),this.shapes.push(o)}},{key:"updateAndAddShapes",value:function(){var t=this.getLocalXY(this.lonlat);this.location=t;for(var e=this.layer.renderer,r=0,n=this.shapes.length;r<n;r++){var o=this.shapes[r];o.refOriginalPosition=t,e.addShape(o)}}},{key:"getShapesCount",value:function(){return this.shapes.length}},{key:"getLocalXY",value:function(t){return this.layer.getLocalXY(t)}}])&&Ql(r.prototype,n),o&&Ql(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function ic(t){"@babel/helpers - typeof";return(ic="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ac(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,sc(n.key),n)}}function sc(t){var e=function(t,e){if("object"!=ic(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=ic(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ic(e)?e:e+""}function uc(t,e,r){return e=lc(e),function(t,e){if(e&&("object"===ic(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],lc(t).constructor):e.apply(t,r))}function lc(t){return(lc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function cc(t,e){return(cc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var fc=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=uc(this,e,[t,r])).name=null,n.style=null,n.highlightStyle=null,n.nodesClipPixel=2,n.isHoverAble=!1,n.isMultiHover=!1,n.isClickAble=!0,n.isAllowFeatureStyle=!1,W.extend(n,r),n.cache=r.cache||{},n.cacheFields=r.cacheFields||[],n.maxCacheCount=r.maxCacheCount||0,n.isCustomSetMaxCacheCount=void 0!==r.isCustomSetMaxCacheCount&&r.isCustomSetMaxCacheCount,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&cc(t,e)}(e,Ss),r=e,(n=[{key:"addFeatures",value:function(t){w().Evented.prototype.fire("beforefeaturesadded",{features:t}),this.features=this.toiClientFeature(t),this.isCustomSetMaxCacheCount||(this.maxCacheCount=5*this.features.length),this.renderer&&this.redrawThematicFeatures(this.map.getBounds())}},{key:"removeFeatures",value:function(t){this.clearCache(),Ss.prototype.removeFeatures.call(this,t)}},{key:"removeAllFeatures",value:function(){this.clearCache(),Ss.prototype.removeAllFeatures.apply(this,arguments)}},{key:"redrawThematicFeatures",value:function(t){this.clearCache();var e=this.renderer.getHoverOne(),r=null;e&&e.refDataID&&(r=e.refDataID),this.renderer.clearAll();for(var n=this.features,o=this.cache,i=this.cacheFields,a=this.map.getZoom(),s=this.maxCacheCount,u=0,l=n.length;u<l;u++){var c,f=n[u].id+"_zoom_"+a.toString();if(o[f])o[f].updateAndAddShapes();else{if((c=this.createThematicFeature(n[u])).getShapesCount()<1)continue;if(o[f]=c,i.push(f),i.length>s){var h=i[0];i.splice(0,1),delete o[h]}}}if(this.renderer.render(),r&&this.isHoverAble&&this.isMultiHover){var p=this.getShapesByFeatureID(r);this.renderer.updateHoverShapes(p)}}},{key:"createThematicFeature",value:function(t){var e=W.copyAttributesWithClip(this.style);t.style&&!0===this.isAllowFeatureStyle&&(e=W.copyAttributesWithClip(t.style));var r={};r.nodesClipPixel=this.nodesClipPixel,r.isHoverAble=this.isHoverAble,r.isMultiHover=this.isMultiHover,r.isClickAble=this.isClickAble,r.highlightStyle=Jl.transformStyle(this.highlightStyle);for(var n=new oc(t,this,Jl.transformStyle(e),r),o=0;o<n.shapes.length;o++)this.renderer.addShape(n.shapes[o]);return n}},{key:"clearCache",value:function(){this.cache={},this.cacheFields=[]}},{key:"clear",value:function(){this.renderer.clearAll(),this.renderer.refresh(),this.removeAllFeatures(),this.clearCache()}},{key:"getCacheCount",value:function(){return this.cacheFields.length}},{key:"setMaxCacheCount",value:function(t){isNaN(t)||(this.maxCacheCount=t,this.isCustomSetMaxCacheCount=!0)}},{key:"getShapesByFeatureID",value:function(t){var e=[],r=this.renderer.getAllShapes();if(!t)return r;for(var n=0,o=r.length;n<o;n++){var i=r[n];i.refDataID&&t===i.refDataID&&e.push(i)}return e}}])&&ac(r.prototype,n),o&&ac(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function hc(t){"@babel/helpers - typeof";return(hc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function pc(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,dc(n.key),n)}}function dc(t){var e=function(t,e){if("object"!=hc(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=hc(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==hc(e)?e:e+""}function yc(t,e,r){return e=gc(e),function(t,e){if(e&&("object"===hc(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],gc(t).constructor):e.apply(t,r))}function vc(){return(vc="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=gc(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function gc(t){return(gc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function mc(t,e){return(mc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var bc=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=yc(this,e,[t,r])).isOverLay=!0,n.isAvoid=!0,n.themeField=null,n.styleGroups=null,W.extend(n,r),n.defaultStyle={fontColor:"#000000",fontOpacity:1,fontSize:"12px",fontStyle:"normal",fontWeight:"normal",labelAlign:"cm",labelXOffset:0,labelYOffset:0,labelRotation:0,fill:!1,fillColor:"#ee9900",fillOpacity:.4,stroke:!1,strokeColor:"#ee9900",strokeOpacity:1,strokeWidth:1,strokeLinecap:"round",strokeDashstyle:"solid",labelRect:!0,labelSelect:!0,_isGeoTextStrategyStyle:!0},n.getPxBoundsMode=0,n.labelFeatures=[],n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&mc(t,e)}(e,fc),r=e,(n=[{key:"redrawThematicFeatures",value:function(t){if(this.features.length>0&&0==this.labelFeatures.length)for(var r=this.setLabelsStyle(this.features),n=0,o=r.length;n<o;n++)this.labelFeatures.push(r[n]);this.features=this.getDrawnLabels(this.labelFeatures),vc(gc(e.prototype),"redrawThematicFeatures",this).call(this,t)}},{key:"removeFeatures",value:function(t){this.labelFeatures=[],vc(gc(e.prototype),"removeFeatures",this).call(this,t)}},{key:"removeAllFeatures",value:function(){this.labelFeatures=[],vc(gc(e.prototype),"removeAllFeatures",this).call(this,arguments)}},{key:"createThematicFeature",value:function(t){var e=this.getStyleByData(t),r={};r.nodesClipPixel=this.nodesClipPixel,r.isHoverAble=this.isHoverAble,r.isMultiHover=this.isMultiHover,r.isClickAble=this.isClickAble,r.highlightStyle=Jl.transformStyle(this.highlightStyle);for(var n=new oc(t,this,Jl.transformStyle(e),r),o=0;o<n.shapes.length;o++)this.renderer.addShape(n.shapes[o]);return n}},{key:"getDrawnLabels",value:function(t){for(var e,r,n,o,i=[],a=[],s={labelAlign:"cm",labelXOffset:0,labelYOffset:0},u=this.map,l=u.getZoom(),c=u.getCanvas(),f={x:parseFloat(c.style.width),y:parseFloat(c.style.height)},h=0,p=t.length;h<p;h++){((r=t[h]).isStyleChange||void 0===r.isStyleChange)&&(r=this.setStyle(r));var d=this.getLabelPxLocation(r);if(d.x>=0&&d.x<=f.x&&d.y>=0&&d.y<=f.y){if(r.style.minZoomLevel>-1&&l<=r.style.minZoomLevel)continue;if(r.style.maxZoomLevel>-1&&l>r.style.maxZoomLevel)continue;var y=null;r.isStyleChange?(r.isStyleChange=null,y=this.calculateLabelBounds(r,d)):y=r.geometry.bsInfo.w&&r.geometry.bsInfo.h?this.calculateLabelBounds2(r,d):this.calculateLabelBounds(r,d);var v=new Gt(0,f.y,f.x,0),g=y.length;if(this.isAvoid){var m=this.getAvoidInfo(v,y);if(m){if("left"===m.aspectW){r.style.labelXOffset+=m.offsetX;for(var b=0;b<g;b++)y[b].x+=m.offsetX}else if("right"===m.aspectW){r.style.labelXOffset+=-m.offsetX;for(var w=0;w<g;w++)y[w].x+=-m.offsetX}if("top"===m.aspectH){r.style.labelYOffset+=m.offsetY;for(var S=0;S<g;S++)y[S].y+=m.offsetY}else if("bottom"===m.aspectH){r.style.labelYOffset+=-m.offsetY;for(var x=0;x<g;x++)y[x].y+=-m.offsetY}r.isStyleChange=!0}}if(this.isOverLay){var _=!1;if(0!=h)for(var E=0;E<a.length;E++)if(this.isQuadrilateralOverLap(y,a[E])){_=!0;break}if(_)continue;a.push(y)}for(var O=[],P=0;P<g-1;P++)O.push(u.unproject(y[P]));var k=O[3],C=O[1],T=new Gt(k.lng,k.lat,C.lng,C.lat).getCenterLonLat(),A=new so(T.lon,T.lat,r.attributes[this.themeField]);A.calculateBounds(),n=W.cloneObject(r.style),o=W.cloneObject(W.copyAttributes(n,s)),(e=new er(A,r.attributes,o)).id=r.id,e.fid=r.fid,i.push(e)}}return i}},{key:"getStyleByData",value:function(t){var e=t;if(e.style=W.copyAttributes(e.style,this.defaultStyle),this.style&&this.style.fontSize&&parseFloat(this.style.fontSize)<12&&(this.style.fontSize="12px"),e.style=W.copyAttributes(e.style,this.style),this.themeField&&this.styleGroups&&e.attributes){var r=this.themeField,n=e.attributes,o=this.styleGroups,i=!1,a=null;for(var s in n)if(r===s){i=!0,a=n[s];break}if(i)for(var u=0,l=o.length;u<l;u++)if(a>=o[u].start&&a<o[u].end){var c=o[u].style;c&&c.fontSize&&parseFloat(c.fontSize)<12&&(c.fontSize="12px"),e.style=W.copyAttributes(e.style,c)}e.style.label=e.attributes[this.themeField]}return e.style}},{key:"setLabelsStyle",value:function(t){for(var e,r=[],n=0,o=t.length;n<o;n++){var i=t[n];if("SuperMap.Geometry.GeoText"!==i.geometry.CLASS_NAME)return t;(i.geometry.bsInfo.w||i.geometry.bsInfo.h)&&(i.geometry.bsInfo.w=null,i.geometry.bsInfo.h=null,i.geometry.labelWTmp=null),(e=this.setStyle(i)).layer=this.layer,r.push(e)}return r}},{key:"setStyle",value:function(t){var e=t;if(e.style=W.copyAttributes(e.style,this.defaultStyle),this.style&&this.style.fontSize&&parseFloat(this.style.fontSize)<12&&(this.style.fontSize="12px"),e.style=W.copyAttributes(e.style,this.style),this.groupField&&this.styleGroups&&e.attributes){var r=this.groupField,n=e.attributes,o=this.styleGroups,i=!1,a=null;for(var s in n)if(r===s){i=!0,a=n[s];break}if(i)for(var u=0,l=o.length;u<l;u++)if(a>=o[u].start&&a<o[u].end){var c=o[u].style;c&&c.fontSize&&parseFloat(c.fontSize)<12&&(c.fontSize="12px"),e.style=W.copyAttributes(e.style,c)}}return e.style.label=e.geometry.text,e}},{key:"getLabelPxLocation",value:function(t){var e=t.geometry,r=t.style,n=e.getCentroid(),o=this.map.project(new(w().LngLat)(n.x,n.y)),i=new(w().Point)(o.x,o.y);if(r.labelXOffset||r.labelYOffset){var a=isNaN(r.labelXOffset)?0:r.labelXOffset,s=isNaN(r.labelYOffset)?0:r.labelYOffset,u=i.add(new(w().Point)(a,-s));return new(w().Point)(u.x,u.y)}return new(w().Point)(i.x,i.y)}},{key:"calculateLabelBounds",value:function(t,e){var r=t.geometry,n=null,o=null;if(0==this.getPxBoundsMode)n=r.getLabelPxBoundsByText(e,t.style);else{if(1!==this.getPxBoundsMode)return null;o=this.getLabelInfo(t.geometry.getCentroid(),t.style),n=r.getLabelPxBoundsByLabel(e,o.w,o.h,t.style)}var i=[];return i=t.style.labelRotation%180==0?[{x:n.left,y:n.top},{x:n.right,y:n.top},{x:n.right,y:n.bottom},{x:n.left,y:n.bottom},{x:n.left,y:n.top}]:this.rotationBounds(n,e,t.style.labelRotation),r.bounds=new Gt(i[1].x,i[3].y,i[2].x,i[4].y),i}},{key:"calculateLabelBounds2",value:function(t,e){var r,n,o,i,a,s=t.geometry.bsInfo,u=t.style,l=W.cloneObject(e);if(u.labelAlign&&"cm"!==u.labelAlign)switch(u.labelAlign){case"lt":l.x+=s.w/2,l.y+=s.h/2;break;case"lm":l.x+=s.w/2;break;case"lb":l.x+=s.w/2,l.y-=s.h/2;break;case"ct":l.y+=s.h/2;break;case"cb":l.y-=s.h/2;break;case"rt":l.x-=s.w/2,l.y+=s.h/2;break;case"rm":l.x-=s.w/2;break;case"rb":l.x-=s.w/2,l.y-=s.h/2}n=l.x-s.w/2,o=l.y+s.h/2,a=u.fontStyle&&"italic"===u.fontStyle?l.x+s.w/2+parseInt(parseFloat(u.fontSize)/2):l.x+s.w/2,i=l.y-s.h/2,r=new Gt(n,o,a,i);var c=[];return c=u.labelRotation%180==0?[{x:r.left,y:r.top},{x:r.right,y:r.top},{x:r.right,y:r.bottom},{x:r.left,y:r.bottom},{x:r.left,y:r.top}]:this.rotationBounds(r,e,u.labelRotation),t.geometry.bounds=new Gt(c[1].x,c[3].y,c[2].x,c[4].y),c}},{key:"getLabelInfo",value:function(t,e){var r={l:"left",r:"right",t:"top",b:"bottom"},n={l:0,r:-1,t:0,b:-1};e=W.extend({fontColor:"#000000",labelAlign:"cm"},e);var o=this.getLocalXY(t),i=0;if(e.labelXOffset||e.labelYOffset){var a=isNaN(e.labelXOffset)?0:e.labelXOffset,s=isNaN(e.labelYOffset)?0:e.labelYOffset;o[0]+=a,o[1]-=s}var u=document.createElement("canvas");u.globalAlpha=0,u.lineWidth=1;var l=u.getContext("2d");l.fillStyle=e.fontColor,l.globalAlpha=e.fontOpacity||1;var c,f,h,p=[e.fontStyle?e.fontStyle:"normal","normal",e.fontWeight?e.fontWeight:"normal",e.fontSize?e.fontSize:"1em",e.fontFamily?e.fontFamily:"sans-serif"].join(" "),d=e.label.split("\n"),y=d.length;if(l.fillText){l.font=p,l.textAlign=r[e.labelAlign[0]]||"center",l.textBaseline=r[e.labelAlign[1]]||"middle",null==(c=n[e.labelAlign[1]])&&(c=-.5),f=l.measureText("Mg").height||l.measureText("xx").width,o[1]+=f*c*(y-1);for(var v=0;v<y;v++)i<(h=l.measureText(d[v]).width)&&(i=h)}else if(l.mozDrawText){l.mozTextStyle=p,null==(c=n[e.labelAlign[1]])&&(c=-.5),f=l.mozMeasureText("xx"),o[1]+=f*(1+c*y);for(var g=0;g<y;g++)i<(h=l.measureText(d[g]).width)&&(i=h)}var m={};return i?(m.w=i,m.h=e.fontSize,m.rows=d.length,m):null}},{key:"rotationBounds",value:function(t,e,r){var n=new(w().Point)(t.left,t.top),o=new(w().Point)(t.right,t.top),i=new(w().Point)(t.right,t.bottom),a=new(w().Point)(t.left,t.bottom),s=[];s.push(this.getRotatedLocation(n.x,n.y,e.x,e.y,r)),s.push(this.getRotatedLocation(o.x,o.y,e.x,e.y,r)),s.push(this.getRotatedLocation(i.x,i.y,e.x,e.y,r)),s.push(this.getRotatedLocation(a.x,a.y,e.x,e.y,r));for(var u=[],l=0;l<s.length;l++)u.push({x:s[l].x,y:s[l].y});return u.push({x:s[0].x,y:s[0].y}),u}},{key:"getRotatedLocation",value:function(t,e,r,n,o){var i,a,s={};return e=-e,n=-n,o=-o,i=(t-r)*Math.cos(o/180*Math.PI)-(e-n)*Math.sin(o/180*Math.PI)+r,a=(t-r)*Math.sin(o/180*Math.PI)+(e-n)*Math.cos(o/180*Math.PI)+n,s.x=i,s.y=-a,s}},{key:"getAvoidInfo",value:function(t,e){if(5!==e.length)return null;for(var r=[{x:t.left,y:t.top},{x:t.right,y:t.top},{x:t.right,y:t.bottom},{x:t.left,y:t.bottom},{x:t.left,y:t.top}],n=!1,o=r.length,i=e.length,a=0,s=0,u="",l="",c=0;c<o-1;c++)for(var f=0;f<i-1;f++){"SuperMap.Geometry.Point"===W.lineIntersection(r[c],r[c+1],e[f],e[f+1]).CLASS_NAME&&(h(e[f]),h(e[f+1]),n=!0)}return n?{aspectW:l,aspectH:u,offsetX:a,offsetY:s}:null;function h(e){if(!t.contains(e.x,e.y)){if(e.y<t.top){var r=Math.abs(t.top-e.y);r>s&&(s=r,u="top")}if(e.y>t.bottom){var n=Math.abs(e.y-t.bottom);n>s&&(s=n,u="bottom")}if(e.x<t.left){var o=Math.abs(t.left-e.x);o>a&&(a=o,l="left")}if(e.x>t.right){var i=Math.abs(e.x-t.right);i>a&&(a=i,l="right")}}}}},{key:"isQuadrilateralOverLap",value:function(t,e){var r=t.length,n=e.length;if(5!==r||5!==n)return null;for(var o=!1,i=0;i<r;i++)if(this.isPointInPoly(t[i],e)){o=!0;break}for(var a=0;a<n;a++)if(this.isPointInPoly(e[a],t)){o=!0;break}for(var s=0;s<r-1&&!o;s++)for(var u=0;u<n-1;u++){if("SuperMap.Geometry.Point"===W.lineIntersection(t[s],t[s+1],e[u],e[u+1]).CLASS_NAME){o=!0;break}}return o}},{key:"isPointInPoly",value:function(t,e){for(var r=!1,n=-1,o=e.length,i=o-1;++n<o;i=n)(e[n].y<=t.y&&t.y<e[i].y||e[i].y<=t.y&&t.y<e[n].y)&&t.x<(e[i].x-e[n].x)*(t.y-e[n].y)/(e[i].y-e[n].y)+e[n].x&&(r=!r);return r}}])&&pc(r.prototype,n),o&&pc(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}(),wc=function(){try{return mapv}catch(t){return{}}}();function Sc(t){"@babel/helpers - typeof";return(Sc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function xc(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,_c(n.key),n)}}function _c(t){var e=function(t,e){if("object"!=Sc(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Sc(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Sc(e)?e:e+""}function Ec(t,e,r){return e=kc(e),Oc(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],kc(t).constructor):e.apply(t,r))}function Oc(t,e){if(e&&("object"===Sc(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Pc(){return(Pc="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=kc(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function kc(t){return(kc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Cc(t,e){return(Cc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Tc=wc.baiduMapLayer?wc.baiduMapLayer.__proto__:Function,Ac=function(t){function e(t,r,n,o,i){var a;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),a=Ec(this,e,[t,r,n]),!Tc)return Oc(a);a.options=n||{},a.transferCoordinate=o.transferCoordinate,a.getCenterPixel=o.getCenterPixel,a.getResolution=o.getResolution,a.validZoom=o.validZoom;var s=i.mapElement,u=i.targetElement,l=i.id;return a.targetElement=u,a.canvas=a._createCanvas(l,s),a.canvasLayer={canvas:a.canvas,devicePixelRatio:a.devicePixelRatio},a.init(n),a.argCheck(n),a.stopAniamation=!1,a.animation=n.animation,a.clickEvent=a.clickEvent.bind(a),a.mousemoveEvent=a.mousemoveEvent.bind(a),a._canvasUpdate(),a.targetElement.appendChild(a.canvas),a._expectShow=!0,a.isShow=!0,a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Cc(t,e)}(e,Tc),r=e,(n=[{key:"clickEvent",value:function(t){var r=t.point;Pc(kc(e.prototype),"clickEvent",this).call(this,r,t)}},{key:"mousemoveEvent",value:function(t){var r=t.point;Pc(kc(e.prototype),"mousemoveEvent",this).call(this,r,t)}},{key:"getContext",value:function(){return this.canvas.getContext(this.context)}},{key:"addData",value:function(t,e){var r=t;t&&t.get&&(r=t.get()),this.dataSet.add(r),this.update({options:e})}},{key:"update",value:function(t){var r=t||{},n=r.data;n&&n.get&&(n=n.get()),void 0!=n&&this.dataSet.set(n),Pc(kc(e.prototype),"update",this).call(this,{options:r.options})}},{key:"getData",value:function(){return this.dataSet}},{key:"removeData",value:function(t){if(this.dataSet){var e=this.dataSet.get({filter:function(e){return null==t||"function"!=typeof t||!t(e)}});this.dataSet.set(e),this.update({options:null})}}},{key:"clearData",value:function(){this.dataSet&&this.dataSet.clear(),this.update({options:null})}},{key:"updateData",value:function(t,e){t&&t.get&&this.dataSet.set(t.get()),this.update({options:e})}},{key:"_createCanvas",value:function(t,e){var r=e.style,n=r.width,o=r.height,i=document.createElement("canvas");i.style.position="absolute",i.style.top="0px",i.style.left="0px",i.id=t;var a="undefined"==typeof window?{}:window,s=this.devicePixelRatio=a.devicePixelRatio||1;return i.width=parseInt(n)*s,i.height=parseInt(o)*s,this.options.context&&"2d"!=this.options.context||i.getContext("2d").scale(s,s),i.style.width=n,i.style.height=o,i}},{key:"_canvasUpdate",value:function(t){if(!this.stopAniamation){var e=this.options.animation,r=this.getContext();if(this.isEnabledTime()){if(void 0===t)return void this.clear(r);"2d"===this.context&&(r.save(),r.globalCompositeOperation="destination-out",r.fillStyle="rgba(0, 0, 0, .1)",r.fillRect(0,0,r.canvas.width,r.canvas.height),r.restore())}else this.clear(r);if("2d"===this.context)for(var n in this.options)r[n]=this.options[n];else r.clear(r.COLOR_BUFFER_BIT);if(this.validZoom()){var o={transferCoordinate:this.transferCoordinate()},i=this.getResolution();void 0!==t&&(o.filter=function(r){var n=e.trails||10;return t&&r.time>t-n&&r.time<t});var a=this.dataSet.get(o);this.processData(a),"m"===this.options.unit?(this.options.size&&(this.options._size=this.options.size/i),this.options.width&&(this.options._width=this.options.width/i),this.options.height&&(this.options._height=this.options.height/i)):(this.options._size=this.options.size,this.options._height=this.options.height,this.options._width=this.options.width);var s=this.getCenterPixel();this.drawContext(r,a,this.options,s),this.options.updateCallback&&this.options.updateCallback(t)}}}},{key:"init",value:function(t){this.options=t,this.initDataRange(t),this.context=this.options.context||"2d",this.options.zIndex&&this.setZIndex(this.options.zIndex),this.initAnimator()}},{key:"destroy",value:function(){this.targetElement.removeChild(this.canvas),this.clearData(),this.animator&&this.animator.stop(),this.animator=null}},{key:"addAnimatorEvent",value:function(){}},{key:"moveEndEvent",value:function(){this.stopAniamation=!1,this._canvasUpdate()}},{key:"draw",value:function(){this._canvasUpdate()}},{key:"visible",value:function(){return this.isShow}},{key:"hide",value:function(){this.isShow=!1,this.canvas.style.display="none"}},{key:"show",value:function(){this.isShow=!0,this.canvas.style.display="block"}},{key:"setZIndex",value:function(t){this.canvas.style.zIndex=t}},{key:"clear",value:function(t){t&&t.clearRect&&t.clearRect(0,0,parseInt(this.map.getCanvas().style.width),parseInt(this.map.getCanvas().style.height))}}])&&xc(r.prototype,n),o&&xc(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}(),Mc=function(t){var e;if(!t)return e;return["m","meter","meters"].indexOf(t.toLocaleLowerCase())>-1?e=1:["degrees","deg","degree","dd"].indexOf(t.toLocaleLowerCase())>-1?e=2*Math.PI*6378137/360:t===en.KILOMETER?e=.001:t===en.INCH?e=1/.025399999918:t===en.FOOT&&(e=.3048),e};function jc(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[-180,180],o=n[1],i=n[0],a=o-i;return t===o&&e?t:t===i&&r?t:0===((t-i)%a+a)%a&&e?o:((t-i)%a+a)%a+i}function Ic(t){var e=parseInt(t),r=parseInt(60*(t-e)),n=parseInt(60*(60*(t-e)-r));return r=0===parseInt(r/10)?"0".concat(r):r,n=0===parseInt(n/10)?"0".concat(n):n,"".concat(e,"Â°").concat(r,"'").concat(n)}function Nc(t,e,r){return 1/(t*e*(1/.0254)*Mc(r))}function Lc(t){"@babel/helpers - typeof";return(Lc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Rc(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Dc(n.key),n)}}function Dc(t){var e=function(t,e){if("object"!=Lc(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Lc(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Lc(e)?e:e+""}var Bc=function(){return t=function t(e,r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),3===arguments.length?(this.map=e,delete n.layerID,this.mapVOptions=n,this.dataSet=r):(this.dataSet=e,delete r.layerID,this.mapVOptions=r),this.id=this.mapVOptions.layerID?this.mapVOptions.layerID:W.createUniqueID("mapvLayer_"),this.type="custom",this.visibility=!0,this.renderingMode="3d",this.overlay=!0,this.context=this.mapVOptions.context||"2d",this.map&&this.map.addLayer(this)},(e=[{key:"onAdd",value:function(t){this.map=t,this.mapContainer=t.getCanvasContainer(),this.renderer=new Ac(t,this.dataSet,this.mapVOptions,{transferCoordinate:this._transferCoordinate,getCenterPixel:this._getCenterPixel,getResolution:this._getResolution,validZoom:this._validZoom.bind(this)},{mapElement:this.map.getCanvas(),targetElement:this.mapContainer,id:this.id}),this.mapContainer.style.perspective=this.map.transform.cameraToCenterDistance+"px",this.bindEvent()}},{key:"onRemove",value:function(){this.renderer.destroy(),this.unbindEvent()}},{key:"render",value:function(){this.renderer&&this.renderer.draw()}},{key:"_transferCoordinate",value:function(){var t=this.map,e=t.getBounds(),r=e.getEast()-e.getWest(),n=e.getNorth()-e.getSouth(),o=t.getCanvas().getBoundingClientRect(),i=r/o.width,a=n/o.height,s=t.getCenter(),u=t.project(s),l=this;return function(e){if(t.transform.rotationMatrix||"2d"===l.context){var r=t.project(new(w().LngLat)(e[0],e[1]));return[r.x,r.y]}var n=[(e[0]-s.lng)/i,(s.lat-e[1])/a];return[n[0]+u.x,n[1]+u.y]}}},{key:"_validZoom",value:function(){return!(this.mapVOptions.minZoom&&this.map.getZoom()<this.mapVOptions.minZoom||this.mapVOptions.maxZoom&&this.map.getZoom()>this.mapVOptions.maxZoom)}},{key:"_getResolution",value:function(){var t=this.map.getBounds(),e=(t.getEast()-t.getWest())/this.map.getCanvas().getBoundingClientRect().width;return Mc("DEGREE")*e}},{key:"_getCenterPixel",value:function(){return this.map.project(new(w().LngLat)(0,0))}},{key:"addData",value:function(t,e){this.renderer.addData(t,e)}},{key:"update",value:function(t){this.renderer.update(t)}},{key:"getData",value:function(){return this.renderer&&(this.dataSet=this.renderer.getData()),this.dataSet}},{key:"removeData",value:function(t){this.renderer&&this.renderer.removeData(t)}},{key:"clearData",value:function(){this.renderer.clearData()}},{key:"show",value:function(){return this.renderer&&this.renderer.show(),this}},{key:"hide",value:function(){return this.renderer&&this.renderer.hide(),this}},{key:"getTopLeft",value:function(){var t,e=this.map;e&&(t=e.getBounds().getNorthWest());return t}},{key:"bindEvent",value:function(){var t=this.map;this.mapVOptions.methods&&(this.mapVOptions.methods.click&&t.on("click",this.renderer.clickEvent),this.mapVOptions.methods.mousemove&&t.on("mousemove",this.renderer.mousemoveEvent))}},{key:"unbindEvent",value:function(){var t=this.map;this.mapvOptions.methods&&(this.mapvOptions.methods.click&&t.off("click",this.clickEvent),this.mapvOptions.methods.mousemove&&t.off("mousemove",this.mousemoveEvent))}},{key:"setVisibility",value:function(t){t!==this.visibility&&(this.visibility=t,t?this.show():this.hide())}},{key:"setZIndex",value:function(t){this.renderer.setZIndex(t)}}])&&Rc(t.prototype,e),r&&Rc(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function Fc(t){"@babel/helpers - typeof";return(Fc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Gc(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Uc(n.key),n)}}function Uc(t){var e=function(t,e){if("object"!=Fc(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Fc(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Fc(e)?e:e+""}var zc=function(){return t=function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=e,this.map=null,this.opacity=1,this.parseNumber=!1,this.enableHighlight=!1,this.highlight={color:"#ADA91E"},this.baseHeightField=null,this.height=null,this.heightField="height",this.themeField=this.heightField,this.showLegend=!0,this.legendTitle=null,this.legendTheme="light",this.legendOrientation="horizontal",this.legendPosition="bottom-right",this._highlightLayerId="".concat(this.id,"-highlightLayer"),this._extend(this,r)},(e=[{key:"setLayerOptions",value:function(t){return this._extend(this,t),this}},{key:"setHighlightStyleOptions",value:function(t){return this._extend(this.highlight,t),this}},{key:"setData",value:function(t,e){var r=this;return r.data=t,null!=e&&(r.parseNumber=e),r.parseNumber&&r.data&&r.data.features&&r.data.features.map(function(t){return r.baseHeightField&&t.properties[r.baseHeightField]&&(t.properties[r.baseHeightField]=parseFloat(t.properties[r.baseHeightField])),r.heightField&&t.properties[r.heightField]&&(t.properties[r.heightField]=parseFloat(t.properties[r.heightField])),t}),this}},{key:"getData",value:function(){return this.data}},{key:"addTo",value:function(t){return this.map=t,this.map?(this.show(),this):this}},{key:"show",value:function(t){return this._extend(this,t),this._addLayer(),this.enableHighlight&&this._addHighLightLayer(),this.showLegend&&(this.legend||(this.legend=this._createLegendControl()),this.map.addControl(this.legend,this.legendPosition)),this}},{key:"remove",value:function(){if(!this.map)return this;var t=this.id?this.id:"theme3DLayer";return this.map.getLayer(t)&&(this.map.off("mousemove",t,this._onMouseMove.bind(this)),this.map.on("mouseout",t,this._onMouseMove.bind(this)),this.map.removeLayer(t)),this.map.getLayer(this._highlightLayerId)&&(this._selectFeatureId=null,this.map.removeLayer(this._highlightLayerId)),this.legend&&this.map.removeControl(this.legend),this}},{key:"getLayerStyleOptions",value:function(){}},{key:"getHighlightStyleOptions",value:function(){}},{key:"_createLegendControl",value:function(t){var e=this;function r(){}return r.prototype.onAdd=function(r){this._map=r,this._container=document.createElement("div");var n="legend-light";"dark"===e.legendTheme&&(n="legend-dark");var o=" legend-horizontal";if("vertical"===e.legendOrientation&&(o=" legend-vertical"),this._container.className="mapboxgl-ctrl legend "+n+o,t)this._container.innerHTML=t;else{var i=" <div class='legend-title'>"+(e.legendTitle||"")+"</div>",a="<div class='legend-content'>"+(e._createLegendElement.call(e)||"")+"</div>";this._container.innerHTML=i+a}return e._appendLegendCSSStyle(),this._container},r.prototype.onRemove=function(){this._container.parentNode.removeChild(this._container),this._map=void 0},new r}},{key:"_createLegendElement",value:function(){}},{key:"_addLayer",value:function(){var t=this.getLayerStyleOptions(),e=this.id?this.id:"theme3DLayer",r=this.sourceId=e+"Source";this.map.getSource(r)?(this.map.removeSource(r),this.map.addSource(r,{type:"geojson",data:this.data})):this.map.addSource(r,{type:"geojson",data:this.data}),this.map.addLayer({id:e,type:"fill-extrusion",source:r,paint:t}),this.map.moveLayer(e)}},{key:"_addHighLightLayer",value:function(){if(this.map){var t=this.map;t.addLayer({id:this._highlightLayerId,type:"fill-extrusion",source:this.sourceId,paint:this.getHighlightStyleOptions(),filter:["in","$id",""]}),this._selectFeatureId=null,t.on("mousemove",this.id,this._onMouseMove.bind(this)),t.on("mouseout",this.id,this._onMouseMove.bind(this))}}},{key:"_onMouseMove",value:function(t){var e=this,r=this.map,n=r.queryRenderedFeatures(t.point,{layers:[e.id]});if(e.highlight&&e.highlight.callback&&e.highlight.callback(n,t),!n||n.length<1)return e._clearHighlight.call(e),void(e._selectFeatureId=null);var o=n[0].id;e._selectFeatureId!==o&&(e._selectFeatureId=o,r.setFilter(e._highlightLayerId,["==","$id",e._selectFeatureId]))}},{key:"_clearHighlight",value:function(){this.map&&this.map.setFilter(this._highlightLayerId,["in","$id",""])}},{key:"_appendLegendCSSStyle",value:function(){var t=document.createElement("style");t.type="text/css";t.innerHTML="\n        .legend {\n            display: inline-block;\n            border-radius: 2px;\n            -moz-border-radius: 2px;\n            -webkit-border-radius: 2px;\n            font-size: 12px;\n            color: rgba(0, 0, 0, 0.8);\n            background-color: rgb(255, 255, 255);\n        }\n        .legend-light {\n            color: rgba(0, 0, 0, 0.8);\n            background-color: rgb(255, 255, 255);\n            box-shadow: 0px 0px 6px #bbbbbb;\n            -moz-box-shadow: 0px 6px 10px #bbbbbb;\n            -webkit-box-shadow: 0px 0px 6px #bbbbbb;\n        }\n        .legend-dark {\n            color: rgba(255, 255, 255, 0.8);\n            background-color: rgb(64, 64, 64);\n        }\n        .legend .legend-title {\n            min-height: 14px;\n            max-width: 500px;\n            padding:6px 10px;\n        }\n        .legend-light .legend-title {\n            color: rgba(0, 0, 0, 0.8);\n        }\n        .legend-dark .legend-title {\n            color: rgba(255, 255, 255, 0.8);\n        }\n        .legend-content{\n            padding:6px 10px;\n        }\n        "+this._legendCSSStyle(),document.getElementsByTagName("head")[0].appendChild(t)}},{key:"_legendCSSStyle",value:function(){return"\n        .legend ul {\n            padding: 0;\n            margin: 0 16px;\n            height: 100%;\n            display: block;\n            list-style: none;\n        }\n\n        .legend li {\n            vertical-align: middle;\n        }\n\n        .legend li span:first-child {\n            vertical-align: middle;\n        }\n\n        .legend li span:last-child {\n            line-height: 28px;\n            max-width: 200px;\n            vertical-align: middle;\n            white-space: nowrap;\n            overflow: hidden;\n            text-overflow: ellipsis;\n            -ms-text-overflow: ellipsis;\n        }\n\n        .legend-vertical li {\n            height: 28px;\n        }\n\n        .legend-vertical li span:first-child {\n            display: inline-block;\n            width: 60px;\n            height: 100%;\n        }\n\n        .legend-vertical li span:last-child {\n            display: inline-block;\n            margin-left: 16px;\n            height: 100%;\n        }\n\n        .legend-horizontal li {\n            height: 56px;\n            float: left;\n        }\n\n        .legend-horizontal li span:first-child {\n            display: block;\n            width: 100%;\n            height: 50%;\n        }\n\n        .legend-horizontal li span:last-child {\n            display: block;\n            vertical-align: middle;\n            width: 60px;\n            height: 50%;\n            text-align: center;\n        }\n        "}},{key:"_extend",value:function(t){for(var e=0;e<Object.getOwnPropertyNames(arguments).length;e++){var r=Object.getOwnPropertyNames(arguments)[e];if("caller"!=r&&"callee"!=r&&"length"!=r&&"arguments"!=r){var n=arguments[r];if(n)for(var o=0;o<Object.getOwnPropertyNames(n).length;o++){var i=Object.getOwnPropertyNames(n)[o];"caller"!=r&&"callee"!=r&&"length"!=r&&"arguments"!=r&&(t[i]=n[i])}}}return t}}])&&Gc(t.prototype,e),r&&Gc(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function Vc(t){"@babel/helpers - typeof";return(Vc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Hc(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Wc(n.key),n)}}function Wc(t){var e=function(t,e){if("object"!=Vc(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Vc(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Vc(e)?e:e+""}function qc(t,e,r){return e=Yc(e),function(t,e){if(e&&("object"===Vc(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Yc(t).constructor):e.apply(t,r))}function Yc(t){return(Yc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Xc(t,e){return(Xc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Jc=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=qc(this,e,[t,r])).heightStops=null,n.colorStops=null,n.base=null,n.legendRatio=1,n._extend(n,r),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Xc(t,e)}(e,zc),r=e,(n=[{key:"getLayerStyleOptions",value:function(){var t=null==this.opacity?1:this.opacity;t=isNaN(parseFloat(t))?1:parseFloat(t);var e=/^[0-9]+.?[0-9]*$/,r={"fill-extrusion-color":{stops:this.colorStops,property:this.themeField||this.heightField,type:"interval",base:e.test(this.base)?this.base:1},"fill-extrusion-opacity":t};return this.heightStops?r["fill-extrusion-height"]={stops:this.heightStops,property:this.heightField||"height",base:e.test(this.base)?this.base:1}:this.height?r["fill-extrusion-height"]=this.height:r["fill-extrusion-height"]={property:this.heightField||"height",type:"identity"},this.baseHeightField&&(r["fill-extrusion-base"]={property:this.baseHeightField,type:"identity"}),r}},{key:"getHighlightStyleOptions",value:function(){return{"fill-extrusion-color":this.highlight&&null!=this.highlight.color?this.highlight.color:"#ADA91E","fill-extrusion-height":{stops:this.heightStops,property:this.heightField},"fill-extrusion-opacity":this.highlight&&this.highlight.opacity||.6}}},{key:"_createLegendElement",value:function(){var t,e=this.colorStops&&this.colorStops.length||0,r="<ul>";for(t=0;t<e;t++){var n=this.colorStops[t][0],o=this._getWrapperText(n);if(t===e-1)o="> "+o;else o=o+"-"+this._getWrapperText(this.colorStops[t+1][0]);r+="<li><span style='background-color:"+this.colorStops[t][1]+";'></span><span>"+o+"</span></li>"}return r+="</ul>"}},{key:"_getWrapperText",value:function(t){var e=t*(null==this.legendRatio?1:parseFloat(this.legendRatio)),r=parseFloat(e);return r%1e6<=1e6?r.toString():parseInt(r/1e3)+"k"}}])&&Hc(r.prototype,n),o&&Hc(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function Kc(t){"@babel/helpers - typeof";return(Kc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Qc(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Zc(n.key),n)}}function Zc(t){var e=function(t,e){if("object"!=Kc(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Kc(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Kc(e)?e:e+""}function $c(t,e,r){return e=tf(e),function(t,e){if(e&&("object"===Kc(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],tf(t).constructor):e.apply(t,r))}function tf(t){return(tf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ef(t,e){return(ef=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var rf=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=$c(this,e,[t,r])).style=r.style,n.isHoverAble=r.isHoverAble,n.highlightStyle=r.highlightStyle,n.themeField=r.themeField,n.styleGroups=r.styleGroups,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ef(t,e)}(e,fc),r=e,(n=[{key:"createThematicFeature",value:function(t){var e=this.getStyleByData(t),r={};r.nodesClipPixel=this.nodesClipPixel,r.isHoverAble=this.isHoverAble,r.isMultiHover=this.isMultiHover,r.isClickAble=this.isClickAble,r.highlightStyle=Jl.transformStyle(this.highlightStyle);for(var n=new oc(t,this,Jl.transformStyle(e),r),o=0;o<n.shapes.length;o++)this.renderer.addShape(n.shapes[o]);return n}},{key:"getStyleByData",value:function(t){var e={},r=t;if(e=W.copyAttributesWithClip(e,this.style),this.themeField&&this.styleGroups&&this.styleGroups.length>0&&r.attributes){var n=this.themeField,o=r.attributes,i=this.styleGroups,a=!1,s=null;for(var u in o)if(n===u){a=!0,s=o[u];break}if(a)for(var l=0,c=i.length;l<c;l++)if(s>=i[l].start&&s<i[l].end){var f=i[l].style;e=W.copyAttributesWithClip(e,f)}}return r.style&&!0===this.isAllowFeatureStyle&&(e=W.copyAttributesWithClip(r.style)),e}}])&&Qc(r.prototype,n),o&&Qc(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function nf(t){"@babel/helpers - typeof";return(nf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function of(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,af(n.key),n)}}function af(t){var e=function(t,e){if("object"!=nf(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=nf(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==nf(e)?e:e+""}function sf(t,e,r){return e=uf(e),function(t,e){if(e&&("object"===nf(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],uf(t).constructor):e.apply(t,r))}function uf(t){return(uf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function lf(t,e){return(lf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var cf=function(t){function e(t,r,n){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(o=sf(this,e,[t,r,n])).symbolType=r,o.symbolSetting=n.symbolSetting,o.themeField=n.themeField,o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&lf(t,e)}(e,Ts),r=e,(n=[{key:"setSymbolType",value:function(t){this.symbolType=t,this.redraw()}},{key:"createThematicFeature",value:function(t){var e;return fo[this.symbolType]&&this.themeField&&this.symbolSetting&&(e=new fo[this.symbolType](t,this,[this.themeField],this.symbolSetting)),!!e&&(e.assembleShapes(),e)}}])&&of(r.prototype,n),o&&of(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function ff(t){"@babel/helpers - typeof";return(ff="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function hf(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,pf(n.key),n)}}function pf(t){var e=function(t,e){if("object"!=ff(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=ff(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ff(e)?e:e+""}function df(t,e,r){return e=yf(e),function(t,e){if(e&&("object"===ff(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],yf(t).constructor):e.apply(t,r))}function yf(t){return(yf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function vf(t,e){return(vf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var gf=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=df(this,e,[t,r])).colorStops=null,n._extend(n,r),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&vf(t,e)}(e,zc),r=e,(n=[{key:"getLayerStyleOptions",value:function(){var t=null==this.opacity?1:this.opacity;t=isNaN(parseFloat(t))?1:parseFloat(t);var e={"fill-extrusion-color":{stops:this.colorStops,property:this.themeField,type:"categorical"},"fill-extrusion-opacity":t};return null!=this.height?e["fill-extrusion-height"]=this.height:e["fill-extrusion-height"]={property:this.heightField||"height",type:"categorical"},this.baseHeightField&&(e["fill-extrusion-base"]={property:this.baseHeightField,type:"identity"}),e}},{key:"getHighlightStyleOptions",value:function(){var t={"fill-extrusion-color":this.highlight&&null!=this.highlight.color?this.highlight.color:"#ADA91E","fill-extrusion-height":{stops:this.heightStops,property:this.heightField,type:"categorical"},"fill-extrusion-opacity":this.highlight&&this.highlight.opacity||.6};return null!=this.height&&(t["fill-extrusion-height"]=this.height||0),t}},{key:"_createLegendElement",value:function(){for(var t="<ul>",e=this.colorStops&&this.colorStops.length||0,r=0;r<e;r++){var n=this.colorStops[r][0];t+="<li><span style='background-color:"+this.colorStops[r][1]+";'></span><span>"+n+"</span></li>"}return t+="</ul>"}}])&&hf(r.prototype,n),o&&hf(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function mf(t){"@babel/helpers - typeof";return(mf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function bf(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,wf(n.key),n)}}function wf(t){var e=function(t,e){if("object"!=mf(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=mf(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==mf(e)?e:e+""}function Sf(t,e,r){return e=xf(e),function(t,e){if(e&&("object"===mf(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],xf(t).constructor):e.apply(t,r))}function xf(t){return(xf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _f(t,e){return(_f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Ef=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Sf(this,e,[t,r])).themeField=r.themeField,n.style=r.style,n.styleGroups=r.styleGroups,n.isHoverAble=r.isHoverAble,n.highlightStyle=r.highlightStyle,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_f(t,e)}(e,fc),r=e,(n=[{key:"createThematicFeature",value:function(t){var e=this.getStyleByData(t),r={};r.nodesClipPixel=this.nodesClipPixel,r.isHoverAble=this.isHoverAble,r.isMultiHover=this.isMultiHover,r.isClickAble=this.isClickAble,r.highlightStyle=Jl.transformStyle(this.highlightStyle);for(var n=new oc(t,this,Jl.transformStyle(e),r),o=0;o<n.shapes.length;o++)this.renderer.addShape(n.shapes[o]);return n}},{key:"getStyleByData",value:function(t){var e={},r=t;if(e=W.copyAttributesWithClip(e,this.style),this.themeField&&this.styleGroups&&this.styleGroups.length>0&&r.attributes){var n=this.themeField,o=r.attributes,i=this.styleGroups,a=!1,s=null;for(var u in o)if(n===u){a=!0,s=o[u];break}if(a)for(var l=0,c=i.length;l<c;l++)if(s.toString()===i[l].value.toString()){var f=i[l].style;e=W.copyAttributesWithClip(e,f)}}return r.style&&!0===this.isAllowFeatureStyle&&(e=W.copyAttributesWithClip(r.style)),e}}])&&bf(r.prototype,n),o&&bf(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function Of(t){"@babel/helpers - typeof";return(Of="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Pf(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function kf(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Cf(n.key),n)}}function Cf(t){var e=function(t,e){if("object"!=Of(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Of(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Of(e)?e:e+""}var Tf={color:[0,0,0,255],opacity:.8,radius:10,radiusScale:1,radiusMinPixels:0,radiusMaxPixels:Number.MAX_SAFE_INTEGER,strokeWidth:1,outline:!1},Af=function(){return t=function t(e,r,n,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var i=W.assign(this,Tf,r);this.id=e,this.graphics=[].concat(i.graphics),this.mapOptions=o,this.functions=n,this.visibility=!0,this.init()},(e=[{key:"init",value:function(){this.canvas&&this.mapOptions.targetElement.appendChild(this.canvas),this._initContainer();var t=this.getState(),e=t.data,r=t.color,n=t.radius,o=t.opacity,i=t.highlightColor,a=t.radiusScale,s=t.radiusMinPixels,u=t.radiusMaxPixels,l=t.strokeWidth,c=t.outline,f=this,h={id:"scatter-plot",data:e,pickable:Boolean(this.onClick)||Boolean(this.onHover),autoHighlight:!0,color:r,opacity:o,radius:n,radiusScale:a,highlightColor:i,radiusMinPixels:s,radiusMaxPixels:u,strokeWidth:l,outline:c,isGeographicCoordinateSystem:this.isGeographicCoordinateSystem,coordinateSystem:this.coordinateSystem,getPosition:function(t){if(!t)return[0,0,0];var e=t.getLngLat();return e&&[e.lng,e.lat,0]},getColor:function(t){var e=t&&t.getStyle();return e&&e.color||f.color},getRadius:function(t){var e=t&&t.getStyle();return e&&e.radius||f.radius},updateTriggers:{getColor:[r],getRadius:[n]}};this.onClick&&(h.onClick=this.onClick),this.onHover&&(h.onHover=this.onHover),this.layer=new window.DeckGL.ScatterplotLayer(h);var p={};for(var d in t)p[d]=t[d];var y=parseInt(this.canvas.style.width),v=parseInt(this.canvas.style.height);p.width=y,p.height=v,p.layers=[this.layer],p.canvas=this.canvas,this.deckGL=new window.DeckGL.experimental.DeckGLJS(p),this.draw()}},{key:"setStyle",value:function(t){var e={color:this.color,radius:this.radius,opacity:this.opacity,highlightColor:this.highlightColor,radiusScale:this.radiusScale,radiusMinPixels:this.radiusMinPixels,radiusMaxPixels:this.radiusMaxPixels,strokeWidth:this.strokeWidth,outline:this.outline};W.assign(this,e,t),this.update()}},{key:"setGraphics",value:function(t){this.graphics=this.graphics||[],this.graphics.length=0;var e=W.isArray(t)?[].concat(t):[t];this.layer.props.data||(this.layer.props.data=[]),this.layer.props.data.length=0;for(var r=0;r<e.length;r++)this.layer.props.data.push(e[r]);this.update()}},{key:"addGraphics",value:function(t){this.graphics=this.graphics||[];var e=W.isArray(t)?[].concat(t):[t];this.layer.props.data||(this.layer.props.data=[]);for(var r=0;r<e.length;r++)this.layer.props.data.push(e[r]);this.update()}},{key:"getGraphicBy",value:function(t,e){var r=null;for(var n in this.graphics)if(this.graphics[n][t]===e){r=this.graphics[n];break}return r}},{key:"getGraphicById",value:function(t){return this.getGraphicBy("id",t)}},{key:"getGraphicsByAttribute",value:function(t,e){var r,n=[];for(var o in this.graphics)(r=this.graphics[o])&&r.attributes&&r.attributes[t]===e&&n.push(r);return n}},{key:"removeGraphics",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(!t||0===t.length||t===this.graphics)return this.graphics.length=0,this.layer.props.data&&(this.layer.props.data.length=0),void this.update();W.isArray(t)||(t=[t]);for(var e=t.length-1;e>=0;e--){var r=t[e],n=W.indexOf(this.graphics,r);-1!==n&&this.graphics.splice(n,1)}this.update()}},{key:"update",value:function(){if("Awaiting state"!==this.layer.lifecycle){this.layer.setChangeFlags({dataChanged:!0,propsChanged:!0,viewportChanged:!0,updateTriggersChanged:!0});var t=this.getState(),e=parseInt(this.canvas.style.width),r=parseInt(this.canvas.style.height);t.width=e,t.height=r,this.layer.setState(t)}}},{key:"clear",value:function(){this.removeGraphics(),this.deckGL.finalize()}},{key:"remove",value:function(){this.mapOptions.targetElement.removeChild(this.canvas)}},{key:"destroy",value:function(){this.remove(),this.clear()}},{key:"moveTo",value:function(t,e){var r=document.getElementById(this.id);if(e=void 0===e||e){var n=document.getElementById(t);r&&n&&n.parentNode.insertBefore(r,n)}else{var o=document.getElementById(t);if(r){if(o.nextSibling)return void o.parentNode.insertBefore(r,o.nextSibling);o.parentNode.appendChild(r)}}}},{key:"setVisibility",value:function(t){this.canvas&&t!==this.visibility&&(this.visibility=t,this.canvas.style.display=t?"block":"none")}},{key:"draw",value:function(){var t=this.getState(),e={};for(var r in t)e[r]=t[r];var n=parseInt(this.canvas.style.width),o=parseInt(this.canvas.style.height);e.width=n,e.height=o,e.layers=[this.layer],e.canvas=this.canvas,this.deckGL.setProps(e)}},{key:"_initContainer",value:function(){this.canvas=this._createCanvas(this.mapOptions.mapElement),this.mapOptions.targetElement.appendChild(this.canvas)}},{key:"_createCanvas",value:function(t){var e=document.createElement("canvas");return this.id&&(e.id=this.id),e.style.position="absolute",e.style.top="0px",e.style.left="0px",e.style.cursor="",e.width=parseInt(t.style.width),e.height=parseInt(t.style.height),e.style.width=t.style.width,e.style.height=t.style.height,e}},{key:"getState",value:function(){var t=this.functions.getMapState();return function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Pf(Object(r),!0).forEach(function(e){var n,o,i;n=t,o=e,i=r[e],(o=Cf(o))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Pf(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}({data:this.graphics,color:this.color,radius:this.radius,opacity:this.opacity,highlightColor:this.highlightColor,radiusScale:this.radiusScale,radiusMinPixels:this.radiusMinPixels,radiusMaxPixels:this.radiusMaxPixels,strokeWidth:this.strokeWidth,outline:this.outline},t)}}])&&kf(t.prototype,e),r&&kf(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function Mf(t){"@babel/helpers - typeof";return(Mf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function jf(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,If(n.key),n)}}function If(t){var e=function(t,e){if("object"!=Mf(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Mf(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Mf(e)?e:e+""}var Nf=function(){return t=function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.options=r,this.id=e||W.createUniqueID("graphicLayer_"),this.type="custom",this.renderingMode="3d",this.overlay=!0},(e=[{key:"addTo",value:function(t){return this.onAdd(t),this}},{key:"onAdd",value:function(t){this.map=t,this.renderer=new Af(this.id,this.options,{getMapState:this.getMapState.bind(this)},{targetElement:this.map.getCanvasContainer(),mapElement:this.map.getCanvas()})}},{key:"onRemove",value:function(){this.remove(),this.clear()}},{key:"render",value:function(){this.renderer.draw()}},{key:"setStyle",value:function(t){this.renderer&&this.renderer.setStyle(t)}},{key:"setGraphics",value:function(t){this.renderer&&this.renderer.setGraphics(t)}},{key:"addGraphics",value:function(t){this.renderer&&this.renderer.addGraphics(t)}},{key:"getGraphicBy",value:function(t,e){return this.renderer&&this.renderer.getGraphicBy(t,e)}},{key:"getGraphicById",value:function(t){return this.getGraphicBy("id",t)}},{key:"getGraphicsByAttribute",value:function(t,e){return this.renderer&&this.renderer.getGraphicsByAttribute(t,e)}},{key:"removeGraphics",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.renderer&&this.renderer.removeGraphics(t)}},{key:"clear",value:function(){this.renderer&&this.renderer.clear()}},{key:"remove",value:function(){this.renderer&&this.renderer.remove()}},{key:"moveTo",value:function(t,e){this.renderer.moveTo(t,e)}},{key:"setVisibility",value:function(t){this.renderer.setVisibility(t)}},{key:"getState",value:function(){return this.renderer.getState()}},{key:"getMapState",value:function(){var t={},e=this.map.getCenter(),r={longitude:e.lng,latitude:e.lat,zoom:this.map.getZoom(),maxZoom:this.map.getMaxZoom(),pitch:this.map.getPitch(),bearing:this.map.getBearing()};for(var n in r)t[n]=r[n];return this.map.getCRS&&this.map.getCRS()!==w().CRS.EPSG3857&&(t.coordinateSystem=this.coordinateSystem,t.isGeographicCoordinateSystem=this.isGeographicCoordinateSystem),t}}])&&jf(t.prototype,e),r&&jf(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}(),Lf=function(){try{return THREE}catch(t){return{}}}();function Rf(t,e,r){if(t===r||t===e)return t;var n=r-e;return((t-e)%n+n)%n+e}function Df(t){return t*Math.PI/180}var Bf={matrix:[1,-1,0,0],projection:{R:6378137,minZoom:0,maxZoom:22,nativeMaxZoom:19,RAD:Math.PI/180,METERS_PER_DEGREE:6378137*Math.PI/180,MAX_LATITUDE:85.0511287798,project:function(t){var e=this.RAD,r=this.METERS_PER_DEGREE,n=this.MAX_LATITUDE,o=t instanceof Array?{lng:t[0],lat:t[1]}:{lng:t.lng,lat:t.lat},i=o.lng,a=Math.max(Math.min(n,o.lat),-n);return{x:i*r,y:(0===a?0:Math.log(Math.tan((90+a)*e/2))/e)*r}},unproject:function(t){var e,r=t.x,n=t.y,o=this.RAD,i=this.METERS_PER_DEGREE;return 0===n?e=0:(e=n/i,e=(2*Math.atan(Math.exp(e*o))-Math.PI/2)/o),{lng:Rf(r/i,-180,180),lat:Rf(e,-this.MAX_LATITUDE,this.MAX_LATITUDE)}},locate:function(t,e,r){if(!t)return null;if(e=e||0,r=r||0,!e&&!r)return t;var n=t.lng;if(0!==e){var o=Math.abs(e),i=Df(t.lng);n=Rf(180*(i+=2*Math.sqrt(Math.pow(Math.sin(o/(2*this.R)),2)/Math.pow(Math.cos(i),2))*(o>0?1:-1))/Math.PI,-180,180)}var a=t.lat;if(0!==r){var s=Math.abs(r),u=Df(t.lat);a=Rf(180*(u+=2*Math.sin(s/(2*this.R))*(s>0?1:-1))/Math.PI,-90,90)}return{lng:n,lat:a}},getResolution:function(t){if(!this.resolutions){for(var e=[],r=12756274*Math.PI,n=0;n<=this.maxZoom;n++)e[n]=r/(256*Math.pow(2,n));this.resolutions=e}var o=0|t,i=this.resolutions.length;o=o<0?0:o>i-1?i-1:o;var a=this.resolutions[o];return(0|t)!==t&&o!==i-1?a+(this.resolutions[o+1]-a)*(t-o):a}},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},lngLatToPoint:function(t,e){var r=this.project(t);return this.transform(r,this.projection.getResolution(e))},locate:function(t,e,r){return this.projection.locate(t,e,r)},transform:function(t,e){return{x:this.matrix[0]*(t.x-this.matrix[2])/e,y:this.matrix[1]*(t.y-this.matrix[3])/e}}};function Ff(t){"@babel/helpers - typeof";return(Ff="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Gf(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Uf(n.key),n)}}function Uf(t){var e=function(t,e){if("object"!=Ff(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Ff(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Ff(e)?e:e+""}var zf=Bf.projection,Vf=Lf.Color,Hf=Lf.Scene,Wf=Lf.WebGLRenderer,qf=Lf.PerspectiveCamera,Yf=Lf.Vector3,Xf=Lf.Shape,Jf=Lf.Mesh,Kf=Lf.ExtrudeGeometry,Qf=Math.PI/180,Zf=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame,$f=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame,th=function(){return t=function t(e,r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._layer=e,this.renderer=r||"gl",this.options=n},(e=[{key:"setMap",value:function(t){this.map=t}},{key:"render",value:function(){this._layer&&(this.prepare(),this._layer.fire("initialized"),this._layer&&this._layer.draw(this.context,this.scene,this.camera),this._layer.fire("draw"),this.renderScene())}},{key:"update",value:function(){this.remove(),this.render()}},{key:"renderScene",value:function(){this.locationCamera(),this.animationFrame=this.renderFrame(function(){this.animationFrame=null,this.context&&this.context.render(this.scene,this.camera)}.bind(this))}},{key:"renderFrame",value:function(t){return Zf(function(){t&&"function"==typeof t&&t()})}},{key:"resize",value:function(){this._resetElementSize(this.container),this._resetElementSize(this.canvas);var t=this.canvas.width,e=this.canvas.height,r=this.getMapSize();this.camera.aspect=t/e,this.camera.updateProjectionMatrix(),this.context.setSize(r.width,r.height),this.renderScene()}},{key:"prepare",value:function(){if(!this.map)return new Error("map object is necessary");this.canvas?this.clear(this.context):(this._initContainer(),this._initThreeRenderer(),this._layer.fire("rendererinitialized"))}},{key:"getMapSize",value:function(){var t=this.map.getContainer();return{width:t.clientWidth,height:t.clientHeight}}},{key:"cancelFrame",value:function(){null!=this.animationFrame&&$f(this.animationFrame)}},{key:"remove",value:function(){null!=this.animationFrame&&$f(this.animationFrame),this.container.removeChild(this.canvas),this.container.parentNode.removeChild(this.container),this.context=null,this.canvas=null,this.container=null}},{key:"clear",value:function(t){t&&t.clear&&t.clear(),t&&t.clearRect&&t.clearRect(0,0,t.canvas.width,t.canvas.height)}},{key:"getScale",value:function(t){var e=this.map,r=null==t?e.getZoom():t,n=zf.getResolution(zf.nativeMaxZoom);return zf.getResolution(r)/n}},{key:"getCanvasContainer",value:function(){return this.container}},{key:"getCanvas",value:function(){return this.canvas}},{key:"locationCamera",value:function(){var t=this.map,e=this.getMapSize(),r=t.transform.zoomScale(zf.nativeMaxZoom-t.getZoom()-1),n=Math.tan(t.transform.fov/2*Qf),o=this.camera,i=t.getPitch()*Qf,a=-r*e.height/2/n;o.position.z=a*Math.cos(i);var s=Bf.lngLatToPoint(t.getCenter(),zf.nativeMaxZoom),u=Math.sin(i)*a,l=t.getBearing()*Qf;o.position.x=s.x+u*Math.sin(l),o.position.y=s.y-u*Math.cos(l),o.up.set(Math.sin(l),-Math.cos(l),0),o.lookAt(new Lf.Vector3(s.x,s.y,0)),o.updateProjectionMatrix()}},{key:"toThreeShape",value:function(t){var e=this;if(!t)return null;var r=this.getCoordinatesCenter(t),n=this.lngLatToPosition(r),o=t.map(function(t){return e.lngLatToPosition({lng:t[0],lat:t[1]}).sub(n)});return new Xf(o)}},{key:"toThreeMesh",value:function(t,e,r,n){if(!t)return null;var o=t;n&&(o=this.removeDuplicatedCoordinates(t));var i=this.distanceToThreeVector3(e,e).x,a=this.toThreeShape(o),s=new Kf(a,{amount:i,bevelEnabled:!0}),u=new Jf(s,r),l=this.lngLatToPosition(this.getCoordinatesCenter(o));return u.position.set(l.x,l.y,-i),u}},{key:"addObject",value:function(t,e){e&&t&&this.setPosition(t,e),this.scene.add(t)}},{key:"clearMesh",value:function(){var t=this.scene;if(!t)return this;for(var e=t.children.length-1;e>=0;e--)t.children[e]instanceof Lf.Mesh&&t.remove(t.children[e]);return this}},{key:"clearAll",value:function(t){var e=this.scene;if(!e)return this;for(var r=e.children.length-1;r>=0;r--)!t&&e.children[r]instanceof Lf.Camera||e.remove(e.children[r]);return this}},{key:"setPosition",value:function(t,e){if(!t||!e)return this;var r=this.lngLatToPosition(e);return t.position.set(r.x,r.y,r.z),this}},{key:"lngLatToPosition",value:function(t){var e=Bf.projection.nativeMaxZoom,r=Bf.lngLatToPoint(t,e);return new Yf(r.x,r.y,-0)}},{key:"distanceToThreeVector3",value:function(t,e,r){var n=this.map,o=r||n.getCenter(),i=Bf.projection.nativeMaxZoom,a=Bf.locate(o,t,e),s=Bf.lngLatToPoint(o,i),u=Bf.lngLatToPoint(a,i),l=Math.abs(u.x-s.x)*Math.sign(t),c=Math.abs(u.y-s.y)*Math.sign(e);return new Yf(l,c,0)}},{key:"removeDuplicatedCoordinates",value:function(t){function e(t,e){return t[0]===e[0]&&t[1]===e[1]}for(var r=[].concat(t),n=r.length-1;n>=1;n--)e(r[n],r[n-1])&&r.splice(n,1);return e(r[0],r[r.length-1])&&r.splice(r.length-1,1),r}},{key:"getCoordinatesCenter",value:function(t){for(var e=0,r=0,n=0,o=0,i=t.length;o<i;o++)t[o]&&(e+=t[o][0],r+=t[o][1],n++);return{lng:e/n,lat:r/n}}},{key:"_initContainer",value:function(){var t=this._createCanvas(),e=this.container=document.createElement("div");e.id=this._layer.id,e.className="threejs-wrapper",e.style.position="absolute",e.style.left="0px",e.style.top="0px",e.style.overflow="hidden",this._resetElementSize(e),e.appendChild(t),this.map.getCanvasContainer().appendChild(e)}},{key:"_createCanvas",value:function(){if(!this.canvas){var t=this.canvas=document.createElement("canvas");return t.className="threejs-overlay",t.style.outline="none",this._resetElementSize(t),t}}},{key:"_resetElementSize",value:function(t){if(t){var e=this.getMapSize(),r=window.devicePixelRatio?window.devicePixelRatio:1,n=r*e.width,o=r*e.height;t.width=n,t.height=o,t.style.width=e.width+"px",t.style.height=e.height+"px"}}},{key:"_initThreeRenderer",value:function(){var t,e=this.map,r=this.getMapSize();"gl"===(this.renderer||"gl")&&((t=new Wf({canvas:this.canvas,alpha:!0,antialias:!0,preserveDrawingBuffer:!0},this.options)).autoClear=!0,t.clear()),t.setClearColor(new Vf(1,1,1),0),t.canvas=this.canvas,this.context=t;var n=e.transform.fov,o=Math.tan(n/2*Qf),i=this.getScale(zf.minZoom)/this.getScale(zf.nativeMaxZoom)*r.height/2/o;this.camera=new qf(n,r.width/r.height,1,i),this.scene=new Hf,this.scene.add(this.camera)}}])&&Gf(t.prototype,e),r&&Gf(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function eh(t){"@babel/helpers - typeof";return(eh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function rh(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,nh(n.key),n)}}function nh(t){var e=function(t,e){if("object"!=eh(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=eh(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==eh(e)?e:e+""}function oh(t,e,r){return e=ih(e),function(t,e){if(e&&("object"===eh(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],ih(t).constructor):e.apply(t,r))}function ih(t){return(ih=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ah(t,e){return(ah=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var sh=function(t){function e(t,r,n){var o;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(o=oh(this,e)).id=t,o.type="custom",o.renderingMode="3d",o.overlay=!0,o.options=n;var i=n&&n.threeOptions;return o.renderer=new th(o,r,i),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ah(t,e)}(e,w().Evented),r=e,(n=[{key:"onAdd",value:function(t){var e=this;return e._map=t,e.renderer.setMap(t),e.renderer.render(),e.on("render",function(){this.context&&this.context.render(this.scene,this.camera)}.bind(e.renderer)),this}},{key:"addTo",value:function(t){return t.addLayer(this),this}},{key:"toThreeShape",value:function(t){return this.renderer.toThreeShape(t)}},{key:"toThreeMesh",value:function(t,e,r,n){return this.renderer.toThreeMesh(t,e,r,n)}},{key:"addObject",value:function(t,e){this.renderer&&this.renderer.addObject(t,e)}},{key:"getScene",value:function(){return this.renderer.scene}},{key:"getCamera",value:function(){return this.renderer.camera}},{key:"getThreeRenderer",value:function(){return this.renderer.context}},{key:"clearMesh",value:function(){return this.renderer.clearMesh(),this}},{key:"clearAll",value:function(t){return this.renderer.clearAll(t),this}},{key:"setPosition",value:function(t,e){return this.renderer.setPosition(t,e)}},{key:"lngLatToPosition",value:function(t){return this.renderer.lngLatToPosition(t)}},{key:"distanceToThreeVector3",value:function(t,e,r){var n=this._map,o=r||n.getCenter();return this.renderer.distanceToThreeVector3(t,e,o)}},{key:"removeDuplicatedCoordinates",value:function(t){this.renderer.removeDuplicatedCoordinates(t)}},{key:"getCoordinatesCenter",value:function(t){return this.renderer.getCoordinatesCenter(t)}},{key:"render",value:function(){this._update()}},{key:"getCanvasContainer",value:function(){return this.renderer.getCanvasContainer()}},{key:"getCanvas",value:function(){return this.renderer.getCanvas()}},{key:"remove",value:function(){this.renderer.remove(),this._map=null}},{key:"draw",value:function(){return this}},{key:"renderScene",value:function(){return this.renderer.renderScene(),this.fire("renderscene"),this}},{key:"_update",value:function(){return this.renderScene(),this.fire("render"),this}}])&&rh(r.prototype,n),o&&rh(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function uh(t){"@babel/helpers - typeof";return(uh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function lh(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ch(n.key),n)}}function ch(t){var e=function(t,e){if("object"!=uh(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=uh(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==uh(e)?e:e+""}var fh=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.options=e,this.rootCanvas=null,this.features=[],this.visibility=!0,this.opacity=e.opacity?e.opacity:1,this.colors=e.colors?e.colors:["blue","cyan","lime","yellow","red"],this.useGeoUnit=!!e.useGeoUnit&&e.useGeoUnit,this.radius=e.radius?e.radius:50,this.featureWeight=e.featureWeight?e.featureWeight:null,this.maxWeight=null,this.minWeight=null,this.canvasContext=null,this.maxWidth=null,this.maxHeight=null,this.extent={},this.mapElement=e.mapElement,this._createCanvasContainer(e.targetElement,e.size)},(e=[{key:"addFeatures",value:function(t){this.features=this.toiClientFeature(t),this.refresh()}},{key:"refresh",value:function(){0!==this.features.length&&this.updateHeatPoints(this.extent)}},{key:"setOpacity",value:function(t){t!==this.opacity&&(this.opacity=t,W.modifyDOMElement(this.rootCanvas,null,null,null,null,null,null,t))}},{key:"updateHeatPoints",value:function(t){this.features&&this.features.length>0?this.convertFastToPixelPoints(t):this.canvasContext.clearRect(0,0,this.maxWidth,this.maxWidth)}},{key:"convertFastToPixelPoints",value:function(t){var e,r,n,o,i,a,s,u=[],l=t.getEast()-t.getWest(),c=t.getNorth()-t.getSouth(),f=this.mapElement;o=l/f.width>c/f.height?l/f.width:c/f.height,this.useRadius=this.useGeoUnit?parseInt(this.radius/o):this.radius;for(var h=0;h<this.features.length;h++){var p=this.features[h],d=p.geometry,y=this.getPixelXY(new Rt(d.x,d.y));this.featureWeight?(y.weight=p.attributes[this.featureWeight],this.maxWeight||(i=i||y.weight,a=a||y.weight,i=Math.max(i,y.weight),a=Math.min(a,y.weight))):y.weight=1,e=Math.floor(y.x),r=Math.floor(y.y),n=y.weight,u.push([e,r,n])}this.maxWeight?this.draw(u,this.maxWeight):(s=i&&a?(i+a)/2:1,this.draw(u,s))}},{key:"draw",value:function(t,e){if(!(this.maxHeight>0&&this.maxWidth>0))return!1;var r=this.canvasContext;r.setTransform(1,0,0,1,0,0),this.canvasContext.clearRect(0,0,this.maxWidth,this.maxHeight),this.drawCircle(this.useRadius),this.createGradient();for(var n=0;n<t.length;n++){var o=t[n];this.canvasContext.globalAlpha=Math.max(o[2]/e,.05),this.canvasContext.drawImage(this.circle,o[0]-this.useRadius,o[1]-this.useRadius)}var i=r.getImageData(0,0,this.maxWidth,this.maxHeight);this.colorize(i.data,this.grad),r.putImageData(i,0,0)}},{key:"colorize",value:function(t,e){for(var r,n=0;n<t.length;n+=4)(r=4*t[n+3])&&(t[n]=e[r],t[n+1]=e[r+1],t[n+2]=e[r+2])}},{key:"drawCircle",value:function(t){var e=t/2,r=this.circle=document.createElement("canvas"),n=r.getContext("2d");r.height=2*t,r.width=2*t,n.shadowOffsetX=n.shadowOffsetY=2*t,n.shadowBlur=e,n.shadowColor="#000000",n.beginPath(),n.arc(-t,-t,t/2,0,2*Math.PI,!0),n.closePath(),n.fill()}},{key:"createGradient",value:function(){var t=this.colors,e=document.createElement("canvas"),r=e.getContext("2d"),n=r.createLinearGradient(0,0,0,256);e.height=256,e.width=1;for(var o=1,i=0,a=t.length;i<a;i++)n.addColorStop(o/a,t[i]),o++;r.fillStyle=n,r.fillRect(0,0,1,256),this.grad=r.getImageData(0,0,1,256).data}},{key:"getPixelXY",value:function(t){var e;if(t instanceof Xt||t instanceof so){var r=this.options.convertLatlonToPixel({lon:t.x,lat:t.y});e={x:parseInt(r.x),y:parseInt(r.y)}}if(t instanceof Rt){var n=this.options.convertLatlonToPixel(t);e={x:parseInt(n.x),y:parseInt(n.y)}}return e}},{key:"_createCanvasContainer",value:function(t){this.rootCanvas=document.createElement("canvas"),this.rootCanvas.id=this.options.id,this.rootCanvas.width=this.maxWidth=parseInt(this.mapElement.style.width),this.rootCanvas.height=this.maxHeight=parseInt(this.mapElement.style.height),this.canvasContext=this.rootCanvas.getContext("2d");var e=window.devicePixelRatio||1;1!==e&&this.canvasContext&&this.canvasContext.scale(e,e),W.modifyDOMElement(this.rootCanvas,null,{x:0,y:0},{w:this.maxWidth,h:this.maxHeight},"absolute",null,null,this.opacity),t.appendChild(this.rootCanvas)}},{key:"toiClientFeature",value:function(t){W.isArray(t)||(t=[t]);for(var e=[],r=0;r<t.length;r++)if(t[r]instanceof er)e.push(t[r]);else if(-1!=["FeatureCollection","Feature","Geometry"].indexOf(t[r].type)){var n=new Kn;e=e.concat(n.read(t[r]))}else{if(!t[r].geometry||!t[r].geometry.parts)throw new Error("Features[".concat(r,"]'s type does not match, please check."));e.push(gs.fromJson(t[r]).toFeature())}return e}},{key:"removeFeatures",value:function(t){if(t&&0!==t.length&&this.features&&0!==this.features.length){if(t===this.features)return this.removeAllFeatures();W.isArray(t)||(t=[t]);for(var e,r,n=[],o=0,i=t.length;o<i;o++)e=t[o],-1!==(r=W.indexOf(this.features,e))?this.features.splice(r,1):n.push(e);var a=0==n.length;return this.refresh(),{succeed:a,heatPointsFailedRemoved:n}}}},{key:"removeAllFeatures",value:function(){this.features=[],this.refresh()}},{key:"removeFromMap",value:function(){this.removeAllFeatures(),this.options.targetElement.removeChild(this.rootCanvas)}},{key:"setVisibility",value:function(t){this.rootCanvas&&t!==this.visibility&&(this.visibility=t,this.rootCanvas.style.display=t?"block":"none")}},{key:"setExtent",value:function(t){this.extent=t}},{key:"_hide",value:function(){this.rootCanvas.style.display="none"}},{key:"_show",value:function(){this.rootCanvas.style.display="block"}}])&&lh(t.prototype,e),r&&lh(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function hh(t){"@babel/helpers - typeof";return(hh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ph(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function dh(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ph(Object(r),!0).forEach(function(e){yh(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ph(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function yh(t,e,r){return(e=gh(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function vh(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,gh(n.key),n)}}function gh(t){var e=function(t,e){if("object"!=hh(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=hh(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==hh(e)?e:e+""}function mh(t,e,r){return e=bh(e),function(t,e){if(e&&("object"===hh(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],bh(t).constructor):e.apply(t,r))}function bh(t){return(bh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function wh(t,e){return(wh=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Sh=function(t){function e(t,r){var n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=mh(this,e);var o=r||{};return n.options=o,n.name=t,n.id=o.id?o.id:W.createUniqueID("HeatMapLayer_"),n.loadWhileAnimating=void 0===o.loadWhileAnimating||o.loadWhileAnimating,n.features={},n.EVENT_TYPES=["featuresadded","featuresremoved","featuresdrawcompleted"],n.type="custom",n.renderingMode="3d",n.overlay=!0,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&wh(t,e)}(e,w().Evented),r=e,(n=[{key:"onAdd",value:function(t){this.map=t;var e=this.map.getCanvasContainer(),r=this.map.getCanvas();this.renderer=new fh(dh(dh({id:this.id},this.options),{},{convertLatlonToPixel:this._convertLatlonToPixel.bind(this),targetElement:e,mapElement:r})),this.features.features&&this.features.features.length&&(this.renderer.setExtent(this.map.getBounds()),this.renderer.addFeatures(this.features))}},{key:"onRemove",value:function(){this.removeAllFeatures(),this.renderer.removeFromMap(),this.features={},this.renderer=null}},{key:"render",value:function(){this.refresh()}},{key:"addFeatures",value:function(t){this.renderer?this.renderer.addFeatures(t):this.features=t,this.fire(this.EVENT_TYPES[0],{features:t,succeed:!0})}},{key:"refresh",value:function(){this.map&&(this.renderer.setExtent(this.map.getBounds()),this.renderer.refresh())}},{key:"setOpacity",value:function(t){t!==this.opacity&&(this.renderer.setOpacity(t),null!==this.map&&this.fire("changelayer",{layer:this,property:"opacity"}))}},{key:"updateHeatPoints",value:function(t){this.renderer.updateHeatPoints(t)}},{key:"getPixelXY",value:function(t){return this.renderer.getPixelXY(t)}},{key:"removeFeatures",value:function(t){var e=this.renderer.removeFeatures(t);if(e){var r=e.heatPointsFailedRemoved,n=e.succeed;this.fire(this.EVENT_TYPES[1],{features:r,succeed:n})}}},{key:"removeAllFeatures",value:function(){this.renderer.removeAllFeatures()}},{key:"moveTo",value:function(t,e){var r=document.getElementById(this.renderer.rootCanvas.id);if(e=void 0===e||e){var n=document.getElementById(t);r&&n&&n.parentNode.insertBefore(r,n)}else{var o=document.getElementById(t);if(r){if(o.nextSibling)return void o.parentNode.insertBefore(r,o.nextSibling);o.parentNode.appendChild(r)}}}},{key:"setVisibility",value:function(t){this.renderer.setVisibility(t)}},{key:"_convertLatlonToPixel",value:function(t){return this.map.project(new(w().LngLat)(t.lon,t.lat))}}])&&vh(r.prototype,n),o&&vh(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function xh(t){"@babel/helpers - typeof";return(xh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _h(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function Eh(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Oh(n.key),n)}}function Oh(t){var e=function(t,e){if("object"!=xh(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=xh(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==xh(e)?e:e+""}var Ph=function(){return t=function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.layerTypeID=e,this.data=[].concat(r.data),this.props=r.props?r.props:{},this.callback=r.callback?r.callback:{},this.id=r.layerId?r.layerId:W.createUniqueID("graphicLayer_"+this.layerTypeID+"_")},(e=[{key:"onAdd",value:function(){}},{key:"render",value:function(){}},{key:"setStyle",value:function(t){W.extend(this.props,t),this._createLayerByLayerTypeID(),this.update()}},{key:"setData",value:function(t){this.data=this.data||[],this.data.length=0;var e=W.isArray(t)?[].concat(t):[t];this.layer.props.data||(this.layer.props.data=[]),this.layer.props.data.length=0;for(var r=0;r<e.length;r++)this.layer.props.data.push(e[r]);this.data=this.layer.props.data,this.update()}},{key:"addData",value:function(t){this.data=this.data||[];var e=W.isArray(t)?[].concat(t):[t];this.layer.props.data||(this.layer.props.data=[]);for(var r=0;r<e.length;r++)this.layer.props.data.push(e[r]);this.update()}},{key:"update",value:function(){if("Awaiting state"!==this.layer.lifecycle){this.layer.setChangeFlags({dataChanged:!0,propsChanged:!0,viewportChanged:!0,updateTriggersChanged:!0})}this._draw()}},{key:"clear",value:function(){this.removeData(),this.deckGL.finalize()}},{key:"removeData",value:function(){this.data.length=0,this.layer.props.data&&(this.layer.props.data.length=0),this.update()}},{key:"moveTo",value:function(t,e){var r=document.getElementById(this.id);if(e=void 0===e||e){var n=document.getElementById(t);r&&n&&n.parentNode.insertBefore(r,n)}else{var o=document.getElementById(t);if(r){if(o.nextSibling)return void o.parentNode.insertBefore(r,o.nextSibling);o.parentNode.appendChild(r)}}}},{key:"setVisibility",value:function(t){this.canvas&&t!==this.visibility&&(this.visibility=t,this.canvas.style.display=t?"block":"none")}},{key:"_draw",value:function(){var t=this._getState();t.layers=[this.layer],t.canvas=this.canvas,this.deckGL.setProps(t)}},{key:"_getState",value:function(){var t=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?_h(Object(r),!0).forEach(function(e){var n,o,i;n=t,o=e,i=r[e],(o=Oh(o))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):_h(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}({width:parseInt(this.canvas.style.width),height:parseInt(this.canvas.style.height)},this.getMapInfo()),e={};for(var r in t)e[r]=t[r];for(var n in this.props)e[n]=this.props[n];return this._isEPSG3857&&this._isEPSG3857()?(e.coordinateSystem=this.coordinateSystem,e.isGeographicCoordinateSystem=this.isGeographicCoordinateSystem):(e.coordinateSystem=1,e.isGeographicCoordinateSystem=!1),e.data=this.data,e}},{key:"_createLayerByLayerTypeID",value:function(){if(this.props.data=this.data,this.props.isGeographicCoordinateSystem=this.isGeographicCoordinateSystem,this.props.coordinateSystem=this.coordinateSystem,this.props.pickable=Boolean(this.props.onClick)||Boolean(this.props.onHover),"scatter-plot"===this.layerTypeID)this.props.id="scatter-plot",this._createScatterPlotLayer();else if("path-layer"===this.layerTypeID)this.props.id="path-layer",this._createPathLayer();else if("polygon-layer"===this.layerTypeID)this.props.id="polygon-layer",this._createPolygonLayer();else if("arc-layer"===this.layerTypeID)this.props.id="arc-layer",this._createArcLineLayer();else{if("hexagon-layer"!==this.layerTypeID)throw new Error(this.layerTypeID+" does not support");this.props.id="hexagon-layer",this._createHexagonLayer()}}},{key:"_createScatterPlotLayer",value:function(){var t=this;this.props.getPosition=this.callback.getPosition?this.callback.getPosition:function(t){if(!t)return[0,0,0];var e=t.getLngLat();return e&&[e.lng,e.lat,0]},this.callback.getColor&&(this.props.getColor=this.callback.getColor?this.callback.getColor:function(e){var r=e&&e.getStyle();return r&&r.color||t.props.color}),this.callback.getRadius&&(this.props.getRadius=this.callback.getRadius?this.callback.getRadius:function(e){var r=e&&e.getStyle();return r&&r.radius||t.props.radius}),(this.props.color||this.props.radius)&&(this.props.updateTriggers={},this.props.radius&&(this.props.updateTriggers.getRadius=[this.props.radius]),this.props.color&&(this.props.updateTriggers.getColor=[this.props.color])),this.layer=new window.DeckGL.ScatterplotLayer(this.props)}},{key:"_createPathLayer",value:function(){this.props.getPath=this.callback.getPath?this.callback.getPath:function(t){return t.geometry.coordinates},this.callback.getColor&&(this.props.getColor=this.callback.getColor),this.callback.getWidth&&(this.props.getWidth=this.callback.getWidth),this.callback.getDashArray&&(this.props.getDashArray=this.callback.getDashArray),this.layer=new window.DeckGL.PathLayer(this.props)}},{key:"_createPolygonLayer",value:function(){this.props.getPolygon=this.callback.getPolygon?this.callback.getPolygon:function(t){return t.geometry.coordinates},this.callback.getElevation&&(this.props.getElevation=this.callback.getElevation),this.callback.getFillColor&&(this.props.getFillColor=this.callback.getFillColor),this.callback.getLineColor&&(this.props.getLineColor=this.callback.getLineColor),this.callback.getLineWidth&&(this.props.getLineWidth=this.callback.getLineWidth),this.props.updateTriggers={},this.props.updateTriggers.getColor=this.props.color?this.props.color:[0,0,128,128],this.layer=new window.DeckGL.PolygonLayer(this.props)}},{key:"_createArcLineLayer",value:function(){this.props.getSourcePosition=this.callback.getSourcePosition?this.callback.getSourcePosition:function(t){return t?t.geometry.coordinates[0]:[0,0,0]},this.props.getTargetPosition=this.callback.getTargetPosition?this.callback.getTargetPosition:function(t){return t?t.geometry.coordinates[1]:[0,0,0]},this.callback.getStrokeWidth&&(this.props.getStrokeWidth=this.callback.getStrokeWidth),this.callback.getSourceColor&&(this.props.getSourceColor=this.callback.getSourceColor),this.callback.getTargetColor&&(this.props.getTargetColor=this.callback.getTargetColor),this.layer=new window.DeckGL.ArcLayer(this.props)}},{key:"_createHexagonLayer",value:function(){this.props.getPosition=this.callback.getPosition?this.callback.getPosition:function(t){return t?t.geometry.coordinates:[0,0,0]},this.callback.getColorValue&&(this.props.getColorValue=this.callback.getColorValue),this.callback.getElevationValue&&(this.props.getElevationValue=this.callback.getElevationValue),this.layer=new window.DeckGL.HexagonLayer(this.props)}},{key:"_initContainer",value:function(t,e){var r=e.style,n=r.width,o=r.height;this.canvas=this._createCanvas(n,o),t.appendChild(this.canvas)}},{key:"_createCanvas",value:function(t,e){var r=document.createElement("canvas");return r.id=this.id,r.style.position="absolute",r.style.top="0px",r.style.left="0px",r.style.cursor="",r.width=parseInt(t),r.height=parseInt(e),r.style.width=t,r.style.height=e,r}}])&&Eh(t.prototype,e),r&&Eh(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function kh(t){"@babel/helpers - typeof";return(kh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ch(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Th(n.key),n)}}function Th(t){var e=function(t,e){if("object"!=kh(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=kh(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==kh(e)?e:e+""}function Ah(t,e,r){return e=Mh(e),function(t,e){if(e&&("object"===kh(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Mh(t).constructor):e.apply(t,r))}function Mh(t){return(Mh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function jh(t,e){return(jh=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Ih=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Ah(this,e,[t,r])).type="custom",n.renderingMode="3d",n.overlay=!0,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&jh(t,e)}(e,Ph),r=e,(n=[{key:"onAdd",value:function(t){if(this.map=t,this.canvas)return this.mapContainer=this.map.getCanvasContainer(),this;this._isEPSG3857()?(this.coordinateSystem=3,this.isGeographicCoordinateSystem=!0):(this.coordinateSystem=1,this.isGeographicCoordinateSystem=!1),this._initContainer(this.map.getCanvasContainer(),this.map.getCanvas()),this._createLayerByLayerTypeID();var e=this._getState(),r={};for(var n in e)r[n]=e[n];return r.layers=[this.layer],r.canvas=this.canvas,this.deckGL=new window.DeckGL.experimental.DeckGLJS(r),this._draw(),this}},{key:"onRemove",value:function(){this.map.getCanvasContainer().removeChild(this.canvas),this.clear()}},{key:"getMapInfo",value:function(){var t=this.map.getCenter();return{center:t,zoom:this.map.getZoom(),maxZoom:this.map.getMaxZoom(),pitch:this.map.getPitch(),bearing:this.map.getBearing(),longitude:t.lng,latitude:t.lat}}},{key:"render",value:function(){this._draw()}},{key:"_isEPSG3857",value:function(){return this.map.getCRS&&this.map.getCRS()!==w().CRS.EPSG3857}}])&&Ch(r.prototype,n),o&&Ch(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function Nh(t){"@babel/helpers - typeof";return(Nh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Lh(t){return function(t){if(Array.isArray(t))return Rh(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return Rh(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Rh(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Rh(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Dh(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Bh(n.key),n)}}function Bh(t){var e=function(t,e){if("object"!=Nh(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Nh(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Nh(e)?e:e+""}var Fh={textSize:"12px",textFont:["12px Calibri","sans-serif"],textAnchor:"bottom",textColor:"rgba(0,0,0,1)",textHaloColor:"rgba(255,255,255,1)",textHaloWidth:1},Gh={lineColor:"red",lineCap:"round",lineJoin:"round",lindDasharray:[.4,5],lineDashOffset:0,lineWidth:1},Uh={showLabel:!0,opacity:1,visible:!0,interval:10,extent:null,minZoom:0,maxZoom:50,wrapX:!0,strokeStyle:Gh,lngLabelFormatter:null,latLabelFormatter:null,lngLabelStyle:Fh,latLabelStyle:Fh},zh=function(){return t=function t(e,r,n,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.map=e,this.id=o&&o.id,this.sourceId=this.id+"_line",this.canvasId=this.id,this.options=r,this.mapElement=o.mapElement,this.targetElement=o.targetElement,this.getMapStateByKey=n.getMapStateByKey,this.getDefaultExtent=n.getDefaultExtent,this.setVisibility=n.setVisibility,this.updateGraticuleLayer=n.updateGraticuleLayer,this.init()},(e=[{key:"init",value:function(){this._initialize(),this._createCanvas(),this._drawCanvas(),this.setVisibility(),this._drawLabel()}},{key:"onRemove",value:function(){this.targetElement.removeChild(this.canvas),this.canvas=null}},{key:"setMinZoom",value:function(t){this.options.minZoom=t,this.setVisibility()}},{key:"setMaxZoom",value:function(t){this.options.maxZoom=t,this.setVisibility()}},{key:"setShowLabel",value:function(t){this.options.showLabel=t,this._drawLabel()}},{key:"setExtent",value:function(t){this.options.extent=this.getDefaultExtent(t),this.features=this._getGraticuleFeatures(),this.updateGraticuleLayer(),this._drawLabel()}},{key:"setLngLabelStyle",value:function(t){this.options.lngLabelStyle=t,this._drawLabel()}},{key:"setLatLabelStyle",value:function(t){this.options.latLabelStyle=t,this._drawLabel()}},{key:"setIntervals",value:function(t){this.options.interval=t,this._calcInterval(),this.features=this._getGraticuleFeatures(),this.updateGraticuleLayer(),this._drawLabel()}},{key:"draw",value:function(){this._reset()}},{key:"_initialize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.options;(t=t||{}).strokeStyle=Object.assign({},Gh,t.strokeStyle||{}),t.lngLabelStyle=Object.assign({},Fh,t.lngLabelStyle||{}),t.latLabelStyle=Object.assign({},Fh,t.latLabelStyle||{}),this.options=Object.assign({},Uh,t,{extent:this.getDefaultExtent(t.extent),wrapX:t.wrapX}),this.oldExtent=this.options.extent,this._calcInterval(),this.isRotate=!1,this.visible=this.options.visible,this.features=this._getGraticuleFeatures()}},{key:"_createCanvas",value:function(){if(!this.canvas){var t=this.mapElement;this.canvas=document.createElement("canvas"),this.canvas.id=this.canvasId,this.canvas.style.position="absolute",this.canvas.style.top="0px",this.canvas.style.left="0px";var e=("undefined"==typeof window?{}:window).devicePixelRatio||1;this.canvas.width=parseInt(t.style.width)*e,this.canvas.height=parseInt(t.style.height)*e,this.canvas.style.width=t.style.width,this.canvas.style.height=t.style.height,this.canvas.globalAlpha=this.options.opacity,this.targetElement.appendChild(this.canvas)}}},{key:"_drawCanvas",value:function(){this.canvas||this._createCanvas(),this.setVisibility(),this._reset()}},{key:"_resizeCallback",value:function(){this.targetElement&&this.targetElement.removeChild(this.canvas),this.canvas=null,this._drawCanvas()}},{key:"_reset",value:function(){this._updateRotate(),this._updateExtent(),this._calcInterval(),this._drawLabel()}},{key:"_updateRotate",value:function(){var t=this.getMapStateByKey("getBearing");this.isRotate=t>-180&&t<=-90||t>=90&&t<180}},{key:"_updateExtent",value:function(){if(this.options.wrapX&&!this.oldExtent){var t=this.getMapStateByKey("getBounds"),e=t._ne,r=t._sw;this.options.extent=[r.lng,r.lat,e.lng,e.lat]}}},{key:"_calcInterval",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.options.interval;"function"==typeof t?(t=t(this.map),this._currLngInterval=t,this._currLatInterval=t):(this._currLngInterval=t,this._currLatInterval=t)}},{key:"_formatLat",value:function(t){return this.options.latFormatTickLabel?this.options.latLabelFormatter(t):t<0?Ic(-1*t)+"S":t>0?Ic(t)+"N":""+Ic(t)}},{key:"_formatLng",value:function(t){return this.options.lngLabelFormatter?this.options.lngLabelFormatter(t):(t=jc(t))>0&&t<=180?Ic(t)+"E":t<0&&t>=-180?Ic(-1*t)+"W":""+Ic(t)}},{key:"_parsePxToInt",value:function(t){t.length>2&&"p"===t.charAt(t.length-2)&&(t=t.substr(0,t.length-2));try{return parseInt(t,10)}catch(t){console.log(t)}return 0}},{key:"_drawLabel",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.visible,r=this.canvas,n=r.getContext("2d");if(e&&this.options.showLabel){if(this.mapElement){this._currLngInterval&&this._currLatInterval||this._calcInterval(),n.clearRect(0,0,r.width,r.height);var o=this.options,i=o.lngLabelStyle,a=o.latLabelStyle,s=this._getGridiculePoints(),u=s.lngPoints,l=s.latPonits;u.forEach(function(e){t._drawLng(n,e[0],e[1],e[2],i)}),l.forEach(function(e){t._drawLat(n,e[0],e[1],e[2],a)})}}else n.clearRect(0,0,r.width,r.height)}},{key:"_drawLat",value:function(t,e,r,n,o){t=this._setLabelStyle(t,o);var i=this.canvas.width,a=12;try{var s=t.font.split(" ")[0];a=this._parsePxToInt(s)}catch(t){console.log(t)}if(!n){var u=e;e=r,r=this.getMapStateByKey("project",[u,e])}var l=this._formatLat(e),c=t.measureText(l).width;t.strokeText(l,(n?i:r.x)-c,(n?r:r.y)+a/2),t.fillText(l,(n?i:r.x)-c,(n?r:r.y)+a/2)}},{key:"_drawLng",value:function(t,e,r,n,o){t=this._setLabelStyle(t,o);var i=this.canvas.height;if(!n){var a=r;r=this.getMapStateByKey("project",[e,a])}var s=this._formatLng(e),u=t.measureText(s).width;t.strokeText(s,(n?r:r.x)-u/2,n?i:r.y),t.fillText(s,(n?r:r.x)-u/2,n?i:r.y)}},{key:"_getLatPoints",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[-180,180],r=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.features;if(o){if(this.options.wrapX&&-180===e[0]&&180===e[1])return[];var i=[];return o.forEach(function(o){var a=o.geometry.coordinates[0][1];if(o.geometry.coordinates[1][1]===a){var s="number"==typeof n?n:e[1];t.isRotate&&(s="number"==typeof r?r:e[0]),t.options.wrapX&&(i=i.concat(t._getWrapPoints(s,a,[s,s]))),i.push([s,a])}}),i}}},{key:"_getLngPoints",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[-90,90],r=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.features;if(o){var i="number"==typeof r?r:e[0];this.isRotate&&(i="number"==typeof n?n:e[1]);var a=[];return o.forEach(function(e){var r=e.geometry.coordinates[0][0];e.geometry.coordinates[1][0]===r&&(a.push([r,i]),t.options.wrapX&&(a=a.concat(t._getWrapPoints(r,i))))}),a}}},{key:"_getWrapPoints",value:function(t,e){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.oldExtent,n=[],o=this.getMapStateByKey("getBounds"),i=o._ne,a=o._sw,s=r.length>2?r[2]:r[1];t>=a.lng;){var u=jc(t,180===s,-180===r[0]);(!r||u>=r[0]&&u<=s)&&n.push([t,e]),t-=360}for(;t<=i.lng;){var l=jc(t,180===s,-180===r[0]);(!r||l>=r[0]&&l<=s)&&n.push([t,e]),t+=360}return n}},{key:"_getGridiculePoints",value:function(){var t=this._getEdgeLat(),e=this._getEdgeLng(),r=this._getRange(),n=r.latRange,o=r.lngRange,i=r.firstLat,a=r.firstLng,s=r.lastLat,u=r.lastLng;return{latPonits:this._getUniquePoint(this._getLatPoints(o,a,u),t,1),lngPoints:this._getUniquePoint(this._getLngPoints(n,i,s),e,0)}}},{key:"_getEdgeLat",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._currLatInterval,r=[],n=[],o=this.canvas.width,i=this.canvas.height,a=this._getRange().extent,s=this.getMapStateByKey("getBounds")._ne;if(this.options.wrapX&&jc(s.lng)>a[2])return[];for(var u=this._countDecimals(e),l=0;l<=i;l++){var c=this.getMapStateByKey("unproject",[o,l]),f=jc(c.lng);(this.options.wrapX?f>=a[0]&&f<=a[2]:c.lng>=a[0]&&c.lng<=a[2])&&c.lat>=a[1]&&c.lat<=a[3]&&(r.push([c.lat,l]),n.push(c.lat),void 0===t&&c.lat.toFixed(u)%e==0&&(t=Number(c.lat.toFixed(u))))}var h=this._getIntersectRange(t,n,r,e),p=h.first,d=h.last,y=h.coordinates,v=h.points;t=Math.min(Math.max(p,-90),90);var g=Math.max(Math.min(Math.round(d),90),-90);return-90!==t||-90!==g?this._getClosestCoordinate(t,g,y,v,e):[]}},{key:"_getEdgeLng",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._currLngInterval,r=[],n=[],o=this.canvas.width,i=this.canvas.height,a=this.options.extent,s=this._countDecimals(e),u=this.getMapStateByKey("getBounds")._sw;if(this.options.wrapX&&jc(u.lat)>a[3])return[];for(var l=0;l<=o;l++){var c=this.getMapStateByKey("unproject",[l,i]),f=jc(c.lng);(this.options.wrapX?f>=a[0]&&f<=a[2]:c.lng>=a[0]&&c.lng<=a[2])&&c.lat>=a[1]&&c.lat<=a[3]&&(r.push([c.lng,l]),n.push(c.lng),void 0===t&&c.lng.toFixed(s)%e==0&&(t=Number(c.lng.toFixed(s))))}var h=this._getIntersectRange(t,n,r,e),p=h.first,d=h.last,y=h.coordinates,v=h.points;return t=p,this._getClosestCoordinate(t,d,y,v,e)}},{key:"_getIntersectRange",value:function(t,e,r,n){var o=e[e.length-1];if(t>o){o=t,e.reverse(),r.reverse();for(var i=this._countDecimals(n),a=0;a<=e.length;a++){var s=e[a];if(s.toFixed(i)%n==0){t=Number(s.toFixed(i));break}}}return{first:t,last:o,coordinates:e,points:r}}},{key:"_getClosestCoordinate",value:function(t,e,r,n,o){for(var i=[],a=t;a<=e;){var s=this._getClosestNumberIndex(a,r),u=n[s];i.push([Math.round(u[0]),u[1],!0]),a+=o,r=r.slice(s),n=n.slice(s)}return i}},{key:"_getClosestNumberIndex",value:function(t,e){for(var r=0,n=Number.MAX_VALUE,o=0;o<e.length;o++){var i=Math.abs(e[o]-t);if(i<=n){if(i===n&&e[o]<e[r])continue;r=o,n=i}}return r}},{key:"_getUniquePoint",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(this.options.wrapX)return t.concat(e);if(!e||0===e.length)return t;var n=e,o=this.canvas.width,i=this.canvas.height;for(var a in t){var s=this.getMapStateByKey("project",t[a]),u=n.findIndex(function(e){return e[0]===t[a][r]});u<=-1?n.push(t[a]):s&&s.x>=0&&s.x<=o&&s.y>=0&&s.y<=i&&(n[u]=t[a])}return n}},{key:"_countDecimals",value:function(t){return Math.floor(t)!==t&&t.toString().split(".")[1].length||0}},{key:"_getGraticuleFeatures",value:function(){var t=this._currLngInterval||10,e=this._currLatInterval||10,r=[],n=this._getRange(),o=n.latRange,i=n.lngRange,a=n.firstLat,s=n.firstLng,u=n.lastLat,l=n.lastLng;this.options.wrapX&&!this.oldExtent&&(o=[-90,90],i=[-180,180],a=s=u=l=null),"number"==typeof s&&r.unshift(this._makeLineFeature(this._makeLineCoords(s,o,a,u))),"number"==typeof l&&r.unshift(this._makeLineFeature(this._makeLineCoords(l,o,a,u)));for(var c=i[0];c<=i[1];c+=t)r.unshift(this._makeLineFeature(this._makeLineCoords(c,o,a,u)));"number"==typeof a&&r.unshift(this._makeLineFeature(this._makeLineCoords(a,i,s,l,"lat"))),"number"==typeof u&&r.unshift(this._makeLineFeature(this._makeLineCoords(u,i,s,l,"lat")));for(var f=o[0];f<=o[1];f+=e)r.unshift(this._makeLineFeature(this._makeLineCoords(f,i,s,l,"lat")));return r}},{key:"_getRange",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.options.extent&&Lh(this.options.extent);t&&0!==t.length||(t=this.getDefaultExtent());var e={};if((t=t.map(function(t){return Number(t.toFixed(6))}))[1]%this._currLatInterval!=0){e.firstLat=t[1];var r=Math.ceil(t[1]/this._currLatInterval);t[1]=r*this._currLatInterval}if(t[3]%this._currLatInterval!=0){e.lastLat=t[3];var n=Math.floor(t[3]/this._currLatInterval);t[3]=n*this._currLatInterval}if(t[0]%this._currLngInterval!=0){e.firstLng=t[0];var o=Math.ceil(t[0]/this._currLngInterval);t[0]=o*this._currLngInterval}if(t[2]%this._currLngInterval!=0){e.lastLng=t[2];var i=Math.floor(t[2]/this._currLngInterval);t[2]=i*this._currLngInterval}return Object.assign({latRange:[t[1],t[3]],lngRange:[t[0],t[2]],extent:t},e)}},{key:"_makeLineCoords",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[-90,90],r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"lng";t="lng"===o?this._lngFix(t):t,r="number"==typeof r?r:e[0],n="number"==typeof n?n:e[1];for(var i=Math.abs(r-n),a=[],s=r;s<=n;s+=i)"lng"===o?a.push([t,s]):a.push([s,t]);return a}},{key:"_makeLineFeature",value:function(t){return{type:"Feature",geometry:{type:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"LineString",coordinates:t}}}},{key:"_lngFix",value:function(t){return t>=180?180:t<=-180?-180:t}},{key:"_transformStrokeStyle",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.options.strokeStyle;if(!t||"string"==typeof t)return{paint:{"line-color":t||"rgba(0,0,0,0.2)"}};var e={visibility:this.visible?"visible":"none","line-join":t.lineJoin||"round","line-cap":t.lineCap||"round"},r={"line-color":t.lineColor||"rgba(0,0,0,0.2)","line-width":t.lineWidth||1,"line-offset":t.lineDashOffset||0,"line-translate-anchor":"viewport"};return t.lineWidth&&("function"==typeof t.lineWidth?r["line-width"]=t.lineWidth(this.map):r["line-width"]=t.lineWidth),t.lindDasharray&&("function"==typeof t.lindDasharray?r["line-dasharray"]=t.lindDasharray(this.map):r["line-dasharray"]=t.lindDasharray),{layout:e,paint:r}}},{key:"_setLabelStyle",value:function(t,e){return e.textColor&&(t.fillStyle=e.textColor),e.textSize&&(t.font=e.textSize+" "+(e.textFont||["Calibri","sans-serif"]).join(",")),e.textHaloColor&&(t.strokeStyle=e.textHaloColor,t.lineWidth=e.textHaloWidth||1),e.textAnchor&&(t.textBaseline=this._getTxetBaseline(e.textAnchor),t.textAligin=this._getTxetAlign(e.textAligin)),t}},{key:"_getTxetBaseline",value:function(t){if(!t)return"bottom";var e=t.split("-");return e.includes("bottom")?"bottom":e.includes("top")?"top":e.includes("center")?"middle":void 0}},{key:"_getTxetAlign",value:function(t){if(!t)return"center";var e=t.split("-");return e.includes("left")?"left":e.includes("right")?"right":e.includes("center")?"center":void 0}}])&&Dh(t.prototype,e),r&&Dh(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function Vh(t){"@babel/helpers - typeof";return(Vh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Hh(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Wh(n.key),n)}}function Wh(t){var e=function(t,e){if("object"!=Vh(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Vh(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Vh(e)?e:e+""}var qh,Yh={textSize:"12px",textFont:["12px Calibri","sans-serif"],textAnchor:"bottom",textColor:"rgba(0,0,0,1)",textHaloColor:"rgba(255,255,255,1)",textHaloWidth:1},Xh={lineColor:"red",lineCap:"round",lineJoin:"round",lindDasharray:[.4,5],lineDashOffset:0,lineWidth:1},Jh={showLabel:!0,opacity:1,visible:!0,interval:10,extent:null,minZoom:0,maxZoom:50,wrapX:!0,strokeStyle:Xh,lngLabelFormatter:null,latLabelFormatter:null,lngLabelStyle:Yh,latLabelStyle:Yh},Kh=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=e&&e.layerID?e.layerID:W.createUniqueID("graticuleLayer_"),this.sourceId=this.id+"_line",(e=e||{}).strokeStyle=Object.assign({},Xh,e.strokeStyle||{}),e.lngLabelStyle=Object.assign({},Yh,e.lngLabelStyle||{}),e.latLabelStyle=Object.assign({},Yh,e.latLabelStyle||{}),this.options=Object.assign({},Jh,e),this.type="custom",this.renderingMode="3d",this.overlay=!0,this.styleDataEevent=this._setLayerTop.bind(this)},(e=[{key:"onAdd",value:function(t){this.map=t,this.renderer=new zh(this.map,this.options,{getMapStateByKey:this.getMapStateByKey,getDefaultExtent:this.getDefaultExtent,updateGraticuleLayer:this.updateGraticuleLayer.bind(this),setVisibility:this.setVisibility.bind(this)},{mapElement:this.map.getCanvas(),targetElement:this.map.getCanvasContainer(),id:this.id}),this.addGraticuleLayer(),this.resizeEvent=this.renderer._resizeCallback.bind(this.renderer),this.zoomendEvent=this.setVisibility.bind(this),this._bindEvent()}},{key:"onRemove",value:function(){this.renderer.onRemove(),this._unbindEvent()}},{key:"render",value:function(){this.renderer.draw()}},{key:"getMapStateByKey",value:function(t,e){return"getBearing"===t?this.map.getBearing():"getBounds"===t?this.map.getBounds():"project"===t?this.map.project(e):"unproject"===t?this.map.unproject(e):void 0}},{key:"setVisibility",value:function(t){var e=this.map&&this.map.getZoom();this.options.visible="boolean"==typeof t?t:this.options.visible,this.visible="boolean"==typeof t?t:this.options.visible&&e>=this.options.minZoom&&e<=this.options.maxZoom,this.renderer&&(this.renderer.visible=this.visible),this.map.getLayer(this.sourceId)&&this.map.setLayoutProperty(this.sourceId,"visibility",this.visible?"visible":"none"),this.renderer&&this.renderer._drawLabel()}},{key:"setMinZoom",value:function(t){this.options.minZoom=t,this.setVisibility()}},{key:"setMaxZoom",value:function(t){this.options.maxZoom=t,this.setVisibility()}},{key:"setShowLabel",value:function(t){this.options.showLabel=t,this.renderer._drawLabel()}},{key:"setExtent",value:function(t){this.options.extent=this.getDefaultExtent(t,this.map),this.updateGraticuleLayer(),this.renderer._drawLabel()}},{key:"setStrokeStyle",value:function(t){if(this.map&&this.map.getLayer(this.sourceId)){this.options.strokeStyle=t;var e=this.renderer._transformStrokeStyle(t),r=e.layout,n=e.paint;for(var o in r)this.map.setLayoutProperty(this.sourceId,o,r[o]);for(var i in n)this.map.setPaintProperty(this.sourceId,i,n[i])}}},{key:"setLngLabelStyle",value:function(t){this.options.lngLabelStyle=t,this.renderer._drawLabel()}},{key:"setLatLabelStyle",value:function(t){this.options.latLabelStyle=t,this.renderer._drawLabel()}},{key:"setIntervals",value:function(t){this.renderer&&this.renderer.setIntervals(t)}},{key:"getDefaultExtent",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.map,r=(e.getCRS&&e.getCRS()||{}).extent;if(r||(r=[-180,-85.05119,180,85.05119]),!t||0===t.length)return r;var n=w().LngLatBounds.convert(t),o=n._sw,i=n._ne;return t=[o.lng,o.lat,i.lng,i.lat],t=[Math.max(r[0],t[0]),Math.max(r[1],t[1]),Math.min(r[2],t[2]),Math.min(r[3],t[3])]}},{key:"addGraticuleLayer",value:function(){if(!this.map.getSource(this.sourceId)){var t={type:"geojson",data:{type:"FeatureCollection",features:this.renderer.features}};this.map.addSource(this.sourceId,t)}if(!this.map.getLayer(this.sourceId)){var e=Object.assign({id:this.sourceId,type:"line",source:this.sourceId},this.renderer._transformStrokeStyle());this.map.addLayer(e)}}},{key:"_getLatPoints",value:function(t,e,r,n){return this.renderer._getLatPoints(t,e,r,n)}},{key:"_bindEvent",value:function(){this.map.on("styledata",this.styleDataEevent),this.map.on("resize",this.resizeEvent),this.map.on("zoomend",this.zoomendEvent)}},{key:"_unbindEvent",value:function(){this.map.off("styledata",this.styleDataEevent),this.map.off("resize",this.resizeEvent),this.map.off("zoomend",this.zoomendEvent)}},{key:"_setLayerTop",value:function(){var t=this,e=this.map;if(e){var r=e.getStyle&&e.getStyle().layers;r&&r.length&&r.findIndex(function(e){return e.id===t.sourceId})!==r.length-1&&e.getLayer(this.sourceId)&&(e.removeLayer(this.sourceId),this.addGraticuleLayer())}}},{key:"updateGraticuleLayer",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.features;if(this.map.getSource(this.sourceId)){var e={type:"FeatureCollection",features:t};this.map.getSource(this.sourceId).setData(e)}this.addGraticuleLayer()}}])&&Hh(t.prototype,e),r&&Hh(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();!function(t){t[t.Unknown=0]="Unknown",t[t.Point=1]="Point",t[t.LineString=2]="LineString",t[t.Polygon=3]="Polygon",t[t.MultiPoint=4]="MultiPoint",t[t.MultiLineString=5]="MultiLineString",t[t.MultiPolygon=6]="MultiPolygon",t[t.GeometryCollection=7]="GeometryCollection",t[t.CircularString=8]="CircularString",t[t.CompoundCurve=9]="CompoundCurve",t[t.CurvePolygon=10]="CurvePolygon",t[t.MultiCurve=11]="MultiCurve",t[t.MultiSurface=12]="MultiSurface",t[t.Curve=13]="Curve",t[t.Surface=14]="Surface",t[t.PolyhedralSurface=15]="PolyhedralSurface",t[t.TIN=16]="TIN",t[t.Triangle=17]="Triangle"}(qh||(qh={}));var Qh,Zh=new Int32Array(2),$h=new Float32Array(Zh.buffer),tp=new Float64Array(Zh.buffer),ep=1===new Uint16Array(new Uint8Array([1,0]).buffer)[0];function rp(t){"@babel/helpers - typeof";return(rp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function np(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,op(n.key),n)}}function op(t){var e=function(t,e){if("object"!=rp(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=rp(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==rp(e)?e:e+""}!function(t){t[t.UTF8_BYTES=1]="UTF8_BYTES",t[t.UTF16_STRING=2]="UTF16_STRING"}(Qh||(Qh={}));var ip=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.bytes_=e,this.position_=0}return e=t,n=[{key:"allocate",value:function(e){return new t(new Uint8Array(e))}}],(r=[{key:"clear",value:function(){this.position_=0}},{key:"bytes",value:function(){return this.bytes_}},{key:"position",value:function(){return this.position_}},{key:"setPosition",value:function(t){this.position_=t}},{key:"capacity",value:function(){return this.bytes_.length}},{key:"readInt8",value:function(t){return this.readUint8(t)<<24>>24}},{key:"readUint8",value:function(t){return this.bytes_[t]}},{key:"readInt16",value:function(t){return this.readUint16(t)<<16>>16}},{key:"readUint16",value:function(t){return this.bytes_[t]|this.bytes_[t+1]<<8}},{key:"readInt32",value:function(t){return this.bytes_[t]|this.bytes_[t+1]<<8|this.bytes_[t+2]<<16|this.bytes_[t+3]<<24}},{key:"readUint32",value:function(t){return this.readInt32(t)>>>0}},{key:"readInt64",value:function(t){return BigInt.asIntN(64,BigInt(this.readUint32(t))+(BigInt(this.readUint32(t+4))<<BigInt(32)))}},{key:"readUint64",value:function(t){return BigInt.asUintN(64,BigInt(this.readUint32(t))+(BigInt(this.readUint32(t+4))<<BigInt(32)))}},{key:"readFloat32",value:function(t){return Zh[0]=this.readInt32(t),$h[0]}},{key:"readFloat64",value:function(t){return Zh[ep?0:1]=this.readInt32(t),Zh[ep?1:0]=this.readInt32(t+4),tp[0]}},{key:"writeInt8",value:function(t,e){this.bytes_[t]=e}},{key:"writeUint8",value:function(t,e){this.bytes_[t]=e}},{key:"writeInt16",value:function(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8}},{key:"writeUint16",value:function(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8}},{key:"writeInt32",value:function(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8,this.bytes_[t+2]=e>>16,this.bytes_[t+3]=e>>24}},{key:"writeUint32",value:function(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8,this.bytes_[t+2]=e>>16,this.bytes_[t+3]=e>>24}},{key:"writeInt64",value:function(t,e){this.writeInt32(t,Number(BigInt.asIntN(32,e))),this.writeInt32(t+4,Number(BigInt.asIntN(32,e>>BigInt(32))))}},{key:"writeUint64",value:function(t,e){this.writeUint32(t,Number(BigInt.asUintN(32,e))),this.writeUint32(t+4,Number(BigInt.asUintN(32,e>>BigInt(32))))}},{key:"writeFloat32",value:function(t,e){$h[0]=e,this.writeInt32(t,Zh[0])}},{key:"writeFloat64",value:function(t,e){tp[0]=e,this.writeInt32(t,Zh[ep?0:1]),this.writeInt32(t+4,Zh[ep?1:0])}},{key:"getBufferIdentifier",value:function(){if(this.bytes_.length<this.position_+4+4)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");for(var t="",e=0;e<4;e++)t+=String.fromCharCode(this.readInt8(this.position_+4+e));return t}},{key:"__offset",value:function(t,e){var r=t-this.readInt32(t);return e<this.readInt16(r)?this.readInt16(r+e):0}},{key:"__union",value:function(t,e){return t.bb_pos=e+this.readInt32(e),t.bb=this,t}},{key:"__string",value:function(t,e){t+=this.readInt32(t);var r=this.readInt32(t),n="",o=0;if(t+=4,e===Qh.UTF8_BYTES)return this.bytes_.subarray(t,t+r);for(;o<r;){var i=void 0,a=this.readUint8(t+o++);if(a<192)i=a;else{var s=this.readUint8(t+o++);if(a<224)i=(31&a)<<6|63&s;else{var u=this.readUint8(t+o++);if(a<240)i=(15&a)<<12|(63&s)<<6|63&u;else i=(7&a)<<18|(63&s)<<12|(63&u)<<6|63&this.readUint8(t+o++)}}i<65536?n+=String.fromCharCode(i):(i-=65536,n+=String.fromCharCode(55296+(i>>10),56320+(1023&i)))}return n}},{key:"__union_with_string",value:function(t,e){return"string"==typeof t?this.__string(e):this.__union(t,e)}},{key:"__indirect",value:function(t){return t+this.readInt32(t)}},{key:"__vector",value:function(t){return t+this.readInt32(t)+4}},{key:"__vector_len",value:function(t){return this.readInt32(t+this.readInt32(t))}},{key:"__has_identifier",value:function(t){if(4!=t.length)throw new Error("FlatBuffers: file identifier must be length 4");for(var e=0;e<4;e++)if(t.charCodeAt(e)!=this.readInt8(this.position()+4+e))return!1;return!0}},{key:"createScalarList",value:function(t,e){for(var r=[],n=0;n<e;++n)null!==t(n)&&r.push(t(n));return r}},{key:"createObjList",value:function(t,e){for(var r=[],n=0;n<e;++n){var o=t(n);null!==o&&r.push(o.unpack())}return r}}])&&np(e.prototype,r),n&&np(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,r,n}();function ap(t){"@babel/helpers - typeof";return(ap="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function sp(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,up(n.key),n)}}function up(t){var e=function(t,e){if("object"!=ap(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=ap(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ap(e)?e:e+""}var lp,cp=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.bb=null,this.bb_pos=0}return e=t,n=[{key:"getRootAsGeometry",value:function(e,r){return(r||new t).__init(e.readInt32(e.position())+e.position(),e)}},{key:"getSizePrefixedRootAsGeometry",value:function(e,r){return e.setPosition(e.position()+4),(r||new t).__init(e.readInt32(e.position())+e.position(),e)}},{key:"startGeometry",value:function(t){t.startObject(8)}},{key:"addEnds",value:function(t,e){t.addFieldOffset(0,e,0)}},{key:"createEndsVector",value:function(t,e){t.startVector(4,e.length,4);for(var r=e.length-1;r>=0;r--)t.addInt32(e[r]);return t.endVector()}},{key:"startEndsVector",value:function(t,e){t.startVector(4,e,4)}},{key:"addXy",value:function(t,e){t.addFieldOffset(1,e,0)}},{key:"createXyVector",value:function(t,e){t.startVector(8,e.length,8);for(var r=e.length-1;r>=0;r--)t.addFloat64(e[r]);return t.endVector()}},{key:"startXyVector",value:function(t,e){t.startVector(8,e,8)}},{key:"addZ",value:function(t,e){t.addFieldOffset(2,e,0)}},{key:"createZVector",value:function(t,e){t.startVector(8,e.length,8);for(var r=e.length-1;r>=0;r--)t.addFloat64(e[r]);return t.endVector()}},{key:"startZVector",value:function(t,e){t.startVector(8,e,8)}},{key:"addM",value:function(t,e){t.addFieldOffset(3,e,0)}},{key:"createMVector",value:function(t,e){t.startVector(8,e.length,8);for(var r=e.length-1;r>=0;r--)t.addFloat64(e[r]);return t.endVector()}},{key:"startMVector",value:function(t,e){t.startVector(8,e,8)}},{key:"addT",value:function(t,e){t.addFieldOffset(4,e,0)}},{key:"createTVector",value:function(t,e){t.startVector(8,e.length,8);for(var r=e.length-1;r>=0;r--)t.addFloat64(e[r]);return t.endVector()}},{key:"startTVector",value:function(t,e){t.startVector(8,e,8)}},{key:"addTm",value:function(t,e){t.addFieldOffset(5,e,0)}},{key:"createTmVector",value:function(t,e){t.startVector(8,e.length,8);for(var r=e.length-1;r>=0;r--)t.addInt64(e[r]);return t.endVector()}},{key:"startTmVector",value:function(t,e){t.startVector(8,e,8)}},{key:"addType",value:function(t,e){t.addFieldInt8(6,e,qh.Unknown)}},{key:"addParts",value:function(t,e){t.addFieldOffset(7,e,0)}},{key:"createPartsVector",value:function(t,e){t.startVector(4,e.length,4);for(var r=e.length-1;r>=0;r--)t.addOffset(e[r]);return t.endVector()}},{key:"startPartsVector",value:function(t,e){t.startVector(4,e,4)}},{key:"endGeometry",value:function(t){return t.endObject()}},{key:"createGeometry",value:function(e,r,n,o,i,a,s,u,l){return t.startGeometry(e),t.addEnds(e,r),t.addXy(e,n),t.addZ(e,o),t.addM(e,i),t.addT(e,a),t.addTm(e,s),t.addType(e,u),t.addParts(e,l),t.endGeometry(e)}}],(r=[{key:"__init",value:function(t,e){return this.bb_pos=t,this.bb=e,this}},{key:"ends",value:function(t){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readUint32(this.bb.__vector(this.bb_pos+e)+4*t):0}},{key:"endsLength",value:function(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__vector_len(this.bb_pos+t):0}},{key:"endsArray",value:function(){var t=this.bb.__offset(this.bb_pos,4);return t?new Uint32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}},{key:"xy",value:function(t){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readFloat64(this.bb.__vector(this.bb_pos+e)+8*t):0}},{key:"xyLength",value:function(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}},{key:"xyArray",value:function(){var t=this.bb.__offset(this.bb_pos,6);return t?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}},{key:"z",value:function(t){var e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readFloat64(this.bb.__vector(this.bb_pos+e)+8*t):0}},{key:"zLength",value:function(){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}},{key:"zArray",value:function(){var t=this.bb.__offset(this.bb_pos,8);return t?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}},{key:"m",value:function(t){var e=this.bb.__offset(this.bb_pos,10);return e?this.bb.readFloat64(this.bb.__vector(this.bb_pos+e)+8*t):0}},{key:"mLength",value:function(){var t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}},{key:"mArray",value:function(){var t=this.bb.__offset(this.bb_pos,10);return t?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}},{key:"t",value:function(t){var e=this.bb.__offset(this.bb_pos,12);return e?this.bb.readFloat64(this.bb.__vector(this.bb_pos+e)+8*t):0}},{key:"tLength",value:function(){var t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}},{key:"tArray",value:function(){var t=this.bb.__offset(this.bb_pos,12);return t?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}},{key:"tm",value:function(t){var e=this.bb.__offset(this.bb_pos,14);return e?this.bb.readUint64(this.bb.__vector(this.bb_pos+e)+8*t):BigInt(0)}},{key:"tmLength",value:function(){var t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__vector_len(this.bb_pos+t):0}},{key:"type",value:function(){var t=this.bb.__offset(this.bb_pos,16);return t?this.bb.readUint8(this.bb_pos+t):qh.Unknown}},{key:"parts",value:function(e,r){var n=this.bb.__offset(this.bb_pos,18);return n?(r||new t).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*e),this.bb):null}},{key:"partsLength",value:function(){var t=this.bb.__offset(this.bb_pos,18);return t?this.bb.__vector_len(this.bb_pos+t):0}}])&&sp(e.prototype,r),n&&sp(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,r,n}();function fp(t,e){for(var r=[],n=0;n<t.length;n+=2){var o=[t[n],t[n+1]];e&&o.push(e[n>>1]),r.push(o)}return r}function hp(t,e,r){if(!r||0===r.length)return[fp(t,e)];var n,o=0,i=Array.from(r).map(function(e){return t.slice(o,o=e<<1)});return e&&(o=0,n=Array.from(r).map(function(t){return e.slice(o,o=t)})),i.map(function(t,e){return fp(t,n?n[e]:void 0)})}function pp(t,e){var r=e;if(r===qh.Unknown&&(r=t.type()),r===qh.GeometryCollection){for(var n=[],o=0;o<t.partsLength();o++){var i=t.parts(o),a=i.type();n.push(pp(i,a))}return{type:qh[r],geometries:n}}if(r===qh.MultiPolygon){for(var s=[],u=0;u<t.partsLength();u++)s.push(pp(t.parts(u),qh.Polygon));return{type:qh[r],coordinates:s.map(function(t){return t.coordinates})}}var l=function(t,e){var r=t.xyArray(),n=t.zArray();switch(e){case qh.Point:var o=Array.from(r);return n&&o.push(n[0]),o;case qh.MultiPoint:case qh.LineString:return fp(r,n);case qh.MultiLineString:case qh.Polygon:return hp(r,n,t.endsArray())}}(t,r);return{type:qh[r],coordinates:l}}function dp(t){"@babel/helpers - typeof";return(dp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function yp(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,vp(n.key),n)}}function vp(t){var e=function(t,e){if("object"!=dp(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=dp(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==dp(e)?e:e+""}!function(t){t[t.Byte=0]="Byte",t[t.UByte=1]="UByte",t[t.Bool=2]="Bool",t[t.Short=3]="Short",t[t.UShort=4]="UShort",t[t.Int=5]="Int",t[t.UInt=6]="UInt",t[t.Long=7]="Long",t[t.ULong=8]="ULong",t[t.Float=9]="Float",t[t.Double=10]="Double",t[t.String=11]="String",t[t.Json=12]="Json",t[t.DateTime=13]="DateTime",t[t.Binary=14]="Binary"}(lp||(lp={}));var gp=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.bb=null,this.bb_pos=0}return e=t,n=[{key:"getRootAsColumn",value:function(e,r){return(r||new t).__init(e.readInt32(e.position())+e.position(),e)}},{key:"getSizePrefixedRootAsColumn",value:function(e,r){return e.setPosition(e.position()+4),(r||new t).__init(e.readInt32(e.position())+e.position(),e)}},{key:"startColumn",value:function(t){t.startObject(11)}},{key:"addName",value:function(t,e){t.addFieldOffset(0,e,0)}},{key:"addType",value:function(t,e){t.addFieldInt8(1,e,lp.Byte)}},{key:"addTitle",value:function(t,e){t.addFieldOffset(2,e,0)}},{key:"addDescription",value:function(t,e){t.addFieldOffset(3,e,0)}},{key:"addWidth",value:function(t,e){t.addFieldInt32(4,e,-1)}},{key:"addPrecision",value:function(t,e){t.addFieldInt32(5,e,-1)}},{key:"addScale",value:function(t,e){t.addFieldInt32(6,e,-1)}},{key:"addNullable",value:function(t,e){t.addFieldInt8(7,+e,1)}},{key:"addUnique",value:function(t,e){t.addFieldInt8(8,+e,0)}},{key:"addPrimaryKey",value:function(t,e){t.addFieldInt8(9,+e,0)}},{key:"addMetadata",value:function(t,e){t.addFieldOffset(10,e,0)}},{key:"endColumn",value:function(t){var e=t.endObject();return t.requiredField(e,4),e}},{key:"createColumn",value:function(e,r,n,o,i,a,s,u,l,c,f,h){return t.startColumn(e),t.addName(e,r),t.addType(e,n),t.addTitle(e,o),t.addDescription(e,i),t.addWidth(e,a),t.addPrecision(e,s),t.addScale(e,u),t.addNullable(e,l),t.addUnique(e,c),t.addPrimaryKey(e,f),t.addMetadata(e,h),t.endColumn(e)}}],(r=[{key:"__init",value:function(t,e){return this.bb_pos=t,this.bb=e,this}},{key:"name",value:function(t){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}},{key:"type",value:function(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readUint8(this.bb_pos+t):lp.Byte}},{key:"title",value:function(t){var e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__string(this.bb_pos+e,t):null}},{key:"description",value:function(t){var e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__string(this.bb_pos+e,t):null}},{key:"width",value:function(){var t=this.bb.__offset(this.bb_pos,12);return t?this.bb.readInt32(this.bb_pos+t):-1}},{key:"precision",value:function(){var t=this.bb.__offset(this.bb_pos,14);return t?this.bb.readInt32(this.bb_pos+t):-1}},{key:"scale",value:function(){var t=this.bb.__offset(this.bb_pos,16);return t?this.bb.readInt32(this.bb_pos+t):-1}},{key:"nullable",value:function(){var t=this.bb.__offset(this.bb_pos,18);return!t||!!this.bb.readInt8(this.bb_pos+t)}},{key:"unique",value:function(){var t=this.bb.__offset(this.bb_pos,20);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}},{key:"primaryKey",value:function(){var t=this.bb.__offset(this.bb_pos,22);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}},{key:"metadata",value:function(t){var e=this.bb.__offset(this.bb_pos,24);return e?this.bb.__string(this.bb_pos+e,t):null}}])&&yp(e.prototype,r),n&&yp(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,r,n}();function mp(t){"@babel/helpers - typeof";return(mp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function bp(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,wp(n.key),n)}}function wp(t){var e=function(t,e){if("object"!=mp(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=mp(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==mp(e)?e:e+""}var Sp=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.bb=null,this.bb_pos=0}return e=t,n=[{key:"getRootAsFeature",value:function(e,r){return(r||new t).__init(e.readInt32(e.position())+e.position(),e)}},{key:"getSizePrefixedRootAsFeature",value:function(e,r){return e.setPosition(e.position()+4),(r||new t).__init(e.readInt32(e.position())+e.position(),e)}},{key:"startFeature",value:function(t){t.startObject(3)}},{key:"addGeometry",value:function(t,e){t.addFieldOffset(0,e,0)}},{key:"addProperties",value:function(t,e){t.addFieldOffset(1,e,0)}},{key:"createPropertiesVector",value:function(t,e){t.startVector(1,e.length,1);for(var r=e.length-1;r>=0;r--)t.addInt8(e[r]);return t.endVector()}},{key:"startPropertiesVector",value:function(t,e){t.startVector(1,e,1)}},{key:"addColumns",value:function(t,e){t.addFieldOffset(2,e,0)}},{key:"createColumnsVector",value:function(t,e){t.startVector(4,e.length,4);for(var r=e.length-1;r>=0;r--)t.addOffset(e[r]);return t.endVector()}},{key:"startColumnsVector",value:function(t,e){t.startVector(4,e,4)}},{key:"endFeature",value:function(t){return t.endObject()}},{key:"finishFeatureBuffer",value:function(t,e){t.finish(e)}},{key:"finishSizePrefixedFeatureBuffer",value:function(t,e){t.finish(e,void 0,!0)}},{key:"createFeature",value:function(e,r,n,o){return t.startFeature(e),t.addGeometry(e,r),t.addProperties(e,n),t.addColumns(e,o),t.endFeature(e)}}],(r=[{key:"__init",value:function(t,e){return this.bb_pos=t,this.bb=e,this}},{key:"geometry",value:function(t){var e=this.bb.__offset(this.bb_pos,4);return e?(t||new cp).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}},{key:"properties",value:function(t){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readUint8(this.bb.__vector(this.bb_pos+e)+t):0}},{key:"propertiesLength",value:function(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}},{key:"propertiesArray",value:function(){var t=this.bb.__offset(this.bb_pos,6);return t?new Uint8Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}},{key:"columns",value:function(t,e){var r=this.bb.__offset(this.bb_pos,8);return r?(e||new gp).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+4*t),this.bb):null}},{key:"columnsLength",value:function(){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}}])&&bp(e.prototype,r),n&&bp(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,r,n}(),xp=(new TextEncoder,new TextDecoder);function _p(t,e){var r={};if(!e||0===e.length)return r;var n=t.propertiesArray();if(!n)return r;for(var o=new DataView(n.buffer,n.byteOffset),i=t.propertiesLength(),a=0;a<i;){var s=o.getUint16(a,!0);a+=2;var u=e[s],l=u.name;switch(u.type){case lp.Bool:r[l]=!!o.getUint8(a),a+=1;break;case lp.Byte:r[l]=o.getInt8(a),a+=1;break;case lp.UByte:r[l]=o.getUint8(a),a+=1;break;case lp.Short:r[l]=o.getInt16(a,!0),a+=2;break;case lp.UShort:r[l]=o.getUint16(a,!0),a+=2;break;case lp.Int:r[l]=o.getInt32(a,!0),a+=4;break;case lp.UInt:r[l]=o.getUint32(a,!0),a+=4;break;case lp.Long:r[l]=Number(o.getBigInt64(a,!0)),a+=8;break;case lp.ULong:r[l]=Number(o.getBigUint64(a,!0)),a+=8;break;case lp.Float:r[l]=o.getFloat32(a,!0),a+=4;break;case lp.Double:r[l]=o.getFloat64(a,!0),a+=8;break;case lp.DateTime:case lp.String:var c=o.getUint32(a,!0);a+=4,r[l]=xp.decode(n.subarray(a,a+c)),a+=c;break;case lp.Json:var f=o.getUint32(a,!0);a+=4;var h=xp.decode(n.subarray(a,a+f));r[l]=JSON.parse(h),a+=f;break;default:throw new Error("Unknown type "+u.type)}}return r}function Ep(t,e){var r=e.columns;return{type:"Feature",geometry:pp(t.geometry(),e.geometryType),properties:_p(t,r)}}var Op=new Uint8Array(0);function Pp(t){this._source=t,this._array=Op,this._index=0}function kp(t){"@babel/helpers - typeof";return(kp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Cp(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Tp(n.key),n)}}function Tp(t){var e=function(t,e){if("object"!=kp(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=kp(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==kp(e)?e:e+""}Pp.prototype.read=function(){var t=this,e=t._array.subarray(t._index);return t._source.read().then(function(r){return t._array=Op,t._index=0,r.done?e.length>0?{done:!1,value:e}:{done:!0,value:void 0}:{done:!1,value:function(t,e){if(!t.length)return e;if(!e.length)return t;var r=new Uint8Array(t.length+e.length);return r.set(t),r.set(e,t.length),r}(e,r.value)}})},Pp.prototype.slice=function(t){if((t|=0)<0)throw new Error("invalid length");var e=this,r=this._array.length-this._index;if(this._index+t<=this._array.length)return Promise.resolve(this._array.subarray(this._index,this._index+=t));var n=new Uint8Array(t);return n.set(this._array.subarray(this._index)),function o(){return e._source.read().then(function(i){return i.done?(e._array=Op,e._index=0,r>0?n.subarray(0,r):null):r+i.value.length>=t?(e._array=i.value,e._index=t-r,n.set(i.value.subarray(0,t-r),r),n):(n.set(i.value,r),r+=i.value.length,o())})}()},Pp.prototype.cancel=function(){return this._source.cancel()};var Ap=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.bb=null,this.bb_pos=0}return e=t,n=[{key:"getRootAsCrs",value:function(e,r){return(r||new t).__init(e.readInt32(e.position())+e.position(),e)}},{key:"getSizePrefixedRootAsCrs",value:function(e,r){return e.setPosition(e.position()+4),(r||new t).__init(e.readInt32(e.position())+e.position(),e)}},{key:"startCrs",value:function(t){t.startObject(6)}},{key:"addOrg",value:function(t,e){t.addFieldOffset(0,e,0)}},{key:"addCode",value:function(t,e){t.addFieldInt32(1,e,0)}},{key:"addName",value:function(t,e){t.addFieldOffset(2,e,0)}},{key:"addDescription",value:function(t,e){t.addFieldOffset(3,e,0)}},{key:"addWkt",value:function(t,e){t.addFieldOffset(4,e,0)}},{key:"addCodeString",value:function(t,e){t.addFieldOffset(5,e,0)}},{key:"endCrs",value:function(t){return t.endObject()}},{key:"createCrs",value:function(e,r,n,o,i,a,s){return t.startCrs(e),t.addOrg(e,r),t.addCode(e,n),t.addName(e,o),t.addDescription(e,i),t.addWkt(e,a),t.addCodeString(e,s),t.endCrs(e)}}],(r=[{key:"__init",value:function(t,e){return this.bb_pos=t,this.bb=e,this}},{key:"org",value:function(t){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}},{key:"code",value:function(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):0}},{key:"name",value:function(t){var e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__string(this.bb_pos+e,t):null}},{key:"description",value:function(t){var e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__string(this.bb_pos+e,t):null}},{key:"wkt",value:function(t){var e=this.bb.__offset(this.bb_pos,12);return e?this.bb.__string(this.bb_pos+e,t):null}},{key:"codeString",value:function(t){var e=this.bb.__offset(this.bb_pos,14);return e?this.bb.__string(this.bb_pos+e,t):null}}])&&Cp(e.prototype,r),n&&Cp(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,r,n}();function Mp(t){"@babel/helpers - typeof";return(Mp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function jp(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ip(n.key),n)}}function Ip(t){var e=function(t,e){if("object"!=Mp(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Mp(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Mp(e)?e:e+""}var Np=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.bb=null,this.bb_pos=0}return e=t,n=[{key:"getRootAsHeader",value:function(e,r){return(r||new t).__init(e.readInt32(e.position())+e.position(),e)}},{key:"getSizePrefixedRootAsHeader",value:function(e,r){return e.setPosition(e.position()+4),(r||new t).__init(e.readInt32(e.position())+e.position(),e)}},{key:"startHeader",value:function(t){t.startObject(14)}},{key:"addName",value:function(t,e){t.addFieldOffset(0,e,0)}},{key:"addEnvelope",value:function(t,e){t.addFieldOffset(1,e,0)}},{key:"createEnvelopeVector",value:function(t,e){t.startVector(8,e.length,8);for(var r=e.length-1;r>=0;r--)t.addFloat64(e[r]);return t.endVector()}},{key:"startEnvelopeVector",value:function(t,e){t.startVector(8,e,8)}},{key:"addGeometryType",value:function(t,e){t.addFieldInt8(2,e,qh.Unknown)}},{key:"addHasZ",value:function(t,e){t.addFieldInt8(3,+e,0)}},{key:"addHasM",value:function(t,e){t.addFieldInt8(4,+e,0)}},{key:"addHasT",value:function(t,e){t.addFieldInt8(5,+e,0)}},{key:"addHasTm",value:function(t,e){t.addFieldInt8(6,+e,0)}},{key:"addColumns",value:function(t,e){t.addFieldOffset(7,e,0)}},{key:"createColumnsVector",value:function(t,e){t.startVector(4,e.length,4);for(var r=e.length-1;r>=0;r--)t.addOffset(e[r]);return t.endVector()}},{key:"startColumnsVector",value:function(t,e){t.startVector(4,e,4)}},{key:"addFeaturesCount",value:function(t,e){t.addFieldInt64(8,e,BigInt("0"))}},{key:"addIndexNodeSize",value:function(t,e){t.addFieldInt16(9,e,16)}},{key:"addCrs",value:function(t,e){t.addFieldOffset(10,e,0)}},{key:"addTitle",value:function(t,e){t.addFieldOffset(11,e,0)}},{key:"addDescription",value:function(t,e){t.addFieldOffset(12,e,0)}},{key:"addMetadata",value:function(t,e){t.addFieldOffset(13,e,0)}},{key:"endHeader",value:function(t){return t.endObject()}},{key:"finishHeaderBuffer",value:function(t,e){t.finish(e)}},{key:"finishSizePrefixedHeaderBuffer",value:function(t,e){t.finish(e,void 0,!0)}}],(r=[{key:"__init",value:function(t,e){return this.bb_pos=t,this.bb=e,this}},{key:"name",value:function(t){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}},{key:"envelope",value:function(t){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readFloat64(this.bb.__vector(this.bb_pos+e)+8*t):0}},{key:"envelopeLength",value:function(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}},{key:"envelopeArray",value:function(){var t=this.bb.__offset(this.bb_pos,6);return t?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}},{key:"geometryType",value:function(){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readUint8(this.bb_pos+t):qh.Unknown}},{key:"hasZ",value:function(){var t=this.bb.__offset(this.bb_pos,10);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}},{key:"hasM",value:function(){var t=this.bb.__offset(this.bb_pos,12);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}},{key:"hasT",value:function(){var t=this.bb.__offset(this.bb_pos,14);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}},{key:"hasTm",value:function(){var t=this.bb.__offset(this.bb_pos,16);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}},{key:"columns",value:function(t,e){var r=this.bb.__offset(this.bb_pos,18);return r?(e||new gp).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+4*t),this.bb):null}},{key:"columnsLength",value:function(){var t=this.bb.__offset(this.bb_pos,18);return t?this.bb.__vector_len(this.bb_pos+t):0}},{key:"featuresCount",value:function(){var t=this.bb.__offset(this.bb_pos,20);return t?this.bb.readUint64(this.bb_pos+t):BigInt("0")}},{key:"indexNodeSize",value:function(){var t=this.bb.__offset(this.bb_pos,22);return t?this.bb.readUint16(this.bb_pos+t):16}},{key:"crs",value:function(t){var e=this.bb.__offset(this.bb_pos,24);return e?(t||new Ap).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}},{key:"title",value:function(t){var e=this.bb.__offset(this.bb_pos,26);return e?this.bb.__string(this.bb_pos+e,t):null}},{key:"description",value:function(t){var e=this.bb.__offset(this.bb_pos,28);return e?this.bb.__string(this.bb_pos+e,t):null}},{key:"metadata",value:function(t){var e=this.bb.__offset(this.bb_pos,30);return e?this.bb.__string(this.bb_pos+e,t):null}}])&&jp(e.prototype,r),n&&jp(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,r,n}();function Lp(t){for(var e=Np.getRootAsHeader(t),r=e.featuresCount(),n=e.indexNodeSize(),o=[],i=0;i<e.columnsLength();i++){var a=e.columns(i);if(!a)throw new Error("Column unexpectedly missing");if(!a.name())throw new Error("Column name unexpectedly missing");o.push({name:a.name(),type:a.type(),title:a.title(),description:a.description(),width:a.width(),precision:a.precision(),scale:a.scale(),nullable:a.nullable(),unique:a.unique(),primary_key:a.primaryKey()})}var s=e.crs(),u=s?{org:s.org(),code:s.code(),name:s.name(),description:s.description(),wkt:s.wkt(),code_string:s.codeString()}:null;return{geometryType:e.geometryType(),columns:o,envelope:null,featuresCount:Number(r),indexNodeSize:n,crs:u,title:e.title(),description:e.description(),metadata:e.metadata()}}var Rp=function(t,e){return(Rp=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};function Dp(t,e,r,n){return new(r||(r=Promise))(function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function s(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r(function(t){t(e)})).then(a,s)}u((n=n.apply(t,e||[])).next())})}function Bp(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}function Fp(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Gp(t){return this instanceof Gp?(this.v=t,this):new Gp(t)}function Up(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,o=r.apply(t,e||[]),i=[];return n={},a("next"),a("throw"),a("return"),n[Symbol.asyncIterator]=function(){return this},n;function a(t){o[t]&&(n[t]=function(e){return new Promise(function(r,n){i.push([t,e,r,n])>1||s(t,e)})})}function s(t,e){try{(r=o[t](e)).value instanceof Gp?Promise.resolve(r.value.v).then(u,l):c(i[0][2],r)}catch(t){c(i[0][3],t)}var r}function u(t){s("next",t)}function l(t){s("throw",t)}function c(t,e){t(e),i.shift(),i.length&&s(i[0][0],i[0][1])}}var zp=function(t){function e(e){var r=t.call(this,e)||this;return Object.defineProperty(r,"name",{value:"RepeaterOverflowError",enumerable:!1}),"function"==typeof Object.setPrototypeOf?Object.setPrototypeOf(r,r.constructor.prototype):r.__proto__=r.constructor.prototype,"function"==typeof Error.captureStackTrace&&Error.captureStackTrace(r,r.constructor),r}return function(t,e){function r(){this.constructor=t}Rp(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}(e,t),e}(Error);(function(){function t(t){if(t<0)throw new RangeError("Capacity may not be less than 0");this._c=t,this._q=[]}Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this._q.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"full",{get:function(){return this._q.length>=this._c},enumerable:!1,configurable:!0}),t.prototype.add=function(t){if(this.full)throw new Error("Buffer full");this._q.push(t)},t.prototype.remove=function(){if(this.empty)throw new Error("Buffer empty");return this._q.shift()}})(),function(){function t(t){if(t<1)throw new RangeError("Capacity may not be less than 1");this._c=t,this._q=[]}Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this._q.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"full",{get:function(){return!1},enumerable:!1,configurable:!0}),t.prototype.add=function(t){for(;this._q.length>=this._c;)this._q.shift();this._q.push(t)},t.prototype.remove=function(){if(this.empty)throw new Error("Buffer empty");return this._q.shift()}}(),function(){function t(t){if(t<1)throw new RangeError("Capacity may not be less than 1");this._c=t,this._q=[]}Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this._q.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"full",{get:function(){return!1},enumerable:!1,configurable:!0}),t.prototype.add=function(t){this._q.length<this._c&&this._q.push(t)},t.prototype.remove=function(){if(this.empty)throw new Error("Buffer empty");return this._q.shift()}}();function Vp(t){null!=t&&"function"==typeof t.then&&t.then(Kp,Kp)}var Hp=0,Wp=1,qp=2,Yp=3,Xp=4,Jp=1024,Kp=function(){};function Qp(t){var e=t.err,r=Promise.resolve(t.execution).then(function(t){if(null!=e)throw e;return t});return t.err=void 0,t.execution=r.then(function(){},function(){}),void 0===t.pending?r:t.pending.then(function(){return r})}function Zp(t,e){var r=t.state>=Yp;return Promise.resolve(e).then(function(e){return!r&&t.state>=Xp?Qp(t).then(function(t){return{value:t,done:!0}}):{value:e,done:r}})}function $p(t,e){var r,n;if(!(t.state>=qp))if(t.state=qp,t.onnext(),t.onstop(),null==t.err&&(t.err=e),0!==t.pushes.length||void 0!==t.buffer&&!t.buffer.empty)try{for(var o=Fp(t.pushes),i=o.next();!i.done;i=o.next()){i.value.resolve()}}catch(t){r={error:t}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}else td(t)}function td(t){var e,r;if(!(t.state>=Yp)){t.state<qp&&$p(t),t.state=Yp,t.buffer=void 0;try{for(var n=Fp(t.nexts),o=n.next();!o.done;o=n.next()){var i=o.value,a=void 0===t.pending?Qp(t):t.pending.then(function(){return Qp(t)});i.resolve(Zp(t,a))}}catch(t){e={error:t}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}t.pushes=[],t.nexts=[]}}function ed(t){t.state>=Xp||(t.state<Yp&&td(t),t.state=Xp)}function rd(t){if(!(t.state>=Wp)){t.state=Wp;var e=function(t,e){if(Vp(e),t.pushes.length>=Jp)throw new zp("No more than "+Jp+" pending calls to push are allowed on a single repeater.");if(t.state>=qp)return Promise.resolve(void 0);var r,n=void 0===t.pending?Promise.resolve(e):t.pending.then(function(){return e});n=n.catch(function(e){t.state<qp&&(t.err=e),ed(t)}),t.nexts.length?(t.nexts.shift().resolve(Zp(t,n)),r=t.nexts.length?Promise.resolve(t.nexts[0].value):new Promise(function(e){return t.onnext=e})):void 0===t.buffer||t.buffer.full?r=new Promise(function(e){return t.pushes.push({resolve:e,value:n})}):(t.buffer.add(n),r=Promise.resolve(void 0));var o=!0,i={},a=r.catch(function(t){if(o)throw t});return i.then=function(t,e){return o=!1,Promise.prototype.then.call(r,t,e)},i.catch=function(t){return o=!1,Promise.prototype.catch.call(r,t)},i.finally=r.finally.bind(r),t.pending=n.then(function(){return a}).catch(function(e){t.err=e,ed(t)}),i}.bind(null,t),r=function(t){var e=$p.bind(null,t),r=new Promise(function(e){return t.onstop=e});return e.then=r.then.bind(r),e.catch=r.catch.bind(r),e.finally=r.finally.bind(r),e}(t);t.execution=new Promise(function(n){return n(t.executor(e,r))}),t.execution.catch(function(){return $p(t)})}}var nd=new WeakMap,od=function(){function t(t,e){nd.set(this,{executor:t,buffer:e,err:void 0,state:Hp,pushes:[],nexts:[],pending:void 0,execution:void 0,onnext:Kp,onstop:Kp})}return t.prototype.next=function(t){Vp(t);var e=nd.get(this);if(void 0===e)throw new Error("WeakMap error");if(e.nexts.length>=Jp)throw new zp("No more than "+Jp+" pending calls to next are allowed on a single repeater.");if(e.state<=Hp&&rd(e),e.onnext(t),void 0!==e.buffer&&!e.buffer.empty){var r=Zp(e,e.buffer.remove());if(e.pushes.length){var n=e.pushes.shift();e.buffer.add(n.value),e.onnext=n.resolve}return r}if(e.pushes.length){var o=e.pushes.shift();return e.onnext=o.resolve,Zp(e,o.value)}return e.state>=qp?(td(e),Zp(e,Qp(e))):new Promise(function(r){return e.nexts.push({resolve:r,value:t})})},t.prototype.return=function(t){Vp(t);var e=nd.get(this);if(void 0===e)throw new Error("WeakMap error");return td(e),e.execution=Promise.resolve(e.execution).then(function(){return t}),Zp(e,Qp(e))},t.prototype.throw=function(t){var e=nd.get(this);if(void 0===e)throw new Error("WeakMap error");return e.state<=Hp||e.state>=qp||void 0!==e.buffer&&!e.buffer.empty?(td(e),null==e.err&&(e.err=t),Zp(e,Qp(e))):this.next(Promise.reject(t))},t.prototype[Symbol.asyncIterator]=function(){return this},t.race=ad,t.merge=sd,t.zip=ud,t.latest=ld,t}();function id(t,e){var r,n,o=[],i=function(t){null!=t&&"function"==typeof t[Symbol.asyncIterator]?o.push(t[Symbol.asyncIterator]()):null!=t&&"function"==typeof t[Symbol.iterator]?o.push(t[Symbol.iterator]()):o.push(function(){return Up(this,arguments,function(){return Bp(this,function(r){switch(r.label){case 0:return e.yieldValues?[4,Gp(t)]:[3,3];case 1:return[4,r.sent()];case 2:r.sent(),r.label=3;case 3:return e.returnValues?[4,Gp(t)]:[3,5];case 4:return[2,r.sent()];case 5:return[2]}})})}())};try{for(var a=Fp(t),s=a.next();!s.done;s=a.next()){i(s.value)}}catch(t){r={error:t}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}return o}function ad(t){var e=this,r=id(t,{returnValues:!0});return new od(function(t,n){return Dp(e,void 0,void 0,function(){var e,o,i,a,s,u;return Bp(this,function(l){switch(l.label){case 0:if(!r.length)return n(),[2];o=!1,n.then(function(){e(),o=!0}),l.label=1;case 1:l.trys.push([1,,5,7]),a=void 0,s=0,u=function(){var o,u,l,c,f,h;return Bp(this,function(p){switch(p.label){case 0:o=s;try{for(f=void 0,u=Fp(r),l=u.next();!l.done;l=u.next())c=l.value,Promise.resolve(c.next()).then(function(t){t.done?(n(),void 0===i&&(i=t)):s===o&&(s++,e(t))},function(t){return n(t)})}catch(t){f={error:t}}finally{try{l&&!l.done&&(h=u.return)&&h.call(u)}finally{if(f)throw f.error}}return[4,new Promise(function(t){return e=t})];case 1:return void 0===(a=p.sent())?[3,3]:[4,t(a.value)];case 2:p.sent(),p.label=3;case 3:return[2]}})},l.label=2;case 2:return o?[3,4]:[5,u()];case 3:return l.sent(),[3,2];case 4:return[2,i&&i.value];case 5:return n(),[4,Promise.race(r.map(function(t){return t.return&&t.return()}))];case 6:return l.sent(),[7];case 7:return[2]}})})})}function sd(t){var e=this,r=id(t,{yieldValues:!0});return new od(function(t,n){return Dp(e,void 0,void 0,function(){var e,o,i,a=this;return Bp(this,function(s){switch(s.label){case 0:if(!r.length)return n(),[2];e=[],o=!1,n.then(function(){var t,r;o=!0;try{for(var n=Fp(e),i=n.next();!i.done;i=n.next()){(0,i.value)()}}catch(e){t={error:e}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(t)throw t.error}}}),s.label=1;case 1:return s.trys.push([1,,3,4]),[4,Promise.all(r.map(function(r,s){return Dp(a,void 0,void 0,function(){var a;return Bp(this,function(u){switch(u.label){case 0:u.trys.push([0,,6,9]),u.label=1;case 1:return o?[3,5]:(Promise.resolve(r.next()).then(function(t){return e[s](t)},function(t){return n(t)}),[4,new Promise(function(t){e[s]=t})]);case 2:return void 0===(a=u.sent())?[3,4]:a.done?(i=a,[2]):[4,t(a.value)];case 3:u.sent(),u.label=4;case 4:return[3,1];case 5:return[3,9];case 6:return r.return?[4,r.return()]:[3,8];case 7:u.sent(),u.label=8;case 8:return[7];case 9:return[2]}})})}))];case 2:return s.sent(),[2,i&&i.value];case 3:return n(),[7];case 4:return[2]}})})})}function ud(t){var e=this,r=id(t,{returnValues:!0});return new od(function(t,n){return Dp(e,void 0,void 0,function(){var e,o,i,a;return Bp(this,function(s){switch(s.label){case 0:if(!r.length)return n(),[2,[]];o=!1,n.then(function(){e(),o=!0}),s.label=1;case 1:s.trys.push([1,,6,8]),s.label=2;case 2:return o?[3,5]:(Promise.all(r.map(function(t){return t.next()})).then(function(t){return e(t)},function(t){return n(t)}),[4,new Promise(function(t){return e=t})]);case 3:return void 0===(i=s.sent())?[2]:(a=i.map(function(t){return t.value}),i.some(function(t){return t.done})?[2,a]:[4,t(a)]);case 4:return s.sent(),[3,2];case 5:return[3,8];case 6:return n(),[4,Promise.all(r.map(function(t){return t.return&&t.return()}))];case 7:return s.sent(),[7];case 8:return[2]}})})})}function ld(t){var e=this,r=id(t,{yieldValues:!0,returnValues:!0});return new od(function(t,n){return Dp(e,void 0,void 0,function(){var e,o,i,a,s,u=this;return Bp(this,function(l){switch(l.label){case 0:if(!r.length)return n(),[2,[]];o=[],i=!1,n.then(function(){var t,r;e();try{for(var n=Fp(o),a=n.next();!a.done;a=n.next()){(0,a.value)()}}catch(e){t={error:e}}finally{try{a&&!a.done&&(r=n.return)&&r.call(n)}finally{if(t)throw t.error}}i=!0}),l.label=1;case 1:return l.trys.push([1,,5,7]),Promise.all(r.map(function(t){return t.next()})).then(function(t){return e(t)},function(t){return n(t)}),[4,new Promise(function(t){return e=t})];case 2:return void 0===(a=l.sent())?[2]:(s=a.map(function(t){return t.value}),a.every(function(t){return t.done})?[2,s]:[4,t(s.slice())]);case 3:return l.sent(),[4,Promise.all(r.map(function(e,r){return Dp(u,void 0,void 0,function(){var u;return Bp(this,function(l){switch(l.label){case 0:if(a[r].done)return[2,a[r].value];l.label=1;case 1:return i?[3,4]:(Promise.resolve(e.next()).then(function(t){return o[r](t)},function(t){return n(t)}),[4,new Promise(function(t){return o[r]=t})]);case 2:return void 0===(u=l.sent())?[2,a[r].value]:u.done?[2,u.value]:(s[r]=u.value,[4,t(s.slice())]);case 3:return l.sent(),[3,1];case 4:return[2]}})})}))];case 4:return[2,l.sent()];case 5:return n(),[4,Promise.all(r.map(function(t){return t.return&&t.return()}))];case 6:return l.sent(),[7];case 7:return[2]}})})})}function cd(t){"@babel/helpers - typeof";return(cd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function fd(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,hd(n.key),n)}}function hd(t){var e=function(t,e){if("object"!=cd(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=cd(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==cd(e)?e:e+""}var pd,dd=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._extraRequestThreshold=262144},(e=[{key:"extraRequestThreshold",value:function(){return this._extraRequestThreshold}},{key:"setExtraRequestThreshold",value:function(t){if(t<0)throw new Error("extraRequestThreshold cannot be negative");this._extraRequestThreshold=t}}])&&fd(t.prototype,e),r&&fd(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function yd(t){"@babel/helpers - typeof";return(yd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function vd(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,gd(n.key),n)}}function gd(t){var e=function(t,e){if("object"!=yd(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=yd(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==yd(e)?e:e+""}dd.global=new dd,function(t){t[t.Debug=0]="Debug",t[t.Info=1]="Info",t[t.Warn=2]="Warn",t[t.Error=3]="Error"}(pd||(pd={}));var md=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)},r=[{key:"debug",value:function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];this.log.apply(this,[pd.Debug].concat(e))}},{key:"info",value:function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];this.log.apply(this,[pd.Info].concat(e))}},{key:"warn",value:function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];this.log.apply(this,[pd.Warn].concat(e))}},{key:"error",value:function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];this.log.apply(this,[pd.Error].concat(e))}},{key:"log",value:function(t){if(!(this.logLevel>t)){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];switch(t){case pd.Debug:var o;(o=console).debug.apply(o,r);break;case pd.Info:var i;(i=console).info.apply(i,r);break;case pd.Warn:var a;(a=console).warn.apply(a,r);break;case pd.Error:var s;(s=console).error.apply(s,r)}}}}],(e=null)&&vd(t.prototype,e),r&&vd(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function bd(t){"@babel/helpers - typeof";return(bd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function wd(){wd=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var i=e&&e.prototype instanceof g?e:g,a=Object.create(i.prototype),s=new A(n||[]);return o(a,"_invoke",{value:P(t,r,s)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var h="suspendedStart",p="suspendedYield",d="executing",y="completed",v={};function g(){}function m(){}function b(){}var w={};l(w,a,function(){return this});var S=Object.getPrototypeOf,x=S&&S(S(M([])));x&&x!==r&&n.call(x,a)&&(w=x);var _=b.prototype=g.prototype=Object.create(w);function E(t){["next","throw","return"].forEach(function(e){l(t,e,function(t){return this._invoke(e,t)})})}function O(t,e){function r(o,i,a,s){var u=f(t[o],t,i);if("throw"!==u.type){var l=u.arg,c=l.value;return c&&"object"==bd(c)&&n.call(c,"__await")?e.resolve(c.__await).then(function(t){r("next",t,a,s)},function(t){r("throw",t,a,s)}):e.resolve(c).then(function(t){l.value=t,a(l)},function(t){return r("throw",t,a,s)})}s(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e(function(e,o){r(t,n,e,o)})}return i=i?i.then(o,o):o()}})}function P(e,r,n){var o=h;return function(i,a){if(o===d)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var u=k(s,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var l=f(e,r,n);if("normal"===l.type){if(o=n.done?y:p,l.arg===v)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=y,n.method="throw",n.arg=l.arg)}}}function k(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,k(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function T(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function A(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function M(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(bd(e)+" is not iterable")}return m.prototype=b,o(_,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:m,configurable:!0}),m.displayName=l(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,l(t,u,"GeneratorFunction")),t.prototype=Object.create(_),t},e.awrap=function(t){return{__await:t}},E(O.prototype),l(O.prototype,s,function(){return this}),e.AsyncIterator=O,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new O(c(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next()})},E(_),l(_,u,"Generator"),l(_,a,function(){return this}),l(_,"toString",function(){return"[object Generator]"}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=M,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(T),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),T(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;T(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:M(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function Sd(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,s=[],u=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(s.push(n.value),s.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return xd(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return xd(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xd(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function _d(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ed(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Od(n.key),n)}}function Od(t){var e=function(t,e){if("object"!=bd(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=bd(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==bd(e)?e:e+""}function Pd(t){var e,r;function n(e,r){try{var i=t[e](r),a=i.value,s=a instanceof kd;Promise.resolve(s?a.v:a).then(function(r){if(s){var u="return"===e?"return":"next";if(!a.k||r.done)return n(u,r);r=t[u](r).value}o(i.done?"return":"normal",r)},function(t){n("throw",t)})}catch(t){o("throw",t)}}function o(t,o){switch(t){case"return":e.resolve({value:o,done:!0});break;case"throw":e.reject(o);break;default:e.resolve({value:o,done:!1})}(e=e.next)?n(e.key,e.arg):r=null}this._invoke=function(t,o){return new Promise(function(i,a){var s={key:t,arg:o,resolve:i,reject:a,next:null};r?r=r.next=s:(e=r=s,n(t,o))})},"function"!=typeof t.return&&(this.return=void 0)}function kd(t,e){this.v=t,this.k=e}md.logLevel=pd.Info,Pd.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},Pd.prototype.next=function(t){return this._invoke("next",t)},Pd.prototype.throw=function(t){return this._invoke("throw",t)},Pd.prototype.return=function(t){return this._invoke("return",t)};var Cd=40;function Td(t,e){e=Math.min(Math.max(+e,2),65535);var r=t,n=r;do{n+=r=Math.ceil(r/e)}while(1!==r);return n*Cd}function Ad(t,e){if(e<2)throw new Error("Node size must be at least 2");if(0===t)throw new Error("Number of items must be greater than 0");var r=t,n=r,o=[r];do{n+=r=Math.ceil(r/e),o.push(r)}while(1!==r);var i=[];r=n;for(var a=0,s=o;a<s.length;a++){var u=s[a];i.push(r-u),r-=u}i.reverse(),o.reverse();for(var l=[],c=0;c<o.length;c++)l.push([i[c],i[c]+o[c]]);return l.reverse(),l}function Md(t,e,r,n){return jd.apply(this,arguments)}function jd(){var t;return t=wd().mark(function t(e,r,n,o){var i,a,s,u,l,c,f,h,p,d;return wd().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:i=function(){return t=function t(e,r){_d(this,t),this._level=r,this.nodes=e},(e=[{key:"level",value:function(){return this._level}},{key:"startNode",value:function(){return this.nodes[0]}},{key:"endNode",value:function(){return this.nodes[1]}},{key:"extendEndNodeToNewOffset",value:function(t){console.assert(t>this.nodes[1]),this.nodes[1]=t}},{key:"toString",value:function(){return"[NodeRange level: ".concat(this._level,", nodes: ").concat(this.nodes[0],"-").concat(this.nodes[1],"]")}}])&&Ed(t.prototype,e),r&&Ed(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}(),a=n.minX,s=n.minY,u=n.maxX,l=n.maxY,md.info("tree items: ".concat(e,", nodeSize: ").concat(r)),c=Ad(e,r),f=c[0][0],void 0,y=c.length-1,h=new i([0,1],y),p=[h],md.debug("starting stream search with queue: ".concat(p,", numItems: ").concat(e,", nodeSize: ").concat(r,", levelBounds: ").concat(c)),d=wd().mark(function t(){var n,h,d,y,v,g,m,b,w,S,x,_;return wd().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=p.shift(),md.debug("popped node: ".concat(n,", queueLength: ").concat(p.length)),h=n.startNode(),d=h>=f,y=Sd(c[n.level()],2),v=y[1],g=Math.min(n.endNode()+r,v),m=g-h,t.next=9,new kd(o(h*Cd,m*Cd),0);case 9:b=t.sent,w=new Float64Array(b),S=new Uint32Array(b),x=wd().mark(function t(r){var o,c,y,v,g,m,b,x;return wd().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(u<w[(o=5*(r-h))+0])){t.next=3;break}return t.abrupt("return",0);case 3:if(!(l<w[o+1])){t.next=5;break}return t.abrupt("return",0);case 5:if(!(a>w[o+2])){t.next=7;break}return t.abrupt("return",0);case 7:if(!(s>w[o+3])){t.next=9;break}return t.abrupt("return",0);case 9:if(c=S[8+(o<<1)],y=S[9+(o<<1)],v=Id(y,c),!d){t.next=17;break}return g=function(){if(r<e-1){var t=5*(r-h+1),n=S[8+(t<<1)];return Id(S[9+(t<<1)],n)-v}return null}(),t.next=16,[v,r-f,g];case 16:return t.abrupt("return",0);case 17:if(m=dd.global.extraRequestThreshold()/Cd,!(void 0!==(b=p[p.length-1])&&b.level()==n.level()-1&&v<b.endNode()+m)){t.next=23;break}return md.debug('Merging "nodeRange" request into existing range: '.concat(b,", newOffset: ").concat(b.endNode()," -> ").concat(v)),b.extendEndNodeToNewOffset(v),t.abrupt("return",0);case 23:void 0,_=n.level()-1,x=new i([v,v+1],_),void 0!==b&&b.level()==x.level()?md.info("Same level, but too far away. Pushing new request at offset: ".concat(v," rather than merging with distant ").concat(b)):md.info("Pushing new level for ".concat(x," onto queue with nearestNodeRange: ").concat(b," since there's not already a range for this level.")),p.push(x);case 26:case"end":return t.stop()}var _},t)}),_=h;case 14:if(!(_<g)){t.next=22;break}return t.delegateYield(x(_),"t0",16);case 16:if(0!==t.t0){t.next=19;break}return t.abrupt("continue",19);case 19:_++,t.next=14;break;case 22:case"end":return t.stop()}},t)});case 9:if(0==p.length){t.next=13;break}return t.delegateYield(d(),"t0",11);case 11:t.next=9;break;case 13:case"end":return t.stop()}var y},t)}),(jd=function(){return new Pd(t.apply(this,arguments))}).apply(this,arguments)}function Id(t,e){if(0!=(4293918720&t))throw Error("integer is too large to be safely represented");return e+t*Math.pow(2,32)}var Nd=new Uint8Array([102,103,98,3,102,103,98,0]),Ld=4;function Rd(t){"@babel/helpers - typeof";return(Rd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Dd(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=Fd(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){s=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function Bd(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,s=[],u=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(s.push(n.value),s.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(t,e)||Fd(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Fd(t,e){if(t){if("string"==typeof t)return Gd(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Gd(t,e):void 0}}function Gd(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Ud(){Ud=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var i=e&&e.prototype instanceof g?e:g,a=Object.create(i.prototype),s=new A(n||[]);return o(a,"_invoke",{value:P(t,r,s)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var h="suspendedStart",p="suspendedYield",d="executing",y="completed",v={};function g(){}function m(){}function b(){}var w={};l(w,a,function(){return this});var S=Object.getPrototypeOf,x=S&&S(S(M([])));x&&x!==r&&n.call(x,a)&&(w=x);var _=b.prototype=g.prototype=Object.create(w);function E(t){["next","throw","return"].forEach(function(e){l(t,e,function(t){return this._invoke(e,t)})})}function O(t,e){function r(o,i,a,s){var u=f(t[o],t,i);if("throw"!==u.type){var l=u.arg,c=l.value;return c&&"object"==Rd(c)&&n.call(c,"__await")?e.resolve(c.__await).then(function(t){r("next",t,a,s)},function(t){r("throw",t,a,s)}):e.resolve(c).then(function(t){l.value=t,a(l)},function(t){return r("throw",t,a,s)})}s(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e(function(e,o){r(t,n,e,o)})}return i=i?i.then(o,o):o()}})}function P(e,r,n){var o=h;return function(i,a){if(o===d)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var u=k(s,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var l=f(e,r,n);if("normal"===l.type){if(o=n.done?y:p,l.arg===v)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=y,n.method="throw",n.arg=l.arg)}}}function k(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,k(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function T(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function A(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function M(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(Rd(e)+" is not iterable")}return m.prototype=b,o(_,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:m,configurable:!0}),m.displayName=l(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,l(t,u,"GeneratorFunction")),t.prototype=Object.create(_),t},e.awrap=function(t){return{__await:t}},E(O.prototype),l(O.prototype,s,function(){return this}),e.AsyncIterator=O,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new O(c(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next()})},E(_),l(_,u,"Generator"),l(_,a,function(){return this}),l(_,"toString",function(){return"[object Generator]"}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=M,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(T),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),T(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;T(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:M(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function zd(t,e,r,n,o,i,a){try{var s=t[i](a),u=s.value}catch(t){return void r(t)}s.done?e(u):Promise.resolve(u).then(n,o)}function Vd(t){return function(){var e=this,r=arguments;return new Promise(function(n,o){var i=t.apply(e,r);function a(t){zd(i,n,o,a,s,"next",t)}function s(t){zd(i,n,o,a,s,"throw",t)}a(void 0)})}}function Hd(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Wd(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Yd(n.key),n)}}function qd(t,e,r){return e&&Wd(t.prototype,e),r&&Wd(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Yd(t){var e=function(t,e){if("object"!=Rd(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Rd(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Rd(e)?e:e+""}function Xd(t){return function(){return new Jd(t.apply(this,arguments))}}function Jd(t){var e,r;function n(e,r){try{var i=t[e](r),a=i.value,s=a instanceof Zd;Promise.resolve(s?a.v:a).then(function(r){if(s){var u="return"===e?"return":"next";if(!a.k||r.done)return n(u,r);r=t[u](r).value}o(i.done?"return":"normal",r)},function(t){n("throw",t)})}catch(t){o("throw",t)}}function o(t,o){switch(t){case"return":e.resolve({value:o,done:!0});break;case"throw":e.reject(o);break;default:e.resolve({value:o,done:!1})}(e=e.next)?n(e.key,e.arg):r=null}this._invoke=function(t,o){return new Promise(function(i,a){var s={key:t,arg:o,resolve:i,reject:a,next:null};r?r=r.next=s:(e=r=s,n(t,o))})},"function"!=typeof t.return&&(this.return=void 0)}function Kd(t){return new Zd(t,0)}function Qd(t){var e={},r=!1;function n(e,n){return r=!0,{done:!1,value:new Zd(n=new Promise(function(r){r(t[e](n))}),1)}}return e["undefined"!=typeof Symbol&&Symbol.iterator||"@@iterator"]=function(){return this},e.next=function(t){return r?(r=!1,t):n("next",t)},"function"==typeof t.throw&&(e.throw=function(t){if(r)throw r=!1,t;return n("throw",t)}),"function"==typeof t.return&&(e.return=function(t){return r?(r=!1,t):n("return",t)}),e}function Zd(t,e){this.v=t,this.k=e}function $d(t){var e,r,n,o=2;for("undefined"!=typeof Symbol&&(r=Symbol.asyncIterator,n=Symbol.iterator);o--;){if(r&&null!=(e=t[r]))return e.call(t);if(n&&null!=(e=t[n]))return new ty(e.call(t));r="@@asyncIterator",n="@@iterator"}throw new TypeError("Object is not async iterable")}function ty(t){function e(t){if(Object(t)!==t)return Promise.reject(new TypeError(t+" is not an object."));var e=t.done;return Promise.resolve(t.value).then(function(t){return{value:t,done:e}})}return(ty=function(t){this.s=t,this.n=t.next}).prototype={s:null,n:null,next:function(){return e(this.n.apply(this.s,arguments))},return:function(t){var r=this.s.return;return void 0===r?Promise.resolve({value:t,done:!0}):e(r.apply(this.s,arguments))},throw:function(t){var r=this.s.return;return void 0===r?Promise.reject(t):e(r.apply(this.s,arguments))}},new ty(t)}Jd.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},Jd.prototype.next=function(t){return this._invoke("next",t)},Jd.prototype.throw=function(t){return this._invoke("throw",t)},Jd.prototype.return=function(t){return this._invoke("return",t)};var ey=function(){function t(e,r,n,o){Hd(this,t),this.headerClient=e,this.header=r,this.headerLength=n,this.indexLength=o}return qd(t,[{key:"selectBbox",value:function(t){var e=this;return Xd(Ud().mark(function r(){var n,o,i,a,s,u,l,c,f,h,p,d,y,v,g,m,b,w,S;return Ud().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:n=e.lengthBeforeTree(),o=e.headerClient,i=function(){var t=Vd(Ud().mark(function t(e,r){var i;return Ud().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i=0,t.abrupt("return",o.getRange(n+e,r,i,"index"));case 2:case"end":return t.stop()}},t)}));return function(e,r){return t.apply(this,arguments)}}(),a=[],s=[],u=!1,l=!1,r.prev=7,f=$d(Md(e.header.featuresCount,e.header.indexNodeSize,t,i));case 9:return r.next=11,Kd(f.next());case 11:if(!(u=!(h=r.sent).done)){r.next=26;break}if(p=h.value,d=Bd(p,2),y=d[0],v=Bd(p,3),(g=v[2])||(md.info("final feature"),m=dd.global.extraRequestThreshold(),g=m),0!=s.length){r.next=19;break}return s.push([y,g]),r.abrupt("continue",23);case 19:b=s[s.length-1],(w=y-(b[0]+b[1]))>dd.global.extraRequestThreshold()&&(md.info("Pushing new feature batch, since gap ".concat(w," was too large")),a.push(s),s=[]),s.push([y,g]);case 23:u=!1,r.next=9;break;case 26:r.next=32;break;case 28:r.prev=28,r.t0=r.catch(7),l=!0,c=r.t0;case 32:if(r.prev=32,r.prev=33,!u||null==f.return){r.next=37;break}return r.next=37,Kd(f.return());case 37:if(r.prev=37,!l){r.next=40;break}throw c;case 40:return r.finish(37);case 41:return r.finish(32);case 42:return e.headerClient.logUsage("header+index"),s.length>0&&a.push(s),S=a.flatMap(function(t){return e.readFeatureBatch(t)}),r.delegateYield(Qd($d(od.merge(S))),"t1",46);case 46:case"end":return r.stop()}},r,null,[[7,28,32,42],[33,,37,41]])}))()}},{key:"lengthBeforeTree",value:function(){return Nd.length+Ld+this.headerLength}},{key:"lengthBeforeFeatures",value:function(){return this.lengthBeforeTree()+this.indexLength}},{key:"buildFeatureClient",value:function(){return new ry(this.headerClient.httpClient)}},{key:"readFeatureBatch",value:function(t){var e=this;return Xd(Ud().mark(function r(){var n,o,i,a,s,u,l,c,f,h,p;return Ud().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:n=Bd(t[0],1),o=n[0],i=Bd(t[t.length-1],2),a=i[0],s=i[1],u=a+s-o,l=e.buildFeatureClient(),c=Dd(t),r.prev=7,c.s();case 9:if((f=c.n()).done){r.next=17;break}return h=Bd(f.value,1),p=h[0],r.next=13,Kd(e.readFeature(l,p,u));case 13:return r.next=15,r.sent;case 15:r.next=9;break;case 17:r.next=22;break;case 19:r.prev=19,r.t0=r.catch(7),c.e(r.t0);case 22:return r.prev=22,c.f(),r.finish(22);case 25:l.logUsage("feature");case 26:case"end":return r.stop()}},r,null,[[7,19,22,25]])}))()}},{key:"readFeature",value:function(){var t=Vd(Ud().mark(function t(e,r,n){var o,i,a,s,u,l,c;return Ud().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return o=r+this.lengthBeforeFeatures(),t.next=3,e.getRange(o,4,n,"feature length");case 3:return a=t.sent,i=new DataView(a).getUint32(0,!0),t.next=7,e.getRange(o+4,i,n,"feature data");case 7:return s=t.sent,u=new Uint8Array(s),(l=new Uint8Array(i+Ld)).set(u,Ld),(c=new ip(l)).setPosition(Ld),t.abrupt("return",Sp.getRootAsFeature(c));case 14:case"end":return t.stop()}},t,this)}));return function(e,r,n){return t.apply(this,arguments)}}()}],[{key:"open",value:function(){var e=Vd(Ud().mark(function e(r){var n,o,i,a,s,u,l,c,f,h,p;return Ud().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=2024,o=new ry(r),i=function(){var t,e=0;for(t=0;t<3;t++){e+=Math.pow(16,t)*Cd}return e}(),a=n+i,md.debug("fetching header. minReqLength: ".concat(a," (assumedHeaderLength: ").concat(n,", assumedIndexLength: ").concat(i,")")),e.t0=Uint8Array,e.next=8,o.getRange(0,8,a,"header");case 8:if(e.t1=e.sent,(s=new e.t0(e.t1)).subarray(0,3).every(function(t,e){return Nd[e]===t})){e.next=13;break}throw md.error("bytes: ".concat(s," != ").concat(Nd)),new Error("Not a FlatGeobuf file");case 13:return md.debug("magic bytes look good"),e.next=16,o.getRange(8,4,a,"header");case 16:if(l=e.sent,!((u=new DataView(l).getUint32(0,!0))>10485760||u<8)){e.next=21;break}throw new Error("Invalid header size");case 21:return md.debug("headerLength: ".concat(u)),e.next=24,o.getRange(12,u,a,"header");case 24:return c=e.sent,f=new ip(new Uint8Array(c)),h=Lp(f),p=Td(h.featuresCount,h.indexNodeSize),md.debug("completed: opening http reader"),e.abrupt("return",new t(o,h,u,p));case 30:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()}])}(),ry=function(){return qd(function t(e){Hd(this,t),this.bytesEverUsed=0,this.bytesEverFetched=0,this.buffer=new ArrayBuffer(0),this.head=0,this.httpClient="string"==typeof e?new ny(e):e},[{key:"getRange",value:function(){var t=Vd(Ud().mark(function t(e,r,n,o){var i,a,s;return Ud().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.bytesEverUsed+=r,i=e-this.head,a=i+r,!(i>=0&&a<=this.buffer.byteLength)){t.next=5;break}return t.abrupt("return",this.buffer.slice(i,a));case 5:return s=Math.max(r,n),this.bytesEverFetched+=s,md.debug("requesting for new Range: ".concat(e,"-").concat(e+r-1)),t.next=10,this.httpClient.getRange(e,s,o);case 10:return this.buffer=t.sent,this.head=e,t.abrupt("return",this.buffer.slice(0,r));case 13:case"end":return t.stop()}},t,this)}));return function(e,r,n,o){return t.apply(this,arguments)}}()},{key:"logUsage",value:function(t){var e=t.split(" ")[0],r=this.bytesEverUsed,n=this.bytesEverFetched,o=(100*r/n).toFixed(2);md.info("".concat(e," bytes used/requested: ").concat(r," / ").concat(n," = ").concat(o,"%"))}}])}(),ny=function(){return qd(function t(e){Hd(this,t),this.requestsEverMade=0,this.bytesEverRequested=0,this.url=e},[{key:"getRange",value:function(){var t=Vd(Ud().mark(function t(e,r,n){var o,i;return Ud().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.requestsEverMade+=1,this.bytesEverRequested+=r,o="bytes=".concat(e,"-").concat(e+r-1),md.info("request: #".concat(this.requestsEverMade,", purpose: ").concat(n,"), bytes: (this_request: ").concat(r,", ever: ").concat(this.bytesEverRequested,"), Range: ").concat(o)),t.next=6,fetch(this.url,{headers:{Range:o}});case 6:return i=t.sent,t.abrupt("return",i.arrayBuffer());case 8:case"end":return t.stop()}},t,this)}));return function(e,r,n){return t.apply(this,arguments)}}()}])}();function oy(t){"@babel/helpers - typeof";return(oy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function iy(){iy=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var i=e&&e.prototype instanceof g?e:g,a=Object.create(i.prototype),s=new A(n||[]);return o(a,"_invoke",{value:P(t,r,s)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var h="suspendedStart",p="suspendedYield",d="executing",y="completed",v={};function g(){}function m(){}function b(){}var w={};l(w,a,function(){return this});var S=Object.getPrototypeOf,x=S&&S(S(M([])));x&&x!==r&&n.call(x,a)&&(w=x);var _=b.prototype=g.prototype=Object.create(w);function E(t){["next","throw","return"].forEach(function(e){l(t,e,function(t){return this._invoke(e,t)})})}function O(t,e){function r(o,i,a,s){var u=f(t[o],t,i);if("throw"!==u.type){var l=u.arg,c=l.value;return c&&"object"==oy(c)&&n.call(c,"__await")?e.resolve(c.__await).then(function(t){r("next",t,a,s)},function(t){r("throw",t,a,s)}):e.resolve(c).then(function(t){l.value=t,a(l)},function(t){return r("throw",t,a,s)})}s(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e(function(e,o){r(t,n,e,o)})}return i=i?i.then(o,o):o()}})}function P(e,r,n){var o=h;return function(i,a){if(o===d)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var u=k(s,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var l=f(e,r,n);if("normal"===l.type){if(o=n.done?y:p,l.arg===v)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=y,n.method="throw",n.arg=l.arg)}}}function k(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,k(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function T(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function A(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function M(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(oy(e)+" is not iterable")}return m.prototype=b,o(_,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:m,configurable:!0}),m.displayName=l(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,l(t,u,"GeneratorFunction")),t.prototype=Object.create(_),t},e.awrap=function(t){return{__await:t}},E(O.prototype),l(O.prototype,s,function(){return this}),e.AsyncIterator=O,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new O(c(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next()})},E(_),l(_,u,"Generator"),l(_,a,function(){return this}),l(_,"toString",function(){return"[object Generator]"}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=M,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(T),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),T(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;T(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:M(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function ay(t,e,r,n,o,i,a){try{var s=t[i](a),u=s.value}catch(t){return void r(t)}s.done?e(u):Promise.resolve(u).then(n,o)}function sy(t){return function(){var e=this,r=arguments;return new Promise(function(n,o){var i=t.apply(e,r);function a(t){ay(i,n,o,a,s,"next",t)}function s(t){ay(i,n,o,a,s,"throw",t)}a(void 0)})}}function uy(t){var e,r,n,o=2;for("undefined"!=typeof Symbol&&(r=Symbol.asyncIterator,n=Symbol.iterator);o--;){if(r&&null!=(e=t[r]))return e.call(t);if(n&&null!=(e=t[n]))return new ly(e.call(t));r="@@asyncIterator",n="@@iterator"}throw new TypeError("Object is not async iterable")}function ly(t){function e(t){if(Object(t)!==t)return Promise.reject(new TypeError(t+" is not an object."));var e=t.done;return Promise.resolve(t.value).then(function(t){return{value:t,done:e}})}return(ly=function(t){this.s=t,this.n=t.next}).prototype={s:null,n:null,next:function(){return e(this.n.apply(this.s,arguments))},return:function(t){var r=this.s.return;return void 0===r?Promise.resolve({value:t,done:!0}):e(r.apply(this.s,arguments))},throw:function(t){var r=this.s.return;return void 0===r?Promise.reject(t):e(r.apply(this.s,arguments))}},new ly(t)}function cy(t){return new py(t,0)}function fy(t){return function(){return new hy(t.apply(this,arguments))}}function hy(t){var e,r;function n(e,r){try{var i=t[e](r),a=i.value,s=a instanceof py;Promise.resolve(s?a.v:a).then(function(r){if(s){var u="return"===e?"return":"next";if(!a.k||r.done)return n(u,r);r=t[u](r).value}o(i.done?"return":"normal",r)},function(t){n("throw",t)})}catch(t){o("throw",t)}}function o(t,o){switch(t){case"return":e.resolve({value:o,done:!0});break;case"throw":e.reject(o);break;default:e.resolve({value:o,done:!1})}(e=e.next)?n(e.key,e.arg):r=null}this._invoke=function(t,o){return new Promise(function(i,a){var s={key:t,arg:o,resolve:i,reject:a,next:null};r?r=r.next=s:(e=r=s,n(t,o))})},"function"!=typeof t.return&&(this.return=void 0)}function py(t,e){this.v=t,this.k=e}function dy(){return(dy=fy(iy().mark(function t(e,r,n){var o,i,a,s,u,l,c,f,h,p;return iy().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return o="function"==typeof(d=e).slice?d:new Pp("function"==typeof d.read?d:d.getReader()),i=function(){var t=sy(iy().mark(function t(e){return iy().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.slice(e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),t.t0=Uint8Array,t.next=5,cy(i(8,"magic bytes"));case 5:if(t.t1=t.sent,(a=new t.t0(t.t1)).subarray(0,3).every(function(t,e){return Nd[e]===t})){t.next=9;break}throw new Error("Not a FlatGeobuf file");case 9:return t.t2=Uint8Array,t.next=12,cy(i(4,"header length"));case 12:return t.t3=t.sent,a=new t.t2(t.t3),s=new ip(a),u=s.readUint32(0),t.t4=Uint8Array,t.next=19,cy(i(u,"header data"));case 19:if(t.t5=t.sent,a=new t.t4(t.t5),s=new ip(a),l=Lp(s),n&&n(l),c=l.indexNodeSize,f=l.featuresCount,!(c>0)){t.next=29;break}return h=Td(f,c),t.next=29,cy(i(h,"entire index, w/o rect"));case 29:return t.next=31,cy(vy(i,l,r));case 31:if(!(p=t.sent)){t.next=36;break}return t.next=34,p;case 34:t.next=29;break;case 36:case"end":return t.stop()}var d},t)}))).apply(this,arguments)}function yy(){return(yy=fy(iy().mark(function t(e,r,n,o){var i,a,s,u,l,c,f;return iy().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,cy(ey.open(e));case 2:i=t.sent,md.debug("opened reader"),o&&o(i.header),a=!1,s=!1,t.prev=7,l=uy(i.selectBbox(r));case 9:return t.next=11,cy(l.next());case 11:if(!(a=!(c=t.sent).done)){t.next=18;break}return f=c.value,t.next=15,n(f,i.header);case 15:a=!1,t.next=9;break;case 18:t.next=24;break;case 20:t.prev=20,t.t0=t.catch(7),s=!0,u=t.t0;case 24:if(t.prev=24,t.prev=25,!a||null==l.return){t.next=29;break}return t.next=29,cy(l.return());case 29:if(t.prev=29,!s){t.next=32;break}throw u;case 32:return t.finish(29);case 33:return t.finish(24);case 34:case"end":return t.stop()}},t,null,[[7,20,24,34],[25,,29,33]])}))).apply(this,arguments)}function vy(t,e,r){return gy.apply(this,arguments)}function gy(){return(gy=sy(iy().mark(function t(e,r,n){var o,i,a,s,u;return iy().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Uint8Array,t.next=3,e(4,"feature length");case 3:if(t.t1=t.sent,0!==(o=new t.t0(t.t1)).byteLength){t.next=7;break}return t.abrupt("return");case 7:return i=new ip(o),a=i.readUint32(0),t.t2=Uint8Array,t.next=12,e(a,"feature data");case 12:return t.t3=t.sent,o=new t.t2(t.t3),(s=new Uint8Array(a+4)).set(o,4),(i=new ip(s)).setPosition(Ld),u=Sp.getRootAsFeature(i),t.abrupt("return",n(u,r));case 20:case"end":return t.stop()}},t)}))).apply(this,arguments)}function my(t,e){return{type:"FeatureCollection",features:function(t,e,r){if(!t.subarray(0,3).every(function(t,e){return Nd[e]===t}))throw new Error("Not a FlatGeobuf file");var n=new ip(t),o=n.readUint32(Nd.length);n.setPosition(Nd.length+Ld);var i=Lp(n);r&&r(i);var a=Nd.length+Ld+o,s=i.indexNodeSize,u=i.featuresCount;s>0&&(a+=Td(u,s));for(var l=[];a<n.capacity();){var c=n.readUint32(a);n.setPosition(a+Ld);var f=Sp.getRootAsFeature(n);l.push(e(f,i)),a+=Ld+c}return l}(t,Ep,e)}}function by(t,e){return function(t,e,r){return dy.apply(this,arguments)}(t,Ep,e)}function wy(t,e,r){return function(t,e,r,n){return yy.apply(this,arguments)}(t,e,Ep,r)}function Sy(t,e,r){return t instanceof Uint8Array?my(t,r):t instanceof ReadableStream?by(t,r):wy(t,e,r)}hy.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},hy.prototype.next=function(t){return this._invoke("next",t)},hy.prototype.throw=function(t){return this._invoke("throw",t)},hy.prototype.return=function(t){return this._invoke("return",t)};var xy=r(3861),_y=r.n(xy);function Ey(t){"@babel/helpers - typeof";return(Ey="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Oy(){Oy=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var i=e&&e.prototype instanceof g?e:g,a=Object.create(i.prototype),s=new A(n||[]);return o(a,"_invoke",{value:P(t,r,s)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var h="suspendedStart",p="suspendedYield",d="executing",y="completed",v={};function g(){}function m(){}function b(){}var w={};l(w,a,function(){return this});var S=Object.getPrototypeOf,x=S&&S(S(M([])));x&&x!==r&&n.call(x,a)&&(w=x);var _=b.prototype=g.prototype=Object.create(w);function E(t){["next","throw","return"].forEach(function(e){l(t,e,function(t){return this._invoke(e,t)})})}function O(t,e){function r(o,i,a,s){var u=f(t[o],t,i);if("throw"!==u.type){var l=u.arg,c=l.value;return c&&"object"==Ey(c)&&n.call(c,"__await")?e.resolve(c.__await).then(function(t){r("next",t,a,s)},function(t){r("throw",t,a,s)}):e.resolve(c).then(function(t){l.value=t,a(l)},function(t){return r("throw",t,a,s)})}s(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e(function(e,o){r(t,n,e,o)})}return i=i?i.then(o,o):o()}})}function P(e,r,n){var o=h;return function(i,a){if(o===d)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var u=k(s,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var l=f(e,r,n);if("normal"===l.type){if(o=n.done?y:p,l.arg===v)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=y,n.method="throw",n.arg=l.arg)}}}function k(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,k(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function T(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function A(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function M(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(Ey(e)+" is not iterable")}return m.prototype=b,o(_,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:m,configurable:!0}),m.displayName=l(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,l(t,u,"GeneratorFunction")),t.prototype=Object.create(_),t},e.awrap=function(t){return{__await:t}},E(O.prototype),l(O.prototype,s,function(){return this}),e.AsyncIterator=O,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new O(c(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next()})},E(_),l(_,u,"Generator"),l(_,a,function(){return this}),l(_,"toString",function(){return"[object Generator]"}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=M,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(T),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),T(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;T(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:M(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function Py(t,e,r,n,o,i,a){try{var s=t[i](a),u=s.value}catch(t){return void r(t)}s.done?e(u):Promise.resolve(u).then(n,o)}function ky(t){return function(){var e=this,r=arguments;return new Promise(function(n,o){var i=t.apply(e,r);function a(t){Py(i,n,o,a,s,"next",t)}function s(t){Py(i,n,o,a,s,"throw",t)}a(void 0)})}}function Cy(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ty(n.key),n)}}function Ty(t){var e=function(t,e){if("object"!=Ey(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Ey(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Ey(e)?e:e+""}function Ay(t){var e,r,n,o=2;for("undefined"!=typeof Symbol&&(r=Symbol.asyncIterator,n=Symbol.iterator);o--;){if(r&&null!=(e=t[r]))return e.call(t);if(n&&null!=(e=t[n]))return new My(e.call(t));r="@@asyncIterator",n="@@iterator"}throw new TypeError("Object is not async iterable")}function My(t){function e(t){if(Object(t)!==t)return Promise.reject(new TypeError(t+" is not an object."));var e=t.done;return Promise.resolve(t.value).then(function(t){return{value:t,done:e}})}return(My=function(t){this.s=t,this.n=t.next}).prototype={s:null,n:null,next:function(){return e(this.n.apply(this.s,arguments))},return:function(t){var r=this.s.return;return void 0===r?Promise.resolve({value:t,done:!0}):e(r.apply(this.s,arguments))},throw:function(t){var r=this.s.return;return void 0===r?Promise.reject(t):e(r.apply(this.s,arguments))}},new My(t)}var jy={1:"circle",2:"line",3:"fill",5:"line",4:"circle",6:"fill",MultiPolygon:"fill",Point:"circle",MultiLineString:"line",MultiPoint:"circle",LineString:"line",Polygon:"fill"},Iy=function(){return t=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=e.layerID?e.layerID:W.createUniqueID("FGBLayer_"),this.layerId=this.id+"outer",this.sourceId=this.layerId,this.options=e,this.strategy=e.strategy||"bbox",this.url=e.url,this.layerType="",this.extent=e.extent,this.init()},(e=[{key:"init",value:function(){"bbox"===this.strategy&&(this.loadedExtentsRtree_=new(_y()))}},{key:"iterateFeatures",value:function(){var t=ky(Oy().mark(function t(e){var r,n,o,i,a,s,u;return Oy().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:r={type:"FeatureCollection",features:[]},n=!1,o=!1,t.prev=3,a=Ay(e);case 5:return t.next=7,a.next();case 7:if(!(n=!(s=t.sent).done)){t.next=15;break}u=s.value,this.options.featureLoader&&"function"==typeof this.options.featureLoader&&(u=this.options.featureLoader(u)),this.layerType||(this.layerType=jy[u.geometry.type]),r.features.push(u);case 12:n=!1,t.next=5;break;case 15:t.next=21;break;case 17:t.prev=17,t.t0=t.catch(3),o=!0,i=t.t0;case 21:if(t.prev=21,t.prev=22,!n||null==a.return){t.next=26;break}return t.next=26,a.return();case 26:if(t.prev=26,!o){t.next=29;break}throw i;case 29:return t.finish(26);case 30:return t.finish(21);case 31:return t.abrupt("return",r);case 32:case"end":return t.stop()}},t,this,[[3,17,21,31],[22,,26,30]])}));return function(e){return t.apply(this,arguments)}}()},{key:"_loadData",value:function(){var t=ky(Oy().mark(function t(e){var r,n,o=this;return Oy().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]},e.length){t.next=7;break}return t.next=4,this._getStream(this.url);case 4:r=t.sent,t.next=9;break;case 7:n.value={extent:e.slice()},this.loadedExtentsRtree_.insert(n);case 9:return t.next=11,Sy(r&&r.body||this.url,n,function(t){o.layerType=jy[t.geometryType]});case 11:return t.abrupt("return",t.sent);case 12:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"_getStream",value:function(){var t=ky(Oy().mark(function t(e){return Oy().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,tt.get(e,{},{withoutFormatSuffix:!0}).then(function(t){return t});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},{key:"_containsExtent",value:function(t,e){return t[0]<=e[0]&&e[2]<=t[2]&&t[1]<=e[1]&&e[3]<=t[3]}},{key:"_getInExtent",value:function(t){var e={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]};return this.loadedExtentsRtree_.search(e).map(function(t){return t.value})}},{key:"_forEachInExtent",value:function(t,e){return this._forEach(this._getInExtent(t),e)}},{key:"_forEach",value:function(t,e){for(var r,n=0,o=t.length;n<o;n++)if(r=e(t[n]))return r;return r}}])&&Cy(t.prototype,e),r&&Cy(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function Ny(t){"@babel/helpers - typeof";return(Ny="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ly(){Ly=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var i=e&&e.prototype instanceof g?e:g,a=Object.create(i.prototype),s=new A(n||[]);return o(a,"_invoke",{value:P(t,r,s)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var h="suspendedStart",p="suspendedYield",d="executing",y="completed",v={};function g(){}function m(){}function b(){}var w={};l(w,a,function(){return this});var S=Object.getPrototypeOf,x=S&&S(S(M([])));x&&x!==r&&n.call(x,a)&&(w=x);var _=b.prototype=g.prototype=Object.create(w);function E(t){["next","throw","return"].forEach(function(e){l(t,e,function(t){return this._invoke(e,t)})})}function O(t,e){function r(o,i,a,s){var u=f(t[o],t,i);if("throw"!==u.type){var l=u.arg,c=l.value;return c&&"object"==Ny(c)&&n.call(c,"__await")?e.resolve(c.__await).then(function(t){r("next",t,a,s)},function(t){r("throw",t,a,s)}):e.resolve(c).then(function(t){l.value=t,a(l)},function(t){return r("throw",t,a,s)})}s(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e(function(e,o){r(t,n,e,o)})}return i=i?i.then(o,o):o()}})}function P(e,r,n){var o=h;return function(i,a){if(o===d)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var u=k(s,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var l=f(e,r,n);if("normal"===l.type){if(o=n.done?y:p,l.arg===v)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=y,n.method="throw",n.arg=l.arg)}}}function k(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,k(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function T(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function A(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function M(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(Ny(e)+" is not iterable")}return m.prototype=b,o(_,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:m,configurable:!0}),m.displayName=l(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,l(t,u,"GeneratorFunction")),t.prototype=Object.create(_),t},e.awrap=function(t){return{__await:t}},E(O.prototype),l(O.prototype,s,function(){return this}),e.AsyncIterator=O,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new O(c(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next()})},E(_),l(_,u,"Generator"),l(_,a,function(){return this}),l(_,"toString",function(){return"[object Generator]"}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=M,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(T),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),T(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;T(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:M(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function Ry(t,e,r,n,o,i,a){try{var s=t[i](a),u=s.value}catch(t){return void r(t)}s.done?e(u):Promise.resolve(u).then(n,o)}function Dy(t){return function(){var e=this,r=arguments;return new Promise(function(n,o){var i=t.apply(e,r);function a(t){Ry(i,n,o,a,s,"next",t)}function s(t){Ry(i,n,o,a,s,"throw",t)}a(void 0)})}}function By(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Fy(n.key),n)}}function Fy(t){var e=function(t,e){if("object"!=Ny(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Ny(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Ny(e)?e:e+""}var Gy={circle:{"circle-radius":6,"circle-color":"#3fb1e3","circle-opacity":1,"circle-blur":0,"circle-translate":[0,0],"circle-stroke-width":0,"circle-stroke-color":"#000","circle-stroke-opacity":1},line:{"line-opacity":1,"line-color":"#3fb1e3","line-width":3,"line-blur":1},fill:{"fill-opacity":.8,"fill-color":"#3fb1e3","fill-translate":[0,0],"fill-antialias":!0,"fill-outline-color":"#3fb1e3"}},Uy=function(){return t=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=e.layerID?e.layerID:W.createUniqueID("FGBLayer_"),this.layerId=this.id+"outer",this.sourceId=this.layerId,this.options=e,this.strategy=e.strategy||"bbox",this.url=e.url,this.layerType="",this.extent=e.extent,this.overlay=!0,this.type="custom",this.renderingMode="3d",this._updateFeaturesFn=this._updateFeatures.bind(this)},(e=[{key:"onAdd",value:function(t){this.map=t;var e,r,n,o=[];if("bbox"===this.strategy){var i=this.map.getBounds().toArray();o=[i[0][0],i[0][1],i[1][0],i[1][1]],this.map.on("moveend",this._updateFeaturesFn)}if(this.extent){var a=(e=this.extent,n=[],function(t,e){return t[0]<=e[2]&&t[2]>=e[0]&&t[1]<=e[3]&&t[3]>=e[1]}(e,r=o)&&(e[0]>r[0]?n[0]=e[0]:n[0]=r[0],e[1]>r[1]?n[1]=e[1]:n[1]=r[1],e[2]<r[2]?n[2]=e[2]:n[2]=r[2],e[3]<r[3]?n[3]=e[3]:n[3]=r[3]),n);o=a&&a.length?a:this.extent}this.renderer=new Iy(this.options),this._handleFeatures(o)}},{key:"onRemove",value:function(){this.map.off("moveend",this._updateFeaturesFn)}},{key:"moveLayer",value:function(t){this.map.moveLayer(this.layerId,t)}},{key:"render",value:function(){}},{key:"setVisibility",value:function(t){var e=t?"visible":"none";this.map.setLayoutProperty(this.layerId,"visibility",e)}},{key:"_handleFeatures",value:function(){var t=Dy(Ly().mark(function t(e){var r,n,o;return Ly().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.renderer._loadData(e);case 2:return r=t.sent,t.next=5,this.renderer.iterateFeatures(r);case 5:n=t.sent,this.map.getSource(this.sourceId)?this.map.getSource(this.sourceId).setData(n):this.map.addSource(this.sourceId,{type:"geojson",data:n}),this.map.getLayer(this.layerId)||(this.layerType=this.renderer.layerType,o=Object.assign({id:this.layerId,type:this.layerType,source:this.sourceId,paint:Object.assign(Gy[this.layerType],this.options.paint)||{},layout:this.options.layout||{}}),this.map.addLayer(o));case 8:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"_updateFeatures",value:function(){var t=Dy(Ly().mark(function t(){var e,r,n,o,i=this;return Ly().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e=this.map.getBounds().toArray(),r=[e[0][0],e[0][1],e[1][0],e[1][1]],this.renderer._forEachInExtent(r,function(t){return i.renderer._containsExtent(t.extent,r)})){t.next=11;break}return t.next=6,this.renderer._loadData(r);case 6:return n=t.sent,t.next=9,this.renderer.iterateFeatures(n);case 9:o=t.sent,this.map.getSource(this.sourceId).setData(o);case 11:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()}])&&By(t.prototype,e),r&&By(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}(),zy=function(){try{return videojs}catch(t){return{}}}(),Vy=r.n(zy);(function(){try{flvjs}catch(t){return{}}})(),function(){try{}catch(t){return{}}}();function Hy(t){"@babel/helpers - typeof";return(Hy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Wy(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,qy(n.key),n)}}function qy(t){var e=function(t,e){if("object"!=Hy(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Hy(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Hy(e)?e:e+""}var Yy=function(){return t=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.options=e,this.url=e.url,this.layerId=e.id},(e=[{key:"_createVideoElement",value:function(){var t=document.createElement("video");t.id=this.layerId,t.className="video-js",t.style.position="fixed",t.style.left="-300%",t.setAttribute("crossorigin","anonymous"),document.body.appendChild(t)}},{key:"createVideo",value:function(){this._createVideoElement();var t=this._getVideoOptions();return this.video=Vy()(this.layerId,t,function(){}),this.video}},{key:"_getVideoOptions",value:function(){if(this.url){var t={autoplay:!0,muted:!0};return t.loop=!1!==this.loop,this.url.includes("mp4")?t.sources=[{src:this.url,type:"video/mp4"}]:this.url.includes("flv")?t={autoplay:this.autoplay,techOrder:["html5","flvjs"],flvjs:{mediaDataSource:{isLive:!0,cors:!0,withCredentials:!1}},sources:[{src:this.url,type:"video/x-flv"}]}:this.url.includes("m3u8")&&(t.sources=[{src:this.url}]),t}}},{key:"getVideoDomId",value:function(){if(this.url){var t;if(this.url.includes("flv")){var e=document.querySelector("#".concat(this.layerId));t="".concat(this.layerId,"_flvjs_api"),e.style.position="fixed",e.style.left="-200%"}else t=this.video.el_.firstChild.id;return t}}}])&&Wy(t.prototype,e),r&&Wy(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}(),Xy=function(){try{return turf}catch(t){return{}}}();function Jy(t){"@babel/helpers - typeof";return(Jy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ky(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Qy(n.key),n)}}function Qy(t){var e=function(t,e){if("object"!=Jy(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Jy(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Jy(e)?e:e+""}function Zy(t,e,r){return e=$y(e),function(t,e){if(e&&("object"===Jy(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],$y(t).constructor):e.apply(t,r))}function $y(t){return($y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function tv(t,e){return(tv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var ev=function(t){function e(t){var r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r=Zy(this,e);var n=t||{};if(r.options=n,r.url=r.options.url,r.extent=r.options.extent,r.cv=r.options.opencv||window.cv,!r.cv)throw new Error("opencv.js instance is not existed!");return r.id=n.id?n.id:W.createUniqueID("VideoLayer_"),r.layerId=r.id+"_outer",r.type="custom",r.renderingMode="3d",r.overlay=!0,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&tv(t,e)}(e,w().Evented),r=e,(n=[{key:"onAdd",value:function(t){var e=this;this.map=t,this.renderer=new Yy({url:this.url,id:this.layerId}),this.video=this.renderer.createVideo(),this.videoDomId=this.renderer.getVideoDomId(),this.video.one("firstplay",function(){e.video.play()}),this.video.one("ready",function(){setTimeout(function(){e.videoWidth=e.video.videoWidth(),e.videoHeight=e.video.videoHeight(),e._addVideoLayer(e.map)},1e3)}),this.video.one("canplay",function(){setTimeout(function(){t.getSource(e.layerId).play()},1500)})}},{key:"render",value:function(){}},{key:"_getPixelBbox",value:function(t){var e=[],r=0,n=0;return this.extent.forEach(function(o){var i=t.project(o);(!r||i.x<r)&&(r=i.x),(!n||i.y<n)&&(n=i.y),e.push(i.x),e.push(i.y)}),e=e.map(function(t,e){return e%2==0?t-r:t-n})}},{key:"_addVideoLayer",value:function(t){var e=this.videoDomId||this.url;this.pixelBBox=this._getPixelBbox(t);var r=(0,Xy.bbox)((0,Xy.polygon)([this.extent.concat(this.extent[0])])),n=t.project([r[2],r[3]]),o=t.project([r[0],r[1]]),i=[Math.abs(n.x-o.x),Math.abs(n.y-o.y)],a=i[0]/i[1],s=this.videoHeight*a,u=this.videoHeight,l=s/i[0],c=u/i[1];this.pixelBBox=this.pixelBBox.map(function(t,e){return e%2==0?t*l:t*c}),this.dsize=new this.cv.Size(this.videoHeight*a,this.videoHeight);var f=this,h=this.cv.matFromArray(4,1,this.cv.CV_32FC2,[0,0,f.videoWidth,0,f.videoWidth,f.videoHeight,0,f.videoHeight]),p=this.cv.matFromArray(4,1,this.cv.CV_32FC2,this.pixelBBox);t.addSource(this.layerId,{type:"video",urls:[e],drawImageCallback:function(t){var e=f.cv.matFromImageData(t),r=new f.cv.Mat,n=f.cv.findHomography(h,p);f.cv.warpPerspective(e,r,n,f.dsize);var o=new ImageData(new Uint8ClampedArray(r.data),r.cols,r.rows);return e.delete(),r.delete(),o},coordinates:[[r[0],r[3]],[r[2],r[3]],[r[2],r[1]],[r[0],r[1]]]}),t.addLayer({id:this.layerId,type:"raster",source:this.layerId})}},{key:"moveLayer",value:function(t){this.map.moveLayer(this.layerId,t)}},{key:"setVisibility",value:function(t){var e=t?"visible":"none";this.map.setLayoutProperty(this.layerId,"visibility",e)}}])&&Ky(r.prototype,n),o&&Ky(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function rv(t){"@babel/helpers - typeof";return(rv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function nv(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ov(n.key),n)}}function ov(t){var e=function(t,e){if("object"!=rv(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=rv(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==rv(e)?e:e+""}function iv(t,e,r){return e=av(e),function(t,e){if(e&&("object"===rv(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],av(t).constructor):e.apply(t,r))}function av(t){return(av=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function sv(t,e){return(sv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var uv=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=iv(this,e)).options=r||{},n.url=t,n.fire("initialized",n),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&sv(t,e)}(e,w().Evented),r=e,n&&nv(r.prototype,n),o&&nv(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function lv(t){"@babel/helpers - typeof";return(lv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function cv(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,fv(n.key),n)}}function fv(t){var e=function(t,e){if("object"!=lv(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=lv(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==lv(e)?e:e+""}var hv=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return e=t,n=[{key:"generateToken",value:function(t,e){var r=this.servers[t];if(r)return tt.post(r.tokenServiceUrl,JSON.stringify(e.toJSON())).then(function(t){return t.text()})}},{key:"registerServers",value:function(t){this.servers=this.servers||{},W.isArray(t)||(t=[t]);for(var e=0;e<t.length;e++){var r=t[e];this.servers[r.server]=r}}},{key:"registerToken",value:function(t,e){if(this.tokens=this.tokens||{},t&&e){var r=this._getTokenStorageKey(t);this.tokens[r]=e}}},{key:"registerKey",value:function(t,e){if(this.keys=this.keys||{},t&&!(t.length<1)&&e){t=W.isArray(t)?t:[t];for(var r=0;r<t.length;r++){var n=this._getUrlRestString(t[0])||t[0];this.keys[n]=e}}}},{key:"getServerInfo",value:function(t){return this.servers=this.servers||{},this.servers[t]}},{key:"getToken",value:function(t){if(t){this.tokens=this.tokens||{};var e=this._getTokenStorageKey(t);return this.tokens[e]}}},{key:"getKey",value:function(t){this.keys=this.keys||{};var e=this._getUrlRestString(t)||t;return this.keys[e]}},{key:"loginiServer",value:function(t,e,r,n){t=W.urlPathAppend(t,"services/security/login");var o={username:e&&e.toString(),password:r&&r.toString(),rememberme:n};o=JSON.stringify(o);return tt.post(t,o,{headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}}).then(function(t){return t.json()})}},{key:"logoutiServer",value:function(t){t=W.urlPathAppend(t,"services/security/logout");return tt.get(t,"",{headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},withoutFormatSuffix:!0}).then(function(){return!0}).catch(function(){return!1})}},{key:"loginOnline",value:function(e,r){var n=t.SSO+"/login?service="+e;this._open(n,r)}},{key:"loginiPortal",value:function(t,e,r){t=W.urlPathAppend(t,"web/login");var n={username:e&&e.toString(),password:r&&r.toString()};n=JSON.stringify(n);return tt.post(t,n,{headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},withCredentials:!1}).then(function(t){return t.json()})}},{key:"logoutiPortal",value:function(t){t=W.urlPathAppend(t,"services/security/logout");return tt.get(t,"",{headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},withCredentials:!0,withoutFormatSuffix:!0}).then(function(){return!0}).catch(function(){return!1})}},{key:"loginManager",value:function(t,e){var r=W.urlPathAppend(t,"/security/tokens"),n=e||{},o={username:n.userName&&n.userName.toString(),password:n.password&&n.password.toString()};o=JSON.stringify(o);var i=this;return tt.post(r,o,{headers:{Accept:"*/*","Content-Type":"application/json; charset=UTF-8"}}).then(function(t){return t.text()}).then(function(t){return i.imanagerToken=t,t})}},{key:"destroyAllCredentials",value:function(){this.keys=null,this.tokens=null,this.servers=null}},{key:"destroyToken",value:function(t){if(t){var e=this._getTokenStorageKey(t);this.tokens=this.tokens||{},this.tokens[e]&&delete this.tokens[e]}}},{key:"destroyKey",value:function(t){if(t){this.keys=this.keys||{};var e=this._getUrlRestString(t)||t;this.keys[e]&&delete this.keys[e]}}},{key:"appendCredential",value:function(t){var e=t,r=this.getToken(t),n=r?new Ji(r,"token"):null;return n||(n=(r=this.getKey(t))?new Ji(r,"key"):null),n&&(e=W.urlAppend(e,n.getUrlParameters())),e}},{key:"_open",value:function(t,e){e=null==e||e;var r=window.screen.availWidth/2-this.INNER_WINDOW_WIDTH/2,n=window.screen.availHeight/2-this.INNER_WINDOW_HEIGHT/2,o="height="+this.INNER_WINDOW_HEIGHT+", width="+this.INNER_WINDOW_WIDTH+",top="+n+", left="+r+",toolbar=no, menubar=no, scrollbars=no, resizable=no, location=no, status=no";e?window.open(t,"login"):window.open(t,"login",o)}},{key:"_getTokenStorageKey",value:function(t){var e=t.match(/(.*?):\/\/([^\/]+)/i);return e?e[0]:t}},{key:"_getUrlRestString",value:function(t){if(!t)return t;var e=t.match(/(http|https):\/\/(.*\/rest)/i);return e?e[0]:t}}],(r=null)&&cv(e.prototype,r),n&&cv(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,r,n}();function pv(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function dv(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?pv(Object(r),!0).forEach(function(e){yv(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):pv(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function yv(t,e,r){return(e=mv(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function vv(t){"@babel/helpers - typeof";return(vv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function gv(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,mv(n.key),n)}}function mv(t){var e=function(t,e){if("object"!=vv(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=vv(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==vv(e)?e:e+""}hv.INNER_WINDOW_WIDTH=600,hv.INNER_WINDOW_HEIGHT=600,hv.SSO="https://sso.supermap.com",hv.ONLINE="https://www.supermapol.com";var bv=function(){return t=function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var n=this;this.EVENT_TYPES=["processCompleted","processFailed"],this.events=null,this.eventListeners=null,this.url=null,this.urls=null,this.proxy=null,this.index=null,this.length=null,this.totalTimes=null,this.POLLING_TIMES=3,this.isInTheSameDomain=null,this.withCredentials=!1,W.isArray(e)?(n.urls=e,n.length=e.length,n.totalTimes=n.length,1===n.length?n.url=e[0]:(n.index=parseInt(Math.random()*n.length),n.url=e[n.index])):(n.totalTimes=1,n.url=e),W.isArray(e)&&!n.isServiceSupportPolling()&&(n.url=e[0],n.totalTimes=1),r=r||{},this.crossOrigin=r.crossOrigin,this.headers=r.headers,W.extend(this,r),n.isInTheSameDomain=W.isInTheSameDomain(n.url),n.events=new ea(n,null,n.EVENT_TYPES,!0),n.eventListeners instanceof Object&&n.events.on(n.eventListeners),this.CLASS_NAME="SuperMap.CommonServiceBase"},(e=[{key:"destroy",value:function(){var t=this;W.isArray(t.urls)&&(t.urls=null,t.index=null,t.length=null,t.totalTimes=null),t.url=null,t.isInTheSameDomain=null,t.EVENT_TYPES=null,t.events&&(t.events.destroy(),t.events=null),t.eventListeners&&(t.eventListeners=null)}},{key:"request",value:function(t){var e=t.scope.format;if("string"==typeof t.success&&(t.scope.format=t.success,e=t.success,t.success=null,t.failure=null),e&&!this.supportDataFormat(e))throw new Error("".concat(this.CLASS_NAME," is not surport ").concat(e," format!"));var r=this;return t.url=t.url||r.url,this._returnContent(t)&&!t.url.includes("returnContent=true")&&(t.url=W.urlAppend(t.url,"returnContent=true")),t.proxy=t.proxy||r.proxy,t.withCredentials=void 0!=t.withCredentials?t.withCredentials:r.withCredentials,t.crossOrigin=void 0!=t.crossOrigin?t.crossOrigin:r.crossOrigin,t.headers=t.headers||r.headers,t.isInTheSameDomain=r.isInTheSameDomain,t.withoutFormatSuffix=t.scope.withoutFormatSuffix||!1,t.url=hv.appendCredential(t.url),r.calculatePollingTimes(),t.scope=r,r.totalTimes>0?(r.totalTimes--,r.ajaxPolling(t)):r._commit(t)}},{key:"ajaxPolling",value:function(t){var e=this,r=t.url,n=/^http:\/\/([a-z]{9}|(\d+\.){3}\d+):\d{0,4}/;return e.index=parseInt(Math.random()*e.length),e.url=e.urls[e.index],r=r.replace(n,n.exec(e.url)[0]),t.url=r,t.isInTheSameDomain=W.isInTheSameDomain(r),e._commit(t)}},{key:"calculatePollingTimes",value:function(){var t=this;t.times?t.totalTimes>t.POLLING_TIMES?t.times>t.POLLING_TIMES?t.totalTimes=t.POLLING_TIMES:t.totalTimes=t.times:t.times<t.totalTimes&&(t.totalTimes=t.times):t.totalTimes>t.POLLING_TIMES&&(t.totalTimes=t.POLLING_TIMES),t.totalTimes--}},{key:"isServiceSupportPolling",value:function(){return!("SuperMap.REST.ThemeService"===this.CLASS_NAME||"SuperMap.REST.EditFeaturesService"===this.CLASS_NAME)}},{key:"transformResult",value:function(t,e){return{result:t=W.transformResult(t),options:e}}},{key:"transformErrorResult",value:function(t,e){return{error:(t=W.transformResult(t)).error||t,options:e}}},{key:"serviceProcessCompleted",value:function(t,e){t=this.transformResult(t).result,this.events.triggerEvent("processCompleted",{result:t,options:e})}},{key:"serviceProcessFailed",value:function(t,e){var r=(t=this.transformErrorResult(t).error).error||t;this.events.triggerEvent("processFailed",{error:r,options:e})}},{key:"_returnContent",value:function(t){return t.scope.format!==Jr.FGB&&!!t.scope.returnContent}},{key:"supportDataFormat",value:function(t){return this.dataFormat().includes(t)}},{key:"dataFormat",value:function(){return[Jr.GEOJSON,Jr.ISERVER]}},{key:"_commit",value:function(t){var e=this;if("POST"===t.method||"PUT"===t.method||"PATCH"===t.method)if(t.params&&(t.url=W.urlAppend(t.url,W.getParameterString(t.params||{}))),"object"!==vv(t.data)||t.data instanceof FormData)t.params=t.data;else try{t.params=W.toJSON(t.data)}catch(t){console.log("ä¸æ¯jsonå¯¹è±¡")}return tt.commit(t.method,t.url,t.params,{headers:t.headers,withoutFormatSuffix:t.withoutFormatSuffix,withCredentials:t.withCredentials,crossOrigin:t.crossOrigin,timeout:t.async?0:null,proxy:t.proxy}).then(function(t){return t.text?t.text():t.json?t.json():t}).then(function(e){var r=e;return"string"==typeof e&&(r=(new hr).read(e)),(!r||r.error||r.code>=300&&304!==r.code)&&(r=r&&r.error?{error:r.error}:{error:r}),r&&t.scope.format===Jr.FGB&&(r.newResourceLocation=r.newResourceLocation.replace(".json","")+".fgb"),r}).catch(function(t){return{error:t}}).then(function(r){var n={object:e};if(r.error){var o="processFailed";if(e.events&&e.events.listeners[o]&&e.events.listeners[o].length){var i=t.failure&&(t.scope?A.bind(t.failure,t.scope):t.failure);i?i(r,t):e.serviceProcessFailed(r,t)}else(n=dv(dv({},n),e.transformErrorResult(r,t))).type=o,t.failure&&t.failure(n)}else{var a="processCompleted";if(e.events&&e.events.listeners[a]&&e.events.listeners[a].length){var s=t.success&&(t.scope?A.bind(t.success,t.scope):t.success);s?s(r,t):e.serviceProcessCompleted(r,t)}else r.succeed=void 0==r.succeed||r.succeed,(n=dv(dv({},n),e.transformResult(r,t))).type=a,t.success&&t.success(n)}return n})}}])&&gv(t.prototype,e),r&&gv(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function wv(t){"@babel/helpers - typeof";return(wv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Sv(){Sv=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var i=e&&e.prototype instanceof g?e:g,a=Object.create(i.prototype),s=new A(n||[]);return o(a,"_invoke",{value:P(t,r,s)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var h="suspendedStart",p="suspendedYield",d="executing",y="completed",v={};function g(){}function m(){}function b(){}var w={};l(w,a,function(){return this});var S=Object.getPrototypeOf,x=S&&S(S(M([])));x&&x!==r&&n.call(x,a)&&(w=x);var _=b.prototype=g.prototype=Object.create(w);function E(t){["next","throw","return"].forEach(function(e){l(t,e,function(t){return this._invoke(e,t)})})}function O(t,e){function r(o,i,a,s){var u=f(t[o],t,i);if("throw"!==u.type){var l=u.arg,c=l.value;return c&&"object"==wv(c)&&n.call(c,"__await")?e.resolve(c.__await).then(function(t){r("next",t,a,s)},function(t){r("throw",t,a,s)}):e.resolve(c).then(function(t){l.value=t,a(l)},function(t){return r("throw",t,a,s)})}s(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e(function(e,o){r(t,n,e,o)})}return i=i?i.then(o,o):o()}})}function P(e,r,n){var o=h;return function(i,a){if(o===d)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var u=k(s,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var l=f(e,r,n);if("normal"===l.type){if(o=n.done?y:p,l.arg===v)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=y,n.method="throw",n.arg=l.arg)}}}function k(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,k(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function T(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function A(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function M(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(wv(e)+" is not iterable")}return m.prototype=b,o(_,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:m,configurable:!0}),m.displayName=l(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,l(t,u,"GeneratorFunction")),t.prototype=Object.create(_),t},e.awrap=function(t){return{__await:t}},E(O.prototype),l(O.prototype,s,function(){return this}),e.AsyncIterator=O,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new O(c(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next()})},E(_),l(_,u,"Generator"),l(_,a,function(){return this}),l(_,"toString",function(){return"[object Generator]"}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=M,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(T),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),T(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;T(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:M(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function xv(t){return function(t){if(Array.isArray(t))return _v(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return _v(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _v(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _v(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Ev(t,e,r,n,o,i,a){try{var s=t[i](a),u=s.value}catch(t){return void r(t)}s.done?e(u):Promise.resolve(u).then(n,o)}function Ov(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Pv(n.key),n)}}function Pv(t){var e=function(t,e){if("object"!=wv(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=wv(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==wv(e)?e:e+""}function kv(t,e,r){return e=Tv(e),function(t,e){if(e&&("object"===wv(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Tv(t).constructor):e.apply(t,r))}function Cv(){return(Cv="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Tv(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Tv(t){return(Tv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Av(t,e){return(Av=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Mv=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=kv(this,e,[t,r])).options=r||{},n.CLASS_NAME="SuperMap.KnowledgeGraphService",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Av(t,e)}(e,bv),r=e,(n=[{key:"destroy",value:function(){Cv(Tv(e.prototype),"destroy",this).call(this)}},{key:"findShortestPath",value:function(t,e){var r=this.url+"/shortestPath.json?startID=".concat(t.startID,"&endID=").concat(t.endID);this.processAsync({url:r,method:"GET",callback:e})}},{key:"query",value:function(t,e){var r=W.urlAppend(this.url+"/query.json","".concat("cypherQuery","=").concat(encodeURI(t)));this.processAsync({url:r,method:"GET",callback:e})}},{key:"getGraphMaps",value:function(t){var e=this.url+"/graphmaps.json";this.processAsync({url:e,method:"GET",callback:t})}},{key:"getGraphMap",value:function(t,e){var r=this.url+"/graphmaps/".concat(t,".json");this.processAsync({url:r,method:"GET",callback:e})}},{key:"getGraphMapData",value:function(){var t,e=(t=Sv().mark(function t(e){var r,n,o,i,a,s,u,l,c;return Sv().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=[],t.next=3,this._getGraphMapData(e);case 3:if(n=t.sent){t.next=6;break}return t.abrupt("return");case 6:o=n.dataContent.queries&&n.dataContent.queries.query||[],i=[],i="string"==typeof o?[o]:o,(a=this._getGraphMapExpandQuery(n)).length&&(s=i).push.apply(s,xv(a)),u=0;case 12:if(!(u<i.length)){t.next=21;break}return l=i[u],t.next=16,this._queryDataBySql(l);case 16:c=t.sent,r=r.concat([],c);case 18:u++,t.next=12;break;case 21:return t.abrupt("return",{data:r,graphMap:n});case 22:case"end":return t.stop()}},t,this)}),function(){var e=this,r=arguments;return new Promise(function(n,o){var i=t.apply(e,r);function a(t){Ev(i,n,o,a,s,"next",t)}function s(t){Ev(i,n,o,a,s,"throw",t)}a(void 0)})});return function(t){return e.apply(this,arguments)}}()},{key:"_getGraphMapExpandQuery",value:function(t){var e=[];return(t.dataContent.expand&&JSON.parse(t.dataContent.expand)||[]).forEach(function(t){e.push("match p=(n)-[]-(m) where id(n)=".concat(t," return p;"))}),e}},{key:"processAsync",value:function(t){var e=t.url,r=t.params,n=t.method,o=t.callback,i={method:n,url:e,scope:this,success:o,failure:o};return r&&(i.params=r),this.request(i)}},{key:"_getGraphMapData",value:function(t){var e=this;return new Promise(function(r,n){e.getGraphMap(t,function(t){"processFailed"===t.type?n(t.error):""===t.result.data?n("æ æ°æ®"):r(t.result.graphMap)})})}},{key:"_queryDataBySql",value:function(t){var e=this;return new Promise(function(r,n){e.query(t,function(t){"processFailed"===t.type?n(t.error):r(t.result)})})}}])&&Ov(r.prototype,n),o&&Ov(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function jv(t){"@babel/helpers - typeof";return(jv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Iv(){Iv=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var i=e&&e.prototype instanceof g?e:g,a=Object.create(i.prototype),s=new A(n||[]);return o(a,"_invoke",{value:P(t,r,s)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var h="suspendedStart",p="suspendedYield",d="executing",y="completed",v={};function g(){}function m(){}function b(){}var w={};l(w,a,function(){return this});var S=Object.getPrototypeOf,x=S&&S(S(M([])));x&&x!==r&&n.call(x,a)&&(w=x);var _=b.prototype=g.prototype=Object.create(w);function E(t){["next","throw","return"].forEach(function(e){l(t,e,function(t){return this._invoke(e,t)})})}function O(t,e){function r(o,i,a,s){var u=f(t[o],t,i);if("throw"!==u.type){var l=u.arg,c=l.value;return c&&"object"==jv(c)&&n.call(c,"__await")?e.resolve(c.__await).then(function(t){r("next",t,a,s)},function(t){r("throw",t,a,s)}):e.resolve(c).then(function(t){l.value=t,a(l)},function(t){return r("throw",t,a,s)})}s(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e(function(e,o){r(t,n,e,o)})}return i=i?i.then(o,o):o()}})}function P(e,r,n){var o=h;return function(i,a){if(o===d)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var u=k(s,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var l=f(e,r,n);if("normal"===l.type){if(o=n.done?y:p,l.arg===v)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=y,n.method="throw",n.arg=l.arg)}}}function k(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,k(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function T(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function A(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function M(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(jv(e)+" is not iterable")}return m.prototype=b,o(_,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:m,configurable:!0}),m.displayName=l(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,l(t,u,"GeneratorFunction")),t.prototype=Object.create(_),t},e.awrap=function(t){return{__await:t}},E(O.prototype),l(O.prototype,s,function(){return this}),e.AsyncIterator=O,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new O(c(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next()})},E(_),l(_,u,"Generator"),l(_,a,function(){return this}),l(_,"toString",function(){return"[object Generator]"}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=M,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(T),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),T(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;T(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:M(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function Nv(t,e,r,n,o,i,a){try{var s=t[i](a),u=s.value}catch(t){return void r(t)}s.done?e(u):Promise.resolve(u).then(n,o)}function Lv(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Rv(n.key),n)}}function Rv(t){var e=function(t,e){if("object"!=jv(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=jv(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==jv(e)?e:e+""}function Dv(t,e,r){return e=Bv(e),function(t,e){if(e&&("object"===jv(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Bv(t).constructor):e.apply(t,r))}function Bv(t){return(Bv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Fv(t,e){return(Fv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Gv=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Dv(this,e,[t,r]))._knowledgeGraphService=new Mv(t,r),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Fv(t,e)}(e,uv),r=e,(n=[{key:"findShortestPath",value:function(t,e){return this._knowledgeGraphService.findShortestPath(t,e)}},{key:"query",value:function(t,e){return this._knowledgeGraphService.query(t,e)}},{key:"getGraphMaps",value:function(t){return this._knowledgeGraphService.getGraphMaps(t)}},{key:"getGraphMap",value:function(t,e){return this._knowledgeGraphService.getGraphMap(t,e)}},{key:"getGraphMapData",value:function(){var t,e=(t=Iv().mark(function t(e){var r;return Iv().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._knowledgeGraphService.getGraphMapData(e);case 2:return r=t.sent,t.abrupt("return",r);case 4:case"end":return t.stop()}},t,this)}),function(){var e=this,r=arguments;return new Promise(function(n,o){var i=t.apply(e,r);function a(t){Nv(i,n,o,a,s,"next",t)}function s(t){Nv(i,n,o,a,s,"throw",t)}a(void 0)})});return function(t){return e.apply(this,arguments)}}()}])&&Lv(r.prototype,n),o&&Lv(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}(),Uv=r(9819),zv=r.n(Uv);function Vv(t){"@babel/helpers - typeof";return(Vv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Hv(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function Wv(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Hv(Object(r),!0).forEach(function(e){qv(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Hv(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function qv(t,e,r){var n;return(e="symbol"==Vv(n=function(t,e){if("object"!=Vv(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Vv(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"))?n:n+"")in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Yv(t){return function(t){if(Array.isArray(t))return Xv(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return Xv(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Xv(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Xv(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Jv(t,e){var r=(e=e||{}).styles&&e.styles.style,n=e.captionFields&&e.captionFields.captionField,o=e.showRelationTypes,i={nodes:[],edges:[]};return t.forEach(function(t){var e=t.path;if(e){var a,s,u=function(t,e,r,n){var o={nodes:[],edges:[]};return t.forEach(function(t){if(Qv(t)){var i=$v(t,e,n);o.edges.push(i)}else{var a=Zv(t,e,r);o.nodes.push(a)}}),o}(e,r,n,o),l=u.nodes,c=u.edges;(a=i.nodes).push.apply(a,Yv(l)),(s=i.edges).push.apply(s,Yv(c))}else if(Qv(t)){var f=$v(t,r,o);i.edges.push(f)}else{var h=Zv(t,r,n);i.nodes.push(h)}}),{nodes:Kv(i.nodes),edges:Kv(i.edges,"edgeId")}}function Kv(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"id";return zv()(t,e)}function Qv(t){return t.hasOwnProperty("start")&&t.hasOwnProperty("end")}function Zv(t,e,r){var n=t.id,o=t.properties,i=t.lables,a=e?function(t,e){if(!e)return{};for(var r=t.id,n=t.labels,o=e.filter(function(t){return"entity"===t.type}),i=0;i<o.length;i++){var a=o[i],s=a.color,u=a.textColor,l=a.font,c=a.size,f=a.entityTypes,h=a.entityIds,p=JSON.parse(h||"[]"),d=JSON.parse(f||"[]");if(p.includes(r)||d.includes(n[0]))return Wv(Wv({fillColor:s,fontSize:l.fontSize,fill:u,size:c},eg(l.fontName)),tg(l.fontStyle))}return{}}(t,e):{},s=function(t,e){var r=t.id,n=t.labels,o=t.properties;if(e)for(var i=e instanceof Array?e:[e],a=0;a<i.length;a++){var s=i[a],u=s.name,l=s.entityTypes,c=s.entityIds,f=JSON.parse(c||"[]"),h=JSON.parse(l||"[]"),p=n&&n.join("&");if(f.includes(r)||h.includes(p))return o[u]}return o[o._labelfieldname]}(t,r),u=a.fillColor||"",l={id:n+"",label:void 0===s?"":s+"",properties:o,lables:i};return a.size&&(l.size=a.size,delete a.size),a.fillColor&&(l.style={fill:u,stroke:u},delete a.fillColor),0!==Object.keys(a).length&&(l.labelCfg={style:a}),l}function $v(t,e,r){var n=t.start,o=t.end,i=t.id,a=t.type,s=t.properties,u=e?function(t,e){if(!e)return{};for(var r=t.id,n=t.type,o=e.filter(function(t){return"relationShip"===t.type}),i=0;i<o.length;i++){var a=o[i],s=a.color,u=a.width,l=a.textColor,c=a.font,f=a.relationTypes,h=a.relationIds,p=JSON.parse(h||"[]"),d=JSON.parse(f||"[]");if(p.includes(r)||d.includes(n))return Wv(Wv({stroke:s,lineWidth:1.4*Number(u),fontSize:c.fontSize,fill:l},eg(c.fontName)),tg(c.fontStyle))}return{}}(t,e):{},l={source:n+"",target:o+"",edgeId:i+"",label:a,style:{},labelCfg:{},properties:s};return!1===r&&delete l.label,u.stroke&&(l.style.stroke=u.stroke,l.style.endArrow={path:"M 0,0 L 4,2 L 4,-2 Z",fill:u.stroke},delete u.stroke),u.lineWidth&&(l.style.lineWidth=u.lineWidth,delete u.lineWidth),l.labelCfg={style:u},l}function tg(t){return 1===t||"bold"===t?{fontWeight:"bold"}:2===t||"italic"===t?{fontStyle:"italic"}:"bolditalic"===t?{fontWeight:"bold",fontStyle:"italic"}:{}}function eg(t){if(!t)return{};var e=t.split(".");return Wv({fontFamily:e[0]},tg(e[1]))}var rg=r(7582),ng=r(7061),og={getDefaultCfg:function(){return{}},getEvents:function(){return{}},updateCfg:function(t){return Object.assign(this,t),!0},shouldBegin:function(){return!0},shouldUpdate:function(){return!0},shouldEnd:function(){return!0},bind:function(t){var e=this,r=this.events;this.graph=t,"drag-canvas"!==this.type&&"brush-select"!==this.type&&"lasso-select"!==this.type||t.get("canvas").set("draggable",!0),(0,ng.each)(r,function(e,r){t.on(r,e)}),document.addEventListener("visibilitychange",function(){e.keydown=!1})},unbind:function(t){var e=this.events,r=t.get("canvas").get("draggable");"drag-canvas"!==this.type&&"brush-select"!==this.type&&"lasso-select"!==this.type||t.get("canvas").set("draggable",!1),(0,ng.each)(e,function(e,r){t.off(r,e)}),t.get("canvas").set("draggable",r)},get:function(t){return this[t]},set:function(t,e){return this[t]=e,this}},ig=function(){function t(){}return t.registerBehavior=function(e,r){if(!r)throw new Error("please specify handler for this behavior: ".concat(e));var n=(0,ng.clone)(og);Object.assign(n,r);var o=function(t){var e=this;Object.assign(this,this.getDefaultCfg(),t);var r=this.getEvents();this.events=null;var n={};r&&((0,ng.each)(r,function(t,r){n[r]=(0,ng.wrapBehavior)(e,t)}),this.events=n)};o.prototype=n,t.types[e]=o},t.hasBehavior=function(e){return!!t.types[e]},t.getBehavior=function(e){return t.types[e]},t.types={},t}(),ag=ig,sg=function(){function t(){this._events={}}return t.prototype.on=function(t,e,r){return this._events[t]||(this._events[t]=[]),this._events[t].push({callback:e,once:!!r}),this},t.prototype.once=function(t,e){return this.on(t,e,!0)},t.prototype.emit=function(t){for(var e=this,r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var o=this._events[t]||[],i=this._events["*"]||[],a=function(n){for(var o=n.length,i=0;i<o;i++)if(n[i]){var a=n[i],s=a.callback;a.once&&(n.splice(i,1),0===n.length&&delete e._events[t],o--,i--),s.apply(e,r)}};a(o),a(i)},t.prototype.off=function(t,e){if(t)if(e){for(var r=this._events[t]||[],n=r.length,o=0;o<n;o++)r[o].callback===e&&(r.splice(o,1),n--,o--);0===r.length&&delete this._events[t]}else delete this._events[t];else this._events={};return this},t.prototype.getEvents=function(){return this._events},t}(),ug=r(8610);function lg(t,e,r){var n=[0,0,0,0,0,0,0,0,0];return ug.fromRotation(n,r),ug.multiply(t,n,e)}function cg(t,e,r){var n=[0,0,0,0,0,0,0,0,0];return ug.fromScaling(n,r),ug.multiply(t,n,e)}function fg(t,e,r){return ug.multiply(t,r,e)}function hg(t,e){for(var r,n,o,i,a=t?[].concat(t):[1,0,0,0,1,0,0,0,1],s=0,u=e.length;s<u;s++){var l=e[s];switch(l[0]){case"t":r=a,n=a,o=[l[1],l[2]],void 0,i=[0,0,0,0,0,0,0,0,0],ug.fromTranslation(i,o),ug.multiply(r,i,n);break;case"s":cg(a,a,[l[1],l[2]]);break;case"r":lg(a,a,l[1]);break;case"m":fg(a,a,l[1])}}return a}var pg=function(t,e){var r=t.nodes,n=t.edges,o=[],i={};if(!r)throw new Error("invalid nodes data!");return r&&r.forEach(function(t,e){i[t.id]=e,o.push([])}),n&&n.forEach(function(t){var r=t.source,n=t.target,a=i[r],s=i[n];!a&&0!==a||!s&&0!==s||(o[a][s]=1,e||(o[s][a]=1))}),o},dg=function(t,e){return t===e},yg=function(){function t(t,e){void 0===e&&(e=null),this.value=t,this.next=e}return t.prototype.toString=function(t){return t?t(this.value):"".concat(this.value)},t}(),vg=function(){function t(t){void 0===t&&(t=dg),this.head=null,this.tail=null,this.compare=t}return t.prototype.prepend=function(t){var e=new yg(t,this.head);return this.head=e,this.tail||(this.tail=e),this},t.prototype.append=function(t){var e=new yg(t);return this.head?(this.tail.next=e,this.tail=e,this):(this.head=e,this.tail=e,this)},t.prototype.delete=function(t){if(!this.head)return null;for(var e=null;this.head&&this.compare(this.head.value,t);)e=this.head,this.head=this.head.next;var r=this.head;if(null!==r)for(;r.next;)this.compare(r.next.value,t)?(e=r.next,r.next=r.next.next):r=r.next;return this.compare(this.tail.value,t)&&(this.tail=r),e},t.prototype.find=function(t){var e=t.value,r=void 0===e?void 0:e,n=t.callback,o=void 0===n?void 0:n;if(!this.head)return null;for(var i=this.head;i;){if(o&&o(i.value))return i;if(void 0!==r&&this.compare(i.value,r))return i;i=i.next}return null},t.prototype.deleteTail=function(){var t=this.tail;if(this.head===this.tail)return this.head=null,this.tail=null,t;for(var e=this.head;e.next;)e.next.next?e=e.next:e.next=null;return this.tail=e,t},t.prototype.deleteHead=function(){if(!this.head)return null;var t=this.head;return this.head.next?this.head=this.head.next:(this.head=null,this.tail=null),t},t.prototype.fromArray=function(t){var e=this;return t.forEach(function(t){return e.append(t)}),this},t.prototype.toArray=function(){for(var t=[],e=this.head;e;)t.push(e),e=e.next;return t},t.prototype.reverse=function(){for(var t=this.head,e=null,r=null;t;)r=t.next,t.next=e,e=t,t=r;this.tail=this.head,this.head=e},t.prototype.toString=function(t){return void 0===t&&(t=void 0),this.toArray().map(function(e){return e.toString(t)}).toString()},t}(),gg=function(){function t(){this.linkedList=new vg}return t.prototype.isEmpty=function(){return!this.linkedList.head},t.prototype.peek=function(){return this.linkedList.head?this.linkedList.head.value:null},t.prototype.enqueue=function(t){this.linkedList.append(t)},t.prototype.dequeue=function(){var t=this.linkedList.deleteHead();return t?t.value:null},t.prototype.toString=function(t){return this.linkedList.toString(t)},t}(),mg=function(t,e,r){void 0===e&&(e=[]);var n=e.filter(function(e){return e.source===t||e.target===t});if("target"===r){return n.filter(function(e){return e.source===t}).map(function(t){return t.target})}if("source"===r){return n.filter(function(e){return e.target===t}).map(function(t){return t.source})}return n.map(function(e){return e.source===t?e.target:e.source})},bg=function(t,e){return e.filter(function(e){return e.source===t||e.target===t})},wg=function(t){void 0===t&&(t=0);var e="".concat(Math.random()).split(".")[1].substr(0,5),r="".concat(Math.random()).split(".")[1].substr(0,5);return"".concat(t,"-").concat(e).concat(r)};var Sg=function(t,e,r,n){void 0===n&&(n=!0);var o=function(t){void 0===t&&(t={});var e,r=t,n=function(){},o=(e={},function(t){var r=t.next;return!e[r]&&(e[r]=!0,!0)});return r.allowTraversal=t.allowTraversal||o,r.enter=t.enter||n,r.leave=t.leave||n,r}(r),i=new gg,a=t.edges,s=void 0===a?[]:a;i.enqueue(e);for(var u="",l=function(){var t=i.dequeue();o.enter({current:t,previous:u}),mg(t,s,n?"target":void 0).forEach(function(e){o.allowTraversal({previous:u,current:t,next:e})&&i.enqueue(e)}),o.leave({current:t,previous:u}),u=t};!i.isEmpty();)l()},xg=function(t){for(var e=t.nodes,r=void 0===e?[]:e,n=t.edges,o=void 0===n?[]:n,i=[],a={},s=[],u=function t(e){s.push(e),a[e.id]=!0;for(var n=mg(e.id,o),i=function(e){var o=n[e];if(!a[o]){var i=r.filter(function(t){return t.id===o});i.length>0&&t(i[0])}},u=0;u<n.length;++u)i(u)},l=0;l<r.length;l++){var c=r[l];if(!a[c.id]){u(c);for(var f=[];s.length>0;)f.push(s.pop());i.push(f)}}return i},_g=function(t){for(var e=t.nodes,r=void 0===e?[]:e,n=t.edges,o=void 0===n?[]:n,i=[],a={},s={},u={},l=[],c=0,f=function t(e){s[e.id]=c,u[e.id]=c,c+=1,i.push(e),a[e.id]=!0;for(var n=mg(e.id,o,"target").filter(function(t){return r.map(function(t){return t.id}).indexOf(t)>-1}),f=function(o){var i=n[o];if(s[i]||0===s[i])a[i]&&(u[e.id]=Math.min(u[e.id],s[i]));else{var l=r.filter(function(t){return t.id===i});l.length>0&&t(l[0]),u[e.id]=Math.min(u[e.id],u[i])}},h=0;h<n.length;h++)f(h);if(u[e.id]===s[e.id]){for(var p=[];i.length>0;){var d=i.pop();if(a[d.id]=!1,p.push(d),d===e)break}p.length>0&&l.push(p)}},h=0,p=r;h<p.length;h++){var d=p[h];s[d.id]||0===s[d.id]||f(d)}return l};function Eg(t,e){return e?_g(t):xg(t)}var Og=function(t){var e={},r=t.nodes,n=void 0===r?[]:r,o=t.edges,i=void 0===o?[]:o;return n.forEach(function(t){e[t.id]={degree:0,inDegree:0,outDegree:0}}),i.forEach(function(t){e[t.source].degree++,e[t.source].outDegree++,e[t.target].degree++,e[t.target].inDegree++}),e},Pg=Og,kg=function(t,e){return Og(t)[e]?Og(t)[e].inDegree:0},Cg=function(t,e){return Og(t)[e]?Og(t)[e].outDegree:0};function Tg(t,e,r,n){void 0===n&&(n=!0),function t(e,r,n,o,i){void 0===i&&(i=!0),o.enter({current:r,previous:n});var a=e.edges;mg(r,void 0===a?[]:a,i?"target":void 0).forEach(function(a){o.allowTraversal({previous:n,current:r,next:a})&&t(e,a,r,o,i)}),o.leave({current:r,previous:n})}(t,e,"",function(t){void 0===t&&(t={});var e,r=t,n=function(){},o=(e={},function(t){var r=t.next;return!e[r]&&(e[r]=!0,!0)});return r.allowTraversal=t.allowTraversal||o,r.enter=t.enter||n,r.leave=t.leave||n,r}(r),n)}var Ag=function(t,e,r){var n,o;void 0===r&&(r=!0);for(var i=[],a=0,s=Eg(t,!1);a<s.length;a++){var u=s[a];if(u.length)for(var l=u[0],c=l.id,f=[l],h=((n={})[c]=l,n),p=((o={})[c]=new Set,o);f.length>0;)for(var d=f.pop(),y=d.id,v=mg(y,t.edges),g=function(n){var o,a=v[n],s=t.nodes.find(function(t){return t.id===a});if(a===y)i.push(((o={})[a]=d,o));else if(a in p){if(!p[y].has(s)){for(var u=!0,l=[s,d],c=h[y];p[a].size&&!p[a].has(c)&&(l.push(c),c!==h[c.id]);)c=h[c.id];if(l.push(c),e&&r?(u=!1,l.findIndex(function(t){return e.indexOf(t.id)>-1})>-1&&(u=!0)):e&&!r&&l.findIndex(function(t){return e.indexOf(t.id)>-1})>-1&&(u=!1),u){for(var g={},m=1;m<l.length;m+=1)g[l[m-1].id]=l[m];l.length&&(g[l[l.length-1].id]=l[0]),i.push(g)}p[a].add(d)}}else h[a]=d,f.push(s),p[a]=new Set([d])},m=0;m<v.length;m+=1)g(m)}return i},Mg=function(t,e,r){void 0===r&&(r=!0);for(var n=[],o=new Set,i=[],a=[],s={},u={},l=function t(u,l,c){var f=!1;if(e&&!1===r&&e.indexOf(u.id)>-1)return f;n.push(u),o.add(u);for(var h=c[u.id],p=0;p<h.length;p+=1){if((v=s[h[p]])===l){for(var d={},y=1;y<n.length;y+=1)d[n[y-1].id]=n[y];n.length&&(d[n[n.length-1].id]=n[0]),a.push(d),f=!0}else o.has(v)||t(v,l,c)&&(f=!0)}if(f)!function(t){for(var e=[t];e.length>0;){var r=e.pop();o.has(r)&&(o.delete(r),i[r.id].forEach(function(t){e.push(t)}),i[r.id].clear())}}(u);else for(p=0;p<h.length;p+=1){var v=s[h[p]];i[v.id].has(u)||i[v.id].add(u)}return n.pop(),f},c=t.nodes,f=void 0===c?[]:c,h=0;h<f.length;h+=1){var p=f[h],d=p.id;u[d]=h,s[h]=p}if(e&&r){var y=function(t){var r=e[t];u[f[t].id]=u[r],u[r]=0,s[0]=f.find(function(t){return t.id===r}),s[u[f[t].id]]=f[t]};for(h=0;h<e.length;h++)y(h)}for(var v=function(n){for(var o,i,s=1/0,l=0;l<n.length;l+=1)for(var c=n[l],f=0;f<c.length;f++){var h=u[c[f].id];h<s&&(s=h,i=l)}var p=n[i],d=[];for(l=0;l<p.length;l+=1){var y=p[l];d[y.id]=[];for(var v=0,g=mg(y.id,t.edges,"target").filter(function(t){return p.map(function(t){return t.id}).indexOf(t)>-1});v<g.length;v++){var m=g[v];m!==y.id||!1===r&&e.indexOf(y.id)>-1?d[y.id].push(u[m]):a.push(((o={})[y.id]=y,o))}}return{component:p,adjList:d,minIdx:s}},g=0;g<f.length;){var m=f.filter(function(t){return u[t.id]>=g}),b=_g({nodes:m,edges:t.edges}).filter(function(t){return t.length>1});if(0===b.length)break;var w=v(b),S=w.minIdx,x=w.adjList,_=w.component;if(!(_.length>1))break;_.forEach(function(t){i[t.id]=new Set});var E=s[S];if(e&&r&&-1===e.indexOf(E.id))return a;l(E,E,x),g=S+1}return a},jg=function(t,e,r,n){return void 0===n&&(n=!0),e?Mg(t,r,n):Ag(t,r,n)},Ig=function(t){var e=null,r=t.nodes,n={},o={},i={},a={};(void 0===r?[]:r).forEach(function(t){o[t.id]=t});for(var s={enter:function(t){var r=t.current,a=t.previous;if(i[r]){e={};for(var s=r,u=a;u!==r;)e[s]=u,s=u,u=n[u];e[s]=u}else i[r]=r,delete o[r],n[r]=a},leave:function(t){var e=t.current;a[e]=e,delete i[e]},allowTraversal:function(t){var r=t.next;return!e&&!a[r]}};Object.keys(o).length;)Tg(t,Object.keys(o)[0],s);return e},Ng=function(t,e,r,n){var o=t.nodes,i=void 0===o?[]:o,a=t.edges,s=void 0===a?[]:a,u=[],l={},c={},f={};i.forEach(function(t,r){var n=t.id;u.push(n),c[n]=1/0,n===e&&(c[n]=0)});for(var h=i.length,p=function(t){var e=function(t,e,r){for(var n,o=1/0,i=0;i<e.length;i++){var a=e[i].id;!r[a]&&t[a]<=o&&(o=t[a],n=e[i])}return n}(c,i,l),o=e.id;if(l[o]=!0,c[o]===1/0)return"continue";(r?function(t,e){return e.filter(function(e){return e.source===t})}(o,s):bg(o,s)).forEach(function(t){var r=t.target,i=t.source,a=r===o?i:r,s=n&&t[n]?t[n]:1;c[a]>c[e.id]+s?(c[a]=c[e.id]+s,f[a]=[e.id]):c[a]===c[e.id]+s&&f[a].push(e.id)})},d=0;d<h;d++)p();f[e]=[e];var y={};for(var v in c)c[v]!==1/0&&Lg(e,v,f,y);var g={};for(var v in y)g[v]=y[v][0];return{length:c,path:g,allPath:y}};function Lg(t,e,r,n){if(t===e)return[t];if(n[e])return n[e];for(var o=[],i=0,a=r[e];i<a.length;i++){var s=Lg(t,a[i],r,n);if(!s)return;for(var u=0,l=s;u<l.length;u++){var c=l[u];(0,ng.isArray)(c)?o.push((0,rg.__spreadArray)((0,rg.__spreadArray)([],c,!0),[e],!1)):o.push([c,e])}}return n[e]=o,n[e]}var Rg,Dg=function(t,e,r,n,o){var i=Ng(t,e,n,o),a=i.length,s=i.path,u=i.allPath;return{length:a[r],path:s[r],allPath:u[r]}},Bg=function(t,e,r,n){var o;if(e===r)return[[e]];var i=t.edges,a=void 0===i?[]:i,s=[e],u=((o={})[e]=!0,o),l=[],c=[],f=n?mg(e,a,"target"):mg(e,a);for(l.push(f);s.length>0&&l.length>0;){var h=l[l.length-1];if(h.length){var p=h.shift();if(p&&(s.push(p),u[p]=!0,f=n?mg(p,a,"target"):mg(p,a),l.push(f.filter(function(t){return!u[t]}))),s[s.length-1]===r){var d=s.map(function(t){return t});c.push(d);y=s.pop();u[y]=!1,l.pop()}}else{var y=s.pop();u[y]=!1,l.pop()}}return c},Fg=function(t,e){for(var r=pg(t,e),n=[],o=r.length,i=0;i<o;i+=1){n[i]=[];for(var a=0;a<o;a+=1)i===a?n[i][a]=0:0!==r[i][a]&&r[i][a]?n[i][a]=r[i][a]:n[i][a]=1/0}for(var s=0;s<o;s+=1)for(i=0;i<o;i+=1)for(a=0;a<o;a+=1)n[i][a]>n[i][s]+n[s][a]&&(n[i][a]=n[i][s]+n[s][a]);return n},Gg=function(t,e,r,n){void 0===e&&(e=!1),void 0===r&&(r="weight"),void 0===n&&(n=1e3);var o=t.nodes,i=void 0===o?[]:o,a=t.edges,s=void 0===a?[]:a,u={},l={};i.forEach(function(t,e){var r=wg();t.clusterId=r,u[r]={id:r,nodes:[t]},l[t.id]={node:t,idx:e}});var c=[],f={};pg(t,e).forEach(function(t,e){var r=0,n=i[e].id;f[n]={},t.forEach(function(t,e){if(t){r+=t;var o=i[e].id;f[n][o]=t}}),c.push(r)});for(var h=0,p=function(){var t=!1;if(i.forEach(function(e){var r={};Object.keys(f[e.id]).forEach(function(t){var n=f[e.id][t],o=l[t].node.clusterId;r[o]||(r[o]=0),r[o]+=n});var n=-1/0,o=[];if(Object.keys(r).forEach(function(t){n<r[t]?(n=r[t],o=[t]):n===r[t]&&o.push(t)}),1!==o.length||o[0]!==e.clusterId){var i=o.indexOf(e.clusterId);if(i>=0&&o.splice(i,1),o&&o.length){t=!0;var a=u[e.clusterId],s=a.nodes.indexOf(e);a.nodes.splice(s,1);var c=Math.floor(Math.random()*o.length),h=u[o[c]];h.nodes.push(e),e.clusterId=h.id}}}),!t)return"break";h++};h<n&&"break"!==p(););Object.keys(u).forEach(function(t){var e=u[t];e.nodes&&e.nodes.length||delete u[t]});var d=[],y={};s.forEach(function(t){var e=t.source,n=t.target,o=t[r]||1,i=l[e].node.clusterId,a=l[n].node.clusterId,s="".concat(i,"---").concat(a);if(y[s])y[s].weight+=o,y[s].count++;else{var u={source:i,target:a,weight:o,count:1};y[s]=u,d.push(u)}});var v=[];return Object.keys(u).forEach(function(t){v.push(u[t])}),{clusters:v,clusterEdges:d}},Ug=function(){function t(t){this.arr=t}return t.prototype.getArr=function(){return this.arr||[]},t.prototype.add=function(e){var r,n=e.arr;if(!(null===(r=this.arr)||void 0===r?void 0:r.length))return new t(n);if(!(null===n||void 0===n?void 0:n.length))return new t(this.arr);if(this.arr.length===n.length){var o=[];for(var i in this.arr)o[i]=this.arr[i]+n[i];return new t(o)}},t.prototype.subtract=function(e){var r,n=e.arr;if(!(null===(r=this.arr)||void 0===r?void 0:r.length))return new t(n);if(!(null===n||void 0===n?void 0:n.length))return new t(this.arr);if(this.arr.length===n.length){var o=[];for(var i in this.arr)o[i]=this.arr[i]-n[i];return new t(o)}},t.prototype.avg=function(e){var r=[];if(0!==e)for(var n in this.arr)r[n]=this.arr[n]/e;return new t(r)},t.prototype.negate=function(){var e=[];for(var r in this.arr)e[r]=-this.arr[r];return new t(e)},t.prototype.squareEuclideanDistance=function(t){var e,r=t.arr;if(!(null===(e=this.arr)||void 0===e?void 0:e.length)||!(null===r||void 0===r?void 0:r.length))return 0;if(this.arr.length===r.length){var n=0;for(var o in this.arr)n+=Math.pow(this.arr[o]-t.arr[o],2);return n}},t.prototype.euclideanDistance=function(t){var e,r=t.arr;if(!(null===(e=this.arr)||void 0===e?void 0:e.length)||!(null===r||void 0===r?void 0:r.length))return 0;if(this.arr.length===r.length){var n=0;for(var o in this.arr)n+=Math.pow(this.arr[o]-t.arr[o],2);return Math.sqrt(n)}console.error("The two vectors are unequal in length.")},t.prototype.normalize=function(){var e=[],r=(0,ng.clone)(this.arr);r.sort(function(t,e){return t-e});var n=r[r.length-1],o=r[0];for(var i in this.arr)e[i]=(this.arr[i]-o)/(n-o);return new t(e)},t.prototype.norm2=function(){var t;if(!(null===(t=this.arr)||void 0===t?void 0:t.length))return 0;var e=0;for(var r in this.arr)e+=Math.pow(this.arr[r],2);return Math.sqrt(e)},t.prototype.dot=function(t){var e,r=t.arr;if(!(null===(e=this.arr)||void 0===e?void 0:e.length)||!(null===r||void 0===r?void 0:r.length))return 0;if(this.arr.length===r.length){var n=0;for(var o in this.arr)n+=this.arr[o]*t.arr[o];return n}console.error("The two vectors are unequal in length.")},t.prototype.equal=function(t){var e,r=t.arr;if((null===(e=this.arr)||void 0===e?void 0:e.length)!==(null===r||void 0===r?void 0:r.length))return!1;for(var n in this.arr)if(this.arr[n]!==r[n])return!1;return!0},t}(),zg=function(t,e){void 0===e&&(e=void 0);var r=[];return t.forEach(function(t){void 0===e&&r.push(t),void 0!==t[e]&&r.push(t[e])}),r};!function(t){t.EuclideanDistance="euclideanDistance"}(Rg||(Rg={}));var Vg=function(t,e,r){var n=[];(null===e||void 0===e?void 0:e.length)?n=e:(t.forEach(function(t){n=n.concat(Object.keys(t))}),n=(0,ng.uniq)(n));var o={};return n.forEach(function(e){var n=[];t.forEach(function(t){void 0!==t[e]&&""!==t[e]&&n.push(t[e])}),n.length&&!(null===r||void 0===r?void 0:r.includes(e))&&(o[e]=(0,ng.uniq)(n))}),o},Hg=function(t,e,r){var n=Vg(t,e,r),o=[];if(!Object.keys(n).length)return o;var i=Object.values(n).every(function(t){return t.every(function(t){return"number"==typeof t})});return t.forEach(function(t,e){var r=[];Object.keys(n).forEach(function(e){var o=t[e],a=n[e],s=a.findIndex(function(t){return o===t}),u=[];if(i)u.push(o);else for(var l=0;l<a.length;l++)l===s?u.push(1):u.push(0);r=r.concat(u)}),o[e]=r}),o},Wg=function(t,e,r,n){void 0===r&&(r=Rg.EuclideanDistance);var o=0;switch(r){case Rg.EuclideanDistance:o=new Ug(t).euclideanDistance(new Ug(e))}return o},qg=function(t,e,r,n){for(var o=e.length,i=2*n,a=0,s=0;s<o;s++)for(var u=t[s].clusterId,l=0;l<o;l++){if(u===t[l].clusterId)a+=(e[s][l]||0)-(r[s]||0)*(r[l]||0)/i}return a*=1/i},Yg=function(t,e){void 0===t&&(t=[]);for(var r=t.length,n=new Ug([]),o=0;o<r;o++)n=n.add(new Ug(e[o]));var i=n.avg(r);i.normalize();var a=0;for(o=0;o<r;o++){a+=(u=new Ug(e[o])).squareEuclideanDistance(i)}var s=[];t.forEach(function(){s.push([])});for(o=0;o<r;o++){var u=new Ug(e[o]);t[o].clusterInertial=0;for(var l=0;l<r;l++)if(o!==l){var c=new Ug(e[l]);s[o][l]=u.squareEuclideanDistance(c),t[o].clusterInertial+=s[o][l]}else s[o][l]=0}var f=0,h=2*r*a;for(o=0;o<r;o++){var p=t[o].clusterId;for(l=0;l<r;l++){var d=t[l].clusterId;if(o!==l&&p===d)f+=t[o].clusterInertial*t[l].clusterInertial/Math.pow(h,2)-s[o][l]/h}}return Number(f.toFixed(4))},Xg=function(t,e,r,n,o,i,a,s,u){void 0===e&&(e=!1),void 0===r&&(r="weight"),void 0===n&&(n=1e-4),void 0===o&&(o=!1),void 0===i&&(i=void 0),void 0===a&&(a=[]),void 0===s&&(s=["id"]),void 0===u&&(u=1);var l=t.nodes,c=void 0===l?[]:l,f=t.edges,h=void 0===f?[]:f,p=[];if(o){c.forEach(function(t,e){t.properties=t.properties||{},t.originIndex=e});var d=[];c.every(function(t){return t.hasOwnProperty("nodeType")})&&(d=Array.from(new Set(c.map(function(t){return t.nodeType}))),c.forEach(function(t){t.properties.nodeType=d.findIndex(function(e){return e===t.nodeType})}));var y=zg(c,i);p=Hg(y,a,s)}var v=1,g={},m={};c.forEach(function(t,e){var r=String(v++);t.clusterId=r,g[r]={id:r,nodes:[t]},m[t.id]={node:t,idx:e}});var b=pg(t,e),w=[],S={},x=0;b.forEach(function(t,e){var r=0,n=c[e].id;S[n]={},t.forEach(function(t,e){if(t){r+=t;var o=c[e].id;S[n][o]=t,x+=t}}),w.push(r)}),x/=2;for(var _=1/0,E=1/0,O=0,P=[],k={};;){_=o&&c.every(function(t){return t.hasOwnProperty("properties")})?qg(c,b,w,x)+Yg(c,p)*u:qg(c,b,w,x),0===O&&(E=_,P=c,k=g);var C=_>0&&_>E&&_-E<n;if(_>E&&(P=c.map(function(t){return{node:t,clusterId:t.clusterId}}),k=(0,ng.clone)(g),E=_),C||O>100)break;O++,Object.keys(g).forEach(function(t){var e=0;h.forEach(function(n){var o=n.source,i=n.target,a=m[o].node.clusterId,s=m[i].node.clusterId;(a===t&&s!==t||s===t&&a!==t)&&(e+=n[r]||1)}),g[t].sumTot=e}),c.forEach(function(t,e){var n,i=g[t.clusterId],a=0,s=w[e]/(2*x),l=0,c=i.nodes;c.forEach(function(t){var r=m[t.id].idx;l+=b[e][r]||0});var f=l-i.sumTot*s,d=c.filter(function(e){return e.id!==t.id}),y=[];d.forEach(function(t,e){y[e]=p[t.originIndex]});var v=Yg(d,p)*u,_=S[t.id];if(Object.keys(_).forEach(function(r){var i=m[r].node.clusterId;if(i!==t.clusterId){var l=g[i],c=l.nodes;if(c&&c.length){var h=0;c.forEach(function(t){var r=m[t.id].idx;h+=b[e][r]||0});var d=h-l.sumTot*s,y=c.concat([t]),w=[];y.forEach(function(t,e){w[e]=p[t.originIndex]});var S=Yg(y,p)*u,x=d-f;o&&(x=d+S-(f+v)),x>a&&(a=x,n=l)}}}),a>0){n.nodes.push(t);var E=t.clusterId;t.clusterId=n.id;var O=i.nodes.indexOf(t);i.nodes.splice(O,1);var P=0,k=0;h.forEach(function(t){var e=t.source,o=t.target,i=m[e].node.clusterId,a=m[o].node.clusterId;(i===n.id&&a!==n.id||a===n.id&&i!==n.id)&&(P+=t[r]||1),(i===E&&a!==E||a===E&&i!==E)&&(k+=t[r]||1)}),n.sumTot=P,i.sumTot=k}})}var T={},A=0;Object.keys(k).forEach(function(t){var e=k[t];if(e.nodes&&e.nodes.length){var r=String(A+1);r!==t&&(e.id=r,e.nodes=e.nodes.map(function(t){return{id:t.id,clusterId:r}}),k[r]=e,T[t]=r,delete k[t],A++)}else delete k[t]}),P.forEach(function(t){var e=t.node,r=t.clusterId;e&&(e.clusterId=r,e.clusterId&&T[e.clusterId]&&(e.clusterId=T[e.clusterId]))});var M=[],j={};h.forEach(function(t){var e=t.source,n=t.target,o=t[r]||1,i=m[e].node.clusterId,a=m[n].node.clusterId;if(i&&a){var s="".concat(i,"---").concat(a);if(j[s])j[s].weight+=o,j[s].count++;else{var u={source:i,target:a,weight:o,count:1};j[s]=u,M.push(u)}}});var I=[];return Object.keys(k).forEach(function(t){I.push(k[t])}),{clusters:I,clusterEdges:M}},Jg=function(t,e,r,n,o,i,a,s){return void 0===e&&(e=!1),void 0===r&&(r="weight"),void 0===n&&(n=1e-4),void 0===o&&(o=void 0),void 0===i&&(i=[]),void 0===a&&(a=["id"]),void 0===s&&(s=1),Xg(t,e,r,n,!0,o,i,a,s)},Kg=function(t,e){var r;void 0===e&&(e=1);for(var n=(0,ng.clone)(t),o=n.nodes,i=void 0===o?[]:o,a=n.edges,s=void 0===a?[]:a,u=function(){var t=Pg({nodes:i,edges:s}),n=Object.keys(t);n.sort(function(e,r){var n,o;return(null===(n=t[e])||void 0===n?void 0:n.degree)-(null===(o=t[r])||void 0===o?void 0:o.degree)});var o=n[0];if(!i.length||(null===(r=t[o])||void 0===r?void 0:r.degree)>=e)return"break";var a=i.findIndex(function(t){return t.id===o});i.splice(a,1),s=s.filter(function(t){return!(t.source===o||t.target===o)})};"break"!==u(););return{nodes:i,edges:s}},Qg=function(t,e,r){var n=[];switch(t){case Rg.EuclideanDistance:n=e[r];break;default:n=[]}return n},Zg=function(t,e,r,n,o,i){void 0===e&&(e=3),void 0===r&&(r=void 0),void 0===n&&(n=[]),void 0===o&&(o=["id"]),void 0===i&&(i=Rg.EuclideanDistance);var a=t.nodes,s=void 0===a?[]:a,u=t.edges,l=void 0===u?[]:u,c={clusters:[{id:"0",nodes:s}],clusterEdges:[]};if(i===Rg.EuclideanDistance&&!s.every(function(t){return t.hasOwnProperty(r)}))return c;var f=[],h=[];if(i===Rg.EuclideanDistance&&(f=zg(s,r),h=Hg(f,n,o)),!h.length)return c;for(var p=(0,ng.uniq)(h.map(function(t){return t.join("")})),d=Math.min(e,s.length,p.length),y=0;y<s.length;y++)s[y].originIndex=y;var v=[],g=[],m=[];for(y=0;y<d;y++)if(0===y){var b=Math.floor(Math.random()*s.length);switch(i){case Rg.EuclideanDistance:v[y]=h[b];break;default:v[y]=[]}g.push(b),m[y]=[s[b]],s[b].clusterId=String(y)}else{for(var w=-1/0,S=0,x=function(t){if(!g.includes(t)){for(var e=0,r=0;r<v.length;r++){var n=0;switch(i){case Rg.EuclideanDistance:n=Wg(h[s[t].originIndex],v[r],i)}e+=n}var o=e/v.length;o>w&&!v.find(function(e){return(0,ng.isEqual)(e,Qg(i,h,s[t].originIndex))})&&(w=o,S=t)}},_=0;_<s.length;_++)x(_);v[y]=Qg(i,h,S),g.push(S),m[y]=[s[S]],s[S].clusterId=String(y)}for(var E=0;;){for(y=0;y<s.length;y++){var O=0,P=1/0;if(0!==E||!g.includes(y)){for(var k=0;k<v.length;k++){var C=0;switch(i){case Rg.EuclideanDistance:C=Wg(h[y],v[k],i)}C<P&&(P=C,O=k)}if(void 0!==s[y].clusterId)for(var T=m[Number(s[y].clusterId)].length-1;T>=0;T--)m[Number(s[y].clusterId)][T].id===s[y].id&&m[Number(s[y].clusterId)].splice(T,1);s[y].clusterId=String(O),m[O].push(s[y])}}var A=!1;for(y=0;y<m.length;y++){var M=m[y],j=new Ug([]);for(k=0;k<M.length;k++)j=j.add(new Ug(h[M[k].originIndex]));var I=j.avg(M.length);I.equal(new Ug(v[y]))||(A=!0,v[y]=I.getArr())}if(E++,s.every(function(t){return void 0!==t.clusterId})&&A||E>=1e3)break}var N=[],L={};return l.forEach(function(t){var e,r,n=t.source,o=t.target,i=null===(e=s.find(function(t){return t.id===n}))||void 0===e?void 0:e.clusterId,a=null===(r=s.find(function(t){return t.id===o}))||void 0===r?void 0:r.clusterId,u="".concat(i,"---").concat(a);if(L[u])L[u].count++;else{var l={source:i,target:a,count:1};L[u]=l,N.push(l)}}),{clusters:m,clusterEdges:N}},$g=function(t,e){var r=new Ug(e),n=r.norm2(),o=new Ug(t),i=o.norm2(),a=r.dot(o),s=n*i,u=s?a/s:0;return u},tm=function(t,e,r,n,o){void 0===t&&(t=[]),void 0===r&&(r=void 0),void 0===n&&(n=[]),void 0===o&&(o=[]);var i=(0,ng.clone)(t.filter(function(t){return t.id!==e.id})),a=t.findIndex(function(t){return t.id===e.id}),s=zg(t,r),u=Hg(s,n,o),l=u[a],c=[];return i.forEach(function(t,r){if(t.id!==e.id){var n=u[r],o=$g(n,l);c.push(o),t.cosineSimilarity=o}}),i.sort(function(t,e){return e.cosineSimilarity-t.cosineSimilarity}),{allCosineSimilarity:c,similarNodes:i}},em=function(){function t(t){this.count=t.length,this.parent={};for(var e=0,r=t;e<r.length;e++){var n=r[e];this.parent[n]=n}}return t.prototype.find=function(t){for(;this.parent[t]!==t;)t=this.parent[t];return t},t.prototype.union=function(t,e){var r=this.find(t),n=this.find(e);r!==n&&(r<n?(this.parent[e]!==e&&this.union(this.parent[e],t),this.parent[e]=this.parent[t]):(this.parent[t]!==t&&this.union(this.parent[t],e),this.parent[t]=this.parent[e]))},t.prototype.connected=function(t,e){return this.find(t)===this.find(e)},t}(),rm=function(t,e){return t-e},nm=function(){function t(t){void 0===t&&(t=rm),this.compareFn=t,this.list=[]}return t.prototype.getLeft=function(t){return 2*t+1},t.prototype.getRight=function(t){return 2*t+2},t.prototype.getParent=function(t){return 0===t?null:Math.floor((t-1)/2)},t.prototype.isEmpty=function(){return this.list.length<=0},t.prototype.top=function(){return this.isEmpty()?void 0:this.list[0]},t.prototype.delMin=function(){var t=this.top(),e=this.list.pop();return this.list.length>0&&(this.list[0]=e,this.moveDown(0)),t},t.prototype.insert=function(t){if(null!==t){this.list.push(t);var e=this.list.length-1;return this.moveUp(e),!0}return!1},t.prototype.moveUp=function(t){for(var e=this.getParent(t);t&&t>0&&this.compareFn(this.list[e],this.list[t])>0;){var r=this.list[e];this.list[e]=this.list[t],this.list[t]=r,t=e,e=this.getParent(t)}},t.prototype.moveDown=function(t){var e,r=t,n=this.getLeft(t),o=this.getRight(t),i=this.list.length;null!==n&&n<i&&this.compareFn(this.list[r],this.list[n])>0?r=n:null!==o&&o<i&&this.compareFn(this.list[r],this.list[o])>0&&(r=o),t!==r&&(e=[this.list[r],this.list[t]],this.list[t]=e[0],this.list[r]=e[1],this.moveDown(r))},t}(),om=function(t,e){var r=[],n=t.nodes,o=void 0===n?[]:n,i=t.edges,a=void 0===i?[]:i;if(0===o.length)return r;var s=o[0],u=new Set;u.add(s);var l=new nm(function(t,r){return e?t.weight-r.weight:0});for(bg(s.id,a).forEach(function(t){l.insert(t)});!l.isEmpty();){var c=l.delMin(),f=c.source,h=c.target;u.has(f)&&u.has(h)||(r.push(c),u.has(f)||(u.add(f),bg(f,a).forEach(function(t){l.insert(t)})),u.has(h)||(u.add(h),bg(h,a).forEach(function(t){l.insert(t)})))}return r},im=function(t,e){var r=[],n=t.nodes,o=void 0===n?[]:n,i=t.edges,a=void 0===i?[]:i;if(0===o.length)return r;var s=a.map(function(t){return t});e&&s.sort(function(t,e){return t.weight-e.weight});for(var u=new em(o.map(function(t){return t.id}));s.length>0;){var l=s.shift(),c=l.source,f=l.target;u.connected(c,f)||(r.push(l),u.union(c,f))}return r},am=function(t,e,r){return r?{prim:om,kruskal:im}[r](t,e):im(t,e)},sm=function(t,e,r){"number"!=typeof e&&(e=1e-6),"number"!=typeof r&&(r=.85);for(var n,o=1,i=0,a=1e3,s=t.nodes,u=void 0===s?[]:s,l=t.edges,c=void 0===l?[]:l,f=u.length,h={},p={},d=0;d<f;++d)h[v=(S=u[d]).id]=1/f,p[v]=1/f;for(var y=Pg(t);a>0&&o>e;){for(i=0,d=0;d<f;++d){var v=(S=u[d]).id;if(n=0,0===y[S.id].inDegree)h[v]=0;else{for(var g=mg(v,c,"source"),m=0;m<g.length;++m){var b=g[m],w=y[b].outDegree;w>0&&(n+=p[b]/w)}h[v]=r*n,i+=h[v]}}for(i=(1-i)/f,o=0,d=0;d<f;++d){var S;n=h[v=(S=u[d]).id]+i,o+=Math.abs(n-p[v]),p[v]=n}a-=1}return p},um=-1,lm=-1,cm="-1",fm="-1",hm=function(){return function(t,e,r,n){void 0===t&&(t=um),void 0===e&&(e=lm),void 0===r&&(r=lm),void 0===n&&(n=cm),this.id=t,this.from=e,this.to=r,this.label=n}}(),pm=function(){function t(t,e){void 0===t&&(t=lm),void 0===e&&(e=fm),this.id=t,this.label=e,this.edges=[],this.edgeMap={}}return t.prototype.addEdge=function(t){this.edges.push(t),this.edgeMap[t.id]=t},t}(),dm=function(){function t(t,e,r){void 0===t&&(t=lm),void 0===e&&(e=!0),void 0===r&&(r=!1),this.id=t,this.edgeIdAutoIncrease=e,this.edges=[],this.nodes=[],this.nodeMap={},this.edgeMap={},this.nodeLabelMap={},this.edgeLabelMap={},this.counter=0,this.directed=r}return t.prototype.getNodeNum=function(){return this.nodes.length},t.prototype.addNode=function(t,e){if(!this.nodeMap[t]){var r=new pm(t,e);this.nodes.push(r),this.nodeMap[t]=r,this.nodeLabelMap[e]||(this.nodeLabelMap[e]=[]),this.nodeLabelMap[e].push(t)}},t.prototype.addEdge=function(t,e,r,n){if((this.edgeIdAutoIncrease||void 0===t)&&(t=this.counter++),!(this.nodeMap[e]&&this.nodeMap[r]&&this.nodeMap[r].edgeMap[t])){var o=new hm(t,e,r,n);if(this.edges.push(o),this.edgeMap[t]=o,this.nodeMap[e].addEdge(o),this.edgeLabelMap[n]||(this.edgeLabelMap[n]=[]),this.edgeLabelMap[n].push(o),!this.directed){var i=new hm(t,r,e,n);this.nodeMap[r].addEdge(i),this.edgeLabelMap[n].push(i)}}},t}(),ym=function(){function t(t,e,r,n,o){this.fromNode=t,this.toNode=e,this.nodeEdgeNodeLabel={nodeLabel1:r||fm,edgeLabel:n||cm,nodeLabel2:o||fm}}return t.prototype.equalTo=function(t){return this.fromNode===t.formNode&&this.toNode===t.toNode&&this.nodeEdgeNodeLabel===t.nodeEdgeNodeLabel},t.prototype.notEqualTo=function(t){return!this.equalTo(t)},t}(),vm=function(){function t(){this.rmpath=[],this.dfsEdgeList=[]}return t.prototype.equalTo=function(t){var e=this.dfsEdgeList.length;if(e!==t.length)return!1;for(var r=0;r<e;r++)if(this.dfsEdgeList[r]!==t[r])return!1;return!0},t.prototype.notEqualTo=function(t){return!this.equalTo(t)},t.prototype.pushBack=function(t,e,r,n,o){return this.dfsEdgeList.push(new ym(t,e,r,n,o)),this.dfsEdgeList},t.prototype.toGraph=function(t,e){void 0===t&&(t=-1),void 0===e&&(e=!1);var r=new dm(t,!0,e);return this.dfsEdgeList.forEach(function(t){var e=t.fromNode,n=t.toNode,o=t.nodeEdgeNodeLabel,i=o.nodeLabel1,a=o.edgeLabel,s=o.nodeLabel2;i!==fm&&r.addNode(e,i),s!==fm&&r.addNode(n,s),i!==fm&&s!==i&&r.addEdge(void 0,e,n,a)}),r},t.prototype.buildRmpath=function(){this.rmpath=[];for(var t=void 0,e=this.dfsEdgeList.length-1;e>=0;e--){var r=this.dfsEdgeList[e],n=r.fromNode,o=r.toNode;n<o&&(void 0===t||o===t)&&(this.rmpath.push(e),t=n)}return this.rmpath},t.prototype.getNodeNum=function(){var t={};return this.dfsEdgeList.forEach(function(e){t[e.fromNode]||(t[e.fromNode]=!0),t[e.toNode]||(t[e.toNode]=!0)}),Object.keys(t).length},t}(),gm=function(){function t(t){if(this.his={},this.nodesUsed={},this.edgesUsed={},this.edges=[],t){for(;t;){var e=t.edge;this.edges.push(e),this.nodesUsed[e.from]=1,this.nodesUsed[e.to]=1,this.edgesUsed[e.id]=1,t=t.preNode}this.edges=this.edges.reverse()}}return t.prototype.hasNode=function(t){return 1===this.nodesUsed[t.id]},t.prototype.hasEdge=function(t){return 1===this.edgesUsed[t.id]},t}(),mm=function(){function t(t){var e=t.graphs,r=t.minSupport,n=void 0===r?2:r,o=t.minNodeNum,i=void 0===o?1:o,a=t.maxNodeNum,s=void 0===a?4:a,u=t.top,l=void 0===u?10:u,c=t.directed,f=void 0!==c&&c,h=t.verbose,p=void 0!==h&&h;this.graphs=e,this.dfsCode=new vm,this.support=0,this.frequentSize1Subgraphs=[],this.frequentSubgraphs=[],this.minSupport=n,this.top=l,this.directed=f,this.counter=0,this.maxNodeNum=s,this.minNodeNum=i,this.verbose=p,this.maxNodeNum<this.minNodeNum&&(this.maxNodeNum=this.minNodeNum),this.reportDF=[]}return t.prototype.findForwardRootEdges=function(t,e){var r=this,n=[],o=t.nodeMap;return e.edges.forEach(function(t){(r.directed||e.label<=o[t.to].label)&&n.push(t)}),n},t.prototype.findBackwardEdge=function(t,e,r,n){if(!this.directed&&e===r)return null;for(var o=t.nodeMap,i=o[r.to].edges,a=i.length,s=0;s<a;s++){var u=i[s];if(!n.hasEdge(u)&&u.to===e.from)if(this.directed){if(o[e.from].label<o[r.to].label||o[e.from].label===o[r.to].label&&e.label<=u.label)return u}else if(e.label<u.label||e.label===u.label&&o[e.to].label<=o[r.to].label)return u}return null},t.prototype.findForwardPureEdges=function(t,e,r,n){for(var o=[],i=e.to,a=t.nodeMap[i].edges,s=a.length,u=0;u<s;u++){var l=a[u],c=t.nodeMap[l.to];r<=c.label&&!n.hasNode(c)&&o.push(l)}return o},t.prototype.findForwardRmpathEdges=function(t,e,r,n){for(var o=[],i=t.nodeMap,a=i[e.to].label,s=i[e.from].edges,u=s.length,l=0;l<u;l++){var c=s[l],f=i[c.to].label;e.to===c.to||r>f||n.hasNode(i[c.to])||(e.label<c.label||e.label===c.label&&a<=f)&&o.push(c)}return o},t.prototype.getSupport=function(t){var e={};return t.forEach(function(t){e[t.graphId]||(e[t.graphId]=!0)}),Object.keys(e).length},t.prototype.findMinLabel=function(t){var e=void 0;return Object.keys(t).forEach(function(r){var n=t[r],o=n.nodeLabel1,i=n.edgeLabel,a=n.nodeLabel2;e?(o<e.nodeLabel1||o===e.nodeLabel1&&i<e.edgeLabel||o===e.nodeLabel1&&i===e.edgeLabel&&a<e.nodeLabel2)&&(e={nodeLabel1:o,edgeLabel:i,nodeLabel2:a}):e={nodeLabel1:o,edgeLabel:i,nodeLabel2:a}}),e},t.prototype.isMin=function(){var t=this,e=this.dfsCode;if(this.verbose&&console.log("isMin checking",e),1===e.dfsEdgeList.length)return!0;var r=this.directed,n=e.toGraph(-1,r),o=n.nodeMap,i=new vm,a={};n.nodes.forEach(function(e){t.findForwardRootEdges(n,e).forEach(function(t){var r=o[t.to],i="".concat(e.label,"-").concat(t.label,"-").concat(r.label);a[i]||(a[i]={projected:[],nodeLabel1:e.label,edgeLabel:t.label,nodeLabel2:r.label});var s={graphId:n.id,edge:t,preNode:null};a[i].projected.push(s)})});var s=this.findMinLabel(a);if(s){i.dfsEdgeList.push(new ym(0,1,s.nodeLabel1,s.edgeLabel,s.nodeLabel2));var u="".concat(s.nodeLabel1,"-").concat(s.edgeLabel,"-").concat(s.nodeLabel2);return function a(s){for(var u=i.buildRmpath(),l=i.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,c=i.dfsEdgeList[u[0]].toNode,f={},h=!1,p=0,d=r?-1:0,y=function(e){if(h)return"break";s.forEach(function(r){var o=new gm(r),a=t.findBackwardEdge(n,o.edges[u[e]],o.edges[u[0]],o);a&&(f[a.label]||(f[a.label]={projected:[],edgeLabel:a.label}),f[a.label].projected.push({graphId:n.id,edge:f,preNode:r}),p=i.dfsEdgeList[u[e]].fromNode,h=!0)})},v=u.length-1;v>d&&"break"!==y(v);v--);if(h){var g=t.findMinLabel(f);i.dfsEdgeList.push(new ym(c,p,fm,g.edgeLabel,fm));var m=i.dfsEdgeList.length-1;return t.dfsCode.dfsEdgeList[m]===i.dfsEdgeList[m]&&a(f[g.edgeLabel].projected)}var b={};h=!1;var w=0;s.forEach(function(e){var r=new gm(e),i=t.findForwardPureEdges(n,r.edges[u[0]],l,r);i.length>0&&(h=!0,w=c,i.forEach(function(t){var r="".concat(t.label,"-").concat(o[t.to].label);b[r]||(b[r]={projected:[],edgeLabel:t.label,nodeLabel2:o[t.to].label}),b[r].projected.push({graphId:n.id,edge:t,preNode:e})}))});var S=u.length,x=function(e){if(h)return"break";var r=u[e];s.forEach(function(e){var a=new gm(e),s=t.findForwardRmpathEdges(n,a.edges[r],l,a);s.length>0&&(h=!0,w=i.dfsEdgeList[r].fromNode,s.forEach(function(t){var r="".concat(t.label,"-").concat(o[t.to].label);b[r]||(b[r]={projected:[],edgeLabel:t.label,nodeLabel2:o[t.to].label}),b[r].projected.push({graphId:n.id,edge:t,preNode:e})}))})};for(v=0;v<S&&"break"!==x(v);v++);if(!h)return!0;var _=t.findMinLabel(b);i.dfsEdgeList.push(new ym(w,c+1,fm,_.edgeLabel,_.nodeLabel2));var E=i.dfsEdgeList.length-1;return e.dfsEdgeList[E]===i.dfsEdgeList[E]&&a(b["".concat(_.edgeLabel,"-").concat(_.nodeLabel2)].projected)}(a[u].projected)}},t.prototype.report=function(){if(!(this.dfsCode.getNodeNum()<this.minNodeNum)){this.counter++;var t=this.dfsCode.toGraph(this.counter,this.directed);this.frequentSubgraphs.push((0,ng.clone)(t))}},t.prototype.subGraphMining=function(t){var e=this;if(!(this.getSupport(t)<this.minSupport)&&this.isMin()){this.report();var r=this.dfsCode.getNodeNum(),n=this.dfsCode.buildRmpath(),o=this.dfsCode.dfsEdgeList[n[0]].toNode,i=this.dfsCode.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,a={},s={};t.forEach(function(t){for(var u=e.graphs[t.graphId],l=u.nodeMap,c=new gm(t),f=n.length-1;f>=0;f--){var h=e.findBackwardEdge(u,c.edges[n[f]],c.edges[n[0]],c);if(h){var p="".concat(e.dfsCode.dfsEdgeList[n[f]].fromNode,"-").concat(h.label);s[p]||(s[p]={projected:[],toNodeId:e.dfsCode.dfsEdgeList[n[f]].fromNode,edgeLabel:h.label}),s[p].projected.push({graphId:t.graphId,edge:h,preNode:t})}}if(!(r>=e.maxNodeNum)){e.findForwardPureEdges(u,c.edges[n[0]],i,c).forEach(function(e){var r="".concat(o,"-").concat(e.label,"-").concat(l[e.to].label);a[r]||(a[r]={projected:[],fromNodeId:o,edgeLabel:e.label,nodeLabel2:l[e.to].label}),a[r].projected.push({graphId:t.graphId,edge:e,preNode:t})});var d=function(r){e.findForwardRmpathEdges(u,c.edges[n[r]],i,c).forEach(function(o){var i="".concat(e.dfsCode.dfsEdgeList[n[r]].fromNode,"-").concat(o.label,"-").concat(l[o.to].label);a[i]||(a[i]={projected:[],fromNodeId:e.dfsCode.dfsEdgeList[n[r]].fromNode,edgeLabel:o.label,nodeLabel2:l[o.to].label}),a[i].projected.push({graphId:t.graphId,edge:o,preNode:t})})};for(f=0;f<n.length;f++)d(f)}}),Object.keys(s).forEach(function(t){var r=s[t],n=r.toNodeId,i=r.edgeLabel;e.dfsCode.dfsEdgeList.push(new ym(o,n,"-1",i,"-1")),e.subGraphMining(s[t].projected),e.dfsCode.dfsEdgeList.pop()}),Object.keys(a).forEach(function(t){var r=a[t],n=r.fromNodeId,i=r.edgeLabel,s=r.nodeLabel2;e.dfsCode.dfsEdgeList.push(new ym(n,o+1,fm,i,s)),e.subGraphMining(a[t].projected),e.dfsCode.dfsEdgeList.pop()})}},t.prototype.generate1EdgeFrequentSubGraphs=function(){var t=this.graphs,e=this.directed,r=this.minSupport,n=this.frequentSize1Subgraphs,o={},i={},a={},s={};return Object.keys(t).forEach(function(r){var n=t[r],u=n.nodeMap;n.nodes.forEach(function(t,n){var l=t.label,c="".concat(r,"-").concat(l);if(!a[c]){var f=o[l]||0;f++,o[l]=f}a[c]={graphKey:r,label:l},t.edges.forEach(function(t){var n=l,o=u[t.to].label;if(!e&&n>o){var a=o;o=n,n=a}var c=t.label,f="".concat(r,"-").concat(n,"-").concat(c,"-").concat(o),h="".concat(n,"-").concat(c,"-").concat(o);if(!i[h]){var p=i[h]||0;p++,i[h]=p}s[f]={graphId:r,nodeLabel1:n,edgeLabel:c,nodeLabel2:o}})})}),Object.keys(o).forEach(function(t){if(!(o[t]<r)){var e={nodes:[],edges:[]};e.nodes.push({id:"0",label:t}),n.push(e)}}),n},t.prototype.run=function(){var t=this;if(this.frequentSize1Subgraphs=this.generate1EdgeFrequentSubGraphs(),!(this.maxNodeNum<2)){var e=this.graphs,r=(this.directed,{});Object.keys(e).forEach(function(n){var o=e[n],i=o.nodeMap;o.nodes.forEach(function(e){t.findForwardRootEdges(o,e).forEach(function(t){var o=i[t.to],a="".concat(e.label,"-").concat(t.label,"-").concat(o.label);r[a]||(r[a]={projected:[],nodeLabel1:e.label,edgeLabel:t.label,nodeLabel2:o.label});var s={graphId:n,edge:t,preNode:null};r[a].projected.push(s)})})}),Object.keys(r).forEach(function(e){var n=r[e],o=n.projected,i=n.nodeLabel1,a=n.edgeLabel,s=n.nodeLabel2;t.dfsCode.dfsEdgeList.push(new ym(0,1,i,a,s)),t.subGraphMining(o),t.dfsCode.dfsEdgeList.pop()})}},t}(),bm=function(t){var e=t.graphs,r=t.directed,n=void 0!==r&&r,o=t.nodeLabelProp,i=void 0===o?"cluster":o,a=t.edgeLabelProp,s=void 0===a?"cluster":a,u=function(t,e,r,n){var o={};return Object.keys(t).forEach(function(i,a){var s=t[i],u=new dm(a,!0,e),l={};s.nodes.forEach(function(t,e){u.addNode(e,t[r]),l[t.id]=e}),s.edges.forEach(function(t,e){var r=l[t.source],o=l[t.target];u.addEdge(-1,r,o,t[n])}),u&&u.getNodeNum()&&(o[u.id]=u)}),o}(e,n,i,s),l=t.minSupport,c=t.maxNodeNum,f=t.minNodeNum,h=t.verbose,p=t.top,d=new mm({graphs:u,minSupport:l,maxNodeNum:c,minNodeNum:f,top:p,verbose:h,directed:n});return d.run(),function(t,e,r){var n=[];return t.forEach(function(t){var o={nodes:[],edges:[]};t.nodes.forEach(function(t){var r;o.nodes.push(((r={id:"".concat(t.id)})[e]=t.label,r))}),t.edges.forEach(function(t){var e;o.edges.push(((e={source:"".concat(t.from),target:"".concat(t.to)})[r]=t.label,e))}),n.push(o)}),n}(d.frequentSubgraphs,i,s)},wm=function(t,e,r,n){void 0===r&&(r="cluster"),void 0===n&&(n=2);var o=[],i=t.nodes;return e.forEach(function(t,e){o.push(Sm(i,t,e,r,n))}),o},Sm=function(t,e,r,n,o){var i=[r],a=[],s={};return e.forEach(function(e,u){if(e<=o&&r!==u){i.push(u),a.push(t[u]);var l=t[u][n];s[l]?(s[l].count++,s[l].dists.push(e)):s[l]={count:1,dists:[e]}}}),Object.keys(s).forEach(function(t){s[t].dists=s[t].dists.sort(function(t,e){return t-e})}),{nodeIdx:r,nodeId:t[r].id,nodeIdxs:i,neighbors:a,neighborNum:i.length-1,nodeLabelCountMap:s}},xm=function(t,e,r,n){var o=r.nodes;return n||(n={}),Object.keys(t).forEach(function(i){var a,s;if(!n||!n[i]){n[i]={nodes:[],edges:[]};var u=t[i],l=null===(a=e[u.start])||void 0===a?void 0:a.nodeIdxs,c=null===(s=e[u.end])||void 0===s?void 0:s.nodeIdxs;if(l&&c){var f=new Set(c),h=l.filter(function(t){return f.has(t)});if(h&&h.length){for(var p={},d=h.length,y=0;y<d;y++){var v=o[h[y]];n[i].nodes.push(v),p[v.id]=!0}r.edges.forEach(function(t){p[t.source]&&p[t.target]&&n[i].edges.push(t)})}}}}),n},_m=function(t,e,r,n){var o,i,a={};t.nodes.forEach(function(t){a[t.id]=t});var s=0;return!(null===(o=null===e||void 0===e?void 0:e.edges)||void 0===o?void 0:o.length)||(null===(i=null===e||void 0===e?void 0:e.nodes)||void 0===i?void 0:i.length)<2?0:(t.edges.forEach(function(t){var o=a[t.source][r],i=a[t.target][r],u=null===e||void 0===e?void 0:e.nodes[0][r],l=null===e||void 0===e?void 0:e.nodes[1][r],c=null===e||void 0===e?void 0:e.edges[0][n];t[n]===c&&(o===u&&i===l||o===l&&i===u)&&s++}),s)},Em=function(t,e){var r={},n={};return t.forEach(function(t,o){r[t.id]={idx:o,node:t,degree:0,inDegree:0,outDegree:0};var i=t[e];n[i]||(n[i]=[]),n[i].push(t)}),{nodeMap:r,nodeLabelMap:n}},Om=function(t,e,r){var n={},o={};return t.forEach(function(t,i){n["".concat(wg)]={idx:i,edge:t};var a=t[e];o[a]||(o[a]=[]),o[a].push(t);var s=r[t.source];s&&(s.degree++,s.outDegree++);var u=r[t.target];u&&(u.degree++,u.inDegree++)}),{edgeMap:n,edgeLabelMap:o}},Pm=function(t,e,r){var n=e.length,o={};return e.forEach(function(e,i){for(var a=r?0:i+1,s=t[i].id,u=a;u<n;u++)if(i!==u){var l=t[u].id,c=e[u];o["".concat(s,"-").concat(l)]=c,r||(o["".concat(l,"-").concat(s)]=c)}}),o},km=function(t,e,r,n,o,i,a,s,u,l,c){var f,h="".concat(e.id,"-").concat(r.id);if(l&&l[h])return l[h];var p=c?c[h]:void 0;if(!p){var d=((f={})[h]={start:n[e.id].idx,end:n[r.id].idx,distance:o},f);p=(c=xm(d,i,t,c))[h]}return _m(p,a,s,u)},Cm=function(t,e,r,n){var o,i,a,s=null===(o=t[e])||void 0===o?void 0:o.degree,u=null===(i=t[e])||void 0===i?void 0:i.inDegree,l=null===(a=t[e])||void 0===a?void 0:a.outDegree;return void 0===t[e]&&(s=1/0,u=1/0,l=1/0,n[e].forEach(function(t){var e=r[t.id].degree;s>e&&(s=e);var n=r[t.id].inDegree;u>n&&(u=n);var o=r[t.id].outDegree;l>o&&(l=o)}),t[e]={degree:s,inDegree:u,outDegree:l}),{minPatternNodeLabelDegree:s,minPatternNodeLabelInDegree:u,minPatternNodeLabelOutDegree:l}},Tm=function(t,e,r,n,o,i,a){var s;if(void 0===r&&(r=!1),void 0===i&&(i="cluster"),void 0===a&&(a="cluster"),t&&t.nodes){var u=t.nodes.length;if(u){var l=Fg(t,r),c=Fg(e,r),f=Pm(t.nodes,l,r),h=Pm(e.nodes,c,r),p=Em(t.nodes,i),d=p.nodeMap,y=p.nodeLabelMap,v=Em(e.nodes,i),g=v.nodeMap,m=v.nodeLabelMap;Om(t.edges,a,d);var b=Om(e.edges,a,g).edgeLabelMap,w=[];null===c||void 0===c||c.forEach(function(t){w=w.concat(t)}),o||(o=Math.max.apply(Math,(0,rg.__spreadArray)((0,rg.__spreadArray)([],w,!1),[2],!1))),n||(n=o);var S=wm(t,l,i,n),x=wm(e,c,i,n),_=function(t,e,r,n,o){var i=Math.ceil(r/e),a={},s=0;return n.forEach(function(t,n){for(var u=0,l=0,c=t.nodeIdxs,f=t.neighborNum-1;u<i;){for(var h=c[1+Math.floor(Math.random()*f)],p=0;(a["".concat(n,"-").concat(h)]||a["".concat(h,"-").concat(n)])&&(h=Math.floor(Math.random()*e),!(++p>2*e)););if(p<2*e&&(a["".concat(n,"-").concat(h)]={start:n,end:h,distance:o[n][h]},u++,++s>=r))return a;if(++l>2*e)break}u<i&&(i=(i+(i-u))/(e-n-1))}),a}(0,u,Math.min(100,u*(u-1)/2),S,l),E=xm(_,S,t),O=bm({graphs:E,nodeLabelProp:i,edgeLabelProp:a,minSupport:1,minNodeNum:1,maxNodeNum:4,directed:r}).slice(0,10),P=O.length,k=[];O.forEach(function(t,e){k[e]={},Object.keys(E).forEach(function(r){var n=E[r],o=_m(n,t,i,a);k[e][r]=o})});var C=function(t,e,r){for(var n=1/0,o=0,i=function(e){var r=t[e],i=[];Object.keys(r).sort(function(t,e){return r[t]-r[e]}).forEach(function(t,e){i[e%10]||(i[e%10]={graphs:[],totalCount:0,aveCount:0}),i[e%10].graphs.push(t),i[e%10].totalCount+=r[t]});var a=0,s=[];i.forEach(function(t){var e=t.totalCount/t.graphs.length;t.aveCount=e,s.push(e);var n=0,o=t.length;t.graphs.forEach(function(e,o){var i=r[e];t.graphs.forEach(function(t,e){o!==e&&(n+=Math.abs(i-r[t]))})}),a+=n/=o*(o-1)/2}),a/=i.length;var u=0;s.forEach(function(t,e){s.forEach(function(r,n){e!==n&&(u+=Math.abs(t-r))}),u/=s.length*(s.length-1)/2});var l=u-a;n<l&&(n=l,o=e)},a=0;a<e;a++)i(a);return{structure:r[o],structureCountMap:t[o]}}(k,P,O),T=C.structure,A=C.structureCountMap,M=e.nodes[0],j=[],I=null===(s=e.nodes[0])||void 0===s?void 0:s[i],N=-1/0;e.nodes.forEach(function(t){var e=t[i],r=y[e];(null===r||void 0===r?void 0:r.length)>N&&(N=r.length,j=r,I=e,M=t)});var L={},R={},D={},B={},F={},G={};Object.keys(m).forEach(function(n,o){F[n]=[],r&&(G[n]=[]);var s=-1/0,u={};m[n].forEach(function(t){var e=h["".concat(M.id,"-").concat(t.id)];if(e&&F[n].push(e),s<e&&(s=e),u["".concat(M.id,"-").concat(t.id)]={start:0,end:g[t.id].idx,distance:e},r){var o=h["".concat(t.id,"-").concat(M.id)];o&&G[n].push(o)}}),F[n]=F[n].sort(function(t,e){return t-e}),r&&(G[n]=G[n].sort(function(t,e){return t-e})),R=xm(u,x,e,R);var l=[];if(Object.keys(u).forEach(function(t){if(D[t])l.push(D[t]);else{var e=R[t];D[t]=_m(e,T,i,a),l.push(D[t])}}),l=l.sort(function(t,e){return e-t}),B["".concat(M.id,"-").concat(n)]=l,n!==I)for(var c=function(e){var r=j[e],o=S[d[r.id].idx],s=o.nodeLabelCountMap[n],u=m[n].length;if(!s||s.count<u)return j.splice(e,1),"continue";for(var c=!1,h=0;h<u;h++)if(s.dists[h]>F[n][h]){c=!0;break}if(c)return j.splice(e,1),"continue";var p={};o.neighbors.forEach(function(t){var e=f["".concat(r.id,"-").concat(t.id)];p["".concat(r.id,"-").concat(t.id)]={start:d[r.id].idx,end:d[t.id].idx,distance:e}}),E=xm(p,S,t,E);var y=[];Object.keys(p).forEach(function(t){if(A[t])y.push(A[t]);else{var e=E[t];A[t]=_m(e,T,i,a),y.push(A[t])}}),y=y.sort(function(t,e){return e-t});var v=!1;for(h=0;h<u;h++)if(y[h]<l[h]){v=!0;break}return v?(j.splice(e,1),"continue"):void 0},p=((null===j||void 0===j?void 0:j.length)||0)-1;p>=0;p--)c(p)});var U=[];null===j||void 0===j||j.forEach(function(n){for(var s=d[n.id].idx,u=Sm(t.nodes,l[s],s,i,o).neighbors,c=!1,h=u.length-1;h>=0;h--){if(u.length+1<e.nodes.length)return void(c=!0);var p=u[h],y=p[i];if(m[y]&&m[y].length)if(F[y]&&F[y].length){var v="".concat(n.id,"-").concat(p.id),b=f[v],w=F[y].length-1;if(b>F[y][w])u.splice(h,1);else{if(r){var x="".concat(p.id,"-").concat(n.id),_=f[x];if(w=G[y].length-1,_>G[y][w]){u.splice(h,1);continue}}var O=A[v]?A[v]:km(t,n,p,d,b,S,T,i,a,A,E),P="".concat(M.id,"-").concat(y);if(O<B[P][B[P].length-1])u.splice(h,1);else{var k=Cm(L,y,g,m),C=k.minPatternNodeLabelDegree;k.minPatternNodeLabelInDegree,k.minPatternNodeLabelOutDegree,d[p.id].degree<C&&u.splice(h,1)}}}else u.splice(h,1);else u.splice(h,1)}c||U.push({nodes:[n].concat(u)})});var z=Ng(e,M.id,!1).length,V={};r?(Object.keys(z).forEach(function(t){var e=g[t].node[i];V[e]?V[e].push(z[t]):V[e]=[z[t]]}),Object.keys(V).forEach(function(t){V[t].sort(function(t,e){return t-e})})):V=F;for(var H=function(n){var o=U[n],s=o.nodes[0],u={},l={};o.nodes.forEach(function(t,e){l[t.id]={idx:e,node:t,degree:0,inDegree:0,outDegree:0};var r=t[i];u[r]?u[r]++:u[r]=1});var c=[],f={};t.edges.forEach(function(t){l[t.source]&&l[t.target]&&(c.push(t),f[t[a]]?f[t[a]]++:f[t[a]]=1,l[t.source].degree++,l[t.target].degree++,l[t.source].outDegree++,l[t.target].inDegree++)});for(var h=Object.keys(b).length,p=!1,y=0;y<h;y++){var v=Object.keys(b)[y];if(!f[v]||f[v]<b[v].length){p=!0;break}}if(p)return U.splice(n,1),"continue";var w=c.length;if(w<e.edges.length)return U.splice(n,1),"break";var S=!1,x=function(t){var e=c[t],n=e[a],o=b[n];if(!o||!o.length)return f[n]--,o&&f[n]<o.length?(S=!0,"break"):(c.splice(t,1),l[e.source].degree--,l[e.target].degree--,l[e.source].outDegree--,l[e.target].inDegree--,"continue");var s=l[e.source].node[i],u=l[e.target].node[i],h=!1;return o.forEach(function(t){var e=g[t.source].node,n=g[t.target].node;e[i]===s&&n[i]===u&&(h=!0),r||e[i]!==u||n[i]!==s||(h=!0)}),h?void 0:(f[n]--,o&&f[n]<o.length?(S=!0,"break"):(c.splice(t,1),l[e.source].degree--,l[e.target].degree--,l[e.source].outDegree--,l[e.target].inDegree--,"continue"))};for(y=w-1;y>=0&&"break"!==x(y);y--);if(S)return U.splice(n,1),"continue";o.edges=c;var _=Ng(o,o.nodes[0].id,!1).length;if(Object.keys(_).reverse().forEach(function(t){if(t!==o.nodes[0].id&&!S){if(_[t]===1/0){var e=l[t].node[i];if(u[e]--,u[e]<m[e].length)return void(S=!0);var r=o.nodes.indexOf(l[t].node);return o.nodes.splice(r,1),void(l[t]=void 0)}var n=d[t].node[i];if(!V[n]||!V[n].length||_[t]>V[n][V[n].length-1]){if(e=l[t].node[i],u[e]--,u[e]<m[e].length)return void(S=!0);r=o.nodes.indexOf(l[t].node),o.nodes.splice(r,1),l[t]=void 0}}}),S)return U.splice(n,1),"continue";for(var E=!0,O=0;E&&!S;){if(E=!1,r?l[s.id].degree<g[M.id].degree||l[s.id].inDegree<g[M.id].inDegree||l[s.id].outDegree<g[M.id].outDegree:l[s.id].degree<g[M.id].degree){S=!0;break}if(u[s[i]]<m[s[i]].length){S=!0;break}for(var P=o.nodes.length-1;P>=0;P--){var k=o.nodes[P],C=l[k.id].degree,T=l[k.id].inDegree,A=l[k.id].outDegree,j=k[i],I=Cm(L,j,g,m),N=I.minPatternNodeLabelDegree,R=I.minPatternNodeLabelInDegree,D=I.minPatternNodeLabelOutDegree;if(r?C<N||T<R||A<D:C<N){if(u[k[i]]--,u[k[i]]<m[k[i]].length){S=!0;break}o.nodes.splice(P,1),l[k.id]=void 0,E=!0}}if(S||!E&&0!==O)break;for(var B=(w=c.length)-1;B>=0;B--){var F=c[B];if(!l[F.source]||!l[F.target]){c.splice(B,1);var G=F[a];if(f[G]--,l[F.source]&&(l[F.source].degree--,l[F.source].outDegree--),l[F.target]&&(l[F.target].degree--,l[F.target].inDegree--),b[G]&&f[G]<b[G].length){S=!0;break}E=!0}}O++}return S?(U.splice(n,1),"continue"):S||o.nodes.length<e.nodes.length||c.length<e.edges.length?(U.splice(n,1),"continue"):void 0},W=U.length-1;W>=0&&"break"!==H(W);W--);var q=U.length,Y=function(t){var e={};U[t].edges.forEach(function(t){var r="".concat(t.source,"-").concat(t.target,"-").concat(t.label);e[r]?e[r]++:e[r]=1});for(var r=function(t){var r={};U[t].edges.forEach(function(t){var e="".concat(t.source,"-").concat(t.target,"-").concat(t.label);r[e]?r[e]++:r[e]=1});var n=!0;Object.keys(r).length!==Object.keys(e).length?n=!1:Object.keys(e).forEach(function(t){r[t]!==e[t]&&(n=!1)}),n&&U.splice(t,1)},n=q-1;n>t;n--)r(n);q=U.length};for(W=0;W<=q-1;W++)Y(W);return U}}},Am=function(){function t(t){void 0===t&&(t=10),this.linkedList=new vg,this.maxStep=t}return Object.defineProperty(t.prototype,"length",{get:function(){return this.linkedList.toArray().length},enumerable:!1,configurable:!0}),t.prototype.isEmpty=function(){return!this.linkedList.head},t.prototype.isMaxStack=function(){return this.toArray().length>=this.maxStep},t.prototype.peek=function(){return this.isEmpty()?null:this.linkedList.head.value},t.prototype.push=function(t){this.linkedList.prepend(t),this.length>this.maxStep&&this.linkedList.deleteTail()},t.prototype.pop=function(){var t=this.linkedList.deleteHead();return t?t.value:null},t.prototype.toArray=function(){return this.linkedList.toArray().map(function(t){return t.value})},t.prototype.clear=function(){for(;!this.isEmpty();)this.pop()},t}(),Mm=Ig,jm={getAdjMatrix:pg,breadthFirstSearch:Sg,connectedComponent:Eg,getDegree:Pg,getInDegree:kg,getOutDegree:Cg,detectCycle:Ig,detectDirectedCycle:Mm,detectAllCycles:jg,detectAllDirectedCycle:Mg,detectAllUndirectedCycle:Ag,depthFirstSearch:Tg,dijkstra:Ng,findAllPath:Bg,findShortestPath:Dg,floydWarshall:Fg,labelPropagation:Gg,louvain:Xg,iLouvain:Jg,kCore:Kg,kMeans:Zg,cosineSimilarity:$g,nodesCosineSimilarity:tm,minimumSpanningTree:am,pageRank:sm,getNeighbors:mg,Stack:Am,GADDI:Tm},Im=r(4010),Nm=r(8699),Lm=hg,Rm=function(t){return function(e,r){return e[t]-r[t]}},Dm=function(t,e,r){return t>=e&&t<=r},Bm=function(t,e,r,n){var o=r.x-t.x,i=r.y-t.y,a=e.x-t.x,s=e.y-t.y,u=n.x-r.x,l=n.y-r.y,c=a*l-s*u,f=1/c;if(c*c>1e-4*(a*a+s*s)*(u*u+l*l)){var h=(o*l-i*u)*f,p=(o*s-i*a)*f;return Dm(h,0,1)&&Dm(p,0,1)?{x:t.x+h*a,y:t.y+h*s}:null}return null},Fm=function(t,e){var r=t.x,n=t.y,o=t.width,i=t.height,a=[],s={x:r+o/2,y:n+i/2};a.push({x:r,y:n}),a.push({x:r+o,y:n}),a.push({x:r+o,y:n+i}),a.push({x:r,y:n+i}),a.push({x:r,y:n});for(var u=null,l=1;l<a.length&&!(u=Bm(a[l-1],a[l],s,e));l++);return u},Gm=function(t,e){var r=t.x,n=t.y,o=t.r,i=e.x-r,a=e.y-n;if(i*i+a*a<o*o)return null;var s=Math.atan(a/i);return{x:r+Math.abs(o*Math.cos(s))*Math.sign(i),y:n+Math.abs(o*Math.sin(s))*Math.sign(a)}},Um=function(t,e){var r=t.rx,n=t.ry,o=t.x,i=t.y,a=e.x-o,s=e.y-i,u=Math.atan2(s/n,a/r);return u<0&&(u+=2*Math.PI),{x:o+r*Math.cos(u),y:i+n*Math.sin(u)}},zm=function(t,e,r){void 0===r&&(r=1);var n=[t.x,t.y,r];return e&&!isNaN(e[0])||(e=[1,0,0,0,1,0,0,0,1]),Im.transformMat3(n,n,e),{x:n[0],y:n[1]}},Vm=function(t,e,r){void 0===r&&(r=1),e&&!isNaN(e[0])||(e=[1,0,0,0,1,0,0,0,1]);var n=ug.invert([1,0,0,0,1,0,0,0,1],e);n||(n=[1,0,0,0,1,0,0,0,1]);var o=[t.x,t.y,r];return Im.transformMat3(o,o,n),{x:o[0],y:o[1]}},Hm=function(t,e,r){var n=t.x-e.x,o=t.y-e.y,i=t.x-r.x,a=t.y-r.y,s=(t.x*t.x-e.x*e.x-e.y*e.y+t.y*t.y)/2,u=(t.x*t.x-r.x*r.x-r.y*r.y+t.y*t.y)/2,l=o*i-n*a;return{x:-(a*s-o*u)/l,y:-(n*u-i*s)/l}},Wm=function(t,e){var r=t.x-e.x,n=t.y-e.y;return Math.sqrt(r*r+n*n)},qm=function(t,e){var r=[];return t.forEach(function(t){var n=[];t.forEach(function(t){n.push(t*e)}),r.push(n)}),r},Ym=function(t){for(var e=[],r=t.length,n=0;n<r;n+=1){e[n]=[];for(var o=0;o<r;o+=1)n===o?e[n][o]=0:0!==t[n][o]&&t[n][o]?e[n][o]=t[n][o]:e[n][o]=1/0}for(var i=0;i<r;i+=1)for(n=0;n<r;n+=1)for(o=0;o<r;o+=1)e[n][o]>e[n][i]+e[i][o]&&(e[n][o]=e[n][i]+e[i][o]);return e},Xm=function(t,e){var r=t.nodes,n=t.edges,o=[],i={};if(!r)throw new Error("invalid nodes data!");return r&&r.forEach(function(t,e){i[t.id]=e;o.push([])}),n&&n.forEach(function(t){var r=t.source,n=t.target,a=i[r],s=i[n];o[a][s]=1,e||(o[s][a]=1)}),o},Jm=function(t,e){t.translate(e.x,e.y)},Km=function(t,e,r,n){void 0===n&&(n={duration:500});var o=t.getMatrix();o||(o=[1,0,0,0,1,0,0,0,1]);var i=t.getCanvasBBox(),a=e.x-i.minX,s=e.y-i.minY;if(r){var u=a*o[0],l=s*o[4],c=0,f=0,h=0,p=0;t.animate(function(t){return o=Lm(o,[["t",(h=u*t)-c,(p=l*t)-f]]),c=h,f=p,{matrix:o}},n)}else{var d=Lm(o,[["t",a,s]]);t.setMatrix(d)}},Qm=function(t,e){var r=t.getMatrix();r||(r=[1,0,0,0,1,0,0,0,1]);var n=e;(0,ng.isArray)(e)||(n=[e,e]),(0,ng.isArray)(e)&&1===e.length&&(n=[e[0],e[0]]),r=Lm(r,[["s",n[0],n[1]]]),t.setMatrix(r)},Zm=function(t,e){var r=t.getMatrix();r||(r=[1,0,0,0,1,0,0,0,1]),r=Lm(r,[["r",e]]),t.setMatrix(r)},$m=function(t,e,r){for(var n=[],o=0;o<t;o++)n[o]=0;return r.forEach(function(t){t.source&&(n[e[t.source]]+=1),t.target&&(n[e[t.target]]+=1)}),n};function tb(t,e,r){return(r[0]-t[0])*(e[1]-t[1])==(e[0]-t[0])*(r[1]-t[1])&&Math.min(t[0],e[0])<=r[0]&&r[0]<=Math.max(t[0],e[0])&&Math.min(t[1],e[1])<=r[1]&&r[1]<=Math.max(t[1],e[1])}var eb=function(t,e,r){var n=!1,o=t.length,i=1e-6;function a(t){return Math.abs(t)<i?0:t<0?-1:1}if(o<=2)return!1;for(var s=0;s<o;s++){var u=t[s],l=t[(s+1)%o];if(tb(u,l,[e,r]))return!0;a(u[1]-r)>0!=a(l[1]-r)>0&&a(e-(r-u[1])*(u[0]-l[0])/(u[1]-l[1])-u[0])<0&&(n=!n)}return n},rb=function(t,e){return!(e.minX>t.maxX||e.maxX<t.minX||e.minY>t.maxY||e.maxY<t.minY)},nb=function(t,e){var r=function(t){var e=t.map(function(t){return t[0]}),r=t.map(function(t){return t[1]});return{minX:Math.min.apply(null,e),maxX:Math.max.apply(null,e),minY:Math.min.apply(null,r),maxY:Math.max.apply(null,r)}},n=function(t){for(var e=[],r=t.length,n=0;n<r-1;n++){var o=t[n],i=t[n+1];e.push({from:{x:o[0],y:o[1]},to:{x:i[0],y:i[1]}})}if(e.length>1){var a=t[0],s=t[r-1];e.push({from:{x:s[0],y:s[1]},to:{x:a[0],y:a[1]}})}return e};if(t.length<2||e.length<2)return!1;var o=r(t),i=r(e);if(!rb(o,i))return!1;var a=!1;if((0,ng.each)(e,function(e){if(eb(t,e[0],e[1]))return a=!0,!1}),a)return!0;if((0,ng.each)(t,function(t){if(eb(e,t[0],t[1]))return a=!0,!1}),a)return!0;var s=n(t),u=n(e),l=!1;return(0,ng.each)(u,function(t){if(function(t,e){var r=!1;return(0,ng.each)(t,function(t){if(Bm(t.from,t.to,e.from,e.to))return r=!0,!1}),r}(s,t))return l=!0,!1}),l},ob=function(){function t(t,e,r,n){this.x1=t,this.y1=e,this.x2=r,this.y2=n}return t.prototype.getBBox=function(){var t=Math.min(this.x1,this.x2),e=Math.min(this.y1,this.y2),r=Math.max(this.x1,this.x2),n=Math.max(this.y1,this.y2);return{x:t,y:e,minX:t,minY:e,maxX:r,maxY:n,width:r-t,height:n-e}},t}(),ib=function(t,e){return{top:[t.minX,t.minY,t.maxX,t.minY],left:[t.minX,t.minY,t.minX,t.maxY],bottom:[t.minX,t.maxY,t.maxX,t.maxY],right:[t.maxX,t.minY,t.maxX,t.maxY]}[e]},ab=function(t,e){var r=(e.x2-e.x1)*(t.y1-e.y1)-(e.y2-e.y1)*(t.x1-e.x1),n=(t.x2-t.x1)*(t.y1-e.y1)-(t.y2-t.y1)*(t.x1-e.x1),o=(e.y2-e.y1)*(t.x2-t.x1)-(e.x2-e.x1)*(t.y2-t.y1);if(o){var i=r/o,a=n/o;if(i>=0&&i<=1&&a>=0&&a<=1)return i}return Number.POSITIVE_INFINITY},sb=function(t,e){for(var r=["top","left","bottom","right"],n=t.getBBox(),o=0,i=[],a=0;a<4;a++){var s=ib(n,r[a]),u=s[0],l=s[1],c=s[2],f=s[3];i[a]=Bm({x:e.x1,y:e.y1},{x:e.x2,y:e.y2},{x:u,y:l},{x:c,y:f}),i[a]&&(o+=1)}return[i,o]},ub=function(t,e){for(var r=["top","left","bottom","right"],n=t.getBBox(),o=Number.POSITIVE_INFINITY,i=0,a=0;a<4;a++){var s=ib(n,r[a]),u=s[0],l=s[1],c=s[2],f=s[3],h=ab(e,new ob(u,l,c,f));(h=Math.abs(h-.5))>=0&&h<=1&&(i+=1,o=h<o?h:o)}return 0===i?-1:o},lb=function(t){var e=0,r=0;if(t.length>0){for(var n=0,o=t;n<o.length;n++){var i=o[n];e+=i.x,r+=i.y}e/=t.length,r/=t.length}return{x:e,y:r}},cb=function(t,e){return Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)},fb=function(t,e){var r,n=e.x1,o=e.y1,i=e.x2-n,a=e.y2-o,s=t.x-n,u=t.y-o,l=s*i+u*a;r=l<=0?0:(l=(s=i-s)*i+(u=a-u)*a)<=0?0:l*l/(i*i+a*a);var c=s*s+u*u-r;return c<0&&(c=0),c},hb=function(t,e,r){return void 0===r&&(r=.001),Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)<Math.pow(r,2)},pb=function(t,e){var r=t.x<e.x,n=t.x>e.x+e.width,o=t.y>e.y+e.height,i=t.y<e.y;if(!(r||n||o||i))return 0;if(o&&!r&&!n)return Math.pow(e.y+e.height-t.y,2);if(i&&!r&&!n)return Math.pow(t.y-e.y,2);if(r&&!o&&!i)return Math.pow(e.x-t.x,2);if(n&&!o&&!i)return Math.pow(e.x+e.width-t.x,2);var a=Math.min(Math.abs(e.x-t.x),Math.abs(e.x+e.width-t.x)),s=Math.min(Math.abs(e.y-t.y),Math.abs(e.y+e.height-t.y));return a*a+s*s},db=function(t,e){var r=t[0],n=t[1],o=t[2],i=t[3],a=e.x,s=e.y,u=[o-r,i-n];if(Nm.exactEquals(u,[0,0]))return NaN;var l=[-u[1],u[0]];Nm.normalize(l,l);var c=[a-r,s-n];return Math.abs(Nm.dot(c,l))},yb=function(t,e,r){return t+(e-t)*r},vb=function(t,e,r){for(var n=Math.min(t.length,e.length),o=new Array(n),i=0;i<n;i++)o[i]=yb(t[i],e[i],r);return o},gb="rgb(95, 149, 255)",mb="rgb(253, 253, 253)",bb="rgb(247, 250, 255)",wb="rgb(224, 224, 224)",Sb="rgb(224, 224, 224)",xb={version:"0.8.23",rootContainerClassName:"root-container",nodeContainerClassName:"node-container",edgeContainerClassName:"edge-container",comboContainerClassName:"combo-container",delegateContainerClassName:"delegate-container",defaultLoopPosition:"top",nodeLabel:{style:{fill:"#000",fontSize:12,textAlign:"center",textBaseline:"middle"},offset:4},defaultNode:{type:"circle",style:{lineWidth:1,stroke:gb,fill:"rgb(239, 244, 255)"},size:20,color:gb,linkPoints:{size:8,lineWidth:1,fill:bb,stroke:gb}},nodeStateStyles:{active:{fill:bb,stroke:gb,lineWidth:2,shadowColor:gb,shadowBlur:10},selected:{fill:"rgb(255, 255, 255)",stroke:gb,lineWidth:4,shadowColor:gb,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{fill:"rgb(223, 234, 255)",stroke:"#4572d9",lineWidth:2,"text-shape":{fontWeight:500}},inactive:{fill:"rgb(247, 250, 255)",stroke:"rgb(191, 213, 255)",lineWidth:1},disable:{fill:"rgb(250, 250, 250)",stroke:"rgb(224, 224, 224)",lineWidth:1}},edgeLabel:{style:{fill:"rgb(0, 0, 0)",textAlign:"center",textBaseline:"middle",fontSize:12}},defaultEdge:{type:"line",size:1,style:{stroke:wb,lineAppendWidth:2},color:wb},edgeStateStyles:{active:{stroke:gb,lineWidth:1},selected:{stroke:gb,lineWidth:2,shadowColor:gb,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:gb,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{stroke:"rgb(234, 234, 234)",lineWidth:1},disable:{stroke:"rgb(245, 245, 245)",lineWidth:1}},comboLabel:{style:{fill:"rgb(0, 0, 0)",textBaseline:"middle",fontSize:12},refY:10,refX:10},defaultCombo:{type:"circle",style:{fill:mb,lineWidth:1,stroke:Sb,r:5,width:20,height:10},size:[20,5],color:Sb,padding:[25,20,15,20]},comboStateStyles:{active:{stroke:gb,lineWidth:1,fill:"rgb(247, 250, 255)"},selected:{stroke:gb,lineWidth:2,fill:mb,shadowColor:gb,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:"#4572d9",lineWidth:2,fill:mb,"text-shape":{fontWeight:500}},inactive:{stroke:"rgb(224, 224, 224)",fill:mb,lineWidth:1},disable:{stroke:"rgb(234, 234, 234)",fill:"rgb(250, 250, 250)",lineWidth:1}},delegateStyle:{fill:"#F3F9FF",fillOpacity:.5,stroke:"#1890FF",strokeOpacity:.9,lineDash:[5,5]},windowFontFamily:"undefined"!=typeof window&&window.getComputedStyle&&document.body&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif"},_b={" ":.3329986572265625,a:.5589996337890625,A:.6569992065429687,b:.58599853515625,B:.6769989013671875,c:.5469985961914062,C:.7279998779296875,d:.58599853515625,D:.705999755859375,e:.554998779296875,E:.63699951171875,f:.37299957275390627,F:.5769989013671875,g:.5909988403320312,G:.7479995727539063,h:.555999755859375,H:.7199996948242188,i:.255999755859375,I:.23699951171875,j:.26699981689453123,J:.5169998168945312,k:.5289993286132812,K:.6899993896484375,l:.23499908447265624,L:.5879989624023437,m:.854998779296875,M:.8819992065429687,n:.5589996337890625,N:.7189987182617188,o:.58599853515625,O:.7669998168945312,p:.58599853515625,P:.6419998168945312,q:.58599853515625,Q:.7669998168945312,r:.3649993896484375,R:.6759994506835938,s:.504998779296875,S:.6319992065429687,t:.354998779296875,T:.6189987182617187,u:.5599990844726562,U:.7139999389648437,v:.48199920654296874,V:.6389999389648438,w:.754998779296875,W:.929998779296875,x:.5089996337890625,X:.63699951171875,y:.4959991455078125,Y:.66199951171875,z:.48699951171875,Z:.6239990234375,0:.6,1:.40099945068359377,2:.6,3:.6,4:.6,5:.6,6:.6,7:.5469985961914062,8:.6,9:.6,"[":.3329986572265625,"]":.3329986572265625,",":.26399993896484375,".":.26399993896484375,";":.26399993896484375,":":.26399993896484375,"{":.3329986572265625,"}":.3329986572265625,"\\":.5,"|":.19499969482421875,"=":.604998779296875,"+":.604998779296875,"-":.604998779296875,_:.5,"`":.3329986572265625," ~":.8329986572265625,"!":.3329986572265625,"@":.8579986572265625,"#":.6,$:.6,"%":.9699996948242188,"^":.517999267578125,"&":.7259994506835937,"*":.505999755859375,"(":.3329986572265625,")":.3329986572265625,"<":.604998779296875,">":.604998779296875,"/":.5,"?":.53699951171875},Eb=Math.PI,Ob=Math.sin,Pb=Math.cos,kb=Ob(Eb/8),Cb=Pb(Eb/8),Tb=function(t,e){var r=t.getBBox(),n={x:r.minX,y:r.minY},o={x:r.maxX,y:r.maxY};if(e){var i=e.getMatrix();i||(i=[1,0,0,0,1,0,0,0,1]),n=zm(n,i),o=zm(o,i)}var a=n.x,s=n.y,u=o.x,l=o.y;return{x:a,y:s,minX:a,minY:s,maxX:u,maxY:l,width:u-a,height:l-s}},Ab=function(t){var e=t.sourceNode||t.targetNode,r=e.get("group").getMatrix();r||(r=[1,0,0,0,1,0,0,0,1]);var n=e.getKeyShape(),o=n.getBBox(),i=t.loopCfg||{},a=i.dist||2*Math.max(o.width,o.height),s=i.position||xb.defaultLoopPosition,u=[(o.minX+o.maxX)/2+r[6],(o.minY+o.maxY)/2+r[7]],l=[t.startPoint.x,t.startPoint.y],c=[t.endPoint.x,t.endPoint.y],f=o.height/2,h=o.width/2,p=f,d=f,y=p*kb,v=p*Cb,g=d*kb,m=d*Cb,b=n.get("type"),w=Math.min(f/2,h/2),S=Math.min(f,h),x=(null===i||void 0===i?void 0:i.pointPadding)?Math.min(S,null===i||void 0===i?void 0:i.pointPadding):w;if(l[0]===c[0]&&l[1]===c[1]){switch(s){case"top":"circle"===b?(l=[u[0]-y,u[1]-v],c=[u[0]+g,u[1]-m]):(l=[u[0]-x,u[1]-f],c=[u[0]+x,u[1]-f]);break;case"top-right":p=f,d=h,"circle"===b?(l=[u[0]+(y=p*kb),u[1]-(v=p*Cb)],c=[u[0]+(m=d*Cb),u[1]-(g=d*kb)]):(l=[u[0]+h-x,u[1]-f],c=[u[0]+h,u[1]-f+x]);break;case"right":p=h,d=h,"circle"===b?(l=[u[0]+(v=p*Cb),u[1]-(y=p*kb)],c=[u[0]+(m=d*Cb),u[1]+(g=d*kb)]):(l=[u[0]+h,u[1]-x],c=[u[0]+h,u[1]+x]);break;case"bottom-right":p=h,d=f,"circle"===b?(l=[u[0]+(v=p*Cb),u[1]+(y=p*kb)],c=[u[0]+(g=d*kb),u[1]+(m=d*Cb)]):(l=[u[0]+h,u[1]+f-x],c=[u[0]+h-x,u[1]+f]);break;case"bottom":p=f,d=f,"circle"===b?(l=[u[0]+(y=p*kb),u[1]+(v=p*Cb)],c=[u[0]-(g=d*kb),u[1]+(m=d*Cb)]):(l=[u[0]-x,u[1]+f],c=[u[0]+x,u[1]+f]);break;case"bottom-left":p=f,d=h,"circle"===b?(l=[u[0]-(y=p*kb),u[1]+(v=p*Cb)],c=[u[0]-(m=d*Cb),u[1]+(g=d*kb)]):(l=[u[0]-h,u[1]+f-x],c=[u[0]-h+x,u[1]+f]);break;case"left":p=h,d=h,"circle"===b?(l=[u[0]-(v=p*Cb),u[1]+(y=p*kb)],c=[u[0]-(m=d*Cb),u[1]-(g=d*kb)]):(l=[u[0]-h,u[1]-x],c=[u[0]-h,u[1]+x]);break;case"top-left":p=h,d=f,"circle"===b?(l=[u[0]-(v=p*Cb),u[1]-(y=p*kb)],c=[u[0]-(g=d*kb),u[1]-(m=d*Cb)]):(l=[u[0]-h+x,u[1]-f],c=[u[0]-h,u[1]-f+x]);break;default:l=[u[0]-(y=(p=h)*kb),u[1]-(v=p*Cb)],c=[u[0]+(g=(d=h)*kb),u[1]-(m=d*Cb)]}if(!1===i.clockwise){var _=[l[0],l[1]];l=[c[0],c[1]],c=[_[0],_[1]]}}var E=[l[0]-u[0],l[1]-u[1]],O=(p+a)/p,P=(d+a)/d;!1===i.clockwise&&(O=(d+a)/d,P=(p+a)/p);var k=Nm.scale([0,0],E,O),C=[u[0]+k[0],u[1]+k[1]],T=[c[0]-u[0],c[1]-u[1]],A=Nm.scale([0,0],T,P),M=[u[0]+A[0],u[1]+A[1]];return t.startPoint={x:l[0],y:l[1]},t.endPoint={x:c[0],y:c[1]},t.controlPoints=[{x:C[0],y:C[1]},{x:M[0],y:M[1]}],t},Mb=function(t,e,r,n,o){var i=[],a=null===t||void 0===t?void 0:t.getPoint(e);if(!a)return{x:0,y:0,angle:0};if(e<1e-4)i=t.getStartTangent().reverse();else if(e>.9999)i=t.getEndTangent();else{var s=null===t||void 0===t?void 0:t.getPoint(e+1e-4);i.push([a.x,a.y]),i.push([s.x,s.y])}var u=Math.atan2(i[1][1]-i[0][1],i[1][0]-i[0][0]);if(u<0&&(u+=2*Eb),r&&(a.x+=Pb(u)*r,a.y+=Ob(u)*r),n){var l=u-Eb/2;u>.5*Eb&&u<1.5*Eb&&(l-=Eb),a.x+=Pb(l)*n,a.y+=Ob(l)*n}var c={x:a.x,y:a.y,angle:u};return o?(u>.5*Eb&&u<1.5*Eb&&(u-=Eb),(0,rg.__assign)({rotate:u},c)):c},jb=function(t,e){"function"==typeof e&&function t(e,r,n,o){if(!1===o(e,r,n))return!1;if(e&&e.children)for(var i=e.children.length-1;i>=0;i--)if(!t(e.children[i],e,i,o))return!1;return!0}(t,null,-1,e)},Ib=function(t,e){"function"==typeof e&&function t(e,r,n,o){if(e&&e.children)for(var i=e.children.length-1;i>=0;i--)if(!t(e.children[i],e,i,o))return;return!1!==o(e,r,n)}(t,null,-1,e)},Nb=function(t,e){return e*(_b[t]||1)},Lb=function(t,e){var r=0,n=new RegExp("[ä¸-é¾¥]+");return t.split("").forEach(function(t){n.test(t)?r+=e:r+=Nb(t,e)}),[r,e]},Rb=function(t,e){return"number"!=typeof e||e<=0||e>=t.length?t:t.substring(0,e)+"..."},Db=function(t,e){var r=[],n={},o={};t.forEach(function(t){o[t.id]=t}),t.forEach(function(t,e){var i=(0,ng.clone)(t);i.itemType="combo",i.children=void 0,i.parentId===i.id?(console.warn("The parentId for combo ".concat(i.id," can not be the same as the combo's id")),delete i.parentId):i.parentId&&!o[i.parentId]&&(console.warn("The parent combo for combo ".concat(i.id," does not exist!")),delete i.parentId);var a=n[i.id];if(a){if(i.children=a.children,n[i.id]=i,!(a=i).parentId)return void r.push(a);var s=n[a.parentId];if(s)s.children?s.children.push(i):s.children=[i];else{var u={id:a.parentId,children:[a]};n[a.parentId]=u,n[i.id]=i}}else if((0,ng.isString)(t.parentId)){var l=n[t.parentId];if(l)l.children?l.children.push(i):l.children=[i],n[i.id]=i;else{var c={id:t.parentId,children:[i]};n[c.id]=c,n[i.id]=i}}else r.push(i),n[i.id]=i});var i={};(e||[]).forEach(function(t){i[t.id]=t;var e=n[t.comboId];if(e){var r={id:t.id,comboId:t.comboId};e.children?e.children.push(r):e.children=[r],r.itemType="node",n[t.id]=r}});var a=0;return r.forEach(function(t){t.depth=a+10,jb(t,function(t){var e,r=n[t.id].itemType;e="node"===r?n[t.comboId]:n[t.parentId],t.depth=e&&"node"===r?a+1:a+10,a<t.depth&&(a=t.depth);var o=i[t.id];return o&&(o.depth=t.depth),!0})}),r},Bb=function(t,e,r){var n,o,i=t,a={root:{children:t}},s=!1,u="root";(t||[]).forEach(function(t){if(!s)return t.id===e?(o=t,"combo"===t.itemType?o.parentId=r:o.comboId=r,void(s=!0)):void jb(t,function(t){var n;return a[t.id]={children:(null===t||void 0===t?void 0:t.children)||[]},i=null===(n=a[t.parentId||t.comboId||"root"])||void 0===n?void 0:n.children,!t||!t.removed&&e!==t.id||!i||(u=t.parentId||t.comboId||"root",o=t,"combo"===t.itemType?o.parentId=r:o.comboId=r,s=!0,!1)})});var l=(i=null===(n=a[u])||void 0===n?void 0:n.children)?i.indexOf(o):-1;if(l>-1&&i.splice(l,1),s||(o={id:e,itemType:"node",comboId:r},a[e]={children:void 0}),e){var c=!1;if(r){var f=0;(t||[]).forEach(function(t){c||jb(t,function(t){return r!==t.id||(c=!0,t.children?t.children.push(o):t.children=[o],f=t.depth,"node"===o.itemType?o.depth=f+2:o.depth=f+1,!1)})})}else r&&c||"node"===o.itemType||t.push(o);var h=o.depth;jb(o,function(t){return"node"===t.itemType?h+=2:h+=1,t.depth=h,!0})}return t},Fb=function(t,e,r){var n={minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0,x:void 0,y:void 0,width:void 0,height:void 0,centerX:void 0,centerY:void 0};if(!t||0===t.length){var o=(null===r||void 0===r?void 0:r.getModel())||{},i=o.x,a=o.y,s=o.fixSize,u=o.collapsed,l=o.fixCollapseSize,c=u?l:s,f=(0,ng.isArray)(c)?c:[c,c],h=f[0],p=f[1],d=[h/2,p/2];return{minX:i-d[0],minY:a-d[1],maxX:i+d[0],maxY:a+d[1],x:i,y:a,width:h,height:p}}return t.forEach(function(t){var r=e.findById(t.id);if(r&&r.isVisible()){r.set("bboxCanvasCache",void 0);var o=r.getCanvasBBox();o.x&&n.minX>o.minX&&(n.minX=o.minX),o.y&&n.minY>o.minY&&(n.minY=o.minY),o.x&&n.maxX<o.maxX&&(n.maxX=o.maxX),o.y&&n.maxY<o.maxY&&(n.maxY=o.maxY)}}),n.x=(n.minX+n.maxX)/2,n.y=(n.minY+n.maxY)/2,n.width=n.maxX-n.minX,n.height=n.maxY-n.minY,n.centerX=(n.minX+n.maxX)/2,n.centerY=(n.minY+n.maxY)/2,"circle"===(null===r||void 0===r?void 0:r.getKeyShape().get("type"))&&(n.width=Math.hypot(n.height,n.width),n.height=n.width),Object.keys(n).forEach(function(t){n[t]!==1/0&&n[t]!==-1/0||(n[t]=void 0)}),n},Gb=function(t){var e=(0,ng.isNumber)(t.x)||(0,ng.isNumber)(t.y)||t.type||t.anchorPoints||t.size;return t.style&&(e=e||(0,ng.isNumber)(t.style.r)||(0,ng.isNumber)(t.style.width)||(0,ng.isNumber)(t.style.height)||(0,ng.isNumber)(t.style.rx)||(0,ng.isNumber)(t.style.ry)),e},Ub=function(t){var e={};return Object.keys(t).forEach(function(r){var n=t[r];if("img"!==r||(0,ng.isString)(n))if((0,ng.isObject)(n)&&!(0,ng.isArray)(n)){var o={};Object.keys(n).forEach(function(t){var e=n[t];("img"!==t||(0,ng.isString)(e))&&(o[t]=(0,ng.clone)(e))}),e[r]=o}else e[r]=(0,ng.clone)(n)}),e},zb=function(t){var e,r=t.animateCfg,n=t.callback;if(r)if(e=(0,ng.clone)(r),r.callback){var o=r.callback;e.callback=function(){n(),o()}}else e.callback=n;else e={duration:500,callback:n};return e},Vb=function(t){if(!t)return console.error("G6 Error Tips: the data must be defined"),!1;var e=t.nodes,r=t.edges,n=t.combos,o=void 0===n?[]:n;if(!e&&!r){var i=!0;return jb(t,function(t){return!!(0,ng.isString)(t.id)||(i=!1,!1)}),i}var a=(e||[]).find(function(t){return!(0,ng.isString)(t.id)});if(a)return console.warn("G6 Warning Tips: missing 'id' property, or %c".concat(a.id,"%c is not a string."),"font-size: 20px; color: red;",""),!1;var s=(e||[]).map(function(t){return t.id}),u=null===o||void 0===o?void 0:o.map(function(t){return t.id}),l=(0,rg.__spreadArray)((0,rg.__spreadArray)([],s,!0),u,!0),c=(r||[]).find(function(t){return!l.includes(t.source)||!l.includes(t.target)});return!c||(console.warn("G6 Warning Tips: The source %c".concat(c.source,"%c or the target %c").concat(c.target,"%c of the edge do not exist in the nodes or combos."),"font-size: 20px; color: red;","","font-size: 20px; color: red;",""),!1)},Hb=function(){function t(t){this.graph=t,this.destroyed=!1,this.modes=t.get("modes")||{default:[]},this.formatModes(),this.mode=t.get("defaultMode")||"default",this.currentBehaves=[],this.setMode(this.mode)}return t.prototype.formatModes=function(){var t=this.modes;(0,ng.each)(t,function(t){(0,ng.each)(t,function(e,r){(0,ng.isString)(e)&&(t[r]={type:e})})})},t.prototype.setBehaviors=function(t){var e,r=this.graph,n=this.modes[t],o=[];(0,ng.each)(n||[],function(t){var n=ig.getBehavior(t.type||t);n&&(e=new n(t))&&(e.bind(r),o.push(e))}),this.currentBehaves=o},t.mergeBehaviors=function(t,e){return(0,ng.each)(e,function(e){t.indexOf(e)<0&&((0,ng.isString)(e)&&(e={type:e}),t.push(e))}),t},t.filterBehaviors=function(t,e){var r=[];return t.forEach(function(t){var n="";n=(0,ng.isString)(t)?t:t.type,e.indexOf(n)<0&&r.push(t)}),r},t.prototype.setMode=function(t){var e=this.modes,r=this.graph,n=t;e[n]&&(r.emit("beforemodechange",{mode:t}),(0,ng.each)(this.currentBehaves,function(t){t.delegate&&t.delegate.remove(),t.unbind(r)}),this.setBehaviors(n),r.emit("aftermodechange",{mode:t}),this.mode=t)},t.prototype.getMode=function(){return this.mode},t.prototype.manipulateBehaviors=function(e,r,n){var o,i=this;if(o=(0,ng.isArray)(e)?e:[e],(0,ng.isArray)(r))return(0,ng.each)(r,function(e){i.modes[e]?i.modes[e]=n?t.mergeBehaviors(i.modes[e]||[],o):t.filterBehaviors(i.modes[e]||[],o):n&&(i.modes[e]=o)}),this;var a=r;return r||(a=this.mode),this.modes[a]||n&&(this.modes[a]=o),this.modes[a]=n?t.mergeBehaviors(this.modes[a]||[],o):t.filterBehaviors(this.modes[a]||[],o),this.formatModes(),this.setMode(this.mode),this},t.prototype.updateBehavior=function(t,e,r){(0,ng.isString)(t)&&(t={type:t});var n=[];if(r&&r!==this.mode&&"default"!==r){if(!(n=this.modes[r])||!n.length)return console.warn("Update behavior failed! There is no behaviors in this mode on the graph."),this;var o=n.length;for(a=0;a<o;a++){if((s=n[a]).type===t.type||s===t.type)return s===t.type&&(s={type:s}),Object.assign(s,e),n[a]=s,this;a===o-1&&console.warn("Update behavior failed! There is no such behavior in the mode")}}else{if(!(n=this.currentBehaves)||!n.length)return console.warn("Update behavior failed! There is no behaviors in this mode on the graph."),this;for(var i=n.length,a=0;a<i;a++){var s;if((s=n[a]).type===t.type)return s.updateCfg(e),this;a===i-1&&console.warn("Update behavior failed! There is no such behavior in the mode")}}return this},t.prototype.destroy=function(){this.graph=null,this.modes=null,this.currentBehaves=null,this.destroyed=!0},t}(),Wb="\t\n\v\f\r Â áá ââââââââââââ¯âã\u2028\u2029",qb=new RegExp("([a-z])["+Wb+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+Wb+"]*,?["+Wb+"]*)+)","ig"),Yb=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+Wb+"]*,?["+Wb+"]*","ig"),Xb=function(t){if(!t)return null;if((0,ng.isArray)(t))return t;var e={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},r=[];return String(t).replace(qb,function(n,o,i){var a=[],s=o.toLowerCase();if(i.replace(Yb,function(t,e){e&&a.push(+e)}),"m"===s&&a.length>2&&(r.push([o].concat(a.splice(0,2))),s="l",o="m"===o?"l":"L"),"o"===s&&1===a.length&&r.push([o,a[0]]),"r"===s)r.push([o].concat(a));else for(;a.length>=e[s]&&(r.push([o].concat(a.splice(0,e[s]))),e[s]););return t}),r},Jb=function(t,e){for(var r=[],n=0,o=t.length;o-2*!e>n;n+=2){var i=[{x:+t[n-2],y:+t[n-1]},{x:+t[n],y:+t[n+1]},{x:+t[n+2],y:+t[n+3]},{x:+t[n+4],y:+t[n+5]}];e?n?o-4===n?i[3]={x:+t[0],y:+t[1]}:o-2===n&&(i[2]={x:+t[0],y:+t[1]},i[3]={x:+t[2],y:+t[3]}):i[0]={x:+t[o-2],y:+t[o-1]}:o-4===n?i[3]=i[2]:n||(i[0]={x:+t[n],y:+t[n+1]}),r.push(["C",(-i[0].x+6*i[1].x+i[2].x)/6,(-i[0].y+6*i[1].y+i[2].y)/6,(i[1].x+6*i[2].x-i[3].x)/6,(i[1].y+6*i[2].y-i[3].y)/6,i[2].x,i[2].y])}return r},Kb=function(t,e,r,n,o){var i=[];if(null===o&&null===n&&(n=r),t=+t,e=+e,r=+r,n=+n,null!==o){var a=Math.PI/180,s=t+r*Math.cos(-n*a),u=t+r*Math.cos(-o*a);i=[["M",s,e+r*Math.sin(-n*a)],["A",r,r,0,+(o-n>180),0,u,e+r*Math.sin(-o*a)]]}else i=[["M",t,e],["m",0,-n],["a",r,n,0,1,1,0,2*n],["a",r,n,0,1,1,0,-2*n],["z"]];return i},Qb=function(t){if(!(t=Xb(t))||!t.length)return[["M",0,0]];var e,r,n=[],o=0,i=0,a=0,s=0,u=0;"M"===t[0][0]&&(a=o=+t[0][1],s=i=+t[0][2],u++,n[0]=["M",o,i]);for(var l=3===t.length&&"M"===t[0][0]&&"R"===t[1][0].toUpperCase()&&"Z"===t[2][0].toUpperCase(),c=void 0,f=void 0,h=u,p=t.length;h<p;h++){if(n.push(c=[]),(e=(f=t[h])[0])!==e.toUpperCase())switch(c[0]=e.toUpperCase(),c[0]){case"A":c[1]=f[1],c[2]=f[2],c[3]=f[3],c[4]=f[4],c[5]=f[5],c[6]=+f[6]+o,c[7]=+f[7]+i;break;case"V":c[1]=+f[1]+i;break;case"H":c[1]=+f[1]+o;break;case"R":for(var d=2,y=(r=[o,i].concat(f.slice(1))).length;d<y;d++)r[d]=+r[d]+o,r[++d]=+r[d]+i;n.pop(),n=n.concat(Jb(r,l));break;case"O":n.pop(),(r=Kb(o,i,f[1],f[2])).push(r[0]),n=n.concat(r);break;case"U":n.pop(),n=n.concat(Kb(o,i,f[1],f[2],f[3])),c=["U"].concat(n[n.length-1].slice(-2));break;case"M":a=+f[1]+o,s=+f[2]+i;break;default:for(d=1,y=f.length;d<y;d++)c[d]=+f[d]+(d%2?o:i)}else if("R"===e)r=[o,i].concat(f.slice(1)),n.pop(),n=n.concat(Jb(r,l)),c=["R"].concat(f.slice(-2));else if("O"===e)n.pop(),(r=Kb(o,i,f[1],f[2])).push(r[0]),n=n.concat(r);else if("U"===e)n.pop(),n=n.concat(Kb(o,i,f[1],f[2],f[3])),c=["U"].concat(n[n.length-1].slice(-2));else for(var v=0,g=f.length;v<g;v++)c[v]=f[v];if("O"!==(e=e.toUpperCase()))switch(c[0]){case"Z":o=+a,i=+s;break;case"H":o=c[1];break;case"V":i=c[1];break;case"M":a=c[c.length-2],s=c[c.length-1];break;default:o=c[c.length-2],i=c[c.length-1]}}return n},Zb=function(t,e,r,n){return[t,e,r,n,r,n]},$b=function(t,e,r,n,o,i){return[1/3*t+2/3*r,1/3*e+2/3*n,1/3*o+2/3*r,1/3*i+2/3*n,o,i]},tw=function(t,e){var r,n=Qb(t),o=e&&Qb(e),i={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},a={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},s=[],u=[],l="",c="",f=function(t,e,r){var n,o;if(!t)return["C",e.x,e.y,e.x,e.y,e.x,e.y];switch(!(t[0]in{T:1,Q:1})&&(e.qx=e.qy=null),t[0]){case"M":e.X=t[1],e.Y=t[2];break;case"A":t=["C"].concat(function t(e,r,n,o,i,a,s,u,l,c){n===o&&(n+=1);var f,h,p,d,y,v=120*Math.PI/180,g=Math.PI/180*(+i||0),m=[],b=function(t,e,r){return{x:t*Math.cos(r)-e*Math.sin(r),y:t*Math.sin(r)+e*Math.cos(r)}};if(c)h=c[0],p=c[1],d=c[2],y=c[3];else{e=(f=b(e,r,-g)).x,r=f.y,u=(f=b(u,l,-g)).x,l=f.y,e===u&&r===l&&(u+=1,l+=1);var w=(e-u)/2,S=(r-l)/2,x=w*w/(n*n)+S*S/(o*o);x>1&&(n*=x=Math.sqrt(x),o*=x);var _=n*n,E=o*o,O=(a===s?-1:1)*Math.sqrt(Math.abs((_*E-_*S*S-E*w*w)/(_*S*S+E*w*w)));d=O*n*S/o+(e+u)/2,y=O*-o*w/n+(r+l)/2,h=Math.asin(((r-y)/o).toFixed(9)),p=Math.asin(((l-y)/o).toFixed(9)),h=e<d?Math.PI-h:h,p=u<d?Math.PI-p:p,h<0&&(h=2*Math.PI+h),p<0&&(p=2*Math.PI+p),s&&h>p&&(h-=2*Math.PI),!s&&p>h&&(p-=2*Math.PI)}var P=p-h;if(Math.abs(P)>v){var k=p,C=u,T=l;p=h+v*(s&&p>h?1:-1),m=t(u=d+n*Math.cos(p),l=y+o*Math.sin(p),n,o,i,0,s,C,T,[p,k,d,y])}P=p-h;var A=Math.cos(h),M=Math.sin(h),j=Math.cos(p),I=Math.sin(p),N=Math.tan(P/4),L=4/3*n*N,R=4/3*o*N,D=[e,r],B=[e+L*M,r-R*A],F=[u+L*I,l-R*j],G=[u,l];if(B[0]=2*D[0]-B[0],B[1]=2*D[1]-B[1],c)return[B,F,G].concat(m);for(var U=[],z=0,V=(m=[B,F,G].concat(m).join().split(",")).length;z<V;z++)U[z]=z%2?b(m[z-1],m[z],g).y:b(m[z],m[z+1],g).x;return U}.apply(0,[e.x,e.y].concat(t.slice(1))));break;case"S":"C"===r||"S"===r?(n=2*e.x-e.bx,o=2*e.y-e.by):(n=e.x,o=e.y),t=["C",n,o].concat(t.slice(1));break;case"T":"Q"===r||"T"===r?(e.qx=2*e.x-e.qx,e.qy=2*e.y-e.qy):(e.qx=e.x,e.qy=e.y),t=["C"].concat($b(e.x,e.y,e.qx,e.qy,t[1],t[2]));break;case"Q":e.qx=t[1],e.qy=t[2],t=["C"].concat($b(e.x,e.y,t[1],t[2],t[3],t[4]));break;case"L":t=["C"].concat(Zb(e.x,e.y,t[1],t[2]));break;case"H":t=["C"].concat(Zb(e.x,e.y,t[1],e.y));break;case"V":t=["C"].concat(Zb(e.x,e.y,e.x,t[1]));break;case"Z":t=["C"].concat(Zb(e.x,e.y,e.X,e.Y))}return t},h=function(t,e){if(t[e].length>7){t[e].shift();for(var i=t[e];i.length;)s[e]="A",o&&(u[e]="A"),t.splice(e++,0,["C"].concat(i.splice(0,6)));t.splice(e,1),r=Math.max(n.length,o&&o.length||0)}},p=function(t,e,i,a,s){t&&e&&"M"===t[s][0]&&"M"!==e[s][0]&&(e.splice(s,0,["M",a.x,a.y]),i.bx=0,i.by=0,i.x=t[s][1],i.y=t[s][2],r=Math.max(n.length,o&&o.length||0))};r=Math.max(n.length,o&&o.length||0);for(var d=0;d<r;d++){n[d]&&(l=n[d][0]),"C"!==l&&(s[d]=l,d&&(c=s[d-1])),n[d]=f(n[d],i,c),"A"!==s[d]&&"C"===l&&(s[d]="C"),h(n,d),o&&(o[d]&&(l=o[d][0]),"C"!==l&&(u[d]=l,d&&(c=u[d-1])),o[d]=f(o[d],a,c),"A"!==u[d]&&"C"===l&&(u[d]="C"),h(o,d)),p(n,o,i,a,d),p(o,n,a,i,d);var y=n[d],v=o&&o[d],g=y.length,m=o&&v.length;i.x=y[g-2],i.y=y[g-1],i.bx=parseFloat(y[g-4])||i.x,i.by=parseFloat(y[g-3])||i.y,a.bx=o&&(parseFloat(v[m-4])||a.x),a.by=o&&(parseFloat(v[m-3])||a.y),a.x=o&&v[m-2],a.y=o&&v[m-1]}return o?[n,o]:n},ew=/,?([a-z]),?/gi,rw=function(t){return t.join(",").replace(ew,"$1")},nw=function(t,e,r,n,o){return t*(t*(-3*e+9*r-9*n+3*o)+6*e-12*r+6*n)-3*e+3*r},ow=function(t,e,r,n,o,i,a,s,u){null===u&&(u=1);for(var l=(u=u>1?1:u<0?0:u)/2,c=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],f=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],h=0,p=0;p<12;p++){var d=l*c[p]+l,y=nw(d,t,r,o,a),v=nw(d,e,n,i,s),g=y*y+v*v;h+=f[p]*Math.sqrt(g)}return l*h},iw=function(t,e,r,n,o,i,a,s){if(!(Math.max(t,r)<Math.min(o,a)||Math.min(t,r)>Math.max(o,a)||Math.max(e,n)<Math.min(i,s)||Math.min(e,n)>Math.max(i,s))){var u=(t-r)*(i-s)-(e-n)*(o-a);if(u){var l=((t*n-e*r)*(o-a)-(t-r)*(o*s-i*a))/u,c=((t*n-e*r)*(i-s)-(e-n)*(o*s-i*a))/u,f=+l.toFixed(2),h=+c.toFixed(2);if(!(f<+Math.min(t,r).toFixed(2)||f>+Math.max(t,r).toFixed(2)||f<+Math.min(o,a).toFixed(2)||f>+Math.max(o,a).toFixed(2)||h<+Math.min(e,n).toFixed(2)||h>+Math.max(e,n).toFixed(2)||h<+Math.min(i,s).toFixed(2)||h>+Math.max(i,s).toFixed(2)))return{x:l,y:c}}}},aw=function(t,e,r){return e>=t.x&&e<=t.x+t.width&&r>=t.y&&r<=t.y+t.height},sw=function(t,e,r,n,o){if(o)return[["M",+t+ +o,e],["l",r-2*o,0],["a",o,o,0,0,1,o,o],["l",0,n-2*o],["a",o,o,0,0,1,-o,o],["l",2*o-r,0],["a",o,o,0,0,1,-o,-o],["l",0,2*o-n],["a",o,o,0,0,1,o,-o],["z"]];var i=[["M",t,e],["l",r,0],["l",0,n],["l",-r,0],["z"]];return i.parsePathArray=rw,i},uw=function(t,e,r,n){return null===t&&(t=e=r=n=0),null===e&&(e=t.y,r=t.width,n=t.height,t=t.x),{x:t,y:e,width:r,w:r,height:n,h:n,x2:t+r,y2:e+n,cx:t+r/2,cy:e+n/2,r1:Math.min(r,n)/2,r2:Math.max(r,n)/2,r0:Math.sqrt(r*r+n*n)/2,path:sw(t,e,r,n),vb:[t,e,r,n].join(" ")}},lw=function(t,e,r,n,o,i,a,s){(0,ng.isArray)(t)||(t=[t,e,r,n,o,i,a,s]);var u=function(t,e,r,n,o,i,a,s){for(var u,l,c,f,h=[],p=[[],[]],d=0;d<2;++d)if(0===d?(l=6*t-12*r+6*o,u=-3*t+9*r-9*o+3*a,c=3*r-3*t):(l=6*e-12*n+6*i,u=-3*e+9*n-9*i+3*s,c=3*n-3*e),Math.abs(u)<1e-12){if(Math.abs(l)<1e-12)continue;(f=-c/l)>0&&f<1&&h.push(f)}else{var y=l*l-4*c*u,v=Math.sqrt(y);if(!(y<0)){var g=(-l+v)/(2*u);g>0&&g<1&&h.push(g);var m=(-l-v)/(2*u);m>0&&m<1&&h.push(m)}}for(var b,w=h.length,S=w;w--;)b=1-(f=h[w]),p[0][w]=b*b*b*t+3*b*b*f*r+3*b*f*f*o+f*f*f*a,p[1][w]=b*b*b*e+3*b*b*f*n+3*b*f*f*i+f*f*f*s;return p[0][S]=t,p[1][S]=e,p[0][S+1]=a,p[1][S+1]=s,p[0].length=p[1].length=S+2,{min:{x:Math.min.apply(0,p[0]),y:Math.min.apply(0,p[1])},max:{x:Math.max.apply(0,p[0]),y:Math.max.apply(0,p[1])}}}.apply(null,t);return uw(u.min.x,u.min.y,u.max.x-u.min.x,u.max.y-u.min.y)},cw=function(t,e,r,n,o,i,a,s,u){var l=1-u,c=Math.pow(l,3),f=Math.pow(l,2),h=u*u,p=h*u,d=t+2*u*(r-t)+h*(o-2*r+t),y=e+2*u*(n-e)+h*(i-2*n+e),v=r+2*u*(o-r)+h*(a-2*o+r),g=n+2*u*(i-n)+h*(s-2*i+n);return{x:c*t+3*f*u*r+3*l*u*u*o+p*a,y:c*e+3*f*u*n+3*l*u*u*i+p*s,m:{x:d,y:y},n:{x:v,y:g},start:{x:l*t+u*r,y:l*e+u*n},end:{x:l*o+u*a,y:l*i+u*s},alpha:90-180*Math.atan2(d-v,y-g)/Math.PI}},fw=function(t,e,r){if(!function(t,e){return t=uw(t),e=uw(e),aw(e,t.x,t.y)||aw(e,t.x2,t.y)||aw(e,t.x,t.y2)||aw(e,t.x2,t.y2)||aw(t,e.x,e.y)||aw(t,e.x2,e.y)||aw(t,e.x,e.y2)||aw(t,e.x2,e.y2)||(t.x<e.x2&&t.x>e.x||e.x<t.x2&&e.x>t.x)&&(t.y<e.y2&&t.y>e.y||e.y<t.y2&&e.y>t.y)}(lw(t),lw(e)))return r?0:[];for(var n=~~(ow.apply(0,t)/8),o=~~(ow.apply(0,e)/8),i=[],a=[],s={},u=r?0:[],l=0;l<n+1;l++){var c=cw.apply(0,t.concat(l/n));i.push({x:c.x,y:c.y,t:l/n})}for(l=0;l<o+1;l++){c=cw.apply(0,e.concat(l/o));a.push({x:c.x,y:c.y,t:l/o})}for(l=0;l<n;l++)for(var f=0;f<o;f++){var h=i[l],p=i[l+1],d=a[f],y=a[f+1],v=Math.abs(p.x-h.x)<.001?"y":"x",g=Math.abs(y.x-d.x)<.001?"y":"x",m=iw(h.x,h.y,p.x,p.y,d.x,d.y,y.x,y.y);if(m){if(s[m.x.toFixed(4)]===m.y.toFixed(4))continue;s[m.x.toFixed(4)]=m.y.toFixed(4);var b=h.t+Math.abs((m[v]-h[v])/(p[v]-h[v]))*(p.t-h.t),w=d.t+Math.abs((m[g]-d[g])/(y[g]-d[g]))*(y.t-d.t);b>=0&&b<=1&&w>=0&&w<=1&&(r?u+=1:u.push({x:m.x,y:m.y,t1:b,t2:w}))}}return u},hw=function(t,e){return function(t,e,r){var n,o,i,a,s,u,l,c,f,h;t=tw(t),e=tw(e);for(var p=r?0:[],d=0,y=t.length;d<y;d++){var v=t[d];if("M"===v[0])n=s=v[1],o=u=v[2];else{"C"===v[0]?(n=(f=[n,o].concat(v.slice(1)))[6],o=f[7]):(f=[n,o,n,o,s,u,s,u],n=s,o=u);for(var g=0,m=e.length;g<m;g++){var b=e[g];if("M"===b[0])i=l=b[1],a=c=b[2];else{"C"===b[0]?(i=(h=[i,a].concat(b.slice(1)))[6],a=h[7]):(h=[i,a,i,a,l,c,l,c],i=l,a=c);var w=fw(f,h,r);if(r)p+=w;else{for(var S=0,x=w.length;S<x;S++)w[S].segment1=d,w[S].segment2=g,w[S].bez1=f,w[S].bez2=h;p=p.concat(w)}}}}}return p}(t,e)};function pw(t,e){var r=[],n=[];return t.length&&function t(e,o){if(1===e.length)r.push(e[0]),n.push(e[0]);else{for(var i=[],a=0;a<e.length-1;a++)0===a&&r.push(e[0]),a===e.length-2&&n.push(e[a+1]),i[a]=[(1-o)*e[a][0]+o*e[a+1][0],(1-o)*e[a][1]+o*e[a+1][1]];t(i,o)}}(t,e),{left:r,right:n.reverse()}}var dw=function(t,e,r){if(1===r)return[[].concat(t)];var n=[];if("L"===e[0]||"C"===e[0]||"Q"===e[0])n=n.concat(function(t,e,r){var n=[[t[1],t[2]]];r=r||2;var o=[];"A"===e[0]?(n.push(e[6]),n.push(e[7])):"C"===e[0]?(n.push([e[1],e[2]]),n.push([e[3],e[4]]),n.push([e[5],e[6]])):"S"===e[0]||"Q"===e[0]?(n.push([e[1],e[2]]),n.push([e[3],e[4]])):n.push([e[1],e[2]]);for(var i=n,a=1/r,s=0;s<r-1;s++){var u=pw(i,a/(1-a*s));o.push(u.left),i=u.right}return o.push(i),o.map(function(t){var e=[];return 4===t.length&&(e.push("C"),e=e.concat(t[2])),t.length>=3&&(3===t.length&&e.push("Q"),e=e.concat(t[1])),2===t.length&&e.push("L"),e=e.concat(t[t.length-1])})}(t,e,r));else{var o=[].concat(t);"M"===o[0]&&(o[0]="L");for(var i=0;i<=r-1;i++)n.push(o)}return n},yw=function(t,e){if(1===t.length)return t;var r=t.length-1,n=e.length-1,o=r/n,i=[];if(1===t.length&&"M"===t[0][0]){for(var a=0;a<n-r;a++)t.push(t[0]);return t}for(a=0;a<n;a++){var s=Math.floor(o*a);i[s]=(i[s]||0)+1}var u=i.reduce(function(e,n,o){return o===r?e.concat(t[r]):e.concat(dw(t[o],t[o+1],n))},[]);return u.unshift(t[0]),"Z"!==e[n]&&"z"!==e[n]||u.push("Z"),u},vw=function(t,e){if(t.length!==e.length)return!1;var r=!0;return(0,ng.each)(t,function(t,n){if(t!==e[n])return r=!1,!1}),r};function gw(t,e,r){var n=null,o=r;return e<o&&(o=e,n="add"),t<o&&(o=t,n="del"),{type:n,min:o}}var mw=function(t,e){var r=function(t,e){var r,n,o=t.length,i=e.length,a=0;if(0===o||0===i)return null;for(var s=[],u=0;u<=o;u++)s[u]=[],s[u][0]={min:u};for(var l=0;l<=i;l++)s[0][l]={min:l};for(u=1;u<=o;u++)for(r=t[u-1],l=1;l<=i;l++){n=e[l-1],a=vw(r,n)?0:1;var c=s[u-1][l].min+1,f=s[u][l-1].min+1,h=s[u-1][l-1].min+a;s[u][l]=gw(c,f,h)}return s}(t,e),n=t.length,o=e.length,i=[],a=1,s=1;if(r[n][o].min!==n){for(var u=1;u<=n;u++){var l=r[u][u].min;s=u;for(var c=a;c<=o;c++)r[u][c].min<l&&(l=r[u][c].min,s=c);a=s,r[u][a].type&&i.push({index:u-1,type:r[u][a].type})}for(u=i.length-1;u>=0;u--)a=i[u].index,"add"===i[u].type?t.splice(a,0,[].concat(t[a])):t.splice(a,1)}var f=o-(n=t.length);if(n<o)for(u=0;u<f;u++)"z"===t[n-1][0]||"Z"===t[n-1][0]?t.splice(n-2,0,t[n-2]):t.push(t[n-1]),n+=1;return t};function bw(t,e,r){for(var n,o=[].concat(t),i=1/(r+1),a=ww(e)[0],s=1;s<=r;s++)i*=s,0===(n=Math.floor(t.length*i))?o.unshift([a[0]*i+t[n][0]*(1-i),a[1]*i+t[n][1]*(1-i)]):o.splice(n,0,[a[0]*i+t[n][0]*(1-i),a[1]*i+t[n][1]*(1-i)]);return o}function ww(t){var e=[];switch(t[0]){case"M":case"L":e.push([t[1],t[2]]);break;case"A":e.push([t[6],t[7]]);break;case"Q":e.push([t[3],t[4]]),e.push([t[1],t[2]]);break;case"T":e.push([t[1],t[2]]);break;case"C":e.push([t[5],t[6]]),e.push([t[1],t[2]]),e.push([t[3],t[4]]);break;case"S":e.push([t[3],t[4]]),e.push([t[1],t[2]]);break;case"H":case"V":e.push([t[1],t[1]])}return e}var Sw=function(t,e){if(t.length<=1)return t;for(var r,n=0;n<e.length;n++)if(t[n][0]!==e[n][0])switch(r=ww(t[n]),e[n][0]){case"M":t[n]=["M"].concat(r[0]);break;case"L":t[n]=["L"].concat(r[0]);break;case"A":t[n]=[].concat(e[n]),t[n][6]=r[0][0],t[n][7]=r[0][1];break;case"Q":if(r.length<2){if(!(n>0)){t[n]=e[n];break}r=bw(r,t[n-1],1)}t[n]=["Q"].concat(r.reduce(function(t,e){return t.concat(e)},[]));break;case"T":t[n]=["T"].concat(r[0]);break;case"C":if(r.length<3){if(!(n>0)){t[n]=e[n];break}r=bw(r,t[n-1],2)}t[n]=["C"].concat(r.reduce(function(t,e){return t.concat(e)},[]));break;case"S":if(r.length<2){if(!(n>0)){t[n]=e[n];break}r=bw(r,t[n-1],1)}t[n]=["S"].concat(r.reduce(function(t,e){return t.concat(e)},[]));break;default:t[n]=e[n]}return t},xw=function(){function t(t,e){this.bubbles=!0,this.target=null,this.currentTarget=null,this.delegateTarget=null,this.delegateObject=null,this.defaultPrevented=!1,this.propagationStopped=!1,this.shape=null,this.fromShape=null,this.toShape=null,this.propagationPath=[],this.type=t,this.name=t,this.originalEvent=e,this.timeStamp=e.timeStamp}return t.prototype.preventDefault=function(){this.defaultPrevented=!0,this.originalEvent.preventDefault&&this.originalEvent.preventDefault()},t.prototype.stopPropagation=function(){this.propagationStopped=!0},t.prototype.toString=function(){return"[Event (type="+this.type+")]"},t.prototype.save=function(){},t.prototype.restore=function(){},t}();function _w(t,e){var r=t.indexOf(e);-1!==r&&t.splice(r,1)}var Ew="undefined"!=typeof window&&void 0!==window.document;function Ow(t,e){if(t.isCanvas())return!0;for(var r=e.getParent(),n=!1;r;){if(r===t){n=!0;break}r=r.getParent()}return n}function Pw(t){return t.cfg.visible&&t.cfg.capture}var kw=function(t){function e(e){var r=t.call(this)||this;r.destroyed=!1;var n=r.getDefaultCfg();return r.cfg=(0,ng.mix)(n,e),r}return(0,rg.__extends)(e,t),e.prototype.getDefaultCfg=function(){return{}},e.prototype.get=function(t){return this.cfg[t]},e.prototype.set=function(t,e){this.cfg[t]=e},e.prototype.destroy=function(){this.cfg={destroyed:!0},this.off(),this.destroyed=!0},e}(sg),Cw=function(t,e,r){if(r||2===arguments.length)for(var n,o=0,i=e.length;o<i;o++)!n&&o in e||(n||(n=Array.prototype.slice.call(e,0,o)),n[o]=e[o]);return t.concat(n||Array.prototype.slice.call(e))},Tw=function(){return function(t,e,r){this.name=t,this.version=e,this.os=r,this.type="browser"}}(),Aw=function(){return function(t){this.version=t,this.type="node",this.name="node",this.os=process.platform}}(),Mw=function(){return function(t,e,r,n){this.name=t,this.version=e,this.os=r,this.bot=n,this.type="bot-device"}}(),jw=function(){return function(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}}(),Iw=function(){return function(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}}(),Nw=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,Lw=3,Rw=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/]],Dw=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function Bw(t){return t?Gw(t):"undefined"==typeof document&&"undefined"!=typeof navigator&&"ReactNative"===navigator.product?new Iw:"undefined"!=typeof navigator?Gw(navigator.userAgent):"undefined"!=typeof process&&process.version?new Aw(process.version.slice(1)):null}function Fw(t){return""!==t&&Rw.reduce(function(e,r){var n=r[0],o=r[1];if(e)return e;var i=o.exec(t);return!!i&&[n,i]},!1)}function Gw(t){var e=Fw(t);if(!e)return null;var r=e[0],n=e[1];if("searchbot"===r)return new jw;var o=n[1]&&n[1].split(".").join("_").split("_").slice(0,3);o?o.length<Lw&&(o=Cw(Cw([],o,!0),function(t){for(var e=[],r=0;r<t;r++)e.push("0");return e}(Lw-o.length),!0)):o=[];var i=o.join("."),a=function(t){for(var e=0,r=Dw.length;e<r;e++){var n=Dw[e],o=n[0],i=n[1],a=i.exec(t);if(a)return o}return null}(t),s=Nw.exec(t);return s&&s[1]?new Mw(r,i,a,s[1]):new Tw(r,i,a)}function Uw(t,e){var r=[],n=t[0],o=t[1],i=t[2],a=t[3],s=t[4],u=t[5],l=t[6],c=t[7],f=t[8],h=e[0],p=e[1],d=e[2],y=e[3],v=e[4],g=e[5],m=e[6],b=e[7],w=e[8];return r[0]=h*n+p*a+d*l,r[1]=h*o+p*s+d*c,r[2]=h*i+p*u+d*f,r[3]=y*n+v*a+g*l,r[4]=y*o+v*s+g*c,r[5]=y*i+v*u+g*f,r[6]=m*n+b*a+w*l,r[7]=m*o+b*s+w*c,r[8]=m*i+b*u+w*f,r}function zw(t,e){var r=[],n=e[0],o=e[1];return r[0]=t[0]*n+t[3]*o+t[6],r[1]=t[1]*n+t[4]*o+t[7],r}function Vw(t){var e=[],r=t[0],n=t[1],o=t[2],i=t[3],a=t[4],s=t[5],u=t[6],l=t[7],c=t[8],f=c*a-s*l,h=-c*i+s*u,p=l*i-a*u,d=r*f+n*h+o*p;return d?(d=1/d,e[0]=f*d,e[1]=(-c*n+o*l)*d,e[2]=(s*n-o*a)*d,e[3]=h*d,e[4]=(c*r-o*u)*d,e[5]=(-s*r+o*i)*d,e[6]=p*d,e[7]=(-l*r+n*u)*d,e[8]=(a*r-n*i)*d,e):null}var Hw=hg,Ww=["zIndex","capture","visible","type"],qw=["repeat"];var Yw=function(t){function e(e){var r=t.call(this,e)||this;r.attrs={};var n=r.getDefaultAttrs();return(0,ng.mix)(n,e.attrs),r.attrs=n,r.initAttrs(n),r.initAnimate(),r}return(0,rg.__extends)(e,t),e.prototype.getDefaultCfg=function(){return{visible:!0,capture:!0,zIndex:0}},e.prototype.getDefaultAttrs=function(){return{matrix:this.getDefaultMatrix(),opacity:1}},e.prototype.onCanvasChange=function(t){},e.prototype.initAttrs=function(t){},e.prototype.initAnimate=function(){this.set("animable",!0),this.set("animating",!1)},e.prototype.isGroup=function(){return!1},e.prototype.getParent=function(){return this.get("parent")},e.prototype.getCanvas=function(){return this.get("canvas")},e.prototype.attr=function(){for(var t,e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var n=e[0],o=e[1];if(!n)return this.attrs;if((0,ng.isObject)(n)){for(var i in n)this.setAttr(i,n[i]);return this.afterAttrsChange(n),this}return 2===e.length?(this.setAttr(n,o),this.afterAttrsChange(((t={})[n]=o,t)),this):this.attrs[n]},e.prototype.isClipped=function(t,e){var r=this.getClip();return r&&!r.isHit(t,e)},e.prototype.setAttr=function(t,e){var r=this.attrs[t];r!==e&&(this.attrs[t]=e,this.onAttrChange(t,e,r))},e.prototype.onAttrChange=function(t,e,r){"matrix"===t&&this.set("totalMatrix",null)},e.prototype.afterAttrsChange=function(t){if(this.cfg.isClipShape){var e=this.cfg.applyTo;e&&e.onCanvasChange("clip")}else this.onCanvasChange("attr")},e.prototype.show=function(){return this.set("visible",!0),this.onCanvasChange("show"),this},e.prototype.hide=function(){return this.set("visible",!1),this.onCanvasChange("hide"),this},e.prototype.setZIndex=function(t){this.set("zIndex",t);var e=this.getParent();return e&&e.sort(),this},e.prototype.toFront=function(){var t=this.getParent();if(t){var e=t.getChildren(),r=(this.get("el"),e.indexOf(this));e.splice(r,1),e.push(this),this.onCanvasChange("zIndex")}},e.prototype.toBack=function(){var t=this.getParent();if(t){var e=t.getChildren(),r=(this.get("el"),e.indexOf(this));e.splice(r,1),e.unshift(this),this.onCanvasChange("zIndex")}},e.prototype.remove=function(t){void 0===t&&(t=!0);var e=this.getParent();e?(_w(e.getChildren(),this),e.get("clearing")||this.onCanvasChange("remove")):this.onCanvasChange("remove"),t&&this.destroy()},e.prototype.resetMatrix=function(){this.attr("matrix",this.getDefaultMatrix()),this.onCanvasChange("matrix")},e.prototype.getMatrix=function(){return this.attr("matrix")},e.prototype.setMatrix=function(t){this.attr("matrix",t),this.onCanvasChange("matrix")},e.prototype.getTotalMatrix=function(){var t=this.cfg.totalMatrix;if(!t){var e=this.attr("matrix"),r=this.cfg.parentMatrix;t=r&&e?Uw(r,e):e||r,this.set("totalMatrix",t)}return t},e.prototype.applyMatrix=function(t){var e=this.attr("matrix"),r=null;r=t&&e?Uw(t,e):e||t,this.set("totalMatrix",r),this.set("parentMatrix",t)},e.prototype.getDefaultMatrix=function(){return null},e.prototype.applyToMatrix=function(t){var e=this.attr("matrix");return e?zw(e,t):t},e.prototype.invertFromMatrix=function(t){var e=this.attr("matrix");if(e){var r=Vw(e);if(r)return zw(r,t)}return t},e.prototype.setClip=function(t){var e=this.getCanvas(),r=null;if(t){var n=this.getShapeBase()[(0,ng.upperFirst)(t.type)];n&&(r=new n({type:t.type,isClipShape:!0,applyTo:this,attrs:t.attrs,canvas:e}))}return this.set("clipShape",r),this.onCanvasChange("clip"),r},e.prototype.getClip=function(){var t=this.cfg.clipShape;return t||null},e.prototype.clone=function(){var t=this,e=this.attrs,r={};(0,ng.each)(e,function(t,n){(0,ng.isArray)(e[n])?r[n]=function(t){for(var e=[],r=0;r<t.length;r++)(0,ng.isArray)(t[r])?e.push([].concat(t[r])):e.push(t[r]);return e}(e[n]):r[n]=e[n]});var n=new(0,this.constructor)({attrs:r});return(0,ng.each)(Ww,function(e){n.set(e,t.get(e))}),n},e.prototype.destroy=function(){this.destroyed||(this.attrs={},t.prototype.destroy.call(this))},e.prototype.isAnimatePaused=function(){return this.get("_pause").isPaused},e.prototype.animate=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(this.get("timeline")||this.get("canvas")){this.set("animating",!0);var r=this.get("timeline");r||(r=this.get("canvas").get("timeline"),this.set("timeline",r));var n=this.get("animations")||[];r.timer||r.initTimer();var o,i,a,s,u,l=t[0],c=t[1],f=t[2],h=void 0===f?"easeLinear":f,p=t[3],d=void 0===p?ng.noop:p,y=t[4],v=void 0===y?0:y;(0,ng.isFunction)(l)?(o=l,l={}):(0,ng.isObject)(l)&&l.onFrame&&(o=l.onFrame,i=l.repeat),(0,ng.isObject)(c)?(c=(u=c).duration,h=u.easing||"easeLinear",v=u.delay||0,i=u.repeat||i||!1,d=u.callback||ng.noop,a=u.pauseCallback||ng.noop,s=u.resumeCallback||ng.noop):((0,ng.isNumber)(d)&&(v=d,d=null),(0,ng.isFunction)(h)?(d=h,h="easeLinear"):h=h||"easeLinear");var g=function(t,e){var r={},n=e.attr();return(0,ng.each)(t,function(t,e){-1!==qw.indexOf(e)||(0,ng.isEqual)(n[e],t)||(r[e]=t)}),r}(l,this),m={fromAttrs:function(t,e){var r={},n=e.attrs;for(var o in t)r[o]=n[o];return r}(g,this),toAttrs:g,duration:c,easing:h,repeat:i,callback:d,pauseCallback:a,resumeCallback:s,delay:v,startTime:r.getTime(),id:(0,ng.uniqueId)(),onFrame:o,pathFormatted:!1};n.length>0?n=function(t,e){if(e.onFrame)return t;var r=e.startTime,n=e.delay,o=e.duration,i=Object.prototype.hasOwnProperty;return(0,ng.each)(t,function(t){r+n<t.startTime+t.delay+t.duration&&o>t.delay&&(0,ng.each)(e.toAttrs,function(e,r){i.call(t.toAttrs,r)&&(delete t.toAttrs[r],delete t.fromAttrs[r])})}),t}(n,m):r.addAnimator(this),n.push(m),this.set("animations",n),this.set("_pause",{isPaused:!1})}},e.prototype.stopAnimate=function(t){var e=this;void 0===t&&(t=!0);var r=this.get("animations");(0,ng.each)(r,function(r){t&&(r.onFrame?e.attr(r.onFrame(1)):e.attr(r.toAttrs)),r.callback&&r.callback()}),this.set("animating",!1),this.set("animations",[])},e.prototype.pauseAnimate=function(){var t=this.get("timeline"),e=this.get("animations"),r=t.getTime();return(0,ng.each)(e,function(t){t._paused=!0,t._pauseTime=r,t.pauseCallback&&t.pauseCallback()}),this.set("_pause",{isPaused:!0,pauseTime:r}),this},e.prototype.resumeAnimate=function(){var t=this.get("timeline").getTime(),e=this.get("animations"),r=this.get("_pause").pauseTime;return(0,ng.each)(e,function(e){e.startTime=e.startTime+(t-r),e._paused=!1,e._pauseTime=null,e.resumeCallback&&e.resumeCallback()}),this.set("_pause",{isPaused:!1}),this.set("animations",e),this},e.prototype.emitDelegation=function(t,e){var r,n=this,o=e.propagationPath;this.getEvents();"mouseenter"===t?r=e.fromShape:"mouseleave"===t&&(r=e.toShape);for(var i=function(t){var i=o[t],s=i.get("name");if(s){if((i.isGroup()||i.isCanvas&&i.isCanvas())&&r&&Ow(i,r))return"break";(0,ng.isArray)(s)?(0,ng.each)(s,function(t){n.emitDelegateEvent(i,t,e)}):a.emitDelegateEvent(i,s,e)}},a=this,s=0;s<o.length;s++){if("break"===i(s))break}},e.prototype.emitDelegateEvent=function(t,e,r){var n=this.getEvents(),o=e+":"+r.type;(n[o]||n["*"])&&(r.name=o,r.currentTarget=t,r.delegateTarget=this,r.delegateObject=t.get("delegateObject"),this.emit(o,r))},e.prototype.translate=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0);var r=this.getMatrix(),n=Hw(r,[["t",t,e]]);return this.setMatrix(n),this},e.prototype.move=function(t,e){var r=this.attr("x")||0,n=this.attr("y")||0;return this.translate(t-r,e-n),this},e.prototype.moveTo=function(t,e){return this.move(t,e)},e.prototype.scale=function(t,e){var r=this.getMatrix(),n=Hw(r,[["s",t,e||t]]);return this.setMatrix(n),this},e.prototype.rotate=function(t){var e=this.getMatrix(),r=Hw(e,[["r",t]]);return this.setMatrix(r),this},e.prototype.rotateAtStart=function(t){var e=this.attr(),r=e.x,n=e.y,o=this.getMatrix(),i=Hw(o,[["t",-r,-n],["r",t],["t",r,n]]);return this.setMatrix(i),this},e.prototype.rotateAtPoint=function(t,e,r){var n=this.getMatrix(),o=Hw(n,[["t",-t,-e],["r",r],["t",t,e]]);return this.setMatrix(o),this},e}(kw),Xw={},Jw="_INDEX";var Kw=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,rg.__extends)(e,t),e.prototype.isCanvas=function(){return!1},e.prototype.getBBox=function(){var t=1/0,e=-1/0,r=1/0,n=-1/0,o=this.getChildren().filter(function(t){return t.get("visible")&&(!t.isGroup()||t.isGroup()&&t.getChildren().length>0)});return o.length>0?(0,ng.each)(o,function(o){var i=o.getBBox(),a=i.minX,s=i.maxX,u=i.minY,l=i.maxY;a<t&&(t=a),s>e&&(e=s),u<r&&(r=u),l>n&&(n=l)}):(t=0,e=0,r=0,n=0),{x:t,y:r,minX:t,minY:r,maxX:e,maxY:n,width:e-t,height:n-r}},e.prototype.getCanvasBBox=function(){var t=1/0,e=-1/0,r=1/0,n=-1/0,o=this.getChildren().filter(function(t){return t.get("visible")&&(!t.isGroup()||t.isGroup()&&t.getChildren().length>0)});return o.length>0?(0,ng.each)(o,function(o){var i=o.getCanvasBBox(),a=i.minX,s=i.maxX,u=i.minY,l=i.maxY;a<t&&(t=a),s>e&&(e=s),u<r&&(r=u),l>n&&(n=l)}):(t=0,e=0,r=0,n=0),{x:t,y:r,minX:t,minY:r,maxX:e,maxY:n,width:e-t,height:n-r}},e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return e.children=[],e},e.prototype.onAttrChange=function(e,r,n){if(t.prototype.onAttrChange.call(this,e,r,n),"matrix"===e){var o=this.getTotalMatrix();this._applyChildrenMarix(o)}},e.prototype.applyMatrix=function(e){var r=this.getTotalMatrix();t.prototype.applyMatrix.call(this,e);var n=this.getTotalMatrix();n!==r&&this._applyChildrenMarix(n)},e.prototype._applyChildrenMarix=function(t){var e=this.getChildren();(0,ng.each)(e,function(e){e.applyMatrix(t)})},e.prototype.addShape=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=t[0],n=t[1];(0,ng.isObject)(r)?n=r:n.type=r;var o=Xw[n.type];o||(o=(0,ng.upperFirst)(n.type),Xw[n.type]=o);var i=new(this.getShapeBase()[o])(n);return this.add(i),i},e.prototype.addGroup=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r,n=t[0],o=t[1];if((0,ng.isFunction)(n))r=new n(o||{parent:this});else{var i=n||{};r=new(this.getGroupBase())(i)}return this.add(r),r},e.prototype.getCanvas=function(){return this.isCanvas()?this:this.get("canvas")},e.prototype.getShape=function(t,e,r){if(!Pw(this))return null;var n,o=this.getChildren();if(this.isCanvas())n=this._findShape(o,t,e,r);else{var i=[t,e,1];i=this.invertFromMatrix(i),this.isClipped(i[0],i[1])||(n=this._findShape(o,i[0],i[1],r))}return n},e.prototype._findShape=function(t,e,r,n){for(var o=null,i=t.length-1;i>=0;i--){var a=t[i];if(Pw(a)&&(a.isGroup()?o=a.getShape(e,r,n):a.isHit(e,r)&&(o=a)),o)break}return o},e.prototype.add=function(t){var e=this.getCanvas(),r=this.getChildren(),n=this.get("timeline"),o=t.getParent();o&&function(t,e,r){void 0===r&&(r=!0),r?e.destroy():(e.set("parent",null),e.set("canvas",null)),_w(t.getChildren(),e)}(o,t,!1),t.set("parent",this),e&&function t(e,r){if(e.set("canvas",r),e.isGroup()){var n=e.get("children");n.length&&n.forEach(function(e){t(e,r)})}}(t,e),n&&function t(e,r){if(e.set("timeline",r),e.isGroup()){var n=e.get("children");n.length&&n.forEach(function(e){t(e,r)})}}(t,n),r.push(t),t.onCanvasChange("add"),this._applyElementMatrix(t)},e.prototype._applyElementMatrix=function(t){var e=this.getTotalMatrix();e&&t.applyMatrix(e)},e.prototype.getChildren=function(){return this.get("children")||[]},e.prototype.sort=function(){var t,e=this.getChildren();(0,ng.each)(e,function(t,e){return t[Jw]=e,t}),e.sort((t=function(t,e){return t.get("zIndex")-e.get("zIndex")},function(e,r){var n=t(e,r);return 0===n?e[Jw]-r[Jw]:n})),this.onCanvasChange("sort")},e.prototype.clear=function(){if(this.set("clearing",!0),!this.destroyed){for(var t=this.getChildren(),e=t.length-1;e>=0;e--)t[e].destroy();this.set("children",[]),this.onCanvasChange("clear"),this.set("clearing",!1)}},e.prototype.destroy=function(){this.get("destroyed")||(this.clear(),t.prototype.destroy.call(this))},e.prototype.getFirst=function(){return this.getChildByIndex(0)},e.prototype.getLast=function(){var t=this.getChildren();return this.getChildByIndex(t.length-1)},e.prototype.getChildByIndex=function(t){return this.getChildren()[t]},e.prototype.getCount=function(){return this.getChildren().length},e.prototype.contain=function(t){return this.getChildren().indexOf(t)>-1},e.prototype.removeChild=function(t,e){void 0===e&&(e=!0),this.contain(t)&&t.remove(e)},e.prototype.findAll=function(t){var e=[],r=this.getChildren();return(0,ng.each)(r,function(r){t(r)&&e.push(r),r.isGroup()&&(e=e.concat(r.findAll(t)))}),e},e.prototype.find=function(t){var e=null,r=this.getChildren();return(0,ng.each)(r,function(r){if(t(r)?e=r:r.isGroup()&&(e=r.find(t)),e)return!1}),e},e.prototype.findById=function(t){return this.find(function(e){return e.get("id")===t})},e.prototype.findByClassName=function(t){return this.find(function(e){return e.get("className")===t})},e.prototype.findAllByName=function(t){return this.findAll(function(e){return e.get("name")===t})},e}(Yw),Qw=r(4751);function Zw(t,e,r){t.prototype=e.prototype=r,r.constructor=t}function $w(t,e){var r=Object.create(t.prototype);for(var n in e)r[n]=e[n];return r}function tS(){}var eS="\\s*([+-]?\\d+)\\s*",rS="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",nS="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",oS=/^#([0-9a-f]{3,8})$/,iS=new RegExp("^rgb\\(".concat(eS,",").concat(eS,",").concat(eS,"\\)$")),aS=new RegExp("^rgb\\(".concat(nS,",").concat(nS,",").concat(nS,"\\)$")),sS=new RegExp("^rgba\\(".concat(eS,",").concat(eS,",").concat(eS,",").concat(rS,"\\)$")),uS=new RegExp("^rgba\\(".concat(nS,",").concat(nS,",").concat(nS,",").concat(rS,"\\)$")),lS=new RegExp("^hsl\\(".concat(rS,",").concat(nS,",").concat(nS,"\\)$")),cS=new RegExp("^hsla\\(".concat(rS,",").concat(nS,",").concat(nS,",").concat(rS,"\\)$")),fS={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function hS(){return this.rgb().formatHex()}function pS(){return this.rgb().formatRgb()}function dS(t){var e,r;return t=(t+"").trim().toLowerCase(),(e=oS.exec(t))?(r=e[1].length,e=parseInt(e[1],16),6===r?yS(e):3===r?new mS(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===r?vS(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===r?vS(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=iS.exec(t))?new mS(e[1],e[2],e[3],1):(e=aS.exec(t))?new mS(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=sS.exec(t))?vS(e[1],e[2],e[3],e[4]):(e=uS.exec(t))?vS(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=lS.exec(t))?ES(e[1],e[2]/100,e[3]/100,1):(e=cS.exec(t))?ES(e[1],e[2]/100,e[3]/100,e[4]):fS.hasOwnProperty(t)?yS(fS[t]):"transparent"===t?new mS(NaN,NaN,NaN,0):null}function yS(t){return new mS(t>>16&255,t>>8&255,255&t,1)}function vS(t,e,r,n){return n<=0&&(t=e=r=NaN),new mS(t,e,r,n)}function gS(t,e,r,n){return 1===arguments.length?((o=t)instanceof tS||(o=dS(o)),o?new mS((o=o.rgb()).r,o.g,o.b,o.opacity):new mS):new mS(t,e,r,null==n?1:n);var o}function mS(t,e,r,n){this.r=+t,this.g=+e,this.b=+r,this.opacity=+n}function bS(){return"#".concat(_S(this.r)).concat(_S(this.g)).concat(_S(this.b))}function wS(){var t=SS(this.opacity);return"".concat(1===t?"rgb(":"rgba(").concat(xS(this.r),", ").concat(xS(this.g),", ").concat(xS(this.b)).concat(1===t?")":", ".concat(t,")"))}function SS(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function xS(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function _S(t){return((t=xS(t))<16?"0":"")+t.toString(16)}function ES(t,e,r,n){return n<=0?t=e=r=NaN:r<=0||r>=1?t=e=NaN:e<=0&&(t=NaN),new PS(t,e,r,n)}function OS(t){if(t instanceof PS)return new PS(t.h,t.s,t.l,t.opacity);if(t instanceof tS||(t=dS(t)),!t)return new PS;if(t instanceof PS)return t;var e=(t=t.rgb()).r/255,r=t.g/255,n=t.b/255,o=Math.min(e,r,n),i=Math.max(e,r,n),a=NaN,s=i-o,u=(i+o)/2;return s?(a=e===i?(r-n)/s+6*(r<n):r===i?(n-e)/s+2:(e-r)/s+4,s/=u<.5?i+o:2-i-o,a*=60):s=u>0&&u<1?0:a,new PS(a,s,u,t.opacity)}function PS(t,e,r,n){this.h=+t,this.s=+e,this.l=+r,this.opacity=+n}function kS(t){return(t=(t||0)%360)<0?t+360:t}function CS(t){return Math.max(0,Math.min(1,t||0))}function TS(t,e,r){return 255*(t<60?e+(r-e)*t/60:t<180?r:t<240?e+(r-e)*(240-t)/60:e)}function AS(t,e,r,n,o){var i=t*t,a=i*t;return((1-3*t+3*i-a)*e+(4-6*i+3*a)*r+(1+3*t+3*i-3*a)*n+a*o)/6}Zw(tS,dS,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:hS,formatHex:hS,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return OS(this).formatHsl()},formatRgb:pS,toString:pS}),Zw(mS,gS,$w(tS,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new mS(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new mS(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},clamp:function(){return new mS(xS(this.r),xS(this.g),xS(this.b),SS(this.opacity))},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:bS,formatHex:bS,formatHex8:function(){return"#".concat(_S(this.r)).concat(_S(this.g)).concat(_S(this.b)).concat(_S(255*(isNaN(this.opacity)?1:this.opacity)))},formatRgb:wS,toString:wS})),Zw(PS,function(t,e,r,n){return 1===arguments.length?OS(t):new PS(t,e,r,null==n?1:n)},$w(tS,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new PS(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new PS(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*e,o=2*r-n;return new mS(TS(t>=240?t-240:t+120,o,n),TS(t,o,n),TS(t<120?t+240:t-120,o,n),this.opacity)},clamp:function(){return new PS(kS(this.h),CS(this.s),CS(this.l),SS(this.opacity))},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=SS(this.opacity);return"".concat(1===t?"hsl(":"hsla(").concat(kS(this.h),", ").concat(100*CS(this.s),"%, ").concat(100*CS(this.l),"%").concat(1===t?")":", ".concat(t,")"))}}));var MS=function(t){return function(){return t}};function jS(t,e){return function(r){return t+r*e}}function IS(t){return 1==(t=+t)?NS:function(e,r){return r-e?function(t,e,r){return t=Math.pow(t,r),e=Math.pow(e,r)-t,r=1/r,function(n){return Math.pow(t+n*e,r)}}(e,r,t):MS(isNaN(e)?r:e)}}function NS(t,e){var r=e-t;return r?jS(t,r):MS(isNaN(t)?e:t)}var LS=function t(e){var r=IS(e);function n(t,e){var n=r((t=gS(t)).r,(e=gS(e)).r),o=r(t.g,e.g),i=r(t.b,e.b),a=NS(t.opacity,e.opacity);return function(e){return t.r=n(e),t.g=o(e),t.b=i(e),t.opacity=a(e),t+""}}return n.gamma=t,n}(1);function RS(t){return function(e){var r,n,o=e.length,i=new Array(o),a=new Array(o),s=new Array(o);for(r=0;r<o;++r)n=gS(e[r]),i[r]=n.r||0,a[r]=n.g||0,s[r]=n.b||0;return i=t(i),a=t(a),s=t(s),n.opacity=1,function(t){return n.r=i(t),n.g=a(t),n.b=s(t),n+""}}}RS(function(t){var e=t.length-1;return function(r){var n=r<=0?r=0:r>=1?(r=1,e-1):Math.floor(r*e),o=t[n],i=t[n+1],a=n>0?t[n-1]:2*o-i,s=n<e-1?t[n+2]:2*i-o;return AS((r-n/e)*e,a,o,i,s)}}),RS(function(t){var e=t.length;return function(r){var n=Math.floor(((r%=1)<0?++r:r)*e),o=t[(n+e-1)%e],i=t[n%e],a=t[(n+1)%e],s=t[(n+2)%e];return AS((r-n/e)*e,o,i,a,s)}});function DS(t,e){e||(e=[]);var r,n=t?Math.min(e.length,t.length):0,o=e.slice();return function(i){for(r=0;r<n;++r)o[r]=t[r]*(1-i)+e[r]*i;return o}}function BS(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function FS(t,e){var r,n=e?e.length:0,o=t?Math.min(n,t.length):0,i=new Array(o),a=new Array(n);for(r=0;r<o;++r)i[r]=WS(t[r],e[r]);for(;r<n;++r)a[r]=e[r];return function(t){for(r=0;r<o;++r)a[r]=i[r](t);return a}}function GS(t,e){return t=+t,e=+e,function(r){return t*(1-r)+e*r}}function US(t){"@babel/helpers - typeof";return(US="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var zS=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,VS=new RegExp(zS.source,"g");function HS(t){"@babel/helpers - typeof";return(HS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function WS(t,e){var r,n=HS(e);return null==e||"boolean"===n?MS(e):("number"===n?GS:"string"===n?(r=dS(e))?(e=r,LS):function(t,e){var r,n,o,i=zS.lastIndex=VS.lastIndex=0,a=-1,s=[],u=[];for(t+="",e+="";(r=zS.exec(t))&&(n=VS.exec(e));)(o=n.index)>i&&(o=e.slice(i,o),s[a]?s[a]+=o:s[++a]=o),(r=r[0])===(n=n[0])?s[a]?s[a]+=n:s[++a]=n:(s[++a]=null,u.push({i:a,x:GS(r,n)})),i=VS.lastIndex;return i<e.length&&(o=e.slice(i),s[a]?s[a]+=o:s[++a]=o),s.length<2?u[0]?function(t){return function(e){return t(e)+""}}(u[0].x):function(t){return function(){return t}}(e):(e=u.length,function(t){for(var r,n=0;n<e;++n)s[(r=u[n]).i]=r.x(t);return s.join("")})}:e instanceof dS?LS:e instanceof Date?function(t,e){var r=new Date;return t=+t,e=+e,function(n){return r.setTime(t*(1-n)+e*n),r}}:BS(e)?DS:Array.isArray(e)?FS:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?function(t,e){var r,n={},o={};for(r in null!==t&&"object"===US(t)||(t={}),null!==e&&"object"===US(e)||(e={}),e)r in t?n[r]=WS(t[r],e[r]):o[r]=e[r];return function(t){for(r in n)o[r]=n[r](t);return o}}:GS)(t,e)}function qS(t){return+t}function YS(t){return t*t}function XS(t){return t*(2-t)}function JS(t){return((t*=2)<=1?t*t:--t*(2-t)+1)/2}function KS(t){return t*t*t}function QS(t){return--t*t*t+1}function ZS(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var $S=function t(e){function r(t){return Math.pow(t,e)}return e=+e,r.exponent=t,r}(3),tx=function t(e){function r(t){return 1-Math.pow(1-t,e)}return e=+e,r.exponent=t,r}(3),ex=function t(e){function r(t){return((t*=2)<=1?Math.pow(t,e):2-Math.pow(2-t,e))/2}return e=+e,r.exponent=t,r}(3),rx=Math.PI,nx=rx/2;function ox(t){return 1==+t?1:1-Math.cos(t*nx)}function ix(t){return Math.sin(t*nx)}function ax(t){return(1-Math.cos(rx*t))/2}function sx(t){return 1.0009775171065494*(Math.pow(2,-10*t)-.0009765625)}function ux(t){return sx(1-+t)}function lx(t){return 1-sx(t)}function cx(t){return((t*=2)<=1?sx(1-t):2-sx(t-1))/2}function fx(t){return 1-Math.sqrt(1-t*t)}function hx(t){return Math.sqrt(1- --t*t)}function px(t){return((t*=2)<=1?1-Math.sqrt(1-t*t):Math.sqrt(1-(t-=2)*t)+1)/2}var dx=4/11,yx=6/11,vx=8/11,gx=.75,mx=9/11,bx=10/11,wx=.9375,Sx=21/22,xx=63/64,_x=1/dx/dx;function Ex(t){return 1-Ox(1-t)}function Ox(t){return(t=+t)<dx?_x*t*t:t<vx?_x*(t-=yx)*t+gx:t<bx?_x*(t-=mx)*t+wx:_x*(t-=Sx)*t+xx}function Px(t){return((t*=2)<=1?1-Ox(1-t):Ox(t-1)+1)/2}var kx=function t(e){function r(t){return(t=+t)*t*(e*(t-1)+t)}return e=+e,r.overshoot=t,r}(1.70158),Cx=function t(e){function r(t){return--t*t*((t+1)*e+t)+1}return e=+e,r.overshoot=t,r}(1.70158),Tx=function t(e){function r(t){return((t*=2)<1?t*t*((e+1)*t-e):(t-=2)*t*((e+1)*t+e)+2)/2}return e=+e,r.overshoot=t,r}(1.70158),Ax=2*Math.PI,Mx=function t(e,r){var n=Math.asin(1/(e=Math.max(1,e)))*(r/=Ax);function o(t){return e*sx(- --t)*Math.sin((n-t)/r)}return o.amplitude=function(e){return t(e,r*Ax)},o.period=function(r){return t(e,r)},o}(1,.3),jx=function t(e,r){var n=Math.asin(1/(e=Math.max(1,e)))*(r/=Ax);function o(t){return 1-e*sx(t=+t)*Math.sin((t+n)/r)}return o.amplitude=function(e){return t(e,r*Ax)},o.period=function(r){return t(e,r)},o}(1,.3),Ix=function t(e,r){var n=Math.asin(1/(e=Math.max(1,e)))*(r/=Ax);function o(t){return((t=2*t-1)<0?e*sx(-t)*Math.sin((n-t)/r):2-e*sx(t)*Math.sin((n+t)/r))/2}return o.amplitude=function(e){return t(e,r*Ax)},o.period=function(r){return t(e,r)},o}(1,.3),Nx={};var Lx=function(t){return["fill","stroke","fillStyle","strokeStyle"].includes(t)},Rx=function(t){return/^[r,R,L,l]{1}[\s]*\(/.test(t)},Dx=[1,0,0,0,1,0,0,0,1];function Bx(t,e,r){var n,o=e.startTime;if(r<o+e.delay||e._paused)return!1;var i,a=e.duration,u=e.easing,l=Nx[(i=u).toLowerCase()]||s[i];if(r=r-o-e.delay,e.repeat)n=l(n=r%a/a);else{if(!((n=r/a)<1))return e.onFrame?t.attr(e.onFrame(1)):t.attr(e.toAttrs),!0;n=l(n)}if(e.onFrame){var c=e.onFrame(n);t.attr(c)}else!function(t,e,r){var n={},o=e.fromAttrs,i=e.toAttrs;if(!t.destroyed){var a,s,u;for(var l in i)if(!(0,ng.isEqual)(o[l],i[l]))if("path"===l){var c=i[l],f=o[l];c.length>f.length?(c=Xb(i[l]),f=Xb(o[l]),f=mw(f,c),f=Sw(f,c),e.fromAttrs.path=f,e.toAttrs.path=c):e.pathFormatted||(c=Xb(i[l]),f=Xb(o[l]),f=Sw(f,c),e.fromAttrs.path=f,e.toAttrs.path=c,e.pathFormatted=!0),n[l]=[];for(var h=0;h<c.length;h++){for(var p=c[h],d=f[h],y=[],v=0;v<p.length;v++)(0,ng.isNumber)(p[v])&&d&&(0,ng.isNumber)(d[v])?(a=WS(d[v],p[v]),y.push(a(r))):y.push(p[v]);n[l].push(y)}}else if("matrix"===l){var g=(s=o[l]||Dx,(BS(u=i[l]||Dx)?DS:FS)(s,u))(r);n[l]=g}else Lx(l)&&Rx(i[l])?n[l]=i[l]:(0,ng.isFunction)(i[l])||(a=WS(o[l],i[l]),n[l]=a(r));t.attr(n)}}(t,e,n);return!1}var Fx=function(){function t(t){this.animators=[],this.current=0,this.timer=null,this.canvas=t}return t.prototype.initTimer=function(){var t,e,r,n=this;this.timer=Qw.HT(function(o){if(n.current=o,n.animators.length>0){for(var i=n.animators.length-1;i>=0;i--)if((t=n.animators[i]).destroyed)n.removeAnimator(i);else{if(!t.isAnimatePaused())for(var a=(e=t.get("animations")).length-1;a>=0;a--)r=e[a],Bx(t,r,o)&&(e.splice(a,1),!1,r.callback&&r.callback());0===e.length&&n.removeAnimator(i)}n.canvas.get("autoDraw")||n.canvas.draw()}})},t.prototype.addAnimator=function(t){this.animators.push(t)},t.prototype.removeAnimator=function(t){this.animators.splice(t,1)},t.prototype.isAnimating=function(){return!!this.animators.length},t.prototype.stop=function(){this.timer&&this.timer.stop()},t.prototype.stopAllAnimations=function(t){void 0===t&&(t=!0),this.animators.forEach(function(e){e.stopAnimate(t)}),this.animators=[],this.canvas.draw()},t.prototype.getTime=function(){return this.current},t}(),Gx=["mousedown","mouseup","dblclick","mouseout","mouseover","mousemove","mouseleave","mouseenter","touchstart","touchmove","touchend","dragenter","dragover","dragleave","drop","contextmenu","mousewheel"];function Ux(t,e,r){r.name=e,r.target=t,r.currentTarget=t,r.delegateTarget=t,t.emit(e,r)}function zx(t,e,r){if(r.bubbles){var n=void 0,o=!1;if("mouseenter"===e?(n=r.fromShape,o=!0):"mouseleave"===e&&(o=!0,n=r.toShape),t.isCanvas()&&o)return;if(n&&Ow(t,n))return void(r.bubbles=!1);r.name=e,r.currentTarget=t,r.delegateTarget=t,t.emit(e,r)}}var Vx=function(){function t(t){var e=this;this.draggingShape=null,this.dragging=!1,this.currentShape=null,this.mousedownShape=null,this.mousedownPoint=null,this._eventCallback=function(t){var r=t.type;e._triggerEvent(r,t)},this._onDocumentMove=function(t){if(e.canvas.get("el")!==t.target&&(e.dragging||e.currentShape)){var r=e._getPointInfo(t);e.dragging&&e._emitEvent("drag",t,r,e.draggingShape)}},this._onDocumentMouseUp=function(t){if(e.canvas.get("el")!==t.target&&e.dragging){var r=e._getPointInfo(t);e.draggingShape&&e._emitEvent("drop",t,r,null),e._emitEvent("dragend",t,r,e.draggingShape),e._afterDrag(e.draggingShape,r,t)}},this.canvas=t.canvas}return t.prototype.init=function(){this._bindEvents()},t.prototype._bindEvents=function(){var t=this,e=this.canvas.get("el");(0,ng.each)(Gx,function(r){e.addEventListener(r,t._eventCallback)}),document&&(document.addEventListener("mousemove",this._onDocumentMove),document.addEventListener("mouseup",this._onDocumentMouseUp))},t.prototype._clearEvents=function(){var t=this,e=this.canvas.get("el");(0,ng.each)(Gx,function(r){e.removeEventListener(r,t._eventCallback)}),document&&(document.removeEventListener("mousemove",this._onDocumentMove),document.removeEventListener("mouseup",this._onDocumentMouseUp))},t.prototype._getEventObj=function(t,e,r,n,o,i){var a=new xw(t,e);return a.fromShape=o,a.toShape=i,a.x=r.x,a.y=r.y,a.clientX=r.clientX,a.clientY=r.clientY,a.propagationPath.push(n),a},t.prototype._getShape=function(t,e){return this.canvas.getShape(t.x,t.y,e)},t.prototype._getPointInfo=function(t){var e=this.canvas,r=e.getClientByEvent(t),n=e.getPointByEvent(t);return{x:n.x,y:n.y,clientX:r.x,clientY:r.y}},t.prototype._triggerEvent=function(t,e){var r=this._getPointInfo(e),n=this._getShape(r,e),o=this["_on"+t],i=!1;if(o)o.call(this,r,n,e);else{var a=this.currentShape;"mouseenter"===t||"dragenter"===t||"mouseover"===t?(this._emitEvent(t,e,r,null,null,n),n&&this._emitEvent(t,e,r,n,null,n),"mouseenter"===t&&this.draggingShape&&this._emitEvent("dragenter",e,r,null)):"mouseleave"===t||"dragleave"===t||"mouseout"===t?(i=!0,a&&this._emitEvent(t,e,r,a,a,null),this._emitEvent(t,e,r,null,a,null),"mouseleave"===t&&this.draggingShape&&this._emitEvent("dragleave",e,r,null)):this._emitEvent(t,e,r,n,null,null)}if(i||(this.currentShape=n),n&&!n.get("destroyed")){var s=this.canvas;s.get("el").style.cursor=n.attr("cursor")||s.get("cursor")}},t.prototype._onmousedown=function(t,e,r){0===r.button&&(this.mousedownShape=e,this.mousedownPoint=t,this.mousedownTimeStamp=r.timeStamp),this._emitEvent("mousedown",r,t,e,null,null)},t.prototype._emitMouseoverEvents=function(t,e,r,n){var o=this.canvas.get("el");r!==n&&(r&&(this._emitEvent("mouseout",t,e,r,r,n),this._emitEvent("mouseleave",t,e,r,r,n),n&&!n.get("destroyed")||(o.style.cursor=this.canvas.get("cursor"))),n&&(this._emitEvent("mouseover",t,e,n,r,n),this._emitEvent("mouseenter",t,e,n,r,n)))},t.prototype._emitDragoverEvents=function(t,e,r,n,o){n?(n!==r&&(r&&this._emitEvent("dragleave",t,e,r,r,n),this._emitEvent("dragenter",t,e,n,r,n)),o||this._emitEvent("dragover",t,e,n)):r&&this._emitEvent("dragleave",t,e,r,r,n),o&&this._emitEvent("dragover",t,e,n)},t.prototype._afterDrag=function(t,e,r){t&&(t.set("capture",!0),this.draggingShape=null),this.dragging=!1;var n=this._getShape(e,r);n!==t&&this._emitMouseoverEvents(r,e,t,n),this.currentShape=n},t.prototype._onmouseup=function(t,e,r){if(0===r.button){var n=this.draggingShape;this.dragging?(n&&this._emitEvent("drop",r,t,e),this._emitEvent("dragend",r,t,n),this._afterDrag(n,t,r)):(this._emitEvent("mouseup",r,t,e),e===this.mousedownShape&&this._emitEvent("click",r,t,e),this.mousedownShape=null,this.mousedownPoint=null)}},t.prototype._ondragover=function(t,e,r){r.preventDefault();var n=this.currentShape;this._emitDragoverEvents(r,t,n,e,!0)},t.prototype._onmousemove=function(t,e,r){var n=this.canvas,o=this.currentShape,i=this.draggingShape;if(this.dragging)i&&this._emitDragoverEvents(r,t,o,e,!1),this._emitEvent("drag",r,t,i);else{var a=this.mousedownPoint;if(a){var s=this.mousedownShape,u=r.timeStamp-this.mousedownTimeStamp,l=a.clientX-t.clientX,c=a.clientY-t.clientY;u>120||l*l+c*c>40?s&&s.get("draggable")?((i=this.mousedownShape).set("capture",!1),this.draggingShape=i,this.dragging=!0,this._emitEvent("dragstart",r,t,i),this.mousedownShape=null,this.mousedownPoint=null):!s&&n.get("draggable")?(this.dragging=!0,this._emitEvent("dragstart",r,t,null),this.mousedownShape=null,this.mousedownPoint=null):(this._emitMouseoverEvents(r,t,o,e),this._emitEvent("mousemove",r,t,e)):(this._emitMouseoverEvents(r,t,o,e),this._emitEvent("mousemove",r,t,e))}else this._emitMouseoverEvents(r,t,o,e),this._emitEvent("mousemove",r,t,e)}},t.prototype._emitEvent=function(t,e,r,n,o,i){var a=this._getEventObj(t,e,r,n,o,i);if(n){a.shape=n,Ux(n,t,a);for(var s=n.getParent();s;)s.emitDelegation(t,a),a.propagationStopped||zx(s,t,a),a.propagationPath.push(s),s=s.getParent()}else{Ux(this.canvas,t,a)}},t.prototype.destroy=function(){this._clearEvents(),this.canvas=null,this.currentShape=null,this.draggingShape=null,this.mousedownPoint=null,this.mousedownShape=null,this.mousedownTimeStamp=null},t}(),Hx=Bw(),Wx=Hx&&"firefox"===Hx.name,qx=function(t){function e(e){var r=t.call(this,e)||this;return r.initContainer(),r.initDom(),r.initEvents(),r.initTimeline(),r}return(0,rg.__extends)(e,t),e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return e.cursor="default",e.supportCSSTransform=!1,e},e.prototype.initContainer=function(){var t=this.get("container");(0,ng.isString)(t)&&(t=document.getElementById(t),this.set("container",t))},e.prototype.initDom=function(){var t=this.createDom();this.set("el",t),this.get("container").appendChild(t),this.setDOMSize(this.get("width"),this.get("height"))},e.prototype.initEvents=function(){var t=new Vx({canvas:this});t.init(),this.set("eventController",t)},e.prototype.initTimeline=function(){var t=new Fx(this);this.set("timeline",t)},e.prototype.setDOMSize=function(t,e){var r=this.get("el");Ew&&(r.style.width=t+"px",r.style.height=e+"px")},e.prototype.changeSize=function(t,e){this.setDOMSize(t,e),this.set("width",t),this.set("height",e),this.onCanvasChange("changeSize")},e.prototype.getRenderer=function(){return this.get("renderer")},e.prototype.getCursor=function(){return this.get("cursor")},e.prototype.setCursor=function(t){this.set("cursor",t);var e=this.get("el");Ew&&e&&(e.style.cursor=t)},e.prototype.getPointByEvent=function(t){if(this.get("supportCSSTransform")){if(Wx&&!(0,ng.isNil)(t.layerX)&&t.layerX!==t.offsetX)return{x:t.layerX,y:t.layerY};if(!(0,ng.isNil)(t.offsetX))return{x:t.offsetX,y:t.offsetY}}var e=this.getClientByEvent(t),r=e.x,n=e.y;return this.getPointByClient(r,n)},e.prototype.getClientByEvent=function(t){var e=t;return t.touches&&(e="touchend"===t.type?t.changedTouches[0]:t.touches[0]),{x:e.clientX,y:e.clientY}},e.prototype.getPointByClient=function(t,e){var r=this.get("el").getBoundingClientRect();return{x:t-r.left,y:e-r.top}},e.prototype.getClientByPoint=function(t,e){var r=this.get("el").getBoundingClientRect();return{x:t+r.left,y:e+r.top}},e.prototype.draw=function(){},e.prototype.removeDom=function(){var t=this.get("el");t.parentNode.removeChild(t)},e.prototype.clearEvents=function(){this.get("eventController").destroy()},e.prototype.isCanvas=function(){return!0},e.prototype.getParent=function(){return null},e.prototype.destroy=function(){var e=this.get("timeline");this.get("destroyed")||(this.clear(),e&&e.stop(),this.clearEvents(),this.removeDom(),t.prototype.destroy.call(this))},e}(Kw),Yx=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,rg.__extends)(e,t),e.prototype.isGroup=function(){return!0},e.prototype.isEntityGroup=function(){return!1},e.prototype.clone=function(){for(var e=t.prototype.clone.call(this),r=this.getChildren(),n=0;n<r.length;n++){var o=r[n];e.add(o.clone())}return e},e}(Kw),Xx=function(t){function e(e){return t.call(this,e)||this}return(0,rg.__extends)(e,t),e.prototype._isInBBox=function(t,e){var r=this.getBBox();return r.minX<=t&&r.maxX>=t&&r.minY<=e&&r.maxY>=e},e.prototype.afterAttrsChange=function(e){t.prototype.afterAttrsChange.call(this,e),this.clearCacheBBox()},e.prototype.getBBox=function(){var t=this.cfg.bbox;return t||(t=this.calculateBBox(),this.set("bbox",t)),t},e.prototype.getCanvasBBox=function(){var t=this.cfg.canvasBBox;return t||(t=this.calculateCanvasBBox(),this.set("canvasBBox",t)),t},e.prototype.applyMatrix=function(e){t.prototype.applyMatrix.call(this,e),this.set("canvasBBox",null)},e.prototype.calculateCanvasBBox=function(){var t=this.getBBox(),e=this.getTotalMatrix(),r=t.minX,n=t.minY,o=t.maxX,i=t.maxY;if(e){var a=zw(e,[t.minX,t.minY]),s=zw(e,[t.maxX,t.minY]),u=zw(e,[t.minX,t.maxY]),l=zw(e,[t.maxX,t.maxY]);r=Math.min(a[0],s[0],u[0],l[0]),o=Math.max(a[0],s[0],u[0],l[0]),n=Math.min(a[1],s[1],u[1],l[1]),i=Math.max(a[1],s[1],u[1],l[1])}var c=this.attrs;if(c.shadowColor){var f=c.shadowBlur,h=void 0===f?0:f,p=c.shadowOffsetX,d=void 0===p?0:p,y=c.shadowOffsetY,v=void 0===y?0:y,g=r-h+d,m=o+h+d,b=n-h+v,w=i+h+v;r=Math.min(r,g),o=Math.max(o,m),n=Math.min(n,b),i=Math.max(i,w)}return{x:r,y:n,minX:r,minY:n,maxX:o,maxY:i,width:o-r,height:i-n}},e.prototype.clearCacheBBox=function(){this.set("bbox",null),this.set("canvasBBox",null)},e.prototype.isClipShape=function(){return this.get("isClipShape")},e.prototype.isInShape=function(t,e){return!1},e.prototype.isOnlyHitBox=function(){return!1},e.prototype.isHit=function(t,e){var r=this.get("startArrowShape"),n=this.get("endArrowShape"),o=[t,e,1],i=(o=this.invertFromMatrix(o))[0],a=o[1],s=this._isInBBox(i,a);if(this.isOnlyHitBox())return s;if(s&&!this.isClipped(i,a)){if(this.isInShape(i,a))return!0;if(r&&r.isHit(i,a))return!0;if(n&&n.isHit(i,a))return!0}return!1},e}(Yw),Jx=new Map;function Kx(t,e){Jx.set(t,e)}function Qx(t){return Jx.get(t)}function Zx(t){var e=t.attr();return{x:e.x,y:e.y,width:e.width,height:e.height}}function $x(t){var e=t.attr(),r=e.x,n=e.y,o=e.r;return{x:r-o,y:n-o,width:2*o,height:2*o}}function t_(t,e,r,n){var o=t-r,i=e-n;return Math.sqrt(o*o+i*i)}function e_(t,e){return Math.abs(t-e)<.001}function r_(t,e){var r=(0,ng.min)(t),n=(0,ng.min)(e);return{x:r,y:n,width:(0,ng.max)(t)-r,height:(0,ng.max)(e)-n}}function n_(t){return(t+2*Math.PI)%(2*Math.PI)}var o_={box:function(t,e,r,n){return r_([t,r],[e,n])},length:function(t,e,r,n){return t_(t,e,r,n)},pointAt:function(t,e,r,n,o){return{x:(1-o)*t+o*r,y:(1-o)*e+o*n}},pointDistance:function(t,e,r,n,o,i){var a=(r-t)*(o-t)+(n-e)*(i-e);return a<0?t_(t,e,o,i):a>(r-t)*(r-t)+(n-e)*(n-e)?t_(r,n,o,i):this.pointToLine(t,e,r,n,o,i)},pointToLine:function(t,e,r,n,o,i){var a=[r-t,n-e];if(Nm.exactEquals(a,[0,0]))return Math.sqrt((o-t)*(o-t)+(i-e)*(i-e));var s=[-a[1],a[0]];Nm.normalize(s,s);var u=[o-t,i-e];return Math.abs(Nm.dot(u,s))},tangentAngle:function(t,e,r,n){return Math.atan2(n-e,r-t)}},i_=1e-4;function a_(t,e,r,n,o,i){var a,s=1/0,u=[r,n],l=20;i&&i>200&&(l=i/10);for(var c=1/l,f=c/10,h=0;h<=l;h++){var p=h*c,d=[o.apply(null,t.concat([p])),o.apply(null,e.concat([p]))];(m=t_(u[0],u[1],d[0],d[1]))<s&&(a=p,s=m)}if(0===a)return{x:t[0],y:e[0]};if(1===a){var y=t.length;return{x:t[y-1],y:e[y-1]}}s=1/0;for(h=0;h<32&&!(f<i_);h++){var v=a-f,g=a+f,m=(d=[o.apply(null,t.concat([v])),o.apply(null,e.concat([v]))],t_(u[0],u[1],d[0],d[1]));if(v>=0&&m<s)a=v,s=m;else{var b=[o.apply(null,t.concat([g])),o.apply(null,e.concat([g]))],w=t_(u[0],u[1],b[0],b[1]);g<=1&&w<s?(a=g,s=w):f*=.5}}return{x:o.apply(null,t.concat([a])),y:o.apply(null,e.concat([a]))}}function s_(t,e,r,n){var o=1-n;return o*o*t+2*n*o*e+n*n*r}function u_(t,e,r){var n=t+r-2*e;if(e_(n,0))return[.5];var o=(t-e)/n;return o<=1&&o>=0?[o]:[]}function l_(t,e,r,n){return 2*(1-n)*(e-t)+2*n*(r-e)}function c_(t,e,r,n,o,i,a){var s=s_(t,r,o,a),u=s_(e,n,i,a),l=o_.pointAt(t,e,r,n,a),c=o_.pointAt(r,n,o,i,a);return[[t,e,l.x,l.y,s,u],[s,u,c.x,c.y,o,i]]}var f_={box:function(t,e,r,n,o,i){var a=u_(t,r,o)[0],s=u_(e,n,i)[0],u=[t,o],l=[e,i];return void 0!==a&&u.push(s_(t,r,o,a)),void 0!==s&&l.push(s_(e,n,i,s)),r_(u,l)},length:function(t,e,r,n,o,i){return function t(e,r,n,o,i,a,s){if(0===s)return(t_(e,r,n,o)+t_(n,o,i,a)+t_(e,r,i,a))/2;var u=c_(e,r,n,o,i,a,.5),l=u[0],c=u[1];return l.push(s-1),c.push(s-1),t.apply(null,l)+t.apply(null,c)}(t,e,r,n,o,i,3)},nearestPoint:function(t,e,r,n,o,i,a,s){return a_([t,r,o],[e,n,i],a,s,s_)},pointDistance:function(t,e,r,n,o,i,a,s){var u=this.nearestPoint(t,e,r,n,o,i,a,s);return t_(u.x,u.y,a,s)},interpolationAt:s_,pointAt:function(t,e,r,n,o,i,a){return{x:s_(t,r,o,a),y:s_(e,n,i,a)}},divide:function(t,e,r,n,o,i,a){return c_(t,e,r,n,o,i,a)},tangentAngle:function(t,e,r,n,o,i,a){var s=l_(t,r,o,a),u=l_(e,n,i,a);return n_(Math.atan2(u,s))}};function h_(t,e,r,n,o){var i=1-o;return i*i*i*t+3*e*o*i*i+3*r*o*o*i+n*o*o*o}function p_(t,e,r,n,o){var i=1-o;return 3*(i*i*(e-t)+2*i*o*(r-e)+o*o*(n-r))}function d_(t,e,r,n){var o,i,a,s=-3*t+9*e-9*r+3*n,u=6*t-12*e+6*r,l=3*e-3*t,c=[];if(e_(s,0))e_(u,0)||(o=-l/u)>=0&&o<=1&&c.push(o);else{var f=u*u-4*s*l;e_(f,0)?c.push(-u/(2*s)):f>0&&(i=(-u-(a=Math.sqrt(f)))/(2*s),(o=(-u+a)/(2*s))>=0&&o<=1&&c.push(o),i>=0&&i<=1&&c.push(i))}return c}function y_(t,e,r,n,o,i,a,s,u){var l=h_(t,r,o,a,u),c=h_(e,n,i,s,u),f=o_.pointAt(t,e,r,n,u),h=o_.pointAt(r,n,o,i,u),p=o_.pointAt(o,i,a,s,u),d=o_.pointAt(f.x,f.y,h.x,h.y,u),y=o_.pointAt(h.x,h.y,p.x,p.y,u);return[[t,e,f.x,f.y,d.x,d.y,l,c],[l,c,y.x,y.y,p.x,p.y,a,s]]}function v_(t,e,r,n,o,i,a,s,u){if(0===u)return function(t,e){for(var r=0,n=t.length,o=0;o<n;o++)r+=t_(t[o],e[o],t[(o+1)%n],e[(o+1)%n]);return r/2}([t,r,o,a],[e,n,i,s]);var l=y_(t,e,r,n,o,i,a,s,.5),c=l[0],f=l[1];return c.push(u-1),f.push(u-1),v_.apply(null,c)+v_.apply(null,f)}var g_={extrema:d_,box:function(t,e,r,n,o,i,a,s){for(var u=[t,a],l=[e,s],c=d_(t,r,o,a),f=d_(e,n,i,s),h=0;h<c.length;h++)u.push(h_(t,r,o,a,c[h]));for(h=0;h<f.length;h++)l.push(h_(e,n,i,s,f[h]));return r_(u,l)},length:function(t,e,r,n,o,i,a,s){return v_(t,e,r,n,o,i,a,s,3)},nearestPoint:function(t,e,r,n,o,i,a,s,u,l,c){return a_([t,r,o,a],[e,n,i,s],u,l,h_,c)},pointDistance:function(t,e,r,n,o,i,a,s,u,l,c){var f=this.nearestPoint(t,e,r,n,o,i,a,s,u,l,c);return t_(f.x,f.y,u,l)},interpolationAt:h_,pointAt:function(t,e,r,n,o,i,a,s,u){return{x:h_(t,r,o,a,u),y:h_(e,n,i,s,u)}},divide:function(t,e,r,n,o,i,a,s,u){return y_(t,e,r,n,o,i,a,s,u)},tangentAngle:function(t,e,r,n,o,i,a,s,u){var l=p_(t,r,o,a,u),c=p_(e,n,i,s,u);return n_(Math.atan2(c,l))}};function m_(t,e){var r=Math.abs(t);return e>0?r:-1*r}var b_=function(t,e,r,n,o,i){var a=r,s=n;if(0===a||0===s)return{x:t,y:e};for(var u,l,c=o-t,f=i-e,h=Math.abs(c),p=Math.abs(f),d=a*a,y=s*s,v=Math.PI/4,g=0;g<4;g++){u=a*Math.cos(v),l=s*Math.sin(v);var m=(d-y)*Math.pow(Math.cos(v),3)/a,b=(y-d)*Math.pow(Math.sin(v),3)/s,w=u-m,S=l-b,x=h-m,_=p-b,E=Math.hypot(S,w),O=Math.hypot(_,x);v+=E*Math.asin((w*_-S*x)/(E*O))/Math.sqrt(d+y-u*u-l*l),v=Math.min(Math.PI/2,Math.max(0,v))}return{x:t+m_(u,c),y:e+m_(l,f)}};function w_(t,e,r,n,o,i){return r*Math.cos(o)*Math.cos(i)-n*Math.sin(o)*Math.sin(i)+t}function S_(t,e,r,n,o,i){return r*Math.sin(o)*Math.cos(i)+n*Math.cos(o)*Math.sin(i)+e}function x_(t,e,r){return{x:t*Math.cos(r),y:e*Math.sin(r)}}function __(t,e,r){var n=Math.cos(r),o=Math.sin(r);return[t*n-e*o,t*o+e*n]}var E_={box:function(t,e,r,n,o,i,a){for(var s=function(t,e,r){return Math.atan(-e/t*Math.tan(r))}(r,n,o),u=1/0,l=-1/0,c=[i,a],f=2*-Math.PI;f<=2*Math.PI;f+=Math.PI){var h=s+f;i<a?i<h&&h<a&&c.push(h):a<h&&h<i&&c.push(h)}for(f=0;f<c.length;f++){var p=w_(t,0,r,n,o,c[f]);p<u&&(u=p),p>l&&(l=p)}var d=function(t,e,r){return Math.atan(e/(t*Math.tan(r)))}(r,n,o),y=1/0,v=-1/0,g=[i,a];for(f=2*-Math.PI;f<=2*Math.PI;f+=Math.PI){var m=d+f;i<a?i<m&&m<a&&g.push(m):a<m&&m<i&&g.push(m)}for(f=0;f<g.length;f++){var b=S_(0,e,r,n,o,g[f]);b<y&&(y=b),b>v&&(v=b)}return{x:u,y:y,width:l-u,height:v-y}},length:function(t,e,r,n,o,i,a){},nearestPoint:function(t,e,r,n,o,i,a,s,u){var l=__(s-t,u-e,-o),c=l[0],f=l[1],h=b_(0,0,r,n,c,f),p=function(t,e,r,n){return(Math.atan2(n*t,r*e)+2*Math.PI)%(2*Math.PI)}(r,n,h.x,h.y);p<i?h=x_(r,n,i):p>a&&(h=x_(r,n,a));var d=__(h.x,h.y,o);return{x:d[0]+t,y:d[1]+e}},pointDistance:function(t,e,r,n,o,i,a,s,u){var l=this.nearestPoint(t,e,r,n,s,u);return t_(l.x,l.y,s,u)},pointAt:function(t,e,r,n,o,i,a,s){var u=(a-i)*s+i;return{x:w_(t,0,r,n,o,u),y:S_(0,e,r,n,o,u)}},tangentAngle:function(t,e,r,n,o,i,a,s){var u=(a-i)*s+i,l=function(t,e,r,n,o,i,a,s){return-1*r*Math.cos(o)*Math.sin(s)-n*Math.sin(o)*Math.cos(s)}(0,0,r,n,o,0,0,u),c=function(t,e,r,n,o,i,a,s){return-1*r*Math.sin(o)*Math.sin(s)+n*Math.cos(o)*Math.cos(s)}(0,0,r,n,o,0,0,u);return n_(Math.atan2(c,l))}};function O_(t){if(t.length<2)return 0;for(var e=0,r=0;r<t.length-1;r++){var n=t[r],o=t[r+1];e+=t_(n[0],n[1],o[0],o[1])}return e}var P_=function(t){return O_(t)};function k_(t,e){return t&&e?{minX:Math.min(t.minX,e.minX),minY:Math.min(t.minY,e.minY),maxX:Math.max(t.maxX,e.maxX),maxY:Math.max(t.maxY,e.maxY)}:t||e}function C_(t,e){var r=t.get("startArrowShape"),n=t.get("endArrowShape");return r&&(e=k_(e,r.getCanvasBBox())),n&&(e=k_(e,n.getCanvasBBox())),e}var T_=null;function A_(){if(!T_){var t=document.createElement("canvas");t.width=1,t.height=1,T_=t.getContext("2d")}return T_}function M_(t,e,r){var n=1;return(0,ng.isString)(t)&&(n=t.split("\n").length),n>1?e*n+function(t,e){return e?e-t:.14*t}(e,r)*(n-1):e}function j_(t){var e=t.fontSize,r=t.fontFamily,n=t.fontWeight;return[t.fontStyle,t.fontVariant,n,e+"px",r].join(" ").trim()}var I_=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/gi,N_=/[^\s\,]+/gi;var L_=function(t){var e=t||[];return(0,ng.isArray)(e)?e:(0,ng.isString)(e)?(e=e.match(I_),(0,ng.each)(e,function(t,r){if((t=t.match(N_))[0].length>1){var n=t[0].charAt(0);t.splice(1,0,t[0].substr(1)),t[0]=n}(0,ng.each)(t,function(e,r){isNaN(e)||(t[r]=+e)}),e[r]=t}),e):void 0};var R_=function(t,e,r){void 0===e&&(e=!1),void 0===r&&(r=[[0,0],[1,1]]);for(var n=!!e,o=[],i=0,a=t.length;i<a;i+=2)o.push([t[i],t[i+1]]);var s,u,l,c=function(t,e,r,n){var o,i,a,s,u,l,c,f=[],h=!!n;if(h){a=n[0],s=n[1];for(var p=0,d=t.length;p<d;p+=1){var y=t[p];a=Nm.min([0,0],a,y),s=Nm.max([0,0],s,y)}}p=0;for(var v=t.length;p<v;p+=1)if(y=t[p],0!==p||r)if(p!==v-1||r){o=t[[p?p-1:v-1,p-1][r?0:1]],i=t[r?(p+1)%v:p+1];var g=[0,0];g=Nm.sub(g,i,o),g=Nm.scale(g,g,e);var m=Nm.distance(y,o),b=Nm.distance(y,i),w=m+b;0!==w&&(m/=w,b/=w);var S=Nm.scale([0,0],g,-m),x=Nm.scale([0,0],g,b);l=Nm.add([0,0],y,S),u=Nm.add([0,0],y,x),u=Nm.min([0,0],u,Nm.max([0,0],i,y)),u=Nm.max([0,0],u,Nm.min([0,0],i,y)),S=Nm.sub([0,0],u,y),S=Nm.scale([0,0],S,-m/b),l=Nm.add([0,0],y,S),l=Nm.min([0,0],l,Nm.max([0,0],o,y)),l=Nm.max([0,0],l,Nm.min([0,0],o,y)),x=Nm.sub([0,0],y,l),x=Nm.scale([0,0],x,b/m),u=Nm.add([0,0],y,x),h&&(l=Nm.max([0,0],l,a),l=Nm.min([0,0],l,s),u=Nm.max([0,0],u,a),u=Nm.min([0,0],u,s)),f.push(c),f.push(l),c=u}else l=y,f.push(c),f.push(l);else c=y;return r&&f.push(f.shift()),f}(o,.4,n,r),f=o.length,h=[];for(i=0;i<f-1;i+=1)s=c[2*i],u=c[2*i+1],l=o[i+1],h.push(["C",s[0],s[1],u[0],u[1],l[0],l[1]]);return n&&(s=c[f],u=c[f+1],l=o[0],h.push(["C",s[0],s[1],u[0],u[1],l[0],l[1]])),h};var D_="\t\n\v\f\r Â áá ââââââââââââ¯âã\u2028\u2029",B_=new RegExp("([a-z])["+D_+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+D_+"]*,?["+D_+"]*)+)","ig"),F_=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+D_+"]*,?["+D_+"]*","ig");function G_(t){if(!t)return null;if((0,ng.isArray)(t))return t;var e={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},r=[];return String(t).replace(B_,function(t,n,o){var i=[],a=n.toLowerCase();if(o.replace(F_,function(t,e){e&&i.push(+e)}),"m"===a&&i.length>2&&(r.push([n].concat(i.splice(0,2))),a="l",n="m"===n?"l":"L"),"o"===a&&1===i.length&&r.push([n,i[0]]),"r"===a)r.push([n].concat(i));else for(;i.length>=e[a]&&(r.push([n].concat(i.splice(0,e[a]))),e[a]););return""}),r}var U_=/[a-z]/;function z_(t,e){return[e[0]+(e[0]-t[0]),e[1]+(e[1]-t[1])]}function V_(t){var e=G_(t);if(!e||!e.length)return[["M",0,0]];for(var r=!1,n=0;n<e.length;n++){var o=e[n][0];if(U_.test(o)||["V","H","T","S"].indexOf(o)>=0){r=!0;break}}if(!r)return e;var i=[],a=0,s=0,u=0,l=0,c=0,f=e[0];"M"!==f[0]&&"m"!==f[0]||(u=a=+f[1],l=s=+f[2],c++,i[0]=["M",a,s]);n=c;for(var h=e.length;n<h;n++){var p=e[n],d=i[n-1],y=[],v=(o=p[0]).toUpperCase();if(o!==v)switch(y[0]=v,v){case"A":y[1]=p[1],y[2]=p[2],y[3]=p[3],y[4]=p[4],y[5]=p[5],y[6]=+p[6]+a,y[7]=+p[7]+s;break;case"V":y[1]=+p[1]+s;break;case"H":y[1]=+p[1]+a;break;case"M":u=+p[1]+a,l=+p[2]+s,y[1]=u,y[2]=l;break;default:for(var g=1,m=p.length;g<m;g++)y[g]=+p[g]+(g%2?a:s)}else y=e[n];switch(v){case"Z":a=+u,s=+l;break;case"H":y=["L",a=y[1],s];break;case"V":y=["L",a,s=y[1]];break;case"T":a=y[1],s=y[2];var b=z_([d[1],d[2]],[d[3],d[4]]);y=["Q",b[0],b[1],a,s];break;case"S":a=y[y.length-2],s=y[y.length-1];var w=d.length,S=z_([d[w-4],d[w-3]],[d[w-2],d[w-1]]);y=["C",S[0],S[1],y[1],y[2],a,s];break;case"M":u=y[y.length-2],l=y[y.length-1];break;default:a=y[y.length-2],s=y[y.length-1]}i.push(y)}return i}Math.PI;function H_(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function W_(t,e){return H_(t)*H_(e)?(t[0]*e[0]+t[1]*e[1])/(H_(t)*H_(e)):1}function q_(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(W_(t,e))}function Y_(t,e){return t[0]===e[0]&&t[1]===e[1]}function X_(t,e){var r=e[1],n=e[2],o=(0,ng.mod)((0,ng.toRadian)(e[3]),2*Math.PI),i=e[4],a=e[5],s=t[0],u=t[1],l=e[6],c=e[7],f=Math.cos(o)*(s-l)/2+Math.sin(o)*(u-c)/2,h=-1*Math.sin(o)*(s-l)/2+Math.cos(o)*(u-c)/2,p=f*f/(r*r)+h*h/(n*n);p>1&&(r*=Math.sqrt(p),n*=Math.sqrt(p));var d=r*r*(h*h)+n*n*(f*f),y=d?Math.sqrt((r*r*(n*n)-d)/d):1;i===a&&(y*=-1),isNaN(y)&&(y=0);var v=n?y*r*h/n:0,g=r?y*-n*f/r:0,m=(s+l)/2+Math.cos(o)*v-Math.sin(o)*g,b=(u+c)/2+Math.sin(o)*v+Math.cos(o)*g,w=[(f-v)/r,(h-g)/n],S=[(-1*f-v)/r,(-1*h-g)/n],x=q_([1,0],w),_=q_(w,S);return W_(w,S)<=-1&&(_=Math.PI),W_(w,S)>=1&&(_=0),0===a&&_>0&&(_-=2*Math.PI),1===a&&_<0&&(_+=2*Math.PI),{cx:m,cy:b,rx:Y_(t,[l,c])?0:r,ry:Y_(t,[l,c])?0:n,startAngle:x,endAngle:x+_,xRotation:o,arcFlag:i,sweepFlag:a}}function J_(t,e){return[e[0]+(e[0]-t[0]),e[1]+(e[1]-t[1])]}function K_(t){for(var e=[],r=null,n=null,o=null,i=0,a=(t=L_(t)).length,s=0;s<a;s++){var u=t[s];n=t[s+1];var l=u[0],c={command:l,prePoint:r,params:u,startTangent:null,endTangent:null};switch(l){case"M":o=[u[1],u[2]],i=s;break;case"A":var f=X_(r,u);c.arcParams=f}if("Z"===l)r=o,n=t[i+1];else{var h=u.length;r=[u[h-2],u[h-1]]}n&&"Z"===n[0]&&(n=t[i],e[i]&&(e[i].prePoint=r)),c.currentPoint=r,e[i]&&Y_(r,e[i].currentPoint)&&(e[i].prePoint=c.prePoint);var p=n?[n[n.length-2],n[n.length-1]]:null;c.nextPoint=p;var d=c.prePoint;if(["L","H","V"].includes(l))c.startTangent=[d[0]-r[0],d[1]-r[1]],c.endTangent=[r[0]-d[0],r[1]-d[1]];else if("Q"===l){var y=[u[1],u[2]];c.startTangent=[d[0]-y[0],d[1]-y[1]],c.endTangent=[r[0]-y[0],r[1]-y[1]]}else if("T"===l){y=J_((m=e[s-1]).currentPoint,d);"Q"===m.command?(c.command="Q",c.startTangent=[d[0]-y[0],d[1]-y[1]],c.endTangent=[r[0]-y[0],r[1]-y[1]]):(c.command="TL",c.startTangent=[d[0]-r[0],d[1]-r[1]],c.endTangent=[r[0]-d[0],r[1]-d[1]])}else if("C"===l){var v=[u[1],u[2]],g=[u[3],u[4]];c.startTangent=[d[0]-v[0],d[1]-v[1]],c.endTangent=[r[0]-g[0],r[1]-g[1]],0===c.startTangent[0]&&0===c.startTangent[1]&&(c.startTangent=[v[0]-g[0],v[1]-g[1]]),0===c.endTangent[0]&&0===c.endTangent[1]&&(c.endTangent=[g[0]-v[0],g[1]-v[1]])}else if("S"===l){var m;v=J_((m=e[s-1]).currentPoint,d),g=[u[1],u[2]];"C"===m.command?(c.command="C",c.startTangent=[d[0]-v[0],d[1]-v[1]],c.endTangent=[r[0]-g[0],r[1]-g[1]]):(c.command="SQ",c.startTangent=[d[0]-g[0],d[1]-g[1]],c.endTangent=[r[0]-g[0],r[1]-g[1]])}else if("A"===l){var b=.001,w=c.arcParams||{},S=w.cx,x=void 0===S?0:S,_=w.cy,E=void 0===_?0:_,O=w.rx,P=void 0===O?0:O,k=w.ry,C=void 0===k?0:k,T=w.sweepFlag,A=void 0===T?0:T,M=w.startAngle,j=void 0===M?0:M,I=w.endAngle,N=void 0===I?0:I;0===A&&(b*=-1);var L=P*Math.cos(j-b)+x,R=C*Math.sin(j-b)+E;c.startTangent=[L-o[0],R-o[1]];var D=P*Math.cos(j+N+b)+x,B=C*Math.sin(j+N-b)+E;c.endTangent=[d[0]-D,d[1]-B]}e.push(c)}return e}function Q_(t,e){var r=t.prePoint,n=t.currentPoint,o=t.nextPoint,i=Math.pow(n[0]-r[0],2)+Math.pow(n[1]-r[1],2),a=Math.pow(n[0]-o[0],2)+Math.pow(n[1]-o[1],2),s=Math.pow(r[0]-o[0],2)+Math.pow(r[1]-o[1],2),u=Math.acos((i+a-s)/(2*Math.sqrt(i)*Math.sqrt(a)));if(!u||0===Math.sin(u)||(0,ng.isNumberEqual)(u,0))return{xExtra:0,yExtra:0};var l=Math.abs(Math.atan2(o[1]-n[1],o[0]-n[0])),c=Math.abs(Math.atan2(o[0]-n[0],o[1]-n[1]));return l=l>Math.PI/2?Math.PI-l:l,c=c>Math.PI/2?Math.PI-c:c,{xExtra:Math.cos(u/2-l)*(e/2*(1/Math.sin(u/2)))-e/2||0,yExtra:Math.cos(c-u/2)*(e/2*(1/Math.sin(u/2)))-e/2||0}}Kx("rect",Zx),Kx("image",Zx),Kx("circle",$x),Kx("marker",$x),Kx("polyline",function(t){for(var e=t.attr().points,r=[],n=[],o=0;o<e.length;o++){var i=e[o];r.push(i[0]),n.push(i[1])}var a=r_(r,n),s=a.x,u=a.y,l={minX:s,minY:u,maxX:s+a.width,maxY:u+a.height};return{x:(l=C_(t,l)).minX,y:l.minY,width:l.maxX-l.minX,height:l.maxY-l.minY}}),Kx("polygon",function(t){for(var e=t.attr().points,r=[],n=[],o=0;o<e.length;o++){var i=e[o];r.push(i[0]),n.push(i[1])}return r_(r,n)}),Kx("text",function(t){var e=t.attr(),r=e.x,n=e.y,o=e.text,i=e.fontSize,a=e.lineHeight,s=e.font;s||(s=j_(e));var u,l=function(t,e){var r=A_(),n=0;if((0,ng.isNil)(t)||""===t)return n;if(r.save(),r.font=e,(0,ng.isString)(t)&&t.includes("\n")){var o=t.split("\n");(0,ng.each)(o,function(t){var e=r.measureText(t).width;n<e&&(n=e)})}else n=r.measureText(t).width;return r.restore(),n}(o,s);if(l){var c=e.textAlign,f=e.textBaseline,h=M_(o,i,a),p={x:r,y:n-h};c&&("end"===c||"right"===c?p.x-=l:"center"===c&&(p.x-=l/2)),f&&("top"===f?p.y+=h:"middle"===f&&(p.y+=h/2)),u={x:p.x,y:p.y,width:l,height:h}}else u={x:r,y:n,width:0,height:0};return u}),Kx("path",function(t){var e=t.attr(),r=e.path,n=e.stroke?e.lineWidth:0,o=function(t,e){for(var r=[],n=[],o=[],i=0;i<t.length;i++){var a=(y=t[i]).currentPoint,s=y.params,u=y.prePoint,l=void 0;switch(y.command){case"Q":l=f_.box(u[0],u[1],s[1],s[2],s[3],s[4]);break;case"C":l=g_.box(u[0],u[1],s[1],s[2],s[3],s[4],s[5],s[6]);break;case"A":var c=y.arcParams;l=E_.box(c.cx,c.cy,c.rx,c.ry,c.xRotation,c.startAngle,c.endAngle);break;default:r.push(a[0]),n.push(a[1])}l&&(y.box=l,r.push(l.x,l.x+l.width),n.push(l.y,l.y+l.height)),e&&("L"===y.command||"M"===y.command)&&y.prePoint&&y.nextPoint&&o.push(y)}r=r.filter(function(t){return!Number.isNaN(t)&&t!==1/0&&t!==-1/0}),n=n.filter(function(t){return!Number.isNaN(t)&&t!==1/0&&t!==-1/0});var f=(0,ng.min)(r),h=(0,ng.min)(n),p=(0,ng.max)(r),d=(0,ng.max)(n);if(0===o.length)return{x:f,y:h,width:p-f,height:d-h};for(i=0;i<o.length;i++){var y;(a=(y=o[i]).currentPoint)[0]===f?f-=Q_(y,e).xExtra:a[0]===p&&(p+=Q_(y,e).xExtra),a[1]===h?h-=Q_(y,e).yExtra:a[1]===d&&(d+=Q_(y,e).yExtra)}return{x:f,y:h,width:p-f,height:d-h}}(t.get("segments")||K_(r),n),i=o.x,a=o.y,s={minX:i,minY:a,maxX:i+o.width,maxY:a+o.height};return{x:(s=C_(t,s)).minX,y:s.minY,width:s.maxX-s.minX,height:s.maxY-s.minY}}),Kx("line",function(t){var e=t.attr(),r=e.x1,n=e.y1,o=e.x2,i=e.y2,a={minX:Math.min(r,o),maxX:Math.max(r,o),minY:Math.min(n,i),maxY:Math.max(n,i)};return{x:(a=C_(t,a)).minX,y:a.minY,width:a.maxX-a.minX,height:a.maxY-a.minY}}),Kx("ellipse",function(t){var e=t.attr(),r=e.x,n=e.y,o=e.rx,i=e.ry;return{x:r-o,y:n-i,width:2*o,height:2*i}});var Z_=function(t){function e(e,r){var n=t.call(this,e,r)||this;return n.item=r.item,n.canvasX=r.canvasX,n.canvasY=r.canvasY,n.wheelDelta=r.wheelDelta,n.detail=r.detail,n}return(0,rg.__extends)(e,t),e}(xw),$_=function(t){return"".concat(t,"-").concat(Math.random()).concat(Date.now())},tE=function(t){if((0,ng.isArray)(t))switch(t.length){case 4:return t;case 3:return t.push(t[1]),t;case 2:return t.concat(t);case 1:return[t[0],t[0],t[0],t[0]];default:return[0,0,0,0]}if((0,ng.isNumber)(t))return[t,t,t,t];if((0,ng.isString)(t)){var e=parseInt(t,10);return[e,e,e,e]}return[0,0,0,0]},eE=function(t){var e=new Z_(t.type,t);return e.clientX=t.clientX,e.clientY=t.clientY,e.x=t.x,e.y=t.y,e.target=t.target,e.currentTarget=t.currentTarget,e.bubbles=!0,e.item=t.item,e},rE=function(t){if(!t)return!1;for(var e=[1,0,0,0,1,0,0,0,1],r=0;r<9;r++)if(t[r]!==e[r])return!0;return!1},nE=function(t){return Number.isNaN(Number(t))},oE=function(t){for(var e=1/0,r=-1/0,n=1/0,o=-1/0,i=0;i<t.length;i++){var a=t[i].getBBox(),s=a.minX,u=a.minY,l=a.maxX,c=a.maxY;s<e&&(e=s),u<n&&(n=u),l>r&&(r=l),c>o&&(o=c)}return{x:Math.floor(e),y:Math.floor(n),width:Math.ceil(r)-Math.floor(e),height:Math.ceil(o)-Math.floor(n),minX:e,minY:n,maxX:r,maxY:o}},iE=function(t,e,r,n,o){void 0===e&&(e=15),void 0===r&&(r="quadratic"),void 0===n&&(n=void 0),void 0===o&&(o=void 0);for(var i=t.length,a=2*e,s=["top","top-right","right","bottom-right","bottom","bottom-left","left","top-left"],u={},l=[],c={},f=0;f<i;f++){var h=t[f],p=h.source,d=h.target,y="".concat(p,"-").concat(d);if(!l[f]){u[y]||(u[y]=[]),l[f]=!0,u[y].push(h);for(var v=0;v<i;v++)if(f!==v){var g=t[v],m=g.source,b=g.target;l[v]||(p===b&&d===m?(u[y].push(g),l[v]=!0,c["".concat(m,"|").concat(b,"|").concat(u[y].length-1)]=!0):p===m&&d===b&&(u[y].push(g),l[v]=!0))}}}for(var w in u)for(var S=u[w],x=S.length,_=0;_<x;_++){var E=S[_];if(E.source!==E.target)if(1===x&&n&&E.source!==E.target)E.type=n;else{E.type=r;var O=(_%2==0?1:-1)*(c["".concat(E.source,"|").concat(E.target,"|").concat(_)]?-1:1);E.curveOffset=x%2==1?O*Math.ceil(_/2)*a:O*(Math.floor(_/2)*a+e)}else o&&(E.type=o),E.loopCfg={position:s[_%8],dist:20*Math.floor(_/8)+50}}return t},aE=r(7592),sE=function(){function t(t){this.destroyed=!1,this.graph=t,this.destroyed=!1}return t.prototype.getViewCenter=function(){var t=this.getFormatPadding(),e=this.graph,r=this.graph.get("width"),n=e.get("height");return{x:(r-t[1]-t[3])/2+t[3],y:(n-t[0]-t[2])/2+t[0]}},t.prototype.fitCenter=function(t,e){var r,n=this.graph,o=n.get("group"),i=n.getNodes();if(i.length>n.get("optimizeThreshold")){var a=1/0,s=1/0,u=-1/0,l=-1/0;i.forEach(function(t){var e=t.getModel(),r=e.x,n=e.y;a>r&&(a=r),s>n&&(s=n),u<r&&(u=r),l<n&&(l=n)});var c=o.getMatrix()||[1,0,0,0,1,0,0,0,1],f=zm({x:a,y:s},c),h=f.x,p=f.y,d=zm({x:u,y:l},c),y=d.x,v=d.y;r={minX:h,maxX:y,minY:p,maxY:v,width:y-h,height:v-p,x:h,y:p}}else r=o.getCanvasBBox();if(0!==r.width&&0!==r.height){var g=this.getViewCenter(),m=r.x+r.width/2,b=r.y+r.height/2;n.translate(g.x-m,g.y-b,t,e)}},t.prototype.animatedFitView=function(t,e,r,n,o,i,a,s){var u=this.graph;r=r||{duration:500,easing:"easeCubic"};var l=n.x+o.x-i.x-n.minX,c=n.y+o.y-i.y-n.minY;if(!nE(l)&&!nE(c)){var f=(0,aE.vs)([1,0,0,0,1,0,0,0,1],[["t",l,c]]);if(s){var h=u.get("minZoom"),p=u.get("maxZoom"),d=a;h&&a<h?(d=h,console.warn("fitview failed, ratio out of range, ratio: %f",a,"graph minzoom has been used instead")):p&&a>p&&(d=p,console.warn("fitview failed, ratio out of range, ratio: %f",a,"graph maxzoom has been used instead"));var y=(0,aE.vs)(f,[["t",-o.x,-o.y],["s",d,d],["t",o.x,o.y]]),v=zb({animateCfg:r,callback:function(){t.setMatrix(y),u.emit("viewportchange",{action:"translate",matrix:f}),u.emit("viewportchange",{action:"zoom",matrix:y})}});t.stopAnimate(),t.setMatrix(e),t.animate(function(t){return{matrix:vb(e,y,t)}},v)}else{var g=zb({animateCfg:r,callback:function(){u.emit("viewportchange",{action:"translate",matrix:f})}});t.animate(function(t){return{matrix:vb(e,f,t)}},g)}}},t.prototype.fitView=function(t,e){var r,n=this.graph,o=this.getFormatPadding(),i=n.get("width"),a=n.get("height"),s=n.get("group"),u=s.getMatrix()||[1,0,0,0,1,0,0,0,1];s.resetMatrix();var l=n.getNodes();if(l.length>n.get("optimizeThreshold")){var c=1/0,f=1/0,h=-1/0,p=-1/0;l.forEach(function(t){var e=t.getModel(),r=e.x,n=e.y;c>r&&(c=r),f>n&&(f=n),h<r&&(h=r),p<n&&(p=n)}),r={minX:c,maxX:h,minY:f,maxY:p,width:h-c,height:p-f,x:c,y:f}}else r=s.getCanvasBBox();if(0!==r.width&&0!==r.height){var d=this.getViewCenter(),y={x:r.x+r.width/2,y:r.y+r.height/2},v=(i-o[1]-o[3])/r.width,g=(a-o[0]-o[2])/r.height,m=v;if(v>g&&(m=g),t)this.animatedFitView(s,u,e,r,d,y,m,!0);else{var b=d.x-y.x,w=d.y-y.y;if(nE(b)||nE(w))return;n.translate(b,w),n.zoom(m,d)||console.warn("zoom failed, ratio out of range, ratio: %f",m)}}},t.prototype.fitViewByRules=function(t,e,r){var n,o=t.onlyOutOfViewPort,i=void 0!==o&&o,a=t.direction,s=void 0===a?"both":a,u=t.ratioRule,l=void 0===u?"min":u,c=this.graph,f=this.getFormatPadding(),h=c.get("width"),p=c.get("height"),d=c.get("group"),y=d.getMatrix()||[1,0,0,0,1,0,0,0,1];d.resetMatrix();var v=c.getNodes();if(v.length>c.get("optimizeThreshold")){var g=1/0,m=1/0,b=-1/0,w=-1/0;v.forEach(function(t){var e=t.getModel(),r=e.x,n=e.y;g>r&&(g=r),m>n&&(m=n),b<r&&(b=r),w<n&&(w=n)}),n={minX:g,maxX:b,minY:m,maxY:w,width:b-g,height:w-m,x:g,y:m}}else n=d.getCanvasBBox();if(0!==n.width&&0!==n.height){var S,x=this.getViewCenter(),_={x:n.x+n.width/2,y:n.y+n.height/2},E=(h-f[1]-f[3])/n.width,O=(p-f[0]-f[2])/n.height;if(S="x"===s?E:"y"===s?O:"max"===l?Math.max(E,O):Math.min(E,O),i&&(S=S<1?S:1),e)this.animatedFitView(d,y,r,n,x,_,S,!0);else{var P=c.getZoom()*S,k=c.get("minZoom");P<k&&(P=k,console.warn("fitview failed, ratio out of range, ratio: %f",S,"graph minzoom has been used instead")),c.translate(x.x-_.x,x.y-_.y),c.zoomTo(P,x)}}},t.prototype.getFormatPadding=function(){var t=this.graph.get("fitViewPadding");return tE(t)},t.prototype.focusPoint=function(t,e,r){var n=this,o=this.getViewCenter(),i=this.getPointByCanvas(o.x,o.y),a=this.graph.get("group").getMatrix();if(a||(a=[1,0,0,0,1,0,0,0,1]),e){var s=(i.x-t.x)*a[0],u=(i.y-t.y)*a[4],l=0,c=0,f=0,h=0;this.graph.get("canvas").animate(function(t){f=s*t,h=u*t,n.graph.translate(f-l,h-c),l=f,c=h},(0,rg.__assign)({},r))}else this.graph.translate((i.x-t.x)*a[0],(i.y-t.y)*a[4])},t.prototype.getPointByCanvas=function(t,e){var r=this.graph.get("group").getMatrix();return r||(r=[1,0,0,0,1,0,0,0,1]),Vm({x:t,y:e},r)},t.prototype.getPointByClient=function(t,e){var r=this.graph.get("canvas").getPointByClient(t,e);return this.getPointByCanvas(r.x,r.y)},t.prototype.getClientByPoint=function(t,e){var r=this.graph.get("canvas"),n=this.getCanvasByPoint(t,e),o=r.getClientByPoint(n.x,n.y);return{x:o.x,y:o.y}},t.prototype.getCanvasByPoint=function(t,e){var r=this.graph.get("group").getMatrix();return r||(r=[1,0,0,0,1,0,0,0,1]),zm({x:t,y:e},r)},t.prototype.focus=function(t,e,r){if((0,ng.isString)(t)&&(t=this.graph.findById(t)),t){var n=0,o=0;if(t.getType&&"edge"===t.getType()){var i=t.getSource().get("group").getMatrix(),a=t.getTarget().get("group").getMatrix();i&&a?(n=(i[6]+a[6])/2,o=(i[7]+a[7])/2):(i||a)&&(n=i?i[6]:a[6],o=i?i[7]:a[7])}else{var s=t.get("group").getMatrix();s||(s=[1,0,0,0,1,0,0,0,1]),n=s[6],o=s[7]}this.focusPoint({x:n,y:o},e,r)}},t.prototype.focusItems=function(t,e,r,n){if(t.length){var o=this.graph,i=this.getFormatPadding(),a=o.get("width"),s=o.get("height"),u=o.get("group"),l=u.getMatrix()||[1,0,0,0,1,0,0,0,1];u.resetMatrix();for(var c={x:0,y:0,minX:Number.MAX_SAFE_INTEGER,minY:Number.MAX_SAFE_INTEGER,maxX:Number.MIN_SAFE_INTEGER,maxY:Number.MIN_SAFE_INTEGER,width:0,height:0},f=0,h=t;f<h.length;f++){var p=h[f].getBBox();p.minX<c.minX&&(c.minX=p.minX),p.minY<c.minY&&(c.minY=p.minY),p.maxX>c.maxX&&(c.maxX=p.maxX),p.maxY>c.maxY&&(c.maxY=p.maxY)}if(c.x=c.minX,c.y=c.minY,c.width=c.maxX-c.minX,c.height=c.maxY-c.minY,0!==c.width&&0!==c.height){var d=this.getViewCenter(),y={x:c.x+c.width/2,y:c.y+c.height/2},v=(a-i[1]-i[3])/c.width,g=(s-i[0]-i[2])/c.height,m=v;v>g&&(m=g),r?this.animatedFitView(u,l,n,c,d,y,m,e):(o.translate(d.x-y.x,d.y-y.y),e&&!o.zoom(m,d)&&console.warn("zoom failed, ratio out of range, ratio: %f",m))}}},t.prototype.changeSize=function(t,e){var r=this.graph;if(!(0,ng.isNumber)(t)||!(0,ng.isNumber)(e))throw Error("invalid canvas width & height, please make sure width & height type is number");r.set({width:t,height:e}),r.get("canvas").changeSize(t,e),r.get("plugins").forEach(function(t){t.get("gridContainer")&&t.positionInit()})},t.prototype.destroy=function(){this.graph=null,this.destroyed=!1},t}();function uE(t){"@babel/helpers - typeof";return(uE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function lE(t){if("string"!=typeof t)return t;var e=function(t){if("string"!=typeof t)return t;try{return JSON.parse(t.trim())}catch(e){return t.trim()}},r=e(t);if("string"!=typeof r)return r;for(var n=function(t){return t[t.length-1]},o=t.trim(),i=[],a=[],s=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.some(function(t){return n(a)===t})},u=null,l=0,c="";l<o.length;){var f=o[l],h=s('"',"'");if(h||f.trim()){var p="\\"===o[l-1],d=s("}"),y=s("]"),v=s(","),g=n(i);if(h)if(n(a)!==f||p)c+=f;else{a.pop();var m=e(c);g.push(m),u=m,c=""}else if(y&&","===f)c&&(g.push(e(c)),c="");else if(d&&":"===f)a.push(","),c&&(g.push(c),c="");else if(v&&","===f)c&&(g.push(e(c)),c=""),a.pop();else if("}"===f&&(d||v)){c&&(g.push(e(c)),c=""),v&&a.pop();for(var b={},w=1;w<g.length;w+=2)b[g[w-1]]=g[w];i.pop(),i.length&&n(i).push(b),a.pop(),u=b}else"]"===f&&y?(c&&(g.push(e(c)),c=""),i.pop(),i.length&&n(i).push(g),a.pop(),u=g):"{"===f?(i.push([]),a.push("}")):"["===f?(i.push([]),a.push("]")):'"'===f?a.push('"'):"'"===f?a.push("'"):c+=f;l+=1}else l+=1}return u||c}var cE=function(t){return t.split("-").reduce(function(t,e){return t+e.charAt(0).toUpperCase()+e.slice(1)})},fE=function(t){return function(e){for(var r=t.length,n=[],o=0,i="";o<r;)if("{"===t[o]&&"{"===t[o+1])n.push(i),i="",o+=2;else if("}"===t[o]&&"}"===t[o+1]){if(n.length){var a=n.pop();i=(0,ng.get)(e,i,a.endsWith("=")?'"{'.concat(i,'}"'):i),n.push(a+i)}o+=2,i=""}else i+=t[o],o+=1;return n.push(i),n.map(function(t,e){return n[e-1]&&n[e-1].endsWith("=")?'"{'.concat(t,'}"'):t}).join("")}};function hE(t,e){var r;void 0===e&&(e={x:0,y:0});var n=(0,rg.__assign)({x:0,y:0,width:0,height:0},e);if(null===(r=t.children)||void 0===r?void 0:r.length){var o=t.attrs,i=void 0===o?{}:o,a=i.marginTop,s=(0,rg.__assign)({},e);a&&(s.y+=a);for(var u=0;u<t.children.length;u++){t.children[u].attrs.key="".concat(i.key||"root"," -").concat(u," ");var l=hE(t.children[u],s);if(l.bbox){var c=l.bbox;"inline"===l.attrs.next?s.x+=l.bbox.width:s.y+=l.bbox.height,c.width+c.x>n.width&&(n.width=c.width+c.x),c.height+c.y>n.height&&(n.height=c.height+c.y)}}}return t.bbox=function(t,e,r){var n,o,i=t.attrs,a=void 0===i?{}:i,s={x:e.x||0,y:e.y||0,width:r.width||0,height:r.height||0};switch(t.type){case"maker":case"circle":a.r&&(o=2*a.r,n=2*a.r);break;case"text":a.text&&(o=Lb(a.text,a.fontSize||12)[0],n=16,s.y+=n,s.height=n,s.width=o,t.attrs=(0,rg.__assign)({fontSize:12,fill:"#000"},a));break;default:a.width&&(o=a.width),a.height&&(n=a.height)}return n>=0&&(s.height=n),o>=0&&(s.width=o),a.marginTop&&(s.y+=a.marginTop),a.marginLeft&&(s.x+=a.marginLeft),s}(t,e,n),t.attrs=(0,rg.__assign)((0,rg.__assign)({},t.attrs),t.bbox),t}function pE(t){var e={},r=function(e){var r="function"==typeof t?t(e):t,n=fE(r)(e),o=document.createElement("div");o.innerHTML=n;var i=hE(function t(e,r){var n={},o=e.getAttributeNames&&e.getAttributeNames()||[],i=e.children&&Array.from(e.children).map(function(e){return t(e,r)}),a={},s=e.tagName?e.tagName.toLowerCase():"group";return"text"===s&&(n.text=e.innerText),a.type=s,"img"===s&&(a.type="image"),Array.from(o).forEach(function(t){var r=cE(t),o=e.getAttribute(t);try{if("style"===r||"attrs"===r){var i=lE(o);n=(0,rg.__assign)((0,rg.__assign)({},n),i)}else a[r]=lE(o)}catch(t){if("style"===r)throw t;a[r]=o}}),a.attrs=n,r&&r.style&&a.name&&"object"===uE(r.style[a.name])&&(a.attrs=(0,rg.__assign)((0,rg.__assign)({},a.attrs),r.style[a.name])),r&&r.style&&a.keyshape&&(a.attrs=(0,rg.__assign)((0,rg.__assign)({},a.attrs),r.style)),i.length&&(a.children=i),a}(o.children[0],e));return o.remove(),i};return{draw:function(t,n){var o=r(t),i=n;return function t(e){var r=e.attrs,o=void 0===r?{}:r,a=e.bbox,s=e.type,u=e.children,l=(0,rg.__rest)(e,["attrs","bbox","type","children"]);if("group"!==e.type){var c=n.addShape(e.type,(0,rg.__assign)({attrs:o,origin:{bbox:a,type:s,children:u}},l));e.keyshape&&(i=c)}e.children&&e.children.forEach(function(e){return t(e)})}(o),e[t.id]=[o],i},update:function(t,n){e[t.id]||(e[t.id]=[]);var o=n.getContainer(),i=o.get("children"),a=r(t),s=function t(e){var r;"group"!==e.type&&o.addShape(e.type,{attrs:e.attrs}),(null===(r=e.children)||void 0===r?void 0:r.length)&&e.children.map(function(e){return t(e)})},u=function t(e){var r,n=i.find(function(t){return t.attrs.key===e.attrs.key});n&&o.removeChild(n),(null===(r=e.children)||void 0===r?void 0:r.length)&&e.children.map(function(e){return t(e)})};!function t(e){var r=e.key;if("group"!==e.type){var o=i.find(function(t){return t.attrs.key===r});switch(e.action){case"change":if(o){var a=e.val.keyshape?n.getOriginStyle():{};o.attr((0,rg.__assign)((0,rg.__assign)({},a),e.val.attrs))}break;case"add":s(e.val);break;case"delete":u(e.val);break;case"restructure":u(e.formerTarget),s(e.nowTarget)}}e.children&&e.children.forEach(function(e){return t(e)})}(function t(e,r){var n,o,i,a,s=(e||{}).type,u=((null===r||void 0===r?void 0:r.attrs)||{}).key;if(u&&e&&(e.attrs.key=u),!e&&r)return{action:"delete",val:r,type:s,key:u};if(e&&!r)return{action:"add",val:e,type:s};if(!e&&!r)return{action:"same",type:s};var l=[];if((null===(n=e.children)||void 0===n?void 0:n.length)>0||(null===(o=r.children)||void 0===o?void 0:o.length)>0)for(var c=Math.max(null===(i=e.children)||void 0===i?void 0:i.length,null===(a=r.children)||void 0===a?void 0:a.length),f=r.children||[],h=e.children||[],p=0;p<c;p+=1)l.push(t(h[p],f[p]));var d=Object.keys(r.attrs),y=Object.keys(e.attrs);return r.type!==e.type?{action:"restructure",nowTarget:e,formerTarget:r,key:u,children:l}:d.filter(function(t){return"children"!==t}).some(function(t){return e.attrs[t]!==r.attrs[t]||!y.includes(t)})?{action:"change",val:e,children:l,type:s,key:u}:{action:"same",children:l,type:s,key:u}}(a,e[t.id].pop())),e[t.id].push(a)},getAnchorPoints:function(){return[[0,.5],[1,.5],[.5,1],[.5,0]]}}}var dE={};function yE(t){return dE[t]||(dE[t]=(0,ng.upperFirst)(t)),dE[t]}var vE={defaultShapeType:"defaultType",className:null,getShape:function(t){return this[t]||this[this.defaultShapeType]||this["simple-circle"]},draw:function(t,e,r){var n=this.getShape(t);r.shapeMap={};var o=n.draw(e,r);return n.afterDraw&&n.afterDraw(e,r,o),o},baseUpdate:function(t,e,r,n){var o,i,a=this.getShape(t);a.update&&(a.mergeStyle=null===(o=a.getOptions)||void 0===o?void 0:o.call(a,e,n),null===(i=a.update)||void 0===i||i.call(a,e,r,n)),a.afterUpdate&&a.afterUpdate(e,r)},setState:function(t,e,r,n){this.getShape(t).setState(e,r,n)},shouldUpdate:function(t){return!!this.getShape(t).update},getControlPoints:function(t,e){return this.getShape(t).getControlPoints(e)},getAnchorPoints:function(t,e){return this.getShape(t).getAnchorPoints(e)}},gE={options:{},draw:function(t,e){return this.drawShape(t,e)},drawShape:function(){},afterDraw:function(){},afterUpdate:function(){},setState:function(){},getControlPoints:function(t){return t.controlPoints},getAnchorPoints:function(t){var e=this.options.anchorPoints;return t.anchorPoints||e}},mE=function(){function t(){}return t.registerFactory=function(e,r){var n=yE(e),o=vE,i=(0,rg.__assign)((0,rg.__assign)({},o),r);return t[n]=i,i.className=n,i},t.getFactory=function(e){return t[yE(e)]},t.registerNode=function(e,r,n){var o,i=t.Node;if("string"==typeof r||"function"==typeof r){var a=pE(r);o=(0,rg.__assign)((0,rg.__assign)({},i.getShape("single-node")),a)}else if(r.jsx){a=pE(r.jsx);o=(0,rg.__assign)((0,rg.__assign)((0,rg.__assign)({},i.getShape("single-node")),a),r)}else{i.getShape(n);var s=n?i.getShape(n):gE;o=(0,rg.__assign)((0,rg.__assign)({},s),r)}return o.type=e,o.itemType="node",i[e]=o,o},t.registerEdge=function(e,r,n){var o=t.Edge,i=n?o.getShape(n):gE,a=(0,rg.__assign)((0,rg.__assign)({},i),r);return a.type=e,a.itemType="edge",o[e]=a,a},t.registerCombo=function(e,r,n){var o=t.Combo,i=n?o.getShape(n):gE,a=(0,rg.__assign)((0,rg.__assign)({},i),r);return a.type=e,a.itemType="combo",o[e]=a,a},t}(),bE=mE;mE.registerFactory("node",{defaultShapeType:"circle"}),mE.registerFactory("edge",{defaultShapeType:"line"}),mE.registerFactory("combo",{defaultShapeType:"circle"});var wE=function(){function t(t){this._cfg={},this.destroyed=!1,this.optimize=!1;var e={id:void 0,type:"item",model:{},group:void 0,animate:!1,visible:!0,locked:!1,event:!0,keyShape:void 0,states:[]};this._cfg=Object.assign(e,this.getDefaultCfg(),t);var r=this.get("model"),n=r.id,o=this.get("type");void 0===n?n=$_(o):"string"!=typeof n&&(n=String(n)),this.get("model").id=n,this.set("id",n);var i=t.group;i&&(i.set("item",this),i.set("id",n)),this.init(),this.draw();var a=r.shape||r.type||("edge"===o?"line":"circle"),s=this.get("shapeFactory");if(s&&s[a]){var u=s[a].options;if(u&&u.stateStyles){var l=this.get("styles")||r.stateStyles;l=(0,ng.deepMix)({},u.stateStyles,l),this.set("styles",l)}}}return t.prototype.calculateBBox=function(){var t=this.get("keyShape"),e=this.get("group"),r=Tb(t,e);return r.x=r.minX,r.y=r.minY,r.width=r.maxX-r.minX,r.height=r.maxY-r.minY,r.centerX=(r.minX+r.maxX)/2,r.centerY=(r.minY+r.maxY)/2,r},t.prototype.calculateCanvasBBox=function(){var t=this.get("keyShape"),e=this.get("group"),r=Tb(t,e);return r.x=r.minX,r.y=r.minY,r.width=r.maxX-r.minX,r.height=r.maxY-r.minY,r.centerX=(r.minX+r.maxX)/2,r.centerY=(r.minY+r.maxY)/2,r},t.prototype.drawInner=function(){var t=this.get("shapeFactory"),e=this.get("group"),r=this.get("model");e.clear();var n=r.visible;if(void 0===n||n||this.changeVisibility(n),t){this.updatePosition(r);var o=this.getShapeCfg(r),i=o.type,a=t.draw(i,o,e);a&&(this.set("keyShape",a),a.set("isKeyShape",!0),a.set("draggable",!0)),this.setOriginStyle(),this.set("currentShape",i),this.restoreStates(t,i)}},t.prototype.setOriginStyle=function(){var t=this.get("group"),e=t.get("children"),r=this,n=this.getKeyShape().get("name");if(this.get("originStyle")){var o=this.get("originStyle");n&&!o[n]&&(o[n]={});var i=this.getCurrentStatesStyle(),a=function(t){var a=e[t],s=a.get("name"),u=a.attr();if(s&&s!==n){var l=i[s];o[s]||(o[s]={}),l?Object.keys(u).forEach(function(t){var e=u[t];e!==l[t]&&(o[s][t]=e)}):o[s]="image"!==a.get("type")?(0,ng.clone)(u):r.getShapeStyleByName(s)}else{var c=a.attr(),f={};Object.keys(i).forEach(function(t){var e=i[t];t!==n&&(0,ng.isPlainObject)(e)||(f[t]=e)}),Object.keys(c).forEach(function(t){var e=c[t];f[t]!==e&&(n?o[n][t]=e:o[t]=e)})}};for(u=0;u<e.length;u++)a(u);delete o.path,delete o.matrix,delete o.x,delete o.y,o[n]&&(delete o[n].x,delete o[n].y,delete o[n].matrix,delete o[n].path),r.set("originStyle",o)}else{for(var s={},u=0;u<e.length;u++){var l=e[u],c=l.get("type"),f=l.get("name");if(f&&f!==n)s[f]="image"!==c?(0,ng.clone)(l.attr()):r.getShapeStyleByName(f),"text"===c&&s[f]&&(delete s[f].x,delete s[f].y,delete s[f].matrix);else{var h=r.getShapeStyleByName();if(delete h.path,delete h.matrix,n)if(f)s[n]=h;else{var p=$_("shape");l.set("name",p),t.shapeMap[p]=l,s[p]="image"!==c?(0,ng.clone)(l.attr()):r.getShapeStyleByName(f)}else Object.assign(s,h)}}r.set("originStyle",s)}},t.prototype.restoreStates=function(t,e){var r=this,n=r.get("states");(0,ng.each)(n,function(n){t.setState(e,n,!0,r)})},t.prototype.init=function(){var t=bE.getFactory(this.get("type"));this.set("shapeFactory",t)},t.prototype.get=function(t){return this._cfg[t]},t.prototype.set=function(t,e){(0,ng.isPlainObject)(t)?this._cfg=(0,rg.__assign)((0,rg.__assign)({},this._cfg),t):this._cfg[t]=e},t.prototype.getDefaultCfg=function(){return{}},t.prototype.clearCache=function(){this.set("bboxCache",null),this.set("bboxCanvasCache",null)},t.prototype.beforeDraw=function(){},t.prototype.afterDraw=function(){},t.prototype.afterUpdate=function(){},t.prototype.draw=function(){this.beforeDraw(),this.drawInner(),this.afterDraw()},t.prototype.getShapeStyleByName=function(t){var e,r=this.get("group");if(e=t?r.shapeMap[t]||r.find(function(e){return e.get("name")===t}):this.getKeyShape()){var n={};return(0,ng.each)(e.attr(),function(t,e){("img"!==e||(0,ng.isString)(t))&&(n[e]=t)}),n}return{}},t.prototype.getShapeCfg=function(t,e){var r=this.get("styles");if(r){var n=t;return n.style=(0,rg.__assign)((0,rg.__assign)({},r),t.style),n}return t},t.prototype.getStateStyle=function(t){var e=this.get("styles");return e&&e[t]},t.prototype.getOriginStyle=function(){return this.get("originStyle")},t.prototype.getCurrentStatesStyle=function(){var t=this,e={},r=t.getStates();return r&&r.length?((0,ng.each)(t.getStates(),function(r){e=Object.assign(e,t.getStateStyle(r))}),e):this.get("originStyle")},t.prototype.setState=function(t,e){var r=this.get("states"),n=this.get("shapeFactory"),o=t,i=t;(0,ng.isString)(e)&&(o="".concat(t,":").concat(e),i="".concat(t,":"));var a=r;if((0,ng.isBoolean)(e)){var s=r.indexOf(i);if(e){if(s>-1)return;r.push(o)}else s>-1&&r.splice(s,1)}else if((0,ng.isString)(e)){var u=r.filter(function(t){return t.includes(i)});u.length>0&&this.clearStates(u),(a=a.filter(function(t){return!t.includes(i)})).push(o),this.set("states",a)}if(n){var l=this.get("model").type;n.setState(l,t,e,this)}},t.prototype.clearStates=function(t){var e=this,r=e.getStates(),n=e.get("shapeFactory"),o=e.get("model").type;t||(t=r),(0,ng.isString)(t)&&(t=[t]);var i=r.filter(function(e){return-1===t.indexOf(e)});e.set("states",i),t.forEach(function(t){n.setState(o,t,!1,e)})},t.prototype.setOptimize=function(t){this.optimize=t},t.prototype.getContainer=function(){return this.get("group")},t.prototype.getKeyShape=function(){return this.get("keyShape")},t.prototype.getModel=function(){return this.get("model")},t.prototype.getType=function(){return this.get("type")},t.prototype.getID=function(){return this.get("id")},t.prototype.isItem=function(){return!0},t.prototype.getStates=function(){return this.get("states")},t.prototype.hasState=function(t){return this.getStates().indexOf(t)>=0},t.prototype.refresh=function(t){var e=this.get("model");this.updatePosition(e),this.updateShape(t),this.afterUpdate(),this.clearCache()},t.prototype.getUpdateType=function(t){},t.prototype.update=function(t,e){void 0===e&&(e=void 0);var r=this.get("model");if("move"===e)this.updatePosition(t);else{var n=r.visible,o=t.visible;n!==o&&void 0!==o&&this.changeVisibility(o);var i={x:r.x,y:r.y};t.x=isNaN(+t.x)?r.x:+t.x,t.y=isNaN(+t.y)?r.y:+t.y;var a=this.get("styles");if(t.stateStyles){var s=t.stateStyles;(0,ng.mix)(a,s),delete t.stateStyles}Object.assign(r,t),i.x===t.x&&i.y===t.y||this.updatePosition(t),this.updateShape(e)}this.afterUpdate(),this.clearCache()},t.prototype.updateShape=function(t){var e=this.get("shapeFactory"),r=this.get("model"),n=r.type;if(e.shouldUpdate(n)&&n===this.get("currentShape")){var o=this.getShapeCfg(r,t);e.baseUpdate(n,o,this,t),"move"!==t&&this.setOriginStyle()}else this.draw();this.restoreStates(e,n)},t.prototype.updatePosition=function(t){var e=this.get("model"),r=isNaN(+t.x)?+e.x:+t.x,n=isNaN(+t.y)?+e.y:+t.y,o=this.get("group");if(isNaN(r)||isNaN(n))return!1;e.x=r,e.y=n;var i=o.getMatrix();return(!i||i[6]!==r||i[7]!==n)&&(o.resetMatrix(),Jm(o,{x:r,y:n}),this.clearCache(),!0)},t.prototype.getBBox=function(){var t=this.get("bboxCache");return t||(t=this.calculateBBox(),this.set("bboxCache",t)),t},t.prototype.getCanvasBBox=function(){var t=this.get("bboxCanvasCache");return t||(t=this.calculateCanvasBBox(),this.set("bboxCanvasCache",t)),t},t.prototype.toFront=function(){this.get("group").toFront()},t.prototype.toBack=function(){this.get("group").toBack()},t.prototype.show=function(){this.changeVisibility(!0)},t.prototype.hide=function(){this.changeVisibility(!1)},t.prototype.changeVisibility=function(t){var e=this.get("group");t?e.show():e.hide(),this.set("visible",t)},t.prototype.isVisible=function(){return this.get("visible")},t.prototype.enableCapture=function(t){var e=this.get("group");e&&e.set("capture",t)},t.prototype.destroy=function(){if(!this.destroyed){var t=this.get("animate"),e=this.get("group");t&&e.stopAnimate(),e.shapeMap={},this.clearCache(),e.remove(),this._cfg=null,this.destroyed=!0}},t}(),SE={source:"start",target:"end"},xE=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,rg.__extends)(e,t),e.prototype.getDefaultCfg=function(){return{type:"edge",sourceNode:null,targetNode:null,startPoint:null,endPoint:null,linkCenter:!1}},e.prototype.setEnd=function(t,e){var r=SE[t]+"Point",n=t+"Node",o=this.get(n);o&&!o.destroyed&&o.removeEdge(this),(0,ng.isPlainObject)(e)?(this.set(r,e),this.set(n,null)):e&&(e.addEdge(this),this.set(n,e),this.set(r,null))},e.prototype.getLinkPoint=function(t,e,r){var n=SE[t]+"Point",o=t+"Node",i=this.get(n);if(!i){var a=this.get(o),s=t+"Anchor",u=this.getPrePoint(t,r),l=e[s];(0,ng.isNil)(l)||(i=a.getLinkPointByAnchor(l)),i=i||a.getLinkPoint(u),(0,ng.isNil)(i.index)||this.set("".concat(t,"AnchorIndex"),i.index)}return i},e.prototype.getPrePoint=function(t,e){if(e&&e.length)return e["source"===t?0:e.length-1];var r="source"===t?"target":"source";return this.getEndPoint(r)},e.prototype.getEndPoint=function(t){var e=t+"Node",r=SE[t]+"Point",n=this.get(e);return n&&!n.destroyed?n.get("model"):this.get(r)},e.prototype.getControlPointsByCenter=function(t){var e=this.getEndPoint("source"),r=this.getEndPoint("target"),n=this.get("shapeFactory"),o=t.type;return n.getControlPoints(o,{startPoint:e,endPoint:r})},e.prototype.getEndCenter=function(t){var e=t+"Node",r=SE[t]+"Point",n=this.get(e);if(n){var o=n.getBBox();return{x:o.centerX,y:o.centerY}}return this.get(r)},e.prototype.init=function(){t.prototype.init.call(this),this.setSource(this.get("source")),this.setTarget(this.get("target"))},e.prototype.getShapeCfg=function(e,r){var n=this.get("linkCenter"),o=(null===r||void 0===r?void 0:r.includes("move"))?e:t.prototype.getShapeCfg.call(this,e);if(n)o.startPoint=this.getEndCenter("source"),o.endPoint=this.getEndCenter("target");else{var i=o.controlPoints||this.getControlPointsByCenter(o);o.startPoint=this.getLinkPoint("source",e,i),o.endPoint=this.getLinkPoint("target",e,i)}return o.sourceNode=this.get("sourceNode"),o.targetNode=this.get("targetNode"),o},e.prototype.getModel=function(){var t=this.get("model"),e=this.get("source".concat("Node")),r=this.get("target".concat("Node"));return e?delete t["source".concat("Node")]:t.source=this.get("start".concat("Point")),r?delete t["target".concat("Node")]:t.target=this.get("end".concat("Point")),(0,ng.isString)(t.source)||(0,ng.isPlainObject)(t.source)||(t.source=t.source.getID()),(0,ng.isString)(t.target)||(0,ng.isPlainObject)(t.target)||(t.target=t.target.getID()),t},e.prototype.setSource=function(t){this.setEnd("source",t),this.set("source",t)},e.prototype.setTarget=function(t){this.setEnd("target",t),this.set("target",t)},e.prototype.getSource=function(){return this.get("source")},e.prototype.getTarget=function(){return this.get("target")},e.prototype.updatePosition=function(){return!1},e.prototype.update=function(t,e){void 0===e&&(e=void 0);var r=this.get("model"),n=r.visible,o=t.visible;n!==o&&void 0!==o&&this.changeVisibility(o);var i=this.get("source"),a=this.get("target");if(i&&!i.destroyed&&a&&!a.destroyed){var s=this.get("styles");if(t.stateStyles){var u=t.stateStyles;(0,ng.mix)(s,u),delete t.stateStyles}Object.assign(r,t),this.updateShape(e),this.afterUpdate(),this.clearCache()}},e.prototype.destroy=function(){var e=this.get("source".concat("Node")),r=this.get("target".concat("Node"));e&&!e.destroyed&&e.removeEdge(this),r&&!r.destroyed&&r.removeEdge(this),t.prototype.destroy.call(this)},e}(wE),_E=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,rg.__extends)(e,t),e.prototype.getNearestPoint=function(t,e){for(var r=0,n=t[0],o=Wm(t[0],e),i=0;i<t.length;i++){var a=t[i],s=Wm(a,e);s<o&&(n=a,o=s,r=i)}return n.anchorIndex=r,n},e.prototype.getDefaultCfg=function(){return{type:"node",edges:[]}},e.prototype.getEdges=function(){return this.get("edges")},e.prototype.getInEdges=function(){var t=this;return this.get("edges").filter(function(e){return e.get("target")===t})},e.prototype.getOutEdges=function(){var t=this;return this.get("edges").filter(function(e){return e.get("source")===t})},e.prototype.getNeighbors=function(t){var e=this,r=this.get("edges");if("target"===t){return r.filter(function(t){return t.getSource()===e}).map(function(t){return t.getTarget()})}if("source"===t){return r.filter(function(t){return t.getTarget()===e}).map(function(t){return t.getSource()})}return r.map(function(t){return t.getSource()===e?t.getTarget():t.getSource()})},e.prototype.getLinkPointByAnchor=function(t){return this.getAnchorPoints()[t]},e.prototype.getLinkPoint=function(t){var e,r,n=this.get("keyShape").get("type"),o=this.get("type"),i=this.getBBox();"combo"===o?(e=i.centerX||(i.maxX+i.minX)/2,r=i.centerY||(i.maxY+i.minY)/2):(e=i.centerX,r=i.centerY);var a,s=this.getAnchorPoints();switch(n){case"circle":a=Gm({x:e,y:r,r:i.width/2},t);break;case"ellipse":a=Um({x:e,y:r,rx:i.width/2,ry:i.height/2},t);break;default:a=Fm(i,t)}var u=a;return s.length&&(u||(u=t),u=this.getNearestPoint(s,u)),u||(u={x:e,y:r}),u},e.prototype.getAnchorPoints=function(){var t=this.get("anchorPointsCache");if(!t){t=[];var e=this.get("shapeFactory"),r=this.getBBox(),n=this.get("model"),o=this.getShapeCfg(n),i=n.type,a=e.getAnchorPoints(i,o)||[];(0,ng.each)(a,function(e,n){var o={x:r.minX+e[0]*r.width,y:r.minY+e[1]*r.height,anchorIndex:n};t.push(o)}),this.set("anchorPointsCache",t)}return t},e.prototype.addEdge=function(t){this.get("edges").push(t)},e.prototype.lock=function(){this.set("locked",!0)},e.prototype.unlock=function(){this.set("locked",!1)},e.prototype.hasLocked=function(){return this.get("locked")},e.prototype.removeEdge=function(t){var e=this.getEdges(),r=e.indexOf(t);r>-1&&e.splice(r,1)},e.prototype.clearCache=function(){this.set("bboxCache",null),this.set("anchorPointsCache",null)},e.prototype.getUpdateType=function(t){var e,r,n,o,i;if(t){var a=!(0,ng.isNil)(t.x),s=!(0,ng.isNil)(t.y),u=Object.keys(t);return 1===u.length&&(a||s)||2===u.length&&a&&s?"move":(0,ng.isNumber)(t.x)||(0,ng.isNumber)(t.y)||t.type||t.anchorPoints||t.size||(null===t||void 0===t?void 0:t.style)&&((null===(e=null===t||void 0===t?void 0:t.style)||void 0===e?void 0:e.r)||(null===(r=null===t||void 0===t?void 0:t.style)||void 0===r?void 0:r.width)||(null===(n=null===t||void 0===t?void 0:t.style)||void 0===n?void 0:n.height)||(null===(o=null===t||void 0===t?void 0:t.style)||void 0===o?void 0:o.rx)||(null===(i=null===t||void 0===t?void 0:t.style)||void 0===i?void 0:i.ry))?"bbox|label":u.includes("label")||u.includes("labelCfg")?"style|label":"style"}},e.prototype.setState=function(e,r){var n=this;this.optimize?t.prototype.setState.call(this,e,r):this.runWithBBoxAffected(function(){return t.prototype.setState.call(n,e,r)})},e.prototype.clearStates=function(e){var r=this;this.optimize?t.prototype.clearStates.call(this,e):this.runWithBBoxAffected(function(){return t.prototype.clearStates.call(r,e)})},e.prototype.runWithBBoxAffected=function(t){var e=["r","width","height","rx","ry","lineWidth"],r=this.getKeyShape().attr(),n={};Object.keys(this.getKeyShape().attr()).forEach(function(t){e.includes(t)&&(n[t]=r[t])}),t();for(var o=this.getKeyShape().attr(),i=0;i<e.length;i++){var a=e[i];if(o[a]!==n[a]){this.clearCache(),this.getEdges().forEach(function(t){return t.refresh()});break}}},e}(wE),EE=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,rg.__extends)(e,t),e.prototype.getDefaultCfg=function(){return{type:"combo",nodes:[],edges:[],combos:[]}},e.prototype.getShapeCfg=function(t){var e=this.get("styles"),r=this.get("bbox");if(e&&r){var n=t,o=(0,ng.isNumber)(t.size)?[t.size,t.size]:t.size,i=(0,ng.isNumber)(t.fixSize)?[t.fixSize,t.fixSize]:t.fixSize,a=o||i||xb.defaultCombo.size,s={r:(Math.max(r.width,r.height)||Math.max(a[0],a[1]))/2,width:r.width||a[0],height:r.height||a[1]};n.style=(0,rg.__assign)((0,rg.__assign)((0,rg.__assign)({},e),t.style),s);var u=t.padding||xb.defaultCombo.padding;return(0,ng.isNumber)(u)?(s.r+=u,s.width+=2*u,s.height+=2*u):(s.r=s.r+Math.max.apply(Math,u),s.width+=u[1]+u[3]||2*u[1],s.height+=u[0]+u[2]||2*u[0]),this.set("sizeCache",s),n}return t},e.prototype.calculateCanvasBBox=function(){if(!this.destroyed){var t=this.get("keyShape"),e=this.get("group"),r=this.get("bboxCache")||{},n=r.x,o=r.x,i=this.get("sizeCache"),a=Tb(t,e);if(a.centerX=(a.minX+a.maxX)/2,a.centerY=(a.minY+a.maxY)/2,i)i.width=Math.max(i.width,a.width),i.height=Math.max(i.height,a.height),this.set("sizeCache",i),"circle"===t.get("type")?(a.width=2*i.r,a.height=2*i.r):(a.width=i.width,a.height=i.height),a.minX=a.centerX-a.width/2,a.minY=a.centerY-a.height/2,a.maxX=a.centerX+a.width/2,a.maxY=a.centerY+a.height/2;else a.width=a.maxX-a.minX,a.height=a.maxY-a.minY,a.centerX=(a.minX+a.maxX)/2,a.centerY=(a.minY+a.maxY)/2;return a.x=a.minX,a.y=a.minY,a.x===n&&a.y===o||this.set("anchorPointsCache",null),a}},e.prototype.getChildren=function(){return{nodes:this.getNodes(),combos:this.getCombos()}},e.prototype.getNodes=function(){return this.get("nodes")},e.prototype.getCombos=function(){return this.get("combos")},e.prototype.addChild=function(t){switch(t.getType()){case"node":this.addNode(t);break;case"combo":this.addCombo(t);break;default:return console.warn("Only node or combo items are allowed to be added into a combo"),!1}return!0},e.prototype.addCombo=function(t){return this.get("combos").push(t),!0},e.prototype.addNode=function(t){return this.get("nodes").push(t),!0},e.prototype.removeChild=function(t){switch(t.getType()){case"node":this.removeNode(t);break;case"combo":this.removeCombo(t);break;default:return console.warn("Only node or combo items are allowed to be added into a combo"),!1}return!0},e.prototype.removeCombo=function(t){if(t){var e=this.getCombos(),r=e.indexOf(t);return r>-1&&(e.splice(r,1),!0)}},e.prototype.removeNode=function(t){if(t){var e=this.getNodes(),r=e.indexOf(t);return r>-1&&(e.splice(r,1),!0)}},e.prototype.getUpdateType=function(t){},e.prototype.getBBox=function(){return this.set("bboxCanvasCache",null),this.calculateCanvasBBox()},e.prototype.clearCache=function(){this.set("bboxCache",null),this.set("bboxCanvasCache",null),this.set("anchorPointsCache",null)},e.prototype.destroy=function(){if(!this.destroyed){var t=this.get("animate"),e=this.get("group");t&&e.stopAnimate(),e.shapeMap={},this.clearCache(),this.set("sizeCache",null),this.set("bbox",null),e.remove(),this._cfg=null,this.destroyed=!0}},e}(_E),OE=function(){function t(t){var e=this;this.edgeToBeUpdateMap={},this.throttleRefresh=(0,ng.throttle)(function(t){var r=e.graph;if(r&&!r.get("destroyed")){var n=e.edgeToBeUpdateMap;if(n){var o=Object.values(n);o.length&&(o.forEach(function(t){var e=t.edge;if(e&&!e.destroyed){var r=e.getSource(),n=e.getTarget();r&&!r.destroyed&&n&&!n.destroyed&&e.refresh(t.updateType)}}),e.edgeToBeUpdateMap={})}}},16,{trailing:!0,leading:!0}),this.graph=t,this.destroyed=!1}return t.prototype.addItem=function(t,e){var r=this.graph,n="vedge"===t?"edge":t,o=r.get("".concat(n,"Group"))||r.get("group"),i=(0,ng.upperFirst)(n),a=null,s=r.get(n+(0,ng.upperFirst)("stateStyles"))||{},u=r.get("default"+i);e.stateStyles&&(s=e.stateStyles),u&&(0,ng.each)(u,function(t,r){(0,ng.isObject)(t)&&!(0,ng.isArray)(t)?e[r]=(0,ng.deepMix)({},t,e[r]):(0,ng.isArray)(t)?e[r]=e[r]||(0,ng.clone)(u[r]):e[r]=e[r]||u[r]});var l=r.get(n+"Mapper");if(l){var c=l(e);c.stateStyles&&(s=c.stateStyles,delete c.stateStyles),(0,ng.each)(c,function(t,r){(0,ng.isObject)(t)&&!(0,ng.isArray)(t)?e[r]=(0,ng.deepMix)({},e[r],t):e[r]=c[r]||e[r]})}if(r.emit("beforeadditem",{type:t,model:e}),"edge"===t||"vedge"===t){var f=void 0,h=void 0;if(f=e.source,h=e.target,f&&(0,ng.isString)(f)&&(f=r.findById(f)),h&&(0,ng.isString)(h)&&(h=r.findById(h)),!f||!h)return void console.warn("The source or target node of edge ".concat(e.id," does not exist!"));f.getType&&"combo"===f.getType()&&(e.isComboEdge=!0),h.getType&&"combo"===h.getType()&&(e.isComboEdge=!0),a=new xE({model:e,source:f,target:h,styles:s,linkCenter:r.get("linkCenter"),group:o.addGroup()})}else if("node"===t)a=new _E({model:e,styles:s,group:o.addGroup()});else if("combo"===t){var p=e.children,d=Fb(p,r),y=void 0,v=void 0;if(isNaN(d.x)?isNaN(e.x)&&(y=100*Math.random()):y=d.x,isNaN(d.y)?isNaN(e.y)&&(v=100*Math.random()):v=d.y,isNaN(e.x)||isNaN(e.y))e.x=y,e.y=v;else{var g=e.x-y,m=e.y-v;this.updateComboSucceeds(e.id,g,m,p)}var b=o.addGroup();b.setZIndex(e.depth),a=new EE({model:e,styles:s,animate:r.get("animate"),bbox:e.collapsed?Fb([],r):d,group:b}),e.collapsed||"circle"!==a.getKeyShape().get("type")||(d.width=Math.hypot(d.height,d.width),d.height=d.width,a.set("bbox",d),a.refresh());var w=a.getModel();(p||[]).forEach(function(t){var e=r.findById(t.id);a.addChild(e),t.depth=w.depth+2})}if(a)return a.setOptimize(r.getNodes().length>r.get("optimizeThreshold")),r.get("".concat(t,"s")).push(a),r.get("itemMap")[a.get("id")]=a,r.emit("afteradditem",{item:a,model:e}),a},t.prototype.updateItem=function(t,e){var r,n,o=this,i=this.graph;if((0,ng.isString)(t)&&(t=i.findById(t)),t&&!t.destroyed){var a="";t.getType&&(a=t.getType());var s=i.get(a+"Mapper"),u=t.getModel(),l=u.x,c=u.y,f=t.getUpdateType(e);if(s){var h=s((0,ng.deepMix)({},u,e)),p=(0,ng.deepMix)({},u,h,e);h.stateStyles&&(t.set("styles",p.stateStyles),delete p.stateStyles),(0,ng.each)(p,function(t,r){e[r]=t})}else(0,ng.each)(e,function(t,r){u[r]&&(0,ng.isObject)(t)&&!(0,ng.isArray)(t)&&(e[r]=(0,rg.__assign)((0,rg.__assign)({},u[r]),e[r]))});if(i.emit("beforeupdateitem",{item:t,cfg:e}),"edge"===a){if(e.source){var d=e.source;(0,ng.isString)(d)&&(d=i.findById(d)),t.setSource(d)}if(e.target){var y=e.target;(0,ng.isString)(y)&&(y=i.findById(y)),t.setTarget(y)}t.update(e)}else if("node"===a){t.update(e,f);var v=t.getEdges();"move"===f?(0,ng.each)(v,function(t){o.edgeToBeUpdateMap[t.getID()]={edge:t,updateType:f},o.throttleRefresh()}):(null===f||void 0===f?void 0:f.includes("bbox"))&&(0,ng.each)(v,function(t){t.refresh(f)})}else if("combo"===a){if(t.update(e,f),!isNaN(e.x)||!isNaN(e.y)){var g=e.x-l||0,m=e.y-c||0;this.updateComboSucceeds(u.id,g,m)}var b=t.getEdges();if(((null===f||void 0===f?void 0:f.includes("bbox"))||"move"===f)&&"combo"===a){var w=t.get("shapeFactory"),S=u.type||"circle";(void 0===u.animate||void 0===e.animate?null===(n=null===(r=w[S])||void 0===r?void 0:r.options)||void 0===n?void 0:n.animate:u.animate||e.animate)?setTimeout(function(){if(t&&!t.destroyed){var e=t.getKeyShape();e&&!e.destroyed&&(0,ng.each)(b,function(t){t&&!t.destroyed&&t.refresh()})}},201):(0,ng.each)(b,function(t){t.refresh()})}}t.setOptimize(i.getNodes().length>i.get("optimizeThreshold")),i.emit("afterupdateitem",{item:t,cfg:e})}},t.prototype.updateCombo=function(t,e,r){var n,o,i=this,a=this.graph;if((0,ng.isString)(t)&&(t=a.findById(t)),t&&!t.destroyed){var s=t.getModel(),u=Fb(e,a,t),l=u.x,c=u.y;t.set("bbox",u);var f=l,h=c;r?(f=isNaN(s.x)?l:s.x,h=isNaN(s.y)?c:s.y):(f=isNaN(l)?s.x:l,h=isNaN(c)?s.y:c),t.update({x:f,y:h});var p=t.get("shapeFactory"),d=s.type||"circle";(void 0===s.animate?null===(o=null===(n=p[d])||void 0===n?void 0:n.options)||void 0===o?void 0:o.animate:s.animate)?setTimeout(function(){if(t&&!t.destroyed){var e=t.getKeyShape();e&&!e.destroyed&&(t.getShapeCfg(s),i.updateComboEdges(t))}},201):this.updateComboEdges(t)}},t.prototype.updateComboEdges=function(t){for(var e,r,n=t.getEdges()||[],o=0;o<n.length;o++){var i=n[o];(null===i||void 0===i?void 0:i.destroyed)||(null===(e=null===i||void 0===i?void 0:i.getSource())||void 0===e?void 0:e.destroyed)||(null===(r=null===i||void 0===i?void 0:i.getTarget())||void 0===r?void 0:r.destroyed)||i.refresh()}},t.prototype.collapseCombo=function(t,e){void 0===e&&(e=!0);var r=this.graph;(0,ng.isString)(t)&&(t=r.findById(t));var n=t.getChildren();n.nodes.forEach(function(t){r.hideItem(t,e)}),n.combos.forEach(function(t){r.hideItem(t,e)})},t.prototype.updateComboSucceeds=function(t,e,r,n){var o=this;void 0===n&&(n=[]);var i=this.graph;if(e||r){var a=n;if(!(null===a||void 0===a?void 0:a.length)){var s=i.get("comboTrees");null===s||void 0===s||s.forEach(function(e){jb(e,function(e){return e.id!==t||(a=e.children,!1)})})}null===a||void 0===a||a.forEach(function(t){var n=i.findById(t.id);if(n){var a=n.getModel();o.updateItem(t.id,{x:(a.x||0)+e,y:(a.y||0)+r})}})}},t.prototype.expandCombo=function(t,e){void 0===e&&(e=!0);var r=this.graph;(0,ng.isString)(t)&&(t=r.findById(t));var n=t.getChildren(),o=new Set;n.nodes.forEach(function(t){r.showItem(t,e),t.getEdges().forEach(function(t){return o.add(t)})}),n.combos.forEach(function(t){t.getModel().collapsed?t.show():r.showItem(t,e),t.getEdges().forEach(function(t){return o.add(t)})}),o.forEach(function(t){return t.refresh()})},t.prototype.removeItem=function(t){var e=this,r=this.graph;if((0,ng.isString)(t)&&(t=r.findById(t)),t&&!t.destroyed){var n=(0,ng.clone)(t.getModel()),o="";t.getType&&(o=t.getType()),r.emit("beforeremoveitem",{item:n,type:o});var i=r.get("".concat(o,"s")),a=i.indexOf(t);if(a>-1&&i.splice(a,1),"edge"===o){var s=r.get("v".concat(o,"s")),u=s.indexOf(t);u>-1&&s.splice(u,1)}var l=t.get("id");delete r.get("itemMap")[l];var c=r.get("comboTrees"),f=t.get("id");if("node"===o){var h=t.getModel().comboId;if(c&&h){var p=c,d=!1;c.forEach(function(t){d||jb(t,function(t){if(t.id===f&&p){var e=p.indexOf(t);return p.splice(e,1),d=!0,!1}return p=t.children,!0})})}for(var y=(b=t.getEdges()).length-1;y>=0;y--)r.removeItem(b[y],!1);h&&r.updateCombo(h)}else if("combo"===o){var v,g=t.getModel().parentId,m=!1;(c||[]).forEach(function(t){m||jb(t,function(t){return t.id!==f||(v=t,m=!0,!1)})}),v.removed=!0,v&&v.children&&v.children.forEach(function(t){e.removeItem(t.id)});var b;for(y=(b=t.getEdges()).length;y>=0;y--)r.removeItem(b[y],!1);g&&r.updateCombo(g)}t.destroy(),r.emit("afterremoveitem",{item:n,type:o})}},t.prototype.setItemState=function(t,e,r){var n=this.graph,o=e;(0,ng.isString)(r)&&(o="".concat(e,":").concat(r)),t.hasState(o)===r&&r||(0,ng.isString)(r)&&t.hasState(o)||(n.emit("beforeitemstatechange",{item:t,state:o,enabled:r}),t.setState(e,r),n.autoPaint(),n.emit("afteritemstatechange",{item:t,state:o,enabled:r}))},t.prototype.priorityState=function(t,e){var r=this.graph,n=t;(0,ng.isString)(t)&&(n=r.findById(t)),this.setItemState(n,e,!1),this.setItemState(n,e,!0)},t.prototype.clearItemStates=function(t,e){var r=this.graph;(0,ng.isString)(t)&&(t=r.findById(t)),r.emit("beforeitemstatesclear",{item:t,states:e}),t.clearStates(e),r.emit("afteritemstatesclear",{item:t,states:e})},t.prototype.refreshItem=function(t){var e=this.graph;(0,ng.isString)(t)&&(t=e.findById(t)),e.emit("beforeitemrefresh",{item:t}),t.refresh(),e.emit("afteritemrefresh",{item:t})},t.prototype.addCombos=function(t,e){var r=this,n=this.graph;(t||[]).forEach(function(t){Ib(t,function(t){var n;return e.forEach(function(e){e.id===t.id&&(e.children=t.children,e.depth=t.depth,n=e)}),n&&r.addItem("combo",n),!0})});var o=n.get("comboGroup");o&&o.sort()},t.prototype.changeItemVisibility=function(t,e){var r=this,n=this.graph;if((0,ng.isString)(t)&&(t=n.findById(t)),t){if(n.emit("beforeitemvisibilitychange",{item:t,visible:e}),t.changeVisibility(e),t.getType&&"node"===t.getType()){var o=t.getEdges();(0,ng.each)(o,function(t){(!e||t.get("source").isVisible()&&t.get("target").isVisible())&&r.changeItemVisibility(t,e)})}else if(t.getType&&"combo"===t.getType()){var i=n.get("comboTrees"),a=t.get("id"),s=[],u=!1;(i||[]).forEach(function(t){u||t.children&&0!==t.children.length&&jb(t,function(t){return t.id!==a||(s=t.children,u=!0,!1)})}),s&&(!e||e&&!t.getModel().collapsed)&&s.forEach(function(t){var o=n.findById(t.id);r.changeItemVisibility(o,e)});o=t.getEdges();(0,ng.each)(o,function(t){(!e||t.get("source").isVisible()&&t.get("target").isVisible())&&r.changeItemVisibility(t,e)})}return n.emit("afteritemvisibilitychange",{item:t,visible:e}),t}console.warn("The item to be shown or hidden does not exist!")},t.prototype.destroy=function(){this.graph=null,this.destroyed=!0},t}(),PE=function(){function t(t){this.graph=t,this.destroyed=!1}return t.prototype.updateState=function(t,e,r){var n=this.graph.get("states"),o=e;(0,ng.isString)(r)&&(o="".concat(e,":").concat(r)),n[o]||(n[o]=[]),r?n[o].push(t):n[o]=n[o].filter(function(e){return e!==t}),this.graph.set("states",n),this.graph.emit("graphstatechange",{states:n})},t.prototype.updateStates=function(t,e,r){var n=this.graph.get("states");((0,ng.isString)(e)?[e]:e).forEach(function(e){var o=e;n[o]||(n[o]=[]),(0,ng.isString)(r)&&(o="".concat(e,":").concat(r)),r?n[o].push(t):n[o]=n[o].filter(function(e){return e!==t})}),this.graph.set("states",n),this.graph.emit("graphstatechange",{states:e})},t.prototype.destroy=function(){this.graph=null,this.destroyed=!0},t}(),kE=function(t,e){return t&&e?t.replace(/\\?\{([^{}]+)\}/g,function(t,r){if("\\"===t.charAt(0))return t.slice(1);var n=e[r];return 0===n&&(n="0"),n||""}):t},CE=function(t){var e=[];if(t.length<2)throw new Error("point length must largn than 2, now it's ".concat(t.length));for(var r=0,n=t;r<n.length;r++){var o=n[r],i=o.x,a=o.y;e.push(i),e.push(a)}var s=R_(e);return s.unshift(["M",t[0].x,t[0].y]),s},TE=function(t,e,r,n){void 0===r&&(r=0),void 0===n&&(n=0);var o={x:(1-r)*t.x+r*e.x,y:(1-r)*t.y+r*e.y},i=[0,0];Nm.normalize(i,[e.x-t.x,e.y-t.y]),i&&(i[0]||i[1])||(i=[0,0]);var a=[-i[1]*n,i[0]*n];return o.x+=a[0],o.y+=a[1],o},AE=function(t,e){var r=t.length;if(!r)return"";for(var n="",o=0;o<r;o++){var i=t[o];n+=kE(0===o?"M{x} {y}":"L{x} {y}",i)}return e&&(n+="Z"),n},ME=function(t){var e=[];return t.forEach(function(t){if("A"!==t[0])for(var r=1;r<t.length;r+=2)e.push([t[r],t[r+1]]);else{var n=t.length;e.push([t[n-2],t[n-1]])}}),e},jE=function(t){if(t.length<2)throw new Error("point length must larger than 2, now it's ".concat(t.length));var e=t[0],r=t[1],n=t[t.length-1],o=t[t.length-2];t.unshift(n),t.unshift(o),t.push(e),t.push(r);for(var i=[],a=1;a<t.length-2;a+=1){var s=t[a-1].x,u=t[a-1].y,l=t[a].x,c=t[a].y,f=t[a+1].x,h=t[a+1].y,p=l+(f-s)/6,d=c+(h-u)/6,y=f-((a!==t.length-2?t[a+2].x:f)-l)/6,v=h-((a!==t.length-2?t[a+2].y:h)-c)/6;i.push(["C",p,d,y,v,f,h])}return i.unshift(["M",n.x,n.y]),i},IE=function(t,e){return Nm.scale([0,0],Nm.normalize([0,0],t),e)},NE=function(t,e){var r=[t[1]-e[1],e[0]-t[0]],n=Math.sqrt(r[0]*r[0]+r[1]*r[1]);if(0===n)throw new Error("p0 should not be equal to p1");return[r[0]/n,r[1]/n]},LE=function(t,e){return[e[0]-t[0],e[1]-t[1]]};function RE(t,e){if(!t||t.length<1)return"";if(1===t.length)return function(t){var r=[t[0][0],t[0][1]-e],n=[t[0][0],t[0][1]+e];return"M ".concat(r," A ").concat(e,",").concat(e,",0,0,0,").concat(n," A ").concat(e,",").concat(e,",0,0,0,").concat(r)}(t);if(2===t.length)return function(t){var r=Nm.scale([0,0],NE(t[0],t[1]),e),n=Nm.scale([0,0],r,-1),o=Nm.add([0,0],t[0],r),i=Nm.add([0,0],t[1],r),a=Nm.add([0,0],t[1],n),s=Nm.add([0,0],t[0],n);return"M ".concat(o," L ").concat(i," A ").concat([e,e,"0,0,0",a].join(",")," L ").concat(s," A ").concat([e,e,"0,0,0",o].join(","))}(t);for(var r=new Array(t.length),n=0;n<r.length;++n){var o=0===n?t[t.length-1]:t[n-1],i=t[n],a=Nm.scale([0,0],NE(o,i),e);r[n]=[Nm.add([0,0],o,a),Nm.add([0,0],i,a)]}var s="A ".concat([e,e,"0,0,0,"].join(","));return(r=r.map(function(t,e){var n="";return 0===e&&(n="M ".concat(r[r.length-1][1]," ")),n+="".concat(s+t[0]," L ").concat(t[1])})).join(" ")}function DE(t,e){var r,n,o,i=t.length;if(!t||i<1)return"";if(1===i)return n=[(r=t)[0][0],r[0][1]-e],o=[r[0][0],r[0][1]+e],"M ".concat(n," A ").concat([e,e,"0,0,0",o].join(",")," A ").concat([e,e,"0,0,0",n].join(","));if(2===i)return function(t){var r=LE(t[0],t[1]),n=IE(r,e),o=Nm.add([0,0],t[0],Nm.scale([0,0],n,-1)),i=Nm.add([0,0],t[1],n),a=1.2*e,s=IE(Nm.normalize([0,0],r),a),u=Nm.scale([0,0],s,-1),l=Nm.add([0,0],o,u),c=Nm.add([0,0],i,u),f=Nm.add([0,0],o,s);return"M ".concat(o," C ").concat([l,c,i].join(",")," S ").concat([f,o].join(",")," Z")}(t);for(var a=t.map(function(e,r){var n=t[(r+1)%i];return{p:e,v:Nm.normalize([0,0],LE(e,n))}}),s=0;s<a.length;++s){var u=s>0?s-1:i-1,l=Nm.normalize([0,0],Nm.add([0,0],a[u].v,Nm.scale([0,0],a[s].v,-1)));a[s].p=Nm.add([0,0],a[s].p,Nm.scale([0,0],l,e))}return a.map(function(t){var e=t.p;return{x:e[0],y:e[1]}})}var BE=function(t,e){for(var r=[],n=0;n<5;n++){var o=Math.cos((18+72*n)/180*Math.PI)*t,i=Math.sin((18+72*n)/180*Math.PI)*t,a=Math.cos((54+72*n)/180*Math.PI)*e,s=Math.sin((54+72*n)/180*Math.PI)*e;0===n?r.push(["M",o,-i]):r.push(["L",o,-i]),r.push(["L",a,-s])}return r.push(["Z"]),r},FE=function(t,e,r){return(t.y-r.y)*(e.x-r.x)-(t.x-r.x)*(e.y-r.y)},GE=function(t){var e=t.map(function(t){return{x:t.getModel().x,y:t.getModel().y}});e.sort(function(t,e){return t.x===e.x?t.y-e.y:t.x-e.x});for(var r={},n=e.length-1;n>=0;n--){var o=e[n],i=o.x,a=o.y;r["".concat(i,"-").concat(a)]&&e.splice(n,1),r["".concat(i,"-").concat(a)]=!0}if(1===e.length)return e;var s=[];for(n=0;n<e.length;n++){for(;s.length>=2&&FE(s[s.length-2],s[s.length-1],e[n])<=0;)s.pop();s.push(e[n])}var u=[];for(n=e.length-1;n>=0;n--){for(;u.length>=2&&FE(u[u.length-2],u[u.length-1],e[n])<=0;)u.pop();u.push(e[n])}return u.pop(),s.pop(),s.concat(u)},UE={maxRoutingIterations:100,maxMarchingIterations:100,pixelGroupSize:2,edgeR0:10,edgeR1:10,nodeR0:5,nodeR1:10,morphBuffer:5,threshold:.001,skip:16,nodeInfluenceFactor:1,edgeInfluenceFactor:1,negativeNodeInfluenceFactor:-.5};function zE(t,e,r){var n=!1,o=function(t,r){return e.cells[t+r*e.width]},i=function(t,e){var n=0;return o(t-1,e-1)>=r&&(n+=1),o(t,e-1)>r&&(n+=2),o(t-1,e)>r&&(n+=4),o(t,e)>r&&(n+=8),n},a=function(r,n){for(var o,a,s=r,u=n,l=0;l<e.width*e.height;l++){if(o=s,a=u,t.findIndex(function(t){return t.x===s&&t.y===u})>-1){if(t[0].x===s&&t[0].y===u)return!0}else t.push({x:s,y:u});var c=i(s,u);switch(c){case-1:return console.warn("Marched out of bounds"),!0;case 0:case 3:case 2:case 7:s++;break;case 12:case 14:case 4:s--;break;case 6:0===o&&(-1===a?s-=1:s+=1);break;case 1:case 13:case 5:u--;break;case 9:1===o&&(0===a?u-=1:u+=1);break;case 10:case 8:case 11:u++;break;default:return console.warn("Marching squares invalid state: ".concat(c)),!0}}};this.march=function(){for(var t=0;t<e.width&&!n;t+=1)for(var s=0;s<e.height&&!n;s+=1)o(t,s)>r&&15!==i(t,s)&&(n=a(t,s));return n}}var VE=function(t,e,r){var n=null,o=Number.POSITIVE_INFINITY;return e.forEach(function(e){var i={x:t.getModel().x,y:t.getModel().y},a={x:e.getModel().x,y:e.getModel().y},s=cb(i,a),u=new ob(i.x,i.y,a.x,a.y),l=r.reduce(function(t,e){return ub(e,u)>0?t+1:t},0);s*Math.pow(l+1,2)<o&&(n=e,o=s*Math.pow(l+1,2))}),n},HE=function(t,e){var r=Number.POSITIVE_INFINITY,n=null;return t.forEach(function(t){var o=ub(t,e);o>=0&&o<r&&(n=t,r=o)}),n},WE=function(t,e,r,n){var o=[],i=[];i.push(t);for(var a=!0,s=0,u=function(t,e){var r=!1;return e.forEach(function(e){r||(hb(t,{x:e.x1,y:e.y1})||hb(t,{x:e.x2,y:e.y2}))&&(r=!0)}),r},l=function(t,e){for(var r=0,n=e;r<n.length;r++){var o=n[r].getBBox(),i=[[o.x,o.y],[o.x+o.width,o.y],[o.x,o.y+o.height],[o.x+o.width,o.y+o.height]];if(eb(i,t.x,t.y))return!0}return!1};a&&s<r;){a=!1;for(var c=function(){var t=i.pop(),r=HE(e,t);if(r){var c=sb(r,t),f=c[0];if(2===c[1]){var h=function(s){for(var c=n,h=XE(r,c,f,s),p=u(h,i)||u(h,o),d=l(h,e);!p&&d&&c>=1;)h=XE(r,c/=1.5,f,s),p=u(h,i)||u(h,o),d=l(h,e);!h||p||s&&d||(i.push(new ob(t.x1,t.y1,h.x,h.y)),i.push(new ob(h.x,h.y,t.x2,t.y2)),a=!0)};h(!0),a||h(!1)}}a||o.push(t),s+=1};!a&&i.length;)c()}for(;i.length;)o.push(i.pop());return o};var qE=function(t,e,r){var n=Object.assign(UE,r),o=lb(t.map(function(t){return{x:t.getModel().x,y:t.getModel().y}})),i=[],a=[];(t=t.sort(function(t,e){return cb({x:t.getModel().x,y:t.getModel().y},o)-cb({x:e.getModel().x,y:e.getModel().y},o)})).forEach(function(t){(function(t,e,r,n,o){var i=VE(t,r,e);if(null===i)return[];var a=new ob(t.getModel().x,t.getModel().y,i.getModel().x,i.getModel().y);return function(t){for(var r=[];t.length>0;){var n=t.pop();if(0===t.length){r.push(n);break}var o=t.pop(),i=new ob(n.x1,n.y1,o.x2,o.y2);HE(e,i)?(r.push(n),t.push(o)):t.push(i)}return r}(WE(a,e,n,o))})(t,e,i,n.maxRoutingIterations,n.morphBuffer).forEach(function(t){a.push(t)}),i.push(t)});for(var s,u,l,c,f,h=function(t,e,r){var n={minX:Number.POSITIVE_INFINITY,minY:Number.POSITIVE_INFINITY,maxX:Number.NEGATIVE_INFINITY,maxY:Number.NEGATIVE_INFINITY,width:0,height:0,x:0,y:0},o=[];t.forEach(function(t){o.push(t.getBBox())}),e.forEach(function(t){o.push(t.getBBox())});for(var i=0,a=o;i<a.length;i++){var s=a[i];n.minX=(s.minX<n.minX?s.minX:n.minX)-r,n.minY=(s.minY<n.minY?s.minY:n.minY)-r,n.maxX=(s.maxX>n.maxX?s.maxX:n.maxX)+r,n.maxY=(s.maxY>n.maxY?s.maxY:n.maxY)+r}return n.width=n.maxX-n.minX,n.height=n.maxY-n.minY,n.x=n.minX,n.y=n.minY,n}(t,a,n.nodeR0),p=(s=h.width,u=h.height,l=n.pixelGroupSize,c=Math.ceil(s/l),f=Math.ceil(u/l),{cells:new Float32Array(Math.max(0,c*f)).fill(0),width:c,height:f}),d=[],y=[],v=0;v<n.maxMarchingIterations;v++)if(YE(t,e,a,h,p,n),y=[],new zE(d=[],p,n.threshold).march()){var g=d.map(function(t){return{x:Math.round(t.x*n.pixelGroupSize+h.minX),y:Math.round(t.y*n.pixelGroupSize+h.minY)}});if(g){var m=g.length;if(n.skip>1)for(m=Math.floor(g.length/n.skip);m<3&&n.skip>1;)n.skip-=1,m=Math.floor(g.length/n.skip);for(var b=0,w=0;w<m;w+=1,b+=n.skip)y.push({x:g[b].x,y:g[b].y})}if(y&&function(){for(var e=0,r=t;e<r.length;e++){var n=r[e],o=y.map(function(t){return[t.x,t.y]});if(!eb(o,n.getBBox().centerX,n.getBBox().centerY))return!1}return!0}())return y;if(n.threshold*=.9,v<=.5*n.maxMarchingIterations)n.memberInfluenceFactor*=1.2,n.edgeInfluenceFactor*=1.2;else{if(!(0!==n.nonMemberInfluenceFactor&&e.length>0))break;n.nonMemberInfluenceFactor*=.8}}return y};function YE(t,e,r,n,o,i){function a(t,e){var r=Math.floor((t-e)/i.pixelGroupSize);return r<0?0:r}function s(t,e){return t*i.pixelGroupSize+e}var u=(i.nodeR0-i.nodeR1)*(i.nodeR0-i.nodeR1),l=(i.edgeR0-i.edgeR1)*(i.edgeR0-i.edgeR1),c=function(t,e){return[Math.min(a(t.minX,e+n.minX),o.width),Math.min(a(t.minY,e+n.minY),o.height),Math.min(a(t.maxX,-e+n.minX),o.width),Math.min(a(t.maxY,-e+n.minY),o.height)]},f=function(t,e){for(var r=t.getBBox(),a=c(r,i.nodeR1),u=a[0],l=a[1],f=a[2],h=a[3],p=l;p<h;p+=1)for(var d=u;d<f;d+=1)if(!(e<0&&o[d+p*o.width]<=0)){var y=s(d,n.minX),v=s(p,n.minY),g=pb({x:y,y:v},{x:r.minX,y:r.minY,width:r.width,height:r.height});if(g<Math.pow(i.nodeR1,2)){var m=Math.sqrt(g)-i.nodeR1;o.cells[d+p*o.width]+=e*m*m}}};i.nodeInfluenceFactor&&t.forEach(function(t){f(t,i.nodeInfluenceFactor/u)}),i.edgeInfluenceFactor&&r.forEach(function(t){!function(t,e){for(var r=t.getBBox(),a=c(r,i.edgeR1),u=a[0],l=a[1],f=a[2],h=a[3],p=l;p<h;p+=1)for(var d=u;d<f;d+=1)if(!(e<0&&o.cells[d+p*o.width]<=0)){var y=s(d,n.minX),v=s(p,n.minY),g=fb({x:y,y:v},t);if(g<Math.pow(i.edgeR1,2)){var m=Math.sqrt(g)-i.edgeR1;o.cells[d+p*o.width]+=e*m*m}}}(t,i.edgeInfluenceFactor/l)}),i.negativeNodeInfluenceFactor&&e.forEach(function(t){f(t,i.negativeNodeInfluenceFactor/u)})}function XE(t,e,r,n){var o=t.getBBox(),i=r[0],a=r[1],s=r[2],u=r[3],l={topLeft:{x:o.minX-e,y:o.minY-e},topRight:{x:o.maxX+e,y:o.minY-e},bottomLeft:{x:o.minX-e,y:o.maxY+e},bottomRight:{x:o.maxX+e,y:o.maxY+e}},c=o.height*o.width;function f(t,e){return o.width*(.5*(t.y-o.minY+(e.y-o.minY)))}if(a)return i?n?l.topLeft:l.bottomRight:s?n?l.bottomLeft:l.topRight:f(a,u)<.5*c?a.y>u.y?n?l.topLeft:l.bottomRight:n?l.topRight:l.bottomLeft:a.y<u.y?n?l.bottomLeft:l.topRight:n?l.bottomRight:l.topLeft;if(u){if(i)return n?l.topRight:l.bottomLeft;if(s)return n?l.bottomRight:l.topLeft}return f(i,s)<.5*c?i.x>s.x?n?l.topLeft:l.bottomRight:n?l.bottomLeft:l.topRight:i.x<s.x?n?l.topRight:l.bottomLeft:n?l.bottomRight:l.topLeft}var JE=function(){function t(t,e){this.cfg=(0,ng.deepMix)(this.getDefaultCfg(),e),this.graph=t,this.id=this.cfg.id,this.group=this.cfg.group,this.members=this.cfg.members.map(function(e){return(0,ng.isString)(e)?t.findById(e):e}),this.nonMembers=this.cfg.nonMembers.map(function(e){return(0,ng.isString)(e)?t.findById(e):e}),this.setPadding(),this.setType(),this.path=this.calcPath(this.members,this.nonMembers),this.render()}return t.prototype.getDefaultCfg=function(){return{id:"g6-hull",type:"round-convex",members:[],nonMembers:[],style:{fill:"lightblue",stroke:"blue",opacity:.2},padding:10}},t.prototype.setPadding=function(){var t=this.members.length&&this.members[0].getKeyShape().getCanvasBBox().width/2;this.padding=this.cfg.padding>0?this.cfg.padding+t:10+t,this.cfg.bubbleCfg={nodeR0:this.padding-t,nodeR1:this.padding-t,morphBuffer:this.padding-t}},t.prototype.setType=function(){this.type=this.cfg.type,this.members.length<3&&(this.type="round-convex"),"round-convex"!==this.type&&"smooth-convex"!==this.type&&"bubble"!==this.type&&(console.warn("The hull type should be either round-convex, smooth-convex or bubble, round-convex is used by default."),this.type="round-convex")},t.prototype.calcPath=function(t,e){var r,n,o;switch(this.type){case"round-convex":n=G_(o=RE((r=GE(t)).map(function(t){return[t.x,t.y]}),this.padding));break;case"smooth-convex":2===(r=GE(t)).length?n=G_(o=RE(r.map(function(t){return[t.x,t.y]}),this.padding)):r.length>2&&(o=DE(r.map(function(t){return[t.x,t.y]}),this.padding),n=jE(o));break;case"bubble":n=(r=qE(t,e,this.cfg.bubbleCfg)).length>=2&&jE(r)}return n},t.prototype.render=function(){this.group.addShape("path",{attrs:(0,rg.__assign)({path:this.path},this.cfg.style),id:this.id,name:this.cfg.id,capture:!1}),this.group.toBack()},t.prototype.addMember=function(t){if(t){(0,ng.isString)(t)&&(t=this.graph.findById(t)),this.members.push(t);var e=this.nonMembers.indexOf(t);return e>-1&&this.nonMembers.splice(e,1),this.updateData(this.members,this.nonMembers),!0}},t.prototype.addNonMember=function(t){if(t){(0,ng.isString)(t)&&(t=this.graph.findById(t)),this.nonMembers.push(t);var e=this.members.indexOf(t);return e>-1&&this.members.splice(e,1),this.updateData(this.members,this.nonMembers),!0}},t.prototype.removeMember=function(t){if(t){(0,ng.isString)(t)&&(t=this.graph.findById(t));var e=this.members.indexOf(t);return e>-1&&(this.members.splice(e,1),this.updateData(this.members,this.nonMembers),!0)}},t.prototype.removeNonMember=function(t){if(t){(0,ng.isString)(t)&&(t=this.graph.findById(t));var e=this.nonMembers.indexOf(t);return e>-1&&(this.nonMembers.splice(e,1),this.updateData(this.members,this.nonMembers),!0)}},t.prototype.updateData=function(t,e){var r=this;this.group.findById(this.id).remove(),t&&(this.members=t.map(function(t){return(0,ng.isString)(t)?r.graph.findById(t):t})),e&&(this.nonMembers=e.map(function(t){return(0,ng.isString)(t)?r.graph.findById(t):t})),this.path=this.calcPath(this.members,this.nonMembers),this.render()},t.prototype.updateStyle=function(t){this.group.findById(this.id).attr((0,rg.__assign)({},t))},t.prototype.updateCfg=function(t){var e=this;this.cfg=(0,ng.deepMix)(this.cfg,t),this.id=this.cfg.id,this.group=this.cfg.group,t.members&&(this.members=this.cfg.members.map(function(t){return(0,ng.isString)(t)?e.graph.findById(t):t})),t.nonMembers&&(this.nonMembers=this.cfg.nonMembers.map(function(t){return(0,ng.isString)(t)?e.graph.findById(t):t})),this.setPadding(),this.setType(),this.path=this.calcPath(this.members,this.nonMembers),this.render()},t.prototype.contain=function(t){var e,r,n=this,o=(e=(0,ng.isString)(t)?this.graph.findById(t):t).getKeyShape();if("path"===e.get("type"))r=ME(o.attr("path"));else{var i=o.getCanvasBBox();r=[[i.minX,i.minY],[i.maxX,i.minY],[i.maxX,i.maxY],[i.minX,i.maxY]]}return r=r.map(function(t){var e=n.graph.getPointByCanvas(t[0],t[1]);return[e.x,e.y]}),nb(r,ME(this.path))},t.prototype.destroy=function(){this.group.remove(),this.cfg=null},t}(),KE=hg,QE=function(t){function e(e){var r=t.call(this)||this;return r.sortCombos=(0,ng.debounce)(function(){var t=r.get("comboSorted");if(r&&!r.destroyed&&!t){r.set("comboSorted",!0);var e=[],n={};(r.get("comboTrees")||[]).forEach(function(t){jb(t,function(t){return e[t.depth]?e[t.depth].push(t.id):e[t.depth]=[t.id],n[t.id]=t.depth,!0})}),(r.getEdges().concat(r.get("vedges"))||[]).forEach(function(t){var r=t.getModel(),o=n[r.source]||0,i=n[r.target]||0,a=Math.max(o,i);e[a]?e[a].push(r.id):e[a]=[r.id]}),e.forEach(function(t){if(t&&t.length)for(var e=t.length-1;e>=0;e--){var n=r.findById(t[e]);n&&n.toFront()}})}},500,!1),r.cfg=(0,ng.deepMix)(r.getDefaultCfg(),e),r.init(),r.animating=!1,r.destroyed=!1,r.cfg.enabledStack&&(r.undoStack=new Am(r.cfg.maxStep),r.redoStack=new Am(r.cfg.maxStep)),r}return(0,rg.__extends)(e,t),e.prototype.init=function(){this.initCanvas();var t=new sE(this),e=new Hb(this),r=new OE(this),n=new PE(this);this.set({viewController:t,modeController:e,itemController:r,stateController:n}),this.initLayoutController(),this.initEventController(),this.initGroups(),this.initPlugins()},e.prototype.initGroups=function(){var t=this.get("canvas");if(t){var e=(t.get("el")||{}).id,r=void 0===e?"g6":e,n=t.addGroup({id:"".concat(r,"-root"),className:xb.rootContainerClassName});if(this.get("groupByTypes")){var o=n.addGroup({id:"".concat(r,"-edge"),className:xb.edgeContainerClassName}),i=n.addGroup({id:"".concat(r,"-node"),className:xb.nodeContainerClassName}),a=n.addGroup({id:"".concat(r,"-combo"),className:xb.comboContainerClassName});a.toBack(),this.set({nodeGroup:i,edgeGroup:o,comboGroup:a})}var s=n.addGroup({id:"".concat(r,"-delegate"),className:xb.delegateContainerClassName});this.set({delegateGroup:s}),this.set("group",n)}},e.prototype.getDefaultCfg=function(){return{container:void 0,width:void 0,height:void 0,renderer:"canvas",modes:{},plugins:[],data:{},fitViewPadding:10,minZoom:.02,maxZoom:10,event:!0,groupByTypes:!0,directed:!1,autoPaint:!0,nodes:[],edges:[],combos:[],vedges:[],itemMap:{},linkCenter:!1,defaultNode:{},defaultEdge:{},nodeStateStyles:{},edgeStateStyles:{},states:{},animate:!1,animateCfg:{onFrame:void 0,duration:500,easing:"easeLinear"},callback:void 0,enabledStack:!1,maxStep:10,tooltips:[],optimizeThreshold:1e3}},e.prototype.set=function(t,e){return(0,ng.isPlainObject)(t)?this.cfg=(0,rg.__assign)((0,rg.__assign)({},this.cfg),t):this.cfg[t]=e,"enabledStack"!==t||!e||this.undoStack||this.redoStack||(this.undoStack=new Am(this.cfg.maxStep),this.redoStack=new Am(this.cfg.maxStep)),this},e.prototype.get=function(t){var e;return null===(e=this.cfg)||void 0===e?void 0:e[t]},e.prototype.getGroup=function(){return this.get("group")},e.prototype.getContainer=function(){return this.get("container")},e.prototype.getMinZoom=function(){return this.get("minZoom")},e.prototype.setMinZoom=function(t){return this.set("minZoom",t)},e.prototype.getMaxZoom=function(){return this.get("maxZoom")},e.prototype.setMaxZoom=function(t){return this.set("maxZoom",t)},e.prototype.getWidth=function(){return this.get("width")},e.prototype.getHeight=function(){return this.get("height")},e.prototype.clearItemStates=function(t,e){(0,ng.isString)(t)&&(t=this.findById(t));var r=this.get("itemController");e||(e=t.get("states")),r.clearItemStates(t,e),this.get("stateController").updateStates(t,e,!1)},e.prototype.node=function(t){"function"==typeof t&&this.set("nodeMapper",t)},e.prototype.edge=function(t){"function"==typeof t&&this.set("edgeMapper",t)},e.prototype.combo=function(t){"function"==typeof t&&this.set("comboMapper",t)},e.prototype.findById=function(t){return this.get("itemMap")[t]},e.prototype.find=function(t,e){var r,n=this.get("".concat(t,"s"));return(0,ng.each)(n,function(t,n){if(e(t,n))return r=t}),r},e.prototype.findAll=function(t,e){var r=[];return(0,ng.each)(this.get("".concat(t,"s")),function(t,n){e(t,n)&&r.push(t)}),r},e.prototype.findAllByState=function(t,e,r){return r?this.findAll(t,function(t){return t.hasState(e)&&r(t)}):this.findAll(t,function(t){return t.hasState(e)})},e.prototype.translate=function(t,e,r,n){var o=this,i=this.get("group"),a=(0,ng.clone)(i.getMatrix());if(a||(a=[1,0,0,0,1,0,0,0,1]),r){var s=zb({animateCfg:n,callback:function(){return o.emit("viewportchange",{action:"translate",matrix:i.getMatrix()})}});Km(i,{x:i.getCanvasBBox().x+t,y:i.getCanvasBBox().y+e},r,s||{duration:500,easing:"easeCubic"})}else a=KE(a,[["t",t,e]]),i.setMatrix(a),this.emit("viewportchange",{action:"translate",matrix:a}),this.autoPaint()},e.prototype.moveTo=function(t,e,r,n){var o=this.get("group");Km(o,{x:t,y:e},r,n||{duration:500,easing:"easeCubic"}),this.emit("viewportchange",{action:"move",matrix:o.getMatrix()})},e.prototype.fitView=function(t,e,r,n){t&&this.set("fitViewPadding",t);var o=this.get("viewController");e?o.fitViewByRules(e,r,n):o.fitView(r,n),this.autoPaint()},e.prototype.fitCenter=function(t,e){this.get("viewController").fitCenter(t,e),this.autoPaint()},e.prototype.addBehaviors=function(t,e){return this.get("modeController").manipulateBehaviors(t,e,!0),this},e.prototype.removeBehaviors=function(t,e){return this.get("modeController").manipulateBehaviors(t,e,!1),this},e.prototype.updateBehavior=function(t,e,r){return this.get("modeController").updateBehavior(t,e,r),this},e.prototype.zoom=function(t,e,r,n){var o=this,i=this.get("group"),a=(0,ng.clone)(i.getMatrix())||[1,0,0,0,1,0,0,0,1],s=this.get("minZoom"),u=this.get("maxZoom"),l=this.getZoom()||1,c=l*t,f=t,h=!1;if(s&&c<s?(f=s/l,h=!0):u&&c>u&&(f=u/l,h=!0),a=KE(a,e?[["t",-e.x,-e.y],["s",f,f],["t",e.x,e.y]]:[["s",f,f]]),r){var p=(0,ng.clone)(i.getMatrix());p||(p=[1,0,0,0,1,0,0,0,1]);var d=p[0],y=d*f,v=zb({animateCfg:n,callback:function(){return o.emit("viewportchange",{action:"zoom",matrix:i.getMatrix()})}});i.animate(function(t){if(1===t)p=a;else{var r=yb(d,y,t)/p[0];p=KE(p,e?[["t",-e.x,-e.y],["s",r,r],["t",e.x,e.y]]:[["s",r,r]])}return{matrix:p}},v)}else i.setMatrix(a),this.emit("viewportchange",{action:"zoom",matrix:a}),this.autoPaint();return!h},e.prototype.zoomTo=function(t,e,r,n){var o=t/this.getZoom();return this.zoom(o,e,r,n)},e.prototype.focusItem=function(t,e,r){var n=this.get("viewController"),o=!1;e?o=!0:void 0===e&&(o=this.get("animate"));var i={};r?i=r:void 0===r&&(i=this.get("animateCfg")),n.focus(t,o,i),this.autoPaint()},e.prototype.focusItems=function(t,e,r,n){this.get("viewController").focusItems(t,e,r,n)},e.prototype.autoPaint=function(){this.get("autoPaint")&&this.paint()},e.prototype.paint=function(){this.emit("beforepaint"),this.get("canvas").draw(),this.emit("afterpaint")},e.prototype.getPointByClient=function(t,e){return this.get("viewController").getPointByClient(t,e)},e.prototype.getClientByPoint=function(t,e){return this.get("viewController").getClientByPoint(t,e)},e.prototype.getPointByCanvas=function(t,e){return this.get("viewController").getPointByCanvas(t,e)},e.prototype.getCanvasByPoint=function(t,e){return this.get("viewController").getCanvasByPoint(t,e)},e.prototype.getGraphCenterPoint=function(){var t=this.get("group").getCanvasBBox();return{x:(t.minX+t.maxX)/2,y:(t.minY+t.maxY)/2}},e.prototype.getViewPortCenterPoint=function(){return this.getPointByCanvas(this.get("width")/2,this.get("height")/2)},e.prototype.showItem=function(t,e){void 0===e&&(e=!0);var r=this.get("itemController").changeItemVisibility(t,!0);if(e&&this.get("enabledStack")){var n=r.getID(),o={},i={};switch(r.getType()){case"node":o.nodes=[{id:n,visible:!1}],i.nodes=[{id:n,visible:!0}];break;case"edge":o.nodes=[{id:n,visible:!1}],i.edges=[{id:n,visible:!0}];break;case"combo":o.nodes=[{id:n,visible:!1}],i.combos=[{id:n,visible:!0}]}this.pushStack("visible",{before:o,after:i})}},e.prototype.hideItem=function(t,e){void 0===e&&(e=!0);var r=this.get("itemController").changeItemVisibility(t,!1);if(e&&this.get("enabledStack")){var n=r.getID(),o={},i={};switch(r.getType()){case"node":o.nodes=[{id:n,visible:!0}],i.nodes=[{id:n,visible:!1}];break;case"edge":o.nodes=[{id:n,visible:!0}],i.edges=[{id:n,visible:!1}];break;case"combo":o.nodes=[{id:n,visible:!0}],i.combos=[{id:n,visible:!1}]}this.pushStack("visible",{before:o,after:i})}},e.prototype.refreshItem=function(t){this.get("itemController").refreshItem(t)},e.prototype.setAutoPaint=function(t){this.set("autoPaint",t),this.get("canvas").set("autoDraw",t)},e.prototype.remove=function(t,e){void 0===e&&(e=!0),this.removeItem(t,e)},e.prototype.removeItem=function(t,e){void 0===e&&(e=!0);var r=t;if((0,ng.isString)(t)&&(r=this.findById(t)),!r&&(0,ng.isString)(t))console.warn("The item ".concat(t," to be removed does not exist!"));else if(r){var n="";if(r.getType&&(n=r.getType()),e&&this.get("enabledStack")){var o=(0,rg.__assign)((0,rg.__assign)({},r.getModel()),{itemType:n}),i={};switch(n){case"node":i.nodes=[o],i.edges=[];for(var a=r.getEdges(),s=a.length-1;s>=0;s--)i.edges.push((0,rg.__assign)((0,rg.__assign)({},a[s].getModel()),{itemType:"edge"}));break;case"edge":i.edges=[o];break;case"combo":i.combos=[o]}this.pushStack("delete",{before:i,after:{}})}if("node"===n)r.getModel().comboId&&this.updateComboTree(r,void 0,!1);if(this.get("itemController").removeItem(r),"combo"===n){var u=Bb(this.get("comboTrees"));this.set("comboTrees",u)}}},e.prototype.innerAddItem=function(t,e,r){if(!function(t,e){if("node"===t||"combo"===t){if(e.id&&!(0,ng.isString)(e.id))return console.warn("G6 Warning Tips: missing 'id' property, or the 'id' %c".concat(e.id,"%c is not a string."),"font-size: 20px; color: red;",""),!1}else if(!("edge"!==t||e.source&&e.target))return console.warn("G6 Warning Tips: missing 'source' or 'target' for the edge."),!1;return!0}(t,e))return!1;if(!e.id||!this.findById(e.id)){var n,o=this.get("comboTrees")||[];if("combo"===t){var i=this.get("itemMap"),a=!1;if(o.forEach(function(o){a||Ib(o,function(o){if(e.parentId===o.id){a=!0;var s=(0,rg.__assign)({id:e.id,depth:o.depth+2},e);o.children?o.children.push(s):o.children=[s],e.depth=s.depth,n=r.addItem(t,e)}var u=i[o.id];return a&&u&&u.getType&&"combo"===u.getType()&&r.updateCombo(u,o.children),!0})}),!a){var s=(0,rg.__assign)({id:e.id,depth:0},e);e.depth=s.depth,o.push(s),n=r.addItem(t,e)}this.set("comboTrees",o),e.collapsed&&(this.collapseCombo(n,!1),this.updateCombo(n))}else if("node"===t&&(0,ng.isString)(e.comboId)&&o){var u;(u=this.findById(e.comboId))&&u.getType&&"combo"!==u.getType()&&console.warn("'".concat(e.comboId,"' is not a id of a combo in the graph, the node will be added without combo.")),n=r.addItem(t,e);var l=this.get("itemMap"),c=!1,f=!1;o.forEach(function(t){f||c||Ib(t,function(t){if(t.id===e.id)return f=!0,!1;if(e.comboId===t.id&&!f){c=!0;var n=(0,ng.clone)(e);n.itemType="node",t.children?t.children.push(n):t.children=[n],n.depth=t.depth+1}return c&&l[t.id].getType&&"combo"===l[t.id].getType()&&r.updateCombo(l[t.id],t.children),!0})})}else n=r.addItem(t,e);if("node"===t&&e.comboId||"combo"===t&&e.parentId)(u=this.findById(e.comboId||e.parentId))&&u.getType&&"combo"===u.getType()&&u.addChild(n);return n}console.warn("This item exists already. Be sure the id %c".concat(e.id,"%c is unique."),"font-size: 20px; color: red;","")},e.prototype.addItem=function(t,e,r,n){void 0===r&&(r=!0),void 0===n&&(n=!0);var o=this.get("comboSorted");this.set("comboSorted",o&&!n);var i=this.get("itemController"),a=this.innerAddItem(t,e,i);if(!1===a||!0===a)return a;var s=this.get("combos");if(s&&s.length>0&&this.sortCombos(),this.autoPaint(),r&&this.get("enabledStack")){var u=(0,rg.__assign)((0,rg.__assign)({},a.getModel()),{itemType:t}),l={};switch(t){case"node":l.nodes=[u];break;case"edge":l.edges=[u];break;case"combo":l.combos=[u]}this.pushStack("add",{before:{},after:l})}return a},e.prototype.addItems=function(t,e,r){void 0===t&&(t=[]),void 0===e&&(e=!0),void 0===r&&(r=!0);var n=this.get("comboSorted");this.set("comboSorted",n&&!r);for(var o=this.get("itemController"),i=[],a=0;a<t.length;a++){"edge"!==(s=t[a]).type&&"vedge"!==s.type?i.push(this.innerAddItem(s.type,s.model,o)):i.push(void 0)}for(a=0;a<t.length;a++){var s;"edge"!==(s=t[a]).type&&"vedge"!==s.type||(i[a]=this.innerAddItem(s.type,s.model,o))}if(r){var u=this.get("combos");u&&u.length>0&&this.sortCombos()}if(this.autoPaint(),e&&this.get("enabledStack")){var l={nodes:[],edges:[],combos:[]};for(a=0;a<t.length;a++){var c=t[a].type,f=i[a];if(f&&!0!==f){var h=(0,rg.__assign)((0,rg.__assign)({},f.getModel()),{itemType:c});switch(c){case"node":l.nodes.push(h);break;case"edge":l.edges.push(h);break;case"combo":l.combos.push(h)}}}this.pushStack("addItems",{before:{},after:l})}return i},e.prototype.add=function(t,e,r,n){return void 0===r&&(r=!0),void 0===n&&(n=!0),this.addItem(t,e,r,n)},e.prototype.updateItem=function(t,e,r){var n=this;void 0===r&&(r=!0);var o,i=this.get("itemController");o=(0,ng.isString)(t)?this.findById(t):t;var a,s=r&&this.get("enabledStack");s&&(a=(0,ng.clone)(o.getModel()));var u="";o.getType&&(u=o.getType());var l=(0,rg.__spreadArray)([],o.getStates(),!0);if("combo"===u&&(0,ng.each)(l,function(t){return n.setItemState(o,t,!1)}),i.updateItem(o,e),"combo"===u&&(0,ng.each)(l,function(t){return n.setItemState(o,t,!0)}),s){var c={nodes:[],edges:[],combos:[]},f={nodes:[],edges:[],combos:[]},h=(0,rg.__assign)({id:a.id},e);switch(u){case"node":c.nodes.push(a),f.nodes.push(h);break;case"edge":c.edges.push(a),f.edges.push(h);break;case"combo":c.combos.push(a),f.combos.push(h)}this.pushStack("update",{before:c,after:f})}},e.prototype.update=function(t,e,r){void 0===r&&(r=!0),this.updateItem(t,e,r)},e.prototype.setItemState=function(t,e,r){(0,ng.isString)(t)&&(t=this.findById(t)),this.get("itemController").setItemState(t,e,r),this.get("stateController").updateState(t,e,r)},e.prototype.priorityState=function(t,e){this.get("itemController").priorityState(t,e)},e.prototype.data=function(t){Vb(t),this.set("data",t)},e.prototype.render=function(){var t=this;this.set("comboSorted",!1);var e=this.get("data");if(this.get("enabledStack")&&this.clearStack(),!e)throw new Error("data must be defined first");var r=e.nodes,n=void 0===r?[]:r,o=e.edges,i=void 0===o?[]:o,a=e.combos,s=void 0===a?[]:a;if(this.clear(!0),this.emit("beforerender"),t.addItems(n.map(function(t){return{type:"node",model:t}}),!1,!1),0!==(null===s||void 0===s?void 0:s.length)){var u=Db(s,n);this.set("comboTrees",u),t.addCombos(s)}t.addItems(i.map(function(t){return{type:"edge",model:t}}),!1,!1);var l=t.get("animate");(t.get("fitView")||t.get("fitCenter"))&&t.set("animate",!1);var c=t.get("layoutController");if(c){if(c.layout(f),this.destroyed)return}else f();function f(){(t.get("comboTrees")||[]).forEach(function(e){Ib(e,function(e){var r=t.findById(e.id);return"combo"===r.getType()&&e.collapsed&&(t.collapseCombo(e.id,!1),t.updateCombo(r)),!0})}),t.get("fitView")?t.fitView():t.get("fitCenter")&&t.fitCenter(),t.autoPaint(),t.emit("afterrender"),(t.get("fitView")||t.get("fitCenter"))&&t.set("animate",l),setTimeout(function(){var e;null===(e=t.getCombos())||void 0===e||e.forEach(function(t){t.set("animate",!0)})},0)}this.get("groupByTypes")||(s&&0!==s.length?this.sortCombos():e.nodes&&e.edges&&e.nodes.length<e.edges.length?this.getNodes().forEach(function(t){t.toFront()}):this.getEdges().forEach(function(t){t.toBack()}))},e.prototype.read=function(t){this.data(t),this.render()},e.prototype.diffItems=function(t,e,r){var n,o=this,i=this.get("itemMap");(0,ng.each)(r,function(r){if(n=i[r.id]){if(o.get("animate")&&"node"===t){var a=n.getContainer().getMatrix();a||(a=[1,0,0,0,1,0,0,0,1]),n.set("originAttrs",{x:a[6],y:a[7]})}o.updateItem(n,r,!1)}else n=o.addItem(t,r,!1);n&&e["".concat(t,"s")].push(n)})},e.prototype.changeData=function(t,e){var r,n=this;void 0===e&&(e=!0);var o=this,i=t||o.get("data");if(!Vb(i))return this;this.emit("beforechangedata"),e&&this.get("enabledStack")&&this.pushStack("changedata",{before:o.save(),after:i}),this.set("comboSorted",!1),this.removeHulls(),this.getNodes().map(function(t){return o.clearItemStates(t)}),this.getEdges().map(function(t){return o.clearItemStates(t)});var a=this.get("canvas"),s=a.get("localRefresh");a.set("localRefresh",!1),o.get("data")||(o.data(i),o.render());var u=this.get("itemMap"),l={nodes:[],edges:[]},c=i.combos;if(c){var f=Db(c,i.nodes);this.set("comboTrees",f)}else this.set("comboTrees",[]);this.diffItems("node",l,i.nodes),(0,ng.each)(u,function(t,e){u[e].getModel().depth=0,t.getType&&"edge"===t.getType()||(t.getType&&"combo"===t.getType()?(delete u[e],t.destroy()):l.nodes.indexOf(t)<0&&(delete u[e],o.remove(t,!1)))});for(var h=this.getCombos(),p=h.length-1;p>=0;p--)h[p].destroyed&&h.splice(p,1);c&&(o.addCombos(c),this.get("groupByTypes")||this.sortCombos()),this.diffItems("edge",l,i.edges),(0,ng.each)(u,function(t,e){(!t.getType||"node"!==t.getType()&&"combo"!==t.getType())&&l.edges.indexOf(t)<0&&(delete u[e],o.remove(t,!1))}),(this.get("comboTrees")||[]).forEach(function(t){Ib(t,function(t){return"combo"===n.findById(t.id).getType()&&t.collapsed&&n.collapseCombo(t.id,!1),!0})}),this.set({nodes:l.nodes,edges:l.edges});var d=(this.get("layout")||{}).relayoutAtChangeData,y=void 0===d||d,v=this.get("layoutController");return y&&v&&(v.changeData(function(){setTimeout(function(){var t;null===(t=o.getCombos())||void 0===t||t.forEach(function(t){t.set("animate",!0)})},0)}),o.get("animate")&&!v.getLayoutType()?(o.positionsAnimate(),null===(r=o.getCombos())||void 0===r||r.forEach(function(t){return t.set("animate",!0)})):o.autoPaint()),setTimeout(function(){a.set("localRefresh",s)},16),this.set("data",i),this.emit("afterchangedata"),this},e.prototype.addCombos=function(t){var e=this.get("comboTrees");this.get("itemController").addCombos(e,t)},e.prototype.createCombo=function(t,e,r){var n=this;void 0===r&&(r=!0);var o=this.get("itemController");this.set("comboSorted",!1);var i,a="";if(t){if((0,ng.isString)(t))a=t,i={id:t};else{if(!(a=t.id))return void console.warn("Create combo failed. Please assign a unique string id for the adding combo.");i=t}var s=r&&this.get("enabledStack"),u={nodes:[],combos:[]};s&&e.forEach(function(t){var e=n.findById(t),r=e.getType();if("node"===r||"combo"===r){var o=e.getModel();u["".concat(r,"s")].push({id:t,parentId:"node"===r?o.comboId:o.parentId})}});var l=this.get("comboTrees"),c=new Set(e),f=new Map;l&&(l.forEach(function(t){Ib(t,function(t,e,r){if(c.has(t.id)){if(e){var i=n.findById(e.id),a=n.findById(t.id);e.children.splice(r,1),i.removeChild(a),o.updateCombo(i,e.children)}"combo"===t.itemType&&f.set(t.id,t)}return!0})}),l=l.filter(function(t){return!c.has(t.id)}),this.set("comboTrees",l));var h={nodes:[],combos:[]},p=e.map(function(t){var e=n.findById(t),r=e.getModel(),o="";e.getType&&(o=e.getType());var i=f.get(t)||{id:e.getID(),itemType:o};return"combo"===o?(i.parentId=a,r.parentId=a):"node"===o&&(i.comboId=a,r.comboId=a),s&&h["".concat(o,"s")].push({id:r.id,parentId:a}),i});i.children=p,this.addItem("combo",i,!1),this.set("comboSorted",!1),l&&(l.forEach(function(t){jb(t,function(t){return t.id!==a||(t.itemType="combo",t.children=p,!1)})}),this.sortCombos()),s&&(h.combos.push(i),this.pushStack("createCombo",{before:u,after:h}));var d=this.findById(a);!d.getModel().parentId&&d.getChildren().combos.length&&this.updateComboTree(d,void 0,!1),setTimeout(function(){d.set("animate",!0)},0)}},e.prototype.uncombo=function(t,e){var r,n,o=this;void 0===e&&(e=!0);var i=t;if((0,ng.isString)(t)&&(i=this.findById(t)),!i||i.getType&&"combo"!==i.getType())console.warn("The item is not a combo!");else{var a=i.getModel(),s=i.getModel().parentId,u=this.get("comboTrees");u||(u=[]);var l,c=this.get("itemMap"),f=i.get("id"),h=[],p=this.get("combos"),d=this.findById(s),y=e&&this.get("enabledStack"),v={};if(y&&((v=(0,ng.clone)(a)).children=[]),u.forEach(function(t){l||Ib(t,function(t){var e;if(t.id===f){l=t,i.getEdges().map(function(t){return t.getID()}).forEach(function(t){o.removeItem(t,!1)});var r=p.indexOf(i);p.splice(r,1),delete c[f];var n=(0,ng.clone)(i.getModel());i.destroy(),o.emit("afterremoveitem",{item:n,type:"combo"})}return!s||!l||t.id!==s||(d.removeCombo(i),-1!==(r=(h=t.children).indexOf(l))&&h.splice(r,1),null===(e=l.children)||void 0===e||e.forEach(function(t){var e=o.findById(t.id),r=e.getModel();e.getType&&"combo"===e.getType()?(t.parentId=s,delete t.comboId,r.parentId=s,delete r.comboId):e.getType&&"node"===e.getType()&&(t.comboId=s,r.comboId=s),d.addChild(e),h.push(t)}),o.updateCombo(d),!1)})}),!s&&l){var g=u.indexOf(l);u.splice(g,1),null===(r=l.children)||void 0===r||r.forEach(function(t){t.parentId=void 0;var e=o.findById(t.id).getModel();delete e.parentId,delete e.comboId,"node"!==t.itemType&&u.push(t)})}if(y){var m={nodes:[],combos:[]},b={nodes:[],combos:[]};null===(n=l.children)||void 0===n||n.forEach(function(t){var e=o.findById(t.id).getType();"node"!==e&&"combo"!==e||(m["".concat(e,"s")].push({id:t.id,parentId:f}),b["".concat(e,"s")].push({id:t.id,parentId:s}))}),m.combos.push(v),this.pushStack("uncombo",{before:m,after:b})}}},e.prototype.updateCombos=function(t){var e=this;void 0===t&&(t=!1);var r=this.get("comboTrees"),n=this.get("itemController"),o=this.get("itemMap");(r||[]).forEach(function(r){Ib(r,function(r){var i;if(!r)return!0;var a=o[r.id];if("combo"===(null===(i=null===a||void 0===a?void 0:a.getType)||void 0===i?void 0:i.call(a))){var s=(0,rg.__spreadArray)([],a.getStates(),!0);(0,ng.each)(s,function(t){return e.setItemState(a,t,!1)}),n.updateCombo(a,r.children,t),(0,ng.each)(s,function(t){return e.setItemState(a,t,!0)})}return!0})}),this.sortCombos()},e.prototype.updateCombo=function(t){var e,r=this,n=t;if((0,ng.isString)(t)&&(n=this.findById(t)),!n||n.getType&&"combo"!==n.getType())console.warn("The item to be updated is not a combo!");else{e=n.get("id");var o=this.get("comboTrees"),i=this.get("itemController"),a=this.get("itemMap");(o||[]).forEach(function(t){Ib(t,function(t){if(!t)return!0;var n=a[t.id];if(e===t.id&&n&&n.getType&&"combo"===n.getType()){var o=(0,rg.__spreadArray)([],n.getStates(),!0);(0,ng.each)(o,function(t){n.getStateStyle(t)&&r.setItemState(n,t,!1)}),i.updateCombo(n,t.children),(0,ng.each)(o,function(t){n.getStateStyle(t)&&r.setItemState(n,t,!0)}),e&&(e=t.parentId)}return!0})})}},e.prototype.updateComboTree=function(t,e,r){void 0===r&&(r=!0);var n;this.set("comboSorted",!1);var o,i=(n=(0,ng.isString)(t)?this.findById(t):t).getModel(),a=i.comboId||i.parentId,s="";if(n.getType&&(s=n.getType()),e&&"combo"===s){var u,l=!0;if((this.get("comboTrees")||[]).forEach(function(t){u||jb(t,function(t){if(!u)return t.id===n.getID()&&(u=t),!0})}),jb(u,function(t){return t.id!==e||(l=!1,!1)}),!l)return void console.warn("Failed to update the combo tree! The parentId points to a descendant of the combo!")}if(r&&this.get("enabledStack")){var c={},f={};"combo"===s?(c.combos=[{id:i.id,parentId:i.parentId}],f.combos=[{id:i.id,parentId:e}]):"node"===s&&(c.nodes=[{id:i.id,parentId:i.comboId}],f.nodes=[{id:i.id,parentId:e}]),this.pushStack("updateComboTree",{before:c,after:f})}if(i.parentId||i.comboId){var h=this.findById(i.parentId||i.comboId);h&&h.removeChild(n)}("combo"===s?i.parentId=e:"node"===s&&(i.comboId=e),e)&&((o=this.findById(e))&&o.addChild(n));a&&((o=this.findById(a))&&o.removeChild(n));var p=Bb(this.get("comboTrees"),i.id,e);this.set("comboTrees",p),this.updateCombos()},e.prototype.save=function(){var t=[],e=[],r=[];return(0,ng.each)(this.get("nodes"),function(e){t.push(e.getModel())}),(0,ng.each)(this.get("edges"),function(t){e.push(t.getModel())}),(0,ng.each)(this.get("combos"),function(t){r.push(t.getModel())}),{nodes:t,edges:e,combos:r}},e.prototype.changeSize=function(t,e){return this.get("viewController").changeSize(t,e),this},e.prototype.refresh=function(){if(this.emit("beforegraphrefresh"),this.get("animate"))this.positionsAnimate();else{var t=this.get("nodes"),e=this.get("edges"),r=this.get("edges");(0,ng.each)(t,function(t){t.refresh()}),(0,ng.each)(e,function(t){t.refresh()}),(0,ng.each)(r,function(t){t.refresh()})}this.emit("aftergraphrefresh"),this.autoPaint()},e.prototype.getNodes=function(){return this.get("nodes")},e.prototype.getEdges=function(){return this.get("edges")},e.prototype.getCombos=function(){return this.get("combos")},e.prototype.getComboChildren=function(t){if((0,ng.isString)(t)&&(t=this.findById(t)),t&&(!t.getType||"combo"===t.getType()))return t.getChildren();console.warn("The combo does not exist!")},e.prototype.positionsAnimate=function(t){var e=this;e.emit("beforeanimate");var r=e.get("animateCfg"),n=r.onFrame,o=t?e.getNodes().concat(e.getCombos()):e.getNodes(),i=o.map(function(t){var e=t.getModel();return{id:e.id,x:e.x,y:e.y}});e.stopAnimate();var a=e.get("canvas");e.animating=!0,setTimeout(function(){a.animate(function(r){(0,ng.each)(i,function(t){var o=e.findById(t.id);if(o&&!o.destroyed){var i=o.get("originAttrs"),a=o.get("model"),s=o.getContainer().getMatrix();if(void 0!==i&&null!==i||(s&&(i={x:s[6],y:s[7]}),o.set("originAttrs",i||0)),n){var u=n(o,r,t,i||{x:0,y:0});o.set("model",Object.assign(a,u))}else i?(a.x=i.x+(t.x-i.x)*r,a.y=i.y+(t.y-i.y)*r):(a.x=t.x,a.y=t.y)}}),e.refreshPositions(t)},{duration:r.duration,easing:r.easing,callback:function(){(0,ng.each)(o,function(t){t.set("originAttrs",null)}),r.callback&&r.callback(),e.emit("afteranimate"),e.animating=!1}})},0)},e.prototype.refreshPositions=function(t){this.emit("beforegraphrefreshposition");var e,r=this.get("nodes"),n=this.get("edges"),o=this.get("vedges"),i=this.get("combos"),a={},s=function(t){(0,ng.each)(t,function(t){e=t.getModel();var r=t.get("originAttrs");if(!r||e.x!==r.x||e.y!==r.y){var n=t.updatePosition({x:e.x,y:e.y});a[e.id]=n,e.comboId&&(a[e.comboId]=a[e.comboId]||n),e.parentId&&(a[e.parentId]=a[e.parentId]||n)}})};s(i),s(r),i&&0!==i.length&&(t?(s(i),this.updateCombos()):this.updateCombos()),(0,ng.each)(n,function(t){var e=t.getSource().getModel(),r=t.getTarget();if(!(0,ng.isPlainObject)(r)){var n=r.getModel();(a[e.id]||a[n.id]||t.getModel().isComboEdge)&&t.refresh()}}),(0,ng.each)(o,function(t){t.refresh()}),this.emit("aftergraphrefreshposition"),this.autoPaint()},e.prototype.stopAnimate=function(){var t=this.get("canvas").cfg.timeline;t&&t.stopAllAnimations()},e.prototype.isAnimating=function(){return this.animating},e.prototype.getZoom=function(){var t=this.get("group").getMatrix();return t?t[0]:1},e.prototype.getCurrentMode=function(){return this.get("modeController").getMode()},e.prototype.setMode=function(t){return this.get("modeController").setMode(t),this},e.prototype.clear=function(t){var e;return void 0===t&&(t=!1),null===(e=this.get("canvas"))||void 0===e||e.clear(),this.initGroups(),this.set({itemMap:{},nodes:[],edges:[],vedges:[],groups:[],combos:[],comboTrees:[]}),t||this.emit("afterrender"),this},e.prototype.updateLayout=function(t,e,r,n){var o=this;void 0===t&&(t={}),void 0===n&&(n=!0);var i=this.get("layoutController");if((0,ng.isString)(t)&&(t={type:t}),e){var a=r;a||(a="begin"===e?{x:0,y:0}:{x:this.getWidth()/2,y:this.getHeight()/2}),a=this.getPointByCanvas(a.x,a.y);var s=["force","gForce","fruchterman","force2"];s.includes(t.type)||!t.type&&s.includes(null===i||void 0===i?void 0:i.layoutType)?t.center=[a.x,a.y]:this.once("afterlayout",function(t){var r=o.getGroup().getMatrix()||[1,0,0,0,1,0,0,0,1];a.x=a.x*r[0]+r[6],a.y=a.y*r[0]+r[7];var n=o.getGroup().getCanvasBBox(),i=n.minX,s=n.maxX,u=n.minY,l={x:(i+s)/2,y:(u+n.maxY)/2};"begin"===e&&(l.x=i,l.y=u),o.translate(a.x-l.x,a.y-l.y)})}var u=(0,rg.__assign)({},this.get("layout")),l={};Object.assign(l,u,t),t.pipes&&!t.type?delete l.type:!t.pipes&&l.type&&delete l.pipes,this.set("layout",l),i&&(i.isLayoutTypeSame(l)&&l.gpuEnabled===u.gpuEnabled?i.updateLayoutCfg(l):i.changeLayout(l),n&&this.get("enabledStack")&&this.pushStack("layout",{before:u,after:l}))},e.prototype.destroyLayout=function(){var t=this.get("layoutController");null===t||void 0===t||t.destroyLayout()},e.prototype.layout=function(){var t,e=this.get("layoutController"),r=this.get("layout");r&&e&&(r.workerEnabled?e.layout():(null===(t=e.layoutMethods)||void 0===t?void 0:t.length)?e.relayout(!0):e.layout())},e.prototype.collapseCombo=function(t,e){var r=this;if(void 0===e&&(e=!0),!this.destroyed)if((0,ng.isString)(t)&&(t=this.findById(t)),t){this.emit("beforecollapseexpandcombo",{action:"collapse",item:t});var n=t.getModel();this.get("itemController").collapseCombo(t,e),n.collapsed=!0;var o=this.getEdges().concat(this.get("vedges")),i=[],a=!1;(this.get("comboTrees")||[]).forEach(function(t){a||jb(t,function(t){if(a&&t.depth<=n.depth)return!1;if(n.id===t.id&&(a=!0),a){var e=r.findById(t.id);e&&e.getType&&"combo"===e.getType()&&(i=(i=i.concat(e.getNodes())).concat(e.getCombos()))}return!0})});var s={};o.forEach(function(t){var e=t.getModel(),o=e.isVEdge,a=e.size,u=void 0===a?1:a;if(!t.isVisible()||o){var l,c=t.getSource(),f=t.getTarget(),h=null;if(c.getModel().id===n.id||i.includes(c)&&!i.includes(f)?(h=f,l=!1):(f.getModel().id===n.id||!i.includes(c)&&i.includes(f))&&(h=c,l=!0),h){if(o)return void r.removeItem(t,!1);for(var p=h.getModel();!h.isVisible();){var d=p.parentId,y=p.comboId,v=d||y;if(!(h=r.findById(v))||!v)return;p=h.getModel()}var g=p.id,m=l?{source:g,target:n.id,size:u,isVEdge:!0}:{source:n.id,target:g,size:u,isVEdge:!0},b="".concat(m.source,"-").concat(m.target);if(s[b])return void(s[b].size+=u);s[b]=m}}}),this.addItems(Object.values(s).map(function(t){return{type:"vedge",model:t}}),!1),this.emit("aftercollapseexpandcombo",{action:"collapse",item:t})}else console.warn("The combo to be collapsed does not exist!")},e.prototype.expandCombo=function(t,e){var r=this;if(void 0===e&&(e=!0),(0,ng.isString)(t)&&(t=this.findById(t)),!t||t.getType&&"combo"!==t.getType())console.warn("The combo to be collapsed does not exist!");else{this.emit("beforecollapseexpandcombo",{action:"expand",item:t});var n=t.getModel();this.get("itemController").expandCombo(t,e),n.collapsed=!1;var o=this.getEdges().concat(this.get("vedges")),i=[],a=!1;(this.get("comboTrees")||[]).forEach(function(t){a||jb(t,function(t){if(a&&t.depth<=n.depth)return!1;if(n.id===t.id&&(a=!0),a){var e=r.findById(t.id);e&&e.getType&&"combo"===e.getType()&&(i=(i=i.concat(e.getNodes())).concat(e.getCombos()))}return!0})});var s={};o.forEach(function(t){if(!t.isVisible()||t.getModel().isVEdge){var e,o=t.getSource(),a=t.getTarget(),u=o.get("id"),l=a.get("id"),c=null;if(u===n.id||i.includes(o)&&!i.includes(a)?(c=a,e=!1):l===n.id||!i.includes(o)&&i.includes(a)?(c=o,e=!0):i.includes(o)&&i.includes(a)&&o.isVisible()&&a.isVisible()&&t.show(),c){var f=t.getModel(),h=f.isVEdge,p=f.size,d=void 0===p?1:p;if(h)return void r.removeItem(t,!1);for(var y=c.getModel();!c.isVisible();){var v=y.parentId,g=y.comboId,m=v||g;if(!(c=r.findById(m))||!m)return;y=c.getModel()}for(var b=y.id,w=e?a:o,S=w.getModel();!w.isVisible();){var x=S.parentId,_=S.comboId,E=x||_;if(!(w=r.findById(E))||!E)return;if(S.comboId===n.id||S.parentId===n.id)break;S=w.getModel()}var O=S.id;if(b){var P=e?{source:b,target:O,isVEdge:!0,size:d}:{source:O,target:b,isVEdge:!0,size:d},k="".concat(P.source,"-").concat(P.target);if(s[k])return void(s[k].size+=d);s[k]=P}}}}),this.addItems(Object.values(s).map(function(t){return{type:"vedge",model:t}}),!1),this.emit("aftercollapseexpandcombo",{action:"expand",item:t})}},e.prototype.collapseExpandCombo=function(t,e){if(void 0===e&&(e=!0),(0,ng.isString)(t)&&(t=this.findById(t)),t&&(!t.getType||"combo"===t.getType())){for(var r=t.getModel(),n=this.findById(r.parentId);n;){var o=n.getModel();if(o.collapsed)return console.warn("Fail to expand the combo since it's ancestor combo is collapsed."),void(n=void 0);n=this.findById(o.parentId)}r.collapsed?this.expandCombo(t,e):this.collapseCombo(t,e),this.updateCombo(t)}},e.prototype.getNeighbors=function(t,e){var r=t;return(0,ng.isString)(t)&&(r=this.findById(t)),r.getNeighbors(e)},e.prototype.getNodeDegree=function(t,e,r){void 0===e&&(e=void 0),void 0===r&&(r=!1);var n=t;(0,ng.isString)(t)&&(n=this.findById(t));var o=this.get("degrees");o&&!r||(o=Pg(this.save()),this.set("degrees",o));var i=o[n.getID()],a=0;if(!i)return 0;switch(e){case"in":a=i.inDegree;break;case"out":a=i.outDegree;break;case"all":a=i;break;default:a=i.degree}return a},e.prototype.getUndoStack=function(){return this.undoStack},e.prototype.getRedoStack=function(){return this.redoStack},e.prototype.getStackData=function(){return this.get("enabledStack")?{undoStack:this.undoStack.toArray(),redoStack:this.redoStack.toArray()}:null},e.prototype.clearStack=function(){this.get("enabledStack")&&(this.undoStack.clear(),this.redoStack.clear(),this.emit("stackchange",{undoStack:this.undoStack,redoStack:this.redoStack}))},e.prototype.pushStack=function(t,e,r){if(void 0===t&&(t="update"),void 0===r&&(r="undo"),this.get("enabledStack")){var n=e?(0,ng.clone)(e):{before:{},after:(0,ng.clone)(this.save())};"redo"===r?this.redoStack.push({action:t,data:n}):this.undoStack.push({action:t,data:n}),this.emit("stackchange",{action:t,stackType:r,undoStack:this.undoStack,redoStack:this.redoStack})}else console.warn("è¯·åå¯ç¨ undo & redo åè½ï¼å¨å®ä¾å Graph æ¶åéç½® enabledStack: true !")},e.prototype.getAdjMatrix=function(t,e){void 0===t&&(t=!0),void 0===e&&(e=this.get("directed"));var r=this.get("adjMatrix");return r&&t||(r=pg(this.save(),e),this.set("adjMatrix",r)),r},e.prototype.getShortestPathMatrix=function(t,e){void 0===t&&(t=!0),void 0===e&&(e=this.get("directed"));var r=this.get("adjMatrix"),n=this.get("shortestPathMatrix");return r&&t||(r=pg(this.save(),e),this.set("adjMatrix",r)),n&&t||(n=Fg(this.save(),e),this.set("shortestPathMatrix",n)),n},e.prototype.on=function(e,r,n){return t.prototype.on.call(this,e,r,n)},e.prototype.destroy=function(){var t,e,r,n,o;this.emit("beforedestroy"),this.clear(),this.clearStack(),null===(t=this.get("itemController"))||void 0===t||t.destroy(),null===(e=this.get("modeController"))||void 0===e||e.destroy(),null===(r=this.get("viewController"))||void 0===r||r.destroy(),null===(n=this.get("stateController"))||void 0===n||n.destroy(),null===(o=this.get("canvas"))||void 0===o||o.destroy(),this.cfg=null,this.destroyed=!0,this.redoStack=null,this.undoStack=null,this.emit("afterdestroy")},e.prototype.createHull=function(t){if(t.members&&!(t.members.length<1)){var e=this.get("hullGroup"),r=this.get("hullMap");if(r||(r={},this.set("hullMap",r)),e&&!e.get("destroyed")||((e=this.get("group").addGroup({id:"hullGroup"})).toBack(),this.set("hullGroup",e)),r[t.id])return console.warn("Existed hull id."),r[t.id];var n=e.addGroup({id:"".concat(t.id,"-container")}),o=new JE(this,(0,rg.__assign)((0,rg.__assign)({},t),{group:n}));return r[o.id]=o,o}console.warn("Create hull failed! The members is empty.")},e.prototype.getHulls=function(){return this.get("hullMap")},e.prototype.getHullById=function(t){return this.get("hullMap")[t]},e.prototype.removeHull=function(t){var e,r;r=(0,ng.isString)(t)?this.getHullById(t):t,null===(e=this.get("hullMap"))||void 0===e||delete e[r.id],r.destroy()},e.prototype.removeHulls=function(){var t=this.getHulls();t&&Object.keys(t).length&&(Object.keys(t).forEach(function(e){t[e].destroy()}),this.set("hullMap",{}))},e}(sg);function ZE(t){"@babel/helpers - typeof";return(ZE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var $E=hg,tO=["startArrow","endArrow"],eO={lineWidth:1,stroke:void 0,fill:void 0,lineAppendWidth:1,opacity:void 0,strokeOpacity:void 0,fillOpacity:void 0,x:0,y:0,r:10,width:20,height:20,shadowColor:void 0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0},rO={edge:{lineWidth:1,stroke:"#000",lineDash:void 0,startArrow:!1,endArrow:!1,opacity:void 0,strokeOpacity:void 0,fillOpacity:void 0,shadowColor:void 0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0},node:eO,combo:eO},nO={options:{labelCfg:{style:{fontFamily:xb.windowFontFamily}},descriptionCfg:{style:{fontFamily:xb.windowFontFamily}}},itemType:"",type:"",getCustomConfig:function(t){return{}},getOptions:function(t,e){return"move"===e||(null===e||void 0===e?void 0:e.includes("bbox"))?t:(0,ng.deepMix)({},this.options,this.getCustomConfig(t)||{},t)},draw:function(t,e){e.shapeMap={},this.mergeStyle=this.getOptions(t);var r=this.drawShape(t,e);if(r.set("className",this.itemType+"-shape"),e.shapeMap[this.itemType+"-shape"]=r,t.label){var n=this.drawLabel(t,e);n.set("className",this.itemType+"-label"),e.shapeMap[this.itemType+"-label"]=n}return r},afterDraw:function(t,e,r){},drawShape:function(t,e){return null},drawLabel:function(t,e){var r=(this.mergeStyle||this.getOptions(t)||{}).labelCfg||{},n=this.getLabelStyle(t,r,e),o=n.rotate;delete n.rotate;var i=e.addShape("text",{attrs:n,draggable:!0,className:"text-shape",name:"text-shape",labelRelated:!0});if(e.shapeMap["text-shape"]=i,!isNaN(o)&&""!==o){var a=i.getBBox(),s=[1,0,0,0,1,0,0,0,1];if(n.rotateCenter)switch(n.rotateCenter){case"center":s=$E(s,[["t",-a.width/2,-a.height/2],["r",o],["t",a.width/2,a.height/2]]);break;case"lefttop":s=$E(s,[["t",-n.x,-n.y],["r",o],["t",n.x,n.y]]);break;case"leftcenter":s=$E(s,[["t",-n.x,-n.y-a.height/2],["r",o],["t",n.x,n.y+a.height/2]]);break;default:s=$E(s,[["t",-a.width/2,-a.height/2],["r",o],["t",a.width/2,a.height/2]])}else s=$E(s,[["t",-n.x,-n.y-a.height/2],["r",o],["t",n.x,n.y+a.height/2]]);i.setMatrix(s)}if(n.background){var u=this.drawLabelBg(t,e,i),l=this.itemType+"-label-bg";u.set("classname",l),e.shapeMap[l]=u,i.toFront()}return i},drawLabelBg:function(t,e,r){var n=this.options.labelCfg,o=(0,ng.mix)({},n,t.labelCfg),i=this.getLabelBgStyleByPosition(r,o),a=e.addShape("rect",{name:"text-bg-shape",attrs:i,labelRelated:!0});return e.shapeMap["text-bg-shape"]=a,a},getLabelStyleByPosition:function(t,e,r){return{text:t.label}},getLabelBgStyleByPosition:function(t,e){return{}},getLabelStyle:function(t,e,r){var n=this.getLabelStyleByPosition(t,e,r),o="".concat(this.itemType,"Label"),i=xb[o]?xb[o].style:null;return(0,rg.__assign)((0,rg.__assign)((0,rg.__assign)({},i),n),e.style)},getShapeStyle:function(t){return t.style},update:function(t,e,r){this.updateShapeStyle(t,e,r),this.updateLabel(t,e,r)},updateShapeStyle:function(t,e,r){var n,o=e.getContainer(),i=e.getKeyShape(),a=(0,ng.mix)({},i.attr(),t.style),s=function(t){var e,r=a[t];if((0,ng.isPlainObject)(r)){var s=(null===(n=o.shapeMap)||void 0===n?void 0:n[t])||o.find(function(e){return e.get("name")===t});null===s||void 0===s||s.attr(r)}else i.attr(((e={})[t]=r,e))};for(var u in a)s(u)},updateLabel:function(t,e,r){var n,o,i=e.getContainer(),a=(this.mergeStyle||this.getOptions({},r)||{}).labelCfg,s=void 0===a?{}:a,u=this.itemType+"-label",l=i.shapeMap[u]||i.find(function(t){return t.get("className")===u}),c=this.itemType+"-label-bg",f=i.shapeMap[c]||i.find(function(t){return t.get("className")===c});if(l&&void 0===t.label&&(i.removeChild(l),delete i.shapeMap[u],f&&(i.removeChild(f),delete i.shapeMap[c])),t.label||""===t.label)if(l){(!r||"bbox|label"===r||"edge"===this.itemType&&"style"!==r)&&(s=(0,ng.deepMix)(s,t.labelCfg));var h=this.getLabelStyleByPosition(t,s,i),p=null===(n=t.labelCfg)||void 0===n?void 0:n.style,d=(0,rg.__assign)((0,rg.__assign)({},h),p),y=d.rotate;if(delete d.rotate,isNaN(y)||""===y)1!==(null===(o=l.getMatrix())||void 0===o?void 0:o[4])&&l.resetMatrix(),l.attr(d);else{var v=[1,0,0,0,1,0,0,0,1];v=$E(v,[["t",-d.x,-d.y],["r",y],["t",d.x,d.y]]),d.matrix=v,l.attr(d)}if(f)if(d.background){var g=this.getLabelBgStyleByPosition(l,s);f.attr(g)}else i.removeChild(f);else d.background&&((f=this.drawLabelBg(t,i,l)).set("classname",c),i.shapeMap[c]=f,l.toFront())}else{var m=this.drawLabel(t,i);m.set("className",u),i.shapeMap[u]=m}},afterUpdate:function(t,e){},setState:function(t,e,r){var n,o,i,a=r.get("keyShape");if(a&&!a.destroyed){var s=r.getType(),u=(0,ng.isBoolean)(e)?t:"".concat(t,":").concat(e),l=this.getStateStyle(u,r),c=r.getStateStyle(u);if(c||l){var f=(0,ng.mix)({},c||l),h=r.getContainer(),p={x:1,y:1,cx:1,cy:1,matrix:1};if("combo"===s&&(p.r=1,p.width=1,p.height=1),e){var d=function(t){var e,r=f[t];if((0,ng.isPlainObject)(r)&&!tO.includes(t)){var n=(null===(i=h.shapeMap)||void 0===i?void 0:i[t])||h.find(function(e){return e.get("name")===t});null===n||void 0===n||n.attr(r)}else a.attr(((e={})[t]=r,e))};for(var y in f)d(y)}else{var v=Ub(r.getCurrentStatesStyle()),g=r.getModel(),m=(0,ng.mix)({},g.style,Ub(r.getOriginStyle())),b=a.get("name"),w=a.attr(),S={};Object.keys(w).forEach(function(t){if("img"!==t){var e=w[t];e&&"object"===ZE(e)?S[t]=(0,ng.clone)(e):S[t]=e}});var x={},_=function(t){var e=f[t];if((0,ng.isPlainObject)(e)&&!tO.includes(t)){var r=h.shapeMap[t]||h.find(function(e){return e.get("name")===t});if(r){var n=Ub(r.attr());(0,ng.each)(e,function(e,o){if(t===b&&S[o]&&!p[o]){delete S[o];var i=m[t][o]||rO[s][o];a.attr(o,i)}else if(n[o]||0===n[o]){delete n[o];var u=m[t][o]||rO[s][o];r.attr(o,u)}}),x[t]=n}}else if(S[t]&&!p[t]){delete S[t];var o=m[t]||(m[b]?m[b][t]:void 0)||rO[s][t];a.attr(t,o)}};for(var E in f)_(E);for(var y in b?x[b]=S:(0,ng.mix)(x,S),v)if(!p[y]){var O=v[y];(0,ng.isPlainObject)(O)&&!tO.includes(y)||(b?((0,ng.mix)(m[b],((o={})[y]=O,o)),delete m[y]):(0,ng.mix)(m,((n={})[y]=O,n)),delete v[y])}var P={};(0,ng.deepMix)(P,m,x,v);var k=!1,C=function(t){var e,r,n=P[t];if((0,ng.isPlainObject)(n)&&!tO.includes(t)){var o=h.shapeMap[t]||h.find(function(e){return e.get("name")===t});o&&(("text"===o.get("type")||o.get("labelRelated"))&&(delete n.x,delete n.y,delete n.matrix),t===b&&("combo"===s&&(delete n.r,delete n.width,delete n.height),k=!0),o.attr(n))}else if(!k){var i=n||rO[s][t];"combo"===s?b||a.attr(((e={})[t]=i,e)):a.attr(((r={})[t]=i,r))}};for(var T in P)C(T)}}}},getStateStyle:function(t,e){var r=e.getModel(),n=e.getType(),o=this.getOptions(r),i=o.stateStyles,a=o.style,s=void 0===a?{}:a,u=r.stateStyles?r.stateStyles[t]:i&&i[t];return"combo"===n?(0,ng.clone)(u):(0,ng.mix)({},s,u)},getControlPoints:function(t){return t.controlPoints},getAnchorPoints:function(t){var e,r;return(null===t||void 0===t?void 0:t.anchorPoints)||(null===(e=this.getCustomConfig(t))||void 0===e?void 0:e.anchorPoints)||(null===(r=this.options)||void 0===r?void 0:r.anchorPoints)}},oO={itemType:"node",shapeType:"single-node",labelPosition:"center",offset:xb.nodeLabel.offset,getSize:function(t){var e,r=(null===(e=this.mergeStyle)||void 0===e?void 0:e.size)||t.size||this.getOptions({}).size||xb.defaultNode.size;return(0,ng.isArray)(r)&&1===r.length&&(r=[r[0],r[0]]),(0,ng.isArray)(r)||(r=[r,r]),r},getLabelStyleByPosition:function(t,e){var r=e.maxLength,n=t.label;r&&(n=Rb(n,r));var o=e.position||this.labelPosition;if("center"===o)return{x:0,y:0,text:n,textBaseline:"middle",textAlign:"center"};var i=e.offset;(0,ng.isNil)(i)&&(i=this.offset);var a,s=this.getSize(t);switch(o){case"top":a={x:0,y:-s[1]/2-i,textBaseline:"bottom",textAlign:"center"};break;case"bottom":a={x:0,y:s[1]/2+i,textBaseline:"top",textAlign:"center"};break;case"left":a={x:-s[0]/2-i,y:0,textBaseline:"middle",textAlign:"right"};break;default:a={x:s[0]/2+i,y:0,textBaseline:"middle",textAlign:"left"}}return a.text=n,a},getLabelBgStyleByPosition:function(t,e){var r;if(!t)return{};var n=null===(r=e.style)||void 0===r?void 0:r.background;if(!n)return{};var o=t.getBBox(),i=tE(n.padding),a=o.width+i[1]+i[3],s=o.height+i[0]+i[2];return(0,rg.__assign)((0,rg.__assign)({x:o.minX-i[3],y:o.minY-i[0]},n),{width:a,height:s})},drawShape:function(t,e){var r=this.shapeType,n=this.getShapeStyle(t),o=e.addShape(r,{attrs:n,draggable:!0,name:"node-shape"});return e.shapeMap["node-shape"]=o,o},updateLinkPoints:function(t,e){var r,n=(this.mergeStyle||this.getOptions(t)).linkPoints,o=e.shapeMap["link-point-left"]||e.find(function(t){return"link-point-left"===t.get("className")}),i=e.shapeMap["link-point-right"]||e.find(function(t){return"link-point-right"===t.get("className")}),a=e.shapeMap["link-point-top"]||e.find(function(t){return"link-point-top"===t.get("className")}),s=e.shapeMap["link-point-bottom"]||e.find(function(t){return"link-point-bottom"===t.get("className")});o&&(r=o.attr()),i&&!r&&(r=i.attr()),a&&!r&&(r=a.attr()),s&&!r&&(r=s.attr()),r||(r=n);var u=(0,ng.mix)({},r,t.linkPoints),l=u.fill,c=u.stroke,f=u.lineWidth,h=u.size/2;h||(h=u.r);var p=t.linkPoints?t.linkPoints:{left:void 0,right:void 0,top:void 0,bottom:void 0},d=p.left,y=p.right,v=p.top,g=p.bottom,m=this.getSize(t),b=m[0],w=m[1],S={r:h,fill:l,stroke:c,lineWidth:f};if(o)d||void 0===d?o.attr((0,rg.__assign)((0,rg.__assign)({},S),{x:-b/2,y:0})):(o.remove(),delete e.shapeMap["link-point-left"]);else if(d){var x="link-point-left";e.shapeMap[x]=e.addShape("circle",{attrs:(0,rg.__assign)((0,rg.__assign)({},S),{x:-b/2,y:0}),className:x,name:x,isAnchorPoint:!0})}if(i)y||void 0===y||(i.remove(),delete e.shapeMap["link-point-right"]),i.attr((0,rg.__assign)((0,rg.__assign)({},S),{x:b/2,y:0}));else if(y){var _="link-point-right";e.shapeMap[_]=e.addShape("circle",{attrs:(0,rg.__assign)((0,rg.__assign)({},S),{x:b/2,y:0}),className:_,name:_,isAnchorPoint:!0})}if(a)v||void 0===v||(a.remove(),delete e.shapeMap["link-point-top"]),a.attr((0,rg.__assign)((0,rg.__assign)({},S),{x:0,y:-w/2}));else if(v){var E="link-point-top";e.shapeMap[E]=e.addShape("circle",{attrs:(0,rg.__assign)((0,rg.__assign)({},S),{x:0,y:-w/2}),className:E,name:E,isAnchorPoint:!0})}if(s)g||void 0===g?s.attr((0,rg.__assign)((0,rg.__assign)({},S),{x:0,y:w/2})):(s.remove(),delete e.shapeMap["link-point-bottom"]);else if(g){var O="link-point-bottom";e.shapeMap[O]=e.addShape("circle",{attrs:(0,rg.__assign)((0,rg.__assign)({},S),{x:0,y:w/2}),className:O,name:O,isAnchorPoint:!0})}},updateShape:function(t,e,r,n,o){e.get("keyShape").attr((0,rg.__assign)({},r)),this.updateLabel(t,e,o),n&&this.updateIcon(t,e)},updateIcon:function(t,e){var r=this,n=e.getContainer(),o=(this.mergeStyle||this.getOptions(t)).icon,i=t.icon?t.icon:{show:void 0,text:void 0},a=i.show,s=i.text,u=n.shapeMap["".concat(this.type,"-icon")]||n.find(function(t){return t.get("name")==="".concat(r.type,"-icon")});if(u)if(a||void 0===a){var l=(0,ng.mix)({},u.attr(),o),c=l.width,f=void 0===c?20:c,h=l.height,p=void 0===h?20:h;("iconfont"===l.fontFamily||l.hasOwnProperty("text"))&&(f=0,p=0),u.attr((0,rg.__assign)((0,rg.__assign)({},l),{x:-f/2,y:-p/2}))}else u.remove(),delete n.shapeMap["".concat(this.type,"-icon")];else if(a){var d="".concat(this.type,"-icon");if(s)n.shapeMap[d]=n.addShape("text",{attrs:(0,rg.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},o),className:d,name:d});else{f=o.width,p=o.height;n.shapeMap[d]=n.addShape("image",{attrs:(0,rg.__assign)((0,rg.__assign)({},o),{x:-f/2,y:-p/2}),className:d,name:d})}var y=n.shapeMap["node-label"]||n.find(function(t){return"node-label"===t.get("name")});y&&y.toFront()}}},iO=(0,rg.__assign)((0,rg.__assign)({},nO),oO);bE.registerNode("single-node",iO);var aO={itemType:"edge",labelPosition:"center",refX:0,refY:0,labelAutoRotate:!1,options:{size:xb.defaultEdge.size,style:{x:0,y:0,stroke:xb.defaultEdge.style.stroke,lineAppendWidth:xb.defaultEdge.style.lineAppendWidth},labelCfg:{style:{fill:xb.edgeLabel.style.fill,fontSize:xb.edgeLabel.style.fontSize,fontFamily:xb.windowFontFamily}},stateStyles:(0,rg.__assign)({},xb.edgeStateStyles)},getPath:function(t){var e=[];return(0,ng.each)(t,function(t,r){0===r?e.push(["M",t.x,t.y]):e.push(["L",t.x,t.y])}),e},getShapeStyle:function(t){var e=this.options.style,r={stroke:t.color},n=(0,ng.mix)({},e,r,t.style),o=t.size||xb.defaultEdge.size,i=(t=this.getPathPoints(t)).startPoint,a=t.endPoint,s=this.getControlPoints(t),u=[i];s&&(u=u.concat(s)),u.push(a);var l=this.getPath(u);return(0,ng.mix)({},xb.defaultEdge.style,{stroke:xb.defaultEdge.color,lineWidth:o,path:l},n)},updateShapeStyle:function(t,e,r){var n,o=e.getContainer(),i=(null===(n=e.getKeyShape)||void 0===n?void 0:n.call(e))||o.shapeMap["edge-shape"],a=t.size,s=(t=this.getPathPoints(t)).startPoint,u=t.endPoint,l=this.getControlPoints(t),c=[s];l&&(c=c.concat(l)),c.push(u);var f=i.attr(),h=t.style||{};void 0===h.stroke&&(h.stroke=t.color);var p=t.sourceNode,d=t.targetNode,y={radius:h.radius};l||(y={source:p,target:d,offset:h.offset,radius:h.radius});var v=this.getPath(c,y),g={};"move"===r?g={path:v}:(f.endArrow&&!1===h.endArrow&&(t.style.endArrow={path:""}),f.startArrow&&!1===h.startArrow&&(t.style.startArrow={path:""}),void 0===(g=(0,rg.__assign)({},t.style)).lineWidth&&(g.lineWidth=((0,ng.isNumber)(a)?a:null===a||void 0===a?void 0:a[0])||f.lineWidth),void 0===g.path&&(g.path=v),void 0===g.stroke&&(g.stroke=f.stroke||t.color)),i&&i.attr(g)},getLabelStyleByPosition:function(t,e,r){var n,o=e.position||this.labelPosition,i={},a=null===r||void 0===r?void 0:r.shapeMap["edge-shape"];n="start"===o?0:"end"===o?1:.5;var s,u=e.refX||this.refX,l=e.refY||this.refY;if(t.startPoint.x===t.endPoint.x&&t.startPoint.y===t.endPoint.y)return i.x=t.startPoint.x+u,i.y=t.startPoint.y+l,i.text=t.label,i;s=(0,ng.isNil)(e.autoRotate)?this.labelAutoRotate:e.autoRotate;var c=Mb(a,n,u,l,s);return i.x=c.x,i.y=c.y,i.rotate=c.rotate,i.textAlign=this._getTextAlign(o,c.angle),i.text=t.label,i},getLabelBgStyleByPosition:function(t,e){if(!t)return{};var r=t.getBBox(),n=e.style&&e.style.background;if(!n)return{};var o=n.padding,i=r.width+o[1]+o[3],a=r.height+o[0]+o[2],s=(0,rg.__assign)((0,rg.__assign)({},n),{width:i,height:a,x:r.minX-o[3],y:r.minY-o[0],matrix:[1,0,0,0,1,0,0,0,1]});return((0,ng.isNil)(e.autoRotate)?this.labelAutoRotate:e.autoRotate)&&(s.matrix=t.attr("matrix")||[1,0,0,0,1,0,0,0,1]),s},_getTextAlign:function(t,e){var r="center";return e?(e%=2*Math.PI,"center"!==t&&(r=e>=0&&e<=Math.PI/2||e>=1.5*Math.PI&&e<2*Math.PI?t:function(t){var e=t;return"start"===t?e="end":"end"===t&&(e="start"),e}(t)),r):t},getControlPoints:function(t){return t.controlPoints},getPathPoints:function(t){return t},drawShape:function(t,e){var r=this.getShapeStyle(t),n=e.addShape("path",{className:"edge-shape",name:"edge-shape",attrs:r});return e.shapeMap["edge-shape"]=n,n},drawLabel:function(t,e){var r=this.options.labelCfg,n=(0,ng.deepMix)({},r,t.labelCfg),o=this.getLabelStyle(t,n,e),i=o.rotate;delete o.rotate;var a=e.addShape("text",{attrs:o,name:"text-shape",labelRelated:!0,draggable:!0});if(e.shapeMap["text-shape"]=a,isNaN(i)||""===i||a.rotateAtStart(i),o.background){var s=this.drawLabelBg(t,e,a,o,i),u=this.itemType+"-label-bg";s.set("classname",u),e.shapeMap[u]=s,a.toFront()}return a},drawLabelBg:function(t,e,r,n,o){var i=this.options.labelCfg,a=(0,ng.deepMix)({},i,t.labelCfg),s=this.getLabelBgStyleByPosition(r,a),u=e.addShape("rect",{name:"text-bg-shape",attrs:s,labelRelated:!0});return e.shapeMap["text-bg-shape"]=u,u}},sO=(0,rg.__assign)((0,rg.__assign)({},nO),aO);bE.registerEdge("single-edge",sO),bE.registerEdge("line",{getControlPoints:function(){}},"single-edge"),bE.registerEdge("spline",{getPath:function(t){return CE(t)}},"single-edge"),bE.registerEdge("arc",{curveOffset:20,clockwise:1,getControlPoints:function(t){var e,r,n=t.startPoint,o=t.endPoint,i=(n.x+o.x)/2,a=(n.y+o.y)/2;if(void 0!==t.controlPoints){if(r=t.controlPoints[0],e=Hm(n,r,o),n.x<=o.x&&n.y>o.y?this.clockwise=e.x>r.x?0:1:n.x<=o.x&&n.y<o.y?this.clockwise=e.x>r.x?1:0:n.x>o.x&&n.y<=o.y?this.clockwise=e.y<r.y?0:1:this.clockwise=e.y<r.y?1:0,(r.x-n.x)/(r.y-n.y)==(o.x-n.x)/(o.y-n.y))return[]}else{void 0===t.curveOffset&&(t.curveOffset=this.curveOffset),(0,ng.isArray)(t.curveOffset)&&(t.curveOffset=t.curveOffset[0]),t.curveOffset<0?this.clockwise=0:this.clockwise=1;var s={x:o.x-n.x,y:o.y-n.y},u=Math.atan2(s.y,s.x);r={x:t.curveOffset*Math.cos(-Math.PI/2+u)+i,y:t.curveOffset*Math.sin(-Math.PI/2+u)+a},e=Hm(n,r,o)}var l=Wm(n,e);return[{x:l,y:l}]},getPath:function(t){var e=[];return e.push(["M",t[0].x,t[0].y]),2===t.length?e.push(["L",t[1].x,t[1].y]):e.push(["A",t[1].x,t[1].y,0,0,this.clockwise,t[2].x,t[2].y]),e}},"single-edge"),bE.registerEdge("quadratic",{curvePosition:.5,curveOffset:-20,getControlPoints:function(t){var e=t.controlPoints;if(!e||!e.length){var r=t.startPoint,n=t.endPoint;void 0===t.curveOffset&&(t.curveOffset=this.curveOffset),void 0===t.curvePosition&&(t.curvePosition=this.curvePosition),(0,ng.isArray)(t.curveOffset)&&(t.curveOffset=t.curveOffset[0]),(0,ng.isArray)(t.curvePosition)&&(t.curvePosition=t.curveOffset[0]),e=[TE(r,n,t.curvePosition,t.curveOffset)]}return e},getPath:function(t){var e=[];return e.push(["M",t[0].x,t[0].y]),e.push(["Q",t[1].x,t[1].y,t[2].x,t[2].y]),e}},"single-edge"),bE.registerEdge("cubic",{curvePosition:[.5,.5],curveOffset:[-20,20],getControlPoints:function(t){var e=t.controlPoints;if(void 0===t.curveOffset&&(t.curveOffset=this.curveOffset),void 0===t.curvePosition&&(t.curvePosition=this.curvePosition),(0,ng.isNumber)(t.curveOffset)&&(t.curveOffset=[t.curveOffset,-t.curveOffset]),(0,ng.isNumber)(t.curvePosition)&&(t.curvePosition=[t.curvePosition,1-t.curvePosition]),!e||!e.length||e.length<2){var r=t.startPoint,n=t.endPoint;e=[TE(r,n,t.curvePosition[0],t.curveOffset[0]),TE(r,n,t.curvePosition[1],t.curveOffset[1])]}return e},getPath:function(t){var e=[];return e.push(["M",t[0].x,t[0].y]),e.push(["C",t[1].x,t[1].y,t[2].x,t[2].y,t[3].x,t[3].y]),e}},"single-edge"),bE.registerEdge("cubic-vertical",{curvePosition:[.5,.5],minCurveOffset:[0,0],curveOffset:void 0,getControlPoints:function(t){var e=t.startPoint,r=t.endPoint;void 0===t.curvePosition&&(t.curvePosition=this.curvePosition),void 0===t.curveOffset&&(t.curveOffset=this.curveOffset),void 0===t.minCurveOffset&&(t.minCurveOffset=this.minCurveOffset),(0,ng.isNumber)(t.curveOffset)&&(t.curveOffset=[t.curveOffset,-t.curveOffset]),(0,ng.isNumber)(t.minCurveOffset)&&(t.minCurveOffset=[t.minCurveOffset,-t.minCurveOffset]),(0,ng.isNumber)(t.curvePosition)&&(t.curvePosition=[t.curvePosition,1-t.curvePosition]);var n=r.y-e.y,o=[0,0];return t.curveOffset?o=t.curveOffset:Math.abs(n)<Math.abs(t.minCurveOffset[0])&&(o=t.minCurveOffset),[{x:e.x,y:e.y+n*this.curvePosition[0]+o[0]},{x:r.x,y:r.y-n*this.curvePosition[1]+o[1]}]}},"cubic"),bE.registerEdge("cubic-horizontal",{curvePosition:[.5,.5],minCurveOffset:[0,0],curveOffset:void 0,getControlPoints:function(t){var e=t.startPoint,r=t.endPoint;void 0===t.curvePosition&&(t.curvePosition=this.curvePosition),void 0===t.curveOffset&&(t.curveOffset=this.curveOffset),void 0===t.minCurveOffset&&(t.minCurveOffset=this.minCurveOffset),(0,ng.isNumber)(t.curveOffset)&&(t.curveOffset=[t.curveOffset,-t.curveOffset]),(0,ng.isNumber)(t.minCurveOffset)&&(t.minCurveOffset=[t.minCurveOffset,-t.minCurveOffset]),(0,ng.isNumber)(t.curvePosition)&&(t.curvePosition=[t.curvePosition,1-t.curvePosition]);var n=r.x-e.x,o=[0,0];return t.curveOffset?o=t.curveOffset:Math.abs(n)<Math.abs(t.minCurveOffset[0])&&(o=t.minCurveOffset),[{x:e.x+n*this.curvePosition[0]+o[0],y:e.y},{x:r.x-n*this.curvePosition[1]+o[1],y:r.y}]}},"cubic"),bE.registerEdge("loop",{getPathPoints:function(t){return Ab(t)},getControlPoints:function(t){return t.controlPoints},afterDraw:function(t){t.controlPoints=void 0},afterUpdate:function(t){t.controlPoints=void 0}},"cubic");var uO={itemType:"combo",shapeType:"single-combo",labelPosition:"top",refX:xb.comboLabel.refX,refY:xb.comboLabel.refY,options:{style:{stroke:xb.defaultCombo.style.stroke,fill:xb.defaultCombo.style.fill,lineWidth:xb.defaultCombo.style.lineWidth},labelCfg:{style:{fill:xb.comboLabel.style.fill,fontSize:xb.comboLabel.style.fontSize,fontFamily:xb.windowFontFamily}},stateStyles:(0,rg.__assign)({},xb.comboStateStyles),collapsedSubstituteIcon:{show:!1,img:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*RsnHRqLfJn4AAAAAAAAAAAAAARQnAQ"}},getSize:function(t){var e=(0,ng.clone)(t.size||this.options.size||xb.defaultCombo.size);return(0,ng.isArray)(e)&&1===e.length&&(e=[e[0],e[0]]),(0,ng.isArray)(e)||(e=[e,e]),e},getLabelStyleByPosition:function(t,e){var r=e.position||this.labelPosition,n=t.style,o=t.padding||this.options.padding;(0,ng.isArray)(o)&&(o=Math.max.apply(Math,o));var i=e.refX,a=e.refY;(0,ng.isNil)(i)&&(i=this.refX),(0,ng.isNil)(a)&&(a=this.refY);var s,u=this.getSize(t),l=(Math.max(n.r,u[0]/2)||u[0]/2)+o;switch(r){case"top":s={x:0,y:-l-a,textBaseline:"bottom",textAlign:"center"};break;case"bottom":s={x:0,y:l+a,textBaseline:"bottom",textAlign:"center"};break;case"left":s={x:-l+i,y:0,textAlign:"left"};break;case"center":s={x:0,y:0,text:t.label,textAlign:"center"};break;default:s={x:l+i,y:0,textAlign:"right"}}return s.text=t.label,s},drawShape:function(t,e){var r=this.shapeType,n=this.getShapeStyle(t);return e.addShape(r,{attrs:n,draggable:!0,name:"combo-shape"})},updateCollapsedIcon:function(t,e,r){var n=t.collapsed,o=t.collapsedSubstituteIcon,i=void 0===o?{}:o,a=Object.assign({},this.options.collapsedSubstituteIcon,i),s=a.show,u=a.img,l=a.width,c=a.height,f=e.getContainer(),h=f.find(function(t){return"combo-collapsed-substitute-icon"===t.get("name")}),p=h&&!h.destroyed,d=e.get("keyShape");if(n&&s){if(p)h.show();else{var y={width:l||2*r.r||r.width,height:c||2*r.r||r.height};h=f.addShape("image",{attrs:(0,rg.__assign)({img:u,x:-y.width/2,y:-y.height/2},y),name:"combo-collapsed-substitute-icon",draggable:!0})}d.hide()}else p&&(h.hide(),d.show())},updateShape:function(t,e,r){var n=this,o=e.get("keyShape");e.get("animate")&&(void 0===t.animate?this.options.animate:t.animate)&&o.animate?(t.collapsed||this.updateCollapsedIcon(t,e,r),o.animate(r,{duration:200,easing:"easeLinear",callback:function(){t.collapsed&&n.updateCollapsedIcon(t,e,r)}})):(o.attr((0,rg.__assign)({},r)),this.updateCollapsedIcon(t,e,r)),this.updateLabel(t,e)}},lO=(0,rg.__assign)((0,rg.__assign)({},nO),uO);bE.registerCombo("single-combo",lO),bE.registerCombo("circle",{options:{size:[xb.defaultCombo.size[0],xb.defaultCombo.size[0]],padding:Math.max.apply(Math,xb.defaultCombo.padding),animate:!0,style:{stroke:xb.defaultCombo.style.stroke,fill:xb.defaultCombo.style.fill,lineWidth:xb.defaultCombo.style.lineWidth},labelCfg:{style:{fill:xb.comboLabel.style.fill,fontSize:xb.comboLabel.style.fontSize},refX:0,refY:0},stateStyles:(0,rg.__assign)({},xb.comboStateStyles),collapsedSubstituteIcon:{show:!1,img:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*RsnHRqLfJn4AAAAAAAAAAAAAARQnAQ"}},shapeType:"circle",labelPosition:"top",drawShape:function(t,e){var r=this.getShapeStyle(t);return delete r.height,delete r.width,e.addShape("circle",{attrs:r,className:"circle-combo",name:"circle-combo",draggable:!0})},getShapeStyle:function(t){var e=this.options.style,r=t.padding||this.options.padding;(0,ng.isArray)(r)&&(r=Math.max.apply(Math,r));var n,o={stroke:t.color},i=(0,ng.mix)({},e,o,t.style),a=t.collapsed&&t.fixCollapseSize?t.fixCollapseSize:t.fixSize;if(a)n=(0,ng.isNumber)(a)?a/2:a[0]/2;else{var s=this.getSize(t);n=!(0,ng.isNumber)(i.r)||isNaN(i.r)?s[0]/2||xb.defaultCombo.style.r:Math.max(i.r,s[0]/2)||s[0]/2}i.r=n+r;var u=(0,rg.__assign)({x:0,y:0},i);return t.style?t.style.r=n:t.style={r:n},u},update:function(t,e){var r=this.getSize(t),n=t.padding||this.options.padding;(0,ng.isArray)(n)&&(n=Math.max.apply(Math,n));var o,i=(0,ng.clone)(t.style),a=t.collapsed&&t.fixCollapseSize?t.fixCollapseSize:t.fixSize;o=a?(0,ng.isNumber)(a)?a/2:a[0]/2:Math.max(i.r,r[0]/2)||r[0]/2,i.r=o+n;var s=e.get("sizeCache");s&&(s.r=i.r);var u={stroke:t.color},l=e.get("keyShape"),c=(0,ng.mix)({},l.attr(),u,i);t.style?t.style.r=o:t.style={r:o},this.updateShape(t,e,c,!0)}},"single-combo"),bE.registerCombo("rect",{options:{size:[40,5],padding:[25,20,15,20],animate:!0,style:{radius:0,stroke:xb.defaultCombo.style.stroke,fill:xb.defaultCombo.style.fill,lineWidth:xb.defaultCombo.style.lineWidth},labelCfg:{style:{fill:xb.comboLabel.style.fill,fontSize:xb.comboLabel.style.fontSize,fontFamily:xb.windowFontFamily}},anchorPoints:[[0,.5],[1,.5]],stateStyles:(0,rg.__assign)({},xb.comboStateStyles),collapsedSubstituteIcon:{show:!1,img:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*RsnHRqLfJn4AAAAAAAAAAAAAARQnAQ"}},shapeType:"rect",labelPosition:"top",drawShape:function(t,e){var r=this.getShapeStyle(t);return e.addShape("rect",{attrs:r,className:"rect-combo",name:"rect-combo",draggable:!0})},getLabelStyleByPosition:function(t,e){var r=e.position||this.labelPosition,n=t.style,o=t.padding||this.options.padding;(0,ng.isNumber)(o)&&(o=[o,o,o,o]);var i=e.refX,a=e.refY;(0,ng.isNil)(i)&&(i=this.refX),(0,ng.isNil)(a)&&(a=this.refY);var s,u=-n.width/2-o[3],l=n.width/2+o[1],c=-n.height/2-o[0],f=n.height/2+o[2];switch(r){case"top":s={x:u+i,y:c+a,textBaseline:"top",textAlign:"left"};break;case"bottom":s={x:0,y:f+a,textBaseline:"top",textAlign:"center"};break;case"left":s={x:u+a,y:0,textAlign:"left"};break;case"center":s={x:0,y:0,text:t.label,textAlign:"center"};break;case"top-center":s={x:0,y:c+a,textBaseline:"top",textAlign:"center"};break;default:s={x:l+i,y:0,textAlign:"right"}}return s.text=t.label,s},getShapeStyle:function(t){var e=this.options.style,r=t.padding||this.options.padding;(0,ng.isNumber)(r)&&(r=[r,r,r,r]);var n,o,i={stroke:t.color},a=(0,ng.mix)({},e,i,t.style),s=this.getSize(t),u=t.collapsed&&t.fixCollapseSize?t.fixCollapseSize:t.fixSize;u?(0,ng.isNumber)(u)?(n=u,o=u):(n=u[0],o=u[1]):(n=!(0,ng.isNumber)(a.width)||isNaN(a.width)?s[0]||xb.defaultCombo.style.width:Math.max(a.width,s[0])||s[0],o=!(0,ng.isNumber)(a.height)||isNaN(a.height)?s[1]||xb.defaultCombo.style.height:Math.max(a.height,s[1])||s[1]);var l=-n/2-r[3],c=-o/2-r[0];a.width=n+r[1]+r[3],a.height=o+r[0]+r[2];var f=(0,rg.__assign)({x:l,y:c},a);return t.style?(t.style.width=n,t.style.height=o):t.style={width:n,height:o},f},update:function(t,e){var r=this.getSize(t),n=t.padding||this.options.padding;(0,ng.isNumber)(n)&&(n=[n,n,n,n]);var o,i,a=(0,ng.clone)(t.style),s=t.collapsed&&t.fixCollapseSize?t.fixCollapseSize:t.fixSize;s?(0,ng.isNumber)(s)?(o=s,i=s):(o=s[0],i=s[1]):(o=Math.max(a.width,r[0])||r[0],i=Math.max(a.height,r[1])||r[1]),a.width=o+n[1]+n[3],a.height=i+n[0]+n[2];var u=e.get("sizeCache");u&&(u.width=a.width,u.height=a.height),a.x=-o/2-n[3],a.y=-i/2-n[0];var l={stroke:t.color},c=e.get("keyShape"),f=(0,ng.mix)({},c.attr(),l,a);t.style?(t.style.width=o,t.style.height=i):t.style={width:o,height:i},this.updateShape(t,e,f,!1)}},"single-combo"),bE.registerNode("simple-circle",{options:{size:xb.defaultNode.size,style:{x:0,y:0,stroke:xb.defaultNode.style.stroke,fill:xb.defaultNode.style.fill,lineWidth:xb.defaultNode.style.lineWidth},labelCfg:{style:{fill:xb.nodeLabel.style.fill,fontSize:xb.nodeLabel.style.fontSize,fontFamily:xb.windowFontFamily}},stateStyles:(0,rg.__assign)({},xb.nodeStateStyles)},shapeType:"simple-circle",labelPosition:"center",shapeMap:{},drawShape:function(t,e){var r=this.getShapeStyle(t),n="".concat(this.type,"-keyShape"),o=e.addShape("circle",{attrs:r,className:"".concat(this.type,"-keyShape"),name:n,draggable:!0});return e.shapeMap[n]=o,o},getShapeStyle:function(t){var e=(this.mergeStyle||this.getOptions(t)).style,r={stroke:t.color},n=(0,ng.deepMix)({},e,r),o=this.getSize(t)[0]/2;return(0,rg.__assign)({x:0,y:0,r:o},n)},update:function(t,e,r){var n=this.getSize(t),o={stroke:t.color,r:n[0]/2},i=e.get("keyShape"),a=(0,ng.deepMix)({},i.attr(),o,t.style);this.updateShape(t,e,a,!0,r)}},"single-node"),bE.registerNode("simple-rect",{options:{size:[100,30],style:{radius:0,stroke:xb.defaultNode.style.stroke,fill:xb.defaultNode.style.fill,lineWidth:xb.defaultNode.style.lineWidth},labelCfg:{style:{fill:xb.nodeLabel.style.fill,fontSize:xb.nodeLabel.style.fontSize,fontFamily:xb.windowFontFamily}},anchorPoints:[[0,.5],[1,.5]],stateStyles:(0,rg.__assign)({},xb.nodeStateStyles)},shapeType:"simple-rect",labelPosition:"center",drawShape:function(t,e){var r=this.getShapeStyle(t);return e.addShape("rect",{attrs:r,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0})},getShapeStyle:function(t){var e=(this.mergeStyle||this.getOptions(t)).style,r={stroke:t.color},n=(0,ng.mix)({},e,r),o=this.getSize(t),i=n.width||o[0],a=n.height||o[1];return(0,rg.__assign)({x:-i/2,y:-a/2,width:i,height:a},n)},update:function(t,e,r){e.getContainer();var n=(this.mergeStyle||this.getOptions(t)).style,o=this.getSize(t),i=e.get("keyShape");t.size||(o[0]=i.attr("width")||n.width,o[1]=i.attr("height")||n.height);var a={stroke:t.color,x:-o[0]/2,y:-o[1]/2,width:o[0],height:o[1]},s=(0,ng.mix)({},n,i.attr(),a);s=(0,ng.mix)(s,t.style),this.updateShape(t,e,s,!1,r)}},"single-node"),bE.registerNode("image",{options:{img:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*eD7nT6tmYgAAAAAAAAAAAABkARQnAQ",size:200,labelCfg:{style:{fontFamily:xb.windowFontFamily}},clipCfg:{show:!1,type:"circle",r:50,rx:50,ry:35,width:50,height:35,points:[[30,12],[12,30],[30,48],[48,30]],path:[["M",25,25],["L",50,25],["A",12.5,12.5,0,1,1,50,50],["A",12.5,12.5,0,1,0,50,50],["L",25,75],["Z"]],x:0,y:0}},shapeType:"image",labelPosition:"bottom",drawShape:function(t,e){var r=this.shapeType,n=this.getShapeStyle(t);delete n.fill;var o=e.addShape(r,{attrs:n,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});return this.drawClip(t,o),o},drawClip:function(t,e){var r=(this.mergeStyle||this.getOptions(t)).clipCfg;if(r.show){var n=r.type,o=r.x,i=r.y,a=r.style;if("circle"===n){var s=r.r;e.setClip({type:"circle",attrs:(0,rg.__assign)({r:s,x:o,y:i},a)})}else if("rect"===n){var u=r.width,l=r.height,c=o-u/2,f=i-l/2;e.setClip({type:"rect",attrs:(0,rg.__assign)({x:c,y:f,width:u,height:l},a)})}else if("ellipse"===n){var h=r.rx,p=r.ry;e.setClip({type:"ellipse",attrs:(0,rg.__assign)({x:o,y:i,rx:h,ry:p},a)})}else if("polygon"===n){var d=r.points;e.setClip({type:"polygon",attrs:(0,rg.__assign)({points:d},a)})}else if("path"===n){var y=r.path;e.setClip({type:"path",attrs:(0,rg.__assign)({path:y},a)})}}},getShapeStyle:function(t){var e=this.mergeStyle||this.getOptions(t),r=e.style,n=e.img,o=this.getSize(t),i=o[0],a=o[1];return r&&(i=r.width||o[0],a=r.height||o[1]),(0,rg.__assign)({x:-i/2,y:-a/2,width:i,height:a,img:n},r)},updateShapeStyle:function(t,e){var r=e.getContainer(),n="".concat(this.itemType,"-shape"),o=r.shapeMap[n]||r.find(function(t){return t.get("className")===n})||e.getKeyShape(),i=this.getShapeStyle(t);o&&!o.destroyed&&o.attr(i)}},"single-node");var cO={triangle:function(t,e,r){void 0===t&&(t=10),void 0===e&&(e=15),void 0===r&&(r=0);var n=2*r;return"M ".concat(n,",0 L ").concat(n+e,",-").concat(t/2," L ").concat(n+e,",").concat(t/2," Z")},vee:function(t,e,r){void 0===t&&(t=15),void 0===e&&(e=20),void 0===r&&(r=0);var n=2*r;return"M ".concat(n,",0 L ").concat(n+e,",-").concat(t/2,"\n        L ").concat(n+2*e/3,",0 L ").concat(n+e,",").concat(t/2," Z")},circle:function(t,e){return void 0===t&&(t=5),void 0===e&&(e=0),"M ".concat(2*e,", 0\n            a ").concat(t,",").concat(t," 0 1,0 ").concat(2*t,",0\n            a ").concat(t,",").concat(t," 0 1,0 ").concat(2*-t,",0")},rect:function(t,e,r){void 0===t&&(t=10),void 0===e&&(e=10),void 0===r&&(r=0);var n=2*r;return"M ".concat(n,",").concat(-t/2," \n        L ").concat(n+e,",").concat(-t/2," \n        L ").concat(n+e,",").concat(t/2," \n        L ").concat(n,",").concat(t/2," Z")},diamond:function(t,e,r){void 0===t&&(t=15),void 0===e&&(e=15),void 0===r&&(r=0);var n=2*r;return"M ".concat(n,",0 \n        L ").concat(n+e/2,",").concat(-t/2," \n        L ").concat(n+e,",0 \n        L ").concat(n+e/2,",").concat(t/2," Z")},triangleRect:function(t,e,r,n,o,i){void 0===t&&(t=15),void 0===e&&(e=15),void 0===r&&(r=15),void 0===n&&(n=3),void 0===o&&(o=5),void 0===i&&(i=0);var a=2*i,s=a+e+o;return"M ".concat(a,",0 L ").concat(a+e,",-").concat(t/2," L ").concat(a+e,",").concat(t/2," Z\n            M ").concat(s,", -").concat(r/2,"\n            L ").concat(s+n," -").concat(r/2,"\n            L ").concat(s+n," ").concat(r/2,"\n            L ").concat(s," ").concat(r/2,"\n            Z")}},fO={collapse:function(t,e,r){return[["M",t-r,e],["a",r,r,0,1,0,2*r,0],["a",r,r,0,1,0,2*-r,0],["M",t-r+4,e],["L",t+r-4,e]]},expand:function(t,e,r){return[["M",t-r,e],["a",r,r,0,1,0,2*r,0],["a",r,r,0,1,0,2*-r,0],["M",t-r+4,e],["L",t-r+2*r-4,e],["M",t-r+r,e-r+4],["L",t,e+r-4]]},upTriangle:function(t,e,r){var n=r*Math.cos(Math.PI/6),o=r*Math.sin(Math.PI/6);return[["M",t-n,e+o],["L",t+n,e+o],["L",t,e-r],["Z"]]},downTriangle:function(t,e,r){var n=r*Math.cos(Math.PI/6),o=r*Math.sin(Math.PI/6);return[["M",t-n,e-o],["L",t+n,e-o],["L",t,e+r],["Z"]]}},hO=bE,pO=["#5F95FF","#61DDAA","#65789B","#F6BD16","#7262FD","#78D3F8","#9661BC","#F6903D","#008685","#F08BB4"],dO=function(t){return"force"===t||"g6force"===t||"gForce"===t||"force2"===t},yO=hg,vO=(0,rg.__assign)((0,rg.__assign)((0,rg.__assign)((0,rg.__assign)((0,rg.__assign)((0,rg.__assign)((0,rg.__assign)({},u),i),l),o),c),f),{transform:yO,mat3:ug}),gO=function(){function t(t){this.graph=t,this.layoutCfg=t.get("layout")||{},this.layoutType=this.getLayoutType(),this.layoutMethods=[],this.initLayout()}return t.prototype.initLayout=function(){},t.prototype.getLayoutType=function(){return this.getLayoutCfgType(this.layoutCfg)},t.prototype.getLayoutCfgType=function(t){var e=t.type;if(e)return e;var r=t.pipes;return Array.isArray(r)?r.map(function(t){return(null===t||void 0===t?void 0:t.type)||""}):null},t.prototype.isLayoutTypeSame=function(t){var e=this.getLayoutCfgType(t),r=Array.isArray(this.layoutType),n=Array.isArray(e);return r&&n?this.layoutType.every(function(t,r){return t===e[r]}):!Array.isArray(e)&&!Array.isArray(this.layoutType)&&(null===t||void 0===t?void 0:t.type)===this.layoutType},t.prototype.refreshLayout=function(){var t=this.graph,e=this.layoutType,r=this.layoutCfg;if(t){var n=(void 0===r?{}:r).animate,o=void 0===n&&("force"===e||"force2"===e),i=dO(e)&&(n||o);t.get("animate")&&!i?t.positionsAnimate("comboCombined"===e):t.refreshPositions("comboCombined"===e)}},t.prototype.changeLayout=function(t){var e=t.disableTriggerLayout,r=(0,rg.__rest)(t,["disableTriggerLayout"]);this.layoutCfg=r,this.layoutType=r.type||this.layoutType,e||this.layout()},t.prototype.changeData=function(t){this.layout(t)},t.prototype.destoryLayoutMethods=function(){var t=this.layoutMethods,e=[];return null===t||void 0===t||t.forEach(function(t){var r,n=null===(r=t.getType)||void 0===r?void 0:r.call(t);n&&e.push(n),t.destroy()}),this.layoutMethods=[],e},t.prototype.destroyLayout=function(){this.destoryLayoutMethods();var t=this.graph;t&&!t.get("destroyed")&&t.set("layout",void 0),this.layoutCfg=void 0,this.layoutType=void 0,this.layoutMethods=void 0},t.prototype.setDataFromGraph=function(){for(var t,e=[],r=[],n=[],o=[],i=[],a=[],s=[],u=this.graph.getNodes(),l=this.graph.getEdges(),c=this.graph.getCombos(),f=u.length,h=0;h<f;h++){var p=u[h];if(p&&!p.destroyed){var d=p.getModel();p.isVisible()?e.push(d):r.push(d)}}var y=l.length;for(h=0;h<y;h++){var v=l[h];if(v&&!v.destroyed){d=v.getModel();v.isVisible()?d.isComboEdge?i.push(d):n.push(d):o.push(d)}}var g=c.length;for(h=0;h<g;h++){var m=c[h];if(!m.destroyed){d=m.getModel();m.isVisible()?a.push(d):s.push(d)}}return{nodes:e,hiddenNodes:r,edges:n,hiddenEdges:o,combos:a,hiddenCombos:s,comboEdges:i,vedges:null===(t=this.graph.get("vedges"))||void 0===t?void 0:t.map(function(t){return t.getModel()})}},t.prototype.relayout=function(t){var e=this,r=this.graph,n=this.layoutMethods,o=this.layoutCfg;if(r&&!r.get("destroyed")){var i=Promise.resolve();if(t){this.data=this.setDataFromGraph();var a=this.data.nodes;if(!a)return!1;i=this.initPositions(o.center,a)}r.emit("beforelayout"),null===n||void 0===n||n.forEach(function(t,r){var a=o[r]||o;i=i.then(function(){var t,i=e.execLayoutMethod(a,r);return r===n.length-1&&(null===(t=o.onAllLayoutEnd)||void 0===t||t.call(o)),i})})}},t.prototype.filterLayoutData=function(t,e){var r,n,o=t.nodes,i=t.edges,a=(0,rg.__rest)(t,["nodes","edges"]);if(!o)return t;r=(0,ng.isFunction)(null===e||void 0===e?void 0:e.nodesFilter)?e.nodesFilter:function(){return!0};var s=o.filter(r);if((0,ng.isFunction)(null===e||void 0===e?void 0:e.edgesFilter))n=e.edgesFilter;else{var u=s.reduce(function(t,e){return t[e.id]=!0,t},{});n=function(t){return u[t.source]&&u[t.target]}}return(0,rg.__assign)({nodes:s,edges:i.filter(n)},a)},t.prototype.getLayoutBBox=function(t){var e=this.graph,r=(0,ng.groupBy)(e.getNodes(),function(t){return t.getModel().layoutOrder}),n=Object.values(r).map(function(t){var e=oE(t);return e.size=[e.width,e.height],e});return{groupNodes:Object.values((0,ng.groupBy)(t,"layoutOrder")),layoutNodes:n}},t.prototype.layoutAnimate=function(){},t.prototype.moveToZero=function(){var t=this.graph.get("data").nodes;if(void 0!==t[0].x&&null!==t[0].x&&!nE(t[0].x)){for(var e=[0,0],r=t.length,n=0;n<r;n++){var o=t[n];e[0]+=o.x,e[1]+=o.y}e[0]/=t.length,e[1]/=t.length;for(n=0;n<r;n++){(o=t[n]).x-=e[0],o.y-=e[1]}}},t.prototype.initPositions=function(t,e){var r;return(0,rg.__awaiter)(this,void 0,void 0,function(){var n,o,i;return(0,rg.__generator)(this,function(a){return n=this.graph,(null===e||void 0===e?void 0:e.length)?(o=e.filter(function(t){return nE(t.x)||nE(t.y)}),(i=o?o.length:0)?[2,null===(r=this.initWithPreset)||void 0===r?void 0:r.call(this,function(){},function(){var e=.85*n.get("width"),r=.85*n.get("height"),a=Math.ceil(Math.sqrt(i)*(e/r)),s=e/(a-1),u=r/(Math.ceil(i/a)-1);isFinite(s)&&s||(s=0),isFinite(u)&&s||(u=0);for(var l=t[0]-e/2,c=t[1]-r/2,f=0;f<i;f++){var h=o[f];nE(+h.x)&&(!1,h.x=f%a*s+l),nE(+h.y)&&(!1,h.y=Math.floor(f/a)*u+c)}})]:[2]):[2,Promise.resolve()]})})},t.prototype.destroy=function(){this.graph=null,this.destoryLayoutMethods(),this.destroyed=!0},t}(),mO=function(){return function(t){this.graph=t,this.destroyed=!1,this.initEvents()}}(),bO=hO.registerNode,wO=hO.registerEdge,SO=hO.registerCombo,xO=ag.registerBehavior,_O=xb,EO=(hO.registerNode,hO.registerEdge,hO.registerCombo,ag.registerBehavior,r(6765));function OO(t,e,r,n){var o=t-r,i=e-n;return Math.sqrt(o*o+i*i)}function PO(t,e,r,n,o,i){return o>=t&&o<=t+r&&i>=e&&i<=e+n}function kO(t,e){return!(e.minX>t.maxX||e.maxX<t.minX||e.minY>t.maxY||e.maxY<t.minY)}function CO(t,e){return t[0]===e[0]&&t[1]===e[1]}var TO=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,AO=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,MO=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,jO=/[\d.]+:(#[^\s]+|[^\)]+\))/gi;function IO(t,e){var r=t.match(jO);(0,ng.each)(r,function(t){var r=t.split(":");e.addColorStop(r[0],r[1])})}function NO(t,e,r){var n=e.getBBox();if(isNaN(n.x)||isNaN(n.y)||isNaN(n.width)||isNaN(n.height))return r;if((0,ng.isString)(r)){if("("===r[1]||"("===r[2]){if("l"===r[0])return function(t,e,r){var n,o,i=TO.exec(r),a=parseFloat(i[1])%360*(Math.PI/180),s=i[2],u=e.getBBox();a>=0&&a<.5*Math.PI?(n={x:u.minX,y:u.minY},o={x:u.maxX,y:u.maxY}):.5*Math.PI<=a&&a<Math.PI?(n={x:u.maxX,y:u.minY},o={x:u.minX,y:u.maxY}):Math.PI<=a&&a<1.5*Math.PI?(n={x:u.maxX,y:u.maxY},o={x:u.minX,y:u.minY}):(n={x:u.minX,y:u.maxY},o={x:u.maxX,y:u.minY});var l=Math.tan(a),c=l*l,f=(o.x-n.x+l*(o.y-n.y))/(c+1)+n.x,h=l*(o.x-n.x+l*(o.y-n.y))/(c+1)+n.y,p=t.createLinearGradient(n.x,n.y,f,h);return IO(s,p),p}(t,e,r);if("r"===r[0])return function(t,e,r){var n=AO.exec(r),o=parseFloat(n[1]),i=parseFloat(n[2]),a=parseFloat(n[3]),s=n[4];if(0===a){var u=s.match(jO);return u[u.length-1].split(":")[1]}var l=e.getBBox(),c=l.maxX-l.minX,f=l.maxY-l.minY,h=Math.sqrt(c*c+f*f)/2,p=t.createRadialGradient(l.minX+c*o,l.minY+f*i,0,l.minX+c/2,l.minY+f/2,a*h);return IO(s,p),p}(t,e,r);if("p"===r[0])return function(t,e,r){if(e.get("patternSource")&&e.get("patternSource")===r)return e.get("pattern");var n,o,i=MO.exec(r),a=i[1],s=i[2];function u(){n=t.createPattern(o,a),e.set("pattern",n),e.set("patternSource",r)}switch(a){case"a":a="repeat";break;case"x":a="repeat-x";break;case"y":a="repeat-y";break;case"n":a="no-repeat";break;default:a="no-repeat"}return o=new Image,s.match(/^data:/i)||(o.crossOrigin="Anonymous"),o.src=s,o.complete?u():(o.onload=u,o.src=o.src),n}(t,e,r)}return r}return r instanceof CanvasPattern?r:void 0}function LO(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function RO(t,e){return LO(t)*LO(e)?(t[0]*e[0]+t[1]*e[1])/(LO(t)*LO(e)):1}function DO(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(RO(t,e))}function BO(t,e){var r=e[1],n=e[2],o=(0,ng.mod)((0,ng.toRadian)(e[3]),2*Math.PI),i=e[4],a=e[5],s=t[0],u=t[1],l=e[6],c=e[7],f=Math.cos(o)*(s-l)/2+Math.sin(o)*(u-c)/2,h=-1*Math.sin(o)*(s-l)/2+Math.cos(o)*(u-c)/2,p=f*f/(r*r)+h*h/(n*n);p>1&&(r*=Math.sqrt(p),n*=Math.sqrt(p));var d=r*r*(h*h)+n*n*(f*f),y=d?Math.sqrt((r*r*(n*n)-d)/d):1;i===a&&(y*=-1),isNaN(y)&&(y=0);var v=n?y*r*h/n:0,g=r?y*-n*f/r:0,m=(s+l)/2+Math.cos(o)*v-Math.sin(o)*g,b=(u+c)/2+Math.sin(o)*v+Math.cos(o)*g,w=[(f-v)/r,(h-g)/n],S=[(-1*f-v)/r,(-1*h-g)/n],x=DO([1,0],w),_=DO(w,S);return RO(w,S)<=-1&&(_=Math.PI),RO(w,S)>=1&&(_=0),0===a&&_>0&&(_-=2*Math.PI),1===a&&_<0&&(_+=2*Math.PI),{cx:m,cy:b,rx:CO(t,[l,c])?0:r,ry:CO(t,[l,c])?0:n,startAngle:x,endAngle:x+_,xRotation:o,arcFlag:i,sweepFlag:a}}function FO(t){"@babel/helpers - typeof";return(FO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var GO=Math.sin,UO=Math.cos,zO=Math.atan2,VO=Math.PI;function HO(t,e,r,n,o,i,a){var s=e.stroke,u=e.lineWidth,l=zO(n-i,r-o),c=new EP({type:"path",canvas:t.get("canvas"),isArrowShape:!0,attrs:{path:"M"+10*UO(VO/6)+","+10*GO(VO/6)+" L0,0 L"+10*UO(VO/6)+",-"+10*GO(VO/6),stroke:s,lineWidth:u}});c.translate(o,i),c.rotateAtPoint(o,i,l),t.set(a?"startArrowShape":"endArrowShape",c)}function WO(t,e,r,n,o,i,a){var s=e.startArrow,u=e.endArrow,l=e.stroke,c=e.lineWidth,f=a?s:u,h=f.d,p=f.fill,d=f.stroke,y=f.lineWidth,v=(0,rg.__rest)(f,["d","fill","stroke","lineWidth"]),g=zO(n-i,r-o);h&&(o-=UO(g)*h,i-=GO(g)*h);var m=new EP({type:"path",canvas:t.get("canvas"),isArrowShape:!0,attrs:(0,rg.__assign)((0,rg.__assign)({},v),{stroke:d||l,lineWidth:y||c,fill:p})});m.translate(o,i),m.rotateAtPoint(o,i,g),t.set(a?"startArrowShape":"endArrowShape",m)}function qO(t,e,r,n,o){var i=zO(n-e,r-t);return{dx:UO(i)*o,dy:GO(i)*o}}function YO(t,e,r,n,o,i){"object"===FO(e.startArrow)?WO(t,e,r,n,o,i,!0):e.startArrow?HO(t,e,r,n,o,i,!0):t.set("startArrowShape",null)}function XO(t,e,r,n,o,i){"object"===FO(e.endArrow)?WO(t,e,r,n,o,i,!1):e.endArrow?HO(t,e,r,n,o,i,!1):t.set("startArrowShape",null)}var JO={fill:"fillStyle",stroke:"strokeStyle",opacity:"globalAlpha"};function KO(t,e){var r=e.attr();for(var n in r){var o=r[n],i=JO[n]?JO[n]:n;"matrix"===i&&o?t.transform(o[0],o[1],o[3],o[4],o[6],o[7]):"lineDash"===i&&t.setLineDash?(0,ng.isArray)(o)&&t.setLineDash(o):("strokeStyle"===i||"fillStyle"===i?o=NO(t,e,o):"globalAlpha"===i&&(o*=t.globalAlpha),t[i]=o)}}function QO(t,e,r){for(var n=0;n<e.length;n++){var o=e[n];o.cfg.visible?o.draw(t,r):o.skipDraw()}}function ZO(t,e,r){var n=t.get("refreshElements");(0,ng.each)(n,function(e){if(e!==t)for(var r=e.cfg.parent;r&&r!==t&&!r.cfg.refresh;)r.cfg.refresh=!0,r=r.cfg.parent}),n[0]===t?$O(e,r):function t(e,r){for(var n=0;n<e.length;n++){var o=e[n];if(o.cfg.visible)if(o.cfg.hasChanged)o.cfg.refresh=!0,o.isGroup()&&$O(o.cfg.children,r);else if(o.cfg.refresh)o.isGroup()&&t(o.cfg.children,r);else{var i=tP(o,r);o.cfg.refresh=i,i&&o.isGroup()&&t(o.cfg.children,r)}}}(e,r)}function $O(t,e){for(var r=0;r<t.length;r++){var n=t[r];n.cfg.visible&&(n.cfg.refresh=!0,n.isGroup()&&$O(n.get("children"),e))}}function tP(t,e){var r=t.cfg.cacheCanvasBBox;return t.cfg.isInView&&r&&kO(r,e)}function eP(t,e,r,n){var o=r.path,i=r.startArrow,a=r.endArrow;if(o){var s=[0,0],u=[0,0],l={dx:0,dy:0};e.beginPath();for(var c=0;c<o.length;c++){var f=o[c],h=f[0];if(0===c&&i&&i.d)l=qO((p=t.getStartTangent())[0][0],p[0][1],p[1][0],p[1][1],i.d);else if(c===o.length-2&&"Z"===o[c+1][0]&&a&&a.d){if("Z"===o[c+1][0])l=qO((p=t.getEndTangent())[0][0],p[0][1],p[1][0],p[1][1],a.d)}else if(c===o.length-1&&a&&a.d){var p;if("Z"!==o[0])l=qO((p=t.getEndTangent())[0][0],p[0][1],p[1][0],p[1][1],a.d)}var d=l.dx,y=l.dy;switch(h){case"M":e.moveTo(f[1]-d,f[2]-y),u=[f[1],f[2]];break;case"L":e.lineTo(f[1]-d,f[2]-y);break;case"Q":e.quadraticCurveTo(f[1],f[2],f[3]-d,f[4]-y);break;case"C":e.bezierCurveTo(f[1],f[2],f[3],f[4],f[5]-d,f[6]-y);break;case"A":var v=void 0;n?(v=n[c])||(v=BO(s,f),n[c]=v):v=BO(s,f);var g=v.cx,m=v.cy,b=v.rx,w=v.ry,S=v.startAngle,x=v.endAngle,_=v.xRotation,E=v.sweepFlag;if(e.ellipse)e.ellipse(g,m,b,w,_,S,x,1-E);else{var O=b>w?b:w,P=b>w?1:b/w,k=b>w?w/b:1;e.translate(g,m),e.rotate(_),e.scale(P,k),e.arc(0,0,O,S,x,1-E),e.scale(1/P,1/k),e.rotate(-_),e.translate(-g,-m)}break;case"Z":e.closePath()}if("Z"===h)s=u;else{var C=f.length;s=[f[C-2],f[C-1]]}}}}function rP(t,e){var r=t.get("canvas");r&&("remove"===e&&(t._cacheCanvasBBox=t.get("cacheCanvasBBox")),t.get("hasChanged")||(t.set("hasChanged",!0),t.cfg.parent&&t.cfg.parent.get("hasChanged")||(r.refreshElement(t,e,r),r.get("autoDraw")&&r.draw())))}function nP(t){var e,r,n;if(t.destroyed)e=t._cacheCanvasBBox;else{var o=t.get("cacheCanvasBBox"),i=o&&!(!o.width||!o.height),a=t.getCanvasBBox(),s=a&&!(!a.width||!a.height);i&&s?(n=a,e=(r=o)&&n?{minX:Math.min(r.minX,n.minX),minY:Math.min(r.minY,n.minY),maxX:Math.max(r.maxX,n.maxX),maxY:Math.max(r.maxY,n.maxY)}:r||n):i?e=o:s&&(e=a)}return e}var oP=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,rg.__extends)(e,t),e.prototype.onCanvasChange=function(t){rP(this,t)},e.prototype.getShapeBase=function(){return h},e.prototype.getGroupBase=function(){return e},e.prototype._applyClip=function(t,e){e&&(t.save(),KO(t,e),e.createPath(t),t.restore(),t.clip(),e._afterDraw())},e.prototype.cacheCanvasBBox=function(){var t=this.cfg.children,e=[],r=[];(0,ng.each)(t,function(t){var n=t.cfg.cacheCanvasBBox;n&&t.cfg.isInView&&(e.push(n.minX,n.maxX),r.push(n.minY,n.maxY))});var n=null;if(e.length){var o=(0,ng.min)(e),i=(0,ng.max)(e),a=(0,ng.min)(r),s=(0,ng.max)(r);n={minX:o,minY:a,x:o,y:a,maxX:i,maxY:s,width:i-o,height:s-a};var u=this.cfg.canvas;if(u){var l=u.getViewRange();this.set("isInView",kO(n,l))}}else this.set("isInView",!1);this.set("cacheCanvasBBox",n)},e.prototype.draw=function(t,e){var r=this.cfg.children,n=!e||this.cfg.refresh;r.length&&n&&(t.save(),KO(t,this),this._applyClip(t,this.getClip()),QO(t,r,e),t.restore(),this.cacheCanvasBBox()),this.cfg.refresh=null,this.set("hasChanged",!1)},e.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("hasChanged",!1)},e}(Yx),iP=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,rg.__extends)(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return(0,rg.__assign)((0,rg.__assign)({},e),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},e.prototype.getShapeBase=function(){return h},e.prototype.getGroupBase=function(){return oP},e.prototype.onCanvasChange=function(t){rP(this,t)},e.prototype.calculateBBox=function(){var t=this.get("type"),e=this.getHitLineWidth(),r=Qx(t)(this),n=e/2,o=r.x-n,i=r.y-n,a=r.x+r.width+n,s=r.y+r.height+n;return{x:o,minX:o,y:i,minY:i,width:r.width+e,height:r.height+e,maxX:a,maxY:s}},e.prototype.isFill=function(){return!!this.attrs.fill||this.isClipShape()},e.prototype.isStroke=function(){return!!this.attrs.stroke},e.prototype._applyClip=function(t,e){e&&(t.save(),KO(t,e),e.createPath(t),t.restore(),t.clip(),e._afterDraw())},e.prototype.draw=function(t,e){var r=this.cfg.clipShape;if(e){if(!1===this.cfg.refresh)return void this.set("hasChanged",!1);if(!kO(e,this.getCanvasBBox()))return this.set("hasChanged",!1),void(this.cfg.isInView&&this._afterDraw())}t.save(),KO(t,this),this._applyClip(t,r),this.drawPath(t),t.restore(),this._afterDraw()},e.prototype.getCanvasViewBox=function(){var t=this.cfg.canvas;return t?t.getViewRange():null},e.prototype.cacheCanvasBBox=function(){var t=this.getCanvasViewBox();if(t){var e=this.getCanvasBBox(),r=kO(e,t);this.set("isInView",r),r?this.set("cacheCanvasBBox",e):this.set("cacheCanvasBBox",null)}},e.prototype._afterDraw=function(){this.cacheCanvasBBox(),this.set("hasChanged",!1),this.set("refresh",null)},e.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("isInView",null),this.set("hasChanged",!1)},e.prototype.drawPath=function(t){this.createPath(t),this.strokeAndFill(t),this.afterDrawPath(t)},e.prototype.fill=function(t){t.fill()},e.prototype.stroke=function(t){t.stroke()},e.prototype.strokeAndFill=function(t){var e=this.attrs,r=e.lineWidth,n=e.opacity,o=e.strokeOpacity,i=e.fillOpacity;this.isFill()&&((0,ng.isNil)(i)||1===i?this.fill(t):(t.globalAlpha=i,this.fill(t),t.globalAlpha=n)),this.isStroke()&&r>0&&((0,ng.isNil)(o)||1===o||(t.globalAlpha=o),this.stroke(t)),this.afterDrawPath(t)},e.prototype.createPath=function(t){},e.prototype.afterDrawPath=function(t){},e.prototype.isInShape=function(t,e){var r=this.isStroke(),n=this.isFill(),o=this.getHitLineWidth();return this.isInStrokeOrPath(t,e,r,n,o)},e.prototype.isInStrokeOrPath=function(t,e,r,n,o){return!1},e.prototype.getHitLineWidth=function(){if(!this.isStroke())return 0;var t=this.attrs;return t.lineWidth+t.lineAppendWidth},e}(Xx),aP=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,rg.__extends)(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return(0,rg.__assign)((0,rg.__assign)({},e),{x:0,y:0,r:0})},e.prototype.isInStrokeOrPath=function(t,e,r,n,o){var i=this.attr(),a=i.x,s=i.y,u=i.r,l=o/2,c=OO(a,s,t,e);return n&&r?c<=u+l:n?c<=u:!!r&&(c>=u-l&&c<=u+l)},e.prototype.createPath=function(t){var e=this.attr(),r=e.x,n=e.y,o=e.r;t.beginPath(),t.arc(r,n,o,0,2*Math.PI,!1),t.closePath()},e}(iP);function sP(t,e,r,n){return t/(r*r)+e/(n*n)}var uP=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,rg.__extends)(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return(0,rg.__assign)((0,rg.__assign)({},e),{x:0,y:0,rx:0,ry:0})},e.prototype.isInStrokeOrPath=function(t,e,r,n,o){var i=this.attr(),a=o/2,s=i.x,u=i.y,l=i.rx,c=i.ry,f=(t-s)*(t-s),h=(e-u)*(e-u);return n&&r?sP(f,h,l+a,c+a)<=1:n?sP(f,h,l,c)<=1:!!r&&(sP(f,h,l-a,c-a)>=1&&sP(f,h,l+a,c+a)<=1)},e.prototype.createPath=function(t){var e=this.attr(),r=e.x,n=e.y,o=e.rx,i=e.ry;if(t.beginPath(),t.ellipse)t.ellipse(r,n,o,i,0,0,2*Math.PI,!1);else{var a=o>i?o:i,s=o>i?1:o/i,u=o>i?i/o:1;t.save(),t.translate(r,n),t.scale(s,u),t.arc(0,0,a,0,2*Math.PI),t.restore(),t.closePath()}},e}(iP);function lP(t){return t instanceof HTMLElement&&(0,ng.isString)(t.nodeName)&&"CANVAS"===t.nodeName.toUpperCase()}var cP=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,rg.__extends)(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return(0,rg.__assign)((0,rg.__assign)({},e),{x:0,y:0,width:0,height:0})},e.prototype.initAttrs=function(t){this._setImage(t.img)},e.prototype.isStroke=function(){return!1},e.prototype.isOnlyHitBox=function(){return!0},e.prototype._afterLoading=function(){if(!0===this.get("toDraw")){var t=this.get("canvas");t?t.draw():this.createPath(this.get("context"))}},e.prototype._setImage=function(t){var e=this,r=this.attrs;if((0,ng.isString)(t)){var n=new Image;n.onload=function(){if(e.destroyed)return!1;e.attr("img",n),e.set("loading",!1),e._afterLoading();var t=e.get("callback");t&&t.call(e)},n.crossOrigin="Anonymous",n.src=t,this.set("loading",!0)}else t instanceof Image?(r.width||(r.width=t.width),r.height||(r.height=t.height)):lP(t)&&(r.width||(r.width=Number(t.getAttribute("width"))),r.height||(r.height,Number(t.getAttribute("height"))))},e.prototype.onAttrChange=function(e,r,n){t.prototype.onAttrChange.call(this,e,r,n),"img"===e&&this._setImage(r)},e.prototype.createPath=function(t){if(this.get("loading"))return this.set("toDraw",!0),void this.set("context",t);var e=this.attr(),r=e.x,n=e.y,o=e.width,i=e.height,a=e.sx,s=e.sy,u=e.swidth,l=e.sheight,c=e.img;(c instanceof Image||lP(c))&&((0,ng.isNil)(a)||(0,ng.isNil)(s)||(0,ng.isNil)(u)||(0,ng.isNil)(l)?t.drawImage(c,r,n,o,i):t.drawImage(c,a,s,u,l,r,n,o,i))},e}(iP);function fP(t,e,r,n,o,i,a){var s=Math.min(t,r),u=Math.max(t,r),l=Math.min(e,n),c=Math.max(e,n),f=o/2;return i>=s-f&&i<=u+f&&a>=l-f&&a<=c+f&&o_.pointToLine(t,e,r,n,i,a)<=o/2}var hP=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,rg.__extends)(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return(0,rg.__assign)((0,rg.__assign)({},e),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},e.prototype.initAttrs=function(t){this.setArrow()},e.prototype.onAttrChange=function(e,r,n){t.prototype.onAttrChange.call(this,e,r,n),this.setArrow()},e.prototype.setArrow=function(){var t=this.attr(),e=t.x1,r=t.y1,n=t.x2,o=t.y2,i=t.startArrow,a=t.endArrow;i&&YO(this,t,n,o,e,r),a&&XO(this,t,e,r,n,o)},e.prototype.isInStrokeOrPath=function(t,e,r,n,o){if(!r||!o)return!1;var i=this.attr();return fP(i.x1,i.y1,i.x2,i.y2,o,t,e)},e.prototype.createPath=function(t){var e=this.attr(),r=e.x1,n=e.y1,o=e.x2,i=e.y2,a=e.startArrow,s=e.endArrow,u={dx:0,dy:0},l={dx:0,dy:0};a&&a.d&&(u=qO(r,n,o,i,e.startArrow.d)),s&&s.d&&(l=qO(r,n,o,i,e.endArrow.d)),t.beginPath(),t.moveTo(r+u.dx,n+u.dy),t.lineTo(o-l.dx,i-l.dy)},e.prototype.afterDrawPath=function(t){var e=this.get("startArrowShape"),r=this.get("endArrowShape");e&&e.draw(t),r&&r.draw(t)},e.prototype.getTotalLength=function(){var t=this.attr(),e=t.x1,r=t.y1,n=t.x2,o=t.y2;return o_.length(e,r,n,o)},e.prototype.getPoint=function(t){var e=this.attr(),r=e.x1,n=e.y1,o=e.x2,i=e.y2;return o_.pointAt(r,n,o,i,t)},e}(iP),pP={circle:function(t,e,r){return[["M",t-r,e],["A",r,r,0,1,0,t+r,e],["A",r,r,0,1,0,t-r,e]]},square:function(t,e,r){return[["M",t-r,e-r],["L",t+r,e-r],["L",t+r,e+r],["L",t-r,e+r],["Z"]]},diamond:function(t,e,r){return[["M",t-r,e],["L",t,e-r],["L",t+r,e],["L",t,e+r],["Z"]]},triangle:function(t,e,r){var n=r*Math.sin(1/3*Math.PI);return[["M",t-r,e+n],["L",t,e-n],["L",t+r,e+n],["Z"]]},"triangle-down":function(t,e,r){var n=r*Math.sin(1/3*Math.PI);return[["M",t-r,e-n],["L",t+r,e-n],["L",t,e+n],["Z"]]}},dP=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,rg.__extends)(e,t),e.prototype.initAttrs=function(t){this._resetParamsCache()},e.prototype._resetParamsCache=function(){this.set("paramsCache",{})},e.prototype.onAttrChange=function(e,r,n){t.prototype.onAttrChange.call(this,e,r,n),-1!==["symbol","x","y","r","radius"].indexOf(e)&&this._resetParamsCache()},e.prototype.isOnlyHitBox=function(){return!0},e.prototype._getR=function(t){return(0,ng.isNil)(t.r)?t.radius:t.r},e.prototype._getPath=function(){var t,r,n=this.attr(),o=n.x,i=n.y,a=n.symbol||"circle",s=this._getR(n);if((0,ng.isFunction)(a))r=V_(r=(t=a)(o,i,s));else{if(!(t=e.Symbols[a]))return console.warn(a+" marker is not supported."),null;r=t(o,i,s)}return r},e.prototype.createPath=function(t){eP(this,t,{path:this._getPath()},this.get("paramsCache"))},e.Symbols=pP,e}(iP);function yP(t,e,r){var n=A_();return t.createPath(n),n.isPointInPath(e,r)}var vP=1e-6;function gP(t){return Math.abs(t)<vP?0:t<0?-1:1}function mP(t,e,r){return(r[0]-t[0])*(e[1]-t[1])==(e[0]-t[0])*(r[1]-t[1])&&Math.min(t[0],e[0])<=r[0]&&r[0]<=Math.max(t[0],e[0])&&Math.min(t[1],e[1])<=r[1]&&r[1]<=Math.max(t[1],e[1])}function bP(t,e,r){var n=!1,o=t.length;if(o<=2)return!1;for(var i=0;i<o;i++){var a=t[i],s=t[(i+1)%o];if(mP(a,s,[e,r]))return!0;gP(a[1]-r)>0!=gP(s[1]-r)>0&&gP(e-(r-a[1])*(a[0]-s[0])/(a[1]-s[1])-a[0])<0&&(n=!n)}return n}function wP(t,e,r,n,o,i,a,s){var u=(Math.atan2(s-e,a-t)+2*Math.PI)%(2*Math.PI);if(u<n||u>o)return!1;var l={x:t+r*Math.cos(u),y:e+r*Math.sin(u)};return OO(l.x,l.y,a,s)<=i/2}var SP=hg;var xP=(0,rg.__assign)({hasArc:function(t){for(var e=!1,r=t.length,n=0;n<r;n++){var o=t[n][0];if("C"===o||"A"===o||"Q"===o){e=!0;break}}return e},extractPolygons:function(t){for(var e=t.length,r=[],n=[],o=[],i=0;i<e;i++){var a=t[i],s=a[0];"M"===s?(o.length&&(n.push(o),o=[]),o.push([a[1],a[2]])):"Z"===s?o.length&&(r.push(o),o=[]):o.push([a[1],a[2]])}return o.length>0&&n.push(o),{polygons:r,polylines:n}},isPointInStroke:function(t,e,r,n,o){for(var i=!1,a=e/2,s=0;s<t.length;s++){var u=t[s],l=u.currentPoint,c=u.params,f=u.prePoint,h=u.box;if(!h||PO(h.x-a,h.y-a,h.width+e,h.height+e,r,n)){switch(u.command){case"L":case"Z":i=fP(f[0],f[1],l[0],l[1],e,r,n);break;case"Q":i=f_.pointDistance(f[0],f[1],c[1],c[2],c[3],c[4],r,n)<=e/2;break;case"C":i=g_.pointDistance(f[0],f[1],c[1],c[2],c[3],c[4],c[5],c[6],r,n,o)<=e/2;break;case"A":var p=u.arcParams,d=p.cx,y=p.cy,v=p.rx,g=p.ry,m=p.startAngle,b=p.endAngle,w=p.xRotation,S=[r,n,1],x=v>g?v:g,_=SP(null,[["t",-d,-y],["r",-w],["s",1/(v>g?1:v/g),1/(v>g?g/v:1)]]);Im.transformMat3(S,S,_),i=wP(0,0,x,m,b,e,S[0],S[1])}if(i)break}}return i}},a);function _P(t,e,r){for(var n=!1,o=0;o<t.length;o++){if(n=bP(t[o],e,r))break}return n}var EP=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,rg.__extends)(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return(0,rg.__assign)((0,rg.__assign)({},e),{startArrow:!1,endArrow:!1})},e.prototype.initAttrs=function(t){this._setPathArr(t.path),this.setArrow()},e.prototype.onAttrChange=function(e,r,n){t.prototype.onAttrChange.call(this,e,r,n),"path"===e&&this._setPathArr(r),this.setArrow()},e.prototype._setPathArr=function(t){this.attrs.path=V_(t);var e=xP.hasArc(t);this.set("hasArc",e),this.set("paramsCache",{}),this.set("segments",null),this.set("curve",null),this.set("tCache",null),this.set("totalLength",null)},e.prototype.getSegments=function(){var t=this.get("segements");return t||(t=K_(this.attr("path")),this.set("segments",t)),t},e.prototype.setArrow=function(){var t,e=this.attr(),r=e.startArrow,n=e.endArrow;r&&YO(this,e,(t=this.getStartTangent())[0][0],t[0][1],t[1][0],t[1][1]);n&&XO(this,e,(t=this.getEndTangent())[0][0],t[0][1],t[1][0],t[1][1])},e.prototype.isInStrokeOrPath=function(t,e,r,n,o){var i=this.getSegments(),a=this.get("hasArc"),s=!1;if(r){var u=this.getTotalLength();s=xP.isPointInStroke(i,o,t,e,u)}if(!s&&n)if(a)s=yP(this,t,e);else{var l=this.attr("path"),c=xP.extractPolygons(l);s=_P(c.polygons,t,e)||_P(c.polylines,t,e)}return s},e.prototype.createPath=function(t){eP(this,t,this.attr(),this.get("paramsCache"))},e.prototype.afterDrawPath=function(t){var e=this.get("startArrowShape"),r=this.get("endArrowShape");e&&e.draw(t),r&&r.draw(t)},e.prototype.getTotalLength=function(){var t=this.get("totalLength");return(0,ng.isNil)(t)?(this._calculateCurve(),this._setTcache(),this.get("totalLength")):t},e.prototype.getPoint=function(t){var e,r,n=this.get("tCache");n||(this._calculateCurve(),this._setTcache(),n=this.get("tCache"));var o=this.get("curve");if(!n||0===n.length)return o?{x:o[0][1],y:o[0][2]}:null;(0,ng.each)(n,function(n,o){t>=n[0]&&t<=n[1]&&(e=(t-n[0])/(n[1]-n[0]),r=o)});var i=o[r];if((0,ng.isNil)(i)||(0,ng.isNil)(r))return null;var a=i.length,s=o[r+1];return g_.pointAt(i[a-2],i[a-1],s[1],s[2],s[3],s[4],s[5],s[6],e)},e.prototype._calculateCurve=function(){var t=this.attr().path;this.set("curve",xP.pathToCurve(t))},e.prototype._setTcache=function(){var t,e,r,n,o=0,i=0,a=[],s=this.get("curve");s&&((0,ng.each)(s,function(t,e){r=s[e+1],n=t.length,r&&(o+=g_.length(t[n-2],t[n-1],r[1],r[2],r[3],r[4],r[5],r[6])||0)}),this.set("totalLength",o),0!==o?((0,ng.each)(s,function(u,l){r=s[l+1],n=u.length,r&&((t=[])[0]=i/o,e=g_.length(u[n-2],u[n-1],r[1],r[2],r[3],r[4],r[5],r[6]),i+=e||0,t[1]=i/o,a.push(t))}),this.set("tCache",a)):this.set("tCache",[]))},e.prototype.getStartTangent=function(){var t,e=this.getSegments();if(e.length>1){var r=e[0].currentPoint,n=e[1].currentPoint,o=e[1].startTangent;t=[],o?(t.push([r[0]-o[0],r[1]-o[1]]),t.push([r[0],r[1]])):(t.push([n[0],n[1]]),t.push([r[0],r[1]]))}return t},e.prototype.getEndTangent=function(){var t,e=this.getSegments(),r=e.length;if(r>1){var n=e[r-2].currentPoint,o=e[r-1].currentPoint,i=e[r-1].endTangent;t=[],i?(t.push([o[0]-i[0],o[1]-i[1]]),t.push([o[0],o[1]])):(t.push([n[0],n[1]]),t.push([o[0],o[1]]))}return t},e}(iP);function OP(t,e,r,n,o){var i=t.length;if(i<2)return!1;for(var a=0;a<i-1;a++){if(fP(t[a][0],t[a][1],t[a+1][0],t[a+1][1],e,r,n))return!0}if(o){var s=t[0],u=t[i-1];if(fP(s[0],s[1],u[0],u[1],e,r,n))return!0}return!1}var PP=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,rg.__extends)(e,t),e.prototype.isInStrokeOrPath=function(t,e,r,n,o){var i=this.attr().points,a=!1;return r&&(a=OP(i,o,t,e,!0)),!a&&n&&(a=bP(i,t,e)),a},e.prototype.createPath=function(t){var e=this.attr().points;if(!(e.length<2)){t.beginPath();for(var r=0;r<e.length;r++){var n=e[r];0===r?t.moveTo(n[0],n[1]):t.lineTo(n[0],n[1])}t.closePath()}},e}(iP),kP=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,rg.__extends)(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return(0,rg.__assign)((0,rg.__assign)({},e),{startArrow:!1,endArrow:!1})},e.prototype.initAttrs=function(t){this.setArrow()},e.prototype.onAttrChange=function(e,r,n){t.prototype.onAttrChange.call(this,e,r,n),this.setArrow(),-1!==["points"].indexOf(e)&&this._resetCache()},e.prototype._resetCache=function(){this.set("totalLength",null),this.set("tCache",null)},e.prototype.setArrow=function(){var t=this.attr(),e=this.attrs,r=e.points,n=e.startArrow,o=e.endArrow,i=r.length,a=r[0][0],s=r[0][1],u=r[i-1][0],l=r[i-1][1];n&&YO(this,t,r[1][0],r[1][1],a,s),o&&XO(this,t,r[i-2][0],r[i-2][1],u,l)},e.prototype.isFill=function(){return!1},e.prototype.isInStrokeOrPath=function(t,e,r,n,o){return!(!r||!o)&&OP(this.attr().points,o,t,e,!1)},e.prototype.isStroke=function(){return!0},e.prototype.createPath=function(t){var e=this.attr(),r=e.points,n=e.startArrow,o=e.endArrow,i=r.length;if(!(r.length<2)){var a,s=r[0][0],u=r[0][1],l=r[i-1][0],c=r[i-1][1];if(n&&n.d)s+=(a=qO(s,u,r[1][0],r[1][1],n.d)).dx,u+=a.dy;if(o&&o.d)l-=(a=qO(r[i-2][0],r[i-2][1],l,c,o.d)).dx,c-=a.dy;t.beginPath(),t.moveTo(s,u);for(var f=0;f<i-1;f++){var h=r[f];t.lineTo(h[0],h[1])}t.lineTo(l,c)}},e.prototype.afterDrawPath=function(t){var e=this.get("startArrowShape"),r=this.get("endArrowShape");e&&e.draw(t),r&&r.draw(t)},e.prototype.getTotalLength=function(){var t=this.attr().points,e=this.get("totalLength");return(0,ng.isNil)(e)?(this.set("totalLength",P_(t)),this.get("totalLength")):e},e.prototype.getPoint=function(t){var e,r,n=this.attr().points,o=this.get("tCache");return o||(this._setTcache(),o=this.get("tCache")),(0,ng.each)(o,function(n,o){t>=n[0]&&t<=n[1]&&(e=(t-n[0])/(n[1]-n[0]),r=o)}),o_.pointAt(n[r][0],n[r][1],n[r+1][0],n[r+1][1],e)},e.prototype._setTcache=function(){var t=this.attr().points;if(t&&0!==t.length){var e=this.getTotalLength();if(!(e<=0)){var r,n,o=0,i=[];(0,ng.each)(t,function(a,s){t[s+1]&&((r=[])[0]=o/e,n=o_.length(a[0],a[1],t[s+1][0],t[s+1][1]),o+=n,r[1]=o/e,i.push(r))}),this.set("tCache",i)}}},e.prototype.getStartTangent=function(){var t=this.attr().points,e=[];return e.push([t[1][0],t[1][1]]),e.push([t[0][0],t[0][1]]),e},e.prototype.getEndTangent=function(){var t=this.attr().points,e=t.length-1,r=[];return r.push([t[e-1][0],t[e-1][1]]),r.push([t[e][0],t[e][1]]),r},e}(iP);var CP=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,rg.__extends)(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return(0,rg.__assign)((0,rg.__assign)({},e),{x:0,y:0,width:0,height:0,radius:0})},e.prototype.isInStrokeOrPath=function(t,e,r,n,o){var i=this.attr(),a=i.x,s=i.y,u=i.width,l=i.height,c=i.radius;if(c){var f=!1;return r&&(f=function(t,e,r,n,o,i,a,s){return fP(t+o,e,t+r-o,e,i,a,s)||fP(t+r,e+o,t+r,e+n-o,i,a,s)||fP(t+r-o,e+n,t+o,e+n,i,a,s)||fP(t,e+n-o,t,e+o,i,a,s)||wP(t+r-o,e+o,o,1.5*Math.PI,2*Math.PI,i,a,s)||wP(t+r-o,e+n-o,o,0,.5*Math.PI,i,a,s)||wP(t+o,e+n-o,o,.5*Math.PI,Math.PI,i,a,s)||wP(t+o,e+o,o,Math.PI,1.5*Math.PI,i,a,s)}(a,s,u,l,c,o,t,e)),!f&&n&&(f=yP(this,t,e)),f}var h=o/2;return n&&r?PO(a-h,s-h,u+h,l+h,t,e):n?PO(a,s,u,l,t,e):r?function(t,e,r,n,o,i,a){var s=o/2;return PO(t-s,e-s,r,o,i,a)||PO(t+r-s,e-s,o,n,i,a)||PO(t+s,e+n-s,r,o,i,a)||PO(t-s,e+s,o,n,i,a)}(a,s,u,l,o,t,e):void 0},e.prototype.createPath=function(t){var e=this.attr(),r=e.x,n=e.y,o=e.width,i=e.height,a=e.radius;if(t.beginPath(),0===a)t.rect(r,n,o,i);else{var s=function(t){var e=0,r=0,n=0,o=0;return(0,ng.isArray)(t)?1===t.length?e=r=n=o=t[0]:2===t.length?(e=n=t[0],r=o=t[1]):3===t.length?(e=t[0],r=o=t[1],n=t[2]):(e=t[0],r=t[1],n=t[2],o=t[3]):e=r=n=o=t,[e,r,n,o]}(a),u=s[0],l=s[1],c=s[2],f=s[3];t.moveTo(r+u,n),t.lineTo(r+o-l,n),0!==l&&t.arc(r+o-l,n+l,l,-Math.PI/2,0),t.lineTo(r+o,n+i-c),0!==c&&t.arc(r+o-c,n+i-c,c,0,Math.PI/2),t.lineTo(r+f,n+i),0!==f&&t.arc(r+f,n+i-f,f,Math.PI/2,Math.PI),t.lineTo(r,n+u),0!==u&&t.arc(r+u,n+u,u,Math.PI,1.5*Math.PI),t.closePath()}},e}(iP),TP=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,rg.__extends)(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return(0,rg.__assign)((0,rg.__assign)({},e),{x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"})},e.prototype.isOnlyHitBox=function(){return!0},e.prototype.initAttrs=function(t){this._assembleFont(),t.text&&this._setText(t.text)},e.prototype._assembleFont=function(){var t=this.attrs;t.font=j_(t)},e.prototype._setText=function(t){var e=null;(0,ng.isString)(t)&&-1!==t.indexOf("\n")&&(e=t.split("\n")),this.set("textArr",e)},e.prototype.onAttrChange=function(e,r,n){t.prototype.onAttrChange.call(this,e,r,n),e.startsWith("font")&&this._assembleFont(),"text"===e&&this._setText(r)},e.prototype._getSpaceingY=function(){var t=this.attrs,e=t.lineHeight,r=1*t.fontSize;return e?e-r:.14*r},e.prototype._drawTextArr=function(t,e,r){var n,o=this.attrs,i=o.textBaseline,a=o.x,s=o.y,u=1*o.fontSize,l=this._getSpaceingY(),c=M_(o.text,o.fontSize,o.lineHeight);(0,ng.each)(e,function(e,o){n=s+o*(l+u)-c+u,"middle"===i&&(n+=c-u-(c-u)/2),"top"===i&&(n+=c-u),(0,ng.isNil)(e)||(r?t.fillText(e,a,n):t.strokeText(e,a,n))})},e.prototype._drawText=function(t,e){var r=this.attr(),n=r.x,o=r.y,i=this.get("textArr");if(i)this._drawTextArr(t,i,e);else{var a=r.text;(0,ng.isNil)(a)||(e?t.fillText(a,n,o):t.strokeText(a,n,o))}},e.prototype.strokeAndFill=function(t){var e=this.attrs,r=e.lineWidth,n=e.opacity,o=e.strokeOpacity,i=e.fillOpacity;this.isStroke()&&r>0&&((0,ng.isNil)(o)||1===o||(t.globalAlpha=n),this.stroke(t)),this.isFill()&&((0,ng.isNil)(i)||1===i?this.fill(t):(t.globalAlpha=i,this.fill(t),t.globalAlpha=n)),this.afterDrawPath(t)},e.prototype.fill=function(t){this._drawText(t,!0)},e.prototype.stroke=function(t){this._drawText(t,!1)},e}(iP);function AP(t,e,r){var n,o,i=t.getTotalMatrix();if(i){var a=(n=[e,r,1],(o=i)?zw(Vw(o),n):n);return[a[0],a[1]]}return[e,r]}function MP(t,e,r){if(t.isCanvas&&t.isCanvas())return!0;if(!Pw(t)||!1===t.cfg.isInView)return!1;if(t.cfg.clipShape){var n=AP(t,e,r),o=n[0],i=n[1];if(t.isClipped(o,i))return!1}var a=t.cfg.cacheCanvasBBox||t.getCanvasBBox();return e>=a.minX&&e<=a.maxX&&r>=a.minY&&r<=a.maxY}var jP=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,rg.__extends)(e,t),e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return e.renderer="canvas",e.autoDraw=!0,e.localRefresh=!0,e.refreshElements=[],e.clipView=!0,e.quickHit=!1,e},e.prototype.onCanvasChange=function(t){"attr"!==t&&"sort"!==t&&"changeSize"!==t||(this.set("refreshElements",[this]),this.draw())},e.prototype.getShapeBase=function(){return h},e.prototype.getGroupBase=function(){return oP},e.prototype.getPixelRatio=function(){var t=this.get("pixelRatio")||(window?window.devicePixelRatio:1);return t>=1?Math.ceil(t):1},e.prototype.getViewRange=function(){return{minX:0,minY:0,maxX:this.cfg.width,maxY:this.cfg.height}},e.prototype.createDom=function(){var t=document.createElement("canvas"),e=t.getContext("2d");return this.set("context",e),t},e.prototype.setDOMSize=function(e,r){t.prototype.setDOMSize.call(this,e,r);var n=this.get("context"),o=this.get("el"),i=this.getPixelRatio();o.width=i*e,o.height=i*r,i>1&&n.scale(i,i)},e.prototype.clear=function(){t.prototype.clear.call(this),this._clearFrame();var e=this.get("context"),r=this.get("el");e.clearRect(0,0,r.width,r.height)},e.prototype.getShape=function(e,r){return this.get("quickHit")?function t(e,r,n){if(!MP(e,r,n))return null;for(var o=null,i=e.getChildren(),a=i.length-1;a>=0;a--){var s=i[a];if(s.isGroup())o=t(s,r,n);else if(MP(s,r,n)){var u=s,l=AP(s,r,n),c=l[0],f=l[1];u.isInShape(c,f)&&(o=s)}if(o)break}return o}(this,e,r):t.prototype.getShape.call(this,e,r,null)},e.prototype._getRefreshRegion=function(){var t,e=this.get("refreshElements"),r=this.getViewRange();e.length&&e[0]===this?t=r:(t=function(t){if(!t.length)return null;var e=[],r=[],n=[],o=[];return(0,ng.each)(t,function(t){var i=nP(t);i&&(e.push(i.minX),r.push(i.minY),n.push(i.maxX),o.push(i.maxY))}),{minX:(0,ng.min)(e),minY:(0,ng.min)(r),maxX:(0,ng.max)(n),maxY:(0,ng.max)(o)}}(e))&&(t.minX=Math.floor(t.minX),t.minY=Math.floor(t.minY),t.maxX=Math.ceil(t.maxX),t.maxY=Math.ceil(t.maxY),t.maxY+=1,this.get("clipView")&&(t=function(t,e){return t&&e&&kO(t,e)?{minX:Math.max(t.minX,e.minX),minY:Math.max(t.minY,e.minY),maxX:Math.min(t.maxX,e.maxX),maxY:Math.min(t.maxY,e.maxY)}:null}(t,r)));return t},e.prototype.refreshElement=function(t){this.get("refreshElements").push(t)},e.prototype._clearFrame=function(){var t=this.get("drawFrame");t&&((0,ng.clearAnimationFrame)(t),this.set("drawFrame",null),this.set("refreshElements",[]))},e.prototype.draw=function(){var t=this.get("drawFrame");this.get("autoDraw")&&t||this._startDraw()},e.prototype._drawAll=function(){var t=this.get("context"),e=this.get("el"),r=this.getChildren();t.clearRect(0,0,e.width,e.height),KO(t,this),QO(t,r),this.set("refreshElements",[])},e.prototype._drawRegion=function(){var t=this.get("context"),e=this.get("refreshElements"),r=this.getChildren(),n=this._getRefreshRegion();n?(t.clearRect(n.minX,n.minY,n.maxX-n.minX,n.maxY-n.minY),t.save(),t.beginPath(),t.rect(n.minX,n.minY,n.maxX-n.minX,n.maxY-n.minY),t.clip(),KO(t,this),ZO(this,r,n),QO(t,r,n),t.restore()):e.length&&function t(e){for(var r=0;r<e.length;r++){var n=e[r];n.cfg.hasChanged=!1,n.isGroup()&&!n.destroyed&&t(n.cfg.children)}}(e),(0,ng.each)(e,function(t){t.get("hasChanged")&&t.set("hasChanged",!1)}),this.set("refreshElements",[])},e.prototype._startDraw=function(){var t=this,e=this.get("drawFrame"),r=this.get("drawFrameCallback");e||(e=(0,ng.requestAnimationFrame)(function(){t.get("localRefresh")?t._drawRegion():t._drawAll(),t.set("drawFrame",null),r&&r()}),this.set("drawFrame",e))},e.prototype.skipDraw=function(){},e.prototype.removeDom=function(){var t=this.get("el");t.width=0,t.height=0,t.parentNode.removeChild(t)},e}(qx),IP={rect:"path",circle:"circle",line:"line",path:"path",marker:"path",text:"text",polyline:"polyline",polygon:"polygon",image:"image",ellipse:"ellipse",dom:"foreignObject"},NP={opacity:"opacity",fillStyle:"fill",fill:"fill",fillOpacity:"fill-opacity",strokeStyle:"stroke",strokeOpacity:"stroke-opacity",stroke:"stroke",x:"x",y:"y",r:"r",rx:"rx",ry:"ry",width:"width",height:"height",x1:"x1",x2:"x2",y1:"y1",y2:"y2",lineCap:"stroke-linecap",lineJoin:"stroke-linejoin",lineWidth:"stroke-width",lineDash:"stroke-dasharray",lineDashOffset:"stroke-dashoffset",miterLimit:"stroke-miterlimit",font:"font",fontSize:"font-size",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",fontFamily:"font-family",startArrow:"marker-start",endArrow:"marker-end",path:"d",class:"class",id:"id",style:"style",preserveAspectRatio:"preserveAspectRatio"};function LP(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function RP(t){var e=IP[t.type],r=t.getParent();if(!e)throw new Error("the type "+t.type+" is not supported by svg");var n=LP(e);if(t.get("id")&&(n.id=t.get("id")),t.set("el",n),t.set("attrs",{}),r){var o=r.get("el");o?o.appendChild(n):(o=r.createDom(),r.set("el",o),o.appendChild(n))}return n}function DP(t,e){var r=t.get("el"),n=(0,ng.toArray)(r.children).sort(e),o=document.createDocumentFragment();n.forEach(function(t){o.appendChild(t)}),r.appendChild(o)}function BP(t){var e=t.attr().matrix;if(e){for(var r=t.cfg.el,n=[],o=0;o<9;o+=3)n.push(e[o]+","+e[o+1]);-1===(n=n.join(",")).indexOf("NaN")?r.setAttribute("transform","matrix("+n+")"):console.warn("invalid matrix:",e)}}function FP(t,e){var r=t.getClip(),n=t.get("el");if(r){if(r&&!n.hasAttribute("clip-path")){RP(r),r.createPath(e);var o=e.addClip(r);n.setAttribute("clip-path","url(#"+o+")")}}else n.removeAttribute("clip-path")}function GP(t,e){e.forEach(function(e){e.draw(t)})}function UP(t,e){var r=t.get("canvas");if(r&&r.get("autoDraw")){var n=r.get("context"),o=t.getParent(),i=o?o.getChildren():[r],a=t.get("el");if("remove"===e)if(t.get("isClipShape")){var s=a&&a.parentNode,u=s&&s.parentNode;s&&u&&u.removeChild(s)}else a&&a.parentNode&&a.parentNode.removeChild(a);else if("show"===e)a.setAttribute("visibility","visible");else if("hide"===e)a.setAttribute("visibility","hidden");else if("zIndex"===e)!function(t,e){var r=t.parentNode,n=Array.from(r.childNodes).filter(function(t){return 1===t.nodeType&&"defs"!==t.nodeName.toLowerCase()}),o=n[e],i=n.indexOf(t);if(o){if(i>e)r.insertBefore(t,o);else if(i<e){var a=n[e+1];a?r.insertBefore(t,a):r.appendChild(t)}}else r.appendChild(t)}(a,i.indexOf(t));else if("sort"===e){var l=t.get("children");l&&l.length&&DP(t,function(t,e){return l.indexOf(t)-l.indexOf(e)?1:0})}else"clear"===e?a&&(a.innerHTML=""):"matrix"===e?BP(t):"clip"===e?FP(t,n):"attr"===e||"add"===e&&t.draw(n)}}var zP=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,rg.__extends)(e,t),e.prototype.isEntityGroup=function(){return!0},e.prototype.createDom=function(){var t=LP("g");this.set("el",t);var e=this.getParent();if(e){var r=e.get("el");r?r.appendChild(t):(r=e.createDom(),e.set("el",r),r.appendChild(t))}return t},e.prototype.afterAttrsChange=function(e){t.prototype.afterAttrsChange.call(this,e);var r=this.get("canvas");if(r&&r.get("autoDraw")){var n=r.get("context");this.createPath(n,e)}},e.prototype.onCanvasChange=function(t){UP(this,t)},e.prototype.getShapeBase=function(){return p},e.prototype.getGroupBase=function(){return e},e.prototype.draw=function(t){var e=this.getChildren(),r=this.get("el");this.get("destroyed")?r&&r.parentNode.removeChild(r):(r||this.createDom(),FP(this,t),this.createPath(t),e.length&&GP(t,e))},e.prototype.createPath=function(t,e){var r=this.attr(),n=this.get("el");(0,ng.each)(e||r,function(t,e){NP[e]&&n.setAttribute(NP[e],t)}),BP(this)},e}(Yx),VP=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="svg",e.canFill=!1,e.canStroke=!1,e}return(0,rg.__extends)(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return(0,rg.__assign)((0,rg.__assign)({},e),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},e.prototype.afterAttrsChange=function(e){t.prototype.afterAttrsChange.call(this,e);var r=this.get("canvas");if(r&&r.get("autoDraw")){var n=r.get("context");this.draw(n,e)}},e.prototype.getShapeBase=function(){return p},e.prototype.getGroupBase=function(){return zP},e.prototype.onCanvasChange=function(t){UP(this,t)},e.prototype.calculateBBox=function(){var t=this.get("el"),e=null;if(t)e=t.getBBox();else{var r=Qx(this.get("type"));r&&(e=r(this))}if(e){var n=e.x,o=e.y,i=e.width,a=e.height,s=this.getHitLineWidth(),u=s/2,l=n-u,c=o-u;return{x:l,y:c,minX:l,minY:c,maxX:n+i+u,maxY:o+a+u,width:i+s,height:a+s}}return{x:0,y:0,minX:0,minY:0,maxX:0,maxY:0,width:0,height:0}},e.prototype.isFill=function(){var t=this.attr(),e=t.fill,r=t.fillStyle;return(e||r||this.isClipShape())&&this.canFill},e.prototype.isStroke=function(){var t=this.attr(),e=t.stroke,r=t.strokeStyle;return(e||r)&&this.canStroke},e.prototype.draw=function(t,e){var r=this.get("el");this.get("destroyed")?r&&r.parentNode.removeChild(r):(r||RP(this),FP(this,t),this.createPath(t,e),this.shadow(t,e),this.strokeAndFill(t,e),this.transform(e))},e.prototype.createPath=function(t,e){},e.prototype.strokeAndFill=function(t,e){var r=e||this.attr(),n=r.fill,o=r.fillStyle,i=r.stroke,a=r.strokeStyle,s=r.fillOpacity,u=r.strokeOpacity,l=r.lineWidth,c=this.get("el");this.canFill&&(e?"fill"in r?this._setColor(t,"fill",n):"fillStyle"in r&&this._setColor(t,"fill",o):this._setColor(t,"fill",n||o),s&&c.setAttribute(NP.fillOpacity,s)),this.canStroke&&l>0&&(e?"stroke"in r?this._setColor(t,"stroke",i):"strokeStyle"in r&&this._setColor(t,"stroke",a):this._setColor(t,"stroke",i||a),u&&c.setAttribute(NP.strokeOpacity,u),l&&c.setAttribute(NP.lineWidth,l))},e.prototype._setColor=function(t,e,r){var n=this.get("el");if(r)if(r=r.trim(),/^[r,R,L,l]{1}[\s]*\(/.test(r))(o=t.find("gradient",r))||(o=t.addGradient(r)),n.setAttribute(NP[e],"url(#"+o+")");else if(/^[p,P]{1}[\s]*\(/.test(r)){var o;(o=t.find("pattern",r))||(o=t.addPattern(r)),n.setAttribute(NP[e],"url(#"+o+")")}else n.setAttribute(NP[e],r);else n.setAttribute(NP[e],"none")},e.prototype.shadow=function(t,e){var r=this.attr(),n=e||r,o=n.shadowOffsetX,i=n.shadowOffsetY,a=n.shadowBlur,s=n.shadowColor;(o||i||a||s)&&function(t,e){var r=t.cfg.el,n=t.attr(),o={dx:n.shadowOffsetX,dy:n.shadowOffsetY,blur:n.shadowBlur,color:n.shadowColor};if(o.dx||o.dy||o.blur||o.color){var i=e.find("filter",o);i||(i=e.addShadow(o)),r.setAttribute("filter","url(#"+i+")")}else r.removeAttribute("filter")}(this,t)},e.prototype.transform=function(t){var e=this.attr();(t||e).matrix&&BP(this)},e.prototype.isInShape=function(t,e){return this.isPointInPath(t,e)},e.prototype.isPointInPath=function(t,e){var r=this.get("el"),n=this.get("canvas").get("el").getBoundingClientRect(),o=t+n.left,i=e+n.top,a=document.elementFromPoint(o,i);return!(!a||!a.isEqualNode(r))},e.prototype.getHitLineWidth=function(){var t=this.attrs,e=t.lineWidth,r=t.lineAppendWidth;return this.isStroke()?e+r:0},e}(Xx),HP=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="circle",e.canFill=!0,e.canStroke=!0,e}return(0,rg.__extends)(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return(0,rg.__assign)((0,rg.__assign)({},e),{x:0,y:0,r:0})},e.prototype.createPath=function(t,e){var r=this.attr(),n=this.get("el");(0,ng.each)(e||r,function(t,e){"x"===e||"y"===e?n.setAttribute("c"+e,t):NP[e]&&n.setAttribute(NP[e],t)})},e}(VP),WP=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="dom",e.canFill=!1,e.canStroke=!1,e}return(0,rg.__extends)(e,t),e.prototype.createPath=function(t,e){var r=this.attr(),n=this.get("el");if((0,ng.each)(e||r,function(t,e){NP[e]&&n.setAttribute(NP[e],t)}),"function"==typeof r.html){var o=r.html.call(this,r);if(o instanceof Element||o instanceof HTMLDocument){for(var i=n.childNodes,a=i.length-1;a>=0;a--)n.removeChild(i[a]);n.appendChild(o)}else n.innerHTML=o}else n.innerHTML=r.html},e}(VP),qP=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="ellipse",e.canFill=!0,e.canStroke=!0,e}return(0,rg.__extends)(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return(0,rg.__assign)((0,rg.__assign)({},e),{x:0,y:0,rx:0,ry:0})},e.prototype.createPath=function(t,e){var r=this.attr(),n=this.get("el");(0,ng.each)(e||r,function(t,e){"x"===e||"y"===e?n.setAttribute("c"+e,t):NP[e]&&n.setAttribute(NP[e],t)})},e}(VP),YP=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="image",e.canFill=!1,e.canStroke=!1,e}return(0,rg.__extends)(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return(0,rg.__assign)((0,rg.__assign)({},e),{x:0,y:0,width:0,height:0})},e.prototype.createPath=function(t,e){var r=this,n=this.attr(),o=this.get("el");(0,ng.each)(e||n,function(t,e){"img"===e?r._setImage(n.img):NP[e]&&o.setAttribute(NP[e],t)})},e.prototype.setAttr=function(t,e){this.attrs[t]=e,"img"===t&&this._setImage(e)},e.prototype._setImage=function(t){var e=this.attr(),r=this.get("el");if((0,ng.isString)(t))r.setAttribute("href",t);else if(t instanceof window.Image)e.width||(r.setAttribute("width",t.width),this.attr("width",t.width)),e.height||(r.setAttribute("height",t.height),this.attr("height",t.height)),r.setAttribute("href",t.src);else if(t instanceof HTMLElement&&(0,ng.isString)(t.nodeName)&&"CANVAS"===t.nodeName.toUpperCase())r.setAttribute("href",t.toDataURL());else if(t instanceof ImageData){var n=document.createElement("canvas");n.setAttribute("width",""+t.width),n.setAttribute("height",""+t.height),n.getContext("2d").putImageData(t,0,0),e.width||(r.setAttribute("width",""+t.width),this.attr("width",t.width)),e.height||(r.setAttribute("height",""+t.height),this.attr("height",t.height)),r.setAttribute("href",n.toDataURL())}},e}(VP),XP=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="line",e.canFill=!1,e.canStroke=!0,e}return(0,rg.__extends)(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return(0,rg.__assign)((0,rg.__assign)({},e),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},e.prototype.createPath=function(t,e){var r=this.attr(),n=this.get("el");(0,ng.each)(e||r,function(e,o){if("startArrow"===o||"endArrow"===o)if(e){var i=(0,ng.isObject)(e)?t.addArrow(r,NP[o]):t.getDefaultArrow(r,NP[o]);n.setAttribute(NP[o],"url(#"+i+")")}else n.removeAttribute(NP[o]);else NP[o]&&n.setAttribute(NP[o],e)})},e.prototype.getTotalLength=function(){var t=this.attr(),e=t.x1,r=t.y1,n=t.x2,o=t.y2;return o_.length(e,r,n,o)},e.prototype.getPoint=function(t){var e=this.attr(),r=e.x1,n=e.y1,o=e.x2,i=e.y2;return o_.pointAt(r,n,o,i,t)},e}(VP),JP={circle:function(t,e,r){return[["M",t,e],["m",-r,0],["a",r,r,0,1,0,2*r,0],["a",r,r,0,1,0,2*-r,0]]},square:function(t,e,r){return[["M",t-r,e-r],["L",t+r,e-r],["L",t+r,e+r],["L",t-r,e+r],["Z"]]},diamond:function(t,e,r){return[["M",t-r,e],["L",t,e-r],["L",t+r,e],["L",t,e+r],["Z"]]},triangle:function(t,e,r){var n=r*Math.sin(1/3*Math.PI);return[["M",t-r,e+n],["L",t,e-n],["L",t+r,e+n],["z"]]},triangleDown:function(t,e,r){var n=r*Math.sin(1/3*Math.PI);return[["M",t-r,e-n],["L",t+r,e-n],["L",t,e+n],["Z"]]}},KP={get:function(t){return JP[t]},register:function(t,e){JP[t]=e},remove:function(t){delete JP[t]},getAll:function(){return JP}},QP=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="marker",e.canFill=!0,e.canStroke=!0,e}return(0,rg.__extends)(e,t),e.prototype.createPath=function(t){this.get("el").setAttribute("d",this._assembleMarker())},e.prototype._assembleMarker=function(){var t=this._getPath();return(0,ng.isArray)(t)?t.map(function(t){return t.join(" ")}).join(""):t},e.prototype._getPath=function(){var t,e=this.attr(),r=e.x,n=e.y,o=e.r||e.radius,i=e.symbol||"circle";return(t=(0,ng.isFunction)(i)?i:KP.get(i))?t(r,n,o):(console.warn(t+" symbol is not exist."),null)},e.symbolsFactory=KP,e}(VP),ZP=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="path",e.canFill=!0,e.canStroke=!0,e}return(0,rg.__extends)(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return(0,rg.__assign)((0,rg.__assign)({},e),{startArrow:!1,endArrow:!1})},e.prototype.createPath=function(t,e){var r=this,n=this.attr(),o=this.get("el");(0,ng.each)(e||n,function(e,i){if("path"===i&&(0,ng.isArray)(e))o.setAttribute("d",r._formatPath(e));else if("startArrow"===i||"endArrow"===i)if(e){var a=(0,ng.isObject)(e)?t.addArrow(n,NP[i]):t.getDefaultArrow(n,NP[i]);o.setAttribute(NP[i],"url(#"+a+")")}else o.removeAttribute(NP[i]);else NP[i]&&o.setAttribute(NP[i],e)})},e.prototype._formatPath=function(t){var e=t.map(function(t){return t.join(" ")}).join("");return~e.indexOf("NaN")?"":e},e.prototype.getTotalLength=function(){var t=this.get("el");return t?t.getTotalLength():null},e.prototype.getPoint=function(t){var e=this.get("el"),r=this.getTotalLength();if(0===r)return null;var n=e?e.getPointAtLength(t*r):null;return n?{x:n.x,y:n.y}:null},e}(VP),$P=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="polygon",e.canFill=!0,e.canStroke=!0,e}return(0,rg.__extends)(e,t),e.prototype.createPath=function(t,e){var r=this.attr(),n=this.get("el");(0,ng.each)(e||r,function(t,e){"points"===e&&(0,ng.isArray)(t)&&t.length>=2?n.setAttribute("points",t.map(function(t){return t[0]+","+t[1]}).join(" ")):NP[e]&&n.setAttribute(NP[e],t)})},e}(VP),tk=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="polyline",e.canFill=!0,e.canStroke=!0,e}return(0,rg.__extends)(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return(0,rg.__assign)((0,rg.__assign)({},e),{startArrow:!1,endArrow:!1})},e.prototype.onAttrChange=function(e,r,n){t.prototype.onAttrChange.call(this,e,r,n),-1!==["points"].indexOf(e)&&this._resetCache()},e.prototype._resetCache=function(){this.set("totalLength",null),this.set("tCache",null)},e.prototype.createPath=function(t,e){var r=this.attr(),n=this.get("el");(0,ng.each)(e||r,function(t,e){"points"===e&&(0,ng.isArray)(t)&&t.length>=2?n.setAttribute("points",t.map(function(t){return t[0]+","+t[1]}).join(" ")):NP[e]&&n.setAttribute(NP[e],t)})},e.prototype.getTotalLength=function(){var t=this.attr().points,e=this.get("totalLength");return(0,ng.isNil)(e)?(this.set("totalLength",P_(t)),this.get("totalLength")):e},e.prototype.getPoint=function(t){var e,r,n=this.attr().points,o=this.get("tCache");return o||(this._setTcache(),o=this.get("tCache")),(0,ng.each)(o,function(n,o){t>=n[0]&&t<=n[1]&&(e=(t-n[0])/(n[1]-n[0]),r=o)}),o_.pointAt(n[r][0],n[r][1],n[r+1][0],n[r+1][1],e)},e.prototype._setTcache=function(){var t=this.attr().points;if(t&&0!==t.length){var e=this.getTotalLength();if(!(e<=0)){var r,n,o=0,i=[];(0,ng.each)(t,function(a,s){t[s+1]&&((r=[])[0]=o/e,n=o_.length(a[0],a[1],t[s+1][0],t[s+1][1]),o+=n,r[1]=o/e,i.push(r))}),this.set("tCache",i)}}},e.prototype.getStartTangent=function(){var t=this.attr().points,e=[];return e.push([t[1][0],t[1][1]]),e.push([t[0][0],t[0][1]]),e},e.prototype.getEndTangent=function(){var t=this.attr().points,e=t.length-1,r=[];return r.push([t[e-1][0],t[e-1][1]]),r.push([t[e][0],t[e][1]]),r},e}(VP);var ek=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="rect",e.canFill=!0,e.canStroke=!0,e}return(0,rg.__extends)(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return(0,rg.__assign)((0,rg.__assign)({},e),{x:0,y:0,width:0,height:0,radius:0})},e.prototype.createPath=function(t,e){var r=this,n=this.attr(),o=this.get("el"),i=!1,a=["x","y","width","height","radius"];(0,ng.each)(e||n,function(t,e){-1===a.indexOf(e)||i?-1===a.indexOf(e)&&NP[e]&&o.setAttribute(NP[e],t):(o.setAttribute("d",r._assembleRect(n)),i=!0)})},e.prototype._assembleRect=function(t){var e=t.x,r=t.y,n=t.width,o=t.height,i=t.radius;if(!i)return"M "+e+","+r+" l "+n+",0 l 0,"+o+" l"+-n+" 0 z";var a=function(t){var e=0,r=0,n=0,o=0;return(0,ng.isArray)(t)?1===t.length?e=r=n=o=t[0]:2===t.length?(e=n=t[0],r=o=t[1]):3===t.length?(e=t[0],r=o=t[1],n=t[2]):(e=t[0],r=t[1],n=t[2],o=t[3]):e=r=n=o=t,{r1:e,r2:r,r3:n,r4:o}}(i);return(0,ng.isArray)(i)?1===i.length?a.r1=a.r2=a.r3=a.r4=i[0]:2===i.length?(a.r1=a.r3=i[0],a.r2=a.r4=i[1]):3===i.length?(a.r1=i[0],a.r2=a.r4=i[1],a.r3=i[2]):(a.r1=i[0],a.r2=i[1],a.r3=i[2],a.r4=i[3]):a.r1=a.r2=a.r3=a.r4=i,[["M "+(e+a.r1)+","+r],["l "+(n-a.r1-a.r2)+",0"],["a "+a.r2+","+a.r2+",0,0,1,"+a.r2+","+a.r2],["l 0,"+(o-a.r2-a.r3)],["a "+a.r3+","+a.r3+",0,0,1,"+-a.r3+","+a.r3],["l "+(a.r3+a.r4-n)+",0"],["a "+a.r4+","+a.r4+",0,0,1,"+-a.r4+","+-a.r4],["l 0,"+(a.r4+a.r1-o)],["a "+a.r1+","+a.r1+",0,0,1,"+a.r1+","+-a.r1],["z"]].join(" ")},e}(VP),rk={top:"before-edge",middle:"central",bottom:"after-edge",alphabetic:"baseline",hanging:"hanging"},nk={top:"text-before-edge",middle:"central",bottom:"text-after-edge",alphabetic:"alphabetic",hanging:"hanging"},ok={left:"left",start:"left",center:"middle",right:"end",end:"end"},ik=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="text",e.canFill=!0,e.canStroke=!0,e}return(0,rg.__extends)(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return(0,rg.__assign)((0,rg.__assign)({},e),{x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"})},e.prototype.createPath=function(t,e){var r=this,n=this.attr(),o=this.get("el");this._setFont(),(0,ng.each)(e||n,function(t,e){"text"===e?r._setText(""+t):"matrix"===e&&t?BP(r):NP[e]&&o.setAttribute(NP[e],t)}),o.setAttribute("paint-order","stroke"),o.setAttribute("style","stroke-linecap:butt; stroke-linejoin:miter;")},e.prototype._setFont=function(){var t=this.get("el"),e=this.attr(),r=e.textBaseline,n=e.textAlign,o=Bw();o&&"firefox"===o.name?t.setAttribute("dominant-baseline",nk[r]||"alphabetic"):t.setAttribute("alignment-baseline",rk[r]||"baseline"),t.setAttribute("text-anchor",ok[n]||"left")},e.prototype._setText=function(t){var e=this.get("el"),r=this.attr(),n=r.x,o=r.textBaseline,i=void 0===o?"bottom":o;if(t)if(~t.indexOf("\n")){var a=t.split("\n"),s=a.length-1,u="";(0,ng.each)(a,function(t,e){0===e?"alphabetic"===i?u+='<tspan x="'+n+'" dy="'+-s+'em">'+t+"</tspan>":"top"===i?u+='<tspan x="'+n+'" dy="0.9em">'+t+"</tspan>":"middle"===i?u+='<tspan x="'+n+'" dy="'+-(s-1)/2+'em">'+t+"</tspan>":"bottom"===i?u+='<tspan x="'+n+'" dy="-'+(s+.3)+'em">'+t+"</tspan>":"hanging"===i&&(u+='<tspan x="'+n+'" dy="'+(-(s-1)-.3)+'em">'+t+"</tspan>"):u+='<tspan x="'+n+'" dy="1em">'+t+"</tspan>"}),e.innerHTML=u}else e.innerHTML=t;else e.innerHTML=""},e}(VP),ak=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,sk=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,uk=/[\d.]+:(#[^\s]+|[^)]+\))/gi;function lk(t){var e=t.match(uk);if(!e)return"";var r="";return e.sort(function(t,e){return t=t.split(":"),e=e.split(":"),Number(t[0])-Number(e[0])}),(0,ng.each)(e,function(t){t=t.split(":"),r+='<stop offset="'+t[0]+'" stop-color="'+t[1]+'"></stop>'}),r}var ck,fk,hk,pk,dk=function(){function t(t){this.cfg={};var e,r,n,o,i,a,s,u=null,l=(0,ng.uniqueId)("gradient_");return"l"===t.toLowerCase()[0]?function(t,e){var r,n,o=ak.exec(t),i=(0,ng.mod)((0,ng.toRadian)(parseFloat(o[1])),2*Math.PI),a=o[2];i>=0&&i<.5*Math.PI?(r={x:0,y:0},n={x:1,y:1}):.5*Math.PI<=i&&i<Math.PI?(r={x:1,y:0},n={x:0,y:1}):Math.PI<=i&&i<1.5*Math.PI?(r={x:1,y:1},n={x:0,y:0}):(r={x:0,y:1},n={x:1,y:0});var s=Math.tan(i),u=s*s,l=(n.x-r.x+s*(n.y-r.y))/(u+1)+r.x,c=s*(n.x-r.x+s*(n.y-r.y))/(u+1)+r.y;e.setAttribute("x1",r.x),e.setAttribute("y1",r.y),e.setAttribute("x2",l),e.setAttribute("y2",c),e.innerHTML=lk(a)}(t,u=LP("linearGradient")):(u=LP("radialGradient"),e=t,r=u,n=sk.exec(e),o=parseFloat(n[1]),i=parseFloat(n[2]),a=parseFloat(n[3]),s=n[4],r.setAttribute("cx",o),r.setAttribute("cy",i),r.setAttribute("r",a),r.innerHTML=lk(s)),u.setAttribute("id",l),this.el=u,this.id=l,this.cfg=t,this}return t.prototype.match=function(t,e){return this.cfg===e},t}(),yk={shadowColor:"color",shadowOpacity:"opacity",shadowBlur:"blur",shadowOffsetX:"dx",shadowOffsetY:"dy"},vk={x:"-40%",y:"-40%",width:"200%",height:"200%"},gk=function(){function t(t){this.type="filter",this.cfg={},this.type="filter";var e=LP("filter");return(0,ng.each)(vk,function(t,r){e.setAttribute(r,t)}),this.el=e,this.id=(0,ng.uniqueId)("filter_"),this.el.id=this.id,this.cfg=t,this._parseShadow(t,e),this}return t.prototype.match=function(t,e){if(this.type!==t)return!1;var r=!0,n=this.cfg;return(0,ng.each)(Object.keys(n),function(t){if(n[t]!==e[t])return r=!1,!1}),r},t.prototype.update=function(t,e){var r=this.cfg;return r[yk[t]]=e,this._parseShadow(r,this.el),this},t.prototype._parseShadow=function(t,e){var r='<feDropShadow\n      dx="'+(t.dx||0)+'"\n      dy="'+(t.dy||0)+'"\n      stdDeviation="'+(t.blur?t.blur/10:0)+'"\n      flood-color="'+(t.color?t.color:"#000")+'"\n      flood-opacity="'+(t.opacity?t.opacity:1)+'"\n      />';e.innerHTML=r},t}(),mk=function(){function t(t,e){this.cfg={};var r=LP("marker"),n=(0,ng.uniqueId)("marker_");r.setAttribute("id",n);var o=LP("path");o.setAttribute("stroke",t.stroke||"none"),o.setAttribute("fill",t.fill||"none"),r.appendChild(o),r.setAttribute("overflow","visible"),r.setAttribute("orient","auto-start-reverse"),this.el=r,this.child=o,this.id=n;var i=t["marker-start"===e?"startArrow":"endArrow"];return this.stroke=t.stroke||"#000",!0===i?this._setDefaultPath(e,o):(this.cfg=i,this._setMarker(t.lineWidth,o)),this}return t.prototype.match=function(){return!1},t.prototype._setDefaultPath=function(t,e){var r=this.el;e.setAttribute("d","M0,0 L"+10*Math.cos(Math.PI/6)+",5 L0,10"),r.setAttribute("refX",""+10*Math.cos(Math.PI/6)),r.setAttribute("refY","5")},t.prototype._setMarker=function(t,e){var r=this.el,n=this.cfg.path,o=this.cfg.d;(0,ng.isArray)(n)&&(n=n.map(function(t){return t.join(" ")}).join("")),e.setAttribute("d",n),r.appendChild(e),o&&r.setAttribute("refX",""+o/t)},t.prototype.update=function(t){var e=this.child;e.attr?e.attr("fill",t):e.setAttribute("fill",t)},t}(),bk=function(){function t(t){this.type="clip",this.cfg={};var e=LP("clipPath");this.el=e,this.id=(0,ng.uniqueId)("clip_"),e.id=this.id;var r=t.cfg.el;return e.appendChild(r),this.cfg=t,this}return t.prototype.match=function(){return!1},t.prototype.remove=function(){var t=this.el;t.parentNode.removeChild(t)},t}(),wk=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,Sk=function(){function t(t){this.cfg={};var e=LP("pattern");e.setAttribute("patternUnits","userSpaceOnUse");var r=LP("image");e.appendChild(r);var n=(0,ng.uniqueId)("pattern_");e.id=n,this.el=e,this.id=n,this.cfg=t;var o=wk.exec(t)[2];r.setAttribute("href",o);var i=new Image;function a(){e.setAttribute("width",""+i.width),e.setAttribute("height",""+i.height)}return o.match(/^data:/i)||(i.crossOrigin="Anonymous"),i.src=o,i.complete?a():(i.onload=a,i.src=i.src),this}return t.prototype.match=function(t,e){return this.cfg===e},t}(),xk=function(){function t(t){var e=LP("defs"),r=(0,ng.uniqueId)("defs_");e.id=r,t.appendChild(e),this.children=[],this.defaultArrow={},this.el=e,this.canvas=t}return t.prototype.find=function(t,e){for(var r=this.children,n=null,o=0;o<r.length;o++)if(r[o].match(t,e)){n=r[o].id;break}return n},t.prototype.findById=function(t){for(var e=this.children,r=null,n=0;n<e.length;n++)if(e[n].id===t){r=e[n];break}return r},t.prototype.add=function(t){this.children.push(t),t.canvas=this.canvas,t.parent=this},t.prototype.getDefaultArrow=function(t,e){var r=t.stroke||t.strokeStyle;if(this.defaultArrow[r])return this.defaultArrow[r].id;var n=new mk(t,e);return this.defaultArrow[r]=n,this.el.appendChild(n.el),this.add(n),n.id},t.prototype.addGradient=function(t){var e=new dk(t);return this.el.appendChild(e.el),this.add(e),e.id},t.prototype.addArrow=function(t,e){var r=new mk(t,e);return this.el.appendChild(r.el),this.add(r),r.id},t.prototype.addShadow=function(t){var e=new gk(t);return this.el.appendChild(e.el),this.add(e),e.id},t.prototype.addPattern=function(t){var e=new Sk(t);return this.el.appendChild(e.el),this.add(e),e.id},t.prototype.addClip=function(t){var e=new bk(t);return this.el.appendChild(e.el),this.add(e),e.id},t}(),_k=function(t){function e(e){return t.call(this,(0,rg.__assign)((0,rg.__assign)({},e),{autoDraw:!0,renderer:"svg"}))||this}return(0,rg.__extends)(e,t),e.prototype.getShapeBase=function(){return p},e.prototype.getGroupBase=function(){return zP},e.prototype.getShape=function(t,e,r){var n=r.target||r.srcElement;if(!IP[n.tagName]){for(var o=n.parentNode;o&&!IP[o.tagName];)o=o.parentNode;n=o}return this.find(function(t){return t.get("el")===n})},e.prototype.createDom=function(){var t=LP("svg"),e=new xk(t);return t.setAttribute("width",""+this.get("width")),t.setAttribute("height",""+this.get("height")),this.set("context",e),t},e.prototype.onCanvasChange=function(t){var e=this.get("context"),r=this.get("el");if("sort"===t){var n=this.get("children");n&&n.length&&DP(this,function(t,e){return n.indexOf(t)-n.indexOf(e)?1:0})}else if("clear"===t){if(r){r.innerHTML="";var o=e.el;o.innerHTML="",r.appendChild(o)}}else"matrix"===t?BP(this):"clip"===t?FP(this,e):"changeSize"===t&&(r.setAttribute("width",""+this.get("width")),r.setAttribute("height",""+this.get("height")))},e.prototype.draw=function(){var t=this.get("context"),e=this.getChildren();FP(this,t),e.length&&GP(t,e)},e}(qx);function Ek(t){ck||(ck=document.createElement("table"),fk=document.createElement("tr"),hk=/^\s*<(\w+|!)[^>]*>/,pk={tr:document.createElement("tbody"),tbody:ck,thead:ck,tfoot:ck,td:fk,th:fk,"*":document.createElement("div")});var e=hk.test(t)&&RegExp.$1;e&&e in pk||(e="*");var r=pk[e];t="string"==typeof t?t.replace(/(^\s*)|(\s*$)/g,""):t,r.innerHTML=""+t;var n=r.childNodes[0];return n&&r.contains(n)&&r.removeChild(n),n}var Ok=r(9630),Pk=r.n(Ok);function kk(t){"@babel/helpers - typeof";return(kk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var Ck=/^\s+/,Tk=/\s+$/;function Ak(t,e){if(t=t||"",e=e||{},t instanceof Ak)return t;if(!(this instanceof Ak))return new Ak(t,e);var r=function(t){var e={r:0,g:0,b:0},r=1,n=null,o=null,i=null,a=!1,s=!1;"string"==typeof t&&(t=function(t){t=t.replace(Ck,"").replace(Tk,"").toLowerCase();var e,r=!1;if(Yk[t])t=Yk[t],r=!0;else if("transparent"==t)return{r:0,g:0,b:0,a:0,format:"name"};if(e=aC.rgb.exec(t))return{r:e[1],g:e[2],b:e[3]};if(e=aC.rgba.exec(t))return{r:e[1],g:e[2],b:e[3],a:e[4]};if(e=aC.hsl.exec(t))return{h:e[1],s:e[2],l:e[3]};if(e=aC.hsla.exec(t))return{h:e[1],s:e[2],l:e[3],a:e[4]};if(e=aC.hsv.exec(t))return{h:e[1],s:e[2],v:e[3]};if(e=aC.hsva.exec(t))return{h:e[1],s:e[2],v:e[3],a:e[4]};if(e=aC.hex8.exec(t))return{r:Zk(e[1]),g:Zk(e[2]),b:Zk(e[3]),a:rC(e[4]),format:r?"name":"hex8"};if(e=aC.hex6.exec(t))return{r:Zk(e[1]),g:Zk(e[2]),b:Zk(e[3]),format:r?"name":"hex"};if(e=aC.hex4.exec(t))return{r:Zk(e[1]+""+e[1]),g:Zk(e[2]+""+e[2]),b:Zk(e[3]+""+e[3]),a:rC(e[4]+""+e[4]),format:r?"name":"hex8"};if(e=aC.hex3.exec(t))return{r:Zk(e[1]+""+e[1]),g:Zk(e[2]+""+e[2]),b:Zk(e[3]+""+e[3]),format:r?"name":"hex"};return!1}(t));"object"==kk(t)&&(sC(t.r)&&sC(t.g)&&sC(t.b)?(u=t.r,l=t.g,c=t.b,e={r:255*Kk(u,255),g:255*Kk(l,255),b:255*Kk(c,255)},a=!0,s="%"===String(t.r).substr(-1)?"prgb":"rgb"):sC(t.h)&&sC(t.s)&&sC(t.v)?(n=tC(t.s),o=tC(t.v),e=function(t,e,r){t=6*Kk(t,360),e=Kk(e,100),r=Kk(r,100);var n=Math.floor(t),o=t-n,i=r*(1-e),a=r*(1-o*e),s=r*(1-(1-o)*e),u=n%6;return{r:255*[r,a,i,i,s,r][u],g:255*[s,r,r,a,i,i][u],b:255*[i,i,s,r,r,a][u]}}(t.h,n,o),a=!0,s="hsv"):sC(t.h)&&sC(t.s)&&sC(t.l)&&(n=tC(t.s),i=tC(t.l),e=function(t,e,r){var n,o,i;function a(t,e,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+6*(e-t)*r:r<.5?e:r<2/3?t+(e-t)*(2/3-r)*6:t}if(t=Kk(t,360),e=Kk(e,100),r=Kk(r,100),0===e)n=o=i=r;else{var s=r<.5?r*(1+e):r+e-r*e,u=2*r-s;n=a(u,s,t+1/3),o=a(u,s,t),i=a(u,s,t-1/3)}return{r:255*n,g:255*o,b:255*i}}(t.h,n,i),a=!0,s="hsl"),t.hasOwnProperty("a")&&(r=t.a));var u,l,c;return r=Jk(r),{ok:a,format:t.format||s,r:Math.min(255,Math.max(e.r,0)),g:Math.min(255,Math.max(e.g,0)),b:Math.min(255,Math.max(e.b,0)),a:r}}(t);this._originalInput=t,this._r=r.r,this._g=r.g,this._b=r.b,this._a=r.a,this._roundA=Math.round(100*this._a)/100,this._format=e.format||r.format,this._gradientType=e.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=r.ok}function Mk(t,e,r){t=Kk(t,255),e=Kk(e,255),r=Kk(r,255);var n,o,i=Math.max(t,e,r),a=Math.min(t,e,r),s=(i+a)/2;if(i==a)n=o=0;else{var u=i-a;switch(o=s>.5?u/(2-i-a):u/(i+a),i){case t:n=(e-r)/u+(e<r?6:0);break;case e:n=(r-t)/u+2;break;case r:n=(t-e)/u+4}n/=6}return{h:n,s:o,l:s}}function jk(t,e,r){t=Kk(t,255),e=Kk(e,255),r=Kk(r,255);var n,o,i=Math.max(t,e,r),a=Math.min(t,e,r),s=i,u=i-a;if(o=0===i?0:u/i,i==a)n=0;else{switch(i){case t:n=(e-r)/u+(e<r?6:0);break;case e:n=(r-t)/u+2;break;case r:n=(t-e)/u+4}n/=6}return{h:n,s:o,v:s}}function Ik(t,e,r,n){var o=[$k(Math.round(t).toString(16)),$k(Math.round(e).toString(16)),$k(Math.round(r).toString(16))];return n&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0):o.join("")}function Nk(t,e,r,n){return[$k(eC(n)),$k(Math.round(t).toString(16)),$k(Math.round(e).toString(16)),$k(Math.round(r).toString(16))].join("")}function Lk(t,e){e=0===e?0:e||10;var r=Ak(t).toHsl();return r.s-=e/100,r.s=Qk(r.s),Ak(r)}function Rk(t,e){e=0===e?0:e||10;var r=Ak(t).toHsl();return r.s+=e/100,r.s=Qk(r.s),Ak(r)}function Dk(t){return Ak(t).desaturate(100)}function Bk(t,e){e=0===e?0:e||10;var r=Ak(t).toHsl();return r.l+=e/100,r.l=Qk(r.l),Ak(r)}function Fk(t,e){e=0===e?0:e||10;var r=Ak(t).toRgb();return r.r=Math.max(0,Math.min(255,r.r-Math.round(-e/100*255))),r.g=Math.max(0,Math.min(255,r.g-Math.round(-e/100*255))),r.b=Math.max(0,Math.min(255,r.b-Math.round(-e/100*255))),Ak(r)}function Gk(t,e){e=0===e?0:e||10;var r=Ak(t).toHsl();return r.l-=e/100,r.l=Qk(r.l),Ak(r)}function Uk(t,e){var r=Ak(t).toHsl(),n=(r.h+e)%360;return r.h=n<0?360+n:n,Ak(r)}function zk(t){var e=Ak(t).toHsl();return e.h=(e.h+180)%360,Ak(e)}function Vk(t,e){if(isNaN(e)||e<=0)throw new Error("Argument to polyad must be a positive number");for(var r=Ak(t).toHsl(),n=[Ak(t)],o=360/e,i=1;i<e;i++)n.push(Ak({h:(r.h+i*o)%360,s:r.s,l:r.l}));return n}function Hk(t){var e=Ak(t).toHsl(),r=e.h;return[Ak(t),Ak({h:(r+72)%360,s:e.s,l:e.l}),Ak({h:(r+216)%360,s:e.s,l:e.l})]}function Wk(t,e,r){e=e||6,r=r||30;var n=Ak(t).toHsl(),o=360/r,i=[Ak(t)];for(n.h=(n.h-(o*e>>1)+720)%360;--e;)n.h=(n.h+o)%360,i.push(Ak(n));return i}function qk(t,e){e=e||6;for(var r=Ak(t).toHsv(),n=r.h,o=r.s,i=r.v,a=[],s=1/e;e--;)a.push(Ak({h:n,s:o,v:i})),i=(i+s)%1;return a}Ak.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var t=this.toRgb();return(299*t.r+587*t.g+114*t.b)/1e3},getLuminance:function(){var t,e,r,n=this.toRgb();return t=n.r/255,e=n.g/255,r=n.b/255,.2126*(t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4))+.7152*(e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4))+.0722*(r<=.03928?r/12.92:Math.pow((r+.055)/1.055,2.4))},setAlpha:function(t){return this._a=Jk(t),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var t=jk(this._r,this._g,this._b);return{h:360*t.h,s:t.s,v:t.v,a:this._a}},toHsvString:function(){var t=jk(this._r,this._g,this._b),e=Math.round(360*t.h),r=Math.round(100*t.s),n=Math.round(100*t.v);return 1==this._a?"hsv("+e+", "+r+"%, "+n+"%)":"hsva("+e+", "+r+"%, "+n+"%, "+this._roundA+")"},toHsl:function(){var t=Mk(this._r,this._g,this._b);return{h:360*t.h,s:t.s,l:t.l,a:this._a}},toHslString:function(){var t=Mk(this._r,this._g,this._b),e=Math.round(360*t.h),r=Math.round(100*t.s),n=Math.round(100*t.l);return 1==this._a?"hsl("+e+", "+r+"%, "+n+"%)":"hsla("+e+", "+r+"%, "+n+"%, "+this._roundA+")"},toHex:function(t){return Ik(this._r,this._g,this._b,t)},toHexString:function(t){return"#"+this.toHex(t)},toHex8:function(t){return function(t,e,r,n,o){var i=[$k(Math.round(t).toString(16)),$k(Math.round(e).toString(16)),$k(Math.round(r).toString(16)),$k(eC(n))];if(o&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)&&i[3].charAt(0)==i[3].charAt(1))return i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0)+i[3].charAt(0);return i.join("")}(this._r,this._g,this._b,this._a,t)},toHex8String:function(t){return"#"+this.toHex8(t)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(100*Kk(this._r,255))+"%",g:Math.round(100*Kk(this._g,255))+"%",b:Math.round(100*Kk(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+Math.round(100*Kk(this._r,255))+"%, "+Math.round(100*Kk(this._g,255))+"%, "+Math.round(100*Kk(this._b,255))+"%)":"rgba("+Math.round(100*Kk(this._r,255))+"%, "+Math.round(100*Kk(this._g,255))+"%, "+Math.round(100*Kk(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(Xk[Ik(this._r,this._g,this._b,!0)]||!1)},toFilter:function(t){var e="#"+Nk(this._r,this._g,this._b,this._a),r=e,n=this._gradientType?"GradientType = 1, ":"";if(t){var o=Ak(t);r="#"+Nk(o._r,o._g,o._b,o._a)}return"progid:DXImageTransform.Microsoft.gradient("+n+"startColorstr="+e+",endColorstr="+r+")"},toString:function(t){var e=!!t;t=t||this._format;var r=!1,n=this._a<1&&this._a>=0;return e||!n||"hex"!==t&&"hex6"!==t&&"hex3"!==t&&"hex4"!==t&&"hex8"!==t&&"name"!==t?("rgb"===t&&(r=this.toRgbString()),"prgb"===t&&(r=this.toPercentageRgbString()),"hex"!==t&&"hex6"!==t||(r=this.toHexString()),"hex3"===t&&(r=this.toHexString(!0)),"hex4"===t&&(r=this.toHex8String(!0)),"hex8"===t&&(r=this.toHex8String()),"name"===t&&(r=this.toName()),"hsl"===t&&(r=this.toHslString()),"hsv"===t&&(r=this.toHsvString()),r||this.toHexString()):"name"===t&&0===this._a?this.toName():this.toRgbString()},clone:function(){return Ak(this.toString())},_applyModification:function(t,e){var r=t.apply(null,[this].concat([].slice.call(e)));return this._r=r._r,this._g=r._g,this._b=r._b,this.setAlpha(r._a),this},lighten:function(){return this._applyModification(Bk,arguments)},brighten:function(){return this._applyModification(Fk,arguments)},darken:function(){return this._applyModification(Gk,arguments)},desaturate:function(){return this._applyModification(Lk,arguments)},saturate:function(){return this._applyModification(Rk,arguments)},greyscale:function(){return this._applyModification(Dk,arguments)},spin:function(){return this._applyModification(Uk,arguments)},_applyCombination:function(t,e){return t.apply(null,[this].concat([].slice.call(e)))},analogous:function(){return this._applyCombination(Wk,arguments)},complement:function(){return this._applyCombination(zk,arguments)},monochromatic:function(){return this._applyCombination(qk,arguments)},splitcomplement:function(){return this._applyCombination(Hk,arguments)},triad:function(){return this._applyCombination(Vk,[3])},tetrad:function(){return this._applyCombination(Vk,[4])}},Ak.fromRatio=function(t,e){if("object"==kk(t)){var r={};for(var n in t)t.hasOwnProperty(n)&&(r[n]="a"===n?t[n]:tC(t[n]));t=r}return Ak(t,e)},Ak.equals=function(t,e){return!(!t||!e)&&Ak(t).toRgbString()==Ak(e).toRgbString()},Ak.random=function(){return Ak.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})},Ak.mix=function(t,e,r){r=0===r?0:r||50;var n=Ak(t).toRgb(),o=Ak(e).toRgb(),i=r/100;return Ak({r:(o.r-n.r)*i+n.r,g:(o.g-n.g)*i+n.g,b:(o.b-n.b)*i+n.b,a:(o.a-n.a)*i+n.a})},Ak.readability=function(t,e){var r=Ak(t),n=Ak(e);return(Math.max(r.getLuminance(),n.getLuminance())+.05)/(Math.min(r.getLuminance(),n.getLuminance())+.05)},Ak.isReadable=function(t,e,r){var n,o,i=Ak.readability(t,e);switch(o=!1,(n=function(t){var e,r;e=((t=t||{level:"AA",size:"small"}).level||"AA").toUpperCase(),r=(t.size||"small").toLowerCase(),"AA"!==e&&"AAA"!==e&&(e="AA");"small"!==r&&"large"!==r&&(r="small");return{level:e,size:r}}(r)).level+n.size){case"AAsmall":case"AAAlarge":o=i>=4.5;break;case"AAlarge":o=i>=3;break;case"AAAsmall":o=i>=7}return o},Ak.mostReadable=function(t,e,r){var n,o,i,a,s=null,u=0;o=(r=r||{}).includeFallbackColors,i=r.level,a=r.size;for(var l=0;l<e.length;l++)(n=Ak.readability(t,e[l]))>u&&(u=n,s=Ak(e[l]));return Ak.isReadable(t,s,{level:i,size:a})||!o?s:(r.includeFallbackColors=!1,Ak.mostReadable(t,["#fff","#000"],r))};var Yk=Ak.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},Xk=Ak.hexNames=function(t){var e={};for(var r in t)t.hasOwnProperty(r)&&(e[t[r]]=r);return e}(Yk);function Jk(t){return t=parseFloat(t),(isNaN(t)||t<0||t>1)&&(t=1),t}function Kk(t,e){(function(t){return"string"==typeof t&&-1!=t.indexOf(".")&&1===parseFloat(t)})(t)&&(t="100%");var r=function(t){return"string"==typeof t&&-1!=t.indexOf("%")}(t);return t=Math.min(e,Math.max(0,parseFloat(t))),r&&(t=parseInt(t*e,10)/100),Math.abs(t-e)<1e-6?1:t%e/parseFloat(e)}function Qk(t){return Math.min(1,Math.max(0,t))}function Zk(t){return parseInt(t,16)}function $k(t){return 1==t.length?"0"+t:""+t}function tC(t){return t<=1&&(t=100*t+"%"),t}function eC(t){return Math.round(255*parseFloat(t)).toString(16)}function rC(t){return Zk(t)/255}var nC,oC,iC,aC=(oC="[\\s|\\(]+("+(nC="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+nC+")[,|\\s]+("+nC+")\\s*\\)?",iC="[\\s|\\(]+("+nC+")[,|\\s]+("+nC+")[,|\\s]+("+nC+")[,|\\s]+("+nC+")\\s*\\)?",{CSS_UNIT:new RegExp(nC),rgb:new RegExp("rgb"+oC),rgba:new RegExp("rgba"+iC),hsl:new RegExp("hsl"+oC),hsla:new RegExp("hsla"+iC),hsv:new RegExp("hsv"+oC),hsva:new RegExp("hsva"+iC),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function sC(t){return!!aC.CSS_UNIT.exec(t)}var uC=2,lC=.16,cC=.05,fC=.05,hC=.15,pC=5,dC=4,yC=[{index:7,opacity:.15},{index:6,opacity:.25},{index:5,opacity:.3},{index:5,opacity:.45},{index:5,opacity:.65},{index:5,opacity:.85},{index:4,opacity:.9},{index:3,opacity:.95},{index:2,opacity:.97},{index:1,opacity:.98}];function vC(t,e,r){var n;return(n=Math.round(t.h)>=60&&Math.round(t.h)<=240?r?Math.round(t.h)-uC*e:Math.round(t.h)+uC*e:r?Math.round(t.h)+uC*e:Math.round(t.h)-uC*e)<0?n+=360:n>=360&&(n-=360),n}function gC(t,e,r){return 0===t.h&&0===t.s?t.s:((n=r?t.s-lC*e:e===dC?t.s+lC:t.s+cC*e)>1&&(n=1),r&&e===pC&&n>.1&&(n=.1),n<.06&&(n=.06),Number(n.toFixed(2)));var n}function mC(t,e,r){var n;return(n=r?t.v+fC*e:t.v-hC*e)>1&&(n=1),Number(n.toFixed(2))}function bC(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=[],n=Ak(t),o=pC;o>0;o-=1){var i=n.toHsv(),a=Ak({h:vC(i,o,!0),s:gC(i,o,!0),v:mC(i,o,!0)}).toHexString();r.push(a)}r.push(n.toHexString());for(var s=1;s<=dC;s+=1){var u=n.toHsv(),l=Ak({h:vC(u,s),s:gC(u,s),v:mC(u,s)}).toHexString();r.push(l)}return"dark"===e.theme?yC.map(function(t){var n=t.index,o=t.opacity;return Ak.mix(e.backgroundColor||"#141414",r[n],100*o).toHexString()}):r}var wC={red:"#F5222D",volcano:"#FA541C",orange:"#FA8C16",gold:"#FAAD14",yellow:"#FADB14",lime:"#A0D911",green:"#52C41A",cyan:"#13C2C2",blue:"#1890FF",geekblue:"#2F54EB",purple:"#722ED1",magenta:"#EB2F96",grey:"#666666"},SC={},xC={};Object.keys(wC).forEach(function(t){SC[t]=bC(wC[t]),SC[t].primary=SC[t][5],xC[t]=bC(wC[t],{theme:"dark",backgroundColor:"#141414"}),xC[t].primary=xC[t][5]});SC.red,SC.volcano,SC.gold,SC.orange,SC.yellow,SC.lime,SC.green,SC.cyan,SC.blue,SC.geekblue,SC.purple,SC.magenta,SC.grey;var _C=function(t,e,r){var n=Pk()(t),o=Pk()(e);return Pk()([(1-r)*n.red()+r*o.red(),(1-r)*n.green()+r*o.green(),(1-r)*n.blue()+r*o.blue()]).rgb()},EC=function(t,e,r,n){return void 0===e&&(e="#fff"),void 0===r&&(r="default"),void 0===n&&(n="rgb(150, 150, 150)"),"default"===r?function(t,e,r){void 0===e&&(e="#fff"),void 0===r&&(r="rgb(150, 150, 150)");var n=_C(e,t,.05).rgb().toString(),o=_C(e,t,.1).rgb().toString(),i=_C(e,t,.2).rgb().toString(),a=_C(e,t,.4).rgb().toString(),s=_C(e,r,.02).rgb().toString(),u=_C(e,r,.05).rgb().toString(),l=_C(e,r,.1).rgb().toString(),c=_C(e,r,.2).rgb().toString(),f=_C(e,r,.3).rgb().toString(),h=bC(t,{theme:"default",backgroundColor:e}),p=Pk()(t).hex().toLowerCase(),d=h.indexOf(p),y=t;return-1!==d&&(y=h[d+1]),{mainStroke:t,mainFill:o,activeStroke:t,activeFill:n,inactiveStroke:a,inactiveFill:n,selectedStroke:t,selectedFill:e,highlightStroke:y,highlightFill:i,disableStroke:f,disableFill:u,edgeMainStroke:f,edgeActiveStroke:t,edgeInactiveStroke:c,edgeSelectedStroke:t,edgeHighlightStroke:t,edgeDisableStroke:l,comboMainStroke:f,comboMainFill:s,comboActiveStroke:t,comboActiveFill:n,comboInactiveStroke:f,comboInactiveFill:s,comboSelectedStroke:t,comboSelectedFill:s,comboHighlightStroke:y,comboHighlightFill:s,comboDisableStroke:c,comboDisableFill:u}}(t,e,"rgb(150, 150, 150)"):function(t,e,r){void 0===e&&(e="#fff"),void 0===r&&(r="#777");var n=_C(e,t,.2).rgb().toString(),o=_C(e,t,.3).rgb().toString(),i=_C(e,t,.6).rgb().toString(),a=_C(e,t,.8).rgb().toString(),s=_C(e,r,.2).rgb().toString(),u=_C(e,r,.25).rgb().toString(),l=_C(e,r,.3).rgb().toString(),c=_C(e,r,.4).rgb().toString(),f=_C(e,r,.5).rgb().toString(),h=bC(t,{theme:"dark",backgroundColor:e}),p=Pk()(t).hex().toLowerCase(),d=h.indexOf(p),y=t;return-1!==d&&(y=h[d+1]),{mainStroke:a,mainFill:n,activeStroke:t,activeFill:o,inactiveStroke:a,inactiveFill:n,selectedStroke:t,selectedFill:n,highlightStroke:t,highlightFill:i,disableStroke:f,disableFill:u,edgeMainStroke:r,edgeActiveStroke:t,edgeInactiveStroke:r,edgeSelectedStroke:t,edgeHighlightStroke:t,edgeDisableStroke:l,comboMainStroke:c,comboMainFill:u,comboActiveStroke:t,comboActiveFill:s,comboInactiveStroke:c,comboInactiveFill:u,comboSelectedStroke:t,comboSelectedFill:s,comboHighlightStroke:y,comboHighlightFill:u,comboDisableStroke:c,comboDisableFill:s}}(t,e,"#777")},OC=function(t,e,r,n){void 0===e&&(e="#fff"),void 0===r&&(r="default"),void 0===n&&(n="rgb(150, 150, 150)");var o=[];return t.forEach(function(t){o.push(EC(t,e,r,n))}),o},PC=EC("rgb(95, 149, 255)","rgb(255, 255, 255)"),kC={version:"0.8.23",rootContainerClassName:"root-container",nodeContainerClassName:"node-container",edgeContainerClassName:"edge-container",comboContainerClassName:"combo-container",delegateContainerClassName:"delegate-container",defaultLoopPosition:"top",nodeLabel:{style:{fill:"#000",fontSize:12,textAlign:"center",textBaseline:"middle"},offset:4},defaultNode:{type:"circle",style:{lineWidth:1,stroke:PC.mainStroke,fill:PC.mainFill},size:20,color:PC.mainStroke,linkPoints:{size:8,lineWidth:1,fill:PC.activeFill,stroke:PC.activeStroke}},nodeStateStyles:{active:{fill:PC.activeFill,stroke:PC.activeStroke,lineWidth:2,shadowColor:PC.mainStroke,shadowBlur:10},selected:{fill:PC.selectedFill,stroke:PC.selectedStroke,lineWidth:4,shadowColor:PC.selectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{fill:PC.highlightFill,stroke:PC.highlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{fill:PC.inactiveFill,stroke:PC.inactiveStroke,lineWidth:1},disable:{fill:PC.disableFill,stroke:PC.disableStroke,lineWidth:1}},edgeLabel:{style:{fill:"rgb(0, 0, 0)",textAlign:"center",textBaseline:"middle",fontSize:12}},defaultEdge:{type:"line",size:1,style:{stroke:PC.edgeMainStroke,lineAppendWidth:2},color:PC.edgeMainStroke},edgeStateStyles:{active:{stroke:PC.edgeActiveStroke,lineWidth:1},selected:{stroke:PC.edgeSelectedStroke,lineWidth:2,shadowColor:PC.edgeSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:PC.edgeHighlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{stroke:PC.edgeInactiveStroke,lineWidth:1},disable:{stroke:PC.edgeDisableStroke,lineWidth:1}},comboLabel:{style:{fill:"rgb(0, 0, 0)",textBaseline:"middle",fontSize:12},refY:10,refX:10},defaultCombo:{type:"circle",style:{fill:PC.comboMainFill,lineWidth:1,stroke:PC.comboMainStroke,r:5,width:20,height:10},size:[20,5],color:PC.comboMainStroke,padding:[25,20,15,20]},comboStateStyles:{active:{stroke:PC.comboActiveStroke,lineWidth:1,fill:PC.comboActiveFill},selected:{stroke:PC.comboSelectedStroke,lineWidth:2,fill:PC.comboSelectedFill,shadowColor:PC.comboSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:PC.comboHighlightStroke,lineWidth:2,fill:PC.comboHighlightFill,"text-shape":{fontWeight:500}},inactive:{stroke:PC.comboInactiveStroke,fill:PC.comboInactiveFill,lineWidth:1},disable:{stroke:PC.comboDisableStroke,fill:PC.comboDisableFill,lineWidth:1}},delegateStyle:{fill:"#F3F9FF",fillOpacity:.5,stroke:"#1890FF",strokeOpacity:.9,lineDash:[5,5]},textWaterMarkerConfig:{width:150,height:100,compatible:!1,text:{x:0,y:60,lineHeight:20,rotate:20,fontSize:14,fontFamily:"Microsoft YaHei",fill:"rgba(0, 0, 0, 0.1)",baseline:"Middle"}},imageWaterMarkerConfig:{width:150,height:130,compatible:!1,image:{x:0,y:0,width:30,height:20,rotate:0}},waterMarkerImage:"https://gw.alipayobjects.com/os/s/prod/antv/assets/image/logo-with-text-73b8a.svg"},CC=function t(e,r){var n;e.isGroup()&&r.isGroup()&&(null===(n=e.get("children"))||void 0===n||n.forEach(function(e,n){var o=r.get("children")[n];t(e,o)}));var o=e.get("type"),i=r.get("type");if("image"===o&&"image"===i){var a=e.get("clipShape");a&&r.setClip({type:a.get("type"),attrs:a.attr()})}};function TC(t,e,r){if(t){if("function"==typeof t.addEventListener)return t.addEventListener(e,r,!1),{remove:function(){t.removeEventListener(e,r,!1)}};if("function"==typeof t.attachEvent)return t.attachEvent("on"+e,r),{remove:function(){t.detachEvent("on"+e,r)}}}}var AC=vO.cloneEvent,MC=vO.isViewportChanged,jC=function(t){function e(e){var r=t.call(this,e)||this;return r.extendEvents=[],r.dragging=!1,r.mousedown=!1,r.preItem=null,r.destroy(),r.graph=e,r.destroyed=!1,r.initEvents(),r}return(0,rg.__extends)(e,t),e.prototype.initEvents=function(){var t=this.graph,e=this.extendEvents,r=void 0===e?[]:e,n=t.get("canvas"),o=n.get("el"),i=(0,ng.wrapBehavior)(this,"onCanvasEvents"),a=(0,ng.wrapBehavior)(this,"onExtendEvents"),s=(0,ng.wrapBehavior)(this,"onWheelEvent");n.off("*").on("*",i),this.canvasHandler=i,r.push(TC(o,"wheel",s)),"undefined"!=typeof window&&(r.push(TC(window,"keydown",a)),r.push(TC(window,"keyup",a)),r.push(TC(window,"focus",a))),this.resetHandler&&t.off("afterchangedata",this.resetHandler),this.resetHandler=(0,ng.wrapBehavior)(this,"resetStatus"),t.on("afterchangedata",this.resetHandler)},e.getItemRoot=function(t){for(;t&&!t.get("item");)t=t.get("parent");return t},e.prototype.onCanvasEvents=function(t){var r=this,n=this.graph,o=n.get("canvas"),i=t.target,a=t.type;switch(a){case"drag":this.onCanvasEvents(Object.assign({},t,{type:"mousemove"}));break;case"dragend":this.onCanvasEvents(Object.assign({},t,{type:"mouseup"}));break;case"mousedown":this.mousedown=!0;break;case"mouseup":setTimeout(function(){return r.mousedown=!1});break;case"click":if(!this.mousedown)return}t.canvasX=t.x,t.canvasY=t.y;var s={x:t.canvasX,y:t.canvasY},u=n.get("group").getMatrix();if(u||(u=[1,0,0,0,1,0,0,0,1]),MC(u)&&(s=n.getPointByClient(t.clientX,t.clientY)),t.x=s.x,t.y=s.y,t.currentTarget=n,i===o)return"mousemove"!==a&&"mouseleave"!==a||this.handleMouseMove(t,"canvas"),t.target=o,t.item=null,n.emit(a,t),void n.emit("canvas:".concat(a),t);var l=e.getItemRoot(i);if(l){var c=l.get("item");if(!c.destroyed){var f=c.getType();if(t.target=i,t.item=c,t.canvasX===t.x&&t.canvasY===t.y){var h=n.getCanvasByPoint(t.x,t.y);t.canvasX=h.x,t.canvasY=h.y}t.name&&!t.name.includes(":")?(n.emit("".concat(f,":").concat(a),t),n.emit(a,t)):t.name&&n.emit(t.name,t),"dragstart"===a&&(this.dragging=!0),"dragend"===a&&(this.dragging=!1),"mousemove"===a&&this.handleMouseMove(t,f)}}else n.emit(a,t)},e.prototype.onExtendEvents=function(t){this.graph.emit(t.type,t)},e.prototype.onWheelEvent=function(t){(0,ng.isNil)(t.wheelDelta)&&(t.wheelDelta=-t.detail),this.graph.emit("wheel",t)},e.prototype.handleMouseMove=function(t,e){var r=this.graph,n=this.preItem,o=r.get("canvas"),i=t.target===o?null:t.item;t=AC(t),n&&n!==i&&!n.destroyed&&(t.item=n,this.emitCustomEvent(n.getType(),"mouseleave",t),this.dragging&&this.emitCustomEvent(n.getType(),"dragleave",t)),i&&n!==i&&(t.item=i,this.emitCustomEvent(e,"mouseenter",t),this.dragging&&this.emitCustomEvent(e,"dragenter",t)),this.preItem=i},e.prototype.emitCustomEvent=function(t,e,r){r.type=e,this.graph.emit("".concat(t,":").concat(e),r)},e.prototype.resetStatus=function(){this.mousedown=!1,this.dragging=!1,this.preItem=null},e.prototype.destroy=function(){var t=this.graph,e=this.canvasHandler,r=this.extendEvents;t.get("canvas").off("*",e),(0,ng.each)(r,function(t){t.remove()}),this.resetStatus(),this.extendEvents.length=0,this.canvasHandler=null,this.resetHandler=null,this.destroyed=!0},e}(mO),IC=r(6038),NC=r(8716),LC=r.n(NC),RC=vO.traverseTree,DC=function(t,e){return t?(0,ng.isNumber)(t)?function(e){return t}:t:function(t){return e||1}},BC=function(t,e){var r=[],n=[],o={},i=0;for(i=0;i<t.length;i++){var a=t[i];o[a.id]=i,r.push(a.x),r.push(a.y),r.push(0),r.push(0),n.push([])}for(i=0;i<e.length;i++){var s=e[i];n[o[s.source]].push(o[s.target]),n[o[s.target]].push(o[s.source])}var u=0;for(i=0;i<t.length;i++){var l=r.length,c=n[i],f=c.length;r[4*i+2]=l,r[4*i+3]=c.length,u=Math.max(u,c.length);for(var h=0;h<f;++h){var p=c[h];r.push(+p)}}for(;r.length%4!=0;)r.push(0);return{array:new Float32Array(r),maxEdgePerVetex:u}},FC=function(t,e,r){var n=[],o=[],i={},a=0;for(a=0;a<t.length;a++){var s=t[a];i[s.id]=a,n.push(s.x),n.push(s.y),n.push(0),n.push(0),o.push([])}for(a=0;a<e.length;a++){var u=e[a];o[i[u.source]].push(i[u.target]),o[i[u.source]].push(r(u)),o[i[u.target]].push(i[u.source]),o[i[u.target]].push(r(u))}var l=0;for(a=0;a<t.length;a++){var c=n.length,f=o[a],h=f.length;n[4*a+2]=c,n[4*a+3]=h/2,l=Math.max(l,h/2);for(var p=0;p<h;++p){var d=f[p];n.push(+d)}}for(;n.length%4!=0;)n.push(0);return{array:new Float32Array(n),maxEdgePerVetex:l}},GC=function(t,e,r,n){var o=[],i=[],a={},s=0;for(s=0;s<t.length;s++){var u=t[s];a[u.id]=s,o.push(u.x),o.push(u.y),o.push(0),o.push(0),i.push([])}for(s=0;s<e.length;s++){var l=e[s];i[a[l.source]].push(a[l.target]),i[a[l.source]].push(r(l)),i[a[l.source]].push(n(l)),i[a[l.source]].push(0),i[a[l.target]].push(a[l.source]),i[a[l.target]].push(r(l)),i[a[l.target]].push(n(l)),i[a[l.target]].push(0)}var c=0;for(s=0;s<t.length;s++){var f=o.length,h=i[s],p=h.length;o[4*s+2]=f+1048576*p/4,o[4*s+3]=0,c=Math.max(c,p/4);for(var d=0;d<p;++d){var y=h[d];o.push(+y)}}for(;o.length%4!=0;)o.push(0);return{array:new Float32Array(o),maxEdgePerVetex:c}},UC=function(t,e){var r=[],n=t.length,o={};return e.forEach(function(e){t.forEach(function(t,i){if(void 0===o[e[t]]&&(o[e[t]]=Object.keys(o).length),r.push(o[e[t]]),i===n-1)for(;r.length%4!=0;)r.push(0)})}),{array:new Float32Array(r),count:Object.keys(o).length}},zC=function(t){for(var e=[],r=t.length,n=t[0].length,o=function(n){t.forEach(function(t,o){if(e.push(t[n]),o===r-1)for(;e.length%4!=0;)e.push(0)})},i=0;i<n;i++)o(i);return new Float32Array(e)},VC=function(t,e){var r={x:1/0,y:1/0},n={x:-1/0,y:-1/0},o="x",i="y";e&&["V","TB","BT"].indexOf(e)>=0&&(i="x",o="y");var a=0;RC(t,function(t){return a++,t.x>n.x&&(n.x=t.x),t.x<r.x&&(r.x=t.x),t.y>n.y&&(n.y=t.y),t.y<r.y&&(r.y=t.y),!0});var s=2*Math.PI/a,u=n[i]-r[i];return 0===u?t:(RC(t,function(e){var n=(e[i]-r[i])/u*(2*Math.PI-s)+s,a=Math.abs("x"===o?e.x-t.x:e.y-t.y);return e.x=a*Math.cos(n),e.y=a*Math.sin(n),!0}),t)},HC=function t(){return"undefined"==typeof window||"undefined"==typeof document?{}:{canvas:!!window.CanvasRenderingContext2D,webgl:function(){try{var t=document.createElement("canvas");return!(!window.WebGLRenderingContext||!t.getContext("webgl")&&!t.getContext("experimental-webgl"))}catch(t){return!1}}(),workers:!!window.Worker,fileapi:window.File&&window.FileReader&&window.FileList&&window.Blob,getWebGLErrorMessage:function(){var t=document.createElement("div");return t.id="webgl-error-message",t.style.fontFamily="monospace",t.style.fontSize="13px",t.style.fontWeight="normal",t.style.textAlign="center",t.style.background="#fff",t.style.color="#000",t.style.padding="1.5em",t.style.width="400px",t.style.margin="5em auto 0",this.webgl||(t.innerHTML=window.WebGLRenderingContext?['Your graphics card does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" rel="external nofollow" rel="external nofollow" style="color:#000">WebGL</a>.<br />','Find out how to get it <a href="http://get.webgl.org/" rel="external nofollow" rel="external nofollow" style="color:#000">here</a>.'].join("\n"):['Your browser does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" rel="external nofollow" rel="external nofollow" style="color:#000">WebGL</a>.<br/>','Find out how to get it <a href="http://get.webgl.org/" rel="external nofollow" rel="external nofollow" style="color:#000">here</a>.'].join("\n")),t},addGetWebGLMessage:function(e){var r=void 0!==(e=e||{}).parent?e.parent:document.body,n=void 0!==e.id?e.id:"oldie",o=t().getWebGLErrorMessage();o.id=n,r.appendChild(o)}}},WC=function(){var t=navigator.userAgent.toLowerCase();return t.indexOf("firefox")>-1?"firefox":t.indexOf("safari")>-1?"safari":t.indexOf("opr")>-1?"opera":t.indexOf("chrome")>-1?"chrome":t.indexOf("trident")>-1?"ie 11":t.indexOf("ie")>-1?"ie":"unknown"},qC=(0,rg.__assign)((0,rg.__assign)((0,rg.__assign)((0,rg.__assign)((0,rg.__assign)({},vO),d),y),v),g),YC=qC.radialLayout,XC=function(){function t(t){this.type=t.type,this.radial=t.radial,this.config=t}return t.prototype.init=function(t){var e=this;this.data=t,this.radial?this.layoutMethod=function(t){var r=LC()[e.type](t,e.config);return YC(r),r}:this.layoutMethod=function(t){return LC()[e.type](t,e.config)}},t.prototype.execute=function(){return this.layoutMethod(this.data,this.config)},t.prototype.layout=function(t){return this.init(t),this.execute()},t}();(0,IC.registerLayout)("grid",IC.GridLayout),(0,IC.registerLayout)("random",IC.RandomLayout),(0,IC.registerLayout)("force",IC.ForceLayout),(0,IC.registerLayout)("circular",IC.CircularLayout),(0,IC.registerLayout)("dagre",IC.DagreLayout),(0,IC.registerLayout)("dagreCompound",IC.DagreCompoundLayout),(0,IC.registerLayout)("radial",IC.RadialLayout),(0,IC.registerLayout)("concentric",IC.ConcentricLayout),(0,IC.registerLayout)("mds",IC.MDSLayout),(0,IC.registerLayout)("fruchterman",IC.FruchtermanLayout),(0,IC.registerLayout)("fruchterman-gpu",IC.FruchtermanGPULayout),(0,IC.registerLayout)("gForce",IC.GForceLayout),(0,IC.registerLayout)("force2",IC.Force2Layout),(0,IC.registerLayout)("gForce-gpu",IC.GForceGPULayout),(0,IC.registerLayout)("comboForce",IC.ComboForceLayout),(0,IC.registerLayout)("comboCombined",IC.ComboCombinedLayout),(0,IC.registerLayout)("forceAtlas2",IC.ForceAtlas2Layout);var JC=function(){return function(t,e){var r=t.toString(),n=new Blob(["importScripts('".concat(e,"');(").concat(r,")()")],{type:"text/javascript"});return new Worker(URL.createObjectURL(n))}}(),KC=function(t){return void 0===t&&(t="https://unpkg.com/@antv/layout@0.3.23/dist/layout.min.js"),new JC(function(){var t={RUN:"LAYOUT_RUN",END:"LAYOUT_END",ERROR:"LAYOUT_ERROR",TICK:"LAYOUT_TICK",GPURUN:"GPU_LAYOUT_RUN",GPUEND:"GPU_LAYOUT_END"};layout.registerLayout("grid",layout.GridLayout),layout.registerLayout("random",layout.RandomLayout),layout.registerLayout("force",layout.ForceLayout),layout.registerLayout("force2",layout.Force2Layout),layout.registerLayout("circular",layout.CircularLayout),layout.registerLayout("dagre",layout.DagreLayout),layout.registerLayout("dagreCompound",layout.DagreCompoundLayout),layout.registerLayout("radial",layout.RadialLayout),layout.registerLayout("concentric",layout.ConcentricLayout),layout.registerLayout("mds",layout.MDSLayout),layout.registerLayout("fruchterman",layout.FruchtermanLayout),layout.registerLayout("fruchterman-gpu",layout.FruchtermanGPULayout),layout.registerLayout("gForce",layout.GForceLayout),layout.registerLayout("gForce-gpu",layout.GForceGPULayout),layout.registerLayout("comboForce",layout.ComboForceLayout),layout.registerLayout("comboCombined",layout.ComboCombinedLayout),layout.registerLayout("forceAtlas2",layout.ForceAtlas2Layout),onmessage=function(e){(function(e){var r=e.data.type;return r===t.RUN||r===t.GPURUN})(e)&&function(e){var r=this;switch(e.data.type){case t.RUN:var n,o=e.data,i=o.nodes,a=o.edges,s=o.layoutCfg,u=(p=void 0===s?{}:s).type;if(!(l=layout.getLayoutByName(u))){this.postMessage({type:t.ERROR,message:"layout ".concat(u," not found")});break}p.onLayoutEnd=function(){r.postMessage({type:t.END,nodes:i}),null===n||void 0===n||n.destroy()},(n=new l(p)).init({nodes:i,edges:a}),n.execute();break;case t.GPURUN:var l,c=e.data,f=c.nodes,h=(a=c.edges,c.layoutCfg),p=void 0===h?{}:h,d=c.canvas;if(u=p.type,!(l=layout.getLayoutByName(u))){this.postMessage({type:t.ERROR,message:"layout ".concat(u," not found")});break}if("gpu"!==u.split("-")[1]){this.postMessage({type:t.ERROR,message:"layout ".concat(u," does not support GPU")});break}var y=new l(p);y.init({nodes:f,edges:a}),y.executeWithWorker(d,this)}}(e)}},t)},QC="LAYOUT_RUN",ZC="LAYOUT_END",$C="LAYOUT_ERROR",tT="LAYOUT_TICK",eT="GPU_LAYOUT_RUN",rT="GPU_LAYOUT_END";function nT(t){"@babel/helpers - typeof";return(nT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var oT=function(t){return setTimeout(t,16)},iT=function(t){return clearTimeout(t)},aT=function(t){return("undefined"!=typeof window&&(window.requestAnimationFrame||window.webkitRequestAnimationFrame)||oT)(t)},sT=function(t){return("undefined"!=typeof window&&(window.cancelAnimationFrame||window.webkitCancelAnimationFrame)||iT)(t)},uT=["fruchterman","gForce"],lT=["force","grid","circular"],cT=function(t){function e(e){var r=t.call(this,e)||this;return r.graph=e,r.layoutCfg=e.get("layout")||{},r.layoutType=r.getLayoutType(),r.worker=null,r.workerData={},r.initLayout(),r}return(0,rg.__extends)(e,t),e.prototype.initLayout=function(){},e.prototype.getWorker=function(){return this.worker?this.worker:("undefined"==typeof Worker?(console.warn("Web worker is not supported in current browser."),this.worker=null):this.worker=KC(this.layoutCfg.workerScriptURL),this.worker)},e.prototype.stopWorker=function(){var t=this.workerData;this.worker&&(this.worker.terminate(),this.worker=null,t.requestId&&(sT(t.requestId),t.requestId=null),t.requestId2&&(sT(t.requestId2),t.requestId2=null))},e.prototype.execLayoutMethod=function(t,e){var r=this;return new Promise(function(n,o){return(0,rg.__awaiter)(r,void 0,void 0,function(){var r,i,a,s,u,l,c,f,h;return(0,rg.__generator)(this,function(p){switch(p.label){case 0:if(!(r=this.graph)||r.get("destroyed"))return[2];i=t.type,t.onLayoutEnd=function(){r.emit("aftersublayout",{type:i}),n()},i&&this.isGPU&&(hT(i)?i="".concat(i,"-gpu"):console.warn("The '".concat(i,"' layout does not support GPU calculation for now, it will run in CPU."))),vO.isForce(i)?(a=t.onTick,s=t.animate,u=void 0===s&&("force"===i||"force2"===i),f=function(){a&&a(),(s||u)&&r.refreshPositions()},t.tick=f):"comboForce"!==i&&"comboCombined"!==i||(t.comboTrees=r.get("comboTrees")),!1;try{l=new IC.Layouts[i](t),this.layoutMethods[e]&&this.layoutMethods[e].destroy(),this.layoutMethods[e]=l}catch(t){console.warn("The layout method: '".concat(i,"' does not exist! Please specify it first.")),o()}return l.enableTick&&(c=t.onTick,f=function(){c&&c(),r.refreshPositions()},l.tick=f),function(t,e){var r;if(!(null===(r=null===t||void 0===t?void 0:t.nodes)||void 0===r?void 0:r.length))return;t.nodes.forEach(function(t){t.layoutOrder=e})}(h=this.filterLayoutData(this.data,t),e),l.init(h),r.emit("beforesublayout",{type:i}),[4,l.execute()];case 1:return p.sent(),l.isCustomLayout&&t.onLayoutEnd&&t.onLayoutEnd(),[2]}})})})},e.prototype.updateLayoutMethod=function(t,e){var r=this;return new Promise(function(n,o){return(0,rg.__awaiter)(r,void 0,void 0,function(){var r,o,i,a,s,u,l;return(0,rg.__generator)(this,function(c){switch(c.label){case 0:return r=this.graph,o=null===e||void 0===e?void 0:e.type,e.onLayoutEnd=function(){r.emit("aftersublayout",{type:o}),n()},vO.isForce(o)&&(i=e.onTick,a=e.animate,s=void 0===a&&("force"===o||"force2"===o),u=function(){null===i||void 0===i||i(),(a||s)&&r.refreshPositions()},e.tick=u),l=this.filterLayoutData(this.data,e),t.init(l),t.updateCfg(e),r.emit("beforesublayout",{type:o}),[4,t.execute()];case 1:return c.sent(),t.isCustomLayout&&e.onLayoutEnd&&e.onLayoutEnd(),[2]}})})})},e.prototype.layout=function(t){var e,r=this,n=this.graph;if(n&&!n.get("destroyed")){this.data=this.setDataFromGraph();var o=this.data,i=o.nodes,a=o.hiddenNodes;if(!i)return!1;var s=n.get("width"),u=n.get("height"),l={};Object.assign(l,{width:s,height:u,center:[s/2,u/2]},this.layoutCfg),this.layoutCfg=l;var c=l.type,f=!1;null===(e=this.layoutMethods)||void 0===e||e.forEach(function(t){var e;return f=!!(null===(e=t.nodes)||void 0===e?void 0:e.length)||f});var h=this.destoryLayoutMethods();n.emit("beforelayout");var p=Promise.resolve();f&&c&&1===(null===h||void 0===h?void 0:h.length)&&h[0]===c?this.tweakInit():p=this.initPositions(l.center,i),this.initPositions(l.center,a).then(),this.isGPU=pT(l,c);var d=l.onLayoutEnd,y=l.layoutEndFormatted,v=l.adjust;if(y||(l.layoutEndFormatted=!0,l.onAllLayoutEnd=function(){return(0,rg.__awaiter)(r,void 0,void 0,function(){return(0,rg.__generator)(this,function(t){switch(t.label){case 0:return d&&d(i),this.refreshLayout(),v&&l.pipes?[4,this.adjustPipesBox(this.data,v)]:[3,2];case 1:t.sent(),this.refreshLayout(),t.label=2;case 2:return n.emit("afterlayout"),[2]}})})}),this.stopWorker(),l.workerEnabled&&this.layoutWithWorker(this.data,t))return!0;var g=!1;return l.type?(g=!0,p=p.then(function(){return(0,rg.__awaiter)(r,void 0,void 0,function(){return(0,rg.__generator)(this,function(t){switch(t.label){case 0:return[4,this.execLayoutMethod(l,0)];case 1:return[2,t.sent()]}})})})):l.pipes&&(g=!0,l.pipes.forEach(function(t,e){p=p.then(function(){return(0,rg.__awaiter)(r,void 0,void 0,function(){return(0,rg.__generator)(this,function(r){switch(r.label){case 0:return[4,this.execLayoutMethod(t,e)];case 1:return[2,r.sent()]}})})})})),g?p.then(function(){l.onAllLayoutEnd&&l.onAllLayoutEnd(),t&&t()}).catch(function(t){console.warn("graph layout failed,",t)}):(n.refreshPositions(),null===t||void 0===t||t()),!1}},e.prototype.tweakInit=function(){var t=this.data,e=this.graph,r=t.nodes,n=t.edges;if(null===r||void 0===r?void 0:r.length){var o={};r.forEach(function(t){var e=t.x,r=t.y;isNaN(e)||isNaN(r)||(o[t.id]={x:e,y:r},t.mass=t.mass||2)}),n.forEach(function(t){var e=t.source,r=t.target,n=o[e],i=o[r];!n&&i?o[e]={x:i.x+80*(Math.random()-.5),y:i.y+80*(Math.random()-.5)}:!i&&n&&(o[r]={x:n.x+80*(Math.random()-.5),y:n.y+80*(Math.random()-.5)})});var i=e.get("width"),a=e.get("height");r.forEach(function(t){var e=o[t.id]||{x:i/2+20*(Math.random()-.5),y:a/2+20*(Math.random()-.5)};t.x=e.x,t.y=e.y})}},e.prototype.initWithPreset=function(t,e){var r=this;return new Promise(function(n,o){return(0,rg.__awaiter)(r,void 0,void 0,function(){var r,o,i,a,s,u,l;return(0,rg.__generator)(this,function(c){switch(c.label){case 0:return o=(r=this).layoutCfg,i=r.data,(null===(a=o.preset)||void 0===a?void 0:a.type)&&IC.Layouts[null===a||void 0===a?void 0:a.type]?(s=pT(a,a.type),u=s?"".concat(a.type,"-gpu"):a.type,l=new IC.Layouts[u](a),delete o.preset,l.init(i),[4,l.execute()]):(null===e||void 0===e||e(),n(),[2,!1]);case 1:return c.sent(),null===t||void 0===t||t(),n(),[2,!0]}})})})},e.prototype.layoutWithWorker=function(t,e){var r=this,n=this.layoutCfg,o=this.graph,i=this.getWorker(),a=this.workerData;if(!i)return!1;a.requestId=null,a.requestId2=null,a.currentTick=null,a.currentTickData=null,o.emit("beforelayout");var s=Promise.resolve(),u=!1;if(n.type)u=!0,s=s.then(function(){return r.runWebworker(i,t,n)});else if(n.pipes){u=!0;for(var l=function(e){s=s.then(function(){return r.runWebworker(i,t,e)})},c=0,f=n.pipes;c<f.length;c++){l(f[c])}}return u&&s.then(function(){n.onAllLayoutEnd&&n.onAllLayoutEnd(),null===e||void 0===e||e()}).catch(function(t){console.error("layout failed",t)}),!0},e.prototype.runWebworker=function(t,e,r){var n=this,o=this.isGPU,i=this.filterLayoutData(e,r),a=i.nodes,s=i.edges,u=document.createElement("canvas"),l=o&&"undefined"!=typeof window&&window.navigator&&!navigator.gpu&&"OffscreenCanvas"in window&&"transferControlToOffscreen"in u,c=function(t,e){var r={};if(t&&"object"===nT(t))return Object.keys(t).forEach(function(n){t.hasOwnProperty(n)&&e(t[n])&&(r[n]=t[n])}),r;return t}(r,function(t){return"function"!=typeof t});if(l){var f=u.transferControlToOffscreen();c.type="".concat(c.type,"-gpu"),t.postMessage({type:eT,nodes:a,edges:s,layoutCfg:c,canvas:f},[f])}else t.postMessage({type:QC,nodes:a,edges:s,layoutCfg:c});return new Promise(function(e,o){t.onmessage=function(t){n.handleWorkerMessage(e,o,t,i,r)}})},e.prototype.handleWorkerMessage=function(t,e,r,n,o){var i=this.graph,a=this.workerData,s=r.data,u=function(){o.onTick&&o.onTick()};switch(s.type){case tT:a.currentTick=s.currentTick,a.currentTickData=s,a.requestId||(a.requestId=aT(function(){fT(n,s),i.refreshPositions(),u(),s.currentTick===s.totalTicks?t():a.currentTick===s.totalTicks&&(a.requestId2=aT(function(){fT(n,a.currentTickData),i.refreshPositions(),a.requestId2=null,u(),t()})),a.requestId=null}));break;case ZC:null==a.currentTick&&(fT(n,s),t());break;case rT:null==a.currentTick&&(!function(t,e){for(var r=t.nodes,n=e.vertexEdgeData,o=r.length,i=0;i<o;i++){var a=r[i],s=n[4*i],u=n[4*i+1];a.x=s,a.y=u}}(n,s),t());break;case $C:console.warn("Web-Worker layout error!",s.message),e();break;default:e()}},e.prototype.updateLayoutCfg=function(t){var e=this,r=this.graph,n=this.layoutMethods;if(r&&!r.get("destroyed")){var o=t.disableTriggerLayout,i=(0,rg.__rest)(t,["disableTriggerLayout"]),a=(0,ng.mix)({},this.layoutCfg,i);if(this.layoutCfg=a,!o)if(null===n||void 0===n?void 0:n.length){if(this.data=this.setDataFromGraph(),this.stopWorker(),!i.workerEnabled||!this.layoutWithWorker(this.data,null)){r.emit("beforelayout");var s=Promise.resolve(),u=!1;1===(null===n||void 0===n?void 0:n.length)?(u=!0,s=s.then(function(){return(0,rg.__awaiter)(e,void 0,void 0,function(){return(0,rg.__generator)(this,function(t){switch(t.label){case 0:return[4,this.updateLayoutMethod(n[0],a)];case 1:return[2,t.sent()]}})})})):(null===n||void 0===n?void 0:n.length)&&(u=!0,n.forEach(function(t,r){var n=a.pipes[r];s=s.then(function(){return(0,rg.__awaiter)(e,void 0,void 0,function(){return(0,rg.__generator)(this,function(e){switch(e.label){case 0:return[4,this.updateLayoutMethod(t,n)];case 1:return[2,e.sent()]}})})})})),u&&s.then(function(){a.onAllLayoutEnd&&a.onAllLayoutEnd()}).catch(function(t){console.warn("layout failed",t)})}}else this.layout()}},e.prototype.adjustPipesBox=function(t,e){var r=this;return new Promise(function(n){var o=t.nodes;(null===o||void 0===o?void 0:o.length)||n(),lT.includes(e)||(console.warn("The adjust type ".concat(e," is not supported yet, please assign it with 'force', 'grid', or 'circular'.")),n());var i={center:r.layoutCfg.center,nodeSize:function(t){return Math.max(t.height,t.width)},preventOverlap:!0,onLayoutEnd:function(){}},a=r.getLayoutBBox(o),s=a.groupNodes,u=a.layoutNodes,l=(0,ng.clone)(u);i.onLayoutEnd=function(){null===u||void 0===u||u.forEach(function(t,e){var r,n,o,i=t.x-(null===(r=l[e])||void 0===r?void 0:r.x),a=t.y-(null===(n=l[e])||void 0===n?void 0:n.y);null===(o=s[e])||void 0===o||o.forEach(function(t){t.x+=i,t.y+=a})}),n()},new IC.Layouts[e](i).layout({nodes:u})})},e.prototype.destroy=function(){this.destoryLayoutMethods();var t=this.worker;t&&(t.terminate(),this.worker=null),this.destroyed=!0,this.graph.set("layout",void 0),this.layoutCfg=void 0,this.layoutType=void 0,this.layoutMethods=void 0,this.graph=null},e}(gO);function fT(t,e){for(var r=t.nodes,n=e.nodes,o=r.length,i=0;i<o;i++){var a=r[i];a.x=n[i].x,a.y=n[i].y}}function hT(t){return uT.includes(t)}function pT(t,e){var r=e;e&&"gpu"===e.split("-")[1]&&(r=e.split("-")[0],t.gpuEnabled=!0);var n=!1;return t.gpuEnabled&&(n=!0,HC().webgl||(console.warn("Your browser does not support webGL or GPGPU. The layout will run in CPU."),n=!1)),n&&!hT(r)&&(console.warn("The '".concat(r,"' layout does not support GPU calculation for now, it will run in CPU.")),n=!1),n}var dT=hg,yT=function(t){function e(e){var r=t.call(this,e)||this,n=r.get("defaultNode");return n||r.set("defaultNode",{type:"circle"}),n.type||(n.type="circle",r.set("defaultNode",n)),r.destroyed=!1,r}return(0,rg.__extends)(e,t),e.prototype.initLayoutController=function(){var t=new cT(this);this.set({layoutController:t})},e.prototype.initEventController=function(){var t=new jC(this);this.set({eventController:t})},e.prototype.initCanvas=function(){var t=this.get("container");if("string"==typeof t&&(t=document.getElementById(t),this.set("container",t)),!t)throw new Error("invalid container");var e,r=t.clientWidth,n=t.clientHeight,o=this.get("width")||r,i=this.get("height")||n;if(this.get("width")||this.get("height")||(this.set("width",r),this.set("height",n)),"svg"===this.get("renderer"))e=new _k({container:t,width:o,height:i});else{var a={container:t,width:o,height:i},s=this.get("pixelRatio");s&&(a.pixelRatio=s,window.devicePixelRatio=s),e=new jP(a)}this.set("canvas",e)},e.prototype.initPlugins=function(){var t=this;(0,ng.each)(t.get("plugins"),function(e){!e.destroyed&&e.initPlugin&&e.initPlugin(t)})},e.prototype.downloadImageWatermark=function(t,e,r,n){return(0,rg.__awaiter)(this,void 0,void 0,function(){var o,i,a;return(0,rg.__generator)(this,function(s){switch(s.label){case 0:return o=t.style.backgroundImage,i=o.slice(5,o.length-2),(a=new Image).src=i,[4,new Promise(function(t){a.onload=function(){var o=e.createPattern(a,"repeat");e.rect(0,0,r,n),e.fillStyle=o,e.fill(),t("")}})];case 1:return s.sent(),[2]}})})},e.prototype.asyncToDataUrl=function(t,e,r,n,o,i){var a=this,s=document.querySelector(".g6-graph-watermarker"),u=this.get("canvas"),l=u.getRenderer(),c=i||u.get("el"),f="";t||(t="image/png"),setTimeout(function(){return(0,rg.__awaiter)(a,void 0,void 0,function(){var i,a,u,h,p,d,y,v,g,m;return(0,rg.__generator)(this,function(b){switch(b.label){case 0:return"svg"!==l?[3,1]:(i=c.cloneNode(!0),a=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),(u=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",a)).replaceChild(i,u.documentElement),h=(new XMLSerializer).serializeToString(u),f="data:image/svg+xml;charset=utf8,".concat(encodeURIComponent(h)),[3,4]);case 1:return p=void 0,d=c.getContext("2d"),y=n||this.get("width"),v=o||this.get("height"),g=void 0,s?[4,this.downloadImageWatermark(s,d,y,v)]:[3,3];case 2:b.sent(),b.label=3;case 3:if(e){m="undefined"!=typeof window?window.devicePixelRatio:1;try{p=d.getImageData(0,0,y*m,v*m),g=d.globalCompositeOperation,d.globalCompositeOperation="destination-over",d.fillStyle=e,d.fillRect(0,0,y,v)}catch(t){console.error("Download image failed. Out of memory at ImageData creation")}}f=c.toDataURL(t),e&&(d.clearRect(0,0,y,v),d.putImageData(p,0,0),d.globalCompositeOperation=g),b.label=4;case 4:return r&&r(f),[2]}})})},16)},e.prototype.toDataURL=function(t,e){var r=this.get("canvas"),n=r.getRenderer(),o=r.get("el");t||(t="image/png");var i="";if("svg"===n){var a=o.cloneNode(!0),s=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),u=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",s);u.replaceChild(a,u.documentElement);var l=(new XMLSerializer).serializeToString(u);i="data:image/svg+xml;charset=utf8,".concat(encodeURIComponent(l))}else{var c=void 0,f=o.getContext("2d"),h=Math.max(this.get("width"),500),p=Math.max(this.get("height"),500),d=void 0;if(e){var y="undefined"!=typeof window&&window.devicePixelRatio||1;try{c=f.getImageData(0,0,h*y,p*y),d=f.globalCompositeOperation,f.globalCompositeOperation="destination-over",f.fillStyle=e,f.fillRect(0,0,h,p)}catch(t){console.error("Download image failed. Out of memory at ImageData creation")}}i=o.toDataURL(t),e&&(f.clearRect(0,0,h,p),f.putImageData(c,0,0),f.globalCompositeOperation=d)}return i},e.prototype.toFullDataURL=function(t,e,r){var n=this.get("group").getCanvasBBox(),o=n.height,i=n.width,a=this.get("renderer"),s=Ek('<div id="virtual-image"></div>'),u=r?r.backgroundColor:void 0,l=r?r.padding:void 0;l?(0,ng.isNumber)(l)&&(l=[l,l,l,l]):l=[0,0,0,0];var c=o+l[0]+l[2],f=i+l[1]+l[3],h={container:s,height:c,width:f,quickHit:!0},p="svg"===a?new _k(h):new jP(h),d=this.get("group").clone(),y=(0,ng.clone)(d.getMatrix());y||(y=[1,0,0,0,1,0,0,0,1]);var v=(n.maxX+n.minX)/2,g=(n.maxY+n.minY)/2;y=dT(y,[["t",-v,-g],["t",i/2+l[3],o/2+l[0]]]),d.resetMatrix(),d.setMatrix(y),p.add(d);var m=p.get("el"),b="";e||(e="image/png"),setTimeout(function(){if("svg"===a){var r=m.cloneNode(!0),n=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),o=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",n);o.replaceChild(r,o.documentElement);var i=(new XMLSerializer).serializeToString(o);b="data:image/svg+xml;charset=utf8,".concat(encodeURIComponent(i))}else{var s=void 0,l=m.getContext("2d"),h=void 0;if(u){var p="undefined"!=typeof window?window.devicePixelRatio:1;try{s=l.getImageData(0,0,f*p,c*p),h=l.globalCompositeOperation,l.globalCompositeOperation="destination-over",l.fillStyle=u,l.fillRect(0,0,f,c)}catch(t){console.error("Download image failed. Out of memory at ImageData creation")}}b=m.toDataURL(e),u&&(l.clearRect(0,0,f,c),l.putImageData(s,0,0),l.globalCompositeOperation=h)}t&&t(b)},16)},e.prototype.downloadFullImage=function(t,e,r){var n=this,o=this.get("group").getCanvasBBox(),i=o.height,a=o.width,s=this.get("renderer"),u=Ek('<div id="virtual-image"></div>'),l=document.querySelector(".g6-graph-watermarker"),c=r?r.backgroundColor:void 0,f=r?r.padding:void 0;f?(0,ng.isNumber)(f)&&(f=[f,f,f,f]):f=[0,0,0,0];var h=i+f[0]+f[2],p=a+f[1]+f[3];if(l){var d=this.get("graphWaterMarker").cfg||{},y=d.width,v=d.height;h=Math.ceil(h/v)*v,p=Math.ceil(p/y)*y}var g,m,b={container:u,height:h,width:p},w="svg"===s?new _k(b):new jP(b),S=this.get("group"),x=(m=(g=S).clone(),CC(g,m),m),_=(0,ng.clone)(x.getMatrix());_||(_=[1,0,0,0,1,0,0,0,1]);var E=(o.maxX+o.minX)/2,O=(o.maxY+o.minY)/2;_=dT(_,[["t",-E,-O],["t",a/2+f[3],i/2+f[0]]]),x.resetMatrix(),x.setMatrix(_),w.add(x);var P=w.get("el");e||(e="image/png"),this.asyncToDataUrl(e,c,function(r){var o=document.createElement("a"),i=(t||"graph")+("svg"===s?".svg":".".concat(e.split("/")[1]));n.dataURLToImage(r,s,o,i);var a=document.createEvent("MouseEvents");a.initEvent("click",!1,!1),o.dispatchEvent(a)},p,h,P)},e.prototype.downloadImage=function(t,e,r){var n=this;this.stopAnimate();var o=this.get("canvas").getRenderer();e||(e="image/png");var i=(t||"graph")+("svg"===o?".svg":".".concat(e.split("/")[1])),a=document.createElement("a");this.asyncToDataUrl(e,r,function(t){n.dataURLToImage(t,o,a,i);var e=document.createEvent("MouseEvents");e.initEvent("click",!1,!1),a.dispatchEvent(e)})},e.prototype.dataURLToImage=function(t,e,r,n){if(t&&"data:"!==t){if("undefined"!=typeof window)if(window.Blob&&window.URL&&"svg"!==e){var o=t.split(","),i="";if(o&&o.length>0){var a=o[0].match(/:(.*?);/);a&&a.length>=2&&(i=a[1])}for(var s=atob(o[1]),u=s.length,l=new Uint8Array(u);u--;)l[u]=s.charCodeAt(u);var c=new Blob([l],{type:i});window.navigator.msSaveBlob?window.navigator.msSaveBlob(c,n):r.addEventListener("click",function(){r.download=n,r.href=window.URL.createObjectURL(c)})}else r.addEventListener("click",function(){r.download=n,r.href=t})}else console.error("Download image failed. The graph is too large or there is invalid attribute values in graph items")},e.prototype.addPlugin=function(t){t.destroyed||(this.get("plugins").push(t),t.initPlugin(this))},e.prototype.removePlugin=function(t){var e=this.get("plugins"),r=e.indexOf(t);r>=0&&(t.destroyPlugin(),e.splice(r,1))},e.prototype.setImageWaterMarker=function(t,e){void 0===t&&(t=kC.waterMarkerImage);var r=this.get("container");(0,ng.isString)(r)&&(r=document.getElementById(r)),r.style.position||(r.style.position="relative");var n=this.get("graphWaterMarker"),o=(0,ng.deepMix)({},kC.imageWaterMarkerConfig,e),i=o.width,a=o.height,s=o.compatible,u=o.image;if(!t){var l=s?r:document.querySelector(".g6-graph-watermarker");return l&&(l.style.cssText=void 0),void(n&&n.clear())}if(n)n.clear();else{var c={container:r,width:i,height:a,capture:!1},f=this.get("pixelRatio");f&&(c.pixelRatio=f,window.devicePixelRatio=f),n=new jP(c),this.set("graphWaterMarker",n)}n.get("el").style.display="none";var h=n.get("context"),p=u.rotate,d=u.x,y=u.y;h.rotate(-p*Math.PI/180);var v=new Image;v.crossOrigin="anonymous",v.src=t,v.onload=function(){if(h.drawImage(v,d,y,u.width,u.height),h.rotate(p*Math.PI/180),s)r.style.cssText="background-image: url(".concat(n.get("el").toDataURL("image/png"),");background-repeat:repeat;");else{var t=document.querySelector(".g6-graph-watermarker");t||((t=document.createElement("div")).className="g6-graph-watermarker"),t.className="g6-graph-watermarker",n.destroyed||(t.style.cssText="background-image: url(".concat(n.get("el").toDataURL("image/png"),");background-repeat:repeat;position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:none;z-index:-1;"),r.appendChild(t))}}},e.prototype.setTextWaterMarker=function(t,e){var r=this.get("container");(0,ng.isString)(r)&&(r=document.getElementById(r)),r.style.position||(r.style.position="relative");var n=this.get("graphWaterMarker"),o=(0,ng.deepMix)({},kC.textWaterMarkerConfig,e),i=o.width,a=o.height,s=o.compatible,u=o.text;if(!(null===t||void 0===t?void 0:t.length)){var l=s?r:document.querySelector(".g6-graph-watermarker");return l&&(l.style.cssText=void 0),void(n&&n.clear())}if(n)n.clear();else{var c={container:r,width:i,height:a,capture:!1},f=this.get("pixelRatio");f&&(c.pixelRatio=f,window.devicePixelRatio=f),n=new jP(c),this.set("graphWaterMarker",n)}n.get("el").style.display="none";var h=n.get("context"),p=u.rotate,d=u.fill,y=u.fontFamily,v=u.fontSize,g=u.baseline,m=u.x,b=u.y,w=u.lineHeight;h.rotate(-p*Math.PI/180),h.font="".concat(v,"px ").concat(y),h.fillStyle=d,h.textBaseline=g;for(var S=(0,ng.isString)(t)?[t]:t,x=S.length-1;x>=0;x--)h.fillText(S[x],m,b+x*w);if(h.rotate(p*Math.PI/180),s)r.style.cssText="background-image: url(".concat(n.get("el").toDataURL("image/png"),");background-repeat:repeat;");else{var _=document.querySelector(".g6-graph-watermarker");_||((_=document.createElement("div")).className="g6-graph-watermarker"),_.style.cssText="background-image: url(".concat(n.get("el").toDataURL("image/png"),");background-repeat:repeat;position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:none;z-index:99;"),r.appendChild(_)}},e.prototype.destroy=function(){var e,r,n,o;(0,ng.each)(this.get("plugins"),function(t){t.destroyPlugin()});var i=this.get("tooltips");if(i)for(var a=0;a<i.length;a++){var s=i[a];if(s){var u=s.parentElement;u&&u.removeChild(s)}}null===(e=this.get("eventController"))||void 0===e||e.destroy(),null===(r=this.get("layoutController"))||void 0===r||r.destroy(),null===(n=this.get("graphWaterMarker"))||void 0===n||n.destroy(),null===(o=document.querySelector(".g6-graph-watermarker"))||void 0===o||o.remove(),t.prototype.destroy.call(this)},e}(QE);function vT(t){"@babel/helpers - typeof";return(vT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function gT(t){try{return structuredClone(t)}catch(e){return function t(e,r){if(void 0===r&&(r=new WeakMap),null===e)return e;if(e instanceof Date)return new Date(e);if(e instanceof RegExp)return new RegExp(e);if("object"!==vT(e))return e;if(r.get(e))return r.get(e);var n=Array.isArray(e)?[]:{};for(var o in r.set(e,n),e)e.hasOwnProperty(o)&&void 0!==e[o]&&(n[o]=t(e[o],r));return n}(t)}}var mT=qC.radialLayout,bT=qC.traverseTree,wT=function(t){function e(e){var r=t.call(this,e)||this;return r.layoutAnimating=!1,r.set("removeList",[]),r.set("layoutMethod",r.getLayout()),r}return(0,rg.__extends)(e,t),e.prototype.getLayout=function(){var t=this.get("layout");return t?"function"==typeof t?t:(t.type||(t.type="dendrogram"),t.direction||(t.direction="indented"===t.type?"LR":"TB"),t.radial?function(e){var r=LC()[t.type](e,t);return mT(r),r}:function(e){return LC()[t.type](e,t)}):null},e.indexOfChild=function(t,e){var r=-1;return(0,ng.each)(t,function(t,n){if(e===t.id)return r=n,!1}),r},e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return e.animate=!0,e},e.prototype.innerAddChild=function(t,e,r){var n=this,o=t.data;o&&(o.x=t.x,o.y=t.y,o.depth=t.depth);var i=n.addItem("node",o,!1);if(e){if(i.set("parent",e),r){var a=e.get("originAttrs");if(a)i.set("originAttrs",a);else{var s=e.getModel();i.set("originAttrs",{x:s.x,y:s.y})}}var u=e.get("children");u?u.push(i):e.set("children",[i]),n.addItem("edge",{source:e.get("id"),target:i.get("id"),id:"".concat(e.get("id"),":").concat(i.get("id"))},!1)}return(0,ng.each)(t.children||[],function(t){n.innerAddChild(t,i,r)}),n.emit("afteraddchild",{item:i,parent:e}),i},e.prototype.innerUpdateChild=function(t,r,n){var o=this,i=o.findById(t.id);if(i){(0,ng.each)(t.children||[],function(t){o.innerUpdateChild(t,i,n)});var a,s,u=i.get("children");if(u)if(u.length>0)for(var l=u.length-1;l>=0;l--){var c=u[l].getModel();-1===e.indexOfChild(t.children||[],c.id)&&(o.innerRemoveChild(c.id,{x:t.x,y:t.y},n),u.splice(l,1))}i.get("originAttrs")&&(a=i.get("originAttrs").x,s=i.get("originAttrs").y);var f=i.getModel();n&&i.set("originAttrs",{x:f.x,y:f.y}),i.set("model",Object.assign(f,t.data)),a===t.x&&s===t.y||i.updatePosition({x:t.x,y:t.y})}else o.innerAddChild(t,r,n)},e.prototype.innerRemoveChild=function(t,e,r){var n=this,o=n.findById(t);if(o)if((0,ng.each)(o.get("children"),function(t){n.innerRemoveChild(t.getModel().id,e,r)}),r){var i=o.getModel();o.set("to",e),o.set("originAttrs",{x:i.x,y:i.y}),n.get("removeList").push(o)}else n.removeItem(o,!1)},e.prototype.changeData=function(t,e){void 0===e&&(e=!0);var r=this;this.getNodes().map(function(t){return r.clearItemStates(t)}),this.getEdges().map(function(t){return r.clearItemStates(t)}),e&&this.get("enabledStack")&&this.pushStack("changedata",{before:r.get("originData"),after:t||r.get("data")}),t?(r.data(t),r.render(!1)):r.layout(this.get("fitView"))},e.prototype.changeLayout=function(t){console.warn("Please call updateLayout instead of changeLayout. changeLayout will be discarded soon");this.updateLayout(t)},e.prototype.updateLayout=function(t,e,r,n){void 0===n&&(n=!0);if(t){if(n&&this.get("enabledStack")&&this.pushStack("layout",{before:this.get("layout"),after:t}),this.set("layout",t),this.set("layoutMethod",this.getLayout()),this.layout(),e){var o=r;o||(o="begin"===e?{x:0,y:0}:{x:this.getWidth()/2,y:this.getHeight()/2}),o=this.getPointByCanvas(o.x,o.y);var i=this.getGroup().getMatrix()||[1,0,0,0,1,0,0,0,1];o.x=o.x*i[0]+i[6],o.y=o.y*i[0]+i[7];var a=this.getGroup().getCanvasBBox(),s=a.minX,u=a.maxX,l=a.minY,c={x:(s+u)/2,y:(l+a.maxY)/2};"begin"===e&&(c.x=s,c.y=l),this.translate(o.x-c.x,o.y-c.y)}}else console.warn("layout cannot be null")},e.prototype.refreshLayout=function(t){console.warn("Please call layout instead of refreshLayout. refreshLayout will be discarded soon");this.layout(t)},e.prototype.layout=function(t){var e=this,r=this.get("data"),n=this.get("layoutMethod"),o=this.get("layout"),i=r;if(null===o||void 0===o?void 0:o.excludeInvisibles){r=(0,ng.clone)(this.get("data"));var a={};bT(r,function(t){var r=t.children;if(!(null===r||void 0===r?void 0:r.length))return!0;for(var n=r.length-1;n>=0;n--){var o=e.findById(r[n].id);(o?!o.isVisible():!1===r[n].visible)&&(a[t.id]=a[t.id]||[],a[t.id].push({idx:n,child:r.splice(n,1)[0]}))}}),i=n?n(r,this.get("layout")):r,bT(i,function(t){var e=a[t.id];if(null===e||void 0===e?void 0:e.length)for(var r=e.length-1;r>=0;r--){var n=e[r],o=n.idx,i=n.child;t.children.splice(o,0,i)}})}else i=n?n(r,this.get("layout")):r;var s=this.get("animate");(this.emit("beforerefreshlayout",{data:r,layoutData:i}),this.emit("beforelayout"),this.innerUpdateChild(i,void 0,s),t)&&this.get("viewController").fitView();s?this.layoutAnimate(i):(this.refresh(),this.paint()),this.emit("afterrefreshlayout",{data:r,layoutData:i}),this.emit("afterlayout")},e.prototype.addChild=function(t,e,r){void 0===r&&(r=!0);this.emit("beforeaddchild",{model:t,parent:e}),(0,ng.isString)(e)||(e=e.get("id"));var n=this.findDataById(e);n&&(n.children||(n.children=[]),n.children.push(t),this.findById(e).refresh(),this.changeData(void 0,r))},e.prototype.updateChildren=function(t,e,r){void 0===r&&(r=!0);var n=this.findById(e);e&&n?(this.findDataById(e).children=t,n.refresh(),this.changeData(void 0,r)):console.warn("Update children failed! There is no node with id '".concat(e,"'"))},e.prototype.updateChild=function(t,r,n){void 0===n&&(n=!0);if(r&&this.findById(r)){var o=this.findDataById(r),i=this.findById(t.id);if(o.children||(o.children=[]),i){var a=e.indexOfChild(o.children,t.id);a>-1&&(o.children[a]=t)}else o.children.push(t);var s=this.findById(r);null===s||void 0===s||s.refresh(),this.changeData(void 0,n)}else this.changeData(t,n)},e.prototype.removeChild=function(t,r){void 0===r&&(r=!0);var n,o=this.findById(t);if((n=o?null===o||void 0===o?void 0:o.get("parent"):this.getNodes().find(function(e){return!!(e.getModel().children||[]).find(function(e){return e.id===t})}))&&!n.destroyed){var i=n.get("id"),a=this.findDataById(i),s=a&&a.children||[],u=e.indexOfChild(s,t);s.splice(u,1),n.refresh()}this.changeData(void 0,r)},e.prototype.findDataById=function(t,e){var r=this;if(e||(e=r.get("data")),t===e.id)return e;var n=null;return(0,ng.each)(e.children||[],function(e){return e.id===t?(n=e,!1):!(n=r.findDataById(t,e))&&void 0}),n},e.prototype.layoutAnimate=function(t,e){var r=this,n=this.get("animateCfg");r.emit("beforeanimate",{data:t}),r.getEdges().forEach(function(t){var e=t.get("model");e.sourceAnchor||(e.sourceAnchor=t.get("sourceAnchorIndex"))}),this.get("canvas").animate(function(n){bT(t,function(o){var i=r.findById(o.id);if(i){var a=i.get("originAttrs"),s=i.get("model");if(a||(a={x:s.x,y:s.y},i.set("originAttrs",a)),e){var u=e(i,n,a,t);i.set("model",Object.assign(s,u))}else s.x=a.x+(o.x-a.x)*n,s.y=a.y+(o.y-a.y)*n}return!0}),(0,ng.each)(r.get("removeList"),function(t){var e=t.getModel(),r=t.get("originAttrs"),o=t.get("to");e.x=r.x+(o.x-r.x)*n,e.y=r.y+(o.y-r.y)*n}),r.refreshPositions()},{duration:n.duration,easing:n.ease,callback:function(){(0,ng.each)(r.getNodes(),function(t){t.set("originAttrs",null)}),(0,ng.each)(r.get("removeList"),function(t){r.removeItem(t,!1)}),r.set("removeList",[]),n.callback&&n.callback(),r.emit("afteranimate",{data:t})},delay:n.delay})},e.prototype.stopLayoutAnimate=function(){this.get("canvas").stopAnimate(),this.emit("layoutanimateend",{data:this.get("data")}),this.layoutAnimating=!1},e.prototype.isLayoutAnimating=function(){return this.layoutAnimating},e.prototype.render=function(t){void 0===t&&(t=!0);var e=this.get("data");if(!e||!(0,ng.isObject)(e)||!Object.keys(e).length)throw new Error("data must be defined first");this.clear(),t&&this.get("enabledStack")&&this.clearStack(),this.emit("beforerender"),this.layout(this.get("fitView")),this.emit("afterrender")},e.prototype.save=function(){return this.get("data")},e.prototype.data=function(e){t.prototype.data.call(this,e),this.set("originData",gT(e))},e}(yT);function ST(t,e){if(t)for(var r in e)e.hasOwnProperty(r)&&(t.style[r]=e[r]);return t}var xT=function(){function t(t){this._cfgs=(0,ng.deepMix)(this.getDefaultCfgs(),t),this._events={},this.destroyed=!1}return t.prototype.getDefaultCfgs=function(){return{}},t.prototype.initPlugin=function(t){var e=this;e.set("graph",t);var r=e.getEvents(),n={};(0,ng.each)(r,function(r,o){var i=(0,ng.wrapBehavior)(e,r);n[o]=i,t.on(o,i)}),this._events=n,this.init()},t.prototype.getEvents=function(){return{}},t.prototype.get=function(t){var e;return null===(e=this._cfgs)||void 0===e?void 0:e[t]},t.prototype.set=function(t,e){this._cfgs[t]=e},t.prototype.destroy=function(){},t.prototype.destroyPlugin=function(){this.destroy();var t=this.get("graph"),e=this._events;(0,ng.each)(e,function(e,r){t.off(r,e)}),this._events=null,this._cfgs=null,this.destroyed=!0},t}(),_T=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),ET="url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PHBhdHRlcm4gaWQ9ImdyaWQiIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCIgcGF0dGVyblVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHBhdGggZD0iTSAwIDEwIEwgNDAgMTAgTSAxMCAwIEwgMTAgNDAgTSAwIDIwIEwgNDAgMjAgTSAyMCAwIEwgMjAgNDAgTSAwIDMwIEwgNDAgMzAgTSAzMCAwIEwgMzAgNDAiIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2UwZTBlMCIgb3BhY2l0eT0iMC4yIiBzdHJva2Utd2lkdGg9IjEiLz48cGF0aCBkPSJNIDQwIDAgTCAwIDAgMCA0MCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjZTBlMGUwIiBzdHJva2Utd2lkdGg9IjEiLz48L3BhdHRlcm4+PC9kZWZzPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9InVybCgjZ3JpZCkiLz48L3N2Zz4=)",OT=function(t){function e(e){return t.call(this,e)||this}return _T(e,t),e.prototype.getDefaultCfgs=function(){return{img:ET,follow:!0}},e.prototype.init=function(){var t=this.get("graph"),e=t.get("container"),r=t.get("canvas").get("el"),n=this.get("img")||ET;n.includes("url(")||(n='url("'.concat(n,'")'));var o=Ek("<div class='g6-grid-container' style=\"position:absolute;overflow:hidden;z-index: -1;\"></div>"),i=Ek("<div\n        class='g6-grid'\n        style='position:absolute;\n        background-image: ".concat(n,";\n        user-select: none\n        '></div>"));this.set("container",o),this.set("gridContainer",i),this.positionInit(),o.appendChild(i),e.insertBefore(o,r)},e.prototype.positionInit=function(){var t=this.get("graph"),e=t.get("minZoom"),r=t.get("width"),n=t.get("height");ST(this.get("container"),{width:"".concat(r,"px"),height:"".concat(n,"px")});var o=80*r/e,i=80*n/e;ST(this.get("gridContainer"),{width:"".concat(o,"px"),height:"".concat(i,"px"),left:"-".concat(o/2,"px"),top:"-".concat(i/2,"px")})},e.prototype.getEvents=function(){return{viewportchange:"updateGrid"}},e.prototype.updateGrid=function(t){var e=this.get("gridContainer"),r=t.matrix;r||(r=[1,0,0,0,1,0,0,0,1]);var n=this.get("follow");ST(e,{transform:"matrix(".concat(r[0],", ").concat(r[1],", ").concat(r[3],", ").concat(r[4],", ").concat(n?r[6]:"0",", ").concat(n?r[7]:"0",")")})},e.prototype.getContainer=function(){return this.get("container")},e.prototype.destroy=function(){var t=this.get("graph").get("container"),e=this.get("container");t.removeChild(e)},e}(xT),PT=r(8813),kT=r.n(PT),CT=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();"undefined"!=typeof document&&kT()("\n  .g6-component-contextmenu {\n    border: 1px solid #e2e2e2;\n    border-radius: 4px;\n    font-size: 12px;\n    color: #545454;\n    background-color: rgba(255, 255, 255, 0.9);\n    padding: 10px 8px;\n    box-shadow: rgb(174, 174, 174) 0px 0px 10px;\n  }\n  .g6-contextmenu-ul {\n    padding: 0;\n    margin: 0;\n    list-style: none;\n  }\n\n");var TT=function(t){function e(e){return t.call(this,e)||this}return CT(e,t),e.prototype.getDefaultCfgs=function(){return{offsetX:6,offsetY:6,handleMenuClick:void 0,getContent:function(t){return"\n          <ul class='g6-contextmenu-ul'>\n            <li>èåé¡¹1</li>\n            <li>èåé¡¹2</li>\n          </ul>\n        "},shouldBegin:function(t){return!0},onHide:function(){return!0},itemTypes:["node","edge","combo"],trigger:"contextmenu"}},e.prototype.getEvents=function(){return"click"===this.get("trigger")?{click:"onMenuShow",touchend:"onMenuShow"}:{contextmenu:"onMenuShow"}},e.prototype.init=function(){var t=this.get("className"),e=Ek("<div class=".concat(t||"g6-component-contextmenu","></div>"));ST(e,{top:"0px",position:"absolute",visibility:"hidden"});var r=this.get("container");r||(r=this.get("graph").get("container")),(0,ng.isString)(r)&&(r=document.getElementById(r)),r.appendChild(e),this.set("menu",e)},e.prototype.onMenuShow=function(t){var e=this;t.preventDefault();var r=this.get("itemTypes");if(t.item){if(t.item&&t.item.getType&&-1===r.indexOf(t.item.getType()))return void e.onMenuHide()}else if(-1===r.indexOf("canvas"))return void e.onMenuHide();if(this.get("shouldBegin")(t)){var n=this.get("menu"),o=this.get("getContent"),i=this.get("graph"),a=o(t,i);(0,ng.isString)(a)?n.innerHTML=a:n.innerHTML=a.outerHTML,this.removeMenuEventListener();var s=this.get("handleMenuClick");if(s){var u=function(e){s(e.target,t.item,i)};this.set("handleMenuClickWrapper",u),n.addEventListener("click",u)}var l=i.get("width"),c=i.get("height"),f=n.getBoundingClientRect(),h=this.get("offsetX")||0,p=this.get("offsetY")||0,d=i.getContainer().offsetTop,y=i.getContainer().offsetLeft,v=t.canvasX+y+h,g=t.canvasY+d+p;v+f.width>l&&(v=t.canvasX-f.width-h+y),g+f.height>c&&(g=t.canvasY-f.height-p+d),g<0&&(g=0),ST(n,{top:"".concat(g,"px"),left:"".concat(v,"px"),visibility:"visible"});var m="click"===this.get("trigger"),b=function(t){m?m=!1:e.onMenuHide()};document.body.addEventListener("click",b),this.set("handler",b)}},e.prototype.removeMenuEventListener=function(){var t=this.get("handleMenuClickWrapper"),e=this.get("handler");t&&(this.get("menu").removeEventListener("click",t),this.set("handleMenuClickWrapper",null));e&&document.body.removeEventListener("click",e)},e.prototype.onMenuHide=function(){var t=this.get("menu");t&&ST(t,{visibility:"hidden"}),this.removeMenuEventListener()},e.prototype.destroy=function(){var t=this.get("menu");if(this.removeMenuEventListener(),t){var e=this.get("container");e||(e=this.get("graph").get("container")),(0,ng.isString)(e)&&(e=document.getElementById(e)),e.removeChild(t)}},e}(xT),AT=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),MT=function(){return(MT=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},jT=Math.max,IT=hg,NT=function(t){function e(e){var r=t.call(this,e)||this;return r.handleUpdateCanvas=(0,ng.debounce)(function(t){var e=r;e.destroyed||e.updateCanvas()},100,!1),r}return AT(e,t),e.prototype.getDefaultCfgs=function(){return{container:null,className:"g6-minimap",viewportClassName:"g6-minimap-viewport",type:"default",padding:50,size:[200,120],delegateStyle:{fill:"#40a9ff",stroke:"#096dd9"},refresh:!0,hideEdge:!1}},e.prototype.getEvents=function(){return{beforepaint:"updateViewport",beforeanimate:"disableRefresh",afteranimate:"enableRefresh",viewportchange:"disableOneRefresh"}},e.prototype.disableRefresh=function(){this.set("refresh",!1)},e.prototype.enableRefresh=function(){this.set("refresh",!0),this.updateCanvas()},e.prototype.disableOneRefresh=function(){this.set("viewportChange",!0)},e.prototype.initViewport=function(){var t=this,e=this._cfgs,r=e.size,n=e.graph;if(!this.destroyed){var o=this.get("canvas").get("container"),i=navigator.userAgent.toLowerCase().indexOf("firefox")>-1,a=navigator.userAgent.toLowerCase().indexOf("safari")>-1,s=Ek("\n      <div\n        class=".concat(e.viewportClassName,"\n        style='position:absolute;\n          left:0;\n          top:0;\n          box-sizing:border-box;\n          outline: 2px solid #1980ff;\n          cursor:move'\n        draggable=").concat(!a&&!i,"\n      </div>")),u=0,l=0,c=!1,f=0,h=0,p=0,d=0,y=0,v=0,g=a||i?"mousedown":"dragstart";s.addEventListener(g,function(o){var i,a;if(o.dataTransfer){var g=new Image;g.src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' %3E%3Cpath /%3E%3C/svg%3E",null===(a=(i=o.dataTransfer).setDragImage)||void 0===a||a.call(i,g,0,0);try{o.dataTransfer.setData("text/html","view-port-minimap")}catch(t){o.dataTransfer.setData("text","view-port-minimap")}}if(e.refresh=!1,o.target===s){var m=s.style;f=parseInt(m.left,10),h=parseInt(m.top,10),p=parseInt(m.width,10),d=parseInt(m.height,10),p>r[0]||d>r[1]||(v=n.getZoom(),y=t.get("ratio"),c=!0,u=o.clientX,l=o.clientY)}},!1);var m=function(t){if(c&&!(0,ng.isNil)(t.clientX)&&!(0,ng.isNil)(t.clientY)){var e=u-t.clientX,o=l-t.clientY;(f-e<0||f-e+p>=r[0])&&(e=0),(h-o<0||h-o+d>=r[1])&&(o=0),h-=o,ST(s,{left:"".concat(f-=e,"px"),top:"".concat(h,"px")}),n.translate(e*v/y,o*v/y),u=t.clientX,l=t.clientY}};a||i||s.addEventListener("drag",m,!1);var b=function(){c=!1,e.refresh=!0},w=a||i?"mouseup":"dragend";s.addEventListener(w,b,!1),o.addEventListener("mouseleave",b),o.addEventListener("mouseup",b),(a||i)&&o.addEventListener("mousemove",m,!1),this.set("viewport",s),o.appendChild(s)}},e.prototype.updateViewport=function(){if(!this.destroyed){var t=this.get("ratio"),e=this.get("totaldx"),r=this.get("totaldy"),n=this.get("graph"),o=this.get("size"),i=n.get("canvas").get("el"),a=n.get("width")||i.scrollWidth||500,s=n.get("height")||i.scrollHeight||500,u=n.getPointByCanvas(0,0),l=n.getPointByCanvas(a,s),c=this.get("viewport");c||this.initViewport();var f=(l.x-u.x)*t,h=(l.y-u.y)*t,p=u.x*t+e,d=u.y*t+r,y=p+f,v=d+h;p<0&&(f+=p,p=0),y>o[0]&&(f-=y-o[0]),d<0&&(h+=d,d=0),v>o[1]&&(h-=v-o[1]),this.set("ratio",t),ST(c,{left:"".concat(p,"px"),top:"".concat(d,"px"),width:"".concat(f,"px"),height:"".concat(h,"px")})}},e.prototype.updateGraphShapes=function(){var t,e=this._cfgs.graph,r=this.get("canvas"),n=e.get("group");n.destroyed||(r.clear(),this.get("hideEdge")?(t=r.addGroup(),n.get("children").forEach(function(e){e.get("id").includes("-edge")||t.add(e.clone())})):((t=n.clone()).resetMatrix(),r.add(t)),"svg"===e.get("renderer")&&this.updateVisible(t))},e.prototype.updateVisible=function(t){var e=this;if(t.isGroup()||t.get("visible")){var r=t.get("children");if(!r||!r.length)return;r.forEach(function(t){t.get("visible")||t.hide(),e.updateVisible(t)})}else t.hide()},e.prototype.updateKeyShapes=function(){var t=this,e=this._cfgs.graph,r=this.get("canvas"),n=r.get("children")[0]||r.addGroup();this.get("hideEdge")||(0,ng.each)(e.getEdges(),function(e){t.updateOneEdgeKeyShape(e,n)}),(0,ng.each)(e.getNodes(),function(e){t.updateOneNodeKeyShape(e,n)});var o=e.getCombos();if(o&&o.length){var i=n.find(function(t){return"comboGroup"===t.get("name")})||n.addGroup({name:"comboGroup"});setTimeout(function(){t.destroyed||((0,ng.each)(o,function(e){t.updateOneComboKeyShape(e,i)}),null===i||void 0===i||i.sort(),null===i||void 0===i||i.toBack(),t.updateCanvas())},250)}this.clearDestroyedShapes()},e.prototype.updateOneComboKeyShape=function(t,e){if(!this.destroyed){var r=this.get("itemMap")||{},n=r[t.get("id")],o=t.getBBox(),i=t.get("keyShape").clone(),a=i.attr(),s={x:o.centerX,y:o.centerY};n?s=Object.assign(a,s):(n=i,e.add(n));var u=n.get("type");"rect"!==u&&"image"!==u||(s.x=o.minX,s.y=o.minY),n.attr(s),t.isVisible()?n.show():n.hide(),n.exist=!0;var l=t.getModel().depth;isNaN(l)||n.set("zIndex",l),r[t.get("id")]=n,this.set("itemMap",r)}},e.prototype.updateOneNodeKeyShape=function(t,e){var r=this.get("itemMap")||{},n=r[t.get("id")],o=t.getBBox(),i=t.get("keyShape").clone(),a=i.attr(),s={x:o.centerX,y:o.centerY};n?(s=Object.assign(a,s),n.toFront()):(n=i,e.add(n));var u=n.get("type");"rect"!==u&&"image"!==u||(s.x=o.minX,s.y=o.minY),n.attr(s),t.isVisible()?n.show():n.hide(),n.exist=!0;var l=t.getModel().depth;isNaN(l)||n.set("zIndex",l),r[t.get("id")]=n,this.set("itemMap",r)},e.prototype.updateDelegateShapes=function(){var t=this,e=this._cfgs.graph,r=this.get("canvas"),n=r.get("children")[0]||r.addGroup();this.get("hideEdge")||(0,ng.each)(e.getEdges(),function(e){t.updateOneEdgeKeyShape(e,n)}),(0,ng.each)(e.getNodes(),function(e){t.updateOneNodeDelegateShape(e,n)});var o=e.getCombos();if(o&&o.length){var i=n.find(function(t){return"comboGroup"===t.get("name")})||n.addGroup({name:"comboGroup"});setTimeout(function(){t.destroyed||((0,ng.each)(o,function(e){t.updateOneComboKeyShape(e,i)}),null===i||void 0===i||i.sort(),null===i||void 0===i||i.toBack(),t.updateCanvas())},250)}this.clearDestroyedShapes()},e.prototype.clearDestroyedShapes=function(){var t=this.get("itemMap")||{},e=Object.keys(t);if(e&&0!==e.length)for(var r=e.length-1;r>=0;r--){var n=t[e[r]],o=n.exist;n.exist=!1,o||(n.remove(),delete t[e[r]])}},e.prototype.updateOneEdgeKeyShape=function(t,e){var r=this.get("itemMap")||{},n=r[t.get("id")];if(n){var o=t.get("keyShape").attr("path");n.attr("path",o)}else n=t.get("keyShape").clone(),e.add(n);t.isVisible()?n.show():n.hide(),n.exist=!0,r[t.get("id")]=n,this.set("itemMap",r)},e.prototype.updateOneNodeDelegateShape=function(t,e){var r=this.get("delegateStyle"),n=this.get("itemMap")||{},o=n[t.get("id")],i=t.getBBox();if(o){var a={x:i.minX,y:i.minY,width:i.width,height:i.height};o.attr(a),o.toFront()}else o=e.addShape("rect",{attrs:MT({x:i.minX,y:i.minY,width:i.width,height:i.height},r),name:"minimap-node-shape"});t.isVisible()?o.show():o.hide(),o.exist=!0,n[t.get("id")]=o,this.set("itemMap",n)},e.prototype.init=function(){this.initContainer(),this.get("graph").on("afterupdateitem",this.handleUpdateCanvas),this.get("graph").on("afteritemstatechange",this.handleUpdateCanvas),this.get("graph").on("afteradditem",this.handleUpdateCanvas),this.get("graph").on("afterremoveitem",this.handleUpdateCanvas),this.get("graph").on("afterrender",this.handleUpdateCanvas),this.get("graph").on("afterlayout",this.handleUpdateCanvas)},e.prototype.initContainer=function(){var t=this.get("graph"),e=this.get("size"),r=this.get("className"),n=this.get("container"),o=Ek("<div class='".concat(r,"' style='width: ").concat(e[0],"px; height: ").concat(e[1],"px; overflow: hidden'></div>"));(0,ng.isString)(n)&&(n=document.getElementById(n)),n?n.appendChild(o):t.get("container").appendChild(o),this.set("container",o);var i,a=Ek('<div class="g6-minimap-container" style="position: relative;"></div>');o.appendChild(a),a.addEventListener("dragenter",function(t){t.preventDefault()}),a.addEventListener("dragover",function(t){t.preventDefault()}),i="svg"===t.get("renderer")?new _k({container:a,width:e[0],height:e[1]}):new jP({container:a,width:e[0],height:e[1]}),this.set("canvas",i),this.updateCanvas()},e.prototype.updateCanvas=function(){if(!this.destroyed&&this.get("refresh")){var t=this.get("graph");if(!t.get("destroyed")){this.get("viewportChange")&&(this.set("viewportChange",!1),this.updateViewport());var e=this.get("size"),r=this.get("canvas"),n=this.get("type"),o=this.get("padding");if(!r.destroyed){switch(n){case"default":this.updateGraphShapes();break;case"keyShape":this.updateKeyShapes();break;case"delegate":this.updateDelegateShapes()}var i=r.get("children")[0];if(i){i.resetMatrix();var a=i.getCanvasBBox(),s=t.get("canvas").getCanvasBBox(),u=t.getZoom()||1,l=s.width/u,c=s.height/u;Number.isFinite(a.width)&&(l=jT(a.width,l),c=jT(a.height,c)),l+=2*o,c+=2*o;var f=Math.min(e[0]/l,e[1]/c),h=[1,0,0,0,1,0,0,0,1],p=0,d=0;Number.isFinite(a.minX)&&(p=-a.minX),Number.isFinite(a.minY)&&(d=-a.minY);var y=(e[0]-(l-2*o)*f)/2,v=(e[1]-(c-2*o)*f)/2;h=IT(h,[["t",p,d],["s",f,f],["t",y,v]]),i.setMatrix(h),this.set("ratio",f),this.set("totaldx",y+p*f),this.set("totaldy",v+d*f),this.set("dx",y),this.set("dy",v),this.updateViewport()}}}}},e.prototype.getCanvas=function(){return this.get("canvas")},e.prototype.getViewport=function(){return this.get("viewport")},e.prototype.getContainer=function(){return this.get("container")},e.prototype.destroy=function(){var t;null===(t=this.get("canvas"))||void 0===t||t.destroy();var e=this.get("container");(null===e||void 0===e?void 0:e.parentNode)&&e.parentNode.removeChild(e)},e}(xT),LT=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();function RT(t,e,r){var n=t.x-e.x,o=t.y-e.y;return!r||Math.abs(n)>r||Math.abs(o)>r?Math.sqrt(n*n+o*o):r}function DT(t,e){var r=(e.source.y-e.target.y)/(e.source.x-e.target.x),n=(r*r*e.source.x+r*(t.y-e.source.y)+t.x)/(r*r+1);return{x:n,y:r*(n-e.source.x)+e.source.y}}var BT=function(t){function e(e){return t.call(this,e)||this}return LT(e,t),e.prototype.getDefaultCfgs=function(){return{edgeBundles:[],edgePoints:[],K:.1,lambda:.1,divisions:1,divRate:2,cycles:6,iterations:90,iterRate:.6666667,bundleThreshold:.6,eps:1e-6,onLayoutEnd:function(){},onTick:function(){}}},e.prototype.init=function(){var t=this.get("graph"),e=this.get("onTick");this.set("tick",function(){e&&e(),t.refreshPositions()})},e.prototype.bundling=function(t){var e=this;if(e.set("data",t),!e.isTicking()){var r=t.edges||[],n={},o=!1;if((t.nodes||[]).forEach(function(t){null!==t.x&&null!==!t.y&&void 0!==t.x&&void 0!==!t.y||(o=!0),n[t.id]=t}),o)throw new Error("please layout the graph or assign x and y for nodes first");e.set("nodeIdMap",n);var i=e.get("divisions"),a=e.get("divRate"),s=e.divideEdges(i);e.set("edgePoints",s);var u=e.getEdgeBundles();e.set("edgeBundles",u);for(var l=e.get("cycles"),c=e.get("iterations"),f=e.get("iterRate"),h=e.get("lambda"),p=0;p<l;p++){for(var d=function(t){var o=[];r.forEach(function(t,r){if(t.source!==t.target){var a=n[t.source],u=n[t.target];o[r]=e.getEdgeForces({source:a,target:u},r,i,h);for(var l=0;l<i+1;l++)s[r][l].x+=o[r][l].x,s[r][l].y+=o[r][l].y}})},y=0;y<c;y++)d();h/=2,i*=a,c*=f,s=e.divideEdges(i),e.set("edgePoints",s)}r.forEach(function(t,e){t.source!==t.target&&(t.type="polyline",t.controlPoints=s[e].slice(1,s[e].length-1))}),e.get("graph").refresh()}},e.prototype.updateBundling=function(t){var e=this,r=t.data;if(r&&e.set("data",r),e.get("ticking")&&e.set("ticking",!1),Object.keys(t).forEach(function(r){e.set(r,t[r])}),t.onTick){var n=this.get("graph");e.set("tick",function(){t.onTick(),n.refresh()})}e.bundling(r)},e.prototype.divideEdges=function(t){var e=this,r=e.get("data").edges,n=e.get("nodeIdMap"),o=e.get("edgePoints");return o&&void 0!==o||(o=[]),r.forEach(function(r,i){var a;o[i]&&void 0!==o[i]||(o[i]=[]);var s=n[r.source],u=n[r.target];if(1===t)o[i].push({x:s.x,y:s.y}),o[i].push({x:.5*(s.x+u.x),y:.5*(s.y+u.y)}),o[i].push({x:u.x,y:u.y});else{var l=((null===(a=o[i])||void 0===a?void 0:a.length)?e.getEdgeLength(o[i]):RT({x:s.x,y:s.y},{x:u.x,y:u.y}))/(t+1),c=l,f=[{x:s.x,y:s.y}];o[i].forEach(function(t,e){if(0!==e){for(var r=RT(t,o[i][e-1]);r>c;){var n=c/r,a={x:o[i][e-1].x,y:o[i][e-1].y};a.x+=n*(t.x-o[i][e-1].x),a.y+=n*(t.y-o[i][e-1].y),f.push(a),r-=c,c=l}c-=r}}),f.push({x:u.x,y:u.y}),o[i]=f}}),o},e.prototype.getEdgeLength=function(t){var e=0;return t.forEach(function(r,n){0!==n&&(e+=RT(r,t[n-1]))}),e},e.prototype.getEdgeBundles=function(){var t=this,e=t.get("data").edges||[],r=t.get("bundleThreshold"),n=t.get("nodeIdMap"),o=t.get("edgeBundles");return o||(o=[]),e.forEach(function(t,e){o[e]&&void 0!==o[e]||(o[e]=[])}),e.forEach(function(i,a){var s=n[i.source],u=n[i.target];e.forEach(function(e,i){if(!(i<=a)){var l=n[e.source],c=n[e.target];t.getBundleScore({source:s,target:u},{source:l,target:c})>=r&&(o[a].push(i),o[i].push(a))}})}),o},e.prototype.getBundleScore=function(t,e){return t.vx=t.target.x-t.source.x,t.vy=t.target.y-t.source.y,e.vx=e.target.x-e.source.x,e.vy=e.target.y-e.source.y,t.length=RT({x:t.source.x,y:t.source.y},{x:t.target.x,y:t.target.y}),e.length=RT({x:e.source.x,y:e.source.y},{x:e.target.x,y:e.target.y}),this.getAngleScore(t,e)*this.getScaleScore(t,e)*this.getPositionScore(t,e)*this.getVisibilityScore(t,e)},e.prototype.getAngleScore=function(t,e){return function(t,e){return t.x*e.x+t.y*e.y}({x:t.vx,y:t.vy},{x:e.vx,y:e.vy})/(t.length*e.length)},e.prototype.getScaleScore=function(t,e){var r=(t.length+e.length)/2;return 2/(r/Math.min(t.length,e.length)+Math.max(t.length,e.length)/r)},e.prototype.getPositionScore=function(t,e){var r=(t.length+e.length)/2;return r/(r+RT({x:(t.source.x+t.target.x)/2,y:(t.source.y+t.target.y)/2},{x:(e.source.x+e.target.x)/2,y:(e.source.y+e.target.y)/2}))},e.prototype.getVisibilityScore=function(t,e){var r=this.getEdgeVisibility(t,e),n=this.getEdgeVisibility(e,t);return r<n?r:n},e.prototype.getEdgeVisibility=function(t,e){var r=DT(e.source,t),n=DT(e.target,t),o={x:(r.x+n.x)/2,y:(r.y+n.y)/2},i={x:(t.source.x+t.target.x)/2,y:(t.source.y+t.target.y)/2};return Math.max(0,1-2*RT(o,i)/RT(r,n))},e.prototype.getEdgeForces=function(t,e,r,n){for(var o=this.get("edgePoints"),i=this.get("K")/(RT(t.source,t.target)*(r+1)),a=[{x:0,y:0}],s=1;s<r;s++){var u={x:0,y:0},l=this.getSpringForce({pre:o[e][s-1],cur:o[e][s],next:o[e][s+1]},i),c=this.getElectrostaticForce(s,e);u.x=n*(l.x+c.x),u.y=n*(l.y+c.y),a.push(u)}return a.push({x:0,y:0}),a},e.prototype.getSpringForce=function(t,e){var r=t.pre.x+t.next.x-2*t.cur.x,n=t.pre.y+t.next.y-2*t.cur.y;return{x:r*=e,y:n*=e}},e.prototype.getElectrostaticForce=function(t,e){var r=this.get("eps"),n=this.get("edgeBundles"),o=this.get("edgePoints"),i={x:0,y:0};return n[e].forEach(function(n){var a={x:o[n][t].x-o[e][t].x,y:o[n][t].y-o[e][t].y};if(Math.abs(a.x)>r||Math.abs(a.y)>r){var s=1/RT(o[n][t],o[e][t]);i.x+=a.x*s,i.y+=a.y*s}}),i},e.prototype.isTicking=function(){return this.get("ticking")},e.prototype.getSimulation=function(){return this.get("forceSimulation")},e.prototype.destroy=function(){this.get("ticking")&&this.getSimulation().stop(),t.prototype.destroy.call(this)},e}(xT),FT=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),GT=function(){return(GT=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},UT={stroke:"#000",strokeOpacity:.8,lineWidth:2,fillOpacity:.1,fill:"#ccc"},zT=function(t){function e(e){return t.call(this,e)||this}return FT(e,t),e.prototype.getDefaultCfgs=function(){return{trigger:"mousemove",d:1.5,r:300,delegateStyle:(0,ng.clone)(UT),showLabel:!1,maxD:5,minD:0,scaleRBy:"unset",scaleDBy:"unset",showDPercent:!0}},e.prototype.getEvents=function(){var t;switch(this.get("trigger")){case"click":t={click:"magnify"};break;case"drag":t={click:"createDelegate"};break;default:t={mousemove:"magnify"}}return t},e.prototype.init=function(){var t=this.get("r");this.set("cachedMagnifiedModels",[]),this.set("cachedOriginPositions",{}),this.set("r2",t*t);var e=this.get("d");this.set("molecularParam",(e+1)*t)},e.prototype.createDelegate=function(t){var e=this,r=this,n=r.get("delegate");n&&!n.destroyed||(r.magnify(t),(n=r.get("delegate")).on("dragstart",function(t){r.set("delegateCenterDiff",{x:n.attr("x")-t.x,y:n.attr("y")-t.y})}),n.on("drag",function(t){r.magnify(t)}),"wheel"===this.get("scaleDBy")&&n.on("mousewheel",function(t){e.scaleDByWheel(t)}),"wheel"===this.get("scaleRBy")&&n.on("mousewheel",function(t){r.scaleRByWheel(t)}))},e.prototype.scaleRByWheel=function(t){if(t&&t.originalEvent){t.preventDefault&&t.preventDefault();var e,r=this.get("graph"),n=this.get("delegate"),o=(n?{x:n.attr("x"),y:n.attr("y")}:void 0)||r.getPointByClient(t.clientX,t.clientY);e=t.originalEvent.wheelDelta<0?.95:1/.95;var i=this.get("maxR"),a=this.get("minR"),s=this.get("r");(s>(i||r.get("height"))&&e>1||s<(a||.05*r.get("height"))&&e<1)&&(e=1),s*=e,this.set("r",s),this.set("r2",s*s);var u=this.get("d");this.set("molecularParam",(u+1)*s),this.set("delegateCenterDiff",void 0),this.magnify(t,o)}},e.prototype.scaleRByDrag=function(t){if(t){var e,r=this.get("dragPrePos"),n=this.get("graph"),o=n.getPointByClient(t.clientX,t.clientY);e=t.x-r.x<0?.95:1/.95;var i=this.get("maxR"),a=this.get("minR"),s=this.get("r");(s>(i||n.get("height"))&&e>1||s<(a||.05*n.get("height"))&&e<1)&&(e=1),s*=e,this.set("r",s),this.set("r2",s*s);var u=this.get("d");this.set("molecularParam",(u+1)*s),this.magnify(t,o),this.set("dragPrePos",{x:t.x,y:t.y})}},e.prototype.scaleDByWheel=function(t){if(t||t.originalEvent){t.preventDefault&&t.preventDefault();var e=0;e=t.originalEvent.wheelDelta<0?-.1:.1;var r=this.get("d")+e,n=this.get("maxD"),o=this.get("minD");if(r<n&&r>o){this.set("d",r);var i=this.get("r");this.set("molecularParam",(r+1)*i);var a=this.get("delegate"),s=a?{x:a.attr("x"),y:a.attr("y")}:void 0;this.set("delegateCenterDiff",void 0),this.magnify(t,s)}}},e.prototype.scaleDByDrag=function(t){var e=this.get("dragPrePos"),r=t.x-e.x>0?.1:-.1,n=this.get("d")+r,o=this.get("maxD"),i=this.get("minD");if(n<o&&n>i){this.set("d",n);var a=this.get("r");this.set("molecularParam",(n+1)*a),this.magnify(t)}this.set("dragPrePos",{x:t.x,y:t.y})},e.prototype.magnify=function(t,e){this.restoreCache();var r=this.get("graph"),n=this.get("cachedMagnifiedModels"),o=this.get("cachedOriginPositions"),i=this.get("showLabel"),a=this.get("r"),s=this.get("r2"),u=this.get("d"),l=this.get("molecularParam"),c=r.getNodes(),f=c.length,h=e?{x:e.x,y:e.y}:{x:t.x,y:t.y};!this.get("dragging")||"mousemove"!==this.get("trigger")&&"click"!==this.get("trigger")||(h=this.get("cacheCenter"));var p=this.get("delegateCenterDiff");p&&(h.x+=p.x,h.y+=p.y),this.updateDelegate(h,a);for(var d=0;d<f;d++){var y=c[d].getModel(),v=y.x,g=y.y;if(!isNaN(v)&&!isNaN(g)){var m=(v-h.x)*(v-h.x)+(g-h.y)*(g-h.y);if(!isNaN(m)&&m<s&&0!==m){var b=Math.sqrt(m),w=l*b/(u*b+a),S=(v-h.x)/b,x=(g-h.y)/b;if(y.x=S*w+h.x,y.y=x*w+h.y,o[y.id]||(o[y.id]={x:v,y:g,texts:[]}),n.push(y),i&&2*b<a)for(var _=c[d].getContainer().getChildren(),E=_.length,O=0;O<E;O++){var P=_[O];"text"===P.get("type")&&(o[y.id].texts.push({visible:P.get("visible"),shape:P}),P.set("visible",!0))}}}}r.refreshPositions()},e.prototype.restoreCache=function(){for(var t=this.get("cachedMagnifiedModels"),e=this.get("cachedOriginPositions"),r=t.length,n=0;n<r;n++){var o=t[n],i=e[o.id];o.x=i.x,o.y=i.y;for(var a=i.texts.length,s=0;s<a;s++){var u=i.texts[s];u.shape.set("visible",u.visible)}}this.set("cachedMagnifiedModels",[]),this.set("cachedOriginPositions",{})},e.prototype.updateParams=function(t){var e=t.r,r=t.d,n=t.trigger,o=t.minD,i=t.maxD,a=t.minR,s=t.maxR,u=t.scaleDBy,l=t.scaleRBy;isNaN(t.r)||(this.set("r",e),this.set("r2",e*e)),isNaN(r)||this.set("d",r),isNaN(i)||this.set("maxD",i),isNaN(o)||this.set("minD",o),isNaN(s)||this.set("maxR",s),isNaN(a)||this.set("minR",a);var c,f=this.get("d"),h=this.get("r");(this.set("molecularParam",(f+1)*h),"mousemove"!==n&&"click"!==n&&"drag"!==n||this.set("trigger",n),"drag"===u||"wheel"===u||"unset"===u)&&(this.set("scaleDBy",u),this.get("delegate").remove(),this.get("delegate").destroy(),(c=this.get("dPercentText"))&&(c.remove(),c.destroy()));"drag"!==l&&"wheel"!==l&&"unset"!==l||(this.set("scaleRBy",l),this.get("delegate").remove(),this.get("delegate").destroy(),(c=this.get("dPercentText"))&&(c.remove(),c.destroy()))},e.prototype.updateDelegate=function(t,e){var r=this,n=this,o=n.get("graph"),i=n.get("delegate");if(!i||i.destroyed){var a=o.get("group"),s=n.get("delegateStyle")||UT;i=a.addShape("circle",{attrs:GT({r:e/1.5,x:t.x,y:t.y},s),name:"lens-shape",draggable:!0}),"drag"!==this.get("trigger")&&("wheel"===this.get("scaleRBy")?i.on("mousewheel",function(t){n.scaleRByWheel(t)}):"drag"===this.get("scaleRBy")&&(i.on("dragstart",function(t){n.set("dragging",!0),n.set("cacheCenter",{x:t.x,y:t.y}),n.set("dragPrePos",{x:t.x,y:t.y})}),i.on("drag",function(t){n.scaleRByDrag(t)}),i.on("dragend",function(t){n.set("dragging",!1)})),"wheel"===this.get("scaleDBy")?i.on("mousewheel",function(t){r.scaleDByWheel(t)}):"drag"===this.get("scaleDBy")&&(i.on("dragstart",function(t){n.set("dragging",!0),n.set("cacheCenter",{x:t.x,y:t.y}),n.set("dragPrePos",{x:t.x,y:t.y})}),i.on("drag",function(t){r.scaleDByDrag(t)}),i.on("dragend",function(t){n.set("dragging",!1)})))}else i.attr({x:t.x,y:t.y,r:e/1.5});if(n.get("showDPercent")){var u=Math.round((n.get("d")-n.get("minD"))/(n.get("maxD")-n.get("minD"))*100),l=n.get("dPercentText"),c=t.y+e/1.5+16;if(!l||l.destroyed)l=o.get("group").addShape("text",{attrs:{text:"".concat(u,"%"),x:t.x,y:c,fill:"#aaa",stroke:"#fff",lineWidth:1,fontSize:12}}),n.set("dPercentText",l);else l.attr({text:"".concat(u,"%"),x:t.x,y:c})}n.set("delegate",i)},e.prototype.clear=function(){var t=this.get("graph");this.restoreCache(),t.refreshPositions();var e=this.get("delegate");e&&!e.destroyed&&(e.remove(),e.destroy());var r=this.get("dPercentText");r&&!r.destroyed&&(r.remove(),r.destroy())},e.prototype.destroy=function(){this.clear()},e}(xT),VT=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();"undefined"!=typeof document&&kT()("\n  .g6-component-toolbar {\n    position: absolute;\n    list-style-type: none;\n    padding: 6px;\n    left: 0px;\n    top: 0px;\n    background-color: rgba(255, 255, 255, 0.9);\n    border: 1px solid #e2e2e2;\n    border-radius: 4px;\n    font-size: 12px;\n    color: #545454;\n    margin: 0;\n  }\n  .g6-component-toolbar li {\n    float: left;\n    text-align: center;\n    width: 35px;\n    height: 24px;\n    cursor: pointer;\n\t\tlist-style-type:none;\n    list-style: none;\n    margin-left: 0px;\n  }\n  .g6-component-toolbar li .icon {\n    opacity: 0.7;\n  }\n  .g6-component-toolbar li .icon:hover {\n    opacity: 1;\n  }\n");var HT=function(t){function e(e){return t.call(this,e)||this}return VT(e,t),e.prototype.getDefaultCfgs=function(){return{handleClick:void 0,getContent:function(t){return'\n          <ul class=\'g6-component-toolbar\'>\n            <li code=\'redo\'>\n              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">\n                <path d="M256 682.666667c0-102.741333 66.730667-213.333333 213.333333-213.333334 107.008 0 190.762667 56.576 230.570667 125.354667L611.968 682.666667H853.333333v-241.365334l-91.562666 91.562667C704.768 448.469333 601.130667 384 469.333333 384c-196.096 0-298.666667 150.229333-298.666666 298.666667h85.333333z" fill="" p-id="2041"></path>\n              </svg>\n            </li>\n            <li code=\'undo\'>\n              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">\n                <path d="M170.666667 682.666667h241.365333l-87.936-87.978667C363.904 525.909333 447.658667 469.333333 554.666667 469.333333c146.602667 0 213.333333 110.592 213.333333 213.333334h85.333333c0-148.437333-102.570667-298.666667-298.666666-298.666667-131.797333 0-235.392 64.469333-292.48 148.821333L170.666667 441.301333V682.666667z" fill="" p-id="2764"></path>\n              </svg>\n            </li>\n            <li  code=\'zoomOut\'>\n              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">\n                <path d="M658.432 428.736a33.216 33.216 0 0 1-33.152 33.152H525.824v99.456a33.216 33.216 0 0 1-66.304 0V461.888H360.064a33.152 33.152 0 0 1 0-66.304H459.52V296.128a33.152 33.152 0 0 1 66.304 0V395.52H625.28c18.24 0 33.152 14.848 33.152 33.152z m299.776 521.792a43.328 43.328 0 0 1-60.864-6.912l-189.248-220.992a362.368 362.368 0 0 1-215.36 70.848 364.8 364.8 0 1 1 364.8-364.736 363.072 363.072 0 0 1-86.912 235.968l192.384 224.64a43.392 43.392 0 0 1-4.8 61.184z m-465.536-223.36a298.816 298.816 0 0 0 298.432-298.432 298.816 298.816 0 0 0-298.432-298.432A298.816 298.816 0 0 0 194.24 428.8a298.816 298.816 0 0 0 298.432 298.432z"></path>\n              </svg>\n            </li>\n            <li code=\'zoomIn\'>\n              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">\n                <path d="M639.936 416a32 32 0 0 1-32 32h-256a32 32 0 0 1 0-64h256a32 32 0 0 1 32 32z m289.28 503.552a41.792 41.792 0 0 1-58.752-6.656l-182.656-213.248A349.76 349.76 0 0 1 480 768 352 352 0 1 1 832 416a350.4 350.4 0 0 1-83.84 227.712l185.664 216.768a41.856 41.856 0 0 1-4.608 59.072zM479.936 704c158.784 0 288-129.216 288-288S638.72 128 479.936 128a288.32 288.32 0 0 0-288 288c0 158.784 129.216 288 288 288z" p-id="3853"></path>\n              </svg>\n            </li>\n            <li code=\'realZoom\'>\n              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="20" height="24">\n                <path d="M384 320v384H320V320h64z m256 0v384H576V320h64zM512 576v64H448V576h64z m0-192v64H448V384h64z m355.968 576H92.032A28.16 28.16 0 0 1 64 931.968V28.032C64 12.608 76.608 0 95.168 0h610.368L896 192v739.968a28.16 28.16 0 0 1-28.032 28.032zM704 64v128h128l-128-128z m128 192h-190.464V64H128v832h704V256z"></path>\n              </svg>\n            </li>\n            <li code=\'autoZoom\'>\n              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="20" height="24">\n                <path d="M684.288 305.28l0.128-0.64-0.128-0.64V99.712c0-19.84 15.552-35.904 34.496-35.712a35.072 35.072 0 0 1 34.56 35.776v171.008h170.944c19.648 0 35.84 15.488 35.712 34.432a35.072 35.072 0 0 1-35.84 34.496h-204.16l-0.64-0.128a32.768 32.768 0 0 1-20.864-7.552c-1.344-1.024-2.816-1.664-3.968-2.816-0.384-0.32-0.512-0.768-0.832-1.088a33.472 33.472 0 0 1-9.408-22.848zM305.28 64a35.072 35.072 0 0 0-34.56 35.776v171.008H99.776A35.072 35.072 0 0 0 64 305.216c0 18.944 15.872 34.496 35.84 34.496h204.16l0.64-0.128a32.896 32.896 0 0 0 20.864-7.552c1.344-1.024 2.816-1.664 3.904-2.816 0.384-0.32 0.512-0.768 0.768-1.088a33.024 33.024 0 0 0 9.536-22.848l-0.128-0.64 0.128-0.704V99.712A35.008 35.008 0 0 0 305.216 64z m618.944 620.288h-204.16l-0.64 0.128-0.512-0.128c-7.808 0-14.72 3.2-20.48 7.68-1.28 1.024-2.752 1.664-3.84 2.752-0.384 0.32-0.512 0.768-0.832 1.088a33.664 33.664 0 0 0-9.408 22.912l0.128 0.64-0.128 0.704v204.288c0 19.712 15.552 35.904 34.496 35.712a35.072 35.072 0 0 0 34.56-35.776V753.28h170.944c19.648 0 35.84-15.488 35.712-34.432a35.072 35.072 0 0 0-35.84-34.496z m-593.92 11.52c-0.256-0.32-0.384-0.768-0.768-1.088-1.088-1.088-2.56-1.728-3.84-2.688a33.088 33.088 0 0 0-20.48-7.68l-0.512 0.064-0.64-0.128H99.84a35.072 35.072 0 0 0-35.84 34.496 35.072 35.072 0 0 0 35.712 34.432H270.72v171.008c0 19.84 15.552 35.84 34.56 35.776a35.008 35.008 0 0 0 34.432-35.712V720l-0.128-0.64 0.128-0.704a33.344 33.344 0 0 0-9.472-22.848zM512 374.144a137.92 137.92 0 1 0 0.128 275.84A137.92 137.92 0 0 0 512 374.08z"></path>\n              </svg>\n            </li>\n          </ul>\n        '},zoomSensitivity:2}},e.prototype.init=function(){var t=this,e=this.get("graph"),r=this.get("getContent")(e),n=r;(0,ng.isString)(r)&&(n=Ek(r));var o=this.get("className");n.setAttribute("class",o||"g6-component-toolbar");var i=this.get("container");i||(i=this.get("graph").get("container")),(0,ng.isString)(i)&&(i=document.getElementById(i)),i.appendChild(n),this.set("toolBar",n);var a=this.get("handleClick");n.addEventListener("click",function(r){var n=function(t){if(!t)return[];if(t.composedPath)return t.composedPath();for(var e=[],r=t.target;r;){if(e.push(r),"HTML"===r.tagName)return e.push(document,window),e;r=r.parentElement}return e}(r).filter(function(t){return"LI"===t.nodeName});if(0!==n.length){var o=n[0].getAttribute("code");o&&(a?a(o,e):t.handleDefaultOperator(o))}});var s=this.get("position");s&&ST(n,{top:"".concat(s.y,"px"),left:"".concat(s.x,"px")}),this.bindUndoRedo()},e.prototype.bindUndoRedo=function(){var t=this.get("graph"),e=document.querySelector('.g6-component-toolbar li[code="undo"]'),r=document.querySelector('.g6-component-toolbar li[code="undo"] svg'),n=document.querySelector('.g6-component-toolbar li[code="redo"]'),o=document.querySelector('.g6-component-toolbar li[code="redo"] svg');e&&r&&n&&o&&(e.setAttribute("style","cursor: not-allowed"),r.setAttribute("style","opacity: 0.4"),n.setAttribute("style","cursor: not-allowed"),o.setAttribute("style","opacity: 0.4"),t.on("stackchange",function(t){var i=t.undoStack,a=t.redoStack,s=i.length,u=a.length;0===s?(e.setAttribute("style","cursor: not-allowed"),r.setAttribute("style","opacity: 0.4")):(e.removeAttribute("style"),r.removeAttribute("style")),0===u?(n.setAttribute("style","cursor: not-allowed"),o.setAttribute("style","opacity: 0.4")):(n.removeAttribute("style"),o.removeAttribute("style"))}))},e.prototype.undo=function(){var t=this.get("graph"),e=t.getUndoStack();if(e&&0!==e.length){var r=e.pop();if(r){var n=r.action;t.pushStack(n,(0,ng.clone)(r.data),"redo");var o=r.data.before;if("add"===n&&(o=r.data.after),!o)return;switch(n){case"visible":Object.keys(o).forEach(function(e){var r=o[e];r&&r.forEach(function(e){var r=t.findById(e.id);e.visible?t.showItem(r,!1):t.hideItem(r,!1)})});break;case"render":case"update":Object.keys(o).forEach(function(e){var r=o[e];r&&r.forEach(function(e){var r=t.findById(e.id);delete e.id,t.updateItem(r,e,!1),"combo"===r.getType()&&t.updateCombo(r)})});break;case"changedata":t.changeData(o,!1);break;case"delete":Object.keys(o).forEach(function(e){var r=o[e];r&&r.forEach(function(e){var r=e.itemType;delete e.itemType,t.addItem(r,e,!1)})});break;case"add":Object.keys(o).forEach(function(e){var r=o[e];r&&r.forEach(function(e){t.removeItem(e.id,!1)})});break;case"updateComboTree":Object.keys(o).forEach(function(e){var r=o[e];r&&r.forEach(function(e){t.updateComboTree(e.id,e.parentId,!1)})});break;case"createCombo":var i=r.data.after.combos,a=i[i.length-1];Object.keys(o).forEach(function(e){var r=o[e];r&&r.forEach(function(e){t.updateComboTree(e.id,e.parentId,!1)})}),t.removeItem(a.id,!1);break;case"uncombo":var s=o.combos[o.combos.length-1],u=o.nodes.concat(o.combos).map(function(t){return t.id}).filter(function(t){return t!==s.id});t.createCombo(s,u,!1);break;case"layout":t.updateLayout(o,void 0,void 0,!1)}}}},e.prototype.redo=function(){var t=this.get("graph"),e=t.getRedoStack();if(e&&0!==e.length){var r=e.pop();if(r){var n=r.action,o=r.data.after;if(t.pushStack(n,(0,ng.clone)(r.data)),"delete"===n&&(o=r.data.before),!o)return;switch(n){case"visible":Object.keys(o).forEach(function(e){var r=o[e];r&&r.forEach(function(e){var r=t.findById(e.id);e.visible?t.showItem(r,!1):t.hideItem(r,!1)})});break;case"render":case"update":Object.keys(o).forEach(function(e){var r=o[e];r&&r.forEach(function(e){var r=t.findById(e.id);delete e.id,t.updateItem(r,e,!1),"combo"===r.getType()&&t.updateCombo(r)})});break;case"changedata":t.changeData(o,!1);break;case"delete":o.edges&&o.edges.forEach(function(e){t.removeItem(e.id,!1)}),o.nodes&&o.nodes.forEach(function(e){t.removeItem(e.id,!1)}),o.combos&&o.combos.forEach(function(e){t.removeItem(e.id,!1)});break;case"add":Object.keys(o).forEach(function(e){var r=o[e];r&&r.forEach(function(e){var r=e.itemType;delete e.itemType,t.addItem(r,e,!1)})});break;case"updateComboTree":Object.keys(o).forEach(function(e){var r=o[e];r&&r.forEach(function(e){t.updateComboTree(e.id,e.parentId,!1)})});break;case"createCombo":var i=o.combos[o.combos.length-1];t.createCombo(i,i.children.map(function(t){return t.id}),!1);break;case"uncombo":var a=r.data.before.combos,s=a[a.length-1];t.uncombo(s.id,!1);break;case"layout":t.updateLayout(o,void 0,void 0,!1)}}}},e.prototype.zoomOut=function(){var t=this.get("graph"),e=t.getZoom(),r=1/(1-.05*this.get("zoomSensitivity"));r*e>(this.get("maxZoom")||t.get("maxZoom"))||t.zoomTo(e*r)},e.prototype.zoomIn=function(){var t=this.get("graph"),e=t.getZoom(),r=1-.05*this.get("zoomSensitivity");r*e<(this.get("minZoom")||t.get("minZoom"))||t.zoomTo(e*r)},e.prototype.realZoom=function(){this.get("graph").zoomTo(1)},e.prototype.autoZoom=function(){this.get("graph").fitView([20,20])},e.prototype.handleDefaultOperator=function(t){switch(t){case"redo":this.redo();break;case"undo":this.undo();break;case"zoomOut":this.zoomOut();break;case"zoomIn":this.zoomIn();break;case"realZoom":this.realZoom();break;case"autoZoom":this.autoZoom()}},e.prototype.destroy=function(){var t=this.get("toolBar");if(t){var e=this.get("container");e||(e=this.get("graph").get("container")),(0,ng.isString)(e)&&(e=document.getElementById(e)),e.removeChild(t)}var r=this.get("handleClick");r&&t.removeEventListener("click",r)},e}(xT),WT=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();"undefined"!=typeof document&&kT()("\n  .g6-component-tooltip {\n    border: 1px solid #e2e2e2;\n    border-radius: 4px;\n    font-size: 12px;\n    color: #545454;\n    background-color: rgba(255, 255, 255, 0.9);\n    padding: 10px 8px;\n    box-shadow: rgb(174, 174, 174) 0px 0px 10px;\n  }\n  .tooltip-type {\n    padding: 0;\n    margin: 0;\n  }\n  .tooltip-id {\n    color: #531dab;\n  }\n");var qT=function(t){function e(e){return t.call(this,e)||this}return WT(e,t),e.prototype.getDefaultCfgs=function(){return{offsetX:6,offsetY:6,getContent:function(t){return"\n          <h4 class='tooltip-type'>ç±»åï¼".concat(t.item.getType(),"</h4>\n          <span class='tooltip-id'>IDï¼").concat(t.item.getID(),"</span>\n        ")},shouldBegin:function(t){return!0},itemTypes:["node","edge","combo"],trigger:"mouseenter",fixToNode:void 0}},e.prototype.getEvents=function(){return"click"===this.get("trigger")?{"node:click":"onClick","edge:click":"onClick","combo:click":"onClick","canvas:click":"onMouseLeave",afterremoveitem:"onMouseLeave",contextmenu:"onMouseLeave",drag:"onMouseLeave"}:{"node:mouseenter":"onMouseEnter","node:mouseleave":"onMouseLeave","node:mousemove":"onMouseMove","edge:mouseenter":"onMouseEnter","edge:mouseleave":"onMouseLeave","edge:mousemove":"onMouseMove","combo:mouseenter":"onMouseEnter","combo:mouseleave":"onMouseLeave","combo:mousemove":"onMouseMove",afterremoveitem:"onMouseLeave",contextmenu:"onMouseLeave","node:drag":"onMouseLeave"}},e.prototype.init=function(){var t=this,e=t.get("className")||"g6-component-tooltip",r=Ek("<div class='".concat(e,"'></div>")),n=t.get("container");n||(n=t.get("graph").get("container")),(0,ng.isString)(n)&&(n=document.getElementById(n)),ST(r,{position:"absolute",visibility:"hidden",display:"none"}),n.appendChild(r),"click"!==t.get("trigger")&&(r.addEventListener("mouseenter",function(t){ST(r,{visibility:"visible",display:"unset"})}),r.addEventListener("mouseleave",function(e){t.hideTooltip()})),t.set("tooltip",r)},e.prototype.onClick=function(t){var e=this.get("itemTypes");if(!t.item||!t.item.getType||-1!==e.indexOf(t.item.getType())){var r=t.item,n=this.get("graph");this.currentTarget===r?(this.currentTarget=null,this.hideTooltip(),n.emit("tooltipchange",{item:t.item,action:"hide"})):(this.currentTarget=r,this.showTooltip(t),n.emit("tooltipchange",{item:t.item,action:"show"}))}},e.prototype.onMouseEnter=function(t){var e=this.get("itemTypes");if(!t.item||!t.item.getType||-1!==e.indexOf(t.item.getType())){var r=t.item,n=this.get("graph");this.currentTarget=r,this.showTooltip(t),n.emit("tooltipchange",{item:t.item,action:"show"})}},e.prototype.onMouseMove=function(t){var e=this.get("itemTypes");t.item&&t.item.getType&&-1===e.indexOf(t.item.getType())||this.currentTarget&&t.item===this.currentTarget&&this.showTooltip(t)},e.prototype.onMouseLeave=function(){this.hideTooltip(),this.get("graph").emit("tooltipchange",{item:this.currentTarget,action:"hide"}),this.currentTarget=null},e.prototype.clearContainer=function(){var t=this.get("tooltip");t&&(t.innerHTML="")},e.prototype.showTooltip=function(t){if(t.item){var e=this.get("itemTypes");if(!t.item.getType||-1!==e.indexOf(t.item.getType())){var r=this.get("tooltip"),n=this.get("getContent")(t);(0,ng.isString)(n)?r.innerHTML=n:(this.clearContainer(),r.appendChild(n)),this.updatePosition(t)}}},e.prototype.hideTooltip=function(){var t=this.get("tooltip");t&&ST(t,{visibility:"hidden",display:"none"})},e.prototype.updatePosition=function(t){var e=this.get("shouldBegin"),r=this.get("tooltip");if(e(t)){var n=this.get("graph"),o=n.get("width"),i=n.get("height"),a=this.get("offsetX")||0,s=this.get("offsetY")||0,u=n.getPointByClient(t.clientX,t.clientY),l=this.get("fixToNode"),c=t.item;if(c.getType&&"node"===c.getType()&&l&&(0,ng.isArray)(l)&&l.length>=2){var f=c.getBBox();u={x:f.minX+f.width*l[0],y:f.minY+f.height*l[1]}}var h=n.getCanvasByPoint(u.x,u.y),p=h.x,d=h.y,y=n.getContainer(),v={x:p+y.offsetLeft+a,y:d+y.offsetTop+s};ST(r,{visibility:"visible",display:"unset"});var g=r.getBoundingClientRect();p+g.width+a>o&&(v.x-=g.width+a),d+g.height+s>i&&(v.y-=g.height+s,v.y<0&&(v.y=0)),ST(r,{left:"".concat(v.x,"px"),top:"".concat(v.y,"px")})}else ST(r,{visibility:"hidden",display:"none"})},e.prototype.hide=function(){this.onMouseLeave()},e.prototype.destroy=function(){var t=this.get("tooltip");if(t){var e=this.get("container");e||(e=this.get("graph").get("container")),(0,ng.isString)(e)&&(e=document.getElementById(e)),e.removeChild(t)}},e}(xT),YT=function(){function t(t){var e=t.x,r=void 0===e?0:e,n=t.y,o=void 0===n?0:n,i=t.container,a=t.text,s=t.padding,u=void 0===s?[4,4,4,4]:s,l=t.className,c=void 0===l?"g6-component-timebar-tooltip":l,f=t.backgroundColor,h=void 0===f?"#000":f,p=t.textColor,d=void 0===p?"#fff":p,y=t.opacity,v=void 0===y?.8:y,g=t.fontSize,m=void 0===g?12:g;this.container=i,this.className=c,this.backgroundColor=h,this.textColor=d,this.x=r,this.y=o,this.text=a,this.padding=u,this.opacity=v,this.fontSize=m,this.render()}return t.prototype.render=function(){var t=this.className,e=(this.x,this.y,this.backgroundColor),r=this.textColor,n=this.text,o=this.padding,i=this.opacity,a=this.fontSize,s=this.container,u=Ek("<div class='".concat(t,"' style=\"position: absolute; width: fit-content; height: fit-content; opacity: ").concat(i,'"></div>'));(0,ng.isString)(s)&&(s=document.getElementById(s)),s.appendChild(u),this.parentHeight=s.offsetHeight,this.parentWidth=s.offsetWidth,ST(u,{visibility:"hidden",top:0,left:0});var l=Ek("\n      <div style='position: absolute; white-space:nowrap; background-color: ".concat(e,"; font-size: ").concat(a,"px; border-radius: 4px; width: fit-content; height: fit-content; color: ").concat(r,"; padding: ").concat(o[0],"px ").concat(o[1],"px ").concat(o[2],"px ").concat(o[3],"px'></div>"));l.innerHTML=n,u.appendChild(l),this.backgroundDOM=l;var c=Ek("<div style='position: absolute; width: 0px; height: 0px; border-left: 5px solid transparent; border-right: 5px solid transparent; border-top: 10px solid ".concat(e,"'></div>"));u.appendChild(c),this.arrowDOM=c,this.container=u},t.prototype.show=function(t){var e=t.text,r=t.x;t.y,t.clientX,t.clientY;this.backgroundDOM.innerHTML=e;var n=this.backgroundDOM.offsetWidth,o=this.backgroundDOM.offsetHeight,i=this.arrowDOM.offsetWidth,a=this.arrowDOM.offsetHeight;ST(this.container,{top:"".concat(-o-a,"px"),left:"".concat(r,"px"),visibility:"visible"}),ST(this.backgroundDOM,{marginLeft:"".concat(-n/2,"px")}),ST(this.arrowDOM,{marginLeft:"".concat(-i/2,"px"),top:"".concat(o,"px")});var s=r-n/2,u=r+n/2;s<0?ST(this.backgroundDOM,{marginLeft:"".concat(-n/2-s,"px")}):u>this.parentWidth&&ST(this.backgroundDOM,{marginLeft:"".concat(-n/2-u+this.parentWidth+12,"px")})},t.prototype.hide=function(){ST(this.container,{top:0,left:0,visibility:"hidden"})},t}(),XT=function(){return(XT=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},JT=function(){function t(t){this.config=(0,ng.deepMix)({},t),this.init()}return t.prototype.update=function(t){this.config=(0,ng.deepMix)({},this.config,t),this.updateElement(),this.renderMarker()},t.prototype.init=function(){this.initElement(),this.renderMarker()},t.prototype.initElement=function(){var t=this.config,e=t.group,r=t.style,n=r.scale,o=void 0===n?1:n,i=r.offsetX,a=void 0===i?0:i,s=r.offsetY,u=void 0===s?0:s,l=this.config.x+a,c=this.config.y+u,f=e.addGroup({name:"playPauseBtn"});this.startMarkerGroup=f.addGroup({name:"playPauseBtn"}),this.circle=e.addShape("circle",{attrs:XT({x:l,y:c,r:this.config.r*o},r),name:"playPauseBtn"}),this.startMarker=this.startMarkerGroup.addShape("path",{attrs:{path:this.getStartMarkerPath(l,c,o),fill:r.stroke||"#aaa"},name:"start-marker"}),this.pauseMarkerGroup=f.addGroup({name:"playPauseBtn"});var h=.25*this.config.r*o,p=.5*this.config.r*Math.sqrt(3)*o;this.pauseLeftMarker=this.pauseMarkerGroup.addShape("rect",{attrs:{x:l-.375*this.config.r*o,y:c-p/2,width:h,height:p,fill:r.stroke||"#aaa",lineWidth:0}}),this.pauseRightMarker=this.pauseMarkerGroup.addShape("rect",{attrs:{x:l+1/8*this.config.r*o,y:c-p/2,width:h,height:p,fill:r.stroke||"#aaa",lineWidth:0}})},t.prototype.updateElement=function(){var t=this.config.style,e=t.scale,r=void 0===e?1:e,n=t.offsetX,o=void 0===n?0:n,i=t.offsetY,a=void 0===i?0:i,s=this.config.x+o,u=this.config.y+a;this.circle.attr("x",s),this.circle.attr("y",u),this.circle.attr("r",this.config.r*r),this.startMarker.attr("path",this.getStartMarkerPath(s,u,r));var l=.25*this.config.r*r,c=.5*this.config.r*Math.sqrt(3)*r;this.pauseLeftMarker.attr("x",s-.375*this.config.r*r),this.pauseLeftMarker.attr("y",u-c/2),this.pauseLeftMarker.attr("width",l),this.pauseLeftMarker.attr("height",c),this.pauseRightMarker.attr("x",s+1/8*this.config.r*r),this.pauseRightMarker.attr("y",u-c/2),this.pauseRightMarker.attr("width",l),this.pauseRightMarker.attr("height",c)},t.prototype.renderMarker=function(){this.config.isPlay?(this.startMarkerGroup.hide(),this.pauseMarkerGroup.show()):(this.startMarkerGroup.show(),this.pauseMarkerGroup.hide())},t.prototype.getStartMarkerPath=function(t,e,r){var n=.5*this.config.r*Math.sqrt(3)*r;return[["M",t-n/Math.sqrt(3)/2,e-n/2],["L",t+n/Math.sqrt(3),e],["L",t-n/Math.sqrt(3)/2,e+n/2]]},t}(),KT=function(){return(KT=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},QT=hg,ZT={fill:"#aaa",fillOpacity:.35,stroke:"#aaa"},$T={fill:"#fff"},tA={fill:"green"},eA={pointer:{fill:"#aaa",lineWidth:0},scroller:{stroke:"#aaa",fill:"#aaa",lineWidth:1,lineAppendWidth:5,cursor:"pointer"},text:{fill:"#aaa",textBaseline:"top"}},rA={check:{stroke:"green",lineWidth:3},box:{fill:"#fff",stroke:"#aaa",lineWidth:2,radius:3,width:12,height:12},text:{fill:"#aaa",fontSize:12,textBaseline:"top"}},nA={speed:1,loop:!1,fill:"#fff",stroke:"#fff",hideTimeTypeController:!1,preBtnStyle:{fill:"#aaa",stroke:"#aaa"},nextBtnStyle:{fill:"#aaa",stroke:"#aaa"},playBtnStyle:{fill:"#aaa",stroke:"#aaa",fillOpacity:.05},speedControllerStyle:eA,timeTypeControllerStyle:rA},oA={SINGLE:"single",RANGE:"range"},iA=function(){function t(t){this.controllerCfg=(0,ng.deepMix)({},nA,t),this.group=t.group,this.controllerGroup=this.group.addGroup({name:"controller-group"}),this.speedAxisY=[],this.currentSpeed=this.controllerCfg.speed,this.currentType=this.controllerCfg.defaultTimeType||oA.RANGE,this.fontFamily=t.fontFamily||"Arial, sans-serif",this.init()}return t.prototype.init=function(){this.renderPlayButton()},t.prototype.getNextMarkerPath=function(t,e,r){return[["M",t,e-r],["L",t+r,e],["L",t,e+r],["Z",t,e-r],["M",t,e],["L",t-r,e-r],["L",t-r,e+r],["Z"]]},t.prototype.getPreMarkerPath=function(t,e,r){return[["M",t,e-r],["L",t-r,e],["L",t,e+r],["L",t,e-r],["M",t,e],["L",t+r,e-r],["L",t+r,e+r],["Z"]]},t.prototype.renderPlayButton=function(){var t=this.controllerCfg,e=t.width,r=t.height,n=t.x,o=t.y,i=t.hideTimeTypeController,a=t.fill,s=void 0===a?"#aaa":a,u=t.stroke,l=void 0===u?"green":u,c=t.containerStyle,f=void 0===c?{}:c,h=KT(KT({},ZT),t.playBtnStyle||{}),p=KT(KT({},$T),t.preBtnStyle||{}),d=KT(KT({},tA),t.nextBtnStyle||{}),y=r/2-5,v=o+10,g=this.controllerGroup.addShape("rect",{attrs:KT({x:n,y:v,width:e,height:r,stroke:l,fill:s},f),name:"container-rect"});this.playButton?this.playButton.update({x:e/2,y:v,r:y}):this.playButton=new JT({group:this.controllerGroup,x:e/2,y:v+y+5,r:y,isPlay:this.isPlay,style:h});var m=p.offsetX||0,b=p.offsetY||0,w=(p.scale||1)*y;this.controllerGroup.addShape("path",{attrs:KT({path:this.getPreMarkerPath(e/2-5*y+m,v+y+5+b,.5*w)},p),name:"preStepBtn"});var S=d.offsetX||0,x=d.offsetY||0,_=(d.scale||1)*y;this.controllerGroup.addShape("path",{attrs:KT({path:this.getNextMarkerPath(e/2+5*y+S,v+y+5+x,.5*_)},d),name:"nextStepBtn"}),g.toBack(),this.renderSpeedBtn(),i||this.renderToggleTime(),this.bindEvent();var E=this.controllerCfg.scale,O=void 0===E?1:E,P=this.controllerGroup.getCanvasBBox(),k=(P.maxX+P.minX)/2,C=(P.maxY+P.minY)/2,T=QT([1,0,0,0,1,0,0,0,1],[["t",-k,-C],["s",O,O],["t",k,C]]);this.controllerGroup.setMatrix(T)},t.prototype.renderSpeedBtn=function(){var t=this.controllerCfg,e=t.y,r=t.width,n=t.hideTimeTypeController,o=KT(KT({},eA),this.controllerCfg.speedControllerStyle||{}),i=o.scroller,a=void 0===i?{}:i,s=o.text,u=void 0===s?{}:s,l=o.pointer,c=void 0===l?{}:l,f=o.scale,h=void 0===f?1:f,p=o.offsetX,d=void 0===p?0:p,y=o.offsetY,v=void 0===y?0:y,g=this.controllerGroup.addGroup({name:"speed-group"});this.speedGroup=g;var m=[],b=5;this.speedAxisY=[19,22,26,32,39];for(var w=0;w<5;w++){var S=e+this.speedAxisY[w],x=r-(n?50:110);g.addShape("line",{attrs:KT({x1:x,x2:x+15,y1:S,y2:S},a),speed:b,name:"speed-rect"}),this.speedAxisY[w]=S,m.push(b),b-=1}this.speedText=g.addShape("text",{attrs:KT({x:r-(n?50:110)+20,y:this.speedAxisY[0]+4,text:"1.0X",fontFamily:this.fontFamily||"Arial, sans-serif"},u),name:"speed-text"}),this.speedPoint=g.addShape("path",{attrs:KT({path:this.getPointerPath(r-(n?50:110),0),matrix:[1,0,0,0,1,0,0,this.speedAxisY[4],1]},c),name:"speed-pointer"});var _=this.speedGroup.getCanvasBBox(),E=(_.maxX+_.minX)/2,O=(_.maxY+_.minY)/2,P=this.speedGroup.getMatrix()||[1,0,0,0,1,0,0,0,1];P=QT(P,[["t",-E,-O],["s",h,h],["t",E+d*h,O+v*h]]),this.speedGroup.setMatrix(P)},t.prototype.getPointerPath=function(t,e){return[["M",t,e],["L",t-10,e-4],["L",t-10,e+4],["Z"]]},t.prototype.renderToggleTime=function(){var t,e,r=this.controllerCfg,n=r.width,o=r.defaultTimeType,i=KT(KT({},rA),this.controllerCfg.timeTypeControllerStyle||{}),a=i.scale,s=void 0===a?1:a,u=i.offsetX,l=void 0===u?0:u,c=i.offsetY,f=void 0===c?0:c,h=i.box,p=void 0===h?{}:h,d=i.check,y=void 0===d?{}:d,v=i.text,g=void 0===v?{}:v;this.toggleGroup=this.controllerGroup.addGroup({name:"toggle-group"});var m=o===oA.SINGLE;this.toggleGroup.addShape("rect",{attrs:KT({x:n-50,y:this.speedAxisY[0]+3.5},p),isChecked:m,name:"toggle-model"}),this.checkedIcon=this.toggleGroup.addShape("path",{attrs:KT({path:[["M",n-50+3,this.speedAxisY[1]+6],["L",n-50+7,this.speedAxisY[1]+10],["L",n-50+12,this.speedAxisY[1]+4]]},y),capture:!1,name:"check-icon"}),m||this.checkedIcon.hide(),this.checkedText=this.toggleGroup.addShape("text",{attrs:KT({text:m?(null===(t=this.controllerCfg)||void 0===t?void 0:t.timeRangeControllerText)||"æ¶é´èå´":(null===(e=this.controllerCfg)||void 0===e?void 0:e.timePointControllerText)||"åä¸æ¶é´",x:n-50+15,y:this.speedAxisY[0]+4,fontFamily:"undefined"!=typeof window&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif"},g),name:"checked-text"});var b=this.toggleGroup.getCanvasBBox(),w=(b.maxX+b.minX)/2,S=(b.maxY+b.minY)/2,x=this.toggleGroup.getMatrix()||[1,0,0,0,1,0,0,0,1];x=QT(x,[["t",-w,-S],["s",s,s],["t",w+l*s,S+f*s]]),this.toggleGroup.setMatrix(x)},t.prototype.bindEvent=function(){var t=this;this.speedGroup.on("speed-rect:click",function(e){var r=e.target.attr("y1"),n=t.speedPoint.attr("matrix"),o=t.speedAxisY.indexOf(n[7]||0),i=t.speedAxisY.indexOf(r),a=t.speedAxisY[i]-t.speedAxisY[o];n=QT(n,[["t",0,a]]),t.speedPoint.setMatrix(n),t.currentSpeed=t.speedAxisY.length-i,t.speedText.attr("text","".concat(t.currentSpeed,".0X")),t.group.emit("timebarConfigChanged",{speed:t.currentSpeed,type:t.currentType})}),this.speedGroup.on("mousewheel",function(e){e.preventDefault();var r=t.speedPoint.attr("matrix")||[1,0,0,0,1,0,0,0,1],n=r[7],o=t.speedAxisY.indexOf(n);if(-1===o){var i=1/0;t.speedAxisY.forEach(function(t,e){var r=Math.abs(t-n);i>r&&(i=r,o=e)})}o=e.originalEvent.deltaY>0?Math.max(0,o-1):Math.min(t.speedAxisY.length-1,o+1);var a=t.speedAxisY[o]-n;r=QT(r,[["t",0,a]]),t.speedPoint.setMatrix(r),t.currentSpeed=t.speedAxisY.length-o,t.speedText.attr("text","".concat(t.currentSpeed,".0X")),t.group.emit("timebarConfigChanged",{speed:t.currentSpeed,type:t.currentType})}),this.toggleGroup&&this.toggleGroup.on("toggle-model:click",function(e){var r,n,o=e.target.get("isChecked");o?(t.checkedIcon.hide(),t.checkedText.attr("text",(null===(n=t.controllerCfg)||void 0===n?void 0:n.timePointControllerText)||"åä¸æ¶é´"),t.currentType=oA.RANGE):(t.checkedIcon.show(),t.checkedText.attr("text",(null===(r=t.controllerCfg)||void 0===r?void 0:r.timeRangeControllerText)||"æ¶é´èå´"),t.currentType=oA.SINGLE),e.target.set("isChecked",!o),t.group.emit("timebarConfigChanged",{type:t.currentType,speed:t.currentSpeed})})},t.prototype.destroy=function(){this.speedGroup.off("speed-rect:click"),this.toggleGroup&&(this.toggleGroup.off("toggle-model:click"),this.toggleGroup.destroy()),this.speedGroup.destroy()},t}(),aA=function(){return(aA=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},sA=hg,uA={fill:"#5B8FF9"},lA={fill:"#e6e8e9"},cA=function(){function t(t){this.frameCount=0,this.fontFamily="Arial, sans-serif";var e=t.graph,r=t.canvas,n=t.group,o=t.width,i=t.height,a=t.padding,s=t.data,u=t.start,l=t.end,c=t.x,f=void 0===c?0:c,h=t.y,p=void 0===h?0:h,d=t.tickLabelFormatter,y=t.selectedTickStyle,v=void 0===y?uA:y,g=t.unselectedTickStyle,m=void 0===g?lA:g,b=t.tooltipBackgroundColor,w=t.tooltipFomatter,S=t.tickLabelStyle,x=t.controllerCfg,_=void 0===x?{speed:1}:x;this.graph=e,this.group=n,this.sliceGroup=n.addGroup({name:"slice-group"}),this.canvas=r,this.width=o,this.height=i,this.padding=a,this.data=s,this.start=u,this.end=l,this.tickLabelFormatter=d,this.tickLabelStyle=S||{},this.selectedTickStyle=v,this.unselectedTickStyle=m,this.controllerCfg=_,this.currentSpeed=_.speed||1,this.x=f,this.y=p,this.tooltipBackgroundColor=b,this.tooltipFomatter=w,this.fontFamily="undefined"!=typeof window&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif",this.renderSlices(),this.initEvent()}return t.prototype.renderSlices=function(){var t=this,e=this,r=e.width,n=e.height,o=e.padding,i=e.data,a=e.start,s=e.end,u=e.tickLabelFormatter,l=e.selectedTickStyle,c=e.unselectedTickStyle,f=e.tickLabelStyle,h=r-2*o,p=n-(3*o+4+10)-2*o,d=i.length,y=(h-2*(d-1))/d;this.tickWidth=y;var v=this.sliceGroup,g=[],m=[],b=Math.round(d*a),w=Math.round(d*s);this.startTickRectId=b,this.endTickRectId=w;var S=f.rotate;delete f.rotate,i.forEach(function(e,n){var i=n>=b&&n<=w?l:c,a=v.addShape("rect",{attrs:aA({x:o+n*(y+2),y:o,width:y,height:p},i),draggable:!0,name:"tick-rect-".concat(n)}),s=v.addShape("rect",{attrs:{x:o+n*y+2*(2*n-1)/2,y:o,width:0===n||n===d-1?y+1:y+2,height:p,fill:"#fff",opacity:0},draggable:!0,name:"pick-rect-".concat(n)});s.toFront();var h,x=a.getBBox(),_=(x.minX+x.maxX)/2;if(g.push({rect:a,pickRect:s,value:e.date,x:_,y:x.minY}),u?(h=u(e),!(0,ng.isString)(h)&&h&&(h=e.date)):n%Math.round(d/10)==0&&(h=e.date),h){m.push(h);var E=x.maxY+2*o;v.addShape("line",{attrs:{stroke:"#BFBFBF",x1:_,y1:E,x2:_,y2:E+4},name:"tick-line"});var O=E+4+o,P=v.addShape("text",{attrs:aA({fill:"#8c8c8c",stroke:"#fff",lineWidth:1,x:_,y:O,textAlign:"center",text:h,textBaseline:"top",fontSize:10,fontFamily:t.fontFamily||"Arial, sans-serif"},f),capture:!1,name:"tick-label"}),k=P.getBBox();if(k.maxX>r?P.attr("textAlign","right"):k.minX<0&&P.attr("textAlign","left"),(0,ng.isNumber)(S)&&10!==m.length){var C=sA([1,0,0,0,1,0,0,0,1],[["t",-_,-O],["r",S],["t",_-5,O+2]]);P.attr({textAlign:"left",matrix:C})}1===m.length?P.attr({textAlign:"left"}):10===m.length&&P.attr({textAlign:"right"})}}),this.tickRects=g;var x=this.group;this.currentSpeed=1,this.controllerBtnGroup=new iA(aA({group:x,x:this.x,y:this.y+n+5,width:r,height:40,hideTimeTypeController:!0,speed:this.currentSpeed,fontFamily:this.fontFamily||"Arial, sans-serif"},this.controllerCfg))},t.prototype.initEvent=function(){var t=this,e=this.sliceGroup;e.on("click",function(e){var r=e.target;if("rect"===r.get("type")&&r.get("name")){var n=parseInt(r.get("name").split("-")[2],10);if(!isNaN(n)){var o=t.tickRects,i=t.unselectedTickStyle;o.forEach(function(t){t.rect.attr(i)});var a=t.selectedTickStyle;o[n].rect.attr(a),t.startTickRectId=n,t.endTickRectId=n;var s=n/o.length;t.graph.emit("valuechange",{value:[s,s]})}}}),e.on("dragstart",function(e){var r=t.tickRects,n=t.unselectedTickStyle;r.forEach(function(t){t.rect.attr(n)});var o=e.target,i=parseInt(o.get("name").split("-")[2],10),a=t.selectedTickStyle;r[i].rect.attr(a),t.startTickRectId=i;var s=i/r.length;t.graph.emit("valuechange",{value:[s,s]}),t.dragging=!0}),e.on("dragover",function(e){if(t.dragging&&"rect"===e.target.get("type")){for(var r=parseInt(e.target.get("name").split("-")[2],10),n=t.startTickRectId,o=t.tickRects,i=t.selectedTickStyle,a=t.unselectedTickStyle,s=0;s<o.length;s++){var u=s>=n&&s<=r?i:a;o[s].rect.attr(u)}var l=o.length;t.endTickRectId=r;var c=n/l,f=r/l;t.graph.emit("valuechange",{value:[c,f]})}}),e.on("drop",function(e){if(t.dragging&&(t.dragging=!1,"rect"===e.target.get("type"))){var r=t.startTickRectId,n=parseInt(e.target.get("name").split("-")[2],10);if(!(n<r)){var o=t.selectedTickStyle,i=t.tickRects;i[n].rect.attr(o),t.endTickRectId=n;var a=i.length,s=r/a,u=n/a;t.graph.emit("valuechange",{value:[s,u]})}}});var r=this.tooltipBackgroundColor,n=this.tooltipFomatter,o=this.canvas,i=new YT({container:o.get("container"),backgroundColor:r}),a=this.tickRects;a.forEach(function(t){var e=t.pickRect;e.on("mouseenter",function(t){var e=t.target;if("rect"===e.get("type")){var r=parseInt(e.get("name").split("-")[2],10),s=o.getClientByPoint(a[r].x,a[r].y);i.show({x:a[r].x,y:a[r].y,clientX:s.x,clientY:s.y,text:n?n(a[r].value):a[r].value})}}),e.on("mouseleave",function(t){i.hide()})});var s=this.group;s.on("".concat("playPauseBtn",":click"),function(){t.isPlay=!t.isPlay,t.changePlayStatus()}),s.on("".concat("nextStepBtn",":click"),function(){t.updateStartEnd(1)}),s.on("".concat("preStepBtn",":click"),function(){t.updateStartEnd(-1)}),s.on("timebarConfigChanged",function(e){e.type;var r=e.speed;t.currentSpeed=r})},t.prototype.changePlayStatus=function(t){void 0===t&&(t=!0),this.controllerBtnGroup.playButton.update({isPlay:this.isPlay}),this.isPlay?(this.playHandler=this.startPlay(),this.graph.emit("timebarstartplay",null)):this.playHandler&&("undefined"!=typeof window&&window.cancelAnimationFrame(this.playHandler),t&&this.graph.emit("timebarendplay",null))},t.prototype.startPlay=function(){var t=this;return"undefined"!=typeof window?window.requestAnimationFrame(function(){var e=t.currentSpeed;t.frameCount%(60/e)==0&&(t.frameCount=0,t.updateStartEnd(1)),t.frameCount++,t.isPlay&&(t.playHandler=t.startPlay())}):void 0},t.prototype.updateStartEnd=function(t){var e=this.tickRects,r=e.length,n=this.unselectedTickStyle,o=this.selectedTickStyle,i=this.endTickRectId;if(t>0?this.endTickRectId++:(e[this.endTickRectId].rect.attr(n),this.endTickRectId--),i!==this.startTickRectId)this.endTickRectId<this.startTickRectId&&(this.startTickRectId=this.endTickRectId);else{for(var a=this.startTickRectId;a<=this.endTickRectId-1;a++)e[a].rect.attr(n);this.startTickRectId=this.endTickRectId}if(e[this.endTickRectId]){e[this.endTickRectId].rect.attr(o);var s=this.startTickRectId/r,u=this.endTickRectId/r;this.graph.emit("valuechange",{value:[s,u]})}},t.prototype.destory=function(){var t=this.sliceGroup;t.off("click"),t.off("dragstart"),t.off("dragover"),t.off("drop"),this.tickRects.forEach(function(t){var e=t.pickRect;e.off("mouseenter"),e.off("mouseleave")}),this.tickRects.length=0,t.off("".concat("playPauseBtn",":click")),t.off("".concat("nextStepBtn",":click")),t.off("".concat("preStepBtn",":click")),t.off("timebarConfigChanged"),this.sliceGroup.destroy()},t}(),fA={};function hA(t,e){fA[t]=e}var pA=function(){function t(t){this.type="base",this.isCategory=!1,this.isLinear=!1,this.isContinuous=!1,this.isIdentity=!1,this.values=[],this.range=[0,1],this.ticks=[],this.__cfg__=t,this.initCfg(),this.init()}return t.prototype.translate=function(t){return t},t.prototype.change=function(t){(0,ng.assign)(this.__cfg__,t),this.init()},t.prototype.clone=function(){return this.constructor(this.__cfg__)},t.prototype.getTicks=function(){var t=this;return(0,ng.map)(this.ticks,function(e,r){return(0,ng.isObject)(e)?e:{text:t.getText(e,r),tickValue:e,value:t.scale(e)}})},t.prototype.getText=function(t,e){var r=this.formatter,n=r?r(t,e):t;return(0,ng.isNil)(n)||!(0,ng.isFunction)(n.toString)?"":n.toString()},t.prototype.getConfig=function(t){return this.__cfg__[t]},t.prototype.init=function(){(0,ng.assign)(this,this.__cfg__),this.setDomain(),(0,ng.isEmpty)(this.getConfig("ticks"))&&(this.ticks=this.calculateTicks())},t.prototype.initCfg=function(){},t.prototype.setDomain=function(){},t.prototype.calculateTicks=function(){var t=this.tickMethod,e=[];if((0,ng.isString)(t)){var r=fA[t];if(!r)throw new Error("There is no method to to calculate ticks!");e=r(this)}else(0,ng.isFunction)(t)&&(e=t(this));return e},t.prototype.rangeMin=function(){return this.range[0]},t.prototype.rangeMax=function(){return this.range[1]},t.prototype.calcPercent=function(t,e,r){return(0,ng.isNumber)(t)?(t-e)/(r-e):NaN},t.prototype.calcValue=function(t,e,r){return e+t*(r-e)},t}(),dA=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="cat",e.isCategory=!0,e}return(0,rg.__extends)(e,t),e.prototype.buildIndexMap=function(){if(!this.translateIndexMap){this.translateIndexMap=new Map;for(var t=0;t<this.values.length;t++)this.translateIndexMap.set(this.values[t],t)}},e.prototype.translate=function(t){this.buildIndexMap();var e=this.translateIndexMap.get(t);return void 0===e&&(e=(0,ng.isNumber)(t)?t:NaN),e},e.prototype.scale=function(t){var e=this.translate(t),r=this.calcPercent(e,this.min,this.max);return this.calcValue(r,this.rangeMin(),this.rangeMax())},e.prototype.invert=function(t){var e=this.max-this.min,r=this.calcPercent(t,this.rangeMin(),this.rangeMax()),n=Math.round(e*r)+this.min;return n<this.min||n>this.max?NaN:this.values[n]},e.prototype.getText=function(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var o=e;return(0,ng.isNumber)(e)&&!this.values.includes(e)&&(o=this.values[o]),t.prototype.getText.apply(this,(0,rg.__spreadArrays)([o],r))},e.prototype.initCfg=function(){this.tickMethod="cat"},e.prototype.setDomain=function(){if((0,ng.isNil)(this.getConfig("min"))&&(this.min=0),(0,ng.isNil)(this.getConfig("max"))){var t=this.values.length;this.max=t>1?t-1:t}this.translateIndexMap&&(this.translateIndexMap=void 0)},e}(pA),yA=/d{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|ZZ|Z|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,vA="[^\\s]+",gA=/\[([^]*?)\]/gm;function mA(t,e){for(var r=[],n=0,o=t.length;n<o;n++)r.push(t[n].substr(0,e));return r}var bA=function(t){return function(e,r){var n=r[t].map(function(t){return t.toLowerCase()}).indexOf(e.toLowerCase());return n>-1?n:null}};function wA(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];for(var n=0,o=e;n<o.length;n++){var i=o[n];for(var a in i)t[a]=i[a]}return t}var SA=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],xA=["January","February","March","April","May","June","July","August","September","October","November","December"],_A=mA(xA,3),EA={dayNamesShort:mA(SA,3),dayNames:SA,monthNamesShort:_A,monthNames:xA,amPm:["am","pm"],DoFn:function(t){return t+["th","st","nd","rd"][t%10>3?0:(t-t%10!=10?1:0)*t%10]}},OA=wA({},EA),PA=function(t){return OA=wA(OA,t)},kA=function(t){return t.replace(/[|\\{()[^$+*?.-]/g,"\\$&")},CA=function(t,e){for(void 0===e&&(e=2),t=String(t);t.length<e;)t="0"+t;return t},TA={D:function(t){return String(t.getDate())},DD:function(t){return CA(t.getDate())},Do:function(t,e){return e.DoFn(t.getDate())},d:function(t){return String(t.getDay())},dd:function(t){return CA(t.getDay())},ddd:function(t,e){return e.dayNamesShort[t.getDay()]},dddd:function(t,e){return e.dayNames[t.getDay()]},M:function(t){return String(t.getMonth()+1)},MM:function(t){return CA(t.getMonth()+1)},MMM:function(t,e){return e.monthNamesShort[t.getMonth()]},MMMM:function(t,e){return e.monthNames[t.getMonth()]},YY:function(t){return CA(String(t.getFullYear()),4).substr(2)},YYYY:function(t){return CA(t.getFullYear(),4)},h:function(t){return String(t.getHours()%12||12)},hh:function(t){return CA(t.getHours()%12||12)},H:function(t){return String(t.getHours())},HH:function(t){return CA(t.getHours())},m:function(t){return String(t.getMinutes())},mm:function(t){return CA(t.getMinutes())},s:function(t){return String(t.getSeconds())},ss:function(t){return CA(t.getSeconds())},S:function(t){return String(Math.round(t.getMilliseconds()/100))},SS:function(t){return CA(Math.round(t.getMilliseconds()/10),2)},SSS:function(t){return CA(t.getMilliseconds(),3)},a:function(t,e){return t.getHours()<12?e.amPm[0]:e.amPm[1]},A:function(t,e){return t.getHours()<12?e.amPm[0].toUpperCase():e.amPm[1].toUpperCase()},ZZ:function(t){var e=t.getTimezoneOffset();return(e>0?"-":"+")+CA(100*Math.floor(Math.abs(e)/60)+Math.abs(e)%60,4)},Z:function(t){var e=t.getTimezoneOffset();return(e>0?"-":"+")+CA(Math.floor(Math.abs(e)/60),2)+":"+CA(Math.abs(e)%60,2)}},AA=function(t){return+t-1},MA=[null,"\\d\\d?"],jA=[null,vA],IA=["isPm",vA,function(t,e){var r=t.toLowerCase();return r===e.amPm[0]?0:r===e.amPm[1]?1:null}],NA=["timezoneOffset","[^\\s]*?[\\+\\-]\\d\\d:?\\d\\d|[^\\s]*?Z?",function(t){var e=(t+"").match(/([+-]|\d\d)/gi);if(e){var r=60*+e[1]+parseInt(e[2],10);return"+"===e[0]?r:-r}return 0}],LA={D:["day","\\d\\d?"],DD:["day","\\d\\d"],Do:["day","\\d\\d?"+vA,function(t){return parseInt(t,10)}],M:["month","\\d\\d?",AA],MM:["month","\\d\\d",AA],YY:["year","\\d\\d",function(t){var e=+(""+(new Date).getFullYear()).substr(0,2);return+(""+(+t>68?e-1:e)+t)}],h:["hour","\\d\\d?",void 0,"isPm"],hh:["hour","\\d\\d",void 0,"isPm"],H:["hour","\\d\\d?"],HH:["hour","\\d\\d"],m:["minute","\\d\\d?"],mm:["minute","\\d\\d"],s:["second","\\d\\d?"],ss:["second","\\d\\d"],YYYY:["year","\\d{4}"],S:["millisecond","\\d",function(t){return 100*+t}],SS:["millisecond","\\d\\d",function(t){return 10*+t}],SSS:["millisecond","\\d{3}"],d:MA,dd:MA,ddd:jA,dddd:jA,MMM:["month",vA,bA("monthNamesShort")],MMMM:["month",vA,bA("monthNames")],a:IA,A:IA,ZZ:NA,Z:NA},RA={default:"ddd MMM DD YYYY HH:mm:ss",shortDate:"M/D/YY",mediumDate:"MMM D, YYYY",longDate:"MMMM D, YYYY",fullDate:"dddd, MMMM D, YYYY",isoDate:"YYYY-MM-DD",isoDateTime:"YYYY-MM-DDTHH:mm:ssZ",shortTime:"HH:mm",mediumTime:"HH:mm:ss",longTime:"HH:mm:ss.SSS"},DA=function(t){return wA(RA,t)},BA=function(t,e,r){if(void 0===e&&(e=RA.default),void 0===r&&(r={}),"number"==typeof t&&(t=new Date(t)),"[object Date]"!==Object.prototype.toString.call(t)||isNaN(t.getTime()))throw new Error("Invalid Date pass to format");var n=[];e=(e=RA[e]||e).replace(gA,function(t,e){return n.push(e),"@@@"});var o=wA(wA({},OA),r);return(e=e.replace(yA,function(e){return TA[e](t,o)})).replace(/@@@/g,function(){return n.shift()})};function FA(t,e,r){if(void 0===r&&(r={}),"string"!=typeof e)throw new Error("Invalid format in fecha parse");if(e=RA[e]||e,t.length>1e3)return null;var n={year:(new Date).getFullYear(),month:0,day:1,hour:0,minute:0,second:0,millisecond:0,isPm:null,timezoneOffset:null},o=[],i=[],a=e.replace(gA,function(t,e){return i.push(kA(e)),"@@@"}),s={},u={};a=kA(a).replace(yA,function(t){var e=LA[t],r=e[0],n=e[1],i=e[3];if(s[r])throw new Error("Invalid format. "+r+" specified twice in format");return s[r]=!0,i&&(u[i]=!0),o.push(e),"("+n+")"}),Object.keys(u).forEach(function(t){if(!s[t])throw new Error("Invalid format. "+t+" is required in specified format")}),a=a.replace(/@@@/g,function(){return i.shift()});var l=t.match(new RegExp(a,"i"));if(!l)return null;for(var c,f=wA(wA({},OA),r),h=1;h<l.length;h++){var p=o[h-1],d=p[0],y=p[2],v=y?y(l[h],f):+l[h];if(null==v)return null;n[d]=v}if(1===n.isPm&&null!=n.hour&&12!=+n.hour?n.hour=+n.hour+12:0===n.isPm&&12==+n.hour&&(n.hour=0),null==n.timezoneOffset){c=new Date(n.year,n.month,n.day,n.hour,n.minute,n.second,n.millisecond);for(var g=[["month","getMonth"],["day","getDate"],["hour","getHours"],["minute","getMinutes"],["second","getSeconds"]],m=(h=0,g.length);h<m;h++)if(s[g[h][0]]&&n[g[h][0]]!==c[g[h][1]]())return null}else if(c=new Date(Date.UTC(n.year,n.month,n.day,n.hour,n.minute-n.timezoneOffset,n.second,n.millisecond)),n.month>11||n.month<0||n.day>31||n.day<1||n.hour>23||n.hour<0||n.minute>59||n.minute<0||n.second>59||n.second<0)return null;return c}var GA={format:BA,parse:FA,defaultI18n:EA,setGlobalDateI18n:PA,setGlobalDateMasks:DA};var UA="format";function zA(t,e){return(m[UA]||GA[UA])(t,e)}function VA(t){return(0,ng.isString)(t)&&(t=t.indexOf("T")>0?new Date(t).getTime():new Date(t.replace(/-/gi,"/")).getTime()),(0,ng.isDate)(t)&&(t=t.getTime()),t}var HA=1e3,WA=60*HA,qA=60*WA,YA=24*qA,XA=31*YA,JA=365*YA,KA=[["HH:mm:ss",HA],["HH:mm:ss",10*HA],["HH:mm:ss",30*HA],["HH:mm",WA],["HH:mm",10*WA],["HH:mm",30*WA],["HH",qA],["HH",6*qA],["HH",12*qA],["YYYY-MM-DD",YA],["YYYY-MM-DD",4*YA],["YYYY-WW",7*YA],["YYYY-MM",XA],["YYYY-MM",4*XA],["YYYY-MM",6*XA],["YYYY",380*YA]];function QA(t,e,r){var n,o=(n=function(t){return t[1]},function(t,e,r,o){for(var i=(0,ng.isNil)(r)?0:r,a=(0,ng.isNil)(o)?t.length:o;i<a;){var s=i+a>>>1;n(t[s])>e?a=s:i=s+1}return i})(KA,(e-t)/r)-1,i=KA[o];return o<0?i=KA[0]:o>=KA.length&&(i=(0,ng.last)(KA)),i}var ZA=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="timeCat",e}return(0,rg.__extends)(e,t),e.prototype.translate=function(t){t=VA(t);var e=this.values.indexOf(t);return-1===e&&(e=(0,ng.isNumber)(t)&&t<this.values.length?t:NaN),e},e.prototype.getText=function(t,e){var r=this.translate(t);if(r>-1){var n=this.values[r],o=this.formatter;return n=o?o(n,e):zA(n,this.mask)}return t},e.prototype.initCfg=function(){this.tickMethod="time-cat",this.mask="YYYY-MM-DD",this.tickCount=7},e.prototype.setDomain=function(){var e=this.values;(0,ng.each)(e,function(t,r){e[r]=VA(t)}),e.sort(function(t,e){return t-e}),t.prototype.setDomain.call(this)},e}(dA),$A=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isContinuous=!0,e}return(0,rg.__extends)(e,t),e.prototype.scale=function(t){if((0,ng.isNil)(t))return NaN;var e=this.rangeMin(),r=this.rangeMax();return this.max===this.min?e:e+this.getScalePercent(t)*(r-e)},e.prototype.init=function(){t.prototype.init.call(this);var e=this.ticks,r=(0,ng.head)(e),n=(0,ng.last)(e);r<this.min&&(this.min=r),n>this.max&&(this.max=n),(0,ng.isNil)(this.minLimit)||(this.min=r),(0,ng.isNil)(this.maxLimit)||(this.max=n)},e.prototype.setDomain=function(){var t=(0,ng.getRange)(this.values),e=t.min,r=t.max;(0,ng.isNil)(this.min)&&(this.min=e),(0,ng.isNil)(this.max)&&(this.max=r),this.min>this.max&&(this.min=e,this.max=r)},e.prototype.calculateTicks=function(){var e=this,r=t.prototype.calculateTicks.call(this);return this.nice||(r=(0,ng.filter)(r,function(t){return t>=e.min&&t<=e.max})),r},e.prototype.getScalePercent=function(t){var e=this.max,r=this.min;return(t-r)/(e-r)},e.prototype.getInvertPercent=function(t){return(t-this.rangeMin())/(this.rangeMax()-this.rangeMin())},e}(pA),tM=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="linear",e.isLinear=!0,e}return(0,rg.__extends)(e,t),e.prototype.invert=function(t){var e=this.getInvertPercent(t);return this.min+e*(this.max-this.min)},e.prototype.initCfg=function(){this.tickMethod="wilkinson-extended",this.nice=!1},e}($A);function eM(t,e){var r=Math.E;return e>=0?Math.pow(r,Math.log(e)/t):-1*Math.pow(r,Math.log(-e)/t)}function rM(t,e){return 1===t?1:Math.log(e)/Math.log(t)}function nM(t,e,r){(0,ng.isNil)(r)&&(r=Math.max.apply(null,t));var n=r;return(0,ng.each)(t,function(t){t>0&&t<n&&(n=t)}),n===r&&(n=r/e),n>1&&(n=1),n}var oM=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="log",e}return(0,rg.__extends)(e,t),e.prototype.invert=function(t){var e,r=this.base,n=rM(r,this.max),o=this.rangeMin(),i=this.rangeMax()-o,a=this.positiveMin;if(a){if(0===t)return 0;var s=1/(n-(e=rM(r,a/r)))*i;if(t<s)return t/s*a}else e=rM(r,this.min);var u=(t-o)/i*(n-e)+e;return Math.pow(r,u)},e.prototype.initCfg=function(){this.tickMethod="log",this.base=10,this.tickCount=6,this.nice=!0},e.prototype.setDomain=function(){t.prototype.setDomain.call(this);var e=this.min;if(e<0)throw new Error("When you use log scale, the minimum value must be greater than zero!");0===e&&(this.positiveMin=nM(this.values,this.base,this.max))},e.prototype.getScalePercent=function(t){var e=this.max,r=this.min;if(e===r)return 0;if(t<=0)return 0;var n=this.base,o=this.positiveMin;return o&&(r=1*o/n),t<o?t/o/(rM(n,e)-rM(n,r)):(rM(n,t)-rM(n,r))/(rM(n,e)-rM(n,r))},e}($A),iM=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="pow",e}return(0,rg.__extends)(e,t),e.prototype.invert=function(t){var e=this.getInvertPercent(t),r=this.exponent,n=eM(r,this.max),o=eM(r,this.min),i=e*(n-o)+o,a=i>=0?1:-1;return Math.pow(i,r)*a},e.prototype.initCfg=function(){this.tickMethod="pow",this.exponent=2,this.tickCount=5,this.nice=!0},e.prototype.getScalePercent=function(t){var e=this.max,r=this.min;if(e===r)return 0;var n=this.exponent;return(eM(n,t)-eM(n,r))/(eM(n,e)-eM(n,r))},e}($A),aM=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="time",e}return(0,rg.__extends)(e,t),e.prototype.getText=function(t,e){var r=this.translate(t),n=this.formatter;return n?n(r,e):zA(r,this.mask)},e.prototype.scale=function(e){var r=e;return((0,ng.isString)(r)||(0,ng.isDate)(r))&&(r=this.translate(r)),t.prototype.scale.call(this,r)},e.prototype.translate=function(t){return VA(t)},e.prototype.initCfg=function(){this.tickMethod="time-pretty",this.mask="YYYY-MM-DD",this.tickCount=7,this.nice=!1},e.prototype.setDomain=function(){var t=this.values,e=this.getConfig("min"),r=this.getConfig("max");if((0,ng.isNil)(e)&&(0,ng.isNumber)(e)||(this.min=this.translate(this.min)),(0,ng.isNil)(r)&&(0,ng.isNumber)(r)||(this.max=this.translate(this.max)),t&&t.length){var n=[],o=1/0,i=o,a=0;(0,ng.each)(t,function(t){var e=VA(t);if(isNaN(e))throw new TypeError("Invalid Time: "+t+" in time scale!");o>e?(i=o,o=e):i>e&&(i=e),a<e&&(a=e),n.push(e)}),t.length>1&&(this.minTickInterval=i-o),(0,ng.isNil)(e)&&(this.min=o),(0,ng.isNil)(r)&&(this.max=a)}},e}(tM),sM=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="quantize",e}return(0,rg.__extends)(e,t),e.prototype.invert=function(t){var e=this.ticks,r=e.length,n=this.getInvertPercent(t),o=Math.floor(n*(r-1));if(o>=r-1)return(0,ng.last)(e);if(o<0)return(0,ng.head)(e);var i=e[o],a=o/(r-1);return i+(n-a)/((o+1)/(r-1)-a)*(e[o+1]-i)},e.prototype.initCfg=function(){this.tickMethod="r-pretty",this.tickCount=5,this.nice=!0},e.prototype.calculateTicks=function(){var e=t.prototype.calculateTicks.call(this);return this.nice||((0,ng.last)(e)!==this.max&&e.push(this.max),(0,ng.head)(e)!==this.min&&e.unshift(this.min)),e},e.prototype.getScalePercent=function(t){var e=this.ticks;if(t<(0,ng.head)(e))return 0;if(t>(0,ng.last)(e))return 1;var r=0;return(0,ng.each)(e,function(e,n){if(!(t>=e))return!1;r=n}),r/(e.length-1)},e}($A),uM=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="quantile",e}return(0,rg.__extends)(e,t),e.prototype.initCfg=function(){this.tickMethod="quantile",this.tickCount=5,this.nice=!0},e}(sM),lM={};function cM(t,e){if(function(t){return lM[t]}(t))throw new Error("type '"+t+"' existed.");lM[t]=e}var fM=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="identity",e.isIdentity=!0,e}return(0,rg.__extends)(e,t),e.prototype.calculateTicks=function(){return this.values},e.prototype.scale=function(t){return this.values[0]!==t&&(0,ng.isNumber)(t)?t:this.range[0]},e.prototype.invert=function(t){var e=this.range;return t<e[0]||t>e[1]?NaN:this.values[0]},e}(pA);function hM(t){var e=t.values,r=t.tickInterval,n=t.tickCount,o=t.showLast;if((0,ng.isNumber)(r)){var i=(0,ng.filter)(e,function(t,e){return e%r==0}),a=(0,ng.last)(e);return o&&(0,ng.last)(i)!==a&&i.push(a),i}var s=e.length,u=t.min,l=t.max;if((0,ng.isNil)(u)&&(u=0),(0,ng.isNil)(l)&&(l=e.length-1),!(0,ng.isNumber)(n)||n>=s)return e.slice(u,l+1);if(n<=0||l<=0)return[];for(var c=1===n?s:Math.floor(s/(n-1)),f=[],h=u,p=0;p<n&&!(h>=l);p++)h=Math.min(u+p*c,l),p===n-1&&o?f.push(e[l]):f.push(e[h]);return f}var pM=Math.sqrt(50),dM=Math.sqrt(10),yM=Math.sqrt(2),vM=function(){function t(){this._domain=[0,1]}return t.prototype.domain=function(t){return t?(this._domain=Array.from(t,Number),this):this._domain.slice()},t.prototype.nice=function(t){var e,r;void 0===t&&(t=5);var n,o=this._domain.slice(),i=0,a=this._domain.length-1,s=this._domain[i],u=this._domain[a];return u<s&&(s=(e=[u,s])[0],u=e[1],i=(r=[a,i])[0],a=r[1]),(n=gM(s,u,t))>0?n=gM(s=Math.floor(s/n)*n,u=Math.ceil(u/n)*n,t):n<0&&(n=gM(s=Math.ceil(s*n)/n,u=Math.floor(u*n)/n,t)),n>0?(o[i]=Math.floor(s/n)*n,o[a]=Math.ceil(u/n)*n,this.domain(o)):n<0&&(o[i]=Math.ceil(s*n)/n,o[a]=Math.floor(u*n)/n,this.domain(o)),this},t.prototype.ticks=function(t){return void 0===t&&(t=5),function(t,e,r){var n,o,i,a,s=-1;if(r=+r,(t=+t)==(e=+e)&&r>0)return[t];(n=e<t)&&(o=t,t=e,e=o);if(0===(a=gM(t,e,r))||!isFinite(a))return[];if(a>0)for(t=Math.ceil(t/a),e=Math.floor(e/a),i=new Array(o=Math.ceil(e-t+1));++s<o;)i[s]=(t+s)*a;else for(t=Math.floor(t*a),e=Math.ceil(e*a),i=new Array(o=Math.ceil(t-e+1));++s<o;)i[s]=(t-s)/a;n&&i.reverse();return i}(this._domain[0],this._domain[this._domain.length-1],t||5)},t}();function gM(t,e,r){var n=(e-t)/Math.max(0,r),o=Math.floor(Math.log(n)/Math.LN10),i=n/Math.pow(10,o);return o>=0?(i>=pM?10:i>=dM?5:i>=yM?2:1)*Math.pow(10,o):-Math.pow(10,-o)/(i>=pM?10:i>=dM?5:i>=yM?2:1)}function mM(t,e,r){return("ceil"===r?Math.ceil(t/e):"floor"===r?Math.floor(t/e):Math.round(t/e))*e}function bM(t,e,r){var n=mM(t,r,"floor"),o=mM(e,r,"ceil");n=(0,ng.fixedBase)(n,r),o=(0,ng.fixedBase)(o,r);for(var i=[],a=Math.max((o-n)/(Math.pow(2,12)-1),r),s=n;s<=o;s+=a){var u=(0,ng.fixedBase)(s,a);i.push(u)}return{min:n,max:o,ticks:i}}function wM(t,e,r){var n,o=t.minLimit,i=t.maxLimit,a=t.min,s=t.max,u=t.tickCount,l=void 0===u?5:u,c=(0,ng.isNil)(o)?(0,ng.isNil)(e)?a:e:o,f=(0,ng.isNil)(i)?(0,ng.isNil)(r)?s:r:i;if(c>f&&(f=(n=[c,f])[0],c=n[1]),l<=2)return[c,f];for(var h=(f-c)/(l-1),p=[],d=0;d<l;d++)p.push(c+h*d);return p}function SM(t){return Math.abs(t)<1e-15?t:parseFloat(t.toFixed(15))}var xM=[1,5,2,2.5,4,3],_M=100*Number.EPSILON;function EM(t,e,r,n,o,i){var a=(0,ng.size)(e),s=(0,ng.indexOf)(e,t),u=0,l=function(t,e){return(t%e+e)%e}(n,i);return(l<_M||i-l<_M)&&n<=0&&o>=0&&(u=1),1-s/(a-1)-r+u}function OM(t,e,r){var n=(0,ng.size)(e);return 1-(0,ng.indexOf)(e,t)/(n-1)-r+1}function PM(t,e,r,n,o,i){var a=(t-1)/(i-o),s=(e-1)/(Math.max(i,n)-Math.min(r,o));return 2-Math.max(a/s,s/a)}function kM(t,e){return t>=e?2-(t-1)/(e-1):1}function CM(t,e,r,n){var o=e-t;return 1-.5*(Math.pow(e-n,2)+Math.pow(t-r,2))/Math.pow(.1*o,2)}function TM(t,e,r){var n=e-t;if(r>n){var o=(r-n)/2;return 1-Math.pow(o,2)/Math.pow(.1*n,2)}return 1}function AM(t,e,r,n,o,i){void 0===r&&(r=5),void 0===n&&(n=!0),void 0===o&&(o=xM),void 0===i&&(i=[.25,.2,.5,.05]);var a=r<0?0:Math.round(r);if(Number.isNaN(t)||Number.isNaN(e)||"number"!=typeof t||"number"!=typeof e||!a)return{min:0,max:0,ticks:[]};if(e-t<1e-15||1===a)return{min:t,max:e,ticks:[t]};if(e-t>1e148){var s=(e-t)/(S=r||5);return{min:t,max:e,ticks:Array(S).fill(null).map(function(e,r){return SM(t+s*r)})}}for(var u={score:-2,lmin:0,lmax:0,lstep:0},l=1;l<1/0;){for(var c=0;c<o.length;c+=1){var f=o[c],h=OM(f,o,l);if(i[0]*h+i[1]+i[2]+i[3]<u.score){l=1/0;break}for(var p=2;p<1/0;){var d=kM(p,a);if(i[0]*h+i[1]+i[2]*d+i[3]<u.score)break;for(var y=(e-t)/(p+1)/l/f,v=Math.ceil(Math.log10(y));v<1/0;){var g=l*f*Math.pow(10,v),m=TM(t,e,g*(p-1));if(i[0]*h+i[1]*m+i[2]*d+i[3]<u.score)break;var b=Math.floor(e/g)*l-(p-1)*l,w=Math.ceil(t/g)*l;if(b<=w)for(var S=w-b,x=0;x<=S;x+=1){var _=(b+x)*(g/l),E=_+g*(p-1),O=g,P=EM(f,o,l,_,E,O),k=CM(t,e,_,E),C=PM(p,a,t,e,_,E),T=i[0]*P+i[1]*k+i[2]*C+1*i[3];T>u.score&&(!n||_<=t&&E>=e)&&(u.lmin=_,u.lmax=E,u.lstep=O,u.score=T)}v+=1}p+=1}}l+=1}var A=SM(u.lmax),M=SM(u.lmin),j=SM(u.lstep),I=Math.floor(function(t){return Math.round(1e12*t)/1e12}((A-M)/j))+1,N=new Array(I);N[0]=SM(M);for(c=1;c<I;c++)N[c]=SM(N[c-1]+j);return{min:Math.min(t,(0,ng.head)(N)),max:Math.max(e,(0,ng.last)(N)),ticks:N}}function MM(t,e,r){if(void 0===r&&(r=5),t===e)return{max:e,min:t,ticks:[t]};var n=r<0?0:Math.round(r);if(0===n)return{max:e,min:t,ticks:[]};var o=(e-t)/n,i=Math.pow(10,Math.floor(Math.log10(o))),a=i;2*i-o<1.5*(o-a)&&5*i-o<2.75*(o-(a=2*i))&&10*i-o<1.5*(o-(a=5*i))&&(a=10*i);for(var s=Math.ceil(e/a),u=Math.floor(t/a),l=Math.max(s*a,e),c=Math.min(u*a,t),f=Math.floor((l-c)/a)+1,h=new Array(f),p=0;p<f;p++)h[p]=SM(c+p*a);return{min:c,max:l,ticks:h}}function jM(t,e){var r=t.length*e;return 1===e?t[t.length-1]:0===e?t[0]:r%1!=0?t[Math.ceil(r)-1]:t.length%2==0?(t[r-1]+t[r])/2:t[r]}function IM(t){return new Date(t).getFullYear()}function NM(t){return new Date(t,0,1).getTime()}function LM(t){return new Date(t).getMonth()}function RM(t,e){return new Date(t,e,1).getTime()}hA("cat",hM),hA("time-cat",function(t){return hM((0,rg.__assign)({showLast:!0},t))}),hA("wilkinson-extended",function(t){var e=t.min,r=t.max,n=t.tickCount,o=t.nice,i=t.tickInterval,a=t.minLimit,s=t.maxLimit,u=AM(e,r,n,o).ticks;return(0,ng.isNil)(a)&&(0,ng.isNil)(s)?i?bM(e,r,i).ticks:u:wM(t,(0,ng.head)(u),(0,ng.last)(u))}),hA("r-pretty",function(t){var e=t.min,r=t.max,n=t.tickCount,o=t.tickInterval,i=t.minLimit,a=t.maxLimit,s=MM(e,r,n).ticks;return(0,ng.isNil)(i)&&(0,ng.isNil)(a)?o?bM(e,r,o).ticks:s:wM(t,(0,ng.head)(s),(0,ng.last)(s))}),hA("time",function(t){var e=t.min,r=t.max,n=t.minTickInterval,o=t.tickInterval,i=t.tickCount;if(o)i=Math.ceil((r-e)/o);else{var a=(r-e)/(o=QA(e,r,i)[1])/i;a>1&&(o*=Math.ceil(a)),n&&o<n&&(o=n)}o=Math.max(Math.floor((r-e)/(Math.pow(2,12)-1)),o);for(var s=[],u=e;u<r+o;u+=o)s.push(u);return s}),hA("time-pretty",function(t){var e=t.min,r=t.max,n=t.minTickInterval,o=t.tickCount,i=t.tickInterval,a=[];i||(i=(r-e)/o,n&&i<n&&(i=n)),i=Math.max(Math.floor((r-e)/(Math.pow(2,12)-1)),i);var s=IM(e);if(i>JA)for(var u=IM(r),l=Math.ceil(i/JA),c=s;c<=u+l;c+=l)a.push(NM(c));else if(i>XA){var f=Math.ceil(i/XA),h=LM(e),p=function(t,e){var r=IM(t),n=IM(e),o=LM(t);return 12*(n-r)+(LM(e)-o)%12}(e,r);for(c=0;c<=p+f;c+=f)a.push(RM(s,c+h))}else if(i>YA){var d=(b=new Date(e)).getFullYear(),y=b.getMonth(),v=b.getDate(),g=Math.ceil(i/YA),m=function(t,e){return Math.ceil((e-t)/YA)}(e,r);for(c=0;c<m+g;c+=g)a.push(new Date(d,y,v+c).getTime())}else if(i>qA){d=(b=new Date(e)).getFullYear(),y=b.getMonth(),g=b.getDate();var b,w=b.getHours(),S=Math.ceil(i/qA),x=function(t,e){return Math.ceil((e-t)/qA)}(e,r);for(c=0;c<=x+S;c+=S)a.push(new Date(d,y,g,w+c).getTime())}else if(i>WA){var _=function(t,e){return Math.ceil((e-t)/6e4)}(e,r),E=Math.ceil(i/WA);for(c=0;c<=_+E;c+=E)a.push(e+c*WA)}else{var O=i;O<HA&&(O=HA);var P=Math.floor(e/HA)*HA,k=Math.ceil((r-e)/HA),C=Math.ceil(O/HA);for(c=0;c<k+C;c+=C)a.push(P+c*HA)}return a.length>=512&&console.warn("Notice: current ticks length("+a.length+') >= 512, may cause performance issues, even out of memory. Because of the configure "tickInterval"(in milliseconds, current is '+i+") is too small, increase the value to solve the problem!"),a}),hA("log",function(t){var e,r=t.base,n=t.tickCount,o=t.min,i=t.max,a=t.values,s=rM(r,i);if(o>0)e=Math.floor(rM(r,o));else{var u=nM(a,r,i);e=Math.floor(rM(r,u))}for(var l=s-e,c=Math.ceil(l/n),f=[],h=e;h<s+c;h+=c)f.push(Math.pow(r,h));return o<=0&&f.unshift(0),f}),hA("pow",function(t){var e=t.exponent,r=t.tickCount,n=Math.ceil(eM(e,t.max));return MM(Math.floor(eM(e,t.min)),n,r).ticks.map(function(t){var r=t>=0?1:-1;return Math.pow(t,e)*r})}),hA("quantile",function(t){var e=t.tickCount,r=t.values;if(!r||!r.length)return[];for(var n=r.slice().sort(function(t,e){return t-e}),o=[],i=0;i<e;i++){var a=i/(e-1);o.push(jM(n,a))}return o}),hA("d3-linear",function(t){var e=t.min,r=t.max,n=t.tickInterval,o=t.minLimit,i=t.maxLimit,a=function(t){var e=t.min,r=t.max,n=t.nice,o=t.tickCount,i=new vM;return i.domain([e,r]),n&&i.nice(o),i.ticks(o)}(t);return(0,ng.isNil)(o)&&(0,ng.isNil)(i)?n?bM(e,r,n).ticks:a:wM(t,(0,ng.head)(a),(0,ng.last)(a))}),cM("cat",dA),cM("category",dA),cM("identity",fM),cM("linear",tM),cM("log",oM),cM("pow",iM),cM("time",aM),cM("timeCat",ZA),cM("quantize",sM),cM("quantile",uM);var DM=function(t,e,r){if(r||2===arguments.length)for(var n,o=0,i=e.length;o<i;o++)!n&&o in e||(n||(n=Array.prototype.slice.call(e,0,o)),n[o]=e[o]);return t.concat(n||Array.prototype.slice.call(e))};function BM(t){return function(t){return(0,ng.map)(t,function(t,e){return[0===e?"M":"L",t[0],t[1]]})}(t)}function FM(t,e,r,n){void 0===n&&(n=!0);var o=new tM({values:t}),i=new dA({values:(0,ng.map)(t,function(t,e){return e})}),a=(0,ng.map)(t,function(t,n){return[i.scale(n)*e,r-o.scale(t)*r]});return n?function(t){if(t.length<=2)return BM(t);var e=[];(0,ng.each)(t,function(t){(0,ng.isEqual)(t,e.slice(e.length-2))||e.push(t[0],t[1])});var r=R_(e,!1),n=(0,ng.head)(t),o=n[0],i=n[1];return r.unshift(["M",o,i]),r}(a):BM(a)}function GM(t,e,r,n){var o=DM([],t,!0),i=function(t,e){var r=new tM({values:t}),n=Math.max(0,r.min);return e-r.scale(n)*e}(n,r);return o.push(["L",e,i]),o.push(["L",0,i]),o.push(["Z"]),o}function UM(t){var e,r,n,o,i=t.x,a=t.y,s=t.y0,u=t.size;(0,ng.isArray)(a)?(e=a[0],r=a[1]):(e=s,r=a),(0,ng.isArray)(i)?(n=i[0],o=i[1]):(n=i-u/2,o=i+u/2);var l=[{x:n,y:e},{x:n,y:r}];return l.push({x:o,y:r},{x:o,y:e}),l}var zM=function(){return(zM=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},VM={stroke:"#C5C5C5",strokeOpacity:.85},HM={fill:"#CACED4",opacity:.85},WM=function(){function t(t){var e=t.x,r=void 0===e?0:e,n=t.y,o=void 0===n?0:n,i=t.width,a=void 0===i?200:i,s=t.height,u=void 0===s?26:s,l=t.smooth,c=void 0===l||l,f=t.isArea,h=void 0!==f&&f,p=t.data,d=void 0===p?[]:p,y=t.lineStyle,v=t.areaStyle,g=t.group,m=t.interval,b=void 0===m?null:m;this.group=g,this.x=r,this.y=o,this.width=a,this.height=u,this.data=d,this.smooth=c,this.isArea=h,this.lineStyle=Object.assign({},VM,y),this.areaStyle=Object.assign({},HM,v),this.intervalConfig=b,this.renderLine()}return t.prototype.renderLine=function(){var t=this,e=t.x,r=t.y,n=t.width,o=t.height,i=(t.barWidth,t.data),a=t.smooth,s=t.isArea,u=t.lineStyle,l=t.areaStyle,c=this.group.addGroup({name:"trend-group"});if(i){var f=FM(i,n,o,a);if(c.addShape("path",{attrs:zM({path:f},u),name:"trend-line"}),s){var h=GM(f,n,o,i);c.addShape("path",{attrs:zM({path:h},l),name:"trend-area"})}}this.intervalConfig&&c.addShape("path",{attrs:zM({path:function(t,e,r,n){void 0===n&&(n=5);for(var o=new tM({values:t}),i=new dA({values:(0,ng.map)(t,function(t,e){return e})}),a=(0,ng.map)(t,function(t,n){return[i.scale(n)*e,r-o.scale(t)*r]}),s=[],u=0;u<a.length;u++){var l=a[u],c=UM({x:l[0],y:l[1],y0:r,size:n});s.push.apply(s,c)}return function(t,e){void 0===e&&(e=!0);var r=[],n=t[0];r.push(["M",n.x,n.y]);for(var o=1,i=t.length;o<i;o++)r.push(["L",t[o].x,t[o].y]);return e&&(r.push(["L",n.x,n.y]),r.push(["z"])),r}(s)}(this.intervalConfig.data,n,o,this.intervalConfig.style.barWidth)},this.intervalConfig.style),name:"trend-interval"}),c.move(e,r)},t.prototype.destory=function(){this.group.destroy()},t}(),qM=function(){return(qM=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},YM={fill:"#1890ff",stroke:"#1890ff",type:"trend",radius:2,opacity:1,cursor:"ew-resize",highLightFill:"#0050b3"},XM={fill:"#fff",stroke:"#1890ff",radius:2,opacity:1,cursor:"ew-resize",highLightFill:"#0050b3"},JM=function(){function t(t){var e=t.group,r=t.name,n=t.type,o=t.x,i=void 0===o?0:o,a=t.y,s=void 0===a?0:a,u=t.width,l=void 0===u?2:u,c=t.height,f=void 0===c?24:c,h=t.style,p=void 0===h?{}:h;this.group=e,this.name=r,this.handleType=n,this.x=i,this.y=s,this.width=l,this.height=f,"trend"===n?this.style=qM(qM({},YM),p):"simple"===n&&(this.style=qM(qM({},XM),p)),this.renderHandle()}return t.prototype.setX=function(t){this.setXY(t,void 0)},t.prototype.setY=function(t){this.setXY(void 0,t)},t.prototype.setXY=function(t,e){(0,ng.isNumber)(t)&&(this.x=t),(0,ng.isNumber)(e)&&(this.y=e),this.updateXY()},t.prototype.renderHandle=function(){var t=this.width,e=this.height,r=this.style,n=this.name,o=r.fill,i=r.stroke,a=r.radius,s=r.opacity,u=r.cursor;this.handleGroup=this.group.addGroup(),"trend"===this.handleType?(this.verticalLine=this.handleGroup.addShape("rect",{attrs:{x:0,y:0,width:t,height:e,fill:o,stroke:i,radius:a,opacity:s,cursor:u},name:"".concat(n,"-handler")}),this.topCircle=this.handleGroup.addShape("circle",{attrs:{x:t/2,y:0,r:2*t,fill:o,stroke:i,radius:a,opacity:s,cursor:u,lineAppendWidth:12},name:"".concat(n,"-handler")}),this.bottomCircle=this.handleGroup.addShape("circle",{attrs:{x:t/2,y:e,r:2*t,fill:o,stroke:i,radius:a,opacity:s,cursor:u},name:"".concat(n,"-handler")})):"simple"===this.handleType&&(this.topCircle=this.handleGroup.addShape("circle",{attrs:{x:t/2,y:e/2,r:2*t,fill:o,stroke:i,radius:a,opacity:s,cursor:u,lineWidth:2},name:"".concat(n,"-handler")})),this.updateXY(),"trend"===this.handleType?this.bindTrendEvents():"simple"===this.handleType&&this.bindSimpleEvents()},t.prototype.bindSimpleEvents=function(){var t=this,e=this.name;this.handleGroup.on("".concat(e,"-handler:mouseenter"),function(){var e=t.style.highLightFill;t.topCircle.attr("fill",e)}),this.handleGroup.on("".concat(e,"-handler:mouseleave"),function(){var e=t.style.fill;t.topCircle.attr("fill",e)})},t.prototype.bindTrendEvents=function(){var t=this,e=this.name;this.handleGroup.on("".concat(e,"-handler:mouseenter"),function(){var e=t.style.highLightFill;t.verticalLine.attr("fill",e),t.topCircle.attr("fill",e),t.bottomCircle.attr("fill",e)}),this.handleGroup.on("".concat(e,"-handler:mouseleave"),function(){var e=t.style.fill;t.verticalLine.attr("fill",e),t.topCircle.attr("fill",e),t.bottomCircle.attr("fill",e)})},t.prototype.show=function(){this.handleGroup.show()},t.prototype.hide=function(){this.handleGroup.hide()},t.prototype.updateXY=function(){this.handleGroup.setMatrix([1,0,0,0,1,0,this.x,this.y,1])},t}(),KM=function(){return(KM=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},QM=hg,ZM={fill:"#416180",opacity:.05},$M={fill:"#416180",opacity:.15,radius:5},tj={fill:"#5B8FF9",opacity:.3,cursor:"grab"},ej={width:2,height:24},rj={textBaseline:"middle",fill:"#000",opacity:.45},nj={textAlign:"center",textBaseline:"top",fill:"#607889",opacity:.35},oj={lineWidth:1,stroke:"#ccc"},ij=function(){function t(t){var e=this;this.prevX=0,this.onMouseDown=function(t){return function(r){e.currentHandler=t;var n=r.originalEvent;n.stopPropagation(),n.preventDefault(),e.prevX=(0,ng.get)(n,"touches.0.pageX",n.pageX);var o=e.canvas.get("container");o.addEventListener("mousemove",e.onMouseMove),o.addEventListener("mouseup",e.onMouseUp),o.addEventListener("mouseleave",e.onMouseUp),o.addEventListener("touchmove",e.onMouseMove),o.addEventListener("touchend",e.onMouseUp),o.addEventListener("touchcancel",e.onMouseUp)}},this.onMouseMove=function(t){t.stopPropagation(),t.preventDefault();var r=(0,ng.get)(t,"touches.0.pageX",t.pageX),n=r-e.prevX,o=e.adjustOffsetRange(n/e.width);e.updateStartEnd(o),e.updateUI(),e.prevX=r},this.onMouseUp=function(){e.currentHandler&&(e.currentHandler=void 0);var t=e.canvas.get("container");t&&(t.removeEventListener("mousemove",e.onMouseMove),t.removeEventListener("mouseup",e.onMouseUp),t.removeEventListener("mouseleave",e.onMouseUp),t.removeEventListener("touchmove",e.onMouseMove),t.removeEventListener("touchend",e.onMouseUp),t.removeEventListener("touchcancel",e.onMouseUp))};var r=t.x,n=void 0===r?0:r,o=t.y,i=void 0===o?0:o,a=t.width,s=void 0===a?100:a,u=t.height,l=t.padding,c=void 0===l?10:l,f=t.trendCfg,h=t.controllerCfg,p=void 0===h?{speed:1}:h,d=t.backgroundStyle,y=void 0===d?{}:d,v=t.foregroundStyle,g=void 0===v?{}:v,m=t.handlerStyle,b=void 0===m?{}:m,w=t.textStyle,S=void 0===w?{}:w,x=t.start,_=void 0===x?0:x,E=t.end,O=void 0===E?1:E,P=t.minText,k=void 0===P?"":P,C=t.maxText,T=void 0===C?"":C,A=t.group,M=t.graph,j=t.canvas,I=t.tick,N=void 0===I?{tickLabelStyle:{},tickLineStyle:{},tickLabelFormatter:function(t){return t},ticks:[]}:I,L=t.type;this.graph=M,this.canvas=j,this.group=A,this.timeBarType=L,this.x=n,this.y=i,this.width=s,this.height=u,this.padding=c,this.ticks=N.ticks,this.trendCfg=f,this.controllerCfg=p,this.currentSpeed=p.speed||1,this.tickLabelFormatter=N.tickLabelFormatter,"trend"===L?this.backgroundStyle=KM(KM({},ZM),y):"simple"===L&&(this.backgroundStyle=KM(KM({},$M),y)),this.foregroundStyle=KM(KM({},tj),g),this.handlerStyle=KM(KM({},ej),b),this.textStyle=KM(KM({},rj),S),this.tickLabelStyle=KM(KM({},nj),N.tickLabelStyle),this.tickLineStyle=KM(KM({},oj),N.tickLineStyle),this.currentMode=p.defaultTimeType||oA.RANGE,this.start=_,this.end=O,this.minText=k,this.maxText=T,this.fontFamily="undefined"!=typeof window&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif",this.renderSlider()}return t.prototype.update=function(t){var e=t.x,r=t.y,n=t.width,o=t.height,i=t.minText,a=t.maxText,s=t.start,u=t.end;this.start=Math.min(1,Math.max(s,0)),this.end=Math.min(1,Math.max(u,0)),(0,ng.assign)(this,{x:e,y:r,width:n,height:o,minText:i,maxText:a}),this.updateUI()},t.prototype.setText=function(t,e){this.minTextShape.attr("text",t),this.maxTextShape.attr("text",e)},t.prototype.renderSlider=function(){var t=this,e=this.width,r=this.height,n=this.timeBarType;if("trend"===n&&(0,ng.size)((0,ng.get)(this.trendCfg,"data"))){var o=new WM(KM(KM({x:this.x,y:this.y,width:e,height:r},this.trendCfg),{group:this.group}));this.trendComponent=o}var i=this.group.addGroup({name:"slider-group"});i.addShape("rect",{attrs:KM({x:0,y:0,width:e,height:r},this.backgroundStyle),name:"background"});var a=this.group.addGroup();"trend"===n?(this.minTextShape=a.addShape("text",{attrs:KM({x:0,y:r/2+this.y,textAlign:"right",text:this.minText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif",stroke:"#fff",lineWidth:5},this.textStyle),capture:!1,name:"min-text-shape"}),this.maxTextShape=a.addShape("text",{attrs:KM({y:r/2+this.y,textAlign:"left",text:this.maxText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif",stroke:"#fff",lineWidth:5},this.textStyle),capture:!1,name:"max-text-shape"})):(this.minTextShape=a.addShape("text",{attrs:KM({x:0,y:this.y-10,textAlign:"center",text:this.minText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif",stroke:"#fff",lineWidth:5},this.textStyle),capture:!1,name:"min-text-shape"}),this.maxTextShape=a.addShape("text",{attrs:KM({y:this.y-10,textAlign:"center",text:this.maxText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif",stroke:"#fff",lineWidth:5},this.textStyle),capture:!1,name:"max-text-shape"})),this.foregroundShape=this.group.addGroup().addShape("rect",{attrs:KM({x:0,y:this.y,height:r},this.foregroundStyle),name:"foreground-shape"}),this.foregroundShape.on("mousedown",function(t){t.target.attr("cursor","grabbing")}),this.foregroundShape.on("mouseup",function(e){e.target.attr("cursor",t.foregroundStyle.cursor||"grab")});var s=(0,ng.get)(this.handlerStyle,"width",2),u=(0,ng.get)(this.handlerStyle,"height",24),l=this.group.addGroup({name:"minHandlerShape"});this.minHandlerShape=new JM({name:"minHandlerShape",group:l,type:n,x:this.x,y:this.y,width:s,height:u,style:this.handlerStyle});var c=this.group.addGroup({name:"maxHandlerShape"});this.maxHandlerShape=new JM({name:"maxHandlerShape",group:c,type:n,x:this.x,y:this.y,width:s,height:u,style:this.handlerStyle});var f=this.ticks,h=e/(f.length-1);this.tickPosList=[],this.textList&&this.textList.length&&this.textList.forEach(function(t){t.destroy()});var p=-1/0,d=this.tickLabelStyle.rotate;delete this.tickLabelStyle.rotate,this.textList=f.map(function(e,n){var o;t.tickPosList.push(t.x+n*h),t.tickLabelFormatter?(o=t.tickLabelFormatter(e),!(0,ng.isString)(o)&&o&&(o=e.date)):o=e.date;var i=t.x+n*h,a=t.y+r+5,s=t.group.addShape("text",{attrs:KM({x:i,y:a,text:o,fontFamily:t.fontFamily||"Arial, sans-serif"},t.tickLabelStyle),name:"tick-label"});if((0,ng.isNumber)(d)&&n!==f.length-1){var u=QM([1,0,0,0,1,0,0,0,1],[["t",-i,-a],["r",d],["t",i-5,a+2]]);s.attr({textAlign:"left",matrix:u})}0===n?s.attr({textAlign:"left"}):n!==f.length-1&&s.attr({textAlign:"right"});var l=t.group.addShape("line",{attrs:KM({x1:t.x+n*h,y1:t.y+r+2,x2:t.x+n*h,y2:t.y+r+6},t.tickLineStyle),name:"tick-line"});l.toBack();var c=s.getBBox();return c.minX>p?(s.show(),l.show(),p=c.minX+c.width+10):(s.hide(),l.hide()),s}),this.controllerBtnGroup=new iA(KM({group:this.group,x:this.x,y:this.y+r+25,width:e,height:35},this.controllerCfg)),this.updateStartEnd(0),this.updateUI(),i.move(this.x,this.y),this.bindEvents(),this.currentMode===oA.SINGLE&&(this.minHandlerShape.hide(),this.foregroundShape.hide(),this.minTextShape.hide())},t.prototype.bindEvents=function(){var t=this,e=this.group.find(function(t){return"minHandlerShape"===t.get("name")});e&&(e.on("minHandlerShape-handler:mousedown",this.onMouseDown(this.minHandlerShape)),e.on("minHandlerShape-handler:touchstart",this.onMouseDown(this.minHandlerShape)));var r=this.group.find(function(t){return"maxHandlerShape"===t.get("name")});r&&(r.on("maxHandlerShape-handler:mousedown",this.onMouseDown(this.maxHandlerShape)),r.on("maxHandlerShape-handler:touchstart",this.onMouseDown(this.maxHandlerShape))),this.foregroundShape.on("mousedown",this.onMouseDown(this.foregroundShape)),this.foregroundShape.on("touchstart",this.onMouseDown(this.foregroundShape)),this.group.on("".concat("playPauseBtn",":click"),function(){t.isPlay=!t.isPlay,t.currentHandler=t.maxHandlerShape,t.changePlayStatus()}),this.group.on("".concat("nextStepBtn",":click"),function(){t.currentHandler=t.maxHandlerShape,t.updateStartEnd(.01),t.updateUI()}),this.group.on("".concat("preStepBtn",":click"),function(){t.currentHandler=t.maxHandlerShape,t.updateStartEnd(-.01),t.updateUI()}),this.group.on("timebarConfigChanged",function(e){var r=e.type,n=e.speed;t.currentSpeed=n,t.currentMode=r,r===oA.SINGLE?(t.minHandlerShape.hide(),t.foregroundShape.hide(),t.minTextShape.hide()):r===oA.RANGE&&(t.minHandlerShape.show(),t.foregroundShape.show(),t.minTextShape.show())})},t.prototype.adjustTickIndex=function(t){for(var e=0;e<this.tickPosList.length-1;e++)if(this.tickPosList[e]<=t&&t<=this.tickPosList[e+1])return Math.abs(this.tickPosList[e]-t)<Math.abs(t-this.tickPosList[e+1])?e:e+1;return 0},t.prototype.adjustOffsetRange=function(t){switch(this.currentHandler){case this.minHandlerShape:var e=0-this.start,r=1-this.start;return Math.min(r,Math.max(e,t));case this.maxHandlerShape:e=0-this.end,r=1-this.end;return Math.min(r,Math.max(e,t));case this.foregroundShape:e=0-this.start,r=1-this.end;return Math.min(r,Math.max(e,t));default:return 0}},t.prototype.updateStartEnd=function(t){var e=this.ticks[this.adjustTickIndex(this.start*this.width)],r=this.ticks[this.adjustTickIndex(this.end*this.width)];if(!this.currentHandler)return this.minText=this.tickLabelFormatter?this.tickLabelFormatter(e):null===e||void 0===e?void 0:e.date,void(this.maxText=this.tickLabelFormatter?this.tickLabelFormatter(r):null===r||void 0===r?void 0:r.date);switch(this.currentHandler){case this.minHandlerShape:this.maxText=this.maxTextShape.attr("text"),this.start+=t,this.minText=this.tickLabelFormatter?this.tickLabelFormatter(e):e.date;break;case this.maxHandlerShape:this.minText=this.minTextShape.attr("text"),this.end+=t,this.maxText=this.tickLabelFormatter?this.tickLabelFormatter(r):r.date;break;case this.foregroundShape:this.start+=t,this.end+=t,this.minText=this.tickLabelFormatter?this.tickLabelFormatter(e):e.date,this.maxText=this.tickLabelFormatter?this.tickLabelFormatter(r):r.date}},t.prototype.updateUI=function(){var t=this;this.start<0&&(this.start=0),this.start>1&&(this.start=1),this.end>1&&(this.end=1),this.end<0&&(this.end=0);var e=this.x+this.start*this.width,r=this.x+this.end*this.width;this.foregroundShape.attr("x",e),this.foregroundShape.attr("width",r-e);var n=(0,ng.get)(this.handlerStyle,"width",2);this.setText(this.minText,this.maxText);var o=this.dodgeText([e,r]),i=o[0],a=o[1];this.minHandlerShape.setX(e-n/2),(0,ng.each)(i,function(e,r){return t.minTextShape.attr(r,e)}),this.maxHandlerShape.setX(r-n/2),(0,ng.each)(a,function(e,r){return t.maxTextShape.attr(r,e)}),this.currentMode===oA.RANGE?this.graph.emit("valuechange",{value:[this.start,this.end].sort()}):this.currentMode===oA.SINGLE&&this.graph.emit("valuechange",{value:[this.end,this.end]})},t.prototype.dodgeText=function(t){var e,r,n=(0,ng.get)(this.handlerStyle,"width",2),o=this.minTextShape,i=this.maxTextShape,a=t[0],s=t[1],u=!1;a>s&&(a=(e=[s,a])[0],s=e[1],o=(r=[i,o])[0],i=r[1],u=!0);var l=o.getBBox(),c=i.getBBox(),f=null,h=null;return"trend"===this.timeBarType?(f=a-l.width<this.x+2?{x:a+n/2+2,textAlign:"left"}:{x:a-n/2-2,textAlign:"right"},h=s+c.width>this.x+this.width?{x:s-n/2-2,textAlign:"right"}:{x:s+n/2+2,textAlign:"left"}):"simple"===this.timeBarType&&(f=o.attr("x")>l.width?{x:a,textAlign:"center"}:{x:a,textAlign:"left"},h=i.attr("x")>this.width-c.width?{x:s,textAlign:"right"}:{x:s,textAlign:"center"}),u?[h,f]:[f,h]},t.prototype.startPlay=function(){var t=this;return"undefined"!=typeof window?window.requestAnimationFrame(function(){var e=t,r=e.ticks,n=e.width,o=t.currentSpeed,i=n/r.length/(1e3*(10-o)/60),a=t.adjustOffsetRange(i/t.width);t.updateStartEnd(a),t.updateUI(),t.isPlay&&(t.playHandler=t.startPlay())}):void 0},t.prototype.changePlayStatus=function(t){void 0===t&&(t=!0),this.controllerBtnGroup.playButton.update({isPlay:this.isPlay}),this.isPlay?(this.playHandler=this.startPlay(),this.graph.emit("timebarstartplay",null)):this.playHandler&&("undefined"!=typeof window&&window.cancelAnimationFrame(this.playHandler),t&&this.graph.emit("timebarendplay",null))},t.prototype.destory=function(){this.graph.off("valuechange",function(){});var t=this.group,e=t.find(function(t){return"minHandlerShape"===t.get("name")});e&&(e.off("minHandlerShape-handler:mousedown"),e.off("minHandlerShape-handler:touchstart"),e.destroy());var r=t.find(function(t){return"maxHandlerShape"===t.get("name")});r&&(r.off("maxHandlerShape-handler:mousedown"),r.off("maxHandlerShape-handler:touchstart"),r.destroy()),this.foregroundShape.off("mousedown"),this.foregroundShape.off("touchstart"),this.foregroundShape.destroy(),t.off("".concat("playPauseBtn",":click")),t.off("".concat("nextStepBtn",":click")),t.off("".concat("preStepBtn",":click")),t.off("timebarConfigChanged"),t.destroy(),this.trendComponent&&this.trendComponent.destory()},t}(),aj=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),sj=function(){return(sj=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},uj=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(t);o<n.length;o++)e.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(t,n[o])&&(r[n[o]]=t[n[o]])}return r},lj=function(t){function e(e){var r=t.call(this,e)||this;return r.afterrenderListener=function(t){return r.filterData({})},r.valueChangeListener=(0,ng.throttle)(function(t){return r.filterData(t)},200,{trailing:!0,leading:!0}),r.changeData=function(t){var e=r.get("graph");r.cacheGraphData=e.get("data"),r.filterData({})},r}return aj(e,t),e.prototype.getDefaultCfgs=function(){return{container:null,className:"g6-component-timebar",padding:10,type:"trend",trend:{data:[],isArea:!1,smooth:!0},controllerCfg:{speed:1,loop:!1},slider:{start:.1,end:.9,minText:"min",maxText:"max"},tick:{start:.1,end:.9,data:[]},textStyle:{},filterEdge:!1,filterItemTypes:["node"],containerCSS:{},putInGraphContainer:!0}},e.prototype.initContainer=function(){var t,e,r=this.get("graph"),n=this._cfgs,o=n.width,i=n.height,a=n.putInGraphContainer,s=this.get("className")||"g6-component-timebar",u=this.get("container");(u?((0,ng.isString)(u)&&(u=document.getElementById(u)),t=u):ST(t=Ek("<div class='".concat(s,"'></div>")),{position:"relative"}),a)&&this.get("graph").get("container").appendChild(t);this.set("timeBarContainer",t),e="SVG"===r.get("renderer")?new _k({container:t,width:o,height:i}):new jP({container:t,width:o,height:i}),this.get("containerCSS")&&ST(t,this.get("containerCSS")),this.set("canvas",e)},e.prototype.init=function(){this.initContainer();var t=this.get("canvas").addGroup({name:"timebar-group"});this.set("timeBarGroup",t),this.renderTrend(),this.initEvent();var e="undefined"!=typeof window&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif";this.set("fontFamily",e)},e.prototype.play=function(){this.togglePlay(!0)},e.prototype.pause=function(){this.togglePlay(!1)},e.prototype.togglePlay=function(t){var e=this.get("timebar");e&&(e.isPlay=!!t,e.changePlayStatus())},e.prototype.renderTrend=function(){var t=this,e=this._cfgs,r=e.width,n=e.x,o=e.y,i=e.padding,a=e.type,s=e.trend,u=e.slider,l=e.controllerCfg,c=e.textStyle,f=e.tick,h=e.backgroundStyle,p=e.foregroundStyle,d=s.data,y=uj(s,["data"]),v=r-2*i,g="trend"===a?26:4,m=this.get("graph"),b=this.get("timeBarGroup"),w=this.get("canvas"),S=null;if("trend"===a||"simple"===a){var x=this.get("getValue");S=new ij(sj(sj({graph:m,canvas:w,group:b,type:a,x:n+i,y:"trend"===a?o+i:o+i+15,width:v,height:g,padding:i,backgroundStyle:h,foregroundStyle:p,trendCfg:sj(sj({},y),{data:d.map(function(t){return(null===x||void 0===x?void 0:x(t))||t.value})})},u),{tick:{ticks:d,tickLabelFormatter:f.tickLabelFormatter,tickLabelStyle:f.tickLabelStyle,tickLineStyle:f.tickLineStyle},handlerStyle:sj(sj({},u.handlerStyle),{height:u.height||g}),controllerCfg:l,textStyle:c}))}else"tick"===a&&(S=new cA(sj({graph:m,canvas:w,group:b,x:n+i,y:o+i,width:r,height:42,padding:2,controllerCfg:l},f)));var _=function e(){var r=t.get("timebar");r.draggingHandler=!1,r.isPlay&&(r.isPlay=!1,r.currentHandler=r.maxHandlerShape,r.changePlayStatus()),document.removeEventListener("mouseup",e)};w.on("mousedown",function(t){"maxHandlerShape-handler"!==t.target.get("name")&&"minHandlerShape-handler"!==t.target.get("name")&&t.target!==S.foregroundShape||document.addEventListener("mouseup",_)}),this.set("timebar",S)},e.prototype.filterData=function(t){var e,r=t.value;if(!r){r=[];var n=this._cfgs.type;n&&"trend"!==n&&"simple"!==n?"tick"===n&&(r[0]=this._cfgs.tick.start,r[1]=this._cfgs.tick.end):(r[0]=this._cfgs.slider.start,r[1]=this._cfgs.slider.end)}var o=null,i=this._cfgs.type;if("trend"===i||"simple"===i?o=this._cfgs.trend.data:"tick"===i&&(o=this._cfgs.tick.data),o&&0!==o.length){var a=this.get("rangeChange"),s=this.get("graph"),u=Math.round(o.length*r[0]),l=Math.round(o.length*r[1]);l=l>=o.length?o.length-1:l,u=u>=o.length?o.length-1:u;var c=null===(e=this._cfgs.tick)||void 0===e?void 0:e.tickLabelFormatter,f=c?c(o[u]):o[u].date,h=c?c(o[l]):o[l].date;if("tick"!==i)this.get("timebar").setText(f,h);if(a)a(s,f,h);else{(!this.cacheGraphData||this.cacheGraphData.nodes&&0===this.cacheGraphData.nodes.length)&&(this.cacheGraphData=s.get("data"));var p=this.get("filterItemTypes"),d=this.get("changeData"),y=this.get("getDate"),v=this.get("shouldIgnore"),g=o[u].date,m=o[l].date;if(d||void 0===d){var b=this.cacheGraphData.nodes,w=this.cacheGraphData.edges,S={},x={};s.getNodes().forEach(function(t){return S[t.getID()]=!0}),s.getEdges().forEach(function(t){return x[t.getID()]=!0}),p.includes("node")&&(null===b||void 0===b||b.forEach(function(t){var e=+((null===y||void 0===y?void 0:y(t))||t.date),r=e>=g&&e<=m||(null===v||void 0===v?void 0:v("node",t,{min:g,max:m})),n=S[t.id];n&&!r?(s.removeItem(t.id),S[t.id]=!1):!n&&r&&(s.addItem("node",t),S[t.id]=!0)}),null===w||void 0===w||w.forEach(function(t){var e=S[t.source]&&S[t.target]||(null===v||void 0===v?void 0:v("edge",t,{min:g,max:m})),r=!!s.findById(t.id);r&&!e?(s.removeItem(t.id),x[t.id]=!1):!r&&e?(s.addItem("edge",t),x[t.id]=!0):r||(x[t.id]=!1)})),(this.get("filterEdge")||p.includes("edge"))&&(null===w||void 0===w||w.filter(function(t){var e=+((null===y||void 0===y?void 0:y(t))||t.date),r=e>=g&&e<=m||(null===v||void 0===v?void 0:v("edge",t,{min:g,max:m})),n=S[t.source]&&S[t.target],o=r&&n,i=x[t.id];i&&!o?(x[t.id]=!1,s.removeItem(t.id)):!i&&o&&(x[t.id]=!0,s.addItem("edge",t))}))}else p.includes("node")&&s.getNodes().forEach(function(t){var e=t.getModel();if(null===v||void 0===v||!v("node",e,{min:g,max:m})){var r=+((null===y||void 0===y?void 0:y(e))||e.date);r<g||r>m?s.hideItem(t):s.showItem(t)}}),(this.get("filterEdge")||p.includes("edge"))&&s.getEdges().forEach(function(t){var e=t.getModel();if(null===v||void 0===v||!v("edge",e,{min:o[u].date,max:o[l].date})){var r=+((null===y||void 0===y?void 0:y(e))||e.date);if(r<o[u].date||r>o[l].date)s.hideItem(t);else{var n=t.getSource().isVisible(),i=t.getTarget().isVisible();n&&i&&s.showItem(t)}}})}}else console.warn("è¯·éç½® TimeBar ç»ä»¶çæ°æ®")},e.prototype.initEvent=function(){var t=this.get("graph");t.on("afterchangedata",this.changeData),t.on("afterrender",this.afterrenderListener),t.on("valuechange",this.valueChangeListener)},e.prototype.destroy=function(){var e=this.get("graph");e.off("afterchangedata",this.changeData),e.off("afterrender",this.afterrenderListener),e.off("valuechange",this.valueChangeListener);var r=this.get("timebar");r&&r.destory&&r.destory(),t.prototype.destroy.call(this);var n=this.get("timeBarContainer");if(n){var o=this.get("container");o||(o=this.get("graph").get("container")),(0,ng.isString)(o)&&(o=document.getElementById(o)),o===n&&(o=o.parentElement),o.removeChild(n)}},e}(xT),cj=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),fj=vO.applyMatrix;var hj=function(t){function e(e){return t.call(this,e)||this}return cj(e,t),e.prototype.getDefaultCfgs=function(){return{container:null,className:"g6-minimap",viewportClassName:"g6-minimap-viewport",width:200,delegateStyle:{fill:"#40a9ff",stroke:"#096dd9"},refresh:!0}},e.prototype.getEvents=function(){return{beforepaint:"updateViewport",beforeanimate:"disableRefresh",afteranimate:"enableRefresh",viewportchange:"disableOneRefresh"}},e.prototype.disableRefresh=function(){this.set("refresh",!1)},e.prototype.enableRefresh=function(){this.set("refresh",!0),this.updateCanvas()},e.prototype.disableOneRefresh=function(){this.set("viewportChange",!0)},e.prototype.initViewport=function(){var t=this,e=this._cfgs,r=e.graph;if(!this.destroyed){var n=this.get("container");(0,ng.isString)(n)&&(n=document.getElementById(n));var o=Ek("<div class=".concat(e.viewportClassName,"\n      style='position:absolute;\n        left:0;\n        top:0;\n        box-sizing:border-box;\n        border: 2px solid #1980ff;\n        cursor:move'\n      </div>")),i=0,a=0,s=!1,u=0,l=0,c=0,f=0,h=0,p=0;n.addEventListener("mousedown",function(n){if(e.refresh=!1,n.target===o){var u=o.style;c=parseInt(u.width,10),f=parseInt(u.height,10);var l=t.get("width"),d=t.get("height");c>l||f>d||(p=r.getZoom(),h=t.get("ratio"),s=!0,i=n.clientX,a=n.clientY)}},!1),n.addEventListener("mousemove",function(e){if(s&&!(0,ng.isNil)(e.clientX)&&!(0,ng.isNil)(e.clientY)){var n=t.get("width"),d=t.get("height"),y=o.style;u=parseInt(y.left,10),l=parseInt(y.top,10),c=parseInt(y.width,10),f=parseInt(y.height,10);var v=i-e.clientX,g=a-e.clientY;u-v<0?v=u:u-v+c>=n&&(v=0),l-g<0?g=l:l-g+f>=d&&(g=0),l-=g,ST(o,{left:"".concat(u-=v,"px"),top:"".concat(l,"px")}),r.translate(v*p/h,g*p/h),i=e.clientX,a=e.clientY}},!1),n.addEventListener("mouseleave",function(){s=!1,e.refresh=!0},!1),n.addEventListener("mouseup",function(){s=!1,e.refresh=!0},!1),this.set("viewport",o),n.appendChild(o)}},e.prototype.updateViewport=function(){if(!this.destroyed){var t=this.get("ratio"),e=this.get("width"),r=this.get("height"),n=this.get("graph"),o=n.get("width"),i=o/n.get("height"),a=n.getGroup(),s=a.getCanvasBBox(),u=[(s.minX+s.maxX)/2,(s.minY+s.maxY)/2],l=[s.maxX-s.minX,s.maxY-s.minY],c={centerX:u[0],centerY:u[1],width:0,height:0,minX:0,minY:0};s[0]/s[1]>i?(c.width=l[0],c.height=c.width/i):(c.height=l[1],c.width=c.height*i),c.minX=u[0]-c.width/2,c.minY=u[1]-c.height/2;var f=a.getMatrix();f||(f=[1,0,0,0,1,0,0,0,1]);var h=ug.invert([1,0,0,0,1,0,0,0,1],f),p=fj({x:c.minX,y:c.minY},h),d=n.getCanvasByPoint(p.x,p.y),y=this.get("viewport");y||this.initViewport();var v=o/c.width,g=v*e,m=v*r,b=e*-d.x/c.width,w=r*-d.y/c.height,S=b+g,x=w+m;b<0&&(g+=b,b=0),S>e&&(g-=S-e),w<0&&(m+=w,w=0),x>r&&(m-=x-r),this.set("ratio",t),ST(y,{left:"".concat(b,"px"),top:"".concat(w,"px"),width:"".concat(g,"px"),height:"".concat(m,"px")})}},e.prototype.init=function(){this.initContainer()},e.prototype.initContainer=function(){var t=this.get("graph"),e=t.get("width"),r=t.get("height")/e,n=this.get("className"),o=this.get("container"),i=this.get("width"),a=this.get("height");i||a||(i=200),i?(a=r*i,this.set("height",a)):(i=1/r*a,this.set("width",i));var s=Ek("<div class='".concat(n,"' style='width: ").concat(i,"px; height: ").concat(a,"px; overflow: hidden; position: relative;'></div>"));(0,ng.isString)(o)&&(o=document.getElementById(o)),o?o.appendChild(s):t.get("container").appendChild(s),this.set("container",s);var u=Ek('<div class="g6-minimap-container" style="position: relative; width: 100%; height: 100%; text-align: center; display: table;"></div>');s.appendChild(u);var l=Ek('<span style="display: table-cell; vertical-align: middle; "></span>');u.appendChild(l),this.set("containerDOM",u),this.set("containerSpan",l);var c=Ek('<img alt="" src="'.concat(this.get("graphImg"),'" style="display: inline-block; user-select: none;" draggable="false" />'));this.set("imgDOM",c),this.updateImgSize(),l.appendChild(c),this.updateCanvas()},e.prototype.updateImgSize=function(){var t=this.get("imgDOM"),e=this.get("width"),r=this.get("height");t.onload=function(){var n=function(t,e){var r,n;if(t.naturalWidth)r=t.naturalWidth,n=t.naturalHeight;else{var o=new Image;o.src=t.src,o.onload=function(){e&&e(o.width,o.height)}}return[r,n]}(t);n[0]>n[1]?t.width=e:t.height=r}},e.prototype.updateCanvas=function(){if(this.get("refresh")){var t=this.get("graph");if(!t.get("destroyed")){this.get("viewportChange")&&(this.set("viewportChange",!1),this.updateViewport());var e=this.get("width")/t.get("canvas").getCanvasBBox().width;this.set("ratio",e),this.updateViewport()}}},e.prototype.getViewport=function(){return this.get("viewport")},e.prototype.getContainer=function(){return this.get("container")},e.prototype.updateGraphImg=function(t){this.get("imgDOM").remove(),this.set("graphImg",t);var e=Ek('<img alt="" src="'.concat(t,'" style="display: inline-block;" ondragstart="return false;" onselectstart="return false;"/>'));this.set("imgDOM",e),e.src=t,this.updateImgSize(),this.get("containerSpan").appendChild(e),this.updateCanvas()},e.prototype.destroy=function(){var t=this.get("container");t.parentNode.removeChild(t)},e}(xT),pj=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),dj=function(){return(dj=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},yj=vO.distance,vj={stroke:"#000",strokeOpacity:.8,lineWidth:2,fillOpacity:1,fill:"#fff"},gj=function(t){function e(e){return t.call(this,e)||this}return pj(e,t),e.prototype.getDefaultCfgs=function(){return{type:"both",trigger:"mousemove",r:60,delegateStyle:(0,ng.clone)(vj),showLabel:"edge",scaleRBy:"wheel"}},e.prototype.getEvents=function(){var t;switch(this.get("trigger")){case"click":t={click:"filter"};break;case"drag":t={click:"createDelegate"};break;default:t={mousemove:"filter"}}return t},e.prototype.init=function(){var t=this.get("showLabel"),e="node"===t||"both"===t,r="edge"===t||"both"===t;this.set("showNodeLabel",e),this.set("showEdgeLabel",r),this.get("shouldShow")||this.set("shouldShow",function(){return!0})},e.prototype.createDelegate=function(t){var e=this,r=e.get("delegate");r&&!r.destroyed||(e.filter(t),(r=e.get("delegate")).on("dragstart",function(t){}),r.on("drag",function(t){e.filter(t)}),"wheel"===this.get("scaleRBy")&&r.on("mousewheel",function(t){e.scaleRByWheel(t)}))},e.prototype.scaleRByWheel=function(t){if(t&&t.originalEvent){t.preventDefault&&t.preventDefault();var e,r=this.get("graph"),n=this.get("delegate");(n?{x:n.attr("x"),y:n.attr("y")}:void 0)||r.getPointByClient(t.clientX,t.clientY);e=t.originalEvent.wheelDelta<0?.95:1/.95;var o=this.get("maxR"),i=this.get("minR"),a=this.get("r");(a>(o||r.get("height"))&&e>1||a<(i||.05*r.get("height"))&&e<1)&&(e=1),a*=e,this.set("r",a),this.filter(t)}},e.prototype.filter=function(t){var e=this.get("graph"),r=e.getNodes(),n={},o=this.get("r"),i=this.get("type"),a={x:t.x,y:t.y};this.updateDelegate(a,o);var s=this.get("shouldShow"),u=this.get("vShapes");u&&u.forEach(function(t){t.remove(),t.destroy()}),u=[],r.forEach(function(t){var e=t.getModel(),r=e.x,i=e.y;yj({x:r,y:i},a)<o&&(n[e.id]=t)});var l=[];e.getEdges().forEach(function(t){var e=t.getModel(),r=e.source,o=e.target;s(e)&&("only-source"===i||"one"===i?n[r]&&!n[o]&&l.push(t):"only-target"===i||"one"===i?n[o]&&!n[r]&&l.push(t):"both"===i&&n[r]&&n[o]&&l.push(t))});var c=this.get("showNodeLabel"),f=this.get("showEdgelabel"),h=e.get("group");l.forEach(function(t){t.get("group").get("children").forEach(function(t){var e=t.get("type"),r=h.addShape(e,{attrs:t.attr()});u.push(r),c&&"text"===e&&r.set("visible",!0)})}),Object.keys(n).forEach(function(t){var e=n[t].get("group").clone();if(h.add(e),u.push(e),f)for(var r=e.get("children"),o=0;o<r.length;o++){var i=r[o];"text"===i.get("type")&&i.set("visible",!0)}}),this.set("vShapes",u)},e.prototype.updateParams=function(t){var e=t.r,r=t.trigger,n=t.minR,o=t.maxR,i=t.scaleRBy,a=t.showLabel,s=t.shouldShow;if(isNaN(t.r)||this.set("r",e),isNaN(o)||this.set("maxR",o),isNaN(n)||this.set("minR",n),"mousemove"!==r&&"click"!==r||this.set("trigger",r),"wheel"===i||"unset"===i){this.set("scaleRBy",i),this.get("delegate").remove(),this.get("delegate").destroy();var u=this.get("dPercentText");u&&(u.remove(),u.destroy())}"node"!==a&&"both"!==a||this.set("showNodeLabel",!0),"edge"!==a&&"both"!==a||this.set("showEdgeLabel",!0),s&&this.set("shouldShow",s)},e.prototype.updateDelegate=function(t,e){var r=this,n=r.get("graph"),o=r.get("delegate");if(!o||o.destroyed){var i=n.get("group"),a=r.get("delegateStyle")||vj;o=i.addShape("circle",{attrs:dj({r:e,x:t.x,y:t.y},a),name:"lens-shape",draggable:!0}),"drag"!==this.get("trigger")&&"wheel"===this.get("scaleRBy")&&o.on("mousewheel",function(t){r.scaleRByWheel(t)})}else o.attr({x:t.x,y:t.y,r:e});r.set("delegate",o)},e.prototype.clear=function(){var t=this.get("vShapes");t&&t.forEach(function(t){t.remove(),t.destroy()}),t=[],this.set("vShapes",t);var e=this.get("delegate");e&&!e.destroyed&&(e.remove(),e.destroy())},e.prototype.destroy=function(){this.clear()},e}(xT),mj=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),bj=vO.pointLineDistance,wj={stroke:"#FA8C16",lineWidth:1},Sj=function(t){function e(e){return t.call(this,e)||this}return mj(e,t),e.prototype.getDefaultCfgs=function(){return{line:wj,itemAlignType:"center",tolerance:5,horizontalLines:{},verticalLines:{},alignLines:[]}},e.prototype.init=function(){},e.prototype.getEvents=function(){return{"node:dragstart":"onDragStart","node:drag":"onDrag","node:dragend":"onDragEnd"}},e.prototype.onDragStart=function(){this.initBoxLine()},e.prototype.onDrag=function(t){var e=t.item,r=(e.get("delegateShape")||e).getBBox(),n=e.getModel(),o=n.x-r.x,i=n.y-r.y;this.show({x:r.minX+o,y:r.minY+i},{width:r.width,height:r.height})},e.prototype.onDragEnd=function(){this.destory()},e.prototype.initBoxLine=function(){var t=this._cfgs,e=t.horizontalLines,r=t.verticalLines,n=t.itemAlignType;this.get("graph").getNodes().forEach(function(t){var o=t.getBBox(),i=t.get("id");!0===n||"horizontal"===n?(e["".concat(i,"tltr")]=[o.minX,o.minY,o.maxX,o.minY,t],e["".concat(i,"lcrc")]=[o.minX,o.centerY,o.maxX,o.centerY,t],e["".concat(i,"blbr")]=[o.minX,o.maxY,o.maxX,o.maxY,t]):"center"===n&&(e["".concat(i,"lcrc")]=[o.minX,o.centerY,o.maxX,o.centerY,t]),!0===n||"vertical"===n?(r["".concat(i,"tlbl")]=[o.minX,o.minY,o.minX,o.maxY,t],r["".concat(i,"tcbc")]=[o.centerX,o.minY,o.centerX,o.maxY,t],r["".concat(i,"trbr")]=[o.maxX,o.minY,o.maxX,o.maxY,t]):"center"===n&&(r["".concat(i,"tcbc")]=[o.centerX,o.minY,o.centerX,o.maxY,t])})},e.prototype.show=function(t,e){var r=(0,ng.mix)({},t);return this.itemAlign(t,e,r),t},e.prototype.itemAlign=function(t,e,r){var n=this,o=this._cfgs,i=o.horizontalLines,a=o.verticalLines,s=o.tolerance,u={x:r.x+e.width/2,y:r.y},l={x:r.x+e.width/2,y:r.y+e.height/2},c={x:r.x+e.width/2,y:r.y+e.height},f={x:r.x,y:r.y+e.height/2},h={x:r.x+e.width,y:r.y+e.height/2},p=[],d=[],y=null;if(this.clearAlignLine(),(0,ng.each)(i,function(t){t[4].isVisible&&(p.push(n.getLineDisObject(t,u)),p.push(n.getLineDisObject(t,l)),p.push(n.getLineDisObject(t,c)))}),(0,ng.each)(a,function(t){t[4].isVisible&&(d.push(n.getLineDisObject(t,f)),d.push(n.getLineDisObject(t,l)),d.push(n.getLineDisObject(t,h)))}),p.sort(function(t,e){return t.dis-e.dis}),d.sort(function(t,e){return t.dis-e.dis}),0!==p.length&&p[0].dis<s){t.y=p[0].line[1]-p[0].point.y+r.y,y={type:"item",horizontals:[p[0]]};for(var v=1;v<3;v++)p[0].dis===p[v].dis&&y.horizontals.push(p[v])}if(0!==d.length&&d[0].dis<s){t.x=d[0].line[0]-d[0].point.x+r.x,y?y.verticals=[d[0]]:y={type:"item",verticals:[d[0]]};for(v=1;v<3;v++)d[0].dis===d[v].dis&&y.verticals.push(d[v])}y&&(y.bbox=e,this.addAlignLine(y))},e.prototype.addAlignLine=function(t){var e=t.bbox,r=t.type,n=t.horizontals,o=t.verticals,i=this._cfgs,a=i.line,s=i.alignLines,u=this.get("graph").get("group");"item"===r&&(n&&(0,ng.each)(n,function(t){var r,n,o=t.line,i=t.point,l=(o[0]+o[2])/2;i.x<l?(r=i.x-e.width/2,n=Math.max(o[0],o[2])):(r=i.x+e.width/2,n=Math.min(o[0],o[2]));var c=(0,ng.mix)({x1:r,y1:o[1],x2:n,y2:o[1]},a),f=u.addShape("line",{attrs:c,capture:!1});s.push(f)}),o&&(0,ng.each)(o,function(t){var r,n,o=t.line,i=t.point,l=(o[1]+o[3])/2;i.y<l?(r=i.y-e.height/2,n=Math.max(o[1],o[3])):(r=i.y+e.height/2,n=Math.min(o[1],o[3]));var c=(0,ng.mix)({x1:o[0],y1:r,x2:o[0],y2:n},a),f=u.addShape("line",{attrs:c,capture:!1});s.push(f)}))},e.prototype.getLineDisObject=function(t,e){return{line:t,point:e,dis:bj(t,e)}},e.prototype.getContainer=function(){return this.get("container")},e.prototype.clearAlignLine=function(){var t=this._cfgs.alignLines;(0,ng.each)(t,function(t){t.remove()}),t.length=0},e.prototype.destory=function(){var t=this._cfgs,e=t.horizontalLines,r=t.verticalLines;this.get("graph").getNodes().forEach(function(t){var n=t.get("id");delete e["".concat(n,"tltr")],delete e["".concat(n,"lcrc")],delete e["".concat(n,"blbr")],delete r["".concat(n,"tlbl")],delete r["".concat(n,"tcbc")],delete r["".concat(n,"trbr")]}),this.clearAlignLine()},e}(xT),xj=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),_j=function(){return(_j=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},Ej=["click","mouseenter"],Oj=function(t){function e(e){return t.call(this,e)||this}return xj(e,t),e.prototype.getDefaultCfgs=function(){return{data:{},position:"top",padding:8,margin:8,offsetX:0,offsetY:0,layout:"horizontal",flipPage:!1,containerStyle:{},align:void 0,horiSep:8,vertiSep:8,filter:{enable:!1,trigger:"click"}}},e.prototype.init=function(){this.formatArray("padding"),this.formatArray("margin");var t=this.get("filter")||{};t.multiple&&"mouseenter"===t.trigger&&this.set("multiple",!1);var e=this.get("align");if(!e){var r=this.get("position").split("-");r.includes("left")&&(e="left"),e=r.includes("right")?"right":"center",this.set("align",e)}var n=this.get("graph").get("container"),o=Ek("<div class='g6-legend-container' style=\"position: absolute;\"></div>");n.appendChild(o),this.set("container",o);var i=this.render();ST(o,this.getContainerPos(i)),this.bindEvents()},e.prototype.getContainerPos=function(t){void 0===t&&(t=[0,0]);var e=this.get("graph"),r=this.get("offsetX"),n=this.get("offsetY"),o=this.get("margin"),i=this.get("position").split("-"),a={top:0,right:1,bottom:2,left:3},s={left:(e.getWidth()-t[0])/2+0,top:(e.getHeight()-t[1])/2+0};return i.forEach(function(r){var n=o[a[r]],i=r;switch(r){case"top":case"left":n+=0;break;case"bottom":n=e.getHeight()-t[1]-n+0,i="top";break;default:n=e.getWidth()-t[0]-n+0,i="left"}s[i]=n}),s.top+=n+e.getContainer().offsetTop,s.left+=r+e.getContainer().offsetLeft,Object.keys(s).forEach(function(t){s[t]="".concat(s[t],"px")}),s},e.prototype.bindEvents=function(){var t=this,e=t.get("filter");if(e&&e.enable){var r=e.trigger||"click";Ej.includes(r)||(console.warn("Trigger for legend filterling must be 'click' or 'mouseenter', 'click' will take effect by default."),r="click");var n=t.get("legendCanvas");"mouseenter"===r?(n.on("node-container:mouseenter",function(e){return t.filterData(e)}),n.on("node-container:mouseleave",function(e){t.clearFilter(),t.clearActiveLegend()})):(n.on("node-container:click",function(e){return t.filterData(e)}),n.on("click",function(e){e.target&&e.target.isCanvas&&e.target.isCanvas()&&(t.clearFilter(),t.clearActiveLegend())}))}},e.prototype.changeData=function(t){this.set("data",t);var e=this.render();ST(this.get("container"),this.getContainerPos(e))},e.prototype.activateLegend=function(t){var e=this.get("filter");(null===e||void 0===e?void 0:e.multiple)||this.clearActiveLegend();var r=t.get("parent");r.get("active")?(r.set("active",!1),this.findLegendItemsByState("active").length&&r.set("inactive",!0)):(r.set("inactive",!1),r.set("active",!0)),this.findLegendItemsByState("active").length?this.findLegendItemsByState("active","all",!1).forEach(function(t){t.set("inactive",!0)}):this.clearActiveLegend();var n=(null===e||void 0===e?void 0:e.legendStateStyles)||{},o=(null===n||void 0===n?void 0:n.inactive)||{opacity:.5,"text-shape":{opacity:.5}},i=o["text-shape"]||{};this.findLegendItemsByState("inactive").forEach(function(t){var e=t.get("children"),r=e[0],n=e[1];r.attr(_j(_j({},r.get("oriAttrs")),o)),n.attr(_j(_j({},n.get("oriAttrs")),i))});var a=(null===n||void 0===n?void 0:n.active)||{stroke:"#000",lineWidth:2,"text-shape":{fontWeight:"bold"}},s=a["text-shape"]||{};this.findLegendItemsByState("active").forEach(function(t){var e=t.get("children"),r=e[0],n=e[1];r.attr(_j(_j({},r.get("oriAttrs")),a)),n.attr(_j(_j({},n.get("oriAttrs")),s))})},e.prototype.findLegendItemsByState=function(t,e,r){void 0===e&&(e="all"),void 0===r&&(r=!0);var n=this.get("legendCanvas").find(function(t){return"root"===t.get("name")}),o=n.find(function(t){return"node-group"===t.get("name")}),i=n.find(function(t){return"edge-group"===t.get("name")});return"node"===e?o.get("children").filter(function(e){return!!e.get(t)===r}):"edge"===e?i.get("children").filter(function(e){return!!e.get(t)===r}):o.get("children").filter(function(e){return!!e.get(t)===r}).concat(i.get("children").filter(function(e){return!!e.get(t)===r}))},e.prototype.clearActiveLegend=function(){var t=this.get("legendCanvas").find(function(t){return"root"===t.get("name")});[t.find(function(t){return"node-group"===t.get("name")}),t.find(function(t){return"edge-group"===t.get("name")})].forEach(function(t){t.get("children").forEach(function(t){t.set("active",!1),t.set("inactive",!1);var e=t.get("children"),r=e[0],n=e[1];r.attr(r.get("oriAttrs")),n.attr(n.get("oriAttrs"))})})},e.prototype.filterData=function(t){var e=this.get("filter"),r=null===e||void 0===e?void 0:e.filterFunctions;if(e&&r){var n=this.get("legendCanvas"),o=this.get("graph"),i=e.graphActiveState||"active",a=e.graphInactiveState||"inactive",s=e.multiple;this.clearFilter(),s||this.clearActiveLegend(),this.activateLegend(t.target);var u=n.find(function(t){return"root"===t.get("name")}),l=u.find(function(t){return"node-group"===t.get("name")}),c=u.find(function(t){return"edge-group"===t.get("name")}),f=l.get("children").filter(function(t){return t.get("active")}),h=c.get("children").filter(function(t){return t.get("active")}),p=0,d=["getNodes","getEdges"];d.forEach(function(t){o[t]().forEach(function(e){var n=!1;("getNodes"===t?f:h).forEach(function(t){var o=r[t.get("id")];n=n||o(e.getModel())}),n?(o.setItemState(e,a,!1),o.setItemState(e,i,!0),p++):(o.setItemState(e,i,!1),o.setItemState(e,a,!0))})}),p||d.forEach(function(t){o[t]().forEach(function(t){o.clearItemStates(t,[a])})})}},e.prototype.clearFilter=function(){var t=this.get("graph"),e=this.get("filter");if(e){var r=e.graphActiveState||"active",n=e.graphInactiveState||"inactive";t.getNodes().forEach(function(e){t.clearItemStates(e,[r,n])}),t.getEdges().forEach(function(e){t.clearItemStates(e,[r,n])})}},e.prototype.render=function(){var t=this;this.processData();var e=this.get("legendCanvas");e?e.clear():e=new jP({container:this.get("container"),width:200,height:200});var r=e.addGroup({name:"root"}),n=r.addGroup({name:"node-group"}),o=r.addGroup({name:"edge-group"});this.set("legendCanvas",e);var i=this.get("itemsData"),a=[n,o];["nodes","edges"].forEach(function(e,r){i[e].forEach(function(n){var o,i,s=a[r].addGroup({id:n.id,name:"node-container"}),u=n.type,l=t.getShapeSize(n),c=l.width,f=l.height,h=l.r,p=t.getStyle(e.substr(0,4),n);switch(n.type){case"circle":i={r:h,x:0,y:0};break;case"rect":i={width:c,height:f,x:-c/2,y:-f/2};break;case"ellipse":i={rx:c,ry:f,x:0,y:0},u="ellipse";break;case"line":i={x1:-c/2,y1:0,x2:c/2,y2:0},u="line";break;case"quadratic":i={path:[["M",-c/2,0],["Q",0,c/2,c/2,0]]},u="path";break;case"cubic":i={path:[["M",-c/2,0],["C",-c/6,c/2,c/6,-c/2,c/2,0]]},u="path";break;case"diamond":i={path:[["M",0,-f],["L",c,0],["L",0,f],["L",-c,0],["Z"]]},u="path";break;case"triangle":i={path:[["M",-c,f],["L",0,-f],["L",c,f],["Z"]]},u="path";break;case"star":i={path:vO.getStarPath(3*h,1.2*h)},u="path";break;default:i={r:h,x:0,y:0}}var d=s.addShape(u,{attrs:_j(_j({},i),p),name:"".concat(n.type,"-node-keyShape"),oriAttrs:_j({opacity:1},p)});if(n.label){var y=d.getBBox(),v=(null===(o=n.labelCfg)||void 0===o?void 0:o.style)||{},g=_j({textAlign:"begin",fontSize:12,textBaseline:"middle",fill:"#000",opacity:1,fontWeight:"normal"},v);s.addShape("text",{attrs:_j({x:y.maxX+4,y:0,text:n.label},g),className:"legend-label",name:"".concat(n.type,"-node-text"),oriAttrs:g})}})});var s,u=this.get("padding"),l=r.find(function(t){return"title-container"===t.get("name")}),c={height:0,maxY:0,width:0};if(this.get("title")){l||(l=r.addGroup({name:"title-container"}));var f={fontSize:20,fontFamily:"Arial",fontWeight:300,textBaseline:"top",textAlign:"center",fill:"#000",x:0,y:u[0]},h=this.get("titleConfig")||{},p=Object.assign(f,h.style||{});s=l.addShape("text",{attrs:_j({text:this.get("title")},p)}),c=l.getCanvasBBox(),l.setMatrix([1,0,0,0,1,0,h.offsetX,h.offsetY,1])}this.layoutItems();var d=r.getCanvasBBox(),y=n.getCanvasBBox(),v=y.minX<0?Math.abs(y.minX)+u[3]:u[3],g=c.maxY<y.minY?Math.abs(c.maxY-y.minY)+u[0]:c.maxY+u[0],m=[1,0,0,0,1,0,v,g,1];n.setMatrix(m);var b=[(d=r.getCanvasBBox()).minX+d.width+u[1],d.minY+d.height+u[2]];if(s){h=_j({position:"center",offsetX:0,offsetY:0},this.get("titleConfig"));c=l.getCanvasBBox();var w=l.getMatrix()||[1,0,0,0,1,0,0,0,1];"center"===h.position?w[6]=b[0]/2+h.offsetX:"right"===h.position?(w[6]=b[0]-u[3]+h.offsetX,s.attr({textAlign:"right"})):(w[6]=u[3]+h.offsetX,s.attr({textAlign:"left"})),l.setMatrix(w),c=l.getCanvasBBox(),m=[1,0,0,0,1,0,v=y.minX<0?Math.abs(y.minX)+u[3]:u[3],g=y.minY<c.maxY?Math.abs(c.maxY-y.minY)+u[0]:c.maxY+u[0],1],n.setMatrix(m);var S=[1,0,0,0,1,0,v,g,1];"vertical"===this.get("layout")?S[6]+=y.maxX+this.get("horiSep"):S[7]+=y.maxY+this.get("vertiSep"),o.setMatrix(S)}else{y=n.getCanvasBBox();var x=[1,0,0,0,1,0,0,0,1];"vertical"===this.get("layout")?x[6]+=m[6]+y.maxX+this.get("horiSep"):x[7]+=m[7]+y.maxY+this.get("vertiSep"),o.setMatrix(x)}d=r.getCanvasBBox(),y=n.getCanvasBBox(),m=n.getMatrix()||[1,0,0,0,1,0,0,0,1];var _=o.getMatrix()||[1,0,0,0,1,0,0,0,1],E=o.getCanvasBBox();b=[Math.max(y.width+m[6],E.width+_[6])+u[1],Math.max(y.height+m[7],E.height+_[7])+u[2]],e.changeSize(b[0],b[1]);var O=this.get("containerStyle"),P=r.getMatrix()||[1,0,0,0,1,0,0,0,1],k=vO.invertMatrix({x:0,y:0},P);return r.addShape("rect",{attrs:_j({x:k.x+(O.lineWidth||1),y:k.y+(O.lineWidth||1),width:b[0]-2*(O.lineWidth||1),height:b[1]-2*(O.lineWidth||1),fill:"#f00",stroke:"#000",lineWidth:1,opacity:.5},O),name:"legend-back-rect",capture:!1}).toBack(),b},e.prototype.layoutItems=function(){var t=this.get("legendCanvas"),e=this.get("horiSep"),r=this.get("vertiSep"),n=this.get("layout"),o=this.get("align"),i=[0,0],a=t.find(function(t){return"root"===t.get("name")}),s=a.find(function(t){return"node-group"===t.get("name")}),u=a.find(function(t){return"edge-group"===t.get("name")}),l={min:0,max:-1/0},c=-1/0;s.get("children").forEach(function(t,o){0===o&&(l.min=i[0]);var a=t.get("children")[0],s=t.getCanvasBBox(),u=a.getBBox(),f=u.width,h=u.height,p=0,d=0,y=0;"vertical"===n?(d=i[1],y=i[0]+f/2,i[0]=y+s.height+r,p=s.maxX+d+f/2):(d=i[0]+f/2,y=i[1],i[0]=d+s.width+e,p=s.maxY+y+h/2),i[0]>l.max&&(l.max=i[0]),p>c&&(c=p),t.setMatrix([1,0,0,0,1,0,d,y,1])});var f=l.max-l.min,h={min:0,max:-1/0},p=s.getCanvasBBox();i[0]=0,i[1]="vertical"===n?p.maxX+e:p.maxY+r,u.get("children").forEach(function(t,o){0===o&&(h.min=i[0]);var a=t.get("children")[0],s=t.getCanvasBBox(),u=a.getBBox(),l=u.width,c=u.height,f=0,p=0;"vertical"===n?(f=i[1],p=i[0],i[0]=p+s.height+r,t.setMatrix([1,0,0,0,1,0,0,p+c/2,1])):(f=i[0],p=i[1],i[0]=f+s.width+e,t.setMatrix([1,0,0,0,1,0,f+l/2,0,1])),i[0]>h.max&&(h.max=i[0])});var d=h.max-h.min;if(o&&""!==o&&"left"!==o){var y=f-d,v="center"===o?Math.abs(y)/2:Math.abs(y);(y<0?s:u).get("children").forEach(function(t){var e=t.getMatrix()||[1,0,0,0,1,0,0,0,1];"vertical"===n?e[7]+=v:e[6]+=v,t.setMatrix(e)})}},e.prototype.processData=function(){var t=this.get("data"),e={nodes:[],edges:[]};t.nodes&&(t.nodes.sort(function(t,e){return t.order-e.order}),t.nodes.forEach(function(t){var r,n,o,i,a,s=t.size||[(null===(r=t.style)||void 0===r?void 0:r.width)||(null===(n=t.style)||void 0===n?void 0:n.r)||8,(null===(o=t.style)||void 0===o?void 0:o.height)||(null===(i=t.style)||void 0===i?void 0:i.r)||8],u=(null===(a=t.labelCfg)||void 0===a?void 0:a.style)||{};e.nodes.push({id:t.id||(0,ng.uniqueId)(),type:t.type||"circle",style:_j({},t.style),order:t.order,label:t.label,itemType:"node",size:s,labelCfg:{position:"right",style:_j({fontFamily:"Arial"},u)}})})),t.edges&&(t.edges.sort(function(t,e){return t.order-e.order}),t.edges.forEach(function(t){var r,n,o=t.type||"line";"cubic-horizontal"===t.type&&(o="cubic");var i=(null===(r=t.labelCfg)||void 0===r?void 0:r.style)||{},a=t.size||[(null===(n=t.style)||void 0===n?void 0:n.width)||8,1];e.edges.push({id:t.id||(0,ng.uniqueId)(),type:o,size:a,style:_j({lineWidth:(0,ng.isArray)(a)?a[1]:1},t.style),order:t.order,label:t.label,itemType:"edge",labelCfg:{position:"right",style:_j({fontFamily:"Arial"},i)}})})),this.set("itemsData",e)},e.prototype.getContainer=function(){return this.get("container")},e.prototype.formatArray=function(t){var e=this.get(t);if((0,ng.isNumber)(e))this.set(t,[e,e,e,e]);else if((0,ng.isArray)(e))switch(e.length){case 0:this.set(t,[0,0,0,0]);break;case 1:this.set(t,[e[0],e[0],e[0],e[0]]);break;case 2:this.set(t,[e[0],e[1],e[0],e[1]]);break;case 3:this.set(t,[e[0],e[1],e[2],e[1]])}return this.get(t)},e.prototype.getShapeSize=function(t){var e,r,n;return t.size&&((0,ng.isArray)(t.size)?(e=t.size[0],r=t.size[1]||t.size[0],n=t.size[0]/2):(0,ng.isNumber)(t.size)&&(e=t.size,r=t.size,n=t.size/2)),t.style&&(t.style.width&&(e=t.style.width),t.style.height&&(r=t.style.height),t.style.r&&(n=t.style.r)),n||(n=5),e||(e=n),r||(r=n),{width:e,height:r,r:n}},e.prototype.getStyle=function(t,e){return _j(_j({},"node"===t?{fill:"#ccc",lineWidth:0}:{stroke:"#000",lineWidth:1}),e.style||{})},e.prototype.destroy=function(){var t=this.get("legendCanvas");null===t||void 0===t||t.destroy();var e=this.get("graph").get("container"),r=this.get("container");e.removeChild(r)},e}(xT),Pj=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),kj=function(){return(kj=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},Cj=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(t);o<n.length;o++)e.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(t,n[o])&&(r[n[o]]=t[n[o]])}return r};"undefined"!=typeof document&&kT()("\n  .g6-annotation-container {\n    background-color: rgba(255, 255, 255, 0.3);\n    padding: 8px;\n  }\n  .g6-annotation-wrapper {\n    background-color: #fff;\n    box-shadow: 0 0 8px rgba(0, 0, 0, 0.85);\n  }\n  .g6-annotation-header-wapper {\n    height: fit-content;\n    width: 100%;\n    background-color: #5B8FF9;\n    display: inline-flex;\n    cursor: move;\n  }\n  .g6-annotation-title {\n    margin: 4px 40px 4px 8px;\n    cursor: text;\n    min-width: 32px;\n  }\n  .g6-annotation-collapse {\n    margin: 4px;\n    cursor: pointer;\n  }\n  .g6-annotation-expand {\n    margin: 4px;\n    cursor: pointer;\n  }\n  .g6-annotation-close {\n    margin: 4px 8px 4px 0;\n    cursor: pointer;\n  }\n  .g6-annotation-content {\n    padding: 8px;\n    width: fit-content;\n    cursor: text;\n    word-break: break-all;\n    min-width: 32px;\n  }\n  .g6-annotation-title-input-wrapper {\n    margin: 4px 40px 4px 8px;\n  }\n  .g6-annotation-content-input {\n    height: 100%;\n    word-break: break-all;\n  }\n  .g6-annotation-content-input-wrapper {\n    margin: 8px;\n    height: 100%;\n  }\n");var Tj=function(t){function e(e){return t.call(this,e)||this}return Pj(e,t),e.prototype.getDefaultCfgs=function(){return{trigger:"click",editable:!0,itemHighlightState:"highlight",linkHighlightStyle:{shadowColor:"#5B8FF9",shadowBlur:10},cardCfg:{minHeight:60,width:"fit-content",height:"fit-content",collapseType:"minimize",closeType:"hide",borderRadius:5,maxTitleLength:20}}},e.prototype.getEvents=function(){var t={viewportchange:"updateLinks",afterlayout:"updateLinks",aftergraphrefreshposition:"updateLinks",afterupdateitem:"updateLink",afterchangedata:"onGraphDataChange",afteritemvisibilitychange:"onGraphItemVisibilityChange"};switch(this.get("trigger")){case"click":t=kj(kj({},t),{"node:click":"showAnnotation","edge:click":"showAnnotation"})}return t},e.prototype.getDOMContent=function(t){if(!this.destroyed){var e=t.collapsed,r=t.maxWidth,n=t.title,o=void 0===n?"":n,i=t.content,a=void 0===i?"":i,s=t.borderRadius,u=void 0===s?5:s,l=e?"<p class='g6-annotation-expand'>+</p>":"<p class='g6-annotation-collapse'>-</p>",c=e?"":" <p class='g6-annotation-content'>".concat(a,"</p>"),f=e?"".concat(u,"px"):"".concat(u,"px ").concat(u,"px 0 0");return'<div class="g6-annotation-wrapper" style="border-radius: '.concat(u,"px; max-width: ").concat(r,'px">\n        <div\n          class="g6-annotation-header-wapper"\n          style="border-radius: ').concat(f,";\"\n        >\n          <h4 class='g6-annotation-title'>").concat(o,"</h4>\n          ").concat(l,"\n          ").concat("<p class='g6-annotation-close'>x</p>","\n        </div>\n        ").concat(c,"\n      </div>")}},e.prototype.init=function(){var t=this;if(!t.destroyed){var e=t.get("graph").getContainer(),r=t.get("container");this.get("containerCfg")?(r=this.createContainer(),e.appendChild(r)):r=e,this.set("container",r);var n=e.getBoundingClientRect(),o=new jP({container:e,width:n.right-n.left,height:n.bottom-n.top});ST(o.get("el"),{position:"absolute",top:0,left:0,pointerEvents:"none"}),window.addEventListener("resize",(0,ng.debounce)(function(){return t.resizeCanvas(t)},100));var i=o.addGroup({id:"annotation-link-group"});t.set("linkGroup",i),t.set("canvas",o),t.get("getTitle")||t.set("getTitle",function(t){var e,r=(null===(e=null===t||void 0===t?void 0:t.getModel)||void 0===e?void 0:e.call(t))||{},n=r.label,o=r.id;return n||o||"-"}),t.get("getContent")||t.set("getContent",function(t){var e,r;if(!t)return"-";var n=(null===(e=t.getModel)||void 0===e?void 0:e.call(t))||{},o=n.label,i=n.id,a=null===(r=t.getType)||void 0===r?void 0:r.call(t),s=a?"".concat(a,": "):"";return"".concat(s).concat(o||i||"")});var a=t.get("defaultData");a&&this.readData(a)}},e.prototype.createContainer=function(){var t=this;if(!this.destroyed){var e=this.get("containerCfg"),r=this.get("graph"),n=r.getContainer(),o=n.getBoundingClientRect(),i=o.left,a=o.right,s=o.top,u=o.bottom-s,l=a-i,c=e.position,f=void 0===c?"top":c,h=e.offsetX,p=void 0===h?0:h,d=e.offsetY,y=void 0===d?0:d,v=Cj(e,["position","offsetX","offsetY"]),g=e.height,m=void 0===g?"fit-content":g,b=e.width,w=void 0===b?r.getWidth():b;"100%"===m&&(m=u),"100%"===w&&(w=l);var S="unset",x="unset",_={};switch(f){case"right":S="".concat(u,"px"),(_={top:0,right:0}).right+=i+p,_.top+=s+y;break;case"bottom":x="".concat(l,"px"),(_={bottom:0,left:0}).left+=i+p,_.bottom+=s+y;break;case"top":x="".concat(l,"px");case"left":S="".concat(u,"px");default:(_={top:0,left:0}).left+=i+p,_.top+=s+y}Object.keys(_).forEach(function(t){_[t]="".concat(_[t],"px")});var E=Ek("<div class='".concat(e.className," g6-annotation-container'></div>"));return ST(E,kj(kj({position:"absolute",display:"top"===f||"bottom"===f?"inline-flex":"unset",width:(0,ng.isNumber)(w)?"".concat(w,"px"):w,height:(0,ng.isNumber)(m)?"".concat(m,"px"):m,maxHeight:S,maxWidth:x,overflow:"scroll"},_),v)),n.appendChild(E),E.addEventListener("scroll",function(e){t.updateLinks()}),E}},e.prototype.resizeCanvas=function(t){clearTimeout(t.resizeTimer),t.resizeTimer=setTimeout(function(){if(t&&!t.destroyed){var e=t.get("container").getBoundingClientRect(),r=e.right-e.left,n=e.bottom-e.top;t.get("canvas").changeSize(r,n),t.updateOutsideCards(t)}},250)},e.prototype.updateOutsideCards=function(t){var e=t||this,r=e.get("cardInfoMap")||{},n=e.get("graph"),o=n.getPointByCanvas(0,0),i=n.getPointByCanvas(n.getWidth(),n.getHeight()),a=n.getClientByPoint(o.x,o.y),s=a.x,u=a.y,l=n.getClientByPoint(i.x,i.y),c=l.x,f=l.y;Object.values(r).forEach(function(t){var e=t.card;if(e){var r=e.style,n=Mj(r.left),o=Mj(r.top),i=e.getBoundingClientRect(),a=i.width,l=i.height,h=n,p=o;n+a>c-s&&(h=c-s-a),n<0&&(h=0),o+l>f-u&&(p=f-u-l),o<0&&(p=0),ST(e,{left:"".concat(h,"px"),top:"".concat(p,"px")})}}),e.updateLinks()},e.prototype.showAnnotation=function(t){if(!this.destroyed){var e=t.item;this.toggleAnnotation(e)}},e.prototype.hideCards=function(){var t=this;if(!t.destroyed){var e=t.get("cardInfoMap")||{};Object.keys(e).forEach(function(e){t.hideCard(e)})}},e.prototype.toggleAnnotation=function(t,e){var r,n;void 0===e&&(e={});if(!this.destroyed){var o=this.get("cardInfoMap")||{},i=this.get("graph"),a=this.get("container"),s=this.get("containerCfg"),u=Object.assign({},this.get("cardCfg")||{},e),l=u.minHeight,c=u.minWidth,f=u.width,h=u.height,p=u.collapsed,d=void 0!==p&&p,y=u.x,v=u.y,g=u.title,m=u.content,b=u.maxTitleLength,w=u.defaultBegin,S=Cj(u,["minHeight","minWidth","width","height","collapsed","x","y","title","content","maxTitleLength","defaultBegin"]),x=this.get("linkGroup"),_=this.get("rows")||[[]],E=null===(r=t.isCanvas)||void 0===r?void 0:r.call(t),O=E?"canvas-annotation":t.getID(),P=o[O]||{},k=P.card,C=P.link,T=P.x,A=P.y,M=P.title,j=P.content,I=this.get("getTitle"),N=this.get("getContent"),L=this.get("getContentPlaceholder")||function(){return""},R=this.get("getTitlePlaceHolder")||function(){return""},D=L(t),B=R(t),F=Ek(this.getDOMContent(kj({itemId:O,collapsed:d,title:(null===(n=M||g||(null===I||void 0===I?void 0:I(t)))||void 0===n?void 0:n.substr(0,b))||B,content:j||m||(null===N||void 0===N?void 0:N(t))||D},S))),G=(0,ng.isNumber)(l)?"".concat(l,"px"):l;ST(F,{minHeight:d?"unset":G,minWidth:(0,ng.isNumber)(c)?"".concat(c,"px"):c,height:h,width:f});var U,z=!!k;if(z?(null===C||void 0===C||C.remove(!0),a.replaceChild(F,k)):a.appendChild(F),!s){if(U=a.getBoundingClientRect()||{},void 0!==y&&void 0!==v)T=y,A=v;else if(!z&&!E){var V=U.top,H=w||{},W=H.left,q=H.right,Y=void 0===q?16:q,X=H.top,J=void 0===X?8:X,K=H.bottom,Q=Y,Z=J;isNaN(W)||(Q=a.scrollWidth-W),isNaN(K)||(Z=a.scrollHeight-K);var $=(0,ng.isNumber)(c)?c:100;T=a.scrollWidth-F.scrollWidth-(_.length-1)*$-Q;var tt=_[_.length-1],et=(tt[tt.length-1]||{}).bbox;A=(null===et||void 0===et?void 0:et.bottom)-V||Z}ST(F,{position:"absolute",left:"".concat(T,"px"),top:"".concat(A,"px"),cusor:s?"unset":"move"})}this.bindListener(F,O);var rt=F.getBoundingClientRect();if(!E){var nt=Aj(t,rt,i,this.get("canvas")),ot=this.get("linkStyle");C=x.addShape("path",{attrs:kj({lineWidth:1,lineDash:[5,5],stroke:"#ccc",path:nt},ot)})}if(o[O]=kj(kj({},o[O]||{}),{id:O,collapsed:d,card:F,link:C,x:T,y:A,cardBBox:rt,content:j||m,title:M||g,contentPlaceholder:D,titlePlaceholder:B,isCanvas:E}),this.set("cardInfoMap",o),s)this.updateCardPositionsInConatainer(),this.updateLinks();else{var it=!isNaN(y)&&!isNaN(v);if(!z&&!E&&!it){var at=U.bottom,st=void 0===at?0:at;V=U.top;_[_.length-1].push({id:O,bbox:rt}),rt.top>st-V-rt.height-16&&_.push([]),this.set("rows",_)}}this.updateCardSize(O);var ut=this.get("onAnnotationChange");null===ut||void 0===ut||ut(o[O],z?"update":"create")}},e.prototype.updateCardPositionsInConatainer=function(){if(!this.destroyed){var t=this.get("cardInfoMap");if(t){var e=this.get("container"),r=this.get("containerCfg").position,n=e.getBoundingClientRect().width,o=getComputedStyle(e),i=Mj(o.paddingLeft)+Mj(o.paddingRight);n-=i,Object.values(t).forEach(function(t){var e=t.card,o=e.getBoundingClientRect().width;switch(r){case"right":ST(e,{marginLeft:n?"".concat(n-o,"px"):"0px"});break;case"top":case"bottom":ST(e,{marginLeft:"8px"})}})}}},e.prototype.handleExpandCollapseCard=function(t){if(!this.destroyed){var e=this.get("graph"),r=this.get("cardInfoMap");if(r){var n=r[t].collapsed,o=e.findById(t);if(o)"hide"!==this.get("cardCfg").collapseType||n?this.toggleAnnotation(o,{collapsed:!n}):this.hideCard(t),r[t]=kj(kj({},r[t]),{collapsed:!n})}}},e.prototype.hideCard=function(t){if(!this.destroyed){var e=this.get("cardInfoMap");if(e&&e[t]){var r=e[t],n=r.card,o=r.link;ST(n,{display:"none"}),null===o||void 0===o||o.hide(),this.get("onAnnotationChange")(e[t],"hide")}}},e.prototype.removeCard=function(t){if(!this.destroyed){var e=this.get("cardInfoMap");if(e){var r=e[t],n=r.card,o=r.link;this.get("container").removeChild(n),null===o||void 0===o||o.remove(!0),delete e[t],this.get("onAnnotationChange")(r,"remove")}}},e.prototype.bindListener=function(t,e){var r=this;if(!this.destroyed){t.addEventListener("mousemove",function(t){var n;if("g6-annotation-collapse"===t.target.className?n="collapse":"g6-annotation-expand"===t.target.className?n="expand":"g6-annotation-close"===t.target.className&&(n="close"),n){var o=r.get("cardCfg").onMouseEnterIcon;(void 0===o?function(){}:o)(t,e,n)}}),t.addEventListener("mouseout",function(t){var n;if("g6-annotation-collapse"===t.target.className?n="collapse":"g6-annotation-expand"===t.target.className?n="expand":"g6-annotation-close"===t.target.className&&(n="close"),n){var o=r.get("cardCfg").onMouseLeaveIcon;(void 0===o?function(){}:o)(t,e,n)}}),t.addEventListener("mouseenter",function(t){var n=r.get("cardInfoMap");if(n){var o=r.get("graph"),i=o.findById(e);if(i){var a=r.get("itemHighlightState");o.setItemState(i,a,!0)}var s=n[e].link;if(s){var u=r.get("linkHighlightStyle")||{};s.attr(u)}}}),t.addEventListener("mouseleave",function(t){var n=r.get("cardInfoMap");if(n){var o=r.get("graph"),i=o.findById(e);if(i){var a=r.get("itemHighlightState");o.setItemState(i,a,!1)}var s=n[e].link;if(s){var u=r.get("linkHighlightStyle")||{};Object.keys(u).forEach(function(t){s.attr(t,void 0),s.attr(t,void 0)});var l=r.get("linkStyle");s.attr(l)}}}),t.addEventListener("click",function(t){var n=(r.get("cardCfg")||{}).onClickIcon;if("g6-annotation-collapse"===t.target.className||"g6-annotation-expand"===t.target.className)"hide"===r.get("cardCfg").collapseType?r.hideCard(e):r.handleExpandCollapseCard(e),null===n||void 0===n||n(t,e,"g6-annotation-collapse"===t.target.className?"collapse":"expand");else if("g6-annotation-close"===t.target.className){"remove"===r.get("cardCfg").closeType?r.removeCard(e):r.hideCard(e),null===n||void 0===n||n(t,e,"close")}}),this.get("editable")&&t.addEventListener("dblclick",function(t){var n=r.get("cardInfoMap"),o=(r.get("cardCfg")||{}).maxTitleLength,i=void 0===o?20:o;if(n){var a=t.target,s=a.className;if("g6-annotation-title"===s||"g6-annotation-content"===s){var u="g6-annotation-title"===s?a.getBoundingClientRect():a.parentNode.getBoundingClientRect(),l=u.width,c=u.height,f=getComputedStyle(a),h=Ek("<".concat("g6-annotation-title"===s?"input":"textarea",' class="').concat(s,'-input" type="textarea" style="width:').concat(l,"px; height: ").concat(c,'px; min-width: 16px;"/>')),p=Ek('<div class="'.concat(s,'-input-wrapper" style="width: ').concat(l,"px; height: ").concat(c,"px; min-width: 16px; margin-right: ").concat(f.marginRight,'" />'));p.appendChild(h),a.parentNode.replaceChild(p,a);var d=n[e],y=d.contentPlaceholder,v=d.titlePlaceholder,g=d.content,m=d.title,b=g;"g6-annotation-title"===s?(h.name="title",h.maxLength=i,b=m):h.name="content",b?(h.innerHTML=a.innerHTML,h.value=a.innerHTML):h.placeholder="g6-annotation-title"===s?v:y,h.focus(),h.addEventListener("blur",function(t){h.value&&(a.innerHTML=h.value,d[h.name||"title"]=h.value),p.parentNode.replaceChild(a,p),r.updateCardSize(e);var n=r.get("onAnnotationChange");null===n||void 0===n||n(d,"update")})}}});var n=["g6-annotation-title","g6-annotation-content","g6-annotation-title-input","g6-annotation-content-input"];t.draggable=!0,t.addEventListener("dragstart",function(e){var o=e.target.className;if(!n.includes(o)){var i=t.style;r.set("dragging",{card:t,x:e.clientX,y:e.clientY,left:Mj(i.left),top:Mj(i.top)})}}),t.addEventListener("drag",function(t){t.preventDefault();var n=r.get("cardInfoMap");if(n){var o=t.clientX,i=t.clientY,a=r.get("dragging");if(!isNaN(o)&&!isNaN(i)&&a){var s=a.x,u=a.y,l=a.left,c=a.top,f=a.card,h=o-s,p=i-u;l+=h,c+=p;var d=r.get("graph"),y=d.getPointByCanvas(0,0),v=d.getPointByCanvas(d.getWidth(),d.getHeight()),g=d.getClientByPoint(y.x,y.y),m=g.x,b=g.y,w=d.getClientByPoint(v.x,v.y),S=w.x,x=w.y,_=f.getBoundingClientRect(),E=_.right-_.left,O=_.bottom-_.top;(l>S-m-E&&h>0||l<0&&h<0)&&(l-=h),(c>x-b-O&&p>0||c<0&&p<0)&&(c-=p),ST(f,{left:"".concat(l,"px"),top:"".concat(c,"px"),visibility:"hidden"}),s=o,u=i;var P=(n[e]||{}).link;if(P){var k=d.findById(e);P.attr("path",Aj(k,_,d,r.get("canvas")))}r.set("dragging",{x:s,y:u,left:l,top:c,card:f})}}});t.addEventListener("dragend",function(t){var n=r.get("cardInfoMap");if(n){var o=r.get("dragging");if(o){var i=o.left,a=o.top,s=o.card;n[e].x=i,n[e].y=a,ST(s,{visibility:"visible"}),r.set("dragging",!1);var u=r.get("rows");null===u||void 0===u||u.forEach(function(t){for(var r=t.length-1;r>=0;r--)t[r].id===e&&t.splice(r,1)});var l=r.get("onAnnotationChange");null===l||void 0===l||l(n[e],"update")}}})}},e.prototype.updateCardSize=function(t){var e=this.get("cardInfoMap");if(e){var r=e[t].card,n=r.getBoundingClientRect().width,o=r.getElementsByClassName("g6-annotation-title")[0];if(o){var i=getComputedStyle(o),a=Mj(i.marginLeft),s=o.getBoundingClientRect().width;ST(o,{marginRight:"".concat(n-a-24-16-s,"px")})}}},e.prototype.updateLink=function(t){var e=t.item;if(e){var r=this.get("cardInfoMap");if(r){var n=this.get("canvas"),o=this.get("graph"),i=r[e.getID()]||{},a=i.link,s=i.card;if(a){var u=Aj(e,s.getBoundingClientRect(),o,n);a.attr("path",u)}}}},e.prototype.updateLinks=function(){var t=this;if(!this.destroyed){var e=this.get("cardInfoMap");if(e){var r=this.get("graph");Object.values(e).forEach(function(e){var n=e.id,o=r.findById(n);t.updateLink({item:o})})}}},e.prototype.onGraphDataChange=function(){var t=this,e=this.get("cardInfoMap");if(e){var r=this.get("graph");Object.values(e).forEach(function(e){var n=e.id,o=e.card,i=e.isCanvas;if(o&&!i&&"none"!==o.style.display){var a=r.findById(n);a&&a.isVisible()?t.toggleAnnotation(a):t.hideCard(n)}})}},e.prototype.onGraphItemVisibilityChange=function(t){var e=t.item,r=t.visible;if(e&&!e.destroyed){var n=this.get("cardInfoMap");if(n){var o=e.getID();n[o]&&(r||this.hideCard(o))}}},e.prototype.saveData=function(t){void 0===t&&(t=!1);var e=this.get("cardInfoMap");if(e){var r=this.get("graph"),n=this.get("getTitle"),o=this.get("getContent"),i=[];return Object.values(e).forEach(function(e){var a=e.title,s=e.content,u=e.x,l=e.y,c=e.id,f=e.collapsed,h=e.card;if(!h||"none"!==h.style.display||t){var p=r.findById(c)||r.get("canvas");i.push({id:c,x:u,y:l,collapsed:f,title:a||(null===n||void 0===n?void 0:n(p)),content:s||(null===o||void 0===o?void 0:o(p)),visible:h&&"none"!==h.style.display})}}),i}},e.prototype.readData=function(t){var e=this,r=this.get("graph");t.forEach(function(t){var n=t.id,o=t.x,i=t.y,a=t.title,s=t.content,u=t.collapsed,l=t.visible,c=r.findById(n);if(c||"canvas-annotation"!==n||(c=r.get("canvas")),!c){var f=e.get("cardInfoMap")||{};return f[n]=t,void e.set("cardInfoMap",f)}e.toggleAnnotation(c,{x:o,y:i,title:a,content:s,collapsed:u}),l||e.hideCard(n)})},e.prototype.clear=function(){var t=this.get("cardInfoMap");if(t){var e=this.get("container");Object.values(t).forEach(function(t){var r=t.card,n=t.link;e.removeChild(r),null===n||void 0===n||n.remove(!0)}),this.set("cardInfoMap",{})}},e.prototype.destroy=function(){var t;this.clear(),null===(t=this.get("canvas"))||void 0===t||t.destroy();var e=this.get("graph");e&&!e.destroyed&&(this.get("containerCfg")&&e.getContainer().removeChild(this.get("container")),this.destroyed=!0)},e}(xT),Aj=function(t,e,r,n){var o,i;if("edge"===t.getType())i=[t.getKeyShape().getPoint(.5)];else{var a=null===(o=t.getKeyShape)||void 0===o?void 0:o.call(t).getBBox(),s=a.minX,u=a.minY,l=a.maxX,c=a.maxY,f=t.getModel(),h=f.x,p=f.y;i={left:{x:s+=h,y:((u+=p)+(c+=p))/2},right:{x:l+=h,y:(u+c)/2},top:{x:(s+l)/2,y:u},bottom:{x:(s+l)/2,y:c}}}Object.keys(i).forEach(function(t){var e=i[t],o=e.x,a=e.y,s=r.getClientByPoint(o,a);i[t]=n.getPointByClient(s.x,s.y)});var d=e.top,y=void 0===d?0:d,v=e.left,g=void 0===v?0:v,m=e.right,b=void 0===m?0:m,w=e.bottom,S=void 0===w?0:w,x={left:n.getPointByClient(g,(y+S)/2),right:n.getPointByClient(b,(y+S)/2),top:n.getPointByClient((g+b)/2,y),bottom:n.getPointByClient((g+b)/2,S)};return function(t,e){var r,n,o=1/0;Object.keys(t).forEach(function(i){var a=t[i];Object.keys(e).forEach(function(t){var i=e[t],s=a.x-i.x,u=a.y-i.y,l=s*s+u*u;o>l&&(o=l,r=a,n=i)})});var i=vO.getControlPoint(r,n,.5,20);return[["M",r.x,r.y],["Q",i.x,i.y,n.x,n.y]]}(i,x)},Mj=function(t){return Number(t.replace(/\s+|px/gi,""))||0},jj={PluginBase:xT,Menu:TT,Grid:OT,Minimap:NT,Bundling:BT,ToolBar:HT,Tooltip:qT,Fisheye:zT,TimeBar:lj,ImageMinimap:hj,EdgeFilterLens:gj,SnapLine:Sj,Legend:Oj,Annotation:Tj};bO("circle",{options:{size:_O.defaultNode.size,style:{x:0,y:0,stroke:_O.defaultNode.style.stroke,fill:_O.defaultNode.style.fill,lineWidth:_O.defaultNode.style.lineWidth},labelCfg:{style:{fill:_O.nodeLabel.style.fill,fontSize:_O.nodeLabel.style.fontSize,fontFamily:_O.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:_O.defaultNode.linkPoints.size,lineWidth:_O.defaultNode.linkPoints.lineWidth,fill:_O.defaultNode.linkPoints.fill,stroke:_O.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:(0,rg.__assign)({},_O.nodeStateStyles)},shapeType:"circle",labelPosition:"center",drawShape:function(t,e){var r=(this.mergeStyle||this.getOptions(t)).icon,n=void 0===r?{}:r,o=this.getShapeStyle(t),i=(0,ng.deepMix)({},n,t.icon),a="".concat(this.type,"-keyShape"),s=e.addShape("circle",{attrs:o,className:a,name:a,draggable:!0});e.shapeMap[a]=s;var u=i.width,l=i.height,c=i.show,f=i.text;if(c){var h="".concat(this.type,"-icon");e.shapeMap[h]=f?e.addShape("text",{attrs:(0,rg.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},i),className:h,name:h,draggable:!0}):e.addShape("image",{attrs:(0,rg.__assign)({x:-u/2,y:-l/2},i),className:h,name:h,draggable:!0})}return this.drawLinkPoints(t,e),s},drawLinkPoints:function(t,e){var r=(this.mergeStyle||this.getOptions(t)).linkPoints;if(r){var n=r||{},o=n.top,i=n.left,a=n.right,s=n.bottom,u=n.size,l=n.r,c=(0,rg.__rest)(n,["top","left","right","bottom","size","r"]),f=this.getSize(t)[0]/2;if(i){var h="link-point-left";e.shapeMap[h]=e.addShape("circle",{attrs:(0,rg.__assign)((0,rg.__assign)({},c),{x:-f,y:0,r:u/2||l||5}),className:h,name:h,isAnchorPoint:!0})}if(a){var p="link-point-right";e.shapeMap[p]=e.addShape("circle",{attrs:(0,rg.__assign)((0,rg.__assign)({},c),{x:f,y:0,r:u/2||l||5}),className:p,name:p,isAnchorPoint:!0})}if(o){var d="link-point-top";e.shapeMap[d]=e.addShape("circle",{attrs:(0,rg.__assign)((0,rg.__assign)({},c),{x:0,y:-f,r:u/2||l||5}),className:d,name:d,isAnchorPoint:!0})}if(s){var y="link-point-bottom";e.shapeMap[y]=e.addShape("circle",{attrs:(0,rg.__assign)((0,rg.__assign)({},c),{x:0,y:f,r:u/2||l||5}),className:y,name:y,isAnchorPoint:!0})}}},getShapeStyle:function(t){var e=(this.mergeStyle||this.getOptions(t)).style,r={stroke:t.color},n=(0,ng.deepMix)({},e,r),o=this.getSize(t)[0]/2;return(0,rg.__assign)({x:0,y:0,r:o},n)},update:function(t,e,r){var n=e.getContainer(),o=this.getSize(t),i=(0,rg.__assign)({},t.style);void 0===t.style.stroke&&t.color&&(i.stroke=t.color),void 0!==t.style.r||isNaN(o[0])||(i.r=o[0]/2),this.updateShape(t,e,i,!0,r),this.updateLinkPoints(t,n)}},"single-node"),bO("rect",{options:{size:[100,30],style:{radius:0,stroke:_O.defaultNode.style.stroke,fill:_O.defaultNode.style.fill,lineWidth:_O.defaultNode.style.lineWidth},labelCfg:{style:{fill:_O.nodeLabel.style.fill,fontSize:_O.nodeLabel.style.fontSize,fontFamily:_O.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:_O.defaultNode.linkPoints.size,lineWidth:_O.defaultNode.linkPoints.lineWidth,fill:_O.defaultNode.linkPoints.fill,stroke:_O.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},anchorPoints:[[0,.5],[1,.5]],stateStyles:(0,rg.__assign)({},_O.nodeStateStyles)},shapeType:"rect",labelPosition:"center",drawShape:function(t,e){var r=this.getShapeStyle(t),n=e.addShape("rect",{attrs:r,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});return e.shapeMap["".concat(this.type,"-keyShape")]=n,this.drawLinkPoints(t,e),n},drawLinkPoints:function(t,e){var r=(this.mergeStyle||this.getOptions(t)).linkPoints,n=void 0===r?{}:r,o=n.top,i=n.left,a=n.right,s=n.bottom,u=n.size,l=n.r,c=(0,rg.__rest)(n,["top","left","right","bottom","size","r"]),f=this.getSize(t),h=f[0],p=f[1];i&&(e.shapeMap["link-point-left"]=e.addShape("circle",{attrs:(0,rg.__assign)((0,rg.__assign)({},c),{x:-h/2,y:0,r:u/2||l||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),a&&(e.shapeMap["link-point-right"]=e.addShape("circle",{attrs:(0,rg.__assign)((0,rg.__assign)({},c),{x:h/2,y:0,r:u/2||l||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),o&&(e.shapeMap["link-point-top"]=e.addShape("circle",{attrs:(0,rg.__assign)((0,rg.__assign)({},c),{x:0,y:-p/2,r:u/2||l||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),s&&(e.shapeMap["link-point-bottom"]=e.addShape("circle",{attrs:(0,rg.__assign)((0,rg.__assign)({},c),{x:0,y:p/2,r:u/2||l||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0}))},getShapeStyle:function(t){var e=(this.mergeStyle||this.getOptions(t)).style,r={stroke:t.color},n=(0,ng.mix)({},e,r),o=this.getSize(t),i=n.width||o[0],a=n.height||o[1];return(0,rg.__assign)({x:-i/2,y:-a/2,width:i,height:a},n)},update:function(t,e,r){var n=e.getContainer(),o=this.getOptions({}).style,i=this.getSize(t),a=e.get("keyShape");t.size||(i[0]=a.attr("width")||o.width,i[1]=a.attr("height")||o.height);var s={stroke:t.color,x:-i[0]/2,y:-i[1]/2,width:i[0],height:i[1]},u=(0,ng.mix)({},o,a.attr(),s);u=(0,ng.mix)(u,t.style),this.updateShape(t,e,u,!1,r),this.updateLinkPoints(t,n)}},"single-node"),bO("ellipse",{options:{size:[80,40],style:{x:0,y:0,stroke:_O.defaultNode.style.stroke,fill:_O.defaultNode.style.fill,lineWidth:_O.defaultNode.style.lineWidth},labelCfg:{style:{fill:_O.nodeLabel.style.fill,fontSize:_O.nodeLabel.style.fontSize,fontFamily:_O.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:_O.defaultNode.linkPoints.size,lineWidth:_O.defaultNode.linkPoints.lineWidth,fill:_O.defaultNode.linkPoints.fill,stroke:_O.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:(0,rg.__assign)({},_O.nodeStateStyles)},shapeType:"ellipse",labelPosition:"center",drawShape:function(t,e){var r=(this.mergeStyle||this.getOptions(t)).icon,n=void 0===r?{}:r,o=this.getShapeStyle(t),i=e.addShape("ellipse",{attrs:o,className:"ellipse-keyShape",name:"ellipse-keyShape",draggable:!0});e.shapeMap["ellipse-keyShape"]=i;var a=n.width,s=n.height,u=n.show,l=n.text;return u&&(e.shapeMap["".concat(this.type,"-icon")]=l?e.addShape("text",{attrs:(0,rg.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},n),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0}):e.addShape("image",{attrs:(0,rg.__assign)({x:-a/2,y:-s/2},n),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0})),this.drawLinkPoints(t,e),i},drawLinkPoints:function(t,e){var r=(this.mergeStyle||this.getOptions(t)).linkPoints,n=void 0===r?{}:r,o=n.top,i=n.left,a=n.right,s=n.bottom,u=n.size,l=n.r,c=(0,rg.__rest)(n,["top","left","right","bottom","size","r"]),f=this.getSize(t),h=f[0]/2,p=f[1]/2;i&&(e.shapeMap["link-point-left"]=e.addShape("circle",{attrs:(0,rg.__assign)((0,rg.__assign)({},c),{x:-h,y:0,r:u/2||l||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),a&&(e.shapeMap["link-point-right"]=e.addShape("circle",{attrs:(0,rg.__assign)((0,rg.__assign)({},c),{x:h,y:0,r:u/2||l||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),o&&(e.shapeMap["link-point-top"]=e.addShape("circle",{attrs:(0,rg.__assign)((0,rg.__assign)({},c),{x:0,y:-p,r:u/2||l||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),s&&(e.shapeMap["link-point-bottom"]=e.addShape("circle",{attrs:(0,rg.__assign)((0,rg.__assign)({},c),{x:0,y:p,r:u/2||l||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0}))},getShapeStyle:function(t){var e=(this.mergeStyle||this.getOptions(t)).style,r={stroke:t.color},n=(0,ng.mix)({},e,r),o=this.getSize(t),i=o[0]/2,a=o[1]/2;return(0,rg.__assign)({x:0,y:0,rx:i,ry:a},n)},update:function(t,e,r){var n=e.getContainer(),o=this.getOptions({}).style,i=this.getSize(t),a={stroke:t.color,rx:i[0]/2,ry:i[1]/2},s=e.get("keyShape"),u=(0,ng.mix)({},o,s.attr(),a);u=(0,ng.mix)(u,t.style),this.updateShape(t,e,u,!0,r),this.updateLinkPoints(t,n)}},"single-node"),bO("diamond",{options:{size:[80,80],style:{stroke:_O.defaultNode.style.stroke,fill:_O.defaultNode.style.fill,lineWidth:_O.defaultNode.style.lineWidth},labelCfg:{style:{fill:_O.nodeLabel.style.fill,fontSize:_O.nodeLabel.style.fontSize,fontFamily:_O.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:_O.defaultNode.linkPoints.size,lineWidth:_O.defaultNode.linkPoints.lineWidth,fill:_O.defaultNode.linkPoints.fill,stroke:_O.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:(0,rg.__assign)({},_O.nodeStateStyles)},shapeType:"diamond",labelPosition:"center",drawShape:function(t,e){var r=(this.mergeStyle||this.getOptions(t)).icon,n=void 0===r?{}:r,o=this.getShapeStyle(t),i=e.addShape("path",{attrs:o,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});e.shapeMap["".concat(this.type,"-keyShape")]=i;var a=n.width,s=n.height,u=n.show,l=n.text;return u&&(e.shapeMap["".concat(this.type,"-icon")]=l?e.addShape("text",{attrs:(0,rg.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},n),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0}):e.addShape("image",{attrs:(0,rg.__assign)({x:-a/2,y:-s/2},n),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0})),this.drawLinkPoints(t,e),i},drawLinkPoints:function(t,e){var r=(this.mergeStyle||this.getOptions(t)).linkPoints,n=void 0===r?{}:r,o=n.top,i=n.left,a=n.right,s=n.bottom,u=n.size,l=n.r,c=(0,rg.__rest)(n,["top","left","right","bottom","size","r"]),f=this.getSize(t),h=f[0],p=f[1];i&&(e.shapeMap["link-point-left"]=e.addShape("circle",{attrs:(0,rg.__assign)((0,rg.__assign)({},c),{x:-h/2,y:0,r:u/2||l||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),a&&(e.shapeMap["link-point-right"]=e.addShape("circle",{attrs:(0,rg.__assign)((0,rg.__assign)({},c),{x:h/2,y:0,r:u/2||l||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),o&&(e.shapeMap["link-point-top"]=e.addShape("circle",{attrs:(0,rg.__assign)((0,rg.__assign)({},c),{x:0,y:-p/2,r:u/2||l||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),s&&(e.shapeMap["link-point-bottom"]=e.addShape("circle",{attrs:(0,rg.__assign)((0,rg.__assign)({},c),{x:0,y:p/2,r:u/2||l||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0}))},getPath:function(t){var e=this.getSize(t),r=e[0],n=e[1];return[["M",0,-n/2],["L",r/2,0],["L",0,n/2],["L",-r/2,0],["Z"]]},getShapeStyle:function(t){var e=(this.mergeStyle||this.getOptions(t)).style,r={stroke:t.color},n=(0,ng.mix)({},e,r),o=this.getPath(t);return(0,rg.__assign)({path:o},n)},update:function(t,e,r){var n=e.getContainer(),o=this.getOptions({}).style,i=this.getPath(t),a={stroke:t.color,path:i},s=e.get("keyShape"),u=(0,ng.mix)({},o,s.attr(),a);u=(0,ng.mix)(u,t.style),this.updateShape(t,e,u,!0,r),this.updateLinkPoints(t,n)}},"single-node"),bO("triangle",{options:{size:40,direction:"up",style:{stroke:_O.defaultNode.style.stroke,fill:_O.defaultNode.style.fill,lineWidth:_O.defaultNode.style.lineWidth},labelCfg:{style:{fill:_O.nodeLabel.style.fill,fontSize:_O.nodeLabel.style.fontSize},offset:15},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:_O.defaultNode.linkPoints.size,lineWidth:_O.defaultNode.linkPoints.lineWidth,fill:_O.defaultNode.linkPoints.fill,stroke:_O.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20,offset:6},stateStyles:(0,rg.__assign)({},_O.nodeStateStyles)},shapeType:"triangle",labelPosition:"bottom",drawShape:function(t,e){var r=this.mergeStyle||this.getOptions(t),n=r.icon,o=void 0===n?{}:n,i=r.direction,a=this.getShapeStyle(t),s=t.direction||i,u=e.addShape("path",{attrs:a,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});e.shapeMap["".concat(this.type,"-keyShape")]=u;var l=o.width,c=o.height,f=o.show,h=o.offset,p=o.text;if(f)if(p)e.shapeMap["".concat(this.type,"-icon")]=e.addShape("text",{attrs:(0,rg.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},o),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0});else{var d=-l/2,y=-c/2;"up"!==s&&"down"!==s||(y+=h),"left"!==s&&"right"!==s||(d+=h),e.shapeMap["".concat(this.type,"-icon")]=e.addShape("image",{attrs:(0,rg.__assign)({x:d,y:y},o),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0})}return this.drawLinkPoints(t,e),u},drawLinkPoints:function(t,e){var r=this.mergeStyle||this.getOptions(t),n=r.linkPoints,o=void 0===n?{}:n,i=r.direction,a=t.direction||i,s=o.top,u=o.left,l=o.right,c=o.bottom,f=o.size,h=o.r,p=(0,rg.__rest)(o,["top","left","right","bottom","size","r"]),d=this.getSize(t)[0];if(u){var y=null,v=d*Math.sin(1/3*Math.PI),g=d*Math.sin(1/3*Math.PI);"up"===a?y=[-g,v]:"down"===a?y=[-g,-v]:"left"===a&&(y=[-g,g-v]),y&&(e.shapeMap["link-point-left"]=e.addShape("circle",{attrs:(0,rg.__assign)((0,rg.__assign)({},p),{x:y[0],y:y[1],r:f/2||h||5}),className:"link-point-left",name:"link-point-left"}))}if(l){var m=null;v=d*Math.sin(1/3*Math.PI),g=d*Math.sin(1/3*Math.PI);"up"===a?m=[g,v]:"down"===a?m=[g,-v]:"right"===a&&(m=[g,g-v]),m&&(e.shapeMap["link-point-right"]=e.addShape("circle",{attrs:(0,rg.__assign)((0,rg.__assign)({},p),{x:m[0],y:m[1],r:f/2||h||5}),className:"link-point-right",name:"link-point-right"}))}if(s){var b=null;v=d*Math.sin(1/3*Math.PI),g=d*Math.sin(1/3*Math.PI);"up"===a?b=[g-v,-v]:"left"===a?b=[g,-v]:"right"===a&&(b=[-g,-v]),b&&(e.shapeMap["link-point-top"]=e.addShape("circle",{attrs:(0,rg.__assign)((0,rg.__assign)({},p),{x:b[0],y:b[1],r:f/2||h||5}),className:"link-point-top",name:"link-point-top"}))}if(c){var w=null;v=d*Math.sin(1/3*Math.PI),g=d*Math.sin(1/3*Math.PI);"down"===a?w=[-g+v,v]:"left"===a?w=[g,v]:"right"===a&&(w=[-g,v]),w&&(e.shapeMap["link-point-bottom"]=e.addShape("circle",{attrs:(0,rg.__assign)((0,rg.__assign)({},p),{x:w[0],y:w[1],r:f/2||h||5}),className:"link-point-bottom",name:"link-point-bottom"}))}},getPath:function(t){var e=(this.mergeStyle||this.getOptions(t)).direction,r=t.direction||e,n=this.getSize(t)[0],o=n*Math.sin(1/3*Math.PI),i=n*Math.sin(1/3*Math.PI),a=[["M",-i,o],["L",0,-o],["L",i,o],["Z"]];return"down"===r?a=[["M",-i,-o],["L",i,-o],["L",0,o],["Z"]]:"left"===r?a=[["M",-i,i-o],["L",i,-i],["L",i,i],["Z"]]:"right"===r&&(a=[["M",i,i-o],["L",-i,i],["L",-i,-i],["Z"]]),a},getShapeStyle:function(t){var e=(this.mergeStyle||this.getOptions(t)).style,r={stroke:t.color},n=(0,ng.mix)({},e,r),o=this.getPath(t);return(0,rg.__assign)({path:o},n)},update:function(t,e,r){var n=e.getContainer(),o=this.getOptions({}).style,i=this.getPath(t),a={stroke:t.color,path:i},s=e.get("keyShape"),u=(0,ng.mix)({},o,s.attr(),a);u=(0,ng.mix)(u,t.style),this.updateShape(t,e,u,!0,r),this.updateLinkPoints(t,n)},updateLinkPoints:function(t,e){var r=this.getOptions({}),n=r.linkPoints,o=r.direction,i=t.direction||o,a=e.shapeMap["link-point-left"]||e.find(function(t){return"link-point-left"===t.get("className")}),s=e.shapeMap["link-point-right"]||e.find(function(t){return"link-point-right"===t.get("className")}),u=e.shapeMap["link-point-top"]||e.find(function(t){return"link-point-top"===t.get("className")}),l=e.shapeMap["link-point-bottom"]||e.find(function(t){return"link-point-bottom"===t.get("className")}),c=n,f=a||s||u||l;f&&(c=f.attr());var h=(0,ng.mix)({},c,t.linkPoints),p=h.fill,d=h.stroke,y=h.lineWidth,v=h.size/2;v||(v=h.r);var g=t.linkPoints?t.linkPoints:{left:void 0,right:void 0,top:void 0,bottom:void 0},m=g.left,b=g.right,w=g.top,S=g.bottom,x=this.getSize(t)[0],_={r:v,fill:p,stroke:d,lineWidth:y},E=null,O=x*Math.sin(1/3*Math.PI),P=x*Math.sin(1/3*Math.PI);"up"===i?E=[-P,O]:"down"===i?E=[-P,-O]:"left"===i&&(E=[-P,P-O]),E&&(a?m||void 0===m?a.attr((0,rg.__assign)((0,rg.__assign)({},_),{x:E[0],y:E[1]})):(a.remove(),delete e.shapeMap["link-point-left"]):m&&(e.shapeMap["link-point-left"]=e.addShape("circle",{attrs:(0,rg.__assign)((0,rg.__assign)({},_),{x:E[0],y:E[1]}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})));var k=null;"up"===i?k=[P,O]:"down"===i?k=[P,-O]:"right"===i&&(k=[P,P-O]),k&&(s?b||void 0===b?s.attr((0,rg.__assign)((0,rg.__assign)({},_),{x:k[0],y:k[1]})):(s.remove(),delete e.shapeMap["link-point-right"]):b&&(e.shapeMap["link-point-right"]=e.addShape("circle",{attrs:(0,rg.__assign)((0,rg.__assign)({},_),{x:k[0],y:k[1]}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})));var C=null;"up"===i?C=[P-O,-O]:"left"===i?C=[P,-O]:"right"===i&&(C=[-P,-O]),C&&(u?w||void 0===w?u.attr((0,rg.__assign)((0,rg.__assign)({},_),{x:C[0],y:C[1]})):(u.remove(),delete e.shapeMap["link-point-top"]):w&&(e.shapeMap["link-point-top"]=e.addShape("circle",{attrs:(0,rg.__assign)((0,rg.__assign)({},_),{x:C[0],y:C[1]}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})));var T=null;"down"===i?T=[-P+O,O]:"left"===i?T=[P,O]:"right"===i&&(T=[-P,O]),T&&(l?S||void 0===S?l.attr((0,rg.__assign)((0,rg.__assign)({},_),{x:T[0],y:T[1]})):(l.remove(),delete e.shapeMap["link-point-bottom"]):S&&(e.shapeMap["link-point-bottom"]=e.addShape("circle",{attrs:(0,rg.__assign)((0,rg.__assign)({},_),{x:T[0],y:T[1]}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0})))}},"single-node"),bO("modelRect",{options:{size:[185,70],style:{radius:5,stroke:"#69c0ff",fill:"#ffffff",lineWidth:_O.defaultNode.style.lineWidth,fillOpacity:1},labelCfg:{style:{fill:"#595959",fontSize:14,fontFamily:_O.windowFontFamily},offset:30},descriptionCfg:{style:{fontSize:12,fill:"#bfbfbf",fontFamily:_O.windowFontFamily},paddingTop:0},preRect:{show:!0,width:4,fill:"#40a9ff",radius:2},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:10,lineWidth:1,fill:"#72CC4A",stroke:"#72CC4A"},logoIcon:{show:!0,x:0,y:0,img:"https://gw.alipayobjects.com/zos/basement_prod/4f81893c-1806-4de4-aff3-9a6b266bc8a2.svg",width:16,height:16,offset:0},stateIcon:{show:!0,x:0,y:0,img:"https://gw.alipayobjects.com/zos/basement_prod/300a2523-67e0-4cbf-9d4a-67c077b40395.svg",width:16,height:16,offset:-5},anchorPoints:[[0,.5],[1,.5]]},shapeType:"modelRect",drawShape:function(t,e){var r=(this.mergeStyle||this.getOptions(t)).preRect,n=void 0===r?{}:r,o=this.getShapeStyle(t),i=this.getSize(t),a=i[0],s=i[1],u=e.addShape("rect",{attrs:o,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});e.shapeMap["".concat(this.type,"-keyShape")]=u;var l=n.show,c=(0,rg.__rest)(n,["show"]);return l&&(e.shapeMap["pre-rect"]=e.addShape("rect",{attrs:(0,rg.__assign)({x:-a/2,y:-s/2,height:s},c),className:"pre-rect",name:"pre-rect",draggable:!0})),this.drawLogoIcon(t,e),this.drawStateIcon(t,e),this.drawLinkPoints(t,e),u},drawLogoIcon:function(t,e){var r=(this.mergeStyle||this.getOptions(t)).logoIcon,n=void 0===r?{}:r,o=this.getSize(t)[0];if(n.show){var i=n.width,a=n.height,s=n.x,u=n.y,l=n.offset,c=n.text,f=(0,rg.__rest)(n,["width","height","x","y","offset","text"]);e.shapeMap["rect-logo-icon"]=c?e.addShape("text",{attrs:(0,rg.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},f),className:"rect-logo-icon",name:"rect-logo-icon",draggable:!0}):e.addShape("image",{attrs:(0,rg.__assign)((0,rg.__assign)({},f),{x:s||-o/2+i+l,y:u||-a/2,width:i,height:a}),className:"rect-logo-icon",name:"rect-logo-icon",draggable:!0})}},drawStateIcon:function(t,e){var r=(this.mergeStyle||this.getOptions(t)).stateIcon,n=void 0===r?{}:r,o=this.getSize(t)[0];if(n.show){var i=n.width,a=n.height,s=n.x,u=n.y,l=n.offset,c=n.text,f=(0,rg.__rest)(n,["width","height","x","y","offset","text"]);e.shapeMap["rect-state-icon"]=c?e.addShape("text",{attrs:(0,rg.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},f),className:"rect-state-icon",name:"rect-state-icon",draggable:!0}):e.addShape("image",{attrs:(0,rg.__assign)((0,rg.__assign)({},f),{x:s||o/2-i+l,y:u||-a/2,width:i,height:a}),className:"rect-state-icon",name:"rect-state-icon",draggable:!0})}},drawLinkPoints:function(t,e){var r=(this.mergeStyle||this.getOptions(t)).linkPoints,n=void 0===r?{}:r,o=n.top,i=n.left,a=n.right,s=n.bottom,u=n.size,l=n.r,c=(0,rg.__rest)(n,["top","left","right","bottom","size","r"]),f=this.getSize(t),h=f[0],p=f[1];i&&(e.shapeMap["link-point-left"]=e.addShape("circle",{attrs:(0,rg.__assign)((0,rg.__assign)({},c),{x:-h/2,y:0,r:u/2||l||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),a&&(e.shapeMap["link-point-right"]=e.addShape("circle",{attrs:(0,rg.__assign)((0,rg.__assign)({},c),{x:h/2,y:0,r:u/2||l||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),o&&(e.shapeMap["link-point-top"]=e.addShape("circle",{attrs:(0,rg.__assign)((0,rg.__assign)({},c),{x:0,y:-p/2,r:u/2||l||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),s&&(e.shapeMap["link-point-bottom"]=e.addShape("circle",{attrs:(0,rg.__assign)((0,rg.__assign)({},c),{x:0,y:p/2,r:u/2||l||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0}))},drawLabel:function(t,e){var r=this.getOptions(t),n=r.labelCfg,o=void 0===n?{}:n,i=r.logoIcon,a=void 0===i?{}:i,s=r.descriptionCfg,u=void 0===s?{}:s,l=this.getSize(t)[0],c=null,f=a.show,h=a.width,p=-l/2+o.offset;f&&(p=-l/2+h+o.offset);var d=o.style,y=u.style,v=u.paddingTop;return(0,ng.isString)(t.description)?(c=e.addShape("text",{attrs:(0,rg.__assign)((0,rg.__assign)({},d),{x:p,y:-5,text:t.label}),className:"text-shape",name:"text-shape",draggable:!0,labelRelated:!0}),e.shapeMap["text-shape"]=c,e.shapeMap["rect-description"]=e.addShape("text",{attrs:(0,rg.__assign)((0,rg.__assign)({},y),{x:p,y:17+(v||0),text:t.description}),className:"rect-description",name:"rect-description",draggable:!0,labelRelated:!0})):(c=e.addShape("text",{attrs:(0,rg.__assign)((0,rg.__assign)({},d),{x:p,y:7,text:t.label}),className:"text-shape",name:"text-shape",draggable:!0,labelRelated:!0}),e.shapeMap["text-shape"]=c),c},getShapeStyle:function(t){var e=(this.mergeStyle||this.getOptions(t)).style,r={stroke:t.color},n=(0,ng.mix)({},e,r),o=this.getSize(t),i=n.width||o[0],a=n.height||o[1];return(0,rg.__assign)({x:-i/2,y:-a/2,width:i,height:a},n)},update:function(t,e){var r=this.mergeStyle||this.getOptions(t),n=r.style,o=void 0===n?{}:n,i=r.labelCfg,a=void 0===i?{}:i,s=r.descriptionCfg,u=void 0===s?{}:s,l=this.getSize(t),c=l[0],f=l[1];e.get("keyShape").attr((0,rg.__assign)((0,rg.__assign)({},o),{x:-c/2,y:-f/2,width:c,height:f}));var h=e.getContainer(),p=h.shapeMap["rect-logo-icon"]||h.find(function(t){return"rect-logo-icon"===t.get("className")}),d=p?p.attr():{},y=(0,ng.mix)({},d,t.logoIcon),v=y.width;void 0===v&&(v=this.options.logoIcon.width);var g=t.logoIcon?t.logoIcon.show:void 0,m=a.offset,b=-c/2+v+m;g||void 0===g||(b=-c/2+m);var w=h.shapeMap["node-label"]||h.find(function(t){return"node-label"===t.get("className")}),S=h.shapeMap["rect-description"]||h.find(function(t){return"rect-description"===t.get("className")});if(t.label)if(w){var x=t.labelCfg?t.labelCfg.style:{},_=(0,ng.mix)({},w.attr(),x);t.label&&(_.text=t.label),_.x=b,(0,ng.isString)(t.description)&&(_.y=-5),S&&(S.resetMatrix(),S.attr({x:b})),w.resetMatrix(),w.attr(_)}else h.shapeMap["node-label"]=h.addShape("text",{attrs:(0,rg.__assign)((0,rg.__assign)({},a.style),{x:b,y:t.description?-5:7,text:t.label}),className:"node-label",name:"node-label",draggable:!0,labelRelated:!0});if((0,ng.isString)(t.description)){var E=u.paddingTop;if(S){x=t.descriptionCfg?t.descriptionCfg.style:{};var O=(0,ng.mix)({},S.attr(),x);(0,ng.isString)(t.description)&&(O.text=t.description),O.x=b,S.resetMatrix(),S.attr((0,rg.__assign)((0,rg.__assign)({},O),{y:17+(E||0)}))}else h.shapeMap["rect-description"]=h.addShape("text",{attrs:(0,rg.__assign)((0,rg.__assign)({},u.style),{x:b,y:17+(E||0),text:t.description}),className:"rect-description",name:"rect-description",draggable:!0,labelRelated:!0})}var P=h.shapeMap["pre-rect"]||h.find(function(t){return"pre-rect"===t.get("className")});if(P&&!P.destroyed){var k=(0,ng.mix)({},P.attr(),t.preRect);P.attr((0,rg.__assign)((0,rg.__assign)({},k),{x:-c/2,y:-f/2,height:f}))}if(p&&!p.destroyed)if(g||void 0===g){var C=y.width,T=y.height,A=y.x,M=y.y,j=y.offset,I=(0,rg.__rest)(y,["width","height","x","y","offset"]);p.attr((0,rg.__assign)((0,rg.__assign)({},I),{x:A||-c/2+C+j,y:M||-T/2,width:C,height:T}))}else p.remove(),delete h.shapeMap["pre-rect"];else g&&this.drawLogoIcon(t,h);var N=h.shapeMap["rect-state-icon"]||h.find(function(t){return"rect-state-icon"===t.get("className")}),L=N?N.attr():{},R=(0,ng.mix)({},L,t.stateIcon);if(N){R.show||void 0===R.show||(N.remove(),delete h.shapeMap["rect-state-icon"]);var D=R.width,B=(T=R.height,A=R.x,M=R.y,R.offset),F=(0,rg.__rest)(R,["width","height","x","y","offset"]);N.attr((0,rg.__assign)((0,rg.__assign)({},F),{x:A||c/2-D+B,y:M||-T/2,width:D,height:T}))}else R.show&&this.drawStateIcon(t,h);this.updateLinkPoints(t,h)},getOptions:function(t,e){return"move"===e?t:(0,ng.deepMix)({},this.options,this.getCustomConfig(t)||{},t)}},"single-node"),bO("star",{options:{size:60,style:{stroke:_O.defaultNode.style.stroke,fill:_O.defaultNode.style.fill,lineWidth:_O.defaultNode.style.lineWidth},labelCfg:{style:{fill:_O.nodeLabel.style.fill,fontSize:_O.nodeLabel.style.fontSize,fontFamily:_O.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:_O.defaultNode.linkPoints.size,lineWidth:_O.defaultNode.linkPoints.lineWidth,fill:_O.defaultNode.linkPoints.fill,stroke:_O.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:(0,rg.__assign)({},_O.nodeStateStyles)},shapeType:"star",labelPosition:"center",drawShape:function(t,e){var r=(this.mergeStyle||this.getOptions(t)).icon,n=void 0===r?{}:r,o=this.getShapeStyle(t),i=e.addShape("path",{attrs:o,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});e.shapeMap["".concat(this.type,"-keyShape")]=i;var a=n.width,s=n.height,u=n.show,l=n.text;return u&&(e.shapeMap["".concat(this.type,"-icon")]=l?e.addShape("text",{attrs:(0,rg.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},n),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0}):e.addShape("image",{attrs:(0,rg.__assign)({x:-a/2,y:-s/2},n),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0})),this.drawLinkPoints(t,e),i},drawLinkPoints:function(t,e){var r=(this.mergeStyle||this.getOptions(t)).linkPoints,n=void 0===r?{}:r,o=n.top,i=n.left,a=n.right,s=n.leftBottom,u=n.rightBottom,l=n.size,c=n.r,f=(0,rg.__rest)(n,["top","left","right","leftBottom","rightBottom","size","r"]),h=this.getSize(t)[0];if(a){var p=Math.cos(.1*Math.PI)*h,d=Math.sin(.1*Math.PI)*h;e.shapeMap["link-point-right"]=e.addShape("circle",{attrs:(0,rg.__assign)((0,rg.__assign)({},f),{x:p,y:-d,r:l/2||c||5}),className:"link-point-right",name:"link-point-right"})}if(o){p=Math.cos(.5*Math.PI)*h,d=Math.sin(.5*Math.PI)*h;e.shapeMap["link-point-top"]=e.addShape("circle",{attrs:(0,rg.__assign)((0,rg.__assign)({},f),{x:p,y:-d,r:l/2||c||5}),className:"link-point-top",name:"link-point-top"})}if(i){p=Math.cos(.9*Math.PI)*h,d=Math.sin(.9*Math.PI)*h;e.shapeMap["link-point-left"]=e.addShape("circle",{attrs:(0,rg.__assign)((0,rg.__assign)({},f),{x:p,y:-d,r:l/2||c||5}),className:"link-point-left",name:"link-point-left"})}if(s){p=Math.cos(1.3*Math.PI)*h,d=Math.sin(1.3*Math.PI)*h;e.shapeMap["link-point-bottom"]=e.addShape("circle",{attrs:(0,rg.__assign)((0,rg.__assign)({},f),{x:p,y:-d,r:l/2||c||5}),className:"link-point-left-bottom",name:"link-point-left-bottom"})}if(u){p=Math.cos(1.7*Math.PI)*h,d=Math.sin(1.7*Math.PI)*h;e.shapeMap["link-point-right-bottom"]=e.addShape("circle",{attrs:(0,rg.__assign)((0,rg.__assign)({},f),{x:p,y:-d,r:l/2||c||5}),className:"link-point-right-bottom",name:"link-point-right-bottom"})}},getPath:function(t){var e=this.getSize(t)[0],r=3*e/8,n=t.innerR||r;return vO.getStarPath(e,n)},getShapeStyle:function(t){var e=(this.mergeStyle||this.getOptions(t)).style,r={stroke:t.color},n=(0,ng.mix)({},e,r),o=this.getPath(t);return(0,rg.__assign)({path:o},n)},update:function(t,e,r){var n=e.getContainer(),o=this.getOptions({}).style,i=this.getPath(t),a={stroke:t.color,path:i},s=e.get("keyShape"),u=(0,ng.mix)({},o,s.attr(),a);u=(0,ng.mix)(u,t.style),this.updateShape(t,e,u,!0,r),this.updateLinkPoints(t,n)},updateLinkPoints:function(t,e){var r=this.getOptions({}).linkPoints,n=e.shapeMap["link-point-left"]||e.find(function(t){return"link-point-left"===t.get("className")}),o=e.shapeMap["link-point-right"]||e.find(function(t){return"link-point-right"===t.get("className")}),i=e.shapeMap["link-point-top"]||e.find(function(t){return"link-point-top"===t.get("className")}),a=e.shapeMap["link-point-left-bottom"]||e.find(function(t){return"link-point-left-bottom"===t.get("className")}),s=e.shapeMap["link-point-left-bottom"]||e.find(function(t){return"link-point-right-bottom"===t.get("className")}),u=r,l=n||o||i||a||s;l&&(u=l.attr());var c=(0,ng.mix)({},u,t.linkPoints),f=c.fill,h=c.stroke,p=c.lineWidth,d=c.size/2;d||(d=c.r);var y=t.linkPoints?t.linkPoints:{left:void 0,right:void 0,top:void 0,leftBottom:void 0,rightBottom:void 0},v=y.left,g=y.right,m=y.top,b=y.leftBottom,w=y.rightBottom,S=this.getSize(t)[0],x={r:d,fill:f,stroke:h,lineWidth:p},_=Math.cos(.1*Math.PI)*S,E=Math.sin(.1*Math.PI)*S;o?g||void 0===g?o.attr((0,rg.__assign)((0,rg.__assign)({},x),{x:_,y:-E})):(o.remove(),delete e.shapeMap["link-point-right"]):g&&(e.shapeMap["link-point-right"]=e.addShape("circle",{attrs:(0,rg.__assign)((0,rg.__assign)({},x),{x:_,y:-E}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),_=Math.cos(.5*Math.PI)*S,E=Math.sin(.5*Math.PI)*S,i?m||void 0===m?i.attr((0,rg.__assign)((0,rg.__assign)({},x),{x:_,y:-E})):(i.remove(),delete e.shapeMap["link-point-top"]):m&&(e.shapeMap["link-point-top"]=e.addShape("circle",{attrs:(0,rg.__assign)((0,rg.__assign)({},x),{x:_,y:-E}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),_=Math.cos(.9*Math.PI)*S,E=Math.sin(.9*Math.PI)*S,n?v||void 0===v?n.attr((0,rg.__assign)((0,rg.__assign)({},x),{x:_,y:-E})):(n.remove(),delete e.shapeMap["link-point-left"]):v&&(e.shapeMap["link-point-left"]=e.addShape("circle",{attrs:(0,rg.__assign)((0,rg.__assign)({},x),{x:_,y:-E}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),_=Math.cos(1.3*Math.PI)*S,E=Math.sin(1.3*Math.PI)*S,a?b||void 0===b?a.attr((0,rg.__assign)((0,rg.__assign)({},x),{x:_,y:-E})):(a.remove(),delete e.shapeMap["link-point-left-bottom"]):b&&(e.shapeMap["link-point-left-bottom"]=e.addShape("circle",{attrs:(0,rg.__assign)((0,rg.__assign)({},x),{x:_,y:-E}),className:"link-point-left-bottom",name:"link-point-left-bottom",isAnchorPoint:!0})),_=Math.cos(1.7*Math.PI)*S,E=Math.sin(1.7*Math.PI)*S,s?w||void 0===w?s.attr((0,rg.__assign)((0,rg.__assign)({},x),{x:_,y:-E})):(s.remove(),delete e.shapeMap["link-point-right-bottom"]):w&&(e.shapeMap["link-point-right-bottom"]=e.addShape("circle",{attrs:(0,rg.__assign)((0,rg.__assign)({},x),{x:_,y:-E}),className:"link-point-right-bottom",name:"link-point-right-bottom",isAnchorPoint:!0}))}},"single-node");var Ij=vO.defaultSubjectColors;bO("donut",{options:{size:_O.defaultNode.size,style:{x:0,y:0,stroke:_O.defaultNode.style.stroke,fill:_O.defaultNode.style.fill,lineWidth:_O.defaultNode.style.lineWidth},labelCfg:{style:{fill:_O.nodeLabel.style.fill,fontSize:_O.nodeLabel.style.fontSize,fontFamily:_O.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:_O.defaultNode.linkPoints.size,lineWidth:_O.defaultNode.linkPoints.lineWidth,fill:_O.defaultNode.linkPoints.fill,stroke:_O.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:(0,rg.__assign)({},_O.nodeStateStyles)},shapeType:"circle",labelPosition:"center",drawShape:function(t,e){var r=(this.mergeStyle||this.getOptions(t)).icon,n=void 0===r?{}:r,o=this.getShapeStyle(t),i=(0,ng.deepMix)({},n,t.icon),a=e.addShape("circle",{attrs:o,className:"".concat(this.type,"-keyShape"),draggable:!0,name:"".concat(this.type,"-keyShape")});e.shapeMap["".concat(this.type,"-keyShape")]=a;var s=i.width,u=i.height,l=i.show,c=i.text;return l&&(e.shapeMap["".concat(this.type,"-icon")]=c?e.addShape("text",{attrs:(0,rg.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},i),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0}):e.addShape("image",{attrs:(0,rg.__assign)({x:-s/2,y:-u/2},i),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0})),Nj(t,e,a),this.drawLinkPoints(t,e),a},updateShape:function(t,e,r,n,o){var i=e.get("keyShape");i.attr((0,rg.__assign)({},r)),Rj(t,e,i),this.updateLabel(t,e,o),n&&this.updateIcon(t,e)}},"circle");var Nj=function(t,e,r){var n=t.donutAttrs,o=void 0===n?{}:n,i=t.donutColorMap,a=void 0===i?{}:i,s=Object.keys(o).length;if(o&&s>1){var u=Dj(o,a),l=u.configs,c=u.totalValue;if(c){var f=Bj(r),h=f.lineWidth,p=f.arcR,d=[p,0],y=0;if(1===s)return void Lj(e,{arcR:p,arcBegin:d,beginAngle:y,config:l[0],fanIndex:0,lineWidth:h,totalValue:c,drawWhole:!0});for(var v=0;v<l.length;v++){var g=Lj(e,{arcR:p,arcBegin:d,beginAngle:y,config:l[v],fanIndex:v,lineWidth:h,totalValue:c});if(g.shouldEnd)return;d=g.arcBegin,y=g.beginAngle}}}},Lj=function(t,e){var r,n,o,i=e.arcR,a=e.arcBegin,s=e.beginAngle,u=e.config,l=e.fanIndex,c=e.lineWidth,f=e.totalValue,h=e.drawWhole,p=void 0!==h&&h,d=e.updateShape,y=void 0===d?void 0:d,v=u.value/f;if(v<.001)return{beginAngle:s,arcBegin:a,shape:void 0,shouldEnd:!1};if(p||v>.999)r=[i,1e-4],o=1;else{var g=v*Math.PI*2;n=s+g,r=[i*Math.cos(n),-i*Math.sin(n)],o=g>Math.PI?1:0}var m={path:[["M",a[0],a[1]],["A",i,i,0,o,0,r[0],r[1]]],stroke:u.color||(null===y||void 0===y?void 0:y.attr("stroke"))||Ij[l%Ij.length],lineWidth:c};return y?y.attr(m):t.shapeMap["".concat("fan-shape-").concat(l)]=t.addShape("path",{attrs:m,name:"".concat("fan-shape-").concat(l),draggable:!0}),{beginAngle:n,arcBegin:r,shape:t.shapeMap["".concat("fan-shape-").concat(l)],shouldEnd:p||v>.999}},Rj=function(t,e,r){var n=t.donutAttrs,o=t.donutColorMap,i=void 0===o?{}:o,a={},s=e.getContainer();if(n){var u=Dj(n,i),l=u.configs,c=u.totalValue;if(c)for(var f=Bj(r),h=f.lineWidth,p=f.arcR,d=[p,0],y=0,v=0;v<l.length;v++){var g="".concat("fan-shape-").concat(v),m=Lj(s,{arcR:p,arcBegin:d,beginAngle:y,config:l[v],fanIndex:v,lineWidth:h,totalValue:c,drawWhole:1===l.length,updateShape:s.shapeMap[g]});if(m.shape&&(a[g]=!0),m.shouldEnd)break;d=m.arcBegin,y=m.beginAngle}}Object.keys(s.shapeMap).filter(function(t){return t.includes("fan-shape-")}).forEach(function(t){a[t]||(s.shapeMap[t].remove(!0),delete s.shapeMap[t])})},Dj=function(t,e){var r=0,n=[];return Object.keys(t).forEach(function(o){var i=+t[o];isNaN(i)||(n.push({key:o,value:i,color:e[o]}),r+=i)}),{totalValue:r,configs:n}},Bj=function(t){var e=t.attr("r"),r=.6*e;return{lineWidth:e-r,arcR:(e+r)/2}},Fj=function(t){var e=t.x,r=t.y;return{x:e,y:r,centerX:e,centerY:r,minX:e,minY:r,maxX:e,maxY:r,height:0,width:0}},Gj=function(t){for(var e=[],r={},n=t.length-1;n>=0;n--){var o=t[n];o.id="".concat(o.x,"|||").concat(o.y),r[o.id]||(r[o.id]=o,e.push(o))}return e},Uj=function(t){return Gj(t)},zj=function(t,e){return t.width||t.height?{centerX:t.centerX,centerY:t.centerY,minX:t.minX-e,minY:t.minY-e,maxX:t.maxX+e,maxY:t.maxY+e,height:t.height+2*e,width:t.width+2*e}:t},Vj=function(t,e,r){var n=function(t,e){var r=Math.abs(t.x-e.centerX),n=Math.abs(t.y-e.centerY);return 0===r&&0===n?0:r/e.width>n/e.height}(e,t);if(0===n){var o=t.centerX,i=t.centerY;return r.y<e.y?i=t.minY:r.x>e.x?o=t.maxX:r.x<e.x?o=t.minX:r.x===e.x&&(i=t.maxY),{x:o,y:i}}return n?{x:e.x>t.centerX?t.maxX:t.minX,y:e.y}:{x:e.x,y:e.y>t.centerY?t.maxY:t.minY}},Hj=function(t,e){var r=Math.min(t.minX,e.minX),n=Math.min(t.minY,e.minY),o=Math.max(t.maxX,e.maxX),i=Math.max(t.maxY,e.maxY);return{centerX:(r+o)/2,centerY:(n+i)/2,minX:r,minY:n,maxX:o,maxY:i,height:i-n,width:o-r}},Wj=function(t){return[{x:t.minX,y:t.minY},{x:t.maxX,y:t.minY},{x:t.maxX,y:t.maxY},{x:t.minX,y:t.maxY}]},qj=function(t,e){var r=t.x,n=t.y;return r<e.minX||r>e.maxX||n<e.minY||n>e.maxY},Yj=function(t,e){return Math.abs(t.x-e.x)+Math.abs(t.y-e.y)},Xj=function(t,e,r,n,o){return Yj(t,e)+Yj(t,r)+function(t,e){var r=0;return e.forEach(function(e){e&&(t.x===e.x&&(r+=-2),t.y===e.y&&(r+=-2))}),r}(t,[e,r,n,o])},Jj=function t(e,r,n,o,i){void 0===i&&(i=0),e.unshift(r[o]),n[o]&&n[o]!==o&&i<=100&&t(e,r,n,n[o],i+1)},Kj=function(t,e,r,n){var o=r.x-t.x,i=r.y-t.y,a=n.x-t.x,s=n.y-t.y,u=r.x-e.x,l=r.y-e.y,c=n.x-e.x,f=n.y-e.y;return(o*s-i*a)*(u*f-l*c)<=0&&(o*l-i*u)*(a*f-s*c)<=0},Qj=function(t,e,r){if(r.width||r.height){var n=Wj(r),o=n[0],i=n[1],a=n[2],s=n[3];return Kj(t,e,o,i)||Kj(t,e,o,s)||Kj(t,e,i,a)||Kj(t,e,a,s)}return!1},Zj=function(t,e,r,n){var o=[];return t.forEach(function(t){if(t!==e&&(t.x===e.x||t.y===e.y)){if(Qj(t,e,r)||Qj(t,e,n))return;o.push(t)}}),Gj(o)},$j=function(t,e){var r=[],n=t[0];return r.push("M".concat(n.x," ").concat(n.y)),t.forEach(function(n,o){var i=t[o+1],a=t[o+2];if(i&&a)if(function(t,e,r){return!(t.x===e.x&&e.x===r.x||t.y===e.y&&e.y===r.y)}(n,i,a)){var s=function(t,e,r,n){var o=Yj(t,e),i=Yj(r,e);return o<n&&(n=o),i<n&&(n=i),[{x:e.x-n/o*(e.x-t.x),y:e.y-n/o*(e.y-t.y)},{x:e.x-n/i*(e.x-r.x),y:e.y-n/i*(e.y-r.y)}]}(n,i,a,e),u=s[0],l=s[1];r.push("L".concat(u.x," ").concat(u.y)),r.push("Q".concat(i.x," ").concat(i.y," ").concat(l.x," ").concat(l.y)),r.push("L".concat(l.x," ").concat(l.y))}else r.push("L".concat(i.x," ").concat(i.y));else i&&r.push("L".concat(i.x," ").concat(i.y))}),r.join("")},tI=function(t,e,r,n,o){var i,a;if(r&&r.getType())if("combo"===r.getType()){var s=r.getKeyShape().getBBox();if(s){var u=r.getModel(),l=u.x,c=u.y;(i={x:l,y:c,width:s.width,height:s.height,minX:s.minX+l,maxX:s.maxX+l,minY:s.minY+c,maxY:s.maxY+c}).centerX=(i.minX+i.maxX)/2,i.centerY=(i.minY+i.maxY)/2}else i=Fj(t)}else i=r&&r.getBBox();else i=Fj(t);if(n&&n.getType())if("combo"===n.getType()){var f=n.getKeyShape().getBBox();if(f){var h=n.getModel(),p=h.x,d=h.y;(a={x:p,y:d,width:f.width,height:f.height,minX:f.minX+p,maxX:f.maxX+p,minY:f.minY+d,maxY:f.maxY+d}).centerX=(a.minX+a.maxX)/2,a.centerY=(a.minY+a.maxY)/2}else a=Fj(e)}else a=n&&n.getBBox();else a=Fj(e);var y=zj(i,o),v=zj(a,o),g=Vj(y,t,e),m=Vj(v,e,t),b=function(t){void 0===t&&(t=[]);var e=[],r=[];t.forEach(function(t){e.push(t.x),r.push(t.y)});var n=Math.min.apply(Math,e),o=Math.max.apply(Math,e),i=Math.min.apply(Math,r),a=Math.max.apply(Math,r);return{centerX:(n+o)/2,centerY:(i+a)/2,maxX:o,maxY:a,minX:n,minY:i,height:a-i,width:o-n}}([g,m]),w=Hj(y,b),S=Hj(v,b),x=[];x=x.concat(Wj(w)).concat(Wj(S));var _={x:(t.x+e.x)/2,y:(t.y+e.y)/2};[b,w,S].forEach(function(t){x=x.concat(function(t,e){return function(t,e){return e<t.minX||e>t.maxX?[]:[{x:e,y:t.minY},{x:e,y:t.maxY}]}(t,e.x).concat(function(t,e){return e<t.minY||e>t.maxY?[]:[{x:t.minX,y:e},{x:t.maxX,y:e}]}(t,e.y))}(t,_).filter(function(t){return qj(t,y)&&qj(t,v)}))}),[{x:g.x,y:m.y},{x:m.x,y:g.y}].forEach(function(t){qj(t,y)&&qj(t,v)&&x.push(t)}),x.unshift(g),x.push(m);var E=function(t,e,r,n,o,i,a){var s,u=[],l=((s={})[e.id]=e,s),c={},f={},h={};f[e.id]=0,h[e.id]=Xj(e,r,e);var p=new eI;p.add({id:e.id,value:h[e.id]});var d,y={};for(t.forEach(function(t){y[t.id]=t});Object.keys(l).length;){var v=p.minId(!1);if(!v)break;if((d=l[v])===r){var g=[];return Jj(g,y,c,r.id),g}delete l[d.id],p.remove(d.id),u.push(d);var m=Zj(t,d,n,o);m.forEach(function(t){if(-1===u.indexOf(t)){var n=t.id;l[n]||(l[n]=t);var o=h[d.id]+Yj(d,t);f[n]&&o>=f[n]?p.add({id:n,value:h[n]}):(c[n]=d.id,f[n]=o,h[n]=f[n]+Xj(t,r,e,i,a),p.add({id:n,value:h[n]}))}})}return[e,r]}(x=Gj(x),g,m,i,a,t,e);return E.unshift(t),E.push(e),Uj(E)},eI=function(){function t(){this.arr=[],this.map={},this.arr=[],this.map={}}return t.prototype._innerAdd=function(t,e){for(var r=[0,e-1];r[1]-r[0]>1;){var n=Math.floor((r[0]+r[1])/2);if(this.arr[n].value>t.value)r[1]=n;else{if(!(this.arr[n].value<t.value))return this.arr.splice(n,0,t),void(this.map[t.id]=!0);r[0]=n}}this.arr.splice(r[1],0,t),this.map[t.id]=!0},t.prototype.add=function(t){delete this.map[t.id];var e=this.arr.length;return e?this.arr[e-1].value<t.value?(this.arr.push(t),void(this.map[t.id]=!0)):void this._innerAdd(t,e):(this.arr.push(t),void(this.map[t.id]=!0))},t.prototype.remove=function(t){this.map[t]&&delete this.map[t]},t.prototype._clearAndGetMinId=function(){for(var t,e=this.arr.length-1;e>=0;e--)this.map[this.arr[e].id]?t=this.arr[e].id:this.arr.splice(e,1);return t},t.prototype._findFirstId=function(){for(;this.arr.length;){var t=this.arr.shift();if(this.map[t.id])return t.id}},t.prototype.minId=function(t){return t?this._clearAndGetMinId():this._findFirstId()},t}(),rI={offset:20,maxAllowedDirectionChange:Math.PI/2,maximumLoops:2e3,gridSize:10,directions:[{stepX:1,stepY:0},{stepX:-1,stepY:0},{stepX:0,stepY:1},{stepX:0,stepY:-1}],get penalties(){return{0:0,45:this.gridSize/2,90:this.gridSize/2}},distFunc:function(t,e){return Math.abs(t.x-e.x)+Math.abs(t.y-e.y)},fallbackRoute:function(t,e,r,n,o){return Uj(tI(t,e,r,n,o.offset))}},nI=(Math.PI,function(t,e){var r=Math.round(Math.abs(t/e));return r<0?0:(t<0?-1:1)*r}),oI=function(t,e){var r=e.x-t.x,n=e.y-t.y;return r||n?Math.atan2(n,r):0},iI=function(t,e){var r=Math.abs(t-e);return r>Math.PI?2*Math.PI-r:r},aI=function(t,e,r){for(var n=1/0,o=0,i=e.length;o<i;o++){var a=r(t,e[o]);a<n&&(n=a)}return n},sI=function(t,e,r,n,o){var i=[];if(!r)return[t];var a=o.directions,s=o.offset,u=r.getBBox(),l=e.x>u.minX&&e.x<u.maxX&&e.y>u.minY&&e.y<u.maxY,c=zj(u,s);for(var f in c)c[f]=nI(c[f],o.gridSize);if(l){for(var h=0,p=a;h<p.length;h++){var d=p[h],y=[[{x:c.minX,y:c.minY},{x:c.maxX,y:c.minY}],[{x:c.minX,y:c.minY},{x:c.minX,y:c.maxY}],[{x:c.maxX,y:c.minY},{x:c.maxX,y:c.maxY}],[{x:c.minX,y:c.maxY},{x:c.maxX,y:c.maxY}]];for(f=0;f<4;f++){var v=y[f],g=vO.getLineIntersect(t,{x:t.x+d.stepX*c.width,y:t.y+d.stepY*c.height},v[0],v[1]);g&&!Qj(t,g,u)&&(g.id="".concat(g.x,"|||").concat(g.y),i.push(g))}}return i}var m=Vj(c,t,n);return m.id="".concat(m.x,"|||").concat(m.y),[m]},uI=function(t,e,r,n){var o=oI(t,e),i=r[t.id];if(!i){var a=oI(n,t);return iI(a,o)}var s=oI({x:i.x,y:i.y},t);return iI(s,o)},lI=function(t,e,r,n,o,i,a){var s=[n],u=n,l=t.id,c=t.x,f=t.y,h={x:c,y:f,id:l};uI(h,i,e,r)&&(u={x:i.x===n.x?n.x:h.x*a,y:i.y===n.y?n.y:h.y*a},s.unshift(u));for(var p=e[l];p&&p.id!==l;){var d={x:c,y:f,id:l},y={x:p.x,y:p.y,id:p.id};uI(y,d,e,r)&&(u={x:y.x===d.x?u.x:y.x*a,y:y.y===d.y?u.y:y.y*a},s.unshift(u)),c=y.x,f=y.y,p=e[l=y.id]}return s[0].x=c===r.x?o.x:u.x,s[0].y=f===r.y?o.y:u.y,s.unshift(o),s},cI=function(t,e,r,n,o){if(isNaN(t.x)||isNaN(e.x))return[];var i=(0,ng.deepMix)(rI,o);i.obstacles=i.obstacles||[];var a=i.penalties,s=i.gridSize,u=function(t,e,r){var n={};return t.forEach(function(t){if(t)for(var o=zj(t.getBBox(),r),i=nI(o.minX,e);i<=nI(o.maxX,e);i+=1)for(var a=nI(o.minY,e);a<=nI(o.maxY,e);a+=1)n["".concat(i,"|||").concat(a)]=!0}),n}(i.obstacles.concat([r,n]),s,i.offset),l={x:nI(t.x,s),y:nI(t.y,s)},c={x:nI(e.x,s),y:nI(e.y,s)};t.id="".concat(l.x,"|||").concat(l.y),e.id="".concat(c.x,"|||").concat(c.y);var f=sI(l,t,r,c,i),h=sI(c,e,n,l,i);f.forEach(function(t){delete u[t.id]}),h.forEach(function(t){delete u[t.id]});for(var p={},d={},y={},v={},g={},m=new eI,b=0;b<f.length;b++){var w=f[b];p[w.id]=w,v[w.id]=0,g[w.id]=aI(w,h,i.distFunc),m.add({id:w.id,value:g[w.id]})}var S,x,_,E,O,P,k=i.maximumLoops,C=1/0,T={};for(h.forEach(function(t){T["".concat(t.x,"|||").concat(t.y)]=!0}),Object.keys(p).forEach(function(t){var e=p[t].id;g[e]<=C&&(C=g[e],S=p[e])});Object.keys(p).length>0&&k>0;){var A=m.minId((k+1)%30==0);if(!A)break;if(S=p[A],T["".concat(S.x,"|||").concat(S.y)])return lI(S,y,l,e,t,c,s);delete p[S.id],m.remove(S.id),d[S.id]=!0;for(b=0;b<i.directions.length;b++){x=i.directions[b];var M="".concat(Math.round(S.x)+x.stepX,"|||").concat(Math.round(S.y)+x.stepY);if(_={x:S.x+x.stepX,y:S.y+x.stepY,id:M},!d[M]&&!((P=uI(S,_,y,l))>i.maxAllowedDirectionChange||u[M])){p[M]||(p[M]=_);var j=a[P];E=i.distFunc(S,_)+(isNaN(j)?s:j),O=v[S.id]+E;var I=v[M];I&&O>=I||(y[M]=S,v[M]=O,g[M]=O+aI(_,h,i.distFunc),m.add({id:M,value:g[M]}))}}k-=1}return i.fallbackRoute(t,e,r,n,i)};wO("polyline",{options:{color:_O.defaultEdge.color,size:_O.defaultEdge.size,style:{radius:0,offset:15,x:0,y:0,stroke:_O.defaultEdge.style.stroke,lineAppendWidth:_O.defaultEdge.style.lineAppendWidth},labelCfg:{style:{fill:_O.edgeLabel.style.fill,fontSize:_O.edgeLabel.style.fontSize,fontFamily:_O.windowFontFamily}},routeCfg:{obstacles:[],maxAllowedDirectionChange:Math.PI,maximumLoops:500,gridSize:10},stateStyles:(0,rg.__assign)({},_O.edgeStateStyles)},shapeType:"polyline",labelPosition:"center",drawShape:function(t,e){var r=this.getShapeStyle(t);0===r.radius&&delete r.radius;var n=e.addShape("path",{className:"edge-shape",name:"edge-shape",attrs:r});return e.shapeMap["edge-shape"]=n,n},getShapeStyle:function(t){var e=this.options.style,r={stroke:t.color},n=(0,ng.mix)({},e,r,t.style);t=this.getPathPoints(t),this.radius=n.radius,this.offset=n.offset;var o=t.startPoint,i=t.endPoint,a=this.getControlPoints(t),s=[o];a&&(s=s.concat(a)),s.push(i);var u=t.sourceNode,l=t.targetNode,c=n.radius,f=this.options.routeCfg,h=(0,ng.mix)({},f,t.routeCfg);h.offset=n.offset;var p=this.getPath(s,u,l,c,h,!Boolean(a));return((0,ng.isArray)(p)&&p.length<=1||(0,ng.isString)(p)&&-1===p.indexOf("L"))&&(p="M0 0, L0 0"),(isNaN(o.x)||isNaN(o.y)||isNaN(i.x)||isNaN(i.y))&&(p="M0 0, L0 0"),(0,ng.mix)({},_O.defaultEdge.style,n,{lineWidth:t.size,path:p})},updateShapeStyle:function(t,e){var r=e.getContainer();if(e.isVisible()){var n={stroke:t.color},o=r.shapeMap["edge-shape"]||r.find(function(t){return"edge-shape"===t.get("className")})||e.getKeyShape(),i=t.size,a=(t=this.getPathPoints(t)).startPoint,s=t.endPoint,u=this.getControlPoints(t),l=[a];u&&(l=l.concat(u)),l.push(s);var c=o.attr(),f=(0,ng.mix)({},n,c,t.style),h=t.sourceNode,p=t.targetNode,d=f.radius,y=this.options.routeCfg,v=(0,ng.mix)({},y,t.routeCfg);v.offset=f.offset;var g=this.getPath(l,h,p,d,v,!Boolean(u));((0,ng.isArray)(g)&&g.length<=1||(0,ng.isString)(g)&&-1===g.indexOf("L"))&&(g="M0 0, L0 0"),(isNaN(a.x)||isNaN(a.y)||isNaN(s.x)||isNaN(s.y))&&(g="M0 0, L0 0"),c.endArrow&&!1===f.endArrow&&(t.style.endArrow={path:""}),c.startArrow&&!1===f.startArrow&&(t.style.startArrow={path:""});var m=(0,ng.mix)(n,o.attr(),{lineWidth:i,path:g},t.style);o&&o.attr(m)}},getPath:function(t,e,r,n,o,i){var a=o.offset,s=o.obstacles,u=o.simple;if(!a||t.length>2||!1===i){if(n)return $j(t,n);var l=[];return(0,ng.each)(t,function(t,e){0===e?l.push(["M",t.x,t.y]):l.push(["L",t.x,t.y])}),l}!1===u||(null===s||void 0===s?void 0:s.length)||(u=!0);var c=u?tI(t[t.length-1],t[0],r,e,a):cI(t[0],t[t.length-1],e,r,o);return c&&c.length?n?$j(c,n):(c=function(t){if(!(null===t||void 0===t?void 0:t.length))return t;for(var e=t[t.length-1],r={x:e.x,y:e.y},n=[e],o=[e],i=t.length-2;i>=0;i--){var a,s=t[i];s.x===r.x?n.push(s):(n=[s],r.x=s.x),s.y===r.y?o.push(s):(o=[s],r.y=s.y),n.length>2?(a=t.indexOf(n[1]))>-1&&t.splice(a,1):o.length>2&&(a=t.indexOf(o[1]))>-1&&t.splice(a,1)}return t}(c),vO.pointsToPolygon(c)):"M0 0, L0 0"}},"single-edge");var fI=qC.cloneEvent,hI=qC.isNaN,pI=Math.abs,dI=["shift","ctrl","alt","control"],yI={getDefaultCfg:function(){return{direction:"both",enableOptimize:!1,scalableRange:0,allowDragOnItem:!1}},getEvents:function(){return{mousedown:"onMouseDown",drag:"onDragMove",dragend:"onMouseUp","canvas:click":"onMouseUp",keyup:"onKeyUp",focus:"onKeyUp",keydown:"onKeyDown",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onMouseUp"}},updateViewport:function(t){var e=this.origin,r=+t.clientX,n=+t.clientY;if(!hI(r)&&!hI(n)){var o=r-e.x,i=n-e.y;"x"===this.get("direction")?i=0:"y"===this.get("direction")&&(o=0),this.origin={x:r,y:n};var a=this.graph.get("width"),s=this.graph.get("height"),u=this.graph.get("canvas").getCanvasBBox(),l=this.scalableRange,c=this.scalableRange;l<1&&l>-1&&(l*=a,c*=s),(u.minX<=a+l&&u.minX+o>a+l||u.maxX+l>=0&&u.maxX+l+o<0)&&(o=0),(u.minY<=s+c&&u.minY+i>s+c||u.maxY+c>=0&&u.maxY+c+i<0)&&(i=0),this.graph.translate(o,i)}},onTouchStart:function(t){var e=t.originalEvent.touches,r=e[0],n=e[1];r&&n||(t.preventDefault(),this.mousedown=!0,this.onDragStart(t))},onMouseDown:function(t){this.mousedown=!0},onDragMove:function(t){this.mousedown&&(this.dragstart?this.onDrag(t):(this.dragstart=!0,this.onDragStart(t)))},onDragStart:function(t){var e=t.originalEvent;if((!e||"touchstart"===t.name||0===e.button)&&("touchstart"===t.name||"undefined"==typeof window||!window.event||window.event.buttons||window.event.button)&&this.shouldBegin(t,this)&&!this.keydown&&this.allowDrag(t)){if(this.origin={x:t.clientX,y:t.clientY},this.dragging=!1,this.enableOptimize){for(var r=this.graph,n=r.getEdges(),o=0,i=n.length;o<i;o++){var a=n[o].get("group").get("children");a&&a.forEach(function(t){t.set("ori-visibility",t.get("ori-visibility")||t.get("visible")),t.hide()})}for(var s=r.getNodes(),u=0,l=s.length;u<l;u++)for(var c=0,f=s[u].getContainer().get("children");c<f.length;c++){var h=f[c];h.get("isKeyShape")||(h.set("ori-visibility",h.get("ori-visibility")||h.get("visible")),h.hide())}}if("undefined"!=typeof window){var p=this;this.handleDOMContextMenu=function(t){return p.onMouseUp(t)},document.body.addEventListener("contextmenu",this.handleDOMContextMenu)}}},onTouchMove:function(t){var e=t.originalEvent.touches,r=e[0],n=e[1];r&&n?this.onMouseUp(t):(t.preventDefault(),this.onDrag(t))},onDrag:function(t){if(this.mousedown){var e=this.graph;if(!this.keydown&&this.allowDrag(t)&&(t=fI(t),this.origin)){if(this.dragging)t.type="drag",e.emit("canvas:drag",t);else{if(pI(this.origin.x-t.clientX)+pI(this.origin.y-t.clientY)<10)return;this.shouldBegin(t,this)&&(t.type="dragstart",e.emit("canvas:dragstart",t),this.originPosition={x:t.clientX,y:t.clientY},this.dragging=!0)}this.shouldUpdate(t,this)&&this.updateViewport(t)}}},onMouseUp:function(t){var e,r;this.mousedown=!1,this.dragstart=!1;var n=this.graph;if(!this.keydown){var o=n.getZoom(),i=n.get("modeController"),a=null===(r=null===(e=null===i||void 0===i?void 0:i.modes[i.mode])||void 0===e?void 0:e.filter(function(t){return"zoom-canvas"===t.type}))||void 0===r?void 0:r[0],s=a?a.optimizeZoom||.1:0;if(this.enableOptimize){for(var u=n.getEdges(),l=0,c=u.length;l<c;l++){var f=u[l].get("group").get("children");f&&f.forEach(function(t){var e=t.get("ori-visibility");t.set("ori-visibility",void 0),e&&t.show()})}if(o>s)for(var h=n.getNodes(),p=0,d=h.length;p<d;p++)for(var y=0,v=h[p].getContainer().get("children");y<v.length;y++){var g=v[y];if(!g.get("isKeyShape")){var m=g.get("ori-visibility");g.set("ori-visibility",void 0),m&&g.show()}}}this.dragging?(t=fI(t),this.shouldEnd(t,this)&&this.updateViewport(t),t.type="dragend",t.dx=t.clientX-this.originPosition.x,t.dy=t.clientY-this.originPosition.y,n.emit("canvas:dragend",t),this.endDrag(),"undefined"!=typeof window&&document.body.removeEventListener("contextmenu",this.handleDOMContextMenu)):this.origin=null}},endDrag:function(){this.origin=null,this.dragging=!1,this.dragbegin=!1,this.mousedown=!1,this.dragstart=!1},onKeyDown:function(t){var e=t.key;e&&(dI.indexOf(e.toLowerCase())>-1?this.keydown=!0:this.keydown=!1)},onKeyUp:function(){this.keydown=!1,this.origin=null,this.dragging=!1,this.dragbegin=!1},allowDrag:function(t){var e,r,n=t.target,o=n&&n.isCanvas&&n.isCanvas();if((0,ng.isBoolean)(this.allowDragOnItem)&&!this.allowDragOnItem&&!o)return!1;if((0,ng.isObject)(this.allowDragOnItem)){var i=this.allowDragOnItem,a=i.node,s=i.edge,u=i.combo,l=null===(r=null===(e=t.item)||void 0===e?void 0:e.getType)||void 0===r?void 0:r.call(e);if(!a&&"node"===l)return!1;if(!s&&"edge"===l)return!1;if(!u&&"combo"===l)return!1}return!0}},vI={getDefaultCfg:function(){return{updateEdge:!0,delegateStyle:{},enableDelegate:!1,onlyChangeComboSize:!1,comboActiveState:"",selectedState:"selected",enableOptimize:!1,enableDebounce:!1,enableStack:!0}},getEvents:function(){return{"node:mousedown":"onMouseDown",drag:"onDragMove",dragend:"onDragEnd","combo:dragenter":"onDragEnter","combo:dragleave":"onDragLeave","combo:drop":"onDropCombo","node:drop":"onDropNode","canvas:drop":"onDropCanvas",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onDragEnd",afterchangedata:"onDragEnd"}},validationCombo:function(t){return!(!this.origin||!t||t.destroyed)&&"combo"===t.getType()},onTouchStart:function(t){if(t.item){try{var e=t.originalEvent.touches,r=e[0],n=e[1];if(r&&n)return;t.preventDefault()}catch(t){console.warn("Touch original event not exist!")}this.mousedown={item:t.item,target:t.target,origin:{x:t.x,y:t.y}},this.dragstart=!0,this.onDragStart(t)}},onTouchMove:function(t){try{var e=t.originalEvent.touches,r=e[0],n=e[1];if(r&&n)return void this.onDragEnd(t);t.preventDefault()}catch(t){console.warn("Touch original event not exist!")}this.onDrag(t)},onMouseDown:function(t){this.mousedown={item:t.item,target:t.target,origin:{x:t.x,y:t.y}},"undefined"==typeof window||this.windowEventBinded||(this.windowEventBinded=!0,document.body.addEventListener("contextmenu",this.onDragEnd.bind(this)),document.body.addEventListener("mouseup",this.onDragEnd.bind(this)))},onDragMove:function(t){var e,r;"node"===(null===(r=null===(e=t.item)||void 0===e?void 0:e.getType)||void 0===r?void 0:r.call(e))?this.mousedown&&(this.dragstart?this.onDrag((0,rg.__assign)((0,rg.__assign)({},t),this.mousedown)):(this.dragstart=!0,this.onDragStart(t))):this.onDragEnd()},onDragStart:function(t){var e=this;if(this.currentShouldEnd=!0,this.shouldBegin((0,rg.__assign)((0,rg.__assign)({},t),this.mousedown),this)){var r=this.mousedown,n=r.item,o=r.target;if(n&&!n.destroyed&&!n.hasLocked()){if(n.getContainer().set("capture",!1),this.cachedCaptureItems||(this.cachedCaptureItems=[]),this.cachedCaptureItems.push(n),o)if(o.get("isAnchorPoint"))return;var i=this.graph;this.targets=[],this.targetCombo=null;var a=i.findAllByState("node",this.selectedState),s=n.get("id");if(0===a.filter(function(t){var e=t.get("id");return s===e}).length?this.targets.push(n):a.length>1?a.forEach(function(t){t.hasLocked()||e.targets.push(t)}):this.targets.push(n),this.graph.get("enabledStack")&&this.enableStack){var u=[];this.targets.forEach(function(t){var e=t.getModel(),r=e.x,n=e.y,o=e.id;u.push({x:r,y:n,id:o})}),this.set("beforeDragNodes",u)}this.hidenEdge={},this.get("updateEdge")&&this.enableOptimize&&!this.enableDelegate&&this.targets.forEach(function(t){t.getEdges().forEach(function(t){t.isVisible()&&(e.hidenEdge[t.getID()]=!0,t.hide())})}),this.origin=this.mousedown.origin,this.point={},this.originPoint={}}}},onDrag:function(t){var e=this;if(this.mousedown&&this.origin&&this.shouldUpdate(t,this))if(this.get("enableDelegate"))this.updateDelegate(t);else if(this.enableDebounce)this.debounceUpdate({targets:this.targets,graph:this.graph,point:this.point,origin:this.origin,evt:t,updateEdge:this.get("updateEdge"),onlyChangeComboSize:this.onlyChangeComboSize,updateParentCombos:this.updateParentCombos});else{var r={};this.targets.map(function(n){e.update(n,t);var o=n.getModel().comboId;o&&(r[o]=e.graph.findById(o))}),this.onlyChangeComboSize&&this.updateParentCombos()}},onDragEnd:function(t){var e,r=this;if(this.mousedown=!1,this.dragstart=!1,"undefined"!=typeof window&&this.windowEventBinded&&(this.windowEventBinded=!1,document.body.removeEventListener("contextmenu",this.onDragEnd.bind(this)),document.body.removeEventListener("mouseup",this.onDragEnd.bind(this))),this.origin){null===(e=this.cachedCaptureItems)||void 0===e||e.forEach(function(t){t.getContainer().set("capture",!0)}),this.cachedCaptureItems=[],this.delegateRect&&(this.delegateRect.remove(),this.delegateRect=null),this.get("updateEdge")&&this.enableOptimize&&!this.enableDelegate&&this.targets.forEach(function(t){t.getEdges().forEach(function(t){r.hidenEdge[t.getID()]&&t.show(),t.refresh()})}),this.hidenEdge={};var n=this.graph;if(n.get("enabledStack")&&this.enableStack){var o={before:{nodes:[],edges:[],combos:[]},after:{nodes:[],edges:[],combos:[]}};this.get("beforeDragNodes").forEach(function(t){o.before.nodes.push(t)}),this.targets.forEach(function(t){var e=t.getModel(),r=e.x,n=e.y,i=e.id;o.after.nodes.push({x:r,y:n,id:i})}),n.pushStack("update",(0,ng.clone)(o))}n.emit("dragnodeend",{items:this.targets,targetItem:null}),this.point={},this.origin=null,this.originPoint={},this.targets.length=0,this.targetCombo=null}},onDropCombo:function(t){var e=t.item;if(this.currentShouldEnd=this.shouldEnd(t,e,this),this.updatePositions(t,!this.currentShouldEnd),this.currentShouldEnd&&this.validationCombo(e)){var r=this.graph;if(this.comboActiveState&&r.setItemState(e,this.comboActiveState,!1),this.targetCombo=e,this.onlyChangeComboSize)r.updateCombos();else{var n=e.getModel();this.targets.map(function(t){t.getModel().comboId!==n.id&&r.updateComboTree(t,n.id)}),r.updateCombo(e)}r.emit("dragnodeend",{items:this.targets,targetItem:this.targetCombo})}},onDropCanvas:function(t){var e=this.graph;this.currentShouldEnd=this.shouldEnd(t,void 0,this),this.updatePositions(t,!this.currentShouldEnd),this.targets&&0!==this.targets.length&&this.currentShouldEnd&&(this.onlyChangeComboSize?this.updateParentCombos():this.targets.map(function(t){t.getModel().comboId&&e.updateComboTree(t)}))},onDropNode:function(t){if(this.targets&&0!==this.targets.length){var e=t.item,r=this.graph,n=e.getModel().comboId,o=n?r.findById(n):void 0;if(this.currentShouldEnd=this.shouldEnd(t,o,this),this.updatePositions(t,!this.currentShouldEnd),this.currentShouldEnd){if(this.onlyChangeComboSize)this.updateParentCombos();else if(n){var i=r.findById(n);this.comboActiveState&&r.setItemState(i,this.comboActiveState,!1),this.targets.map(function(t){var e=t.getModel();n!==e.comboId&&r.updateComboTree(t,n)}),r.updateCombo(i)}else this.targets.map(function(t){t.getModel().comboId&&r.updateComboTree(t)});r.emit("dragnodeend",{items:this.targets,targetItem:e})}}},onDragEnter:function(t){var e=t.item;if(this.validationCombo(e)){var r=this.graph;this.comboActiveState&&r.setItemState(e,this.comboActiveState,!0)}},onDragLeave:function(t){var e=t.item;if(this.validationCombo(e)){var r=this.graph;this.comboActiveState&&r.setItemState(e,this.comboActiveState,!1)}},updatePositions:function(t,e){var r=this;this.targets&&0!==this.targets.length&&(this.get("enableDelegate")?this.enableDebounce?this.debounceUpdate({targets:this.targets,graph:this.graph,point:this.point,origin:this.origin,evt:t,updateEdge:this.get("updateEdge"),onlyChangeComboSize:this.onlyChangeComboSize,updateParentCombos:this.updateParentCombos}):e||this.targets.map(function(e){return r.update(e,t)}):this.targets.map(function(n){return r.update(n,t,e)}))},update:function(t,e,r){var n=this.origin,o=t.get("model"),i=t.get("id");this.point[i]||(this.point[i]={x:o.x||0,y:o.y||0});var a=e.x-n.x+this.point[i].x,s=e.y-n.y+this.point[i].y;r&&(a+=n.x-e.x,s+=n.y-e.y);var u={x:a,y:s};this.get("updateEdge")?this.graph.updateItem(t,u,!1):t.updatePosition(u)},debounceUpdate:(0,ng.debounce)(function(t){var e=t.targets,r=t.graph,n=t.point,o=t.origin,i=t.evt,a=t.updateEdge,s=t.onlyChangeComboSize,u=t.updateParentCombos;e.map(function(t){var e=t.get("model"),s=t.get("id");n[s]||(n[s]={x:e.x||0,y:e.y||0});var u={x:i.x-o.x+n[s].x,y:i.y-o.y+n[s].y};a?r.updateItem(t,u,!1):t.updatePosition(u)}),s&&u(r,e)},50,!0),updateDelegate:function(t){var e=this.graph;if(this.delegateRect){var r=t.x-this.origin.x+this.originPoint.minX,n=t.y-this.origin.y+this.originPoint.minY;this.delegateRect.attr({x:r,y:n})}else{var o=e.get("group"),i=(0,ng.deepMix)({},kC.delegateStyle,this.delegateStyle),a=this.calculationGroupPosition(t),s=a.x,u=a.y,l=a.width,c=a.height,f=a.minX,h=a.minY;this.originPoint={x:s,y:u,width:l,height:c,minX:f,minY:h},this.delegateRect=o.addShape("rect",{attrs:(0,rg.__assign)({width:l,height:c,x:s,y:u},i),name:"rect-delegate-shape"}),this.delegate=this.delegateRect,this.delegateRect.set("capture",!1)}},calculationGroupPosition:function(t){var e=this.targets;0===e.length&&e.push(t.item);for(var r=1/0,n=-1/0,o=1/0,i=-1/0,a=0;a<e.length;a++){var s=e[a].getBBox(),u=s.minX,l=s.minY,c=s.maxX,f=s.maxY;u<r&&(r=u),l<o&&(o=l),c>n&&(n=c),f>i&&(i=f)}return{x:Math.floor(r),y:Math.floor(o),width:Math.ceil(n)-Math.floor(r),height:Math.ceil(i)-Math.floor(o),minX:r,minY:o}},updateParentCombos:function(t,e){var r=t||this.graph,n=e||this.targets,o={};null===n||void 0===n||n.forEach(function(t){var e=t.getModel().comboId;e&&(o[e]=r.findById(e))}),Object.values(o).forEach(function(t){t&&r.updateCombo(t)})}},gI=null,mI={getDefaultCfg:function(){return{trigger:"mouseenter",activeState:"active",inactiveState:"inactive",resetSelected:!1,shouldClearStatusOnSecond:!1,shouldUpdate:function(){return!0}}},getEvents:function(){return"mouseenter"===this.get("trigger")?{"node:mouseenter":"setAllItemStates","combo:mouseenter":"setAllItemStates","node:mouseleave":"clearActiveState","combo:mouseleave":"clearActiveState"}:{"node:click":"setAllItemStates","combo:click":"setAllItemStates","canvas:click":"clearActiveState","node:touchstart":"setOnTouchStart","combo:touchstart":"setOnTouchStart","canvas:touchstart":"clearOnTouchStart"}},setOnTouchStart:function(t){try{var e=t.originalEvent.touches,r=e[0],n=e[1];if(r&&n)return;t.preventDefault()}catch(t){console.warn("Touch original event not exist!")}this.setAllItemStates(t)},clearOnTouchStart:function(t){try{var e=t.originalEvent.touches,r=e[0],n=e[1];if(r&&n)return;t.preventDefault()}catch(t){console.warn("Touch original event not exist!")}this.clearActiveState(t)},setAllItemStates:function(t){clearTimeout(this.timer),this.throttleSetAllItemStates(t,this)},clearActiveState:function(t){var e=this;this.shouldClearStatusOnSecond&&(gI=null),this.timer=setTimeout(function(){e.throttleClearActiveState(t,e)},50)},throttleSetAllItemStates:(0,ng.throttle)(function(t,e){var r=t.item,n=e.graph;if(n&&!n.destroyed&&(e.item=r,e.shouldUpdate(t.item,{event:t,action:"activate"},e))){var o=e.shouldClearStatusOnSecond,i=r.getModel().id;if(gI===i&&o)return e.throttleClearActiveState(t,e),void(gI=null);for(var a=e.activeState,s=e.inactiveState,u=n.getNodes(),l=n.getCombos(),c=n.getEdges(),f=n.get("vedges"),h=u.length,p=l.length,d=c.length,y=f.length,v=e.inactiveItems||{},g=e.activeItems||{},m=0;m<h;m++){var b=u[m],w=b.getID(),S=b.hasState("selected");e.resetSelected&&S&&n.setItemState(b,"selected",!1),g[w]&&(n.setItemState(b,a,!1),delete g[w]),s&&!v[w]&&(n.setItemState(b,s,!0),v[w]=b)}for(m=0;m<p;m++){var x=l[m],_=x.getID();S=x.hasState("selected");e.resetSelected&&S&&n.setItemState(x,"selected",!1),g[_]&&(n.setItemState(x,a,!1),delete g[_]),s&&!v[_]&&(n.setItemState(x,s,!0),v[_]=x)}for(m=0;m<d;m++){g[T=(C=c[m]).getID()]&&(n.setItemState(C,a,!1),delete g[T]),s&&!v[T]&&(n.setItemState(C,s,!0),v[T]=C)}for(m=0;m<y;m++){var E=f[m],O=E.getID();g[O]&&(n.setItemState(E,a,!1),delete g[O]),s&&!v[O]&&(n.setItemState(E,s,!0),v[O]=E)}if(r&&!r.destroyed){s&&(n.setItemState(r,s,!1),delete v[r.getID()]),g[r.getID()]||(n.setItemState(r,a,!0),g[r.getID()]=r);var P=r.getEdges(),k=P.length;for(m=0;m<k;m++){var C,T=(C=P[m]).getID(),A=void 0,M=(A=C.getSource()===r?C.getTarget():C.getSource()).getID();s&&v[M]&&(n.setItemState(A,s,!1),delete v[M]),g[M]||(n.setItemState(A,a,!0),g[M]=A),v[T]&&(n.setItemState(C,s,!1),delete v[T]),g[T]||(n.setItemState(C,a,!0),g[T]=C),C.toFront()}}e.activeItems=g,e.inactiveItems=v,o&&(gI=r.getModel().id),n.emit("afteractivaterelations",{item:t.item,action:"activate"})}},50,{trailing:!0,leading:!0}),throttleClearActiveState:(0,ng.throttle)(function(t,e){var r=e.get("graph");if(r&&!r.destroyed&&e.shouldUpdate(t.item,{event:t,action:"deactivate"},e)){var n=e.activeState,o=e.inactiveState,i=e.activeItems||{},a=e.inactiveItems||{};Object.values(i).filter(function(t){return!t.destroyed}).forEach(function(t){r.clearItemStates(t,n)}),Object.values(a).filter(function(t){return!t.destroyed}).forEach(function(t){r.clearItemStates(t,o)}),e.activeItems={},e.inactiveItems={},r.emit("afteractivaterelations",{item:t.item||e.get("item"),action:"deactivate"})}},50,{trailing:!0,leading:!0})},bI=Math.min,wI=Math.max,SI=Math.abs,xI=["drag","shift","ctrl","alt","control"],_I={getDefaultCfg:function(){return{brushStyle:{fill:"#EEF6FF",fillOpacity:.4,stroke:"#DDEEFE",lineWidth:1},onSelect:function(){},onDeselect:function(){},selectedState:"selected",trigger:"shift",includeEdges:!0,includeCombos:!1,selectOnCombo:!1,selectedEdges:[],selectedNodes:[],selectedCombos:[]}},getEvents:function(){return xI.indexOf(this.trigger.toLowerCase())>-1||(this.trigger="shift",console.warn("Behavior brush-select ç trigger åæ°ä¸åæ³ï¼è¯·è¾å¥ 'drag'ã'shift'ã'ctrl' æ 'alt'")),"drag"===this.trigger?{dragstart:"onMouseDown",drag:"onMouseMove",dragend:"onMouseUp","canvas:click":"clearStates"}:{dragstart:"onMouseDown",drag:"onMouseMove",dragend:"onMouseUp","canvas:click":"clearStates",keyup:"onKeyUp",keydown:"onKeyDown"}},onMouseDown:function(t){var e=t.item,r=this.brush,n=this.selectOnCombo,o="combo"===(null===e||void 0===e?void 0:e.getType());o&&!n||!o&&e||("drag"===this.trigger||this.keydown)&&(this.selectedNodes&&0!==this.selectedNodes.length&&this.clearStates(),r||(r=this.createBrush()),this.originPoint={x:t.canvasX,y:t.canvasY},r.attr({width:0,height:0}),r.show(),this.dragging=!0)},onMouseMove:function(t){this.dragging&&("drag"===this.trigger||this.keydown)&&this.updateBrush(t)},onMouseUp:function(t){this.graph;(this.brush||this.dragging)&&("drag"===this.trigger||this.keydown)&&(this.brush.remove(!0),this.brush=null,this.getSelectedNodes(t),this.dragging=!1)},clearStates:function(){var t=this.graph,e=this.selectedState,r=t.findAllByState("node",e),n=t.findAllByState("edge",e),o=t.findAllByState("combo",e);r.forEach(function(r){return t.setItemState(r,e,!1)}),n.forEach(function(r){return t.setItemState(r,e,!1)}),o.forEach(function(r){return t.setItemState(r,e,!1)}),this.selectedNodes=[],this.selectedEdges=[],this.selectedCombos=[],this.onDeselect&&this.onDeselect(this.selectedNodes,this.selectedEdges,this.selectedCombos),t.emit("nodeselectchange",{selectedItems:{nodes:[],edges:[],combos:[]},select:!1})},isBBoxCenterInRect:function(t,e,r,n,o){var i=t.getBBox();return i.centerX>=e&&i.centerX<=r&&i.centerY>=n&&i.centerY<=o},getSelectedNodes:function(t){var e=this,r=this.graph,n=this.originPoint,o=this.shouldUpdate,i=this.isBBoxCenterInRect,a=this.selectedState,s={x:t.x,y:t.y},u=r.getPointByCanvas(n.x,n.y),l=bI(s.x,u.x),c=wI(s.x,u.x),f=bI(s.y,u.y),h=wI(s.y,u.y),p=[],d=[];r.getNodes().forEach(function(t){if(t.isVisible()&&i(t,l,c,f,h)&&o(t,"select",e)){p.push(t);var n=t.getModel();d.push(n.id),r.setItemState(t,a,!0)}});var y=[];this.includeEdges&&p.forEach(function(t){t.getOutEdges().forEach(function(t){if(t.isVisible()){var n=t.getModel(),i=n.source,a=n.target;d.includes(i)&&d.includes(a)&&o(t,"select",e)&&(y.push(t),r.setItemState(t,e.selectedState,!0))}})});var v=[];this.includeCombos&&r.getCombos().forEach(function(t){if(t.isVisible()&&i(t,l,c,f,h)&&o(t,"select",e)){v.push(t);var n=t.getModel();d.push(n.id),r.setItemState(t,a,!0)}}),this.selectedEdges=y,this.selectedNodes=p,this.selectedCombos=v,this.onSelect&&this.onSelect(p,y,v),r.emit("nodeselectchange",{selectedItems:{nodes:p,edges:y,combos:v},select:!0})},createBrush:function(){var t=this.graph.get("canvas").addShape("rect",{attrs:this.brushStyle,capture:!1,name:"brush-shape"});return this.brush=t,this.delegate=t,t},updateBrush:function(t){var e=this.originPoint;this.brush.attr({width:SI(t.canvasX-e.x),height:SI(t.canvasY-e.y),x:bI(t.canvasX,e.x),y:bI(t.canvasY,e.y)})},onKeyDown:function(t){var e=t.key;if(e){var r=this.trigger.toLowerCase(),n=e.toLowerCase();this.keydown=n===r||"control"===n&&"ctrl"===r||"ctrl"===n&&"control"===r}},onKeyUp:function(){this.brush&&(this.brush.remove(!0),this.brush=null,this.dragging=!1),this.keydown=!1}},EI=["shift","ctrl","alt","control"],OI={getDefaultCfg:function(){return{multiple:!0,trigger:"shift",selectedState:"selected",selectNode:!0,selectEdge:!1,selectCombo:!0}},getEvents:function(){return EI.indexOf(this.trigger.toLowerCase())>-1||(this.trigger="shift",console.warn("Behavior click-select ç trigger åæ°ä¸åæ³ï¼è¯·è¾å¥ 'drag'ã'shift'ã'ctrl' æ 'alt'")),this.multiple?{"node:click":"onClick","combo:click":"onClick","edge:click":"onClick","canvas:click":"onCanvasClick",keyup:"onKeyUp",keydown:"onKeyDown"}:{"node:click":"onClick","combo:click":"onClick","edge:click":"onClick","canvas:click":"onCanvasClick"}},onClick:function(t){var e=this,r=t.item;if(r&&!r.destroyed){var n=r.getType(),o=e.graph,i=e.keydown,a=e.multiple,s=e.shouldUpdate;if((0,e.shouldBegin)(t,e)){if(!i||!a){var u=o.findAllByState("node",e.selectedState).concat(o.findAllByState("edge",e.selectedState)).concat(o.findAllByState("combo",e.selectedState));(0,ng.each)(u,function(t){t!==r&&o.setItemState(t,e.selectedState,!1)})}if(function(){switch(n){case"node":return e.selectNode;case"edge":return e.selectEdge;case"combo":return e.selectCombo;default:return!1}}())if(r.hasState(e.selectedState)){s(t,e)&&o.setItemState(r,e.selectedState,!1);l=o.findAllByState("node",e.selectedState),c=o.findAllByState("edge",e.selectedState),f=o.findAllByState("combo",e.selectedState);o.emit("nodeselectchange",{target:r,selectedItems:{nodes:l,edges:c,combos:f},select:!1})}else{s(t,e)&&o.setItemState(r,e.selectedState,!0);l=o.findAllByState("node",e.selectedState),c=o.findAllByState("edge",e.selectedState),f=o.findAllByState("combo",e.selectedState);o.emit("nodeselectchange",{target:r,selectedItems:{nodes:l,edges:c,combos:f},select:!0})}else{var l=o.findAllByState("node",e.selectedState),c=o.findAllByState("edge",e.selectedState),f=o.findAllByState("combo",e.selectedState);o.emit("nodeselectchange",{selectedItems:{nodes:l,edges:c,combos:f},select:!1})}}}},onCanvasClick:function(t){var e=this,r=this.graph;if((0,this.shouldBegin)(t,this)){var n=r.findAllByState("node",this.selectedState);(0,ng.each)(n,function(t){r.setItemState(t,e.selectedState,!1)});var o=r.findAllByState("edge",this.selectedState);(0,ng.each)(o,function(t){r.setItemState(t,e.selectedState,!1)});var i=r.findAllByState("combo",this.selectedState);(0,ng.each)(i,function(t){r.setItemState(t,e.selectedState,!1)}),r.emit("nodeselectchange",{selectedItems:{nodes:[],edges:[],combos:[]},select:!1})}},onKeyDown:function(t){var e=t.key;e&&(e.toLowerCase()===this.trigger.toLowerCase()||"control"===e.toLowerCase()?this.keydown=!0:this.keydown=!1)},onKeyUp:function(){this.keydown=!1}},PI=hg,kI={getDefaultCfg:function(){return this.isFireFox="firefox"===WC(),{sensitivity:2,minZoom:void 0,maxZoom:void 0,enableOptimize:!1,optimizeZoom:.1,fixSelectedItems:{fixAll:!1,fixLineWidth:!1,fixLabel:!1,fixState:"selected"},animate:!1,animateCfg:{duration:500}}},getEvents:function(){var t=this.fixSelectedItems;return t.fixState||(t.fixState="selected"),t.fixAll&&(t.fixLineWidth=!0,t.fixLabel=!0),{wheel:"onWheel",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onTouchEnd"}},onTouchStart:function(t){var e=t.originalEvent.touches,r=e[0],n=e[1];t.preventDefault(),n&&(this.shouldBegin&&!this.shouldBegin(t,this)||(this.startPoint={pageX:r.pageX,pageY:r.pageY},this.moveable=!0,n&&(this.endPoint={pageX:n.pageX,pageY:n.pageY}),this.originScale=this.graph.getZoom()||this.currentScale||1))},onTouchMove:function(t){if(this.moveable){t.preventDefault();var e=t.originalEvent.touches,r=e[0],n=e[1];if(n){this.endPoint||(this.endPoint={pageX:n.pageX,pageY:n.pageY});var o=function(t,e){return Math.hypot(e.x-t.x,e.y-t.y)},i=o({x:r.pageX,y:r.pageY},{x:n.pageX,y:n.pageY})/o({x:this.startPoint.pageX,y:this.startPoint.pageY},{x:this.endPoint.pageX,y:this.endPoint.pageY}),a=this.originScale*i;this.currentScale=a;var s=this.get("minZoom")||this.graph.get("minZoom");if(!(a>(this.get("maxZoom")||this.graph.get("maxZoom"))||a<s)){var u=this.get("animate"),l=this.get("animateCfg"),c=this.graph.get("canvas").getPointByClient(t.clientX,t.clientY);this.graph.zoomTo(a,{x:c.x,y:c.y},u,l),this.graph.emit("wheelzoom",t)}}}},onTouchEnd:function(){this.moveable=!1,this.endPoint=null},onWheel:function(t){var e=this,r=this.graph,n=this.fixSelectedItems;if((!this.shouldBegin||this.shouldBegin(t,this))&&this.shouldUpdate(t,this)){t.preventDefault();var o=r.get("canvas").getPointByClient(t.clientX,t.clientY),i=this.get("sensitivity"),a=r.getZoom(),s=a;s=a*(this.isFireFox?t.deltaY>0||t.wheelDelta<0?1-.05*i:1/(1-.05*i):t.wheelDelta<0?1-.05*i:1/(1-.05*i));var u=this.get("minZoom")||r.get("minZoom"),l=this.get("maxZoom")||r.get("maxZoom");if(s>l?s=l:s<u&&(s=u),this.get("enableOptimize")){var c=this.get("optimizeZoom"),f=this.get("optimized"),h=r.getNodes(),p=r.getEdges(),d=h.length,y=p.length;if(!f){for(var v=0;v<d;v++){if(!(P=h[v]).destroyed)for(var g=(X=P.get("group").get("children")).length,m=0;m<g;m++){(R=X[m]).destoryed||R.get("isKeyShape")||(R.set("ori-visibility",R.get("ori-visibility")||R.get("visible")),R.hide())}}for(var b=0;b<y;b++)for(g=(X=(Y=p[b]).get("group").get("children")).length,m=0;m<g;m++){(R=X[m]).set("ori-visibility",R.get("ori-visibility")||R.get("visible")),R.hide()}this.set("optimized",!0)}clearTimeout(this.get("timeout"));var w=setTimeout(function(){var t=r.getZoom();if(e.get("optimized")){e.set("optimized",!1);for(var n=0;n<d;n++){var o=h[n],i=(l=o.get("group").get("children")).length;if(t<c){var a=(v=o.getKeyShape()).get("ori-visibility");v.set("ori-visibility",void 0),a&&v.show()}else for(var s=0;s<i;s++){a=(g=l[s]).get("ori-visibility");g.set("ori-visibility",void 0),!g.get("visible")&&a&&a&&g.show()}}for(var u=0;u<y;u++){var l,f=p[u];i=(l=f.get("group").get("children")).length;if(t<c){var v;a=(v=f.getKeyShape()).get("ori-visibility");v.set("ori-visibility",void 0),a&&v.show()}else for(s=0;s<i;s++){var g;if(!(g=l[s]).get("visible")){a=g.get("ori-visibility");g.set("ori-visibility",void 0),a&&g.show()}}}}},100);this.set("timeout",w)}if(a<=1){var S=void 0,x=void 0;if(n.fixAll||n.fixLineWidth||n.fixLabel){S=r.findAllByState("node",n.fixState),x=r.findAllByState("edge",n.fixState);for(var _=a/s,E=S.length,O=0;O<E;O++){var P,k=(P=S[O]).getContainer(),C=P.getModel(),T=P.getOriginStyle(),A=P.getStateStyle(n.fixState),M=P.get("shapeFactory").getShape(C.type).getStateStyle(n.fixState,P)[n.fixState];if(n.fixAll){if(s<=1){var j=(0,ng.clone)(k.getMatrix());j||(j=[1,0,0,0,1,0,0,0,1]);var I=P.getModel(),N=I.x,L=I.y;j=PI(j,[["t",-N,-L],["s",_,_],["t",N,L]]),k.setMatrix(j)}}else for(g=(X=k.get("children")).length,m=0;m<g;m++){var R=X[m],D=void 0,B=void 0;if(n.fixLabel)if("text"===R.get("type")){D=R.attr("fontSize")||12;var F=A[R.get("name")],G=M[R.get("name")],U=F?F.fontSize:12,z=G?G.fontSize:12,V=U||z||12;if(s<=1&&R.attr("fontSize",V/s),B)break}if(n.fixLineWidth&&R.get("isKeyShape")){B=R.attr("lineWidth")||0;var H=A.lineWidth||M.lineWidth||T.lineWidth||0;if(s<=1&&R.attr("lineWidth",H/s),D)break}}}for(var W=x.length,q=0;q<W;q++){var Y,X=(k=(Y=x[q]).getContainer()).get("children");for(C=Y.getModel(),A=Y.getStateStyle(n.fixState),M=Y.get("shapeFactory").getShape(C.type).getStateStyle(n.fixState,Y)[n.fixState],g=X.length,m=0;m<g;m++){R=X[m],D=void 0,B=void 0;if(n.fixLabel||n.fixAll)if("text"===R.get("type")){D=R.attr("fontSize")||12;F=A[R.get("name")],G=M[R.get("name")],U=F?F.fontSize:12,z=G?G.fontSize:12,V=U||z||12;if(s<=1&&R.attr("fontSize",V/s),B)break}if((n.fixLineWidth||n.fixAll)&&R.get("isKeyShape")){B=R.attr("lineWidth")||0;H=A.lineWidth||M.lineWidth||1;if(s<=1&&R.attr("lineWidth",H/s),D)break}}}}}var J=this.get("animate"),K=this.get("animateCfg");r.zoomTo(s,{x:o.x,y:o.y},J,K),r.emit("wheelzoom",t)}}},CI={onMouseEnter:function(t){var e=t.item;this.currentTarget=e,this.showTooltip(t),this.graph.emit("tooltipchange",{item:t.item,action:"show"})},onMouseMove:function(t){this.shouldUpdate(t,this)?this.currentTarget&&t.item===this.currentTarget&&this.updatePosition(t):this.hideTooltip()},onMouseLeave:function(t){this.shouldEnd(t,this)&&(this.hideTooltip(),this.graph.emit("tooltipchange",{item:this.currentTarget,action:"hide"}),this.currentTarget=null)},showTooltip:function(t){var e=this.container;if(t.item&&!t.item.destroyed){e||(e=this.createTooltip(this.graph.get("canvas")),this.container=e);var r=this.formatText(t.item.get("model"),t);e.innerHTML=r,ST(this.container,{visibility:"visible"}),this.updatePosition(t)}},hideTooltip:function(){ST(this.container,{visibility:"hidden"})},updatePosition:function(t){var e=this.get("shouldBegin"),r=this.width,n=this.height,o=this.container,i=this.graph;if(e(t,this)){var a=i.getPointByClient(t.clientX,t.clientY),s=i.getCanvasByPoint(a.x,a.y),u=s.x,l=s.y,c=o.getBoundingClientRect();u>r/2?u-=c.width:u+=this.offset,l>n/2?l-=c.height:l+=this.offset;var f="".concat(u,"px"),h="".concat(l,"px");ST(this.container,{left:f,top:h,visibility:"visible"})}else ST(o,{visibility:"hidden"})},createTooltip:function(t){var e=t.get("el");e.style.position="relative";var r=Ek('<div class="g6-tooltip g6-'.concat(this.item,'-tooltip"></div>'));return e.parentNode.appendChild(r),ST(r,{position:"absolute",visibility:"visible"}),this.width=t.get("width"),this.height=t.get("height"),this.container=r,this.graph.get("tooltips").push(r),r}},TI=(0,rg.__assign)({getDefaultCfg:function(){return{item:"node",offset:12,formatText:function(t){return t.label}}},getEvents:function(){return{"node:mouseenter":"onMouseEnter","node:mouseleave":"onMouseLeave","node:mousemove":"onMouseMove",afterremoveitem:"onMouseLeave"}}},CI),AI=(0,rg.__assign)({getDefaultCfg:function(){return{item:"edge",offset:12,formatText:function(t){return"source: ".concat(t.source," target: ").concat(t.target)}}},getEvents:function(){return{"edge:mouseenter":"onMouseEnter","edge:mouseleave":"onMouseLeave","edge:mousemove":"onMouseMove",afterremoveitem:"onMouseLeave"}}},CI),MI=["click","dblclick"],jI={getDefaultCfg:function(){return{trigger:"click",onChange:function(){}}},getEvents:function(){var t,e;return MI.includes(this.trigger)?e=this.trigger:(e="click",console.warn("Behavior collapse-expand ç trigger åæ°ä¸åæ³ï¼è¯·è¾å¥ 'click' æ 'dblclick'")),(t={})["node:".concat(e)]="onNodeClick",t.touchstart="onNodeClick",t},onNodeClick:function(t){var e=this;if("click"===this.trigger){if(this.timer)return clearTimeout(this.timer),void(this.timer=0);this.timer=setTimeout(function(){e.toggle(t),clearTimeout(e.timer),e.timer=0},200)}else this.toggle(t)},toggle:function(t){var e=t.item;if(e){var r=this.graph.findDataById(e.get("id"));if(r){var n=r.children;if(n&&0!==n.length){var o=!r.collapsed;this.shouldBegin(t,o,this)&&(r.collapsed=o,e.getModel().collapsed=o,this.graph.emit("itemcollapsed",{item:t.item,collapsed:o}),this.shouldUpdate(t,o,this)&&(this.onChange(e,o,this),this.graph.layout()))}}}}},II=qC.calculationItemsBBox,NI={getDefaultCfg:function(){return{enableDelegate:!1,delegateStyle:{},onlyChangeComboSize:!1,activeState:"",selectedState:"selected",enableStack:!0}},getEvents:function(){return{"combo:mousedown":"onMouseDown","combo:dragstart":"onDragStart","combo:drag":"onDrag","combo:dragend":"onDragEnd","combo:drop":"onDrop","node:drop":"onNodeDrop","combo:dragenter":"onDragEnter","combo:dragleave":"onDragLeave"}},validationCombo:function(t){var e=t.item;return!(!e||e.destroyed)&&(!!this.shouldUpdate(t,this)&&"combo"===e.getType())},onMouseDown:function(t){this.origin={x:t.x,y:t.y}},onDragStart:function(t){var e=this,r=this.graph,n=t.item;if(this.currentShouldEnd=!0,this.validationCombo(t)){this.targets=[];var o=r.findAllByState("combo",this.selectedState),i=n.get("id");0===o.filter(function(t){var e=t.get("id");return i===e}).length?this.targets.push(n):this.targets=o;var a=[];this.targets.forEach(function(t){var e=t.getModel(),r=e.x,n=e.y,o=e.id;a.push({x:r,y:n,id:o})}),this.set("beforeDragItems",a),this.activeState&&this.targets.map(function(t){var n=t.getModel();if(n.parentId){var o=r.findById(n.parentId);o&&r.setItemState(o,e.activeState,!0)}}),this.point={},this.originPoint={},this.currentItemChildCombos=[],function t(e,r){if(!1!==r(e)&&e){var n=e.get("combos");if(0===n.length)return!1;(0,ng.each)(n,function(e){t(e,r)})}}(n,function(t){if(t.destroyed)return!1;var r=t.getModel();return e.currentItemChildCombos.push(r.id),!0})}},onDrag:function(t){var e=this;if(this.origin&&this.validationCombo(t))if(this.enableDelegate)this.updateDelegate(t);else{if(this.activeState){var r=this.graph,n=t.item,o=n.getModel(),i=r.getCombos(),a=n.getBBox(),s=a.centerX,u=a.centerY,l=a.width;i.filter(function(t){var r=t.getModel();return o.parentId,r.id!==o.id&&!e.currentItemChildCombos.includes(r.id)}).map(function(t){var n=t.getBBox(),o=n.centerX,i=n.centerY,a=n.width,c=s-o,f=u-i,h=2*Math.sqrt(c*c+f*f);l+a-h>.8*l?r.setItemState(t,e.activeState,!0):r.setItemState(t,e.activeState,!1)})}(0,ng.each)(this.targets,function(r){e.updateCombo(r,t)}),this.onlyChangeComboSize&&this.updateParentCombos()}},updatePositions:function(t,e){var r=this;(this.enableDelegate||e)&&(0,ng.each)(this.targets,function(n){r.updateCombo(n,t,e)})},onDrop:function(t){var e=this,r=t.item;if(this.currentShouldEnd=this.shouldEnd(t,r,this),this.updatePositions(t,!this.currentShouldEnd),this.currentShouldEnd&&r&&this.targets&&!r.destroyed){var n=this.graph,o=r.getModel();this.targets.map(function(t){t.getModel().parentId!==o.id?(e.activeState&&n.setItemState(r,e.activeState,!1),e.onlyChangeComboSize?n.updateCombo(t):n.updateComboTree(t,o.id,!1)):n.updateCombo(r)}),this.end(r,t),this.endComparison=!0}},onNodeDrop:function(t){var e=this;if(this.targets&&0!==this.targets.length){var r=this.graph,n=t.item.getModel().comboId,o=n?r.findById(n):void 0;if(this.currentShouldEnd=this.shouldEnd(t,o,this),this.updatePositions(t,!this.currentShouldEnd),this.currentShouldEnd){var i;if(n){if(this.activeState){var a=r.findById(n);r.setItemState(a,this.activeState,!1)}this.targets.map(function(t){e.onlyChangeComboSize?r.updateCombo(t):n!==t.getID()&&(i=r.findById(n),n!==t.getModel().parentId&&r.updateComboTree(t,n,!1))})}else this.targets.map(function(t){e.onlyChangeComboSize?r.updateCombo(t):t.getModel().comboId&&r.updateComboTree(t,void 0,!1)});this.endComparison=!0,this.end(i,t)}}},onDragEnter:function(t){if(this.origin&&this.validationCombo(t)){var e=t.item,r=this.graph;this.activeState&&r.setItemState(e,this.activeState,!0)}},onDragLeave:function(t){if(this.origin&&this.validationCombo(t)){var e=t.item,r=this.graph;this.activeState&&r.setItemState(e,this.activeState,!1)}},onDragEnd:function(t){if(this.targets&&0!==this.targets.length){var e=t.item;this.currentShouldEnd&&this.updatePositions(t);var r=this.getParentCombo(e.getModel().parentId),n=this.graph;r&&this.activeState&&n.setItemState(r,this.activeState,!1),this.end(void 0,t)}},end:function(t,e){var r=this;if(this.origin){var n=this.graph;if(this.delegateShape)n.get("delegateGroup").clear(),this.delegateShape=null;if(t&&this.activeState&&n.setItemState(t,this.activeState,!1),!t){var o=n.get("enabledStack")&&this.enableStack,i={before:{nodes:[],edges:[],combos:[].concat(this.get("beforeDragItems"))},after:{nodes:[],edges:[],combos:[]}};this.targets.map(function(t){if(r.onlyChangeComboSize){n.updateCombo(t);var e=t.getModel(),a=e.x,s=e.y,u=e.id;i.after.combos.push({x:a,y:s,id:u}),n.pushStack("update",i)}else n.updateComboTree(t,void 0,o)})}this.point=[],this.origin=null,this.originPoint=null,this.targets.length=0}},traverse:function(t,e,r){var n=this;if(void 0===r&&(r={}),!1!==e(t,r)&&t){var o=t.get("combos");(0,ng.each)(o,function(t){n.traverse(t,e,r)});var i=t.get("nodes");(0,ng.each)(i,function(t){n.traverse(t,e,r)})}},updateCombo:function(t,e,r){this.updateSingleItem(t,e,r);var n={};this.traverse(t,function(t,e){return!t.destroyed&&(t.getEdges().forEach(function(t){return e[t.getID()]=t}),!0)},n),Object.values(n).forEach(function(t){return t.refresh()})},updateSingleItem:function(t,e,r){var n=this.origin,o=this.graph,i=t.getModel(),a=t.get("id");this.point[a]||(this.point[a]={x:i.x,y:i.y});var s=e.x-n.x+this.point[a].x,u=e.y-n.y+this.point[a].y;r&&(s+=n.x-e.x,u+=n.y-e.y),o.updateItem(t,{x:s,y:u},!1)},getParentCombo:function(t){var e=this.graph;if(t){var r=e.findById(t);if(r)return r}},updateDelegate:function(t){var e=this.graph;if(this.delegateShape){var r=t.x-this.origin.x+this.originPoint.minX,n=t.y-this.origin.y+this.originPoint.minY;this.delegateShape.attr({x:r,y:n})}else{var o=e.get("delegateGroup"),i=null,a=(i=this.targets.length>1?II(this.targets):this.targets[0].getBBox()).x,s=i.y,u=i.width,l=i.height,c=i.minX,f=i.minY;this.originPoint={x:a,y:s,width:u,height:l,minX:c,minY:f};var h=(0,rg.__assign)((0,rg.__assign)({},kC.delegateStyle),this.delegateStyle);this.delegateShape=o.addShape("rect",{attrs:(0,rg.__assign)({width:i.width,height:i.height,x:i.x,y:i.y},h),name:"combo-delegate-shape"}),this.delegateShape.set("capture",!1),this.delegate=this.delegateShape}},updateParentCombos:function(){var t=this.graph,e=this.targets,r={};null===e||void 0===e||e.forEach(function(e){var n=e.getModel().parentId;n&&(r[n]=t.findById(n))}),Object.values(r).forEach(function(e){e&&t.updateCombo(e)})}},LI=["click","dblclick"],RI={getDefaultCfg:function(){return{trigger:"dblclick",relayout:!0}},getEvents:function(){var t,e;return LI.includes(this.trigger)?e=this.trigger:(e="dblclick",console.warn("Behavior collapse-expand-group ç trigger åæ°ä¸åæ³ï¼è¯·è¾å¥ 'click' æ 'dblclick'")),(t={})["combo:".concat(e)]="onComboClick",t},onComboClick:function(t){var e=t.item,r=this.graph,n=this.relayout;if(e&&!e.destroyed&&"combo"===e.getType()){var o=e.getModel().id;o&&(r.collapseExpandCombo(o),n&&r.get("layout")?r.layout():r.refreshPositions())}}},DI=qC.isPolygonsIntersect,BI=qC.pathToPoints,FI=["drag","shift","ctrl","alt","control"],GI=["click","drag"],UI=["shift","ctrl","control","alt","meta",void 0],zI=["shift","ctrl","alt","control"],VI=["shift","ctrl","alt","control","meta"],HI={"drag-canvas":yI,"zoom-canvas":kI,"drag-node":vI,"activate-relations":mI,"brush-select":_I,"click-select":OI,"lasso-select":{getDefaultCfg:function(){return{delegateStyle:{fill:"#EEF6FF",fillOpacity:.4,stroke:"#DDEEFE",lineWidth:1},onSelect:function(){},onDeselect:function(){},shouldDeselect:void 0,selectedState:"selected",trigger:"shift",includeEdges:!0,selectedEdges:[],selectedNodes:[]}},getEvents:function(){return FI.indexOf(this.trigger.toLowerCase())>-1||(this.trigger="shift",console.warn("Behavior lasso-select ç trigger åæ°ä¸åæ³ï¼è¯·è¾å¥ 'drag'ã'shift'ã'ctrl' æ 'alt'")),"drag"===this.trigger?{dragstart:"onDragStart",drag:"onDragMove",dragend:"onDragEnd","canvas:click":"clearStates"}:{dragstart:"onDragStart",drag:"onDragMove",dragend:"onDragEnd",keyup:"onKeyUp",keydown:"onKeyDown","canvas:click":"clearStates"}},onDragStart:function(t){var e=this.lasso;t.item||("drag"===this.trigger||this.keydown)&&(this.selectedNodes&&0!==this.selectedNodes.length&&this.clearStates("dragstart"),e||(e=this.createLasso()),this.dragging=!0,this.originPoint={x:t.x,y:t.y},this.points.push(this.originPoint),e.show())},onDragMove:function(t){this.dragging&&("drag"===this.trigger||this.keydown)&&(this.points.push({x:t.x,y:t.y}),this.updateLasso(t))},onDragEnd:function(t){(this.lasso||this.dragging)&&("drag"===this.trigger||this.keydown)&&(this.points.push(this.originPoint),this.getSelectedItems(),this.lasso.remove(!0),this.lasso=null,this.points=[],this.dragging=!1)},getLassoPath:function(){var t=this.points,e=[];return t.length&&(t.forEach(function(t,r){0===r?e.push(["M",t.x,t.y]):e.push(["L",t.x,t.y])}),e.push(["L",t[0].x,t[0].y])),e},clearStates:function(t){void 0===t&&(t="canvas:click");var e=this.graph,r=this.selectedState,n=this.shouldDeselect,o=e.findAllByState("node",r),i=e.findAllByState("edge",r);n&&!n({action:t,nodes:o,edges:i})||(o.forEach(function(t){return e.setItemState(t,r,!1)}),i.forEach(function(t){return e.setItemState(t,r,!1)})),this.onDeselect&&this.onDeselect(this.selectedNodes,this.selectedEdges),this.selectedNodes=[],this.selectedEdges=[],e.emit("nodeselectchange",{selectedItems:{nodes:[],edges:[]},select:!1})},getSelectedItems:function(){var t=this,e=this.graph,r=this.shouldUpdate,n=this.points.map(function(t){return[e.getCanvasByPoint(t.x,t.y).x,e.getCanvasByPoint(t.x,t.y).y]}),o=this.selectedState,i=[],a=[];e.getNodes().forEach(function(s){if(s.isVisible()&&function(t,e){var r,n=t.getKeyShape();if("path"===t.get("type"))r=BI(n.attr("path"));else{var o=n.getCanvasBBox();r=[[o.minX,o.minY],[o.maxX,o.minY],[o.maxX,o.maxY],[o.minX,o.maxY]]}return DI(e,r)}(s,n)&&r(s,"select",t)){i.push(s);var u=s.getModel();a.push(u.id),e.setItemState(s,o,!0)}});var s=[];this.includeEdges&&i.forEach(function(n){n.getOutEdges().forEach(function(n){if(n.isVisible()){var o=n.getModel(),i=o.source,u=o.target;a.includes(i)&&a.includes(u)&&r(n,"select",t)&&(s.push(n),e.setItemState(n,t.selectedState,!0))}})}),this.selectedEdges=s,this.selectedNodes=i,this.onSelect&&this.onSelect(i,s),e.emit("nodeselectchange",{selectedItems:{nodes:i,edges:s},select:!0})},createLasso:function(){var t=this.graph.get("delegateGroup").addShape("path",{attrs:(0,rg.__assign)({path:[]},this.delegateStyle),capture:!1,name:"lasso-shape"});return this.lasso=t,this.delegate=t,this.points=[],t},updateLasso:function(t){this.lasso.attr({path:this.getLassoPath()})},onKeyDown:function(t){var e=t.key;e&&(e.toLowerCase()===this.trigger.toLowerCase()?this.keydown=!0:this.keydown=!1)},onKeyUp:function(){this.lasso&&(this.lasso.remove(!0),this.lasso=null,this.points=[],this.dragging=!1),this.keydown=!1}},tooltip:TI,"edge-tooltip":AI,"collapse-expand":jI,"drag-combo":NI,"collapse-expand-combo":RI,"create-edge":{getDefaultCfg:function(){return{trigger:"click",key:void 0,edgeConfig:{},getEdgeConfig:void 0}},getEvents:function(){var t;return GI.indexOf(this.trigger.toLowerCase())>-1||(this.trigger="click",console.warn("Behavior create-edge ç trigger åæ°ä¸åæ³ï¼è¯·è¾å¥ 'click'ï¼'drag'")),this.key&&-1===UI.indexOf(this.key.toLowerCase())&&(this.trigger=void 0,console.warn("Behavior create-edge ç key åæ°ä¸åæ³ï¼è¯·è¾å¥ 'shift'ï¼'ctrl'ï¼'alt'ï¼'control'ï¼æ undefined")),"drag"===this.trigger?t={"node:dragstart":"onClick","combo:dragstart":"onClick",drag:"updateEndPoint","node:drop":"onClick","combo:drop":"onClick",dragend:"onDragEnd"}:"click"===this.trigger&&(t={"node:click":"onClick",mousemove:"updateEndPoint","edge:click":"cancelCreating","canvas:click":"cancelCreating","combo:click":"onClick"}),this.key&&(t.keydown="onKeyDown",t.keyup="onKeyUp"),t},onDragEnd:function(t){if(!this.key||this.keydown){var e=t.item;e&&e.getID()!==this.source&&"node"===e.getType()||this.cancelCreating({item:this.edge,x:t.x,y:t.y})}},onClick:function(t){if(!this.key||this.keydown){var e=t.item,r=this.graph,n=e.getModel(),o=this.getEdgeConfig;if(this.addingEdge&&this.edge){if(!this.shouldEnd(t,this))return;var i=void 0;i=o&&(0,ng.isFunction)(o)?o({source:this.source,target:n.id},this):this.edgeConfig;var a=(0,rg.__assign)({target:n.id},i);if(this.source===n.id&&(a.type="loop"),r.emit("beforecreateedge",{}),r.updateItem(this.edge,a,!1),r.get("enabledStack")){var s=(0,rg.__assign)((0,rg.__assign)({},this.edge.getModel()),{itemType:"edge"}),u={};u.edges=[s],r.pushStack("add",{before:{},after:u})}r.emit("aftercreateedge",{edge:this.edge}),this.edge.getKeyShape().set("capture",!0),this.edge=null,this.addingEdge=!1}else{if(!this.shouldBegin(t,this))return;i=void 0;i=o&&(0,ng.isFunction)(o)?o({source:n.id,target:n.id},this):this.edgeConfig,this.edge=r.addItem("edge",(0,rg.__assign)({source:n.id,target:n.id},i),!1),this.source=n.id,this.addingEdge=!0,this.edge.getKeyShape().set("capture",!1)}}},updateEndPoint:function(t){if(!this.key||this.keydown){this.edge&&this.edge.destroyed&&this.cancelCreating({item:this.edge});var e={x:t.x,y:t.y};this.graph.findById(this.source)?this.addingEdge&&this.edge&&this.graph.updateItem(this.edge,{target:e},!1):this.addingEdge=!1}},cancelCreating:function(t){var e,r;if(!this.key||this.keydown){var n=this.graph,o=t.item;return this.addingEdge&&(this.edge===o||(null===(r=null===(e=t.target)||void 0===e?void 0:e.isCanvas)||void 0===r?void 0:r.call(e)))?(this.edge&&!this.edge.destroyed&&n.removeItem(this.edge,!1),this.edge=null,void(this.addingEdge=!1)):void 0}},onKeyDown:function(t){var e=t.key;e&&(e.toLowerCase()===this.key.toLowerCase()?this.keydown=!0:this.keydown=!1)},onKeyUp:function(){this.addingEdge&&this.edge&&(this.graph.removeItem(this.edge,!1),this.addingEdge=!1,this.edge=null),this.keydown=!1}},"shortcuts-call":{getDefaultCfg:function(){return{trigger:"ctrl",combinedKey:"1",functionName:"fitView",functionParams:[]}},getEvents:function(){return zI.indexOf(this.trigger.toLowerCase())>-1||(this.trigger="ctrl",console.warn("Behavior shortcuts-fit-view ç trigger åæ° '".concat(this.trigger,"' ä¸åæ³ï¼è¯·è¾å¥ 'drag'ã'shift'ã'ctrl' æ 'alt'"))),this.combinedKey===this.trigger&&(this.combinedKey=void 0),{keyup:"onKeyUp",keydown:"onKeyDown"}},onKeyDown:function(t){var e=t.key;if(e){var r=this.trigger.toLowerCase(),n=e.toLowerCase();this.triggerKeydown||(this.triggerKeydown=n===r||"control"===n&&"ctrl"===r||"ctrl"===n&&"control"===r);var o=this.graph;if(!o[this.functionName])return console.warn("Behavior shortcuts-fit-view ç functionName åæ° '".concat(this.functionName,"' ä¸åæ³ï¼å®ä¸æ¯ Graph çä¸ä¸ªå½æ°å")),{};if(!this.triggerKeydown||this.combinedKey){var i=this.combinedKey.toLowerCase();this.triggerKeydown&&(n===i||"control"===n&&"ctrl"===i||"ctrl"===n&&"control"===i)&&(this.functionParams&&this.functionParams.length?o[this.functionName].apply(o,this.functionParams):o[this.functionName]())}else this.functionParams&&this.functionParams.length?o[this.functionName].apply(o,this.functionParams):o[this.functionName]()}},onKeyUp:function(){this.brush&&(this.brush.remove(!0),this.brush=null,this.dragging=!1),this.triggerKeydown=!1}},"scroll-canvas":{getDefaultCfg:function(){return{direction:"both",enableOptimize:!1,zoomKey:"ctrl",scalableRange:0,allowDragOnItem:!0}},getEvents:function(){return this.zoomKey&&-1!==VI.indexOf(this.zoomKey)||(this.zoomKey="ctrl"),{wheel:"onWheel"}},onWheel:function(t){var e=this;if(this.allowDrag(t)){var r=this.graph,n=Array.isArray(this.zoomKey)?[].concat(this.zoomKey):[this.zoomKey];if(n.includes("control")&&n.push("ctrl"),n.some(function(e){return t["".concat(e,"Key")]})){var o=r.get("canvas").getPointByClient(t.clientX,t.clientY),i=r.getZoom();t.wheelDelta>0?i+=.05*i:i-=.05*i,r.zoomTo(i,{x:o.x,y:o.y})}else{var a=t.deltaX||t.movementX,s=t.deltaY||t.movementY;!s&&navigator.userAgent.indexOf("Firefox")>-1&&(s=125*-t.wheelDelta/3);var u=this.graph.get("width"),l=this.graph.get("height"),c=this.graph.get("canvas").getCanvasBBox(),f=this.scalableRange,h=this.scalableRange;f<1&&f>-1&&(f*=u,h*=l);var p=c.minX,d=c.maxX,y=c.minY,v=c.maxY;a>0?d<-f?a=0:d-a<-f&&(a=d+f):a<0&&(p>u+f?a=0:p-a>u+f&&(a=p-(u+f))),s>0?v<-h?s=0:v-s<-h&&(s=v+h):s<0&&(y>l+h?s=0:y-s>l+h&&(s=y-(l+h))),"x"===this.get("direction")?s=0:"y"===this.get("direction")&&(a=0),r.translate(-a,-s)}if(t.preventDefault(),this.get("enableOptimize")){var g=this.get("optimizeZoom"),m=this.get("optimized"),b=r.getNodes(),w=r.getEdges(),S=b.length,x=w.length;if(!m){for(var _=0;_<S;_++){var E=b[_];if(!E.destroyed)for(var O=(C=E.get("group").get("children")).length,P=0;P<O;P++){(T=C[P]).destoryed||T.get("isKeyShape")||(T.set("ori-visibility",T.get("ori-visibility")||T.get("visible")),T.hide())}}for(var k=0;k<x;k++){var C;for(O=(C=w[k].get("group").get("children")).length,P=0;P<O;P++){var T;(T=C[P]).set("ori-visibility",T.get("ori-visibility")||T.get("visible")),T.hide()}}this.set("optimized",!0)}clearTimeout(this.get("timeout"));var A=setTimeout(function(){var t=r.getZoom();if(e.get("optimized")){e.set("optimized",!1);for(var n=0;n<S;n++){var o=b[n],i=(l=o.get("group").get("children")).length;if(t<g)(s=(c=o.getKeyShape()).get("ori-visibility"))&&c.show();else for(var a=0;a<i;a++){var s=(h=l[a]).get("ori-visibility");!h.get("visible")&&s&&s&&h.show()}}for(var u=0;u<x;u++){var l,c,f=w[u];i=(l=f.get("group").get("children")).length;if(t<g)(s=(c=f.getKeyShape()).get("ori-visibility"))&&c.show();else for(a=0;a<i;a++){var h;if(!(h=l[a]).get("visible"))(s=h.get("ori-visibility"))&&h.show()}}}},100);this.set("timeout",A)}}},allowDrag:function(t){var e,r,n=t.target,o=n&&n.isCanvas&&n.isCanvas();if((0,ng.isBoolean)(this.allowDragOnItem)&&!this.allowDragOnItem&&!o)return!1;if((0,ng.isObject)(this.allowDragOnItem)){var i=this.allowDragOnItem,a=i.node,s=i.edge,u=i.combo,l=null===(r=null===(e=t.item)||void 0===e?void 0:e.getType)||void 0===r?void 0:r.call(e);if(!a&&"node"===l)return!1;if(!s&&"edge"===l)return!1;if(!u&&"combo"===l)return!1}return!0}}};(0,ng.each)(HI,function(t,e){xO(e,t)});var WI=(0,rg.__assign)((0,rg.__assign)({},n),EO),qI=jj.Fisheye,YI=jj.TimeBar,XI=jj.ImageMinimap,JI=jj.EdgeFilterLens,KI=jj.SnapLine,QI=jj.Annotation,ZI={version:kC.version,Graph:yT,TreeGraph:wT,Util:qC,Layout:IC.Layouts,TreeLayout:XC,registerLayout:function(t,e){e.isCustomLayout=!0,IC.Layouts[t]=(0,IC.registerLayout)(t,e)},Global:kC,registerBehavior:xO,registerCombo:SO,registerEdge:wO,registerNode:bO,Minimap:jj.Minimap,Grid:jj.Grid,Bundling:jj.Bundling,Menu:jj.Menu,ToolBar:jj.ToolBar,Tooltip:jj.Tooltip,Legend:jj.Legend,TimeBar:YI,SnapLine:KI,Fisheye:qI,ImageMinimap:XI,EdgeFilterLens:JI,Annotation:QI,Algorithm:WI,Arrow:cO,Marker:fO,Shape:hO};ZI.version="4.8.23";var $I=ZI;function tN(t){"@babel/helpers - typeof";return(tN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function eN(t){return function(t){if(Array.isArray(t))return rN(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return rN(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return rN(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rN(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function nN(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function oN(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?nN(Object(r),!0).forEach(function(e){iN(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):nN(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function iN(t,e,r){return(e=sN(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function aN(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,sN(n.key),n)}}function sN(t){var e=function(t,e){if("object"!=tN(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=tN(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==tN(e)?e:e+""}var uN=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.config=null,this.graph=null,this.data=null,this.collpasedData={},this.importG6(),this.hoverColor="#b4d6ff",this.CLASS_NAME="SuperMap.G6Render"},(e=[{key:"importG6",value:function(){$I||console.log("please import g6, egï¼https://gw.alipayobjects.com/os/lib/antv/g6/4.3.2/dist/g6.min.js")}},{key:"initGraph",value:function(t){var e=new $I.Graph(t);return this.graph=e,t&&!1===t.highlightNode||this.highlightNode(e),t&&!1===t.highlightEdge||this.highlightEdge(e),!1===t.dragCanvas&&!1===t.dragNode||this.stopDefaultEventPropagation(),e}},{key:"_getDefaultEdgeHighlightStyle",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.hoverColor;return{stroke:t,shadowColor:t,shadowBlur:5,endArrow:{path:"M 0,0 L 4,2 L 4,-2 Z",fill:t}}}},{key:"_getDefaultNodeHighlightStyle",value:function(){return{lineWidth:3,stroke:arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.hoverColor}}},{key:"_getContextMenu",value:function(){var t=this;return new $I.Menu({shouldBegin:function(t){return!!(t.target&&t.target.isCanvas&&t.target.isCanvas())||!!t.item},getContent:function(e){var r=e.item;if(!(e.target&&e.target.isCanvas&&e.target.isCanvas())&&r){var n=r.getType(),o=r.getModel();return n&&o&&"node"===n?t.isCollpased(o.id)?"<ul>\n              <li id='expand'>å±å¼</li>\n            </ul>":"<ul>\n              <li id='collapse'>æå </li>\n            </ul>":void 0}},handleMenuClick:function(e,r){switch(e.id.split("-")[0]){case"hide":t.hideItem(r);break;case"expand":t.expandNode(r);break;case"collapse":t.collapseNode(r);break;case"show":t.showItem(r)}},offsetX:26,offsetY:0,itemTypes:["node","edge","canvas"]})}},{key:"_getGraphConfig",value:function(t){var e=this,r={speed:120,maxIteration:83,tick:function(){e.refreshPositions()}},n={type:"fruchterman",gravity:5},o={},i={type:"line",style:{endArrow:{path:"M 0,0 L 4,2 L 4,-2 Z",fill:"#e0e0e0"},lineWidth:.5},labelCfg:{autoRotate:!0,style:{fontSize:4,fill:"#333"}}},a={default:["drag-canvas","zoom-canvas","drag-node"]},s=this._getContextMenu(),u=[new $I.ToolBar,s];if(!t)return this._setToolBarStyle(),function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"knowledgeGraph",s=document.querySelector("#".concat(t));return{container:t,width:s.scrollWidth,height:s.scrollHeight,plugins:u,modes:a,layout:oN(oN({},n),r),defaultNode:o,defaultEdge:i,nodeStateStyles:{hover:e._getDefaultNodeHighlightStyle(),actived:e._getDefaultNodeHighlightStyle()},edgeStateStyles:{hover:e._getDefaultEdgeHighlightStyle(),actived:e._getDefaultEdgeHighlightStyle()}}}();t.container=t.container||"knowledgeGraph";var l="string"==typeof t.container?document.querySelector("#".concat(t.container)):t.container;t.width=t.width||l.scrollWidth,t.height=t.height||l.scrollHeight,t.layout=oN(oN(oN({},n),t.layout||{}),!1!==t.animate?r:{}),t.defaultNode=oN(oN({},o),t.defaultNode||{}),t.defaultEdge=oN(oN({},i),t.defaultEdge||{}),t.modes={default:[]},!1!==t.dragCanvas&&t.modes.default.push("drag-canvas"),!1!==t.zoomCanvas&&t.modes.default.push("zoom-canvas"),!1!==t.dragNode&&t.modes.default.push("drag-node");var c=oN(oN({},this._getDefaultNodeHighlightStyle()),t.nodeHighlightStyle||{}),f=oN(oN({},this._getDefaultEdgeHighlightStyle()),t.edgeHighlightStyle||{});return t.nodeStateStyles={hover:c,actived:c},t.edgeStateStyles={hover:f,actived:f},!1!==t.showToolBar&&(t.plugins=[new $I.ToolBar],this._setToolBarStyle()),!1!==t.showContextMenu&&(t.plugins=[].concat(eN(t.plugins||[]),[s]),this._setToolBarStyle()),t}},{key:"changeSize",value:function(t,e){return this.graph.changeSize(t,e)}},{key:"autoResize",value:function(){var t=this,e=this.getContainer();window.addEventListener("resize",function(){var r=e.scrollWidth,n=e.scrollHeight;t.graph.changeSize(r,n),t.graph.refresh()})}},{key:"zoom",value:function(t,e,r,n){this.graph.zoom(t,e,r,n)}},{key:"zoomTo",value:function(t,e,r,n){this.graph.zoomTo(t,e,r,n)}},{key:"fitView",value:function(t,e,r,n){this.graph.fitView(t,e,r,n)}},{key:"fitCenter",value:function(t,e){this.graph.fitCenter(t,e)}},{key:"getGraphCenterPoint",value:function(){return this.graph.getGraphCenterPoint()}},{key:"getViewPortCenterPoint",value:function(){return this.graph.getViewPortCenterPoint()}},{key:"getZoom",value:function(){return this.graph.getZoom()}},{key:"getMinZoom",value:function(){return this.graph.getMinZoom()}},{key:"setMinZoom",value:function(t){this.graph.setMinZoom(t)}},{key:"getMaxZoom",value:function(){return this.graph.getMaxZoom()}},{key:"setMaxZoom",value:function(t){this.graph.setMaxZoom(t)}},{key:"getWidth",value:function(){return this.graph.getWidth()}},{key:"getHeight",value:function(){return this.graph.getHeight()}},{key:"setCenter",value:function(t){var e=this.graph.getWidth()/2,r=this.graph.getHeight()/2,n=this.graph.getCanvasByPoint(t.x,t.y);this.graph.translate(e-n.x,r-n.y)}},{key:"_setToolBarStyle",value:function(){kT()("\n      .g6-component-toolbar li[code='redo'],\n      .g6-component-toolbar li[code='undo'],\n      .g6-component-toolbar li[code='realZoom'] {\n        display: none;\n      }\n      .g6-component-contextmenu {\n        position: absolute;\n        z-index: 2;\n        list-style-type: none;\n        border-radius: 6px;\n        font-size: 14px;\n        width: fit-content;\n        transition: opacity .2s;\n        text-align: center;\n        box-shadow: 0 5px 18px 0 rgba(0, 0, 0, 0.6);\n        border: 0px;\n      }\n      .g6-component-contextmenu ul {\n        padding-left: 0px;\n        margin: 0;\n      }\n      .g6-component-contextmenu li {\n        cursor: pointer;\n        list-style-type: none;\n        list-style: none;\n        margin-left: 0;\n        line-height: 38px;\n        padding: 0px 35px;\n      }\n      .g6-component-contextmenu li:hover {\n        color: #333;\n        background: #aaaaaa45;\n      }\n    ")}},{key:"highlightNode",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.graph,e=null;t.on("node:mouseenter",function(r){var n=r.item;t.setAutoPaint(!1),e&&t.clearItemStates(e,"hover"),t.setItemState(n,"hover",!0),e=n,t.paint(),t.setAutoPaint(!0)}),t.on("node:mouseleave",function(){t.setAutoPaint(!1),e&&(t.clearItemStates(e,"hover"),e=null),t.paint(),t.setAutoPaint(!0)})}},{key:"highlightEdge",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.graph,e=null;t.on("edge:mouseenter",function(r){var n=r.item;t.setAutoPaint(!1),e&&t.clearItemStates(e,"hover"),t.setItemState(n,"hover",!0),e=n,t.paint(),t.setAutoPaint(!0)}),t.on("edge:mouseleave",function(){t.setAutoPaint(!1),e&&(t.clearItemStates(e,"hover"),e=null),t.paint(),t.setAutoPaint(!0)})}},{key:"setData",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.graph;this.data?e.changeData(t):e.data(t),this.data=t}},{key:"render",value:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.graph).render()}},{key:"updateGraph",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.graph;this.data=t,e.changeData(t)}},{key:"refresh",value:function(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.graph).refresh()}},{key:"getContainer",value:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.graph).getContainer()}},{key:"getCanvas",value:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.graph).get("canvas")}},{key:"getNodes",value:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.graph).getNodes()}},{key:"getEdges",value:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.graph).getEdges()}},{key:"getNeighbors",value:function(t,e){return(arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.graph).getNeighbors(t,e)}},{key:"findById",value:function(t){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.graph).findById(t)}},{key:"find",value:function(t,e){return(arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.graph).find(t,e)}},{key:"findAll",value:function(t,e){return(arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.graph).findAll(t,e)}},{key:"getEdgesByNode",value:function(t){return t.getEdges()}},{key:"getInEdges",value:function(t){return t.getInEdges()}},{key:"getOutEdges",value:function(t){return t.getOutEdges()}},{key:"getSourceByEdge",value:function(t){return t.getSource()}},{key:"getTargetByEdge",value:function(t){return t.getTarget()}},{key:"expandNode",value:function(t){var e=t.getModel().id;this._expandCollapseNode(this.collpasedData[e],"show"),delete this.collpasedData[e]}},{key:"collapseNode",value:function(t){var e=t.getModel().id,r=[];this._collapseFunc(t,r),this.collpasedData[e]=r,this._expandCollapseNode(r)}},{key:"isCollpased",value:function(t){return!!this.collpasedData[t]}},{key:"_collapseFunc",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=this.getNeighbors(t,"target"),n=this.getNeighbors(t,"source"),o=0;o<r.length;o++){var i=r[o],a=i.getModel();1===this.getNeighbors(i).length&&e.push({id:a.id})}for(var s=0;s<n.length;s++){var u=n[s],l=u.getModel(),c=this.getNeighbors(u),f=this.getNeighbors(u,"source");if(1===c.length||0===f.length)e.push({id:l.id});else{var h=[];this._collapseFunc(u,h),e.push({id:l.id,children:h})}}return e}},{key:"_expandCollapseNode",value:function(t){var e=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"hide";t&&t.forEach(function(t){"hide"===r?e.hideItem(t.id):(e.showItem(t.id),e.isCollpased(t.id)&&delete e.collpasedData[t.id]),t.children&&e._expandCollapseNode(t.children,r)})}},{key:"showItem",value:function(t,e){(arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.graph).showItem(t,e)}},{key:"hideItem",value:function(t,e){(arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.graph).hideItem(t,e)}},{key:"show",value:function(t){t.show()}},{key:"hide",value:function(t){t.hide()}},{key:"changeVisibility",value:function(t,e){t.changeVisibility(e)}},{key:"isVisible",value:function(t){return t.isVisible()}},{key:"getModel",value:function(t){return t.getModel()}},{key:"addItem",value:function(t,e){(arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.graph).addItem(t,e)}},{key:"removeItem",value:function(t){(arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.graph).removeItem(t)}},{key:"updateItem",value:function(t,e){(arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.graph).updateItem(t,e)}},{key:"refreshItem",value:function(t){(arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.graph).refreshItem(t)}},{key:"refreshPositions",value:function(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.graph).refreshPositions()}},{key:"on",value:function(t,e){(arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.graph).on(t,e)}},{key:"off",value:function(t,e){(arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.graph).off(t,e)}},{key:"toDataURL",value:function(t,e){(arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.graph).toDataURL(t,e)}},{key:"bindNodeDefaultDragEvent",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.graph;t.on("node:dragstart",function(t){lN(t)}),t.on("node:drag",function(t){lN(t)}),t.on("node:dragend",function(t){t.item.get("model").fx=null,t.item.get("model").fy=null})}},{key:"stopDefaultEventPropagation",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.graph;t.on("click",function(t){t.stopPropagation()}),t.on("mousedown",function(t){t.stopPropagation()}),t.on("mouseover",function(t){t.stopPropagation()}),t.on("mouseout",function(t){t.stopPropagation()})}},{key:"clear",value:function(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.graph).clear()}},{key:"destroy",value:function(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.graph).destroy()}}])&&aN(t.prototype,e),r&&aN(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function lN(t){var e=t.item.get("model");return e.fx=t.x,e.fy=t.y,e.x=t.x,e.y=t.y,e}var cN=r(2138),fN=r.n(cN);function hN(t){"@babel/helpers - typeof";return(hN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function pN(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,dN(n.key),n)}}function dN(t){var e=function(t,e){if("object"!=hN(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=hN(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==hN(e)?e:e+""}var yN=function(){return t=function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"G6";!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.graph=null,this.config=fN()(e),this.graphRender=null,this.type=r,this.createGraphRender(this.type),this.config=this.graphRender._getGraphConfig(this.config),this.createGraph(this.config),this.CLASS_NAME="SuperMap.KnowledgeGraph"},r=[{key:"dataFromGraphMap",value:function(t,e){return Jv(t,e)}},{key:"dataFromKnowledgeGraphQuery",value:function(t){return Jv(t)}}],(e=[{key:"_handleNodes",value:function(t,e){var r=this;t.filter(function(t){return""!==t}).forEach(function(t){var n=r.findById(t);e(n,"node")})}},{key:"_handleEdges",value:function(t,e){var r=this;t.filter(function(t){return""!==t}).forEach(function(t){var n=r.find("edge",function(e){return e.get("model").edgeId==t});e(n,"edge")})}},{key:"highlight",value:function(t){var e=t.nodeIDs,r=void 0===e?[]:e,n=t.edgeIDs,o=void 0===n?[]:n,i=this.graph,a=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"node";if(e){var n=t[r+"StateStyles"];n&&i.updateItem(e,{style:e.style,stateStyles:{actived:n}}),i.setItemState(e,"actived",!0),i.paint(),i.setAutoPaint(!0)}};this._handleNodes(r,a),this._handleEdges(o,a)}},{key:"clearHighlight",value:function(t){var e=this.graph,r=function(t){t&&(e.clearItemStates(t,"actived"),e.paint(),e.setAutoPaint(!0))};if(e.setAutoPaint(!1),!t)return e.getNodes().forEach(function(t){r(t)}),void e.getEdges().forEach(function(t){r(t)});var n=t.nodeIDs,o=void 0===n?[]:n,i=t.edgeIDs,a=void 0===i?[]:i;this._handleNodes(o,r),this._handleEdges(a,r)}},{key:"handleNodeStatus",value:function(t){var e=t.expand,r=t.collapse,n=t.hidden;this.expandNodes(e),this.collapseNodes(r),this.hideNodes(n)}},{key:"expandNodes",value:function(t){var e=this;t&&t.forEach(function(t){e.expandNode(t+"")})}},{key:"collapseNodes",value:function(t){var e=this;t&&t.forEach(function(t){e.collapseNode(t+"")})}},{key:"hideNodes",value:function(t){var e=this;t&&t.forEach(function(t){e.hideItem(t+"")})}},{key:"createGraphRender",value:function(t){"G6"===t&&(this.graphRender=new uN)}},{key:"createGraph",value:function(t){var e=this.initGraph(t);return this.graph=e,this.autoResize(),e}},{key:"getGraph",value:function(){return this.graph}},{key:"autoResize",value:function(){this.config&&!1!==this.config.autoResize&&this.graphRender.autoResize()}},{key:"zoom",value:function(t,e,r,n){this.graphRender.zoom(t,e,r,n)}},{key:"zoomTo",value:function(t,e,r,n){this.graphRender.zoomTo(t,e,r,n)}},{key:"fitView",value:function(t,e,r,n){this.graphRender.fitView(t,e,r,n)}},{key:"fitCenter",value:function(t,e){this.graphRender.fitCenter(t,e)}},{key:"getGraphCenterPoint",value:function(){return this.graphRender.getGraphCenterPoint()}},{key:"getViewPortCenterPoint",value:function(){return this.graphRender.getViewPortCenterPoint()}},{key:"getZoom",value:function(){return this.graphRender.getZoom()}},{key:"getMinZoom",value:function(){return this.graphRender.getMinZoom()}},{key:"setMinZoom",value:function(t){this.graphRender.setMinZoom(t)}},{key:"getMaxZoom",value:function(){return this.graphRender.getMaxZoom()}},{key:"setMaxZoom",value:function(t){this.graphRender.setMaxZoom(t)}},{key:"getWidth",value:function(){return this.graphRender.getWidth()}},{key:"getHeight",value:function(){return this.graphRender.getHeight()}},{key:"initGraph",value:function(t){var e=this,r=this.graphRender.initGraph(t);this.graph=r;return this.graph.on("beforelayout",function(){void 0!==e.config.zoom&&e.zoom(e.config.zoom),void 0!==e.config.center&&e.graphRender.setCenter({x:e.config.center[0],y:e.config.center[1]})}),r}},{key:"setData",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.graph;t=t||{nodes:[],edges:[]},this.config&&this.config.nodeLabelMaxWidth&&(t.nodes=this.nodeLabelOpenEllipsis(this.config.nodeLabelMaxWidth,t.nodes)),this.graphRender.setData(t,e),this.render(e),this.data=t}},{key:"render",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.graph;t&&this.graphRender.render(t)}},{key:"updateGraph",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.graph;e&&this.graphRender.updateGraph(t,e)}},{key:"refresh",value:function(){return this.graphRender.refresh()}},{key:"changeSize",value:function(t,e){return this.graphRender.changeSize(t,e)}},{key:"resize",value:function(t,e){this.graphRender.changeSize(t,e),this.graphRender.refresh()}},{key:"getContainer",value:function(){return this.graphRender.getContainer()}},{key:"getCanvas",value:function(){return this.graphRender.getCanvas()}},{key:"getNodes",value:function(){return this.graphRender.getNodes()}},{key:"getEdges",value:function(){return this.graphRender.getEdges()}},{key:"getNeighbors",value:function(t,e){return this.graphRender.getNeighbors(t,e)}},{key:"findById",value:function(t){return this.graphRender.findById(t)}},{key:"find",value:function(t,e){return this.graphRender.find(t,e)}},{key:"findAll",value:function(t,e){return this.graphRender.findAll(t,e)}},{key:"getEdgesByNode",value:function(t){return this.graphRender.getEdgesByNode(t)}},{key:"getInEdges",value:function(t){return this.graphRender.getInEdges(t)}},{key:"getOutEdges",value:function(t){return this.graphRender.getOutEdges(t)}},{key:"getSourceByEdge",value:function(t){return this.graphRender.getSourceByEdge(t)}},{key:"getTargetByEdge",value:function(t){return this.graphRender.getTargetByEdge(t)}},{key:"expandNode",value:function(t){var e=this.findById(t);e&&this.graphRender.expandNode(e)}},{key:"collapseNode",value:function(t){var e=this.findById(t);e&&this.graphRender.collapseNode(e)}},{key:"showItem",value:function(t,e){this.graphRender.showItem(t,e)}},{key:"hideItem",value:function(t,e){this.graphRender.hideItem(t,e)}},{key:"show",value:function(t){this.graphRender.show(t)}},{key:"hide",value:function(t){this.graphRender.hide(t)}},{key:"changeVisibility",value:function(t,e){this.graphRender.changeVisibility(t,e)}},{key:"isVisible",value:function(t){return this.graphRender.isVisible(t)}},{key:"getModel",value:function(t){return this.graphRender.getModel(t)}},{key:"addItem",value:function(t,e){return this.graphRender.addItem(t,e)}},{key:"removeItem",value:function(t){return this.graphRender.removeItem(t)}},{key:"updateItem",value:function(t,e){return this.graphRender.updateItem(t,e)}},{key:"refreshItem",value:function(t){return this.graphRender.refreshItem(t)}},{key:"refreshPositions",value:function(){return this.graphRender.refreshPositions()}},{key:"on",value:function(t,e){this.graphRender.on(t,e)}},{key:"off",value:function(t,e){this.graphRender.off(t,e)}},{key:"toDataURL",value:function(t,e){this.graphRender.toDataURL(t,e)}},{key:"nodeLabelOpenEllipsis",value:function(t,e){var r=this;return e?t?e.map(function(e){var n=e.labelCfg&&e.labelCfg.fontSize||r.defaultNode&&r.defaultNode.labelCfg&&r.defaultNode.labelCfg.fontSize||14;return e.label=function(t,e,r){var n=1*r;e*=1.6;if(function(t){for(var e=0,r=0;r<t.length;r++)t.charCodeAt(r)>0&&t.charCodeAt(r)<128?e++:e+=2;return e}(t)*n>e){var o=Math.floor((e-20)/n),i=t.substring(0,o);return(t.substring(o).length+"â¦".length)*n>e?i+"\n"+t.substring(o,o+o-2)+"â¦":0==t.substring(o).length?i:i+"\n"+t.substring(o)}return t}(e.label,t,n),e}):e:[]}},{key:"clear",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.graph;t&&t.clear()}},{key:"destroy",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.graph;t&&t.destroy()}}])&&pN(t.prototype,e),r&&pN(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function vN(t){"@babel/helpers - typeof";return(vN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function gN(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function mN(){mN=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var i=e&&e.prototype instanceof g?e:g,a=Object.create(i.prototype),s=new A(n||[]);return o(a,"_invoke",{value:P(t,r,s)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var h="suspendedStart",p="suspendedYield",d="executing",y="completed",v={};function g(){}function m(){}function b(){}var w={};l(w,a,function(){return this});var S=Object.getPrototypeOf,x=S&&S(S(M([])));x&&x!==r&&n.call(x,a)&&(w=x);var _=b.prototype=g.prototype=Object.create(w);function E(t){["next","throw","return"].forEach(function(e){l(t,e,function(t){return this._invoke(e,t)})})}function O(t,e){function r(o,i,a,s){var u=f(t[o],t,i);if("throw"!==u.type){var l=u.arg,c=l.value;return c&&"object"==vN(c)&&n.call(c,"__await")?e.resolve(c.__await).then(function(t){r("next",t,a,s)},function(t){r("throw",t,a,s)}):e.resolve(c).then(function(t){l.value=t,a(l)},function(t){return r("throw",t,a,s)})}s(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e(function(e,o){r(t,n,e,o)})}return i=i?i.then(o,o):o()}})}function P(e,r,n){var o=h;return function(i,a){if(o===d)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var u=k(s,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var l=f(e,r,n);if("normal"===l.type){if(o=n.done?y:p,l.arg===v)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=y,n.method="throw",n.arg=l.arg)}}}function k(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,k(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function T(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function A(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function M(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(vN(e)+" is not iterable")}return m.prototype=b,o(_,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:m,configurable:!0}),m.displayName=l(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,l(t,u,"GeneratorFunction")),t.prototype=Object.create(_),t},e.awrap=function(t){return{__await:t}},E(O.prototype),l(O.prototype,s,function(){return this}),e.AsyncIterator=O,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new O(c(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next()})},E(_),l(_,u,"Generator"),l(_,a,function(){return this}),l(_,"toString",function(){return"[object Generator]"}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=M,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(T),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),T(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;T(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:M(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function bN(t,e,r,n,o,i,a){try{var s=t[i](a),u=s.value}catch(t){return void r(t)}s.done?e(u):Promise.resolve(u).then(n,o)}function wN(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,SN(n.key),n)}}function SN(t){var e=function(t,e){if("object"!=vN(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=vN(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==vN(e)?e:e+""}function xN(t,e,r){return e=_N(e),function(t,e){if(e&&("object"===vN(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],_N(t).constructor):e.apply(t,r))}function _N(t){return(_N=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function EN(t,e){return(EN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var ON=function(t){function e(t,r){var n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=xN(this,e,[t,r])).graph=null,n.EVENT_TYPES=["loaded"];var o=t.split("/").pop();return n.url=t.replace("/graphmaps/".concat(o),""),n.createGraphMap(o,r),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&EN(t,e)}(e,w().Evented),r=e,(n=[{key:"createGraphMap",value:function(){var t,e=(t=mN().mark(function t(e,r){var n,o,i=this;return mN().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.knowledgeGraphService=this.createKnowledgeGraphService(this.url,r),t.next=3,this.knowledgeGraphService.getGraphMapData(e);case 3:n=t.sent,o=yN.dataFromGraphMap(n.data,n.graphMap),this.graph=new yN(r&&r.config),this.graph.on("beforelayout",function(){i.fire(i.EVENT_TYPES[0])}),this.graph.setData(o),this.graph.handleNodeStatus((a=n.graphMap,void 0,void 0,void 0,void 0,s=a.dataContent,u=s.expand,l=s.collapse,c=s.hidden,{expand:u&&JSON.parse(u),collapse:l&&JSON.parse(l),hidden:c&&JSON.parse(c)}));case 9:case"end":return t.stop()}var a,s,u,l,c},t,this)}),function(){var e=this,r=arguments;return new Promise(function(n,o){var i=t.apply(e,r);function a(t){bN(i,n,o,a,s,"next",t)}function s(t){bN(i,n,o,a,s,"throw",t)}a(void 0)})});return function(t,r){return e.apply(this,arguments)}}()},{key:"createKnowledgeGraphService",value:function(t,e){return new Gv(t,e)}},{key:"findShortestPath",value:function(t,e){var r=this,n=t.startID,o=t.endID,i=t.isHighlight,a=void 0===i||i,s=t.highlightStateStyles,u=void 0===s?{}:s;return this.knowledgeGraphService.findShortestPath({startID:n,endID:o},function(t){if(e&&e(t),a)if("processCompleted"===t.type&&t.result.succeed){var n=t.result,o=n.nodeIDs,i=n.edgeIDs;r.highlight(function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?gN(Object(r),!0).forEach(function(e){var n,o,i;n=t,o=e,i=r[e],(o=SN(o))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):gN(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}({nodeIDs:o,edgeIDs:i},u))}else alert(t.error.errorMsg,!1)})}},{key:"highlight",value:function(t){this.graph&&this.graph.highlight(t)}},{key:"clearHighlight",value:function(t){this.graph&&this.graph.clearHighlight(t)}}])&&wN(r.prototype,n),o&&wN(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function PN(t,e,r){return r?new t({id:r.getContainer().id,pickBufferScale:1,map:new e({mapInstance:r})}):null}var kN=function(){try{return L7}catch(t){return{}}}();function CN(t){"@babel/helpers - typeof";return(CN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function TN(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function AN(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?TN(Object(r),!0).forEach(function(e){MN(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):TN(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function MN(t,e,r){return(e=IN(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function jN(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,IN(n.key),n)}}function IN(t){var e=function(t,e){if("object"!=CN(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=CN(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==CN(e)?e:e+""}var NN=function(){return t=function t(e){var r=e.type,n=e.options;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.preBuild(),this.type="custom",this.id=n&&n.layerID?n.layerID:W.createUniqueID("l7_layer_");var o=AN({},n||{});"ThreeLayer"!==r&&(this.l7layer=new kN[r](AN(AN({},o),{},{name:this.id}))),this.overlay=!0},(e=[{key:"preBuild",value:function(){w().Map.prototype.mapExtendAddLayerBak||(w().Map.prototype.mapExtendAddLayerBak=w().Map.prototype.addLayer,w().Map.prototype.addLayer=function(t,e){return w().Map.prototype.$l7scene||(w().Map.prototype.$l7scene=PN(kN.Scene,kN.Mapbox,this)),this.mapExtendAddLayerBak(t,e),this})}},{key:"getL7Layer",value:function(){return this.l7layer}},{key:"reRender",value:function(){this.scene&&this.scene.getLayer(this.l7layer.id)&&this.scene.layerService.renderLayer(this.l7layer.id),this.map&&this.map.triggerRepaint()}},{key:"moveLayer",value:function(t,e){this.map.style.moveLayer(t,e)}},{key:"setVisibility",value:function(t){t?this.l7layer.show():this.l7layer.hide(),this.map.style.setLayoutProperty(this.id,"visibility",t?"visible":"none")}},{key:"onAdd",value:function(t){this.map=t;var e=t.$l7scene;e&&(this.scene=e,this.scene.addLayer(this.l7layer))}},{key:"remove",value:function(){this.scene&&this.scene.removeLayer(this.l7layer)}},{key:"onRemove",value:function(){this.scene&&this.scene.layerService.stopAnimate(),this.scene&&this.scene.removeLayer(this.l7layer)}},{key:"render",value:function(){this.scene&&this.scene.getLayer(this.l7layer.id)&&(this.l7layer.animateStatus||this.l7layer.layerModel&&this.l7layer.layerModel.spriteAnimate?(this.scene.layerService.startAnimate(this.l7layer.id),this.map.triggerRepaint()):this.scene.layerService.renderLayer(this.l7layer.id))}}])&&jN(t.prototype,e),r&&jN(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function LN(t){"@babel/helpers - typeof";return(LN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function RN(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,DN(n.key),n)}}function DN(t){var e=function(t,e){if("object"!=LN(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=LN(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==LN(e)?e:e+""}w().Map.prototype.getL7Scene=function(){var t=this;return new Promise(function(e){if(w().Map.prototype.$l7scene)return e(w().Map.prototype.$l7scene),w().Map.prototype.$l7scene;var r=PN(kN.Scene,kN.Mapbox,t);r.on("loaded",function(){return w().Map.prototype.$l7scene=r,e(r),r})})};var BN=function(){return t=function t(e,r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.lngLat=$n.isArray(e)?{lng:e[0],lat:e[1]}:e,this.style=$n.extend({},r),this.attributes=n},(e=[{key:"getId",value:function(){return this.id}},{key:"setId",value:function(t){this.id=t}},{key:"getLngLat",value:function(){return this.lngLat}},{key:"setLngLat",value:function(t){this.lngLat=$n.isArray(t)?{lng:t[0],lat:t[1]}:t}},{key:"setStyle",value:function(t){this.style=$n.extend(this.style,t)}},{key:"getStyle",value:function(){return this.style}},{key:"setAttributes",value:function(t){this.attributes=$n.extend({},this.attributes,t)}},{key:"getAttributes",value:function(){return this.attributes}}])&&RN(t.prototype,e),r&&RN(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}(),FN={getPoint:function(t){if(t&&t instanceof Array)return new wc.DataSet([{geometry:{type:"Point",coordinates:t}}])},getPoints:function(t){if(t&&t instanceof Array){var e=[];return t.forEach(function(t){e.push({geometry:{type:"Point",coordinates:t.geometry.coordinates}})}),new wc.DataSet(e)}},getCurveLines:function(t,e){if(t&&t instanceof Array&&e&&e instanceof Array){var r=[];return e.forEach(function(e){var n=e.geometry&&e.geometry.coordinates,o={lng:n[0],lat:n[1]},i={lng:t[0],lat:t[1]},a=wc.utilCurve.getPoints([i,o]);r.push({geometry:{type:"LineString",coordinates:a}})}),new wc.DataSet(r)}},getCurveDynamicPoints:function(t,e){if(t&&t instanceof Array&&e&&e instanceof Array){var r=[];return e.forEach(function(e){for(var n=e.geometry&&e.geometry.coordinates,o={lng:n[0],lat:n[1]},i={lng:t[0],lat:t[1]},a=wc.utilCurve.getPoints([i,o]),s=0;s<a.length;s++)r.push({geometry:{type:"Point",coordinates:a[s]},time:s})}),new wc.DataSet(r)}}};function GN(t,e,r,n,o){return{id:t,type:e,source:r||"vector-tiles","source-layer":n||t,paint:o}}function UN(t){"@babel/helpers - typeof";return(UN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function zN(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function VN(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?zN(Object(r),!0).forEach(function(e){HN(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):zN(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function HN(t,e,r){return(e=qN(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function WN(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,qN(n.key),n)}}function qN(t){var e=function(t,e){if("object"!=UN(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=UN(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==UN(e)?e:e+""}var YN=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.map=e},(e=[{key:"addLayer",value:function(t,e,r){t.paint&&Object.assign(e.paint||{},t.paint),t.layout&&Object.assign(e.layout||{},t.layout),this.map.addLayerBySymbolBak(VN(VN({},t),e),r)}}])&&WN(t.prototype,e),r&&WN(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function XN(t){"@babel/helpers - typeof";return(XN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function JN(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function KN(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?JN(Object(r),!0).forEach(function(e){QN(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):JN(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function QN(t,e,r){return(e=$N(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ZN(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,$N(n.key),n)}}function $N(t){var e=function(t,e){if("object"!=XN(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=XN(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==XN(e)?e:e+""}var tL=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.map=e,this.singleSymbol=new YN(e),this.layerIds={}},(e=[{key:"addLayer",value:function(t,e,r){var n=this;e.forEach(function(e){var o=W.createUniqueID("".concat(t.id,"_compositeLayer_"));n.singleSymbol.addLayer(KN(KN({},t),{},{id:o}),e,r),n.addLayerId(t.id,o)})}},{key:"addLayerId",value:function(t,e){this.layerIds[t]||(this.layerIds[t]=[]),!this.layerIds[t].includes(e)&&this.layerIds[t].push(e)}},{key:"removeLayerId",value:function(t){delete this.layerIds[t]}},{key:"getLayerIds",value:function(t){return this.layerIds[t]}},{key:"getLayerId",value:function(t){for(var e in this.layerIds)if(this.layerIds[e].find(function(e){return e===t}))return e}}])&&ZN(t.prototype,e),r&&ZN(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function eL(t){"@babel/helpers - typeof";return(eL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function rL(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,nL(n.key),n)}}function nL(t){var e=function(t,e){if("object"!=eL(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=eL(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==eL(e)?e:e+""}var oL=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.symbols={},this.images={}},(e=[{key:"addSymbol",value:function(t,e){e.layout&&delete e.layout.visibility,this.symbols[t]=e}},{key:"getSymbol",value:function(t){return this.symbols[t]&&JSON.parse(JSON.stringify(this.symbols[t]))}},{key:"removeSymbol",value:function(t){delete this.symbols[t]}},{key:"addImageInfo",value:function(t,e){this.images[t]=e}},{key:"getImageInfo",value:function(t){return this.images[t]}}])&&rL(t.prototype,e),r&&rL(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function iL(t){"@babel/helpers - typeof";return(iL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function aL(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,s=[],u=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(s.push(n.value),s.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(t,e)||sL(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function sL(t,e){if(t){if("string"==typeof t)return uL(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?uL(t,e):void 0}}function uL(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function lL(t,e,r){var n;return(e="symbol"==iL(n=function(t,e){if("object"!=iL(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=iL(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"))?n:n+"")in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var cL={circle:"circle",symbol:"symbol",line:"line",fill:"fill"},fL=[{prefix:"line-",type:cL.line},{prefix:"fill-",type:cL.fill},{prefix:"circle-",type:cL.circle}];function hL(t){return t&&t.length>0}function pL(t){var e=function(t){var e,r,n=t.paint,o=void 0===n?{}:n,i=t.layout,a=void 0===i?{}:i,s=Object.keys(o).concat(Object.keys(a)),u=function(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=sL(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){s=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}(fL);try{var l=function(){var t=r.value,n=s.some(function(e){return e.startsWith(t.prefix)});if(n)return e=t.type,1};for(u.s();!(r=u.n()).done&&!l(););}catch(t){u.e(t)}finally{u.f()}return e||cL.symbol}(t);return lL(lL(lL({},cL.symbol,{type:"layout",name:"icon-image"}),cL.line,{type:"paint",name:"line-pattern"}),cL.fill,{type:"paint",name:"fill-pattern"})[e]}var dL=["array","boolean","collator","format","literal","number","object","string","to-boolean","to-color","to-number","to-string","typeof","feature-state","geometry-type","id","line-progress","properties","at","get","has","length","!","!=","<","<=","==",">",">=","all","any","case","match","coalesce","interpolate","interpolate-hcl","interpolate-lab","step","let","var","concat","downcase","is-supported-script","resolved-locale","upcase","rgb","rgba","-","*","/","%","^","+","abs","acos","asin","atan","ceil","cos","e","floor","ln","ln2","log10","log2","max","min","pi","round","sin","sqrt","tan","zoom","heatmap-density"];function yL(t){if(t&&t.length>0){var e=aL(t,1)[0];return"string"==typeof e&&dL.includes(e)}return!1}function vL(t){return Object.keys(t).every(function(e){return!yL(t[e])})}function gL(t){return(hL(t)?t:[t]).every(function(t){return vL(t.paint||{})&&vL(t.layout||{})})}var mL=function(t){return["background-color","background-color-transition","background-pattern","background-pattern-transition","background-opacity","background-opacity-transition","fill-antialias","fill-opacity","fill-opacity-transition","fill-color","fill-color-transition","fill-outline-color","fill-outline-color-transition","fill-translate","fill-translate-transition","fill-translate-anchor","fill-pattern","fill-pattern-transition","fill-extrusion-opacity","fill-extrusion-opacity-transition","fill-extrusion-color","fill-extrusion-color-transition","fill-extrusion-translate","fill-extrusion-translate-transition","fill-extrusion-translate-anchor","fill-extrusion-pattern","fill-extrusion-pattern-transition","fill-extrusion-height","fill-extrusion-height-transition","fill-extrusion-base","fill-extrusion-base-transition","fill-extrusion-vertical-gradient","line-opacity","line-opacity-transition","line-color","line-color-transition","line-translate","line-translate-transition","line-translate-anchor","line-width","line-width-transition","line-gap-width","line-gap-width-transition","line-offset","line-offset-transition","line-blur","line-blur-transition","line-dasharray","line-dasharray-transition","line-pattern","line-pattern-transition","line-gradient","icon-opacity","icon-opacity-transition","icon-color","icon-color-transition","icon-halo-color","icon-halo-color-transition","icon-halo-width","icon-halo-width-transition","icon-halo-blur","icon-halo-blur-transition","icon-translate","icon-translate-transition","icon-translate-anchor","text-opacity","text-opacity-transition","text-color","text-color-transition","text-halo-color","text-halo-color-transition","text-halo-width","text-halo-width-transition","text-halo-blur","text-halo-blur-transition","text-translate","text-translate-transition","text-translate-anchor","raster-opacity","raster-opacity-transition","raster-hue-rotate","raster-hue-rotate-transition","raster-brightness-min","raster-brightness-min-transition","raster-brightness-max","raster-brightness-max-transition","raster-saturation","raster-saturation-transition","raster-contrast","raster-contrast-transition","raster-fade-duration","raster-resampling","circle-sort-key","circle-radius","circle-radius-transition","circle-color","circle-color-transition","circle-blur","circle-blur-transition","circle-opacity","circle-opacity-transition","circle-translate","circle-translate-transition","circle-translate-anchor","circle-pitch-scale","circle-pitch-alignment","circle-stroke-width","circle-stroke-width-transition","circle-stroke-color","circle-stroke-color-transition","circle-stroke-opacity","circle-stroke-opacity-transition","heatmap-radius","heatmap-radius-transition","heatmap-weight","heatmap-intensity","heatmap-intensity-transition","heatmap-color","heatmap-opacity","heatmap-opacity-transition","hillshade-illumination-direction","hillshade-illumination-anchor","hillshade-exaggeration","hillshade-exaggeration-transition","hillshade-shadow-color","hillshade-shadow-color-transition","hillshade-highlight-color","hillshade-highlight-color-transition","hillshade-accent-color","hillshade-accent-color-transition"].includes(t)};function bL(t){"@babel/helpers - typeof";return(bL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function wL(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function SL(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?wL(Object(r),!0).forEach(function(e){xL(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):wL(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function xL(t,e,r){return(e=EL(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function _L(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,EL(n.key),n)}}function EL(t){var e=function(t,e){if("object"!=bL(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=bL(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==bL(e)?e:e+""}var OL=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.map=e,this.symbolManager=new oL,this.singleSymbolRender=new YN(e),this.compositeSymbolRender=new tL(e),this._layerSymbols={}},(e=[{key:"_update",value:function(t){return this.map=t,this}},{key:"addLayer",value:function(t,e){if("string"==typeof t.symbol){var r=t.symbol;if(r){var n=this.getSymbol(r);if(!n)return this.map.fire("error",{error:new Error('Symbol "'.concat(r,'" could not be loaded. Please make sure you have added the symbol with map.addSymbol().'))});this.setSymbolTolayer(t.id,r),this.getSymbolRender(n).addLayer(t,n,e)}}else yL(t.symbol)&&(this.setSymbolTolayer(t.id,t.symbol),this.addExpressionLayer(t,e))}},{key:"setSymbol",value:function(t,e){var r=this.map.getStyle().layers,n=r.findIndex(function(e){return e.id===t});if(-1===n)return this.map.fire("error",{error:new Error('Cannot set symbol "'.concat(e,'" to non-existing layer "').concat(t,'".'))});this.map.removeLayer(t);var o=r[n+1]&&r[n+1].id,i=o&&this.map.style.getLayer(o),a=i&&i.id||o&&this.getFirstLayerId(o),s=r[n];this.addLayer(SL(SL({},s),{},{paint:{},layout:{visibility:s.layout&&s.layout.visibility||"visible"},symbol:e}),a)}},{key:"getMatchLayers",value:function(t){var e=[],r=["all"];t.filter&&r.push(t.filter);var n=[],o=t.symbol.slice(2);return o.forEach(function(i,a){a%2==1?(e.push(SL(SL({},t),{},{filter:[].concat(r,[["==",t.symbol[1][1],o[a-1]]]),symbol:i})),n.push(["!=",t.symbol[1][1],o[a-1]])):a===o.length-1&&e.unshift(SL(SL({},t),{},{filter:[].concat(r,n),symbol:i}))}),e}},{key:"getCaseLayers",value:function(t){var e=[],r=["all"];t.filter&&r.push(t.filter);var n=[],o=t.symbol.slice(1);return o.forEach(function(i,a){a%2==1?(e.push(SL(SL({},t),{},{filter:[].concat(r,[o[a-1]]),symbol:i})),n.push(["!",o[a-1]])):a===o.length-1&&e.unshift(SL(SL({},t),{},{filter:[].concat(r,n),symbol:i}))}),e}},{key:"addExpressionLayer",value:function(t,e){var r=this,n={match:this.getMatchLayers,case:this.getCaseLayers}[t.symbol[0]],o=n&&n(t);if(!o)return this.map.fire("error",{error:new Error("This expressions not supported")});o.forEach(function(n){n.id=W.createUniqueID("".concat(t.id,"_compositeLayer_")),r.compositeSymbolRender.addLayerId(t.id,n.id),r.addLayer(n,e)})}},{key:"getSymbolRender",value:function(t){return hL(t)?this.compositeSymbolRender:this.singleSymbolRender}},{key:"addSymbolImageToMap",value:function(t,e){var r=pL(t),n=r.type,o=r.name,i=t[n]&&t[n][o];i&&!this.map.hasImage(i)&&(this.map.addImage(i,e),this.symbolManager.addImageInfo(i,e))}},{key:"addSymbol",value:function(t,e){return this.getSymbol(t)?this.map.fire("error",{error:new Error("An symbol with this name already exists.")}):gL(e)?void this.symbolManager.addSymbol(t,e):this.map.fire("error",{error:new Error("Symbol is not supported expressions.")})}},{key:"setSymbolTolayer",value:function(t,e){this._layerSymbols[t]=e}},{key:"getLayerSymbol",value:function(t){return this._layerSymbols[t]}},{key:"hasSymbol",value:function(){return Object.keys(this._layerSymbols).length>0}},{key:"removeSymbol",value:function(t){this.symbolManager.removeSymbol(t)}},{key:"getSymbol",value:function(t){return this.symbolManager.getSymbol(t)}},{key:"getLayerIds",value:function(t){return this.compositeSymbolRender.getLayerIds(t)||[]}},{key:"getLayerId",value:function(t){return this.compositeSymbolRender.getLayerId(t)}},{key:"removeLayerId",value:function(t){return this.compositeSymbolRender.removeLayerId(t)}},{key:"getLayer",value:function(t){var e=this.map.getLayerBySymbolBak(t),r=this.getLayerSymbol(t);if(e)return r?SL(SL({},e),{},{symbol:r}):e;var n=this.getLayerIds(t);if(n[0]){var o=this.map.getLayerBySymbolBak(n[0]);return o&&SL(SL({},o),{},{symbol:r,id:t})}}},{key:"removeLayer",value:function(t){var e=this,r=this.getLayerIds(t);r.length>0?(r.forEach(function(t){return e.map.style.removeLayer(t)}),this.removeLayerId(t)):this.map.style.removeLayer(t)}},{key:"getStyle",value:function(){var t=this,e=this.map.style.serialize();return this.hasSymbol()&&(e.layers=e.layers.reduce(function(e,r){var n=t.getLayerId(r.id);return n?!e.find(function(t){return t.id===n})&&e.push(SL(SL({},r),{},{symbol:t.getLayerSymbol(n),id:n})):t.getLayerSymbol(r.id)?e.push(SL(SL({},r),{},{symbol:t.getLayerSymbol(r.id)})):e.push(r),e},[])),e}},{key:"getFirstLayerId",value:function(t){return this.getLayerIds(t)[0]}},{key:"moveLayer",value:function(t,e){var r=this,n=this.getLayerIds(t),o=e&&this.map.style.getLayer(e),i=o&&o.id||e&&this.getFirstLayerId(e);n.length>0?n.forEach(function(t){return r.map.style.moveLayer(t,i)}):this.map.style.moveLayer(t,i)}},{key:"setFilter",value:function(t,e,r){var n=this;if(yL(this.getLayerSymbol(t))){var o=this.getFirstLayerId(t);this.map.style.setFilter(o,e,r);var i=this.getLayerSymbol(t);this.setSymbol(t,i)}else{var a=this.getLayerIds(t);a.length>0?a.forEach(function(t){return n.map.style.setFilter(t,e,r)}):this.map.style.setFilter(t,e,r)}}},{key:"getFilter",value:function(t){var e=this.getFirstLayerId(t);if(this.map.style.getLayer(e))return this.map.style.getFilter(e)}},{key:"setLayerZoomRange",value:function(t,e,r){var n=this,o=this.getLayerIds(t);o.length>0?o.forEach(function(t){return n.map.style.setLayerZoomRange(t,e,r)}):this.map.style.setLayerZoomRange(t,e,r)}},{key:"setPaintProperty",value:function(t,e,r,n){var o=this,i=this.getLayerIds(t);i.length>0?i.forEach(function(t){return o.map.style.setPaintProperty(t,e,r,n)}):this.map.style.setPaintProperty(t,e,r,n)}},{key:"getPaintProperty",value:function(t,e){var r=this.getFirstLayerId(t);return this.map.style.getPaintProperty(r,e)}},{key:"setLayoutProperty",value:function(t,e,r,n){var o=this,i=this.getLayerIds(t);i.length>0?i.forEach(function(t){return o.map.style.setLayoutProperty(t,e,r,n)}):this.map.style.setLayoutProperty(t,e,r,n)}},{key:"getLayoutProperty",value:function(t,e){var r=this.getFirstLayerId(t);return this.map.style.getLayoutProperty(r,e)}},{key:"updateLayerSymbol",value:function(t){var e=this;Object.keys(this._layerSymbols).forEach(function(r){var n=e._layerSymbols[r];n.includes(t)&&e.setSymbol(r,n)})}},{key:"updateSymbol",value:function(t,e){return this.getSymbol(t)?gL(e)?(this.symbolManager.addSymbol(t,e),void this.updateLayerSymbol(t)):this.map.fire("error",{error:new Error("Symbol is not supported expressions.")}):this.map.fire("error",{error:new Error('Symbol "'.concat(t,'" could not be loaded. Please make sure you have added the symbol with map.addSymbol().'))})}},{key:"setSymbolProperty",value:function(t,e,r,n){var o=this.getSymbol(t);if(!o)return this.map.fire("error",{error:new Error('Symbol "'.concat(t,'" could not be loaded. Please make sure you have added the symbol with map.addSymbol().'))});if(yL(n))return this.map.fire("error",{error:new Error("Symbol value is not supported expressions.")});var i=mL(r)?"paint":"layout";if(o.length>0){var a=o[e];if(!a)return this.map.fire("error",{error:new Error("symbol[".concat(e,"] does not exist."))});a[i]||(a[i]={}),Object.assign(a[i],xL({},r,n))}else o[i]||(o[i]={}),Object.assign(o[i],xL({},r,n));this.symbolManager.addSymbol(t,o),this.updateLayerSymbol(t)}},{key:"getSymbolProperty",value:function(t,e,r){var n=this.getSymbol(t);if(n){var o=mL(r)?"paint":"layout";return n.length>0?n[e]&&n[e][o]&&n[e][o][r]:n[o]&&n[o][r]}this.map.fire("error",{error:new Error('Symbol "'.concat(t,'" could not be loaded. Please make sure you have added the symbol with map.addSymbol().'))})}}])&&_L(t.prototype,e),r&&_L(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function PL(t){"@babel/helpers - typeof";return(PL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function kL(){kL=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var i=e&&e.prototype instanceof g?e:g,a=Object.create(i.prototype),s=new A(n||[]);return o(a,"_invoke",{value:P(t,r,s)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var h="suspendedStart",p="suspendedYield",d="executing",y="completed",v={};function g(){}function m(){}function b(){}var w={};l(w,a,function(){return this});var S=Object.getPrototypeOf,x=S&&S(S(M([])));x&&x!==r&&n.call(x,a)&&(w=x);var _=b.prototype=g.prototype=Object.create(w);function E(t){["next","throw","return"].forEach(function(e){l(t,e,function(t){return this._invoke(e,t)})})}function O(t,e){function r(o,i,a,s){var u=f(t[o],t,i);if("throw"!==u.type){var l=u.arg,c=l.value;return c&&"object"==PL(c)&&n.call(c,"__await")?e.resolve(c.__await).then(function(t){r("next",t,a,s)},function(t){r("throw",t,a,s)}):e.resolve(c).then(function(t){l.value=t,a(l)},function(t){return r("throw",t,a,s)})}s(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e(function(e,o){r(t,n,e,o)})}return i=i?i.then(o,o):o()}})}function P(e,r,n){var o=h;return function(i,a){if(o===d)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var u=k(s,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var l=f(e,r,n);if("normal"===l.type){if(o=n.done?y:p,l.arg===v)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=y,n.method="throw",n.arg=l.arg)}}}function k(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,k(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function T(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function A(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function M(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(PL(e)+" is not iterable")}return m.prototype=b,o(_,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:m,configurable:!0}),m.displayName=l(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,l(t,u,"GeneratorFunction")),t.prototype=Object.create(_),t},e.awrap=function(t){return{__await:t}},E(O.prototype),l(O.prototype,s,function(){return this}),e.AsyncIterator=O,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new O(c(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next()})},E(_),l(_,u,"Generator"),l(_,a,function(){return this}),l(_,"toString",function(){return"[object Generator]"}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=M,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(T),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),T(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;T(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:M(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function CL(t,e,r,n,o,i,a){try{var s=t[i](a),u=s.value}catch(t){return void r(t)}s.done?e(u):Promise.resolve(u).then(n,o)}function TL(t){return function(){var e=this,r=arguments;return new Promise(function(n,o){var i=t.apply(e,r);function a(t){CL(i,n,o,a,s,"next",t)}function s(t){CL(i,n,o,a,s,"throw",t)}a(void 0)})}}var AL=function(){var t=function(t){return w().Map.prototype.symbolHandler||(w().Map.prototype.symbolHandler=new OL(t)),w().Map.prototype.symbolHandler._update(t)};function e(){return(e=TL(kL().mark(function t(e,r){var n,o,i,a,s,u;return kL().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n="".concat(r.basePath,"/").concat(e,"/").concat(e),t.next=4,tt.get("".concat(n,".json")).then(function(t){return t.ok?t.json():null}).catch(function(){return null});case 4:if(o=t.sent){t.next=7;break}return t.abrupt("return",null);case 7:if(i=o.paint||{},a=o.layout||{},s=i["fill-pattern"]||i["line-pattern"]||a["icon-image"],t.t0=s,!t.t0){t.next=15;break}return t.next=14,new Promise(function(t){var e=new Image;e.src="".concat(n,".png"),e.onload=function(r){t(r?e:null)},e.onerror=function(){t(null)}});case 14:t.t0=t.sent;case 15:return u=t.t0,t.abrupt("return",{value:o,image:u});case 17:case"end":return t.stop()}},t)}))).apply(this,arguments)}function r(r,n){return function(t,r){return e.apply(this,arguments)}(r,n).then(function(e){if(!e)return null;var r=e.value,o=e.image;return o&&t(n).addSymbolImageToMap(r,o),r})}void 0===w().Map.prototype.addLayerBySymbolBak&&(w().Map.prototype.addLayerBySymbolBak=w().Map.prototype.addLayer,w().Map.prototype.addLayer=function(e,r){var n=t(this);if(!(n.getLayerIds(e.id).length>0))return e.symbol?(n.addLayer(e,r),this):(this.addLayerBySymbolBak(e,r),this);this.fire("error",{error:new Error("A layer with this id already exists.")})}),void 0===w().Map.prototype.getLayerBySymbolBak&&(w().Map.prototype.getLayerBySymbolBak=w().Map.prototype.getLayer,w().Map.prototype.getLayer=function(e){return t(this).getLayer(e)}),void 0===w().Map.prototype.moveLayerBySymbolBak&&(w().Map.prototype.moveLayerBySymbolBak=w().Map.prototype.moveLayer,w().Map.prototype.moveLayer=function(e,r){return!this.style.getLayer(e)||r&&!this.style.getLayer(r)?(t(this).moveLayer(e,r),this._update(!0)):this.moveLayerBySymbolBak(e,r)}),void 0===w().Map.prototype.removeLayerBySymbolBak&&(w().Map.prototype.removeLayerBySymbolBak=w().Map.prototype.removeLayer,w().Map.prototype.removeLayer=function(e){return this.style.getLayer(e)?this.removeLayerBySymbolBak(e):t(this).removeLayer(e)}),void 0===w().Map.prototype.setLayoutPropertyBySymbolBak&&(w().Map.prototype.setLayoutPropertyBySymbolBak=w().Map.prototype.setLayoutProperty,w().Map.prototype.setLayoutProperty=function(e,r,n,o){return this.overlayLayersManager[e]||this.style.getLayer(e)?this.setLayoutPropertyBySymbolBak(e,r,n,o):(t(this).setLayoutProperty(e,r,n,o),this._update(!0))}),w().Map.prototype.setSymbol=function(e,r){t(this).setSymbol(e,r)},w().Map.prototype.setStyleBak||(w().Map.prototype.setStyleBak=w().Map.prototype.setStyle,w().Map.prototype.setStyle=function(t,e){var r=this;return this.setStyleBak(t,e),this.style&&this.style.once("style.load",function(){t.layers.filter(function(t){return t.symbol}).forEach(function(t){r.setSymbol(t.id,t.symbol)})}),this}),w().Map.prototype.loadSymbol=(n=TL(kL().mark(function t(e,n){var o,i,a,s,u,l,c=this;return kL().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if("string"!=typeof e){t.next=9;break}return t.next=3,r(e,this);case 3:o=t.sent,i=null,o||(i="Symbol ".concat(e," is not exists")),n(i,o),t.next=21;break;case 9:if(!W.isArray(e)){t.next=20;break}return a=e.map(function(t){return r(t,c)}),t.next=13,Promise.all(a);case 13:s=t.sent,u=null,(l=e.filter(function(t,e){return!s[e]})).length>0&&(u="Symbol ".concat(l.join(",")," is not exists")),n(u,s),t.next=21;break;case 20:n({message:"Symbol id must be a string or string[]."});case 21:case"end":return t.stop()}},t,this)})),function(t,e){return n.apply(this,arguments)}),w().Map.prototype.addSymbol=function(e,r){t(this).addSymbol(e,r)},w().Map.prototype.getSymbol=function(e){return t(this).getSymbol(e)},w().Map.prototype.hasSymbol=function(t){return t?!!this.getSymbol(t):(this.fire("error",{error:new Error("Missing required symbol id")}),!1)},w().Map.prototype.removeSymbol=function(e){t(this).removeSymbol(e)},w().Map.prototype.updateSymbol=function(e,r){t(this).updateSymbol(e,r)},w().Map.prototype.setSymbolProperty=function(e,r,n,o){t(this).setSymbolProperty(e,r,n,o)},w().Map.prototype.getSymbolProperty=function(e,r,n){return t(this).getSymbolProperty(e,r,n)},w().Map.prototype.getStyle=function(){if(this.style)return t(this).getStyle()},w().Map.prototype.setFilter=function(e,r,n){return this.style.getLayer(e)?(this.style.setFilter(e,r,n),this._update(!0)):(t(this).setFilter(e,r,n),this._update(!0))},w().Map.prototype.getFilter=function(e){return this.style.getLayer(e)?this.style.getFilter(e):t(this).getFilter(e)},w().Map.prototype.setLayerZoomRange=function(e,r,n){return this.style.getLayer(e)?(this.style.setLayerZoomRange(e,r,n),this._update(!0)):(t(this).setLayerZoomRange(e,r,n),this._update(!0))},w().Map.prototype.setPaintProperty=function(e,r,n,o){return this.style.getLayer(e)?(this.style.setPaintProperty(e,r,n,o),this._update(!0)):(t(this).setPaintProperty(e,r,n,o),this._update(!0))},w().Map.prototype.getPaintProperty=function(e,r){return this.style.getLayer(e)?this.style.getPaintProperty(e,r):t(this).getPaintProperty(e,r)},w().Map.prototype.getLayoutProperty=function(e,r){return this.style.getLayer(e)?this.style.getLayoutProperty(e,r):t(this).getLayoutProperty(e,r)},void 0===w().Map.prototype.onBak&&(w().Map.prototype.onBak=w().Map.prototype.on,w().Map.prototype.on=function(e,r,n){var o=this;return void 0===n||this.style.getLayer(r)?this.onBak(e,r,n):(t(this).getLayerIds(r).forEach(function(t){return o.onBak(e,t,n)}),this)}),void 0===w().Map.prototype.onceBak&&(w().Map.prototype.onceBak=w().Map.prototype.once,w().Map.prototype.once=function(e,r,n){var o=this;return void 0===n||this.style.getLayer(r)?this.onceBak(e,r,n):(t(this).getLayerIds(r).forEach(function(t){return o.onceBak(e,t,n)}),this)}),void 0===w().Map.prototype.offBak&&(w().Map.prototype.offBak=w().Map.prototype.off,w().Map.prototype.off=function(e,r,n){var o=this;return void 0===n||this.style.getLayer(r)?this.offBak(e,r,n):(t(this).getLayerIds(r).forEach(function(t){return o.offBak(e,t,n)}),this)});var n};function ML(t){"@babel/helpers - typeof";return(ML="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function jL(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,IL(n.key),n)}}function IL(t){var e=function(t,e){if("object"!=ML(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=ML(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ML(e)?e:e+""}var NL=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.defaultBasePath="./resources/symbols"},(e=[{key:"init",value:function(t){w().Map.prototype.basePath=t&&t.basePath||this.defaultBasePath,AL()}}])&&jL(t.prototype,e),r&&jL(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function LL(t){"@babel/helpers - typeof";return(LL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function RL(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,DL(n.key),n)}}function DL(t){var e=function(t,e){if("object"!=LL(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=LL(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==LL(e)?e:e+""}var BL=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e.filters&&"string"==typeof e.filters&&(e.filters=e.filters.split(",")),this.address=null,this.fromIndex=null,this.toIndex=null,this.filters=null,this.prjCoordSys=null,this.maxReturn=null,W.extend(this,e)},(e=[{key:"destroy",value:function(){this.address=null,this.fromIndex=null,this.toIndex=null,this.filters=null,this.prjCoordSys=null,this.maxReturn=null}}])&&RL(t.prototype,e),r&&RL(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function FL(t){"@babel/helpers - typeof";return(FL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function GL(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,UL(n.key),n)}}function UL(t){var e=function(t,e){if("object"!=FL(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=FL(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==FL(e)?e:e+""}var zL=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e.filters&&(e.filters=e.filters.split(",")),this.x=null,this.y=null,this.fromIndex=null,this.toIndex=null,this.filters=null,this.prjCoordSys=null,this.maxReturn=null,this.geoDecodingRadius=null,W.extend(this,e)},(e=[{key:"destroy",value:function(){this.x=null,this.y=null,this.fromIndex=null,this.toIndex=null,this.filters=null,this.prjCoordSys=null,this.maxReturn=null,this.geoDecodingRadius=null}}])&&GL(t.prototype,e),r&&GL(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function VL(t){"@babel/helpers - typeof";return(VL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function HL(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,WL(n.key),n)}}function WL(t){var e=function(t,e){if("object"!=VL(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=VL(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==VL(e)?e:e+""}function qL(t,e,r){return e=XL(e),function(t,e){if(e&&("object"===VL(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],XL(t).constructor):e.apply(t,r))}function YL(){return(YL="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=XL(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function XL(t){return(XL=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function JL(t,e){return(JL=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var KL=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=qL(this,e,[t,r])).options=r||{},n.CLASS_NAME="SuperMap.AddressMatchService",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&JL(t,e)}(e,bv),r=e,(n=[{key:"destroy",value:function(){YL(XL(e.prototype),"destroy",this).call(this)}},{key:"code",value:function(t,e,r){if(e instanceof BL)return this.processAsync(t,e,r)}},{key:"decode",value:function(t,e,r){if(e instanceof zL)return this.processAsync(t,e,r)}},{key:"processAsync",value:function(t,e,r){return this.request({method:"GET",url:t,params:e,scope:this,success:r,failure:r})}},{key:"transformResult",value:function(t,e){return t.succeed&&delete t.succeed,{result:t,options:e}}}])&&HL(r.prototype,n),o&&HL(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function QL(t){"@babel/helpers - typeof";return(QL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ZL(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,$L(n.key),n)}}function $L(t){var e=function(t,e){if("object"!=QL(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=QL(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==QL(e)?e:e+""}function tR(t,e,r){return e=eR(e),function(t,e){if(e&&("object"===QL(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],eR(t).constructor):e.apply(t,r))}function eR(t){return(eR=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function rR(t,e){return(rR=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var nR=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=tR(this,e,[t,r]))._addressMatchService=new KL(t,r),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&rR(t,e)}(e,uv),r=e,(n=[{key:"code",value:function(t,e){return this._addressMatchService.code(W.urlPathAppend(this.url,"geocoding"),t,e)}},{key:"decode",value:function(t,e){return this._addressMatchService.decode(W.urlPathAppend(this.url,"geodecoding"),t,e)}}])&&ZL(r.prototype,n),o&&ZL(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function oR(t){"@babel/helpers - typeof";return(oR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function iR(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,aR(n.key),n)}}function aR(t){var e=function(t,e){if("object"!=oR(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=oR(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==oR(e)?e:e+""}var sR=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e&&(this.customParams=null,this.prjCoordSys=null,this.expectCount=1e5,this.networkType=Qr.LINE,this.queryOption=Zr.ATTRIBUTEANDGEOMETRY,this.queryParams=null,this.startRecord=0,this.holdTime=10,this.returnCustomResult=!1,this.returnFeatureWithFieldCaption=!1,W.extend(this,e),this.CLASS_NAME="SuperMap.QueryParameters")},(e=[{key:"destroy",value:function(){var t=this;if(t.customParams=null,t.expectCount=null,t.networkType=null,t.queryOption=null,t.queryParams){for(var e=0,r=t.queryParams,n=r.length;e<n;e++)r[e].destroy();t.queryParams=null}t.startRecord=null,t.holdTime=null,t.returnCustomResult=null,t.prjCoordSys=null}}])&&iR(t.prototype,e),r&&iR(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function uR(t){"@babel/helpers - typeof";return(uR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function lR(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,cR(n.key),n)}}function cR(t){var e=function(t,e){if("object"!=uR(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=uR(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==uR(e)?e:e+""}var fR=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.isQueryPoint=null,this.isQueryLine=null,this.isQueryRegion=null,this.attributeFilter=null,this.chartFeatureInfoSpecCode=null,W.extend(this,e),this.CLASS_NAME="SuperMap.ChartQueryFilterParameter"},(e=[{key:"destroy",value:function(){var t=this;t.isQueryPoint=null,t.isQueryLine=null,t.isQueryRegion=null,t.attributeFilter=null,t.chartFeatureInfoSpecCode=null}},{key:"toJson",value:function(){var t="";return t+='"isQueryPoint":'+this.isQueryPoint+",",t+='"isQueryLine":'+this.isQueryLine+",",t+='"isQueryRegion":'+this.isQueryRegion+",",this.attributeFilter&&(t+='"attributeFilter": "'+this.attributeFilter.replace(/"/g,"'")+'",'),t="{"+(t+='"chartFeatureInfoSpecCode":'+this.chartFeatureInfoSpecCode)+"}"}}])&&lR(t.prototype,e),r&&lR(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function hR(t){"@babel/helpers - typeof";return(hR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function pR(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,dR(n.key),n)}}function dR(t){var e=function(t,e){if("object"!=hR(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=hR(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==hR(e)?e:e+""}var yR=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.queryMode=null,this.bounds=null,this.chartLayerNames=null,this.chartQueryFilterParameters=null,this.returnContent=!0,this.startRecord=0,this.expectCount=null,W.extend(this,e),this.CLASS_NAME="SuperMap.ChartQueryParameters"},(e=[{key:"destroy",value:function(){var t=this;t.queryMode=null,t.bounds=null,t.chartLayerNames=null,t.chartQueryFilterParameters=null,t.returnContent=!0,t.startRecord=0,t.expectCount=null}},{key:"getVariablesJson",value:function(){var t="";if(t+='"queryMode":"'+this.queryMode+'",',this.chartLayerNames&&this.chartLayerNames.length){for(var e=[],r=this.chartLayerNames.length,n=0;n<r;n++)e.push('"'+this.chartLayerNames[n]+'"');t+='"chartLayerNames":'+("["+e.join(",")+"]")+","}if("ChartBoundsQuery"!==this.queryMode&&"ChartFeatureBoundsQuery"!==this.queryMode||!this.bounds||(t+='"bounds":{"leftBottom":{"x":'+this.bounds.left+',"y":'+this.bounds.bottom+'},"rightTop":{"x":'+this.bounds.right+',"y":'+this.bounds.top+"}},"),this.chartQueryFilterParameters&&this.chartQueryFilterParameters.length){for(var o=[],i=this.chartQueryFilterParameters.length,a=0;a<i;a++){var s=this.chartQueryFilterParameters[a];s instanceof fR&&o.push(s.toJson())}var u="["+o.join(",")+"]";u='"chartQueryParams":'+u+",",u+='"startRecord":'+this.startRecord+",",t+='"chartQueryParameters":'+(u="{"+(u+='"expectCount":'+this.expectCount)+"}")}return t="{"+t+"}"}}])&&pR(t.prototype,e),r&&pR(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}(),vR={AGENCY:"äº§åè´£ä»»æºæ",BCNSHP:"ç«æ å½¢ç¶",BUISHP:"å»ºç­å½¢ç¶",BOYSHP:"æµ®æ å½¢ç¶",BURDEP:"åç½®æ·±åº¦",CALSGN:"å¼å·",CATAIR:"æºåºç±»",CATACH:"éå°ç±»",CATBRG:"æ¡¥æ¢ç±»",CATBUA:"å»ºç­ç¾¤åºç±»",CATCBL:"çµç¼ç±»",CATCAN:"æ¸ éç±»",CATCAM:"æ¹ä½æ å¿ç±»",CATCHP:"æ£æ¥ç«ç±»",CATCOA:"æµ·å²¸çº¿ç±»",CATCTR:"æ§å¶ç¹ç±»",CATCON:"ä¼ éè£ç½®ç±»",CATCOV:"ä½ç¨èå´ç±»",CATCRN:"èµ·éæºç±»",CATDAM:"æ°´åç±»",CATDIS:"è·ç¦»æ å¿ç±»",CATDOC:"è¹åç±»",CATDPG:"å¾åºåºç±»",CATFNC:"æ æ ç±»",CATFRY:"è½®æ¸¡ç±»",CATFIF:"æé±¼è®¾å¤ç±»",CATFOG:"é¾å·ç±»",CATFOR:"é²å¾¡å·¥äºç±»",CATGAT:"é¨ç±»",CATHAF:"æ¸¯å£è®¾å¤ç±»",CATHLK:"è¶¸è¹ç±»",CATICE:"å°ç±»",CATINB:"ä½ä¸æµ®æ ç±»",CATLND:"å°é¢å°å¸¦ç±»",CATLMK:"éæ ç±»",CATLAM:"ä¾§é¢æ å¿ç±»",CATLIT:"ç¯æ ç±»",CATMFA:"æµ·æ°´å»æ®åºç±»",CATMPA:"åäºæ¼ä¹ åºç±»",CATMOR:"ç³»æ³ç»ç¼è®¾å¤ç±»",CATNAV:"å¯¼èªçº¿ç±»",CATOBS:"éç¢ç©ç±»",CATOFP:"æµ·ä¸å¹³å°ç±»",CATOLB:"æ²¹éç±»",CATPLE:"æ¨æ¡©ç±»",CATPIL:"å¼èªåç»è¹ç¹ç±»",CATPIP:"ç®¡éç±»",CATPRA:"çäº§åºåç±»",CATPYL:"å¡æ¶ç±»",CATQUA:"æ°æ®è´¨éç±»",CATRAS:"é·è¾¾ç«ç±»",CATRTB:"é·è¾¾åºç­å¨ç±»",CATROS:"æ çº¿çµå°ç±»",CATTRK:"æ¨èèªçº¿ç±»",CATRSC:"æå©ç«ç±»",CATREA:"éå¶åºç±»",CATROD:"éè·¯ç±»",CATRUN:"è·éç±»",CATSEA:"æµ·åºç±»",CATSLC:"å²¸çº¿å»ºç­ç©ç±»",CATSIT:"äº¤éä¿¡å·ç«ç±»",CATSIW:"åè­¦ä¿¡å·å°ç±»",CATSIL:"ç­ä»ãç½ç±»",CATSLO:"æå¡ç±»",CATSCF:"å°åè¹ç¨è®¾å¤ç±»",CATSPM:"ä¸ç¨æ å¿ç±»",CATTSS:"åééèªå¶ç±»",CATVEG:"æ¤è¢«ç±»",CATWAT:"ç´æµç±»",CATWED:"æµ·èãå·¨åæµ·è»ç±»",CATWRK:"æ²è¹ç±»",CATZOC:"æ°æ®ç½®ä¿¡åº¦åºç±»",SPACE_:"å­ç¬¦ç©ºæ ¼",CHARS_:"å­ç¬¦è¯´æ",COLOUR:"é¢è²",COLPAT:"å½©è²å¾æ¡",COMCHA:"éä¿¡é¢é",CSIZE_:"ç½ç»è±å°ºå¯¸",CPDATE:"æ±ç¼æ¥æ",CSCALE:"ç¼è¾æ¯ä¾å°º",CONDTN:"ç¶æ",CONRAD:"é·è¾¾å¯è§",CONVIS:"è§è§å¯è§",CURVEL:"æµ·æµéåº¦",DATEND:"ç»æ­¢æ¥æ",DATSTA:"å¼å§æ¥æ",DRVAL1:"æ·±åº¦èå´å¼1",DRVAL2:"æ·±åº¦èå´å¼2",DUNITS:"æ·±åº¦åä½",ELEVAT:"æµ·æ",ESTRNG:"é¢è®¡ä¼ è¾èå´",EXCLIT:"ç¯åæ¾ç¤ºç¶åµ",EXPSOU:"æ°´æ·±è¯´æ",FUNCTN:"åè½",HEIGHT:"é«åº¦",HUNITS:"é«åº¦ãé¿åº¦åä½",HORACC:"æ°´å¹³ç²¾åº¦",HORCLR:"æ°´å¹³åç©º",HORLEN:"æ°´å¹³é¿åº¦",HORWID:"æ°´å¹³å®½åº¦",ICEFAC:"å°åµç³»æ°",INFORM:"ä¿¡æ¯",JRSDTN:"ç®¡è¾åºå",JUSTH_:"æ°´å¹³å¯¹é½",JUSTV_:"åç´å¯¹é½",LIFCAP:"èµ·éè½å",LITCHR:"ç¯è´¨",LITVIS:"ç¯æ è½è§åº¦",MARSYS:"æµ·ä¸æ å¿ä½ç³»",MLTYLT:"ç¯ç»",NATION:"å½ç±",NATCON:"å»ºç­ç»ææ§è´¨",NATSUR:"è¡¨é¢æ§è´¨",NATQUA:"è¡¨é¢æ§è´¨éå®æ¯è¯­",NMDATE:"èªæµ·éåæ¥æ",OBJNAM:"ç©æ åç§°",ORIENT:"æ¹ä½",PEREND:"å®æç»æ­¢æ¥æ",PERSTA:"å®æå¼å§æ¥æ",PICREP:"å¾ç¤ºæ¾ç¤º",PILDST:"å¼èªåºå",PRCTRY:"çäº§å½å®¶",PRODCT:"äº§å",PUBREF:"åºçç©åè",QUASOU:"æ°´æ·±æµéç¹æ§",RADWAL:"é·è¾¾æ³¢é¿",RADIUS:"åå¾",RECDAT:"è®°å½æ¥æ",RECIND:"è®°å½è¡¨ç¤ºæ³",RYRMGV:"ç£å·®åèå¹´ä»½",RESTRN:"éå¶åº",SCAMAX:"æå¤§æ¯ä¾å°º",SCAMIN:"æå°æ¯ä¾å°º",SCVAL1:"æ¯ä¾å¼1",SCVAL2:"æ¯ä¾å¼2",SECTR1:"æå½¢çé1",SECTR2:"æå½¢çé2",SHIPAM:"åç§»åæ°",SIGFRQ:"ä¿¡å·é¢ç",SIGGEN:"ä¿¡å·çæ",SIGGRP:"ä¿¡å·ç»",SIGPER:"ä¿¡å·å¨æ",SIGSEQ:"ä¿¡å·æ¶åº",SOUACC:"æµæ·±ç²¾åº¦",SDISMX:"æå¤§æµæ·±é´è·",SDISMN:"æå°æµæ·±é´è·",SORDAT:"æ°æ®æ¥æºæ¥æ",SORIND:"æ°æ®æ¥æºè¡¨ç¤º",STATUS:"ç¶åµ",SURATH:"æµéæºæ",SUREND:"æµéç»ææ¥æ",SURSTA:"æµéå¼å§æ¥æ",SURTYP:"æµéç±»å",SCALE_:"ç¬¦å·ç¼©æ¾ç³»æ°",SCODE_:"ç¬¦å·ä»£ç ",TECSOU:"æ°´æ·±æµéææ¯",TXSTR_:"ææ¬ä¸²",TXTDSC:"æ­£ææè¿°",TS_TSP:"æ½®æµéåçå¼",TS_TSV:"æ½®æµæ¶åºå¼",T_ACWL:"æ½®æ±æ½®ä½ç²¾åº¦",T_HWLW:"æ½®æ±é«ä½æ½®å¼",T_MTOD:"æ½®æ±é¢æ¥æ¹æ³",T_THDF:"æ½®æ±æ½®æ¶ä¸æ½®é«å·®",T_TINT:"æ½®æ±æ¶é´é´éå¼",T_TSVL:"æ½®æ±æ¶åºå¼",T_VAHC:"æ½®æ±è°ååæ½®å¼",TIMEND:"ç»æ­¢æ¶é´",TIMSTA:"å¼å§æ¶é´",TINTS_:"è²è°",TOPSHP:"é¡¶æ ãæ¼æ å½¢ç¶",TRAFIC:"äº¤éæµ",VALACM:"ç£å·®å¹´åç",VALDCO:"ç­æ·±çº¿å¼",VALLMA:"å±é¨ç£åå¼å¸¸å¼",VALMAG:"ç£å·®å¼",VALMXR:"æå¤§ä½ç¨è·ç¦»",VALNMR:"æ å®ä½ç¨è·ç¦»",VALSOU:"æ°´æ·±å¼",VERACC:"åç´ç²¾åº¦",VERCLR:"ç«ååç©º",VERCCL:"å°é­ç«ååç©º",VERCOP:"å¼å¯ç«ååç©º",VERCSA:"å®å¨ç«ååç©º",VERDAT:"åç´åºåé¢",VERLEN:"åç´é«åº¦",WATLEV:"æ°´ä½æåº",CAT_TS:"æ½®æµç±»",PUNITS:"ä½ç½®ç²¾åº¦åä½",CLSDEF:"ç©æ å®ä¹",CLSNAM:"ç©æ åç§°",SYMINS:"ç©æ åç§°",NINFOM:"ç¨å½å®¶è¯­è¨è¡¨ç¤ºçä¿¡æ¯",NOBJNM:"ç¨å½å®¶è¯­è¨è¡¨ç¤ºçç©æ åç§°",NPLDST:"ç¨å½å®¶è¯­è¨è¡¨ç¤ºçå¼èªåº",NTXST_:"ç¨å½å®¶è¯­è¨è¡¨ç¤ºçææ¬ä¸²",NTXTDS:"ç¨å½å®¶è¯­è¨è¡¨ç¤ºçæ­£æ",HORDAT:"æ°´å¹³åºåé¢",POSACC:"ä½ç½®ç²¾åº¦",QUAPOS:"ä½ç½®æ§è´¨"};function gR(t){"@babel/helpers - typeof";return(gR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function mR(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,bR(n.key),n)}}function bR(t){var e=function(t,e){if("object"!=gR(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=gR(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==gR(e)?e:e+""}function wR(t,e,r){return e=xR(e),SR(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],xR(t).constructor):e.apply(t,r))}function SR(t,e){if(e&&("object"===gR(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function xR(t){return(xR=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _R(t,e){return(_R=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var ER=function(t){function e(t,r){var n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=wR(this,e,[t,r]),r=r||{},n.returnContent=null,n.format=Jr.GEOJSON,W.extend(n,r);var o=n;return r.format&&(o.format=r.format.toUpperCase()),o.url?(o.url=W.urlPathAppend(o.url,"queryResults"),n.CLASS_NAME="SuperMap.ChartQueryService",n):SR(n)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_R(t,e)}(e,bv),r=e,(n=[{key:"destroy",value:function(){bv.prototype.destroy.apply(this,arguments),this.returnContent=null,this.format=null}},{key:"processAsync",value:function(t,e){if(t instanceof yR){var r,n=this;return n.returnContent=t.returnContent,r=t.getVariablesJson(),n.returnContent&&(n.url=W.urlAppend(n.url,"returnContent=true")),n.request({method:"POST",data:r,scope:n,success:e,failure:e})}}},{key:"_tranformFeatureField",value:function(t,e){t.forEach(function(t){t.fieldNames.forEach(function(r,n){t.fieldNames[n]="function"==typeof e&&e(r)||vR[r]||r})})}},{key:"_transformFeatures",value:function(t,e,r){this._tranformFeatureField(t.features,e),r===Jr.GEOJSON&&(t.features=(new Kn).toGeoJSON(t.features))}},{key:"transformResult",value:function(t,e){var r=this,n=this;t=W.transformResult(t);var o=n.fieldNameFormatter;if(t&&t.recordsets)for(var i=0,a=t.recordsets,s=a.length;i<s;i++)a[i].features&&this._transformFeatures(a[i],o,n.format),a[i].chartRecordsets&&a[i].chartRecordsets.forEach(function(t){r._transformFeatures(t,o,n.format)});return{result:t,options:e}}},{key:"getQueryParameters",value:function(t){return new sR({queryMode:t.queryMode,bounds:t.bounds,chartLayerNames:t.chartLayerNames,chartQueryFilterParameters:t.chartQueryFilterParameters,returnContent:t.returnContent})}}])&&mR(r.prototype,n),o&&mR(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function OR(t){"@babel/helpers - typeof";return(OR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function PR(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,kR(n.key),n)}}function kR(t){var e=function(t,e){if("object"!=OR(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=OR(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==OR(e)?e:e+""}function CR(t,e,r){return e=AR(e),function(t,e){if(e&&("object"===OR(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],AR(t).constructor):e.apply(t,r))}function TR(){return(TR="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=AR(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function AR(t){return(AR=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function MR(t,e){return(MR=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var jR=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=CR(this,e,[t,r])).CLASS_NAME="SuperMap.ChartFeatureInfoSpecsService",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&MR(t,e)}(e,bv),r=e,(n=[{key:"destroy",value:function(){TR(AR(e.prototype),"destroy",this).call(this),W.reset(this)}},{key:"processAsync",value:function(t){return this.isTempLayers||W.urlPathAppend(this.url,"chartFeatureInfoSpecs"),this.request({method:"GET",params:null,scope:this,success:t,failure:t})}}])&&PR(r.prototype,n),o&&PR(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function IR(t){"@babel/helpers - typeof";return(IR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function NR(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,LR(n.key),n)}}function LR(t){var e=function(t,e){if("object"!=IR(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=IR(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==IR(e)?e:e+""}function RR(t,e,r){return e=BR(e),function(t,e){if(e&&("object"===IR(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],BR(t).constructor):e.apply(t,r))}function DR(){return(DR="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=BR(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function BR(t){return(BR=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function FR(t,e){return(FR=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var GR=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=RR(this,e,[t,r])).CLASS_NAME="SuperMap.ChartAcronymClassifyService",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&FR(t,e)}(e,bv),r=e,(n=[{key:"destroy",value:function(){DR(BR(e.prototype),"destroy",this).call(this),W.reset(this)}},{key:"processAsync",value:function(t){var e=this;return e.isTempLayers||(e.url=W.urlPathAppend(e.url,"chartAcronymClassify")),e.request({method:"GET",params:null,scope:e,success:t,failure:t})}}])&&NR(r.prototype,n),o&&NR(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function UR(t){"@babel/helpers - typeof";return(UR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function zR(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,VR(n.key),n)}}function VR(t){var e=function(t,e){if("object"!=UR(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=UR(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==UR(e)?e:e+""}var HR=function(){return t=function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.url=e,this.options=r||{}},(e=[{key:"queryChart",value:function(t,e,r){var n=this,o=t,i=n._processFormat(r);return new ER(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:i,fieldNameFormatter:n.options.fieldNameFormatter}).processAsync(o,e)}},{key:"getChartFeatureInfo",value:function(t){var e=this,r=W.urlPathAppend(e.url,"chartFeatureInfoSpecs");return new jR(r,{proxy:e.options.proxy,withCredentials:e.options.withCredentials,crossOrigin:e.options.crossOrigin,headers:e.options.headers}).processAsync(t)}},{key:"getChartAcronymClassify",value:function(t){var e=this;return new GR(e.url,{proxy:e.options.proxy,withCredentials:e.options.withCredentials,crossOrigin:e.options.crossOrigin,headers:e.options.headers}).processAsync(t)}},{key:"_processFormat",value:function(t){return t||Jr.GEOJSON}}])&&zR(t.prototype,e),r&&zR(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function WR(t){"@babel/helpers - typeof";return(WR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function qR(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,YR(n.key),n)}}function YR(t){var e=function(t,e){if("object"!=WR(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=WR(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==WR(e)?e:e+""}function XR(t,e,r){return e=JR(e),function(t,e){if(e&&("object"===WR(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],JR(t).constructor):e.apply(t,r))}function JR(t){return(JR=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function KR(t,e){return(KR=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var QR=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=XR(this,e,[t,r]))._chartService=new HR(t,r),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&KR(t,e)}(e,uv),r=e,(n=[{key:"queryChart",value:function(t,e,r){return t=this._processParams(t),this._chartService.queryChart(t,e,r)}},{key:"getChartFeatureInfo",value:function(t){return this._chartService.getChartFeatureInfo(t)}},{key:"getChartAcronymClassify",value:function(t){return this._chartService.getChartAcronymClassify(t)}},{key:"_processParams",value:function(t){return t?(t.returnContent=null==t.returnContent||t.returnContent,t.chartQueryFilterParameters&&!$n.isArray(t.chartQueryFilterParameters)&&(t.chartQueryFilterParameters=[t.chartQueryFilterParameters]),t.bounds&&(t.bounds=$n.toSuperMapBounds(t.bounds)),t):{}}},{key:"_processFormat",value:function(t){return t||Jr.GEOJSON}}])&&qR(r.prototype,n),o&&qR(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function ZR(t){"@babel/helpers - typeof";return(ZR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function $R(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,tD(n.key),n)}}function tD(t){var e=function(t,e){if("object"!=ZR(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=ZR(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ZR(e)?e:e+""}function eD(t,e,r){return e=rD(e),function(t,e){if(e&&("object"===ZR(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],rD(t).constructor):e.apply(t,r))}function rD(t){return(rD=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function nD(t,e){return(nD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var oD=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=r||{}).EVENT_TYPES=["broadcastSocketConnected","broadcastSocketClosed","broadcastSocketError","broadcastFailed","broadcastSucceeded","subscribeSocketConnected","subscribeSocketClosed","subscribeSocketError","messageSucceeded","setFilterParamSucceeded"],(n=eD(this,e,[t,r])).geometry=null,n.prjCoordSys=null,n.excludeField=null,W.extend(n,r),n.CLASS_NAME="SuperMap.DataFlowService",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&nD(t,e)}(e,bv),r=e,(n=[{key:"initBroadcast",value:function(){var t=this;return this.broadcastWebSocket=this._connect(W.urlPathAppend(t.url,"broadcast")),this.broadcastWebSocket.onopen=function(e){t.broadcastWebSocket.isOpen=!0,e.eventType="broadcastSocketConnected",t.events.triggerEvent("broadcastSocketConnected",e)},this.broadcastWebSocket.onclose=function(e){t.broadcastWebSocket&&(t.broadcastWebSocket.isOpen=!1),e.eventType="broadcastSocketClosed",t.events.triggerEvent("broadcastSocketClosed",e)},this.broadcastWebSocket.onerror=function(e){e.eventType="broadcastSocketError",t.events.triggerEvent("broadcastSocketError",e)},this}},{key:"broadcast",value:function(t){this.broadcastWebSocket&&this.broadcastWebSocket.isOpen?(this.broadcastWebSocket.send(JSON.stringify(t)),this.events.triggerEvent("broadcastSucceeded")):this.events.triggerEvent("broadcastFailed")}},{key:"initSubscribe",value:function(){var t=this;return this.subscribeWebSocket=this._connect(W.urlPathAppend(t.url,"subscribe")),this.subscribeWebSocket.onopen=function(e){t.subscribeWebSocket.send(t._getFilterParams()),e.eventType="subscribeSocketConnected",t.events.triggerEvent("subscribeSocketConnected",e)},this.subscribeWebSocket.onclose=function(e){e.eventType="subscribeWebSocketClosed",t.events.triggerEvent("subscribeWebSocketClosed",e)},this.subscribeWebSocket.onerror=function(e){e.eventType="subscribeSocketError",t.events.triggerEvent("subscribeSocketError",e)},this.subscribeWebSocket.onmessage=function(e){t._onMessage(e)},this}},{key:"setExcludeField",value:function(t){return this.excludeField=t,this.subscribeWebSocket.send(this._getFilterParams()),this}},{key:"setGeometry",value:function(t){return this.geometry=t,this.subscribeWebSocket.send(this._getFilterParams()),this}},{key:"unSubscribe",value:function(){this.subscribeWebSocket&&(this.subscribeWebSocket.close(),this.subscribeWebSocket=null)}},{key:"unBroadcast",value:function(){this.broadcastWebSocket&&(this.broadcastWebSocket.close(),this.broadcastWebSocket=null)}},{key:"destroy",value:function(){bv.prototype.destroy.apply(this,arguments);this.geometry=null,this.prjCoordSys=null,this.excludeField=null,this.unBroadcast(),this.unSubscribe()}},{key:"_getFilterParams",value:function(){var t={filterParam:{prjCoordSys:this.prjCoordSys,excludeField:this.excludeField,geometry:this.geometry}};return W.toJSON(t)}},{key:"_onMessage",value:function(t){if(t.data&&t.data.indexOf("filterParam")>=0){var e=JSON.parse(t.data);return t.filterParam=e,t.eventType="setFilterParamSucceeded",void this.events.triggerEvent("setFilterParamSucceeded",t)}var r=JSON.parse(t.data);t.featureResult=r,t.eventType="messageSucceeded",this.events.triggerEvent("messageSucceeded",t)}},{key:"_connect",value:function(t){return t=hv.appendCredential(t),"WebSocket"in window?new WebSocket(t):"MozWebSocket"in window?new(0,window.MozWebSocket)(t):(console.log("no WebSocket"),null)}}])&&$R(r.prototype,n),o&&$R(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function iD(t){"@babel/helpers - typeof";return(iD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function aD(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,sD(n.key),n)}}function sD(t){var e=function(t,e){if("object"!=iD(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=iD(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==iD(e)?e:e+""}function uD(t,e,r){return e=lD(e),function(t,e){if(e&&("object"===iD(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],lD(t).constructor):e.apply(t,r))}function lD(t){return(lD=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function cD(t,e){return(cD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var fD=function(t){function e(t,r){var n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=r||{}).projection&&(r.prjCoordSys=r.projection),(n=uD(this,e,[t,r])).dataFlow=new oD(t,r),n.dataFlow.events.on({broadcastSocketConnected:n._defaultEvent,broadcastSocketError:n._defaultEvent,broadcastFailed:n._defaultEvent,broadcastSucceeded:n._defaultEvent,subscribeSocketConnected:n._defaultEvent,subscribeSocketError:n._defaultEvent,messageSucceeded:n._defaultEvent,setFilterParamSucceeded:n._defaultEvent,scope:n});var o=n;return o.on("subscribeSocketConnected",function(t){o.fire("subscribesucceeded",t)}),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&cD(t,e)}(e,uv),r=e,(n=[{key:"initBroadcast",value:function(){return this.dataFlow.initBroadcast(),this}},{key:"broadcast",value:function(t){this.dataFlow.broadcast(t)}},{key:"initSubscribe",value:function(){return this.dataFlow.initSubscribe(),this}},{key:"setExcludeField",value:function(t){return this.dataFlow.setExcludeField(t),this.options.excludeField=t,this}},{key:"setGeometry",value:function(t){return this.dataFlow.setGeometry(t),this.options.geometry=t,this}},{key:"unSubscribe",value:function(){this.dataFlow.unSubscribe()}},{key:"unBroadcast",value:function(){this.dataFlow.unBroadcast()}},{key:"_defaultEvent",value:function(t){this.fire(t.eventType||t.type,t)}}])&&aD(r.prototype,n),o&&aD(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function hD(t){"@babel/helpers - typeof";return(hD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function pD(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,dD(n.key),n)}}function dD(t){var e=function(t,e){if("object"!=hD(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=hD(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==hD(e)?e:e+""}function yD(t,e,r){return e=mD(e),vD(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],mD(t).constructor):e.apply(t,r))}function vD(t,e){if(e&&("object"===hD(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function gD(){return(gD="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=mD(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function mD(t){return(mD=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function bD(t,e){return(bD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var wD=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=yD(this,e,[t,r]),r?(n.datasource=null,n.dataset=null,r&&W.extend(n,r),n.CLASS_NAME="SuperMap.DatasetService",n):vD(n)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&bD(t,e)}(e,bv),r=e,(n=[{key:"destroy",value:function(){gD(mD(e.prototype),"destroy",this).call(this);this.datasource=null,this.dataset=null}},{key:"getDatasetsService",value:function(t,e){var r=W.urlPathAppend(this.url,"datasources/name/".concat(t,"/datasets"));return this.processAsync(r,"GET",e)}},{key:"getDatasetService",value:function(t,e,r){var n=W.urlPathAppend(this.url,"datasources/name/".concat(t,"/datasets/name/").concat(e));return this.processAsync(n,"GET",r)}},{key:"setDatasetService",value:function(t,e){if(t){var r=W.urlPathAppend(this.url,"datasources/name/".concat(t.datasourceName,"/datasets/name/").concat(t.datasetName));return delete t.datasourceName,this.processAsync(r,"PUT",e,t)}}},{key:"deleteDatasetService",value:function(t,e,r){var n=W.urlPathAppend(this.url,"datasources/name/".concat(t,"/datasets/name/").concat(e));return this.processAsync(n,"DELETE",r)}},{key:"processAsync",value:function(t,e,r,n){var o={url:t,method:e,scope:this,success:r,failure:r};return n&&(o.data=W.toJSON(n)),this.request(o)}}])&&pD(r.prototype,n),o&&pD(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function SD(t){"@babel/helpers - typeof";return(SD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function xD(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,_D(n.key),n)}}function _D(t){var e=function(t,e){if("object"!=SD(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=SD(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==SD(e)?e:e+""}var ED=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e&&(this.datasourceName=null,this.datasetName=null,this.datasetType=null,e&&W.extend(this,e),this.CLASS_NAME="SuperMap.CreateDatasetParameters")},(e=[{key:"destroy",value:function(){this.datasourceName=null,this.datasetName=null,this.datasetType=null}}])&&xD(t.prototype,e),r&&xD(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function OD(t){"@babel/helpers - typeof";return(OD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function PD(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,kD(n.key),n)}}function kD(t){var e=function(t,e){if("object"!=OD(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=OD(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==OD(e)?e:e+""}var CD=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e&&(this.datasourceName=null,this.datasetName=null,this.isFileCache=null,this.description=null,this.prjCoordSys=null,this.charset=null,this.palette=null,this.noValue=null,e&&W.extend(this,e),this.CLASS_NAME="SuperMap.UpdateDatasetParameters")},(e=[{key:"destroy",value:function(){var t=this;t.datasourceName=null,t.datasetName=null,t.isFileCache=null,t.prjCoordSys=null,t.charset=null,t.palette=null,t.noValue=null}}])&&PD(t.prototype,e),r&&PD(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function TD(t){"@babel/helpers - typeof";return(TD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function AD(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,MD(n.key),n)}}function MD(t){var e=function(t,e){if("object"!=TD(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=TD(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==TD(e)?e:e+""}function jD(t,e,r){return e=ID(e),function(t,e){if(e&&("object"===TD(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],ID(t).constructor):e.apply(t,r))}function ID(t){return(ID=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ND(t,e){return(ND=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var LD=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=jD(this,e,[t,r]))._datasetService=new wD(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers}),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ND(t,e)}(e,uv),r=e,(n=[{key:"getDatasets",value:function(t,e){if(t)return this._datasetService.getDatasetsService(t,e)}},{key:"getDataset",value:function(t,e,r){if(t&&e)return this._datasetService.getDatasetService(t,e,r)}},{key:"setDataset",value:function(t,e){if(t instanceof ED||t instanceof CD){if(t instanceof ED)var r={datasetType:t.datasetType,datasetName:t.datasetName,datasourceName:t.datasourceName};else t instanceof CD&&(r={datasetName:t.datasetName,datasourceName:t.datasourceName,isFileCache:t.isFileCache,description:t.description,prjCoordSys:t.prjCoordSys,charset:t.charset});return this._datasetService.setDatasetService(r,e)}}},{key:"deleteDataset",value:function(t,e,r){return this._datasetService.deleteDatasetService(t,e,r)}}])&&AD(r.prototype,n),o&&AD(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function RD(t){"@babel/helpers - typeof";return(RD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function DD(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,BD(n.key),n)}}function BD(t){var e=function(t,e){if("object"!=RD(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=RD(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==RD(e)?e:e+""}var FD=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e&&(this.datasourceName=null,this.description=null,this.coordUnit=null,this.distanceUnit=null,e&&W.extend(this,e),this.CLASS_NAME="SuperMap.SetDatasourceParameters")},(e=[{key:"destroy",value:function(){this.datasourceName=null,this.description=null,this.coordUnit=null,this.distanceUnit=null}}])&&DD(t.prototype,e),r&&DD(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function GD(t){"@babel/helpers - typeof";return(GD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function UD(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,zD(n.key),n)}}function zD(t){var e=function(t,e){if("object"!=GD(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=GD(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==GD(e)?e:e+""}function VD(t,e,r){return e=WD(e),function(t,e){if(e&&("object"===GD(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],WD(t).constructor):e.apply(t,r))}function HD(){return(HD="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=WD(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function WD(t){return(WD=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function qD(t,e){return(qD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var YD=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=VD(this,e,[t,r]),r&&W.extend(n,r),n.CLASS_NAME="SuperMap.DatasourceService",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&qD(t,e)}(e,bv),r=e,(n=[{key:"destroy",value:function(){HD(WD(e.prototype),"destroy",this).call(this)}},{key:"getDatasourceService",value:function(t,e){var r=W.urlPathAppend(this.url,"datasources/name/".concat(t));return this.processAsync(r,"GET",e)}},{key:"getDatasourcesService",value:function(t){var e=W.urlPathAppend(this.url,"datasources");return this.processAsync(e,"GET",t)}},{key:"setDatasourceService",value:function(t,e){if(t){var r=W.urlPathAppend(this.url,"datasources/name/".concat(t.datasourceName));return this.processAsync(r,"PUT",e,t)}}},{key:"processAsync",value:function(t,e,r,n){var o={url:t,method:e,scope:this,success:r,failure:r};return n&&(o.data=W.toJSON(n)),this.request(o)}}])&&UD(r.prototype,n),o&&UD(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function XD(t){"@babel/helpers - typeof";return(XD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function JD(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,KD(n.key),n)}}function KD(t){var e=function(t,e){if("object"!=XD(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=XD(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==XD(e)?e:e+""}function QD(t,e,r){return e=ZD(e),function(t,e){if(e&&("object"===XD(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],ZD(t).constructor):e.apply(t,r))}function ZD(t){return(ZD=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function $D(t,e){return($D=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var tB=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=QD(this,e,[t,r]))._datasourceService=new YD(n.url,{proxy:n.proxy,withCredentials:n.withCredentials,crossOrigin:n.crossOrigin,headers:n.headers}),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&$D(t,e)}(e,uv),r=e,(n=[{key:"getDatasources",value:function(t){return this._datasourceService.getDatasourcesService(t)}},{key:"getDatasource",value:function(t,e){if(t)return this._datasourceService.getDatasourceService(t,e)}},{key:"setDatasource",value:function(t,e){if(t instanceof FD){var r={description:t.description,coordUnit:t.coordUnit,distanceUnit:t.distanceUnit,datasourceName:t.datasourceName};return this._datasourceService.setDatasourceService(r,e)}}}])&&JD(r.prototype,n),o&&JD(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function eB(t){"@babel/helpers - typeof";return(eB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function rB(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,nB(n.key),n)}}function nB(t){var e=function(t,e){if("object"!=eB(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=eB(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==eB(e)?e:e+""}var oB=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.dataSourceName=null,this.dataSetName=null,this.features=null,this.editType=wn.ADD,this.IDs=null,this.returnContent=!1,this.isUseBatch=!1,W.extend(this,e),this.CLASS_NAME="SuperMap.EditFeaturesParameters"},r=[{key:"toJsonParameters",value:function(t){var e,r,n;if(t.editType===wn.DELETE){if(null===t.IDs)return;n={ids:t.IDs}}else if(n=[],t.features){r=t.features.length;for(var o=0;o<r;o++)(e=t.features[o]).geometry=zn.fromGeometry(e.geometry),n.push(e)}return W.toJSON(n)}}],(e=[{key:"destroy",value:function(){var t=this;t.dataSourceName=null,t.dataSetName=null,t.features=null,t.editType=null,t.IDs=null,t.returnContent=null}}])&&rB(t.prototype,e),r&&rB(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function iB(t){"@babel/helpers - typeof";return(iB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function aB(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,sB(n.key),n)}}function sB(t){var e=function(t,e){if("object"!=iB(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=iB(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==iB(e)?e:e+""}function uB(t,e,r){return e=cB(e),function(t,e){if(e&&("object"===iB(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],cB(t).constructor):e.apply(t,r))}function lB(){return(lB="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=cB(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function cB(t){return(cB=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function fB(t,e){return(fB=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var hB=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=uB(this,e,[t,r])).returnContent=!1,n.isUseBatch=!1,r&&W.extend(n,r),n.url=W.urlPathAppend(n.url,"features"),n.CLASS_NAME="SuperMap.EditFeaturesService",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&fB(t,e)}(e,bv),r=e,(n=[{key:"destroy",value:function(){lB(cB(e.prototype),"destroy",this).call(this);this.returnContent=null,this.isUseBatch=null,this.fromIndex=null,this.toIndex=null}},{key:"processAsync",value:function(t,e){if(t instanceof oB){var r=this,n="POST",o="",i=t.editType,a=null;if(r.returnContent=t.returnContent,r.isUseBatch=t.isUseBatch,a=oB.toJsonParameters(t),i===wn.DELETE){a=o=W.toJSON(t.IDs);var s=W.urlAppend(r.url,W.getParameterString({ids:o}));tt.urlIsLong(s)?(r.url=W.urlAppend(r.url,W.getParameterString({_method:"DELETE"})),n="POST"):(r.url=s,n="DELETE")}else i===wn.UPDATE?n="PUT":(r.isUseBatch&&(r.url=W.urlAppend(r.url,"isUseBatch=".concat(r.isUseBatch)),r.returnContent=!1),r.returnContent&&(r.url=W.urlAppend(r.url,"returnContent=true"),n="POST"));return r.request({method:n,data:a,scope:r,success:e,failure:e})}}},{key:"getMetaData",value:function(t,e){var r=t.featureId;return this.url=W.urlPathAppend(this.url,r+"/metadata"),this.request({method:"GET",data:null,scope:this,success:e,failure:e})}}])&&aB(r.prototype,n),o&&aB(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function pB(t){"@babel/helpers - typeof";return(pB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function dB(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,yB(n.key),n)}}function yB(t){var e=function(t,e){if("object"!=pB(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=pB(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==pB(e)?e:e+""}function vB(t,e,r){return e=mB(e),function(t,e){if(e&&("object"===pB(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],mB(t).constructor):e.apply(t,r))}function gB(){return(gB="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=mB(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function mB(t){return(mB=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function bB(t,e){return(bB=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var wB=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=vB(this,e,[t,r]),r=r||{},n.returnContent=!0,n.returnFeaturesOnly=!1,n.fromIndex=0,n.toIndex=19,n.hasGeometry=!0,n.maxFeatures=null,n.format=Jr.GEOJSON,W.extend(n,r),n.url=W.urlPathAppend(n.url,"featureResults"),n.CLASS_NAME="SuperMap.GetFeaturesServiceBase",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&bB(t,e)}(e,bv),r=e,(n=[{key:"destroy",value:function(){gB(mB(e.prototype),"destroy",this).call(this);var t=this;t.returnContent=null,t.fromIndex=null,t.toIndex=null,t.maxFeatures=null,t.format=null,t.hasGeometry=null}},{key:"processAsync",value:function(t,e){if(t){var r,n=this,o=!0;return n.returnContent=t.returnContent,n.returnFeaturesOnly=t.returnFeaturesOnly,n.fromIndex=t.fromIndex,n.toIndex=t.toIndex,n.maxFeatures=t.maxFeatures,n.hasGeometry=t.hasGeometry,n.returnContent&&(o=!1),null!=n.fromIndex&&null!=n.toIndex&&!isNaN(n.fromIndex)&&!isNaN(n.toIndex)&&n.fromIndex>=0&&n.toIndex>=0&&!o&&(n.url=W.urlAppend(n.url,"fromIndex=".concat(n.fromIndex,"&toIndex=").concat(n.toIndex))),n.returnContent&&(t.returnCountOnly||t.returnDatasetInfoOnly||t.returnFeaturesOnly||console.warn("recommend set returnFeaturesOnly config to true to imporve performance. if need get Total amount and Dataset information. FeatureService provide getFeaturesCount and getFeaturesDatasetInfo method"),t.returnCountOnly&&(n.url=W.urlAppend(n.url,"returnCountOnly="+t.returnCountOnly)),t.returnDatasetInfoOnly&&(n.url=W.urlAppend(n.url,"returnDatasetInfoOnly="+t.returnDatasetInfoOnly)),t.returnFeaturesOnly&&(n.url=W.urlAppend(n.url,"returnFeaturesOnly="+t.returnFeaturesOnly))),r=n.getJsonParameters(t),n.request({method:"POST",data:r,scope:n,success:e,failure:e})}}},{key:"transformResult",value:function(t,e){t=W.transformResult(t);var r=new Kn;(this.format===Jr.GEOJSON&&t.features&&(t.features=r.toGeoJSON(t.features)),this.returnFeaturesOnly&&Array.isArray(t))&&(t={succeed:t.succeed,features:r.toGeoJSON(t)});return{result:t,options:e}}},{key:"dataFormat",value:function(){return[Jr.GEOJSON,Jr.ISERVER,Jr.FGB]}}])&&dB(r.prototype,n),o&&dB(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function SB(t){"@babel/helpers - typeof";return(SB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function xB(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,_B(n.key),n)}}function _B(t){var e=function(t,e){if("object"!=SB(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=SB(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==SB(e)?e:e+""}var EB=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.attributeFilter=null,this.name=null,this.joinItems=null,this.linkItems=null,this.ids=null,this.orderBy=null,this.groupBy=null,this.fields=null,e&&W.extend(this,e),this.CLASS_NAME="SuperMap.FilterParameter"},(e=[{key:"destroy",value:function(){var t=this;if(t.attributeFilter=null,t.name=null,t.joinItems){for(var e=0,r=t.joinItems,n=r.length;e<n;e++)r[e].destroy();t.joinItems=null}if(t.linkItems){for(var o=0,i=t.linkItems,a=i.length;o<a;o++)i[o].destroy();t.linkItems=null}t.ids=null,t.orderBy=null,t.groupBy=null,t.fields=null}}])&&xB(t.prototype,e),r&&xB(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function OB(t){"@babel/helpers - typeof";return(OB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function PB(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,kB(n.key),n)}}function kB(t){var e=function(t,e){if("object"!=OB(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=OB(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==OB(e)?e:e+""}var CB=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.datasetNames=null,this.targetEpsgCode=null,this.targetPrj=null,this.returnContent=!0,this.fromIndex=0,this.toIndex=19,this.returnFeaturesOnly=!1,this.maxFeatures=null,this.hasGeometry=!0,this.aggregations=null,W.extend(this,e),this.CLASS_NAME="SuperMap.GetFeaturesParametersBase"},(e=[{key:"destroy",value:function(){var t=this;t.datasetNames=null,t.returnContent=null,t.fromIndex=null,t.toIndex=null,t.hasGeometry=null,t.maxFeatures=null,t.targetEpsgCode=null,t.targetPrj=null,t.aggregation&&(t.aggregation=null)}}])&&PB(t.prototype,e),r&&PB(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function TB(t){"@babel/helpers - typeof";return(TB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function AB(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,MB(n.key),n)}}function MB(t){var e=function(t,e){if("object"!=TB(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=TB(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==TB(e)?e:e+""}function jB(t,e,r){return e=NB(e),function(t,e){if(e&&("object"===TB(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],NB(t).constructor):e.apply(t,r))}function IB(){return(IB="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=NB(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function NB(t){return(NB=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function LB(t,e){return(LB=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var RB=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=jB(this,e,[t])).getFeatureMode="ID",r.IDs=null,r.fields=null,W.extend(r,t),r.CLASS_NAME="SuperMap.GetFeaturesByIDsParameters",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&LB(t,e)}(e,CB),r=e,o=[{key:"toJsonParameters",value:function(t){var e,r;return e={datasetNames:t.datasetNames,getFeatureMode:"ID",ids:t.IDs},t.fields&&((r=new EB).name=t.datasetNames,r.fields=t.fields,e.queryParameter=r),t.targetEpsgCode&&(e.targetEpsgCode=t.targetEpsgCode),"boolean"==typeof t.hasGeometry&&(e.hasGeometry=t.hasGeometry),!t.targetEpsgCode&&t.targetPrj&&(e.targetPrj=t.targetPrj),t.aggregations&&(e.aggregations=t.aggregations),W.toJSON(e)}}],(n=[{key:"destroy",value:function(){IB(NB(e.prototype),"destroy",this).call(this);var t=this;if(t.IDs=null,t.getFeatureMode=null,t.fields){for(;t.fields.length>0;)t.fields.pop();t.fields=null}}}])&&AB(r.prototype,n),o&&AB(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function DB(t){"@babel/helpers - typeof";return(DB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function BB(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,FB(n.key),n)}}function FB(t){var e=function(t,e){if("object"!=DB(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=DB(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==DB(e)?e:e+""}function GB(t,e,r){return e=zB(e),function(t,e){if(e&&("object"===DB(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],zB(t).constructor):e.apply(t,r))}function UB(){return(UB="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=zB(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function zB(t){return(zB=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function VB(t,e){return(VB=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var HB=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=GB(this,e,[t,r])).CLASS_NAME="SuperMap.GetFeaturesByIDsService",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&VB(t,e)}(e,wB),r=e,(n=[{key:"destroy",value:function(){UB(zB(e.prototype),"destroy",this).call(this)}},{key:"getJsonParameters",value:function(t){return RB.toJsonParameters(t)}}])&&BB(r.prototype,n),o&&BB(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function WB(t){"@babel/helpers - typeof";return(WB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function qB(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,YB(n.key),n)}}function YB(t){var e=function(t,e){if("object"!=WB(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=WB(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==WB(e)?e:e+""}function XB(t,e,r){return e=KB(e),function(t,e){if(e&&("object"===WB(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],KB(t).constructor):e.apply(t,r))}function JB(){return(JB="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=KB(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function KB(t){return(KB=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function QB(t,e){return(QB=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var ZB=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=XB(this,e,[t])).getFeatureMode="SQL",r.queryParameter=null,W.extend(r,t),r.CLASS_NAME="SuperMap.GetFeaturesBySQLParameters",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&QB(t,e)}(e,CB),r=e,o=[{key:"toJsonParameters",value:function(t){var e={datasetNames:t.datasetNames,getFeatureMode:"SQL",queryParameter:t.queryParameter};return t.maxFeatures&&!isNaN(t.maxFeatures)&&(e.maxFeatures=t.maxFeatures),"boolean"==typeof t.hasGeometry&&(e.hasGeometry=t.hasGeometry),t.aggregations&&(e.aggregations=t.aggregations),t.targetEpsgCode&&(e.targetEpsgCode=t.targetEpsgCode),!t.targetEpsgCode&&t.targetPrj&&(e.targetPrj=t.targetPrj),t.aggregations&&(e.aggregations=t.aggregations),W.toJSON(e)}}],(n=[{key:"destroy",value:function(){JB(KB(e.prototype),"destroy",this).call(this);this.getFeatureMode=null,this.queryParameter&&(this.queryParameter.destroy(),this.queryParameter=null)}}])&&qB(r.prototype,n),o&&qB(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function $B(t){"@babel/helpers - typeof";return($B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function tF(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,eF(n.key),n)}}function eF(t){var e=function(t,e){if("object"!=$B(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=$B(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==$B(e)?e:e+""}function rF(t,e,r){return e=oF(e),function(t,e){if(e&&("object"===$B(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],oF(t).constructor):e.apply(t,r))}function nF(){return(nF="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=oF(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function oF(t){return(oF=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function iF(t,e){return(iF=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var aF=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=rF(this,e,[t,r])).CLASS_NAME="SuperMap.GetFeaturesBySQLService",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&iF(t,e)}(e,wB),r=e,(n=[{key:"destroy",value:function(){nF(oF(e.prototype),"destroy",this).call(this)}},{key:"getJsonParameters",value:function(t){return ZB.toJsonParameters(t)}}])&&tF(r.prototype,n),o&&tF(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function sF(t){"@babel/helpers - typeof";return(sF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function uF(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,lF(n.key),n)}}function lF(t){var e=function(t,e){if("object"!=sF(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=sF(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==sF(e)?e:e+""}function cF(t,e,r){return e=hF(e),function(t,e){if(e&&("object"===sF(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],hF(t).constructor):e.apply(t,r))}function fF(){return(fF="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=hF(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function hF(t){return(hF=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function pF(t,e){return(pF=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var dF=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=cF(this,e,[t])).getFeatureMode=e.getFeatureMode.BOUNDS,r.bounds=null,r.fields=null,r.attributeFilter=null,r.spatialQueryMode=$r.CONTAIN,W.extend(r,t),r.CLASS_NAME="SuperMap.GetFeaturesByBoundsParameters",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&pF(t,e)}(e,CB),r=e,o=[{key:"toJsonParameters",value:function(t){var r,n,o;return n={leftBottom:{x:t.bounds.left,y:t.bounds.bottom},rightTop:{x:t.bounds.right,y:t.bounds.top}},o={datasetNames:t.datasetNames,getFeatureMode:e.getFeatureMode.BOUNDS,bounds:n,spatialQueryMode:t.spatialQueryMode},t.fields&&((r=new EB).name=t.datasetNames,r.fields=t.fields,o.queryParameter=r),t.attributeFilter&&(o.attributeFilter=t.attributeFilter,o.getFeatureMode=e.getFeatureMode.BOUNDS_ATTRIBUTEFILTER),t.maxFeatures&&!isNaN(t.maxFeatures)&&(o.maxFeatures=t.maxFeatures),"boolean"==typeof t.hasGeometry&&(o.hasGeometry=t.hasGeometry),t.targetEpsgCode&&(o.targetEpsgCode=t.targetEpsgCode),!t.targetEpsgCode&&t.targetPrj&&(o.targetPrj=t.targetPrj),t.aggregations&&(o.aggregations=t.aggregations),W.toJSON(o)}}],(n=[{key:"destroy",value:function(){fF(hF(e.prototype),"destroy",this).call(this);var t=this;if(t.bounds&&(t.bounds.destroy(),t.bounds=null),t.fields){for(;t.fields.length>0;)t.fields.pop();t.fields=null}t.attributeFilter=null,t.spatialQueryMode=null,t.getFeatureMode=null}}])&&uF(r.prototype,n),o&&uF(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function yF(t){"@babel/helpers - typeof";return(yF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function vF(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,gF(n.key),n)}}function gF(t){var e=function(t,e){if("object"!=yF(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=yF(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==yF(e)?e:e+""}function mF(t,e,r){return e=wF(e),function(t,e){if(e&&("object"===yF(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],wF(t).constructor):e.apply(t,r))}function bF(){return(bF="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=wF(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function wF(t){return(wF=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function SF(t,e){return(SF=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}dF.getFeatureMode={BOUNDS:"BOUNDS",BOUNDS_ATTRIBUTEFILTER:"BOUNDS_ATTRIBUTEFILTER"};var xF=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=mF(this,e,[t,r])).CLASS_NAME="SuperMap.GetFeaturesByBoundsService",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&SF(t,e)}(e,wB),r=e,(n=[{key:"destroy",value:function(){bF(wF(e.prototype),"destroy",this).call(this)}},{key:"getJsonParameters",value:function(t){return dF.toJsonParameters(t)}}])&&vF(r.prototype,n),o&&vF(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function _F(t){"@babel/helpers - typeof";return(_F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function EF(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,OF(n.key),n)}}function OF(t){var e=function(t,e){if("object"!=_F(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=_F(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==_F(e)?e:e+""}function PF(t,e,r){return e=CF(e),function(t,e){if(e&&("object"===_F(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],CF(t).constructor):e.apply(t,r))}function kF(){return(kF="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=CF(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function CF(t){return(CF=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function TF(t,e){return(TF=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var AF=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=PF(this,e,[t])).bufferDistance=null,r.attributeFilter=null,r.geometry=null,r.fields=null,W.extend(r,t),r.CLASS_NAME="SuperMap.GetFeaturesByBufferParameters",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&TF(t,e)}(e,CB),r=e,o=[{key:"toJsonParameters",value:function(t){var e,r,n;return n=zn.fromGeometry(t.geometry),r={datasetNames:t.datasetNames,getFeatureMode:"BUFFER",bufferDistance:t.bufferDistance,geometry:n},t.fields&&((e=new EB).name=t.datasetNames,e.fields=t.fields,r.queryParameter=e),t.attributeFilter&&(r.attributeFilter=t.attributeFilter,r.getFeatureMode="BUFFER_ATTRIBUTEFILTER"),t.maxFeatures&&!isNaN(t.maxFeatures)&&(r.maxFeatures=t.maxFeatures),"boolean"==typeof t.hasGeometry&&(r.hasGeometry=t.hasGeometry),t.targetEpsgCode&&(r.targetEpsgCode=t.targetEpsgCode),!t.targetEpsgCode&&t.targetPrj&&(r.targetPrj=t.targetPrj),W.toJSON(r)}}],(n=[{key:"destroy",value:function(){kF(CF(e.prototype),"destroy",this).call(this);var t=this;if(t.bufferDistance=null,t.attributeFilter=null,t.fields){for(;t.fields.length>0;)t.fields.pop();t.fields=null}t.geometry&&(t.geometry.destroy(),t.geometry=null)}}])&&EF(r.prototype,n),o&&EF(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function MF(t){"@babel/helpers - typeof";return(MF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function jF(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,IF(n.key),n)}}function IF(t){var e=function(t,e){if("object"!=MF(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=MF(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==MF(e)?e:e+""}function NF(t,e,r){return e=RF(e),function(t,e){if(e&&("object"===MF(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],RF(t).constructor):e.apply(t,r))}function LF(){return(LF="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=RF(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function RF(t){return(RF=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function DF(t,e){return(DF=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var BF=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=NF(this,e,[t,r])).CLASS_NAME="SuperMap.GetFeaturesByBufferService",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&DF(t,e)}(e,wB),r=e,(n=[{key:"destroy",value:function(){LF(RF(e.prototype),"destroy",this).call(this)}},{key:"getJsonParameters",value:function(t){return AF.toJsonParameters(t)}}])&&jF(r.prototype,n),o&&jF(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function FF(t){"@babel/helpers - typeof";return(FF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function GF(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,UF(n.key),n)}}function UF(t){var e=function(t,e){if("object"!=FF(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=FF(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==FF(e)?e:e+""}function zF(t,e,r){return e=HF(e),function(t,e){if(e&&("object"===FF(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],HF(t).constructor):e.apply(t,r))}function VF(){return(VF="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=HF(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function HF(t){return(HF=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function WF(t,e){return(WF=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var qF=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=zF(this,e,[t])).getFeatureMode="SPATIAL",r.geometry=null,r.fields=null,r.attributeFilter=null,r.spatialQueryMode=$r.CONTAIN,W.extend(r,t),r.CLASS_NAME="SuperMap.GetFeaturesByGeometryParameters",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&WF(t,e)}(e,CB),r=e,o=[{key:"toJsonParameters",value:function(t){var e,r,n;return r=zn.fromGeometry(t.geometry),n={datasetNames:t.datasetNames,getFeatureMode:"SPATIAL",geometry:r,spatialQueryMode:t.spatialQueryMode},t.fields&&((e=new EB).name=t.datasetNames,e.fields=t.fields,n.queryParameter=e),t.attributeFilter&&(n.attributeFilter=t.attributeFilter,n.getFeatureMode="SPATIAL_ATTRIBUTEFILTER"),t.maxFeatures&&!isNaN(t.maxFeatures)&&(n.maxFeatures=t.maxFeatures),"boolean"==typeof t.hasGeometry&&(n.hasGeometry=t.hasGeometry),t.targetEpsgCode&&(n.targetEpsgCode=t.targetEpsgCode),!t.targetEpsgCode&&t.targetPrj&&(n.targetPrj=t.targetPrj),t.aggregations&&(n.aggregations=t.aggregations),W.toJSON(n)}}],(n=[{key:"destroy",value:function(){VF(HF(e.prototype),"destroy",this).call(this);var t=this;if(t.geometry&&(t.geometry.destroy(),t.geometry=null),t.fields){for(;t.fields.length>0;)t.fields.pop();t.fields=null}t.attributeFilter=null,t.spatialQueryMode=null,t.getFeatureMode=null}}])&&GF(r.prototype,n),o&&GF(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function YF(t){"@babel/helpers - typeof";return(YF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function XF(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,JF(n.key),n)}}function JF(t){var e=function(t,e){if("object"!=YF(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=YF(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==YF(e)?e:e+""}function KF(t,e,r){return e=ZF(e),function(t,e){if(e&&("object"===YF(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],ZF(t).constructor):e.apply(t,r))}function QF(){return(QF="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ZF(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function ZF(t){return(ZF=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function $F(t,e){return($F=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var tG=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=KF(this,e,[t,r])).CLASS_NAME="SuperMap.GetFeaturesByGeometryService",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&$F(t,e)}(e,wB),r=e,(n=[{key:"destroy",value:function(){QF(ZF(e.prototype),"destroy",this).call(this)}},{key:"getJsonParameters",value:function(t){return qF.toJsonParameters(t)}}])&&XF(r.prototype,n),o&&XF(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function eG(t){"@babel/helpers - typeof";return(eG="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function rG(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,nG(n.key),n)}}function nG(t){var e=function(t,e){if("object"!=eG(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=eG(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==eG(e)?e:e+""}var oG=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.dataSourceName=null,this.dataSetName=null,this.featureId=null,W.extend(this,e),this.CLASS_NAME="SuperMap.AttachmentsParameters"},(e=[{key:"destroy",value:function(){this.dataSourceName=null,this.dataSetName=null,this.featureId=null}}])&&rG(t.prototype,e),r&&rG(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function iG(t){"@babel/helpers - typeof";return(iG="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function aG(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,sG(n.key),n)}}function sG(t){var e=function(t,e){if("object"!=iG(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=iG(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==iG(e)?e:e+""}function uG(t,e,r){return e=lG(e),function(t,e){if(e&&("object"===iG(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],lG(t).constructor):e.apply(t,r))}function lG(t){return(lG=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function cG(t,e){return(cG=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var fG=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=uG(this,e,[t])).file=null,r.IDs=null,r.editType=wn.ADD,W.extend(r,t),r.CLASS_NAME="SuperMap.EditAttachmentsParameters",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&cG(t,e)}(e,oG),r=e,(n=[{key:"destroy",value:function(){var t=this;t.dataSourceName=null,t.dataSetName=null,t.featureId=null,t.file=null,t.IDs=null,t.editType=null}}])&&aG(r.prototype,n),o&&aG(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function hG(t){"@babel/helpers - typeof";return(hG="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function pG(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,dG(n.key),n)}}function dG(t){var e=function(t,e){if("object"!=hG(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=hG(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==hG(e)?e:e+""}function yG(t,e,r){return e=gG(e),function(t,e){if(e&&("object"===hG(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],gG(t).constructor):e.apply(t,r))}function vG(){return(vG="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=gG(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function gG(t){return(gG=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function mG(t,e){return(mG=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var bG=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=yG(this,e,[t,r]),r&&W.extend(n,r),n.CLASS_NAME="SuperMap.FeatureAttachmentsService",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&mG(t,e)}(e,bv),r=e,(n=[{key:"destroy",value:function(){vG(gG(e.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){if(t instanceof fG){W.extend(this,t);var r=this,n=t.editType;if(r.featureId=t.featureId,r.IDs=t.IDs,n===wn.DELETE){if(!r.IDs||Array.isArray(r.IDs)&&0===r.IDs.length)return;r.method="DELETE";for(var o=[],i=0;i<r.IDs.length;i++){var a=W.urlPathAppend(r.url,"/features/".concat(r.featureId,"/attachments/").concat(r.IDs[i])),s=r.request({url:a,method:r.method,data:null,scope:r,success:null,failure:null});o.push(s)}return Promise.all(o).then(function(t){return e&&e(t),t})}if(t.file&&(t.file instanceof File||t.file instanceof Blob)){var u=new FormData;return u.append("file",t.file),r.method="POST",r.url=W.urlPathAppend(r.url,"/features/".concat(r.featureId,"/attachments")),r.request({method:r.method,data:u,scope:r,success:e,failure:e})}}}},{key:"getAttachments",value:function(t,e){if(t instanceof oG){W.extend(this,t);var r=this;return r.method="GET",r.featureId=t.featureId,r.url=W.urlPathAppend(r.url,"/features/".concat(r.featureId,"/attachments")),r.request({method:r.method,data:null,scope:r,success:e,failure:e})}}}])&&pG(r.prototype,n),o&&pG(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function wG(t){"@babel/helpers - typeof";return(wG="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function SG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function xG(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?SG(Object(r),!0).forEach(function(e){_G(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):SG(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function _G(t,e,r){return(e=OG(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function EG(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,OG(n.key),n)}}function OG(t){var e=function(t,e){if("object"!=wG(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=wG(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==wG(e)?e:e+""}var PG={id:HB,sql:aF,bounds:xF,buffer:BF,geometry:tG},kG=function(){return t=function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.url=e,this.options=r||{}},(e=[{key:"getFeaturesByIDs",value:function(t,e,r){var n=this;return new HB(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:r}).processAsync(t,e)}},{key:"getFeaturesByBounds",value:function(t,e,r){var n=this;return new xF(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(t,e)}},{key:"getFeaturesByBuffer",value:function(t,e,r){var n=this;return new BF(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(t,e)}},{key:"getFeaturesBySQL",value:function(t,e,r){var n=this;return new aF(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(t,e)}},{key:"getFeaturesByGeometry",value:function(t,e,r){var n=this;return new tG(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(t,e)}},{key:"editFeatures",value:function(t,e){if(t&&t.dataSourceName&&t.dataSetName){var r=this,n=r.url,o=t.dataSourceName,i=t.dataSetName;return n=W.urlPathAppend(n,"datasources/"+o+"/datasets/"+i),new hB(n,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers}).processAsync(t,e)}}},{key:"getMetadata",value:function(t,e){var r=this,n=r.url,o=t.dataSourceName,i=t.dataSetName;return n=W.urlPathAppend(n,"datasources/"+o+"/datasets/"+i),new hB(n,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers}).getMetaData(t,e)}},{key:"getFeatureAttachments",value:function(t,e){if(t&&t.dataSourceName&&t.dataSetName&&null!=!t.featureId){var r=this,n=r.url,o=t.dataSourceName,i=t.dataSetName;return n=W.urlPathAppend(n,"datasources/"+o+"/datasets/"+i),new bG(n,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers}).getAttachments(t,e)}}},{key:"editFeatureAttachments",value:function(t,e){if(t&&t.dataSourceName&&t.dataSetName&&null!=!t.featureId&&t.editType){var r=this,n=r.url,o=t.dataSourceName,i=t.dataSetName;return n=W.urlPathAppend(n,"datasources/"+o+"/datasets/"+i),new bG(n,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers}).processAsync(t,e)}}},{key:"getFeaturesCount",value:function(t,e){var r=this,n=xG(xG({},t),{},{returnCountOnly:!0,returnContent:!0,returnFeaturesOnly:!1}),o=Object.keys(PG).find(function(t){return n.CLASS_NAME.toLowerCase().includes(t)});return new PG[o](r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers}).processAsync(n,e)}},{key:"getFeaturesDatasetInfo",value:function(t,e){var r=this,n=xG(xG({},t),{},{returnDatasetInfoOnly:!0,returnContent:!0,returnFeaturesOnly:!1}),o=Object.keys(PG).find(function(t){return n.CLASS_NAME.toLowerCase().includes(t)});return new PG[o](r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers}).processAsync(n,e)}},{key:"_processFormat",value:function(t){return t||Jr.GEOJSON}}])&&EG(t.prototype,e),r&&EG(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function CG(t){"@babel/helpers - typeof";return(CG="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function TG(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,AG(n.key),n)}}function AG(t){var e=function(t,e){if("object"!=CG(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=CG(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==CG(e)?e:e+""}function MG(t,e,r){return e=jG(e),function(t,e){if(e&&("object"===CG(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],jG(t).constructor):e.apply(t,r))}function jG(t){return(jG=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function IG(t,e){return(IG=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var NG=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=MG(this,e,[t,r]))._featureService=new kG(t,r),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&IG(t,e)}(e,uv),r=e,(n=[{key:"getFeaturesByIDs",value:function(t,e,r){return t=this._processParams(t),this._featureService.getFeaturesByIDs(t,e,r)}},{key:"getFeaturesByBounds",value:function(t,e,r){return t=this._processParams(t),this._featureService.getFeaturesByBounds(t,e,r)}},{key:"getFeaturesByBuffer",value:function(t,e,r){return t=this._processParams(t),this._featureService.getFeaturesByBuffer(t,e,r)}},{key:"getFeaturesBySQL",value:function(t,e,r){return t=this._processParams(t),this._featureService.getFeaturesBySQL(t,e,r)}},{key:"getFeaturesByGeometry",value:function(t,e,r){return t=this._processParams(t),this._featureService.getFeaturesByGeometry(t,e,r)}},{key:"editFeatures",value:function(t,e){if(t&&t.dataSourceName&&t.dataSetName){var r=this,n=r.url,o=t.dataSourceName,i=t.dataSetName;return n=W.urlPathAppend(n,"datasources/"+o+"/datasets/"+i),new hB(n,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers}).processAsync(r._processParams(t),e)}}},{key:"getMetadata",value:function(t,e){return this._featureService.getMetadata(t,e)}},{key:"getFeatureAttachments",value:function(t,e){return this._featureService.getFeatureAttachments(t,e)}},{key:"editFeatureAttachments",value:function(t,e){return this._featureService.editFeatureAttachments(t,e)}},{key:"getFeaturesCount",value:function(t,e){return t=this._processParams(t),this._featureService.getFeaturesCount(t,e)}},{key:"getFeaturesDatasetInfo",value:function(t,e){return t=this._processParams(t),this._featureService.getFeaturesDatasetInfo(t,e)}},{key:"_processParams",value:function(t){if(!t)return{};var e=this;if(t.returnContent=null==t.returnContent||t.returnContent,t.fromIndex=t.fromIndex?t.fromIndex:0,t.toIndex=0===t.toIndex?0:t.toIndex?t.toIndex:-1,t.bounds&&(t.bounds=$n.toSuperMapBounds(t.bounds)),t.editType&&(t.editType=t.editType.toLowerCase()),t.geometry&&(t.geometry instanceof w().LngLatBounds?(t.geometry=$n.toSuperMapPolygon(t.geometry),t.geometry.SRID=4326):t.geometry instanceof w().Point?t.geometry=new Xt(t.geometry.x,t.geometry.y):t.geometry instanceof w().LngLat?(t.geometry=new Xt(t.geometry.lng,t.geometry.lat),t.geometry.SRID=4326):t.geometry instanceof L||(t.geometry=$n.toSuperMapGeometry(t.geometry))),t.features){var r=[];$n.isArray(t.features)?t.features.map(function(t){return r.push(e._createServerFeature(t)),r}):r.push(e._createServerFeature(t.features)),t.features=r}return t}},{key:"_createServerFeature",value:function(t){if(t.toServerFeature)return t.toServerFeature({geometryFunction:function(t){return $n.toSuperMapGeometry(t)}});var e={},r=[],n=[],o=t.properties;for(var i in o)r.push(i),n.push(o[i]);return e.fieldNames=r,e.fieldValues=n,t.id&&(e.id=t.id),e.geometry=$n.toSuperMapGeometry(t),e}}])&&TG(r.prototype,n),o&&TG(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function LG(t){"@babel/helpers - typeof";return(LG="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function RG(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,DG(n.key),n)}}function DG(t){var e=function(t,e){if("object"!=LG(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=LG(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==LG(e)?e:e+""}function BG(t,e,r){return e=GG(e),function(t,e){if(e&&("object"===LG(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],GG(t).constructor):e.apply(t,r))}function FG(){return(FG="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=GG(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function GG(t){return(GG=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function UG(t,e){return(UG=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var zG=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=BG(this,e,[t,r])).datasource=null,n.dataset=null,r&&W.extend(n,r),n.CLASS_NAME="SuperMap.GetFieldsService",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&UG(t,e)}(e,bv),r=e,(n=[{key:"destroy",value:function(){FG(GG(e.prototype),"destroy",this).call(this);this.datasource=null,this.dataset=null}},{key:"processAsync",value:function(t){var e=this;return e.url=W.urlPathAppend(e.url,"datasources/".concat(e.datasource,"/datasets/").concat(e.dataset,"/fields")),e.request({method:"GET",data:null,scope:e,success:t,failure:t})}}])&&RG(r.prototype,n),o&&RG(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function VG(t){"@babel/helpers - typeof";return(VG="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function HG(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,WG(n.key),n)}}function WG(t){var e=function(t,e){if("object"!=VG(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=VG(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==VG(e)?e:e+""}var qG=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.datasource=null,this.dataset=null,e&&W.extend(this,e),this.CLASS_NAME="SuperMap.FieldParameters"},(e=[{key:"destroy",value:function(){this.datasource=null,this.dataset=null}}])&&HG(t.prototype,e),r&&HG(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function YG(t){"@babel/helpers - typeof";return(YG="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function XG(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,JG(n.key),n)}}function JG(t){var e=function(t,e){if("object"!=YG(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=YG(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==YG(e)?e:e+""}function KG(t,e,r){return e=QG(e),function(t,e){if(e&&("object"===YG(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],QG(t).constructor):e.apply(t,r))}function QG(t){return(QG=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ZG(t,e){return(ZG=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var $G=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=KG(this,e,[t])).fieldName=null,r.statisticMode=null,t&&W.extend(r,t),r.CLASS_NAME="SuperMap.FieldStatisticsParameters",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ZG(t,e)}(e,qG),r=e,(n=[{key:"destroy",value:function(){this.fieldName=null,this.statisticMode=null}}])&&XG(r.prototype,n),o&&XG(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function tU(t){"@babel/helpers - typeof";return(tU="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function eU(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,rU(n.key),n)}}function rU(t){var e=function(t,e){if("object"!=tU(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=tU(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==tU(e)?e:e+""}function nU(t,e,r){return e=iU(e),function(t,e){if(e&&("object"===tU(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],iU(t).constructor):e.apply(t,r))}function oU(){return(oU="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=iU(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function iU(t){return(iU=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function aU(t,e){return(aU=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var sU=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=nU(this,e,[t,r])).datasource=null,n.dataset=null,n.field=null,n.statisticMode=null,r&&W.extend(n,r),n.CLASS_NAME="SuperMap.FieldStatisticService",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&aU(t,e)}(e,bv),r=e,(n=[{key:"destroy",value:function(){oU(iU(e.prototype),"destroy",this).call(this);this.datasource=null,this.dataset=null,this.field=null,this.statisticMode=null}},{key:"processAsync",value:function(t){var e=this,r="datasources/"+e.datasource+"/datasets/"+e.dataset+"/fields/"+e.field+"/"+e.statisticMode;return e.url=W.urlPathAppend(e.url,r),e.request({method:"GET",data:null,scope:e,success:t,failure:t})}}])&&eU(r.prototype,n),o&&eU(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function uU(t){"@babel/helpers - typeof";return(uU="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function lU(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,cU(n.key),n)}}function cU(t){var e=function(t,e){if("object"!=uU(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=uU(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==uU(e)?e:e+""}var fU=function(){return t=function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.url=e,this.options=r||{}},(e=[{key:"getFields",value:function(t,e){var r=this;return new zG(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,datasource:t.datasource,dataset:t.dataset}).processAsync(e)}},{key:"getFieldStatisticsInfo",value:function(t,e){if(t instanceof $G){var r=this,n=t.fieldName,o=t.statisticMode;o&&!Array.isArray(o)&&(o=[o]),r.currentStatisticResult={fieldName:n},r._statisticsCallback=e,o.forEach(function(e){r.currentStatisticResult[e]=null,r._fieldStatisticRequest(t.datasource,t.dataset,n,e)})}}},{key:"_fieldStatisticRequest",value:function(t,e,r,n){var o=this;new sU(o.url,{datasource:t,dataset:e,field:r,statisticMode:n,crossOrigin:o.options.crossOrigin,headers:o.options.headers}).processAsync(o._processCompleted.bind(o))}},{key:"_processCompleted",value:function(t){var e=this;if(t.error)e._statisticsCallback(t);else{var r=!0,n=t.result;for(var o in this.currentStatisticResult&&null==e.currentStatisticResult[n.mode]&&(this.currentStatisticResult[n.mode]=n.result),e.currentStatisticResult)if(null==e.currentStatisticResult[o]){r=!1;break}r&&e._statisticsCallback({result:e.currentStatisticResult})}}}])&&lU(t.prototype,e),r&&lU(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function hU(t){"@babel/helpers - typeof";return(hU="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function pU(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,dU(n.key),n)}}function dU(t){var e=function(t,e){if("object"!=hU(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=hU(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==hU(e)?e:e+""}function yU(t,e,r){return e=vU(e),function(t,e){if(e&&("object"===hU(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],vU(t).constructor):e.apply(t,r))}function vU(t){return(vU=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function gU(t,e){return(gU=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var mU=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=yU(this,e,[t,r]))._fieldService=new fU(t,r),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&gU(t,e)}(e,uv),r=e,(n=[{key:"getFields",value:function(t,e){return this._fieldService.getFields(t,e)}},{key:"getFieldStatisticsInfo",value:function(t,e){return this._fieldService.getFieldStatisticsInfo(t,e)}}])&&pU(r.prototype,n),o&&pU(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function bU(t){"@babel/helpers - typeof";return(bU="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function wU(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,SU(n.key),n)}}function SU(t){var e=function(t,e){if("object"!=bU(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=bU(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==bU(e)?e:e+""}var xU=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.datasetName=null,this.dataSourceName=null,this.X=null,this.Y=null,this.bounds=null,W.extend(this,e),this.CLASS_NAME="SuperMap.GetGridCellInfosParameters"},(e=[{key:"destroy",value:function(){this.datasetName=null,this.dataSourceName=null,this.X=null,this.Y=null}}])&&wU(t.prototype,e),r&&wU(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function _U(t){"@babel/helpers - typeof";return(_U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function EU(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,OU(n.key),n)}}function OU(t){var e=function(t,e){if("object"!=_U(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=_U(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==_U(e)?e:e+""}function PU(t,e,r){return e=CU(e),function(t,e){if(e&&("object"===_U(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],CU(t).constructor):e.apply(t,r))}function kU(){return(kU="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=CU(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function CU(t){return(CU=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function TU(t,e){return(TU=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var AU=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=PU(this,e,[t,r])).datasetName=null,n.dataSourceName=null,n.datasetType=null,n.X=null,n.Y=null,r&&W.extend(n,r),n.CLASS_NAME="SuperMap.GetGridCellInfosService",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&TU(t,e)}(e,bv),r=e,(n=[{key:"destroy",value:function(){kU(CU(e.prototype),"destroy",this).call(this);var t=this;t.X=null,t.Y=null,t.datasetName=null,t.dataSourceName=null,t.datasetType=null}},{key:"processAsync",value:function(t,e){if(t instanceof xU){W.extend(this,t);var r=this;return r.url=W.urlPathAppend(r.url,"datasources/".concat(r.dataSourceName,"/datasets/").concat(r.datasetName)),r.request({method:"GET",data:null,scope:r,success:function(t){var n=t.result;e&&r.getDatasetInfoCompleted(n,e)},failure:e}).then(function(t){var e=t.result;return r.getDatasetInfoCompleted(e)})}}},{key:"getDatasetInfoCompleted",value:function(t,e){return t=W.transformResult(t),this.datasetType=t.datasetInfo.type,this.queryGridInfos(e)}},{key:"queryGridInfos",value:function(t){var e=this,r="GRID"===e.datasetType?"gridValue":"imageValue",n=e.bounds?r+"s":r,o=W.urlPathAppend(e.url,n),i="GET",a=null;return Array.isArray(e.bounds)?(i="POST",a=e.bounds):e.bounds?o=W.urlAppend(o,"bounds=".concat(encodeURIComponent(JSON.stringify(e.bounds)))):null!=e.X&&null!=e.Y&&(o=W.urlAppend(o,"x=".concat(e.X,"&y=").concat(e.Y))),e.request({url:o,method:i,data:a,scope:e,success:t,failure:t})}}])&&EU(r.prototype,n),o&&EU(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function MU(t){"@babel/helpers - typeof";return(MU="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function jU(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,IU(n.key),n)}}function IU(t){var e=function(t,e){if("object"!=MU(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=MU(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==MU(e)?e:e+""}function NU(t,e,r){return e=LU(e),function(t,e){if(e&&("object"===MU(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],LU(t).constructor):e.apply(t,r))}function LU(t){return(LU=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function RU(t,e){return(RU=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var DU=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=NU(this,e,[t,r]))._gridCellQueryService=new AU(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers}),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&RU(t,e)}(e,uv),r=e,(n=[{key:"getGridCellInfos",value:function(t,e){return t?this._gridCellQueryService.processAsync(t,e):null}}])&&jU(r.prototype,n),o&&jU(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function BU(t){"@babel/helpers - typeof";return(BU="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function FU(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,GU(n.key),n)}}function GU(t){var e=function(t,e){if("object"!=BU(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=BU(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==BU(e)?e:e+""}function UU(t,e,r){return e=zU(e),function(t,e){if(e&&("object"===BU(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],zU(t).constructor):e.apply(t,r))}function zU(t){return(zU=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function VU(t,e){return(VU=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var HU=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=UU(this,e,[t,r=r||{}])).CLASS_NAME="SuperMap.GeoprocessingService",n.headers={},n.crossOrigin=!0,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&VU(t,e)}(e,bv),r=e,(n=[{key:"getTools",value:function(t){return this._processAsync({url:"".concat(this.url,"/list"),callback:t})}},{key:"getTool",value:function(t,e){return this._processAsync({url:"".concat(this.url,"/").concat(t),callback:e})}},{key:"execute",value:function(t,e,r,n){var o={parameter:e=e||null,environment:r=r||null};return this._processAsync({url:"".concat(this.url,"/").concat(t,"/execute"),executeParamter:o,callback:n})}},{key:"submitJob",value:function(t,e,r,n){e=e||null,r=r||null;var o=JSON.stringify({parameter:e,environments:r});return this._processAsync({url:"".concat(this.url,"/").concat(t,"/jobs"),method:"POST",callback:n,params:o})}},{key:"waitForJobCompletion",value:function(t,e,r,n){var o=this,i=setInterval(function(){o._processAsync({url:"".concat(o.url,"/").concat(e,"/jobs/").concat(t),callback:function(t){var e=t.result.state.runState;t.options.statusCallback&&t.options.statusCallback(e),-1!==["FINISHED","FAILED","CANCELED"].indexOf(e)&&(clearInterval(i),n(t))}})},r.interval)}},{key:"getJobInfo",value:function(t,e,r){return this._processAsync({url:"".concat(this.url,"/").concat(t,"/jobs/").concat(e),callback:r})}},{key:"cancelJob",value:function(t,e,r){return this._processAsync({url:"".concat(this.url,"/").concat(t,"/jobs/").concat(e,"/cancel"),callback:r})}},{key:"getJobs",value:function(t,e){var r="".concat(this.url,"/jobs");t&&"string"==typeof t?r="".concat(this.url,"/").concat(t,"/jobs"):e=t,this._processAsync({url:r,callback:e})}},{key:"getResults",value:function(t,e,r,n){var o="".concat(this.url,"/").concat(t,"/jobs/").concat(e,"/results");return r&&("string"==typeof r?o="".concat(o,"/").concat(r):n=r),this._processAsync({url:o,callback:n})}},{key:"_processAsync",value:function(t){var e=t.url,r=t.method,n=t.callback,o=t.paramter;return this.request({url:e,method:r||"GET",params:o,headers:{"Content-type":"application/json"},scope:this,success:n,failure:n})}}])&&FU(r.prototype,n),o&&FU(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function WU(t){"@babel/helpers - typeof";return(WU="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function qU(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,YU(n.key),n)}}function YU(t){var e=function(t,e){if("object"!=WU(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=WU(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==WU(e)?e:e+""}function XU(t,e,r){return e=JU(e),function(t,e){if(e&&("object"===WU(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],JU(t).constructor):e.apply(t,r))}function JU(t){return(JU=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function KU(t,e){return(KU=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var QU=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=XU(this,e,[t,r])).headers={},n.crossOrigin=!0,n.withCredentials=!0,n.proxy=!0,n._geoprocessingJobsService=new HU(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers}),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&KU(t,e)}(e,uv),r=e,(n=[{key:"getTools",value:function(t){return this._geoprocessingJobsService.getTools(t)}},{key:"getTool",value:function(t,e){this._geoprocessingJobsService.getTool(t,e)}},{key:"execute",value:function(t,e,r,n){return this._geoprocessingJobsService.execute(t,e,r,n)}},{key:"submitJob",value:function(t,e,r,n){return this._geoprocessingJobsService.submitJob(t,e,r,n)}},{key:"waitForJobCompletion",value:function(t,e,r,n){return this._geoprocessingJobsService.waitForJobCompletion(t,e,r,n)}},{key:"getJobInfo",value:function(t,e,r){return this._geoprocessingJobsService.getJobInfo(t,e,r)}},{key:"cancelJob",value:function(t,e,r){return this._geoprocessingJobsService.cancelJob(t,e,r)}},{key:"getJobs",value:function(t,e){return this._geoprocessingJobsService.getJobs(t,e)}},{key:"getResults",value:function(t,e,r,n){return this._geoprocessingJobsService.getResults(t,e,r,n)}}])&&qU(r.prototype,n),o&&qU(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function ZU(t){"@babel/helpers - typeof";return(ZU="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function $U(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,tz(n.key),n)}}function tz(t){var e=function(t,e){if("object"!=ZU(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=ZU(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ZU(e)?e:e+""}var ez=function(){return t=function t(e,r){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),!e)return this;this.memoryData=null,this.type=e,r&&W.extend(this,r),this.CLASS_NAME="SuperMap.Theme"},(e=[{key:"destroy",value:function(){this.memoryData&&(this.memoryData.destroy(),this.memoryData=null),this.type=null}},{key:"toServerJSONObject",value:function(){}}])&&$U(t.prototype,e),r&&$U(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function rz(t){"@babel/helpers - typeof";return(rz="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function nz(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,oz(n.key),n)}}function oz(t){var e=function(t,e){if("object"!=rz(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=rz(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==rz(e)?e:e+""}var iz=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.align=cn.BASELINECENTER,this.backColor=new Ar(255,255,255),this.foreColor=new Ar(0,0,0),this.backOpaque=!1,this.sizeFixed=!0,this.fontHeight=6,this.fontWidth=0,this.fontWeight=400,this.fontName="Times New Roman",this.bold=!1,this.italic=!1,this.italicAngle=0,this.shadow=!1,this.strikeout=!1,this.outline=!1,this.opaqueRate=0,this.underline=!1,this.rotation=0,e&&W.extend(this,e),this.CLASS_NAME="SuperMap.ServerTextStyle"}return e=t,n=[{key:"fromObj",value:function(e){var r=new t(e);return W.copy(r,e),r.backColor=Ar.fromJson(e.backColor),r.foreColor=Ar.fromJson(e.foreColor),r}}],(r=[{key:"destroy",value:function(){var t=this;t.align=null,t.backColor&&(t.backColor.destroy(),t.backColor=null),t.foreColor&&(t.foreColor.destroy(),t.foreColor=null),t.backOpaque=null,t.sizeFixed=null,t.fontHeight=null,t.fontWidth=null,t.fontWeight=null,t.fontName=null,t.bold=null,t.italic=null,t.italicAngle=null,t.shadow=null,t.strikeout=null,t.outline=null,t.opaqueRate=null,t.underline=null,t.rotation=null}}])&&nz(e.prototype,r),n&&nz(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,r,n}();function az(t){"@babel/helpers - typeof";return(az="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function sz(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,uz(n.key),n)}}function uz(t){var e=function(t,e){if("object"!=az(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=az(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==az(e)?e:e+""}var lz=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.caption=null,this.end=0,this.start=0,this.visible=!0,this.style=new iz,e&&W.extend(this,e),this.CLASS_NAME="SuperMap.ThemeLabelItem"}return e=t,n=[{key:"fromObj",value:function(e){if(e){var r=new t;return W.copy(r,e),r}}}],(r=[{key:"destroy",value:function(){var t=this;t.caption=null,t.end=null,t.start=null,t.style&&(t.style.destroy(),t.style=null),t.visible=null}}])&&sz(e.prototype,r),n&&sz(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,r,n}();function cz(t){"@babel/helpers - typeof";return(cz="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function fz(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,hz(n.key),n)}}function hz(t){var e=function(t,e){if("object"!=cz(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=cz(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==cz(e)?e:e+""}var pz=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.caption=null,this.style=new Nr,this.unique=null,this.visible=!0,e&&W.extend(this,e),this.CLASS_NAME="SuperMap.ThemeUniqueItem"}return e=t,n=[{key:"fromObj",value:function(e){var r=new t;return W.copy(r,e),r.style=Nr.fromJson(e.style),r}}],(r=[{key:"destroy",value:function(){var t=this;t.caption=null,t.unique=null,t.style&&(t.style.destroy(),t.style=null),t.visible=null}},{key:"toServerJSONObject",value:function(){var t={};return(t=W.copyAttributes(t,this)).style&&t.style.toServerJSONObject&&(t.style=t.style.toServerJSONObject()),t}}])&&fz(e.prototype,r),n&&fz(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,r,n}();function dz(t){"@babel/helpers - typeof";return(dz="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function yz(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,vz(n.key),n)}}function vz(t){var e=function(t,e){if("object"!=dz(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=dz(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==dz(e)?e:e+""}var gz=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.offsetFixed=!1,this.offsetX="0.0",this.offsetY="0.0",e&&W.extend(this,e),this.CLASS_NAME="SuperMap.ThemeOffset"}return e=t,n=[{key:"fromObj",value:function(e){if(e){var r=new t;return W.copy(r,e),r}}}],(r=[{key:"destroy",value:function(){this.offsetFixed=null,this.offsetX=null,this.offsetY=null}}])&&yz(e.prototype,r),n&&yz(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,r,n}();function mz(t){"@babel/helpers - typeof";return(mz="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function bz(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,wz(n.key),n)}}function wz(t){var e=function(t,e){if("object"!=mz(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=mz(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==mz(e)?e:e+""}var Sz=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.defaultStyle=null,this.separator=null,this.separatorEnabled=!1,this.splitIndexes=null,this.styles=new iz,e&&W.extend(this,e),this.CLASS_NAME="SuperMap.LabelMixedTextStyle"}return e=t,n=[{key:"fromObj",value:function(e){if(e){var r=new t,n=e.styles;if(W.copy(r,e),r.defaultStyle=new iz(e.defaultStyle),n){r.styles=[];for(var o=0,i=n.length;o<i;o++)r.styles.push(new iz(n[o]))}return r}}}],(r=[{key:"destroy",value:function(){var t=this;if(t.defaultStyle&&(t.defaultStyle.destroy(),t.defaultStyle=null),t.separator=null,t.separatorEnabled=null,t.splitIndexes&&(t.splitIndexes=null),t.styles){for(var e=0,r=t.styles,n=r.length;e<n;e++)r[e].destroy();t.styles=null}}}])&&bz(e.prototype,r),n&&bz(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,r,n}();function xz(t){"@babel/helpers - typeof";return(xz="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _z(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ez(n.key),n)}}function Ez(t){var e=function(t,e){if("object"!=xz(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=xz(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==xz(e)?e:e+""}var Oz=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.maxTextHeight=0,this.maxTextWidth=0,this.minTextHeight=0,this.minTextWidth=0,this.uniformStyle=new iz,this.uniformMixedStyle=null,e&&W.extend(this,e),this.CLASS_NAME="SuperMap.ThemeLabelText"}return e=t,n=[{key:"fromObj",value:function(e){if(e){var r=new t;return W.copy(r,e),r.uniformStyle=iz.fromObj(e.uniformStyle),r.uniformMixedStyle=Sz.fromObj(e.uniformMixedStyle),r}}}],(r=[{key:"destroy",value:function(){var t=this;t.maxTextHeight=null,t.maxTextWidth=null,t.minTextHeight=null,t.minTextWidth=null,t.uniformStyle&&(t.uniformStyle.destroy(),t.uniformStyle=null),t.uniformMixedStyle&&(t.uniformMixedStyle.destroy(),t.uniformMixedStyle=null)}}])&&_z(e.prototype,r),n&&_z(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,r,n}();function Pz(t){"@babel/helpers - typeof";return(Pz="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function kz(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Cz(n.key),n)}}function Cz(t){var e=function(t,e){if("object"!=Pz(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Pz(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Pz(e)?e:e+""}var Tz=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.isAlongLine=!0,this.alongLineDirection=fn.LB_TO_RT,this.angleFixed=!1,this.repeatedLabelAvoided=!1,this.repeatIntervalFixed=!1,this.labelRepeatInterval=0,e&&W.extend(this,e),this.CLASS_NAME="SuperMap.ThemeLabelAlongLine"}return e=t,n=[{key:"fromObj",value:function(e){if(e){var r=new t;return W.copy(r,e),r}}}],(r=[{key:"destroy",value:function(){var t=this;t.isAlongLine=null,t.alongLineDirection=null,t.angleFixed=null,t.repeatedLabelAvoided=null,t.repeatIntervalFixed=null,t.labelRepeatInterval=null}}])&&kz(e.prototype,r),n&&kz(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,r,n}();function Az(t){"@babel/helpers - typeof";return(Az="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Mz(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,jz(n.key),n)}}function jz(t){var e=function(t,e){if("object"!=Az(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Az(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Az(e)?e:e+""}var Iz=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.labelBackShape=hn.NONE,this.backStyle=new Nr,e&&W.extend(this,e),this.CLASS_NAME="SuperMap.ThemeLabelBackground"}return e=t,n=[{key:"fromObj",value:function(e){if(e){var r=new t;return r.labelBackShape=e.labelBackShape,r.backStyle=Nr.fromJson(e.backStyle),r}}}],(r=[{key:"destroy",value:function(){this.labelBackShape=null,this.backStyle&&(this.backStyle.destroy(),this.backStyle=null)}}])&&Mz(e.prototype,r),n&&Mz(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,r,n}();function Nz(t){"@babel/helpers - typeof";return(Nz="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Lz(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Rz(n.key),n)}}function Rz(t){var e=function(t,e){if("object"!=Nz(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Nz(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Nz(e)?e:e+""}function Dz(t,e,r){return e=Fz(e),function(t,e){if(e&&("object"===Nz(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Fz(t).constructor):e.apply(t,r))}function Bz(){return(Bz="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Fz(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Fz(t){return(Fz=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Gz(t,e){return(Gz=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Uz=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=Dz(this,e,["LABEL",t])).alongLine=new Tz,r.background=new Iz,r.items=null,r.uniqueItems=null,r.labelExpression=null,r.labelOverLengthMode=pn.NONE,r.matrixCells=null,r.maxLabelLength=256,r.numericPrecision=0,r.offset=new gz,r.overlapAvoided=!0,r.rangeExpression=null,r.uniqueExpression=null,r.smallGeometryLabeled=!1,r.text=new Oz,r.textSpace=0,t&&W.extend(r,t),r.CLASS_NAME="SuperMap.ThemeLabel",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Gz(t,e)}(e,ez),r=e,o=[{key:"fromObj",value:function(t){if(t){var r=new e,n=t.items,o=t.uniqueItems,i=t.matrixCells;if(t.matrixCells=null,W.copy(r,t),r.alongLine=Tz.fromObj(t),r.background=Iz.fromObj(t),n){r.items=[];for(var a=0,s=n.length;a<s;a++)r.items.push(lz.fromObj(n[a]))}if(o){r.uniqueItems=[];for(var u=0,l=o.length;u<l;u++)r.uniqueItems.push(pz.fromObj(o[u]))}if(i){r.matrixCells=[];for(var c=0,f=i.length;c<f;c++);}return r.offset=gz.fromObj(t),r.text=Oz.fromObj(t),r}}}],(n=[{key:"destroy",value:function(){Bz(Fz(e.prototype),"destroy",this).call(this);var t=this;if(t.alongLine=null,t.background&&(t.background.destroy(),t.background=null),t.items){for(var r=0,n=t.items,o=n.length;r<o;r++)n[r].destroy();t.items=null}if(t.uniqueItems){for(var i=0,a=t.uniqueItems,s=a.length;i<s;i++)a[i].destory();t.uniqueItems=null}t.labelExpression=null,t.labelOverLengthMode=null,t.matrixCells=null,t.maxLabelLength=null,t.numericPrecision=null,t.overlapAvoided=null,t.rangeExpression=null,t.uniqueExpression=null,t.offset&&(t.offset.destroy(),t.offset=null),t.overlapAvoided=null,t.smallGeometryLabeled=null,t.text&&(t.text.destroy(),t.text=null),t.textSpace=null}},{key:"toJSON",value:function(){return W.toJSON(this.toServerJSONObject())}},{key:"toServerJSONObject",value:function(){var t={};return t.type=this.type,t.memoryData=this.memoryData,this.alongLine&&(t.alongLine=this.alongLine.isAlongLine,t.alongLineDirection=this.alongLine.alongLineDirection,t.angleFixed=this.alongLine.angleFixed,t.isLabelRepeated=this.alongLine.isLabelRepeated,t.labelRepeatInterval=this.alongLine.labelRepeatInterval,t.repeatedLabelAvoided=this.alongLine.repeatedLabelAvoided,t.repeatIntervalFixed=this.alongLine.repeatIntervalFixed),this.offset&&(t.offsetFixed=this.offset.offsetFixed,t.offsetX=this.offset.offsetX,t.offsetY=this.offset.offsetY),this.text&&(t.maxTextHeight=this.text.maxTextHeight,t.maxTextWidth=this.text.maxTextWidth,t.minTextHeight=this.text.minTextHeight,t.minTextWidth=this.text.minTextWidth,t.uniformStyle=this.text.uniformStyle,t.uniformMixedStyle=this.text.uniformMixedStyle),this.background&&(t.labelBackShape=this.background.labelBackShape,t.backStyle=this.background.backStyle),t.labelOverLengthMode=this.labelOverLengthMode,t.maxLabelLength=this.maxLabelLength,t.smallGeometryLabeled=this.smallGeometryLabeled,t.rangeExpression=this.rangeExpression,t.uniqueExpression=this.uniqueExpression,t.numericPrecision=this.numericPrecision,t.items=this.items,t.uniqueItems=this.uniqueItems,t.labelExpression=this.labelExpression,t.overlapAvoided=this.overlapAvoided,t.matrixCells=this.matrixCells,t.textSpace=this.textSpace,t}}])&&Lz(r.prototype,n),o&&Lz(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function zz(t){"@babel/helpers - typeof";return(zz="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Vz(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Hz(n.key),n)}}function Hz(t){var e=function(t,e){if("object"!=zz(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=zz(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==zz(e)?e:e+""}function Wz(t,e,r){return e=Yz(e),function(t,e){if(e&&("object"===zz(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Yz(t).constructor):e.apply(t,r))}function qz(){return(qz="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Yz(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Yz(t){return(Yz=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Xz(t,e){return(Xz=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Jz=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=Wz(this,e,["UNIQUE",t])).defaultStyle=new Nr,r.items=null,r.uniqueExpression=null,r.colorGradientType=ln.YELLOW_RED,t&&W.extend(r,t),r.CLASS_NAME="SuperMap.ThemeUnique",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Xz(t,e)}(e,ez),r=e,o=[{key:"fromObj",value:function(t){var r=new e,n=t.items,o=n?n.length:0;W.extend(r,t),r.items=[],r.defaultStyle=Nr.fromJson(t.defaultStyle);for(var i=0;i<o;i++)r.items.push(pz.fromObj(n[i]));return r}}],(n=[{key:"destroy",value:function(){qz(Yz(e.prototype),"destroy",this).call(this);var t=this;if(t.uniqueExpression=null,t.colorGradientType=null,t.items){if(t.items.length>0)for(var r in t.items)t.items[r].destroy(),t.items[r]=null;t.items=null}t.defaultStyle&&(t.defaultStyle.destroy(),t.defaultStyle=null)}},{key:"toServerJSONObject",value:function(){var t={};if((t=W.copyAttributes(t,this)).defaultStyle&&t.defaultStyle.toServerJSONObject&&(t.defaultStyle=t.defaultStyle.toServerJSONObject()),t.items){for(var e=[],r=t.items.length,n=0;n<r;n++)e.push(t.items[n].toServerJSONObject());t.items=e}return t}}])&&Vz(r.prototype,n),o&&Vz(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function Kz(t){"@babel/helpers - typeof";return(Kz="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Qz(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Zz(n.key),n)}}function Zz(t){var e=function(t,e){if("object"!=Kz(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Kz(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Kz(e)?e:e+""}var $z=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.axesColor=new Ar(0,0,0),this.axesDisplayed=!1,this.axesGridDisplayed=!1,this.axesTextDisplayed=!1,this.axesTextStyle=new iz,e&&W.extend(this,e),this.CLASS_NAME="SuperMap.ThemeGraphAxes"}return e=t,n=[{key:"fromObj",value:function(e){if(e){var r=new t;return W.copy(r,e),r.axesColor=Ar.fromJson(e.axesColor),r.axesTextStyle=iz.fromObj(e.axesTextStyle),r}}}],(r=[{key:"destroy",value:function(){var t=this;t.axesColor&&(t.axesColor.destroy(),t.axesColor=null),t.axesDisplayed=null,t.axesGridDisplayed=null,t.axesTextDisplayed=null,t.axesTextStyle&&(t.axesTextStyle.destroy(),t.axesTextStyle=null)}}])&&Qz(e.prototype,r),n&&Qz(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,r,n}();function tV(t){"@babel/helpers - typeof";return(tV="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function eV(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,rV(n.key),n)}}function rV(t){var e=function(t,e){if("object"!=tV(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=tV(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==tV(e)?e:e+""}var nV=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.maxGraphSize=0,this.minGraphSize=0,e&&W.extend(this,e),this.CLASS_NAME="SuperMap.ThemeGraphSize"}return e=t,n=[{key:"fromObj",value:function(e){var r=new t;return W.copy(r,e),r}}],(r=[{key:"destroy",value:function(){this.maxGraphSize=null,this.minGraphSize=null}}])&&eV(e.prototype,r),n&&eV(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,r,n}();function oV(t){"@babel/helpers - typeof";return(oV="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function iV(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,aV(n.key),n)}}function aV(t){var e=function(t,e){if("object"!=oV(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=oV(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==oV(e)?e:e+""}var sV=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.graphTextDisplayed=!1,this.graphTextFormat=nn.CAPTION,this.graphTextStyle=new iz,e&&W.extend(this,e),this.CLASS_NAME="SuperMap.ThemeGraphText"}return e=t,n=[{key:"fromObj",value:function(e){var r=new t;return W.copy(r,e),r.graphTextStyle=iz.fromObj(e.graphTextStyle),r}}],(r=[{key:"destroy",value:function(){var t=this;t.graphTextDisplayed=null,t.graphTextFormat=null,t.graphTextStyle&&(t.graphTextStyle.destroy(),t.graphTextStyle=null)}}])&&iV(e.prototype,r),n&&iV(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,r,n}();function uV(t){"@babel/helpers - typeof";return(uV="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function lV(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,cV(n.key),n)}}function cV(t){var e=function(t,e){if("object"!=uV(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=uV(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==uV(e)?e:e+""}var fV=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.caption=null,this.graphExpression=null,this.memoryDoubleValues=null,this.uniformStyle=new Nr,e&&W.extend(this,e),this.CLASS_NAME="SuperMap.ThemeGraphItem"}return e=t,n=[{key:"fromObj",value:function(e){if(e){var r=new t;return W.copy(r,e),r.uniformStyle=Nr.fromJson(e.uniformStyle),r}}}],(r=[{key:"destroy",value:function(){this.caption=null,this.graphExpression=null,this.memoryDoubleValues=null,this.uniformStyle=null}}])&&lV(e.prototype,r),n&&lV(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,r,n}();function hV(t){"@babel/helpers - typeof";return(hV="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function pV(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,dV(n.key),n)}}function dV(t){var e=function(t,e){if("object"!=hV(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=hV(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==hV(e)?e:e+""}function yV(t,e,r){return e=gV(e),function(t,e){if(e&&("object"===hV(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],gV(t).constructor):e.apply(t,r))}function vV(){return(vV="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=gV(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function gV(t){return(gV=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function mV(t,e){return(mV=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var bV=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=yV(this,e,["GRAPH",t])).barWidth=0,r.graduatedMode=sn.CONSTANT,r.graphAxes=new $z,r.graphSize=new nV,r.graphSizeFixed=!1,r.graphText=new sV,r.graphType=on.AREA,r.graphAxesTextDisplayMode=an.NONE,r.items=null,r.memoryKeys=null,r.negativeDisplayed=!1,r.offset=new gz,r.overlapAvoided=!0,r.roseAngle=0,r.startAngle=0,t&&W.extend(r,t),r.CLASS_NAME="SuperMap.ThemeGraph",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&mV(t,e)}(e,ez),r=e,o=[{key:"fromObj",value:function(t){var r=new e,n=t.items,o=n?n.length:0;W.copy(r,t),r.items=[],r.graphAxes=$z.fromObj(t),r.graphSize=nV.fromObj(t),r.graphText=sV.fromObj(t),r.offset=gz.fromObj(t);for(var i=0;i<o;i++)r.items.push(fV.fromObj(n[i]));return r}}],(n=[{key:"destroy",value:function(){vV(gV(e.prototype),"destroy",this).call(this);var t=this;if(t.barWidth=null,t.graduatedMode=null,t.graphAxes&&(t.graphAxes.destroy(),t.graphAxes=null),t.graphSize&&(t.graphSize.destroy(),t.graphSize=null),t.graphSizeFixed=null,t.graphText&&(t.graphText.destroy(),t.graphText=null),t.graphType=null,t.items){for(var r=0,n=t.items,o=n.length;r<o;r++)n[r].destroy();t.items=null}t.memoryKeys=null,t.negativeDisplayed=null,t.offset&&(t.offset.destroy(),t.offset=null),t.overlapAvoided=null,t.roseAngle=null,t.startAngle=null,t.graphAxesTextDisplayMode=null}},{key:"toJSON",value:function(){return W.toJSON(this.toServerJSONObject())}},{key:"toServerJSONObject",value:function(){var t={};return t.type=this.type,this.graphText&&(t.graphTextDisplayed=this.graphText.graphTextDisplayed,t.graphTextFormat=this.graphText.graphTextFormat,t.graphTextStyle=this.graphText.graphTextStyle),this.graphAxes&&(t.axesColor=this.graphAxes.axesColor,t.axesDisplayed=this.graphAxes.axesDisplayed,t.axesGridDisplayed=this.graphAxes.axesGridDisplayed,t.axesTextDisplayed=this.graphAxes.axesTextDisplayed,t.axesTextStyle=this.graphAxes.axesTextStyle),this.graphSize&&(t.maxGraphSize=this.graphSize.maxGraphSize,t.minGraphSize=this.graphSize.minGraphSize),this.offset&&(t.offsetFixed=this.offset.offsetFixed,t.offsetX=this.offset.offsetX,t.offsetY=this.offset.offsetY),t.barWidth=this.barWidth,t.graduatedMode=this.graduatedMode,t.graphSizeFixed=this.graphSizeFixed,t.graphType=this.graphType,t.graphAxesTextDisplayMode=this.graphAxesTextDisplayMode,t.items=this.items,t.memoryKeys=this.memoryKeys,t.negativeDisplayed=this.negativeDisplayed,t.overlapAvoided=this.overlapAvoided,t.roseAngle=this.roseAngle,t.startAngle=this.startAngle,t}}])&&pV(r.prototype,n),o&&pV(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function wV(t){"@babel/helpers - typeof";return(wV="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function SV(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,xV(n.key),n)}}function xV(t){var e=function(t,e){if("object"!=wV(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=wV(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==wV(e)?e:e+""}function _V(t,e,r){return e=EV(e),function(t,e){if(e&&("object"===wV(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],EV(t).constructor):e.apply(t,r))}function EV(t){return(EV=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function OV(t,e){return(OV=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var PV=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=_V(this,e,["DOTDENSITY",t])).dotExpression=null,r.style=new Nr,r.value=null,t&&W.extend(r,t),r.CLASS_NAME="SuperMap.ThemeDotDensity",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&OV(t,e)}(e,ez),r=e,o=[{key:"fromObj",value:function(t){if(t){var r=new e;return W.copy(r,t),r.style=Nr.fromJson(t.style),r}}}],(n=[{key:"destroy",value:function(){var t=this;t.dotExpression=null,t.value=null,t.style&&(t.style.destroy(),t.style=null)}},{key:"toServerJSONObject",value:function(){var t={};return(t=W.copyAttributes(t,this)).style&&t.style.toServerJSONObject&&(t.style=t.style.toServerJSONObject()),t}}])&&SV(r.prototype,n),o&&SV(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function kV(t){"@babel/helpers - typeof";return(kV="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function CV(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,TV(n.key),n)}}function TV(t){var e=function(t,e){if("object"!=kV(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=kV(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==kV(e)?e:e+""}var AV=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.negativeDisplayed=!1,this.negativeStyle=new Nr,this.positiveStyle=new Nr,this.zeroDisplayed=!1,this.zeroStyle=new Nr,e&&W.extend(this,e),this.CLASS_NAME="SuperMap.ThemeGraduatedSymbolStyle"}return e=t,n=[{key:"fromObj",value:function(e){if(e){var r=new t;return W.copy(r,e),r.negativeStyle=Nr.fromJson(e.negativeStyle),r.positiveStyle=Nr.fromJson(e.positiveStyle),r.zeroStyle=Nr.fromJson(e.zeroStyle),r}}}],(r=[{key:"destroy",value:function(){var t=this;t.negativeDisplayed=null,t.negativeStyle=null,t.positiveStyle=null,t.zeroDisplayed=null,t.zeroStyle=null}}])&&CV(e.prototype,r),n&&CV(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,r,n}();function MV(t){"@babel/helpers - typeof";return(MV="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function jV(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,IV(n.key),n)}}function IV(t){var e=function(t,e){if("object"!=MV(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=MV(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==MV(e)?e:e+""}function NV(t,e,r){return e=RV(e),function(t,e){if(e&&("object"===MV(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],RV(t).constructor):e.apply(t,r))}function LV(){return(LV="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=RV(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function RV(t){return(RV=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function DV(t,e){return(DV=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var BV=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=NV(this,e,["GRADUATEDSYMBOL",t])).baseValue=0,r.expression=null,r.graduatedMode=sn.CONSTAN,r.offset=new gz,r.style=new AV,t&&W.extend(r,t),r.CLASS_NAME="SuperMap.ThemeGraduatedSymbol",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&DV(t,e)}(e,ez),r=e,o=[{key:"fromObj",value:function(t){if(t){var r=new e;return W.copy(r,t),r.offset=gz.fromObj(t),r.style=AV.fromObj(t),r}}}],(n=[{key:"destroy",value:function(){LV(RV(e.prototype),"destroy",this).call(this);var t=this;t.expression=null,t.graduatedMode=sn.CONSTANT,t.offset&&(t.offset.destroy(),t.offset=null),t.style&&(t.style.destroy(),t.style=null)}},{key:"toJSON",value:function(){return W.toJSON(this.toServerJSONObject())}},{key:"toServerJSONObject",value:function(){var t={};return t.type=this.type,t.memoryData=this.memoryData,t.baseValue=this.baseValue,t.expression=this.expression,t.graduatedMode=this.graduatedMode,this.offset&&(t.offsetFixed=this.offset.offsetFixed,t.offsetX=this.offset.offsetX,t.offsetY=this.offset.offsetY),this.style&&(t.negativeStyle=this.style.negativeStyle,t.negativeDisplayed=this.style.negativeDisplayed,t.positiveStyle=this.style.positiveStyle,t.zeroDisplayed=this.style.zeroDisplayed,t.zeroStyle=this.style.zeroStyle),t}}])&&jV(r.prototype,n),o&&jV(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function FV(t){"@babel/helpers - typeof";return(FV="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function GV(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,UV(n.key),n)}}function UV(t){var e=function(t,e){if("object"!=FV(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=FV(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==FV(e)?e:e+""}var zV=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.caption=null,this.end=0,this.start=0,this.style=new Nr,this.visible=!0,e&&W.extend(this,e),this.CLASS_NAME="SuperMap.ThemeRangeItem"}return e=t,n=[{key:"fromObj",value:function(e){if(e){var r=new t;return W.copy(r,e),r.style=Nr.fromJson(e.style),r}}}],(r=[{key:"destroy",value:function(){var t=this;t.caption=null,t.end=null,t.start=null,t.style&&(t.style.destroy(),t.style=null),t.visible=null}},{key:"toServerJSONObject",value:function(){var t={};return(t=W.copyAttributes(t,this)).style&&t.style.toServerJSONObject&&(t.style=t.style.toServerJSONObject()),t}}])&&GV(e.prototype,r),n&&GV(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,r,n}();function VV(t){"@babel/helpers - typeof";return(VV="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function HV(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,WV(n.key),n)}}function WV(t){var e=function(t,e){if("object"!=VV(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=VV(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==VV(e)?e:e+""}function qV(t,e,r){return e=XV(e),function(t,e){if(e&&("object"===VV(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],XV(t).constructor):e.apply(t,r))}function YV(){return(YV="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=XV(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function XV(t){return(XV=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function JV(t,e){return(JV=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var KV=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=qV(this,e,["RANGE",t])).precision="1.0E-12",r.items=null,r.rangeExpression=null,r.rangeMode=un.EQUALINTERVAL,r.rangeParameter=0,r.colorGradientType=ln.YELLOW_RED,t&&W.extend(r,t),r.CLASS_NAME="SuperMap.ThemeRange",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&JV(t,e)}(e,ez),r=e,o=[{key:"fromObj",value:function(t){if(t){var r=new e;W.copy(r,t);var n=t.items,o=n?n.length:0;r.items=[];for(var i=0;i<o;i++)r.items.push(zV.fromObj(n[i]));return r}}}],(n=[{key:"destroy",value:function(){YV(XV(e.prototype),"destroy",this).call(this);var t=this;if(t.items){if(t.items.length>0)for(var r in t.items)t.items[r].destroy(),t.items[r]=null;t.items=null}t.rangeExpression=null,t.rangeMode=null,t.rangeParameter=null,t.colorGradientType=null}}])&&HV(r.prototype,n),o&&HV(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function QV(t){"@babel/helpers - typeof";return(QV="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ZV(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,$V(n.key),n)}}function $V(t){var e=function(t,e){if("object"!=QV(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=QV(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==QV(e)?e:e+""}var tH=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},this.bounds=null,this.caption=null,this.description=null,this.name=null,this.queryable=null,this.subLayers=null,this.type=null,this.visible=null,W.extend(this,e),this.CLASS_NAME="SuperMap.UGCLayer"},(e=[{key:"destroy",value:function(){W.reset(this)}},{key:"fromJson",value:function(t){t=t||{},W.extend(this,t);var e=this.bounds;e&&(this.bounds=new Gt(e.leftBottom.x,e.leftBottom.y,e.rightTop.x,e.rightTop.y))}},{key:"toServerJSONObject",value:function(){var t={};return(t=W.copyAttributes(t,this)).bounds&&t.bounds.toServerJSONObject&&(t.bounds=t.bounds.toServerJSONObject()),t}}])&&ZV(t.prototype,e),r&&ZV(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function eH(t){"@babel/helpers - typeof";return(eH="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function rH(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,nH(n.key),n)}}function nH(t){var e=function(t,e){if("object"!=eH(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=eH(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==eH(e)?e:e+""}function oH(t,e,r){return e=aH(e),function(t,e){if(e&&("object"===eH(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],aH(t).constructor):e.apply(t,r))}function iH(){return(iH="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=aH(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function aH(t){return(aH=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function sH(t,e){return(sH=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var uH=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=oH(this,e,[t=t||{}])).completeLineSymbolDisplayed=null,r.maxScale=null,r.minScale=null,r.minVisibleGeometrySize=null,r.opaqueRate=null,r.symbolScalable=null,r.symbolScale=null,r.overlapDisplayed=null,r.overlapDisplayedOptions=null,r.CLASS_NAME="SuperMap.UGCMapLayer",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&sH(t,e)}(e,tH),r=e,(n=[{key:"destroy",value:function(){iH(aH(e.prototype),"destroy",this).call(this),W.reset(this)}},{key:"fromJson",value:function(t){iH(aH(e.prototype),"fromJson",this).call(this,t)}},{key:"toServerJSONObject",value:function(){return iH(aH(e.prototype),"toServerJSONObject",this).call(this)}}])&&rH(r.prototype,n),o&&rH(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function lH(t){"@babel/helpers - typeof";return(lH="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function cH(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,fH(n.key),n)}}function fH(t){var e=function(t,e){if("object"!=lH(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=lH(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==lH(e)?e:e+""}var hH=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.foreignTableName=null,this.joinFilter=null,this.joinType=null,e&&W.extend(this,e),this.CLASS_NAME="SuperMap.JoinItem"},(e=[{key:"destroy",value:function(){this.foreignTableName=null,this.joinFilter=null,this.joinType=null}},{key:"toServerJSONObject",value:function(){var t={};return t=W.copyAttributes(t,this)}}])&&cH(t.prototype,e),r&&cH(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function pH(t){"@babel/helpers - typeof";return(pH="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function dH(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,yH(n.key),n)}}function yH(t){var e=function(t,e){if("object"!=pH(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=pH(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==pH(e)?e:e+""}var vH=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},this.bounds=null,this.dataSourceName=null,this.description=null,this.encodeType=null,this.isReadOnly=null,this.name=null,this.prjCoordSys=null,this.tableName=null,this.type=null,W.extend(this,e);var r=this.bounds;r&&(this.bounds=new Gt(r.leftBottom.x,r.leftBottom.y,r.rightTop.x,r.rightTop.y)),this.CLASS_NAME="SuperMap.DatasetInfo"},(e=[{key:"destroy",value:function(){W.reset(this)}},{key:"toServerJSONObject",value:function(){var t={};return(t=W.copyAttributes(t,this)).bounds&&t.bounds.toServerJSONObject&&(t.bounds=t.bounds.toServerJSONObject()),t}}])&&dH(t.prototype,e),r&&dH(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function gH(t){"@babel/helpers - typeof";return(gH="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function mH(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,bH(n.key),n)}}function bH(t){var e=function(t,e){if("object"!=gH(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=gH(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==gH(e)?e:e+""}function wH(t,e,r){return e=xH(e),function(t,e){if(e&&("object"===gH(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],xH(t).constructor):e.apply(t,r))}function SH(){return(SH="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=xH(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function xH(t){return(xH=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _H(t,e){return(_H=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var EH=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=wH(this,e,[t=t||{}])).datasetInfo=null,r.displayFilter=null,r.joinItems=null,r.representationField=null,r.ugcLayerType=null,r.CLASS_NAME="SuperMap.UGCSubLayer",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_H(t,e)}(e,uH),r=e,(n=[{key:"fromJson",value:function(t){if(SH(xH(e.prototype),"fromJson",this).call(this,t),this.datasetInfo&&(this.datasetInfo=new vH(this.datasetInfo)),this.joinItems&&this.joinItems.length){for(var r=[],n=0;n<this.joinItems.length;n++)r[n]=new hH(this.joinItems[n]);this.joinItems=r}}},{key:"destroy",value:function(){SH(xH(e.prototype),"destroy",this).call(this),W.reset(this)}},{key:"toServerJSONObject",value:function(){var t=SH(xH(e.prototype),"toServerJSONObject",this).call(this);if(t.joinItems){for(var r=[],n=0;n<t.joinItems.length;n++)t.joinItems[n].toServerJSONObject&&(r[n]=t.joinItems[n].toServerJSONObject());t.joinItems=r}return t.datasetInfo&&t.datasetInfo.toServerJSONObject&&(t.datasetInfo=t.datasetInfo.toServerJSONObject()),t}}])&&mH(r.prototype,n),o&&mH(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function OH(t){"@babel/helpers - typeof";return(OH="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function PH(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,kH(n.key),n)}}function kH(t){var e=function(t,e){if("object"!=OH(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=OH(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==OH(e)?e:e+""}function CH(t,e,r){return e=AH(e),function(t,e){if(e&&("object"===OH(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],AH(t).constructor):e.apply(t,r))}function TH(){return(TH="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=AH(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function AH(t){return(AH=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function MH(t,e){return(MH=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var jH=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=CH(this,e,[t=t||{}])).theme=null,r.themeElementPosition=null,r.CLASS_NAME="SuperMap.ServerTheme",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&MH(t,e)}(e,EH),r=e,(n=[{key:"destroy",value:function(){TH(AH(e.prototype),"destroy",this).call(this),W.reset(this)}},{key:"fromJson",value:function(t){TH(AH(e.prototype),"fromJson",this).call(this,t);var r=this.theme;switch(r&&r.type){case"LABEL":this.theme=Uz.fromObj(r);break;case"UNIQUE":this.theme=Jz.fromObj(r);break;case"GRAPH":this.theme=bV.fromObj(r);break;case"DOTDENSITY":this.theme=PV.fromObj(r);break;case"GRADUATEDSYMBOL":this.theme=BV.fromObj(r);break;case"RANGE":this.theme=KV.fromObj(r)}this.themeElementPosition&&(this.themeElementPosition=new Rt(this.themeElementPosition.x,this.themeElementPosition.y))}},{key:"toServerJSONObject",value:function(){var t=TH(AH(e.prototype),"toServerJSONObject",this).call(this);return t.themeElementPosition&&t.themeElementPosition.toServerJSONObject&&(t.themeElementPosition=t.themeElementPosition.toServerJSONObject()),t.theme&&t.theme.toServerJSONObject&&(t.theme=t.theme.toServerJSONObject()),t}}])&&PH(r.prototype,n),o&&PH(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function IH(t){"@babel/helpers - typeof";return(IH="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function NH(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,LH(n.key),n)}}function LH(t){var e=function(t,e){if("object"!=IH(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=IH(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==IH(e)?e:e+""}var RH=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},this.elevation=null,this.color=null,W.extend(this,e);var r=this.color;r&&(this.color=new Ar(r.red,r.green,r.blue)),this.CLASS_NAME="SuperMap.ColorDictionary"},(e=[{key:"destroy",value:function(){W.reset(this)}},{key:"toServerJSONObject",value:function(){var t={};return t=W.copyAttributes(t,this)}}])&&NH(t.prototype,e),r&&NH(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function DH(t){"@babel/helpers - typeof";return(DH="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function BH(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,FH(n.key),n)}}function FH(t){var e=function(t,e){if("object"!=DH(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=DH(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==DH(e)?e:e+""}function GH(t,e,r){return e=zH(e),function(t,e){if(e&&("object"===DH(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],zH(t).constructor):e.apply(t,r))}function UH(){return(UH="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=zH(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function zH(t){return(zH=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function VH(t,e){return(VH=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var HH=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=GH(this,e,[t=t||{}])).colorDictionarys=null,r.brightness=null,r.colorGradientType=null,r.colors=null,r.contrast=null,r.dashStyle=null,r.gridType=null,r.horizontalSpacing=null,r.sizeFixed=null,r.solidStyle=null,r.specialColor=null,r.specialValue=null,r.specialValueTransparent=null,r.verticalSpacing=null,r.CLASS_NAME="SuperMap.Grid",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&VH(t,e)}(e,EH),r=e,(n=[{key:"destroy",value:function(){UH(zH(e.prototype),"destroy",this).call(this),W.reset(this)}},{key:"fromJson",value:function(t){if(UH(zH(e.prototype),"fromJson",this).call(this,t),this.specialColor&&(this.specialColor=new Ar(this.specialColor.red,this.specialColor.green,this.specialColor.blue)),this.colors){var r,n=[];for(var o in this.colors)r=this.colors[o],n.push(new Ar(r.red,r.green,r.blue));this.colors=n}if(this.dashStyle&&(this.dashStyle=new Nr(this.dashStyle)),this.solidStyle&&(this.solidStyle=new Nr(this.solidStyle)),this.colorDictionary){var i,a=[];for(var s in this.colorDictionary)i=this.colorDictionary[s],a.push(new RH({elevation:s,color:i}));this.colorDictionarys=a}delete this.colorDictionary}},{key:"toServerJSONObject",value:function(){var t=UH(zH(e.prototype),"toServerJSONObject",this).call(this);return t.dashStyle&&t.dashStyle.toServerJSONObject&&(t.dashStyle=t.dashStyle.toServerJSONObject()),t.solidStyle&&t.solidStyle.toServerJSONObject&&(t.solidStyle=t.solidStyle.toServerJSONObject()),t}}])&&BH(r.prototype,n),o&&BH(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function WH(t){"@babel/helpers - typeof";return(WH="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function qH(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,YH(n.key),n)}}function YH(t){var e=function(t,e){if("object"!=WH(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=WH(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==WH(e)?e:e+""}function XH(t,e,r){return e=KH(e),function(t,e){if(e&&("object"===WH(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],KH(t).constructor):e.apply(t,r))}function JH(){return(JH="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=KH(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function KH(t){return(KH=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function QH(t,e){return(QH=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var ZH=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=XH(this,e,[t=t||{}])).brightness=null,r.colorSpaceType=null,r.contrast=null,r.displayBandIndexes=null,r.transparent=null,r.transparentColor=null,r.transparentColorTolerance=null,r.CLASS_NAME="SuperMap.Image",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&QH(t,e)}(e,EH),r=e,(n=[{key:"destroy",value:function(){JH(KH(e.prototype),"destroy",this).call(this),W.reset(this)}},{key:"fromJson",value:function(t){JH(KH(e.prototype),"fromJson",this).call(this,t),this.transparentColor&&(this.transparentColor=new Ar(this.transparentColor.red,this.transparentColor.green,this.transparentColor.blue))}},{key:"toServerJSONObject",value:function(){return JH(KH(e.prototype),"toServerJSONObject",this).call(this)}}])&&qH(r.prototype,n),o&&qH(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function $H(t){"@babel/helpers - typeof";return($H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function tW(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,eW(n.key),n)}}function eW(t){var e=function(t,e){if("object"!=$H(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=$H(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==$H(e)?e:e+""}function rW(t,e,r){return e=oW(e),function(t,e){if(e&&("object"===$H(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],oW(t).constructor):e.apply(t,r))}function nW(){return(nW="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=oW(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function oW(t){return(oW=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function iW(t,e){return(iW=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var aW=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=rW(this,e,[t=t||{}])).style=null,r.CLASS_NAME="SuperMap.Vector",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&iW(t,e)}(e,EH),r=e,(n=[{key:"destroy",value:function(){nW(oW(e.prototype),"destroy",this).call(this),W.reset(this)}},{key:"fromJson",value:function(t){nW(oW(e.prototype),"fromJson",this).call(this,t);var r=this.style;r&&(this.style=new Nr(r))}},{key:"toServerJSONObject",value:function(){var t=nW(oW(e.prototype),"toServerJSONObject",this).call(this);return t.style&&t.style.toServerJSONObject&&(t.style=t.style.toServerJSONObject()),t}}])&&tW(r.prototype,n),o&&tW(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function sW(t){"@babel/helpers - typeof";return(sW="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function uW(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,lW(n.key),n)}}function lW(t){var e=function(t,e){if("object"!=sW(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=sW(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==sW(e)?e:e+""}function cW(t,e,r){return e=hW(e),function(t,e){if(e&&("object"===sW(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],hW(t).constructor):e.apply(t,r))}function fW(){return(fW="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=hW(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function hW(t){return(hW=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function pW(t,e){return(pW=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var dW=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=cW(this,e,[t,r])).isTempLayers=!1,r&&W.extend(n,r),n.CLASS_NAME="SuperMap.GetLayersInfoService",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&pW(t,e)}(e,bv),r=e,(n=[{key:"destroy",value:function(){fW(hW(e.prototype),"destroy",this).call(this),W.reset(this)}},{key:"processAsync",value:function(t){var e=this;return e.isTempLayers||(e.url=W.urlPathAppend(e.url,"layers")),e.request({method:"GET",params:null,scope:e,success:t,failure:t})}},{key:"transformResult",value:function(t,e){var r,n;return n=(r=!!(t=W.transformResult(t))&&t.length>0?t[0].subLayers.layers:null)?r.length:0,this.handleLayers(n,r),{result:t[0],options:e}}},{key:"handleLayers",value:function(t,e){var r;if(t)for(var n=0;n<t;n++){if(e[n].subLayers&&e[n].subLayers.layers&&e[n].subLayers.layers.length>0)this.handleLayers(e[n].subLayers.layers.length,e[n].subLayers.layers);else switch(e[n].ugcLayerType){case"THEME":(r=new jH).fromJson(e[n]),e[n]=r;break;case"GRID":(r=new HH).fromJson(e[n]),e[n]=r;break;case"IMAGE":(r=new ZH).fromJson(e[n]),e[n]=r;break;case"VECTOR":(r=new aW).fromJson(e[n]),e[n]=r}}}}])&&uW(r.prototype,n),o&&uW(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function yW(t){"@babel/helpers - typeof";return(yW="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function vW(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,gW(n.key),n)}}function gW(t){var e=function(t,e){if("object"!=yW(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=yW(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==yW(e)?e:e+""}function mW(t,e,r){return e=wW(e),function(t,e){if(e&&("object"===yW(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],wW(t).constructor):e.apply(t,r))}function bW(){return(bW="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=wW(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function wW(t){return(wW=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function SW(t,e){return(SW=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var xW=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=mW(this,e,[t,r]),r&&W.extend(n,r),n.CLASS_NAME="SuperMap.GetLayersLegendInfoService",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&SW(t,e)}(e,bv),r=e,(n=[{key:"destroy",value:function(){bW(wW(e.prototype),"destroy",this).call(this),W.reset(this)}},{key:"processAsync",value:function(t,e){return this.url=W.urlPathAppend(this.url,"/legend"),this.request({method:"GET",params:t,scope:this,success:e,failure:e})}}])&&vW(r.prototype,n),o&&vW(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function _W(t){"@babel/helpers - typeof";return(_W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function EW(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,OW(n.key),n)}}function OW(t){var e=function(t,e){if("object"!=_W(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=_W(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==_W(e)?e:e+""}function PW(t,e,r){return e=CW(e),function(t,e){if(e&&("object"===_W(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],CW(t).constructor):e.apply(t,r))}function kW(){return(kW="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=CW(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function CW(t){return(CW=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function TW(t,e){return(TW=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var AW=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=PW(this,e,[t,r]),r&&W.extend(n,r),n.CLASS_NAME="SuperMap.SetLayerInfoService",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&TW(t,e)}(e,bv),r=e,(n=[{key:"destroy",value:function(){kW(CW(e.prototype),"destroy",this).call(this),W.reset(this)}},{key:"processAsync",value:function(t,e){if(t){var r=W.toJSON(t);return this.request({method:"PUT",data:r,scope:this,success:e,failure:e})}}}])&&EW(r.prototype,n),o&&EW(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function MW(t){"@babel/helpers - typeof";return(MW="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function jW(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,IW(n.key),n)}}function IW(t){var e=function(t,e){if("object"!=MW(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=MW(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==MW(e)?e:e+""}function NW(t,e,r){return e=RW(e),function(t,e){if(e&&("object"===MW(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],RW(t).constructor):e.apply(t,r))}function LW(){return(LW="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=RW(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function RW(t){return(RW=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function DW(t,e){return(DW=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var BW=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=NW(this,e,[t,r])).resourceID=null,n.isTempLayers=!1,r&&W.extend(n,r),n.CLASS_NAME="SuperMap.SetLayersInfoService",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&DW(t,e)}(e,bv),r=e,(n=[{key:"destroy",value:function(){LW(RW(e.prototype),"destroy",this).call(this),W.reset(this)}},{key:"processAsync",value:function(t,e){if(t){var r,n=[],o=this,i="";o.isTempLayers?(o.url=W.urlPathAppend(o.url,"tempLayersSet/"+o.resourceID),i="PUT"):(o.url=W.urlPathAppend(o.url,"tempLayersSet"),i="POST"),t.subLayers||(t.subLayers={layers:[]}),t.subLayers.layers||(t.subLayers.layers=[]);var a=t.subLayers.layers,s=a.length;for(var u in a){if("GRID"===a[u].ugcLayerType){var l={},c=a[u].colorDictionarys;for(var f in c){l[c[f].elevation]=c[f].color}}a[u].colorDictionary=l,delete a[u].colorDictionarys}for(var h=0;h<s;h++)a[h].toJsonObject?n.push(a[h].toJsonObject()):n.push(a[h]);(r=W.extend(r,t)).subLayers={layers:n},r.object=null;var p=W.toJSON([r]);return o.request({method:i,data:p,scope:o,success:e,failure:e})}}}])&&jW(r.prototype,n),o&&jW(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function FW(t){"@babel/helpers - typeof";return(FW="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function GW(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,UW(n.key),n)}}function UW(t){var e=function(t,e){if("object"!=FW(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=FW(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==FW(e)?e:e+""}var zW=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.layerStatusList=[],this.holdTime=15,this.resourceID=null,e&&W.extend(this,e)},(e=[{key:"destroy",value:function(){this.layerStatusList=null,this.holdTime=null,this.resourceID=null}},{key:"toJSON",value:function(){var t="{";t+='"layers":[';for(var e=[],r=0,n=this.layerStatusList.length;r<n;r++)e.push(this.layerStatusList[r].toJSON());return t+=e,t+="]",t+="}"}}])&&GW(t.prototype,e),r&&GW(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function VW(t){"@babel/helpers - typeof";return(VW="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function HW(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,WW(n.key),n)}}function WW(t){var e=function(t,e){if("object"!=VW(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=VW(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==VW(e)?e:e+""}function qW(t,e,r){return e=XW(e),function(t,e){if(e&&("object"===VW(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],XW(t).constructor):e.apply(t,r))}function YW(){return(YW="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=XW(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function XW(t){return(XW=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function JW(t,e){return(JW=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var KW=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=qW(this,e,[t,r])).lastparams=null,n.mapUrl=t,r&&W.extend(n,r),n.CLASS_NAME="SuperMap.SetLayerStatusService",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&JW(t,e)}(e,bv),r=e,(n=[{key:"destroy",value:function(){YW(XW(e.prototype),"destroy",this).call(this),W.reset(this)}},{key:"processAsync",value:function(t,e){if(t instanceof zW){var r=this;if(r.url=r.mapUrl,null==t.resourceID)return r.url=W.urlPathAppend(r.url,"tempLayersSet"),r.lastparams=t,r.request({method:"POST",scope:r,success:r.createTempLayerComplete.bind(r,e),failure:e});r.url=W.urlPathAppend(r.url,"tempLayersSet/"+t.resourceID),r.url=W.urlAppend(r.url,"elementRemain=true&reference="+t.resourceID+"&holdTime="+t.holdTime.toString());var n="[{";return n+='"type":"UGC",',null!=t.layerStatusList&&t.layerStatusList.length>0&&(n+='"subLayers":'+t.toJSON()),n+=',"visible":true,',n+='"name":"'+this.getMapName(this.mapUrl)+'"',n+="}]",r.request({method:"PUT",data:n,scope:r,success:e,failure:e})}}},{key:"createTempLayerComplete",value:function(t,e){return e.result=W.transformResult(e.result),e.result.succeed&&(this.lastparams.resourceID=e.result.newResourceID),this.processAsync(this.lastparams,t)}},{key:"getMapName",value:function(t){var e=t;"/"===e.charAt(e.length-1)&&(e=e.substr(0,e.length-1));var r=e.lastIndexOf("/");return e.substring(r+1,e.length)}},{key:"transformResult",value:function(t,e){return null!=(t=W.transformResult(t))&&null!=this.lastparams&&null!=this.lastparams.resourceID&&(t.newResourceID=this.lastparams.resourceID),{result:t,options:e}}}])&&HW(r.prototype,n),o&&HW(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function QW(t){"@babel/helpers - typeof";return(QW="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ZW(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,$W(n.key),n)}}function $W(t){var e=function(t,e){if("object"!=QW(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=QW(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==QW(e)?e:e+""}var tq=function(){return t=function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.url=e,this.options=r||{}},(e=[{key:"getLayersInfo",value:function(t){var e=this;return new dW(e.url,{proxy:e.options.proxy,withCredentials:e.options.withCredentials,crossOrigin:e.options.crossOrigin,headers:e.options.headers}).processAsync(t)}},{key:"getLayersLegendInfo",value:function(t,e){var r=this;return new xW(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers}).processAsync(t,e)}},{key:"setLayerInfo",value:function(t,e){if(t){var r=this,n=t.resourceID,o=t.tempLayerName,i=t.layerInfo;if(n&&o){var a=W.urlPathAppend(r.url,"tempLayersSet/"+n+"/"+o);return new AW(a,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers}).processAsync(i,e)}}}},{key:"setLayersInfo",value:function(t,e){if(t){var r=this,n=t.resourceID,o=!!t.isTempLayers&&t.isTempLayers,i=t.layersInfo;if((!o||n)&&i)return new BW(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,resourceID:n,isTempLayers:o}).processAsync(i,e)}}},{key:"setLayerStatus",value:function(t,e){if(t){var r=this;return new KW(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers}).processAsync(t,e)}}}])&&ZW(t.prototype,e),r&&ZW(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function eq(t){"@babel/helpers - typeof";return(eq="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function rq(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,nq(n.key),n)}}function nq(t){var e=function(t,e){if("object"!=eq(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=eq(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==eq(e)?e:e+""}function oq(t,e,r){return e=iq(e),function(t,e){if(e&&("object"===eq(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],iq(t).constructor):e.apply(t,r))}function iq(t){return(iq=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function aq(t,e){return(aq=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var sq=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=oq(this,e,[t,r]))._layerInfoService=new tq(t,r),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&aq(t,e)}(e,uv),r=e,(n=[{key:"getLayersInfo",value:function(t){return this._layerInfoService.getLayersInfo(t)}},{key:"getLayersLegendInfo",value:function(t,e){return this._layerInfoService.getLayersLegendInfo(t,e)}},{key:"setLayerInfo",value:function(t,e){return this._layerInfoService.setLayerInfo(t,e)}},{key:"setLayersInfo",value:function(t,e){return this._layerInfoService.setLayersInfo(t,e)}},{key:"setLayerStatus",value:function(t,e){return this._layerInfoService.setLayerStatus(t,e)}}])&&rq(r.prototype,n),o&&rq(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function uq(t){"@babel/helpers - typeof";return(uq="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function lq(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,cq(n.key),n)}}function cq(t){var e=function(t,e){if("object"!=uq(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=uq(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==uq(e)?e:e+""}function fq(t,e,r){return e=pq(e),function(t,e){if(e&&("object"===uq(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],pq(t).constructor):e.apply(t,r))}function hq(){return(hq="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=pq(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function pq(t){return(pq=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function dq(t,e){return(dq=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var yq=function(t){function e(t,r){var n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=fq(this,e,[t,r])).projection=null,n.CLASS_NAME="SuperMap.MapService",r&&W.extend(n,r);var o=n;if(o.projection){var i=o.projection.split(":");i instanceof Array&&(2===i.length&&(o.url=W.urlAppend(o.url,"prjCoordSys=".concat(encodeURIComponent('{"epsgCode":"'.concat(i[1],'"}'))))),1===i.length&&(o.url=W.urlAppend(o.url,"prjCoordSys=".concat(encodeURIComponent('{"epsgCode":"'.concat(i[0],'"}'))))))}return n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&dq(t,e)}(e,bv),r=e,(n=[{key:"destroy",value:function(){hq(pq(e.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t){return this.request({method:"GET",scope:this,success:t,failure:t})}},{key:"transformResult",value:function(t,e){var r=(t=W.transformResult(t)).code>=200&&t.code<300||0==t.code||304===t.code,n=t.code&&r;return!t.code||n?{result:t,options:e}:{error:t,options:e}}}])&&lq(r.prototype,n),o&&lq(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function vq(t){"@babel/helpers - typeof";return(vq="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function gq(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,mq(n.key),n)}}function mq(t){var e=function(t,e){if("object"!=vq(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=vq(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==vq(e)?e:e+""}function bq(t,e,r){return e=Sq(e),function(t,e){if(e&&("object"===vq(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Sq(t).constructor):e.apply(t,r))}function wq(){return(wq="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Sq(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Sq(t){return(Sq=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function xq(t,e){return(xq=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var _q=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=bq(this,e,[t,r])).CLASS_NAME="SuperMap.TilesetsService",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&xq(t,e)}(e,bv),r=e,(n=[{key:"destroy",value:function(){wq(Sq(e.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t){if(this.url){return this.url=W.urlPathAppend(this.url,"tilesets"),this.request({method:"GET",scope:this,success:t,failure:t})}}}])&&gq(r.prototype,n),o&&gq(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function Eq(t){"@babel/helpers - typeof";return(Eq="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Oq(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Pq(n.key),n)}}function Pq(t){var e=function(t,e){if("object"!=Eq(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Eq(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Eq(e)?e:e+""}function kq(t,e,r){return e=Cq(e),function(t,e){if(e&&("object"===Eq(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Cq(t).constructor):e.apply(t,r))}function Cq(t){return(Cq=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Tq(t,e){return(Tq=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Aq=function(t){function e(t,r){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),kq(this,e,[t,r])}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Tq(t,e)}(e,uv),r=e,(n=[{key:"getMapInfo",value:function(t){var e=this;return new yq(e.url,{proxy:e.options.proxy,withCredentials:e.options.withCredentials,crossOrigin:e.options.crossOrigin,headers:e.options.headers,projection:e.options.projection}).processAsync(t)}},{key:"getWKT",value:function(t){var e=this;return new yq("".concat(e.url,"/prjCoordSys.wkt"),{proxy:e.options.proxy,withCredentials:e.options.withCredentials,withoutFormatSuffix:!0,crossOrigin:e.options.crossOrigin,headers:e.options.headers,projection:e.options.projection}).processAsync(t)}},{key:"getTilesets",value:function(t){var e=this;return new _q(e.url,{proxy:e.options.proxy,withCredentials:e.options.withCredentials,crossOrigin:e.options.crossOrigin,headers:e.options.headers}).processAsync(t)}}])&&Oq(r.prototype,n),o&&Oq(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function Mq(t){"@babel/helpers - typeof";return(Mq="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function jq(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Iq(n.key),n)}}function Iq(t){var e=function(t,e){if("object"!=Mq(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Mq(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Mq(e)?e:e+""}var Nq=function(){return t=function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e&&(this.geometry=e,this.unit=en.METER,this.prjCoordSys=null,this.distanceMode=null,r&&W.extend(this,r),this.CLASS_NAME="SuperMap.MeasureParameters")},(e=[{key:"destroy",value:function(){this.geometry=null,this.unit=null,this.prjCoordSys=null}}])&&jq(t.prototype,e),r&&jq(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function Lq(t){"@babel/helpers - typeof";return(Lq="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Rq(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Dq(n.key),n)}}function Dq(t){var e=function(t,e){if("object"!=Lq(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Lq(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Lq(e)?e:e+""}function Bq(t,e,r){return e=Gq(e),function(t,e){if(e&&("object"===Lq(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Gq(t).constructor):e.apply(t,r))}function Fq(){return(Fq="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Gq(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Gq(t){return(Gq=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Uq(t,e){return(Uq=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var zq=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Bq(this,e,[t,r])).measureMode=tn.DISTANCE,r&&W.extend(n,r),n.CLASS_NAME="SuperMap.MeasureService",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Uq(t,e)}(e,bv),r=e,(n=[{key:"destroy",value:function(){Fq(Gq(e.prototype),"destroy",this).call(this);this.measureMode=null}},{key:"processAsync",value:function(t,e){if(t instanceof Nq){var r,n,o=this,i=t.geometry;if(i){o.url=W.urlPathAppend(o.url,o.measureMode===tn.AREA?"area":"distance");var a,s,u,l=zn.fromGeometry(i);if(l)return r=l.parts[0],n=l.points.splice(0,r),t.prjCoordSys?("object"===Lq(t.prjCoordSys)?a='{"epsgCode"'+(s=t.prjCoordSys.projCode).substring(s.indexOf(":"),s.length)+"}":"string"==typeof t.prjCoordSys&&(a='{"epsgCode"'+t.prjCoordSys.substring(t.prjCoordSys.indexOf(":"),t.prjCoordSys.length)+"}"),u={point2Ds:W.toJSON(n),unit:t.unit,prjCoordSys:a,distanceMode:t.distanceMode||"Geodesic"}):u={point2Ds:W.toJSON(n),unit:t.unit,distanceMode:t.distanceMode||"Geodesic"},o.request({method:"GET",params:u,scope:o,success:e,failure:e})}}}}])&&Rq(r.prototype,n),o&&Rq(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function Vq(t){"@babel/helpers - typeof";return(Vq="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Hq(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Wq(n.key),n)}}function Wq(t){var e=function(t,e){if("object"!=Vq(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Vq(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Vq(e)?e:e+""}function qq(t,e,r){return e=Yq(e),function(t,e){if(e&&("object"===Vq(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Yq(t).constructor):e.apply(t,r))}function Yq(t){return(Yq=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Xq(t,e){return(Xq=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Jq=function(t){function e(t,r){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),qq(this,e,[t,r])}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Xq(t,e)}(e,uv),r=e,(n=[{key:"measureDistance",value:function(t,e){return this.measure(t,"DISTANCE",e)}},{key:"measureArea",value:function(t,e){return this.measure(t,"AREA",e)}},{key:"measure",value:function(t,e,r){var n=this;return new zq(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,measureMode:e}).processAsync(n._processParam(t),r)}},{key:"_processParam",value:function(t){return!t||t.geometry instanceof L||(t.geometry=$n.toSuperMapGeometry(t.geometry)),t}}])&&Hq(r.prototype,n),o&&Hq(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function Kq(t){"@babel/helpers - typeof";return(Kq="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Qq(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Zq(n.key),n)}}function Zq(t){var e=function(t,e){if("object"!=Kq(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Kq(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Kq(e)?e:e+""}function $q(t,e,r){return e=eY(e),function(t,e){if(e&&("object"===Kq(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],eY(t).constructor):e.apply(t,r))}function tY(){return(tY="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=eY(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function eY(t){return(eY=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function rY(t,e){return(rY=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var nY=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=$q(this,e,[t,r])).format=Jr.GEOJSON,n.CLASS_NAME="SuperMap.NetworkAnalystServiceBase",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&rY(t,e)}(e,bv),r=e,(n=[{key:"destroy",value:function(){tY(eY(e.prototype),"destroy",this).call(this),this.format=null}},{key:"transformResult",value:function(t,e){var r;return(t=W.transformResult(t))&&this.format===Jr.GEOJSON&&"function"==typeof this.toGeoJSONResult&&(r=this.toGeoJSONResult(t)),r||(r=t),{result:r,options:e}}},{key:"toGeoJSONResult",value:function(t){return null}}])&&Qq(r.prototype,n),o&&Qq(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function oY(t){"@babel/helpers - typeof";return(oY="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function iY(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,aY(n.key),n)}}function aY(t){var e=function(t,e){if("object"!=oY(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=oY(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==oY(e)?e:e+""}var sY=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);this.sourceNodeIDs=null,this.edgeID=null,this.nodeID=null,this.isUncertainDirectionValid=!1,W.extend(this,e),this.CLASS_NAME="SuperMap.BurstPipelineAnalystParameters"},(e=[{key:"destroy",value:function(){this.sourceNodeIDs=null,this.edgeID=null,this.nodeID=null,this.isUncertainDirectionValid=null}}])&&iY(t.prototype,e),r&&iY(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function uY(t){"@babel/helpers - typeof";return(uY="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function lY(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,cY(n.key),n)}}function cY(t){var e=function(t,e){if("object"!=uY(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=uY(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==uY(e)?e:e+""}function fY(t,e,r){return e=pY(e),function(t,e){if(e&&("object"===uY(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],pY(t).constructor):e.apply(t,r))}function hY(){return(hY="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=pY(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function pY(t){return(pY=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function dY(t,e){return(dY=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var yY=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=fY(this,e,[t,r])).CLASS_NAME="SuperMap.BurstPipelineAnalystService",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&dY(t,e)}(e,nY),r=e,(n=[{key:"destroy",value:function(){hY(pY(e.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){if(!(t instanceof sY))return null;var r;if(this.url=W.urlPathAppend(this.url,"burstAnalyse"),r={sourceNodeIDs:t.sourceNodeIDs,isUncertainDirectionValid:t.isUncertainDirectionValid},null!==t.edgeID&&null!==t.nodeID)throw new Error("edgeID and nodeID cannot be null at the same time.");if(null===t.edgeID&&null===t.nodeID)throw new Error("edgeID and nodeID cannot be null at the same time.");return null!==t.edgeID?r.edgeID=t.edgeID:r.nodeID=t.nodeID,this.request({method:"GET",params:r,scope:this,success:e,failure:e})}}])&&lY(r.prototype,n),o&&lY(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function vY(t){"@babel/helpers - typeof";return(vY="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function gY(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,mY(n.key),n)}}function mY(t){var e=function(t,e){if("object"!=vY(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=vY(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==vY(e)?e:e+""}var bY=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e&&(this.returnEdgeFeatures=!1,this.returnEdgeGeometry=!1,this.returnEdgeIDs=!1,this.returnNodeFeatures=!1,this.returnNodeGeometry=!1,this.returnNodeIDs=!1,this.returnPathGuides=!1,this.returnRoutes=!1,W.extend(this,e),this.CLASS_NAME="SuperMap.TransportationAnalystResultSetting")},(e=[{key:"destroy",value:function(){var t=this;t.returnEdgeFeatures=null,t.returnEdgeGeometry=null,t.returnEdgeIDs=null,t.returnNodeFeatures=null,t.returnNodeGeometry=null,t.returnNodeIDs=null,t.returnPathGuides=null,t.returnRoutes=null}}])&&gY(t.prototype,e),r&&gY(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function wY(t){"@babel/helpers - typeof";return(wY="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function SY(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,xY(n.key),n)}}function xY(t){var e=function(t,e){if("object"!=wY(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=wY(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==wY(e)?e:e+""}var _Y=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e&&(this.barrierEdgeIDs=null,this.barrierNodeIDs=null,this.barrierPoints=null,this.weightFieldName=null,this.turnWeightField=null,this.resultSetting=new bY,W.extend(this,e),this.CLASS_NAME="SuperMap.TransportationAnalystParameter")},(e=[{key:"destroy",value:function(){var t=this;if(t.barrierEdgeIDs=null,t.barrierNodeIDs=null,t.weightFieldName=null,t.turnWeightField=null,t.resultSetting&&(t.resultSetting.destroy(),t.resultSetting=null),t.barrierPoints&&t.barrierPoints.length)for(var e in t.barrierPoints)t.barrierPoints[e].destroy();t.barrierPoints=null}}])&&SY(t.prototype,e),r&&SY(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function EY(t){"@babel/helpers - typeof";return(EY="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function OY(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,PY(n.key),n)}}function PY(t){var e=function(t,e){if("object"!=EY(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=EY(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==EY(e)?e:e+""}var kY=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.isAnalyzeById=!1,this.nodes=null,this.parameter=new _Y,W.extend(this,e),this.CLASS_NAME="SuperMap.ComputeWeightMatrixParameters"},(e=[{key:"destroy",value:function(){var t=this;t.isAnalyzeById=null,t.nodes=null,t.parameter&&(t.parameter.destroy(),t.parameter=null)}}])&&OY(t.prototype,e),r&&OY(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function CY(t){"@babel/helpers - typeof";return(CY="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function TY(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,AY(n.key),n)}}function AY(t){var e=function(t,e){if("object"!=CY(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=CY(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==CY(e)?e:e+""}function MY(t,e,r){return e=IY(e),function(t,e){if(e&&("object"===CY(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],IY(t).constructor):e.apply(t,r))}function jY(){return(jY="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=IY(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function IY(t){return(IY=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function NY(t,e){return(NY=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var LY=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=MY(this,e,[t,r])).CLASS_NAME="SuperMap.ComputeWeightMatrixService",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&NY(t,e)}(e,nY),r=e,(n=[{key:"destroy",value:function(){jY(IY(e.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){if(t instanceof kY){var r,n=this;return n.url=W.urlPathAppend(n.url,"weightmatrix"),r={parameter:W.toJSON(t.parameter),nodes:n.getJson(t.isAnalyzeById,t.nodes)},n.request({method:"GET",params:r,scope:n,success:e,failure:e})}}},{key:"getJson",value:function(t,e){var r="[",n=e?e.length:0;if(!1===t)for(var o=0;o<n;o++)o>0&&(r+=","),r+='{"x":'+e[o].x+',"y":'+e[o].y+"}";else if(!0===t)for(var i=0;i<n;i++)i>0&&(r+=","),r+=e[i];return r+="]"}}])&&TY(r.prototype,n),o&&TY(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function RY(t){"@babel/helpers - typeof";return(RY="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function DY(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,BY(n.key),n)}}function BY(t){var e=function(t,e){if("object"!=RY(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=RY(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==RY(e)?e:e+""}var FY=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.sourceNodeIDs=null,this.edgeID=null,this.nodeID=null,this.returnFeatures=!0,this.isUncertainDirectionValid=!1,this.queryType=null,W.extend(this,e),this.CLASS_NAME="SuperMap.FacilityAnalystStreamParameters"},(e=[{key:"destroy",value:function(){var t=this;t.edgeID=null,t.nodeID=null,t.weightName=null,t.returnFeatures=null,t.isUncertainDirectionValid=null,t.type=null}}])&&DY(t.prototype,e),r&&DY(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function GY(t){"@babel/helpers - typeof";return(GY="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function UY(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,zY(n.key),n)}}function zY(t){var e=function(t,e){if("object"!=GY(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=GY(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==GY(e)?e:e+""}function VY(t,e,r){return e=WY(e),function(t,e){if(e&&("object"===GY(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],WY(t).constructor):e.apply(t,r))}function HY(){return(HY="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=WY(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function WY(t){return(WY=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function qY(t,e){return(qY=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var YY=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=VY(this,e,[t,r])).CLASS_NAME="SuperMap.FacilityAnalystStreamService",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&qY(t,e)}(e,nY),r=e,(n=[{key:"destroy",value:function(){HY(WY(e.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){if(t instanceof FY){var r,n=this;if(0===t.queryType)n.url=W.urlPathAppend(n.url,"upstreamcirticalfaclilities");else{if(1!==t.queryType)return;n.url=W.urlPathAppend(n.url,"downstreamcirticalfaclilities")}if(r={sourceNodeIDs:t.sourceNodeIDs,isUncertainDirectionValid:t.isUncertainDirectionValid,returnFeatures:t.returnFeatures},!(null!==t.edgeID&&null!==t.nodeID||null===t.edgeID&&null===t.nodeID))return null!==t.edgeID?r.edgeID=t.edgeID:r.nodeID=t.nodeID,n.request({method:"GET",params:r,scope:n,success:e,failure:e})}}},{key:"toGeoJSONResult",value:function(t){if(!t)return null;var e=new Kn;return t.edgesFeatures&&(t.edgesFeatures=e.toGeoJSON(t.edgesFeatures)),t.nodesFeatures&&(t.nodesFeatures=e.toGeoJSON(t.nodesFeatures)),t}}])&&UY(r.prototype,n),o&&UY(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function XY(t){"@babel/helpers - typeof";return(XY="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function JY(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,KY(n.key),n)}}function KY(t){var e=function(t,e){if("object"!=XY(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=XY(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==XY(e)?e:e+""}var QY=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.edgeID=null,this.nodeID=null,this.weightName=null,this.returnFeatures=!0,this.isUncertainDirectionValid=!0,this.traceType=null,this.withIndex=null,W.extend(this,e),this.CLASS_NAME="SuperMap.TraceAnalystParameters"},(e=[{key:"destroy",value:function(){var t=this;t.edgeID=null,t.nodeID=null,t.weightName=null,t.returnFeatures=null,t.isUncertainDirectionValid=null,t.type=null,t.withIndex=null}}])&&JY(t.prototype,e),r&&JY(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function ZY(t){"@babel/helpers - typeof";return(ZY="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function $Y(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,tX(n.key),n)}}function tX(t){var e=function(t,e){if("object"!=ZY(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=ZY(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ZY(e)?e:e+""}function eX(t,e,r){return e=nX(e),function(t,e){if(e&&("object"===ZY(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],nX(t).constructor):e.apply(t,r))}function rX(){return(rX="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=nX(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function nX(t){return(nX=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function oX(t,e){return(oX=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var iX=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=eX(this,e,[t,r])).CLASS_NAME="SuperMap.TraceAnalystService",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&oX(t,e)}(e,nY),r=e,(n=[{key:"destroy",value:function(){rX(nX(e.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){if(t instanceof QY){var r,n=this;if(0===t.traceType)n.url=W.urlPathAppend(n.url,"traceup");else{if(1!==t.traceType)return;n.url=W.urlPathAppend(n.url,"tracedown")}if(r={weightName:t.weightName,isUncertainDirectionValid:t.isUncertainDirectionValid,returnFeatures:t.returnFeatures},!(null!==t.edgeID&&null!==t.nodeID||null===t.edgeID&&null===t.nodeID))return null!==t.edgeID?r.edgeID=t.edgeID:r.nodeID=t.nodeID,n.request({method:"GET",params:r,scope:n,success:e,failure:e})}}},{key:"toGeoJSONResult",value:function(t){if(!t)return null;var e=new Kn;return t.edgesFeatures&&(t.edgesFeatures=e.toGeoJSON(t.edgesFeatures)),t.nodesFeatures&&(t.nodesFeatures=e.toGeoJSON(t.nodesFeatures)),t}}])&&$Y(r.prototype,n),o&&$Y(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function aX(t){"@babel/helpers - typeof";return(aX="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function sX(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,uX(n.key),n)}}function uX(t){var e=function(t,e){if("object"!=aX(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=aX(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==aX(e)?e:e+""}var lX=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.connected=null,this.returnFeatures=!0,this.edgeIDs=null,this.nodeIDs=null,this.withIndex=null,W.extend(this,e),this.CLASS_NAME="SuperMap.ConnectedEdgesAnalystParameters"},(e=[{key:"destroy",value:function(){var t=this;t.edgeIDs=null,t.nodeIDs=null,t.connected=null,t.returnFeatures=null,t.withIndex=null}}])&&sX(t.prototype,e),r&&sX(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function cX(t){"@babel/helpers - typeof";return(cX="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function fX(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,hX(n.key),n)}}function hX(t){var e=function(t,e){if("object"!=cX(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=cX(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==cX(e)?e:e+""}function pX(t,e,r){return e=yX(e),function(t,e){if(e&&("object"===cX(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],yX(t).constructor):e.apply(t,r))}function dX(){return(dX="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=yX(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function yX(t){return(yX=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function vX(t,e){return(vX=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var gX=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=pX(this,e,[t,r])).CLASS_NAME="SuperMap.ConnectedEdgesAnalystService",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&vX(t,e)}(e,nY),r=e,(n=[{key:"destroy",value:function(){dX(yX(e.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){if(t instanceof lX){var r;if(this.url=W.urlPathAppend(this.url,"connectededges"),r={connected:t.connected,returnFeatures:t.returnFeatures},!(null!==t.edgeIDs&&null!==t.nodeIDs||null===t.edgeIDs&&null===t.nodeIDs))return null!==t.edgeIDs?r.edgeIDs=t.edgeIDs:r.nodeIDs=t.nodeIDs,this.request({method:"GET",params:r,scope:this,success:e,failure:e})}}},{key:"toGeoJSONResult",value:function(t){if(!t)return null;var e=new Kn;return t.edgesFeatures&&(t.edgesFeatures=e.toGeoJSON(t.edgesFeatures)),t.nodesFeatures&&(t.nodesFeatures=e.toGeoJSON(t.nodesFeatures)),t}}])&&fX(r.prototype,n),o&&fX(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function mX(t){"@babel/helpers - typeof";return(mX="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function bX(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,wX(n.key),n)}}function wX(t){var e=function(t,e){if("object"!=mX(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=mX(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==mX(e)?e:e+""}var SX=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.event=null,this.expectFacilityCount=1,this.facilities=null,this.fromEvent=!1,this.isAnalyzeById=!1,this.maxWeight=0,this.parameter=new _Y,W.extend(this,e),this.CLASS_NAME="SuperMap.FindClosestFacilitiesParameters"},(e=[{key:"destroy",value:function(){var t=this;t.event=null,t.expectFacilityCount=null,t.facilities=null,t.fromEvent=null,t.isAnalyzeById=null,t.maxWeight=null,t.parameter&&(t.parameter.destroy(),t.parameter=null)}}])&&bX(t.prototype,e),r&&bX(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function xX(t){"@babel/helpers - typeof";return(xX="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _X(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,EX(n.key),n)}}function EX(t){var e=function(t,e){if("object"!=xX(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=xX(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==xX(e)?e:e+""}function OX(t,e,r){return e=kX(e),function(t,e){if(e&&("object"===xX(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],kX(t).constructor):e.apply(t,r))}function PX(){return(PX="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=kX(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function kX(t){return(kX=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function CX(t,e){return(CX=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var TX=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=OX(this,e,[t,r])).CLASS_NAME="SuperMap.FindClosestFacilitiesService",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&CX(t,e)}(e,nY),r=e,(n=[{key:"destroy",value:function(){PX(kX(e.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){if(t instanceof SX){var r,n=this;return n.url=W.urlPathAppend(n.url,"closestfacility"),r={expectFacilityCount:t.expectFacilityCount,fromEvent:t.fromEvent,maxWeight:t.maxWeight,parameter:W.toJSON(t.parameter),event:W.toJSON(t.event),facilities:n.getJson(t.isAnalyzeById,t.facilities)},n.request({method:"GET",params:r,scope:n,success:e,failure:e})}}},{key:"getJson",value:function(t,e){var r="[",n=e?e.length:0;if(!1===t)for(var o=0;o<n;o++)o>0&&(r+=","),r+='{"x":'+e[o].x+',"y":'+e[o].y+"}";else if(!0===t)for(var i=0;i<n;i++)i>0&&(r+=","),r+=e[i];return r+="]"}},{key:"toGeoJSONResult",value:function(t){if(!t||!t.facilityPathList)return t;var e=new Kn;return t.facilityPathList.map(function(t){return t.route&&(t.route=e.toGeoJSON(t.route)),t.pathGuideItems&&(t.pathGuideItems=e.toGeoJSON(t.pathGuideItems)),t.edgeFeatures&&(t.edgeFeatures=e.toGeoJSON(t.edgeFeatures)),t.nodeFeatures&&(t.nodeFeatures=e.toGeoJSON(t.nodeFeatures)),t}),t}}])&&_X(r.prototype,n),o&&_X(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function AX(t){"@babel/helpers - typeof";return(AX="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function MX(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,jX(n.key),n)}}function jX(t){var e=function(t,e){if("object"!=AX(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=AX(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==AX(e)?e:e+""}var IX=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.expectedSupplyCenterCount=null,this.isFromCenter=!1,this.supplyCenters=null,this.turnWeightField=null,this.weightName=null,W.extend(this,e),this.CLASS_NAME="SuperMap.FindLocationParameters"},(e=[{key:"destroy",value:function(){var t=this;if(t.expectedSupplyCenterCount=null,t.isFromCenter=null,t.turnWeightField=null,t.weightName=null,t.supplyCenters){for(var e=0,r=t.supplyCenters,n=r.length;e<n;e++)r[e].destroy();t.supplyCenters=null}}}])&&MX(t.prototype,e),r&&MX(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function NX(t){"@babel/helpers - typeof";return(NX="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function LX(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,RX(n.key),n)}}function RX(t){var e=function(t,e){if("object"!=NX(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=NX(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==NX(e)?e:e+""}function DX(t,e,r){return e=FX(e),function(t,e){if(e&&("object"===NX(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],FX(t).constructor):e.apply(t,r))}function BX(){return(BX="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=FX(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function FX(t){return(FX=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function GX(t,e){return(GX=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var UX=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=DX(this,e,[t,r])).CLASS_NAME="SuperMap.FindLocationService",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&GX(t,e)}(e,nY),r=e,(n=[{key:"destroy",value:function(){BX(FX(e.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){if(t instanceof IX){var r,n=this;return n.url=W.urlPathAppend(n.url,"location"),r={isFromCenter:t.isFromCenter,expectedSupplyCenterCount:t.expectedSupplyCenterCount,weightName:t.weightName,turnWeightField:t.turnWeightField,returnEdgeFeature:!0,returnEdgeGeometry:!0,returnNodeFeature:!0,mapParameter:W.toJSON(t.mapParameter),supplyCenters:n.getCentersJson(t.supplyCenters)},n.request({method:"GET",params:r,scope:n,success:e,failure:e})}}},{key:"getCentersJson",value:function(t){for(var e="[",r=t?t.length:0,n=0;n<r;n++)n>0&&(e+=","),e+=W.toJSON(t[n]);return e+="]"}},{key:"toGeoJSONResult",value:function(t){if(!t)return null;var e=new Kn;return t.demandResults&&(t.demandResults=e.toGeoJSON(t.demandResults)),t.supplyResults&&(t.supplyResults=e.toGeoJSON(t.supplyResults)),t}}])&&LX(r.prototype,n),o&&LX(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function zX(t){"@babel/helpers - typeof";return(zX="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function VX(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,HX(n.key),n)}}function HX(t){var e=function(t,e){if("object"!=zX(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=zX(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==zX(e)?e:e+""}var WX=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.centers=null,this.hasLeastTotalCost=!1,this.isAnalyzeById=!1,this.nodes=null,this.parameter=new _Y,W.extend(this,e),this.CLASS_NAME="SuperMap.FindMTSPPathsParameters"},(e=[{key:"destroy",value:function(){var t=this;t.centers=null,t.hasLeastTotalCost=null,t.isAnalyzeById=null,t.nodes=null,t.maxWeight=null,t.parameter&&(t.parameter.destroy(),t.parameter=null)}}])&&VX(t.prototype,e),r&&VX(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function qX(t){"@babel/helpers - typeof";return(qX="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function YX(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,XX(n.key),n)}}function XX(t){var e=function(t,e){if("object"!=qX(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=qX(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==qX(e)?e:e+""}function JX(t,e,r){return e=QX(e),function(t,e){if(e&&("object"===qX(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],QX(t).constructor):e.apply(t,r))}function KX(){return(KX="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=QX(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function QX(t){return(QX=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ZX(t,e){return(ZX=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var $X=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=JX(this,e,[t,r])).CLASS_NAME="SuperMap.FindMTSPPathsService",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ZX(t,e)}(e,nY),r=e,(n=[{key:"destroy",value:function(){KX(QX(e.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){if(t instanceof WX){var r,n=this,o=n.getJson(t.isAnalyzeById,t.centers),i=n.getJson(t.isAnalyzeById,t.nodes);return n.url=W.urlPathAppend(n.url,"mtsppath"),r={centers:o,nodes:i,parameter:W.toJSON(t.parameter),hasLeastTotalCost:t.hasLeastTotalCost},n.request({method:"GET",params:r,scope:n,success:e,failure:e})}}},{key:"getJson",value:function(t,e){var r="[",n=e?e.length:0;if(!1===t)for(var o=0;o<n;o++)o>0&&(r+=","),r+='{"x":'+e[o].x+',"y":'+e[o].y+"}";else if(!0===t)for(var i=0;i<n;i++)i>0&&(r+=","),r+=e[i];return r+="]"}},{key:"toGeoJSONResult",value:function(t){if(!t||!t.pathList)return null;var e=new Kn;return t.pathList.map(function(t){return t.route&&(t.route=e.toGeoJSON(t.route)),t.pathGuideItems&&(t.pathGuideItems=e.toGeoJSON(t.pathGuideItems)),t.edgeFeatures&&(t.edgeFeatures=e.toGeoJSON(t.edgeFeatures)),t.nodeFeatures&&(t.nodeFeatures=e.toGeoJSON(t.nodeFeatures)),t}),t}}])&&YX(r.prototype,n),o&&YX(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function tJ(t){"@babel/helpers - typeof";return(tJ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function eJ(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,rJ(n.key),n)}}function rJ(t){var e=function(t,e){if("object"!=tJ(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=tJ(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==tJ(e)?e:e+""}var nJ=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.isAnalyzeById=!1,this.hasLeastEdgeCount=null,this.nodes=null,this.parameter=new _Y,W.extend(this,e),this.CLASS_NAME="SuperMap.FindPathParameters"},(e=[{key:"destroy",value:function(){var t=this;t.isAnalyzeById=null,t.hasLeastEdgeCount=null,t.nodes=null,t.parameter&&(t.parameter.destroy(),t.parameter=null)}}])&&eJ(t.prototype,e),r&&eJ(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function oJ(t){"@babel/helpers - typeof";return(oJ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function iJ(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,aJ(n.key),n)}}function aJ(t){var e=function(t,e){if("object"!=oJ(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=oJ(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==oJ(e)?e:e+""}function sJ(t,e,r){return e=lJ(e),function(t,e){if(e&&("object"===oJ(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],lJ(t).constructor):e.apply(t,r))}function uJ(){return(uJ="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=lJ(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function lJ(t){return(lJ=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function cJ(t,e){return(cJ=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var fJ=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=sJ(this,e,[t,r])).CLASS_NAME="SuperMap.FindPathService",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&cJ(t,e)}(e,nY),r=e,(n=[{key:"destroy",value:function(){uJ(lJ(e.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){if(t instanceof nJ){var r,n=this;return n.url=W.urlPathAppend(n.url,"path"),r={hasLeastEdgeCount:t.hasLeastEdgeCount,parameter:W.toJSON(t.parameter),nodes:n.getJson(t.isAnalyzeById,t.nodes)},n.request({method:"GET",params:r,scope:n,success:e,failure:e})}}},{key:"getJson",value:function(t,e){var r="[",n=e?e.length:0;if(!1===t)for(var o=0;o<n;o++)o>0&&(r+=","),r+='{"x":'+e[o].x+',"y":'+e[o].y+"}";else if(!0===t)for(var i=0;i<n;i++)i>0&&(r+=","),r+=e[i];return r+="]"}},{key:"toGeoJSONResult",value:function(t){if(!t||!t.pathList||t.pathList.length<1)return null;var e=new Kn;return t.pathList.forEach(function(t){t.route&&(t.route=e.toGeoJSON(t.route)),t.pathGuideItems&&(t.pathGuideItems=e.toGeoJSON(t.pathGuideItems)),t.edgeFeatures&&(t.edgeFeatures=e.toGeoJSON(t.edgeFeatures)),t.nodeFeatures&&(t.nodeFeatures=e.toGeoJSON(t.nodeFeatures))}),t}}])&&iJ(r.prototype,n),o&&iJ(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function hJ(t){"@babel/helpers - typeof";return(hJ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function pJ(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,dJ(n.key),n)}}function dJ(t){var e=function(t,e){if("object"!=hJ(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=hJ(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==hJ(e)?e:e+""}var yJ=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.isAnalyzeById=!1,this.isCenterMutuallyExclusive=!1,this.centers=null,this.isFromCenter=!1,this.weights=null,this.parameter=new _Y,W.extend(this,e),this.CLASS_NAME="SuperMap.FindServiceAreasParameters"},(e=[{key:"destroy",value:function(){var t=this;t.isAnalyzeById=null,t.isCenterMutuallyExclusive=null,t.centers=null,t.isFromCenter=null,t.weights=null,t.parameter&&(t.parameter.destroy(),t.parameter=null)}}])&&pJ(t.prototype,e),r&&pJ(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function vJ(t){"@babel/helpers - typeof";return(vJ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function gJ(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,mJ(n.key),n)}}function mJ(t){var e=function(t,e){if("object"!=vJ(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=vJ(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==vJ(e)?e:e+""}function bJ(t,e,r){return e=SJ(e),function(t,e){if(e&&("object"===vJ(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],SJ(t).constructor):e.apply(t,r))}function wJ(){return(wJ="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=SJ(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function SJ(t){return(SJ=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function xJ(t,e){return(xJ=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var _J=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=bJ(this,e,[t,r])).CLASS_NAME="SuperMap.FindServiceAreasService",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&xJ(t,e)}(e,nY),r=e,(n=[{key:"destroy",value:function(){wJ(SJ(e.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){if(t instanceof yJ){var r,n=this;return n.url=W.urlPathAppend(n.url,"servicearea"),r={isFromCenter:t.isFromCenter,isCenterMutuallyExclusive:t.isCenterMutuallyExclusive,parameter:W.toJSON(t.parameter),centers:n.getJson(t.isAnalyzeById,t.centers),weights:n.getJson(!0,t.weights)},n.request({method:"GET",params:r,scope:n,success:e,failure:e})}}},{key:"getJson",value:function(t,e){var r="[",n=e?e.length:0;if(!1===t)for(var o=0;o<n;o++)o>0&&(r+=","),r+='{"x":'+e[o].x+',"y":'+e[o].y+"}";else if(!0===t)for(var i=0;i<n;i++)i>0&&(r+=","),r+=e[i];return r+="]"}},{key:"toGeoJSONResult",value:function(t){if(!t||!t.serviceAreaList)return t;var e=new Kn;return t.serviceAreaList.map(function(t){return t.serviceRegion&&(t.serviceRegion=e.toGeoJSON(t.serviceRegion)),t.edgeFeatures&&(t.edgeFeatures=e.toGeoJSON(t.edgeFeatures)),t.nodeFeatures&&(t.nodeFeatures=e.toGeoJSON(t.nodeFeatures)),t.routes&&(t.routes=e.toGeoJSON(t.routes)),t}),t}}])&&gJ(r.prototype,n),o&&gJ(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function EJ(t){"@babel/helpers - typeof";return(EJ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function OJ(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,PJ(n.key),n)}}function PJ(t){var e=function(t,e){if("object"!=EJ(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=EJ(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==EJ(e)?e:e+""}var kJ=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.endNodeAssigned=!1,this.isAnalyzeById=!1,this.nodes=null,this.parameter=new _Y,W.extend(this,e),this.CLASS_NAME="SuperMap.FindTSPPathsParameters"},(e=[{key:"destroy",value:function(){var t=this;t.endNodeAssigned=null,t.isAnalyzeById=null,t.nodes=null,t.parameter&&(t.parameter.destroy(),t.parameter=null)}}])&&OJ(t.prototype,e),r&&OJ(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function CJ(t){"@babel/helpers - typeof";return(CJ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function TJ(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,AJ(n.key),n)}}function AJ(t){var e=function(t,e){if("object"!=CJ(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=CJ(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==CJ(e)?e:e+""}function MJ(t,e,r){return e=IJ(e),function(t,e){if(e&&("object"===CJ(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],IJ(t).constructor):e.apply(t,r))}function jJ(){return(jJ="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=IJ(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function IJ(t){return(IJ=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function NJ(t,e){return(NJ=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var LJ=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=MJ(this,e,[t,r])).CLASS_NAME="SuperMap.FindTSPPathsService",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&NJ(t,e)}(e,nY),r=e,(n=[{key:"destroy",value:function(){jJ(IJ(e.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){if(t instanceof kJ){var r,n=this;return n.url=W.urlPathAppend(n.url,"tsppath"),r={parameter:W.toJSON(t.parameter),endNodeAssigned:t.endNodeAssigned,nodes:n.getNodesJson(t)},n.request({method:"GET",params:r,scope:n,success:e,failure:e})}}},{key:"getNodesJson",value:function(t){var e,r,n,o,i="";if(!1===t.isAnalyzeById){for(e="[",r=0,n=(o=t.nodes).length;r<n;r++)r>0&&(e+=","),e+='{"x":'+o[r].x+',"y":'+o[r].y+"}";i+=e+="]"}else if(!0===t.isAnalyzeById){for(var a="[",s=t.nodes,u=s.length,l=0;l<u;l++)l>0&&(a+=","),a+=s[l];i+=a+="]"}return i}},{key:"toGeoJSONResult",value:function(t){if(!t||!t.tspPathList)return null;var e=new Kn;return t.tspPathList.forEach(function(t){t.route&&(t.route=e.toGeoJSON(t.route)),t.pathGuideItems&&(t.pathGuideItems=e.toGeoJSON(t.pathGuideItems)),t.edgeFeatures&&(t.edgeFeatures=e.toGeoJSON(t.edgeFeatures)),t.nodeFeatures&&(t.nodeFeatures=e.toGeoJSON(t.nodeFeatures))}),t}}])&&TJ(r.prototype,n),o&&TJ(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function RJ(t){"@babel/helpers - typeof";return(RJ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function DJ(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,BJ(n.key),n)}}function BJ(t){var e=function(t,e){if("object"!=RJ(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=RJ(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==RJ(e)?e:e+""}var FJ=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e&&(this.edgeId="",this.fromNodeId="",this.toNodeId="",this.weightField="",this.edgeWeight="",W.extend(this,e),this.CLASS_NAME="SuperMap.UpdateEdgeWeightParameters")},(e=[{key:"destroy",value:function(){this.edgeId=null,this.fromNodeId=null,this.toNodeId=null,this.weightField=null,this.edgeWeight=null}}])&&DJ(t.prototype,e),r&&DJ(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function GJ(t){"@babel/helpers - typeof";return(GJ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function UJ(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,zJ(n.key),n)}}function zJ(t){var e=function(t,e){if("object"!=GJ(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=GJ(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==GJ(e)?e:e+""}function VJ(t,e,r){return e=WJ(e),function(t,e){if(e&&("object"===GJ(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],WJ(t).constructor):e.apply(t,r))}function HJ(){return(HJ="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=WJ(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function WJ(t){return(WJ=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function qJ(t,e){return(qJ=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var YJ=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=VJ(this,e,[t,r])).CLASS_NAME="SuperMap.UpdateEdgeWeightService",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&qJ(t,e)}(e,nY),r=e,(n=[{key:"destroy",value:function(){HJ(WJ(e.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){if(t instanceof FJ){var r=this,n=r.parse(t);r.url=W.urlPathAppend(r.url,n);var o=t.edgeWeight?t.edgeWeight:null;return r.request({method:"PUT",scope:r,data:o,success:e,failure:e})}}},{key:"parse",value:function(t){if(t){var e="";for(var r in t)if(""!==t[r]&&"edgeWeight"!==t[r])switch(r){case"edgeId":e+="/edgeweight/"+t[r];break;case"fromNodeId":e+="/fromnode/"+t[r];break;case"toNodeId":e+="/tonode/"+t[r];break;case"weightField":e+="/weightfield/"+t[r]}return e}}}])&&UJ(r.prototype,n),o&&UJ(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function XJ(t){"@babel/helpers - typeof";return(XJ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function JJ(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,KJ(n.key),n)}}function KJ(t){var e=function(t,e){if("object"!=XJ(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=XJ(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==XJ(e)?e:e+""}var QJ=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e&&(this.nodeId="",this.fromEdgeId="",this.toEdgeId="",this.weightField="",this.turnNodeWeight="",W.extend(this,e),this.CLASS_NAME="SuperMap.UpdateTurnNodeWeightParameters")},(e=[{key:"destroy",value:function(){this.nodeId=null,this.fromEdgeId=null,this.toEdgeId=null,this.weightField=null,this.turnNodeWeight=null}}])&&JJ(t.prototype,e),r&&JJ(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function ZJ(t){"@babel/helpers - typeof";return(ZJ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function $J(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,tK(n.key),n)}}function tK(t){var e=function(t,e){if("object"!=ZJ(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=ZJ(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ZJ(e)?e:e+""}function eK(t,e,r){return e=nK(e),function(t,e){if(e&&("object"===ZJ(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],nK(t).constructor):e.apply(t,r))}function rK(){return(rK="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=nK(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function nK(t){return(nK=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function oK(t,e){return(oK=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var iK=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=eK(this,e,[t,r])).CLASS_NAME="SuperMap.UpdateTurnNodeWeightService",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&oK(t,e)}(e,nY),r=e,(n=[{key:"destroy",value:function(){rK(nK(e.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){if(t instanceof QJ){var r=this,n=r.parse(t);r.url=W.urlPathAppend(r.url,n);var o=t.turnNodeWeight?t.turnNodeWeight:null;return r.request({method:"PUT",scope:r,data:o,success:e,failure:e})}}},{key:"parse",value:function(t){if(t){var e="";for(var r in t)if(""!==t[r]&&"turnNodeWeight"!==t[r])switch(r){case"nodeId":e+="/turnnodeweight/"+t[r];break;case"fromEdgeId":e+="/fromedge/"+t[r];break;case"toEdgeId":e+="/toedge/"+t[r];break;case"weightField":e+="/weightfield/"+t[r]}return e}}}])&&$J(r.prototype,n),o&&$J(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function aK(t){"@babel/helpers - typeof";return(aK="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function sK(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,uK(n.key),n)}}function uK(t){var e=function(t,e){if("object"!=aK(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=aK(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==aK(e)?e:e+""}var lK=function(){return t=function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.url=e,this.options=r||{}},(e=[{key:"burstPipelineAnalyst",value:function(t,e){var r=this;return new yY(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers}).processAsync(t,e)}},{key:"computeWeightMatrix",value:function(t,e){var r=this;return new LY(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers}).processAsync(t,e)}},{key:"findClosestFacilities",value:function(t,e,r){var n=this;return new TX(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(t,e)}},{key:"traceAnalyst",value:function(t,e,r){var n=this;return new iX(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(t,e)}},{key:"connectedEdgesAnalyst",value:function(t,e,r){var n=this;return new gX(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(t,e)}},{key:"streamFacilityAnalyst",value:function(t,e,r){var n=this;return new YY(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(t,e)}},{key:"findLocation",value:function(t,e,r){var n=this;return new UX(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(t,e)}},{key:"findPath",value:function(t,e,r){var n=this;return new fJ(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(t,e)}},{key:"findTSPPaths",value:function(t,e,r){var n=this;return new LJ(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(t,e)}},{key:"findMTSPPaths",value:function(t,e,r){var n=this;return new $X(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(t,e)}},{key:"findServiceAreas",value:function(t,e,r){var n=this;return new _J(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(t,e)}},{key:"updateEdgeWeight",value:function(t,e){var r=this;return new YJ(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers}).processAsync(t,e)}},{key:"updateTurnNodeWeight",value:function(t,e){var r=this;return new iK(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers}).processAsync(t,e)}},{key:"_processFormat",value:function(t){return t||Jr.GEOJSON}}])&&sK(t.prototype,e),r&&sK(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function cK(t){"@babel/helpers - typeof";return(cK="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function fK(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,hK(n.key),n)}}function hK(t){var e=function(t,e){if("object"!=cK(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=cK(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==cK(e)?e:e+""}function pK(t,e,r){return e=dK(e),function(t,e){if(e&&("object"===cK(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],dK(t).constructor):e.apply(t,r))}function dK(t){return(dK=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function yK(t,e){return(yK=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var vK=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=pK(this,e,[t,r]))._networkAnalystService=new lK(t,r),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&yK(t,e)}(e,uv),r=e,(n=[{key:"burstPipelineAnalyst",value:function(t,e){return t=this._processParams(t),this._networkAnalystService.burstPipelineAnalyst(t,e)}},{key:"computeWeightMatrix",value:function(t,e){return t=this._processParams(t),this._networkAnalystService.computeWeightMatrix(t,e)}},{key:"findClosestFacilities",value:function(t,e,r){return t=this._processParams(t),this._networkAnalystService.findClosestFacilities(t,e,r)}},{key:"traceAnalyst",value:function(t,e,r){return t=this._processParams(t),this._networkAnalystService.traceAnalyst(t,e,r)}},{key:"connectedEdgesAnalyst",value:function(t,e,r){return t=this._processParams(t),this._networkAnalystService.connectedEdgesAnalyst(t,e,r)}},{key:"streamFacilityAnalyst",value:function(t,e,r){return t=this._processParams(t),this._networkAnalystService.streamFacilityAnalyst(t,e,r)}},{key:"findLocation",value:function(t,e,r){return t=this._processParams(t),this._networkAnalystService.findLocation(t,e,r)}},{key:"findPath",value:function(t,e,r){return t=this._processParams(t),this._networkAnalystService.findPath(t,e,r)}},{key:"findTSPPaths",value:function(t,e,r){return t=this._processParams(t),this._networkAnalystService.findTSPPaths(t,e,r)}},{key:"findMTSPPaths",value:function(t,e,r){return t=this._processParams(t),this._networkAnalystService.findMTSPPaths(t,e,r)}},{key:"findServiceAreas",value:function(t,e,r){return t=this._processParams(t),this._networkAnalystService.findServiceAreas(t,e,r)}},{key:"updateEdgeWeight",value:function(t,e){return this._networkAnalystService.updateEdgeWeight(t,e)}},{key:"updateTurnNodeWeight",value:function(t,e){return this._networkAnalystService.updateTurnNodeWeight(t,e)}},{key:"_processParams",value:function(t){if(!t)return{};var e=this;if(t.centers&&$n.isArray(t.centers)&&t.centers.map(function(r,n){return t.centers[n]=e._toPointObject(r),t.centers[n]}),t.nodes&&$n.isArray(t.nodes)&&t.nodes.map(function(r,n){return t.nodes[n]=e._toPointObject(r),t.nodes[n]}),t.event&&(t.event=e._toPointObject(t.event)),t.facilities&&$n.isArray(t.facilities)&&t.facilities.map(function(r,n){return t.facilities[n]=e._toPointObject(r),t.facilities[n]}),t.parameter&&t.parameter.barrierPoints){var r=t.parameter.barrierPoints;$n.isArray(r)?r.map(function(r,n){return t.parameter[n]=e._toPointObject(r),t.parameter.barrierPoints[n]}):t.parameter.barrierPoints=[r instanceof w().LngLat?{x:r.lng,y:r.lat}:r]}return t}},{key:"_toPointObject",value:function(t){return $n.isArray(t)?{x:t[0],y:t[1]}:t instanceof w().LngLat?{x:t.lng,y:t.lat}:t instanceof w().Point?{x:t.x,y:t.y}:t}},{key:"_processFormat",value:function(t){return t||Jr.GEOJSON}}])&&fK(r.prototype,n),o&&fK(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function gK(t){"@babel/helpers - typeof";return(gK="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function mK(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,bK(n.key),n)}}function bK(t){var e=function(t,e){if("object"!=gK(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=gK(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==gK(e)?e:e+""}var wK=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.edgeID=null,this.nodeID=null,this.weightName=null,this.isUncertainDirectionValid=!1,W.extend(this,e),this.CLASS_NAME="SuperMap.FacilityAnalyst3DParameters"},(e=[{key:"destroy",value:function(){this.edgeID=null,this.nodeID=null,this.weightName=null,this.isUncertainDirectionValid=null}}])&&mK(t.prototype,e),r&&mK(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function SK(t){"@babel/helpers - typeof";return(SK="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function xK(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,_K(n.key),n)}}function _K(t){var e=function(t,e){if("object"!=SK(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=SK(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==SK(e)?e:e+""}function EK(t,e,r){return e=PK(e),function(t,e){if(e&&("object"===SK(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],PK(t).constructor):e.apply(t,r))}function OK(){return(OK="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=PK(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function PK(t){return(PK=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function kK(t,e){return(kK=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var CK=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=EK(this,e,[t])).CLASS_NAME="SuperMap.FacilityAnalystSinks3DParameters",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&kK(t,e)}(e,wK),r=e,(n=[{key:"destroy",value:function(){OK(PK(e.prototype),"destroy",this).call(this)}}])&&xK(r.prototype,n),o&&xK(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function TK(t){"@babel/helpers - typeof";return(TK="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function AK(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,MK(n.key),n)}}function MK(t){var e=function(t,e){if("object"!=TK(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=TK(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==TK(e)?e:e+""}function jK(t,e,r){return e=IK(e),function(t,e){if(e&&("object"===TK(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],IK(t).constructor):e.apply(t,r))}function IK(t){return(IK=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function NK(t,e){return(NK=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var LK=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=jK(this,e,[t,r])).CLASS_NAME="SuperMap.FacilityAnalystSinks3DService",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&NK(t,e)}(e,bv),r=e,(n=[{key:"destroy",value:function(){bv.prototype.destroy.apply(this,arguments)}},{key:"processAsync",value:function(t,e){if(t instanceof CK){var r;return this.url=W.urlPathAppend(this.url,"sinks"),r={edgeID:t.edgeID,nodeID:t.nodeID,weightName:t.weightName,isUncertainDirectionValid:t.isUncertainDirectionValid},this.request({method:"GET",params:r,scope:this,success:e,failure:e})}}}])&&AK(r.prototype,n),o&&AK(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function RK(t){"@babel/helpers - typeof";return(RK="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function DK(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,BK(n.key),n)}}function BK(t){var e=function(t,e){if("object"!=RK(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=RK(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==RK(e)?e:e+""}function FK(t,e,r){return e=UK(e),function(t,e){if(e&&("object"===RK(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],UK(t).constructor):e.apply(t,r))}function GK(){return(GK="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=UK(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function UK(t){return(UK=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function zK(t,e){return(zK=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var VK=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=FK(this,e,[t])).CLASS_NAME="SuperMap.FacilityAnalystSources3DParameters",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&zK(t,e)}(e,wK),r=e,(n=[{key:"destroy",value:function(){GK(UK(e.prototype),"destroy",this).call(this)}}])&&DK(r.prototype,n),o&&DK(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function HK(t){"@babel/helpers - typeof";return(HK="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function WK(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,qK(n.key),n)}}function qK(t){var e=function(t,e){if("object"!=HK(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=HK(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==HK(e)?e:e+""}function YK(t,e,r){return e=JK(e),function(t,e){if(e&&("object"===HK(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],JK(t).constructor):e.apply(t,r))}function XK(){return(XK="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=JK(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function JK(t){return(JK=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function KK(t,e){return(KK=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var QK=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=YK(this,e,[t,r])).CLASS_NAME="SuperMap.FacilityAnalystSources3DService",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&KK(t,e)}(e,bv),r=e,(n=[{key:"destroy",value:function(){XK(JK(e.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){if(t instanceof VK){var r;return this.url=W.urlPathAppend(this.url,"sources"),r={edgeID:t.edgeID,nodeID:t.nodeID,weightName:t.weightName,isUncertainDirectionValid:t.isUncertainDirectionValid},this.request({method:"GET",params:r,scope:this,success:e,failure:e})}}}])&&WK(r.prototype,n),o&&WK(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function ZK(t){"@babel/helpers - typeof";return(ZK="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function $K(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,tQ(n.key),n)}}function tQ(t){var e=function(t,e){if("object"!=ZK(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=ZK(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ZK(e)?e:e+""}function eQ(t,e,r){return e=nQ(e),function(t,e){if(e&&("object"===ZK(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],nQ(t).constructor):e.apply(t,r))}function rQ(){return(rQ="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=nQ(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function nQ(t){return(nQ=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function oQ(t,e){return(oQ=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var iQ=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=eQ(this,e,[t])).CLASS_NAME="SuperMap.FacilityAnalystTraceup3DParameters",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&oQ(t,e)}(e,wK),r=e,(n=[{key:"destroy",value:function(){rQ(nQ(e.prototype),"destroy",this).call(this)}}])&&$K(r.prototype,n),o&&$K(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function aQ(t){"@babel/helpers - typeof";return(aQ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function sQ(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,uQ(n.key),n)}}function uQ(t){var e=function(t,e){if("object"!=aQ(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=aQ(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==aQ(e)?e:e+""}function lQ(t,e,r){return e=fQ(e),function(t,e){if(e&&("object"===aQ(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],fQ(t).constructor):e.apply(t,r))}function cQ(){return(cQ="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=fQ(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function fQ(t){return(fQ=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function hQ(t,e){return(hQ=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var pQ=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=lQ(this,e,[t,r])).CLASS_NAME="SuperMap.FacilityAnalystTraceup3DService",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&hQ(t,e)}(e,bv),r=e,(n=[{key:"destroy",value:function(){cQ(fQ(e.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){if(t instanceof iQ){var r;return this.url=W.urlPathAppend(this.url,"traceupresult"),r={edgeID:t.edgeID,nodeID:t.nodeID,weightName:t.weightName,isUncertainDirectionValid:t.isUncertainDirectionValid},this.request({method:"GET",params:r,scope:this,success:e,failure:e})}}}])&&sQ(r.prototype,n),o&&sQ(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function dQ(t){"@babel/helpers - typeof";return(dQ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function yQ(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,vQ(n.key),n)}}function vQ(t){var e=function(t,e){if("object"!=dQ(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=dQ(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==dQ(e)?e:e+""}function gQ(t,e,r){return e=bQ(e),function(t,e){if(e&&("object"===dQ(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],bQ(t).constructor):e.apply(t,r))}function mQ(){return(mQ="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=bQ(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function bQ(t){return(bQ=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function wQ(t,e){return(wQ=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var SQ=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=gQ(this,e,[t])).CLASS_NAME="SuperMap.FacilityAnalystTracedown3DParameters",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&wQ(t,e)}(e,wK),r=e,(n=[{key:"destroy",value:function(){mQ(bQ(e.prototype),"destroy",this).call(this)}}])&&yQ(r.prototype,n),o&&yQ(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function xQ(t){"@babel/helpers - typeof";return(xQ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _Q(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,EQ(n.key),n)}}function EQ(t){var e=function(t,e){if("object"!=xQ(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=xQ(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==xQ(e)?e:e+""}function OQ(t,e,r){return e=kQ(e),function(t,e){if(e&&("object"===xQ(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],kQ(t).constructor):e.apply(t,r))}function PQ(){return(PQ="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=kQ(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function kQ(t){return(kQ=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function CQ(t,e){return(CQ=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var TQ=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=OQ(this,e,[t,r])).CLASS_NAME="SuperMap.FacilityAnalystTracedown3DService",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&CQ(t,e)}(e,bv),r=e,(n=[{key:"destroy",value:function(){PQ(kQ(e.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){if(t instanceof SQ){var r;return this.url=W.urlPathAppend(this.url,"tracedownresult"),r={edgeID:t.edgeID,nodeID:t.nodeID,weightName:t.weightName,isUncertainDirectionValid:t.isUncertainDirectionValid},this.request({method:"GET",params:r,scope:this,success:e,failure:e})}}}])&&_Q(r.prototype,n),o&&_Q(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function AQ(t){"@babel/helpers - typeof";return(AQ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function MQ(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,jQ(n.key),n)}}function jQ(t){var e=function(t,e){if("object"!=AQ(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=AQ(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==AQ(e)?e:e+""}function IQ(t,e,r){return e=LQ(e),function(t,e){if(e&&("object"===AQ(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],LQ(t).constructor):e.apply(t,r))}function NQ(){return(NQ="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=LQ(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function LQ(t){return(LQ=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function RQ(t,e){return(RQ=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var DQ=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r=IQ(this,e,[t]),t=t||{},r.sourceNodeIDs=null,W.extend(r,t),r.CLASS_NAME="SuperMap.FacilityAnalystUpstream3DParameters",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&RQ(t,e)}(e,wK),r=e,(n=[{key:"destroy",value:function(){NQ(LQ(e.prototype),"destroy",this).call(this),this.sourceNodeIDs=null}}])&&MQ(r.prototype,n),o&&MQ(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function BQ(t){"@babel/helpers - typeof";return(BQ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function FQ(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,GQ(n.key),n)}}function GQ(t){var e=function(t,e){if("object"!=BQ(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=BQ(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==BQ(e)?e:e+""}function UQ(t,e,r){return e=VQ(e),function(t,e){if(e&&("object"===BQ(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],VQ(t).constructor):e.apply(t,r))}function zQ(){return(zQ="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=VQ(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function VQ(t){return(VQ=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function HQ(t,e){return(HQ=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var WQ=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=UQ(this,e,[t,r])).CLASS_NAME="SuperMap.FacilityAnalystUpstream3DService",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&HQ(t,e)}(e,bv),r=e,(n=[{key:"destroy",value:function(){zQ(VQ(e.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){if(t instanceof DQ){var r;return this.url=W.urlPathAppend(this.url,"upstreamcirticalfaclilities"),r={sourceNodeIDs:t.sourceNodeIDs,edgeID:t.edgeID,nodeID:t.nodeID,isUncertainDirectionValid:t.isUncertainDirectionValid},this.request({method:"GET",params:r,scope:this,success:e,failure:e})}}}])&&FQ(r.prototype,n),o&&FQ(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function qQ(t){"@babel/helpers - typeof";return(qQ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function YQ(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,XQ(n.key),n)}}function XQ(t){var e=function(t,e){if("object"!=qQ(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=qQ(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==qQ(e)?e:e+""}var JQ=function(){return t=function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.url=e,this.options=r||{}},(e=[{key:"sinksFacilityAnalyst",value:function(t,e){var r=this;return new LK(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers}).processAsync(t,e)}},{key:"sourcesFacilityAnalyst",value:function(t,e){var r=this;return new QK(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers}).processAsync(t,e)}},{key:"traceUpFacilityAnalyst",value:function(t,e){var r=this;return new pQ(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers}).processAsync(t,e)}},{key:"traceDownFacilityAnalyst",value:function(t,e){var r=this;return new TQ(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers}).processAsync(t,e)}},{key:"upstreamFacilityAnalyst",value:function(t,e){var r=this;return new WQ(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers}).processAsync(t,e)}}])&&YQ(t.prototype,e),r&&YQ(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function KQ(t){"@babel/helpers - typeof";return(KQ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function QQ(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ZQ(n.key),n)}}function ZQ(t){var e=function(t,e){if("object"!=KQ(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=KQ(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==KQ(e)?e:e+""}function $Q(t,e,r){return e=tZ(e),function(t,e){if(e&&("object"===KQ(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],tZ(t).constructor):e.apply(t,r))}function tZ(t){return(tZ=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function eZ(t,e){return(eZ=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var rZ=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=$Q(this,e,[t,r]))._networkAnalyst3DService=new JQ(t,r),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&eZ(t,e)}(e,uv),r=e,(n=[{key:"sinksFacilityAnalyst",value:function(t,e){return this._networkAnalyst3DService.sinksFacilityAnalyst(t,e)}},{key:"sourcesFacilityAnalyst",value:function(t,e){return this._networkAnalyst3DService.sourcesFacilityAnalyst(t,e)}},{key:"traceUpFacilityAnalyst",value:function(t,e){return this._networkAnalyst3DService.traceUpFacilityAnalyst(t,e)}},{key:"traceDownFacilityAnalyst",value:function(t,e){return this._networkAnalyst3DService.traceDownFacilityAnalyst(t,e)}},{key:"upstreamFacilityAnalyst",value:function(t,e){return this._networkAnalyst3DService.upstreamFacilityAnalyst(t,e)}}])&&QQ(r.prototype,n),o&&QQ(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function nZ(t){"@babel/helpers - typeof";return(nZ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function oZ(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,iZ(n.key),n)}}function iZ(t){var e=function(t,e){if("object"!=nZ(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=nZ(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==nZ(e)?e:e+""}function aZ(t,e,r){return e=uZ(e),function(t,e){if(e&&("object"===nZ(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],uZ(t).constructor):e.apply(t,r))}function sZ(){return(sZ="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=uZ(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function uZ(t){return(uZ=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function lZ(t,e){return(lZ=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var cZ=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=aZ(this,e,[t,r=r||{}])).CLASS_NAME="SuperMap.ProcessingServiceBase",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&lZ(t,e)}(e,bv),r=e,(n=[{key:"destroy",value:function(){sZ(uZ(e.prototype),"destroy",this).call(this)}},{key:"getJobs",value:function(t,e){var r=this;return tt.get(hv.appendCredential(t),null,{proxy:r.proxy}).then(function(t){return t.json()}).then(function(t){var n={result:t,object:r,type:"processCompleted"};return e(n),n}).catch(function(t){var n={error:t,object:r,type:"processFailed"};return e(n),n})}},{key:"addJob",value:function(t,e,r,n,o,i){var a=this,s=null;e&&e instanceof r&&(s=new Object,r.toObject(e,s));var u=Object.assign({"Content-Type":"application/x-www-form-urlencoded"},a.headers||{}),l={proxy:a.proxy,headers:u,withCredentials:a.withCredentials,crossOrigin:a.crossOrigin,isInTheSameDomain:a.isInTheSameDomain};return tt.post(hv.appendCredential(t),JSON.stringify(s),l).then(function(t){return t.json()}).then(function(t){return t.succeed?a.transformResult(t,n,o,i):((t=a.transformErrorResult(t)).options=a,t.type="processFailed",o(t),t)}).catch(function(t){return(t=a.transformErrorResult({error:t})).options=a,t.type="processFailed",o(t),t})}},{key:"transformResult",value:function(t,e,r,n){t=W.transformResult(t),e=e||1e3;var o=this;if(t)return new Promise(function(i){var a=setInterval(function(){tt.get(hv.appendCredential(t.newResourceLocation),{_t:(new Date).getTime()}).then(function(t){return t.json()}).then(function(t){if(i({object:o,id:t.id,state:t.state}),n({id:t.id,state:t.state,object:o}),"LOST"===t.state.runState||"KILLED"===t.state.runState||"FAILED"===t.state.runState){clearInterval(a);var e={error:t.state.errorMsg,state:t.state.runState,object:o,type:"processFailed"};i(e),r(e)}if("FINISHED"===t.state.runState&&t.setting.serviceInfo){clearInterval(a);var s={result:t,object:o,type:"processCompleted"};i(s),r(s)}}).catch(function(t){clearInterval(a);var e={error:t,object:o,type:"processFailed"};i(e),r(e)})},e)})}}])&&oZ(r.prototype,n),o&&oZ(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function fZ(t){"@babel/helpers - typeof";return(fZ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function hZ(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,pZ(n.key),n)}}function pZ(t){var e=function(t,e){if("object"!=fZ(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=fZ(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==fZ(e)?e:e+""}var dZ=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.alias=null,this.connect=null,this.dataBase=null,this.driver=null,this.engineType=null,this.exclusive=null,this.OpenLinkTable=null,this.password=null,this.readOnly=null,this.server=null,this.user=null,e&&W.extend(this,e),this.CLASS_NAME="SuperMap.DatasourceConnectionInfo"},(e=[{key:"destroy",value:function(){var t=this;t.alias=null,t.connect=null,t.dataBase=null,t.driver=null,t.engineType=null,t.exclusive=null,t.OpenLinkTable=null,t.password=null,t.readOnly=null,t.server=null,t.user=null}}])&&hZ(t.prototype,e),r&&hZ(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function yZ(t){"@babel/helpers - typeof";return(yZ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function vZ(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,gZ(n.key),n)}}function gZ(t){var e=function(t,e){if("object"!=yZ(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=yZ(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==yZ(e)?e:e+""}var mZ=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.type=vn.UDB,this.datasetName="analystResult",this.datasourceInfo=null,this.outputPath="",W.extend(this,e),this.CLASS_NAME="SuperMap.OutputSetting"},(e=[{key:"destroy",value:function(){var t=this;t.type=null,t.datasetName=null,t.outputPath=null,t.datasourceInfo instanceof dZ&&(t.datasourceInfo.destroy(),t.datasourceInfo=null)}}])&&vZ(t.prototype,e),r&&vZ(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function bZ(t){"@babel/helpers - typeof";return(bZ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function wZ(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,SZ(n.key),n)}}function SZ(t){var e=function(t,e){if("object"!=bZ(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=bZ(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==bZ(e)?e:e+""}var xZ=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.items=null,this.numericPrecision=1,this.rangeMode=un.EQUALINTERVAL,this.rangeCount="",this.colorGradientType=ln.YELLOW_RED,W.extend(this,e),this.CLASS_NAME="SuperMap.MappingParameters"},(e=[{key:"destroy",value:function(){var t=this;if(t.items){if(t.items.length>0)for(var e in t.items)t.items[e].destroy(),t.items[e]=null;t.items=null}t.numericPrecision=null,t.rangeMode=null,t.rangeCount=null,t.colorGradientType=null}}])&&wZ(t.prototype,e),r&&wZ(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function _Z(t){"@babel/helpers - typeof";return(_Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function EZ(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,OZ(n.key),n)}}function OZ(t){var e=function(t,e){if("object"!=_Z(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=_Z(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==_Z(e)?e:e+""}var PZ=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e&&(this.datasetName="",this.query="",this.resolution=80,this.method=0,this.meshType=0,this.fields="",this.radius=300,this.meshSizeUnit=Cn.METER,this.radiusUnit=Cn.METER,this.areaUnit=kn.SQUAREMILE,this.output=null,this.mappingParameters=null,W.extend(this,e),this.CLASS_NAME="SuperMap.KernelDensityJobParameter")},r=[{key:"toObject",value:function(t,e){for(var r in t)"datasetName"!==r?"output"!==r?(e.analyst=e.analyst||{},"query"===r&&t[r]?e.analyst[r]=t[r].toBBOX():e.analyst[r]=t[r],"mappingParameters"===r&&(e.analyst[r]=e.analyst[r]||{},e.analyst.mappingParameters=t[r])):(e.output=e.output||{},e.output=t[r]):(e.input=e.input||{},e.input[r]=t[r])}}],(e=[{key:"destroy",value:function(){this.datasetName=null,this.query=null,this.resolution=null,this.method=null,this.radius=null,this.meshType=null,this.fields=null,this.meshSizeUnit=null,this.radiusUnit=null,this.areaUnit=null,this.output instanceof mZ&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof xZ&&(this.mappingParameters.destroy(),this.mappingParameters=null)}}])&&EZ(t.prototype,e),r&&EZ(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function kZ(t){"@babel/helpers - typeof";return(kZ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function CZ(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,TZ(n.key),n)}}function TZ(t){var e=function(t,e){if("object"!=kZ(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=kZ(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==kZ(e)?e:e+""}function AZ(t,e,r){return e=jZ(e),function(t,e){if(e&&("object"===kZ(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],jZ(t).constructor):e.apply(t,r))}function MZ(){return(MZ="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=jZ(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function jZ(t){return(jZ=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function IZ(t,e){return(IZ=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var NZ=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=AZ(this,e,[t,r])).url=W.urlPathAppend(n.url,"spatialanalyst/density"),n.CLASS_NAME="SuperMap.KernelDensityJobsService",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&IZ(t,e)}(e,cZ),r=e,(n=[{key:"destroy",value:function(){MZ(jZ(e.prototype),"destroy",this).call(this)}},{key:"getKernelDensityJobs",value:function(t){return MZ(jZ(e.prototype),"getJobs",this).call(this,this.url,t)}},{key:"getKernelDensityJob",value:function(t,r){return MZ(jZ(e.prototype),"getJobs",this).call(this,W.urlPathAppend(this.url,t),r)}},{key:"addKernelDensityJob",value:function(t,r,n,o){return MZ(jZ(e.prototype),"addJob",this).call(this,this.url,t,PZ,r,n,o)}}])&&CZ(r.prototype,n),o&&CZ(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function LZ(t){"@babel/helpers - typeof";return(LZ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function RZ(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,DZ(n.key),n)}}function DZ(t){var e=function(t,e){if("object"!=LZ(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=LZ(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==LZ(e)?e:e+""}var BZ=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e&&(this.datasetName="",this.datasetQuery="",this.geometryQuery="",this.mode=$r.CONTAIN,this.output=null,this.mappingParameters=null,W.extend(this,e),this.CLASS_NAME="SuperMap.SingleObjectQueryJobsParameter")},r=[{key:"toObject",value:function(t,e){for(var r in t)"datasetName"!==r?"output"!==r?(e.analyst=e.analyst||{},e.analyst[r]=t[r],"mappingParameters"===r&&(e.analyst[r]=e.analyst[r]||{},e.analyst.mappingParameters=t[r])):(e.output=e.output||{},e.output=t[r]):(e.input=e.input||{},e.input[r]=t[r])}}],(e=[{key:"destroy",value:function(){this.datasetName=null,this.datasetQuery=null,this.geometryQuery=null,this.mode=null,this.output instanceof mZ&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof xZ&&(this.mappingParameters.destroy(),this.mappingParameters=null)}}])&&RZ(t.prototype,e),r&&RZ(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function FZ(t){"@babel/helpers - typeof";return(FZ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function GZ(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,UZ(n.key),n)}}function UZ(t){var e=function(t,e){if("object"!=FZ(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=FZ(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==FZ(e)?e:e+""}function zZ(t,e,r){return e=HZ(e),function(t,e){if(e&&("object"===FZ(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],HZ(t).constructor):e.apply(t,r))}function VZ(){return(VZ="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=HZ(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function HZ(t){return(HZ=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function WZ(t,e){return(WZ=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var qZ=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=zZ(this,e,[t,r])).url=W.urlPathAppend(n.url,"spatialanalyst/query"),n.CLASS_NAME="SuperMap.SingleObjectQueryJobsService",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&WZ(t,e)}(e,cZ),r=e,(n=[{key:"destroy",value:function(){VZ(HZ(e.prototype),"destroy",this).call(this)}},{key:"getQueryJobs",value:function(t){return VZ(HZ(e.prototype),"getJobs",this).call(this,this.url,t)}},{key:"getQueryJob",value:function(t,r){return VZ(HZ(e.prototype),"getJobs",this).call(this,W.urlPathAppend(this.url,t),r)}},{key:"addQueryJob",value:function(t,r,n,o){return VZ(HZ(e.prototype),"addJob",this).call(this,this.url,t,BZ,r,n,o)}}])&&GZ(r.prototype,n),o&&GZ(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function YZ(t){"@babel/helpers - typeof";return(YZ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function XZ(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,JZ(n.key),n)}}function JZ(t){var e=function(t,e){if("object"!=YZ(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=YZ(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==YZ(e)?e:e+""}var KZ=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e&&(this.datasetName="",this.regionDataset="",this.query="",this.resolution=100,this.meshType=0,this.statisticModes=Tn.AVERAGE,this.fields="",this.type=An.SUMMARYMESH,this.output=null,this.mappingParameters=null,W.extend(this,e),this.CLASS_NAME="SuperMap.SummaryMeshJobParameter")},r=[{key:"toObject",value:function(t,e){for(var r in t)"datasetName"!==r?"type"!==r?"output"!==r?("SUMMARYMESH"===t.type&&"regionDataset"!==r||"SUMMARYREGION"===t.type&&!n(["meshType","resolution","query"],r))&&(e.analyst=e.analyst||{},"query"===r&&t[r]?e.analyst[r]=t[r].toBBOX():e.analyst[r]=t[r],"mappingParameters"===r&&(e.analyst[r]=e.analyst[r]||{},e.analyst.mappingParameters=t[r])):(e.output=e.output||{},e.output=t[r]):e.type=t[r]:(e.input=e.input||{},e.input[r]=t[r]);function n(t,e){for(var r=t.length;r--;)if(t[r]===e)return!0;return!1}}}],(e=[{key:"destroy",value:function(){this.datasetName=null,this.query=null,this.resolution=null,this.statisticModes=null,this.meshType=null,this.fields=null,this.regionDataset=null,this.type=null,this.output instanceof mZ&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof xZ&&(this.mappingParameters.destroy(),this.mappingParameters=null)}}])&&XZ(t.prototype,e),r&&XZ(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function QZ(t){"@babel/helpers - typeof";return(QZ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ZZ(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,$Z(n.key),n)}}function $Z(t){var e=function(t,e){if("object"!=QZ(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=QZ(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==QZ(e)?e:e+""}function t$(t,e,r){return e=r$(e),function(t,e){if(e&&("object"===QZ(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],r$(t).constructor):e.apply(t,r))}function e$(){return(e$="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=r$(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function r$(t){return(r$=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function n$(t,e){return(n$=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var o$=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=t$(this,e,[t,r])).url=W.urlPathAppend(n.url,"spatialanalyst/aggregatepoints"),n.CLASS_NAME="SuperMap.SummaryMeshJobsService",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&n$(t,e)}(e,cZ),r=e,(n=[{key:"destroy",value:function(){e$(r$(e.prototype),"destroy",this).call(this)}},{key:"getSummaryMeshJobs",value:function(t){return e$(r$(e.prototype),"getJobs",this).call(this,this.url,t)}},{key:"getSummaryMeshJob",value:function(t,r){return e$(r$(e.prototype),"getJobs",this).call(this,W.urlPathAppend(this.url,t),r)}},{key:"addSummaryMeshJob",value:function(t,r,n,o){return e$(r$(e.prototype),"addJob",this).call(this,this.url,t,KZ,r,n,o)}}])&&ZZ(r.prototype,n),o&&ZZ(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function i$(t){"@babel/helpers - typeof";return(i$="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a$(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,s$(n.key),n)}}function s$(t){var e=function(t,e){if("object"!=i$(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=i$(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==i$(e)?e:e+""}var u$=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},this.datasetName="",this.datasetVectorClip="",this.geometryClip="",this.mode=Pn.CLIP,this.output=null,this.mappingParameters=null,W.extend(this,e),this.CLASS_NAME="SuperMap.VectorClipJobsParameter"},r=[{key:"toObject",value:function(t,e){for(var r in t)"datasetName"!==r?"output"!==r?(e.analyst=e.analyst||{},e.analyst[r]=t[r],"mappingParameters"===r&&(e.analyst[r]=e.analyst[r]||{},e.analyst.mappingParameters=t[r])):(e.output=e.output||{},e.output=t[r]):(e.input=e.input||{},e.input[r]=t[r])}}],(e=[{key:"destroy",value:function(){this.datasetName=null,this.datasetVectorClip=null,this.geometryClip=null,this.mode=null,this.output instanceof mZ&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof xZ&&(this.mappingParameters.destroy(),this.mappingParameters=null)}}])&&a$(t.prototype,e),r&&a$(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function l$(t){"@babel/helpers - typeof";return(l$="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c$(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,f$(n.key),n)}}function f$(t){var e=function(t,e){if("object"!=l$(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=l$(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==l$(e)?e:e+""}function h$(t,e,r){return e=d$(e),function(t,e){if(e&&("object"===l$(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],d$(t).constructor):e.apply(t,r))}function p$(){return(p$="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=d$(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function d$(t){return(d$=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function y$(t,e){return(y$=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var v$=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=h$(this,e,[t,r])).url=W.urlPathAppend(n.url,"spatialanalyst/vectorclip"),n.CLASS_NAME="SuperMap.VectorClipJobsService",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&y$(t,e)}(e,cZ),r=e,(n=[{key:"destroy",value:function(){p$(d$(e.prototype),"destroy",this).call(this)}},{key:"getVectorClipJobs",value:function(t){return p$(d$(e.prototype),"getJobs",this).call(this,this.url,t)}},{key:"getVectorClipJob",value:function(t,r){return p$(d$(e.prototype),"getJobs",this).call(this,W.urlPathAppend(this.url,t),r)}},{key:"addVectorClipJob",value:function(t,r,n,o){return p$(d$(e.prototype),"addJob",this).call(this,this.url,t,u$,r,n,o)}}])&&c$(r.prototype,n),o&&c$(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function g$(t){"@babel/helpers - typeof";return(g$="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function m$(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,b$(n.key),n)}}function b$(t){var e=function(t,e){if("object"!=g$(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=g$(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==g$(e)?e:e+""}var w$=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e&&(this.datasetName="",this.datasetOverlay="",this.mode="",this.srcFields="",this.overlayFields="",this.output=null,this.mappingParameters=null,W.extend(this,e),this.CLASS_NAME="SuperMap.OverlayGeoJobParameter")},r=[{key:"toObject",value:function(t,e){for(var r in t)"datasetName"!=r?"output"!==r?(e.analyst=e.analyst||{},e.analyst[r]=t[r],"mappingParameters"===r&&(e.analyst[r]=e.analyst[r]||{},e.analyst.mappingParameters=t[r])):(e.output=e.output||{},e.output=t[r]):(e.input=e.input||{},e.input[r]=t[r])}}],(e=[{key:"destroy",value:function(){this.datasetName=null,this.datasetOverlay=null,this.mode=null,this.srcFields=null,this.overlayFields=null,this.output instanceof mZ&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof xZ&&(this.mappingParameters.destroy(),this.mappingParameters=null)}}])&&m$(t.prototype,e),r&&m$(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function S$(t){"@babel/helpers - typeof";return(S$="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function x$(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,_$(n.key),n)}}function _$(t){var e=function(t,e){if("object"!=S$(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=S$(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==S$(e)?e:e+""}function E$(t,e,r){return e=P$(e),function(t,e){if(e&&("object"===S$(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],P$(t).constructor):e.apply(t,r))}function O$(){return(O$="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=P$(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function P$(t){return(P$=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function k$(t,e){return(k$=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var C$=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=E$(this,e,[t,r])).url=W.urlPathAppend(n.url,"spatialanalyst/overlay"),n.CLASS_NAME="SuperMap.OverlayGeoJobsService",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&k$(t,e)}(e,cZ),r=e,(n=[{key:"destroy",value:function(){O$(P$(e.prototype),"destroy",this).call(this)}},{key:"getOverlayGeoJobs",value:function(t){return O$(P$(e.prototype),"getJobs",this).call(this,this.url,t)}},{key:"getOverlayGeoJob",value:function(t,r){return O$(P$(e.prototype),"getJobs",this).call(this,W.urlPathAppend(this.url,t),r)}},{key:"addOverlayGeoJob",value:function(t,r,n,o){return O$(P$(e.prototype),"addJob",this).call(this,this.url,t,w$,r,n,o)}}])&&x$(r.prototype,n),o&&x$(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function T$(t){"@babel/helpers - typeof";return(T$="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function A$(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,M$(n.key),n)}}function M$(t){var e=function(t,e){if("object"!=T$(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=T$(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==T$(e)?e:e+""}var j$=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e&&(this.datasetName="",this.regionDataset="",this.sumShape=!0,this.query="",this.standardSummaryFields=!1,this.standardFields="",this.standardStatisticModes="",this.weightedSummaryFields=!1,this.weightedFields="",this.weightedStatisticModes="",this.meshType=0,this.resolution=100,this.meshSizeUnit=Cn.METER,this.type=An.SUMMARYMESH,this.output=null,this.mappingParameters=null,W.extend(this,e),this.CLASS_NAME="SuperMap.SummaryRegionJobParameter")},r=[{key:"toObject",value:function(t,e){for(var r in t)"datasetName"!==r?"type"!==r&&"type"!==r?"output"!==r?("SUMMARYREGION"===t.type||"SUMMARYMESH"===t.type&&"regionDataset"!==r)&&(e.analyst=e.analyst||{},"query"===r&&t[r]?e.analyst[r]=t[r].toBBOX():e.analyst[r]=t[r],"mappingParameters"===r&&(e.analyst[r]=e.analyst[r]||{},e.analyst.mappingParameters=t[r])):(e.output=e.output||{},e.output=t[r]):e.type=t[r]:(e.input=e.input||{},e.input[r]=t[r])}}],(e=[{key:"destroy",value:function(){this.datasetName=null,this.sumShape=null,this.regionDataset=null,this.query=null,this.standardSummaryFields=null,this.standardFields=null,this.standardStatisticModes=null,this.weightedSummaryFields=null,this.weightedFields=null,this.weightedStatisticModes=null,this.meshType=null,this.resolution=null,this.meshSizeUnit=null,this.type=null,this.output instanceof mZ&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof xZ&&(this.mappingParameters.destroy(),this.mappingParameters=null)}}])&&A$(t.prototype,e),r&&A$(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function I$(t){"@babel/helpers - typeof";return(I$="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function N$(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,L$(n.key),n)}}function L$(t){var e=function(t,e){if("object"!=I$(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=I$(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==I$(e)?e:e+""}function R$(t,e,r){return e=B$(e),function(t,e){if(e&&("object"===I$(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],B$(t).constructor):e.apply(t,r))}function D$(){return(D$="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=B$(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function B$(t){return(B$=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function F$(t,e){return(F$=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var G$=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=R$(this,e,[t,r])).url=W.urlPathAppend(n.url,"spatialanalyst/summaryregion"),n.CLASS_NAME="SuperMap.SummaryRegionJobsService",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&F$(t,e)}(e,cZ),r=e,(n=[{key:"destroy",value:function(){D$(B$(e.prototype),"destroy",this).call(this)}},{key:"getSummaryRegionJobs",value:function(t){return D$(B$(e.prototype),"getJobs",this).call(this,this.url,t)}},{key:"getSummaryRegionJob",value:function(t,r){return D$(B$(e.prototype),"getJobs",this).call(this,W.urlPathAppend(this.url,t),r)}},{key:"addSummaryRegionJob",value:function(t,r,n,o){return D$(B$(e.prototype),"addJob",this).call(this,this.url,t,j$,r,n,o)}}])&&N$(r.prototype,n),o&&N$(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function U$(t){"@babel/helpers - typeof";return(U$="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function z$(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,V$(n.key),n)}}function V$(t){var e=function(t,e){if("object"!=U$(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=U$(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==U$(e)?e:e+""}var H$=function(){return t=function t(e){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.datasetName="",this.bounds="",this.distance="",this.distanceField="",this.distanceUnit=Cn.METER,this.dissolveField="",this.output=null,this.mappingParameters=null,!e)return this;W.extend(this,e),this.CLASS_NAME="SuperMap.BuffersAnalystJobsParameter"},r=[{key:"toObject",value:function(t,e){for(var r in t)"datasetName"!==r?"output"!==r?(e.analyst=e.analyst||{},"bounds"===r&&t[r]?e.analyst[r]=t[r].toBBOX():e.analyst[r]=t[r],"mappingParameters"===r&&(e.analyst[r]=e.analyst[r]||{},e.analyst.mappingParameters=t[r])):(e.output=e.output||{},e.output=t[r]):(e.input=e.input||{},e.input[r]=t[r])}}],(e=[{key:"destroy",value:function(){this.datasetName=null,this.bounds=null,this.distance=null,this.distanceField=null,this.distanceUnit=null,this.dissolveField=null,this.output instanceof mZ&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof xZ&&(this.mappingParameters.destroy(),this.mappingParameters=null)}}])&&z$(t.prototype,e),r&&z$(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function W$(t){"@babel/helpers - typeof";return(W$="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function q$(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Y$(n.key),n)}}function Y$(t){var e=function(t,e){if("object"!=W$(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=W$(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==W$(e)?e:e+""}function X$(t,e,r){return e=K$(e),function(t,e){if(e&&("object"===W$(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],K$(t).constructor):e.apply(t,r))}function J$(){return(J$="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=K$(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function K$(t){return(K$=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Q$(t,e){return(Q$=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Z$=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=X$(this,e,[t,r])).url=W.urlPathAppend(n.url,"spatialanalyst/buffers"),n.CLASS_NAME="SuperMap.BuffersAnalystJobsService",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Q$(t,e)}(e,cZ),r=e,(n=[{key:"destroy",value:function(){J$(K$(e.prototype),"destroy",this).call(this)}},{key:"getBuffersJobs",value:function(t){return J$(K$(e.prototype),"getJobs",this).call(this,this.url,t)}},{key:"getBuffersJob",value:function(t,r){return J$(K$(e.prototype),"getJobs",this).call(this,W.urlPathAppend(this.url,t),r)}},{key:"addBuffersJob",value:function(t,r,n,o){return J$(K$(e.prototype),"addJob",this).call(this,this.url,t,H$,r,n,o)}}])&&q$(r.prototype,n),o&&q$(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function $$(t){"@babel/helpers - typeof";return($$="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function t0(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,e0(n.key),n)}}function e0(t){var e=function(t,e){if("object"!=$$(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=$$(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==$$(e)?e:e+""}var r0=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e&&(this.datasetName="",this.datasetTopology="",this.tolerance="",this.rule=Mn.REGIONNOOVERLAP,this.output=null,this.mappingParameters=null,W.extend(this,e),this.CLASS_NAME="SuperMap.TopologyValidatorJobsParameter")},r=[{key:"toObject",value:function(t,e){for(var r in t)"datasetName"!==r?"output"!==r?(e.analyst=e.analyst||{},e.analyst[r]=t[r],"mappingParameters"===r&&(e.analyst[r]=e.analyst[r]||{},e.analyst.mappingParameters=t[r])):(e.output=e.output||{},e.output=t[r]):(e.input=e.input||{},e.input[r]=t[r])}}],(e=[{key:"destroy",value:function(){this.datasetName=null,this.datasetTopology=null,this.tolerance=null,this.rule=null,this.output instanceof mZ&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof xZ&&(this.mappingParameters.destroy(),this.mappingParameters=null)}}])&&t0(t.prototype,e),r&&t0(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function n0(t){"@babel/helpers - typeof";return(n0="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o0(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,i0(n.key),n)}}function i0(t){var e=function(t,e){if("object"!=n0(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=n0(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==n0(e)?e:e+""}function a0(t,e,r){return e=u0(e),function(t,e){if(e&&("object"===n0(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],u0(t).constructor):e.apply(t,r))}function s0(){return(s0="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u0(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function u0(t){return(u0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function l0(t,e){return(l0=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var c0=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=a0(this,e,[t,r])).url=W.urlPathAppend(n.url,"spatialanalyst/topologyvalidator"),n.CLASS_NAME="SuperMap.TopologyValidatorJobsService",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&l0(t,e)}(e,cZ),r=e,(n=[{key:"destroy",value:function(){s0(u0(e.prototype),"destroy",this).call(this)}},{key:"getTopologyValidatorJobs",value:function(t){return s0(u0(e.prototype),"getJobs",this).call(this,this.url,t)}},{key:"getTopologyValidatorJob",value:function(t,r){return s0(u0(e.prototype),"getJobs",this).call(this,W.urlPathAppend(this.url,t),r)}},{key:"addTopologyValidatorJob",value:function(t,r,n,o){return s0(u0(e.prototype),"addJob",this).call(this,this.url,t,r0,r,n,o)}}])&&o0(r.prototype,n),o&&o0(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function f0(t){"@babel/helpers - typeof";return(f0="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function h0(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,p0(n.key),n)}}function p0(t){var e=function(t,e){if("object"!=f0(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=f0(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==f0(e)?e:e+""}var d0=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e&&(this.datasetName="",this.groupField="",this.attributeField="",this.statisticModes="",this.output=null,this.mappingParameters=null,W.extend(this,e),this.CLASS_NAME="SuperMap.SummaryAttributesJobsParameter")},r=[{key:"toObject",value:function(t,e){for(var r in t)"datasetName"!==r?"output"!==r?(e.analyst=e.analyst||{},e.analyst[r]=t[r],"mappingParameters"===r&&(e.analyst[r]=e.analyst[r]||{},e.analyst.mappingParameters=t[r])):(e.output=e.output||{},e.output=t[r]):(e.input=e.input||{},e.input[r]=t[r])}}],(e=[{key:"destroy",value:function(){this.datasetName=null,this.groupField=null,this.attributeField=null,this.statisticModes=null,this.output instanceof mZ&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof xZ&&(this.mappingParameters.destroy(),this.mappingParameters=null)}}])&&h0(t.prototype,e),r&&h0(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function y0(t){"@babel/helpers - typeof";return(y0="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function v0(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,g0(n.key),n)}}function g0(t){var e=function(t,e){if("object"!=y0(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=y0(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==y0(e)?e:e+""}function m0(t,e,r){return e=w0(e),function(t,e){if(e&&("object"===y0(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],w0(t).constructor):e.apply(t,r))}function b0(){return(b0="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=w0(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function w0(t){return(w0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function S0(t,e){return(S0=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var x0=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=m0(this,e,[t,r])).url=W.urlPathAppend(n.url,"spatialanalyst/summaryattributes"),n.CLASS_NAME="SuperMap.SummaryAttributesJobsService",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&S0(t,e)}(e,cZ),r=e,(n=[{key:"destroy",value:function(){b0(w0(e.prototype),"destroy",this).call(this)}},{key:"getSummaryAttributesJobs",value:function(t){return b0(w0(e.prototype),"getJobs",this).call(this,this.url,t)}},{key:"getSummaryAttributesJob",value:function(t,r){return b0(w0(e.prototype),"getJobs",this).call(this,W.urlPathAppend(this.url,t),r)}},{key:"addSummaryAttributesJob",value:function(t,r,n,o){return b0(w0(e.prototype),"addJob",this).call(this,this.url,t,d0,r,n,o)}}])&&v0(r.prototype,n),o&&v0(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function _0(t){"@babel/helpers - typeof";return(_0="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function E0(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,O0(n.key),n)}}function O0(t){var e=function(t,e){if("object"!=_0(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=_0(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==_0(e)?e:e+""}var P0=function(){return t=function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.url=e,this.options=r||{},this.kernelDensityJobs={},this.summaryMeshJobs={},this.queryJobs={},this.summaryRegionJobs={},this.vectorClipJobs={},this.overlayGeoJobs={},this.buffersJobs={},this.topologyValidatorJobs={},this.summaryAttributesJobs={}},(e=[{key:"getKernelDensityJobs",value:function(t,e){var r=this,n=r._processFormat(e);return new NZ(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,format:n}).getKernelDensityJobs(t)}},{key:"getKernelDensityJob",value:function(t,e,r){var n=this,o=n._processFormat(r);return new NZ(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:o}).getKernelDensityJob(t,e)}},{key:"addKernelDensityJob",value:function(t,e,r,n){var o=this,i=o._processFormat(n);return new NZ(o.url,{proxy:o.options.proxy,withCredentials:o.options.withCredentials,crossOrigin:o.options.crossOrigin,headers:o.options.headers,format:i}).addKernelDensityJob(t,r,e,function(t){o.kernelDensityJobs[t.id]=t.state})}},{key:"getKernelDensityJobState",value:function(t){return this.kernelDensityJobs[t]}},{key:"getSummaryMeshJobs",value:function(t,e){var r=this,n=r._processFormat(e);return new o$(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,format:n}).getSummaryMeshJobs(t)}},{key:"getSummaryMeshJob",value:function(t,e,r){var n=this,o=n._processFormat(r);return new o$(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:o}).getSummaryMeshJob(t,e)}},{key:"addSummaryMeshJob",value:function(t,e,r,n){var o=this,i=o._processFormat(n);return new o$(o.url,{proxy:o.options.proxy,withCredentials:o.options.withCredentials,crossOrigin:o.options.crossOrigin,headers:o.options.headers,format:i}).addSummaryMeshJob(t,r,e,function(t){o.summaryMeshJobs[t.id]=t.state})}},{key:"getSummaryMeshJobState",value:function(t){return this.summaryMeshJobs[t]}},{key:"getQueryJobs",value:function(t,e){var r=this,n=r._processFormat(e);return new qZ(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,format:n}).getQueryJobs(t)}},{key:"getQueryJob",value:function(t,e,r){var n=this,o=n._processFormat(r);return new qZ(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:o}).getQueryJob(t,e)}},{key:"addQueryJob",value:function(t,e,r,n){var o=this,i=o._processFormat(n);return new qZ(o.url,{proxy:o.options.proxy,withCredentials:o.options.withCredentials,crossOrigin:o.options.crossOrigin,headers:o.options.headers,format:i}).addQueryJob(t,r,e,function(t){o.queryJobs[t.id]=t.state})}},{key:"getQueryJobState",value:function(t){return this.queryJobs[t]}},{key:"getSummaryRegionJobs",value:function(t,e){var r=this,n=r._processFormat(e);return new G$(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,format:n}).getSummaryRegionJobs(t)}},{key:"getSummaryRegionJob",value:function(t,e,r){var n=this,o=n._processFormat(r);return new G$(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:o}).getSummaryRegionJob(t,e)}},{key:"addSummaryRegionJob",value:function(t,e,r,n){var o=this,i=o._processFormat(n);return new G$(o.url,{proxy:o.options.proxy,withCredentials:o.options.withCredentials,crossOrigin:o.options.crossOrigin,headers:o.options.headers,format:i}).addSummaryRegionJob(t,r,e,function(t){o.summaryRegionJobs[t.id]=t.state})}},{key:"getSummaryRegionJobState",value:function(t){return this.summaryRegionJobs[t]}},{key:"getVectorClipJobs",value:function(t,e){var r=this,n=r._processFormat(e);return new v$(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,format:n}).getVectorClipJobs(t)}},{key:"getVectorClipJob",value:function(t,e,r){var n=this,o=n._processFormat(r);return new v$(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:o}).getVectorClipJob(t,e)}},{key:"addVectorClipJob",value:function(t,e,r,n){var o=this,i=o._processFormat(n);return new v$(o.url,{proxy:o.options.proxy,withCredentials:o.options.withCredentials,crossOrigin:o.options.crossOrigin,headers:o.options.headers,format:i}).addVectorClipJob(t,r,e,function(t){o.vectorClipJobs[t.id]=t.state})}},{key:"getVectorClipJobState",value:function(t){return this.vectorClipJobs[t]}},{key:"getOverlayGeoJobs",value:function(t,e){var r=this,n=r._processFormat(e);return new C$(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,format:n}).getOverlayGeoJobs(t)}},{key:"getOverlayGeoJob",value:function(t,e,r){var n=this,o=n._processFormat(r);return new C$(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:o}).getOverlayGeoJob(t,e)}},{key:"addOverlayGeoJob",value:function(t,e,r,n){var o=this,i=o._processFormat(n);return new C$(o.url,{proxy:o.options.proxy,withCredentials:o.options.withCredentials,crossOrigin:o.options.crossOrigin,headers:o.options.headers,format:i}).addOverlayGeoJob(t,r,e,function(t){o.overlayGeoJobs[t.id]=t.state})}},{key:"getoverlayGeoJobState",value:function(t){return this.overlayGeoJobs[t]}},{key:"getBuffersJobs",value:function(t,e){var r=this,n=r._processFormat(e);return new Z$(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,format:n}).getBuffersJobs(t)}},{key:"getBuffersJob",value:function(t,e,r){var n=this,o=n._processFormat(r);return new Z$(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:o}).getBuffersJob(t,e)}},{key:"addBuffersJob",value:function(t,e,r,n){var o=this,i=o._processFormat(n);return new Z$(o.url,{proxy:o.options.proxy,withCredentials:o.options.withCredentials,crossOrigin:o.options.crossOrigin,headers:o.options.headers,format:i}).addBuffersJob(t,r,e,function(t){o.buffersJobs[t.id]=t.state})}},{key:"getBuffersJobState",value:function(t){return this.buffersJobs[t]}},{key:"getTopologyValidatorJobs",value:function(t,e){var r=this,n=r._processFormat(e);return new c0(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,format:n}).getTopologyValidatorJobs(t)}},{key:"getTopologyValidatorJob",value:function(t,e,r){var n=this,o=n._processFormat(r);return new c0(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:o}).getTopologyValidatorJob(t,e)}},{key:"addTopologyValidatorJob",value:function(t,e,r,n){var o=this,i=o._processFormat(n);return new c0(o.url,{proxy:o.options.proxy,withCredentials:o.options.withCredentials,crossOrigin:o.options.crossOrigin,headers:o.options.headers,format:i}).addTopologyValidatorJob(t,r,e,function(t){o.topologyValidatorJobs[t.id]=t.state})}},{key:"getTopologyValidatorJobState",value:function(t){return this.topologyValidatorJobs[t]}},{key:"getSummaryAttributesJobs",value:function(t,e){var r=this,n=r._processFormat(e);return new x0(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,format:n}).getSummaryAttributesJobs(t)}},{key:"getSummaryAttributesJob",value:function(t,e,r){var n=this,o=n._processFormat(r);return new x0(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:o}).getSummaryAttributesJob(t,e)}},{key:"addSummaryAttributesJob",value:function(t,e,r,n){var o=this,i=o._processFormat(n);return new x0(o.url,{proxy:o.options.proxy,withCredentials:o.options.withCredentials,crossOrigin:o.options.crossOrigin,headers:o.options.headers,format:i}).addSummaryAttributesJob(t,r,e,function(t){o.summaryAttributesJobs[t.id]=t.state})}},{key:"getSummaryAttributesJobState",value:function(t){return this.summaryAttributesJobs[t]}},{key:"_processFormat",value:function(t){return t||Jr.GEOJSON}}])&&E0(t.prototype,e),r&&E0(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function k0(t){"@babel/helpers - typeof";return(k0="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function C0(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,T0(n.key),n)}}function T0(t){var e=function(t,e){if("object"!=k0(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=k0(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==k0(e)?e:e+""}function A0(t,e,r){return e=M0(e),function(t,e){if(e&&("object"===k0(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],M0(t).constructor):e.apply(t,r))}function M0(t){return(M0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function j0(t,e){return(j0=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var I0=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=A0(this,e,[t,r]))._processingService=new P0(t,r),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&j0(t,e)}(e,uv),r=e,(n=[{key:"getKernelDensityJobs",value:function(t,e){return this._processingService.getKernelDensityJobs(t,e)}},{key:"getKernelDensityJob",value:function(t,e,r){return this._processingService.getKernelDensityJob(t,e,r)}},{key:"addKernelDensityJob",value:function(t,e,r,n){return t=this._processParams(t),this._processingService.addKernelDensityJob(t,e,r,n)}},{key:"getKernelDensityJobState",value:function(t){return this._processingService.getKernelDensityJobState(t)}},{key:"getSummaryMeshJobs",value:function(t,e){return this._processingService.getSummaryMeshJobs(t,e)}},{key:"getSummaryMeshJob",value:function(t,e,r){return this._processingService.getSummaryMeshJob(t,e,r)}},{key:"addSummaryMeshJob",value:function(t,e,r,n){return t=this._processParams(t),this._processingService.addSummaryMeshJob(t,e,r,n)}},{key:"getSummaryMeshJobState",value:function(t){return this._processingService.getSummaryMeshJobState(t)}},{key:"getQueryJobs",value:function(t,e){return this._processingService.getQueryJobs(t,e)}},{key:"getQueryJob",value:function(t,e,r){return this._processingService.getQueryJob(t,e,r)}},{key:"addQueryJob",value:function(t,e,r,n){return t=this._processParams(t),this._processingService.addQueryJob(t,e,r,n)}},{key:"getQueryJobState",value:function(t){return this._processingService.getQueryJobState(t)}},{key:"getSummaryRegionJobs",value:function(t,e){return this._processingService.getSummaryRegionJobs(t,e)}},{key:"getSummaryRegionJob",value:function(t,e,r){return this._processingService.getSummaryRegionJob(t,e,r)}},{key:"addSummaryRegionJob",value:function(t,e,r,n){return t=this._processParams(t),this._processingService.addSummaryRegionJob(t,e,r,n)}},{key:"getSummaryRegionJobState",value:function(t){return this._processingService.getSummaryRegionJobState(t)}},{key:"getVectorClipJobs",value:function(t,e){return this._processingService.getVectorClipJobs(t,e)}},{key:"getVectorClipJob",value:function(t,e,r){return this._processingService.getVectorClipJob(t,e,r)}},{key:"addVectorClipJob",value:function(t,e,r,n){return t=this._processParams(t),this._processingService.addVectorClipJob(t,e,r,n)}},{key:"getVectorClipJobState",value:function(t){return this._processingService.getVectorClipJobState(t)}},{key:"getOverlayGeoJobs",value:function(t,e){return this._processingService.getOverlayGeoJobs(t,e)}},{key:"getOverlayGeoJob",value:function(t,e,r){return this._processingService.getOverlayGeoJob(t,e,r)}},{key:"addOverlayGeoJob",value:function(t,e,r,n){return t=this._processParams(t),this._processingService.addOverlayGeoJob(t,e,r,n)}},{key:"getoverlayGeoJobState",value:function(t){return this._processingService.getoverlayGeoJobState(t)}},{key:"getBuffersJobs",value:function(t,e){return this._processingService.getBuffersJobs(t,e)}},{key:"getBuffersJob",value:function(t,e,r){return this._processingService.getBuffersJob(t,e,r)}},{key:"addBuffersJob",value:function(t,e,r,n){return t=this._processParams(t),this._processingService.addBuffersJob(t,e,r,n)}},{key:"getBuffersJobState",value:function(t){return this._processingService.getBuffersJobState(t)}},{key:"getTopologyValidatorJobs",value:function(t,e){return this._processingService.getTopologyValidatorJobs(t,e)}},{key:"getTopologyValidatorJob",value:function(t,e,r){return this._processingService.getTopologyValidatorJob(t,e,r)}},{key:"addTopologyValidatorJob",value:function(t,e,r,n){return t=this._processParams(t),this._processingService.addTopologyValidatorJob(t,e,r,n)}},{key:"getTopologyValidatorJobState",value:function(t){return this._processingService.getTopologyValidatorJobState(t)}},{key:"getSummaryAttributesJobs",value:function(t,e){return this._processingService.getSummaryAttributesJobs(t,e)}},{key:"getSummaryAttributesJob",value:function(t,e,r){return this._processingService.getSummaryAttributesJob(t,e,r)}},{key:"addSummaryAttributesJob",value:function(t,e,r,n){return t=this._processParams(t),this._processingService.addSummaryAttributesJob(t,e,r,n)}},{key:"getSummaryAttributesJobState",value:function(t){return this._processingService.getSummaryAttributesJobState(t)}},{key:"_processFormat",value:function(t){return t||Jr.GEOJSON}},{key:"_processParams",value:function(t){return t?(t.bounds&&(t.bounds=$n.toSuperMapBounds(t.bounds)),t.query&&(t.query=$n.toSuperMapBounds(t.query)),t.geometryQuery&&(t.geometryQuery=$n.toProcessingParam(t.geometryQuery)),t.geometryClip&&(t.geometryClip=$n.toProcessingParam(t.geometryClip)),t):{}}}])&&C0(r.prototype,n),o&&C0(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function N0(t){"@babel/helpers - typeof";return(N0="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function L0(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,R0(n.key),n)}}function R0(t){var e=function(t,e){if("object"!=N0(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=N0(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==N0(e)?e:e+""}function D0(t,e,r){return e=G0(e),B0(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],G0(t).constructor):e.apply(t,r))}function B0(t,e){if(e&&("object"===N0(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function F0(){return(F0="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=G0(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function G0(t){return(G0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function U0(t,e){return(U0=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var z0=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=D0(this,e,[t,r])).returnContent=!1,n.format=Jr.GEOJSON,n.returnFeatureWithFieldCaption=!1,r&&W.extend(n,r),n.CLASS_NAME="SuperMap.QueryService",n.url?(r&&r.format&&(n.format=r.format.toUpperCase()),n.url=W.urlPathAppend(n.url,"queryResults"),n):B0(n)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&U0(t,e)}(e,bv),r=e,(n=[{key:"destroy",value:function(){F0(G0(e.prototype),"destroy",this).call(this);this.returnContent=null,this.format=null}},{key:"processAsync",value:function(t,e){if(t instanceof sR){var r,n=this,o=null;return n.returnContent=t.returnContent,r=n.getJsonParameters(t),n.returnContent||(o=t.returnCustomResult)&&(n.url=W.urlAppend(n.url,"returnCustomResult="+o)),n.returnFeatureWithFieldCaption=t.returnFeatureWithFieldCaption,n.request({method:"POST",data:r,scope:n,success:e,failure:e})}}},{key:"transformResult",value:function(t,e){t=W.transformResult(t);var r=new Kn;if(t&&t.recordsets)for(var n=0,o=t.recordsets,i=o.length;n<i;n++)o[n].features&&(!0===this.returnFeatureWithFieldCaption&&o[n].features.map(function(t){return t.fieldNames=o[n].fieldCaptions,t}),this.format===Jr.GEOJSON&&(o[n].features=r.toGeoJSON(o[n].features)));return{result:t,options:e}}},{key:"dataFormat",value:function(){return[Jr.GEOJSON,Jr.ISERVER,Jr.FGB]}},{key:"getQueryParameters",value:function(t){return new sR({customParams:t.customParams,expectCount:t.expectCount,networkType:t.networkType,queryOption:t.queryOption,queryParams:t.queryParams,startRecord:t.startRecord,prjCoordSys:t.prjCoordSys,holdTime:t.holdTime})}}])&&L0(r.prototype,n),o&&L0(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function V0(t){"@babel/helpers - typeof";return(V0="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function H0(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,W0(n.key),n)}}function W0(t){var e=function(t,e){if("object"!=V0(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=V0(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==V0(e)?e:e+""}function q0(t,e,r){return e=X0(e),function(t,e){if(e&&("object"===V0(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],X0(t).constructor):e.apply(t,r))}function Y0(){return(Y0="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=X0(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function X0(t){return(X0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function J0(t,e){return(J0=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var K0=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=q0(this,e,[t=t||{}])).returnContent=!0,r.bounds=null,W.extend(r,t),r.CLASS_NAME="SuperMap.QueryByBoundsParameters",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&J0(t,e)}(e,sR),r=e,(n=[{key:"destroy",value:function(){Y0(X0(e.prototype),"destroy",this).call(this);this.returnContent=null,this.bounds&&(this.bounds=null)}}])&&H0(r.prototype,n),o&&H0(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function Q0(t){"@babel/helpers - typeof";return(Q0="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Z0(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,$0(n.key),n)}}function $0(t){var e=function(t,e){if("object"!=Q0(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Q0(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Q0(e)?e:e+""}function t1(t,e,r){return e=r1(e),function(t,e){if(e&&("object"===Q0(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],r1(t).constructor):e.apply(t,r))}function e1(){return(e1="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=r1(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function r1(t){return(r1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function n1(t,e){return(n1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var o1=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=t1(this,e,[t,r])).CLASS_NAME="SuperMap.QueryByBoundsService",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&n1(t,e)}(e,z0),r=e,(n=[{key:"destroy",value:function(){e1(r1(e.prototype),"destroy",this).call(this)}},{key:"getJsonParameters",value:function(t){if(!(t instanceof K0))return null;var e,r="",n=t.bounds;return e=this.getQueryParameters(t),r+="'queryMode':'BoundsQuery','queryParameters':",r+=W.toJSON(e),r="{"+(r+=",'bounds': {'rightTop':{'y':"+n.top+",'x':"+n.right+"},'leftBottom':{'y':"+n.bottom+",'x':"+n.left+"}}")+"}"}}])&&Z0(r.prototype,n),o&&Z0(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function i1(t){"@babel/helpers - typeof";return(i1="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a1(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,s1(n.key),n)}}function s1(t){var e=function(t,e){if("object"!=i1(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=i1(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==i1(e)?e:e+""}function u1(t,e,r){return e=c1(e),function(t,e){if(e&&("object"===i1(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],c1(t).constructor):e.apply(t,r))}function l1(){return(l1="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=c1(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function c1(t){return(c1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function f1(t,e){return(f1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var h1=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=u1(this,e,[t=t||{}])).geometry=null,r.isNearest=null,r.returnContent=!0,W.extend(r,t),r.CLASS_NAME="SuperMap.QueryByDistanceParameters",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&f1(t,e)}(e,sR),r=e,(n=[{key:"destroy",value:function(){l1(c1(e.prototype),"destroy",this).call(this);var t=this;t.returnContent=null,t.distance=null,t.isNearest=null,t.geometry&&(t.geometry.destroy(),t.geometry=null)}}])&&a1(r.prototype,n),o&&a1(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function p1(t){"@babel/helpers - typeof";return(p1="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function d1(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,y1(n.key),n)}}function y1(t){var e=function(t,e){if("object"!=p1(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=p1(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==p1(e)?e:e+""}function v1(t,e,r){return e=m1(e),function(t,e){if(e&&("object"===p1(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],m1(t).constructor):e.apply(t,r))}function g1(){return(g1="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=m1(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function m1(t){return(m1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function b1(t,e){return(b1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var w1=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=v1(this,e,[t,r])).CLASS_NAME="SuperMap.QueryByDistanceService",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&b1(t,e)}(e,z0),r=e,(n=[{key:"destroy",value:function(){g1(m1(e.prototype),"destroy",this).call(this)}},{key:"getJsonParameters",value:function(t){if(t instanceof h1){var e="",r=this.getQueryParameters(t),n=zn.fromGeometry(t.geometry);return e+=t.isNearest?"'queryMode':'FindNearest','queryParameters':":"'queryMode':'DistanceQuery','queryParameters':",e+=W.toJSON(r),e="{"+(e+=",'geometry':"+W.toJSON(n)+",'distance':"+t.distance)+"}"}}}])&&d1(r.prototype,n),o&&d1(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function S1(t){"@babel/helpers - typeof";return(S1="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function x1(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,_1(n.key),n)}}function _1(t){var e=function(t,e){if("object"!=S1(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=S1(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==S1(e)?e:e+""}function E1(t,e,r){return e=P1(e),function(t,e){if(e&&("object"===S1(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],P1(t).constructor):e.apply(t,r))}function O1(){return(O1="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=P1(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function P1(t){return(P1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function k1(t,e){return(k1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var C1=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=E1(this,e,[t=t||{}])).returnContent=!0,W.extend(r,t),r.CLASS_NAME="SuperMap.QueryBySQLParameters",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&k1(t,e)}(e,sR),r=e,(n=[{key:"destroy",value:function(){O1(P1(e.prototype),"destroy",this).call(this);this.returnContent=null}}])&&x1(r.prototype,n),o&&x1(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function T1(t){"@babel/helpers - typeof";return(T1="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function A1(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,M1(n.key),n)}}function M1(t){var e=function(t,e){if("object"!=T1(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=T1(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==T1(e)?e:e+""}function j1(t,e,r){return e=N1(e),function(t,e){if(e&&("object"===T1(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],N1(t).constructor):e.apply(t,r))}function I1(){return(I1="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=N1(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function N1(t){return(N1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function L1(t,e){return(L1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var R1=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=j1(this,e,[t,r])).CLASS_NAME="SuperMap.QueryBySQLService",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&L1(t,e)}(e,z0),r=e,(n=[{key:"destroy",value:function(){I1(N1(e.prototype),"destroy",this).call(this)}},{key:"getJsonParameters",value:function(t){if(t instanceof C1){var e,r="";return e=this.getQueryParameters(t),r+="'queryMode':'SqlQuery','queryParameters':",r="{"+(r+=W.toJSON(e))+"}"}}}])&&A1(r.prototype,n),o&&A1(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function D1(t){"@babel/helpers - typeof";return(D1="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function B1(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,F1(n.key),n)}}function F1(t){var e=function(t,e){if("object"!=D1(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=D1(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==D1(e)?e:e+""}function G1(t,e,r){return e=z1(e),function(t,e){if(e&&("object"===D1(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],z1(t).constructor):e.apply(t,r))}function U1(){return(U1="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=z1(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function z1(t){return(z1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function V1(t,e){return(V1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var H1=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=G1(this,e,[t=t||{}])).returnContent=!0,r.geometry=null,r.spatialQueryMode=$r.INTERSECT,W.extend(r,t),r.CLASS_NAME="SuperMap.QueryByGeometryParameters",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&V1(t,e)}(e,sR),r=e,(n=[{key:"destroy",value:function(){U1(z1(e.prototype),"destroy",this).call(this);this.returnContent=null,this.geometry=null,this.spatialQueryMode=null}}])&&B1(r.prototype,n),o&&B1(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function W1(t){"@babel/helpers - typeof";return(W1="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function q1(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Y1(n.key),n)}}function Y1(t){var e=function(t,e){if("object"!=W1(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=W1(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==W1(e)?e:e+""}function X1(t,e,r){return e=K1(e),function(t,e){if(e&&("object"===W1(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],K1(t).constructor):e.apply(t,r))}function J1(){return(J1="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=K1(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function K1(t){return(K1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Q1(t,e){return(Q1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Z1=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=X1(this,e,[t,r])).CLASS_NAME="SuperMap.QueryByGeometryService",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Q1(t,e)}(e,z0),r=e,(n=[{key:"destroy",value:function(){J1(K1(e.prototype),"destroy",this).call(this)}},{key:"getJsonParameters",value:function(t){if(t instanceof H1){var e,r="",n=t.geometry,o=zn.fromGeometry(n);return e=this.getQueryParameters(t),r+="'queryMode':'SpatialQuery','queryParameters':",r="{"+(r+=W.toJSON(e)+",'geometry':"+W.toJSON(o)+",'spatialQueryMode':"+W.toJSON(t.spatialQueryMode))+"}"}}}])&&q1(r.prototype,n),o&&q1(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function $1(t){"@babel/helpers - typeof";return($1="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function t2(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,e2(n.key),n)}}function e2(t){var e=function(t,e){if("object"!=$1(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=$1(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==$1(e)?e:e+""}var r2=function(){return t=function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.options=r||{},this.url=e},(e=[{key:"queryByBounds",value:function(t,e,r){var n=this;return new o1(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(t,e)}},{key:"queryByDistance",value:function(t,e,r){var n=this;return new w1(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:r}).processAsync(t,e)}},{key:"queryBySQL",value:function(t,e,r){var n=this;return new R1(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:r}).processAsync(t,e)}},{key:"queryByGeometry",value:function(t,e,r){var n=this;return new Z1(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:r}).processAsync(t,e)}},{key:"_processFormat",value:function(t){return t||Jr.GEOJSON}}])&&t2(t.prototype,e),r&&t2(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function n2(t){"@babel/helpers - typeof";return(n2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o2(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,i2(n.key),n)}}function i2(t){var e=function(t,e){if("object"!=n2(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=n2(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==n2(e)?e:e+""}function a2(t,e,r){return e=s2(e),function(t,e){if(e&&("object"===n2(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],s2(t).constructor):e.apply(t,r))}function s2(t){return(s2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u2(t,e){return(u2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var l2=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=a2(this,e,[t,r]))._queryService=new r2(t,r),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&u2(t,e)}(e,uv),r=e,(n=[{key:"queryByBounds",value:function(t,e,r){return t=this._processParams(t),this._queryService.queryByBounds(t,e,r)}},{key:"queryByDistance",value:function(t,e,r){return t=this._processParams(t),this._queryService.queryByDistance(t,e,r)}},{key:"queryBySQL",value:function(t,e,r){return t=this._processParams(t),this._queryService.queryBySQL(t,e,r)}},{key:"queryByGeometry",value:function(t,e,r){return t=this._processParams(t),this._queryService.queryByGeometry(t,e,r)}},{key:"_processParams",value:function(t){return t?(t.returnContent=null==t.returnContent||t.returnContent,t.queryParams&&!$n.isArray(t.queryParams)&&(t.queryParams=[t.queryParams]),t.bounds&&(t.bounds instanceof Array&&(t.bounds=new Gt(t.bounds[0],t.bounds[1],t.bounds[2],t.bounds[3])),t.bounds instanceof w().LngLatBounds&&(t.bounds=new Gt(t.bounds.getSouthWest().lng,t.bounds.getSouthWest().lat,t.bounds.getNorthEast().lng,t.bounds.getNorthEast().lat))),t.geometry&&(t.geometry instanceof w().LngLat&&(t.geometry=new Xt(t.geometry.lng,t.geometry.lat)),t.geometry instanceof w().Point&&(t.geometry=new Xt(t.geometry.x,t.geometry.y)),t.geometry instanceof w().LngLatBounds&&(t.geometry=$n.toSuperMapPolygon(t.geometry)),t.geometry instanceof L||(t.geometry=$n.toSuperMapGeometry(t.geometry))),t):{}}}])&&o2(r.prototype,n),o&&o2(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function c2(t){"@babel/helpers - typeof";return(c2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function f2(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,h2(n.key),n)}}function h2(t){var e=function(t,e){if("object"!=c2(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=c2(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==c2(e)?e:e+""}function p2(t,e,r){return e=y2(e),function(t,e){if(e&&("object"===c2(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],y2(t).constructor):e.apply(t,r))}function d2(){return(d2="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=y2(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function y2(t){return(y2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function v2(t,e){return(v2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var g2=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=p2(this,e,[t,r])).format=r&&r.format||Jr.GEOJSON,n.CLASS_NAME="SuperMap.SpatialAnalystBase",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&v2(t,e)}(e,bv),r=e,(n=[{key:"destroy",value:function(){d2(y2(e.prototype),"destroy",this).call(this),this.format=null}},{key:"transformResult",value:function(t,e){var r;if((t=W.transformResult(t))&&this.format===Jr.GEOJSON&&"function"==typeof this.toGeoJSONResult)if(W.isArray(t)){for(var n=0;n<t.length;n++)t[n]=this.toGeoJSONResult(t[n]);r=t}else r=this.toGeoJSONResult(t);return r||(r=t),{result:r,options:e}}},{key:"toGeoJSONResult",value:function(t){if(!t)return null;t.result&&t.result.resultGeometry&&(t=t.result);var e=new Kn;if(t.recordsets)for(var r=0,n=t.recordsets,o=n.length;r<o;r++)n[r].features&&(n[r].features=e.toGeoJSON(n[r].features));else t.recordset&&t.recordset.features&&(t.recordset.features=e.toGeoJSON(t.recordset.features));return t.resultGeometry&&(t.resultGeometry=e.toGeoJSON(t.resultGeometry)),t.regions&&(t.regions=e.toGeoJSON(t.regions)),t}}])&&f2(r.prototype,n),o&&f2(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function m2(t){"@babel/helpers - typeof";return(m2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function b2(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,w2(n.key),n)}}function w2(t){var e=function(t,e){if("object"!=m2(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=m2(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==m2(e)?e:e+""}var S2=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.dataset=null,this.targetDatasourceName=null,this.totalGridName=null,this.diffuseDatasetGridName=null,this.durationDatasetGridName=null,this.directDatasetGridName=null,this.latitude=null,this.timeMode="MULTIDAYS",this.dayStart=null,this.dayEnd=null,this.hourStart=null,this.hourEnd=null,this.transmittance=null,this.hourInterval=null,this.dayInterval=null,this.deleteExistResultDataset=!1,W.extend(this,e),this.CLASS_NAME="SuperMap.AreaSolarRadiationParameters"},r=[{key:"toObject",value:function(t,e){var r={};for(var n in t){if("dataset"!==n)"latitude"===n||"timeMode"===n||"dayStart"===n||("dayEnd"===n||"hourStart"===n||"hourEnd"===n)||("transmittance"===n||"hourInterval"===n||"dayInterval"===n)?r[n]=t[n]:e[n]=t[n]}e.parameter=r}}],(e=[{key:"destroy",value:function(){var t=this;t.dataset=null,t.zFactor=1,t.averageCurvatureName=null,t.profileCurvatureName=null,t.planCurvatureName=null,t.deleteExistResultDataset=!0}}])&&b2(t.prototype,e),r&&b2(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function x2(t){"@babel/helpers - typeof";return(x2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _2(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,E2(n.key),n)}}function E2(t){var e=function(t,e){if("object"!=x2(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=x2(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==x2(e)?e:e+""}function O2(t,e,r){return e=k2(e),function(t,e){if(e&&("object"===x2(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],k2(t).constructor):e.apply(t,r))}function P2(){return(P2="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=k2(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function k2(t){return(k2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function C2(t,e){return(C2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var T2=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=O2(this,e,[t,r])).CLASS_NAME="SuperMap.AreaSolarRadiationService",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&C2(t,e)}(e,g2),r=e,(n=[{key:"destroy",value:function(){P2(k2(e.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){if(t instanceof S2){var r=this,n={};t instanceof S2&&(r.url=W.urlPathAppend(r.url,"datasets/".concat(t.dataset,"/solarradiation"))),r.url=W.urlAppend(r.url,"returnContent=true"),S2.toObject(t,n);var o=W.toJSON(n);return r.request({method:"POST",data:o,scope:r,success:e,failure:e})}}}])&&_2(r.prototype,n),o&&_2(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function A2(t){"@babel/helpers - typeof";return(A2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function M2(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,j2(n.key),n)}}function j2(t){var e=function(t,e){if("object"!=A2(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=A2(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==A2(e)?e:e+""}var I2=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.exp=null,this.value=100,W.extend(this,e),this.CLASS_NAME="SuperMap.BufferDistance"},(e=[{key:"destroy",value:function(){this.exp=null,this.value=null}}])&&M2(t.prototype,e),r&&M2(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function N2(t){"@babel/helpers - typeof";return(N2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function L2(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,R2(n.key),n)}}function R2(t){var e=function(t,e){if("object"!=N2(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=N2(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==N2(e)?e:e+""}var D2=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.endType=dn.FLAT,this.leftDistance=new I2,this.rightDistance=new I2,this.semicircleLineSegment=4,this.radiusUnit=rn.METER,e&&W.extend(this,e),this.CLASS_NAME="SuperMap.BufferSetting"},(e=[{key:"destroy",value:function(){var t=this;t.endType=null,t.leftDistance&&(t.leftDistance.destroy(),t.leftDistance=null),t.rightDistance&&(t.rightDistance.destroy(),t.rightDistance=null),t.semicircleLineSegment=null,t.radiusUnit=null}}])&&L2(t.prototype,e),r&&L2(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function B2(t){"@babel/helpers - typeof";return(B2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function F2(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,G2(n.key),n)}}function G2(t){var e=function(t,e){if("object"!=B2(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=B2(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==B2(e)?e:e+""}var U2=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);this.bufferSetting=new D2,W.extend(this,e),this.CLASS_NAME="SuperMap.BufferAnalystParameters"},(e=[{key:"destroy",value:function(){this.bufferSetting&&(this.bufferSetting.destroy(),this.bufferSetting=null)}}])&&F2(t.prototype,e),r&&F2(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function z2(t){"@babel/helpers - typeof";return(z2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function V2(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,H2(n.key),n)}}function H2(t){var e=function(t,e){if("object"!=z2(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=z2(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==z2(e)?e:e+""}var W2=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.expectCount=1e3,this.dataset=null,this.dataReturnMode=bn.RECORDSET_ONLY,this.deleteExistResultDataset=!0,W.extend(this,e),this.CLASS_NAME="SuperMap.DataReturnOption"},(e=[{key:"destroy",value:function(){this.expectCount=null,this.dataset=null,this.dataReturnMode=null,this.deleteExistResultDataset=null}}])&&V2(t.prototype,e),r&&V2(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function q2(t){"@babel/helpers - typeof";return(q2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Y2(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,X2(n.key),n)}}function X2(t){var e=function(t,e){if("object"!=q2(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=q2(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==q2(e)?e:e+""}function J2(t,e,r){return e=Q2(e),function(t,e){if(e&&("object"===q2(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Q2(t).constructor):e.apply(t,r))}function K2(){return(K2="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Q2(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Q2(t){return(Q2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Z2(t,e){return(Z2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var $2=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=J2(this,e,[t])).dataset=null,r.filterQueryParameter=new EB,r.resultSetting=new W2,r.isAttributeRetained=!0,r.isUnion=!1,W.extend(r,t),r.CLASS_NAME="SuperMap.DatasetBufferAnalystParameters",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Z2(t,e)}(e,U2),r=e,o=[{key:"toObject",value:function(t,e){for(var r in t)if("bufferSetting"===r)t.bufferSetting.radiusUnit=t.bufferSetting.radiusUnit.toUpperCase(),e.bufferAnalystParameter=t.bufferSetting;else if("resultSetting"===r)e.dataReturnOption=t.resultSetting;else{if("dataset"===r)continue;e[r]=t[r]}}}],(n=[{key:"destroy",value:function(){K2(Q2(e.prototype),"destroy",this).call(this);var t=this;t.dataset=null,t.filterQueryParameter&&(t.filterQueryParameter.destroy(),t.filterQueryParameter=null),t.resultSetting&&(t.resultSetting.destroy(),t.resultSetting=null),t.isAttributeRetained=null,t.isUnion=null}}])&&Y2(r.prototype,n),o&&Y2(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function t3(t){"@babel/helpers - typeof";return(t3="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function e3(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,r3(n.key),n)}}function r3(t){var e=function(t,e){if("object"!=t3(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=t3(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==t3(e)?e:e+""}function n3(t,e,r){return e=i3(e),function(t,e){if(e&&("object"===t3(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],i3(t).constructor):e.apply(t,r))}function o3(){return(o3="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=i3(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function i3(t){return(i3=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function a3(t,e){return(a3=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var s3=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=n3(this,e,[t])).sourceGeometry=null,r.sourceGeometrySRID=null,t&&W.extend(r,t),r.CLASS_NAME=" SuperMap.GeometryBufferAnalystParameters",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a3(t,e)}(e,U2),r=e,o=[{key:"toObject",value:function(t,e){for(var r in t)if("bufferSetting"===r){var n={};for(var o in t.bufferSetting)n[o]=t.bufferSetting[o];e.analystParameter=n}else"sourceGeometry"===r?e.sourceGeometry=zn.fromGeometry(t.sourceGeometry):e[r]=t[r]}}],(n=[{key:"destroy",value:function(){o3(i3(e.prototype),"destroy",this).call(this);this.sourceGeometry&&(this.sourceGeometry.destroy(),this.sourceGeometry=null)}}])&&e3(r.prototype,n),o&&e3(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function u3(t){"@babel/helpers - typeof";return(u3="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l3(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,c3(n.key),n)}}function c3(t){var e=function(t,e){if("object"!=u3(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=u3(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==u3(e)?e:e+""}function f3(t,e,r){return e=p3(e),function(t,e){if(e&&("object"===u3(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],p3(t).constructor):e.apply(t,r))}function h3(){return(h3="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=p3(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function p3(t){return(p3=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function d3(t,e){return(d3=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var y3=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=f3(this,e,[t,r])).mode=null,r&&W.extend(n,r),n.CLASS_NAME="SuperMap.BufferAnalystService",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&d3(t,e)}(e,g2),r=e,(n=[{key:"destroy",value:function(){h3(p3(e.prototype),"destroy",this).call(this),this.mode=null}},{key:"processAsync",value:function(t,e){var r={},n=this;t instanceof $2?(n.mode="datasets",n.url=W.urlPathAppend(n.url,"datasets/"+t.dataset+"/buffer"),$2.toObject(t,r)):t instanceof s3&&(n.mode="geometry",n.url=W.urlPathAppend(n.url,"geometry/buffer"),s3.toObject(t,r));var o=W.toJSON(r);return this.returnContent=!0,n.request({method:"POST",data:o,scope:n,success:e,failure:e})}},{key:"dataFormat",value:function(){return[Jr.GEOJSON,Jr.ISERVER,Jr.FGB]}}])&&l3(r.prototype,n),o&&l3(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function v3(t){"@babel/helpers - typeof";return(v3="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function g3(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,m3(n.key),n)}}function m3(t){var e=function(t,e){if("object"!=v3(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=v3(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==v3(e)?e:e+""}var b3=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.dataset=null,this.bounds=null,this.fieldName=null,this.resultGridDatasetResolution=null,this.searchRadius=null,this.targetDatasource=null,this.resultGridName=null,this.deleteExistResultDataset=!1,W.extend(this,e),this.CLASS_NAME="SuperMap.DensityKernelAnalystParameters"},r=[{key:"toObject",value:function(t,e){for(var r in t)"dataset"!==r&&(e[r]=t[r])}}],(e=[{key:"destroy",value:function(){var t=this;t.dataset=null,t.bounds=null,t.fieldName=null,t.resultGridDatasetResolution=null,t.searchRadius=null,t.targetDatasource=null,t.resultGridName=null,t.deleteExistResultDataset=null}}])&&g3(t.prototype,e),r&&g3(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function w3(t){"@babel/helpers - typeof";return(w3="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function S3(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,x3(n.key),n)}}function x3(t){var e=function(t,e){if("object"!=w3(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=w3(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==w3(e)?e:e+""}function _3(t,e,r){return e=O3(e),function(t,e){if(e&&("object"===w3(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],O3(t).constructor):e.apply(t,r))}function E3(){return(E3="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=O3(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function O3(t){return(O3=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function P3(t,e){return(P3=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var k3=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=_3(this,e,[t,r])).mode=null,r&&W.extend(n,r),n.CLASS_NAME="SuperMap.DensityAnalystService",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&P3(t,e)}(e,g2),r=e,(n=[{key:"destroy",value:function(){E3(O3(e.prototype),"destroy",this).call(this),this.mode=null}},{key:"processAsync",value:function(t,e){var r=this,n=new Object;t instanceof b3&&(r.url=W.urlPathAppend(r.url,"datasets/"+t.dataset+"/densityanalyst/kernel"),r.mode="kernel"),b3.toObject(t,n);var o=W.toJSON(n);return r.url=W.urlAppend(r.url,"returnContent=true"),r.request({method:"POST",data:o,scope:r,success:e,failure:e})}}])&&S3(r.prototype,n),o&&S3(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function C3(t){"@babel/helpers - typeof";return(C3="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function T3(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,A3(n.key),n)}}function A3(t){var e=function(t,e){if("object"!=C3(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=C3(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==C3(e)?e:e+""}var M3=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.routeTable=null,this.routeIDField=null,this.attributeFilter=null,this.eventTable=null,this.eventRouteIDField=null,this.measureField=null,this.measureStartField=null,this.measureEndField=null,this.measureOffsetField=null,this.errorInfoField=null,this.retainedFields=null,this.dataReturnOption=null,e&&W.extend(this,e),this.CLASS_NAME="SuperMap.GenerateSpatialDataParameters"},(e=[{key:"destroy",value:function(){var t=this;t.routeTable&&(t.routeTable=null),t.routeIDField=null,t.attributeFilter=null,t.eventTable=null,t.eventRouteIDField=null,t.measureField=null,t.measureStartField=null,t.measureEndField=null,t.measureOffsetField=null,t.errorInfoField=null,t.dataReturnOption&&(t.dataReturnOption.destroy(),t.dataReturnOption=null)}}])&&T3(t.prototype,e),r&&T3(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function j3(t){"@babel/helpers - typeof";return(j3="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function I3(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,N3(n.key),n)}}function N3(t){var e=function(t,e){if("object"!=j3(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=j3(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==j3(e)?e:e+""}function L3(t,e,r){return e=D3(e),function(t,e){if(e&&("object"===j3(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],D3(t).constructor):e.apply(t,r))}function R3(){return(R3="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=D3(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function D3(t){return(D3=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function B3(t,e){return(B3=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var F3=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=L3(this,e,[t,r])).CLASS_NAME="SuperMap.GenerateSpatialDataService",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&B3(t,e)}(e,g2),r=e,(n=[{key:"destroy",value:function(){R3(D3(e.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){if(t instanceof M3){var r;return r=this.getJsonParameters(t),this.request({method:"POST",data:r,scope:this,success:e,failure:e})}}},{key:"getJsonParameters",value:function(t){var e="datasets/"+t.routeTable+"/linearreferencing/generatespatialdata";return this.url=W.urlPathAppend(this.url,e),this.url=W.urlAppend(this.url,"returnContent=true"),W.toJSON(t)}}])&&I3(r.prototype,n),o&&I3(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function G3(t){"@babel/helpers - typeof";return(G3="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function U3(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,z3(n.key),n)}}function z3(t){var e=function(t,e){if("object"!=G3(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=G3(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==G3(e)?e:e+""}var V3=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.dataset=null,this.sourceFilter=null,this.referenceFilter=null,this.spatialRelationType=null,this.isBorderInside=null,this.returnFeature=null,this.returnGeoRelatedOnly=null,this.startRecord=0,this.expectCount=500,e&&W.extend(this,e),this.CLASS_NAME="SuperMap.GeoRelationAnalystParameters"},(e=[{key:"destroy",value:function(){var t=this;t.sourceFilter&&t.sourceFilter.destroy(),t.sourceFilter=null,t.referenceFilter&&t.referenceFilter.destroy(),t.referenceFilter=null,t.dataset=null,t.spatialRelationType=null,t.isBorderInside=null,t.returnFeature=null,t.returnGeoRelatedOnly=null,t.startRecord=null,t.expectCount=null}}])&&U3(t.prototype,e),r&&U3(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function H3(t){"@babel/helpers - typeof";return(H3="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function W3(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,q3(n.key),n)}}function q3(t){var e=function(t,e){if("object"!=H3(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=H3(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==H3(e)?e:e+""}function Y3(t,e,r){return e=J3(e),function(t,e){if(e&&("object"===H3(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],J3(t).constructor):e.apply(t,r))}function X3(){return(X3="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=J3(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function J3(t){return(J3=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function K3(t,e){return(K3=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Q3=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Y3(this,e,[t,r])).CLASS_NAME="SuperMap.GeoRelationAnalystService",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&K3(t,e)}(e,g2),r=e,(n=[{key:"destroy",value:function(){X3(J3(e.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){if(t instanceof V3){var r=this;r.url=W.urlPathAppend(r.url,"datasets/"+t.dataset+"/georelation");var n=W.toJSON(t);return r.url=W.urlAppend(r.url,"returnContent=true"),r.request({method:"POST",data:n,scope:r,success:e,failure:e})}}}])&&W3(r.prototype,n),o&&W3(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function Z3(t){"@babel/helpers - typeof";return(Z3="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function $3(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,t5(n.key),n)}}function t5(t){var e=function(t,e){if("object"!=Z3(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Z3(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Z3(e)?e:e+""}var e5=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e&&(this.bounds=null,this.searchRadius=0,this.zValueFieldName=null,this.zValueScale=1,this.resolution=null,this.filterQueryParameter=null,this.outputDatasetName=null,this.outputDatasourceName=null,this.pixelFormat=null,this.dataset=null,this.inputPoints=null,this.InterpolationAnalystType="dataset",this.clipParam=null,W.extend(this,e),this.CLASS_NAME="SuperMap.InterpolationAnalystParameters")},r=[{key:"toObject",value:function(t,e){for(var r in t)if("inputPoints"===r&&"geometry"===t.InterpolationAnalystType){for(var n=[],o=0;o<t.inputPoints.length;o++){var i=t.inputPoints[o],a={x:i.x,y:i.y,z:i.tag};n.push(a)}e[r]=n}else e[r]=t[r]}}],(e=[{key:"destroy",value:function(){var t=this;t.bounds=null,t.searchRadius=null,t.zValueFieldName=null,t.zValueScale=null,t.resolution=null,t.filterQueryParameter=null,t.outputDatasetName=null,t.pixelFormat=null}}])&&$3(t.prototype,e),r&&$3(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function r5(t){"@babel/helpers - typeof";return(r5="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n5(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,o5(n.key),n)}}function o5(t){var e=function(t,e){if("object"!=r5(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=r5(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==r5(e)?e:e+""}function i5(t,e,r){return e=s5(e),function(t,e){if(e&&("object"===r5(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],s5(t).constructor):e.apply(t,r))}function a5(){return(a5="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=s5(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function s5(t){return(s5=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u5(t,e){return(u5=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var l5=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=i5(this,e,[t])).smooth=.1,r.tension=40,r.searchMode=null,r.expectedCount=12,r.maxPointCountForInterpolation=200,r.maxPointCountInNode=50,t&&W.extend(r,t),r.CLASS_NAME="SuperMap.InterpolationRBFAnalystParameters",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&u5(t,e)}(e,e5),r=e,o=[{key:"toObject",value:function(t,e){for(var r in t)e[r]=t[r]}}],(n=[{key:"destroy",value:function(){a5(s5(e.prototype),"destroy",this).call(this);var t=this;t.smooth=null,t.tension=null,t.searchMode=null,t.expectedCount=null,t.maxPointCountForInterpolation=null,t.maxPointCountInNode=null}}])&&n5(r.prototype,n),o&&n5(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function c5(t){"@babel/helpers - typeof";return(c5="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function f5(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,h5(n.key),n)}}function h5(t){var e=function(t,e){if("object"!=c5(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=c5(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==c5(e)?e:e+""}function p5(t,e,r){return e=y5(e),function(t,e){if(e&&("object"===c5(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],y5(t).constructor):e.apply(t,r))}function d5(){return(d5="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=y5(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function y5(t){return(y5=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function v5(t,e){return(v5=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var g5=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r=p5(this,e,[t]),t&&W.extend(r,t),r.CLASS_NAME="SuperMap.InterpolationDensityAnalystParameters",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&v5(t,e)}(e,e5),r=e,(n=[{key:"destroy",value:function(){d5(y5(e.prototype),"destroy",this).call(this)}}])&&f5(r.prototype,n),o&&f5(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function m5(t){"@babel/helpers - typeof";return(m5="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function b5(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,w5(n.key),n)}}function w5(t){var e=function(t,e){if("object"!=m5(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=m5(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==m5(e)?e:e+""}function S5(t,e,r){return e=_5(e),function(t,e){if(e&&("object"===m5(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],_5(t).constructor):e.apply(t,r))}function x5(){return(x5="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=_5(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function _5(t){return(_5=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function E5(t,e){return(E5=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var O5=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=S5(this,e,[t])).power=2,r.searchMode=null,r.expectedCount=12,t&&W.extend(r,t),r.CLASS_NAME="SuperMap.InterpolationIDWAnalystParameters",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&E5(t,e)}(e,e5),r=e,(n=[{key:"destroy",value:function(){x5(_5(e.prototype),"destroy",this).call(this);this.power=null,this.searchMode=null,this.expectedCount=null}}])&&b5(r.prototype,n),o&&b5(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function P5(t){"@babel/helpers - typeof";return(P5="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function k5(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,C5(n.key),n)}}function C5(t){var e=function(t,e){if("object"!=P5(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=P5(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==P5(e)?e:e+""}var T5=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e&&(this.clipRegion=null,this.createResultDataset=!1,this.resultDatasetName=null,this.resultDatasourceName=null,this.returnResultRegion=!0,W.extend(this,e),this.CLASS_NAME="SuperMap.ThiessenAnalystParameters")},(e=[{key:"destroy",value:function(){var t=this;t.clipRegion&&(t.clipRegion.destroy(),t.clipRegion=null),t.createResultDataset=null,t.resultDatasetName=null,t.resultDatasourceName=null,t.returnResultRegion=null}}])&&k5(t.prototype,e),r&&k5(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function A5(t){"@babel/helpers - typeof";return(A5="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function M5(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,j5(n.key),n)}}function j5(t){var e=function(t,e){if("object"!=A5(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=A5(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==A5(e)?e:e+""}function I5(t,e,r){return e=L5(e),function(t,e){if(e&&("object"===A5(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],L5(t).constructor):e.apply(t,r))}function N5(){return(N5="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=L5(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function L5(t){return(L5=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function R5(t,e){return(R5=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var D5=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=I5(this,e,[t])).type=null,r.mean=null,r.angle=0,r.nugget=0,r.range=0,r.sill=0,r.variogramMode=_n.SPHERICAL,r.exponent=En.EXP1,r.searchMode=null,r.expectedCount=12,r.maxPointCountForInterpolation=200,r.maxPointCountInNode=50,t&&W.extend(r,t),r.CLASS_NAME="SuperMap.InterpolationKrigingAnalystParameters",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&R5(t,e)}(e,e5),r=e,(n=[{key:"destroy",value:function(){N5(L5(e.prototype),"destroy",this).call(this);var t=this;t.type=null,t.mean=null,t.angle=null,t.nugget=null,t.range=null,t.sill=null,t.variogramMode=null,t.exponent=null,t.searchMode=null,t.expectedCount=null,t.maxPointCountForInterpolation=null,t.maxPointCountInNode=null}}])&&M5(r.prototype,n),o&&M5(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function B5(t){"@babel/helpers - typeof";return(B5="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function F5(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,G5(n.key),n)}}function G5(t){var e=function(t,e){if("object"!=B5(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=B5(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==B5(e)?e:e+""}function U5(t,e,r){return e=V5(e),function(t,e){if(e&&("object"===B5(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],V5(t).constructor):e.apply(t,r))}function z5(){return(z5="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=V5(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function V5(t){return(V5=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function H5(t,e){return(H5=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var W5=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=U5(this,e,[t,r])).mode=null,r&&W.extend(n,r),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&H5(t,e)}(e,g2),r=e,(n=[{key:"destroy",value:function(){z5(V5(e.prototype),"destroy",this).call(this),this.mode=null,this.CLASS_NAME="SuperMap.InterpolationAnalystService"}},{key:"processAsync",value:function(t,e){var r={},n=this;t instanceof g5?(n.mode="Density","geometry"===t.InterpolationAnalystType?n.url=W.urlPathAppend(n.url,"geometry/interpolation/density"):n.url=W.urlPathAppend(n.url,"datasets/"+t.dataset+"/interpolation/density")):t instanceof O5?(n.mode="IDW","geometry"===t.InterpolationAnalystType?n.url=W.urlPathAppend(n.url,"geometry/interpolation/idw"):n.url=W.urlPathAppend(n.url,"datasets/"+t.dataset+"/interpolation/idw")):t instanceof l5?(n.mode="RBF","geometry"===t.InterpolationAnalystType?n.url=W.urlPathAppend(n.url,"geometry/interpolation/rbf"):n.url=W.urlPathAppend(n.url,"datasets/"+t.dataset+"/interpolation/rbf")):t instanceof D5&&(n.mode="Kriging","geometry"===t.InterpolationAnalystType?n.url=W.urlPathAppend(n.url,"geometry/interpolation/kriging"):n.url=W.urlPathAppend(n.url,"datasets/"+t.dataset+"/interpolation/kriging")),e5.toObject(t,r);var o=W.toJSON(r);return n.url=W.urlAppend(n.url,"returnContent=true"),n.request({method:"POST",data:o,scope:n,success:e,failure:e})}}])&&F5(r.prototype,n),o&&F5(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function q5(t){"@babel/helpers - typeof";return(q5="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Y5(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,X5(n.key),n)}}function X5(t){var e=function(t,e){if("object"!=q5(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=q5(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==q5(e)?e:e+""}var J5=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e&&(this.dataset=null,this.extractRegion=null,this.expression=null,this.isZip=!1,this.ignoreNoValue=!1,this.targetDatasource=null,this.resultGridName=null,this.deleteExistResultDataset=!1,W.extend(this,e),this.CLASS_NAME="SuperMap.MathExpressionAnalysisParameters")},r=[{key:"toObject",value:function(t,e){for(var r in t)if("dataset"!==r&&(e[r]=t[r]),"extractRegion"===r&&t[r]){for(var n=t[r].components[0].components,o={},i=[],a=n.length,s=0;s<a-1;s++){var u={};u.x=n[s].x,u.y=n[s].y,i.push(u)}o.points=i,o.type="REGION",e[r]=o}}}],(e=[{key:"destroy",value:function(){var t=this;t.dataset=null,t.bounds=null,t.expression=null,t.isZip=!0,t.ignoreNoValue=!0,t.targetDatasource=null,t.resultGridName=null,t.deleteExistResultDataset=null}}])&&Y5(t.prototype,e),r&&Y5(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function K5(t){"@babel/helpers - typeof";return(K5="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Q5(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Z5(n.key),n)}}function Z5(t){var e=function(t,e){if("object"!=K5(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=K5(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==K5(e)?e:e+""}function $5(t,e,r){return e=e4(e),function(t,e){if(e&&("object"===K5(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],e4(t).constructor):e.apply(t,r))}function t4(){return(t4="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=e4(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function e4(t){return(e4=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function r4(t,e){return(r4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var n4=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=$5(this,e,[t,r])).CLASS_NAME="SuperMap.MathExpressionAnalysisService",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&r4(t,e)}(e,g2),r=e,(n=[{key:"destroy",value:function(){t4(e4(e.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){var r=this,n={};t instanceof J5&&(r.url=W.urlPathAppend(r.url,"datasets/"+t.dataset+"/mathanalyst")),J5.toObject(t,n);var o=W.toJSON(n);return r.url=W.urlAppend(r.url,"returnContent=true"),r.request({method:"POST",data:o,scope:r,success:e,failure:e})}}])&&Q5(r.prototype,n),o&&Q5(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function o4(t){"@babel/helpers - typeof";return(o4="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i4(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,a4(n.key),n)}}function a4(t){var e=function(t,e){if("object"!=o4(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=o4(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==o4(e)?e:e+""}var s4=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.operation=yn.UNION,e&&W.extend(this,e),this.CLASS_NAME="SuperMap.OverlayAnalystParameters"},(e=[{key:"destroy",value:function(){this.operation=null}}])&&i4(t.prototype,e),r&&i4(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function u4(t){"@babel/helpers - typeof";return(u4="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l4(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,c4(n.key),n)}}function c4(t){var e=function(t,e){if("object"!=u4(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=u4(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==u4(e)?e:e+""}function f4(t,e,r){return e=p4(e),function(t,e){if(e&&("object"===u4(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],p4(t).constructor):e.apply(t,r))}function h4(){return(h4="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=p4(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function p4(t){return(p4=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function d4(t,e){return(d4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var y4=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=f4(this,e,[t])).operateDataset=null,r.operateDatasetFields=[],r.operateDatasetFilter=new EB,r.operateRegions=[],r.sourceDataset=null,r.sourceDatasetFields=[],r.sourceDatasetFilter=new EB,r.tolerance=0,r.resultSetting=new W2,W.extend(r,t),r.CLASS_NAME="SuperMap.DatasetOverlayAnalystParameters",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&d4(t,e)}(e,s4),r=e,o=[{key:"toObject",value:function(t,e){for(var r in t)if("sourceDataset"!==r)if("operateRegions"===r){e.operateRegions=[];var n=t.operateRegions;for(var o in n)n.hasOwnProperty(o)&&(e.operateRegions[o]=zn.fromGeometry(n[o]))}else"resultSetting"===r?e.dataReturnOption=t.resultSetting:e[r]=t[r]}}],(n=[{key:"destroy",value:function(){h4(p4(e.prototype),"destroy",this).call(this);var t=this;if(t.operateDataset=null,t.operateDatasetFields=null,t.operateDatasetFilter&&(t.operateDatasetFilter.destroy(),t.operateDatasetFilter=null),t.operateRegions){for(var r=0,n=t.operateRegions,o=n.length;r<o;r++)n[r].destroy();t.operateRegions=null}t.sourceDataset=null,t.sourceDatasetFields=null,t.sourceDatasetFilter&&(t.sourceDatasetFilter.destroy(),t.sourceDatasetFilter=null),t.tolerance=null,t.resultSetting&&(t.resultSetting.destroy(),t.resultSetting=null)}}])&&l4(r.prototype,n),o&&l4(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function v4(t){"@babel/helpers - typeof";return(v4="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function g4(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,m4(n.key),n)}}function m4(t){var e=function(t,e){if("object"!=v4(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=v4(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==v4(e)?e:e+""}function b4(t,e,r){return e=S4(e),function(t,e){if(e&&("object"===v4(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],S4(t).constructor):e.apply(t,r))}function w4(){return(w4="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=S4(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function S4(t){return(S4=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function x4(t,e){return(x4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var _4=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r=b4(this,e,[t]),t&&t.operateGeometry&&(r.operateGeometry=t.operateGeometry),t&&t.sourceGeometry&&(r.sourceGeometry=t.sourceGeometry),t&&t.operateGeometries&&(r.operateGeometries=t.operateGeometries),t&&t.sourceGeometries&&(r.sourceGeometries=t.sourceGeometries),t&&W.extend(r,t),r.CLASS_NAME="SuperMap.GeometryOverlayAnalystParameters",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&x4(t,e)}(e,s4),r=e,o=[{key:"toObject",value:function(t,e){for(var r in t)if("sourceGeometry"===r)e.sourceGeometry=zn.fromGeometry(t.sourceGeometry);else if("sourceGeometries"===r){for(var n=[],o=0;o<t.sourceGeometries.length;o++)n.push(zn.fromGeometry(t.sourceGeometries[o]));e.sourceGeometries=n}else if("operateGeometry"===r)e.operateGeometry=zn.fromGeometry(t.operateGeometry);else if("operateGeometries"===r){for(var i=[],a=0;a<t.operateGeometries.length;a++)i.push(zn.fromGeometry(t.operateGeometries[a]));e.operateGeometries=i}else e[r]=t[r]}}],(n=[{key:"destroy",value:function(){w4(S4(e.prototype),"destroy",this).call(this);var t=this;t.sourceGeometry&&(t.sourceGeometry.destroy(),t.sourceGeometry=null),t.sourceGeometries&&(t.sourceGeometries.destroy(),t.sourceGeometries=null),t.sourceGeometry&&(t.sourceGeometry.destroy(),t.sourceGeometry=null),t.operateGeometries&&(t.operateGeometries.destroy(),t.operateGeometries=null)}}])&&g4(r.prototype,n),o&&g4(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function E4(t){"@babel/helpers - typeof";return(E4="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function O4(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,P4(n.key),n)}}function P4(t){var e=function(t,e){if("object"!=E4(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=E4(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==E4(e)?e:e+""}function k4(t,e,r){return e=T4(e),function(t,e){if(e&&("object"===E4(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],T4(t).constructor):e.apply(t,r))}function C4(){return(C4="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=T4(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function T4(t){return(T4=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function A4(t,e){return(A4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var M4=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=k4(this,e,[t,r])).mode=null,r&&W.extend(n,r),n.CLASS_NAME="SuperMap.OverlayAnalystService",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&A4(t,e)}(e,g2),r=e,(n=[{key:"destroy",value:function(){C4(T4(e.prototype),"destroy",this).call(this),this.mode=null}},{key:"processAsync",value:function(t,e){var r={},n=this;t instanceof y4?(n.mode="datasets",n.url=W.urlPathAppend(n.url,"datasets/"+t.sourceDataset+"/overlay"),y4.toObject(t,r)):t instanceof _4&&(n.mode="geometry",t.operateGeometries&&t.sourceGeometries?(n.url=W.urlPathAppend(n.url,"geometry/overlay/batch"),n.url=W.urlAppend(n.url,"ignoreAnalystParam=true")):n.url=W.urlPathAppend(n.url,"geometry/overlay"),_4.toObject(t,r)),this.returnContent=!0;var o=W.toJSON(r);return n.request({method:"POST",data:o,scope:n,success:e,failure:e})}},{key:"dataFormat",value:function(){return[Jr.GEOJSON,Jr.ISERVER,Jr.FGB]}}])&&O4(r.prototype,n),o&&O4(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function j4(t){"@babel/helpers - typeof";return(j4="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function I4(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,N4(n.key),n)}}function N4(t){var e=function(t,e){if("object"!=j4(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=j4(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==j4(e)?e:e+""}var L4=function(){return t=function t(e){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),!e)return this;this.sourceRoute=null,this.point=null,this.tolerance=null,this.isIgnoreGap=!1,W.extend(this,e),this.CLASS_NAME="SuperMap.RouteCalculateMeasureParameters"},(e=[{key:"destroy",value:function(){var t=this;t.sourceRoute=null,t.point=null,t.tolerance&&(t.tolerance=null),t.isIgnoreGap&&(t.isIgnoreGap=!1)}}])&&I4(t.prototype,e),r&&I4(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function R4(t){"@babel/helpers - typeof";return(R4="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function D4(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,B4(n.key),n)}}function B4(t){var e=function(t,e){if("object"!=R4(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=R4(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==R4(e)?e:e+""}function F4(t,e,r){return e=U4(e),function(t,e){if(e&&("object"===R4(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],U4(t).constructor):e.apply(t,r))}function G4(){return(G4="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=U4(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function U4(t){return(U4=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function z4(t,e){return(z4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var V4=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=F4(this,e,[t,r])).CLASS_NAME="SuperMap.RouteCalculateMeasureService",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&z4(t,e)}(e,g2),r=e,(n=[{key:"destroy",value:function(){G4(U4(e.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){if(t instanceof L4){var r;return r=this.getJsonParameters(t),this.request({method:"POST",data:r,scope:this,success:e,failure:e})}}},{key:"getJsonParameters",value:function(t){return this.url=W.urlPathAppend(this.url,"geometry/calculatemeasure"),this.url=W.urlAppend(this.url,"returnContent=true"),W.toJSON(t)}}])&&D4(r.prototype,n),o&&D4(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function H4(t){"@babel/helpers - typeof";return(H4="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function W4(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,q4(n.key),n)}}function q4(t){var e=function(t,e){if("object"!=H4(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=H4(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==H4(e)?e:e+""}var Y4=function(){return t=function t(e){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),!e)return this;this.sourceRoute=null,this.dataset=null,this.routeIDField=null,this.routeID=null,this.type=null,this.measure=null,this.offset=0,this.isIgnoreGap=!1,this.startMeasure=null,this.endMeasure=null;var r=e.sourceRoute,n={};if(r&&r instanceof L&&r.components){n.type=r.type,n.parts=r.parts;for(var o=[],i=0,a=r.components.length;i<a;i++)o=o.concat(r.components[i].components);n.points=o,e.sourceRoute=n}W.extend(this,e),this.CLASS_NAME="SuperMap.RouteLocatorParameters"},(e=[{key:"destroy",value:function(){var t=this;t.sourceRoute=null,t.type=null,t.measure=null,t.offset=0,t.isIgnoreGap=!1,t.startMeasure=null,t.endMeasure=null,t.dataset=null,t.routeID=null,t.routeIDField=null}}])&&W4(t.prototype,e),r&&W4(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function X4(t){"@babel/helpers - typeof";return(X4="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function J4(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,K4(n.key),n)}}function K4(t){var e=function(t,e){if("object"!=X4(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=X4(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==X4(e)?e:e+""}function Q4(t,e,r){return e=$4(e),function(t,e){if(e&&("object"===X4(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],$4(t).constructor):e.apply(t,r))}function Z4(){return(Z4="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=$4(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function $4(t){return($4=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function t6(t,e){return(t6=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var e6=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Q4(this,e,[t,r])).CLASS_NAME="SuperMap.RouteLocatorService",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&t6(t,e)}(e,g2),r=e,(n=[{key:"destroy",value:function(){Z4($4(e.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){if(t instanceof Y4){var r;return r=this.getJsonParameters(t),this.request({method:"POST",data:r,scope:this,success:e,failure:e})}}},{key:"getJsonParameters",value:function(t){var e="geometry/routelocator";return t.dataset&&(e="datasets/"+t.dataset+"/linearreferencing/routelocator",t.sourceRoute=null),this.url=W.urlPathAppend(this.url,e),this.url=W.urlAppend(this.url,"returnContent=true"),W.toJSON(t)}}])&&J4(r.prototype,n),o&&J4(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function r6(t){"@babel/helpers - typeof";return(r6="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n6(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,o6(n.key),n)}}function o6(t){var e=function(t,e){if("object"!=r6(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=r6(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==r6(e)?e:e+""}var i6=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.clipRegion=null,this.datumValue=0,this.expectedZValues=null,this.interval=0,this.resampleTolerance=0,this.smoothMethod=gn.BSPLINE,this.smoothness=0,e&&W.extend(this,e),this.CLASS_NAME="SuperMap.SurfaceAnalystParametersSetting"},(e=[{key:"destroy",value:function(){var t=this;t.clipRegion&&(t.clipRegion.destroy(),t.clipRegion=null),t.datumValue=null,t.expectedZValues=null,t.interval=null,t.resampleTolerance=null,t.smoothMethod=null,t.smoothness=null}},{key:"toJSON",value:function(){var t="'datumValue':"+W.toJSON(this.datumValue);if(t+=",'interval':"+W.toJSON(this.interval),t+=",'resampleTolerance':"+W.toJSON(this.resampleTolerance),t+=",'smoothMethod':"+W.toJSON(this.smoothMethod),t+=",'smoothness':"+W.toJSON(this.smoothness),null!=this.expectedZValues&&(t+=",'expectedZValues':"+W.toJSON(this.expectedZValues)),null!=this.clipRegion){var e=this.clipRegion;this.clipRegion instanceof L&&this.clipRegion.components&&(e=zn.fromGeometry(this.clipRegion)),t+=",'clipRegion':"+W.toJSON(e)}return"{"+t+"}"}}])&&n6(t.prototype,e),r&&n6(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function a6(t){"@babel/helpers - typeof";return(a6="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s6(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,u6(n.key),n)}}function u6(t){var e=function(t,e){if("object"!=a6(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=a6(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==a6(e)?e:e+""}var l6=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.resolution=0,this.extractParameter=new i6,this.resultSetting=new W2,this.surfaceAnalystMethod=mn.ISOLINE,e&&W.extend(this,e),this.CLASS_NAME="SuperMap.SurfaceAnalystParameters"},(e=[{key:"destroy",value:function(){var t=this;t.resolution=null,t.extractParameter&&(t.extractParameter.destroy(),t.extractParameter=null),t.resultSetting&&(t.resultSetting.destroy(),t.resultSetting=null),t.surfaceAnalystMethod=null}}])&&s6(t.prototype,e),r&&s6(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function c6(t){"@babel/helpers - typeof";return(c6="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function f6(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,h6(n.key),n)}}function h6(t){var e=function(t,e){if("object"!=c6(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=c6(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==c6(e)?e:e+""}function p6(t,e,r){return e=y6(e),function(t,e){if(e&&("object"===c6(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],y6(t).constructor):e.apply(t,r))}function d6(){return(d6="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=y6(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function y6(t){return(y6=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function v6(t,e){return(v6=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var g6=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=p6(this,e,[t])).dataset=null,r.filterQueryParameter=new EB,r.zValueFieldName=null,t&&W.extend(r,t),r.CLASS_NAME="SuperMap.DatasetSurfaceAnalystParameters",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&v6(t,e)}(e,l6),r=e,o=[{key:"toObject",value:function(t,e){for(var r in t)if("filterQueryParameter"===r&&(e.filterQueryParameter=t.filterQueryParameter),"extractParameter"===r)t.extractParameter.clipRegion instanceof L&&t.extractParameter.clipRegion.components&&(t.extractParameter.clipRegion=zn.fromGeometry(t.extractParameter.clipRegion)),e.extractParameter=t.extractParameter;else{if("dataset"===r)continue;if("surfaceAnalystMethod"===r)continue;e[r]=t[r]}}}],(n=[{key:"destroy",value:function(){d6(y6(e.prototype),"destroy",this).call(this);var t=this;t.dataset=null,t.filterQueryParameter&&(t.filterQueryParameter.destroy(),t.filterQueryParameter=null),t.zValueFieldName=null}}])&&f6(r.prototype,n),o&&f6(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function m6(t){"@babel/helpers - typeof";return(m6="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function b6(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,w6(n.key),n)}}function w6(t){var e=function(t,e){if("object"!=m6(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=m6(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==m6(e)?e:e+""}function S6(t,e,r){return e=_6(e),function(t,e){if(e&&("object"===m6(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],_6(t).constructor):e.apply(t,r))}function x6(){return(x6="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=_6(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function _6(t){return(_6=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function E6(t,e){return(E6=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var O6=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=S6(this,e,[t])).points=null,r.zValues=null,t&&W.extend(r,t),r.CLASS_NAME="SuperMap.GeometrySurfaceAnalystParameters",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&E6(t,e)}(e,l6),r=e,(n=[{key:"destroy",value:function(){x6(_6(e.prototype),"destroy",this).call(this);if(this.points){for(var t=0,r=this.points,n=r.length;t<n;t++)r[t].destroy();this.points=null}this.zValues=null}}])&&b6(r.prototype,n),o&&b6(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function P6(t){"@babel/helpers - typeof";return(P6="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function k6(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,C6(n.key),n)}}function C6(t){var e=function(t,e){if("object"!=P6(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=P6(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==P6(e)?e:e+""}function T6(t,e,r){return e=M6(e),function(t,e){if(e&&("object"===P6(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],M6(t).constructor):e.apply(t,r))}function A6(){return(A6="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=M6(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function M6(t){return(M6=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function j6(t,e){return(j6=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var I6=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=T6(this,e,[t,r])).CLASS_NAME="SuperMap.SurfaceAnalystService",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&j6(t,e)}(e,g2),r=e,(n=[{key:"destroy",value:function(){A6(M6(e.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){if(t instanceof l6){var r;return r=this.getJsonParameters(t),this.request({method:"POST",data:r,scope:this,success:e,failure:e})}}},{key:"getJsonParameters",value:function(t){var e="",r={};if(t instanceof g6)this.url=W.urlPathAppend(this.url,"datasets/"+t.dataset+"/"+t.surfaceAnalystMethod.toLowerCase()),g6.toObject(t,r),e=W.toJSON(r);else{if(!(t instanceof O6))return;this.url=W.urlPathAppend(this.url,"geometry/"+t.surfaceAnalystMethod.toLowerCase()),e=W.toJSON(t)}return this.returnContent=!0,e}},{key:"dataFormat",value:function(){return[Jr.GEOJSON,Jr.ISERVER,Jr.FGB]}}])&&k6(r.prototype,n),o&&k6(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function N6(t){"@babel/helpers - typeof";return(N6="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function L6(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,R6(n.key),n)}}function R6(t){var e=function(t,e){if("object"!=N6(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=N6(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==N6(e)?e:e+""}var D6=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e&&(this.dataset=null,this.zFactor=1,this.averageCurvatureName=null,this.profileCurvatureName="",this.planCurvatureName="",this.deleteExistResultDataset=!1,W.extend(this,e),this.CLASS_NAME="SuperMap.TerrainCurvatureCalculationParameters")},r=[{key:"toObject",value:function(t,e){for(var r in t)"dataset"!==r&&(e[r]=t[r])}}],(e=[{key:"destroy",value:function(){var t=this;t.dataset=null,t.zFactor=1,t.averageCurvatureName=null,t.profileCurvatureName=null,t.planCurvatureName=null,t.deleteExistResultDataset=!0}}])&&L6(t.prototype,e),r&&L6(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function B6(t){"@babel/helpers - typeof";return(B6="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function F6(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,G6(n.key),n)}}function G6(t){var e=function(t,e){if("object"!=B6(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=B6(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==B6(e)?e:e+""}function U6(t,e,r){return e=V6(e),function(t,e){if(e&&("object"===B6(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],V6(t).constructor):e.apply(t,r))}function z6(){return(z6="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=V6(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function V6(t){return(V6=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function H6(t,e){return(H6=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var W6=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=U6(this,e,[t,r])).CLASS_NAME="SuperMap.TerrainCurvatureCalculationService",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&H6(t,e)}(e,g2),r=e,(n=[{key:"destroy",value:function(){z6(V6(e.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){var r=this,n={};t instanceof D6&&(r.url=W.urlPathAppend(r.url,"datasets/"+t.dataset+"/terraincalculation/curvature")),D6.toObject(t,n);var o=W.toJSON(n);return r.url=W.urlAppend(r.url,"returnContent=true"),r.request({method:"POST",data:o,scope:r,success:e,failure:e})}}])&&F6(r.prototype,n),o&&F6(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function q6(t){"@babel/helpers - typeof";return(q6="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Y6(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,X6(n.key),n)}}function X6(t){var e=function(t,e){if("object"!=q6(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=q6(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==q6(e)?e:e+""}var J6=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e&&(this.dataset=null,this.cutFillType="GRID",this.afterCutFillDataset=null,this.resultDataset=null,this.buildPyramid=null,this.deleteExistResultDataset=null,this.bufferRadius=null,this.isRoundHead=null,this.line3D=null,this.region=null,this.region3D=null,W.extend(this,e),this.CLASS_NAME="SuperMap.TerrainCutFillCalculationParameters")},r=[{key:"toObject",value:function(t,e){for(var r in t)"dataset"!==r&&(e[r]=t[r])}}],(e=[{key:"destroy",value:function(){var t=this;t.cutFillType=null,t.afterCutFillDataset=null,t.resultDataset=null,t.buildPyramid=null,t.deleteExistResultDataset=null,t.bufferRadius=null,t.isRoundHead=null,t.line3D=null,t.region=null,t.region3D=null}}])&&Y6(t.prototype,e),r&&Y6(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function K6(t){"@babel/helpers - typeof";return(K6="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Q6(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Z6(n.key),n)}}function Z6(t){var e=function(t,e){if("object"!=K6(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=K6(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==K6(e)?e:e+""}function $6(t,e,r){return e=e8(e),function(t,e){if(e&&("object"===K6(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],e8(t).constructor):e.apply(t,r))}function t8(){return(t8="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=e8(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function e8(t){return(e8=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function r8(t,e){return(r8=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var n8=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=$6(this,e,[t,r])).CLASS_NAME="SuperMap.TerrainCutFillCalculationService",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&r8(t,e)}(e,g2),r=e,(n=[{key:"destroy",value:function(){t8(e8(e.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){var r=this,n={};t instanceof J6&&(r.url=W.urlPathAppend(r.url,"datasets/"+t.dataset+"/terraincalculation/cutfill")),J6.toObject(t,n);var o=W.toJSON(n);return r.url=W.urlAppend(r.url,"returnContent=true"),r.request({method:"POST",data:o,scope:r,success:e,failure:e})}}])&&Q6(r.prototype,n),o&&Q6(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function o8(t){"@babel/helpers - typeof";return(o8="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i8(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,a8(n.key),n)}}function a8(t){var e=function(t,e){if("object"!=o8(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=o8(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==o8(e)?e:e+""}var s8=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e&&(this.dataset=null,this.terrainAnalystSetting=null,this.resultDatasetName=null,this.deleteExistResultDataset=null,W.extend(this,e),this.CLASS_NAME="SuperMap.TerrainAspectCalculationParameters")},r=[{key:"toObject",value:function(t,e){for(var r in t)"dataset"!==r&&(e[r]=t[r])}}],(e=[{key:"destroy",value:function(){this.terrainAnalystSetting=null,this.resultDatasetName=null,this.deleteExistResultDataset=null}}])&&i8(t.prototype,e),r&&i8(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function u8(t){"@babel/helpers - typeof";return(u8="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l8(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,c8(n.key),n)}}function c8(t){var e=function(t,e){if("object"!=u8(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=u8(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==u8(e)?e:e+""}function f8(t,e,r){return e=p8(e),function(t,e){if(e&&("object"===u8(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],p8(t).constructor):e.apply(t,r))}function h8(){return(h8="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=p8(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function p8(t){return(p8=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function d8(t,e){return(d8=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var y8=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=f8(this,e,[t,r])).CLASS_NAME="SuperMap.TerrainAspectCalculationService",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&d8(t,e)}(e,g2),r=e,(n=[{key:"destroy",value:function(){h8(p8(e.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){var r=this,n={};t instanceof s8&&(r.url=W.urlPathAppend(r.url,"datasets/"+t.dataset+"/terraincalculation/aspect")),s8.toObject(t,n);var o=W.toJSON(n);return r.url=W.urlAppend(r.url,"returnContent=true"),r.request({method:"POST",data:o,scope:r,success:e,failure:e})}}])&&l8(r.prototype,n),o&&l8(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function v8(t){"@babel/helpers - typeof";return(v8="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function g8(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,m8(n.key),n)}}function m8(t){var e=function(t,e){if("object"!=v8(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=v8(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==v8(e)?e:e+""}var b8=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e&&(this.dataset=null,this.terrainAnalystSetting=null,this.resultDatasetName=null,this.deleteExistResultDataset=null,this.zFactor=null,this.slopeType=null,W.extend(this,e),this.CLASS_NAME="SuperMap.TerrainSlopeCalculationParameters")},r=[{key:"toObject",value:function(t,e){for(var r in t)"dataset"!==r&&(e[r]=t[r])}}],(e=[{key:"destroy",value:function(){var t=this;t.terrainAnalystSetting=null,t.resultDatasetName=null,t.deleteExistResultDataset=null,t.zFactor=null,t.slopeType=null}}])&&g8(t.prototype,e),r&&g8(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function w8(t){"@babel/helpers - typeof";return(w8="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function S8(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,x8(n.key),n)}}function x8(t){var e=function(t,e){if("object"!=w8(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=w8(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==w8(e)?e:e+""}function _8(t,e,r){return e=O8(e),function(t,e){if(e&&("object"===w8(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],O8(t).constructor):e.apply(t,r))}function E8(){return(E8="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=O8(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function O8(t){return(O8=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function P8(t,e){return(P8=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var k8=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=_8(this,e,[t,r])).CLASS_NAME="SuperMap.TerrainSlopeCalculationService",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&P8(t,e)}(e,g2),r=e,(n=[{key:"destroy",value:function(){E8(O8(e.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){var r=this,n={};t instanceof b8&&(r.url=W.urlPathAppend(r.url,"datasets/"+t.dataset+"/terraincalculation/slope")),b8.toObject(t,n);var o=W.toJSON(n);return r.url=W.urlAppend(r.url,"returnContent=true"),r.request({method:"POST",data:o,scope:r,success:e,failure:e})}}])&&S8(r.prototype,n),o&&S8(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function C8(t){"@babel/helpers - typeof";return(C8="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function T8(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,A8(n.key),n)}}function A8(t){var e=function(t,e){if("object"!=C8(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=C8(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==C8(e)?e:e+""}function M8(t,e,r){return e=I8(e),function(t,e){if(e&&("object"===C8(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],I8(t).constructor):e.apply(t,r))}function j8(){return(j8="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=I8(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function I8(t){return(I8=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function N8(t,e){return(N8=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var L8=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=M8(this,e,[t])).filterQueryParameter=null,r.dataset=null,t&&W.extend(r,t),r.CLASS_NAME="SuperMap.DatasetThiessenAnalystParameters",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&N8(t,e)}(e,T5),r=e,o=[{key:"toObject",value:function(t,e){for(var r in t)"clipRegion"===r?e.clipRegion=zn.fromGeometry(t.clipRegion):e[r]=t[r]}}],(n=[{key:"destroy",value:function(){j8(I8(e.prototype),"destroy",this).call(this);this.filterQueryParameter&&(this.filterQueryParameter.destroy(),this.filterQueryParameter=null)}}])&&T8(r.prototype,n),o&&T8(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function R8(t){"@babel/helpers - typeof";return(R8="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function D8(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,B8(n.key),n)}}function B8(t){var e=function(t,e){if("object"!=R8(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=R8(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==R8(e)?e:e+""}function F8(t,e,r){return e=U8(e),function(t,e){if(e&&("object"===R8(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],U8(t).constructor):e.apply(t,r))}function G8(){return(G8="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=U8(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function U8(t){return(U8=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function z8(t,e){return(z8=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var V8=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=F8(this,e,[t])).points=null,t&&W.extend(r,t),r.CLASS_NAME="SuperMap.GeometryThiessenAnalystParameters",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&z8(t,e)}(e,T5),r=e,o=[{key:"toObject",value:function(t,e){for(var r in t)"clipRegion"===r?e.clipRegion=zn.fromGeometry(t.clipRegion):e[r]=t[r]}}],(n=[{key:"destroy",value:function(){G8(U8(e.prototype),"destroy",this).call(this);if(this.points){for(var t=this.points.length-1;t>=0;t--)this.points[t].destroy();this.points=null}}}])&&D8(r.prototype,n),o&&D8(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function H8(t){"@babel/helpers - typeof";return(H8="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function W8(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,q8(n.key),n)}}function q8(t){var e=function(t,e){if("object"!=H8(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=H8(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==H8(e)?e:e+""}function Y8(t,e,r){return e=J8(e),function(t,e){if(e&&("object"===H8(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],J8(t).constructor):e.apply(t,r))}function X8(){return(X8="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=J8(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function J8(t){return(J8=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function K8(t,e){return(K8=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Q8=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Y8(this,e,[t,r])).mode=null,r&&W.extend(n,r),n.CLASS_NAME="SuperMap.ThiessenAnalystService",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&K8(t,e)}(e,g2),r=e,(n=[{key:"destroy",value:function(){X8(J8(e.prototype),"destroy",this).call(this),this.mode=null}},{key:"processAsync",value:function(t,e){var r={},n=this;t instanceof L8?(n.mode="datasets",n.url=W.urlPathAppend(n.url,"datasets/"+t.dataset+"/thiessenpolygon"),L8.toObject(t,r)):t instanceof V8&&(n.mode="geometry",n.url=W.urlPathAppend(n.url,"geometry/thiessenpolygon"),V8.toObject(t,r));var o=W.toJSON(r);return this.returnContent=!0,n.request({method:"POST",data:o,scope:n,success:e,failure:e})}},{key:"dataFormat",value:function(){return[Jr.GEOJSON,Jr.ISERVER,Jr.FGB]}}])&&W8(r.prototype,n),o&&W8(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function Z8(t){"@babel/helpers - typeof";return(Z8="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function $8(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,t9(n.key),n)}}function t9(t){var e=function(t,e){if("object"!=Z8(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Z8(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Z8(e)?e:e+""}var e9=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.referenceDatasetName=null,this.referenceFilterQueryParameter=null,this.createResultDataset=null,this.resultDatasetName=null,this.resultDatasourceName=null,this.minDistance=null,this.maxDistance=null,e&&W.extend(this,e),this.CLASS_NAME="SuperMap.MinDistanceAnalystParameters"},(e=[{key:"destroy",value:function(){var t=this;t.referenceDatasetName=null,t.dataset=null,t.referenceFilterQueryParameter=null,t.createResultDataset=null,t.resultDatasetName=null,t.resultDatasourceName=null,t.minDistance=null,t.maxDistance=null}}])&&$8(t.prototype,e),r&&$8(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function r9(t){"@babel/helpers - typeof";return(r9="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n9(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,o9(n.key),n)}}function o9(t){var e=function(t,e){if("object"!=r9(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=r9(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==r9(e)?e:e+""}function i9(t,e,r){return e=s9(e),function(t,e){if(e&&("object"===r9(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],s9(t).constructor):e.apply(t,r))}function a9(){return(a9="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=s9(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function s9(t){return(s9=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u9(t,e){return(u9=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var l9=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=i9(this,e,[t])).dataset=null,r.inputFilterQueryParameter=null,t&&W.extend(r,t),r.CLASS_NAME="SuperMap.DatasetMinDistanceAnalystParameters",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&u9(t,e)}(e,e9),r=e,(n=[{key:"destroy",value:function(){a9(s9(e.prototype),"destroy",this).call(this);this.dataset=null,this.inputFilterQueryParameter=null}}])&&n9(r.prototype,n),o&&n9(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function c9(t){"@babel/helpers - typeof";return(c9="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function f9(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,h9(n.key),n)}}function h9(t){var e=function(t,e){if("object"!=c9(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=c9(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==c9(e)?e:e+""}function p9(t,e,r){return e=y9(e),function(t,e){if(e&&("object"===c9(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],y9(t).constructor):e.apply(t,r))}function d9(){return(d9="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=y9(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function y9(t){return(y9=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function v9(t,e){return(v9=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var g9=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=p9(this,e,[t])).inputGeometries=null,t&&W.extend(r,t),r.CLASS_NAME="SuperMap.GeometryMinDistanceAnalystParameters",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&v9(t,e)}(e,e9),r=e,o=[{key:"toObject",value:function(t,e){for(var r in t)if("inputGeometries"===r&&t.inputGeometries){for(var n=[],o=0;o<t.inputGeometries.length;o++)n.push(zn.fromGeometry(t.inputGeometries[o]));e.inputGeometries=n}else e[r]=t[r]}}],(n=[{key:"destroy",value:function(){d9(y9(e.prototype),"destroy",this).call(this);this.inputGeometries=null}}])&&f9(r.prototype,n),o&&f9(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function m9(t){"@babel/helpers - typeof";return(m9="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function b9(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,w9(n.key),n)}}function w9(t){var e=function(t,e){if("object"!=m9(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=m9(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==m9(e)?e:e+""}function S9(t,e,r){return e=_9(e),function(t,e){if(e&&("object"===m9(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],_9(t).constructor):e.apply(t,r))}function x9(){return(x9="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=_9(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function _9(t){return(_9=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function E9(t,e){return(E9=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var O9=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=S9(this,e,[t,r]),r&&W.extend(n,r),n.CLASS_NAME="SuperMap.MinDistanceAnalystService",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&E9(t,e)}(e,g2),r=e,(n=[{key:"destroy",value:function(){x9(_9(e.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){var r=this,n={};t instanceof l9?(r.url=W.urlPathAppend(r.url,"datasets/"+t.dataset+"/mindistance"),n=t):t instanceof g9&&(r.url=W.urlPathAppend(r.url,"geometry/mindistance"),g9.toObject(t,n));var o=W.toJSON(n);return r.url=W.urlAppend(r.url,"returnContent=true"),r.request({method:"POST",data:o,scope:r,success:e,failure:e})}}])&&b9(r.prototype,n),o&&b9(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function P9(t){"@babel/helpers - typeof";return(P9="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function k9(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,C9(n.key),n)}}function C9(t){var e=function(t,e){if("object"!=P9(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=P9(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==P9(e)?e:e+""}function T9(t,e,r){return e=M9(e),function(t,e){if(e&&("object"===P9(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],M9(t).constructor):e.apply(t,r))}function A9(){return(A9="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=M9(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function M9(t){return(M9=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function j9(t,e){return(j9=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var I9=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=T9(this,e,[t,r]),r&&W.extend(n,r),n.CLASS_NAME="SuperMap.ConvexHullAnalystService",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&j9(t,e)}(e,g2),r=e,(n=[{key:"destroy",value:function(){A9(M9(e.prototype),"destroy",this).call(this),this.mode=null}},{key:"processAsync",value:function(t,e){var r=this;r.url=W.urlPathAppend(r.url,"geometry/3d/convexhull");var n=W.toJSON(t);return r.url=W.urlAppend(r.url,"returnContent=true"),r.request({method:"POST",data:n,scope:r,success:e,failure:e})}}])&&k9(r.prototype,n),o&&k9(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function N9(t){"@babel/helpers - typeof";return(N9="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function L9(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,R9(n.key),n)}}function R9(t){var e=function(t,e){if("object"!=N9(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=N9(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==N9(e)?e:e+""}function D9(t,e,r){return e=F9(e),function(t,e){if(e&&("object"===N9(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],F9(t).constructor):e.apply(t,r))}function B9(){return(B9="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=F9(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function F9(t){return(F9=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function G9(t,e){return(G9=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var U9=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=D9(this,e,[t,r]),r&&W.extend(n,r),n.CLASS_NAME="SuperMap.GeometryBatchAnalystService",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&G9(t,e)}(e,g2),r=e,(n=[{key:"processAsync",value:function(t,e){var r=this;r.url=W.urlPathAppend(r.url,"geometry/batchanalyst"),r.url=W.urlAppend(r.url,"returnContent=true&ignoreAnalystParam=true");var n=r._processParams(t),o=W.toJSON(n);return r.request({method:"POST",data:o,scope:r,success:e,failure:e})}},{key:"_processParams",value:function(t){var e=this;if(W.isArray(t)){var r=[];return t.map(function(t){return r.push(e._toJSON(t)),t}),r}}},{key:"_toJSON",value:function(t){var e={};if("buffer"===t.analystName)e.analystName="buffer",e.param={},s3.toObject(t.param,e.param);else if("overlay"===t.analystName)e.analystName="overlay",e.param={},_4.toObject(t.param,e.param);else if("interpolationDensity"===t.analystName)e.analystName="interpolationDensity",e.param={},e5.toObject(t.param,e.param);else if("interpolationidw"===t.analystName)e.analystName="interpolationidw",e.param={},e5.toObject(t.param,e.param);else if("interpolationRBF"===t.analystName)e.analystName="interpolationRBF",e.param={},e5.toObject(t.param,e.param);else if("interpolationKriging"===t.analystName)e.analystName="interpolationKriging",e.param={},e5.toObject(t.param,e.param);else{if("thiessenpolygon"!==t.analystName)return t;e.analystName="thiessenpolygon",e.param={},V8.toObject(t.param,e.param)}return e}},{key:"destroy",value:function(){B9(F9(e.prototype),"destroy",this).call(this)}}])&&L9(r.prototype,n),o&&L9(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function z9(t){"@babel/helpers - typeof";return(z9="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function V9(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,H9(n.key),n)}}function H9(t){var e=function(t,e){if("object"!=z9(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=z9(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==z9(e)?e:e+""}var W9=function(){return t=function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.url=e,this.options=r||{}},(e=[{key:"getAreaSolarRadiationResult",value:function(t,e,r){var n=this;return new T2(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(t,e)}},{key:"bufferAnalysis",value:function(t,e,r){var n=this;return new y3(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(t,e)}},{key:"densityAnalysis",value:function(t,e,r){var n=this;return new k3(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(t,e)}},{key:"generateSpatialData",value:function(t,e,r){var n=this;return new F3(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(t,e)}},{key:"geoRelationAnalysis",value:function(t,e,r){var n=this;return new Q3(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(t,e)}},{key:"interpolationAnalysis",value:function(t,e,r){var n=this;return new W5(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(t,e)}},{key:"mathExpressionAnalysis",value:function(t,e,r){var n=this;return new n4(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(t,e)}},{key:"overlayAnalysis",value:function(t,e,r){var n=this;return new M4(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(t,e)}},{key:"routeCalculateMeasure",value:function(t,e,r){var n=this;return new V4(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(t,e)}},{key:"routeLocate",value:function(t,e,r){var n=this;return new e6(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(t,e)}},{key:"surfaceAnalysis",value:function(t,e,r){var n=this;return new I6(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(t,e)}},{key:"terrainCurvatureCalculate",value:function(t,e,r){var n=this;return new W6(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(t,e)}},{key:"terrainCutFillCalculate",value:function(t,e,r){var n=this;return new n8(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(t,e)}},{key:"terrainAspectCalculate",value:function(t,e,r){var n=this;return new y8(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(t,e)}},{key:"terrainSlopeCalculate",value:function(t,e,r){var n=this;return new k8(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(t,e)}},{key:"thiessenAnalysis",value:function(t,e,r){var n=this;return new Q8(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(t,e)}},{key:"minDistanceAnalysis",value:function(t,e,r){var n=this;return new O9(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(t,e)}},{key:"convexHullAnalysis",value:function(t,e,r){var n=this;return new I9(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(t,e)}},{key:"geometrybatchAnalysis",value:function(t,e,r){for(var n=new U9(this.url,{format:this._processFormat(r)}),o=[],i=0;i<t.length;i++){var a=t[i];o.push({analystName:a.analystName,param:a.param})}return n.processAsync(o,e)}},{key:"_processFormat",value:function(t){return t||Jr.GEOJSON}}])&&V9(t.prototype,e),r&&V9(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function q9(t){"@babel/helpers - typeof";return(q9="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Y9(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,X9(n.key),n)}}function X9(t){var e=function(t,e){if("object"!=q9(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=q9(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==q9(e)?e:e+""}function J9(t,e,r){return e=K9(e),function(t,e){if(e&&("object"===q9(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],K9(t).constructor):e.apply(t,r))}function K9(t){return(K9=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Q9(t,e){return(Q9=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Z9=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=J9(this,e,[t,r]))._spatialAnalystService=new W9(t,r),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Q9(t,e)}(e,uv),r=e,(n=[{key:"getAreaSolarRadiationResult",value:function(t,e,r){return this._spatialAnalystService.getAreaSolarRadiationResult(t,e,r)}},{key:"bufferAnalysis",value:function(t,e,r){return t=this._processParams(t),this._spatialAnalystService.bufferAnalysis(t,e,r)}},{key:"densityAnalysis",value:function(t,e,r){return t=this._processParams(t),this._spatialAnalystService.densityAnalysis(t,e,r)}},{key:"generateSpatialData",value:function(t,e,r){return this._spatialAnalystService.generateSpatialData(t,e,r)}},{key:"geoRelationAnalysis",value:function(t,e,r){return t=this._processParams(t),this._spatialAnalystService.geoRelationAnalysis(t,e,r)}},{key:"interpolationAnalysis",value:function(t,e,r){return t=this._processParams(t),this._spatialAnalystService.interpolationAnalysis(t,e,r)}},{key:"mathExpressionAnalysis",value:function(t,e,r){return t=this._processParams(t),this._spatialAnalystService.mathExpressionAnalysis(t,e,r)}},{key:"overlayAnalysis",value:function(t,e,r){return t=this._processParams(t),this._spatialAnalystService.overlayAnalysis(t,e,r)}},{key:"routeCalculateMeasure",value:function(t,e,r){return t=this._processParams(t),this._spatialAnalystService.routeCalculateMeasure(t,e,r)}},{key:"routeLocate",value:function(t,e,r){return t=this._processParams(t),this._spatialAnalystService.routeLocate(t,e,r)}},{key:"surfaceAnalysis",value:function(t,e,r){return t=this._processParams(t),this._spatialAnalystService.surfaceAnalysis(t,e,r)}},{key:"terrainCurvatureCalculate",value:function(t,e,r){return this._spatialAnalystService.terrainCurvatureCalculate(t,e,r)}},{key:"terrainCutFillCalculate",value:function(t,e,r){return t=this._processParams(t),this._spatialAnalystService.terrainCutFillCalculate(t,e,r)}},{key:"terrainAspectCalculate",value:function(t,e,r){return t=this._processParams(t),this._spatialAnalystService.terrainAspectCalculate(t,e,r)}},{key:"terrainSlopeCalculate",value:function(t,e,r){return t=this._processParams(t),this._spatialAnalystService.terrainSlopeCalculate(t,e,r)}},{key:"thiessenAnalysis",value:function(t,e,r){return t=this._processParams(t),this._spatialAnalystService.thiessenAnalysis(t,e,r)}},{key:"minDistanceAnalysis",value:function(t,e,r){return t=this._processParams(t),this._spatialAnalystService.minDistanceAnalysis(t,e,r)}},{key:"convexHullAnalysis",value:function(t,e,r){return t=this._processParams(t),this._spatialAnalystService.convexHullAnalysis(t,e,r)}},{key:"geometrybatchAnalysis",value:function(t,e,r){for(var n=0;n<t.length;n++)t[n].param=this._processParams(t[n].param);return this._spatialAnalystService.geometrybatchAnalysis(t,e,r)}},{key:"_processParams",value:function(t){if(!t)return{};if(t.bounds&&(t.bounds=$n.toSuperMapBounds(t.bounds)),t.inputPoints)for(var e=0;e<t.inputPoints.length;e++){var r=t.inputPoints[e];$n.isArray(r)&&(t.inputPoints[e]={x:r[0],y:r[1],tag:r[2]})}if(t.points)for(var n=0;n<t.points.length;n++){var o=t.points[n];t.points[n]=$n.toSuperMapPoint(o)}if(t.point&&(t.point=$n.toSuperMapPoint(t.point)),t.extractRegion&&(t.extractRegion=$n.toSuperMapGeometry(t.extractRegion)),t.extractParameter&&t.extractParameter.clipRegion&&(t.extractParameter.clipRegion=$n.toSuperMapGeometry(t.extractParameter.clipRegion)),t.clipParam&&t.clipParam.clipRegion&&(t.clipParam.clipRegion=$n.toSuperMapGeometry(t.clipParam.clipRegion)),t.clipRegion&&(t.clipRegion=$n.toSuperMapGeometry(t.clipRegion)),t.sourceRoute&&t.sourceRoute){var i={type:"LINEM"};i.parts=[t.sourceRoute.geometry.coordinates.length],i.points=[];for(var a=0;a<t.sourceRoute.geometry.coordinates.length;a++){var s=t.sourceRoute.geometry.coordinates[a];i.points=i.points.concat({x:s[0],y:s[1],measure:s[2]})}t.sourceRoute=i}if(t.operateRegions&&$n.isArray(t.operateRegions)&&t.operateRegions.map(function(e,r){return t.operateRegions[r]=$n.toSuperMapGeometry(e),t.operateRegions[r]}),t.sourceGeometry){var u=null;t.sourceGeometrySRID&&(u=t.sourceGeometrySRID),t.sourceGeometry=$n.toSuperMapGeometry(t.sourceGeometry),u&&(t.sourceGeometry.SRID=u),delete t.sourceGeometry.sourceGeometrySRID}if(t.operateGeometry&&(t.operateGeometry=$n.toSuperMapGeometry(t.operateGeometry)),t.sourceGeometries){for(var l=[],c=0;c<t.sourceGeometries.length;c++)l.push($n.toSuperMapGeometry(t.sourceGeometries[c]));t.sourceGeometries=l}if(t.operateGeometries){for(var f=[],h=0;h<t.operateGeometries.length;h++)f.push($n.toSuperMapGeometry(t.operateGeometries[h]));t.operateGeometries=f}if(t.inputGeometries){for(var p=[],d=0;d<t.inputGeometries.length;d++)p.push($n.toSuperMapGeometry(t.inputGeometries[d]));t.inputGeometries=p}return t.sourceRoute&&t.sourceRoute.components&&$n.isArray(t.sourceRoute.components)&&t.sourceRoute.components.map(function(e,r){return t.sourceRoute.components[r]=$n.toSuperMapGeometry(e),t.sourceRoute.components[r]}),t}},{key:"_processFormat",value:function(t){return t||Jr.GEOJSON}}])&&Y9(r.prototype,n),o&&Y9(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function $9(t){"@babel/helpers - typeof";return($9="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function t7(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,e7(n.key),n)}}function e7(t){var e=function(t,e){if("object"!=$9(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=$9(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==$9(e)?e:e+""}var r7=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.datasetNames=null,this.dataSourceNames=null,this.joinItems=null,this.themes=null,this.displayFilters=null,this.displayOrderBys=null,this.fieldValuesDisplayFilter=null,e&&W.extend(this,e),this.CLASS_NAME="SuperMap.ThemeParameters"},(e=[{key:"destroy",value:function(){var t=this;if(t.datasetNames=null,t.dataSourceNames=null,t.joinItems){for(var e=0,r=t.joinItems,n=r.length;e<n;e++)r[e].destroy();t.joinItems=null}if(t.themes){for(var o=0,i=t.themes,a=i.length;o<a;o++)i[o].destroy();t.themes=null}}}])&&t7(t.prototype,e),r&&t7(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function n7(t){"@babel/helpers - typeof";return(n7="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o7(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,i7(n.key),n)}}function i7(t){var e=function(t,e){if("object"!=n7(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=n7(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==n7(e)?e:e+""}function a7(t,e,r){return e=u7(e),function(t,e){if(e&&("object"===n7(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],u7(t).constructor):e.apply(t,r))}function s7(){return(s7="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u7(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function u7(t){return(u7=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function l7(t,e){return(l7=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var c7=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=a7(this,e,[t,r]),r&&W.extend(n,r),n.url=W.urlPathAppend(n.url,"tempLayersSet"),n.CLASS_NAME="SuperMap.ThemeService",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&l7(t,e)}(e,bv),r=e,(n=[{key:"destroy",value:function(){s7(u7(e.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){if(t instanceof r7){var r;return r=this.getJsonParameters(t),this.request({method:"POST",data:r,scope:this,success:e,failure:e})}}},{key:"getJsonParameters",value:function(t){var e,r="",n=null,o=null,i=null;r+="[{'type': 'UGC','subLayers': {'layers': [";for(var a=0;a<t.themes.length;a++){n=t.themes[a];var s=W.toJSON(n);if(r+="{'theme': "+(s=s.slice(0,-1))+"},'type': 'UGC','ugcLayerType': 'THEME',",(o=t.displayFilters)&&o.length>0&&(1===o.length?r+="'displayFilter':\""+o[0]+'",':r+="'displayFilter':\""+o[a]+'",'),(i=t.displayOrderBy)&&i.length>0&&(1===i.length?r+="'displayOrderBy':'"+i[0]+"',":r+="'displayOrderBy':'"+i[a]+"',"),(e=t.fieldValuesDisplayFilter)&&(r+="'fieldValuesDisplayFilter':"+W.toJSON(e)+","),t.joinItems&&t.joinItems.length>0&&t.joinItems[a]&&(r+="'joinItems':["+W.toJSON(t.joinItems[a])+"],"),t.datasetNames&&t.dataSourceNames){var u=t.datasetNames[a]?a:t.datasetNames.length-1,l=t.dataSourceNames[a]?a:t.dataSourceNames.length-1;r+="'datasetInfo': {'name': '"+t.datasetNames[u]+"','dataSourceName': '"+t.dataSourceNames[l]+"'}},"}else r+="},"}t.themes&&t.themes.length>0&&(r=r.substring(0,r.length-1)),r+="]},";var c=this.url.split("/");return r+="'name': '"+c[c.length-2]+"'}]"}}])&&o7(r.prototype,n),o&&o7(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function f7(t){"@babel/helpers - typeof";return(f7="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function h7(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,p7(n.key),n)}}function p7(t){var e=function(t,e){if("object"!=f7(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=f7(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==f7(e)?e:e+""}function d7(t,e,r){return e=y7(e),function(t,e){if(e&&("object"===f7(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],y7(t).constructor):e.apply(t,r))}function y7(t){return(y7=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function v7(t,e){return(v7=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var g7=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=d7(this,e,[t,r]))._themeService=new c7(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers}),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&v7(t,e)}(e,uv),r=e,(n=[{key:"getThemeInfo",value:function(t,e){return this._themeService.processAsync(t,e)}}])&&h7(r.prototype,n),o&&h7(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function m7(t){"@babel/helpers - typeof";return(m7="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function b7(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,w7(n.key),n)}}function w7(t){var e=function(t,e){if("object"!=m7(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=m7(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==m7(e)?e:e+""}var S7=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},this.keyWord=null,this.returnPosition=!1,W.extend(this,e),this.CLASS_NAME="SuperMap.StopQueryParameters"},(e=[{key:"destroy",value:function(){W.reset(this)}}])&&b7(t.prototype,e),r&&b7(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function x7(t){"@babel/helpers - typeof";return(x7="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _7(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,E7(n.key),n)}}function E7(t){var e=function(t,e){if("object"!=x7(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=x7(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==x7(e)?e:e+""}function O7(t,e,r){return e=k7(e),function(t,e){if(e&&("object"===x7(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],k7(t).constructor):e.apply(t,r))}function P7(){return(P7="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=k7(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function k7(t){return(k7=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function C7(t,e){return(C7=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var T7=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=O7(this,e,[t,r]),r=r||{},W.extend(n,r),n.CLASS_NAME="SuperMap.StopQueryService",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&C7(t,e)}(e,bv),r=e,(n=[{key:"destroy",value:function(){P7(k7(e.prototype),"destroy",this).call(this),W.reset(this)}},{key:"processAsync",value:function(t,e){if(t instanceof S7){return this.url=W.urlPathAppend(this.url,"stops/keyword/"+t.keyWord),this.request({method:"GET",params:{returnPosition:t.returnPosition},scope:this,success:e,failure:e})}}}])&&_7(r.prototype,n),o&&_7(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function A7(t){"@babel/helpers - typeof";return(A7="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function M7(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,j7(n.key),n)}}function j7(t){var e=function(t,e){if("object"!=A7(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=A7(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==A7(e)?e:e+""}var I7=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},this.transferLines=null,this.points=null,W.extend(this,e),this.CLASS_NAME="SuperMap.TransferPathParameters"},r=[{key:"toJson",value:function(t){if(t)return W.toJSON(t)}}],(e=[{key:"destroy",value:function(){W.reset(this)}}])&&M7(t.prototype,e),r&&M7(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function N7(t){"@babel/helpers - typeof";return(N7="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function R7(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,D7(n.key),n)}}function D7(t){var e=function(t,e){if("object"!=N7(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=N7(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==N7(e)?e:e+""}function B7(t,e,r){return e=G7(e),function(t,e){if(e&&("object"===N7(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],G7(t).constructor):e.apply(t,r))}function F7(){return(F7="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=G7(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function G7(t){return(G7=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function U7(t,e){return(U7=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var z7=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=B7(this,e,[t,r])).CLASS_NAME="SuperMap.TransferPathService",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&U7(t,e)}(e,bv),r=e,(n=[{key:"destroy",value:function(){F7(G7(e.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){if(t instanceof I7){var r;return this.url=W.urlPathAppend(this.url,"path"),r={points:W.toJSON(t.points),transferLines:W.toJSON(t.transferLines)},this.request({method:"GET",params:r,scope:this,success:e,failure:e})}}}])&&R7(r.prototype,n),o&&R7(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function V7(t){"@babel/helpers - typeof";return(V7="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function H7(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,W7(n.key),n)}}function W7(t){var e=function(t,e){if("object"!=V7(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=V7(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==V7(e)?e:e+""}var q7=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},this.solutionCount=6,this.transferPreference=xn.NONE,this.transferTactic=Sn.LESS_TIME,this.walkingRatio=null,this.points=!1,this.evadeLines=null,this.evadeStops=null,this.priorLines=null,this.priorStops=null,this.travelTime=null,W.extend(this,e),this.CLASS_NAME="SuperMap.TransferSolutionParameters"},r=[{key:"toJson",value:function(t){if(t)return W.toJSON(t)}}],(e=[{key:"destroy",value:function(){W.reset(this)}}])&&H7(t.prototype,e),r&&H7(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function Y7(t){"@babel/helpers - typeof";return(Y7="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function X7(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,J7(n.key),n)}}function J7(t){var e=function(t,e){if("object"!=Y7(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Y7(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Y7(e)?e:e+""}function K7(t,e,r){return e=Z7(e),function(t,e){if(e&&("object"===Y7(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Z7(t).constructor):e.apply(t,r))}function Q7(){return(Q7="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Z7(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Z7(t){return(Z7=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function $7(t,e){return($7=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var ttt=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=K7(this,e,[t,r])).CLASS_NAME="SuperMap.TransferSolutionService",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&$7(t,e)}(e,bv),r=e,(n=[{key:"destroy",value:function(){Q7(Z7(e.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){if(t instanceof q7){var r;return this.url=W.urlPathAppend(this.url,"solutions"),r={points:W.toJSON(t.points),walkingRatio:t.walkingRatio,transferTactic:t.transferTactic,solutionCount:t.solutionCount,transferPreference:t.transferPreference},t.evadeLines&&(r.evadeLines=W.toJSON(t.evadeLines)),t.evadeStops&&(r.evadeStops=W.toJSON(t.evadeStops)),t.priorLines&&(r.priorLines=W.toJSON(t.priorLines)),t.priorStops&&(r.priorStops=W.toJSON(t.priorStops)),t.travelTime&&(r.travelTime=t.travelTime),this.request({method:"GET",params:r,scope:this,success:e,failure:e})}}}])&&X7(r.prototype,n),o&&X7(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function ett(t){"@babel/helpers - typeof";return(ett="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function rtt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ntt(n.key),n)}}function ntt(t){var e=function(t,e){if("object"!=ett(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=ett(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ett(e)?e:e+""}var ott=function(){return t=function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.url=e,this.options=r||{}},(e=[{key:"queryStop",value:function(t,e){var r=this;return new T7(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers}).processAsync(t,e)}},{key:"analysisTransferPath",value:function(t,e){var r=this;return new z7(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers}).processAsync(t,e)}},{key:"analysisTransferSolution",value:function(t,e){var r=this;return new ttt(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers}).processAsync(t,e)}}])&&rtt(t.prototype,e),r&&rtt(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function itt(t){"@babel/helpers - typeof";return(itt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function att(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,stt(n.key),n)}}function stt(t){var e=function(t,e){if("object"!=itt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=itt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==itt(e)?e:e+""}function utt(t,e,r){return e=ltt(e),function(t,e){if(e&&("object"===itt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],ltt(t).constructor):e.apply(t,r))}function ltt(t){return(ltt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ctt(t,e){return(ctt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var ftt=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=utt(this,e,[t,r]))._trafficTransferAnalystService=new ott(t,r),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ctt(t,e)}(e,uv),r=e,(n=[{key:"queryStop",value:function(t,e){return this._trafficTransferAnalystService.queryStop(t,e)}},{key:"analysisTransferPath",value:function(t,e){return this._trafficTransferAnalystService.analysisTransferPath(t,e)}},{key:"analysisTransferSolution",value:function(t,e){return this._trafficTransferAnalystService.analysisTransferSolution(t,e)}},{key:"_processParams",value:function(t){return t?(t.transferLines&&!$n.isArray(t.transferLines)&&(t.transferLines=[t.transferLines]),t.points&&$n.isArray(t.points)&&t.points.map(function(e,r){return t.points[r]=e instanceof w().LngLat?{x:e.lng,y:e.lat}:e,t.points[r]}),t):{}}}])&&att(r.prototype,n),o&&att(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function htt(t){"@babel/helpers - typeof";return(htt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ptt(){ptt=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var i=e&&e.prototype instanceof g?e:g,a=Object.create(i.prototype),s=new A(n||[]);return o(a,"_invoke",{value:P(t,r,s)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var h="suspendedStart",p="suspendedYield",d="executing",y="completed",v={};function g(){}function m(){}function b(){}var w={};l(w,a,function(){return this});var S=Object.getPrototypeOf,x=S&&S(S(M([])));x&&x!==r&&n.call(x,a)&&(w=x);var _=b.prototype=g.prototype=Object.create(w);function E(t){["next","throw","return"].forEach(function(e){l(t,e,function(t){return this._invoke(e,t)})})}function O(t,e){function r(o,i,a,s){var u=f(t[o],t,i);if("throw"!==u.type){var l=u.arg,c=l.value;return c&&"object"==htt(c)&&n.call(c,"__await")?e.resolve(c.__await).then(function(t){r("next",t,a,s)},function(t){r("throw",t,a,s)}):e.resolve(c).then(function(t){l.value=t,a(l)},function(t){return r("throw",t,a,s)})}s(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e(function(e,o){r(t,n,e,o)})}return i=i?i.then(o,o):o()}})}function P(e,r,n){var o=h;return function(i,a){if(o===d)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var u=k(s,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var l=f(e,r,n);if("normal"===l.type){if(o=n.done?y:p,l.arg===v)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=y,n.method="throw",n.arg=l.arg)}}}function k(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,k(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function T(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function A(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function M(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(htt(e)+" is not iterable")}return m.prototype=b,o(_,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:m,configurable:!0}),m.displayName=l(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,l(t,u,"GeneratorFunction")),t.prototype=Object.create(_),t},e.awrap=function(t){return{__await:t}},E(O.prototype),l(O.prototype,s,function(){return this}),e.AsyncIterator=O,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new O(c(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next()})},E(_),l(_,u,"Generator"),l(_,a,function(){return this}),l(_,"toString",function(){return"[object Generator]"}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=M,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(T),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),T(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;T(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:M(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function dtt(t,e,r,n,o,i,a){try{var s=t[i](a),u=s.value}catch(t){return void r(t)}s.done?e(u):Promise.resolve(u).then(n,o)}function ytt(t){return function(){var e=this,r=arguments;return new Promise(function(n,o){var i=t.apply(e,r);function a(t){dtt(i,n,o,a,s,"next",t)}function s(t){dtt(i,n,o,a,s,"throw",t)}a(void 0)})}}function vtt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,gtt(n.key),n)}}function gtt(t){var e=function(t,e){if("object"!=htt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=htt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==htt(e)?e:e+""}function mtt(t,e,r){return e=Stt(e),btt(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Stt(t).constructor):e.apply(t,r))}function btt(t,e){if(e&&("object"===htt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function wtt(){return(wtt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Stt(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Stt(t){return(Stt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function xtt(t,e){return(xtt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var _tt=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=mtt(this,e,[t,r]),r&&W.extend(n,r),n.templates=[],n.CLASS_NAME="SuperMap.WebPrintingService",n.url?n:btt(n)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&xtt(t,e)}(e,bv),r=e,(n=[{key:"destroy",value:function(){wtt(Stt(e.prototype),"destroy",this).call(this)}},{key:"createWebPrintingJob",value:function(){var t=ytt(ptt().mark(function t(e,r){return ptt().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,this._processParams(e);case 4:return t.abrupt("return",this.processAsync("jobs","POST",r,e));case 5:case"end":return t.stop()}},t,this)}));return function(e,r){return t.apply(this,arguments)}}()},{key:"getPrintingJob",value:function(t,e){this.rollingProcess(this._processUrl("jobs/".concat(t)),e)}},{key:"getPrintingJobResult",value:function(t,e){return this.processAsync("jobs/".concat(t,"/result"),"GET",e)}},{key:"getLayoutTemplates",value:function(t){return this.processAsync("layouts","GET",t)}},{key:"rollingProcess",value:function(t,e){var r=this;this.id&&clearInterval(this.id),this.id=setInterval(function(){r.request({url:t,method:"GET",scope:r,success:e,failure:e})},1e3)}},{key:"processAsync",value:function(t,e,r,n){var o={url:this._processUrl(t),method:e,scope:this,success:r,failure:r};return n&&(o.data=W.toJSON(n)),this.request(o)}},{key:"transformResult",value:function(t,e){return"FINISHED"===(t=W.transformResult(t)).status||"ERROR"===t.status?clearInterval(this.id):"RUNNING"===t.status&&(e.success=!1),{result:t,options:e}}},{key:"_processUrl",value:function(t){return t?W.urlPathAppend(this.url,t):this.url}},{key:"_processParams",value:function(){var t=ytt(ptt().mark(function t(e){var r,n,o,i,a,s,u,l,c,f,h,p,d,y,v,g,m;return ptt().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.layoutOptions){t.next=2;break}return t.abrupt("return");case 2:if(r=e.layoutOptions,n=r.legendOptions,o=r.templateName,n&&(!e.layoutOptions.legendOptions.title&&(e.layoutOptions.legendOptions.title=""),e.layoutOptions.legendOptions.picAsBase64=e.layoutOptions.legendOptions.picAsBase64&&e.layoutOptions.legendOptions.picAsBase64.replace(/^data:.+;base64,/,""),e.layoutOptions.legendOptions.customItems&&e.layoutOptions.legendOptions.customItems.hasOwnProperty("picAsBase64")&&(e.layoutOptions.legendOptions.customItems.picAsBase64=e.layoutOptions.legendOptions.customItems.picAsBase64.replace(/^data:.+;base64,/,""))),this.templates.length){t.next=9;break}return t.next=7,this.getLayoutTemplates();case 7:i=t.sent,this.templates=i.result;case 9:a=this.templates.find(function(t){return t.templateName===o}),s=a.layoutOptions,u=s.hasCopyright,l=s.hasSubtitle,c=s.hasAuthor,f=s.hasScaleBar,h=s.hasTitle,p=s.hasTime,d=s.hasSummaryText,y=s.hasLittleMap,v=s.hasNorthArrow,g=s.hasLegend,m=e.layoutOptions,h?void 0===m.title&&(e.layoutOptions.title=null):delete e.layoutOptions.title,l?void 0===m.subTitle&&(e.layoutOptions.subTitle=null):delete e.layoutOptions.subTitle,c?void 0===m.author&&(e.layoutOptions.author=null):delete e.layoutOptions.author,u?void 0===m.copyright&&(e.layoutOptions.copyright=null):delete e.layoutOptions.copyright,d&&m.summaryText||delete e.layoutOptions.summaryText,p&&m.time||delete e.layoutOptions.time,y&&m.littleMapOptions||delete e.layoutOptions.littleMapOptions,f&&m.scaleBarOptions||delete e.layoutOptions.scaleBarOptions,v&&m.northArrowOptions||delete e.layoutOptions.northArrowOptions,g&&m.legendOptions||delete e.layoutOptions.legendOptions;case 22:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()}])&&vtt(r.prototype,n),o&&vtt(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function Ett(t){"@babel/helpers - typeof";return(Ett="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ott(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ptt(n.key),n)}}function Ptt(t){var e=function(t,e){if("object"!=Ett(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Ett(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Ett(e)?e:e+""}function ktt(t,e,r){return e=Ctt(e),function(t,e){if(e&&("object"===Ett(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Ctt(t).constructor):e.apply(t,r))}function Ctt(t){return(Ctt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ttt(t,e){return(Ttt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Att=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=ktt(this,e,[t,r]))._webPrintingService=new _tt(t,r),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ttt(t,e)}(e,uv),r=e,(n=[{key:"createWebPrintingJob",value:function(t,e){if(t)return this._webPrintingService.createWebPrintingJob(this._processParams(t),e)}},{key:"getPrintingJob",value:function(t,e){return this._webPrintingService.getPrintingJob(t,e)}},{key:"getPrintingJobResult",value:function(t,e){this._webPrintingService.getPrintingJobResult(t,e)}},{key:"getLayoutTemplates",value:function(t){return this._webPrintingService.getLayoutTemplates(t)}},{key:"_processParams",value:function(t){return t.layoutOptions&&t.layoutOptions.littleMapOptions&&(t.layoutOptions.littleMapOptions.center=this._toPointObject(t.layoutOptions.littleMapOptions.center)),t.exportOptions&&(t.exportOptions.center=this._toPointObject(t.exportOptions.center)),t}},{key:"_toPointObject",value:function(t){return $n.isArray(t)?{x:t[0],y:t[1]}:t instanceof Xt||t instanceof w().Point?{x:t.x,y:t.y}:t instanceof w().LngLat?{x:t.lng,y:t.lat}:t}}])&&Ott(r.prototype,n),o&&Ott(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function Mtt(t){"@babel/helpers - typeof";return(Mtt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function jtt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function Itt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ntt(n.key),n)}}function Ntt(t){var e=function(t,e){if("object"!=Mtt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Mtt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Mtt(e)?e:e+""}function Ltt(t,e,r){return e=Dtt(e),function(t,e){if(e&&("object"===Mtt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Dtt(t).constructor):e.apply(t,r))}function Rtt(){return(Rtt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Dtt(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Dtt(t){return(Dtt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Btt(t,e){return(Btt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Ftt=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Ltt(this,e,[t,r])).options=r||{},r&&W.extend(n,r),n.CLASS_NAME="SuperMap.ImageService",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Btt(t,e)}(e,bv),r=e,(n=[{key:"destroy",value:function(){Rtt(Dtt(e.prototype),"destroy",this).call(this)}},{key:"getCollections",value:function(t){var e=W.convertPath("/collections"),r=W.urlPathAppend(this.url,e);return this._processAsync({url:r,mehtod:"GET",callback:t})}},{key:"getCollectionByID",value:function(t,e){var r={collectionId:t},n=W.convertPath("/collections/{collectionId}",r),o=W.urlPathAppend(this.url,n);return this._processAsync({url:o,mehtod:"GET",callback:e})}},{key:"search",value:function(t,e){var r=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?jtt(Object(r),!0).forEach(function(e){var n,o,i;n=t,o=e,i=r[e],(o=Ntt(o))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):jtt(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}({},t||{}),n=W.convertPath("/search"),o=W.urlPathAppend(this.url,n);return this._processAsync({url:o,method:"POST",data:r,callback:e})}},{key:"_processAsync",value:function(t){var e=t.url,r=t.method,n=t.callback,o=t.data;return this.request({method:r||"GET",url:e,data:o,scope:this,success:n,failure:n})}}])&&Itt(r.prototype,n),o&&Itt(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function Gtt(t){"@babel/helpers - typeof";return(Gtt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Utt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ztt(n.key),n)}}function ztt(t){var e=function(t,e){if("object"!=Gtt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Gtt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Gtt(e)?e:e+""}function Vtt(t,e,r){return e=Htt(e),function(t,e){if(e&&("object"===Gtt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Htt(t).constructor):e.apply(t,r))}function Htt(t){return(Htt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Wtt(t,e){return(Wtt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var qtt=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Vtt(this,e,[t,r]))._imageService=new Ftt(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers}),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Wtt(t,e)}(e,uv),r=e,(n=[{key:"getCollections",value:function(t){return this._imageService.getCollections(t)}},{key:"getCollectionByID",value:function(t,e){return this._imageService.getCollectionByID(t,e)}},{key:"search",value:function(t,e){return this._imageService.search(t,e)}}])&&Utt(r.prototype,n),o&&Utt(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function Ytt(t){"@babel/helpers - typeof";return(Ytt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Xtt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Jtt(n.key),n)}}function Jtt(t){var e=function(t,e){if("object"!=Ytt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Ytt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Ytt(e)?e:e+""}function Ktt(t,e,r){return e=Ztt(e),function(t,e){if(e&&("object"===Ytt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Ztt(t).constructor):e.apply(t,r))}function Qtt(){return(Qtt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ztt(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Ztt(t){return(Ztt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function $tt(t,e){return($tt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var tet=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Ktt(this,e,[t,r])).options=r||{},r&&W.extend(n,r),n.CLASS_NAME="SuperMap.ImageCollectionService",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&$tt(t,e)}(e,bv),r=e,(n=[{key:"destroy",value:function(){Qtt(Ztt(e.prototype),"destroy",this).call(this)}},{key:"getLegend",value:function(t,e){var r={collectionId:this.options.collectionId};"function"==typeof t&&(e=t,t=null);var n=W.convertPath("/collections/{collectionId}/legend",r),o=W.urlPathAppend(this.url,n);return this._processAsync({url:o,method:"GET",params:t,callback:e})}},{key:"getStatistics",value:function(t){var e={collectionId:this.options.collectionId},r=W.convertPath("/collections/{collectionId}/statistics",e),n=W.urlPathAppend(this.url,r);return this._processAsync({url:n,method:"GET",callback:t})}},{key:"getTileInfo",value:function(t){var e={collectionId:this.options.collectionId},r=W.convertPath("/collections/{collectionId}/tileInfo",e),n=W.urlPathAppend(this.url,r);return this._processAsync({url:n,method:"GET",callback:t})}},{key:"deleteItemByID",value:function(t,e){var r={collectionId:this.options.collectionId,featureId:t},n=W.convertPath("/collections/{collectionId}/items/{featureId}",r),o=W.urlPathAppend(this.url,n);return this._processAsync({url:o,method:"DELETE",callback:e})}},{key:"getItemByID",value:function(t,e){var r={collectionId:this.options.collectionId,featureId:t},n=W.convertPath("/collections/{collectionId}/items/{featureId}",r),o=W.urlPathAppend(this.url,n);return this._processAsync({url:o,method:"GET",callback:e})}},{key:"_processAsync",value:function(t){var e=t.url,r=t.method,n=t.callback,o=t.params;return this.request({method:r||"GET",url:e,params:o,scope:this,success:n,failure:n})}}])&&Xtt(r.prototype,n),o&&Xtt(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function eet(t){"@babel/helpers - typeof";return(eet="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ret(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,net(n.key),n)}}function net(t){var e=function(t,e){if("object"!=eet(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=eet(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==eet(e)?e:e+""}function oet(t,e,r){return e=iet(e),function(t,e){if(e&&("object"===eet(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],iet(t).constructor):e.apply(t,r))}function iet(t){return(iet=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function aet(t,e){return(aet=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var set=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=oet(this,e,[t,r]))._imageCollectionService=new tet(n.url,{collectionId:n.options.collectionId,proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers}),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&aet(t,e)}(e,uv),r=e,(n=[{key:"getLegend",value:function(t,e){return this._imageCollectionService.getLegend(t,e)}},{key:"getStatistics",value:function(t){return this._imageCollectionService.getStatistics(t)}},{key:"getTileInfo",value:function(t){return this._imageCollectionService.getTileInfo(t)}},{key:"deleteItemByID",value:function(t,e){return this._imageCollectionService.deleteItemByID(t,e)}},{key:"getItemByID",value:function(t,e){return this._imageCollectionService.getItemByID(t,e)}}])&&ret(r.prototype,n),o&&ret(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}(),uet=window.SuperMap=window.SuperMap||{};function cet(t){"@babel/helpers - typeof";return(cet="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function fet(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,het(n.key),n)}}function het(t){var e=function(t,e){if("object"!=cet(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=cet(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==cet(e)?e:e+""}function pet(t,e,r){return e=det(e),function(t,e){if(e&&("object"===cet(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],det(t).constructor):e.apply(t,r))}function det(t){return(det=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function yet(t,e){return(yet=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}uet.Components=window.SuperMap.Components||{};var vet=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=pet(this,e,[t])).regExes={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/},r.CLASS_NAME="SuperMap.Format.WKT",r.extract={point:function(t){return t.x+" "+t.y},multipoint:function(t){for(var e=[],r=0,n=t.components.length;r<n;++r)e.push("("+this.extract.point.apply(this,[t.components[r]])+")");return e.join(",")},linestring:function(t){for(var e=[],r=0,n=t.components.length;r<n;++r)e.push(this.extract.point.apply(this,[t.components[r]]));return e.join(",")},multilinestring:function(t){for(var e=[],r=0,n=t.components.length;r<n;++r)e.push("("+this.extract.linestring.apply(this,[t.components[r]])+")");return e.join(",")},polygon:function(t){for(var e=[],r=0,n=t.components.length;r<n;++r)e.push("("+this.extract.linestring.apply(this,[t.components[r]])+")");return e.join(",")},multipolygon:function(t){for(var e=[],r=0,n=t.components.length;r<n;++r)e.push("("+this.extract.polygon.apply(this,[t.components[r]])+")");return e.join(",")},collection:function(t){for(var e=[],r=0,n=t.components.length;r<n;++r)e.push(this.extractGeometry.apply(this,[t.components[r]]));return e.join(",")}},r.parse={point:function(t){var e=C.trim(t).split(this.regExes.spaces);return new er(new Xt(e[0],e[1]))},multipoint:function(t){for(var e,r=C.trim(t).split(","),n=[],o=0,i=r.length;o<i;++o)e=r[o].replace(this.regExes.trimParens,"$1"),n.push(this.parse.point.apply(this,[e]).geometry);return new er(new le(n))},linestring:function(t){for(var e=C.trim(t).split(","),r=[],n=0,o=e.length;n<o;++n)r.push(this.parse.point.apply(this,[e[n]]).geometry);return new er(new Ee(r))},multilinestring:function(t){for(var e,r=C.trim(t).split(this.regExes.parenComma),n=[],o=0,i=r.length;o<i;++o)e=r[o].replace(this.regExes.trimParens,"$1"),n.push(this.parse.linestring.apply(this,[e]).geometry);return new er(new br(n))},polygon:function(t){for(var e,r,n,o=C.trim(t).split(this.regExes.parenComma),i=[],a=0,s=o.length;a<s;++a)e=o[a].replace(this.regExes.trimParens,"$1"),r=this.parse.linestring.apply(this,[e]).geometry,n=new je(r.components),i.push(n);return new er(new Fe(i))},multipolygon:function(t){for(var e,r=C.trim(t).split(this.regExes.doubleParenComma),n=[],o=0,i=r.length;o<i;++o)e=r[o].replace(this.regExes.trimParens,"$1"),n.push(this.parse.polygon.apply(this,[e]).geometry);return new er(new Pr(n))},geometrycollection:function(t){t=t.replace(/,\s*([A-Za-z])/g,"|$1");for(var e=C.trim(t).split("|"),r=[],n=0,o=e.length;n<o;++n)r.push(this.read(e[n]));return r}},r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&yet(t,e)}(e,ir),r=e,(n=[{key:"read",value:function(t){var e,r,n;t=t.replace(/[\n\r]/g," ");var o=this.regExes.typeStr.exec(t);return o&&(r=o[1].toLowerCase(),n=o[2],this.parse[r]&&(e=this.parse[r].apply(this,[n]))),e}},{key:"write",value:function(t){var e,r,n;t.constructor===Array?(e=t,n=!0):(e=[t],n=!1);var o=[];n&&o.push("GEOMETRYCOLLECTION(");for(var i=0,a=e.length;i<a;++i)n&&i>0&&o.push(","),r=e[i].geometry,o.push(this.extractGeometry(r));return n&&o.push(")"),o.join("")}},{key:"extractGeometry",value:function(t){var e=t.CLASS_NAME.split(".")[2].toLowerCase();return this.extract[e]?("collection"===e?"GEOMETRYCOLLECTION":e.toUpperCase())+"("+this.extract[e].apply(this,[t])+")":null}}])&&fet(r.prototype,n),o&&fet(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function get(t){"@babel/helpers - typeof";return(get="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function met(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,bet(n.key),n)}}function bet(t){var e=function(t,e){if("object"!=get(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=get(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==get(e)?e:e+""}var wet=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var r=this;e=e||{},this.speed=e.speed&&e.speed>=0?e.speed:1,this.frequency=e.speed&&e.frequency>=0?e.frequency:1e3,this.startTime=e.startTime&&null!=e.startTime?e.startTime:0,this.endTime=e.endTime&&null!=e.endTime&&e.endTime>=r.startTime?e.endTime:+new Date,this.repeat=void 0===e.repeat||e.repeat,this.reverse=void 0!==e.reverse&&e.reverse,this.currentTime=null,this.oldTime=null,this.running=!1,this.EVENT_TYPES=["start","pause","stop"],r.events=new ea(this,null,this.EVENT_TYPES),r.speed=Number(r.speed),r.frequency=Number(r.frequency),r.startTime=Number(r.startTime),r.endTime=Number(r.endTime),r.startTime=Date.parse(new Date(r.startTime)),r.endTime=Date.parse(new Date(r.endTime)),r.currentTime=r.startTime,this.CLASS_NAME="SuperMap.TimeControlBase"},(e=[{key:"updateOptions",value:function(t){var e=this;(t=t||{}).speed&&t.speed>=0&&(e.speed=t.speed,e.speed=Number(e.speed)),t.speed&&t.frequency>=0&&(e.frequency=t.frequency,e.frequency=Number(e.frequency)),t.startTime&&null!=t.startTime&&(e.startTime=t.startTime,e.startTime=Date.parse(new Date(e.startTime))),t.endTime&&null!=t.endTime&&t.endTime>=e.startTime&&(e.endTime=t.endTime,e.endTime=Date.parse(new Date(e.endTime))),null!=t.repeat&&(e.repeat=t.repeat),null!=t.reverse&&(e.reverse=t.reverse)}},{key:"start",value:function(){var t=this;t.running||(t.running=!0,t.tick(),t.events.triggerEvent("start",t.currentTime))}},{key:"pause",value:function(){this.running=!1,this.events.triggerEvent("pause",this.currentTime)}},{key:"stop",value:function(){var t=this;t.currentTime=t.startTime,t.running&&(t.running=!1),t.events.triggerEvent("stop",t.currentTime)}},{key:"toggle",value:function(){this.running?this.pause():this.start()}},{key:"setSpeed",value:function(t){return t>=0&&(this.speed=t,!0)}},{key:"getSpeed",value:function(){return this.speed}},{key:"setFrequency",value:function(t){return t>=0&&(this.frequency=t,!0)}},{key:"getFrequency",value:function(){return this.frequency}},{key:"setStartTime",value:function(t){var e=this;return!((t=Date.parse(new Date(t)))>e.endTime)&&(e.startTime=t,e.currentTime<e.startTime&&(e.currentTime=e.startTime,e.tick()),!0)}},{key:"getStartTime",value:function(){return this.startTime}},{key:"setEndTime",value:function(t){var e=this;return e.endTime=Date.parse(new Date(e.endTime)),!(t<e.startTime)&&(e.endTime=t,e.currentTime>=e.endTime&&(e.currentTime=e.startTime,e.tick()),!0)}},{key:"getEndTime",value:function(){return this.endTime}},{key:"setCurrentTime",value:function(t){var e=this;return e.currentTime=Date.parse(new Date(e.currentTime)),t>=e.startTime&&t<=e.endTime&&(e.currentTime=t,e.startTime=e.currentTime,e.tick(),!0)}},{key:"getCurrentTime",value:function(){return this.currentTime}},{key:"setRepeat",value:function(t){this.repeat=t}},{key:"getRepeat",value:function(){return this.repeat}},{key:"setReverse",value:function(t){this.reverse=t}},{key:"getReverse",value:function(){return this.reverse}},{key:"getRunning",value:function(){return this.running}},{key:"destroy",value:function(){var t=this;t.speed=null,t.frequency=null,t.startTime=null,t.endTime=null,t.currentTime=null,t.repeat=null,t.running=!1,t.reverse=null}},{key:"tick",value:function(){}}])&&met(t.prototype,e),r&&met(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function xet(t){"@babel/helpers - typeof";return(xet="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _et(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Eet(n.key),n)}}function Eet(t){var e=function(t,e){if("object"!=xet(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=xet(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==xet(e)?e:e+""}function Oet(t,e,r){return e=ket(e),function(t,e){if(e&&("object"===xet(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],ket(t).constructor):e.apply(t,r))}function Pet(){return(Pet="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ket(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function ket(t){return(ket=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Cet(t,e){return(Cet=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Tet=function(t){function e(t,r){var n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var o=n=Oet(this,e,[r]);return o.callback=t,Function.prototype.bind||(Function.prototype.bind=function(t){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var e=Array.prototype.slice.call(arguments,1),r=this,n=function(){},o=function(){return r.apply(this instanceof n&&t?this:t,e.concat(Array.prototype.slice.call(arguments)))};return n.prototype=this.prototype,o.prototype=new n,o}),o.update=o.update.bind(o),o.oldTime=o.currentTime,o.CLASS_NAME="SuperMap.TimeFlowControl",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Cet(t,e)}(e,wet),r=e,(n=[{key:"updateOptions",value:function(t){t=t||{},Pet(ket(e.prototype),"updateOptions",this).call(this,t)}},{key:"start",value:function(){var t=this;t.running||(t.running=!0,t.reverse?t.currentTime===t.startTime&&(t.oldTime=t.endTime,t.currentTime=t.oldTime):t.oldTime===t.endTime&&(t.currentTime=t.startTime,t.oldTime=t.currentTime),t.tick())}},{key:"stop",value:function(){Pet(ket(e.prototype),"stop",this).call(this);var t=this;t.oldTime=t.currentTime,t.running&&(t.running=!1),t.intervalId&&window.clearTimeout(t.intervalId)}},{key:"destroy",value:function(){Pet(ket(e.prototype),"destroy",this).call(this);this.oldTime=null,this.callback=null}},{key:"tick",value:function(){var t=this;t.intervalId&&window.clearInterval(t.intervalId),t.intervalId=null,t.update(),t.intervalId=window.setInterval(t.update,t.frequency)}},{key:"update",value:function(){var t=this;if(t.running)if(t.callback&&t.callback(t.currentTime),t.reverse){if(t.currentTime===t.startTime){if(!t.repeat)return t.running=!1,null;t.oldTime=t.endTime,t.currentTime=t.oldTime}else t.currentTime=t.oldTime,t.oldTime-=t.speed;t.oldTime<=t.startTime&&(t.oldTime=t.startTime)}else{if(t.currentTime===t.endTime){if(!t.repeat)return t.running=!1,t.stop(),null;t.stop(),t.currentTime=t.startTime,t.oldTime=t.currentTime,t.start()}else t.oldTime=t.currentTime,t.currentTime+=t.speed;t.currentTime>=t.endTime&&(t.currentTime=t.endTime)}}}])&&_et(r.prototype,n),o&&_et(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function Aet(t){"@babel/helpers - typeof";return(Aet="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Met(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,jet(n.key),n)}}function jet(t){var e=function(t,e){if("object"!=Aet(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Aet(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Aet(e)?e:e+""}var Iet=function(){return t=function t(e,r){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e){var n=e.substr(e.length-1,1);this.serviceUrl="/"===n?e.substr(0,e.length-2):e}this.options=r||{},this.CLASS_NAME="SuperMap.iManagerServiceBase"},(e=[{key:"request",value:function(t,e,r,n){(n=n||{headers:{Accept:"*/*","Content-Type":"application/json"}}).crossOrigin=this.options.crossOrigin,n.headers=this.options.headers;var o=hv.imanagerToken;return o&&(n.headers||(n.headers={}),n.headers["X-Auth-Token"]=o),r&&(r=JSON.stringify(r)),tt.commit(t,e,r,n).then(function(t){return t.json()})}}])&&Met(t.prototype,e),r&&Met(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function Net(t){"@babel/helpers - typeof";return(Net="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Let(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ret(n.key),n)}}function Ret(t){var e=function(t,e){if("object"!=Net(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Net(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Net(e)?e:e+""}var Det=function(t,e,r){return e&&Let(t.prototype,e),r&&Let(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},this.nodeSpec="SMALL",this.nodeCount=1,this.nodeName="",this.password="",this.description="",this.physicalMachineName="",this.ips=[],this.userName="",W.extend(this,e)});function Bet(t){"@babel/helpers - typeof";return(Bet="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Fet(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Get(n.key),n)}}function Get(t){var e=function(t,e){if("object"!=Bet(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Bet(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Bet(e)?e:e+""}function Uet(t,e,r){return e=zet(e),function(t,e){if(e&&("object"===Bet(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],zet(t).constructor):e.apply(t,r))}function zet(t){return(zet=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Vet(t,e){return(Vet=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Het=function(t){function e(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Uet(this,e,[t])}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Vet(t,e)}(e,Iet),r=e,(n=[{key:"load",value:function(){return this.request("GET",this.serviceUrl+"/web/api/service.json")}},{key:"createIServer",value:function(t){return this.request("POST",this.serviceUrl+"/cloud/web/nodes/server.json",new Det(t))}},{key:"createIPortal",value:function(t){return this.request("POST",this.serviceUrl+"/icloud/web/nodes/portal.json",new Det(t))}},{key:"iServerList",value:function(){return this.request("GET",this.serviceUrl+"/cloud/web/nodes/server.json")}},{key:"iPortalList",value:function(){return this.request("GET",this.serviceUrl+"/icloud/web/nodes/portal.json")}},{key:"startNodes",value:function(t){return this.request("POST",this.serviceUrl+"/cloud/web/nodes/started.json",t)}},{key:"stopNodes",value:function(t){return this.request("POST",this.serviceUrl+"/cloud/web/nodes/stopped.json",t)}}])&&Fet(r.prototype,n),o&&Fet(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function Wet(t){"@babel/helpers - typeof";return(Wet="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function qet(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Yet(n.key),n)}}function Yet(t){var e=function(t,e){if("object"!=Wet(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Wet(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Wet(e)?e:e+""}var Xet=function(){return t=function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),r=r||{},this.serviceUrl=e,this.CLASS_NAME="SuperMap.iPortalServiceBase",this.withCredentials=r.withCredentials||!1,this.crossOrigin=r.crossOrigin,this.headers=r.headers},(e=[{key:"request",value:function(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{headers:this.headers,crossOrigin:this.crossOrigin,withCredentials:this.withCredentials};return e=hv.appendCredential(e),tt.commit(t,e,r,n).then(function(t){return t.json()})}}])&&qet(t.prototype,e),r&&qet(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function Jet(t){"@babel/helpers - typeof";return(Jet="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ket(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Qet(n.key),n)}}function Qet(t){var e=function(t,e){if("object"!=Jet(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Jet(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Jet(e)?e:e+""}var Zet=function(t,e,r){return e&&Ket(t.prototype,e),r&&Ket(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},this.resourceType="",this.pageSize=12,this.currentPage=1,this.orderBy="UPDATETIME",this.orderType="DESC",this.searchType="PUBLIC",this.tags=[],this.dirIds=[],this.resourceSubTypes=[],this.aggregationTypes=[],this.text="",this.groupIds=[],this.departmentIds=[],W.extend(this,e)});function $et(t){"@babel/helpers - typeof";return($et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function trt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ert(n.key),n)}}function ert(t){var e=function(t,e){if("object"!=$et(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=$et(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==$et(e)?e:e+""}var rrt=function(t,e,r){return e&&trt(t.prototype,e),r&&trt(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},this.content=[],this.total=0,this.currentPage=1,this.pageSize=12,this.aggregations=null,W.extend(this,e)});function nrt(t){"@babel/helpers - typeof";return(nrt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ort(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,irt(n.key),n)}}function irt(t){var e=function(t,e){if("object"!=nrt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=nrt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==nrt(e)?e:e+""}function art(t,e,r){return e=srt(e),function(t,e){if(e&&("object"===nrt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],srt(t).constructor):e.apply(t,r))}function srt(t){return(srt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function urt(t,e){return(urt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var lrt=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=art(this,e,[t]),r=r||{},n.authorizeSetting=[],n.bounds="",n.bounds4326="",n.checkStatus="",n.createTime=0,n.description=null,n.dirId=null,n.epsgCode=0,n.heatLevel=0,n.id=0,n.name="",n.personalDirId=null,n.resourceId=0,n.resourceSubType=null,n.resourceType=null,n.serviceRootUrlId=null,n.tags=null,n.thumbnail=null,n.updateTime=0,n.userName="",n.sourceJSON={},W.extend(n,r),n.resourceUrl=t+"/web/"+n.resourceType.replace("_","").toLowerCase()+"s/"+n.resourceId,n.withCredentials&&(n.resourceUrl=t+"/web/mycontent/"+n.resourceType.replace("_","").toLowerCase()+"s/"+n.resourceId),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&urt(t,e)}(e,Xet),r=e,(n=[{key:"load",value:function(){var t=this;return t.request("GET",t.resourceUrl+".json").then(function(e){if(e.error)return e;t.sourceJSON=e})}},{key:"update",value:function(){var t=this.resourceType.replace("_","").toLowerCase();"data"===t&&(this.resourceUrl=this.resourceUrl+"/attributes.json");var e=JSON.stringify(this.sourceJSON);if("service"===t){var r={authorizeSetting:this.sourceJSON.authorizeSetting,metadata:this.sourceJSON.metadata,tags:this.sourceJSON.tags,thumbnail:this.sourceJSON.thumbnail,tokenRefreshUrl:this.sourceJSON.tokenRefreshUrl};e=JSON.stringify(r)}return this.request("PUT",this.resourceUrl,e,{headers:{"Content-Type":"application/x-www-form-urlencoded"}})}}])&&ort(r.prototype,n),o&&ort(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function crt(t){"@babel/helpers - typeof";return(crt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function frt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,hrt(n.key),n)}}function hrt(t){var e=function(t,e){if("object"!=crt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=crt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==crt(e)?e:e+""}var prt=function(t,e,r){return e&&frt(t.prototype,e),r&&frt(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},this.ids=[],this.entities=[],this.resourceType="",W.extend(this,e)});function drt(t){"@babel/helpers - typeof";return(drt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function yrt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,vrt(n.key),n)}}function vrt(t){var e=function(t,e){if("object"!=drt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=drt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==drt(e)?e:e+""}function grt(t,e,r){return e=mrt(e),function(t,e){if(e&&("object"===drt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],mrt(t).constructor):e.apply(t,r))}function mrt(t){return(mrt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function brt(t,e){return(brt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var wrt=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=grt(this,e,[t,r])).iportalUrl=t,r=r||{},n.withCredentials=r.withCredentials||!1,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&brt(t,e)}(e,Xet),r=e,(n=[{key:"load",value:function(){return tt.get(this.iportalUrl+"/web")}},{key:"queryResources",value:function(t){if(!(t instanceof Zet))return new Promise(function(t){t("queryParams is not instanceof iPortalQueryParam !")});var e=this,r=this.iportalUrl+"/gateway/catalog/resource/search.json";return t.t=(new Date).getTime(),this.request("GET",r,t).then(function(t){var r=[];(t.content||[]).forEach(function(t){r.push(new lrt(e.iportalUrl,t))});var n=new rrt;return n.content=r,n.total=t.total,n.currentPage=t.currentPage,n.pageSize=t.pageSize,n.aggregations=t.aggregations,n})}},{key:"updateResourcesShareSetting",value:function(t){if(!(t instanceof prt))return new Promise(function(t){t("shareParams is not instanceof iPortalShareParam !")});var e=t.resourceType.replace("_","").toLowerCase()+"s";"datas"===e&&(e="mycontent/"+e);var r={ids:t.ids,entities:t.entities},n=this.iportalUrl+"/web/"+e+"/sharesetting.json";return this.request("PUT",n,JSON.stringify(r)).then(function(t){return t})}}])&&yrt(r.prototype,n),o&&yrt(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function Srt(t){"@babel/helpers - typeof";return(Srt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function xrt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,_rt(n.key),n)}}function _rt(t){var e=function(t,e){if("object"!=Srt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Srt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Srt(e)?e:e+""}var Ert=function(t,e,r){return e&&xrt(t.prototype,e),r&&xrt(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},this.permissionType="",this.entityType="",this.entityName="GUEST",this.entityId=null,W.extend(this,e)});function Ort(t){"@babel/helpers - typeof";return(Ort="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Prt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,krt(n.key),n)}}function krt(t){var e=function(t,e){if("object"!=Ort(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Ort(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Ort(e)?e:e+""}var Crt=function(t,e,r){return e&&Prt(t.prototype,e),r&&Prt(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},this.rootUrl="",this.tags=[],this.entities=[],W.extend(this,e)});function Trt(t){"@babel/helpers - typeof";return(Trt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Art(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Mrt(n.key),n)}}function Mrt(t){var e=function(t,e){if("object"!=Trt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Trt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Trt(e)?e:e+""}var jrt=function(t,e,r){return e&&Art(t.prototype,e),r&&Art(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},this.type="",this.tags=[],this.entities=[],this.metadata={},this.addedMapNames=[],this.addedSceneNames=[],W.extend(this,e)});function Irt(t){"@babel/helpers - typeof";return(Irt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Nrt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Lrt(n.key),n)}}function Lrt(t){var e=function(t,e){if("object"!=Irt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Irt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Irt(e)?e:e+""}var Rrt=function(t,e,r){return e&&Nrt(t.prototype,e),r&&Nrt(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},this.fileName="",this.type="",this.tags=[],this.dataMetaInfo={},W.extend(this,e)});function Drt(t){"@babel/helpers - typeof";return(Drt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Brt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Frt(n.key),n)}}function Frt(t){var e=function(t,e){if("object"!=Drt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Drt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Drt(e)?e:e+""}var Grt=function(t,e,r){return e&&Brt(t.prototype,e),r&&Brt(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},this.xField="",this.yField="",this.fileEncoding="UTF-8",this.xIndex=1,this.yIndex=1,this.fieldTypes=[],this.separator="",this.firstRowIsHead=!0,this.url="",this.dataStoreInfo={},W.extend(this,e)});function Urt(t){"@babel/helpers - typeof";return(Urt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function zrt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Vrt(n.key),n)}}function Vrt(t){var e=function(t,e){if("object"!=Urt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Urt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Urt(e)?e:e+""}var Hrt=function(t,e,r){return e&&zrt(t.prototype,e),r&&zrt(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},this.type="",this.url="",this.connectionInfo={},W.extend(this,e)});function Wrt(t){"@babel/helpers - typeof";return(Wrt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function qrt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Yrt(n.key),n)}}function Yrt(t){var e=function(t,e){if("object"!=Wrt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Wrt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Wrt(e)?e:e+""}var Xrt=function(t,e,r){return e&&qrt(t.prototype,e),r&&qrt(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},this.dataBase="",this.server="",W.extend(this,e)});function Jrt(t){"@babel/helpers - typeof";return(Jrt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Krt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Qrt(n.key),n)}}function Qrt(t){var e=function(t,e){if("object"!=Jrt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Jrt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Jrt(e)?e:e+""}function Zrt(t,e,r){return e=$rt(e),function(t,e){if(e&&("object"===Jrt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],$rt(t).constructor):e.apply(t,r))}function $rt(t){return($rt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function tnt(t,e){return(tnt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var ent=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=Zrt(this,e,[t])).iportalUrl=t,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&tnt(t,e)}(e,Xet),r=e,(n=[{key:"deleteResources",value:function(t){var e=t.resourceType.replace("_","").toLowerCase(),r=this.iportalUrl+"/web/"+e+"s.json?ids="+encodeURI(JSON.stringify(t.ids));return"data"===e?(r=this.iportalUrl+"/web/mycontent/datas/delete.json",this.request("POST",r,JSON.stringify(t.ids))):this.request("DELETE",r)}},{key:"addMap",value:function(t){if(!(t instanceof Crt))return this.getErrMsgPromise("addMapParams is not instanceof IPortalAddResourceParam !");var e={rootUrl:t.rootUrl,tags:t.tags,authorizeSetting:t.entities},r=this.iportalUrl+"/web/maps/batchaddmaps.json";return this.request("POST",r,JSON.stringify(e)).then(function(t){return t})}},{key:"addScene",value:function(t){if(!(t instanceof Crt))return this.getErrMsgPromise("addSceneParams is not instanceof IPortalAddResourceParam !");var e={rootUrl:t.rootUrl,tags:t.tags,authorizeSetting:t.entities},r=this.iportalUrl+"/web/scenes/batchaddscenes.json";return this.request("POST",r,JSON.stringify(e)).then(function(t){return t})}},{key:"registerService",value:function(t){if(!(t instanceof jrt))return this.getErrMsgPromise("registerParams is not instanceof IPortalRegisterServiceParam !");var e={type:t.type,tags:t.tags,authorizeSetting:t.entities,metadata:t.metadata,addedMapNames:t.addedMapNames,addedSceneNames:t.addedSceneNames},r=this.iportalUrl+"/web/services.json";return this.request("POST",r,JSON.stringify(e)).then(function(t){return t})}},{key:"getErrMsgPromise",value:function(t){return new Promise(function(e){e(t)})}},{key:"uploadDataRequest",value:function(t,e){var r=this.iportalUrl+"/web/mycontent/datas/"+t+"/upload.json";return this.request("POST",r,e)}},{key:"addData",value:function(t,e){var r=this;if(!(t instanceof Rrt))return this.getErrMsgPromise("params is not instanceof iPortalAddDataParam !");var n,o=this.iportalUrl+"/web/mycontent/datas.json",i={fileName:t.fileName,tags:t.tags,type:t.type},a=t.type.toLowerCase();if("excel"===a||"csv"===a){if(!(t.dataMetaInfo instanceof Grt))return this.getErrMsgPromise("params.dataMetaInfo is not instanceof iPortalDataMetaInfoParam !");n={xField:t.dataMetaInfo.xField,yField:t.dataMetaInfo.yField},"csv"===a&&(n.fileEncoding=t.dataMetaInfo.fileEncoding),i.coordType="WGS84",i.dataMetaInfo=n}else if("hdfs"===a||"hbase"===a){if(!(t.dataMetaInfo instanceof Grt))return this.getErrMsgPromise("params.dataMetaInfo is not instanceof iPortalDataMetaInfoParam !");if(!(t.dataMetaInfo.dataStoreInfo instanceof Hrt))return this.getErrMsgPromise("params.dataMetaInfo.dataStoreInfo is not instanceof iPortalDataStoreInfoParam !");var s={type:t.dataMetaInfo.dataStoreInfo.type};switch(a){case"hdfs":s.url=t.dataMetaInfo.dataStoreInfo.url,n={url:t.dataMetaInfo.url,dataStoreInfo:s};break;case"hbase":if(!(t.dataMetaInfo.dataStoreInfo.connectionInfo instanceof Xrt))return this.getErrMsgPromise("params.dataMetaInfo.dataStoreInfo.connectionInfo is not instanceof iPortalDataConnectionInfoParam !");s.connectionInfo={dataBase:t.dataMetaInfo.dataStoreInfo.connectionInfo.dataBase,server:t.dataMetaInfo.dataStoreInfo.connectionInfo.server,engineType:"HBASE"},s.datastoreType="SPATIAL",n={dataStoreInfo:s}}i.dataMetaInfo=n}return this.request("POST",o,JSON.stringify(i)).then(function(t){return"hdfs"===a||"hbase"===a?t:t.childID?r.uploadDataRequest(t.childID,e):t.customResult})}},{key:"publishOrUnpublish",value:function(t,e){if(!t.dataId||!t.serviceType)return this.getErrMsgPromise("option.dataID and option.serviceType are Required!");var r=t.dataId,n=t.dataServiceId,o=t.serviceType,i=this.iportalUrl+"/web/mycontent/datas/"+r+"/publishstatus.json?serviceType="+o;return n&&(i+="&dataServiceId="+n),this.request("PUT",i,JSON.stringify(e)).then(function(t){return e?(n||(n=t.customResult),n):t})}},{key:"getDataPublishedStatus",value:function(t,e){var r=this.iportalUrl+"/web/mycontent/datas/"+t+"/publishstatus.json?dataServiceId="+e+"&forPublish=true";return this.request("GET",r)}},{key:"unPublishDataService",value:function(t){return this.publishOrUnpublish(t,!1)}},{key:"publishDataService",value:function(t){return this.publishOrUnpublish(t,!0)}}])&&Krt(r.prototype,n),o&&Krt(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function rnt(t){"@babel/helpers - typeof";return(rnt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function nnt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ont(n.key),n)}}function ont(t){var e=function(t,e){if("object"!=rnt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=rnt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==rnt(e)?e:e+""}var int=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.aggName=null,this.aggFieldName=null,this.CLASS_NAME="SuperMap.AggregationParameter",W.extend(this,e)},(e=[{key:"destroy",value:function(){this.aggName=null,this.aggFieldName=null,this.aggType=null}}])&&nnt(t.prototype,e),r&&nnt(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function ant(t){"@babel/helpers - typeof";return(ant="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function snt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,unt(n.key),n)}}function unt(t){var e=function(t,e){if("object"!=ant(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=ant(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ant(e)?e:e+""}function lnt(t,e,r){return e=cnt(e),function(t,e){if(e&&("object"===ant(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],cnt(t).constructor):e.apply(t,r))}function cnt(t){return(cnt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function fnt(t,e){return(fnt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var hnt=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=lnt(this,e)).subAggs=null,r.aggType=null,r.CLASS_NAME="SuperMap.BucketAggParameter",W.extend(r,t),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&fnt(t,e)}(e,int),r=e,(n=[{key:"destroy",value:function(){this.subAggs&&(this.subAggs=null)}}])&&snt(r.prototype,n),o&&snt(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function pnt(t){"@babel/helpers - typeof";return(pnt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function dnt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ynt(n.key),n)}}function ynt(t){var e=function(t,e){if("object"!=pnt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=pnt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==pnt(e)?e:e+""}function vnt(t,e,r){return e=mnt(e),function(t,e){if(e&&("object"===pnt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],mnt(t).constructor):e.apply(t,r))}function gnt(){return(gnt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=mnt(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function mnt(t){return(mnt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function bnt(t,e){return(bnt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var wnt=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=vnt(this,e)).aggType=In.AVG,W.extend(r,t),r.CLASS_NAME="SuperMap.MetricsAggParameter",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&bnt(t,e)}(e,int),r=e,(n=[{key:"destroy",value:function(){gnt(mnt(e.prototype),"destroy",this).call(this);this.aggType=null}}])&&dnt(r.prototype,n),o&&dnt(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function Snt(t){"@babel/helpers - typeof";return(Snt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function xnt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,_nt(n.key),n)}}function _nt(t){var e=function(t,e){if("object"!=Snt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Snt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Snt(e)?e:e+""}var Ent=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.displayModeChart=Bn.STANDARD,this.colourModeChart=Dn.DAY_BRIGHT,this.displayTypeName="S52",this.fontName="Arial",this.simplifiedMarker=!0,this.symbolizedAreaBoundary=!1,this.displayTextMessage=!1,this.displaySounding=!1,this.minVisibleScaleEnabled=!0,this.localizationDisplayText=!1,this.displayMetaObject=!1,this.displayCellName=!1,this.displaySafetyContourLabel=!1,this.displayBorder=!1,this.safetyContour=30,this.shallowContour=2,this.deepContour=30,this.safetyDepth=30,this.displayOtherContourLabel=!1,this.displayTwoShades=!1,this.depthUnit=en.METER,this.fontSize=10,this.displayableFeature=null,this.selectableFeature=null,this.textClipRegionEnabled=!1,this.displayLowAccurateMarker=!0,this.displayScaleFactor=.05,this.displayableAcronymClassify=null,e&&W.extend(this,e),this.CLASS_NAME="SuperMap.ChartSetting"},(e=[{key:"destroy",value:function(){this.displayModeChart=null,this.colourModeChart=null,this.displayTypeName=null,this.fontName=null,this.simplifiedMarker=null,this.symbolizedAreaBoundary=null,this.displayTextMessage=null,this.displaySounding=null,this.minVisibleScaleEnabled=null,this.localizationDisplayText=null,this.displayMetaObject=null,this.displayCellName=null,this.displaySafetyContourLabel=null,this.displayBorder=null,this.safetyContour=null,this.shallowContour=null,this.deepContour=null,this.safetyDepth=null,this.displayOtherContourLabel=null,this.displayTwoShades=null,this.depthUnit=null,this.fontSize=null,this.displayableFeature=null,this.selectableFeature=null,this.textClipRegionEnabled=null,this.displayLowAccurateMarker=null,this.displayScaleFactor=null,this.displayableAcronymClassify=null}}])&&xnt(t.prototype,e),r&&xnt(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function Ont(t){"@babel/helpers - typeof";return(Ont="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Pnt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,knt(n.key),n)}}function knt(t){var e=function(t,e){if("object"!=Ont(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Ont(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Ont(e)?e:e+""}var Cnt=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.clipDatasetName=null,this.clipDatasourceName=null,this.clipRegion=null,this.isClipInRegion=!0,this.isExactClip=null,e&&W.extend(this,e),this.CLASS_NAME="SuperMap.ClipParameter"},(e=[{key:"destroy",value:function(){var t=this;t.clipDatasetName=null,t.clipDatasourceName=null,t.clipRegion=null,t.isClipInRegion=null,t.isExactClip=null}},{key:"toJSON",value:function(){return W.toJSON({isClipInRegion:this.isClipInRegion,clipDatasetName:this.clipDatasetName,clipDatasourceName:this.clipDatasourceName,isExactClip:this.isExactClip,clipRegion:zn.fromGeometry(this.clipRegion)})}}])&&Pnt(t.prototype,e),r&&Pnt(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function Tnt(t){"@babel/helpers - typeof";return(Tnt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ant(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Mnt(n.key),n)}}function Mnt(t){var e=function(t,e){if("object"!=Tnt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Tnt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Tnt(e)?e:e+""}function jnt(t,e,r){return e=Nnt(e),function(t,e){if(e&&("object"===Tnt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Nnt(t).constructor):e.apply(t,r))}function Int(){return(Int="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Nnt(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Nnt(t){return(Nnt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Lnt(t,e){return(Lnt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Rnt=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=jnt(this,e)).precision=5,W.extend(r,t),r.aggType=jn.GEOHASH_GRID,r.CLASS_NAME="SuperMap.GeoHashGridAggParameter",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Lnt(t,e)}(e,hnt),r=e,o=[{key:"toJsonParameters",value:function(t){var e={aggName:t.aggName,aggFieldName:t.aggFieldName,aggType:t.aggType,precision:t.precision};return W.toJson(e)}}],(n=[{key:"destroy",value:function(){Int(Nnt(e.prototype),"destroy",this).call(this),this.aggType=null,this.precision=null}}])&&Ant(r.prototype,n),o&&Ant(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function Dnt(t){"@babel/helpers - typeof";return(Dnt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Bnt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Fnt(n.key),n)}}function Fnt(t){var e=function(t,e){if("object"!=Dnt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Dnt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Dnt(e)?e:e+""}var Gnt=function(t,e,r){return e&&Bnt(t.prototype,e),r&&Bnt(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.CLASS_NAME="LabelMatrixCell"});function Unt(t){"@babel/helpers - typeof";return(Unt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function znt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Vnt(n.key),n)}}function Vnt(t){var e=function(t,e){if("object"!=Unt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Unt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Unt(e)?e:e+""}function Hnt(t,e,r){return e=Wnt(e),function(t,e){if(e&&("object"===Unt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Wnt(t).constructor):e.apply(t,r))}function Wnt(t){return(Wnt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function qnt(t,e){return(qnt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Ynt=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=Hnt(this,e,[t])).height=0,r.pathField=null,r.rotation=0,r.width=0,r.sizeFixed=!1,r.type="IMAGE",t&&W.extend(r,t),r.CLASS_NAME="SuperMap.LabelImageCell",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&qnt(t,e)}(e,Gnt),r=e,(n=[{key:"destroy",value:function(){var t=this;t.height=null,t.pathField=null,t.rotation=null,t.width=null,t.sizeFixed=null}}])&&znt(r.prototype,n),o&&znt(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function Xnt(t){"@babel/helpers - typeof";return(Xnt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Jnt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Knt(n.key),n)}}function Knt(t){var e=function(t,e){if("object"!=Xnt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Xnt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Xnt(e)?e:e+""}function Qnt(t,e,r){return e=Znt(e),function(t,e){if(e&&("object"===Xnt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Znt(t).constructor):e.apply(t,r))}function Znt(t){return(Znt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function $nt(t,e){return($nt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var tot=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=Qnt(this,e,[t])).style=new Nr,r.symbolIDField=null,r.type="SYMBOL",t&&W.extend(r,t),r.CLASS_NAME="SuperMap.LabelSymbolCell",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&$nt(t,e)}(e,Gnt),r=e,(n=[{key:"destroy",value:function(){this.style&&(this.style.destroy(),this.style=null),this.symbolIDField=null}}])&&Jnt(r.prototype,n),o&&Jnt(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function eot(t){"@babel/helpers - typeof";return(eot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function rot(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,not(n.key),n)}}function not(t){var e=function(t,e){if("object"!=eot(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=eot(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==eot(e)?e:e+""}function oot(t,e,r){return e=iot(e),function(t,e){if(e&&("object"===eot(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],iot(t).constructor):e.apply(t,r))}function iot(t){return(iot=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function aot(t,e){return(aot=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var sot=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=oot(this,e,[t])).themeLabel=new Uz,r.type="THEME",t&&W.extend(r,t),r.CLASS_NAME=" SuperMap.LabelThemeCell",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&aot(t,e)}(e,Gnt),r=e,(n=[{key:"destroy",value:function(){this.themeLabel&&(this.themeLabel.destroy(),this.themeLabel=null)}}])&&rot(r.prototype,n),o&&rot(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function uot(t){"@babel/helpers - typeof";return(uot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function lot(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,cot(n.key),n)}}function cot(t){var e=function(t,e){if("object"!=uot(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=uot(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==uot(e)?e:e+""}var fot=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.layerName=null,this.isVisible=null,this.displayFilter=null,this.fieldValuesDisplayFilter=null,e&&W.extend(this,e),this.CLASS_NAME="SuperMap.LayerStatus"},(e=[{key:"destroy",value:function(){this.layerName=null,this.isVisible=null,this.displayFilter=null}},{key:"toJSON",value:function(){var t="{";t+='"type":"UGC",';var e=[];return this.layerName&&(e.push('"name":"'+this.layerName+'"'),e.push('"visible":'+this.isVisible)),this.displayFilter&&e.push('"displayFilter":"'+this.displayFilter+'"'),(this.minScale||0==this.minScale)&&e.push('"minScale":'+this.minScale),(this.maxScale||0==this.maxScale)&&e.push('"maxScale":'+this.maxScale),this.fieldValuesDisplayFilter&&e.push('"fieldValuesDisplayFilter":'+W.toJSON(this.fieldValuesDisplayFilter)),t+=e,t+="}"}}])&&lot(t.prototype,e),r&&lot(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function hot(t){"@babel/helpers - typeof";return(hot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function pot(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,dot(n.key),n)}}function dot(t){var e=function(t,e){if("object"!=hot(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=hot(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==hot(e)?e:e+""}var yot=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.datasourceConnectionInfo=null,this.foreignKeys=null,this.foreignTable=null,this.linkFields=null,this.linkFilter=null,this.name=null,this.primaryKeys=null,e&&W.extend(this,e),this.CLASS_NAME="SuperMap.LinkItem"},(e=[{key:"destroy",value:function(){var t=this;t.datasourceConnectionInfo instanceof dZ&&(t.datasourceConnectionInfo.destroy(),t.datasourceConnectionInfo=null),t.foreignKeys=null,t.foreignTable=null,t.linkFields=null,t.linkFilter=null,t.name=null,t.primaryKeys=null}}])&&pot(t.prototype,e),r&&pot(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function vot(t){"@babel/helpers - typeof";return(vot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function got(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,mot(n.key),n)}}function mot(t){var e=function(t,e){if("object"!=vot(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=vot(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==vot(e)?e:e+""}var bot=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},this.allowPointOverlap=!0,this.allowPointWithTextDisplay=!0,this.allowTextOverlap=!1,this.allowTextAndPointOverlap=!0,this.allowThemeGraduatedSymbolOverlap=!1,this.allowThemeGraphOverlap=!1,this.horizontalOverlappedSpaceSize=0,this.verticalOverlappedSpaceSize=0,W.extend(this,e),this.ugcLayer=new tH(e),this.CLASS_NAME="SuperMap.OverlapDisplayedOptions"},(e=[{key:"destroy",value:function(){W.reset(this)}},{key:"fromJson",value:function(t){this.ugcLayer.fromJson.apply(this,[t])}},{key:"toServerJSONObject",value:function(){return this.ugcLayer.toServerJSONObject.apply(this,arguments)}},{key:"toString",value:function(){var t=this.ugcLayer.toServerJSONObject.apply(this,arguments),e="{";for(var r in t)t.hasOwnProperty(r)&&(e+="'"+r+"':"+t[r]+",");return e=e.substr(0,e.length-1),e+="}"}}])&&got(t.prototype,e),r&&got(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function wot(t){"@babel/helpers - typeof";return(wot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Sot(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,xot(n.key),n)}}function xot(t){var e=function(t,e){if("object"!=wot(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=wot(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==wot(e)?e:e+""}var _ot=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.model=null,this.resultSetting=null,e&&W.extend(this,e),this.CLASS_NAME="SuperMap.ConvexHullAnalystParameters"},(e=[{key:"destroy",value:function(){this.model=null,this.resultSetting=null}}])&&Sot(t.prototype,e),r&&Sot(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function Eot(t){"@babel/helpers - typeof";return(Eot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Oot(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Pot(n.key),n)}}function Pot(t){var e=function(t,e){if("object"!=Eot(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Eot(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Eot(e)?e:e+""}var kot=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.bbox=null,this.layers=null,this.transparent=null,this.mapScale=null,this.returnVisibleOnly=null,this.width=null,this.height=null,W.extend(this,e),this.CLASS_NAME="SuperMap.GetLayersLegendInfoParameters"},(e=[{key:"destroy",value:function(){var t=this;t.bbox=null,t.layers=null,t.transparent=null,t.mapScale=null,t.returnVisibleOnly=null,t.width=null,t.height=null}}])&&Oot(t.prototype,e),r&&Oot(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function Cot(t){"@babel/helpers - typeof";return(Cot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Tot(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Aot(n.key),n)}}function Aot(t){var e=function(t,e){if("object"!=Cot(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Cot(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Cot(e)?e:e+""}var Mot=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},this.resourceID=null,this.tempLayerName=null,this.layerInfo=null,W.extend(this,e),this.CLASS_NAME="SuperMap.SetLayerInfoParameters"},(e=[{key:"destroy",value:function(){this.resourceID=null,this.tempLayerName=null,this.layerInfo=null}}])&&Tot(t.prototype,e),r&&Tot(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function jot(t){"@babel/helpers - typeof";return(jot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Iot(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Not(n.key),n)}}function Not(t){var e=function(t,e){if("object"!=jot(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=jot(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==jot(e)?e:e+""}var Lot=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},this.isTempLayers=null,this.resourceID=null,this.layersInfo=null,W.extend(this,e),this.CLASS_NAME="SuperMap.SetLayersInfoParameters"},(e=[{key:"destroy",value:function(){this.isTempLayers=null,this.resourceID=null,this.layersInfo=null}}])&&Iot(t.prototype,e),r&&Iot(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function Rot(t){"@babel/helpers - typeof";return(Rot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Dot(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Bot(n.key),n)}}function Bot(t){var e=function(t,e){if("object"!=Rot(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Rot(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Rot(e)?e:e+""}var Fot=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.maxWeight=null,this.nodeID=null,this.resourceValue=null,this.type=null,e&&W.extend(this,e),this.CLASS_NAME="SuperMap.SupplyCenter"}return e=t,n=[{key:"fromJson",value:function(e){if(e)return new t({maxWeight:e.maxWeight,nodeID:e.nodeID,resourceValue:e.resourceValue,type:e.type})}}],(r=[{key:"destroy",value:function(){this.maxWeight=null,this.nodeID=null,this.resourceValue=null,this.type=null}}])&&Dot(e.prototype,r),n&&Dot(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,r,n}();function Got(t){"@babel/helpers - typeof";return(Got="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Uot(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,zot(n.key),n)}}function zot(t){var e=function(t,e){if("object"!=Got(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Got(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Got(e)?e:e+""}var Vot=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.bounds=null,this.boundsType=Ln.MAX,this.cellSize=null,this.cellSizeType=Rn.UNION,W.extend(this,e),this.CLASS_NAME="SuperMap.terrainAnalystSetting"},(e=[{key:"destroy",value:function(){this.bounds=null,this.boundsType=null,this.cellSize=null,this.cellSizeType=null}}])&&Uot(t.prototype,e),r&&Uot(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function Hot(t){"@babel/helpers - typeof";return(Hot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Wot(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,qot(n.key),n)}}function qot(t){var e=function(t,e){if("object"!=Hot(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Hot(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Hot(e)?e:e+""}var Yot=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.flowEnabled=!1,this.leaderLineDisplayed=!1,this.leaderLineStyle=new Nr,e&&W.extend(this,e),this.CLASS_NAME="SuperMap.ThemeFlow"}return e=t,n=[{key:"fromObj",value:function(e){if(e){var r=new t;return W.copy(r,e),r.leaderLineStyle=Nr.fromJson(e.leaderLineStyle),r}}}],(r=[{key:"destroy",value:function(){var t=this;t.flowEnabled=null,t.leaderLineDisplayed=null,t.leaderLineStyle&&(t.leaderLineStyle.destroy(),t.leaderLineStyle=null)}}])&&Wot(e.prototype,r),n&&Wot(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,r,n}();function Xot(t){"@babel/helpers - typeof";return(Xot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Jot(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Kot(n.key),n)}}function Kot(t){var e=function(t,e){if("object"!=Xot(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Xot(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Xot(e)?e:e+""}var Qot=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.caption=null,this.color=new Ar,this.end=0,this.start=0,this.visible=!0,e&&W.extend(this,e),this.CLASS_NAME="SuperMap.ThemeGridRangeItem"}return e=t,n=[{key:"fromObj",value:function(e){if(e){var r=new t;return W.copy(r,e),r.color=Ar.fromJson(e.color),r}}}],(r=[{key:"destroy",value:function(){var t=this;t.caption=null,t.end=null,t.start=null,t.color&&(t.color.destroy(),t.color=null),t.visible=null}},{key:"toServerJSONObject",value:function(){var t={};return(t=W.copyAttributes(t,this)).color&&t.color.toServerJSONObject&&(t.color=t.color.toServerJSONObject()),t}}])&&Jot(e.prototype,r),n&&Jot(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,r,n}();function Zot(t){"@babel/helpers - typeof";return(Zot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function $ot(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,tit(n.key),n)}}function tit(t){var e=function(t,e){if("object"!=Zot(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Zot(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Zot(e)?e:e+""}function eit(t,e,r){return e=nit(e),function(t,e){if(e&&("object"===Zot(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],nit(t).constructor):e.apply(t,r))}function rit(){return(rit="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=nit(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function nit(t){return(nit=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function oit(t,e){return(oit=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var iit=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=eit(this,e,["GRIDRANGE",t])).items=null,r.rangeMode=un.EQUALINTERVAL,r.rangeParameter=0,r.colorGradientType=ln.YELLOW_RED,r.reverseColor=!1,t&&W.extend(r,t),r.CLASS_NAME="SuperMap.ThemeGridRange",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&oit(t,e)}(e,ez),r=e,o=[{key:"fromObj",value:function(t){if(t){var r=new e;W.copy(r,t);var n=t.items,o=n?n.length:0;r.items=[];for(var i=0;i<o;i++)r.items.push(Qot.fromObj(n[i]));return r}}}],(n=[{key:"destroy",value:function(){rit(nit(e.prototype),"destroy",this).call(this);var t=this;if(t.items){if(t.items.length>0)for(var r in t.items)t.items[r].destroy(),t.items[r]=null;t.items=null}t.reverseColor=null,t.rangeMode=null,t.rangeParameter=null,t.colorGradientType=null}}])&&$ot(r.prototype,n),o&&$ot(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function ait(t){"@babel/helpers - typeof";return(ait="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function sit(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,uit(n.key),n)}}function uit(t){var e=function(t,e){if("object"!=ait(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=ait(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ait(e)?e:e+""}var lit=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.caption=null,this.color=new Ar,this.unique=null,this.visible=!0,e&&W.extend(this,e),this.CLASS_NAME="SuperMap.ThemeGridUniqueItem"}return e=t,n=[{key:"fromObj",value:function(e){var r=new t;return W.copy(r,e),r.color=Ar.fromJson(e.color),r}}],(r=[{key:"destroy",value:function(){var t=this;t.caption=null,t.unique=null,t.color&&(t.color.destroy(),t.color=null),t.visible=null}},{key:"toServerJSONObject",value:function(){var t={};return(t=W.copyAttributes(t,this)).color&&t.color.toServerJSONObject&&(t.color=t.color.toServerJSONObject()),t}}])&&sit(e.prototype,r),n&&sit(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,r,n}();function cit(t){"@babel/helpers - typeof";return(cit="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function fit(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,hit(n.key),n)}}function hit(t){var e=function(t,e){if("object"!=cit(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=cit(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==cit(e)?e:e+""}function pit(t,e,r){return e=yit(e),function(t,e){if(e&&("object"===cit(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],yit(t).constructor):e.apply(t,r))}function dit(){return(dit="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=yit(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function yit(t){return(yit=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function vit(t,e){return(vit=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var git=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=pit(this,e,["GRIDUNIQUE",t])).defaultcolor=new Ar,r.items=null,t&&W.extend(r,t),r.CLASS_NAME="SuperMap.ThemeGridUnique",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&vit(t,e)}(e,ez),r=e,o=[{key:"fromObj",value:function(t){var r=new e,n=t.items,o=n?n.length:0;W.extend(r,t),r.items=[],r.defaultcolor=Ar.fromJson(t.defaultcolor);for(var i=0;i<o;i++)r.items.push(lit.fromObj(n[i]));return r}}],(n=[{key:"destroy",value:function(){dit(yit(e.prototype),"destroy",this).call(this);var t=this;if(t.items){if(t.items.length>0)for(var r in t.items)t.items[r].destroy(),t.items[r]=null;t.items=null}t.defaultcolor&&(t.defaultcolor.destroy(),t.defaultcolor=null)}},{key:"toServerJSONObject",value:function(){var t={};if((t=W.copyAttributes(t,this)).defaultcolor&&t.defaultcolor.toServerJSONObject&&(t.defaultcolor=t.defaultcolor.toServerJSONObject()),t.items){for(var e=[],r=t.items.length,n=0;n<r;n++)e.push(t.items[n].toServerJSONObject());t.items=e}return t}}])&&fit(r.prototype,n),o&&fit(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function mit(t){"@babel/helpers - typeof";return(mit="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function bit(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,wit(n.key),n)}}function wit(t){var e=function(t,e){if("object"!=mit(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=mit(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==mit(e)?e:e+""}var Sit=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.caption=null,this.unique=null,this.offsetX=0,this.offsetY=0,this.visible=!0,this.style=new iz,e&&W.extend(this,e),this.CLASS_NAME="SuperMap.ThemeLabelUniqueItem"}return e=t,n=[{key:"fromObj",value:function(e){if(e){var r=new t;return W.copy(r,e),r}}}],(r=[{key:"destroy",value:function(){var t=this;t.unique=null,t.caption=null,t.offsetX=null,t.offsetY=null,t.style&&(t.style.destroy(),t.style=null),t.visible=null}}])&&bit(e.prototype,r),n&&bit(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,r,n}();function xit(t){"@babel/helpers - typeof";return(xit="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _it(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Eit(n.key),n)}}function Eit(t){var e=function(t,e){if("object"!=xit(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=xit(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==xit(e)?e:e+""}var Oit=function(){return t=function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.srcData=e,this.targetData=r,this.CLASS_NAME="SuperMap.ThemeMemoryData"},(e=[{key:"destroy",value:function(){this.srcData=null,this.targetData=null}},{key:"toJSON",value:function(){if(this.srcData&&this.targetData){for(var t="",e=Math.min(this.srcData.length,this.targetData.length),r=0;r<e;r++)t+="'"+this.srcData[r]+"':'"+this.targetData[r]+"',";return r>0&&(t=t.substring(0,t.length-1)),"{"+t+"}"}return null}}])&&_it(t.prototype,e),r&&_it(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function Pit(t){"@babel/helpers - typeof";return(Pit="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function kit(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Cit(n.key),n)}}function Cit(t){var e=function(t,e){if("object"!=Pit(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Pit(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Pit(e)?e:e+""}var Tit=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},this.lineID=null,this.lineName=null,this.lineAliasName=null,this.startStopIndex=null,this.startStopName=null,this.startStopAliasName=null,this.endStopIndex=null,this.endStopName=null,this.endStopAliasName=null,W.extend(this,e),this.CLASS_NAME="SuperMap.TransferLine"}return e=t,n=[{key:"fromJson",value:function(e){if(e)return new t({lineID:e.lineID,lineName:e.lineName,lineAliasName:e.lineAliasName,startStopIndex:e.startStopIndex,startStopName:e.startStopName,startStopAliasName:e.startStopAliasName,endStopIndex:e.endStopIndex,endStopName:e.endStopName,endStopAliasName:e.endStopAliasName})}}],(r=[{key:"destroy",value:function(){W.reset(this)}}])&&kit(e.prototype,r),n&&kit(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,r,n}();function Ait(t){"@babel/helpers - typeof";return(Ait="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Mit(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,jit(n.key),n)}}function jit(t){var e=function(t,e){if("object"!=Ait(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Ait(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Ait(e)?e:e+""}var Iit=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},this.type=null,W.extend(this,e),this.CLASS_NAME="SuperMap.RasterFunctionParameter"},(e=[{key:"destroy",value:function(){this.type=null}}])&&Mit(t.prototype,e),r&&Mit(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function Nit(t){"@babel/helpers - typeof";return(Nit="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Lit(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Rit(n.key),n)}}function Rit(t){var e=function(t,e){if("object"!=Nit(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Nit(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Nit(e)?e:e+""}function Dit(t,e,r){return e=Fit(e),function(t,e){if(e&&("object"===Nit(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Fit(t).constructor):e.apply(t,r))}function Bit(){return(Bit="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Fit(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Fit(t){return(Fit=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Git(t,e){return(Git=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Uit=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=Dit(this,e,[t])).redIndex=0,r.nirIndex=1,r.colorMap="0:ffffe5ff;0.1:f7fcb9ff;0.2:d9f0a3ff;0.3:addd8eff;0.4:78c679ff;0.5:41ab5dff;0.6:238443ff;0.7:006837ff;1:004529ff",r.type=Nn.NDVI,W.extend(r,t),r.CLASS_NAME="SuperMap.NDVIParameter",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Git(t,e)}(e,Iit),r=e,(n=[{key:"destroy",value:function(){Bit(Fit(e.prototype),"destroy",this).call(this),this.redIndex=null,this.nirIndex=null,this.colorMap=null}},{key:"toJSON",value:function(){return{redIndex:this.redIndex,nirIndex:this.nirIndex,colorMap:this.colorMap,type:this.type}}}])&&Lit(r.prototype,n),o&&Lit(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function zit(t){"@babel/helpers - typeof";return(zit="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Vit(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Hit(n.key),n)}}function Hit(t){var e=function(t,e){if("object"!=zit(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=zit(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==zit(e)?e:e+""}function Wit(t,e,r){return e=Yit(e),function(t,e){if(e&&("object"===zit(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Yit(t).constructor):e.apply(t,r))}function qit(){return(qit="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Yit(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Yit(t){return(Yit=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Xit(t,e){return(Xit=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Jit=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=Wit(this,e,[t])).altitude=45,r.azimuth=315,r.zFactor=1,r.type=Nn.HILLSHADE,W.extend(r,t),r.CLASS_NAME="SuperMap.HillshadeParameter",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Xit(t,e)}(e,Iit),r=e,(n=[{key:"destroy",value:function(){qit(Yit(e.prototype),"destroy",this).call(this),this.altitude=null,this.azimuth=null,this.zFactor=null}},{key:"toJSON",value:function(){return{altitude:this.altitude,azimuth:this.azimuth,zFactor:this.zFactor,type:this.type}}}])&&Vit(r.prototype,n),o&&Vit(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function Kit(t){"@babel/helpers - typeof";return(Kit="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Qit(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Zit(n.key),n)}}function Zit(t){var e=function(t,e){if("object"!=Kit(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Kit(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Kit(e)?e:e+""}var $it=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.name=null,this.picAsUrl=null,this.picAsBase64=null,this.CLASS_NAME="SuperMap.WebPrintingJobCustomItems",W.extend(this,e)},(e=[{key:"destroy",value:function(){this.name=null,this.picAsUrl=null,this.picAsBase64=null}},{key:"toJSON",value:function(){var t={name:this.name};return this.title&&(t.title=this.title),this.picAsUrl?t.picAsUrl=this.picAsUrl:this.picAsBase64&&(t.picAsBase64=this.picAsBase64.replace(/^data:.+;base64,/,"")),W.toJSON(t)}}])&&Qit(t.prototype,e),r&&Qit(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function tat(t){"@babel/helpers - typeof";return(tat="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function eat(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,rat(n.key),n)}}function rat(t){var e=function(t,e){if("object"!=tat(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=tat(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==tat(e)?e:e+""}var nat=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.picAsUrl=null,this.picAsBase64=null,this.CLASS_NAME="SuperMap.WebPrintingJobImage",W.extend(this,e)},(e=[{key:"destroy",value:function(){this.picAsUrl=null,this.picAsBase64=null}},{key:"toJSON",value:function(){var t={};return this.picAsUrl&&(t.picAsUrl=this.picAsUrl),this.picAsBase64&&(t.picAsBase64=this.picAsBase64.replace(/^data:.+;base64,/,"")),W.toJSON(t)}}])&&eat(t.prototype,e),r&&eat(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function oat(t){"@babel/helpers - typeof";return(oat="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function iat(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,aat(n.key),n)}}function aat(t){var e=function(t,e){if("object"!=oat(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=oat(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==oat(e)?e:e+""}var sat=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.name=null,this.layerType=null,this.url=null,this.CLASS_NAME="SuperMap.WebPrintingJobLayers",W.extend(this,e)},(e=[{key:"destroy",value:function(){this.name=null,this.layerType=null,this.url=null}}])&&iat(t.prototype,e),r&&iat(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function uat(t){"@babel/helpers - typeof";return(uat="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function lat(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,cat(n.key),n)}}function cat(t){var e=function(t,e){if("object"!=uat(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=uat(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==uat(e)?e:e+""}var fat=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.title=null,this.picAsUrl=null,this.picAsBase64=null,this.layers=null,this.customItems=null,this.CLASS_NAME="SuperMap.WebPrintingJobLegendOptions",W.extend(this,e)},(e=[{key:"destroy",value:function(){this.title=null,this.picAsUrl=null,this.picAsBase64=null,this.layers instanceof sat&&(this.layers.destroy(),this.layers=null),this.customItems instanceof $it&&(this.customItems.destroy(),this.customItems=null)}},{key:"toJSON",value:function(){var t={title:this.title||""};return this.picAsUrl?t.picAsUrl=this.picAsUrl:this.picAsBase64?t.picAsBase64=this.picAsBase64.replace(/^data:.+;base64,/,""):this.customItems&&(t.customItems=this.customItems),W.toJSON(t)}}])&&lat(t.prototype,e),r&&lat(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function hat(t){"@babel/helpers - typeof";return(hat="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function pat(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,dat(n.key),n)}}function dat(t){var e=function(t,e){if("object"!=hat(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=hat(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==hat(e)?e:e+""}var yat=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.center=null,this.scale=null,this.layerNames=null,this.image=null,this.layers=null,this.CLASS_NAME="SuperMap.WebPrintingJobLittleMapOptions",W.extend(this,e)},(e=[{key:"destroy",value:function(){this.center=null,this.scale=null,this.layerNames=null,this.image instanceof nat&&(this.image.destroy(),this.image=null),this.layers instanceof sat&&(this.layers.destroy(),this.layers=null)}},{key:"toJSON",value:function(){var t={scale:this.scale,center:this.center};return this.layerNames?t.layerNames=this.layerNames:this.layers&&(t.layers=this.layers),this.image&&(t.image=this.image),W.toJSON(t)}}])&&pat(t.prototype,e),r&&pat(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function vat(t){"@babel/helpers - typeof";return(vat="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function gat(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,mat(n.key),n)}}function mat(t){var e=function(t,e){if("object"!=vat(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=vat(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==vat(e)?e:e+""}var bat=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.picAsUrl=null,this.picAsBase64=null,this.CLASS_NAME="SuperMap.WebPrintingJobNorthArrowOptions",W.extend(this,e)},(e=[{key:"destroy",value:function(){this.picAsUrl=null,this.picAsBase64=null}},{key:"toJSON",value:function(){var t={};return this.picAsUrl?t.picAsUrl=this.picAsUrl:this.picAsBase64&&(t.picAsBase64=this.picAsBase64.replace(/^data:.+;base64,/,"")),W.toJSON(t)}}])&&gat(t.prototype,e),r&&gat(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function wat(t){"@babel/helpers - typeof";return(wat="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Sat(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,xat(n.key),n)}}function xat(t){var e=function(t,e){if("object"!=wat(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=wat(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==wat(e)?e:e+""}var _at=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.scaleText=null,this.orientation=null,this.type=null,this.intervals=null,this.unit=null,this.CLASS_NAME="SuperMap.WebPrintingJobScaleBarOptions",W.extend(this,e)},(e=[{key:"destroy",value:function(){this.scaleText=null,this.orientation=null,this.type=null,this.intervals=null,this.unit=null}},{key:"toJSON",value:function(){var t={scaleText:this.scaleText||"",type:this.type||"BAR",intervals:this.intervals||"",unit:this.unit||"METER"};return this.orientation&&(t.orientation=this.orientation),W.toJSON(t)}}])&&Sat(t.prototype,e),r&&Sat(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function Eat(t){"@babel/helpers - typeof";return(Eat="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Oat(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Pat(n.key),n)}}function Pat(t){var e=function(t,e){if("object"!=Eat(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Eat(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Eat(e)?e:e+""}var kat=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.type=null,this.url=null,this.token=null,this.value=null,this.CLASS_NAME="SuperMap.WebPrintingJobContent",W.extend(this,e)},(e=[{key:"destroy",value:function(){this.type="WEBMAP",this.url=null,this.token=null,this.value=null}},{key:"toJSON",value:function(){var t={type:this.type};return this.token&&(t.token=this.token),this.url?t.url=this.url:this.value&&(t.value=this.value),W.toJSON(t)}}])&&Oat(t.prototype,e),r&&Oat(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function Cat(t){"@babel/helpers - typeof";return(Cat="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Tat(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Aat(n.key),n)}}function Aat(t){var e=function(t,e){if("object"!=Cat(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Cat(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Cat(e)?e:e+""}var Mat=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.templateName=null,this.title=null,this.subTitle=null,this.author=null,this.copyright=null,this.summaryText=null,this.time=null,this.scaleBarOptions=null,this.northArrowOptions=null,this.littleMapOptions=null,this.legendOptions=null,this.CLASS_NAME="SuperMap.WebPrintingJobLayoutOptions",W.extend(this,e)},(e=[{key:"destroy",value:function(){this.templateName=null,this.title=null,this.subTitle=null,this.author=null,this.copyright=null,this.summaryText=null,this.time=null,this.scaleBarOptions instanceof _at&&(this.scaleBarOptions.destroy(),this.scaleBarOptions=null),this.northArrowOptions instanceof bat&&(this.northArrowOptions.destroy(),this.northArrowOptions=null),this.littleMapOptions instanceof yat&&(this.littleMapOptions.destroy(),this.littleMapOptions=null),this.legendOptions instanceof fat&&(this.legendOptions.destroy(),this.legendOptions=null)}}])&&Tat(t.prototype,e),r&&Tat(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function jat(t){"@babel/helpers - typeof";return(jat="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Iat(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Nat(n.key),n)}}function Nat(t){var e=function(t,e){if("object"!=jat(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=jat(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==jat(e)?e:e+""}var Lat=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.format=null,this.dpi=96,this.scale=null,this.rotation=null,this.center=null,this.CLASS_NAME="SuperMap.WebPrintingJobExportOptions",W.extend(this,e)},(e=[{key:"destroy",value:function(){this.format=null,this.dpi=null,this.scale=null,this.rotation=null,this.center=null,this.outputSize=null}},{key:"toJSON",value:function(){var t={format:this.format||"PDF",dpi:this.dpi,scale:this.scale,center:this.center};return this.rotation&&(t.rotation=this.rotation),this.outputSize&&(t.outputSize=this.outputSize),W.toJSON(t)}}])&&Iat(t.prototype,e),r&&Iat(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function Rat(t){"@babel/helpers - typeof";return(Rat="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Dat(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Bat(n.key),n)}}function Bat(t){var e=function(t,e){if("object"!=Rat(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Rat(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Rat(e)?e:e+""}var Fat=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e&&(this.content=null,this.layoutOptions=null,this.exportOptions=null,W.extend(this,e),this.CLASS_NAME="SuperMap.WebPrintingJobParameters")},(e=[{key:"destroy",value:function(){this.content instanceof kat&&(this.content.destroy(),this.content=null),this.layoutOptions instanceof Mat&&(this.layoutOptions.destroy(),this.layoutOptions=null),this.exportOptions instanceof Lat&&(this.exportOptions.destroy(),this.exportOptions=null)}}])&&Dat(t.prototype,e),r&&Dat(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function Gat(t){"@babel/helpers - typeof";return(Gat="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Uat(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,zat(n.key),n)}}function zat(t){var e=function(t,e){if("object"!=Gat(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Gat(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Gat(e)?e:e+""}var Vat=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.include=void 0,this.exclude=void 0,this.CLASS_NAME="SuperMap.FieldsFilter",W.extend(this,e)}return e=t,n=[{key:"constructFromObject",value:function(e,r){return e&&(r=r||new t,e.hasOwnProperty("include")&&(r.include=e.include),e.hasOwnProperty("exclude")&&(r.exclude=e.exclude)),r}}],(r=[{key:"destroy",value:function(){this.include=void 0,this.exclude=void 0}}])&&Uat(e.prototype,r),n&&Uat(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,r,n}();function Hat(t){"@babel/helpers - typeof";return(Hat="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Wat(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,qat(n.key),n)}}function qat(t){var e=function(t,e){if("object"!=Hat(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Hat(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Hat(e)?e:e+""}var Yat=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.field=void 0,this.direction=t.Direction.ASC,this.CLASS_NAME="SuperMap.Sortby",W.extend(this,e)}return e=t,n=[{key:"constructFromObject",value:function(e,r){return e&&(r=r||new t,e.hasOwnProperty("field")&&(r.field=e.field),e.hasOwnProperty("direction")&&(r.direction=e.direction)),r}}],(r=[{key:"destroy",value:function(){this.field=void 0,this.direction="ASC"}}])&&Wat(e.prototype,r),n&&Wat(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,r,n}();function Xat(t){"@babel/helpers - typeof";return(Xat="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Jat(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Kat(n.key),n)}}function Kat(t){var e=function(t,e){if("object"!=Xat(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Xat(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Xat(e)?e:e+""}Yat.Direction={ASC:"ASC",DESC:"DESC"};var Qat=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.bbox=void 0,this.collections=void 0,this.ids=void 0,this.limit=void 0,this.fields=void 0,this.query=void 0,this.sortby=void 0,this.CLASS_NAME="SuperMap.ImageSearchParameter",W.extend(this,e)}return e=t,n=[{key:"constructFromObject",value:function(e,r){return e&&(r=r||new t,e.hasOwnProperty("bbox")&&(r.bbox=e.bbox),e.hasOwnProperty("collections")&&(r.collections=e.collections),e.hasOwnProperty("ids")&&(r.ids=e.ids),e.hasOwnProperty("limit")&&(r.limit=e.limit),e.hasOwnProperty("fields")&&(r.fields=Vat.constructFromObject&&Vat.constructFromObject(e.fields,{})||e.fields),e.hasOwnProperty("query")&&(r.query=e.query),e.hasOwnProperty("sortby")&&(r.sortby=e.sortby,e.sortby&&(r.sortby=e.sortby.map(function(t){return Yat.constructFromObject&&Yat.constructFromObject(t,{})||t})))),r}}],(r=[{key:"destroy",value:function(){var t=this;t.bbox=void 0,t.collections=void 0,t.ids=void 0,t.limit=void 0,t.fields=void 0,t.query=void 0,t.sortby=void 0}}])&&Jat(e.prototype,r),n&&Jat(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,r,n}();function Zat(t){"@babel/helpers - typeof";return(Zat="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function $at(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,tst(n.key),n)}}function tst(t){var e=function(t,e){if("object"!=Zat(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Zat(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Zat(e)?e:e+""}var est=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.stretchType=void 0,this.stdevCoefficient=void 0,this.gaussianCoefficient=void 0,this.useMedianValue=void 0,this.minPercent=void 0,this.maxPercent=void 0,this.CLASS_NAME="SuperMap.ImageStretchOption",W.extend(this,e)}return e=t,n=[{key:"constructFromObject",value:function(e,r){return e&&(r=r||new t,e.hasOwnProperty("stretchType")&&(r.stretchType=e.stretchType),e.hasOwnProperty("stdevCoefficient")&&(r.stdevCoefficient=e.stdevCoefficient),e.hasOwnProperty("gaussianCoefficient")&&(r.gaussianCoefficient=e.gaussianCoefficient),e.hasOwnProperty("useMedianValue")&&(r.useMedianValue=e.useMedianValue),e.hasOwnProperty("minPercent")&&(r.minPercent=e.minPercent),e.hasOwnProperty("maxPercent")&&(r.maxPercent=e.maxPercent)),r}}],(r=[{key:"destroy",value:function(){var t=this;t.stretchType=void 0,t.stdevCoefficient=void 0,t.gaussianCoefficient=void 0,t.useMedianValue=void 0,t.minPercent=void 0,t.maxPercent=void 0}}])&&$at(e.prototype,r),n&&$at(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,r,n}();function rst(t){"@babel/helpers - typeof";return(rst="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function nst(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ost(n.key),n)}}function ost(t){var e=function(t,e){if("object"!=rst(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=rst(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==rst(e)?e:e+""}est.StretchType={NONE:"NONE",GAUSSIAN:"GAUSSIAN",PERCENTCLIP:"PERCENTCLIP",MINIMUMMAXIMUM:"MINIMUMMAXIMUM",STANDARDDEVIATION:"STANDARDDEVIATION"};var ist=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.displayMode=void 0,this.displayBands=void 0,this.stretchOption=void 0,this.interpolationMode=void 0,this.colorScheme=void 0,this.colorTable=void 0,this.brightness=void 0,this.contrast=void 0,this.noData=void 0,this.noDataColor=void 0,this.noDataTransparent=void 0,this.backgroundValue=void 0,this.backgroundColor=void 0,this.backgroundTransparent=void 0,this.gridFunctions=void 0,this.CLASS_NAME="SuperMap.ImageRenderingRule",W.extend(this,e)}return e=t,n=[{key:"constructFromObject",value:function(e,r){return e&&(r=r||new t,e.hasOwnProperty("displayMode")&&(r.displayMode=e.displayMode),e.hasOwnProperty("displayBands")&&(r.displayBands=e.displayBands),e.hasOwnProperty("stretchOption")&&(r.stretchOption=est.constructFromObject&&est.constructFromObject(e.stretchOption,{})||e.stretchOption),e.hasOwnProperty("interpolationMode")&&(r.interpolationMode=e.interpolationMode),e.hasOwnProperty("colorScheme")&&(r.colorScheme=e.colorScheme),e.hasOwnProperty("colorTable")&&(r.colorTable=e.colorTable),e.hasOwnProperty("brightness")&&(r.brightness=e.brightness),e.hasOwnProperty("contrast")&&(r.contrast=e.contrast),e.hasOwnProperty("noData")&&(r.noData=e.noData),e.hasOwnProperty("noDataColor")&&(r.noDataColor=e.noDataColor),e.hasOwnProperty("backgroundValue")&&(r.backgroundValue=e.backgroundValue),e.hasOwnProperty("noDataTransparent")&&(r.noDataTransparent=e.noDataTransparent),e.hasOwnProperty("backgroundColor")&&(r.backgroundColor=e.backgroundColor),e.hasOwnProperty("backgroundTransparent")&&(r.backgroundTransparent=e.backgroundTransparent),e.hasOwnProperty("gridFunctions")&&(r.gridFunctions=e.gridFunctions)),r}}],(r=[{key:"destroy",value:function(){var t=this;t.displayMode=void 0,t.displayBands=void 0,t.stretchOption=void 0,t.interpolationMode=void 0,t.colorScheme=void 0,t.colorTable=void 0,t.brightness=void 0,t.contrast=void 0,t.noData=void 0,t.noDataColor=void 0,t.noDataTransparent=void 0,t.backgroundValue=void 0,t.backgroundColor=void 0,t.backgroundTransparent=void 0,t.gridFuncOptions=void 0}}])&&nst(e.prototype,r),n&&nst(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,r,n}();function ast(t){"@babel/helpers - typeof";return(ast="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function sst(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ust(n.key),n)}}function ust(t){var e=function(t,e){if("object"!=ast(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=ast(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ast(e)?e:e+""}ist.DisplayMode={COMPOSITE:"COMPOSITE",STRETCHED:"Stretched"},ist.InterpolationMode={NEARESTNEIGHBOR:"NEARESTNEIGHBOR",HIGHQUALITYBILINEAR:"HIGHQUALITYBILINEAR",DEFAULT:"DEFAULT"};var lst=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.girdFuncName="GFHillShade",this.Azimuth=315,this.Altitude=45,this.ZFactor=1,this.CLASS_NAME="SuperMap.ImageGFHillShade",W.extend(this,e)}return e=t,n=[{key:"constructFromObject",value:function(e,r){return e&&(r=r||new t,e.hasOwnProperty("girdFuncName")&&(r.girdFuncName=e.girdFuncName),e.hasOwnProperty("Azimuth")&&(r.Azimuth=e.Azimuth),e.hasOwnProperty("Altitude")&&(r.Altitude=e.Altitude),e.hasOwnProperty("ZFactor")&&(r.ZFactor=e.ZFactor)),r}}],(r=[{key:"destroy",value:function(){this.girdFuncName="GFHillShade",this.Azimuth=315,this.Altitude=45,this.ZFactor=1}}])&&sst(e.prototype,r),n&&sst(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,r,n}();function cst(t){"@babel/helpers - typeof";return(cst="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function fst(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,hst(n.key),n)}}function hst(t){var e=function(t,e){if("object"!=cst(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=cst(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==cst(e)?e:e+""}var pst=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.girdFuncName="GFAspect",this.Azimuth=void 0,this.CLASS_NAME="SuperMap.ImageGFAspect",W.extend(this,e)}return e=t,n=[{key:"constructFromObject",value:function(e,r){return e&&(r=r||new t,e.hasOwnProperty("girdFuncName")&&(r.girdFuncName=e.girdFuncName),e.hasOwnProperty("Azimuth")&&(r.Azimuth=e.Azimuth)),r}}],(r=[{key:"destroy",value:function(){this.girdFuncName="GFAspect",this.Azimuth=void 0}}])&&fst(e.prototype,r),n&&fst(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,r,n}();function dst(t){"@babel/helpers - typeof";return(dst="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function yst(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,vst(n.key),n)}}function vst(t){var e=function(t,e){if("object"!=dst(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=dst(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==dst(e)?e:e+""}var gst=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.girdFuncName="GFOrtho",this.CLASS_NAME="SuperMap.ImageGFOrtho",W.extend(this,e)}return e=t,n=[{key:"constructFromObject",value:function(e,r){return e&&(r=r||new t,e.hasOwnProperty("girdFuncName")&&(r.girdFuncName=e.girdFuncName)),r}}],(r=[{key:"destroy",value:function(){this.girdFuncName="GFOrtho"}}])&&yst(e.prototype,r),n&&yst(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,r,n}();function mst(t){"@babel/helpers - typeof";return(mst="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function bst(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,wst(n.key),n)}}function wst(t){var e=function(t,e){if("object"!=mst(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=mst(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==mst(e)?e:e+""}var Sst=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.girdFuncName="GFSlope",this.Altitude=45,this.ZFactor=1,this.CLASS_NAME="SuperMap.ImageGFSlope",W.extend(this,e)}return e=t,n=[{key:"constructFromObject",value:function(e,r){return e&&(r=r||new t,e.hasOwnProperty("girdFuncName")&&(r.girdFuncName=e.girdFuncName),e.hasOwnProperty("Altitude")&&(r.Altitude=e.Altitude),e.hasOwnProperty("ZFactor")&&(r.ZFactor=e.ZFactor)),r}}],(r=[{key:"destroy",value:function(){this.girdFuncName="GFSlope",this.Altitude=45,this.ZFactor=1}}])&&bst(e.prototype,r),n&&bst(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,r,n}();function xst(t){"@babel/helpers - typeof";return(xst="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _st(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Est(n.key),n)}}function Est(t){var e=function(t,e){if("object"!=xst(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=xst(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==xst(e)?e:e+""}var Ost=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id,this.name=null,this.geometry=null,this.address=null,this.attributes={},this.videoParameters=null,this.cameraLocation=null,W.extend(this,e),this.CLASS_NAME="SuperMap.VideoFeature"},(e=[{key:"destroy",value:function(){this.geometry&&this.geometry.destroy&&(this.geometry.destroy(),this.geometry=null),this.name=null,this.videoParameters=null,this.cameraLocation=null,this.address=null,this.attributes=null}},{key:"toGeoJSONFeature",value:function(t){return{type:"Feature",geometry:t?t(this.geometry):this.geometry,properties:this.attributes,name:this.name,address:this.address,id:this.id}}},{key:"toServerFeature",value:function(t){var e=t.geometryFunction,r={type:"VideoFeature",geometry:e&&this.geometry?e(this.geometry):this.geometry,name:this.name,address:this.address,id:this.id},n=[],o=[];for(var i in this.attributes)n.push(i),o.push(this.attributes[i]);return r.fieldNames=n,r.fieldValues=o,r}}])&&_st(t.prototype,e),r&&_st(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function Pst(t){"@babel/helpers - typeof";return(Pst="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function kst(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Cst(n.key),n)}}function Cst(t){var e=function(t,e){if("object"!=Pst(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Pst(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Pst(e)?e:e+""}var Tst=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},W.extend(this,e),this.CLASS_NAME="SuperMap.OnlineServiceBase"},(e=[{key:"request",value:function(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return e=hv.appendCredential(e),n.crossOrigin=this.options.crossOrigin,n.headers=this.options.headers,tt.commit(t,e,r,n).then(function(t){return t.json()})}}])&&kst(t.prototype,e),r&&kst(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function Ast(t){"@babel/helpers - typeof";return(Ast="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Mst(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,jst(n.key),n)}}function jst(t){var e=function(t,e){if("object"!=Ast(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Ast(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Ast(e)?e:e+""}function Ist(t,e,r){return e=Nst(e),function(t,e){if(e&&("object"===Ast(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Nst(t).constructor):e.apply(t,r))}function Nst(t){return(Nst=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Lst(t,e){return(Lst=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Rst=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=Ist(this,e,[t]),r=r||{},n.MD5=null,n.type=null,n.userName=null,n.fileName=null,n.size=null,n.serviceStatus=null,n.serviceId=null,n.id=null,n.lastModfiedTime=null,n.status=null,n.storageId=null,n.publishInfo=null,n.authorizeSetting=null,n.nickname=null,n.tags=[],n.description=null,n.dataItemServices=null,n.coordType=null,n.dataCheckResult=null,n.dataMetaInfo=null,n.thumbnail=null,W.extend(n,r),n.id&&(n.serviceUrl=t+"/"+n.id),n.CLASS_NAME="SuperMap.OnlineData",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Lst(t,e)}(e,Tst),r=e,(n=[{key:"load",value:function(){if(this.serviceUrl){var t=this;return t.request("GET",this.serviceUrl).then(function(e){W.extend(t,e)})}}},{key:"getPublishedServices",value:function(){return this.dataItemServices}},{key:"getAuthorizeSetting",value:function(){return this.authorizeSetting}}])&&Mst(r.prototype,n),o&&Mst(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function Dst(t){"@babel/helpers - typeof";return(Dst="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Bst(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Fst(n.key),n)}}function Fst(t){var e=function(t,e){if("object"!=Dst(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Dst(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Dst(e)?e:e+""}var Gst=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.rootUrl="https://www.supermapol.com",this.webUrl=this.rootUrl+"/web";var e=this.webUrl+"/mycontent";this.mDatasUrl=e+"/datas",this.CLASS_NAME="SuperMap.Online"},(e=[{key:"load",value:function(){return tt.get(this.rootUrl).then(function(t){return t})}},{key:"login",value:function(){hv.loginOnline(this.rootUrl,!0)}},{key:"queryDatas",value:function(t){var e=this,r=e.mDatasUrl;return t&&(t=t.toJSON()),tt.get(r,t).then(function(t){if(t&&t.content&&!(t.content.length<1)){for(var r=[],n=t.content,o=n.length,i=0;i<o;i++){var a=n[i],s=new Rst(e.mDatasUrl,a);r.push(s)}return r}})}}])&&Bst(t.prototype,e),r&&Bst(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function Ust(t){"@babel/helpers - typeof";return(Ust="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function zst(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Vst(n.key),n)}}function Vst(t){var e=function(t,e){if("object"!=Ust(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Ust(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Ust(e)?e:e+""}var Hst=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},this.userNames=null,this.types=null,this.fileName=null,this.serviceStatuses=null,this.serviceId=null,this.ids=null,this.keywords=null,this.orderBy=null,this.tags=null,this.filterFields=null,W.extend(this,e),this.CLASS_NAME="SuperMap.OnlineQueryDatasParameter"},(e=[{key:"toJSON",value:function(){var t=this,e={types:t.types,fileName:t.fileName,serviceStatuses:t.serviceStatuses,serviceId:t.serviceId,ids:t.ids,keywords:t.keywords,orderBy:t.orderBy,tags:t.tags,filterFields:t.filterFields};for(var r in e)null==e[r]&&delete e[r];return e}}])&&zst(t.prototype,e),r&&zst(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function Wst(t){"@babel/helpers - typeof";return(Wst="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function qst(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Yst(n.key),n)}}function Yst(t){var e=function(t,e){if("object"!=Wst(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Wst(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Wst(e)?e:e+""}var Xst=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.name=null,this.serviceIds=null,this.clientType=On.SERVER,this.limitation=null,W.extend(this,e),this.CLASS_NAME="SuperMap.KeyServiceParameter"},(e=[{key:"toJSON",value:function(){return{name:this.name,serviceIds:this.serviceIds,clientType:this.clientType,limitation:this.limitation}}}])&&qst(t.prototype,e),r&&qst(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function Jst(t){"@babel/helpers - typeof";return(Jst="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Kst(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Qst(n.key),n)}}function Qst(t){var e=function(t,e){if("object"!=Jst(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Jst(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Jst(e)?e:e+""}var Zst=function(t,e,r){return e&&Kst(t.prototype,e),r&&Kst(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.type=e,this.server=null,this.tokenServiceUrl=null,this.keyServiceUrl=null,W.extend(this,r),this.CLASS_NAME="SuperMap.ServerInfo",this.type=this.type||Kr.ISERVER,this.server||console.error("server url require is not  undefined");var n="/services/security/tokens";this.type===Kr.ISERVER&&this.server.indexOf("iserver")<0&&(n="/iserver"+n),this.tokenServiceUrl||(this.tokenServiceUrl=W.urlPathAppend(this.server,n)),this.keyServiceUrl||(this.type===Kr.IPORTAL?this.keyServiceUrl=W.urlPathAppend(this.server,"/web/mycontent/keys/register"):this.type===Kr.ONLINE&&(this.keyServiceUrl=W.urlPathAppend(this.server,"/web/mycontent/keys")))});function $st(t){"@babel/helpers - typeof";return($st="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function tut(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,eut(n.key),n)}}function eut(t){var e=function(t,e){if("object"!=$st(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=$st(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==$st(e)?e:e+""}var rut=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.userName=null,this.password=null,this.clientType=On.NONE,this.ip=null,this.referer=null,this.expiration=60,W.extend(this,e),this.CLASS_NAME="SuperMap.TokenServiceParameter"},(e=[{key:"toJSON",value:function(){return{userName:this.userName,password:this.password,clientType:this.clientType,ip:this.ip,referer:this.referer,expiration:this.expiration}}}])&&tut(t.prototype,e),r&&tut(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function nut(t){return function(t){if(Array.isArray(t))return out(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return out(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return out(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function out(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function iut(t){"@babel/helpers - typeof";return(iut="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function aut(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,sut(n.key),n)}}function sut(t){var e=function(t,e){if("object"!=iut(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=iut(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==iut(e)?e:e+""}var uut=function(){return t=function t(e,r,n){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),!r||"function"!=typeof r&&"object"!==iut(r)||"function"!=typeof r.Client)throw Error("Please enter the global variable of @elastic/elasticsearch@5.6.22 or elasticsearch@16.7.3 for the second parameter!");n=n||{},this.url=e;try{this.client=new r.Client({host:this.url})}catch(t){this.client=new r.Client({node:{url:new URL(this.url)}})}this.change=null,this.openGeoFence=!1,this.outOfGeoFence=null,this.geoFence=null,this.EVENT_TYPES=["change","error","outOfGeoFence"],this.events=new ea(this,null,this.EVENT_TYPES),this.eventListeners=null,W.extend(this,n),this.eventListeners instanceof Object&&this.events.on(this.eventListeners)},(e=[{key:"setGeoFence",value:function(t){this.geoFence=t}},{key:"bulk",value:function(t,e){return this.client.bulk(t,this._handleCallback(e))}},{key:"clearScroll",value:function(t,e){return this.client.clearScroll(t,this._handleCallback(e))}},{key:"count",value:function(t,e){return this.client.count(t,this._handleCallback(e))}},{key:"create",value:function(t,e){return this.client.create(t,this._handleCallback(e))}},{key:"delete",value:function(t,e){return this.client.delete(t,this._handleCallback(e))}},{key:"deleteByQuery",value:function(t,e){return this.client.deleteByQuery(t,this._handleCallback(e))}},{key:"deleteScript",value:function(t,e){return this.client.deleteScript(t,this._handleCallback(e))}},{key:"deleteTemplate",value:function(t,e){return this.client.deleteTemplate(t,this._handleCallback(e))}},{key:"exists",value:function(t,e){return this.client.exists(t,this._handleCallback(e))}},{key:"existsSource",value:function(t,e){return this.client.existsSource(t,this._handleCallback(e))}},{key:"explain",value:function(t,e){return this.client.explain(t,this._handleCallback(e))}},{key:"fieldCaps",value:function(t,e){return this.client.fieldCaps(t,this._handleCallback(e))}},{key:"get",value:function(t,e){return this.client.get(t,this._handleCallback(e))}},{key:"getScript",value:function(t,e){return this.client.getScript(t,this._handleCallback(e))}},{key:"getSource",value:function(t,e){return this.client.getSource(t,this._handleCallback(e))}},{key:"getTemplate",value:function(t,e){return this.client.getTemplate(t,this._handleCallback(e))}},{key:"index",value:function(t,e){return this.client.index(t,this._handleCallback(e))}},{key:"info",value:function(t,e){return this.client.info(t,this._handleCallback(e))}},{key:"mget",value:function(t,e){return this.client.mget(t,this._handleCallback(e))}},{key:"msearch",value:function(t,e){var r=this;return r.client.msearch(t).then(function(t){return t=t.body||t,r._update(t.responses,e),t},function(t){return e(t),r.events.triggerEvent("error",{error:t}),t})}},{key:"msearchTemplate",value:function(t,e){return this.client.msearchTemplate(t,this._handleCallback(e))}},{key:"mtermvectors",value:function(t,e){return this.client.mtermvectors(t,this._handleCallback(e))}},{key:"ping",value:function(t,e){return this.client.ping(t,this._handleCallback(e))}},{key:"putScript",value:function(t,e){return this.client.putScript(t,this._handleCallback(e))}},{key:"putTemplate",value:function(t,e){return this.client.putTemplate(t,this._handleCallback(e))}},{key:"reindex",value:function(t,e){return this.client.reindex(t,this._handleCallback(e))}},{key:"reindexRessrottle",value:function(t,e){return this.client.reindexRessrottle(t,this._handleCallback(e))}},{key:"renderSearchTemplate",value:function(t,e){return this.client.renderSearchTemplate(t,this._handleCallback(e))}},{key:"scroll",value:function(t,e){return this.client.scroll(t,this._handleCallback(e))}},{key:"search",value:function(t,e){var r=this;return r.client.search(t).then(function(t){return t=t.body||t,r._update(t,e),t},function(t){return e&&e(t),r.events.triggerEvent("error",{error:t}),t})}},{key:"searchShards",value:function(t,e){return this.client.searchShards(t,this._handleCallback(e))}},{key:"searchTemplate",value:function(t,e){return this.client.searchTemplate(t,this._handleCallback(e))}},{key:"suggest",value:function(t,e){return this.client.suggest(t,this._handleCallback(e))}},{key:"termvectors",value:function(t,e){return this.client.termvectors(t,this._handleCallback(e))}},{key:"update",value:function(t,e){return this.client.update(t,this._handleCallback(e))}},{key:"updateByQuery",value:function(t,e){return this.client.updateByQuery(t,this._handleCallback(e))}},{key:"_handleCallback",value:function(t){return function(){var e=Array.from(arguments),r=e.shift(),n=e.shift(),o=n&&n.body;if(o){var i=n;e=[i.statusCode,i.headers],n=o}t.call.apply(t,[this,r,n].concat(nut(e)))}}},{key:"_update",value:function(t,e){var r=this;t&&(r.data=t,r.openGeoFence&&r.geoFence&&r._validateDatas(t),r.events.triggerEvent("change",{data:r.data}),r.change?r.change&&r.change(t):e&&e(void 0,{responses:t}))}},{key:"_validateDatas",value:function(t){if(t){t instanceof Array||(t=[t]);var e,r=t.length;for(e=0;e<r;e++)this._validateData(t[e])}}},{key:"_validateData",value:function(t){var e=this;t.hits.hits.map(function(r){var n=r._source,o=e._getMeterPerMapUnit(e.geoFence.unit),i=e.geoFence.center[0]*o,a=e.geoFence.center[1]*o,s=n.x*o,u=n.y*o;return e._distance(s,u,i,a)>e.geoFence.radius&&(e.outOfGeoFence&&e.outOfGeoFence(t),e.events.triggerEvent("outOfGeoFence",{data:t})),r})}},{key:"_distance",value:function(t,e,r,n){return Math.sqrt((t-r)*(t-r)+(e-n)*(e-n))}},{key:"_getMeterPerMapUnit",value:function(t){var e;return"meter"===t?e=1:"degree"===t&&(e=2*Math.PI*6378137/360),e}}])&&aut(t.prototype,e),r&&aut(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function lut(t){"@babel/helpers - typeof";return(lut="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function cut(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,fut(n.key),n)}}function fut(t){var e=function(t,e){if("object"!=lut(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=lut(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==lut(e)?e:e+""}var hut=new Go,put=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)},r=[{key:"createCanvas",value:function(t,e){var r=document.createElement("canvas");return r.height=t,r.width=e,r.getContext("2d")}},{key:"getLinearGradient",value:function(t,e,r,n,o){this._ctx||(this._ctx=this.getContext());for(var i=this._ctx.createLinearGradient(t,e,r,n),a=o.length,s=1/(a-1),u=0,l=0;l<a;l++)i.addColorStop(u,o[l]),u+=s;return i.__nonRecursion=!0,i}},{key:"getContext",value:function(){return this._ctx||(this._ctx=document.createElement("canvas").getContext("2d")),this._ctx}},{key:"getStepColors",value:function(t,e,r){t=hut.toRGBA(t),e=hut.toRGBA(e),t=hut.getData(t);for(var n=[],o=((e=hut.getData(e))[0]-t[0])/r,i=(e[1]-t[1])/r,a=(e[2]-t[2])/r,s=(e[3]-t[3])/r,u=0,l=t[0],c=t[1],f=t[2],h=t[3];u<r;u++)n[u]=hut.toColor([hut.adjust(Math.floor(l),[0,255]),hut.adjust(Math.floor(c),[0,255]),hut.adjust(Math.floor(f),[0,255]),h.toFixed(4)-0],"hex"),l+=o,c+=i,f+=a,h+=s;return l=e[0],c=e[1],f=e[2],h=e[3],n[u]=hut.toColor([l,c,f,h],"hex"),n}},{key:"getGradientColors",value:function(t,e,r){var n,o,i,a=[],s=t.length;if(void 0!==e){if(s>=e)if("RANGE"===r)for(o=0;o<e;o++)a.push(t[o]);else for(o=0;o<e;o++){var u=Math.floor(o/2);if(o%2==0)a.push(t[u]);else{var l=t.length-1-u;a.push(t[l])}}else{for(n=Math.ceil(e/(s-1)),o=0,i=s-1;o<i;o++){var c=this.getStepColors(t[o],t[o+1],n);o<i-1&&c.pop(),a=a.concat(c)}for(var f=a.length-e,h=0;h<f;h++)a.splice(2,1)}return a}}}],(e=null)&&cut(t.prototype,e),r&&cut(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function dut(t){"@babel/helpers - typeof";return(dut="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function yut(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,vut(n.key),n)}}function vut(t){var e=function(t,e){if("object"!=dut(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=dut(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==dut(e)?e:e+""}var gut=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)},r=[{key:"newInstance",value:function(){return this.geostatsInstance||(this.geostatsInstance=new window.geostats),this.geostatsInstance}},{key:"getInstance",value:function(t){var e=this.newInstance();return e.setSerie(t),e}},{key:"getArrayStatistic",value:function(t,e){return t.length?"Sum"===e||"æ±å"===e?this.getSum(t):"Maximum"===e||"æå¤§å¼"===e?this.getMax(t):"Minimum"===e||"æå°å¼"===e?this.getMin(t):"Average"===e||"å¹³åå¼"===e?this.getMean(t):"Median"===e||"ä¸­ä½æ°"===e?this.getMedian(t):"times"===e||"è®¡æ°"===e?this.getTimes(t):void 0:0}},{key:"getArraySegments",value:function(t,e,r){return"offset"===e?this.getEqInterval(t,r):"jenks"===e?this.getJenks(t,r):"square"===e?this.getMin(t)>=0&&this.getSqrtInterval(t,r):"logarithm"===e?this.getMin(t)>0&&this.getGeometricProgression(t,r):void 0}},{key:"getSum",value:function(t){return this.getInstance(t).sum()}},{key:"getMax",value:function(t){return this.getInstance(t).max()}},{key:"getMin",value:function(t){return this.getInstance(t).min()}},{key:"getMean",value:function(t){return this.getInstance(t).mean()}},{key:"getMedian",value:function(t){return this.getInstance(t).median()}},{key:"getTimes",value:function(t){return t.length}},{key:"getEqInterval",value:function(t,e){return this.getInstance(t).getClassEqInterval(e)}},{key:"getJenks",value:function(t,e){return this.getInstance(t).getClassJenks(e)}},{key:"getSqrtInterval",value:function(t,e){return t=t.map(function(t){return Math.sqrt(t)}),this.getInstance(t).getClassEqInterval(e).map(function(t){return t*t})}},{key:"getGeometricProgression",value:function(t,e){return this.getInstance(t).getClassGeometricProgression(e)}}],(e=null)&&yut(t.prototype,e),r&&yut(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function mut(t){if(!t)throw new Error("No GeoJSON coords provided");if(!t||0===t.length)return null;var e=t.length,r=new Float64Array(t.flat()),n=window.Module._malloc(2*e*8);window.Module.HEAPF64.set(r,n/8);var o=window.Module._UGCWasm_Geometry_CreatePoint2DsFromBuffer(n,e);return window.Module._free(n),o}function but(t){if(!t)throw new Error("No GeoJSON coords provided");if(!t||0===t.length)return null;var e=t.length,r=new Float64Array(t),n=window.Module._malloc(8*e);window.Module.HEAPF64.set(r,n/8);var o=window.Module._UGCWasm_Helper_CreateDoubleArray(n,e);return window.Module._free(n),o}function wut(t){var e=window.Module._UGCWasm_Helper_GetDoubleArrayLength(t),r=window.Module._malloc(8*e);window.Module._UGCWasm_Helper_GetBufferFromDoubleArray(t,r);for(var n=new Float64Array(window.Module.HEAPF64.buffer,r,e),o=[],i=0;i<e;i++)o.push(n[i]);return window.Module._free(r),o}function Sut(t){if(!t)return null;switch(window.Module._UGCWasm_Geometry_GetType(t)){case 1:var e=[],r=window.Module._UGCWasm_GeoPoint_GetX(t),n=window.Module._UGCWasm_GeoPoint_GetY(t);return e.push(r,n),{type:"Point",coordinates:e};case 3:for(var o=[],i=window.Module._UGCWasm_GeoLine_GetPartCount(t),a=0;a<i;a++){var s=window.Module._UGCWasm_GeoLine_GetPartPointCount(t,a),u=window.Module._malloc(2*s*8);window.Module._UGCWasm_GeoLine_GetPart2(t,u,a);for(var l=new Float64Array(window.Module.HEAPF64.buffer,u,2*s),c=[],f=0;f<2*s;f+=2)c.push([l[f],l[f+1]]);window.Module._free(u),o.push(c)}return{type:"LineString",coordinates:o[0]};case 5:for(var h=[],p=window.Module._UGCWasm_GeoRegion_GetPartCount(t),d=0;d<p;d++){var y=window.Module._UGCWasm_GeoRegion_GetPartPointCount(t,d),v=window.Module._malloc(2*y*8);window.Module._UGCWasm_GeoRegion_GetPart2(t,v,d);for(var g=new Float64Array(window.Module.HEAPF64.buffer,v,2*y),m=[],b=0;b<2*y;b+=2)m.push([g[b],g[b+1]]);window.Module._free(v),h.push(m)}return{type:"Polygon",coordinates:h};default:return null}}function xut(t){if(!t)throw new Error("No GeoJSON object provided");switch(t.type){case"Feature":return xut(t.geometry);case"FeatureCollection":return 0===t.features.length?null:xut(t.features[0].geometry);case"Point":return 0===t.coordinates.length?window.Module._UGCWasm_GeoPoint_New():window.Module._UGCWasm_GeoPoint_New2(t.coordinates[0],t.coordinates[1]);case"LineString":if(0===t.coordinates.length)return window.Module._UGCWasm_GeoLine_New();var e=window.Module._UGCWasm_GeoLine_New(),r=mut(t.coordinates);return window.Module._UGCWasm_GeoLine_AddPart2(e,r,t.coordinates.length),e;case"Polygon":if(0===t.coordinates.length)return window.Module._UGCWasm_GeoRegion_New();var n=window.Module._UGCWasm_GeoRegion_New(),o=mut(t.coordinates[0]);if(window.Module._UGCWasm_GeoRegion_AddPart2(n,o,t.coordinates[0].length),t.coordinates.length>1)for(var i=1;i<t.coordinates.length;i++){var a=mut(t.coordinates[i]);window.Module._UGCWasm_GeoRegion_AddPart2(n,a,t.coordinates[i].length)}return n;case"MultiLineString":if(0===t.coordinates.length)return window.Module._UGCWasm_GeoLine_New();var s=window.Module._UGCWasm_GeoLine_New(),u=mut(t.coordinates[0]);if(window.Module._UGCWasm_GeoLine_AddPart2(s,u,t.coordinates[0].length),t.coordinates.length>1)for(var l=1;l<t.coordinates.length;l++){var c=mut(t.coordinates[l]);window.Module._UGCWasm_GeoLine_AddPart2(s,c,t.coordinates[l].length)}return s;default:throw new Error("Unsupported GeoJSON type: "+t.type+". Are you sure this is valid GeoJSON?")}}function _ut(t){"@babel/helpers - typeof";return(_ut="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Eut(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Out(n.key),n)}}function Out(t){var e=function(t,e){if("object"!=_ut(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=_ut(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==_ut(e)?e:e+""}function Put(t,e,r){return e=kut(e),function(t,e){if(e&&("object"===_ut(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],kut(t).constructor):e.apply(t,r))}function kut(t){return(kut=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Cut(t,e){return(Cut=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Tut=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r=Put(this,e),t&&(window.Module=t),r.module=window.Module,r.addEventType("loaded"),r.module.calledRun?r.triggerEvent("loaded",{}):r.module.onRuntimeInitialized=function(){r.triggerEvent("loaded",{})},r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Cut(t,e)}(e,ea),r=e,(n=[{key:"buffer",value:function(t,e){var r=xut(t),n=this.module._UGCWasm_Geometrist_Buffer(r,e);return{type:"Feature",geometry:Sut(n)}}},{key:"computeConvexHull",value:function(t){var e=t.length,r=mut(t);return{type:"Feature",geometry:Sut(this.module._UGCWasm_Geometrist_ComputeConvexHull(r,e))}}},{key:"isIdentical",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e-6,n=xut(t),o=xut(e);return 1===this.module._UGCWasm_Geometrist_IsIdentical(n,o,r)}},{key:"hasTouch",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e-6,n=xut(t),o=xut(e);return 1===this.module._UGCWasm_Geometrist_HasTouch(n,o,r)}},{key:"resample",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e-6,r=xut(t);return{type:"Feature",geometry:Sut(this.module._UGCWasm_Geometrist_Resample(r,e))}}},{key:"isParallel",value:function(t,e,r,n,o,i,a,s){return 1===this.module._UGCWasm_Geometrist_IsParallel(t,e,r,n,o,i,a,s)}},{key:"computePerpendicularPosition",value:function(t,e,r,n,o,i){var a=this.module._UGCWasm_Helper_CreateDoubleArray(0,2);return this.module._UGCWasm_Geometrist_ComputePerpendicularPosition(t,e,r,n,o,i,a),a=wut(a)}},{key:"isPointOnLine",value:function(t,e,r,n,o,i,a){return 1===this.module._UGCWasm_Geometrist_IsPointOnLine(t,e,r,n,o,i,a)}},{key:"isProjectOnLineSegment",value:function(t,e,r,n,o,i){return 1===this.module._UGCWasm_Geometrist_IsProjectOnLineSegment(t,e,r,n,o,i)}},{key:"distanceToLineSegment",value:function(t,e,r,n,o,i){return this.module._UGCWasm_Geometrist_DistanceToLineSegment(t,e,r,n,o,i)}},{key:"nearestPointToVertex",value:function(t,e,r){var n=this.module._UGCWasm_Helper_CreateDoubleArray(0,2),o=xut(r);return{find:1===this.module._UGCWasm_Geometrist_NearestPointToVertex(t,e,o,n),values:n=wut(n)}}},{key:"computeConcaveHullPoints",value:function(t,e,r){var n=but(t),o=but(e);return{type:"Feature",geometry:Sut(this.module._UGCWasm_Geometrist_ComputeConcaveHullPoints(n,o,t.length,r))}}},{key:"isSegmentIntersect",value:function(t,e,r,n,o,i,a,s){return 1===this.module._UGCWasm_Geometrist_IsSegmentIntersect(t,e,r,n,o,i,a,s)}},{key:"isIntersectRegionWithRect",value:function(t,e,r,n,o){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1e-6,a=xut(t);return 1===this.module._UGCWasm_Geometrist_isIntersectRegionWithRect(a,e,r,n,o,i)}},{key:"isOnSameSide",value:function(t,e,r,n,o,i,a,s){return 1===this.module._UGCWasm_Geometrist_IsOnSameSide(t,e,r,n,o,i,a,s)}},{key:"isRight",value:function(t,e,r,n,o,i){return 1===this.module._UGCWasm_Geometrist_IsRight(t,e,r,n,o,i)}},{key:"isLeft",value:function(t,e,r,n,o,i){return 1===this.module._UGCWasm_Geometrist_IsLeft(t,e,r,n,o,i)}},{key:"computeGeodesicArea",value:function(t,e){var r=xut(t),n=this.module._UGCWasm_Geometry_NewUGPrjCoordSys(e);return this.module._UGCWasm_Geometrist_ComputeGeodesicArea(r,n)}},{key:"smooth",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,r=xut(t);return{type:"Feature",geometry:Sut(this.module._UGCWasm_Geometrist_Smooth(r,e))}}},{key:"computeGeodesicDistance",value:function(t,e,r,n){var o=but(t),i=but(e);return this.module._UGCWasm_Geometrist_ComputeGeodesicDistance(o,i,r,n)}},{key:"computeParallel",value:function(t,e){var r=xut(t);return{type:"Feature",geometry:Sut(this.module._UGCWasm_Geometrist_ComputeParallel(r,e))}}},{key:"computeConvexHullPoints",value:function(t,e){var r=but(t),n=but(e);return{type:"Feature",geometry:Sut(this.module._UGCWasm_Geometrist_ComputeConvexHullPoints(r,n,t.length))}}}])&&Eut(r.prototype,n),o&&Eut(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();var Aut=r(7820),Mut=r.n(Aut);function jut(t){"@babel/helpers - typeof";return(jut="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Iut(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Nut(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Rut(n.key),n)}}function Lut(t,e,r){return e&&Nut(t.prototype,e),r&&Nut(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Rut(t){var e=function(t,e){if("object"!=jut(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=jut(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==jut(e)?e:e+""}var Dut=function(){function t(e){Iut(this,t),this.env=null,this.parser=null,this.ruleSet=null,this.cartoStr="",this.shaders=null,"string"==typeof e&&(this.cartoStr=e,this.env={frames:[],errors:[],error:function(t){this.errors.push(t)}},this.parser=this.getParser(this.env),this.parse(e),this.shaders=this.toShaders())}return Lut(t,[{key:"getParser",value:function(e){var r,n,o,i,a,s,u,l,c,f=this;function h(){i=u[o],a=n,l=n}function p(){u[o]=i,l=n=a}function d(){n>l&&(u[o]=u[o].slice(n-l),l=n)}function y(t){var e,i,a,s;if(t instanceof Function)return t.call(c.parsers);if("string"==typeof t)e=r.charAt(n)===t?t:null,i=1,d();else{if(d(),!(e=t.exec(u[o])))return null;i=e[0].length}if(e){var f=n+=i;for(s=n+u[o].length-i;n<s&&(32===(a=r.charCodeAt(n))||10===a||9===a);)n++;return u[o]=u[o].slice(i+(n-f)),l=n,0===u[o].length&&o<u.length-1&&o++,"string"==typeof e?e:1===e.length?e[0]:e}}function v(t){var n,o={index:s,filename:e.filename,message:"Parse error.",line:0,column:-1};for(var i in o)0===t[i]&&(t[i]=o[i]);n=t.filename&&f.env.inputs&&f.env.inputs[t.filename]?f.env.inputs[t.filename]:r,t.line=(n.slice(0,t.index).match(/\n/g)||"").length+1;for(var a=t.index;a>=0&&"\n"!==n.charAt(a);a--)t.column++;return new Error([t.filename,t.line,t.column,t.message].join(";"))}return this.env=e=e||{},this.env.filename=this.env.filename||null,this.env.inputs=this.env.inputs||{},c={parse:function(i){var a,c=null;if(n=o=l=s=0,u=[],r=i.replace(/\r\n/g,"\n"),e.filename&&(f.env.inputs[e.filename]=r),u=function(t){for(var e,n,o,i,a=0,s=/(?:@\{[\w-]+\}|[^"'`\{\}\/\(\)\\])+/g,u=/\/\*(?:[^*]|\*+[^\/*])*\*+\/|\/\/.*/g,l=/"((?:[^"\\\r\n]|\\.)*)"|'((?:[^'\\\r\n]|\\.)*)'|`((?:[^`]|\\.)*)`/g,f=0,h=t[0],p=0;p<r.length;)if(s.lastIndex=p,(e=s.exec(r))&&e.index===p&&(p+=e[0].length,h.push(e[0])),o=r.charAt(p),u.lastIndex=l.lastIndex=p,(e=l.exec(r))&&e.index===p)p+=e[0].length,h.push(e[0]);else if(n||"/"!==o||"/"!==(i=r.charAt(p+1))&&"*"!==i||!(e=u.exec(r))||e.index!==p){switch(o){case"{":if(!n){f++,h.push(o);break}case"}":if(!n){f--,h.push(o),t[++a]=h=[];break}case"(":if(!n){n=!0,h.push(o);break}case")":if(n){n=!1,h.push(o);break}default:h.push(o)}p++}else p+=e[0].length,h.push(e[0]);return 0!==f&&(c={index:p-1,type:"Parse",message:f>0?"missing closing `}`":"missing opening `{`"}),t.map(function(t){return t.join("")})}([[]]),c)throw v(c);var h=function(t,e){var r=t.specificity,n=e.specificity;return r[0]!=n[0]?n[0]-r[0]:r[1]!=n[1]?n[1]-r[1]:r[2]!=n[2]?n[2]-r[2]:n[3]-r[3]};return(a=new t.Tree.Ruleset([],y(this.parsers.primary))).root=!0,a.toList=function(t){t.error=function(e){t.errors||(t.errors=new Error("")),t.errors.message?t.errors.message+="\n"+v(e).message:t.errors.message=v(e).message},t.frames=t.frames||[];var e=this.flatten([],[],t);return e.sort(h),e},a},parsers:{primary:function(){for(var t,e=[];(t=y(this.rule)||y(this.ruleset)||y(this.comment))||y(/^[\s\n]+/)||(t=y(this.invalid));)t&&e.push(t);return e},invalid:function(){var e=y(/^[^;\n]*[;\n]/);if(e)return new t.Tree.Invalid(e,a)},comment:function(){var e;if("/"===r.charAt(n))return"/"===r.charAt(n+1)?new t.Tree.Comment(y(/^\/\/.*/),!0):(e=y(/^\/\*(?:[^*]|\*+[^\/*])*\*+\/\n?/))?new t.Tree.Comment(e):void 0},entities:{quoted:function(){if('"'===r.charAt(n)||"'"===r.charAt(n)){var e=y(/^"((?:[^"\\\r\n]|\\.)*)"|'((?:[^'\\\r\n]|\\.)*)'/);return e?new t.Tree.Quoted(e[1]||e[2]):void 0}},field:function(){if(y("[")){var e=y(/(^[^\]]+)/);if(y("]"))return e?new t.Tree.Field(e[1]):void 0}},comparison:function(){var t=y(/^=~|=|!=|<=|>=|<|>/);if(t)return t},keyword:function(){var e=y(/^[A-Za-z\u4e00-\u9fa5-]+[A-Za-z-0-9\u4e00-\u9fa5_]*/);if(e)return new t.Tree.Keyword(e)},call:function(){var e,r;if(e=/^([\w\-]+|%)\(/.exec(u[o])){if("url"===(e=e[1]))return null;n+=e.length;if(y("("),r=y(this.entities.arguments),y(")"))return e?new t.Tree.Call(e,r,n):void 0}},arguments:function(){for(var t,e=[];t=y(this.expression);){e.push(t);if(!y(","))break}return e},literal:function(){return y(this.entities.dimension)||y(this.entities.keywordcolor)||y(this.entities.hexcolor)||y(this.entities.quoted)},url:function(){var e;if("u"===r.charAt(n)&&y(/^url\(/)){e=y(this.entities.quoted)||y(this.entities.variable)||y(/^[\-\w%@_match\/.&=:;#+?~]+/)||"";return y(")")?new t.Tree.URL(void 0!==e.value||e instanceof t.Tree.Variable?e:new t.Tree.Quoted(e)):new t.Tree.Invalid(e,a,"Missing closing ) in URL.")}},variable:function(){var o,i=n;if("@"===r.charAt(n)&&(o=y(/^@[\w-]+/)))return new t.Tree.Variable(o,i,e.filename)},hexcolor:function(){var e;if("#"===r.charAt(n)&&(e=y(/^#([a-fA-F0-9]{6}|[a-fA-F0-9]{3})/)))return new t.Tree.Color(e[1])},keywordcolor:function(){var e=u[o].match(/^[a-z]+/);if(e&&e[0]in t.Tree.Reference.data.colors)return new t.Tree.Color(t.Tree.Reference.data.colors[y(/^[a-z]+/)])},dimension:function(){var e=r.charCodeAt(n);if(!(e>57||e<45||47===e)){var o=y(/^(-?\d*\.?\d+(?:[eE][-+]?\d+)?)(\%|\w+)?/);return o?new t.Tree.Dimension(o[1],o[2],a):void 0}}},variable:function(){var t;if("@"===r.charAt(n)&&(t=y(/^(@[\w-]+)\s*:/)))return t[1]},entity:function(){var t=y(this.entities.call)||y(this.entities.literal),e=y(this.entities.field)||y(this.entities.variable),r=y(this.entities.url)||y(this.entities.keyword);return t||e||r},end:function(){var t;return y(";")||("string"==typeof(t="}")?r.charAt(n)===t:!!t.test(u[o]))},element:function(){var e=y(/^(?:[.#][\w\u4e00-\u9fa5\-]+|\*|Map)/);if(e)return new t.Tree.Element(e)},attachment:function(){var t=y(/^::([\w\-]+(?:\/[\w\-]+)*)/);if(t)return t[1]},selector:function(){for(var e,o,i,s,u,l=[],c=new t.Tree.Filterset,f=[],h=0,p=0;(i=y(this.element))||(u=y(this.zoom))||(s=y(this.filter))||(e=y(this.attachment));){if(h++,i)l.push(i);else if(u)f.push(u),p++;else if(s){var d=c.add(s);if(d)throw v({message:d,index:n-1});p++}else{if(o)throw v({message:"Encountered second attachment name.",index:n-1});o=e}var g=r.charAt(n);if("{"===g||"}"===g||";"===g||","===g)break}if(h)return new t.Tree.Selector(c,f,l,o,p,a)},filter:function(){h();var r,n,o;if(y("[")&&(r=y(/^[a-zA-Z0-9\-_]+/)||y(this.entities.quoted)||y(this.entities.variable)||y(this.entities.keyword)||y(this.entities.field))&&(r instanceof t.Tree.Quoted&&(r=new t.Tree.Field(r.toString())),(n=y(this.entities.comparison))&&(o=y(this.entities.quoted)||y(this.entities.variable)||y(this.entities.dimension)||y(this.entities.keyword)||y(this.entities.field)))){if(!y("]"))throw v({message:"Missing closing ] of filter.",index:a-1});return r.is||(r=new t.Tree.Field(r)),new t.Tree.Filter(r,n,o,a,e.filename)}},zoom:function(){h();var e,r;if(y(/^\[\s*zoom/g)&&(e=y(this.entities.comparison))&&(r=y(this.entities.variable)||y(this.entities.dimension))&&y("]"))return new t.Tree.Zoom(e,r,a);p()},block:function(){var t;if(y("{")&&(t=y(this.primary))&&y("}"))return t},ruleset:function(){var e,r,n=[];for(h();e=y(this.selector);){for(n.push(e);y(this.comment););if(!y(","))break;for(;y(this.comment););}if(e)for(;y(this.comment););if(n.length>0&&(r=y(this.block))){if(1===n.length&&n[0].elements.length&&"Map"===n[0].elements[0].value){var o=new t.Tree.Ruleset(n,r);return o.isMap=!0,o}return new t.Tree.Ruleset(n,r)}p()},rule:function(){var o,i,u=r.charAt(n);if(h(),"."!==u&&"#"!==u&&(o=y(this.variable)||y(this.property))){if((i=y(this.value))&&y(this.end))return new t.Tree.Rule(o,i,a,e.filename);s=n,p()}},font:function(){for(var e,r=[],n=[];e=y(this.entity);)n.push(e);if(r.push(new t.Tree.Expression(n)),y(","))for(;(e=y(this.expression))&&(r.push(e),y(",")););return new t.Tree.Value(r)},value:function(){for(var e,r=[];(e=y(this.expression))&&(r.push(e),y(",")););return r.length>1?new t.Tree.Value(r.map(function(t){return t.value[0]})):1===r.length?new t.Tree.Value(r):void 0},sub:function(){var t;if(y("(")&&(t=y(this.expression))&&y(")"))return t},multiplication:function(){var e,r,n,o;if(e=y(this.operand)){for(;(n=y("/")||y("*")||y("%"))&&(r=y(this.operand));)o=new t.Tree.Operation(n,[o||e,r],a);return o||e}},addition:function(){var e,o,i,s;if(e=y(this.multiplication)){for(;(i=y(/^[-+]\s+/)||" "!=r.charAt(n-1)&&(y("+")||y("-")))&&(o=y(this.multiplication));)s=new t.Tree.Operation(i,[s||e,o],a);return s||e}},operand:function(){return y(this.sub)||y(this.entity)},expression:function(){for(var e,r=[];e=y(this.addition)||y(this.entity);)r.push(e);if(r.length>0)return new t.Tree.Expression(r)},property:function(){var t=y(/^(([a-z][-a-z_0-9]*\/)?\*?-?[-a-z_0-9]+)\s*:/);if(t)return t[1]}}}}},{key:"parse",value:function(t){var e=this.parser;return this.ruleSet=e.parse(t)}},{key:"toShaders",value:function(){if(this.ruleSet){var t=this.ruleSet;if(t){var e=t.toList(this.env);e.reverse();var r={},n=[];this._toShaders(r,n,e);for(var o=[],i={},a=0,s=e.length;a<s;++a){var u=e[a],l=u.attachment,c=r[n[a]],f=[];if(!i[l]){var h=0;for(var p in c)if("zoom"!==p&&"frames"!==p&&"attachment"!==p&&"elements"!=p)if("layer-index"===p){var d=(c[p].join("\n"),null);Object.defineProperty(f,"layerIndex",{configurable:!0,enumerable:!1,value:d})}else f[h++]=function(t,e){if(!Array.isArray(t))return t;var r=t.join("\n"),n='attributes["FEATUREID"]&&attributes["FEATUREID"]',o=r.indexOf(n);if(o>=0){if(!e.featureFilter){var i=o+n.length,a=r.indexOf(")",i+1),s="featureId&&(featureId"+r.substring(i,a)+")";Object.defineProperty(e,"featureFilter",{configurable:!0,enumerable:!1,value:function(t){return!!s}})}return{property:p,getValue:Function("attributes","zoom","seftFilter","var _value = null; var isExcute=typeof seftFilter=='function'?sefgFilter():seftFilter;if(isExcute){"+r+";} return _value; ")}}return{property:p,getValue:Function("attributes","zoom","var _value = null;"+r+"; return _value; ")}}(c[p],f);Object.defineProperty(f,"attachment",{configurable:!0,enumerable:!1,value:l}),Object.defineProperty(f,"elements",{configurable:!0,enumerable:!1,value:u.elements}),o.push(f),i[n[a]]=!0}Object.defineProperty(f,"zoom",{configurable:!0,enumerable:!1,value:u.zoom})}return o}}return null}},{key:"_toShaders",value:function(e,r,n){for(var o=0,i=n.length;o<i;++o){for(var a=n[o],s=[],u=0,l=a.elements.length;u<l;u++)s.push(a.elements[u]);var c=a.filters.filters,f=[];for(var h in c)f.push(c[h].id);var p=s.join("/")+"::"+a.attachment+"_"+f.join("_");r.push(p);var d=e[p]=e[p]||{};d.zoom=t.Tree.Zoom.all;var y=a.toJS(this.env);for(var v in y)(d[v]=d[v]||[]).push(y[v].join("\n"))}}},{key:"getShaders",value:function(){return this.shaders}},{key:"destroy",value:function(){this.cartoStr=null,this.env=null,this.ruleSet=null,this.parser=null,this.shaders=null}}])}(),But={version:"2.1.1",style:{"filter-mode":{type:["all","first"],doc:"Control the processing behavior of Rule filters within a Style. If 'all' is used then all Rules are processed sequentially independent of whether any previous filters matched. If 'first' is used then it means processing ends after the first match (a positive filter evaluation) and no further Rules in the Style are processed ('first' is usually the default for CSS implementations on top of Mapnik to simplify translation from CSS to Mapnik XML)","default-value":"all","default-meaning":"All Rules in a Style are processed whether they have filters or not and whether or not the filter conditions evaluate to true."},"image-filters":{css:"image-filters","default-value":"none","default-meaning":"no filters",type:"functions",functions:[["agg-stack-blur",2],["emboss",0],["blur",0],["gray",0],["sobel",0],["edge-detect",0],["x-gradient",0],["y-gradient",0],["invert",0],["sharpen",0]],doc:"A list of image filters."},"comp-op":{css:"comp-op","default-value":"src-over","default-meaning":"add the current layer on top of other layers",doc:"Composite operation. This defines how this layer should behave relative to layers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]},opacity:{css:"opacity",type:"float",doc:"An alpha value for the style (which means an alpha applied to all features in separate buffer and then composited back to main buffer)","default-value":1,"default-meaning":"no separate buffer will be used and no alpha will be applied to the style after rendering"}},layer:{name:{"default-value":"",type:"string",required:!0,"default-meaning":"No layer name has been provided",doc:"The name of a layer. Can be anything you wish and is not strictly validated, but ideally unique  in the map"},srs:{"default-value":"",type:"string","default-meaning":"No srs value is provided and the value will be inherited from the Map's srs",doc:"The spatial reference system definition for the layer, aka the projection. Can either be a proj4 literal string like '+proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs' or, if the proper proj4 epsg/nad/etc identifier files are installed, a string that uses an id like: '+init=epsg:4326'"},status:{"default-value":!0,type:"boolean","default-meaning":"This layer will be marked as active and available for processing",doc:"A property that can be set to false to disable this layer from being processed"},minzoom:{"default-value":"0",type:"float","default-meaning":"The layer will be visible at the minimum possible scale",doc:"The minimum scale denominator that this layer will be visible at. A layer's visibility is determined by whether its status is true and if the Map scale >= minzoom - 1e-6 and scale < maxzoom + 1e-6"},maxzoom:{"default-value":"1.79769e+308",type:"float","default-meaning":"The layer will be visible at the maximum possible scale",doc:"The maximum scale denominator that this layer will be visible at. The default is the numeric limit of the C++ double type, which may vary slightly by system, but is likely a massive number like 1.79769e+308 and ensures that this layer will always be visible unless the value is reduced. A layer's visibility is determined by whether its status is true and if the Map scale >= minzoom - 1e-6 and scale < maxzoom + 1e-6"},queryable:{"default-value":!1,type:"boolean","default-meaning":"The layer will not be available for the direct querying of data values",doc:"This property was added for GetFeatureInfo/WMS compatibility and is rarely used. It is off by default meaning that in a WMS context the layer will not be able to be queried unless the property is explicitly set to true"},"clear-label-cache":{"default-value":!1,type:"boolean","default-meaning":"The renderer's collision detector cache (used for avoiding duplicate labels and overlapping markers) will not be cleared immediately before processing this layer",doc:"This property, by default off, can be enabled to allow a user to clear the collision detector cache before a given layer is processed. This may be desirable to ensure that a given layers data shows up on the map even if it normally would not because of collisions with previously rendered labels or markers"},"group-by":{"default-value":"",type:"string","default-meaning":"No special layer grouping will be used during rendering",doc:"https://github.com/mapnik/mapnik/wiki/Grouped-rendering"},"buffer-size":{"default-value":"0",type:"float","default-meaning":"No buffer will be used",doc:"Extra tolerance around the Layer extent (in pixels) used to when querying and (potentially) clipping the layer data during rendering"},"maximum-extent":{"default-value":"none",type:"bbox","default-meaning":"No clipping extent will be used",doc:"An extent to be used to limit the bounds used to query this specific layer data during rendering. Should be minx, miny, maxx, maxy in the coordinates of the Layer."}},symbolizers:{"*":{"image-filters":{css:"image-filters","default-value":"none","default-meaning":"no filters",type:"functions",functions:[["agg-stack-blur",2],["emboss",0],["blur",0],["gray",0],["sobel",0],["edge-detect",0],["x-gradient",0],["y-gradient",0],["invert",0],["sharpen",0]],doc:"A list of image filters."},"comp-op":{css:"comp-op","default-value":"src-over","default-meaning":"add the current layer on top of other layers",doc:"Composite operation. This defines how this layer should behave relative to layers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]},opacity:{css:"opacity",type:"float",doc:"An alpha value for the style (which means an alpha applied to all features in separate buffer and then composited back to main buffer)","default-value":1,"default-meaning":"no separate buffer will be used and no alpha will be applied to the style after rendering"}},map:{"background-color":{css:"background-color","default-value":"none","default-meaning":"transparent",type:"color",doc:"Map Background color"},"background-image":{css:"background-image",type:"uri","default-value":"","default-meaning":"transparent",doc:"An image that is repeated below all features on a map as a background.",description:"Map Background image"},srs:{css:"srs",type:"string","default-value":"+proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs","default-meaning":"The proj4 literal of EPSG:4326 is assumed to be the Map's spatial reference and all data from layers within this map will be plotted using this coordinate system. If any layers do not declare an srs value then they will be assumed to be in the same srs as the Map and not transformations will be needed to plot them in the Map's coordinate space",doc:"Map spatial reference (proj4 string)"},"buffer-size":{css:"buffer-size","default-value":"0",type:"float","default-meaning":"No buffer will be used",doc:'Extra tolerance around the map (in pixels) used to ensure labels crossing tile boundaries are equally rendered in each tile (e.g. cut in each tile). Not intended to be used in combination with "avoid-edges".'},"maximum-extent":{css:"","default-value":"none",type:"bbox","default-meaning":"No clipping extent will be used",doc:"An extent to be used to limit the bounds used to query all layers during rendering. Should be minx, miny, maxx, maxy in the coordinates of the Map."},base:{css:"base","default-value":"","default-meaning":"This base path defaults to an empty string meaning that any relative paths to files referenced in styles or layers will be interpreted relative to the application process.",type:"string",doc:"Any relative paths used to reference files will be understood as relative to this directory path if the map is loaded from an in memory object rather than from the filesystem. If the map is loaded from the filesystem and this option is not provided it will be set to the directory of the stylesheet."},"paths-from-xml":{css:"","default-value":!0,"default-meaning":"Paths read from XML will be interpreted from the location of the XML",type:"boolean",doc:"value to control whether paths in the XML will be interpreted from the location of the XML or from the working directory of the program that calls load_map()"},"minimum-version":{css:"","default-value":"none","default-meaning":"Mapnik version will not be detected and no error will be thrown about compatibility",type:"string",doc:"The minumum Mapnik version (e.g. 0.7.2) needed to use certain functionality in the stylesheet"},"font-directory":{css:"font-directory",type:"uri","default-value":"none","default-meaning":"No map-specific fonts will be registered",doc:"Path to a directory which holds fonts which should be registered when the Map is loaded (in addition to any fonts that may be automatically registered)."}},polygon:{fill:{css:"polygon-fill",type:"color","default-value":"rgba(128,128,128,1)","default-meaning":"gray and fully opaque (alpha = 1), same as rgb(128,128,128)",doc:"Fill color to assign to a polygon"},"fill-opacity":{css:"polygon-opacity",type:"float",doc:"The opacity of the polygon","default-value":1,"default-meaning":"opaque"},gamma:{css:"polygon-gamma",type:"float","default-value":1,"default-meaning":"fully antialiased",range:"0-1",doc:"Level of antialiasing of polygon edges"},"gamma-method":{css:"polygon-gamma-method",type:["power","linear","none","threshold","multiply"],"default-value":"power","default-meaning":"pow(x,gamma) is used to calculate pixel gamma, which produces slightly smoother line and polygon antialiasing than the 'linear' method, while other methods are usually only used to disable AA",doc:"An Antigrain Geometry specific rendering hint to control the quality of antialiasing. Under the hood in Mapnik this method is used in combination with the 'gamma' value (which defaults to 1). The methods are in the AGG source at https://github.com/mapnik/mapnik/blob/master/deps/agg/include/agg_gamma_functions.h"},clip:{css:"polygon-clip",type:"boolean","default-value":!0,"default-meaning":"geometry will be clipped to map bounds before rendering",doc:"geometries are clipped to map bounds by default for best rendering performance. In some cases users may wish to disable this to avoid rendering artifacts."},smooth:{css:"polygon-smooth",type:"float","default-value":0,"default-meaning":"no smoothing",range:"0-1",doc:"Smooths out geometry angles. 0 is no smoothing, 1 is fully smoothed. Values greater than 1 will produce wild, looping geometries."},"geometry-transform":{css:"polygon-geometry-transform",type:"functions","default-value":"none","default-meaning":"geometry will not be transformed",doc:"Allows transformation functions to be applied to the geometry.",functions:[["matrix",6],["translate",2],["scale",2],["rotate",3],["skewX",1],["skewY",1]]},"comp-op":{css:"polygon-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},line:{stroke:{css:"line-color","default-value":"rgba(0,0,0,1)",type:"color","default-meaning":"black and fully opaque (alpha = 1), same as rgb(0,0,0)",doc:"The color of a drawn line"},"stroke-width":{css:"line-width","default-value":1,type:"float",doc:"The width of a line in pixels"},"stroke-opacity":{css:"line-opacity","default-value":1,type:"float","default-meaning":"opaque",doc:"The opacity of a line"},"stroke-linejoin":{css:"line-join","default-value":"miter",type:["miter","round","bevel"],doc:"The behavior of lines when joining"},"stroke-linecap":{css:"line-cap","default-value":"butt",type:["butt","round","square"],doc:"The display of line endings"},"stroke-gamma":{css:"line-gamma",type:"float","default-value":1,"default-meaning":"fully antialiased",range:"0-1",doc:"Level of antialiasing of stroke line"},"stroke-gamma-method":{css:"line-gamma-method",type:["power","linear","none","threshold","multiply"],"default-value":"power","default-meaning":"pow(x,gamma) is used to calculate pixel gamma, which produces slightly smoother line and polygon antialiasing than the 'linear' method, while other methods are usually only used to disable AA",doc:"An Antigrain Geometry specific rendering hint to control the quality of antialiasing. Under the hood in Mapnik this method is used in combination with the 'gamma' value (which defaults to 1). The methods are in the AGG source at https://github.com/mapnik/mapnik/blob/master/deps/agg/include/agg_gamma_functions.h"},"stroke-dasharray":{css:"line-dasharray",type:"numbers",doc:"A pair of length values [a,b], where (a) is the dash length and (b) is the gap length respectively. More than two values are supported for more complex patterns.","default-value":"none","default-meaning":"solid line"},"stroke-dashoffset":{css:"line-dash-offset",type:"numbers",doc:"valid parameter but not currently used in renderers (only exists for experimental svg support in Mapnik which is not yet enabled)","default-value":"none","default-meaning":"solid line"},"stroke-miterlimit":{css:"line-miterlimit",type:"float",doc:"The limit on the ratio of the miter length to the stroke-width. Used to automatically convert miter joins to bevel joins for sharp angles to avoid the miter extending beyond the thickness of the stroking path. Normally will not need to be set, but a larger value can sometimes help avoid jaggy artifacts.","default-value":4,"default-meaning":"Will auto-convert miters to bevel line joins when theta is less than 29 degrees as per the SVG spec: 'miterLength / stroke-width = 1 / sin ( theta / 2 )'"},clip:{css:"line-clip",type:"boolean","default-value":!0,"default-meaning":"geometry will be clipped to map bounds before rendering",doc:"geometries are clipped to map bounds by default for best rendering performance. In some cases users may wish to disable this to avoid rendering artifacts."},smooth:{css:"line-smooth",type:"float","default-value":0,"default-meaning":"no smoothing",range:"0-1",doc:"Smooths out geometry angles. 0 is no smoothing, 1 is fully smoothed. Values greater than 1 will produce wild, looping geometries."},offset:{css:"line-offset",type:"float","default-value":0,"default-meaning":"no offset",doc:"Offsets a line a number of pixels parallel to its actual path. Postive values move the line left, negative values move it right (relative to the directionality of the line)."},rasterizer:{css:"line-rasterizer",type:["full","fast"],"default-value":"full",doc:"Exposes an alternate AGG rendering method that sacrifices some accuracy for speed."},"geometry-transform":{css:"line-geometry-transform",type:"functions","default-value":"none","default-meaning":"geometry will not be transformed",doc:"Allows transformation functions to be applied to the geometry.",functions:[["matrix",6],["translate",2],["scale",2],["rotate",3],["skewX",1],["skewY",1]]},"comp-op":{css:"line-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},markers:{file:{css:"marker-file",doc:"An SVG file that this marker shows at each placement. If no file is given, the marker will show an ellipse.","default-value":"","default-meaning":"An ellipse or circle, if width equals height",type:"uri"},opacity:{css:"marker-opacity",doc:"The overall opacity of the marker, if set, overrides both the opacity of both the fill and stroke","default-value":1,"default-meaning":"The stroke-opacity and fill-opacity will be used",type:"float"},"fill-opacity":{css:"marker-fill-opacity",doc:"The fill opacity of the marker","default-value":1,"default-meaning":"opaque",type:"float"},stroke:{css:"marker-line-color",doc:"The color of the stroke around a marker shape.","default-value":"black",type:"color"},"stroke-width":{css:"marker-line-width",doc:"The width of the stroke around a marker shape, in pixels. This is positioned on the boundary, so high values can cover the area itself.",type:"float"},"stroke-opacity":{css:"marker-line-opacity","default-value":1,"default-meaning":"opaque",doc:"The opacity of a line",type:"float"},placement:{css:"marker-placement",type:["point","line","interior"],"default-value":"point","default-meaning":"Place markers at the center point (centroid) of the geometry",doc:"Attempt to place markers on a point, in the center of a polygon, or if markers-placement:line, then multiple times along a line. 'interior' placement can be used to ensure that points placed on polygons are forced to be inside the polygon interior"},"multi-policy":{css:"marker-multi-policy",type:["each","whole","largest"],"default-value":"each","default-meaning":"If a feature contains multiple geometries and the placement type is either point or interior then a marker will be rendered for each",doc:"A special setting to allow the user to control rendering behavior for 'multi-geometries' (when a feature contains multiple geometries). This setting does not apply to markers placed along lines. The 'each' policy is default and means all geometries will get a marker. The 'whole' policy means that the aggregate centroid between all geometries will be used. The 'largest' policy means that only the largest (by bounding box areas) feature will get a rendered marker (this is how text labeling behaves by default)."},"marker-type":{css:"marker-type",type:["arrow","ellipse"],"default-value":"ellipse",doc:"The default marker-type. If a SVG file is not given as the marker-file parameter, the renderer provides either an arrow or an ellipse (a circle if height is equal to width)"},width:{css:"marker-width","default-value":10,doc:"The width of the marker, if using one of the default types.",type:"expression"},height:{css:"marker-height","default-value":10,doc:"The height of the marker, if using one of the default types.",type:"expression"},fill:{css:"marker-fill","default-value":"blue",doc:"The color of the area of the marker.",type:"color"},"allow-overlap":{css:"marker-allow-overlap",type:"boolean","default-value":!1,doc:"Control whether overlapping markers are shown or hidden.","default-meaning":"Do not allow makers to overlap with each other - overlapping markers will not be shown."},"ignore-placement":{css:"marker-ignore-placement",type:"boolean","default-value":!1,"default-meaning":"do not store the bbox of this geometry in the collision detector cache",doc:"value to control whether the placement of the feature will prevent the placement of other features"},spacing:{css:"marker-spacing",doc:"Space between repeated labels","default-value":100,type:"float"},"max-error":{css:"marker-max-error",type:"float","default-value":.2,doc:"The maximum difference between actual marker placement and the marker-spacing parameter. Setting a high value can allow the renderer to try to resolve placement conflicts with other symbolizers."},transform:{css:"marker-transform",type:"functions",functions:[["matrix",6],["translate",2],["scale",2],["rotate",3],["skewX",1],["skewY",1]],"default-value":"","default-meaning":"No transformation",doc:"SVG transformation definition"},clip:{css:"marker-clip",type:"boolean","default-value":!0,"default-meaning":"geometry will be clipped to map bounds before rendering",doc:"geometries are clipped to map bounds by default for best rendering performance. In some cases users may wish to disable this to avoid rendering artifacts."},smooth:{css:"marker-smooth",type:"float","default-value":0,"default-meaning":"no smoothing",range:"0-1",doc:"Smooths out geometry angles. 0 is no smoothing, 1 is fully smoothed. Values greater than 1 will produce wild, looping geometries."},"geometry-transform":{css:"marker-geometry-transform",type:"functions","default-value":"none","default-meaning":"geometry will not be transformed",doc:"Allows transformation functions to be applied to the geometry.",functions:[["matrix",6],["translate",2],["scale",2],["rotate",3],["skewX",1],["skewY",1]]},"comp-op":{css:"marker-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},shield:{name:{css:"shield-name",type:"expression",serialization:"content",doc:'Value to use for a shield"s text label. Data columns are specified using brackets like [column_name]'},file:{css:"shield-file",required:!0,type:"uri","default-value":"none",doc:"Image file to render behind the shield text"},"face-name":{css:"shield-face-name",type:"string",validate:"font",doc:"Font name and style to use for the shield text","default-value":"",required:!0},"unlock-image":{css:"shield-unlock-image",type:"boolean",doc:"This parameter should be set to true if you are trying to position text beside rather than on top of the shield image","default-value":!1,"default-meaning":"text alignment relative to the shield image uses the center of the image as the anchor for text positioning."},size:{css:"shield-size",type:"float",doc:"The size of the shield text in pixels"},fill:{css:"shield-fill",type:"color",doc:"The color of the shield text"},placement:{css:"shield-placement",type:["point","line","vertex","interior"],"default-value":"point",doc:"How this shield should be placed. Point placement attempts to place it on top of points, line places along lines multiple times per feature, vertex places on the vertexes of polygons, and interior attempts to place inside of polygons."},"avoid-edges":{css:"shield-avoid-edges",doc:"Tell positioning algorithm to avoid labeling near intersection edges.",type:"boolean","default-value":!1},"allow-overlap":{css:"shield-allow-overlap",type:"boolean","default-value":!1,doc:"Control whether overlapping shields are shown or hidden.","default-meaning":"Do not allow shields to overlap with other map elements already placed."},"minimum-distance":{css:"shield-min-distance",type:"float","default-value":0,doc:"Minimum distance to the next shield symbol, not necessarily the same shield."},spacing:{css:"shield-spacing",type:"float","default-value":0,doc:"The spacing between repeated occurrences of the same shield on a line"},"minimum-padding":{css:"shield-min-padding","default-value":0,doc:"Determines the minimum amount of padding that a shield gets relative to other shields",type:"float"},"wrap-width":{css:"shield-wrap-width",type:"unsigned","default-value":0,doc:"Length of a chunk of text in characters before wrapping text"},"wrap-before":{css:"shield-wrap-before",type:"boolean","default-value":!1,doc:"Wrap text before wrap-width is reached. If false, wrapped lines will be a bit longer than wrap-width."},"wrap-character":{css:"shield-wrap-character",type:"string","default-value":" ",doc:"Use this character instead of a space to wrap long names."},"halo-fill":{css:"shield-halo-fill",type:"color","default-value":"#FFFFFF","default-meaning":"white",doc:"Specifies the color of the halo around the text."},"halo-radius":{css:"shield-halo-radius",doc:"Specify the radius of the halo in pixels","default-value":0,"default-meaning":"no halo",type:"float"},"character-spacing":{css:"shield-character-spacing",type:"unsigned","default-value":0,doc:"Horizontal spacing between characters (in pixels). Currently works for point placement only, not line placement."},"line-spacing":{css:"shield-line-spacing",doc:"Vertical spacing between lines of multiline labels (in pixels)",type:"unsigned"},dx:{css:"shield-text-dx",type:"float",doc:"Displace text within shield by fixed amount, in pixels, +/- along the X axis.  A positive value will shift the text right","default-value":0},dy:{css:"shield-text-dy",type:"float",doc:"Displace text within shield by fixed amount, in pixels, +/- along the Y axis.  A positive value will shift the text down","default-value":0},"shield-dx":{css:"shield-dx",type:"float",doc:"Displace shield by fixed amount, in pixels, +/- along the X axis.  A positive value will shift the text right","default-value":0},"shield-dy":{css:"shield-dy",type:"float",doc:"Displace shield by fixed amount, in pixels, +/- along the Y axis.  A positive value will shift the text down","default-value":0},opacity:{css:"shield-opacity",type:"float",doc:"(Default 1.0) - opacity of the image used for the shield","default-value":1},"text-opacity":{css:"shield-text-opacity",type:"float",doc:"(Default 1.0) - opacity of the text placed on top of the shield","default-value":1},"horizontal-alignment":{css:"shield-horizontal-alignment",type:["left","middle","right","auto"],doc:"The shield's horizontal alignment from its centerpoint","default-value":"auto"},"vertical-alignment":{css:"shield-vertical-alignment",type:["top","middle","bottom","auto"],doc:"The shield's vertical alignment from its centerpoint","default-value":"middle"},"text-transform":{css:"shield-text-transform",type:["none","uppercase","lowercase","capitalize"],doc:"Transform the case of the characters","default-value":"none"},"justify-alignment":{css:"shield-justify-alignment",type:["left","center","right","auto"],doc:"Define how text in a shield's label is justified","default-value":"auto"},clip:{css:"shield-clip",type:"boolean","default-value":!0,"default-meaning":"geometry will be clipped to map bounds before rendering",doc:"geometries are clipped to map bounds by default for best rendering performance. In some cases users may wish to disable this to avoid rendering artifacts."},"comp-op":{css:"shield-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},"line-pattern":{file:{css:"line-pattern-file",type:"uri","default-value":"none",required:!0,doc:"An image file to be repeated and warped along a line"},clip:{css:"line-pattern-clip",type:"boolean","default-value":!0,"default-meaning":"geometry will be clipped to map bounds before rendering",doc:"geometries are clipped to map bounds by default for best rendering performance. In some cases users may wish to disable this to avoid rendering artifacts."},smooth:{css:"line-pattern-smooth",type:"float","default-value":0,"default-meaning":"no smoothing",range:"0-1",doc:"Smooths out geometry angles. 0 is no smoothing, 1 is fully smoothed. Values greater than 1 will produce wild, looping geometries."},"geometry-transform":{css:"line-pattern-geometry-transform",type:"functions","default-value":"none","default-meaning":"geometry will not be transformed",doc:"Allows transformation functions to be applied to the geometry.",functions:[["matrix",6],["translate",2],["scale",2],["rotate",3],["skewX",1],["skewY",1]]},"comp-op":{css:"line-pattern-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},"polygon-pattern":{file:{css:"polygon-pattern-file",type:"uri","default-value":"none",required:!0,doc:"Image to use as a repeated pattern fill within a polygon"},alignment:{css:"polygon-pattern-alignment",type:["local","global"],"default-value":"local",doc:"Specify whether to align pattern fills to the layer or to the map."},gamma:{css:"polygon-pattern-gamma",type:"float","default-value":1,"default-meaning":"fully antialiased",range:"0-1",doc:"Level of antialiasing of polygon pattern edges"},opacity:{css:"polygon-pattern-opacity",type:"float",doc:"(Default 1.0) - Apply an opacity level to the image used for the pattern","default-value":1,"default-meaning":"The image is rendered without modifications"},clip:{css:"polygon-pattern-clip",type:"boolean","default-value":!0,"default-meaning":"geometry will be clipped to map bounds before rendering",doc:"geometries are clipped to map bounds by default for best rendering performance. In some cases users may wish to disable this to avoid rendering artifacts."},smooth:{css:"polygon-pattern-smooth",type:"float","default-value":0,"default-meaning":"no smoothing",range:"0-1",doc:"Smooths out geometry angles. 0 is no smoothing, 1 is fully smoothed. Values greater than 1 will produce wild, looping geometries."},"geometry-transform":{css:"polygon-pattern-geometry-transform",type:"functions","default-value":"none","default-meaning":"geometry will not be transformed",doc:"Allows transformation functions to be applied to the geometry.",functions:[["matrix",6],["translate",2],["scale",2],["rotate",3],["skewX",1],["skewY",1]]},"comp-op":{css:"polygon-pattern-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},raster:{opacity:{css:"raster-opacity","default-value":1,"default-meaning":"opaque",type:"float",doc:"The opacity of the raster symbolizer on top of other symbolizers."},"filter-factor":{css:"raster-filter-factor","default-value":-1,"default-meaning":"Allow the datasource to choose appropriate downscaling.",type:"float",doc:"This is used by the Raster or Gdal datasources to pre-downscale images using overviews. Higher numbers can sometimes cause much better scaled image output, at the cost of speed."},scaling:{css:"raster-scaling",type:["near","fast","bilinear","bilinear8","bicubic","spline16","spline36","hanning","hamming","hermite","kaiser","quadric","catrom","gaussian","bessel","mitchell","sinc","lanczos","blackman"],"default-value":"near",doc:"The scaling algorithm used to making different resolution versions of this raster layer. Bilinear is a good compromise between speed and accuracy, while lanczos gives the highest quality."},"mesh-size":{css:"raster-mesh-size","default-value":16,"default-meaning":"Reprojection mesh will be 1/16 of the resolution of the source image",type:"unsigned",doc:"A reduced resolution mesh is used for raster reprojection, and the total image size is divided by the mesh-size to determine the quality of that mesh. Values for mesh-size larger than the default will result in faster reprojection but might lead to distortion."},"comp-op":{css:"raster-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},point:{file:{css:"point-file",type:"uri",required:!1,"default-value":"none",doc:"Image file to represent a point"},"allow-overlap":{css:"point-allow-overlap",type:"boolean","default-value":!1,doc:"Control whether overlapping points are shown or hidden.","default-meaning":"Do not allow points to overlap with each other - overlapping markers will not be shown."},"ignore-placement":{css:"point-ignore-placement",type:"boolean","default-value":!1,"default-meaning":"do not store the bbox of this geometry in the collision detector cache",doc:"value to control whether the placement of the feature will prevent the placement of other features"},opacity:{css:"point-opacity",type:"float","default-value":1,"default-meaning":"Fully opaque",doc:"A value from 0 to 1 to control the opacity of the point"},placement:{css:"point-placement",type:["centroid","interior"],doc:"How this point should be placed. Centroid calculates the geometric center of a polygon, which can be outside of it, while interior always places inside of a polygon.","default-value":"centroid"},transform:{css:"point-transform",type:"functions",functions:[["matrix",6],["translate",2],["scale",2],["rotate",3],["skewX",1],["skewY",1]],"default-value":"","default-meaning":"No transformation",doc:"SVG transformation definition"},"comp-op":{css:"point-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},text:{name:{css:"text-name",type:"expression",required:!0,"default-value":"",serialization:"content",doc:"Value to use for a text label. Data columns are specified using brackets like [column_name]"},"face-name":{css:"text-face-name",type:"string",validate:"font",doc:"Font name and style to render a label in",required:!0},size:{css:"text-size",type:"float","default-value":10,doc:"Text size in pixels"},"text-ratio":{css:"text-ratio",doc:"Define the amount of text (of the total) present on successive lines when wrapping occurs","default-value":0,type:"unsigned"},"wrap-width":{css:"text-wrap-width",doc:"Length of a chunk of text in characters before wrapping text","default-value":0,type:"unsigned"},"wrap-before":{css:"text-wrap-before",type:"boolean","default-value":!1,doc:"Wrap text before wrap-width is reached. If false, wrapped lines will be a bit longer than wrap-width."},"wrap-character":{css:"text-wrap-character",type:"string","default-value":" ",doc:"Use this character instead of a space to wrap long text."},spacing:{css:"text-spacing",type:"unsigned",doc:"Distance between repeated text labels on a line (aka. label-spacing)"},"character-spacing":{css:"text-character-spacing",type:"float","default-value":0,doc:"Horizontal spacing adjustment between characters in pixels"},"line-spacing":{css:"text-line-spacing","default-value":0,type:"unsigned",doc:"Vertical spacing adjustment between lines in pixels"},"label-position-tolerance":{css:"text-label-position-tolerance","default-value":0,type:"unsigned",doc:"Allows the label to be displaced from its ideal position by a number of pixels (only works with placement:line)"},"max-char-angle-delta":{css:"text-max-char-angle-delta",type:"float","default-value":"22.5",doc:"The maximum angle change, in degrees, allowed between adjacent characters in a label. This value internally is converted to radians to the default is 22.5*math.pi/180.0. The higher the value the fewer labels will be placed around around sharp corners."},fill:{css:"text-fill",doc:"Specifies the color for the text","default-value":"#000000",type:"color"},opacity:{css:"text-opacity",doc:"A number from 0 to 1 specifying the opacity for the text","default-value":1,"default-meaning":"Fully opaque",type:"float"},"halo-fill":{css:"text-halo-fill",type:"color","default-value":"#FFFFFF","default-meaning":"white",doc:"Specifies the color of the halo around the text."},"halo-radius":{css:"text-halo-radius",doc:"Specify the radius of the halo in pixels","default-value":0,"default-meaning":"no halo",type:"float"},dx:{css:"text-dx",type:"float",doc:"Displace text by fixed amount, in pixels, +/- along the X axis.  A positive value will shift the text right","default-value":0},dy:{css:"text-dy",type:"float",doc:"Displace text by fixed amount, in pixels, +/- along the Y axis.  A positive value will shift the text down","default-value":0},"vertical-alignment":{css:"text-vertical-alignment",type:["top","middle","bottom","auto"],doc:"Position of label relative to point position.","default-value":"auto","default-meaning":'Default affected by value of dy; "bottom" for dy>0, "top" for dy<0.'},"avoid-edges":{css:"text-avoid-edges",doc:"Tell positioning algorithm to avoid labeling near intersection edges.","default-value":!1,type:"boolean"},"minimum-distance":{css:"text-min-distance",doc:"Minimum permitted distance to the next text symbolizer.",type:"float"},"minimum-padding":{css:"text-min-padding",doc:"Determines the minimum amount of padding that a text symbolizer gets relative to other text",type:"float"},"minimum-path-length":{css:"text-min-path-length",type:"float","default-value":0,"default-meaning":"place labels on all paths",doc:"Place labels only on paths longer than this value."},"allow-overlap":{css:"text-allow-overlap",type:"boolean","default-value":!1,doc:"Control whether overlapping text is shown or hidden.","default-meaning":"Do not allow text to overlap with other text - overlapping markers will not be shown."},orientation:{css:"text-orientation",type:"expression",doc:"Rotate the text."},placement:{css:"text-placement",type:["point","line","vertex","interior"],"default-value":"point",doc:"Control the style of placement of a point versus the geometry it is attached to."},"placement-type":{css:"text-placement-type",doc:'Re-position and/or re-size text to avoid overlaps. "simple" for basic algorithm (using text-placements string,) "dummy" to turn this feature off.',type:["dummy","simple"],"default-value":"dummy"},placements:{css:"text-placements",type:"string","default-value":"",doc:'If "placement-type" is set to "simple", use this "POSITIONS,[SIZES]" string. An example is `text-placements: "E,NE,SE,W,NW,SW";` '},"text-transform":{css:"text-transform",type:["none","uppercase","lowercase","capitalize"],doc:"Transform the case of the characters","default-value":"none"},"horizontal-alignment":{css:"text-horizontal-alignment",type:["left","middle","right","auto"],doc:"The text's horizontal alignment from its centerpoint","default-value":"auto"},"justify-alignment":{css:"text-align",type:["left","right","center","auto"],doc:"Define how text is justified","default-value":"auto","default-meaning":"Auto alignment means that text will be centered by default except when using the `placement-type` parameter - in that case either right or left justification will be used automatically depending on where the text could be fit given the `text-placements` directives"},clip:{css:"text-clip",type:"boolean","default-value":!0,"default-meaning":"geometry will be clipped to map bounds before rendering",doc:"geometries are clipped to map bounds by default for best rendering performance. In some cases users may wish to disable this to avoid rendering artifacts."},"comp-op":{css:"text-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},building:{fill:{css:"building-fill","default-value":"#FFFFFF",doc:"The color of the buildings walls.",type:"color"},"fill-opacity":{css:"building-fill-opacity",type:"float",doc:"The opacity of the building as a whole, including all walls.","default-value":1},height:{css:"building-height",doc:"The height of the building in pixels.",type:"expression","default-value":"0"}}},colors:{aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50],transparent:[0,0,0,0]},filter:{value:["true","false","null","point","linestring","polygon","collection"]}};function Fut(t){"@babel/helpers - typeof";return(Fut="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Gut(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Uut(n.key),n)}}function Uut(t){var e=function(t,e){if("object"!=Fut(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Fut(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Fut(e)?e:e+""}Dut.mapnik_reference={version:{latest:But,"2.1.1":But}},Dut.Tree={},Dut.Tree.operate=function(t,e,r){switch(t){case"+":return e+r;case"-":return e-r;case"*":return e*r;case"%":return e%r;case"/":return e/r}},Dut.Tree.functions={rgb:function(t,e,r){return this.rgba(t,e,r,1)},rgba:function(t,e,r,n){var o=this,i=[t,e,r].map(function(t){return o.number(t)});return n=o.number(n),i.some(isNaN)||isNaN(n)?null:new Dut.Tree.Color(i,n)},stop:function(t){var e,r;return arguments.length>1&&(e=arguments[1]),arguments.length>2&&(r=arguments[2]),{is:"tag",val:t,color:e,mode:r,toString:function(n){return'\n\t<stop value="'+t.ev(n)+'"'+(e?' color="'+e.ev(n)+'" ':"")+(r?' mode="'+r.ev(n)+'" ':"")+"/>"}}},hsl:function(t,e,r){return this.hsla(t,e,r,1)},hsla:function(t,e,r,n){if([t=this.number(t)%360/360,e=this.number(e),r=this.number(r),n=this.number(n)].some(isNaN))return null;var o=r<=.5?r*(e+1):r+e-r*e,i=2*r-o;return this.rgba(255*a(t+1/3),255*a(t),255*a(t-1/3),n);function a(t){return 6*(t=t<0?t+1:t>1?t-1:t)<1?i+(o-i)*t*6:2*t<1?o:3*t<2?i+(o-i)*(2/3-t)*6:i}},hue:function(t){return"toHSL"in t?new Dut.Tree.Dimension(Math.round(t.toHSL().h)):null},saturation:function(t){return"toHSL"in t?new Dut.Tree.Dimension(Math.round(100*t.toHSL().s),"%"):null},lightness:function(t){return"toHSL"in t?new Dut.Tree.Dimension(Math.round(100*t.toHSL().l),"%"):null},alpha:function(t){return"toHSL"in t?new Dut.Tree.Dimension(t.toHSL().a):null},saturate:function(t,e){if(!("toHSL"in t))return null;var r=t.toHSL();return r.s+=e.value/100,r.s=this.clamp(r.s),this.hsla_simple(r)},desaturate:function(t,e){if(!("toHSL"in t))return null;var r=t.toHSL();return r.s-=e.value/100,r.s=this.clamp(r.s),this.hsla_simple(r)},lighten:function(t,e){if(!("toHSL"in t))return null;var r=t.toHSL();return r.l+=e.value/100,r.l=this.clamp(r.l),this.hsla_simple(r)},darken:function(t,e){if(!("toHSL"in t))return null;var r=t.toHSL();return r.l-=e.value/100,r.l=this.clamp(r.l),this.hsla_simple(r)},fadein:function(t,e){if(!("toHSL"in t))return null;var r=t.toHSL();return r.a+=e.value/100,r.a=this.clamp(r.a),this.hsla_simple(r)},fadeout:function(t,e){if(!("toHSL"in t))return null;var r=t.toHSL();return r.a-=e.value/100,r.a=this.clamp(r.a),this.hsla_simple(r)},spin:function(t,e){if(!("toHSL"in t))return null;var r=t.toHSL(),n=(r.h+e.value)%360;return r.h=n<0?360+n:n,this.hsla_simple(r)},replace:function(t,e,r){return"field"===t.is?t.toString+".replace("+e.toString()+", "+r.toString()+")":t.replace(e,r)},mix:function(t,e,r){var n=r.value/100,o=2*n-1,i=t.toHSL().a-e.toHSL().a,a=((o*i==-1?o:(o+i)/(1+o*i))+1)/2,s=1-a,u=[t.rgb[0]*a+e.rgb[0]*s,t.rgb[1]*a+e.rgb[1]*s,t.rgb[2]*a+e.rgb[2]*s],l=t.alpha*n+e.alpha*(1-n);return new Dut.Tree.Color(u,l)},greyscale:function(t){return this.desaturate(t,new Dut.Tree.Dimension(100))},"%":function(t){for(var e=Array.prototype.slice.call(arguments,1),r=t.value,n=0;n<e.length;n++)r=r.replace(/%s/,e[n].value).replace(/%[da]/,e[n].toString());return r=r.replace(/%%/g,"%"),new Dut.Tree.Quoted(r)},hsla_simple:function(t){return this.hsla(t.h,t.s,t.l,t.a)},number:function(t){return t instanceof Dut.Tree.Dimension?parseFloat("%"===t.unit?t.value/100:t.value):"number"==typeof t?t:NaN},clamp:function(t){return Math.min(1,Math.max(0,t))}},Dut.Tree.Call=function(){return Lut(function t(e,r,n){Iut(this,t),this.is="call",this.name=e,this.args=r,this.index=n},[{key:"ev",value:function(t){for(var e=this.args.map(function(e){return e.ev(t)}),r=0;r<e.length;r++)if("undefined"===e[r].is)return{is:"undefined",value:"undefined"};if(this.name in Dut.Tree.functions){if(Dut.Tree.functions[this.name].length<=e.length){var n=Dut.Tree.functions[this.name].apply(Dut.Tree.functions,e);return null===n?(t.error({message:"incorrect arguments given to "+this.name+"()",index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"}):n}return t.error({message:"incorrect number of arguments for "+this.name+"(). "+Dut.Tree.functions[this.name].length+" expected.",index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"}}var o=Dut.Tree.Reference.mapnikFunctions[this.name];if(void 0===o){var i=Mut()(Dut.Tree.Reference.mapnikFunctions),a=this.name,s=i.map(function(t){return[t[0],Dut.Tree.Reference.editDistance(a,t[0]),t[1]]}).sort(function(t,e){return t[1]-e[1]});return t.error({message:"unknown function "+this.name+"(), did you mean "+s[0][0]+"("+s[0][2]+")",index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"}}return o!==e.length&&-1!==o?(t.error({message:"function "+this.name+"() takes "+o+" arguments and was given "+e.length,index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"}):(this.args=e,this)}},{key:"toString",value:function(t,e){return this.args.length?this.name+"("+this.args.join(",")+")":this.name}}])}(),Dut.Tree.Color=function(){return Lut(function t(e,r){Iut(this,t),this.is="color",Array.isArray(e)?this.rgb=e.slice(0,3):6==e.length?this.rgb=e.match(/.{2}/g).map(function(t){return parseInt(t,16)}):this.rgb=e.split("").map(function(t){return parseInt(t+t,16)}),"number"==typeof r?this.alpha=r:4===e.length?this.alpha=e[3]:this.alpha=1},[{key:"ev",value:function(){return this}},{key:"toString",value:function(){return"rgba("+this.rgb.map(function(t){return Math.round(t)}).concat(this.alpha).join(", ")+")"}},{key:"operate",value:function(t,e,r){var n=[];r instanceof Dut.Tree.Color||(r=r.toColor());for(var o=0;o<3;o++)n[o]=Dut.Tree.operate(e,this.rgb[o],r.rgb[o]);return new Dut.Tree.Color(n)}},{key:"toHSL",value:function(){var t,e,r=this.rgb[0]/255,n=this.rgb[1]/255,o=this.rgb[2]/255,i=this.alpha,a=Math.max(r,n,o),s=Math.min(r,n,o),u=(a+s)/2,l=a-s;if(a===s)t=e=0;else{switch(e=u>.5?l/(2-a-s):l/(a+s),a){case r:t=(n-o)/l+(n<o?6:0);break;case n:t=(o-r)/l+2;break;case o:t=(r-n)/l+4}t/=6}return{h:360*t,s:e,l:u,a:i}}}])}(),Dut.Tree.Comment=function(){return Lut(function t(e,r){Iut(this,t),this.value=e,this.silent=!!r},[{key:"toString",value:function(t){return"\x3c!--"+this.value+"--\x3e"}},{key:"ev",value:function(){return this}}])}(),Dut.Tree.Definition=function(){return Lut(function t(e,r){Iut(this,t),this.elements=e.elements,this.rules=r,this.ruleIndex={};for(var n=0;n<this.rules.length;n++)"zoom"in this.rules[n]&&(this.rules[n]=this.rules[n].clone()),this.rules[n].zoom=e.zoom,this.ruleIndex[this.rules[n].updateID()]=!0;this.filters=e.filters,this.zoom=e.zoom,this.attachment=e.attachment||"__default__",this.specificity=e.specificity()},[{key:"toString",value:function(){for(var t=this.filters.toString(),e=0;e<this.rules.length;e++)t+="\n    "+this.rules[e];return t}},{key:"toJS",value:function(t){var e={},r=this.zoom,n=this.filters.toJS(t),o=[r];function i(r){if(r instanceof Dut.Tree.Rule)e[r.name]=e[r.name]||[],n?e[r.name].push("if("+n+"){"+r.value.toJS(t)+"}"):e[r.name].push(r.value.toJS(t));else if(r instanceof Dut.Tree.Ruleset){var o=r.toJS(t);for(var i in o)for(var a in e[i]=e[i]||[],o[i])e[i].push(o[i][a])}}for(var a in n&&o.push(n),n=o.join(" && "),this.rules)i(this.rules[a]);return e}}])}(),Dut.Tree.Dimension=function(){return Lut(function t(e,r,n){Iut(this,t),this.is="float",this.physical_units=["m","cm","in","mm","pt","pc"],this.screen_units=["px","%"],this.all_units=["m","cm","in","mm","pt","pc","px","%"],this.densities={m:.0254,mm:25.4,cm:2.54,pt:72,pc:6},this.value=parseFloat(e),this.unit=r||null,this.index=n},[{key:"ev",value:function(t){if(this.unit&&this.all_units.indexOf(this.unit)<0)return t.error({message:"Invalid unit: '"+this.unit+"'",index:this.index}),{is:"undefined",value:"undefined"};if(this.unit&&this.physical_units.indexOf(this.unit)>=0){if(!t.ppi)return t.error({message:"ppi is not set, so metric units can't be used",index:this.index}),{is:"undefined",value:"undefined"};this.value=this.value/this.densities[this.unit]*t.ppi,this.unit="px"}return this}},{key:"toColor",value:function(){return new Dut.Tree.Color([this.value,this.value,this.value])}},{key:"round",value:function(){return this.value=Math.round(this.value),this}},{key:"toString",value:function(){return this.value.toString()}},{key:"operate",value:function(t,e,r){return"%"===this.unit&&"%"!==r.unit?(t.error({message:"If two operands differ, the first must not be %",index:this.index}),{is:"undefined",value:"undefined"}):"%"!==this.unit&&"%"===r.unit?"*"===e||"/"===e||"%"===e?(t.error({message:"Percent values can only be added or subtracted from other values",index:this.index}),{is:"undefined",value:"undefined"}):new Dut.Tree.Dimension(Dut.Tree.operate(e,this.value,this.value*r.value*.01),this.unit):new Dut.Tree.Dimension(Dut.Tree.operate(e,this.value,r.value),this.unit||r.unit)}}])}(),Dut.Tree.Element=function(){return Lut(function t(e){Iut(this,t),this.value=e.trim(),"#"===this.value[0]&&(this.type="id",this.clean=this.value.replace(/^#/,"")),"."===this.value[0]&&(this.type="class",this.clean=this.value.replace(/^\./,"")),-1!==this.value.indexOf("*")&&(this.type="wildcard")},[{key:"specificity",value:function(){return["id"===this.type?1:0,"class"===this.type?1:0]}},{key:"toString",value:function(){return this.value}}])}(),Dut.Tree.Expression=function(){return Lut(function t(e){Iut(this,t),this.is="expression",this.value=e},[{key:"ev",value:function(t){return this.value.length>1?new Dut.Tree.Expression(this.value.map(function(e){return e.ev(t)})):this.value[0].ev(t)}},{key:"toString",value:function(t){return this.value.map(function(e){return e.toString(t)}).join(" ")}}])}(),Dut.Tree.Field=function(){return Lut(function t(e){Iut(this,t),this.is="field",this.value=e||""},[{key:"toString",value:function(){return'["'+this.value.toUpperCase()+'"]'}},{key:"ev",value:function(){return this}}])}(),Dut.Tree.Filter=function(){return Lut(function t(e,r,n,o,i){Iut(this,t),this.ops={"<":[" &lt; ","numeric"],">":[" &gt; ","numeric"],"=":[" = ","both"],"!=":[" != ","both"],"<=":[" &lt;= ","numeric"],">=":[" &gt;= ","numeric"],"=~":[".match(","string",")"]},this.key=e,this.op=r,this.val=n,this.index=o,this.filename=i,this.id=this.key+this.op+this.val},[{key:"ev",value:function(t){return this.key=this.key.ev(t),this.val=this.val.ev(t),this}},{key:"toString",value:function(){return"["+this.id+"]"}}])}(),Dut.Tree.Filterset=function(){return Lut(function t(){Iut(this,t),this.filters={}},[{key:"toJS",value:function(t){function e(t){var e=t.op;"="===e&&(e="==");var r=t.val;void 0!==t._val&&(r=t._val.toString(!0)),t.key&&"scale"===t.key.value?r=+r:"string"!=typeof r&&"object"!==jut(r)||(r="'"+r+"'");var n="attributes";return n+"&&"+n+t.key+"&&"+n+t.key+" "+e+r}var r=[];for(var n in this.filters)r.push(e(this.filters[n]));return r.join(" && ")}},{key:"toString",value:function(){var t=[];for(var e in this.filters)t.push(this.filters[e].id);return t.sort().join("\t")}},{key:"ev",value:function(t){for(var e in this.filters)this.filters[e].ev(t);return this}},{key:"clone",value:function(){var t=new Dut.Tree.Filterset;for(var e in this.filters)t.filters[e]=this.filters[e];return t}},{key:"cloneWith",value:function(t){var e=[];for(var r in t.filters){var n=this.addable(t.filters[r]);if(!1===n)return!1;!0===n&&e.push(t.filters[r])}if(!e.length)return null;var o=new Dut.Tree.Filterset;for(r in this.filters)o.filters[r]=this.filters[r];for(;r=e.shift();)o.add(r);return o}},{key:"addable",value:function(t){var e=t.key.toString(),r=t.val.toString();switch(r.match(/^[0-9]+(\.[0-9]*)?_match/)&&(r=parseFloat(r)),t.op){case"=":return void 0!==this.filters[e+"="]?this.filters[e+"="].val.toString()==r&&null:void 0===this.filters[e+"!="+r]&&(!(void 0!==this.filters[e+">"]&&this.filters[e+">"].val>=r)&&(!(void 0!==this.filters[e+"<"]&&this.filters[e+"<"].val<=r)&&(!(void 0!==this.filters[e+">="]&&this.filters[e+">="].val>r)&&!(void 0!==this.filters[e+"<="]&&this.filters[e+"<="].val<r))));case"=~":return!0;case"!=":return void 0!==this.filters[e+"="]?this.filters[e+"="].val!==r&&null:void 0!==this.filters[e+"!="+r]?null:void 0!==this.filters[e+">"]&&this.filters[e+">"].val>=r?null:void 0!==this.filters[e+"<"]&&this.filters[e+"<"].val<=r?null:void 0!==this.filters[e+">="]&&this.filters[e+">="].val>r?null:!(void 0!==this.filters[e+"<="]&&this.filters[e+"<="].val<r)||null;case">":return e+"="in this.filters?!(this.filters[e+"="].val<=r)&&null:!(void 0!==this.filters[e+"<"]&&this.filters[e+"<"].val<=r)&&(!(void 0!==this.filters[e+"<="]&&this.filters[e+"<="].val<=r)&&(void 0!==this.filters[e+">"]&&this.filters[e+">"].val>=r?null:!(void 0!==this.filters[e+">="]&&this.filters[e+">="].val>r)||null));case">=":return void 0!==this.filters[e+"="]?!(this.filters[e+"="].val<r)&&null:!(void 0!==this.filters[e+"<"]&&this.filters[e+"<"].val<=r)&&(!(void 0!==this.filters[e+"<="]&&this.filters[e+"<="].val<r)&&(void 0!==this.filters[e+">"]&&this.filters[e+">"].val>=r?null:!(void 0!==this.filters[e+">="]&&this.filters[e+">="].val>=r)||null));case"<":return void 0!==this.filters[e+"="]?!(this.filters[e+"="].val>=r)&&null:!(void 0!==this.filters[e+">"]&&this.filters[e+">"].val>=r)&&(!(void 0!==this.filters[e+">="]&&this.filters[e+">="].val>=r)&&(void 0!==this.filters[e+"<"]&&this.filters[e+"<"].val<=r?null:!(void 0!==this.filters[e+"<="]&&this.filters[e+"<="].val<r)||null));case"<=":return void 0!==this.filters[e+"="]?!(this.filters[e+"="].val>r)&&null:!(void 0!==this.filters[e+">"]&&this.filters[e+">"].val>=r)&&(!(void 0!==this.filters[e+">="]&&this.filters[e+">="].val>r)&&(void 0!==this.filters[e+"<"]&&this.filters[e+"<"].val<=r?null:!(void 0!==this.filters[e+"<="]&&this.filters[e+"<="].val<=r)||null))}}},{key:"conflict",value:function(t){var e=t.key.toString(),r=t.val.toString();return isNaN(parseFloat(r))||(r=parseFloat(r)),("="===t.op&&void 0!==this.filters[e+"="]&&r!=this.filters[e+"="].val.toString()||"!="===t.op&&void 0!==this.filters[e+"="]&&r==this.filters[e+"="].val.toString()||"="===t.op&&void 0!==this.filters[e+"!="]&&r===this.filters[e+"!="].val.toString())&&t.toString()+" added to "+this.toString()+" produces an invalid filter"}},{key:"add",value:function(t,e){var r,n=t.key.toString(),o=t.op,i=this.conflict(t);if(i)return i;if("="===o){for(var a in this.filters)this.filters[a].key===n&&delete this.filters[a];this.filters[n+"="]=t}else if("!="===o)this.filters[n+"!="+t.val]=t;else if("=~"===o)this.filters[n+"=~"+t.val]=t;else if(">"===o){for(var s in this.filters)this.filters[s].key===n&&this.filters[s].val<=t.val&&delete this.filters[s];this.filters[n+">"]=t}else if(">="===o){for(var u in this.filters)r=+this.filters[u].val.toString(),this.filters[u].key===n&&r<t.val&&delete this.filters[u];void 0!==this.filters[n+"!="+t.val]?(delete this.filters[n+"!="+t.val],t.op=">",this.filters[n+">"]=t):this.filters[n+">="]=t}else if("<"===o){for(var l in this.filters)r=+this.filters[l].val.toString(),this.filters[l].key===n&&r>=t.val&&delete this.filters[l];this.filters[n+"<"]=t}else if("<="===o){for(var c in this.filters)r=+this.filters[c].val.toString(),this.filters[c].key===n&&r>t.val&&delete this.filters[c];void 0!==this.filters[n+"!="+t.val]?(delete this.filters[n+"!="+t.val],t.op="<",this.filters[n+"<"]=t):this.filters[n+"<="]=t}}}])}(),Dut.Tree.Fontset=Lut(function t(e,r){Iut(this,t),this.fonts=r,this.name="fontset-"+e.effects.length}),Dut.Tree.Invalid=function(){return Lut(function t(e,r,n){Iut(this,t),this.is="invalid",this.chunk=e,this.index=r,this.type="syntax",this.message=n||"Invalid code: "+this.chunk},[{key:"ev",value:function(t){return t.error({chunk:this.chunk,index:this.index,type:"syntax",message:this.message||"Invalid code: "+this.chunk}),{is:"undefined"}}}])}(),Dut.Tree.Keyword=function(){return Lut(function t(e){Iut(this,t),this.value=e;var r={transparent:"color",true:"boolean",false:"boolean"};this.is=r[e]?r[e]:"keyword"},[{key:"ev",value:function(){return this}},{key:"toString",value:function(){return this.value}}])}(),Dut.Tree.Literal=function(){return Lut(function t(e){Iut(this,t),this.value=e||"",this.is="field"},[{key:"toString",value:function(){return this.value}},{key:"ev",value:function(){return this}}])}(),Dut.Tree.Operation=function(){return Lut(function t(e,r,n){Iut(this,t),this.is="operation",this.op=e.trim(),this.operands=r,this.index=n},[{key:"ev",value:function(t){var e,r=this.operands[0].ev(t),n=this.operands[1].ev(t);return"undefined"===r.is||"undefined"===n.is?{is:"undefined",value:"undefined"}:(r instanceof Dut.Tree.Dimension&&n instanceof Dut.Tree.Color&&("*"===this.op||"+"===this.op?(e=n,n=r,r=e):t.error({name:"OperationError",message:"Can't substract or divide a color from a number",index:this.index})),r instanceof Dut.Tree.Quoted&&n instanceof Dut.Tree.Quoted&&"+"!==this.op?(t.error({message:"Can't subtract, divide, or multiply strings.",index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"}):r instanceof Dut.Tree.Field||n instanceof Dut.Tree.Field||r instanceof Dut.Tree.Literal||n instanceof Dut.Tree.Literal?"color"===r.is||"color"===n.is?(t.error({message:"Can't subtract, divide, or multiply colors in expressions.",index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"}):new Dut.Tree.Literal(r.ev(t).toString(!0)+this.op+n.ev(t).toString(!0)):void 0===r.operate?(t.error({message:"Cannot do math with type "+r.is+".",index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"}):r.operate(t,this.op,n))}}])}(),Dut.Tree.Quoted=function(){return Lut(function t(e){Iut(this,t),this.is="string",this.value=e||""},[{key:"toString",value:function(t){var e=this.value.replace(/&/g,"&amp;"),r=e.replace(/\'/g,"\\'").replace(/\"/g,"&quot;").replace(/</g,"&lt;").replace(/\>/g,"&gt;");return!0===t?"'"+r+"'":e}},{key:"ev",value:function(){return this}},{key:"operate",value:function(t,e,r){return new Dut.Tree.Quoted(Dut.Tree.operate(e,this.toString(),r.toString(this.contains_field)))}}])}(),Dut.Tree.Reference={_validateValue:{font:function(t,e){return!t.validation_data||!t.validation_data.fonts||-1!=t.validation_data.fonts.indexOf(e)}},setData:function(t){this.data=t,this.selector_cache=function(t){var e={};for(var r in t.symbolizers)for(var n in t.symbolizers[r])t.symbolizers[r][n].hasOwnProperty("css")&&(e[t.symbolizers[r][n].css]=[t.symbolizers[r][n],r,n]);return e}(t),this.mapnikFunctions=function(t){var e={};for(var r in t.symbolizers)for(var n in t.symbolizers[r])if("functions"===t.symbolizers[r][n].type)for(var o=0;o<t.symbolizers[r][n].functions.length;o++){var i=t.symbolizers[r][n].functions[o];e[i[0]]=i[1]}return e}(t),this.required_cache=function(t){var e={};for(var r in t.symbolizers)for(var n in e[r]=[],t.symbolizers[r])t.symbolizers[r][n].required&&e[r].push(t.symbolizers[r][n].css);return e}(t)},setVersion:function(t){return!!Dut.mapnik_reference.version.hasOwnProperty(t)&&(this.setData(Dut.mapnik_reference.version[t]),!0)},selectorData:function(t,e){if(this.selector_cache&&this.selector_cache[t])return this.selector_cache[t][e]},validSelector:function(t){return!!this.selector_cache[t]},selectorName:function(t){return this.selectorData(t,2)},selector:function(t){return this.selectorData(t,0)},symbolizer:function(t){return this.selectorData(t,1)},requiredProperties:function(t,e){var r=this.required_cache[t];for(var n in r)if(!(r[n]in e))return"Property "+r[n]+" required for defining "+t+" styles."},isFont:function(t){return"font"===this.selector(t).validate},editDistance:function(t,e){if(0===t.length)return e.length;if(0===e.length)return t.length;for(var r=[],n=0;n<=e.length;n++)r[n]=[n];for(var o=0;o<=t.length;o++)r[0][o]=o;for(n=1;n<=e.length;n++)for(o=1;o<=t.length;o++)e.charAt(n-1)===t.charAt(o-1)?r[n][o]=r[n-1][o-1]:r[n][o]=Math.min(r[n-1][o-1]+1,Math.min(r[n][o-1]+1,r[n-1][o]+1));return r[e.length][t.length]},validValue:function(t,e,r){var n;if(this.selector(e)){if("keyword"===r.value[0].is)return function(t,e){return"object"===jut(this.selector(e).type)?-1!==this.selector(e).type.indexOf(t.value[0].value):"string"===this.selector(e).type}(r,e);if("undefined"===r.value[0].is)return!0;if("numbers"===this.selector(e).type){for(n in r.value)if("float"!==r.value[n].is)return!1;return!0}if("tags"===this.selector(e).type){if(!r.value)return!1;if(!r.value[0].value)return"tag"===r.value[0].is;for(n=0;n<r.value[0].value.length;n++)if("tag"!==r.value[0].value[n].is)return!1;return!0}if("functions"==this.selector(e).type)return function(t,e){if("string"===t.value[0].is)return!0;for(var r in t.value)for(var n in t.value[r].value){if("call"!==t.value[r].value[n].is)return!1;var o=find(this.selector(e).functions,function(e){return e[0]===t.value[r].value[n].name});if(!(o&&-1===o[1]||o&&o[1]===t.value[r].value[n].args.length))return!1}return!0}(r,e);if("expression"===this.selector(e).type)return!0;if("unsigned"===this.selector(e).type)return"float"===r.value[0].is&&(r.value[0].round(),!0);if(this.selector(e).validate){for(n=0;n<r.value.length;n++)if(this.selector(e).type===r.value[n].is&&this._validateValue[this.selector(e).validate](t,r.value[n].value))return!0;return!1}return this.selector(e).type===r.value[0].is}return!1}},Dut.Tree.Reference.setVersion("latest"),Dut.Tree.Rule=function(){return Lut(function t(e,r,n,o){Iut(this,t),this.is="rule";var i=e.split("/");this.name=i.pop(),this.instance=i.length?i[0]:"__default__",this.value=r instanceof Dut.Tree.Value?r:new Dut.Tree.Value([r]),this.index=n,this.symbolizer=Dut.Tree.Reference.symbolizer(this.name),this.filename=o,this.variable="@"===e.charAt(0)},[{key:"clone",value:function(){var t=Object.create(Dut.Tree.Rule.prototype);return t.name=this.name,t.value=this.value,t.index=this.index,t.instance=this.instance,t.symbolizer=this.symbolizer,t.filename=this.filename,t.variable=this.variable,t}},{key:"updateID",value:function(){return this.id=this.zoom+"#"+this.instance+"#"+this.name}},{key:"toString",value:function(){return"["+Dut.Tree.Zoom.toString(this.zoom)+"] "+this.name+": "+this.value}},{key:"ev",value:function(t){return new Dut.Tree.Rule(this.name,this.value.ev(t),this.index,this.filename)}}])}(),Dut.Tree.Ruleset=function(){return Lut(function t(e,r){Iut(this,t),this.is="ruleset",this.selectors=e,this.rules=r,this._lookups={}},[{key:"ev",value:function(t){var e,r,n=new Dut.Tree.Ruleset(this.selectors,this.rules.slice(0));for(n.root=this.root,t.frames.unshift(n),e=0;e<n.rules.length;e++)r=n.rules[e],n.rules[e]=r.ev?r.ev(t):r;return t.frames.shift(),n}},{key:"match",value:function(t){return!t||0===t.length}},{key:"variables",value:function(){return this._variables?this._variables:this._variables=this.rules.reduce(function(t,e){return e instanceof Dut.Tree.Rule&&!0===e.variable&&(t[e.name]=e),t},{})}},{key:"variable",value:function(t){return this.variables()[t]}},{key:"rulesets",value:function(){return this._rulesets?this._rulesets:this._rulesets=this.rules.filter(function(t){return t instanceof Dut.Tree.Ruleset})}},{key:"find",value:function(t,e){e=e||this;var r=[],n=t.toString();return n in this._lookups?this._lookups[n]:(this.rulesets().forEach(function(n){if(n!==e)for(var o=0;o<n.selectors.length;o++)if(t.match(n.selectors[o])){t.elements.length>1?Array.prototype.push.apply(r,n.find(new Dut.Tree.Selector(null,null,t.elements.slice(1)),e)):r.push(n);break}}),this._lookups[n]=r)}},{key:"evZooms",value:function(t){for(var e=0;e<this.selectors.length;e++){for(var r=Dut.Tree.Zoom.all,n=0;n<this.selectors[e].zoom.length;n++)r=this.selectors[e].zoom[n].ev(t).zoom;this.selectors[e].zoom=r}}},{key:"flatten",value:function(t,e,r){var n,o,i=[];for(0===this.selectors.length&&(r.frames=r.frames.concat(this.rules)),this.evZooms(r),n=0;n<this.selectors.length;n++){var a=this.selectors[n];if(a.filters)if(e.length)for(o=0;o<e.length;o++){var s=e[o],u=s.filters.cloneWith(a.filters);if(null===u){if(s.zoom===a.zoom&&s.attachment===a.attachment&&s.elements.join()===a.elements.join()){i.push(s);continue}u=s.filters}else if(!u)continue;var l=Object.create(Dut.Tree.Selector.prototype);l.filters=u,l.zoom=a.zoom,l.elements=s.elements.concat(a.elements),s.attachment&&a.attachment?l.attachment=s.attachment+"/"+a.attachment:l.attachment=a.attachment||s.attachment,l.conditions=s.conditions+a.conditions,l.index=a.index,i.push(l)}else i.push(a)}var c=[];for(n=0;n<this.rules.length;n++){var f=this.rules[n];f instanceof Dut.Tree.Ruleset?f.flatten(t,i,r):f instanceof Dut.Tree.Rule?c.push(f):f instanceof Dut.Tree.Invalid&&r.error(f)}var h=!!c.length&&c[0].index;for(n=0;n<i.length;n++)!1!==h&&(i[n].index=h),t.push(new Dut.Tree.Definition(i[n],c.slice()));return t}}])}(),Dut.Tree.Selector=function(){return Lut(function t(e,r,n,o,i,a){Iut(this,t),this.elements=n||[],this.attachment=o,this.filters=e||{},this.zoom=void 0!==r?r:Dut.Tree.Zoom.all,this.conditions=i,this.index=a},[{key:"specificity",value:function(){return this.elements.reduce(function(t,e){var r=e.specificity();return t[0]+=r[0],t[1]+=r[1],t},[0,0,this.conditions,this.index])}}])}(),Dut.Tree.URL=function(){return Lut(function t(e,r){Iut(this,t),this.is="uri",this.value=e,this.paths=r},[{key:"toString",value:function(){return this.value.toString()}},{key:"ev",value:function(t){return new Dut.Tree.URL(this.value.ev(t),this.paths)}}])}(),Dut.Tree.Value=function(){return Lut(function t(e){Iut(this,t),this.is="value",this.value=e},[{key:"ev",value:function(t){return 1===this.value.length?this.value[0].ev(t):new Dut.Tree.Value(this.value.map(function(e){return e.ev(t)}))}},{key:"toJS",value:function(t){var e=this.ev(t),r=e.toString();return"color"===e.is||"uri"===e.is||"string"===e.is||"keyword"===e.is?r="'"+r+"'":"field"===e.is?r=r.replace(/\[(.*)\]/g,"attributes['_match1']"):e.value&&"object"===jut(e.value)&&(r="["+r+"]"),"_value = "+r+";"}},{key:"toString",value:function(t,e,r,n){return this.value.map(function(e){return e.toString(t,n)}).join(r||", ")}},{key:"clone",value:function(){var t=Object.create(Dut.Tree.Value.prototype);return Array.isArray(t)?t.value=this.value.slice():t.value=this.value,t.is=this.is,t}}])}(),Dut.Tree.Variable=function(){return Lut(function t(e,r,n){Iut(this,t),this.is="variable",this.name=e,this.index=r,this.filename=n},[{key:"toString",value:function(){return this.name}},{key:"ev",value:function(t){if(this._css)return this._css;var e=t.frames.filter(function(t){return t.name===this.name}.bind(this));return e.length?e[0].value.ev(t):(t.error({message:"variable "+this.name+" is undefined",index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"})}}])}(),Dut.Tree.Zoom=function(){return Lut(function t(e,r,n){Iut(this,t),this.op=e,this.value=r,this.index=n},[{key:"setZoom",value:function(t){return this.zoom=t,this}},{key:"ev",value:function(t){var e=parseInt(this.value.ev(t).toString(),10);switch((e>Dut.Tree.Zoom.maxZoom||e<0)&&t.error({message:"Only zoom levels between 0 and "+Dut.Tree.Zoom.maxZoom+" supported.",index:this.index}),this.op){case"=":return this.zoom="zoom && zoom === "+e,this;case">":this.zoom="zoom && zoom > "+e;break;case">=":this.zoom="zoom && zoom >= "+e;break;case"<":this.zoom="zoom && zoom < "+e;break;case"<=":this.zoom="zoom && zoom <= "+e}return this}},{key:"toString",value:function(){for(var t="",e=0;e<=Dut.Tree.Zoom.maxZoom;e++)t+=this.zoom&1<<e?"X":".";return t}}])}(),Dut.Tree.Zoom.all=23,Dut.Tree.Zoom.maxZoom=22,Dut.Tree.Zoom.ranges={0:1e9,1:5e8,2:2e8,3:1e8,4:5e7,5:25e6,6:125e5,7:65e5,8:3e6,9:15e5,10:75e4,11:4e5,12:2e5,13:1e5,14:5e4,15:25e3,16:12500,17:5e3,18:2500,19:1500,20:750,21:500,22:250,23:100};var zut=function(t,e,r){return e&&Gut(t.prototype,e),r&&Gut(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},this.fill=!0,this.fillColor="#000000",this.fillOpacity=1,this.stroke=!1,this.strokeColor="#000000",this.strokeOpacity=1,this.strokeWidth=1,this.strokeLinecap="butt",this.strokeLineJoin="miter",this.strokeDashstyle="solid",this.pointRadius=6,this.shadowBlur=0,this.shadowColor="#000000",this.shadowOffsetX=0,this.shadowOffsetY=0,this.label="",this.labelRect=!1,this.fontColor="",this.fontSize=12,this.fontStyle="normal",this.fontVariant="normal",this.fontWeight="normal",this.fontFamily="arial,sans-serif",this.labelPosition="top",this.labelAlign="center",this.labelBaseline="middle",this.labelXOffset=0,this.labelYOffset=0,W.extend(this,e)});function Vut(t){"@babel/helpers - typeof";return(Vut="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Hut(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Wut(n.key),n)}}function Wut(t){var e=function(t,e){if("object"!=Vut(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Vut(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Vut(e)?e:e+""}function qut(t,e,r){return e=Xut(e),function(t,e){if(e&&("object"===Vut(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Xut(t).constructor):e.apply(t,r))}function Yut(){return(Yut="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Xut(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Xut(t){return(Xut=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Jut(t,e){return(Jut=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Kut=function(t){function e(t,r,n,o,i,a){var s;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(s=qut(this,e,[t,r,n,o,i,a])).shapeFactory=new Jl,s.shapeParameters=null,s.RelativeCoordinate=!1,s.setting=null,s.origonPoint=null,s.chartBox=null,s.chartBounds=null,s.width=null,s.height=null,s.XOffset=0,s.YOffset=0,s.DVBParameter=null,s.dataViewBox=null,s.DVBCodomain=null,s.DVBCenterPoint=null,s.DVBUnitValue=null,s.DVBOrigonPoint=null,s.DVBWidth=null,s.DVBHeight=null,s.origonPointOffset=null,s.fields=n||[],s.dataValues=null,s.lonlat=i||s.data.geometry.getBounds().getCenterLonLat(),o&&o.width&&o.height&&o.codomain&&(s.setting=o),s.CLASS_NAME="SuperMap.Feature.Theme.Graph",s}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Jut(t,e)}(e,fo),r=e,(n=[{key:"destroy",value:function(){this.shapeFactory=null,this.shapeParameters=null,this.width=null,this.height=null,this.origonPoint=null,this.chartBox=null,this.dataViewBox=null,this.chartBounds=null,this.DVBParameter=null,this.DVBOrigonPoint=null,this.DVBCenterPoint=null,this.DVBWidth=null,this.DVBHeight=null,this.DVBCodomain=null,this.DVBUnitValue=null,this.origonPointOffset=null,this.XOffset=null,this.YOffset=null,this.fields=null,this.dataValues=null,this.setting=null,Yut(Xut(e.prototype),"destroy",this).call(this)}},{key:"initBaseParameter",value:function(){if(!this.setting)return!1;var t=this.setting;if(!(t.width&&t.height&&t.codomain))return!1;var e=void 0===t.decimalNumber||isNaN(t.decimalNumber)?-1:t.decimalNumber,r=fo.getDataValues(this.data,this.fields,e);this.dataValues=r||[],this.width=parseFloat(t.width),this.height=parseFloat(t.height),this.DVBCodomain=t.codomain,this.XOffset=t.XOffset?t.XOffset:0,this.YOffset=t.YOffset?t.YOffset:0,this.origonPoint=[],this.chartBox=[],this.dataViewBox=[],this.DVBParameter=t.dataViewBoxParameter?t.dataViewBoxParameter:[0,0,0,0],this.DVBOrigonPoint=[],this.DVBCenterPoint=[],this.origonPointOffset=[],this.resetLocation();var n=this.width,o=this.height,i=this.location;this.origonPoint=[i[0]-n/2,i[1]-o/2];var a=this.origonPoint;this.chartBox=[a[0],a[1]+o,a[0]+n,a[1]];var s=this.chartBox,u=this.DVBParameter;this.dataViewBox=[s[0]+u[0],s[1]-u[1],s[2]-u[2],s[3]+u[3]];var l=this.dataViewBox;return!(l[0]>=l[2]||l[1]<=l[3])&&(this.DVBOrigonPoint=[l[0],l[3]],this.DVBWidth=Math.abs(l[2]-l[0]),this.DVBHeight=Math.abs(l[1]-l[3]),this.DVBCenterPoint=[this.DVBOrigonPoint[0]+this.DVBWidth/2,this.DVBOrigonPoint[1]+this.DVBHeight/2],this.origonPointOffset=[this.DVBOrigonPoint[0]-a[0],this.DVBOrigonPoint[1]-a[1]],!0)}},{key:"resetLocation",value:function(t){t&&(this.lonlat=t);var e=this.getLocalXY(this.lonlat);e[0]+=this.XOffset,e[1]+=this.YOffset,this.location=e;var r=this.width,n=this.height,o=this.location;return this.chartBounds=new Gt(o[0]-r/2,o[1]+n/2,o[0]+r/2,o[1]-n/2),this.resetLinearGradient(),o}},{key:"resetLinearGradient",value:function(){}},{key:"shapesConvertToRelativeCoordinate",value:function(){for(var t=this.shapes,e=this.location,r=0,n=t.length;r<n;r++){t[r].refOriginalPosition=e;var o=t[r].style;for(var i in o)switch(i){case"pointList":for(var a=o[i],s=0,u=a.length;s<u;s++)a[s][0]-=e[0],a[s][1]-=e[1];break;case"x":o[i]-=e[0];break;case"y":o[i]-=e[1]}}this.RelativeCoordinate=!0}},{key:"assembleShapes",value:function(){}},{key:"getLocalXY",value:function(t){return this.layer.getLocalXY(t)}}])&&Hut(r.prototype,n),o&&Hut(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function Qut(t){"@babel/helpers - typeof";return(Qut="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Zut(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,$ut(n.key),n)}}function $ut(t){var e=function(t,e){if("object"!=Qut(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Qut(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Qut(e)?e:e+""}function tlt(t,e,r){return e=rlt(e),function(t,e){if(e&&("object"===Qut(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],rlt(t).constructor):e.apply(t,r))}function elt(){return(elt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=rlt(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function rlt(t){return(rlt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function nlt(t,e){return(nlt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}fo.getDataValues=function(t,e,r){if(!t.attributes)return!1;for(var n=[],o=t.attributes,i=0;i<e.length;i++)for(var a in o)if(a===e[i])try{!isNaN(r)&&r>=0?n.push(parseFloat(o[a].toString()).toFixed(r)):n.push(parseFloat(o[a].toString()))}catch(t){throw new Error("not a number")}return n.length===e.length&&n};var olt=function(t){function e(t,r,n,o,i){var a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(a=tlt(this,e,[t,r,n,o,i])).CLASS_NAME="SuperMap.Feature.Theme.Bar",a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&nlt(t,e)}(e,Kut),r=e,(n=[{key:"destroy",value:function(){elt(rlt(e.prototype),"destroy",this).call(this)}},{key:"assembleShapes",value:function(){var t={showShadow:!0,shadowBlur:8,shadowColor:"rgba(100,100,100,0.8)",shadowOffsetX:2,shadowOffsetY:2},e=this.setting;if(e.barLinearGradient||(e.barLinearGradient=[["#00FF00","#00CD00"],["#00CCFF","#5E87A2"],["#00FF66","#669985"],["#CCFF00","#94A25E"],["#FF9900","#A2945E"]]),e.dataViewBoxParameter||(void 0===e.useAxis||e.useAxis?e.dataViewBoxParameter=[45,15,15,15]:e.dataViewBoxParameter=[5,5,5,5]),this.initBaseParameter()){var r=this.DVBCodomain;this.DVBUnitValue=(r[1]-r[0])/this.DVBHeight;var n=this.dataViewBox,o=this.dataValues;if(!(o.length<1)){for(var i=0,a=o.length;i<a;i++)if(o[i]<r[0]||o[i]>r[1])return;var s=this.calculateXShapeInfo();if(s){var u=s.xPositions,l=s.width;(void 0===e.useBackground||e.useBackground)&&this.shapes.push(Jl.Background(this.shapeFactory,this.chartBox,e)),(void 0===e.useAxis||e.useAxis)&&(this.shapes=this.shapes.concat(Jl.GraphAxis(this.shapeFactory,n,e,s)));for(var c=0;c<o.length;c++){var f=n[1]-(o[c]-r[0])/this.DVBUnitValue,h=[[u[c]-l/2,n[1]-1],[u[c]+l/2,n[1]-1],[u[c]+l/2,f],[u[c]-l/2,f]],p=new nu(h);if(void 0===e.showShadow||e.showShadow){if(e.barShadowStyle){var d=e.barShadowStyle;d.shadowBlur&&(t.shadowBlur=d.shadowBlur),d.shadowColor&&(t.shadowColor=d.shadowColor),d.shadowOffsetX&&(t.shadowOffsetX=d.shadowOffsetX),d.shadowOffsetY&&(t.shadowOffsetY=d.shadowOffsetY)}p.style={},W.copyAttributesWithClip(p.style,t)}p.refDataID=this.data.id,p.dataInfo={field:this.fields[c],value:o[c]},void 0!==e.barHoverAble&&(p.hoverable=e.barHoverAble),void 0!==e.barClickAble&&(p.clickable=e.barClickAble),this.shapes.push(this.shapeFactory.createShape(p))}this.shapesConvertToRelativeCoordinate()}}}}},{key:"calculateXShapeInfo",value:function(){var t,e=this.dataViewBox,r=this.setting,n=this.dataValues.length;if(n<1)return null;var o=[],i=0,a=this.DVBWidth;if(r.xShapeBlank&&r.xShapeBlank.length&&3==r.xShapeBlank.length){var s=a-((t=r.xShapeBlank)[0]+t[2]+(n-1)*t[1]);if(s<=n)return null;i=s/n}else t=[i=a/(2*n+1),i,i];for(var u=0,l=0;l<n;l++)0==l?u=t[0]+i/2:u+=i+t[1],o.push(e[0]+u);return{xPositions:o,width:i}}},{key:"resetLinearGradient",value:function(){if(this.RelativeCoordinate)for(var t=this.shapes.length,e=this.setting.barLinearGradient,r=-1,n=0;n<t;n++){var o=this.shapes[n];if("SuperMap.LevelRenderer.Shape.SmicPolygon"===o.CLASS_NAME){var i=o.style,a=this.location[0]+i.pointList[0][0],s=this.location[0]+i.pointList[1][0];++r>=e.length&&(r%=e.length);var u=e[r][0],l=e[r][1],c=(new Go).getLinearGradient(a,0,s,0,[[0,u],[1,l]]);o.style.color=c}}}}])&&Zut(r.prototype,n),o&&Zut(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function ilt(t){"@babel/helpers - typeof";return(ilt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function alt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,slt(n.key),n)}}function slt(t){var e=function(t,e){if("object"!=ilt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=ilt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ilt(e)?e:e+""}function ult(t,e,r){return e=clt(e),function(t,e){if(e&&("object"===ilt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],clt(t).constructor):e.apply(t,r))}function llt(){return(llt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=clt(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function clt(t){return(clt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function flt(t,e){return(flt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var hlt=function(t){function e(t,r,n,o,i){var a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(a=ult(this,e,[t,r,n,o,i])).CLASS_NAME="SuperMap.Feature.Theme.Bar3D",a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&flt(t,e)}(e,Kut),r=e,(n=[{key:"destroy",value:function(){llt(clt(e.prototype),"destroy",this).call(this)}},{key:"assembleShapes",value:function(){var t=this.setting;if(t.dataViewBoxParameter||(void 0===t.useAxis||t.useAxis?t.dataViewBoxParameter=[45,25,20,20]:t.dataViewBoxParameter=[5,5,5,5]),t.axisUseArrow=void 0===t.axisUseArrow||t.axisUseArrow,t.axisXLabelsOffset=void 0!==t.axisXLabelsOffset?t.axisXLabelsOffset:[-10,10],this.initBaseParameter()){var e=this.DVBCodomain;this.DVBUnitValue=(e[1]-e[0])/this.DVBHeight;var r=this.dataViewBox,n=this.dataValues;if(!(n.length<1)){for(var o=0,i=n.length;o<i;o++)if(n[o]<e[0]||n[o]>e[1])return;var a=this.calculateXShapeInfo();if(a){var s=a.xPositions,u=a.width;(void 0===t.useBackground||t.useBackground)&&this.shapes.push(Jl.Background(this.shapeFactory,this.chartBox,t)),(!t.axis3DParameter||isNaN(t.axis3DParameter)||t.axis3DParameter<15)&&(t.axis3DParameter=20),(void 0===t.useAxis||t.useAxis)&&(this.shapes=this.shapes.concat(Jl.GraphAxis(this.shapeFactory,r,t,a)));for(var l=t.bar3DParameter&&!isNaN(t.bar3DParameter)?t.bar3DParameter:10,c=0;c<n.length;c++){var f=r[1]-(n[c]-e[0])/this.DVBUnitValue,h=s[c]-u/2,p=s[c]+u/2,d=[[h,f],[p,f],[p-l,f+l],[h-l,f+l]],y=[[p,f],[p-l,f+l],[p-l,r[1]+l],[p,r[1]]],v=[[h-l,r[1]+l],[p-l,r[1]+l],[p-l,f+l],[h-l,f+l]];l<=0&&(v=[[h,r[1]],[p,r[1]],[p,f],[h,f]]);var g=new nu(d),m=new nu(y),b=new nu(v);t.barSideStyle=t.barSideStyle?t.barSideStyle:t.barFaceStyle,t.barSideStyleByFields=t.barSideStyleByFields?t.barSideStyleByFields:t.barFaceStyleByFields,t.barSideStyleByCodomain=t.barSideStyleByCodomain?t.barSideStyleByCodomain:t.barFaceStyleByCodomain,t.barTopStyle=t.barTopStyle?t.barTopStyle:t.barFaceStyle,t.barTopStyleByFields=t.barTopStyleByFields?t.barTopStyleByFields:t.barFaceStyleByFields,t.barTopStyleByCodomain=t.barTopStyleByCodomain?t.barTopStyleByCodomain:t.barFaceStyleByCodomain,b.style=Jl.ShapeStyleTool({stroke:!0,strokeColor:"#ffffff",fillColor:"#ee9900"},t.barFaceStyle,t.barFaceStyleByFields,t.barFaceStyleByCodomain,c,n[c]),m.style=Jl.ShapeStyleTool({stroke:!0,strokeColor:"#ffffff",fillColor:"#ee9900"},t.barSideStyle,t.barSideStyleByFields,t.barSideStyleByCodomain,c,n[c]),g.style=Jl.ShapeStyleTool({stroke:!0,strokeColor:"#ffffff",fillColor:"#ee9900"},t.barTopStyle,t.barTopStyleByFields,t.barTopStyleByCodomain,c,n[c]),t.barSideHoverStyle=t.barSideHoverStyle?t.barSideHoverStyle:t.barFaceHoverStyle,t.barTopHoverStyle=t.barTopHoverStyle?t.barTopHoverStyle:t.barFaceHoverStyle,b.highlightStyle=Jl.ShapeStyleTool({stroke:!0},t.barFaceHoverStyle),m.highlightStyle=Jl.ShapeStyleTool({stroke:!0},t.barSideHoverStyle),g.highlightStyle=Jl.ShapeStyleTool({stroke:!0},t.barTopHoverStyle),g.refDataID=m.refDataID=b.refDataID=this.data.id,g.isHoverByRefDataID=m.isHoverByRefDataID=b.isHoverByRefDataID=!0,g.refDataHoverGroup=m.refDataHoverGroup=b.refDataHoverGroup=W.createUniqueID("lr_shg"),g.dataInfo=m.dataInfo=b.dataInfo={field:this.fields[c],value:n[c]},void 0!==t.barHoverAble&&(g.hoverable=m.hoverable=b.hoverable=t.barHoverAble),void 0!==t.barClickAble&&(g.clickable=m.clickable=b.clickable=t.barClickAble),this.shapes.push(this.shapeFactory.createShape(m)),this.shapes.push(this.shapeFactory.createShape(g)),this.shapes.push(this.shapeFactory.createShape(b))}this.shapesConvertToRelativeCoordinate()}}}}},{key:"calculateXShapeInfo",value:function(){var t,e=this.dataViewBox,r=this.setting,n=this.dataValues.length;if(n<1)return null;var o=[],i=0,a=this.DVBWidth;if(r.xShapeBlank&&r.xShapeBlank.length&&3==r.xShapeBlank.length){var s=a-((t=r.xShapeBlank)[0]+t[2]+(n-1)*t[1]);if(s<=n)return null;i=s/n}else t=[i=a/(2*n+1),i,i];for(var u=0,l=0;l<n;l++)0==l?u=t[0]+i/2:u+=i+t[1],o.push(e[0]+u);return{xPositions:o,width:i}}}])&&alt(r.prototype,n),o&&alt(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function plt(t){"@babel/helpers - typeof";return(plt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function dlt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ylt(n.key),n)}}function ylt(t){var e=function(t,e){if("object"!=plt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=plt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==plt(e)?e:e+""}function vlt(t,e,r){return e=mlt(e),function(t,e){if(e&&("object"===plt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],mlt(t).constructor):e.apply(t,r))}function glt(){return(glt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=mlt(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function mlt(t){return(mlt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function blt(t,e){return(blt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var wlt=function(t){function e(t,r,n,o,i,a){var s;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(s=vlt(this,e,[t,r,n,o,i,a])).setting=null,o&&o.codomain&&(s.setting=o,s.DVBCodomain=s.setting.codomain),s.CLASS_NAME="SuperMap.Feature.Theme.RankSymbol",s}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&blt(t,e)}(e,Kut),r=e,(n=[{key:"destroy",value:function(){this.setting=null,glt(mlt(e.prototype),"destroy",this).call(this)}},{key:"initBaseParameter",value:function(){if(!this.setting)return!1;var t=this.setting;t.XOffset&&(this.XOffset=t.XOffset),t.YOffset&&(this.YOffset=t.YOffset),this.XOffset=t.XOffset?t.XOffset:0,this.YOffset=t.YOffset?t.YOffset:0,this.origonPoint=[],this.chartBox=[],this.dataViewBox=[],this.DVBParameter=t.dataViewBoxParameter?t.dataViewBoxParameter:[0,0,0,0],this.DVBOrigonPoint=[],this.DVBCenterPoint=[],this.origonPointOffset=[],this.resetLocation();var e=this.width,r=this.height,n=this.location;this.origonPoint=[n[0]-e/2,n[1]-r/2];var o=this.origonPoint;this.chartBox=[o[0],o[1]+r,o[0]+e,o[1]];var i=this.chartBox,a=this.DVBParameter;this.dataViewBox=[i[0]+a[0],i[1]-a[1],i[2]-a[2],i[3]+a[3]];var s=this.dataViewBox;return!(s[0]>=s[2]||s[1]<=s[3])&&(this.DVBOrigonPoint=[s[0],s[3]],this.DVBWidth=Math.abs(s[2]-s[0]),this.DVBHeight=Math.abs(s[1]-s[3]),this.DVBCenterPoint=[this.DVBOrigonPoint[0]+this.DVBWidth/2,this.DVBOrigonPoint[1]+this.DVBHeight/2],this.origonPointOffset=[this.DVBOrigonPoint[0]-o[0],this.DVBOrigonPoint[1]-o[1]],!0)}}])&&dlt(r.prototype,n),o&&dlt(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function Slt(t){"@babel/helpers - typeof";return(Slt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function xlt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,_lt(n.key),n)}}function _lt(t){var e=function(t,e){if("object"!=Slt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Slt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Slt(e)?e:e+""}function Elt(t,e,r){return e=Plt(e),function(t,e){if(e&&("object"===Slt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Plt(t).constructor):e.apply(t,r))}function Olt(){return(Olt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Plt(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Plt(t){return(Plt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function klt(t,e){return(klt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Clt=function(t){function e(t,r,n,o,i){var a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(a=Elt(this,e,[t,r,n,o,i])).CLASS_NAME="SuperMap.Feature.Theme.Circle",a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&klt(t,e)}(e,wlt),r=e,(n=[{key:"destroy",value:function(){Olt(Plt(e.prototype),"destroy",this).call(this)}},{key:"assembleShapes",value:function(){if(!this.setting)return!1;var t=this.setting;if(!t.codomain)return!1;var e=void 0===t.decimalNumber||isNaN(t.decimalNumber)?-1:t.decimalNumber,r=fo.getDataValues(this.data,this.fields,e);this.dataValues=r||[];var n=this.dataValues;t.maxR||(t.maxR=100),t.minR||(t.minR=0);var o=this.DVBCodomain;o&&o[1]-o[0]>0?this.DVBUnitValue=t.maxR/(o[1]-o[0]):this.DVBUnitValue=t.maxR;var i=this.DVBUnitValue,a=n[0]*i+t.minR;if(this.width=2*a,this.height=2*a,this.initBaseParameter()&&(!o||!(n[0]<o[0]||n[0]>o[1]))){var s=this.DVBCenterPoint,u=new Vu(s[0],s[1],a);u.style=Jl.ShapeStyleTool(null,t.circleStyle,null,null,0),void 0!==t.fillColor?u.style.fillColor=t.fillColor:u.style.fillColor="#ff9277",u.highlightStyle=Jl.ShapeStyleTool(null,t.circleHoverStyle),void 0!==t.circleHoverAble&&(u.hoverable=t.circleHoverAble),void 0!==t.circleClickAble&&(u.clickable=t.circleClickAble),u.refDataID=this.data.id,u.dataInfo={field:this.fields[0],r:a,value:n[0]},this.shapes.push(this.shapeFactory.createShape(u)),this.shapesConvertToRelativeCoordinate()}}}])&&xlt(r.prototype,n),o&&xlt(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function Tlt(t){"@babel/helpers - typeof";return(Tlt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Alt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Mlt(n.key),n)}}function Mlt(t){var e=function(t,e){if("object"!=Tlt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Tlt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Tlt(e)?e:e+""}function jlt(t,e,r){return e=Nlt(e),function(t,e){if(e&&("object"===Tlt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Nlt(t).constructor):e.apply(t,r))}function Ilt(){return(Ilt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Nlt(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Nlt(t){return(Nlt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Llt(t,e){return(Llt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Rlt=function(t){function e(t,r,n,o,i,a){var s;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(s=jlt(this,e,[t,r,n,o,i,a])).CLASS_NAME="SuperMap.Feature.Theme.Line",s}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Llt(t,e)}(e,Kut),r=e,(n=[{key:"destroy",value:function(){Ilt(Nlt(e.prototype),"destroy",this).call(this)}},{key:"assembleShapes",value:function(){var t=this.setting;if(t.dataViewBoxParameter||(void 0===t.useAxis||t.useAxis?t.dataViewBoxParameter=[45,15,15,15]:t.dataViewBoxParameter=[5,5,5,5]),this.initBaseParameter()){var e=this.dataViewBox,r=this.DVBCodomain;this.DVBUnitValue=(r[1]-r[0])/this.DVBHeight;var n=this.DVBUnitValue,o=this.dataValues;if(!(o.length<1)){var i=this.calculateXShapeInfo();if(i){var a,s,u=i.xPositions;(void 0===t.useBackground||t.useBackground)&&this.shapes.push(Jl.Background(this.shapeFactory,this.chartBox,t)),this.shapes=this.shapes.concat(Jl.GraphAxis(this.shapeFactory,e,t,i));for(var l=[],c=[],f=0,h=o.length;f<h;f++){if(o[f]<r[0]||o[f]>r[1])return null;a=u[f],s=e[1]-(o[f]-r[0])/n;var p=new Us(a,s);p.style=Jl.ShapeStyleTool({fillColor:"#ee9900"},t.pointStyle,t.pointStyleByFields,t.pointStyleByCodomain,f,o[f]),p.highlightStyle=Jl.ShapeStyleTool(null,t.pointHoverStyle),void 0!==t.pointHoverAble&&(p.hoverable=t.pointHoverAble),void 0!==t.pointClickAble&&(p.clickable=t.pointClickAble),p.refDataID=this.data.id,p.dataInfo={field:this.fields[f],value:o[f]},c.push(this.shapeFactory.createShape(p));var d=[a,s];l.push(d)}var y=new Js(l);y.style=Jl.ShapeStyleTool({strokeColor:"#ee9900"},t.lineStyle),y.clickable=!1,y.hoverable=!1;var v=this.shapeFactory.createShape(y);this.shapes.push(v),this.shapes=this.shapes.concat(c),this.shapesConvertToRelativeCoordinate()}}}}},{key:"calculateXShapeInfo",value:function(){var t,e=this.dataViewBox,r=this.setting,n=this.dataValues.length;if(n<1)return null;var o=[],i=this.DVBWidth,a=0;if(r.xShapeBlank&&r.xShapeBlank.length&&2==r.xShapeBlank.length){var s=i-((t=r.xShapeBlank)[0]+t[1]);if(s<=n)return null;a=s/(n-1)}else t=[a=i/(n+1),a,a];for(var u=0,l=0;l<n;l++)0==l?u=t[0]:u+=a,o.push(e[0]+u);return{xPositions:o,width:0}}}])&&Alt(r.prototype,n),o&&Alt(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function Dlt(t){"@babel/helpers - typeof";return(Dlt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Blt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Flt(n.key),n)}}function Flt(t){var e=function(t,e){if("object"!=Dlt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Dlt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Dlt(e)?e:e+""}function Glt(t,e,r){return e=zlt(e),function(t,e){if(e&&("object"===Dlt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],zlt(t).constructor):e.apply(t,r))}function Ult(){return(Ult="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=zlt(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function zlt(t){return(zlt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Vlt(t,e){return(Vlt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Hlt=function(t){function e(t,r,n,o,i){var a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(a=Glt(this,e,[t,r,n,o,i])).CLASS_NAME="SuperMap.Feature.Theme.Pie",a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Vlt(t,e)}(e,Kut),r=e,(n=[{key:"destroy",value:function(){Ult(zlt(e.prototype),"destroy",this).call(this)}},{key:"assembleShapes",value:function(){var t=this.setting,e=[{fillColor:"#ff9277"},{fillColor:"#dddd00"},{fillColor:"#ffc877"},{fillColor:"#bbe3ff"},{fillColor:"#d5ffbb"},{fillColor:"#bbbbff"},{fillColor:"#ddb000"},{fillColor:"#b0dd00"},{fillColor:"#e2bbff"},{fillColor:"#ffbbe3"},{fillColor:"#ff7777"},{fillColor:"#ff9900"},{fillColor:"#83dd00"},{fillColor:"#77e3ff"},{fillColor:"#778fff"},{fillColor:"#c877ff"},{fillColor:"#ff77ab"},{fillColor:"#ff6600"},{fillColor:"#aa8800"},{fillColor:"#77c7ff"},{fillColor:"#ad77ff"},{fillColor:"#ff77ff"},{fillColor:"#dd0083"},{fillColor:"#777700"},{fillColor:"#00aa00"},{fillColor:"#0088aa"},{fillColor:"#8400dd"},{fillColor:"#aa0088"},{fillColor:"#dd0000"},{fillColor:"#772e00"}];if(this.initBaseParameter()){t.useBackground&&this.shapes.push(Jl.Background(this.shapeFactory,this.chartBox,t));var r=this.dataValues;if(!(r.length<1)){for(var n=this.DVBCodomain,o=0;o<r.length;o++)if(r[o]<n[0]||r[o]>n[1])return;for(var i=0,a=0;a<r.length;a++)i+=Math.abs(r[a]);this.DVBUnitValue=360/i;for(var s=this.DVBUnitValue,u=this.DVBCenterPoint,l=0,c=0,f=l,h=this.DVBHeight<this.DVBWidth?this.DVBHeight/2:this.DVBWidth/2,p=0;p<r.length;p++){var d=Math.abs(r[p]);(c=0===p?l+d*s:p===d.length-1?f:l+d*s)-l>=360&&(c=359.9999999);var y=new bu(u[0],u[1],h,l,c);if(void 0===t.sectorStyleByFields){var v=p%e.length;y.style=Jl.ShapeStyleTool(null,t.sectorStyle,e,null,v)}else y.style=Jl.ShapeStyleTool(null,t.sectorStyle,t.sectorStyleByFields,t.sectorStyleByCodomain,p,r[p]);y.highlightStyle=Jl.ShapeStyleTool(null,t.sectorHoverStyle),void 0!==t.sectorHoverAble&&(y.hoverable=t.sectorHoverAble),void 0!==t.sectorClickAble&&(y.clickable=t.sectorClickAble),y.refDataID=this.data.id,y.dataInfo={field:this.fields[p],value:r[p]},this.shapes.push(this.shapeFactory.createShape(y)),l=c}this.shapesConvertToRelativeCoordinate()}}}}])&&Blt(r.prototype,n),o&&Blt(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function Wlt(t){"@babel/helpers - typeof";return(Wlt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function qlt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ylt(n.key),n)}}function Ylt(t){var e=function(t,e){if("object"!=Wlt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Wlt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Wlt(e)?e:e+""}function Xlt(t,e,r){return e=Klt(e),function(t,e){if(e&&("object"===Wlt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Klt(t).constructor):e.apply(t,r))}function Jlt(){return(Jlt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Klt(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Klt(t){return(Klt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Qlt(t,e){return(Qlt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Zlt=function(t){function e(t,r,n,o,i,a){var s;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(s=Xlt(this,e,[t,r,n,o,i,a])).CLASS_NAME="SuperMap.Feature.Theme.Point",s}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Qlt(t,e)}(e,Kut),r=e,(n=[{key:"destroy",value:function(){Jlt(Klt(e.prototype),"destroy",this).call(this)}},{key:"assembleShapes",value:function(){var t=this.setting;if(t.dataViewBoxParameter||(void 0===t.useAxis||t.useAxis?t.dataViewBoxParameter=[45,15,15,15]:t.dataViewBoxParameter=[5,5,5,5]),this.initBaseParameter()){var e=this.dataViewBox,r=this.DVBCodomain;this.DVBUnitValue=(r[1]-r[0])/this.DVBHeight;var n=this.DVBUnitValue,o=this.dataValues,i=this.calculateXShapeInfo();if(i){var a,s,u=i.xPositions;(void 0===t.useBackground||t.useBackground)&&this.shapes.push(Jl.Background(this.shapeFactory,this.chartBox,t)),this.shapes=this.shapes.concat(Jl.GraphAxis(this.shapeFactory,e,t,i));for(var l=0,c=o.length;l<c;l++){if(o[l]<r[0]||o[l]>r[1])return null;a=u[l],s=e[1]-(o[l]-r[0])/n;var f=new Us(a,s);f.style=Jl.ShapeStyleTool({fillColor:"#ee9900"},t.pointStyle,t.pointStyleByFields,t.pointStyleByCodomain,l,o[l]),f.highlightStyle=Jl.ShapeStyleTool(null,t.pointHoverStyle),void 0!==t.pointHoverAble&&(f.hoverable=t.pointHoverAble),void 0!==t.pointClickAble&&(f.clickable=t.pointClickAble),f.refDataID=this.data.id,f.dataInfo={field:this.fields[l],value:o[l]},this.shapes.push(this.shapeFactory.createShape(f))}this.shapesConvertToRelativeCoordinate()}}}},{key:"calculateXShapeInfo",value:function(){var t,e=this.dataViewBox,r=this.setting,n=this.dataValues.length;if(n<1)return null;var o=[],i=this.DVBWidth,a=0;if(r.xShapeBlank&&r.xShapeBlank.length&&2==r.xShapeBlank.length){var s=i-((t=r.xShapeBlank)[0]+t[1]);if(s<=n)return null;a=s/(n-1)}else t=[a=i/(n+1),a,a];for(var u=0,l=0;l<n;l++)0==l?u=t[0]:u+=a,o.push(e[0]+u);return{xPositions:o,width:0}}}])&&qlt(r.prototype,n),o&&qlt(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function $lt(t){"@babel/helpers - typeof";return($lt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function tct(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ect(n.key),n)}}function ect(t){var e=function(t,e){if("object"!=$lt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=$lt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==$lt(e)?e:e+""}function rct(t,e,r){return e=oct(e),function(t,e){if(e&&("object"===$lt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],oct(t).constructor):e.apply(t,r))}function nct(){return(nct="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=oct(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function oct(t){return(oct=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ict(t,e){return(ict=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var act=function(t){function e(t,r,n,o,i){var a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(a=rct(this,e,[t,r,n,o,i])).CLASS_NAME="SuperMap.Feature.Theme.Ring",a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ict(t,e)}(e,Kut),r=e,(n=[{key:"destroy",value:function(){nct(oct(e.prototype),"destroy",this).call(this)}},{key:"assembleShapes",value:function(){if(this.initBaseParameter()){var t=[{fillColor:"#ff9277"},{fillColor:"#dddd00"},{fillColor:"#ffc877"},{fillColor:"#bbe3ff"},{fillColor:"#d5ffbb"},{fillColor:"#bbbbff"},{fillColor:"#ddb000"},{fillColor:"#b0dd00"},{fillColor:"#e2bbff"},{fillColor:"#ffbbe3"},{fillColor:"#ff7777"},{fillColor:"#ff9900"},{fillColor:"#83dd00"},{fillColor:"#77e3ff"},{fillColor:"#778fff"},{fillColor:"#c877ff"},{fillColor:"#ff77ab"},{fillColor:"#ff6600"},{fillColor:"#aa8800"},{fillColor:"#77c7ff"},{fillColor:"#ad77ff"},{fillColor:"#ff77ff"},{fillColor:"#dd0083"},{fillColor:"#777700"},{fillColor:"#00aa00"},{fillColor:"#0088aa"},{fillColor:"#8400dd"},{fillColor:"#aa0088"},{fillColor:"#dd0000"},{fillColor:"#772e00"}],e=this.setting;e.useBackground&&this.shapes.push(Jl.Background(this.shapeFactory,this.chartBox,e));var r=this.dataValues;if(!(r.length<1)){for(var n=this.DVBCodomain,o=0;o<r.length;o++)if(r[o]<n[0]||r[o]>n[1])return;for(var i=0,a=0;a<r.length;a++)i+=Math.abs(r[a]);this.DVBUnitValue=360/i;for(var s=this.DVBUnitValue,u=this.DVBCenterPoint,l=0,c=0,f=l,h=this.DVBHeight<this.DVBWidth?this.DVBHeight/2:this.DVBWidth/2,p=e.innerRingRadius>=0&&e.innerRingRadius<h,d=void 0!==e.innerRingRadius&&!isNaN(e.innerRingRadius)&&p?e.innerRingRadius:0,y=0;y<r.length;y++){var v=Math.abs(r[y]);c=0===y?l+v*s:y===v.length-1?f:l+v*s;var g=new bu(u[0],u[1],h,l,c,d);if(void 0===e.sectorStyleByFields){var m=y%t.length;g.style=Jl.ShapeStyleTool(null,e.sectorStyle,t,null,m)}else g.style=Jl.ShapeStyleTool(null,e.sectorStyle,e.sectorStyleByFields,e.sectorStyleByCodomain,y,r[y]);g.highlightStyle=Jl.ShapeStyleTool(null,e.sectorHoverStyle),void 0!==e.sectorHoverAble&&(g.hoverable=e.sectorHoverAble),void 0!==e.sectorClickAble&&(g.clickable=e.sectorClickAble),g.refDataID=this.data.id,g.dataInfo={field:this.fields[y],value:r[y]},this.shapes.push(this.shapeFactory.createShape(g)),l=c}this.shapesConvertToRelativeCoordinate()}}}}])&&tct(r.prototype,n),o&&tct(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();var sct="EXCEL",uct="CSV",lct="GEOJSON",cct="JSON";function fct(t){"@babel/helpers - typeof";return(fct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function hct(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,pct(n.key),n)}}function pct(t){var e=function(t,e){if("object"!=fct(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=fct(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==fct(e)?e:e+""}var dct=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._initView()},(e=[{key:"_initView",value:function(){var t=document.createElement("div");t.hidden=!0,t.setAttribute("class","component-messageboxcontainer component-border-bottom-orange");var e=document.createElement("div");e.setAttribute("class","icon"),this.icon=document.createElement("span"),this.icon.setAttribute("class","supermapol-icons-message-warning"),e.appendChild(this.icon),t.appendChild(e);var r=document.createElement("div");r.setAttribute("class","component-messagebox"),r.innerHTML="",t.appendChild(r),this.messageBox=r;var n=document.createElement("div");n.setAttribute("class","component-messagebox__cancelbtncontainer");var o=document.createElement("button");o.setAttribute("class","component-messagebox__cancelBtn"),o.innerHTML="x",o.onclick=this.closeView.bind(this),n.appendChild(o),t.appendChild(n),this.messageBoxContainer=t,document.body.appendChild(this.messageBoxContainer)}},{key:"closeView",value:function(){this.messageBoxContainer.hidden=!0}},{key:"showView",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"warring";"success"===e?(this.icon.setAttribute("class","supermapol-icons-message-success"),this.messageBoxContainer.setAttribute("class","component-messageboxcontainer component-border-bottom-green")):"failure"===e?(this.icon.setAttribute("class","supermapol-icons-message-failure"),this.messageBoxContainer.setAttribute("class","component-messageboxcontainer component-border-bottom-red")):"warring"===e&&(this.icon.setAttribute("class","supermapol-icons-message-warning"),this.messageBoxContainer.setAttribute("class","component-messageboxcontainer component-border-bottom-orange")),this.messageBox.innerHTML=t,this.messageBoxContainer.hidden=!1}}])&&hct(t.prototype,e),r&&hct(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}(),yct=function(){try{return echarts}catch(t){return{}}}(),vct={"en-US":{title_dataFlowService:"Data Flow Service",title_distributedAnalysis:"Distributed Analysis",title_clientComputing:"Client Computing",title_dataServiceQuery:"Data Service Query",title_searchCity:"Search city",title_searchLayer:" Search layer",text_input_value_inputDataFlowUrl:"Please enter the data stream service address such as: ws://{serviceRoot}/{dataFlowName}/dataflow/subscribe",text_displayFeaturesInfo:"Display feature information",text_subscribe:"subscribe",text_cancelSubscribe:"unsubscribe",text_densityAnalysis:"Density Analysis",text_CalculateTheValuePerUnitArea:"Calculate the value per unit area within the neighborhood shape",text_option_selectDataset:"Please select a dataset",text_label_dataset:"Dataset",text_option_simplePointDensityAnalysis:"Simple point density analysis",text_option_nuclearDensityAnalysis:"Nuclear density analysis",text_label_analyticalMethod:"Analytical method",text_option_quadrilateral:"Quadrilateral",text_option_hexagon:"hexagon",text_label_meshType:"Mesh type",text_option_notSet:"Not set",text_label_weightField:"Weight field",text_label_gridSizeInMeters:"Grid size",text_label_searchRadius:"Search radius",text_label_queryRange:"Scope of analysis",text_label_areaUnit:"Area unit",text_option_equidistantSegmentation:"Equidistant segmentation",text_option_logarithm:"Logarithm",text_option_equalCountingSegment:"Equal counting segment",text_option_squareRootSegmentation:"Square root segmentation",text_label_thematicMapSegmentationMode:"Thematic map segmentation mode",text_label_thematicMapSegmentationParameters:"Thematic map segmentation parameters",text_option_greenOrangePurpleGradient:"Green orange purple gradient",text_option_greenOrangeRedGradient:"Green orange red gradient",text_option_rainbowGradient:"Rainbow gradient",text_option_spectralGradient:"Spectral gradient",text_option_terrainGradient:"Terrain gradient",text_label_thematicMapColorGradientMode:"Thematic map color gradient mode",text_label_resultLayerName:"Result layer name",text_chooseFile:"Open File",text_isoline:"Isoline",text_extractDiscreteValue:"Extract discrete value generation curve",text_buffer:"Buffer",text_specifyTheDistance:"Specify the distance to create the surrounding area",text_label_analysisLayer:"Analysis layer",text_label_extractField:"Extract field",text_label_extractedValue:"Extracted value",text_label_distanceAttenuation:"Distance attenuation",text_label_gridSize:"gridSize",text_label_bufferRadius:"Buffer radius",text_label_defaultkilometers:"Default 10 kilometers",text_label_kilometer:"kilometer",text_label_unit:"unit",text_retainOriginal:"Retain original object field",text_mergeBuffer:"Merge buffer",text_label_color:"Color",text_label_buffer:"[Buffer]",text_label_isolines:"[Isolines]",text_label_queryRangeTips:"The default is the full range of input data. Example: -74.050, 40.650, -73.850, 40.850",text_label_queryModel:"Query mode",text_label_IDArrayOfFeatures:"ID array of features",text_label_maxFeatures:"The maximum number of features that can be returned",text_label_bufferDistance:"Buffer distance",text_label_queryRange1:"Query range",text_label_spatialQueryMode:"Spatial query mode",text_label_featureFilter:"Feature filter",text_label_geometricObject:"Geometric object",text_label_queryMode:"Query mode",text_label_searchTips:"Search for city locations or layer features",text_label_chooseSearchLayers:"Select a query layer",text_loadSearchCriteria:"Load search criteria",text_saveSearchCriteria:"Save search criteria",btn_analyze:"Analyze",btn_analyzing:"Analyzing",btn_emptyTheAnalysisLayer:"Empty the analysis layer",btn_cancelAnalysis:"Cancel",btn_query:"Query",btn_querying:"Querying",btn_emptyTheRresultLayer:"Clear all result layers","msg_dataReturnedIsEmpty.":"The request is successful and the data returned by the query is empty.",msg_dataFlowServiceHasBeenSubscribed:"The data stream service has been subscribed to.",msg_inputDataFlowUrlFirst:"Please enter the data stream service address first.",msg_datasetOrMethodUnsupport:"This dataset does not support this analysis type. Please reselect the dataset.",msg_selectDataset:"Please select a data set!",msg_setTheWeightField:"Please set the weight field!",msg_theFieldNotSupportAnalysis:"The field you currently select does not support analysis!",msg_resultIsEmpty:"The result of the analysis is empty!",msg_openFileFail:"Failed to open file!",msg_fileTypeUnsupported:"File format is not supported!",msg_fileSizeExceeded:"File size exceeded! The file size should not exceed 10M!",msg_dataInWrongGeoJSONFormat:"Wrong data format! Non standard GEOJSON format data!",msg_dataInWrongFormat:"Wrong data format! Non standard EXCEL, CSV or GEOJSON format data!",msg_searchKeywords:"Search keywords cannot be empty. Please enter your search criteria.",msg_searchGeocodeField:"Did not match the address matching service data!",msg_cityGeocodeField:"The address matching service of the current city is not configured.",msg_getFeatureField:"No related vector features found!",msg_dataflowservicesubscribed:"The data stream service has been subscribed to.",msg_subscribesucceeded:"The data stream service subscription was successful.",msg_crsunsupport:"Does not support the coordinate system of the current map",msg_tilematrixsetunsupport:"Incoming TileMatrixSet is not supported",msg_jsonResolveFiled:"JSON format parsing failureï¼",msg_requestContentFiled:"Failed to request data through iportal!",msg_getdatafailed:"Failed to get data!"},"zh-CN":{title_dataFlowService:"æ°æ®æµæå¡",title_distributedAnalysis:"åå¸å¼åæ",title_clientComputing:"å®¢æ·ç«¯è®¡ç®",title_dataServiceQuery:"æ°æ®æå¡æ¥è¯¢",title_searchCity:"æç´¢åå¸",title_searchLayer:"æç´¢å¾å±",text_input_value_inputDataFlowUrl:"è¯·è¾å¥æ°æ®æµæå¡å°åå¦:ws://{serviceRoot}/{dataFlowName}/dataflow/subscribe",text_displayFeaturesInfo:"æ¾ç¤ºè¦ç´ ä¿¡æ¯",text_subscribe:"è®¢é",text_cancelSubscribe:"åæ¶è®¢é",text_densityAnalysis:"å¯åº¦åæ",text_CalculateTheValuePerUnitArea:"è®¡ç®ç¹æå®é»åå½¢ç¶åçæ¯åä½é¢ç§¯éå¼",text_option_selectDataset:"è¯·éæ©æ°æ®é",text_label_dataset:"æ°æ®é",text_option_simplePointDensityAnalysis:"ç®åç¹å¯åº¦åæ",text_option_nuclearDensityAnalysis:"æ ¸å¯åº¦åæ",text_label_analyticalMethod:"åææ¹æ³",text_option_quadrilateral:"åè¾¹å½¢",text_option_hexagon:"å­è¾¹å½¢",text_label_meshType:"ç½æ ¼é¢ç±»å",text_option_notSet:"æªè®¾ç½®",text_label_weightField:"æéå­æ®µ",text_label_gridSizeInMeters:"ç½æ ¼å¤§å°",text_label_searchRadius:"æç´¢åå¾",text_label_queryRange:"åæèå´",text_label_areaUnit:"é¢ç§¯åä½",text_option_equidistantSegmentation:"ç­è·ç¦»åæ®µ",text_option_logarithm:"å¯¹æ°",text_option_equalCountingSegment:"ç­è®¡æ°åæ®µ",text_option_squareRootSegmentation:"å¹³æ¹æ ¹åæ®µ",text_label_thematicMapSegmentationMode:"ä¸é¢å¾åæ®µæ¨¡å¼",text_label_thematicMapSegmentationParameters:"ä¸é¢å¾åæ®µåæ°",text_option_greenOrangePurpleGradient:"ç»¿æ©ç´«æ¸å",text_option_greenOrangeRedGradient:"ç»¿æ©çº¢æ¸å",text_option_rainbowGradient:"å½©è¹æ¸å",text_option_spectralGradient:"åè°±æ¸å",text_option_terrainGradient:"å°å½¢æ¸å",text_label_thematicMapColorGradientMode:"ä¸é¢å¾é¢è²æ¸åæ¨¡å¼",text_label_resultLayerName:"ç»æå¾å±åç§°",text_chooseFile:"éæ©æä»¶",text_isoline:"ç­å¼çº¿",text_extractDiscreteValue:"æåç¦»æ£å¼çææ²çº¿",text_buffer:"ç¼å²åº",text_specifyTheDistance:"æå®è·ç¦»åå»ºå¨è¾¹åºå",text_label_analysisLayer:"åæå¾å±",text_label_extractField:"æåå­æ®µ",text_label_extractedValue:"æåå¼",text_label_distanceAttenuation:"è·ç¦»è¡°å",text_label_gridSize:"æ æ ¼å¤§å°",text_label_bufferRadius:"ç¼å²åå¾",text_label_defaultkilometers:"é»è®¤10åç±³",text_option_kilometer:"åç±³",text_label_unit:"åä½",text_retainOriginal:"ä¿çåå¯¹è±¡å­æ®µå±æ§",text_mergeBuffer:"åå¹¶ç¼å²åº",text_label_color:"é¢è²",text_label_buffer:"[ç¼å²åº]",text_label_isolines:"[ç­å¼çº¿]",text_label_queryRangeTips:"é»è®¤ä¸ºè¾å¥æ°æ®çå¨å¹èå´ãèä¾ï¼-74.050,40.650,-73.850,40.850",text_label_IDArrayOfFeatures:"è¦ç´  ID æ°ç»",text_label_maxFeatures:"æå¤å¯è¿åçè¦ç´ æ°é",text_label_bufferDistance:"ç¼å²åºè·ç¦»",text_label_queryRange1:"æ¥è¯¢èå´",text_label_spatialQueryMode:"ç©ºé´æ¥è¯¢æ¨¡å¼",text_label_featureFilter:"è¦ç´ è¿æ»¤å¨",text_label_geometricObject:"å ä½å¯¹è±¡",text_label_queryMode:"æ¥è¯¢æ¨¡å¼",text_label_searchTips:"æç´¢åå¸å°ç¹æå¾å±è¦ç´ ",text_label_chooseSearchLayers:"éæ©æ¥è¯¢å¾å±",text_loadSearchCriteria:"å è½½æç´¢æ¡ä»¶",text_saveSearchCriteria:"ä¿å­æç´¢æ¡ä»¶",btn_analyze:"åæ",btn_analyzing:"åæä¸­",btn_emptyTheAnalysisLayer:"æ¸ç©ºåæå¾å±",btn_cancelAnalysis:"åæ¶",btn_query:"æ¥è¯¢",btn_querying:"æ¥è¯¢ä¸­",btn_emptyTheRresultLayer:"æ¸é¤ææç»æå¾å±",msg_dataFlowServiceHasBeenSubscribed:"å·²è®¢éè¯¥æ°æ®æµæå¡ã",msg_inputDataFlowUrlFirst:"è¯·åè¾å¥æ°æ®æµæå¡å°åã",msg_datasetOrMethodUnsupport:"è¯¥æ°æ®éä¸æ¯ææ¬åæç±»åï¼è¯·éæ°éæ©æ°æ®é",msg_selectDataset:"è¯·éæ©æ°æ®éï¼",msg_setTheWeightField:"è¯·è®¾ç½®æéå­æ®µï¼",msg_theFieldNotSupportAnalysis:"æ¨å½åéæ©çå­æ®µä¸æ¯æåæï¼",msg_resultIsEmpty:"åæçç»æä¸ºç©ºï¼",msg_dataReturnedIsEmpty:"è¯·æ±æåï¼æ¥è¯¢è¿åçæ°æ®ä¸ºç©ºã",msg_openFileFail:"æå¼æä»¶å¤±è´¥ï¼",msg_fileTypeUnsupported:"ä¸æ¯æè¯¥æä»¶æ ¼å¼ï¼",msg_fileSizeExceeded:"æä»¶å¤§å°è¶éï¼æä»¶å¤§å°ä¸å¾è¶è¿ 10Mï¼",msg_dataInWrongGeoJSONFormat:"æ°æ®æ ¼å¼éè¯¯ï¼éæ åç GEOJSON æ ¼å¼æ°æ®ï¼",msg_dataInWrongFormat:"æ°æ®æ ¼å¼éè¯¯ï¼éæ åç EXCEL, CSV æ GEOJSON æ ¼å¼æ°æ®ï¼",msg_searchKeywords:"æç´¢å³é®å­ä¸è½ä¸ºç©ºï¼è¯·è¾å¥æç´¢æ¡ä»¶ã",msg_searchGeocodeField:"æªå¹éå°å°åå¹éæå¡æ°æ®ï¼",msg_cityGeocodeField:"æªéç½®å½ååå¸çå°åå¹éæå¡ã",msg_getFeatureField:"æªæ¥æ¾å°ç¸å³ç¢éè¦ç´ ï¼",msg_dataflowservicesubscribed:"å·²è®¢éè¯¥æ°æ®æµæå¡ã",msg_subscribesucceeded:"æ°æ®æµæå¡è®¢éæåã",msg_crsunsupport:"ä¸æ¯æå½åå°å¾çåæ ç³»",msg_tilematrixsetunsupport:"ä¸æ¯æä¼ å¥çTileMatrixSet",msg_jsonResolveFiled:"jsonæ ¼å¼è§£æå¤±è´¥ï¼",msg_requestContentFiled:"éè¿iportalè¯·æ±æ°æ®å¤±è´¥ï¼",msg_getdatafailed:"è·åæ°æ®å¤±è´¥ï¼"},code:null,defaultCode:"en-US",getCode:function(){return vct.code||vct.setCode(),vct.code},setCode:function(){var t=this.getLanguageFromCookie();t||(t=vct.defaultCode,t="Netscape"===navigator.appName?navigator.language:navigator.browserLanguage),0===t.indexOf("zh")&&(t="zh-CN"),0===t.indexOf("en")&&(t="en-US"),vct.code=t},getLanguageFromCookie:function(){for(var t=document.cookie.split(";"),e=0;e<t.length;e++){for(var r=t[e];" "===r.charAt(0);)r=r.substring(1);if(-1!==r.indexOf("language="))return r.substring("language=".length,r.length)}return""},i18n:function(t){var e=vct[vct.getCode()],r=e&&e[t];return r||(r=t),r}},gct=function(){try{return XLSX}catch(t){return{}}}(),mct={rABS:"undefined"!=typeof FileReader&&FileReader.prototype&&FileReader.prototype.readAsBinaryString,rABF:"undefined"!=typeof FileReader&&FileReader.prototype&&FileReader.prototype.readAsArrayBuffer,rAT:"undefined"!=typeof FileReader&&FileReader.prototype&&FileReader.prototype.readAsText,readFile:function(t,e,r,n,o){cct===t||lct===t?this.readTextFile(e,r,n,o):sct!==t&&uct!==t||this.readXLSXFile(e,r,n,o)},readTextFile:function(t,e,r,n){var o=new FileReader;o.onloadend=function(t){e&&e.call(n,t.target.result)},o.onerror=function(t){r&&r.call(n,t)},this.rAT?o.readAsText(t.file,"utf-8"):o.readAsBinaryString(t.file)},readXLSXFile:function(t,e,r,n){var o=new FileReader;o.onloadend=function(t){var o=new Uint8Array(t.target.result),i=gct.read(o,{type:"array"});try{if(i&&i.SheetNames&&i.SheetNames.length>0){var a=i.SheetNames[0],s=gct.utils.sheet_to_csv(i.Sheets[a]);e&&e.call(n,s)}}catch(t){r&&r.call(n,t)}},o.onerror=function(t){r&&r.call(n,t)},this.rABF&&o.readAsArrayBuffer(t.file)},processDataToGeoJson:function(t,e,r,n,o){var i=null;if("EXCEL"===t||"CSV"===t)i=this.processExcelDataToGeoJson(e),r&&r.call(o,i);else if("JSON"===t||"GEOJSON"===t){var a=e;"string"==typeof a&&(a=JSON.parse(a)),"ISERVER"===a.type?i=a.data.recordsets[0].features:"FeatureCollection"===a.type?i=a:n&&n.call(o,vct.i18n("msg_dataInWrongGeoJSONFormat")),r&&r.call(o,i)}else n&&n.call(o,vct.i18n("msg_dataInWrongFormat"))},processExcelDataToGeoJson:function(t){for(var e=this.string2Csv(t),r=e.colTitles,n=-1,o=-1,i=0,a=r.length;i<a;i++)this.isXField(r[i])&&(n=i),this.isYField(r[i])&&(o=i);for(var s=[],u=0,l=e.rows.length;u<l;u++){var c=e.rows[u],f=Number(c[n]),h=Number(c[o]),p={};for(var d in e.colTitles){p[e.colTitles[d]]=e.rows[u][d]}var y={type:"Feature",geometry:{type:"Point",coordinates:[f,h]},properties:p};s.push(y)}return s},isXField:function(t){var e=t.toLowerCase();return"x"===e||"smx"===e||"jd"===e||"ç»åº¦"===e||"ä¸ç»"===e||"longitude"===e||"lot"===e||"lon"===e||"lng"===e||"xåæ "===e},isYField:function(t){var e=t.toLowerCase();return"y"===e||"smy"===e||"wd"===e||"çº¬åº¦"===e||"åçº¬"===e||"latitude"===e||"lat"===e||"yåæ "===e},string2Csv:function(t,e){var r=t.split("\n"),n={};n.colTitles=e?[]:r[0].split(","),n.rows=[];for(var o=e?0:1;o<r.length;o++)r[o]&&n.rows.push(r[o].split(","));return n}};function bct(t){"@babel/helpers - typeof";return(bct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function wct(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Sct(n.key),n)}}function Sct(t){var e=function(t,e){if("object"!=bct(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=bct(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==bct(e)?e:e+""}var xct=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.datasets=e,this.EVENT_TYPES=["getdatafailed"],this.events=new ea(this,null,this.EVENT_TYPES)},(e=[{key:"getDatasetInfo",value:function(t){var e=this.datasets.url,r=this;tt.get(e).then(function(t){return t.json()}).then(function(e){if(e.datasetInfo){var n=e.datasetInfo;r.datasetsInfo={dataSourceName:n.dataSourceName,datasetName:n.name,mapName:e.name},t({result:r.datasetsInfo})}}).catch(function(t){console.log(t),r._fireFailedEvent(t)})}},{key:"getDataFeatures",value:function(t,e){var r,n,o=t.result,i={name:o.datasetName+"@"+o.dataSourceName};Object.assign(i,this.datasets.queryInfo),r=new EB(i),n=new ZB({queryParameter:r,datasetNames:[o.dataSourceName+":"+o.datasetName],fromIndex:0,toIndex:1e5}),new aF(o.dataUrl).processAsync(n,e)}},{key:"getLayerFeatures",value:function(t,e){var r,n,o=t.result,i={name:o.mapName};Object.assign(i,this.datasets.queryInfo),r=new EB(i),n=new C1({queryParams:[r],expectCount:1e5}),new R1(o.dataUrl).processAsync(n,e)}},{key:"getDataInfoByIptl",value:function(t){this.getServiceInfo(this.datasets.url,t)}},{key:"getServiceInfo",value:function(t,e){var r=this;tt.get(t,null,{withCredentials:this.datasets.withCredentials}).then(function(t){return t.json()}).then(function(n){var o;!1!==n.succeed?n.dataItemServices&&n.dataItemServices.length>0?(n.dataItemServices.forEach(function(n){if("RESTDATA"===n.serviceType&&"PUBLISHED"===n.serviceStatus)o=n;else{if("RESTMAP"!==n.serviceType||"PUBLISHED"!==n.serviceStatus)return void r.getDatafromContent(t,e);o=n}}),o&&r.getDatafromRest(o.serviceType,o.address,e)):r.getDatafromContent(t,e):r._fireFailedEvent(n)}).catch(function(t){console.log(t),r._fireFailedEvent(t)})}},{key:"getDatafromContent",value:function(t,e){var r=this,n={result:{}},o=this;t+="/content.json?pageSize=9999999&currentPage=1",tt.get(t,null,{withCredentials:this.datasets.withCredentials}).then(function(t){return t.json()}).then(function(t){if(!1!==t.succeed){if(t.type){if("JSON"===t.type||"GEOJSON"===t.type){if(t.content=JSON.parse(t.content.trim()),!t.content.features)return void console.log(vct.i18n("msg_jsonResolveFiled"));var i=r._formatGeoJSON(t.content);n.result.features={type:t.content.type,features:i}}else if("EXCEL"===t.type||"CSV"===t.type){var a=r._excelData2Feature(t.content);n.result.features={type:"FeatureCollection",features:a}}e(n,"content")}}else o._fireFailedEvent(t)},this).catch(function(t){console.log(t),o._fireFailedEvent(t)})}},{key:"getDatafromRest",value:function(t,e,r){var n=this,o=this.datasets.withCredentials;if("RESTDATA"===t){var i,a,s="".concat(e,"/data/datasources");tt.get(s,null,{withCredentials:o}).then(function(t){return t.json()}).then(function(t){i=t.datasourceNames[0],s="".concat(e,"/data/datasources/").concat(i,"/datasets"),tt.get(s,null,{withCredentials:o}).then(function(t){return t.json()}).then(function(t){return a=t.datasetNames[0],n.getDatafromRestData("".concat(e,"/data"),[i+":"+a],r),[i+":"+a]}).catch(function(t){n._fireFailedEvent(t)})}).catch(function(t){n._fireFailedEvent(t)})}else{var u,l,c,f="".concat(e,"/maps");tt.get(f,null,{withCredentials:o}).then(function(t){return t.json()}).then(function(t){u=t[0].name,c=t[0].path,f=f="".concat(e,"/maps/").concat(u,"/layers"),tt.get(f,null,{withCredentials:o}).then(function(t){return t.json()}).then(function(t){return l=t[0].subLayers.layers[0].caption,n.getDatafromRestMap(l,c,r),l}).catch(function(t){n._fireFailedEvent(t)})}).catch(function(t){n._fireFailedEvent(t)})}}},{key:"getDatafromRestData",value:function(t,e,r){var n=this;this.datasets.queryInfo.attributeFilter=this.datasets.queryInfo.attributeFilter||"SmID>0",this._getFeatureBySQL(t,e,this.datasets.queryInfo,function(t){r(t,"RESTDATA")},function(t){console.log(t),n._fireFailedEvent(t)})}},{key:"getDatafromRestMap",value:function(t,e,r){var n=this;this.datasets.queryInfo.attributeFilter=this.datasets.queryInfo.attributeFilter||"smid=1",this._queryFeatureBySQL(e,t,this.datasets.queryInfo,null,null,function(t){r(t,"RESTMAP")},function(t){console.log(t),n._fireFailedEvent(t)})}},{key:"_getFeatureBySQL",value:function(t,e,r,n,o){var i,a,s={name:e.join().replace(":","@")};Object.assign(s,r),i=new EB(s),a=new ZB({queryParameter:i,datasetNames:e,fromIndex:0,toIndex:1e5,returnContent:!0}),new aF(t).processAsync(a,function(t){"processCompleted"===t.type?n&&n(t):o&&o(t)})}},{key:"_queryFeatureBySQL",value:function(t,e,r,n,o,i,a,s,u,l){var c,f,h={name:e};Object.assign(h,r),c=new EB(h),n&&(c.fields=n);var p={queryParams:[c]};l&&(p.queryOption=Zr.ATTRIBUTE),s&&(p.startRecord=s),u&&(p.expectCount=u),o&&(p.prjCoordSys={epsgCode:o}),f=new C1(p),this._queryBySQL(t,f,function(t){"processCompleted"===t.type?i(t):a(t)})}},{key:"_queryBySQL",value:function(t,e,r,n){new R1(t,{format:this._processFormat(n)}).processAsync(e,r)}},{key:"_processFormat",value:function(t){return t||Jr.GEOJSON}},{key:"_formatGeoJSON",value:function(t){var e=t.features;return e.forEach(function(t,e){t.properties.index=e}),e}},{key:"_excelData2Feature",value:function(t){for(var e=t.colTitles,r=-1,n=-1,o=0,i=e.length;o<i;o++)mct.isXField(e[o])&&(r=o),mct.isYField(e[o])&&(n=o);for(var a=[],s=0,u=t.rows.length;s<u;s++){var l=t.rows[s],c=Number(l[r]),f=Number(l[n]),h={};for(var p in t.colTitles){h[t.colTitles[p]]=t.rows[s][p]}h.index=s+"";var d={type:"Feature",geometry:{type:"Point",coordinates:[c,f]},properties:h};a.push(d)}return a}},{key:"_fireFailedEvent",value:function(t){var e=t?{error:t,message:vct.i18n("msg_getdatafailed")}:{message:vct.i18n("msg_getdatafailed")};this.events.triggerEvent("getdatafailed",e)}}])&&wct(t.prototype,e),r&&wct(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function _ct(t){"@babel/helpers - typeof";return(_ct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ect(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return Oct(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Oct(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){s=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function Oct(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Pct(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,kct(n.key),n)}}function kct(t){var e=function(t,e){if("object"!=_ct(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=_ct(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==_ct(e)?e:e+""}var Cct=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.datasets=e.datasets,this.xField=[],this.yField=[],this.grid={top:"50px",bottom:"50px",left:"50px",right:"60px"},this.chartType=e.type||"bar",this._initXYField(e.chartOptions),this.EVENT_TYPES=["getdatafailed"],this.events=new ea(this,null,this.EVENT_TYPES)},(e=[{key:"_initXYField",value:function(t){var e=this;t&&t.length>0&&t.forEach(function(t){t.xAxis&&e.xField.push({field:t.xAxis.field,name:t.xAxis.name}),t.yAxis&&e.yField.push({field:t.yAxis.field,name:t.yAxis.name})})}},{key:"getDatasetInfo",value:function(t){var e=this;this.createChart=t,this.datasets&&this._checkUrl(this.datasets.url)&&(this.chartModel=new xct(this.datasets),"iServer"===this.datasets.type?this.chartModel.getDatasetInfo(this._getDatasetInfoSuccess.bind(this)):"iPortal"===this.datasets.type&&this.chartModel.getDataInfoByIptl(this._getDataInfoSuccess.bind(this)),this.chartModel.events.on({getdatafailed:function(t){e.events.triggerEvent("getdatafailed",t)}}))}},{key:"_getDatasetInfoSuccess",value:function(t){var e=this.datasets.url,r=e.indexOf("rest");if(r>0){var n=e.indexOf("/",r+5),o=e.substring(r+5,n),i=e.substring(0,r+4)+"/data";if("maps"===o){var a=e.indexOf("/",n+1),s=e.substring(n+1,a);i=e.substring(0,r+4)+"/maps/"+s,t.result.dataUrl=i,this._getLayerFeatures(t)}else"data"===o&&(t.result.dataUrl=i,this._getDataFeatures(t))}}},{key:"_getDataInfoSuccess",value:function(t,e){"RESTMAP"===e?this._getChartDatasFromLayer(t):this._getChartDatas(t)}},{key:"_getDataFeatures",value:function(t){this.chartModel.getDataFeatures(t,this._getChartDatas.bind(this))}},{key:"_getLayerFeatures",value:function(t){this.chartModel.getLayerFeatures(t,this._getChartDatasFromLayer.bind(this))}},{key:"_getChartDatas",value:function(t){if(t){this.features=t.result.features;var e=this.features.features,r={};if(e.length){var n=e[0],o=[],i=[];for(var a in n.properties)o.push(a),i.push(this._getDataType(n.properties[a]));for(var s in r={features:e,fieldCaptions:o,fieldTypes:i,fieldValues:[]},i){var u=[];for(var l in e){var c=e[l],f=r.fieldCaptions[s],h=c.properties[f];u.push(h)}r.fieldValues.push(u)}this.createChart(r)}}}},{key:"_getChartDatasFromLayer",value:function(t){if(t.result.recordsets){var e=t.result.recordsets[0],r=e.features.features;this.features=e.features;var n={};if(r.length){for(var o in(n={features:e.features,fieldCaptions:e.fieldCaptions,fieldTypes:e.fieldTypes,fieldValues:[]}).fieldCaptions){var i=[];for(var a in r){var s=r[a],u=n.fieldCaptions[o],l=s.properties[u];i.push(l)}n.fieldValues.push(i)}this.createChart(n)}}}},{key:"_createChartOptions",value:function(t){return this.calculatedData=this._createChartDatas(t),this.updateChartOptions(this.chartType)}},{key:"changeType",value:function(t){if(t!==this.chartType)return this.chartType=t,this.updateChartOptions(this.chartType)}},{key:"updateData",value:function(t,e,r){this.updateChart=r,this.xField=[],this.yField=[],this._initXYField(e),t.type=t.type||"iServer",t.withCredentials=t.withCredentials||!1,this.datasets=t,this.getDatasetInfo(this._updateDataSuccess.bind(this))}},{key:"_updateDataSuccess",value:function(t){var e=this._createChartOptions(t);this.updateChart(e)}},{key:"updateChartOptions",value:function(t,e){if(this.calculatedData){var r=this.grid,n=this._createChartSeries(this.calculatedData,t),o=[];for(var i in this.calculatedData.XData)o.push({value:this.calculatedData.XData[i].fieldsData});var a={type:"category",name:this.xField[0].name||"X",data:o,nameTextStyle:{color:"#fff",fontSize:14},splitLine:{show:!1},axisLine:{lineStyle:{color:"#eee"}}},s={type:"value",name:this.yFieldName||"Y",data:{},nameTextStyle:{color:"#fff",fontSize:14},splitLine:{show:!1},axisLine:{lineStyle:{color:"#eee"}}},u={formatter:"{b0}: {c0}"},l="#404a59";return e&&(e.grid&&(r=e.grid),e.tooltip&&(u=e.tooltip),e.backgroundColor&&(l=e.backgroundColor)),{backgroundColor:l,grid:r,series:n,xAxis:a,yAxis:s,tooltip:u}}}},{key:"_createChartDatas",value:function(t){var e=0,r=[],n=t.fieldCaptions,o=this;n.forEach(function(t,r){o.xField[0]&&t===o.xField[0].field&&(e=r)}),this.yFieldName="",this.yField.forEach(function(t,e){0!==e&&(o.yFieldName=o.yFieldName+","),o.yFieldName=o.yFieldName+t.name,n.forEach(function(e,n){e===t.field&&r.push(n)})});var i=this._getAttrData(t,e),a=[];if(r.length>0)r.forEach(function(e){var r=[];for(var n in t.fieldValues[e])r.push({value:t.fieldValues[e][n]});a.push(r)});else{for(var s=[],u=[],l=i.length,c=0;c<l;c++){for(var f=!1,h=0,p=u.length;h<p;h++)if(i[c].fieldsData===u[h].fieldsData){s[h].value++,u[h].recordIndexs.push(c),f=!0;break}f||i[c].fieldsData&&(u.push({fieldsData:i[c].fieldsData,recordIndexs:[c]}),s.push({value:1}))}i=u,a=[s]}return{XData:i,YData:a}}},{key:"_getAttrData",value:function(t,e){0===e&&(this.xField=[{field:t.fieldCaptions[e],name:t.fieldCaptions[e]}]);for(var r=[],n=0,o=t.fieldValues[e].length;n<o;n++){var i=t.fieldValues[e][n];r.push({recordIndexs:n,fieldsData:i})}return r}},{key:"_createChartSeries",value:function(t,e){var r=[];return t.YData.forEach(function(t){var n,o=0,i=[],a=Ect(t);try{for(a.s();!(n=a.n()).done;){o=n.value.value,i.push({value:o})}}catch(t){a.e(t)}finally{a.f()}var s={type:e,data:i,name:"y"};r.push(s)}),r}},{key:"_isDate",value:function(t){return/((^((1[8-9]\d{2})|([2-9]\d{3}))([-\/\._])(10|12|0?[13578])([-\/\._])(3[01]|[12][0-9]|0?[1-9])$)|(^((1[8-9]\d{2})|([2-9]\d{3}))([-\/\._])(11|0?[469])([-\/\._])(30|[12][0-9]|0?[1-9])$)|(^((1[8-9]\d{2})|([2-9]\d{3}))([-\/\._])(0?2)([-\/\._])(2[0-8]|1[0-9]|0?[1-9])$)|(^([2468][048]00)([-\/\._])(0?2)([-\/\._])(29)$)|(^([3579][26]00)([-\/\._])(0?2)([-\/\._])(29)$)|(^([1][89][0][48])([-\/\._])(0?2)([-\/\._])(29)$)|(^([2-9][0-9][0][48])([-\/\._])(0?2)([-\/\._])(29)$)|(^([1][89][2468][048])([-\/\._])(0?2)([-\/\._])(29)$)|(^([2-9][0-9][2468][048])([-\/\._])(0?2)([-\/\._])(29)$)|(^([1][89][13579][26])([-\/\._])(0?2)([-\/\._])(29)$)|(^([2-9][0-9][13579][26])([-\/\._])(0?2)([-\/\._])(29)$))/gi.test(t)}},{key:"_isNumber",value:function(t){var e=Number(t);return 0===e||!isNaN(e)}},{key:"_getDataType",value:function(t){if(null!==t&&void 0!==t&&""!==t){if(this._isDate(t))return"DATE";if(this._isNumber(t))return"NUMBER"}return"STRING"}},{key:"_checkUrl",value:function(t){return!(""===t||!this._isMatchUrl(t))&&(!/^http[s]?:\/\/localhost/.test(t)&&!/^http[s]?:\/\/127.0.0.1/.test(t))}},{key:"_isMatchUrl",value:function(t){return new RegExp("(https?|http|file|ftp)://[-A-Za-z0-9+&@#/%?=~_|!:,.;]+[-A-Za-z0-9+&@#/%=~_|]").test(t)}},{key:"getStyle",value:function(){return{grid:this.grid,tooltip:this.tooltip,backgroundColor:this.backgroundColor}}},{key:"getFeatures",value:function(){return this.features}},{key:"setStyle",value:function(t){return this.updateChartOptions(this.chartType,t)}}])&&Pct(t.prototype,e),r&&Pct(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function Tct(t){"@babel/helpers - typeof";return(Tct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Act(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Mct(n.key),n)}}function Mct(t){var e=function(t,e){if("object"!=Tct(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Tct(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Tct(e)?e:e+""}var jct=function(){return t=function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.domID=e,this.chartType=r.type||"bar",r.datasets.type=r.datasets.type||"iServer",r.datasets.withCredentials=r.datasets.withCredentials||!1,this.viewModel=new Cct(r),this._fillDataToView()},(e=[{key:"onAdd",value:function(t){this.addChart=t}},{key:"_fillDataToView",value:function(){var t=new dct;this.viewModel.getDatasetInfo(this._createChart.bind(this)),this.viewModel.events.on({getdatafailed:function(e){t.showView(e.message)}})}},{key:"getStyle",value:function(){return this.viewModel.getStyle()}},{key:"getFeatures",value:function(){return this.viewModel.getFeatures()}},{key:"setStyle",value:function(t){var e=this.viewModel.setStyle(t);this._updateChart(e)}},{key:"changeType",value:function(t){if(this.chartType!==t){this.chartType=t;var e=this.viewModel.changeType(t);this._updateChart(e)}}},{key:"updateData",value:function(t,e){var r=this;this.viewModel.updateData(t,e,function(t){r._updateChart(t),r.addChart&&r.addChart()})}},{key:"_createChart",value:function(t){this.echart=yct.init(document.getElementById(this.domID),null,{renderer:"canvas"});var e=this.viewModel._createChartOptions(t);this.echart.setOption(e),this.addChart&&this.addChart()}},{key:"_updateChart",value:function(t){this.echart&&(this.echart.clear(),this.echart.setOption(t))}}])&&Act(t.prototype,e),r&&Act(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function Ict(t){"@babel/helpers - typeof";return(Ict="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Nct(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Lct(n.key),n)}}function Lct(t){var e=function(t,e){if("object"!=Ict(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Ict(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Ict(e)?e:e+""}var Rct=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},this.id=e.id?e.id:null,this.rootContainer=null},(e=[{key:"getElement",value:function(){return this.id&&(this.rootContainer.id=this.id),this.rootContainer}},{key:"_initView",value:function(){}},{key:"showView",value:function(){this.rootContainer.hidden=!1}},{key:"closeView",value:function(){this.rootContainer.hidden=!0}}])&&Nct(t.prototype,e),r&&Nct(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function Dct(t){"@babel/helpers - typeof";return(Dct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Bct(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Fct(n.key),n)}}function Fct(t){var e=function(t,e){if("object"!=Dct(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Dct(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Dct(e)?e:e+""}function Gct(t,e,r){return e=Uct(e),function(t,e){if(e&&("object"===Dct(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Uct(t).constructor):e.apply(t,r))}function Uct(t){return(Uct=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function zct(t,e){return(zct=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Vct=function(t){function e(t){var r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r=Gct(this,e,[t]);var n=t.title?t.title:"";return r._initView(n),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&zct(t,e)}(e,Rct),r=e,(n=[{key:"_initView",value:function(t){var e=document.createElement("div");e.setAttribute("class","component-container");var r=document.createElement("div");r.setAttribute("class","component-title");var n=document.createElement("div");n.innerHTML=t,r.appendChild(n),e.appendChild(r);var o=document.createElement("div");return o.setAttribute("class","component-content"),e.appendChild(o),this.content=o,this.rootContainer=e,e}},{key:"getContentElement",value:function(){return this.content}},{key:"appendContent",value:function(t){this.content.appendChild(t)}}])&&Bct(r.prototype,n),o&&Bct(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function Hct(t){"@babel/helpers - typeof";return(Hct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Wct(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,qct(n.key),n)}}function qct(t){var e=function(t,e){if("object"!=Hct(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Hct(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Hct(e)?e:e+""}function Yct(t,e,r){return e=Xct(e),function(t,e){if(e&&("object"===Hct(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Xct(t).constructor):e.apply(t,r))}function Xct(t){return(Xct=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Jct(t,e){return(Jct=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Kct=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=Yct(this,e,[t]))._initView(t),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Jct(t,e)}(e,Rct),r=e,(n=[{key:"_initView",value:function(t){var e=this._createElement("div","component-selecttool");t.labelName&&(this._createElement("label","component-selecttool__lable--describe",e).innerHTML=t.labelName);var r=this._createElement("div","component-selecttool--chart",e);r.setAttribute("tabindex","1");var n=this._createElement("div","component-selecttool__name",r);n.title=t.optionsArr[0],n.innerHTML=t.optionsArr[0];var o=this._createElement("div","component-selecttool__trianglebtn--chart",r),i=this._createElement("div","component-triangle-down-img",o),a=this._createElement("div","component-selecttool__content",r),s=this._createElement("div","component-selecttool__content--chart",a),u=this._createElement("div","component-selecttool__scrollarea__content",s);u.setAttribute("tabindex","1"),this.createOptions(u,t.optionsArr),this.optionClickEvent(u,n,t.optionsClickCb),this._selectClickEvent(r,a,i),this.rootContainer=e}},{key:"createOptions",value:function(t,e){for(var r in e){var n=this._createElement("div","component-selecttool__option",t);n.title=e[r],n.innerHTML=e[r]}}},{key:"_selectClickEvent",value:function(t,e,r){t.onclick=function(t){"block"===e.style.display?(e.style.display="none",r.className="component-triangle-down-img"):(e.style.display="block",r.className="triangle-up-img"),t.preventDefault(),t.stopPropagation()},t.onmousedown=function(t){t.target!==this&&(this.focus(),t.preventDefault(),t.stopPropagation())},t.onblur=function(){e.style.display="none",r.className="component-triangle-down-img"}}},{key:"_createElement",value:function(t,e,r){var n=document.createElement(t||"div");return e&&(n.className=e),r&&r.appendChild(n),n}},{key:"optionClickEvent",value:function(t,e,r){for(var n=function(){var n=t.children[o];n.onclick=function(){e.innerHTML=n.innerHTML,e.title=n.title,n.getAttribute("data-value")&&e.setAttribute("data-value",n.getAttribute("data-value")),r&&r(n)}},o=0;o<t.children.length;o++)n()}}])&&Wct(r.prototype,n),o&&Wct(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function Qct(t){"@babel/helpers - typeof";return(Qct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Zct(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,$ct(n.key),n)}}function $ct(t){var e=function(t,e){if("object"!=Qct(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Qct(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Qct(e)?e:e+""}function tft(t,e,r){return e=eft(e),function(t,e){if(e&&("object"===Qct(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],eft(t).constructor):e.apply(t,r))}function eft(t){return(eft=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function rft(t,e){return(rft=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var nft=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=tft(this,e,[t]))._initView(t),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&rft(t,e)}(e,Rct),r=e,(n=[{key:"_initView",value:function(t){var e=document.createElement("div");e.className="component-dropdownbox--container";var r=document.createElement("div");r.setAttribute("tabindex","1"),r.className="component-dropdownbox",e.appendChild(r);var n=document.createElement("div");r.appendChild(n),this._createDropDownOption(t[0],n);var o=document.createElement("div");o.className="component-dropdownbox__triangle-btn",r.appendChild(o);var i=document.createElement("div");i.className="component-triangle-down-img",o.appendChild(i);var a={parentEle:r,dropDownContent:["component-dropdownbox__content component-dropdownbox__content--chart","dropDownContent"],scrollareaContent:"component-selecttool__scrollarea__content",optionsArr:t,triangleBtn:i,dropDownTopContainer:n};this._createDropDownBox(a),this.rootContainer=e}},{key:"_createDropDownBox",value:function(t){var e=t.parentEle,r=t.dropDownTopContainer,n=document.createElement("div");n.className=t.dropDownContent[0],e.appendChild(n);var o=document.createElement("div");o.className=t.scrollareaContent,n.appendChild(o);for(var i=t.optionsArr,a=0;a<i.length;a++)this._createDropDownOption(i[a],o);var s=t.triangleBtn;this._dropDownClickEvent(e,n,s),this._eleOnblur(e,n,s);for(var u=o.children,l=function(t){u[t].onclick=function(){r.innerHTML=u[t].outerHTML}},c=0;c<u.length;c++)l(c)}},{key:"_createDropDownOption",value:function(t,e){var r=document.createElement("div");r.className="component-dropdownbox__item";var n=t;n.dataValue&&r.setAttribute("data-value",n.dataValue),e.appendChild(r);var o=document.createElement("div");o.className="component-dropdownbox__item__img",r.appendChild(o);var i=document.createElement("div");n.icon.className&&(i.className=n.icon.className),n.icon.background&&(i.style.background=n.icon.background),o.appendChild(i);var a=document.createElement("div");a.className="component-dropdownbox__item__title",a.title=n.title,a.innerHTML=n.title,r.appendChild(a);var s=document.createElement("div");s.className="component-dropdownbox__item__remark",s.title=n.remark,s.innerHTML=n.remark,r.appendChild(s)}},{key:"_dropDownClickEvent",value:function(t,e,r){t.onclick=function(t){"block"===e.style.display?(e.style.display="none",r.className="component-triangle-down-img"):(e.style.display="block",r.className="triangle-up-img"),t.preventDefault(),t.stopPropagation()},t.onmousedown=function(t){t.target!==this&&(this.focus(),t.preventDefault(),t.stopPropagation())}}},{key:"_eleOnblur",value:function(t,e,r){t.onblur=function(){e.style.display="none",r.className="component-triangle-down-img"}}},{key:"_createElement",value:function(t,e,r){var n=document.createElement(t||"div");return e&&(n.className=e),r&&r.appendChild(n),n}}])&&Zct(r.prototype,n),o&&Zct(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function oft(t){"@babel/helpers - typeof";return(oft="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ift(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,aft(n.key),n)}}function aft(t){var e=function(t,e){if("object"!=oft(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=oft(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==oft(e)?e:e+""}function sft(t,e,r){return e=uft(e),function(t,e){if(e&&("object"===oft(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],uft(t).constructor):e.apply(t,r))}function uft(t){return(uft=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function lft(t,e){return(lft=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var cft=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r=sft(this,e,[t=t||{}]),t.title=t.title?t.title:"",r._initView(t.title),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&lft(t,e)}(e,Rct),r=e,(n=[{key:"_initView",value:function(t){var e=document.createElement("div");e.setAttribute("class","component-popcontainer");var r=document.createElement("div");r.setAttribute("class","component-popcontainer__header");var n=document.createElement("label");n.setAttribute("class","component-popcontainer__header__title"),n.innerHTML=t,r.appendChild(n);var o=document.createElement("span");o.setAttribute("class","supermapol-icons-clear component-popcontainer__header__close"),o.onclick=this.closeView.bind(this),e.appendChild(o),e.appendChild(r);var i=document.createElement("div");i.setAttribute("class","component-popcontainer__content"),this.content=i,e.appendChild(i),this.rootContainer=e}},{key:"appendContent",value:function(t){this.content.appendChild(t)}}])&&ift(r.prototype,n),o&&ift(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function fft(t){"@babel/helpers - typeof";return(fft="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function hft(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,pft(n.key),n)}}function pft(t){var e=function(t,e){if("object"!=fft(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=fft(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==fft(e)?e:e+""}function dft(t,e,r){return e=yft(e),function(t,e){if(e&&("object"===fft(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],yft(t).constructor):e.apply(t,r))}function yft(t){return(yft=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function vft(t,e){return(vft=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var gft=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t.title=t.title?t.title:"å±æ§",(r=dft(this,e,[t])).rootContainer.firstChild.hidden=!0,t.attributes=t.attributes?t.attributes:[],r._createAttributesTable(t.attributes),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&vft(t,e)}(e,cft),r=e,(n=[{key:"_createAttributesTable",value:function(t){var e=document.createElement("table");e.setAttribute("class","component-popcontainer__content__table");var r=document.createElement("tbody"),n=!0;for(var o in t){var i=document.createElement("tr");n&&i.setAttribute("class","component-popcontainer__content__td--color");var a=document.createElement("td"),s=document.createElement("Span");s.innerHTML=o,a.appendChild(s);var u=document.createElement("td");u.innerHTML=t[o],i.appendChild(a),i.appendChild(u),r.appendChild(i),n=!n}e.appendChild(r),this.appendContent(e)}}])&&hft(r.prototype,n),o&&hft(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function mft(t){"@babel/helpers - typeof";return(mft="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function bft(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,wft(n.key),n)}}function wft(t){var e=function(t,e){if("object"!=mft(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=mft(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==mft(e)?e:e+""}function Sft(t,e,r){return e=xft(e),function(t,e){if(e&&("object"===mft(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],xft(t).constructor):e.apply(t,r))}function xft(t){return(xft=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _ft(t,e){return(_ft=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Eft=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=Sft(this,e,[t]))._initView(),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_ft(t,e)}(e,Rct),r=e,(n=[{key:"_initView",value:function(){var t=document.createElement("div");t.setAttribute("class","component-tabpage");var e=document.createElement("ul");this.header=e;var r=document.createElement("div");r.setAttribute("class","component-tabpage__content"),this.content=r,t.appendChild(e),t.appendChild(r),this.rootContainer=t}},{key:"setTabs",value:function(t){this.removeAllTabs(),this.appendTabs(t)}},{key:"appendTabs",value:function(t){for(var e=0;e<t.length;e++){var r=document.createElement("span");r.index=e,r.appendChild(document.createTextNode(t[e].title)),r.onclick=this._changeTabsPage.bind(this);var n=t[e].content;n.index=e,n.hidden=!0,this.header.appendChild(r),this.content.appendChild(n)}this.header.firstChild.setAttribute("class","on"),this.content.firstChild.hidden=!1}},{key:"removeTab",value:function(t){this.header.removeChild(this.header.children[t]),this.content.removeChild(this.content.children[t])}},{key:"removeAllTabs",value:function(){for(var t=this.header.children.length;t>0;t--)this.header.removeChild(this.header.children[t]),this.content.removeChild(this.content.children[t])}},{key:"_changeTabsPage",value:function(t){for(var e=t.target.index,r=0;r<this.header.children.length;r++)this.header.children[r].setAttribute("class",""),this.content.children[r].hidden=!0,r===e&&(this.header.children[r].setAttribute("class","on"),this.content.children[r].hidden=!1)}}])&&bft(r.prototype,n),o&&bft(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function Oft(t){"@babel/helpers - typeof";return(Oft="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Pft(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,kft(n.key),n)}}function kft(t){var e=function(t,e){if("object"!=Oft(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Oft(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Oft(e)?e:e+""}function Cft(t,e,r){return e=Tft(e),function(t,e){if(e&&("object"===Oft(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Tft(t).constructor):e.apply(t,r))}function Tft(t){return(Tft=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Aft(t,e){return(Aft=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Mft=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=Cft(this,e,[t])).rootContainer.classList.add("component-citytabpage--noneBoxShadow"),r.config=t.config,W.isArray(r.config)?(r.header.hidden=!0,r._createCityItem("åå¸",r.config),r.content.style.border="none"):(r._createTabs(),r.header.onclick=function(t){for(var e=0;e<r.header.children.length;e++)r.header.children[e].setAttribute("class","");t.target.setAttribute("class","on"),r._createCityContent(t.target.innerHTML)}),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Aft(t,e)}(e,Eft),r=e,(n=[{key:"_createTabs",value:function(){if(W.isArray(this.config))for(var t=0;t<this.config.length;t++){var e="";for(var r in this.config[t])e+=r;var n=document.createElement("li");n.innerHTML=e,this.header.appendChild(n)}else for(var o in this.config){var i=document.createElement("li");i.innerHTML=o,this.header.appendChild(i)}this.header.firstChild.setAttribute("class","on"),this._createCityContent(this.header.firstChild.innerHTML)}},{key:"_createCityContent",value:function(t){for(var e=this.content.children.length;e>0;e--)this.content.removeChild(this.content.children[e-1]);var r=this.config[t];for(var n in r)this._createCityItem(n,r[n])}},{key:"_createCityItem",value:function(t,e){var r=document.createElement("div"),n=document.createElement("div");n.setAttribute("class","component-citytabpag__py-key"),n.innerHTML=t,r.appendChild(n);var o=document.createElement("div");o.setAttribute("class","component-citytabpag__content");for(var i=0;i<e.length;i++){var a=document.createElement("span");a.innerHTML=e[i],o.appendChild(a)}"HOT"===t&&(o.style.width="428px"),r.appendChild(o),this.content.appendChild(r)}}])&&Pft(r.prototype,n),o&&Pft(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function jft(t){"@babel/helpers - typeof";return(jft="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ift(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Nft(n.key),n)}}function Nft(t){var e=function(t,e){if("object"!=jft(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=jft(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==jft(e)?e:e+""}function Lft(t,e,r){return e=Rft(e),function(t,e){if(e&&("object"===jft(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Rft(t).constructor):e.apply(t,r))}function Rft(t){return(Rft=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Dft(t,e){return(Dft=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Bft=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=Lft(this,e,[t])).navTabsTitle=null,r.navTabsContent=null,t.tabs=t.tabs?t.tabs:[],r._initView(t.tabs),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Dft(t,e)}(e,Rct),r=e,(n=[{key:"_initView",value:function(t){var e=document.createElement("div");e.setAttribute("class","component-navtabspage");var r=document.createElement("span");r.setAttribute("class","supermapol-icons-close"),r.onclick=this.closeView.bind(this),e.appendChild(r);var n=document.createElement("div");this.navTabsTitle=n,n.setAttribute("class","component-navtabspage__title"),e.appendChild(n);var o=document.createElement("div");this.navTabsContent=o,o.setAttribute("class","component-navtabspage__content"),e.appendChild(o),t.length>0&&this.appendTabs(t),this.rootContainer=e}},{key:"setTabs",value:function(t){this.removeAllTabs(),this.appendTabs(t)}},{key:"appendTabs",value:function(t){for(var e=0;e<t.length;e++){var r=document.createElement("span");r.index=e,r.appendChild(document.createTextNode(t[e].title)),r.onclick=this._changeTabsPage.bind(this);var n=t[e].content;n.index=e,n.hidden=!0,this.navTabsTitle.appendChild(r),this.navTabsContent.appendChild(n)}this.navTabsTitle.firstChild.setAttribute("class","component-navtabspage__tabs--select"),this.navTabsContent.firstChild.hidden=!1}},{key:"removeTab",value:function(t){this.navTabsTitle.removeChild(this.navTabsTitle.children[t]),this.navTabsContent.removeChild(this.navTabsContent.children[t])}},{key:"removeAllTabs",value:function(){for(var t=this.navTabsTitle.children.length;t>0;t--)this.navTabsTitle.removeChild(this.navTabsTitle.children[t]),this.navTabsContent.removeChild(this.navTabsContent.children[t])}},{key:"_changeTabsPage",value:function(t){for(var e=t.target.index,r=0;r<this.navTabsTitle.children.length;r++)this.navTabsTitle.children[r].setAttribute("class",""),this.navTabsContent.children[r].hidden=!0,r===e&&(this.navTabsTitle.children[r].setAttribute("class","component-navtabspage__tabs--select"),this.navTabsContent.children[r].hidden=!1)}}])&&Ift(r.prototype,n),o&&Ift(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function Fft(t){"@babel/helpers - typeof";return(Fft="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Gft(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Uft(n.key),n)}}function Uft(t){var e=function(t,e){if("object"!=Fft(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Fft(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Fft(e)?e:e+""}function zft(t,e,r){return e=Vft(e),function(t,e){if(e&&("object"===Fft(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Vft(t).constructor):e.apply(t,r))}function Vft(t){return(Vft=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Hft(t,e){return(Hft=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Wft=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=zft(this,e,[t=t||{}])).currentPage=0,r.pageNumberLis=[],r.currentPageNumberLis=[],r.linkageEvent=null,t.contents=t.contents?t.contents:null,t.pageCounts=t.pageCounts?t.pageCounts:0,r._initView(t.contents,t.pageCounts),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Hft(t,e)}(e,Rct),r=e,(n=[{key:"setLinkageEvent",value:function(t){this.linkageEvent=t}},{key:"_initView",value:function(t,e){var r=document.createElement("div");r.setAttribute("class","component-pagination");var n=document.createElement("div");n.setAttribute("class","component-pagination__content"),r.appendChild(n),this.content=n;var o=document.createElement("ul");o.setAttribute("class","component-pagination__link"),o.onclick=this._changePageEvent.bind(this),r.appendChild(o),this._createLink(o),this.link=o,t&&this.setContent(t),0!==e&&this.setPageLink(e),this.rootContainer=r}},{key:"setContent",value:function(t){this.clearContent(),this.appendContent(t)}},{key:"appendContent",value:function(t){this.content.appendChild(t)}},{key:"clearContent",value:function(){for(var t=this.content.children.length-1;t>=0;t--)this.content.removeChild(this.content.children[t])}},{key:"setPageLink",value:function(t){this.pageNumberLis=[],this.currentPageNumberLis=[],this.clearPageLink(),this._createPageLi(t),this._appendPageLink()}},{key:"_createPageLi",value:function(t){for(var e=0;e<t;e++){var r=document.createElement("li");r.innerHTML=e+1,this.pageNumberLis.push(r)}if(this.pageNumberLis[0].setAttribute("class","active"),this.currentPage=1,t<5)this.currentPageNumberLis=this.pageNumberLis;else for(var n=0;n<5;n++)this.currentPageNumberLis.push(this.pageNumberLis[n])}},{key:"_appendPageLink",value:function(){for(var t=0;t<this.currentPageNumberLis.length;t++)this.link.insertBefore(this.currentPageNumberLis[t],this.link.childNodes[this.link.children.length-2]);for(var e=0;e<this.currentPageNumberLis.length;e++)this.currentPageNumberLis[e].setAttribute("class",""),Number(this.currentPageNumberLis[e].innerHTML)===this.currentPage&&this.currentPageNumberLis[e].setAttribute("class","active");this._changeDisableState(),this.linkageEvent&&this.linkageEvent(this.currentPage)}},{key:"clearPageLink",value:function(){for(var t=this.link.children.length-3;t>1;t--)this.link.removeChild(this.link.children[t])}},{key:"_createLink",value:function(t){for(var e=0;e<4;e++){var r=document.createElement("li");r.setAttribute("class","disable");var n=document.createElement("span");r.appendChild(n),0===e?(n.id="first",n.setAttribute("class","supermapol-icons-first")):1===e?(n.id="prev",n.setAttribute("class","supermapol-icons-prev")):2===e?(n.id="next",n.setAttribute("class","supermapol-icons-next")):3===e&&(n.id="last",n.setAttribute("class","supermapol-icons-last")),t.appendChild(r)}}},{key:"_changePageEvent",value:function(t){var e=t.target;if("disable"!==e.parentElement.classList[0]){var r;if(e.id)r=e.id;else{if(!Number(e.innerHTML))return;r=Number(e.innerHTML)}this._prePageNum(r),this.clearPageLink(),this._appendPageLink()}}},{key:"_changeDisableState",value:function(){this.link.children[0].setAttribute("class",""),this.link.children[1].setAttribute("class",""),this.link.children[this.link.children.length-1].setAttribute("class",""),this.link.children[this.link.children.length-2].setAttribute("class",""),1===this.currentPage&&(this.link.children[0].setAttribute("class","disable"),this.link.children[1].setAttribute("class","disable")),this.currentPage===this.pageNumberLis.length&&(this.link.children[this.link.children.length-1].setAttribute("class","disable"),this.link.children[this.link.children.length-2].setAttribute("class","disable"))}},{key:"_prePageNum",value:function(t){var e=[];if(this.currentPage="first"===t?1:"last"===t?this.pageNumberLis.length:"prev"===t?this.currentPage-1:"next"===t?this.currentPage+1:t,this.pageNumberLis.length<=5)for(var r=0;r<this.pageNumberLis.length;r++)e.push(this.pageNumberLis[r]);else if(this.currentPage<=3)for(var n=0;n<5;n++)e.push(this.pageNumberLis[n]);else if(this.currentPage>=this.pageNumberLis.length-3)for(var o=this.pageNumberLis.length-5;o<this.pageNumberLis.length;o++)e.push(this.pageNumberLis[o]);else for(var i=this.currentPage-3;i<=this.currentPage+1;i++)e.push(this.pageNumberLis[i]);e.length>0&&(this.currentPageNumberLis=e)}}])&&Gft(r.prototype,n),o&&Gft(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function qft(t){"@babel/helpers - typeof";return(qft="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Yft(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function Xft(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Yft(Object(r),!0).forEach(function(e){Jft(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Yft(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function Jft(t,e,r){var n;return(e="symbol"==qft(n=function(t,e){if("object"!=qft(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=qft(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"))?n:n+"")in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Kft(t){var e,r=(e={},["(",")","ï¼","ï¼",",","ï¼"].forEach(function(t,r){e[t]="$".concat(r)}),e);for(var n in r)for(var o=r[n],i=new RegExp("\\".concat(n),"g");i.test(t);)t=t.replace(i,o);return t}function Qft(t,e){var r=t;return t.replace(/&|\||>|<|=|!/g," ").split(" ").filter(function(t){return t}).forEach(function(t){var n=e.find(function(e){return e===t});if($ft(t)&&n&&(r=r.replace(n,"$"+n)),n){var o=Kft(n);r=r.replace(n,o)}}),r}function Zft(t){var e={};for(var r in t){var n=r;$ft(r)&&(n="$"+r),e[n=Kft(n)]=t[r]}return e}function $ft(t){return/^\d/.test(t)}uet.Lang=vct,uet.i18n=uet.Lang.i18n,uet.Util=Xft(Xft({},uet.Util),W),uet.Browser=z,uet.INCHES_PER_UNIT=q,uet.METERS_PER_INCH=Y,uet.DOTS_PER_INCH=96,uet.IS_GECKO=H,uet.setCORS=function(t){X=t},uet.isCORS=Z,uet.setRequestTimeout=function(t){return J=t},uet.getRequestTimeout=$,uet.FetchRequest=tt,uet.EncryptRequest=pt,uet.getServiceKey=dt,uet.GeometryAnalysis=Tut,uet.inherit=function(t,e){var r,n,o,i=function(){};for(i.prototype=e.prototype,t.prototype=new i,r=2,n=arguments.length;r<n;r++)"function"==typeof(o=arguments[r])&&(o=o.prototype),W.extend(t.prototype,o)},uet.mixin=k,uet.String=C,uet.Number=T,uet.Function=A,uet.Array=M,uet.Date=Ki,uet.Event=Qi,uet.Bounds=Gt,uet.Credential=Ji,uet.Events=ea,uet.Feature=Ve,uet.Geometry=L,uet.Geometry3D=ua,uet.Pixel=jt,uet.Size=Ct,uet.Feature.Vector=er,uet.Geometry.Collection=re,uet.Geometry.Curve=ve,uet.Geometry.GeoText=so,uet.Geometry.LinearRing=je,uet.Geometry.LineString=Ee,uet.Geometry.MultiLineString=br,uet.Geometry.MultiPoint=le,uet.Geometry.MultiPolygon=Pr,uet.Geometry.Point=Xt,uet.Geometry.Polygon=Fe,uet.Geometry.Rectangle=Wi,uet.Components.Chart=jct,uet.Components.ChartViewModel=Cct,uet.Components.MessageBox=dct,uet.Components.AttributesPopContainer=gft,uet.Components.CityTabsPage=Mft,uet.Components.CommonContainer=Vct,uet.Components.DropDownBox=nft,uet.Components.IndexTabsPageContainer=Eft,uet.Components.NavTabsPage=Bft,uet.Components.PaginationContainer=Wft,uet.Components.PopContainer=cft,uet.Components.Select=Kct,uet.Components.TemplateBase=Rct,uet.Components.FileReaderUtil=mct,uet.TimeControlBase=wet,uet.TimeFlowControl=Tet,uet.Format=uet.Format||ir,uet.Format.GeoJSON=Kn,uet.Format.JSON=hr,uet.Format.WKT=vet,uet.iManager=Het,uet.iManagerCreateNodeParam=Det,uet.iManagerServiceBase=Iet,uet.iPortal=wrt,uet.iPortalAddDataParam=Rrt,uet.iPortalAddResourceParam=Crt,uet.iPortalDataConnectionInfoParam=Xrt,uet.iPortalDataMetaInfoParam=Grt,uet.iPortalDataStoreInfoParam=Hrt,uet.iPortalQueryParam=Zet,uet.iPortalQueryResult=rrt,uet.iPortalRegisterServiceParam=jrt,uet.iPortalResource=lrt,uet.iPortalServiceBase=Xet,uet.iPortalShareEntity=Ert,uet.iPortalShareParam=prt,uet.iPortalUser=ent,uet.AddressMatchService=KL,uet.AggregationParameter=int,uet.AreaSolarRadiationParameters=S2,uet.AreaSolarRadiationService=T2,uet.AttachmentsParameters=oG,uet.BucketAggParameter=hnt,uet.BufferAnalystParameters=U2,uet.BufferAnalystService=y3,uet.BufferDistance=I2,uet.BuffersAnalystJobsParameter=H$,uet.BuffersAnalystJobsService=Z$,uet.BufferSetting=D2,uet.BurstPipelineAnalystParameters=sY,uet.BurstPipelineAnalystService=yY,uet.ChartFeatureInfoSpecsService=jR,uet.ChartAcronymClassifyService=GR,uet.ChartQueryFilterParameter=fR,uet.ChartQueryParameters=yR,uet.ChartQueryService=ER,uet.ChartSetting=Ent,uet.ClipParameter=Cnt,uet.ColorDictionary=RH,uet.CommonServiceBase=bv,uet.ComputeWeightMatrixParameters=kY,uet.ComputeWeightMatrixService=LY,uet.CreateDatasetParameters=ED,uet.DataFlowService=oD,uet.DataReturnOption=W2,uet.DatasetBufferAnalystParameters=$2,uet.DatasetInfo=vH,uet.DatasetOverlayAnalystParameters=y4,uet.DatasetService=wD,uet.DatasetSurfaceAnalystParameters=g6,uet.DatasetThiessenAnalystParameters=L8,uet.DatasourceConnectionInfo=dZ,uet.DatasourceService=YD,uet.DensityAnalystService=k3,uet.DensityKernelAnalystParameters=b3,uet.EditAttachmentsParameters=fG,uet.FeatureAttachmentsService=bG,uet.EditFeaturesParameters=oB,uet.EditFeaturesService=hB,uet.FacilityAnalyst3DParameters=wK,uet.FacilityAnalystSinks3DParameters=CK,uet.FacilityAnalystSinks3DService=LK,uet.FacilityAnalystSources3DParameters=VK,uet.FacilityAnalystSources3DService=QK,uet.FacilityAnalystStreamParameters=FY,uet.FacilityAnalystStreamService=YY,uet.FacilityAnalystTracedown3DParameters=SQ,uet.FacilityAnalystTracedown3DService=TQ,uet.FacilityAnalystTraceup3DParameters=iQ,uet.FacilityAnalystTraceup3DService=pQ,uet.FacilityAnalystUpstream3DParameters=DQ,uet.FacilityAnalystUpstream3DService=WQ,uet.FieldParameters=qG,uet.FieldsFilter=Vat,uet.FieldStatisticService=sU,uet.FieldStatisticsParameters=$G,uet.FilterParameter=EB,uet.FindClosestFacilitiesParameters=SX,uet.FindClosestFacilitiesService=TX,uet.FindLocationParameters=IX,uet.FindLocationService=UX,uet.FindMTSPPathsParameters=WX,uet.FindMTSPPathsService=$X,uet.FindPathParameters=nJ,uet.FindPathService=fJ,uet.FindServiceAreasParameters=yJ,uet.FindServiceAreasService=_J,uet.FindTSPPathsParameters=kJ,uet.FindTSPPathsService=LJ,uet.GenerateSpatialDataParameters=M3,uet.GenerateSpatialDataService=F3,uet.GeoCodingParameter=BL,uet.GeoDecodingParameter=zL,uet.GeoHashGridAggParameter=Rnt,uet.GeometryBatchAnalystService=U9,uet.GeometryBufferAnalystParameters=s3,uet.GeometryOverlayAnalystParameters=_4,uet.GeometrySurfaceAnalystParameters=O6,uet.GeometryThiessenAnalystParameters=V8,uet.GeoprocessingService=HU,uet.GeoRelationAnalystParameters=V3,uet.GeoRelationAnalystService=Q3,uet.GetFeaturesByBoundsParameters=dF,uet.GetFeaturesByBoundsService=xF,uet.GetFeaturesByBufferParameters=AF,uet.GetFeaturesByBufferService=BF,uet.GetFeaturesByGeometryParameters=qF,uet.GetFeaturesByGeometryService=tG,uet.GetFeaturesByIDsParameters=RB,uet.GetFeaturesByIDsService=HB,uet.GetFeaturesBySQLParameters=ZB,uet.GetFeaturesBySQLService=aF,uet.GetFeaturesParametersBase=CB,uet.GetFeaturesServiceBase=wB,uet.GetFieldsService=zG,uet.GetGridCellInfosParameters=xU,uet.GetGridCellInfosService=AU,uet.GetLayersInfoService=dW,uet.Grid=HH,uet.HillshadeParameter=Jit,uet.Image=ZH,uet.ImageCollectionService=tet,uet.ImageGFAspect=pst,uet.ImageGFHillShade=lst,uet.ImageGFOrtho=gst,uet.ImageGFSlope=Sst,uet.ImageRenderingRule=ist,uet.ImageSearchParameter=Qat,uet.ImageService=Ftt,uet.ImageStretchOption=est,uet.InterpolationAnalystParameters=e5,uet.InterpolationAnalystService=W5,uet.InterpolationDensityAnalystParameters=g5,uet.InterpolationIDWAnalystParameters=O5,uet.InterpolationKrigingAnalystParameters=D5,uet.InterpolationRBFAnalystParameters=l5,uet.JoinItem=hH,uet.KernelDensityJobParameter=PZ,uet.KernelDensityJobsService=NZ,uet.LabelImageCell=Ynt,uet.LabelMatrixCell=Gnt,uet.LabelMixedTextStyle=Sz,uet.LabelSymbolCell=tot,uet.LabelThemeCell=sot,uet.LayerStatus=fot,uet.LinkItem=yot,uet.MappingParameters=xZ,uet.MapService=yq,uet.MathExpressionAnalysisParameters=J5,uet.MathExpressionAnalysisService=n4,uet.MeasureParameters=Nq,uet.MeasureService=zq,uet.MetricsAggParameter=wnt,uet.NDVIParameter=Uit,uet.NetworkAnalystServiceBase=nY,uet.OutputSetting=mZ,uet.OverlapDisplayedOptions=bot,uet.OverlayAnalystParameters=s4,uet.OverlayAnalystService=M4,uet.OverlayGeoJobParameter=w$,uet.OverlayGeoJobsService=C$,uet.PointWithMeasure=Ur,uet.ProcessingServiceBase=cZ,uet.QueryByBoundsParameters=K0,uet.QueryByBoundsService=o1,uet.QueryByDistanceParameters=h1,uet.QueryByDistanceService=w1,uet.QueryByGeometryParameters=H1,uet.QueryByGeometryService=Z1,uet.QueryBySQLParameters=C1,uet.QueryBySQLService=R1,uet.DatasetMinDistanceAnalystParameters=l9,uet.MinDistanceAnalystService=O9,uet.TerrainCutFillCalculationParameters=J6,uet.TerrainCutFillCalculationService=n8,uet.terrainAnalystSetting=Vot,uet.TerrainAspectCalculationParameters=s8,uet.TerrainAspectCalculationService=y8,uet.TerrainSlopeCalculationParameters=b8,uet.TerrainSlopeCalculationService=k8,uet.GeometryMinDistanceAnalystParameters=g9,uet.ConvexHullAnalystParameters=_ot,uet.ConvexHullAnalystService=I9,uet.TraceAnalystParameters=QY,uet.TraceAnalystService=iX,uet.ConnectedEdgesAnalystParameters=lX,uet.ConnectedEdgesAnalystService=gX,uet.GetLayersLegendInfoParameters=kot,uet.GetLayersLegendInfoService=xW,uet.QueryParameters=sR,uet.QueryService=r2,uet.RasterFunctionParameter=Iit,uet.Route=Xr,uet.RouteCalculateMeasureParameters=L4,uet.RouteCalculateMeasureService=V4,uet.RouteLocatorParameters=Y4,uet.RouteLocatorService=e6,uet.ServerColor=Ar,uet.ServerFeature=gs,uet.ServerGeometry=zn,uet.ServerStyle=Nr,uet.ServerTextStyle=iz,uet.ServerTheme=jH,uet.SetDatasourceParameters=FD,uet.SetLayerInfoParameters=Mot,uet.SetLayerInfoService=AW,uet.SetLayersInfoParameters=Lot,uet.SetLayersInfoService=BW,uet.SetLayerStatusParameters=zW,uet.SetLayerStatusService=KW,uet.SingleObjectQueryJobsParameter=BZ,uet.SingleObjectQueryJobsService=qZ,uet.Sortby=Yat,uet.SpatialAnalystBase=g2,uet.StopQueryParameters=S7,uet.StopQueryService=T7,uet.SummaryAttributesJobsParameter=d0,uet.SummaryAttributesJobsService=x0,uet.SummaryMeshJobParameter=KZ,uet.SummaryMeshJobsService=o$,uet.SummaryRegionJobParameter=j$,uet.SummaryRegionJobsService=G$,uet.SupplyCenter=Fot,uet.SurfaceAnalystParameters=l6,uet.SurfaceAnalystParametersSetting=i6,uet.SurfaceAnalystService=I6,uet.TerrainCurvatureCalculationParameters=D6,uet.TerrainCurvatureCalculationService=W6,uet.Theme=ez,uet.ThemeDotDensity=PV,uet.ThemeFlow=Yot,uet.ThemeGraduatedSymbol=BV,uet.ThemeGraduatedSymbolStyle=AV,uet.ThemeGraph=bV,uet.ThemeGraphAxes=$z,uet.ThemeGraphItem=fV,uet.ThemeGraphSize=nV,uet.ThemeGraphText=sV,uet.ThemeGridRange=iit,uet.ThemeGridRangeItem=Qot,uet.ThemeGridUnique=git,uet.ThemeGridUniqueItem=lit,uet.ThemeLabel=Uz,uet.ThemeLabelAlongLine=Tz,uet.ThemeLabelBackground=Iz,uet.ThemeLabelItem=lz,uet.ThemeLabelText=Oz,uet.ThemeLabelUniqueItem=Sit,uet.ThemeMemoryData=Oit,uet.ThemeOffset=gz,uet.ThemeParameters=r7,uet.ThemeRange=KV,uet.ThemeRangeItem=zV,uet.ThemeService=c7,uet.ThemeUnique=Jz,uet.ThemeUniqueItem=pz,uet.ThiessenAnalystParameters=T5,uet.ThiessenAnalystService=Q8,uet.TilesetsService=_q,uet.TopologyValidatorJobsParameter=r0,uet.TopologyValidatorJobsService=c0,uet.TransferLine=Tit,uet.TransferPathParameters=I7,uet.TransferPathService=z7,uet.TransferSolutionParameters=q7,uet.TransferSolutionService=ttt,uet.TransportationAnalystParameter=_Y,uet.TransportationAnalystResultSetting=bY,uet.UGCLayer=tH,uet.UGCMapLayer=uH,uet.UGCSubLayer=EH,uet.UpdateDatasetParameters=CD,uet.UpdateEdgeWeightParameters=FJ,uet.UpdateEdgeWeightService=YJ,uet.UpdateTurnNodeWeightParameters=QJ,uet.UpdateTurnNodeWeightService=iK,uet.Vector=aW,uet.VectorClipJobsParameter=u$,uet.VectorClipJobsService=v$,uet.WebPrintingJobContent=kat,uet.WebPrintingJobCustomItems=$it,uet.WebPrintingJobExportOptions=Lat,uet.WebPrintingJobImage=nat,uet.WebPrintingJobLayers=sat,uet.WebPrintingJobLayoutOptions=Mat,uet.WebPrintingJobLegendOptions=fat,uet.WebPrintingJobLittleMapOptions=yat,uet.WebPrintingJobNorthArrowOptions=bat,uet.WebPrintingJobParameters=Fat,uet.WebPrintingJobScaleBarOptions=_at,uet.WebPrintingService=_tt,uet.Online=Gst,uet.OnlineData=Rst,uet.OnlineQueryDatasParameter=Hst,uet.ServiceStatus={DOES_NOT_INVOLVE:"DOES_NOT_INVOLVE",PUBLISH_FAILED:"PUBLISH_FAILED",PUBLISHED:"PUBLISHED",PUBLISHING:"PUBLISHING",UNPUBLISHED:"UNPUBLISHED",UNPUBLISHED_FAILED:"UNPUBLISHED_FAILED"},uet.DataItemType={GEOJSON:"GEOJSON",UGCV5_MVT:"UGCV5_MVT",JSON:"JSON",AUDIO:"AUDIO",COLOR:"COLOR",COLORSCHEME:"COLORSCHEME",CSV:"CSV",EXCEL:"EXCEL",FILLSYMBOL:"FILLSYMBOL",IMAGE:"IMAGE",LAYERTEMPLATE:"LAYERTEMPLATE",LAYOUTTEMPLATE:"LAYOUTTEMPLATE",LINESYMBOL:"LINESYMBOL",MAPTEMPLATE:"MAPTEMPLATE",MARKERSYMBOL:"MARKERSYMBOL",MBTILES:"MBTILES",PHOTOS:"PHOTOS",SHP:"SHP",SMTILES:"SMTILES",SVTILES:"SVTILES",THEMETEMPLATE:"THEMETEMPLATE",TPK:"TPK",UDB:"UDB",UGCV5:"UGCV5",UNKNOWN:"UNKNOWN",VIDEO:"VIDEO",WORKENVIRONMENT:"WORKENVIRONMENT",WORKSPACE:"WORKSPACE"},uet.DataItemOrderBy={FILENAME:"FILENAME",ID:"ID",LASTMODIFIEDTIME:"LASTMODIFIEDTIME",NICKNAME:"NICKNAME",SERVICESTATUS:"SERVICESTATUS",SIZE:"SIZE",STATUS:"STATUS",TYPE:"TYPE",UPDATETIME:"UPDATETIME",USERNAME:"USERNAME"},uet.FilterField={LINKPAGE:"LINKPAGE",MAPTITLE:"MAPTITLE",NICKNAME:"NICKNAME",RESTITLE:"RESTITLE",USERNAME:"USERNAME"},uet.OnlineServiceBase=Tst,uet.Feature=uet.Feature||{},uet.Feature.Theme=fo,uet.Feature.Theme.Bar=olt,uet.Feature.Theme.Bar3D=hlt,uet.Feature.Theme.Circle=Clt,uet.Feature.Theme.Graph=Kut,uet.Feature.Theme.Line=Rlt,uet.Feature.Theme.Pie=Hlt,uet.Feature.Theme.Point=Zlt,uet.Feature.Theme.RankSymbol=wlt,uet.Feature.Theme.Ring=act,uet.Feature.Theme.ThemeVector=oc,uet.Feature.ShapeParameters=Is,uet.Feature.ShapeParameters.Circle=Vu,uet.Feature.ShapeParameters.Image=Lu,uet.Feature.ShapeParameters.Label=ku,uet.Feature.ShapeParameters.Line=Js,uet.Feature.ShapeParameters.Point=Us,uet.Feature.ShapeParameters.Polygon=nu,uet.Feature.ShapeParameters.Rectangle=fu,uet.Feature.ShapeParameters.Sector=bu,uet.Feature.ShapeFactory=Jl,uet.LevelRenderer=ps,uet.KeyServiceParameter=Xst,uet.SecurityManager=hv,uet.ServerInfo=Zst,uet.TokenServiceParameter=rut,uet.ThemeStyle=zut,uet.CartoCSS=Dut,uet.ElasticSearch=uut,uet.ArrayStatistic=gut,uet.ColorsPickerUtil=put,uet.DataFormat=Jr,uet.ServerType=Kr,uet.GeometryType=Qr,uet.QueryOption=Zr,uet.JoinType={INNERJOIN:"INNERJOIN",LEFTJOIN:"LEFTJOIN"},uet.SpatialQueryMode=$r,uet.SpatialRelationType={CONTAIN:"CONTAIN",INTERSECT:"INTERSECT",WITHIN:"WITHIN"},uet.MeasureMode=tn,uet.Unit=en,uet.BufferRadiusUnit=rn,uet.EngineType={IMAGEPLUGINS:"IMAGEPLUGINS",OGC:"OGC",ORACLEPLUS:"ORACLEPLUS",SDBPLUS:"SDBPLUS",SQLPLUS:"SQLPLUS",UDB:"UDB"},uet.ThemeGraphTextFormat=nn,uet.ThemeGraphType=on,uet.GraphAxesTextDisplayMode=an,uet.GraduatedMode=sn,uet.RangeMode=un,uet.ThemeType={DOTDENSITY:"DOTDENSITY",GRADUATEDSYMBOL:"GRADUATEDSYMBOL",GRAPH:"GRAPH",LABEL:"LABEL",RANGE:"RANGE",UNIQUE:"UNIQUE"},uet.ColorGradientType=ln,uet.TextAlignment=cn,uet.FillGradientMode={NONE:"NONE",LINEAR:"LINEAR",RADIAL:"RADIAL",CONICAL:"CONICAL",SQUARE:"SQUARE"},uet.AlongLineDirection=fn,uet.LabelBackShape=hn,uet.LabelOverLengthMode=pn,uet.DirectionType={EAST:"EAST",NONE:"NONE",NORTH:"NORTH",SOURTH:"SOURTH",WEST:"WEST"},uet.OverlayOperationType=yn,uet.OutputType=vn,uet.SideType={LEFT:"LEFT",MIDDLE:"MIDDLE",NONE:"NONE",RIGHT:"RIGHT"},uet.SupplyCenterType={FIXEDCENTER:"FIXEDCENTER",NULL:"NULL",OPTIONALCENTER:"OPTIONALCENTER"},uet.TurnType={AHEAD:"AHEAD",BACK:"BACK",END:"END",LEFT:"LEFT",NONE:"NONE",RIGHT:"RIGHT"},uet.BufferEndType=dn,uet.SmoothMethod=gn,uet.SurfaceAnalystMethod=mn,uet.DataReturnMode=bn,uet.EditType=wn,uet.TransferTactic=Sn,uet.TransferPreference=xn,uet.GridType={CROSS:"CROSS",GRID:"GRID",POINT:"POINT"},uet.ColorSpaceType={CMYK:"CMYK",RGB:"RGB"},uet.LayerType={UGC:"UGC",WMS:"WMS",WFS:"WFS",CUSTOM:"CUSTOM"},uet.UGCLayerType={THEME:"THEME",VECTOR:"VECTOR",GRID:"GRID",IMAGE:"IMAGE"},uet.StatisticMode={AVERAGE:"AVERAGE",MAX:"MAX",MIN:"MIN",STDDEVIATION:"STDDEVIATION",SUM:"SUM",VARIANCE:"VARIANCE"},uet.PixelFormat={BIT16:"BIT16",BIT32:"BIT32",BIT64:"BIT64",SINGLE:"SINGLE",DOUBLE:"DOUBLE",UBIT1:"UBIT1",UBIT4:"UBIT4",UBIT8:"UBIT8",UBIT24:"UBIT24",UBIT32:"UBIT32"},uet.SearchMode={KDTREE_FIXED_COUNT:"KDTREE_FIXED_COUNT",KDTREE_FIXED_RADIUS:"KDTREE_FIXED_RADIUS",NONE:"NONE",QUADTREE:"QUADTREE"},uet.InterpolationAlgorithmType={KRIGING:"KRIGING",SimpleKriging:"SimpleKriging",UniversalKriging:"UniversalKriging"},uet.VariogramMode=_n,uet.Exponent=En,uet.ClientType=On,uet.ChartType={BAR:"Bar",BAR3D:"Bar3D",CIRCLE:"Circle",PIE:"Pie",POINT:"Point",LINE:"Line",RING:"Ring"},uet.ClipAnalystMode=Pn,uet.AnalystAreaUnit=kn,uet.AnalystSizeUnit=Cn,uet.StatisticAnalystMode=Tn,uet.SummaryType=An,uet.TopologyValidatorRule=Mn,uet.BucketAggType=jn,uet.MetricsAggType=In,uet.GetFeatureMode={BOUNDS:"BOUNDS",BUFFER:"BUFFER",ID:"ID",SPATIAL:"SPATIAL",SQL:"SQL"},uet.RasterFunctionType=Nn,uet.ResourceType={MAP:"MAP",SERVICE:"SERVICE",SCENE:"SCENE",DATA:"DATA",INSIGHTS_WORKSPACE:"INSIGHTS_WORKSPACE",MAP_DASHBOARD:"MAP_DASHBOARD"},uet.OrderBy={UPDATETIME:"UPDATETIME",HEATLEVEL:"HEATLEVEL",RELEVANCE:"RELEVANCE"},uet.OrderType={ASC:"ASC",DESC:"DESC"},uet.SearchType={PUBLIC:"PUBLIC",MY_RES:"MY_RES",MYGROUP_RES:"MYGROUP_RES",MYDEPARTMENT_RES:"MYDEPARTMENT_RES",SHARETOME_RES:"SHARETOME_RES"},uet.AggregationTypes={TAG:"TAG",TYPE:"TYPE"},uet.PermissionType={SEARCH:"SEARCH",READ:"READ",READWRITE:"READWRITE",DELETE:"DELETE",DOWNLOAD:"DOWNLOAD"},uet.EntityType={DEPARTMENT:"DEPARTMENT",GROUP:"GROUP",IPORTALGROUP:"IPORTALGROUP",ROLE:"ROLE",USER:"USER"},uet.WebExportFormatType={PNG:"PNG",PDF:"PDF"},uet.WebScaleOrientationType={HORIZONTALLABELSBELOW:"HORIZONTALLABELSBELOW",HORIZONTALLABELSABOVE:"HORIZONTALLABELSABOVE",VERTICALLABELSLEFT:"VERTICALLABELSLEFT",VERTICALLABELSRIGHT:"VERTICALLABELSRIGHT"},uet.WebScaleType={LINE:"LINE",BAR:"BAR",BAR_SUB:"BAR_SUB"},uet.WebScaleUnit={METER:"METER",FOOT:"FOOT",DEGREES:"DEGREES"},uet.KnowledgeGraph=yN,uet.BoundsType=Ln,uet.CellSizeType=Rn,uet.ColourModeChart=Dn,uet.DisplayModeChart=Bn,uet.VideoFeature=Ost;var tht=function(){try{return canvg}catch(t){return{}}}(),eht=r.n(tht),rht=r(2057);function nht(t){"@babel/helpers - typeof";return(nht="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function oht(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,iht(n.key),n)}}function iht(t){var e=function(t,e){if("object"!=nht(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=nht(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==nht(e)?e:e+""}function aht(t,e,r){return e=sht(e),function(t,e){if(e&&("object"===nht(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],sht(t).constructor):e.apply(t,r))}function sht(t){return(sht=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function uht(t,e){return(uht=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var lht=["559082264.0287178","279541132.0143589","139770566.0071794","69885283.00358972","34942641.50179486","17471320.75089743","8735660.375448715","4367830.1877224357","2183915.093862179","1091957.546931089","545978.7734655447","272989.7734655447","272989.3867327723","136494.6933663862","68247.34668319309","34123.67334159654","17061.83667079827","8530.918335399136","4265.459167699568","2132.729583849784"],cht=["5.590822640287176E8","2.795411320143588E8","1.397705660071794E8","6.98852830035897E7","3.494264150179485E7","1.7471320750897426E7","8735660.375448713","4367830.187724357","2183915.0938621783","1091957.5469310891","545978.7734655446","272989.3867327723","136494.69336638614","68247.34668319307","34123.673341596535","17061.836670798268","8530.918335399134"],fht=["GoogleCRS84Quad","GoogleMapsCompatible"],hht=function(t){function e(t,r){var n,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=aht(this,e)).mapId=t,n.server=r.server,n.withCredentials=r.withCredentials,n.target=r.target,n.mapOptions=o,n._canvgsV=[],n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&uht(t,e)}(e,w().Evented),r=e,(n=[{key:"initializeMap",value:function(t){var e=this;this.baseProjection=t.projection,this.mapParams={title:t.title,description:t.description},this._createMap(t);var r=t.layers;this.map.on("load",function(){e._addBaseMap(t),r&&0!==r.length?e._addLayers(r):e._sendMapToUser(0,0)}),this.map.on("remove",function(){e._stopCanvg()})}},{key:"_createMap",value:function(t){var e=[],r=t.layers;r&&r.length>0&&r.forEach(function(t){t.labelStyle&&e.push(t.labelStyle.fontFamily)},this),e.push("supermapol-icons");var n,o=e.join(","),i=t.center,a=t.level||0,s=0;if(t.minScale&&t.maxScale)s=this._transformScaleToZoom(t.minScale,w().CRS?w().CRS.get(this.baseProjection):"EPSG:3857");else{var u=this._getResolution(w().CRS?w().CRS.get(this.baseProjection).getExtent():[-20037508.3427892,-20037508.3427892,20037508.3427892,20037508.3427892])/this._getResolution(t.extent);s=+Math.log(u)/Math.LN2.toFixed(2)}a+=s,n=i?$n.unproject([i.x,i.y]):new(w().LngLat)(0,0),this.map=new(w().Map)({container:this.target,center:this.mapOptions.center||n,zoom:this.mapOptions.zoom||a,bearing:this.mapOptions.bearing||0,pitch:this.mapOptions.pitch||0,style:{version:8,sources:{},layers:[]},crs:this.baseProjection,localIdeographFontFamily:o||""}),this.fire("mapinitialized")}},{key:"_addBaseMap",value:function(t){this._createBaseLayer(t)}},{key:"_createBaseLayer",value:function(t){var e=t.baseLayer||t,r=e.layerType;(r.indexOf("TIANDITU_VEC")>-1||r.indexOf("TIANDITU_IMG")>-1||r.indexOf("TIANDITU_TER")>-1)&&(r=r.substr(0,12));var n;switch(r){case"TIANDITU_VEC":case"TIANDITU_IMG":case"TIANDITU_TER":this._createTiandituLayer(t);break;case"BING":this._createBingLayer(e.name);break;case"WMS":this._createWMSLayer(e);break;case"WMTS":this._createWMTSLayer(e);break;case"TILE":case"SUPERMAP_REST":this._createDynamicTiledLayer(e);break;case"CLOUD":case"CLOUD_BLACK":case"OSM":case"JAPAN_ORT":case"JAPAN_RELIEF":case"JAPAN_PALE":case"JAPAN_STD":case"GOOGLE_CN":case"GOOGLE":n={CLOUD:"http://t2.dituhui.com/FileService/image?map=quanguo&type=web&x={x}&y={y}&z={z}",CLOUD_BLACK:"http://t3.dituhui.com/MapService/getGdp?x={x}&y={y}&z={z}",OSM:"http://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png",GOOGLE:"https://www.google.cn/maps/vt/pb=!1m4!1m3!1i{z}!2i{x}!3i{y}!2m3!1e0!2sm!3i380072576!3m8!2szh-CN!3scn!5e1105!12m4!1e68!2m2!1sset!2sRoadmap!4e0!5m1!1e0",GOOGLE_CN:"https://mt{0-3}.google.cn/vt/lyrs=m&hl=zh-CN&gl=cn&x={x}&y={y}&z={z}",JAPAN_STD:"https://cyberjapandata.gsi.go.jp/xyz/std/{z}/{x}/{y}.png",JAPAN_PALE:"https://cyberjapandata.gsi.go.jp/xyz/pale/{z}/{x}/{y}.png",JAPAN_RELIEF:"https://cyberjapandata.gsi.go.jp/xyz/relief/{z}/{x}/{y}.png",JAPAN_ORT:"https://cyberjapandata.gsi.go.jp/xyz/ort/{z}/{x}/{y}.jpg"}[r],this._createXYZLayer(e,n);break;case"MAPBOXSTYLE":this._createMapboxStyle(e)}}},{key:"_createMapboxStyle",value:function(t){var e,r=this,n=t.dataSource,o=void 0===n?{}:n,i=o.serverId,a=o.url;e=void 0!==i?"".concat(this.server,"web/datas/").concat(i,"/download"):a,tt.get(e,null,{withCredentials:this.withCredentials,withoutFormatSuffix:!0,headers:{"Content-Type":"application/json;chartset=uft-8"}}).then(function(t){return t.json()}).then(function(t){r._matchStyleObject(t),r.map.setStyle(t)})}},{key:"_matchStyleObject",value:function(t){var e=t.sprite,r=t.glyphs;e&&"object"===nht(e)&&(t.sprite=Object.values(e)[0]),r&&"object"===nht(r)&&(t.glyphs=Object.values(r)[0])}},{key:"_createTiandituLayer",value:function(t){var e=this._getTiandituUrl(t),r=t.baseLayer.layerType,n=Boolean(t.baseLayer.labelLayerVisible),o=e.labelUrl,i=e.tiandituUrl;this._addBaselayer(i,"tianditu-layers-"+r),n&&this._addBaselayer(o,"tianditu-label-layers-"+r)}},{key:"_createWMTSLayer",value:function(t){var e=this,r=this._getWMTSUrl(t);this._filterWMTSIsMatched(t,function(n,o){n&&e._addBaselayer([r],"wmts-layers"+t.name,0,o)})}},{key:"_filterWMTSIsMatched",value:function(t,e){var r=this,n=!1,o=22,i=t.url;tt.get(i,null,{withCredentials:!1,withoutFormatSuffix:!0}).then(function(t){return t.text()}).then(function(i){var a=new rht.XMLParser({numberParseOptions:{hex:!1,leadingZeros:!1,eNotation:!1},alwaysCreateTextNode:!0,textNodeName:"_text"}).parse(i).Capabilities.Contents.TileMatrixSet;Array.isArray(a)||(a=[a]);for(var s=0;s<a.length;s++)if(a[s]["ows:Identifier"]&&a[s]["ows:Identifier"]._text+""===t.tileMatrixSet)if(fht.indexOf(a[s].WellKnownScaleSet._text)>-1)n=!0;else{if(!a[s].WellKnownScaleSet||"Custom"!==a[s].WellKnownScaleSet._text)throw Error(vct.i18n("msg_tilematrixsetunsupport"));for(var u=[],l="EPSG:3857"===r.map.crs?lht:cht,c=0,f=l.length;c<f&&a[s].TileMatrix[c]&&l[c]===a[s].TileMatrix[c].ScaleDenominator._text+"";c++)u.push(l[c]);if(o=u.length-1,0===u.length)throw Error(vct.i18n("msg_tilematrixsetunsupport"));n=!0}e(n,o)}).catch(function(t){r.fire("getwmtsfailed",{error:t,map:r.map})})}},{key:"_createBingLayer",value:function(t){this.addLayer(["https://dynamic.t0.tiles.ditu.live.com/comp/ch/{quadkey}?it=G,TW,L,LA&mkt=zh-cn&og=109&cstl=w4c&ur=CN&n=z"],"bing-layers-"+t)}},{key:"_createXYZLayer",value:function(t,e){var r=[];if("OSM"===t.layerType){for(var n=e.match(/\w\-\w/g)[0],o=n[0],i=n[2],a="",s=97;s<123;s++)a+=String.fromCharCode(s);for(var u=a.split(""),l=u.indexOf(o),c=u.indexOf(i),f=u.slice(l,c+1),h=0;h<f.length;h++){var p=e.replace(/{\w\-\w}/g,f[h]);r.push(p)}}else if("GOOGLE_CN"===t.layerType)for(var d=e.match(/\d\-\d/g)[0],y=d[0],v=d[2],g=y;g<=v;g++){var m=e.replace(/{\d\-\d}/g,g);r.push(m)}else r=[e];this._addBaselayer(r,"XYZ-layers-"+t.name)}},{key:"_createDynamicTiledLayer",value:function(t){var e=t.url,r=t.layerID||t.name,n=t.minzoom,o=t.maxzoom;this._addBaselayer([e],r,n,o,!0)}},{key:"_createWMSLayer",value:function(t){var e=this._getWMSUrl(t);this._addBaselayer([e],"WMS-layers-"+t.name)}},{key:"_createVectorLayer",value:function(t,e){var r=t.style,n=t.featureType,o=t.layerID,i=t.visible,a={};a.style=this._transformStyleToMapBoxGl(r,n),a.layout={visibility:i};var s={type:"geojson",data:{type:"FeatureCollection",features:e}};this._addOverlayToMap(n,s,o,a),"POLYGON"===n&&r.strokeColor&&this._addStrokeLineForPoly(r,s,o+"-strokeLine",i)}},{key:"_getTiandituUrl",value:function(t){for(var e=/t0/gi,r={},n=t.baseLayer.layerType.split("_")[1].toLowerCase(),o=Boolean(t.baseLayer.labelLayerVisible),i="https://t0.tianditu.gov.cn/{layer}_{proj}/wmts?",a=i,s="EPSG:4326"===this.baseProjection?"c":"w",u={service:"WMTS",request:"GetTile",style:"default",version:"1.0.0",layer:n,tilematrixSet:s,format:"tiles",width:256,height:256},l=(i+=this._getParamString(u,i)+"&tilematrix={z}&tilerow={y}&tilecol={x}").replace("{layer}",n).replace("{proj}",s),c=[],f=0;f<8;f++)c.push(l.replace(e,"t".concat(f)));if(r.tiandituUrl=c,o){var h={vec:"cva",ter:"cta",img:"cia"}[n];u.layer=h,a=(a+=this._getParamString(u,a)+"&tilematrix={z}&tilerow={y}&tilecol={x}").replace("{layer}",h).replace("{proj}",s);for(var p=[],d=0;d<8;d++)p.push(a.replace(e,"t".concat(d)));r.labelUrl=p}return r}},{key:"_getWMSUrl",value:function(t){var e=t.url,r=(e=e.split("?")[0]).split("/"),n={service:"WMS",request:"GetMap",layers:r[r.length-1],styles:"",format:"image/png",transparent:"true",version:"1.1.1",width:256,height:256,srs:this.baseProjection},o="EPSG:4326"===this.baseProjection?"{bbox-epsg-4326}":"{bbox-epsg-3857}";return e+=this._getParamString(n,e)+"&bbox=".concat(o)}},{key:"_addLayers",value:function(t){var e=this;this.layers=t;var r,n=0,o=t.length;t.forEach(function(t,i){if(t.dataSource&&t.dataSource.serverId||"MARKER"===t.layerType){var a=t.dataSource?t.dataSource.serverId:t.serverId,s="".concat(e.server,"web/datas/").concat(a,"/content.json?pageSize=9999999&currentPage=1");a&&tt.get(s,null,{withCredentials:e.withCredentials}).then(function(t){return t.json()}).then(function(a){if(!1===a.succeed)return n++,e._sendMapToUser(n,o),void e.fire("getlayersfailed",{error:a.error,map:e.map});a.type&&("JSON"===a.type||"GEOJSON"===a.type?(a.content=JSON.parse(a.content.trim()),r=e._formatGeoJSON(a.content,t)):"EXCEL"!==a.type&&"CSV"!==a.type||(r=e._excelData2Feature(a.content,t)),e._addLayer(t,r,i),n++,e._sendMapToUser(n,o))}).catch(function(t){n++,e._sendMapToUser(n,o),e.fire("getlayersfailed",{error:t,map:e.map})})}else if("SUPERMAP_REST"===t.layerType||"TILE"===t.layerType||"WMS"===t.layerType||"WMTS"===t.layerType)e._createBaseLayer(t),n++,e._sendMapToUser(n,o);else if(t.dataSource&&"REST_DATA"===t.dataSource.type){var u=t.dataSource;e._getFeatureBySQL(u.url,[u.dataSourseName||t.name],function(a){r=e._parseGeoJsonData2Feature({allDatas:{features:a.result.features.features},fileCode:t.projection,featureProjection:e.baseProjection}),e._addLayer(t,r,i),n++,e._sendMapToUser(n,o)},function(t){n++,e._sendMapToUser(n,o),e.fire("getfeaturesfailed",{error:t})})}else t.dataSource&&"REST_MAP"===t.dataSource.type&&t.dataSource.url&&e._queryFeatureBySQL(t.dataSource.url,t.dataSource.layerName,"smid=1",null,null,function(r){var a=r&&r.result.recordsets,s=a&&a[0],u=s.fields;if(s&&u){var l=[];for(var c in u){var f=u[c];0===f.indexOf("Sm")&&"SmID"!==f||l.push(f)}e._getFeatures(l,t,function(r){e._addLayer(t,r,i),n++,e._sendMapToUser(n,o)},function(t){n++,e.fire("getfeaturesfailed",{error:t,map:e.map})})}},function(t){e.fire("getlayersfailed",{error:t,map:e.map})})},this)}},{key:"_getFeatures",value:function(t,e,r,n){var o=this,i=e.dataSource,a=e.projection;this._queryFeatureBySQL(i.url,i.layerName,null,t,null,function(t){var e=t.result.recordsets[0].features.features,n=o._parseGeoJsonData2Feature({allDatas:{features:e},fileCode:a,featureProjection:o.baseProjection},"JSON");r(n)},function(t){n(t)})}},{key:"_addLayer",value:function(t,e,r){var n=t.layerType;t.layerID=n+"-"+t.name+"-"+r,t.visible=t.visible?"visible":"none",e[0]&&"Polygon"===e[0].geometry.type&&(e=this._handleMultyPolygon(e)),t.style&&t.filterCondition&&"RANGE"!==n&&"UNIQUE"!==n&&(e=this._getFiterFeatures(t.filterCondition,e)),"VECTOR"===n?"POINT"===t.featureType?"SYMBOL_POINT"===t.style.type?this._createSymbolLayer(t,e):this._createGraphicLayer(t,e):this._createVectorLayer(t,e):"UNIQUE"===n?this._createUniqueLayer(t,e):"RANGE"===n?this._createRangeLayer(t,e):"HEAT"===n?this._createHeatLayer(t,e):"MARKER"===n&&this._createMarkerLayer(t,e),t.labelStyle&&t.labelStyle.labelField&&this._addLabelLayer(t,e)}},{key:"_addLabelLayer",value:function(t,e){var r=t.labelStyle;this.map.addLayer({id:t.layerID+"label",type:"symbol",source:{type:"geojson",data:{type:"FeatureCollection",features:e}},paint:{"text-color":r.fill},layout:{"text-field":"{".concat(r.labelField,"}"),"text-size":parseFloat(r.fontSize)||12,"text-offset":r.offsetX?[r.offsetX/10||0,r.offsetY/10||0]:[0,-1.5],"text-font":r.fontFamily?[r.fontFamily]:[],visibility:t.visible}})}},{key:"_createSymbolLayer",value:function(t,e){document.getElementById("".concat(this.target)).classList.add("supermapol-icons-map");var r=t.style,n=t.style.unicode,o=String.fromCharCode(parseInt(n.replace(/^&#x/,""),16)),i=t.layerID;this.map.addSource(i+"-source",{type:"geojson",data:{type:"FeatureCollection",features:[]}}),this.map.addLayer({id:i,type:"symbol",source:i+"-source",paint:{"text-color":r.fillColor},layout:{"text-field":o,"text-font":["supermapol-icons"],visibility:t.visible}}),this.map.getSource(i+"-source").setData({type:"FeatureCollection",features:e})}},{key:"_createGraphicLayer",value:function(t,e){var r=this,n=t.style,o={},i=t.layerID,a={type:"geojson",data:{type:"FeatureCollection",features:e}};if("IMAGE_POINT"===n.type){var s=n.imageInfo,u=s.img;u&&u.src||(s.url=this.server+s.url),this.map.loadImage(s.url||u.src,function(e,o){e&&console.log(e);var s=2*Number.parseFloat((n.radius/o.height).toFixed(2));r.map.addImage("imageIcon",o),r.map.addLayer({id:i,type:"symbol",source:a,layout:{"icon-image":"imageIcon","icon-size":s,visibility:t.visible}})})}else if("SVG_POINT"===n.type){var l=n.url;this.svgDiv||(this.svgDiv=document.createElement("div"),document.body.appendChild(this.svgDiv)),this._getCanvasFromSVG(l,this.svgDiv,function(e){var o=e.toDataURL("img/png");o&&r.map.loadImage(o,function(o,s){o&&console.log(o);var u=Number.parseFloat((n.radius/e.width).toFixed(2));r.map.addImage("imageIcon",s),r.map.addLayer({id:i,type:"symbol",source:a,layout:{"icon-image":"imageIcon","icon-size":u,visibility:t.visible}})},r)})}else o.style=this._transformStyleToMapBoxGl(n,t.featureType),o.layout={visibility:t.visible},this._addOverlayToMap("POINT",a,i,o)}},{key:"_createUniqueLayer",value:function(t,e){var r=this._getUniqueStyleGroup(t,e);e=this._getFiterFeatures(t.filterCondition,e);var n=t.style,o={},i=t.themeSetting.themeField,a=t.featureType,s=["match",["get","index"]],u=t.layerID;e.forEach(function(t){r.forEach(function(e){e.value===t.properties[i]&&s.push(t.properties.index,e.color)})}),s.push("#ffffff"),o.style=this._transformStyleToMapBoxGl(n,a,s);var l=t.visible;o.layout={visibility:l};var c={type:"geojson",data:{type:"FeatureCollection",features:e}};this._addOverlayToMap(a,c,u,o),"POLYGON"===a&&n.strokeColor&&this._addStrokeLineForPoly(n,c,u+"-strokeLine",l)}},{key:"_getUniqueStyleGroup",value:function(t,e){var r=t.featureType,n=t.style,o=t.themeSetting,i=o.themeField,a=o.colors,s=[],u=o.customSettings;for(var l in e){var c=e[l].properties[i],f=!1;for(var h in s)if(s[h]===c){f=!0;break}f||s.push(c)}var p=a||this.defaultParameters.colors;p=put.getGradientColors(p,s.length);var d=[];return s.forEach(function(t,e){var o=p[e];t in u&&(o=u[t]),"LINE"===r?n.strokeColor=o:n.fillColor=o,d.push({color:o,value:t})},this),d}},{key:"_getWMTSUrl",value:function(t){var e={service:"WMTS",request:"GetTile",version:"1.0.0",style:"default",layer:t.layer,tilematrixSet:t.tileMatrixSet,format:"image/png"},r=t.url;return r+=this._getParamString(e,r)+"&tilematrix={z}&tilerow={y}&tilecol={x}"}},{key:"_createMarkerLayer",value:function(t,e){var r=this;e&&e.forEach(function(e){var n=e.geometry.type.toUpperCase(),o=e.dv_v5_markerStyle;"POINT"===n&&o.text&&(n="TEXT");var i=r.setFeatureInfo(e);e.properties.useStyle=o,e.properties.featureInfo=i,"POINT"===n&&o.src&&-1===o.src.indexOf("http://")&&-1===o.src.indexOf("https://")&&(o.src=r.server+o.src);var a={type:"geojson",data:e},s=e.properties.index,u=n+"-"+s;if("POINT"===n&&o.src&&o.src.indexOf("svg")<=-1&&r.map.loadImage(o.src,function(e,n){e&&console.log(e),r.map.addImage(s+"",n),r.map.addLayer({id:u,type:"symbol",source:a,layout:{"icon-image":s+"","icon-size":o.scale,visibility:t.visible}})},r),"POINT"===n&&o.src&&o.src.indexOf("svg")>-1&&(r.svgDiv||(r.svgDiv=document.createElement("div"),document.body.appendChild(r.svgDiv)),r._getCanvasFromSVG(o.src,r.svgDiv,function(e){var n=e.toDataURL("img/png");n&&r.map.loadImage(n,function(e,n){e&&console.log(e),r.map.addImage(s+"",n),r.map.addLayer({id:u,type:"symbol",source:a,layout:{"icon-image":s+"","icon-size":o.scale,visibility:t.visible}})},r)})),!o.src){var l={layout:{}};"LINESTRING"===n&&o.lineCap&&(n="LINE",l.layout={"line-cap":o.lineCap});var c=t.visible;l.layout.visibility=c,l.style=r._transformStyleToMapBoxGl(o,n),r._addOverlayToMap(n,a,u,l),"POLYGON"===n&&o.strokeColor&&r._addStrokeLineForPoly(o,a,u+"-strokeLine",c)}},this)}},{key:"setFeatureInfo",value:function(t){var e,r=t.dv_v5_markerInfo;if(!r||!r.dataViz_title)return r;e=r;var n=t.properties;for(var o in e)n[o]&&(e[o]=n[o],delete n[o]);return e}},{key:"_createHeatLayer",value:function(t,e){var r=t.themeSetting,n={};n.gradient=r.colors.slice(),n.radius=parseInt(r.radius);var o=r.customSettings;for(var i in o)n.gradient[i]=o[i];r.weight&&this._changeWeight(e,r.weight);var a=["interpolate",["linear"],["heatmap-density"]],s=(1/n.gradient.length).toFixed(2);n.gradient.forEach(function(t,e){a.push(e*s),0===e&&(t=$n.hexToRgba(t,0)),a.push(t)});var u={"heatmap-color":a,"heatmap-radius":r.radius+15,"heatmap-intensity":{base:1,stops:[[0,.8],[22,1]]}};if(e[0].weight&&e.length>=4){var l=[];e.forEach(function(t){l.push(t.weight)});var c=gut.getMax(l),f=gut.getMin(l);u["heatmap-weight"]=["interpolate",["linear"],["get","weight"],f,0,c,1]}this.map.addLayer({id:t.layerID,type:"heatmap",source:{type:"geojson",data:{type:"FeatureCollection",features:e}},paint:u})}},{key:"_changeWeight",value:function(t,e){this.fieldMaxValue={},this._getMaxValue(t,e);var r=this.fieldMaxValue[e];t.forEach(function(t){var n=t.properties[e];t.weight=n/r})}},{key:"_getMaxValue",value:function(t,e){var r,n=[],o=e;this.fieldMaxValue[o]||(t.forEach(function(t){(r=t.properties)&&parseFloat(r[o])&&n.push(parseFloat(r[o]))}),this.fieldMaxValue[o]=gut.getArrayStatistic(n,"Maximum"))}},{key:"_createRangeLayer",value:function(t,e){var r=t.themeSetting.themeField,n=t.style,o=t.featureType,i=this._getRangeStyleGroup(t,e),a={type:"geojson",data:{type:"FeatureCollection",features:e=this._getFiterFeatures(t.filterCondition,e)}},s=["match",["get","index"]];e.forEach(function(t){for(var e=parseFloat(t.properties[r]),n=0;n<i.length;n++)i[n].start<=e&&e<i[n].end&&s.push(t.properties.index,i[n].color);!e&&s.push(t.properties.index,"rgba(0, 0, 0, 0)")},this),s.push("rgba(0, 0, 0, 0)");var u={layout:{}};"LINE"===o&&n.lineCap&&(u.layout={"line-cap":n.lineCap});var l=t.visible;u.layout.visibility=l,u.style=this._transformStyleToMapBoxGl(n,o,s);var c=t.layerID;this._addOverlayToMap(o,a,c,u),"POLYGON"===o&&n.strokeColor&&this._addStrokeLineForPoly(n,a,c+"-strokeline",l)}},{key:"_getFiterFeatures",value:function(t,e){if(!t)return e;for(var r=this._replaceFilterCharacter(t),n=[],o=0;o<e.length;o++){var i=e[o],a=!1;try{var s=i.properties,u=Qft(r,Object.keys(s)),l=Zft(s),c="select * from json where ("+u+")";a=window.jsonsql.query(c,{attr:l})}catch(t){continue}a&&a.length>0&&n.push(i)}return n}},{key:"_replaceFilterCharacter",value:function(t){return t=t.replace(/=/g,"==").replace(/AND|and/g,"&&").replace(/or|OR/g,"||").replace(/<==/g,"<=").replace(/>==/g,">=")}},{key:"_getRangeStyleGroup",value:function(t,e){var r,n=t.featureType,o=t.style,i=[],a=t.themeSetting,s=a.customSettings,u=a.themeField,l=a.segmentCount;e.forEach(function(t){(r=t.properties||t.get("Properties"))?r[u]&&$n.isNumber(r[u])&&i.push(parseFloat(r[u])):t.get(u)&&$n.isNumber(t.get(u))&&t.get(u)&&i.push(parseFloat(t.get(u)))},this);var c=gut.getArraySegments(i,a.segmentMethod,l);if(c){var f=l;for(var h in r&&c[0]===c[r.length-1]&&(f=1,c.length=2),c){var p=c[h];p=0==h?Math.floor(100*p)/100:Math.ceil(100*p)/100+.1,c[h]=Number(p.toFixed(2))}for(var d=a.colors,y=0;y<f;y++)y in s&&(s[y].segment.start&&(c[y]=s[y].segment.start),s[y].segment.end&&(c[y+1]=s[y].segment.end));for(var v=[],g=0;g<f;g++){var m=d[g];g in s&&s[g].color&&(m=s[g].color),"LINE"===n?o.strokeColor=m:o.fillColor=m;var b=c[g],w=c[g+1],S=JSON.parse(JSON.stringify(o));v.push({style:S,color:m,start:b,end:w})}return v}}},{key:"_formatGeoJSON",value:function(t){var e=t.features;return e.forEach(function(t,e){t.properties.index=e}),e}},{key:"_excelData2Feature",value:function(t){for(var e=t.colTitles,r=-1,n=-1,o=0,i=e.length;o<i;o++)this._isXField(e[o])&&(r=o),this._isYField(e[o])&&(n=o);for(var a=[],s=0,u=t.rows.length;s<u;s++){var l=t.rows[s],c=Number(l[r]),f=Number(l[n]),h={};for(var p in t.colTitles){h[t.colTitles[p]]=t.rows[s][p]}h.index=s+"";var d={type:"Feature",geometry:{type:"Point",coordinates:[c,f]},properties:h};a.push(d)}return a}},{key:"_sendMapToUser",value:function(t,e){t===e&&this.fire("addlayerssucceeded",{map:this.map,mapparams:this.mapParams,layers:this.layers})}},{key:"_getParamString",value:function(t,e,r){var n=[];for(var o in t)n.push((r?o.toUpperCase():o)+"="+t[o]);return(e&&-1!==e.indexOf("?")?"&":"?")+n.join("&")}},{key:"_isXField",value:function(t){var e=t.toLowerCase();return"x"===e||"smx"===e||"jd"===e||"ç»åº¦"===e||"ä¸ç»"===e||"longitude"===e||"lot"===e||"lon"===e||"lng"===e}},{key:"_isYField",value:function(t){var e=t.toLowerCase();return"y"===e||"smy"===e||"wd"===e||"çº¬åº¦"===e||"åçº¬"===e||"latitude"===e||"lat"===e}},{key:"_transformStyleToMapBoxGl",value:function(t,e,r){var n={};"POINT"!==t.type&&"BASIC_POINT"!==t.type&&"POINT"!==e||"LINE"===e?"LINE"===e?n={strokeWidth:"line-width",strokeColor:"line-color",strokeOpacity:"line-opacity"}:"POLYGON"===e&&(n={fillColor:"fill-color",fillOpacity:"fill-opacity",strokeColor:"fill-outline-color"}):n={fillColor:"circle-color",strokeWidth:"circle-stroke-width",fillOpacity:"circle-opacity",radius:"circle-radius",strokeColor:"circle-stroke-color",strokeOpacity:"circle-stroke-opacity"};var o={};for(var i in t)n[i]&&(o[n[i]]=t[i]);return r&&(o["circle-color"]?o["circle-color"]=r:o["line-color"]?o["line-color"]=r:o["fill-color"]=r),t.lineDash&&"solid"!==t.lineDash&&"LINE"===e&&(o["line-dasharray"]=this._dashStyle(t)),o}},{key:"_dashStyle",value:function(t){if(!t)return[];var e=t.strokeDashstyle||t.lineDash;switch(e){case"solid":return[];case"dot":return[1,4];case"dash":return[4,4];case"dashdot":return[4,4,1,4];case"longdash":return[8,4];case"longdashdot":return[8,4,1,4];default:return e?W.isArray(e)?e:(e=C.trim(e).replace(/\s+/g,",")).replace(/\[|\]/gi,"").split(","):[]}}},{key:"_getCanvasFromSVG",value:function(t,e,r){var n=this,o=document.createElement("canvas");o.id="dataviz-canvas-"+$n.newGuid(8),o.style.display="none",e.appendChild(o);var i=window.canvg&&window.canvg.default?window.canvg.default:eht(),a=o.getContext("2d");i.from(a,t,{ignoreMouse:!0,ignoreAnimation:!0,forceRedraw:function(){return!1}}).then(function(t){t.start(),n._canvgsV.push(t),o.width>300||o.height>300||r(o)})}},{key:"_stopCanvg",value:function(){this._canvgsV.forEach(function(t){return t.stop()}),this._canvgsV=[]}},{key:"_addOverlayToMap",value:function(t,e,r,n){"circle"!==(t={POINT:"circle",LINE:"line",POLYGON:"fill"}[t])&&"line"!==t&&"fill"!==t||this.map.addLayer({id:r,type:t,source:e,paint:n.style,layout:n.layout||{}})}},{key:"_addBaselayer",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:22,o=arguments.length>4?arguments[4]:void 0;this.map.addLayer({id:e,type:"raster",source:{type:"raster",tiles:t,tileSize:256,rasterSource:o?"iserver":"",prjCoordSys:o?{epsgCode:this.baseProjection.split(":")[1]}:""},minzoom:r,maxzoom:n})}},{key:"_addStrokeLineForPoly",value:function(t,e,r,n){var o={};o.style=this._transformStyleToMapBoxGl(t,"LINE"),o.layout={visibility:n},this._addOverlayToMap("LINE",e,r,o)}},{key:"_parseGeoJsonData2Feature",value:function(t){for(var e=t.allDatas.features,r=[],n=0,o=e.length;n<o;n++){var i=e[n],a=i.geometry.coordinates;"Point"===e[n].geometry.type&&e[n].properties&&(e[n].properties.lon=a[0],e[n].properties.lat=a[1]),i.properties.index=n+"",r.push(i)}return r}},{key:"_getFeatureBySQL",value:function(t,e,r,n){var o,i;o=new EB({name:e.join().replace(":","@"),attributeFilter:"SMID > 0"}),i=new ZB({queryParameter:o,datasetNames:e,fromIndex:0,toIndex:1e5,returnContent:!0}),new aF(t).processAsync(i,function(t){"processCompleted"===t.type?r(t):n(t)})}},{key:"_queryFeatureBySQL",value:function(t,e,r,n,o,i,a,s,u,l){var c,f;c=new EB({name:e,attributeFilter:r}),n&&(c.fields=n);var h={queryParams:[c]};l&&(h.queryOption=Zr.ATTRIBUTE),s&&(h.startRecord=s),u&&(h.expectCount=u),o&&(h.prjCoordSys={epsgCode:o}),f=new C1(h),new l2(t).queryBySQL(f,function(t){"processCompleted"===t.type?i(t):a(t)})}},{key:"_handleMultyPolygon",value:function(t){return t.forEach(function(t){if("Polygon"===t.geometry.type){var e=t.geometry.coordinates;if(e.length>1){var r=[];e.forEach(function(t){r.push([t])}),t.geometry.coordinates=r,t.geometry.type="MultiPolygon"}}}),t}},{key:"_transformScaleToZoom",value:function(t,e){var r=295829515.2024169;"EPSG:3857"!==(e||this.map.getCRS()).epsgCode&&(r=295295895);var n=t.split(":")[1];return Math.min(24,+Math.log2(r/+n).toFixed(2))}},{key:"_getResolution",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:512;return t.leftBottom&&t.rightTop?Math.max(t.rightTop.x-t.leftBottom.x,t.rightTop.y-t.leftBottom.y)/e:Math.max(t[2]-t[0],t[3]-t[1])/e}}])&&oht(r.prototype,n),o&&oht(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function pht(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function dht(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?pht(Object(r),!0).forEach(function(e){Oht(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):pht(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function yht(t){return function(t){if(Array.isArray(t))return bht(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||mht(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function vht(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=mht(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){s=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function ght(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,s=[],u=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(s.push(n.value),s.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(t,e)||mht(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function mht(t,e){if(t){if("string"==typeof t)return bht(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?bht(t,e):void 0}}function bht(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function wht(t){"@babel/helpers - typeof";return(wht="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Sht(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Pht(n.key),n)}}function xht(t,e,r){return e=_ht(e),function(t,e){if(e&&("object"===wht(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],_ht(t).constructor):e.apply(t,r))}function _ht(t){return(_ht=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Eht(t,e){return(Eht=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Oht(t,e,r){return(e=Pht(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Pht(t){var e=function(t,e){if("object"!=wht(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=wht(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==wht(e)?e:e+""}var kht={POINT:"POINT",LINE:"LINE",FILL:"FILL",FILLEXTRUSION:"FILLEXTRUSION"},Cht={fontSize:"size",backgroundColor:"color"},Tht=Oht(Oht(Oht(Oht({},kht.POINT,{fontSize:"8px",color:"#FFFFFF",opacity:1}),kht.LINE,{width:20,height:8,backgroundColor:"#FFFFFF",opacity:1}),kht.FILL,{width:"20px",height:"20px",opacity:1,backgroundColor:"#FFFFFF",marginLeft:"1px",outline:"1px solid transparent",outlineColor:"#FFFFFF"}),kht.FILLEXTRUSION,{width:"20px",height:"20px",opacity:1,backgroundColor:"#FFFFFF"}),Aht=Oht({circle:kht.POINT,symbol:kht.POINT,line:kht.LINE,fill:kht.FILL},"fill-extrusion",kht.FILLEXTRUSION),Mht=Oht(Oht(Oht(Oht({},kht.POINT,["symbolsContent","size","color","opacity"]),kht.LINE,["width","color","opacity","lineDasharray","symbolsContent"]),kht.FILL,["color","opacity","antialias","outlineColor","symbolsContent"]),kht.FILLEXTRUSION,["color","opacity","symbolsContent"]),jht=Oht(Oht(Oht({},kht.POINT,"circle"),kht.FILL,"polygon-0"),kht.FILLEXTRUSION,"polygon-0"),Iht="LINEAR",Nht="UNIQUE",Lht="RANGE",Rht="line",Dht="polygon",Bht="image",Fht="style",Ght=["point-extrusion","heatmap-extrusion","radar","line-extrusion","line-curve","line-curve-extrusion","chart"],Uht={circle:["circle-animate-speed","circle-animate-rings"],line:["line-animate-duration","line-animate-interval ","line-animate-trailLength "]},zht=function(t){function e(t,r){var n,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=xht(this,e)).mapId=t,n.options=r,n.mapOptions={center:o.center,zoom:o.zoom,bearing:o.bearing,pitch:o.pitch},n._legendList=[],n._mapResourceInfo={},n._sprite="",n._spriteDatas={},n._layerCatalogsRenameMapList=[],n._layerIdRenameMapList=[],n.excludeSourceNames=["tdt-search-","tdt-route-","smmeasure","mapbox-gl-draw"],n._appendLayers=!1,n._baseProjection="",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Eht(t,e)}(e,w().Evented),r=e,(n=[{key:"initializeMap",value:function(t,e){if(t=this._handleUnSupportedLayers(t),this._mapInfo=t,e)return this._appendLayers=!0,this.map=e,void this._initLayers();this._createMap()}},{key:"getAppreciableLayers",value:function(){return this._generateLayers()}},{key:"getLayerCatalog",value:function(){return this._generateLayerCatalog()}},{key:"getLegendInfo",value:function(){return this._legendList}},{key:"_createMap",value:function(){var t=this,e=this._mapInfo,r=e.name,n=void 0===r?"":r,o=e.crs,i=e.center,a=void 0===i?new(w().LngLat)(0,0):i,s=e.zoom,u=void 0===s?0:s,l=e.bearing,c=void 0===l?0:l,f=e.pitch,h=void 0===f?0:f,p=e.minzoom,d=e.maxzoom,y=e.sprite,v=void 0===y?"":y,g=o;if("object"===wht(o)){if(g=o.name,!w().CRS){var m="The EPSG code ".concat(g," needs to include mapbox-gl-enhance.js. Refer to the example: https://iclient.supermap.io/examples/mapboxgl/editor.html#mvtVectorTile_2362");return this.fire("getmapinfofailed",{error:m}),void console.error(m)}this._setCRS(o)}this._baseProjection=g,a=this.mapOptions.center||a,u=this.mapOptions.zoom||u,c=this.mapOptions.bearing||c,h=this.mapOptions.pitch||h;var b=this._getLabelFontFamily(),S={container:this.options.target,crs:this._baseProjection,center:a,zoom:u,style:{sprite:v,name:n,version:8,sources:{},layers:[]},minzoom:p,maxzoom:d,bearing:c,pitch:h,localIdeographFontFamily:b||""};this.map=new(w().Map)(S),this._sprite=v,this.fire("mapinitialized",{map:this.map}),this.map.on("load",function(){t._initLayers()})}},{key:"_setCRS",value:function(t){var e=t.name,r=t.wkt,n=t.extent,o=new(w().CRS)(e,r,n,n[2]>180?"meter":"degree");w().CRS.set(o)}},{key:"_initLayers",value:function(){var t=this;if(!this.map.getCRS||this.map.getCRS().epsgCode===this._baseProjection)return"[object Object]"===Object.prototype.toString.call(this.mapId)?(this.mapParams={title:this._mapInfo.name,description:""},this._createMapRelatedInfo(),void this._addLayersToMap()):void Promise.all([this._getMapRelatedInfo(),this._getSpriteDatas()]).then(function(e){var r=ght(e,1)[0];t.mapParams={title:t._mapInfo.name,description:r.description},t._mapResourceInfo=JSON.parse(r.projectInfo),t._createMapRelatedInfo(),t._addLayersToMap()}).catch(function(e){t.fire("getmapinfofailed",{error:e}),console.error(e)});this.fire("projectionisnotmatch")}},{key:"_createMapRelatedInfo",value:function(){var t=this._mapInfo.glyphs;for(var e in t)this.map.style.addGlyphs(e,t[e])}},{key:"_getMapRelatedInfo",value:function(){var t=$n.transformUrl(Object.assign({url:"".concat(this.options.server,"web/maps/").concat(this.mapId)},this.options));return tt.get(t,null,{withCredentials:this.options.withCredentials}).then(function(t){return t.json()})}},{key:"_addLayersToMap",value:function(){var t=this,e=this._setUniqueId(this._mapInfo),r=e.sources,n=e.layers,o=e.layerIdMapList,i=e.layerCataLog;n.forEach(function(e){e.source&&!t.map.getSource(e.source)&&t.map.addSource(e.source,r[e.source]),t.map.addLayer(e)}),this._layerIdRenameMapList=o,this._layerCatalogsRenameMapList=i,this._createLegendInfo(),this._sendMapToUser()}},{key:"_setUniqueId",value:function(t){var e=JSON.parse(JSON.stringify(t.layers)),r={},n=[],o="_".concat(+new Date);for(var i in t.sources){var a=i;this.map.getSource(i)&&(a=i+o),r[a]=t.sources[i];var s,u=vht(e);try{for(u.s();!(s=u.n()).done;){var l=s.value;l.source===i&&(l.source=a)}}catch(t){u.e(t)}finally{u.f()}}var c,f=vht(e);try{for(f.s();!(c=f.n()).done;){var h=c.value,p=h.id;if(this.map.getLayer(h.id)){var d=h.id+o;h.id=d}n.push({originId:p,renderId:h.id})}}catch(t){f.e(t)}finally{f.f()}var y=JSON.parse(JSON.stringify(t.metadata.layerCatalog));return this._updateLayerCatalogsId(y,n),{sources:r,layers:e,layerIdMapList:n,layerCataLog:y}}},{key:"_updateLayerCatalogsId",value:function(t,e){var r=this;t.forEach(function(n,o){var i=n.id,a=n.children;if("group"!==n.type){var s=e.find(function(t){return t.originId===i});s?(n.originId=i,n.id=s.renderId):t.splice(o,1)}else r._updateLayerCatalogsId(a,e)})}},{key:"_sendMapToUser",value:function(){var t=this,e=this.getAppreciableLayers().filter(function(e){return t._layerIdRenameMapList.some(function(t){return t.renderId===e.id})});this.fire("addlayerssucceeded",{map:this.map,mapparams:this.mapParams,layers:e})}},{key:"_getLayerInfosFromCatalogs",value:function(t,e){for(var r=this,n=[],o=function(){var o=t[i],a=o.catalogType,s=o.children,u=o.visible,l=o.id;if("layer"===a&&u&&e.find(function(t){return t.id===l})&&n.push(t[i]),"group"===a&&s&&s.length>0){var c=r._getLayerInfosFromCatalogs(s,e);n.push.apply(n,yht(c))}},i=0;i<t.length;i++)o();return n}},{key:"clean",value:function(){this.map&&(this.map.remove(),this.map=null,this._legendList=[],this._mapResourceInfo={},this._sprite="",this._spriteDatas={},this.mapOptions={},this.options={})}},{key:"_getLayersOnMap",value:function(){var t=this,e=this.map.getStyle().layers.map(function(e){return t.map.getLayer(e.id)}),r=Object.values(this.map.overlayLayersManager).reduce(function(t,e){if(e.id&&!t.some(function(t){return t.id===e.id})){var r=e.visibility;!r&&"visible"in e&&(r=e.visible?"visible":"none");var n=e.source||e.sourceId;"object"===wht(n)&&(n=e.id),t.push({id:e.id,visibility:r,source:n,type:e.type})}return t},[]);return e.concat(r).filter(function(e){return!t._appendLayers||t._layerIdRenameMapList.some(function(t){return t.renderId===e.id})}).filter(function(e){return!t.excludeSourceNames.includes(e.source)})}},{key:"_generateLayers",value:function(){var t=this,e=this._getLayersOnMap(),r=this._mapResourceInfo,n=r.catalogs,o=void 0===n?[]:n,i=r.datas,a=void 0===i?[]:i,s=this._getLayerInfosFromCatalogs(o,this._mapInfo.layers);return e.map(function(e){var r,n=t._layerIdRenameMapList.find(function(t){return t.renderId===e.id})||{},o=s.find(function(t){return t.id===n.originId})||{},i=o.title,u=void 0===i?e.id:i,l=o.visualization,c=o.layersContent,f=o.msDatasetId,h="",p="",d=vht(a);try{for(d.s();!(r=d.n()).done;){var y=r.value,v=y.datasets&&y.datasets.find(function(t){return t.msDatasetId===f});if(v){h=y.sourceType,p=v.datasetId;break}}}catch(t){d.e(t)}finally{d.f()}var g=t.map.getSource(e.source),m=t._formatLayer({id:e.id,type:e.type,title:u,visible:!e.visibility||"visible"===e.visibility,renderSource:{id:e.source,type:g&&g.type,sourceLayer:e.sourceLayer},renderLayers:t._getRenderLayers(c,e.id),dataSource:{serverId:p,type:h},themeSetting:{}});if(l){var b=t._parseRendererStyleData(l.renderer)[0];if(b){var w="";"heat"===b.type?w=b.field:b.color&&(w=b.color.field),w&&(m.themeSetting={themeField:w})}}return m})}},{key:"_generateLayerCatalog",value:function(){var t=this,e=this._layerCatalogsRenameMapList.reduce(function(e,r){var n=t._collectChildrenKey([r],"id");return e.push.apply(e,yht(n)),e},[]),r=this.getAppreciableLayers(),n=r.filter(function(t){return!e.some(function(e){return e===t.id})}),o=this._layerCatalogsRenameMapList.concat(n),i=this._createFormatCatalogs(o,r);return this._updateLayerVisible(i),i}},{key:"_createFormatCatalogs",value:function(t,e){var r=this;return t.map(function(t){var n,o=t.id,i=t.title,a=t.type,s=t.visible,u=t.children,l=t.parts;if("group"===t.type)n={children:r._createFormatCatalogs(u,e),id:o,title:i,type:a,visible:s};else{var c=e.find(function(t){return t.id===o});n=r._formatLayer({dataSource:c.dataSource,id:o,type:c.type,title:i,visible:c.visible,renderSource:c.renderSource,renderLayers:r._getRenderLayers(l,o),themeSetting:c.themeSetting})}return n})}},{key:"_updateLayerVisible",value:function(t){var e,r=vht(t);try{for(r.s();!(e=r.n()).done;){var n=e.value,o=this._collectChildrenKey([n],"visible");n.visible=o.every(function(t){return t})}}catch(t){r.e(t)}finally{r.f()}}},{key:"_collectChildrenKey",value:function(t,e){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],o=vht(t);try{for(o.s();!(r=o.n()).done;){var i=r.value;"group"!==i.type?n.push(i[e]):this._collectChildrenKey(i.children,n)}}catch(t){o.e(t)}finally{o.f()}return n}},{key:"_getRenderLayers",value:function(t,e){return t?t.includes(e)?t:[e].concat(yht(t)):[e]}},{key:"_formatLayer",value:function(t){var e=t.dataSource,r=void 0===e?{}:e,n=t.id,o=t.title,i=t.type,a=t.visible,s=void 0===a||a,u=t.renderSource,l=void 0===u?{}:u,c=t.renderLayers,f=void 0===c?[]:c,h=t.themeSetting;return{dataSource:r,id:n,title:o,type:i,visible:s,renderSource:l,renderLayers:f,themeSetting:void 0===h?{}:h}}},{key:"_parseRendererStyleData",value:function(t){return t instanceof Array?t:[t]}},{key:"_getLabelFontFamily",value:function(){var t=[],e=this._mapInfo.layers;return e&&e.length>0&&e.forEach(function(e){var r=e.layout&&e.layout["text-font"]||[];t.push.apply(t,yht(r))}),t.join(",")}},{key:"_getSpriteDatas",value:function(){var t=this,e=this._sprite;if(e){if("string"==typeof e){var r=e.replace(/.+(web\/maps\/.+)/,"".concat(this.options.server,"$1"));return tt.get(r,null,{withCredentials:this.options.withCredentials}).then(function(t){return t.json()}).then(function(e){t._spriteDatas=e})}this._spriteDatas=e}}},{key:"_createLegendInfo",value:function(){var t,e=this,r=this._mapResourceInfo.catalogs,n=void 0===r?[]:r,o=vht(this._getLayerInfosFromCatalogs(n,this._mapInfo.layers));try{var i=function(){var r,n=t.value,o=(n.visualization||{}).renderer;if(!o)return 1;var i=e._layerIdRenameMapList.find(function(t){return t.originId===n.id}),a=e._mapInfo.layers.find(function(t){return t.id===i.originId}),s=Object.assign({},a,{title:n.title,id:i.renderId}),u=e._parseRendererStyleData(o).reduce(function(t,r){var n=e._createLayerLegendList(s,r);return n&&t.push.apply(t,yht(n)),t},[]);(r=e._legendList).push.apply(r,yht(u))};for(o.s();!(t=o.n()).done;)i()}catch(t){o.e(t)}finally{o.f()}}},{key:"_getLegendSimpleStyle",value:function(t,e){var r={},n=Aht[t],o=Mht[n];o&&o.filter(function(t){return e[t]&&"simple"===e[t].type}).forEach(function(t){("outlineColor"!==t||(e.antialias||{}).value)&&(r[t]=(e[t]||{}).value)});return r}},{key:"_createLayerLegendList",value:function(t,e){var r=this,n=t.type,o=t.id,i=t.title,a=Aht[n];if("heat"===e.type){var s=this._heatColorToGradient((t.paint||{})["heatmap-color"]);return s.length>0?[{themeField:e.field,styleGroup:[{style:{type:Fht,shape:a,colors:s}}],layerId:o,layerTitle:i}]:void 0}var u=Mht[a];if(u){var l=this._getLegendSimpleStyle(n,e),c=this._parseLegendtyle({layerType2LegendType:a,customValue:l}),f=u.filter(function(t){return e[t]&&"simple"!==e[t].type});return f.length?f.map(function(t){var n=e[t],s=r._getSettingStyle(t,n.defaultValue,l),u=[],c=r._getSettingCustom(n),f=r._getSettingInterpolateInfo(n),h={layerType2LegendType:a,styleField:t,subStyleSetting:n,simpleStyle:l,defaultSetting:s,custom:c,interpolateInfo:f};switch(r._getLegendStyleType({styleField:t,currentType:n.type,custom:c,interpolateInfo:f})){case Iht:u=r._parseLinearStyle(h);break;case Lht:u=r._parseRangeStyle(h);break;case Nht:u=r._parseUniqueStyle(h)}return{themeField:(n.field||[])[0],styleField:t,styleGroup:u,layerId:o,layerTitle:i}}):[{styleGroup:[{fieldValue:i||o,style:dht(dht({},c),{},{shape:a})}],layerId:o,layerTitle:i}]}}},{key:"_heatColorToGradient",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=[];return t.forEach(function(r,n){n>5&&n%2==0&&e.push({value:r,key:6===n?0:t[n-1]})}),e}},{key:"_getSettingCustom",value:function(t){var e=t.value,r=t.values;return this._isLinear(t)?e:r}},{key:"_getSettingInterpolateInfo",value:function(t){var e=t.interpolateInfo,r=void 0===e?{}:e;return this._isLinear(t)?{type:"linear"}:r}},{key:"_isLinear",value:function(t){return"linear"===t.type}},{key:"_getLegendStyleType",value:function(t){var e=t.styleField,r=t.currentType,n=t.custom,o=t.interpolateInfo;return["unique","linear"].includes(r)?this._isColorAttr(e)&&"linear"===o.type&&n.length>1?Iht:Nht:Lht}},{key:"_isColorAttr",value:function(t){return["color","textColor","outlineColor","textHaloColor"].includes(t)}},{key:"_parseLinearStyle",value:function(t){var e=t.layerType2LegendType,r=t.custom;return[{styleField:null,style:{type:Fht,shape:e,colors:r}}]}},{key:"_parseUniqueStyle",value:function(t){var e=this,r=t.layerType2LegendType,n=t.styleField,o=t.simpleStyle,i=t.defaultSetting,a=t.custom,s=t.interpolateInfo,u=a.map(function(t){var i=e._getSettingStyle(n,t.value,o),a=e._parseLegendtyle({layerType2LegendType:r,customValue:i});return{fieldValue:t.key,style:dht(dht({},a),{},{shape:r})}});if(!s.type||"custom"===s.type){var l=this._parseLegendtyle({layerType2LegendType:r,customValue:i});u.push({fieldValue:null,style:dht(dht({},l),{},{shape:r})})}return u}},{key:"_parseRangeStyle",value:function(t){var e=this,r=t.layerType2LegendType,n=t.styleField,o=t.simpleStyle,i=t.defaultSetting,a=t.custom.map(function(t){var i=e._getSettingStyle(n,t.value,o),a=e._parseLegendtyle({layerType2LegendType:r,customValue:i});return{start:t.start,end:t.end,style:dht(dht({},a),{},{shape:r})}}),s=this._parseLegendtyle({layerType2LegendType:r,customValue:i});return a.push({start:null,end:null,style:dht(dht({},s),{},{shape:r})}),a}},{key:"_getSettingStyle",value:function(t,e,r){var n=Object.assign({},r);return n[t]=e,n}},{key:"_parseLegendtyle",value:function(t){var e=this,r=t.layerType2LegendType,n=t.customValue,o=dht({},Tht[r]);r!==kht.LINE&&Object.keys(o).forEach(function(t){var e=n[Cht[t]||t];([kht.FILL,kht.FILLEXTRUSION].includes(r)||e)&&(o[t]=e)});var i=n.symbolsContent||{},a=i.symbolId,s=void 0===a?jht[r]:a,u=i.style;switch(r){case kht.POINT:return"BASE"===(this._getIconById(s)?"BASE":"SERVICE")?dht({type:Fht},o):this._getSpriteStyle(s,o);case kht.LINE:u=u||[];var l=dht({},Tht.LINE),c=u instanceof Array?u:[u];if(c.some(function(t){return!!e._getImageIdBySymbol(t,Rht)})){var f=this._getImageIdBySymbol(c[0],Rht);return this._getSpriteStyle(f,o)}var h,p=n.symbolsContent?{}:{height:n.width||l.height,lineWidth:n.width||l.width,color:n.color||l.backgroundColor};if(delete Object.assign({},n).symbolsContent,n.symbolsContent){var d=this._getLineWidth(c);h=c.map(function(t){return e._transformLineStyle({oldWidth:d,symbol:t,defaultStyle:l,customValue:n})})}return dht(dht(dht({type:Fht},n),p),{},{lineStyles:h,width:100});case kht.FILL:case kht.FILLEXTRUSION:var y=o.backgroundColor,v=((u||{}).paint||{})["fill-color"],g=dht({},Tht.FILL);return y||Object.assign(o,{backgroundColor:v}),Object.keys(o).forEach(function(t){["backgroundColor","width","height","opacity"].includes(t)&&!o[t]&&(o[t]=g[t])}),o.outlineColor&&Object.assign(o,{outline:g.outline,marginLeft:"1px"}),this._spriteDatas[s]?this._getSpriteStyle(s,o):dht({type:Fht},o)}}},{key:"_getIconById",value:function(t){if("image"!==(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"svg")){return[{id:"circle",name:"circle"}].find(function(e){return e.id===t})}}},{key:"_getImageIdBySymbol",value:function(t,e){var r=t.paint||{};return e===Rht?r["line-pattern"]:e===Dht?r["fill-pattern"]:r["icon-image"]}},{key:"_getSpriteStyle",value:function(t,e){if(this._spriteDatas[t]){var r=this._spriteDatas[t];if(r.width&&r.height)return dht(dht({type:Bht,sprite:r},e),{},{url:"string"==typeof this._sprite?"".concat(this._sprite,".png"):""})}}},{key:"_transformLineStyle",value:function(t){var e,r=t.oldWidth,n=t.symbol,o=t.defaultStyle,i=t.customValue,a=n.paint,s=void 0===a?{}:a;return void 0!==i.height&&(e=this._updateSingleStyleByWidth(r,i.height,n)),{lineWidth:((e||{}).paint||{})["line-width"]||s["line-width"]||o.height,opacity:i.opacity||s["line-opacity"]||o.opacity,color:i.color||s["line-color"]||o.backgroundColor,lineDash:s["line-dasharray"]||[],lineOffset:s["line-offset"]||0}}},{key:"_updateSingleStyleByWidth",value:function(t,e,r){if(t===e)return r;var n=(r||{}).paint||{};if(0===t)return{paint:Object.assign({},n,{"line-width":Number(e.toFixed(2))})};var o=e/t,i=n["line-width"],a=n["line-offset"]||0,s=n["line-dasharray"]||[],u=this._updateDash(s,o);return{paint:Object.assign({},n,{"line-width":Number((i*o).toFixed(2)),"line-offset":Number((a*o).toFixed(2)),"line-dasharray":u&&u.map(function(t){return Number(t.toFixed(2))})})}}},{key:"_updateDash",value:function(t,e){if(t&&0!==t.length)return t.map(function(t){return t/e})}},{key:"_getLineWidth",value:function(t){return t instanceof Array?this._getWholeWidth(t):(t.paint||{})["line-width"]||0}},{key:"_getWholeWidth",value:function(t){var e,r;return t.forEach(function(t){var n=(t||{}).paint||{},o=n["line-width"],i=n["line-offset"]||0,a=i+o/2,s=i-o/2;(a>e||void 0===e)&&(e=a),(s<r||void 0===r)&&(r=s)}),Number((e-r).toFixed(2))}},{key:"_handleUnSupportedLayers",value:function(t){var e=this,r=[],n="layer are not supported yet",o=t.layers,i=t.interaction;return i&&i.drill&&(this.fire("getlayersfailed",{error:"drill ".concat(n)}),i.drill.forEach(function(t){r=r.concat(t.layerIds)})),o.forEach(function(t){if(Ght.includes(t.type))return e.fire("getlayersfailed",{error:"".concat(t.type," ").concat(n)}),void r.push(t.id);"heatmap"===t.type&&t.paint&&["spuare","hexagon"].includes(t.paint["heatmap-shape"])&&(e.fire("getlayersfailed",{error:"".concat(t.paint["heatmap-shape"],"-heatmap ").concat(n)}),r.push(t.id));var o=Uht[t.type],i=!1;o&&o.forEach(function(o){t.layout&&Object.keys(t.layout).forEach(function(a){a!==o||i||(e.fire("getlayersfailed",{error:"".concat(t.type,"-animate ").concat(n)}),r.push(t.id),i=!0)})})}),t.layers=o.filter(function(t){return!r.includes(t.id)}),t}}])&&Sht(r.prototype,n),o&&Sht(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function Vht(t){"@babel/helpers - typeof";return(Vht="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Hht(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Wht(n.key),n)}}function Wht(t){var e=function(t,e){if("object"!=Vht(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Vht(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Vht(e)?e:e+""}function qht(t,e,r){return e=Yht(e),function(t,e){if(e&&("object"===Vht(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Yht(t).constructor):e.apply(t,r))}function Yht(t){return(Yht=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Xht(t,e){return(Xht=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Jht=function(t){function e(t){var r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2?arguments[2]:void 0;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=qht(this,e)).mapId=t,r.options=Object.assign({},n),r.options.server=r._formatServerUrl(n.server),r.options.target=n.target||"map",r.options.withCredentials=n.withCredentials||!1,r.mapOptions=o,r._createWebMap(),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Xht(t,e)}(e,w().Evented),r=e,(n=[{key:"resize",value:function(){this.map.resize()}},{key:"setMapId",value:function(t){this.mapId=t,this._createWebMap()}},{key:"setWebMapOptions",value:function(t){var e=this._formatServerUrl(t.server);this.options.server=e,this._createWebMap()}},{key:"setMapOptions",value:function(t){var e=t.center,r=t.zoom,n=t.maxBounds,o=t.minZoom,i=t.maxZoom,a=t.isWorldCopy,s=t.bearing,u=t.pitch;e&&e.length&&this.map.setCenter(e),r&&this.map.setZoom(r),n&&this.map.setMaxBounds(n),o&&this.map.setMinZoom(o),i&&this.map.setMaxZoom(i),a&&this.map.setRenderWorldCopies(a),s&&this.map.setBearing(s),u&&this.map.setPitch(u)}},{key:"_createWebMap",value:function(){var t=$n.transformUrl(Object.assign({url:"".concat(this.options.server,"web/maps/").concat(this.mapId,"/map")},this.options));this._getMapInfo(t)}},{key:"_formatServerUrl",value:function(t){var e=t.split("");return"/"!==e[e.length-1]&&(t+="/"),t}},{key:"_getMapInfo",value:function(t){var e=this;tt.get(t,null,{withCredentials:this.options.withCredentials}).then(function(t){return t.json()}).then(function(t){var r=e._getMapProjection(t);if(!["EPSG:4490","EPSG:4214","EPSG:4610","EPSG:3857","EPSG:4326"].find(function(t){return t===r}))throw Error(vct.i18n("msg_crsunsupport"));e.webMapInstance=e._initMap(t),e._registerWebMapEvents(),e.webMapInstance.initializeMap(t)}).catch(function(t){e.fire("getmapfailed",{error:t})})}},{key:"_getMapProjection",value:function(t){return this._isWebMapV3(t.version)?t.crs:t.projection}},{key:"_initMap",value:function(t){var e=new(this._getMapFactory(t.version))(this.mapId,this.options,this.mapOptions);return e.setEventedParent(this),e}},{key:"_getMapFactory",value:function(t){return this._isWebMapV3(t)?zht:hht}},{key:"_registerWebMapEvents",value:function(){var t=this;this.webMapInstance&&(this.webMapInstance.on("mapinitialized",function(){t.map=t.webMapInstance.map}),this.webMapInstance.on("addlayerssucceeded",function(e){var r=e.mapparams;t.mapParams=r}))}},{key:"_getWebMapInstance",value:function(){return this.webMapInstance}},{key:"_isWebMapV3",value:function(t){return t.startsWith("3.")}}])&&Hht(r.prototype,n),o&&Hht(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function Kht(t){"@babel/helpers - typeof";return(Kht="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Qht(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Zht(n.key),n)}}function Zht(t){var e=function(t,e){if("object"!=Kht(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Kht(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Kht(e)?e:e+""}var $ht=function(){return t=function t(e,r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.MapService=e,this.url=r,this.options=n,this.CLASS_NAME="SuperMap.InitMapServiceBase"},(e=[{key:"createMapService",value:function(){var t=this.MapService,e=this.url,r=this.options;return new t(e,{proxy:r.proxy,withCredentials:r.withCredentials,crossOrigin:r.crossOrigin,headers:r.headers,projection:r.projection})}},{key:"getMapInfo",value:function(t){var e=this.createMapService();return t?new Promise(function(r,n){e.getMapInfo(function(e){t(e,r,n)})}):e.getMapInfo()}},{key:"getTilesets",value:function(){return this.createMapService().getTilesets()}},{key:"getWKT",value:function(){var t=this;return new Promise(function(e,r){t.createMapService().getWKT(function(t){try{var n=t.result.data;e(n)}catch(t){r(t)}})})}}])&&Qht(t.prototype,e),r&&Qht(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function tpt(t){return"PCS_NON_EARTH"===t}function ept(t,e){var r=t.scale,n=t.dpi,o=t.coordUnit,i=function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:22,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:512,n=[],o=Math.abs(t.left-t.right)/r,i=0;i<e;i++)n.push(o/Math.pow(2,i));return n.sort(function(t,e){return e-t})}(e);return function(t,e){for(var r,n=0,o=0;o<e.length;o++)0===o&&(r=Math.abs(t-e[o])),r>Math.abs(t-e[o])&&(r=Math.abs(t-e[o]),n=o);return n}(Nc(r,n,o),i)}var rpt=1,npt=2,opt=3,ipt=4,apt=5,spt=6378137,upt=6356752.314,lpt=.0066943799901413165,cpt=484813681109536e-20,fpt=Math.PI/2,hpt=.16666666666666666,ppt=.04722222222222222,dpt=.022156084656084655,ypt=1e-10,vpt=.017453292519943295,gpt=57.29577951308232,mpt=Math.PI/4,bpt=2*Math.PI,wpt=3.14159265359,Spt={greenwich:0,lisbon:-9.131906111111,paris:2.337229166667,bogota:-74.080916666667,madrid:-3.687938888889,rome:12.452333333333,bern:7.439583333333,jakarta:106.807719444444,ferro:-17.666666666667,brussels:4.367975,stockholm:18.058277777778,athens:23.7163375,oslo:10.722916666667},xpt={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}},_pt=/[\s_\-\/\(\)]/g;function Ept(t,e){if(t[e])return t[e];for(var r,n=Object.keys(t),o=e.toLowerCase().replace(_pt,""),i=-1;++i<n.length;)if((r=n[i]).toLowerCase().replace(_pt,"")===o)return t[r]}function Opt(t){var e,r,n,o={},i=t.split("+").map(function(t){return t.trim()}).filter(function(t){return t}).reduce(function(t,e){var r=e.split("=");return r.push(!0),t[r[0].toLowerCase()]=r[1],t},{}),a={proj:"projName",datum:"datumCode",rf:function(t){o.rf=parseFloat(t)},lat_0:function(t){o.lat0=t*vpt},lat_1:function(t){o.lat1=t*vpt},lat_2:function(t){o.lat2=t*vpt},lat_ts:function(t){o.lat_ts=t*vpt},lon_0:function(t){o.long0=t*vpt},lon_1:function(t){o.long1=t*vpt},lon_2:function(t){o.long2=t*vpt},alpha:function(t){o.alpha=parseFloat(t)*vpt},gamma:function(t){o.rectified_grid_angle=parseFloat(t)},lonc:function(t){o.longc=t*vpt},x_0:function(t){o.x0=parseFloat(t)},y_0:function(t){o.y0=parseFloat(t)},k_0:function(t){o.k0=parseFloat(t)},k:function(t){o.k0=parseFloat(t)},a:function(t){o.a=parseFloat(t)},b:function(t){o.b=parseFloat(t)},r_a:function(){o.R_A=!0},zone:function(t){o.zone=parseInt(t,10)},south:function(){o.utmSouth=!0},towgs84:function(t){o.datum_params=t.split(",").map(function(t){return parseFloat(t)})},to_meter:function(t){o.to_meter=parseFloat(t)},units:function(t){o.units=t;var e=Ept(xpt,t);e&&(o.to_meter=e.to_meter)},from_greenwich:function(t){o.from_greenwich=t*vpt},pm:function(t){var e=Ept(Spt,t);o.from_greenwich=(e||parseFloat(t))*vpt},nadgrids:function(t){"@null"===t?o.datumCode="none":o.nadgrids=t},axis:function(t){3===t.length&&-1!=="ewnsud".indexOf(t.substr(0,1))&&-1!=="ewnsud".indexOf(t.substr(1,1))&&-1!=="ewnsud".indexOf(t.substr(2,1))&&(o.axis=t)},approx:function(){o.approx=!0}};for(e in i)r=i[e],e in a?"function"==typeof(n=a[e])?n(r):o[n]=r:o[e]=r;return"string"==typeof o.datumCode&&"WGS84"!==o.datumCode&&(o.datumCode=o.datumCode.toLowerCase()),o}var Ppt=function(t){return new Ipt(t).output()},kpt=1,Cpt=/\s/,Tpt=/[A-Za-z]/,Apt=/[A-Za-z84_]/,Mpt=/[,\]]/,jpt=/[\d\.E\-\+]/;function Ipt(t){if("string"!=typeof t)throw new Error("not a string");this.text=t.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=kpt}function Npt(t,e,r){Array.isArray(e)&&(r.unshift(e),e=null);var n=e?{}:t,o=r.reduce(function(t,e){return Lpt(e,t),t},n);e&&(t[e]=o)}function Lpt(t,e){if(Array.isArray(t)){var r=t.shift();if("PARAMETER"===r&&(r=t.shift()),1===t.length)return Array.isArray(t[0])?(e[r]={},void Lpt(t[0],e[r])):void(e[r]=t[0]);if(t.length)if("TOWGS84"!==r){if("AXIS"===r)return r in e||(e[r]=[]),void e[r].push(t);var n;switch(Array.isArray(r)||(e[r]={}),r){case"UNIT":case"PRIMEM":case"VERT_DATUM":return e[r]={name:t[0].toLowerCase(),convert:t[1]},void(3===t.length&&Lpt(t[2],e[r]));case"SPHEROID":case"ELLIPSOID":return e[r]={name:t[0],a:t[1],rf:t[2]},void(4===t.length&&Lpt(t[3],e[r]));case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":return t[0]=["name",t[0]],void Npt(e,r,t);default:for(n=-1;++n<t.length;)if(!Array.isArray(t[n]))return Lpt(t,e[r]);return Npt(e,r,t)}}else e[r]=t;else e[r]=!0}else e[t]=!0}function Rpt(t){"@babel/helpers - typeof";return(Rpt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Ipt.prototype.readCharicter=function(){var t=this.text[this.place++];if(4!==this.state)for(;Cpt.test(t);){if(this.place>=this.text.length)return;t=this.text[this.place++]}switch(this.state){case kpt:return this.neutral(t);case 2:return this.keyword(t);case 4:return this.quoted(t);case 5:return this.afterquote(t);case 3:return this.number(t);case-1:return}},Ipt.prototype.afterquote=function(t){if('"'===t)return this.word+='"',void(this.state=4);if(Mpt.test(t))return this.word=this.word.trim(),void this.afterItem(t);throw new Error("havn't handled \""+t+'" in afterquote yet, index '+this.place)},Ipt.prototype.afterItem=function(t){return","===t?(null!==this.word&&this.currentObject.push(this.word),this.word=null,void(this.state=kpt)):"]"===t?(this.level--,null!==this.word&&(this.currentObject.push(this.word),this.word=null),this.state=kpt,this.currentObject=this.stack.pop(),void(this.currentObject||(this.state=-1))):void 0},Ipt.prototype.number=function(t){if(!jpt.test(t)){if(Mpt.test(t))return this.word=parseFloat(this.word),void this.afterItem(t);throw new Error("havn't handled \""+t+'" in number yet, index '+this.place)}this.word+=t},Ipt.prototype.quoted=function(t){'"'!==t?this.word+=t:this.state=5},Ipt.prototype.keyword=function(t){if(Apt.test(t))this.word+=t;else{if("["===t){var e=[];return e.push(this.word),this.level++,null===this.root?this.root=e:this.currentObject.push(e),this.stack.push(this.currentObject),this.currentObject=e,void(this.state=kpt)}if(!Mpt.test(t))throw new Error("havn't handled \""+t+'" in keyword yet, index '+this.place);this.afterItem(t)}},Ipt.prototype.neutral=function(t){if(Tpt.test(t))return this.word=t,void(this.state=2);if('"'===t)return this.word="",void(this.state=4);if(jpt.test(t))return this.word=t,void(this.state=3);if(!Mpt.test(t))throw new Error("havn't handled \""+t+'" in neutral yet, index '+this.place);this.afterItem(t)},Ipt.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(-1===this.state)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};var Dpt=.017453292519943295;function Bpt(t){return t*Dpt}function Fpt(t){var e=Ppt(t),r=e.shift(),n=e.shift();e.unshift(["name",n]),e.unshift(["type",r]);var o={};return Lpt(e,o),function(t){if("GEOGCS"===t.type?t.projName="longlat":"LOCAL_CS"===t.type?(t.projName="identity",t.local=!0):"object"===Rpt(t.PROJECTION)?t.projName=Object.keys(t.PROJECTION)[0]:t.projName=t.PROJECTION,t.AXIS){for(var e="",r=0,n=t.AXIS.length;r<n;++r){var o=[t.AXIS[r][0].toLowerCase(),t.AXIS[r][1].toLowerCase()];-1!==o[0].indexOf("north")||("y"===o[0]||"lat"===o[0])&&"north"===o[1]?e+="n":-1!==o[0].indexOf("south")||("y"===o[0]||"lat"===o[0])&&"south"===o[1]?e+="s":-1!==o[0].indexOf("east")||("x"===o[0]||"lon"===o[0])&&"east"===o[1]?e+="e":-1===o[0].indexOf("west")&&("x"!==o[0]&&"lon"!==o[0]||"west"!==o[1])||(e+="w")}2===e.length&&(e+="u"),3===e.length&&(t.axis=e)}t.UNIT&&(t.units=t.UNIT.name.toLowerCase(),"metre"===t.units&&(t.units="meter"),t.UNIT.convert&&("GEOGCS"===t.type?t.DATUM&&t.DATUM.SPHEROID&&(t.to_meter=t.UNIT.convert*t.DATUM.SPHEROID.a):t.to_meter=t.UNIT.convert));var i=t.GEOGCS;function a(e){return e*(t.to_meter||1)}"GEOGCS"===t.type&&(i=t),i&&(i.DATUM?t.datumCode=i.DATUM.name.toLowerCase():t.datumCode=i.name.toLowerCase(),"d_"===t.datumCode.slice(0,2)&&(t.datumCode=t.datumCode.slice(2)),"new_zealand_geodetic_datum_1949"!==t.datumCode&&"new_zealand_1949"!==t.datumCode||(t.datumCode="nzgd49"),"wgs_1984"!==t.datumCode&&"world_geodetic_system_1984"!==t.datumCode||("Mercator_Auxiliary_Sphere"===t.PROJECTION&&(t.sphere=!0),t.datumCode="wgs84"),"_ferro"===t.datumCode.slice(-6)&&(t.datumCode=t.datumCode.slice(0,-6)),"_jakarta"===t.datumCode.slice(-8)&&(t.datumCode=t.datumCode.slice(0,-8)),~t.datumCode.indexOf("belge")&&(t.datumCode="rnb72"),i.DATUM&&i.DATUM.SPHEROID&&(t.ellps=i.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),"international"===t.ellps.toLowerCase().slice(0,13)&&(t.ellps="intl"),t.a=i.DATUM.SPHEROID.a,t.rf=parseFloat(i.DATUM.SPHEROID.rf,10)),i.DATUM&&i.DATUM.TOWGS84&&(t.datum_params=i.DATUM.TOWGS84),~t.datumCode.indexOf("osgb_1936")&&(t.datumCode="osgb36"),~t.datumCode.indexOf("osni_1952")&&(t.datumCode="osni52"),(~t.datumCode.indexOf("tm65")||~t.datumCode.indexOf("geodetic_datum_of_1965"))&&(t.datumCode="ire65"),"ch1903+"===t.datumCode&&(t.datumCode="ch1903"),~t.datumCode.indexOf("israel")&&(t.datumCode="isr93")),t.b&&!isFinite(t.b)&&(t.b=t.a),[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",Bpt],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",Bpt],["x0","false_easting",a],["y0","false_northing",a],["long0","central_meridian",Bpt],["lat0","latitude_of_origin",Bpt],["lat0","standard_parallel_1",Bpt],["lat1","standard_parallel_1",Bpt],["lat2","standard_parallel_2",Bpt],["azimuth","Azimuth"],["alpha","azimuth",Bpt],["srsCode","name"]].forEach(function(e){return r=t,o=(n=e)[0],i=n[1],void(!(o in r)&&i in r&&(r[o]=r[i],3===n.length&&(r[o]=n[2](r[o]))));var r,n,o,i}),t.long0||!t.longc||"Albers_Conic_Equal_Area"!==t.projName&&"Lambert_Azimuthal_Equal_Area"!==t.projName||(t.long0=t.longc),t.lat_ts||!t.lat1||"Stereographic_South_Pole"!==t.projName&&"Polar Stereographic (variant B)"!==t.projName?!t.lat_ts&&t.lat0&&"Polar_Stereographic"===t.projName&&(t.lat_ts=t.lat0,t.lat0=Bpt(t.lat0>0?90:-90)):(t.lat0=Bpt(t.lat1>0?90:-90),t.lat_ts=t.lat1)}(o),o}function Gpt(t){var e=this;if(2===arguments.length){var r=arguments[1];"string"==typeof r?"+"===r.charAt(0)?Gpt[t]=Opt(arguments[1]):Gpt[t]=Fpt(arguments[1]):Gpt[t]=r}else if(1===arguments.length){if(Array.isArray(t))return t.map(function(t){Array.isArray(t)?Gpt.apply(e,t):Gpt(t)});if("string"==typeof t){if(t in Gpt)return Gpt[t]}else"EPSG"in t?Gpt["EPSG:"+t.EPSG]=t:"ESRI"in t?Gpt["ESRI:"+t.ESRI]=t:"IAU2000"in t?Gpt["IAU2000:"+t.IAU2000]=t:console.log(t);return}}!function(t){t("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),t("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),t("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),t.WGS84=t["EPSG:4326"],t["EPSG:3785"]=t["EPSG:3857"],t.GOOGLE=t["EPSG:3857"],t["EPSG:900913"]=t["EPSG:3857"],t["EPSG:102113"]=t["EPSG:3857"]}(Gpt);var Upt=Gpt;var zpt=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];var Vpt=["3857","900913","3785","102113"];var Hpt=function(t){if(!function(t){return"string"==typeof t}(t))return t;if(function(t){return t in Upt}(t))return Upt[t];if(function(t){return zpt.some(function(e){return t.indexOf(e)>-1})}(t)){var e=Fpt(t);if(function(t){var e=Ept(t,"authority");if(e){var r=Ept(e,"epsg");return r&&Vpt.indexOf(r)>-1}}(e))return Upt["EPSG:3857"];var r=function(t){var e=Ept(t,"extension");if(e)return Ept(e,"proj4")}(e);return r?Opt(r):e}return function(t){return"+"===t[0]}(t)?Opt(t):void 0};function Wpt(t,e){var r,n;if(t=t||{},!e)return t;for(n in e)void 0!==(r=e[n])&&(t[n]=r);return t}function qpt(t,e,r){var n=t*e;return r/Math.sqrt(1-n*n)}function Ypt(t){return t<0?-1:1}function Xpt(t){return Math.abs(t)<=wpt?t:t-Ypt(t)*bpt}function Jpt(t,e,r){var n=t*r,o=.5*t;return n=Math.pow((1-n)/(1+n),o),Math.tan(.5*(fpt-e))/n}function Kpt(t,e){for(var r,n,o=.5*t,i=fpt-2*Math.atan(e),a=0;a<=15;a++)if(r=t*Math.sin(i),i+=n=fpt-2*Math.atan(e*Math.pow((1-r)/(1+r),o))-i,Math.abs(n)<=1e-10)return i;return-9999}function Qpt(t){return t}var Zpt=[{init:function(){var t=this.b/this.a;this.es=1-t*t,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=qpt(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)},forward:function(t){var e,r,n=t.x,o=t.y;if(o*gpt>90&&o*gpt<-90&&n*gpt>180&&n*gpt<-180)return null;if(Math.abs(Math.abs(o)-fpt)<=ypt)return null;if(this.sphere)e=this.x0+this.a*this.k0*Xpt(n-this.long0),r=this.y0+this.a*this.k0*Math.log(Math.tan(mpt+.5*o));else{var i=Math.sin(o),a=Jpt(this.e,o,i);e=this.x0+this.a*this.k0*Xpt(n-this.long0),r=this.y0-this.a*this.k0*Math.log(a)}return t.x=e,t.y=r,t},inverse:function(t){var e,r,n=t.x-this.x0,o=t.y-this.y0;if(this.sphere)r=fpt-2*Math.atan(Math.exp(-o/(this.a*this.k0)));else{var i=Math.exp(-o/(this.a*this.k0));if(-9999===(r=Kpt(this.e,i)))return null}return e=Xpt(this.long0+n/(this.a*this.k0)),t.x=e,t.y=r,t},names:["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"]},{init:function(){},forward:Qpt,inverse:Qpt,names:["longlat","identity"]}],$pt={},tdt=[];function edt(t,e){var r=tdt.length;return t.names?(tdt[r]=t,t.names.forEach(function(t){$pt[t.toLowerCase()]=r}),this):(console.log(e),!0)}var rdt={start:function(){Zpt.forEach(edt)},add:edt,get:function(t){if(!t)return!1;var e=t.toLowerCase();return void 0!==$pt[e]&&tdt[$pt[e]]?tdt[$pt[e]]:void 0}},ndt={MERIT:{a:6378137,rf:298.257,ellipseName:"MERIT 1983"},SGS85:{a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},GRS80:{a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},IAU76:{a:6378140,rf:298.257,ellipseName:"IAU 1976"},airy:{a:6377563.396,b:6356256.91,ellipseName:"Airy 1830"},APL4:{a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},NWL9D:{a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},mod_airy:{a:6377340.189,b:6356034.446,ellipseName:"Modified Airy"},andrae:{a:6377104.43,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},aust_SA:{a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},GRS67:{a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},bessel:{a:6377397.155,rf:299.1528128,ellipseName:"Bessel 1841"},bess_nam:{a:6377483.865,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},clrk66:{a:6378206.4,b:6356583.8,ellipseName:"Clarke 1866"},clrk80:{a:6378249.145,rf:293.4663,ellipseName:"Clarke 1880 mod."},clrk80ign:{a:6378249.2,b:6356515,rf:293.4660213,ellipseName:"Clarke 1880 (IGN)"},clrk58:{a:6378293.645208759,rf:294.2606763692654,ellipseName:"Clarke 1858"},CPM:{a:6375738.7,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},delmbr:{a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},engelis:{a:6378136.05,rf:298.2566,ellipseName:"Engelis 1985"},evrst30:{a:6377276.345,rf:300.8017,ellipseName:"Everest 1830"},evrst48:{a:6377304.063,rf:300.8017,ellipseName:"Everest 1948"},evrst56:{a:6377301.243,rf:300.8017,ellipseName:"Everest 1956"},evrst69:{a:6377295.664,rf:300.8017,ellipseName:"Everest 1969"},evrstSS:{a:6377298.556,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},fschr60:{a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},fschr60m:{a:6378155,rf:298.3,ellipseName:"Fischer 1960"},fschr68:{a:6378150,rf:298.3,ellipseName:"Fischer 1968"},helmert:{a:6378200,rf:298.3,ellipseName:"Helmert 1906"},hough:{a:6378270,rf:297,ellipseName:"Hough"},intl:{a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},kaula:{a:6378163,rf:298.24,ellipseName:"Kaula 1961"},lerch:{a:6378139,rf:298.257,ellipseName:"Lerch 1979"},mprts:{a:6397300,rf:191,ellipseName:"Maupertius 1738"},new_intl:{a:6378157.5,b:6356772.2,ellipseName:"New International 1967"},plessis:{a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},krass:{a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},SEasia:{a:6378155,b:6356773.3205,ellipseName:"Southeast Asia"},walbeck:{a:6376896,b:6355834.8467,ellipseName:"Walbeck"},WGS60:{a:6378165,rf:298.3,ellipseName:"WGS 60"},WGS66:{a:6378145,rf:298.25,ellipseName:"WGS 66"},WGS7:{a:6378135,rf:298.26,ellipseName:"WGS 72"}},odt=ndt.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};ndt.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};var idt={};idt.wgs84={towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},idt.ch1903={towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},idt.ggrs87={towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},idt.nad83={towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},idt.nad27={nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},idt.potsdam={towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},idt.carthage={towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},idt.hermannskogel={towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"},idt.osni52={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},idt.ire65={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},idt.rassadiran={towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},idt.nzgd49={towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},idt.osgb36={towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"},idt.s_jtsk={towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},idt.beduaram={towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},idt.gunung_segara={towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},idt.rnb72={towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"};var adt=function(t,e,r,n,o,i,a){var s={};return s.datum_type=void 0===t||"none"===t?apt:ipt,e&&(s.datum_params=e.map(parseFloat),0===s.datum_params[0]&&0===s.datum_params[1]&&0===s.datum_params[2]||(s.datum_type=rpt),s.datum_params.length>3&&(0===s.datum_params[3]&&0===s.datum_params[4]&&0===s.datum_params[5]&&0===s.datum_params[6]||(s.datum_type=npt,s.datum_params[3]*=cpt,s.datum_params[4]*=cpt,s.datum_params[5]*=cpt,s.datum_params[6]=s.datum_params[6]/1e6+1))),a&&(s.datum_type=opt,s.grids=a),s.a=r,s.b=n,s.es=o,s.ep2=i,s},sdt={};function udt(t){if(0===t.length)return null;var e="@"===t[0];return e&&(t=t.slice(1)),"null"===t?{name:"null",mandatory:!e,grid:null,isNull:!0}:{name:t,mandatory:!e,grid:sdt[t]||null,isNull:!1}}function ldt(t){return t/3600*Math.PI/180}function cdt(t,e,r){return String.fromCharCode.apply(null,new Uint8Array(t.buffer.slice(e,r)))}function fdt(t){return t.map(function(t){return[ldt(t.longitudeShift),ldt(t.latitudeShift)]})}function hdt(t,e,r){return{name:cdt(t,e+8,e+16).trim(),parent:cdt(t,e+24,e+24+8).trim(),lowerLatitude:t.getFloat64(e+72,r),upperLatitude:t.getFloat64(e+88,r),lowerLongitude:t.getFloat64(e+104,r),upperLongitude:t.getFloat64(e+120,r),latitudeInterval:t.getFloat64(e+136,r),longitudeInterval:t.getFloat64(e+152,r),gridNodeCount:t.getInt32(e+168,r)}}function pdt(t,e,r,n){for(var o=e+176,i=[],a=0;a<r.gridNodeCount;a++){var s={latitudeShift:t.getFloat32(o+16*a,n),longitudeShift:t.getFloat32(o+16*a+4,n),latitudeAccuracy:t.getFloat32(o+16*a+8,n),longitudeAccuracy:t.getFloat32(o+16*a+12,n)};i.push(s)}return i}function ddt(t,e){if(!(this instanceof ddt))return new ddt(t);e=e||function(t){if(t)throw t};var r=Hpt(t);if("object"==typeof r){var n=ddt.projections.get(r.projName);if(n){if(r.datumCode&&"none"!==r.datumCode){var o=Ept(idt,r.datumCode);o&&(r.datum_params=r.datum_params||(o.towgs84?o.towgs84.split(","):null),r.ellps=o.ellipse,r.datumName=o.datumName?o.datumName:r.datumCode)}r.k0=r.k0||1,r.axis=r.axis||"enu",r.ellps=r.ellps||"wgs84",r.lat1=r.lat1||r.lat0;var i,a,s,u,l,c,f,h=function(t,e,r,n,o){if(!t){var i=Ept(ndt,n);i||(i=odt),t=i.a,e=i.b,r=i.rf}return r&&!e&&(e=(1-1/r)*t),(0===r||Math.abs(t-e)<ypt)&&(o=!0,e=t),{a:t,b:e,rf:r,sphere:o}}(r.a,r.b,r.rf,r.ellps,r.sphere),p=(i=h.a,a=h.b,h.rf,s=r.R_A,c=((u=i*i)-(l=a*a))/u,f=0,s?(u=(i*=1-c*(hpt+c*(ppt+c*dpt)))*i,c=0):f=Math.sqrt(c),{es:c,e:f,ep2:(u-l)/l}),d=function(t){return void 0===t?null:t.split(",").map(udt)}(r.nadgrids),y=r.datum||adt(r.datumCode,r.datum_params,h.a,h.b,p.es,p.ep2,d);Wpt(this,r),Wpt(this,n),this.a=h.a,this.b=h.b,this.rf=h.rf,this.sphere=h.sphere,this.es=p.es,this.e=p.e,this.ep2=p.ep2,this.datum=y,this.init(),e(null,this)}else e(t)}else e(t)}ddt.projections=rdt,ddt.projections.start();var ydt=ddt;function vdt(t,e,r){var n,o,i,a,s=t.x,u=t.y,l=t.z?t.z:0;if(u<-fpt&&u>-1.001*fpt)u=-fpt;else if(u>fpt&&u<1.001*fpt)u=fpt;else{if(u<-fpt)return{x:-1/0,y:-1/0,z:t.z};if(u>fpt)return{x:1/0,y:1/0,z:t.z}}return s>Math.PI&&(s-=2*Math.PI),o=Math.sin(u),a=Math.cos(u),i=o*o,{x:((n=r/Math.sqrt(1-e*i))+l)*a*Math.cos(s),y:(n+l)*a*Math.sin(s),z:(n*(1-e)+l)*o}}function gdt(t,e,r,n){var o,i,a,s,u,l,c,f,h,p,d,y,v,g,m,b=t.x,w=t.y,S=t.z?t.z:0;if(o=Math.sqrt(b*b+w*w),i=Math.sqrt(b*b+w*w+S*S),o/r<1e-12){if(g=0,i/r<1e-12)return fpt,m=-n,{x:t.x,y:t.y,z:t.z}}else g=Math.atan2(w,b);a=S/i,f=(s=o/i)*(1-e)*(u=1/Math.sqrt(1-e*(2-e)*s*s)),h=a*u,v=0;do{v++,l=e*(c=r/Math.sqrt(1-e*h*h))/(c+(m=o*f+S*h-c*(1-e*h*h))),y=(d=a*(u=1/Math.sqrt(1-l*(2-l)*s*s)))*f-(p=s*(1-l)*u)*h,f=p,h=d}while(y*y>1e-24&&v<30);return{x:g,y:Math.atan(d/Math.abs(p)),z:m}}function mdt(t){return t===rpt||t===npt}function bdt(t,e,r){if(function(t,e){return t.datum_type===e.datum_type&&!(t.a!==e.a||Math.abs(t.es-e.es)>5e-11)&&(t.datum_type===rpt?t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]:t.datum_type!==npt||t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]&&t.datum_params[3]===e.datum_params[3]&&t.datum_params[4]===e.datum_params[4]&&t.datum_params[5]===e.datum_params[5]&&t.datum_params[6]===e.datum_params[6])}(t,e))return r;if(t.datum_type===apt||e.datum_type===apt)return r;var n=t.a,o=t.es;if(t.datum_type===opt){if(0!==wdt(t,!1,r))return;n=spt,o=lpt}var i=e.a,a=e.b,s=e.es;if(e.datum_type===opt&&(i=spt,a=upt,s=lpt),o===s&&n===i&&!mdt(t.datum_type)&&!mdt(e.datum_type))return r;if((r=vdt(r,o,n),mdt(t.datum_type)&&(r=function(t,e,r){if(e===rpt)return{x:t.x+r[0],y:t.y+r[1],z:t.z+r[2]};if(e===npt){var n=r[0],o=r[1],i=r[2],a=r[3],s=r[4],u=r[5],l=r[6];return{x:l*(t.x-u*t.y+s*t.z)+n,y:l*(u*t.x+t.y-a*t.z)+o,z:l*(-s*t.x+a*t.y+t.z)+i}}}(r,t.datum_type,t.datum_params)),mdt(e.datum_type)&&(r=function(t,e,r){if(e===rpt)return{x:t.x-r[0],y:t.y-r[1],z:t.z-r[2]};if(e===npt){var n=r[0],o=r[1],i=r[2],a=r[3],s=r[4],u=r[5],l=r[6],c=(t.x-n)/l,f=(t.y-o)/l,h=(t.z-i)/l;return{x:c+u*f-s*h,y:-u*c+f+a*h,z:s*c-a*f+h}}}(r,e.datum_type,e.datum_params)),r=gdt(r,s,i,a),e.datum_type===opt)&&0!==wdt(e,!0,r))return;return r}function wdt(t,e,r){if(null===t.grids||0===t.grids.length)return console.log("Grid shift grids not found"),-1;for(var n={x:-r.x,y:r.y},o={x:Number.NaN,y:Number.NaN},i=[],a=0;a<t.grids.length;a++){var s=t.grids[a];if(i.push(s.name),s.isNull){o=n;break}if(s.mandatory,null!==s.grid){var u=s.grid.subgrids[0],l=(Math.abs(u.del[1])+Math.abs(u.del[0]))/1e4,c=u.ll[0]-l,f=u.ll[1]-l,h=u.ll[0]+(u.lim[0]-1)*u.del[0]+l,p=u.ll[1]+(u.lim[1]-1)*u.del[1]+l;if(!(f>n.y||c>n.x||p<n.y||h<n.x||(o=Sdt(n,e,u),isNaN(o.x))))break}else if(s.mandatory)return console.log("Unable to find mandatory grid '"+s.name+"'"),-1}return isNaN(o.x)?(console.log("Failed to find a grid shift table for location '"+-n.x*gpt+" "+n.y*gpt+" tried: '"+i+"'"),-1):(r.x=-o.x,r.y=o.y,0)}function Sdt(t,e,r){var n={x:Number.NaN,y:Number.NaN};if(isNaN(t.x))return n;var o={x:t.x,y:t.y};o.x-=r.ll[0],o.y-=r.ll[1],o.x=Xpt(o.x-Math.PI)+Math.PI;var i=xdt(o,r);if(e){if(isNaN(i.x))return n;i.x=o.x-i.x,i.y=o.y-i.y;var a,s,u=9;do{if(s=xdt(i,r),isNaN(s.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}a={x:o.x-(s.x+i.x),y:o.y-(s.y+i.y)},i.x+=a.x,i.y+=a.y}while(u--&&Math.abs(a.x)>1e-12&&Math.abs(a.y)>1e-12);if(u<0)return console.log("Inverse grid shift iterator failed to converge."),n;n.x=Xpt(i.x+r.ll[0]),n.y=i.y+r.ll[1]}else isNaN(i.x)||(n.x=t.x+i.x,n.y=t.y+i.y);return n}function xdt(t,e){var r,n={x:t.x/e.del[0],y:t.y/e.del[1]},o=Math.floor(n.x),i=Math.floor(n.y),a=n.x-1*o,s=n.y-1*i,u={x:Number.NaN,y:Number.NaN};if(o<0||o>=e.lim[0])return u;if(i<0||i>=e.lim[1])return u;r=i*e.lim[0]+o;var l=e.cvs[r][0],c=e.cvs[r][1];r++;var f=e.cvs[r][0],h=e.cvs[r][1];r+=e.lim[0];var p=e.cvs[r][0],d=e.cvs[r][1];r--;var y=e.cvs[r][0],v=e.cvs[r][1],g=a*s,m=a*(1-s),b=(1-a)*(1-s),w=(1-a)*s;return u.x=b*l+m*f+w*y+g*p,u.y=b*c+m*h+w*v+g*d,u}function _dt(t,e,r){var n,o,i,a=r.x,s=r.y,u=r.z||0,l={};for(i=0;i<3;i++)if(!e||2!==i||void 0!==r.z)switch(0===i?(n=a,o=-1!=="ew".indexOf(t.axis[i])?"x":"y"):1===i?(n=s,o=-1!=="ns".indexOf(t.axis[i])?"y":"x"):(n=u,o="z"),t.axis[i]){case"e":l[o]=n;break;case"w":l[o]=-n;break;case"n":l[o]=n;break;case"s":l[o]=-n;break;case"u":void 0!==r[o]&&(l.z=n);break;case"d":void 0!==r[o]&&(l.z=-n);break;default:return null}return l}function Edt(t){var e={x:t[0],y:t[1]};return t.length>2&&(e.z=t[2]),t.length>3&&(e.m=t[3]),e}function Odt(t){if("function"==typeof Number.isFinite){if(Number.isFinite(t))return;throw new TypeError("coordinates must be finite numbers")}if("number"!=typeof t||t!=t||!isFinite(t))throw new TypeError("coordinates must be finite numbers")}function Pdt(t,e,r,n){var o,i=void 0!==(r=Array.isArray(r)?Edt(r):{x:r.x,y:r.y,z:r.z,m:r.m}).z;if(function(t){Odt(t.x),Odt(t.y)}(r),t.datum&&e.datum&&function(t,e){return(t.datum.datum_type===rpt||t.datum.datum_type===npt||t.datum.datum_type===opt)&&"WGS84"!==e.datumCode||(e.datum.datum_type===rpt||e.datum.datum_type===npt||e.datum.datum_type===opt)&&"WGS84"!==t.datumCode}(t,e)&&(r=Pdt(t,o=new ydt("WGS84"),r,n),t=o),n&&"enu"!==t.axis&&(r=_dt(t,!1,r)),"longlat"===t.projName)r={x:r.x*vpt,y:r.y*vpt,z:r.z||0};else if(t.to_meter&&(r={x:r.x*t.to_meter,y:r.y*t.to_meter,z:r.z||0}),!(r=t.inverse(r)))return;if(t.from_greenwich&&(r.x+=t.from_greenwich),r=bdt(t.datum,e.datum,r))return e.from_greenwich&&(r={x:r.x-e.from_greenwich,y:r.y,z:r.z||0}),"longlat"===e.projName?r={x:r.x*gpt,y:r.y*gpt,z:r.z||0}:(r=e.forward(r),e.to_meter&&(r={x:r.x/e.to_meter,y:r.y/e.to_meter,z:r.z||0})),n&&"enu"!==e.axis?_dt(e,!0,r):(i||delete r.z,r)}var kdt=ydt("WGS84");function Cdt(t,e,r,n){var o,i,a;return Array.isArray(r)?(o=Pdt(t,e,r,n)||{x:NaN,y:NaN},r.length>2?void 0!==t.name&&"geocent"===t.name||void 0!==e.name&&"geocent"===e.name?"number"==typeof o.z?[o.x,o.y,o.z].concat(r.splice(3)):[o.x,o.y,r[2]].concat(r.splice(3)):[o.x,o.y].concat(r.splice(2)):[o.x,o.y]):(i=Pdt(t,e,r,n),2===(a=Object.keys(r)).length?i:(a.forEach(function(n){if(void 0!==t.name&&"geocent"===t.name||void 0!==e.name&&"geocent"===e.name){if("x"===n||"y"===n||"z"===n)return}else if("x"===n||"y"===n)return;i[n]=r[n]}),i))}function Tdt(t){return t instanceof ydt?t:t.oProj?t.oProj:ydt(t)}var Adt=function(t,e,r){t=Tdt(t);var n,o=!1;return void 0===e?(e=t,t=kdt,o=!0):(void 0!==e.x||Array.isArray(e))&&(r=e,e=t,t=kdt,o=!0),e=Tdt(e),r?Cdt(t,e,r):(n={forward:function(r,n){return Cdt(t,e,r,n)},inverse:function(r,n){return Cdt(e,t,r,n)}},o&&(n.oProj=e),n)},Mdt=6,jdt="AJSAJS",Idt="AFAFAF",Ndt=65,Ldt=73,Rdt=79,Ddt=86,Bdt=90,Fdt={forward:Gdt,inverse:function(t){var e=Hdt(qdt(t.toUpperCase()));if(e.lat&&e.lon)return[e.lon,e.lat,e.lon,e.lat];return[e.left,e.bottom,e.right,e.top]},toPoint:Udt};function Gdt(t,e){return e=e||5,function(t,e){var r="00000"+t.easting,n="00000"+t.northing;return t.zoneNumber+t.zoneLetter+(p=t.easting,d=t.northing,y=t.zoneNumber,v=Wdt(y),g=Math.floor(p/1e5),m=Math.floor(d/1e5)%20,o=g,i=m,a=v,s=a-1,u=jdt.charCodeAt(s),l=Idt.charCodeAt(s),c=u+o-1,f=l+i,h=!1,c>Bdt&&(c=c-Bdt+Ndt-1,h=!0),(c===Ldt||u<Ldt&&c>Ldt||(c>Ldt||u<Ldt)&&h)&&c++,(c===Rdt||u<Rdt&&c>Rdt||(c>Rdt||u<Rdt)&&h)&&++c===Ldt&&c++,c>Bdt&&(c=c-Bdt+Ndt-1),f>Ddt?(f=f-Ddt+Ndt-1,h=!0):h=!1,(f===Ldt||l<Ldt&&f>Ldt||(f>Ldt||l<Ldt)&&h)&&f++,(f===Rdt||l<Rdt&&f>Rdt||(f>Rdt||l<Rdt)&&h)&&++f===Ldt&&f++,f>Ddt&&(f=f-Ddt+Ndt-1),String.fromCharCode(c)+String.fromCharCode(f))+r.substr(r.length-5,e)+n.substr(n.length-5,e);var o,i,a,s,u,l,c,f,h;var p,d,y,v,g,m}(function(t){var e,r,n,o,i,a,s,u=t.lat,l=t.lon,c=6378137,f=zdt(u),h=zdt(l);s=Math.floor((l+180)/6)+1,180===l&&(s=60);u>=56&&u<64&&l>=3&&l<12&&(s=32);u>=72&&u<84&&(l>=0&&l<9?s=31:l>=9&&l<21?s=33:l>=21&&l<33?s=35:l>=33&&l<42&&(s=37));a=zdt(6*(s-1)-180+3),.006739496752268451,e=c/Math.sqrt(1-.00669438*Math.sin(f)*Math.sin(f)),r=Math.tan(f)*Math.tan(f),n=.006739496752268451*Math.cos(f)*Math.cos(f),o=Math.cos(f)*(h-a),i=c*(.9983242984503243*f-.002514607064228144*Math.sin(2*f)+2639046602129982e-21*Math.sin(4*f)-3.418046101696858e-9*Math.sin(6*f));var p=.9996*e*(o+(1-r+n)*o*o*o/6+(5-18*r+r*r+72*n-.39089081163157013)*o*o*o*o*o/120)+5e5,d=.9996*(i+e*Math.tan(f)*(o*o/2+(5-r+9*n+4*n*n)*o*o*o*o/24+(61-58*r+r*r+600*n-2.2240339282485886)*o*o*o*o*o*o/720));u<0&&(d+=1e7);return{northing:Math.round(d),easting:Math.round(p),zoneNumber:s,zoneLetter:function(t){var e="Z";84>=t&&t>=72?e="X":72>t&&t>=64?e="W":64>t&&t>=56?e="V":56>t&&t>=48?e="U":48>t&&t>=40?e="T":40>t&&t>=32?e="S":32>t&&t>=24?e="R":24>t&&t>=16?e="Q":16>t&&t>=8?e="P":8>t&&t>=0?e="N":0>t&&t>=-8?e="M":-8>t&&t>=-16?e="L":-16>t&&t>=-24?e="K":-24>t&&t>=-32?e="J":-32>t&&t>=-40?e="H":-40>t&&t>=-48?e="G":-48>t&&t>=-56?e="F":-56>t&&t>=-64?e="E":-64>t&&t>=-72?e="D":-72>t&&t>=-80&&(e="C");return e}(u)}}({lat:t[1],lon:t[0]}),e)}function Udt(t){var e=Hdt(qdt(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat]:[(e.left+e.right)/2,(e.top+e.bottom)/2]}function zdt(t){return t*(Math.PI/180)}function Vdt(t){return t/Math.PI*180}function Hdt(t){var e=t.northing,r=t.easting,n=t.zoneLetter,o=t.zoneNumber;if(o<0||o>60)return null;var i,a,s,u,l,c,f,h,p=6378137,d=(1-Math.sqrt(.99330562))/(1+Math.sqrt(.99330562)),y=r-5e5,v=e;n<"N"&&(v-=1e7),c=6*(o-1)-180+3,h=(f=v/.9996/6367449.145945056)+(3*d/2-27*d*d*d/32)*Math.sin(2*f)+(21*d*d/16-55*d*d*d*d/32)*Math.sin(4*f)+151*d*d*d/96*Math.sin(6*f),i=p/Math.sqrt(1-.00669438*Math.sin(h)*Math.sin(h)),a=Math.tan(h)*Math.tan(h),s=.006739496752268451*Math.cos(h)*Math.cos(h),u=.99330562*p/Math.pow(1-.00669438*Math.sin(h)*Math.sin(h),1.5),l=y/(.9996*i);var g=h-i*Math.tan(h)/u*(l*l/2-(5+3*a+10*s-4*s*s-.06065547077041606)*l*l*l*l/24+(61+90*a+298*s+45*a*a-1.6983531815716497-3*s*s)*l*l*l*l*l*l/720);g=Vdt(g);var m,b=(l-(1+2*a+s)*l*l*l/6+(5-2*s+28*a-3*s*s+.05391597401814761+24*a*a)*l*l*l*l*l/120)/Math.cos(h);if(b=c+Vdt(b),t.accuracy){var w=Hdt({northing:t.northing+t.accuracy,easting:t.easting+t.accuracy,zoneLetter:t.zoneLetter,zoneNumber:t.zoneNumber});m={top:w.lat,right:w.lon,bottom:g,left:b}}else m={lat:g,lon:b};return m}function Wdt(t){var e=t%Mdt;return 0===e&&(e=Mdt),e}function qdt(t){if(t&&0===t.length)throw"MGRSPoint coverting from nothing";for(var e,r=t.length,n=null,o="",i=0;!/[A-Z]/.test(e=t.charAt(i));){if(i>=2)throw"MGRSPoint bad conversion from: "+t;o+=e,i++}var a=parseInt(o,10);if(0===i||i+3>r)throw"MGRSPoint bad conversion from: "+t;var s=t.charAt(i++);if(s<="A"||"B"===s||"Y"===s||s>="Z"||"I"===s||"O"===s)throw"MGRSPoint zone letter "+s+" not handled: "+t;n=t.substring(i,i+=2);for(var u=Wdt(a),l=function(t,e){var r=jdt.charCodeAt(e-1),n=1e5,o=!1;for(;r!==t.charCodeAt(0);){if(++r===Ldt&&r++,r===Rdt&&r++,r>Bdt){if(o)throw"Bad character: "+t;r=Ndt,o=!0}n+=1e5}return n}(n.charAt(0),u),c=function(t,e){if(t>"V")throw"MGRSPoint given invalid Northing "+t;var r=Idt.charCodeAt(e-1),n=0,o=!1;for(;r!==t.charCodeAt(0);){if(++r===Ldt&&r++,r===Rdt&&r++,r>Ddt){if(o)throw"Bad character: "+t;r=Ndt,o=!0}n+=1e5}return n}(n.charAt(1),u);c<Ydt(s);)c+=2e6;var f=r-i;if(f%2!=0)throw"MGRSPoint has to have an even number \nof digits after the zone letter and two 100km letters - front \nhalf for easting meters, second half for \nnorthing meters"+t;var h,p,d,y=f/2,v=0,g=0;return y>0&&(h=1e5/Math.pow(10,y),p=t.substring(i,i+y),v=parseFloat(p)*h,d=t.substring(i+y),g=parseFloat(d)*h),{easting:v+l,northing:g+c,zoneLetter:s,zoneNumber:a,accuracy:h}}function Ydt(t){var e;switch(t){case"C":e=11e5;break;case"D":e=2e6;break;case"E":e=28e5;break;case"F":e=37e5;break;case"G":e=46e5;break;case"H":e=55e5;break;case"J":e=64e5;break;case"K":e=73e5;break;case"L":e=82e5;break;case"M":e=91e5;break;case"N":e=0;break;case"P":e=8e5;break;case"Q":e=17e5;break;case"R":e=26e5;break;case"S":e=35e5;break;case"T":e=44e5;break;case"U":e=53e5;break;case"V":e=62e5;break;case"W":e=7e6;break;case"X":e=79e5;break;default:e=-1}if(e>=0)return e;throw"Invalid zone letter: "+t}function Xdt(t,e,r){if(!(this instanceof Xdt))return new Xdt(t,e,r);if(Array.isArray(t))this.x=t[0],this.y=t[1],this.z=t[2]||0;else if("object"==typeof t)this.x=t.x,this.y=t.y,this.z=t.z||0;else if("string"==typeof t&&void 0===e){var n=t.split(",");this.x=parseFloat(n[0],10),this.y=parseFloat(n[1],10),this.z=parseFloat(n[2],10)||0}else this.x=t,this.y=e,this.z=r||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}Xdt.fromMGRS=function(t){return new Xdt(Udt(t))},Xdt.prototype.toMGRS=function(t){return Gdt([this.x,this.y],t)};var Jdt=Xdt,Kdt=1,Qdt=.25,Zdt=.046875,$dt=.01953125,tyt=.01068115234375,eyt=.75,ryt=.46875,nyt=.013020833333333334,oyt=.007120768229166667,iyt=.3645833333333333,ayt=.005696614583333333,syt=.3076171875;function uyt(t){var e=[];e[0]=Kdt-t*(Qdt+t*(Zdt+t*($dt+t*tyt))),e[1]=t*(eyt-t*(Zdt+t*($dt+t*tyt)));var r=t*t;return e[2]=r*(ryt-t*(nyt+t*oyt)),r*=t,e[3]=r*(iyt-t*ayt),e[4]=r*t*syt,e}function lyt(t,e,r,n){return r*=e,e*=e,n[0]*t-r*(n[1]+e*(n[2]+e*(n[3]+e*n[4])))}var cyt=20;function fyt(t,e,r){for(var n=1/(1-e),o=t,i=cyt;i;--i){var a=Math.sin(o),s=1-e*a*a;if(o-=s=(lyt(o,a,Math.cos(o),r)-t)*(s*Math.sqrt(s))*n,Math.abs(s)<ypt)return o}return o}var hyt={init:function(){this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.es&&(this.en=uyt(this.es),this.ml0=lyt(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))},forward:function(t){var e,r,n,o=t.x,i=t.y,a=Xpt(o-this.long0),s=Math.sin(i),u=Math.cos(i);if(this.es){var l=u*a,c=Math.pow(l,2),f=this.ep2*Math.pow(u,2),h=Math.pow(f,2),p=Math.abs(u)>ypt?Math.tan(i):0,d=Math.pow(p,2),y=Math.pow(d,2);e=1-this.es*Math.pow(s,2),l/=Math.sqrt(e);var v=lyt(i,s,u,this.en);r=this.a*(this.k0*l*(1+c/6*(1-d+f+c/20*(5-18*d+y+14*f-58*d*f+c/42*(61+179*y-y*d-479*d)))))+this.x0,n=this.a*(this.k0*(v-this.ml0+s*a*l/2*(1+c/12*(5-d+9*f+4*h+c/30*(61+y-58*d+270*f-330*d*f+c/56*(1385+543*y-y*d-3111*d))))))+this.y0}else{var g=u*Math.sin(a);if(Math.abs(Math.abs(g)-1)<ypt)return 93;if(r=.5*this.a*this.k0*Math.log((1+g)/(1-g))+this.x0,n=u*Math.cos(a)/Math.sqrt(1-Math.pow(g,2)),(g=Math.abs(n))>=1){if(g-1>ypt)return 93;n=0}else n=Math.acos(n);i<0&&(n=-n),n=this.a*this.k0*(n-this.lat0)+this.y0}return t.x=r,t.y=n,t},inverse:function(t){var e,r,n,o,i=(t.x-this.x0)*(1/this.a),a=(t.y-this.y0)*(1/this.a);if(this.es)if(r=fyt(e=this.ml0+a/this.k0,this.es,this.en),Math.abs(r)<fpt){var s=Math.sin(r),u=Math.cos(r),l=Math.abs(u)>ypt?Math.tan(r):0,c=this.ep2*Math.pow(u,2),f=Math.pow(c,2),h=Math.pow(l,2),p=Math.pow(h,2);e=1-this.es*Math.pow(s,2);var d=i*Math.sqrt(e)/this.k0,y=Math.pow(d,2);n=r-(e*=l)*y/(1-this.es)*.5*(1-y/12*(5+3*h-9*c*h+c-4*f-y/30*(61+90*h-252*c*h+45*p+46*c-y/56*(1385+3633*h+4095*p+1574*p*h)))),o=Xpt(this.long0+d*(1-y/6*(1+2*h+c-y/20*(5+28*h+24*p+8*c*h+6*c-y/42*(61+662*h+1320*p+720*p*h))))/u)}else n=fpt*Ypt(a),o=0;else{var v=Math.exp(i/this.k0),g=.5*(v-1/v),m=this.lat0+a/this.k0,b=Math.cos(m);e=Math.sqrt((1-Math.pow(b,2))/(1+Math.pow(g,2))),n=Math.asin(e),a<0&&(n=-n),o=0===g&&0===b?0:Xpt(Math.atan2(g,b)+this.long0)}return t.x=o,t.y=n,t},names:["Fast_Transverse_Mercator","Fast Transverse Mercator"]};function pyt(t){var e=Math.exp(t);return e=(e-1/e)/2}function dyt(t,e){t=Math.abs(t),e=Math.abs(e);var r=Math.max(t,e),n=Math.min(t,e)/(r||1);return r*Math.sqrt(1+Math.pow(n,2))}function yyt(t){var e=Math.abs(t);return e=function(t){var e=1+t,r=e-1;return 0===r?t:t*Math.log(e)/r}(e*(1+e/(dyt(1,e)+1))),t<0?-e:e}function vyt(t,e){for(var r,n=2*Math.cos(2*e),o=t.length-1,i=t[o],a=0;--o>=0;)r=n*i-a+t[o],a=i,i=r;return e+r*Math.sin(2*e)}function gyt(t,e,r){for(var n,o,i=Math.sin(e),a=Math.cos(e),s=pyt(r),u=function(t){var e=Math.exp(t);return e=(e+1/e)/2}(r),l=2*a*u,c=-2*i*s,f=t.length-1,h=t[f],p=0,d=0,y=0;--f>=0;)n=d,o=p,h=l*(d=h)-n-c*(p=y)+t[f],y=c*d-o+l*p;return[(l=i*u)*h-(c=a*s)*y,l*y+c*h]}var myt={init:function(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(hyt.init.apply(this),this.forward=hyt.forward,this.inverse=hyt.inverse),this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var t=this.es/(1+Math.sqrt(1-this.es)),e=t/(2-t),r=e;this.cgb[0]=e*(2+e*(-2/3+e*(e*(116/45+e*(26/45+e*(-2854/675)))-2))),this.cbg[0]=e*(e*(2/3+e*(4/3+e*(-82/45+e*(32/45+e*(4642/4725)))))-2),r*=e,this.cgb[1]=r*(7/3+e*(e*(-227/45+e*(2704/315+e*(2323/945)))-1.6)),this.cbg[1]=r*(5/3+e*(-16/15+e*(-13/9+e*(904/315+e*(-1522/945))))),r*=e,this.cgb[2]=r*(56/15+e*(-136/35+e*(-1262/105+e*(73814/2835)))),this.cbg[2]=r*(-26/15+e*(34/21+e*(1.6+e*(-12686/2835)))),r*=e,this.cgb[3]=r*(4279/630+e*(-332/35+e*(-399572/14175))),this.cbg[3]=r*(1237/630+e*(e*(-24832/14175)-2.4)),r*=e,this.cgb[4]=r*(4174/315+e*(-144838/6237)),this.cbg[4]=r*(-734/315+e*(109598/31185)),r*=e,this.cgb[5]=r*(601676/22275),this.cbg[5]=r*(444337/155925),r=Math.pow(e,2),this.Qn=this.k0/(1+e)*(1+r*(.25+r*(1/64+r/256))),this.utg[0]=e*(e*(2/3+e*(-37/96+e*(1/360+e*(81/512+e*(-96199/604800)))))-.5),this.gtu[0]=e*(.5+e*(-2/3+e*(5/16+e*(41/180+e*(-127/288+e*(7891/37800)))))),this.utg[1]=r*(-1/48+e*(-1/15+e*(437/1440+e*(-46/105+e*(1118711/3870720))))),this.gtu[1]=r*(13/48+e*(e*(557/1440+e*(281/630+e*(-1983433/1935360)))-.6)),r*=e,this.utg[2]=r*(-17/480+e*(37/840+e*(209/4480+e*(-5569/90720)))),this.gtu[2]=r*(61/240+e*(-103/140+e*(15061/26880+e*(167603/181440)))),r*=e,this.utg[3]=r*(-4397/161280+e*(11/504+e*(830251/7257600))),this.gtu[3]=r*(49561/161280+e*(-179/168+e*(6601661/7257600))),r*=e,this.utg[4]=r*(-4583/161280+e*(108847/3991680)),this.gtu[4]=r*(34729/80640+e*(-3418889/1995840)),r*=e,this.utg[5]=-.03233083094085698*r,this.gtu[5]=.6650675310896665*r;var n=vyt(this.cbg,this.lat0);this.Zb=-this.Qn*(n+function(t,e){for(var r,n=2*Math.cos(e),o=t.length-1,i=t[o],a=0;--o>=0;)r=n*i-a+t[o],a=i,i=r;return Math.sin(e)*r}(this.gtu,2*n))},forward:function(t){var e=Xpt(t.x-this.long0),r=t.y;r=vyt(this.cbg,r);var n=Math.sin(r),o=Math.cos(r),i=Math.sin(e),a=Math.cos(e);r=Math.atan2(n,a*o),e=Math.atan2(i*o,dyt(n,o*a)),e=yyt(Math.tan(e));var s,u,l=gyt(this.gtu,2*r,2*e);return r+=l[0],e+=l[1],Math.abs(e)<=2.623395162778?(s=this.a*(this.Qn*e)+this.x0,u=this.a*(this.Qn*r+this.Zb)+this.y0):(s=1/0,u=1/0),t.x=s,t.y=u,t},inverse:function(t){var e,r,n=(t.x-this.x0)*(1/this.a),o=(t.y-this.y0)*(1/this.a);if(o=(o-this.Zb)/this.Qn,n/=this.Qn,Math.abs(n)<=2.623395162778){var i=gyt(this.utg,2*o,2*n);o+=i[0],n+=i[1],n=Math.atan(pyt(n));var a=Math.sin(o),s=Math.cos(o),u=Math.sin(n),l=Math.cos(n);o=Math.atan2(a*l,dyt(u,l*s)),e=Xpt((n=Math.atan2(u,l*s))+this.long0),r=vyt(this.cgb,o)}else e=1/0,r=1/0;return t.x=e,t.y=r,t},names:["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","tmerc"]};var byt={init:function(){var t=function(t,e){if(void 0===t){if((t=Math.floor(30*(Xpt(e)+Math.PI)/Math.PI)+1)<0)return 0;if(t>60)return 60}return t}(this.zone,this.long0);if(void 0===t)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(t)-183)*vpt,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,myt.init.apply(this),this.forward=myt.forward,this.inverse=myt.inverse},names:["Universal Transverse Mercator System","utm"],dependsOn:"etmerc"};function wyt(t,e){return Math.pow((1-t)/(1+t),e)}var Syt=20;var xyt={init:function(){var t=Math.sin(this.lat0),e=Math.cos(this.lat0);e*=e,this.rc=Math.sqrt(1-this.es)/(1-this.es*t*t),this.C=Math.sqrt(1+this.es*e*e/(1-this.es)),this.phic0=Math.asin(t/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+mpt)/(Math.pow(Math.tan(.5*this.lat0+mpt),this.C)*wyt(this.e*t,this.ratexp))},forward:function(t){var e=t.x,r=t.y;return t.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*r+mpt),this.C)*wyt(this.e*Math.sin(r),this.ratexp))-fpt,t.x=this.C*e,t},inverse:function(t){for(var e=t.x/this.C,r=t.y,n=Math.pow(Math.tan(.5*r+mpt)/this.K,1/this.C),o=Syt;o>0&&(r=2*Math.atan(n*wyt(this.e*Math.sin(t.y),-.5*this.e))-fpt,!(Math.abs(r-t.y)<1e-14));--o)t.y=r;return o?(t.x=e,t.y=r,t):null},names:["gauss"]};var _yt={init:function(){xyt.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))},forward:function(t){var e,r,n,o;return t.x=Xpt(t.x-this.long0),xyt.forward.apply(this,[t]),e=Math.sin(t.y),r=Math.cos(t.y),n=Math.cos(t.x),o=this.k0*this.R2/(1+this.sinc0*e+this.cosc0*r*n),t.x=o*r*Math.sin(t.x),t.y=o*(this.cosc0*e-this.sinc0*r*n),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t},inverse:function(t){var e,r,n,o,i;if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,i=Math.sqrt(t.x*t.x+t.y*t.y)){var a=2*Math.atan2(i,this.R2);e=Math.sin(a),r=Math.cos(a),o=Math.asin(r*this.sinc0+t.y*e*this.cosc0/i),n=Math.atan2(t.x*e,i*this.cosc0*r-t.y*this.sinc0*e)}else o=this.phic0,n=0;return t.x=n,t.y=o,xyt.inverse.apply(this,[t]),t.x=Xpt(t.x+this.long0),t},names:["Stereographic_North_Pole","Oblique_Stereographic","Polar_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"]};var Eyt={init:function(){this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=ypt&&(this.k0=.5*(1+Ypt(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=ypt&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=ypt&&(this.k0=.5*this.cons*qpt(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/Jpt(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=qpt(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-fpt,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))},forward:function(t){var e,r,n,o,i,a,s=t.x,u=t.y,l=Math.sin(u),c=Math.cos(u),f=Xpt(s-this.long0);return Math.abs(Math.abs(s-this.long0)-Math.PI)<=ypt&&Math.abs(u+this.lat0)<=ypt?(t.x=NaN,t.y=NaN,t):this.sphere?(e=2*this.k0/(1+this.sinlat0*l+this.coslat0*c*Math.cos(f)),t.x=this.a*e*c*Math.sin(f)+this.x0,t.y=this.a*e*(this.coslat0*l-this.sinlat0*c*Math.cos(f))+this.y0,t):(r=2*Math.atan(this.ssfn_(u,l,this.e))-fpt,o=Math.cos(r),n=Math.sin(r),Math.abs(this.coslat0)<=ypt?(i=Jpt(this.e,u*this.con,this.con*l),a=2*this.a*this.k0*i/this.cons,t.x=this.x0+a*Math.sin(s-this.long0),t.y=this.y0-this.con*a*Math.cos(s-this.long0),t):(Math.abs(this.sinlat0)<ypt?(e=2*this.a*this.k0/(1+o*Math.cos(f)),t.y=e*n):(e=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*n+this.cosX0*o*Math.cos(f))),t.y=e*(this.cosX0*n-this.sinX0*o*Math.cos(f))+this.y0),t.x=e*o*Math.sin(f)+this.x0,t))},inverse:function(t){var e,r,n,o,i;t.x-=this.x0,t.y-=this.y0;var a=Math.sqrt(t.x*t.x+t.y*t.y);if(this.sphere){var s=2*Math.atan(a/(2*this.a*this.k0));return e=this.long0,r=this.lat0,a<=ypt?(t.x=e,t.y=r,t):(r=Math.asin(Math.cos(s)*this.sinlat0+t.y*Math.sin(s)*this.coslat0/a),e=Math.abs(this.coslat0)<ypt?this.lat0>0?Xpt(this.long0+Math.atan2(t.x,-1*t.y)):Xpt(this.long0+Math.atan2(t.x,t.y)):Xpt(this.long0+Math.atan2(t.x*Math.sin(s),a*this.coslat0*Math.cos(s)-t.y*this.sinlat0*Math.sin(s))),t.x=e,t.y=r,t)}if(Math.abs(this.coslat0)<=ypt){if(a<=ypt)return r=this.lat0,e=this.long0,t.x=e,t.y=r,t;t.x*=this.con,t.y*=this.con,n=a*this.cons/(2*this.a*this.k0),r=this.con*Kpt(this.e,n),e=this.con*Xpt(this.con*this.long0+Math.atan2(t.x,-1*t.y))}else o=2*Math.atan(a*this.cosX0/(2*this.a*this.k0*this.ms1)),e=this.long0,a<=ypt?i=this.X0:(i=Math.asin(Math.cos(o)*this.sinX0+t.y*Math.sin(o)*this.cosX0/a),e=Xpt(this.long0+Math.atan2(t.x*Math.sin(o),a*this.cosX0*Math.cos(o)-t.y*this.sinX0*Math.sin(o)))),r=-1*Kpt(this.e,Math.tan(.5*(fpt+i)));return t.x=e,t.y=r,t},names:["stere","Stereographic_South_Pole","Polar Stereographic (variant B)"],ssfn_:function(t,e,r){return e*=r,Math.tan(.5*(fpt+t))*Math.pow((1-e)/(1+e),.5*r)}};var Oyt={init:function(){var t=this.lat0;this.lambda0=this.long0;var e=Math.sin(t),r=this.a,n=1/this.rf,o=2*n-Math.pow(n,2),i=this.e=Math.sqrt(o);this.R=this.k0*r*Math.sqrt(1-o)/(1-o*Math.pow(e,2)),this.alpha=Math.sqrt(1+o/(1-o)*Math.pow(Math.cos(t),4)),this.b0=Math.asin(e/this.alpha);var a=Math.log(Math.tan(Math.PI/4+this.b0/2)),s=Math.log(Math.tan(Math.PI/4+t/2)),u=Math.log((1+i*e)/(1-i*e));this.K=a-this.alpha*s+this.alpha*i/2*u},forward:function(t){var e=Math.log(Math.tan(Math.PI/4-t.y/2)),r=this.e/2*Math.log((1+this.e*Math.sin(t.y))/(1-this.e*Math.sin(t.y))),n=-this.alpha*(e+r)+this.K,o=2*(Math.atan(Math.exp(n))-Math.PI/4),i=this.alpha*(t.x-this.lambda0),a=Math.atan(Math.sin(i)/(Math.sin(this.b0)*Math.tan(o)+Math.cos(this.b0)*Math.cos(i))),s=Math.asin(Math.cos(this.b0)*Math.sin(o)-Math.sin(this.b0)*Math.cos(o)*Math.cos(i));return t.y=this.R/2*Math.log((1+Math.sin(s))/(1-Math.sin(s)))+this.y0,t.x=this.R*a+this.x0,t},inverse:function(t){for(var e=t.x-this.x0,r=t.y-this.y0,n=e/this.R,o=2*(Math.atan(Math.exp(r/this.R))-Math.PI/4),i=Math.asin(Math.cos(this.b0)*Math.sin(o)+Math.sin(this.b0)*Math.cos(o)*Math.cos(n)),a=Math.atan(Math.sin(n)/(Math.cos(this.b0)*Math.cos(n)-Math.sin(this.b0)*Math.tan(o))),s=this.lambda0+a/this.alpha,u=0,l=i,c=-1e3,f=0;Math.abs(l-c)>1e-7;){if(++f>20)return;u=1/this.alpha*(Math.log(Math.tan(Math.PI/4+i/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(l))/2)),c=l,l=2*Math.atan(Math.exp(u))-Math.PI/2}return t.x=s,t.y=l,t},names:["somerc"]},Pyt=1e-7;var kyt={init:function(){var t,e,r,n,o,i,a,s,u,l,c,f,h,p=0,d=0,y=0,v=0,g=0,m=0,b=0;this.no_off=(h="object"==typeof(f=this).PROJECTION?Object.keys(f.PROJECTION)[0]:f.PROJECTION,"no_uoff"in f||"no_off"in f||-1!==["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"].indexOf(h)),this.no_rot="no_rot"in this;var w=!1;"alpha"in this&&(w=!0);var S=!1;if("rectified_grid_angle"in this&&(S=!0),w&&(b=this.alpha),S&&(p=this.rectified_grid_angle*vpt),w||S)d=this.longc;else if(y=this.long1,g=this.lat1,v=this.long2,m=this.lat2,Math.abs(g-m)<=Pyt||(t=Math.abs(g))<=Pyt||Math.abs(t-fpt)<=Pyt||Math.abs(Math.abs(this.lat0)-fpt)<=Pyt||Math.abs(Math.abs(m)-fpt)<=Pyt)throw new Error;var x=1-this.es;e=Math.sqrt(x),Math.abs(this.lat0)>ypt?(s=Math.sin(this.lat0),r=Math.cos(this.lat0),t=1-this.es*s*s,this.B=r*r,this.B=Math.sqrt(1+this.es*this.B*this.B/x),this.A=this.B*this.k0*e/t,(o=(n=this.B*e/(r*Math.sqrt(t)))*n-1)<=0?o=0:(o=Math.sqrt(o),this.lat0<0&&(o=-o)),this.E=o+=n,this.E*=Math.pow(Jpt(this.e,this.lat0,s),this.B)):(this.B=1/e,this.A=this.k0,this.E=n=o=1),w||S?(w?(c=Math.asin(Math.sin(b)/n),S||(p=b)):(c=p,b=Math.asin(n*Math.sin(c))),this.lam0=d-Math.asin(.5*(o-1/o)*Math.tan(c))/this.B):(i=Math.pow(Jpt(this.e,g,Math.sin(g)),this.B),a=Math.pow(Jpt(this.e,m,Math.sin(m)),this.B),o=this.E/i,u=(a-i)/(a+i),l=((l=this.E*this.E)-a*i)/(l+a*i),(t=y-v)<-Math.pi?v-=bpt:t>Math.pi&&(v+=bpt),this.lam0=Xpt(.5*(y+v)-Math.atan(l*Math.tan(.5*this.B*(y-v))/u)/this.B),c=Math.atan(2*Math.sin(this.B*Xpt(y-this.lam0))/(o-1/o)),p=b=Math.asin(n*Math.sin(c))),this.singam=Math.sin(c),this.cosgam=Math.cos(c),this.sinrot=Math.sin(p),this.cosrot=Math.cos(p),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.A,this.B,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(n*n-1)/Math.cos(b))),this.lat0<0&&(this.u_0=-this.u_0)),o=.5*c,this.v_pole_n=this.ArB*Math.log(Math.tan(mpt-o)),this.v_pole_s=this.ArB*Math.log(Math.tan(mpt+o))},forward:function(t){var e,r,n,o,i,a,s,u,l={};if(t.x=t.x-this.lam0,Math.abs(Math.abs(t.y)-fpt)>ypt){if(e=.5*((i=this.E/Math.pow(Jpt(this.e,t.y,Math.sin(t.y)),this.B))-(a=1/i)),r=.5*(i+a),o=Math.sin(this.B*t.x),n=(e*this.singam-o*this.cosgam)/r,Math.abs(Math.abs(n)-1)<ypt)throw new Error;u=.5*this.ArB*Math.log((1-n)/(1+n)),a=Math.cos(this.B*t.x),s=Math.abs(a)<Pyt?this.A*t.x:this.ArB*Math.atan2(e*this.cosgam+o*this.singam,a)}else u=t.y>0?this.v_pole_n:this.v_pole_s,s=this.ArB*t.y;return this.no_rot?(l.x=s,l.y=u):(s-=this.u_0,l.x=u*this.cosrot+s*this.sinrot,l.y=s*this.cosrot-u*this.sinrot),l.x=this.a*l.x+this.x0,l.y=this.a*l.y+this.y0,l},inverse:function(t){var e,r,n,o,i,a,s,u={};if(t.x=(t.x-this.x0)*(1/this.a),t.y=(t.y-this.y0)*(1/this.a),this.no_rot?(r=t.y,e=t.x):(r=t.x*this.cosrot-t.y*this.sinrot,e=t.y*this.cosrot+t.x*this.sinrot+this.u_0),o=.5*((n=Math.exp(-this.BrA*r))-1/n),i=.5*(n+1/n),s=((a=Math.sin(this.BrA*e))*this.cosgam+o*this.singam)/i,Math.abs(Math.abs(s)-1)<ypt)u.x=0,u.y=s<0?-fpt:fpt;else{if(u.y=this.E/Math.sqrt((1+s)/(1-s)),u.y=Kpt(this.e,Math.pow(u.y,1/this.B)),u.y===1/0)throw new Error;u.x=-this.rB*Math.atan2(o*this.cosgam-a*this.singam,Math.cos(this.BrA*e))}return u.x+=this.lam0,u},names:["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"]};var Cyt={init:function(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<ypt)){var t=this.b/this.a;this.e=Math.sqrt(1-t*t);var e=Math.sin(this.lat1),r=Math.cos(this.lat1),n=qpt(this.e,e,r),o=Jpt(this.e,this.lat1,e),i=Math.sin(this.lat2),a=Math.cos(this.lat2),s=qpt(this.e,i,a),u=Jpt(this.e,this.lat2,i),l=Jpt(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>ypt?this.ns=Math.log(n/s)/Math.log(o/u):this.ns=e,isNaN(this.ns)&&(this.ns=e),this.f0=n/(this.ns*Math.pow(o,this.ns)),this.rh=this.a*this.f0*Math.pow(l,this.ns),this.title||(this.title="Lambert Conformal Conic")}},forward:function(t){var e=t.x,r=t.y;Math.abs(2*Math.abs(r)-Math.PI)<=ypt&&(r=Ypt(r)*(fpt-2*ypt));var n,o,i=Math.abs(Math.abs(r)-fpt);if(i>ypt)n=Jpt(this.e,r,Math.sin(r)),o=this.a*this.f0*Math.pow(n,this.ns);else{if((i=r*this.ns)<=0)return null;o=0}var a=this.ns*Xpt(e-this.long0);return t.x=this.k0*(o*Math.sin(a))+this.x0,t.y=this.k0*(this.rh-o*Math.cos(a))+this.y0,t},inverse:function(t){var e,r,n,o,i,a=(t.x-this.x0)/this.k0,s=this.rh-(t.y-this.y0)/this.k0;this.ns>0?(e=Math.sqrt(a*a+s*s),r=1):(e=-Math.sqrt(a*a+s*s),r=-1);var u=0;if(0!==e&&(u=Math.atan2(r*a,r*s)),0!==e||this.ns>0){if(r=1/this.ns,n=Math.pow(e/(this.a*this.f0),r),-9999===(o=Kpt(this.e,n)))return null}else o=-fpt;return i=Xpt(u/this.ns+this.long0),t.x=i,t.y=o,t},names:["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"]};var Tyt={init:function(){this.a=6377397.155,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.4334234309119251),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq},forward:function(t){var e,r,n,o,i,a,s,u=t.x,l=t.y,c=Xpt(u-this.long0);return e=Math.pow((1+this.e*Math.sin(l))/(1-this.e*Math.sin(l)),this.alfa*this.e/2),r=2*(Math.atan(this.k*Math.pow(Math.tan(l/2+this.s45),this.alfa)/e)-this.s45),n=-c*this.alfa,o=Math.asin(Math.cos(this.ad)*Math.sin(r)+Math.sin(this.ad)*Math.cos(r)*Math.cos(n)),i=Math.asin(Math.cos(r)*Math.sin(n)/Math.cos(o)),a=this.n*i,s=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(o/2+this.s45),this.n),t.y=s*Math.cos(a)/1,t.x=s*Math.sin(a)/1,this.czech||(t.y*=-1,t.x*=-1),t},inverse:function(t){var e,r,n,o,i,a,s,u=t.x;t.x=t.y,t.y=u,this.czech||(t.y*=-1,t.x*=-1),i=Math.sqrt(t.x*t.x+t.y*t.y),o=Math.atan2(t.y,t.x)/Math.sin(this.s0),n=2*(Math.atan(Math.pow(this.ro0/i,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),e=Math.asin(Math.cos(this.ad)*Math.sin(n)-Math.sin(this.ad)*Math.cos(n)*Math.cos(o)),r=Math.asin(Math.cos(n)*Math.sin(o)/Math.cos(e)),t.x=this.long0-r/this.alfa,a=e,s=0;var l=0;do{t.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(e/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(a))/(1-this.e*Math.sin(a)),this.e/2))-this.s45),Math.abs(a-t.y)<1e-10&&(s=1),a=t.y,l+=1}while(0===s&&l<15);return l>=15?null:t},names:["Krovak","krovak"]};function Ayt(t,e,r,n,o){return t*o-e*Math.sin(2*o)+r*Math.sin(4*o)-n*Math.sin(6*o)}function Myt(t){return 1-.25*t*(1+t/16*(3+1.25*t))}function jyt(t){return.375*t*(1+.25*t*(1+.46875*t))}function Iyt(t){return.05859375*t*t*(1+.75*t)}function Nyt(t){return t*t*t*(35/3072)}function Lyt(t,e,r){var n=e*r;return t/Math.sqrt(1-n*n)}function Ryt(t){return Math.abs(t)<fpt?t:t-Ypt(t)*Math.PI}function Dyt(t,e,r,n,o){var i,a;i=t/e;for(var s=0;s<15;s++)if(i+=a=(t-(e*i-r*Math.sin(2*i)+n*Math.sin(4*i)-o*Math.sin(6*i)))/(e-2*r*Math.cos(2*i)+4*n*Math.cos(4*i)-6*o*Math.cos(6*i)),Math.abs(a)<=1e-10)return i;return NaN}var Byt={init:function(){this.sphere||(this.e0=Myt(this.es),this.e1=jyt(this.es),this.e2=Iyt(this.es),this.e3=Nyt(this.es),this.ml0=this.a*Ayt(this.e0,this.e1,this.e2,this.e3,this.lat0))},forward:function(t){var e,r,n=t.x,o=t.y;if(n=Xpt(n-this.long0),this.sphere)e=this.a*Math.asin(Math.cos(o)*Math.sin(n)),r=this.a*(Math.atan2(Math.tan(o),Math.cos(n))-this.lat0);else{var i=Math.sin(o),a=Math.cos(o),s=Lyt(this.a,this.e,i),u=Math.tan(o)*Math.tan(o),l=n*Math.cos(o),c=l*l,f=this.es*a*a/(1-this.es);e=s*l*(1-c*u*(1/6-(8-u+8*f)*c/120)),r=this.a*Ayt(this.e0,this.e1,this.e2,this.e3,o)-this.ml0+s*i/a*c*(.5+(5-u+6*f)*c/24)}return t.x=e+this.x0,t.y=r+this.y0,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e,r,n=t.x/this.a,o=t.y/this.a;if(this.sphere){var i=o+this.lat0;e=Math.asin(Math.sin(i)*Math.cos(n)),r=Math.atan2(Math.tan(n),Math.cos(i))}else{var a=Dyt(this.ml0/this.a+o,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(a)-fpt)<=ypt)return t.x=this.long0,t.y=fpt,o<0&&(t.y*=-1),t;var s=Lyt(this.a,this.e,Math.sin(a)),u=s*s*s/this.a/this.a*(1-this.es),l=Math.pow(Math.tan(a),2),c=n*this.a/s,f=c*c;e=a-s*Math.tan(a)/u*c*c*(.5-(1+3*l)*c*c/24),r=c*(1-f*(l/3+(1+3*l)*l*f/15))/Math.cos(a)}return t.x=Xpt(r+this.long0),t.y=Ryt(e),t},names:["Cassini","Cassini_Soldner","cass"]};function Fyt(t,e){var r;return t>1e-7?(1-t*t)*(e/(1-(r=t*e)*r)-.5/t*Math.log((1-r)/(1+r))):2*e}var Gyt=.3333333333333333,Uyt=.17222222222222222,zyt=.10257936507936508,Vyt=.06388888888888888,Hyt=.0664021164021164,Wyt=.016415012942191543;var qyt={init:function(){var t,e=Math.abs(this.lat0);if(Math.abs(e-fpt)<ypt?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(e)<ypt?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0)switch(this.qp=Fyt(this.e,1),this.mmf=.5/(1-this.es),this.apa=function(t){var e,r=[];return r[0]=t*Gyt,e=t*t,r[0]+=e*Uyt,r[1]=e*Vyt,e*=t,r[0]+=e*zyt,r[1]+=e*Hyt,r[2]=e*Wyt,r}(this.es),this.mode){case this.N_POLE:case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),t=Math.sin(this.lat0),this.sinb1=Fyt(this.e,t)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*t*t)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))},forward:function(t){var e,r,n,o,i,a,s,u,l,c,f=t.x,h=t.y;if(f=Xpt(f-this.long0),this.sphere){if(i=Math.sin(h),c=Math.cos(h),n=Math.cos(f),this.mode===this.OBLIQ||this.mode===this.EQUIT){if((r=this.mode===this.EQUIT?1+c*n:1+this.sinph0*i+this.cosph0*c*n)<=ypt)return null;e=(r=Math.sqrt(2/r))*c*Math.sin(f),r*=this.mode===this.EQUIT?i:this.cosph0*i-this.sinph0*c*n}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(n=-n),Math.abs(h+this.lat0)<ypt)return null;r=mpt-.5*h,e=(r=2*(this.mode===this.S_POLE?Math.cos(r):Math.sin(r)))*Math.sin(f),r*=n}}else{switch(s=0,u=0,l=0,n=Math.cos(f),o=Math.sin(f),i=Math.sin(h),a=Fyt(this.e,i),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(s=a/this.qp,u=Math.sqrt(1-s*s)),this.mode){case this.OBLIQ:l=1+this.sinb1*s+this.cosb1*u*n;break;case this.EQUIT:l=1+u*n;break;case this.N_POLE:l=fpt+h,a=this.qp-a;break;case this.S_POLE:l=h-fpt,a=this.qp+a}if(Math.abs(l)<ypt)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:l=Math.sqrt(2/l),r=this.mode===this.OBLIQ?this.ymf*l*(this.cosb1*s-this.sinb1*u*n):(l=Math.sqrt(2/(1+u*n)))*s*this.ymf,e=this.xmf*l*u*o;break;case this.N_POLE:case this.S_POLE:a>=0?(e=(l=Math.sqrt(a))*o,r=n*(this.mode===this.S_POLE?l:-l)):e=r=0}}return t.x=this.a*e+this.x0,t.y=this.a*r+this.y0,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e,r,n,o,i,a,s,u,l,c,f=t.x/this.a,h=t.y/this.a;if(this.sphere){var p,d=0,y=0;if((r=.5*(p=Math.sqrt(f*f+h*h)))>1)return null;switch(r=2*Math.asin(r),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(y=Math.sin(r),d=Math.cos(r)),this.mode){case this.EQUIT:r=Math.abs(p)<=ypt?0:Math.asin(h*y/p),f*=y,h=d*p;break;case this.OBLIQ:r=Math.abs(p)<=ypt?this.lat0:Math.asin(d*this.sinph0+h*y*this.cosph0/p),f*=y*this.cosph0,h=(d-Math.sin(r)*this.sinph0)*p;break;case this.N_POLE:h=-h,r=fpt-r;break;case this.S_POLE:r-=fpt}e=0!==h||this.mode!==this.EQUIT&&this.mode!==this.OBLIQ?Math.atan2(f,h):0}else{if(s=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(f/=this.dd,h*=this.dd,(a=Math.sqrt(f*f+h*h))<ypt)return t.x=this.long0,t.y=this.lat0,t;o=2*Math.asin(.5*a/this.rq),n=Math.cos(o),f*=o=Math.sin(o),this.mode===this.OBLIQ?(s=n*this.sinb1+h*o*this.cosb1/a,i=this.qp*s,h=a*this.cosb1*n-h*this.sinb1*o):(s=h*o/a,i=this.qp*s,h=a*n)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(h=-h),!(i=f*f+h*h))return t.x=this.long0,t.y=this.lat0,t;s=1-i/this.qp,this.mode===this.S_POLE&&(s=-s)}e=Math.atan2(f,h),u=Math.asin(s),l=this.apa,c=u+u,r=u+l[0]*Math.sin(c)+l[1]*Math.sin(c+c)+l[2]*Math.sin(c+c+c)}return t.x=Xpt(this.long0+e),t.y=r,t},names:["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"],S_POLE:1,N_POLE:2,EQUIT:3,OBLIQ:4};function Yyt(t){return Math.abs(t)>1&&(t=t>1?1:-1),Math.asin(t)}var Xyt={init:function(){Math.abs(this.lat1+this.lat2)<ypt||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=qpt(this.e3,this.sin_po,this.cos_po),this.qs1=Fyt(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=qpt(this.e3,this.sin_po,this.cos_po),this.qs2=Fyt(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=Fyt(this.e3,this.sin_po),Math.abs(this.lat1-this.lat2)>ypt?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)},forward:function(t){var e=t.x,r=t.y;this.sin_phi=Math.sin(r),this.cos_phi=Math.cos(r);var n=Fyt(this.e3,this.sin_phi),o=this.a*Math.sqrt(this.c-this.ns0*n)/this.ns0,i=this.ns0*Xpt(e-this.long0),a=o*Math.sin(i)+this.x0,s=this.rh-o*Math.cos(i)+this.y0;return t.x=a,t.y=s,t},inverse:function(t){var e,r,n,o,i,a;return t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns0>=0?(e=Math.sqrt(t.x*t.x+t.y*t.y),n=1):(e=-Math.sqrt(t.x*t.x+t.y*t.y),n=-1),o=0,0!==e&&(o=Math.atan2(n*t.x,n*t.y)),n=e*this.ns0/this.a,this.sphere?a=Math.asin((this.c-n*n)/(2*this.ns0)):(r=(this.c-n*n)/this.ns0,a=this.phi1z(this.e3,r)),i=Xpt(o/this.ns0+this.long0),t.x=i,t.y=a,t},names:["Albers_Conic_Equal_Area","Albers","aea"],phi1z:function(t,e){var r,n,o,i,a,s=Yyt(.5*e);if(t<ypt)return s;for(var u=t*t,l=1;l<=25;l++)if(r=Math.sin(s),n=Math.cos(s),s+=a=.5*(i=1-(o=t*r)*o)*i/n*(e/(1-u)-r/i+.5/t*Math.log((1-o)/(1+o))),Math.abs(a)<=1e-7)return s;return null}};var Jyt={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1},forward:function(t){var e,r,n,o,i,a,s,u=t.x,l=t.y;return n=Xpt(u-this.long0),e=Math.sin(l),r=Math.cos(l),o=Math.cos(n),(i=this.sin_p14*e+this.cos_p14*r*o)>0||Math.abs(i)<=ypt?(a=this.x0+1*this.a*r*Math.sin(n)/i,s=this.y0+1*this.a*(this.cos_p14*e-this.sin_p14*r*o)/i):(a=this.x0+this.infinity_dist*r*Math.sin(n),s=this.y0+this.infinity_dist*(this.cos_p14*e-this.sin_p14*r*o)),t.x=a,t.y=s,t},inverse:function(t){var e,r,n,o,i,a;return t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,(e=Math.sqrt(t.x*t.x+t.y*t.y))?(o=Math.atan2(e,this.rc),r=Math.sin(o),a=Yyt((n=Math.cos(o))*this.sin_p14+t.y*r*this.cos_p14/e),i=Math.atan2(t.x*r,e*this.cos_p14*n-t.y*this.sin_p14*r),i=Xpt(this.long0+i)):(a=this.phic0,i=0),t.x=i,t.y=a,t},names:["gnom"]};var Kyt={init:function(){this.sphere||(this.k0=qpt(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))},forward:function(t){var e,r,n=t.x,o=t.y,i=Xpt(n-this.long0);if(this.sphere)e=this.x0+this.a*i*Math.cos(this.lat_ts),r=this.y0+this.a*Math.sin(o)/Math.cos(this.lat_ts);else{var a=Fyt(this.e,Math.sin(o));e=this.x0+this.a*this.k0*i,r=this.y0+this.a*a*.5/this.k0}return t.x=e,t.y=r,t},inverse:function(t){var e,r;return t.x-=this.x0,t.y-=this.y0,this.sphere?(e=Xpt(this.long0+t.x/this.a/Math.cos(this.lat_ts)),r=Math.asin(t.y/this.a*Math.cos(this.lat_ts))):(r=function(t,e){var r=1-(1-t*t)/(2*t)*Math.log((1-t)/(1+t));if(Math.abs(Math.abs(e)-r)<1e-6)return e<0?-1*fpt:fpt;for(var n,o,i,a,s=Math.asin(.5*e),u=0;u<30;u++)if(o=Math.sin(s),i=Math.cos(s),a=t*o,s+=n=Math.pow(1-a*a,2)/(2*i)*(e/(1-t*t)-o/(1-a*a)+.5/t*Math.log((1-a)/(1+a))),Math.abs(n)<=1e-10)return s;return NaN}(this.e,2*t.y*this.k0/this.a),e=Xpt(this.long0+t.x/(this.a*this.k0))),t.x=e,t.y=r,t},names:["cea"]};var Qyt={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)},forward:function(t){var e=t.x,r=t.y,n=Xpt(e-this.long0),o=Ryt(r-this.lat0);return t.x=this.x0+this.a*n*this.rc,t.y=this.y0+this.a*o,t},inverse:function(t){var e=t.x,r=t.y;return t.x=Xpt(this.long0+(e-this.x0)/(this.a*this.rc)),t.y=Ryt(this.lat0+(r-this.y0)/this.a),t},names:["Equirectangular","Equidistant_Cylindrical","eqc"]},Zyt=20;var $yt={init:function(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=Myt(this.es),this.e1=jyt(this.es),this.e2=Iyt(this.es),this.e3=Nyt(this.es),this.ml0=this.a*Ayt(this.e0,this.e1,this.e2,this.e3,this.lat0)},forward:function(t){var e,r,n,o=t.x,i=t.y,a=Xpt(o-this.long0);if(n=a*Math.sin(i),this.sphere)Math.abs(i)<=ypt?(e=this.a*a,r=-1*this.a*this.lat0):(e=this.a*Math.sin(n)/Math.tan(i),r=this.a*(Ryt(i-this.lat0)+(1-Math.cos(n))/Math.tan(i)));else if(Math.abs(i)<=ypt)e=this.a*a,r=-1*this.ml0;else{var s=Lyt(this.a,this.e,Math.sin(i))/Math.tan(i);e=s*Math.sin(n),r=this.a*Ayt(this.e0,this.e1,this.e2,this.e3,i)-this.ml0+s*(1-Math.cos(n))}return t.x=e+this.x0,t.y=r+this.y0,t},inverse:function(t){var e,r,n,o,i,a,s,u,l;if(n=t.x-this.x0,o=t.y-this.y0,this.sphere)if(Math.abs(o+this.a*this.lat0)<=ypt)e=Xpt(n/this.a+this.long0),r=0;else{var c;for(a=this.lat0+o/this.a,s=n*n/this.a/this.a+a*a,u=a,i=Zyt;i;--i)if(u+=l=-1*(a*(u*(c=Math.tan(u))+1)-u-.5*(u*u+s)*c)/((u-a)/c-1),Math.abs(l)<=ypt){r=u;break}e=Xpt(this.long0+Math.asin(n*Math.tan(u)/this.a)/Math.sin(r))}else if(Math.abs(o+this.ml0)<=ypt)r=0,e=Xpt(this.long0+n/this.a);else{var f,h,p,d,y;for(a=(this.ml0+o)/this.a,s=n*n/this.a/this.a+a*a,u=a,i=Zyt;i;--i)if(y=this.e*Math.sin(u),f=Math.sqrt(1-y*y)*Math.tan(u),h=this.a*Ayt(this.e0,this.e1,this.e2,this.e3,u),p=this.e0-2*this.e1*Math.cos(2*u)+4*this.e2*Math.cos(4*u)-6*this.e3*Math.cos(6*u),u-=l=(a*(f*(d=h/this.a)+1)-d-.5*f*(d*d+s))/(this.es*Math.sin(2*u)*(d*d+s-2*a*d)/(4*f)+(a-d)*(f*p-2/Math.sin(2*u))-p),Math.abs(l)<=ypt){r=u;break}f=Math.sqrt(1-this.es*Math.pow(Math.sin(r),2))*Math.tan(r),e=Xpt(this.long0+Math.asin(n*f/this.a)/Math.sin(r))}return t.x=e,t.y=r,t},names:["Polyconic","poly"]};var tvt={init:function(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013},forward:function(t){var e,r=t.x,n=t.y-this.lat0,o=r-this.long0,i=n/cpt*1e-5,a=o,s=1,u=0;for(e=1;e<=10;e++)s*=i,u+=this.A[e]*s;var l,c=u,f=a,h=1,p=0,d=0,y=0;for(e=1;e<=6;e++)l=p*c+h*f,h=h*c-p*f,p=l,d=d+this.B_re[e]*h-this.B_im[e]*p,y=y+this.B_im[e]*h+this.B_re[e]*p;return t.x=y*this.a+this.x0,t.y=d*this.a+this.y0,t},inverse:function(t){var e,r,n=t.x,o=t.y,i=n-this.x0,a=(o-this.y0)/this.a,s=i/this.a,u=1,l=0,c=0,f=0;for(e=1;e<=6;e++)r=l*a+u*s,u=u*a-l*s,l=r,c=c+this.C_re[e]*u-this.C_im[e]*l,f=f+this.C_im[e]*u+this.C_re[e]*l;for(var h=0;h<this.iterations;h++){var p,d=c,y=f,v=a,g=s;for(e=2;e<=6;e++)p=y*c+d*f,d=d*c-y*f,y=p,v+=(e-1)*(this.B_re[e]*d-this.B_im[e]*y),g+=(e-1)*(this.B_im[e]*d+this.B_re[e]*y);d=1,y=0;var m=this.B_re[1],b=this.B_im[1];for(e=2;e<=6;e++)p=y*c+d*f,d=d*c-y*f,y=p,m+=e*(this.B_re[e]*d-this.B_im[e]*y),b+=e*(this.B_im[e]*d+this.B_re[e]*y);var w=m*m+b*b;c=(v*m+g*b)/w,f=(g*m-v*b)/w}var S=c,x=f,_=1,E=0;for(e=1;e<=9;e++)_*=S,E+=this.D[e]*_;var O=this.lat0+E*cpt*1e5,P=this.long0+x;return t.x=P,t.y=O,t},names:["New_Zealand_Map_Grid","nzmg"]};var evt={init:function(){},forward:function(t){var e=t.x,r=t.y,n=Xpt(e-this.long0),o=this.x0+this.a*n,i=this.y0+this.a*Math.log(Math.tan(Math.PI/4+r/2.5))*1.25;return t.x=o,t.y=i,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e=Xpt(this.long0+t.x/this.a),r=2.5*(Math.atan(Math.exp(.8*t.y/this.a))-Math.PI/4);return t.x=e,t.y=r,t},names:["Miller_Cylindrical","mill"]},rvt=20;var nvt={init:function(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=uyt(this.es)},forward:function(t){var e,r,n=t.x,o=t.y;if(n=Xpt(n-this.long0),this.sphere){if(this.m)for(var i=this.n*Math.sin(o),a=rvt;a;--a){var s=(this.m*o+Math.sin(o)-i)/(this.m+Math.cos(o));if(o-=s,Math.abs(s)<ypt)break}else o=1!==this.n?Math.asin(this.n*Math.sin(o)):o;e=this.a*this.C_x*n*(this.m+Math.cos(o)),r=this.a*this.C_y*o}else{var u=Math.sin(o),l=Math.cos(o);r=this.a*lyt(o,u,l,this.en),e=this.a*n*l/Math.sqrt(1-this.es*u*u)}return t.x=e,t.y=r,t},inverse:function(t){var e,r,n;return t.x-=this.x0,r=t.x/this.a,t.y-=this.y0,e=t.y/this.a,this.sphere?(e/=this.C_y,r/=this.C_x*(this.m+Math.cos(e)),this.m?e=Yyt((this.m*e+Math.sin(e))/this.n):1!==this.n&&(e=Yyt(Math.sin(e)/this.n)),r=Xpt(r+this.long0),e=Ryt(e)):(e=fyt(t.y/this.a,this.es,this.en),(n=Math.abs(e))<fpt?(n=Math.sin(e),r=Xpt(this.long0+t.x*Math.sqrt(1-this.es*n*n)/(this.a*Math.cos(e)))):n-ypt<fpt&&(r=this.long0)),t.x=r,t.y=e,t},names:["Sinusoidal","sinu"]};var ovt={init:function(){},forward:function(t){for(var e=t.x,r=t.y,n=Xpt(e-this.long0),o=r,i=Math.PI*Math.sin(r);;){var a=-(o+Math.sin(o)-i)/(1+Math.cos(o));if(o+=a,Math.abs(a)<ypt)break}o/=2,Math.PI/2-Math.abs(r)<ypt&&(n=0);var s=.900316316158*this.a*n*Math.cos(o)+this.x0,u=1.4142135623731*this.a*Math.sin(o)+this.y0;return t.x=s,t.y=u,t},inverse:function(t){var e,r;t.x-=this.x0,t.y-=this.y0,r=t.y/(1.4142135623731*this.a),Math.abs(r)>.999999999999&&(r=.999999999999),e=Math.asin(r);var n=Xpt(this.long0+t.x/(.900316316158*this.a*Math.cos(e)));n<-Math.PI&&(n=-Math.PI),n>Math.PI&&(n=Math.PI),r=(2*e+Math.sin(2*e))/Math.PI,Math.abs(r)>1&&(r=1);var o=Math.asin(r);return t.x=n,t.y=o,t},names:["Mollweide","moll"]};var ivt={init:function(){Math.abs(this.lat1+this.lat2)<ypt||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=Myt(this.es),this.e1=jyt(this.es),this.e2=Iyt(this.es),this.e3=Nyt(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=qpt(this.e,this.sinphi,this.cosphi),this.ml1=Ayt(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<ypt?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=qpt(this.e,this.sinphi,this.cosphi),this.ml2=Ayt(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=Ayt(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))},forward:function(t){var e,r=t.x,n=t.y;if(this.sphere)e=this.a*(this.g-n);else{var o=Ayt(this.e0,this.e1,this.e2,this.e3,n);e=this.a*(this.g-o)}var i=this.ns*Xpt(r-this.long0),a=this.x0+e*Math.sin(i),s=this.y0+this.rh-e*Math.cos(i);return t.x=a,t.y=s,t},inverse:function(t){var e,r,n,o;t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns>=0?(r=Math.sqrt(t.x*t.x+t.y*t.y),e=1):(r=-Math.sqrt(t.x*t.x+t.y*t.y),e=-1);var i=0;return 0!==r&&(i=Math.atan2(e*t.x,e*t.y)),this.sphere?(o=Xpt(this.long0+i/this.ns),n=Ryt(this.g-r/this.a),t.x=o,t.y=n,t):(n=Dyt(this.g-r/this.a,this.e0,this.e1,this.e2,this.e3),o=Xpt(this.long0+i/this.ns),t.x=o,t.y=n,t)},names:["Equidistant_Conic","eqdc"]};var avt={init:function(){this.R=this.a},forward:function(t){var e,r,n=t.x,o=t.y,i=Xpt(n-this.long0);Math.abs(o)<=ypt&&(e=this.x0+this.R*i,r=this.y0);var a=Yyt(2*Math.abs(o/Math.PI));(Math.abs(i)<=ypt||Math.abs(Math.abs(o)-fpt)<=ypt)&&(e=this.x0,r=o>=0?this.y0+Math.PI*this.R*Math.tan(.5*a):this.y0+Math.PI*this.R*-Math.tan(.5*a));var s=.5*Math.abs(Math.PI/i-i/Math.PI),u=s*s,l=Math.sin(a),c=Math.cos(a),f=c/(l+c-1),h=f*f,p=f*(2/l-1),d=p*p,y=Math.PI*this.R*(s*(f-d)+Math.sqrt(u*(f-d)*(f-d)-(d+u)*(h-d)))/(d+u);i<0&&(y=-y),e=this.x0+y;var v=u+f;return y=Math.PI*this.R*(p*v-s*Math.sqrt((d+u)*(u+1)-v*v))/(d+u),r=o>=0?this.y0+y:this.y0-y,t.x=e,t.y=r,t},inverse:function(t){var e,r,n,o,i,a,s,u,l,c,f,h;return t.x-=this.x0,t.y-=this.y0,f=Math.PI*this.R,i=(n=t.x/f)*n+(o=t.y/f)*o,f=3*(o*o/(u=-2*(a=-Math.abs(o)*(1+i))+1+2*o*o+i*i)+(2*(s=a-2*o*o+n*n)*s*s/u/u/u-9*a*s/u/u)/27)/(l=(a-s*s/3/u)/u)/(c=2*Math.sqrt(-l/3)),Math.abs(f)>1&&(f=f>=0?1:-1),h=Math.acos(f)/3,r=t.y>=0?(-c*Math.cos(h+Math.PI/3)-s/3/u)*Math.PI:-(-c*Math.cos(h+Math.PI/3)-s/3/u)*Math.PI,e=Math.abs(n)<ypt?this.long0:Xpt(this.long0+Math.PI*(i-1+Math.sqrt(1+2*(n*n-o*o)+i*i))/2/n),t.x=e,t.y=r,t},names:["Van_der_Grinten_I","VanDerGrinten","vandg"]};var svt={init:function(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)},forward:function(t){var e,r,n,o,i,a,s,u,l,c,f,h,p,d,y,v,g,m,b,w,S,x,_=t.x,E=t.y,O=Math.sin(t.y),P=Math.cos(t.y),k=Xpt(_-this.long0);return this.sphere?Math.abs(this.sin_p12-1)<=ypt?(t.x=this.x0+this.a*(fpt-E)*Math.sin(k),t.y=this.y0-this.a*(fpt-E)*Math.cos(k),t):Math.abs(this.sin_p12+1)<=ypt?(t.x=this.x0+this.a*(fpt+E)*Math.sin(k),t.y=this.y0+this.a*(fpt+E)*Math.cos(k),t):(m=this.sin_p12*O+this.cos_p12*P*Math.cos(k),g=(v=Math.acos(m))?v/Math.sin(v):1,t.x=this.x0+this.a*g*P*Math.sin(k),t.y=this.y0+this.a*g*(this.cos_p12*O-this.sin_p12*P*Math.cos(k)),t):(e=Myt(this.es),r=jyt(this.es),n=Iyt(this.es),o=Nyt(this.es),Math.abs(this.sin_p12-1)<=ypt?(i=this.a*Ayt(e,r,n,o,fpt),a=this.a*Ayt(e,r,n,o,E),t.x=this.x0+(i-a)*Math.sin(k),t.y=this.y0-(i-a)*Math.cos(k),t):Math.abs(this.sin_p12+1)<=ypt?(i=this.a*Ayt(e,r,n,o,fpt),a=this.a*Ayt(e,r,n,o,E),t.x=this.x0+(i+a)*Math.sin(k),t.y=this.y0+(i+a)*Math.cos(k),t):(s=O/P,u=Lyt(this.a,this.e,this.sin_p12),l=Lyt(this.a,this.e,O),c=Math.atan((1-this.es)*s+this.es*u*this.sin_p12/(l*P)),b=0===(f=Math.atan2(Math.sin(k),this.cos_p12*Math.tan(c)-this.sin_p12*Math.cos(k)))?Math.asin(this.cos_p12*Math.sin(c)-this.sin_p12*Math.cos(c)):Math.abs(Math.abs(f)-Math.PI)<=ypt?-Math.asin(this.cos_p12*Math.sin(c)-this.sin_p12*Math.cos(c)):Math.asin(Math.sin(k)*Math.cos(c)/Math.sin(f)),h=this.e*this.sin_p12/Math.sqrt(1-this.es),v=u*b*(1-(w=b*b)*(y=(p=this.e*this.cos_p12*Math.cos(f)/Math.sqrt(1-this.es))*p)*(1-y)/6+(S=w*b)/8*(d=h*p)*(1-2*y)+(x=S*b)/120*(y*(4-7*y)-3*h*h*(1-7*y))-x*b/48*d),t.x=this.x0+v*Math.sin(f),t.y=this.y0+v*Math.cos(f),t))},inverse:function(t){var e,r,n,o,i,a,s,u,l,c,f,h,p,d,y,v,g,m,b,w,S,x,_;if(t.x-=this.x0,t.y-=this.y0,this.sphere){if((e=Math.sqrt(t.x*t.x+t.y*t.y))>2*fpt*this.a)return;return r=e/this.a,n=Math.sin(r),o=Math.cos(r),i=this.long0,Math.abs(e)<=ypt?a=this.lat0:(a=Yyt(o*this.sin_p12+t.y*n*this.cos_p12/e),s=Math.abs(this.lat0)-fpt,i=Math.abs(s)<=ypt?this.lat0>=0?Xpt(this.long0+Math.atan2(t.x,-t.y)):Xpt(this.long0-Math.atan2(-t.x,t.y)):Xpt(this.long0+Math.atan2(t.x*n,e*this.cos_p12*o-t.y*this.sin_p12*n))),t.x=i,t.y=a,t}return u=Myt(this.es),l=jyt(this.es),c=Iyt(this.es),f=Nyt(this.es),Math.abs(this.sin_p12-1)<=ypt?(a=Dyt(((h=this.a*Ayt(u,l,c,f,fpt))-(e=Math.sqrt(t.x*t.x+t.y*t.y)))/this.a,u,l,c,f),i=Xpt(this.long0+Math.atan2(t.x,-1*t.y)),t.x=i,t.y=a,t):Math.abs(this.sin_p12+1)<=ypt?(h=this.a*Ayt(u,l,c,f,fpt),a=Dyt(((e=Math.sqrt(t.x*t.x+t.y*t.y))-h)/this.a,u,l,c,f),i=Xpt(this.long0+Math.atan2(t.x,t.y)),t.x=i,t.y=a,t):(e=Math.sqrt(t.x*t.x+t.y*t.y),y=Math.atan2(t.x,t.y),p=Lyt(this.a,this.e,this.sin_p12),v=Math.cos(y),m=-(g=this.e*this.cos_p12*v)*g/(1-this.es),b=3*this.es*(1-m)*this.sin_p12*this.cos_p12*v/(1-this.es),x=1-m*(S=(w=e/p)-m*(1+m)*Math.pow(w,3)/6-b*(1+3*m)*Math.pow(w,4)/24)*S/2-w*S*S*S/6,d=Math.asin(this.sin_p12*Math.cos(S)+this.cos_p12*Math.sin(S)*v),i=Xpt(this.long0+Math.asin(Math.sin(y)*Math.sin(S)/Math.cos(d))),_=Math.sin(d),a=Math.atan2((_-this.es*x*this.sin_p12)*Math.tan(d),_*(1-this.es)),t.x=i,t.y=a,t)},names:["Azimuthal_Equidistant","aeqd"]};var uvt={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)},forward:function(t){var e,r,n,o,i,a,s,u=t.x,l=t.y;return n=Xpt(u-this.long0),e=Math.sin(l),r=Math.cos(l),o=Math.cos(n),((i=this.sin_p14*e+this.cos_p14*r*o)>0||Math.abs(i)<=ypt)&&(a=1*this.a*r*Math.sin(n),s=this.y0+1*this.a*(this.cos_p14*e-this.sin_p14*r*o)),t.x=a,t.y=s,t},inverse:function(t){var e,r,n,o,i,a,s;return t.x-=this.x0,t.y-=this.y0,r=Yyt((e=Math.sqrt(t.x*t.x+t.y*t.y))/this.a),n=Math.sin(r),o=Math.cos(r),a=this.long0,Math.abs(e)<=ypt?(s=this.lat0,t.x=a,t.y=s,t):(s=Yyt(o*this.sin_p14+t.y*n*this.cos_p14/e),i=Math.abs(this.lat0)-fpt,Math.abs(i)<=ypt?(a=this.lat0>=0?Xpt(this.long0+Math.atan2(t.x,-t.y)):Xpt(this.long0-Math.atan2(-t.x,t.y)),t.x=a,t.y=s,t):(a=Xpt(this.long0+Math.atan2(t.x*n,e*this.cos_p14*o-t.y*this.sin_p14*n)),t.x=a,t.y=s,t))},names:["ortho"]},lvt={FRONT:1,RIGHT:2,BACK:3,LEFT:4,TOP:5,BOTTOM:6},cvt={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4};function fvt(t,e,r,n){var o;return t<ypt?(n.value=cvt.AREA_0,o=0):(o=Math.atan2(e,r),Math.abs(o)<=mpt?n.value=cvt.AREA_0:o>mpt&&o<=fpt+mpt?(n.value=cvt.AREA_1,o-=fpt):o>fpt+mpt||o<=-(fpt+mpt)?(n.value=cvt.AREA_2,o=o>=0?o-wpt:o+wpt):(n.value=cvt.AREA_3,o+=fpt)),o}function hvt(t,e){var r=t+e;return r<-wpt?r+=bpt:r>+wpt&&(r-=bpt),r}var pvt={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=fpt-mpt/2?this.face=lvt.TOP:this.lat0<=-(fpt-mpt/2)?this.face=lvt.BOTTOM:Math.abs(this.long0)<=mpt?this.face=lvt.FRONT:Math.abs(this.long0)<=fpt+mpt?this.face=this.long0>0?lvt.RIGHT:lvt.LEFT:this.face=lvt.BACK,0!==this.es&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)},forward:function(t){var e,r,n,o,i,a,s={x:0,y:0},u={value:0};if(t.x-=this.long0,e=0!==this.es?Math.atan(this.one_minus_f_squared*Math.tan(t.y)):t.y,r=t.x,this.face===lvt.TOP)o=fpt-e,r>=mpt&&r<=fpt+mpt?(u.value=cvt.AREA_0,n=r-fpt):r>fpt+mpt||r<=-(fpt+mpt)?(u.value=cvt.AREA_1,n=r>0?r-wpt:r+wpt):r>-(fpt+mpt)&&r<=-mpt?(u.value=cvt.AREA_2,n=r+fpt):(u.value=cvt.AREA_3,n=r);else if(this.face===lvt.BOTTOM)o=fpt+e,r>=mpt&&r<=fpt+mpt?(u.value=cvt.AREA_0,n=-r+fpt):r<mpt&&r>=-mpt?(u.value=cvt.AREA_1,n=-r):r<-mpt&&r>=-(fpt+mpt)?(u.value=cvt.AREA_2,n=-r-fpt):(u.value=cvt.AREA_3,n=r>0?-r+wpt:-r-wpt);else{var l,c,f,h,p,d;this.face===lvt.RIGHT?r=hvt(r,+fpt):this.face===lvt.BACK?r=hvt(r,+wpt):this.face===lvt.LEFT&&(r=hvt(r,-fpt)),h=Math.sin(e),p=Math.cos(e),d=Math.sin(r),l=p*Math.cos(r),c=p*d,f=h,this.face===lvt.FRONT?n=fvt(o=Math.acos(l),f,c,u):this.face===lvt.RIGHT?n=fvt(o=Math.acos(c),f,-l,u):this.face===lvt.BACK?n=fvt(o=Math.acos(-l),f,-c,u):this.face===lvt.LEFT?n=fvt(o=Math.acos(-c),f,l,u):(o=n=0,u.value=cvt.AREA_0)}return a=Math.atan(12/wpt*(n+Math.acos(Math.sin(n)*Math.cos(mpt))-fpt)),i=Math.sqrt((1-Math.cos(o))/(Math.cos(a)*Math.cos(a))/(1-Math.cos(Math.atan(1/Math.cos(n))))),u.value===cvt.AREA_1?a+=fpt:u.value===cvt.AREA_2?a+=wpt:u.value===cvt.AREA_3&&(a+=1.5*wpt),s.x=i*Math.cos(a),s.y=i*Math.sin(a),s.x=s.x*this.a+this.x0,s.y=s.y*this.a+this.y0,t.x=s.x,t.y=s.y,t},inverse:function(t){var e,r,n,o,i,a,s,u,l,c,f,h,p={lam:0,phi:0},d={value:0};if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,r=Math.atan(Math.sqrt(t.x*t.x+t.y*t.y)),e=Math.atan2(t.y,t.x),t.x>=0&&t.x>=Math.abs(t.y)?d.value=cvt.AREA_0:t.y>=0&&t.y>=Math.abs(t.x)?(d.value=cvt.AREA_1,e-=fpt):t.x<0&&-t.x>=Math.abs(t.y)?(d.value=cvt.AREA_2,e=e<0?e+wpt:e-wpt):(d.value=cvt.AREA_3,e+=fpt),l=wpt/12*Math.tan(e),i=Math.sin(l)/(Math.cos(l)-1/Math.sqrt(2)),a=Math.atan(i),(s=1-(n=Math.cos(e))*n*(o=Math.tan(r))*o*(1-Math.cos(Math.atan(1/Math.cos(a)))))<-1?s=-1:s>1&&(s=1),this.face===lvt.TOP)u=Math.acos(s),p.phi=fpt-u,d.value===cvt.AREA_0?p.lam=a+fpt:d.value===cvt.AREA_1?p.lam=a<0?a+wpt:a-wpt:d.value===cvt.AREA_2?p.lam=a-fpt:p.lam=a;else if(this.face===lvt.BOTTOM)u=Math.acos(s),p.phi=u-fpt,d.value===cvt.AREA_0?p.lam=-a+fpt:d.value===cvt.AREA_1?p.lam=-a:d.value===cvt.AREA_2?p.lam=-a-fpt:p.lam=a<0?-a-wpt:-a+wpt;else{var y,v,g;l=(y=s)*y,v=(l+=(g=l>=1?0:Math.sqrt(1-l)*Math.sin(a))*g)>=1?0:Math.sqrt(1-l),d.value===cvt.AREA_1?(l=v,v=-g,g=l):d.value===cvt.AREA_2?(v=-v,g=-g):d.value===cvt.AREA_3&&(l=v,v=g,g=-l),this.face===lvt.RIGHT?(l=y,y=-v,v=l):this.face===lvt.BACK?(y=-y,v=-v):this.face===lvt.LEFT&&(l=y,y=v,v=-l),p.phi=Math.acos(-g)-fpt,p.lam=Math.atan2(v,y),this.face===lvt.RIGHT?p.lam=hvt(p.lam,-fpt):this.face===lvt.BACK?p.lam=hvt(p.lam,-wpt):this.face===lvt.LEFT&&(p.lam=hvt(p.lam,+fpt))}return 0!==this.es&&(c=p.phi<0?1:0,f=Math.tan(p.phi),h=this.b/Math.sqrt(f*f+this.one_minus_f_squared),p.phi=Math.atan(Math.sqrt(this.a*this.a-h*h)/(this.one_minus_f*h)),c&&(p.phi=-p.phi)),p.lam+=this.long0,t.x=p.lam,t.y=p.phi,t},names:["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"]},dvt=[[1,2.2199e-17,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-9.86701e-7],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,1.8736e-8],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,9.34959e-7],[.7986,-.00755338,-500009e-10,9.35324e-7],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],yvt=[[-5.20417e-18,.0124,1.21431e-18,-8.45284e-11],[.062,.0124,-1.26793e-9,4.22642e-10],[.124,.0124,5.07171e-9,-1.60604e-9],[.186,.0123999,-1.90189e-8,6.00152e-9],[.248,.0124002,7.10039e-8,-2.24e-8],[.31,.0123992,-2.64997e-7,8.35986e-8],[.372,.0124029,9.88983e-7,-3.11994e-7],[.434,.0123893,-369093e-11,-4.35621e-7],[.4958,.0123198,-102252e-10,-3.45523e-7],[.5571,.0121916,-154081e-10,-5.82288e-7],[.6176,.0119938,-241424e-10,-5.25327e-7],[.6769,.011713,-320223e-10,-5.16405e-7],[.7346,.0113541,-397684e-10,-6.09052e-7],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-1.40374e-9],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],vvt=.8487,gvt=1.3523,mvt=gpt/5,bvt=1/mvt,wvt=18,Svt=function(t,e){return t[0]+e*(t[1]+e*(t[2]+e*t[3]))},xvt=function(t,e){return t[1]+e*(2*t[2]+3*e*t[3])};var _vt={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"},forward:function(t){var e=Xpt(t.x-this.long0),r=Math.abs(t.y),n=Math.floor(r*mvt);n<0?n=0:n>=wvt&&(n=wvt-1),r=gpt*(r-bvt*n);var o={x:Svt(dvt[n],r)*e,y:Svt(yvt[n],r)};return t.y<0&&(o.y=-o.y),o.x=o.x*this.a*vvt+this.x0,o.y=o.y*this.a*gvt+this.y0,o},inverse:function(t){var e={x:(t.x-this.x0)/(this.a*vvt),y:Math.abs(t.y-this.y0)/(this.a*gvt)};if(e.y>=1)e.x/=dvt[wvt][0],e.y=t.y<0?-fpt:fpt;else{var r=Math.floor(e.y*wvt);for(r<0?r=0:r>=wvt&&(r=wvt-1);;)if(yvt[r][0]>e.y)--r;else{if(!(yvt[r+1][0]<=e.y))break;++r}var n=yvt[r],o=5*(e.y-n[0])/(yvt[r+1][0]-n[0]);o=function(t,e,r,n){for(var o=e;n;--n){var i=t(o);if(o-=i,Math.abs(i)<r)break}return o}(function(t){return(Svt(n,t)-e.y)/xvt(n,t)},o,ypt,100),e.x/=Svt(dvt[r],o),e.y=(5*r+o)*vpt,t.y<0&&(e.y=-e.y)}return e.x=Xpt(e.x+this.long0),e},names:["Robinson","robin"]};var Evt={init:function(){this.name="geocent"},forward:function(t){return vdt(t,this.es,this.a)},inverse:function(t){return gdt(t,this.es,this.a,this.b)},names:["Geocentric","geocentric","geocent","Geocent"]},Ovt={N_POLE:0,S_POLE:1,EQUIT:2,OBLIQ:3},Pvt={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};var kvt={init:function(){if(Object.keys(Pvt).forEach(function(t){if(void 0===this[t])this[t]=Pvt[t].def;else{if(Pvt[t].num&&isNaN(this[t]))throw new Error("Invalid parameter value, must be numeric "+t+" = "+this[t]);Pvt[t].num&&(this[t]=parseFloat(this[t]))}Pvt[t].degrees&&(this[t]=this[t]*vpt)}.bind(this)),Math.abs(Math.abs(this.lat0)-fpt)<ypt?this.mode=this.lat0<0?Ovt.S_POLE:Ovt.N_POLE:Math.abs(this.lat0)<ypt?this.mode=Ovt.EQUIT:(this.mode=Ovt.OBLIQ,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var t=this.tilt,e=this.azi;this.cg=Math.cos(e),this.sg=Math.sin(e),this.cw=Math.cos(t),this.sw=Math.sin(t)},forward:function(t){t.x-=this.long0;var e,r,n,o,i=Math.sin(t.y),a=Math.cos(t.y),s=Math.cos(t.x);switch(this.mode){case Ovt.OBLIQ:r=this.sinph0*i+this.cosph0*a*s;break;case Ovt.EQUIT:r=a*s;break;case Ovt.S_POLE:r=-i;break;case Ovt.N_POLE:r=i}switch(e=(r=this.pn1/(this.p-r))*a*Math.sin(t.x),this.mode){case Ovt.OBLIQ:r*=this.cosph0*i-this.sinph0*a*s;break;case Ovt.EQUIT:r*=i;break;case Ovt.N_POLE:r*=-a*s;break;case Ovt.S_POLE:r*=a*s}return o=1/((n=r*this.cg+e*this.sg)*this.sw*this.h1+this.cw),e=(e*this.cg-r*this.sg)*this.cw*o,r=n*o,t.x=e*this.a,t.y=r*this.a,t},inverse:function(t){t.x/=this.a,t.y/=this.a;var e,r,n,o={x:t.x,y:t.y};n=1/(this.pn1-t.y*this.sw),e=this.pn1*t.x*n,r=this.pn1*t.y*this.cw*n,t.x=e*this.cg+r*this.sg,t.y=r*this.cg-e*this.sg;var i=dyt(t.x,t.y);if(Math.abs(i)<ypt)o.x=0,o.y=t.y;else{var a,s;switch(s=1-i*i*this.pfact,s=(this.p-Math.sqrt(s))/(this.pn1/i+i/this.pn1),a=Math.sqrt(1-s*s),this.mode){case Ovt.OBLIQ:o.y=Math.asin(a*this.sinph0+t.y*s*this.cosph0/i),t.y=(a-this.sinph0*Math.sin(o.y))*i,t.x*=s*this.cosph0;break;case Ovt.EQUIT:o.y=Math.asin(t.y*s/i),t.y=a*i,t.x*=s;break;case Ovt.N_POLE:o.y=Math.asin(a),t.y=-t.y;break;case Ovt.S_POLE:o.y=-Math.asin(a)}o.x=Math.atan2(t.x,t.y)}return t.x=o.x+this.long0,t.y=o.y,t},names:["Tilted_Perspective","tpers"]};var Cvt={init:function(){if(this.flip_axis="x"===this.sweep?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw new Error;if(this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,0!==this.es){var t=1-this.es,e=1/t;this.radius_p=Math.sqrt(t),this.radius_p2=t,this.radius_p_inv2=e,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";this.title||(this.title="Geostationary Satellite View")},forward:function(t){var e,r,n,o,i=t.x,a=t.y;if(i-=this.long0,"ellipse"===this.shape){a=Math.atan(this.radius_p2*Math.tan(a));var s=this.radius_p/dyt(this.radius_p*Math.cos(a),Math.sin(a));if(r=s*Math.cos(i)*Math.cos(a),n=s*Math.sin(i)*Math.cos(a),o=s*Math.sin(a),(this.radius_g-r)*r-n*n-o*o*this.radius_p_inv2<0)return t.x=Number.NaN,t.y=Number.NaN,t;e=this.radius_g-r,this.flip_axis?(t.x=this.radius_g_1*Math.atan(n/dyt(o,e)),t.y=this.radius_g_1*Math.atan(o/e)):(t.x=this.radius_g_1*Math.atan(n/e),t.y=this.radius_g_1*Math.atan(o/dyt(n,e)))}else"sphere"===this.shape&&(e=Math.cos(a),r=Math.cos(i)*e,n=Math.sin(i)*e,o=Math.sin(a),e=this.radius_g-r,this.flip_axis?(t.x=this.radius_g_1*Math.atan(n/dyt(o,e)),t.y=this.radius_g_1*Math.atan(o/e)):(t.x=this.radius_g_1*Math.atan(n/e),t.y=this.radius_g_1*Math.atan(o/dyt(n,e))));return t.x=t.x*this.a,t.y=t.y*this.a,t},inverse:function(t){var e,r,n,o,i=-1,a=0,s=0;if(t.x=t.x/this.a,t.y=t.y/this.a,"ellipse"===this.shape){this.flip_axis?(s=Math.tan(t.y/this.radius_g_1),a=Math.tan(t.x/this.radius_g_1)*dyt(1,s)):(a=Math.tan(t.x/this.radius_g_1),s=Math.tan(t.y/this.radius_g_1)*dyt(1,a));var u=s/this.radius_p;if(e=a*a+u*u+i*i,(n=(r=2*this.radius_g*i)*r-4*e*this.C)<0)return t.x=Number.NaN,t.y=Number.NaN,t;o=(-r-Math.sqrt(n))/(2*e),i=this.radius_g+o*i,a*=o,s*=o,t.x=Math.atan2(a,i),t.y=Math.atan(s*Math.cos(t.x)/i),t.y=Math.atan(this.radius_p_inv2*Math.tan(t.y))}else if("sphere"===this.shape){if(this.flip_axis?(s=Math.tan(t.y/this.radius_g_1),a=Math.tan(t.x/this.radius_g_1)*Math.sqrt(1+s*s)):(a=Math.tan(t.x/this.radius_g_1),s=Math.tan(t.y/this.radius_g_1)*Math.sqrt(1+a*a)),e=a*a+s*s+i*i,(n=(r=2*this.radius_g*i)*r-4*e*this.C)<0)return t.x=Number.NaN,t.y=Number.NaN,t;o=(-r-Math.sqrt(n))/(2*e),i=this.radius_g+o*i,a*=o,s*=o,t.x=Math.atan2(a,i),t.y=Math.atan(s*Math.cos(t.x)/i)}return t.x=t.x+this.long0,t},names:["Geostationary Satellite View","Geostationary_Satellite","geos"]};Adt.defaultDatum="WGS84",Adt.Proj=ydt,Adt.WGS84=new Adt.Proj("WGS84"),Adt.Point=Jdt,Adt.toPoint=Edt,Adt.defs=Upt,Adt.nadgrid=function(t,e){var r=new DataView(e),n=function(t){var e=t.getInt32(8,!1);return 11!==e&&(11!==(e=t.getInt32(8,!0))&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian"),!0)}(r),o=function(t,e){return{nFields:t.getInt32(8,e),nSubgridFields:t.getInt32(24,e),nSubgrids:t.getInt32(40,e),shiftType:cdt(t,56,64).trim(),fromSemiMajorAxis:t.getFloat64(120,e),fromSemiMinorAxis:t.getFloat64(136,e),toSemiMajorAxis:t.getFloat64(152,e),toSemiMinorAxis:t.getFloat64(168,e)}}(r,n);o.nSubgrids>1&&console.log("Only single NTv2 subgrids are currently supported, subsequent sub grids are ignored");var i={header:o,subgrids:function(t,e,r){for(var n=[],o=0;o<e.nSubgrids;o++){var i=hdt(t,176,r),a=pdt(t,176,i,r),s=Math.round(1+(i.upperLongitude-i.lowerLongitude)/i.longitudeInterval),u=Math.round(1+(i.upperLatitude-i.lowerLatitude)/i.latitudeInterval);n.push({ll:[ldt(i.lowerLongitude),ldt(i.lowerLatitude)],del:[ldt(i.longitudeInterval),ldt(i.latitudeInterval)],lim:[s,u],count:i.gridNodeCount,cvs:fdt(a)})}return n}(r,o,n)};return sdt[t]=i,i},Adt.transform=Pdt,Adt.mgrs=Fdt,Adt.version="__VERSION__",function(t){t.Proj.projections.add(hyt),t.Proj.projections.add(myt),t.Proj.projections.add(byt),t.Proj.projections.add(_yt),t.Proj.projections.add(Eyt),t.Proj.projections.add(Oyt),t.Proj.projections.add(kyt),t.Proj.projections.add(Cyt),t.Proj.projections.add(Tyt),t.Proj.projections.add(Byt),t.Proj.projections.add(qyt),t.Proj.projections.add(Xyt),t.Proj.projections.add(Jyt),t.Proj.projections.add(Kyt),t.Proj.projections.add(Qyt),t.Proj.projections.add($yt),t.Proj.projections.add(tvt),t.Proj.projections.add(evt),t.Proj.projections.add(nvt),t.Proj.projections.add(ovt),t.Proj.projections.add(ivt),t.Proj.projections.add(avt),t.Proj.projections.add(svt),t.Proj.projections.add(uvt),t.Proj.projections.add(pvt),t.Proj.projections.add(_vt),t.Proj.projections.add(Evt),t.Proj.projections.add(kvt),t.Proj.projections.add(Cvt)}(Adt);var Tvt=Adt;function Avt(t){"@babel/helpers - typeof";return(Avt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Mvt(){Mvt=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var i=e&&e.prototype instanceof g?e:g,a=Object.create(i.prototype),s=new A(n||[]);return o(a,"_invoke",{value:P(t,r,s)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var h="suspendedStart",p="suspendedYield",d="executing",y="completed",v={};function g(){}function m(){}function b(){}var w={};l(w,a,function(){return this});var S=Object.getPrototypeOf,x=S&&S(S(M([])));x&&x!==r&&n.call(x,a)&&(w=x);var _=b.prototype=g.prototype=Object.create(w);function E(t){["next","throw","return"].forEach(function(e){l(t,e,function(t){return this._invoke(e,t)})})}function O(t,e){function r(o,i,a,s){var u=f(t[o],t,i);if("throw"!==u.type){var l=u.arg,c=l.value;return c&&"object"==Avt(c)&&n.call(c,"__await")?e.resolve(c.__await).then(function(t){r("next",t,a,s)},function(t){r("throw",t,a,s)}):e.resolve(c).then(function(t){l.value=t,a(l)},function(t){return r("throw",t,a,s)})}s(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e(function(e,o){r(t,n,e,o)})}return i=i?i.then(o,o):o()}})}function P(e,r,n){var o=h;return function(i,a){if(o===d)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var u=k(s,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var l=f(e,r,n);if("normal"===l.type){if(o=n.done?y:p,l.arg===v)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=y,n.method="throw",n.arg=l.arg)}}}function k(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,k(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function T(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function A(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function M(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(Avt(e)+" is not iterable")}return m.prototype=b,o(_,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:m,configurable:!0}),m.displayName=l(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,l(t,u,"GeneratorFunction")),t.prototype=Object.create(_),t},e.awrap=function(t){return{__await:t}},E(O.prototype),l(O.prototype,s,function(){return this}),e.AsyncIterator=O,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new O(c(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next()})},E(_),l(_,u,"Generator"),l(_,a,function(){return this}),l(_,"toString",function(){return"[object Generator]"}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=M,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(T),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),T(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;T(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:M(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function jvt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function Ivt(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?jvt(Object(r),!0).forEach(function(e){Nvt(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):jvt(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function Nvt(t,e,r){var n;return(e="symbol"==Avt(n=function(t,e){if("object"!=Avt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Avt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"))?n:n+"")in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Lvt(t,e,r,n,o,i,a){try{var s=t[i](a),u=s.value}catch(t){return void r(t)}s.done?e(u):Promise.resolve(u).then(n,o)}function Rvt(t){return function(){var e=this,r=arguments;return new Promise(function(n,o){var i=t.apply(e,r);function a(t){Lvt(i,n,o,a,s,"next",t)}function s(t){Lvt(i,n,o,a,s,"throw",t)}a(void 0)})}}function Dvt(t,e,r){var n=function(t){return t instanceof Array?t:t.leftBottom&&t.rightTop?[t.leftBottom.x,t.leftBottom.y,t.rightTop.x,t.rightTop.y]:[t.left,t.bottom,t.right,t.top]}(r);return new(w().CRS)(t,e,n)}function Bvt(t,e){var r=t;return"EPSG:3857"===e?Tvt(e,"EPSG:4326",t):"EPSG:4326"!==e?w().proj4(e,"EPSG:4326",t):r}function Fvt(t,e){return Gvt.apply(this,arguments)}function Gvt(){return(Gvt=Rvt(Mvt().mark(function t(e,r){var n,o,i,a;return Mvt().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,tt.get(e);case 3:return n=t.sent,t.next=6,n.json();case 6:if(!(o=t.sent).metadata||!o.metadata.indexbounds){t.next=9;break}return t.abrupt("return",{extent:o.metadata.indexbounds});case 9:return t.next=11,tt.get("".concat(r,"/prjCoordSys/projection/extent.json"));case 11:return i=t.sent,t.next=14,i.json();case 14:return a=t.sent,t.abrupt("return",{extent:a,center:o.center});case 18:return t.prev=18,t.t0=t.catch(0),t.abrupt("return",{extent:[]});case 21:case"end":return t.stop()}},t,null,[[0,18]])}))).apply(this,arguments)}function Uvt(t,e,r){return zvt.apply(this,arguments)}function zvt(){return(zvt=Rvt(Mvt().mark(function t(e,r,n){var o,i,a,s,u,l,c,f,h,p,d,y,v,g,m,b,S,x,_,E;return Mvt().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!n.type||["raster","vector-tile"].includes(n.type)){t.next=2;break}return t.abrupt("return",Promise.reject(new Error('type must be "raster" or "vector-tile".')));case 2:if(o=n.type||"raster",i=n.mapOptions||{},a=r.prjCoordSys.epsgCode,s=r.bounds,u=r.center,l=r.dpi,c=r.coordUnit,f=r.scale,h=u?[u.x,u.y]:[0,0],p="EPSG:".concat(a),d=s,y="vector-tile"===o?e+"/tileFeature/vectorstyles.json?type=MapBox_GL&styleonly=true&tileURLTemplate=ZXY":e,v={},g={},!w().CRS){t.next=26;break}return m=p,t.next=15,n.initMapService.getWKT();case 15:if(b=t.sent,"vector-tile"!==o){t.next=21;break}return t.next=19,Fvt(y,e);case 19:S=t.sent,d=S.extent;case 21:p=Dvt(m,b,d),"raster"===o&&(g.rasterSource="iserver"),h=S&&S.center?S.center:Bvt(h,m),t.next=29;break;case 26:h=Bvt(h,p="EPSG:3857"),"raster"===o&&(x=256,v.tileSize=x,_=!1!==i.transparent,y+="/zxyTileImage.png?z={z}&x={x}&y={y}&width=".concat(x,"&height=").concat(x,"&transparent=").concat(_));case 29:return E=ept({scale:f,dpi:l,coordUnit:c},d),t.abrupt("return",Ivt({container:"map",crs:p,center:h,zoom:E,style:"raster"===o?{version:8,sources:{"smaples-source":Ivt(Ivt({type:"raster",tiles:[y]},v),g)},layers:[{id:"sample-layer",type:"raster",source:"smaples-source",minzoom:0,maxzoom:22}]}:y},i));case 31:case"end":return t.stop()}},t)}))).apply(this,arguments)}function Vvt(t){"@babel/helpers - typeof";return(Vvt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Hvt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function Wvt(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Hvt(Object(r),!0).forEach(function(e){qvt(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Hvt(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function qvt(t,e,r){var n;return(e="symbol"==Vvt(n=function(t,e){if("object"!=Vvt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Vvt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"))?n:n+"")in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}w().supermap=Wvt(Wvt({},uet),w().supermap),w().supermap.map=w().supermap.map||{},w().supermap.LogoControl=Et,w().supermap.Logo=Et,w().supermap.Util=$n,w().supermap.decryptSources=S,w().supermap.WebMap=Jht,w().supermap.initMap=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=new $ht(Aq,t,e);return r.getMapInfo((n=Rvt(Mvt().mark(function n(o,i,a){var s,u,l,c,f,h;return Mvt().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,"processCompleted"!==o.type){n.next=15;break}if(s=o.result,u=s.dynamicProjection,l=s.prjCoordSys,c=l.epsgCode,!tpt(l.type)){n.next=6;break}return a(new Error("mapbox-gl cannot support plane coordinate system.")),n.abrupt("return");case 6:if(3857===c||u||w().CRS){n.next=9;break}return a(new Error("The EPSG code ".concat(c," needs to include mapbox-gl-enhance.js. Refer to the example: https://iclient.supermap.io/examples/mapboxgl/editor.html#mvtVectorTile_2362"))),n.abrupt("return");case 9:return n.next=11,Uvt(t,o.result,Ivt(Ivt({},e),{},{initMapService:r}));case 11:return f=n.sent,(h=new(w().Map)(f)).loaded()?i({map:h}):h.on("load",function(){i({map:h})}),n.abrupt("return");case 15:a(new Error("Fetch mapService is failed.")),n.next=21;break;case 18:n.prev=18,n.t0=n.catch(0),a(n.t0);case 21:case"end":return n.stop()}},n,null,[[0,18]])})),function(t,e,r){return n.apply(this,arguments)}));var n},w().supermap.WebMapV3=zht,w().supermap.Graphic=BN,w().supermap.map.getDefaultVectorTileStyle=function(t,e){e=e||{};var r={};r.version=e.version||8,r.layers=e.layers||[],r.light=e.light||{anchor:"viewport",color:"#fcf6ef",intensity:.5,position:[1.15,201,20]};var n={version:r.version,sources:{"vector-tiles":{type:"vector",tiles:[t]}},layers:r.layers,light:r.light};return null!=e.sprite&&(n.sprite=e.sprite),null!=e.glyphs&&(n.glyphs=e.glyphs),n},w().supermap.map.setBackground=function(t,e){e&&t&&t.addLayer({id:"background",type:"background",paint:{"background-color":e}},"background")},w().supermap.map.setPaintProperty=function(t,e,r,n,o,i){if(e&&t){"[object Array]"!==Object.prototype.toString.call(e)&&(e=[e]);for(var a=0;a<e.length;a++){var s=i?i[a]:null,u=GN(e[a],r,o,s,n);t.addLayer(u,e[a]),t.moveLayer(e[a])}}},w().supermap.MapvDataSet=FN,w().supermap.GeoFeatureThemeLayer=fc,w().supermap.Theme3DLayer=zc,w().supermap.ThemeFeature=vo,w().supermap.ThemeLayer=Ss,w().supermap.Transform=Bf,w().supermap.WebSymbol=NL,w().supermap.DeckglLayer=Ih,w().supermap.GraphicLayer=Nf,w().supermap.GraphThemeLayer=Ts,w().supermap.GraticuleLayer=Kh,w().supermap.HeatMapLayer=Sh,w().supermap.LabelThemeLayer=bc,w().supermap.MapvLayer=Bc,w().supermap.FGBLayer=Uy,w().supermap.VideoLayer=ev,w().supermap.RangeTheme3DLayer=Jc,w().supermap.RangeThemeLayer=rf,w().supermap.RankSymbolThemeLayer=cf,w().supermap.ThreeLayer=sh,w().supermap.UniqueTheme3DLayer=gf,w().supermap.UniqueThemeLayer=Ef,w().supermap.GraphMap=ON,w().supermap.L7Layer=NN,w().supermap.AddressMatchService=nR,w().supermap.ChartService=QR,w().supermap.DataFlowService=fD,w().supermap.DatasetService=LD,w().supermap.DatasourceService=tB,w().supermap.FeatureService=NG,w().supermap.FieldService=mU,w().supermap.GeoprocessingService=QU,w().supermap.GridCellInfosService=DU,w().supermap.ImageCollectionService=set,w().supermap.ImageService=qtt,w().supermap.LayerInfoService=sq,w().supermap.MapService=Aq,w().supermap.MeasureService=Jq,w().supermap.NetworkAnalyst3DService=rZ,w().supermap.NetworkAnalystService=vK,w().supermap.ProcessingService=I0,w().supermap.QueryService=l2,w().supermap.ServiceBase=uv,w().supermap.SpatialAnalystService=Z9,w().supermap.ThemeService=g7,w().supermap.TrafficTransferAnalystService=ftt,w().supermap.WebPrintingJobService=Att,w().supermap.KnowledgeGraphService=Gv,w().supermap.Components.ChartView=jct,w().supermap.CommonUtil=W},3342:function(t,e,r){var n=r(549).default;function o(){"use strict";t.exports=o=function(){return e},t.exports.__esModule=!0,t.exports.default=t.exports;var e={},r=Object.prototype,i=r.hasOwnProperty,a=Object.defineProperty||function(t,e,r){t[e]=r.value},s="function"==typeof Symbol?Symbol:{},u=s.iterator||"@@iterator",l=s.asyncIterator||"@@asyncIterator",c=s.toStringTag||"@@toStringTag";function f(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{f({},"")}catch(t){f=function(t,e,r){return t[e]=r}}function h(t,e,r,n){var o=e&&e.prototype instanceof y?e:y,i=Object.create(o.prototype),s=new k(n||[]);return a(i,"_invoke",{value:function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return T()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=E(a,r);if(s){if(s===d)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=p(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===d)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,s)}),i}function p(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=h;var d={};function y(){}function v(){}function g(){}var m={};f(m,u,function(){return this});var b=Object.getPrototypeOf,w=b&&b(b(C([])));w&&w!==r&&i.call(w,u)&&(m=w);var S=g.prototype=y.prototype=Object.create(m);function x(t){["next","throw","return"].forEach(function(e){f(t,e,function(t){return this._invoke(e,t)})})}function _(t,e){var r;a(this,"_invoke",{value:function(o,a){function s(){return new e(function(r,s){!function r(o,a,s,u){var l=p(t[o],t,a);if("throw"!==l.type){var c=l.arg,f=c.value;return f&&"object"==n(f)&&i.call(f,"__await")?e.resolve(f.__await).then(function(t){r("next",t,s,u)},function(t){r("throw",t,s,u)}):e.resolve(f).then(function(t){c.value=t,s(c)},function(t){return r("throw",t,s,u)})}u(l.arg)}(o,a,r,s)})}return r=r?r.then(s,s):s()}})}function E(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,E(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),d;var o=p(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,d;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,d):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,d)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function C(t){if(t){var e=t[u];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,n=function e(){for(;++r<t.length;)if(i.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return n.next=n}}return{next:T}}function T(){return{value:void 0,done:!0}}return v.prototype=g,a(S,"constructor",{value:g,configurable:!0}),a(g,"constructor",{value:v,configurable:!0}),v.displayName=f(g,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===v||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,f(t,c,"GeneratorFunction")),t.prototype=Object.create(S),t},e.awrap=function(t){return{__await:t}},x(_.prototype),f(_.prototype,l,function(){return this}),e.AsyncIterator=_,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new _(h(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next()})},x(S),f(S,c,"Generator"),f(S,u,function(){return this}),f(S,"toString",function(){return"[object Generator]"}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=C,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(P),!t)for(var e in this)"t"===e.charAt(0)&&i.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n],a=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var s=i.call(o,"catchLoc"),u=i.call(o,"finallyLoc");if(s&&u){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),P(r),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;P(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:C(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),d}},e}t.exports=o,t.exports.__esModule=!0,t.exports.default=t.exports},549:function(t){function e(r){"@babel/helpers - typeof";return t.exports=e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t.exports.__esModule=!0,t.exports.default=t.exports,e(r)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports},1364:function(t,e,r){function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=r(3342)();t.exports=o;try{regeneratorRuntime=o}catch(t){"object"===("undefined"==typeof globalThis?"undefined":n(globalThis))?globalThis.regeneratorRuntime=o:Function("r","regeneratorRuntime = r")(o)}},7916:function(t,e,r){"use strict";var n=r(5902);t.exports=n},2922:function(t,e,r){"use strict";var n=r(5161);t.exports=n},2496:function(t,e,r){"use strict";r(5648);var n=r(9803);t.exports=n.Object.assign},9590:function(t,e,r){"use strict";r(4041);var n=r(2965);t.exports=n.f("asyncIterator")},4249:function(t,e,r){"use strict";var n=r(6592),o=r(3409),i=TypeError;t.exports=function(t){if(n(t))return t;throw new i(o(t)+" is not a function")}},6946:function(t,e,r){"use strict";var n=r(9109),o=String,i=TypeError;t.exports=function(t){if(n(t))return t;throw new i(o(t)+" is not an object")}},6425:function(t,e,r){"use strict";var n=r(5978),o=r(2530),i=r(7700),a=function(t){return function(e,r,a){var s=n(e),u=i(s);if(0===u)return!t&&-1;var l,c=o(a,u);if(t&&r!=r){for(;u>c;)if((l=s[c++])!=l)return!0}else for(;u>c;c++)if((t||c in s)&&s[c]===r)return t||c||0;return!t&&-1}};t.exports={includes:a(!0),indexOf:a(!1)}},2737:function(t,e,r){"use strict";var n=r(5426),o=n({}.toString),i=n("".slice);t.exports=function(t){return i(o(t),8,-1)}},9715:function(t,e,r){"use strict";var n=r(5668),o=r(1558),i=r(4730),a=r(4488);t.exports=function(t,e,r){for(var s=o(e),u=a.f,l=i.f,c=0;c<s.length;c++){var f=s[c];n(t,f)||r&&n(r,f)||u(t,f,l(e,f))}}},4862:function(t,e,r){"use strict";var n=r(2378),o=r(4488),i=r(9982);t.exports=n?function(t,e,r){return o.f(t,e,i(1,r))}:function(t,e,r){return t[e]=r,t}},9982:function(t){"use strict";t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},1602:function(t,e,r){"use strict";var n=r(6592),o=r(4488),i=r(4463),a=r(3381);t.exports=function(t,e,r,s){s||(s={});var u=s.enumerable,l=void 0!==s.name?s.name:e;if(n(r)&&i(r,l,s),s.global)u?t[e]=r:a(e,r);else{try{s.unsafe?t[e]&&(u=!0):delete t[e]}catch(t){}u?t[e]=r:o.f(t,e,{value:r,enumerable:!1,configurable:!s.nonConfigurable,writable:!s.nonWritable})}return t}},3381:function(t,e,r){"use strict";var n=r(5556),o=Object.defineProperty;t.exports=function(t,e){try{o(n,t,{value:e,configurable:!0,writable:!0})}catch(r){n[t]=e}return e}},2378:function(t,e,r){"use strict";var n=r(3473);t.exports=!n(function(){return 7!==Object.defineProperty({},1,{get:function(){return 7}})[1]})},441:function(t,e,r){"use strict";var n=r(5556),o=r(9109),i=n.document,a=o(i)&&o(i.createElement);t.exports=function(t){return a?i.createElement(t):{}}},4401:function(t){"use strict";t.exports="undefined"!=typeof navigator&&String(navigator.userAgent)||""},2628:function(t,e,r){"use strict";var n,o,i=r(5556),a=r(4401),s=i.process,u=i.Deno,l=s&&s.versions||u&&u.version,c=l&&l.v8;c&&(o=(n=c.split("."))[0]>0&&n[0]<4?1:+(n[0]+n[1])),!o&&a&&(!(n=a.match(/Edge\/(\d+)/))||n[1]>=74)&&(n=a.match(/Chrome\/(\d+)/))&&(o=+n[1]),t.exports=o},2482:function(t){"use strict";t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},7302:function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=r(5556),i=r(4730).f,a=r(4862),s=r(1602),u=r(3381),l=r(9715),c=r(5532);t.exports=function(t,e){var r,f,h,p,d,y=t.target,v=t.global,g=t.stat;if(r=v?o:g?o[y]||u(y,{}):o[y]&&o[y].prototype)for(f in e){if(p=e[f],h=t.dontCallGetSet?(d=i(r,f))&&d.value:r[f],!c(v?f:y+(g?".":"#")+f,t.forced)&&void 0!==h){if(n(p)==n(h))continue;l(p,h)}(t.sham||h&&h.sham)&&a(p,"sham",!0),s(r,f,p,t)}}},3473:function(t){"use strict";t.exports=function(t){try{return!!t()}catch(t){return!0}}},1211:function(t,e,r){"use strict";var n=r(3473);t.exports=!n(function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")})},9184:function(t,e,r){"use strict";var n=r(1211),o=Function.prototype.call;t.exports=n?o.bind(o):function(){return o.apply(o,arguments)}},9264:function(t,e,r){"use strict";var n=r(2378),o=r(5668),i=Function.prototype,a=n&&Object.getOwnPropertyDescriptor,s=o(i,"name"),u=s&&"something"===function(){}.name,l=s&&(!n||n&&a(i,"name").configurable);t.exports={EXISTS:s,PROPER:u,CONFIGURABLE:l}},5426:function(t,e,r){"use strict";var n=r(1211),o=Function.prototype,i=o.call,a=n&&o.bind.bind(i,i);t.exports=n?a:function(t){return function(){return i.apply(t,arguments)}}},4384:function(t,e,r){"use strict";var n=r(5556),o=r(6592);t.exports=function(t,e){return arguments.length<2?(r=n[t],o(r)?r:void 0):n[t]&&n[t][e];var r}},9278:function(t,e,r){"use strict";var n=r(4249),o=r(834);t.exports=function(t,e){var r=t[e];return o(r)?void 0:n(r)}},5556:function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=function(t){return t&&t.Math===Math&&t};t.exports=o("object"==("undefined"==typeof globalThis?"undefined":n(globalThis))&&globalThis)||o("object"==("undefined"==typeof window?"undefined":n(window))&&window)||o("object"==("undefined"==typeof self?"undefined":n(self))&&self)||o("object"==(void 0===r.g?"undefined":n(r.g))&&r.g)||o("object"==n(this)&&this)||function(){return this}()||Function("return this")()},5668:function(t,e,r){"use strict";var n=r(5426),o=r(2605),i=n({}.hasOwnProperty);t.exports=Object.hasOwn||function(t,e){return i(o(t),e)}},2933:function(t){"use strict";t.exports={}},4710:function(t,e,r){"use strict";var n=r(2378),o=r(3473),i=r(441);t.exports=!n&&!o(function(){return 7!==Object.defineProperty(i("div"),"a",{get:function(){return 7}}).a})},5764:function(t,e,r){"use strict";var n=r(5426),o=r(3473),i=r(2737),a=Object,s=n("".split);t.exports=o(function(){return!a("z").propertyIsEnumerable(0)})?function(t){return"String"===i(t)?s(t,""):a(t)}:a},1178:function(t,e,r){"use strict";var n=r(5426),o=r(6592),i=r(2503),a=n(Function.toString);o(i.inspectSource)||(i.inspectSource=function(t){return a(t)}),t.exports=i.inspectSource},9975:function(t,e,r){"use strict";var n,o,i,a=r(5735),s=r(5556),u=r(9109),l=r(4862),c=r(5668),f=r(2503),h=r(9934),p=r(2933),d=s.TypeError,y=s.WeakMap;if(a||f.state){var v=f.state||(f.state=new y);v.get=v.get,v.has=v.has,v.set=v.set,n=function(t,e){if(v.has(t))throw new d("Object already initialized");return e.facade=t,v.set(t,e),e},o=function(t){return v.get(t)||{}},i=function(t){return v.has(t)}}else{var g=h("state");p[g]=!0,n=function(t,e){if(c(t,g))throw new d("Object already initialized");return e.facade=t,l(t,g,e),e},o=function(t){return c(t,g)?t[g]:{}},i=function(t){return c(t,g)}}t.exports={set:n,get:o,has:i,enforce:function(t){return i(t)?o(t):n(t,{})},getterFor:function(t){return function(e){var r;if(!u(e)||(r=o(e)).type!==t)throw new d("Incompatible receiver, "+t+" required");return r}}}},6592:function(t){"use strict";function e(t){"@babel/helpers - typeof";return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var r="object"==("undefined"==typeof document?"undefined":e(document))&&document.all;t.exports=void 0===r&&void 0!==r?function(t){return"function"==typeof t||t===r}:function(t){return"function"==typeof t}},5532:function(t,e,r){"use strict";var n=r(3473),o=r(6592),i=/#|\.prototype\./,a=function(t,e){var r=u[s(t)];return r===c||r!==l&&(o(e)?n(e):!!e)},s=a.normalize=function(t){return String(t).replace(i,".").toLowerCase()},u=a.data={},l=a.NATIVE="N",c=a.POLYFILL="P";t.exports=a},834:function(t){"use strict";t.exports=function(t){return null===t||void 0===t}},9109:function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=r(6592);t.exports=function(t){return"object"==n(t)?null!==t:o(t)}},693:function(t){"use strict";t.exports=!1},8878:function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=r(4384),i=r(6592),a=r(4485),s=r(1606),u=Object;t.exports=s?function(t){return"symbol"==n(t)}:function(t){var e=o("Symbol");return i(e)&&a(e.prototype,u(t))}},7700:function(t,e,r){"use strict";var n=r(6413);t.exports=function(t){return n(t.length)}},4463:function(t,e,r){"use strict";var n=r(5426),o=r(3473),i=r(6592),a=r(5668),s=r(2378),u=r(9264).CONFIGURABLE,l=r(1178),c=r(9975),f=c.enforce,h=c.get,p=String,d=Object.defineProperty,y=n("".slice),v=n("".replace),g=n([].join),m=s&&!o(function(){return 8!==d(function(){},"length",{value:8}).length}),b=String(String).split("String"),w=t.exports=function(t,e,r){"Symbol("===y(p(e),0,7)&&(e="["+v(p(e),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),r&&r.getter&&(e="get "+e),r&&r.setter&&(e="set "+e),(!a(t,"name")||u&&t.name!==e)&&(s?d(t,"name",{value:e,configurable:!0}):t.name=e),m&&r&&a(r,"arity")&&t.length!==r.arity&&d(t,"length",{value:r.arity});try{r&&a(r,"constructor")&&r.constructor?s&&d(t,"prototype",{writable:!1}):t.prototype&&(t.prototype=void 0)}catch(t){}var n=f(t);return a(n,"source")||(n.source=g(b,"string"==typeof e?e:"")),t};Function.prototype.toString=w(function(){return i(this)&&h(this).source||l(this)},"toString")},426:function(t){"use strict";var e=Math.ceil,r=Math.floor;t.exports=Math.trunc||function(t){var n=+t;return(n>0?r:e)(n)}},3299:function(t,e,r){"use strict";var n=r(2378),o=r(5426),i=r(9184),a=r(3473),s=r(9038),u=r(6666),l=r(2045),c=r(2605),f=r(5764),h=Object.assign,p=Object.defineProperty,d=o([].concat);t.exports=!h||a(function(){if(n&&1!==h({b:1},h(p({},"a",{enumerable:!0,get:function(){p(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var t={},e={},r=Symbol("assign detection");return t[r]=7,"abcdefghijklmnopqrst".split("").forEach(function(t){e[t]=t}),7!==h({},t)[r]||"abcdefghijklmnopqrst"!==s(h({},e)).join("")})?function(t,e){for(var r=c(t),o=arguments.length,a=1,h=u.f,p=l.f;o>a;)for(var y,v=f(arguments[a++]),g=h?d(s(v),h(v)):s(v),m=g.length,b=0;m>b;)y=g[b++],n&&!i(p,v,y)||(r[y]=v[y]);return r}:h},4488:function(t,e,r){"use strict";var n=r(2378),o=r(4710),i=r(6322),a=r(6946),s=r(6511),u=TypeError,l=Object.defineProperty,c=Object.getOwnPropertyDescriptor;e.f=n?i?function(t,e,r){if(a(t),e=s(e),a(r),"function"==typeof t&&"prototype"===e&&"value"in r&&"writable"in r&&!r.writable){var n=c(t,e);n&&n.writable&&(t[e]=r.value,r={configurable:"configurable"in r?r.configurable:n.configurable,enumerable:"enumerable"in r?r.enumerable:n.enumerable,writable:!1})}return l(t,e,r)}:l:function(t,e,r){if(a(t),e=s(e),a(r),o)try{return l(t,e,r)}catch(t){}if("get"in r||"set"in r)throw new u("Accessors not supported");return"value"in r&&(t[e]=r.value),t}},4730:function(t,e,r){"use strict";var n=r(2378),o=r(9184),i=r(2045),a=r(9982),s=r(5978),u=r(6511),l=r(5668),c=r(4710),f=Object.getOwnPropertyDescriptor;e.f=n?f:function(t,e){if(t=s(t),e=u(e),c)try{return f(t,e)}catch(t){}if(l(t,e))return a(!o(i.f,t,e),t[e])}},3347:function(t,e,r){"use strict";var n=r(3519),o=r(2482).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return n(t,o)}},6666:function(t,e){"use strict";e.f=Object.getOwnPropertySymbols},4485:function(t,e,r){"use strict";var n=r(5426);t.exports=n({}.isPrototypeOf)},3519:function(t,e,r){"use strict";var n=r(5426),o=r(5668),i=r(5978),a=r(6425).indexOf,s=r(2933),u=n([].push);t.exports=function(t,e){var r,n=i(t),l=0,c=[];for(r in n)!o(s,r)&&o(n,r)&&u(c,r);for(;e.length>l;)o(n,r=e[l++])&&(~a(c,r)||u(c,r));return c}},9038:function(t,e,r){"use strict";var n=r(3519),o=r(2482);t.exports=Object.keys||function(t){return n(t,o)}},2045:function(t,e){"use strict";var r={}.propertyIsEnumerable,n=Object.getOwnPropertyDescriptor,o=n&&!r.call({1:2},1);e.f=o?function(t){var e=n(this,t);return!!e&&e.enumerable}:r},7095:function(t,e,r){"use strict";var n=r(9184),o=r(6592),i=r(9109),a=TypeError;t.exports=function(t,e){var r,s;if("string"===e&&o(r=t.toString)&&!i(s=n(r,t)))return s;if(o(r=t.valueOf)&&!i(s=n(r,t)))return s;if("string"!==e&&o(r=t.toString)&&!i(s=n(r,t)))return s;throw new a("Can't convert object to primitive value")}},1558:function(t,e,r){"use strict";var n=r(4384),o=r(5426),i=r(3347),a=r(6666),s=r(6946),u=o([].concat);t.exports=n("Reflect","ownKeys")||function(t){var e=i.f(s(t)),r=a.f;return r?u(e,r(t)):e}},9803:function(t,e,r){"use strict";var n=r(5556);t.exports=n},5257:function(t,e,r){"use strict";var n=r(834),o=TypeError;t.exports=function(t){if(n(t))throw new o("Can't call method on "+t);return t}},9934:function(t,e,r){"use strict";var n=r(9834),o=r(7879),i=n("keys");t.exports=function(t){return i[t]||(i[t]=o(t))}},2503:function(t,e,r){"use strict";var n=r(693),o=r(5556),i=r(3381),a=t.exports=o["__core-js_shared__"]||i("__core-js_shared__",{});(a.versions||(a.versions=[])).push({version:"3.36.1",mode:n?"pure":"global",copyright:"Â© 2014-2024 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.36.1/LICENSE",source:"https://github.com/zloirock/core-js"})},9834:function(t,e,r){"use strict";var n=r(2503);t.exports=function(t,e){return n[t]||(n[t]=e||{})}},8909:function(t,e,r){"use strict";var n=r(2628),o=r(3473),i=r(5556).String;t.exports=!!Object.getOwnPropertySymbols&&!o(function(){var t=Symbol("symbol detection");return!i(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&n&&n<41})},2530:function(t,e,r){"use strict";var n=r(1550),o=Math.max,i=Math.min;t.exports=function(t,e){var r=n(t);return r<0?o(r+e,0):i(r,e)}},5978:function(t,e,r){"use strict";var n=r(5764),o=r(5257);t.exports=function(t){return n(o(t))}},1550:function(t,e,r){"use strict";var n=r(426);t.exports=function(t){var e=+t;return e!=e||0===e?0:n(e)}},6413:function(t,e,r){"use strict";var n=r(1550),o=Math.min;t.exports=function(t){var e=n(t);return e>0?o(e,9007199254740991):0}},2605:function(t,e,r){"use strict";var n=r(5257),o=Object;t.exports=function(t){return o(n(t))}},1871:function(t,e,r){"use strict";var n=r(9184),o=r(9109),i=r(8878),a=r(9278),s=r(7095),u=r(2892),l=TypeError,c=u("toPrimitive");t.exports=function(t,e){if(!o(t)||i(t))return t;var r,u=a(t,c);if(u){if(void 0===e&&(e="default"),r=n(u,t,e),!o(r)||i(r))return r;throw new l("Can't convert object to primitive value")}return void 0===e&&(e="number"),s(t,e)}},6511:function(t,e,r){"use strict";var n=r(1871),o=r(8878);t.exports=function(t){var e=n(t,"string");return o(e)?e:e+""}},3409:function(t){"use strict";var e=String;t.exports=function(t){try{return e(t)}catch(t){return"Object"}}},7879:function(t,e,r){"use strict";var n=r(5426),o=0,i=Math.random(),a=n(1..toString);t.exports=function(t){return"Symbol("+(void 0===t?"":t)+")_"+a(++o+i,36)}},1606:function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=r(8909);t.exports=o&&!Symbol.sham&&"symbol"==n(Symbol.iterator)},6322:function(t,e,r){"use strict";var n=r(2378),o=r(3473);t.exports=n&&o(function(){return 42!==Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype})},5735:function(t,e,r){"use strict";var n=r(5556),o=r(6592),i=n.WeakMap;t.exports=o(i)&&/native code/.test(String(i))},321:function(t,e,r){"use strict";var n=r(9803),o=r(5668),i=r(2965),a=r(4488).f;t.exports=function(t){var e=n.Symbol||(n.Symbol={});o(e,t)||a(e,t,{value:i.f(t)})}},2965:function(t,e,r){"use strict";var n=r(2892);e.f=n},2892:function(t,e,r){"use strict";var n=r(5556),o=r(9834),i=r(5668),a=r(7879),s=r(8909),u=r(1606),l=n.Symbol,c=o("wks"),f=u?l.for||l:l&&l.withoutSetter||a;t.exports=function(t){return i(c,t)||(c[t]=s&&i(l,t)?l[t]:f("Symbol."+t)),c[t]}},5648:function(t,e,r){"use strict";var n=r(7302),o=r(3299);n({target:"Object",stat:!0,arity:2,forced:Object.assign!==o},{assign:o})},4041:function(t,e,r){"use strict";r(321)("asyncIterator")},5902:function(t,e,r){"use strict";var n=r(2496);t.exports=n},5161:function(t,e,r){"use strict";var n=r(9590);t.exports=n},7582:function(t,e,r){"use strict";r.r(e),r.d(e,{__addDisposableResource:function(){return N},__assign:function(){return i},__asyncDelegator:function(){return O},__asyncGenerator:function(){return E},__asyncValues:function(){return P},__await:function(){return _},__awaiter:function(){return d},__classPrivateFieldGet:function(){return M},__classPrivateFieldIn:function(){return I},__classPrivateFieldSet:function(){return j},__createBinding:function(){return v},__decorate:function(){return s},__disposeResources:function(){return R},__esDecorate:function(){return l},__exportStar:function(){return g},__extends:function(){return o},__generator:function(){return y},__importDefault:function(){return A},__importStar:function(){return T},__makeTemplateObject:function(){return k},__metadata:function(){return p},__param:function(){return u},__propKey:function(){return f},__read:function(){return b},__rest:function(){return a},__runInitializers:function(){return c},__setFunctionName:function(){return h},__spread:function(){return w},__spreadArray:function(){return x},__spreadArrays:function(){return S},__values:function(){return m}});var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)};function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var i=function(){return(i=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};function a(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(t);o<n.length;o++)e.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(t,n[o])&&(r[n[o]]=t[n[o]])}return r}function s(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a}function u(t,e){return function(r,n){e(r,n,t)}}function l(t,e,r,n,o,i){function a(t){if(void 0!==t&&"function"!=typeof t)throw new TypeError("Function expected");return t}for(var s,u=n.kind,l="getter"===u?"get":"setter"===u?"set":"value",c=!e&&t?n.static?t:t.prototype:null,f=e||(c?Object.getOwnPropertyDescriptor(c,n.name):{}),h=!1,p=r.length-1;p>=0;p--){var d={};for(var y in n)d[y]="access"===y?{}:n[y];for(var y in n.access)d.access[y]=n.access[y];d.addInitializer=function(t){if(h)throw new TypeError("Cannot add initializers after decoration has completed");i.push(a(t||null))};var v=(0,r[p])("accessor"===u?{get:f.get,set:f.set}:f[l],d);if("accessor"===u){if(void 0===v)continue;if(null===v||"object"!=typeof v)throw new TypeError("Object expected");(s=a(v.get))&&(f.get=s),(s=a(v.set))&&(f.set=s),(s=a(v.init))&&o.unshift(s)}else(s=a(v))&&("field"===u?o.unshift(s):f[l]=s)}c&&Object.defineProperty(c,n.name,f),h=!0}function c(t,e,r){for(var n=arguments.length>2,o=0;o<e.length;o++)r=n?e[o].call(t,r):e[o].call(t);return n?r:void 0}function f(t){return"symbol"==typeof t?t:"".concat(t)}function h(t,e,r){return"symbol"==typeof e&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:r?"".concat(r," ",e):e})}function p(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function d(t,e,r,n){return new(r||(r=Promise))(function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function s(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r(function(t){t(e)})).then(a,s)}u((n=n.apply(t,e||[])).next())})}function y(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(u){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(r=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===s[0]||2===s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],n=0}finally{r=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}}var v=Object.create?function(t,e,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);o&&("get"in o?e.__esModule:!o.writable&&!o.configurable)||(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]};function g(t,e){for(var r in t)"default"===r||Object.prototype.hasOwnProperty.call(e,r)||v(e,t,r)}function m(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function b(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a}function w(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(b(arguments[e]));return t}function S(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;var n=Array(t),o=0;for(e=0;e<r;e++)for(var i=arguments[e],a=0,s=i.length;a<s;a++,o++)n[o]=i[a];return n}function x(t,e,r){if(r||2===arguments.length)for(var n,o=0,i=e.length;o<i;o++)!n&&o in e||(n||(n=Array.prototype.slice.call(e,0,o)),n[o]=e[o]);return t.concat(n||Array.prototype.slice.call(e))}function _(t){return this instanceof _?(this.v=t,this):new _(t)}function E(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,o=r.apply(t,e||[]),i=[];return n={},a("next"),a("throw"),a("return"),n[Symbol.asyncIterator]=function(){return this},n;function a(t){o[t]&&(n[t]=function(e){return new Promise(function(r,n){i.push([t,e,r,n])>1||s(t,e)})})}function s(t,e){try{(r=o[t](e)).value instanceof _?Promise.resolve(r.value.v).then(u,l):c(i[0][2],r)}catch(t){c(i[0][3],t)}var r}function u(t){s("next",t)}function l(t){s("throw",t)}function c(t,e){t(e),i.shift(),i.length&&s(i[0][0],i[0][1])}}function O(t){var e,r;return e={},n("next"),n("throw",function(t){throw t}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(n,o){e[n]=t[n]?function(e){return(r=!r)?{value:_(t[n](e)),done:!1}:o?o(e):e}:o}}function P(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,r=t[Symbol.asyncIterator];return r?r.call(t):(t=m(t),e={},n("next"),n("throw"),n("return"),e[Symbol.asyncIterator]=function(){return this},e);function n(r){e[r]=t[r]&&function(e){return new Promise(function(n,o){(function(t,e,r,n){Promise.resolve(n).then(function(e){t({value:e,done:r})},e)})(n,o,(e=t[r](e)).done,e.value)})}}}function k(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}var C=Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e};function T(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&v(e,t,r);return C(e,t),e}function A(t){return t&&t.__esModule?t:{default:t}}function M(t,e,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(t):n?n.value:e.get(t)}function j(t,e,r,n,o){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!o:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?o.call(t,r):o?o.value=r:e.set(t,r),r}function I(t,e){if(null===e||"object"!=typeof e&&"function"!=typeof e)throw new TypeError("Cannot use 'in' operator on non-object");return"function"==typeof t?e===t:t.has(e)}function N(t,e,r){if(null!==e&&void 0!==e){if("object"!=typeof e&&"function"!=typeof e)throw new TypeError("Object expected.");var n;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=e[Symbol.asyncDispose]}if(void 0===n){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=e[Symbol.dispose]}if("function"!=typeof n)throw new TypeError("Object not disposable.");t.stack.push({value:e,dispose:n,async:r})}else r&&t.stack.push({async:!0});return e}var L="function"==typeof SuppressedError?SuppressedError:function(t,e,r){var n=new Error(r);return n.name="SuppressedError",n.error=t,n.suppressed=e,n};function R(t){function e(e){t.error=t.hasError?new L(e,t.error,"An error was suppressed during disposal."):e,t.hasError=!0}return function r(){for(;t.stack.length;){var n=t.stack.pop();try{var o=n.dispose&&n.dispose.call(n.value);if(n.async)return Promise.resolve(o).then(r,function(t){return e(t),r()})}catch(t){e(t)}}if(t.hasError)throw t.error}()}e.default={__extends:o,__assign:i,__rest:a,__decorate:s,__param:u,__metadata:p,__awaiter:d,__generator:y,__createBinding:v,__exportStar:g,__values:m,__read:b,__spread:w,__spreadArrays:S,__spreadArray:x,__await:_,__asyncGenerator:E,__asyncDelegator:O,__asyncValues:P,__makeTemplateObject:k,__importStar:T,__importDefault:A,__classPrivateFieldGet:M,__classPrivateFieldSet:j,__classPrivateFieldIn:I,__addDisposableResource:N,__disposeResources:R}}},e={};function r(n){var o=e[n];if(void 0!==o)return o.exports;var i=e[n]={id:n,loaded:!1,exports:{}};return t[n].call(i.exports,i,i.exports,r),i.loaded=!0,i.exports}r.amdO={},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,{a:e}),e},r.d=function(t,e){for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.nmd=function(t){return t.paths=[],t.children||(t.children=[]),t},r(2922),r(7916),r(7271);r(3679)}();