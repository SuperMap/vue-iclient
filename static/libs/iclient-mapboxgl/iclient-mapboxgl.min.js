/*!
 * 
 *          iclient-mapboxgl
 *          CopyrightÂ© 2000 - 2023 SuperMap Software Co.Ltd
 *          license: Apache-2.0
 *          version: v11.1.0
 *
 */!function(){var e={17549:function(e,t,r){"use strict";function n(e){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0});var o,i=(o=r(65064))&&"object"===n(o)&&"default"in o?o.default:o,a=2,s=.16,u=.05,l=.05,c=.15,f=5,h=4,p=[{index:7,opacity:.15},{index:6,opacity:.25},{index:5,opacity:.3},{index:5,opacity:.45},{index:5,opacity:.65},{index:5,opacity:.85},{index:4,opacity:.9},{index:3,opacity:.95},{index:2,opacity:.97},{index:1,opacity:.98}];function d(e,t,r){var n;return(n=Math.round(e.h)>=60&&Math.round(e.h)<=240?r?Math.round(e.h)-a*t:Math.round(e.h)+a*t:r?Math.round(e.h)+a*t:Math.round(e.h)-a*t)<0?n+=360:n>=360&&(n-=360),n}function y(e,t,r){return 0===e.h&&0===e.s?e.s:((n=r?e.s-s*t:t===h?e.s+s:e.s+u*t)>1&&(n=1),r&&t===f&&n>.1&&(n=.1),n<.06&&(n=.06),Number(n.toFixed(2)));var n}function v(e,t,r){var n;return(n=r?e.v+l*t:e.v-c*t)>1&&(n=1),Number(n.toFixed(2))}function g(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=[],n=i(e),o=f;o>0;o-=1){var a=n.toHsv(),s=i({h:d(a,o,!0),s:y(a,o,!0),v:v(a,o,!0)}).toHexString();r.push(s)}r.push(n.toHexString());for(var u=1;u<=h;u+=1){var l=n.toHsv(),c=i({h:d(l,u),s:y(l,u),v:v(l,u)}).toHexString();r.push(c)}return"dark"===t.theme?p.map(function(e){var n=e.index,o=e.opacity;return i.mix(t.backgroundColor||"#141414",r[n],100*o).toHexString()}):r}var m={red:"#F5222D",volcano:"#FA541C",orange:"#FA8C16",gold:"#FAAD14",yellow:"#FADB14",lime:"#A0D911",green:"#52C41A",cyan:"#13C2C2",blue:"#1890FF",geekblue:"#2F54EB",purple:"#722ED1",magenta:"#EB2F96",grey:"#666666"},b={},w={};Object.keys(m).forEach(function(e){b[e]=g(m[e]),b[e].primary=b[e][5],w[e]=g(m[e],{theme:"dark",backgroundColor:"#141414"}),w[e].primary=w[e][5]});var _=b.red,x=b.volcano,S=b.gold,O=b.orange,P=b.yellow,E=b.lime,k=b.green,M=b.cyan,C=b.blue,j=b.geekblue,T=b.purple,A=b.magenta,I=b.grey;t.blue=C,t.cyan=M,t.geekblue=j,t.generate=g,t.gold=S,t.green=k,t.grey=I,t.lime=E,t.magenta=A,t.orange=O,t.presetDarkPalettes=w,t.presetPalettes=b,t.presetPrimaryColors=m,t.purple=T,t.red=_,t.volcano=x,t.yellow=P},57238:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e,t){var r=e.nodes,n=e.edges,o=[],i={};if(!r)throw new Error("invalid nodes data!");return r&&r.forEach(function(e,t){i[e.id]=t,o.push([])}),n&&n.forEach(function(e){var r=e.source,n=e.target,a=i[r],s=i[n];!a&&0!==a||!s&&0!==s||(o[a][s]=1,t||(o[s][a]=1))}),o};t.default=r},26765:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"GADDIAsync",{enumerable:!0,get:function(){return n.GADDIAsync}}),Object.defineProperty(t,"connectedComponentAsync",{enumerable:!0,get:function(){return n.connectedComponentAsync}}),t.default=void 0,Object.defineProperty(t,"detectAllCyclesAsync",{enumerable:!0,get:function(){return n.detectAllCyclesAsync}}),Object.defineProperty(t,"detectAllDirectedCycleAsync",{enumerable:!0,get:function(){return n.detectAllDirectedCycleAsync}}),Object.defineProperty(t,"detectAllUndirectedCycleAsync",{enumerable:!0,get:function(){return n.detectAllUndirectedCycleAsync}}),Object.defineProperty(t,"detectCycleAsync",{enumerable:!0,get:function(){return n.detectCycleAsync}}),t.detectDirectedCycleAsync=void 0,Object.defineProperty(t,"dijkstraAsync",{enumerable:!0,get:function(){return n.dijkstraAsync}}),Object.defineProperty(t,"findAllPathAsync",{enumerable:!0,get:function(){return n.findAllPathAsync}}),Object.defineProperty(t,"findShortestPathAsync",{enumerable:!0,get:function(){return n.findShortestPathAsync}}),Object.defineProperty(t,"floydWarshallAsync",{enumerable:!0,get:function(){return n.floydWarshallAsync}}),Object.defineProperty(t,"getAdjMatrixAsync",{enumerable:!0,get:function(){return n.getAdjMatrixAsync}}),Object.defineProperty(t,"getDegreeAsync",{enumerable:!0,get:function(){return n.getDegreeAsync}}),Object.defineProperty(t,"getInDegreeAsync",{enumerable:!0,get:function(){return n.getInDegreeAsync}}),Object.defineProperty(t,"getNeighborsAsync",{enumerable:!0,get:function(){return n.getNeighborsAsync}}),Object.defineProperty(t,"getOutDegreeAsync",{enumerable:!0,get:function(){return n.getOutDegreeAsync}}),Object.defineProperty(t,"labelPropagationAsync",{enumerable:!0,get:function(){return n.labelPropagationAsync}}),Object.defineProperty(t,"louvainAsync",{enumerable:!0,get:function(){return n.louvainAsync}}),Object.defineProperty(t,"minimumSpanningTreeAsync",{enumerable:!0,get:function(){return n.minimumSpanningTreeAsync}}),Object.defineProperty(t,"pageRankAsync",{enumerable:!0,get:function(){return n.pageRankAsync}});var n=r(54613),o=n.detectCycleAsync;t.detectDirectedCycleAsync=o;var i={getAdjMatrixAsync:n.getAdjMatrixAsync,connectedComponentAsync:n.connectedComponentAsync,getDegreeAsync:n.getDegreeAsync,getInDegreeAsync:n.getInDegreeAsync,getOutDegreeAsync:n.getOutDegreeAsync,detectCycleAsync:n.detectCycleAsync,detectDirectedCycleAsync:o,detectAllCyclesAsync:n.detectAllCyclesAsync,detectAllDirectedCycleAsync:n.detectAllDirectedCycleAsync,detectAllUndirectedCycleAsync:n.detectAllUndirectedCycleAsync,dijkstraAsync:n.dijkstraAsync,findAllPathAsync:n.findAllPathAsync,findShortestPathAsync:n.findShortestPathAsync,floydWarshallAsync:n.floydWarshallAsync,labelPropagationAsync:n.labelPropagationAsync,louvainAsync:n.louvainAsync,minimumSpanningTreeAsync:n.minimumSpanningTreeAsync,pageRankAsync:n.pageRankAsync,getNeighborsAsync:n.getNeighborsAsync,GADDIAsync:n.GADDIAsync};t.default=i},1264:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,o=(n=r(93247))&&n.__esModule?n:{default:n},i=r(28182);var a=function(e,t,r,n){void 0===n&&(n=!0);var a=function(e){void 0===e&&(e={});var t,r=e,n=function(){},o=(t={},function(e){var r=e.next;return!t[r]&&(t[r]=!0,!0)});return r.allowTraversal=e.allowTraversal||o,r.enter=e.enter||n,r.leave=e.leave||n,r}(r),s=new o.default,u=e.edges,l=void 0===u?[]:u;s.enqueue(t);for(var c="",f=function(){var e=s.dequeue();a.enter({current:e,previous:c}),(0,i.getNeighbors)(e,l,n?"target":void 0).forEach(function(t){a.allowTraversal({previous:c,current:e,next:t})&&s.enqueue(t)}),a.leave({current:e,previous:c}),c=e};!s.isEmpty();)f()};t.default=a},16616:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return t?i(e):o(e)},t.detectStrongConnectComponents=t.detectConnectedComponents=void 0;var n=r(28182),o=function(e){for(var t=e.nodes,r=void 0===t?[]:t,o=e.edges,i=void 0===o?[]:o,a=[],s={},u=[],l=function e(t){u.push(t),s[t.id]=!0;for(var o=(0,n.getNeighbors)(t.id,i),a=function(t){var n=o[t];if(!s[n]){var i=r.filter(function(e){return e.id===n});i.length>0&&e(i[0])}},l=0;l<o.length;++l)a(l)},c=0;c<r.length;c++){var f=r[c];if(!s[f.id]){l(f);for(var h=[];u.length>0;)h.push(u.pop());a.push(h)}}return a};t.detectConnectedComponents=o;var i=function(e){for(var t=e.nodes,r=void 0===t?[]:t,o=e.edges,i=void 0===o?[]:o,a=[],s={},u={},l={},c=[],f=0,h=function e(t){u[t.id]=f,l[t.id]=f,f+=1,a.push(t),s[t.id]=!0;for(var o=(0,n.getNeighbors)(t.id,i,"target").filter(function(e){return r.map(function(e){return e.id}).indexOf(e)>-1}),h=function(n){var i=o[n];if(u[i]||0===u[i])s[i]&&(l[t.id]=Math.min(l[t.id],u[i]));else{var a=r.filter(function(e){return e.id===i});a.length>0&&e(a[0]),l[t.id]=Math.min(l[t.id],l[i])}},p=0;p<o.length;p++)h(p);if(l[t.id]===u[t.id]){for(var d=[];a.length>0;){var y=a.pop();if(s[y.id]=!1,d.push(y),y===t)break}d.length>0&&c.push(d)}},p=0,d=r;p<d.length;p++){var y=d[p];u[y.id]||0===u[y.id]||h(y)}return c};t.detectStrongConnectComponents=i},79023:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.secondReg=t.dateReg=void 0;t.secondReg=/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2})$/;t.dateReg=/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})$/},16075:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,o=(n=r(43532))&&n.__esModule?n:{default:n};var i=function(e,t){var r=new o.default(t),n=r.norm2(),i=new o.default(e),a=i.norm2(),s=r.dot(i),u=n*a,l=u?s/u:0;return l};t.default=i},63597:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getOutDegree=t.getInDegree=t.default=void 0;var r=function(e){var t={},r=e.nodes,n=void 0===r?[]:r,o=e.edges,i=void 0===o?[]:o;return n.forEach(function(e){t[e.id]={degree:0,inDegree:0,outDegree:0}}),i.forEach(function(e){t[e.source].degree++,t[e.source].outDegree++,t[e.target].degree++,t[e.target].inDegree++}),t},n=r;t.default=n;t.getInDegree=function(e,t){return r(e)[t]?r(e)[t].inDegree:0};t.getOutDegree=function(e,t){return r(e)[t]?r(e)[t].outDegree:0}},12465:function(e,t,r){"use strict";function n(e){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.detectAllUndirectedCycle=t.detectAllDirectedCycle=t.detectAllCycles=t.default=void 0;var o,i=(o=r(81940))&&o.__esModule?o:{default:o},a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var r=u(t);if(r&&r.has(e))return r.get(e);var o={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=i?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(o,a,s):o[a]=e[a]}o.default=e,r&&r.set(e,o);return o}(r(16616)),s=r(28182);function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(u=function(e){return e?r:t})(e)}var l=function(e,t,r){var n,o;void 0===r&&(r=!0);for(var i=[],u=0,l=(0,a.default)(e,!1);u<l.length;u++){var c=l[u];if(c.length)for(var f=c[0],h=f.id,p=[f],d=((n={})[h]=f,n),y=((o={})[h]=new Set,o);p.length>0;)for(var v=p.pop(),g=v.id,m=(0,s.getNeighbors)(g,e.edges),b=function(n){var o,a=m[n],s=e.nodes.find(function(e){return e.id===a});if(a===g)i.push(((o={})[a]=v,o));else if(a in y){if(!y[g].has(s)){for(var u=!0,l=[s,v],c=d[g];y[a].size&&!y[a].has(c)&&(l.push(c),c!==d[c.id]);)c=d[c.id];if(l.push(c),t&&r?(u=!1,l.findIndex(function(e){return t.indexOf(e.id)>-1})>-1&&(u=!0)):t&&!r&&l.findIndex(function(e){return t.indexOf(e.id)>-1})>-1&&(u=!1),u){for(var f={},h=1;h<l.length;h+=1)f[l[h-1].id]=l[h];l.length&&(f[l[l.length-1].id]=l[0]),i.push(f)}y[a].add(v)}}else d[a]=v,p.push(s),y[a]=new Set([v])},w=0;w<m.length;w+=1)b(w)}return i};t.detectAllUndirectedCycle=l;var c=function(e,t,r){void 0===r&&(r=!0);for(var n=[],o=new Set,i=[],u=[],l={},c={},f=function e(a,s,c){var f=!1;if(t&&!1===r&&t.indexOf(a.id)>-1)return f;n.push(a),o.add(a);for(var h=c[a.id],p=0;p<h.length;p+=1){if((v=l[h[p]])===s){for(var d={},y=1;y<n.length;y+=1)d[n[y-1].id]=n[y];n.length&&(d[n[n.length-1].id]=n[0]),u.push(d),f=!0}else o.has(v)||e(v,s,c)&&(f=!0)}if(f)!function(e){for(var t=[e];t.length>0;){var r=t.pop();o.has(r)&&(o.delete(r),i[r.id].forEach(function(e){t.push(e)}),i[r.id].clear())}}(a);else for(p=0;p<h.length;p+=1){var v=l[h[p]];i[v.id].has(a)||i[v.id].add(a)}return n.pop(),f},h=e.nodes,p=void 0===h?[]:h,d=0;d<p.length;d+=1){var y=p[d],v=y.id;c[v]=d,l[d]=y}if(t&&r){var g=function(e){var r=t[e];c[p[e].id]=c[r],c[r]=0,l[0]=p.find(function(e){return e.id===r}),l[c[p[e].id]]=p[e]};for(d=0;d<t.length;d++)g(d)}for(var m=function(n){for(var o,i,a=1/0,l=0;l<n.length;l+=1)for(var f=n[l],h=0;h<f.length;h++){var p=c[f[h].id];p<a&&(a=p,i=l)}var d=n[i],y=[];for(l=0;l<d.length;l+=1){var v=d[l];y[v.id]=[];for(var g=0,m=(0,s.getNeighbors)(v.id,e.edges,"target").filter(function(e){return d.map(function(e){return e.id}).indexOf(e)>-1});g<m.length;g++){var b=m[g];b!==v.id||!1===r&&t.indexOf(v.id)>-1?y[v.id].push(c[b]):u.push(((o={})[v.id]=v,o))}}return{component:d,adjList:y,minIdx:a}},b=0;b<p.length;){var w=p.filter(function(e){return c[e.id]>=b}),_=(0,a.detectStrongConnectComponents)({nodes:w,edges:e.edges}).filter(function(e){return e.length>1});if(0===_.length)break;var x=m(_),S=x.minIdx,O=x.adjList,P=x.component;if(!(P.length>1))break;P.forEach(function(e){i[e.id]=new Set});var E=l[S];if(t&&r&&-1===t.indexOf(E.id))return u;f(E,E,O),b=S+1}return u};t.detectAllDirectedCycle=c;t.detectAllCycles=function(e,t,r,n){return void 0===n&&(n=!0),t?c(e,r,n):l(e,r,n)};var f=function(e){var t=null,r=e.nodes,n={},o={},a={},s={};(void 0===r?[]:r).forEach(function(e){o[e.id]=e});for(var u={enter:function(e){var r=e.current,i=e.previous;if(a[r]){t={};for(var s=r,u=i;u!==r;)t[s]=u,s=u,u=n[u];t[s]=u}else a[r]=r,delete o[r],n[r]=i},leave:function(e){var t=e.current;s[t]=t,delete a[t]},allowTraversal:function(e){var r=e.next;return!t&&!s[r]}};Object.keys(o).length;){var l=Object.keys(o)[0];(0,i.default)(e,l,u)}return t};t.default=f},81940:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r,o){void 0===o&&(o=!0);!function e(t,r,o,i,a){void 0===a&&(a=!0);i.enter({current:r,previous:o});var s=t.edges,u=void 0===s?[]:s;(0,n.getNeighbors)(r,u,a?"target":void 0).forEach(function(n){i.allowTraversal({previous:o,current:r,next:n})&&e(t,n,r,i,a)});i.leave({current:r,previous:o})}(e,t,"",function(e){void 0===e&&(e={});var t=e,r=function(){},n=(o={},function(e){var t=e.next;return!o[t]&&(o[t]=!0,!0)});var o;return t.allowTraversal=e.allowTraversal||n,t.enter=e.enter||r,t.leave=e.leave||r,t}(r),o)};var n=r(28182)},47618:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(97582),o=r(31834),i=r(28182),a=function(e,t,r,n){var o=e.nodes,a=void 0===o?[]:o,u=e.edges,l=void 0===u?[]:u,c=[],f={},h={},p={};a.forEach(function(e,r){var n=e.id;c.push(n),h[n]=1/0,n===t&&(h[n]=0)});for(var d=a.length,y=function(e){var t=function(e,t,r){for(var n,o=1/0,i=0;i<t.length;i++){var a=t[i].id;!r[a]&&e[a]<=o&&(o=e[a],n=t[i])}return n}(h,a,f),o=t.id;if(f[o]=!0,h[o]===1/0)return"continue";(r?(0,i.getOutEdgesNodeId)(o,l):(0,i.getEdgesByNodeId)(o,l)).forEach(function(e){var r=e.target,i=e.source,a=r===o?i:r,s=n&&e[n]?e[n]:1;h[a]>h[t.id]+s?(h[a]=h[t.id]+s,p[a]=[t.id]):h[a]===h[t.id]+s&&p[a].push(t.id)})},v=0;v<d;v++)y();p[t]=[t];var g={};for(var m in h)h[m]!==1/0&&s(t,m,p,g);var b={};for(var m in g)b[m]=g[m][0];return{length:h,path:b,allPath:g}};function s(e,t,r,i){if(e===t)return[e];if(i[t])return i[t];for(var a=[],u=0,l=r[t];u<l.length;u++){var c=s(e,l[u],r,i);if(!c)return;for(var f=0,h=c;f<h.length;f++){var p=h[f];(0,o.isArray)(p)?a.push((0,n.__spreadArray)((0,n.__spreadArray)([],p,!0),[t],!1)):a.push([p,t])}}return i[t]=a,i[t]}t.default=a},56:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.findShortestPath=t.findAllPath=void 0;var n,o=(n=r(47618))&&n.__esModule?n:{default:n},i=r(28182);t.findShortestPath=function(e,t,r,n,i){var a=(0,o.default)(e,t,n,i),s=a.length,u=a.path,l=a.allPath;return{length:s[r],path:u[r],allPath:l[r]}};t.findAllPath=function(e,t,r,n){var o;if(t===r)return[[t]];var a=e.edges,s=void 0===a?[]:a,u=[t],l=((o={})[t]=!0,o),c=[],f=[],h=n?(0,i.getNeighbors)(t,s,"target"):(0,i.getNeighbors)(t,s);for(c.push(h);u.length>0&&c.length>0;){var p=c[c.length-1];if(p.length){var d=p.shift();if(d&&(u.push(d),l[d]=!0,h=n?(0,i.getNeighbors)(d,s,"target"):(0,i.getNeighbors)(d,s),c.push(h.filter(function(e){return!l[e]}))),u[u.length-1]===r){var y=u.map(function(e){return e});f.push(y),v=u.pop(),l[v]=!1,c.pop()}}else{var v=u.pop();l[v]=!1,c.pop()}}return f}},51613:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,o=(n=r(57238))&&n.__esModule?n:{default:n};var i=function(e,t){for(var r=(0,o.default)(e,t),n=[],i=r.length,a=0;a<i;a+=1){n[a]=[];for(var s=0;s<i;s+=1)a===s?n[a][s]=0:0!==r[a][s]&&r[a][s]?n[a][s]=r[a][s]:n[a][s]=1/0}for(var u=0;u<i;u+=1)for(a=0;a<i;a+=1)for(s=0;s<i;s+=1)n[a][s]>n[a][u]+n[u][s]&&(n[a][s]=n[a][u]+n[u][s]);return n};t.default=i},55654:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(31834),o=r(1821),i=function(){function e(e,t,r,n,i){this.fromNode=e,this.toNode=t,this.nodeEdgeNodeLabel={nodeLabel1:r||o.VACANT_NODE_LABEL,edgeLabel:n||o.VACANT_EDGE_LABEL,nodeLabel2:i||o.VACANT_NODE_LABEL}}return e.prototype.equalTo=function(e){return this.fromNode===e.formNode&&this.toNode===e.toNode&&this.nodeEdgeNodeLabel===e.nodeEdgeNodeLabel},e.prototype.notEqualTo=function(e){return!this.equalTo(e)},e}(),a=function(){function e(){this.rmpath=[],this.dfsEdgeList=[]}return e.prototype.equalTo=function(e){var t=this.dfsEdgeList.length;if(t!==e.length)return!1;for(var r=0;r<t;r++)if(this.dfsEdgeList[r]!==e[r])return!1;return!0},e.prototype.notEqualTo=function(e){return!this.equalTo(e)},e.prototype.pushBack=function(e,t,r,n,o){return this.dfsEdgeList.push(new i(e,t,r,n,o)),this.dfsEdgeList},e.prototype.toGraph=function(e,t){void 0===e&&(e=o.VACANT_GRAPH_ID),void 0===t&&(t=!1);var r=new o.Graph(e,!0,t);return this.dfsEdgeList.forEach(function(e){var t=e.fromNode,n=e.toNode,i=e.nodeEdgeNodeLabel,a=i.nodeLabel1,s=i.edgeLabel,u=i.nodeLabel2;a!==o.VACANT_NODE_LABEL&&r.addNode(t,a),u!==o.VACANT_NODE_LABEL&&r.addNode(n,u),a!==o.VACANT_NODE_LABEL&&u!==a&&r.addEdge(void 0,t,n,s)}),r},e.prototype.buildRmpath=function(){this.rmpath=[];for(var e=void 0,t=this.dfsEdgeList.length-1;t>=0;t--){var r=this.dfsEdgeList[t],n=r.fromNode,o=r.toNode;n<o&&(void 0===e||o===e)&&(this.rmpath.push(t),e=n)}return this.rmpath},e.prototype.getNodeNum=function(){var e={};return this.dfsEdgeList.forEach(function(t){e[t.fromNode]||(e[t.fromNode]=!0),e[t.toNode]||(e[t.toNode]=!0)}),Object.keys(e).length},e}(),s=function(){function e(e){if(this.his={},this.nodesUsed={},this.edgesUsed={},this.edges=[],e){for(;e;){var t=e.edge;this.edges.push(t),this.nodesUsed[t.from]=1,this.nodesUsed[t.to]=1,this.edgesUsed[t.id]=1,e=e.preNode}this.edges=this.edges.reverse()}}return e.prototype.hasNode=function(e){return 1===this.nodesUsed[e.id]},e.prototype.hasEdge=function(e){return 1===this.edgesUsed[e.id]},e}(),u=function(){function e(e){var t=e.graphs,r=e.minSupport,n=void 0===r?2:r,o=e.minNodeNum,i=void 0===o?1:o,s=e.maxNodeNum,u=void 0===s?4:s,l=e.top,c=void 0===l?10:l,f=e.directed,h=void 0!==f&&f,p=e.verbose,d=void 0!==p&&p;this.graphs=t,this.dfsCode=new a,this.support=0,this.frequentSize1Subgraphs=[],this.frequentSubgraphs=[],this.minSupport=n,this.top=c,this.directed=h,this.counter=0,this.maxNodeNum=u,this.minNodeNum=i,this.verbose=d,this.maxNodeNum<this.minNodeNum&&(this.maxNodeNum=this.minNodeNum),this.reportDF=[]}return e.prototype.findForwardRootEdges=function(e,t){var r=this,n=[],o=e.nodeMap;return t.edges.forEach(function(e){(r.directed||t.label<=o[e.to].label)&&n.push(e)}),n},e.prototype.findBackwardEdge=function(e,t,r,n){if(!this.directed&&t===r)return null;for(var o=e.nodeMap,i=o[r.to].edges,a=i.length,s=0;s<a;s++){var u=i[s];if(!n.hasEdge(u)&&u.to===t.from)if(this.directed){if(o[t.from].label<o[r.to].label||o[t.from].label===o[r.to].label&&t.label<=u.label)return u}else if(t.label<u.label||t.label===u.label&&o[t.to].label<=o[r.to].label)return u}return null},e.prototype.findForwardPureEdges=function(e,t,r,n){for(var o=[],i=t.to,a=e.nodeMap[i].edges,s=a.length,u=0;u<s;u++){var l=a[u],c=e.nodeMap[l.to];r<=c.label&&!n.hasNode(c)&&o.push(l)}return o},e.prototype.findForwardRmpathEdges=function(e,t,r,n){for(var o=[],i=e.nodeMap,a=i[t.to].label,s=i[t.from].edges,u=s.length,l=0;l<u;l++){var c=s[l],f=i[c.to].label;t.to===c.to||r>f||n.hasNode(i[c.to])||(t.label<c.label||t.label===c.label&&a<=f)&&o.push(c)}return o},e.prototype.getSupport=function(e){var t={};return e.forEach(function(e){t[e.graphId]||(t[e.graphId]=!0)}),Object.keys(t).length},e.prototype.findMinLabel=function(e){var t=void 0;return Object.keys(e).forEach(function(r){var n=e[r],o=n.nodeLabel1,i=n.edgeLabel,a=n.nodeLabel2;t?(o<t.nodeLabel1||o===t.nodeLabel1&&i<t.edgeLabel||o===t.nodeLabel1&&i===t.edgeLabel&&a<t.nodeLabel2)&&(t={nodeLabel1:o,edgeLabel:i,nodeLabel2:a}):t={nodeLabel1:o,edgeLabel:i,nodeLabel2:a}}),t},e.prototype.isMin=function(){var e=this,t=this.dfsCode;if(this.verbose&&console.log("isMin checking",t),1===t.dfsEdgeList.length)return!0;var r=this.directed,n=t.toGraph(o.VACANT_GRAPH_ID,r),u=n.nodeMap,l=new a,c={};n.nodes.forEach(function(t){e.findForwardRootEdges(n,t).forEach(function(e){var r=u[e.to],o="".concat(t.label,"-").concat(e.label,"-").concat(r.label);c[o]||(c[o]={projected:[],nodeLabel1:t.label,edgeLabel:e.label,nodeLabel2:r.label});var i={graphId:n.id,edge:e,preNode:null};c[o].projected.push(i)})});var f=this.findMinLabel(c);if(f){l.dfsEdgeList.push(new i(0,1,f.nodeLabel1,f.edgeLabel,f.nodeLabel2));var h="".concat(f.nodeLabel1,"-").concat(f.edgeLabel,"-").concat(f.nodeLabel2);return function a(c){for(var f=l.buildRmpath(),h=l.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,p=l.dfsEdgeList[f[0]].toNode,d={},y=!1,v=0,g=r?-1:0,m=function(t){if(y)return"break";c.forEach(function(r){var o=new s(r),i=e.findBackwardEdge(n,o.edges[f[t]],o.edges[f[0]],o);i&&(d[i.label]||(d[i.label]={projected:[],edgeLabel:i.label}),d[i.label].projected.push({graphId:n.id,edge:d,preNode:r}),v=l.dfsEdgeList[f[t]].fromNode,y=!0)})},b=f.length-1;b>g&&"break"!==m(b);b--);if(y){var w=e.findMinLabel(d);l.dfsEdgeList.push(new i(p,v,o.VACANT_NODE_LABEL,w.edgeLabel,o.VACANT_NODE_LABEL));var _=l.dfsEdgeList.length-1;return e.dfsCode.dfsEdgeList[_]===l.dfsEdgeList[_]&&a(d[w.edgeLabel].projected)}var x={};y=!1;var S=0;c.forEach(function(t){var r=new s(t),o=e.findForwardPureEdges(n,r.edges[f[0]],h,r);o.length>0&&(y=!0,S=p,o.forEach(function(e){var r="".concat(e.label,"-").concat(u[e.to].label);x[r]||(x[r]={projected:[],edgeLabel:e.label,nodeLabel2:u[e.to].label}),x[r].projected.push({graphId:n.id,edge:e,preNode:t})}))});var O=f.length,P=function(t){if(y)return"break";var r=f[t];c.forEach(function(t){var o=new s(t),i=e.findForwardRmpathEdges(n,o.edges[r],h,o);i.length>0&&(y=!0,S=l.dfsEdgeList[r].fromNode,i.forEach(function(e){var r="".concat(e.label,"-").concat(u[e.to].label);x[r]||(x[r]={projected:[],edgeLabel:e.label,nodeLabel2:u[e.to].label}),x[r].projected.push({graphId:n.id,edge:e,preNode:t})}))})};for(b=0;b<O&&"break"!==P(b);b++);if(!y)return!0;var E=e.findMinLabel(x);l.dfsEdgeList.push(new i(S,p+1,o.VACANT_NODE_LABEL,E.edgeLabel,E.nodeLabel2));var k=l.dfsEdgeList.length-1;return t.dfsEdgeList[k]===l.dfsEdgeList[k]&&a(x["".concat(E.edgeLabel,"-").concat(E.nodeLabel2)].projected)}(c[h].projected)}},e.prototype.report=function(){if(!(this.dfsCode.getNodeNum()<this.minNodeNum)){this.counter++;var e=this.dfsCode.toGraph(this.counter,this.directed);this.frequentSubgraphs.push((0,n.clone)(e))}},e.prototype.subGraphMining=function(e){var t=this;if(!(this.getSupport(e)<this.minSupport)&&this.isMin()){this.report();var r=this.dfsCode.getNodeNum(),n=this.dfsCode.buildRmpath(),a=this.dfsCode.dfsEdgeList[n[0]].toNode,u=this.dfsCode.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,l={},c={};e.forEach(function(e){for(var o=t.graphs[e.graphId],i=o.nodeMap,f=new s(e),h=n.length-1;h>=0;h--){var p=t.findBackwardEdge(o,f.edges[n[h]],f.edges[n[0]],f);if(p){var d="".concat(t.dfsCode.dfsEdgeList[n[h]].fromNode,"-").concat(p.label);c[d]||(c[d]={projected:[],toNodeId:t.dfsCode.dfsEdgeList[n[h]].fromNode,edgeLabel:p.label}),c[d].projected.push({graphId:e.graphId,edge:p,preNode:e})}}if(!(r>=t.maxNodeNum)){t.findForwardPureEdges(o,f.edges[n[0]],u,f).forEach(function(t){var r="".concat(a,"-").concat(t.label,"-").concat(i[t.to].label);l[r]||(l[r]={projected:[],fromNodeId:a,edgeLabel:t.label,nodeLabel2:i[t.to].label}),l[r].projected.push({graphId:e.graphId,edge:t,preNode:e})});var y=function(r){t.findForwardRmpathEdges(o,f.edges[n[r]],u,f).forEach(function(o){var a="".concat(t.dfsCode.dfsEdgeList[n[r]].fromNode,"-").concat(o.label,"-").concat(i[o.to].label);l[a]||(l[a]={projected:[],fromNodeId:t.dfsCode.dfsEdgeList[n[r]].fromNode,edgeLabel:o.label,nodeLabel2:i[o.to].label}),l[a].projected.push({graphId:e.graphId,edge:o,preNode:e})})};for(h=0;h<n.length;h++)y(h)}}),Object.keys(c).forEach(function(e){var r=c[e],n=r.toNodeId,o=r.edgeLabel;t.dfsCode.dfsEdgeList.push(new i(a,n,"-1",o,"-1")),t.subGraphMining(c[e].projected),t.dfsCode.dfsEdgeList.pop()}),Object.keys(l).forEach(function(e){var r=l[e],n=r.fromNodeId,s=r.edgeLabel,u=r.nodeLabel2;t.dfsCode.dfsEdgeList.push(new i(n,a+1,o.VACANT_NODE_LABEL,s,u)),t.subGraphMining(l[e].projected),t.dfsCode.dfsEdgeList.pop()})}},e.prototype.generate1EdgeFrequentSubGraphs=function(){var e=this.graphs,t=this.directed,r=this.minSupport,n=this.frequentSize1Subgraphs,o={},i={},a={},s={};return Object.keys(e).forEach(function(r){var n=e[r],u=n.nodeMap;n.nodes.forEach(function(e,n){var l=e.label,c="".concat(r,"-").concat(l);if(!a[c]){var f=o[l]||0;f++,o[l]=f}a[c]={graphKey:r,label:l},e.edges.forEach(function(e){var n=l,o=u[e.to].label;if(!t&&n>o){var a=o;o=n,n=a}var c=e.label,f="".concat(r,"-").concat(n,"-").concat(c,"-").concat(o),h="".concat(n,"-").concat(c,"-").concat(o);if(!i[h]){var p=i[h]||0;p++,i[h]=p}s[f]={graphId:r,nodeLabel1:n,edgeLabel:c,nodeLabel2:o}})})}),Object.keys(o).forEach(function(e){if(!(o[e]<r)){var t={nodes:[],edges:[]};t.nodes.push({id:"0",label:e}),n.push(t)}}),n},e.prototype.run=function(){var e=this;if(this.frequentSize1Subgraphs=this.generate1EdgeFrequentSubGraphs(),!(this.maxNodeNum<2)){var t=this.graphs,r=(this.directed,{});Object.keys(t).forEach(function(n){var o=t[n],i=o.nodeMap;o.nodes.forEach(function(t){e.findForwardRootEdges(o,t).forEach(function(e){var o=i[e.to],a="".concat(t.label,"-").concat(e.label,"-").concat(o.label);r[a]||(r[a]={projected:[],nodeLabel1:t.label,edgeLabel:e.label,nodeLabel2:o.label});var s={graphId:n,edge:e,preNode:null};r[a].projected.push(s)})})}),Object.keys(r).forEach(function(t){var n=r[t],o=n.projected,a=n.nodeLabel1,s=n.edgeLabel,u=n.nodeLabel2;e.dfsCode.dfsEdgeList.push(new i(0,1,a,s,u)),e.subGraphMining(o),e.dfsCode.dfsEdgeList.pop()})}},e}(),l=function(e){var t=e.graphs,r=e.directed,n=void 0!==r&&r,i=e.nodeLabelProp,a=void 0===i?"cluster":i,s=e.edgeLabelProp,l=void 0===s?"cluster":s,c=function(e,t,r,n){var i={};return Object.keys(e).forEach(function(a,s){var u=e[a],l=new o.Graph(s,!0,t),c={};u.nodes.forEach(function(e,t){l.addNode(t,e[r]),c[e.id]=t}),u.edges.forEach(function(e,t){var r=c[e.source],o=c[e.target];l.addEdge(-1,r,o,e[n])}),l&&l.getNodeNum()&&(i[l.id]=l)}),i}(t,n,a,l),f=e.minSupport,h=e.maxNodeNum,p=e.minNodeNum,d=e.verbose,y=e.top,v=new u({graphs:c,minSupport:f,maxNodeNum:h,minNodeNum:p,top:y,verbose:d,directed:n});return v.run(),function(e,t,r){var n=[];return e.forEach(function(e){var o={nodes:[],edges:[]};e.nodes.forEach(function(e){var r;o.nodes.push(((r={id:"".concat(e.id)})[t]=e.label,r))}),e.edges.forEach(function(e){var t;o.edges.push(((t={source:"".concat(e.from),target:"".concat(e.to)})[r]=e.label,t))}),n.push(o)}),n}(v.frequentSubgraphs,a,l)};t.default=l},1821:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VACANT_NODE_LABEL=t.VACANT_NODE_ID=t.VACANT_GRAPH_ID=t.VACANT_EDGE_LABEL=t.VACANT_EDGE_ID=t.Node=t.Graph=t.Edge=t.AUTO_EDGE_ID=void 0;var r=-1;t.VACANT_EDGE_ID=r;var n=-1;t.VACANT_NODE_ID=n;var o="-1";t.VACANT_EDGE_LABEL=o;var i="-1";t.VACANT_NODE_LABEL=i;t.VACANT_GRAPH_ID=-1;t.AUTO_EDGE_ID="-1";var a=function(){return function(e,t,i,a){void 0===e&&(e=r),void 0===t&&(t=n),void 0===i&&(i=n),void 0===a&&(a=o),this.id=e,this.from=t,this.to=i,this.label=a}}();t.Edge=a;var s=function(){function e(e,t){void 0===e&&(e=n),void 0===t&&(t=i),this.id=e,this.label=t,this.edges=[],this.edgeMap={}}return e.prototype.addEdge=function(e){this.edges.push(e),this.edgeMap[e.id]=e},e}();t.Node=s;var u=function(){function e(e,t,r){void 0===e&&(e=n),void 0===t&&(t=!0),void 0===r&&(r=!1),this.id=e,this.edgeIdAutoIncrease=t,this.edges=[],this.nodes=[],this.nodeMap={},this.edgeMap={},this.nodeLabelMap={},this.edgeLabelMap={},this.counter=0,this.directed=r}return e.prototype.getNodeNum=function(){return this.nodes.length},e.prototype.addNode=function(e,t){if(!this.nodeMap[e]){var r=new s(e,t);this.nodes.push(r),this.nodeMap[e]=r,this.nodeLabelMap[t]||(this.nodeLabelMap[t]=[]),this.nodeLabelMap[t].push(e)}},e.prototype.addEdge=function(e,t,r,n){if((this.edgeIdAutoIncrease||void 0===e)&&(e=this.counter++),!(this.nodeMap[t]&&this.nodeMap[r]&&this.nodeMap[r].edgeMap[e])){var o=new a(e,t,r,n);if(this.edges.push(o),this.edgeMap[e]=o,this.nodeMap[t].addEdge(o),this.edgeLabelMap[n]||(this.edgeLabelMap[n]=[]),this.edgeLabelMap[n].push(o),!this.directed){var i=new a(e,r,t,n);this.nodeMap[r].addEdge(i),this.edgeLabelMap[n].push(i)}}},e}();t.Graph=u},29317:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(97582),o=u(r(51613)),i=u(r(55654)),a=u(r(47618)),s=r(28182);function u(e){return e&&e.__esModule?e:{default:e}}var l=function(e,t,r,n){void 0===r&&(r="cluster"),void 0===n&&(n=2);var o=[],i=e.nodes;return t.forEach(function(e,t){o.push(c(i,e,t,r,n))}),o},c=function(e,t,r,n,o){var i=[r],a=[],s={};return t.forEach(function(t,u){if(t<=o&&r!==u){i.push(u),a.push(e[u]);var l=e[u][n];s[l]?(s[l].count++,s[l].dists.push(t)):s[l]={count:1,dists:[t]}}}),Object.keys(s).forEach(function(e){s[e].dists=s[e].dists.sort(function(e,t){return e-t})}),{nodeIdx:r,nodeId:e[r].id,nodeIdxs:i,neighbors:a,neighborNum:i.length-1,nodeLabelCountMap:s}},f=function(e,t,r,n){var o=r.nodes;return n||(n={}),Object.keys(e).forEach(function(i){var a,s;if(!n||!n[i]){n[i]={nodes:[],edges:[]};var u=e[i],l=null===(a=t[u.start])||void 0===a?void 0:a.nodeIdxs,c=null===(s=t[u.end])||void 0===s?void 0:s.nodeIdxs;if(l&&c){var f=new Set(c),h=l.filter(function(e){return f.has(e)});if(h&&h.length){for(var p={},d=h.length,y=0;y<d;y++){var v=o[h[y]];n[i].nodes.push(v),p[v.id]=!0}r.edges.forEach(function(e){p[e.source]&&p[e.target]&&n[i].edges.push(e)})}}}}),n},h=function(e,t,r,n){var o,i,a={};e.nodes.forEach(function(e){a[e.id]=e});var s=0;return!(null===(o=null===t||void 0===t?void 0:t.edges)||void 0===o?void 0:o.length)||(null===(i=null===t||void 0===t?void 0:t.nodes)||void 0===i?void 0:i.length)<2?0:(e.edges.forEach(function(e){var o=a[e.source][r],i=a[e.target][r],u=null===t||void 0===t?void 0:t.nodes[0][r],l=null===t||void 0===t?void 0:t.nodes[1][r],c=null===t||void 0===t?void 0:t.edges[0][n];e[n]===c&&(o===u&&i===l||o===l&&i===u)&&s++}),s)},p=function(e,t){var r={},n={};return e.forEach(function(e,o){r[e.id]={idx:o,node:e,degree:0,inDegree:0,outDegree:0};var i=e[t];n[i]||(n[i]=[]),n[i].push(e)}),{nodeMap:r,nodeLabelMap:n}},d=function(e,t,r){var n={},o={};return e.forEach(function(e,i){n["".concat(s.uniqueId)]={idx:i,edge:e};var a=e[t];o[a]||(o[a]=[]),o[a].push(e);var u=r[e.source];u&&(u.degree++,u.outDegree++);var l=r[e.target];l&&(l.degree++,l.inDegree++)}),{edgeMap:n,edgeLabelMap:o}},y=function(e,t,r){var n=t.length,o={};return t.forEach(function(t,i){for(var a=r?0:i+1,s=e[i].id,u=a;u<n;u++)if(i!==u){var l=e[u].id,c=t[u];o["".concat(s,"-").concat(l)]=c,r||(o["".concat(l,"-").concat(s)]=c)}}),o},v=function(e,t,r,n,o,i,a,s,u,l,c){var p,d="".concat(t.id,"-").concat(r.id);if(l&&l[d])return l[d];var y=c?c[d]:void 0;if(!y){var v=((p={})[d]={start:n[t.id].idx,end:n[r.id].idx,distance:o},p);y=(c=f(v,i,e,c))[d]}return h(y,a,s,u)},g=function(e,t,r,n){var o,i,a,s=null===(o=e[t])||void 0===o?void 0:o.degree,u=null===(i=e[t])||void 0===i?void 0:i.inDegree,l=null===(a=e[t])||void 0===a?void 0:a.outDegree;return void 0===e[t]&&(s=1/0,u=1/0,l=1/0,n[t].forEach(function(e){var t=r[e.id].degree;s>t&&(s=t);var n=r[e.id].inDegree;u>n&&(u=n);var o=r[e.id].outDegree;l>o&&(l=o)}),e[t]={degree:s,inDegree:u,outDegree:l}),{minPatternNodeLabelDegree:s,minPatternNodeLabelInDegree:u,minPatternNodeLabelOutDegree:l}},m=function(e,t,r,s,u,m,b){var w;if(void 0===r&&(r=!1),void 0===m&&(m="cluster"),void 0===b&&(b="cluster"),e&&e.nodes){var _=e.nodes.length;if(_){var x=(0,o.default)(e,r),S=(0,o.default)(t,r),O=y(e.nodes,x,r),P=y(t.nodes,S,r),E=p(e.nodes,m),k=E.nodeMap,M=E.nodeLabelMap,C=p(t.nodes,m),j=C.nodeMap,T=C.nodeLabelMap;d(e.edges,b,k);var A=d(t.edges,b,j).edgeLabelMap,I=[];null===S||void 0===S||S.forEach(function(e){I=I.concat(e)}),u||(u=Math.max.apply(Math,(0,n.__spreadArray)((0,n.__spreadArray)([],I,!1),[2],!1))),s||(s=u);var R=l(e,x,m,s),L=l(t,S,m,s),N=function(e,t,r,n,o){var i=Math.ceil(r/t),a={},s=0;return n.forEach(function(e,n){for(var u=0,l=0,c=e.nodeIdxs,f=e.neighborNum-1;u<i;){for(var h=c[1+Math.floor(Math.random()*f)],p=0;(a["".concat(n,"-").concat(h)]||a["".concat(h,"-").concat(n)])&&(h=Math.floor(Math.random()*t),!(++p>2*t)););if(p<2*t&&(a["".concat(n,"-").concat(h)]={start:n,end:h,distance:o[n][h]},u++,++s>=r))return a;if(++l>2*t)break}u<i&&(i=(i+(i-u))/(t-n-1))}),a}(0,_,Math.min(100,_*(_-1)/2),R,x),D=f(N,R,e),B={graphs:D,nodeLabelProp:m,edgeLabelProp:b,minSupport:1,minNodeNum:1,maxNodeNum:4,directed:r},F=(0,i.default)(B).slice(0,10),G=F.length,z=[];F.forEach(function(e,t){z[t]={},Object.keys(D).forEach(function(r){var n=D[r],o=h(n,e,m,b);z[t][r]=o})});var U=function(e,t,r){for(var n=1/0,o=0,i=function(t){var r=e[t],i=[];Object.keys(r).sort(function(e,t){return r[e]-r[t]}).forEach(function(e,t){i[t%10]||(i[t%10]={graphs:[],totalCount:0,aveCount:0}),i[t%10].graphs.push(e),i[t%10].totalCount+=r[e]});var a=0,s=[];i.forEach(function(e){var t=e.totalCount/e.graphs.length;e.aveCount=t,s.push(t);var n=0,o=e.length;e.graphs.forEach(function(t,o){var i=r[t];e.graphs.forEach(function(e,t){o!==t&&(n+=Math.abs(i-r[e]))})}),a+=n/=o*(o-1)/2}),a/=i.length;var u=0;s.forEach(function(e,t){s.forEach(function(r,n){t!==n&&(u+=Math.abs(e-r))}),u/=s.length*(s.length-1)/2});var l=u-a;n<l&&(n=l,o=t)},a=0;a<t;a++)i(a);return{structure:r[o],structureCountMap:e[o]}}(z,G,F),V=U.structure,W=U.structureCountMap,Y=t.nodes[0],H=[],X=null===(w=t.nodes[0])||void 0===w?void 0:w[m],q=-1/0;t.nodes.forEach(function(e){var t=e[m],r=M[t];(null===r||void 0===r?void 0:r.length)>q&&(q=r.length,H=r,X=t,Y=e)});var J={},Z={},K={},Q={},$={},ee={};Object.keys(T).forEach(function(n,o){$[n]=[],r&&(ee[n]=[]);var i=-1/0,a={};T[n].forEach(function(e){var t=P["".concat(Y.id,"-").concat(e.id)];if(t&&$[n].push(t),i<t&&(i=t),a["".concat(Y.id,"-").concat(e.id)]={start:0,end:j[e.id].idx,distance:t},r){var o=P["".concat(e.id,"-").concat(Y.id)];o&&ee[n].push(o)}}),$[n]=$[n].sort(function(e,t){return e-t}),r&&(ee[n]=ee[n].sort(function(e,t){return e-t})),Z=f(a,L,t,Z);var s=[];if(Object.keys(a).forEach(function(e){if(K[e])s.push(K[e]);else{var t=Z[e];K[e]=h(t,V,m,b),s.push(K[e])}}),s=s.sort(function(e,t){return t-e}),Q["".concat(Y.id,"-").concat(n)]=s,n!==X)for(var u=function(t){var r=H[t],o=R[k[r.id].idx],i=o.nodeLabelCountMap[n],a=T[n].length;if(!i||i.count<a)return H.splice(t,1),"continue";for(var u=!1,l=0;l<a;l++)if(i.dists[l]>$[n][l]){u=!0;break}if(u)return H.splice(t,1),"continue";var c={};o.neighbors.forEach(function(e){var t=O["".concat(r.id,"-").concat(e.id)];c["".concat(r.id,"-").concat(e.id)]={start:k[r.id].idx,end:k[e.id].idx,distance:t}}),D=f(c,R,e,D);var p=[];Object.keys(c).forEach(function(e){if(W[e])p.push(W[e]);else{var t=D[e];W[e]=h(t,V,m,b),p.push(W[e])}}),p=p.sort(function(e,t){return t-e});var d=!1;for(l=0;l<a;l++)if(p[l]<s[l]){d=!0;break}return d?(H.splice(t,1),"continue"):void 0},l=((null===H||void 0===H?void 0:H.length)||0)-1;l>=0;l--)u(l)});var te=[];null===H||void 0===H||H.forEach(function(n){for(var o=k[n.id].idx,i=c(e.nodes,x[o],o,m,u).neighbors,a=!1,s=i.length-1;s>=0;s--){if(i.length+1<t.nodes.length)return void(a=!0);var l=i[s],f=l[m];if(T[f]&&T[f].length)if($[f]&&$[f].length){var h="".concat(n.id,"-").concat(l.id),p=O[h],d=$[f].length-1;if(p>$[f][d])i.splice(s,1);else{if(r){var y="".concat(l.id,"-").concat(n.id),w=O[y];if(d=ee[f].length-1,w>ee[f][d]){i.splice(s,1);continue}}var _=W[h]?W[h]:v(e,n,l,k,p,R,V,m,b,W,D),S="".concat(Y.id,"-").concat(f);if(_<Q[S][Q[S].length-1])i.splice(s,1);else{var P=g(J,f,j,T),E=P.minPatternNodeLabelDegree;P.minPatternNodeLabelInDegree,P.minPatternNodeLabelOutDegree,k[l.id].degree<E&&i.splice(s,1)}}}else i.splice(s,1);else i.splice(s,1)}a||te.push({nodes:[n].concat(i)})});var re=(0,a.default)(t,Y.id,!1).length,ne={};r?(Object.keys(re).forEach(function(e){var t=j[e].node[m];ne[t]?ne[t].push(re[e]):ne[t]=[re[e]]}),Object.keys(ne).forEach(function(e){ne[e].sort(function(e,t){return e-t})})):ne=$;for(var oe=function(n){var o=te[n],i=o.nodes[0],s={},u={};o.nodes.forEach(function(e,t){u[e.id]={idx:t,node:e,degree:0,inDegree:0,outDegree:0};var r=e[m];s[r]?s[r]++:s[r]=1});var l=[],c={};e.edges.forEach(function(e){u[e.source]&&u[e.target]&&(l.push(e),c[e[b]]?c[e[b]]++:c[e[b]]=1,u[e.source].degree++,u[e.target].degree++,u[e.source].outDegree++,u[e.target].inDegree++)});for(var f=Object.keys(A).length,h=!1,p=0;p<f;p++){var d=Object.keys(A)[p];if(!c[d]||c[d]<A[d].length){h=!0;break}}if(h)return te.splice(n,1),"continue";var y=l.length;if(y<t.edges.length)return te.splice(n,1),"break";var v=!1,w=function(e){var t=l[e],n=t[b],o=A[n];if(!o||!o.length)return c[n]--,o&&c[n]<o.length?(v=!0,"break"):(l.splice(e,1),u[t.source].degree--,u[t.target].degree--,u[t.source].outDegree--,u[t.target].inDegree--,"continue");var i=u[t.source].node[m],a=u[t.target].node[m],s=!1;return o.forEach(function(e){var t=j[e.source].node,n=j[e.target].node;t[m]===i&&n[m]===a&&(s=!0),r||t[m]!==a||n[m]!==i||(s=!0)}),s?void 0:(c[n]--,o&&c[n]<o.length?(v=!0,"break"):(l.splice(e,1),u[t.source].degree--,u[t.target].degree--,u[t.source].outDegree--,u[t.target].inDegree--,"continue"))};for(p=y-1;p>=0&&"break"!==w(p);p--);if(v)return te.splice(n,1),"continue";o.edges=l;var _=(0,a.default)(o,o.nodes[0].id,!1).length;if(Object.keys(_).reverse().forEach(function(e){if(e!==o.nodes[0].id&&!v){if(_[e]===1/0){var t=u[e].node[m];if(s[t]--,s[t]<T[t].length)return void(v=!0);var r=o.nodes.indexOf(u[e].node);return o.nodes.splice(r,1),void(u[e]=void 0)}var n=k[e].node[m];if(!ne[n]||!ne[n].length||_[e]>ne[n][ne[n].length-1]){if(t=u[e].node[m],s[t]--,s[t]<T[t].length)return void(v=!0);r=o.nodes.indexOf(u[e].node),o.nodes.splice(r,1),u[e]=void 0}}}),v)return te.splice(n,1),"continue";for(var x=!0,S=0;x&&!v;){if(x=!1,r?u[i.id].degree<j[Y.id].degree||u[i.id].inDegree<j[Y.id].inDegree||u[i.id].outDegree<j[Y.id].outDegree:u[i.id].degree<j[Y.id].degree){v=!0;break}if(s[i[m]]<T[i[m]].length){v=!0;break}for(var O=o.nodes.length-1;O>=0;O--){var P=o.nodes[O],E=u[P.id].degree,M=u[P.id].inDegree,C=u[P.id].outDegree,I=P[m],R=g(J,I,j,T),L=R.minPatternNodeLabelDegree,N=R.minPatternNodeLabelInDegree,D=R.minPatternNodeLabelOutDegree;if(r?E<L||M<N||C<D:E<L){if(s[P[m]]--,s[P[m]]<T[P[m]].length){v=!0;break}o.nodes.splice(O,1),u[P.id]=void 0,x=!0}}if(v||!x&&0!==S)break;for(var B=(y=l.length)-1;B>=0;B--){var F=l[B];if(!u[F.source]||!u[F.target]){l.splice(B,1);var G=F[b];if(c[G]--,u[F.source]&&(u[F.source].degree--,u[F.source].outDegree--),u[F.target]&&(u[F.target].degree--,u[F.target].inDegree--),A[G]&&c[G]<A[G].length){v=!0;break}x=!0}}S++}return v?(te.splice(n,1),"continue"):v||o.nodes.length<t.nodes.length||l.length<t.edges.length?(te.splice(n,1),"continue"):void 0},ie=te.length-1;ie>=0&&"break"!==oe(ie);ie--);var ae=te.length,se=function(e){var t={};te[e].edges.forEach(function(e){var r="".concat(e.source,"-").concat(e.target,"-").concat(e.label);t[r]?t[r]++:t[r]=1});for(var r=function(e){var r={};te[e].edges.forEach(function(e){var t="".concat(e.source,"-").concat(e.target,"-").concat(e.label);r[t]?r[t]++:r[t]=1});var n=!0;Object.keys(r).length!==Object.keys(t).length?n=!1:Object.keys(t).forEach(function(e){r[e]!==t[e]&&(n=!1)}),n&&te.splice(e,1)},n=ae-1;n>e;n--)r(n);ae=te.length};for(ie=0;ie<=ae-1;ie++)se(ie);return te}}};t.default=m},22124:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,o=(n=r(2006))&&n.__esModule?n:{default:n};var i=function(e,t,r,n,i,a,s,u){return void 0===t&&(t=!1),void 0===r&&(r="weight"),void 0===n&&(n=1e-4),void 0===i&&(i=void 0),void 0===a&&(a=[]),void 0===s&&(s=["id"]),void 0===u&&(u=1),(0,o.default)(e,t,r,n,!0,i,a,s,u)};t.default=i},81366:function(e,t,r){"use strict";function n(e){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"GADDI",{enumerable:!0,get:function(){return x.default}}),Object.defineProperty(t,"Stack",{enumerable:!0,get:function(){return S.default}}),Object.defineProperty(t,"breadthFirstSearch",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"connectedComponent",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"cosineSimilarity",{enumerable:!0,get:function(){return m.default}}),t.default=void 0,Object.defineProperty(t,"depthFirstSearch",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"detectAllCycles",{enumerable:!0,get:function(){return u.detectAllCycles}}),Object.defineProperty(t,"detectAllDirectedCycle",{enumerable:!0,get:function(){return u.detectAllDirectedCycle}}),Object.defineProperty(t,"detectAllUndirectedCycle",{enumerable:!0,get:function(){return u.detectAllUndirectedCycle}}),Object.defineProperty(t,"detectCycle",{enumerable:!0,get:function(){return u.default}}),t.detectDirectedCycle=void 0,Object.defineProperty(t,"dijkstra",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(t,"findAllPath",{enumerable:!0,get:function(){return f.findAllPath}}),Object.defineProperty(t,"findShortestPath",{enumerable:!0,get:function(){return f.findShortestPath}}),Object.defineProperty(t,"floydWarshall",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(t,"getAdjMatrix",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"getDegree",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"getInDegree",{enumerable:!0,get:function(){return s.getInDegree}}),Object.defineProperty(t,"getNeighbors",{enumerable:!0,get:function(){return O.getNeighbors}}),Object.defineProperty(t,"getOutDegree",{enumerable:!0,get:function(){return s.getOutDegree}}),Object.defineProperty(t,"iLouvain",{enumerable:!0,get:function(){return y.default}}),Object.defineProperty(t,"kCore",{enumerable:!0,get:function(){return v.default}}),Object.defineProperty(t,"kMeans",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(t,"labelPropagation",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(t,"louvain",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(t,"minimumSpanningTree",{enumerable:!0,get:function(){return w.default}}),Object.defineProperty(t,"nodesCosineSimilarity",{enumerable:!0,get:function(){return b.default}}),Object.defineProperty(t,"pageRank",{enumerable:!0,get:function(){return _.default}});var o=k(r(57238)),i=k(r(1264)),a=k(r(16616)),s=E(r(63597)),u=E(r(12465)),l=k(r(81940)),c=k(r(47618)),f=r(56),h=k(r(51613)),p=k(r(73760)),d=k(r(2006)),y=k(r(22124)),v=k(r(32141)),g=k(r(32339)),m=k(r(16075)),b=k(r(36649)),w=k(r(60015)),_=k(r(16155)),x=k(r(29317)),S=k(r(51602)),O=r(28182);function P(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(P=function(e){return e?r:t})(e)}function E(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var r=P(t);if(r&&r.has(e))return r.get(e);var o={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=i?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(o,a,s):o[a]=e[a]}return o.default=e,r&&r.set(e,o),o}function k(e){return e&&e.__esModule?e:{default:e}}var M=u.default;t.detectDirectedCycle=M;var C={getAdjMatrix:o.default,breadthFirstSearch:i.default,connectedComponent:a.default,getDegree:s.default,getInDegree:s.getInDegree,getOutDegree:s.getOutDegree,detectCycle:u.default,detectDirectedCycle:M,detectAllCycles:u.detectAllCycles,detectAllDirectedCycle:u.detectAllDirectedCycle,detectAllUndirectedCycle:u.detectAllUndirectedCycle,depthFirstSearch:l.default,dijkstra:c.default,findAllPath:f.findAllPath,findShortestPath:f.findShortestPath,floydWarshall:h.default,labelPropagation:p.default,louvain:d.default,iLouvain:y.default,kCore:v.default,kMeans:g.default,cosineSimilarity:m.default,nodesCosineSimilarity:b.default,minimumSpanningTree:w.default,pageRank:_.default,getNeighbors:O.getNeighbors,Stack:S.default,GADDI:x.default};t.default=C},32141:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,o=r(31834),i=(n=r(63597))&&n.__esModule?n:{default:n};var a=function(e,t){var r;void 0===t&&(t=1);for(var n=(0,o.clone)(e),a=n.nodes,s=void 0===a?[]:a,u=n.edges,l=void 0===u?[]:u,c=function(){var e=(0,i.default)({nodes:s,edges:l}),n=Object.keys(e);n.sort(function(t,r){var n,o;return(null===(n=e[t])||void 0===n?void 0:n.degree)-(null===(o=e[r])||void 0===o?void 0:o.degree)});var o=n[0];if(!s.length||(null===(r=e[o])||void 0===r?void 0:r.degree)>=t)return"break";var a=s.findIndex(function(e){return e.id===o});s.splice(a,1),l=l.filter(function(e){return!(e.source===o||e.target===o)})};"break"!==c(););return{nodes:s,edges:l}};t.default=a},32339:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,o=r(31834),i=r(12594),a=r(2821),s=(n=r(43532))&&n.__esModule?n:{default:n},u=r(49332);var l=function(e,t,r){var n=[];switch(e){case u.DistanceType.EuclideanDistance:n=t[r];break;default:n=[]}return n},c=function(e,t,r,n,c,f){void 0===t&&(t=3),void 0===r&&(r=void 0),void 0===n&&(n=[]),void 0===c&&(c=["id"]),void 0===f&&(f=u.DistanceType.EuclideanDistance);var h=e.nodes,p=void 0===h?[]:h,d=e.edges,y=void 0===d?[]:d,v={clusters:[{id:"0",nodes:p}],clusterEdges:[]};if(f===u.DistanceType.EuclideanDistance&&!p.every(function(e){return e.hasOwnProperty(r)}))return v;var g=[],m=[];if(f===u.DistanceType.EuclideanDistance&&(g=(0,i.getAllProperties)(p,r),m=(0,a.oneHot)(g,n,c)),!m.length)return v;for(var b=(0,o.uniq)(m.map(function(e){return e.join("")})),w=Math.min(t,p.length,b.length),_=0;_<p.length;_++)p[_].originIndex=_;var x=[],S=[],O=[];for(_=0;_<w;_++)if(0===_){var P=Math.floor(Math.random()*p.length);switch(f){case u.DistanceType.EuclideanDistance:x[_]=m[P];break;default:x[_]=[]}S.push(P),O[_]=[p[P]],p[P].clusterId=String(_)}else{for(var E=-1/0,k=0,M=function(e){if(!S.includes(e)){for(var t=0,r=0;r<x.length;r++){var n=0;switch(f){case u.DistanceType.EuclideanDistance:n=(0,a.getDistance)(m[p[e].originIndex],x[r],f)}t+=n}var i=t/x.length;i>E&&!x.find(function(t){return(0,o.isEqual)(t,l(f,m,p[e].originIndex))})&&(E=i,k=e)}},C=0;C<p.length;C++)M(C);x[_]=l(f,m,k),S.push(k),O[_]=[p[k]],p[k].clusterId=String(_)}for(var j=0;;){for(_=0;_<p.length;_++){var T=0,A=1/0;if(0!==j||!S.includes(_)){for(var I=0;I<x.length;I++){var R=0;switch(f){case u.DistanceType.EuclideanDistance:R=(0,a.getDistance)(m[_],x[I],f)}R<A&&(A=R,T=I)}if(void 0!==p[_].clusterId)for(var L=O[Number(p[_].clusterId)].length-1;L>=0;L--)O[Number(p[_].clusterId)][L].id===p[_].id&&O[Number(p[_].clusterId)].splice(L,1);p[_].clusterId=String(T),O[T].push(p[_])}}var N=!1;for(_=0;_<O.length;_++){var D=O[_],B=new s.default([]);for(I=0;I<D.length;I++)B=B.add(new s.default(m[D[I].originIndex]));var F=B.avg(D.length);F.equal(new s.default(x[_]))||(N=!0,x[_]=F.getArr())}if(j++,p.every(function(e){return void 0!==e.clusterId})&&N||j>=1e3)break}var G=[],z={};return y.forEach(function(e){var t,r,n=e.source,o=e.target,i=null===(t=p.find(function(e){return e.id===n}))||void 0===t?void 0:t.clusterId,a=null===(r=p.find(function(e){return e.id===o}))||void 0===r?void 0:r.clusterId,s="".concat(i,"---").concat(a);if(z[s])z[s].count++;else{var u={source:i,target:a,count:1};z[s]=u,G.push(u)}}),{clusters:O,clusterEdges:G}};t.default=c},73760:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,o=(n=r(57238))&&n.__esModule?n:{default:n},i=r(28182);var a=function(e,t,r,n){void 0===t&&(t=!1),void 0===r&&(r="weight"),void 0===n&&(n=1e3);var a=e.nodes,s=void 0===a?[]:a,u=e.edges,l=void 0===u?[]:u,c={},f={};s.forEach(function(e,t){var r=(0,i.uniqueId)();e.clusterId=r,c[r]={id:r,nodes:[e]},f[e.id]={node:e,idx:t}});var h=[],p={};(0,o.default)(e,t).forEach(function(e,t){var r=0,n=s[t].id;p[n]={},e.forEach(function(e,t){if(e){r+=e;var o=s[t].id;p[n][o]=e}}),h.push(r)});for(var d=0,y=function(){var e=!1;if(s.forEach(function(t){var r={};Object.keys(p[t.id]).forEach(function(e){var n=p[t.id][e],o=f[e].node.clusterId;r[o]||(r[o]=0),r[o]+=n});var n=-1/0,o=[];if(Object.keys(r).forEach(function(e){n<r[e]?(n=r[e],o=[e]):n===r[e]&&o.push(e)}),1!==o.length||o[0]!==t.clusterId){var i=o.indexOf(t.clusterId);if(i>=0&&o.splice(i,1),o&&o.length){e=!0;var a=c[t.clusterId],s=a.nodes.indexOf(t);a.nodes.splice(s,1);var u=Math.floor(Math.random()*o.length),l=c[o[u]];l.nodes.push(t),t.clusterId=l.id}}}),!e)return"break";d++};d<n&&"break"!==y(););Object.keys(c).forEach(function(e){var t=c[e];t.nodes&&t.nodes.length||delete c[e]});var v=[],g={};l.forEach(function(e){var t=e.source,n=e.target,o=e[r]||1,i=f[t].node.clusterId,a=f[n].node.clusterId,s="".concat(i,"---").concat(a);if(g[s])g[s].weight+=o,g[s].count++;else{var u={source:i,target:a,weight:o,count:1};g[s]=u,v.push(u)}});var m=[];return Object.keys(c).forEach(function(e){m.push(c[e])}),{clusters:m,clusterEdges:v}};t.default=a},2006:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(31834),o=u(r(57238)),i=u(r(43532)),a=r(12594),s=r(2821);function u(e){return e&&e.__esModule?e:{default:e}}var l=function(e,t,r,n){for(var o=t.length,i=2*n,a=0,s=0;s<o;s++)for(var u=e[s].clusterId,l=0;l<o;l++){if(u===e[l].clusterId)a+=(t[s][l]||0)-(r[s]||0)*(r[l]||0)/i}return a*=1/i},c=function(e,t){void 0===e&&(e=[]);for(var r=e.length,n=new i.default([]),o=0;o<r;o++)n=n.add(new i.default(t[o]));var a=n.avg(r);a.normalize();var s=0;for(o=0;o<r;o++){s+=(l=new i.default(t[o])).squareEuclideanDistance(a)}var u=[];e.forEach(function(){u.push([])});for(o=0;o<r;o++){var l=new i.default(t[o]);e[o].clusterInertial=0;for(var c=0;c<r;c++)if(o!==c){var f=new i.default(t[c]);u[o][c]=l.squareEuclideanDistance(f),e[o].clusterInertial+=u[o][c]}else u[o][c]=0}var h=0,p=2*r*s;for(o=0;o<r;o++){var d=e[o].clusterId;for(c=0;c<r;c++){var y=e[c].clusterId;if(o!==c&&d===y)h+=e[o].clusterInertial*e[c].clusterInertial/Math.pow(p,2)-u[o][c]/p}}return Number(h.toFixed(4))},f=function(e,t,r,i,u,f,h,p,d){void 0===t&&(t=!1),void 0===r&&(r="weight"),void 0===i&&(i=1e-4),void 0===u&&(u=!1),void 0===f&&(f=void 0),void 0===h&&(h=[]),void 0===p&&(p=["id"]),void 0===d&&(d=1);var y=e.nodes,v=void 0===y?[]:y,g=e.edges,m=void 0===g?[]:g,b=[];if(u){v.forEach(function(e,t){e.properties=e.properties||{},e.originIndex=t});var w=[];v.every(function(e){return e.hasOwnProperty("nodeType")})&&(w=Array.from(new Set(v.map(function(e){return e.nodeType}))),v.forEach(function(e){e.properties.nodeType=w.findIndex(function(t){return t===e.nodeType})}));var _=(0,a.getAllProperties)(v,f);b=(0,s.oneHot)(_,h,p)}var x=1,S={},O={};v.forEach(function(e,t){var r=String(x++);e.clusterId=r,S[r]={id:r,nodes:[e]},O[e.id]={node:e,idx:t}});var P=(0,o.default)(e,t),E=[],k={},M=0;P.forEach(function(e,t){var r=0,n=v[t].id;k[n]={},e.forEach(function(e,t){if(e){r+=e;var o=v[t].id;k[n][o]=e,M+=e}}),E.push(r)}),M/=2;for(var C=1/0,j=1/0,T=0,A=[],I={};;){C=u&&v.every(function(e){return e.hasOwnProperty("properties")})?l(v,P,E,M)+c(v,b)*d:l(v,P,E,M),0===T&&(j=C,A=v,I=S);var R=C>0&&C>j&&C-j<i;if(C>j&&(A=v.map(function(e){return{node:e,clusterId:e.clusterId}}),I=(0,n.clone)(S),j=C),R||T>100)break;T++,Object.keys(S).forEach(function(e){var t=0;m.forEach(function(n){var o=n.source,i=n.target,a=O[o].node.clusterId,s=O[i].node.clusterId;(a===e&&s!==e||s===e&&a!==e)&&(t+=n[r]||1)}),S[e].sumTot=t}),v.forEach(function(e,t){var n,o=S[e.clusterId],i=0,a=E[t]/(2*M),s=0,l=o.nodes;l.forEach(function(e){var r=O[e.id].idx;s+=P[t][r]||0});var f=s-o.sumTot*a,h=l.filter(function(t){return t.id!==e.id}),p=[];h.forEach(function(e,t){p[t]=b[e.originIndex]});var y=c(h,b)*d,v=k[e.id];if(Object.keys(v).forEach(function(r){var o=O[r].node.clusterId;if(o!==e.clusterId){var s=S[o],l=s.nodes;if(l&&l.length){var h=0;l.forEach(function(e){var r=O[e.id].idx;h+=P[t][r]||0});var p=h-s.sumTot*a,v=l.concat([e]),g=[];v.forEach(function(e,t){g[t]=b[e.originIndex]});var m=c(v,b)*d,w=p-f;u&&(w=p+m-(f+y)),w>i&&(i=w,n=s)}}}),i>0){n.nodes.push(e);var g=e.clusterId;e.clusterId=n.id;var w=o.nodes.indexOf(e);o.nodes.splice(w,1);var _=0,x=0;m.forEach(function(e){var t=e.source,o=e.target,i=O[t].node.clusterId,a=O[o].node.clusterId;(i===n.id&&a!==n.id||a===n.id&&i!==n.id)&&(_+=e[r]||1),(i===g&&a!==g||a===g&&i!==g)&&(x+=e[r]||1)}),n.sumTot=_,o.sumTot=x}})}var L={},N=0;Object.keys(I).forEach(function(e){var t=I[e];if(t.nodes&&t.nodes.length){var r=String(N+1);r!==e&&(t.id=r,t.nodes=t.nodes.map(function(e){return{id:e.id,clusterId:r}}),I[r]=t,L[e]=r,delete I[e],N++)}else delete I[e]}),A.forEach(function(e){var t=e.node,r=e.clusterId;t&&(t.clusterId=r,t.clusterId&&L[t.clusterId]&&(t.clusterId=L[t.clusterId]))});var D=[],B={};m.forEach(function(e){var t=e.source,n=e.target,o=e[r]||1,i=O[t].node.clusterId,a=O[n].node.clusterId;if(i&&a){var s="".concat(i,"---").concat(a);if(B[s])B[s].weight+=o,B[s].count++;else{var u={source:i,target:a,weight:o,count:1};B[s]=u,D.push(u)}}});var F=[];return Object.keys(I).forEach(function(e){F.push(I[e])}),{clusters:F,clusterEdges:D}};t.default=f},60015:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(r(89511)),o=a(r(67605)),i=r(28182);function a(e){return e&&e.__esModule?e:{default:e}}var s=function(e,t){var r=[],n=e.nodes,a=void 0===n?[]:n,s=e.edges,u=void 0===s?[]:s;if(0===a.length)return r;var l=a[0],c=new Set;c.add(l);var f=new o.default(function(e,r){return t?e.weight-r.weight:0});for((0,i.getEdgesByNodeId)(l.id,u).forEach(function(e){f.insert(e)});!f.isEmpty();){var h=f.delMin(),p=h.source,d=h.target;c.has(p)&&c.has(d)||(r.push(h),c.has(p)||(c.add(p),(0,i.getEdgesByNodeId)(p,u).forEach(function(e){f.insert(e)})),c.has(d)||(c.add(d),(0,i.getEdgesByNodeId)(d,u).forEach(function(e){f.insert(e)})))}return r},u=function(e,t){var r=[],o=e.nodes,i=void 0===o?[]:o,a=e.edges,s=void 0===a?[]:a;if(0===i.length)return r;var u=s.map(function(e){return e});t&&u.sort(function(e,t){return e.weight-t.weight});for(var l=new n.default(i.map(function(e){return e.id}));u.length>0;){var c=u.shift(),f=c.source,h=c.target;l.connected(f,h)||(r.push(c),l.union(f,h))}return r},l=function(e,t,r){return r?{prim:s,kruskal:u}[r](e,t):u(e,t)};t.default=l},36649:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,o=r(31834),i=r(12594),a=r(2821),s=(n=r(16075))&&n.__esModule?n:{default:n};var u=function(e,t,r,n,u){void 0===e&&(e=[]),void 0===r&&(r=void 0),void 0===n&&(n=[]),void 0===u&&(u=[]);var l=(0,o.clone)(e.filter(function(e){return e.id!==t.id})),c=e.findIndex(function(e){return e.id===t.id}),f=(0,i.getAllProperties)(e,r),h=(0,a.oneHot)(f,n,u),p=h[c],d=[];return l.forEach(function(e,r){if(e.id!==t.id){var n=h[r],o=(0,s.default)(n,p);d.push(o),e.cosineSimilarity=o}}),l.sort(function(e,t){return t.cosineSimilarity-e.cosineSimilarity}),{allCosineSimilarity:d,similarNodes:l}};t.default=u},16155:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,o=(n=r(63597))&&n.__esModule?n:{default:n},i=r(28182);var a=function(e,t,r){"number"!=typeof t&&(t=1e-6),"number"!=typeof r&&(r=.85);for(var n,a=1,s=0,u=1e3,l=e.nodes,c=void 0===l?[]:l,f=e.edges,h=void 0===f?[]:f,p=c.length,d={},y={},v=0;v<p;++v)d[m=(S=c[v]).id]=1/p,y[m]=1/p;for(var g=(0,o.default)(e);u>0&&a>t;){for(s=0,v=0;v<p;++v){var m=(S=c[v]).id;if(n=0,0===g[S.id].inDegree)d[m]=0;else{for(var b=(0,i.getNeighbors)(m,h,"source"),w=0;w<b.length;++w){var _=b[w],x=g[_].outDegree;x>0&&(n+=y[_]/x)}d[m]=r*n,s+=d[m]}}for(s=(1-s)/p,a=0,v=0;v<p;++v){var S;n=d[m=(S=c[v]).id]+s,a+=Math.abs(n-y[m]),y[m]=n}u-=1}return y};t.default=a},67605:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e,t){return e-t},n=function(){function e(e){void 0===e&&(e=r),this.compareFn=e,this.list=[]}return e.prototype.getLeft=function(e){return 2*e+1},e.prototype.getRight=function(e){return 2*e+2},e.prototype.getParent=function(e){return 0===e?null:Math.floor((e-1)/2)},e.prototype.isEmpty=function(){return this.list.length<=0},e.prototype.top=function(){return this.isEmpty()?void 0:this.list[0]},e.prototype.delMin=function(){var e=this.top(),t=this.list.pop();return this.list.length>0&&(this.list[0]=t,this.moveDown(0)),e},e.prototype.insert=function(e){if(null!==e){this.list.push(e);var t=this.list.length-1;return this.moveUp(t),!0}return!1},e.prototype.moveUp=function(e){for(var t=this.getParent(e);e&&e>0&&this.compareFn(this.list[t],this.list[e])>0;){var r=this.list[t];this.list[t]=this.list[e],this.list[e]=r,e=t,t=this.getParent(e)}},e.prototype.moveDown=function(e){var t,r=e,n=this.getLeft(e),o=this.getRight(e),i=this.list.length;null!==n&&n<i&&this.compareFn(this.list[r],this.list[n])>0?r=n:null!==o&&o<i&&this.compareFn(this.list[r],this.list[o])>0&&(r=o),e!==r&&(t=[this.list[r],this.list[e]],this.list[e]=t[0],this.list[r]=t[1],this.moveDown(r))},e}();t.default=n},90800:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.LinkedListNode=void 0;var r=function(e,t){return e===t},n=function(){function e(e,t){void 0===t&&(t=null),this.value=e,this.next=t}return e.prototype.toString=function(e){return e?e(this.value):"".concat(this.value)},e}();t.LinkedListNode=n;var o=function(){function e(e){void 0===e&&(e=r),this.head=null,this.tail=null,this.compare=e}return e.prototype.prepend=function(e){var t=new n(e,this.head);return this.head=t,this.tail||(this.tail=t),this},e.prototype.append=function(e){var t=new n(e);return this.head?(this.tail.next=t,this.tail=t,this):(this.head=t,this.tail=t,this)},e.prototype.delete=function(e){if(!this.head)return null;for(var t=null;this.head&&this.compare(this.head.value,e);)t=this.head,this.head=this.head.next;var r=this.head;if(null!==r)for(;r.next;)this.compare(r.next.value,e)?(t=r.next,r.next=r.next.next):r=r.next;return this.compare(this.tail.value,e)&&(this.tail=r),t},e.prototype.find=function(e){var t=e.value,r=void 0===t?void 0:t,n=e.callback,o=void 0===n?void 0:n;if(!this.head)return null;for(var i=this.head;i;){if(o&&o(i.value))return i;if(void 0!==r&&this.compare(i.value,r))return i;i=i.next}return null},e.prototype.deleteTail=function(){var e=this.tail;if(this.head===this.tail)return this.head=null,this.tail=null,e;for(var t=this.head;t.next;)t.next.next?t=t.next:t.next=null;return this.tail=t,e},e.prototype.deleteHead=function(){if(!this.head)return null;var e=this.head;return this.head.next?this.head=this.head.next:(this.head=null,this.tail=null),e},e.prototype.fromArray=function(e){var t=this;return e.forEach(function(e){return t.append(e)}),this},e.prototype.toArray=function(){for(var e=[],t=this.head;t;)e.push(t),t=t.next;return e},e.prototype.reverse=function(){for(var e=this.head,t=null,r=null;e;)r=e.next,e.next=t,t=e,e=r;this.tail=this.head,this.head=t},e.prototype.toString=function(e){return void 0===e&&(e=void 0),this.toArray().map(function(t){return t.toString(e)}).toString()},e}();t.default=o},93247:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,o=(n=r(90800))&&n.__esModule?n:{default:n};var i=function(){function e(){this.linkedList=new o.default}return e.prototype.isEmpty=function(){return!this.linkedList.head},e.prototype.peek=function(){return this.linkedList.head?this.linkedList.head.value:null},e.prototype.enqueue=function(e){this.linkedList.append(e)},e.prototype.dequeue=function(){var e=this.linkedList.deleteHead();return e?e.value:null},e.prototype.toString=function(e){return this.linkedList.toString(e)},e}();t.default=i},51602:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,o=(n=r(90800))&&n.__esModule?n:{default:n};var i=function(){function e(e){void 0===e&&(e=10),this.linkedList=new o.default,this.maxStep=e}return Object.defineProperty(e.prototype,"length",{get:function(){return this.linkedList.toArray().length},enumerable:!1,configurable:!0}),e.prototype.isEmpty=function(){return!this.linkedList.head},e.prototype.isMaxStack=function(){return this.toArray().length>=this.maxStep},e.prototype.peek=function(){return this.isEmpty()?null:this.linkedList.head.value},e.prototype.push=function(e){this.linkedList.prepend(e),this.length>this.maxStep&&this.linkedList.deleteTail()},e.prototype.pop=function(){var e=this.linkedList.deleteHead();return e?e.value:null},e.prototype.toArray=function(){return this.linkedList.toArray().map(function(e){return e.value})},e.prototype.clear=function(){for(;!this.isEmpty();)this.pop()},e}();t.default=i},89511:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(){function e(e){this.count=e.length,this.parent={};for(var t=0,r=e;t<r.length;t++){var n=r[t];this.parent[n]=n}}return e.prototype.find=function(e){for(;this.parent[e]!==e;)e=this.parent[e];return e},e.prototype.union=function(e,t){var r=this.find(e),n=this.find(t);r!==n&&(r<n?(this.parent[t]!==t&&this.union(this.parent[t],e),this.parent[t]=this.parent[e]):(this.parent[e]!==e&&this.union(this.parent[e],t),this.parent[e]=this.parent[t]))},e.prototype.connected=function(e,t){return this.find(e)===this.find(t)},e}();t.default=r},49332:function(e,t){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.DistanceType=void 0,t.DistanceType=r,function(e){e.EuclideanDistance="euclideanDistance"}(r||(t.DistanceType=r={}))},28182:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.uniqueId=t.getOutEdgesNodeId=t.getNeighbors=t.getEdgesByNodeId=void 0;t.getNeighbors=function(e,t,r){void 0===t&&(t=[]);var n=t.filter(function(t){return t.source===e||t.target===e});if("target"===r)return n.filter(function(t){return t.source===e}).map(function(e){return e.target});if("source"===r)return n.filter(function(t){return t.target===e}).map(function(e){return e.source});return n.map(function(t){return t.source===e?t.target:t.source})};t.getOutEdgesNodeId=function(e,t){return t.filter(function(t){return t.source===e})};t.getEdgesByNodeId=function(e,t){return t.filter(function(t){return t.source===e||t.target===e})};t.uniqueId=function(e){void 0===e&&(e=0);var t="".concat(Math.random()).split(".")[1].substr(0,5),r="".concat(Math.random()).split(".")[1].substr(0,5);return"".concat(e,"-").concat(t).concat(r)}},2821:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.oneHot=t.getDistance=t.getAllKeyValueMap=t.default=void 0;var n,o=r(31834),i=r(49332),a=(n=r(43532))&&n.__esModule?n:{default:n};var s=function(e,t,r){var n=[];(null===t||void 0===t?void 0:t.length)?n=t:(e.forEach(function(e){n=n.concat(Object.keys(e))}),n=(0,o.uniq)(n));var i={};return n.forEach(function(t){var n=[];e.forEach(function(e){void 0!==e[t]&&""!==e[t]&&n.push(e[t])}),n.length&&!(null===r||void 0===r?void 0:r.includes(t))&&(i[t]=(0,o.uniq)(n))}),i};t.getAllKeyValueMap=s;var u=function(e,t,r){var n=s(e,t,r),o=[];if(!Object.keys(n).length)return o;var i=Object.values(n).every(function(e){return e.every(function(e){return"number"==typeof e})});return e.forEach(function(e,t){var r=[];Object.keys(n).forEach(function(t){var o=e[t],a=n[t],s=a.findIndex(function(e){return o===e}),u=[];if(i)u.push(o);else for(var l=0;l<a.length;l++)l===s?u.push(1):u.push(0);r=r.concat(u)}),o[t]=r}),o};t.oneHot=u;var l=function(e,t,r,n){void 0===r&&(r=i.DistanceType.EuclideanDistance);var o=0;switch(r){case i.DistanceType.EuclideanDistance:o=new a.default(e).euclideanDistance(new a.default(t))}return o};t.getDistance=l;var c={getAllKeyValueMap:s,oneHot:u,getDistance:l};t.default=c},12594:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPropertyWeight=t.getAllSortProperties=t.getAllProperties=t.default=void 0;var n=r(79023),o=function(e,t){void 0===e&&(e=[]),void 0===t&&(t=100);var r={};e.forEach(function(e){e.properties&&Object.keys(e.properties).forEach(function(t){"id"===t||!"".concat(e.properties[t]).match(n.secondReg)&&!"".concat(e.properties[t]).match(n.dateReg)&&isNaN(Number(e.properties[t]))?r.hasOwnProperty(t)&&delete r[t]:r.hasOwnProperty(t)?r[t]+=1:r[t]=1})});var o=Object.keys(r).sort(function(e,t){return r[t]-r[e]});return o.length<t?o:o.slice(0,t)};t.getAllSortProperties=o;var i=function(e,t){return t.map(function(t){return e.hasOwnProperty(t)?e[t]:0})},a=function(e){for(var t=o(e),r=[],n=0;n<e.length;n++)r[n]=i(e[n].properties,t);return r};t.getPropertyWeight=a;var s=function(e,t){void 0===t&&(t=void 0);var r=[];return e.forEach(function(e){void 0===t&&r.push(e),void 0!==e[t]&&r.push(e[t])}),r};t.getAllProperties=s;var u={getAllSortProperties:o,getPropertyWeight:a,getAllProperties:s};t.default=u},43532:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(31834),o=function(){function e(e){this.arr=e}return e.prototype.getArr=function(){return this.arr||[]},e.prototype.add=function(t){var r,n=t.arr;if(!(null===(r=this.arr)||void 0===r?void 0:r.length))return new e(n);if(!(null===n||void 0===n?void 0:n.length))return new e(this.arr);if(this.arr.length===n.length){var o=[];for(var i in this.arr)o[i]=this.arr[i]+n[i];return new e(o)}},e.prototype.subtract=function(t){var r,n=t.arr;if(!(null===(r=this.arr)||void 0===r?void 0:r.length))return new e(n);if(!(null===n||void 0===n?void 0:n.length))return new e(this.arr);if(this.arr.length===n.length){var o=[];for(var i in this.arr)o[i]=this.arr[i]-n[i];return new e(o)}},e.prototype.avg=function(t){var r=[];if(0!==t)for(var n in this.arr)r[n]=this.arr[n]/t;return new e(r)},e.prototype.negate=function(){var t=[];for(var r in this.arr)t[r]=-this.arr[r];return new e(t)},e.prototype.squareEuclideanDistance=function(e){var t,r=e.arr;if(!(null===(t=this.arr)||void 0===t?void 0:t.length)||!(null===r||void 0===r?void 0:r.length))return 0;if(this.arr.length===r.length){var n=0;for(var o in this.arr)n+=Math.pow(this.arr[o]-e.arr[o],2);return n}},e.prototype.euclideanDistance=function(e){var t,r=e.arr;if(!(null===(t=this.arr)||void 0===t?void 0:t.length)||!(null===r||void 0===r?void 0:r.length))return 0;if(this.arr.length===r.length){var n=0;for(var o in this.arr)n+=Math.pow(this.arr[o]-e.arr[o],2);return Math.sqrt(n)}console.error("The two vectors are unequal in length.")},e.prototype.normalize=function(){var t=[],r=(0,n.clone)(this.arr);r.sort(function(e,t){return e-t});var o=r[r.length-1],i=r[0];for(var a in this.arr)t[a]=(this.arr[a]-i)/(o-i);return new e(t)},e.prototype.norm2=function(){var e;if(!(null===(e=this.arr)||void 0===e?void 0:e.length))return 0;var t=0;for(var r in this.arr)t+=Math.pow(this.arr[r],2);return Math.sqrt(t)},e.prototype.dot=function(e){var t,r=e.arr;if(!(null===(t=this.arr)||void 0===t?void 0:t.length)||!(null===r||void 0===r?void 0:r.length))return 0;if(this.arr.length===r.length){var n=0;for(var o in this.arr)n+=this.arr[o]*e.arr[o];return n}console.error("The two vectors are unequal in length.")},e.prototype.equal=function(e){var t,r=e.arr;if((null===(t=this.arr)||void 0===t?void 0:t.length)!==(null===r||void 0===r?void 0:r.length))return!1;for(var n in this.arr)if(this.arr[n]!==r[n])return!1;return!0},e}();t.default=o},36490:function(e,t,r){"use strict";function n(e){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"GADDI",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(t,"breadthFirstSearch",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"connectedComponent",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"depthFirstSearch",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"detectCycle",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"dijkstra",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(t,"findAllPath",{enumerable:!0,get:function(){return f.findAllPath}}),Object.defineProperty(t,"findShortestPath",{enumerable:!0,get:function(){return f.findShortestPath}}),Object.defineProperty(t,"floydWarshall",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(t,"getAdjMatrix",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"getDegree",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"getInDegree",{enumerable:!0,get:function(){return s.getInDegree}}),Object.defineProperty(t,"getNeighbors",{enumerable:!0,get:function(){return m.getNeighbors}}),Object.defineProperty(t,"getOutDegree",{enumerable:!0,get:function(){return s.getOutDegree}}),Object.defineProperty(t,"labelPropagation",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(t,"louvain",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(t,"minimumSpanningTree",{enumerable:!0,get:function(){return y.default}}),Object.defineProperty(t,"pageRank",{enumerable:!0,get:function(){return v.default}});var o=w(r(57238)),i=w(r(1264)),a=w(r(16616)),s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var r=b(t);if(r&&r.has(e))return r.get(e);var o={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=i?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(o,a,s):o[a]=e[a]}o.default=e,r&&r.set(e,o);return o}(r(63597)),u=w(r(12465)),l=w(r(81940)),c=w(r(47618)),f=r(56),h=w(r(51613)),p=w(r(73760)),d=w(r(2006)),y=w(r(60015)),v=w(r(16155)),g=w(r(29317)),m=r(28182);function b(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(b=function(e){return e?r:t})(e)}function w(e){return e&&e.__esModule?e:{default:e}}},18983:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MESSAGE=t.ALGORITHM=void 0;t.ALGORITHM={pageRank:"pageRank",breadthFirstSearch:"breadthFirstSearch",connectedComponent:"connectedComponent",depthFirstSearch:"depthFirstSearch",detectCycle:"detectCycle",detectDirectedCycle:"detectDirectedCycle",detectAllCycles:"detectAllCycles",detectAllDirectedCycle:"detectAllDirectedCycle",detectAllUndirectedCycle:"detectAllUndirectedCycle",dijkstra:"dijkstra",findAllPath:"findAllPath",findShortestPath:"findShortestPath",floydWarshall:"floydWarshall",getAdjMatrix:"getAdjMatrix",getDegree:"getDegree",getInDegree:"getInDegree",getNeighbors:"getNeighbors",getOutDegree:"getOutDegree",labelPropagation:"labelPropagation",louvain:"louvain",GADDI:"GADDI",minimumSpanningTree:"minimumSpanningTree",SUCCESS:"SUCCESS",FAILURE:"FAILURE"};t.MESSAGE={SUCCESS:"SUCCESS",FAILURE:"FAILURE"}},47414:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,o=r(18983),i=(n=r(17477))&&n.__esModule?n:{default:n};var a=function(e){return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return new Promise(function(r,n){var a=new i.default;a.postMessage({_algorithmType:e,data:t}),a.onmessage=function(e){var t=e.data,i=t.data,s=t._algorithmType;o.MESSAGE.SUCCESS===s?r(i):n(),a.terminate()}})}};t.default=a},54613:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pageRankAsync=t.minimumSpanningTreeAsync=t.louvainAsync=t.labelPropagationAsync=t.getOutDegreeAsync=t.getNeighborsAsync=t.getInDegreeAsync=t.getDegreeAsync=t.getAdjMatrixAsync=t.floydWarshallAsync=t.findShortestPathAsync=t.findAllPathAsync=t.dijkstraAsync=t.detectCycleAsync=t.detectAllUndirectedCycleAsync=t.detectAllDirectedCycleAsync=t.detectAllCyclesAsync=t.connectedComponentAsync=t.GADDIAsync=void 0;var n,o=(n=r(47414))&&n.__esModule?n:{default:n},i=r(18983);t.getAdjMatrixAsync=function(e,t){return(0,o.default)(i.ALGORITHM.getAdjMatrix).apply(void 0,[e,t])};t.connectedComponentAsync=function(e,t){return(0,o.default)(i.ALGORITHM.connectedComponent).apply(void 0,[e,t])};t.getDegreeAsync=function(e){return(0,o.default)(i.ALGORITHM.getDegree)(e)};t.getInDegreeAsync=function(e,t){return(0,o.default)(i.ALGORITHM.getInDegree)(e,t)};t.getOutDegreeAsync=function(e,t){return(0,o.default)(i.ALGORITHM.getOutDegree)(e,t)};t.detectCycleAsync=function(e){return(0,o.default)(i.ALGORITHM.detectCycle)(e)};t.detectAllCyclesAsync=function(e){return(0,o.default)(i.ALGORITHM.detectAllCycles)(e)};t.detectAllDirectedCycleAsync=function(e){return(0,o.default)(i.ALGORITHM.detectAllDirectedCycle)(e)};t.detectAllUndirectedCycleAsync=function(e){return(0,o.default)(i.ALGORITHM.detectAllUndirectedCycle)(e)};t.dijkstraAsync=function(e,t,r,n){return(0,o.default)(i.ALGORITHM.dijkstra).apply(void 0,[e,t,r,n])};t.findAllPathAsync=function(e,t,r,n){return(0,o.default)(i.ALGORITHM.findAllPath).apply(void 0,[e,t,r,n])};t.findShortestPathAsync=function(e,t,r,n,a){return(0,o.default)(i.ALGORITHM.findShortestPath).apply(void 0,[e,t,r,n,a])};t.floydWarshallAsync=function(e,t){return(0,o.default)(i.ALGORITHM.floydWarshall).apply(void 0,[e,t])};t.labelPropagationAsync=function(e,t,r,n){return void 0===n&&(n=1e3),(0,o.default)(i.ALGORITHM.labelPropagation)(e,t,r,n)};t.louvainAsync=function(e,t,r,n){return(0,o.default)(i.ALGORITHM.louvain)(e,t,r,n)};t.minimumSpanningTreeAsync=function(e,t,r){return(0,o.default)(i.ALGORITHM.minimumSpanningTree).apply(void 0,[e,t,r])};t.pageRankAsync=function(e,t,r){return(0,o.default)(i.ALGORITHM.pageRank).apply(void 0,[e,t,r])};t.getNeighborsAsync=function(e,t,r){return(0,o.default)(i.ALGORITHM.getNeighbors).apply(void 0,[e,t,r])};t.GADDIAsync=function(e,t,r,n,a,s,u){return void 0===r&&(r=!1),void 0===s&&(s="cluster"),void 0===u&&(u="cluster"),(0,o.default)(i.ALGORITHM.GADDI).apply(void 0,[e,t,r,n,a,s,u])}},17477:function(e,t,r){"use strict";function n(e){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var r=a(t);if(r&&r.has(e))return r.get(e);var o={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var u=i?Object.getOwnPropertyDescriptor(e,s):null;u&&(u.get||u.set)?Object.defineProperty(o,s,u):o[s]=e[s]}o.default=e,r&&r.set(e,o);return o}(r(36490)),i=r(18983);function a(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(a=function(e){return e?r:t})(e)}var s="undefined"!=typeof self?self:{};s.onmessage=function(e){var t=e.data,r=t._algorithmType,n=t.data;if(r)if("function"!=typeof o[r])s.postMessage({_algorithmType:i.MESSAGE.FAILURE});else{var a=o[r].apply(o,n);s.postMessage({_algorithmType:i.MESSAGE.SUCCESS,data:a})}};t.default=null},60053:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r){if(e){if("function"==typeof e.addEventListener)return e.addEventListener(t,r,!1),{remove:function(){e.removeEventListener(t,r,!1)}};if("function"==typeof e.attachEvent)return e.attachEvent("on"+t,r),{remove:function(){e.detachEvent("on"+t,r)}}}}},72797:function(e,t){"use strict";var r,n,o,i;Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){r||(r=document.createElement("table"),n=document.createElement("tr"),o=/^\s*<(\w+|!)[^>]*>/,i={tr:document.createElement("tbody"),tbody:r,thead:r,tfoot:r,td:n,th:n,"*":document.createElement("div")});var t=o.test(e)&&RegExp.$1;t&&t in i||(t="*");var a=i[t];e="string"==typeof e?e.replace(/(^\s*)|(\s*$)/g,""):e,a.innerHTML=""+e;var s=a.childNodes[0];return s&&a.contains(s)&&a.removeChild(s),s}},1662:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(41599);t.default=function(e,t){var r=(0,n.default)(e,"height",t);return"auto"===r&&(r=e.offsetHeight),parseFloat(r)}},59297:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(41599),o=r(1662);t.default=function(e,t){var r=(0,o.default)(e,t),i=parseFloat((0,n.default)(e,"borderTopWidth"))||0,a=parseFloat((0,n.default)(e,"paddingTop"))||0,s=parseFloat((0,n.default)(e,"paddingBottom"))||0;return r+i+(parseFloat((0,n.default)(e,"borderBottomWidth"))||0)+a+s+(parseFloat((0,n.default)(e,"marginTop"))||0)+(parseFloat((0,n.default)(e,"marginBottom"))||0)}},42836:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(41599),o=r(22471);t.default=function(e,t){var r=(0,o.default)(e,t),i=parseFloat((0,n.default)(e,"borderLeftWidth"))||0,a=parseFloat((0,n.default)(e,"paddingLeft"))||0,s=parseFloat((0,n.default)(e,"paddingRight"))||0,u=parseFloat((0,n.default)(e,"borderRightWidth"))||0,l=parseFloat((0,n.default)(e,"marginRight"))||0;return r+i+u+a+s+(parseFloat((0,n.default)(e,"marginLeft"))||0)+l}},16875:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return window.devicePixelRatio?window.devicePixelRatio:2}},41599:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r){var n;try{n=window.getComputedStyle?window.getComputedStyle(e,null)[t]:e.style[t]}catch(e){}finally{n=void 0===n?r:n}return n}},22471:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(41599);t.default=function(e,t){var r=(0,n.default)(e,"width",t);return"auto"===r&&(r=e.offsetWidth),parseFloat(r)}},39269:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.modifyCSS=t.getWidth=t.getStyle=t.getRatio=t.getOuterWidth=t.getOuterHeight=t.getHeight=t.createDom=t.addEventListener=void 0;var n=r(60053);Object.defineProperty(t,"addEventListener",{enumerable:!0,get:function(){return n.default}});var o=r(72797);Object.defineProperty(t,"createDom",{enumerable:!0,get:function(){return o.default}});var i=r(1662);Object.defineProperty(t,"getHeight",{enumerable:!0,get:function(){return i.default}});var a=r(59297);Object.defineProperty(t,"getOuterHeight",{enumerable:!0,get:function(){return a.default}});var s=r(42836);Object.defineProperty(t,"getOuterWidth",{enumerable:!0,get:function(){return s.default}});var u=r(16875);Object.defineProperty(t,"getRatio",{enumerable:!0,get:function(){return u.default}});var l=r(41599);Object.defineProperty(t,"getStyle",{enumerable:!0,get:function(){return l.default}});var c=r(22471);Object.defineProperty(t,"getWidth",{enumerable:!0,get:function(){return c.default}});var f=r(80777);Object.defineProperty(t,"modifyCSS",{enumerable:!0,get:function(){return f.default}})},80777:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(e)for(var r in t)t.hasOwnProperty(r)&&(e.style[r]=t[r]);return e}},73118:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){this._events={}}return e.prototype.on=function(e,t,r){return this._events[e]||(this._events[e]=[]),this._events[e].push({callback:t,once:!!r}),this},e.prototype.once=function(e,t){return this.on(e,t,!0)},e.prototype.emit=function(e){for(var t=this,r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var o=this._events[e]||[],i=this._events["*"]||[],a=function(n){for(var o=n.length,i=0;i<o;i++)if(n[i]){var a=n[i],s=a.callback;a.once&&(n.splice(i,1),0===n.length&&delete t._events[e],o--,i--),s.apply(t,r)}};a(o),a(i)},e.prototype.off=function(e,t){if(e)if(t){for(var r=this._events[e]||[],n=r.length,o=0;o<n;o++)r[o].callback===t&&(r.splice(o,1),n--,o--);0===r.length&&delete this._events[e]}else delete this._events[e];else this._events={};return this},e.prototype.getEvents=function(){return this._events},e}();t.default=r},40647:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(97582),o=r(73118),i=r(7693),a=function(e){function t(t){var r=e.call(this)||this;r.destroyed=!1;var n=r.getDefaultCfg();return r.cfg=i.mix(n,t),r}return n.__extends(t,e),t.prototype.getDefaultCfg=function(){return{}},t.prototype.get=function(e){return this.cfg[e]},t.prototype.set=function(e,t){this.cfg[e]=t},t.prototype.destroy=function(){this.cfg={destroyed:!0},this.off(),this.destroyed=!0},t}(o.default);t.default=a},15741:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(97582),o=r(81758),i=r(28377),a=r(7693),s=r(49812),u=r(9246),l=o.detect(),c=l&&"firefox"===l.name,f=function(e){function t(t){var r=e.call(this,t)||this;return r.initContainer(),r.initDom(),r.initEvents(),r.initTimeline(),r}return n.__extends(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return t.cursor="default",t.supportCSSTransform=!1,t},t.prototype.initContainer=function(){var e=this.get("container");a.isString(e)&&(e=document.getElementById(e),this.set("container",e))},t.prototype.initDom=function(){var e=this.createDom();this.set("el",e),this.get("container").appendChild(e),this.setDOMSize(this.get("width"),this.get("height"))},t.prototype.initEvents=function(){var e=new u.default({canvas:this});e.init(),this.set("eventController",e)},t.prototype.initTimeline=function(){var e=new s.default(this);this.set("timeline",e)},t.prototype.setDOMSize=function(e,t){var r=this.get("el");a.isBrowser&&(r.style.width=e+"px",r.style.height=t+"px")},t.prototype.changeSize=function(e,t){this.setDOMSize(e,t),this.set("width",e),this.set("height",t),this.onCanvasChange("changeSize")},t.prototype.getRenderer=function(){return this.get("renderer")},t.prototype.getCursor=function(){return this.get("cursor")},t.prototype.setCursor=function(e){this.set("cursor",e);var t=this.get("el");a.isBrowser&&t&&(t.style.cursor=e)},t.prototype.getPointByEvent=function(e){if(this.get("supportCSSTransform")){if(c&&!a.isNil(e.layerX)&&e.layerX!==e.offsetX)return{x:e.layerX,y:e.layerY};if(!a.isNil(e.offsetX))return{x:e.offsetX,y:e.offsetY}}var t=this.getClientByEvent(e),r=t.x,n=t.y;return this.getPointByClient(r,n)},t.prototype.getClientByEvent=function(e){var t=e;return e.touches&&(t="touchend"===e.type?e.changedTouches[0]:e.touches[0]),{x:t.clientX,y:t.clientY}},t.prototype.getPointByClient=function(e,t){var r=this.get("el").getBoundingClientRect();return{x:e-r.left,y:t-r.top}},t.prototype.getClientByPoint=function(e,t){var r=this.get("el").getBoundingClientRect();return{x:e+r.left,y:t+r.top}},t.prototype.draw=function(){},t.prototype.removeDom=function(){var e=this.get("el");e.parentNode.removeChild(e)},t.prototype.clearEvents=function(){this.get("eventController").destroy()},t.prototype.isCanvas=function(){return!0},t.prototype.getParent=function(){return null},t.prototype.destroy=function(){var t=this.get("timeline");this.get("destroyed")||(this.clear(),t&&t.stop(),this.clearEvents(),this.removeDom(),e.prototype.destroy.call(this))},t}(i.default);t.default=f},28377:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(97582),o=r(87822),i=r(7693),a={},s="_INDEX";var u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.isCanvas=function(){return!1},t.prototype.getBBox=function(){var e=1/0,t=-1/0,r=1/0,n=-1/0,o=this.getChildren().filter(function(e){return e.get("visible")&&(!e.isGroup()||e.isGroup()&&e.getChildren().length>0)});return o.length>0?i.each(o,function(o){var i=o.getBBox(),a=i.minX,s=i.maxX,u=i.minY,l=i.maxY;a<e&&(e=a),s>t&&(t=s),u<r&&(r=u),l>n&&(n=l)}):(e=0,t=0,r=0,n=0),{x:e,y:r,minX:e,minY:r,maxX:t,maxY:n,width:t-e,height:n-r}},t.prototype.getCanvasBBox=function(){var e=1/0,t=-1/0,r=1/0,n=-1/0,o=this.getChildren().filter(function(e){return e.get("visible")&&(!e.isGroup()||e.isGroup()&&e.getChildren().length>0)});return o.length>0?i.each(o,function(o){var i=o.getCanvasBBox(),a=i.minX,s=i.maxX,u=i.minY,l=i.maxY;a<e&&(e=a),s>t&&(t=s),u<r&&(r=u),l>n&&(n=l)}):(e=0,t=0,r=0,n=0),{x:e,y:r,minX:e,minY:r,maxX:t,maxY:n,width:t-e,height:n-r}},t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return t.children=[],t},t.prototype.onAttrChange=function(t,r,n){if(e.prototype.onAttrChange.call(this,t,r,n),"matrix"===t){var o=this.getTotalMatrix();this._applyChildrenMarix(o)}},t.prototype.applyMatrix=function(t){var r=this.getTotalMatrix();e.prototype.applyMatrix.call(this,t);var n=this.getTotalMatrix();n!==r&&this._applyChildrenMarix(n)},t.prototype._applyChildrenMarix=function(e){var t=this.getChildren();i.each(t,function(t){t.applyMatrix(e)})},t.prototype.addShape=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=e[0],n=e[1];i.isObject(r)?n=r:n.type=r;var o=a[n.type];o||(o=i.upperFirst(n.type),a[n.type]=o);var s=new(this.getShapeBase()[o])(n);return this.add(s),s},t.prototype.addGroup=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r,n=e[0],o=e[1];if(i.isFunction(n))r=new n(o||{parent:this});else{var a=n||{};r=new(this.getGroupBase())(a)}return this.add(r),r},t.prototype.getCanvas=function(){return this.isCanvas()?this:this.get("canvas")},t.prototype.getShape=function(e,t,r){if(!i.isAllowCapture(this))return null;var n,o=this.getChildren();if(this.isCanvas())n=this._findShape(o,e,t,r);else{var a=[e,t,1];a=this.invertFromMatrix(a),this.isClipped(a[0],a[1])||(n=this._findShape(o,a[0],a[1],r))}return n},t.prototype._findShape=function(e,t,r,n){for(var o=null,a=e.length-1;a>=0;a--){var s=e[a];if(i.isAllowCapture(s)&&(s.isGroup()?o=s.getShape(t,r,n):s.isHit(t,r)&&(o=s)),o)break}return o},t.prototype.add=function(e){var t=this.getCanvas(),r=this.getChildren(),n=this.get("timeline"),o=e.getParent();o&&function(e,t,r){void 0===r&&(r=!0),r?t.destroy():(t.set("parent",null),t.set("canvas",null)),i.removeFromArray(e.getChildren(),t)}(o,e,!1),e.set("parent",this),t&&function e(t,r){if(t.set("canvas",r),t.isGroup()){var n=t.get("children");n.length&&n.forEach(function(t){e(t,r)})}}(e,t),n&&function e(t,r){if(t.set("timeline",r),t.isGroup()){var n=t.get("children");n.length&&n.forEach(function(t){e(t,r)})}}(e,n),r.push(e),e.onCanvasChange("add"),this._applyElementMatrix(e)},t.prototype._applyElementMatrix=function(e){var t=this.getTotalMatrix();t&&e.applyMatrix(t)},t.prototype.getChildren=function(){return this.get("children")},t.prototype.sort=function(){var e,t=this.getChildren();i.each(t,function(e,t){return e[s]=t,e}),t.sort((e=function(e,t){return e.get("zIndex")-t.get("zIndex")},function(t,r){var n=e(t,r);return 0===n?t[s]-r[s]:n})),this.onCanvasChange("sort")},t.prototype.clear=function(){if(this.set("clearing",!0),!this.destroyed){for(var e=this.getChildren(),t=e.length-1;t>=0;t--)e[t].destroy();this.set("children",[]),this.onCanvasChange("clear"),this.set("clearing",!1)}},t.prototype.destroy=function(){this.get("destroyed")||(this.clear(),e.prototype.destroy.call(this))},t.prototype.getFirst=function(){return this.getChildByIndex(0)},t.prototype.getLast=function(){var e=this.getChildren();return this.getChildByIndex(e.length-1)},t.prototype.getChildByIndex=function(e){return this.getChildren()[e]},t.prototype.getCount=function(){return this.getChildren().length},t.prototype.contain=function(e){return this.getChildren().indexOf(e)>-1},t.prototype.removeChild=function(e,t){void 0===t&&(t=!0),this.contain(e)&&e.remove(t)},t.prototype.findAll=function(e){var t=[],r=this.getChildren();return i.each(r,function(r){e(r)&&t.push(r),r.isGroup()&&(t=t.concat(r.findAll(e)))}),t},t.prototype.find=function(e){var t=null,r=this.getChildren();return i.each(r,function(r){if(e(r)?t=r:r.isGroup()&&(t=r.find(e)),t)return!1}),t},t.prototype.findById=function(e){return this.find(function(t){return t.get("id")===e})},t.prototype.findByClassName=function(e){return this.find(function(t){return t.get("className")===e})},t.prototype.findAllByName=function(e){return this.findAll(function(t){return t.get("name")===e})},t}(o.default);t.default=u},87822:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(97582),o=r(31834),i=r(43708),a=r(7693),s=r(94561),u=r(40647),l=i.ext.transform,c=["zIndex","capture","visible","type"],f=["repeat"];var h=function(e){function t(t){var r=e.call(this,t)||this;r.attrs={};var n=r.getDefaultAttrs();return o.mix(n,t.attrs),r.attrs=n,r.initAttrs(n),r.initAnimate(),r}return n.__extends(t,e),t.prototype.getDefaultCfg=function(){return{visible:!0,capture:!0,zIndex:0}},t.prototype.getDefaultAttrs=function(){return{matrix:this.getDefaultMatrix(),opacity:1}},t.prototype.onCanvasChange=function(e){},t.prototype.initAttrs=function(e){},t.prototype.initAnimate=function(){this.set("animable",!0),this.set("animating",!1)},t.prototype.isGroup=function(){return!1},t.prototype.getParent=function(){return this.get("parent")},t.prototype.getCanvas=function(){return this.get("canvas")},t.prototype.attr=function(){for(var e,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var n=t[0],i=t[1];if(!n)return this.attrs;if(o.isObject(n)){for(var a in n)this.setAttr(a,n[a]);return this.afterAttrsChange(n),this}return 2===t.length?(this.setAttr(n,i),this.afterAttrsChange(((e={})[n]=i,e)),this):this.attrs[n]},t.prototype.isClipped=function(e,t){var r=this.getClip();return r&&!r.isHit(e,t)},t.prototype.setAttr=function(e,t){var r=this.attrs[e];r!==t&&(this.attrs[e]=t,this.onAttrChange(e,t,r))},t.prototype.onAttrChange=function(e,t,r){"matrix"===e&&this.set("totalMatrix",null)},t.prototype.afterAttrsChange=function(e){if(this.cfg.isClipShape){var t=this.cfg.applyTo;t&&t.onCanvasChange("clip")}else this.onCanvasChange("attr")},t.prototype.show=function(){return this.set("visible",!0),this.onCanvasChange("show"),this},t.prototype.hide=function(){return this.set("visible",!1),this.onCanvasChange("hide"),this},t.prototype.setZIndex=function(e){this.set("zIndex",e);var t=this.getParent();return t&&t.sort(),this},t.prototype.toFront=function(){var e=this.getParent();if(e){var t=e.getChildren(),r=(this.get("el"),t.indexOf(this));t.splice(r,1),t.push(this),this.onCanvasChange("zIndex")}},t.prototype.toBack=function(){var e=this.getParent();if(e){var t=e.getChildren(),r=(this.get("el"),t.indexOf(this));t.splice(r,1),t.unshift(this),this.onCanvasChange("zIndex")}},t.prototype.remove=function(e){void 0===e&&(e=!0);var t=this.getParent();t?(a.removeFromArray(t.getChildren(),this),t.get("clearing")||this.onCanvasChange("remove")):this.onCanvasChange("remove"),e&&this.destroy()},t.prototype.resetMatrix=function(){this.attr("matrix",this.getDefaultMatrix()),this.onCanvasChange("matrix")},t.prototype.getMatrix=function(){return this.attr("matrix")},t.prototype.setMatrix=function(e){this.attr("matrix",e),this.onCanvasChange("matrix")},t.prototype.getTotalMatrix=function(){var e=this.cfg.totalMatrix;if(!e){var t=this.attr("matrix"),r=this.cfg.parentMatrix;e=r&&t?s.multiplyMatrix(r,t):t||r,this.set("totalMatrix",e)}return e},t.prototype.applyMatrix=function(e){var t=this.attr("matrix"),r=null;r=e&&t?s.multiplyMatrix(e,t):t||e,this.set("totalMatrix",r),this.set("parentMatrix",e)},t.prototype.getDefaultMatrix=function(){return null},t.prototype.applyToMatrix=function(e){var t=this.attr("matrix");return t?s.multiplyVec2(t,e):e},t.prototype.invertFromMatrix=function(e){var t=this.attr("matrix");if(t){var r=s.invert(t);if(r)return s.multiplyVec2(r,e)}return e},t.prototype.setClip=function(e){var t=this.getCanvas(),r=null;if(e){var n=this.getShapeBase()[o.upperFirst(e.type)];n&&(r=new n({type:e.type,isClipShape:!0,applyTo:this,attrs:e.attrs,canvas:t}))}return this.set("clipShape",r),this.onCanvasChange("clip"),r},t.prototype.getClip=function(){var e=this.cfg.clipShape;return e||null},t.prototype.clone=function(){var e=this,t=this.attrs,r={};o.each(t,function(e,n){o.isArray(t[n])?r[n]=function(e){for(var t=[],r=0;r<e.length;r++)o.isArray(e[r])?t.push([].concat(e[r])):t.push(e[r]);return t}(t[n]):r[n]=t[n]});var n=new(0,this.constructor)({attrs:r});return o.each(c,function(t){n.set(t,e.get(t))}),n},t.prototype.destroy=function(){this.destroyed||(this.attrs={},e.prototype.destroy.call(this))},t.prototype.isAnimatePaused=function(){return this.get("_pause").isPaused},t.prototype.animate=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(this.get("timeline")||this.get("canvas")){this.set("animating",!0);var r=this.get("timeline");r||(r=this.get("canvas").get("timeline"),this.set("timeline",r));var n=this.get("animations")||[];r.timer||r.initTimer();var i,a,s,u,l,c=e[0],h=e[1],p=e[2],d=void 0===p?"easeLinear":p,y=e[3],v=void 0===y?o.noop:y,g=e[4],m=void 0===g?0:g;o.isFunction(c)?(i=c,c={}):o.isObject(c)&&c.onFrame&&(i=c.onFrame,a=c.repeat),o.isObject(h)?(h=(l=h).duration,d=l.easing||"easeLinear",m=l.delay||0,a=l.repeat||a||!1,v=l.callback||o.noop,s=l.pauseCallback||o.noop,u=l.resumeCallback||o.noop):(o.isNumber(v)&&(m=v,v=null),o.isFunction(d)?(v=d,d="easeLinear"):d=d||"easeLinear");var b=function(e,t){var r={},n=t.attr();return o.each(e,function(e,t){-1!==f.indexOf(t)||o.isEqual(n[t],e)||(r[t]=e)}),r}(c,this),w={fromAttrs:function(e,t){var r={},n=t.attrs;for(var o in e)r[o]=n[o];return r}(b,this),toAttrs:b,duration:h,easing:d,repeat:a,callback:v,pauseCallback:s,resumeCallback:u,delay:m,startTime:r.getTime(),id:o.uniqueId(),onFrame:i,pathFormatted:!1};n.length>0?n=function(e,t){if(t.onFrame)return e;var r=t.startTime,n=t.delay,i=t.duration,a=Object.prototype.hasOwnProperty;return o.each(e,function(e){r+n<e.startTime+e.delay+e.duration&&i>e.delay&&o.each(t.toAttrs,function(t,r){a.call(e.toAttrs,r)&&(delete e.toAttrs[r],delete e.fromAttrs[r])})}),e}(n,w):r.addAnimator(this),n.push(w),this.set("animations",n),this.set("_pause",{isPaused:!1})}},t.prototype.stopAnimate=function(e){var t=this;void 0===e&&(e=!0);var r=this.get("animations");o.each(r,function(r){e&&(r.onFrame?t.attr(r.onFrame(1)):t.attr(r.toAttrs)),r.callback&&r.callback()}),this.set("animating",!1),this.set("animations",[])},t.prototype.pauseAnimate=function(){var e=this.get("timeline"),t=this.get("animations"),r=e.getTime();return o.each(t,function(e){e._paused=!0,e._pauseTime=r,e.pauseCallback&&e.pauseCallback()}),this.set("_pause",{isPaused:!0,pauseTime:r}),this},t.prototype.resumeAnimate=function(){var e=this.get("timeline").getTime(),t=this.get("animations"),r=this.get("_pause").pauseTime;return o.each(t,function(t){t.startTime=t.startTime+(e-r),t._paused=!1,t._pauseTime=null,t.resumeCallback&&t.resumeCallback()}),this.set("_pause",{isPaused:!1}),this.set("animations",t),this},t.prototype.emitDelegation=function(e,t){var r,n=this,i=t.propagationPath;this.getEvents();"mouseenter"===e?r=t.fromShape:"mouseleave"===e&&(r=t.toShape);for(var s=function(e){var s=i[e],l=s.get("name");if(l){if((s.isGroup()||s.isCanvas&&s.isCanvas())&&r&&a.isParent(s,r))return"break";o.isArray(l)?o.each(l,function(e){n.emitDelegateEvent(s,e,t)}):u.emitDelegateEvent(s,l,t)}},u=this,l=0;l<i.length;l++){if("break"===s(l))break}},t.prototype.emitDelegateEvent=function(e,t,r){var n=this.getEvents(),o=t+":"+r.type;(n[o]||n["*"])&&(r.name=o,r.currentTarget=e,r.delegateTarget=this,r.delegateObject=e.get("delegateObject"),this.emit(o,r))},t.prototype.translate=function(e,t){void 0===e&&(e=0),void 0===t&&(t=0);var r=this.getMatrix(),n=l(r,[["t",e,t]]);return this.setMatrix(n),this},t.prototype.move=function(e,t){var r=this.attr("x")||0,n=this.attr("y")||0;return this.translate(e-r,t-n),this},t.prototype.moveTo=function(e,t){return this.move(e,t)},t.prototype.scale=function(e,t){var r=this.getMatrix(),n=l(r,[["s",e,t||e]]);return this.setMatrix(n),this},t.prototype.rotate=function(e){var t=this.getMatrix(),r=l(t,[["r",e]]);return this.setMatrix(r),this},t.prototype.rotateAtStart=function(e){var t=this.attr(),r=t.x,n=t.y,o=this.getMatrix(),i=l(o,[["t",-r,-n],["r",e],["t",r,n]]);return this.setMatrix(i),this},t.prototype.rotateAtPoint=function(e,t,r){var n=this.getMatrix(),o=l(n,[["t",-e,-t],["r",r],["t",e,t]]);return this.setMatrix(o),this},t}(u.default);t.default=h},33652:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(97582),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.isGroup=function(){return!0},t.prototype.isEntityGroup=function(){return!1},t.prototype.clone=function(){for(var t=e.prototype.clone.call(this),r=this.getChildren(),n=0;n<r.length;n++){var o=r[n];t.add(o.clone())}return t},t}(r(28377).default);t.default=o},10996:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(97582),o=r(87822),i=r(94561),a=function(e){function t(t){return e.call(this,t)||this}return n.__extends(t,e),t.prototype._isInBBox=function(e,t){var r=this.getBBox();return r.minX<=e&&r.maxX>=e&&r.minY<=t&&r.maxY>=t},t.prototype.afterAttrsChange=function(t){e.prototype.afterAttrsChange.call(this,t),this.clearCacheBBox()},t.prototype.getBBox=function(){var e=this.cfg.bbox;return e||(e=this.calculateBBox(),this.set("bbox",e)),e},t.prototype.getCanvasBBox=function(){var e=this.cfg.canvasBBox;return e||(e=this.calculateCanvasBBox(),this.set("canvasBBox",e)),e},t.prototype.applyMatrix=function(t){e.prototype.applyMatrix.call(this,t),this.set("canvasBBox",null)},t.prototype.calculateCanvasBBox=function(){var e=this.getBBox(),t=this.getTotalMatrix(),r=e.minX,n=e.minY,o=e.maxX,a=e.maxY;if(t){var s=i.multiplyVec2(t,[e.minX,e.minY]),u=i.multiplyVec2(t,[e.maxX,e.minY]),l=i.multiplyVec2(t,[e.minX,e.maxY]),c=i.multiplyVec2(t,[e.maxX,e.maxY]);r=Math.min(s[0],u[0],l[0],c[0]),o=Math.max(s[0],u[0],l[0],c[0]),n=Math.min(s[1],u[1],l[1],c[1]),a=Math.max(s[1],u[1],l[1],c[1])}var f=this.attrs;if(f.shadowColor){var h=f.shadowBlur,p=void 0===h?0:h,d=f.shadowOffsetX,y=void 0===d?0:d,v=f.shadowOffsetY,g=void 0===v?0:v,m=r-p+y,b=o+p+y,w=n-p+g,_=a+p+g;r=Math.min(r,m),o=Math.max(o,b),n=Math.min(n,w),a=Math.max(a,_)}return{x:r,y:n,minX:r,minY:n,maxX:o,maxY:a,width:o-r,height:a-n}},t.prototype.clearCacheBBox=function(){this.set("bbox",null),this.set("canvasBBox",null)},t.prototype.isClipShape=function(){return this.get("isClipShape")},t.prototype.isInShape=function(e,t){return!1},t.prototype.isOnlyHitBox=function(){return!1},t.prototype.isHit=function(e,t){var r=this.get("startArrowShape"),n=this.get("endArrowShape"),o=[e,t,1],i=(o=this.invertFromMatrix(o))[0],a=o[1],s=this._isInBBox(i,a);if(this.isOnlyHitBox())return s;if(s&&!this.isClipped(i,a)){if(this.isInShape(i,a))return!0;if(r&&r.isHit(i,a))return!0;if(n&&n.isHit(i,a))return!0}return!1},t}(o.default);t.default=a},44254:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerEasing=t.getEasing=void 0;var n=r(3301),o={};t.getEasing=function(e){return o[e.toLowerCase()]||n[e]},t.registerEasing=function(e,t){o[e.toLowerCase()]=t}},49812:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(31834),o=r(42433),i=r(4644),a=r(44254),s=r(74583),u=r(86642),l=[1,0,0,0,1,0,0,0,1];function c(e,t,r){var o,c=t.startTime;if(r<c+t.delay||t._paused)return!1;var f=t.duration,h=t.easing,p=a.getEasing(h);if(r=r-c-t.delay,t.repeat)o=p(o=r%f/f);else{if(!((o=r/f)<1))return t.onFrame?e.attr(t.onFrame(1)):e.attr(t.toAttrs),!0;o=p(o)}if(t.onFrame){var d=t.onFrame(o);e.attr(d)}else!function(e,t,r){var o={},a=t.fromAttrs,c=t.toAttrs;if(!e.destroyed){var f;for(var h in c)if(!n.isEqual(a[h],c[h]))if("path"===h){var p=c[h],d=a[h];p.length>d.length?(p=s.parsePathString(c[h]),d=s.parsePathString(a[h]),d=s.fillPathByDiff(d,p),d=s.formatPath(d,p),t.fromAttrs.path=d,t.toAttrs.path=p):t.pathFormatted||(p=s.parsePathString(c[h]),d=s.parsePathString(a[h]),d=s.formatPath(d,p),t.fromAttrs.path=d,t.toAttrs.path=p,t.pathFormatted=!0),o[h]=[];for(var y=0;y<p.length;y++){for(var v=p[y],g=d[y],m=[],b=0;b<v.length;b++)n.isNumber(v[b])&&g&&n.isNumber(g[b])?(f=i.interpolate(g[b],v[b]),m.push(f(r))):m.push(v[b]);o[h].push(m)}}else if("matrix"===h){var w=i.interpolateArray(a[h]||l,c[h]||l)(r);o[h]=w}else u.isColorProp(h)&&u.isGradientColor(c[h])?o[h]=c[h]:n.isFunction(c[h])||(f=i.interpolate(a[h],c[h]),o[h]=f(r));e.attr(o)}}(e,t,o);return!1}var f=function(){function e(e){this.animators=[],this.current=0,this.timer=null,this.canvas=e}return e.prototype.initTimer=function(){var e,t,r,n=this;this.timer=o.timer(function(o){if(n.current=o,n.animators.length>0){for(var i=n.animators.length-1;i>=0;i--)if((e=n.animators[i]).destroyed)n.removeAnimator(i);else{if(!e.isAnimatePaused())for(var a=(t=e.get("animations")).length-1;a>=0;a--)r=t[a],c(e,r,o)&&(t.splice(a,1),!1,r.callback&&r.callback());0===t.length&&n.removeAnimator(i)}n.canvas.get("autoDraw")||n.canvas.draw()}})},e.prototype.addAnimator=function(e){this.animators.push(e)},e.prototype.removeAnimator=function(e){this.animators.splice(e,1)},e.prototype.isAnimating=function(){return!!this.animators.length},e.prototype.stop=function(){this.timer&&this.timer.stop()},e.prototype.stopAllAnimations=function(e){void 0===e&&(e=!0),this.animators.forEach(function(t){t.stopAnimate(e)}),this.animators=[],this.canvas.draw()},e.prototype.getTime=function(){return this.current},e}();t.default=f},84840:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.attr(),r=t.x,n=t.y,o=t.r;return{x:r-o,y:n-o,width:2*o,height:2*o}}},27823:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.attr(),r=t.x,n=t.y,o=t.rx,i=t.ry;return{x:r-o,y:n-i,width:2*o,height:2*i}}},68246:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerBBox=t.getBBoxMethod=void 0;var n=r(37197);Object.defineProperty(t,"registerBBox",{enumerable:!0,get:function(){return n.register}}),Object.defineProperty(t,"getBBoxMethod",{enumerable:!0,get:function(){return n.getMethod}});var o=r(36491),i=r(84840),a=r(96812),s=r(43825),u=r(33117),l=r(14465),c=r(85195),f=r(27823);n.register("rect",o.default),n.register("image",o.default),n.register("circle",i.default),n.register("marker",i.default),n.register("polyline",a.default),n.register("polygon",s.default),n.register("text",u.default),n.register("path",l.default),n.register("line",c.default),n.register("ellipse",f.default)},85195:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(91815);t.default=function(e){var t=e.attr(),r=t.x1,o=t.y1,i=t.x2,a=t.y2,s={minX:Math.min(r,i),maxX:Math.max(r,i),minY:Math.min(o,a),maxY:Math.max(o,a)};return{x:(s=n.mergeArrowBBox(e,s)).minX,y:s.minY,width:s.maxX-s.minX,height:s.maxY-s.minY}}},14465:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(28524),o=r(73920),i=r(31834),a=r(91815);function s(e,t){var r=e.prePoint,n=e.currentPoint,o=e.nextPoint,a=Math.pow(n[0]-r[0],2)+Math.pow(n[1]-r[1],2),s=Math.pow(n[0]-o[0],2)+Math.pow(n[1]-o[1],2),u=Math.pow(r[0]-o[0],2)+Math.pow(r[1]-o[1],2),l=Math.acos((a+s-u)/(2*Math.sqrt(a)*Math.sqrt(s)));if(!l||0===Math.sin(l)||i.isNumberEqual(l,0))return{xExtra:0,yExtra:0};var c=Math.abs(Math.atan2(o[1]-n[1],o[0]-n[0])),f=Math.abs(Math.atan2(o[0]-n[0],o[1]-n[1]));return c=c>Math.PI/2?Math.PI-c:c,f=f>Math.PI/2?Math.PI-f:f,{xExtra:Math.cos(l/2-c)*(t/2*(1/Math.sin(l/2)))-t/2||0,yExtra:Math.cos(f-l/2)*(t/2*(1/Math.sin(l/2)))-t/2||0}}t.default=function(e){var t=e.attr(),r=t.path,u=t.stroke?t.lineWidth:0,l=function(e,t){for(var r=[],o=[],a=[],u=0;u<e.length;u++){var l=(m=e[u]).currentPoint,c=m.params,f=m.prePoint,h=void 0;switch(m.command){case"Q":h=n.Quad.box(f[0],f[1],c[1],c[2],c[3],c[4]);break;case"C":h=n.Cubic.box(f[0],f[1],c[1],c[2],c[3],c[4],c[5],c[6]);break;case"A":var p=m.arcParams;h=n.Arc.box(p.cx,p.cy,p.rx,p.ry,p.xRotation,p.startAngle,p.endAngle);break;default:r.push(l[0]),o.push(l[1])}h&&(m.box=h,r.push(h.x,h.x+h.width),o.push(h.y,h.y+h.height)),t&&("L"===m.command||"M"===m.command)&&m.prePoint&&m.nextPoint&&a.push(m)}r=r.filter(function(e){return!Number.isNaN(e)&&e!==1/0&&e!==-1/0}),o=o.filter(function(e){return!Number.isNaN(e)&&e!==1/0&&e!==-1/0});var d=i.min(r),y=i.min(o),v=i.max(r),g=i.max(o);if(0===a.length)return{x:d,y:y,width:v-d,height:g-y};for(u=0;u<a.length;u++){var m;(l=(m=a[u]).currentPoint)[0]===d?d-=s(m,t).xExtra:l[0]===v&&(v+=s(m,t).xExtra),l[1]===y?y-=s(m,t).yExtra:l[1]===g&&(g+=s(m,t).yExtra)}return{x:d,y:y,width:v-d,height:g-y}}(e.get("segments")||o.path2Segments(r),u),c=l.x,f=l.y,h={minX:c,minY:f,maxX:c+l.width,maxY:f+l.height};return{x:(h=a.mergeArrowBBox(e,h)).minX,y:h.minY,width:h.maxX-h.minX,height:h.maxY-h.minY}}},43825:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(28524);t.default=function(e){for(var t=e.attr().points,r=[],o=[],i=0;i<t.length;i++){var a=t[i];r.push(a[0]),o.push(a[1])}return n.Util.getBBoxByArray(r,o)}},96812:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(28524),o=r(91815);t.default=function(e){for(var t=e.attr().points,r=[],i=[],a=0;a<t.length;a++){var s=t[a];r.push(s[0]),i.push(s[1])}var u=n.Util.getBBoxByArray(r,i),l=u.x,c=u.y,f={minX:l,minY:c,maxX:l+u.width,maxY:c+u.height};return{x:(f=o.mergeArrowBBox(e,f)).minX,y:f.minY,width:f.maxX-f.minX,height:f.maxY-f.minY}}},36491:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.attr();return{x:t.x,y:t.y,width:t.width,height:t.height}}},37197:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getMethod=t.register=void 0;var r=new Map;t.register=function(e,t){r.set(e,t)},t.getMethod=function(e){return r.get(e)}},33117:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(10409);t.default=function(e){var t=e.attr(),r=t.x,o=t.y,i=t.text,a=t.fontSize,s=t.lineHeight,u=t.font;u||(u=n.assembleFont(t));var l,c=n.getTextWidth(i,u);if(c){var f=t.textAlign,h=t.textBaseline,p=n.getTextHeight(i,a,s),d={x:r,y:o-p};f&&("end"===f||"right"===f?d.x-=c:"center"===f&&(d.x-=c/2)),h&&("top"===h?d.y+=p:"middle"===h&&(d.y+=p/2)),l={x:d.x,y:d.y,width:c,height:p}}else l={x:r,y:o,width:0,height:0};return l}},91815:function(e,t){"use strict";function r(e,t){return e&&t?{minX:Math.min(e.minX,t.minX),minY:Math.min(e.minY,t.minY),maxX:Math.max(e.maxX,t.maxX),maxY:Math.max(e.maxY,t.maxY)}:e||t}Object.defineProperty(t,"__esModule",{value:!0}),t.mergeArrowBBox=t.mergeBBox=void 0,t.mergeBBox=r,t.mergeArrowBBox=function(e,t){var n=e.get("startArrowShape"),o=e.get("endArrowShape");return n&&(t=r(t,n.getCanvasBBox())),o&&(t=r(t,o.getCanvasBBox())),t}},9246:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(31899),o=r(7693),i=["mousedown","mouseup","dblclick","mouseout","mouseover","mousemove","mouseleave","mouseenter","touchstart","touchmove","touchend","dragenter","dragover","dragleave","drop","contextmenu","mousewheel"];function a(e,t,r){r.name=t,r.target=e,r.currentTarget=e,r.delegateTarget=e,e.emit(t,r)}function s(e,t,r){if(r.bubbles){var n=void 0,i=!1;if("mouseenter"===t?(n=r.fromShape,i=!0):"mouseleave"===t&&(i=!0,n=r.toShape),e.isCanvas()&&i)return;if(n&&o.isParent(e,n))return void(r.bubbles=!1);r.name=t,r.currentTarget=e,r.delegateTarget=e,e.emit(t,r)}}var u=function(){function e(e){var t=this;this.draggingShape=null,this.dragging=!1,this.currentShape=null,this.mousedownShape=null,this.mousedownPoint=null,this._eventCallback=function(e){var r=e.type;t._triggerEvent(r,e)},this._onDocumentMove=function(e){if(t.canvas.get("el")!==e.target&&(t.dragging||t.currentShape)){var r=t._getPointInfo(e);t.dragging&&t._emitEvent("drag",e,r,t.draggingShape)}},this._onDocumentMouseUp=function(e){if(t.canvas.get("el")!==e.target&&t.dragging){var r=t._getPointInfo(e);t.draggingShape&&t._emitEvent("drop",e,r,null),t._emitEvent("dragend",e,r,t.draggingShape),t._afterDrag(t.draggingShape,r,e)}},this.canvas=e.canvas}return e.prototype.init=function(){this._bindEvents()},e.prototype._bindEvents=function(){var e=this,t=this.canvas.get("el");o.each(i,function(r){t.addEventListener(r,e._eventCallback)}),document&&(document.addEventListener("mousemove",this._onDocumentMove),document.addEventListener("mouseup",this._onDocumentMouseUp))},e.prototype._clearEvents=function(){var e=this,t=this.canvas.get("el");o.each(i,function(r){t.removeEventListener(r,e._eventCallback)}),document&&(document.removeEventListener("mousemove",this._onDocumentMove),document.removeEventListener("mouseup",this._onDocumentMouseUp))},e.prototype._getEventObj=function(e,t,r,o,i,a){var s=new n.default(e,t);return s.fromShape=i,s.toShape=a,s.x=r.x,s.y=r.y,s.clientX=r.clientX,s.clientY=r.clientY,s.propagationPath.push(o),s},e.prototype._getShape=function(e,t){return this.canvas.getShape(e.x,e.y,t)},e.prototype._getPointInfo=function(e){var t=this.canvas,r=t.getClientByEvent(e),n=t.getPointByEvent(e);return{x:n.x,y:n.y,clientX:r.x,clientY:r.y}},e.prototype._triggerEvent=function(e,t){var r=this._getPointInfo(t),n=this._getShape(r,t),o=this["_on"+e],i=!1;if(o)o.call(this,r,n,t);else{var a=this.currentShape;"mouseenter"===e||"dragenter"===e||"mouseover"===e?(this._emitEvent(e,t,r,null,null,n),n&&this._emitEvent(e,t,r,n,null,n),"mouseenter"===e&&this.draggingShape&&this._emitEvent("dragenter",t,r,null)):"mouseleave"===e||"dragleave"===e||"mouseout"===e?(i=!0,a&&this._emitEvent(e,t,r,a,a,null),this._emitEvent(e,t,r,null,a,null),"mouseleave"===e&&this.draggingShape&&this._emitEvent("dragleave",t,r,null)):this._emitEvent(e,t,r,n,null,null)}if(i||(this.currentShape=n),n&&!n.get("destroyed")){var s=this.canvas;s.get("el").style.cursor=n.attr("cursor")||s.get("cursor")}},e.prototype._onmousedown=function(e,t,r){0===r.button&&(this.mousedownShape=t,this.mousedownPoint=e,this.mousedownTimeStamp=r.timeStamp),this._emitEvent("mousedown",r,e,t,null,null)},e.prototype._emitMouseoverEvents=function(e,t,r,n){var o=this.canvas.get("el");r!==n&&(r&&(this._emitEvent("mouseout",e,t,r,r,n),this._emitEvent("mouseleave",e,t,r,r,n),n&&!n.get("destroyed")||(o.style.cursor=this.canvas.get("cursor"))),n&&(this._emitEvent("mouseover",e,t,n,r,n),this._emitEvent("mouseenter",e,t,n,r,n)))},e.prototype._emitDragoverEvents=function(e,t,r,n,o){n?(n!==r&&(r&&this._emitEvent("dragleave",e,t,r,r,n),this._emitEvent("dragenter",e,t,n,r,n)),o||this._emitEvent("dragover",e,t,n)):r&&this._emitEvent("dragleave",e,t,r,r,n),o&&this._emitEvent("dragover",e,t,n)},e.prototype._afterDrag=function(e,t,r){e&&(e.set("capture",!0),this.draggingShape=null),this.dragging=!1;var n=this._getShape(t,r);n!==e&&this._emitMouseoverEvents(r,t,e,n),this.currentShape=n},e.prototype._onmouseup=function(e,t,r){if(0===r.button){var n=this.draggingShape;this.dragging?(n&&this._emitEvent("drop",r,e,t),this._emitEvent("dragend",r,e,n),this._afterDrag(n,e,r)):(this._emitEvent("mouseup",r,e,t),t===this.mousedownShape&&this._emitEvent("click",r,e,t),this.mousedownShape=null,this.mousedownPoint=null)}},e.prototype._ondragover=function(e,t,r){r.preventDefault();var n=this.currentShape;this._emitDragoverEvents(r,e,n,t,!0)},e.prototype._onmousemove=function(e,t,r){var n=this.canvas,o=this.currentShape,i=this.draggingShape;if(this.dragging)i&&this._emitDragoverEvents(r,e,o,t,!1),this._emitEvent("drag",r,e,i);else{var a=this.mousedownPoint;if(a){var s=this.mousedownShape,u=r.timeStamp-this.mousedownTimeStamp,l=a.clientX-e.clientX,c=a.clientY-e.clientY;u>120||l*l+c*c>40?s&&s.get("draggable")?((i=this.mousedownShape).set("capture",!1),this.draggingShape=i,this.dragging=!0,this._emitEvent("dragstart",r,e,i),this.mousedownShape=null,this.mousedownPoint=null):!s&&n.get("draggable")?(this.dragging=!0,this._emitEvent("dragstart",r,e,null),this.mousedownShape=null,this.mousedownPoint=null):(this._emitMouseoverEvents(r,e,o,t),this._emitEvent("mousemove",r,e,t)):(this._emitMouseoverEvents(r,e,o,t),this._emitEvent("mousemove",r,e,t))}else this._emitMouseoverEvents(r,e,o,t),this._emitEvent("mousemove",r,e,t)}},e.prototype._emitEvent=function(e,t,r,n,o,i){var u=this._getEventObj(e,t,r,n,o,i);if(n){u.shape=n,a(n,e,u);for(var l=n.getParent();l;)l.emitDelegation(e,u),u.propagationStopped||s(l,e,u),u.propagationPath.push(l),l=l.getParent()}else{a(this.canvas,e,u)}},e.prototype.destroy=function(){this._clearEvents(),this.canvas=null,this.currentShape=null,this.draggingShape=null,this.mousedownPoint=null,this.mousedownShape=null,this.mousedownTimeStamp=null},e}();t.default=u},31899:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){this.bubbles=!0,this.target=null,this.currentTarget=null,this.delegateTarget=null,this.delegateObject=null,this.defaultPrevented=!1,this.propagationStopped=!1,this.shape=null,this.fromShape=null,this.toShape=null,this.propagationPath=[],this.type=e,this.name=e,this.originalEvent=t,this.timeStamp=t.timeStamp}return e.prototype.preventDefault=function(){this.defaultPrevented=!0,this.originalEvent.preventDefault&&this.originalEvent.preventDefault()},e.prototype.stopPropagation=function(){this.propagationStopped=!0},e.prototype.toString=function(){return"[Event (type="+this.type+")]"},e.prototype.save=function(){},e.prototype.restore=function(){},e}();t.default=r},6992:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.version=t.PathUtil=void 0;var n=r(97582),o=r(74583);t.PathUtil=o,n.__exportStar(r(9257),t),n.__exportStar(r(9111),t);var i=r(31899);Object.defineProperty(t,"Event",{enumerable:!0,get:function(){return i.default}});var a=r(40647);Object.defineProperty(t,"Base",{enumerable:!0,get:function(){return a.default}});var s=r(15741);Object.defineProperty(t,"AbstractCanvas",{enumerable:!0,get:function(){return s.default}});var u=r(33652);Object.defineProperty(t,"AbstractGroup",{enumerable:!0,get:function(){return u.default}});var l=r(10996);Object.defineProperty(t,"AbstractShape",{enumerable:!0,get:function(){return l.default}});var c=r(68246);Object.defineProperty(t,"getBBoxMethod",{enumerable:!0,get:function(){return c.getBBoxMethod}}),Object.defineProperty(t,"registerBBox",{enumerable:!0,get:function(){return c.registerBBox}});var f=r(10409);Object.defineProperty(t,"getTextHeight",{enumerable:!0,get:function(){return f.getTextHeight}}),Object.defineProperty(t,"assembleFont",{enumerable:!0,get:function(){return f.assembleFont}});var h=r(7693);Object.defineProperty(t,"isAllowCapture",{enumerable:!0,get:function(){return h.isAllowCapture}});var p=r(94561);Object.defineProperty(t,"multiplyVec2",{enumerable:!0,get:function(){return p.multiplyVec2}}),Object.defineProperty(t,"invert",{enumerable:!0,get:function(){return p.invert}});var d=r(73495);Object.defineProperty(t,"getOffScreenContext",{enumerable:!0,get:function(){return d.getOffScreenContext}});var y=r(44254);Object.defineProperty(t,"registerEasing",{enumerable:!0,get:function(){return y.registerEasing}}),t.version="0.5.11"},9111:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},9257:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},86642:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isGradientColor=t.isColorProp=void 0,t.isColorProp=function(e){return["fill","stroke","fillStyle","strokeStyle"].includes(e)},t.isGradientColor=function(e){return/^[r,R,L,l]{1}[\s]*\(/.test(e)}},94561:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.invert=t.multiplyVec2=t.multiplyMatrix=void 0,t.multiplyMatrix=function(e,t){var r=[],n=e[0],o=e[1],i=e[2],a=e[3],s=e[4],u=e[5],l=e[6],c=e[7],f=e[8],h=t[0],p=t[1],d=t[2],y=t[3],v=t[4],g=t[5],m=t[6],b=t[7],w=t[8];return r[0]=h*n+p*a+d*l,r[1]=h*o+p*s+d*c,r[2]=h*i+p*u+d*f,r[3]=y*n+v*a+g*l,r[4]=y*o+v*s+g*c,r[5]=y*i+v*u+g*f,r[6]=m*n+b*a+w*l,r[7]=m*o+b*s+w*c,r[8]=m*i+b*u+w*f,r},t.multiplyVec2=function(e,t){var r=[],n=t[0],o=t[1];return r[0]=e[0]*n+e[3]*o+e[6],r[1]=e[1]*n+e[4]*o+e[7],r},t.invert=function(e){var t=[],r=e[0],n=e[1],o=e[2],i=e[3],a=e[4],s=e[5],u=e[6],l=e[7],c=e[8],f=c*a-s*l,h=-c*i+s*u,p=l*i-a*u,d=r*f+n*h+o*p;return d?(d=1/d,t[0]=f*d,t[1]=(-c*n+o*l)*d,t[2]=(s*n-o*a)*d,t[3]=h*d,t[4]=(c*r-o*u)*d,t[5]=(-s*r+o*i)*d,t[6]=p*d,t[7]=(-l*r+n*u)*d,t[8]=(a*r-n*i)*d,t):null}},73495:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getOffScreenContext=void 0;var r=null;t.getOffScreenContext=function(){if(!r){var e=document.createElement("canvas");e.width=1,e.height=1,r=e.getContext("2d")}return r}},74583:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.rectPath=t.pathToCurve=t.pathToAbsolute=t.parsePathString=t.parsePathArray=t.intersection=t.formatPath=t.fillPathByDiff=t.fillPath=t.catmullRomToBezier=void 0;var n=r(31834),o="\t\n\v\f\r Â áá ââââââââââââ¯âã\u2028\u2029",i=new RegExp("([a-z])["+o+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+o+"]*,?["+o+"]*)+)","ig"),a=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+o+"]*,?["+o+"]*","ig"),s=function(e){if(!e)return null;if(n.isArray(e))return e;var t={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},r=[];return String(e).replace(i,function(n,o,i){var s=[],u=o.toLowerCase();if(i.replace(a,function(e,t){t&&s.push(+t)}),"m"===u&&s.length>2&&(r.push([o].concat(s.splice(0,2))),u="l",o="m"===o?"l":"L"),"o"===u&&1===s.length&&r.push([o,s[0]]),"r"===u)r.push([o].concat(s));else for(;s.length>=t[u]&&(r.push([o].concat(s.splice(0,t[u]))),t[u]););return e}),r};t.parsePathString=s;var u=function(e,t){for(var r=[],n=0,o=e.length;o-2*!t>n;n+=2){var i=[{x:+e[n-2],y:+e[n-1]},{x:+e[n],y:+e[n+1]},{x:+e[n+2],y:+e[n+3]},{x:+e[n+4],y:+e[n+5]}];t?n?o-4===n?i[3]={x:+e[0],y:+e[1]}:o-2===n&&(i[2]={x:+e[0],y:+e[1]},i[3]={x:+e[2],y:+e[3]}):i[0]={x:+e[o-2],y:+e[o-1]}:o-4===n?i[3]=i[2]:n||(i[0]={x:+e[n],y:+e[n+1]}),r.push(["C",(-i[0].x+6*i[1].x+i[2].x)/6,(-i[0].y+6*i[1].y+i[2].y)/6,(i[1].x+6*i[2].x-i[3].x)/6,(i[1].y+6*i[2].y-i[3].y)/6,i[2].x,i[2].y])}return r};t.catmullRomToBezier=u;var l=function(e,t,r,n,o){var i=[];if(null===o&&null===n&&(n=r),e=+e,t=+t,r=+r,n=+n,null!==o){var a=Math.PI/180,s=e+r*Math.cos(-n*a),u=e+r*Math.cos(-o*a);i=[["M",s,t+r*Math.sin(-n*a)],["A",r,r,0,+(o-n>180),0,u,t+r*Math.sin(-o*a)]]}else i=[["M",e,t],["m",0,-n],["a",r,n,0,1,1,0,2*n],["a",r,n,0,1,1,0,-2*n],["z"]];return i},c=function(e){if(!(e=s(e))||!e.length)return[["M",0,0]];var t,r,n=[],o=0,i=0,a=0,c=0,f=0;"M"===e[0][0]&&(a=o=+e[0][1],c=i=+e[0][2],f++,n[0]=["M",o,i]);for(var h=3===e.length&&"M"===e[0][0]&&"R"===e[1][0].toUpperCase()&&"Z"===e[2][0].toUpperCase(),p=void 0,d=void 0,y=f,v=e.length;y<v;y++){if(n.push(p=[]),(t=(d=e[y])[0])!==t.toUpperCase())switch(p[0]=t.toUpperCase(),p[0]){case"A":p[1]=d[1],p[2]=d[2],p[3]=d[3],p[4]=d[4],p[5]=d[5],p[6]=+d[6]+o,p[7]=+d[7]+i;break;case"V":p[1]=+d[1]+i;break;case"H":p[1]=+d[1]+o;break;case"R":for(var g=2,m=(r=[o,i].concat(d.slice(1))).length;g<m;g++)r[g]=+r[g]+o,r[++g]=+r[g]+i;n.pop(),n=n.concat(u(r,h));break;case"O":n.pop(),(r=l(o,i,d[1],d[2])).push(r[0]),n=n.concat(r);break;case"U":n.pop(),n=n.concat(l(o,i,d[1],d[2],d[3])),p=["U"].concat(n[n.length-1].slice(-2));break;case"M":a=+d[1]+o,c=+d[2]+i;break;default:for(g=1,m=d.length;g<m;g++)p[g]=+d[g]+(g%2?o:i)}else if("R"===t)r=[o,i].concat(d.slice(1)),n.pop(),n=n.concat(u(r,h)),p=["R"].concat(d.slice(-2));else if("O"===t)n.pop(),(r=l(o,i,d[1],d[2])).push(r[0]),n=n.concat(r);else if("U"===t)n.pop(),n=n.concat(l(o,i,d[1],d[2],d[3])),p=["U"].concat(n[n.length-1].slice(-2));else for(var b=0,w=d.length;b<w;b++)p[b]=d[b];if("O"!==(t=t.toUpperCase()))switch(p[0]){case"Z":o=+a,i=+c;break;case"H":o=p[1];break;case"V":i=p[1];break;case"M":a=p[p.length-2],c=p[p.length-1];break;default:o=p[p.length-2],i=p[p.length-1]}}return n};t.pathToAbsolute=c;var f=function(e,t,r,n){return[e,t,r,n,r,n]},h=function(e,t,r,n,o,i){return[1/3*e+2/3*r,1/3*t+2/3*n,1/3*o+2/3*r,1/3*i+2/3*n,o,i]},p=function(e,t){var r,n=c(e),o=t&&c(t),i={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},a={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},s=[],u=[],l="",p="",d=function(e,t,r){var n,o;if(!e)return["C",t.x,t.y,t.x,t.y,t.x,t.y];switch(!(e[0]in{T:1,Q:1})&&(t.qx=t.qy=null),e[0]){case"M":t.X=e[1],t.Y=e[2];break;case"A":e=["C"].concat(function e(t,r,n,o,i,a,s,u,l,c){n===o&&(n+=1);var f,h,p,d,y,v=120*Math.PI/180,g=Math.PI/180*(+i||0),m=[],b=function(e,t,r){return{x:e*Math.cos(r)-t*Math.sin(r),y:e*Math.sin(r)+t*Math.cos(r)}};if(c)h=c[0],p=c[1],d=c[2],y=c[3];else{t=(f=b(t,r,-g)).x,r=f.y,u=(f=b(u,l,-g)).x,l=f.y,t===u&&r===l&&(u+=1,l+=1);var w=(t-u)/2,_=(r-l)/2,x=w*w/(n*n)+_*_/(o*o);x>1&&(n*=x=Math.sqrt(x),o*=x);var S=n*n,O=o*o,P=(a===s?-1:1)*Math.sqrt(Math.abs((S*O-S*_*_-O*w*w)/(S*_*_+O*w*w)));d=P*n*_/o+(t+u)/2,y=P*-o*w/n+(r+l)/2,h=Math.asin(((r-y)/o).toFixed(9)),p=Math.asin(((l-y)/o).toFixed(9)),h=t<d?Math.PI-h:h,p=u<d?Math.PI-p:p,h<0&&(h=2*Math.PI+h),p<0&&(p=2*Math.PI+p),s&&h>p&&(h-=2*Math.PI),!s&&p>h&&(p-=2*Math.PI)}var E=p-h;if(Math.abs(E)>v){var k=p,M=u,C=l;p=h+v*(s&&p>h?1:-1),m=e(u=d+n*Math.cos(p),l=y+o*Math.sin(p),n,o,i,0,s,M,C,[p,k,d,y])}E=p-h;var j=Math.cos(h),T=Math.sin(h),A=Math.cos(p),I=Math.sin(p),R=Math.tan(E/4),L=4/3*n*R,N=4/3*o*R,D=[t,r],B=[t+L*T,r-N*j],F=[u+L*I,l-N*A],G=[u,l];if(B[0]=2*D[0]-B[0],B[1]=2*D[1]-B[1],c)return[B,F,G].concat(m);for(var z=[],U=0,V=(m=[B,F,G].concat(m).join().split(",")).length;U<V;U++)z[U]=U%2?b(m[U-1],m[U],g).y:b(m[U],m[U+1],g).x;return z}.apply(0,[t.x,t.y].concat(e.slice(1))));break;case"S":"C"===r||"S"===r?(n=2*t.x-t.bx,o=2*t.y-t.by):(n=t.x,o=t.y),e=["C",n,o].concat(e.slice(1));break;case"T":"Q"===r||"T"===r?(t.qx=2*t.x-t.qx,t.qy=2*t.y-t.qy):(t.qx=t.x,t.qy=t.y),e=["C"].concat(h(t.x,t.y,t.qx,t.qy,e[1],e[2]));break;case"Q":t.qx=e[1],t.qy=e[2],e=["C"].concat(h(t.x,t.y,e[1],e[2],e[3],e[4]));break;case"L":e=["C"].concat(f(t.x,t.y,e[1],e[2]));break;case"H":e=["C"].concat(f(t.x,t.y,e[1],t.y));break;case"V":e=["C"].concat(f(t.x,t.y,t.x,e[1]));break;case"Z":e=["C"].concat(f(t.x,t.y,t.X,t.Y))}return e},y=function(e,t){if(e[t].length>7){e[t].shift();for(var i=e[t];i.length;)s[t]="A",o&&(u[t]="A"),e.splice(t++,0,["C"].concat(i.splice(0,6)));e.splice(t,1),r=Math.max(n.length,o&&o.length||0)}},v=function(e,t,i,a,s){e&&t&&"M"===e[s][0]&&"M"!==t[s][0]&&(t.splice(s,0,["M",a.x,a.y]),i.bx=0,i.by=0,i.x=e[s][1],i.y=e[s][2],r=Math.max(n.length,o&&o.length||0))};r=Math.max(n.length,o&&o.length||0);for(var g=0;g<r;g++){n[g]&&(l=n[g][0]),"C"!==l&&(s[g]=l,g&&(p=s[g-1])),n[g]=d(n[g],i,p),"A"!==s[g]&&"C"===l&&(s[g]="C"),y(n,g),o&&(o[g]&&(l=o[g][0]),"C"!==l&&(u[g]=l,g&&(p=u[g-1])),o[g]=d(o[g],a,p),"A"!==u[g]&&"C"===l&&(u[g]="C"),y(o,g)),v(n,o,i,a,g),v(o,n,a,i,g);var m=n[g],b=o&&o[g],w=m.length,_=o&&b.length;i.x=m[w-2],i.y=m[w-1],i.bx=parseFloat(m[w-4])||i.x,i.by=parseFloat(m[w-3])||i.y,a.bx=o&&(parseFloat(b[_-4])||a.x),a.by=o&&(parseFloat(b[_-3])||a.y),a.x=o&&b[_-2],a.y=o&&b[_-1]}return o?[n,o]:n};t.pathToCurve=p;var d=/,?([a-z]),?/gi,y=function(e){return e.join(",").replace(d,"$1")};t.parsePathArray=y;var v=function(e,t,r,n,o){return e*(e*(-3*t+9*r-9*n+3*o)+6*t-12*r+6*n)-3*t+3*r},g=function(e,t,r,n,o,i,a,s,u){null===u&&(u=1);for(var l=(u=u>1?1:u<0?0:u)/2,c=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],f=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],h=0,p=0;p<12;p++){var d=l*c[p]+l,y=v(d,e,r,o,a),g=v(d,t,n,i,s),m=y*y+g*g;h+=f[p]*Math.sqrt(m)}return l*h},m=function(e,t,r,n,o,i,a,s){if(!(Math.max(e,r)<Math.min(o,a)||Math.min(e,r)>Math.max(o,a)||Math.max(t,n)<Math.min(i,s)||Math.min(t,n)>Math.max(i,s))){var u=(e-r)*(i-s)-(t-n)*(o-a);if(u){var l=((e*n-t*r)*(o-a)-(e-r)*(o*s-i*a))/u,c=((e*n-t*r)*(i-s)-(t-n)*(o*s-i*a))/u,f=+l.toFixed(2),h=+c.toFixed(2);if(!(f<+Math.min(e,r).toFixed(2)||f>+Math.max(e,r).toFixed(2)||f<+Math.min(o,a).toFixed(2)||f>+Math.max(o,a).toFixed(2)||h<+Math.min(t,n).toFixed(2)||h>+Math.max(t,n).toFixed(2)||h<+Math.min(i,s).toFixed(2)||h>+Math.max(i,s).toFixed(2)))return{x:l,y:c}}}},b=function(e,t,r){return t>=e.x&&t<=e.x+e.width&&r>=e.y&&r<=e.y+e.height},w=function(e,t,r,n,o){if(o)return[["M",+e+ +o,t],["l",r-2*o,0],["a",o,o,0,0,1,o,o],["l",0,n-2*o],["a",o,o,0,0,1,-o,o],["l",2*o-r,0],["a",o,o,0,0,1,-o,-o],["l",0,2*o-n],["a",o,o,0,0,1,o,-o],["z"]];var i=[["M",e,t],["l",r,0],["l",0,n],["l",-r,0],["z"]];return i.parsePathArray=y,i};t.rectPath=w;var _=function(e,t,r,n){return null===e&&(e=t=r=n=0),null===t&&(t=e.y,r=e.width,n=e.height,e=e.x),{x:e,y:t,width:r,w:r,height:n,h:n,x2:e+r,y2:t+n,cx:e+r/2,cy:t+n/2,r1:Math.min(r,n)/2,r2:Math.max(r,n)/2,r0:Math.sqrt(r*r+n*n)/2,path:w(e,t,r,n),vb:[e,t,r,n].join(" ")}},x=function(e,t,r,o,i,a,s,u){n.isArray(e)||(e=[e,t,r,o,i,a,s,u]);var l=function(e,t,r,n,o,i,a,s){for(var u,l,c,f,h=[],p=[[],[]],d=0;d<2;++d)if(0===d?(l=6*e-12*r+6*o,u=-3*e+9*r-9*o+3*a,c=3*r-3*e):(l=6*t-12*n+6*i,u=-3*t+9*n-9*i+3*s,c=3*n-3*t),Math.abs(u)<1e-12){if(Math.abs(l)<1e-12)continue;(f=-c/l)>0&&f<1&&h.push(f)}else{var y=l*l-4*c*u,v=Math.sqrt(y);if(!(y<0)){var g=(-l+v)/(2*u);g>0&&g<1&&h.push(g);var m=(-l-v)/(2*u);m>0&&m<1&&h.push(m)}}for(var b,w=h.length,_=w;w--;)b=1-(f=h[w]),p[0][w]=b*b*b*e+3*b*b*f*r+3*b*f*f*o+f*f*f*a,p[1][w]=b*b*b*t+3*b*b*f*n+3*b*f*f*i+f*f*f*s;return p[0][_]=e,p[1][_]=t,p[0][_+1]=a,p[1][_+1]=s,p[0].length=p[1].length=_+2,{min:{x:Math.min.apply(0,p[0]),y:Math.min.apply(0,p[1])},max:{x:Math.max.apply(0,p[0]),y:Math.max.apply(0,p[1])}}}.apply(null,e);return _(l.min.x,l.min.y,l.max.x-l.min.x,l.max.y-l.min.y)},S=function(e,t,r,n,o,i,a,s,u){var l=1-u,c=Math.pow(l,3),f=Math.pow(l,2),h=u*u,p=h*u,d=e+2*u*(r-e)+h*(o-2*r+e),y=t+2*u*(n-t)+h*(i-2*n+t),v=r+2*u*(o-r)+h*(a-2*o+r),g=n+2*u*(i-n)+h*(s-2*i+n);return{x:c*e+3*f*u*r+3*l*u*u*o+p*a,y:c*t+3*f*u*n+3*l*u*u*i+p*s,m:{x:d,y:y},n:{x:v,y:g},start:{x:l*e+u*r,y:l*t+u*n},end:{x:l*o+u*a,y:l*i+u*s},alpha:90-180*Math.atan2(d-v,y-g)/Math.PI}},O=function(e,t,r){if(!function(e,t){return e=_(e),t=_(t),b(t,e.x,e.y)||b(t,e.x2,e.y)||b(t,e.x,e.y2)||b(t,e.x2,e.y2)||b(e,t.x,t.y)||b(e,t.x2,t.y)||b(e,t.x,t.y2)||b(e,t.x2,t.y2)||(e.x<t.x2&&e.x>t.x||t.x<e.x2&&t.x>e.x)&&(e.y<t.y2&&e.y>t.y||t.y<e.y2&&t.y>e.y)}(x(e),x(t)))return r?0:[];for(var n=~~(g.apply(0,e)/8),o=~~(g.apply(0,t)/8),i=[],a=[],s={},u=r?0:[],l=0;l<n+1;l++){var c=S.apply(0,e.concat(l/n));i.push({x:c.x,y:c.y,t:l/n})}for(l=0;l<o+1;l++){c=S.apply(0,t.concat(l/o));a.push({x:c.x,y:c.y,t:l/o})}for(l=0;l<n;l++)for(var f=0;f<o;f++){var h=i[l],p=i[l+1],d=a[f],y=a[f+1],v=Math.abs(p.x-h.x)<.001?"y":"x",w=Math.abs(y.x-d.x)<.001?"y":"x",O=m(h.x,h.y,p.x,p.y,d.x,d.y,y.x,y.y);if(O){if(s[O.x.toFixed(4)]===O.y.toFixed(4))continue;s[O.x.toFixed(4)]=O.y.toFixed(4);var P=h.t+Math.abs((O[v]-h[v])/(p[v]-h[v]))*(p.t-h.t),E=d.t+Math.abs((O[w]-d[w])/(y[w]-d[w]))*(y.t-d.t);P>=0&&P<=1&&E>=0&&E<=1&&(r?u+=1:u.push({x:O.x,y:O.y,t1:P,t2:E}))}}return u};function P(e,t){var r=[],n=[];return e.length&&function e(t,o){if(1===t.length)r.push(t[0]),n.push(t[0]);else{for(var i=[],a=0;a<t.length-1;a++)0===a&&r.push(t[0]),a===t.length-2&&n.push(t[a+1]),i[a]=[(1-o)*t[a][0]+o*t[a+1][0],(1-o)*t[a][1]+o*t[a+1][1]];e(i,o)}}(e,t),{left:r,right:n.reverse()}}t.intersection=function(e,t){return function(e,t,r){var n,o,i,a,s,u,l,c,f,h;e=p(e),t=p(t);for(var d=r?0:[],y=0,v=e.length;y<v;y++){var g=e[y];if("M"===g[0])n=s=g[1],o=u=g[2];else{"C"===g[0]?(n=(f=[n,o].concat(g.slice(1)))[6],o=f[7]):(f=[n,o,n,o,s,u,s,u],n=s,o=u);for(var m=0,b=t.length;m<b;m++){var w=t[m];if("M"===w[0])i=l=w[1],a=c=w[2];else{"C"===w[0]?(i=(h=[i,a].concat(w.slice(1)))[6],a=h[7]):(h=[i,a,i,a,l,c,l,c],i=l,a=c);var _=O(f,h,r);if(r)d+=_;else{for(var x=0,S=_.length;x<S;x++)_[x].segment1=y,_[x].segment2=m,_[x].bez1=f,_[x].bez2=h;d=d.concat(_)}}}}}return d}(e,t)};var E=function(e,t,r){if(1===r)return[[].concat(e)];var n=[];if("L"===t[0]||"C"===t[0]||"Q"===t[0])n=n.concat(function(e,t,r){var n=[[e[1],e[2]]];r=r||2;var o=[];"A"===t[0]?(n.push(t[6]),n.push(t[7])):"C"===t[0]?(n.push([t[1],t[2]]),n.push([t[3],t[4]]),n.push([t[5],t[6]])):"S"===t[0]||"Q"===t[0]?(n.push([t[1],t[2]]),n.push([t[3],t[4]])):n.push([t[1],t[2]]);for(var i=n,a=1/r,s=0;s<r-1;s++){var u=P(i,a/(1-a*s));o.push(u.left),i=u.right}return o.push(i),o.map(function(e){var t=[];return 4===e.length&&(t.push("C"),t=t.concat(e[2])),e.length>=3&&(3===e.length&&t.push("Q"),t=t.concat(e[1])),2===e.length&&t.push("L"),t=t.concat(e[e.length-1])})}(e,t,r));else{var o=[].concat(e);"M"===o[0]&&(o[0]="L");for(var i=0;i<=r-1;i++)n.push(o)}return n};t.fillPath=function(e,t){if(1===e.length)return e;var r=e.length-1,n=t.length-1,o=r/n,i=[];if(1===e.length&&"M"===e[0][0]){for(var a=0;a<n-r;a++)e.push(e[0]);return e}for(a=0;a<n;a++){var s=Math.floor(o*a);i[s]=(i[s]||0)+1}var u=i.reduce(function(t,n,o){return o===r?t.concat(e[r]):t.concat(E(e[o],e[o+1],n))},[]);return u.unshift(e[0]),"Z"!==t[n]&&"z"!==t[n]||u.push("Z"),u};var k=function(e,t){if(e.length!==t.length)return!1;var r=!0;return n.each(e,function(e,n){if(e!==t[n])return r=!1,!1}),r};function M(e,t,r){var n=null,o=r;return t<o&&(o=t,n="add"),e<o&&(o=e,n="del"),{type:n,min:o}}function C(e,t,r){for(var n,o=[].concat(e),i=1/(r+1),a=j(t)[0],s=1;s<=r;s++)i*=s,0===(n=Math.floor(e.length*i))?o.unshift([a[0]*i+e[n][0]*(1-i),a[1]*i+e[n][1]*(1-i)]):o.splice(n,0,[a[0]*i+e[n][0]*(1-i),a[1]*i+e[n][1]*(1-i)]);return o}function j(e){var t=[];switch(e[0]){case"M":case"L":t.push([e[1],e[2]]);break;case"A":t.push([e[6],e[7]]);break;case"Q":t.push([e[3],e[4]]),t.push([e[1],e[2]]);break;case"T":t.push([e[1],e[2]]);break;case"C":t.push([e[5],e[6]]),t.push([e[1],e[2]]),t.push([e[3],e[4]]);break;case"S":t.push([e[3],e[4]]),t.push([e[1],e[2]]);break;case"H":case"V":t.push([e[1],e[1]])}return t}t.fillPathByDiff=function(e,t){var r=function(e,t){var r,n,o=e.length,i=t.length,a=0;if(0===o||0===i)return null;for(var s=[],u=0;u<=o;u++)s[u]=[],s[u][0]={min:u};for(var l=0;l<=i;l++)s[0][l]={min:l};for(u=1;u<=o;u++)for(r=e[u-1],l=1;l<=i;l++){n=t[l-1],a=k(r,n)?0:1;var c=s[u-1][l].min+1,f=s[u][l-1].min+1,h=s[u-1][l-1].min+a;s[u][l]=M(c,f,h)}return s}(e,t),n=e.length,o=t.length,i=[],a=1,s=1;if(r[n][o].min!==n){for(var u=1;u<=n;u++){var l=r[u][u].min;s=u;for(var c=a;c<=o;c++)r[u][c].min<l&&(l=r[u][c].min,s=c);a=s,r[u][a].type&&i.push({index:u-1,type:r[u][a].type})}for(u=i.length-1;u>=0;u--)a=i[u].index,"add"===i[u].type?e.splice(a,0,[].concat(e[a])):e.splice(a,1)}var f=o-(n=e.length);if(n<o)for(u=0;u<f;u++)"z"===e[n-1][0]||"Z"===e[n-1][0]?e.splice(n-2,0,e[n-2]):e.push(e[n-1]),n+=1;return e};t.formatPath=function(e,t){if(e.length<=1)return e;for(var r,n=0;n<t.length;n++)if(e[n][0]!==t[n][0])switch(r=j(e[n]),t[n][0]){case"M":e[n]=["M"].concat(r[0]);break;case"L":e[n]=["L"].concat(r[0]);break;case"A":e[n]=[].concat(t[n]),e[n][6]=r[0][0],e[n][7]=r[0][1];break;case"Q":if(r.length<2){if(!(n>0)){e[n]=t[n];break}r=C(r,e[n-1],1)}e[n]=["Q"].concat(r.reduce(function(e,t){return e.concat(t)},[]));break;case"T":e[n]=["T"].concat(r[0]);break;case"C":if(r.length<3){if(!(n>0)){e[n]=t[n];break}r=C(r,e[n-1],2)}e[n]=["C"].concat(r.reduce(function(e,t){return e.concat(t)},[]));break;case"S":if(r.length<2){if(!(n>0)){e[n]=t[n];break}r=C(r,e[n-1],1)}e[n]=["S"].concat(r.reduce(function(e,t){return e.concat(t)},[]));break;default:e[n]=t[n]}return e}},10409:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.assembleFont=t.getTextWidth=t.getLineSpaceing=t.getTextHeight=void 0;var n=r(7693),o=r(73495);function i(e,t){return t?t-e:.14*e}t.getTextHeight=function(e,t,r){var o=1;return n.isString(e)&&(o=e.split("\n").length),o>1?t*o+i(t,r)*(o-1):t},t.getLineSpaceing=i,t.getTextWidth=function(e,t){var r=o.getOffScreenContext(),i=0;if(n.isNil(e)||""===e)return i;if(r.save(),r.font=t,n.isString(e)&&e.includes("\n")){var a=e.split("\n");n.each(a,function(e){var t=r.measureText(e).width;i<t&&(i=t)})}else i=r.measureText(e).width;return r.restore(),i},t.assembleFont=function(e){var t=e.fontSize,r=e.fontFamily,n=e.fontWeight;return[e.fontStyle,e.fontVariant,n,t+"px",r].join(" ").trim()}},7693:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isAllowCapture=t.isParent=t.isBrowser=t.removeFromArray=void 0,t.removeFromArray=function(e,t){var r=e.indexOf(t);-1!==r&&e.splice(r,1)},t.isBrowser="undefined"!=typeof window&&void 0!==window.document;var n=r(31834);Object.defineProperty(t,"isNil",{enumerable:!0,get:function(){return n.isNil}}),Object.defineProperty(t,"isFunction",{enumerable:!0,get:function(){return n.isFunction}}),Object.defineProperty(t,"isString",{enumerable:!0,get:function(){return n.isString}}),Object.defineProperty(t,"isObject",{enumerable:!0,get:function(){return n.isObject}}),Object.defineProperty(t,"isArray",{enumerable:!0,get:function(){return n.isArray}}),Object.defineProperty(t,"mix",{enumerable:!0,get:function(){return n.mix}}),Object.defineProperty(t,"each",{enumerable:!0,get:function(){return n.each}}),Object.defineProperty(t,"upperFirst",{enumerable:!0,get:function(){return n.upperFirst}}),t.isParent=function(e,t){if(e.isCanvas())return!0;for(var r=t.getParent(),n=!1;r;){if(r===e){n=!0;break}r=r.getParent()}return n},t.isAllowCapture=function(e){return e.cfg.visible&&e.cfg.capture}},99740:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(97582),o=r(6992),i=r(97193),a=r(83901),s=r(19204),u=r(96342),l=r(61615),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return t.renderer="canvas",t.autoDraw=!0,t.localRefresh=!0,t.refreshElements=[],t.clipView=!0,t.quickHit=!1,t},t.prototype.onCanvasChange=function(e){"attr"!==e&&"sort"!==e&&"changeSize"!==e||(this.set("refreshElements",[this]),this.draw())},t.prototype.getShapeBase=function(){return a},t.prototype.getGroupBase=function(){return s.default},t.prototype.getPixelRatio=function(){var e=this.get("pixelRatio")||u.getPixelRatio();return e>=1?Math.ceil(e):1},t.prototype.getViewRange=function(){return{minX:0,minY:0,maxX:this.cfg.width,maxY:this.cfg.height}},t.prototype.createDom=function(){var e=document.createElement("canvas"),t=e.getContext("2d");return this.set("context",t),e},t.prototype.setDOMSize=function(t,r){e.prototype.setDOMSize.call(this,t,r);var n=this.get("context"),o=this.get("el"),i=this.getPixelRatio();o.width=i*t,o.height=i*r,i>1&&n.scale(i,i)},t.prototype.clear=function(){e.prototype.clear.call(this),this._clearFrame();var t=this.get("context"),r=this.get("el");t.clearRect(0,0,r.width,r.height)},t.prototype.getShape=function(t,r){return this.get("quickHit")?i.getShape(this,t,r):e.prototype.getShape.call(this,t,r,null)},t.prototype._getRefreshRegion=function(){var e,t=this.get("refreshElements"),r=this.getViewRange();t.length&&t[0]===this?e=r:(e=l.getMergedRegion(t))&&(e.minX=Math.floor(e.minX),e.minY=Math.floor(e.minY),e.maxX=Math.ceil(e.maxX),e.maxY=Math.ceil(e.maxY),e.maxY+=1,this.get("clipView")&&(e=l.mergeView(e,r)));return e},t.prototype.refreshElement=function(e){this.get("refreshElements").push(e)},t.prototype._clearFrame=function(){var e=this.get("drawFrame");e&&(u.clearAnimationFrame(e),this.set("drawFrame",null),this.set("refreshElements",[]))},t.prototype.draw=function(){var e=this.get("drawFrame");this.get("autoDraw")&&e||this._startDraw()},t.prototype._drawAll=function(){var e=this.get("context"),t=this.get("el"),r=this.getChildren();e.clearRect(0,0,t.width,t.height),l.applyAttrsToContext(e,this),l.drawChildren(e,r),this.set("refreshElements",[])},t.prototype._drawRegion=function(){var e=this.get("context"),t=this.get("refreshElements"),r=this.getChildren(),n=this._getRefreshRegion();n?(e.clearRect(n.minX,n.minY,n.maxX-n.minX,n.maxY-n.minY),e.save(),e.beginPath(),e.rect(n.minX,n.minY,n.maxX-n.minX,n.maxY-n.minY),e.clip(),l.applyAttrsToContext(e,this),l.checkRefresh(this,r,n),l.drawChildren(e,r,n),e.restore()):t.length&&l.clearChanged(t),u.each(t,function(e){e.get("hasChanged")&&e.set("hasChanged",!1)}),this.set("refreshElements",[])},t.prototype._startDraw=function(){var e=this,t=this.get("drawFrame");t||(t=u.requestAnimationFrame(function(){e.get("localRefresh")?e._drawRegion():e._drawAll(),e.set("drawFrame",null)}),this.set("drawFrame",t))},t.prototype.skipDraw=function(){},t.prototype.removeDom=function(){var e=this.get("el");e.width=0,e.height=0,e.parentNode.removeChild(e)},t}(o.AbstractCanvas);t.default=c},19204:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(97582),o=r(6992),i=r(83901),a=r(61615),s=r(31834),u=r(96342),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.onCanvasChange=function(e){a.refreshElement(this,e)},t.prototype.getShapeBase=function(){return i},t.prototype.getGroupBase=function(){return t},t.prototype._applyClip=function(e,t){t&&(e.save(),a.applyAttrsToContext(e,t),t.createPath(e),e.restore(),e.clip(),t._afterDraw())},t.prototype.cacheCanvasBBox=function(){var e=this.cfg.children,t=[],r=[];s.each(e,function(e){var n=e.cfg.cacheCanvasBBox;n&&e.cfg.isInView&&(t.push(n.minX,n.maxX),r.push(n.minY,n.maxY))});var n=null;if(t.length){var o=s.min(t),i=s.max(t),a=s.min(r),l=s.max(r);n={minX:o,minY:a,x:o,y:a,maxX:i,maxY:l,width:i-o,height:l-a};var c=this.cfg.canvas;if(c){var f=c.getViewRange();this.set("isInView",u.intersectRect(n,f))}}else this.set("isInView",!1);this.set("cacheCanvasBBox",n)},t.prototype.draw=function(e,t){var r=this.cfg.children,n=!t||this.cfg.refresh;r.length&&n&&(e.save(),a.applyAttrsToContext(e,this),this._applyClip(e,this.getClip()),a.drawChildren(e,r,t),e.restore(),this.cacheCanvasBBox()),this.cfg.refresh=null,this.set("hasChanged",!1)},t.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("hasChanged",!1)},t}(o.AbstractGroup);t.default=l},15873:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.version=t.Shape=void 0;var n=r(97582),o=r(83901);t.Shape=o,n.__exportStar(r(6992),t);var i=r(99740);Object.defineProperty(t,"Canvas",{enumerable:!0,get:function(){return i.default}});var a=r(19204);Object.defineProperty(t,"Group",{enumerable:!0,get:function(){return a.default}});var s=r(16518);Object.defineProperty(t,"getArcParams",{enumerable:!0,get:function(){return s.default}}),t.version="0.5.12"},33839:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(97582),o=r(6992),i=r(96342),a=r(61615),s=r(6992),u=r(83901),l=r(19204),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return n.__assign(n.__assign({},t),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},t.prototype.getShapeBase=function(){return u},t.prototype.getGroupBase=function(){return l.default},t.prototype.onCanvasChange=function(e){a.refreshElement(this,e)},t.prototype.calculateBBox=function(){var e=this.get("type"),t=this.getHitLineWidth(),r=s.getBBoxMethod(e)(this),n=t/2,o=r.x-n,i=r.y-n,a=r.x+r.width+n,u=r.y+r.height+n;return{x:o,minX:o,y:i,minY:i,width:r.width+t,height:r.height+t,maxX:a,maxY:u}},t.prototype.isFill=function(){return!!this.attrs.fill||this.isClipShape()},t.prototype.isStroke=function(){return!!this.attrs.stroke},t.prototype._applyClip=function(e,t){t&&(e.save(),a.applyAttrsToContext(e,t),t.createPath(e),e.restore(),e.clip(),t._afterDraw())},t.prototype.draw=function(e,t){var r=this.cfg.clipShape;if(t){if(!1===this.cfg.refresh)return void this.set("hasChanged",!1);var n=this.getCanvasBBox();if(!i.intersectRect(t,n))return this.set("hasChanged",!1),void(this.cfg.isInView&&this._afterDraw())}e.save(),a.applyAttrsToContext(e,this),this._applyClip(e,r),this.drawPath(e),e.restore(),this._afterDraw()},t.prototype.getCanvasViewBox=function(){var e=this.cfg.canvas;return e?e.getViewRange():null},t.prototype.cacheCanvasBBox=function(){var e=this.getCanvasViewBox();if(e){var t=this.getCanvasBBox(),r=i.intersectRect(t,e);this.set("isInView",r),r?this.set("cacheCanvasBBox",t):this.set("cacheCanvasBBox",null)}},t.prototype._afterDraw=function(){this.cacheCanvasBBox(),this.set("hasChanged",!1),this.set("refresh",null)},t.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("isInView",null),this.set("hasChanged",!1)},t.prototype.drawPath=function(e){this.createPath(e),this.strokeAndFill(e),this.afterDrawPath(e)},t.prototype.fill=function(e){e.fill()},t.prototype.stroke=function(e){e.stroke()},t.prototype.strokeAndFill=function(e){var t=this.attrs,r=t.lineWidth,n=t.opacity,o=t.strokeOpacity,a=t.fillOpacity;this.isFill()&&(i.isNil(a)||1===a?this.fill(e):(e.globalAlpha=a,this.fill(e),e.globalAlpha=n)),this.isStroke()&&r>0&&(i.isNil(o)||1===o||(e.globalAlpha=o),this.stroke(e)),this.afterDrawPath(e)},t.prototype.createPath=function(e){},t.prototype.afterDrawPath=function(e){},t.prototype.isInShape=function(e,t){var r=this.isStroke(),n=this.isFill(),o=this.getHitLineWidth();return this.isInStrokeOrPath(e,t,r,n,o)},t.prototype.isInStrokeOrPath=function(e,t,r,n,o){return!1},t.prototype.getHitLineWidth=function(){if(!this.isStroke())return 0;var e=this.attrs;return e.lineWidth+e.lineAppendWidth},t}(o.AbstractShape);t.default=c},79725:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(97582),o=r(33839),i=r(96342),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return n.__assign(n.__assign({},t),{x:0,y:0,r:0})},t.prototype.isInStrokeOrPath=function(e,t,r,n,o){var a=this.attr(),s=a.x,u=a.y,l=a.r,c=o/2,f=i.distance(s,u,e,t);return n&&r?f<=l+c:n?f<=l:!!r&&(f>=l-c&&f<=l+c)},t.prototype.createPath=function(e){var t=this.attr(),r=t.x,n=t.y,o=t.r;e.beginPath(),e.arc(r,n,o,0,2*Math.PI,!1),e.closePath()},t}(o.default);t.default=a},39961:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(97582);function o(e,t,r,n){return e/(r*r)+t/(n*n)}var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return n.__assign(n.__assign({},t),{x:0,y:0,rx:0,ry:0})},t.prototype.isInStrokeOrPath=function(e,t,r,n,i){var a=this.attr(),s=i/2,u=a.x,l=a.y,c=a.rx,f=a.ry,h=(e-u)*(e-u),p=(t-l)*(t-l);return n&&r?o(h,p,c+s,f+s)<=1:n?o(h,p,c,f)<=1:!!r&&(o(h,p,c-s,f-s)>=1&&o(h,p,c+s,f+s)<=1)},t.prototype.createPath=function(e){var t=this.attr(),r=t.x,n=t.y,o=t.rx,i=t.ry;if(e.beginPath(),e.ellipse)e.ellipse(r,n,o,i,0,0,2*Math.PI,!1);else{var a=o>i?o:i,s=o>i?1:o/i,u=o>i?i/o:1;e.save(),e.translate(r,n),e.scale(s,u),e.arc(0,0,a,0,2*Math.PI),e.restore(),e.closePath()}},t}(r(33839).default);t.default=i},19267:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(97582),o=r(33839),i=r(96342);function a(e){return e instanceof HTMLElement&&i.isString(e.nodeName)&&"CANVAS"===e.nodeName.toUpperCase()}var s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return n.__assign(n.__assign({},t),{x:0,y:0,width:0,height:0})},t.prototype.initAttrs=function(e){this._setImage(e.img)},t.prototype.isStroke=function(){return!1},t.prototype.isOnlyHitBox=function(){return!0},t.prototype._afterLoading=function(){if(!0===this.get("toDraw")){var e=this.get("canvas");e?e.draw():this.createPath(this.get("context"))}},t.prototype._setImage=function(e){var t=this,r=this.attrs;if(i.isString(e)){var n=new Image;n.onload=function(){if(t.destroyed)return!1;t.attr("img",n),t.set("loading",!1),t._afterLoading();var e=t.get("callback");e&&e.call(t)},n.crossOrigin="Anonymous",n.src=e,this.set("loading",!0)}else e instanceof Image?(r.width||(r.width=e.width),r.height||(r.height=e.height)):a(e)&&(r.width||(r.width=Number(e.getAttribute("width"))),r.height||(r.height,Number(e.getAttribute("height"))))},t.prototype.onAttrChange=function(t,r,n){e.prototype.onAttrChange.call(this,t,r,n),"img"===t&&this._setImage(r)},t.prototype.createPath=function(e){if(this.get("loading"))return this.set("toDraw",!0),void this.set("context",e);var t=this.attr(),r=t.x,n=t.y,o=t.width,s=t.height,u=t.sx,l=t.sy,c=t.swidth,f=t.sheight,h=t.img;(h instanceof Image||a(h))&&(i.isNil(u)||i.isNil(l)||i.isNil(c)||i.isNil(f)?e.drawImage(h,r,n,o,s):e.drawImage(h,u,l,c,f,r,n,o,s))},t}(o.default);t.default=s},83901:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(33839);Object.defineProperty(t,"Base",{enumerable:!0,get:function(){return n.default}});var o=r(79725);Object.defineProperty(t,"Circle",{enumerable:!0,get:function(){return o.default}});var i=r(39961);Object.defineProperty(t,"Ellipse",{enumerable:!0,get:function(){return i.default}});var a=r(19267);Object.defineProperty(t,"Image",{enumerable:!0,get:function(){return a.default}});var s=r(30763);Object.defineProperty(t,"Line",{enumerable:!0,get:function(){return s.default}});var u=r(20904);Object.defineProperty(t,"Marker",{enumerable:!0,get:function(){return u.default}});var l=r(93091);Object.defineProperty(t,"Path",{enumerable:!0,get:function(){return l.default}});var c=r(9356);Object.defineProperty(t,"Polygon",{enumerable:!0,get:function(){return c.default}});var f=r(28854);Object.defineProperty(t,"Polyline",{enumerable:!0,get:function(){return f.default}});var h=r(33665);Object.defineProperty(t,"Rect",{enumerable:!0,get:function(){return h.default}});var p=r(78901);Object.defineProperty(t,"Text",{enumerable:!0,get:function(){return p.default}})},30763:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(97582),o=r(28524),i=r(33839),a=r(20187),s=r(57134),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return n.__assign(n.__assign({},t),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},t.prototype.initAttrs=function(e){this.setArrow()},t.prototype.onAttrChange=function(t,r,n){e.prototype.onAttrChange.call(this,t,r,n),this.setArrow()},t.prototype.setArrow=function(){var e=this.attr(),t=e.x1,r=e.y1,n=e.x2,o=e.y2,i=e.startArrow,a=e.endArrow;i&&s.addStartArrow(this,e,n,o,t,r),a&&s.addEndArrow(this,e,t,r,n,o)},t.prototype.isInStrokeOrPath=function(e,t,r,n,o){if(!r||!o)return!1;var i=this.attr(),s=i.x1,u=i.y1,l=i.x2,c=i.y2;return a.default(s,u,l,c,o,e,t)},t.prototype.createPath=function(e){var t=this.attr(),r=t.x1,n=t.y1,o=t.x2,i=t.y2,a=t.startArrow,u=t.endArrow,l={dx:0,dy:0},c={dx:0,dy:0};a&&a.d&&(l=s.getShortenOffset(r,n,o,i,t.startArrow.d)),u&&u.d&&(c=s.getShortenOffset(r,n,o,i,t.endArrow.d)),e.beginPath(),e.moveTo(r+l.dx,n+l.dy),e.lineTo(o-c.dx,i-c.dy)},t.prototype.afterDrawPath=function(e){var t=this.get("startArrowShape"),r=this.get("endArrowShape");t&&t.draw(e),r&&r.draw(e)},t.prototype.getTotalLength=function(){var e=this.attr(),t=e.x1,r=e.y1,n=e.x2,i=e.y2;return o.Line.length(t,r,n,i)},t.prototype.getPoint=function(e){var t=this.attr(),r=t.x1,n=t.y1,i=t.x2,a=t.y2;return o.Line.pointAt(r,n,i,a,e)},t}(i.default);t.default=u},20904:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(97582),o=r(31834),i=r(73920),a=r(33839),s=r(96342),u=r(61615),l={circle:function(e,t,r){return[["M",e-r,t],["A",r,r,0,1,0,e+r,t],["A",r,r,0,1,0,e-r,t]]},square:function(e,t,r){return[["M",e-r,t-r],["L",e+r,t-r],["L",e+r,t+r],["L",e-r,t+r],["Z"]]},diamond:function(e,t,r){return[["M",e-r,t],["L",e,t-r],["L",e+r,t],["L",e,t+r],["Z"]]},triangle:function(e,t,r){var n=r*Math.sin(1/3*Math.PI);return[["M",e-r,t+n],["L",e,t-n],["L",e+r,t+n],["Z"]]},"triangle-down":function(e,t,r){var n=r*Math.sin(1/3*Math.PI);return[["M",e-r,t-n],["L",e+r,t-n],["L",e,t+n],["Z"]]}},c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.initAttrs=function(e){this._resetParamsCache()},t.prototype._resetParamsCache=function(){this.set("paramsCache",{})},t.prototype.onAttrChange=function(t,r,n){e.prototype.onAttrChange.call(this,t,r,n),-1!==["symbol","x","y","r","radius"].indexOf(t)&&this._resetParamsCache()},t.prototype.isOnlyHitBox=function(){return!0},t.prototype._getR=function(e){return o.isNil(e.r)?e.radius:e.r},t.prototype._getPath=function(){var e,r,n=this.attr(),o=n.x,a=n.y,u=n.symbol||"circle",l=this._getR(n);if(s.isFunction(u))r=(e=u)(o,a,l),r=i.path2Absolute(r);else{if(!(e=t.Symbols[u]))return console.warn(u+" marker is not supported."),null;r=e(o,a,l)}return r},t.prototype.createPath=function(e){var t=this._getPath(),r=this.get("paramsCache");u.drawPath(this,e,{path:t},r)},t.Symbols=l,t}(a.default);t.default=c},93091:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(97582),o=r(28524),i=r(31834),a=r(33839),s=r(73920),u=r(61615),l=r(95474),c=r(96021),f=r(28064),h=r(57134);function p(e,t,r){for(var n=!1,o=0;o<e.length;o++){var i=e[o];if(n=c.default(i,t,r))break}return n}var d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return n.__assign(n.__assign({},t),{startArrow:!1,endArrow:!1})},t.prototype.initAttrs=function(e){this._setPathArr(e.path),this.setArrow()},t.prototype.onAttrChange=function(t,r,n){e.prototype.onAttrChange.call(this,t,r,n),"path"===t&&this._setPathArr(r),this.setArrow()},t.prototype._setPathArr=function(e){this.attrs.path=s.path2Absolute(e);var t=f.default.hasArc(e);this.set("hasArc",t),this.set("paramsCache",{}),this.set("segments",null),this.set("curve",null),this.set("tCache",null),this.set("totalLength",null)},t.prototype.getSegments=function(){var e=this.get("segements");return e||(e=s.path2Segments(this.attr("path")),this.set("segments",e)),e},t.prototype.setArrow=function(){var e=this.attr(),t=e.startArrow,r=e.endArrow;if(t){var n=this.getStartTangent();h.addStartArrow(this,e,n[0][0],n[0][1],n[1][0],n[1][1])}if(r){n=this.getEndTangent();h.addEndArrow(this,e,n[0][0],n[0][1],n[1][0],n[1][1])}},t.prototype.isInStrokeOrPath=function(e,t,r,n,o){var i=this.getSegments(),a=this.get("hasArc"),s=!1;if(r){var u=this.getTotalLength();s=f.default.isPointInStroke(i,o,e,t,u)}if(!s&&n)if(a)s=l.default(this,e,t);else{var c=this.attr("path"),h=f.default.extractPolygons(c);s=p(h.polygons,e,t)||p(h.polylines,e,t)}return s},t.prototype.createPath=function(e){var t=this.attr(),r=this.get("paramsCache");u.drawPath(this,e,t,r)},t.prototype.afterDrawPath=function(e){var t=this.get("startArrowShape"),r=this.get("endArrowShape");t&&t.draw(e),r&&r.draw(e)},t.prototype.getTotalLength=function(){var e=this.get("totalLength");return i.isNil(e)?(this._calculateCurve(),this._setTcache(),this.get("totalLength")):e},t.prototype.getPoint=function(e){var t,r,n=this.get("tCache");n||(this._calculateCurve(),this._setTcache(),n=this.get("tCache"));var a=this.get("curve");if(!n||0===n.length)return a?{x:a[0][1],y:a[0][2]}:null;i.each(n,function(n,o){e>=n[0]&&e<=n[1]&&(t=(e-n[0])/(n[1]-n[0]),r=o)});var s=a[r];if(i.isNil(s)||i.isNil(r))return null;var u=s.length,l=a[r+1];return o.Cubic.pointAt(s[u-2],s[u-1],l[1],l[2],l[3],l[4],l[5],l[6],t)},t.prototype._calculateCurve=function(){var e=this.attr().path;this.set("curve",f.default.pathToCurve(e))},t.prototype._setTcache=function(){var e,t,r,n,a=0,s=0,u=[],l=this.get("curve");l&&(i.each(l,function(e,t){r=l[t+1],n=e.length,r&&(a+=o.Cubic.length(e[n-2],e[n-1],r[1],r[2],r[3],r[4],r[5],r[6])||0)}),this.set("totalLength",a),0!==a?(i.each(l,function(i,c){r=l[c+1],n=i.length,r&&((e=[])[0]=s/a,t=o.Cubic.length(i[n-2],i[n-1],r[1],r[2],r[3],r[4],r[5],r[6]),s+=t||0,e[1]=s/a,u.push(e))}),this.set("tCache",u)):this.set("tCache",[]))},t.prototype.getStartTangent=function(){var e,t=this.getSegments();if(t.length>1){var r=t[0].currentPoint,n=t[1].currentPoint,o=t[1].startTangent;e=[],o?(e.push([r[0]-o[0],r[1]-o[1]]),e.push([r[0],r[1]])):(e.push([n[0],n[1]]),e.push([r[0],r[1]]))}return e},t.prototype.getEndTangent=function(){var e,t=this.getSegments(),r=t.length;if(r>1){var n=t[r-2].currentPoint,o=t[r-1].currentPoint,i=t[r-1].endTangent;e=[],i?(e.push([o[0]-i[0],o[1]-i[1]]),e.push([o[0],o[1]])):(e.push([n[0],n[1]]),e.push([o[0],o[1]]))}return e},t}(a.default);t.default=d},9356:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(97582),o=r(33839),i=r(99534),a=r(96021),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.isInStrokeOrPath=function(e,t,r,n,o){var s=this.attr().points,u=!1;return r&&(u=i.default(s,o,e,t,!0)),!u&&n&&(u=a.default(s,e,t)),u},t.prototype.createPath=function(e){var t=this.attr().points;if(!(t.length<2)){e.beginPath();for(var r=0;r<t.length;r++){var n=t[r];0===r?e.moveTo(n[0],n[1]):e.lineTo(n[0],n[1])}e.closePath()}},t}(o.default);t.default=s},28854:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(97582),o=r(28524),i=r(28524),a=r(31834),s=r(33839),u=r(99534),l=r(57134),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return n.__assign(n.__assign({},t),{startArrow:!1,endArrow:!1})},t.prototype.initAttrs=function(e){this.setArrow()},t.prototype.onAttrChange=function(t,r,n){e.prototype.onAttrChange.call(this,t,r,n),this.setArrow(),-1!==["points"].indexOf(t)&&this._resetCache()},t.prototype._resetCache=function(){this.set("totalLength",null),this.set("tCache",null)},t.prototype.setArrow=function(){var e=this.attr(),t=this.attrs,r=t.points,n=t.startArrow,o=t.endArrow,i=r.length,a=r[0][0],s=r[0][1],u=r[i-1][0],c=r[i-1][1];n&&l.addStartArrow(this,e,r[1][0],r[1][1],a,s),o&&l.addEndArrow(this,e,r[i-2][0],r[i-2][1],u,c)},t.prototype.isFill=function(){return!1},t.prototype.isInStrokeOrPath=function(e,t,r,n,o){if(!r||!o)return!1;var i=this.attr().points;return u.default(i,o,e,t,!1)},t.prototype.isStroke=function(){return!0},t.prototype.createPath=function(e){var t=this.attr(),r=t.points,n=t.startArrow,o=t.endArrow,i=r.length;if(!(r.length<2)){var a,s=r[0][0],u=r[0][1],c=r[i-1][0],f=r[i-1][1];if(n&&n.d)s+=(a=l.getShortenOffset(s,u,r[1][0],r[1][1],n.d)).dx,u+=a.dy;if(o&&o.d)c-=(a=l.getShortenOffset(r[i-2][0],r[i-2][1],c,f,o.d)).dx,f-=a.dy;e.beginPath(),e.moveTo(s,u);for(var h=0;h<i-1;h++){var p=r[h];e.lineTo(p[0],p[1])}e.lineTo(c,f)}},t.prototype.afterDrawPath=function(e){var t=this.get("startArrowShape"),r=this.get("endArrowShape");t&&t.draw(e),r&&r.draw(e)},t.prototype.getTotalLength=function(){var e=this.attr().points,t=this.get("totalLength");return a.isNil(t)?(this.set("totalLength",i.Polyline.length(e)),this.get("totalLength")):t},t.prototype.getPoint=function(e){var t,r,n=this.attr().points,i=this.get("tCache");return i||(this._setTcache(),i=this.get("tCache")),a.each(i,function(n,o){e>=n[0]&&e<=n[1]&&(t=(e-n[0])/(n[1]-n[0]),r=o)}),o.Line.pointAt(n[r][0],n[r][1],n[r+1][0],n[r+1][1],t)},t.prototype._setTcache=function(){var e=this.attr().points;if(e&&0!==e.length){var t=this.getTotalLength();if(!(t<=0)){var r,n,i=0,s=[];a.each(e,function(a,u){e[u+1]&&((r=[])[0]=i/t,n=o.Line.length(a[0],a[1],e[u+1][0],e[u+1][1]),i+=n,r[1]=i/t,s.push(r))}),this.set("tCache",s)}}},t.prototype.getStartTangent=function(){var e=this.attr().points,t=[];return t.push([e[1][0],e[1][1]]),t.push([e[0][0],e[0][1]]),t},t.prototype.getEndTangent=function(){var e=this.attr().points,t=e.length-1,r=[];return r.push([e[t-1][0],e[t-1][1]]),r.push([e[t][0],e[t][1]]),r},t}(s.default);t.default=c},33665:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(97582),o=r(33839),i=r(23645),a=r(96342),s=r(56270),u=r(73742),l=r(95474),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return n.__assign(n.__assign({},t),{x:0,y:0,width:0,height:0,radius:0})},t.prototype.isInStrokeOrPath=function(e,t,r,n,o){var i=this.attr(),c=i.x,f=i.y,h=i.width,p=i.height,d=i.radius;if(d){var y=!1;return r&&(y=u.default(c,f,h,p,d,o,e,t)),!y&&n&&(y=l.default(this,e,t)),y}var v=o/2;return n&&r?a.inBox(c-v,f-v,h+v,p+v,e,t):n?a.inBox(c,f,h,p,e,t):r?s.default(c,f,h,p,o,e,t):void 0},t.prototype.createPath=function(e){var t=this.attr(),r=t.x,n=t.y,o=t.width,a=t.height,s=t.radius;if(e.beginPath(),0===s)e.rect(r,n,o,a);else{var u=i.parseRadius(s),l=u[0],c=u[1],f=u[2],h=u[3];e.moveTo(r+l,n),e.lineTo(r+o-c,n),0!==c&&e.arc(r+o-c,n+c,c,-Math.PI/2,0),e.lineTo(r+o,n+a-f),0!==f&&e.arc(r+o-f,n+a-f,f,0,Math.PI/2),e.lineTo(r+h,n+a),0!==h&&e.arc(r+h,n+a-h,h,Math.PI/2,Math.PI),e.lineTo(r,n+l),0!==l&&e.arc(r+l,n+l,l,Math.PI,1.5*Math.PI),e.closePath()}},t}(o.default);t.default=c},78901:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(97582),o=r(33839),i=r(96342),a=r(6992),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return n.__assign(n.__assign({},t),{x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"})},t.prototype.isOnlyHitBox=function(){return!0},t.prototype.initAttrs=function(e){this._assembleFont(),e.text&&this._setText(e.text)},t.prototype._assembleFont=function(){var e=this.attrs;e.font=a.assembleFont(e)},t.prototype._setText=function(e){var t=null;i.isString(e)&&-1!==e.indexOf("\n")&&(t=e.split("\n")),this.set("textArr",t)},t.prototype.onAttrChange=function(t,r,n){e.prototype.onAttrChange.call(this,t,r,n),t.startsWith("font")&&this._assembleFont(),"text"===t&&this._setText(r)},t.prototype._getSpaceingY=function(){var e=this.attrs,t=e.lineHeight,r=1*e.fontSize;return t?t-r:.14*r},t.prototype._drawTextArr=function(e,t,r){var n,o=this.attrs,s=o.textBaseline,u=o.x,l=o.y,c=1*o.fontSize,f=this._getSpaceingY(),h=a.getTextHeight(o.text,o.fontSize,o.lineHeight);i.each(t,function(t,o){n=l+o*(f+c)-h+c,"middle"===s&&(n+=h-c-(h-c)/2),"top"===s&&(n+=h-c),i.isNil(t)||(r?e.fillText(t,u,n):e.strokeText(t,u,n))})},t.prototype._drawText=function(e,t){var r=this.attr(),n=r.x,o=r.y,a=this.get("textArr");if(a)this._drawTextArr(e,a,t);else{var s=r.text;i.isNil(s)||(t?e.fillText(s,n,o):e.strokeText(s,n,o))}},t.prototype.strokeAndFill=function(e){var t=this.attrs,r=t.lineWidth,n=t.opacity,o=t.strokeOpacity,a=t.fillOpacity;this.isStroke()&&r>0&&(i.isNil(o)||1===o||(e.globalAlpha=n),this.stroke(e)),this.isFill()&&(i.isNil(a)||1===a?this.fill(e):(e.globalAlpha=a,this.fill(e),e.globalAlpha=n)),this.afterDrawPath(e)},t.prototype.fill=function(e){this._drawText(e,!0)},t.prototype.stroke=function(e){this._drawText(e,!1)},t}(o.default);t.default=s},16518:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(96342);function o(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function i(e,t){return o(e)*o(t)?(e[0]*t[0]+e[1]*t[1])/(o(e)*o(t)):1}function a(e,t){return(e[0]*t[1]<e[1]*t[0]?-1:1)*Math.acos(i(e,t))}t.default=function(e,t){var r=t[1],o=t[2],s=n.mod(n.toRadian(t[3]),2*Math.PI),u=t[4],l=t[5],c=e[0],f=e[1],h=t[6],p=t[7],d=Math.cos(s)*(c-h)/2+Math.sin(s)*(f-p)/2,y=-1*Math.sin(s)*(c-h)/2+Math.cos(s)*(f-p)/2,v=d*d/(r*r)+y*y/(o*o);v>1&&(r*=Math.sqrt(v),o*=Math.sqrt(v));var g=r*r*(y*y)+o*o*(d*d),m=g?Math.sqrt((r*r*(o*o)-g)/g):1;u===l&&(m*=-1),isNaN(m)&&(m=0);var b=o?m*r*y/o:0,w=r?m*-o*d/r:0,_=(c+h)/2+Math.cos(s)*b-Math.sin(s)*w,x=(f+p)/2+Math.sin(s)*b+Math.cos(s)*w,S=[(d-b)/r,(y-w)/o],O=[(-1*d-b)/r,(-1*y-w)/o],P=a([1,0],S),E=a(S,O);return i(S,O)<=-1&&(E=Math.PI),i(S,O)>=1&&(E=0),0===l&&E>0&&(E-=2*Math.PI),1===l&&E<0&&(E+=2*Math.PI),{cx:_,cy:x,rx:n.isSamePoint(e,[h,p])?0:r,ry:n.isSamePoint(e,[h,p])?0:o,startAngle:P,endAngle:P+E,xRotation:s,arcFlag:u,sweepFlag:l}}},57134:function(e,t,r){"use strict";function n(e){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.addEndArrow=t.addStartArrow=t.getShortenOffset=void 0;var o=r(97582),i=r(83901),a=Math.sin,s=Math.cos,u=Math.atan2,l=Math.PI;function c(e,t,r,n,o,c,f){var h=t.stroke,p=t.lineWidth,d=u(n-c,r-o),y=new i.Path({type:"path",canvas:e.get("canvas"),isArrowShape:!0,attrs:{path:"M"+10*s(l/6)+","+10*a(l/6)+" L0,0 L"+10*s(l/6)+",-"+10*a(l/6),stroke:h,lineWidth:p}});y.translate(o,c),y.rotateAtPoint(o,c,d),e.set(f?"startArrowShape":"endArrowShape",y)}function f(e,t,r,n,l,c,f){var h=t.startArrow,p=t.endArrow,d=t.stroke,y=t.lineWidth,v=f?h:p,g=v.d,m=v.fill,b=v.stroke,w=v.lineWidth,_=o.__rest(v,["d","fill","stroke","lineWidth"]),x=u(n-c,r-l);g&&(l-=s(x)*g,c-=a(x)*g);var S=new i.Path({type:"path",canvas:e.get("canvas"),isArrowShape:!0,attrs:o.__assign(o.__assign({},_),{stroke:b||d,lineWidth:w||y,fill:m})});S.translate(l,c),S.rotateAtPoint(l,c,x),e.set(f?"startArrowShape":"endArrowShape",S)}t.getShortenOffset=function(e,t,r,n,o){var i=u(n-t,r-e);return{dx:s(i)*o,dy:a(i)*o}},t.addStartArrow=function(e,t,r,o,i,a){"object"===n(t.startArrow)?f(e,t,r,o,i,a,!0):t.startArrow?c(e,t,r,o,i,a,!0):e.set("startArrowShape",null)},t.addEndArrow=function(e,t,r,o,i,a){"object"===n(t.endArrow)?f(e,t,r,o,i,a,!1):t.endArrow?c(e,t,r,o,i,a,!1):e.set("startArrowShape",null)}},61615:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mergeView=t.getMergedRegion=t.getRefreshRegion=t.refreshElement=t.drawPath=t.clearChanged=t.checkChildrenRefresh=t.checkRefresh=t.drawChildren=t.applyAttrsToContext=void 0;var n=r(31834),o=r(23645),i=r(16518),a=r(96342),s=r(57134),u={fill:"fillStyle",stroke:"strokeStyle",opacity:"globalAlpha"};function l(e,t){for(var r=0;r<e.length;r++){var n=e[r];if(n.cfg.visible)if(n.cfg.hasChanged)n.cfg.refresh=!0,n.isGroup()&&c(n.cfg.children,t);else if(n.cfg.refresh)n.isGroup()&&l(n.cfg.children,t);else{var o=f(n,t);n.cfg.refresh=o,o&&n.isGroup()&&l(n.cfg.children,t)}}}function c(e,t){for(var r=0;r<e.length;r++){var n=e[r];n.cfg.visible&&(n.cfg.refresh=!0,n.isGroup()&&c(n.get("children"),t))}}function f(e,t){var r=e.cfg.cacheCanvasBBox;return e.cfg.isInView&&r&&a.intersectRect(r,t)}function h(e){var t;if(e.destroyed)t=e._cacheCanvasBBox;else{var r=e.get("cacheCanvasBBox"),n=r&&!(!r.width||!r.height),o=e.getCanvasBBox(),i=o&&!(!o.width||!o.height);n&&i?t=a.mergeRegion(r,o):n?t=r:i&&(t=o)}return t}t.applyAttrsToContext=function(e,t){var r=t.attr();for(var i in r){var a=r[i],s=u[i]?u[i]:i;"matrix"===s&&a?e.transform(a[0],a[1],a[3],a[4],a[6],a[7]):"lineDash"===s&&e.setLineDash?n.isArray(a)&&e.setLineDash(a):("strokeStyle"===s||"fillStyle"===s?a=o.parseStyle(e,t,a):"globalAlpha"===s&&(a*=e.globalAlpha),e[s]=a)}},t.drawChildren=function(e,t,r){for(var n=0;n<t.length;n++){var o=t[n];o.cfg.visible?o.draw(e,r):o.skipDraw()}},t.checkRefresh=function(e,t,r){var o=e.get("refreshElements");n.each(o,function(t){if(t!==e)for(var r=t.cfg.parent;r&&r!==e&&!r.cfg.refresh;)r.cfg.refresh=!0,r=r.cfg.parent}),o[0]===e?c(t,r):l(t,r)},t.checkChildrenRefresh=l,t.clearChanged=function e(t){for(var r=0;r<t.length;r++){var n=t[r];n.cfg.hasChanged=!1,n.isGroup()&&!n.destroyed&&e(n.cfg.children)}},t.drawPath=function(e,t,r,n){var o=r.path,a=r.startArrow,u=r.endArrow;if(o){var l=[0,0],c=[0,0],f={dx:0,dy:0};t.beginPath();for(var h=0;h<o.length;h++){var p=o[h],d=p[0];if(0===h&&a&&a.d){var y=e.getStartTangent();f=s.getShortenOffset(y[0][0],y[0][1],y[1][0],y[1][1],a.d)}else h===o.length-2&&"Z"===o[h+1][0]&&u&&u.d?"Z"===o[h+1][0]&&(y=e.getEndTangent(),f=s.getShortenOffset(y[0][0],y[0][1],y[1][0],y[1][1],u.d)):h===o.length-1&&u&&u.d&&"Z"!==o[0]&&(y=e.getEndTangent(),f=s.getShortenOffset(y[0][0],y[0][1],y[1][0],y[1][1],u.d));var v=f.dx,g=f.dy;switch(d){case"M":t.moveTo(p[1]-v,p[2]-g),c=[p[1],p[2]];break;case"L":t.lineTo(p[1]-v,p[2]-g);break;case"Q":t.quadraticCurveTo(p[1],p[2],p[3]-v,p[4]-g);break;case"C":t.bezierCurveTo(p[1],p[2],p[3],p[4],p[5]-v,p[6]-g);break;case"A":var m=void 0;n?(m=n[h])||(m=i.default(l,p),n[h]=m):m=i.default(l,p);var b=m.cx,w=m.cy,_=m.rx,x=m.ry,S=m.startAngle,O=m.endAngle,P=m.xRotation,E=m.sweepFlag;if(t.ellipse)t.ellipse(b,w,_,x,P,S,O,1-E);else{var k=_>x?_:x,M=_>x?1:_/x,C=_>x?x/_:1;t.translate(b,w),t.rotate(P),t.scale(M,C),t.arc(0,0,k,S,O,1-E),t.scale(1/M,1/C),t.rotate(-P),t.translate(-b,-w)}break;case"Z":t.closePath()}if("Z"===d)l=c;else{var j=p.length;l=[p[j-2],p[j-1]]}}}},t.refreshElement=function(e,t){var r=e.get("canvas");r&&("remove"===t&&(e._cacheCanvasBBox=e.get("cacheCanvasBBox")),e.get("hasChanged")||(e.set("hasChanged",!0),e.cfg.parent&&e.cfg.parent.get("hasChanged")||(r.refreshElement(e,t,r),r.get("autoDraw")&&r.draw())))},t.getRefreshRegion=h,t.getMergedRegion=function(e){if(!e.length)return null;var t=[],r=[],o=[],i=[];return n.each(e,function(e){var n=h(e);n&&(t.push(n.minX),r.push(n.minY),o.push(n.maxX),i.push(n.maxY))}),{minX:n.min(t),minY:n.min(r),maxX:n.max(o),maxY:n.max(i)}},t.mergeView=function(e,t){return e&&t&&a.intersectRect(e,t)?{minX:Math.max(e.minX,t.minX),minY:Math.max(e.minY,t.minY),maxX:Math.min(e.maxX,t.maxX),maxY:Math.min(e.maxY,t.maxY)}:null}},97193:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getShape=void 0;var n=r(6992);function o(e,t,r){var o=e.getTotalMatrix();if(o){var i=function(e,t){if(t){var r=n.invert(t);return n.multiplyVec2(r,e)}return e}([t,r,1],o);return[i[0],i[1]]}return[t,r]}function i(e,t,r){if(e.isCanvas&&e.isCanvas())return!0;if(!n.isAllowCapture(e)||!1===e.cfg.isInView)return!1;if(e.cfg.clipShape){var i=o(e,t,r),a=i[0],s=i[1];if(e.isClipped(a,s))return!1}var u=e.cfg.cacheCanvasBBox||e.getCanvasBBox();return t>=u.minX&&t<=u.maxX&&r>=u.minY&&r<=u.maxY}t.getShape=function e(t,r,n){if(!i(t,r,n))return null;for(var a=null,s=t.getChildren(),u=s.length-1;u>=0;u--){var l=s[u];if(l.isGroup())a=e(l,r,n);else if(i(l,r,n)){var c=l,f=o(l,r,n),h=f[0],p=f[1];c.isInShape(h,p)&&(a=l)}if(a)break}return a}},95474:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(6992);t.default=function(e,t,r){var o=n.getOffScreenContext();return e.createPath(o),o.isPointInPath(t,r)}},96021:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=1e-6;function n(e){return Math.abs(e)<r?0:e<0?-1:1}function o(e,t,r){return(r[0]-e[0])*(t[1]-e[1])==(t[0]-e[0])*(r[1]-e[1])&&Math.min(e[0],t[0])<=r[0]&&r[0]<=Math.max(e[0],t[0])&&Math.min(e[1],t[1])<=r[1]&&r[1]<=Math.max(e[1],t[1])}t.default=function(e,t,r){var i=!1,a=e.length;if(a<=2)return!1;for(var s=0;s<a;s++){var u=e[s],l=e[(s+1)%a];if(o(u,l,[t,r]))return!0;n(u[1]-r)>0!=n(l[1]-r)>0&&n(t-(r-u[1])*(u[0]-l[0])/(u[1]-l[1])-u[0])<0&&(i=!i)}return i}},30859:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(96342);t.default=function(e,t,r,o,i,a,s,u){var l=(Math.atan2(u-t,s-e)+2*Math.PI)%(2*Math.PI);if(l<o||l>i)return!1;var c={x:e+r*Math.cos(l),y:t+r*Math.sin(l)};return n.distance(c.x,c.y,s,u)<=a/2}},20187:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(28524);t.default=function(e,t,r,o,i,a,s){var u=Math.min(e,r),l=Math.max(e,r),c=Math.min(t,o),f=Math.max(t,o),h=i/2;return a>=u-h&&a<=l+h&&s>=c-h&&s<=f+h&&n.Line.pointToLine(e,t,r,o,a,s)<=i/2}},99534:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(20187);t.default=function(e,t,r,o,i){var a=e.length;if(a<2)return!1;for(var s=0;s<a-1;s++){var u=e[s][0],l=e[s][1],c=e[s+1][0],f=e[s+1][1];if(n.default(u,l,c,f,t,r,o))return!0}if(i){var h=e[0],p=e[a-1];if(n.default(h[0],h[1],p[0],p[1],t,r,o))return!0}return!1}},73742:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(20187),o=r(30859);t.default=function(e,t,r,i,a,s,u,l){return n.default(e+a,t,e+r-a,t,s,u,l)||n.default(e+r,t+a,e+r,t+i-a,s,u,l)||n.default(e+r-a,t+i,e+a,t+i,s,u,l)||n.default(e,t+i-a,e,t+a,s,u,l)||o.default(e+r-a,t+a,a,1.5*Math.PI,2*Math.PI,s,u,l)||o.default(e+r-a,t+i-a,a,0,.5*Math.PI,s,u,l)||o.default(e+a,t+i-a,a,.5*Math.PI,Math.PI,s,u,l)||o.default(e+a,t+a,a,Math.PI,1.5*Math.PI,s,u,l)}},56270:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(96342);t.default=function(e,t,r,o,i,a,s){var u=i/2;return n.inBox(e-u,t-u,r,i,a,s)||n.inBox(e+r-u,t-u,i,o,a,s)||n.inBox(e+u,t+o-u,r,i,a,s)||n.inBox(e-u,t+u,i,o,a,s)}},23645:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseRadius=t.parseStyle=t.parsePattern=t.parseRadialGradient=t.parseLineGradient=void 0;var n=r(96342),o=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,i=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,a=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,s=/[\d.]+:(#[^\s]+|[^\)]+\))/gi;function u(e,t){var r=e.match(s);n.each(r,function(e){var r=e.split(":");t.addColorStop(r[0],r[1])})}function l(e,t,r){var n,i,a=o.exec(r),s=parseFloat(a[1])%360*(Math.PI/180),l=a[2],c=t.getBBox();s>=0&&s<.5*Math.PI?(n={x:c.minX,y:c.minY},i={x:c.maxX,y:c.maxY}):.5*Math.PI<=s&&s<Math.PI?(n={x:c.maxX,y:c.minY},i={x:c.minX,y:c.maxY}):Math.PI<=s&&s<1.5*Math.PI?(n={x:c.maxX,y:c.maxY},i={x:c.minX,y:c.minY}):(n={x:c.minX,y:c.maxY},i={x:c.maxX,y:c.minY});var f=Math.tan(s),h=f*f,p=(i.x-n.x+f*(i.y-n.y))/(h+1)+n.x,d=f*(i.x-n.x+f*(i.y-n.y))/(h+1)+n.y,y=e.createLinearGradient(n.x,n.y,p,d);return u(l,y),y}function c(e,t,r){var n=i.exec(r),o=parseFloat(n[1]),a=parseFloat(n[2]),l=parseFloat(n[3]),c=n[4];if(0===l){var f=c.match(s);return f[f.length-1].split(":")[1]}var h=t.getBBox(),p=h.maxX-h.minX,d=h.maxY-h.minY,y=Math.sqrt(p*p+d*d)/2,v=e.createRadialGradient(h.minX+p*o,h.minY+d*a,0,h.minX+p/2,h.minY+d/2,l*y);return u(c,v),v}function f(e,t,r){if(t.get("patternSource")&&t.get("patternSource")===r)return t.get("pattern");var n,o,i=a.exec(r),s=i[1],u=i[2];function l(){n=e.createPattern(o,s),t.set("pattern",n),t.set("patternSource",r)}switch(s){case"a":s="repeat";break;case"x":s="repeat-x";break;case"y":s="repeat-y";break;case"n":s="no-repeat";break;default:s="no-repeat"}return o=new Image,u.match(/^data:/i)||(o.crossOrigin="Anonymous"),o.src=u,o.complete?l():(o.onload=l,o.src=o.src),n}t.parseLineGradient=l,t.parseRadialGradient=c,t.parsePattern=f,t.parseStyle=function(e,t,r){var o=t.getBBox();if(isNaN(o.x)||isNaN(o.y)||isNaN(o.width)||isNaN(o.height))return r;if(n.isString(r)){if("("===r[1]||"("===r[2]){if("l"===r[0])return l(e,t,r);if("r"===r[0])return c(e,t,r);if("p"===r[0])return f(e,t,r)}return r}return r instanceof CanvasPattern?r:void 0},t.parseRadius=function(e){var t=0,r=0,o=0,i=0;return n.isArray(e)?1===e.length?t=r=o=i=e[0]:2===e.length?(t=o=e[0],r=i=e[1]):3===e.length?(t=e[0],r=i=e[1],o=e[2]):(t=e[0],r=e[1],o=e[2],i=e[3]):t=r=o=i=e,[t,r,o,i]}},28064:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(97582),o=r(6992),i=r(28524),a=r(28524),s=r(43708),u=r(7157),l=r(96342),c=r(20187),f=r(30859),h=s.ext.transform;t.default=n.__assign({hasArc:function(e){for(var t=!1,r=e.length,n=0;n<r;n++){var o=e[n][0];if("C"===o||"A"===o||"Q"===o){t=!0;break}}return t},extractPolygons:function(e){for(var t=e.length,r=[],n=[],o=[],i=0;i<t;i++){var a=e[i],s=a[0];"M"===s?(o.length&&(n.push(o),o=[]),o.push([a[1],a[2]])):"Z"===s?o.length&&(r.push(o),o=[]):o.push([a[1],a[2]])}return o.length>0&&n.push(o),{polygons:r,polylines:n}},isPointInStroke:function(e,t,r,n,o){for(var s=!1,p=t/2,d=0;d<e.length;d++){var y=e[d],v=y.currentPoint,g=y.params,m=y.prePoint,b=y.box;if(!b||l.inBox(b.x-p,b.y-p,b.width+t,b.height+t,r,n)){switch(y.command){case"L":case"Z":s=c.default(m[0],m[1],v[0],v[1],t,r,n);break;case"Q":s=i.Quad.pointDistance(m[0],m[1],g[1],g[2],g[3],g[4],r,n)<=t/2;break;case"C":s=a.Cubic.pointDistance(m[0],m[1],g[1],g[2],g[3],g[4],g[5],g[6],r,n,o)<=t/2;break;case"A":var w=y.arcParams,_=w.cx,x=w.cy,S=w.rx,O=w.ry,P=w.startAngle,E=w.endAngle,k=w.xRotation,M=[r,n,1],C=S>O?S:O,j=h(null,[["t",-_,-x],["r",-k],["s",1/(S>O?1:S/O),1/(S>O?O/S:1)]]);u.transformMat3(M,M,j),s=f.default(0,0,C,P,E,t,M[0],M[1])}if(s)break}}return s}},o.PathUtil)},96342:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isSamePoint=t.mergeRegion=t.intersectRect=t.inBox=t.distance=t.getPixelRatio=void 0,t.getPixelRatio=function(){return window?window.devicePixelRatio:1},t.distance=function(e,t,r,n){var o=e-r,i=t-n;return Math.sqrt(o*o+i*i)},t.inBox=function(e,t,r,n,o,i){return o>=e&&o<=e+r&&i>=t&&i<=t+n},t.intersectRect=function(e,t){return!(t.minX>e.maxX||t.maxX<e.minX||t.minY>e.maxY||t.maxY<e.minY)},t.mergeRegion=function(e,t){return e&&t?{minX:Math.min(e.minX,t.minX),minY:Math.min(e.minY,t.minY),maxX:Math.max(e.maxX,t.maxX),maxY:Math.max(e.maxY,t.maxY)}:e||t},t.isSamePoint=function(e,t){return e[0]===t[0]&&e[1]===t[1]};var n=r(31834);Object.defineProperty(t,"isNil",{enumerable:!0,get:function(){return n.isNil}}),Object.defineProperty(t,"isString",{enumerable:!0,get:function(){return n.isString}}),Object.defineProperty(t,"isFunction",{enumerable:!0,get:function(){return n.isFunction}}),Object.defineProperty(t,"isArray",{enumerable:!0,get:function(){return n.isArray}}),Object.defineProperty(t,"each",{enumerable:!0,get:function(){return n.each}}),Object.defineProperty(t,"toRadian",{enumerable:!0,get:function(){return n.toRadian}}),Object.defineProperty(t,"mod",{enumerable:!0,get:function(){return n.mod}}),Object.defineProperty(t,"isNumberEqual",{enumerable:!0,get:function(){return n.isNumberEqual}}),Object.defineProperty(t,"requestAnimationFrame",{enumerable:!0,get:function(){return n.requestAnimationFrame}}),Object.defineProperty(t,"clearAnimationFrame",{enumerable:!0,get:function(){return n.clearAnimationFrame}})},92535:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(32996),o=r(86408);function i(e,t,r,n,o,i){return r*Math.cos(o)*Math.cos(i)-n*Math.sin(o)*Math.sin(i)+e}function a(e,t,r,n,o,i){return r*Math.sin(o)*Math.cos(i)+n*Math.cos(o)*Math.sin(i)+t}function s(e,t,r){return{x:e*Math.cos(r),y:t*Math.sin(r)}}function u(e,t,r){var n=Math.cos(r),o=Math.sin(r);return[e*n-t*o,e*o+t*n]}t.default={box:function(e,t,r,n,o,s,u){for(var l=function(e,t,r){return Math.atan(-t/e*Math.tan(r))}(r,n,o),c=1/0,f=-1/0,h=[s,u],p=2*-Math.PI;p<=2*Math.PI;p+=Math.PI){var d=l+p;s<u?s<d&&d<u&&h.push(d):u<d&&d<s&&h.push(d)}for(p=0;p<h.length;p++){var y=i(e,0,r,n,o,h[p]);y<c&&(c=y),y>f&&(f=y)}var v=function(e,t,r){return Math.atan(t/(e*Math.tan(r)))}(r,n,o),g=1/0,m=-1/0,b=[s,u];for(p=2*-Math.PI;p<=2*Math.PI;p+=Math.PI){var w=v+p;s<u?s<w&&w<u&&b.push(w):u<w&&w<s&&b.push(w)}for(p=0;p<b.length;p++){var _=a(0,t,r,n,o,b[p]);_<g&&(g=_),_>m&&(m=_)}return{x:c,y:g,width:f-c,height:m-g}},length:function(e,t,r,n,o,i,a){},nearestPoint:function(e,t,r,n,i,a,l,c,f){var h=u(c-e,f-t,-i),p=h[0],d=h[1],y=o.default.nearestPoint(0,0,r,n,p,d),v=function(e,t,r,n){return(Math.atan2(n*e,r*t)+2*Math.PI)%(2*Math.PI)}(r,n,y.x,y.y);v<a?y=s(r,n,a):v>l&&(y=s(r,n,l));var g=u(y.x,y.y,i);return{x:g[0]+e,y:g[1]+t}},pointDistance:function(e,t,r,o,i,a,s,u,l){var c=this.nearestPoint(e,t,r,o,u,l);return n.distance(c.x,c.y,u,l)},pointAt:function(e,t,r,n,o,s,u,l){var c=(u-s)*l+s;return{x:i(e,0,r,n,o,c),y:a(0,t,r,n,o,c)}},tangentAngle:function(e,t,r,o,i,a,s,u){var l=(s-a)*u+a,c=function(e,t,r,n,o,i,a,s){return-1*r*Math.cos(o)*Math.sin(s)-n*Math.sin(o)*Math.cos(s)}(0,0,r,o,i,0,0,l),f=function(e,t,r,n,o,i,a,s){return-1*r*Math.sin(o)*Math.sin(s)+n*Math.cos(o)*Math.cos(s)}(0,0,r,o,i,0,0,l);return n.piMod(Math.atan2(f,c))}}},23919:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.snapLength=t.nearestPoint=void 0;var n=r(32996),o=1e-4;t.nearestPoint=function(e,t,r,i,a,s){var u,l=1/0,c=[r,i],f=20;s&&s>200&&(f=s/10);for(var h=1/f,p=h/10,d=0;d<=f;d++){var y=d*h,v=[a.apply(null,e.concat([y])),a.apply(null,t.concat([y]))];(w=n.distance(c[0],c[1],v[0],v[1]))<l&&(u=y,l=w)}if(0===u)return{x:e[0],y:t[0]};if(1===u){var g=e.length;return{x:e[g-1],y:t[g-1]}}for(l=1/0,d=0;d<32&&!(p<o);d++){var m=u-p,b=u+p,w=(v=[a.apply(null,e.concat([m])),a.apply(null,t.concat([m]))],n.distance(c[0],c[1],v[0],v[1]));if(m>=0&&w<l)u=m,l=w;else{var _=[a.apply(null,e.concat([b])),a.apply(null,t.concat([b]))],x=n.distance(c[0],c[1],_[0],_[1]);b<=1&&x<l?(u=b,l=x):p*=.5}}return{x:a.apply(null,e.concat([u])),y:a.apply(null,t.concat([u]))}},t.snapLength=function(e,t){for(var r=0,o=e.length,i=0;i<o;i++){var a=e[i],s=t[i],u=e[(i+1)%o],l=t[(i+1)%o];r+=n.distance(a,s,u,l)}return r/2}},84206:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(32996),o=r(27989),i=r(23919);function a(e,t,r,n,o){var i=1-o;return i*i*i*e+3*t*o*i*i+3*r*o*o*i+n*o*o*o}function s(e,t,r,n,o){var i=1-o;return 3*(i*i*(t-e)+2*i*o*(r-t)+o*o*(n-r))}function u(e,t,r,o){var i,a,s,u=-3*e+9*t-9*r+3*o,l=6*e-12*t+6*r,c=3*t-3*e,f=[];if(n.isNumberEqual(u,0))n.isNumberEqual(l,0)||(i=-c/l)>=0&&i<=1&&f.push(i);else{var h=l*l-4*u*c;n.isNumberEqual(h,0)?f.push(-l/(2*u)):h>0&&(a=(-l-(s=Math.sqrt(h)))/(2*u),(i=(-l+s)/(2*u))>=0&&i<=1&&f.push(i),a>=0&&a<=1&&f.push(a))}return f}function l(e,t,r,n,i,s,u,l,c){var f=a(e,r,i,u,c),h=a(t,n,s,l,c),p=o.default.pointAt(e,t,r,n,c),d=o.default.pointAt(r,n,i,s,c),y=o.default.pointAt(i,s,u,l,c),v=o.default.pointAt(p.x,p.y,d.x,d.y,c),g=o.default.pointAt(d.x,d.y,y.x,y.y,c);return[[e,t,p.x,p.y,v.x,v.y,f,h],[f,h,g.x,g.y,y.x,y.y,u,l]]}t.default={extrema:u,box:function(e,t,r,o,i,s,l,c){for(var f=[e,l],h=[t,c],p=u(e,r,i,l),d=u(t,o,s,c),y=0;y<p.length;y++)f.push(a(e,r,i,l,p[y]));for(y=0;y<d.length;y++)h.push(a(t,o,s,c,d[y]));return n.getBBoxByArray(f,h)},length:function(e,t,r,n,o,a,s,u){return function e(t,r,n,o,a,s,u,c,f){if(0===f)return i.snapLength([t,n,a,u],[r,o,s,c]);var h=l(t,r,n,o,a,s,u,c,.5),p=h[0],d=h[1];return p.push(f-1),d.push(f-1),e.apply(null,p)+e.apply(null,d)}(e,t,r,n,o,a,s,u,3)},nearestPoint:function(e,t,r,n,o,s,u,l,c,f,h){return i.nearestPoint([e,r,o,u],[t,n,s,l],c,f,a,h)},pointDistance:function(e,t,r,o,i,a,s,u,l,c,f){var h=this.nearestPoint(e,t,r,o,i,a,s,u,l,c,f);return n.distance(h.x,h.y,l,c)},interpolationAt:a,pointAt:function(e,t,r,n,o,i,s,u,l){return{x:a(e,r,o,s,l),y:a(t,n,i,u,l)}},divide:function(e,t,r,n,o,i,a,s,u){return l(e,t,r,n,o,i,a,s,u)},tangentAngle:function(e,t,r,o,i,a,u,l,c){var f=s(e,r,i,u,c),h=s(t,o,a,l,c);return n.piMod(Math.atan2(h,f))}}},86408:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(32996);function o(e,t){var r=Math.abs(e);return t>0?r:-1*r}t.default={box:function(e,t,r,n){return{x:e-r,y:t-n,width:2*r,height:2*n}},length:function(e,t,r,n){return Math.PI*(3*(r+n)-Math.sqrt((3*r+n)*(r+3*n)))},nearestPoint:function(e,t,r,n,i,a){var s=r,u=n;if(0===s||0===u)return{x:e,y:t};for(var l,c,f=i-e,h=a-t,p=Math.abs(f),d=Math.abs(h),y=s*s,v=u*u,g=Math.PI/4,m=0;m<4;m++){l=s*Math.cos(g),c=u*Math.sin(g);var b=(y-v)*Math.pow(Math.cos(g),3)/s,w=(v-y)*Math.pow(Math.sin(g),3)/u,_=l-b,x=c-w,S=p-b,O=d-w,P=Math.hypot(x,_),E=Math.hypot(O,S);g+=P*Math.asin((_*O-x*S)/(P*E))/Math.sqrt(y+v-l*l-c*c),g=Math.min(Math.PI/2,Math.max(0,g))}return{x:e+o(l,f),y:t+o(c,h)}},pointDistance:function(e,t,r,o,i,a){var s=this.nearestPoint(e,t,r,o,i,a);return n.distance(s.x,s.y,i,a)},pointAt:function(e,t,r,n,o){var i=2*Math.PI*o;return{x:e+r*Math.cos(i),y:t+n*Math.sin(i)}},tangentAngle:function(e,t,r,o,i){var a=2*Math.PI*i,s=Math.atan2(o*Math.cos(a),-r*Math.sin(a));return n.piMod(s)}}},28524:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Util=t.Polyline=t.Polygon=t.Line=t.Arc=t.Cubic=t.Quad=void 0;var n=r(21870);t.Quad=n.default;var o=r(84206);t.Cubic=o.default;var i=r(92535);t.Arc=i.default;var a=r(27989);t.Line=a.default;var s=r(51871);t.Polygon=s.default;var u=r(84881);t.Polyline=u.default;var l=r(32996);t.Util=l},27989:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(32996),o=r(49679);t.default={box:function(e,t,r,o){return n.getBBoxByArray([e,r],[t,o])},length:function(e,t,r,o){return n.distance(e,t,r,o)},pointAt:function(e,t,r,n,o){return{x:(1-o)*e+o*r,y:(1-o)*t+o*n}},pointDistance:function(e,t,r,o,i,a){var s=(r-e)*(i-e)+(o-t)*(a-t);return s<0?n.distance(e,t,i,a):s>(r-e)*(r-e)+(o-t)*(o-t)?n.distance(r,o,i,a):this.pointToLine(e,t,r,o,i,a)},pointToLine:function(e,t,r,n,i,a){var s=[r-e,n-t];if(o.exactEquals(s,[0,0]))return Math.sqrt((i-e)*(i-e)+(a-t)*(a-t));var u=[-s[1],s[0]];o.normalize(u,u);var l=[i-e,a-t];return Math.abs(o.dot(l,u))},tangentAngle:function(e,t,r,n){return Math.atan2(n-t,r-e)}}},51871:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(50118),o=r(84881);function i(e){var t=e.slice(0);return e.length&&t.push(e[0]),t}t.default={box:function(e){return o.default.box(e)},length:function(e){return n.lengthOfSegment(i(e))},pointAt:function(e,t){return n.pointAtSegments(i(e),t)},pointDistance:function(e,t,r){return n.distanceAtSegment(i(e),t,r)},tangentAngle:function(e,t){return n.angleAtSegments(i(e),t)}}},84881:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(50118),o=r(32996);t.default={box:function(e){for(var t=[],r=[],n=0;n<e.length;n++){var i=e[n];t.push(i[0]),r.push(i[1])}return o.getBBoxByArray(t,r)},length:function(e){return n.lengthOfSegment(e)},pointAt:function(e,t){return n.pointAtSegments(e,t)},pointDistance:function(e,t,r){return n.distanceAtSegment(e,t,r)},tangentAngle:function(e,t){return n.angleAtSegments(e,t)}}},21870:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(27989),o=r(32996),i=r(23919);function a(e,t,r,n){var o=1-n;return o*o*e+2*n*o*t+n*n*r}function s(e,t,r){var n=e+r-2*t;if(o.isNumberEqual(n,0))return[.5];var i=(e-t)/n;return i<=1&&i>=0?[i]:[]}function u(e,t,r,n){return 2*(1-n)*(t-e)+2*n*(r-t)}function l(e,t,r,o,i,s,u){var l=a(e,r,i,u),c=a(t,o,s,u),f=n.default.pointAt(e,t,r,o,u),h=n.default.pointAt(r,o,i,s,u);return[[e,t,f.x,f.y,l,c],[l,c,h.x,h.y,i,s]]}t.default={box:function(e,t,r,n,i,u){var l=s(e,r,i)[0],c=s(t,n,u)[0],f=[e,i],h=[t,u];return void 0!==l&&f.push(a(e,r,i,l)),void 0!==c&&h.push(a(t,n,u,c)),o.getBBoxByArray(f,h)},length:function(e,t,r,n,i,a){return function e(t,r,n,i,a,s,u){if(0===u)return(o.distance(t,r,n,i)+o.distance(n,i,a,s)+o.distance(t,r,a,s))/2;var c=l(t,r,n,i,a,s,.5),f=c[0],h=c[1];return f.push(u-1),h.push(u-1),e.apply(null,f)+e.apply(null,h)}(e,t,r,n,i,a,3)},nearestPoint:function(e,t,r,n,o,s,u,l){return i.nearestPoint([e,r,o],[t,n,s],u,l,a)},pointDistance:function(e,t,r,n,i,a,s,u){var l=this.nearestPoint(e,t,r,n,i,a,s,u);return o.distance(l.x,l.y,s,u)},interpolationAt:a,pointAt:function(e,t,r,n,o,i,s){return{x:a(e,r,o,s),y:a(t,n,i,s)}},divide:function(e,t,r,n,o,i,a){return l(e,t,r,n,o,i,a)},tangentAngle:function(e,t,r,n,i,a,s){var l=u(e,r,i,s),c=u(t,n,a,s),f=Math.atan2(c,l);return o.piMod(f)}}},50118:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.distanceAtSegment=t.angleAtSegments=t.pointAtSegments=t.lengthOfSegment=void 0;var n=r(27989),o=r(32996);function i(e){for(var t=0,r=[],n=0;n<e.length-1;n++){var i=e[n],a=e[n+1],s=o.distance(i[0],i[1],a[0],a[1]),u={from:i,to:a,length:s};r.push(u),t+=s}return{segments:r,totalLength:t}}t.lengthOfSegment=function(e){if(e.length<2)return 0;for(var t=0,r=0;r<e.length-1;r++){var n=e[r],i=e[r+1];t+=o.distance(n[0],n[1],i[0],i[1])}return t},t.pointAtSegments=function(e,t){if(t>1||t<0||e.length<2)return null;var r=i(e),o=r.segments,a=r.totalLength;if(0===a)return{x:e[0][0],y:e[0][1]};for(var s=0,u=null,l=0;l<o.length;l++){var c=o[l],f=c.from,h=c.to,p=c.length/a;if(t>=s&&t<=s+p){var d=(t-s)/p;u=n.default.pointAt(f[0],f[1],h[0],h[1],d);break}s+=p}return u},t.angleAtSegments=function(e,t){if(t>1||t<0||e.length<2)return 0;for(var r=i(e),n=r.segments,o=r.totalLength,a=0,s=0,u=0;u<n.length;u++){var l=n[u],c=l.from,f=l.to,h=l.length/o;if(t>=a&&t<=a+h){s=Math.atan2(f[1]-c[1],f[0]-c[0]);break}a+=h}return s},t.distanceAtSegment=function(e,t,r){for(var o=1/0,i=0;i<e.length-1;i++){var a=e[i],s=e[i+1],u=n.default.pointDistance(a[0],a[1],s[0],s[1],t,r);u<o&&(o=u)}return o}},32996:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.piMod=t.getBBoxRange=t.getBBoxByArray=t.isNumberEqual=t.distance=void 0;var n=r(31834);t.distance=function(e,t,r,n){var o=e-r,i=t-n;return Math.sqrt(o*o+i*i)},t.isNumberEqual=function(e,t){return Math.abs(e-t)<.001},t.getBBoxByArray=function(e,t){var r=n.min(e),o=n.min(t);return{x:r,y:o,width:n.max(e)-r,height:n.max(t)-o}},t.getBBoxRange=function(e,t,r,o){return{minX:n.min([e,r]),maxX:n.max([e,r]),minY:n.min([t,o]),maxY:n.max([t,o])}},t.piMod=function(e){return(e+2*Math.PI)%(2*Math.PI)}},60415:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(97582),o=r(6992),i=r(7883),a=r(2480),s=r(41289),u=r(113),l=r(89338),c=r(58281),f=r(95259),h=function(e){function t(t){return e.call(this,n.__assign(n.__assign({},t),{autoDraw:!0,renderer:"svg"}))||this}return n.__extends(t,e),t.prototype.getShapeBase=function(){return l},t.prototype.getGroupBase=function(){return c.default},t.prototype.getShape=function(e,t,r){var n=r.target||r.srcElement;if(!i.SHAPE_TO_TAGS[n.tagName]){for(var o=n.parentNode;o&&!i.SHAPE_TO_TAGS[o.tagName];)o=o.parentNode;n=o}return this.find(function(e){return e.get("el")===n})},t.prototype.createDom=function(){var e=u.createSVGElement("svg"),t=new f.default(e);return e.setAttribute("width",""+this.get("width")),e.setAttribute("height",""+this.get("height")),this.set("context",t),e},t.prototype.onCanvasChange=function(e){var t=this.get("context"),r=this.get("el");if("sort"===e){var n=this.get("children");n&&n.length&&u.sortDom(this,function(e,t){return n.indexOf(e)-n.indexOf(t)?1:0})}else if("clear"===e){if(r){r.innerHTML="";var o=t.el;o.innerHTML="",r.appendChild(o)}}else"matrix"===e?s.setTransform(this):"clip"===e?s.setClip(this,t):"changeSize"===e&&(r.setAttribute("width",""+this.get("width")),r.setAttribute("height",""+this.get("height")))},t.prototype.draw=function(){var e=this.get("context"),t=this.getChildren();s.setClip(this,e),t.length&&a.drawChildren(e,t)},t}(o.AbstractCanvas);t.default=h},7883:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EVENTS=t.SVG_ATTR_MAP=t.SHAPE_TO_TAGS=void 0,t.SHAPE_TO_TAGS={rect:"path",circle:"circle",line:"line",path:"path",marker:"path",text:"text",polyline:"polyline",polygon:"polygon",image:"image",ellipse:"ellipse",dom:"foreignObject"},t.SVG_ATTR_MAP={opacity:"opacity",fillStyle:"fill",fill:"fill",fillOpacity:"fill-opacity",strokeStyle:"stroke",strokeOpacity:"stroke-opacity",stroke:"stroke",x:"x",y:"y",r:"r",rx:"rx",ry:"ry",width:"width",height:"height",x1:"x1",x2:"x2",y1:"y1",y2:"y2",lineCap:"stroke-linecap",lineJoin:"stroke-linejoin",lineWidth:"stroke-width",lineDash:"stroke-dasharray",lineDashOffset:"stroke-dashoffset",miterLimit:"stroke-miterlimit",font:"font",fontSize:"font-size",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",fontFamily:"font-family",startArrow:"marker-start",endArrow:"marker-end",path:"d",class:"class",id:"id",style:"style",preserveAspectRatio:"preserveAspectRatio"},t.EVENTS=["click","mousedown","mouseup","dblclick","contextmenu","mouseenter","mouseleave","mouseover","mouseout","mousemove","wheel"]},88603:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(31834),o=r(113),i=function(){function e(e,t){this.cfg={};var r=o.createSVGElement("marker"),i=n.uniqueId("marker_");r.setAttribute("id",i);var a=o.createSVGElement("path");a.setAttribute("stroke",e.stroke||"none"),a.setAttribute("fill",e.fill||"none"),r.appendChild(a),r.setAttribute("overflow","visible"),r.setAttribute("orient","auto-start-reverse"),this.el=r,this.child=a,this.id=i;var s=e["marker-start"===t?"startArrow":"endArrow"];return this.stroke=e.stroke||"#000",!0===s?this._setDefaultPath(t,a):(this.cfg=s,this._setMarker(e.lineWidth,a)),this}return e.prototype.match=function(){return!1},e.prototype._setDefaultPath=function(e,t){var r=this.el;t.setAttribute("d","M0,0 L"+10*Math.cos(Math.PI/6)+",5 L0,10"),r.setAttribute("refX",""+10*Math.cos(Math.PI/6)),r.setAttribute("refY","5")},e.prototype._setMarker=function(e,t){var r=this.el,o=this.cfg.path,i=this.cfg.d;n.isArray(o)&&(o=o.map(function(e){return e.join(" ")}).join("")),t.setAttribute("d",o),r.appendChild(t),i&&r.setAttribute("refX",""+i/e)},e.prototype.update=function(e){var t=this.child;t.attr?t.attr("fill",e):t.setAttribute("fill",e)},e}();t.default=i},34326:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(31834),o=r(113),i=function(){function e(e){this.type="clip",this.cfg={};var t=o.createSVGElement("clipPath");this.el=t,this.id=n.uniqueId("clip_"),t.id=this.id;var r=e.cfg.el;return t.appendChild(r),this.cfg=e,this}return e.prototype.match=function(){return!1},e.prototype.remove=function(){var e=this.el;e.parentNode.removeChild(e)},e}();t.default=i},52473:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(31834),o=r(113),i=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,a=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,s=/[\d.]+:(#[^\s]+|[^)]+\))/gi;function u(e){var t=e.match(s);if(!t)return"";var r="";return t.sort(function(e,t){return e=e.split(":"),t=t.split(":"),Number(e[0])-Number(t[0])}),n.each(t,function(e){e=e.split(":"),r+='<stop offset="'+e[0]+'" stop-color="'+e[1]+'"></stop>'}),r}var l=function(){function e(e){this.cfg={};var t,r,s,l,c,f,h,p=null,d=n.uniqueId("gradient_");return"l"===e.toLowerCase()[0]?function(e,t){var r,o,a=i.exec(e),s=n.mod(n.toRadian(parseFloat(a[1])),2*Math.PI),l=a[2];s>=0&&s<.5*Math.PI?(r={x:0,y:0},o={x:1,y:1}):.5*Math.PI<=s&&s<Math.PI?(r={x:1,y:0},o={x:0,y:1}):Math.PI<=s&&s<1.5*Math.PI?(r={x:1,y:1},o={x:0,y:0}):(r={x:0,y:1},o={x:1,y:0});var c=Math.tan(s),f=c*c,h=(o.x-r.x+c*(o.y-r.y))/(f+1)+r.x,p=c*(o.x-r.x+c*(o.y-r.y))/(f+1)+r.y;t.setAttribute("x1",r.x),t.setAttribute("y1",r.y),t.setAttribute("x2",h),t.setAttribute("y2",p),t.innerHTML=u(l)}(e,p=o.createSVGElement("linearGradient")):(p=o.createSVGElement("radialGradient"),t=e,r=p,s=a.exec(t),l=parseFloat(s[1]),c=parseFloat(s[2]),f=parseFloat(s[3]),h=s[4],r.setAttribute("cx",l),r.setAttribute("cy",c),r.setAttribute("r",f),r.innerHTML=u(h)),p.setAttribute("id",d),this.el=p,this.id=d,this.cfg=e,this}return e.prototype.match=function(e,t){return this.cfg===t},e}();t.default=l},95259:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(31834),o=r(52473),i=r(91526),a=r(88603),s=r(34326),u=r(55909),l=r(113),c=function(){function e(e){var t=l.createSVGElement("defs"),r=n.uniqueId("defs_");t.id=r,e.appendChild(t),this.children=[],this.defaultArrow={},this.el=t,this.canvas=e}return e.prototype.find=function(e,t){for(var r=this.children,n=null,o=0;o<r.length;o++)if(r[o].match(e,t)){n=r[o].id;break}return n},e.prototype.findById=function(e){for(var t=this.children,r=null,n=0;n<t.length;n++)if(t[n].id===e){r=t[n];break}return r},e.prototype.add=function(e){this.children.push(e),e.canvas=this.canvas,e.parent=this},e.prototype.getDefaultArrow=function(e,t){var r=e.stroke||e.strokeStyle;if(this.defaultArrow[r])return this.defaultArrow[r].id;var n=new a.default(e,t);return this.defaultArrow[r]=n,this.el.appendChild(n.el),this.add(n),n.id},e.prototype.addGradient=function(e){var t=new o.default(e);return this.el.appendChild(t.el),this.add(t),t.id},e.prototype.addArrow=function(e,t){var r=new a.default(e,t);return this.el.appendChild(r.el),this.add(r),r.id},e.prototype.addShadow=function(e){var t=new i.default(e);return this.el.appendChild(t.el),this.add(t),t.id},e.prototype.addPattern=function(e){var t=new u.default(e);return this.el.appendChild(t.el),this.add(t),t.id},e.prototype.addClip=function(e){var t=new s.default(e);return this.el.appendChild(t.el),this.add(t),t.id},e}();t.default=c},55909:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(31834),o=r(113),i=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,a=function(){function e(e){this.cfg={};var t=o.createSVGElement("pattern");t.setAttribute("patternUnits","userSpaceOnUse");var r=o.createSVGElement("image");t.appendChild(r);var a=n.uniqueId("pattern_");t.id=a,this.el=t,this.id=a,this.cfg=e;var s=i.exec(e)[2];r.setAttribute("href",s);var u=new Image;function l(){t.setAttribute("width",""+u.width),t.setAttribute("height",""+u.height)}return s.match(/^data:/i)||(u.crossOrigin="Anonymous"),u.src=s,u.complete?l():(u.onload=l,u.src=u.src),this}return e.prototype.match=function(e,t){return this.cfg===t},e}();t.default=a},91526:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(31834),o=r(113),i={shadowColor:"color",shadowOpacity:"opacity",shadowBlur:"blur",shadowOffsetX:"dx",shadowOffsetY:"dy"},a={x:"-40%",y:"-40%",width:"200%",height:"200%"},s=function(){function e(e){this.type="filter",this.cfg={},this.type="filter";var t=o.createSVGElement("filter");return n.each(a,function(e,r){t.setAttribute(r,e)}),this.el=t,this.id=n.uniqueId("filter_"),this.el.id=this.id,this.cfg=e,this._parseShadow(e,t),this}return e.prototype.match=function(e,t){if(this.type!==e)return!1;var r=!0,o=this.cfg;return n.each(Object.keys(o),function(e){if(o[e]!==t[e])return r=!1,!1}),r},e.prototype.update=function(e,t){var r=this.cfg;return r[i[e]]=t,this._parseShadow(r,this.el),this},e.prototype._parseShadow=function(e,t){var r='<feDropShadow\n      dx="'+(e.dx||0)+'"\n      dy="'+(e.dy||0)+'"\n      stdDeviation="'+(e.blur?e.blur/10:0)+'"\n      flood-color="'+(e.color?e.color:"#000")+'"\n      flood-opacity="'+(e.opacity?e.opacity:1)+'"\n      />';t.innerHTML=r},e}();t.default=s},58281:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(97582),o=r(6992),i=r(31834),a=r(89338),s=r(2480),u=r(41289),l=r(7883),c=r(113),f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.isEntityGroup=function(){return!0},t.prototype.createDom=function(){var e=c.createSVGElement("g");this.set("el",e);var t=this.getParent();if(t){var r=t.get("el");r?r.appendChild(e):(r=t.createDom(),t.set("el",r),r.appendChild(e))}return e},t.prototype.afterAttrsChange=function(t){e.prototype.afterAttrsChange.call(this,t);var r=this.get("canvas");if(r&&r.get("autoDraw")){var n=r.get("context");this.createPath(n,t)}},t.prototype.onCanvasChange=function(e){s.refreshElement(this,e)},t.prototype.getShapeBase=function(){return a},t.prototype.getGroupBase=function(){return t},t.prototype.draw=function(e){var t=this.getChildren(),r=this.get("el");this.get("destroyed")?r&&r.parentNode.removeChild(r):(r||this.createDom(),u.setClip(this,e),this.createPath(e),t.length&&s.drawChildren(e,t))},t.prototype.createPath=function(e,t){var r=this.attr(),n=this.get("el");i.each(t||r,function(e,t){l.SVG_ATTR_MAP[t]&&n.setAttribute(l.SVG_ATTR_MAP[t],e)}),u.setTransform(this)},t}(o.AbstractGroup);t.default=f},32227:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.version=t.Shape=void 0;var n=r(97582),o=r(89338);t.Shape=o,n.__exportStar(r(6992),t);var i=r(60415);Object.defineProperty(t,"Canvas",{enumerable:!0,get:function(){return i.default}});var a=r(58281);Object.defineProperty(t,"Group",{enumerable:!0,get:function(){return a.default}}),t.version="0.5.6"},55595:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(97582),o=r(6992),i=r(41289),a=r(113),s=r(2480),u=r(7883),l=r(89338),c=r(58281),f=r(6992),h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="svg",t.canFill=!1,t.canStroke=!1,t}return n.__extends(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return n.__assign(n.__assign({},t),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},t.prototype.afterAttrsChange=function(t){e.prototype.afterAttrsChange.call(this,t);var r=this.get("canvas");if(r&&r.get("autoDraw")){var n=r.get("context");this.draw(n,t)}},t.prototype.getShapeBase=function(){return l},t.prototype.getGroupBase=function(){return c.default},t.prototype.onCanvasChange=function(e){s.refreshElement(this,e)},t.prototype.calculateBBox=function(){var e=this.get("el"),t=null;if(e)t=e.getBBox();else{var r=f.getBBoxMethod(this.get("type"));r&&(t=r(this))}if(t){var n=t.x,o=t.y,i=t.width,a=t.height,s=this.getHitLineWidth(),u=s/2,l=n-u,c=o-u;return{x:l,y:c,minX:l,minY:c,maxX:n+i+u,maxY:o+a+u,width:i+s,height:a+s}}return{x:0,y:0,minX:0,minY:0,maxX:0,maxY:0,width:0,height:0}},t.prototype.isFill=function(){var e=this.attr(),t=e.fill,r=e.fillStyle;return(t||r||this.isClipShape())&&this.canFill},t.prototype.isStroke=function(){var e=this.attr(),t=e.stroke,r=e.strokeStyle;return(t||r)&&this.canStroke},t.prototype.draw=function(e,t){var r=this.get("el");this.get("destroyed")?r&&r.parentNode.removeChild(r):(r||a.createDom(this),i.setClip(this,e),this.createPath(e,t),this.shadow(e,t),this.strokeAndFill(e,t),this.transform(t))},t.prototype.createPath=function(e,t){},t.prototype.strokeAndFill=function(e,t){var r=t||this.attr(),n=r.fill,o=r.fillStyle,i=r.stroke,a=r.strokeStyle,s=r.fillOpacity,l=r.strokeOpacity,c=r.lineWidth,f=this.get("el");this.canFill&&(t?"fill"in r?this._setColor(e,"fill",n):"fillStyle"in r&&this._setColor(e,"fill",o):this._setColor(e,"fill",n||o),s&&f.setAttribute(u.SVG_ATTR_MAP.fillOpacity,s)),this.canStroke&&c>0&&(t?"stroke"in r?this._setColor(e,"stroke",i):"strokeStyle"in r&&this._setColor(e,"stroke",a):this._setColor(e,"stroke",i||a),l&&f.setAttribute(u.SVG_ATTR_MAP.strokeOpacity,l),c&&f.setAttribute(u.SVG_ATTR_MAP.lineWidth,c))},t.prototype._setColor=function(e,t,r){var n=this.get("el");if(r)if(r=r.trim(),/^[r,R,L,l]{1}[\s]*\(/.test(r))(o=e.find("gradient",r))||(o=e.addGradient(r)),n.setAttribute(u.SVG_ATTR_MAP[t],"url(#"+o+")");else if(/^[p,P]{1}[\s]*\(/.test(r)){var o;(o=e.find("pattern",r))||(o=e.addPattern(r)),n.setAttribute(u.SVG_ATTR_MAP[t],"url(#"+o+")")}else n.setAttribute(u.SVG_ATTR_MAP[t],r);else n.setAttribute(u.SVG_ATTR_MAP[t],"none")},t.prototype.shadow=function(e,t){var r=this.attr(),n=t||r,o=n.shadowOffsetX,a=n.shadowOffsetY,s=n.shadowBlur,u=n.shadowColor;(o||a||s||u)&&i.setShadow(this,e)},t.prototype.transform=function(e){var t=this.attr();(e||t).matrix&&i.setTransform(this)},t.prototype.isInShape=function(e,t){return this.isPointInPath(e,t)},t.prototype.isPointInPath=function(e,t){var r=this.get("el"),n=this.get("canvas").get("el").getBoundingClientRect(),o=e+n.left,i=t+n.top,a=document.elementFromPoint(o,i);return!(!a||!a.isEqualNode(r))},t.prototype.getHitLineWidth=function(){var e=this.attrs,t=e.lineWidth,r=e.lineAppendWidth;return this.isStroke()?t+r:0},t}(o.AbstractShape);t.default=h},29519:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(97582),o=r(31834),i=r(7883),a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="circle",t.canFill=!0,t.canStroke=!0,t}return n.__extends(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return n.__assign(n.__assign({},t),{x:0,y:0,r:0})},t.prototype.createPath=function(e,t){var r=this.attr(),n=this.get("el");o.each(t||r,function(e,t){"x"===t||"y"===t?n.setAttribute("c"+t,e):i.SVG_ATTR_MAP[t]&&n.setAttribute(i.SVG_ATTR_MAP[t],e)})},t}(r(55595).default);t.default=a},56823:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(97582),o=r(31834),i=r(7883),a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="dom",t.canFill=!1,t.canStroke=!1,t}return n.__extends(t,e),t.prototype.createPath=function(e,t){var r=this.attr(),n=this.get("el");if(o.each(t||r,function(e,t){i.SVG_ATTR_MAP[t]&&n.setAttribute(i.SVG_ATTR_MAP[t],e)}),"function"==typeof r.html){var a=r.html.call(this,r);if(a instanceof Element||a instanceof HTMLDocument){for(var s=n.childNodes,u=s.length-1;u>=0;u--)n.removeChild(s[u]);n.appendChild(a)}else n.innerHTML=a}else n.innerHTML=r.html},t}(r(55595).default);t.default=a},48768:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(97582),o=r(31834),i=r(7883),a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="ellipse",t.canFill=!0,t.canStroke=!0,t}return n.__extends(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return n.__assign(n.__assign({},t),{x:0,y:0,rx:0,ry:0})},t.prototype.createPath=function(e,t){var r=this.attr(),n=this.get("el");o.each(t||r,function(e,t){"x"===t||"y"===t?n.setAttribute("c"+t,e):i.SVG_ATTR_MAP[t]&&n.setAttribute(i.SVG_ATTR_MAP[t],e)})},t}(r(55595).default);t.default=a},80237:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(97582),o=r(31834),i=r(7883),a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="image",t.canFill=!1,t.canStroke=!1,t}return n.__extends(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return n.__assign(n.__assign({},t),{x:0,y:0,width:0,height:0})},t.prototype.createPath=function(e,t){var r=this,n=this.attr(),a=this.get("el");o.each(t||n,function(e,t){"img"===t?r._setImage(n.img):i.SVG_ATTR_MAP[t]&&a.setAttribute(i.SVG_ATTR_MAP[t],e)})},t.prototype.setAttr=function(e,t){this.attrs[e]=t,"img"===e&&this._setImage(t)},t.prototype._setImage=function(e){var t=this.attr(),r=this.get("el");if(o.isString(e))r.setAttribute("href",e);else if(e instanceof window.Image)t.width||(r.setAttribute("width",e.width),this.attr("width",e.width)),t.height||(r.setAttribute("height",e.height),this.attr("height",e.height)),r.setAttribute("href",e.src);else if(e instanceof HTMLElement&&o.isString(e.nodeName)&&"CANVAS"===e.nodeName.toUpperCase())r.setAttribute("href",e.toDataURL());else if(e instanceof ImageData){var n=document.createElement("canvas");n.setAttribute("width",""+e.width),n.setAttribute("height",""+e.height),n.getContext("2d").putImageData(e,0,0),t.width||(r.setAttribute("width",""+e.width),this.attr("width",e.width)),t.height||(r.setAttribute("height",""+e.height),this.attr("height",e.height)),r.setAttribute("href",n.toDataURL())}},t}(r(55595).default);t.default=a},89338:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(55595);Object.defineProperty(t,"Base",{enumerable:!0,get:function(){return n.default}});var o=r(29519);Object.defineProperty(t,"Circle",{enumerable:!0,get:function(){return o.default}});var i=r(56823);Object.defineProperty(t,"Dom",{enumerable:!0,get:function(){return i.default}});var a=r(48768);Object.defineProperty(t,"Ellipse",{enumerable:!0,get:function(){return a.default}});var s=r(80237);Object.defineProperty(t,"Image",{enumerable:!0,get:function(){return s.default}});var u=r(10280);Object.defineProperty(t,"Line",{enumerable:!0,get:function(){return u.default}});var l=r(71224);Object.defineProperty(t,"Marker",{enumerable:!0,get:function(){return l.default}});var c=r(23591);Object.defineProperty(t,"Path",{enumerable:!0,get:function(){return c.default}});var f=r(89847);Object.defineProperty(t,"Polygon",{enumerable:!0,get:function(){return f.default}});var h=r(5784);Object.defineProperty(t,"Polyline",{enumerable:!0,get:function(){return h.default}});var p=r(31295);Object.defineProperty(t,"Rect",{enumerable:!0,get:function(){return p.default}});var d=r(11034);Object.defineProperty(t,"Text",{enumerable:!0,get:function(){return d.default}})},10280:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(97582),o=r(28524),i=r(31834),a=r(7883),s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="line",t.canFill=!1,t.canStroke=!0,t}return n.__extends(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return n.__assign(n.__assign({},t),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},t.prototype.createPath=function(e,t){var r=this.attr(),n=this.get("el");i.each(t||r,function(t,o){if("startArrow"===o||"endArrow"===o)if(t){var s=i.isObject(t)?e.addArrow(r,a.SVG_ATTR_MAP[o]):e.getDefaultArrow(r,a.SVG_ATTR_MAP[o]);n.setAttribute(a.SVG_ATTR_MAP[o],"url(#"+s+")")}else n.removeAttribute(a.SVG_ATTR_MAP[o]);else a.SVG_ATTR_MAP[o]&&n.setAttribute(a.SVG_ATTR_MAP[o],t)})},t.prototype.getTotalLength=function(){var e=this.attr(),t=e.x1,r=e.y1,n=e.x2,i=e.y2;return o.Line.length(t,r,n,i)},t.prototype.getPoint=function(e){var t=this.attr(),r=t.x1,n=t.y1,i=t.x2,a=t.y2;return o.Line.pointAt(r,n,i,a,e)},t}(r(55595).default);t.default=s},71224:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(97582),o=r(31834),i=r(55595),a=r(96840),s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="marker",t.canFill=!0,t.canStroke=!0,t}return n.__extends(t,e),t.prototype.createPath=function(e){this.get("el").setAttribute("d",this._assembleMarker())},t.prototype._assembleMarker=function(){var e=this._getPath();return o.isArray(e)?e.map(function(e){return e.join(" ")}).join(""):e},t.prototype._getPath=function(){var e,t=this.attr(),r=t.x,n=t.y,i=t.r||t.radius,s=t.symbol||"circle";return(e=o.isFunction(s)?s:a.default.get(s))?e(r,n,i):(console.warn(e+" symbol is not exist."),null)},t.symbolsFactory=a.default,t}(i.default);t.default=s},96840:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={circle:function(e,t,r){return[["M",e,t],["m",-r,0],["a",r,r,0,1,0,2*r,0],["a",r,r,0,1,0,2*-r,0]]},square:function(e,t,r){return[["M",e-r,t-r],["L",e+r,t-r],["L",e+r,t+r],["L",e-r,t+r],["Z"]]},diamond:function(e,t,r){return[["M",e-r,t],["L",e,t-r],["L",e+r,t],["L",e,t+r],["Z"]]},triangle:function(e,t,r){var n=r*Math.sin(1/3*Math.PI);return[["M",e-r,t+n],["L",e,t-n],["L",e+r,t+n],["z"]]},triangleDown:function(e,t,r){var n=r*Math.sin(1/3*Math.PI);return[["M",e-r,t-n],["L",e+r,t-n],["L",e,t+n],["Z"]]}};t.default={get:function(e){return r[e]},register:function(e,t){r[e]=t},remove:function(e){delete r[e]},getAll:function(){return r}}},23591:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(97582),o=r(31834),i=r(7883),a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="path",t.canFill=!0,t.canStroke=!0,t}return n.__extends(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return n.__assign(n.__assign({},t),{startArrow:!1,endArrow:!1})},t.prototype.createPath=function(e,t){var r=this,n=this.attr(),a=this.get("el");o.each(t||n,function(t,s){if("path"===s&&o.isArray(t))a.setAttribute("d",r._formatPath(t));else if("startArrow"===s||"endArrow"===s)if(t){var u=o.isObject(t)?e.addArrow(n,i.SVG_ATTR_MAP[s]):e.getDefaultArrow(n,i.SVG_ATTR_MAP[s]);a.setAttribute(i.SVG_ATTR_MAP[s],"url(#"+u+")")}else a.removeAttribute(i.SVG_ATTR_MAP[s]);else i.SVG_ATTR_MAP[s]&&a.setAttribute(i.SVG_ATTR_MAP[s],t)})},t.prototype._formatPath=function(e){var t=e.map(function(e){return e.join(" ")}).join("");return~t.indexOf("NaN")?"":t},t.prototype.getTotalLength=function(){var e=this.get("el");return e?e.getTotalLength():null},t.prototype.getPoint=function(e){var t=this.get("el"),r=this.getTotalLength();if(0===r)return null;var n=t?t.getPointAtLength(e*r):null;return n?{x:n.x,y:n.y}:null},t}(r(55595).default);t.default=a},89847:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(97582),o=r(31834),i=r(7883),a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="polygon",t.canFill=!0,t.canStroke=!0,t}return n.__extends(t,e),t.prototype.createPath=function(e,t){var r=this.attr(),n=this.get("el");o.each(t||r,function(e,t){"points"===t&&o.isArray(e)&&e.length>=2?n.setAttribute("points",e.map(function(e){return e[0]+","+e[1]}).join(" ")):i.SVG_ATTR_MAP[t]&&n.setAttribute(i.SVG_ATTR_MAP[t],e)})},t}(r(55595).default);t.default=a},5784:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(97582),o=r(28524),i=r(28524),a=r(31834),s=r(7883),u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="polyline",t.canFill=!0,t.canStroke=!0,t}return n.__extends(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return n.__assign(n.__assign({},t),{startArrow:!1,endArrow:!1})},t.prototype.onAttrChange=function(t,r,n){e.prototype.onAttrChange.call(this,t,r,n),-1!==["points"].indexOf(t)&&this._resetCache()},t.prototype._resetCache=function(){this.set("totalLength",null),this.set("tCache",null)},t.prototype.createPath=function(e,t){var r=this.attr(),n=this.get("el");a.each(t||r,function(e,t){"points"===t&&a.isArray(e)&&e.length>=2?n.setAttribute("points",e.map(function(e){return e[0]+","+e[1]}).join(" ")):s.SVG_ATTR_MAP[t]&&n.setAttribute(s.SVG_ATTR_MAP[t],e)})},t.prototype.getTotalLength=function(){var e=this.attr().points,t=this.get("totalLength");return a.isNil(t)?(this.set("totalLength",o.Polyline.length(e)),this.get("totalLength")):t},t.prototype.getPoint=function(e){var t,r,n=this.attr().points,o=this.get("tCache");return o||(this._setTcache(),o=this.get("tCache")),a.each(o,function(n,o){e>=n[0]&&e<=n[1]&&(t=(e-n[0])/(n[1]-n[0]),r=o)}),i.Line.pointAt(n[r][0],n[r][1],n[r+1][0],n[r+1][1],t)},t.prototype._setTcache=function(){var e=this.attr().points;if(e&&0!==e.length){var t=this.getTotalLength();if(!(t<=0)){var r,n,o=0,s=[];a.each(e,function(a,u){e[u+1]&&((r=[])[0]=o/t,n=i.Line.length(a[0],a[1],e[u+1][0],e[u+1][1]),o+=n,r[1]=o/t,s.push(r))}),this.set("tCache",s)}}},t.prototype.getStartTangent=function(){var e=this.attr().points,t=[];return t.push([e[1][0],e[1][1]]),t.push([e[0][0],e[0][1]]),t},t.prototype.getEndTangent=function(){var e=this.attr().points,t=e.length-1,r=[];return r.push([e[t-1][0],e[t-1][1]]),r.push([e[t][0],e[t][1]]),r},t}(r(55595).default);t.default=u},31295:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(97582),o=r(31834),i=r(55595),a=r(7883),s=r(57876),u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="rect",t.canFill=!0,t.canStroke=!0,t}return n.__extends(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return n.__assign(n.__assign({},t),{x:0,y:0,width:0,height:0,radius:0})},t.prototype.createPath=function(e,t){var r=this,n=this.attr(),i=this.get("el"),s=!1,u=["x","y","width","height","radius"];o.each(t||n,function(e,t){-1===u.indexOf(t)||s?-1===u.indexOf(t)&&a.SVG_ATTR_MAP[t]&&i.setAttribute(a.SVG_ATTR_MAP[t],e):(i.setAttribute("d",r._assembleRect(n)),s=!0)})},t.prototype._assembleRect=function(e){var t=e.x,r=e.y,n=e.width,i=e.height,a=e.radius;if(!a)return"M "+t+","+r+" l "+n+",0 l 0,"+i+" l"+-n+" 0 z";var u=s.parseRadius(a);return o.isArray(a)?1===a.length?u.r1=u.r2=u.r3=u.r4=a[0]:2===a.length?(u.r1=u.r3=a[0],u.r2=u.r4=a[1]):3===a.length?(u.r1=a[0],u.r2=u.r4=a[1],u.r3=a[2]):(u.r1=a[0],u.r2=a[1],u.r3=a[2],u.r4=a[3]):u.r1=u.r2=u.r3=u.r4=a,[["M "+(t+u.r1)+","+r],["l "+(n-u.r1-u.r2)+",0"],["a "+u.r2+","+u.r2+",0,0,1,"+u.r2+","+u.r2],["l 0,"+(i-u.r2-u.r3)],["a "+u.r3+","+u.r3+",0,0,1,"+-u.r3+","+u.r3],["l "+(u.r3+u.r4-n)+",0"],["a "+u.r4+","+u.r4+",0,0,1,"+-u.r4+","+-u.r4],["l 0,"+(u.r4+u.r1-i)],["a "+u.r1+","+u.r1+",0,0,1,"+u.r1+","+-u.r1],["z"]].join(" ")},t}(i.default);t.default=u},11034:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(97582),o=r(31834),i=r(81758),a=r(41289),s=r(7883),u={top:"before-edge",middle:"central",bottom:"after-edge",alphabetic:"baseline",hanging:"hanging"},l={top:"text-before-edge",middle:"central",bottom:"text-after-edge",alphabetic:"alphabetic",hanging:"hanging"},c={left:"left",start:"left",center:"middle",right:"end",end:"end"},f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="text",t.canFill=!0,t.canStroke=!0,t}return n.__extends(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return n.__assign(n.__assign({},t),{x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"})},t.prototype.createPath=function(e,t){var r=this,n=this.attr(),i=this.get("el");this._setFont(),o.each(t||n,function(e,t){"text"===t?r._setText(""+e):"matrix"===t&&e?a.setTransform(r):s.SVG_ATTR_MAP[t]&&i.setAttribute(s.SVG_ATTR_MAP[t],e)}),i.setAttribute("paint-order","stroke"),i.setAttribute("style","stroke-linecap:butt; stroke-linejoin:miter;")},t.prototype._setFont=function(){var e=this.get("el"),t=this.attr(),r=t.textBaseline,n=t.textAlign,o=i.detect();o&&"firefox"===o.name?e.setAttribute("dominant-baseline",l[r]||"alphabetic"):e.setAttribute("alignment-baseline",u[r]||"baseline"),e.setAttribute("text-anchor",c[n]||"left")},t.prototype._setText=function(e){var t=this.get("el"),r=this.attr(),n=r.x,i=r.textBaseline,a=void 0===i?"bottom":i;if(e)if(~e.indexOf("\n")){var s=e.split("\n"),u=s.length-1,l="";o.each(s,function(e,t){0===t?"alphabetic"===a?l+='<tspan x="'+n+'" dy="'+-u+'em">'+e+"</tspan>":"top"===a?l+='<tspan x="'+n+'" dy="0.9em">'+e+"</tspan>":"middle"===a?l+='<tspan x="'+n+'" dy="'+-(u-1)/2+'em">'+e+"</tspan>":"bottom"===a?l+='<tspan x="'+n+'" dy="-'+(u+.3)+'em">'+e+"</tspan>":"hanging"===a&&(l+='<tspan x="'+n+'" dy="'+(-(u-1)-.3)+'em">'+e+"</tspan>"):l+='<tspan x="'+n+'" dy="1em">'+e+"</tspan>"}),t.innerHTML=l}else t.innerHTML=e;else t.innerHTML=""},t}(r(55595).default);t.default=f},113:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.moveTo=t.sortDom=t.createDom=t.createSVGElement=void 0;var n=r(31834),o=r(7883);function i(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}t.createSVGElement=i,t.createDom=function(e){var t=o.SHAPE_TO_TAGS[e.type],r=e.getParent();if(!t)throw new Error("the type "+e.type+" is not supported by svg");var n=i(t);if(e.get("id")&&(n.id=e.get("id")),e.set("el",n),e.set("attrs",{}),r){var a=r.get("el");a?a.appendChild(n):(a=r.createDom(),r.set("el",a),a.appendChild(n))}return n},t.sortDom=function(e,t){var r=e.get("el"),o=n.toArray(r.children).sort(t),i=document.createDocumentFragment();o.forEach(function(e){i.appendChild(e)}),r.appendChild(i)},t.moveTo=function(e,t){var r=e.parentNode,n=Array.from(r.childNodes).filter(function(e){return 1===e.nodeType&&"defs"!==e.nodeName.toLowerCase()}),o=n[t],i=n.indexOf(e);if(o){if(i>t)r.insertBefore(e,o);else if(i<t){var a=n[t+1];a?r.insertBefore(e,a):r.appendChild(e)}}else r.appendChild(e)}},2480:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.refreshElement=t.drawChildren=void 0;var n=r(41289),o=r(113);t.drawChildren=function(e,t){t.forEach(function(t){t.draw(e)})},t.refreshElement=function(e,t){var r=e.get("canvas");if(r&&r.get("autoDraw")){var i=r.get("context"),a=e.getParent(),s=a?a.getChildren():[r],u=e.get("el");if("remove"===t)if(e.get("isClipShape")){var l=u&&u.parentNode,c=l&&l.parentNode;l&&c&&c.removeChild(l)}else u&&u.parentNode&&u.parentNode.removeChild(u);else if("show"===t)u.setAttribute("visibility","visible");else if("hide"===t)u.setAttribute("visibility","hidden");else if("zIndex"===t)o.moveTo(u,s.indexOf(e));else if("sort"===t){var f=e.get("children");f&&f.length&&o.sortDom(e,function(e,t){return f.indexOf(e)-f.indexOf(t)?1:0})}else"clear"===t?u&&(u.innerHTML=""):"matrix"===t?n.setTransform(e):"clip"===t?n.setClip(e,i):"attr"===t||"add"===t&&e.draw(i)}}},57876:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parsePath=t.parseRadius=void 0;var n=r(31834),o=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/gi,i=/[^\s,]+/gi;t.parseRadius=function(e){var t=0,r=0,o=0,i=0;return n.isArray(e)?1===e.length?t=r=o=i=e[0]:2===e.length?(t=o=e[0],r=i=e[1]):3===e.length?(t=e[0],r=i=e[1],o=e[2]):(t=e[0],r=e[1],o=e[2],i=e[3]):t=r=o=i=e,{r1:t,r2:r,r3:o,r4:i}},t.parsePath=function(e){return e=e||[],n.isArray(e)?e:n.isString(e)?(e=e.match(o),n.each(e,function(t,r){if((t=t.match(i))[0].length>1){var o=t[0].charAt(0);t.splice(1,0,t[0].substr(1)),t[0]=o}n.each(t,function(e,r){isNaN(e)||(t[r]=+e)}),e[r]=t}),e):void 0}},41289:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setClip=t.setTransform=t.setShadow=void 0;var n=r(113);t.setShadow=function(e,t){var r=e.cfg.el,n=e.attr(),o={dx:n.shadowOffsetX,dy:n.shadowOffsetY,blur:n.shadowBlur,color:n.shadowColor};if(o.dx||o.dy||o.blur||o.color){var i=t.find("filter",o);i||(i=t.addShadow(o)),r.setAttribute("filter","url(#"+i+")")}else r.removeAttribute("filter")},t.setTransform=function(e){var t=e.attr().matrix;if(t){for(var r=e.cfg.el,n=[],o=0;o<9;o+=3)n.push(t[o]+","+t[o+1]);-1===(n=n.join(",")).indexOf("NaN")?r.setAttribute("transform","matrix("+n+")"):console.warn("invalid matrix:",t)}},t.setClip=function(e,t){var r=e.getClip(),o=e.get("el");if(r){if(r&&!o.hasAttribute("clip-path")){n.createDom(r),r.createPath(t);var i=t.addClip(r);o.setAttribute("clip-path","url(#"+i+")")}}else o.removeAttribute("clip-path")}},52386:function(e,t,r){"use strict";var n=r(28860);Object.defineProperty(t,"__esModule",{value:!0}),t.ComponentManager=t.Component=void 0;var o=n(r(31364)),i=n(r(81121)),a=n(r(43083)),s=n(r(46834)),u=r(70147),l=(0,a.default)(function e(t){(0,s.default)(this,e)});t.Component=l;var c=function(){function e(t){(0,s.default)(this,e),this.clazz=void 0,this.components=[],this.entities=[],this.lookup={},this.clazz=t}return(0,a.default)(e,[{key:"clear",value:function(){this.components=[],this.entities=[],this.lookup={}}},{key:"contains",value:function(e){return this.lookup[e]>-1}},{key:"create",value:function(e,t){this.lookup[e]=this.components.length;var r=new this.clazz(t||{});return this.components.push(r),this.entities.push(e),r}},{key:"remove",value:function(e){var t=this.lookup[e];t>-1&&t<this.components.length-1&&(this.components[t]=this.components[this.components.length-1],this.entities[t]=this.entities[this.entities.length-1],this.lookup[this.entities[t]]=t),this.components.pop(),this.entities.pop(),delete this.lookup[e]}},{key:"removeKeepSorted",value:function(e){var t=this.lookup[e];if(t>-1){var r=this.entities[t];if(t<this.components.length-1){for(var n=t+1;n<this.components.length;++n)this.components[n-1]=this.components[n];for(var o=t+1;o<this.entities.length;++o)this.entities[o-1]=this.entities[o],this.lookup[this.entities[o-1]]=o-1}this.components.pop(),this.entities.pop(),delete this.lookup[r]}}},{key:"moveItem",value:function(e,t){if(e!==t){for(var r=this.components[e],n=this.entities[e],o=e<t?1:-1,i=e;i!==t;i+=o){var a=i+o;this.components[i]=this.components[a],this.entities[i]=this.entities[a],this.lookup[this.entities[i]]=i}this.components[t]=r,this.entities[t]=n,this.lookup[n]=t}}},{key:"getEntity",value:function(e){return this.entities[e]}},{key:"getComponent",value:function(e){return this.components[e]}},{key:"getComponentByEntity",value:function(e){var t=this.lookup[e];return t>-1?this.components[t]:null}},{key:"getCount",value:function(){return this.components.length}},{key:"getEntityByComponentIndex",value:function(e){for(var t=0,r=Object.keys(this.lookup);t<r.length;t++){var n=r[t],o=Number(n);if(this.lookup[o]===e)return o}return u.EMPTY}},{key:"find",value:function(e){for(var t=0;t<this.getCount();t++){var r=this.getComponent(t);if(e(r,t))return r}return null}},{key:"findIndex",value:function(e){for(var t=0;t<this.getCount();t++){if(e(this.getComponent(t),t))return t}return-1}},{key:"forEach",value:function(e){for(var t=0,r=Object.keys(this.lookup);t<r.length;t++){var n=r[t],o=Number(n),i=this.lookup[o];e(o,this.getComponent(i))}}},{key:"forEachAsync",value:function(){var e=(0,i.default)(o.default.mark(function e(t){var r,n,i,a,s;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=0,n=Object.keys(this.lookup);case 1:if(!(r<n.length)){e.next=10;break}return i=n[r],a=Number(i),s=this.lookup[a],e.next=7,t(a,this.getComponent(s));case 7:r++,e.next=1;break;case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"map",value:function(e){for(var t=[],r=0,n=Object.keys(this.lookup);r<n.length;r++){var o=n[r],i=Number(o),a=this.lookup[i];t.push(e(i,this.getComponent(a)))}return t}}]),e}();t.ComponentManager=c},70147:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EMPTY=void 0,t.createEntity=function(){return r++};t.EMPTY=-1;var r=1},76501:function(e,t){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.gl=void 0,t.gl=r,function(e){e[e.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",e[e.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",e[e.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN",e[e.ZERO=0]="ZERO",e[e.ONE=1]="ONE",e[e.SRC_COLOR=768]="SRC_COLOR",e[e.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",e[e.SRC_ALPHA=770]="SRC_ALPHA",e[e.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",e[e.DST_ALPHA=772]="DST_ALPHA",e[e.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",e[e.DST_COLOR=774]="DST_COLOR",e[e.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",e[e.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",e[e.FUNC_ADD=32774]="FUNC_ADD",e[e.BLEND_EQUATION=32777]="BLEND_EQUATION",e[e.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",e[e.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",e[e.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",e[e.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",e[e.MAX_EXT=32776]="MAX_EXT",e[e.MIN_EXT=32775]="MIN_EXT",e[e.BLEND_DST_RGB=32968]="BLEND_DST_RGB",e[e.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",e[e.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",e[e.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",e[e.CONSTANT_COLOR=32769]="CONSTANT_COLOR",e[e.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",e[e.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",e[e.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",e[e.BLEND_COLOR=32773]="BLEND_COLOR",e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",e[e.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",e[e.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",e[e.STREAM_DRAW=35040]="STREAM_DRAW",e[e.STATIC_DRAW=35044]="STATIC_DRAW",e[e.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",e[e.BUFFER_SIZE=34660]="BUFFER_SIZE",e[e.BUFFER_USAGE=34661]="BUFFER_USAGE",e[e.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",e[e.FRONT=1028]="FRONT",e[e.BACK=1029]="BACK",e[e.FRONT_AND_BACK=1032]="FRONT_AND_BACK",e[e.CULL_FACE=2884]="CULL_FACE",e[e.BLEND=3042]="BLEND",e[e.DITHER=3024]="DITHER",e[e.STENCIL_TEST=2960]="STENCIL_TEST",e[e.DEPTH_TEST=2929]="DEPTH_TEST",e[e.SCISSOR_TEST=3089]="SCISSOR_TEST",e[e.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",e[e.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",e[e.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",e[e.NO_ERROR=0]="NO_ERROR",e[e.INVALID_ENUM=1280]="INVALID_ENUM",e[e.INVALID_VALUE=1281]="INVALID_VALUE",e[e.INVALID_OPERATION=1282]="INVALID_OPERATION",e[e.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",e[e.CW=2304]="CW",e[e.CCW=2305]="CCW",e[e.LINE_WIDTH=2849]="LINE_WIDTH",e[e.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",e[e.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",e[e.CULL_FACE_MODE=2885]="CULL_FACE_MODE",e[e.FRONT_FACE=2886]="FRONT_FACE",e[e.DEPTH_RANGE=2928]="DEPTH_RANGE",e[e.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",e[e.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",e[e.DEPTH_FUNC=2932]="DEPTH_FUNC",e[e.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",e[e.STENCIL_FUNC=2962]="STENCIL_FUNC",e[e.STENCIL_FAIL=2964]="STENCIL_FAIL",e[e.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",e[e.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",e[e.STENCIL_REF=2967]="STENCIL_REF",e[e.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",e[e.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",e[e.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",e[e.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",e[e.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",e[e.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",e[e.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",e[e.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",e[e.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",e[e.VIEWPORT=2978]="VIEWPORT",e[e.SCISSOR_BOX=3088]="SCISSOR_BOX",e[e.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",e[e.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",e[e.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",e[e.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",e[e.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",e[e.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",e[e.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",e[e.RED_BITS=3410]="RED_BITS",e[e.GREEN_BITS=3411]="GREEN_BITS",e[e.BLUE_BITS=3412]="BLUE_BITS",e[e.ALPHA_BITS=3413]="ALPHA_BITS",e[e.DEPTH_BITS=3414]="DEPTH_BITS",e[e.STENCIL_BITS=3415]="STENCIL_BITS",e[e.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",e[e.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",e[e.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",e[e.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",e[e.SAMPLES=32937]="SAMPLES",e[e.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",e[e.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",e[e.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",e[e.DONT_CARE=4352]="DONT_CARE",e[e.FASTEST=4353]="FASTEST",e[e.NICEST=4354]="NICEST",e[e.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",e[e.BYTE=5120]="BYTE",e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.SHORT=5122]="SHORT",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.INT=5124]="INT",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.FLOAT=5126]="FLOAT",e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.ALPHA=6406]="ALPHA",e[e.RGB=6407]="RGB",e[e.RGBA=6408]="RGBA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",e[e.VERTEX_SHADER=35633]="VERTEX_SHADER",e[e.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",e[e.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",e[e.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",e[e.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",e[e.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",e[e.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",e[e.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",e[e.SHADER_TYPE=35663]="SHADER_TYPE",e[e.DELETE_STATUS=35712]="DELETE_STATUS",e[e.LINK_STATUS=35714]="LINK_STATUS",e[e.VALIDATE_STATUS=35715]="VALIDATE_STATUS",e[e.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",e[e.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",e[e.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",e[e.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",e[e.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",e[e.NEVER=512]="NEVER",e[e.LESS=513]="LESS",e[e.EQUAL=514]="EQUAL",e[e.LEQUAL=515]="LEQUAL",e[e.GREATER=516]="GREATER",e[e.NOTEQUAL=517]="NOTEQUAL",e[e.GEQUAL=518]="GEQUAL",e[e.ALWAYS=519]="ALWAYS",e[e.KEEP=7680]="KEEP",e[e.REPLACE=7681]="REPLACE",e[e.INCR=7682]="INCR",e[e.DECR=7683]="DECR",e[e.INVERT=5386]="INVERT",e[e.INCR_WRAP=34055]="INCR_WRAP",e[e.DECR_WRAP=34056]="DECR_WRAP",e[e.VENDOR=7936]="VENDOR",e[e.RENDERER=7937]="RENDERER",e[e.VERSION=7938]="VERSION",e[e.NEAREST=9728]="NEAREST",e[e.LINEAR=9729]="LINEAR",e[e.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",e[e.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",e[e.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",e[e.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",e[e.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",e[e.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",e[e.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",e[e.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE=5890]="TEXTURE",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",e[e.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",e[e.TEXTURE0=33984]="TEXTURE0",e[e.TEXTURE1=33985]="TEXTURE1",e[e.TEXTURE2=33986]="TEXTURE2",e[e.TEXTURE3=33987]="TEXTURE3",e[e.TEXTURE4=33988]="TEXTURE4",e[e.TEXTURE5=33989]="TEXTURE5",e[e.TEXTURE6=33990]="TEXTURE6",e[e.TEXTURE7=33991]="TEXTURE7",e[e.TEXTURE8=33992]="TEXTURE8",e[e.TEXTURE9=33993]="TEXTURE9",e[e.TEXTURE10=33994]="TEXTURE10",e[e.TEXTURE11=33995]="TEXTURE11",e[e.TEXTURE12=33996]="TEXTURE12",e[e.TEXTURE13=33997]="TEXTURE13",e[e.TEXTURE14=33998]="TEXTURE14",e[e.TEXTURE15=33999]="TEXTURE15",e[e.TEXTURE16=34e3]="TEXTURE16",e[e.TEXTURE17=34001]="TEXTURE17",e[e.TEXTURE18=34002]="TEXTURE18",e[e.TEXTURE19=34003]="TEXTURE19",e[e.TEXTURE20=34004]="TEXTURE20",e[e.TEXTURE21=34005]="TEXTURE21",e[e.TEXTURE22=34006]="TEXTURE22",e[e.TEXTURE23=34007]="TEXTURE23",e[e.TEXTURE24=34008]="TEXTURE24",e[e.TEXTURE25=34009]="TEXTURE25",e[e.TEXTURE26=34010]="TEXTURE26",e[e.TEXTURE27=34011]="TEXTURE27",e[e.TEXTURE28=34012]="TEXTURE28",e[e.TEXTURE29=34013]="TEXTURE29",e[e.TEXTURE30=34014]="TEXTURE30",e[e.TEXTURE31=34015]="TEXTURE31",e[e.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",e[e.REPEAT=10497]="REPEAT",e[e.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",e[e.FLOAT_VEC2=35664]="FLOAT_VEC2",e[e.FLOAT_VEC3=35665]="FLOAT_VEC3",e[e.FLOAT_VEC4=35666]="FLOAT_VEC4",e[e.INT_VEC2=35667]="INT_VEC2",e[e.INT_VEC3=35668]="INT_VEC3",e[e.INT_VEC4=35669]="INT_VEC4",e[e.BOOL=35670]="BOOL",e[e.BOOL_VEC2=35671]="BOOL_VEC2",e[e.BOOL_VEC3=35672]="BOOL_VEC3",e[e.BOOL_VEC4=35673]="BOOL_VEC4",e[e.FLOAT_MAT2=35674]="FLOAT_MAT2",e[e.FLOAT_MAT3=35675]="FLOAT_MAT3",e[e.FLOAT_MAT4=35676]="FLOAT_MAT4",e[e.SAMPLER_2D=35678]="SAMPLER_2D",e[e.SAMPLER_CUBE=35680]="SAMPLER_CUBE",e[e.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",e[e.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",e[e.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",e[e.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",e[e.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",e[e.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",e[e.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",e[e.COMPILE_STATUS=35713]="COMPILE_STATUS",e[e.LOW_FLOAT=36336]="LOW_FLOAT",e[e.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",e[e.HIGH_FLOAT=36338]="HIGH_FLOAT",e[e.LOW_INT=36339]="LOW_INT",e[e.MEDIUM_INT=36340]="MEDIUM_INT",e[e.HIGH_INT=36341]="HIGH_INT",e[e.FRAMEBUFFER=36160]="FRAMEBUFFER",e[e.RENDERBUFFER=36161]="RENDERBUFFER",e[e.RGBA4=32854]="RGBA4",e[e.RGB5_A1=32855]="RGB5_A1",e[e.RGB565=36194]="RGB565",e[e.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",e[e.STENCIL_INDEX=6401]="STENCIL_INDEX",e[e.STENCIL_INDEX8=36168]="STENCIL_INDEX8",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL",e[e.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",e[e.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",e[e.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",e[e.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",e[e.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",e[e.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",e[e.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",e[e.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",e[e.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",e[e.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",e[e.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",e[e.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",e[e.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",e[e.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",e[e.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",e[e.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",e[e.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",e[e.NONE=0]="NONE",e[e.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",e[e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",e[e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",e[e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",e[e.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",e[e.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",e[e.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",e[e.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",e[e.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",e[e.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",e[e.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",e[e.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",e[e.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",e[e.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL",e[e.COPY_SRC=1]="COPY_SRC",e[e.COPY_DST=2]="COPY_DST",e[e.SAMPLED=4]="SAMPLED",e[e.STORAGE=8]="STORAGE",e[e.RENDER_ATTACHMENT=16]="RENDER_ATTACHMENT"}(r||(t.gl=r={}))},78574:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AST_TOKEN_TYPES=t.AST_NODE_TYPES=void 0,Object.defineProperty(t,"Component",{enumerable:!0,get:function(){return s.Component}}),Object.defineProperty(t,"ComponentManager",{enumerable:!0,get:function(){return s.ComponentManager}}),Object.defineProperty(t,"ConfigService",{enumerable:!0,get:function(){return c.ConfigService}}),t.Target=t.STORAGE_CLASS=t.DefineValuePlaceholder=void 0,Object.defineProperty(t,"createEntity",{enumerable:!0,get:function(){return l.createEntity}}),Object.defineProperty(t,"gl",{enumerable:!0,get:function(){return u.gl}}),Object.defineProperty(t,"isSafari",{enumerable:!0,get:function(){return f.isSafari}});var n,o,i,a,s=r(52386),u=r(76501),l=r(70147),c=r(94081),f=r(65392);t.AST_TOKEN_TYPES=n,function(e){e.Void="Void",e.Boolean="Boolean",e.Float="Float",e.Uint32="Uint32",e.Int32="Int32",e.Vector="Vector",e.Vector2Float="vec2<f32>",e.Vector3Float="vec3<f32>",e.Vector4Float="vec4<f32>",e.Vector2Boolean="vec2<bool>",e.Vector3Boolean="vec3<bool>",e.Vector4Boolean="vec4<bool>",e.Vector2Uint="vec2<u32>",e.Vector3Uint="vec3<u32>",e.Vector4Uint="vec4<u32>",e.Vector2Int="vec2<i32>",e.Vector3Int="vec3<i32>",e.Vector4Int="vec4<i32>",e.Matrix="Matrix",e.Matrix3x3Float="mat3x3<f32>",e.Matrix4x4Float="mat4x4<i32>",e.Struct="Struct",e.FloatArray="Float[]",e.Vector4FloatArray="vec4<f32>[]"}(n||(t.AST_TOKEN_TYPES=n={})),t.AST_NODE_TYPES=o,function(e){e.Program="Program",e.Identifier="Identifier",e.VariableDeclaration="VariableDeclaration",e.BlockStatement="BlockStatement",e.ReturnStatement="ReturnStatement",e.FunctionDeclaration="FunctionDeclaration",e.VariableDeclarator="VariableDeclarator",e.AssignmentExpression="AssignmentExpression",e.LogicalExpression="LogicalExpression",e.BinaryExpression="BinaryExpression",e.ArrayExpression="ArrayExpression",e.UnaryExpression="UnaryExpression",e.UpdateExpression="UpdateExpression",e.FunctionExpression="FunctionExpression",e.MemberExpression="MemberExpression",e.ConditionalExpression="ConditionalExpression",e.ExpressionStatement="ExpressionStatement",e.CallExpression="CallExpression",e.NumThreadStatement="NumThreadStatement",e.StorageStatement="StorageStatement",e.DoWhileStatement="DoWhileStatement",e.WhileStatement="WhileStatement",e.ForStatement="ForStatement",e.BreakStatement="BreakStatement",e.ContinueStatement="ContinueStatement",e.IfStatement="IfStatement",e.ImportedFunctionStatement="ImportedFunctionStatement"}(o||(t.AST_NODE_TYPES=o={})),t.STORAGE_CLASS=i,function(e){e.Input="Input",e.Output="Output",e.Uniform="Uniform",e.Workgroup="Workgroup",e.UniformConstant="UniformConstant",e.Image="Image",e.StorageBuffer="StorageBuffer",e.Private="Private",e.Function="Function"}(i||(t.STORAGE_CLASS=i={})),t.Target=a,function(e){e.GLSL100="GLSL100",e.GLSL450="GLSL450",e.WGSL="WGSL"}(a||(t.Target=a={}));t.DefineValuePlaceholder="__DefineValuePlaceholder__"},94081:function(e,t,r){"use strict";var n=r(28860);Object.defineProperty(t,"__esModule",{value:!0}),t.ConfigService=void 0;var o=n(r(46834)),i=n(r(43083)),a=function(){function e(){(0,o.default)(this,e),this.config=void 0}return(0,i.default)(e,[{key:"get",value:function(){return this.config}},{key:"set",value:function(e){this.config=e}}]),e}();t.ConfigService=a},65392:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isSafari=void 0;var r="undefined"!=typeof navigator&&/Version\/[\d\.]+.*Safari/.test(navigator.userAgent);t.isSafari=r},50837:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"WebGLEngine",{enumerable:!0,get:function(){return n.WebGLEngine}});var n=r(94145)},23963:function(e,t,r){"use strict";var n=r(28860);Object.defineProperty(t,"__esModule",{value:!0}),t.extractUniforms=function(e){var t={};return Object.keys(e).forEach(function(r){!function e(t,r,n,a){null===r||"number"==typeof r||"boolean"==typeof r||Array.isArray(r)&&"number"==typeof r[0]||(0,o.default)(r)||""===r||void 0!==r.resize?n["".concat(a&&a+".").concat(t)]=r:((0,i.default)(r)&&Object.keys(r).forEach(function(o){e(o,r[o],n,"".concat(a&&a+".").concat(t))}),Array.isArray(r)&&r.forEach(function(r,o){Object.keys(r).forEach(function(i){e(i,r[i],n,"".concat(a&&a+".").concat(t,"[").concat(o,"]"))})}))}(r,e[r],t,"")}),t};var o=n(r(34587)),i=n(r(4361))},68061:function(e,t,r){"use strict";var n=r(28860);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r(46834)),i=n(r(43083)),a=function(){function e(t,r){(0,o.default)(this,e),this.attribute=void 0,this.buffer=void 0;var n=r.buffer,i=r.offset,a=r.stride,s=r.normalized,u=r.size,l=r.divisor;this.buffer=n,this.attribute={buffer:n.get(),offset:i||0,stride:a||0,normalized:s||!1,divisor:l||0},u&&(this.attribute.size=u)}return(0,i.default)(e,[{key:"get",value:function(){return this.attribute}},{key:"updateBuffer",value:function(e){this.buffer.subData(e)}},{key:"destroy",value:function(){this.buffer.destroy()}}]),e}();t.default=a},80573:function(e,t,r){"use strict";var n=r(28860);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r(46834)),i=n(r(43083)),a=r(78574),s=r(32557),u=function(){function e(t,r){(0,o.default)(this,e),this.buffer=void 0;var n=r.data,i=r.usage,u=r.type;this.buffer=t.buffer({data:n,usage:s.usageMap[i||a.gl.STATIC_DRAW],type:s.dataTypeMap[u||a.gl.UNSIGNED_BYTE]})}return(0,i.default)(e,[{key:"get",value:function(){return this.buffer}},{key:"destroy",value:function(){}},{key:"subData",value:function(e){var t=e.data,r=e.offset;this.buffer.subdata(t,r)}}]),e}();t.default=u},57489:function(e,t,r){"use strict";var n=r(28860);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r(31364)),i=n(r(7637)),a=n(r(75650)),s=n(r(81121)),u=n(r(46834)),l=n(r(43083)),c=n(r(34587)),f=r(78574);function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach(function(t){(0,a.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var d="attribute vec3 a_Position;\nattribute vec2 a_TexCoord;\n\nvarying vec2 v_TexCoord;\n\nvoid main() {\n  gl_Position = vec4(a_Position, 1.0);\n  v_TexCoord = a_TexCoord;\n}",y=0,v=!1,g=function(){function e(t,r){var n=this;(0,u.default)(this,e),this.reGl=t,this.context=r,this.entity=(0,f.createEntity)(),this.texFBO=void 0,this.computeCommand=void 0,this.textureCache={},this.outputTextureName=void 0,this.swapOutputTextureName=void 0,this.compiledPingpong=void 0,this.dynamicPingpong=void 0;var o={};this.context.uniforms.forEach(function(e){var t=e.name,r=e.type,i=e.data,a=e.isReferer,s=e.storageClass;if(s===f.STORAGE_CLASS.StorageBuffer){if(a)n.textureCache[t]={data:void 0},o["".concat(t,"Size")]=function(){return i.compiledBundle.context.output.textureSize};else{n.textureCache[t]=n.calcDataTexture(t,r,i);var u=n.textureCache[t],l=u.textureWidth,h=u.isOutput;o["".concat(t,"Size")]=[l,l],h&&(n.outputTextureName=t,n.context.needPingpong&&(n.outputTextureName="".concat(t,"Output"),n.textureCache[n.outputTextureName]=n.calcDataTexture(t,r,i)))}o[t]=function(){return v&&console.log("[".concat(n.entity,"]: ").concat(t," ").concat(n.textureCache[t].id)),n.textureCache[t].texture}}else if(s===f.STORAGE_CLASS.Uniform){if(i&&(Array.isArray(i)||(0,c.default)(i))&&i.length>16)throw new Error("invalid data type ".concat(r));o[t]=function(){return e.data}}});var i=this.getOuputDataTexture(),a=i.textureWidth,s=i.texelCount;o.u_OutputTextureSize=[a,a],o.u_OutputTexelCount=s,this.context.output.textureSize=[a,a];var l={attributes:{a_Position:[[-1,1,0],[-1,-1,0],[1,1,0],[1,-1,0]],a_TexCoord:[[0,1],[0,0],[1,1],[1,0]]},frag:"#ifdef GL_FRAGMENT_PRECISION_HIGH\n  precision highp float;\n#else\n  precision mediump float;\n#endif\n".concat(this.context.shader),uniforms:o,vert:d,primitive:"triangle strip",count:4};this.computeCommand=this.reGl(l)}return(0,l.default)(e,[{key:"run",value:function(){var e=this;this.context.maxIteration>1&&this.context.needPingpong&&(this.compiledPingpong=!0),(this.compiledPingpong||this.dynamicPingpong)&&this.swap(),this.texFBO=this.reGl.framebuffer({color:this.getOuputDataTexture().texture}),this.texFBO.use(function(){e.computeCommand()}),v&&console.log("[".concat(this.entity,"]: output ").concat(this.getOuputDataTexture().id))}},{key:"readData",value:function(){var e=(0,s.default)(o.default.mark(function e(){var t,r,n,i,a,s,u,l,c=this;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.reGl({framebuffer:this.texFBO})(function(){t=c.reGl.read()}),!t){e.next=6;break}if(r=this.getOuputDataTexture(),n=r.originalDataLength,i=r.elementsPerTexel,a=r.typedArrayConstructor,s=void 0===a?Float32Array:a,u=[],4!==i)for(l=0;l<t.length;l+=4)1===i?u.push(t[l]):2===i?u.push(t[l],t[l+1]):u.push(t[l],t[l+1],t[l+2]);else u=t;return e.abrupt("return",new s(u.slice(0,n)));case 6:return e.abrupt("return",new Float32Array);case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"confirmInput",value:function(e,t){var r;this.entity===e.entity?(this.dynamicPingpong=!0,r=this):r=e,this.textureCache[t].id=r.getOuputDataTexture().id,this.textureCache[t].texture=r.getOuputDataTexture().texture,v&&console.log("[".concat(this.entity,"]: confirm input ").concat(t," from model ").concat(r.entity,", ").concat(r.getOuputDataTexture().id))}},{key:"updateUniform",value:function(){}},{key:"updateBuffer",value:function(e,t){arguments.length>2&&void 0!==arguments[2]&&arguments[2];var r=this.context.uniforms.find(function(t){return t.name===e});if(r){var n=this.calcDataTexture(e,r.type,t),o=n.texture,i=n.data;this.textureCache[e].data=i,this.textureCache[e].texture=o}}},{key:"destroy",value:function(){}},{key:"swap",value:function(){if(this.swapOutputTextureName||this.createSwapOutputDataTexture(),this.compiledPingpong){var e=this.context.output.name;this.textureCache[e].id=this.getOuputDataTexture().id,this.textureCache[e].texture=this.getOuputDataTexture().texture}var t=this.outputTextureName;this.outputTextureName=this.swapOutputTextureName,this.swapOutputTextureName=t,v&&console.log("[".concat(this.entity,"]: after swap, output ").concat(this.getOuputDataTexture().id))}},{key:"getOuputDataTexture",value:function(){return this.textureCache[this.outputTextureName]}},{key:"createSwapOutputDataTexture",value:function(){var e=this.cloneDataTexture(this.getOuputDataTexture());this.swapOutputTextureName="".concat(this.entity,"-swap"),this.textureCache[this.swapOutputTextureName]=e}},{key:"cloneDataTexture",value:function(e){var t=e.data,r=e.textureWidth;return p(p({},e),{},{id:y++,texture:this.reGl.texture({width:r,height:r,data:t,type:"float"})})}},{key:"calcDataTexture",value:function(e,t,r){var n=1;t===f.AST_TOKEN_TYPES.Vector4FloatArray&&(n=4);for(var o=[],a=0;a<r.length;a+=n)1===n?o.push(r[a],0,0,0):2===n?o.push(r[a],r[a+1],0,0):3===n?o.push(r[a],r[a+1],r[a+2],0):4===n&&o.push(r[a],r[a+1],r[a+2],r[a+3]);var s=r.length,u=Math.ceil(s/n),l=Math.ceil(Math.sqrt(u)),h=l*l;u<h&&o.push.apply(o,(0,i.default)(new Array(4*(h-u)).fill(0)));var p=this.reGl.texture({width:l,height:l,data:o,type:"float"});return{id:y++,data:o,originalDataLength:s,typedArrayConstructor:(0,c.default)(r)?r.constructor:void 0,textureWidth:l,texture:p,texelCount:u,elementsPerTexel:n,isOutput:e===this.context.output.name}}}]),e}();t.default=g},29653:function(e,t,r){"use strict";var n=r(28860);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r(46834)),i=n(r(43083)),a=r(78574),s=r(32557),u=function(){function e(t,r){(0,o.default)(this,e),this.elements=void 0;var n=r.data,i=r.usage,u=r.type,l=r.count;this.elements=t.elements({data:n,usage:s.usageMap[i||a.gl.STATIC_DRAW],type:s.dataTypeMap[u||a.gl.UNSIGNED_BYTE],count:l})}return(0,i.default)(e,[{key:"get",value:function(){return this.elements}},{key:"subData",value:function(e){var t=e.data;this.elements.subdata(t)}},{key:"destroy",value:function(){this.elements.destroy()}}]),e}();t.default=u},73095:function(e,t,r){"use strict";var n=r(28860);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r(46834)),i=n(r(43083)),a=function(){function e(t,r){(0,o.default)(this,e),this.framebuffer=void 0;var n=r.width,i=r.height,a=r.color,s=r.colors,u=(r.depth,r.stencil,{width:n,height:i});Array.isArray(s)&&(u.colors=s.map(function(e){return e.get()})),a&&"boolean"!=typeof a&&(u.color=a.get()),this.framebuffer=t.framebuffer(u)}return(0,i.default)(e,[{key:"get",value:function(){return this.framebuffer}},{key:"destroy",value:function(){this.framebuffer.destroy()}},{key:"resize",value:function(e){var t=e.width,r=e.height;this.framebuffer.resize(t,r)}}]),e}();t.default=a},97144:function(e,t,r){"use strict";var n=r(28860);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r(60549)),i=n(r(75650)),a=n(r(46834)),s=n(r(43083)),u=r(78574),l=r(23963),c=r(32557);function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach(function(t){(0,i.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var p=function(){function e(t,r){(0,a.default)(this,e),this.reGl=void 0,this.drawCommand=void 0,this.uniforms={},this.reGl=t;var n=r.vs,o=r.fs,i=r.defines,s=r.attributes,f=r.uniforms,h=r.primitive,p=r.count,d=r.elements,y=r.depth,v=r.blend,g=r.stencil,m=r.cull,b=r.instances,w=r.scissor,_=r.viewport,x={};f&&(this.uniforms=(0,l.extractUniforms)(f),Object.keys(f).forEach(function(e){x[e]=t.prop(e)}));var S={};Object.keys(s).forEach(function(e){S[e]=s[e].get()});var O=i&&this.generateDefines(i)||"",P={attributes:S,frag:"#ifdef GL_FRAGMENT_PRECISION_HIGH\n  precision highp float;\n#else\n  precision mediump float;\n#endif\n".concat(O,"\n").concat(o),uniforms:x,vert:"\n".concat(O,"\n").concat(n),primitive:c.primitiveMap[void 0===h?u.gl.TRIANGLES:h]};b&&(P.instances=b),p&&(P.count=p),d&&(P.elements=d.get()),w&&(P.scissor=w),_&&(P.viewport=_),this.initDepthDrawParams({depth:y},P),this.initBlendDrawParams({blend:v},P),this.initStencilDrawParams({stencil:g},P),this.initCullDrawParams({cull:m},P),this.drawCommand=t(P)}return(0,s.default)(e,[{key:"addUniforms",value:function(e){this.uniforms=h(h({},this.uniforms),(0,l.extractUniforms)(e))}},{key:"draw",value:function(e){var t=h(h({},this.uniforms),(0,l.extractUniforms)(e.uniforms||{})),r={};Object.keys(t).forEach(function(e){var n=(0,o.default)(t[e]);"boolean"===n||"number"===n||Array.isArray(t[e])||t[e].BYTES_PER_ELEMENT?r[e]=t[e]:"string"===n||(r[e]=t[e].get())}),this.drawCommand(r)}},{key:"destroy",value:function(){}},{key:"initDepthDrawParams",value:function(e,t){var r=e.depth;r&&(t.depth={enable:void 0===r.enable||!!r.enable,mask:void 0===r.mask||!!r.mask,func:c.depthFuncMap[r.func||u.gl.LESS],range:r.range||[0,1]})}},{key:"initBlendDrawParams",value:function(e,t){var r=e.blend;if(r){var n=r.enable,o=r.func,i=r.equation,a=r.color,s=void 0===a?[0,0,0,0]:a;t.blend={enable:!!n,func:{srcRGB:c.blendFuncMap[o&&o.srcRGB||u.gl.SRC_ALPHA],srcAlpha:c.blendFuncMap[o&&o.srcAlpha||u.gl.SRC_ALPHA],dstRGB:c.blendFuncMap[o&&o.dstRGB||u.gl.ONE_MINUS_SRC_ALPHA],dstAlpha:c.blendFuncMap[o&&o.dstAlpha||u.gl.ONE_MINUS_SRC_ALPHA]},equation:{rgb:c.blendEquationMap[i&&i.rgb||u.gl.FUNC_ADD],alpha:c.blendEquationMap[i&&i.alpha||u.gl.FUNC_ADD]},color:s}}}},{key:"initStencilDrawParams",value:function(e,t){var r=e.stencil;if(r){var n=r.enable,o=r.mask,i=void 0===o?-1:o,a=r.func,s=void 0===a?{cmp:u.gl.ALWAYS,ref:0,mask:-1}:a,l=r.opFront,f=void 0===l?{fail:u.gl.KEEP,zfail:u.gl.KEEP,zpass:u.gl.KEEP}:l,p=r.opBack,d=void 0===p?{fail:u.gl.KEEP,zfail:u.gl.KEEP,zpass:u.gl.KEEP}:p;t.stencil={enable:!!n,mask:i,func:h(h({},s),{},{cmp:c.stencilFuncMap[s.cmp]}),opFront:{fail:c.stencilOpMap[f.fail],zfail:c.stencilOpMap[f.zfail],zpass:c.stencilOpMap[f.zpass]},opBack:{fail:c.stencilOpMap[d.fail],zfail:c.stencilOpMap[d.zfail],zpass:c.stencilOpMap[d.zpass]}}}}},{key:"initCullDrawParams",value:function(e,t){var r=e.cull;if(r){var n=r.enable,o=r.face,i=void 0===o?u.gl.BACK:o;t.cull={enable:!!n,face:c.cullFaceMap[i]}}}},{key:"generateDefines",value:function(e){return Object.keys(e).map(function(t){return"#define ".concat(t," ").concat(Number(e[t]))}).join("\n")}}]),e}();t.default=p},79191:function(e,t,r){"use strict";var n=r(28860);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r(46834)),i=n(r(43083)),a=r(78574),s=r(32557),u=function(){function e(t,r){(0,o.default)(this,e),this.texture=void 0,this.width=void 0,this.height=void 0;var n=r.data,i=r.type,u=void 0===i?a.gl.UNSIGNED_BYTE:i,l=r.width,c=r.height,f=r.flipY,h=void 0!==f&&f,p=r.format,d=void 0===p?a.gl.RGBA:p,y=r.mipmap,v=void 0!==y&&y,g=r.wrapS,m=void 0===g?a.gl.CLAMP_TO_EDGE:g,b=r.wrapT,w=void 0===b?a.gl.CLAMP_TO_EDGE:b,_=r.aniso,x=void 0===_?0:_,S=r.alignment,O=void 0===S?1:S,P=r.premultiplyAlpha,E=void 0!==P&&P,k=r.mag,M=void 0===k?a.gl.NEAREST:k,C=r.min,j=void 0===C?a.gl.NEAREST:C,T=r.colorSpace,A=void 0===T?a.gl.BROWSER_DEFAULT_WEBGL:T;this.width=l,this.height=c;var I={width:l,height:c,type:s.dataTypeMap[u],format:s.formatMap[d],wrapS:s.wrapModeMap[m],wrapT:s.wrapModeMap[w],mag:s.filterMap[M],min:s.filterMap[j],alignment:O,flipY:h,colorSpace:s.colorSpaceMap[A],premultiplyAlpha:E,aniso:x};n&&(I.data=n),"number"==typeof v?I.mipmap=s.mipmapMap[v]:"boolean"==typeof v&&(I.mipmap=v),this.texture=t.texture(I)}return(0,i.default)(e,[{key:"get",value:function(){return this.texture}},{key:"update",value:function(){this.texture._texture.bind()}},{key:"resize",value:function(e){var t=e.width,r=e.height;this.texture.resize(t,r),this.width=t,this.height=r}},{key:"destroy",value:function(){this.texture.destroy()}}]),e}();t.default=u},32557:function(e,t,r){"use strict";var n=r(28860);Object.defineProperty(t,"__esModule",{value:!0}),t.wrapModeMap=t.usageMap=t.stencilOpMap=t.stencilFuncMap=t.primitiveMap=t.mipmapMap=t.formatMap=t.filterMap=t.depthFuncMap=t.dataTypeMap=t.cullFaceMap=t.colorSpaceMap=t.blendFuncMap=t.blendEquationMap=void 0;var o,i,a,s,u,l,c,f,h,p,d,y,v,g,m=n(r(75650)),b=r(78574),w=(o={},(0,m.default)(o,b.gl.POINTS,"points"),(0,m.default)(o,b.gl.LINES,"lines"),(0,m.default)(o,b.gl.LINE_LOOP,"line loop"),(0,m.default)(o,b.gl.LINE_STRIP,"line strip"),(0,m.default)(o,b.gl.TRIANGLES,"triangles"),(0,m.default)(o,b.gl.TRIANGLE_FAN,"triangle fan"),(0,m.default)(o,b.gl.TRIANGLE_STRIP,"triangle strip"),o);t.primitiveMap=w;var _=(i={},(0,m.default)(i,b.gl.STATIC_DRAW,"static"),(0,m.default)(i,b.gl.DYNAMIC_DRAW,"dynamic"),(0,m.default)(i,b.gl.STREAM_DRAW,"stream"),i);t.usageMap=_;var x=(a={},(0,m.default)(a,b.gl.BYTE,"int8"),(0,m.default)(a,b.gl.UNSIGNED_INT,"int16"),(0,m.default)(a,b.gl.INT,"int32"),(0,m.default)(a,b.gl.UNSIGNED_BYTE,"uint8"),(0,m.default)(a,b.gl.UNSIGNED_SHORT,"uint16"),(0,m.default)(a,b.gl.UNSIGNED_INT,"uint32"),(0,m.default)(a,b.gl.FLOAT,"float"),a);t.dataTypeMap=x;var S=(s={},(0,m.default)(s,b.gl.ALPHA,"alpha"),(0,m.default)(s,b.gl.LUMINANCE,"luminance"),(0,m.default)(s,b.gl.LUMINANCE_ALPHA,"luminance alpha"),(0,m.default)(s,b.gl.RGB,"rgb"),(0,m.default)(s,b.gl.RGBA,"rgba"),(0,m.default)(s,b.gl.RGBA4,"rgba4"),(0,m.default)(s,b.gl.RGB5_A1,"rgb5 a1"),(0,m.default)(s,b.gl.RGB565,"rgb565"),(0,m.default)(s,b.gl.DEPTH_COMPONENT,"depth"),(0,m.default)(s,b.gl.DEPTH_STENCIL,"depth stencil"),s);t.formatMap=S;var O=(u={},(0,m.default)(u,b.gl.DONT_CARE,"dont care"),(0,m.default)(u,b.gl.NICEST,"nice"),(0,m.default)(u,b.gl.FASTEST,"fast"),u);t.mipmapMap=O;var P=(l={},(0,m.default)(l,b.gl.NEAREST,"nearest"),(0,m.default)(l,b.gl.LINEAR,"linear"),(0,m.default)(l,b.gl.LINEAR_MIPMAP_LINEAR,"mipmap"),(0,m.default)(l,b.gl.NEAREST_MIPMAP_LINEAR,"nearest mipmap linear"),(0,m.default)(l,b.gl.LINEAR_MIPMAP_NEAREST,"linear mipmap nearest"),(0,m.default)(l,b.gl.NEAREST_MIPMAP_NEAREST,"nearest mipmap nearest"),l);t.filterMap=P;var E=(c={},(0,m.default)(c,b.gl.REPEAT,"repeat"),(0,m.default)(c,b.gl.CLAMP_TO_EDGE,"clamp"),(0,m.default)(c,b.gl.MIRRORED_REPEAT,"mirror"),c);t.wrapModeMap=E;var k=(f={},(0,m.default)(f,b.gl.NONE,"none"),(0,m.default)(f,b.gl.BROWSER_DEFAULT_WEBGL,"browser"),f);t.colorSpaceMap=k;var M=(h={},(0,m.default)(h,b.gl.NEVER,"never"),(0,m.default)(h,b.gl.ALWAYS,"always"),(0,m.default)(h,b.gl.LESS,"less"),(0,m.default)(h,b.gl.LEQUAL,"lequal"),(0,m.default)(h,b.gl.GREATER,"greater"),(0,m.default)(h,b.gl.GEQUAL,"gequal"),(0,m.default)(h,b.gl.EQUAL,"equal"),(0,m.default)(h,b.gl.NOTEQUAL,"notequal"),h);t.depthFuncMap=M;var C=(p={},(0,m.default)(p,b.gl.FUNC_ADD,"add"),(0,m.default)(p,b.gl.MIN_EXT,"min"),(0,m.default)(p,b.gl.MAX_EXT,"max"),(0,m.default)(p,b.gl.FUNC_SUBTRACT,"subtract"),(0,m.default)(p,b.gl.FUNC_REVERSE_SUBTRACT,"reverse subtract"),p);t.blendEquationMap=C;var j=(d={},(0,m.default)(d,b.gl.ZERO,"zero"),(0,m.default)(d,b.gl.ONE,"one"),(0,m.default)(d,b.gl.SRC_COLOR,"src color"),(0,m.default)(d,b.gl.ONE_MINUS_SRC_COLOR,"one minus src color"),(0,m.default)(d,b.gl.SRC_ALPHA,"src alpha"),(0,m.default)(d,b.gl.ONE_MINUS_SRC_ALPHA,"one minus src alpha"),(0,m.default)(d,b.gl.DST_COLOR,"dst color"),(0,m.default)(d,b.gl.ONE_MINUS_DST_COLOR,"one minus dst color"),(0,m.default)(d,b.gl.DST_ALPHA,"dst alpha"),(0,m.default)(d,b.gl.ONE_MINUS_DST_ALPHA,"one minus dst alpha"),(0,m.default)(d,b.gl.CONSTANT_COLOR,"constant color"),(0,m.default)(d,b.gl.ONE_MINUS_CONSTANT_COLOR,"one minus constant color"),(0,m.default)(d,b.gl.CONSTANT_ALPHA,"constant alpha"),(0,m.default)(d,b.gl.ONE_MINUS_CONSTANT_ALPHA,"one minus constant alpha"),(0,m.default)(d,b.gl.SRC_ALPHA_SATURATE,"src alpha saturate"),d);t.blendFuncMap=j;var T=(y={},(0,m.default)(y,b.gl.NEVER,"never"),(0,m.default)(y,b.gl.ALWAYS,"always"),(0,m.default)(y,b.gl.LESS,"less"),(0,m.default)(y,b.gl.LEQUAL,"lequal"),(0,m.default)(y,b.gl.GREATER,"greater"),(0,m.default)(y,b.gl.GEQUAL,"gequal"),(0,m.default)(y,b.gl.EQUAL,"equal"),(0,m.default)(y,b.gl.NOTEQUAL,"notequal"),y);t.stencilFuncMap=T;var A=(v={},(0,m.default)(v,b.gl.ZERO,"zero"),(0,m.default)(v,b.gl.KEEP,"keep"),(0,m.default)(v,b.gl.REPLACE,"replace"),(0,m.default)(v,b.gl.INVERT,"invert"),(0,m.default)(v,b.gl.INCR,"increment"),(0,m.default)(v,b.gl.DECR,"decrement"),(0,m.default)(v,b.gl.INCR_WRAP,"increment wrap"),(0,m.default)(v,b.gl.DECR_WRAP,"decrement wrap"),v);t.stencilOpMap=A;var I=(g={},(0,m.default)(g,b.gl.FRONT,"front"),(0,m.default)(g,b.gl.BACK,"back"),g);t.cullFaceMap=I},94145:function(e,t,r){"use strict";var n=r(28860);Object.defineProperty(t,"__esModule",{value:!0}),t.WebGLEngine=void 0;var o=n(r(31364)),i=n(r(81121)),a=n(r(46834)),s=n(r(43083)),u=r(78574),l=n(r(44934)),c=n(r(68061)),f=n(r(80573)),h=n(r(57489)),p=n(r(29653)),d=n(r(73095)),y=n(r(97144)),v=n(r(79191)),g=function(){function e(){var t=this;(0,a.default)(this,e),this.supportWebGPU=!1,this.useWGSL=!1,this.$canvas=void 0,this.gl=void 0,this.inited=void 0,this.createModel=function(){var e=(0,i.default)(o.default.mark(function e(r){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!r.uniforms){e.next=3;break}return e.next=3,Promise.all(Object.keys(r.uniforms).map(function(){var e=(0,i.default)(o.default.mark(function e(t){var n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!r.uniforms[t]||void 0===r.uniforms[t].load){e.next=5;break}return e.next=3,r.uniforms[t].load();case 3:n=e.sent,r.uniforms[t]=n;case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()));case 3:return e.abrupt("return",new y.default(t.gl,r));case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),this.createAttribute=function(e){return new c.default(t.gl,e)},this.createBuffer=function(e){return new f.default(t.gl,e)},this.createElements=function(e){return new p.default(t.gl,e)},this.createTexture2D=function(e){return new v.default(t.gl,e)},this.createFramebuffer=function(e){return new d.default(t.gl,e)},this.useFramebuffer=function(e,r){t.gl({framebuffer:e?e.get():null})(r)},this.createComputeModel=function(){var e=(0,i.default)(o.default.mark(function e(r){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new h.default(t.gl,r));case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),this.clear=function(e){var r=e.color,n=e.depth,o=e.stencil,i=e.framebuffer,a=void 0===i?null:i,s={color:r,depth:n,stencil:o};s.framebuffer=null===a?a:a.get(),t.gl.clear(s)},this.setScissor=function(e){t.gl&&t.gl._gl&&(e.enable&&e.box?(t.gl._gl.enable(u.gl.SCISSOR_TEST),t.gl._gl.scissor(e.box.x,e.box.y,e.box.width,e.box.height)):t.gl._gl.disable(u.gl.SCISSOR_TEST),t.gl._refresh())},this.viewport=function(e){var r=e.x,n=e.y,o=e.width,i=e.height;t.gl&&t.gl._gl&&(t.gl._gl.viewport(r,n,o,i),t.gl._refresh())},this.readPixels=function(e){var r=e.framebuffer,n={x:e.x,y:e.y,width:e.width,height:e.height};return r&&(n.framebuffer=r.get()),t.gl.read(n)},this.getCanvas=function(){return t.$canvas},this.getGLContext=function(){return t.gl._gl},this.destroy=function(){t.gl&&(t.gl.destroy(),t.inited=!1)}}return(0,s.default)(e,[{key:"init",value:function(){var e=(0,i.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.inited){e.next=2;break}return e.abrupt("return");case 2:return this.$canvas=t.canvas,e.next=5,new Promise(function(e,r){(0,l.default)({canvas:t.canvas,attributes:{alpha:!0,antialias:t.antialias,premultipliedAlpha:!0},pixelRatio:1,extensions:["OES_element_index_uint","OES_texture_float","OES_standard_derivatives","angle_instanced_arrays"],optionalExtensions:["EXT_texture_filter_anisotropic","EXT_blend_minmax","WEBGL_depth_texture"],profile:!0,onDone:function(t,n){!t&&n||r(t),e(n)}})});case 5:this.gl=e.sent,this.inited=!0;case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"isFloatSupported",value:function(){return this.gl.limits.readFloat}},{key:"beginFrame",value:function(){}},{key:"endFrame",value:function(){}}]),e}();t.WebGLEngine=g},655:function(e,t,r){"use strict";var n=r(28860);Object.defineProperty(t,"__esModule",{value:!0}),t.Kernel=void 0;var o=n(r(31364)),i=n(r(81121)),a=n(r(75650)),s=n(r(46834)),u=n(r(43083)),l=n(r(34587)),c=n(r(39505)),f=n(r(43936)),h=r(78574),p=r(94499);function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach(function(t){(0,a.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var v=function(){function e(t,r){(0,s.default)(this,e),this.engine=t,this.configService=r,this.model=void 0,this.dirty=!0,this.compiledBundle=void 0,this.initPromise=void 0}return(0,u.default)(e,[{key:"init",value:function(){var e=this.configService.get(),t=e.canvas,r=e.engineOptions;this.initPromise=this.engine.init(y({canvas:t||(0,p.createCanvas)(),antialiasing:!1},r))}},{key:"setBundle",value:function(e){this.compiledBundle=JSON.parse(JSON.stringify(e))}},{key:"setDispatch",value:function(e){return this.compiledBundle.context&&(this.compiledBundle.context.dispatch=e),this}},{key:"setMaxIteration",value:function(e){return this.compiledBundle.context&&(this.compiledBundle.context.maxIteration=e),this}},{key:"setBinding",value:function(e,t){var r=this;if("string"==typeof e){var n=(0,c.default)(t)||(0,l.default)(t)||(0,f.default)(t);if(this.compiledBundle&&this.compiledBundle.context){var o=this.compiledBundle.context.defines.find(function(t){return t.name===e});if(o)return o.value=t,this;var i=this.compiledBundle.context.uniforms.find(function(t){return t.name===e});i&&(n?(i.data=t,i.isReferer=!1,i.storageClass===h.STORAGE_CLASS.Uniform?this.model&&this.model.updateUniform(e,t):this.model&&this.model.updateBuffer(e,t)):(i.isReferer=!0,i.data=t))}}else Object.keys(e).forEach(function(t){r.setBinding(t,e[t])});return this}},{key:"execute",value:function(){var e=(0,i.default)(o.default.mark(function e(){var t,r,n=this,i=arguments;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=i.length>0&&void 0!==i[0]?i[0]:1,!this.dirty){e.next=6;break}return this.compiledBundle.context&&(t>1?this.compiledBundle.context.maxIteration=t:this.compiledBundle.context.maxIteration++),e.next=5,this.compile();case 5:this.dirty=!1;case 6:for(this.engine.beginFrame(),this.engine.clear({}),this.compiledBundle.context&&this.compiledBundle.context.uniforms.filter(function(e){return e.isReferer}).forEach(function(e){var t=e.data,r=e.name;n.model.confirmInput(t.model,r)}),r=0;r<t;r++)this.model.run();return this.engine.endFrame(),e.abrupt("return",this);case 12:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getOutput",value:function(){var e=(0,i.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.model.readData());case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"compile",value:function(){var e=(0,i.default)(o.default.mark(function e(){var t,r,n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initPromise;case 2:return t=y({},this.compiledBundle.context),r=this.engine.supportWebGPU?this.engine.useWGSL?h.Target.WGSL:h.Target.GLSL450:h.Target.GLSL100,n=this.compiledBundle.shaders[r],t.defines.filter(function(e){return e.runtime}).forEach(function(e){var t="".concat(h.DefineValuePlaceholder).concat(e.name);n=n.replace(t,"".concat(e.value))}),t.shader=n,t.uniforms.forEach(function(e){if(!e.data&&e.storageClass===h.STORAGE_CLASS.StorageBuffer){var r=1;e.type===h.AST_TOKEN_TYPES.FloatArray?r=1:e.type===h.AST_TOKEN_TYPES.Vector4FloatArray&&(r=4),e.data=new Float32Array(t.output.length*r).fill(0)}}),this.compiledBundle.context=t,e.next=11,this.engine.createComputeModel(this.compiledBundle.context);case 11:this.model=e.sent;case 12:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}]),e}();t.Kernel=v},43439:function(e,t,r){"use strict";var n=r(28860);Object.defineProperty(t,"__esModule",{value:!0}),t.World=void 0;var o=n(r(46834)),i=n(r(43083)),a=r(78574),s=r(50837),u=r(655),l=function(){function e(){(0,o.default)(this,e),this.engine=void 0,this.configService=new a.ConfigService}return(0,i.default)(e,[{key:"setConfig",value:function(e){this.configService.set(e)}},{key:"setEngine",value:function(e){this.engine=e}},{key:"createEntity",value:function(){return(0,a.createEntity)()}},{key:"createKernel",value:function(e){var t=new u.Kernel(this.engine,this.configService);return"string"==typeof e?t.setBundle(JSON.parse(e)):t.setBundle(e),t.init(),t}},{key:"destroy",value:function(){this.engine.destroy()}}],[{key:"create",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=new e;return r.setConfig(t),r.setEngine(new s.WebGLEngine),r}}]),e}();t.World=l},66887:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"Kernel",{enumerable:!0,get:function(){return n.Kernel}}),Object.defineProperty(t,"World",{enumerable:!0,get:function(){return o.World}});var n=r(655),o=r(43439)},94499:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createCanvas=function(){if("undefined"!=typeof document)return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}},58279:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,o=r(31834),i=(n=r(90625))&&n.__esModule?n:{default:n};var a=function(){function e(){}return e.registerBehavior=function(t,r){if(!r)throw new Error("please specify handler for this behavior: ".concat(t));var n=(0,o.clone)(i.default);Object.assign(n,r);var a=function(e){var t=this;Object.assign(this,this.getDefaultCfg(),e);var r=this.getEvents();this.events=null;var n={};r&&((0,o.each)(r,function(e,r){n[r]=(0,o.wrapBehavior)(t,e)}),this.events=n)};a.prototype=n,e.types[t]=a},e.hasBehavior=function(t){return!!e.types[t]},e.getBehavior=function(t){return e.types[t]},e.types={},e}();t.default=a},90625:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(31834),o={getDefaultCfg:function(){return{}},getEvents:function(){return{}},updateCfg:function(e){return Object.assign(this,e),!0},shouldBegin:function(){return!0},shouldUpdate:function(){return!0},shouldEnd:function(){return!0},bind:function(e){var t=this,r=this.events;this.graph=e,"drag-canvas"!==this.type&&"brush-select"!==this.type&&"lasso-select"!==this.type||e.get("canvas").set("draggable",!0),(0,n.each)(r,function(t,r){e.on(r,t)}),document.addEventListener("visibilitychange",function(){t.keydown=!1})},unbind:function(e){var t=this.events,r=e.get("canvas").get("draggable");"drag-canvas"!==this.type&&"brush-select"!==this.type&&"lasso-select"!==this.type||e.get("canvas").set("draggable",!1),(0,n.each)(t,function(t,r){e.off(r,t)}),e.get("canvas").set("draggable",r)},get:function(e){return this[e]},set:function(e,t){return this[e]=t,this}};t.default=o},2235:function(e,t,r){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=((n=r(58279))&&n.__esModule?n:{default:n}).default;t.default=o},22245:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={triangle:function(e,t,r){void 0===e&&(e=10),void 0===t&&(t=15),void 0===r&&(r=0);var n=2*r;return"M ".concat(n,",0 L ").concat(n+t,",-").concat(e/2," L ").concat(n+t,",").concat(e/2," Z")},vee:function(e,t,r){void 0===e&&(e=15),void 0===t&&(t=20),void 0===r&&(r=0);var n=2*r;return"M ".concat(n,",0 L ").concat(n+t,",-").concat(e/2,"\n        L ").concat(n+2*t/3,",0 L ").concat(n+t,",").concat(e/2," Z")},circle:function(e,t){return void 0===e&&(e=5),void 0===t&&(t=0),"M ".concat(2*t,", 0\n            a ").concat(e,",").concat(e," 0 1,0 ").concat(2*e,",0\n            a ").concat(e,",").concat(e," 0 1,0 ").concat(2*-e,",0")},rect:function(e,t,r){void 0===e&&(e=10),void 0===t&&(t=10),void 0===r&&(r=0);var n=2*r;return"M ".concat(n,",").concat(-e/2," \n        L ").concat(n+t,",").concat(-e/2," \n        L ").concat(n+t,",").concat(e/2," \n        L ").concat(n,",").concat(e/2," Z")},diamond:function(e,t,r){void 0===e&&(e=15),void 0===t&&(t=15),void 0===r&&(r=0);var n=2*r;return"M ".concat(n,",0 \n        L ").concat(n+t/2,",").concat(-e/2," \n        L ").concat(n+t,",0 \n        L ").concat(n+t/2,",").concat(e/2," Z")},triangleRect:function(e,t,r,n,o,i){void 0===e&&(e=15),void 0===t&&(t=15),void 0===r&&(r=15),void 0===n&&(n=3),void 0===o&&(o=5),void 0===i&&(i=0);var a=2*i,s=a+t+o;return"M ".concat(a,",0 L ").concat(a+t,",-").concat(e/2," L ").concat(a+t,",").concat(e/2," Z\n            M ").concat(s,", -").concat(r/2,"\n            L ").concat(s+n," -").concat(r/2,"\n            L ").concat(s+n," ").concat(r/2,"\n            L ").concat(s," ").concat(r/2,"\n            Z")}}},48485:function(e,t,r){"use strict";var n=r(97582),o=r(31834),i=u(r(36605)),a=u(r(27144)),s=r(15692);function u(e){return e&&e.__esModule?e:{default:e}}var l={itemType:"combo",shapeType:"single-combo",labelPosition:"top",refX:i.default.comboLabel.refX,refY:i.default.comboLabel.refY,options:{style:{stroke:i.default.defaultCombo.style.stroke,fill:i.default.defaultCombo.style.fill,lineWidth:i.default.defaultCombo.style.lineWidth},labelCfg:{style:{fill:i.default.comboLabel.style.fill,fontSize:i.default.comboLabel.style.fontSize,fontFamily:i.default.windowFontFamily}},stateStyles:(0,n.__assign)({},i.default.comboStateStyles),collapsedSubstituteIcon:{show:!1,img:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*RsnHRqLfJn4AAAAAAAAAAAAAARQnAQ"}},getSize:function(e){var t=(0,o.clone)(e.size||this.options.size||i.default.defaultCombo.size);return(0,o.isArray)(t)&&1===t.length&&(t=[t[0],t[0]]),(0,o.isArray)(t)||(t=[t,t]),t},getLabelStyleByPosition:function(e,t){var r=t.position||this.labelPosition,n=e.style,i=e.padding||this.options.padding;(0,o.isArray)(i)&&(i=Math.max.apply(Math,i));var a=t.refX,s=t.refY;(0,o.isNil)(a)&&(a=this.refX),(0,o.isNil)(s)&&(s=this.refY);var u,l=this.getSize(e),c=(Math.max(n.r,l[0]/2)||l[0]/2)+i;switch(r){case"top":u={x:0,y:-c-s,textBaseline:"bottom",textAlign:"center"};break;case"bottom":u={x:0,y:c+s,textBaseline:"bottom",textAlign:"center"};break;case"left":u={x:-c+a,y:0,textAlign:"left"};break;case"center":u={x:0,y:0,text:e.label,textAlign:"center"};break;default:u={x:c+a,y:0,textAlign:"right"}}return u.text=e.label,u},drawShape:function(e,t){var r=this.shapeType,n=this.getShapeStyle(e);return t.addShape(r,{attrs:n,draggable:!0,name:"combo-shape"})},updateCollapsedIcon:function(e,t,r){var o=e.collapsed,i=e.collapsedSubstituteIcon,a=void 0===i?{}:i,s=Object.assign({},this.options.collapsedSubstituteIcon,a),u=s.show,l=s.img,c=s.width,f=s.height,h=t.getContainer(),p=h.find(function(e){return"combo-collapsed-substitute-icon"===e.get("name")}),d=p&&!p.destroyed,y=t.get("keyShape");if(o&&u){if(d)p.show();else{var v={width:c||2*r.r||r.width,height:f||2*r.r||r.height};p=h.addShape("image",{attrs:(0,n.__assign)({img:l,x:-v.width/2,y:-v.height/2},v),name:"combo-collapsed-substitute-icon",draggable:!0})}y.hide()}else d&&(p.hide(),y.show())},updateShape:function(e,t,r){var o=this,i=t.get("keyShape");t.get("animate")&&(void 0===e.animate?this.options.animate:e.animate)&&i.animate?(e.collapsed||this.updateCollapsedIcon(e,t,r),i.animate(r,{duration:200,easing:"easeLinear",callback:function(){e.collapsed&&o.updateCollapsedIcon(e,t,r)}})):(i.attr((0,n.__assign)({},r)),this.updateCollapsedIcon(e,t,r)),this.updateLabel(e,t)}},c=(0,n.__assign)((0,n.__assign)({},s.shapeBase),l);a.default.registerCombo("single-combo",c)},42560:function(e,t,r){"use strict";var n=r(97582),o=s(r(36605)),i=s(r(27144)),a=r(31834);function s(e){return e&&e.__esModule?e:{default:e}}i.default.registerCombo("circle",{options:{size:[o.default.defaultCombo.size[0],o.default.defaultCombo.size[0]],padding:Math.max.apply(Math,o.default.defaultCombo.padding),animate:!0,style:{stroke:o.default.defaultCombo.style.stroke,fill:o.default.defaultCombo.style.fill,lineWidth:o.default.defaultCombo.style.lineWidth},labelCfg:{style:{fill:o.default.comboLabel.style.fill,fontSize:o.default.comboLabel.style.fontSize},refX:0,refY:0},stateStyles:(0,n.__assign)({},o.default.comboStateStyles),collapsedSubstituteIcon:{show:!1,img:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*RsnHRqLfJn4AAAAAAAAAAAAAARQnAQ"}},shapeType:"circle",labelPosition:"top",drawShape:function(e,t){var r=this.getShapeStyle(e);return delete r.height,delete r.width,t.addShape("circle",{attrs:r,className:"circle-combo",name:"circle-combo",draggable:!0})},getShapeStyle:function(e){var t=this.options.style,r=e.padding||this.options.padding;(0,a.isArray)(r)&&(r=Math.max.apply(Math,r));var i,s={stroke:e.color},u=(0,a.mix)({},t,s,e.style),l=e.collapsed&&e.fixCollapseSize?e.fixCollapseSize:e.fixSize;if(l)i=(0,a.isNumber)(l)?l/2:l[0]/2;else{var c=this.getSize(e);i=!(0,a.isNumber)(u.r)||isNaN(u.r)?c[0]/2||o.default.defaultCombo.style.r:Math.max(u.r,c[0]/2)||c[0]/2}u.r=i+r;var f=(0,n.__assign)({x:0,y:0},u);return e.style?e.style.r=i:e.style={r:i},f},update:function(e,t){var r=this.getSize(e),n=e.padding||this.options.padding;(0,a.isArray)(n)&&(n=Math.max.apply(Math,n));var o,i=(0,a.clone)(e.style),s=e.collapsed&&e.fixCollapseSize?e.fixCollapseSize:e.fixSize;o=s?(0,a.isNumber)(s)?s/2:s[0]/2:Math.max(i.r,r[0]/2)||r[0]/2,i.r=o+n;var u=t.get("sizeCache");u&&(u.r=i.r);var l={stroke:e.color},c=t.get("keyShape"),f=(0,a.mix)({},c.attr(),l,i);e.style?e.style.r=o:e.style={r:o},this.updateShape(e,t,f,!0)}},"single-combo")},88651:function(e,t,r){"use strict";r(42560),r(43949)},43949:function(e,t,r){"use strict";var n=r(97582),o=r(31834),i=a(r(36605));function a(e){return e&&e.__esModule?e:{default:e}}a(r(27144)).default.registerCombo("rect",{options:{size:[40,5],padding:[25,20,15,20],animate:!0,style:{radius:0,stroke:i.default.defaultCombo.style.stroke,fill:i.default.defaultCombo.style.fill,lineWidth:i.default.defaultCombo.style.lineWidth},labelCfg:{style:{fill:i.default.comboLabel.style.fill,fontSize:i.default.comboLabel.style.fontSize,fontFamily:i.default.windowFontFamily}},anchorPoints:[[0,.5],[1,.5]],stateStyles:(0,n.__assign)({},i.default.comboStateStyles),collapsedSubstituteIcon:{show:!1,img:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*RsnHRqLfJn4AAAAAAAAAAAAAARQnAQ"}},shapeType:"rect",labelPosition:"top",drawShape:function(e,t){var r=this.getShapeStyle(e);return t.addShape("rect",{attrs:r,className:"rect-combo",name:"rect-combo",draggable:!0})},getLabelStyleByPosition:function(e,t){var r=t.position||this.labelPosition,n=e.style,i=e.padding||this.options.padding;(0,o.isNumber)(i)&&(i=[i,i,i,i]);var a=t.refX,s=t.refY;(0,o.isNil)(a)&&(a=this.refX),(0,o.isNil)(s)&&(s=this.refY);var u,l=-n.width/2-i[3],c=n.width/2+i[1],f=-n.height/2-i[0],h=n.height/2+i[2];switch(r){case"top":u={x:l+a,y:f+s,textBaseline:"top",textAlign:"left"};break;case"bottom":u={x:0,y:h+s,textBaseline:"top",textAlign:"center"};break;case"left":u={x:l+s,y:0,textAlign:"left"};break;case"center":u={x:0,y:0,text:e.label,textAlign:"center"};break;case"top-center":u={x:0,y:f+s,textBaseline:"top",textAlign:"center"};break;default:u={x:c+a,y:0,textAlign:"right"}}return u.text=e.label,u},getShapeStyle:function(e){var t=this.options.style,r=e.padding||this.options.padding;(0,o.isNumber)(r)&&(r=[r,r,r,r]);var a,s,u={stroke:e.color},l=(0,o.mix)({},t,u,e.style),c=this.getSize(e),f=e.collapsed&&e.fixCollapseSize?e.fixCollapseSize:e.fixSize;f?(0,o.isNumber)(f)?(a=f,s=f):(a=f[0],s=f[1]):(a=!(0,o.isNumber)(l.width)||isNaN(l.width)?c[0]||i.default.defaultCombo.style.width:Math.max(l.width,c[0])||c[0],s=!(0,o.isNumber)(l.height)||isNaN(l.height)?c[1]||i.default.defaultCombo.style.height:Math.max(l.height,c[1])||c[1]);var h=-a/2-r[3],p=-s/2-r[0];l.width=a+r[1]+r[3],l.height=s+r[0]+r[2];var d=(0,n.__assign)({x:h,y:p},l);return e.style?(e.style.width=a,e.style.height=s):e.style={width:a,height:s},d},update:function(e,t){var r=this.getSize(e),n=e.padding||this.options.padding;(0,o.isNumber)(n)&&(n=[n,n,n,n]);var i,a,s=(0,o.clone)(e.style),u=e.collapsed&&e.fixCollapseSize?e.fixCollapseSize:e.fixSize;u?(0,o.isNumber)(u)?(i=u,a=u):(i=u[0],a=u[1]):(i=Math.max(s.width,r[0])||r[0],a=Math.max(s.height,r[1])||r[1]),s.width=i+n[1]+n[3],s.height=a+n[0]+n[2];var l=t.get("sizeCache");l&&(l.width=s.width,l.height=s.height),s.x=-i/2-n[3],s.y=-a/2-n[0];var c={stroke:e.color},f=t.get("keyShape"),h=(0,o.mix)({},f.attr(),c,s);e.style?(e.style.width=i,e.style.height=a):e.style={width:i,height:a},this.updateShape(e,t,h,!1)}},"single-combo")},14996:function(e,t,r){"use strict";var n=r(97582),o=r(31834),i=r(61592),a=r(39520),s=r(28362),u=f(r(36605)),l=f(r(27144)),c=r(15692);function f(e){return e&&e.__esModule?e:{default:e}}var h={itemType:"edge",labelPosition:"center",refX:0,refY:0,labelAutoRotate:!1,options:{size:u.default.defaultEdge.size,style:{x:0,y:0,stroke:u.default.defaultEdge.style.stroke,lineAppendWidth:u.default.defaultEdge.style.lineAppendWidth},labelCfg:{style:{fill:u.default.edgeLabel.style.fill,fontSize:u.default.edgeLabel.style.fontSize,fontFamily:u.default.windowFontFamily}},stateStyles:(0,n.__assign)({},u.default.edgeStateStyles)},getPath:function(e){var t=[];return(0,o.each)(e,function(e,r){0===r?t.push(["M",e.x,e.y]):t.push(["L",e.x,e.y])}),t},getShapeStyle:function(e){var t=this.options.style,r={stroke:e.color},n=(0,o.mix)({},t,r,e.style),i=e.size||u.default.defaultEdge.size,a=(e=this.getPathPoints(e)).startPoint,s=e.endPoint,l=this.getControlPoints(e),c=[a];l&&(c=c.concat(l)),c.push(s);var f=this.getPath(c);return(0,o.mix)({},u.default.defaultEdge.style,{stroke:u.default.defaultEdge.color,lineWidth:i,path:f},n)},updateShapeStyle:function(e,t,r){var i,a=t.getContainer(),s=(null===(i=t.getKeyShape)||void 0===i?void 0:i.call(t))||a.shapeMap["edge-shape"],u=e.size,l=(e=this.getPathPoints(e)).startPoint,c=e.endPoint,f=this.getControlPoints(e),h=[l];f&&(h=h.concat(f)),h.push(c);var p=s.attr(),d=e.style||{};void 0===d.stroke&&(d.stroke=e.color);var y=e.sourceNode,v=e.targetNode,g={radius:d.radius};f||(g={source:y,target:v,offset:d.offset,radius:d.radius});var m=this.getPath(h,g),b={};"move"===r?b={path:m}:(p.endArrow&&!1===d.endArrow&&(e.style.endArrow={path:""}),p.startArrow&&!1===d.startArrow&&(e.style.startArrow={path:""}),void 0===(b=(0,n.__assign)({},e.style)).lineWidth&&(b.lineWdith=((0,o.isNumber)(u)?u:null===u||void 0===u?void 0:u[0])||p.lineWidth),void 0===b.path&&(b.path=m),void 0===b.stroke&&(b.stroke=p.stroke||e.color)),s&&s.attr(b)},getLabelStyleByPosition:function(e,t,r){var n,a=t.position||this.labelPosition,s={},u=null===r||void 0===r?void 0:r.shapeMap["edge-shape"];n="start"===a?0:"end"===a?1:.5;var l,c=t.refX||this.refX,f=t.refY||this.refY;if(e.startPoint.x===e.endPoint.x&&e.startPoint.y===e.endPoint.y)return s.x=e.startPoint.x+c,s.y=e.startPoint.y+f,s.text=e.label,s;l=(0,o.isNil)(t.autoRotate)?this.labelAutoRotate:t.autoRotate;var h=(0,i.getLabelPosition)(u,n,c,f,l);return s.x=h.x,s.y=h.y,s.rotate=h.rotate,s.textAlign=this._getTextAlign(a,h.angle),s.text=e.label,s},getLabelBgStyleByPosition:function(e,t){if(!e)return{};var r=e.getBBox(),i=t.style&&t.style.background;if(!i)return{};var a=i.padding,s=r.width+a[1]+a[3],u=r.height+a[0]+a[2],l=(0,n.__assign)((0,n.__assign)({},i),{width:s,height:u,x:r.minX-a[3],y:r.minY-a[0],matrix:[1,0,0,0,1,0,0,0,1]});return((0,o.isNil)(t.autoRotate)?this.labelAutoRotate:t.autoRotate)&&(l.matrix=e.attr("matrix")||[1,0,0,0,1,0,0,0,1]),l},_getTextAlign:function(e,t){var r="center";return t?(t%=2*Math.PI,"center"!==e&&(r=t>=0&&t<=Math.PI/2||t>=1.5*Math.PI&&t<2*Math.PI?e:function(e){var t=e;return"start"===e?t="end":"end"===e&&(t="start"),t}(e)),r):e},getControlPoints:function(e){return e.controlPoints},getPathPoints:function(e){return e},drawShape:function(e,t){var r=this.getShapeStyle(e),n=t.addShape("path",{className:"edge-shape",name:"edge-shape",attrs:r});return t.shapeMap["edge-shape"]=n,n},drawLabel:function(e,t){var r=this.options.labelCfg,n=(0,o.deepMix)({},r,e.labelCfg),i=this.getLabelStyle(e,n,t),a=i.rotate;delete i.rotate;var s=t.addShape("text",{attrs:i,name:"text-shape",labelRelated:!0,draggable:!0});if(t.shapeMap["text-shape"]=s,isNaN(a)||""===a||s.rotateAtStart(a),i.background){var u=this.drawLabelBg(e,t,s,i,a),l=this.itemType+c.CLS_LABEL_BG_SUFFIX;u.set("classname",l),t.shapeMap[l]=u,s.toFront()}return s},drawLabelBg:function(e,t,r,n,i){var a=this.options.labelCfg,s=(0,o.deepMix)({},a,e.labelCfg),u=this.getLabelBgStyleByPosition(r,s),l=t.addShape("rect",{name:"text-bg-shape",attrs:u,labelRelated:!0});return t.shapeMap["text-bg-shape"]=l,l}},p=(0,n.__assign)((0,n.__assign)({},c.shapeBase),h);l.default.registerEdge("single-edge",p),l.default.registerEdge("line",{getControlPoints:function(){}},"single-edge"),l.default.registerEdge("spline",{getPath:function(e){return(0,s.getSpline)(e)}},"single-edge"),l.default.registerEdge("arc",{curveOffset:20,clockwise:1,getControlPoints:function(e){var t,r,n=e.startPoint,i=e.endPoint,s=(n.x+i.x)/2,u=(n.y+i.y)/2;if(void 0!==e.controlPoints){if(r=e.controlPoints[0],t=(0,a.getCircleCenterByPoints)(n,r,i),n.x<=i.x&&n.y>i.y?this.clockwise=t.x>r.x?0:1:n.x<=i.x&&n.y<i.y?this.clockwise=t.x>r.x?1:0:n.x>i.x&&n.y<=i.y?this.clockwise=t.y<r.y?0:1:this.clockwise=t.y<r.y?1:0,(r.x-n.x)/(r.y-n.y)==(i.x-n.x)/(i.y-n.y))return[]}else{void 0===e.curveOffset&&(e.curveOffset=this.curveOffset),(0,o.isArray)(e.curveOffset)&&(e.curveOffset=e.curveOffset[0]),e.curveOffset<0?this.clockwise=0:this.clockwise=1;var l={x:i.x-n.x,y:i.y-n.y},c=Math.atan2(l.y,l.x);r={x:e.curveOffset*Math.cos(-Math.PI/2+c)+s,y:e.curveOffset*Math.sin(-Math.PI/2+c)+u},t=(0,a.getCircleCenterByPoints)(n,r,i)}var f=(0,a.distance)(n,t);return[{x:f,y:f}]},getPath:function(e){var t=[];return t.push(["M",e[0].x,e[0].y]),2===e.length?t.push(["L",e[1].x,e[1].y]):t.push(["A",e[1].x,e[1].y,0,0,this.clockwise,e[2].x,e[2].y]),t}},"single-edge"),l.default.registerEdge("quadratic",{curvePosition:.5,curveOffset:-20,getControlPoints:function(e){var t=e.controlPoints;if(!t||!t.length){var r=e.startPoint,n=e.endPoint;void 0===e.curveOffset&&(e.curveOffset=this.curveOffset),void 0===e.curvePosition&&(e.curvePosition=this.curvePosition),(0,o.isArray)(e.curveOffset)&&(e.curveOffset=e.curveOffset[0]),(0,o.isArray)(e.curvePosition)&&(e.curvePosition=e.curveOffset[0]),t=[(0,s.getControlPoint)(r,n,e.curvePosition,e.curveOffset)]}return t},getPath:function(e){var t=[];return t.push(["M",e[0].x,e[0].y]),t.push(["Q",e[1].x,e[1].y,e[2].x,e[2].y]),t}},"single-edge"),l.default.registerEdge("cubic",{curvePosition:[.5,.5],curveOffset:[-20,20],getControlPoints:function(e){var t=e.controlPoints;if(void 0===e.curveOffset&&(e.curveOffset=this.curveOffset),void 0===e.curvePosition&&(e.curvePosition=this.curvePosition),(0,o.isNumber)(e.curveOffset)&&(e.curveOffset=[e.curveOffset,-e.curveOffset]),(0,o.isNumber)(e.curvePosition)&&(e.curvePosition=[e.curvePosition,1-e.curvePosition]),!t||!t.length||t.length<2){var r=e.startPoint,n=e.endPoint;t=[(0,s.getControlPoint)(r,n,e.curvePosition[0],e.curveOffset[0]),(0,s.getControlPoint)(r,n,e.curvePosition[1],e.curveOffset[1])]}return t},getPath:function(e){var t=[];return t.push(["M",e[0].x,e[0].y]),t.push(["C",e[1].x,e[1].y,e[2].x,e[2].y,e[3].x,e[3].y]),t}},"single-edge"),l.default.registerEdge("cubic-vertical",{curvePosition:[.5,.5],minCurveOffset:[0,0],curveOffset:void 0,getControlPoints:function(e){var t=e.startPoint,r=e.endPoint;void 0===e.curvePosition&&(e.curvePosition=this.curvePosition),void 0===e.curveOffset&&(e.curveOffset=this.curveOffset),void 0===e.minCurveOffset&&(e.minCurveOffset=this.minCurveOffset),(0,o.isNumber)(e.curveOffset)&&(e.curveOffset=[e.curveOffset,-e.curveOffset]),(0,o.isNumber)(e.minCurveOffset)&&(e.minCurveOffset=[e.minCurveOffset,-e.minCurveOffset]),(0,o.isNumber)(e.curvePosition)&&(e.curvePosition=[e.curvePosition,1-e.curvePosition]);var n=r.y-t.y,i=[0,0];return e.curveOffset?i=e.curveOffset:Math.abs(n)<Math.abs(e.minCurveOffset[0])&&(i=e.minCurveOffset),[{x:t.x,y:t.y+n*this.curvePosition[0]+i[0]},{x:r.x,y:r.y-n*this.curvePosition[1]+i[1]}]}},"cubic"),l.default.registerEdge("cubic-horizontal",{curvePosition:[.5,.5],minCurveOffset:[0,0],curveOffset:void 0,getControlPoints:function(e){var t=e.startPoint,r=e.endPoint;void 0===e.curvePosition&&(e.curvePosition=this.curvePosition),void 0===e.curveOffset&&(e.curveOffset=this.curveOffset),void 0===e.minCurveOffset&&(e.minCurveOffset=this.minCurveOffset),(0,o.isNumber)(e.curveOffset)&&(e.curveOffset=[e.curveOffset,-e.curveOffset]),(0,o.isNumber)(e.minCurveOffset)&&(e.minCurveOffset=[e.minCurveOffset,-e.minCurveOffset]),(0,o.isNumber)(e.curvePosition)&&(e.curvePosition=[e.curvePosition,1-e.curvePosition]);var n=r.x-t.x,i=[0,0];return e.curveOffset?i=e.curveOffset:Math.abs(n)<Math.abs(e.minCurveOffset[0])&&(i=e.minCurveOffset),[{x:t.x+n*this.curvePosition[0]+i[0],y:t.y},{x:r.x-n*this.curvePosition[1]+i[1],y:r.y}]}},"cubic"),l.default.registerEdge("loop",{getPathPoints:function(e){return(0,i.getLoopCfgs)(e)},getControlPoints:function(e){return e.controlPoints},afterDraw:function(e){e.controlPoints=void 0},afterUpdate:function(e){e.controlPoints=void 0}},"cubic")},40861:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.genBubbleSet=void 0;var n=r(39520),o={maxRoutingIterations:100,maxMarchingIterations:100,pixelGroupSize:2,edgeR0:10,edgeR1:10,nodeR0:5,nodeR1:10,morphBuffer:5,threshold:.001,skip:16,nodeInfluenceFactor:1,edgeInfluenceFactor:1,negativeNodeInfluenceFactor:-.5};function i(e,t,r){var n=!1,o=function(e,r){return t.cells[e+r*t.width]},i=function(e,t){var n=0;return o(e-1,t-1)>=r&&(n+=1),o(e,t-1)>r&&(n+=2),o(e-1,t)>r&&(n+=4),o(e,t)>r&&(n+=8),n},a=function(r,n){for(var o,a,s=r,u=n,l=0;l<t.width*t.height;l++){if(o=s,a=u,e.findIndex(function(e){return e.x===s&&e.y===u})>-1){if(e[0].x===s&&e[0].y===u)return!0}else e.push({x:s,y:u});var c=i(s,u);switch(c){case-1:return console.warn("Marched out of bounds"),!0;case 0:case 3:case 2:case 7:s++;break;case 12:case 14:case 4:s--;break;case 6:0===o&&(-1===a?s-=1:s+=1);break;case 1:case 13:case 5:u--;break;case 9:1===o&&(0===a?u-=1:u+=1);break;case 10:case 8:case 11:u++;break;default:return console.warn("Marching squares invalid state: ".concat(c)),!0}}};this.march=function(){for(var e=0;e<t.width&&!n;e+=1)for(var s=0;s<t.height&&!n;s+=1)o(e,s)>r&&15!==i(e,s)&&(n=a(e,s));return n}}var a=function(e,t,r){var o=null,i=Number.POSITIVE_INFINITY;return t.forEach(function(t){var a={x:e.getModel().x,y:e.getModel().y},s={x:t.getModel().x,y:t.getModel().y},u=(0,n.squareDist)(a,s),l=new n.Line(a.x,a.y,s.x,s.y),c=r.reduce(function(e,t){return(0,n.fractionToLine)(t,l)>0?e+1:e},0);u*Math.pow(c+1,2)<i&&(o=t,i=u*Math.pow(c+1,2))}),o},s=function(e,t){var r=Number.POSITIVE_INFINITY,o=null;return e.forEach(function(e){var i=(0,n.fractionToLine)(e,t);i>=0&&i<r&&(o=e,r=i)}),o},u=function(e,t,r,o){var i=[],a=[];a.push(e);for(var u=!0,l=0,f=function(e,t){var r=!1;return t.forEach(function(t){r||((0,n.isPointsOverlap)(e,{x:t.x1,y:t.y1})||(0,n.isPointsOverlap)(e,{x:t.x2,y:t.y2}))&&(r=!0)}),r},h=function(e,t){for(var r=0,o=t;r<o.length;r++){var i=o[r].getBBox(),a=[[i.x,i.y],[i.x+i.width,i.y],[i.x,i.y+i.height],[i.x+i.width,i.y+i.height]];if((0,n.isPointInPolygon)(a,e.x,e.y))return!0}return!1};u&&l<r;){u=!1;for(var p=function(){var e=a.pop(),r=s(t,e);if(r){var p=(0,n.itemIntersectByLine)(r,e),d=p[0];if(2===p[1]){var y=function(s){for(var l=o,p=c(r,l,d,s),y=f(p,a)||f(p,i),v=h(p,t);!y&&v&&l>=1;)p=c(r,l/=1.5,d,s),y=f(p,a)||f(p,i),v=h(p,t);!p||y||s&&v||(a.push(new n.Line(e.x1,e.y1,p.x,p.y)),a.push(new n.Line(p.x,p.y,e.x2,e.y2)),u=!0)};y(!0),u||y(!1)}}u||i.push(e),l+=1};!u&&a.length;)p()}for(;a.length;)i.push(a.pop());return i};function l(e,t,r,o,i,a){function s(e,t){var r=Math.floor((e-t)/a.pixelGroupSize);return r<0?0:r}function u(e,t){return e*a.pixelGroupSize+t}var l=(a.nodeR0-a.nodeR1)*(a.nodeR0-a.nodeR1),c=(a.edgeR0-a.edgeR1)*(a.edgeR0-a.edgeR1),f=function(e,t){return[Math.min(s(e.minX,t+o.minX),i.width),Math.min(s(e.minY,t+o.minY),i.height),Math.min(s(e.maxX,-t+o.minX),i.width),Math.min(s(e.maxY,-t+o.minY),i.height)]},h=function(e,t){for(var r=e.getBBox(),s=f(r,a.nodeR1),l=s[0],c=s[1],h=s[2],p=s[3],d=c;d<p;d+=1)for(var y=l;y<h;y+=1)if(!(t<0&&i[y+d*i.width]<=0)){var v=u(y,o.minX),g=u(d,o.minY),m=(0,n.pointRectSquareDist)({x:v,y:g},{x:r.minX,y:r.minY,width:r.width,height:r.height});if(m<Math.pow(a.nodeR1,2)){var b=Math.sqrt(m)-a.nodeR1;i.cells[y+d*i.width]+=t*b*b}}};a.nodeInfluenceFactor&&e.forEach(function(e){h(e,a.nodeInfluenceFactor/l)}),a.edgeInfluenceFactor&&r.forEach(function(e){!function(e,t){for(var r=e.getBBox(),s=f(r,a.edgeR1),l=s[0],c=s[1],h=s[2],p=s[3],d=c;d<p;d+=1)for(var y=l;y<h;y+=1)if(!(t<0&&i.cells[y+d*i.width]<=0)){var v=u(y,o.minX),g=u(d,o.minY),m=(0,n.pointLineSquareDist)({x:v,y:g},e);if(m<Math.pow(a.edgeR1,2)){var b=Math.sqrt(m)-a.edgeR1;i.cells[y+d*i.width]+=t*b*b}}}(e,a.edgeInfluenceFactor/c)}),a.negativeNodeInfluenceFactor&&t.forEach(function(e){h(e,a.negativeNodeInfluenceFactor/l)})}function c(e,t,r,n){var o=e.getBBox(),i=r[0],a=r[1],s=r[2],u=r[3],l={topLeft:{x:o.minX-t,y:o.minY-t},topRight:{x:o.maxX+t,y:o.minY-t},bottomLeft:{x:o.minX-t,y:o.maxY+t},bottomRight:{x:o.maxX+t,y:o.maxY+t}},c=o.height*o.width;function f(e,t){return o.width*(.5*(e.y-o.minY+(t.y-o.minY)))}if(a)return i?n?l.topLeft:l.bottomRight:s?n?l.bottomLeft:l.topRight:f(a,u)<.5*c?a.y>u.y?n?l.topLeft:l.bottomRight:n?l.topRight:l.bottomLeft:a.y<u.y?n?l.bottomLeft:l.topRight:n?l.bottomRight:l.topLeft;if(u){if(i)return n?l.topRight:l.bottomLeft;if(s)return n?l.bottomRight:l.topLeft}return f(i,s)<.5*c?i.x>s.x?n?l.topLeft:l.bottomRight:n?l.bottomLeft:l.topRight:i.x<s.x?n?l.topRight:l.bottomLeft:n?l.bottomRight:l.topLeft}t.genBubbleSet=function(e,t,r){var c=Object.assign(o,r),f=(0,n.getPointsCenter)(e.map(function(e){return{x:e.getModel().x,y:e.getModel().y}})),h=[],p=[];(e=e.sort(function(e,t){return(0,n.squareDist)({x:e.getModel().x,y:e.getModel().y},f)-(0,n.squareDist)({x:t.getModel().x,y:t.getModel().y},f)})).forEach(function(e){(function(e,t,r,o,i){var l=a(e,r,t);if(null===l)return[];var c=new n.Line(e.getModel().x,e.getModel().y,l.getModel().x,l.getModel().y);return function(e){for(var r=[];e.length>0;){var o=e.pop();if(0===e.length){r.push(o);break}var i=e.pop(),a=new n.Line(o.x1,o.y1,i.x2,i.y2);s(t,a)?(r.push(o),e.push(i)):e.push(a)}return r}(u(c,t,o,i))})(e,t,h,c.maxRoutingIterations,c.morphBuffer).forEach(function(e){p.push(e)}),h.push(e)});for(var d,y,v,g,m,b=function(e,t,r){var n={minX:Number.POSITIVE_INFINITY,minY:Number.POSITIVE_INFINITY,maxX:Number.NEGATIVE_INFINITY,maxY:Number.NEGATIVE_INFINITY,width:0,height:0,x:0,y:0},o=[];e.forEach(function(e){o.push(e.getBBox())}),t.forEach(function(e){o.push(e.getBBox())});for(var i=0,a=o;i<a.length;i++){var s=a[i];n.minX=(s.minX<n.minX?s.minX:n.minX)-r,n.minY=(s.minY<n.minY?s.minY:n.minY)-r,n.maxX=(s.maxX>n.maxX?s.maxX:n.maxX)+r,n.maxY=(s.maxY>n.maxY?s.maxY:n.maxY)+r}return n.width=n.maxX-n.minX,n.height=n.maxY-n.minY,n.x=n.minX,n.y=n.minY,n}(e,p,c.nodeR0),w=(d=b.width,y=b.height,v=c.pixelGroupSize,g=Math.ceil(d/v),m=Math.ceil(y/v),{cells:new Float32Array(Math.max(0,g*m)).fill(0),width:g,height:m}),_=[],x=[],S=0;S<c.maxMarchingIterations;S++)if(l(e,t,p,b,w,c),x=[],new i(_=[],w,c.threshold).march()){var O=_.map(function(e){return{x:Math.round(e.x*c.pixelGroupSize+b.minX),y:Math.round(e.y*c.pixelGroupSize+b.minY)}});if(O){var P=O.length;if(c.skip>1)for(P=Math.floor(O.length/c.skip);P<3&&c.skip>1;)c.skip-=1,P=Math.floor(O.length/c.skip);for(var E=0,k=0;k<P;k+=1,E+=c.skip)x.push({x:O[E].x,y:O[E].y})}if(x&&function(){for(var t=0,r=e;t<r.length;t++){var o=r[t],i=x.map(function(e){return[e.x,e.y]});if(!(0,n.isPointInPolygon)(i,o.getBBox().centerX,o.getBBox().centerY))return!1}return!0}())return x;if(c.threshold*=.9,S<=.5*c.maxMarchingIterations)c.memberInfluenceFactor*=1.2,c.edgeInfluenceFactor*=1.2;else{if(!(0!==c.nonMemberInfluenceFactor&&t.length>0))break;c.nonMemberInfluenceFactor*=.8}}return x}},25560:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.genConvexHull=t.cross=void 0;var r=function(e,t,r){return(e.y-r.y)*(t.x-r.x)-(e.x-r.x)*(t.y-r.y)};t.cross=r;t.genConvexHull=function(e){var t=e.map(function(e){return{x:e.getModel().x,y:e.getModel().y}});t.sort(function(e,t){return e.x===t.x?e.y-t.y:e.x-t.x});for(var n={},o=t.length-1;o>=0;o--){var i=t[o],a=i.x,s=i.y;n["".concat(a,"-").concat(s)]&&t.splice(o,1),n["".concat(a,"-").concat(s)]=!0}if(1===t.length)return t;var u=[];for(o=0;o<t.length;o++){for(;u.length>=2&&r(u[u.length-2],u[u.length-1],t[o])<=0;)u.pop();u.push(t[o])}var l=[];for(o=t.length-1;o>=0;o--){for(;l.length>=2&&r(l[l.length-2],l[l.length-1],t[o])<=0;)l.pop();l.push(t[o])}return l.pop(),u.pop(),u.concat(l)}},92100:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"Arrow",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"Marker",{enumerable:!0,get:function(){return i.default}}),t.default=void 0;var n=a(r(27144));r(95702),r(14996),r(48485),r(88651),r(80180);var o=a(r(22245)),i=a(r(82255));function a(e){return e&&e.__esModule?e:{default:e}}var s=n.default;t.default=s},82255:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r={collapse:function(e,t,r){return[["M",e-r,t],["a",r,r,0,1,0,2*r,0],["a",r,r,0,1,0,2*-r,0],["M",e-r+4,t],["L",e+r-4,t]]},expand:function(e,t,r){return[["M",e-r,t],["a",r,r,0,1,0,2*r,0],["a",r,r,0,1,0,2*-r,0],["M",e-r+4,t],["L",e-r+2*r-4,t],["M",e-r+r,t-r+4],["L",e,t+r-4]]},upTriangle:function(e,t,r){var n=r*Math.cos(Math.PI/6),o=r*Math.sin(Math.PI/6);return[["M",e-n,t+o],["L",e+n,t+o],["L",e,t-r],["Z"]]},downTriangle:function(e,t,r){var n=r*Math.cos(Math.PI/6),o=r*Math.sin(Math.PI/6);return[["M",e-n,t-o],["L",e+n,t-o],["L",e,t+r],["Z"]]}};t.default=r},95702:function(e,t,r){"use strict";var n=r(97582),o=r(31834),i=r(30271),a=c(r(36605)),s=c(r(27144)),u=r(15692),l=r(61592);function c(e){return e&&e.__esModule?e:{default:e}}var f={itemType:"node",shapeType:"single-node",labelPosition:"center",offset:a.default.nodeLabel.offset,getSize:function(e){var t,r=(null===(t=this.mergeStyle)||void 0===t?void 0:t.size)||e.size||this.getOptions({}).size||a.default.defaultNode.size;return(0,o.isArray)(r)&&1===r.length&&(r=[r[0],r[0]]),(0,o.isArray)(r)||(r=[r,r]),r},getLabelStyleByPosition:function(e,t){var r=t.maxLength,n=e.label;r&&(n=(0,l.truncateLabelByLength)(n,r));var i=t.position||this.labelPosition;if("center"===i)return{x:0,y:0,text:n,textBaseline:"middle",textAlign:"center"};var a=t.offset;(0,o.isNil)(a)&&(a=this.offset);var s,u=this.getSize(e);switch(i){case"top":s={x:0,y:-u[1]/2-a,textBaseline:"bottom",textAlign:"center"};break;case"bottom":s={x:0,y:u[1]/2+a,textBaseline:"top",textAlign:"center"};break;case"left":s={x:-u[0]/2-a,y:0,textBaseline:"middle",textAlign:"right"};break;default:s={x:u[0]/2+a,y:0,textBaseline:"middle",textAlign:"left"}}return s.text=n,s},getLabelBgStyleByPosition:function(e,t){var r;if(!e)return{};var o=null===(r=t.style)||void 0===r?void 0:r.background;if(!o)return{};var a=e.getBBox(),s=(0,i.formatPadding)(o.padding),u=a.width+s[1]+s[3],l=a.height+s[0]+s[2];return(0,n.__assign)((0,n.__assign)({x:a.minX-s[3],y:a.minY-s[0]},o),{width:u,height:l})},drawShape:function(e,t){var r=this.shapeType,n=this.getShapeStyle(e),o=t.addShape(r,{attrs:n,draggable:!0,name:"node-shape"});return t.shapeMap["node-shape"]=o,o},updateLinkPoints:function(e,t){var r,i=(this.mergeStyle||this.getOptions(e)).linkPoints,a=t.shapeMap["link-point-left"]||t.find(function(e){return"link-point-left"===e.get("className")}),s=t.shapeMap["link-point-right"]||t.find(function(e){return"link-point-right"===e.get("className")}),u=t.shapeMap["link-point-top"]||t.find(function(e){return"link-point-top"===e.get("className")}),l=t.shapeMap["link-point-bottom"]||t.find(function(e){return"link-point-bottom"===e.get("className")});a&&(r=a.attr()),s&&!r&&(r=s.attr()),u&&!r&&(r=u.attr()),l&&!r&&(r=l.attr()),r||(r=i);var c=(0,o.mix)({},r,e.linkPoints),f=c.fill,h=c.stroke,p=c.lineWidth,d=c.size/2;d||(d=c.r);var y=e.linkPoints?e.linkPoints:{left:void 0,right:void 0,top:void 0,bottom:void 0},v=y.left,g=y.right,m=y.top,b=y.bottom,w=this.getSize(e),_=w[0],x=w[1],S={r:d,fill:f,stroke:h,lineWidth:p};if(a)v||void 0===v?a.attr((0,n.__assign)((0,n.__assign)({},S),{x:-_/2,y:0})):(a.remove(),delete t.shapeMap["link-point-left"]);else if(v){var O="link-point-left";t.shapeMap[O]=t.addShape("circle",{attrs:(0,n.__assign)((0,n.__assign)({},S),{x:-_/2,y:0}),className:O,name:O,isAnchorPoint:!0})}if(s)g||void 0===g||(s.remove(),delete t.shapeMap["link-point-right"]),s.attr((0,n.__assign)((0,n.__assign)({},S),{x:_/2,y:0}));else if(g){var P="link-point-right";t.shapeMap[P]=t.addShape("circle",{attrs:(0,n.__assign)((0,n.__assign)({},S),{x:_/2,y:0}),className:P,name:P,isAnchorPoint:!0})}if(u)m||void 0===m||(u.remove(),delete t.shapeMap["link-point-top"]),u.attr((0,n.__assign)((0,n.__assign)({},S),{x:0,y:-x/2}));else if(m){var E="link-point-top";t.shapeMap[E]=t.addShape("circle",{attrs:(0,n.__assign)((0,n.__assign)({},S),{x:0,y:-x/2}),className:E,name:E,isAnchorPoint:!0})}if(l)b||void 0===b?l.attr((0,n.__assign)((0,n.__assign)({},S),{x:0,y:x/2})):(l.remove(),delete t.shapeMap["link-point-bottom"]);else if(b){var k="link-point-bottom";t.shapeMap[k]=t.addShape("circle",{attrs:(0,n.__assign)((0,n.__assign)({},S),{x:0,y:x/2}),className:k,name:k,isAnchorPoint:!0})}},updateShape:function(e,t,r,o,i){t.get("keyShape").attr((0,n.__assign)({},r)),this.updateLabel(e,t,i),o&&this.updateIcon(e,t)},updateIcon:function(e,t){var r=this,i=t.getContainer(),a=(this.mergeStyle||this.getOptions(e)).icon,s=e.icon?e.icon:{show:void 0,text:void 0},u=s.show,l=s.text,c=i.shapeMap["".concat(this.type,"-icon")]||i.find(function(e){return e.get("name")==="".concat(r.type,"-icon")});if(c)if(u||void 0===u){var f=(0,o.mix)({},c.attr(),a),h=f.width,p=void 0===h?20:h,d=f.height,y=void 0===d?20:d;("iconfont"===f.fontFamily||f.hasOwnProperty("text"))&&(p=0,y=0),c.attr((0,n.__assign)((0,n.__assign)({},f),{x:-p/2,y:-y/2}))}else c.remove(),delete i.shapeMap["".concat(this.type,"-icon")];else if(u){var v="".concat(this.type,"-icon");if(l)i.shapeMap[v]=i.addShape("text",{attrs:(0,n.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},a),className:v,name:v});else{p=a.width,y=a.height;i.shapeMap[v]=i.addShape("image",{attrs:(0,n.__assign)((0,n.__assign)({},a),{x:-p/2,y:-y/2}),className:v,name:v})}var g=i.shapeMap["node-label"]||i.find(function(e){return"node-label"===e.get("name")});g&&g.toFront()}}},h=(0,n.__assign)((0,n.__assign)({},u.shapeBase),f);s.default.registerNode("single-node",h)},54402:function(e,t,r){"use strict";var n=r(97582),o=a(r(27144)),i=a(r(36605));function a(e){return e&&e.__esModule?e:{default:e}}o.default.registerNode("image",{options:{img:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*eD7nT6tmYgAAAAAAAAAAAABkARQnAQ",size:200,labelCfg:{style:{fontFamily:i.default.windowFontFamily}},clipCfg:{show:!1,type:"circle",r:50,rx:50,ry:35,width:50,height:35,points:[[30,12],[12,30],[30,48],[48,30]],path:[["M",25,25],["L",50,25],["A",12.5,12.5,0,1,1,50,50],["A",12.5,12.5,0,1,0,50,50],["L",25,75],["Z"]],x:0,y:0}},shapeType:"image",labelPosition:"bottom",drawShape:function(e,t){var r=this.shapeType,n=this.getShapeStyle(e);delete n.fill;var o=t.addShape(r,{attrs:n,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});return this.drawClip(e,o),o},drawClip:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).clipCfg;if(r.show){var o=r.type,i=r.x,a=r.y,s=r.style;if("circle"===o){var u=r.r;t.setClip({type:"circle",attrs:(0,n.__assign)({r:u,x:i,y:a},s)})}else if("rect"===o){var l=r.width,c=r.height,f=i-l/2,h=a-c/2;t.setClip({type:"rect",attrs:(0,n.__assign)({x:f,y:h,width:l,height:c},s)})}else if("ellipse"===o){var p=r.rx,d=r.ry;t.setClip({type:"ellipse",attrs:(0,n.__assign)({x:i,y:a,rx:p,ry:d},s)})}else if("polygon"===o){var y=r.points;t.setClip({type:"polygon",attrs:(0,n.__assign)({points:y},s)})}else if("path"===o){var v=r.path;t.setClip({type:"path",attrs:(0,n.__assign)({path:v},s)})}}},getShapeStyle:function(e){var t=this.mergeStyle||this.getOptions(e),r=t.style,o=t.img,i=this.getSize(e),a=i[0],s=i[1];return r&&(a=r.width||i[0],s=r.height||i[1]),(0,n.__assign)({x:-a/2,y:-s/2,width:a,height:s,img:o},r)},updateShapeStyle:function(e,t){var r=t.getContainer(),n="".concat(this.itemType,"-shape"),o=r.shapeMap[n]||r.find(function(e){return e.get("className")===n})||t.getKeyShape(),i=this.getShapeStyle(e);o&&!o.destroyed&&o.attr(i)}},"single-node")},80180:function(e,t,r){"use strict";r(60902),r(97097),r(54402)},60902:function(e,t,r){"use strict";var n=r(97582),o=r(31834),i=a(r(36605));function a(e){return e&&e.__esModule?e:{default:e}}a(r(27144)).default.registerNode("simple-circle",{options:{size:i.default.defaultNode.size,style:{x:0,y:0,stroke:i.default.defaultNode.style.stroke,fill:i.default.defaultNode.style.fill,lineWidth:i.default.defaultNode.style.lineWidth},labelCfg:{style:{fill:i.default.nodeLabel.style.fill,fontSize:i.default.nodeLabel.style.fontSize,fontFamily:i.default.windowFontFamily}},stateStyles:(0,n.__assign)({},i.default.nodeStateStyles)},shapeType:"simple-circle",labelPosition:"center",shapeMap:{},drawShape:function(e,t){var r=this.getShapeStyle(e),n="".concat(this.type,"-keyShape"),o=t.addShape("circle",{attrs:r,className:"".concat(this.type,"-keyShape"),name:n,draggable:!0});return t.shapeMap[n]=o,o},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,r={stroke:e.color},i=(0,o.deepMix)({},t,r),a=this.getSize(e)[0]/2;return(0,n.__assign)({x:0,y:0,r:a},i)},update:function(e,t,r){var n=this.getSize(e),i={stroke:e.color,r:n[0]/2},a=t.get("keyShape"),s=(0,o.deepMix)({},a.attr(),i,e.style);this.updateShape(e,t,s,!0,r)}},"single-node")},97097:function(e,t,r){"use strict";var n=r(97582),o=r(31834),i=a(r(36605));function a(e){return e&&e.__esModule?e:{default:e}}a(r(27144)).default.registerNode("simple-rect",{options:{size:[100,30],style:{radius:0,stroke:i.default.defaultNode.style.stroke,fill:i.default.defaultNode.style.fill,lineWidth:i.default.defaultNode.style.lineWidth},labelCfg:{style:{fill:i.default.nodeLabel.style.fill,fontSize:i.default.nodeLabel.style.fontSize,fontFamily:i.default.windowFontFamily}},anchorPoints:[[0,.5],[1,.5]],stateStyles:(0,n.__assign)({},i.default.nodeStateStyles)},shapeType:"simple-rect",labelPosition:"center",drawShape:function(e,t){var r=this.getShapeStyle(e);return t.addShape("rect",{attrs:r,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0})},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,r={stroke:e.color},i=(0,o.mix)({},t,r),a=this.getSize(e),s=i.width||a[0],u=i.height||a[1];return(0,n.__assign)({x:-s/2,y:-u/2,width:s,height:u},i)},update:function(e,t,r){t.getContainer();var n=(this.mergeStyle||this.getOptions(e)).style,i=this.getSize(e),a=t.get("keyShape");e.size||(i[0]=a.attr("width")||n.width,i[1]=a.attr("height")||n.height);var s={stroke:e.color,x:-i[0]/2,y:-i[1]/2,width:i[0],height:i[1]},u=(0,o.mix)({},n,a.attr(),s);u=(0,o.mix)(u,e.style),this.updateShape(e,t,u,!1,r)}},"single-node")},27144:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.ShapeFactoryBase=void 0;var n=r(97582),o=r(31834),i=r(86648),a={};function s(e){return a[e]||(a[e]=(0,o.upperFirst)(e)),a[e]}var u={defaultShapeType:"defaultType",className:null,getShape:function(e){return this[e]||this[this.defaultShapeType]||this["simple-circle"]},draw:function(e,t,r){var n=this.getShape(e);r.shapeMap={};var o=n.draw(t,r);return n.afterDraw&&n.afterDraw(t,r,o),o},baseUpdate:function(e,t,r,n){var o,i,a=this.getShape(e);a.update&&(a.mergeStyle=null===(o=a.getOptions)||void 0===o?void 0:o.call(a,t,n),null===(i=a.update)||void 0===i||i.call(a,t,r,n)),a.afterUpdate&&a.afterUpdate(t,r)},setState:function(e,t,r,n){this.getShape(e).setState(t,r,n)},shouldUpdate:function(e){return!!this.getShape(e).update},getControlPoints:function(e,t){return this.getShape(e).getControlPoints(t)},getAnchorPoints:function(e,t){return this.getShape(e).getAnchorPoints(t)}};t.ShapeFactoryBase=u;var l={options:{},draw:function(e,t){return this.drawShape(e,t)},drawShape:function(){},afterDraw:function(){},afterUpdate:function(){},setState:function(){},getControlPoints:function(e){return e.controlPoints},getAnchorPoints:function(e){var t=this.options.anchorPoints;return e.anchorPoints||t}},c=function(){function e(){}return e.registerFactory=function(t,r){var o=s(t),i=u,a=(0,n.__assign)((0,n.__assign)({},i),r);return e[o]=a,a.className=o,a},e.getFactory=function(t){return e[s(t)]},e.registerNode=function(t,r,o){var a,s=e.Node;if("string"==typeof r||"function"==typeof r){var u=(0,i.createNodeFromXML)(r);a=(0,n.__assign)((0,n.__assign)({},s.getShape("single-node")),u)}else if(r.jsx){var c=r.jsx;u=(0,i.createNodeFromXML)(c);a=(0,n.__assign)((0,n.__assign)((0,n.__assign)({},s.getShape("single-node")),u),r)}else{s.getShape(o);var f=o?s.getShape(o):l;a=(0,n.__assign)((0,n.__assign)({},f),r)}return a.type=t,a.itemType="node",s[t]=a,a},e.registerEdge=function(t,r,o){var i=e.Edge,a=o?i.getShape(o):l,s=(0,n.__assign)((0,n.__assign)({},a),r);return s.type=t,s.itemType="edge",i[t]=s,s},e.registerCombo=function(t,r,o){var i=e.Combo,a=o?i.getShape(o):l,s=(0,n.__assign)((0,n.__assign)({},a),r);return s.type=t,s.itemType="combo",i[t]=s,s},e}(),f=c;t.default=f,c.registerFactory("node",{defaultShapeType:"circle"}),c.registerFactory("edge",{defaultShapeType:"line"}),c.registerFactory("combo",{defaultShapeType:"circle"})},15692:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.shapeBase=t.CLS_LABEL_BG_SUFFIX=void 0;var n,o=r(97582),i=(n=r(36605))&&n.__esModule?n:{default:n},a=r(43708),s=r(31834),u=r(61592);function l(e){"@babel/helpers - typeof";return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var c=a.ext.transform,f=["startArrow","endArrow"],h={lineWidth:1,stroke:void 0,fill:void 0,lineAppendWidth:1,opacity:void 0,strokeOpacity:void 0,fillOpacity:void 0,x:0,y:0,r:10,width:20,height:20,shadowColor:void 0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0},p={edge:{lineWidth:1,stroke:"#000",lineDash:void 0,startArrow:!1,endArrow:!1,opacity:void 0,strokeOpacity:void 0,fillOpacity:void 0,shadowColor:void 0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0},node:h,combo:h};t.CLS_LABEL_BG_SUFFIX="-label-bg";var d={options:{labelCfg:{style:{fontFamily:i.default.windowFontFamily}},descriptionCfg:{style:{fontFamily:i.default.windowFontFamily}}},itemType:"",type:"",getCustomConfig:function(e){return{}},getOptions:function(e,t){return"move"===t||(null===t||void 0===t?void 0:t.includes("bbox"))?e:(0,s.deepMix)({},this.options,this.getCustomConfig(e)||{},e)},draw:function(e,t){t.shapeMap={},this.mergeStyle=this.getOptions(e);var r=this.drawShape(e,t);if(r.set("className",this.itemType+"-shape"),t.shapeMap[this.itemType+"-shape"]=r,e.label){var n=this.drawLabel(e,t);n.set("className",this.itemType+"-label"),t.shapeMap[this.itemType+"-label"]=n}return r},afterDraw:function(e,t,r){},drawShape:function(e,t){return null},drawLabel:function(e,t){var r=(this.mergeStyle||this.getOptions(e)||{}).labelCfg||{},n=this.getLabelStyle(e,r,t),o=n.rotate;delete n.rotate;var i=t.addShape("text",{attrs:n,draggable:!0,className:"text-shape",name:"text-shape",labelRelated:!0});if(t.shapeMap["text-shape"]=i,!isNaN(o)&&""!==o){var a=i.getBBox(),s=[1,0,0,0,1,0,0,0,1];if(n.rotateCenter)switch(n.rotateCenter){case"center":s=c(s,[["t",-a.width/2,-a.height/2],["r",o],["t",a.width/2,a.height/2]]);break;case"lefttop":s=c(s,[["t",-n.x,-n.y],["r",o],["t",n.x,n.y]]);break;case"leftcenter":s=c(s,[["t",-n.x,-n.y-a.height/2],["r",o],["t",n.x,n.y+a.height/2]]);break;default:s=c(s,[["t",-a.width/2,-a.height/2],["r",o],["t",a.width/2,a.height/2]])}else s=c(s,[["t",-n.x,-n.y-a.height/2],["r",o],["t",n.x,n.y+a.height/2]]);i.setMatrix(s)}if(n.background){var u=this.drawLabelBg(e,t,i),l=this.itemType+"-label-bg";u.set("classname",l),t.shapeMap[l]=u,i.toFront()}return i},drawLabelBg:function(e,t,r){var n=this.options.labelCfg,o=(0,s.mix)({},n,e.labelCfg),i=this.getLabelBgStyleByPosition(r,o),a=t.addShape("rect",{name:"text-bg-shape",attrs:i,labelRelated:!0});return t.shapeMap["text-bg-shape"]=a,a},getLabelStyleByPosition:function(e,t,r){return{text:e.label}},getLabelBgStyleByPosition:function(e,t){return{}},getLabelStyle:function(e,t,r){var n=this.getLabelStyleByPosition(e,t,r),a="".concat(this.itemType,"Label"),s=i.default[a]?i.default[a].style:null;return(0,o.__assign)((0,o.__assign)((0,o.__assign)({},s),n),t.style)},getShapeStyle:function(e){return e.style},update:function(e,t,r){this.updateShapeStyle(e,t,r),this.updateLabel(e,t,r)},updateShapeStyle:function(e,t,r){var n,o=t.getContainer(),i=t.getKeyShape(),a=(0,s.mix)({},i.attr(),e.style),u=function(e){var t,r=a[e];if((0,s.isPlainObject)(r)){var u=(null===(n=o.shapeMap)||void 0===n?void 0:n[e])||o.find(function(t){return t.get("name")===e});null===u||void 0===u||u.attr(r)}else i.attr(((t={})[e]=r,t))};for(var l in a)u(l)},updateLabel:function(e,t,r){var n,i,a=t.getContainer(),u=(this.mergeStyle||this.getOptions({},r)||{}).labelCfg,l=void 0===u?{}:u,f=this.itemType+"-label",h=a.shapeMap[f]||a.find(function(e){return e.get("className")===f}),p=this.itemType+"-label-bg",d=a.shapeMap[p]||a.find(function(e){return e.get("className")===p});if(h&&void 0===e.label&&(a.removeChild(h),delete a.shapeMap[f],d&&(a.removeChild(d),delete a.shapeMap[p])),e.label||""===e.label)if(h){(!r||"bbox|label"===r||"edge"===this.itemType&&"style"!==r)&&(l=(0,s.deepMix)(l,e.labelCfg));var y=this.getLabelStyleByPosition(e,l,a),v=null===(n=e.labelCfg)||void 0===n?void 0:n.style,g=(0,o.__assign)((0,o.__assign)({},y),v),m=g.rotate;if(delete g.rotate,isNaN(m)||""===m)1!==(null===(i=h.getMatrix())||void 0===i?void 0:i[4])&&h.resetMatrix(),h.attr(g);else{var b=[1,0,0,0,1,0,0,0,1];b=c(b,[["t",-g.x,-g.y],["r",m],["t",g.x,g.y]]),g.matrix=b,h.attr(g)}if(d)if(g.background){var w=this.getLabelBgStyleByPosition(h,l);d.attr(w)}else a.removeChild(d);else g.background&&((d=this.drawLabelBg(e,a,h)).set("classname",p),a.shapeMap[p]=d,h.toFront())}else{var _=this.drawLabel(e,a);_.set("className",f),a.shapeMap[f]=_}},afterUpdate:function(e,t){},setState:function(e,t,r){var n,o,i,a=r.get("keyShape");if(a&&!a.destroyed){var c=r.getType(),h=(0,s.isBoolean)(t)?e:"".concat(e,":").concat(t),d=this.getStateStyle(h,r),y=r.getStateStyle(h);if(y||d){var v=(0,s.mix)({},y||d),g=r.getContainer(),m={x:1,y:1,cx:1,cy:1,matrix:1};if("combo"===c&&(m.r=1,m.width=1,m.height=1),t){var b=function(e){var t,r=v[e];if((0,s.isPlainObject)(r)&&!f.includes(e)){var n=(null===(i=g.shapeMap)||void 0===i?void 0:i[e])||g.find(function(t){return t.get("name")===e});null===n||void 0===n||n.attr(r)}else a.attr(((t={})[e]=r,t))};for(var w in v)b(w)}else{var _=(0,u.cloneBesidesImg)(r.getCurrentStatesStyle()),x=r.getModel(),S=(0,s.mix)({},x.style,(0,u.cloneBesidesImg)(r.getOriginStyle())),O=a.get("name"),P=a.attr(),E={};Object.keys(P).forEach(function(e){if("img"!==e){var t=P[e];t&&"object"===l(t)?E[e]=(0,s.clone)(t):E[e]=t}});var k={},M=function(e){var t=v[e];if((0,s.isPlainObject)(t)&&!f.includes(e)){var r=g.shapeMap[e]||g.find(function(t){return t.get("name")===e});if(r){var n=(0,u.cloneBesidesImg)(r.attr());(0,s.each)(t,function(t,o){if(e===O&&E[o]&&!m[o]){delete E[o];var i=S[e][o]||p[c][o];a.attr(o,i)}else if(n[o]||0===n[o]){delete n[o];var s=S[e][o]||p[c][o];r.attr(o,s)}}),k[e]=n}}else if(E[e]&&!m[e]){delete E[e];var o=S[e]||(S[O]?S[O][e]:void 0)||p[c][e];a.attr(e,o)}};for(var C in v)M(C);for(var w in O?k[O]=E:(0,s.mix)(k,E),_)if(!m[w]){var j=_[w];(0,s.isPlainObject)(j)&&!f.includes(w)||(O?((0,s.mix)(S[O],((o={})[w]=j,o)),delete S[w]):(0,s.mix)(S,((n={})[w]=j,n)),delete _[w])}var T={};(0,s.deepMix)(T,S,k,_);var A=!1,I=function(e){var t,r,n=T[e];if((0,s.isPlainObject)(n)&&!f.includes(e)){var o=g.shapeMap[e]||g.find(function(t){return t.get("name")===e});o&&(("text"===o.get("type")||o.get("labelRelated"))&&(delete n.x,delete n.y,delete n.matrix),e===O&&("combo"===c&&(delete n.r,delete n.width,delete n.height),A=!0),o.attr(n))}else if(!A){var i=n||p[c][e];"combo"===c?O||a.attr(((t={})[e]=i,t)):a.attr(((r={})[e]=i,r))}};for(var R in T)I(R)}}}},getStateStyle:function(e,t){var r=t.getModel(),n=t.getType(),o=this.getOptions(r),i=o.stateStyles,a=o.style,u=void 0===a?{}:a,l=r.stateStyles?r.stateStyles[e]:i&&i[e];return"combo"===n?(0,s.clone)(l):(0,s.mix)({},u,l)},getControlPoints:function(e){return e.controlPoints},getAnchorPoints:function(e){var t,r;return(null===e||void 0===e?void 0:e.anchorPoints)||(null===(t=this.getCustomConfig(e))||void 0===t?void 0:t.anchorPoints)||(null===(r=this.options)||void 0===r?void 0:r.anchorPoints)}};t.shapeBase=d},86648:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.compareTwoTarget=p,t.createNodeFromXML=function(e){var t={},r=function(t){var r="function"==typeof e?e(t):e,n=l(r)(t),o=document.createElement("div");o.innerHTML=n;var i=o.children[0],a=h(c(i,t));return o.remove(),a};return{draw:function(e,o){var i=r(e),a=o;return function e(t){var r=t.attrs,i=void 0===r?{}:r,s=t.bbox,u=t.type,l=t.children,c=(0,n.__rest)(t,["attrs","bbox","type","children"]);if("group"!==t.type){var f=o.addShape(t.type,(0,n.__assign)({attrs:i,origin:{bbox:s,type:u,children:l}},c));t.keyshape&&(a=f)}t.children&&t.children.forEach(function(t){return e(t)})}(i),t[e.id]=[i],a},update:function(e,o){t[e.id]||(t[e.id]=[]);var i=o.getContainer(),a=i.get("children"),s=r(e),u=t[e.id].pop(),l=p(s,u),c=function e(t){var r;"group"!==t.type&&i.addShape(t.type,{attrs:t.attrs}),(null===(r=t.children)||void 0===r?void 0:r.length)&&t.children.map(function(t){return e(t)})},f=function e(t){var r,n=a.find(function(e){return e.attrs.key===t.attrs.key});n&&i.removeChild(n),(null===(r=t.children)||void 0===r?void 0:r.length)&&t.children.map(function(t){return e(t)})};!function e(t){var r=t.key;if("group"!==t.type){var i=a.find(function(e){return e.attrs.key===r});switch(t.action){case"change":if(i){var s=t.val.keyshape?o.getOriginStyle():{};i.attr((0,n.__assign)((0,n.__assign)({},s),t.val.attrs))}break;case"add":c(t.val);break;case"delete":f(t.val);break;case"restructure":f(t.formerTarget),c(t.nowTarget)}}t.children&&t.children.forEach(function(t){return e(t)})}(l),t[e.id].push(s)},getAnchorPoints:function(){return[[0,.5],[1,.5],[.5,1],[.5,0]]}}},t.generateTarget=h,t.getBBox=f,t.parseXML=c,t.xmlDataRenderer=void 0;var n=r(97582),o=r(31834),i=r(61592);function a(e){"@babel/helpers - typeof";return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e){if("string"!=typeof e)return e;var t=function(e){if("string"!=typeof e)return e;try{return JSON.parse(e.trim())}catch(t){return e.trim()}},r=t(e);if("string"!=typeof r)return r;for(var n=function(e){return e[e.length-1]},o=e.trim(),i=[],a=[],s=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.some(function(e){return n(a)===e})},u=null,l=0,c="";l<o.length;){var f=o[l],h=s('"',"'");if(h||f.trim()){var p="\\"===o[l-1],d=s("}"),y=s("]"),v=s(","),g=n(i);if(h)if(n(a)!==f||p)c+=f;else{a.pop();var m=t(c);g.push(m),u=m,c=""}else if(y&&","===f)c&&(g.push(t(c)),c="");else if(d&&":"===f)a.push(","),c&&(g.push(c),c="");else if(v&&","===f)c&&(g.push(t(c)),c=""),a.pop();else if("}"===f&&(d||v)){c&&(g.push(t(c)),c=""),v&&a.pop();for(var b={},w=1;w<g.length;w+=2)b[g[w-1]]=g[w];i.pop(),i.length&&n(i).push(b),a.pop(),u=b}else"]"===f&&y?(c&&(g.push(t(c)),c=""),i.pop(),i.length&&n(i).push(g),a.pop(),u=g):"{"===f?(i.push([]),a.push("}")):"["===f?(i.push([]),a.push("]")):'"'===f?a.push('"'):"'"===f?a.push("'"):c+=f;l+=1}else l+=1}return u||c}var u=function(e){return e.split("-").reduce(function(e,t){return e+t.charAt(0).toUpperCase()+t.slice(1)})},l=function(e){return function(t){for(var r=e.length,n=[],i=0,a="";i<r;)if("{"===e[i]&&"{"===e[i+1])n.push(a),a="",i+=2;else if("}"===e[i]&&"}"===e[i+1]){if(n.length){var s=n.pop();a=(0,o.get)(t,a,s.endsWith("=")?'"{'.concat(a,'}"'):a),n.push(s+a)}i+=2,a=""}else a+=e[i],i+=1;return n.push(a),n.map(function(e,t){return n[t-1]&&n[t-1].endsWith("=")?'"{'.concat(e,'}"'):e}).join("")}};function c(e,t){var r={},o=e.getAttributeNames&&e.getAttributeNames()||[],i=e.children&&Array.from(e.children).map(function(e){return c(e,t)}),l={},f=e.tagName?e.tagName.toLowerCase():"group";return"text"===f&&(r.text=e.innerText),l.type=f,"img"===f&&(l.type="image"),Array.from(o).forEach(function(t){var o=u(t),i=e.getAttribute(t);try{if("style"===o||"attrs"===o){var a=s(i);r=(0,n.__assign)((0,n.__assign)({},r),a)}else l[o]=s(i)}catch(e){if("style"===o)throw e;l[o]=i}}),l.attrs=r,t&&t.style&&l.name&&"object"===a(t.style[l.name])&&(l.attrs=(0,n.__assign)((0,n.__assign)({},l.attrs),t.style[l.name])),t&&t.style&&l.keyshape&&(l.attrs=(0,n.__assign)((0,n.__assign)({},l.attrs),t.style)),i.length&&(l.children=i),l}function f(e,t,r){var o,a,s=e.attrs,u=void 0===s?{}:s,l={x:t.x||0,y:t.y||0,width:r.width||0,height:r.height||0};switch(e.type){case"maker":case"circle":u.r&&(a=2*u.r,o=2*u.r);break;case"text":u.text&&(a=(0,i.getTextSize)(u.text,u.fontSize||12)[0],o=16,l.y+=o,l.height=o,l.width=a,e.attrs=(0,n.__assign)({fontSize:12,fill:"#000"},u));break;default:u.width&&(a=u.width),u.height&&(o=u.height)}return o>=0&&(l.height=o),a>=0&&(l.width=a),u.marginTop&&(l.y+=u.marginTop),u.marginLeft&&(l.x+=u.marginLeft),l}function h(e,t){var r;void 0===t&&(t={x:0,y:0});var o=(0,n.__assign)({x:0,y:0,width:0,height:0},t);if(null===(r=e.children)||void 0===r?void 0:r.length){var i=e.attrs,a=void 0===i?{}:i,s=a.marginTop,u=(0,n.__assign)({},t);s&&(u.y+=s);for(var l=0;l<e.children.length;l++){e.children[l].attrs.key="".concat(a.key||"root"," -").concat(l," ");var c=h(e.children[l],u);if(c.bbox){var p=c.bbox;"inline"===c.attrs.next?u.x+=c.bbox.width:u.y+=c.bbox.height,p.width+p.x>o.width&&(o.width=p.width+p.x),p.height+p.y>o.height&&(o.height=p.height+p.y)}}}return e.bbox=f(e,t,o),e.attrs=(0,n.__assign)((0,n.__assign)({},e.attrs),e.bbox),e}function p(e,t){var r,n,o,i,a=(e||{}).type,s=((null===t||void 0===t?void 0:t.attrs)||{}).key;if(s&&e&&(e.attrs.key=s),!e&&t)return{action:"delete",val:t,type:a,key:s};if(e&&!t)return{action:"add",val:e,type:a};if(!e&&!t)return{action:"same",type:a};var u=[];if((null===(r=e.children)||void 0===r?void 0:r.length)>0||(null===(n=t.children)||void 0===n?void 0:n.length)>0)for(var l=Math.max(null===(o=e.children)||void 0===o?void 0:o.length,null===(i=t.children)||void 0===i?void 0:i.length),c=t.children||[],f=e.children||[],h=0;h<l;h+=1)u.push(p(f[h],c[h]));var d=Object.keys(t.attrs),y=Object.keys(e.attrs);return t.type!==e.type?{action:"restructure",nowTarget:e,formerTarget:t,key:s,children:u}:d.filter(function(e){return"children"!==e}).some(function(r){return e.attrs[r]!==t.attrs[r]||!y.includes(r)})?{action:"change",val:e,children:u,type:a,key:s}:{action:"same",children:u,type:a,key:s}}t.xmlDataRenderer=l},36605:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r="rgb(95, 149, 255)",n="rgb(253, 253, 253)",o="rgb(247, 250, 255)",i="rgb(224, 224, 224)",a="rgb(224, 224, 224)",s={version:"0.8.22",rootContainerClassName:"root-container",nodeContainerClassName:"node-container",edgeContainerClassName:"edge-container",comboContainerClassName:"combo-container",delegateContainerClassName:"delegate-container",defaultLoopPosition:"top",nodeLabel:{style:{fill:"#000",fontSize:12,textAlign:"center",textBaseline:"middle"},offset:4},defaultNode:{type:"circle",style:{lineWidth:1,stroke:r,fill:"rgb(239, 244, 255)"},size:20,color:r,linkPoints:{size:8,lineWidth:1,fill:o,stroke:r}},nodeStateStyles:{active:{fill:o,stroke:r,lineWidth:2,shadowColor:r,shadowBlur:10},selected:{fill:"rgb(255, 255, 255)",stroke:r,lineWidth:4,shadowColor:r,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{fill:"rgb(223, 234, 255)",stroke:"#4572d9",lineWidth:2,"text-shape":{fontWeight:500}},inactive:{fill:"rgb(247, 250, 255)",stroke:"rgb(191, 213, 255)",lineWidth:1},disable:{fill:"rgb(250, 250, 250)",stroke:"rgb(224, 224, 224)",lineWidth:1}},edgeLabel:{style:{fill:"rgb(0, 0, 0)",textAlign:"center",textBaseline:"middle",fontSize:12}},defaultEdge:{type:"line",size:1,style:{stroke:i,lineAppendWidth:2},color:i},edgeStateStyles:{active:{stroke:r,lineWidth:1},selected:{stroke:r,lineWidth:2,shadowColor:r,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:r,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{stroke:"rgb(234, 234, 234)",lineWidth:1},disable:{stroke:"rgb(245, 245, 245)",lineWidth:1}},comboLabel:{style:{fill:"rgb(0, 0, 0)",textBaseline:"middle",fontSize:12},refY:10,refX:10},defaultCombo:{type:"circle",style:{fill:n,lineWidth:1,stroke:a,r:5,width:20,height:10},size:[20,5],color:a,padding:[25,20,15,20]},comboStateStyles:{active:{stroke:r,lineWidth:1,fill:"rgb(247, 250, 255)"},selected:{stroke:r,lineWidth:2,fill:n,shadowColor:r,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:"#4572d9",lineWidth:2,fill:n,"text-shape":{fontWeight:500}},inactive:{stroke:"rgb(224, 224, 224)",fill:n,lineWidth:1},disable:{stroke:"rgb(234, 234, 234)",fill:"rgb(250, 250, 250)",lineWidth:1}},delegateStyle:{fill:"#F3F9FF",fillOpacity:.5,stroke:"#1890FF",strokeOpacity:.9,lineDash:[5,5]},windowFontFamily:"undefined"!=typeof window&&window.getComputedStyle&&document.body&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif"};t.default=s},93894:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(){return function(e){this.graph=e,this.destroyed=!1,this.initEvents()}}();t.default=r},49744:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"ItemController",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"ModeController",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(t,"StateController",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"ViewController",{enumerable:!0,get:function(){return o.default}});var n=s(r(97500)),o=s(r(31133)),i=s(r(49749)),a=s(r(88081));function s(e){return e&&e.__esModule?e:{default:e}}},49749:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(97582),o=r(31834),i=l(r(4779)),a=l(r(14319)),s=l(r(43059)),u=r(61592);function l(e){return e&&e.__esModule?e:{default:e}}var c=function(){function e(e){var t=this;this.edgeToBeUpdateMap={},this.throttleRefresh=(0,o.throttle)(function(e){var r=t.graph;if(r&&!r.get("destroyed")){var n=t.edgeToBeUpdateMap;if(n){var o=Object.values(n);o.length&&(o.forEach(function(e){var t=e.edge;if(t&&!t.destroyed){var r=t.getSource(),n=t.getTarget();r&&!r.destroyed&&n&&!n.destroyed&&t.refresh(e.updateType)}}),t.edgeToBeUpdateMap={})}}},16,{trailing:!0,leading:!0}),this.graph=e,this.destroyed=!1}return e.prototype.addItem=function(e,t){var r=this.graph,n="vedge"===e?"edge":e,l=r.get("".concat(n,"Group"))||r.get("group"),c=(0,o.upperFirst)(n),f=null,h=r.get(n+(0,o.upperFirst)("stateStyles"))||{},p=r.get("default"+c);t.stateStyles&&(h=t.stateStyles),p&&(0,o.each)(p,function(e,r){(0,o.isObject)(e)&&!(0,o.isArray)(e)?t[r]=(0,o.deepMix)({},e,t[r]):(0,o.isArray)(e)?t[r]=t[r]||(0,o.clone)(p[r]):t[r]=t[r]||p[r]});var d=r.get(n+"Mapper");if(d){var y=d(t);y.stateStyles&&(h=y.stateStyles,delete y.stateStyles),(0,o.each)(y,function(e,r){(0,o.isObject)(e)&&!(0,o.isArray)(e)?t[r]=(0,o.deepMix)({},t[r],e):t[r]=y[r]||t[r]})}if(r.emit("beforeadditem",{type:e,model:t}),"edge"===e||"vedge"===e){var v=void 0,g=void 0;if(v=t.source,g=t.target,v&&(0,o.isString)(v)&&(v=r.findById(v)),g&&(0,o.isString)(g)&&(g=r.findById(g)),!v||!g)return void console.warn("The source or target node of edge ".concat(t.id," does not exist!"));v.getType&&"combo"===v.getType()&&(t.isComboEdge=!0),g.getType&&"combo"===g.getType()&&(t.isComboEdge=!0),f=new i.default({model:t,source:v,target:g,styles:h,linkCenter:r.get("linkCenter"),group:l.addGroup()})}else if("node"===e)f=new a.default({model:t,styles:h,group:l.addGroup()});else if("combo"===e){var m=t.children,b=(0,u.getComboBBox)(m,r),w=void 0,_=void 0;if(isNaN(b.x)?isNaN(t.x)&&(w=100*Math.random()):w=b.x,isNaN(b.y)?isNaN(t.y)&&(_=100*Math.random()):_=b.y,isNaN(t.x)||isNaN(t.y))t.x=w,t.y=_;else{var x=t.x-w,S=t.y-_;this.updateComboSucceeds(t.id,x,S,m)}var O=l.addGroup();O.setZIndex(t.depth),f=new s.default({model:t,styles:h,animate:r.get("animate"),bbox:t.collapsed?(0,u.getComboBBox)([],r):b,group:O}),t.collapsed||"circle"!==f.getKeyShape().get("type")||(b.width=Math.hypot(b.height,b.width),b.height=b.width,f.set("bbox",b),f.refresh());var P=f.getModel();(m||[]).forEach(function(e){var t=r.findById(e.id);f.addChild(t),e.depth=P.depth+2})}if(f)return f.setOptimize(r.getNodes().length>r.get("optimizeThreshold")),r.get("".concat(e,"s")).push(f),r.get("itemMap")[f.get("id")]=f,r.emit("afteradditem",{item:f,model:t}),f},e.prototype.updateItem=function(e,t){var r,i,a=this,s=this.graph;if((0,o.isString)(e)&&(e=s.findById(e)),e&&!e.destroyed){var u="";e.getType&&(u=e.getType());var l=s.get(u+"Mapper"),c=e.getModel(),f=c.x,h=c.y,p=e.getUpdateType(t);if(l){var d=l((0,o.deepMix)({},c,t)),y=(0,o.deepMix)({},c,d,t);d.stateStyles&&(e.set("styles",y.stateStyles),delete y.stateStyles),(0,o.each)(y,function(e,r){t[r]=e})}else(0,o.each)(t,function(e,r){c[r]&&(0,o.isObject)(e)&&!(0,o.isArray)(e)&&(t[r]=(0,n.__assign)((0,n.__assign)({},c[r]),t[r]))});if(s.emit("beforeupdateitem",{item:e,cfg:t}),"edge"===u){if(t.source){var v=t.source;(0,o.isString)(v)&&(v=s.findById(v)),e.setSource(v)}if(t.target){var g=t.target;(0,o.isString)(g)&&(g=s.findById(g)),e.setTarget(g)}e.update(t)}else if("node"===u){e.update(t,p);var m=e.getEdges();"move"===p?(0,o.each)(m,function(e){a.edgeToBeUpdateMap[e.getID()]={edge:e,updateType:p},a.throttleRefresh()}):(null===p||void 0===p?void 0:p.includes("bbox"))&&(0,o.each)(m,function(e){e.refresh(p)})}else if("combo"===u){if(e.update(t,p),!isNaN(t.x)||!isNaN(t.y)){var b=t.x-f||0,w=t.y-h||0;this.updateComboSucceeds(c.id,b,w)}var _=e.getEdges();if(((null===p||void 0===p?void 0:p.includes("bbox"))||"move"===p)&&"combo"===u){var x=e.get("shapeFactory"),S=c.type||"circle";(void 0===c.animate||void 0===t.animate?null===(i=null===(r=x[S])||void 0===r?void 0:r.options)||void 0===i?void 0:i.animate:c.animate||t.animate)?setTimeout(function(){if(e&&!e.destroyed){var t=e.getKeyShape();t&&!t.destroyed&&(0,o.each)(_,function(e){e&&!e.destroyed&&e.refresh()})}},201):(0,o.each)(_,function(e){e.refresh()})}}e.setOptimize(s.getNodes().length>s.get("optimizeThreshold")),s.emit("afterupdateitem",{item:e,cfg:t})}},e.prototype.updateCombo=function(e,t,r){var n,i,a=this,s=this.graph;if((0,o.isString)(e)&&(e=s.findById(e)),e&&!e.destroyed){var l=e.getModel(),c=(0,u.getComboBBox)(t,s,e),f=c.x,h=c.y;e.set("bbox",c);var p=f,d=h;r?(p=isNaN(l.x)?f:l.x,d=isNaN(l.y)?h:l.y):(p=isNaN(f)?l.x:f,d=isNaN(h)?l.y:h),e.update({x:p,y:d});var y=e.get("shapeFactory"),v=l.type||"circle";(void 0===l.animate?null===(i=null===(n=y[v])||void 0===n?void 0:n.options)||void 0===i?void 0:i.animate:l.animate)?setTimeout(function(){if(e&&!e.destroyed){var t=e.getKeyShape();t&&!t.destroyed&&(e.getShapeCfg(l),a.updateComboEdges(e))}},201):this.updateComboEdges(e)}},e.prototype.updateComboEdges=function(e){for(var t,r,n=e.getEdges()||[],o=0;o<n.length;o++){var i=n[o];(null===i||void 0===i?void 0:i.destroyed)||(null===(t=null===i||void 0===i?void 0:i.getSource())||void 0===t?void 0:t.destroyed)||(null===(r=null===i||void 0===i?void 0:i.getTarget())||void 0===r?void 0:r.destroyed)||i.refresh()}},e.prototype.collapseCombo=function(e,t){void 0===t&&(t=!0);var r=this.graph;(0,o.isString)(e)&&(e=r.findById(e));var n=e.getChildren();n.nodes.forEach(function(e){r.hideItem(e,t)}),n.combos.forEach(function(e){r.hideItem(e,t)})},e.prototype.updateComboSucceeds=function(e,t,r,n){var o=this;void 0===n&&(n=[]);var i=this.graph;if(t||r){var a=n;if(!(null===a||void 0===a?void 0:a.length)){var s=i.get("comboTrees");null===s||void 0===s||s.forEach(function(t){(0,u.traverseTree)(t,function(t){return t.id!==e||(a=t.children,!1)})})}null===a||void 0===a||a.forEach(function(e){var n=i.findById(e.id);if(n){var a=n.getModel();o.updateItem(e.id,{x:(a.x||0)+t,y:(a.y||0)+r})}})}},e.prototype.expandCombo=function(e,t){void 0===t&&(t=!0);var r=this.graph;(0,o.isString)(e)&&(e=r.findById(e));var n=e.getChildren(),i=new Set;n.nodes.forEach(function(e){r.showItem(e,t),e.getEdges().forEach(function(e){return i.add(e)})}),n.combos.forEach(function(e){e.getModel().collapsed?e.show():r.showItem(e,t),e.getEdges().forEach(function(e){return i.add(e)})}),i.forEach(function(e){return e.refresh()})},e.prototype.removeItem=function(e){var t=this,r=this.graph;if((0,o.isString)(e)&&(e=r.findById(e)),e&&!e.destroyed){var n=(0,o.clone)(e.getModel()),i="";e.getType&&(i=e.getType()),r.emit("beforeremoveitem",{item:n,type:i});var a=r.get("".concat(i,"s")),s=a.indexOf(e);if(s>-1&&a.splice(s,1),"edge"===i){var l=r.get("v".concat(i,"s")),c=l.indexOf(e);c>-1&&l.splice(c,1)}var f=e.get("id");delete r.get("itemMap")[f];var h=r.get("comboTrees"),p=e.get("id");if("node"===i){var d=e.getModel().comboId;if(h&&d){var y=h,v=!1;h.forEach(function(e){v||(0,u.traverseTree)(e,function(e){if(e.id===p&&y){var t=y.indexOf(e);return y.splice(t,1),v=!0,!1}return y=e.children,!0})})}for(var g=(_=e.getEdges()).length-1;g>=0;g--)r.removeItem(_[g],!1);d&&r.updateCombo(d)}else if("combo"===i){var m,b=e.getModel().parentId,w=!1;(h||[]).forEach(function(e){w||(0,u.traverseTree)(e,function(e){return e.id!==p||(m=e,w=!0,!1)})}),m.removed=!0,m&&m.children&&m.children.forEach(function(e){t.removeItem(e.id)});var _;for(g=(_=e.getEdges()).length;g>=0;g--)r.removeItem(_[g],!1);b&&r.updateCombo(b)}e.destroy(),r.emit("afterremoveitem",{item:n,type:i})}},e.prototype.setItemState=function(e,t,r){var n=this.graph,i=t;(0,o.isString)(r)&&(i="".concat(t,":").concat(r)),e.hasState(i)===r&&r||(0,o.isString)(r)&&e.hasState(i)||(n.emit("beforeitemstatechange",{item:e,state:i,enabled:r}),e.setState(t,r),n.autoPaint(),n.emit("afteritemstatechange",{item:e,state:i,enabled:r}))},e.prototype.priorityState=function(e,t){var r=this.graph,n=e;(0,o.isString)(e)&&(n=r.findById(e)),this.setItemState(n,t,!1),this.setItemState(n,t,!0)},e.prototype.clearItemStates=function(e,t){var r=this.graph;(0,o.isString)(e)&&(e=r.findById(e)),r.emit("beforeitemstatesclear",{item:e,states:t}),e.clearStates(t),r.emit("afteritemstatesclear",{item:e,states:t})},e.prototype.refreshItem=function(e){var t=this.graph;(0,o.isString)(e)&&(e=t.findById(e)),t.emit("beforeitemrefresh",{item:e}),e.refresh(),t.emit("afteritemrefresh",{item:e})},e.prototype.addCombos=function(e,t){var r=this,n=this.graph;(e||[]).forEach(function(e){(0,u.traverseTreeUp)(e,function(e){var n;return t.forEach(function(t){t.id===e.id&&(t.children=e.children,t.depth=e.depth,n=t)}),n&&r.addItem("combo",n),!0})});var o=n.get("comboGroup");o&&o.sort()},e.prototype.changeItemVisibility=function(e,t){var r=this,n=this.graph;if((0,o.isString)(e)&&(e=n.findById(e)),e){if(n.emit("beforeitemvisibilitychange",{item:e,visible:t}),e.changeVisibility(t),e.getType&&"node"===e.getType()){var i=e.getEdges();(0,o.each)(i,function(e){(!t||e.get("source").isVisible()&&e.get("target").isVisible())&&r.changeItemVisibility(e,t)})}else if(e.getType&&"combo"===e.getType()){var a=n.get("comboTrees"),s=e.get("id"),l=[],c=!1;(a||[]).forEach(function(e){c||e.children&&0!==e.children.length&&(0,u.traverseTree)(e,function(e){return e.id!==s||(l=e.children,c=!0,!1)})}),l&&(!t||t&&!e.getModel().collapsed)&&l.forEach(function(e){var o=n.findById(e.id);r.changeItemVisibility(o,t)});i=e.getEdges();(0,o.each)(i,function(e){(!t||e.get("source").isVisible()&&e.get("target").isVisible())&&r.changeItemVisibility(e,t)})}return n.emit("afteritemvisibilitychange",{item:e,visible:t}),e}console.warn("The item to be shown or hidden does not exist!")},e.prototype.destroy=function(){this.graph=null,this.destroyed=!0},e}();t.default=c},66863:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(97582),o=r(31834),i=r(30271),a=r(42658),s=function(){function e(e){this.graph=e,this.layoutCfg=e.get("layout")||{},this.layoutType=this.getLayoutType(),this.layoutMethods=[],this.initLayout()}return e.prototype.initLayout=function(){},e.prototype.getLayoutType=function(){return this.getLayoutCfgType(this.layoutCfg)},e.prototype.getLayoutCfgType=function(e){var t=e.type;if(t)return t;var r=e.pipes;return Array.isArray(r)?r.map(function(e){return(null===e||void 0===e?void 0:e.type)||""}):null},e.prototype.isLayoutTypeSame=function(e){var t=this.getLayoutCfgType(e),r=Array.isArray(this.layoutType),n=Array.isArray(t);return r&&n?this.layoutType.every(function(e,r){return e===t[r]}):!Array.isArray(t)&&!Array.isArray(this.layoutType)&&(null===e||void 0===e?void 0:e.type)===this.layoutType},e.prototype.refreshLayout=function(){var e=this.graph,t=this.layoutType,r=this.layoutCfg;if(e){var n=(void 0===r?{}:r).animate,o=void 0===n&&("force"===t||"force2"===t),i=(0,a.isForce)(t)&&(n||o);e.get("animate")&&!i?e.positionsAnimate("comboCombined"===t):e.refreshPositions("comboCombined"===t)}},e.prototype.changeLayout=function(e){var t=e.disableTriggerLayout,r=(0,n.__rest)(e,["disableTriggerLayout"]);this.layoutCfg=r,this.layoutType=r.type||this.layoutType,t||this.layout()},e.prototype.changeData=function(e){this.layout(e)},e.prototype.destoryLayoutMethods=function(){var e=this.layoutMethods,t=[];return null===e||void 0===e||e.forEach(function(e){var r,n=null===(r=e.getType)||void 0===r?void 0:r.call(e);n&&t.push(n),e.destroy()}),this.layoutMethods=[],t},e.prototype.destroyLayout=function(){this.destoryLayoutMethods();var e=this.graph;e&&!e.get("destroyed")&&e.set("layout",void 0),this.layoutCfg=void 0,this.layoutType=void 0,this.layoutMethods=void 0},e.prototype.setDataFromGraph=function(){for(var e,t=[],r=[],n=[],o=[],i=[],a=[],s=[],u=this.graph.getNodes(),l=this.graph.getEdges(),c=this.graph.getCombos(),f=u.length,h=0;h<f;h++){var p=u[h];if(p&&!p.destroyed){var d=p.getModel();p.isVisible()?t.push(d):r.push(d)}}var y=l.length;for(h=0;h<y;h++){var v=l[h];if(v&&!v.destroyed){d=v.getModel();v.isVisible()?d.isComboEdge?i.push(d):n.push(d):o.push(d)}}var g=c.length;for(h=0;h<g;h++){var m=c[h];if(!m.destroyed){d=m.getModel();m.isVisible()?a.push(d):s.push(d)}}return{nodes:t,hiddenNodes:r,edges:n,hiddenEdges:o,combos:a,hiddenCombos:s,comboEdges:i,vedges:null===(e=this.graph.get("vedges"))||void 0===e?void 0:e.map(function(e){return e.getModel()})}},e.prototype.relayout=function(e){var t=this,r=this.graph,n=this.layoutMethods,o=this.layoutCfg;if(r&&!r.get("destroyed")){var i=Promise.resolve();if(e){this.data=this.setDataFromGraph();var a=this.data.nodes;if(!a)return!1;i=this.initPositions(o.center,a)}r.emit("beforelayout"),null===n||void 0===n||n.forEach(function(e,r){var a=o[r]||o;i=i.then(function(){var e,i=t.execLayoutMethod(a,r);return r===n.length-1&&(null===(e=o.onAllLayoutEnd)||void 0===e||e.call(o)),i})})}},e.prototype.filterLayoutData=function(e,t){var r,i,a=e.nodes,s=e.edges,u=(0,n.__rest)(e,["nodes","edges"]);if(!a)return e;r=(0,o.isFunction)(null===t||void 0===t?void 0:t.nodesFilter)?t.nodesFilter:function(){return!0};var l=a.filter(r);if((0,o.isFunction)(null===t||void 0===t?void 0:t.edgesFilter))i=t.edgesFilter;else{var c=l.reduce(function(e,t){return e[t.id]=!0,e},{});i=function(e){return c[e.source]&&c[e.target]}}return(0,n.__assign)({nodes:l,edges:s.filter(i)},u)},e.prototype.getLayoutBBox=function(e){var t=this.graph,r=(0,o.groupBy)(t.getNodes(),function(e){return e.getModel().layoutOrder}),n=Object.values(r).map(function(e){var t=(0,i.calculationItemsBBox)(e);return t.size=[t.width,t.height],t});return{groupNodes:Object.values((0,o.groupBy)(e,"layoutOrder")),layoutNodes:n}},e.prototype.layoutAnimate=function(){},e.prototype.moveToZero=function(){var e=this.graph.get("data").nodes;if(void 0!==e[0].x&&null!==e[0].x&&!(0,i.isNaN)(e[0].x)){for(var t=[0,0],r=e.length,n=0;n<r;n++){var o=e[n];t[0]+=o.x,t[1]+=o.y}t[0]/=e.length,t[1]/=e.length;for(n=0;n<r;n++){(o=e[n]).x-=t[0],o.y-=t[1]}}},e.prototype.initPositions=function(e,t){var r;return(0,n.__awaiter)(this,void 0,void 0,function(){var o,a,s;return(0,n.__generator)(this,function(n){return o=this.graph,(null===t||void 0===t?void 0:t.length)?(a=t.filter(function(e){return(0,i.isNaN)(e.x)||(0,i.isNaN)(e.y)}),(s=a?a.length:0)?[2,null===(r=this.initWithPreset)||void 0===r?void 0:r.call(this,function(){},function(){var t=.85*o.get("width"),r=.85*o.get("height"),n=Math.ceil(Math.sqrt(s)*(t/r)),u=t/(n-1),l=r/(Math.ceil(s/n)-1);isFinite(u)&&u||(u=0),isFinite(l)&&u||(l=0);for(var c=e[0]-t/2,f=e[1]-r/2,h=0;h<s;h++){var p=a[h];(0,i.isNaN)(+p.x)&&(!1,p.x=h%n*u+c),(0,i.isNaN)(+p.y)&&(!1,p.y=Math.floor(h/n)*l+f)}})]:[2]):[2,Promise.resolve()]})})},e.prototype.destroy=function(){this.graph=null,this.destoryLayoutMethods(),this.destroyed=!0},e}();t.default=s},97500:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,o=r(31834),i=(n=r(58279))&&n.__esModule?n:{default:n};var a=function(){function e(e){this.graph=e,this.destroyed=!1,this.modes=e.get("modes")||{default:[]},this.formatModes(),this.mode=e.get("defaultMode")||"default",this.currentBehaves=[],this.setMode(this.mode)}return e.prototype.formatModes=function(){var e=this.modes;(0,o.each)(e,function(e){(0,o.each)(e,function(t,r){(0,o.isString)(t)&&(e[r]={type:t})})})},e.prototype.setBehaviors=function(e){var t,r=this.graph,n=this.modes[e],a=[];(0,o.each)(n||[],function(e){var n=i.default.getBehavior(e.type||e);n&&(t=new n(e))&&(t.bind(r),a.push(t))}),this.currentBehaves=a},e.mergeBehaviors=function(e,t){return(0,o.each)(t,function(t){e.indexOf(t)<0&&((0,o.isString)(t)&&(t={type:t}),e.push(t))}),e},e.filterBehaviors=function(e,t){var r=[];return e.forEach(function(e){var n="";n=(0,o.isString)(e)?e:e.type,t.indexOf(n)<0&&r.push(e)}),r},e.prototype.setMode=function(e){var t=this.modes,r=this.graph,n=e;t[n]&&(r.emit("beforemodechange",{mode:e}),(0,o.each)(this.currentBehaves,function(e){e.delegate&&e.delegate.remove(),e.unbind(r)}),this.setBehaviors(n),r.emit("aftermodechange",{mode:e}),this.mode=e)},e.prototype.getMode=function(){return this.mode},e.prototype.manipulateBehaviors=function(t,r,n){var i,a=this;if(i=(0,o.isArray)(t)?t:[t],(0,o.isArray)(r))return(0,o.each)(r,function(t){a.modes[t]?a.modes[t]=n?e.mergeBehaviors(a.modes[t]||[],i):e.filterBehaviors(a.modes[t]||[],i):n&&(a.modes[t]=i)}),this;var s=r;return r||(s=this.mode),this.modes[s]||n&&(this.modes[s]=i),this.modes[s]=n?e.mergeBehaviors(this.modes[s]||[],i):e.filterBehaviors(this.modes[s]||[],i),this.formatModes(),this.setMode(this.mode),this},e.prototype.updateBehavior=function(e,t,r){(0,o.isString)(e)&&(e={type:e});var n=[];if(r&&r!==this.mode&&"default"!==r){if(!(n=this.modes[r])||!n.length)return console.warn("Update behavior failed! There is no behaviors in this mode on the graph."),this;var i=n.length;for(s=0;s<i;s++){if((u=n[s]).type===e.type||u===e.type)return u===e.type&&(u={type:u}),Object.assign(u,t),n[s]=u,this;s===i-1&&console.warn("Update behavior failed! There is no such behavior in the mode")}}else{if(!(n=this.currentBehaves)||!n.length)return console.warn("Update behavior failed! There is no behaviors in this mode on the graph."),this;for(var a=n.length,s=0;s<a;s++){var u;if((u=n[s]).type===e.type)return u.updateCfg(t),this;s===a-1&&console.warn("Update behavior failed! There is no such behavior in the mode")}}return this},e.prototype.destroy=function(){this.graph=null,this.modes=null,this.currentBehaves=null,this.destroyed=!0},e}();t.default=a},88081:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(31834),o=function(){function e(e){this.graph=e,this.destroyed=!1}return e.prototype.updateState=function(e,t,r){var o=this.graph.get("states"),i=t;(0,n.isString)(r)&&(i="".concat(t,":").concat(r)),o[i]||(o[i]=[]),r?o[i].push(e):o[i]=o[i].filter(function(t){return t!==e}),this.graph.set("states",o),this.graph.emit("graphstatechange",{states:o})},e.prototype.updateStates=function(e,t,r){var o=this.graph.get("states");((0,n.isString)(t)?[t]:t).forEach(function(t){var i=t;o[i]||(o[i]=[]),(0,n.isString)(r)&&(i="".concat(t,":").concat(r)),r?o[i].push(e):o[i]=o[i].filter(function(t){return t!==e})}),this.graph.set("states",o),this.graph.emit("graphstatechange",{states:t})},e.prototype.destroy=function(){this.graph=null,this.destroyed=!0},e}();t.default=o},31133:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(97582),o=r(31834),i=r(30271),a=r(39520),s=r(47592),u=r(61592),l=function(){function e(e){this.destroyed=!1,this.graph=e,this.destroyed=!1}return e.prototype.getViewCenter=function(){var e=this.getFormatPadding(),t=this.graph,r=this.graph.get("width"),n=t.get("height");return{x:(r-e[1]-e[3])/2+e[3],y:(n-e[0]-e[2])/2+e[0]}},e.prototype.fitCenter=function(e,t){var r,n=this.graph,o=n.get("group"),i=n.getNodes();if(i.length>n.get("optimizeThreshold")){var s=1/0,u=1/0,l=-1/0,c=-1/0;i.forEach(function(e){var t=e.getModel(),r=t.x,n=t.y;s>r&&(s=r),u>n&&(u=n),l<r&&(l=r),c<n&&(c=n)});var f=o.getMatrix()||[1,0,0,0,1,0,0,0,1],h=(0,a.applyMatrix)({x:s,y:u},f),p=h.x,d=h.y,y=(0,a.applyMatrix)({x:l,y:c},f),v=y.x,g=y.y;r={minX:p,maxX:v,minY:d,maxY:g,width:v-p,height:g-d,x:p,y:d}}else r=o.getCanvasBBox();if(0!==r.width&&0!==r.height){var m=this.getViewCenter(),b=r.x+r.width/2,w=r.y+r.height/2;n.translate(m.x-b,m.y-w,e,t)}},e.prototype.animatedFitView=function(e,t,r,n,o,l,c,f){var h=this.graph;r=r||{duration:500,easing:"easeCubic"};var p=n.x+o.x-l.x-n.minX,d=n.y+o.y-l.y-n.minY;if(!(0,i.isNaN)(p)&&!(0,i.isNaN)(d)){var y=(0,s.transform)([1,0,0,0,1,0,0,0,1],[["t",p,d]]);if(f){var v=h.get("minZoom"),g=h.get("maxZoom"),m=c;v&&c<v?(m=v,console.warn("fitview failed, ratio out of range, ratio: %f",c,"graph minzoom has been used instead")):g&&c>g&&(m=g,console.warn("fitview failed, ratio out of range, ratio: %f",c,"graph maxzoom has been used instead"));var b=(0,s.transform)(y,[["t",-o.x,-o.y],["s",m,m],["t",o.x,o.y]]),w=(0,u.getAnimateCfgWithCallback)({animateCfg:r,callback:function(){e.setMatrix(b),h.emit("viewportchange",{action:"translate",matrix:y}),h.emit("viewportchange",{action:"zoom",matrix:b})}});e.stopAnimate(),e.setMatrix(t),e.animate(function(e){return{matrix:(0,a.lerpArray)(t,b,e)}},w)}else{var _=(0,u.getAnimateCfgWithCallback)({animateCfg:r,callback:function(){h.emit("viewportchange",{action:"translate",matrix:y})}});e.animate(function(e){return{matrix:(0,a.lerpArray)(t,y,e)}},_)}}},e.prototype.fitView=function(e,t){var r,n=this.graph,o=this.getFormatPadding(),a=n.get("width"),s=n.get("height"),u=n.get("group"),l=u.getMatrix()||[1,0,0,0,1,0,0,0,1];u.resetMatrix();var c=n.getNodes();if(c.length>n.get("optimizeThreshold")){var f=1/0,h=1/0,p=-1/0,d=-1/0;c.forEach(function(e){var t=e.getModel(),r=t.x,n=t.y;f>r&&(f=r),h>n&&(h=n),p<r&&(p=r),d<n&&(d=n)}),r={minX:f,maxX:p,minY:h,maxY:d,width:p-f,height:d-h,x:f,y:h}}else r=u.getCanvasBBox();if(0!==r.width&&0!==r.height){var y=this.getViewCenter(),v={x:r.x+r.width/2,y:r.y+r.height/2},g=(a-o[1]-o[3])/r.width,m=(s-o[0]-o[2])/r.height,b=g;if(g>m&&(b=m),e)this.animatedFitView(u,l,t,r,y,v,b,!0);else{var w=y.x-v.x,_=y.y-v.y;if((0,i.isNaN)(w)||(0,i.isNaN)(_))return;n.translate(w,_),n.zoom(b,y)||console.warn("zoom failed, ratio out of range, ratio: %f",b)}}},e.prototype.fitViewByRules=function(e,t,r){var n,o=e.onlyOutOfViewPort,i=void 0!==o&&o,a=e.direction,s=void 0===a?"both":a,u=e.ratioRule,l=void 0===u?"min":u,c=this.graph,f=this.getFormatPadding(),h=c.get("width"),p=c.get("height"),d=c.get("group"),y=d.getMatrix()||[1,0,0,0,1,0,0,0,1];d.resetMatrix();var v=c.getNodes();if(v.length>c.get("optimizeThreshold")){var g=1/0,m=1/0,b=-1/0,w=-1/0;v.forEach(function(e){var t=e.getModel(),r=t.x,n=t.y;g>r&&(g=r),m>n&&(m=n),b<r&&(b=r),w<n&&(w=n)}),n={minX:g,maxX:b,minY:m,maxY:w,width:b-g,height:w-m,x:g,y:m}}else n=d.getCanvasBBox();if(0!==n.width&&0!==n.height){var _,x=this.getViewCenter(),S={x:n.x+n.width/2,y:n.y+n.height/2},O=(h-f[1]-f[3])/n.width,P=(p-f[0]-f[2])/n.height;if(_="x"===s?O:"y"===s?P:"max"===l?Math.max(O,P):Math.min(O,P),i&&(_=_<1?_:1),t)this.animatedFitView(d,y,r,n,x,S,_,!0);else{var E=c.getZoom()*_,k=c.get("minZoom");E<k&&(E=k,console.warn("fitview failed, ratio out of range, ratio: %f",_,"graph minzoom has been used instead")),c.translate(x.x-S.x,x.y-S.y),c.zoomTo(E,x)}}},e.prototype.getFormatPadding=function(){var e=this.graph.get("fitViewPadding");return(0,i.formatPadding)(e)},e.prototype.focusPoint=function(e,t,r){var o=this,i=this.getViewCenter(),a=this.getPointByCanvas(i.x,i.y),s=this.graph.get("group").getMatrix();if(s||(s=[1,0,0,0,1,0,0,0,1]),t){var u=(a.x-e.x)*s[0],l=(a.y-e.y)*s[4],c=0,f=0,h=0,p=0;this.graph.get("canvas").animate(function(e){h=u*e,p=l*e,o.graph.translate(h-c,p-f),c=h,f=p},(0,n.__assign)({},r))}else this.graph.translate((a.x-e.x)*s[0],(a.y-e.y)*s[4])},e.prototype.getPointByCanvas=function(e,t){var r=this.graph.get("group").getMatrix();return r||(r=[1,0,0,0,1,0,0,0,1]),(0,a.invertMatrix)({x:e,y:t},r)},e.prototype.getPointByClient=function(e,t){var r=this.graph.get("canvas").getPointByClient(e,t);return this.getPointByCanvas(r.x,r.y)},e.prototype.getClientByPoint=function(e,t){var r=this.graph.get("canvas"),n=this.getCanvasByPoint(e,t),o=r.getClientByPoint(n.x,n.y);return{x:o.x,y:o.y}},e.prototype.getCanvasByPoint=function(e,t){var r=this.graph.get("group").getMatrix();return r||(r=[1,0,0,0,1,0,0,0,1]),(0,a.applyMatrix)({x:e,y:t},r)},e.prototype.focus=function(e,t,r){if((0,o.isString)(e)&&(e=this.graph.findById(e)),e){var n=0,i=0;if(e.getType&&"edge"===e.getType()){var a=e.getSource().get("group").getMatrix(),s=e.getTarget().get("group").getMatrix();a&&s?(n=(a[6]+s[6])/2,i=(a[7]+s[7])/2):(a||s)&&(n=a?a[6]:s[6],i=a?a[7]:s[7])}else{var u=e.get("group").getMatrix();u||(u=[1,0,0,0,1,0,0,0,1]),n=u[6],i=u[7]}this.focusPoint({x:n,y:i},t,r)}},e.prototype.focusItems=function(e,t,r,n){if(e.length){var o=this.graph,i=this.getFormatPadding(),a=o.get("width"),s=o.get("height"),u=o.get("group"),l=u.getMatrix()||[1,0,0,0,1,0,0,0,1];u.resetMatrix();for(var c={x:0,y:0,minX:Number.MAX_SAFE_INTEGER,minY:Number.MAX_SAFE_INTEGER,maxX:Number.MIN_SAFE_INTEGER,maxY:Number.MIN_SAFE_INTEGER,width:0,height:0},f=0,h=e;f<h.length;f++){var p=h[f].getBBox();p.minX<c.minX&&(c.minX=p.minX),p.minY<c.minY&&(c.minY=p.minY),p.maxX>c.maxX&&(c.maxX=p.maxX),p.maxY>c.maxY&&(c.maxY=p.maxY)}if(c.x=c.minX,c.y=c.minY,c.width=c.maxX-c.minX,c.height=c.maxY-c.minY,0!==c.width&&0!==c.height){var d=this.getViewCenter(),y={x:c.x+c.width/2,y:c.y+c.height/2},v=(a-i[1]-i[3])/c.width,g=(s-i[0]-i[2])/c.height,m=v;v>g&&(m=g),r?this.animatedFitView(u,l,n,c,d,y,m,t):(o.translate(d.x-y.x,d.y-y.y),t&&!o.zoom(m,d)&&console.warn("zoom failed, ratio out of range, ratio: %f",m))}}},e.prototype.changeSize=function(e,t){var r=this.graph;if(!(0,o.isNumber)(e)||!(0,o.isNumber)(t))throw Error("invalid canvas width & height, please make sure width & height type is number");r.set({width:e,height:t}),r.get("canvas").changeSize(e,t),r.get("plugins").forEach(function(e){e.get("gridContainer")&&e.positionInit()})},e.prototype.destroy=function(){this.graph=null,this.destroyed=!1},e}();t.default=l},67239:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(97582),o=d(r(73118)),i=r(43708),a=r(31834),s=r(81366),u=r(39520),l=r(29001),c=d(r(36605)),f=r(49744),h=r(61592),p=d(r(65674));function d(e){return e&&e.__esModule?e:{default:e}}var y=i.ext.transform,v=function(e){function t(t){var r=e.call(this)||this;return r.sortCombos=(0,a.debounce)(function(){var e=r.get("comboSorted");if(r&&!r.destroyed&&!e){r.set("comboSorted",!0);var t=[],n={};(r.get("comboTrees")||[]).forEach(function(e){(0,h.traverseTree)(e,function(e){return t[e.depth]?t[e.depth].push(e.id):t[e.depth]=[e.id],n[e.id]=e.depth,!0})}),(r.getEdges().concat(r.get("vedges"))||[]).forEach(function(e){var r=e.getModel(),o=n[r.source]||0,i=n[r.target]||0,a=Math.max(o,i);t[a]?t[a].push(r.id):t[a]=[r.id]}),t.forEach(function(e){if(e&&e.length)for(var t=e.length-1;t>=0;t--){var n=r.findById(e[t]);n&&n.toFront()}})}},500,!1),r.cfg=(0,a.deepMix)(r.getDefaultCfg(),t),r.init(),r.animating=!1,r.destroyed=!1,r.cfg.enabledStack&&(r.undoStack=new s.Stack(r.cfg.maxStep),r.redoStack=new s.Stack(r.cfg.maxStep)),r}return(0,n.__extends)(t,e),t.prototype.init=function(){this.initCanvas();var e=new f.ViewController(this),t=new f.ModeController(this),r=new f.ItemController(this),n=new f.StateController(this);this.set({viewController:e,modeController:t,itemController:r,stateController:n}),this.initLayoutController(),this.initEventController(),this.initGroups(),this.initPlugins()},t.prototype.initGroups=function(){var e=this.get("canvas");if(e){var t=(e.get("el")||{}).id,r=void 0===t?"g6":t,n=e.addGroup({id:"".concat(r,"-root"),className:c.default.rootContainerClassName});if(this.get("groupByTypes")){var o=n.addGroup({id:"".concat(r,"-edge"),className:c.default.edgeContainerClassName}),i=n.addGroup({id:"".concat(r,"-node"),className:c.default.nodeContainerClassName}),a=n.addGroup({id:"".concat(r,"-combo"),className:c.default.comboContainerClassName});a.toBack(),this.set({nodeGroup:i,edgeGroup:o,comboGroup:a})}var s=n.addGroup({id:"".concat(r,"-delegate"),className:c.default.delegateContainerClassName});this.set({delegateGroup:s}),this.set("group",n)}},t.prototype.getDefaultCfg=function(){return{container:void 0,width:void 0,height:void 0,renderer:"canvas",modes:{},plugins:[],data:{},fitViewPadding:10,minZoom:.02,maxZoom:10,event:!0,groupByTypes:!0,directed:!1,autoPaint:!0,nodes:[],edges:[],combos:[],vedges:[],itemMap:{},linkCenter:!1,defaultNode:{},defaultEdge:{},nodeStateStyles:{},edgeStateStyles:{},states:{},animate:!1,animateCfg:{onFrame:void 0,duration:500,easing:"easeLinear"},callback:void 0,enabledStack:!1,maxStep:10,tooltips:[],optimizeThreshold:1e3}},t.prototype.set=function(e,t){return(0,a.isPlainObject)(e)?this.cfg=(0,n.__assign)((0,n.__assign)({},this.cfg),e):this.cfg[e]=t,"enabledStack"!==e||!t||this.undoStack||this.redoStack||(this.undoStack=new s.Stack(this.cfg.maxStep),this.redoStack=new s.Stack(this.cfg.maxStep)),this},t.prototype.get=function(e){var t;return null===(t=this.cfg)||void 0===t?void 0:t[e]},t.prototype.getGroup=function(){return this.get("group")},t.prototype.getContainer=function(){return this.get("container")},t.prototype.getMinZoom=function(){return this.get("minZoom")},t.prototype.setMinZoom=function(e){return this.set("minZoom",e)},t.prototype.getMaxZoom=function(){return this.get("maxZoom")},t.prototype.setMaxZoom=function(e){return this.set("maxZoom",e)},t.prototype.getWidth=function(){return this.get("width")},t.prototype.getHeight=function(){return this.get("height")},t.prototype.clearItemStates=function(e,t){(0,a.isString)(e)&&(e=this.findById(e));var r=this.get("itemController");t||(t=e.get("states")),r.clearItemStates(e,t),this.get("stateController").updateStates(e,t,!1)},t.prototype.node=function(e){"function"==typeof e&&this.set("nodeMapper",e)},t.prototype.edge=function(e){"function"==typeof e&&this.set("edgeMapper",e)},t.prototype.combo=function(e){"function"==typeof e&&this.set("comboMapper",e)},t.prototype.findById=function(e){return this.get("itemMap")[e]},t.prototype.find=function(e,t){var r,n=this.get("".concat(e,"s"));return(0,a.each)(n,function(e,n){if(t(e,n))return r=e}),r},t.prototype.findAll=function(e,t){var r=[];return(0,a.each)(this.get("".concat(e,"s")),function(e,n){t(e,n)&&r.push(e)}),r},t.prototype.findAllByState=function(e,t,r){return r?this.findAll(e,function(e){return e.hasState(t)&&r(e)}):this.findAll(e,function(e){return e.hasState(t)})},t.prototype.translate=function(e,t,r,n){var o=this,i=this.get("group"),s=(0,a.clone)(i.getMatrix());if(s||(s=[1,0,0,0,1,0,0,0,1]),r){var l=(0,h.getAnimateCfgWithCallback)({animateCfg:n,callback:function(){return o.emit("viewportchange",{action:"translate",matrix:i.getMatrix()})}});(0,u.move)(i,{x:i.getCanvasBBox().x+e,y:i.getCanvasBBox().y+t},r,l||{duration:500,easing:"easeCubic"})}else s=y(s,[["t",e,t]]),i.setMatrix(s),this.emit("viewportchange",{action:"translate",matrix:s}),this.autoPaint()},t.prototype.moveTo=function(e,t,r,n){var o=this.get("group");(0,u.move)(o,{x:e,y:t},r,n||{duration:500,easing:"easeCubic"}),this.emit("viewportchange",{action:"move",matrix:o.getMatrix()})},t.prototype.fitView=function(e,t,r,n){e&&this.set("fitViewPadding",e);var o=this.get("viewController");t?o.fitViewByRules(t,r,n):o.fitView(r,n),this.autoPaint()},t.prototype.fitCenter=function(e,t){this.get("viewController").fitCenter(e,t),this.autoPaint()},t.prototype.addBehaviors=function(e,t){return this.get("modeController").manipulateBehaviors(e,t,!0),this},t.prototype.removeBehaviors=function(e,t){return this.get("modeController").manipulateBehaviors(e,t,!1),this},t.prototype.updateBehavior=function(e,t,r){return this.get("modeController").updateBehavior(e,t,r),this},t.prototype.zoom=function(e,t,r,n){var o=this,i=this.get("group"),s=(0,a.clone)(i.getMatrix())||[1,0,0,0,1,0,0,0,1],l=this.get("minZoom"),c=this.get("maxZoom"),f=this.getZoom()||1,p=f*e,d=e,v=!1;if(l&&p<l?(d=l/f,v=!0):c&&p>c&&(d=c/f,v=!0),s=y(s,t?[["t",-t.x,-t.y],["s",d,d],["t",t.x,t.y]]:[["s",d,d]]),r){var g=(0,a.clone)(i.getMatrix());g||(g=[1,0,0,0,1,0,0,0,1]);var m=g[0],b=m*d,w=(0,h.getAnimateCfgWithCallback)({animateCfg:n,callback:function(){return o.emit("viewportchange",{action:"zoom",matrix:i.getMatrix()})}});i.animate(function(e){if(1===e)g=s;else{var r=(0,u.lerp)(m,b,e)/g[0];g=y(g,t?[["t",-t.x,-t.y],["s",r,r],["t",t.x,t.y]]:[["s",r,r]])}return{matrix:g}},w)}else i.setMatrix(s),this.emit("viewportchange",{action:"zoom",matrix:s}),this.autoPaint();return!v},t.prototype.zoomTo=function(e,t,r,n){var o=e/this.getZoom();return this.zoom(o,t,r,n)},t.prototype.focusItem=function(e,t,r){var n=this.get("viewController"),o=!1;t?o=!0:void 0===t&&(o=this.get("animate"));var i={};r?i=r:void 0===r&&(i=this.get("animateCfg")),n.focus(e,o,i),this.autoPaint()},t.prototype.focusItems=function(e,t,r,n){this.get("viewController").focusItems(e,t,r,n)},t.prototype.autoPaint=function(){this.get("autoPaint")&&this.paint()},t.prototype.paint=function(){this.emit("beforepaint"),this.get("canvas").draw(),this.emit("afterpaint")},t.prototype.getPointByClient=function(e,t){return this.get("viewController").getPointByClient(e,t)},t.prototype.getClientByPoint=function(e,t){return this.get("viewController").getClientByPoint(e,t)},t.prototype.getPointByCanvas=function(e,t){return this.get("viewController").getPointByCanvas(e,t)},t.prototype.getCanvasByPoint=function(e,t){return this.get("viewController").getCanvasByPoint(e,t)},t.prototype.getGraphCenterPoint=function(){var e=this.get("group").getCanvasBBox();return{x:(e.minX+e.maxX)/2,y:(e.minY+e.maxY)/2}},t.prototype.getViewPortCenterPoint=function(){return this.getPointByCanvas(this.get("width")/2,this.get("height")/2)},t.prototype.showItem=function(e,t){void 0===t&&(t=!0);var r=this.get("itemController").changeItemVisibility(e,!0);if(t&&this.get("enabledStack")){var n=r.getID(),o={},i={};switch(r.getType()){case"node":o.nodes=[{id:n,visible:!1}],i.nodes=[{id:n,visible:!0}];break;case"edge":o.nodes=[{id:n,visible:!1}],i.edges=[{id:n,visible:!0}];break;case"combo":o.nodes=[{id:n,visible:!1}],i.combos=[{id:n,visible:!0}]}this.pushStack("visible",{before:o,after:i})}},t.prototype.hideItem=function(e,t){void 0===t&&(t=!0);var r=this.get("itemController").changeItemVisibility(e,!1);if(t&&this.get("enabledStack")){var n=r.getID(),o={},i={};switch(r.getType()){case"node":o.nodes=[{id:n,visible:!0}],i.nodes=[{id:n,visible:!1}];break;case"edge":o.nodes=[{id:n,visible:!0}],i.edges=[{id:n,visible:!1}];break;case"combo":o.nodes=[{id:n,visible:!0}],i.combos=[{id:n,visible:!1}]}this.pushStack("visible",{before:o,after:i})}},t.prototype.refreshItem=function(e){this.get("itemController").refreshItem(e)},t.prototype.setAutoPaint=function(e){this.set("autoPaint",e),this.get("canvas").set("autoDraw",e)},t.prototype.remove=function(e,t){void 0===t&&(t=!0),this.removeItem(e,t)},t.prototype.removeItem=function(e,t){void 0===t&&(t=!0);var r=e;if((0,a.isString)(e)&&(r=this.findById(e)),!r&&(0,a.isString)(e))console.warn("The item ".concat(e," to be removed does not exist!"));else if(r){var o="";if(r.getType&&(o=r.getType()),t&&this.get("enabledStack")){var i=(0,n.__assign)((0,n.__assign)({},r.getModel()),{itemType:o}),s={};switch(o){case"node":s.nodes=[i],s.edges=[];for(var u=r.getEdges(),l=u.length-1;l>=0;l--)s.edges.push((0,n.__assign)((0,n.__assign)({},u[l].getModel()),{itemType:"edge"}));break;case"edge":s.edges=[i];break;case"combo":s.combos=[i]}this.pushStack("delete",{before:s,after:{}})}if("node"===o)r.getModel().comboId&&this.updateComboTree(r,void 0,!1);if(this.get("itemController").removeItem(r),"combo"===o){var c=(0,h.reconstructTree)(this.get("comboTrees"));this.set("comboTrees",c)}}},t.prototype.innerAddItem=function(e,t,r){if(!(0,l.singleDataValidation)(e,t))return!1;if(!t.id||!this.findById(t.id)){var o,i=this.get("comboTrees")||[];if("combo"===e){var s=this.get("itemMap"),u=!1;if(i.forEach(function(i){u||(0,h.traverseTreeUp)(i,function(i){if(t.parentId===i.id){u=!0;var a=(0,n.__assign)({id:t.id,depth:i.depth+2},t);i.children?i.children.push(a):i.children=[a],t.depth=a.depth,o=r.addItem(e,t)}var l=s[i.id];return u&&l&&l.getType&&"combo"===l.getType()&&r.updateCombo(l,i.children),!0})}),!u){var c=(0,n.__assign)({id:t.id,depth:0},t);t.depth=c.depth,i.push(c),o=r.addItem(e,t)}this.set("comboTrees",i),t.collapsed&&(this.collapseCombo(o,!1),this.updateCombo(o))}else if("node"===e&&(0,a.isString)(t.comboId)&&i){var f;(f=this.findById(t.comboId))&&f.getType&&"combo"!==f.getType()&&console.warn("'".concat(t.comboId,"' is not a id of a combo in the graph, the node will be added without combo.")),o=r.addItem(e,t);var p=this.get("itemMap"),d=!1,y=!1;i.forEach(function(e){y||d||(0,h.traverseTreeUp)(e,function(e){if(e.id===t.id)return y=!0,!1;if(t.comboId===e.id&&!y){d=!0;var n=(0,a.clone)(t);n.itemType="node",e.children?e.children.push(n):e.children=[n],n.depth=e.depth+1}return d&&p[e.id].getType&&"combo"===p[e.id].getType()&&r.updateCombo(p[e.id],e.children),!0})})}else o=r.addItem(e,t);if("node"===e&&t.comboId||"combo"===e&&t.parentId)(f=this.findById(t.comboId||t.parentId))&&f.getType&&"combo"===f.getType()&&f.addChild(o);return o}console.warn("This item exists already. Be sure the id %c".concat(t.id,"%c is unique."),"font-size: 20px; color: red;","")},t.prototype.addItem=function(e,t,r,o){void 0===r&&(r=!0),void 0===o&&(o=!0);var i=this.get("comboSorted");this.set("comboSorted",i&&!o);var a=this.get("itemController"),s=this.innerAddItem(e,t,a);if(!1===s||!0===s)return s;var u=this.get("combos");if(u&&u.length>0&&this.sortCombos(),this.autoPaint(),r&&this.get("enabledStack")){var l=(0,n.__assign)((0,n.__assign)({},s.getModel()),{itemType:e}),c={};switch(e){case"node":c.nodes=[l];break;case"edge":c.edges=[l];break;case"combo":c.combos=[l]}this.pushStack("add",{before:{},after:c})}return s},t.prototype.addItems=function(e,t,r){void 0===e&&(e=[]),void 0===t&&(t=!0),void 0===r&&(r=!0);var o=this.get("comboSorted");this.set("comboSorted",o&&!r);for(var i=this.get("itemController"),a=[],s=0;s<e.length;s++){"edge"!==(u=e[s]).type&&"vedge"!==u.type?a.push(this.innerAddItem(u.type,u.model,i)):a.push(void 0)}for(s=0;s<e.length;s++){var u;"edge"!==(u=e[s]).type&&"vedge"!==u.type||(a[s]=this.innerAddItem(u.type,u.model,i))}if(r){var l=this.get("combos");l&&l.length>0&&this.sortCombos()}if(this.autoPaint(),t&&this.get("enabledStack")){var c={nodes:[],edges:[],combos:[]};for(s=0;s<e.length;s++){var f=e[s].type,h=a[s];if(h&&!0!==h){var p=(0,n.__assign)((0,n.__assign)({},h.getModel()),{itemType:f});switch(f){case"node":c.nodes.push(p);break;case"edge":c.edges.push(p);break;case"combo":c.combos.push(p)}}}this.pushStack("addItems",{before:{},after:c})}return a},t.prototype.add=function(e,t,r,n){return void 0===r&&(r=!0),void 0===n&&(n=!0),this.addItem(e,t,r,n)},t.prototype.updateItem=function(e,t,r){var o=this;void 0===r&&(r=!0);var i,s=this.get("itemController");i=(0,a.isString)(e)?this.findById(e):e;var u,l=r&&this.get("enabledStack");l&&(u=(0,a.clone)(i.getModel()));var c="";i.getType&&(c=i.getType());var f=(0,n.__spreadArray)([],i.getStates(),!0);if("combo"===c&&(0,a.each)(f,function(e){return o.setItemState(i,e,!1)}),s.updateItem(i,t),"combo"===c&&(0,a.each)(f,function(e){return o.setItemState(i,e,!0)}),l){var h={nodes:[],edges:[],combos:[]},p={nodes:[],edges:[],combos:[]},d=(0,n.__assign)({id:u.id},t);switch(c){case"node":h.nodes.push(u),p.nodes.push(d);break;case"edge":h.edges.push(u),p.edges.push(d);break;case"combo":h.combos.push(u),p.combos.push(d)}this.pushStack("update",{before:h,after:p})}},t.prototype.update=function(e,t,r){void 0===r&&(r=!0),this.updateItem(e,t,r)},t.prototype.setItemState=function(e,t,r){(0,a.isString)(e)&&(e=this.findById(e)),this.get("itemController").setItemState(e,t,r),this.get("stateController").updateState(e,t,r)},t.prototype.priorityState=function(e,t){this.get("itemController").priorityState(e,t)},t.prototype.data=function(e){(0,l.dataValidation)(e),this.set("data",e)},t.prototype.render=function(){var e=this;this.set("comboSorted",!1);var t=this.get("data");if(this.get("enabledStack")&&this.clearStack(),!t)throw new Error("data must be defined first");var r=t.nodes,n=void 0===r?[]:r,o=t.edges,i=void 0===o?[]:o,a=t.combos,s=void 0===a?[]:a;if(this.clear(!0),this.emit("beforerender"),e.addItems(n.map(function(e){return{type:"node",model:e}}),!1,!1),0!==(null===s||void 0===s?void 0:s.length)){var u=(0,h.plainCombosToTrees)(s,n);this.set("comboTrees",u),e.addCombos(s)}e.addItems(i.map(function(e){return{type:"edge",model:e}}),!1,!1);var l=e.get("animate");(e.get("fitView")||e.get("fitCenter"))&&e.set("animate",!1);var c=e.get("layoutController");if(c){if(c.layout(f),this.destroyed)return}else f();function f(){(e.get("comboTrees")||[]).forEach(function(t){(0,h.traverseTreeUp)(t,function(t){var r=e.findById(t.id);return"combo"===r.getType()&&t.collapsed&&(e.collapseCombo(t.id,!1),e.updateCombo(r)),!0})}),e.get("fitView")?e.fitView():e.get("fitCenter")&&e.fitCenter(),e.autoPaint(),e.emit("afterrender"),(e.get("fitView")||e.get("fitCenter"))&&e.set("animate",l),setTimeout(function(){var t;null===(t=e.getCombos())||void 0===t||t.forEach(function(e){e.set("animate",!0)})},0)}this.get("groupByTypes")||(s&&0!==s.length?this.sortCombos():t.nodes&&t.edges&&t.nodes.length<t.edges.length?this.getNodes().forEach(function(e){e.toFront()}):this.getEdges().forEach(function(e){e.toBack()}))},t.prototype.read=function(e){this.data(e),this.render()},t.prototype.diffItems=function(e,t,r){var n,o=this,i=this.get("itemMap");(0,a.each)(r,function(r){if(n=i[r.id]){if(o.get("animate")&&"node"===e){var a=n.getContainer().getMatrix();a||(a=[1,0,0,0,1,0,0,0,1]),n.set("originAttrs",{x:a[6],y:a[7]})}o.updateItem(n,r,!1)}else n=o.addItem(e,r,!1);n&&t["".concat(e,"s")].push(n)})},t.prototype.changeData=function(e,t){var r,n=this;void 0===t&&(t=!0);var o=this,i=e||o.get("data");if(!(0,l.dataValidation)(i))return this;this.emit("beforechangedata"),t&&this.get("enabledStack")&&this.pushStack("changedata",{before:o.save(),after:i}),this.set("comboSorted",!1),this.removeHulls(),this.getNodes().map(function(e){return o.clearItemStates(e)}),this.getEdges().map(function(e){return o.clearItemStates(e)});var s=this.get("canvas"),u=s.get("localRefresh");s.set("localRefresh",!1),o.get("data")||(o.data(i),o.render());var c=this.get("itemMap"),f={nodes:[],edges:[]},p=i.combos;if(p){var d=(0,h.plainCombosToTrees)(p,i.nodes);this.set("comboTrees",d)}else this.set("comboTrees",[]);this.diffItems("node",f,i.nodes),(0,a.each)(c,function(e,t){c[t].getModel().depth=0,e.getType&&"edge"===e.getType()||(e.getType&&"combo"===e.getType()?(delete c[t],e.destroy()):f.nodes.indexOf(e)<0&&(delete c[t],o.remove(e,!1)))});for(var y=this.getCombos(),v=y.length-1;v>=0;v--)y[v].destroyed&&y.splice(v,1);p&&(o.addCombos(p),this.get("groupByTypes")||this.sortCombos()),this.diffItems("edge",f,i.edges),(0,a.each)(c,function(e,t){(!e.getType||"node"!==e.getType()&&"combo"!==e.getType())&&f.edges.indexOf(e)<0&&(delete c[t],o.remove(e,!1))}),(this.get("comboTrees")||[]).forEach(function(e){(0,h.traverseTreeUp)(e,function(e){return"combo"===n.findById(e.id).getType()&&e.collapsed&&n.collapseCombo(e.id,!1),!0})}),this.set({nodes:f.nodes,edges:f.edges});var g=(this.get("layout")||{}).relayoutAtChangeData,m=void 0===g||g,b=this.get("layoutController");return m&&b&&(b.changeData(function(){setTimeout(function(){var e;null===(e=o.getCombos())||void 0===e||e.forEach(function(e){e.set("animate",!0)})},0)}),o.get("animate")&&!b.getLayoutType()?(o.positionsAnimate(),null===(r=o.getCombos())||void 0===r||r.forEach(function(e){return e.set("animate",!0)})):o.autoPaint()),setTimeout(function(){s.set("localRefresh",u)},16),this.set("data",i),this.emit("afterchangedata"),this},t.prototype.addCombos=function(e){var t=this.get("comboTrees");this.get("itemController").addCombos(t,e)},t.prototype.createCombo=function(e,t,r){var n=this;void 0===r&&(r=!0);var o=this.get("itemController");this.set("comboSorted",!1);var i,s="";if(e){if((0,a.isString)(e))s=e,i={id:e};else{if(!(s=e.id))return void console.warn("Create combo failed. Please assign a unique string id for the adding combo.");i=e}var u=r&&this.get("enabledStack"),l={nodes:[],combos:[]};u&&t.forEach(function(e){var t=n.findById(e),r=t.getType();if("node"===r||"combo"===r){var o=t.getModel();l["".concat(r,"s")].push({id:e,parentId:"node"===r?o.comboId:o.parentId})}});var c=this.get("comboTrees"),f=new Set(t),p=new Map;c&&(c.forEach(function(e){(0,h.traverseTreeUp)(e,function(e,t,r){if(f.has(e.id)){if(t){var i=n.findById(t.id),a=n.findById(e.id);t.children.splice(r,1),i.removeChild(a),o.updateCombo(i,t.children)}"combo"===e.itemType&&p.set(e.id,e)}return!0})}),c=c.filter(function(e){return!f.has(e.id)}),this.set("comboTrees",c));var d={nodes:[],combos:[]},y=t.map(function(e){var t=n.findById(e),r=t.getModel(),o="";t.getType&&(o=t.getType());var i=p.get(e)||{id:t.getID(),itemType:o};return"combo"===o?(i.parentId=s,r.parentId=s):"node"===o&&(i.comboId=s,r.comboId=s),u&&d["".concat(o,"s")].push({id:r.id,parentId:s}),i});i.children=y,this.addItem("combo",i,!1),this.set("comboSorted",!1),c&&(c.forEach(function(e){(0,h.traverseTree)(e,function(e){return e.id!==s||(e.itemType="combo",e.children=y,!1)})}),this.sortCombos()),u&&(d.combos.push(i),this.pushStack("createCombo",{before:l,after:d}));var v=this.findById(s);!v.getModel().parentId&&v.getChildren().combos.length&&this.updateComboTree(v,void 0,!1),setTimeout(function(){v.set("animate",!0)},0)}},t.prototype.uncombo=function(e,t){var r,n,o=this;void 0===t&&(t=!0);var i=e;if((0,a.isString)(e)&&(i=this.findById(e)),!i||i.getType&&"combo"!==i.getType())console.warn("The item is not a combo!");else{var s=i.getModel(),u=i.getModel().parentId,l=this.get("comboTrees");l||(l=[]);var c,f=this.get("itemMap"),p=i.get("id"),d=[],y=this.get("combos"),v=this.findById(u),g=t&&this.get("enabledStack"),m={};if(g&&((m=(0,a.clone)(s)).children=[]),l.forEach(function(e){c||(0,h.traverseTreeUp)(e,function(e){var t;if(e.id===p){c=e,i.getEdges().map(function(e){return e.getID()}).forEach(function(e){o.removeItem(e,!1)});var r=y.indexOf(i);y.splice(r,1),delete f[p];var n=(0,a.clone)(i.getModel());i.destroy(),o.emit("afterremoveitem",{item:n,type:"combo"})}return!u||!c||e.id!==u||(v.removeCombo(i),-1!==(r=(d=e.children).indexOf(c))&&d.splice(r,1),null===(t=c.children)||void 0===t||t.forEach(function(e){var t=o.findById(e.id),r=t.getModel();t.getType&&"combo"===t.getType()?(e.parentId=u,delete e.comboId,r.parentId=u,delete r.comboId):t.getType&&"node"===t.getType()&&(e.comboId=u,r.comboId=u),v.addChild(t),d.push(e)}),o.updateCombo(v),!1)})}),!u&&c){var b=l.indexOf(c);l.splice(b,1),null===(r=c.children)||void 0===r||r.forEach(function(e){e.parentId=void 0;var t=o.findById(e.id).getModel();delete t.parentId,delete t.comboId,"node"!==e.itemType&&l.push(e)})}if(g){var w={nodes:[],combos:[]},_={nodes:[],combos:[]};null===(n=c.children)||void 0===n||n.forEach(function(e){var t=o.findById(e.id).getType();"node"!==t&&"combo"!==t||(w["".concat(t,"s")].push({id:e.id,parentId:p}),_["".concat(t,"s")].push({id:e.id,parentId:u}))}),w.combos.push(m),this.pushStack("uncombo",{before:w,after:_})}}},t.prototype.updateCombos=function(e){var t=this;void 0===e&&(e=!1);var r=this.get("comboTrees"),o=this.get("itemController"),i=this.get("itemMap");(r||[]).forEach(function(r){(0,h.traverseTreeUp)(r,function(r){var s;if(!r)return!0;var u=i[r.id];if("combo"===(null===(s=null===u||void 0===u?void 0:u.getType)||void 0===s?void 0:s.call(u))){var l=(0,n.__spreadArray)([],u.getStates(),!0);(0,a.each)(l,function(e){return t.setItemState(u,e,!1)}),o.updateCombo(u,r.children,e),(0,a.each)(l,function(e){return t.setItemState(u,e,!0)})}return!0})}),this.sortCombos()},t.prototype.updateCombo=function(e){var t,r=this,o=e;if((0,a.isString)(e)&&(o=this.findById(e)),!o||o.getType&&"combo"!==o.getType())console.warn("The item to be updated is not a combo!");else{t=o.get("id");var i=this.get("comboTrees"),s=this.get("itemController"),u=this.get("itemMap");(i||[]).forEach(function(e){(0,h.traverseTreeUp)(e,function(e){if(!e)return!0;var o=u[e.id];if(t===e.id&&o&&o.getType&&"combo"===o.getType()){var i=(0,n.__spreadArray)([],o.getStates(),!0);(0,a.each)(i,function(e){o.getStateStyle(e)&&r.setItemState(o,e,!1)}),s.updateCombo(o,e.children),(0,a.each)(i,function(e){o.getStateStyle(e)&&r.setItemState(o,e,!0)}),t&&(t=e.parentId)}return!0})})}},t.prototype.updateComboTree=function(e,t,r){void 0===r&&(r=!0);var n;this.set("comboSorted",!1);var o,i=(n=(0,a.isString)(e)?this.findById(e):e).getModel(),s=i.comboId||i.parentId,u="";if(n.getType&&(u=n.getType()),t&&"combo"===u){var l,c=!0;if((this.get("comboTrees")||[]).forEach(function(e){l||(0,h.traverseTree)(e,function(e){if(!l)return e.id===n.getID()&&(l=e),!0})}),(0,h.traverseTree)(l,function(e){return e.id!==t||(c=!1,!1)}),!c)return void console.warn("Failed to update the combo tree! The parentId points to a descendant of the combo!")}if(r&&this.get("enabledStack")){var f={},p={};"combo"===u?(f.combos=[{id:i.id,parentId:i.parentId}],p.combos=[{id:i.id,parentId:t}]):"node"===u&&(f.nodes=[{id:i.id,parentId:i.comboId}],p.nodes=[{id:i.id,parentId:t}]),this.pushStack("updateComboTree",{before:f,after:p})}if(i.parentId||i.comboId){var d=this.findById(i.parentId||i.comboId);d&&d.removeChild(n)}("combo"===u?i.parentId=t:"node"===u&&(i.comboId=t),t)&&((o=this.findById(t))&&o.addChild(n));s&&((o=this.findById(s))&&o.removeChild(n));var y=(0,h.reconstructTree)(this.get("comboTrees"),i.id,t);this.set("comboTrees",y),this.updateCombos()},t.prototype.save=function(){var e=[],t=[],r=[];return(0,a.each)(this.get("nodes"),function(t){e.push(t.getModel())}),(0,a.each)(this.get("edges"),function(e){t.push(e.getModel())}),(0,a.each)(this.get("combos"),function(e){r.push(e.getModel())}),{nodes:e,edges:t,combos:r}},t.prototype.changeSize=function(e,t){return this.get("viewController").changeSize(e,t),this},t.prototype.refresh=function(){if(this.emit("beforegraphrefresh"),this.get("animate"))this.positionsAnimate();else{var e=this.get("nodes"),t=this.get("edges"),r=this.get("edges");(0,a.each)(e,function(e){e.refresh()}),(0,a.each)(t,function(e){e.refresh()}),(0,a.each)(r,function(e){e.refresh()})}this.emit("aftergraphrefresh"),this.autoPaint()},t.prototype.getNodes=function(){return this.get("nodes")},t.prototype.getEdges=function(){return this.get("edges")},t.prototype.getCombos=function(){return this.get("combos")},t.prototype.getComboChildren=function(e){if((0,a.isString)(e)&&(e=this.findById(e)),e&&(!e.getType||"combo"===e.getType()))return e.getChildren();console.warn("The combo does not exist!")},t.prototype.positionsAnimate=function(e){var t=this;t.emit("beforeanimate");var r=t.get("animateCfg"),n=r.onFrame,o=e?t.getNodes().concat(t.getCombos()):t.getNodes(),i=o.map(function(e){var t=e.getModel();return{id:t.id,x:t.x,y:t.y}});t.stopAnimate();var s=t.get("canvas");t.animating=!0,setTimeout(function(){s.animate(function(r){(0,a.each)(i,function(e){var o=t.findById(e.id);if(o&&!o.destroyed){var i=o.get("originAttrs"),a=o.get("model"),s=o.getContainer().getMatrix();if(void 0!==i&&null!==i||(s&&(i={x:s[6],y:s[7]}),o.set("originAttrs",i||0)),n){var u=n(o,r,e,i||{x:0,y:0});o.set("model",Object.assign(a,u))}else i?(a.x=i.x+(e.x-i.x)*r,a.y=i.y+(e.y-i.y)*r):(a.x=e.x,a.y=e.y)}}),t.refreshPositions(e)},{duration:r.duration,easing:r.easing,callback:function(){(0,a.each)(o,function(e){e.set("originAttrs",null)}),r.callback&&r.callback(),t.emit("afteranimate"),t.animating=!1}})},0)},t.prototype.refreshPositions=function(e){this.emit("beforegraphrefreshposition");var t,r=this.get("nodes"),n=this.get("edges"),o=this.get("vedges"),i=this.get("combos"),s={},u=function(e){(0,a.each)(e,function(e){t=e.getModel();var r=e.get("originAttrs");if(!r||t.x!==r.x||t.y!==r.y){var n=e.updatePosition({x:t.x,y:t.y});s[t.id]=n,t.comboId&&(s[t.comboId]=s[t.comboId]||n),t.parentId&&(s[t.parentId]=s[t.parentId]||n)}})};u(i),u(r),i&&0!==i.length&&(e?(u(i),this.updateCombos()):this.updateCombos()),(0,a.each)(n,function(e){var t=e.getSource().getModel(),r=e.getTarget();if(!(0,a.isPlainObject)(r)){var n=r.getModel();(s[t.id]||s[n.id]||e.getModel().isComboEdge)&&e.refresh()}}),(0,a.each)(o,function(e){e.refresh()}),this.emit("aftergraphrefreshposition"),this.autoPaint()},t.prototype.stopAnimate=function(){var e=this.get("canvas").cfg.timeline;e&&e.stopAllAnimations()},t.prototype.isAnimating=function(){return this.animating},t.prototype.getZoom=function(){var e=this.get("group").getMatrix();return e?e[0]:1},t.prototype.getCurrentMode=function(){return this.get("modeController").getMode()},t.prototype.setMode=function(e){return this.get("modeController").setMode(e),this},t.prototype.clear=function(e){var t;return void 0===e&&(e=!1),null===(t=this.get("canvas"))||void 0===t||t.clear(),this.initGroups(),this.set({itemMap:{},nodes:[],edges:[],vedges:[],groups:[],combos:[],comboTrees:[]}),e||this.emit("afterrender"),this},t.prototype.updateLayout=function(e,t,r,o){var i=this;void 0===e&&(e={}),void 0===o&&(o=!0);var s=this.get("layoutController");if((0,a.isString)(e)&&(e={type:e}),t){var u=r;u||(u="begin"===t?{x:0,y:0}:{x:this.getWidth()/2,y:this.getHeight()/2}),u=this.getPointByCanvas(u.x,u.y);var l=["force","gForce","fruchterman","force2"];l.includes(e.type)||!e.type&&l.includes(null===s||void 0===s?void 0:s.layoutType)?e.center=[u.x,u.y]:this.once("afterlayout",function(e){var r=i.getGroup().getMatrix()||[1,0,0,0,1,0,0,0,1];u.x=u.x*r[0]+r[6],u.y=u.y*r[0]+r[7];var n=i.getGroup().getCanvasBBox(),o=n.minX,a=n.maxX,s=n.minY,l={x:(o+a)/2,y:(s+n.maxY)/2};"begin"===t&&(l.x=o,l.y=s),i.translate(u.x-l.x,u.y-l.y)})}var c=(0,n.__assign)({},this.get("layout")),f={};Object.assign(f,c,e),e.pipes&&!e.type?delete f.type:!e.pipes&&f.type&&delete f.pipes,this.set("layout",f),s&&(s.isLayoutTypeSame(f)&&f.gpuEnabled===c.gpuEnabled?s.updateLayoutCfg(f):s.changeLayout(f),o&&this.get("enabledStack")&&this.pushStack("layout",{before:c,after:f}))},t.prototype.destroyLayout=function(){var e=this.get("layoutController");null===e||void 0===e||e.destroyLayout()},t.prototype.layout=function(){var e,t=this.get("layoutController"),r=this.get("layout");r&&t&&(r.workerEnabled?t.layout():(null===(e=t.layoutMethods)||void 0===e?void 0:e.length)?t.relayout(!0):t.layout())},t.prototype.collapseCombo=function(e,t){var r=this;if(void 0===t&&(t=!0),!this.destroyed)if((0,a.isString)(e)&&(e=this.findById(e)),e){this.emit("beforecollapseexpandcombo",{action:"collapse",item:e});var n=e.getModel();this.get("itemController").collapseCombo(e,t),n.collapsed=!0;var o=this.getEdges().concat(this.get("vedges")),i=[],s=!1;(this.get("comboTrees")||[]).forEach(function(e){s||(0,h.traverseTree)(e,function(e){if(s&&e.depth<=n.depth)return!1;if(n.id===e.id&&(s=!0),s){var t=r.findById(e.id);t&&t.getType&&"combo"===t.getType()&&(i=(i=i.concat(t.getNodes())).concat(t.getCombos()))}return!0})});var u={};o.forEach(function(e){var t=e.getModel(),o=t.isVEdge,a=t.size,s=void 0===a?1:a;if(!e.isVisible()||o){var l,c=e.getSource(),f=e.getTarget(),h=null;if(c.getModel().id===n.id||i.includes(c)&&!i.includes(f)?(h=f,l=!1):(f.getModel().id===n.id||!i.includes(c)&&i.includes(f))&&(h=c,l=!0),h){if(o)return void r.removeItem(e,!1);for(var p=h.getModel();!h.isVisible();){var d=p.parentId,y=p.comboId,v=d||y;if(!(h=r.findById(v))||!v)return;p=h.getModel()}var g=p.id,m=l?{source:g,target:n.id,size:s,isVEdge:!0}:{source:n.id,target:g,size:s,isVEdge:!0},b="".concat(m.source,"-").concat(m.target);if(u[b])return void(u[b].size+=s);u[b]=m}}}),this.addItems(Object.values(u).map(function(e){return{type:"vedge",model:e}}),!1),this.emit("aftercollapseexpandcombo",{action:"collapse",item:e})}else console.warn("The combo to be collapsed does not exist!")},t.prototype.expandCombo=function(e,t){var r=this;if(void 0===t&&(t=!0),(0,a.isString)(e)&&(e=this.findById(e)),!e||e.getType&&"combo"!==e.getType())console.warn("The combo to be collapsed does not exist!");else{this.emit("beforecollapseexpandcombo",{action:"expand",item:e});var n=e.getModel();this.get("itemController").expandCombo(e,t),n.collapsed=!1;var o=this.getEdges().concat(this.get("vedges")),i=[],s=!1;(this.get("comboTrees")||[]).forEach(function(e){s||(0,h.traverseTree)(e,function(e){if(s&&e.depth<=n.depth)return!1;if(n.id===e.id&&(s=!0),s){var t=r.findById(e.id);t&&t.getType&&"combo"===t.getType()&&(i=(i=i.concat(t.getNodes())).concat(t.getCombos()))}return!0})});var u={};o.forEach(function(e){if(!e.isVisible()||e.getModel().isVEdge){var t,o=e.getSource(),a=e.getTarget(),s=o.get("id"),l=a.get("id"),c=null;if(s===n.id||i.includes(o)&&!i.includes(a)?(c=a,t=!1):l===n.id||!i.includes(o)&&i.includes(a)?(c=o,t=!0):i.includes(o)&&i.includes(a)&&o.isVisible()&&a.isVisible()&&e.show(),c){var f=e.getModel(),h=f.isVEdge,p=f.size,d=void 0===p?1:p;if(h)return void r.removeItem(e,!1);for(var y=c.getModel();!c.isVisible();){var v=y.parentId,g=y.comboId,m=v||g;if(!(c=r.findById(m))||!m)return;y=c.getModel()}for(var b=y.id,w=t?a:o,_=w.getModel();!w.isVisible();){var x=_.parentId,S=_.comboId,O=x||S;if(!(w=r.findById(O))||!O)return;if(_.comboId===n.id||_.parentId===n.id)break;_=w.getModel()}var P=_.id;if(b){var E=t?{source:b,target:P,isVEdge:!0,size:d}:{source:P,target:b,isVEdge:!0,size:d},k="".concat(E.source,"-").concat(E.target);if(u[k])return void(u[k].size+=d);u[k]=E}}}}),this.addItems(Object.values(u).map(function(e){return{type:"vedge",model:e}}),!1),this.emit("aftercollapseexpandcombo",{action:"expand",item:e})}},t.prototype.collapseExpandCombo=function(e,t){if(void 0===t&&(t=!0),(0,a.isString)(e)&&(e=this.findById(e)),e&&(!e.getType||"combo"===e.getType())){for(var r=e.getModel(),n=this.findById(r.parentId);n;){var o=n.getModel();if(o.collapsed)return console.warn("Fail to expand the combo since it's ancestor combo is collapsed."),void(n=void 0);n=this.findById(o.parentId)}r.collapsed?this.expandCombo(e,t):this.collapseCombo(e,t),this.updateCombo(e)}},t.prototype.getNeighbors=function(e,t){var r=e;return(0,a.isString)(e)&&(r=this.findById(e)),r.getNeighbors(t)},t.prototype.getNodeDegree=function(e,t,r){void 0===t&&(t=void 0),void 0===r&&(r=!1);var n=e;(0,a.isString)(e)&&(n=this.findById(e));var o=this.get("degrees");o&&!r||(o=(0,s.getDegree)(this.save()),this.set("degrees",o));var i=o[n.getID()],u=0;if(!i)return 0;switch(t){case"in":u=i.inDegree;break;case"out":u=i.outDegree;break;case"all":u=i;break;default:u=i.degree}return u},t.prototype.getUndoStack=function(){return this.undoStack},t.prototype.getRedoStack=function(){return this.redoStack},t.prototype.getStackData=function(){return this.get("enabledStack")?{undoStack:this.undoStack.toArray(),redoStack:this.redoStack.toArray()}:null},t.prototype.clearStack=function(){this.get("enabledStack")&&(this.undoStack.clear(),this.redoStack.clear(),this.emit("stackchange",{undoStack:this.undoStack,redoStack:this.redoStack}))},t.prototype.pushStack=function(e,t,r){if(void 0===e&&(e="update"),void 0===r&&(r="undo"),this.get("enabledStack")){var n=t?(0,a.clone)(t):{before:{},after:(0,a.clone)(this.save())};"redo"===r?this.redoStack.push({action:e,data:n}):this.undoStack.push({action:e,data:n}),this.emit("stackchange",{action:e,stackType:r,undoStack:this.undoStack,redoStack:this.redoStack})}else console.warn("è¯·åå¯ç¨ undo & redo åè½ï¼å¨å®ä¾å Graph æ¶åéç½® enabledStack: true !")},t.prototype.getAdjMatrix=function(e,t){void 0===e&&(e=!0),void 0===t&&(t=this.get("directed"));var r=this.get("adjMatrix");return r&&e||(r=(0,s.getAdjMatrix)(this.save(),t),this.set("adjMatrix",r)),r},t.prototype.getShortestPathMatrix=function(e,t){void 0===e&&(e=!0),void 0===t&&(t=this.get("directed"));var r=this.get("adjMatrix"),n=this.get("shortestPathMatrix");return r&&e||(r=(0,s.getAdjMatrix)(this.save(),t),this.set("adjMatrix",r)),n&&e||(n=(0,s.floydWarshall)(this.save(),t),this.set("shortestPathMatrix",n)),n},t.prototype.on=function(t,r,n){return e.prototype.on.call(this,t,r,n)},t.prototype.destroy=function(){var e,t,r,n,o;this.emit("beforedestroy"),this.clear(),this.clearStack(),null===(e=this.get("itemController"))||void 0===e||e.destroy(),null===(t=this.get("modeController"))||void 0===t||t.destroy(),null===(r=this.get("viewController"))||void 0===r||r.destroy(),null===(n=this.get("stateController"))||void 0===n||n.destroy(),null===(o=this.get("canvas"))||void 0===o||o.destroy(),this.cfg=null,this.destroyed=!0,this.redoStack=null,this.undoStack=null,this.emit("afterdestroy")},t.prototype.createHull=function(e){if(e.members&&!(e.members.length<1)){var t=this.get("hullGroup"),r=this.get("hullMap");if(r||(r={},this.set("hullMap",r)),t&&!t.get("destroyed")||((t=this.get("group").addGroup({id:"hullGroup"})).toBack(),this.set("hullGroup",t)),r[e.id])return console.warn("Existed hull id."),r[e.id];var o=t.addGroup({id:"".concat(e.id,"-container")}),i=new p.default(this,(0,n.__assign)((0,n.__assign)({},e),{group:o}));return r[i.id]=i,i}console.warn("Create hull failed! The members is empty.")},t.prototype.getHulls=function(){return this.get("hullMap")},t.prototype.getHullById=function(e){return this.get("hullMap")[e]},t.prototype.removeHull=function(e){var t,r;r=(0,a.isString)(e)?this.getHullById(e):e,null===(t=this.get("hullMap"))||void 0===t||delete t[r.id],r.destroy()},t.prototype.removeHulls=function(){var e=this.getHulls();e&&Object.keys(e).length&&(Object.keys(e).forEach(function(t){e[t].destroy()}),this.set("hullMap",{}))},t}(o.default);t.default=v},48122:function(e,t,r){"use strict";function n(e){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0});var o={registerNode:!0,registerCombo:!0,registerEdge:!0,registerBehavior:!0,BaseGlobal:!0,AbstractGraph:!0,Shape:!0,Arrow:!0,Marker:!0,Util:!0,AbstractLayout:!0,AbstractEvent:!0,Node:!0,Edge:!0,Hull:!0,Combo:!0};Object.defineProperty(t,"AbstractEvent",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(t,"AbstractGraph",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"AbstractLayout",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(t,"Arrow",{enumerable:!0,get:function(){return s.Arrow}}),t.BaseGlobal=void 0,Object.defineProperty(t,"Combo",{enumerable:!0,get:function(){return y.default}}),Object.defineProperty(t,"Edge",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(t,"Hull",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(t,"Marker",{enumerable:!0,get:function(){return s.Marker}}),Object.defineProperty(t,"Node",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(t,"Shape",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"Util",{enumerable:!0,get:function(){return l.default}}),t.registerNode=t.registerEdge=t.registerCombo=t.registerBehavior=t.default=void 0;var i=m(r(2235)),a=m(r(67239)),s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var r=g(t);if(r&&r.has(e))return r.get(e);var o={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=i?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(o,a,s):o[a]=e[a]}o.default=e,r&&r.set(e,o);return o}(r(92100)),u=m(r(36605)),l=m(r(21712)),c=m(r(66863)),f=m(r(93894)),h=m(r(14319)),p=m(r(4779)),d=m(r(65674)),y=m(r(43059)),v=r(2782);function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(g=function(e){return e?r:t})(e)}function m(e){return e&&e.__esModule?e:{default:e}}Object.keys(v).forEach(function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(o,e)||e in t&&t[e]===v[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return v[e]}}))});var b=s.default.registerNode;t.registerNode=b;var w=s.default.registerEdge;t.registerEdge=w;var _=s.default.registerCombo;t.registerCombo=_;var x=i.default.registerBehavior;t.registerBehavior=x;var S=u.default;t.BaseGlobal=S;var O={version:u.default.version,AbstractGraph:a.default,BaseGlobal:S,Util:l.default,Shape:s.default,Node:h.default,Edge:p.default,Combo:y.default,Hull:d.default,registerNode:s.default.registerNode,registerEdge:s.default.registerEdge,registerCombo:s.default.registerCombo,registerBehavior:i.default.registerBehavior,Arrow:s.Arrow,Marker:s.Marker,AbstractLayout:c.default,AbstractEvent:f.default};t.default=O},24825:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.G6GraphEvent=void 0;var n=r(97582),o=function(e){function t(t,r){var n=e.call(this,t,r)||this;return n.item=r.item,n.canvasX=r.canvasX,n.canvasY=r.canvasY,n.wheelDelta=r.wheelDelta,n.detail=r.detail,n}return(0,n.__extends)(t,e),t}(r(6992).Event);t.G6GraphEvent=o},69858:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},80468:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(69858);Object.keys(n).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===n[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return n[e]}}))});var o=r(24825);Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===o[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}}))});var i=r(8115);Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===i[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}}))});var a=r(45341);Object.keys(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===a[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}}))})},8115:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},45341:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},43059:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(97582),o=u(r(14319)),i=u(r(36605)),a=r(61592),s=r(31834);function u(e){return e&&e.__esModule?e:{default:e}}var l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,n.__extends)(t,e),t.prototype.getDefaultCfg=function(){return{type:"combo",nodes:[],edges:[],combos:[]}},t.prototype.getShapeCfg=function(e){var t=this.get("styles"),r=this.get("bbox");if(t&&r){var o=e,a=(0,s.isNumber)(e.size)?[e.size,e.size]:e.size,u=(0,s.isNumber)(e.fixSize)?[e.fixSize,e.fixSize]:e.fixSize,l=a||u||i.default.defaultCombo.size,c={r:(Math.max(r.width,r.height)||Math.max(l[0],l[1]))/2,width:r.width||l[0],height:r.height||l[1]};o.style=(0,n.__assign)((0,n.__assign)((0,n.__assign)({},t),e.style),c);var f=e.padding||i.default.defaultCombo.padding;return(0,s.isNumber)(f)?(c.r+=f,c.width+=2*f,c.height+=2*f):(c.r=c.r+Math.max.apply(Math,f),c.width+=f[1]+f[3]||2*f[1],c.height+=f[0]+f[2]||2*f[0]),this.set("sizeCache",c),o}return e},t.prototype.calculateCanvasBBox=function(){if(!this.destroyed){var e=this.get("keyShape"),t=this.get("group"),r=this.get("bboxCache")||{},n=r.x,o=r.x,i=this.get("sizeCache"),s=(0,a.getBBox)(e,t);if(s.centerX=(s.minX+s.maxX)/2,s.centerY=(s.minY+s.maxY)/2,i)i.width=Math.max(i.width,s.width),i.height=Math.max(i.height,s.height),this.set("sizeCache",i),"circle"===e.get("type")?(s.width=2*i.r,s.height=2*i.r):(s.width=i.width,s.height=i.height),s.minX=s.centerX-s.width/2,s.minY=s.centerY-s.height/2,s.maxX=s.centerX+s.width/2,s.maxY=s.centerY+s.height/2;else s.width=s.maxX-s.minX,s.height=s.maxY-s.minY,s.centerX=(s.minX+s.maxX)/2,s.centerY=(s.minY+s.maxY)/2;return s.x=s.minX,s.y=s.minY,s.x===n&&s.y===o||this.set("anchorPointsCache",null),s}},t.prototype.getChildren=function(){return{nodes:this.getNodes(),combos:this.getCombos()}},t.prototype.getNodes=function(){return this.get("nodes")},t.prototype.getCombos=function(){return this.get("combos")},t.prototype.addChild=function(e){switch(e.getType()){case"node":this.addNode(e);break;case"combo":this.addCombo(e);break;default:return console.warn("Only node or combo items are allowed to be added into a combo"),!1}return!0},t.prototype.addCombo=function(e){return this.get("combos").push(e),!0},t.prototype.addNode=function(e){return this.get("nodes").push(e),!0},t.prototype.removeChild=function(e){switch(e.getType()){case"node":this.removeNode(e);break;case"combo":this.removeCombo(e);break;default:return console.warn("Only node or combo items are allowed to be added into a combo"),!1}return!0},t.prototype.removeCombo=function(e){if(e){var t=this.getCombos(),r=t.indexOf(e);return r>-1&&(t.splice(r,1),!0)}},t.prototype.removeNode=function(e){if(e){var t=this.getNodes(),r=t.indexOf(e);return r>-1&&(t.splice(r,1),!0)}},t.prototype.getUpdateType=function(e){},t.prototype.getBBox=function(){return this.set("bboxCanvasCache",null),this.calculateCanvasBBox()},t.prototype.clearCache=function(){this.set("bboxCache",null),this.set("bboxCanvasCache",null),this.set("anchorPointsCache",null)},t.prototype.destroy=function(){if(!this.destroyed){var e=this.get("animate"),t=this.get("group");e&&t.stopAnimate(),t.shapeMap={},this.clearCache(),this.set("sizeCache",null),this.set("bbox",null),t.remove(),this._cfg=null,this.destroyed=!0}},t}(o.default);t.default=l},4779:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,o=r(97582),i=r(31834);var a={source:"start",target:"end"},s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,o.__extends)(t,e),t.prototype.getDefaultCfg=function(){return{type:"edge",sourceNode:null,targetNode:null,startPoint:null,endPoint:null,linkCenter:!1}},t.prototype.setEnd=function(e,t){var r=a[e]+"Point",n=e+"Node",o=this.get(n);o&&!o.destroyed&&o.removeEdge(this),(0,i.isPlainObject)(t)?(this.set(r,t),this.set(n,null)):t&&(t.addEdge(this),this.set(n,t),this.set(r,null))},t.prototype.getLinkPoint=function(e,t,r){var n=a[e]+"Point",o=e+"Node",s=this.get(n);if(!s){var u=this.get(o),l=e+"Anchor",c=this.getPrePoint(e,r),f=t[l];(0,i.isNil)(f)||(s=u.getLinkPointByAnchor(f)),s=s||u.getLinkPoint(c),(0,i.isNil)(s.index)||this.set("".concat(e,"AnchorIndex"),s.index)}return s},t.prototype.getPrePoint=function(e,t){if(t&&t.length)return t["source"===e?0:t.length-1];var r="source"===e?"target":"source";return this.getEndPoint(r)},t.prototype.getEndPoint=function(e){var t=e+"Node",r=a[e]+"Point",n=this.get(t);return n&&!n.destroyed?n.get("model"):this.get(r)},t.prototype.getControlPointsByCenter=function(e){var t=this.getEndPoint("source"),r=this.getEndPoint("target"),n=this.get("shapeFactory"),o=e.type;return n.getControlPoints(o,{startPoint:t,endPoint:r})},t.prototype.getEndCenter=function(e){var t=e+"Node",r=a[e]+"Point",n=this.get(t);if(n){var o=n.getBBox();return{x:o.centerX,y:o.centerY}}return this.get(r)},t.prototype.init=function(){e.prototype.init.call(this),this.setSource(this.get("source")),this.setTarget(this.get("target"))},t.prototype.getShapeCfg=function(t,r){var n=this.get("linkCenter"),o=(null===r||void 0===r?void 0:r.includes("move"))?t:e.prototype.getShapeCfg.call(this,t);if(n)o.startPoint=this.getEndCenter("source"),o.endPoint=this.getEndCenter("target");else{var i=o.controlPoints||this.getControlPointsByCenter(o);o.startPoint=this.getLinkPoint("source",t,i),o.endPoint=this.getLinkPoint("target",t,i)}return o.sourceNode=this.get("sourceNode"),o.targetNode=this.get("targetNode"),o},t.prototype.getModel=function(){var e=this.get("model"),t=this.get("source".concat("Node")),r=this.get("target".concat("Node"));return t?delete e["source".concat("Node")]:e.source=this.get("start".concat("Point")),r?delete e["target".concat("Node")]:e.target=this.get("end".concat("Point")),(0,i.isString)(e.source)||(0,i.isPlainObject)(e.source)||(e.source=e.source.getID()),(0,i.isString)(e.target)||(0,i.isPlainObject)(e.target)||(e.target=e.target.getID()),e},t.prototype.setSource=function(e){this.setEnd("source",e),this.set("source",e)},t.prototype.setTarget=function(e){this.setEnd("target",e),this.set("target",e)},t.prototype.getSource=function(){return this.get("source")},t.prototype.getTarget=function(){return this.get("target")},t.prototype.updatePosition=function(){return!1},t.prototype.update=function(e,t){void 0===t&&(t=void 0);var r=this.get("model"),n=r.visible,o=e.visible;n!==o&&void 0!==o&&this.changeVisibility(o);var a=this.get("source"),s=this.get("target");if(a&&!a.destroyed&&s&&!s.destroyed){var u=this.get("styles");if(e.stateStyles){var l=e.stateStyles;(0,i.mix)(u,l),delete e.stateStyles}Object.assign(r,e),this.updateShape(t),this.afterUpdate(),this.clearCache()}},t.prototype.destroy=function(){var t=this.get("source".concat("Node")),r=this.get("target".concat("Node"));t&&!t.destroyed&&t.removeEdge(this),r&&!r.destroyed&&r.removeEdge(this),e.prototype.destroy.call(this)},t}(((n=r(80272))&&n.__esModule?n:{default:n}).default);t.default=s},65674:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(97582),o=r(31834),i=r(73920),a=r(28362),s=r(39520),u=r(25560),l=r(40861),c=function(){function e(e,t){this.cfg=(0,o.deepMix)(this.getDefaultCfg(),t),this.graph=e,this.id=this.cfg.id,this.group=this.cfg.group,this.members=this.cfg.members.map(function(t){return(0,o.isString)(t)?e.findById(t):t}),this.nonMembers=this.cfg.nonMembers.map(function(t){return(0,o.isString)(t)?e.findById(t):t}),this.setPadding(),this.setType(),this.path=this.calcPath(this.members,this.nonMembers),this.render()}return e.prototype.getDefaultCfg=function(){return{id:"g6-hull",type:"round-convex",members:[],nonMembers:[],style:{fill:"lightblue",stroke:"blue",opacity:.2},padding:10}},e.prototype.setPadding=function(){var e=this.members.length&&this.members[0].getKeyShape().getCanvasBBox().width/2;this.padding=this.cfg.padding>0?this.cfg.padding+e:10+e,this.cfg.bubbleCfg={nodeR0:this.padding-e,nodeR1:this.padding-e,morphBuffer:this.padding-e}},e.prototype.setType=function(){this.type=this.cfg.type,this.members.length<3&&(this.type="round-convex"),"round-convex"!==this.type&&"smooth-convex"!==this.type&&"bubble"!==this.type&&(console.warn("The hull type should be either round-convex, smooth-convex or bubble, round-convex is used by default."),this.type="round-convex")},e.prototype.calcPath=function(e,t){var r,n,o;switch(this.type){case"round-convex":r=(0,u.genConvexHull)(e),o=(0,a.roundedHull)(r.map(function(e){return[e.x,e.y]}),this.padding),n=(0,i.parsePathString)(o);break;case"smooth-convex":2===(r=(0,u.genConvexHull)(e)).length?(o=(0,a.roundedHull)(r.map(function(e){return[e.x,e.y]}),this.padding),n=(0,i.parsePathString)(o)):r.length>2&&(o=(0,a.paddedHull)(r.map(function(e){return[e.x,e.y]}),this.padding),n=(0,a.getClosedSpline)(o));break;case"bubble":n=(r=(0,l.genBubbleSet)(e,t,this.cfg.bubbleCfg)).length>=2&&(0,a.getClosedSpline)(r)}return n},e.prototype.render=function(){this.group.addShape("path",{attrs:(0,n.__assign)({path:this.path},this.cfg.style),id:this.id,name:this.cfg.id,capture:!1}),this.group.toBack()},e.prototype.addMember=function(e){if(e){(0,o.isString)(e)&&(e=this.graph.findById(e)),this.members.push(e);var t=this.nonMembers.indexOf(e);return t>-1&&this.nonMembers.splice(t,1),this.updateData(this.members,this.nonMembers),!0}},e.prototype.addNonMember=function(e){if(e){(0,o.isString)(e)&&(e=this.graph.findById(e)),this.nonMembers.push(e);var t=this.members.indexOf(e);return t>-1&&this.members.splice(t,1),this.updateData(this.members,this.nonMembers),!0}},e.prototype.removeMember=function(e){if(e){(0,o.isString)(e)&&(e=this.graph.findById(e));var t=this.members.indexOf(e);return t>-1&&(this.members.splice(t,1),this.updateData(this.members,this.nonMembers),!0)}},e.prototype.removeNonMember=function(e){if(e){(0,o.isString)(e)&&(e=this.graph.findById(e));var t=this.nonMembers.indexOf(e);return t>-1&&(this.nonMembers.splice(t,1),this.updateData(this.members,this.nonMembers),!0)}},e.prototype.updateData=function(e,t){var r=this;this.group.findById(this.id).remove(),e&&(this.members=e.map(function(e){return(0,o.isString)(e)?r.graph.findById(e):e})),t&&(this.nonMembers=t.map(function(e){return(0,o.isString)(e)?r.graph.findById(e):e})),this.path=this.calcPath(this.members,this.nonMembers),this.render()},e.prototype.updateStyle=function(e){this.group.findById(this.id).attr((0,n.__assign)({},e))},e.prototype.updateCfg=function(e){var t=this;this.cfg=(0,o.deepMix)(this.cfg,e),this.id=this.cfg.id,this.group=this.cfg.group,e.members&&(this.members=this.cfg.members.map(function(e){return(0,o.isString)(e)?t.graph.findById(e):e})),e.nonMembers&&(this.nonMembers=this.cfg.nonMembers.map(function(e){return(0,o.isString)(e)?t.graph.findById(e):e})),this.setPadding(),this.setType(),this.path=this.calcPath(this.members,this.nonMembers),this.render()},e.prototype.contain=function(e){var t,r,n=this,i=(t=(0,o.isString)(e)?this.graph.findById(e):e).getKeyShape();if("path"===t.get("type"))r=(0,a.pathToPoints)(i.attr("path"));else{var u=i.getCanvasBBox();r=[[u.minX,u.minY],[u.maxX,u.minY],[u.maxX,u.maxY],[u.minX,u.maxY]]}return r=r.map(function(e){var t=n.graph.getPointByCanvas(e[0],e[1]);return[t.x,t.y]}),(0,s.isPolygonsIntersect)(r,(0,a.pathToPoints)(this.path))},e.prototype.destroy=function(){this.group.remove(),this.cfg=null},e}();t.default=c},80272:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,o=r(97582),i=r(31834),a=(n=r(27144))&&n.__esModule?n:{default:n},s=r(61592),u=r(39520),l=r(30271);var c=function(){function e(e){this._cfg={},this.destroyed=!1,this.optimize=!1;var t={id:void 0,type:"item",model:{},group:void 0,animate:!1,visible:!0,locked:!1,event:!0,keyShape:void 0,states:[]};this._cfg=Object.assign(t,this.getDefaultCfg(),e);var r=this.get("model"),n=r.id,o=this.get("type");void 0===n?n=(0,l.uniqueId)(o):"string"!=typeof n&&(n=String(n)),this.get("model").id=n,this.set("id",n);var a=e.group;a&&(a.set("item",this),a.set("id",n)),this.init(),this.draw();var s=r.shape||r.type||("edge"===o?"line":"circle"),u=this.get("shapeFactory");if(u&&u[s]){var c=u[s].options;if(c&&c.stateStyles){var f=this.get("styles")||r.stateStyles;f=(0,i.deepMix)({},c.stateStyles,f),this.set("styles",f)}}}return e.prototype.calculateBBox=function(){var e=this.get("keyShape"),t=this.get("group"),r=(0,s.getBBox)(e,t);return r.x=r.minX,r.y=r.minY,r.width=r.maxX-r.minX,r.height=r.maxY-r.minY,r.centerX=(r.minX+r.maxX)/2,r.centerY=(r.minY+r.maxY)/2,r},e.prototype.calculateCanvasBBox=function(){var e=this.get("keyShape"),t=this.get("group"),r=(0,s.getBBox)(e,t);return r.x=r.minX,r.y=r.minY,r.width=r.maxX-r.minX,r.height=r.maxY-r.minY,r.centerX=(r.minX+r.maxX)/2,r.centerY=(r.minY+r.maxY)/2,r},e.prototype.drawInner=function(){var e=this.get("shapeFactory"),t=this.get("group"),r=this.get("model");t.clear();var n=r.visible;if(void 0===n||n||this.changeVisibility(n),e){this.updatePosition(r);var o=this.getShapeCfg(r),i=o.type,a=e.draw(i,o,t);a&&(this.set("keyShape",a),a.set("isKeyShape",!0),a.set("draggable",!0)),this.setOriginStyle(),this.set("currentShape",i),this.restoreStates(e,i)}},e.prototype.setOriginStyle=function(){var e=this.get("group"),t=e.get("children"),r=this,n=this.getKeyShape().get("name");if(this.get("originStyle")){var o=this.get("originStyle");n&&!o[n]&&(o[n]={});var a=this.getCurrentStatesStyle(),s=function(e){var s=t[e],u=s.get("name"),l=s.attr();if(u&&u!==n){var c=a[u];o[u]||(o[u]={}),c?Object.keys(l).forEach(function(e){var t=l[e];t!==c[e]&&(o[u][e]=t)}):o[u]="image"!==s.get("type")?(0,i.clone)(l):r.getShapeStyleByName(u)}else{var f=s.attr(),h={};Object.keys(a).forEach(function(e){var t=a[e];e!==n&&(0,i.isPlainObject)(t)||(h[e]=t)}),Object.keys(f).forEach(function(e){var t=f[e];h[e]!==t&&(n?o[n][e]=t:o[e]=t)})}};for(c=0;c<t.length;c++)s(c);delete o.path,delete o.matrix,delete o.x,delete o.y,o[n]&&(delete o[n].x,delete o[n].y,delete o[n].matrix,delete o[n].path),r.set("originStyle",o)}else{for(var u={},c=0;c<t.length;c++){var f=t[c],h=f.get("type"),p=f.get("name");if(p&&p!==n)u[p]="image"!==h?(0,i.clone)(f.attr()):r.getShapeStyleByName(p),"text"===h&&u[p]&&(delete u[p].x,delete u[p].y,delete u[p].matrix);else{var d=r.getShapeStyleByName();if(delete d.path,delete d.matrix,n)if(p)u[n]=d;else{var y=(0,l.uniqueId)("shape");f.set("name",y),e.shapeMap[y]=f,u[y]="image"!==h?(0,i.clone)(f.attr()):r.getShapeStyleByName(p)}else Object.assign(u,d)}}r.set("originStyle",u)}},e.prototype.restoreStates=function(e,t){var r=this,n=r.get("states");(0,i.each)(n,function(n){e.setState(t,n,!0,r)})},e.prototype.init=function(){var e=a.default.getFactory(this.get("type"));this.set("shapeFactory",e)},e.prototype.get=function(e){return this._cfg[e]},e.prototype.set=function(e,t){(0,i.isPlainObject)(e)?this._cfg=(0,o.__assign)((0,o.__assign)({},this._cfg),e):this._cfg[e]=t},e.prototype.getDefaultCfg=function(){return{}},e.prototype.clearCache=function(){this.set("bboxCache",null),this.set("bboxCanvasCache",null)},e.prototype.beforeDraw=function(){},e.prototype.afterDraw=function(){},e.prototype.afterUpdate=function(){},e.prototype.draw=function(){this.beforeDraw(),this.drawInner(),this.afterDraw()},e.prototype.getShapeStyleByName=function(e){var t,r=this.get("group");if(t=e?r.shapeMap[e]||r.find(function(t){return t.get("name")===e}):this.getKeyShape()){var n={};return(0,i.each)(t.attr(),function(e,t){("img"!==t||(0,i.isString)(e))&&(n[t]=e)}),n}return{}},e.prototype.getShapeCfg=function(e,t){var r=this.get("styles");if(r){var n=e;return n.style=(0,o.__assign)((0,o.__assign)({},r),e.style),n}return e},e.prototype.getStateStyle=function(e){var t=this.get("styles");return t&&t[e]},e.prototype.getOriginStyle=function(){return this.get("originStyle")},e.prototype.getCurrentStatesStyle=function(){var e=this,t={},r=e.getStates();return r&&r.length?((0,i.each)(e.getStates(),function(r){t=Object.assign(t,e.getStateStyle(r))}),t):this.get("originStyle")},e.prototype.setState=function(e,t){var r=this.get("states"),n=this.get("shapeFactory"),o=e,a=e;(0,i.isString)(t)&&(o="".concat(e,":").concat(t),a="".concat(e,":"));var s=r;if((0,i.isBoolean)(t)){var u=r.indexOf(a);if(t){if(u>-1)return;r.push(o)}else u>-1&&r.splice(u,1)}else if((0,i.isString)(t)){var l=r.filter(function(e){return e.includes(a)});l.length>0&&this.clearStates(l),(s=s.filter(function(e){return!e.includes(a)})).push(o),this.set("states",s)}if(n){var c=this.get("model").type;n.setState(c,e,t,this)}},e.prototype.clearStates=function(e){var t=this,r=t.getStates(),n=t.get("shapeFactory"),o=t.get("model").type;e||(e=r),(0,i.isString)(e)&&(e=[e]);var a=r.filter(function(t){return-1===e.indexOf(t)});t.set("states",a),e.forEach(function(e){n.setState(o,e,!1,t)})},e.prototype.setOptimize=function(e){this.optimize=e},e.prototype.getContainer=function(){return this.get("group")},e.prototype.getKeyShape=function(){return this.get("keyShape")},e.prototype.getModel=function(){return this.get("model")},e.prototype.getType=function(){return this.get("type")},e.prototype.getID=function(){return this.get("id")},e.prototype.isItem=function(){return!0},e.prototype.getStates=function(){return this.get("states")},e.prototype.hasState=function(e){return this.getStates().indexOf(e)>=0},e.prototype.refresh=function(e){var t=this.get("model");this.updatePosition(t),this.updateShape(e),this.afterUpdate(),this.clearCache()},e.prototype.getUpdateType=function(e){},e.prototype.update=function(e,t){void 0===t&&(t=void 0);var r=this.get("model");if("move"===t)this.updatePosition(e);else{var n=r.visible,o=e.visible;n!==o&&void 0!==o&&this.changeVisibility(o);var a={x:r.x,y:r.y};e.x=isNaN(+e.x)?r.x:+e.x,e.y=isNaN(+e.y)?r.y:+e.y;var s=this.get("styles");if(e.stateStyles){var u=e.stateStyles;(0,i.mix)(s,u),delete e.stateStyles}Object.assign(r,e),a.x===e.x&&a.y===e.y||this.updatePosition(e),this.updateShape(t)}this.afterUpdate(),this.clearCache()},e.prototype.updateShape=function(e){var t=this.get("shapeFactory"),r=this.get("model"),n=r.type;if(t.shouldUpdate(n)&&n===this.get("currentShape")){var o=this.getShapeCfg(r,e);t.baseUpdate(n,o,this,e),"move"!==e&&this.setOriginStyle()}else this.draw();this.restoreStates(t,n)},e.prototype.updatePosition=function(e){var t=this.get("model"),r=isNaN(+e.x)?+t.x:+e.x,n=isNaN(+e.y)?+t.y:+e.y,o=this.get("group");if(isNaN(r)||isNaN(n))return!1;t.x=r,t.y=n;var i=o.getMatrix();return(!i||i[6]!==r||i[7]!==n)&&(o.resetMatrix(),(0,u.translate)(o,{x:r,y:n}),this.clearCache(),!0)},e.prototype.getBBox=function(){var e=this.get("bboxCache");return e||(e=this.calculateBBox(),this.set("bboxCache",e)),e},e.prototype.getCanvasBBox=function(){var e=this.get("bboxCanvasCache");return e||(e=this.calculateCanvasBBox(),this.set("bboxCanvasCache",e)),e},e.prototype.toFront=function(){this.get("group").toFront()},e.prototype.toBack=function(){this.get("group").toBack()},e.prototype.show=function(){this.changeVisibility(!0)},e.prototype.hide=function(){this.changeVisibility(!1)},e.prototype.changeVisibility=function(e){var t=this.get("group");e?t.show():t.hide(),this.set("visible",e)},e.prototype.isVisible=function(){return this.get("visible")},e.prototype.enableCapture=function(e){var t=this.get("group");t&&t.set("capture",e)},e.prototype.destroy=function(){if(!this.destroyed){var e=this.get("animate"),t=this.get("group");e&&t.stopAnimate(),t.shapeMap={},this.clearCache(),t.remove(),this._cfg=null,this.destroyed=!0}},e}();t.default=c},14319:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,o=r(97582),i=r(31834),a=r(39520);var s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,o.__extends)(t,e),t.prototype.getNearestPoint=function(e,t){for(var r=0,n=e[0],o=(0,a.distance)(e[0],t),i=0;i<e.length;i++){var s=e[i],u=(0,a.distance)(s,t);u<o&&(n=s,o=u,r=i)}return n.anchorIndex=r,n},t.prototype.getDefaultCfg=function(){return{type:"node",edges:[]}},t.prototype.getEdges=function(){return this.get("edges")},t.prototype.getInEdges=function(){var e=this;return this.get("edges").filter(function(t){return t.get("target")===e})},t.prototype.getOutEdges=function(){var e=this;return this.get("edges").filter(function(t){return t.get("source")===e})},t.prototype.getNeighbors=function(e){var t=this,r=this.get("edges");if("target"===e){return r.filter(function(e){return e.getSource()===t}).map(function(e){return e.getTarget()})}if("source"===e){return r.filter(function(e){return e.getTarget()===t}).map(function(e){return e.getSource()})}return r.map(function(e){return e.getSource()===t?e.getTarget():e.getSource()})},t.prototype.getLinkPointByAnchor=function(e){return this.getAnchorPoints()[e]},t.prototype.getLinkPoint=function(e){var t,r,n=this.get("keyShape").get("type"),o=this.get("type"),i=this.getBBox();"combo"===o?(t=i.centerX||(i.maxX+i.minX)/2,r=i.centerY||(i.maxY+i.minY)/2):(t=i.centerX,r=i.centerY);var s,u=this.getAnchorPoints();switch(n){case"circle":s=(0,a.getCircleIntersectByPoint)({x:t,y:r,r:i.width/2},e);break;case"ellipse":s=(0,a.getEllipseIntersectByPoint)({x:t,y:r,rx:i.width/2,ry:i.height/2},e);break;default:s=(0,a.getRectIntersectByPoint)(i,e)}var l=s;return u.length&&(l||(l=e),l=this.getNearestPoint(u,l)),l||(l={x:t,y:r}),l},t.prototype.getAnchorPoints=function(){var e=this.get("anchorPointsCache");if(!e){e=[];var t=this.get("shapeFactory"),r=this.getBBox(),n=this.get("model"),o=this.getShapeCfg(n),a=n.type,s=t.getAnchorPoints(a,o)||[];(0,i.each)(s,function(t,n){var o={x:r.minX+t[0]*r.width,y:r.minY+t[1]*r.height,anchorIndex:n};e.push(o)}),this.set("anchorPointsCache",e)}return e},t.prototype.addEdge=function(e){this.get("edges").push(e)},t.prototype.lock=function(){this.set("locked",!0)},t.prototype.unlock=function(){this.set("locked",!1)},t.prototype.hasLocked=function(){return this.get("locked")},t.prototype.removeEdge=function(e){var t=this.getEdges(),r=t.indexOf(e);r>-1&&t.splice(r,1)},t.prototype.clearCache=function(){this.set("bboxCache",null),this.set("anchorPointsCache",null)},t.prototype.getUpdateType=function(e){var t,r,n,o,a;if(e){var s=!(0,i.isNil)(e.x),u=!(0,i.isNil)(e.y),l=Object.keys(e);return 1===l.length&&(s||u)||2===l.length&&s&&u?"move":(0,i.isNumber)(e.x)||(0,i.isNumber)(e.y)||e.type||e.anchorPoints||e.size||(null===e||void 0===e?void 0:e.style)&&((null===(t=null===e||void 0===e?void 0:e.style)||void 0===t?void 0:t.r)||(null===(r=null===e||void 0===e?void 0:e.style)||void 0===r?void 0:r.width)||(null===(n=null===e||void 0===e?void 0:e.style)||void 0===n?void 0:n.height)||(null===(o=null===e||void 0===e?void 0:e.style)||void 0===o?void 0:o.rx)||(null===(a=null===e||void 0===e?void 0:e.style)||void 0===a?void 0:a.ry))?"bbox|label":l.includes("label")||l.includes("labelCfg")?"style|label":"style"}},t.prototype.setState=function(t,r){var n=this;this.optimize?e.prototype.setState.call(this,t,r):this.runWithBBoxAffected(function(){return e.prototype.setState.call(n,t,r)})},t.prototype.clearStates=function(t){var r=this;this.optimize?e.prototype.clearStates.call(this,t):this.runWithBBoxAffected(function(){return e.prototype.clearStates.call(r,t)})},t.prototype.runWithBBoxAffected=function(e){var t=["r","width","height","rx","ry","lineWidth"],r=this.getKeyShape().attr(),n={};Object.keys(this.getKeyShape().attr()).forEach(function(e){t.includes(e)&&(n[e]=r[e])}),e();for(var o=this.getKeyShape().attr(),i=0;i<t.length;i++){var a=t[i];if(o[a]!==n[a]){this.clearCache(),this.getEdges().forEach(function(e){return e.refresh()});break}}},t}(((n=r(80272))&&n.__esModule?n:{default:n}).default);t.default=s},2782:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(80468);Object.keys(n).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===n[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return n[e]}}))})},30271:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.uniqueId=t.processParallelEdges=t.isViewportChanged=t.isNaN=t.formatPadding=t.cloneEvent=t.calculationItemsBBox=void 0;var n=r(31834),o=r(24825);t.uniqueId=function(e){return"".concat(e,"-").concat(Math.random()).concat(Date.now())};t.formatPadding=function(e){if((0,n.isArray)(e))switch(e.length){case 4:return e;case 3:return e.push(e[1]),e;case 2:return e.concat(e);case 1:return[e[0],e[0],e[0],e[0]];default:return[0,0,0,0]}if((0,n.isNumber)(e))return[e,e,e,e];if((0,n.isString)(e)){var t=parseInt(e,10);return[t,t,t,t]}return[0,0,0,0]};t.cloneEvent=function(e){var t=new o.G6GraphEvent(e.type,e);return t.clientX=e.clientX,t.clientY=e.clientY,t.x=e.x,t.y=e.y,t.target=e.target,t.currentTarget=e.currentTarget,t.bubbles=!0,t.item=e.item,t};t.isViewportChanged=function(e){if(!e)return!1;for(var t=[1,0,0,0,1,0,0,0,1],r=0;r<9;r++)if(e[r]!==t[r])return!0;return!1};t.isNaN=function(e){return Number.isNaN(Number(e))};t.calculationItemsBBox=function(e){for(var t=1/0,r=-1/0,n=1/0,o=-1/0,i=0;i<e.length;i++){var a=e[i].getBBox(),s=a.minX,u=a.minY,l=a.maxX,c=a.maxY;s<t&&(t=s),u<n&&(n=u),l>r&&(r=l),c>o&&(o=c)}return{x:Math.floor(t),y:Math.floor(n),width:Math.ceil(r)-Math.floor(t),height:Math.ceil(o)-Math.floor(n),minX:t,minY:n,maxX:r,maxY:o}};t.processParallelEdges=function(e,t,r,n,o){void 0===t&&(t=15),void 0===r&&(r="quadratic"),void 0===n&&(n=void 0),void 0===o&&(o=void 0);for(var i=e.length,a=2*t,s=["top","top-right","right","bottom-right","bottom","bottom-left","left","top-left"],u={},l=[],c={},f=0;f<i;f++){var h=e[f],p=h.source,d=h.target,y="".concat(p,"-").concat(d);if(!l[f]){u[y]||(u[y]=[]),l[f]=!0,u[y].push(h);for(var v=0;v<i;v++)if(f!==v){var g=e[v],m=g.source,b=g.target;l[v]||(p===b&&d===m?(u[y].push(g),l[v]=!0,c["".concat(m,"|").concat(b,"|").concat(u[y].length-1)]=!0):p===m&&d===b&&(u[y].push(g),l[v]=!0))}}}for(var w in u)for(var _=u[w],x=_.length,S=0;S<x;S++){var O=_[S];if(O.source!==O.target)if(1===x&&n&&O.source!==O.target)O.type=n;else{O.type=r;var P=(S%2==0?1:-1)*(c["".concat(O.source,"|").concat(O.target,"|").concat(S)]?-1:1);O.curveOffset=x%2==1?P*Math.ceil(S/2)*a:P*(Math.floor(S/2)*a+t)}else o&&(O.type=o),O.loopCfg={position:s[S%8],dist:20*Math.floor(S/8)+50}}return e}},6130:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultSubjectColors=void 0;t.defaultSubjectColors=["#5F95FF","#61DDAA","#65789B","#F6BD16","#7262FD","#78D3F8","#9661BC","#F6903D","#008685","#F08BB4"]},61592:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.truncateLabelByLength=t.traverseTreeUp=t.traverseTree=t.shouldRefreshEdge=t.reconstructTree=t.plainCombosToTrees=t.getTextSize=t.getLoopCfgs=t.getLetterWidth=t.getLabelPosition=t.getComboBBox=t.getBBox=t.getAnimateCfgWithCallback=t.cloneBesidesImg=void 0;var n=r(97582),o=r(43708),i=r(31834),a=l(r(36605)),s=l(r(63198)),u=r(39520);function l(e){return e&&e.__esModule?e:{default:e}}var c=Math.PI,f=Math.sin,h=Math.cos,p=f(c/8),d=h(c/8);t.getBBox=function(e,t){var r=e.getBBox(),n={x:r.minX,y:r.minY},o={x:r.maxX,y:r.maxY};if(t){var i=t.getMatrix();i||(i=[1,0,0,0,1,0,0,0,1]),n=(0,u.applyMatrix)(n,i),o=(0,u.applyMatrix)(o,i)}var a=n.x,s=n.y,l=o.x,c=o.y;return{x:a,y:s,minX:a,minY:s,maxX:l,maxY:c,width:l-a,height:c-s}};t.getLoopCfgs=function(e){var t=e.sourceNode||e.targetNode,r=t.get("group").getMatrix();r||(r=[1,0,0,0,1,0,0,0,1]);var n=t.getKeyShape(),i=n.getBBox(),s=e.loopCfg||{},u=s.dist||2*Math.max(i.width,i.height),l=s.position||a.default.defaultLoopPosition,c=[(i.minX+i.maxX)/2+r[6],(i.minY+i.maxY)/2+r[7]],f=[e.startPoint.x,e.startPoint.y],h=[e.endPoint.x,e.endPoint.y],y=i.height/2,v=i.width/2,g=y,m=y,b=g*p,w=g*d,_=m*p,x=m*d,S=n.get("type"),O=Math.min(y/2,v/2),P=Math.min(y,v),E=(null===s||void 0===s?void 0:s.pointPadding)?Math.min(P,null===s||void 0===s?void 0:s.pointPadding):O;if(f[0]===h[0]&&f[1]===h[1]){switch(l){case"top":"circle"===S?(f=[c[0]-b,c[1]-w],h=[c[0]+_,c[1]-x]):(f=[c[0]-E,c[1]-y],h=[c[0]+E,c[1]-y]);break;case"top-right":g=y,m=v,"circle"===S?(f=[c[0]+(b=g*p),c[1]-(w=g*d)],h=[c[0]+(x=m*d),c[1]-(_=m*p)]):(f=[c[0]+v-E,c[1]-y],h=[c[0]+v,c[1]-y+E]);break;case"right":g=v,m=v,"circle"===S?(f=[c[0]+(w=g*d),c[1]-(b=g*p)],h=[c[0]+(x=m*d),c[1]+(_=m*p)]):(f=[c[0]+v,c[1]-E],h=[c[0]+v,c[1]+E]);break;case"bottom-right":g=v,m=y,"circle"===S?(f=[c[0]+(w=g*d),c[1]+(b=g*p)],h=[c[0]+(_=m*p),c[1]+(x=m*d)]):(f=[c[0]+v,c[1]+y-E],h=[c[0]+v-E,c[1]+y]);break;case"bottom":g=y,m=y,"circle"===S?(f=[c[0]+(b=g*p),c[1]+(w=g*d)],h=[c[0]-(_=m*p),c[1]+(x=m*d)]):(f=[c[0]-E,c[1]+y],h=[c[0]+E,c[1]+y]);break;case"bottom-left":g=y,m=v,"circle"===S?(f=[c[0]-(b=g*p),c[1]+(w=g*d)],h=[c[0]-(x=m*d),c[1]+(_=m*p)]):(f=[c[0]-v,c[1]+y-E],h=[c[0]-v+E,c[1]+y]);break;case"left":g=v,m=v,"circle"===S?(f=[c[0]-(w=g*d),c[1]+(b=g*p)],h=[c[0]-(x=m*d),c[1]-(_=m*p)]):(f=[c[0]-v,c[1]-E],h=[c[0]-v,c[1]+E]);break;case"top-left":g=v,m=y,"circle"===S?(f=[c[0]-(w=g*d),c[1]-(b=g*p)],h=[c[0]-(_=m*p),c[1]-(x=m*d)]):(f=[c[0]-v+E,c[1]-y],h=[c[0]-v,c[1]-y+E]);break;default:f=[c[0]-(b=(g=v)*p),c[1]-(w=g*d)],h=[c[0]+(_=(m=v)*p),c[1]-(x=m*d)]}if(!1===s.clockwise){var k=[f[0],f[1]];f=[h[0],h[1]],h=[k[0],k[1]]}}var M=[f[0]-c[0],f[1]-c[1]],C=(g+u)/g,j=(m+u)/m;!1===s.clockwise&&(C=(m+u)/m,j=(g+u)/g);var T=o.vec2.scale([0,0],M,C),A=[c[0]+T[0],c[1]+T[1]],I=[h[0]-c[0],h[1]-c[1]],R=o.vec2.scale([0,0],I,j),L=[c[0]+R[0],c[1]+R[1]];return e.startPoint={x:f[0],y:f[1]},e.endPoint={x:h[0],y:h[1]},e.controlPoints=[{x:A[0],y:A[1]},{x:L[0],y:L[1]}],e};t.getLabelPosition=function(e,t,r,o,i){var a=[],s=null===e||void 0===e?void 0:e.getPoint(t);if(!s)return{x:0,y:0,angle:0};if(t<1e-4)a=e.getStartTangent().reverse();else if(t>.9999)a=e.getEndTangent();else{var u=null===e||void 0===e?void 0:e.getPoint(t+1e-4);a.push([s.x,s.y]),a.push([u.x,u.y])}var l=Math.atan2(a[1][1]-a[0][1],a[1][0]-a[0][0]);if(l<0&&(l+=2*c),r&&(s.x+=h(l)*r,s.y+=f(l)*r),o){var p=l-c/2;l>.5*c&&l<1.5*c&&(p-=c),s.x+=h(p)*o,s.y+=f(p)*o}var d={x:s.x,y:s.y,angle:l};return i?(l>.5*c&&l<1.5*c&&(l-=c),(0,n.__assign)({rotate:l},d)):d};var y=function(e,t){"function"==typeof t&&function e(t,r,n,o){if(!1===o(t,r,n))return!1;if(t&&t.children)for(var i=t.children.length-1;i>=0;i--)if(!e(t.children[i],t,i,o))return!1;return!0}(e,null,-1,t)};t.traverseTree=y;t.traverseTreeUp=function(e,t){"function"==typeof t&&function e(t,r,n,o){if(t&&t.children)for(var i=t.children.length-1;i>=0;i--)if(!e(t.children[i],t,i,o))return;return!1!==o(t,r,n)}(e,null,-1,t)};var v=function(e,t){return t*(s.default[e]||1)};t.getLetterWidth=v;t.getTextSize=function(e,t){var r=0,n=new RegExp("[ä¸-é¾¥]+");return e.split("").forEach(function(e){n.test(e)?r+=t:r+=v(e,t)}),[r,t]};t.truncateLabelByLength=function(e,t){return"number"!=typeof t||t<=0||t>=e.length?e:e.substring(0,t)+"..."};t.plainCombosToTrees=function(e,t){var r=[],n={},o={};e.forEach(function(e){o[e.id]=e}),e.forEach(function(e,t){var a=(0,i.clone)(e);a.itemType="combo",a.children=void 0,a.parentId===a.id?(console.warn("The parentId for combo ".concat(a.id," can not be the same as the combo's id")),delete a.parentId):a.parentId&&!o[a.parentId]&&(console.warn("The parent combo for combo ".concat(a.id," does not exist!")),delete a.parentId);var s=n[a.id];if(s){if(a.children=s.children,n[a.id]=a,!(s=a).parentId)return void r.push(s);var u=n[s.parentId];if(u)u.children?u.children.push(a):u.children=[a];else{var l={id:s.parentId,children:[s]};n[s.parentId]=l,n[a.id]=a}}else if((0,i.isString)(e.parentId)){var c=n[e.parentId];if(c)c.children?c.children.push(a):c.children=[a],n[a.id]=a;else{var f={id:e.parentId,children:[a]};n[f.id]=f,n[a.id]=a}}else r.push(a),n[a.id]=a});var a={};(t||[]).forEach(function(e){a[e.id]=e;var t=n[e.comboId];if(t){var r={id:e.id,comboId:e.comboId};t.children?t.children.push(r):t.children=[r],r.itemType="node",n[e.id]=r}});var s=0;return r.forEach(function(e){e.depth=s+10,y(e,function(e){var t,r=n[e.id].itemType;t="node"===r?n[e.comboId]:n[e.parentId],e.depth=t&&"node"===r?s+1:s+10,s<e.depth&&(s=e.depth);var o=a[e.id];return o&&(o.depth=e.depth),!0})}),r};t.reconstructTree=function(e,t,r){var n,o,i=e,a={root:{children:e}},s=!1,u="root";(e||[]).forEach(function(e){if(!s)return e.id===t?(o=e,"combo"===e.itemType?o.parentId=r:o.comboId=r,void(s=!0)):void y(e,function(e){var n;return a[e.id]={children:(null===e||void 0===e?void 0:e.children)||[]},i=null===(n=a[e.parentId||e.comboId||"root"])||void 0===n?void 0:n.children,!e||!e.removed&&t!==e.id||!i||(u=e.parentId||e.comboId||"root",o=e,"combo"===e.itemType?o.parentId=r:o.comboId=r,s=!0,!1)})});var l=(i=null===(n=a[u])||void 0===n?void 0:n.children)?i.indexOf(o):-1;if(l>-1&&i.splice(l,1),s||(o={id:t,itemType:"node",comboId:r},a[t]={children:void 0}),t){var c=!1;if(r){var f=0;(e||[]).forEach(function(e){c||y(e,function(e){return r!==e.id||(c=!0,e.children?e.children.push(o):e.children=[o],f=e.depth,"node"===o.itemType?o.depth=f+2:o.depth=f+1,!1)})})}else r&&c||"node"===o.itemType||e.push(o);var h=o.depth;y(o,function(e){return"node"===e.itemType?h+=2:h+=1,e.depth=h,!0})}return e};t.getComboBBox=function(e,t,r){var n={minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0,x:void 0,y:void 0,width:void 0,height:void 0,centerX:void 0,centerY:void 0};if(!e||0===e.length){var o=(null===r||void 0===r?void 0:r.getModel())||{},a=o.x,s=o.y,u=o.fixSize,l=o.collapsed,c=o.fixCollapseSize,f=l?c:u,h=(0,i.isArray)(f)?f:[f,f],p=h[0],d=h[1],y=[p/2,d/2];return{minX:a-y[0],minY:s-y[1],maxX:a+y[0],maxY:s+y[1],x:a,y:s,width:p,height:d}}return e.forEach(function(e){var r=t.findById(e.id);if(r&&r.isVisible()){r.set("bboxCanvasCache",void 0);var o=r.getCanvasBBox();o.x&&n.minX>o.minX&&(n.minX=o.minX),o.y&&n.minY>o.minY&&(n.minY=o.minY),o.x&&n.maxX<o.maxX&&(n.maxX=o.maxX),o.y&&n.maxY<o.maxY&&(n.maxY=o.maxY)}}),n.x=(n.minX+n.maxX)/2,n.y=(n.minY+n.maxY)/2,n.width=n.maxX-n.minX,n.height=n.maxY-n.minY,n.centerX=(n.minX+n.maxX)/2,n.centerY=(n.minY+n.maxY)/2,"circle"===(null===r||void 0===r?void 0:r.getKeyShape().get("type"))&&(n.width=Math.hypot(n.height,n.width),n.height=n.width),Object.keys(n).forEach(function(e){n[e]!==1/0&&n[e]!==-1/0||(n[e]=void 0)}),n};t.shouldRefreshEdge=function(e){var t=(0,i.isNumber)(e.x)||(0,i.isNumber)(e.y)||e.type||e.anchorPoints||e.size;return e.style&&(t=t||(0,i.isNumber)(e.style.r)||(0,i.isNumber)(e.style.width)||(0,i.isNumber)(e.style.height)||(0,i.isNumber)(e.style.rx)||(0,i.isNumber)(e.style.ry)),t};t.cloneBesidesImg=function(e){var t={};return Object.keys(e).forEach(function(r){var n=e[r];if("img"!==r||(0,i.isString)(n))if((0,i.isObject)(n)&&!(0,i.isArray)(n)){var o={};Object.keys(n).forEach(function(e){var t=n[e];("img"!==e||(0,i.isString)(t))&&(o[e]=(0,i.clone)(t))}),t[r]=o}else t[r]=(0,i.clone)(n)}),t};t.getAnimateCfgWithCallback=function(e){var t,r=e.animateCfg,n=e.callback;if(r)if(t=(0,i.clone)(r),r.callback){var o=r.callback;t.callback=function(){n(),o()}}else t.callback=n;else t={duration:500,callback:n};return t}},21712:function(e,t,r){"use strict";function n(e){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(97582),i=p(r(39520)),a=p(r(61592)),s=p(r(28362)),u=p(r(30271)),l=p(r(6130)),c=p(r(42658)),f=r(43708);function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(h=function(e){return e?r:t})(e)}function p(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var r=h(t);if(r&&r.has(e))return r.get(e);var o={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=i?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(o,a,s):o[a]=e[a]}return o.default=e,r&&r.set(e,o),o}var d=f.ext.transform,y=(0,o.__assign)((0,o.__assign)((0,o.__assign)((0,o.__assign)((0,o.__assign)((0,o.__assign)((0,o.__assign)({},u),a),s),i),l),c),{transform:d,mat3:f.mat3});t.default=y},42658:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isForce=void 0;t.isForce=function(e){return"force"===e||"g6force"===e||"gForce"===e||"force2"===e}},63198:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={" ":.3329986572265625,a:.5589996337890625,A:.6569992065429687,b:.58599853515625,B:.6769989013671875,c:.5469985961914062,C:.7279998779296875,d:.58599853515625,D:.705999755859375,e:.554998779296875,E:.63699951171875,f:.37299957275390627,F:.5769989013671875,g:.5909988403320312,G:.7479995727539063,h:.555999755859375,H:.7199996948242188,i:.255999755859375,I:.23699951171875,j:.26699981689453123,J:.5169998168945312,k:.5289993286132812,K:.6899993896484375,l:.23499908447265624,L:.5879989624023437,m:.854998779296875,M:.8819992065429687,n:.5589996337890625,N:.7189987182617188,o:.58599853515625,O:.7669998168945312,p:.58599853515625,P:.6419998168945312,q:.58599853515625,Q:.7669998168945312,r:.3649993896484375,R:.6759994506835938,s:.504998779296875,S:.6319992065429687,t:.354998779296875,T:.6189987182617187,u:.5599990844726562,U:.7139999389648437,v:.48199920654296874,V:.6389999389648438,w:.754998779296875,W:.929998779296875,x:.5089996337890625,X:.63699951171875,y:.4959991455078125,Y:.66199951171875,z:.48699951171875,Z:.6239990234375,0:.6,1:.40099945068359377,2:.6,3:.6,4:.6,5:.6,6:.6,7:.5469985961914062,8:.6,9:.6,"[":.3329986572265625,"]":.3329986572265625,",":.26399993896484375,".":.26399993896484375,";":.26399993896484375,":":.26399993896484375,"{":.3329986572265625,"}":.3329986572265625,"\\":.5,"|":.19499969482421875,"=":.604998779296875,"+":.604998779296875,"-":.604998779296875,_:.5,"`":.3329986572265625," ~":.8329986572265625,"!":.3329986572265625,"@":.8579986572265625,"#":.6,$:.6,"%":.9699996948242188,"^":.517999267578125,"&":.7259994506835937,"*":.505999755859375,"(":.3329986572265625,")":.3329986572265625,"<":.604998779296875,">":.604998779296875,"/":.5,"?":.53699951171875}},39520:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.translate=t.squareDist=t.scaleMatrix=t.scale=t.rotate=t.pointRectSquareDist=t.pointLineSquareDist=t.pointLineDistance=t.move=t.lerpArray=t.lerp=t.itemIntersectByLine=t.isPolygonsIntersect=t.isPointsOverlap=t.isPointInPolygon=t.invertMatrix=t.intersectBBox=t.getRectIntersectByPoint=t.getPointsCenter=t.getLineIntersect=t.getEllipseIntersectByPoint=t.getDegree=t.getCircleIntersectByPoint=t.getCircleCenterByPoints=t.getBBoxBoundLine=t.getAdjMatrix=t.fractionToLine=t.floydWarshall=t.distance=t.compare=t.applyMatrix=t.Line=void 0;var n=r(43708),o=r(31834),i=n.ext.transform;t.compare=function(e){return function(t,r){return t[e]-r[e]}};var a=function(e,t,r){return e>=t&&e<=r},s=function(e,t,r,n){var o=r.x-e.x,i=r.y-e.y,s=t.x-e.x,u=t.y-e.y,l=n.x-r.x,c=n.y-r.y,f=s*c-u*l,h=1/f;if(f*f>1e-4*(s*s+u*u)*(l*l+c*c)){var p=(o*c-i*l)*h,d=(o*u-i*s)*h;return a(p,0,1)&&a(d,0,1)?{x:e.x+p*s,y:e.y+p*u}:null}return null};t.getLineIntersect=s;t.getRectIntersectByPoint=function(e,t){var r=e.x,n=e.y,o=e.width,i=e.height,a=[],u={x:r+o/2,y:n+i/2};a.push({x:r,y:n}),a.push({x:r+o,y:n}),a.push({x:r+o,y:n+i}),a.push({x:r,y:n+i}),a.push({x:r,y:n});for(var l=null,c=1;c<a.length&&!(l=s(a[c-1],a[c],u,t));c++);return l};t.getCircleIntersectByPoint=function(e,t){var r=e.x,n=e.y,o=e.r,i=t.x-r,a=t.y-n;if(i*i+a*a<o*o)return null;var s=Math.atan(a/i);return{x:r+Math.abs(o*Math.cos(s))*Math.sign(i),y:n+Math.abs(o*Math.sin(s))*Math.sign(a)}};t.getEllipseIntersectByPoint=function(e,t){var r=e.rx,n=e.ry,o=e.x,i=e.y,a=t.x-o,s=t.y-i,u=Math.atan2(s/n,a/r);return u<0&&(u+=2*Math.PI),{x:o+r*Math.cos(u),y:i+n*Math.sin(u)}};t.applyMatrix=function(e,t,r){void 0===r&&(r=1);var o=[e.x,e.y,r];return t&&!isNaN(t[0])||(t=[1,0,0,0,1,0,0,0,1]),n.vec3.transformMat3(o,o,t),{x:o[0],y:o[1]}};t.invertMatrix=function(e,t,r){void 0===r&&(r=1),t&&!isNaN(t[0])||(t=[1,0,0,0,1,0,0,0,1]);var o=n.mat3.invert([1,0,0,0,1,0,0,0,1],t);o||(o=[1,0,0,0,1,0,0,0,1]);var i=[e.x,e.y,r];return n.vec3.transformMat3(i,i,o),{x:i[0],y:i[1]}};t.getCircleCenterByPoints=function(e,t,r){var n=e.x-t.x,o=e.y-t.y,i=e.x-r.x,a=e.y-r.y,s=(e.x*e.x-t.x*t.x-t.y*t.y+e.y*e.y)/2,u=(e.x*e.x-r.x*r.x-r.y*r.y+e.y*e.y)/2,l=o*i-n*a;return{x:-(a*s-o*u)/l,y:-(n*u-i*s)/l}};t.distance=function(e,t){var r=e.x-t.x,n=e.y-t.y;return Math.sqrt(r*r+n*n)};t.scaleMatrix=function(e,t){var r=[];return e.forEach(function(e){var n=[];e.forEach(function(e){n.push(e*t)}),r.push(n)}),r};t.floydWarshall=function(e){for(var t=[],r=e.length,n=0;n<r;n+=1){t[n]=[];for(var o=0;o<r;o+=1)n===o?t[n][o]=0:0!==e[n][o]&&e[n][o]?t[n][o]=e[n][o]:t[n][o]=1/0}for(var i=0;i<r;i+=1)for(n=0;n<r;n+=1)for(o=0;o<r;o+=1)t[n][o]>t[n][i]+t[i][o]&&(t[n][o]=t[n][i]+t[i][o]);return t};t.getAdjMatrix=function(e,t){var r=e.nodes,n=e.edges,o=[],i={};if(!r)throw new Error("invalid nodes data!");return r&&r.forEach(function(e,t){i[e.id]=t,o.push([])}),n&&n.forEach(function(e){var r=e.source,n=e.target,a=i[r],s=i[n];o[a][s]=1,t||(o[s][a]=1)}),o};t.translate=function(e,t){e.translate(t.x,t.y)};t.move=function(e,t,r,n){void 0===n&&(n={duration:500});var o=e.getMatrix();o||(o=[1,0,0,0,1,0,0,0,1]);var a=e.getCanvasBBox(),s=t.x-a.minX,u=t.y-a.minY;if(r){var l=s*o[0],c=u*o[4],f=0,h=0,p=0,d=0;e.animate(function(e){return o=i(o,[["t",(p=l*e)-f,(d=c*e)-h]]),f=p,h=d,{matrix:o}},n)}else{var y=i(o,[["t",s,u]]);e.setMatrix(y)}};t.scale=function(e,t){var r=e.getMatrix();r||(r=[1,0,0,0,1,0,0,0,1]);var n=t;(0,o.isArray)(t)||(n=[t,t]),(0,o.isArray)(t)&&1===t.length&&(n=[t[0],t[0]]),r=i(r,[["s",n[0],n[1]]]),e.setMatrix(r)};t.rotate=function(e,t){var r=e.getMatrix();r||(r=[1,0,0,0,1,0,0,0,1]),r=i(r,[["r",t]]),e.setMatrix(r)};function u(e,t,r){return(r[0]-e[0])*(t[1]-e[1])==(t[0]-e[0])*(r[1]-e[1])&&Math.min(e[0],t[0])<=r[0]&&r[0]<=Math.max(e[0],t[0])&&Math.min(e[1],t[1])<=r[1]&&r[1]<=Math.max(e[1],t[1])}t.getDegree=function(e,t,r){for(var n=[],o=0;o<e;o++)n[o]=0;return r.forEach(function(e){e.source&&(n[t[e.source]]+=1),e.target&&(n[t[e.target]]+=1)}),n};var l=function(e,t,r){var n=!1,o=e.length,i=1e-6;function a(e){return Math.abs(e)<i?0:e<0?-1:1}if(o<=2)return!1;for(var s=0;s<o;s++){var l=e[s],c=e[(s+1)%o];if(u(l,c,[t,r]))return!0;a(l[1]-r)>0!=a(c[1]-r)>0&&a(t-(r-l[1])*(l[0]-c[0])/(l[1]-c[1])-l[0])<0&&(n=!n)}return n};t.isPointInPolygon=l;var c=function(e,t){return!(t.minX>e.maxX||t.maxX<e.minX||t.minY>e.maxY||t.maxY<e.minY)};t.intersectBBox=c;t.isPolygonsIntersect=function(e,t){var r=function(e){var t=e.map(function(e){return e[0]}),r=e.map(function(e){return e[1]});return{minX:Math.min.apply(null,t),maxX:Math.max.apply(null,t),minY:Math.min.apply(null,r),maxY:Math.max.apply(null,r)}},n=function(e){for(var t=[],r=e.length,n=0;n<r-1;n++){var o=e[n],i=e[n+1];t.push({from:{x:o[0],y:o[1]},to:{x:i[0],y:i[1]}})}if(t.length>1){var a=e[0],s=e[r-1];t.push({from:{x:s[0],y:s[1]},to:{x:a[0],y:a[1]}})}return t};if(e.length<2||t.length<2)return!1;var i=r(e),a=r(t);if(!c(i,a))return!1;var u=!1;if((0,o.each)(t,function(t){if(l(e,t[0],t[1]))return u=!0,!1}),u)return!0;if((0,o.each)(e,function(e){if(l(t,e[0],e[1]))return u=!0,!1}),u)return!0;var f=n(e),h=n(t),p=!1;return(0,o.each)(h,function(e){if(function(e,t){var r=!1;return(0,o.each)(e,function(e){if(s(e.from,e.to,t.from,t.to))return r=!0,!1}),r}(f,e))return p=!0,!1}),p};var f=function(){function e(e,t,r,n){this.x1=e,this.y1=t,this.x2=r,this.y2=n}return e.prototype.getBBox=function(){var e=Math.min(this.x1,this.x2),t=Math.min(this.y1,this.y2),r=Math.max(this.x1,this.x2),n=Math.max(this.y1,this.y2);return{x:e,y:t,minX:e,minY:t,maxX:r,maxY:n,width:r-e,height:n-t}},e}();t.Line=f;var h=function(e,t){return{top:[e.minX,e.minY,e.maxX,e.minY],left:[e.minX,e.minY,e.minX,e.maxY],bottom:[e.minX,e.maxY,e.maxX,e.maxY],right:[e.maxX,e.minY,e.maxX,e.maxY]}[t]};t.getBBoxBoundLine=h;var p=function(e,t){var r=(t.x2-t.x1)*(e.y1-t.y1)-(t.y2-t.y1)*(e.x1-t.x1),n=(e.x2-e.x1)*(e.y1-t.y1)-(e.y2-e.y1)*(e.x1-t.x1),o=(t.y2-t.y1)*(e.x2-e.x1)-(t.x2-t.x1)*(e.y2-e.y1);if(o){var i=r/o,a=n/o;if(i>=0&&i<=1&&a>=0&&a<=1)return i}return Number.POSITIVE_INFINITY};t.itemIntersectByLine=function(e,t){for(var r=["top","left","bottom","right"],n=e.getBBox(),o=0,i=[],a=0;a<4;a++){var u=h(n,r[a]),l=u[0],c=u[1],f=u[2],p=u[3];i[a]=s({x:t.x1,y:t.y1},{x:t.x2,y:t.y2},{x:l,y:c},{x:f,y:p}),i[a]&&(o+=1)}return[i,o]};t.fractionToLine=function(e,t){for(var r=["top","left","bottom","right"],n=e.getBBox(),o=Number.POSITIVE_INFINITY,i=0,a=0;a<4;a++){var s=h(n,r[a]),u=s[0],l=s[1],c=s[2],d=s[3],y=p(t,new f(u,l,c,d));(y=Math.abs(y-.5))>=0&&y<=1&&(i+=1,o=y<o?y:o)}return 0===i?-1:o};t.getPointsCenter=function(e){var t=0,r=0;if(e.length>0){for(var n=0,o=e;n<o.length;n++){var i=o[n];t+=i.x,r+=i.y}t/=e.length,r/=e.length}return{x:t,y:r}};t.squareDist=function(e,t){return Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)};t.pointLineSquareDist=function(e,t){var r,n=t.x1,o=t.y1,i=t.x2-n,a=t.y2-o,s=e.x-n,u=e.y-o,l=s*i+u*a;r=l<=0?0:(l=(s=i-s)*i+(u=a-u)*a)<=0?0:l*l/(i*i+a*a);var c=s*s+u*u-r;return c<0&&(c=0),c};t.isPointsOverlap=function(e,t,r){return void 0===r&&(r=.001),Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)<Math.pow(r,2)};t.pointRectSquareDist=function(e,t){var r=e.x<t.x,n=e.x>t.x+t.width,o=e.y>t.y+t.height,i=e.y<t.y;if(!(r||n||o||i))return 0;if(o&&!r&&!n)return Math.pow(t.y+t.height-e.y,2);if(i&&!r&&!n)return Math.pow(e.y-t.y,2);if(r&&!o&&!i)return Math.pow(t.x-e.x,2);if(n&&!o&&!i)return Math.pow(t.x+t.width-e.x,2);var a=Math.min(Math.abs(t.x-e.x),Math.abs(t.x+t.width-e.x)),s=Math.min(Math.abs(t.y-e.y),Math.abs(t.y+t.height-e.y));return a*a+s*s};t.pointLineDistance=function(e,t){var r=e[0],o=e[1],i=e[2],a=e[3],s=t.x,u=t.y,l=[i-r,a-o];if(n.vec2.exactEquals(l,[0,0]))return NaN;var c=[-l[1],l[0]];n.vec2.normalize(c,c);var f=[s-r,u-o];return Math.abs(n.vec2.dot(f,c))};var d=function(e,t,r){return e+(t-e)*r};t.lerp=d;t.lerpArray=function(e,t,r){for(var n=Math.min(e.length,t.length),o=new Array(n),i=0;i<n;i++)o[i]=d(e[i],t[i],r);return o}},28362:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getStarPath=t.getSpline=t.getControlPoint=t.getClosedSpline=void 0,t.paddedHull=function(e,t){var r=e.length;if(!e||r<1)return"";if(1===r)return o=e,i=[o[0][0],o[0][1]-t],s=[o[0][0],o[0][1]+t],"M ".concat(i," A ").concat([t,t,"0,0,0",s].join(",")," A ").concat([t,t,"0,0,0",i].join(","));var o,i,s;if(2===r)return function(e){var r=u(e[0],e[1]),o=a(r,t),i=n.vec2.add([0,0],e[0],n.vec2.scale([0,0],o,-1)),s=n.vec2.add([0,0],e[1],o),l=1.2*t,c=a(n.vec2.normalize([0,0],r),l),f=n.vec2.scale([0,0],c,-1),h=n.vec2.add([0,0],i,f),p=n.vec2.add([0,0],s,f),d=n.vec2.add([0,0],i,c);return"M ".concat(i," C ").concat([h,p,s].join(",")," S ").concat([d,i].join(",")," Z")}(e);for(var l=e.map(function(t,o){var i=e[(o+1)%r];return{p:t,v:n.vec2.normalize([0,0],u(t,i))}}),c=0;c<l.length;++c){var f=c>0?c-1:r-1,h=n.vec2.normalize([0,0],n.vec2.add([0,0],l[f].v,n.vec2.scale([0,0],l[c].v,-1)));l[c].p=n.vec2.add([0,0],l[c].p,n.vec2.scale([0,0],h,t))}return l.map(function(e){var t=e.p;return{x:t[0],y:t[1]}})},t.pointsToPolygon=t.pathToPoints=void 0,t.roundedHull=function(e,t){if(!e||e.length<1)return"";if(1===e.length)return function(e){var r=[e[0][0],e[0][1]-t],n=[e[0][0],e[0][1]+t];return"M ".concat(r," A ").concat(t,",").concat(t,",0,0,0,").concat(n," A ").concat(t,",").concat(t,",0,0,0,").concat(r)}(e);if(2===e.length)return function(e){var r=n.vec2.scale([0,0],s(e[0],e[1]),t),o=n.vec2.scale([0,0],r,-1),i=n.vec2.add([0,0],e[0],r),a=n.vec2.add([0,0],e[1],r),u=n.vec2.add([0,0],e[1],o),l=n.vec2.add([0,0],e[0],o);return"M ".concat(i," L ").concat(a," A ").concat([t,t,"0,0,0",u].join(",")," L ").concat(l," A ").concat([t,t,"0,0,0",i].join(","))}(e);for(var r=new Array(e.length),o=0;o<r.length;++o){var i=0===o?e[e.length-1]:e[o-1],a=e[o],u=n.vec2.scale([0,0],s(i,a),t);r[o]=[n.vec2.add([0,0],i,u),n.vec2.add([0,0],a,u)]}var l="A ".concat([t,t,"0,0,0,"].join(","));return(r=r.map(function(e,t){var n="";return 0===t&&(n="M ".concat(r[r.length-1][1]," ")),n+="".concat(l+e[0]," L ").concat(e[1])})).join(" ")};var n=r(43708),o=r(73920),i=function(e,t){return e&&t?e.replace(/\\?\{([^{}]+)\}/g,function(e,r){if("\\"===e.charAt(0))return e.slice(1);var n=t[r];return 0===n&&(n="0"),n||""}):e};t.getSpline=function(e){var t=[];if(e.length<2)throw new Error("point length must largn than 2, now it's ".concat(e.length));for(var r=0,n=e;r<n.length;r++){var i=n[r],a=i.x,s=i.y;t.push(a),t.push(s)}var u=(0,o.catmullRom2Bezier)(t);return u.unshift(["M",e[0].x,e[0].y]),u};t.getControlPoint=function(e,t,r,o){void 0===r&&(r=0),void 0===o&&(o=0);var i={x:(1-r)*e.x+r*t.x,y:(1-r)*e.y+r*t.y},a=[0,0];n.vec2.normalize(a,[t.x-e.x,t.y-e.y]),a&&(a[0]||a[1])||(a=[0,0]);var s=[-a[1]*o,a[0]*o];return i.x+=s[0],i.y+=s[1],i};t.pointsToPolygon=function(e,t){var r=e.length;if(!r)return"";for(var n="",o=0;o<r;o++){var a=e[o];n+=i(0===o?"M{x} {y}":"L{x} {y}",a)}return t&&(n+="Z"),n};t.pathToPoints=function(e){var t=[];return e.forEach(function(e){if("A"!==e[0])for(var r=1;r<e.length;r+=2)t.push([e[r],e[r+1]]);else{var n=e.length;t.push([e[n-2],e[n-1]])}}),t};t.getClosedSpline=function(e){if(e.length<2)throw new Error("point length must largn than 2, now it's ".concat(e.length));var t=e[0],r=e[1],n=e[e.length-1],o=e[e.length-2];e.unshift(n),e.unshift(o),e.push(t),e.push(r);for(var i=[],a=1;a<e.length-2;a+=1){var s=e[a-1].x,u=e[a-1].y,l=e[a].x,c=e[a].y,f=e[a+1].x,h=e[a+1].y,p=l+(f-s)/6,d=c+(h-u)/6,y=f-((a!==e.length-2?e[a+2].x:f)-l)/6,v=h-((a!==e.length-2?e[a+2].y:h)-c)/6;i.push(["C",p,d,y,v,f,h])}return i.unshift(["M",n.x,n.y]),i};var a=function(e,t){return n.vec2.scale([0,0],n.vec2.normalize([0,0],e),t)},s=function(e,t){var r=[e[1]-t[1],t[0]-e[0]],n=Math.sqrt(r[0]*r[0]+r[1]*r[1]);if(0===n)throw new Error("p0 should not be equal to p1");return[r[0]/n,r[1]/n]},u=function(e,t){return[t[0]-e[0],t[1]-e[1]]};t.getStarPath=function(e,t){for(var r=[],n=0;n<5;n++){var o=Math.cos((18+72*n)/180*Math.PI)*e,i=Math.sin((18+72*n)/180*Math.PI)*e,a=Math.cos((54+72*n)/180*Math.PI)*t,s=Math.sin((54+72*n)/180*Math.PI)*t;0===n?r.push(["M",o,-i]):r.push(["L",o,-i]),r.push(["L",a,-s])}return r.push(["Z"]),r}},29001:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.singleDataValidation=t.dataValidation=void 0;var n=r(97582),o=r(31834),i=r(61592);t.dataValidation=function(e){if(!e)return console.error("G6 Error Tips: the data must be defined"),!1;var t=e.nodes,r=e.edges,a=e.combos,s=void 0===a?[]:a;if(!t&&!r){var u=!0;return(0,i.traverseTree)(e,function(e){return!!(0,o.isString)(e.id)||(u=!1,!1)}),u}var l=(t||[]).find(function(e){return!(0,o.isString)(e.id)});if(l)return console.warn("G6 Warning Tips: missing 'id' property, or %c".concat(l.id,"%c is not a string."),"font-size: 20px; color: red;",""),!1;var c=(t||[]).map(function(e){return e.id}),f=null===s||void 0===s?void 0:s.map(function(e){return e.id}),h=(0,n.__spreadArray)((0,n.__spreadArray)([],c,!0),f,!0),p=(r||[]).find(function(e){return!h.includes(e.source)||!h.includes(e.target)});return!p||(console.warn("G6 Warning Tips: The source %c".concat(p.source,"%c or the target %c").concat(p.target,"%c of the edge do not exist in the nodes or combos."),"font-size: 20px; color: red;","","font-size: 20px; color: red;",""),!1)};t.singleDataValidation=function(e,t){if("node"===e||"combo"===e){if(t.id&&!(0,o.isString)(t.id))return console.warn("G6 Warning Tips: missing 'id' property, or the 'id' %c".concat(t.id,"%c is not a string."),"font-size: 20px; color: red;",""),!1}else if(!("edge"!==e||t.source&&t.target))return console.warn("G6 Warning Tips: missing 'source' or 'target' for the edge."),!1;return!0}},61885:function(e,t,r){"use strict";r(79409)},58452:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.simplifyPolyline=t.removeRedundantPoint=t.removeFrom=t.reconstructPath=t.pathFinder=t.mergeBBox=t.isSegmentsIntersected=t.isSegmentCrossingBBox=t.isPointOutsideBBox=t.isHorizontalPort=t.isBending=t.isBBoxesOverlapping=t.heuristicCostEstimate=t.getSimplePolyline=t.getPolylinePoints=t.getPointsFromBBox=t.getPathWithBorderRadiusByPolyline=t.getNeighborPoints=t.getExpandedBBoxPoint=t.getExpandedBBox=t.getBorderRadiusPoints=t.getBBoxYCrossPoints=t.getBBoxXCrossPoints=t.getBBoxFromPoints=t.getBBoxFromPoint=t.getBBoxCrossPointsByPoint=t.filterConnectPoints=t.distance=t._costByPoints=t.SortedArray=void 0;var r=function(e){var t=e.x,r=e.y;return{x:t,y:r,centerX:t,centerY:r,minX:t,minY:r,maxX:t,maxY:r,height:0,width:0}};t.getBBoxFromPoint=r;var n=function(e){void 0===e&&(e=[]);var t=[],r=[];e.forEach(function(e){t.push(e.x),r.push(e.y)});var n=Math.min.apply(Math,t),o=Math.max.apply(Math,t),i=Math.min.apply(Math,r),a=Math.max.apply(Math,r);return{centerX:(n+o)/2,centerY:(i+a)/2,maxX:o,maxY:a,minX:n,minY:i,height:a-i,width:o-n}};t.getBBoxFromPoints=n;t.isBBoxesOverlapping=function(e,t){return 2*Math.abs(e.centerX-t.centerX)<e.width+t.width&&2*Math.abs(e.centerY-t.centerY)<e.height+t.height};var o=function(e){for(var t=[],r={},n=e.length-1;n>=0;n--){var o=e[n];o.id="".concat(o.x,"|||").concat(o.y),r[o.id]||(r[o.id]=o,t.push(o))}return t};t.filterConnectPoints=o;var i=function(e){return o(e)};t.simplifyPolyline=i;t.getSimplePolyline=function(e,t){return[e,{x:e.x,y:t.y},t]};var a=function(e,t){return e.width||e.height?{centerX:e.centerX,centerY:e.centerY,minX:e.minX-t,minY:e.minY-t,maxX:e.maxX+t,maxY:e.maxY+t,height:e.height+2*t,width:e.width+2*t}:e};t.getExpandedBBox=a;var s=function(e,t){var r=Math.abs(e.x-t.centerX),n=Math.abs(e.y-t.centerY);return 0===r&&0===n?0:r/t.width>n/t.height};t.isHorizontalPort=s;var u=function(e,t,r){var n=s(t,e);if(0===n){var o=e.centerX,i=e.centerY;return r.y<t.y?i=e.minY:r.x>t.x?o=e.maxX:r.x<t.x?o=e.minX:r.x===t.x&&(i=e.maxY),{x:o,y:i}}return n?{x:t.x>e.centerX?e.maxX:e.minX,y:t.y}:{x:t.x,y:t.y>e.centerY?e.maxY:e.minY}};t.getExpandedBBoxPoint=u;var l=function(e,t){var r=Math.min(e.minX,t.minX),n=Math.min(e.minY,t.minY),o=Math.max(e.maxX,t.maxX),i=Math.max(e.maxY,t.maxY);return{centerX:(r+o)/2,centerY:(n+i)/2,minX:r,minY:n,maxX:o,maxY:i,height:i-n,width:o-r}};t.mergeBBox=l;var c=function(e){return[{x:e.minX,y:e.minY},{x:e.maxX,y:e.minY},{x:e.maxX,y:e.maxY},{x:e.minX,y:e.maxY}]};t.getPointsFromBBox=c;var f=function(e,t){var r=e.x,n=e.y;return r<t.minX||r>t.maxX||n<t.minY||n>t.maxY};t.isPointOutsideBBox=f;var h=function(e,t){return t<e.minX||t>e.maxX?[]:[{x:t,y:e.minY},{x:t,y:e.maxY}]};t.getBBoxXCrossPoints=h;var p=function(e,t){return t<e.minY||t>e.maxY?[]:[{x:e.minX,y:t},{x:e.maxX,y:t}]};t.getBBoxYCrossPoints=p;var d=function(e,t){return h(e,t.x).concat(p(e,t.y))};t.getBBoxCrossPointsByPoint=d;var y=function(e,t){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)};t.distance=y;var v=function(e,t){var r=0;return t.forEach(function(t){t&&(e.x===t.x&&(r+=-2),e.y===t.y&&(r+=-2))}),r};t._costByPoints=v;var g=function(e,t,r,n,o){return y(e,t)+y(e,r)+v(e,[t,r,n,o])};t.heuristicCostEstimate=g;var m=function e(t,r,n,o,i){void 0===i&&(i=0),t.unshift(r[o]),n[o]&&n[o]!==o&&i<=100&&e(t,r,n,n[o],i+1)};t.reconstructPath=m;t.removeFrom=function(e,t){var r=e.indexOf(t);r>-1&&e.splice(r,1)};var b=function(e,t,r,n){var o=r.x-e.x,i=r.y-e.y,a=n.x-e.x,s=n.y-e.y,u=r.x-t.x,l=r.y-t.y,c=n.x-t.x,f=n.y-t.y;return(o*s-i*a)*(u*f-l*c)<=0&&(o*l-i*u)*(a*f-s*c)<=0};t.isSegmentsIntersected=b;var w=function(e,t,r){if(r.width||r.height){var n=c(r),o=n[0],i=n[1],a=n[2],s=n[3];return b(e,t,o,i)||b(e,t,o,s)||b(e,t,i,a)||b(e,t,a,s)}return!1};t.isSegmentCrossingBBox=w;var _=function(e,t,r,n){var i=[];return e.forEach(function(e){if(e!==t&&(e.x===t.x||e.y===t.y)){if(w(e,t,r)||w(e,t,n))return;i.push(e)}}),o(i)};t.getNeighborPoints=_;var x=function(e,t,r,n,o,i,a){var s,u=[],l=((s={})[t.id]=t,s),c={},f={},h={};f[t.id]=0,h[t.id]=g(t,r,t);var p=new P;p.add({id:t.id,value:h[t.id]});var d,v={};for(e.forEach(function(e){v[e.id]=e});Object.keys(l).length;){var b=p.minId(!1);if(!b)break;if((d=l[b])===r){var w=[];return m(w,v,c,r.id),w}delete l[d.id],p.remove(d.id),u.push(d);var x=_(e,d,n,o);x.forEach(function(e){if(-1===u.indexOf(e)){var n=e.id;l[n]||(l[n]=e);var o=h[d.id]+y(d,e);f[n]&&o>=f[n]?p.add({id:n,value:h[n]}):(c[n]=d.id,f[n]=o,h[n]=f[n]+g(e,r,t,i,a),p.add({id:n,value:h[n]}))}})}return[t,r]};t.pathFinder=x;var S=function(e,t,r){return!(e.x===t.x&&t.x===r.x||e.y===t.y&&t.y===r.y)};t.isBending=S;var O=function(e,t,r,n){var o=y(e,t),i=y(r,t);return o<n&&(n=o),i<n&&(n=i),[{x:t.x-n/o*(t.x-e.x),y:t.y-n/o*(t.y-e.y)},{x:t.x-n/i*(t.x-r.x),y:t.y-n/i*(t.y-r.y)}]};t.getBorderRadiusPoints=O;t.getPathWithBorderRadiusByPolyline=function(e,t){var r=[],n=e[0];return r.push("M".concat(n.x," ").concat(n.y)),e.forEach(function(n,o){var i=e[o+1],a=e[o+2];if(i&&a)if(S(n,i,a)){var s=O(n,i,a,t),u=s[0],l=s[1];r.push("L".concat(u.x," ").concat(u.y)),r.push("Q".concat(i.x," ").concat(i.y," ").concat(l.x," ").concat(l.y)),r.push("L".concat(l.x," ").concat(l.y))}else r.push("L".concat(i.x," ").concat(i.y));else i&&r.push("L".concat(i.x," ").concat(i.y))}),r.join("")};t.getPolylinePoints=function(e,t,s,h,p){var y,v;if(s&&s.getType())if("combo"===s.getType()){var g=s.getKeyShape().getBBox();if(g){var m=s.getModel(),b=m.x,w=m.y;(y={x:b,y:w,width:g.width,height:g.height,minX:g.minX+b,maxX:g.maxX+b,minY:g.minY+w,maxY:g.maxY+w}).centerX=(y.minX+y.maxX)/2,y.centerY=(y.minY+y.maxY)/2}else y=r(e)}else y=s&&s.getBBox();else y=r(e);if(h&&h.getType())if("combo"===h.getType()){var _=h.getKeyShape().getBBox();if(_){var S=h.getModel(),O=S.x,P=S.y;(v={x:O,y:P,width:_.width,height:_.height,minX:_.minX+O,maxX:_.maxX+O,minY:_.minY+P,maxY:_.maxY+P}).centerX=(v.minX+v.maxX)/2,v.centerY=(v.minY+v.maxY)/2}else v=r(t)}else v=h&&h.getBBox();else v=r(t);var E=a(y,p),k=a(v,p),M=u(E,e,t),C=u(k,t,e),j=n([M,C]),T=l(E,j),A=l(k,j),I=[];I=I.concat(c(T)).concat(c(A));var R={x:(e.x+t.x)/2,y:(e.y+t.y)/2};[j,T,A].forEach(function(e){I=I.concat(d(e,R).filter(function(e){return f(e,E)&&f(e,k)}))}),[{x:M.x,y:C.y},{x:C.x,y:M.y}].forEach(function(e){f(e,E)&&f(e,k)&&I.push(e)}),I.unshift(M),I.push(C),I=o(I);var L=x(I,M,C,y,v,e,t);return L.unshift(e),L.push(t),i(L)};t.removeRedundantPoint=function(e){if(!(null===e||void 0===e?void 0:e.length))return e;for(var t=e[e.length-1],r={x:t.x,y:t.y},n=[t],o=[t],i=e.length-2;i>=0;i--){var a,s=e[i];s.x===r.x?n.push(s):(n=[s],r.x=s.x),s.y===r.y?o.push(s):(o=[s],r.y=s.y),n.length>2?(a=e.indexOf(n[1]))>-1&&e.splice(a,1):o.length>2&&(a=e.indexOf(o[1]))>-1&&e.splice(a,1)}return e};var P=function(){function e(){this.arr=[],this.map={},this.arr=[],this.map={}}return e.prototype._innerAdd=function(e,t){for(var r=[0,t-1];r[1]-r[0]>1;){var n=Math.floor((r[0]+r[1])/2);if(this.arr[n].value>e.value)r[1]=n;else{if(!(this.arr[n].value<e.value))return this.arr.splice(n,0,e),void(this.map[e.id]=!0);r[0]=n}}this.arr.splice(r[1],0,e),this.map[e.id]=!0},e.prototype.add=function(e){delete this.map[e.id];var t=this.arr.length;return t?this.arr[t-1].value<e.value?(this.arr.push(e),void(this.map[e.id]=!0)):void this._innerAdd(e,t):(this.arr.push(e),void(this.map[e.id]=!0))},e.prototype.remove=function(e){this.map[e]&&delete this.map[e]},e.prototype._clearAndGetMinId=function(){for(var e,t=this.arr.length-1;t>=0;t--)this.map[this.arr[t].id]?e=this.arr[t].id:this.arr.splice(t,1);return e},e.prototype._findFirstId=function(){for(;this.arr.length;){var e=this.arr.shift();if(this.map[e.id])return e.id}},e.prototype.minId=function(e){return e?this._clearAndGetMinId():this._findFirstId()},e}();t.SortedArray=P},79409:function(e,t,r){"use strict";var n=r(97582),o=r(31834),i=r(48122),a=r(58452),s=r(79917);(0,i.registerEdge)("polyline",{options:{color:i.BaseGlobal.defaultEdge.color,size:i.BaseGlobal.defaultEdge.size,style:{radius:0,offset:15,x:0,y:0,stroke:i.BaseGlobal.defaultEdge.style.stroke,lineAppendWidth:i.BaseGlobal.defaultEdge.style.lineAppendWidth},labelCfg:{style:{fill:i.BaseGlobal.edgeLabel.style.fill,fontSize:i.BaseGlobal.edgeLabel.style.fontSize,fontFamily:i.BaseGlobal.windowFontFamily}},routeCfg:{obstacles:[],maxAllowedDirectionChange:Math.PI,maximumLoops:500,gridSize:10},stateStyles:(0,n.__assign)({},i.BaseGlobal.edgeStateStyles)},shapeType:"polyline",labelPosition:"center",drawShape:function(e,t){var r=this.getShapeStyle(e);0===r.radius&&delete r.radius;var n=t.addShape("path",{className:"edge-shape",name:"edge-shape",attrs:r});return t.shapeMap["edge-shape"]=n,n},getShapeStyle:function(e){var t=this.options.style,r={stroke:e.color},n=(0,o.mix)({},t,r,e.style);e=this.getPathPoints(e),this.radius=n.radius,this.offset=n.offset;var a=e.startPoint,s=e.endPoint,u=this.getControlPoints(e),l=[a];u&&(l=l.concat(u)),l.push(s);var c=e.sourceNode,f=e.targetNode,h=n.radius,p=this.options.routeCfg,d=(0,o.mix)({},p,e.routeCfg);d.offset=n.offset;var y=this.getPath(l,c,f,h,d,!Boolean(u));return((0,o.isArray)(y)&&y.length<=1||(0,o.isString)(y)&&-1===y.indexOf("L"))&&(y="M0 0, L0 0"),(isNaN(a.x)||isNaN(a.y)||isNaN(s.x)||isNaN(s.y))&&(y="M0 0, L0 0"),(0,o.mix)({},i.BaseGlobal.defaultEdge.style,n,{lineWidth:e.size,path:y})},updateShapeStyle:function(e,t){var r=t.getContainer();if(t.isVisible()){var n={stroke:e.color},i=r.shapeMap["edge-shape"]||r.find(function(e){return"edge-shape"===e.get("className")})||t.getKeyShape(),a=e.size,s=(e=this.getPathPoints(e)).startPoint,u=e.endPoint,l=this.getControlPoints(e),c=[s];l&&(c=c.concat(l)),c.push(u);var f=i.attr(),h=(0,o.mix)({},n,f,e.style),p=e.sourceNode,d=e.targetNode,y=h.radius,v=this.options.routeCfg,g=(0,o.mix)({},v,e.routeCfg);g.offset=h.offset;var m=this.getPath(c,p,d,y,g,!Boolean(l));((0,o.isArray)(m)&&m.length<=1||(0,o.isString)(m)&&-1===m.indexOf("L"))&&(m="M0 0, L0 0"),(isNaN(s.x)||isNaN(s.y)||isNaN(u.x)||isNaN(u.y))&&(m="M0 0, L0 0"),f.endArrow&&!1===h.endArrow&&(e.style.endArrow={path:""}),f.startArrow&&!1===h.startArrow&&(e.style.startArrow={path:""});var b=(0,o.mix)(n,i.attr(),{lineWidth:a,path:m},e.style);i&&i.attr(b)}},getPath:function(e,t,r,n,u,l){var c=u.offset,f=u.obstacles,h=u.simple;if(!c||e.length>2||!1===l){if(n)return(0,a.getPathWithBorderRadiusByPolyline)(e,n);var p=[];return(0,o.each)(e,function(e,t){0===t?p.push(["M",e.x,e.y]):p.push(["L",e.x,e.y])}),p}!1===h||(null===f||void 0===f?void 0:f.length)||(h=!0);var d=h?(0,a.getPolylinePoints)(e[e.length-1],e[0],r,t,c):(0,s.pathFinder)(e[0],e[e.length-1],t,r,u);return d&&d.length?n?(0,a.getPathWithBorderRadiusByPolyline)(d,n):(d=(0,a.removeRedundantPoint)(d),i.Util.pointsToPolygon(d)):"M0 0, L0 0"}},"single-edge")},79917:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pathFinder=t.octolinearCfg=void 0;var n=r(48122),o=r(31834),i=r(58452),a={offset:20,maxAllowedDirectionChange:Math.PI/2,maximumLoops:2e3,gridSize:10,directions:[{stepX:1,stepY:0},{stepX:-1,stepY:0},{stepX:0,stepY:1},{stepX:0,stepY:-1}],get penalties(){return{0:0,45:this.gridSize/2,90:this.gridSize/2}},distFunc:function(e,t){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)},fallbackRoute:function(e,t,r,n,o){return(0,i.simplifyPolyline)((0,i.getPolylinePoints)(e,t,r,n,o.offset))}},s={maxAllowedDirectionChange:Math.PI/4,directions:[{stepX:1,stepY:0},{stepX:1,stepY:1},{stepX:0,stepY:1},{stepX:-1,stepY:1},{stepX:-1,stepY:0},{stepX:-1,stepY:-1},{stepX:0,stepY:-1},{stepX:1,stepY:-1}],distFunc:function(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))},fallbackRoute:function(e,t){return[e,t]}};t.octolinearCfg=s;var u=function(e,t){var r=Math.round(Math.abs(e/t));return r<0?0:(e<0?-1:1)*r},l=function(e,t){var r=t.x-e.x,n=t.y-e.y;return r||n?Math.atan2(n,r):0},c=function(e,t){var r=Math.abs(e-t);return r>Math.PI?2*Math.PI-r:r},f=function(e,t,r){for(var n=1/0,o=0,i=t.length;o<i;o++){var a=r(e,t[o]);a<n&&(n=a)}return n},h=function(e,t,r,o,a){var s=[];if(!r)return[e];var l=a.directions,c=a.offset,f=r.getBBox(),h=t.x>f.minX&&t.x<f.maxX&&t.y>f.minY&&t.y<f.maxY,p=(0,i.getExpandedBBox)(f,c);for(var d in p)p[d]=u(p[d],a.gridSize);if(h){for(var y=0,v=l;y<v.length;y++){var g=v[y],m=[[{x:p.minX,y:p.minY},{x:p.maxX,y:p.minY}],[{x:p.minX,y:p.minY},{x:p.minX,y:p.maxY}],[{x:p.maxX,y:p.minY},{x:p.maxX,y:p.maxY}],[{x:p.minX,y:p.maxY},{x:p.maxX,y:p.maxY}]];for(d=0;d<4;d++){var b=m[d],w=n.Util.getLineIntersect(e,{x:e.x+g.stepX*p.width,y:e.y+g.stepY*p.height},b[0],b[1]);w&&!(0,i.isSegmentCrossingBBox)(e,w,f)&&(w.id="".concat(w.x,"|||").concat(w.y),s.push(w))}}return s}var _=(0,i.getExpandedBBoxPoint)(p,e,o);return _.id="".concat(_.x,"|||").concat(_.y),[_]},p=function(e,t,r,n){var o=l(e,t),i=r[e.id];if(!i){var a=l(n,e);return c(a,o)}var s=l({x:i.x,y:i.y},e);return c(s,o)},d=function(e,t,r,n,o,i,a){var s=[n],u=n,l=e.id,c=e.x,f=e.y,h={x:c,y:f,id:l};p(h,i,t,r)&&(u={x:i.x===n.x?n.x:h.x*a,y:i.y===n.y?n.y:h.y*a},s.unshift(u));for(var d=t[l];d&&d.id!==l;){var y={x:c,y:f,id:l},v={x:d.x,y:d.y,id:d.id};p(v,y,t,r)&&(u={x:v.x===y.x?u.x:v.x*a,y:v.y===y.y?u.y:v.y*a},s.unshift(u)),c=v.x,f=v.y,d=t[l=v.id]}return s[0].x=c===r.x?o.x:u.x,s[0].y=f===r.y?o.y:u.y,s.unshift(o),s};t.pathFinder=function(e,t,r,n,s){if(isNaN(e.x)||isNaN(t.x))return[];var l=(0,o.deepMix)(a,s);l.obstacles=l.obstacles||[];var c=l.penalties,y=l.gridSize,v=function(e,t,r){var n={};return e.forEach(function(e){if(e)for(var o=(0,i.getExpandedBBox)(e.getBBox(),r),a=u(o.minX,t);a<=u(o.maxX,t);a+=1)for(var s=u(o.minY,t);s<=u(o.maxY,t);s+=1)n["".concat(a,"|||").concat(s)]=!0}),n}(l.obstacles.concat([r,n]),y,l.offset),g={x:u(e.x,y),y:u(e.y,y)},m={x:u(t.x,y),y:u(t.y,y)};e.id="".concat(g.x,"|||").concat(g.y),t.id="".concat(m.x,"|||").concat(m.y);var b=h(g,e,r,m,l),w=h(m,t,n,g,l);b.forEach(function(e){delete v[e.id]}),w.forEach(function(e){delete v[e.id]});for(var _={},x={},S={},O={},P={},E=new i.SortedArray,k=0;k<b.length;k++){var M=b[k];_[M.id]=M,O[M.id]=0,P[M.id]=f(M,w,l.distFunc),E.add({id:M.id,value:P[M.id]})}var C,j,T,A,I,R,L=l.maximumLoops,N=1/0,D={};for(w.forEach(function(e){D["".concat(e.x,"|||").concat(e.y)]=!0}),Object.keys(_).forEach(function(e){var t=_[e].id;P[t]<=N&&(N=P[t],C=_[t])});Object.keys(_).length>0&&L>0;){var B=E.minId((L+1)%30==0);if(!B)break;if(C=_[B],D["".concat(C.x,"|||").concat(C.y)])return d(C,S,g,t,e,m,y);for(delete _[C.id],E.remove(C.id),x[C.id]=!0,k=0;k<l.directions.length;k++){j=l.directions[k];var F="".concat(Math.round(C.x)+j.stepX,"|||").concat(Math.round(C.y)+j.stepY);if(T={x:C.x+j.stepX,y:C.y+j.stepY,id:F},!x[F]&&!((R=p(C,T,S,g))>l.maxAllowedDirectionChange||v[F])){_[F]||(_[F]=T);var G=c[R];A=l.distFunc(C,T)+(isNaN(G)?y:G),I=O[C.id]+A;var z=O[F];z&&I>=z||(S[F]=C,O[F]=I,P[F]=I+f(T,w,l.distFunc),E.add({id:F,value:P[F]}))}}L-=1}return l.fallbackRoute(e,t,r,n,l)}},27509:function(e,t,r){"use strict";r(48476),r(61885)},68891:function(e,t,r){"use strict";var n=r(97582),o=r(48122),i=r(31834);(0,o.registerNode)("circle",{options:{size:o.BaseGlobal.defaultNode.size,style:{x:0,y:0,stroke:o.BaseGlobal.defaultNode.style.stroke,fill:o.BaseGlobal.defaultNode.style.fill,lineWidth:o.BaseGlobal.defaultNode.style.lineWidth},labelCfg:{style:{fill:o.BaseGlobal.nodeLabel.style.fill,fontSize:o.BaseGlobal.nodeLabel.style.fontSize,fontFamily:o.BaseGlobal.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:o.BaseGlobal.defaultNode.linkPoints.size,lineWidth:o.BaseGlobal.defaultNode.linkPoints.lineWidth,fill:o.BaseGlobal.defaultNode.linkPoints.fill,stroke:o.BaseGlobal.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:(0,n.__assign)({},o.BaseGlobal.nodeStateStyles)},shapeType:"circle",labelPosition:"center",drawShape:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).icon,o=void 0===r?{}:r,a=this.getShapeStyle(e),s=(0,i.deepMix)({},o,e.icon),u="".concat(this.type,"-keyShape"),l=t.addShape("circle",{attrs:a,className:u,name:u,draggable:!0});t.shapeMap[u]=l;var c=s.width,f=s.height,h=s.show,p=s.text;if(h){var d="".concat(this.type,"-icon");t.shapeMap[d]=p?t.addShape("text",{attrs:(0,n.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},s),className:d,name:d,draggable:!0}):t.addShape("image",{attrs:(0,n.__assign)({x:-c/2,y:-f/2},s),className:d,name:d,draggable:!0})}return this.drawLinkPoints(e,t),l},drawLinkPoints:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).linkPoints;if(r){var o=r||{},i=o.top,a=o.left,s=o.right,u=o.bottom,l=o.size,c=o.r,f=(0,n.__rest)(o,["top","left","right","bottom","size","r"]),h=this.getSize(e)[0]/2;if(a){var p="link-point-left";t.shapeMap[p]=t.addShape("circle",{attrs:(0,n.__assign)((0,n.__assign)({},f),{x:-h,y:0,r:l/2||c||5}),className:p,name:p,isAnchorPoint:!0})}if(s){var d="link-point-right";t.shapeMap[d]=t.addShape("circle",{attrs:(0,n.__assign)((0,n.__assign)({},f),{x:h,y:0,r:l/2||c||5}),className:d,name:d,isAnchorPoint:!0})}if(i){var y="link-point-top";t.shapeMap[y]=t.addShape("circle",{attrs:(0,n.__assign)((0,n.__assign)({},f),{x:0,y:-h,r:l/2||c||5}),className:y,name:y,isAnchorPoint:!0})}if(u){var v="link-point-bottom";t.shapeMap[v]=t.addShape("circle",{attrs:(0,n.__assign)((0,n.__assign)({},f),{x:0,y:h,r:l/2||c||5}),className:v,name:v,isAnchorPoint:!0})}}},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,r={stroke:e.color},o=(0,i.deepMix)({},t,r),a=this.getSize(e)[0]/2;return(0,n.__assign)({x:0,y:0,r:a},o)},update:function(e,t,r){var o=t.getContainer(),i=this.getSize(e),a=(0,n.__assign)({},e.style);void 0===e.style.stroke&&e.color&&(a.stroke=e.color),void 0!==e.style.r||isNaN(i[0])||(a.r=i[0]/2),this.updateShape(e,t,a,!0,r),this.updateLinkPoints(e,o)}},"single-node")},1359:function(e,t,r){"use strict";var n=r(97582),o=r(48122),i=r(31834);(0,o.registerNode)("diamond",{options:{size:[80,80],style:{stroke:o.BaseGlobal.defaultNode.style.stroke,fill:o.BaseGlobal.defaultNode.style.fill,lineWidth:o.BaseGlobal.defaultNode.style.lineWidth},labelCfg:{style:{fill:o.BaseGlobal.nodeLabel.style.fill,fontSize:o.BaseGlobal.nodeLabel.style.fontSize,fontFamily:o.BaseGlobal.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:o.BaseGlobal.defaultNode.linkPoints.size,lineWidth:o.BaseGlobal.defaultNode.linkPoints.lineWidth,fill:o.BaseGlobal.defaultNode.linkPoints.fill,stroke:o.BaseGlobal.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:(0,n.__assign)({},o.BaseGlobal.nodeStateStyles)},shapeType:"diamond",labelPosition:"center",drawShape:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).icon,o=void 0===r?{}:r,i=this.getShapeStyle(e),a=t.addShape("path",{attrs:i,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});t.shapeMap["".concat(this.type,"-keyShape")]=a;var s=o.width,u=o.height,l=o.show,c=o.text;return l&&(t.shapeMap["".concat(this.type,"-icon")]=c?t.addShape("text",{attrs:(0,n.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},o),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0}):t.addShape("image",{attrs:(0,n.__assign)({x:-s/2,y:-u/2},o),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0})),this.drawLinkPoints(e,t),a},drawLinkPoints:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).linkPoints,o=void 0===r?{}:r,i=o.top,a=o.left,s=o.right,u=o.bottom,l=o.size,c=o.r,f=(0,n.__rest)(o,["top","left","right","bottom","size","r"]),h=this.getSize(e),p=h[0],d=h[1];a&&(t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:(0,n.__assign)((0,n.__assign)({},f),{x:-p/2,y:0,r:l/2||c||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),s&&(t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:(0,n.__assign)((0,n.__assign)({},f),{x:p/2,y:0,r:l/2||c||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),i&&(t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:(0,n.__assign)((0,n.__assign)({},f),{x:0,y:-d/2,r:l/2||c||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),u&&(t.shapeMap["link-point-bottom"]=t.addShape("circle",{attrs:(0,n.__assign)((0,n.__assign)({},f),{x:0,y:d/2,r:l/2||c||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0}))},getPath:function(e){var t=this.getSize(e),r=t[0],n=t[1];return[["M",0,-n/2],["L",r/2,0],["L",0,n/2],["L",-r/2,0],["Z"]]},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,r={stroke:e.color},o=(0,i.mix)({},t,r),a=this.getPath(e);return(0,n.__assign)({path:a},o)},update:function(e,t,r){var n=t.getContainer(),o=this.getOptions({}).style,a=this.getPath(e),s={stroke:e.color,path:a},u=t.get("keyShape"),l=(0,i.mix)({},o,u.attr(),s);l=(0,i.mix)(l,e.style),this.updateShape(e,t,l,!0,r),this.updateLinkPoints(e,n)}},"single-node")},41775:function(e,t,r){"use strict";var n=r(97582),o=r(48122),i=r(31834),a=o.Util.defaultSubjectColors;(0,o.registerNode)("donut",{options:{size:o.BaseGlobal.defaultNode.size,style:{x:0,y:0,stroke:o.BaseGlobal.defaultNode.style.stroke,fill:o.BaseGlobal.defaultNode.style.fill,lineWidth:o.BaseGlobal.defaultNode.style.lineWidth},labelCfg:{style:{fill:o.BaseGlobal.nodeLabel.style.fill,fontSize:o.BaseGlobal.nodeLabel.style.fontSize,fontFamily:o.BaseGlobal.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:o.BaseGlobal.defaultNode.linkPoints.size,lineWidth:o.BaseGlobal.defaultNode.linkPoints.lineWidth,fill:o.BaseGlobal.defaultNode.linkPoints.fill,stroke:o.BaseGlobal.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:(0,n.__assign)({},o.BaseGlobal.nodeStateStyles)},shapeType:"circle",labelPosition:"center",drawShape:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).icon,o=void 0===r?{}:r,a=this.getShapeStyle(e),u=(0,i.deepMix)({},o,e.icon),l=t.addShape("circle",{attrs:a,className:"".concat(this.type,"-keyShape"),draggable:!0,name:"".concat(this.type,"-keyShape")});t.shapeMap["".concat(this.type,"-keyShape")]=l;var c=u.width,f=u.height,h=u.show,p=u.text;return h&&(t.shapeMap["".concat(this.type,"-icon")]=p?t.addShape("text",{attrs:(0,n.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},u),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0}):t.addShape("image",{attrs:(0,n.__assign)({x:-c/2,y:-f/2},u),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0})),s(e,t,l),this.drawLinkPoints(e,t),l},updateShape:function(e,t,r,o,i){var a=t.get("keyShape");a.attr((0,n.__assign)({},r)),l(e,t,a),this.updateLabel(e,t,i),o&&this.updateIcon(e,t)}},"circle");var s=function(e,t,r){var n=e.donutAttrs,o=void 0===n?{}:n,i=e.donutColorMap,a=void 0===i?{}:i,s=Object.keys(o).length;if(o&&s>1){var l=c(o,a),h=l.configs,p=l.totalValue;if(p){var d=f(r),y=d.lineWidth,v=d.arcR,g=[v,0],m=0;if(1===s)return void u(t,{arcR:v,arcBegin:g,beginAngle:m,config:h[0],fanIndex:0,lineWidth:y,totalValue:p,drawWhole:!0});for(var b=0;b<h.length;b++){var w=u(t,{arcR:v,arcBegin:g,beginAngle:m,config:h[b],fanIndex:b,lineWidth:y,totalValue:p});if(w.shouldEnd)return;g=w.arcBegin,m=w.beginAngle}}}},u=function(e,t){var r,n,o,i=t.arcR,s=t.arcBegin,u=t.beginAngle,l=t.config,c=t.fanIndex,f=t.lineWidth,h=t.totalValue,p=t.drawWhole,d=void 0!==p&&p,y=t.updateShape,v=void 0===y?void 0:y,g=l.value/h;if(g<.001)return{beginAngle:u,arcBegin:s,shape:void 0,shouldEnd:!1};if(d||g>.999)r=[i,1e-4],o=1;else{var m=g*Math.PI*2;n=u+m,r=[i*Math.cos(n),-i*Math.sin(n)],o=m>Math.PI?1:0}var b={path:[["M",s[0],s[1]],["A",i,i,0,o,0,r[0],r[1]]],stroke:l.color||(null===v||void 0===v?void 0:v.attr("stroke"))||a[c%a.length],lineWidth:f};return v?v.attr(b):e.shapeMap["".concat("fan-shape-").concat(c)]=e.addShape("path",{attrs:b,name:"".concat("fan-shape-").concat(c),draggable:!0}),{beginAngle:n,arcBegin:r,shape:e.shapeMap["".concat("fan-shape-").concat(c)],shouldEnd:d||g>.999}},l=function(e,t,r){var n=e.donutAttrs,o=e.donutColorMap,i=void 0===o?{}:o,a={},s=t.getContainer();if(n){var l=c(n,i),h=l.configs,p=l.totalValue;if(p)for(var d=f(r),y=d.lineWidth,v=d.arcR,g=[v,0],m=0,b=0;b<h.length;b++){var w="".concat("fan-shape-").concat(b),_=u(s,{arcR:v,arcBegin:g,beginAngle:m,config:h[b],fanIndex:b,lineWidth:y,totalValue:p,drawWhole:1===h.length,updateShape:s.shapeMap[w]});if(_.shape&&(a[w]=!0),_.shouldEnd)break;g=_.arcBegin,m=_.beginAngle}}Object.keys(s.shapeMap).filter(function(e){return e.includes("fan-shape-")}).forEach(function(e){a[e]||(s.shapeMap[e].remove(!0),delete s.shapeMap[e])})},c=function(e,t){var r=0,n=[];return Object.keys(e).forEach(function(o){var i=+e[o];isNaN(i)||(n.push({key:o,value:i,color:t[o]}),r+=i)}),{totalValue:r,configs:n}},f=function(e){var t=e.attr("r"),r=.6*t;return{lineWidth:t-r,arcR:(t+r)/2}}},27983:function(e,t,r){"use strict";var n=r(97582),o=r(48122),i=r(31834);(0,o.registerNode)("ellipse",{options:{size:[80,40],style:{x:0,y:0,stroke:o.BaseGlobal.defaultNode.style.stroke,fill:o.BaseGlobal.defaultNode.style.fill,lineWidth:o.BaseGlobal.defaultNode.style.lineWidth},labelCfg:{style:{fill:o.BaseGlobal.nodeLabel.style.fill,fontSize:o.BaseGlobal.nodeLabel.style.fontSize,fontFamily:o.BaseGlobal.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:o.BaseGlobal.defaultNode.linkPoints.size,lineWidth:o.BaseGlobal.defaultNode.linkPoints.lineWidth,fill:o.BaseGlobal.defaultNode.linkPoints.fill,stroke:o.BaseGlobal.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:(0,n.__assign)({},o.BaseGlobal.nodeStateStyles)},shapeType:"ellipse",labelPosition:"center",drawShape:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).icon,o=void 0===r?{}:r,i=this.getShapeStyle(e),a=t.addShape("ellipse",{attrs:i,className:"ellipse-keyShape",name:"ellipse-keyShape",draggable:!0});t.shapeMap["ellipse-keyShape"]=a;var s=o.width,u=o.height,l=o.show,c=o.text;return l&&(t.shapeMap["".concat(this.type,"-icon")]=c?t.addShape("text",{attrs:(0,n.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},o),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0}):t.addShape("image",{attrs:(0,n.__assign)({x:-s/2,y:-u/2},o),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0})),this.drawLinkPoints(e,t),a},drawLinkPoints:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).linkPoints,o=void 0===r?{}:r,i=o.top,a=o.left,s=o.right,u=o.bottom,l=o.size,c=o.r,f=(0,n.__rest)(o,["top","left","right","bottom","size","r"]),h=this.getSize(e),p=h[0]/2,d=h[1]/2;a&&(t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:(0,n.__assign)((0,n.__assign)({},f),{x:-p,y:0,r:l/2||c||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),s&&(t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:(0,n.__assign)((0,n.__assign)({},f),{x:p,y:0,r:l/2||c||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),i&&(t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:(0,n.__assign)((0,n.__assign)({},f),{x:0,y:-d,r:l/2||c||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),u&&(t.shapeMap["link-point-bottom"]=t.addShape("circle",{attrs:(0,n.__assign)((0,n.__assign)({},f),{x:0,y:d,r:l/2||c||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0}))},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,r={stroke:e.color},o=(0,i.mix)({},t,r),a=this.getSize(e),s=a[0]/2,u=a[1]/2;return(0,n.__assign)({x:0,y:0,rx:s,ry:u},o)},update:function(e,t,r){var n=t.getContainer(),o=this.getOptions({}).style,a=this.getSize(e),s={stroke:e.color,rx:a[0]/2,ry:a[1]/2},u=t.get("keyShape"),l=(0,i.mix)({},o,u.attr(),s);l=(0,i.mix)(l,e.style),this.updateShape(e,t,l,!0,r),this.updateLinkPoints(e,n)}},"single-node")},48476:function(e,t,r){"use strict";r(68891),r(57676),r(27983),r(1359),r(99764),r(16125),r(13556),r(41775)},16125:function(e,t,r){"use strict";var n=r(97582),o=r(31834),i=r(48122);(0,i.registerNode)("modelRect",{options:{size:[185,70],style:{radius:5,stroke:"#69c0ff",fill:"#ffffff",lineWidth:i.BaseGlobal.defaultNode.style.lineWidth,fillOpacity:1},labelCfg:{style:{fill:"#595959",fontSize:14,fontFamily:i.BaseGlobal.windowFontFamily},offset:30},descriptionCfg:{style:{fontSize:12,fill:"#bfbfbf",fontFamily:i.BaseGlobal.windowFontFamily},paddingTop:0},preRect:{show:!0,width:4,fill:"#40a9ff",radius:2},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:10,lineWidth:1,fill:"#72CC4A",stroke:"#72CC4A"},logoIcon:{show:!0,x:0,y:0,img:"https://gw.alipayobjects.com/zos/basement_prod/4f81893c-1806-4de4-aff3-9a6b266bc8a2.svg",width:16,height:16,offset:0},stateIcon:{show:!0,x:0,y:0,img:"https://gw.alipayobjects.com/zos/basement_prod/300a2523-67e0-4cbf-9d4a-67c077b40395.svg",width:16,height:16,offset:-5},anchorPoints:[[0,.5],[1,.5]]},shapeType:"modelRect",drawShape:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).preRect,o=void 0===r?{}:r,i=this.getShapeStyle(e),a=this.getSize(e),s=a[0],u=a[1],l=t.addShape("rect",{attrs:i,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});t.shapeMap["".concat(this.type,"-keyShape")]=l;var c=o.show,f=(0,n.__rest)(o,["show"]);return c&&(t.shapeMap["pre-rect"]=t.addShape("rect",{attrs:(0,n.__assign)({x:-s/2,y:-u/2,height:u},f),className:"pre-rect",name:"pre-rect",draggable:!0})),this.drawLogoIcon(e,t),this.drawStateIcon(e,t),this.drawLinkPoints(e,t),l},drawLogoIcon:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).logoIcon,o=void 0===r?{}:r,i=this.getSize(e)[0];if(o.show){var a=o.width,s=o.height,u=o.x,l=o.y,c=o.offset,f=o.text,h=(0,n.__rest)(o,["width","height","x","y","offset","text"]);t.shapeMap["rect-logo-icon"]=f?t.addShape("text",{attrs:(0,n.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},h),className:"rect-logo-icon",name:"rect-logo-icon",draggable:!0}):t.addShape("image",{attrs:(0,n.__assign)((0,n.__assign)({},h),{x:u||-i/2+a+c,y:l||-s/2,width:a,height:s}),className:"rect-logo-icon",name:"rect-logo-icon",draggable:!0})}},drawStateIcon:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).stateIcon,o=void 0===r?{}:r,i=this.getSize(e)[0];if(o.show){var a=o.width,s=o.height,u=o.x,l=o.y,c=o.offset,f=o.text,h=(0,n.__rest)(o,["width","height","x","y","offset","text"]);t.shapeMap["rect-state-icon"]=f?t.addShape("text",{attrs:(0,n.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},h),className:"rect-state-icon",name:"rect-state-icon",draggable:!0}):t.addShape("image",{attrs:(0,n.__assign)((0,n.__assign)({},h),{x:u||i/2-a+c,y:l||-s/2,width:a,height:s}),className:"rect-state-icon",name:"rect-state-icon",draggable:!0})}},drawLinkPoints:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).linkPoints,o=void 0===r?{}:r,i=o.top,a=o.left,s=o.right,u=o.bottom,l=o.size,c=o.r,f=(0,n.__rest)(o,["top","left","right","bottom","size","r"]),h=this.getSize(e),p=h[0],d=h[1];a&&(t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:(0,n.__assign)((0,n.__assign)({},f),{x:-p/2,y:0,r:l/2||c||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),s&&(t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:(0,n.__assign)((0,n.__assign)({},f),{x:p/2,y:0,r:l/2||c||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),i&&(t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:(0,n.__assign)((0,n.__assign)({},f),{x:0,y:-d/2,r:l/2||c||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),u&&(t.shapeMap["link-point-bottom"]=t.addShape("circle",{attrs:(0,n.__assign)((0,n.__assign)({},f),{x:0,y:d/2,r:l/2||c||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0}))},drawLabel:function(e,t){var r=this.getOptions(e),i=r.labelCfg,a=void 0===i?{}:i,s=r.logoIcon,u=void 0===s?{}:s,l=r.descriptionCfg,c=void 0===l?{}:l,f=this.getSize(e)[0],h=null,p=u.show,d=u.width,y=-f/2+a.offset;p&&(y=-f/2+d+a.offset);var v=a.style,g=c.style,m=c.paddingTop;return(0,o.isString)(e.description)?(h=t.addShape("text",{attrs:(0,n.__assign)((0,n.__assign)({},v),{x:y,y:-5,text:e.label}),className:"text-shape",name:"text-shape",draggable:!0,labelRelated:!0}),t.shapeMap["text-shape"]=h,t.shapeMap["rect-description"]=t.addShape("text",{attrs:(0,n.__assign)((0,n.__assign)({},g),{x:y,y:17+(m||0),text:e.description}),className:"rect-description",name:"rect-description",draggable:!0,labelRelated:!0})):(h=t.addShape("text",{attrs:(0,n.__assign)((0,n.__assign)({},v),{x:y,y:7,text:e.label}),className:"text-shape",name:"text-shape",draggable:!0,labelRelated:!0}),t.shapeMap["text-shape"]=h),h},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,r={stroke:e.color},i=(0,o.mix)({},t,r),a=this.getSize(e),s=i.width||a[0],u=i.height||a[1];return(0,n.__assign)({x:-s/2,y:-u/2,width:s,height:u},i)},update:function(e,t){var r=this.mergeStyle||this.getOptions(e),i=r.style,a=void 0===i?{}:i,s=r.labelCfg,u=void 0===s?{}:s,l=r.descriptionCfg,c=void 0===l?{}:l,f=this.getSize(e),h=f[0],p=f[1];t.get("keyShape").attr((0,n.__assign)((0,n.__assign)({},a),{x:-h/2,y:-p/2,width:h,height:p}));var d=t.getContainer(),y=d.shapeMap["rect-logo-icon"]||d.find(function(e){return"rect-logo-icon"===e.get("className")}),v=y?y.attr():{},g=(0,o.mix)({},v,e.logoIcon),m=g.width;void 0===m&&(m=this.options.logoIcon.width);var b=e.logoIcon?e.logoIcon.show:void 0,w=u.offset,_=-h/2+m+w;b||void 0===b||(_=-h/2+w);var x=d.shapeMap["node-label"]||d.find(function(e){return"node-label"===e.get("className")}),S=d.shapeMap["rect-description"]||d.find(function(e){return"rect-description"===e.get("className")});if(e.label)if(x){var O=e.labelCfg?e.labelCfg.style:{},P=(0,o.mix)({},x.attr(),O);e.label&&(P.text=e.label),P.x=_,(0,o.isString)(e.description)&&(P.y=-5),S&&(S.resetMatrix(),S.attr({x:_})),x.resetMatrix(),x.attr(P)}else d.shapeMap["node-label"]=d.addShape("text",{attrs:(0,n.__assign)((0,n.__assign)({},u.style),{x:_,y:e.description?-5:7,text:e.label}),className:"node-label",name:"node-label",draggable:!0,labelRelated:!0});if((0,o.isString)(e.description)){var E=c.paddingTop;if(S){O=e.descriptionCfg?e.descriptionCfg.style:{};var k=(0,o.mix)({},S.attr(),O);(0,o.isString)(e.description)&&(k.text=e.description),k.x=_,S.resetMatrix(),S.attr((0,n.__assign)((0,n.__assign)({},k),{y:17+(E||0)}))}else d.shapeMap["rect-description"]=d.addShape("text",{attrs:(0,n.__assign)((0,n.__assign)({},c.style),{x:_,y:17+(E||0),text:e.description}),className:"rect-description",name:"rect-description",draggable:!0,labelRelated:!0})}var M=d.shapeMap["pre-rect"]||d.find(function(e){return"pre-rect"===e.get("className")});if(M&&!M.destroyed){var C=(0,o.mix)({},M.attr(),e.preRect);M.attr((0,n.__assign)((0,n.__assign)({},C),{x:-h/2,y:-p/2,height:p}))}if(y&&!y.destroyed)if(b||void 0===b){var j=g.width,T=g.height,A=g.x,I=g.y,R=g.offset,L=(0,n.__rest)(g,["width","height","x","y","offset"]);y.attr((0,n.__assign)((0,n.__assign)({},L),{x:A||-h/2+j+R,y:I||-T/2,width:j,height:T}))}else y.remove(),delete d.shapeMap["pre-rect"];else b&&this.drawLogoIcon(e,d);var N=d.shapeMap["rect-state-icon"]||d.find(function(e){return"rect-state-icon"===e.get("className")}),D=N?N.attr():{},B=(0,o.mix)({},D,e.stateIcon);if(N){B.show||void 0===B.show||(N.remove(),delete d.shapeMap["rect-state-icon"]);var F=B.width,G=(T=B.height,A=B.x,I=B.y,B.offset),z=(0,n.__rest)(B,["width","height","x","y","offset"]);N.attr((0,n.__assign)((0,n.__assign)({},z),{x:A||h/2-F+G,y:I||-T/2,width:F,height:T}))}else B.show&&this.drawStateIcon(e,d);this.updateLinkPoints(e,d)},getOptions:function(e,t){return"move"===t?e:(0,o.deepMix)({},this.options,this.getCustomConfig(e)||{},e)}},"single-node")},57676:function(e,t,r){"use strict";var n=r(97582),o=r(31834),i=r(48122);(0,i.registerNode)("rect",{options:{size:[100,30],style:{radius:0,stroke:i.BaseGlobal.defaultNode.style.stroke,fill:i.BaseGlobal.defaultNode.style.fill,lineWidth:i.BaseGlobal.defaultNode.style.lineWidth},labelCfg:{style:{fill:i.BaseGlobal.nodeLabel.style.fill,fontSize:i.BaseGlobal.nodeLabel.style.fontSize,fontFamily:i.BaseGlobal.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:i.BaseGlobal.defaultNode.linkPoints.size,lineWidth:i.BaseGlobal.defaultNode.linkPoints.lineWidth,fill:i.BaseGlobal.defaultNode.linkPoints.fill,stroke:i.BaseGlobal.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},anchorPoints:[[0,.5],[1,.5]],stateStyles:(0,n.__assign)({},i.BaseGlobal.nodeStateStyles)},shapeType:"rect",labelPosition:"center",drawShape:function(e,t){var r=this.getShapeStyle(e),n=t.addShape("rect",{attrs:r,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});return t.shapeMap["".concat(this.type,"-keyShape")]=n,this.drawLinkPoints(e,t),n},drawLinkPoints:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).linkPoints,o=void 0===r?{}:r,i=o.top,a=o.left,s=o.right,u=o.bottom,l=o.size,c=o.r,f=(0,n.__rest)(o,["top","left","right","bottom","size","r"]),h=this.getSize(e),p=h[0],d=h[1];a&&(t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:(0,n.__assign)((0,n.__assign)({},f),{x:-p/2,y:0,r:l/2||c||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),s&&(t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:(0,n.__assign)((0,n.__assign)({},f),{x:p/2,y:0,r:l/2||c||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),i&&(t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:(0,n.__assign)((0,n.__assign)({},f),{x:0,y:-d/2,r:l/2||c||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),u&&(t.shapeMap["link-point-bottom"]=t.addShape("circle",{attrs:(0,n.__assign)((0,n.__assign)({},f),{x:0,y:d/2,r:l/2||c||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0}))},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,r={stroke:e.color},i=(0,o.mix)({},t,r),a=this.getSize(e),s=i.width||a[0],u=i.height||a[1];return(0,n.__assign)({x:-s/2,y:-u/2,width:s,height:u},i)},update:function(e,t,r){var n=t.getContainer(),i=this.getOptions({}).style,a=this.getSize(e),s=t.get("keyShape");e.size||(a[0]=s.attr("width")||i.width,a[1]=s.attr("height")||i.height);var u={stroke:e.color,x:-a[0]/2,y:-a[1]/2,width:a[0],height:a[1]},l=(0,o.mix)({},i,s.attr(),u);l=(0,o.mix)(l,e.style),this.updateShape(e,t,l,!1,r),this.updateLinkPoints(e,n)}},"single-node")},13556:function(e,t,r){"use strict";var n=r(97582),o=r(48122),i=r(31834);(0,o.registerNode)("star",{options:{size:60,style:{stroke:o.BaseGlobal.defaultNode.style.stroke,fill:o.BaseGlobal.defaultNode.style.fill,lineWidth:o.BaseGlobal.defaultNode.style.lineWidth},labelCfg:{style:{fill:o.BaseGlobal.nodeLabel.style.fill,fontSize:o.BaseGlobal.nodeLabel.style.fontSize,fontFamily:o.BaseGlobal.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:o.BaseGlobal.defaultNode.linkPoints.size,lineWidth:o.BaseGlobal.defaultNode.linkPoints.lineWidth,fill:o.BaseGlobal.defaultNode.linkPoints.fill,stroke:o.BaseGlobal.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:(0,n.__assign)({},o.BaseGlobal.nodeStateStyles)},shapeType:"star",labelPosition:"center",drawShape:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).icon,o=void 0===r?{}:r,i=this.getShapeStyle(e),a=t.addShape("path",{attrs:i,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});t.shapeMap["".concat(this.type,"-keyShape")]=a;var s=o.width,u=o.height,l=o.show,c=o.text;return l&&(t.shapeMap["".concat(this.type,"-icon")]=c?t.addShape("text",{attrs:(0,n.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},o),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0}):t.addShape("image",{attrs:(0,n.__assign)({x:-s/2,y:-u/2},o),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0})),this.drawLinkPoints(e,t),a},drawLinkPoints:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).linkPoints,o=void 0===r?{}:r,i=o.top,a=o.left,s=o.right,u=o.leftBottom,l=o.rightBottom,c=o.size,f=o.r,h=(0,n.__rest)(o,["top","left","right","leftBottom","rightBottom","size","r"]),p=this.getSize(e)[0];if(s){var d=Math.cos(.1*Math.PI)*p,y=Math.sin(.1*Math.PI)*p;t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:(0,n.__assign)((0,n.__assign)({},h),{x:d,y:-y,r:c/2||f||5}),className:"link-point-right",name:"link-point-right"})}if(i){d=Math.cos(.5*Math.PI)*p,y=Math.sin(.5*Math.PI)*p;t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:(0,n.__assign)((0,n.__assign)({},h),{x:d,y:-y,r:c/2||f||5}),className:"link-point-top",name:"link-point-top"})}if(a){d=Math.cos(.9*Math.PI)*p,y=Math.sin(.9*Math.PI)*p;t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:(0,n.__assign)((0,n.__assign)({},h),{x:d,y:-y,r:c/2||f||5}),className:"link-point-left",name:"link-point-left"})}if(u){d=Math.cos(1.3*Math.PI)*p,y=Math.sin(1.3*Math.PI)*p;t.shapeMap["link-point-bottom"]=t.addShape("circle",{attrs:(0,n.__assign)((0,n.__assign)({},h),{x:d,y:-y,r:c/2||f||5}),className:"link-point-left-bottom",name:"link-point-left-bottom"})}if(l){d=Math.cos(1.7*Math.PI)*p,y=Math.sin(1.7*Math.PI)*p;t.shapeMap["link-point-right-bottom"]=t.addShape("circle",{attrs:(0,n.__assign)((0,n.__assign)({},h),{x:d,y:-y,r:c/2||f||5}),className:"link-point-right-bottom",name:"link-point-right-bottom"})}},getPath:function(e){var t=this.getSize(e)[0],r=3*t/8,n=e.innerR||r;return o.Util.getStarPath(t,n)},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,r={stroke:e.color},o=(0,i.mix)({},t,r),a=this.getPath(e);return(0,n.__assign)({path:a},o)},update:function(e,t,r){var n=t.getContainer(),o=this.getOptions({}).style,a=this.getPath(e),s={stroke:e.color,path:a},u=t.get("keyShape"),l=(0,i.mix)({},o,u.attr(),s);l=(0,i.mix)(l,e.style),this.updateShape(e,t,l,!0,r),this.updateLinkPoints(e,n)},updateLinkPoints:function(e,t){var r=this.getOptions({}).linkPoints,o=t.shapeMap["link-point-left"]||t.find(function(e){return"link-point-left"===e.get("className")}),a=t.shapeMap["link-point-right"]||t.find(function(e){return"link-point-right"===e.get("className")}),s=t.shapeMap["link-point-top"]||t.find(function(e){return"link-point-top"===e.get("className")}),u=t.shapeMap["link-point-left-bottom"]||t.find(function(e){return"link-point-left-bottom"===e.get("className")}),l=t.shapeMap["link-point-left-bottom"]||t.find(function(e){return"link-point-right-bottom"===e.get("className")}),c=r,f=o||a||s||u||l;f&&(c=f.attr());var h=(0,i.mix)({},c,e.linkPoints),p=h.fill,d=h.stroke,y=h.lineWidth,v=h.size/2;v||(v=h.r);var g=e.linkPoints?e.linkPoints:{left:void 0,right:void 0,top:void 0,leftBottom:void 0,rightBottom:void 0},m=g.left,b=g.right,w=g.top,_=g.leftBottom,x=g.rightBottom,S=this.getSize(e)[0],O={r:v,fill:p,stroke:d,lineWidth:y},P=Math.cos(.1*Math.PI)*S,E=Math.sin(.1*Math.PI)*S;a?b||void 0===b?a.attr((0,n.__assign)((0,n.__assign)({},O),{x:P,y:-E})):(a.remove(),delete t.shapeMap["link-point-right"]):b&&(t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:(0,n.__assign)((0,n.__assign)({},O),{x:P,y:-E}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),P=Math.cos(.5*Math.PI)*S,E=Math.sin(.5*Math.PI)*S,s?w||void 0===w?s.attr((0,n.__assign)((0,n.__assign)({},O),{x:P,y:-E})):(s.remove(),delete t.shapeMap["link-point-top"]):w&&(t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:(0,n.__assign)((0,n.__assign)({},O),{x:P,y:-E}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),P=Math.cos(.9*Math.PI)*S,E=Math.sin(.9*Math.PI)*S,o?m||void 0===m?o.attr((0,n.__assign)((0,n.__assign)({},O),{x:P,y:-E})):(o.remove(),delete t.shapeMap["link-point-left"]):m&&(t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:(0,n.__assign)((0,n.__assign)({},O),{x:P,y:-E}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),P=Math.cos(1.3*Math.PI)*S,E=Math.sin(1.3*Math.PI)*S,u?_||void 0===_?u.attr((0,n.__assign)((0,n.__assign)({},O),{x:P,y:-E})):(u.remove(),delete t.shapeMap["link-point-left-bottom"]):_&&(t.shapeMap["link-point-left-bottom"]=t.addShape("circle",{attrs:(0,n.__assign)((0,n.__assign)({},O),{x:P,y:-E}),className:"link-point-left-bottom",name:"link-point-left-bottom",isAnchorPoint:!0})),P=Math.cos(1.7*Math.PI)*S,E=Math.sin(1.7*Math.PI)*S,l?x||void 0===x?l.attr((0,n.__assign)((0,n.__assign)({},O),{x:P,y:-E})):(l.remove(),delete t.shapeMap["link-point-right-bottom"]):x&&(t.shapeMap["link-point-right-bottom"]=t.addShape("circle",{attrs:(0,n.__assign)((0,n.__assign)({},O),{x:P,y:-E}),className:"link-point-right-bottom",name:"link-point-right-bottom",isAnchorPoint:!0}))}},"single-node")},99764:function(e,t,r){"use strict";var n=r(97582),o=r(48122),i=r(31834);(0,o.registerNode)("triangle",{options:{size:40,direction:"up",style:{stroke:o.BaseGlobal.defaultNode.style.stroke,fill:o.BaseGlobal.defaultNode.style.fill,lineWidth:o.BaseGlobal.defaultNode.style.lineWidth},labelCfg:{style:{fill:o.BaseGlobal.nodeLabel.style.fill,fontSize:o.BaseGlobal.nodeLabel.style.fontSize},offset:15},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:o.BaseGlobal.defaultNode.linkPoints.size,lineWidth:o.BaseGlobal.defaultNode.linkPoints.lineWidth,fill:o.BaseGlobal.defaultNode.linkPoints.fill,stroke:o.BaseGlobal.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20,offset:6},stateStyles:(0,n.__assign)({},o.BaseGlobal.nodeStateStyles)},shapeType:"triangle",labelPosition:"bottom",drawShape:function(e,t){var r=this.mergeStyle||this.getOptions(e),o=r.icon,i=void 0===o?{}:o,a=r.direction,s=this.getShapeStyle(e),u=e.direction||a,l=t.addShape("path",{attrs:s,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});t.shapeMap["".concat(this.type,"-keyShape")]=l;var c=i.width,f=i.height,h=i.show,p=i.offset,d=i.text;if(h)if(d)t.shapeMap["".concat(this.type,"-icon")]=t.addShape("text",{attrs:(0,n.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},i),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0});else{var y=-c/2,v=-f/2;"up"!==u&&"down"!==u||(v+=p),"left"!==u&&"right"!==u||(y+=p),t.shapeMap["".concat(this.type,"-icon")]=t.addShape("image",{attrs:(0,n.__assign)({x:y,y:v},i),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0})}return this.drawLinkPoints(e,t),l},drawLinkPoints:function(e,t){var r=this.mergeStyle||this.getOptions(e),o=r.linkPoints,i=void 0===o?{}:o,a=r.direction,s=e.direction||a,u=i.top,l=i.left,c=i.right,f=i.bottom,h=i.size,p=i.r,d=(0,n.__rest)(i,["top","left","right","bottom","size","r"]),y=this.getSize(e)[0];if(l){var v=null,g=y*Math.sin(1/3*Math.PI),m=y*Math.sin(1/3*Math.PI);"up"===s?v=[-m,g]:"down"===s?v=[-m,-g]:"left"===s&&(v=[-m,m-g]),v&&(t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:(0,n.__assign)((0,n.__assign)({},d),{x:v[0],y:v[1],r:h/2||p||5}),className:"link-point-left",name:"link-point-left"}))}if(c){var b=null;g=y*Math.sin(1/3*Math.PI),m=y*Math.sin(1/3*Math.PI);"up"===s?b=[m,g]:"down"===s?b=[m,-g]:"right"===s&&(b=[m,m-g]),b&&(t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:(0,n.__assign)((0,n.__assign)({},d),{x:b[0],y:b[1],r:h/2||p||5}),className:"link-point-right",name:"link-point-right"}))}if(u){var w=null;g=y*Math.sin(1/3*Math.PI),m=y*Math.sin(1/3*Math.PI);"up"===s?w=[m-g,-g]:"left"===s?w=[m,-g]:"right"===s&&(w=[-m,-g]),w&&(t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:(0,n.__assign)((0,n.__assign)({},d),{x:w[0],y:w[1],r:h/2||p||5}),className:"link-point-top",name:"link-point-top"}))}if(f){var _=null;g=y*Math.sin(1/3*Math.PI),m=y*Math.sin(1/3*Math.PI);"down"===s?_=[-m+g,g]:"left"===s?_=[m,g]:"right"===s&&(_=[-m,g]),_&&(t.shapeMap["link-point-bottom"]=t.addShape("circle",{attrs:(0,n.__assign)((0,n.__assign)({},d),{x:_[0],y:_[1],r:h/2||p||5}),className:"link-point-bottom",name:"link-point-bottom"}))}},getPath:function(e){var t=(this.mergeStyle||this.getOptions(e)).direction,r=e.direction||t,n=this.getSize(e)[0],o=n*Math.sin(1/3*Math.PI),i=n*Math.sin(1/3*Math.PI),a=[["M",-i,o],["L",0,-o],["L",i,o],["Z"]];return"down"===r?a=[["M",-i,-o],["L",i,-o],["L",0,o],["Z"]]:"left"===r?a=[["M",-i,i-o],["L",i,-i],["L",i,i],["Z"]]:"right"===r&&(a=[["M",i,i-o],["L",-i,i],["L",-i,-i],["Z"]]),a},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,r={stroke:e.color},o=(0,i.mix)({},t,r),a=this.getPath(e);return(0,n.__assign)({path:a},o)},update:function(e,t,r){var n=t.getContainer(),o=this.getOptions({}).style,a=this.getPath(e),s={stroke:e.color,path:a},u=t.get("keyShape"),l=(0,i.mix)({},o,u.attr(),s);l=(0,i.mix)(l,e.style),this.updateShape(e,t,l,!0,r),this.updateLinkPoints(e,n)},updateLinkPoints:function(e,t){var r=this.getOptions({}),o=r.linkPoints,a=r.direction,s=e.direction||a,u=t.shapeMap["link-point-left"]||t.find(function(e){return"link-point-left"===e.get("className")}),l=t.shapeMap["link-point-right"]||t.find(function(e){return"link-point-right"===e.get("className")}),c=t.shapeMap["link-point-top"]||t.find(function(e){return"link-point-top"===e.get("className")}),f=t.shapeMap["link-point-bottom"]||t.find(function(e){return"link-point-bottom"===e.get("className")}),h=o,p=u||l||c||f;p&&(h=p.attr());var d=(0,i.mix)({},h,e.linkPoints),y=d.fill,v=d.stroke,g=d.lineWidth,m=d.size/2;m||(m=d.r);var b=e.linkPoints?e.linkPoints:{left:void 0,right:void 0,top:void 0,bottom:void 0},w=b.left,_=b.right,x=b.top,S=b.bottom,O=this.getSize(e)[0],P={r:m,fill:y,stroke:v,lineWidth:g},E=null,k=O*Math.sin(1/3*Math.PI),M=O*Math.sin(1/3*Math.PI);"up"===s?E=[-M,k]:"down"===s?E=[-M,-k]:"left"===s&&(E=[-M,M-k]),E&&(u?w||void 0===w?u.attr((0,n.__assign)((0,n.__assign)({},P),{x:E[0],y:E[1]})):(u.remove(),delete t.shapeMap["link-point-left"]):w&&(t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:(0,n.__assign)((0,n.__assign)({},P),{x:E[0],y:E[1]}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})));var C=null;"up"===s?C=[M,k]:"down"===s?C=[M,-k]:"right"===s&&(C=[M,M-k]),C&&(l?_||void 0===_?l.attr((0,n.__assign)((0,n.__assign)({},P),{x:C[0],y:C[1]})):(l.remove(),delete t.shapeMap["link-point-right"]):_&&(t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:(0,n.__assign)((0,n.__assign)({},P),{x:C[0],y:C[1]}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})));var j=null;"up"===s?j=[M-k,-k]:"left"===s?j=[M,-k]:"right"===s&&(j=[-M,-k]),j&&(c?x||void 0===x?c.attr((0,n.__assign)((0,n.__assign)({},P),{x:j[0],y:j[1]})):(c.remove(),delete t.shapeMap["link-point-top"]):x&&(t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:(0,n.__assign)((0,n.__assign)({},P),{x:j[0],y:j[1]}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})));var T=null;"down"===s?T=[-M+k,k]:"left"===s?T=[M,k]:"right"===s&&(T=[-M,k]),T&&(f?S||void 0===S?f.attr((0,n.__assign)((0,n.__assign)({},P),{x:T[0],y:T[1]})):(f.remove(),delete t.shapeMap["link-point-bottom"]):S&&(t.shapeMap["link-point-bottom"]=t.addShape("circle",{attrs:(0,n.__assign)((0,n.__assign)({},P),{x:T[0],y:T[1]}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0})))}},"single-node")},61125:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(31834),o={getDefaultCfg:function(){return{trigger:"mouseenter",activeState:"active",inactiveState:"inactive",resetSelected:!1,shouldUpdate:function(){return!0}}},getEvents:function(){return"mouseenter"===this.get("trigger")?{"node:mouseenter":"setAllItemStates","combo:mouseenter":"setAllItemStates","node:mouseleave":"clearActiveState","combo:mouseleave":"clearActiveState"}:{"node:click":"setAllItemStates","combo:click":"setAllItemStates","canvas:click":"clearActiveState","node:touchstart":"setOnTouchStart","combo:touchstart":"setOnTouchStart","canvas:touchstart":"clearOnTouchStart"}},setOnTouchStart:function(e){try{var t=e.originalEvent.touches,r=t[0],n=t[1];if(r&&n)return;e.preventDefault()}catch(e){console.warn("Touch original event not exist!")}this.setAllItemStates(e)},clearOnTouchStart:function(e){try{var t=e.originalEvent.touches,r=t[0],n=t[1];if(r&&n)return;e.preventDefault()}catch(e){console.warn("Touch original event not exist!")}this.clearActiveState(e)},setAllItemStates:function(e){clearTimeout(this.timer),this.throttleSetAllItemStates(e,this)},clearActiveState:function(e){var t=this;this.timer=setTimeout(function(){t.throttleClearActiveState(e,t)},50)},throttleSetAllItemStates:(0,n.throttle)(function(e,t){var r=e.item,n=t.graph;if(n&&!n.destroyed&&(t.item=r,t.shouldUpdate(e.item,{event:e,action:"activate"},t))){for(var o=t.activeState,i=t.inactiveState,a=n.getNodes(),s=n.getCombos(),u=n.getEdges(),l=n.get("vedges"),c=a.length,f=s.length,h=u.length,p=l.length,d=t.inactiveItems||{},y=t.activeItems||{},v=0;v<c;v++){var g=a[v],m=g.getID(),b=g.hasState("selected");t.resetSelected&&b&&n.setItemState(g,"selected",!1),y[m]&&(n.setItemState(g,o,!1),delete y[m]),i&&!d[m]&&(n.setItemState(g,i,!0),d[m]=g)}for(v=0;v<f;v++){var w=s[v],_=w.getID();b=w.hasState("selected");t.resetSelected&&b&&n.setItemState(w,"selected",!1),y[_]&&(n.setItemState(w,o,!1),delete y[_]),i&&!d[_]&&(n.setItemState(w,i,!0),d[_]=w)}for(v=0;v<h;v++){y[k=(E=u[v]).getID()]&&(n.setItemState(E,o,!1),delete y[k]),i&&!d[k]&&(n.setItemState(E,i,!0),d[k]=E)}for(v=0;v<p;v++){var x=l[v],S=x.getID();y[S]&&(n.setItemState(x,o,!1),delete y[S]),i&&!d[S]&&(n.setItemState(x,i,!0),d[S]=x)}if(r&&!r.destroyed){i&&(n.setItemState(r,i,!1),delete d[r.getID()]),y[r.getID()]||(n.setItemState(r,o,!0),y[r.getID()]=r);var O=r.getEdges(),P=O.length;for(v=0;v<P;v++){var E,k=(E=O[v]).getID(),M=void 0,C=(M=E.getSource()===r?E.getTarget():E.getSource()).getID();i&&d[C]&&(n.setItemState(M,i,!1),delete d[C]),y[C]||(n.setItemState(M,o,!0),y[C]=M),d[k]&&(n.setItemState(E,i,!1),delete d[k]),y[k]||(n.setItemState(E,o,!0),y[k]=E),E.toFront()}}t.activeItems=y,t.inactiveItems=d,n.emit("afteractivaterelations",{item:e.item,action:"activate"})}},50,{trailing:!0,leading:!0}),throttleClearActiveState:(0,n.throttle)(function(e,t){var r=t.get("graph");if(r&&!r.destroyed&&t.shouldUpdate(e.item,{event:e,action:"deactivate"},t)){var n=t.activeState,o=t.inactiveState,i=t.activeItems||{},a=t.inactiveItems||{};Object.values(i).filter(function(e){return!e.destroyed}).forEach(function(e){r.clearItemStates(e,n)}),Object.values(a).filter(function(e){return!e.destroyed}).forEach(function(e){r.clearItemStates(e,o)}),t.activeItems={},t.inactiveItems={},r.emit("afteractivaterelations",{item:e.item||t.get("item"),action:"deactivate"})}},50,{trailing:!0,leading:!0})};t.default=o},46625:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=Math.min,n=Math.max,o=Math.abs,i=["drag","shift","ctrl","alt","control"],a={getDefaultCfg:function(){return{brushStyle:{fill:"#EEF6FF",fillOpacity:.4,stroke:"#DDEEFE",lineWidth:1},onSelect:function(){},onDeselect:function(){},selectedState:"selected",trigger:"shift",includeEdges:!0,includeCombos:!1,selectedEdges:[],selectedNodes:[],selectedCombos:[]}},getEvents:function(){return i.indexOf(this.trigger.toLowerCase())>-1||(this.trigger="shift",console.warn("Behavior brush-select ç trigger åæ°ä¸åæ³ï¼è¯·è¾å¥ 'drag'ã'shift'ã'ctrl' æ 'alt'")),"drag"===this.trigger?{dragstart:"onMouseDown",drag:"onMouseMove",dragend:"onMouseUp","canvas:click":"clearStates"}:{dragstart:"onMouseDown",drag:"onMouseMove",dragend:"onMouseUp","canvas:click":"clearStates",keyup:"onKeyUp",keydown:"onKeyDown"}},onMouseDown:function(e){var t=e.item,r=this.brush;t||("drag"===this.trigger||this.keydown)&&(this.selectedNodes&&0!==this.selectedNodes.length&&this.clearStates(),r||(r=this.createBrush()),this.originPoint={x:e.canvasX,y:e.canvasY},r.attr({width:0,height:0}),r.show(),this.dragging=!0)},onMouseMove:function(e){this.dragging&&("drag"===this.trigger||this.keydown)&&this.updateBrush(e)},onMouseUp:function(e){this.graph;(this.brush||this.dragging)&&("drag"===this.trigger||this.keydown)&&(this.brush.remove(!0),this.brush=null,this.getSelectedNodes(e),this.dragging=!1)},clearStates:function(){var e=this.graph,t=this.selectedState,r=e.findAllByState("node",t),n=e.findAllByState("edge",t),o=e.findAllByState("combo",t);r.forEach(function(r){return e.setItemState(r,t,!1)}),n.forEach(function(r){return e.setItemState(r,t,!1)}),o.forEach(function(r){return e.setItemState(r,t,!1)}),this.selectedNodes=[],this.selectedEdges=[],this.selectedCombos=[],this.onDeselect&&this.onDeselect(this.selectedNodes,this.selectedEdges,this.selectedCombos),e.emit("nodeselectchange",{selectedItems:{nodes:[],edges:[],combos:[]},select:!1})},isBBoxCenterInRect:function(e,t,r,n,o){var i=e.getBBox();return i.centerX>=t&&i.centerX<=r&&i.centerY>=n&&i.centerY<=o},getSelectedNodes:function(e){var t=this,o=this.graph,i=this.originPoint,a=this.shouldUpdate,s=this.isBBoxCenterInRect,u=this.selectedState,l={x:e.x,y:e.y},c=o.getPointByCanvas(i.x,i.y),f=r(l.x,c.x),h=n(l.x,c.x),p=r(l.y,c.y),d=n(l.y,c.y),y=[],v=[];o.getNodes().forEach(function(e){if(e.isVisible()&&s(e,f,h,p,d)&&a(e,"select",t)){y.push(e);var r=e.getModel();v.push(r.id),o.setItemState(e,u,!0)}});var g=[];this.includeEdges&&y.forEach(function(e){e.getOutEdges().forEach(function(e){if(e.isVisible()){var r=e.getModel(),n=r.source,i=r.target;v.includes(n)&&v.includes(i)&&a(e,"select",t)&&(g.push(e),o.setItemState(e,t.selectedState,!0))}})});var m=[];this.includeCombos&&o.getCombos().forEach(function(e){if(e.isVisible()&&s(e,f,h,p,d)&&a(e,"select",t)){m.push(e);var r=e.getModel();v.push(r.id),o.setItemState(e,u,!0)}}),this.selectedEdges=g,this.selectedNodes=y,this.selectedCombos=m,this.onSelect&&this.onSelect(y,g,m),o.emit("nodeselectchange",{selectedItems:{nodes:y,edges:g,combos:m},select:!0})},createBrush:function(){var e=this.graph.get("canvas").addShape("rect",{attrs:this.brushStyle,capture:!1,name:"brush-shape"});return this.brush=e,this.delegate=e,e},updateBrush:function(e){var t=this.originPoint;this.brush.attr({width:o(e.canvasX-t.x),height:o(e.canvasY-t.y),x:r(e.canvasX,t.x),y:r(e.canvasY,t.y)})},onKeyDown:function(e){var t=e.key;if(t){var r=this.trigger.toLowerCase(),n=t.toLowerCase();this.keydown=n===r||"control"===n&&"ctrl"===r||"ctrl"===n&&"control"===r}},onKeyUp:function(){this.brush&&(this.brush.remove(!0),this.brush=null,this.dragging=!1),this.keydown=!1}};t.default=a},14789:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(31834),o=["shift","ctrl","alt","control"],i={getDefaultCfg:function(){return{multiple:!0,trigger:"shift",selectedState:"selected",selectNode:!0,selectEdge:!1,selectCombo:!0}},getEvents:function(){return o.indexOf(this.trigger.toLowerCase())>-1||(this.trigger="shift",console.warn("Behavior click-select ç trigger åæ°ä¸åæ³ï¼è¯·è¾å¥ 'drag'ã'shift'ã'ctrl' æ 'alt'")),this.multiple?{"node:click":"onClick","combo:click":"onClick","edge:click":"onClick","canvas:click":"onCanvasClick",keyup:"onKeyUp",keydown:"onKeyDown"}:{"node:click":"onClick","combo:click":"onClick","edge:click":"onClick","canvas:click":"onCanvasClick"}},onClick:function(e){var t=this,r=e.item;if(r&&!r.destroyed){var o=r.getType(),i=t.graph,a=t.keydown,s=t.multiple,u=t.shouldUpdate;if((0,t.shouldBegin)(e,t)){if(!a||!s){var l=i.findAllByState("node",t.selectedState).concat(i.findAllByState("edge",t.selectedState)).concat(i.findAllByState("combo",t.selectedState));(0,n.each)(l,function(e){e!==r&&i.setItemState(e,t.selectedState,!1)})}if(function(){switch(o){case"node":return t.selectNode;case"edge":return t.selectEdge;case"combo":return t.selectCombo;default:return!1}}())if(r.hasState(t.selectedState)){u(e,t)&&i.setItemState(r,t.selectedState,!1);c=i.findAllByState("node",t.selectedState),f=i.findAllByState("edge",t.selectedState),h=i.findAllByState("combo",t.selectedState);i.emit("nodeselectchange",{target:r,selectedItems:{nodes:c,edges:f,combos:h},select:!1})}else{u(e,t)&&i.setItemState(r,t.selectedState,!0);c=i.findAllByState("node",t.selectedState),f=i.findAllByState("edge",t.selectedState),h=i.findAllByState("combo",t.selectedState);i.emit("nodeselectchange",{target:r,selectedItems:{nodes:c,edges:f,combos:h},select:!0})}else{var c=i.findAllByState("node",t.selectedState),f=i.findAllByState("edge",t.selectedState),h=i.findAllByState("combo",t.selectedState);i.emit("nodeselectchange",{selectedItems:{nodes:c,edges:f,combos:h},select:!1})}}}},onCanvasClick:function(e){var t=this,r=this.graph;if((0,this.shouldBegin)(e,this)){var o=r.findAllByState("node",this.selectedState);(0,n.each)(o,function(e){r.setItemState(e,t.selectedState,!1)});var i=r.findAllByState("edge",this.selectedState);(0,n.each)(i,function(e){r.setItemState(e,t.selectedState,!1)});var a=r.findAllByState("combo",this.selectedState);(0,n.each)(a,function(e){r.setItemState(e,t.selectedState,!1)}),r.emit("nodeselectchange",{selectedItems:{nodes:[],edges:[],combos:[]},select:!1})}},onKeyDown:function(e){var t=e.key;t&&(t.toLowerCase()===this.trigger.toLowerCase()||"control"===t.toLowerCase()?this.keydown=!0:this.keydown=!1)},onKeyUp:function(){this.keydown=!1}};t.default=i},96852:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=["click","dblclick"],n={getDefaultCfg:function(){return{trigger:"dblclick",relayout:!0}},getEvents:function(){var e,t;return r.includes(this.trigger)?t=this.trigger:(t="dblclick",console.warn("Behavior collapse-expand-group ç trigger åæ°ä¸åæ³ï¼è¯·è¾å¥ 'click' æ 'dblclick'")),(e={})["combo:".concat(t)]="onComboClick",e},onComboClick:function(e){var t=e.item,r=this.graph,n=this.relayout;if(t&&!t.destroyed&&"combo"===t.getType()){var o=t.getModel().id;o&&(r.collapseExpandCombo(o),n&&r.get("layout")?r.layout():r.refreshPositions())}}};t.default=n},82426:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=["click","dblclick"],n={getDefaultCfg:function(){return{trigger:"click",onChange:function(){}}},getEvents:function(){var e,t;return r.includes(this.trigger)?t=this.trigger:(t="click",console.warn("Behavior collapse-expand ç trigger åæ°ä¸åæ³ï¼è¯·è¾å¥ 'click' æ 'dblclick'")),(e={})["node:".concat(t)]="onNodeClick",e.touchstart="onNodeClick",e},onNodeClick:function(e){var t=this;if("click"===this.trigger){if(this.timer)return clearTimeout(this.timer),void(this.timer=0);this.timer=setTimeout(function(){t.toggle(e),clearTimeout(t.timer),t.timer=0},200)}else this.toggle(e)},toggle:function(e){var t=e.item;if(t){var r=this.graph.findDataById(t.get("id"));if(r){var n=r.children;if(n&&0!==n.length){var o=!r.collapsed;this.shouldBegin(e,o,this)&&(r.collapsed=o,t.getModel().collapsed=o,this.graph.emit("itemcollapsed",{item:e.item,collapsed:o}),this.shouldUpdate(e,o,this)&&(this.onChange(t,o,this),this.graph.layout()))}}}}};t.default=n},15120:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(97582),o=r(31834),i=["click","drag"],a=["shift","ctrl","control","alt","meta",void 0],s={getDefaultCfg:function(){return{trigger:"click",key:void 0,edgeConfig:{},getEdgeConfig:void 0}},getEvents:function(){var e;return i.indexOf(this.trigger.toLowerCase())>-1||(this.trigger="click",console.warn("Behavior create-edge ç trigger åæ°ä¸åæ³ï¼è¯·è¾å¥ 'click'ï¼'drag'")),this.key&&-1===a.indexOf(this.key.toLowerCase())&&(this.trigger=void 0,console.warn("Behavior create-edge ç key åæ°ä¸åæ³ï¼è¯·è¾å¥ 'shift'ï¼'ctrl'ï¼'alt'ï¼'control'ï¼æ undefined")),"drag"===this.trigger?e={"node:dragstart":"onClick","combo:dragstart":"onClick",drag:"updateEndPoint","node:drop":"onClick","combo:drop":"onClick",dragend:"onDragEnd"}:"click"===this.trigger&&(e={"node:click":"onClick",mousemove:"updateEndPoint","edge:click":"cancelCreating","canvas:click":"cancelCreating","combo:click":"onClick"}),this.key&&(e.keydown="onKeyDown",e.keyup="onKeyUp"),e},onDragEnd:function(e){if(!this.key||this.keydown){var t=e.item;t&&t.getID()!==this.source&&"node"===t.getType()||this.cancelCreating({item:this.edge,x:e.x,y:e.y})}},onClick:function(e){if(!this.key||this.keydown){var t=e.item,r=this.graph,i=t.getModel(),a=this.getEdgeConfig;if(this.addingEdge&&this.edge){if(!this.shouldEnd(e,this))return;var s=void 0;s=a&&(0,o.isFunction)(a)?a({source:this.source,target:i.id},this):this.edgeConfig;var u=(0,n.__assign)({target:i.id},s);if(this.source===i.id&&(u.type="loop"),r.emit("beforecreateedge",{}),r.updateItem(this.edge,u,!1),r.get("enabledStack")){var l=(0,n.__assign)((0,n.__assign)({},this.edge.getModel()),{itemType:"edge"}),c={};c.edges=[l],r.pushStack("add",{before:{},after:c})}r.emit("aftercreateedge",{edge:this.edge}),this.edge.getKeyShape().set("capture",!0),this.edge=null,this.addingEdge=!1}else{if(!this.shouldBegin(e,this))return;s=void 0;s=a&&(0,o.isFunction)(a)?a({source:i.id,target:i.id},this):this.edgeConfig,this.edge=r.addItem("edge",(0,n.__assign)({source:i.id,target:i.id},s),!1),this.source=i.id,this.addingEdge=!0,this.edge.getKeyShape().set("capture",!1)}}},updateEndPoint:function(e){if(!this.key||this.keydown){this.edge&&this.edge.destroyed&&this.cancelCreating({item:this.edge});var t={x:e.x,y:e.y};this.graph.findById(this.source)?this.addingEdge&&this.edge&&this.graph.updateItem(this.edge,{target:t},!1):this.addingEdge=!1}},cancelCreating:function(e){var t,r;if(!this.key||this.keydown){var n=this.graph,o=e.item;return this.addingEdge&&(this.edge===o||(null===(r=null===(t=e.target)||void 0===t?void 0:t.isCanvas)||void 0===r?void 0:r.call(t)))?(this.edge&&!this.edge.destroyed&&n.removeItem(this.edge,!1),this.edge=null,void(this.addingEdge=!1)):void 0}},onKeyDown:function(e){var t=e.key;t&&(t.toLowerCase()===this.key.toLowerCase()?this.keydown=!0:this.keydown=!1)},onKeyUp:function(){this.addingEdge&&this.edge&&(this.graph.removeItem(this.edge,!1),this.addingEdge=!1,this.edge=null),this.keydown=!1}};t.default=s},40566:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,o=r(31834),i=(n=r(85698))&&n.__esModule?n:{default:n};var a=i.default.cloneEvent,s=i.default.isNaN,u=Math.abs,l=["shift","ctrl","alt","control"],c={getDefaultCfg:function(){return{direction:"both",enableOptimize:!1,scalableRange:0,allowDragOnItem:!1}},getEvents:function(){return{mousedown:"onMouseDown",drag:"onDragMove",dragend:"onMouseUp","canvas:click":"onMouseUp",keyup:"onKeyUp",focus:"onKeyUp",keydown:"onKeyDown",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onMouseUp"}},updateViewport:function(e){var t=this.origin,r=+e.clientX,n=+e.clientY;if(!s(r)&&!s(n)){var o=r-t.x,i=n-t.y;"x"===this.get("direction")?i=0:"y"===this.get("direction")&&(o=0),this.origin={x:r,y:n};var a=this.graph.get("width"),u=this.graph.get("height"),l=this.graph.get("canvas").getCanvasBBox(),c=this.scalableRange,f=this.scalableRange;c<1&&c>-1&&(c*=a,f*=u),(l.minX<=a+c&&l.minX+o>a+c||l.maxX+c>=0&&l.maxX+c+o<0)&&(o=0),(l.minY<=u+f&&l.minY+i>u+f||l.maxY+f>=0&&l.maxY+f+i<0)&&(i=0),this.graph.translate(o,i)}},onTouchStart:function(e){var t=e.originalEvent.touches,r=t[0],n=t[1];r&&n||(e.preventDefault(),this.mousedown=!0,this.onDragStart(e))},onMouseDown:function(e){this.mousedown=!0},onDragMove:function(e){this.mousedown&&(this.dragstart?this.onDrag(e):(this.dragstart=!0,this.onDragStart(e)))},onDragStart:function(e){var t=e.originalEvent;if((!t||"touchstart"===e.name||0===t.button)&&("touchstart"===e.name||"undefined"==typeof window||!window.event||window.event.buttons||window.event.button)&&this.shouldBegin(e,this)&&!this.keydown&&this.allowDrag(e)){if(this.origin={x:e.clientX,y:e.clientY},this.dragging=!1,this.enableOptimize){for(var r=this.graph,n=r.getEdges(),o=0,i=n.length;o<i;o++){var a=n[o].get("group").get("children");a&&a.forEach(function(e){e.set("ori-visibility",e.get("ori-visibility")||e.get("visible")),e.hide()})}for(var s=r.getNodes(),u=0,l=s.length;u<l;u++)for(var c=0,f=s[u].getContainer().get("children");c<f.length;c++){var h=f[c];h.get("isKeyShape")||(h.set("ori-visibility",h.get("ori-visibility")||h.get("visible")),h.hide())}}if("undefined"!=typeof window){var p=this;this.handleDOMContextMenu=function(e){return p.onMouseUp(e)},document.body.addEventListener("contextmenu",this.handleDOMContextMenu)}}},onTouchMove:function(e){var t=e.originalEvent.touches,r=t[0],n=t[1];r&&n?this.onMouseUp(e):(e.preventDefault(),this.onDrag(e))},onDrag:function(e){if(this.mousedown){var t=this.graph;if(!this.keydown&&this.allowDrag(e)&&(e=a(e),this.origin)){if(this.dragging)e.type="drag",t.emit("canvas:drag",e);else{if(u(this.origin.x-e.clientX)+u(this.origin.y-e.clientY)<10)return;this.shouldBegin(e,this)&&(e.type="dragstart",t.emit("canvas:dragstart",e),this.originPosition={x:e.clientX,y:e.clientY},this.dragging=!0)}this.shouldUpdate(e,this)&&this.updateViewport(e)}}},onMouseUp:function(e){var t,r;this.mousedown=!1,this.dragstart=!1;var n=this.graph;if(!this.keydown){var o=n.getZoom(),i=n.get("modeController"),s=null===(r=null===(t=null===i||void 0===i?void 0:i.modes[i.mode])||void 0===t?void 0:t.filter(function(e){return"zoom-canvas"===e.type}))||void 0===r?void 0:r[0],u=s?s.optimizeZoom||.1:0;if(this.enableOptimize){for(var l=n.getEdges(),c=0,f=l.length;c<f;c++){var h=l[c].get("group").get("children");h&&h.forEach(function(e){var t=e.get("ori-visibility");e.set("ori-visibility",void 0),t&&e.show()})}if(o>u)for(var p=n.getNodes(),d=0,y=p.length;d<y;d++)for(var v=0,g=p[d].getContainer().get("children");v<g.length;v++){var m=g[v];if(!m.get("isKeyShape")){var b=m.get("ori-visibility");m.set("ori-visibility",void 0),b&&m.show()}}}this.dragging?(e=a(e),this.shouldEnd(e,this)&&this.updateViewport(e),e.type="dragend",e.dx=e.clientX-this.originPosition.x,e.dy=e.clientY-this.originPosition.y,n.emit("canvas:dragend",e),this.endDrag(),"undefined"!=typeof window&&document.body.removeEventListener("contextmenu",this.handleDOMContextMenu)):this.origin=null}},endDrag:function(){this.origin=null,this.dragging=!1,this.dragbegin=!1,this.mousedown=!1,this.dragstart=!1},onKeyDown:function(e){var t=e.key;t&&(l.indexOf(t.toLowerCase())>-1?this.keydown=!0:this.keydown=!1)},onKeyUp:function(){this.keydown=!1,this.origin=null,this.dragging=!1,this.dragbegin=!1},allowDrag:function(e){var t,r,n=e.target,i=n&&n.isCanvas&&n.isCanvas();if((0,o.isBoolean)(this.allowDragOnItem)&&!this.allowDragOnItem&&!i)return!1;if((0,o.isObject)(this.allowDragOnItem)){var a=this.allowDragOnItem,s=a.node,u=a.edge,l=a.combo,c=null===(r=null===(t=e.item)||void 0===t?void 0:t.getType)||void 0===r?void 0:r.call(t);if(!s&&"node"===c)return!1;if(!u&&"edge"===c)return!1;if(!l&&"combo"===c)return!1}return!0}};t.default=c},21987:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(97582),o=r(31834),i=s(r(85698)),a=s(r(31339));function s(e){return e&&e.__esModule?e:{default:e}}var u=i.default.calculationItemsBBox,l={getDefaultCfg:function(){return{enableDelegate:!1,delegateStyle:{},onlyChangeComboSize:!1,activeState:"",selectedState:"selected",enableStack:!0}},getEvents:function(){return{"combo:mousedown":"onMouseDown","combo:dragstart":"onDragStart","combo:drag":"onDrag","combo:dragend":"onDragEnd","combo:drop":"onDrop","node:drop":"onNodeDrop","combo:dragenter":"onDragEnter","combo:dragleave":"onDragLeave"}},validationCombo:function(e){var t=e.item;return!(!t||t.destroyed)&&(!!this.shouldUpdate(e,this)&&"combo"===t.getType())},onMouseDown:function(e){this.origin={x:e.x,y:e.y}},onDragStart:function(e){var t=this,r=this.graph,n=e.item;if(this.currentShouldEnd=!0,this.validationCombo(e)){this.targets=[];var i=r.findAllByState("combo",this.selectedState),a=n.get("id");0===i.filter(function(e){var t=e.get("id");return a===t}).length?this.targets.push(n):this.targets=i;var s=[];this.targets.forEach(function(e){var t=e.getModel(),r=t.x,n=t.y,o=t.id;s.push({x:r,y:n,id:o})}),this.set("beforeDragItems",s),this.activeState&&this.targets.map(function(e){var n=e.getModel();if(n.parentId){var o=r.findById(n.parentId);o&&r.setItemState(o,t.activeState,!0)}}),this.point={},this.originPoint={},this.currentItemChildCombos=[],function e(t,r){if(!1!==r(t)&&t){var n=t.get("combos");if(0===n.length)return!1;(0,o.each)(n,function(t){e(t,r)})}}(n,function(e){if(e.destroyed)return!1;var r=e.getModel();return t.currentItemChildCombos.push(r.id),!0})}},onDrag:function(e){var t=this;if(this.origin&&this.validationCombo(e))if(this.enableDelegate)this.updateDelegate(e);else{if(this.activeState){var r=this.graph,n=e.item,i=n.getModel(),a=r.getCombos(),s=n.getBBox(),u=s.centerX,l=s.centerY,c=s.width;a.filter(function(e){var r=e.getModel();return i.parentId,r.id!==i.id&&!t.currentItemChildCombos.includes(r.id)}).map(function(e){var n=e.getBBox(),o=n.centerX,i=n.centerY,a=n.width,s=u-o,f=l-i,h=2*Math.sqrt(s*s+f*f);c+a-h>.8*c?r.setItemState(e,t.activeState,!0):r.setItemState(e,t.activeState,!1)})}(0,o.each)(this.targets,function(r){t.updateCombo(r,e)}),this.onlyChangeComboSize&&this.updateParentCombos()}},updatePositions:function(e,t){var r=this;(this.enableDelegate||t)&&(0,o.each)(this.targets,function(n){r.updateCombo(n,e,t)})},onDrop:function(e){var t=this,r=e.item;if(this.currentShouldEnd=this.shouldEnd(e,r,this),this.updatePositions(e,!this.currentShouldEnd),this.currentShouldEnd&&r&&this.targets&&!r.destroyed){var n=this.graph,o=r.getModel();this.targets.map(function(e){e.getModel().parentId!==o.id?(t.activeState&&n.setItemState(r,t.activeState,!1),t.onlyChangeComboSize?n.updateCombo(e):n.updateComboTree(e,o.id,!1)):n.updateCombo(r)}),this.end(r,e),this.endComparison=!0}},onNodeDrop:function(e){var t=this;if(this.targets&&0!==this.targets.length){var r=this.graph,n=e.item.getModel().comboId,o=n?r.findById(n):void 0;if(this.currentShouldEnd=this.shouldEnd(e,o,this),this.updatePositions(e,!this.currentShouldEnd),this.currentShouldEnd){var i;if(n){if(this.activeState){var a=r.findById(n);r.setItemState(a,this.activeState,!1)}this.targets.map(function(e){t.onlyChangeComboSize?r.updateCombo(e):n!==e.getID()&&(i=r.findById(n),n!==e.getModel().parentId&&r.updateComboTree(e,n,!1))})}else this.targets.map(function(e){t.onlyChangeComboSize?r.updateCombo(e):e.getModel().comboId&&r.updateComboTree(e,void 0,!1)});this.endComparison=!0,this.end(i,e)}}},onDragEnter:function(e){if(this.origin&&this.validationCombo(e)){var t=e.item,r=this.graph;this.activeState&&r.setItemState(t,this.activeState,!0)}},onDragLeave:function(e){if(this.origin&&this.validationCombo(e)){var t=e.item,r=this.graph;this.activeState&&r.setItemState(t,this.activeState,!1)}},onDragEnd:function(e){if(this.targets&&0!==this.targets.length){var t=e.item;this.currentShouldEnd&&this.updatePositions(e);var r=this.getParentCombo(t.getModel().parentId),n=this.graph;r&&this.activeState&&n.setItemState(r,this.activeState,!1),this.end(void 0,e)}},end:function(e,t){var r=this;if(this.origin){var n=this.graph;if(this.delegateShape)n.get("delegateGroup").clear(),this.delegateShape=null;if(e&&this.activeState&&n.setItemState(e,this.activeState,!1),!e){var o=n.get("enabledStack")&&this.enableStack,i={before:{nodes:[],edges:[],combos:[].concat(this.get("beforeDragItems"))},after:{nodes:[],edges:[],combos:[]}};this.targets.map(function(e){if(r.onlyChangeComboSize){n.updateCombo(e);var t=e.getModel(),a=t.x,s=t.y,u=t.id;i.after.combos.push({x:a,y:s,id:u}),n.pushStack("update",i)}else n.updateComboTree(e,void 0,o)})}this.point=[],this.origin=null,this.originPoint=null,this.targets.length=0}},traverse:function(e,t,r){var n=this;if(void 0===r&&(r={}),!1!==t(e,r)&&e){var i=e.get("combos");(0,o.each)(i,function(e){n.traverse(e,t,r)});var a=e.get("nodes");(0,o.each)(a,function(e){n.traverse(e,t,r)})}},updateCombo:function(e,t,r){this.updateSingleItem(e,t,r);var n={};this.traverse(e,function(e,t){return!e.destroyed&&(e.getEdges().forEach(function(e){return t[e.getID()]=e}),!0)},n),Object.values(n).forEach(function(e){return e.refresh()})},updateSingleItem:function(e,t,r){var n=this.origin,o=this.graph,i=e.getModel(),a=e.get("id");this.point[a]||(this.point[a]={x:i.x,y:i.y});var s=t.x-n.x+this.point[a].x,u=t.y-n.y+this.point[a].y;r&&(s+=n.x-t.x,u+=n.y-t.y),o.updateItem(e,{x:s,y:u},!1)},getParentCombo:function(e){var t=this.graph;if(e){var r=t.findById(e);if(r)return r}},updateDelegate:function(e){var t=this.graph;if(this.delegateShape){var r=e.x-this.origin.x+this.originPoint.minX,o=e.y-this.origin.y+this.originPoint.minY;this.delegateShape.attr({x:r,y:o})}else{var i=t.get("delegateGroup"),s=null,l=(s=this.targets.length>1?u(this.targets):this.targets[0].getBBox()).x,c=s.y,f=s.width,h=s.height,p=s.minX,d=s.minY;this.originPoint={x:l,y:c,width:f,height:h,minX:p,minY:d};var y=(0,n.__assign)((0,n.__assign)({},a.default.delegateStyle),this.delegateStyle);this.delegateShape=i.addShape("rect",{attrs:(0,n.__assign)({width:s.width,height:s.height,x:s.x,y:s.y},y),name:"combo-delegate-shape"}),this.delegateShape.set("capture",!1),this.delegate=this.delegateShape}},updateParentCombos:function(){var e=this.graph,t=this.targets,r={};null===t||void 0===t||t.forEach(function(t){var n=t.getModel().parentId;n&&(r[n]=e.findById(n))}),Object.values(r).forEach(function(t){t&&e.updateCombo(t)})}};t.default=l},67712:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,o=r(97582),i=r(31834),a=(n=r(31339))&&n.__esModule?n:{default:n};var s={getDefaultCfg:function(){return{updateEdge:!0,delegateStyle:{},enableDelegate:!1,onlyChangeComboSize:!1,comboActiveState:"",selectedState:"selected",enableOptimize:!1,enableDebounce:!1,enableStack:!0}},getEvents:function(){return{"node:mousedown":"onMouseDown",drag:"onDragMove",dragend:"onDragEnd","combo:dragenter":"onDragEnter","combo:dragleave":"onDragLeave","combo:drop":"onDropCombo","node:drop":"onDropNode","canvas:drop":"onDropCanvas",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onDragEnd",afterchangedata:"onDragEnd"}},validationCombo:function(e){return!(!this.origin||!e||e.destroyed)&&"combo"===e.getType()},onTouchStart:function(e){if(e.item){try{var t=e.originalEvent.touches,r=t[0],n=t[1];if(r&&n)return;e.preventDefault()}catch(e){console.warn("Touch original event not exist!")}this.mousedown={item:e.item,target:e.target,origin:{x:e.x,y:e.y}},this.dragstart=!0,this.onDragStart(e)}},onTouchMove:function(e){try{var t=e.originalEvent.touches,r=t[0],n=t[1];if(r&&n)return void this.onDragEnd(e);e.preventDefault()}catch(e){console.warn("Touch original event not exist!")}this.onDrag(e)},onMouseDown:function(e){this.mousedown={item:e.item,target:e.target,origin:{x:e.x,y:e.y}},"undefined"==typeof window||this.windowEventBinded||(this.windowEventBinded=!0,document.body.addEventListener("contextmenu",this.onDragEnd.bind(this)),document.body.addEventListener("mouseup",this.onDragEnd.bind(this)))},onDragMove:function(e){var t,r;"node"===(null===(r=null===(t=e.item)||void 0===t?void 0:t.getType)||void 0===r?void 0:r.call(t))?this.mousedown&&(this.dragstart?this.onDrag((0,o.__assign)((0,o.__assign)({},e),this.mousedown)):(this.dragstart=!0,this.onDragStart(e))):this.onDragEnd()},onDragStart:function(e){var t=this;if(this.currentShouldEnd=!0,this.shouldBegin((0,o.__assign)((0,o.__assign)({},e),this.mousedown),this)){var r=this.mousedown,n=r.item,i=r.target;if(n&&!n.destroyed&&!n.hasLocked()){if(n.getContainer().set("capture",!1),this.cachedCaptureItems||(this.cachedCaptureItems=[]),this.cachedCaptureItems.push(n),i)if(i.get("isAnchorPoint"))return;var a=this.graph;this.targets=[],this.targetCombo=null;var s=a.findAllByState("node",this.selectedState),u=n.get("id");if(0===s.filter(function(e){var t=e.get("id");return u===t}).length?this.targets.push(n):s.length>1?s.forEach(function(e){e.hasLocked()||t.targets.push(e)}):this.targets.push(n),this.graph.get("enabledStack")&&this.enableStack){var l=[];this.targets.forEach(function(e){var t=e.getModel(),r=t.x,n=t.y,o=t.id;l.push({x:r,y:n,id:o})}),this.set("beforeDragNodes",l)}this.hidenEdge={},this.get("updateEdge")&&this.enableOptimize&&!this.enableDelegate&&this.targets.forEach(function(e){e.getEdges().forEach(function(e){e.isVisible()&&(t.hidenEdge[e.getID()]=!0,e.hide())})}),this.origin=this.mousedown.origin,this.point={},this.originPoint={}}}},onDrag:function(e){var t=this;if(this.mousedown&&this.origin&&this.shouldUpdate(e,this))if(this.get("enableDelegate"))this.updateDelegate(e);else if(this.enableDebounce)this.debounceUpdate({targets:this.targets,graph:this.graph,point:this.point,origin:this.origin,evt:e,updateEdge:this.get("updateEdge"),onlyChangeComboSize:this.onlyChangeComboSize,updateParentCombos:this.updateParentCombos});else{var r={};this.targets.map(function(n){t.update(n,e);var o=n.getModel().comboId;o&&(r[o]=t.graph.findById(o))}),this.onlyChangeComboSize&&this.updateParentCombos()}},onDragEnd:function(e){var t,r=this;if(this.mousedown=!1,this.dragstart=!1,"undefined"!=typeof window&&this.windowEventBinded&&(this.windowEventBinded=!1,document.body.removeEventListener("contextmenu",this.onDragEnd.bind(this)),document.body.removeEventListener("mouseup",this.onDragEnd.bind(this))),this.origin){null===(t=this.cachedCaptureItems)||void 0===t||t.forEach(function(e){e.getContainer().set("capture",!0)}),this.cachedCaptureItems=[],this.delegateRect&&(this.delegateRect.remove(),this.delegateRect=null),this.get("updateEdge")&&this.enableOptimize&&!this.enableDelegate&&this.targets.forEach(function(e){e.getEdges().forEach(function(e){r.hidenEdge[e.getID()]&&e.show(),e.refresh()})}),this.hidenEdge={};var n=this.graph;if(n.get("enabledStack")&&this.enableStack){var o={before:{nodes:[],edges:[],combos:[]},after:{nodes:[],edges:[],combos:[]}};this.get("beforeDragNodes").forEach(function(e){o.before.nodes.push(e)}),this.targets.forEach(function(e){var t=e.getModel(),r=t.x,n=t.y,i=t.id;o.after.nodes.push({x:r,y:n,id:i})}),n.pushStack("update",(0,i.clone)(o))}n.emit("dragnodeend",{items:this.targets,targetItem:null}),this.point={},this.origin=null,this.originPoint={},this.targets.length=0,this.targetCombo=null}},onDropCombo:function(e){var t=e.item;if(this.currentShouldEnd=this.shouldEnd(e,t,this),this.updatePositions(e,!this.currentShouldEnd),this.currentShouldEnd&&this.validationCombo(t)){var r=this.graph;if(this.comboActiveState&&r.setItemState(t,this.comboActiveState,!1),this.targetCombo=t,this.onlyChangeComboSize)r.updateCombos();else{var n=t.getModel();this.targets.map(function(e){e.getModel().comboId!==n.id&&r.updateComboTree(e,n.id)}),r.updateCombo(t)}r.emit("dragnodeend",{items:this.targets,targetItem:this.targetCombo})}},onDropCanvas:function(e){var t=this.graph;this.currentShouldEnd=this.shouldEnd(e,void 0,this),this.updatePositions(e,!this.currentShouldEnd),this.targets&&0!==this.targets.length&&this.currentShouldEnd&&(this.onlyChangeComboSize?this.updateParentCombos():this.targets.map(function(e){e.getModel().comboId&&t.updateComboTree(e)}))},onDropNode:function(e){if(this.targets&&0!==this.targets.length){var t=e.item,r=this.graph,n=t.getModel().comboId,o=n?r.findById(n):void 0;if(this.currentShouldEnd=this.shouldEnd(e,o,this),this.updatePositions(e,!this.currentShouldEnd),this.currentShouldEnd){if(this.onlyChangeComboSize)this.updateParentCombos();else if(n){var i=r.findById(n);this.comboActiveState&&r.setItemState(i,this.comboActiveState,!1),this.targets.map(function(e){var t=e.getModel();n!==t.comboId&&r.updateComboTree(e,n)}),r.updateCombo(i)}else this.targets.map(function(e){e.getModel().comboId&&r.updateComboTree(e)});r.emit("dragnodeend",{items:this.targets,targetItem:t})}}},onDragEnter:function(e){var t=e.item;if(this.validationCombo(t)){var r=this.graph;this.comboActiveState&&r.setItemState(t,this.comboActiveState,!0)}},onDragLeave:function(e){var t=e.item;if(this.validationCombo(t)){var r=this.graph;this.comboActiveState&&r.setItemState(t,this.comboActiveState,!1)}},updatePositions:function(e,t){var r=this;this.targets&&0!==this.targets.length&&(this.get("enableDelegate")?this.enableDebounce?this.debounceUpdate({targets:this.targets,graph:this.graph,point:this.point,origin:this.origin,evt:e,updateEdge:this.get("updateEdge"),onlyChangeComboSize:this.onlyChangeComboSize,updateParentCombos:this.updateParentCombos}):t||this.targets.map(function(t){return r.update(t,e)}):this.targets.map(function(n){return r.update(n,e,t)}))},update:function(e,t,r){var n=this.origin,o=e.get("model"),i=e.get("id");this.point[i]||(this.point[i]={x:o.x||0,y:o.y||0});var a=t.x-n.x+this.point[i].x,s=t.y-n.y+this.point[i].y;r&&(a+=n.x-t.x,s+=n.y-t.y);var u={x:a,y:s};this.get("updateEdge")?this.graph.updateItem(e,u,!1):e.updatePosition(u)},debounceUpdate:(0,i.debounce)(function(e){var t=e.targets,r=e.graph,n=e.point,o=e.origin,i=e.evt,a=e.updateEdge,s=e.onlyChangeComboSize,u=e.updateParentCombos;t.map(function(e){var t=e.get("model"),s=e.get("id");n[s]||(n[s]={x:t.x||0,y:t.y||0});var u={x:i.x-o.x+n[s].x,y:i.y-o.y+n[s].y};a?r.updateItem(e,u,!1):e.updatePosition(u)}),s&&u(r,t)},50,!0),updateDelegate:function(e){var t=this.graph;if(this.delegateRect){var r=e.x-this.origin.x+this.originPoint.minX,n=e.y-this.origin.y+this.originPoint.minY;this.delegateRect.attr({x:r,y:n})}else{var s=t.get("group"),u=(0,i.deepMix)({},a.default.delegateStyle,this.delegateStyle),l=this.calculationGroupPosition(e),c=l.x,f=l.y,h=l.width,p=l.height,d=l.minX,y=l.minY;this.originPoint={x:c,y:f,width:h,height:p,minX:d,minY:y},this.delegateRect=s.addShape("rect",{attrs:(0,o.__assign)({width:h,height:p,x:c,y:f},u),name:"rect-delegate-shape"}),this.delegate=this.delegateRect,this.delegateRect.set("capture",!1)}},calculationGroupPosition:function(e){var t=this.targets;0===t.length&&t.push(e.item);for(var r=1/0,n=-1/0,o=1/0,i=-1/0,a=0;a<t.length;a++){var s=t[a].getBBox(),u=s.minX,l=s.minY,c=s.maxX,f=s.maxY;u<r&&(r=u),l<o&&(o=l),c>n&&(n=c),f>i&&(i=f)}return{x:Math.floor(r),y:Math.floor(o),width:Math.ceil(n)-Math.floor(r),height:Math.ceil(i)-Math.floor(o),minX:r,minY:o}},updateParentCombos:function(e,t){var r=e||this.graph,n=t||this.targets,o={};null===n||void 0===n||n.forEach(function(e){var t=e.getModel().comboId;t&&(o[t]=r.findById(t))}),Object.values(o).forEach(function(e){e&&r.updateCombo(e)})}};t.default=s},32230:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,o=r(97582),i=(n=r(45140))&&n.__esModule?n:{default:n};var a=(0,o.__assign)({getDefaultCfg:function(){return{item:"edge",offset:12,formatText:function(e){return"source: ".concat(e.source," target: ").concat(e.target)}}},getEvents:function(){return{"edge:mouseenter":"onMouseEnter","edge:mouseleave":"onMouseLeave","edge:mousemove":"onMouseMove",afterremoveitem:"onMouseLeave"}}},i.default);t.default=a},5312:function(e,t,r){"use strict";var n=r(31834),o=r(48122),i=w(r(40566)),a=w(r(67712)),s=w(r(61125)),u=w(r(46625)),l=w(r(14789)),c=w(r(71051)),f=w(r(63332)),h=w(r(32230)),p=w(r(82426)),d=w(r(21987)),y=w(r(96852)),v=w(r(86048)),g=w(r(15120)),m=w(r(54528)),b=w(r(42417));function w(e){return e&&e.__esModule?e:{default:e}}var _={"drag-canvas":i.default,"zoom-canvas":c.default,"drag-node":a.default,"activate-relations":s.default,"brush-select":u.default,"click-select":l.default,"lasso-select":v.default,tooltip:f.default,"edge-tooltip":h.default,"collapse-expand":p.default,"drag-combo":d.default,"collapse-expand-combo":y.default,"create-edge":g.default,"shortcuts-call":m.default,"scroll-canvas":b.default};(0,n.each)(_,function(e,t){(0,o.registerBehavior)(t,e)})},86048:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,o=r(97582),i=(n=r(85698))&&n.__esModule?n:{default:n};var a=i.default.isPolygonsIntersect,s=i.default.pathToPoints,u=["drag","shift","ctrl","alt","control"],l={getDefaultCfg:function(){return{delegateStyle:{fill:"#EEF6FF",fillOpacity:.4,stroke:"#DDEEFE",lineWidth:1},onSelect:function(){},onDeselect:function(){},shouldDeselect:void 0,selectedState:"selected",trigger:"shift",includeEdges:!0,selectedEdges:[],selectedNodes:[]}},getEvents:function(){return u.indexOf(this.trigger.toLowerCase())>-1||(this.trigger="shift",console.warn("Behavior lasso-select ç trigger åæ°ä¸åæ³ï¼è¯·è¾å¥ 'drag'ã'shift'ã'ctrl' æ 'alt'")),"drag"===this.trigger?{dragstart:"onDragStart",drag:"onDragMove",dragend:"onDragEnd","canvas:click":"clearStates"}:{dragstart:"onDragStart",drag:"onDragMove",dragend:"onDragEnd",keyup:"onKeyUp",keydown:"onKeyDown","canvas:click":"clearStates"}},onDragStart:function(e){var t=this.lasso;e.item||("drag"===this.trigger||this.keydown)&&(this.selectedNodes&&0!==this.selectedNodes.length&&this.clearStates("dragstart"),t||(t=this.createLasso()),this.dragging=!0,this.originPoint={x:e.x,y:e.y},this.points.push(this.originPoint),t.show())},onDragMove:function(e){this.dragging&&("drag"===this.trigger||this.keydown)&&(this.points.push({x:e.x,y:e.y}),this.updateLasso(e))},onDragEnd:function(e){(this.lasso||this.dragging)&&("drag"===this.trigger||this.keydown)&&(this.points.push(this.originPoint),this.getSelectedItems(),this.lasso.remove(!0),this.lasso=null,this.points=[],this.dragging=!1)},getLassoPath:function(){var e=this.points,t=[];return e.length&&(e.forEach(function(e,r){0===r?t.push(["M",e.x,e.y]):t.push(["L",e.x,e.y])}),t.push(["L",e[0].x,e[0].y])),t},clearStates:function(e){void 0===e&&(e="canvas:click");var t=this.graph,r=this.selectedState,n=this.shouldDeselect,o=t.findAllByState("node",r),i=t.findAllByState("edge",r);n&&!n({action:e,nodes:o,edges:i})||(o.forEach(function(e){return t.setItemState(e,r,!1)}),i.forEach(function(e){return t.setItemState(e,r,!1)})),this.onDeselect&&this.onDeselect(this.selectedNodes,this.selectedEdges),this.selectedNodes=[],this.selectedEdges=[],t.emit("nodeselectchange",{selectedItems:{nodes:[],edges:[]},select:!1})},getSelectedItems:function(){var e=this,t=this.graph,r=this.shouldUpdate,n=this.points.map(function(e){return[t.getCanvasByPoint(e.x,e.y).x,t.getCanvasByPoint(e.x,e.y).y]}),o=this.selectedState,i=[],u=[];t.getNodes().forEach(function(l){if(l.isVisible()&&function(e,t){var r,n=e.getKeyShape();if("path"===e.get("type"))r=s(n.attr("path"));else{var o=n.getCanvasBBox();r=[[o.minX,o.minY],[o.maxX,o.minY],[o.maxX,o.maxY],[o.minX,o.maxY]]}return a(t,r)}(l,n)&&r(l,"select",e)){i.push(l);var c=l.getModel();u.push(c.id),t.setItemState(l,o,!0)}});var l=[];this.includeEdges&&i.forEach(function(n){n.getOutEdges().forEach(function(n){if(n.isVisible()){var o=n.getModel(),i=o.source,a=o.target;u.includes(i)&&u.includes(a)&&r(n,"select",e)&&(l.push(n),t.setItemState(n,e.selectedState,!0))}})}),this.selectedEdges=l,this.selectedNodes=i,this.onSelect&&this.onSelect(i,l),t.emit("nodeselectchange",{selectedItems:{nodes:i,edges:l},select:!0})},createLasso:function(){var e=this.graph.get("delegateGroup").addShape("path",{attrs:(0,o.__assign)({path:[]},this.delegateStyle),capture:!1,name:"lasso-shape"});return this.lasso=e,this.delegate=e,this.points=[],e},updateLasso:function(e){this.lasso.attr({path:this.getLassoPath()})},onKeyDown:function(e){var t=e.key;t&&(t.toLowerCase()===this.trigger.toLowerCase()?this.keydown=!0:this.keydown=!1)},onKeyUp:function(){this.lasso&&(this.lasso.remove(!0),this.lasso=null,this.points=[],this.dragging=!1),this.keydown=!1}};t.default=l},42417:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(31834),o=["shift","ctrl","alt","control","meta"],i={getDefaultCfg:function(){return{direction:"both",enableOptimize:!1,zoomKey:"ctrl",scalableRange:0,allowDragOnItem:!0}},getEvents:function(){return this.zoomKey&&-1!==o.indexOf(this.zoomKey)||(this.zoomKey="ctrl"),{wheel:"onWheel"}},onWheel:function(e){var t=this;if(this.allowDrag(e)){var r=this.graph,n=Array.isArray(this.zoomKey)?[].concat(this.zoomKey):[this.zoomKey];if(n.includes("control")&&n.push("ctrl"),n.some(function(t){return e["".concat(t,"Key")]})){var o=r.get("canvas").getPointByClient(e.clientX,e.clientY),i=r.getZoom();e.wheelDelta>0?i+=.05*i:i-=.05*i,r.zoomTo(i,{x:o.x,y:o.y})}else{var a=e.deltaX||e.movementX,s=e.deltaY||e.movementY;!s&&navigator.userAgent.indexOf("Firefox")>-1&&(s=125*-e.wheelDelta/3);var u=this.graph.get("width"),l=this.graph.get("height"),c=this.graph.get("canvas").getCanvasBBox(),f=this.scalableRange,h=this.scalableRange;f<1&&f>-1&&(f*=u,h*=l);var p=c.minX,d=c.maxX,y=c.minY,v=c.maxY;a>0?d<-f?a=0:d-a<-f&&(a=d+f):a<0&&(p>u+f?a=0:p-a>u+f&&(a=p-(u+f))),s>0?v<-h?s=0:v-s<-h&&(s=v+h):s<0&&(y>l+h?s=0:y-s>l+h&&(s=y-(l+h))),"x"===this.get("direction")?s=0:"y"===this.get("direction")&&(a=0),r.translate(-a,-s)}if(e.preventDefault(),this.get("enableOptimize")){var g=this.get("optimizeZoom"),m=this.get("optimized"),b=r.getNodes(),w=r.getEdges(),_=b.length,x=w.length;if(!m){for(var S=0;S<_;S++){var O=b[S];if(!O.destroyed)for(var P=(M=O.get("group").get("children")).length,E=0;E<P;E++){(C=M[E]).destoryed||C.get("isKeyShape")||(C.set("ori-visibility",C.get("ori-visibility")||C.get("visible")),C.hide())}}for(var k=0;k<x;k++){var M;for(P=(M=w[k].get("group").get("children")).length,E=0;E<P;E++){var C;(C=M[E]).set("ori-visibility",C.get("ori-visibility")||C.get("visible")),C.hide()}}this.set("optimized",!0)}clearTimeout(this.get("timeout"));var j=setTimeout(function(){var e=r.getZoom();if(t.get("optimized")){t.set("optimized",!1);for(var n=0;n<_;n++){var o=b[n],i=(l=o.get("group").get("children")).length;if(e<g)(s=(c=o.getKeyShape()).get("ori-visibility"))&&c.show();else for(var a=0;a<i;a++){var s=(h=l[a]).get("ori-visibility");!h.get("visible")&&s&&s&&h.show()}}for(var u=0;u<x;u++){var l,c,f=w[u];i=(l=f.get("group").get("children")).length;if(e<g)(s=(c=f.getKeyShape()).get("ori-visibility"))&&c.show();else for(a=0;a<i;a++){var h;if(!(h=l[a]).get("visible"))(s=h.get("ori-visibility"))&&h.show()}}}},100);this.set("timeout",j)}}},allowDrag:function(e){var t,r,o=e.target,i=o&&o.isCanvas&&o.isCanvas();if((0,n.isBoolean)(this.allowDragOnItem)&&!this.allowDragOnItem&&!i)return!1;if((0,n.isObject)(this.allowDragOnItem)){var a=this.allowDragOnItem,s=a.node,u=a.edge,l=a.combo,c=null===(r=null===(t=e.item)||void 0===t?void 0:t.getType)||void 0===r?void 0:r.call(t);if(!s&&"node"===c)return!1;if(!u&&"edge"===c)return!1;if(!l&&"combo"===c)return!1}return!0}};t.default=i},54528:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=["shift","ctrl","alt","control"],n={getDefaultCfg:function(){return{trigger:"ctrl",combinedKey:"1",functionName:"fitView",functionParams:[]}},getEvents:function(){return r.indexOf(this.trigger.toLowerCase())>-1||(this.trigger="ctrl",console.warn("Behavior shortcuts-fit-view ç trigger åæ° '".concat(this.trigger,"' ä¸åæ³ï¼è¯·è¾å¥ 'drag'ã'shift'ã'ctrl' æ 'alt'"))),this.combinedKey===this.trigger&&(this.combinedKey=void 0),{keyup:"onKeyUp",keydown:"onKeyDown"}},onKeyDown:function(e){var t=e.key;if(t){var r=this.trigger.toLowerCase(),n=t.toLowerCase();this.triggerKeydown||(this.triggerKeydown=n===r||"control"===n&&"ctrl"===r||"ctrl"===n&&"control"===r);var o=this.graph;if(!o[this.functionName])return console.warn("Behavior shortcuts-fit-view ç functionName åæ° '".concat(this.functionName,"' ä¸åæ³ï¼å®ä¸æ¯ Graph çä¸ä¸ªå½æ°å")),{};if(!this.triggerKeydown||this.combinedKey){var i=this.combinedKey.toLowerCase();this.triggerKeydown&&(n===i||"control"===n&&"ctrl"===i||"ctrl"===n&&"control"===i)&&(this.functionParams&&this.functionParams.length?o[this.functionName].apply(o,this.functionParams):o[this.functionName]())}else this.functionParams&&this.functionParams.length?o[this.functionName].apply(o,this.functionParams):o[this.functionName]()}},onKeyUp:function(){this.brush&&(this.brush.remove(!0),this.brush=null,this.dragging=!1),this.triggerKeydown=!1}};t.default=n},45140:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(39269),o={onMouseEnter:function(e){var t=e.item;this.currentTarget=t,this.showTooltip(e),this.graph.emit("tooltipchange",{item:e.item,action:"show"})},onMouseMove:function(e){this.shouldUpdate(e,this)?this.currentTarget&&e.item===this.currentTarget&&this.updatePosition(e):this.hideTooltip()},onMouseLeave:function(e){this.shouldEnd(e,this)&&(this.hideTooltip(),this.graph.emit("tooltipchange",{item:this.currentTarget,action:"hide"}),this.currentTarget=null)},showTooltip:function(e){var t=this.container;if(e.item&&!e.item.destroyed){t||(t=this.createTooltip(this.graph.get("canvas")),this.container=t);var r=this.formatText(e.item.get("model"),e);t.innerHTML=r,(0,n.modifyCSS)(this.container,{visibility:"visible"}),this.updatePosition(e)}},hideTooltip:function(){(0,n.modifyCSS)(this.container,{visibility:"hidden"})},updatePosition:function(e){var t=this.get("shouldBegin"),r=this.width,o=this.height,i=this.container,a=this.graph;if(t(e,this)){var s=a.getPointByClient(e.clientX,e.clientY),u=a.getCanvasByPoint(s.x,s.y),l=u.x,c=u.y,f=i.getBoundingClientRect();l>r/2?l-=f.width:l+=this.offset,c>o/2?c-=f.height:c+=this.offset;var h="".concat(l,"px"),p="".concat(c,"px");(0,n.modifyCSS)(this.container,{left:h,top:p,visibility:"visible"})}else(0,n.modifyCSS)(i,{visibility:"hidden"})},createTooltip:function(e){var t=e.get("el");t.style.position="relative";var r=(0,n.createDom)('<div class="g6-tooltip g6-'.concat(this.item,'-tooltip"></div>'));return t.parentNode.appendChild(r),(0,n.modifyCSS)(r,{position:"absolute",visibility:"visible"}),this.width=e.get("width"),this.height=e.get("height"),this.container=r,this.graph.get("tooltips").push(r),r}};t.default=o},63332:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,o=r(97582),i=(n=r(45140))&&n.__esModule?n:{default:n};var a=(0,o.__assign)({getDefaultCfg:function(){return{item:"node",offset:12,formatText:function(e){return e.label}}},getEvents:function(){return{"node:mouseenter":"onMouseEnter","node:mouseleave":"onMouseLeave","node:mousemove":"onMouseMove",afterremoveitem:"onMouseLeave"}}},i.default);t.default=a},71051:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(43708),o=r(31834),i=r(99121),a=n.ext.transform,s={getDefaultCfg:function(){return this.isFireFox="firefox"===(0,i.getBrowserName)(),{sensitivity:2,minZoom:void 0,maxZoom:void 0,enableOptimize:!1,optimizeZoom:.1,fixSelectedItems:{fixAll:!1,fixLineWidth:!1,fixLabel:!1,fixState:"selected"},animate:!1,animateCfg:{duration:500}}},getEvents:function(){var e=this.fixSelectedItems;return e.fixState||(e.fixState="selected"),e.fixAll&&(e.fixLineWidth=!0,e.fixLabel=!0),{wheel:"onWheel",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onTouchEnd"}},onTouchStart:function(e){var t=e.originalEvent.touches,r=t[0],n=t[1];e.preventDefault(),n&&(this.shouldBegin&&!this.shouldBegin(e,this)||(this.startPoint={pageX:r.pageX,pageY:r.pageY},this.moveable=!0,n&&(this.endPoint={pageX:n.pageX,pageY:n.pageY}),this.originScale=this.graph.getZoom()||this.currentScale||1))},onTouchMove:function(e){if(this.moveable){e.preventDefault();var t=e.originalEvent.touches,r=t[0],n=t[1];if(n){this.endPoint||(this.endPoint={pageX:n.pageX,pageY:n.pageY});var o=function(e,t){return Math.hypot(t.x-e.x,t.y-e.y)},i=o({x:r.pageX,y:r.pageY},{x:n.pageX,y:n.pageY})/o({x:this.startPoint.pageX,y:this.startPoint.pageY},{x:this.endPoint.pageX,y:this.endPoint.pageY}),a=this.originScale*i;this.currentScale=a;var s=this.get("minZoom")||this.graph.get("minZoom");if(!(a>(this.get("maxZoom")||this.graph.get("maxZoom"))||a<s)){var u=this.get("animate"),l=this.get("animateCfg"),c=this.graph.get("canvas").getPointByClient(e.clientX,e.clientY);this.graph.zoomTo(a,{x:c.x,y:c.y},u,l),this.graph.emit("wheelzoom",e)}}}},onTouchEnd:function(){this.moveable=!1,this.endPoint=null},onWheel:function(e){var t=this,r=this.graph,n=this.fixSelectedItems;if((!this.shouldBegin||this.shouldBegin(e,this))&&this.shouldUpdate(e,this)){e.preventDefault();var i=r.get("canvas").getPointByClient(e.clientX,e.clientY),s=this.get("sensitivity"),u=r.getZoom(),l=u;l=u*(this.isFireFox?e.deltaY>0||e.wheelDelta<0?1-.05*s:1/(1-.05*s):e.wheelDelta<0?1-.05*s:1/(1-.05*s));var c=this.get("minZoom")||r.get("minZoom"),f=this.get("maxZoom")||r.get("maxZoom");if(l>f?l=f:l<c&&(l=c),this.get("enableOptimize")){var h=this.get("optimizeZoom"),p=this.get("optimized"),d=r.getNodes(),y=r.getEdges(),v=d.length,g=y.length;if(!p){for(var m=0;m<v;m++){if(!(M=d[m]).destroyed)for(var b=(Z=M.get("group").get("children")).length,w=0;w<b;w++){(B=Z[w]).destoryed||B.get("isKeyShape")||(B.set("ori-visibility",B.get("ori-visibility")||B.get("visible")),B.hide())}}for(var _=0;_<g;_++)for(b=(Z=(J=y[_]).get("group").get("children")).length,w=0;w<b;w++){(B=Z[w]).set("ori-visibility",B.get("ori-visibility")||B.get("visible")),B.hide()}this.set("optimized",!0)}clearTimeout(this.get("timeout"));var x=setTimeout(function(){var e=r.getZoom();if(t.get("optimized")){t.set("optimized",!1);for(var n=0;n<v;n++){var o=d[n],i=(l=o.get("group").get("children")).length;if(e<h){var a=(f=o.getKeyShape()).get("ori-visibility");f.set("ori-visibility",void 0),a&&f.show()}else for(var s=0;s<i;s++){a=(p=l[s]).get("ori-visibility");p.set("ori-visibility",void 0),!p.get("visible")&&a&&a&&p.show()}}for(var u=0;u<g;u++){var l,c=y[u];i=(l=c.get("group").get("children")).length;if(e<h){var f;a=(f=c.getKeyShape()).get("ori-visibility");f.set("ori-visibility",void 0),a&&f.show()}else for(s=0;s<i;s++){var p;if(!(p=l[s]).get("visible")){a=p.get("ori-visibility");p.set("ori-visibility",void 0),a&&p.show()}}}}},100);this.set("timeout",x)}if(u<=1){var S=void 0,O=void 0;if(n.fixAll||n.fixLineWidth||n.fixLabel){S=r.findAllByState("node",n.fixState),O=r.findAllByState("edge",n.fixState);for(var P=u/l,E=S.length,k=0;k<E;k++){var M,C=(M=S[k]).getContainer(),j=M.getModel(),T=M.getOriginStyle(),A=M.getStateStyle(n.fixState),I=M.get("shapeFactory").getShape(j.type).getStateStyle(n.fixState,M)[n.fixState];if(n.fixAll){if(l<=1){var R=(0,o.clone)(C.getMatrix());R||(R=[1,0,0,0,1,0,0,0,1]);var L=M.getModel(),N=L.x,D=L.y;R=a(R,[["t",-N,-D],["s",P,P],["t",N,D]]),C.setMatrix(R)}}else for(b=(Z=C.get("children")).length,w=0;w<b;w++){var B=Z[w],F=void 0,G=void 0;if(n.fixLabel)if("text"===B.get("type")){F=B.attr("fontSize")||12;var z=A[B.get("name")],U=I[B.get("name")],V=z?z.fontSize:12,W=U?U.fontSize:12,Y=V||W||12;if(l<=1&&B.attr("fontSize",Y/l),G)break}if(n.fixLineWidth&&B.get("isKeyShape")){G=B.attr("lineWidth")||0;var H=A.lineWidth||I.lineWidth||T.lineWidth||0;if(l<=1&&B.attr("lineWidth",H/l),F)break}}}for(var X=O.length,q=0;q<X;q++){var J,Z=(C=(J=O[q]).getContainer()).get("children");for(j=J.getModel(),A=J.getStateStyle(n.fixState),I=J.get("shapeFactory").getShape(j.type).getStateStyle(n.fixState,J)[n.fixState],b=Z.length,w=0;w<b;w++){B=Z[w],F=void 0,G=void 0;if(n.fixLabel||n.fixAll)if("text"===B.get("type")){F=B.attr("fontSize")||12;z=A[B.get("name")],U=I[B.get("name")],V=z?z.fontSize:12,W=U?U.fontSize:12,Y=V||W||12;if(l<=1&&B.attr("fontSize",Y/l),G)break}if((n.fixLineWidth||n.fixAll)&&B.get("isKeyShape")){G=B.attr("lineWidth")||0;H=A.lineWidth||I.lineWidth||1;if(l<=1&&B.attr("lineWidth",H/l),F)break}}}}}var K=this.get("animate"),Q=this.get("animateCfg");r.zoomTo(l,{x:i.x,y:i.y},K,Q),r.emit("wheelzoom",e)}}};t.default=s},68950:function(e,t,r){"use strict";r(27509)},31339:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=(0,r(73297).getColorsWithSubjectColor)("rgb(95, 149, 255)","rgb(255, 255, 255)"),o={version:"0.8.22",rootContainerClassName:"root-container",nodeContainerClassName:"node-container",edgeContainerClassName:"edge-container",comboContainerClassName:"combo-container",delegateContainerClassName:"delegate-container",defaultLoopPosition:"top",nodeLabel:{style:{fill:"#000",fontSize:12,textAlign:"center",textBaseline:"middle"},offset:4},defaultNode:{type:"circle",style:{lineWidth:1,stroke:n.mainStroke,fill:n.mainFill},size:20,color:n.mainStroke,linkPoints:{size:8,lineWidth:1,fill:n.activeFill,stroke:n.activeStroke}},nodeStateStyles:{active:{fill:n.activeFill,stroke:n.activeStroke,lineWidth:2,shadowColor:n.mainStroke,shadowBlur:10},selected:{fill:n.selectedFill,stroke:n.selectedStroke,lineWidth:4,shadowColor:n.selectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{fill:n.highlightFill,stroke:n.highlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{fill:n.inactiveFill,stroke:n.inactiveStroke,lineWidth:1},disable:{fill:n.disableFill,stroke:n.disableStroke,lineWidth:1}},edgeLabel:{style:{fill:"rgb(0, 0, 0)",textAlign:"center",textBaseline:"middle",fontSize:12}},defaultEdge:{type:"line",size:1,style:{stroke:n.edgeMainStroke,lineAppendWidth:2},color:n.edgeMainStroke},edgeStateStyles:{active:{stroke:n.edgeActiveStroke,lineWidth:1},selected:{stroke:n.edgeSelectedStroke,lineWidth:2,shadowColor:n.edgeSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:n.edgeHighlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{stroke:n.edgeInactiveStroke,lineWidth:1},disable:{stroke:n.edgeDisableStroke,lineWidth:1}},comboLabel:{style:{fill:"rgb(0, 0, 0)",textBaseline:"middle",fontSize:12},refY:10,refX:10},defaultCombo:{type:"circle",style:{fill:n.comboMainFill,lineWidth:1,stroke:n.comboMainStroke,r:5,width:20,height:10},size:[20,5],color:n.comboMainStroke,padding:[25,20,15,20]},comboStateStyles:{active:{stroke:n.comboActiveStroke,lineWidth:1,fill:n.comboActiveFill},selected:{stroke:n.comboSelectedStroke,lineWidth:2,fill:n.comboSelectedFill,shadowColor:n.comboSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:n.comboHighlightStroke,lineWidth:2,fill:n.comboHighlightFill,"text-shape":{fontWeight:500}},inactive:{stroke:n.comboInactiveStroke,fill:n.comboInactiveFill,lineWidth:1},disable:{stroke:n.comboDisableStroke,fill:n.comboDisableFill,lineWidth:1}},delegateStyle:{fill:"#F3F9FF",fillOpacity:.5,stroke:"#1890FF",strokeOpacity:.9,lineDash:[5,5]},textWaterMarkerConfig:{width:150,height:100,compatible:!1,text:{x:0,y:60,lineHeight:20,rotate:20,fontSize:14,fontFamily:"Microsoft YaHei",fill:"rgba(0, 0, 0, 0.1)",baseline:"Middle"}},imageWaterMarkerConfig:{width:150,height:130,compatible:!1,image:{x:0,y:0,width:30,height:20,rotate:0}},waterMarkerImage:"https://gw.alipayobjects.com/os/s/prod/antv/assets/image/logo-with-text-73b8a.svg"};t.default=o},48263:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(97582),o=r(39269),i=r(31834),a=r(48122),s=a.Util.cloneEvent,u=a.Util.isViewportChanged,l=function(e){function t(t){var r=e.call(this,t)||this;return r.extendEvents=[],r.dragging=!1,r.mousedown=!1,r.preItem=null,r.destroy(),r.graph=t,r.destroyed=!1,r.initEvents(),r}return(0,n.__extends)(t,e),t.prototype.initEvents=function(){var e=this.graph,t=this.extendEvents,r=void 0===t?[]:t,n=e.get("canvas"),a=n.get("el"),s=(0,i.wrapBehavior)(this,"onCanvasEvents"),u=(0,i.wrapBehavior)(this,"onExtendEvents"),l=(0,i.wrapBehavior)(this,"onWheelEvent");n.off("*").on("*",s),this.canvasHandler=s,r.push((0,o.addEventListener)(a,"wheel",l)),"undefined"!=typeof window&&(r.push((0,o.addEventListener)(window,"keydown",u)),r.push((0,o.addEventListener)(window,"keyup",u)),r.push((0,o.addEventListener)(window,"focus",u))),this.resetHandler&&e.off("afterchangedata",this.resetHandler),this.resetHandler=(0,i.wrapBehavior)(this,"resetStatus"),e.on("afterchangedata",this.resetHandler)},t.getItemRoot=function(e){for(;e&&!e.get("item");)e=e.get("parent");return e},t.prototype.onCanvasEvents=function(e){var r=this,n=this.graph,o=n.get("canvas"),i=e.target,a=e.type;switch(a){case"drag":this.onCanvasEvents(Object.assign({},e,{type:"mousemove"}));break;case"dragend":this.onCanvasEvents(Object.assign({},e,{type:"mouseup"}));break;case"mousedown":this.mousedown=!0;break;case"dragend":case"mouseup":setTimeout(function(){return r.mousedown=!1});break;case"click":if(!this.mousedown)return}e.canvasX=e.x,e.canvasY=e.y;var s={x:e.canvasX,y:e.canvasY},l=n.get("group").getMatrix();if(l||(l=[1,0,0,0,1,0,0,0,1]),u(l)&&(s=n.getPointByClient(e.clientX,e.clientY)),e.x=s.x,e.y=s.y,e.currentTarget=n,i===o)return"mousemove"!==a&&"mouseleave"!==a||this.handleMouseMove(e,"canvas"),e.target=o,e.item=null,n.emit(a,e),void n.emit("canvas:".concat(a),e);var c=t.getItemRoot(i);if(c){var f=c.get("item");if(!f.destroyed){var h=f.getType();if(e.target=i,e.item=f,e.canvasX===e.x&&e.canvasY===e.y){var p=n.getCanvasByPoint(e.x,e.y);e.canvasX=p.x,e.canvasY=p.y}e.name&&!e.name.includes(":")?(n.emit("".concat(h,":").concat(a),e),n.emit(a,e)):e.name&&n.emit(e.name,e),"dragstart"===a&&(this.dragging=!0),"dragend"===a&&(this.dragging=!1),"mousemove"===a&&this.handleMouseMove(e,h)}}else n.emit(a,e)},t.prototype.onExtendEvents=function(e){this.graph.emit(e.type,e)},t.prototype.onWheelEvent=function(e){(0,i.isNil)(e.wheelDelta)&&(e.wheelDelta=-e.detail),this.graph.emit("wheel",e)},t.prototype.handleMouseMove=function(e,t){var r=this.graph,n=this.preItem,o=r.get("canvas"),i=e.target===o?null:e.item;e=s(e),n&&n!==i&&!n.destroyed&&(e.item=n,this.emitCustomEvent(n.getType(),"mouseleave",e),this.dragging&&this.emitCustomEvent(n.getType(),"dragleave",e)),i&&n!==i&&(e.item=i,this.emitCustomEvent(t,"mouseenter",e),this.dragging&&this.emitCustomEvent(t,"dragenter",e)),this.preItem=i},t.prototype.emitCustomEvent=function(e,t,r){r.type=t,this.graph.emit("".concat(e,":").concat(t),r)},t.prototype.resetStatus=function(){this.mousedown=!1,this.dragging=!1,this.preItem=null},t.prototype.destroy=function(){var e=this.graph,t=this.canvasHandler,r=this.extendEvents;e.get("canvas").off("*",t),(0,i.each)(r,function(e){e.remove()}),this.resetStatus(),this.extendEvents.length=0,this.canvasHandler=null,this.resetHandler=null,this.destroyed=!0},t}(a.AbstractEvent);t.default=l},74278:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"EventController",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(t,"LayoutController",{enumerable:!0,get:function(){return o.default}});var n=i(r(48263)),o=i(r(71426));function i(e){return e&&e.__esModule?e:{default:e}}},71426:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(97582),o=r(48122),i=r(39849),a=r(88405),s=r(89996),u=r(59271),l=r(31834);function c(e){"@babel/helpers - typeof";return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var f=function(e){return setTimeout(e,16)},h=function(e){return clearTimeout(e)},p=function(e){return("undefined"!=typeof window&&(window.requestAnimationFrame||window.webkitRequestAnimationFrame)||f)(e)},d=function(e){return("undefined"!=typeof window&&(window.cancelAnimationFrame||window.webkitCancelAnimationFrame)||h)(e)},y=["fruchterman","gForce"],v=["force","grid","circular"],g=function(e){function t(t){var r=e.call(this,t)||this;return r.graph=t,r.layoutCfg=t.get("layout")||{},r.layoutType=r.getLayoutType(),r.worker=null,r.workerData={},r.initLayout(),r}return(0,n.__extends)(t,e),t.prototype.initLayout=function(){},t.prototype.getWorker=function(){return this.worker?this.worker:("undefined"==typeof Worker?(console.warn("Web worker is not supported in current browser."),this.worker=null):this.worker=(0,a.LayoutWorker)(this.layoutCfg.workerScriptURL),this.worker)},t.prototype.stopWorker=function(){var e=this.workerData;this.worker&&(this.worker.terminate(),this.worker=null,e.requestId&&(d(e.requestId),e.requestId=null),e.requestId2&&(d(e.requestId2),e.requestId2=null))},t.prototype.execLayoutMethod=function(e,t){var r=this;return new Promise(function(a,s){return(0,n.__awaiter)(r,void 0,void 0,function(){var r,u,l,c,f,h,p,d,y;return(0,n.__generator)(this,function(n){switch(n.label){case 0:if(!(r=this.graph)||r.get("destroyed"))return[2];u=e.type,e.onLayoutEnd=function(){r.emit("aftersublayout",{type:u}),a()},u&&this.isGPU&&(b(u)?u="".concat(u,"-gpu"):console.warn("The '".concat(u,"' layout does not support GPU calculation for now, it will run in CPU."))),o.Util.isForce(u)?(l=e.onTick,c=e.animate,f=void 0===c&&("force"===u||"force2"===u),d=function(){l&&l(),(c||f)&&r.refreshPositions()},e.tick=d):"comboForce"!==u&&"comboCombined"!==u||(e.comboTrees=r.get("comboTrees")),!1;try{h=new i.Layout[u](e),this.layoutMethods[t]&&this.layoutMethods[t].destroy(),this.layoutMethods[t]=h}catch(e){console.warn("The layout method: '".concat(u,"' does not exist! Please specify it first.")),s()}return h.enableTick&&(p=e.onTick,d=function(){p&&p(),r.refreshPositions()},h.tick=d),function(e,t){var r;if(!(null===(r=null===e||void 0===e?void 0:e.nodes)||void 0===r?void 0:r.length))return;e.nodes.forEach(function(e){e.layoutOrder=t})}(y=this.filterLayoutData(this.data,e),t),h.init(y),r.emit("beforesublayout",{type:u}),[4,h.execute()];case 1:return n.sent(),h.isCustomLayout&&e.onLayoutEnd&&e.onLayoutEnd(),[2]}})})})},t.prototype.updateLayoutMethod=function(e,t){var r=this;return new Promise(function(i,a){return(0,n.__awaiter)(r,void 0,void 0,function(){var r,a,s,u,l,c,f;return(0,n.__generator)(this,function(n){switch(n.label){case 0:return r=this.graph,a=null===t||void 0===t?void 0:t.type,t.onLayoutEnd=function(){r.emit("aftersublayout",{type:a}),i()},o.Util.isForce(a)&&(s=t.onTick,u=t.animate,l=void 0===u&&("force"===a||"force2"===a),c=function(){null===s||void 0===s||s(),(u||l)&&r.refreshPositions()},t.tick=c),f=this.filterLayoutData(this.data,t),e.init(f),e.updateCfg(t),r.emit("beforesublayout",{type:a}),[4,e.execute()];case 1:return n.sent(),e.isCustomLayout&&t.onLayoutEnd&&t.onLayoutEnd(),[2]}})})})},t.prototype.layout=function(e){var t,r=this,o=this.graph;if(o&&!o.get("destroyed")){this.data=this.setDataFromGraph();var i=this.data,a=i.nodes,s=i.hiddenNodes;if(!a)return!1;var u=o.get("width"),l=o.get("height"),c={};Object.assign(c,{width:u,height:l,center:[u/2,l/2]},this.layoutCfg),this.layoutCfg=c;var f=c.type,h=!1;null===(t=this.layoutMethods)||void 0===t||t.forEach(function(e){var t;return h=!!(null===(t=e.nodes)||void 0===t?void 0:t.length)||h});var p=this.destoryLayoutMethods();o.emit("beforelayout");var d=Promise.resolve();h&&f&&1===(null===p||void 0===p?void 0:p.length)&&p[0]===f?this.tweakInit():d=this.initPositions(c.center,a),this.initPositions(c.center,s).then(),this.isGPU=w(c,f);var y=c.onLayoutEnd,v=c.layoutEndFormatted,g=c.adjust;if(v||(c.layoutEndFormatted=!0,c.onAllLayoutEnd=function(){return(0,n.__awaiter)(r,void 0,void 0,function(){return(0,n.__generator)(this,function(e){switch(e.label){case 0:return y&&y(a),this.refreshLayout(),g&&c.pipes?[4,this.adjustPipesBox(this.data,g)]:[3,2];case 1:e.sent(),this.refreshLayout(),e.label=2;case 2:return o.emit("afterlayout"),[2]}})})}),this.stopWorker(),c.workerEnabled&&this.layoutWithWorker(this.data,e))return!0;var m=!1;return c.type?(m=!0,d=d.then(function(){return(0,n.__awaiter)(r,void 0,void 0,function(){return(0,n.__generator)(this,function(e){switch(e.label){case 0:return[4,this.execLayoutMethod(c,0)];case 1:return[2,e.sent()]}})})})):c.pipes&&(m=!0,c.pipes.forEach(function(e,t){d=d.then(function(){return(0,n.__awaiter)(r,void 0,void 0,function(){return(0,n.__generator)(this,function(r){switch(r.label){case 0:return[4,this.execLayoutMethod(e,t)];case 1:return[2,r.sent()]}})})})})),m?d.then(function(){c.onAllLayoutEnd&&c.onAllLayoutEnd(),e&&e()}).catch(function(e){console.warn("graph layout failed,",e)}):(o.refreshPositions(),null===e||void 0===e||e()),!1}},t.prototype.tweakInit=function(){var e=this.data,t=this.graph,r=e.nodes,n=e.edges;if(null===r||void 0===r?void 0:r.length){var o={};r.forEach(function(e){var t=e.x,r=e.y;isNaN(t)||isNaN(r)||(o[e.id]={x:t,y:r},e.mass=e.mass||2)}),n.forEach(function(e){var t=e.source,r=e.target,n=o[t],i=o[r];!n&&i?o[t]={x:i.x+80*(Math.random()-.5),y:i.y+80*(Math.random()-.5)}:!i&&n&&(o[r]={x:n.x+80*(Math.random()-.5),y:n.y+80*(Math.random()-.5)})});var i=t.get("width"),a=t.get("height");r.forEach(function(e){var t=o[e.id]||{x:i/2+20*(Math.random()-.5),y:a/2+20*(Math.random()-.5)};e.x=t.x,e.y=t.y})}},t.prototype.initWithPreset=function(e,t){var r=this;return new Promise(function(o,a){return(0,n.__awaiter)(r,void 0,void 0,function(){var r,a,s,u,l,c,f;return(0,n.__generator)(this,function(n){switch(n.label){case 0:return a=(r=this).layoutCfg,s=r.data,(null===(u=a.preset)||void 0===u?void 0:u.type)&&i.Layout[null===u||void 0===u?void 0:u.type]?(l=w(u,u.type),c=l?"".concat(u.type,"-gpu"):u.type,f=new i.Layout[c](u),delete a.preset,f.init(s),[4,f.execute()]):(null===t||void 0===t||t(),o(),[2,!1]);case 1:return n.sent(),null===e||void 0===e||e(),o(),[2,!0]}})})})},t.prototype.layoutWithWorker=function(e,t){var r=this,n=this.layoutCfg,o=this.graph,i=this.getWorker(),a=this.workerData;if(!i)return!1;a.requestId=null,a.requestId2=null,a.currentTick=null,a.currentTickData=null,o.emit("beforelayout");var s=Promise.resolve(),u=!1;if(n.type)u=!0,s=s.then(function(){return r.runWebworker(i,e,n)});else if(n.pipes){u=!0;for(var l=function(t){s=s.then(function(){return r.runWebworker(i,e,t)})},c=0,f=n.pipes;c<f.length;c++){l(f[c])}}return u&&s.then(function(){n.onAllLayoutEnd&&n.onAllLayoutEnd(),null===t||void 0===t||t()}).catch(function(e){console.error("layout failed",e)}),!0},t.prototype.runWebworker=function(e,t,r){var n=this,o=this.isGPU,i=this.filterLayoutData(t,r),a=i.nodes,u=i.edges,l=document.createElement("canvas"),f=o&&"undefined"!=typeof window&&window.navigator&&!navigator.gpu&&"OffscreenCanvas"in window&&"transferControlToOffscreen"in l,h=function(e,t){var r={};if(e&&"object"===c(e))return Object.keys(e).forEach(function(n){e.hasOwnProperty(n)&&t(e[n])&&(r[n]=e[n])}),r;return e}(r,function(e){return"function"!=typeof e});if(f){var p=l.transferControlToOffscreen();h.type="".concat(h.type,"-gpu"),e.postMessage({type:s.LAYOUT_MESSAGE.GPURUN,nodes:a,edges:u,layoutCfg:h,canvas:p},[p])}else e.postMessage({type:s.LAYOUT_MESSAGE.RUN,nodes:a,edges:u,layoutCfg:h});return new Promise(function(t,o){e.onmessage=function(e){n.handleWorkerMessage(t,o,e,i,r)}})},t.prototype.handleWorkerMessage=function(e,t,r,n,o){var i=this.graph,a=this.workerData,u=r.data,l=function(){o.onTick&&o.onTick()};switch(u.type){case s.LAYOUT_MESSAGE.TICK:a.currentTick=u.currentTick,a.currentTickData=u,a.requestId||(a.requestId=p(function(){m(n,u),i.refreshPositions(),l(),u.currentTick===u.totalTicks?e():a.currentTick===u.totalTicks&&(a.requestId2=p(function(){m(n,a.currentTickData),i.refreshPositions(),a.requestId2=null,l(),e()})),a.requestId=null}));break;case s.LAYOUT_MESSAGE.END:null==a.currentTick&&(m(n,u),e());break;case s.LAYOUT_MESSAGE.GPUEND:null==a.currentTick&&(!function(e,t){for(var r=e.nodes,n=t.vertexEdgeData,o=r.length,i=0;i<o;i++){var a=r[i],s=n[4*i],u=n[4*i+1];a.x=s,a.y=u}}(n,u),e());break;case s.LAYOUT_MESSAGE.ERROR:console.warn("Web-Worker layout error!",u.message),t();break;default:t()}},t.prototype.updateLayoutCfg=function(e){var t=this,r=this.graph,o=this.layoutMethods;if(r&&!r.get("destroyed")){var i=e.disableTriggerLayout,a=(0,n.__rest)(e,["disableTriggerLayout"]),s=(0,l.mix)({},this.layoutCfg,a);if(this.layoutCfg=s,!i)if(null===o||void 0===o?void 0:o.length){if(this.data=this.setDataFromGraph(),this.stopWorker(),!a.workerEnabled||!this.layoutWithWorker(this.data,null)){r.emit("beforelayout");var u=Promise.resolve(),c=!1;1===(null===o||void 0===o?void 0:o.length)?(c=!0,u=u.then(function(){return(0,n.__awaiter)(t,void 0,void 0,function(){return(0,n.__generator)(this,function(e){switch(e.label){case 0:return[4,this.updateLayoutMethod(o[0],s)];case 1:return[2,e.sent()]}})})})):(null===o||void 0===o?void 0:o.length)&&(c=!0,o.forEach(function(e,r){var o=s.pipes[r];u=u.then(function(){return(0,n.__awaiter)(t,void 0,void 0,function(){return(0,n.__generator)(this,function(t){switch(t.label){case 0:return[4,this.updateLayoutMethod(e,o)];case 1:return[2,t.sent()]}})})})})),c&&u.then(function(){s.onAllLayoutEnd&&s.onAllLayoutEnd()}).catch(function(e){console.warn("layout failed",e)})}}else this.layout()}},t.prototype.adjustPipesBox=function(e,t){var r=this;return new Promise(function(n){var o=e.nodes;(null===o||void 0===o?void 0:o.length)||n(),v.includes(t)||(console.warn("The adjust type ".concat(t," is not supported yet, please assign it with 'force', 'grid', or 'circular'.")),n());var a={center:r.layoutCfg.center,nodeSize:function(e){return Math.max(e.height,e.width)},preventOverlap:!0,onLayoutEnd:function(){}},s=r.getLayoutBBox(o),u=s.groupNodes,c=s.layoutNodes,f=(0,l.clone)(c);a.onLayoutEnd=function(){null===c||void 0===c||c.forEach(function(e,t){var r,n,o,i=e.x-(null===(r=f[t])||void 0===r?void 0:r.x),a=e.y-(null===(n=f[t])||void 0===n?void 0:n.y);null===(o=u[t])||void 0===o||o.forEach(function(e){e.x+=i,e.y+=a})}),n()},new i.Layout[t](a).layout({nodes:c})})},t.prototype.destroy=function(){this.destoryLayoutMethods();var e=this.worker;e&&(e.terminate(),this.worker=null),this.destroyed=!0,this.graph.set("layout",void 0),this.layoutCfg=void 0,this.layoutType=void 0,this.layoutMethods=void 0,this.graph=null},t}(o.AbstractLayout);function m(e,t){for(var r=e.nodes,n=t.nodes,o=r.length,i=0;i<o;i++){var a=r[i];a.x=n[i].x,a.y=n[i].y}}function b(e){return y.includes(e)}function w(e,t){var r=t;t&&"gpu"===t.split("-")[1]&&(r=t.split("-")[0],e.gpuEnabled=!0);var n=!1;return e.gpuEnabled&&(n=!0,(0,u.gpuDetector)().webgl||(console.warn("Your browser does not support webGL or GPGPU. The layout will run in CPU."),n=!1)),n&&!b(r)&&(console.warn("The '".concat(r,"' layout does not support GPU calculation for now, it will run in CPU.")),n=!1),n}t.default=g},99042:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,o=r(97582),i=r(15873),a=r(32227),s=r(48122),u=r(43708),l=r(31834),c=r(39269),f=(n=r(31339))&&n.__esModule?n:{default:n},h=r(97082),p=r(74278);var d=u.ext.transform,y=function(e){function t(t){var r=e.call(this,t)||this,n=r.get("defaultNode");return n||r.set("defaultNode",{type:"circle"}),n.type||(n.type="circle",r.set("defaultNode",n)),r.destroyed=!1,r}return(0,o.__extends)(t,e),t.prototype.initLayoutController=function(){var e=new p.LayoutController(this);this.set({layoutController:e})},t.prototype.initEventController=function(){var e=new p.EventController(this);this.set({eventController:e})},t.prototype.initCanvas=function(){var e=this.get("container");if("string"==typeof e&&(e=document.getElementById(e),this.set("container",e)),!e)throw new Error("invalid container");var t,r=e.clientWidth,n=e.clientHeight,o=this.get("width")||r,s=this.get("height")||n;if(this.get("width")||this.get("height")||(this.set("width",r),this.set("height",n)),"svg"===this.get("renderer"))t=new a.Canvas({container:e,width:o,height:s});else{var u={container:e,width:o,height:s},l=this.get("pixelRatio");l&&(u.pixelRatio=l,window.devicePixelRatio=l),t=new i.Canvas(u)}this.set("canvas",t)},t.prototype.initPlugins=function(){var e=this;(0,l.each)(e.get("plugins"),function(t){!t.destroyed&&t.initPlugin&&t.initPlugin(e)})},t.prototype.downloadImageWatermark=function(e,t,r,n){return(0,o.__awaiter)(this,void 0,void 0,function(){var i,a,s;return(0,o.__generator)(this,function(o){switch(o.label){case 0:return i=e.style.backgroundImage,a=i.slice(5,i.length-2),(s=new Image).src=a,[4,new Promise(function(e){s.onload=function(){var o=t.createPattern(s,"repeat");t.rect(0,0,r,n),t.fillStyle=o,t.fill(),e("")}})];case 1:return o.sent(),[2]}})})},t.prototype.asyncToDataUrl=function(e,t,r,n,i,a){var s=this,u=document.querySelector(".g6-graph-watermarker"),l=this.get("canvas"),c=l.getRenderer(),f=a||l.get("el"),h="";e||(e="image/png"),setTimeout(function(){return(0,o.__awaiter)(s,void 0,void 0,function(){var a,s,l,p,d,y,v,g,m,b;return(0,o.__generator)(this,function(o){switch(o.label){case 0:return"svg"!==c?[3,1]:(a=f.cloneNode(!0),s=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),(l=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",s)).replaceChild(a,l.documentElement),p=(new XMLSerializer).serializeToString(l),h="data:image/svg+xml;charset=utf8,".concat(encodeURIComponent(p)),[3,4]);case 1:return d=void 0,y=f.getContext("2d"),v=n||this.get("width"),g=i||this.get("height"),m=void 0,u?[4,this.downloadImageWatermark(u,y,v,g)]:[3,3];case 2:o.sent(),o.label=3;case 3:if(t){b="undefined"!=typeof window?window.devicePixelRatio:1;try{d=y.getImageData(0,0,v*b,g*b),m=y.globalCompositeOperation,y.globalCompositeOperation="destination-over",y.fillStyle=t,y.fillRect(0,0,v,g)}catch(e){console.error("Download image failed. Out of memory at ImageData creation")}}h=f.toDataURL(e),t&&(y.clearRect(0,0,v,g),y.putImageData(d,0,0),y.globalCompositeOperation=m),o.label=4;case 4:return r&&r(h),[2]}})})},16)},t.prototype.toDataURL=function(e,t){var r=this.get("canvas"),n=r.getRenderer(),o=r.get("el");e||(e="image/png");var i="";if("svg"===n){var a=o.cloneNode(!0),s=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),u=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",s);u.replaceChild(a,u.documentElement);var l=(new XMLSerializer).serializeToString(u);i="data:image/svg+xml;charset=utf8,".concat(encodeURIComponent(l))}else{var c=void 0,f=o.getContext("2d"),h=Math.max(this.get("width"),500),p=Math.max(this.get("height"),500),d=void 0;if(t){var y="undefined"!=typeof window&&window.devicePixelRatio||1;try{c=f.getImageData(0,0,h*y,p*y),d=f.globalCompositeOperation,f.globalCompositeOperation="destination-over",f.fillStyle=t,f.fillRect(0,0,h,p)}catch(e){console.error("Download image failed. Out of memory at ImageData creation")}}i=o.toDataURL(e),t&&(f.clearRect(0,0,h,p),f.putImageData(c,0,0),f.globalCompositeOperation=d)}return i},t.prototype.toFullDataURL=function(e,t,r){var n=this.get("group").getCanvasBBox(),o=n.height,s=n.width,u=this.get("renderer"),f=(0,c.createDom)('<div id="virtual-image"></div>'),h=r?r.backgroundColor:void 0,p=r?r.padding:void 0;p?(0,l.isNumber)(p)&&(p=[p,p,p,p]):p=[0,0,0,0];var y=o+p[0]+p[2],v=s+p[1]+p[3],g={container:f,height:y,width:v,quickHit:!0},m="svg"===u?new a.Canvas(g):new i.Canvas(g),b=this.get("group").clone(),w=(0,l.clone)(b.getMatrix());w||(w=[1,0,0,0,1,0,0,0,1]);var _=(n.maxX+n.minX)/2,x=(n.maxY+n.minY)/2;w=d(w,[["t",-_,-x],["t",s/2+p[3],o/2+p[0]]]),b.resetMatrix(),b.setMatrix(w),m.add(b);var S=m.get("el"),O="";t||(t="image/png"),setTimeout(function(){if("svg"===u){var r=S.cloneNode(!0),n=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),o=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",n);o.replaceChild(r,o.documentElement);var i=(new XMLSerializer).serializeToString(o);O="data:image/svg+xml;charset=utf8,".concat(encodeURIComponent(i))}else{var a=void 0,s=S.getContext("2d"),l=void 0;if(h){var c="undefined"!=typeof window?window.devicePixelRatio:1;try{a=s.getImageData(0,0,v*c,y*c),l=s.globalCompositeOperation,s.globalCompositeOperation="destination-over",s.fillStyle=h,s.fillRect(0,0,v,y)}catch(e){console.error("Download image failed. Out of memory at ImageData creation")}}O=S.toDataURL(t),h&&(s.clearRect(0,0,v,y),s.putImageData(a,0,0),s.globalCompositeOperation=l)}e&&e(O)},16)},t.prototype.downloadFullImage=function(e,t,r){var n=this,o=this.get("group").getCanvasBBox(),s=o.height,u=o.width,f=this.get("renderer"),p=(0,c.createDom)('<div id="virtual-image"></div>'),y=document.querySelector(".g6-graph-watermarker"),v=r?r.backgroundColor:void 0,g=r?r.padding:void 0;g?(0,l.isNumber)(g)&&(g=[g,g,g,g]):g=[0,0,0,0];var m=s+g[0]+g[2],b=u+g[1]+g[3];if(y){var w=this.get("graphWaterMarker").cfg||{},_=w.width,x=w.height;m=Math.ceil(m/x)*x,b=Math.ceil(b/_)*_}var S={container:p,height:m,width:b},O="svg"===f?new a.Canvas(S):new i.Canvas(S),P=this.get("group"),E=(0,h.cloneGElement)(P),k=(0,l.clone)(E.getMatrix());k||(k=[1,0,0,0,1,0,0,0,1]);var M=(o.maxX+o.minX)/2,C=(o.maxY+o.minY)/2;k=d(k,[["t",-M,-C],["t",u/2+g[3],s/2+g[0]]]),E.resetMatrix(),E.setMatrix(k),O.add(E);var j=O.get("el");t||(t="image/png"),this.asyncToDataUrl(t,v,function(r){var o=document.createElement("a"),i=(e||"graph")+("svg"===f?".svg":".".concat(t.split("/")[1]));n.dataURLToImage(r,f,o,i);var a=document.createEvent("MouseEvents");a.initEvent("click",!1,!1),o.dispatchEvent(a)},b,m,j)},t.prototype.downloadImage=function(e,t,r){var n=this;this.stopAnimate();var o=this.get("canvas").getRenderer();t||(t="image/png");var i=(e||"graph")+("svg"===o?".svg":".".concat(t.split("/")[1])),a=document.createElement("a");this.asyncToDataUrl(t,r,function(e){n.dataURLToImage(e,o,a,i);var t=document.createEvent("MouseEvents");t.initEvent("click",!1,!1),a.dispatchEvent(t)})},t.prototype.dataURLToImage=function(e,t,r,n){if(e&&"data:"!==e){if("undefined"!=typeof window)if(window.Blob&&window.URL&&"svg"!==t){var o=e.split(","),i="";if(o&&o.length>0){var a=o[0].match(/:(.*?);/);a&&a.length>=2&&(i=a[1])}for(var s=atob(o[1]),u=s.length,l=new Uint8Array(u);u--;)l[u]=s.charCodeAt(u);var c=new Blob([l],{type:i});window.navigator.msSaveBlob?window.navigator.msSaveBlob(c,n):r.addEventListener("click",function(){r.download=n,r.href=window.URL.createObjectURL(c)})}else r.addEventListener("click",function(){r.download=n,r.href=e})}else console.error("Download image failed. The graph is too large or there is invalid attribute values in graph items")},t.prototype.addPlugin=function(e){e.destroyed||(this.get("plugins").push(e),e.initPlugin(this))},t.prototype.removePlugin=function(e){var t=this.get("plugins"),r=t.indexOf(e);r>=0&&(e.destroyPlugin(),t.splice(r,1))},t.prototype.setImageWaterMarker=function(e,t){void 0===e&&(e=f.default.waterMarkerImage);var r=this.get("container");(0,l.isString)(r)&&(r=document.getElementById(r)),r.style.position||(r.style.position="relative");var n=this.get("graphWaterMarker"),o=(0,l.deepMix)({},f.default.imageWaterMarkerConfig,t),a=o.width,s=o.height,u=o.compatible,c=o.image;if(!e){var h=u?r:document.querySelector(".g6-graph-watermarker");return h&&(h.style.cssText=void 0),void(n&&n.clear())}if(n)n.clear();else{var p={container:r,width:a,height:s,capture:!1},d=this.get("pixelRatio");d&&(p.pixelRatio=d,window.devicePixelRatio=d),n=new i.Canvas(p),this.set("graphWaterMarker",n)}n.get("el").style.display="none";var y=n.get("context"),v=c.rotate,g=c.x,m=c.y;y.rotate(-v*Math.PI/180);var b=new Image;b.crossOrigin="anonymous",b.src=e,b.onload=function(){if(y.drawImage(b,g,m,c.width,c.height),y.rotate(v*Math.PI/180),u)r.style.cssText="background-image: url(".concat(n.get("el").toDataURL("image/png"),");background-repeat:repeat;");else{var e=document.querySelector(".g6-graph-watermarker");e||((e=document.createElement("div")).className="g6-graph-watermarker"),e.className="g6-graph-watermarker",n.destroyed||(e.style.cssText="background-image: url(".concat(n.get("el").toDataURL("image/png"),");background-repeat:repeat;position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:none;z-index:-1;"),r.appendChild(e))}}},t.prototype.setTextWaterMarker=function(e,t){var r=this.get("container");(0,l.isString)(r)&&(r=document.getElementById(r)),r.style.position||(r.style.position="relative");var n=this.get("graphWaterMarker"),o=(0,l.deepMix)({},f.default.textWaterMarkerConfig,t),a=o.width,s=o.height,u=o.compatible,c=o.text;if(!(null===e||void 0===e?void 0:e.length)){var h=u?r:document.querySelector(".g6-graph-watermarker");return h&&(h.style.cssText=void 0),void(n&&n.clear())}if(n)n.clear();else{var p={container:r,width:a,height:s,capture:!1},d=this.get("pixelRatio");d&&(p.pixelRatio=d,window.devicePixelRatio=d),n=new i.Canvas(p),this.set("graphWaterMarker",n)}n.get("el").style.display="none";var y=n.get("context"),v=c.rotate,g=c.fill,m=c.fontFamily,b=c.fontSize,w=c.baseline,_=c.x,x=c.y,S=c.lineHeight;y.rotate(-v*Math.PI/180),y.font="".concat(b,"px ").concat(m),y.fillStyle=g,y.textBaseline=w;for(var O=(0,l.isString)(e)?[e]:e,P=O.length-1;P>=0;P--)y.fillText(O[P],_,x+P*S);if(y.rotate(v*Math.PI/180),u)r.style.cssText="background-image: url(".concat(n.get("el").toDataURL("image/png"),");background-repeat:repeat;");else{var E=document.querySelector(".g6-graph-watermarker");E||((E=document.createElement("div")).className="g6-graph-watermarker"),E.style.cssText="background-image: url(".concat(n.get("el").toDataURL("image/png"),");background-repeat:repeat;position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:none;z-index:99;"),r.appendChild(E)}},t.prototype.destroy=function(){var t,r,n,o;(0,l.each)(this.get("plugins"),function(e){e.destroyPlugin()});var i=this.get("tooltips");if(i)for(var a=0;a<i.length;a++){var s=i[a];if(s){var u=s.parentElement;u&&u.removeChild(s)}}null===(t=this.get("eventController"))||void 0===t||t.destroy(),null===(r=this.get("layoutController"))||void 0===r||r.destroy(),null===(n=this.get("graphWaterMarker"))||void 0===n||n.destroy(),null===(o=document.querySelector(".g6-graph-watermarker"))||void 0===o||o.remove(),e.prototype.destroy.call(this)},t}(s.AbstractGraph);t.default=y},83701:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(97582),o=l(r(6977)),i=r(31834),a=l(r(85698)),s=r(71441),u=l(r(99042));function l(e){return e&&e.__esModule?e:{default:e}}var c=a.default.radialLayout,f=a.default.traverseTree,h=function(e){function t(t){var r=e.call(this,t)||this;return r.layoutAnimating=!1,r.set("removeList",[]),r.set("layoutMethod",r.getLayout()),r}return(0,n.__extends)(t,e),t.prototype.getLayout=function(){var e=this.get("layout");return e?"function"==typeof e?e:(e.type||(e.type="dendrogram"),e.direction||(e.direction="indented"===e.type?"LR":"TB"),e.radial?function(t){var r=o.default[e.type](t,e);return c(r),r}:function(t){return o.default[e.type](t,e)}):null},t.indexOfChild=function(e,t){var r=-1;return(0,i.each)(e,function(e,n){if(t===e.id)return r=n,!1}),r},t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return t.animate=!0,t},t.prototype.innerAddChild=function(e,t,r){var n=this,o=e.data;o&&(o.x=e.x,o.y=e.y,o.depth=e.depth);var a=n.addItem("node",o,!1);if(t){if(a.set("parent",t),r){var s=t.get("originAttrs");if(s)a.set("originAttrs",s);else{var u=t.getModel();a.set("originAttrs",{x:u.x,y:u.y})}}var l=t.get("children");l?l.push(a):t.set("children",[a]),n.addItem("edge",{source:t.get("id"),target:a.get("id"),id:"".concat(t.get("id"),":").concat(a.get("id"))},!1)}return(0,i.each)(e.children||[],function(e){n.innerAddChild(e,a,r)}),n.emit("afteraddchild",{item:a,parent:t}),a},t.prototype.innerUpdateChild=function(e,r,n){var o=this,a=o.findById(e.id);if(a){(0,i.each)(e.children||[],function(e){o.innerUpdateChild(e,a,n)});var s,u,l=a.get("children");if(l)if(l.length>0)for(var c=l.length-1;c>=0;c--){var f=l[c].getModel();-1===t.indexOfChild(e.children||[],f.id)&&(o.innerRemoveChild(f.id,{x:e.x,y:e.y},n),l.splice(c,1))}a.get("originAttrs")&&(s=a.get("originAttrs").x,u=a.get("originAttrs").y);var h=a.getModel();n&&a.set("originAttrs",{x:h.x,y:h.y}),a.set("model",Object.assign(h,e.data)),s===e.x&&u===e.y||a.updatePosition({x:e.x,y:e.y})}else o.innerAddChild(e,r,n)},t.prototype.innerRemoveChild=function(e,t,r){var n=this,o=n.findById(e);if(o)if((0,i.each)(o.get("children"),function(e){n.innerRemoveChild(e.getModel().id,t,r)}),r){var a=o.getModel();o.set("to",t),o.set("originAttrs",{x:a.x,y:a.y}),n.get("removeList").push(o)}else n.removeItem(o,!1)},t.prototype.changeData=function(e,t){void 0===t&&(t=!0);var r=this;this.getNodes().map(function(e){return r.clearItemStates(e)}),this.getEdges().map(function(e){return r.clearItemStates(e)}),t&&this.get("enabledStack")&&this.pushStack("changedata",{before:r.get("originData"),after:e||r.get("data")}),e?(r.data(e),r.render(!1)):r.layout(this.get("fitView"))},t.prototype.changeLayout=function(e){console.warn("Please call updateLayout instead of changeLayout. changeLayout will be discarded soon");this.updateLayout(e)},t.prototype.updateLayout=function(e,t,r,n){void 0===n&&(n=!0);if(e){if(n&&this.get("enabledStack")&&this.pushStack("layout",{before:this.get("layout"),after:e}),this.set("layout",e),this.set("layoutMethod",this.getLayout()),this.layout(),t){var o=r;o||(o="begin"===t?{x:0,y:0}:{x:this.getWidth()/2,y:this.getHeight()/2}),o=this.getPointByCanvas(o.x,o.y);var i=this.getGroup().getMatrix()||[1,0,0,0,1,0,0,0,1];o.x=o.x*i[0]+i[6],o.y=o.y*i[0]+i[7];var a=this.getGroup().getCanvasBBox(),s=a.minX,u=a.maxX,l=a.minY,c={x:(s+u)/2,y:(l+a.maxY)/2};"begin"===t&&(c.x=s,c.y=l),this.translate(o.x-c.x,o.y-c.y)}}else console.warn("layout cannot be null")},t.prototype.refreshLayout=function(e){console.warn("Please call layout instead of refreshLayout. refreshLayout will be discarded soon");this.layout(e)},t.prototype.layout=function(e){var t=this,r=this.get("data"),n=this.get("layoutMethod"),o=this.get("layout"),a=r;if(null===o||void 0===o?void 0:o.excludeInvisibles){r=(0,i.clone)(this.get("data"));var s={};f(r,function(e){var r=e.children;if(!(null===r||void 0===r?void 0:r.length))return!0;for(var n=r.length-1;n>=0;n--){var o=t.findById(r[n].id);(o?!o.isVisible():!1===r[n].visible)&&(s[e.id]=s[e.id]||[],s[e.id].push({idx:n,child:r.splice(n,1)[0]}))}}),a=n?n(r,this.get("layout")):r,f(a,function(e){var t=s[e.id];if(null===t||void 0===t?void 0:t.length)for(var r=t.length-1;r>=0;r--){var n=t[r],o=n.idx,i=n.child;e.children.splice(o,0,i)}})}else a=n?n(r,this.get("layout")):r;var u=this.get("animate");(this.emit("beforerefreshlayout",{data:r,layoutData:a}),this.emit("beforelayout"),this.innerUpdateChild(a,void 0,u),e)&&this.get("viewController").fitView();u?this.layoutAnimate(a):(this.refresh(),this.paint()),this.emit("afterrefreshlayout",{data:r,layoutData:a}),this.emit("afterlayout")},t.prototype.addChild=function(e,t,r){void 0===r&&(r=!0);this.emit("beforeaddchild",{model:e,parent:t}),(0,i.isString)(t)||(t=t.get("id"));var n=this.findDataById(t);n&&(n.children||(n.children=[]),n.children.push(e),this.findById(t).refresh(),this.changeData(void 0,r))},t.prototype.updateChildren=function(e,t,r){void 0===r&&(r=!0);var n=this.findById(t);t&&n?(this.findDataById(t).children=e,n.refresh(),this.changeData(void 0,r)):console.warn("Update children failed! There is no node with id '".concat(t,"'"))},t.prototype.updateChild=function(e,r,n){void 0===n&&(n=!0);if(r&&this.findById(r)){var o=this.findDataById(r),i=this.findById(e.id);if(o.children||(o.children=[]),i){var a=t.indexOfChild(o.children,e.id);a>-1&&(o.children[a]=e)}else o.children.push(e);var s=this.findById(r);null===s||void 0===s||s.refresh(),this.changeData(void 0,n)}else this.changeData(e,n)},t.prototype.removeChild=function(e,r){void 0===r&&(r=!0);var n,o=this.findById(e);if((n=o?null===o||void 0===o?void 0:o.get("parent"):this.getNodes().find(function(t){return!!(t.getModel().children||[]).find(function(t){return t.id===e})}))&&!n.destroyed){var i=n.get("id"),a=this.findDataById(i),s=a&&a.children||[],u=t.indexOfChild(s,e);s.splice(u,1),n.refresh()}this.changeData(void 0,r)},t.prototype.findDataById=function(e,t){var r=this;if(t||(t=r.get("data")),e===t.id)return t;var n=null;return(0,i.each)(t.children||[],function(t){return t.id===e?(n=t,!1):!(n=r.findDataById(e,t))&&void 0}),n},t.prototype.layoutAnimate=function(e,t){var r=this,n=this.get("animateCfg");r.emit("beforeanimate",{data:e}),r.getEdges().forEach(function(e){var t=e.get("model");t.sourceAnchor||(t.sourceAnchor=e.get("sourceAnchorIndex"))}),this.get("canvas").animate(function(n){f(e,function(o){var i=r.findById(o.id);if(i){var a=i.get("originAttrs"),s=i.get("model");if(a||(a={x:s.x,y:s.y},i.set("originAttrs",a)),t){var u=t(i,n,a,e);i.set("model",Object.assign(s,u))}else s.x=a.x+(o.x-a.x)*n,s.y=a.y+(o.y-a.y)*n}return!0}),(0,i.each)(r.get("removeList"),function(e){var t=e.getModel(),r=e.get("originAttrs"),o=e.get("to");t.x=r.x+(o.x-r.x)*n,t.y=r.y+(o.y-r.y)*n}),r.refreshPositions()},{duration:n.duration,easing:n.ease,callback:function(){(0,i.each)(r.getNodes(),function(e){e.set("originAttrs",null)}),(0,i.each)(r.get("removeList"),function(e){r.removeItem(e,!1)}),r.set("removeList",[]),n.callback&&n.callback(),r.emit("afteranimate",{data:e})},delay:n.delay})},t.prototype.stopLayoutAnimate=function(){this.get("canvas").stopAnimate(),this.emit("layoutanimateend",{data:this.get("data")}),this.layoutAnimating=!1},t.prototype.isLayoutAnimating=function(){return this.layoutAnimating},t.prototype.render=function(e){void 0===e&&(e=!0);var t=this.get("data");if(!t||!(0,i.isObject)(t)||!Object.keys(t).length)throw new Error("data must be defined first");this.clear(),e&&this.get("enabledStack")&&this.clearStack(),this.emit("beforerender"),this.layout(this.get("fitView")),this.emit("afterrender")},t.prototype.save=function(){return this.get("data")},t.prototype.data=function(t){e.prototype.data.call(this,t),this.set("originData",(0,s.deepClone)(t))},t}(u.default);t.default=h},86431:function(e,t,r){"use strict";function n(e){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0});var o={Minimap:!0,Grid:!0,Bundling:!0,Menu:!0,Fisheye:!0,Algorithm:!0,ToolBar:!0,Tooltip:!0,TimeBar:!0,ImageMinimap:!0,EdgeFilterLens:!0,SnapLine:!0,Legend:!0,Annotation:!0,Arrow:!0,Marker:!0,Shape:!0,Graph:!0,TreeGraph:!0,TreeLayout:!0,Layout:!0,registerLayout:!0,Global:!0,Util:!0};t.Annotation=t.Algorithm=void 0,Object.defineProperty(t,"Arrow",{enumerable:!0,get:function(){return a.Arrow}}),t.Fisheye=t.EdgeFilterLens=t.Bundling=void 0,Object.defineProperty(t,"Global",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(t,"Graph",{enumerable:!0,get:function(){return l.default}}),t.ImageMinimap=t.Grid=void 0,Object.defineProperty(t,"Layout",{enumerable:!0,get:function(){return f.Layout}}),t.Legend=void 0,Object.defineProperty(t,"Marker",{enumerable:!0,get:function(){return a.Marker}}),t.Minimap=t.Menu=void 0,Object.defineProperty(t,"Shape",{enumerable:!0,get:function(){return a.Shape}}),t.Tooltip=t.ToolBar=t.TimeBar=t.SnapLine=void 0,Object.defineProperty(t,"TreeGraph",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(t,"TreeLayout",{enumerable:!0,get:function(){return f.TreeLayout}}),Object.defineProperty(t,"Util",{enumerable:!0,get:function(){return p.default}}),t.default=void 0,Object.defineProperty(t,"registerLayout",{enumerable:!0,get:function(){return f.registerLayout}});var i=r(97582),a=r(48122);Object.keys(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(o,e)||e in t&&t[e]===a[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}}))});var s=b(r(81366)),u=b(r(26765)),l=g(r(99042)),c=g(r(83701)),f=r(39849),h=g(r(31339)),p=g(r(85698)),d=g(r(27419));r(68950),r(5312);var y=r(98880);Object.keys(y).forEach(function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(o,e)||e in t&&t[e]===y[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return y[e]}}))});var v=r(13383);function g(e){return e&&e.__esModule?e:{default:e}}function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(m=function(e){return e?r:t})(e)}function b(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var r=m(t);if(r&&r.has(e))return r.get(e);var o={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=i?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(o,a,s):o[a]=e[a]}return o.default=e,r&&r.set(e,o),o}Object.keys(v).forEach(function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(o,e)||e in t&&t[e]===v[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return v[e]}}))});var w=(0,i.__assign)((0,i.__assign)({},s),u);t.Algorithm=w;var _=d.default.Grid;t.Grid=_;var x=d.default.Minimap;t.Minimap=x;var S=d.default.Bundling;t.Bundling=S;var O=d.default.Menu;t.Menu=O;var P=d.default.Fisheye;t.Fisheye=P;var E=d.default.ToolBar;t.ToolBar=E;var k=d.default.Tooltip;t.Tooltip=k;var M=d.default.TimeBar;t.TimeBar=M;var C=d.default.ImageMinimap;t.ImageMinimap=C;var j=d.default.EdgeFilterLens;t.EdgeFilterLens=j;var T=d.default.SnapLine;t.SnapLine=T;var A=d.default.Legend;t.Legend=A;var I=d.default.Annotation;t.Annotation=I;var R={version:h.default.version,Graph:l.default,TreeGraph:c.default,Util:p.default,Layout:f.Layout,TreeLayout:f.TreeLayout,registerLayout:f.registerLayout,Global:h.default,registerBehavior:a.registerBehavior,registerCombo:a.registerCombo,registerEdge:a.registerEdge,registerNode:a.registerNode,Minimap:d.default.Minimap,Grid:d.default.Grid,Bundling:d.default.Bundling,Menu:d.default.Menu,ToolBar:d.default.ToolBar,Tooltip:d.default.Tooltip,Legend:d.default.Legend,TimeBar:M,SnapLine:T,Fisheye:P,ImageMinimap:C,EdgeFilterLens:j,Annotation:I,Algorithm:w,Arrow:a.Arrow,Marker:a.Marker,Shape:a.Shape};t.default=R},13383:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},39849:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"Layout",{enumerable:!0,get:function(){return o.Layouts}}),Object.defineProperty(t,"TreeLayout",{enumerable:!0,get:function(){return i.default}}),t.registerLayout=void 0;var n,o=r(16038),i=(n=r(8278))&&n.__esModule?n:{default:n};(0,o.registerLayout)("grid",o.GridLayout),(0,o.registerLayout)("random",o.RandomLayout),(0,o.registerLayout)("force",o.ForceLayout),(0,o.registerLayout)("circular",o.CircularLayout),(0,o.registerLayout)("dagre",o.DagreLayout),(0,o.registerLayout)("dagreCompound",o.DagreCompoundLayout),(0,o.registerLayout)("radial",o.RadialLayout),(0,o.registerLayout)("concentric",o.ConcentricLayout),(0,o.registerLayout)("mds",o.MDSLayout),(0,o.registerLayout)("fruchterman",o.FruchtermanLayout),(0,o.registerLayout)("fruchterman-gpu",o.FruchtermanGPULayout),(0,o.registerLayout)("gForce",o.GForceLayout),(0,o.registerLayout)("force2",o.Force2Layout),(0,o.registerLayout)("gForce-gpu",o.GForceGPULayout),(0,o.registerLayout)("comboForce",o.ComboForceLayout),(0,o.registerLayout)("comboCombined",o.ComboCombinedLayout),(0,o.registerLayout)("forceAtlas2",o.ForceAtlas2Layout);t.registerLayout=function(e,t){t.isCustomLayout=!0,o.Layouts[e]=(0,o.registerLayout)(e,t)}},8278:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=o(r(6977));function o(e){return e&&e.__esModule?e:{default:e}}var i=o(r(85698)).default.radialLayout,a=function(){function e(e){this.type=e.type,this.radial=e.radial,this.config=e}return e.prototype.init=function(e){var t=this;this.data=e,this.radial?this.layoutMethod=function(e){var r=n.default[t.type](e,t.config);return i(r),r}:this.layoutMethod=function(e){return n.default[t.type](e,t.config)}},e.prototype.execute=function(){return this.layoutMethod(this.data,this.config)},e.prototype.layout=function(e){return this.init(e),this.execute()},e}();t.default=a},88405:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LayoutWorker=void 0;var n,o=(n=r(47795))&&n.__esModule?n:{default:n};t.LayoutWorker=function(e){return void 0===e&&(e="https://unpkg.com/@antv/layout@0.3.23/dist/layout.min.js"),new o.default(function(){var e={RUN:"LAYOUT_RUN",END:"LAYOUT_END",ERROR:"LAYOUT_ERROR",TICK:"LAYOUT_TICK",GPURUN:"GPU_LAYOUT_RUN",GPUEND:"GPU_LAYOUT_END"};layout.registerLayout("grid",layout.GridLayout),layout.registerLayout("random",layout.RandomLayout),layout.registerLayout("force",layout.ForceLayout),layout.registerLayout("force2",layout.Force2Layout),layout.registerLayout("circular",layout.CircularLayout),layout.registerLayout("dagre",layout.DagreLayout),layout.registerLayout("dagreCompound",layout.DagreCompoundLayout),layout.registerLayout("radial",layout.RadialLayout),layout.registerLayout("concentric",layout.ConcentricLayout),layout.registerLayout("mds",layout.MDSLayout),layout.registerLayout("fruchterman",layout.FruchtermanLayout),layout.registerLayout("fruchterman-gpu",layout.FruchtermanGPULayout),layout.registerLayout("gForce",layout.GForceLayout),layout.registerLayout("gForce-gpu",layout.GForceGPULayout),layout.registerLayout("comboForce",layout.ComboForceLayout),layout.registerLayout("comboCombined",layout.ComboCombinedLayout),layout.registerLayout("forceAtlas2",layout.ForceAtlas2Layout),onmessage=function(t){(function(t){var r=t.data.type;return r===e.RUN||r===e.GPURUN})(t)&&function(t){var r=this;switch(t.data.type){case e.RUN:var n,o=t.data,i=o.nodes,a=o.edges,s=o.layoutCfg,u=(p=void 0===s?{}:s).type;if(!(l=layout.getLayoutByName(u))){this.postMessage({type:e.ERROR,message:"layout ".concat(u," not found")});break}p.onLayoutEnd=function(){r.postMessage({type:e.END,nodes:i}),null===n||void 0===n||n.destroy()},(n=new l(p)).init({nodes:i,edges:a}),n.execute();break;case e.GPURUN:var l,c=t.data,f=c.nodes,h=(a=c.edges,c.layoutCfg),p=void 0===h?{}:h,d=c.canvas;if(u=p.type,!(l=layout.getLayoutByName(u))){this.postMessage({type:e.ERROR,message:"layout ".concat(u," not found")});break}if("gpu"!==u.split("-")[1]){this.postMessage({type:e.ERROR,message:"layout ".concat(u," does not support GPU")});break}var y=new l(p);y.init({nodes:f,edges:a}),y.executeWithWorker(d,this)}}(t)}},e)}},89996:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LAYOUT_MESSAGE=void 0;t.LAYOUT_MESSAGE={RUN:"LAYOUT_RUN",END:"LAYOUT_END",ERROR:"LAYOUT_ERROR",TICK:"LAYOUT_TICK",GPURUN:"GPU_LAYOUT_RUN",GPUEND:"GPU_LAYOUT_END"}},47795:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(){return function(e,t){var r=e.toString(),n=new Blob(["importScripts('".concat(t,"');(").concat(r,")()")],{type:"text/javascript"});return new Worker(URL.createObjectURL(n))}}();t.default=r},27419:function(e,t,r){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=((n=r(75836))&&n.__esModule?n:{default:n}).default;t.default=o},98880:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},99121:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getBrowserName=void 0;t.getBrowserName=function(){var e=navigator.userAgent.toLowerCase();return e.indexOf("firefox")>-1?"firefox":e.indexOf("safari")>-1?"safari":e.indexOf("opr")>-1?"opera":e.indexOf("chrome")>-1?"chrome":e.indexOf("trident")>-1?"ie 11":e.indexOf("ie")>-1?"ie":"unknown"}},73297:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mixColor=t.getColorsWithSubjectColor=t.getColorSetsBySubjectColors=void 0;var n,o=(n=r(69630))&&n.__esModule?n:{default:n},i=r(17549);var a=function(e,t,r){var n=(0,o.default)(e),i=(0,o.default)(t);return(0,o.default)([(1-r)*n.red()+r*i.red(),(1-r)*n.green()+r*i.green(),(1-r)*n.blue()+r*i.blue()]).rgb()};t.mixColor=a;var s=function(e,t,r,n){return void 0===t&&(t="#fff"),void 0===r&&(r="default"),void 0===n&&(n="rgb(150, 150, 150)"),"default"===r?function(e,t,r){void 0===t&&(t="#fff"),void 0===r&&(r="rgb(150, 150, 150)");var n=a(t,e,.05).rgb().toString(),s=a(t,e,.1).rgb().toString(),u=a(t,e,.2).rgb().toString(),l=a(t,e,.4).rgb().toString(),c=a(t,r,.02).rgb().toString(),f=a(t,r,.05).rgb().toString(),h=a(t,r,.1).rgb().toString(),p=a(t,r,.2).rgb().toString(),d=a(t,r,.3).rgb().toString(),y=(0,i.generate)(e,{theme:"default",backgroundColor:t}),v=(0,o.default)(e).hex().toLowerCase(),g=y.indexOf(v),m=e;return-1!==g&&(m=y[g+1]),{mainStroke:e,mainFill:s,activeStroke:e,activeFill:n,inactiveStroke:l,inactiveFill:n,selectedStroke:e,selectedFill:t,highlightStroke:m,highlightFill:u,disableStroke:d,disableFill:f,edgeMainStroke:d,edgeActiveStroke:e,edgeInactiveStroke:p,edgeSelectedStroke:e,edgeHighlightStroke:e,edgeDisableStroke:h,comboMainStroke:d,comboMainFill:c,comboActiveStroke:e,comboActiveFill:n,comboInactiveStroke:d,comboInactiveFill:c,comboSelectedStroke:e,comboSelectedFill:c,comboHighlightStroke:m,comboHighlightFill:c,comboDisableStroke:p,comboDisableFill:f}}(e,t,"rgb(150, 150, 150)"):function(e,t,r){void 0===t&&(t="#fff"),void 0===r&&(r="#777");var n=a(t,e,.2).rgb().toString(),s=a(t,e,.3).rgb().toString(),u=a(t,e,.6).rgb().toString(),l=a(t,e,.8).rgb().toString(),c=a(t,r,.2).rgb().toString(),f=a(t,r,.25).rgb().toString(),h=a(t,r,.3).rgb().toString(),p=a(t,r,.4).rgb().toString(),d=a(t,r,.5).rgb().toString(),y=(0,i.generate)(e,{theme:"dark",backgroundColor:t}),v=(0,o.default)(e).hex().toLowerCase(),g=y.indexOf(v),m=e;return-1!==g&&(m=y[g+1]),{mainStroke:l,mainFill:n,activeStroke:e,activeFill:s,inactiveStroke:l,inactiveFill:n,selectedStroke:e,selectedFill:n,highlightStroke:e,highlightFill:u,disableStroke:d,disableFill:f,edgeMainStroke:r,edgeActiveStroke:e,edgeInactiveStroke:r,edgeSelectedStroke:e,edgeHighlightStroke:e,edgeDisableStroke:h,comboMainStroke:p,comboMainFill:f,comboActiveStroke:e,comboActiveFill:c,comboInactiveStroke:p,comboInactiveFill:f,comboSelectedStroke:e,comboSelectedFill:c,comboHighlightStroke:m,comboHighlightFill:f,comboDisableStroke:p,comboDisableFill:c}}(e,t,"#777")};t.getColorsWithSubjectColor=s;t.getColorSetsBySubjectColors=function(e,t,r,n){void 0===t&&(t="#fff"),void 0===r&&(r="default"),void 0===n&&(n="rgb(150, 150, 150)");var o=[];return e.forEach(function(e){o.push(s(e,t,r,n))}),o}},71441:function(e,t){"use strict";function r(e){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.deepClone=function(e){try{return structuredClone(e)}catch(t){return function e(t,n){void 0===n&&(n=new WeakMap);if(null===t)return t;if(t instanceof Date)return new Date(t);if(t instanceof RegExp)return new RegExp(t);if("object"!==r(t))return t;if(n.get(t))return n.get(t);var o=Array.isArray(t)?[]:{};n.set(t,o);for(var i in t)t.hasOwnProperty(i)&&void 0!==t[i]&&(o[i]=e(t[i],n));return o}(e)}}},59271:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.gpuDetector=void 0;t.gpuDetector=function e(){return"undefined"==typeof window||"undefined"==typeof document?{}:{canvas:!!window.CanvasRenderingContext2D,webgl:function(){try{var e=document.createElement("canvas");return!(!window.WebGLRenderingContext||!e.getContext("webgl")&&!e.getContext("experimental-webgl"))}catch(e){return!1}}(),workers:!!window.Worker,fileapi:window.File&&window.FileReader&&window.FileList&&window.Blob,getWebGLErrorMessage:function(){var e=document.createElement("div");return e.id="webgl-error-message",e.style.fontFamily="monospace",e.style.fontSize="13px",e.style.fontWeight="normal",e.style.textAlign="center",e.style.background="#fff",e.style.color="#000",e.style.padding="1.5em",e.style.width="400px",e.style.margin="5em auto 0",this.webgl||(e.innerHTML=window.WebGLRenderingContext?['Your graphics card does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" rel="external nofollow" rel="external nofollow" style="color:#000">WebGL</a>.<br />','Find out how to get it <a href="http://get.webgl.org/" rel="external nofollow" rel="external nofollow" style="color:#000">here</a>.'].join("\n"):['Your browser does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" rel="external nofollow" rel="external nofollow" style="color:#000">WebGL</a>.<br/>','Find out how to get it <a href="http://get.webgl.org/" rel="external nofollow" rel="external nofollow" style="color:#000">here</a>.'].join("\n")),e},addGetWebGLMessage:function(t){var r=void 0!==(t=t||{}).parent?t.parent:document.body,n=void 0!==t.id?t.id:"oldie",o=e().getWebGLErrorMessage();o.id=n,r.appendChild(o)}}}},97082:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.cloneGElement=void 0;t.cloneGElement=function(e){var t=e.clone();return r(e,t),t};var r=function e(t,r){var n;t.isGroup()&&r.isGroup()&&(null===(n=t.get("children"))||void 0===n||n.forEach(function(t,n){var o=r.get("children")[n];e(t,o)}));var o=t.get("type"),i=r.get("type");if("image"===o&&"image"===i){var a=t.get("clipShape");a&&r.setClip({type:a.get("type"),attrs:a.attr()})}}},85698:function(e,t,r){"use strict";function n(e){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(97582),i=f(r(73297)),a=f(r(91490)),s=f(r(59271)),u=f(r(99121)),l=r(48122);function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(c=function(e){return e?r:t})(e)}function f(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var r=c(t);if(r&&r.has(e))return r.get(e);var o={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=i?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(o,a,s):o[a]=e[a]}return o.default=e,r&&r.set(e,o),o}var h=(0,o.__assign)((0,o.__assign)((0,o.__assign)((0,o.__assign)((0,o.__assign)({},l.Util),i),a),s),u);t.default=h},91490:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.radialLayout=t.proccessToFunc=t.buildTextureDataWithTwoEdgeAttr=t.buildTextureDataWithOneEdgeAttr=t.buildTextureData=t.attributesToTextureData=t.arrayToTextureData=void 0;var n=r(48122),o=r(31834),i=n.Util.traverseTree;t.proccessToFunc=function(e,t){return e?(0,o.isNumber)(e)?function(t){return e}:e:function(e){return t||1}};t.buildTextureData=function(e,t){var r=[],n=[],o={},i=0;for(i=0;i<e.length;i++){var a=e[i];o[a.id]=i,r.push(a.x),r.push(a.y),r.push(0),r.push(0),n.push([])}for(i=0;i<t.length;i++){var s=t[i];n[o[s.source]].push(o[s.target]),n[o[s.target]].push(o[s.source])}var u=0;for(i=0;i<e.length;i++){var l=r.length,c=n[i],f=c.length;r[4*i+2]=l,r[4*i+3]=c.length,u=Math.max(u,c.length);for(var h=0;h<f;++h){var p=c[h];r.push(+p)}}for(;r.length%4!=0;)r.push(0);return{array:new Float32Array(r),maxEdgePerVetex:u}};t.buildTextureDataWithOneEdgeAttr=function(e,t,r){var n=[],o=[],i={},a=0;for(a=0;a<e.length;a++){var s=e[a];i[s.id]=a,n.push(s.x),n.push(s.y),n.push(0),n.push(0),o.push([])}for(a=0;a<t.length;a++){var u=t[a];o[i[u.source]].push(i[u.target]),o[i[u.source]].push(r(u)),o[i[u.target]].push(i[u.source]),o[i[u.target]].push(r(u))}var l=0;for(a=0;a<e.length;a++){var c=n.length,f=o[a],h=f.length;n[4*a+2]=c,n[4*a+3]=h/2,l=Math.max(l,h/2);for(var p=0;p<h;++p){var d=f[p];n.push(+d)}}for(;n.length%4!=0;)n.push(0);return{array:new Float32Array(n),maxEdgePerVetex:l}};t.buildTextureDataWithTwoEdgeAttr=function(e,t,r,n){var o=[],i=[],a={},s=0;for(s=0;s<e.length;s++){var u=e[s];a[u.id]=s,o.push(u.x),o.push(u.y),o.push(0),o.push(0),i.push([])}for(s=0;s<t.length;s++){var l=t[s];i[a[l.source]].push(a[l.target]),i[a[l.source]].push(r(l)),i[a[l.source]].push(n(l)),i[a[l.source]].push(0),i[a[l.target]].push(a[l.source]),i[a[l.target]].push(r(l)),i[a[l.target]].push(n(l)),i[a[l.target]].push(0)}var c=0;for(s=0;s<e.length;s++){var f=o.length,h=i[s],p=h.length;o[4*s+2]=f+1048576*p/4,o[4*s+3]=0,c=Math.max(c,p/4);for(var d=0;d<p;++d){var y=h[d];o.push(+y)}}for(;o.length%4!=0;)o.push(0);return{array:new Float32Array(o),maxEdgePerVetex:c}};t.attributesToTextureData=function(e,t){var r=[],n=e.length,o={};return t.forEach(function(t){e.forEach(function(e,i){if(void 0===o[t[e]]&&(o[t[e]]=Object.keys(o).length),r.push(o[t[e]]),i===n-1)for(;r.length%4!=0;)r.push(0)})}),{array:new Float32Array(r),count:Object.keys(o).length}};t.arrayToTextureData=function(e){for(var t=[],r=e.length,n=e[0].length,o=function(n){e.forEach(function(e,o){if(t.push(e[n]),o===r-1)for(;t.length%4!=0;)t.push(0)})},i=0;i<n;i++)o(i);return new Float32Array(t)};t.radialLayout=function(e,t){var r={x:1/0,y:1/0},n={x:-1/0,y:-1/0},o="x",a="y";t&&["V","TB","BT"].indexOf(t)>=0&&(a="x",o="y");var s=0;i(e,function(e){return s++,e.x>n.x&&(n.x=e.x),e.x<r.x&&(r.x=e.x),e.y>n.y&&(n.y=e.y),e.y<r.y&&(r.y=e.y),!0});var u=2*Math.PI/s,l=n[a]-r[a];return 0===l?e:(i(e,function(t){var n=(t[a]-r[a])/l*(2*Math.PI-u)+u,i=Math.abs("x"===o?t.x-e.x:t.y-e.y);return t.x=i*Math.cos(n),t.y=i*Math.sin(n),!0}),e)}},84680:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(31834),o=r(48122),i=r(39269),a=l(r(28813)),s=r(15873),u=l(r(78146));function l(e){return e&&e.__esModule?e:{default:e}}var c,f=(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),h=function(){return(h=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},p=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r};"undefined"!=typeof document&&(0,a.default)("\n  .g6-annotation-container {\n    background-color: rgba(255, 255, 255, 0.3);\n    padding: 8px;\n  }\n  .g6-annotation-wrapper {\n    background-color: #fff;\n    box-shadow: 0 0 8px rgba(0, 0, 0, 0.85);\n  }\n  .g6-annotation-header-wapper {\n    height: fit-content;\n    width: 100%;\n    background-color: #5B8FF9;\n    display: inline-flex;\n    cursor: move;\n  }\n  .g6-annotation-title {\n    margin: 4px 40px 4px 8px;\n    cursor: text;\n    min-width: 32px;\n  }\n  .g6-annotation-collapse {\n    margin: 4px;\n    cursor: pointer;\n  }\n  .g6-annotation-expand {\n    margin: 4px;\n    cursor: pointer;\n  }\n  .g6-annotation-close {\n    margin: 4px 8px 4px 0;\n    cursor: pointer;\n  }\n  .g6-annotation-content {\n    padding: 8px;\n    width: fit-content;\n    cursor: text;\n    word-break: break-all;\n    min-width: 32px;\n  }\n  .g6-annotation-title-input-wrapper {\n    margin: 4px 40px 4px 8px;\n  }\n  .g6-annotation-content-input {\n    height: 100%;\n    word-break: break-all;\n  }\n  .g6-annotation-content-input-wrapper {\n    margin: 8px;\n    height: 100%;\n  }\n");var d=function(e){function t(t){return e.call(this,t)||this}return f(t,e),t.prototype.getDefaultCfgs=function(){return{trigger:"click",editable:!0,itemHighlightState:"highlight",linkHighlightStyle:{shadowColor:"#5B8FF9",shadowBlur:10},cardCfg:{minHeight:60,width:"fit-content",height:"fit-content",collapseType:"minimize",closeType:"hide",borderRadius:5,maxTitleLength:20}}},t.prototype.getEvents=function(){var e={viewportchange:"updateLinks",afterlayout:"updateLinks",aftergraphrefreshposition:"updateLinks",afterupdateitem:"updateLink",afterchangedata:"onGraphDataChange",afteritemvisibilitychange:"onGraphItemVisibilityChange"};switch(this.get("trigger")){case"click":e=h(h({},e),{"node:click":"showAnnotation","edge:click":"showAnnotation"})}return e},t.prototype.getDOMContent=function(e){if(!this.destroyed){var t=e.collapsed,r=e.maxWidth,n=e.title,o=void 0===n?"":n,i=e.content,a=void 0===i?"":i,s=e.borderRadius,u=void 0===s?5:s,l=t?"<p class='g6-annotation-expand'>+</p>":"<p class='g6-annotation-collapse'>-</p>",c=t?"":" <p class='g6-annotation-content'>".concat(a,"</p>"),f=t?"".concat(u,"px"):"".concat(u,"px ").concat(u,"px 0 0");return'<div class="g6-annotation-wrapper" style="border-radius: '.concat(u,"px; max-width: ").concat(r,'px">\n        <div\n          class="g6-annotation-header-wapper"\n          style="border-radius: ').concat(f,";\"\n        >\n          <h4 class='g6-annotation-title'>").concat(o,"</h4>\n          ").concat(l,"\n          ").concat("<p class='g6-annotation-close'>x</p>","\n        </div>\n        ").concat(c,"\n      </div>")}},t.prototype.init=function(){var e=this;if(!e.destroyed){var t=e.get("graph").getContainer(),r=e.get("container");this.get("containerCfg")?(r=this.createContainer(),t.appendChild(r)):r=t,this.set("container",r);var o=t.getBoundingClientRect(),a=new s.Canvas({container:t,width:o.right-o.left,height:o.bottom-o.top});(0,i.modifyCSS)(a.get("el"),{position:"absolute",top:0,left:0,pointerEvents:"none"}),window.addEventListener("resize",(0,n.debounce)(function(){return e.resizeCanvas(e)},100));var u=a.addGroup({id:"annotation-link-group"});e.set("linkGroup",u),e.set("canvas",a),e.get("getTitle")||e.set("getTitle",function(e){var t,r=(null===(t=null===e||void 0===e?void 0:e.getModel)||void 0===t?void 0:t.call(e))||{},n=r.label,o=r.id;return n||o||"-"}),e.get("getContent")||e.set("getContent",function(e){var t,r;if(!e)return"-";var n=(null===(t=e.getModel)||void 0===t?void 0:t.call(e))||{},o=n.label,i=n.id,a=null===(r=e.getType)||void 0===r?void 0:r.call(e),s=a?"".concat(a,": "):"";return"".concat(s).concat(o||i||"")});var l=e.get("defaultData");l&&this.readData(l)}},t.prototype.createContainer=function(){var e=this;if(!this.destroyed){var t=this.get("containerCfg"),r=this.get("graph"),o=r.getContainer(),a=o.getBoundingClientRect(),s=a.left,u=a.right,l=a.top,c=a.bottom-l,f=u-s,d=t.position,y=void 0===d?"top":d,v=t.offsetX,g=void 0===v?0:v,m=t.offsetY,b=void 0===m?0:m,w=p(t,["position","offsetX","offsetY"]),_=t.height,x=void 0===_?"fit-content":_,S=t.width,O=void 0===S?r.getWidth():S;"100%"===x&&(x=c),"100%"===O&&(O=f);var P="unset",E="unset",k={};switch(y){case"right":P="".concat(c,"px"),(k={top:0,right:0}).right+=s+g,k.top+=l+b;break;case"bottom":E="".concat(f,"px"),(k={bottom:0,left:0}).left+=s+g,k.bottom+=l+b;break;case"top":E="".concat(f,"px");case"left":P="".concat(c,"px");default:(k={top:0,left:0}).left+=s+g,k.top+=l+b}Object.keys(k).forEach(function(e){k[e]="".concat(k[e],"px")});var M=(0,i.createDom)("<div class='".concat(t.className," g6-annotation-container'></div>"));return(0,i.modifyCSS)(M,h(h({position:"absolute",display:"top"===y||"bottom"===y?"inline-flex":"unset",width:(0,n.isNumber)(O)?"".concat(O,"px"):O,height:(0,n.isNumber)(x)?"".concat(x,"px"):x,maxHeight:P,maxWidth:E,overflow:"scroll"},k),w)),o.appendChild(M),M.addEventListener("scroll",function(t){e.updateLinks()}),M}},t.prototype.resizeCanvas=function(e){clearTimeout(e.resizeTimer),e.resizeTimer=setTimeout(function(){if(e&&!e.destroyed){var t=e.get("container").getBoundingClientRect(),r=t.right-t.left,n=t.bottom-t.top;e.get("canvas").changeSize(r,n),e.updateOutsideCards(e)}},250)},t.prototype.updateOutsideCards=function(e){var t=e||this,r=t.get("cardInfoMap")||{},n=t.get("graph"),o=n.getPointByCanvas(0,0),a=n.getPointByCanvas(n.getWidth(),n.getHeight()),s=n.getClientByPoint(o.x,o.y),u=s.x,l=s.y,c=n.getClientByPoint(a.x,a.y),f=c.x,h=c.y;Object.values(r).forEach(function(e){var t=e.card;if(t){var r=t.style,n=v(r.left),o=v(r.top),a=t.getBoundingClientRect(),s=a.width,c=a.height,p=n,d=o;n+s>f-u&&(p=f-u-s),n<0&&(p=0),o+c>h-l&&(d=h-l-c),o<0&&(d=0),(0,i.modifyCSS)(t,{left:"".concat(p,"px"),top:"".concat(d,"px")})}}),t.updateLinks()},t.prototype.showAnnotation=function(e){if(!this.destroyed){var t=e.item;this.toggleAnnotation(t)}},t.prototype.hideCards=function(){var e=this;if(!e.destroyed){var t=e.get("cardInfoMap")||{};Object.keys(t).forEach(function(t){e.hideCard(t)})}},t.prototype.toggleAnnotation=function(e,t){var r,o;void 0===t&&(t={});if(!this.destroyed){var a=this.get("cardInfoMap")||{},s=this.get("graph"),u=this.get("container"),l=this.get("containerCfg"),c=Object.assign({},this.get("cardCfg")||{},t),f=c.minHeight,d=c.minWidth,v=c.width,g=c.height,m=c.collapsed,b=void 0!==m&&m,w=c.x,_=c.y,x=c.title,S=c.content,O=c.maxTitleLength,P=c.defaultBegin,E=p(c,["minHeight","minWidth","width","height","collapsed","x","y","title","content","maxTitleLength","defaultBegin"]),k=this.get("linkGroup"),M=this.get("rows")||[[]],C=null===(r=e.isCanvas)||void 0===r?void 0:r.call(e),j=C?"canvas-annotation":e.getID(),T=a[j]||{},A=T.card,I=T.link,R=T.x,L=T.y,N=T.title,D=T.content,B=this.get("getTitle"),F=this.get("getContent"),G=this.get("getContentPlaceholder")||function(){return""},z=this.get("getTitlePlaceHolder")||function(){return""},U=G(e),V=z(e),W=(0,i.createDom)(this.getDOMContent(h({itemId:j,collapsed:b,title:(null===(o=N||x||(null===B||void 0===B?void 0:B(e)))||void 0===o?void 0:o.substr(0,O))||V,content:D||S||(null===F||void 0===F?void 0:F(e))||U},E))),Y=(0,n.isNumber)(f)?"".concat(f,"px"):f;(0,i.modifyCSS)(W,{minHeight:b?"unset":Y,minWidth:(0,n.isNumber)(d)?"".concat(d,"px"):d,height:g,width:v});var H,X=!!A;if(X?(null===I||void 0===I||I.remove(!0),u.replaceChild(W,A)):u.appendChild(W),!l){if(H=u.getBoundingClientRect()||{},void 0!==w&&void 0!==_)R=w,L=_;else if(!X&&!C){var q=H.top,J=P||{},Z=J.left,K=J.right,Q=void 0===K?16:K,$=J.top,ee=void 0===$?8:$,te=J.bottom,re=Q,ne=ee;isNaN(Z)||(re=u.scrollWidth-Z),isNaN(te)||(ne=u.scrollHeight-te);var oe=(0,n.isNumber)(d)?d:100;R=u.scrollWidth-W.scrollWidth-(M.length-1)*oe-re;var ie=M[M.length-1],ae=(ie[ie.length-1]||{}).bbox;L=(null===ae||void 0===ae?void 0:ae.bottom)-q||ne}(0,i.modifyCSS)(W,{position:"absolute",left:"".concat(R,"px"),top:"".concat(L,"px"),cusor:l?"unset":"move"})}this.bindListener(W,j);var se=W.getBoundingClientRect();if(!C){var ue=y(e,se,s,this.get("canvas")),le=this.get("linkStyle");I=k.addShape("path",{attrs:h({lineWidth:1,lineDash:[5,5],stroke:"#ccc",path:ue},le)})}if(a[j]=h(h({},a[j]||{}),{id:j,collapsed:b,card:W,link:I,x:R,y:L,cardBBox:se,content:D||S,title:N||x,contentPlaceholder:U,titlePlaceholder:V,isCanvas:C}),this.set("cardInfoMap",a),l)this.updateCardPositionsInConatainer(),this.updateLinks();else{var ce=!isNaN(w)&&!isNaN(_);if(!X&&!C&&!ce){var fe=H.bottom,he=void 0===fe?0:fe;q=H.top;M[M.length-1].push({id:j,bbox:se}),se.top>he-q-se.height-16&&M.push([]),this.set("rows",M)}}this.updateCardSize(j);var pe=this.get("onAnnotationChange");null===pe||void 0===pe||pe(a[j],X?"update":"create")}},t.prototype.updateCardPositionsInConatainer=function(){if(!this.destroyed){var e=this.get("cardInfoMap");if(e){var t=this.get("container"),r=this.get("containerCfg").position,n=t.getBoundingClientRect().width,o=getComputedStyle(t),a=v(o.paddingLeft)+v(o.paddingRight);n-=a,Object.values(e).forEach(function(e){var t=e.card,o=t.getBoundingClientRect().width;switch(r){case"right":(0,i.modifyCSS)(t,{marginLeft:n?"".concat(n-o,"px"):"0px"});break;case"top":case"bottom":(0,i.modifyCSS)(t,{marginLeft:"8px"})}})}}},t.prototype.handleExpandCollapseCard=function(e){if(!this.destroyed){var t=this.get("graph"),r=this.get("cardInfoMap");if(r){var n=r[e].collapsed,o=t.findById(e);if(o)"hide"!==this.get("cardCfg").collapseType||n?this.toggleAnnotation(o,{collapsed:!n}):this.hideCard(e),r[e]=h(h({},r[e]),{collapsed:!n})}}},t.prototype.hideCard=function(e){if(!this.destroyed){var t=this.get("cardInfoMap");if(t&&t[e]){var r=t[e],n=r.card,o=r.link;(0,i.modifyCSS)(n,{display:"none"}),null===o||void 0===o||o.hide(),this.get("onAnnotationChange")(t[e],"hide")}}},t.prototype.removeCard=function(e){if(!this.destroyed){var t=this.get("cardInfoMap");if(t){var r=t[e],n=r.card,o=r.link;this.get("container").removeChild(n),null===o||void 0===o||o.remove(!0),delete t[e],this.get("onAnnotationChange")(r,"remove")}}},t.prototype.bindListener=function(e,t){var r=this;if(!this.destroyed){e.addEventListener("mousemove",function(e){var n;if("g6-annotation-collapse"===e.target.className?n="collapse":"g6-annotation-expand"===e.target.className?n="expand":"g6-annotation-close"===e.target.className&&(n="close"),n){var o=r.get("cardCfg").onMouseEnterIcon;(void 0===o?function(){}:o)(e,t,n)}}),e.addEventListener("mouseout",function(e){var n;if("g6-annotation-collapse"===e.target.className?n="collapse":"g6-annotation-expand"===e.target.className?n="expand":"g6-annotation-close"===e.target.className&&(n="close"),n){var o=r.get("cardCfg").onMouseLeaveIcon;(void 0===o?function(){}:o)(e,t,n)}}),e.addEventListener("mouseenter",function(e){var n=r.get("cardInfoMap");if(n){var o=r.get("graph"),i=o.findById(t);if(i){var a=r.get("itemHighlightState");o.setItemState(i,a,!0)}var s=n[t].link;if(s){var u=r.get("linkHighlightStyle")||{};s.attr(u)}}}),e.addEventListener("mouseleave",function(e){var n=r.get("cardInfoMap");if(n){var o=r.get("graph"),i=o.findById(t);if(i){var a=r.get("itemHighlightState");o.setItemState(i,a,!1)}var s=n[t].link;if(s){var u=r.get("linkHighlightStyle")||{};Object.keys(u).forEach(function(e){s.attr(e,void 0),s.attr(e,void 0)});var l=r.get("linkStyle");s.attr(l)}}}),e.addEventListener("click",function(e){var n=(r.get("cardCfg")||{}).onClickIcon;if("g6-annotation-collapse"===e.target.className||"g6-annotation-expand"===e.target.className)"hide"===r.get("cardCfg").collapseType?r.hideCard(t):r.handleExpandCollapseCard(t),null===n||void 0===n||n(e,t,"g6-annotation-collapse"===e.target.className?"collapse":"expand");else if("g6-annotation-close"===e.target.className){"remove"===r.get("cardCfg").closeType?r.removeCard(t):r.hideCard(t),null===n||void 0===n||n(e,t,"close")}}),this.get("editable")&&e.addEventListener("dblclick",function(e){var n=r.get("cardInfoMap"),o=(r.get("cardCfg")||{}).maxTitleLength,a=void 0===o?20:o;if(n){var s=e.target,u=s.className;if("g6-annotation-title"===u||"g6-annotation-content"===u){var l="g6-annotation-title"===u?s.getBoundingClientRect():s.parentNode.getBoundingClientRect(),c=l.width,f=l.height,h=getComputedStyle(s),p="g6-annotation-title"===u?"input":"textarea",d=(0,i.createDom)("<".concat(p,' class="').concat(u,'-input" type="textarea" style="width:').concat(c,"px; height: ").concat(f,'px; min-width: 16px;"/>')),y=(0,i.createDom)('<div class="'.concat(u,'-input-wrapper" style="width: ').concat(c,"px; height: ").concat(f,"px; min-width: 16px; margin-right: ").concat(h.marginRight,'" />'));y.appendChild(d),s.parentNode.replaceChild(y,s);var v=n[t],g=v.contentPlaceholder,m=v.titlePlaceholder,b=v.content,w=v.title,_=b;"g6-annotation-title"===u?(d.name="title",d.maxLength=a,_=w):d.name="content",_?(d.innerHTML=s.innerHTML,d.value=s.innerHTML):d.placeholder="g6-annotation-title"===u?m:g,d.focus(),d.addEventListener("blur",function(e){d.value&&(s.innerHTML=d.value,v[d.name||"title"]=d.value),y.parentNode.replaceChild(s,y),r.updateCardSize(t);var n=r.get("onAnnotationChange");null===n||void 0===n||n(v,"update")})}}});var n=["g6-annotation-title","g6-annotation-content","g6-annotation-title-input","g6-annotation-content-input"];e.draggable=!0,e.addEventListener("dragstart",function(t){var o=t.target.className;if(!n.includes(o)){var i=e.style;r.set("dragging",{card:e,x:t.clientX,y:t.clientY,left:v(i.left),top:v(i.top)})}}),e.addEventListener("drag",function(e){e.preventDefault();var n=r.get("cardInfoMap");if(n){var o=e.clientX,a=e.clientY,s=r.get("dragging");if(!isNaN(o)&&!isNaN(a)&&s){var u=s.x,l=s.y,c=s.left,f=s.top,h=s.card,p=o-u,d=a-l;c+=p,f+=d;var v=r.get("graph"),g=v.getPointByCanvas(0,0),m=v.getPointByCanvas(v.getWidth(),v.getHeight()),b=v.getClientByPoint(g.x,g.y),w=b.x,_=b.y,x=v.getClientByPoint(m.x,m.y),S=x.x,O=x.y,P=h.getBoundingClientRect(),E=P.right-P.left,k=P.bottom-P.top;(c>S-w-E&&p>0||c<0&&p<0)&&(c-=p),(f>O-_-k&&d>0||f<0&&d<0)&&(f-=d),(0,i.modifyCSS)(h,{left:"".concat(c,"px"),top:"".concat(f,"px"),visibility:"hidden"}),u=o,l=a;var M=(n[t]||{}).link;if(M){var C=v.findById(t);M.attr("path",y(C,P,v,r.get("canvas")))}r.set("dragging",{x:u,y:l,left:c,top:f,card:h})}}});e.addEventListener("dragend",function(e){var n=r.get("cardInfoMap");if(n){var o=r.get("dragging");if(o){var a=o.left,s=o.top,u=o.card;n[t].x=a,n[t].y=s,(0,i.modifyCSS)(u,{visibility:"visible"}),r.set("dragging",!1);var l=r.get("rows");null===l||void 0===l||l.forEach(function(e){for(var r=e.length-1;r>=0;r--)e[r].id===t&&e.splice(r,1)});var c=r.get("onAnnotationChange");null===c||void 0===c||c(n[t],"update")}}})}},t.prototype.updateCardSize=function(e){var t=this.get("cardInfoMap");if(t){var r=t[e].card,n=r.getBoundingClientRect().width,o=r.getElementsByClassName("g6-annotation-title")[0];if(o){var a=getComputedStyle(o),s=v(a.marginLeft),u=o.getBoundingClientRect().width;(0,i.modifyCSS)(o,{marginRight:"".concat(n-s-24-16-u,"px")})}}},t.prototype.updateLink=function(e){var t=e.item;if(t){var r=this.get("cardInfoMap");if(r){var n=this.get("canvas"),o=this.get("graph"),i=r[t.getID()]||{},a=i.link,s=i.card;if(a){var u=y(t,s.getBoundingClientRect(),o,n);a.attr("path",u)}}}},t.prototype.updateLinks=function(){var e=this;if(!this.destroyed){var t=this.get("cardInfoMap");if(t){var r=this.get("graph");Object.values(t).forEach(function(t){var n=t.id,o=r.findById(n);e.updateLink({item:o})})}}},t.prototype.onGraphDataChange=function(){var e=this,t=this.get("cardInfoMap");if(t){var r=this.get("graph");Object.values(t).forEach(function(t){var n=t.id,o=t.card,i=t.isCanvas;if(o&&!i&&"none"!==o.style.display){var a=r.findById(n);a&&a.isVisible()?e.toggleAnnotation(a):e.hideCard(n)}})}},t.prototype.onGraphItemVisibilityChange=function(e){var t=e.item,r=e.visible;if(t&&!t.destroyed){var n=this.get("cardInfoMap");if(n){var o=t.getID();n[o]&&(r||this.hideCard(o))}}},t.prototype.saveData=function(e){void 0===e&&(e=!1);var t=this.get("cardInfoMap");if(t){var r=this.get("graph"),n=this.get("getTitle"),o=this.get("getContent"),i=[];return Object.values(t).forEach(function(t){var a=t.title,s=t.content,u=t.x,l=t.y,c=t.id,f=t.collapsed,h=t.card;if(!h||"none"!==h.style.display||e){var p=r.findById(c)||r.get("canvas");i.push({id:c,x:u,y:l,collapsed:f,title:a||(null===n||void 0===n?void 0:n(p)),content:s||(null===o||void 0===o?void 0:o(p)),visible:h&&"none"!==h.style.display})}}),i}},t.prototype.readData=function(e){var t=this,r=this.get("graph");e.forEach(function(e){var n=e.id,o=e.x,i=e.y,a=e.title,s=e.content,u=e.collapsed,l=e.visible,c=r.findById(n);if(c||"canvas-annotation"!==n||(c=r.get("canvas")),!c){var f=t.get("cardInfoMap")||{};return f[n]=e,void t.set("cardInfoMap",f)}t.toggleAnnotation(c,{x:o,y:i,title:a,content:s,collapsed:u}),l||t.hideCard(n)})},t.prototype.clear=function(){var e=this.get("cardInfoMap");if(e){var t=this.get("container");Object.values(e).forEach(function(e){var r=e.card,n=e.link;t.removeChild(r),null===n||void 0===n||n.remove(!0)}),this.set("cardInfoMap",{})}},t.prototype.destroy=function(){var e;this.clear(),null===(e=this.get("canvas"))||void 0===e||e.destroy();var t=this.get("graph");t&&!t.destroyed&&(this.get("containerCfg")&&t.getContainer().removeChild(this.get("container")),this.destroyed=!0)},t}(u.default);t.default=d;var y=function(e,t,r,n){var i,a;if("edge"===e.getType())a=[e.getKeyShape().getPoint(.5)];else{var s=null===(i=e.getKeyShape)||void 0===i?void 0:i.call(e).getBBox(),u=s.minX,l=s.minY,c=s.maxX,f=s.maxY,h=e.getModel(),p=h.x,d=h.y;a={left:{x:u+=p,y:((l+=d)+(f+=d))/2},right:{x:c+=p,y:(l+f)/2},top:{x:(u+c)/2,y:l},bottom:{x:(u+c)/2,y:f}}}Object.keys(a).forEach(function(e){var t=a[e],o=t.x,i=t.y,s=r.getClientByPoint(o,i);a[e]=n.getPointByClient(s.x,s.y)});var y=t.top,v=void 0===y?0:y,g=t.left,m=void 0===g?0:g,b=t.right,w=void 0===b?0:b,_=t.bottom,x=void 0===_?0:_,S={left:n.getPointByClient(m,(v+x)/2),right:n.getPointByClient(w,(v+x)/2),top:n.getPointByClient((m+w)/2,v),bottom:n.getPointByClient((m+w)/2,x)};return function(e,t){var r,n,i=1/0;Object.keys(e).forEach(function(o){var a=e[o];Object.keys(t).forEach(function(e){var o=t[e],s=a.x-o.x,u=a.y-o.y,l=s*s+u*u;i>l&&(i=l,r=a,n=o)})});var a=o.Util.getControlPoint(r,n,.5,20);return[["M",r.x,r.y],["Q",a.x,a.y,n.x,n.y]]}(a,S)},v=function(e){return Number(e.replace(/\s+|px/gi,""))||0}},78146:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(31834),o=function(){function e(e){this._cfgs=(0,n.deepMix)(this.getDefaultCfgs(),e),this._events={},this.destroyed=!1}return e.prototype.getDefaultCfgs=function(){return{}},e.prototype.initPlugin=function(e){var t=this;t.set("graph",e);var r=t.getEvents(),o={};(0,n.each)(r,function(r,i){var a=(0,n.wrapBehavior)(t,r);o[i]=a,e.on(i,a)}),this._events=o,this.init()},e.prototype.getEvents=function(){return{}},e.prototype.get=function(e){var t;return null===(t=this._cfgs)||void 0===t?void 0:t[e]},e.prototype.set=function(e,t){this._cfgs[e]=t},e.prototype.destroy=function(){},e.prototype.destroyPlugin=function(){this.destroy();var e=this.get("graph"),t=this._events;(0,n.each)(t,function(t,r){e.off(r,t)}),this._events=null,this._cfgs=null,this.destroyed=!0},e}();t.default=o},43688:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,o=(n=r(78146))&&n.__esModule?n:{default:n};var i,a=(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});function s(e,t,r){var n=e.x-t.x,o=e.y-t.y;return!r||Math.abs(n)>r||Math.abs(o)>r?Math.sqrt(n*n+o*o):r}function u(e,t){var r=(t.source.y-t.target.y)/(t.source.x-t.target.x),n=(r*r*t.source.x+r*(e.y-t.source.y)+e.x)/(r*r+1);return{x:n,y:r*(n-t.source.x)+t.source.y}}var l=function(e){function t(t){return e.call(this,t)||this}return a(t,e),t.prototype.getDefaultCfgs=function(){return{edgeBundles:[],edgePoints:[],K:.1,lambda:.1,divisions:1,divRate:2,cycles:6,iterations:90,iterRate:.6666667,bundleThreshold:.6,eps:1e-6,onLayoutEnd:function(){},onTick:function(){}}},t.prototype.init=function(){var e=this.get("graph"),t=this.get("onTick");this.set("tick",function(){t&&t(),e.refreshPositions()})},t.prototype.bundling=function(e){var t=this;if(t.set("data",e),!t.isTicking()){var r=e.edges||[],n={},o=!1;if((e.nodes||[]).forEach(function(e){null!==e.x&&null!==!e.y&&void 0!==e.x&&void 0!==!e.y||(o=!0),n[e.id]=e}),o)throw new Error("please layout the graph or assign x and y for nodes first");t.set("nodeIdMap",n);var i=t.get("divisions"),a=t.get("divRate"),s=t.divideEdges(i);t.set("edgePoints",s);var u=t.getEdgeBundles();t.set("edgeBundles",u);for(var l=t.get("cycles"),c=t.get("iterations"),f=t.get("iterRate"),h=t.get("lambda"),p=0;p<l;p++){for(var d=function(e){var o=[];r.forEach(function(e,r){if(e.source!==e.target){var a=n[e.source],u=n[e.target];o[r]=t.getEdgeForces({source:a,target:u},r,i,h);for(var l=0;l<i+1;l++)s[r][l].x+=o[r][l].x,s[r][l].y+=o[r][l].y}})},y=0;y<c;y++)d();h/=2,i*=a,c*=f,s=t.divideEdges(i),t.set("edgePoints",s)}r.forEach(function(e,t){e.source!==e.target&&(e.type="polyline",e.controlPoints=s[t].slice(1,s[t].length-1))}),t.get("graph").refresh()}},t.prototype.updateBundling=function(e){var t=this,r=e.data;if(r&&t.set("data",r),t.get("ticking")&&t.set("ticking",!1),Object.keys(e).forEach(function(r){t.set(r,e[r])}),e.onTick){var n=this.get("graph");t.set("tick",function(){e.onTick(),n.refresh()})}t.bundling(r)},t.prototype.divideEdges=function(e){var t=this,r=t.get("data").edges,n=t.get("nodeIdMap"),o=t.get("edgePoints");return o&&void 0!==o||(o=[]),r.forEach(function(r,i){var a;o[i]&&void 0!==o[i]||(o[i]=[]);var u=n[r.source],l=n[r.target];if(1===e)o[i].push({x:u.x,y:u.y}),o[i].push({x:.5*(u.x+l.x),y:.5*(u.y+l.y)}),o[i].push({x:l.x,y:l.y});else{var c=((null===(a=o[i])||void 0===a?void 0:a.length)?t.getEdgeLength(o[i]):s({x:u.x,y:u.y},{x:l.x,y:l.y}))/(e+1),f=c,h=[{x:u.x,y:u.y}];o[i].forEach(function(e,t){if(0!==t){for(var r=s(e,o[i][t-1]);r>f;){var n=f/r,a={x:o[i][t-1].x,y:o[i][t-1].y};a.x+=n*(e.x-o[i][t-1].x),a.y+=n*(e.y-o[i][t-1].y),h.push(a),r-=f,f=c}f-=r}}),h.push({x:l.x,y:l.y}),o[i]=h}}),o},t.prototype.getEdgeLength=function(e){var t=0;return e.forEach(function(r,n){0!==n&&(t+=s(r,e[n-1]))}),t},t.prototype.getEdgeBundles=function(){var e=this,t=e.get("data").edges||[],r=e.get("bundleThreshold"),n=e.get("nodeIdMap"),o=e.get("edgeBundles");return o||(o=[]),t.forEach(function(e,t){o[t]&&void 0!==o[t]||(o[t]=[])}),t.forEach(function(i,a){var s=n[i.source],u=n[i.target];t.forEach(function(t,i){if(!(i<=a)){var l=n[t.source],c=n[t.target];e.getBundleScore({source:s,target:u},{source:l,target:c})>=r&&(o[a].push(i),o[i].push(a))}})}),o},t.prototype.getBundleScore=function(e,t){return e.vx=e.target.x-e.source.x,e.vy=e.target.y-e.source.y,t.vx=t.target.x-t.source.x,t.vy=t.target.y-t.source.y,e.length=s({x:e.source.x,y:e.source.y},{x:e.target.x,y:e.target.y}),t.length=s({x:t.source.x,y:t.source.y},{x:t.target.x,y:t.target.y}),this.getAngleScore(e,t)*this.getScaleScore(e,t)*this.getPositionScore(e,t)*this.getVisibilityScore(e,t)},t.prototype.getAngleScore=function(e,t){return function(e,t){return e.x*t.x+e.y*t.y}({x:e.vx,y:e.vy},{x:t.vx,y:t.vy})/(e.length*t.length)},t.prototype.getScaleScore=function(e,t){var r=(e.length+t.length)/2;return 2/(r/Math.min(e.length,t.length)+Math.max(e.length,t.length)/r)},t.prototype.getPositionScore=function(e,t){var r=(e.length+t.length)/2;return r/(r+s({x:(e.source.x+e.target.x)/2,y:(e.source.y+e.target.y)/2},{x:(t.source.x+t.target.x)/2,y:(t.source.y+t.target.y)/2}))},t.prototype.getVisibilityScore=function(e,t){var r=this.getEdgeVisibility(e,t),n=this.getEdgeVisibility(t,e);return r<n?r:n},t.prototype.getEdgeVisibility=function(e,t){var r=u(t.source,e),n=u(t.target,e),o={x:(r.x+n.x)/2,y:(r.y+n.y)/2},i={x:(e.source.x+e.target.x)/2,y:(e.source.y+e.target.y)/2};return Math.max(0,1-2*s(o,i)/s(r,n))},t.prototype.getEdgeForces=function(e,t,r,n){for(var o=this.get("edgePoints"),i=this.get("K")/(s(e.source,e.target)*(r+1)),a=[{x:0,y:0}],u=1;u<r;u++){var l={x:0,y:0},c=this.getSpringForce({pre:o[t][u-1],cur:o[t][u],next:o[t][u+1]},i),f=this.getElectrostaticForce(u,t);l.x=n*(c.x+f.x),l.y=n*(c.y+f.y),a.push(l)}return a.push({x:0,y:0}),a},t.prototype.getSpringForce=function(e,t){var r=e.pre.x+e.next.x-2*e.cur.x,n=e.pre.y+e.next.y-2*e.cur.y;return{x:r*=t,y:n*=t}},t.prototype.getElectrostaticForce=function(e,t){var r=this.get("eps"),n=this.get("edgeBundles"),o=this.get("edgePoints"),i={x:0,y:0};return n[t].forEach(function(n){var a={x:o[n][e].x-o[t][e].x,y:o[n][e].y-o[t][e].y};if(Math.abs(a.x)>r||Math.abs(a.y)>r){var u=1/s(o[n][e],o[t][e]);i.x+=a.x*u,i.y+=a.y*u}}),i},t.prototype.isTicking=function(){return this.get("ticking")},t.prototype.getSimulation=function(){return this.get("forceSimulation")},t.prototype.destroy=function(){this.get("ticking")&&this.getSimulation().stop(),e.prototype.destroy.call(this)},t}(o.default);t.default=l},41239:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,o=r(31834),i=r(48122),a=(n=r(78146))&&n.__esModule?n:{default:n};var s,u=(s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),l=function(){return(l=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},c=i.Util.distance,f={stroke:"#000",strokeOpacity:.8,lineWidth:2,fillOpacity:1,fill:"#fff"},h=function(e){function t(t){return e.call(this,t)||this}return u(t,e),t.prototype.getDefaultCfgs=function(){return{type:"both",trigger:"mousemove",r:60,delegateStyle:(0,o.clone)(f),showLabel:"edge",scaleRBy:"wheel"}},t.prototype.getEvents=function(){var e;switch(this.get("trigger")){case"click":e={click:"filter"};break;case"drag":e={click:"createDelegate"};break;default:e={mousemove:"filter"}}return e},t.prototype.init=function(){var e=this.get("showLabel"),t="node"===e||"both"===e,r="edge"===e||"both"===e;this.set("showNodeLabel",t),this.set("showEdgeLabel",r),this.get("shouldShow")||this.set("shouldShow",function(){return!0})},t.prototype.createDelegate=function(e){var t=this,r=t.get("delegate");r&&!r.destroyed||(t.filter(e),(r=t.get("delegate")).on("dragstart",function(e){}),r.on("drag",function(e){t.filter(e)}),"wheel"===this.get("scaleRBy")&&r.on("mousewheel",function(e){t.scaleRByWheel(e)}))},t.prototype.scaleRByWheel=function(e){if(e&&e.originalEvent){e.preventDefault&&e.preventDefault();var t,r=this.get("graph"),n=this.get("delegate");(n?{x:n.attr("x"),y:n.attr("y")}:void 0)||r.getPointByClient(e.clientX,e.clientY);t=e.originalEvent.wheelDelta<0?.95:1/.95;var o=this.get("maxR"),i=this.get("minR"),a=this.get("r");(a>(o||r.get("height"))&&t>1||a<(i||.05*r.get("height"))&&t<1)&&(t=1),a*=t,this.set("r",a),this.filter(e)}},t.prototype.filter=function(e){var t=this.get("graph"),r=t.getNodes(),n={},o=this.get("r"),i=this.get("type"),a={x:e.x,y:e.y};this.updateDelegate(a,o);var s=this.get("shouldShow"),u=this.get("vShapes");u&&u.forEach(function(e){e.remove(),e.destroy()}),u=[],r.forEach(function(e){var t=e.getModel(),r=t.x,i=t.y;c({x:r,y:i},a)<o&&(n[t.id]=e)});var l=[];t.getEdges().forEach(function(e){var t=e.getModel(),r=t.source,o=t.target;s(t)&&("only-source"===i||"one"===i?n[r]&&!n[o]&&l.push(e):"only-target"===i||"one"===i?n[o]&&!n[r]&&l.push(e):"both"===i&&n[r]&&n[o]&&l.push(e))});var f=this.get("showNodeLabel"),h=this.get("showEdgelabel"),p=t.get("group");l.forEach(function(e){e.get("group").get("children").forEach(function(e){var t=e.get("type"),r=p.addShape(t,{attrs:e.attr()});u.push(r),f&&"text"===t&&r.set("visible",!0)})}),Object.keys(n).forEach(function(e){var t=n[e].get("group").clone();if(p.add(t),u.push(t),h)for(var r=t.get("children"),o=0;o<r.length;o++){var i=r[o];"text"===i.get("type")&&i.set("visible",!0)}}),this.set("vShapes",u)},t.prototype.updateParams=function(e){var t=e.r,r=e.trigger,n=e.minR,o=e.maxR,i=e.scaleRBy,a=e.showLabel,s=e.shouldShow;if(isNaN(e.r)||this.set("r",t),isNaN(o)||this.set("maxR",o),isNaN(n)||this.set("minR",n),"mousemove"!==r&&"click"!==r||this.set("trigger",r),"wheel"===i||"unset"===i){this.set("scaleRBy",i),this.get("delegate").remove(),this.get("delegate").destroy();var u=this.get("dPercentText");u&&(u.remove(),u.destroy())}"node"!==a&&"both"!==a||this.set("showNodeLabel",!0),"edge"!==a&&"both"!==a||this.set("showEdgeLabel",!0),s&&this.set("shouldShow",s)},t.prototype.updateDelegate=function(e,t){var r=this,n=r.get("graph"),o=r.get("delegate");if(!o||o.destroyed){var i=n.get("group"),a=r.get("delegateStyle")||f;o=i.addShape("circle",{attrs:l({r:t,x:e.x,y:e.y},a),name:"lens-shape",draggable:!0}),"drag"!==this.get("trigger")&&"wheel"===this.get("scaleRBy")&&o.on("mousewheel",function(e){r.scaleRByWheel(e)})}else o.attr({x:e.x,y:e.y,r:t});r.set("delegate",o)},t.prototype.clear=function(){var e=this.get("vShapes");e&&e.forEach(function(e){e.remove(),e.destroy()}),e=[],this.set("vShapes",e);var t=this.get("delegate");t&&!t.destroyed&&(t.remove(),t.destroy())},t.prototype.destroy=function(){this.clear()},t}(a.default);t.default=h},192:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,o=r(31834),i=(n=r(78146))&&n.__esModule?n:{default:n};var a,s=(a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),u=function(){return(u=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},l={stroke:"#000",strokeOpacity:.8,lineWidth:2,fillOpacity:.1,fill:"#ccc"},c=function(e){function t(t){return e.call(this,t)||this}return s(t,e),t.prototype.getDefaultCfgs=function(){return{trigger:"mousemove",d:1.5,r:300,delegateStyle:(0,o.clone)(l),showLabel:!1,maxD:5,minD:0,scaleRBy:"unset",scaleDBy:"unset",showDPercent:!0}},t.prototype.getEvents=function(){var e;switch(this.get("trigger")){case"click":e={click:"magnify"};break;case"drag":e={click:"createDelegate"};break;default:e={mousemove:"magnify"}}return e},t.prototype.init=function(){var e=this.get("r");this.set("cachedMagnifiedModels",[]),this.set("cachedOriginPositions",{}),this.set("r2",e*e);var t=this.get("d");this.set("molecularParam",(t+1)*e)},t.prototype.createDelegate=function(e){var t=this,r=this,n=r.get("delegate");n&&!n.destroyed||(r.magnify(e),(n=r.get("delegate")).on("dragstart",function(e){r.set("delegateCenterDiff",{x:n.attr("x")-e.x,y:n.attr("y")-e.y})}),n.on("drag",function(e){r.magnify(e)}),"wheel"===this.get("scaleDBy")&&n.on("mousewheel",function(e){t.scaleDByWheel(e)}),"wheel"===this.get("scaleRBy")&&n.on("mousewheel",function(e){r.scaleRByWheel(e)}))},t.prototype.scaleRByWheel=function(e){if(e&&e.originalEvent){e.preventDefault&&e.preventDefault();var t,r=this.get("graph"),n=this.get("delegate"),o=(n?{x:n.attr("x"),y:n.attr("y")}:void 0)||r.getPointByClient(e.clientX,e.clientY);t=e.originalEvent.wheelDelta<0?.95:1/.95;var i=this.get("maxR"),a=this.get("minR"),s=this.get("r");(s>(i||r.get("height"))&&t>1||s<(a||.05*r.get("height"))&&t<1)&&(t=1),s*=t,this.set("r",s),this.set("r2",s*s);var u=this.get("d");this.set("molecularParam",(u+1)*s),this.set("delegateCenterDiff",void 0),this.magnify(e,o)}},t.prototype.scaleRByDrag=function(e){if(e){var t,r=this.get("dragPrePos"),n=this.get("graph"),o=n.getPointByClient(e.clientX,e.clientY);t=e.x-r.x<0?.95:1/.95;var i=this.get("maxR"),a=this.get("minR"),s=this.get("r");(s>(i||n.get("height"))&&t>1||s<(a||.05*n.get("height"))&&t<1)&&(t=1),s*=t,this.set("r",s),this.set("r2",s*s);var u=this.get("d");this.set("molecularParam",(u+1)*s),this.magnify(e,o),this.set("dragPrePos",{x:e.x,y:e.y})}},t.prototype.scaleDByWheel=function(e){if(e||e.originalEvent){e.preventDefault&&e.preventDefault();var t=0;t=e.originalEvent.wheelDelta<0?-.1:.1;var r=this.get("d")+t,n=this.get("maxD"),o=this.get("minD");if(r<n&&r>o){this.set("d",r);var i=this.get("r");this.set("molecularParam",(r+1)*i);var a=this.get("delegate"),s=a?{x:a.attr("x"),y:a.attr("y")}:void 0;this.set("delegateCenterDiff",void 0),this.magnify(e,s)}}},t.prototype.scaleDByDrag=function(e){var t=this.get("dragPrePos"),r=e.x-t.x>0?.1:-.1,n=this.get("d")+r,o=this.get("maxD"),i=this.get("minD");if(n<o&&n>i){this.set("d",n);var a=this.get("r");this.set("molecularParam",(n+1)*a),this.magnify(e)}this.set("dragPrePos",{x:e.x,y:e.y})},t.prototype.magnify=function(e,t){this.restoreCache();var r=this.get("graph"),n=this.get("cachedMagnifiedModels"),o=this.get("cachedOriginPositions"),i=this.get("showLabel"),a=this.get("r"),s=this.get("r2"),u=this.get("d"),l=this.get("molecularParam"),c=r.getNodes(),f=c.length,h=t?{x:t.x,y:t.y}:{x:e.x,y:e.y};!this.get("dragging")||"mousemove"!==this.get("trigger")&&"click"!==this.get("trigger")||(h=this.get("cacheCenter"));var p=this.get("delegateCenterDiff");p&&(h.x+=p.x,h.y+=p.y),this.updateDelegate(h,a);for(var d=0;d<f;d++){var y=c[d].getModel(),v=y.x,g=y.y;if(!isNaN(v)&&!isNaN(g)){var m=(v-h.x)*(v-h.x)+(g-h.y)*(g-h.y);if(!isNaN(m)&&m<s&&0!==m){var b=Math.sqrt(m),w=l*b/(u*b+a),_=(v-h.x)/b,x=(g-h.y)/b;if(y.x=_*w+h.x,y.y=x*w+h.y,o[y.id]||(o[y.id]={x:v,y:g,texts:[]}),n.push(y),i&&2*b<a)for(var S=c[d].getContainer().getChildren(),O=S.length,P=0;P<O;P++){var E=S[P];"text"===E.get("type")&&(o[y.id].texts.push({visible:E.get("visible"),shape:E}),E.set("visible",!0))}}}}r.refreshPositions()},t.prototype.restoreCache=function(){for(var e=this.get("cachedMagnifiedModels"),t=this.get("cachedOriginPositions"),r=e.length,n=0;n<r;n++){var o=e[n],i=t[o.id];o.x=i.x,o.y=i.y;for(var a=i.texts.length,s=0;s<a;s++){var u=i.texts[s];u.shape.set("visible",u.visible)}}this.set("cachedMagnifiedModels",[]),this.set("cachedOriginPositions",{})},t.prototype.updateParams=function(e){var t=e.r,r=e.d,n=e.trigger,o=e.minD,i=e.maxD,a=e.minR,s=e.maxR,u=e.scaleDBy,l=e.scaleRBy;isNaN(e.r)||(this.set("r",t),this.set("r2",t*t)),isNaN(r)||this.set("d",r),isNaN(i)||this.set("maxD",i),isNaN(o)||this.set("minD",o),isNaN(s)||this.set("maxR",s),isNaN(a)||this.set("minR",a);var c,f=this.get("d"),h=this.get("r");(this.set("molecularParam",(f+1)*h),"mousemove"!==n&&"click"!==n&&"drag"!==n||this.set("trigger",n),"drag"===u||"wheel"===u||"unset"===u)&&(this.set("scaleDBy",u),this.get("delegate").remove(),this.get("delegate").destroy(),(c=this.get("dPercentText"))&&(c.remove(),c.destroy()));"drag"!==l&&"wheel"!==l&&"unset"!==l||(this.set("scaleRBy",l),this.get("delegate").remove(),this.get("delegate").destroy(),(c=this.get("dPercentText"))&&(c.remove(),c.destroy()))},t.prototype.updateDelegate=function(e,t){var r=this,n=this,o=n.get("graph"),i=n.get("delegate");if(!i||i.destroyed){var a=o.get("group"),s=n.get("delegateStyle")||l;i=a.addShape("circle",{attrs:u({r:t/1.5,x:e.x,y:e.y},s),name:"lens-shape",draggable:!0}),"drag"!==this.get("trigger")&&("wheel"===this.get("scaleRBy")?i.on("mousewheel",function(e){n.scaleRByWheel(e)}):"drag"===this.get("scaleRBy")&&(i.on("dragstart",function(e){n.set("dragging",!0),n.set("cacheCenter",{x:e.x,y:e.y}),n.set("dragPrePos",{x:e.x,y:e.y})}),i.on("drag",function(e){n.scaleRByDrag(e)}),i.on("dragend",function(e){n.set("dragging",!1)})),"wheel"===this.get("scaleDBy")?i.on("mousewheel",function(e){r.scaleDByWheel(e)}):"drag"===this.get("scaleDBy")&&(i.on("dragstart",function(e){n.set("dragging",!0),n.set("cacheCenter",{x:e.x,y:e.y}),n.set("dragPrePos",{x:e.x,y:e.y})}),i.on("drag",function(e){r.scaleDByDrag(e)}),i.on("dragend",function(e){n.set("dragging",!1)})))}else i.attr({x:e.x,y:e.y,r:t/1.5});if(n.get("showDPercent")){var c=Math.round((n.get("d")-n.get("minD"))/(n.get("maxD")-n.get("minD"))*100),f=n.get("dPercentText"),h=e.y+t/1.5+16;if(!f||f.destroyed)f=o.get("group").addShape("text",{attrs:{text:"".concat(c,"%"),x:e.x,y:h,fill:"#aaa",stroke:"#fff",lineWidth:1,fontSize:12}}),n.set("dPercentText",f);else f.attr({text:"".concat(c,"%"),x:e.x,y:h})}n.set("delegate",i)},t.prototype.clear=function(){var e=this.get("graph");this.restoreCache(),e.refreshPositions();var t=this.get("delegate");t&&!t.destroyed&&(t.remove(),t.destroy());var r=this.get("dPercentText");r&&!r.destroyed&&(r.remove(),r.destroy())},t.prototype.destroy=function(){this.clear()},t}(i.default);t.default=c},90687:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,o=r(39269),i=(n=r(78146))&&n.__esModule?n:{default:n};var a,s=(a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),u="url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PHBhdHRlcm4gaWQ9ImdyaWQiIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCIgcGF0dGVyblVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHBhdGggZD0iTSAwIDEwIEwgNDAgMTAgTSAxMCAwIEwgMTAgNDAgTSAwIDIwIEwgNDAgMjAgTSAyMCAwIEwgMjAgNDAgTSAwIDMwIEwgNDAgMzAgTSAzMCAwIEwgMzAgNDAiIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2UwZTBlMCIgb3BhY2l0eT0iMC4yIiBzdHJva2Utd2lkdGg9IjEiLz48cGF0aCBkPSJNIDQwIDAgTCAwIDAgMCA0MCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjZTBlMGUwIiBzdHJva2Utd2lkdGg9IjEiLz48L3BhdHRlcm4+PC9kZWZzPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9InVybCgjZ3JpZCkiLz48L3N2Zz4=)",l=function(e){function t(t){return e.call(this,t)||this}return s(t,e),t.prototype.getDefaultCfgs=function(){return{img:u,follow:!0}},t.prototype.init=function(){var e=this.get("graph"),t=e.get("container"),r=e.get("canvas").get("el"),n=this.get("img")||u;n.includes("url(")||(n='url("'.concat(n,'")'));var i=(0,o.createDom)("<div class='g6-grid-container' style=\"position:absolute;overflow:hidden;z-index: -1;\"></div>"),a=(0,o.createDom)("<div\n        class='g6-grid'\n        style='position:absolute;\n        background-image: ".concat(n,";\n        user-select: none\n        '></div>"));this.set("container",i),this.set("gridContainer",a),this.positionInit(),i.appendChild(a),t.insertBefore(i,r)},t.prototype.positionInit=function(){var e=this.get("graph"),t=e.get("minZoom"),r=e.get("width"),n=e.get("height");(0,o.modifyCSS)(this.get("container"),{width:"".concat(r,"px"),height:"".concat(n,"px")});var i=80*r/t,a=80*n/t;(0,o.modifyCSS)(this.get("gridContainer"),{width:"".concat(i,"px"),height:"".concat(a,"px"),left:"-".concat(i/2,"px"),top:"-".concat(a/2,"px")})},t.prototype.getEvents=function(){return{viewportchange:"updateGrid"}},t.prototype.updateGrid=function(e){var t=this.get("gridContainer"),r=e.matrix;r||(r=[1,0,0,0,1,0,0,0,1]);var n=this.get("follow"),i="matrix(".concat(r[0],", ").concat(r[1],", ").concat(r[3],", ").concat(r[4],", ").concat(n?r[6]:"0",", ").concat(n?r[7]:"0",")");(0,o.modifyCSS)(t,{transform:i})},t.prototype.getContainer=function(){return this.get("container")},t.prototype.destroy=function(){var e=this.get("graph").get("container"),t=this.get("container");e.removeChild(t)},t}(i.default);t.default=l},11091:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,o=(n=r(78146))&&n.__esModule?n:{default:n},i=r(31834),a=r(39269),s=r(48122),u=r(43708);var l,c=(l=function(e,t){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}l(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),f=s.Util.applyMatrix;var h=function(e){function t(t){return e.call(this,t)||this}return c(t,e),t.prototype.getDefaultCfgs=function(){return{container:null,className:"g6-minimap",viewportClassName:"g6-minimap-viewport",width:200,delegateStyle:{fill:"#40a9ff",stroke:"#096dd9"},refresh:!0}},t.prototype.getEvents=function(){return{beforepaint:"updateViewport",beforeanimate:"disableRefresh",afteranimate:"enableRefresh",viewportchange:"disableOneRefresh"}},t.prototype.disableRefresh=function(){this.set("refresh",!1)},t.prototype.enableRefresh=function(){this.set("refresh",!0),this.updateCanvas()},t.prototype.disableOneRefresh=function(){this.set("viewportChange",!0)},t.prototype.initViewport=function(){var e=this,t=this._cfgs,r=t.graph;if(!this.destroyed){var n=this.get("container");(0,i.isString)(n)&&(n=document.getElementById(n));var o=(0,a.createDom)("<div class=".concat(t.viewportClassName,"\n      style='position:absolute;\n        left:0;\n        top:0;\n        box-sizing:border-box;\n        border: 2px solid #1980ff;\n        cursor:move'\n      </div>")),s=0,u=0,l=!1,c=0,f=0,h=0,p=0,d=0,y=0;n.addEventListener("mousedown",function(n){if(t.refresh=!1,n.target===o){var i=o.style;h=parseInt(i.width,10),p=parseInt(i.height,10);var a=e.get("width"),c=e.get("height");h>a||p>c||(y=r.getZoom(),d=e.get("ratio"),l=!0,s=n.clientX,u=n.clientY)}},!1),n.addEventListener("mousemove",function(t){if(l&&!(0,i.isNil)(t.clientX)&&!(0,i.isNil)(t.clientY)){var n=e.get("width"),v=e.get("height"),g=o.style;c=parseInt(g.left,10),f=parseInt(g.top,10),h=parseInt(g.width,10),p=parseInt(g.height,10);var m=s-t.clientX,b=u-t.clientY;c-m<0?m=c:c-m+h>=n&&(m=0),f-b<0?b=f:f-b+p>=v&&(b=0),c-=m,f-=b,(0,a.modifyCSS)(o,{left:"".concat(c,"px"),top:"".concat(f,"px")}),r.translate(m*y/d,b*y/d),s=t.clientX,u=t.clientY}},!1),n.addEventListener("mouseleave",function(){l=!1,t.refresh=!0},!1),n.addEventListener("mouseup",function(){l=!1,t.refresh=!0},!1),this.set("viewport",o),n.appendChild(o)}},t.prototype.updateViewport=function(){if(!this.destroyed){var e=this.get("ratio"),t=this.get("width"),r=this.get("height"),n=this.get("graph"),o=n.get("width"),i=o/n.get("height"),s=n.getGroup(),l=s.getCanvasBBox(),c=[(l.minX+l.maxX)/2,(l.minY+l.maxY)/2],h=[l.maxX-l.minX,l.maxY-l.minY],p={centerX:c[0],centerY:c[1],width:0,height:0,minX:0,minY:0};l[0]/l[1]>i?(p.width=h[0],p.height=p.width/i):(p.height=h[1],p.width=p.height*i),p.minX=c[0]-p.width/2,p.minY=c[1]-p.height/2;var d=s.getMatrix();d||(d=[1,0,0,0,1,0,0,0,1]);var y=u.mat3.invert([1,0,0,0,1,0,0,0,1],d),v=f({x:p.minX,y:p.minY},y),g=n.getCanvasByPoint(v.x,v.y),m=this.get("viewport");m||this.initViewport();var b=o/p.width,w=b*t,_=b*r,x=t*-g.x/p.width,S=r*-g.y/p.height,O=x+w,P=S+_;x<0&&(w+=x,x=0),O>t&&(w-=O-t),S<0&&(_+=S,S=0),P>r&&(_-=P-r),this.set("ratio",e);var E="".concat(x,"px"),k="".concat(S,"px");(0,a.modifyCSS)(m,{left:E,top:k,width:"".concat(w,"px"),height:"".concat(_,"px")})}},t.prototype.init=function(){this.initContainer()},t.prototype.initContainer=function(){var e=this.get("graph"),t=e.get("width"),r=e.get("height")/t,n=this.get("className"),o=this.get("container"),s=this.get("width"),u=this.get("height");s||u||(s=200),s?(u=r*s,this.set("height",u)):(s=1/r*u,this.set("width",s));var l=(0,a.createDom)("<div class='".concat(n,"' style='width: ").concat(s,"px; height: ").concat(u,"px; overflow: hidden; position: relative;'></div>"));(0,i.isString)(o)&&(o=document.getElementById(o)),o?o.appendChild(l):e.get("container").appendChild(l),this.set("container",l);var c=(0,a.createDom)('<div class="g6-minimap-container" style="position: relative; width: 100%; height: 100%; text-align: center; display: table;"></div>');l.appendChild(c);var f=(0,a.createDom)('<span style="display: table-cell; vertical-align: middle; "></span>');c.appendChild(f),this.set("containerDOM",c),this.set("containerSpan",f);var h=(0,a.createDom)('<img alt="" src="'.concat(this.get("graphImg"),'" style="display: inline-block; user-select: none;" draggable="false" />'));this.set("imgDOM",h),this.updateImgSize(),f.appendChild(h),this.updateCanvas()},t.prototype.updateImgSize=function(){var e=this.get("imgDOM"),t=this.get("width"),r=this.get("height");e.onload=function(){var n=function(e,t){var r,n;if(e.naturalWidth)r=e.naturalWidth,n=e.naturalHeight;else{var o=new Image;o.src=e.src,o.onload=function(){t&&t(o.width,o.height)}}return[r,n]}(e);n[0]>n[1]?e.width=t:e.height=r}},t.prototype.updateCanvas=function(){if(this.get("refresh")){var e=this.get("graph");if(!e.get("destroyed")){this.get("viewportChange")&&(this.set("viewportChange",!1),this.updateViewport());var t=this.get("width")/e.get("canvas").getCanvasBBox().width;this.set("ratio",t),this.updateViewport()}}},t.prototype.getViewport=function(){return this.get("viewport")},t.prototype.getContainer=function(){return this.get("container")},t.prototype.updateGraphImg=function(e){this.get("imgDOM").remove(),this.set("graphImg",e);var t=(0,a.createDom)('<img alt="" src="'.concat(e,'" style="display: inline-block;" ondragstart="return false;" onselectstart="return false;"/>'));this.set("imgDOM",t),t.src=e,this.updateImgSize(),this.get("containerSpan").appendChild(t),this.updateCanvas()},t.prototype.destroy=function(){var e=this.get("container");e.parentNode.removeChild(e)},t}(o.default);t.default=h},75836:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"Annotation",{enumerable:!0,get:function(){return v.default}}),Object.defineProperty(t,"Bundling",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"EdgeFilterLens",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(t,"Fisheye",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"Grid",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(t,"ImageMinimap",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(t,"Legend",{enumerable:!0,get:function(){return y.default}}),Object.defineProperty(t,"Menu",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"Minimap",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"PluginBase",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(t,"SnapLine",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(t,"TimeBar",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(t,"ToolBar",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"Tooltip",{enumerable:!0,get:function(){return l.default}}),t.default=void 0;var n=g(r(90687)),o=g(r(58042)),i=g(r(29953)),a=g(r(43688)),s=g(r(192)),u=g(r(42875)),l=g(r(61912)),c=g(r(74399)),f=g(r(11091)),h=g(r(41239)),p=g(r(24853)),d=g(r(78146)),y=g(r(20178)),v=g(r(84680));function g(e){return e&&e.__esModule?e:{default:e}}var m={PluginBase:d.default,Menu:o.default,Grid:n.default,Minimap:i.default,Bundling:a.default,ToolBar:u.default,Tooltip:l.default,Fisheye:s.default,TimeBar:c.default,ImageMinimap:f.default,EdgeFilterLens:h.default,SnapLine:p.default,Legend:y.default,Annotation:v.default};t.default=m},20178:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,o=r(39269),i=(n=r(78146))&&n.__esModule?n:{default:n},a=r(31834),s=r(48122),u=r(15873);var l,c=(l=function(e,t){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}l(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),f=function(){return(f=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},h=["click","mouseenter"],p=function(e){function t(t){return e.call(this,t)||this}return c(t,e),t.prototype.getDefaultCfgs=function(){return{data:{},position:"top",padding:8,margin:8,offsetX:0,offsetY:0,layout:"horizontal",flipPage:!1,containerStyle:{},align:void 0,horiSep:8,vertiSep:8,filter:{enable:!1,trigger:"click"}}},t.prototype.init=function(){this.formatArray("padding"),this.formatArray("margin");var e=this.get("filter")||{};e.multiple&&"mouseenter"===e.trigger&&this.set("multiple",!1);var t=this.get("align");if(!t){var r=this.get("position").split("-");r.includes("left")&&(t="left"),t=r.includes("right")?"right":"center",this.set("align",t)}var n=this.get("graph").get("container"),i=(0,o.createDom)("<div class='g6-legend-container' style=\"position: absolute;\"></div>");n.appendChild(i),this.set("container",i);var a=this.render();(0,o.modifyCSS)(i,this.getContainerPos(a)),this.bindEvents()},t.prototype.getContainerPos=function(e){void 0===e&&(e=[0,0]);var t=this.get("graph"),r=this.get("offsetX"),n=this.get("offsetY"),o=this.get("margin"),i=this.get("position").split("-"),a={top:0,right:1,bottom:2,left:3},s={left:(t.getWidth()-e[0])/2+0,top:(t.getHeight()-e[1])/2+0};return i.forEach(function(r){var n=o[a[r]],i=r;switch(r){case"top":case"left":n+=0;break;case"bottom":n=t.getHeight()-e[1]-n+0,i="top";break;default:n=t.getWidth()-e[0]-n+0,i="left"}s[i]=n}),s.top+=n+t.getContainer().offsetTop,s.left+=r+t.getContainer().offsetLeft,Object.keys(s).forEach(function(e){s[e]="".concat(s[e],"px")}),s},t.prototype.bindEvents=function(){var e=this,t=e.get("filter");if(t&&t.enable){var r=t.trigger||"click";h.includes(r)||(console.warn("Trigger for legend filterling must be 'click' or 'mouseenter', 'click' will take effect by default."),r="click");var n=e.get("legendCanvas");"mouseenter"===r?(n.on("node-container:mouseenter",function(t){return e.filterData(t)}),n.on("node-container:mouseleave",function(t){e.clearFilter(),e.clearActiveLegend()})):(n.on("node-container:click",function(t){return e.filterData(t)}),n.on("click",function(t){t.target&&t.target.isCanvas&&t.target.isCanvas()&&(e.clearFilter(),e.clearActiveLegend())}))}},t.prototype.changeData=function(e){this.set("data",e);var t=this.render();(0,o.modifyCSS)(this.get("container"),this.getContainerPos(t))},t.prototype.activateLegend=function(e){var t=this.get("filter");(null===t||void 0===t?void 0:t.multiple)||this.clearActiveLegend();var r=e.get("parent");r.get("active")?(r.set("active",!1),this.findLegendItemsByState("active").length&&r.set("inactive",!0)):(r.set("inactive",!1),r.set("active",!0)),this.findLegendItemsByState("active").length?this.findLegendItemsByState("active","all",!1).forEach(function(e){e.set("inactive",!0)}):this.clearActiveLegend();var n=(null===t||void 0===t?void 0:t.legendStateStyles)||{},o=(null===n||void 0===n?void 0:n.inactive)||{opacity:.5,"text-shape":{opacity:.5}},i=o["text-shape"]||{};this.findLegendItemsByState("inactive").forEach(function(e){var t=e.get("children"),r=t[0],n=t[1];r.attr(f(f({},r.get("oriAttrs")),o)),n.attr(f(f({},n.get("oriAttrs")),i))});var a=(null===n||void 0===n?void 0:n.active)||{stroke:"#000",lineWidth:2,"text-shape":{fontWeight:"bold"}},s=a["text-shape"]||{};this.findLegendItemsByState("active").forEach(function(e){var t=e.get("children"),r=t[0],n=t[1];r.attr(f(f({},r.get("oriAttrs")),a)),n.attr(f(f({},n.get("oriAttrs")),s))})},t.prototype.findLegendItemsByState=function(e,t,r){void 0===t&&(t="all"),void 0===r&&(r=!0);var n=this.get("legendCanvas").find(function(e){return"root"===e.get("name")}),o=n.find(function(e){return"node-group"===e.get("name")}),i=n.find(function(e){return"edge-group"===e.get("name")});return"node"===t?o.get("children").filter(function(t){return!!t.get(e)===r}):"edge"===t?i.get("children").filter(function(t){return!!t.get(e)===r}):o.get("children").filter(function(t){return!!t.get(e)===r}).concat(i.get("children").filter(function(t){return!!t.get(e)===r}))},t.prototype.clearActiveLegend=function(){var e=this.get("legendCanvas").find(function(e){return"root"===e.get("name")});[e.find(function(e){return"node-group"===e.get("name")}),e.find(function(e){return"edge-group"===e.get("name")})].forEach(function(e){e.get("children").forEach(function(e){e.set("active",!1),e.set("inactive",!1);var t=e.get("children"),r=t[0],n=t[1];r.attr(r.get("oriAttrs")),n.attr(n.get("oriAttrs"))})})},t.prototype.filterData=function(e){var t=this.get("filter"),r=null===t||void 0===t?void 0:t.filterFunctions;if(t&&r){var n=this.get("legendCanvas"),o=this.get("graph"),i=t.graphActiveState||"active",a=t.graphInactiveState||"inactive",s=t.multiple;this.clearFilter(),s||this.clearActiveLegend(),this.activateLegend(e.target);var u=n.find(function(e){return"root"===e.get("name")}),l=u.find(function(e){return"node-group"===e.get("name")}),c=u.find(function(e){return"edge-group"===e.get("name")}),f=l.get("children").filter(function(e){return e.get("active")}),h=c.get("children").filter(function(e){return e.get("active")}),p=0,d=["getNodes","getEdges"];d.forEach(function(e){o[e]().forEach(function(t){var n=!1;("getNodes"===e?f:h).forEach(function(e){var o=r[e.get("id")];n=n||o(t.getModel())}),n?(o.setItemState(t,a,!1),o.setItemState(t,i,!0),p++):(o.setItemState(t,i,!1),o.setItemState(t,a,!0))})}),p||d.forEach(function(e){o[e]().forEach(function(e){o.clearItemStates(e,[a])})})}},t.prototype.clearFilter=function(){var e=this.get("graph"),t=this.get("filter");if(t){var r=t.graphActiveState||"active",n=t.graphInactiveState||"inactive";e.getNodes().forEach(function(t){e.clearItemStates(t,[r,n])}),e.getEdges().forEach(function(t){e.clearItemStates(t,[r,n])})}},t.prototype.render=function(){var e=this;this.processData();var t=this.get("legendCanvas");t?t.clear():t=new u.Canvas({container:this.get("container"),width:200,height:200});var r=t.addGroup({name:"root"}),n=r.addGroup({name:"node-group"}),o=r.addGroup({name:"edge-group"});this.set("legendCanvas",t);var i=this.get("itemsData"),a=[n,o];["nodes","edges"].forEach(function(t,r){i[t].forEach(function(n){var o,i,u=a[r].addGroup({id:n.id,name:"node-container"}),l=n.type,c=e.getShapeSize(n),h=c.width,p=c.height,d=c.r,y=e.getStyle(t.substr(0,4),n);switch(n.type){case"circle":i={r:d,x:0,y:0};break;case"rect":i={width:h,height:p,x:-h/2,y:-p/2};break;case"ellipse":i={rx:h,ry:p,x:0,y:0},l="ellipse";break;case"line":i={x1:-h/2,y1:0,x2:h/2,y2:0},l="line";break;case"quadratic":i={path:[["M",-h/2,0],["Q",0,h/2,h/2,0]]},l="path";break;case"cubic":i={path:[["M",-h/2,0],["C",-h/6,h/2,h/6,-h/2,h/2,0]]},l="path";break;case"diamond":i={path:[["M",0,-p],["L",h,0],["L",0,p],["L",-h,0],["Z"]]},l="path";break;case"triangle":i={path:[["M",-h,p],["L",0,-p],["L",h,p],["Z"]]},l="path";break;case"star":i={path:s.Util.getStarPath(3*d,1.2*d)},l="path";break;default:i={r:d,x:0,y:0}}var v=u.addShape(l,{attrs:f(f({},i),y),name:"".concat(n.type,"-node-keyShape"),oriAttrs:f({opacity:1},y)});if(n.label){var g=v.getBBox(),m=(null===(o=n.labelCfg)||void 0===o?void 0:o.style)||{},b=f({textAlign:"begin",fontSize:12,textBaseline:"middle",fill:"#000",opacity:1,fontWeight:"normal"},m);u.addShape("text",{attrs:f({x:g.maxX+4,y:0,text:n.label},b),className:"legend-label",name:"".concat(n.type,"-node-text"),oriAttrs:b})}})});var l,c=this.get("padding"),h=r.find(function(e){return"title-container"===e.get("name")}),p={height:0,maxY:0,width:0};if(this.get("title")){h||(h=r.addGroup({name:"title-container"}));var d={fontSize:20,fontFamily:"Arial",fontWeight:300,textBaseline:"top",textAlign:"center",fill:"#000",x:0,y:c[0]},y=this.get("titleConfig")||{},v=Object.assign(d,y.style||{});l=h.addShape("text",{attrs:f({text:this.get("title")},v)}),p=h.getCanvasBBox(),h.setMatrix([1,0,0,0,1,0,y.offsetX,y.offsetY,1])}this.layoutItems();var g=r.getCanvasBBox(),m=n.getCanvasBBox(),b=m.minX<0?Math.abs(m.minX)+c[3]:c[3],w=p.maxY<m.minY?Math.abs(p.maxY-m.minY)+c[0]:p.maxY+c[0],_=[1,0,0,0,1,0,b,w,1];n.setMatrix(_);var x=[(g=r.getCanvasBBox()).minX+g.width+c[1],g.minY+g.height+c[2]];if(l){y=f({position:"center",offsetX:0,offsetY:0},this.get("titleConfig"));p=h.getCanvasBBox();var S=h.getMatrix()||[1,0,0,0,1,0,0,0,1];"center"===y.position?S[6]=x[0]/2+y.offsetX:"right"===y.position?(S[6]=x[0]-c[3]+y.offsetX,l.attr({textAlign:"right"})):(S[6]=c[3]+y.offsetX,l.attr({textAlign:"left"})),h.setMatrix(S),p=h.getCanvasBBox(),_=[1,0,0,0,1,0,b=m.minX<0?Math.abs(m.minX)+c[3]:c[3],w=m.minY<p.maxY?Math.abs(p.maxY-m.minY)+c[0]:p.maxY+c[0],1],n.setMatrix(_);var O=[1,0,0,0,1,0,b,w,1];"vertical"===this.get("layout")?O[6]+=m.maxX+this.get("horiSep"):O[7]+=m.maxY+this.get("vertiSep"),o.setMatrix(O)}else{m=n.getCanvasBBox();var P=[1,0,0,0,1,0,0,0,1];"vertical"===this.get("layout")?P[6]+=_[6]+m.maxX+this.get("horiSep"):P[7]+=_[7]+m.maxY+this.get("vertiSep"),o.setMatrix(P)}g=r.getCanvasBBox(),m=n.getCanvasBBox(),_=n.getMatrix()||[1,0,0,0,1,0,0,0,1];var E=o.getMatrix()||[1,0,0,0,1,0,0,0,1],k=o.getCanvasBBox();x=[Math.max(m.width+_[6],k.width+E[6])+c[1],Math.max(m.height+_[7],k.height+E[7])+c[2]],t.changeSize(x[0],x[1]);var M=this.get("containerStyle"),C=r.getMatrix()||[1,0,0,0,1,0,0,0,1],j=s.Util.invertMatrix({x:0,y:0},C);return r.addShape("rect",{attrs:f({x:j.x+(M.lineWidth||1),y:j.y+(M.lineWidth||1),width:x[0]-2*(M.lineWidth||1),height:x[1]-2*(M.lineWidth||1),fill:"#f00",stroke:"#000",lineWidth:1,opacity:.5},M),name:"legend-back-rect",capture:!1}).toBack(),x},t.prototype.layoutItems=function(){var e=this.get("legendCanvas"),t=this.get("horiSep"),r=this.get("vertiSep"),n=this.get("layout"),o=this.get("align"),i=[0,0],a=e.find(function(e){return"root"===e.get("name")}),s=a.find(function(e){return"node-group"===e.get("name")}),u=a.find(function(e){return"edge-group"===e.get("name")}),l={min:0,max:-1/0},c=-1/0;s.get("children").forEach(function(e,o){0===o&&(l.min=i[0]);var a=e.get("children")[0],s=e.getCanvasBBox(),u=a.getBBox(),f=u.width,h=u.height,p=0,d=0,y=0;"vertical"===n?(d=i[1],y=i[0]+f/2,i[0]=y+s.height+r,p=s.maxX+d+f/2):(d=i[0]+f/2,y=i[1],i[0]=d+s.width+t,p=s.maxY+y+h/2),i[0]>l.max&&(l.max=i[0]),p>c&&(c=p),e.setMatrix([1,0,0,0,1,0,d,y,1])});var f=l.max-l.min,h={min:0,max:-1/0},p=s.getCanvasBBox();i[0]=0,i[1]="vertical"===n?p.maxX+t:p.maxY+r,u.get("children").forEach(function(e,o){0===o&&(h.min=i[0]);var a=e.get("children")[0],s=e.getCanvasBBox(),u=a.getBBox(),l=u.width,c=u.height,f=0,p=0;"vertical"===n?(f=i[1],p=i[0],i[0]=p+s.height+r,e.setMatrix([1,0,0,0,1,0,0,p+c/2,1])):(f=i[0],p=i[1],i[0]=f+s.width+t,e.setMatrix([1,0,0,0,1,0,f+l/2,0,1])),i[0]>h.max&&(h.max=i[0])});var d=h.max-h.min;if(o&&""!==o&&"left"!==o){var y=f-d,v="center"===o?Math.abs(y)/2:Math.abs(y);(y<0?s:u).get("children").forEach(function(e){var t=e.getMatrix()||[1,0,0,0,1,0,0,0,1];"vertical"===n?t[7]+=v:t[6]+=v,e.setMatrix(t)})}},t.prototype.processData=function(){var e=this.get("data"),t={nodes:[],edges:[]};e.nodes&&(e.nodes.sort(function(e,t){return e.order-t.order}),e.nodes.forEach(function(e){var r,n,o,i,s,u=e.size||[(null===(r=e.style)||void 0===r?void 0:r.width)||(null===(n=e.style)||void 0===n?void 0:n.r)||8,(null===(o=e.style)||void 0===o?void 0:o.height)||(null===(i=e.style)||void 0===i?void 0:i.r)||8],l=(null===(s=e.labelCfg)||void 0===s?void 0:s.style)||{};t.nodes.push({id:e.id||(0,a.uniqueId)(),type:e.type||"circle",style:f({},e.style),order:e.order,label:e.label,itemType:"node",size:u,labelCfg:{position:"right",style:f({fontFamily:"Arial"},l)}})})),e.edges&&(e.edges.sort(function(e,t){return e.order-t.order}),e.edges.forEach(function(e){var r,n,o=e.type||"line";"cubic-horizontal"===e.type&&(o="cubic");var i=(null===(r=e.labelCfg)||void 0===r?void 0:r.style)||{},s=e.size||[(null===(n=e.style)||void 0===n?void 0:n.width)||8,1];t.edges.push({id:e.id||(0,a.uniqueId)(),type:o,size:s,style:f({lineWidth:(0,a.isArray)(s)?s[1]:1},e.style),order:e.order,label:e.label,itemType:"edge",labelCfg:{position:"right",style:f({fontFamily:"Arial"},i)}})})),this.set("itemsData",t)},t.prototype.getContainer=function(){return this.get("container")},t.prototype.formatArray=function(e){var t=this.get(e);if((0,a.isNumber)(t))this.set(e,[t,t,t,t]);else if((0,a.isArray)(t))switch(t.length){case 0:this.set(e,[0,0,0,0]);break;case 1:this.set(e,[t[0],t[0],t[0],t[0]]);break;case 2:this.set(e,[t[0],t[1],t[0],t[1]]);break;case 3:this.set(e,[t[0],t[1],t[2],t[1]])}return this.get(e)},t.prototype.getShapeSize=function(e){var t,r,n;return e.size&&((0,a.isArray)(e.size)?(t=e.size[0],r=e.size[1]||e.size[0],n=e.size[0]/2):(0,a.isNumber)(e.size)&&(t=e.size,r=e.size,n=e.size/2)),e.style&&(e.style.width&&(t=e.style.width),e.style.height&&(r=e.style.height),e.style.r&&(n=e.style.r)),n||(n=5),t||(t=n),r||(r=n),{width:t,height:r,r:n}},t.prototype.getStyle=function(e,t){return f(f({},"node"===e?{fill:"#ccc",lineWidth:0}:{stroke:"#000",lineWidth:1}),t.style||{})},t.prototype.destroy=function(){var e=this.get("legendCanvas");null===e||void 0===e||e.destroy();var t=this.get("graph").get("container"),r=this.get("container");t.removeChild(r)},t}(i.default);t.default=p},58042:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(39269),o=r(31834),i=s(r(28813)),a=s(r(78146));function s(e){return e&&e.__esModule?e:{default:e}}var u,l=(u=function(e,t){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}u(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});"undefined"!=typeof document&&(0,i.default)("\n  .g6-component-contextmenu {\n    border: 1px solid #e2e2e2;\n    border-radius: 4px;\n    font-size: 12px;\n    color: #545454;\n    background-color: rgba(255, 255, 255, 0.9);\n    padding: 10px 8px;\n    box-shadow: rgb(174, 174, 174) 0px 0px 10px;\n  }\n  .g6-contextmenu-ul {\n    padding: 0;\n    margin: 0;\n    list-style: none;\n  }\n\n");var c=function(e){function t(t){return e.call(this,t)||this}return l(t,e),t.prototype.getDefaultCfgs=function(){return{offsetX:6,offsetY:6,handleMenuClick:void 0,getContent:function(e){return"\n          <ul class='g6-contextmenu-ul'>\n            <li>èåé¡¹1</li>\n            <li>èåé¡¹2</li>\n          </ul>\n        "},shouldBegin:function(e){return!0},onHide:function(){return!0},itemTypes:["node","edge","combo"],trigger:"contextmenu"}},t.prototype.getEvents=function(){return"click"===this.get("trigger")?{click:"onMenuShow",touchend:"onMenuShow"}:{contextmenu:"onMenuShow"}},t.prototype.init=function(){var e=this.get("className"),t=(0,n.createDom)("<div class=".concat(e||"g6-component-contextmenu","></div>"));(0,n.modifyCSS)(t,{top:"0px",position:"absolute",visibility:"hidden"});var r=this.get("container");r||(r=this.get("graph").get("container")),(0,o.isString)(r)&&(r=document.getElementById(r)),r.appendChild(t),this.set("menu",t)},t.prototype.onMenuShow=function(e){var t=this;e.preventDefault();var r=this.get("itemTypes");if(e.item){if(e.item&&e.item.getType&&-1===r.indexOf(e.item.getType()))return void t.onMenuHide()}else if(-1===r.indexOf("canvas"))return void t.onMenuHide();if(this.get("shouldBegin")(e)){var i=this.get("menu"),a=this.get("getContent"),s=this.get("graph"),u=a(e,s);(0,o.isString)(u)?i.innerHTML=u:i.innerHTML=u.outerHTML,this.removeMenuEventListener();var l=this.get("handleMenuClick");if(l){var c=function(t){l(t.target,e.item,s)};this.set("handleMenuClickWrapper",c),i.addEventListener("click",c)}var f=s.get("width"),h=s.get("height"),p=i.getBoundingClientRect(),d=this.get("offsetX")||0,y=this.get("offsetY")||0,v=s.getContainer().offsetTop,g=s.getContainer().offsetLeft,m=e.canvasX+g+d,b=e.canvasY+v+y;m+p.width>f&&(m=e.canvasX-p.width-d+g),b+p.height>h&&(b=e.canvasY-p.height-y+v),b<0&&(b=0),(0,n.modifyCSS)(i,{top:"".concat(b,"px"),left:"".concat(m,"px"),visibility:"visible"});var w="click"===this.get("trigger"),_=function(e){w?w=!1:t.onMenuHide()};document.body.addEventListener("click",_),this.set("handler",_)}},t.prototype.removeMenuEventListener=function(){var e=this.get("handleMenuClickWrapper"),t=this.get("handler");e&&(this.get("menu").removeEventListener("click",e),this.set("handleMenuClickWrapper",null));t&&document.body.removeEventListener("click",t)},t.prototype.onMenuHide=function(){var e=this.get("menu");e&&(0,n.modifyCSS)(e,{visibility:"hidden"}),this.removeMenuEventListener()},t.prototype.destroy=function(){var e=this.get("menu");if(this.removeMenuEventListener(),e){var t=this.get("container");t||(t=this.get("graph").get("container")),(0,o.isString)(t)&&(t=document.getElementById(t)),t.removeChild(e)}},t}(a.default);t.default=c},29953:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,o=r(15873),i=r(32227),a=r(31834),s=r(39269),u=r(43708),l=(n=r(78146))&&n.__esModule?n:{default:n};var c,f=(c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),h=function(){return(h=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},p=Math.max,d=u.ext.transform,y=function(e){function t(t){var r=e.call(this,t)||this;return r.handleUpdateCanvas=(0,a.debounce)(function(e){var t=r;t.destroyed||t.updateCanvas()},100,!1),r}return f(t,e),t.prototype.getDefaultCfgs=function(){return{container:null,className:"g6-minimap",viewportClassName:"g6-minimap-viewport",type:"default",padding:50,size:[200,120],delegateStyle:{fill:"#40a9ff",stroke:"#096dd9"},refresh:!0,hideEdge:!1}},t.prototype.getEvents=function(){return{beforepaint:"updateViewport",beforeanimate:"disableRefresh",afteranimate:"enableRefresh",viewportchange:"disableOneRefresh"}},t.prototype.disableRefresh=function(){this.set("refresh",!1)},t.prototype.enableRefresh=function(){this.set("refresh",!0),this.updateCanvas()},t.prototype.disableOneRefresh=function(){this.set("viewportChange",!0)},t.prototype.initViewport=function(){var e=this,t=this._cfgs,r=t.size,n=t.graph;if(!this.destroyed){var o=this.get("canvas").get("container"),i=navigator.userAgent.toLowerCase().indexOf("firefox")>-1,u=navigator.userAgent.toLowerCase().indexOf("safari")>-1,l=(0,s.createDom)("\n      <div\n        class=".concat(t.viewportClassName,"\n        style='position:absolute;\n          left:0;\n          top:0;\n          box-sizing:border-box;\n          outline: 2px solid #1980ff;\n          cursor:move'\n        draggable=").concat(!u&&!i,"\n      </div>")),c=0,f=0,h=!1,p=0,d=0,y=0,v=0,g=0,m=0,b=u||i?"mousedown":"dragstart";l.addEventListener(b,function(o){var i,a;if(o.dataTransfer){var s=new Image;s.src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' %3E%3Cpath /%3E%3C/svg%3E",null===(a=(i=o.dataTransfer).setDragImage)||void 0===a||a.call(i,s,0,0);try{o.dataTransfer.setData("text/html","view-port-minimap")}catch(e){o.dataTransfer.setData("text","view-port-minimap")}}if(t.refresh=!1,o.target===l){var u=l.style;p=parseInt(u.left,10),d=parseInt(u.top,10),y=parseInt(u.width,10),v=parseInt(u.height,10),y>r[0]||v>r[1]||(m=n.getZoom(),g=e.get("ratio"),h=!0,c=o.clientX,f=o.clientY)}},!1);var w=function(e){if(h&&!(0,a.isNil)(e.clientX)&&!(0,a.isNil)(e.clientY)){var t=c-e.clientX,o=f-e.clientY;(p-t<0||p-t+y>=r[0])&&(t=0),(d-o<0||d-o+v>=r[1])&&(o=0),p-=t,d-=o,(0,s.modifyCSS)(l,{left:"".concat(p,"px"),top:"".concat(d,"px")}),n.translate(t*m/g,o*m/g),c=e.clientX,f=e.clientY}};u||i||l.addEventListener("drag",w,!1);var _=function(){h=!1,t.refresh=!0},x=u||i?"mouseup":"dragend";l.addEventListener(x,_,!1),o.addEventListener("mouseleave",_),o.addEventListener("mouseup",_),(u||i)&&o.addEventListener("mousemove",w,!1),this.set("viewport",l),o.appendChild(l)}},t.prototype.updateViewport=function(){if(!this.destroyed){var e=this.get("ratio"),t=this.get("totaldx"),r=this.get("totaldy"),n=this.get("graph"),o=this.get("size"),i=n.get("canvas").get("el"),a=n.get("width")||i.scrollWidth||500,u=n.get("height")||i.scrollHeight||500,l=n.getPointByCanvas(0,0),c=n.getPointByCanvas(a,u),f=this.get("viewport");f||this.initViewport();var h=(c.x-l.x)*e,p=(c.y-l.y)*e,d=l.x*e+t,y=l.y*e+r,v=d+h,g=y+p;d<0&&(h+=d,d=0),v>o[0]&&(h-=v-o[0]),y<0&&(p+=y,y=0),g>o[1]&&(p-=g-o[1]),this.set("ratio",e);var m="".concat(d,"px"),b="".concat(y,"px");(0,s.modifyCSS)(f,{left:m,top:b,width:"".concat(h,"px"),height:"".concat(p,"px")})}},t.prototype.updateGraphShapes=function(){var e,t=this._cfgs.graph,r=this.get("canvas"),n=t.get("group");n.destroyed||(r.clear(),this.get("hideEdge")?(e=r.addGroup(),n.get("children").forEach(function(t){t.get("id").includes("-edge")||e.add(t.clone())})):((e=n.clone()).resetMatrix(),r.add(e)),"svg"===t.get("renderer")&&this.updateVisible(e))},t.prototype.updateVisible=function(e){var t=this;if(e.isGroup()||e.get("visible")){var r=e.get("children");if(!r||!r.length)return;r.forEach(function(e){e.get("visible")||e.hide(),t.updateVisible(e)})}else e.hide()},t.prototype.updateKeyShapes=function(){var e=this,t=this._cfgs.graph,r=this.get("canvas"),n=r.get("children")[0]||r.addGroup();this.get("hideEdge")||(0,a.each)(t.getEdges(),function(t){e.updateOneEdgeKeyShape(t,n)}),(0,a.each)(t.getNodes(),function(t){e.updateOneNodeKeyShape(t,n)});var o=t.getCombos();if(o&&o.length){var i=n.find(function(e){return"comboGroup"===e.get("name")})||n.addGroup({name:"comboGroup"});setTimeout(function(){e.destroyed||((0,a.each)(o,function(t){e.updateOneComboKeyShape(t,i)}),null===i||void 0===i||i.sort(),null===i||void 0===i||i.toBack(),e.updateCanvas())},250)}this.clearDestroyedShapes()},t.prototype.updateOneComboKeyShape=function(e,t){if(!this.destroyed){var r=this.get("itemMap")||{},n=r[e.get("id")],o=e.getBBox(),i=e.get("keyShape").clone(),a=i.attr(),s={x:o.centerX,y:o.centerY};n?s=Object.assign(a,s):(n=i,t.add(n));var u=n.get("type");"rect"!==u&&"image"!==u||(s.x=o.minX,s.y=o.minY),n.attr(s),e.isVisible()?n.show():n.hide(),n.exist=!0;var l=e.getModel().depth;isNaN(l)||n.set("zIndex",l),r[e.get("id")]=n,this.set("itemMap",r)}},t.prototype.updateOneNodeKeyShape=function(e,t){var r=this.get("itemMap")||{},n=r[e.get("id")],o=e.getBBox(),i=e.get("keyShape").clone(),a=i.attr(),s={x:o.centerX,y:o.centerY};n?(s=Object.assign(a,s),n.toFront()):(n=i,t.add(n));var u=n.get("type");"rect"!==u&&"image"!==u||(s.x=o.minX,s.y=o.minY),n.attr(s),e.isVisible()?n.show():n.hide(),n.exist=!0;var l=e.getModel().depth;isNaN(l)||n.set("zIndex",l),r[e.get("id")]=n,this.set("itemMap",r)},t.prototype.updateDelegateShapes=function(){var e=this,t=this._cfgs.graph,r=this.get("canvas"),n=r.get("children")[0]||r.addGroup();this.get("hideEdge")||(0,a.each)(t.getEdges(),function(t){e.updateOneEdgeKeyShape(t,n)}),(0,a.each)(t.getNodes(),function(t){e.updateOneNodeDelegateShape(t,n)});var o=t.getCombos();if(o&&o.length){var i=n.find(function(e){return"comboGroup"===e.get("name")})||n.addGroup({name:"comboGroup"});setTimeout(function(){e.destroyed||((0,a.each)(o,function(t){e.updateOneComboKeyShape(t,i)}),null===i||void 0===i||i.sort(),null===i||void 0===i||i.toBack(),e.updateCanvas())},250)}this.clearDestroyedShapes()},t.prototype.clearDestroyedShapes=function(){var e=this.get("itemMap")||{},t=Object.keys(e);if(t&&0!==t.length)for(var r=t.length-1;r>=0;r--){var n=e[t[r]],o=n.exist;n.exist=!1,o||(n.remove(),delete e[t[r]])}},t.prototype.updateOneEdgeKeyShape=function(e,t){var r=this.get("itemMap")||{},n=r[e.get("id")];if(n){var o=e.get("keyShape").attr("path");n.attr("path",o)}else n=e.get("keyShape").clone(),t.add(n);e.isVisible()?n.show():n.hide(),n.exist=!0,r[e.get("id")]=n,this.set("itemMap",r)},t.prototype.updateOneNodeDelegateShape=function(e,t){var r=this.get("delegateStyle"),n=this.get("itemMap")||{},o=n[e.get("id")],i=e.getBBox();if(o){var a={x:i.minX,y:i.minY,width:i.width,height:i.height};o.attr(a),o.toFront()}else o=t.addShape("rect",{attrs:h({x:i.minX,y:i.minY,width:i.width,height:i.height},r),name:"minimap-node-shape"});e.isVisible()?o.show():o.hide(),o.exist=!0,n[e.get("id")]=o,this.set("itemMap",n)},t.prototype.init=function(){this.initContainer(),this.get("graph").on("afterupdateitem",this.handleUpdateCanvas),this.get("graph").on("afteritemstatechange",this.handleUpdateCanvas),this.get("graph").on("afteradditem",this.handleUpdateCanvas),this.get("graph").on("afterremoveitem",this.handleUpdateCanvas),this.get("graph").on("afterrender",this.handleUpdateCanvas),this.get("graph").on("afterlayout",this.handleUpdateCanvas)},t.prototype.initContainer=function(){var e=this.get("graph"),t=this.get("size"),r=this.get("className"),n=this.get("container"),u=(0,s.createDom)("<div class='".concat(r,"' style='width: ").concat(t[0],"px; height: ").concat(t[1],"px; overflow: hidden'></div>"));(0,a.isString)(n)&&(n=document.getElementById(n)),n?n.appendChild(u):e.get("container").appendChild(u),this.set("container",u);var l,c=(0,s.createDom)('<div class="g6-minimap-container" style="position: relative;"></div>');u.appendChild(c),c.addEventListener("dragenter",function(e){e.preventDefault()}),c.addEventListener("dragover",function(e){e.preventDefault()}),l="svg"===e.get("renderer")?new i.Canvas({container:c,width:t[0],height:t[1]}):new o.Canvas({container:c,width:t[0],height:t[1]}),this.set("canvas",l),this.updateCanvas()},t.prototype.updateCanvas=function(){if(!this.destroyed&&this.get("refresh")){var e=this.get("graph");if(!e.get("destroyed")){this.get("viewportChange")&&(this.set("viewportChange",!1),this.updateViewport());var t=this.get("size"),r=this.get("canvas"),n=this.get("type"),o=this.get("padding");if(!r.destroyed){switch(n){case"default":this.updateGraphShapes();break;case"keyShape":this.updateKeyShapes();break;case"delegate":this.updateDelegateShapes()}var i=r.get("children")[0];if(i){i.resetMatrix();var a=i.getCanvasBBox(),s=e.get("canvas").getCanvasBBox(),u=e.getZoom()||1,l=s.width/u,c=s.height/u;Number.isFinite(a.width)&&(l=p(a.width,l),c=p(a.height,c)),l+=2*o,c+=2*o;var f=Math.min(t[0]/l,t[1]/c),h=[1,0,0,0,1,0,0,0,1],y=0,v=0;Number.isFinite(a.minX)&&(y=-a.minX),Number.isFinite(a.minY)&&(v=-a.minY);var g=(t[0]-(l-2*o)*f)/2,m=(t[1]-(c-2*o)*f)/2;h=d(h,[["t",y,v],["s",f,f],["t",g,m]]),i.setMatrix(h),this.set("ratio",f),this.set("totaldx",g+y*f),this.set("totaldy",m+v*f),this.set("dx",g),this.set("dy",m),this.updateViewport()}}}}},t.prototype.getCanvas=function(){return this.get("canvas")},t.prototype.getViewport=function(){return this.get("viewport")},t.prototype.getContainer=function(){return this.get("container")},t.prototype.destroy=function(){var e;null===(e=this.get("canvas"))||void 0===e||e.destroy();var t=this.get("container");(null===t||void 0===t?void 0:t.parentNode)&&t.parentNode.removeChild(t)},t}(l.default);t.default=y},24853:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,o=r(31834),i=r(48122),a=(n=r(78146))&&n.__esModule?n:{default:n};var s,u=(s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),l=i.Util.pointLineDistance,c={stroke:"#FA8C16",lineWidth:1},f=function(e){function t(t){return e.call(this,t)||this}return u(t,e),t.prototype.getDefaultCfgs=function(){return{line:c,itemAlignType:"center",tolerance:5,horizontalLines:{},verticalLines:{},alignLines:[]}},t.prototype.init=function(){},t.prototype.getEvents=function(){return{"node:dragstart":"onDragStart","node:drag":"onDrag","node:dragend":"onDragEnd"}},t.prototype.onDragStart=function(){this.initBoxLine()},t.prototype.onDrag=function(e){var t=e.item,r=(t.get("delegateShape")||t).getBBox(),n=t.getModel(),o=n.x-r.x,i=n.y-r.y;this.show({x:r.minX+o,y:r.minY+i},{width:r.width,height:r.height})},t.prototype.onDragEnd=function(){this.destory()},t.prototype.initBoxLine=function(){var e=this._cfgs,t=e.horizontalLines,r=e.verticalLines,n=e.itemAlignType;this.get("graph").getNodes().forEach(function(e){var o=e.getBBox(),i=e.get("id");!0===n||"horizontal"===n?(t["".concat(i,"tltr")]=[o.minX,o.minY,o.maxX,o.minY,e],t["".concat(i,"lcrc")]=[o.minX,o.centerY,o.maxX,o.centerY,e],t["".concat(i,"blbr")]=[o.minX,o.maxY,o.maxX,o.maxY,e]):"center"===n&&(t["".concat(i,"lcrc")]=[o.minX,o.centerY,o.maxX,o.centerY,e]),!0===n||"vertical"===n?(r["".concat(i,"tlbl")]=[o.minX,o.minY,o.minX,o.maxY,e],r["".concat(i,"tcbc")]=[o.centerX,o.minY,o.centerX,o.maxY,e],r["".concat(i,"trbr")]=[o.maxX,o.minY,o.maxX,o.maxY,e]):"center"===n&&(r["".concat(i,"tcbc")]=[o.centerX,o.minY,o.centerX,o.maxY,e])})},t.prototype.show=function(e,t){var r=(0,o.mix)({},e);return this.itemAlign(e,t,r),e},t.prototype.itemAlign=function(e,t,r){var n=this,i=this._cfgs,a=i.horizontalLines,s=i.verticalLines,u=i.tolerance,l={x:r.x+t.width/2,y:r.y},c={x:r.x+t.width/2,y:r.y+t.height/2},f={x:r.x+t.width/2,y:r.y+t.height},h={x:r.x,y:r.y+t.height/2},p={x:r.x+t.width,y:r.y+t.height/2},d=[],y=[],v=null;if(this.clearAlignLine(),(0,o.each)(a,function(e){e[4].isVisible&&(d.push(n.getLineDisObject(e,l)),d.push(n.getLineDisObject(e,c)),d.push(n.getLineDisObject(e,f)))}),(0,o.each)(s,function(e){e[4].isVisible&&(y.push(n.getLineDisObject(e,h)),y.push(n.getLineDisObject(e,c)),y.push(n.getLineDisObject(e,p)))}),d.sort(function(e,t){return e.dis-t.dis}),y.sort(function(e,t){return e.dis-t.dis}),0!==d.length&&d[0].dis<u){e.y=d[0].line[1]-d[0].point.y+r.y,v={type:"item",horizontals:[d[0]]};for(var g=1;g<3;g++)d[0].dis===d[g].dis&&v.horizontals.push(d[g])}if(0!==y.length&&y[0].dis<u){e.x=y[0].line[0]-y[0].point.x+r.x,v?v.verticals=[y[0]]:v={type:"item",verticals:[y[0]]};for(g=1;g<3;g++)y[0].dis===y[g].dis&&v.verticals.push(y[g])}v&&(v.bbox=t,this.addAlignLine(v))},t.prototype.addAlignLine=function(e){var t=e.bbox,r=e.type,n=e.horizontals,i=e.verticals,a=this._cfgs,s=a.line,u=a.alignLines,l=this.get("graph").get("group");"item"===r&&(n&&(0,o.each)(n,function(e){var r,n,i=e.line,a=e.point,c=(i[0]+i[2])/2;a.x<c?(r=a.x-t.width/2,n=Math.max(i[0],i[2])):(r=a.x+t.width/2,n=Math.min(i[0],i[2]));var f=(0,o.mix)({x1:r,y1:i[1],x2:n,y2:i[1]},s),h=l.addShape("line",{attrs:f,capture:!1});u.push(h)}),i&&(0,o.each)(i,function(e){var r,n,i=e.line,a=e.point,c=(i[1]+i[3])/2;a.y<c?(r=a.y-t.height/2,n=Math.max(i[1],i[3])):(r=a.y+t.height/2,n=Math.min(i[1],i[3]));var f=(0,o.mix)({x1:i[0],y1:r,x2:i[0],y2:n},s),h=l.addShape("line",{attrs:f,capture:!1});u.push(h)}))},t.prototype.getLineDisObject=function(e,t){return{line:e,point:t,dis:l(e,t)}},t.prototype.getContainer=function(){return this.get("container")},t.prototype.clearAlignLine=function(){var e=this._cfgs.alignLines;(0,o.each)(e,function(e){e.remove()}),e.length=0},t.prototype.destory=function(){var e=this._cfgs,t=e.horizontalLines,r=e.verticalLines;this.get("graph").getNodes().forEach(function(e){var n=e.get("id");delete t["".concat(n,"tltr")],delete t["".concat(n,"lcrc")],delete t["".concat(n,"blbr")],delete r["".concat(n,"tlbl")],delete r["".concat(n,"tcbc")],delete r["".concat(n,"trbr")]}),this.clearAlignLine()},t}(a.default);t.default=f},41520:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VALUE_CHANGE=t.TIMELINE_START=t.TIMELINE_END=t.TIMEBAR_CONFIG_CHANGE=t.PRE_STEP_BTN=t.PLAY_PAUSE_BTN=t.NEXT_STEP_BTN=void 0;t.TIMELINE_START="timebarstartplay";t.TIMELINE_END="timebarendplay";t.VALUE_CHANGE="valuechange";t.TIMEBAR_CONFIG_CHANGE="timebarConfigChanged";t.PLAY_PAUSE_BTN="playPauseBtn";t.NEXT_STEP_BTN="nextStepBtn";t.PRE_STEP_BTN="preStepBtn"},86627:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.TIME_TYPE=void 0;var n,o=r(31834),i=r(43708),a=(n=r(51515))&&n.__esModule?n:{default:n},s=r(41520);var u=function(){return(u=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},l=i.ext.transform,c={fill:"#aaa",fillOpacity:.35,stroke:"#aaa"},f={fill:"#fff"},h={fill:"green"},p={pointer:{fill:"#aaa",lineWidth:0},scroller:{stroke:"#aaa",fill:"#aaa",lineWidth:1,lineAppendWidth:5,cursor:"pointer"},text:{fill:"#aaa",textBaseline:"top"}},d={check:{stroke:"green",lineWidth:3},box:{fill:"#fff",stroke:"#aaa",lineWidth:2,radius:3,width:12,height:12},text:{fill:"#aaa",fontSize:12,textBaseline:"top"}},y={speed:1,loop:!1,fill:"#fff",stroke:"#fff",hideTimeTypeController:!1,preBtnStyle:{fill:"#aaa",stroke:"#aaa"},nextBtnStyle:{fill:"#aaa",stroke:"#aaa"},playBtnStyle:{fill:"#aaa",stroke:"#aaa",fillOpacity:.05},speedControllerStyle:p,timeTypeControllerStyle:d},v={SINGLE:"single",RANGE:"range"};t.TIME_TYPE=v;var g=function(){function e(e){this.controllerCfg=(0,o.deepMix)({},y,e),this.group=e.group,this.controllerGroup=this.group.addGroup({name:"controller-group"}),this.speedAxisY=[],this.currentSpeed=this.controllerCfg.speed,this.currentType=this.controllerCfg.defaultTimeType||v.RANGE,this.fontFamily=e.fontFamily||"Arial, sans-serif",this.init()}return e.prototype.init=function(){this.renderPlayButton()},e.prototype.getNextMarkerPath=function(e,t,r){return[["M",e,t-r],["L",e+r,t],["L",e,t+r],["Z",e,t-r],["M",e,t],["L",e-r,t-r],["L",e-r,t+r],["Z"]]},e.prototype.getPreMarkerPath=function(e,t,r){return[["M",e,t-r],["L",e-r,t],["L",e,t+r],["L",e,t-r],["M",e,t],["L",e+r,t-r],["L",e+r,t+r],["Z"]]},e.prototype.renderPlayButton=function(){var e=this.controllerCfg,t=e.width,r=e.height,n=e.x,o=e.y,i=e.hideTimeTypeController,p=e.fill,d=void 0===p?"#aaa":p,y=e.stroke,v=void 0===y?"green":y,g=e.containerStyle,m=void 0===g?{}:g,b=u(u({},c),e.playBtnStyle||{}),w=u(u({},f),e.preBtnStyle||{}),_=u(u({},h),e.nextBtnStyle||{}),x=r/2-5,S=o+10,O=this.controllerGroup.addShape("rect",{attrs:u({x:n,y:S,width:t,height:r,stroke:v,fill:d},m),name:"container-rect"});this.playButton?this.playButton.update({x:t/2,y:S,r:x}):this.playButton=new a.default({group:this.controllerGroup,x:t/2,y:S+x+5,r:x,isPlay:this.isPlay,style:b});var P=w.offsetX||0,E=w.offsetY||0,k=(w.scale||1)*x;this.controllerGroup.addShape("path",{attrs:u({path:this.getPreMarkerPath(t/2-5*x+P,S+x+5+E,.5*k)},w),name:s.PRE_STEP_BTN});var M=_.offsetX||0,C=_.offsetY||0,j=(_.scale||1)*x;this.controllerGroup.addShape("path",{attrs:u({path:this.getNextMarkerPath(t/2+5*x+M,S+x+5+C,.5*j)},_),name:s.NEXT_STEP_BTN}),O.toBack(),this.renderSpeedBtn(),i||this.renderToggleTime(),this.bindEvent();var T=this.controllerCfg.scale,A=void 0===T?1:T,I=this.controllerGroup.getCanvasBBox(),R=(I.maxX+I.minX)/2,L=(I.maxY+I.minY)/2,N=l([1,0,0,0,1,0,0,0,1],[["t",-R,-L],["s",A,A],["t",R,L]]);this.controllerGroup.setMatrix(N)},e.prototype.renderSpeedBtn=function(){var e=this.controllerCfg,t=e.y,r=e.width,n=e.hideTimeTypeController,o=u(u({},p),this.controllerCfg.speedControllerStyle||{}),i=o.scroller,a=void 0===i?{}:i,s=o.text,c=void 0===s?{}:s,f=o.pointer,h=void 0===f?{}:f,d=o.scale,y=void 0===d?1:d,v=o.offsetX,g=void 0===v?0:v,m=o.offsetY,b=void 0===m?0:m,w=this.controllerGroup.addGroup({name:"speed-group"});this.speedGroup=w;var _=[],x=5;this.speedAxisY=[19,22,26,32,39];for(var S=0;S<5;S++){var O=t+this.speedAxisY[S],P=r-(n?50:110);w.addShape("line",{attrs:u({x1:P,x2:P+15,y1:O,y2:O},a),speed:x,name:"speed-rect"}),this.speedAxisY[S]=O,_.push(x),x-=1}this.speedText=w.addShape("text",{attrs:u({x:r-(n?50:110)+20,y:this.speedAxisY[0]+4,text:"1.0X",fontFamily:this.fontFamily||"Arial, sans-serif"},c),name:"speed-text"}),this.speedPoint=w.addShape("path",{attrs:u({path:this.getPointerPath(r-(n?50:110),0),matrix:[1,0,0,0,1,0,0,this.speedAxisY[4],1]},h),name:"speed-pointer"});var E=this.speedGroup.getCanvasBBox(),k=(E.maxX+E.minX)/2,M=(E.maxY+E.minY)/2,C=this.speedGroup.getMatrix()||[1,0,0,0,1,0,0,0,1];C=l(C,[["t",-k,-M],["s",y,y],["t",k+g*y,M+b*y]]),this.speedGroup.setMatrix(C)},e.prototype.getPointerPath=function(e,t){return[["M",e,t],["L",e-10,t-4],["L",e-10,t+4],["Z"]]},e.prototype.renderToggleTime=function(){var e,t,r=this.controllerCfg,n=r.width,o=r.defaultTimeType,i=u(u({},d),this.controllerCfg.timeTypeControllerStyle||{}),a=i.scale,s=void 0===a?1:a,c=i.offsetX,f=void 0===c?0:c,h=i.offsetY,p=void 0===h?0:h,y=i.box,g=void 0===y?{}:y,m=i.check,b=void 0===m?{}:m,w=i.text,_=void 0===w?{}:w;this.toggleGroup=this.controllerGroup.addGroup({name:"toggle-group"});var x=o===v.SINGLE;this.toggleGroup.addShape("rect",{attrs:u({x:n-50,y:this.speedAxisY[0]+3.5},g),isChecked:x,name:"toggle-model"}),this.checkedIcon=this.toggleGroup.addShape("path",{attrs:u({path:[["M",n-50+3,this.speedAxisY[1]+6],["L",n-50+7,this.speedAxisY[1]+10],["L",n-50+12,this.speedAxisY[1]+4]]},b),capture:!1,name:"check-icon"}),x||this.checkedIcon.hide(),this.checkedText=this.toggleGroup.addShape("text",{attrs:u({text:x?(null===(e=this.controllerCfg)||void 0===e?void 0:e.timeRangeControllerText)||"æ¶é´èå´":(null===(t=this.controllerCfg)||void 0===t?void 0:t.timePointControllerText)||"åä¸æ¶é´",x:n-50+15,y:this.speedAxisY[0]+4,fontFamily:"undefined"!=typeof window&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif"},_),name:"checked-text"});var S=this.toggleGroup.getCanvasBBox(),O=(S.maxX+S.minX)/2,P=(S.maxY+S.minY)/2,E=this.toggleGroup.getMatrix()||[1,0,0,0,1,0,0,0,1];E=l(E,[["t",-O,-P],["s",s,s],["t",O+f*s,P+p*s]]),this.toggleGroup.setMatrix(E)},e.prototype.bindEvent=function(){var e=this;this.speedGroup.on("speed-rect:click",function(t){var r=t.target.attr("y1"),n=e.speedPoint.attr("matrix"),o=e.speedAxisY.indexOf(n[7]||0),i=e.speedAxisY.indexOf(r),a=e.speedAxisY[i]-e.speedAxisY[o];n=l(n,[["t",0,a]]),e.speedPoint.setMatrix(n),e.currentSpeed=e.speedAxisY.length-i,e.speedText.attr("text","".concat(e.currentSpeed,".0X")),e.group.emit(s.TIMEBAR_CONFIG_CHANGE,{speed:e.currentSpeed,type:e.currentType})}),this.speedGroup.on("mousewheel",function(t){t.preventDefault();var r=e.speedPoint.attr("matrix")||[1,0,0,0,1,0,0,0,1],n=r[7],o=e.speedAxisY.indexOf(n);if(-1===o){var i=1/0;e.speedAxisY.forEach(function(e,t){var r=Math.abs(e-n);i>r&&(i=r,o=t)})}o=t.originalEvent.deltaY>0?Math.max(0,o-1):Math.min(e.speedAxisY.length-1,o+1);var a=e.speedAxisY[o]-n;r=l(r,[["t",0,a]]),e.speedPoint.setMatrix(r),e.currentSpeed=e.speedAxisY.length-o,e.speedText.attr("text","".concat(e.currentSpeed,".0X")),e.group.emit(s.TIMEBAR_CONFIG_CHANGE,{speed:e.currentSpeed,type:e.currentType})}),this.toggleGroup&&this.toggleGroup.on("toggle-model:click",function(t){var r,n,o=t.target.get("isChecked");o?(e.checkedIcon.hide(),e.checkedText.attr("text",(null===(n=e.controllerCfg)||void 0===n?void 0:n.timePointControllerText)||"åä¸æ¶é´"),e.currentType=v.RANGE):(e.checkedIcon.show(),e.checkedText.attr("text",(null===(r=e.controllerCfg)||void 0===r?void 0:r.timeRangeControllerText)||"æ¶é´èå´"),e.currentType=v.SINGLE),t.target.set("isChecked",!o),e.group.emit(s.TIMEBAR_CONFIG_CHANGE,{type:e.currentType,speed:e.currentSpeed})})},e.prototype.destroy=function(){this.speedGroup.off("speed-rect:click"),this.toggleGroup&&(this.toggleGroup.off("toggle-model:click"),this.toggleGroup.destroy()),this.speedGroup.destroy()},e}();t.default=g},82010:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(31834),o=function(){return(o=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},i={fill:"#1890ff",stroke:"#1890ff",type:"trend",radius:2,opacity:1,cursor:"ew-resize",highLightFill:"#0050b3"},a={fill:"#fff",stroke:"#1890ff",radius:2,opacity:1,cursor:"ew-resize"},s=function(){function e(e){var t=e.group,r=e.name,n=e.type,s=e.x,u=void 0===s?0:s,l=e.y,c=void 0===l?0:l,f=e.width,h=void 0===f?2:f,p=e.height,d=void 0===p?24:p,y=e.style,v=void 0===y?{}:y;this.group=t,this.name=r,this.handleType=n,this.x=u,this.y=c,this.width=h,this.height=d,"trend"===n?this.style=o(o({},i),v):"simple"===n&&(this.style=o(o({},a),v)),this.renderHandle()}return e.prototype.setX=function(e){this.setXY(e,void 0)},e.prototype.setY=function(e){this.setXY(void 0,e)},e.prototype.setXY=function(e,t){(0,n.isNumber)(e)&&(this.x=e),(0,n.isNumber)(t)&&(this.y=t),this.updateXY()},e.prototype.renderHandle=function(){var e=this.width,t=this.height,r=this.style,n=this.name,o=r.fill,i=r.stroke,a=r.radius,s=r.opacity,u=r.cursor;this.handleGroup=this.group.addGroup(),"trend"===this.handleType?(this.verticalLine=this.handleGroup.addShape("rect",{attrs:{x:0,y:0,width:e,height:t,fill:o,stroke:i,radius:a,opacity:s,cursor:u},name:"".concat(n,"-handler")}),this.topCircle=this.handleGroup.addShape("circle",{attrs:{x:e/2,y:0,r:2*e,fill:o,stroke:i,radius:a,opacity:s,cursor:u,lineAppendWidth:12},name:"".concat(n,"-handler")}),this.bottomCircle=this.handleGroup.addShape("circle",{attrs:{x:e/2,y:t,r:2*e,fill:o,stroke:i,radius:a,opacity:s,cursor:u},name:"".concat(n,"-handler")})):"simple"===this.handleType&&(this.topCircle=this.handleGroup.addShape("circle",{attrs:{x:e/2,y:t/2,r:2*e,fill:o,stroke:i,radius:a,opacity:s,cursor:u,lineWidth:2},name:"".concat(n,"-handler")})),this.updateXY(),"trend"===this.handleType?this.bindTrendEvents():"simple"===this.handleType&&this.bindSimpleEvents()},e.prototype.bindSimpleEvents=function(){var e=this,t=this.name;this.handleGroup.on("".concat(t,"-handler:mouseenter"),function(){var t=e.style.highLightFill;e.topCircle.attr("fill",t)}),this.handleGroup.on("".concat(t,"-handler:mouseleave"),function(){var t=e.style.fill;e.topCircle.attr("fill",t)})},e.prototype.bindTrendEvents=function(){var e=this,t=this.name;this.handleGroup.on("".concat(t,"-handler:mouseenter"),function(){var t=e.style.highLightFill;e.verticalLine.attr("fill",t),e.topCircle.attr("fill",t),e.bottomCircle.attr("fill",t)}),this.handleGroup.on("".concat(t,"-handler:mouseleave"),function(){var t=e.style.fill;e.verticalLine.attr("fill",t),e.topCircle.attr("fill",t),e.bottomCircle.attr("fill",t)})},e.prototype.show=function(){this.handleGroup.show()},e.prototype.hide=function(){this.handleGroup.hide()},e.prototype.updateXY=function(){this.handleGroup.setMatrix([1,0,0,0,1,0,this.x,this.y,1])},e}();t.default=s},74399:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(39269),o=r(15873),i=r(32227),a=r(31834),s=f(r(78146)),u=r(41520),l=f(r(90832)),c=f(r(1187));function f(e){return e&&e.__esModule?e:{default:e}}var h,p=(h=function(e,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}h(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),d=function(){return(d=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},y=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r},v=function(e){function t(t){var r=e.call(this,t)||this;return r.afterrenderListener=function(e){return r.filterData({})},r.valueChangeListener=(0,a.throttle)(function(e){return r.filterData(e)},200,{trailing:!0,leading:!0}),r.changeData=function(e){var t=r.get("graph");r.cacheGraphData=t.get("data"),r.filterData({})},r}return p(t,e),t.prototype.getDefaultCfgs=function(){return{container:null,className:"g6-component-timebar",padding:10,type:"trend",trend:{data:[],isArea:!1,smooth:!0},controllerCfg:{speed:1,loop:!1},slider:{start:.1,end:.9,minText:"min",maxText:"max"},tick:{start:.1,end:.9,data:[]},textStyle:{},filterEdge:!1,filterItemTypes:["node"],containerCSS:{},putInGraphContainer:!0}},t.prototype.initContainer=function(){var e,t,r=this.get("graph"),s=this._cfgs,u=s.width,l=s.height,c=s.putInGraphContainer,f=this.get("className")||"g6-component-timebar",h=this.get("container");(h?((0,a.isString)(h)&&(h=document.getElementById(h)),e=h):(e=(0,n.createDom)("<div class='".concat(f,"'></div>")),(0,n.modifyCSS)(e,{position:"relative"})),c)&&this.get("graph").get("container").appendChild(e);this.set("timeBarContainer",e),t="SVG"===r.get("renderer")?new i.Canvas({container:e,width:u,height:l}):new o.Canvas({container:e,width:u,height:l}),this.get("containerCSS")&&(0,n.modifyCSS)(e,this.get("containerCSS")),this.set("canvas",t)},t.prototype.init=function(){this.initContainer();var e=this.get("canvas").addGroup({name:"timebar-group"});this.set("timeBarGroup",e),this.renderTrend(),this.initEvent();var t="undefined"!=typeof window&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif";this.set("fontFamily",t)},t.prototype.play=function(){this.togglePlay(!0)},t.prototype.pause=function(){this.togglePlay(!1)},t.prototype.togglePlay=function(e){var t=this.get("timebar");t&&(t.isPlay=!!e,t.changePlayStatus())},t.prototype.renderTrend=function(){var e=this,t=this._cfgs,r=t.width,n=t.x,o=t.y,i=t.padding,a=t.type,s=t.trend,u=t.slider,f=t.controllerCfg,h=t.textStyle,p=t.tick,v=t.backgroundStyle,g=t.foregroundStyle,m=s.data,b=y(s,["data"]),w=r-2*i,_="trend"===a?26:4,x=this.get("graph"),S=this.get("timeBarGroup"),O=this.get("canvas"),P=null;if("trend"===a||"simple"===a){var E=this.get("getValue");P=new c.default(d(d({graph:x,canvas:O,group:S,type:a,x:n+i,y:"trend"===a?o+i:o+i+15,width:w,height:_,padding:i,backgroundStyle:v,foregroundStyle:g,trendCfg:d(d({},b),{data:m.map(function(e){return(null===E||void 0===E?void 0:E(e))||e.value})})},u),{tick:{ticks:m,tickLabelFormatter:p.tickLabelFormatter,tickLabelStyle:p.tickLabelStyle,tickLineStyle:p.tickLineStyle},handlerStyle:d(d({},u.handlerStyle),{height:u.height||_}),controllerCfg:f,textStyle:h}))}else"tick"===a&&(P=new l.default(d({graph:x,canvas:O,group:S,x:n+i,y:o+i,width:r,height:42,padding:2,controllerCfg:f},p)));var k=function t(){var r=e.get("timebar");r.draggingHandler=!1,r.isPlay&&(r.isPlay=!1,r.currentHandler=r.maxHandlerShape,r.changePlayStatus()),document.removeEventListener("mouseup",t)};O.on("mousedown",function(e){"maxHandlerShape-handler"!==e.target.get("name")&&"minHandlerShape-handler"!==e.target.get("name")&&e.target!==P.foregroundShape||document.addEventListener("mouseup",k)}),this.set("timebar",P)},t.prototype.filterData=function(e){var t,r=e.value;if(!r){r=[];var n=this._cfgs.type;n&&"trend"!==n&&"simple"!==n?"tick"===n&&(r[0]=this._cfgs.tick.start,r[1]=this._cfgs.tick.end):(r[0]=this._cfgs.slider.start,r[1]=this._cfgs.slider.end)}var o=null,i=this._cfgs.type;if("trend"===i||"simple"===i?o=this._cfgs.trend.data:"tick"===i&&(o=this._cfgs.tick.data),o&&0!==o.length){var a=this.get("rangeChange"),s=this.get("graph"),u=Math.round(o.length*r[0]),l=Math.round(o.length*r[1]);l=l>=o.length?o.length-1:l,u=u>=o.length?o.length-1:u;var c=null===(t=this._cfgs.tick)||void 0===t?void 0:t.tickLabelFormatter,f=c?c(o[u]):o[u].date,h=c?c(o[l]):o[l].date;if("tick"!==i)this.get("timebar").setText(f,h);if(a)a(s,f,h);else{(!this.cacheGraphData||this.cacheGraphData.nodes&&0===this.cacheGraphData.nodes.length)&&(this.cacheGraphData=s.get("data"));var p=this.get("filterItemTypes"),d=this.get("changeData"),y=this.get("getDate"),v=this.get("shouldIgnore"),g=o[u].date,m=o[l].date;if(d||void 0===d){var b=this.cacheGraphData.nodes,w=this.cacheGraphData.edges,_={},x={};s.getNodes().forEach(function(e){return _[e.getID()]=!0}),s.getEdges().forEach(function(e){return x[e.getID()]=!0}),p.includes("node")&&(null===b||void 0===b||b.forEach(function(e){var t=+((null===y||void 0===y?void 0:y(e))||e.date),r=t>=g&&t<=m||(null===v||void 0===v?void 0:v("node",e,{min:g,max:m})),n=_[e.id];n&&!r?(s.removeItem(e.id),_[e.id]=!1):!n&&r&&(s.addItem("node",e),_[e.id]=!0)}),null===w||void 0===w||w.forEach(function(e){var t=_[e.source]&&_[e.target]||(null===v||void 0===v?void 0:v("edge",e,{min:g,max:m})),r=!!s.findById(e.id);r&&!t?(s.removeItem(e.id),x[e.id]=!1):!r&&t?(s.addItem("edge",e),x[e.id]=!0):r||(x[e.id]=!1)})),(this.get("filterEdge")||p.includes("edge"))&&(null===w||void 0===w||w.filter(function(e){var t=+((null===y||void 0===y?void 0:y(e))||e.date),r=t>=g&&t<=m||(null===v||void 0===v?void 0:v("edge",e,{min:g,max:m})),n=_[e.source]&&_[e.target],o=r&&n,i=x[e.id];i&&!o?(x[e.id]=!1,s.removeItem(e.id)):!i&&o&&(x[e.id]=!0,s.addItem("edge",e))}))}else p.includes("node")&&s.getNodes().forEach(function(e){var t=e.getModel();if(null===v||void 0===v||!v("node",t,{min:g,max:m})){var r=+((null===y||void 0===y?void 0:y(t))||t.date);r<g||r>m?s.hideItem(e):s.showItem(e)}}),(this.get("filterEdge")||p.includes("edge"))&&s.getEdges().forEach(function(e){var t=e.getModel();if(null===v||void 0===v||!v("edge",t,{min:o[u].date,max:o[l].date})){var r=+((null===y||void 0===y?void 0:y(t))||t.date);if(r<o[u].date||r>o[l].date)s.hideItem(e);else{var n=e.getSource().isVisible(),i=e.getTarget().isVisible();n&&i&&s.showItem(e)}}})}}else console.warn("è¯·éç½® TimeBar ç»ä»¶çæ°æ®")},t.prototype.initEvent=function(){var e=this.get("graph");e.on("afterchangedata",this.changeData),e.on("afterrender",this.afterrenderListener),e.on(u.VALUE_CHANGE,this.valueChangeListener)},t.prototype.destroy=function(){var t=this.get("graph");t.off("afterchangedata",this.changeData),t.off("afterrender",this.afterrenderListener),t.off(u.VALUE_CHANGE,this.valueChangeListener);var r=this.get("timebar");r&&r.destory&&r.destory(),e.prototype.destroy.call(this);var n=this.get("timeBarContainer");if(n){var o=this.get("container");o||(o=this.get("graph").get("container")),(0,a.isString)(o)&&(o=document.getElementById(o)),o===n&&(o=o.parentElement),o.removeChild(n)}},t}(s.default);t.default=v},51385:function(e,t,r){"use strict";function n(e){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.dataToPath=function(e,t,r,n){void 0===n&&(n=!0);var o=new i.Linear({values:e}),s=new i.Category({values:(0,a.map)(e,function(e,t){return t})}),u=(0,a.map)(e,function(e,n){return[s.scale(n)*t,r-o.scale(e)*r]});return n?c(u):l(u)},t.dataToRectPath=function(e,t,r,n){void 0===n&&(n=5);for(var o=new i.Linear({values:e}),s=new i.Category({values:(0,a.map)(e,function(e,t){return t})}),u=(0,a.map)(e,function(e,n){return[s.scale(n)*t,r-o.scale(e)*r]}),l=[],c=0;c<u.length;c++){var f=u[c],d={x:f[0],y:f[1],y0:r,size:n},y=h(d);l.push.apply(l,y)}return p(l)},t.getAreaLineY=f,t.getLinePath=l,t.getRectPath=p,t.getRectPoints=h,t.getSmoothLinePath=c,t.linePathToAreaPath=function(e,t,r,n){var o=u([],e,!0),i=f(n,r);return o.push(["L",t,i]),o.push(["L",0,i]),o.push(["Z"]),o};var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var r=s(t);if(r&&r.has(e))return r.get(e);var o={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var u=i?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(o,a,u):o[a]=e[a]}o.default=e,r&&r.set(e,o);return o}(r(73920)),i=r(91994),a=r(31834);function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(s=function(e){return e?r:t})(e)}var u=function(e,t,r){if(r||2===arguments.length)for(var n,o=0,i=t.length;o<i;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};function l(e){return function(e){return(0,a.map)(e,function(e,t){return[0===t?"M":"L",e[0],e[1]]})}(e)}function c(e){if(e.length<=2)return l(e);var t=[];(0,a.each)(e,function(e){(0,a.isEqual)(e,t.slice(t.length-2))||t.push(e[0],e[1])});var r=o.catmullRom2Bezier(t,!1),n=(0,a.head)(e),i=n[0],s=n[1];return r.unshift(["M",i,s]),r}function f(e,t){var r=new i.Linear({values:e}),n=Math.max(0,r.min);return t-r.scale(n)*t}function h(e){var t,r,n,o,i=e.x,s=e.y,u=e.y0,l=e.size;(0,a.isArray)(s)?(t=s[0],r=s[1]):(t=u,r=s),(0,a.isArray)(i)?(n=i[0],o=i[1]):(n=i-l/2,o=i+l/2);var c=[{x:n,y:t},{x:n,y:r}];return c.push({x:o,y:r},{x:o,y:t}),c}function p(e,t){void 0===t&&(t=!0);var r=[],n=e[0];r.push(["M",n.x,n.y]);for(var o=1,i=e.length;o<i;o++)r.push(["L",e[o].x,e[o].y]);return t&&(r.push(["L",n.x,n.y]),r.push(["z"])),r}},90832:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(43708),o=r(31834),i=u(r(30653)),a=u(r(86627)),s=r(41520);function u(e){return e&&e.__esModule?e:{default:e}}var l=function(){return(l=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},c=n.ext.transform,f={fill:"#5B8FF9"},h={fill:"#e6e8e9"},p=function(){function e(e){this.frameCount=0,this.fontFamily="Arial, sans-serif";var t=e.graph,r=e.canvas,n=e.group,o=e.width,i=e.height,a=e.padding,s=e.data,u=e.start,l=e.end,c=e.x,p=void 0===c?0:c,d=e.y,y=void 0===d?0:d,v=e.tickLabelFormatter,g=e.selectedTickStyle,m=void 0===g?f:g,b=e.unselectedTickStyle,w=void 0===b?h:b,_=e.tooltipBackgroundColor,x=e.tooltipFomatter,S=e.tickLabelStyle,O=e.controllerCfg,P=void 0===O?{speed:1}:O;this.graph=t,this.group=n,this.sliceGroup=n.addGroup({name:"slice-group"}),this.canvas=r,this.width=o,this.height=i,this.padding=a,this.data=s,this.start=u,this.end=l,this.tickLabelFormatter=v,this.tickLabelStyle=S||{},this.selectedTickStyle=m,this.unselectedTickStyle=w,this.controllerCfg=P,this.currentSpeed=P.speed||1,this.x=p,this.y=y,this.tooltipBackgroundColor=_,this.tooltipFomatter=x,this.fontFamily="undefined"!=typeof window&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif",this.renderSlices(),this.initEvent()}return e.prototype.renderSlices=function(){var e=this,t=this,r=t.width,n=t.height,i=t.padding,s=t.data,u=t.start,f=t.end,h=t.tickLabelFormatter,p=t.selectedTickStyle,d=t.unselectedTickStyle,y=t.tickLabelStyle,v=r-2*i,g=n-(3*i+4+10)-2*i,m=s.length,b=(v-2*(m-1))/m;this.tickWidth=b;var w=this.sliceGroup,_=[],x=[],S=Math.round(m*u),O=Math.round(m*f);this.startTickRectId=S,this.endTickRectId=O;var P=y.rotate;delete y.rotate,s.forEach(function(t,n){var a=n>=S&&n<=O?p:d,s=w.addShape("rect",{attrs:l({x:i+n*(b+2),y:i,width:b,height:g},a),draggable:!0,name:"tick-rect-".concat(n)}),u=w.addShape("rect",{attrs:{x:i+n*b+2*(2*n-1)/2,y:i,width:0===n||n===m-1?b+1:b+2,height:g,fill:"#fff",opacity:0},draggable:!0,name:"pick-rect-".concat(n)});u.toFront();var f,v=s.getBBox(),E=(v.minX+v.maxX)/2;if(_.push({rect:s,pickRect:u,value:t.date,x:E,y:v.minY}),h?(f=h(t),!(0,o.isString)(f)&&f&&(f=t.date)):n%Math.round(m/10)==0&&(f=t.date),f){x.push(f);var k=v.maxY+2*i;w.addShape("line",{attrs:{stroke:"#BFBFBF",x1:E,y1:k,x2:E,y2:k+4},name:"tick-line"});var M=k+4+i,C=w.addShape("text",{attrs:l({fill:"#8c8c8c",stroke:"#fff",lineWidth:1,x:E,y:M,textAlign:"center",text:f,textBaseline:"top",fontSize:10,fontFamily:e.fontFamily||"Arial, sans-serif"},y),capture:!1,name:"tick-label"}),j=C.getBBox();if(j.maxX>r?C.attr("textAlign","right"):j.minX<0&&C.attr("textAlign","left"),(0,o.isNumber)(P)&&10!==x.length){var T=c([1,0,0,0,1,0,0,0,1],[["t",-E,-M],["r",P],["t",E-5,M+2]]);C.attr({textAlign:"left",matrix:T})}1===x.length?C.attr({textAlign:"left"}):10===x.length&&C.attr({textAlign:"right"})}}),this.tickRects=_;var E=this.group;this.currentSpeed=1,this.controllerBtnGroup=new a.default(l({group:E,x:this.x,y:this.y+n+5,width:r,height:40,hideTimeTypeController:!0,speed:this.currentSpeed,fontFamily:this.fontFamily||"Arial, sans-serif"},this.controllerCfg))},e.prototype.initEvent=function(){var e=this,t=this.sliceGroup;t.on("click",function(t){var r=t.target;if("rect"===r.get("type")&&r.get("name")){var n=parseInt(r.get("name").split("-")[2],10);if(!isNaN(n)){var o=e.tickRects,i=e.unselectedTickStyle;o.forEach(function(e){e.rect.attr(i)});var a=e.selectedTickStyle;o[n].rect.attr(a),e.startTickRectId=n,e.endTickRectId=n;var u=n/o.length;e.graph.emit(s.VALUE_CHANGE,{value:[u,u]})}}}),t.on("dragstart",function(t){var r=e.tickRects,n=e.unselectedTickStyle;r.forEach(function(e){e.rect.attr(n)});var o=t.target,i=parseInt(o.get("name").split("-")[2],10),a=e.selectedTickStyle;r[i].rect.attr(a),e.startTickRectId=i;var u=i/r.length;e.graph.emit(s.VALUE_CHANGE,{value:[u,u]}),e.dragging=!0}),t.on("dragover",function(t){if(e.dragging&&"rect"===t.target.get("type")){for(var r=parseInt(t.target.get("name").split("-")[2],10),n=e.startTickRectId,o=e.tickRects,i=e.selectedTickStyle,a=e.unselectedTickStyle,u=0;u<o.length;u++){var l=u>=n&&u<=r?i:a;o[u].rect.attr(l)}var c=o.length;e.endTickRectId=r;var f=n/c,h=r/c;e.graph.emit(s.VALUE_CHANGE,{value:[f,h]})}}),t.on("drop",function(t){if(e.dragging&&(e.dragging=!1,"rect"===t.target.get("type"))){var r=e.startTickRectId,n=parseInt(t.target.get("name").split("-")[2],10);if(!(n<r)){var o=e.selectedTickStyle,i=e.tickRects;i[n].rect.attr(o),e.endTickRectId=n;var a=i.length,u=r/a,l=n/a;e.graph.emit(s.VALUE_CHANGE,{value:[u,l]})}}});var r=this.tooltipBackgroundColor,n=this.tooltipFomatter,o=this.canvas,a=new i.default({container:o.get("container"),backgroundColor:r}),u=this.tickRects;u.forEach(function(e){var t=e.pickRect;t.on("mouseenter",function(e){var t=e.target;if("rect"===t.get("type")){var r=parseInt(t.get("name").split("-")[2],10),i=o.getClientByPoint(u[r].x,u[r].y);a.show({x:u[r].x,y:u[r].y,clientX:i.x,clientY:i.y,text:n?n(u[r].value):u[r].value})}}),t.on("mouseleave",function(e){a.hide()})});var l=this.group;l.on("".concat(s.PLAY_PAUSE_BTN,":click"),function(){e.isPlay=!e.isPlay,e.changePlayStatus()}),l.on("".concat(s.NEXT_STEP_BTN,":click"),function(){e.updateStartEnd(1)}),l.on("".concat(s.PRE_STEP_BTN,":click"),function(){e.updateStartEnd(-1)}),l.on(s.TIMEBAR_CONFIG_CHANGE,function(t){t.type;var r=t.speed;e.currentSpeed=r})},e.prototype.changePlayStatus=function(e){void 0===e&&(e=!0),this.controllerBtnGroup.playButton.update({isPlay:this.isPlay}),this.isPlay?(this.playHandler=this.startPlay(),this.graph.emit(s.TIMELINE_START,null)):this.playHandler&&("undefined"!=typeof window&&window.cancelAnimationFrame(this.playHandler),e&&this.graph.emit(s.TIMELINE_END,null))},e.prototype.startPlay=function(){var e=this;return"undefined"!=typeof window?window.requestAnimationFrame(function(){var t=e.currentSpeed;e.frameCount%(60/t)==0&&(e.frameCount=0,e.updateStartEnd(1)),e.frameCount++,e.isPlay&&(e.playHandler=e.startPlay())}):void 0},e.prototype.updateStartEnd=function(e){var t=this.tickRects,r=t.length,n=this.unselectedTickStyle,o=this.selectedTickStyle,i=this.endTickRectId;if(e>0?this.endTickRectId++:(t[this.endTickRectId].rect.attr(n),this.endTickRectId--),i!==this.startTickRectId)this.endTickRectId<this.startTickRectId&&(this.startTickRectId=this.endTickRectId);else{for(var a=this.startTickRectId;a<=this.endTickRectId-1;a++)t[a].rect.attr(n);this.startTickRectId=this.endTickRectId}if(t[this.endTickRectId]){t[this.endTickRectId].rect.attr(o);var u=this.startTickRectId/r,l=this.endTickRectId/r;this.graph.emit(s.VALUE_CHANGE,{value:[u,l]})}},e.prototype.destory=function(){var e=this.sliceGroup;e.off("click"),e.off("dragstart"),e.off("dragover"),e.off("drop"),this.tickRects.forEach(function(e){var t=e.pickRect;t.off("mouseenter"),t.off("mouseleave")}),this.tickRects.length=0,e.off("".concat(s.PLAY_PAUSE_BTN,":click")),e.off("".concat(s.NEXT_STEP_BTN,":click")),e.off("".concat(s.PRE_STEP_BTN,":click")),e.off(s.TIMEBAR_CONFIG_CHANGE),this.sliceGroup.destroy()},e}();t.default=p},30653:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.TEXT_STYLE=t.BACKGROUND_STYLE=t.ARROW_STYLE=void 0;var n=r(31834),o=r(39269);t.BACKGROUND_STYLE={opacity:.5,fill:"#000"};t.ARROW_STYLE={opacity:.5,fill:"#000",r:5};t.TEXT_STYLE={fill:"#fff",fontSize:12};var i=function(){function e(e){var t=e.x,r=void 0===t?0:t,n=e.y,o=void 0===n?0:n,i=e.container,a=e.text,s=e.padding,u=void 0===s?[4,4,4,4]:s,l=e.className,c=void 0===l?"g6-component-timebar-tooltip":l,f=e.backgroundColor,h=void 0===f?"#000":f,p=e.textColor,d=void 0===p?"#fff":p,y=e.opacity,v=void 0===y?.8:y,g=e.fontSize,m=void 0===g?12:g;this.container=i,this.className=c,this.backgroundColor=h,this.textColor=d,this.x=r,this.y=o,this.text=a,this.padding=u,this.opacity=v,this.fontSize=m,this.render()}return e.prototype.render=function(){var e=this.className,t=(this.x,this.y,this.backgroundColor),r=this.textColor,i=this.text,a=this.padding,s=this.opacity,u=this.fontSize,l=this.container,c=(0,o.createDom)("<div class='".concat(e,"' style=\"position: absolute; width: fit-content; height: fit-content; opacity: ").concat(s,'"></div>'));(0,n.isString)(l)&&(l=document.getElementById(l)),l.appendChild(c),this.parentHeight=l.offsetHeight,this.parentWidth=l.offsetWidth,(0,o.modifyCSS)(c,{visibility:"hidden",top:0,left:0});var f=(0,o.createDom)("\n      <div style='position: absolute; white-space:nowrap; background-color: ".concat(t,"; font-size: ").concat(u,"px; border-radius: 4px; width: fit-content; height: fit-content; color: ").concat(r,"; padding: ").concat(a[0],"px ").concat(a[1],"px ").concat(a[2],"px ").concat(a[3],"px'></div>"));f.innerHTML=i,c.appendChild(f),this.backgroundDOM=f;var h=(0,o.createDom)("<div style='position: absolute; width: 0px; height: 0px; border-left: 5px solid transparent; border-right: 5px solid transparent; border-top: 10px solid ".concat(t,"'></div>"));c.appendChild(h),this.arrowDOM=h,this.container=c},e.prototype.show=function(e){var t=e.text,r=e.x;e.y,e.clientX,e.clientY;this.backgroundDOM.innerHTML=t;var n=this.backgroundDOM.offsetWidth,i=this.backgroundDOM.offsetHeight,a=this.arrowDOM.offsetWidth,s=this.arrowDOM.offsetHeight;(0,o.modifyCSS)(this.container,{top:"".concat(-i-s,"px"),left:"".concat(r,"px"),visibility:"visible"}),(0,o.modifyCSS)(this.backgroundDOM,{marginLeft:"".concat(-n/2,"px")}),(0,o.modifyCSS)(this.arrowDOM,{marginLeft:"".concat(-a/2,"px"),top:"".concat(i,"px")});var u=r-n/2,l=r+n/2;u<0?(0,o.modifyCSS)(this.backgroundDOM,{marginLeft:"".concat(-n/2-u,"px")}):l>this.parentWidth&&(0,o.modifyCSS)(this.backgroundDOM,{marginLeft:"".concat(-n/2-l+this.parentWidth+12,"px")})},e.prototype.hide=function(){(0,o.modifyCSS)(this.container,{top:0,left:0,visibility:"hidden"})},e}();t.default=i},51515:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(31834),o=r(41520),i=function(){return(i=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},a=function(){function e(e){this.config=(0,n.deepMix)({},e),this.init()}return e.prototype.update=function(e){this.config=(0,n.deepMix)({},this.config,e),this.updateElement(),this.renderMarker()},e.prototype.init=function(){this.initElement(),this.renderMarker()},e.prototype.initElement=function(){var e=this.config,t=e.group,r=e.style,n=r.scale,a=void 0===n?1:n,s=r.offsetX,u=void 0===s?0:s,l=r.offsetY,c=void 0===l?0:l,f=this.config.x+u,h=this.config.y+c,p=t.addGroup({name:o.PLAY_PAUSE_BTN});this.startMarkerGroup=p.addGroup({name:o.PLAY_PAUSE_BTN}),this.circle=t.addShape("circle",{attrs:i({x:f,y:h,r:this.config.r*a},r),name:o.PLAY_PAUSE_BTN}),this.startMarker=this.startMarkerGroup.addShape("path",{attrs:{path:this.getStartMarkerPath(f,h,a),fill:r.stroke||"#aaa"},name:"start-marker"}),this.pauseMarkerGroup=p.addGroup({name:o.PLAY_PAUSE_BTN});var d=.25*this.config.r*a,y=.5*this.config.r*Math.sqrt(3)*a;this.pauseLeftMarker=this.pauseMarkerGroup.addShape("rect",{attrs:{x:f-.375*this.config.r*a,y:h-y/2,width:d,height:y,fill:r.stroke||"#aaa",lineWidth:0}}),this.pauseRightMarker=this.pauseMarkerGroup.addShape("rect",{attrs:{x:f+1/8*this.config.r*a,y:h-y/2,width:d,height:y,fill:r.stroke||"#aaa",lineWidth:0}})},e.prototype.updateElement=function(){var e=this.config.style,t=e.scale,r=void 0===t?1:t,n=e.offsetX,o=void 0===n?0:n,i=e.offsetY,a=void 0===i?0:i,s=this.config.x+o,u=this.config.y+a;this.circle.attr("x",s),this.circle.attr("y",u),this.circle.attr("r",this.config.r*r),this.startMarker.attr("path",this.getStartMarkerPath(s,u,r));var l=.25*this.config.r*r,c=.5*this.config.r*Math.sqrt(3)*r;this.pauseLeftMarker.attr("x",s-.375*this.config.r*r),this.pauseLeftMarker.attr("y",u-c/2),this.pauseLeftMarker.attr("width",l),this.pauseLeftMarker.attr("height",c),this.pauseRightMarker.attr("x",s+1/8*this.config.r*r),this.pauseRightMarker.attr("y",u-c/2),this.pauseRightMarker.attr("width",l),this.pauseRightMarker.attr("height",c)},e.prototype.renderMarker=function(){this.config.isPlay?(this.startMarkerGroup.hide(),this.pauseMarkerGroup.show()):(this.startMarkerGroup.show(),this.pauseMarkerGroup.hide())},e.prototype.getStartMarkerPath=function(e,t,r){var n=.5*this.config.r*Math.sqrt(3)*r;return[["M",e-n/Math.sqrt(3)/2,t-n/2],["L",e+n/Math.sqrt(3),t],["L",e-n/Math.sqrt(3)/2,t+n/2]]},e}();t.default=a},83421:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.LINE_STYLE=t.AREA_STYLE=void 0;var n=r(51385),o=function(){return(o=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},i={stroke:"#C5C5C5",strokeOpacity:.85};t.LINE_STYLE=i;var a={fill:"#CACED4",opacity:.85};t.AREA_STYLE=a;var s=function(){function e(e){var t=e.x,r=void 0===t?0:t,n=e.y,o=void 0===n?0:n,s=e.width,u=void 0===s?200:s,l=e.height,c=void 0===l?26:l,f=e.smooth,h=void 0===f||f,p=e.isArea,d=void 0!==p&&p,y=e.data,v=void 0===y?[]:y,g=e.lineStyle,m=e.areaStyle,b=e.group,w=e.interval,_=void 0===w?null:w;this.group=b,this.x=r,this.y=o,this.width=u,this.height=c,this.data=v,this.smooth=h,this.isArea=d,this.lineStyle=Object.assign({},i,g),this.areaStyle=Object.assign({},a,m),this.intervalConfig=_,this.renderLine()}return e.prototype.renderLine=function(){var e=this,t=e.x,r=e.y,i=e.width,a=e.height,s=(e.barWidth,e.data),u=e.smooth,l=e.isArea,c=e.lineStyle,f=e.areaStyle,h=this.group.addGroup({name:"trend-group"});if(s){var p=(0,n.dataToPath)(s,i,a,u);if(h.addShape("path",{attrs:o({path:p},c),name:"trend-line"}),l){var d=(0,n.linePathToAreaPath)(p,i,a,s);h.addShape("path",{attrs:o({path:d},f),name:"trend-area"})}}this.intervalConfig&&h.addShape("path",{attrs:o({path:(0,n.dataToRectPath)(this.intervalConfig.data,i,a,this.intervalConfig.style.barWidth)},this.intervalConfig.style),name:"trend-interval"}),h.move(t,r)},e.prototype.destory=function(){this.group.destroy()},e}();t.default=s},1187:function(e,t,r){"use strict";function n(e){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.TICK_LINE_STYLE=t.TICK_LABEL_STYLE=t.TEXT_STYLE=t.HANDLER_STYLE=t.FOREGROUND_STYLE=t.DEFAULT_HANDLER_WIDTH=t.BACKGROUND_STYLE=void 0;var o=r(31834),i=r(43708),a=f(r(83421)),s=f(r(82010)),u=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var r=c(t);if(r&&r.has(e))return r.get(e);var o={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=i?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(o,a,s):o[a]=e[a]}o.default=e,r&&r.set(e,o);return o}(r(86627)),l=r(41520);function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(c=function(e){return e?r:t})(e)}function f(e){return e&&e.__esModule?e:{default:e}}var h=function(){return(h=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},p=i.ext.transform,d={fill:"#416180",opacity:.05};t.BACKGROUND_STYLE=d;var y={fill:"#416180",opacity:.15,radius:5},v={fill:"#5B8FF9",opacity:.3,cursor:"grab"};t.FOREGROUND_STYLE=v;t.DEFAULT_HANDLER_WIDTH=2;var g={width:2,height:24};t.HANDLER_STYLE=g;var m={textBaseline:"middle",fill:"#000",opacity:.45};t.TEXT_STYLE=m;var b={textAlign:"center",textBaseline:"top",fill:"#607889",opacity:.35};t.TICK_LABEL_STYLE=b;var w={lineWidth:1,stroke:"#ccc"};t.TICK_LINE_STYLE=w;var _=function(){function e(e){var t=this;this.prevX=0,this.onMouseDown=function(e){return function(r){t.currentHandler=e;var n=r.originalEvent;n.stopPropagation(),n.preventDefault(),t.prevX=(0,o.get)(n,"touches.0.pageX",n.pageX);var i=t.canvas.get("container");i.addEventListener("mousemove",t.onMouseMove),i.addEventListener("mouseup",t.onMouseUp),i.addEventListener("mouseleave",t.onMouseUp),i.addEventListener("touchmove",t.onMouseMove),i.addEventListener("touchend",t.onMouseUp),i.addEventListener("touchcancel",t.onMouseUp)}},this.onMouseMove=function(e){e.stopPropagation(),e.preventDefault();var r=(0,o.get)(e,"touches.0.pageX",e.pageX),n=r-t.prevX,i=t.adjustOffsetRange(n/t.width);t.updateStartEnd(i),t.updateUI(),t.prevX=r},this.onMouseUp=function(){t.currentHandler&&(t.currentHandler=void 0);var e=t.canvas.get("container");e&&(e.removeEventListener("mousemove",t.onMouseMove),e.removeEventListener("mouseup",t.onMouseUp),e.removeEventListener("mouseleave",t.onMouseUp),e.removeEventListener("touchmove",t.onMouseMove),e.removeEventListener("touchend",t.onMouseUp),e.removeEventListener("touchcancel",t.onMouseUp))};var r=e.x,n=void 0===r?0:r,i=e.y,a=void 0===i?0:i,s=e.width,l=void 0===s?100:s,c=e.height,f=e.padding,p=void 0===f?10:f,_=e.trendCfg,x=e.controllerCfg,S=void 0===x?{speed:1}:x,O=e.backgroundStyle,P=void 0===O?{}:O,E=e.foregroundStyle,k=void 0===E?{}:E,M=e.handlerStyle,C=void 0===M?{}:M,j=e.textStyle,T=void 0===j?{}:j,A=e.start,I=void 0===A?0:A,R=e.end,L=void 0===R?1:R,N=e.minText,D=void 0===N?"":N,B=e.maxText,F=void 0===B?"":B,G=e.group,z=e.graph,U=e.canvas,V=e.tick,W=void 0===V?{tickLabelStyle:{},tickLineStyle:{},tickLabelFormatter:function(e){return e},ticks:[]}:V,Y=e.type;this.graph=z,this.canvas=U,this.group=G,this.timeBarType=Y,this.x=n,this.y=a,this.width=l,this.height=c,this.padding=p,this.ticks=W.ticks,this.trendCfg=_,this.controllerCfg=S,this.currentSpeed=S.speed||1,this.tickLabelFormatter=W.tickLabelFormatter,"trend"===Y?this.backgroundStyle=h(h({},d),P):"simple"===Y&&(this.backgroundStyle=h(h({},y),P)),this.foregroundStyle=h(h({},v),k),this.handlerStyle=h(h({},g),C),this.textStyle=h(h({},m),T),this.tickLabelStyle=h(h({},b),W.tickLabelStyle),this.tickLineStyle=h(h({},w),W.tickLineStyle),this.currentMode=S.defaultTimeType||u.TIME_TYPE.RANGE,this.start=I,this.end=L,this.minText=D,this.maxText=F,this.fontFamily="undefined"!=typeof window&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif",this.renderSlider()}return e.prototype.update=function(e){var t=e.x,r=e.y,n=e.width,i=e.height,a=e.minText,s=e.maxText,u=e.start,l=e.end;this.start=Math.min(1,Math.max(u,0)),this.end=Math.min(1,Math.max(l,0)),(0,o.assign)(this,{x:t,y:r,width:n,height:i,minText:a,maxText:s}),this.updateUI()},e.prototype.setText=function(e,t){this.minTextShape.attr("text",e),this.maxTextShape.attr("text",t)},e.prototype.renderSlider=function(){var e=this,t=this.width,r=this.height,n=this.timeBarType;if("trend"===n&&(0,o.size)((0,o.get)(this.trendCfg,"data"))){var i=new a.default(h(h({x:this.x,y:this.y,width:t,height:r},this.trendCfg),{group:this.group}));this.trendComponent=i}var l=this.group.addGroup({name:"slider-group"});l.addShape("rect",{attrs:h({x:0,y:0,width:t,height:r},this.backgroundStyle),name:"background"});var c=this.group.addGroup();"trend"===n?(this.minTextShape=c.addShape("text",{attrs:h({x:0,y:r/2+this.y,textAlign:"right",text:this.minText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif",stroke:"#fff",lineWidth:5},this.textStyle),capture:!1,name:"min-text-shape"}),this.maxTextShape=c.addShape("text",{attrs:h({y:r/2+this.y,textAlign:"left",text:this.maxText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif",stroke:"#fff",lineWidth:5},this.textStyle),capture:!1,name:"max-text-shape"})):(this.minTextShape=c.addShape("text",{attrs:h({x:0,y:this.y-10,textAlign:"center",text:this.minText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif",stroke:"#fff",lineWidth:5},this.textStyle),capture:!1,name:"min-text-shape"}),this.maxTextShape=c.addShape("text",{attrs:h({y:this.y-10,textAlign:"center",text:this.maxText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif",stroke:"#fff",lineWidth:5},this.textStyle),capture:!1,name:"max-text-shape"})),this.foregroundShape=this.group.addGroup().addShape("rect",{attrs:h({x:0,y:this.y,height:r},this.foregroundStyle),name:"foreground-shape"}),this.foregroundShape.on("mousedown",function(e){e.target.attr("cursor","grabbing")}),this.foregroundShape.on("mouseup",function(t){t.target.attr("cursor",e.foregroundStyle.cursor||"grab")});var f=(0,o.get)(this.handlerStyle,"width",2),d=(0,o.get)(this.handlerStyle,"height",24),y=this.group.addGroup({name:"minHandlerShape"});this.minHandlerShape=new s.default({name:"minHandlerShape",group:y,type:n,x:this.x,y:this.y,width:f,height:d,style:this.handlerStyle});var v=this.group.addGroup({name:"maxHandlerShape"});this.maxHandlerShape=new s.default({name:"maxHandlerShape",group:v,type:n,x:this.x,y:this.y,width:f,height:d,style:this.handlerStyle});var g=this.ticks,m=t/(g.length-1);this.tickPosList=[],this.textList&&this.textList.length&&this.textList.forEach(function(e){e.destroy()});var b=-1/0,w=this.tickLabelStyle.rotate;delete this.tickLabelStyle.rotate,this.textList=g.map(function(t,n){var i;e.tickPosList.push(e.x+n*m),e.tickLabelFormatter?(i=e.tickLabelFormatter(t),!(0,o.isString)(i)&&i&&(i=t.date)):i=t.date;var a=e.x+n*m,s=e.y+r+5,u=e.group.addShape("text",{attrs:h({x:a,y:s,text:i,fontFamily:e.fontFamily||"Arial, sans-serif"},e.tickLabelStyle),name:"tick-label"});if((0,o.isNumber)(w)&&n!==g.length-1){var l=p([1,0,0,0,1,0,0,0,1],[["t",-a,-s],["r",w],["t",a-5,s+2]]);u.attr({textAlign:"left",matrix:l})}0===n?u.attr({textAlign:"left"}):n!==g.length-1&&u.attr({textAlign:"right"});var c=e.group.addShape("line",{attrs:h({x1:e.x+n*m,y1:e.y+r+2,x2:e.x+n*m,y2:e.y+r+6},e.tickLineStyle),name:"tick-line"});c.toBack();var f=u.getBBox();return f.minX>b?(u.show(),c.show(),b=f.minX+f.width+10):(u.hide(),c.hide()),u}),this.controllerBtnGroup=new u.default(h({group:this.group,x:this.x,y:this.y+r+25,width:t,height:35},this.controllerCfg)),this.updateStartEnd(0),this.updateUI(),l.move(this.x,this.y),this.bindEvents(),this.currentMode===u.TIME_TYPE.SINGLE&&(this.minHandlerShape.hide(),this.foregroundShape.hide(),this.minTextShape.hide())},e.prototype.bindEvents=function(){var e=this,t=this.group.find(function(e){return"minHandlerShape"===e.get("name")});t&&(t.on("minHandlerShape-handler:mousedown",this.onMouseDown(this.minHandlerShape)),t.on("minHandlerShape-handler:touchstart",this.onMouseDown(this.minHandlerShape)));var r=this.group.find(function(e){return"maxHandlerShape"===e.get("name")});r&&(r.on("maxHandlerShape-handler:mousedown",this.onMouseDown(this.maxHandlerShape)),r.on("maxHandlerShape-handler:touchstart",this.onMouseDown(this.maxHandlerShape))),this.foregroundShape.on("mousedown",this.onMouseDown(this.foregroundShape)),this.foregroundShape.on("touchstart",this.onMouseDown(this.foregroundShape)),this.group.on("".concat(l.PLAY_PAUSE_BTN,":click"),function(){e.isPlay=!e.isPlay,e.currentHandler=e.maxHandlerShape,e.changePlayStatus()}),this.group.on("".concat(l.NEXT_STEP_BTN,":click"),function(){e.currentHandler=e.maxHandlerShape,e.updateStartEnd(.01),e.updateUI()}),this.group.on("".concat(l.PRE_STEP_BTN,":click"),function(){e.currentHandler=e.maxHandlerShape,e.updateStartEnd(-.01),e.updateUI()}),this.group.on(l.TIMEBAR_CONFIG_CHANGE,function(t){var r=t.type,n=t.speed;e.currentSpeed=n,e.currentMode=r,r===u.TIME_TYPE.SINGLE?(e.minHandlerShape.hide(),e.foregroundShape.hide(),e.minTextShape.hide()):r===u.TIME_TYPE.RANGE&&(e.minHandlerShape.show(),e.foregroundShape.show(),e.minTextShape.show())})},e.prototype.adjustTickIndex=function(e){for(var t=0;t<this.tickPosList.length-1;t++)if(this.tickPosList[t]<=e&&e<=this.tickPosList[t+1])return Math.abs(this.tickPosList[t]-e)<Math.abs(e-this.tickPosList[t+1])?t:t+1;return 0},e.prototype.adjustOffsetRange=function(e){switch(this.currentHandler){case this.minHandlerShape:var t=0-this.start,r=1-this.start;return Math.min(r,Math.max(t,e));case this.maxHandlerShape:t=0-this.end,r=1-this.end;return Math.min(r,Math.max(t,e));case this.foregroundShape:t=0-this.start,r=1-this.end;return Math.min(r,Math.max(t,e));default:return 0}},e.prototype.updateStartEnd=function(e){var t=this.ticks[this.adjustTickIndex(this.start*this.width)],r=this.ticks[this.adjustTickIndex(this.end*this.width)];if(!this.currentHandler)return this.minText=this.tickLabelFormatter?this.tickLabelFormatter(t):null===t||void 0===t?void 0:t.date,void(this.maxText=this.tickLabelFormatter?this.tickLabelFormatter(r):null===r||void 0===r?void 0:r.date);switch(this.currentHandler){case this.minHandlerShape:this.maxText=this.maxTextShape.attr("text"),this.start+=e,this.minText=this.tickLabelFormatter?this.tickLabelFormatter(t):t.date;break;case this.maxHandlerShape:this.minText=this.minTextShape.attr("text"),this.end+=e,this.maxText=this.tickLabelFormatter?this.tickLabelFormatter(r):r.date;break;case this.foregroundShape:this.start+=e,this.end+=e,this.minText=this.tickLabelFormatter?this.tickLabelFormatter(t):t.date,this.maxText=this.tickLabelFormatter?this.tickLabelFormatter(r):r.date}},e.prototype.updateUI=function(){var e=this;this.start<0&&(this.start=0),this.start>1&&(this.start=1),this.end>1&&(this.end=1),this.end<0&&(this.end=0);var t=this.x+this.start*this.width,r=this.x+this.end*this.width;this.foregroundShape.attr("x",t),this.foregroundShape.attr("width",r-t);var n=(0,o.get)(this.handlerStyle,"width",2);this.setText(this.minText,this.maxText);var i=this.dodgeText([t,r]),a=i[0],s=i[1];this.minHandlerShape.setX(t-n/2),(0,o.each)(a,function(t,r){return e.minTextShape.attr(r,t)}),this.maxHandlerShape.setX(r-n/2),(0,o.each)(s,function(t,r){return e.maxTextShape.attr(r,t)}),this.currentMode===u.TIME_TYPE.RANGE?this.graph.emit(l.VALUE_CHANGE,{value:[this.start,this.end].sort()}):this.currentMode===u.TIME_TYPE.SINGLE&&this.graph.emit(l.VALUE_CHANGE,{value:[this.end,this.end]})},e.prototype.dodgeText=function(e){var t,r,n=(0,o.get)(this.handlerStyle,"width",2),i=this.minTextShape,a=this.maxTextShape,s=e[0],u=e[1],l=!1;s>u&&(s=(t=[u,s])[0],u=t[1],i=(r=[a,i])[0],a=r[1],l=!0);var c=i.getBBox(),f=a.getBBox(),h=null,p=null;return"trend"===this.timeBarType?(h=s-c.width<this.x+2?{x:s+n/2+2,textAlign:"left"}:{x:s-n/2-2,textAlign:"right"},p=u+f.width>this.x+this.width?{x:u-n/2-2,textAlign:"right"}:{x:u+n/2+2,textAlign:"left"}):"simple"===this.timeBarType&&(h=i.attr("x")>c.width?{x:s,textAlign:"center"}:{x:s,textAlign:"left"},p=a.attr("x")>this.width-f.width?{x:u,textAlign:"right"}:{x:u,textAlign:"center"}),l?[p,h]:[h,p]},e.prototype.startPlay=function(){var e=this;return"undefined"!=typeof window?window.requestAnimationFrame(function(){var t=e,r=t.ticks,n=t.width,o=e.currentSpeed,i=n/r.length/(1e3*(10-o)/60),a=e.adjustOffsetRange(i/e.width);e.updateStartEnd(a),e.updateUI(),e.isPlay&&(e.playHandler=e.startPlay())}):void 0},e.prototype.changePlayStatus=function(e){void 0===e&&(e=!0),this.controllerBtnGroup.playButton.update({isPlay:this.isPlay}),this.isPlay?(this.playHandler=this.startPlay(),this.graph.emit(l.TIMELINE_START,null)):this.playHandler&&("undefined"!=typeof window&&window.cancelAnimationFrame(this.playHandler),e&&this.graph.emit(l.TIMELINE_END,null))},e.prototype.destory=function(){this.graph.off(l.VALUE_CHANGE,function(){});var e=this.group,t=e.find(function(e){return"minHandlerShape"===e.get("name")});t&&(t.off("minHandlerShape-handler:mousedown"),t.off("minHandlerShape-handler:touchstart"),t.destroy());var r=e.find(function(e){return"maxHandlerShape"===e.get("name")});r&&(r.off("maxHandlerShape-handler:mousedown"),r.off("maxHandlerShape-handler:touchstart"),r.destroy()),this.foregroundShape.off("mousedown"),this.foregroundShape.off("touchstart"),this.foregroundShape.destroy(),e.off("".concat(l.PLAY_PAUSE_BTN,":click")),e.off("".concat(l.NEXT_STEP_BTN,":click")),e.off("".concat(l.PRE_STEP_BTN,":click")),e.off(l.TIMEBAR_CONFIG_CHANGE),e.destroy(),this.trendComponent&&this.trendComponent.destory()},e}();t.default=_},42875:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(39269),o=r(31834),i=s(r(78146)),a=s(r(28813));function s(e){return e&&e.__esModule?e:{default:e}}var u,l=(u=function(e,t){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}u(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});"undefined"!=typeof document&&(0,a.default)("\n  .g6-component-toolbar {\n    position: absolute;\n    list-style-type: none;\n    padding: 6px;\n    left: 0px;\n    top: 0px;\n    background-color: rgba(255, 255, 255, 0.9);\n    border: 1px solid #e2e2e2;\n    border-radius: 4px;\n    font-size: 12px;\n    color: #545454;\n    margin: 0;\n  }\n  .g6-component-toolbar li {\n    float: left;\n    text-align: center;\n    width: 35px;\n    height: 24px;\n    cursor: pointer;\n\t\tlist-style-type:none;\n    list-style: none;\n    margin-left: 0px;\n  }\n  .g6-component-toolbar li .icon {\n    opacity: 0.7;\n  }\n  .g6-component-toolbar li .icon:hover {\n    opacity: 1;\n  }\n");var c=function(e){function t(t){return e.call(this,t)||this}return l(t,e),t.prototype.getDefaultCfgs=function(){return{handleClick:void 0,getContent:function(e){return'\n          <ul class=\'g6-component-toolbar\'>\n            <li code=\'redo\'>\n              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">\n                <path d="M256 682.666667c0-102.741333 66.730667-213.333333 213.333333-213.333334 107.008 0 190.762667 56.576 230.570667 125.354667L611.968 682.666667H853.333333v-241.365334l-91.562666 91.562667C704.768 448.469333 601.130667 384 469.333333 384c-196.096 0-298.666667 150.229333-298.666666 298.666667h85.333333z" fill="" p-id="2041"></path>\n              </svg>\n            </li>\n            <li code=\'undo\'>\n              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">\n                <path d="M170.666667 682.666667h241.365333l-87.936-87.978667C363.904 525.909333 447.658667 469.333333 554.666667 469.333333c146.602667 0 213.333333 110.592 213.333333 213.333334h85.333333c0-148.437333-102.570667-298.666667-298.666666-298.666667-131.797333 0-235.392 64.469333-292.48 148.821333L170.666667 441.301333V682.666667z" fill="" p-id="2764"></path>\n              </svg>\n            </li>\n            <li  code=\'zoomOut\'>\n              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">\n                <path d="M658.432 428.736a33.216 33.216 0 0 1-33.152 33.152H525.824v99.456a33.216 33.216 0 0 1-66.304 0V461.888H360.064a33.152 33.152 0 0 1 0-66.304H459.52V296.128a33.152 33.152 0 0 1 66.304 0V395.52H625.28c18.24 0 33.152 14.848 33.152 33.152z m299.776 521.792a43.328 43.328 0 0 1-60.864-6.912l-189.248-220.992a362.368 362.368 0 0 1-215.36 70.848 364.8 364.8 0 1 1 364.8-364.736 363.072 363.072 0 0 1-86.912 235.968l192.384 224.64a43.392 43.392 0 0 1-4.8 61.184z m-465.536-223.36a298.816 298.816 0 0 0 298.432-298.432 298.816 298.816 0 0 0-298.432-298.432A298.816 298.816 0 0 0 194.24 428.8a298.816 298.816 0 0 0 298.432 298.432z"></path>\n              </svg>\n            </li>\n            <li code=\'zoomIn\'>\n              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">\n                <path d="M639.936 416a32 32 0 0 1-32 32h-256a32 32 0 0 1 0-64h256a32 32 0 0 1 32 32z m289.28 503.552a41.792 41.792 0 0 1-58.752-6.656l-182.656-213.248A349.76 349.76 0 0 1 480 768 352 352 0 1 1 832 416a350.4 350.4 0 0 1-83.84 227.712l185.664 216.768a41.856 41.856 0 0 1-4.608 59.072zM479.936 704c158.784 0 288-129.216 288-288S638.72 128 479.936 128a288.32 288.32 0 0 0-288 288c0 158.784 129.216 288 288 288z" p-id="3853"></path>\n              </svg>\n            </li>\n            <li code=\'realZoom\'>\n              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="20" height="24">\n                <path d="M384 320v384H320V320h64z m256 0v384H576V320h64zM512 576v64H448V576h64z m0-192v64H448V384h64z m355.968 576H92.032A28.16 28.16 0 0 1 64 931.968V28.032C64 12.608 76.608 0 95.168 0h610.368L896 192v739.968a28.16 28.16 0 0 1-28.032 28.032zM704 64v128h128l-128-128z m128 192h-190.464V64H128v832h704V256z"></path>\n              </svg>\n            </li>\n            <li code=\'autoZoom\'>\n              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="20" height="24">\n                <path d="M684.288 305.28l0.128-0.64-0.128-0.64V99.712c0-19.84 15.552-35.904 34.496-35.712a35.072 35.072 0 0 1 34.56 35.776v171.008h170.944c19.648 0 35.84 15.488 35.712 34.432a35.072 35.072 0 0 1-35.84 34.496h-204.16l-0.64-0.128a32.768 32.768 0 0 1-20.864-7.552c-1.344-1.024-2.816-1.664-3.968-2.816-0.384-0.32-0.512-0.768-0.832-1.088a33.472 33.472 0 0 1-9.408-22.848zM305.28 64a35.072 35.072 0 0 0-34.56 35.776v171.008H99.776A35.072 35.072 0 0 0 64 305.216c0 18.944 15.872 34.496 35.84 34.496h204.16l0.64-0.128a32.896 32.896 0 0 0 20.864-7.552c1.344-1.024 2.816-1.664 3.904-2.816 0.384-0.32 0.512-0.768 0.768-1.088a33.024 33.024 0 0 0 9.536-22.848l-0.128-0.64 0.128-0.704V99.712A35.008 35.008 0 0 0 305.216 64z m618.944 620.288h-204.16l-0.64 0.128-0.512-0.128c-7.808 0-14.72 3.2-20.48 7.68-1.28 1.024-2.752 1.664-3.84 2.752-0.384 0.32-0.512 0.768-0.832 1.088a33.664 33.664 0 0 0-9.408 22.912l0.128 0.64-0.128 0.704v204.288c0 19.712 15.552 35.904 34.496 35.712a35.072 35.072 0 0 0 34.56-35.776V753.28h170.944c19.648 0 35.84-15.488 35.712-34.432a35.072 35.072 0 0 0-35.84-34.496z m-593.92 11.52c-0.256-0.32-0.384-0.768-0.768-1.088-1.088-1.088-2.56-1.728-3.84-2.688a33.088 33.088 0 0 0-20.48-7.68l-0.512 0.064-0.64-0.128H99.84a35.072 35.072 0 0 0-35.84 34.496 35.072 35.072 0 0 0 35.712 34.432H270.72v171.008c0 19.84 15.552 35.84 34.56 35.776a35.008 35.008 0 0 0 34.432-35.712V720l-0.128-0.64 0.128-0.704a33.344 33.344 0 0 0-9.472-22.848zM512 374.144a137.92 137.92 0 1 0 0.128 275.84A137.92 137.92 0 0 0 512 374.08z"></path>\n              </svg>\n            </li>\n          </ul>\n        '},zoomSensitivity:2}},t.prototype.init=function(){var e=this,t=this.get("graph"),r=this.get("getContent")(t),i=r;(0,o.isString)(r)&&(i=(0,n.createDom)(r));var a=this.get("className");i.setAttribute("class",a||"g6-component-toolbar");var s=this.get("container");s||(s=this.get("graph").get("container")),(0,o.isString)(s)&&(s=document.getElementById(s)),s.appendChild(i),this.set("toolBar",i);var u=this.get("handleClick");i.addEventListener("click",function(r){var n=function(e){if(!e)return[];if(e.composedPath)return e.composedPath();for(var t=[],r=e.target;r;){if(t.push(r),"HTML"===r.tagName)return t.push(document,window),t;r=r.parentElement}return t}(r).filter(function(e){return"LI"===e.nodeName});if(0!==n.length){var o=n[0].getAttribute("code");o&&(u?u(o,t):e.handleDefaultOperator(o))}});var l=this.get("position");l&&(0,n.modifyCSS)(i,{top:"".concat(l.y,"px"),left:"".concat(l.x,"px")}),this.bindUndoRedo()},t.prototype.bindUndoRedo=function(){var e=this.get("graph"),t=document.querySelector('.g6-component-toolbar li[code="undo"]'),r=document.querySelector('.g6-component-toolbar li[code="undo"] svg'),n=document.querySelector('.g6-component-toolbar li[code="redo"]'),o=document.querySelector('.g6-component-toolbar li[code="redo"] svg');t&&r&&n&&o&&(t.setAttribute("style","cursor: not-allowed"),r.setAttribute("style","opacity: 0.4"),n.setAttribute("style","cursor: not-allowed"),o.setAttribute("style","opacity: 0.4"),e.on("stackchange",function(e){var i=e.undoStack,a=e.redoStack,s=i.length,u=a.length;0===s?(t.setAttribute("style","cursor: not-allowed"),r.setAttribute("style","opacity: 0.4")):(t.removeAttribute("style"),r.removeAttribute("style")),0===u?(n.setAttribute("style","cursor: not-allowed"),o.setAttribute("style","opacity: 0.4")):(n.removeAttribute("style"),o.removeAttribute("style"))}))},t.prototype.undo=function(){var e=this.get("graph"),t=e.getUndoStack();if(t&&0!==t.length){var r=t.pop();if(r){var n=r.action;e.pushStack(n,(0,o.clone)(r.data),"redo");var i=r.data.before;if("add"===n&&(i=r.data.after),!i)return;switch(n){case"visible":Object.keys(i).forEach(function(t){var r=i[t];r&&r.forEach(function(t){var r=e.findById(t.id);t.visible?e.showItem(r,!1):e.hideItem(r,!1)})});break;case"render":case"update":Object.keys(i).forEach(function(t){var r=i[t];r&&r.forEach(function(t){var r=e.findById(t.id);delete t.id,e.updateItem(r,t,!1),"combo"===r.getType()&&e.updateCombo(r)})});break;case"changedata":e.changeData(i,!1);break;case"delete":Object.keys(i).forEach(function(t){var r=i[t];r&&r.forEach(function(t){var r=t.itemType;delete t.itemType,e.addItem(r,t,!1)})});break;case"add":Object.keys(i).forEach(function(t){var r=i[t];r&&r.forEach(function(t){e.removeItem(t.id,!1)})});break;case"updateComboTree":Object.keys(i).forEach(function(t){var r=i[t];r&&r.forEach(function(t){e.updateComboTree(t.id,t.parentId,!1)})});break;case"createCombo":var a=r.data.after.combos,s=a[a.length-1];Object.keys(i).forEach(function(t){var r=i[t];r&&r.forEach(function(t){e.updateComboTree(t.id,t.parentId,!1)})}),e.removeItem(s.id,!1);break;case"uncombo":var u=i.combos[i.combos.length-1],l=i.nodes.concat(i.combos).map(function(e){return e.id}).filter(function(e){return e!==u.id});e.createCombo(u,l,!1);break;case"layout":e.updateLayout(i,void 0,void 0,!1)}}}},t.prototype.redo=function(){var e=this.get("graph"),t=e.getRedoStack();if(t&&0!==t.length){var r=t.pop();if(r){var n=r.action,i=r.data.after;if(e.pushStack(n,(0,o.clone)(r.data)),"delete"===n&&(i=r.data.before),!i)return;switch(n){case"visible":Object.keys(i).forEach(function(t){var r=i[t];r&&r.forEach(function(t){var r=e.findById(t.id);t.visible?e.showItem(r,!1):e.hideItem(r,!1)})});break;case"render":case"update":Object.keys(i).forEach(function(t){var r=i[t];r&&r.forEach(function(t){var r=e.findById(t.id);delete t.id,e.updateItem(r,t,!1),"combo"===r.getType()&&e.updateCombo(r)})});break;case"changedata":e.changeData(i,!1);break;case"delete":i.edges&&i.edges.forEach(function(t){e.removeItem(t.id,!1)}),i.nodes&&i.nodes.forEach(function(t){e.removeItem(t.id,!1)}),i.combos&&i.combos.forEach(function(t){e.removeItem(t.id,!1)});break;case"add":Object.keys(i).forEach(function(t){var r=i[t];r&&r.forEach(function(t){var r=t.itemType;delete t.itemType,e.addItem(r,t,!1)})});break;case"updateComboTree":Object.keys(i).forEach(function(t){var r=i[t];r&&r.forEach(function(t){e.updateComboTree(t.id,t.parentId,!1)})});break;case"createCombo":var a=i.combos[i.combos.length-1];e.createCombo(a,a.children.map(function(e){return e.id}),!1);break;case"uncombo":var s=r.data.before.combos,u=s[s.length-1];e.uncombo(u.id,!1);break;case"layout":e.updateLayout(i,void 0,void 0,!1)}}}},t.prototype.zoomOut=function(){var e=this.get("graph"),t=e.getZoom(),r=1/(1-.05*this.get("zoomSensitivity"));r*t>(this.get("maxZoom")||e.get("maxZoom"))||e.zoomTo(t*r)},t.prototype.zoomIn=function(){var e=this.get("graph"),t=e.getZoom(),r=1-.05*this.get("zoomSensitivity");r*t<(this.get("minZoom")||e.get("minZoom"))||e.zoomTo(t*r)},t.prototype.realZoom=function(){this.get("graph").zoomTo(1)},t.prototype.autoZoom=function(){this.get("graph").fitView([20,20])},t.prototype.handleDefaultOperator=function(e){switch(e){case"redo":this.redo();break;case"undo":this.undo();break;case"zoomOut":this.zoomOut();break;case"zoomIn":this.zoomIn();break;case"realZoom":this.realZoom();break;case"autoZoom":this.autoZoom()}},t.prototype.destroy=function(){var e=this.get("toolBar");if(e){var t=this.get("container");t||(t=this.get("graph").get("container")),(0,o.isString)(t)&&(t=document.getElementById(t)),t.removeChild(e)}var r=this.get("handleClick");r&&e.removeEventListener("click",r)},t}(i.default);t.default=c},61912:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(39269),o=r(31834),i=s(r(28813)),a=s(r(78146));function s(e){return e&&e.__esModule?e:{default:e}}var u,l=(u=function(e,t){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}u(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});"undefined"!=typeof document&&(0,i.default)("\n  .g6-component-tooltip {\n    border: 1px solid #e2e2e2;\n    border-radius: 4px;\n    font-size: 12px;\n    color: #545454;\n    background-color: rgba(255, 255, 255, 0.9);\n    padding: 10px 8px;\n    box-shadow: rgb(174, 174, 174) 0px 0px 10px;\n  }\n  .tooltip-type {\n    padding: 0;\n    margin: 0;\n  }\n  .tooltip-id {\n    color: #531dab;\n  }\n");var c=function(e){function t(t){return e.call(this,t)||this}return l(t,e),t.prototype.getDefaultCfgs=function(){return{offsetX:6,offsetY:6,getContent:function(e){return"\n          <h4 class='tooltip-type'>ç±»åï¼".concat(e.item.getType(),"</h4>\n          <span class='tooltip-id'>IDï¼").concat(e.item.getID(),"</span>\n        ")},shouldBegin:function(e){return!0},itemTypes:["node","edge","combo"],trigger:"mouseenter",fixToNode:void 0}},t.prototype.getEvents=function(){return"click"===this.get("trigger")?{"node:click":"onClick","edge:click":"onClick","combo:click":"onClick","canvas:click":"onMouseLeave",afterremoveitem:"onMouseLeave",contextmenu:"onMouseLeave",drag:"onMouseLeave"}:{"node:mouseenter":"onMouseEnter","node:mouseleave":"onMouseLeave","node:mousemove":"onMouseMove","edge:mouseenter":"onMouseEnter","edge:mouseleave":"onMouseLeave","edge:mousemove":"onMouseMove","combo:mouseenter":"onMouseEnter","combo:mouseleave":"onMouseLeave","combo:mousemove":"onMouseMove",afterremoveitem:"onMouseLeave",contextmenu:"onMouseLeave","node:drag":"onMouseLeave"}},t.prototype.init=function(){var e=this,t=e.get("className")||"g6-component-tooltip",r=(0,n.createDom)("<div class='".concat(t,"'></div>")),i=e.get("container");i||(i=e.get("graph").get("container")),(0,o.isString)(i)&&(i=document.getElementById(i)),(0,n.modifyCSS)(r,{position:"absolute",visibility:"hidden",display:"none"}),i.appendChild(r),"click"!==e.get("trigger")&&(r.addEventListener("mouseenter",function(e){(0,n.modifyCSS)(r,{visibility:"visible",display:"unset"})}),r.addEventListener("mouseleave",function(t){e.hideTooltip()})),e.set("tooltip",r)},t.prototype.onClick=function(e){var t=this.get("itemTypes");if(!e.item||!e.item.getType||-1!==t.indexOf(e.item.getType())){var r=e.item,n=this.get("graph");this.currentTarget===r?(this.currentTarget=null,this.hideTooltip(),n.emit("tooltipchange",{item:e.item,action:"hide"})):(this.currentTarget=r,this.showTooltip(e),n.emit("tooltipchange",{item:e.item,action:"show"}))}},t.prototype.onMouseEnter=function(e){var t=this.get("itemTypes");if(!e.item||!e.item.getType||-1!==t.indexOf(e.item.getType())){var r=e.item,n=this.get("graph");this.currentTarget=r,this.showTooltip(e),n.emit("tooltipchange",{item:e.item,action:"show"})}},t.prototype.onMouseMove=function(e){var t=this.get("itemTypes");e.item&&e.item.getType&&-1===t.indexOf(e.item.getType())||this.currentTarget&&e.item===this.currentTarget&&this.showTooltip(e)},t.prototype.onMouseLeave=function(){this.hideTooltip(),this.get("graph").emit("tooltipchange",{item:this.currentTarget,action:"hide"}),this.currentTarget=null},t.prototype.clearContainer=function(){var e=this.get("tooltip");e&&(e.innerHTML="")},t.prototype.showTooltip=function(e){if(e.item){var t=this.get("itemTypes");if(!e.item.getType||-1!==t.indexOf(e.item.getType())){var r=this.get("tooltip"),n=this.get("getContent")(e);(0,o.isString)(n)?r.innerHTML=n:(this.clearContainer(),r.appendChild(n)),this.updatePosition(e)}}},t.prototype.hideTooltip=function(){var e=this.get("tooltip");e&&(0,n.modifyCSS)(e,{visibility:"hidden",display:"none"})},t.prototype.updatePosition=function(e){var t=this.get("shouldBegin"),r=this.get("tooltip");if(t(e)){var i=this.get("graph"),a=i.get("width"),s=i.get("height"),u=this.get("offsetX")||0,l=this.get("offsetY")||0,c=i.getPointByClient(e.clientX,e.clientY),f=this.get("fixToNode"),h=e.item;if(h.getType&&"node"===h.getType()&&f&&(0,o.isArray)(f)&&f.length>=2){var p=h.getBBox();c={x:p.minX+p.width*f[0],y:p.minY+p.height*f[1]}}var d=i.getCanvasByPoint(c.x,c.y),y=d.x,v=d.y,g=i.getContainer(),m={x:y+g.offsetLeft+u,y:v+g.offsetTop+l};(0,n.modifyCSS)(r,{visibility:"visible",display:"unset"});var b=r.getBoundingClientRect();y+b.width+u>a&&(m.x-=b.width+u),v+b.height+l>s&&(m.y-=b.height+l,m.y<0&&(m.y=0)),(0,n.modifyCSS)(r,{left:"".concat(m.x,"px"),top:"".concat(m.y,"px")})}else(0,n.modifyCSS)(r,{visibility:"hidden",display:"none"})},t.prototype.hide=function(){this.onMouseLeave()},t.prototype.destroy=function(){var e=this.get("tooltip");if(e){var t=this.get("container");t||(t=this.get("graph").get("container")),(0,o.isString)(t)&&(t=document.getElementById(t)),t.removeChild(e)}},t}(a.default);t.default=c},27996:function(e,t,r){"use strict";function n(e){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0});var o={version:!0};t.version=t.default=void 0;var i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var r=a(t);if(r&&r.has(e))return r.get(e);var o={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var u=i?Object.getOwnPropertyDescriptor(e,s):null;u&&(u.get||u.set)?Object.defineProperty(o,s,u):o[s]=e[s]}o.default=e,r&&r.set(e,o);return o}(r(86431));function a(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(a=function(e){return e?r:t})(e)}Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(o,e)||e in t&&t[e]===i[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}}))}),i.default.version="4.8.22";var s=i.default;t.default=s;t.version="4.8.22"},43518:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GraphEnum=void 0,function(e){e.DEFAULT_EDGE_NAME="\0",e.GRAPH_NODE="\0",e.EDGE_KEY_DELIM=""}(t.GraphEnum||(t.GraphEnum={}))},24328:function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.GraphWithEvent=void 0;var a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.eventPool={},t}return o(t,e),t.prototype.appendEvent=function(e,t){this.eventPool[e]||(this.eventPool[e]=[]),this.eventPool[e].push(t)},t.prototype.removeEvent=function(e,t){if(this.eventPool[e]){var r=this.eventPool[e].indexOf(t);r>-1&&this.eventPool[e].splice(r,1)}},t.prototype.emitEvent=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.eventPool[e]&&this.eventPool[e].forEach(function(e){e.apply(void 0,t)})},t.prototype.setNode=function(t,r){return e.prototype.setNode.call(this,t,r),this.emitEvent("nodeAdd",t,r),this},t.prototype.removeNode=function(t){return e.prototype.removeNode.call(this,t),this.emitEvent("nodeRemove",t),this},t.prototype.setEdge=function(t,r,n,o){return e.prototype.setEdge.call(this,t,r,n,o),this.emitEvent("edgeAdd",t,r,n,o),this},t.prototype.removeEdge=function(t,r,n){return e.prototype.removeEdge.call(this,t,r,n),this.emitEvent("edgeRemove",t,r,n),this},t}(i(r(12325)).default);t.GraphWithEvent=a},12325:function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=r(1875),i=r(43518),a=r(1875),s=r(59264),u={compound:!1,multigraph:!1,directed:!0},l=function(){function e(t){var r=this;void 0===t&&(t={}),this.directed=!0,this.multigraph=!1,this.compound=!1,this.GRAPH_NODE=i.GraphEnum.GRAPH_NODE,this.nodeCountNum=0,this.edgeCountNum=0,this.defaultNodeLabelFn=function(){},this.defaultEdgeLabelFn=function(){},this.nodesLabelMap=new Map,this.inEdgesMap=new Map,this.outEdgesMap=new Map,this.predecessorsMap=new Map,this.successorsMap=new Map,this.edgesMap=new Map,this.edgesLabelsMap=new Map,this.isDirected=function(){return r.directed},this.isMultigraph=function(){return r.multigraph},this.isCompound=function(){return r.compound},this.setGraph=function(e){return r.label=e,r},this.graph=function(){return r.label},this.setDefaultNodeLabel=function(e){return(0,o.isFunction)(e)?r.defaultNodeLabelFn=e:r.defaultNodeLabelFn=function(){return e},r},this.nodeCount=function(){return r.nodeCountNum},this.node=function(e){return r.nodesLabelMap.get(e)},this.nodes=function(){return Array.from(r.nodesLabelMap.keys())},this.sources=function(){return r.nodes().filter(function(e){var t;return!(null===(t=r.inEdgesMap.get(e))||void 0===t?void 0:t.size)})},this.sinks=function(){return r.nodes().filter(function(e){var t;return!(null===(t=r.outEdgesMap.get(e))||void 0===t?void 0:t.size)})},this.setNodes=function(e,t){return e.map(function(e){return r.setNode(e,t)}),r},this.hasNode=function(e){return r.nodesLabelMap.has(e)},this.checkCompound=function(){if(!r.isCompound())throw new Error("Cannot construct parent-children relations in a non-compound graph")},this.parent=function(e){var t;if(r.isCompound()){var n=null===(t=r.parentMap)||void 0===t?void 0:t.get(e);if(n!==r.GRAPH_NODE)return n}},this.removeFromParentsChildList=function(e){var t=r.parentMap.get(e);r.childrenMap.get(t).delete(e)},this.setParent=function(e,t){var n,o;r.checkCompound();for(var i=void 0===t?r.GRAPH_NODE:t,a=r.parent(i);a;){if(e===a)throw new Error("Setting "+t+" as parent of "+e+" would create a cycle");a=r.parent(a)}t&&r.setNode(t),r.setNode(e),r.removeFromParentsChildList(e),null===(n=r.parentMap)||void 0===n||n.set(e,i);var s=r.childrenMap.get(i);return s.set(e,!0),null===(o=r.childrenMap)||void 0===o||o.set(i,s),r},this.children=function(e){var t,n=void 0===e?r.GRAPH_NODE:e;if(r.isCompound()){var o=null===(t=r.childrenMap)||void 0===t?void 0:t.get(n);return o?Array.from(o.keys()):void 0}return n===r.GRAPH_NODE?r.nodes():e&&r.hasNode(e)?[]:void 0},this.predecessors=function(e){var t=r.predecessorsMap.get(e);return t?Array.from(t.keys()):void 0},this.successors=function(e){var t=r.successorsMap.get(e);return t?Array.from(t.keys()):void 0},this.neighbors=function(e){var t;if(r.hasNode(e))return Array.from(new Set(null===(t=r.predecessors(e))||void 0===t?void 0:t.concat(r.successors(e))))},this.isLeaf=function(e){var t,n;return r.isDirected()?!(null===(t=r.successors(e))||void 0===t?void 0:t.length):!(null===(n=r.neighbors(e))||void 0===n?void 0:n.length)},this.filterNodes=function(t){var n=r,o=n.directed,i=n.multigraph,a=n.compound,s=new e({directed:o,multigraph:i,compound:a});if(s.setGraph(r.graph()),r.nodes().forEach(function(e){t(e)&&s.setNode(e,r.node(e))}),r.edges().forEach(function(e){s.hasNode(e.v)&&s.hasNode(e.w)&&s.setEdgeObj(e,r.edge(e))}),a){s.nodes().forEach(function(e){s.setParent(e,function(e){for(var t=r.parent(e);void 0!==t&&!s.hasNode(t);)t=r.parent(t);return t}(e))})}return s},this.setDefaultEdgeLabel=function(e){return(0,o.isFunction)(e)?r.defaultEdgeLabelFn=e:r.defaultEdgeLabelFn=function(){return e},r},this.edgeCount=function(){return r.edgeCountNum},this.setEdgeObj=function(e,t){return r.setEdge(e.v,e.w,t,e.name)},this.setPath=function(e,t){return e.reduce(function(e,n){return r.setEdge(e,n,t),n}),r},this.edgeFromArgs=function(e,t,n){return r.edge({v:e,w:t,name:n})},this.edge=function(e){return r.edgesLabelsMap.get((0,a.edgeObjToId)(r.isDirected(),e))},this.hasEdge=function(e,t,n){return r.edgesLabelsMap.has((0,a.edgeObjToId)(r.isDirected(),{v:e,w:t,name:n}))},this.removeEdgeObj=function(e){var t=e.v,n=e.w,o=e.name;return r.removeEdge(t,n,o)},this.edges=function(){return Array.from(r.edgesMap.values())},this.inEdges=function(e,t){var n=r.inEdgesMap.get(e);if(n)return Array.from(n.values()).filter(function(e){return!t||e.v===t})},this.outEdges=function(e,t){var n=r.outEdgesMap.get(e);if(n)return Array.from(n.values()).filter(function(e){return!t||e.w===t})},this.nodeEdges=function(e,t){var n;if(r.hasNode(e))return null===(n=r.inEdges(e,t))||void 0===n?void 0:n.concat(r.outEdges(e,t))},this.toJSON=function(){return(0,s.write)(r)},this.nodeInDegree=function(e){var t=r.inEdgesMap.get(e);return t?t.size:0},this.nodeOutDegree=function(e){var t=r.outEdgesMap.get(e);return t?t.size:0},this.nodeDegree=function(e){return r.nodeInDegree(e)+r.nodeOutDegree(e)},this.source=function(e){return e.v},this.target=function(e){return e.w};var l=n(n({},u),t);this.compound=l.compound,this.directed=l.directed,this.multigraph=l.multigraph,this.compound&&(this.parentMap=new Map,this.childrenMap=new Map)}return e.prototype.setNode=function(e,t){var r,n=this,o=n.nodesLabelMap,i=n.defaultNodeLabelFn,a=n.isCompound,s=n.parentMap,u=n.childrenMap,l=n.inEdgesMap,c=n.outEdgesMap,f=n.predecessorsMap,h=n.successorsMap;return o.has(e)?(void 0!==t&&o.set(e,t),this):(o.set(e,t||i(e)),a()&&(null===s||void 0===s||s.set(e,this.GRAPH_NODE),null===u||void 0===u||u.set(e,new Map),(null===u||void 0===u?void 0:u.has(this.GRAPH_NODE))||null===u||void 0===u||u.set(this.GRAPH_NODE,new Map),null===(r=null===u||void 0===u?void 0:u.get(this.GRAPH_NODE))||void 0===r||r.set(e,!0)),[l,c,f,h].forEach(function(t){return t.set(e,new Map)}),this.nodeCountNum+=1,this)},e.prototype.removeNode=function(e){var t,r,n,o=this;if(this.hasNode(e)){var i=function(e){o.removeEdge(e.v,e.w,e.name)},a=this,s=a.inEdgesMap,u=a.outEdgesMap,l=a.predecessorsMap,c=a.successorsMap,f=a.nodesLabelMap;this.isCompound()&&(this.removeFromParentsChildList(e),null===(t=this.parentMap)||void 0===t||t.delete(e),null===(r=this.children(e))||void 0===r||r.forEach(function(e){return o.setParent(e)}),null===(n=this.childrenMap)||void 0===n||n.delete(e));var h=s.get(e),p=u.get(e);Array.from(h.values()).forEach(function(e){return i(e)}),Array.from(p.values()).forEach(function(e){return i(e)}),f.delete(e),s.delete(e),u.delete(e),l.delete(e),c.delete(e),this.nodeCountNum-=1}return this},e.prototype.setEdge=function(e,t,r,n){var o,i,s=(0,a.edgeArgsToObj)(this.isDirected(),e,t,n),u=(0,a.edgeObjToId)(this.isDirected(),s),l=s.v,c=s.w;if(this.edgesLabelsMap.has(u))return this.edgesLabelsMap.set(u,r),this;if(void 0!==n&&!this.isMultigraph())throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(l),this.setNode(c),this.edgesLabelsMap.set(u,r||this.defaultEdgeLabelFn(l,c,n)),Object.freeze(s),this.edgesMap.set(u,s);var f=this.predecessorsMap.get(c),h=this.successorsMap.get(l);return(0,a.incrementOrInitEntry)(f,l),(0,a.incrementOrInitEntry)(h,c),null===(o=this.inEdgesMap.get(c))||void 0===o||o.set(u,s),null===(i=this.outEdgesMap.get(l))||void 0===i||i.set(u,s),this.edgeCountNum+=1,this},e.prototype.removeEdge=function(e,t,r){var n=(0,o.edgeArgsToId)(this.isDirected(),e,t,r);if(this.edgesMap.get(n)){var i=(0,a.edgeArgsToObj)(this.isDirected(),e,t,r),s=i.v,u=i.w;this.edgesLabelsMap.delete(n),this.edgesMap.delete(n);var l=this.predecessorsMap.get(u),c=this.successorsMap.get(s);(0,a.decrementOrRemoveEntry)(l,s),(0,a.decrementOrRemoveEntry)(c,u),this.inEdgesMap.get(u).delete(n),this.outEdgesMap.get(s).delete(n),this.edgeCountNum-=1}return this},e.fromJSON=s.read,e}();t.default=l},59264:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.read=t.write=void 0;var o=n(r(12325));t.write=function(e){var t={options:{directed:e.isDirected(),multigraph:e.isMultigraph(),compound:e.isCompound()},nodes:function(e){return e.nodes().map(function(t){var r={id:t,value:e.node(t),parent:e.parent(t)};return void 0===r.value&&delete r.value,void 0===r.parent&&delete r.parent,r})}(e),edges:function(e){return e.edges().map(function(t){var r=e.edge(t),n={v:t.v,w:t.w,value:r,name:t.name};return void 0===n.name&&delete n.name,void 0===n.value&&delete n.value,n})}(e),value:e.graph()};return void 0===t.value&&delete t.value,t};t.read=function(e){var t=new o.default(e.options);return void 0!==e.value&&t.setGraph(e.value),e.nodes.forEach(function(e){t.setNode(e.id,e.value),e.parent&&t.setParent(e.id,e.parent)}),e.edges.forEach(function(e){t.setEdge(e.v,e.w,e.value,e.name)}),t}},49033:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){return function(){var e=this;this.arr=[],this.keyIndice=new Map,this.size=function(){return e.arr.length},this.keys=function(){return e.arr.map(function(e){return e.key})},this.has=function(t){return e.keyIndice.has(t)},this.priority=function(t){var r=e.keyIndice.get(t);if(void 0!==r)return e.arr[r].priority},this.swap=function(t,r){var n=e,o=n.arr,i=n.keyIndice,a=[o[t],o[r]],s=a[0],u=a[1];o[t]=u,o[r]=s,i.set(s.key,r),i.set(u.key,t)},this.innerDecrease=function(t){for(var r,n,o=e.arr,i=o[t].priority,a=t;0!==a&&!((null===(r=o[n=a>>1])||void 0===r?void 0:r.priority)<i);)e.swap(a,n),a=n},this.heapify=function(t){var r=e.arr,n=t<<1,o=n+1,i=t;n<r.length&&(i=r[n].priority<r[i].priority?n:i,o<r.length&&(i=r[o].priority<r[i].priority?o:i),i!==t&&(e.swap(t,i),e.heapify(i)))},this.min=function(){if(0===e.size())throw new Error("Queue underflow");return e.arr[0].key},this.add=function(t,r){var n=e,o=n.keyIndice,i=n.arr;if(!o.has(t)){var a=i.length;return o.set(t,a),i.push({key:t,priority:r}),e.innerDecrease(a),!0}return!1},this.removeMin=function(){e.swap(0,e.arr.length-1);var t=e.arr.pop();return e.keyIndice.delete(t.key),e.heapify(0),t.key},this.decrease=function(t,r){if(!e.has(t))throw new Error("There's no key named ".concat(t));var n=e.keyIndice.get(t);if(r>e.arr[n].priority)throw new Error("New priority is greater than current priority.Key: ".concat(t," Old: + ").concat(e.arr[n].priority," New: ").concat(r));e.arr[n].priority=r,e.innerDecrease(n)}}}();t.default=r},9164:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e){var t=new Set,r=[];return e.nodes().forEach(function(n){for(var o,i,a=[],s=[n];s.length>0;){var u=s.pop();t.has(u)||(t.add(u),a.push(u),null===(o=e.successors(u))||void 0===o||o.forEach(function(e){return s.push(e)}),null===(i=e.predecessors(u))||void 0===i||i.forEach(function(e){return s.push(e)}))}a.length&&r.push(a)}),r}},38825:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e,t,r){var n=function(t){return e.isDirected()?e.successors(t):e.neighbors(t)},o=[],i=[];return(Array.isArray(t)?t:[t]).forEach(function(t){if(!e.hasNode(t))throw new Error("Graph does not have node: "+t);!function e(t,r,n,o,i,a){o.includes(r)||(o.push(r),n||a.push(r),i(r).forEach(function(r){return e(t,r,n,o,i,a)}),n&&a.push(r))}(e,t,"post"===r,i,n,o)}),o}},86684:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(r(38413));t.default=function(e,t,r){var n={};return e.nodes().forEach(function(i){return n[String(i)]=(0,o.default)(e,i,t,r),n}),n}},38413:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(r(49033)),i=function(){return 1},a=function(e,t,r,n){var i,a,s=new Map,u=new o.default,l=function(e){var t=e.v!==i?e.v:e.w,n=s.get(t),o=r(e),l=a.distance+o;if(o<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+e+" Weight: "+o);l<n.distance&&(n.distance=l,n.predecessor=i,u.decrease(t,l))};for(e.nodes().forEach(function(e){var r=e===t?0:Number.POSITIVE_INFINITY;s.set(e,{distance:r}),u.add(e,r)});u.size()>0&&(i=u.removeMin(),!(a=s.get(i))||a.distance!==Number.POSITIVE_INFINITY);)n(i).forEach(l);var c={};return Array.from(s.entries()).forEach(function(e){var t=e[0],r=e[1];return c[String(t)]=r,c}),c};t.default=function(e,t,r,n){return a(e,t,r||i,n||function(t){return e.outEdges(t)})}},2345:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(r(32175));t.default=function(e){return(0,o.default)(e).filter(function(t){return t.length>1||1===t.length&&e.hasEdge(t[0],t[0])})}},19296:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.floydWarshall=void 0;var r=function(){return 1};function n(e,t,n){return function(e,t,r){var n={},o=e.nodes();return o.forEach(function(e){var i=String(e);n[i]={},n[i][i]={distance:0},o.forEach(function(t){e!==t&&(n[i][String(t)]={distance:Number.POSITIVE_INFINITY})}),r(e).forEach(function(r){var o=r.v===e?r.w:r.v,a=t(r);n[i][String(o)]={distance:a,predecessor:e}})}),o.forEach(function(e){var t=String(e),r=n[t];o.forEach(function(e){var i=String(e),a=n[i];o.forEach(function(e){var n=String(e),o=a[t],i=r[n],s=a[n],u=o.distance+i.distance;u<s.distance&&(s.distance=u,s.predecessor=i.predecessor)})})}),n}(e,t||r,n||function(t){return e.outEdges(t)})}t.floydWarshall=n,t.default=n},78877:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.floydWarshall=t.topsort=t.prim=t.preorder=t.postorder=t.isAcyclic=t.tarjan=t.findCycles=t.dijkstraAll=t.dijkstra=t.dfs=t.components=void 0;var o=n(r(55119));t.prim=o.default;var i=n(r(9164));t.components=i.default;var a=n(r(38825));t.dfs=a.default;var s=n(r(38413));t.dijkstra=s.default;var u=n(r(86684));t.dijkstraAll=u.default;var l=n(r(2345));t.findCycles=l.default;var c=n(r(72869));t.isAcyclic=c.default;var f=n(r(10997));t.postorder=f.default;var h=n(r(29958));t.preorder=h.default;var p=n(r(32175));t.tarjan=p.default;var d=n(r(14437));t.topsort=d.default;var y=n(r(19296));t.floydWarshall=y.default},72869:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});var a=i(r(14437));t.default=function(e){try{(0,a.default)(e)}catch(e){if(e instanceof a.CycleException)return!1;throw e}return!0}},10997:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(r(38825));t.default=function(e,t){return(0,o.default)(e,t,"post")}},29958:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(r(38825));t.default=function(e,t){return(0,o.default)(e,t,"pre")}},55119:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(r(12325)),i=n(r(49033));t.default=function(e,t){var r,n,a=new o.default,s=new Map,u=new i.default;function l(e){var r=e.v===n?e.w:e.v,o=u.priority(r);if(void 0!==o){var i=t(e);i<o&&(s.set(r,n),u.decrease(r,i))}}if(0===e.nodeCount())return a;e.nodes().forEach(function(e){u.add(e,Number.POSITIVE_INFINITY),a.setNode(e)}),u.decrease(e.nodes()[0],0);for(var c=!1;u.size()>0;){if(n=u.removeMin(),s.has(n))a.setEdge(n,s.get(n));else{if(c)throw new Error("Input graph is not connected: "+e.graph());c=!0}null===(r=e.nodeEdges(n))||void 0===r||r.forEach(l)}return a}},32175:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e){var t=0,r=[],n=new Map,o=[];return e.nodes().forEach(function(i){n.has(i)||function i(a){var s,u={onStack:!0,lowlink:t,index:t};if(n.set(a,u),t+=1,r.push(a),null===(s=e.successors(a))||void 0===s||s.forEach(function(e){var t;if(n.has(e))(null===(t=n.get(e))||void 0===t?void 0:t.onStack)&&(r=n.get(e),u.lowlink=Math.min(u.lowlink,r.index));else{i(e);var r=n.get(e);u.lowlink=Math.min(u.lowlink,r.lowlink)}}),u.lowlink===u.index){var l=[],c=void 0;do{c=r.pop(),n.get(c).onStack=!1,l.push(c)}while(a!==c);o.push(l)}}(i)}),o}},14437:function(e,t){"use strict";var r,n=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.CycleException=void 0;var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t}(Error);t.CycleException=o,t.default=function(e){var t=new Set,r=new Set,n=[];if(e.sinks().forEach(function i(a){var s;if(r.has(a))throw new o;t.has(a)||(r.add(a),t.add(a),null===(s=e.predecessors(a))||void 0===s||s.forEach(i),r.delete(a),n.push(a))}),t.size!==e.nodeCount())throw new o;return n}},72927:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isGraphComplement=void 0;var n=r(52402),o=r(94562);t.isGraphComplement=function(e,t){if(!(0,n.isSimpleGraph)(e)||!(0,n.isSimpleGraph)(t))return!1;if(!(0,o.containAllSameNodes)(e,t))return!1;if((0,o.containSameEdges)(e,t))return!1;var r=e.nodeCount();return e.edgeCount()+t.edgeCount()===r*(r-1)/2}},94562:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isGraphContainsAnother=t.isGraphSame=t.containAllSameEdges=t.containAllSameNodes=t.isGraphOptionSame=t.getSameEdges=t.getSameNodes=t.containSameEdges=t.containSameNodes=void 0;t.containSameNodes=function(e,t){for(var r=e.nodes(),n=0;n<r.length;n++){var o=r[n];if(t.hasNode(o))return!0}return!1};t.containSameEdges=function(e,t){for(var r=e.edges(),n=0;n<r.length;n++){var o=r[n];if(t.hasEdge(o.v,o.w,o.name))return!0}return!1};t.getSameNodes=function(e,t){return e.nodes().filter(function(e){return t.hasNode(e)})};t.getSameEdges=function(e,t){return e.edges().filter(function(e){return t.hasEdge(e.v,e.w,e.name)})};t.isGraphOptionSame=function(e,t){return e.isCompound()===t.isCompound()&&e.isDirected()===t.isDirected()&&e.isMultigraph()===t.isMultigraph()};t.containAllSameNodes=function(e,r){return(0,t.getSameNodes)(e,r).length===e.nodes().length};t.containAllSameEdges=function(e,r){return(0,t.getSameEdges)(e,r).length===e.edges().length};t.isGraphSame=function(e,r){return(0,t.isGraphOptionSame)(e,r)&&e.nodeCount()===r.nodeCount()&&(0,t.containAllSameNodes)(e,r)&&e.edgeCount()===r.edgeCount()&&(0,t.containAllSameEdges)(e,r)};t.isGraphContainsAnother=function(e,r){return(0,t.containAllSameNodes)(e,r)&&(0,t.containAllSameEdges)(e,r)}},26382:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isGraphContainsAnother=t.isGraphSame=t.getSameNodes=t.getSameEdges=t.isGraphOptionSame=t.isGraphComplement=t.containSameNodes=t.containSameEdges=t.containAllSameNodes=t.containAllSameEdges=void 0;var n=r(94562);Object.defineProperty(t,"containAllSameEdges",{enumerable:!0,get:function(){return n.containAllSameEdges}}),Object.defineProperty(t,"containAllSameNodes",{enumerable:!0,get:function(){return n.containAllSameNodes}}),Object.defineProperty(t,"containSameEdges",{enumerable:!0,get:function(){return n.containSameEdges}}),Object.defineProperty(t,"containSameNodes",{enumerable:!0,get:function(){return n.containSameNodes}}),Object.defineProperty(t,"isGraphOptionSame",{enumerable:!0,get:function(){return n.isGraphOptionSame}}),Object.defineProperty(t,"getSameEdges",{enumerable:!0,get:function(){return n.getSameEdges}}),Object.defineProperty(t,"getSameNodes",{enumerable:!0,get:function(){return n.getSameNodes}}),Object.defineProperty(t,"isGraphSame",{enumerable:!0,get:function(){return n.isGraphSame}}),Object.defineProperty(t,"isGraphContainsAnother",{enumerable:!0,get:function(){return n.isGraphContainsAnother}});var o=r(72927);Object.defineProperty(t,"isGraphComplement",{enumerable:!0,get:function(){return o.isGraphComplement}})},52402:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.hasSelfLoop=t.isNullGraph=t.isSimpleGraph=t.isGraph=void 0;var o=n(r(12325));t.isGraph=function(e){return e instanceof o.default},t.isSimpleGraph=function(e){if(e.isMultigraph())return!1;for(var t=e.edges(),r=new Map,n=0;n<t.length;n++){var o=t[n];if(o.v===o.w)return!1;var i=[o.v,o.w].sort(),a=i[0],s=i[1],u="".concat(a,"-").concat(s);if(r.has(u))return!1;r.set(u,!0)}return!0},t.isNullGraph=function(e){return 0===e.nodes().length},t.hasSelfLoop=function(e){for(var t=e.edges(),r=0;r<t.length;r++){var n=t[r];if(n.v===n.w)return!0}return!1}},43504:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getGraphComplement=void 0;var o=r(52402),i=n(r(12325));t.getGraphComplement=function(e){if(!(0,o.isSimpleGraph)(e))return null;for(var t=e.nodeCount(),r=new i.default({compound:e.isCompound(),directed:e.isDirected(),multigraph:e.isMultigraph()}),n=e.nodes(),a=0;a<t;a++){var s=n[a];r.setNode(s,e.node(s));for(var u=a+1;u<t;u++){var l=n[u];e.hasEdge(s,l)||r.setEdge(s,l)}}return r}},10910:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getGraphComplement=void 0;var n=r(43504);Object.defineProperty(t,"getGraphComplement",{enumerable:!0,get:function(){return n.getGraphComplement}})},54917:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.generate=t.essence=t.comparision=t.algorithm=t.GraphWithEvent=t.Graph=void 0;var s=a(r(12325));t.Graph=s.default;var u=r(24328);Object.defineProperty(t,"GraphWithEvent",{enumerable:!0,get:function(){return u.GraphWithEvent}});var l=i(r(78877));t.algorithm=l;var c=i(r(26382));t.comparision=c;var f=i(r(52402));t.essence=f;var h=i(r(10910));t.generate=h},1875:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isFunction=t.edgeObjToId=t.edgeArgsToObj=t.edgeArgsToId=t.decrementOrRemoveEntry=t.incrementOrInitEntry=void 0;var n=r(43518);function o(e,t,r,o){var i=String(t),a=String(r);if(!e&&i>a){var s=i;i=a,a=s}return i+n.GraphEnum.EDGE_KEY_DELIM+a+n.GraphEnum.EDGE_KEY_DELIM+(void 0===o?n.GraphEnum.DEFAULT_EDGE_NAME:o)}t.incrementOrInitEntry=function(e,t){var r=e.get(t)||0;e.set(t,r+1)},t.decrementOrRemoveEntry=function(e,t){var r=e.get(t);void 0!==r&&((r-=1)>0?e.set(t,r):e.delete(t))},t.edgeArgsToId=o,t.edgeArgsToObj=function(e,t,r,n){var o=String(t),i=String(r),a={v:t,w:r};if(!e&&o>i){var s=a.v;a.v=a.w,a.w=s}return void 0!==n&&(a.name=n),a},t.edgeObjToId=function(e,t){return o(e,t.v,t.w,t.name)},t.isFunction=function(e){return"function"==typeof e}},6977:function(e,t,r){var n,o,i,a;function s(e){"@babel/helpers - typeof";return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e=r.nmd(e),"undefined"!=typeof self&&self,a=function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=36)}([function(e,t,r){"use strict";var n=r(3);t.a=function(e){return Array.isArray?Array.isArray(e):Object(n.a)(e,"Array")}},function(e,t,r){"use strict";t.a=function(e){return null!==e&&"function"!=typeof e&&isFinite(e.length)}},function(e,t,r){"use strict";var n=r(3);t.a=function(e){return Object(n.a)(e,"Function")}},function(e,t,r){"use strict";var n={}.toString;t.a=function(e,t){return n.call(e)==="[object "+t+"]"}},function(e,t,r){"use strict";var n=r(3);t.a=function(e){return Object(n.a)(e,"String")}},function(e,t,r){"use strict";var n=r(3);t.a=function(e){return Object(n.a)(e,"Number")}},function(e,t,r){var n=r(38).mix;e.exports={assign:n,getHeight:function(e,t,r,n){return void 0===n&&(n="height"),"center"===r?(e[n]+t[n])/2:e.height}}},function(e,t,r){"use strict";t.a=function(e){return null===e||void 0===e}},function(e,t,r){"use strict";var n=r(0),o=r(12);t.a=function(e,t){if(e)if(Object(n.a)(e))for(var r=0,i=e.length;r<i&&!1!==t(e[r],r);r++);else if(Object(o.a)(e))for(var a in e)if(e.hasOwnProperty(a)&&!1===t(e[a],a))break}},function(e,t,r){"use strict";var n=r(7);t.a=function(e){return Object(n.a)(e)?"":e.toString()}},function(e,t,r){"use strict";var n=r(14),o=r(3);t.a=function(e){if(!Object(n.a)(e)||!Object(o.a)(e,"Object"))return!1;if(null===Object.getPrototypeOf(e))return!0;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}},function(e,t,r){var n=r(18),o=function(){function e(e,t){void 0===t&&(t={});this.options=t,this.rootNode=n(e,t)}return e.prototype.execute=function(){throw new Error("please override this method")},e}();e.exports=o},function(e,t,r){"use strict";t.a=function(e){var t=s(e);return null!==e&&"object"===t||"function"===t}},function(e,t,r){"use strict";var n=r(1);t.a=function(e,t){return!!Object(n.a)(e)&&e.indexOf(t)>-1}},function(e,t,r){"use strict";t.a=function(e){return"object"===s(e)&&null!==e}},function(e,t,r){"use strict";var n=r(8),o=r(2),i=Object.values?function(e){return Object.values(e)}:function(e){var t=[];return Object(n.a)(e,function(r,n){Object(o.a)(e)&&"prototype"===n||t.push(r)}),t};t.a=i},function(e,t,r){"use strict";function n(e,t){for(var r in t)t.hasOwnProperty(r)&&"constructor"!==r&&void 0!==t[r]&&(e[r]=t[r])}t.a=function(e,t,r,o){t&&n(e,t);r&&n(e,r);o&&n(e,o);return e}},function(e,t,r){var n=r(35),o=["LR","RL","TB","BT","H","V"],i=["LR","RL","H"],a=o[0];e.exports=function(e,t,r){var s=t.direction||a;if(t.isHorizontal=function(e){return i.indexOf(e)>-1}(s),s&&-1===o.indexOf(s))throw new TypeError("Invalid direction: "+s);if(s===o[0])r(e,t);else if(s===o[1])r(e,t),e.right2left();else if(s===o[2])r(e,t);else if(s===o[3])r(e,t),e.bottom2top();else if(s===o[4]||s===o[5]){var u=n(e,t),l=u.left,c=u.right;r(l,t),r(c,t),t.isHorizontal?l.right2left():l.bottom2top(),c.translate(l.x-c.x,l.y-c.y),e.x=l.x,e.y=c.y;var f=e.getBoundingBox();t.isHorizontal?f.top<0&&e.translate(0,-f.top):f.left<0&&e.translate(-f.left,0)}var h=t.fixedRoot;return void 0===h&&(h=!0),h&&e.translate(-(e.x+e.width/2+e.hgap),-(e.y+e.height/2+e.vgap)),e}},function(e,t,r){var n=r(6),o={getId:function(e){return e.id||e.name},getPreH:function(e){return e.preH||0},getPreV:function(e){return e.preV||0},getHGap:function(e){return e.hgap||18},getVGap:function(e){return e.vgap||18},getChildren:function(e){return e.children},getHeight:function(e){return e.height||36},getWidth:function(e){var t=e.label||" ";return e.width||18*t.split("").length}};function i(e,t){var r=this;if(r.vgap=r.hgap=0,e instanceof i)return e;r.data=e;var n=t.getHGap(e),o=t.getVGap(e);return r.preH=t.getPreH(e),r.preV=t.getPreV(e),r.width=t.getWidth(e),r.height=t.getHeight(e),r.width+=r.preH,r.height+=r.preV,r.id=t.getId(e),r.x=r.y=0,r.depth=0,r.children||(r.children=[]),r.addGap(n,o),r}n.assign(i.prototype,{isRoot:function(){return 0===this.depth},isLeaf:function(){return 0===this.children.length},addGap:function(e,t){this.hgap+=e,this.vgap+=t,this.width+=2*e,this.height+=2*t},eachNode:function(e){for(var t,r=[this];t=r.shift();)e(t),r=t.children.concat(r)},DFTraverse:function(e){this.eachNode(e)},BFTraverse:function(e){for(var t,r=[this];t=r.shift();)e(t),r=r.concat(t.children)},getBoundingBox:function(){var e={left:Number.MAX_VALUE,top:Number.MAX_VALUE,width:0,height:0};return this.eachNode(function(t){e.left=Math.min(e.left,t.x),e.top=Math.min(e.top,t.y),e.width=Math.max(e.width,t.x+t.width),e.height=Math.max(e.height,t.y+t.height)}),e},translate:function(e,t){void 0===e&&(e=0),void 0===t&&(t=0),this.eachNode(function(r){r.x+=e,r.y+=t,r.x+=r.preH,r.y+=r.preV})},right2left:function(){var e=this.getBoundingBox();this.eachNode(function(t){t.x=t.x-2*(t.x-e.left)-t.width}),this.translate(e.width,0)},bottom2top:function(){var e=this.getBoundingBox();this.eachNode(function(t){t.y=t.y-2*(t.y-e.top)-t.height}),this.translate(0,e.height)}}),e.exports=function(e,t,r){void 0===t&&(t={});var a,s=new i(e,t=n.assign({},o,t)),u=[s];if(!r&&!e.collapsed)for(;a=u.shift();)if(!a.data.collapsed){var l=t.getChildren(a.data),c=l?l.length:0;if(a.children=new Array(c),l&&c)for(var f=0;f<c;f++){var h=new i(l[f],t);a.children[f]=h,u.push(h),h.parent=a,h.depth=a.depth+1}}return s}},function(e,t,r){"use strict";var n=r(1);t.a=function(e,t){if(!Object(n.a)(e))return e;for(var r=[],o=0;o<e.length;o++){var i=e[o];t(i,o)&&r.push(i)}return r}},function(e,t,r){"use strict";var n=r(7),o=r(21);t.a=function(e,t){var r=Object(o.a)(t),i=r.length;if(Object(n.a)(e))return!i;for(var a=0;a<i;a+=1){var s=r[a];if(t[s]!==e[s]||!(s in e))return!1}return!0}},function(e,t,r){"use strict";var n=r(8),o=r(2),i=Object.keys?function(e){return Object.keys(e)}:function(e){var t=[];return Object(n.a)(e,function(r,n){Object(o.a)(e)&&"prototype"===n||t.push(n)}),t};t.a=i},function(e,t,r){"use strict";var n=r(0);t.a=function(e){if(Object(n.a)(e))return e.reduce(function(e,t){return Math.max(e,t)},e[0])}},function(e,t,r){"use strict";var n=r(0);t.a=function(e){if(Object(n.a)(e))return e.reduce(function(e,t){return Math.min(e,t)},e[0])}},function(e,t,r){"use strict";var n=r(1),o=Array.prototype.splice;t.a=function(e,t){if(!Object(n.a)(e))return[];for(var r=e?t.length:0,i=r-1;r--;){var a=void 0,s=t[r];r!==i&&s===a||(a=s,o.call(e,s,1))}return e}},function(e,t,r){"use strict";var n=r(8),o=r(0),i=r(10);t.a=function(e,t,r){if(!Object(o.a)(e)&&!Object(i.a)(e))return e;var a=r;return Object(n.a)(e,function(e,r){a=t(a,e,r)}),a}},function(e,t,r){"use strict";t.a=function(e,t){void 0===t&&(t=new Map);var r=[];if(Array.isArray(e))for(var n=0,o=e.length;n<o;n++){var i=e[n];t.has(i)||(r.push(i),t.set(i,!0))}return r}},function(e,t,r){"use strict";t.a=function(e,t){if(!t)return{0:e};if(!Object(o.a)(t)){var r=Object(n.a)(t)?t:t.replace(/\s+/g,"").split("*");t=function(e){for(var t="_",n=0,o=r.length;n<o;n++)t+=e[r[n]]&&e[r[n]].toString();return t}}return Object(i.a)(e,t)};var n=r(0),o=r(2),i=r(28)},function(e,t,r){"use strict";var n=r(0),o=r(2),i=Object.prototype.hasOwnProperty;t.a=function(e,t){if(!t||!Object(n.a)(e))return{};for(var r,a={},s=Object(o.a)(t)?t:function(e){return e[t]},u=0;u<e.length;u++){var l=e[u];r=s(l),i.call(a,r)?a[r].push(l):a[r]=[l]}return a}},function(e,t,r){"use strict";t.a=function(e,t){return e.hasOwnProperty(t)}},function(e,t,r){"use strict";var n={}.toString;t.a=function(e){return n.call(e).replace(/^\[object /,"").replace(/]$/,"")}},function(e,t,r){"use strict";var n=Object.prototype;t.a=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||n)}},function(e,t,r){"use strict";var n=r(2);t.a=function(e,t){if(!Object(n.a)(e))throw new TypeError("Expected a function");var r=function r(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];var i=t?t.apply(this,n):n[0],a=r.cache;if(a.has(i))return a.get(i);var s=e.apply(this,n);return a.set(i,s),s};return r.cache=new Map,r}},function(e,t,r){"use strict";var n=r(14),o=r(1),i=r(4);t.a=function e(t,r){if(t===r)return!0;if(!t||!r)return!1;if(Object(i.a)(t)||Object(i.a)(r))return!1;if(Object(o.a)(t)||Object(o.a)(r)){if(t.length!==r.length)return!1;for(var a=!0,s=0;s<t.length&&(a=e(t[s],r[s]));s++);return a}if(Object(n.a)(t)||Object(n.a)(r)){var u=Object.keys(t),l=Object.keys(r);if(u.length!==l.length)return!1;for(a=!0,s=0;s<u.length&&(a=e(t[u[s]],r[u[s]]));s++);return a}return!1}},function(e,t,r){"use strict";var n,o=r(116),i=r(15),a=r(32),s=r(4);t.a=Object(a.a)(function(e,t){void 0===t&&(t={});var r=t.fontSize,o=t.fontFamily,i=t.fontWeight,a=t.fontStyle,u=t.fontVariant;return n||(n=document.createElement("canvas").getContext("2d")),n.font=[a,u,i,r+"px",o].join(" "),n.measureText(Object(s.a)(e)?e:"").width},function(e,t){return void 0===t&&(t={}),Object(o.a)([e],Object(i.a)(t)).join("")})},function(e,t,r){var n=r(18);e.exports=function(e,t){for(var r=n(e.data,t,!0),o=n(e.data,t,!0),i=e.children.length,a=Math.round(i/2),s=t.getSide||function(e,t){return t<a?"right":"left"},u=0;u<i;u++){var l=e.children[u];"right"===s(l,u)?o.children.push(l):r.children.push(l)}return r.eachNode(function(e){e.isRoot()||(e.side="left")}),o.eachNode(function(e){e.isRoot()||(e.side="right")}),{left:r,right:o}}},function(e,t,r){var n={compactBox:r(37),dendrogram:r(120),indented:r(122),mindmap:r(124)};e.exports=n},function(e,t,r){function n(e,t){return(n=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var o=r(11),i=r(119),a=r(17),s=r(6),u=function(e){var t,r;function o(){return e.apply(this,arguments)||this}return r=e,(t=o).prototype=Object.create(r.prototype),t.prototype.constructor=t,n(t,r),o.prototype.execute=function(){return a(this.rootNode,this.options,i)},o}(o),l={};e.exports=function(e,t){return t=s.assign({},l,t),new u(e,t).execute()}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(13);r.d(t,"contains",function(){return n.a}),r.d(t,"includes",function(){return n.a});var o=r(39);r.d(t,"difference",function(){return o.a});var i=r(40);r.d(t,"find",function(){return i.a});var a=r(41);r.d(t,"findIndex",function(){return a.a});var s=r(42);r.d(t,"firstValue",function(){return s.a});var u=r(43);r.d(t,"flatten",function(){return u.a});var l=r(44);r.d(t,"flattenDeep",function(){return l.a});var c=r(45);r.d(t,"getRange",function(){return c.a});var f=r(46);r.d(t,"pull",function(){return f.a});var h=r(24);r.d(t,"pullAt",function(){return h.a});var p=r(25);r.d(t,"reduce",function(){return p.a});var d=r(47);r.d(t,"remove",function(){return d.a});var y=r(48);r.d(t,"sortBy",function(){return y.a});var v=r(49);r.d(t,"union",function(){return v.a});var g=r(26);r.d(t,"uniq",function(){return g.a});var m=r(50);r.d(t,"valuesOfKey",function(){return m.a});var b=r(51);r.d(t,"head",function(){return b.a});var w=r(52);r.d(t,"last",function(){return w.a});var _=r(53);r.d(t,"startsWith",function(){return _.a});var x=r(54);r.d(t,"endsWith",function(){return x.a});var S=r(19);r.d(t,"filter",function(){return S.a});var O=r(55);r.d(t,"every",function(){return O.a});var P=r(56);r.d(t,"some",function(){return P.a});var E=r(57);r.d(t,"group",function(){return E.a});var k=r(28);r.d(t,"groupBy",function(){return k.a});var M=r(27);r.d(t,"groupToMap",function(){return M.a});var C=r(58);r.d(t,"getWrapBehavior",function(){return C.a});var j=r(59);r.d(t,"wrapBehavior",function(){return j.a});var T=r(60);r.d(t,"number2color",function(){return T.a});var A=r(61);r.d(t,"parseRadius",function(){return A.a});var I=r(62);r.d(t,"clamp",function(){return I.a});var R=r(63);r.d(t,"fixedBase",function(){return R.a});var L=r(64);r.d(t,"isDecimal",function(){return L.a});var N=r(65);r.d(t,"isEven",function(){return N.a});var D=r(66);r.d(t,"isInteger",function(){return D.a});var B=r(67);r.d(t,"isNegative",function(){return B.a});var F=r(68);r.d(t,"isNumberEqual",function(){return F.a});var G=r(69);r.d(t,"isOdd",function(){return G.a});var z=r(70);r.d(t,"isPositive",function(){return z.a});var U=r(22);r.d(t,"max",function(){return U.a});var V=r(71);r.d(t,"maxBy",function(){return V.a});var W=r(23);r.d(t,"min",function(){return W.a});var Y=r(72);r.d(t,"minBy",function(){return Y.a});var H=r(73);r.d(t,"mod",function(){return H.a});var X=r(74);r.d(t,"toDegree",function(){return X.a});var q=r(75);r.d(t,"toInteger",function(){return q.a});var J=r(76);r.d(t,"toRadian",function(){return J.a});var Z=r(77);r.d(t,"forIn",function(){return Z.a});var K=r(29);r.d(t,"has",function(){return K.a});var Q=r(78);r.d(t,"hasKey",function(){return Q.a});var $=r(79);r.d(t,"hasValue",function(){return $.a});var ee=r(21);r.d(t,"keys",function(){return ee.a});var te=r(20);r.d(t,"isMatch",function(){return te.a});var re=r(15);r.d(t,"values",function(){return re.a});var ne=r(80);r.d(t,"lowerCase",function(){return ne.a});var oe=r(81);r.d(t,"lowerFirst",function(){return oe.a});var ie=r(82);r.d(t,"substitute",function(){return ie.a});var ae=r(83);r.d(t,"upperCase",function(){return ae.a});var se=r(84);r.d(t,"upperFirst",function(){return se.a});var ue=r(30);r.d(t,"getType",function(){return ue.a});var le=r(85);r.d(t,"isArguments",function(){return le.a});var ce=r(0);r.d(t,"isArray",function(){return ce.a});var fe=r(1);r.d(t,"isArrayLike",function(){return fe.a});var he=r(86);r.d(t,"isBoolean",function(){return he.a});var pe=r(87);r.d(t,"isDate",function(){return pe.a});var de=r(88);r.d(t,"isError",function(){return de.a});var ye=r(2);r.d(t,"isFunction",function(){return ye.a});var ve=r(89);r.d(t,"isFinite",function(){return ve.a});var ge=r(7);r.d(t,"isNil",function(){return ge.a});var me=r(90);r.d(t,"isNull",function(){return me.a});var be=r(5);r.d(t,"isNumber",function(){return be.a});var we=r(12);r.d(t,"isObject",function(){return we.a});var _e=r(14);r.d(t,"isObjectLike",function(){return _e.a});var xe=r(10);r.d(t,"isPlainObject",function(){return xe.a});var Se=r(31);r.d(t,"isPrototype",function(){return Se.a});var Oe=r(91);r.d(t,"isRegExp",function(){return Oe.a});var Pe=r(4);r.d(t,"isString",function(){return Pe.a});var Ee=r(3);r.d(t,"isType",function(){return Ee.a});var ke=r(92);r.d(t,"isUndefined",function(){return ke.a});var Me=r(93);r.d(t,"isElement",function(){return Me.a});var Ce=r(94);r.d(t,"requestAnimationFrame",function(){return Ce.a});var je=r(95);r.d(t,"clearAnimationFrame",function(){return je.a});var Te=r(96);r.d(t,"augment",function(){return Te.a});var Ae=r(97);r.d(t,"clone",function(){return Ae.a});var Ie=r(98);r.d(t,"debounce",function(){return Ie.a});var Re=r(32);r.d(t,"memoize",function(){return Re.a});var Le=r(99);r.d(t,"deepMix",function(){return Le.a});var Ne=r(8);r.d(t,"each",function(){return Ne.a});var De=r(100);r.d(t,"extend",function(){return De.a});var Be=r(101);r.d(t,"indexOf",function(){return Be.a});var Fe=r(102);r.d(t,"isEmpty",function(){return Fe.a});var Ge=r(33);r.d(t,"isEqual",function(){return Ge.a});var ze=r(103);r.d(t,"isEqualWith",function(){return ze.a});var Ue=r(104);r.d(t,"map",function(){return Ue.a});var Ve=r(105);r.d(t,"mapValues",function(){return Ve.a});var We=r(16);r.d(t,"mix",function(){return We.a}),r.d(t,"assign",function(){return We.a});var Ye=r(106);r.d(t,"get",function(){return Ye.a});var He=r(107);r.d(t,"set",function(){return He.a});var Xe=r(108);r.d(t,"pick",function(){return Xe.a});var qe=r(109);r.d(t,"omit",function(){return qe.a});var Je=r(110);r.d(t,"throttle",function(){return Je.a});var Ze=r(111);r.d(t,"toArray",function(){return Ze.a});var Ke=r(9);r.d(t,"toString",function(){return Ke.a});var Qe=r(112);r.d(t,"uniqueId",function(){return Qe.a});var $e=r(113);r.d(t,"noop",function(){return $e.a});var et=r(114);r.d(t,"identity",function(){return et.a});var tt=r(115);r.d(t,"size",function(){return tt.a});var rt=r(34);r.d(t,"measureTextWidth",function(){return rt.a});var nt=r(117);r.d(t,"getEllipsisText",function(){return nt.a});var ot=r(118);r.d(t,"Cache",function(){return ot.a})},function(e,t,r){"use strict";var n=r(19),o=r(13);t.a=function(e,t){return void 0===t&&(t=[]),Object(n.a)(e,function(e){return!Object(o.a)(t,e)})}},function(e,t,r){"use strict";var n=r(2),o=r(20),i=r(0),a=r(10);t.a=function(e,t){if(!Object(i.a)(e))return null;var r;if(Object(n.a)(t)&&(r=t),Object(a.a)(t)&&(r=function(e){return Object(o.a)(e,t)}),r)for(var s=0;s<e.length;s+=1)if(r(e[s]))return e[s];return null}},function(e,t,r){"use strict";t.a=function(e,t,r){void 0===r&&(r=0);for(var n=r;n<e.length;n++)if(t(e[n],n))return n;return-1}},function(e,t,r){"use strict";var n=r(7),o=r(0);t.a=function(e,t){for(var r=null,i=0;i<e.length;i++){var a=e[i][t];if(!Object(n.a)(a)){r=Object(o.a)(a)?a[0]:a;break}}return r}},function(e,t,r){"use strict";var n=r(0);t.a=function(e){if(!Object(n.a)(e))return[];for(var t=[],r=0;r<e.length;r++)t=t.concat(e[r]);return t}},function(e,t,r){"use strict";var n=r(0);t.a=function e(t,r){if(void 0===r&&(r=[]),Object(n.a)(t))for(var o=0;o<t.length;o+=1)e(t[o],r);else r.push(t);return r}},function(e,t,r){"use strict";var n=r(0),o=r(22),i=r(23);t.a=function(e){var t=e.filter(function(e){return!isNaN(e)});if(!t.length)return{min:0,max:0};if(Object(n.a)(e[0])){for(var r=[],a=0;a<e.length;a++)r=r.concat(e[a]);t=r}var s=Object(o.a)(t);return{min:Object(i.a)(t),max:s}}},function(e,t,r){"use strict";var n=Array.prototype,o=n.splice,i=n.indexOf;t.a=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];for(var n=0;n<t.length;n++)for(var a=t[n],s=-1;(s=i.call(e,a))>-1;)o.call(e,s,1);return e}},function(e,t,r){"use strict";var n=r(1),o=r(24);t.a=function(e,t){var r=[];if(!Object(n.a)(e))return r;for(var i=-1,a=[],s=e.length;++i<s;){var u=e[i];t(u,i,e)&&(r.push(u),a.push(i))}return Object(o.a)(e,a),r}},function(e,t,r){"use strict";var n=r(0),o=r(4),i=r(2);t.a=function(e,t){var r;if(Object(i.a)(t))r=function(e,r){return t(e)-t(r)};else{var a=[];Object(o.a)(t)?a.push(t):Object(n.a)(t)&&(a=t),r=function(e,t){for(var r=0;r<a.length;r+=1){var n=a[r];if(e[n]>t[n])return 1;if(e[n]<t[n])return-1}return 0}}return e.sort(r),e}},function(e,t,r){"use strict";var n=r(26);t.a=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Object(n.a)([].concat.apply([],e))}},function(e,t,r){"use strict";var n=r(0),o=r(7);t.a=function(e,t){for(var r=[],i={},a=0;a<e.length;a++){var s=e[a][t];if(!Object(o.a)(s)){Object(n.a)(s)||(s=[s]);for(var u=0;u<s.length;u++){var l=s[u];i[l]||(r.push(l),i[l]=!0)}}}return r}},function(e,t,r){"use strict";t.a=function(e){if(Object(n.a)(e))return e[0];return};var n=r(1)},function(e,t,r){"use strict";t.a=function(e){if(Object(n.a)(e)){var t=e;return t[t.length-1]}return};var n=r(1)},function(e,t,r){"use strict";var n=r(0),o=r(4);t.a=function(e,t){return!(!Object(n.a)(e)&&!Object(o.a)(e))&&e[0]===t}},function(e,t,r){"use strict";var n=r(0),o=r(4);t.a=function(e,t){return!(!Object(n.a)(e)&&!Object(o.a)(e))&&e[e.length-1]===t}},function(e,t,r){"use strict";t.a=function(e,t){for(var r=0;r<e.length;r++)if(!t(e[r],r))return!1;return!0}},function(e,t,r){"use strict";t.a=function(e,t){for(var r=0;r<e.length;r++)if(t(e[r],r))return!0;return!1}},function(e,t,r){"use strict";var n=r(27);t.a=function(e,t){if(!t)return[e];var r=Object(n.a)(e,t),o=[];for(var i in r)o.push(r[i]);return o}},function(e,t,r){"use strict";t.a=function(e,t){return e["_wrap_"+t]}},function(e,t,r){"use strict";t.a=function(e,t){if(e["_wrap_"+t])return e["_wrap_"+t];var r=function(r){e[t](r)};return e["_wrap_"+t]=r,r}},function(e,t,r){"use strict";var n={};t.a=function(e){var t=n[e];if(!t){for(var r=e.toString(16),o=r.length;o<6;o++)r="0"+r;t="#"+r,n[e]=t}return t}},function(e,t,r){"use strict";var n=r(0);t.a=function(e){var t=0,r=0,o=0,i=0;return Object(n.a)(e)?1===e.length?t=r=o=i=e[0]:2===e.length?(t=o=e[0],r=i=e[1]):3===e.length?(t=e[0],r=i=e[1],o=e[2]):(t=e[0],r=e[1],o=e[2],i=e[3]):t=r=o=i=e,{r1:t,r2:r,r3:o,r4:i}}},function(e,t,r){"use strict";t.a=function(e,t,r){return e<t?t:e>r?r:e}},function(e,t,r){"use strict";t.a=function(e,t){var r=t.toString(),n=r.indexOf(".");if(-1===n)return Math.round(e);var o=r.substr(n+1).length;return o>20&&(o=20),parseFloat(e.toFixed(o))}},function(e,t,r){"use strict";var n=r(5);t.a=function(e){return Object(n.a)(e)&&e%1!=0}},function(e,t,r){"use strict";var n=r(5);t.a=function(e){return Object(n.a)(e)&&e%2==0}},function(e,t,r){"use strict";var n=r(5),o=Number.isInteger?Number.isInteger:function(e){return Object(n.a)(e)&&e%1==0};t.a=o},function(e,t,r){"use strict";var n=r(5);t.a=function(e){return Object(n.a)(e)&&e<0}},function(e,t,r){"use strict";t.a=function(e,t,r){void 0===r&&(r=n);return Math.abs(e-t)<r};var n=1e-5},function(e,t,r){"use strict";var n=r(5);t.a=function(e){return Object(n.a)(e)&&e%2!=0}},function(e,t,r){"use strict";var n=r(5);t.a=function(e){return Object(n.a)(e)&&e>0}},function(e,t,r){"use strict";var n=r(0),o=r(2);t.a=function(e,t){if(Object(n.a)(e)){for(var r,i=-1/0,a=0;a<e.length;a++){var s=e[a],u=Object(o.a)(t)?t(s):s[t];u>i&&(r=s,i=u)}return r}}},function(e,t,r){"use strict";var n=r(0),o=r(2);t.a=function(e,t){if(Object(n.a)(e)){for(var r,i=1/0,a=0;a<e.length;a++){var s=e[a],u=Object(o.a)(t)?t(s):s[t];u<i&&(r=s,i=u)}return r}}},function(e,t,r){"use strict";t.a=function(e,t){return(e%t+t)%t}},function(e,t,r){"use strict";var n=180/Math.PI;t.a=function(e){return n*e}},function(e,t,r){"use strict";t.a=parseInt},function(e,t,r){"use strict";var n=Math.PI/180;t.a=function(e){return n*e}},function(e,t,r){"use strict";var n=r(8);t.a=n.a},function(e,t,r){"use strict";var n=r(29);t.a=n.a},function(e,t,r){"use strict";var n=r(13),o=r(15);t.a=function(e,t){return Object(n.a)(Object(o.a)(e),t)}},function(e,t,r){"use strict";var n=r(9);t.a=function(e){return Object(n.a)(e).toLowerCase()}},function(e,t,r){"use strict";var n=r(9);t.a=function(e){var t=Object(n.a)(e);return t.charAt(0).toLowerCase()+t.substring(1)}},function(e,t,r){"use strict";t.a=function(e,t){return e&&t?e.replace(/\\?\{([^{}]+)\}/g,function(e,r){return"\\"===e.charAt(0)?e.slice(1):void 0===t[r]?"":t[r]}):e}},function(e,t,r){"use strict";var n=r(9);t.a=function(e){return Object(n.a)(e).toUpperCase()}},function(e,t,r){"use strict";var n=r(9);t.a=function(e){var t=Object(n.a)(e);return t.charAt(0).toUpperCase()+t.substring(1)}},function(e,t,r){"use strict";var n=r(3);t.a=function(e){return Object(n.a)(e,"Arguments")}},function(e,t,r){"use strict";var n=r(3);t.a=function(e){return Object(n.a)(e,"Boolean")}},function(e,t,r){"use strict";var n=r(3);t.a=function(e){return Object(n.a)(e,"Date")}},function(e,t,r){"use strict";var n=r(3);t.a=function(e){return Object(n.a)(e,"Error")}},function(e,t,r){"use strict";var n=r(5);t.a=function(e){return Object(n.a)(e)&&isFinite(e)}},function(e,t,r){"use strict";t.a=function(e){return null===e}},function(e,t,r){"use strict";var n=r(3);t.a=function(e){return Object(n.a)(e,"RegExp")}},function(e,t,r){"use strict";t.a=function(e){return void 0===e}},function(e,t,r){"use strict";t.a=function(e){return e instanceof Element||e instanceof HTMLDocument}},function(e,t,r){"use strict";t.a=function(e){return(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(e){return setTimeout(e,16)})(e)}},function(e,t,r){"use strict";t.a=function(e){(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout)(e)}},function(e,t,r){"use strict";var n=r(16),o=r(2);t.a=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var r=e[0],i=1;i<e.length;i++){var a=e[i];Object(o.a)(a)&&(a=a.prototype),Object(n.a)(r.prototype,a)}}},function(e,t,r){"use strict";var n=r(0);t.a=function e(t){if("object"!==s(t)||null===t)return t;var r;if(Object(n.a)(t)){r=[];for(var o=0,i=t.length;o<i;o++)"object"===s(t[o])&&null!=t[o]?r[o]=e(t[o]):r[o]=t[o]}else for(var a in r={},t)"object"===s(t[a])&&null!=t[a]?r[a]=e(t[a]):r[a]=t[a];return r}},function(e,t,r){"use strict";t.a=function(e,t,r){var n;return function(){var o=this,i=arguments,a=r&&!n;clearTimeout(n),n=setTimeout(function(){n=null,r||e.apply(o,i)},t),a&&e.apply(o,i)}}},function(e,t,r){"use strict";var n=r(0),o=r(10),i=5;function a(e,t,r,s){for(var u in r=r||0,s=s||i,t)if(t.hasOwnProperty(u)){var l=t[u];null!==l&&Object(o.a)(l)?(Object(o.a)(e[u])||(e[u]={}),r<s?a(e[u],l,r+1,s):e[u]=t[u]):Object(n.a)(l)?(e[u]=[],e[u]=e[u].concat(l)):void 0!==l&&(e[u]=l)}}t.a=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];for(var n=0;n<t.length;n+=1)a(e,t[n]);return e}},function(e,t,r){"use strict";var n=r(16),o=r(2);t.a=function(e,t,r,i){Object(o.a)(t)||(r=t,t=e,e=function(){});var a=Object.create?function(e,t){return Object.create(e,{constructor:{value:t}})}:function(e,t){function r(){}r.prototype=e;var n=new r;return n.constructor=t,n},s=a(t.prototype,e);return e.prototype=Object(n.a)(s,e.prototype),e.superclass=a(t.prototype,t),Object(n.a)(s,r),Object(n.a)(e,i),e}},function(e,t,r){"use strict";var n=r(1);t.a=function(e,t){if(!Object(n.a)(e))return-1;var r=Array.prototype.indexOf;if(r)return r.call(e,t);for(var o=-1,i=0;i<e.length;i++)if(e[i]===t){o=i;break}return o}},function(e,t,r){"use strict";var n=r(7),o=r(1),i=r(30),a=r(31),s=Object.prototype.hasOwnProperty;t.a=function(e){if(Object(n.a)(e))return!0;if(Object(o.a)(e))return!e.length;var t=Object(i.a)(e);if("Map"===t||"Set"===t)return!e.size;if(Object(a.a)(e))return!Object.keys(e).length;for(var r in e)if(s.call(e,r))return!1;return!0}},function(e,t,r){"use strict";var n=r(2),o=r(33);t.a=function(e,t,r){return Object(n.a)(r)?!!r(e,t):Object(o.a)(e,t)}},function(e,t,r){"use strict";var n=r(1);t.a=function(e,t){if(!Object(n.a)(e))return e;for(var r=[],o=0;o<e.length;o++){var i=e[o];r.push(t(i,o))}return r}},function(e,t,r){"use strict";var n=r(7),o=r(12),i=function(e){return e};t.a=function(e,t){void 0===t&&(t=i);var r={};return Object(o.a)(e)&&!Object(n.a)(e)&&Object.keys(e).forEach(function(n){r[n]=t(e[n],n)}),r}},function(e,t,r){"use strict";var n=r(4);t.a=function(e,t,r){for(var o=0,i=Object(n.a)(t)?t.split("."):t;e&&o<i.length;)e=e[i[o++]];return void 0===e||o<i.length?r:e}},function(e,t,r){"use strict";var n=r(12),o=r(4),i=r(5);t.a=function(e,t,r){var a=e,s=Object(o.a)(t)?t.split("."):t;return s.forEach(function(e,t){t<s.length-1?(Object(n.a)(a[e])||(a[e]=Object(i.a)(s[t+1])?[]:{}),a=a[e]):a[e]=r}),e}},function(e,t,r){"use strict";var n=r(8),o=r(10),i=Object.prototype.hasOwnProperty;t.a=function(e,t){if(null===e||!Object(o.a)(e))return{};var r={};return Object(n.a)(t,function(t){i.call(e,t)&&(r[t]=e[t])}),r}},function(e,t,r){"use strict";var n=r(25);t.a=function(e,t){return Object(n.a)(e,function(e,r,n){return t.includes(n)||(e[n]=r),e},{})}},function(e,t,r){"use strict";t.a=function(e,t,r){var n,o,i,a,s=0;r||(r={});var u=function(){s=!1===r.leading?0:Date.now(),n=null,a=e.apply(o,i),n||(o=i=null)},l=function(){var l=Date.now();s||!1!==r.leading||(s=l);var c=t-(l-s);return o=this,i=arguments,c<=0||c>t?(n&&(clearTimeout(n),n=null),s=l,a=e.apply(o,i),n||(o=i=null)):n||!1===r.trailing||(n=setTimeout(u,c)),a};return l.cancel=function(){clearTimeout(n),s=0,n=o=i=null},l}},function(e,t,r){"use strict";var n=r(1);t.a=function(e){return Object(n.a)(e)?Array.prototype.slice.call(e):[]}},function(e,t,r){"use strict";var n={};t.a=function(e){return n[e=e||"g"]?n[e]+=1:n[e]=1,e+n[e]}},function(e,t,r){"use strict";t.a=function(){}},function(e,t,r){"use strict";t.a=function(e){return e}},function(e,t,r){"use strict";t.a=function(e){if(Object(n.a)(e))return 0;if(Object(o.a)(e))return e.length;return Object.keys(e).length};var n=r(7),o=r(1)},function(e,t,r){"use strict";t.a=function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),o=0,t=0;t<r;t++)for(var i=arguments[t],a=0,s=i.length;a<s;a++,o++)n[o]=i[a];return n};Object.create;Object.create},function(e,t,r){"use strict";var n=r(4),o=r(9),i=r(34);t.a=function(e,t,r,a){void 0===a&&(a="...");var s,u,l=Object(i.a)(a,r),c=Object(n.a)(e)?e:Object(o.a)(e),f=t,h=[];if(Object(i.a)(e,r)<=t)return e;for(;s=c.substr(0,16),!((u=Object(i.a)(s,r))+l>f&&u>f);)if(h.push(s),f-=u,!(c=c.substr(16)))return h.join("");for(;s=c.substr(0,1),!((u=Object(i.a)(s,r))+l>f);)if(h.push(s),f-=u,!(c=c.substr(1)))return h.join("");return""+h.join("")+a}},function(e,t,r){"use strict";var n=function(){function e(){this.map={}}return e.prototype.has=function(e){return void 0!==this.map[e]},e.prototype.get=function(e,t){var r=this.map[e];return void 0===r?t:r},e.prototype.set=function(e,t){this.map[e]=t},e.prototype.clear=function(){this.map={}},e.prototype.delete=function(e){delete this.map[e]},e.prototype.size=function(){return Object.keys(this.map).length},e}();t.a=n},function(e,t){function r(e,t,r,n){void 0===n&&(n=[]);var o=this;o.w=e||0,o.h=t||0,o.y=r||0,o.x=0,o.c=n||[],o.cs=n.length,o.prelim=0,o.mod=0,o.shift=0,o.change=0,o.tl=null,o.tr=null,o.el=null,o.er=null,o.msel=0,o.mser=0}function n(e,t){!function e(t,r,n){n?t.y+=r:t.x+=r,t.children.forEach(function(t){e(t,r,n)})}(e,-function e(t,r){var n=r?t.y:t.x;return t.children.forEach(function(t){n=Math.min(e(t,r),n)}),n}(e,t),t)}r.fromNode=function(e,t){if(!e)return null;var n=[];return e.children.forEach(function(e){n.push(r.fromNode(e,t))}),t?new r(e.height,e.width,e.x,n):new r(e.width,e.height,e.y,n)},e.exports=function(e,t){void 0===t&&(t={});var o=t.isHorizontal;function i(e){0===e.cs?(e.el=e,e.er=e,e.msel=e.mser=0):(e.el=e.c[0].el,e.msel=e.c[0].msel,e.er=e.c[e.cs-1].er,e.mser=e.c[e.cs-1].mser)}function a(e,t,r){for(var n=e.c[t-1],o=n.mod,i=e.c[t],a=i.mod;null!==n&&null!==i;){c(n)>r.low&&(r=r.nxt);var f=o+n.prelim+n.w-(a+i.prelim);f>0&&(a+=f,s(e,t,r.index,f));var h=c(n),p=c(i);h<=p&&null!==(n=l(n))&&(o+=n.mod),h>=p&&null!==(i=u(i))&&(a+=i.mod)}!n&&i?function(e,t,r,n){var o=e.c[0].el;o.tl=r;var i=n-r.mod-e.c[0].msel;o.mod+=i,o.prelim-=i,e.c[0].el=e.c[t].el,e.c[0].msel=e.c[t].msel}(e,t,i,a):n&&!i&&function(e,t,r,n){var o=e.c[t].er;o.tr=r;var i=n-r.mod-e.c[t].mser;o.mod+=i,o.prelim-=i,e.c[t].er=e.c[t-1].er,e.c[t].mser=e.c[t-1].mser}(e,t,n,o)}function s(e,t,r,n){e.c[t].mod+=n,e.c[t].msel+=n,e.c[t].mser+=n,function(e,t,r,n){if(r!==t-1){var o=t-r;e.c[r+1].shift+=n/o,e.c[t].shift-=n/o,e.c[t].change-=n-n/o}}(e,t,r,n)}function u(e){return 0===e.cs?e.tl:e.c[0]}function l(e){return 0===e.cs?e.tr:e.c[e.cs-1]}function c(e){return e.y+e.h}function f(e,t,r){for(;null!==r&&e>=r.low;)r=r.nxt;return{low:e,index:t,nxt:r}}!function e(t,r,n){void 0===n&&(n=0),r?(t.x=n,n+=t.width):(t.y=n,n+=t.height),t.children.forEach(function(t){e(t,r,n)})}(e,o);var h=r.fromNode(e,o);return function e(t){if(0!==t.cs){e(t.c[0]);for(var r=f(c(t.c[0].el),0,null),n=1;n<t.cs;++n){e(t.c[n]);var o=c(t.c[n].er);a(t,n,r),r=f(o,n,r)}!function(e){e.prelim=(e.c[0].prelim+e.c[0].mod+e.c[e.cs-1].mod+e.c[e.cs-1].prelim+e.c[e.cs-1].w)/2-e.w/2}(t),i(t)}else i(t)}(h),function e(t,r){r+=t.mod,t.x=t.prelim+r,function(e){for(var t=0,r=0,n=0;n<e.cs;n++)t+=e.c[n].shift,r+=t+e.c[n].change,e.c[n].mod+=r}(t);for(var n=0;n<t.cs;n++)e(t.c[n],r)}(h,0),function e(t,r,n){n?r.y=t.x:r.x=t.x,t.c.forEach(function(t,o){e(t,r.children[o],n)})}(h,e,o),n(e,o),e}},function(e,t,r){function n(e,t){return(n=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var o=r(11),i=r(121),a=r(17),s=r(6),u=function(e){var t,r;function o(){return e.apply(this,arguments)||this}return r=e,(t=o).prototype=Object.create(r.prototype),t.prototype.constructor=t,n(t,r),o.prototype.execute=function(){return this.rootNode.width=0,a(this.rootNode,this.options,i)},o}(o),l={};e.exports=function(e,t){return t=s.assign({},l,t),new u(e,t).execute()}},function(e,t,r){var n=r(6);var o={isHorizontal:!0,nodeSep:20,nodeSize:20,rankSep:200,subTreeSep:10};e.exports=function(e,t){void 0===t&&(t={}),t=n.assign({},o,t);var r,i=0;var a=function e(t){if(!t)return null;t.width=0,t.depth&&t.depth>i&&(i=t.depth);var r=t.children,n=r.length,o=new function(e,t){void 0===e&&(e=0),void 0===t&&(t=[]);var r=this;r.x=r.y=0,r.leftChild=r.rightChild=null,r.height=0,r.children=t}(t.height,[]);return r.forEach(function(t,r){var i=e(t);o.children.push(i),0===r&&(o.leftChild=i),r===n-1&&(o.rightChild=i)}),o.originNode=t,o.isLeaf=t.isLeaf(),o}(e);return function e(t){if(t.isLeaf||0===t.children.length)t.drawingDepth=i;else{var r=t.children.map(function(t){return e(t)}),n=Math.min.apply(null,r);t.drawingDepth=n-1}return t.drawingDepth}(a),function e(n){n.x=n.drawingDepth*t.rankSep,n.isLeaf?(n.y=0,r&&(n.y=r.y+r.height+t.nodeSep,n.originNode.parent!==r.originNode.parent&&(n.y+=t.subTreeSep)),r=n):(n.children.forEach(function(t){e(t)}),n.y=(n.leftChild.y+n.rightChild.y)/2)}(a),function e(t,r,n){n?(r.x=t.x,r.y=t.y):(r.x=t.y,r.y=t.x),t.children.forEach(function(t,o){e(t,r.children[o],n)})}(a,e,t.isHorizontal),e}},function(e,t,r){function n(e,t){return(n=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var o=r(11),i=r(123),a=r(35),s=r(6),u=["LR","RL","H"],l=u[0],c=function(e){var t,r;function o(){return e.apply(this,arguments)||this}return r=e,(t=o).prototype=Object.create(r.prototype),t.prototype.constructor=t,n(t,r),o.prototype.execute=function(){var e=this.options,t=this.rootNode;e.isHorizontal=!0;var r=e.indent,n=void 0===r?20:r,o=e.dropCap,s=void 0===o||o,c=e.direction,f=void 0===c?l:c,h=e.align;if(f&&-1===u.indexOf(f))throw new TypeError("Invalid direction: "+f);if(f===u[0])i(t,n,s,h);else if(f===u[1])i(t,n,s,h),t.right2left();else if(f===u[2]){var p=a(t,e),d=p.left,y=p.right;i(d,n,s,h),d.right2left(),i(y,n,s,h);var v=d.getBoundingBox();y.translate(v.width,0),t.x=y.x-t.width/2}return t},o}(o),f={};e.exports=function(e,t){return t=s.assign({},f,t),new c(e,t).execute()}},function(e,t,r){var n=r(6);e.exports=function(e,t,r,o){var i=null;e.eachNode(function(e){!function(e,t,r,o,i){var a="function"==typeof r?r(e):r*e.depth;if(!o)try{if(e.id===e.parent.children[0].id)return e.x+=a,void(e.y=t?t.y:0)}catch(e){}if(e.x+=a,t){if(e.y=t.y+n.getHeight(t,e,i),t.parent&&e.parent.id!==t.parent.id){var s=t.parent,u=s.y+n.getHeight(s,e,i);e.y=u>e.y?u:e.y}}else e.y=0}(e,i,t,r,o),i=e})}},function(e,t,r){function n(e,t){return(n=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var o=r(11),i=r(125),a=r(17),s=r(6),u=function(e){var t,r;function o(){return e.apply(this,arguments)||this}return r=e,(t=o).prototype=Object.create(r.prototype),t.prototype.constructor=t,n(t,r),o.prototype.execute=function(){return a(this.rootNode,this.options,i)},o}(o),l={};e.exports=function(e,t){return t=s.assign({},l,t),new u(e,t).execute()}},function(e,t,r){var n=r(6);var o={getSubTreeSep:function(){return 0}};e.exports=function(e,t){void 0===t&&(t={}),t=n.assign({},o,t),e.parent={x:0,width:0,height:0,y:0},e.BFTraverse(function(e){e.x=e.parent.x+e.parent.width}),e.parent=null,function e(t,r){var n=0;return t.children.length?t.children.forEach(function(t){n+=e(t,r)}):n=t.height,t._subTreeSep=r.getSubTreeSep(t.data),t.totalHeight=Math.max(t.height,n)+2*t._subTreeSep,t.totalHeight}(e,t),e.startY=0,e.y=e.totalHeight/2-e.height/2,e.eachNode(function(e){var t=e.children,r=t.length;if(r){var n=t[0];if(n.startY=e.startY+e._subTreeSep,1===r)n.y=e.y+e.height/2-n.height/2;else{n.y=n.startY+n.totalHeight/2-n.height/2;for(var o=1;o<r;o++){var i=t[o];i.startY=t[o-1].startY+t[o-1].totalHeight,i.y=i.startY+i.totalHeight/2-i.height/2}}}}),function e(t){var r=t.children,n=r.length;if(n){r.forEach(function(t){e(t)});var o=r[0],i=r[n-1],a=i.y-o.y+i.height,s=0;if(r.forEach(function(e){s+=e.totalHeight}),a>t.height)t.y=o.y+a/2-t.height/2;else if(1!==r.length||t.height>s){var u=t.y+(t.height-a)/2-o.y;r.forEach(function(e){e.translate(0,u)})}else t.y=(o.y+o.height/2+i.y+i.height/2)/2-t.height/2}}(e)}}])},"object"===s(t)&&"object"===s(e)?e.exports=a():(o=[],void 0===(i="function"==typeof(n=a)?n.apply(t,o):n)||(e.exports=i))},16038:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&("get"in o?t.__esModule:!o.writable&&!o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.getLayoutByName=t.unRegisterLayout=t.registerLayout=void 0;var i=r(52235);Object.defineProperty(t,"registerLayout",{enumerable:!0,get:function(){return i.registerLayout}}),Object.defineProperty(t,"unRegisterLayout",{enumerable:!0,get:function(){return i.unRegisterLayout}}),Object.defineProperty(t,"getLayoutByName",{enumerable:!0,get:function(){return i.getLayoutByName}}),o(r(71812),t)},9284:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Base=void 0;var r=function(){function e(){this.nodes=[],this.edges=[],this.combos=[],this.comboEdges=[],this.hiddenNodes=[],this.hiddenEdges=[],this.hiddenCombos=[],this.vedges=[],this.positions=[],this.destroyed=!1,this.onLayoutEnd=function(){}}return e.prototype.layout=function(e){return this.init(e),this.execute(!0)},e.prototype.init=function(e){this.nodes=e.nodes||[],this.edges=e.edges||[],this.combos=e.combos||[],this.comboEdges=e.comboEdges||[],this.hiddenNodes=e.hiddenNodes||[],this.hiddenEdges=e.hiddenEdges||[],this.hiddenCombos=e.hiddenCombos||[],this.vedges=e.vedges||[]},e.prototype.execute=function(e){},e.prototype.executeWithWorker=function(){},e.prototype.getDefaultCfg=function(){return{}},e.prototype.updateCfg=function(e){e&&Object.assign(this,e)},e.prototype.getType=function(){return"base"},e.prototype.destroy=function(){this.nodes=null,this.edges=null,this.combos=null,this.positions=null,this.destroyed=!0},e}();t.Base=r},64933:function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.CircularLayout=void 0;var i=r(9284),a=r(58652);function s(e,t){var r=e.degree,n=t.degree;return r<n?-1:r>n?1:0}var u=function(e){function t(t){var r=e.call(this)||this;return r.radius=null,r.nodeSize=void 0,r.startRadius=null,r.endRadius=null,r.startAngle=0,r.endAngle=2*Math.PI,r.clockwise=!0,r.divisions=1,r.ordering=null,r.angleRatio=1,r.nodes=[],r.edges=[],r.nodeMap={},r.degrees=[],r.width=300,r.height=300,r.updateCfg(t),r}return o(t,e),t.prototype.getDefaultCfg=function(){return{radius:null,startRadius:null,endRadius:null,startAngle:0,endAngle:2*Math.PI,clockwise:!0,divisions:1,ordering:null,angleRatio:1}},t.prototype.execute=function(){var e,t=this.nodes,r=this.edges,n=t.length;if(0!==n){this.width||"undefined"==typeof window||(this.width=window.innerWidth),this.height||"undefined"==typeof window||(this.height=window.innerHeight),this.center||(this.center=[this.width/2,this.height/2]);var o=this.center;if(1===n)return t[0].x=o[0],t[0].y=o[1],void(this.onLayoutEnd&&this.onLayoutEnd());var i=this.radius,s=this.startRadius,u=this.endRadius,l=this.divisions,c=this.startAngle,f=this.endAngle,h=this.angleRatio,p=this.ordering,d=this.clockwise,y=this.nodeSpacing,v=this.nodeSize,g=(f-c)/n,m={};t.forEach(function(e,t){m[e.id]=t}),this.nodeMap=m;var b=(0,a.getDegree)(t.length,m,r);if(this.degrees=b,y){var w=(0,a.getFuncByUnknownType)(10,y),_=(0,a.getFuncByUnknownType)(10,v),x=-1/0;t.forEach(function(e){var t=_(e);x<t&&(x=t)});var S=0;t.forEach(function(e,t){S+=0===t?x||10:(w(e)||0)+(x||10)}),i=S/(2*Math.PI)}else i||s||u?!s&&u?s=u:s&&!u&&(u=s):i=this.height>this.width?this.width/2:this.height/2;var O=g*h,P=[];P="topology"===p?this.topologyOrdering():"topology-directed"===p?this.topologyOrdering(!0):"degree"===p?this.degreeOrdering():t;for(var E=Math.ceil(n/l),k=0;k<n;++k){var M=i;M||null===s||null===u||(M=s+k*(u-s)/(n-1)),M||(M=10+100*k/(n-1));var C=c+k%E*O+2*Math.PI/l*Math.floor(k/E);d||(C=f-k%E*O-2*Math.PI/l*Math.floor(k/E)),P[k].x=o[0]+Math.cos(C)*M,P[k].y=o[1]+Math.sin(C)*M,P[k].weight=b[k].all}return null===(e=this.onLayoutEnd)||void 0===e||e.call(this),{nodes:P,edges:this.edges}}this.onLayoutEnd&&this.onLayoutEnd()},t.prototype.topologyOrdering=function(e){void 0===e&&(e=!1);var t=this.degrees,r=this.edges,n=this.nodes,o=(0,a.clone)(n),i=this.nodeMap,s=[o[0]],u=[n[0]],l=[],c=n.length;l[0]=!0,function(e,t,r,n){e.forEach(function(t,r){e[r].children=[],e[r].parent=[]}),n?t.forEach(function(t){var n=(0,a.getEdgeTerminal)(t,"source"),o=(0,a.getEdgeTerminal)(t,"target"),i=0;n&&(i=r[n]);var s=0;o&&(s=r[o]);var u=e[i].children,l=e[s].parent;u.push(e[s].id),l.push(e[i].id)}):t.forEach(function(t){var n=(0,a.getEdgeTerminal)(t,"source"),o=(0,a.getEdgeTerminal)(t,"target"),i=0;n&&(i=r[n]);var s=0;o&&(s=r[o]);var u=e[i].children,l=e[s].children;u.push(e[s].id),l.push(e[i].id)})}(o,r,i,e);var f=0;return o.forEach(function(e,h){if(0!==h)if(h!==c-1&&t[h].all===t[h+1].all&&!function(e,t,r){for(var n=r.length,o=0;o<n;o++){var i=(0,a.getEdgeTerminal)(r[o],"source"),s=(0,a.getEdgeTerminal)(r[o],"target");if(e.id===i&&t.id===s||t.id===i&&e.id===s)return!0}return!1}(s[f],e,r)||l[h]){for(var p=s[f].children,d=!1,y=0;y<p.length;y++){var v=i[p[y]];if(t[v].all===t[h].all&&!l[v]){s.push(o[v]),u.push(n[i[o[v].id]]),l[v]=!0,d=!0;break}}for(var g=0;!d&&(l[g]||(s.push(o[g]),u.push(n[i[o[g].id]]),l[g]=!0,d=!0),++g!==c););}else s.push(e),u.push(n[i[e.id]]),l[h]=!0,f++}),u},t.prototype.degreeOrdering=function(){var e=this.nodes,t=[],r=this.degrees;return e.forEach(function(e,n){e.degree=r[n].all,t.push(e)}),t.sort(s),t},t.prototype.getType=function(){return"circular"},t}(i.Base);t.CircularLayout=u},99266:function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.ComboCombinedLayout=void 0;var a=r(84587),s=r(9284),u=r(58652),l=r(71812),c=function(e){function t(t){var r=e.call(this)||this;return r.center=[0,0],r.nodes=[],r.edges=[],r.combos=[],r.comboEdges=[],r.comboPadding=10,r.comboTrees=[],r.updateCfg(t),r}return o(t,e),t.prototype.getDefaultCfg=function(){return{}},t.prototype.execute=function(){var e=this.nodes,t=this.center;if(e&&0!==e.length){if(1===e.length)return e[0].x=t[0],e[0].y=t[1],void(this.onLayoutEnd&&this.onLayoutEnd());this.initVals(),this.run(),this.onLayoutEnd&&this.onLayoutEnd()}else this.onLayoutEnd&&this.onLayoutEnd()},t.prototype.run=function(){var e,t=this.nodes,r=this.edges,n=this.combos,o=this.comboEdges,s=this.center,c={};t.forEach(function(e){c[e.id]=e});var f={};n.forEach(function(e){f[e.id]=e});var h=this.getInnerGraphs(c),p=[],d=[],y={},v=!0;this.comboTrees.forEach(function(e){var t=h[e.id],r=i(i({},e),{x:t.x||f[e.id].x,y:t.y||f[e.id].y,fx:t.fx||f[e.id].fx,fy:t.fy||f[e.id].fy,mass:t.mass||f[e.id].mass,size:t.size});d.push(r),isNaN(r.x)||0===r.x||isNaN(r.y)||0===r.y?(r.x=100*Math.random(),r.y=100*Math.random()):v=!1,p.push(e.id),(0,u.traverseTreeUp)(e,function(t){return t.id!==e.id&&(y[t.id]=e.id),!0})}),t.forEach(function(e){if(!e.comboId||!f[e.comboId]){var t=i({},e);d.push(t),isNaN(t.x)||0===t.x||isNaN(t.y)||0===t.y?(t.x=100*Math.random(),t.y=100*Math.random()):v=!1,p.push(e.id)}});var g=[];if(r.concat(o).forEach(function(e){var t=y[e.source]||e.source,r=y[e.target]||e.target;t!==r&&p.includes(t)&&p.includes(r)&&g.push({source:t,target:r})}),null===d||void 0===d?void 0:d.length){if(1===d.length)d[0].x=s[0],d[0].y=s[1];else{var m={nodes:d,edges:g},b=this.outerLayout||new l.GForceLayout({gravity:1,factor:4,linkDistance:function(e,t,r){var n,o,i=(((null===(n=t.size)||void 0===n?void 0:n[0])||30)+((null===(o=r.size)||void 0===o?void 0:o[0])||30))/2;return Math.min(1.5*i,700)}}),w=null===(e=b.getType)||void 0===e?void 0:e.call(b);if(b.updateCfg({center:s,kg:5,preventOverlap:!0,animate:!1}),v&&a.FORCE_LAYOUT_TYPE_MAP[w])(d.length<100?new l.MDSLayout:new l.GridLayout).layout(m);b.layout(m)}d.forEach(function(e){var t=h[e.id];if(t)t.visited=!0,t.x=e.x,t.y=e.y,t.nodes.forEach(function(t){t.x+=e.x,t.y+=e.y});else{var r=c[e.id];r&&(r.x=e.x,r.y=e.y)}})}for(var _=Object.keys(h),x=function(e){var t=_[e],r=h[t];if(!r)return"continue";r.nodes.forEach(function(e){r.visited||(e.x+=r.x||0,e.y+=r.y||0),c[e.id]&&(c[e.id].x=e.x,c[e.id].y=e.y)}),f[t]&&(f[t].x=r.x,f[t].y=r.y)},S=_.length-1;S>=0;S--)x(S);return{nodes:t,edges:r,combos:n,comboEdges:o}},t.prototype.getInnerGraphs=function(e){var t=this.comboTrees,r=this.nodeSize,n=this.edges,o=this.comboPadding,a=this.spacing,s={},c=this.innerLayout||new l.ConcentricLayout({type:"concentric",sortBy:"id"});return c.center=[0,0],c.preventOverlap=!0,c.nodeSpacing=a,(t||[]).forEach(function(t){(0,u.traverseTreeUp)(t,function(t){var a,l=(null===o||void 0===o?void 0:o(t))||10;if((0,u.isArray)(l)&&(l=Math.max.apply(Math,l)),null===(a=t.children)||void 0===a?void 0:a.length){var f=t.children.map(function(t){if("combo"===t.itemType)return s[t.id];var r=e[t.id]||{};return i(i({},r),t)}),h=f.map(function(e){return e.id}),p={nodes:f,edges:n.filter(function(e){return h.includes(e.source)&&h.includes(e.target)})},d=1/0;f.forEach(function(e){var t;e.size||(e.size=(null===(t=s[e.id])||void 0===t?void 0:t.size)||(null===r||void 0===r?void 0:r(e))||[30,30]),(0,u.isNumber)(e.size)&&(e.size=[e.size,e.size]),d>e.size[0]&&(d=e.size[0]),d>e.size[1]&&(d=e.size[1])}),c.layout(p);var y=(0,u.getLayoutBBox)(f),v=y.minX,g=y.minY,m=y.maxX,b=y.maxY,w={x:(m+v)/2,y:(b+g)/2};p.nodes.forEach(function(e){e.x-=w.x,e.y-=w.y});var _=Math.max(m-v,d)+2*l,x=Math.max(b-g,d)+2*l;s[t.id]={id:t.id,nodes:f,size:[_,x]}}else if("combo"===t.itemType){var S=l?[2*l,2*l]:[30,30];s[t.id]={id:t.id,nodes:[],size:S}}return!0})}),s},t.prototype.initVals=function(){var e,t,r=this.nodeSize,n=this.spacing;if(t=(0,u.isNumber)(n)?function(){return n}:(0,u.isFunction)(n)?n:function(){return 0},this.spacing=t,r)if((0,u.isFunction)(r))e=function(e){var n=r(e),o=t(e);return(0,u.isArray)(e.size)?((e.size[0]>e.size[1]?e.size[0]:e.size[1])+o)/2:((n||10)+o)/2};else if((0,u.isArray)(r)){var o=(r[0]>r[1]?r[0]:r[1])/2;e=function(e){return o+t(e)/2}}else{var i=r/2;e=function(e){return i+t(e)/2}}else e=function(e){var r=t(e);return e.size?(0,u.isArray)(e.size)?((e.size[0]>e.size[1]?e.size[0]:e.size[1])+r)/2:(0,u.isObject)(e.size)?((e.size.width>e.size.height?e.size.width:e.size.height)+r)/2:(e.size+r)/2:10+r/2};this.nodeSize=e;var a,s=this.comboPadding;a=(0,u.isNumber)(s)?function(){return s}:(0,u.isArray)(s)?function(){return Math.max.apply(null,s)}:(0,u.isFunction)(s)?s:function(){return 0},this.comboPadding=a},t.prototype.getType=function(){return"comboCombined"},t}(s.Base);t.ComboCombinedLayout=c},65428:function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.ComboForceLayout=void 0;var i=r(9284),a=r(58652),s=function(e){function t(t){var r=e.call(this)||this;return r.center=[0,0],r.maxIteration=100,r.gravity=10,r.comboGravity=10,r.linkDistance=10,r.alpha=1,r.alphaMin=.001,r.alphaDecay=1-Math.pow(r.alphaMin,1/300),r.alphaTarget=0,r.velocityDecay=.6,r.edgeStrength=.6,r.nodeStrength=30,r.preventOverlap=!1,r.preventNodeOverlap=!1,r.preventComboOverlap=!1,r.collideStrength=void 0,r.nodeCollideStrength=.5,r.comboCollideStrength=.5,r.comboSpacing=20,r.comboPadding=10,r.optimizeRangeFactor=1,r.onTick=function(){},r.onLayoutEnd=function(){},r.depthAttractiveForceScale=1,r.depthRepulsiveForceScale=2,r.nodes=[],r.edges=[],r.combos=[],r.comboTrees=[],r.width=300,r.height=300,r.bias=[],r.nodeMap={},r.oriComboMap={},r.indexMap={},r.comboMap={},r.previousLayouted=!1,r.updateCfg(t),r}return o(t,e),t.prototype.getDefaultCfg=function(){return{maxIteration:100,center:[0,0],gravity:10,speed:1,comboGravity:30,preventOverlap:!1,preventComboOverlap:!0,preventNodeOverlap:!0,nodeSpacing:void 0,collideStrength:void 0,nodeCollideStrength:.5,comboCollideStrength:.5,comboSpacing:20,comboPadding:10,edgeStrength:.6,nodeStrength:30,linkDistance:10}},t.prototype.execute=function(){var e=this.nodes,t=this.center;if(this.comboTree={id:"comboTreeRoot",depth:-1,children:this.comboTrees},e&&0!==e.length){if(1===e.length)return e[0].x=t[0],e[0].y=t[1],void(this.onLayoutEnd&&this.onLayoutEnd());this.initVals(),this.run(),this.onLayoutEnd&&this.onLayoutEnd()}else this.onLayoutEnd&&this.onLayoutEnd()},t.prototype.run=function(){var e=this,t=e.nodes,r=e.previousLayouted?e.maxIteration/5:e.maxIteration;e.width||"undefined"==typeof window||(e.width=window.innerWidth),e.height||"undefined"==typeof window||(e.height=window.innerHeight);var n=e.center,o=e.velocityDecay,i=e.comboMap;e.previousLayouted||e.initPos(i);for(var s=function(r){var n=[];t.forEach(function(e,t){n[t]={x:0,y:0}}),e.applyCalculate(n),e.applyComboCenterForce(n),t.forEach(function(e,t){(0,a.isNumber)(e.x)&&(0,a.isNumber)(e.y)&&(e.x+=n[t].x*o,e.y+=n[t].y*o)}),e.alpha+=(e.alphaTarget-e.alpha)*e.alphaDecay,e.onTick()},u=0;u<r;u++)s();var l=[0,0];t.forEach(function(e){(0,a.isNumber)(e.x)&&(0,a.isNumber)(e.y)&&(l[0]+=e.x,l[1]+=e.y)}),l[0]/=t.length,l[1]/=t.length;var c=[n[0]-l[0],n[1]-l[1]];t.forEach(function(e,t){(0,a.isNumber)(e.x)&&(0,a.isNumber)(e.y)&&(e.x+=c[0],e.y+=c[1])}),e.combos.forEach(function(e){var t=i[e.id];t&&t.empty&&(e.x=t.cx||e.x,e.y=t.cy||e.y)}),e.previousLayouted=!0},t.prototype.initVals=function(){var e=this.edges,t=this.nodes,r=this.combos,n={},o={},i={};t.forEach(function(e,t){o[e.id]=e,i[e.id]=t}),this.nodeMap=o,this.indexMap=i;var s={};r.forEach(function(e){s[e.id]=e}),this.oriComboMap=s,this.comboMap=this.getComboMap();var u=this.preventOverlap;this.preventComboOverlap=this.preventComboOverlap||u,this.preventNodeOverlap=this.preventNodeOverlap||u;var l=this.collideStrength;l&&(this.comboCollideStrength=l,this.nodeCollideStrength=l),this.comboCollideStrength=this.comboCollideStrength?this.comboCollideStrength:0,this.nodeCollideStrength=this.nodeCollideStrength?this.nodeCollideStrength:0;for(var c=0;c<e.length;++c){var f=(0,a.getEdgeTerminal)(e[c],"source"),h=(0,a.getEdgeTerminal)(e[c],"target");n[f]?n[f]++:n[f]=1,n[h]?n[h]++:n[h]=1}var p=[];for(c=0;c<e.length;++c){f=(0,a.getEdgeTerminal)(e[c],"source"),h=(0,a.getEdgeTerminal)(e[c],"target");p[c]=n[f]/(n[f]+n[h])}this.bias=p;var d,y,v=this.nodeSize,g=this.nodeSpacing;if(y=(0,a.isNumber)(g)?function(){return g}:(0,a.isFunction)(g)?g:function(){return 0},this.nodeSpacing=y,v)if((0,a.isFunction)(v))d=function(e){return v(e)};else if((0,a.isArray)(v)){var m=(v[0]>v[1]?v[0]:v[1])/2;d=function(e){return m}}else{var b=v/2;d=function(e){return b}}else d=function(e){return e.size?(0,a.isArray)(e.size)?(e.size[0]>e.size[1]?e.size[0]:e.size[1])/2:(0,a.isObject)(e.size)?(e.size.width>e.size.height?e.size.width:e.size.height)/2:e.size/2:10};this.nodeSize=d;var w,_=this.comboSpacing;w=(0,a.isNumber)(_)?function(){return _}:(0,a.isFunction)(_)?_:function(){return 0},this.comboSpacing=w;var x,S=this.comboPadding;x=(0,a.isNumber)(S)?function(){return S}:(0,a.isArray)(S)?function(){return Math.max.apply(null,S)}:(0,a.isFunction)(S)?S:function(){return 0},this.comboPadding=x;var O,P=this.linkDistance;P||(P=10),O=(0,a.isNumber)(P)?function(e){return P}:P,this.linkDistance=O;var E,k=this.edgeStrength;k||(k=1),E=(0,a.isNumber)(k)?function(e){return k}:k,this.edgeStrength=E;var M,C=this.nodeStrength;C||(C=30),M=(0,a.isNumber)(C)?function(e){return C}:C,this.nodeStrength=M},t.prototype.initPos=function(e){this.nodes.forEach(function(t,r){var n=t.comboId,o=e[n];n&&o?(t.x=o.cx+100/(r+1),t.y=o.cy+100/(r+1)):(t.x=100/(r+1),t.y=100/(r+1))})},t.prototype.getComboMap=function(){var e=this,t=e.nodeMap,r=e.comboTrees,n=e.oriComboMap,o={};return(r||[]).forEach(function(r){var i=[];(0,a.traverseTreeUp)(r,function(r){if("node"===r.itemType)return!0;if(!n[r.id])return!0;if(void 0===o[r.id]){var s={id:r.id,name:r.id,cx:0,cy:0,count:0,depth:e.oriComboMap[r.id].depth||0,children:[]};o[r.id]=s}var u=r.children;u&&u.forEach(function(e){if(!o[e.id]&&!t[e.id])return!0;i.push(e)});var l=o[r.id];if(l.cx=0,l.cy=0,0===i.length){l.empty=!0;var c=n[r.id];l.cx=c.x,l.cy=c.y}return i.forEach(function(e){if(l.count++,"node"!==e.itemType){var r=o[e.id];return(0,a.isNumber)(r.cx)&&(l.cx+=r.cx),void((0,a.isNumber)(r.cy)&&(l.cy+=r.cy))}var n=t[e.id];n&&((0,a.isNumber)(n.x)&&(l.cx+=n.x),(0,a.isNumber)(n.y)&&(l.cy+=n.y))}),l.cx/=l.count||1,l.cy/=l.count||1,l.children=i,!0})}),o},t.prototype.applyComboCenterForce=function(e){var t=this.gravity,r=this.comboGravity||t,n=this.alpha,o=this.comboTrees,i=this.indexMap,s=this.nodeMap,u=this.comboMap;(o||[]).forEach(function(t){(0,a.traverseTreeUp)(t,function(t){if("node"===t.itemType)return!0;if(!u[t.id])return!0;var o=u[t.id],l=(o.depth+1)/10*.5,c=o.cx,f=o.cy;return o.cx=0,o.cy=0,o.children.forEach(function(t){if("node"!==t.itemType){var h=u[t.id];return h&&(0,a.isNumber)(h.cx)&&(o.cx+=h.cx),void(h&&(0,a.isNumber)(h.cy)&&(o.cy+=h.cy))}var p=s[t.id],d=p.x-c||.005,y=p.y-f||.005,v=Math.sqrt(d*d+y*y),g=i[p.id],m=r*n/v*l;e[g].x-=d*m,e[g].y-=y*m,(0,a.isNumber)(p.x)&&(o.cx+=p.x),(0,a.isNumber)(p.y)&&(o.cy+=p.y)}),o.cx/=o.count||1,o.cy/=o.count||1,!0})})},t.prototype.applyCalculate=function(e){var t=this.comboMap,r=this.nodes,n={};r.forEach(function(e,t){r.forEach(function(r,o){if(!(t<o)){var i=e.x-r.x||.005,a=e.y-r.y||.005,s=i*i+a*a,u=Math.sqrt(s);s<1&&(s=u),n["".concat(e.id,"-").concat(r.id)]={vx:i,vy:a,vl2:s,vl:u},n["".concat(r.id,"-").concat(e.id)]={vl2:s,vl:u,vx:-i,vy:-a}}})}),this.updateComboSizes(t),this.calRepulsive(e,n),this.calAttractive(e,n),this.preventComboOverlap&&this.comboNonOverlapping(e,t)},t.prototype.updateComboSizes=function(e){var t=this,r=t.comboTrees,n=t.nodeMap,o=t.nodeSize,i=t.comboSpacing,s=t.comboPadding;(r||[]).forEach(function(r){var u=[];(0,a.traverseTreeUp)(r,function(r){if("node"===r.itemType)return!0;var l=e[r.id];if(!l)return!1;var c=r.children;c&&c.forEach(function(t){(e[t.id]||n[t.id])&&u.push(t)}),l.minX=1/0,l.minY=1/0,l.maxX=-1/0,l.maxY=-1/0,u.forEach(function(e){if("node"!==e.itemType)return!0;var t=n[e.id];if(!t)return!0;var r=o(t),i=t.x-r,a=t.y-r,s=t.x+r,u=t.y+r;l.minX>i&&(l.minX=i),l.minY>a&&(l.minY=a),l.maxX<s&&(l.maxX=s),l.maxY<u&&(l.maxY=u)});var f=t.oriComboMap[r.id].size||10;(0,a.isArray)(f)&&(f=f[0]);var h=Math.max(l.maxX-l.minX,l.maxY-l.minY,f);return l.r=h/2+i(l)/2+s(l),!0})})},t.prototype.comboNonOverlapping=function(e,t){var r=this.comboTree,n=this.comboCollideStrength,o=this.indexMap,i=this.nodeMap;(0,a.traverseTreeUp)(r,function(r){if(!t[r.id]&&!i[r.id]&&"comboTreeRoot"!==r.id)return!1;var a=r.children;return a&&a.length>1&&a.forEach(function(r,s){if("node"===r.itemType)return!1;var u=t[r.id];u&&a.forEach(function(a,l){if(s<=l)return!1;if("node"===a.itemType)return!1;var c=t[a.id];if(!c)return!1;var f=u.cx-c.cx||.005,h=u.cy-c.cy||.005,p=f*f+h*h,d=u.r||1,y=c.r||1,v=d+y,g=y*y,m=d*d;if(p<v*v){var b=r.children;if(!b||0===b.length)return!1;var w=a.children;if(!w||0===w.length)return!1;var _=Math.sqrt(p),x=(v-_)/_*n,S=f*x,O=h*x,P=g/(m+g),E=1-P;b.forEach(function(t){if("node"!==t.itemType)return!1;if(i[t.id]){var r=o[t.id];w.forEach(function(t){if("node"!==t.itemType)return!1;if(!i[t.id])return!1;var n=o[t.id];e[r].x+=S*P,e[r].y+=O*P,e[n].x-=S*E,e[n].y-=O*E})}})}})}),!0})},t.prototype.calRepulsive=function(e,t){var r=this,n=r.nodes,o=r.width*r.optimizeRangeFactor,i=r.nodeStrength,a=r.alpha,s=r.nodeCollideStrength,u=r.preventNodeOverlap,l=r.nodeSize,c=r.nodeSpacing,f=r.depthRepulsiveForceScale,h=r.center;n.forEach(function(p,d){if(p.x&&p.y){if(h){var y=r.gravity,v=p.x-h[0]||.005,g=p.y-h[1]||.005,m=Math.sqrt(v*v+g*g);e[d].x-=v*y*a/m,e[d].y-=g*y*a/m}n.forEach(function(r,n){if(d!==n&&r.x&&r.y){var h=t["".concat(p.id,"-").concat(r.id)],y=h.vl2,v=h.vl;if(!(v>o)){var g=t["".concat(p.id,"-").concat(r.id)],m=g.vx,b=g.vy,w=Math.log(Math.abs(r.depth-p.depth)/10)+1||1;w=w<1?1:w,r.comboId!==p.comboId&&(w+=1);var _=w?Math.pow(f,w):1,x=i(r)*a/y*_;if(e[d].x+=m*x,e[d].y+=b*x,d<n&&u){var S=l(p)+c(p)||1,O=l(r)+c(r)||1,P=S+O;if(y<P*P){var E=(P-v)/v*s,k=O*O,M=k/(S*S+k),C=m*E,j=b*E;e[d].x+=C*M,e[d].y+=j*M,M=1-M,e[n].x-=C*M,e[n].y-=j*M}}}}})}})},t.prototype.calAttractive=function(e,t){var r=this,n=r.edges,o=r.linkDistance,i=r.alpha,s=r.edgeStrength,u=r.bias,l=r.depthAttractiveForceScale;n.forEach(function(n,c){var f=(0,a.getEdgeTerminal)(n,"source"),h=(0,a.getEdgeTerminal)(n,"target");if(f&&h&&f!==h){var p=r.indexMap[f],d=r.indexMap[h],y=r.nodeMap[f],v=r.nodeMap[h];if(y&&v){var g=y.depth===v.depth?0:Math.log(Math.abs(y.depth-v.depth)/10);y.comboId===v.comboId&&(g/=2);var m=g?Math.pow(l,g):1;if(y.comboId!==v.comboId&&1===m?m=l/2:y.comboId===v.comboId&&(m=2),(0,a.isNumber)(v.x)&&(0,a.isNumber)(y.x)&&(0,a.isNumber)(v.y)&&(0,a.isNumber)(y.y)){var b=t["".concat(h,"-").concat(f)],w=b.vl,_=b.vx,x=b.vy,S=(w-o(n))/w*i*s(n)*m,O=_*S,P=x*S,E=u[c];e[d].x-=O*E,e[d].y-=P*E,e[p].x+=O*(1-E),e[p].y+=P*(1-E)}}}})},t.prototype.getType=function(){return"comboForce"},t}(i.Base);t.ComboForceLayout=s},57940:function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.ConcentricLayout=void 0;var i=r(58652),a=function(e){function t(t){var r=e.call(this)||this;return r.nodeSize=30,r.minNodeSpacing=10,r.nodeSpacing=10,r.preventOverlap=!1,r.equidistant=!1,r.startAngle=1.5*Math.PI,r.clockwise=!0,r.sortBy="degree",r.nodes=[],r.edges=[],r.width=300,r.height=300,r.onLayoutEnd=function(){},r.updateCfg(t),r}return o(t,e),t.prototype.getDefaultCfg=function(){return{nodeSize:30,minNodeSpacing:10,nodeSpacing:10,preventOverlap:!1,sweep:void 0,equidistant:!1,startAngle:1.5*Math.PI,clockwise:!0,maxLevelDiff:void 0,sortBy:"degree"}},t.prototype.execute=function(){var e,t,r=this,n=r.nodes,o=r.edges,a=n.length;if(0!==a){r.width||"undefined"==typeof window||(r.width=window.innerWidth),r.height||"undefined"==typeof window||(r.height=window.innerHeight),r.center||(r.center=[r.width/2,r.height/2]);var s=r.center;if(1===a)return n[0].x=s[0],n[0].y=s[1],void(null===(t=r.onLayoutEnd)||void 0===t||t.call(r));var u,l=r.nodeSize,c=r.nodeSpacing,f=[],h=0;u=(0,i.isArray)(l)?Math.max(l[0],l[1]):l,(0,i.isArray)(c)?h=Math.max(c[0],c[1]):(0,i.isNumber)(c)&&(h=c),n.forEach(function(e){f.push(e);var t=u;(0,i.isArray)(e.size)?t=Math.max(e.size[0],e.size[1]):(0,i.isNumber)(e.size)?t=e.size:(0,i.isObject)(e.size)&&(t=Math.max(e.size.width,e.size.height)),u=Math.max(u,t),(0,i.isFunction)(c)&&(h=Math.max(c(e),h))}),r.clockwise=void 0!==r.counterclockwise?!r.counterclockwise:r.clockwise;var p={},d={};if(f.forEach(function(e,t){p[e.id]=e,d[e.id]=t}),!("degree"!==r.sortBy&&(0,i.isString)(r.sortBy)&&void 0!==f[0][r.sortBy]||(r.sortBy="degree",(0,i.isNumber)(n[0].degree)))){var y=(0,i.getDegree)(n.length,d,o);f.forEach(function(e,t){e.degree=y[t].all})}f.sort(function(e,t){return t[r.sortBy]-e[r.sortBy]}),r.maxValueNode=f[0],r.maxLevelDiff=r.maxLevelDiff||r.maxValueNode[r.sortBy]/4;var v=[[]],g=v[0];f.forEach(function(e){if(g.length>0){var t=Math.abs(g[0][r.sortBy]-e[r.sortBy]);r.maxLevelDiff&&t>=r.maxLevelDiff&&(g=[],v.push(g))}g.push(e)});var m=u+(h||r.minNodeSpacing);if(!r.preventOverlap){var b=v.length>0&&v[0].length>1,w=(Math.min(r.width,r.height)/2-m)/(v.length+(b?1:0));m=Math.min(m,w)}var _=0;if(v.forEach(function(e){var t=r.sweep;void 0===t&&(t=2*Math.PI-2*Math.PI/e.length);var n=e.dTheta=t/Math.max(1,e.length-1);if(e.length>1&&r.preventOverlap){var o=Math.cos(n)-Math.cos(0),i=Math.sin(n)-Math.sin(0),a=Math.sqrt(m*m/(o*o+i*i));_=Math.max(a,_)}e.r=_,_+=m}),r.equidistant){for(var x=0,S=0,O=0;O<v.length;O++){var P=v[O].r-S;x=Math.max(x,P)}S=0,v.forEach(function(e,t){0===t&&(S=e.r),e.r=S,S+=x})}return v.forEach(function(e){var t=e.dTheta,n=e.r;e.forEach(function(e,o){var i=r.startAngle+(r.clockwise?1:-1)*t*o;e.x=s[0]+n*Math.cos(i),e.y=s[1]+n*Math.sin(i)})}),r.onLayoutEnd&&r.onLayoutEnd(),{nodes:n,edges:o}}null===(e=r.onLayoutEnd)||void 0===e||e.call(r)},t.prototype.getType=function(){return"concentric"},t}(r(9284).Base);t.ConcentricLayout=a},84587:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FORCE_LAYOUT_TYPE_MAP=t.LAYOUT_MESSAGE=void 0,t.LAYOUT_MESSAGE={RUN:"LAYOUT_RUN",END:"LAYOUT_END",ERROR:"LAYOUT_ERROR",TICK:"LAYOUT_TICK",GPURUN:"GPU_LAYOUT_RUN",GPUEND:"GPU_LAYOUT_END"},t.FORCE_LAYOUT_TYPE_MAP={gForce:!0,force2:!0,fruchterman:!0,forceAtlas2:!0,force:!0,"graphin-force":!0}},10813:function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.DagreLayout=void 0;var a=i(r(46269)),s=r(58652),u=r(9284),l=r(95317),c=function(e){function t(t){var r=e.call(this)||this;return r.rankdir="TB",r.nodesep=50,r.ranksep=50,r.controlPoints=!1,r.sortByCombo=!1,r.edgeLabelSpace=!0,r.radial=!1,r.nodes=[],r.edges=[],r.onLayoutEnd=function(){},r.layoutNode=function(e){var t=r.nodes.find(function(t){return t.id===e});return!t||!1!==t.layout},r.updateCfg(t),r}return o(t,e),t.prototype.getDefaultCfg=function(){return{rankdir:"TB",align:void 0,nodeSize:void 0,nodesepFunc:void 0,ranksepFunc:void 0,nodesep:50,ranksep:50,controlPoints:!1,radial:!1,focusNode:null}},t.prototype.execute=function(){var e,t,r,n,o=this,i=this,u=i.nodes,c=i.nodeSize,h=i.rankdir,p=i.combos,d=i.begin,y=i.radial,v=i.comboEdges,g=void 0===v?[]:v,m=i.vedges,b=void 0===m?[]:m;if(u){var w=i.edges||[],_=new l.Graph({multigraph:!0,compound:!0});i.nodeMap={};var x={};u.forEach(function(e){i.nodeMap[e.id]=e,e.comboId&&(x[e.comboId]=x[e.comboId]||[],x[e.comboId].push(e.id))});var S,O=[],P={};(null===(e=i.nodeOrder)||void 0===e?void 0:e.length)?(i.nodeOrder.forEach(function(e){P[e]=!0,O.push(i.nodeMap[e])}),u.forEach(function(e){P[e.id]||O.push(e)})):O=u,S=c?(0,s.isArray)(c)?function(){return c}:function(){return[c,c]}:function(e){return e.size?(0,s.isArray)(e.size)?e.size:(0,s.isObject)(e.size)?[e.size.width||40,e.size.height||40]:[e.size,e.size]:[40,40]};var E=(0,s.getFunc)(i.ranksep,50,i.ranksepFunc),k=(0,s.getFunc)(i.nodesep,50,i.nodesepFunc),M=k,C=E;"LR"!==h&&"RL"!==h||(M=E,C=k),_.setDefaultEdgeLabel(function(){return{}}),_.setGraph(i);var j={};this.sortByCombo&&p&&p.forEach(function(e){if(j[e.id]=e,e.collapsed){var t=S(e),r=C(e),n=M(e),o=t[0]+2*n,i=t[1]+2*r;_.setNode(e.id,{width:o,height:i})}e.parentId&&(j[e.parentId]||_.setNode(e.parentId,{}),_.setParent(e.id,e.parentId))}),O.filter(function(e){return!1!==e.layout}).forEach(function(e){var t=S(e),r=C(e),n=M(e),i=t[0]+2*n,a=t[1]+2*r,u=e.layer;(0,s.isNumber)(u)?_.setNode(e.id,{width:i,height:a,layer:u}):_.setNode(e.id,{width:i,height:a}),o.sortByCombo&&e.comboId&&(j[e.comboId]||(j[e.comboId]={id:e.comboId},_.setNode(e.comboId,{})),_.setParent(e.id,e.comboId))}),w.forEach(function(e){var t=(0,s.getEdgeTerminal)(e,"source"),r=(0,s.getEdgeTerminal)(e,"target");o.layoutNode(t)&&o.layoutNode(r)&&_.setEdge(t,r,{weight:e.weight||1})}),null===(t=null===g||void 0===g?void 0:g.concat(b||[]))||void 0===t||t.forEach(function(e){var t,r,n=e.source,o=e.target,i=(null===(t=j[n])||void 0===t?void 0:t.collapsed)?[n]:x[n]||[n],a=(null===(r=j[o])||void 0===r?void 0:r.collapsed)?[o]:x[o]||[o];i.forEach(function(t){a.forEach(function(r){_.setEdge(t,r,{weight:e.weight||1})})})});var T=void 0;(null===(r=i.preset)||void 0===r?void 0:r.nodes)&&(T=new l.Graph({multigraph:!0,compound:!0}),i.preset.nodes.forEach(function(e){null===T||void 0===T||T.setNode(e.id,e)})),a.default.layout(_,{prevGraph:T,edgeLabelSpace:i.edgeLabelSpace,keepNodeOrder:Boolean(!!i.nodeOrder),nodeOrder:i.nodeOrder});var A=[0,0];if(d){var I=1/0,R=1/0;_.nodes().forEach(function(e){var t=_.node(e);I>t.x&&(I=t.x),R>t.y&&(R=t.y)}),_.edges().forEach(function(e){var t;null===(t=_.edge(e).points)||void 0===t||t.forEach(function(e){I>e.x&&(I=e.x),R>e.y&&(R=e.y)})}),A[0]=d[0]-I,A[1]=d[1]-R}var L="LR"===h||"RL"===h;if(y){var N=this.focusNode,D=this.ranksep,B=this.getRadialPos,F=(0,s.isString)(N)?N:null===N||void 0===N?void 0:N.id,G=F?null===(n=_.node(F))||void 0===n?void 0:n._rank:0,z=[],U=L?"y":"x",V=L?"height":"width",W=1/0,Y=-1/0;_.nodes().forEach(function(e){var t=_.node(e);if(i.nodeMap[e]){var r=k(i.nodeMap[e]);if(0===G)z[t._rank]||(z[t._rank]={nodes:[],totalWidth:0,maxSize:-1/0}),z[t._rank].nodes.push(e),z[t._rank].totalWidth+=2*r+t[V],z[t._rank].maxSize<Math.max(t.width,t.height)&&(z[t._rank].maxSize=Math.max(t.width,t.height));else{var n=t._rank-G;if(0===n)z[n]||(z[n]={nodes:[],totalWidth:0,maxSize:-1/0}),z[n].nodes.push(e),z[n].totalWidth+=2*r+t[V],z[n].maxSize<Math.max(t.width,t.height)&&(z[n].maxSize=Math.max(t.width,t.height));else{var o=Math.abs(n);z[o]||(z[o]={left:[],right:[],totalWidth:0,maxSize:-1/0}),z[o].totalWidth+=2*r+t[V],z[o].maxSize<Math.max(t.width,t.height)&&(z[o].maxSize=Math.max(t.width,t.height)),n<0?z[o].left.push(e):z[o].right.push(e)}}var a=t[U]-t[V]/2-r,s=t[U]+t[V]/2+r;a<W&&(W=a),s>Y&&(Y=s)}});var H=D||50,X={},q=(Y-W)/.9,J=[.5*(W+Y-q),.5*(W+Y+q)],Z=function(e,t,r,n){void 0===r&&(r=-1/0),void 0===n&&(n=[0,1]);var o=r;return e.forEach(function(e){var r=_.node(e);X[e]=t;var a=B(r[U],J,q,t,n),s=a.x,u=a.y;if(i.nodeMap[e]){i.nodeMap[e].x=s+A[0],i.nodeMap[e].y=u+A[1],i.nodeMap[e]._order=r._order;var l=E(i.nodeMap[e]);o<l&&(o=l)}}),o},K=!0;z.forEach(function(e){var t,r,n,o,a,s,u;if((null===(t=null===e||void 0===e?void 0:e.nodes)||void 0===t?void 0:t.length)||(null===(r=null===e||void 0===e?void 0:e.left)||void 0===r?void 0:r.length)||(null===(n=null===e||void 0===e?void 0:e.right)||void 0===n?void 0:n.length)){if(K&&1===e.nodes.length){var l=e.nodes[0];if(!i.nodeMap[l])return;return i.nodeMap[l].x=A[0],i.nodeMap[l].y=A[1],X[e.nodes[0]]=0,H=E(i.nodeMap[l]),void(K=!1)}H=Math.max(H,e.totalWidth/(2*Math.PI));var c=-1/0;if(0===G||(null===(o=e.nodes)||void 0===o?void 0:o.length))c=Z(e.nodes,H,c,[0,1]);else{var f=(null===(a=e.left)||void 0===a?void 0:a.length)/((null===(s=e.left)||void 0===s?void 0:s.length)+(null===(u=e.right)||void 0===u?void 0:u.length));c=Z(e.left,H,c,[0,f]),c=Z(e.right,H,c,[f+.05,1])}H+=c,K=!1,e.maxSize}}),_.edges().forEach(function(e){var t,r,n,o=_.edge(e),a=w.findIndex(function(t){var r=(0,s.getEdgeTerminal)(t,"source"),n=(0,s.getEdgeTerminal)(t,"target");return r===e.v&&n===e.w});if(!(a<=-1)&&i.edgeLabelSpace&&i.controlPoints&&"loop"!==w[a].type){var u="x"===U?"y":"x",l=null===(t=null===o||void 0===o?void 0:o.points)||void 0===t?void 0:t.slice(1,o.points.length-1),c=[],f=null===(r=_.node(e.v))||void 0===r?void 0:r[u],h=f-(null===(n=_.node(e.w))||void 0===n?void 0:n[u]),p=X[e.v],d=p-X[e.w];null===l||void 0===l||l.forEach(function(e){var t=(e[u]-f)/h*d+p,r=B(e[U],J,q,t);c.push({x:r.x+A[0],y:r.y+A[1]})}),w[a].controlPoints=c}})}else{var Q=new Set,$="BT"===h||"RL"===h?function(e,t){return t-e}:function(e,t){return e-t};_.nodes().forEach(function(e){var t=_.node(e);if(t){var r=o.nodeMap[e];r||(r=null===p||void 0===p?void 0:p.find(function(t){return t.id===e})),r&&(r.x=t.x+A[0],r.y=t.y+A[1],r._order=t._order,Q.add(L?r.x:r.y))}});var ee=Array.from(Q).sort($),te=L?function(e,t){return e.x!==t.x}:function(e,t){return e.y!==t.y},re=L?function(e,t,r){var n=Math.max(t.y,r.y),o=Math.min(t.y,r.y);return e.filter(function(e){return e.y<=n&&e.y>=o})}:function(e,t,r){var n=Math.max(t.x,r.x),o=Math.min(t.x,r.x);return e.filter(function(e){return e.x<=n&&e.x>=o})};_.edges().forEach(function(e){var t,r=_.edge(e),n=w.findIndex(function(t){var r=(0,s.getEdgeTerminal)(t,"source"),n=(0,s.getEdgeTerminal)(t,"target");return r===e.v&&n===e.w});if(!(n<=-1)&&i.edgeLabelSpace&&i.controlPoints&&"loop"!==w[n].type){null===(t=null===r||void 0===r?void 0:r.points)||void 0===t||t.forEach(function(e){e.x+=A[0],e.y+=A[1]});var o=i.nodeMap[e.v],a=i.nodeMap[e.w];w[n].controlPoints=f(null===r||void 0===r?void 0:r.points,o,a,ee,L,te,re)}})}return i.onLayoutEnd&&i.onLayoutEnd(),{nodes:u,edges:w}}},t.prototype.getRadialPos=function(e,t,r,n,o){void 0===o&&(o=[0,1]);var i=(e-t[0])/r,a=2*(i=i*(o[1]-o[0])+o[0])*Math.PI;return{x:Math.cos(a)*n,y:Math.sin(a)*n}},t.prototype.getType=function(){return"dagre"},t}(u.Base);t.DagreLayout=c;var f=function(e,t,r,n,o,i,a){var s=(null===e||void 0===e?void 0:e.slice(1,e.length-1))||[];if(t&&r){var u=t.x,l=t.y,c=r.x,f=r.y;if(o&&(u=t.y,l=t.x,c=r.y,f=r.x),f!==l&&u!==c){var h=n.indexOf(l),p=n[h+1];if(p){var d=s[0],y=o?{x:(l+p)/2,y:(null===d||void 0===d?void 0:d.y)||c}:{x:(null===d||void 0===d?void 0:d.x)||c,y:(l+p)/2};d&&!i(d,y)||s.unshift(y)}var v=n.indexOf(f),g=Math.abs(v-h);if(1===g)(s=a(s,t,r)).length||s.push(o?{x:(l+f)/2,y:u}:{x:u,y:(l+f)/2});else if(g>1){var m=n[v-1];if(m){var b=s[s.length-1],w=o?{x:(f+m)/2,y:(null===b||void 0===b?void 0:b.y)||c}:{x:(null===b||void 0===b?void 0:b.x)||u,y:(f+m)/2};b&&!i(b,w)||s.push(w)}}}}return s}},91083:function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},a=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,o=0,i=t.length;o<i;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.DagreCompoundLayout=void 0;var s=r(9284),u=r(94756),l=r(58652),c=function(e){function t(t){var r=e.call(this)||this;return r.rankdir="TB",r.nodesep=50,r.edgesep=5,r.ranksep=50,r.controlPoints=!0,r.anchorPoint=!0,r.nodes=[],r.edges=[],r.combos=[],r.onLayoutEnd=function(){},r.updateCfg(t),r}return o(t,e),t.prototype.getDefaultCfg=function(){return{rankdir:"TB",align:void 0,begin:void 0,nodeSize:void 0,nodesep:50,ranksep:50,controlPoints:!0,anchorPoint:!0}},t.prototype.init=function(e){var t=e.hiddenNodes||[],r=e.hiddenEdges||[],n=e.hiddenCombos||[];this.nodes=this.getDataByOrder((e.nodes||[]).concat(t)),this.edges=this.getDataByOrder((e.edges||[]).concat(r)),this.combos=(e.combos||[]).concat(n.map(function(e){return i(i({},e),{collapsed:!0})}))},t.prototype.execute=function(){var e=this.nodes,t=this.edges;if(e){var r=this.getLayoutConfig(),n=r.graphDef,o=r.graphOption,i=r.graphSettings,a=(0,u.buildGraph)(n,o,i),s=(0,u.flatGraph)(a,!0);return this.updatePosition(s),this.onLayoutEnd&&this.onLayoutEnd(),{nodes:e,edges:t}}},t.prototype.getNodePath=function(e){var t=this.nodes,r=this.combos,n=t.find(function(t){return t.id===e});return n&&n.comboId?function e(t,n){void 0===n&&(n=[]);var o=r.find(function(e){return e.id===t});return o?(n.unshift(t),o.parentId?e(o.parentId,n):n):n}(n.comboId,[e]):[e]},t.prototype.getLayoutConfig=function(){var e,t,r,n,o=this.nodes,s=this.edges,c=this.combos,f=this.nodeSize,h=this.rankdir,p=this.align,d=this.edgesep,y=this.nodesep,v=this.ranksep,g=this.settings,m=(c||[]).reduce(function(e,t){var r=o.filter(function(e){return e.comboId===t.id}).map(function(e){return e.id}),n=(c||[]).filter(function(e){return e.parentId===t.id}).map(function(e){return e.id});return(r.length||n.length)&&(e[t.id]=a(a([],r,!0),n,!0)),e},{});n=f?(0,l.isArray)(f)?function(){return f}:function(){return[f,f]}:function(e){return e&&e.size?(0,l.isArray)(e.size)?e.size:(0,l.isObject)(e.size)?[e.size.width||40,e.size.height||40]:[e.size,e.size]:[40,40]};var b,w=(b=null===c||void 0===c?void 0:c[0])&&b.size?(0,l.isArray)(b.size)?b.size:[b.size,b.size]:[80,40],_=w[0],x=w[1],S=null===(t=null===(e=this.graphSettings)||void 0===e?void 0:e.subScene)||void 0===t?void 0:t.meta,O=(null===(r=c.find(function(e){return!e.collapsed}))||void 0===r?void 0:r.padding)||[20,20,20,20],P=O[0],E=O[1],k=O[2],M=O[3],C={compound:m,nodes:a([],(o||[]).map(function(e){var t=n(e),r=t[0],o=t[1];return i(i({},e),{width:r,height:o})}),!0),edges:a([],(s||[]).map(function(e){return i(i({},e),{v:e.source,w:e.target})}),!0)},j={expanded:(c||[]).filter(function(e){return!e.collapsed}).map(function(e){return e.id})},T={graph:{meta:{align:p,rankDir:h,nodeSep:y,edgeSep:d,rankSep:v}},subScene:{meta:{paddingTop:P||(null===S||void 0===S?void 0:S.paddingTop)||20,paddingRight:E||(null===S||void 0===S?void 0:S.paddingRight)||20,paddingBottom:k||(null===S||void 0===S?void 0:S.paddingBottom)||20,paddingLeft:M||(null===S||void 0===S?void 0:S.paddingLeft)||20,labelHeight:0}},nodeSize:{meta:{width:_,height:x}}},A=(0,u.mergeConfig)(g,i({},(0,u.mergeConfig)(T,u.LAYOUT_CONFIG)));return this.graphSettings=A,{graphDef:C,graphOption:j,graphSettings:A}},t.prototype.updatePosition=function(e){var t=e.nodes,r=e.edges;this.updateNodePosition(t,r),this.updateEdgePosition(t,r)},t.prototype.getBegin=function(e,t){var r=this.begin,n=[0,0];if(r){var o=1/0,i=1/0;e.forEach(function(e){o>e.x&&(o=e.x),i>e.y&&(i=e.y)}),t.forEach(function(e){e.points.forEach(function(e){o>e.x&&(o=e.x),i>e.y&&(i=e.y)})}),n[0]=r[0]-o,n[1]=r[1]-i}return n},t.prototype.updateNodePosition=function(e,t){var r=this.combos,n=this.nodes,o=this.edges,i=this.anchorPoint,a=this.graphSettings,s=this.getBegin(e,t);e.forEach(function(e){var l,c=e.x,f=e.y,h=e.id,p=e.type,d=e.coreBox;if(p===u.HierarchyNodeType.META&&h!==u.ROOT_NAME){var y=r.findIndex(function(e){return e.id===h}),v=null===(l=null===a||void 0===a?void 0:a.subScene)||void 0===l?void 0:l.meta;r[y].offsetX=c+s[0],r[y].offsetY=f+s[1],r[y].fixSize=[d.width,d.height],r[y].fixCollapseSize=[d.width,d.height],e.expanded?r[y].padding=[null===v||void 0===v?void 0:v.paddingTop,null===v||void 0===v?void 0:v.paddingRight,null===v||void 0===v?void 0:v.paddingBottom,null===v||void 0===v?void 0:v.paddingLeft]:r[y].padding=[0,0,0,0]}else if(p===u.HierarchyNodeType.OP){y=n.findIndex(function(e){return e.id===h});if(n[y].x=c+s[0],n[y].y=f+s[1],i){var g=[],m=t.filter(function(e){return e.v===h}),b=t.filter(function(e){return e.w===h});m.length>0&&m.forEach(function(t){var r=t.points[0],n=(r.x-c)/e.width+.5,i=(r.y-f)/e.height+.5;g.push([n,i]),t.baseEdgeList.forEach(function(e){var t=o.find(function(t){return t.source===e.v&&t.target===e.w});t&&(t.sourceAnchor=g.length-1)})}),b.length>0&&b.forEach(function(t){var r=t.points[t.points.length-1],n=(r.x-c)/e.width+.5,i=(r.y-f)/e.height+.5;g.push([n,i]),t.baseEdgeList.forEach(function(e){var t=o.find(function(t){return t.source===e.v&&t.target===e.w});t&&(t.targetAnchor=g.length-1)})}),n[y].anchorPoints=g.length>0?g:n[y].anchorPoints||[]}}})},t.prototype.updateEdgePosition=function(e,t){var r=this,n=r.combos,o=r.edges,s=r.controlPoints,l=this.getBegin(e,t);s&&(n.forEach(function(e){e.inEdges=[],e.outEdges=[]}),o.forEach(function(t){var o,s,c,f,h=e.find(function(e){return e.id===t.source}),p=e.find(function(e){return e.id===t.target}),d=[],y=[];if(h&&p)y=(0,u.getEdges)(null===h||void 0===h?void 0:h.id,null===p||void 0===p?void 0:p.id,e);else if(!h||!p){var v=r.getNodePath(t.source),g=r.getNodePath(t.target),m=v.reverse().slice(h?0:1).find(function(t){return e.find(function(e){return e.id===t})}),b=g.reverse().slice(p?0:1).find(function(t){return e.find(function(e){return e.id===t})});h=e.find(function(e){return e.id===m}),p=e.find(function(e){return e.id===b}),y=(0,u.getEdges)(null===h||void 0===h?void 0:h.id,null===p||void 0===p?void 0:p.id,e,{v:t.source,w:t.target})}if(d=(d=y.reduce(function(e,t){return a(a([],e,!0),t.points.map(function(e){return i(i({},e),{x:e.x+l[0],y:e.y+l[1]})}),!0)},[])).slice(1,-1),t.controlPoints=d,(null===p||void 0===p?void 0:p.type)===u.NodeType.META){var w=n.findIndex(function(e){return e.id===(null===p||void 0===p?void 0:p.id)});if(!n[w]||(null===(o=n[w].inEdges)||void 0===o?void 0:o.some(function(e){return e.source===h.id&&e.target===p.id})))return;null===(s=n[w].inEdges)||void 0===s||s.push({source:h.id,target:p.id,controlPoints:d})}if((null===h||void 0===h?void 0:h.type)===u.NodeType.META){w=n.findIndex(function(e){return e.id===(null===h||void 0===h?void 0:h.id)});if(!n[w]||(null===(c=n[w].outEdges)||void 0===c?void 0:c.some(function(e){return e.source===h.id&&e.target===p.id})))return;null===(f=n[w].outEdges)||void 0===f||f.push({source:h.id,target:p.id,controlPoints:d})}}))},t.prototype.getType=function(){return"dagreCompound"},t.prototype.getDataByOrder=function(e){return e.every(function(e){return void 0!==e.layoutOrder})||e.forEach(function(e,t){e.layoutOrder=t}),e.sort(function(e,t){return e.layoutOrder-t.layoutOrder})},t}(s.Base);t.DagreCompoundLayout=c},95317:function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.Graph=void 0;var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t}(r(54917).Graph);t.Graph=i},46269:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(r(81449)),i=r(656);t.default={layout:o.default,util:{time:i.time,notime:i.notime}}},62051:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(r(36791)),i=function(e){var t=[],r={},n={};return e.nodes().forEach(function o(i){var a;n[i]||(n[i]=!0,r[i]=!0,null===(a=e.outEdges(i))||void 0===a||a.forEach(function(e){r[e.w]?t.push(e):o(e.w)}),delete r[i])}),t};t.default={run:function(e){var t="greedy"===e.graph().acyclicer?(0,o.default)(e,function(e){return function(t){var r;return(null===(r=e.edge(t))||void 0===r?void 0:r.weight)||1}}(e)):i(e);null===t||void 0===t||t.forEach(function(t){var r=e.edge(t);e.removeEdgeObj(t),r.forwardName=t.name,r.reversed=!0,e.setEdge(t.w,t.v,r,"rev-".concat(Math.random()))})},undo:function(e){e.edges().forEach(function(t){var r=e.edge(t);if(r.reversed){e.removeEdgeObj(t);var n=r.forwardName;delete r.reversed,delete r.forwardName,e.setEdge(t.w,t.v,r,n)}})}}},81850:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(656),o=function(e,t,r,o,i,a){var s={rank:a,borderType:t,width:0,height:0},u=i[t][a-1],l=(0,n.addDummyNode)(e,"border",s,r);i[t][a]=l,e.setParent(l,o),u&&e.setEdge(u,l,{weight:1})};t.default=function(e){var t;null===(t=e.children())||void 0===t||t.forEach(function(t){return function t(r){var n=e.children(r),i=e.node(r);if((null===n||void 0===n?void 0:n.length)&&n.forEach(function(e){return t(e)}),i.hasOwnProperty("minRank")){i.borderLeft=[],i.borderRight=[];for(var a=i.minRank,s=i.maxRank+1;a<s;a+=1)o(e,"borderLeft","_bl",r,i,a),o(e,"borderRight","_br",r,i,a)}}(t)})}},17359:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){e.nodes().forEach(function(t){n(e.node(t))}),e.edges().forEach(function(t){n(e.edge(t))})},n=function(e){var t=e.width;e.width=e.height,e.height=t},o=function(e){e.nodes().forEach(function(t){i(e.node(t))}),e.edges().forEach(function(t){var r,n=e.edge(t);null===(r=n.points)||void 0===r||r.forEach(function(e){return i(e)}),n.hasOwnProperty("y")&&i(n)})},i=function(e){(null===e||void 0===e?void 0:e.y)&&(e.y=-e.y)},a=function(e){e.nodes().forEach(function(t){s(e.node(t))}),e.edges().forEach(function(t){var r,n=e.edge(t);null===(r=n.points)||void 0===r||r.forEach(function(e){return s(e)}),n.hasOwnProperty("x")&&s(n)})},s=function(e){var t=e.x;e.x=e.y,e.y=t};t.default={adjust:function(e){var t,n=null===(t=e.graph().rankdir)||void 0===t?void 0:t.toLowerCase();"lr"!==n&&"rl"!==n||r(e)},undo:function(e){var t,n=null===(t=e.graph().rankdir)||void 0===t?void 0:t.toLowerCase();"bt"!==n&&"rl"!==n||o(e),"lr"!==n&&"rl"!==n||(a(e),r(e))}}},55272:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t){if("next"!==e&&"prev"!==e)return t},n=function(e){e.prev.next=e.next,e.next.prev=e.prev,delete e.next,delete e.prev},o=function(){function e(){var e={};e.prev=e,e.next=e.prev,this.shortcut=e}return e.prototype.dequeue=function(){var e=this.shortcut,t=e.prev;if(t&&t!==e)return n(t),t},e.prototype.enqueue=function(e){var t=this.shortcut;e.prev&&e.next&&n(e),e.next=t.next,t.next.prev=e,t.next=e,e.prev=t},e.prototype.toString=function(){for(var e=[],t=this.shortcut,n=t.prev;n!==t;)e.push(JSON.stringify(n,r)),n=null===n||void 0===n?void 0:n.prev;return"[".concat(e.join(", "),"]")},e}();t.default=o},36791:function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=i(r(55272)),s=r(54917),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t}(a.default),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t}(s.Graph),c=function(){return 1},f=function(e,t,r){for(var n,o=[],i=t[t.length-1],a=t[0];e.nodeCount();){for(;n=a.dequeue();)h(e,t,r,n);for(;n=i.dequeue();)h(e,t,r,n);if(e.nodeCount())for(var s=t.length-2;s>0;--s)if(n=t[s].dequeue()){o=o.concat(h(e,t,r,n,!0));break}}return o},h=function(e,t,r,n,o){var i,a,s=[];return null===(i=e.inEdges(n.v))||void 0===i||i.forEach(function(n){var i=e.edge(n),a=e.node(n.v);o&&s.push({v:n.v,w:n.w,in:0,out:0}),void 0===a.out&&(a.out=0),a.out-=i,d(t,r,a)}),null===(a=e.outEdges(n.v))||void 0===a||a.forEach(function(n){var o=e.edge(n),i=n.w,a=e.node(i);void 0===a.in&&(a.in=0),a.in-=o,d(t,r,a)}),e.removeNode(n.v),o?s:void 0},p=function(e,t){var r=new l,n=0,o=0;e.nodes().forEach(function(e){r.setNode(e,{v:e,in:0,out:0})}),e.edges().forEach(function(e){var i=r.edge(e)||0,a=(null===t||void 0===t?void 0:t(e))||1,s=i+a;r.setEdge(e.v,e.w,s),o=Math.max(o,r.node(e.v).out+=a),n=Math.max(n,r.node(e.w).in+=a)});for(var i=[],a=o+n+3,s=0;s<a;s++)i.push(new u);var c=n+1;return r.nodes().forEach(function(e){d(i,c,r.node(e))}),{buckets:i,zeroIdx:c,graph:r}},d=function(e,t,r){r.out?r.in?e[r.out-r.in+t].enqueue(r):e[e.length-1].enqueue(r):e[0].enqueue(r)};t.default=function(e,t){var r;if(e.nodeCount()<=1)return[];var n=p(e,t||c);return null===(r=f(n.graph,n.buckets,n.zeroIdx).map(function(t){return e.outEdges(t.v,t.w)}))||void 0===r?void 0:r.flat()}},81449:function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=o(r(62051)),a=o(r(2749)),s=o(r(75378)),u=r(656),l=o(r(71745)),c=o(r(83077)),f=o(r(81850)),h=o(r(17359)),p=o(r(74962)),d=o(r(34831)),y=o(r(76590)),v=r(95317),g=function(e,t,r){t("    removeSelfEdges",function(){B(e)}),t("    acyclic",function(){i.default.run(e)}),t("    nestingGraph.run",function(){c.default.run(e)}),t("    rank",function(){(0,s.default)((0,u.asNonCompoundGraph)(e))}),t("    injectEdgeLabelProxies",function(){j(e)}),t("    removeEmptyRanks",function(){(0,u.removeEmptyRanks)(e)}),t("    nestingGraph.cleanup",function(){c.default.cleanup(e)}),t("    normalizeRanks",function(){(0,u.normalizeRanks)(e)}),t("    assignRankMinMax",function(){T(e)}),t("    removeEdgeLabelProxies",function(){A(e)}),t("    normalize.run",function(){a.default.run(e)}),t("    parentDummyChains",function(){(0,l.default)(e)}),t("    addBorderSegments",function(){(0,f.default)(e)}),r&&r.keepNodeOrder&&t("    initDataOrder",function(){(0,y.default)(e,r.nodeOrder)}),t("    order",function(){(0,p.default)(e,null===r||void 0===r?void 0:r.keepNodeOrder)}),t("    insertSelfEdges",function(){F(e)}),t("    adjustCoordinateSystem",function(){h.default.adjust(e)}),t("    position",function(){(0,d.default)(e)}),t("    positionSelfEdges",function(){G(e)}),t("    removeBorderNodes",function(){D(e)}),t("    normalize.undo",function(){a.default.undo(e)}),t("    fixupEdgeLabelCoords",function(){L(e)}),t("    undoCoordinateSystem",function(){h.default.undo(e)}),t("    translateGraph",function(){I(e)}),t("    assignNodeIntersects",function(){R(e)}),t("    reversePoints",function(){N(e)}),t("    acyclic.undo",function(){i.default.undo(e)})},m=function(e,t){e.nodes().forEach(function(r){var n=e.node(r),o=t.node(r);void 0!==o?(n.fixorder=o._order,delete o._order):delete n.fixorder})},b=function(e,t){e.nodes().forEach(function(r){var n,o=e.node(r);if(o){var i=t.node(r);o.x=i.x,o.y=i.y,o._order=i.order,o._rank=i.rank,(null===(n=t.children(r))||void 0===n?void 0:n.length)&&(o.width=i.width,o.height=i.height)}}),e.edges().forEach(function(r){var n=e.edge(r),o=t.edge(r);n.points=o?o.points:[],o&&o.hasOwnProperty("x")&&(n.x=o.x,n.y=o.y)}),e.graph().width=t.graph().width,e.graph().height=t.graph().height},w=["nodesep","edgesep","ranksep","marginx","marginy"],_={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},x=["acyclicer","ranker","rankdir","align"],S=["width","height","layer","fixorder"],O={width:0,height:0},P=["minlen","weight","width","height","labeloffset"],E={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},k=["labelpos"],M=function(e){var t=new v.Graph({multigraph:!0,compound:!0}),r=U(e.graph()),o={};return null===x||void 0===x||x.forEach(function(e){void 0!==r[e]&&(o[e]=r[e])}),t.setGraph(Object.assign({},_,z(r,w),o)),e.nodes().forEach(function(r){var o=U(e.node(r)),i=n(n({},O),o),a=z(i,S);t.setNode(r,a),t.setParent(r,e.parent(r))}),e.edges().forEach(function(r){var n=U(e.edge(r)),o={};null===k||void 0===k||k.forEach(function(e){void 0!==n[e]&&(o[e]=n[e])}),t.setEdgeObj(r,Object.assign({},E,z(n,P),o))}),t},C=function(e){var t=e.graph();t.ranksep||(t.ranksep=0),t.ranksep/=2,e.nodes().forEach(function(t){var r=e.node(t);isNaN(r.layer)||r.layer||(r.layer=0)}),e.edges().forEach(function(r){var n,o=e.edge(r);o.minlen*=2,"c"!==(null===(n=o.labelpos)||void 0===n?void 0:n.toLowerCase())&&("TB"===t.rankdir||"BT"===t.rankdir?o.width+=o.labeloffset:o.height+=o.labeloffset)})},j=function(e){e.edges().forEach(function(t){var r=e.edge(t);if(r.width&&r.height){var n=e.node(t.v),o={e:t,rank:(e.node(t.w).rank-n.rank)/2+n.rank};(0,u.addDummyNode)(e,"edge-proxy",o,"_ep")}})},T=function(e){var t=0;e.nodes().forEach(function(r){var n,o,i=e.node(r);i.borderTop&&(i.minRank=null===(n=e.node(i.borderTop))||void 0===n?void 0:n.rank,i.maxRank=null===(o=e.node(i.borderBottom))||void 0===o?void 0:o.rank,t=Math.max(t,i.maxRank||-1/0))}),e.graph().maxRank=t},A=function(e){e.nodes().forEach(function(t){var r=e.node(t);"edge-proxy"===r.dummy&&(e.edge(r.e).labelRank=r.rank,e.removeNode(t))})},I=function(e){var t,r,n=0,o=0,i=e.graph(),a=i.marginx||0,s=i.marginy||0,u=function(e){if(e){var i=e.x,a=e.y,s=e.width,u=e.height;isNaN(i)||isNaN(s)||(void 0===t&&(t=i-s/2),t=Math.min(t,i-s/2),n=Math.max(n,i+s/2)),isNaN(a)||isNaN(u)||(void 0===r&&(r=a-u/2),r=Math.min(r,a-u/2),o=Math.max(o,a+u/2))}};e.nodes().forEach(function(t){u(e.node(t))}),e.edges().forEach(function(t){var r=e.edge(t);(null===r||void 0===r?void 0:r.hasOwnProperty("x"))&&u(r)}),t-=a,r-=s,e.nodes().forEach(function(n){var o=e.node(n);o&&(o.x-=t,o.y-=r)}),e.edges().forEach(function(n){var o,i=e.edge(n);null===(o=i.points)||void 0===o||o.forEach(function(e){e.x-=t,e.y-=r}),i.hasOwnProperty("x")&&(i.x-=t),i.hasOwnProperty("y")&&(i.y-=r)}),i.width=n-t+a,i.height=o-r+s},R=function(e){e.edges().forEach(function(t){var r,n,o=e.edge(t),i=e.node(t.v),a=e.node(t.w);o.points?(r=o.points[0],n=o.points[o.points.length-1]):(o.points=[],r=a,n=i),o.points.unshift((0,u.intersectRect)(i,r)),o.points.push((0,u.intersectRect)(a,n))})},L=function(e){e.edges().forEach(function(t){var r=e.edge(t);if(null===r||void 0===r?void 0:r.hasOwnProperty("x"))switch("l"!==r.labelpos&&"r"!==r.labelpos||(r.width-=r.labeloffset),r.labelpos){case"l":r.x-=r.width/2+r.labeloffset;break;case"r":r.x+=r.width/2+r.labeloffset}})},N=function(e){e.edges().forEach(function(t){var r,n=e.edge(t);n.reversed&&(null===(r=n.points)||void 0===r||r.reverse())})},D=function(e){e.nodes().forEach(function(t){var r,n,o;if(null===(r=e.children(t))||void 0===r?void 0:r.length){var i=e.node(t),a=e.node(i.borderTop),s=e.node(i.borderBottom),u=e.node(i.borderLeft[(null===(n=i.borderLeft)||void 0===n?void 0:n.length)-1]),l=e.node(i.borderRight[(null===(o=i.borderRight)||void 0===o?void 0:o.length)-1]);i.width=Math.abs((null===l||void 0===l?void 0:l.x)-(null===u||void 0===u?void 0:u.x))||10,i.height=Math.abs((null===s||void 0===s?void 0:s.y)-(null===a||void 0===a?void 0:a.y))||10,i.x=((null===u||void 0===u?void 0:u.x)||0)+i.width/2,i.y=((null===a||void 0===a?void 0:a.y)||0)+i.height/2}}),e.nodes().forEach(function(t){var r;"border"===(null===(r=e.node(t))||void 0===r?void 0:r.dummy)&&e.removeNode(t)})},B=function(e){e.edges().forEach(function(t){if(t.v===t.w){var r=e.node(t.v);r.selfEdges||(r.selfEdges=[]),r.selfEdges.push({e:t,label:e.edge(t)}),e.removeEdgeObj(t)}})},F=function(e){var t=(0,u.buildLayerMatrix)(e);null===t||void 0===t||t.forEach(function(t){var r=0;null===t||void 0===t||t.forEach(function(t,n){var o,i=e.node(t);i.order=n+r,null===(o=i.selfEdges)||void 0===o||o.forEach(function(t){(0,u.addDummyNode)(e,"selfedge",{width:t.label.width,height:t.label.height,rank:i.rank,order:n+ ++r,e:t.e,label:t.label},"_se")}),delete i.selfEdges})})},G=function(e){e.nodes().forEach(function(t){var r=e.node(t);if("selfedge"===r.dummy){var n=e.node(r.e.v),o=n.x+n.width/2,i=n.y,a=r.x-o,s=n.height/2;e.setEdgeObj(r.e,r.label),e.removeNode(t),r.label.points=[{x:o+2*a/3,y:i-s},{x:o+5*a/6,y:i-s},{y:i,x:o+a},{x:o+5*a/6,y:i+s},{x:o+2*a/3,y:i+s}],r.label.x=r.x,r.label.y=r.y}})},z=function(e,t){var r={};return null===t||void 0===t||t.forEach(function(t){void 0!==e[t]&&(r[t]=+e[t])}),r},U=function(e){void 0===e&&(e={});var t={};return Object.keys(e).forEach(function(r){t[r.toLowerCase()]=e[r]}),t};t.default=function(e,t){var r=t&&t.debugTiming?u.time:u.notime;r("layout",function(){t&&!t.keepNodeOrder&&t.prevGraph&&r("  inheritOrder",function(){m(e,t.prevGraph)});var n=r("  buildLayoutGraph",function(){return M(e)});t&&!1===t.edgeLabelSpace||r("  makeSpaceForEdgeLabels",function(){C(n)});try{r("  runLayout",function(){g(n,r,t)})}catch(e){if("Not possible to find intersection inside of the rectangle"===e.message)return void console.error("The following error may be caused by improper layer setting, please make sure your manual layer setting does not violate the graph's structure:\n",e);throw e}r("  updateInputGraph",function(){b(e,n)})})}},83077:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(656),o=function e(t,r,o,i,a,s,u){var l=t.children(u);if(null===l||void 0===l?void 0:l.length){var c=(0,n.addBorderNode)(t,"_bt"),f=(0,n.addBorderNode)(t,"_bb"),h=t.node(u);t.setParent(c,u),h.borderTop=c,t.setParent(f,u),h.borderBottom=f,null===l||void 0===l||l.forEach(function(n){e(t,r,o,i,a,s,n);var l=t.node(n),h=l.borderTop?l.borderTop:n,p=l.borderBottom?l.borderBottom:n,d=l.borderTop?i:2*i,y=h!==p?1:a-s[u]+1;t.setEdge(c,h,{minlen:y,weight:d,nestingEdge:!0}),t.setEdge(p,f,{minlen:y,weight:d,nestingEdge:!0})}),t.parent(u)||t.setEdge(r,c,{weight:0,minlen:a+s[u]})}else u!==r&&t.setEdge(r,u,{weight:0,minlen:o})},i=function(e){var t,r={};return null===(t=e.children())||void 0===t||t.forEach(function(t){return function t(n,o){var i=e.children(n);null===i||void 0===i||i.forEach(function(e){return t(e,o+1)}),r[n]=o}(t,1)}),r},a=function(e){var t=0;return e.edges().forEach(function(r){t+=e.edge(r).weight}),t};t.default={run:function(e){var t,r=(0,n.addDummyNode)(e,"root",{},"_root"),s=i(e),u=Math.max.apply(Math,Object.values(s));Math.abs(u)===1/0&&(u=1);var l=u-1,c=2*l+1;e.graph().nestingRoot=r,e.edges().forEach(function(t){e.edge(t).minlen*=c});var f=a(e)+1;null===(t=e.children())||void 0===t||t.forEach(function(t){o(e,r,c,f,l,s,t)}),e.graph().nodeRankFactor=c},cleanup:function(e){var t=e.graph();t.nestingRoot&&e.removeNode(t.nestingRoot),delete t.nestingRoot,e.edges().forEach(function(t){e.edge(t).nestingEdge&&e.removeEdgeObj(t)})}}},2749:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(656),o=function(e,t){var r=t.v,o=e.node(r).rank,i=t.w,a=e.node(i).rank,s=t.name,u=e.edge(t),l=u.labelRank;if(a!==o+1){e.removeEdgeObj(t);var c,f,h,p=e.graph();for(h=0,++o;o<a;++h,++o)u.points=[],f={edgeLabel:u,width:0,height:0,edgeObj:t,rank:o},c=(0,n.addDummyNode)(e,"edge",f,"_d"),o===l&&(f.width=u.width,f.height=u.height,f.dummy="edge-label",f.labelpos=u.labelpos),e.setEdge(r,c,{weight:u.weight},s),0===h&&(p.dummyChains||(p.dummyChains=[]),p.dummyChains.push(c)),r=c;e.setEdge(r,i,{weight:u.weight},s)}};t.default={run:function(e){e.graph().dummyChains=[],e.edges().forEach(function(t){return o(e,t)})},undo:function(e){var t;null===(t=e.graph().dummyChains)||void 0===t||t.forEach(function(t){var r,n=e.node(t),o=n.edgeLabel;n.edgeObj&&e.setEdgeObj(n.edgeObj,o);for(var i=t;n.dummy;)r=e.successors(i)[0],e.removeNode(i),o.points.push({x:n.x,y:n.y}),"edge-label"===n.dummy&&(o.x=n.x,o.y=n.y,o.width=n.width,o.height=n.height),i=r,n=e.node(i)})}}},92059:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e,t,r){var n,o={};null===r||void 0===r||r.forEach(function(r){for(var i,a,s=e.parent(r);s;){if((i=e.parent(s))?(a=o[i],o[i]=s):(a=n,n=s),a&&a!==s)return void t.setEdge(a,s);s=i}})}},16771:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e,t){return t.map(function(t){var r=e.inEdges(t);if(!(null===r||void 0===r?void 0:r.length))return{v:t};var n={sum:0,weight:0};return null===r||void 0===r||r.forEach(function(t){var r=e.edge(t),o=e.node(t.v);n.sum+=r.weight*o.order,n.weight+=r.weight}),{v:t,barycenter:n.sum/n.weight,weight:n.weight}})}},95053:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(95317),o=function(e){for(var t;e.hasNode(t="_root".concat(Math.random())););return t};t.default=function(e,t,r){var i=o(e),a=new n.Graph({compound:!0}).setGraph({root:i}).setDefaultNodeLabel(function(t){return e.node(t)});return e.nodes().forEach(function(n){var o,s=e.node(n),u=e.parent(n);(s.rank===t||s.minRank<=t&&t<=s.maxRank)&&(a.setNode(n),a.setParent(n,u||i),null===(o=e[r](n))||void 0===o||o.forEach(function(t){var r=t.v===n?t.w:t.v,o=a.edgeFromArgs(r,n),i=void 0!==o?o.weight:0;a.setEdge(r,n,{weight:e.edge(t).weight+i})}),s.hasOwnProperty("minRank")&&a.setNode(n,{borderLeft:s.borderLeft[t],borderRight:s.borderRight[t]}))}),a}},42468:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(656),o=function(e,t,r){for(var o=(0,n.zipObject)(r,r.map(function(e,t){return t})),i=t.map(function(t){var r,n=null===(r=e.outEdges(t))||void 0===r?void 0:r.map(function(t){return{pos:o[t.w]||0,weight:e.edge(t).weight}});return null===n||void 0===n?void 0:n.sort(function(e,t){return e.pos-t.pos})}).flat().filter(function(e){return void 0!==e}),a=1;a<r.length;)a<<=1;var s=2*a-1;a-=1;var u=Array(s).fill(0,0,s),l=0;return null===i||void 0===i||i.forEach(function(e){if(e){var t=e.pos+a;u[t]+=e.weight;for(var r=0;t>0;)t%2&&(r+=u[t+1]),u[t=t-1>>1]+=e.weight;l+=e.weight*r}}),l};t.default=function(e,t){for(var r=0,n=1;n<(null===t||void 0===t?void 0:t.length);n+=1)r+=o(e,t[n-1],t[n]);return r}},74962:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(r(59883)),i=n(r(42468)),a=n(r(95053)),s=n(r(92059)),u=n(r(49514)),l=r(58652),c=r(95317),f=r(656),h=function(e,t,r){return t.map(function(t){return(0,a.default)(e,t,r)})},p=function(e,t,r,n){var o=new c.Graph;null===e||void 0===e||e.forEach(function(e){for(var i,a=e.graph().root,l=(0,u.default)(e,a,o,t,r,n),c=0;c<(null===(i=l.vs)||void 0===i?void 0:i.length);c++){var f=e.node(l.vs[c]);f&&(f.order=c)}(0,s.default)(e,o,l.vs)})},d=function(e,t){null===t||void 0===t||t.forEach(function(t){null===t||void 0===t||t.forEach(function(t,r){e.node(t).order=r})})};t.default=function(e,t){for(var r=(0,f.maxRank)(e),n=[],a=[],s=1;s<r+1;s++)n.push(s);for(s=r-1;s>-1;s--)a.push(s);var u=h(e,n,"inEdges"),c=h(e,a,"outEdges"),y=(0,o.default)(e);d(e,y);for(var v,g=Number.POSITIVE_INFINITY,m=(s=0,0);m<4;++s,++m)p(s%2?u:c,s%4>=2,!1,t),y=(0,f.buildLayerMatrix)(e),(b=(0,i.default)(e,y))<g&&(m=0,v=(0,l.clone)(y),g=b);y=(0,o.default)(e),d(e,y);for(s=0,m=0;m<4;++s,++m){var b;p(s%2?u:c,s%4>=2,!0,t),y=(0,f.buildLayerMatrix)(e),(b=(0,i.default)(e,y))<g&&(m=0,v=(0,l.clone)(y),g=b)}d(e,v)}},76590:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e,t){for(var r=e.nodes().filter(function(t){var r;return!(null===(r=e.children(t))||void 0===r?void 0:r.length)}).map(function(t){return e.node(t).rank}),n=Math.max.apply(Math,r),o=[],i=0;i<n+1;i++)o[i]=[];null===t||void 0===t||t.forEach(function(t){var r=e.node(t);!r||null!==r&&void 0!==r&&r.dummy||isNaN(r.rank)||(r.fixorder=o[r.rank].length,o[r.rank].push(t))})}},59883:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(24258);t.default=function(e){for(var t={},r=e.nodes().filter(function(t){var r;return!(null===(r=e.children(t))||void 0===r?void 0:r.length)}),o=r.map(function(t){return e.node(t).rank}),i=(0,n.max)(o),a=[],s=0;s<i+1;s++)a.push([]);var u=r.sort(function(t,r){return e.node(t).rank-e.node(r).rank}),l=u.filter(function(t){return void 0!==e.node(t).fixorder}).sort(function(t,r){return e.node(t).fixorder-e.node(r).fixorder});return null===l||void 0===l||l.forEach(function(r){isNaN(e.node(r).rank)||a[e.node(r).rank].push(r),t[r]=!0}),null===u||void 0===u||u.forEach(function r(n){var o;if(!t.hasOwnProperty(n)){t[n]=!0;var i=e.node(n);isNaN(i.rank)||a[i.rank].push(n),null===(o=e.successors(n))||void 0===o||o.forEach(function(e){return r(e)})}}),a}},10135:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){for(var t,r,o=[],i=function(){var i=e.pop();o.push(i),null===(t=i.in.reverse())||void 0===t||t.forEach(function(e){return(t=i,function(e){e.merged||(void 0===e.barycenter||void 0===t.barycenter||e.barycenter>=t.barycenter)&&n(t,e)})(e);var t}),null===(r=i.out)||void 0===r||r.forEach(function(t){return(r=i,function(t){t.in.push(r),0==--t.indegree&&e.push(t)})(t);var r})};null===e||void 0===e?void 0:e.length;)i();var a=["vs","i","barycenter","weight"];return o.filter(function(e){return!e.merged}).map(function(e){var t={};return null===a||void 0===a||a.forEach(function(r){void 0!==e[r]&&(t[r]=e[r])}),t})},n=function(e,t){var r,n=0,o=0;e.weight&&(n+=e.barycenter*e.weight,o+=e.weight),t.weight&&(n+=t.barycenter*t.weight,o+=t.weight),e.vs=null===(r=t.vs)||void 0===r?void 0:r.concat(e.vs),e.barycenter=n/o,e.weight=o,e.i=Math.min(t.i,e.i),t.merged=!0};t.default=function(e,t){var n,o,i,a={};null===e||void 0===e||e.forEach(function(e,t){a[e.v]={i:t,indegree:0,in:[],out:[],vs:[e.v]};var r=a[e.v];void 0!==e.barycenter&&(r.barycenter=e.barycenter,r.weight=e.weight)}),null===(n=t.edges())||void 0===n||n.forEach(function(e){var t=a[e.v],r=a[e.w];void 0!==t&&void 0!==r&&(r.indegree++,t.out.push(a[e.w]))});var s=null===(i=(o=Object.values(a)).filter)||void 0===i?void 0:i.call(o,function(e){return!e.indegree});return r(s)}},49514:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(r(16771)),i=n(r(10135)),a=n(r(10728)),s=function(e,t){null===e||void 0===e||e.forEach(function(e){var r,n=null===(r=e.vs)||void 0===r?void 0:r.map(function(e){return t[e]?t[e].vs:e});e.vs=n.flat()})},u=function(e,t){void 0!==e.barycenter?(e.barycenter=(e.barycenter*e.weight+t.barycenter*t.weight)/(e.weight+t.weight),e.weight+=t.weight):(e.barycenter=t.barycenter,e.weight=t.weight)};t.default=function e(t,r,n,l,c,f){var h,p,d,y,v=t.children(r),g=t.node(r),m=g?g.borderLeft:void 0,b=g?g.borderRight:void 0,w={};m&&(v=null===v||void 0===v?void 0:v.filter(function(e){return e!==m&&e!==b}));var _=(0,o.default)(t,v||[]);null===_||void 0===_||_.forEach(function(r){var o;if(null===(o=t.children(r.v))||void 0===o?void 0:o.length){var i=e(t,r.v,n,l,f);w[r.v]=i,i.hasOwnProperty("barycenter")&&u(r,i)}});var x=(0,i.default)(_,n);s(x,w),null===(h=x.filter(function(e){return e.vs.length>0}))||void 0===h||h.forEach(function(e){var r=t.node(e.vs[0]);r&&(e.fixorder=r.fixorder,e.order=r.order)});var S=(0,a.default)(x,l,c,f);if(m&&(S.vs=[m,S.vs,b].flat(),null===(p=t.predecessors(m))||void 0===p?void 0:p.length)){var O=t.node((null===(d=t.predecessors(m))||void 0===d?void 0:d[0])||""),P=t.node((null===(y=t.predecessors(b))||void 0===y?void 0:y[0])||"");S.hasOwnProperty("barycenter")||(S.barycenter=0,S.weight=0),S.barycenter=(S.barycenter*S.weight+O.order+P.order)/(S.weight+2),S.weight+=2}return S}},10728:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(656),o=function(e,t,r){for(var n,o=r;t.length&&(n=t[t.length-1]).i<=o;)t.pop(),null===e||void 0===e||e.push(n.vs),o++;return o},i=function(e,t){return function(r,n){if(void 0!==r.fixorder&&void 0!==n.fixorder)return r.fixorder-n.fixorder;if(r.barycenter<n.barycenter)return-1;if(r.barycenter>n.barycenter)return 1;if(t&&void 0!==r.order&&void 0!==n.order){if(r.order<n.order)return-1;if(r.order>n.order)return 1}return e?n.i-r.i:r.i-n.i}};t.default=function(e,t,r,a){var s=(0,n.partition)(e,function(e){var t=e.hasOwnProperty("fixorder")&&!isNaN(e.fixorder);return a?!t&&e.hasOwnProperty("barycenter"):t||e.hasOwnProperty("barycenter")}),u=s.lhs,l=s.rhs.sort(function(e,t){return-e.i- -t.i}),c=[],f=0,h=0,p=0;null===u||void 0===u||u.sort(i(!!t,!!r)),p=o(c,l,p),null===u||void 0===u||u.forEach(function(e){var t;p+=null===(t=e.vs)||void 0===t?void 0:t.length,c.push(e.vs),f+=e.barycenter*e.weight,h+=e.weight,p=o(c,l,p)});var d={vs:c.flat()};return h&&(d.barycenter=f/h,d.weight=h),d}},71745:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e){var t,r=function(e){var t,r={},n=0;return null===(t=e.children())||void 0===t||t.forEach(function t(o){var i,a=n;null===(i=e.children(o))||void 0===i||i.forEach(t),r[o]={low:a,lim:n++}}),r}(e);null===(t=e.graph().dummyChains)||void 0===t||t.forEach(function(t){var n,o,i=t,a=e.node(i),s=a.edgeObj;if(s)for(var u=function(e,t,r,n){var o,i,a=[],s=[],u=Math.min(t[r].low,t[n].low),l=Math.max(t[r].lim,t[n].lim);o=r;do{o=e.parent(o),a.push(o)}while(o&&(t[o].low>u||l>t[o].lim));for(i=o,o=n;o&&o!==i;)s.push(o),o=e.parent(o);return{lca:i,path:a.concat(s.reverse())}}(e,r,s.v,s.w),l=u.path,c=u.lca,f=0,h=l[f],p=!0;i!==s.w;){if(a=e.node(i),p){for(;h!==c&&(null===(n=e.node(h))||void 0===n?void 0:n.maxRank)<a.rank;)h=l[++f];h===c&&(p=!1)}if(!p){for(;f<l.length-1&&(null===(o=e.node(l[f+1]))||void 0===o?void 0:o.minRank)<=a.rank;)f++;h=l[f]}e.setParent(i,h),i=e.successors(i)[0]}})}},22438:function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.width=t.sep=t.positionX=t.balance=t.alignCoordinates=t.findSmallestWidthAlignment=t.buildBlockGraph=t.horizontalCompaction=t.verticalAlignment=t.hasConflict=t.addConflict=t.findOtherInnerSegmentNode=t.findType2Conflicts=t.findType1Conflicts=void 0;var i=r(54917),a=r(24258),s=r(656),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t}(i.Graph);t.findType1Conflicts=function(e,r){var n={};return(null===r||void 0===r?void 0:r.length)&&r.reduce(function(r,o){var i=0,a=0,s=r.length,u=null===o||void 0===o?void 0:o[(null===o||void 0===o?void 0:o.length)-1];return null===o||void 0===o||o.forEach(function(r,l){var c,f=(0,t.findOtherInnerSegmentNode)(e,r),h=f?e.node(f).order:s;(f||r===u)&&(null===(c=o.slice(a,l+1))||void 0===c||c.forEach(function(r){var o;null===(o=e.predecessors(r))||void 0===o||o.forEach(function(o){var a,s=e.node(o),u=s.order;!(u<i||h<u)||s.dummy&&(null===(a=e.node(r))||void 0===a?void 0:a.dummy)||(0,t.addConflict)(n,o,r)})}),a=l+1,i=h)}),o}),n};t.findType2Conflicts=function(e,r){var n={};function o(r,o){var i=function(e){return JSON.stringify(e.slice(1))}(r);o.get(i)||(function(r,o,i,a,s){for(var u,l,c,f=o;f<i;f++)c=r[f],(null===(u=e.node(c))||void 0===u?void 0:u.dummy)&&(null===(l=e.predecessors(c))||void 0===l||l.forEach(function(r){var o=e.node(r);o.dummy&&(o.order<a||o.order>s)&&(0,t.addConflict)(n,r,c)}))}.apply(void 0,r),o.set(i,!0))}return(null===r||void 0===r?void 0:r.length)&&r.reduce(function(t,r){var n,i=-1,a=0,s=new Map;return null===r||void 0===r||r.forEach(function(u,l){var c;if("border"===(null===(c=e.node(u))||void 0===c?void 0:c.dummy)){var f=e.predecessors(u)||[];f.length&&(n=e.node(f[0]).order,o([r,a,l,i,n],s),a=l,i=n)}o([r,a,r.length,n,t.length],s)}),r}),n};t.findOtherInnerSegmentNode=function(e,t){var r,n;if(null===(r=e.node(t))||void 0===r?void 0:r.dummy)return null===(n=e.predecessors(t))||void 0===n?void 0:n.find(function(t){return e.node(t).dummy})};t.addConflict=function(e,t,r){var n=t,o=r;if(n>o){var i=n;n=o,o=i}var a=e[n];a||(e[n]=a={}),a[o]=!0};t.hasConflict=function(e,t,r){var n=t;n>r&&(n=r);return!!e[n]};t.verticalAlignment=function(e,r,n,o){var i={},a={},s={};return null===r||void 0===r||r.forEach(function(e){null===e||void 0===e||e.forEach(function(e,t){i[e]=e,a[e]=e,s[e]=t})}),null===r||void 0===r||r.forEach(function(e){var r=-1;null===e||void 0===e||e.forEach(function(e){var u=o(e);if(u.length)for(var l=((u=u.sort(function(e,t){return s[e]-s[t]})).length-1)/2,c=Math.floor(l),f=Math.ceil(l);c<=f;++c){var h=u[c];a[e]===e&&r<s[h]&&!(0,t.hasConflict)(n,e,h)&&(a[h]=e,a[e]=i[e]=i[h],r=s[h])}})}),{root:i,align:a}};t.horizontalCompaction=function(e,r,n,o,i){var a,s={},u=(0,t.buildBlockGraph)(e,r,n,i),l=i?"borderLeft":"borderRight",c=function(e,t){for(var r=u.nodes(),n=r.pop(),o={};n;)o[n]?e(n):(o[n]=!0,r.push(n),r=r.concat(t(n))),n=r.pop()};return c(function(e){s[e]=(u.inEdges(e)||[]).reduce(function(e,t){return Math.max(e,(s[t.v]||0)+u.edge(t))},0)},u.predecessors.bind(u)),c(function(t){var r=(u.outEdges(t)||[]).reduce(function(e,t){return Math.min(e,(s[t.w]||0)-u.edge(t))},Number.POSITIVE_INFINITY),n=e.node(t);r!==Number.POSITIVE_INFINITY&&n.borderType!==l&&(s[t]=Math.max(s[t],r))},u.successors.bind(u)),null===(a=Object.values(o))||void 0===a||a.forEach(function(e){s[e]=s[n[e]]}),s};t.buildBlockGraph=function(e,r,n,o){var i=new u,a=e.graph(),s=(0,t.sep)(a.nodesep,a.edgesep,o);return null===r||void 0===r||r.forEach(function(t){var r;null===t||void 0===t||t.forEach(function(t){var o=n[t];if(i.setNode(o),r){var a=n[r],u=i.edgeFromArgs(a,o);i.setEdge(a,o,Math.max(s(e,t,r),u||0))}r=t})}),i};function l(e,t){var r=Object.values(t),n=(0,a.min)(r),o=(0,a.max)(r);["u","d"].forEach(function(r){["l","r"].forEach(function(i){var s,u=r+i,l=e[u];if(l!==t){var c=Object.values(l);(s="l"===i?n-(0,a.min)(c):o-(0,a.max)(c))&&(e[u]={},Object.keys(l).forEach(function(t){e[u][t]=l[t]+s}))}})})}t.findSmallestWidthAlignment=function(e,r){return(0,s.minBy)(Object.values(r),function(r){var n,o=Number.NEGATIVE_INFINITY,i=Number.POSITIVE_INFINITY;return null===(n=Object.keys(r))||void 0===n||n.forEach(function(n){var a=r[n],s=(0,t.width)(e,n)/2;o=Math.max(a+s,o),i=Math.min(a-s,i)}),o-i})},t.alignCoordinates=l;t.balance=function(e,t){var r={};return Object.keys(e.ul).forEach(function(n){if(t)r[n]=e[t.toLowerCase()][n];else{var o=Object.values(e).map(function(e){return e[n]});r[n]=(o[0]+o[1])/2}}),r};t.positionX=function(e){var r,n=(0,s.buildLayerMatrix)(e),o=Object.assign((0,t.findType1Conflicts)(e,n),(0,t.findType2Conflicts)(e,n)),i={};["u","d"].forEach(function(a){r="u"===a?n:Object.values(n).reverse(),["l","r"].forEach(function(n){"r"===n&&(r=r.map(function(e){return Object.values(e).reverse()}));var s=("u"===a?e.predecessors:e.successors).bind(e),u=(0,t.verticalAlignment)(e,r,o,s),l=(0,t.horizontalCompaction)(e,r,u.root,u.align,"r"===n);"r"===n&&Object.keys(l).forEach(function(e){l[e]=-l[e]}),i[a+n]=l})});var a=(0,t.findSmallestWidthAlignment)(e,i);return l(i,a),(0,t.balance)(i,e.graph().align)};t.sep=function(e,t,r){return function(n,o,i){var a,s=n.node(o),u=n.node(i),l=0;if(l+=s.width/2,s.hasOwnProperty("labelpos"))switch((s.labelpos||"").toLowerCase()){case"l":a=-s.width/2;break;case"r":a=s.width/2}if(a&&(l+=r?a:-a),a=0,l+=(s.dummy?t:e)/2,l+=(u.dummy?t:e)/2,l+=u.width/2,u.labelpos)switch((u.labelpos||"").toLowerCase()){case"l":a=u.width/2;break;case"r":a=-u.width/2}return a&&(l+=r?a:-a),a=0,l}};t.width=function(e,t){return e.node(t).width||0}},34831:function(e,t,r){"use strict";var n=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,o=0,i=t.length;o<i;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0});var o=r(656),i=r(22438);t.default=function(e){var t,r=(0,o.asNonCompoundGraph)(e);!function(e){var t=(0,o.buildLayerMatrix)(e),r=e.graph().ranksep,i=0;null===t||void 0===t||t.forEach(function(t){var o=t.map(function(t){return e.node(t).height}),a=Math.max.apply(Math,n(n([],o,!1),[0],!1));null===t||void 0===t||t.forEach(function(t){e.node(t).y=i+a/2}),i+=a+r})}(r);var a=function(e){var t=(0,o.buildLayerMatrix)(e),r=Object.assign((0,i.findType1Conflicts)(e,t),(0,i.findType2Conflicts)(e,t)),n={},a=[];["u","d"].forEach(function(o){a="u"===o?t:Object.values(t).reverse(),["l","r"].forEach(function(t){"r"===t&&(a=a.map(function(e){return Object.values(e).reverse()}));var s=("u"===o?e.predecessors:e.successors).bind(e),u=(0,i.verticalAlignment)(e,a,r,s),l=(0,i.horizontalCompaction)(e,a,u.root,u.align,"r"===t);"r"===t&&Object.keys(l).forEach(function(e){return l[e]=-l[e]}),n[o+t]=l})});var s=(0,i.findSmallestWidthAlignment)(e,n);return s&&(0,i.alignCoordinates)(n,s),(0,i.balance)(n,e.graph().align)}(r);null===(t=Object.keys(a))||void 0===t||t.forEach(function(e){r.node(e).x=a[e]})}},6838:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.feasibleTreeWithLayer=t.feasibleTree=void 0;var n=r(28861),o=r(656),i=r(95317),a=function(e){var t,r,o=new i.Graph({directed:!1}),a=e.nodes()[0],u=e.nodeCount();for(o.setNode(a,{});s(o,e)<u;)t=c(o,e),r=o.hasNode(t.v)?(0,n.slack)(e,t):-(0,n.slack)(e,t),f(o,e,r);return o};t.feasibleTree=a;var s=function(e,t){return e.nodes().forEach(function r(o){t.nodeEdges(o).forEach(function(i){var a=i.v,s=o===a?i.w:a;e.hasNode(s)||(0,n.slack)(t,i)||(e.setNode(s,{}),e.setEdge(o,s,{}),r(s))})}),e.nodeCount()},u=function(e){var t,r,o=new i.Graph({directed:!1}),a=e.nodes()[0],s=e.nodes().filter(function(t){return!!e.node(t)}).length;for(o.setNode(a,{});l(o,e)<s;)t=c(o,e),r=o.hasNode(t.v)?(0,n.slack)(e,t):-(0,n.slack)(e,t),f(o,e,r);return o};t.feasibleTreeWithLayer=u;var l=function(e,t){return e.nodes().forEach(function r(o){var i;null===(i=t.nodeEdges(o))||void 0===i||i.forEach(function(i){var a=i.v,s=o===a?i.w:a;e.hasNode(s)||void 0===t.node(s).layer&&(0,n.slack)(t,i)||(e.setNode(s,{}),e.setEdge(o,s,{}),r(s))})}),e.nodeCount()},c=function(e,t){return(0,o.minBy)(t.edges(),function(r){return e.hasNode(r.v)!==e.hasNode(r.w)?(0,n.slack)(t,r):1/0})},f=function(e,t,r){e.nodes().forEach(function(e){t.node(e).rank||(t.node(e).rank=0),t.node(e).rank+=r})};t.default={feasibleTree:a,feasibleTreeWithLayer:u}},75378:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(28861),i=r(6838),a=n(r(2035)),s=o.longestPath,u=function(e){(0,o.longestPathWithLayer)(e),(0,i.feasibleTreeWithLayer)(e)},l=function(e){(0,a.default)(e)};t.default=function(e){switch(e.graph().ranker){case"network-simplex":l(e);break;case"tight-tree":u(e);break;case"longest-path":s(e);break;default:u(e)}}},2035:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.exchangeEdges=t.enterEdge=t.leaveEdge=t.initLowLimValues=t.calcCutValue=t.initCutValues=void 0;var n=r(6838),o=r(28861),i=r(656),a=r(54917),s=a.algorithm.preorder,u=a.algorithm.postorder;t.initCutValues=function(e,t){var r=u(e,e.nodes());null===(r=null===r||void 0===r?void 0:r.slice(0,(null===r||void 0===r?void 0:r.length)-1))||void 0===r||r.forEach(function(r){l(e,t,r)})};var l=function(e,r,n){var o=e.node(n).parent;e.edgeFromArgs(n,o).cutvalue=(0,t.calcCutValue)(e,r,n)};t.calcCutValue=function(e,t,r){var n,o=e.node(r).parent,i=!0,a=t.edgeFromArgs(r,o),s=0;return a||(i=!1,a=t.edgeFromArgs(o,r)),s=a.weight,null===(n=t.nodeEdges(r))||void 0===n||n.forEach(function(n){var a=n.v===r,u=a?n.w:n.v;if(u!==o){var l=a===i,c=t.edge(n).weight;if(s+=l?c:-c,h(e,r,u)){var f=e.edgeFromArgs(r,u).cutvalue;s+=l?-f:f}}}),s};t.initLowLimValues=function(e,t){void 0===t&&(t=e.nodes()[0]),c(e,{},1,t)};var c=function e(t,r,n,o,i){var a,s=n,u=n,l=t.node(o);return r[o]=!0,null===(a=t.neighbors(o))||void 0===a||a.forEach(function(n){r[n]||(u=e(t,r,u,n,o))}),l.low=s,l.lim=u++,i?l.parent=i:delete l.parent,u};t.leaveEdge=function(e){return e.edges().find(function(t){return e.edge(t).cutvalue<0})};t.enterEdge=function(e,t,r){var n=r.v,a=r.w;t.hasEdge(n,a)||(n=r.w,a=r.v);var s=e.node(n),u=e.node(a),l=s,c=!1;s.lim>u.lim&&(l=u,c=!0);var f=t.edges().filter(function(t){return c===p(e,e.node(t.v),l)&&c!==p(e,e.node(t.w),l)});return(0,i.minBy)(f,function(e){return(0,o.slack)(t,e)})};t.exchangeEdges=function(e,r,n,o){var i=n.v,a=n.w;e.removeEdge(i,a),e.setEdge(o.v,o.w,{}),(0,t.initLowLimValues)(e),(0,t.initCutValues)(e,r),f(e,r)};var f=function(e,t){var r=e.nodes().find(function(e){var r;return!(null===(r=t.node(e))||void 0===r?void 0:r.parent)}),n=s(e,r);null===(n=null===n||void 0===n?void 0:n.slice(1))||void 0===n||n.forEach(function(r){var n=e.node(r).parent,o=t.edgeFromArgs(r,n),i=!1;o||(o=t.edgeFromArgs(n,r),i=!0),t.node(r).rank=t.node(n).rank+(i?o.minlen:-o.minlen)})},h=function(e,t,r){return e.hasEdge(t,r)},p=function(e,t,r){return r.low<=t.lim&&t.lim<=r.lim};t.default=function(e){var r=(0,i.simplify)(e);(0,o.longestPath)(r);var a,s,u=(0,n.feasibleTree)(r);for((0,t.initLowLimValues)(u),(0,t.initCutValues)(u,r);a=(0,t.leaveEdge)(u);)s=(0,t.enterEdge)(u,r,a),(0,t.exchangeEdges)(u,r,a,s)}},28861:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.slack=t.longestPathWithLayer=t.longestPath=void 0;var r=function(e){var t,r={};null===(t=e.sources())||void 0===t||t.forEach(function(t){return function t(n){var o,i,a=e.node(n);return a?r[n]?a.rank:(r[n]=!0,null===(o=e.outEdges(n))||void 0===o||o.forEach(function(r){var n=t(r.w)-e.edge(r).minlen;n&&(void 0===i||n<i)&&(i=n)}),i||(i=0),a.rank=i,i):0}(t)})};t.longestPath=r;var n=function(e){var t,r,n={};null===(t=e.sources())||void 0===t||t.forEach(function(t){e.node(t)&&function t(o){var i,a,s=e.node(o);return s?n[o]?s.rank:(n[o]=!0,null===(i=e.outEdges(o))||void 0===i||i.forEach(function(r){var n=t(r.w)-e.edge(r).minlen;n&&(void 0===a||n<a)&&(a=n)}),a||(a=0),(void 0===r||a<r)&&(r=a),s.rank=a,a):0}(t)}),void 0===r&&(r=0);var o={};e.nodes().forEach(function(t){var n=e.node(t);n&&(isNaN(n.layer)?n.rank-=r:function t(r,n){var i,a=e.node(r),s=isNaN(a.layer)?n:a.layer;(void 0===a.rank||a.rank<s)&&(a.rank=s),o[r]||(o[r]=!0,null===(i=e.outEdges(r))||void 0===i||i.map(function(r){t(r.w,s+e.edge(r).minlen)}))}(t,n.layer))})};t.longestPathWithLayer=n;var o=function(e,t){return e.node(t.w).rank-e.node(t.v).rank-e.edge(t).minlen};t.slack=o,t.default={longestPath:r,longestPathWithLayer:n,slack:o}},656:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.minBy=t.notime=t.time=t.partition=t.maxRank=t.addBorderNode=t.removeEmptyRanks=t.normalizeRanks=t.buildLayerMatrix=t.intersectRect=t.predecessorWeights=t.successorWeights=t.zipObject=t.asNonCompoundGraph=t.simplify=t.addDummyNode=void 0;var n=r(58652),o=r(95317);t.addDummyNode=function(e,t,r,n){var o;do{o="".concat(n).concat(Math.random())}while(e.hasNode(o));return r.dummy=t,e.setNode(o,r),o};t.simplify=function(e){var t=(new o.Graph).setGraph(e.graph());return e.nodes().forEach(function(r){t.setNode(r,e.node(r))}),e.edges().forEach(function(r){var n=t.edgeFromArgs(r.v,r.w)||{weight:0,minlen:1},o=e.edge(r);t.setEdge(r.v,r.w,{weight:n.weight+o.weight,minlen:Math.max(n.minlen,o.minlen)})}),t};t.asNonCompoundGraph=function(e){var t=new o.Graph({multigraph:e.isMultigraph()}).setGraph(e.graph());return e.nodes().forEach(function(r){var n;(null===(n=e.children(r))||void 0===n?void 0:n.length)||t.setNode(r,e.node(r))}),e.edges().forEach(function(r){t.setEdgeObj(r,e.edge(r))}),t};t.zipObject=function(e,t){return null===e||void 0===e?void 0:e.reduce(function(e,r,n){return e[r]=t[n],e},{})};t.successorWeights=function(e){var t={};return e.nodes().forEach(function(r){var n,o={};null===(n=e.outEdges(r))||void 0===n||n.forEach(function(t){var r;o[t.w]=(o[t.w]||0)+((null===(r=e.edge(t))||void 0===r?void 0:r.weight)||0)}),t[r]=o}),t};t.predecessorWeights=function(e){var r=e.nodes(),n=r.map(function(t){var r,n={};return null===(r=e.inEdges(t))||void 0===r||r.forEach(function(t){n[t.v]=(n[t.v]||0)+e.edge(t).weight}),n});return(0,t.zipObject)(r,n)};t.intersectRect=function(e,t){var r,n,o=Number(e.x),i=Number(e.y),a=Number(t.x)-o,s=Number(t.y)-i,u=Number(e.width)/2,l=Number(e.height)/2;return a||s?(Math.abs(s)*u>Math.abs(a)*l?(s<0&&(l=-l),r=l*a/s,n=l):(a<0&&(u=-u),r=u,n=u*s/a),{x:o+r,y:i+n}):{x:0,y:0}};t.buildLayerMatrix=function(e){for(var r=[],n=(0,t.maxRank)(e)+1,o=0;o<n;o++)r.push([]);e.nodes().forEach(function(t){var n=e.node(t);if(n){var o=n.rank;void 0!==o&&r[o]&&r[o].push(t)}});for(o=0;o<n;o++)r[o]=r[o].sort(function(t,r){var n,o,i,a;return i=null===(n=e.node(t))||void 0===n?void 0:n.order,a=null===(o=e.node(r))||void 0===o?void 0:o.order,Number(i)-Number(a)});return r};t.normalizeRanks=function(e){var t=e.nodes().filter(function(t){var r;return void 0!==(null===(r=e.node(t))||void 0===r?void 0:r.rank)}).map(function(t){return e.node(t).rank}),r=Math.min.apply(Math,t);e.nodes().forEach(function(t){var n=e.node(t);n.hasOwnProperty("rank")&&r!==1/0&&(n.rank-=r)})};t.removeEmptyRanks=function(e){var t=e.nodes(),r=t.filter(function(t){var r;return void 0!==(null===(r=e.node(t))||void 0===r?void 0:r.rank)}).map(function(t){return e.node(t).rank}),n=Math.min.apply(Math,r),o=[];t.forEach(function(t){var r,i=((null===(r=e.node(t))||void 0===r?void 0:r.rank)||0)-n;o[i]||(o[i]=[]),o[i].push(t)});for(var i=0,a=e.graph().nodeRankFactor||0,s=0;s<o.length;s++){var u=o[s];void 0===u?s%a!=0&&(i-=1):i&&(null===u||void 0===u||u.forEach(function(t){var r=e.node(t);r&&(r.rank=r.rank||0,r.rank+=i)}))}};t.addBorderNode=function(e,r,o,i){var a={width:0,height:0};return(0,n.isNumber)(o)&&(0,n.isNumber)(i)&&(a.rank=o,a.order=i),(0,t.addDummyNode)(e,"border",a,r)};t.maxRank=function(e){var t;return e.nodes().forEach(function(r){var n,o=null===(n=e.node(r))||void 0===n?void 0:n.rank;void 0!==o&&(void 0===t||o>t)&&(t=o)}),t||(t=0),t};t.partition=function(e,t){var r={lhs:[],rhs:[]};return null===e||void 0===e||e.forEach(function(e){t(e)?r.lhs.push(e):r.rhs.push(e)}),r};t.time=function(e,t){var r=Date.now();try{return t()}finally{console.log("".concat(e," time: ").concat(Date.now()-r,"ms"))}};t.notime=function(e,t){return t()};t.minBy=function(e,t){return e.reduce(function(e,r){return t(e)>t(r)?r:e})}},20245:function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&("get"in o?t.__esModule:!o.writable&&!o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&o(t,e,r);return i(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var u=a(r(56129)),l=s(r(60693)),c=s(r(8528)),f=r(10813);t.default=function(e,t){var r=e.nodes,o=e.edges,i=t.width,a=t.height;if(!(null===r||void 0===r?void 0:r.length))return Promise.resolve();var s=[];r.forEach(function(e){if(o.filter(function(t){return t.source===e.id||t.target===e.id}).length>1){var t=n({},e);delete t.size,s.push(t)}});var h=[];o.forEach(function(e){var t=s.find(function(t){return t.id===e.source}),r=s.find(function(t){return t.id===e.target});t&&r&&h.push(e)});var p=new f.DagreLayout({type:"dagre",ranksep:t.nodeMinGap,nodesep:t.nodeMinGap}).layout({nodes:s,edges:h}).nodes;r.forEach(function(e){var t=(p||[]).find(function(t){return t.id===e.id});e.x=(null===t||void 0===t?void 0:t.x)||i/2,e.y=(null===t||void 0===t?void 0:t.y)||a/2});var d=JSON.parse(JSON.stringify(r)),y=JSON.parse(JSON.stringify(o)),v=u.forceSimulation().nodes(d).force("link",u.forceLink(y).id(function(e){return e.id}).distance(function(e){return h.find(function(t){return t.source===e.source&&t.target===e.target})?30:20})).force("charge",u.forceManyBody()).force("center",u.forceCenter(i/2,a/2)).force("x",u.forceX(i/2)).force("y",u.forceY(a/2)).alpha(.3).alphaDecay(.08).alphaMin(.001);return new Promise(function(e){v.on("end",function(){r.forEach(function(e){var t=d.find(function(t){return t.id===e.id});t&&(e.x=t.x,e.y=t.y)});var n=Math.min.apply(Math,r.map(function(e){return e.x})),s=Math.max.apply(Math,r.map(function(e){return e.x})),u=Math.min.apply(Math,r.map(function(e){return e.y})),f=Math.max.apply(Math,r.map(function(e){return e.y})),h=i/(s-n),p=a/(f-u);r.forEach(function(e){void 0!==e.x&&h<1&&(e.x=(e.x-n)*h),void 0!==e.y&&p<1&&(e.y=(e.y-u)*p)}),r.forEach(function(e){e.sizeTemp=e.size,e.size=[10,10]}),(0,c.default)(r,o),r.forEach(function(e){e.size=e.sizeTemp||[],delete e.sizeTemp}),(0,l.default)({nodes:r,edges:o},t),e()})})}},60693:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(r(21860));t.default=function(e,t){if(!e.nodes||0===e.nodes.length)return e;var r=t.width,n=t.height,i=t.nodeMinGap,a=1e4,s=1e4;e.nodes.forEach(function(e){var t=e.size[0]||50,r=e.size[1]||50;a=Math.min(t,a),s=Math.min(r,s)});var u=new o.default;u.init(r,n,{CELL_H:s,CELL_W:a}),e.nodes.forEach(function(e){var t=u.occupyNearest(e);t&&(t.node={id:e.id,size:e.size},e.x=t.x,e.y=t.y,e.dx=t.dx,e.dy=t.dy)});for(var l=0;l<e.nodes.length;l++){var c=e.nodes[l],f=u.findGridByNodeId(c.id);if(!f)throw new Error("can not find node cell");var h=f.column,p=f.row;if(c.size[0]+i>a){for(var d=v=Math.ceil((c.size[0]+i)/a)-1,y=0;y<v&&(u.additionColumn.indexOf(h+y+1)>-1&&!u.cells[h+y+1][p].node);y++)d--;u.insertColumn(h,d)}if(c.size[1]+i>s){var v;for(d=v=Math.ceil((c.size[1]+i)/s)-1,y=0;y<v&&(u.additionRow.indexOf(p+y+1)>-1&&!u.cells[h][p+y+1].node);y++)d--;u.insertRow(p,d)}}for(l=0;l<u.columnNum;l++){var g=function(t){var r=u.cells[l][t];if(r.node){var n=e.nodes.find(function(e){var t;return e.id===(null===(t=null===r||void 0===r?void 0:r.node)||void 0===t?void 0:t.id)});n&&(n.x=r.x+n.size[0]/2,n.y=r.y+n.size[1]/2)}};for(y=0;y<u.rowNum;y++)g(y)}}},21860:function(e,t){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){this.cells=[],this.columnNum=0,this.rowNum=0,this.additionColumn=[],this.additionRow=[]}return e.prototype.init=function(t,r,n){this.cells=[],this.CELL_W=n.CELL_W||e.DEFAULT_CELL_W,this.CELL_H=n.CELL_H||e.DEFAULT_CELL_H,this.columnNum=Math.ceil(t/this.CELL_W),this.rowNum=Math.ceil(r/this.CELL_H),e.MIN_DIST=Math.pow(t,2)+Math.pow(r,2);for(var o=0;o<this.columnNum;o++){for(var i=[],a=0;a<this.rowNum;a++){var s={dx:o,dy:a,x:o*this.CELL_W,y:a*this.CELL_H,occupied:!1};i.push(s)}this.cells.push(i)}},e.prototype.findGridByNodeId=function(e){for(var t,r,n=0;n<this.columnNum;n++)for(var o=0;o<this.rowNum;o++)if(this.cells[n][o].node&&(null===(r=null===(t=this.cells[n][o])||void 0===t?void 0:t.node)||void 0===r?void 0:r.id)===e)return{column:n,row:o};return null},e.prototype.sqdist=function(e,t){return Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)},e.prototype.occupyNearest=function(t){for(var r,n=e.MIN_DIST,o=null,i=0;i<this.columnNum;i++)for(var a=0;a<this.rowNum;a++)!this.cells[i][a].occupied&&(r=this.sqdist(t,this.cells[i][a]))<n&&(n=r,o=this.cells[i][a]);return o&&(o.occupied=!0),o},e.prototype.insertColumn=function(e,t){if(!(t<=0)){for(var n=0;n<t;n++){this.cells[n+this.columnNum]=[];for(var o=0;o<this.rowNum;o++)this.cells[n+this.columnNum][o]={dx:n,dy:o,x:n*this.CELL_W,y:o*this.CELL_H,occupied:!1,node:null}}for(n=this.columnNum-1;n>e;n--)for(o=0;o<this.rowNum;o++)this.cells[n+t][o]=r(r({},this.cells[n][o]),{x:(n+t)*this.CELL_W,y:o*this.CELL_H}),this.cells[n][o]={x:n*this.CELL_W,y:o*this.CELL_H,occupied:!0,node:null};for(o=0;o<this.additionColumn.length;o++)this.additionColumn[o]>=e&&(this.additionColumn[o]+=t);for(n=0;n<t;n++)this.additionColumn.push(e+n+1);this.columnNum+=t}},e.prototype.insertRow=function(e,t){if(!(t<=0)){for(var n=0;n<t;n++)for(var o=0;o<this.columnNum;o++)this.cells[o][n+this.rowNum]={dx:o,dy:n,x:o*this.CELL_W,y:n*this.CELL_H,occupied:!1,node:null};for(o=0;o<this.columnNum;o++)for(n=this.rowNum-1;n>e;n--)this.cells[o][n+t]=r(r({},this.cells[o][n]),{dx:o,dy:n+t,x:o*this.CELL_W,y:(n+t)*this.CELL_H}),this.cells[o][n]={dx:o,dy:n,x:o*this.CELL_W,y:n*this.CELL_H,occupied:!1,node:null};for(n=0;n<this.additionRow.length;n++)this.additionRow[n]>=e&&(this.additionRow[n]+=t);for(o=0;o<t;o++)this.additionRow.push(e+o+1);this.rowNum+=t}},e.prototype.getNodes=function(){for(var e=[],t=0;t<this.columnNum;t++)for(var r=0;r<this.rowNum;r++)this.cells[t][r].node&&e.push(this.cells[t][r]);return e},e.MIN_DIST=50,e.DEFAULT_CELL_W=80,e.DEFAULT_CELL_H=80,e}();t.default=n},4957:function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ERLayout=void 0;var a=r(9284),s=i(r(20245)),u=function(e){function t(t){var r=e.call(this)||this;return r.width=300,r.height=300,r.nodeMinGap=50,r.onLayoutEnd=function(){},t&&r.updateCfg(t),r}return o(t,e),t.prototype.getDefaultCfg=function(){return{width:300,height:300,nodeMinGap:50}},t.prototype.execute=function(){var e=this,t=e.nodes,r=e.edges;return null===t||void 0===t||t.forEach(function(e){e.size||(e.size=[50,50])}),(0,s.default)({nodes:t,edges:r},{width:this.width,height:this.height,nodeMinGap:this.nodeMinGap}).then(function(){e.onLayoutEnd&&e.onLayoutEnd()})},t.prototype.getType=function(){return"er"},t}(a.Base);t.ERLayout=u},8528:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=1200,n=800,o=1e7,i=10,a=3.141592653589793,s=1.5707963267948966,u=.375*a,l=.625*a,c=new Map,f=10,h=10,p=.8,d=.1,y=.5;function v(e,t){var r=(c.get(e.id)||[]).find(function(e){return e.source===t.id||e.target===t.id}),n=e.size[0]*e.size[1],a=t.size[0]*t.size[1],f=n>a?t:e,h=n>a?e:t,p=f.x-f.size[0]/2,d=f.y-f.size[1]/2,y=f.x+f.size[0]/2,v=f.y+f.size[1]/2,g=h.x-h.size[0]/2,m=h.y-h.size[1]/2,b=h.x+h.size[0]/2,w=h.y+h.size[1]/2,_=f.x,x=f.y,S=h.x,O=h.y,P=0,E=0;if(y>=g&&b>=p&&v>=m&&w>=d){0===(E=Math.sqrt(Math.pow(S-_,2)+Math.pow(O-x,2)))&&(E=1e-7),P=1*i/E*100+((y<b?y:b)-(p>g?p:g))*((v<w?v:w)-(d>m?d:m)),P*=o}else{var k=!1,M=function(e,t,r){var n=e.x-e.size[0]/2,o=e.y-e.size[1]/2,i=e.x+e.size[0]/2,a=e.y+e.size[1]/2,c=t.x-t.size[0]/2,f=t.y-t.size[1]/2,h=t.x+t.size[0]/2,p=t.y+t.size[1]/2,d=e.x,y=e.y,v=t.x,g=t.y,m=v-d,b=Math.atan2(m,g-y),w=0,_=0,x=0,S=0;b>s?(_=o-p,w=c-i,x=parseFloat(_?(_/Math.cos(b)).toFixed(2):w.toFixed(2)),S=parseFloat(w?(w/Math.sin(b)).toFixed(2):_.toFixed(2))):x=S=0<b&&b<=s?(_=f-a)>(w=c-i)?parseFloat(_?(_/Math.cos(b)).toFixed(2):w.toFixed(2)):parseFloat(w?(w/Math.sin(b)).toFixed(2):_.toFixed(2)):b<-s?(_=o-p)>(w=-(h-n))?parseFloat(_?(_/Math.cos(b)).toFixed(2):w.toFixed(2)):parseFloat(w?(w/Math.sin(b)).toFixed(2):_.toFixed(2)):(_=f-a)>(w=Math.abs(m)>(i-n)/2?n-h:m)?parseFloat(_?(_/Math.cos(b)).toFixed(2):w.toFixed(2)):parseFloat(w&&0!==b?(w/Math.sin(b)).toFixed(2):_.toFixed(2));var O=parseFloat(b.toFixed(2)),P=r;return r&&(P=u<O&&O<l),{distance:Math.abs(x<S?x:S),isHoriz:P}}(f,h,k);E=M.distance,k=M.isHoriz,E<=i?P+=0!==E?r?i+1*o/E:i+o*i/E:o:(P+=E,r&&(P+=E*E))}return P}function g(e){for(var t=0,o=0;o<e.length;o++){var i=e[o];(i.x<0||i.y<0||i.x>r||i.y>n)&&(t+=1e12);for(var a=o+1;a<e.length;a++)t+=v(i,e[a])}return t}function m(e,t,r,n){var o=new Map;r.forEach(function(e,t){o.set(e.id,e)});var i=[];(n.filter(function(t){return t.source===e.id||t.target===e.id})||[]).forEach(function(t){var r=t.source===e.id?t.target:t.source,n=o.get(r);n&&i.push(n)});for(var a=!0,s=0;s<i.length;s++){var u=i[s],l=180*Math.atan((e.y-u.y)/(u.x-e.y)),c=180*Math.atan((t.y-u.y)/(u.x-t.y));if((l<30||l>150)&&!(c<30||c>150)||l*c<0){a=!1;break}if(l>70&&l<110&&!(c>70&&c<110)||l*c<0){a=!1;break}if((u.x-e.x)*(u.x-t.x)<0){a=!1;break}if((u.y-e.y)*(u.y-t.y)<0){a=!1;break}}return a}function b(e,t){for(var r=!1,n=1*f,o=1*h,i=[n,-n,0,0],a=[0,0,o,-o],s=0;s<e.length;++s)for(var u=e[s],l=w(u,e),c=0;c<i.length;c++){if(m(u,{x:u.x+i[c],y:u.y+a[c]},e,t)){u.x+=i[c],u.y+=a[c];var v=w(u,e),b=Math.random();v<l?(l=v,r=!0):b<p&&b>d?(l=v,r=!0):(u.x-=i[c],u.y-=a[c])}}return p>d&&(p*=y),r?g(e):0}function w(e,t){var o=0;(e.x<0||e.y<0||e.x+e.size[0]+20>r||e.y+e.size[1]+20>n)&&(o+=1e12);for(var i=0;i<t.length;++i)e.id!==t[i].id&&(o+=v(e,t[i]));return o}t.default=function(e,t){if(0===e.length)return{nodes:e,edges:t};e.forEach(function(e){var r=t.filter(function(t){return t.source===e.id||t.target===e.id});c.set(e,r)}),e.sort(function(e,t){var r,n;return(null===(r=c.get(e.id))||void 0===r?void 0:r.length)-(null===(n=c.get(t.id))||void 0===n?void 0:n.length)});for(var r=g(e),n=20,o=1,i=0,a=0;n>0&&!(++a>=50);){var s=b(e,t);0!==s&&(i=s),o=i-r,r=i,0===o?--n:n=20}return e.forEach(function(e){e.x=e.x-e.size[0]/2,e.y=e.y-e.size[1]/2}),{nodes:e,edges:t}}},52569:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.forceNBody=void 0;var n=r(21617);function o(e){var t=0,r=0,n=0;if(e.length){for(var o=0;o<4;o++){(i=e[o])&&i.weight&&(t+=i.weight,r+=i.x*i.weight,n+=i.y*i.weight)}e.x=r/t,e.y=n/t,e.weight=t}else{var i=e;e.x=i.data.x,e.y=i.data.y,e.weight=i.data.weight}}t.forceNBody=function(e,t,r,a,s){var u=r/a,l=e.map(function(e,r){var n=t[e.id],o=n.data,i=n.x,a=n.y,s=n.size,l=o.layout.force.nodeStrength;return{x:i,y:a,size:s,index:r,vx:0,vy:0,weight:u*l}}),c=(0,n.quadtree)(l,function(e){return e.x},function(e){return e.y}).visitAfter(o);return l.forEach(function(e){!function(e,t){t.visit(function(t,r,n,o,a){return i(t,r,n,o,a,e)})}(e,c)}),l.map(function(r,n){var o=t[e[n].id].data.layout.force.mass,i=void 0===o?1:o;s[2*n]=r.vx/i,s[2*n+1]=r.vy/i}),s};var i=function(e,t,r,n,o,i){var a=i.x-e.x||.1,s=i.y-e.y||.1,u=n-t,l=a*a+s*s,c=Math.sqrt(l)*l;if(u*u*.81<l){var f=e.weight/c;return i.vx+=a*f,i.vy+=s*f,!0}if(e.length)return!1;if(e.data!==i){f=e.data.weight/c;i.vx+=a*f,i.vy+=s*f}}},13490:function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.Force2Layout=void 0;var a=r(9284),s=r(58652),u=r(52569),l=function(e,t){return e?(0,s.isNumber)(e)?function(t){return e}:e:function(e){return t||1}},c=function(e){function t(t){var r=e.call(this)||this;r.maxIteration=1e3,r.workerEnabled=!1,r.edgeStrength=200,r.nodeStrength=1e3,r.coulombDisScale=.005,r.damping=.9,r.maxSpeed=500,r.minMovement=.4,r.interval=.02,r.factor=1,r.linkDistance=200,r.gravity=0,r.clusterNodeStrength=20,r.preventOverlap=!0,r.distanceThresholdMode="mean",r.tick=function(){},r.nodes=[],r.edges=[],r.width=300,r.height=300,r.nodeMap={},r.nodeIdxMap={},r.judgingDistance=0,r.centripetalOptions={leaf:2,single:2,others:1,center:function(e){return{x:r.width/2,y:r.height/2}}};var n=t.getMass;return r.propsGetMass=n,r.updateCfg(t),r}return o(t,e),t.prototype.getCentripetalOptions=function(){var e,t=this,r=t.leafCluster,n=t.clustering,o=t.nodeClusterBy,a=t.nodes,u=t.nodeMap,l=t.clusterNodeStrength,c=function(e){return"function"==typeof l?l(e):l},f={};if(r){e=this.getSameTypeLeafMap()||{};var h=Array.from(new Set(null===a||void 0===a?void 0:a.map(function(e){return e[o]})))||[];f={single:100,leaf:function(t,r,n){var o=e[t.id]||{},i=o.relativeLeafNodes,a=o.sameTypeLeafNodes;return(null===a||void 0===a?void 0:a.length)===(null===i||void 0===i?void 0:i.length)||1===(null===h||void 0===h?void 0:h.length)?1:c(t)},others:1,center:function(t,r,n){var o,i,a=((null===(o=t.data)||void 0===o?void 0:o.layout)||{}).degree;if(!a)return{x:100,y:100};if(1===a){var u=(e[t.id]||{}).sameTypeLeafNodes,l=void 0===u?[]:u;1===l.length?i=void 0:l.length>1&&(i=(0,s.getAvgNodePosition)(l))}else i=void 0;return{x:null===i||void 0===i?void 0:i.x,y:null===i||void 0===i?void 0:i.y}}}}if(n){e||(e=this.getSameTypeLeafMap());var p={};Array.from(new Set(a.map(function(e,t){return e[o]}))).filter(function(e){return void 0!==e}).forEach(function(e){var t=a.filter(function(t){return t[o]===e}).map(function(e){return u[e.id]});p[e]=(0,s.getAvgNodePosition)(t)}),f={single:function(e){return c(e)},leaf:function(e){return c(e)},others:function(e){return c(e)},center:function(e,t,r){var n=p[e[o]];return{x:null===n||void 0===n?void 0:n.x,y:null===n||void 0===n?void 0:n.y}}}}this.centripetalOptions=i(i({},this.centripetalOptions),f);var d=this.centripetalOptions,y=d.leaf,v=d.single,g=d.others;y&&"function"!=typeof y&&(this.centripetalOptions.leaf=function(){return y}),v&&"function"!=typeof v&&(this.centripetalOptions.single=function(){return v}),g&&"function"!=typeof g&&(this.centripetalOptions.others=function(){return g})},t.prototype.updateCfg=function(e){e&&Object.assign(this,e)},t.prototype.getDefaultCfg=function(){return{maxIteration:500,gravity:10,enableTick:!0,animate:!0}},t.prototype.execute=function(){var e=this;e.stop();var t=e.nodes,r=e.edges,n=e.defSpringLen;if(e.judgingDistance=0,t&&0!==t.length){e.width||"undefined"==typeof window||(e.width=window.innerWidth),e.height||"undefined"==typeof window||(e.height=window.innerHeight),e.center||(e.center=[e.width/2,e.height/2]);var o=e.center;if(1===t.length)return t[0].x=o[0],t[0].y=o[1],void e.onLayoutEnd([i({},t[0])]);e.degreesMap=(0,s.getDegreeMap)(t,r),e.propsGetMass?e.getMass=e.propsGetMass:e.getMass=function(t){var r=1;(0,s.isNumber)(t.mass)&&(r=t.mass);var n=e.degreesMap[t.id].all;return!n||n<5?r:5*n*r};var a,u=e.nodeSize;if(e.preventOverlap){var c,f=e.nodeSpacing;c=(0,s.isNumber)(f)?function(){return f}:(0,s.isFunction)(f)?f:function(){return 0},a=u?(0,s.isArray)(u)?function(e){return Math.max(u[0],u[1])+c(e)}:function(e){return u+c(e)}:function(e){return e.size?(0,s.isArray)(e.size)?Math.max(e.size[0],e.size[1])+c(e):(0,s.isObject)(e.size)?Math.max(e.size.width,e.size.height)+c(e):e.size+c(e):10+c(e)}}e.nodeSize=a,e.linkDistance=l(e.linkDistance,1),e.nodeStrength=l(e.nodeStrength,1),e.edgeStrength=l(e.edgeStrength,1);var h={},p={};t.forEach(function(t,n){(0,s.isNumber)(t.x)||(t.x=Math.random()*e.width),(0,s.isNumber)(t.y)||(t.y=Math.random()*e.height);var o=e.degreesMap[t.id];h[t.id]=i(i({},t),{data:i(i({},t.data),{size:e.nodeSize(t)||30,layout:{inDegree:o.in,outDegree:o.out,degree:o.all,tDegree:o.in,sDegree:o.out,force:{mass:e.getMass(t),nodeStrength:e.nodeStrength(t,r)}}})}),p[t.id]=n}),e.nodeMap=h,e.nodeIdxMap=p,e.edgeInfos=[],null===r||void 0===r||r.forEach(function(t){var r=h[t.source],o=h[t.target];r&&o?e.edgeInfos.push({edgeStrength:e.edgeStrength(t),linkDistance:n?n(i(i({},t),{source:r,target:o}),r,o):e.linkDistance(t,r,o)||1+(u(r)+u(r)||0)/2}):elf.edgeInfos.push({})}),this.getCentripetalOptions(),e.onLayoutEnd=e.onLayoutEnd||function(){},e.run()}else e.onLayoutEnd([])},t.prototype.run=function(){var e=this,t=e.maxIteration,r=e.nodes,n=e.edges,o=e.workerEnabled,i=e.minMovement,a=e.animate,s=e.nodeMap,u=e.height;if(e.currentMinY=0,e.currentMaxY=u,r){var l=[];if(r.forEach(function(e,t){l[2*t]=0,l[2*t+1]=0}),this.defSideCoe&&"function"==typeof this.defSideCoe){var c={};n.forEach(function(e){var t=e.source,r=e.target;c[t]=c[t]||[],c[t].push(e),c[r]=c[r]||[],c[r].push(e)}),this.relatedEdges=c}var f=t;if(o||!a){for(var h=0;(e.judgingDistance>i||h<1)&&h<f;h++)h,e.runOneStep(h,l);e.onLayoutEnd(Object.values(s))}else{if("undefined"==typeof window)return;var p=0;this.timeInterval=window.setInterval(function(){r&&(e.runOneStep(p,l),(++p>=f||e.judgingDistance<i)&&(e.onLayoutEnd(Object.values(s)),window.clearInterval(e.timeInterval)))},0)}}},t.prototype.runOneStep=function(e,t){var r,n=this.nodes,o=this.edges,i=(this.nodeMap,this.monitor),a=[];if(null===n||void 0===n?void 0:n.length){this.calRepulsive(a),o&&this.calAttractive(a),this.calGravity(a),this.attractToSide(a);var s=this.interval;if(this.updateVelocity(a,t,s),this.updatePosition(t,s),null===(r=this.tick)||void 0===r||r.call(this),i)i({energy:this.calTotalEnergy(a),nodes:n,edges:o,iterations:e})}},t.prototype.calTotalEnergy=function(e){var t=this.nodes,r=this.nodeMap;if(!(null===t||void 0===t?void 0:t.length))return 0;var n=0;return t.forEach(function(t,o){var i=e[2*o],a=e[2*o+1],s=i*i+a*a,u=r[t.id].data.layout.force.mass;n+=(void 0===u?1:u)*s*.5}),n},t.prototype.calRepulsive=function(e){var t=this.nodes,r=this.nodeMap,n=this.factor,o=this.coulombDisScale;this.nodeSize;(0,u.forceNBody)(t,r,n,o*o,e)},t.prototype.calAttractive=function(e){var t=this.edges,r=this.nodeMap,n=this.nodeIdxMap,o=this.edgeInfos;this.nodeSize;t.forEach(function(t,i){var a=(0,s.getEdgeTerminal)(t,"source"),u=(0,s.getEdgeTerminal)(t,"target"),l=r[a],c=r[u];if(l&&c){var f=c.x-l.x,h=c.y-l.y;f||h||(f=.01*Math.random(),h=.01*Math.random());var p=Math.sqrt(f*f+h*h),d=f/p,y=h/p,v=o[i]||{},g=v.linkDistance,m=void 0===g?200:g,b=v.edgeStrength,w=(m-p)*(void 0===b?200:b),_=1/(l.data.layout.force.mass||1),x=1/(c.data.layout.force.mass||1),S=d*w,O=y*w,P=2*n[a],E=2*n[u];e[P]-=S*_,e[P+1]-=O*_,e[E]+=S*x,e[E+1]+=O*x}})},t.prototype.calGravity=function(e){var t,r=this.nodes,n=this.edges,o=void 0===n?[]:n,i=this.nodeMap,a=this.width,u=this.height,l=this.center,c=this.gravity,f=this.degreesMap,h=this.centripetalOptions;if(r)for(var p=r.length,d=0;d<p;d++){var y=2*d,v=i[r[d].id],g=v.data.layout.force.mass,m=void 0===g?1:g,b=0,w=0,_=c,x=f[v.id],S=x.in,O=x.out,P=x.all,E=null===(t=this.getCenter)||void 0===t?void 0:t.call(this,v,P);if(E){var k=E[0],M=E[1],C=E[2];b=v.x-k,w=v.y-M,_=C}else b=v.x-l[0],w=v.y-l[1];if(_&&(e[y]-=_*b/m,e[y+1]-=_*w/m),h){var j=h.leaf,T=h.single,A=h.others,I=h.center,R=(null===I||void 0===I?void 0:I(v,r,o,a,u))||{x:0,y:0,centerStrength:0},L=R.x,N=R.y,D=R.centerStrength;if(!(0,s.isNumber)(L)||!(0,s.isNumber)(N))continue;var B=(v.x-L)/m,F=(v.y-N)/m;if(D&&(e[y]-=D*B,e[y+1]-=D*F),0===P){var G=T(v);if(!G)continue;e[y]-=G*B,e[y+1]-=G*F;continue}if(0===S||0===O){var z=j(v,r,o);if(!z)continue;e[y]-=z*B,e[y+1]-=z*F;continue}var U=A(v);if(!U)continue;e[y]-=U*B,e[y+1]-=U*F}}},t.prototype.attractToSide=function(e){var t=this,r=t.defSideCoe,n=(t.height,t.nodes),o=t.relatedEdges,i=t.currentMinY,a=void 0===i?0:i,s=t.currentMaxY,u=void 0===s?this.height:s;r&&"function"==typeof r&&(null===n||void 0===n?void 0:n.length)&&n.forEach(function(t,n){var i=r(t,o[t.id]||[]);if(0!==i){var s=i<0?a:u,l=Math.abs(i);e[2*n+1]-=l*(t.y-s)}})},t.prototype.updateVelocity=function(e,t,r){var n=this.nodes,o=this.damping,i=this.maxSpeed;(null===n||void 0===n?void 0:n.length)&&n.forEach(function(n,a){var s=(t[2*a]+e[2*a]*r)*o||.01,u=(t[2*a+1]+e[2*a+1]*r)*o||.01,l=Math.sqrt(s*s+u*u);if(l>i){var c=i/l;s*=c,u*=c}t[2*a]=s,t[2*a+1]=u})},t.prototype.updatePosition=function(e,t){var r=this,n=r.nodes,o=r.distanceThresholdMode,i=r.nodeMap;if(null===n||void 0===n?void 0:n.length){var a=0;"max"===o?r.judgingDistance=-1/0:"min"===o&&(r.judgingDistance=1/0);var u=1/0,l=-1/0;n.forEach(function(n,c){var f=i[n.id];if((0,s.isNumber)(n.fx)&&(0,s.isNumber)(n.fy))return n.x=n.fx,n.y=n.fy,f.x=n.x,void(f.y=n.y);var h=e[2*c]*t,p=e[2*c+1]*t;n.x+=h,n.y+=p,f.x=n.x,f.y=n.y,n.y<u&&(u=n.y),n.y>l&&(l=n.y);var d=Math.sqrt(h*h+p*p);switch(o){case"max":r.judgingDistance<d&&(r.judgingDistance=d);break;case"min":r.judgingDistance>d&&(r.judgingDistance=d);break;default:a+=d}}),this.currentMinY=u,this.currentMaxY=l,o&&"mean"!==o||(r.judgingDistance=a/n.length)}else this.judgingDistance=0},t.prototype.stop=function(){this.timeInterval&&"undefined"!=typeof window&&window.clearInterval(this.timeInterval)},t.prototype.destroy=function(){this.stop(),this.tick=null,this.nodes=null,this.edges=null,this.destroyed=!0},t.prototype.getType=function(){return"force2"},t.prototype.getSameTypeLeafMap=function(){var e=this,t=e.nodeClusterBy,r=e.nodes,n=e.edges,o=e.nodeMap,i=e.degreesMap;if(null===r||void 0===r?void 0:r.length){var a={};return r.forEach(function(e,r){1===i[e.id].all&&(a[e.id]=(0,s.getCoreNodeAndRelativeLeafNodes)("leaf",e,n,t,i,o))}),a}},t}(a.Base);t.Force2Layout=c},39398:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this.id=e.id||0,this.rx=e.rx,this.ry=e.ry,this.fx=0,this.fy=0,this.mass=e.mass,this.degree=e.degree,this.g=e.g||0}return e.prototype.distanceTo=function(e){var t=this.rx-e.rx,r=this.ry-e.ry;return Math.hypot(t,r)},e.prototype.setPos=function(e,t){this.rx=e,this.ry=t},e.prototype.resetForce=function(){this.fx=0,this.fy=0},e.prototype.addForce=function(e){var t=e.rx-this.rx,r=e.ry-this.ry,n=Math.hypot(t,r);n=n<1e-4?1e-4:n;var o=this.g*(this.degree+1)*(e.degree+1)/n;this.fx+=o*t/n,this.fy+=o*r/n},e.prototype.in=function(e){return e.contains(this.rx,this.ry)},e.prototype.add=function(t){var r=this.mass+t.mass;return new e({rx:(this.rx*this.mass+t.rx*t.mass)/r,ry:(this.ry*this.mass+t.ry*t.mass)/r,mass:r,degree:this.degree+t.degree})},e}();t.default=r},40432:function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ForceAtlas2Layout=void 0;var a=r(9284),s=r(58652),u=i(r(39398)),l=i(r(69785)),c=i(r(49122)),f=function(e){function t(t){var r=e.call(this)||this;return r.center=[0,0],r.width=300,r.height=300,r.nodes=[],r.edges=[],r.kr=5,r.kg=1,r.mode="normal",r.preventOverlap=!1,r.dissuadeHubs=!1,r.barnesHut=void 0,r.maxIteration=0,r.ks=.1,r.ksmax=10,r.tao=.1,r.onLayoutEnd=function(){},r.prune=void 0,r.updateCfg(t),r}return o(t,e),t.prototype.getDefaultCfg=function(){return{}},t.prototype.execute=function(){var e=this.nodes,t=this.onLayoutEnd,r=this.prune,n=this.maxIteration;this.width||"undefined"==typeof window||(this.width=window.innerWidth),this.height||"undefined"==typeof window||(this.height=window.innerHeight);for(var o=[],i=e.length,a=0;a<i;a+=1){var u=e[a],l=10,c=10;(0,s.isNumber)(u.size)&&(l=u.size,c=u.size),(0,s.isArray)(u.size)?(isNaN(u.size[0])||(l=u.size[0]),isNaN(u.size[1])||(c=u.size[1])):(0,s.isObject)(u.size)&&(l=u.size.width,c=u.size.height),this.getWidth&&!isNaN(this.getWidth(u))&&(c=this.getWidth(u)),this.getHeight&&!isNaN(this.getHeight(u))&&(l=this.getHeight(u));var f=Math.max(l,c);o.push(f)}void 0===this.barnesHut&&i>250&&(this.barnesHut=!0),void 0===this.prune&&i>100&&(this.prune=!0),0!==this.maxIteration||this.prune?0===this.maxIteration&&r&&(n=100,i<=200&&i>100?n=500:i>200&&(n=950),this.maxIteration=n):(n=250,i<=200&&i>100?n=1e3:i>200&&(n=1200),this.maxIteration=n),this.kr||(this.kr=50,i>100&&i<=500?this.kr=20:i>500&&(this.kr=1)),this.kg||(this.kg=20,i>100&&i<=500?this.kg=10:i>500&&(this.kg=1)),this.nodes=this.updateNodesByForces(o),t()},t.prototype.updateNodesByForces=function(e){for(var t=this.edges,r=this.maxIteration,n=this.nodes,o=t.filter(function(e){return(0,s.getEdgeTerminal)(e,"source")!==(0,s.getEdgeTerminal)(e,"target")}),i=n.length,a=o.length,u=[],l={},c={},f=[],h=0;h<i;h+=1)l[n[h].id]=h,u[h]=0,(void 0===n[h].x||isNaN(n[h].x))&&(n[h].x=1e3*Math.random()),(void 0===n[h].y||isNaN(n[h].y))&&(n[h].y=1e3*Math.random()),f.push({x:n[h].x,y:n[h].y});for(h=0;h<a;h+=1){for(var p=void 0,d=void 0,y=0,v=0,g=0;g<i;g+=1){var m=(0,s.getEdgeTerminal)(o[h],"source"),b=(0,s.getEdgeTerminal)(o[h],"target");n[g].id===m?(p=n[g],y=g):n[g].id===b&&(d=n[g],v=g),c[h]={sourceIdx:y,targetIdx:v}}p&&(u[l[p.id]]+=1),d&&(u[l[d.id]]+=1)}var w=r;if(n=this.iterate(w,l,c,a,u,e),this.prune){for(g=0;g<a;g+=1)u[c[g].sourceIdx]<=1?(n[c[g].sourceIdx].x=n[c[g].targetIdx].x,n[c[g].sourceIdx].y=n[c[g].targetIdx].y):u[c[g].targetIdx]<=1&&(n[c[g].targetIdx].x=n[c[g].sourceIdx].x,n[c[g].targetIdx].y=n[c[g].sourceIdx].y);this.prune=!1,this.barnesHut=!1,w=100,n=this.iterate(w,l,c,a,u,e)}return n},t.prototype.iterate=function(e,t,r,n,o,i){for(var a=this.nodes,s=this.kr,l=this.preventOverlap,c=this.barnesHut,f=a.length,h=0,p=e,d=[],y=[],v=[],g=0;g<f;g+=1)if(d[2*g]=0,d[2*g+1]=0,c){var m={id:g,rx:a[g].x,ry:a[g].y,mass:1,g:s,degree:o[g]};v[g]=new u.default(m)}for(;p>0;){for(g=0;g<f;g+=1)y[2*g]=d[2*g],y[2*g+1]=d[2*g+1],d[2*g]=0,d[2*g+1]=0;d=this.getAttrForces(p,50,n,t,r,o,i,d),d=c&&(l&&p>50||!l)?this.getOptRepGraForces(d,v,o):this.getRepGraForces(p,50,d,100,i,o);var b=this.updatePos(d,y,h,o);a=b.nodes,h=b.sg,p--,this.tick&&this.tick()}return a},t.prototype.getAttrForces=function(e,t,r,n,o,i,a,s){for(var u=this.nodes,l=this.preventOverlap,c=this.dissuadeHubs,f=this.mode,h=this.prune,p=0;p<r;p+=1){var d=u[o[p].sourceIdx],y=o[p].sourceIdx,v=u[o[p].targetIdx],g=o[p].targetIdx;if(!h||!(i[y]<=1||i[g]<=1)){var m=[v.x-d.x,v.y-d.y],b=Math.hypot(m[0],m[1]);b=b<1e-4?1e-4:b,m[0]=m[0]/b,m[1]=m[1]/b,l&&e<t&&(b=b-a[y]-a[g]);var w=b,_=w;"linlog"===f&&(_=w=Math.log(1+b)),c&&(w=b/i[y],_=b/i[g]),l&&e<t&&b<=0?(w=0,_=0):l&&e<t&&b>0&&(w=b,_=b),s[2*n[d.id]]+=w*m[0],s[2*n[v.id]]-=_*m[0],s[2*n[d.id]+1]+=w*m[1],s[2*n[v.id]+1]-=_*m[1]}}return s},t.prototype.getRepGraForces=function(e,t,r,n,o,i){for(var a=this.nodes,s=this.preventOverlap,u=this.kr,l=this.kg,c=this.center,f=this.prune,h=a.length,p=0;p<h;p+=1){for(var d=p+1;d<h;d+=1)if(!f||!(i[p]<=1||i[d]<=1)){var y=[a[d].x-a[p].x,a[d].y-a[p].y],v=Math.hypot(y[0],y[1]);v=v<1e-4?1e-4:v,y[0]=y[0]/v,y[1]=y[1]/v,s&&e<t&&(v=v-o[p]-o[d]);var g=u*(i[p]+1)*(i[d]+1)/v;s&&e<t&&v<0?g=n*(i[p]+1)*(i[d]+1):s&&e<t&&0===v?g=0:s&&e<t&&v>0&&(g=u*(i[p]+1)*(i[d]+1)/v),r[2*p]-=g*y[0],r[2*d]+=g*y[0],r[2*p+1]-=g*y[1],r[2*d+1]+=g*y[1]}var m=[a[p].x-c[0],a[p].y-c[1]],b=Math.hypot(m[0],m[1]);m[0]=m[0]/b,m[1]=m[1]/b;var w=l*(i[p]+1);r[2*p]-=w*m[0],r[2*p+1]-=w*m[1]}return r},t.prototype.getOptRepGraForces=function(e,t,r){for(var n=this.nodes,o=this.kg,i=this.center,a=this.prune,s=n.length,u=9e10,f=-9e10,h=9e10,p=-9e10,d=0;d<s;d+=1)a&&r[d]<=1||(t[d].setPos(n[d].x,n[d].y),n[d].x>=f&&(f=n[d].x),n[d].x<=u&&(u=n[d].x),n[d].y>=p&&(p=n[d].y),n[d].y<=h&&(h=n[d].y));var y={xmid:(f+u)/2,ymid:(p+h)/2,length:Math.max(f-u,p-h),massCenter:i,mass:s},v=new l.default(y),g=new c.default(v);for(d=0;d<s;d+=1)a&&r[d]<=1||t[d].in(v)&&g.insert(t[d]);for(d=0;d<s;d+=1)if(!(a&&r[d]<=1)){t[d].resetForce(),g.updateForce(t[d]),e[2*d]-=t[d].fx,e[2*d+1]-=t[d].fy;var m=[n[d].x-i[0],n[d].y-i[1]],b=Math.hypot(m[0],m[1]);b=b<1e-4?1e-4:b,m[0]=m[0]/b,m[1]=m[1]/b;var w=o*(r[d]+1);e[2*d]-=w*m[0],e[2*d+1]-=w*m[1]}return e},t.prototype.updatePos=function(e,t,r,n){for(var o=this.nodes,i=this.ks,a=this.tao,u=this.prune,l=this.ksmax,c=o.length,f=[],h=[],p=0,d=0,y=0;y<c;y+=1)if(!(u&&n[y]<=1)){var v=[e[2*y]-t[2*y],e[2*y+1]-t[2*y+1]],g=Math.hypot(v[0],v[1]),m=[e[2*y]+t[2*y],e[2*y+1]+t[2*y+1]],b=Math.hypot(m[0],m[1]);f[y]=g,h[y]=b/2,p+=(n[y]+1)*f[y],d+=(n[y]+1)*h[y]}var w=r;r=a*d/p,0!==w&&(r=r>1.5*w?1.5*w:r);for(y=0;y<c;y+=1)if(!(u&&n[y]<=1||(0,s.isNumber)(o[y].fx)&&(0,s.isNumber)(o[y].fy))){var _=i*r/(1+r*Math.sqrt(f[y])),x=Math.hypot(e[2*y],e[2*y+1]),S=l/(x=x<1e-4?1e-4:x),O=(_=_>S?S:_)*e[2*y],P=_*e[2*y+1];o[y].x+=O,o[y].y+=P}return{nodes:o,sg:r}},t}(a.Base);t.ForceAtlas2Layout=f},69785:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this.xmid=e.xmid,this.ymid=e.ymid,this.length=e.length,this.massCenter=e.massCenter||[0,0],this.mass=e.mass||1}return e.prototype.getLength=function(){return this.length},e.prototype.contains=function(e,t){var r=this.length/2;return e<=this.xmid+r&&e>=this.xmid-r&&t<=this.ymid+r&&t>=this.ymid-r},e.prototype.NW=function(){return new e({xmid:this.xmid-this.length/4,ymid:this.ymid+this.length/4,length:this.length/2})},e.prototype.NE=function(){return new e({xmid:this.xmid+this.length/4,ymid:this.ymid+this.length/4,length:this.length/2})},e.prototype.SW=function(){return new e({xmid:this.xmid-this.length/4,ymid:this.ymid-this.length/4,length:this.length/2})},e.prototype.SE=function(){return new e({xmid:this.xmid+this.length/4,ymid:this.ymid-this.length/4,length:this.length/2})},e}();t.default=r},49122:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this.body=null,this.quad=null,this.NW=null,this.NE=null,this.SW=null,this.SE=null,this.theta=.5,null!=e&&(this.quad=e)}return e.prototype.insert=function(t){null!=this.body?this._isExternal()?(this.quad&&(this.NW=new e(this.quad.NW()),this.NE=new e(this.quad.NE()),this.SW=new e(this.quad.SW()),this.SE=new e(this.quad.SE())),this._putBody(this.body),this._putBody(t),this.body=this.body.add(t)):(this.body=this.body.add(t),this._putBody(t)):this.body=t},e.prototype._putBody=function(e){this.quad&&(e.in(this.quad.NW())&&this.NW?this.NW.insert(e):e.in(this.quad.NE())&&this.NE?this.NE.insert(e):e.in(this.quad.SW())&&this.SW?this.SW.insert(e):e.in(this.quad.SE())&&this.SE&&this.SE.insert(e))},e.prototype._isExternal=function(){return null==this.NW&&null==this.NE&&null==this.SW&&null==this.SE},e.prototype.updateForce=function(e){null!=this.body&&e!==this.body&&(this._isExternal()?e.addForce(this.body):(this.quad?this.quad.getLength():0)/this.body.distanceTo(e)<this.theta?e.addForce(this.body):(this.NW&&this.NW.updateForce(e),this.NE&&this.NE.updateForce(e),this.SW&&this.SW.updateForce(e),this.SE&&this.SE.updateForce(e)))},e}();t.default=r},556:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&("get"in o?t.__esModule:!o.writable&&!o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});var a=i(r(56129)),s=r(58652);t.default=function(){function e(e){return function(){return e}}var t,r=function(e){return e.cluster},n=e(1),o=e(-1),i=e(100),u=e(.1),l=[0,0],c=[],f={},h=[],p=100,d=100,y={none:{x:0,y:0}},v=[],g="force",m=!0,b=.1;function w(e){if(!m)return w;t.tick(),x();for(var n=0,o=c.length,i=void 0,a=e*b;n<o;++n)(i=c[n]).vx+=(y[r(i)].x-i.x)*a,i.vy+=(y[r(i)].y-i.y)*a}function _(){c&&function(){if(c&&c.length){if(void 0===r(c[0]))throw Error("Couldnt find the grouping attribute for the nodes. Make sure to set it up with forceInABox.groupBy('clusterAttr') before calling .links()");var e,l,y,g,m,b,w,_=(y=[],g=[],m={},b={},w=[],b=function(e){var t={};return e.forEach(function(e){var n=r(e);t[n]||(t[n]={count:0,sumforceNodeSize:0})}),e.forEach(function(e){var o=r(e),i=n(e),a=t[o];a.count=a.count+1,a.sumforceNodeSize=a.sumforceNodeSize+Math.PI*(i*i)*1.3,t[o]=a}),t}(c),e={},l=[],h.forEach(function(t){var n=function(e){var t=(0,s.getEdgeTerminal)(e,"source"),n=(0,s.getEdgeTerminal)(e,"target"),o=r(f[t]),i=r(f[n]);return o<=i?"".concat(o,"~").concat(i):"".concat(i,"~").concat(o)}(t),o=0;void 0!==e[n]&&(o=e[n]),o+=1,e[n]=o}),Object.entries(e).forEach(function(e){var t=e[0],r=e[1],n=t.split("~")[0],o=t.split("~")[1];void 0!==n&&void 0!==o&&l.push({source:n,target:o,count:r})}),w=l,Object.keys(b).forEach(function(e,t){var r=b[e];y.push({id:e,size:r.count,r:Math.sqrt(r.sumforceNodeSize/Math.PI)}),m[e]=t}),w.forEach(function(e){var t=(0,s.getEdgeTerminal)(e,"source"),r=(0,s.getEdgeTerminal)(e,"target"),n=m[t],o=m[r];void 0!==n&&void 0!==o&&g.push({source:n,target:o,count:e.count})}),{nodes:y,links:g});t=a.forceSimulation(_.nodes).force("x",a.forceX(p).strength(.1)).force("y",a.forceY(d).strength(.1)).force("collide",a.forceCollide(function(e){return e.r}).iterations(4)).force("charge",a.forceManyBody().strength(o)).force("links",a.forceLink(_.nodes.length?_.links:[]).distance(i).strength(u)),v=t.nodes(),x()}}()}function x(){return y={none:{x:0,y:0}},v.forEach(function(e){y[e.id]={x:e.x-l[0],y:e.y-l[1]}}),y}return w.initialize=function(e){c=e,_()},w.template=function(e){return arguments.length?(g=e,_(),w):g},w.groupBy=function(e){return arguments.length?"string"==typeof e?(r=function(t){return t[e]},w):(r=e,w):r},w.enableGrouping=function(e){return arguments.length?(m=e,w):m},w.strength=function(e){return arguments.length?(b=e,w):b},w.centerX=function(e){return arguments.length?(p=e,w):p},w.centerY=function(e){return arguments.length?(d=e,w):d},w.nodes=function(e){return arguments.length?(function(e){f={},e.forEach(function(e){f[e.id]=e})}(e||[]),c=e||[],w):c},w.links=function(e){return arguments.length?(h=e||[],_(),w):h},w.forceNodeSize=function(t){return arguments.length?(n="function"==typeof t?t:e(+t),_(),w):n},w.nodeSize=w.forceNodeSize,w.forceCharge=function(t){return arguments.length?(o="function"==typeof t?t:e(+t),_(),w):o},w.forceLinkDistance=function(t){return arguments.length?(i="function"==typeof t?t:e(+t),_(),w):i},w.forceLinkStrength=function(t){return arguments.length?(u="function"==typeof t?t:e(+t),_(),w):u},w.offset=function(e){return arguments.length?(l=e,w):l},w.getFocis=x,w}},90461:function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&("get"in o?t.__esModule:!o.writable&&!o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return a(t,e),t},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ForceLayout=void 0;var l=s(r(56129)),c=u(r(556)),f=r(58652),h=r(9284),p=r(84587),d=function(e){function t(t){var r=e.call(this)||this;return r.center=[0,0],r.nodeStrength=null,r.edgeStrength=null,r.preventOverlap=!1,r.clusterNodeStrength=null,r.clusterEdgeStrength=null,r.clusterEdgeDistance=null,r.clusterNodeSize=null,r.clusterFociStrength=null,r.linkDistance=50,r.alphaDecay=.028,r.alphaMin=.001,r.alpha=.3,r.collideStrength=1,r.workerEnabled=!1,r.tick=function(){},r.onLayoutEnd=function(){},r.ticking=void 0,t&&r.updateCfg(t),r}return o(t,e),t.prototype.getDefaultCfg=function(){return{center:[0,0],nodeStrength:null,edgeStrength:null,preventOverlap:!1,nodeSize:void 0,nodeSpacing:void 0,linkDistance:50,forceSimulation:null,alphaDecay:.028,alphaMin:.001,alpha:.3,collideStrength:1,clustering:!1,clusterNodeStrength:-1,clusterEdgeStrength:.1,clusterEdgeDistance:100,clusterFociStrength:.8,clusterNodeSize:10,tick:function(){},onLayoutEnd:function(){},workerEnabled:!1}},t.prototype.init=function(e){this.nodes=e.nodes||[];var t=e.edges||[];this.edges=t.map(function(e){var t={},r=["targetNode","sourceNode","startPoint","endPoint"];return Object.keys(e).forEach(function(n){r.indexOf(n)>-1||(t[n]=e[n])}),t}),this.ticking=!1},t.prototype.execute=function(e){var t=this,r=t.nodes,n=t.edges;if(!t.ticking){var o=t.forceSimulation,i=t.alphaMin,a=t.alphaDecay,s=t.alpha;if(o){if(e)if(t.clustering&&t.clusterForce&&(t.clusterForce.nodes(r),t.clusterForce.links(n)),o.nodes(r),n&&t.edgeForce)t.edgeForce.links(n);else if(n&&!t.edgeForce){h=l.forceLink().id(function(e){return e.id}).links(n);t.edgeStrength&&h.strength(t.edgeStrength),t.linkDistance&&h.distance(t.linkDistance),t.edgeForce=h,o.force("link",h)}t.preventOverlap&&t.overlapProcess(o),o.alpha(s).restart(),this.ticking=!0}else try{var u=l.forceManyBody();if(t.nodeStrength&&u.strength(t.nodeStrength),o=l.forceSimulation().nodes(r),t.clustering){var f=(0,c.default)();f.centerX(t.center[0]).centerY(t.center[1]).template("force").strength(t.clusterFociStrength),n&&f.links(n),r&&f.nodes(r),f.forceLinkDistance(t.clusterEdgeDistance).forceLinkStrength(t.clusterEdgeStrength).forceCharge(t.clusterNodeStrength).forceNodeSize(t.clusterNodeSize),t.clusterForce=f,o.force("group",f)}if(o.force("center",l.forceCenter(t.center[0],t.center[1])).force("charge",u).alpha(s).alphaDecay(a).alphaMin(i),t.preventOverlap&&t.overlapProcess(o),n){var h=l.forceLink().id(function(e){return e.id}).links(n);t.edgeStrength&&h.strength(t.edgeStrength),t.linkDistance&&h.distance(t.linkDistance),t.edgeForce=h,o.force("link",h)}if(t.workerEnabled&&!y()&&(t.workerEnabled=!1,console.warn("workerEnabled option is only supported when running in web worker.")),t.workerEnabled){o.stop();for(var d=function(e){var t=e.alphaMin(),r=e.alphaTarget(),n=e.alpha(),o=Math.log((t-r)/(n-r))/Math.log(1-e.alphaDecay());return Math.ceil(o)}(o),v=1;v<=d;v++)o.tick(),postMessage({nodes:r,currentTick:v,totalTicks:d,type:p.LAYOUT_MESSAGE.TICK},void 0);t.ticking=!1}else o.on("tick",function(){t.tick()}).on("end",function(){t.ticking=!1,t.onLayoutEnd&&t.onLayoutEnd()}),t.ticking=!0;t.forceSimulation=o,t.ticking=!0}catch(e){t.ticking=!1,console.warn(e)}}},t.prototype.overlapProcess=function(e){var t,r,n=this.nodeSize,o=this.nodeSpacing,i=this.collideStrength;if(r=(0,f.isNumber)(o)?function(){return o}:(0,f.isFunction)(o)?o:function(){return 0},n)if((0,f.isFunction)(n))t=function(e){return n(e)+r(e)};else if((0,f.isArray)(n)){var a=(n[0]>n[1]?n[0]:n[1])/2;t=function(e){return a+r(e)}}else if((0,f.isNumber)(n)){var s=n/2;t=function(e){return s+r(e)}}else t=function(){return 10};else t=function(e){return e.size?(0,f.isArray)(e.size)?(e.size[0]>e.size[1]?e.size[0]:e.size[1])/2+r(e):(0,f.isObject)(e.size)?(e.size.width>e.size.height?e.size.width:e.size.height)/2+r(e):e.size/2+r(e):10+r(e)};e.force("collisionForce",l.forceCollide(t).strength(i))},t.prototype.updateCfg=function(e){this.ticking&&(this.forceSimulation.stop(),this.ticking=!1),this.forceSimulation=null,Object.assign(this,e)},t.prototype.destroy=function(){this.ticking&&(this.forceSimulation.stop(),this.ticking=!1),this.nodes=null,this.edges=null,this.destroyed=!0},t}(h.Base);function y(){return"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope}t.ForceLayout=d},1878:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&("get"in o?t.__esModule:!o.writable&&!o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(90461),t)},66865:function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.FruchtermanLayout=void 0;var i=r(9284),a=r(58652),s=function(e){function t(t){var r=e.call(this)||this;return r.maxIteration=1e3,r.workerEnabled=!1,r.gravity=10,r.speed=5,r.clustering=!1,r.clusterGravity=10,r.nodes=[],r.edges=[],r.width=300,r.height=300,r.nodeMap={},r.nodeIdxMap={},r.onLayoutEnd=function(){},r.tick=function(){},r.animate=!0,r.updateCfg(t),r}return o(t,e),t.prototype.getDefaultCfg=function(){return{maxIteration:1e3,gravity:10,speed:1,clustering:!1,clusterGravity:10,animate:!0}},t.prototype.execute=function(){var e,t,r=this,n=this.nodes;if(void 0!==this.timeInterval&&"undefined"!=typeof window&&window.clearInterval(this.timeInterval),n&&0!==n.length){this.width||"undefined"==typeof window||(this.width=window.innerWidth),this.height||"undefined"==typeof window||(this.height=window.innerHeight),this.center||(this.center=[this.width/2,this.height/2]);var o=this.center;if(1===n.length)return n[0].x=o[0],n[0].y=o[1],void(null===(t=this.onLayoutEnd)||void 0===t||t.call(this));var i={},s={};return n.forEach(function(e,t){(0,a.isNumber)(e.x)||(e.x=Math.random()*r.width),(0,a.isNumber)(e.y)||(e.y=Math.random()*r.height),i[e.id]=e,s[e.id]=t}),this.nodeMap=i,this.nodeIdxMap=s,this.run()}null===(e=this.onLayoutEnd)||void 0===e||e.call(this)},t.prototype.run=function(){var e,t=this,r=t.nodes;if(r){var n=t.edges,o=t.maxIteration,i=t.workerEnabled,a=t.clustering,s=t.animate,u={};if(a&&r.forEach(function(e){void 0===u[e.cluster]&&(u[e.cluster]={name:e.cluster,cx:0,cy:0,count:0})}),i||!s){for(var l=0;l<o;l++)t.runOneStep(u);null===(e=t.onLayoutEnd)||void 0===e||e.call(t)}else{if("undefined"==typeof window)return;var c=0;this.timeInterval=window.setInterval(function(){var e;t.runOneStep(u),++c>=o&&(null===(e=t.onLayoutEnd)||void 0===e||e.call(t),window.clearInterval(t.timeInterval))},0)}return{nodes:r,edges:n}}},t.prototype.runOneStep=function(e){var t,r=this.nodes;if(r){var n=this.edges,o=this.center,i=this.gravity,s=this.speed,u=this.clustering,l=this.height*this.width,c=Math.sqrt(l)/10,f=l/(r.length+1),h=Math.sqrt(f),p=[];if(r.forEach(function(e,t){p[t]={x:0,y:0}}),this.applyCalculate(r,n,p,h,f),u){for(var d in e)e[d].cx=0,e[d].cy=0,e[d].count=0;for(var d in r.forEach(function(t){var r=e[t.cluster];(0,a.isNumber)(t.x)&&(r.cx+=t.x),(0,a.isNumber)(t.y)&&(r.cy+=t.y),r.count++}),e)e[d].cx/=e[d].count,e[d].cy/=e[d].count;var y=this.clusterGravity||i;r.forEach(function(t,r){if((0,a.isNumber)(t.x)&&(0,a.isNumber)(t.y)){var n=e[t.cluster],o=Math.sqrt((t.x-n.cx)*(t.x-n.cx)+(t.y-n.cy)*(t.y-n.cy)),i=h*y;p[r].x-=i*(t.x-n.cx)/o,p[r].y-=i*(t.y-n.cy)/o}})}r.forEach(function(e,t){if((0,a.isNumber)(e.x)&&(0,a.isNumber)(e.y)){var r=.01*h*i;p[t].x-=r*(e.x-o[0]),p[t].y-=r*(e.y-o[1])}}),r.forEach(function(e,t){if((0,a.isNumber)(e.fx)&&(0,a.isNumber)(e.fy))return e.x=e.fx,void(e.y=e.fy);if((0,a.isNumber)(e.x)&&(0,a.isNumber)(e.y)){var r=Math.sqrt(p[t].x*p[t].x+p[t].y*p[t].y);if(r>0){var n=Math.min(c*(s/800),r);e.x+=p[t].x/r*n,e.y+=p[t].y/r*n}}}),null===(t=this.tick)||void 0===t||t.call(this)}},t.prototype.applyCalculate=function(e,t,r,n,o){this.calRepulsive(e,r,o),t&&this.calAttractive(t,r,n)},t.prototype.calRepulsive=function(e,t,r){e.forEach(function(n,o){t[o]={x:0,y:0},e.forEach(function(e,i){if(o!==i&&(0,a.isNumber)(n.x)&&(0,a.isNumber)(e.x)&&(0,a.isNumber)(n.y)&&(0,a.isNumber)(e.y)){var s=n.x-e.x,u=n.y-e.y,l=s*s+u*u;if(0===l){l=1;var c=o>i?1:-1;s=.01*c,u=.01*c}var f=r/l;t[o].x+=s*f,t[o].y+=u*f}})})},t.prototype.calAttractive=function(e,t,r){var n=this;e.forEach(function(e){var o=(0,a.getEdgeTerminal)(e,"source"),i=(0,a.getEdgeTerminal)(e,"target");if(o&&i){var s=n.nodeIdxMap[o],u=n.nodeIdxMap[i];if(s!==u){var l=n.nodeMap[o],c=n.nodeMap[i];if((0,a.isNumber)(c.x)&&(0,a.isNumber)(l.x)&&(0,a.isNumber)(c.y)&&(0,a.isNumber)(l.y)){var f=c.x-l.x,h=c.y-l.y,p=Math.sqrt(f*f+h*h),d=p*p/r;t[u].x-=f/p*d,t[u].y-=h/p*d,t[s].x+=f/p*d,t[s].y+=h/p*d}}}})},t.prototype.stop=function(){this.timeInterval&&"undefined"!=typeof window&&window.clearInterval(this.timeInterval)},t.prototype.destroy=function(){this.stop(),this.tick=null,this.nodes=null,this.edges=null,this.destroyed=!0},t.prototype.getType=function(){return"fruchterman"},t}(i.Base);t.FruchtermanLayout=s},66007:function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.GForceLayout=void 0;var i=r(9284),a=r(58652),s=function(e,t){return e?(0,a.isNumber)(e)?function(t){return e}:e:function(e){return t||1}},u=function(e){function t(t){var r=e.call(this)||this;return r.maxIteration=500,r.workerEnabled=!1,r.edgeStrength=200,r.nodeStrength=1e3,r.coulombDisScale=.005,r.damping=.9,r.maxSpeed=1e3,r.minMovement=.5,r.interval=.02,r.factor=1,r.linkDistance=1,r.gravity=10,r.preventOverlap=!0,r.collideStrength=1,r.tick=function(){},r.nodes=[],r.edges=[],r.width=300,r.height=300,r.nodeMap={},r.nodeIdxMap={},r.animate=!0,r.updateCfg(t),r}return o(t,e),t.prototype.getDefaultCfg=function(){return{maxIteration:500,gravity:10,enableTick:!0,animate:!0}},t.prototype.execute=function(){var e,t,r=this,n=r.nodes;if(void 0!==r.timeInterval&&"undefined"!=typeof window&&window.clearInterval(r.timeInterval),n&&0!==n.length){r.width||"undefined"==typeof window||(r.width=window.innerWidth),r.height||"undefined"==typeof window||(r.height=window.innerHeight),r.center||(r.center=[r.width/2,r.height/2]);var o=r.center;if(1===n.length)return n[0].x=o[0],n[0].y=o[1],void(null===(t=r.onLayoutEnd)||void 0===t||t.call(r));var i={},u={};n.forEach(function(e,t){(0,a.isNumber)(e.x)||(e.x=Math.random()*r.width),(0,a.isNumber)(e.y)||(e.y=Math.random()*r.height),i[e.id]=e,u[e.id]=t}),r.nodeMap=i,r.nodeIdxMap=u,r.linkDistance=s(r.linkDistance,1),r.nodeStrength=s(r.nodeStrength,1),r.edgeStrength=s(r.edgeStrength,1);var l,c=r.nodeSize;if(r.preventOverlap){var f,h=r.nodeSpacing;f=(0,a.isNumber)(h)?function(){return h}:(0,a.isFunction)(h)?h:function(){return 0},l=c?(0,a.isArray)(c)?function(e){return Math.max(c[0],c[1])+f(e)}:function(e){return c+f(e)}:function(e){return e.size?(0,a.isArray)(e.size)?Math.max(e.size[0],e.size[1])+f(e):(0,a.isObject)(e.size)?Math.max(e.size.width,e.size.height)+f(e):e.size+f(e):10+f(e)}}r.nodeSize=l;var p=r.edges;r.degrees=(0,a.getDegree)(n.length,r.nodeIdxMap,p),r.getMass||(r.getMass=function(e){return e.mass||r.degrees[r.nodeIdxMap[e.id]].all||1}),r.run()}else null===(e=r.onLayoutEnd)||void 0===e||e.call(r)},t.prototype.run=function(){var e,t=this,r=t.maxIteration,n=t.nodes,o=t.workerEnabled,i=t.minMovement,a=t.animate;if(n)if(o||!a){for(var s=0;s<r;s++){var u=t.runOneStep(s);if(t.reachMoveThreshold(n,u,i))break}null===(e=t.onLayoutEnd)||void 0===e||e.call(t)}else{if("undefined"==typeof window)return;var l=0;this.timeInterval=window.setInterval(function(){var e,o;if(n){var a=t.runOneStep(l)||[];t.reachMoveThreshold(n,a,i)&&(null===(e=t.onLayoutEnd)||void 0===e||e.call(t),window.clearInterval(t.timeInterval)),++l>=r&&(null===(o=t.onLayoutEnd)||void 0===o||o.call(t),window.clearInterval(t.timeInterval))}},0)}},t.prototype.reachMoveThreshold=function(e,t,r){var n=0;return e.forEach(function(e,r){var o=e.x-t[r].x,i=e.y-t[r].y;n+=Math.sqrt(o*o+i*i)}),(n/=e.length)<r},t.prototype.runOneStep=function(e){var t,r=this.nodes,n=this.edges,o=[],i=[];if(r){r.forEach(function(e,t){o[2*t]=0,o[2*t+1]=0,i[2*t]=0,i[2*t+1]=0}),this.calRepulsive(o,r),n&&this.calAttractive(o,n),this.calGravity(o,r);var a=Math.max(.02,this.interval-.002*e);this.updateVelocity(o,i,a,r);var s=[];return r.forEach(function(e){s.push({x:e.x,y:e.y})}),this.updatePosition(i,a,r),null===(t=this.tick)||void 0===t||t.call(this),s}},t.prototype.calRepulsive=function(e,t){var r=this.getMass,n=this.factor,o=this.coulombDisScale,i=this.preventOverlap,a=this.collideStrength,s=void 0===a?1:a,u=this.nodeStrength,l=this.nodeSize;t.forEach(function(a,c){var f=r?r(a):1;t.forEach(function(t,h){if(!(c>=h)){var p=a.x-t.x,d=a.y-t.y;0===p&&0===d&&(p=.01*Math.random(),d=.01*Math.random());var y=p*p+d*d,v=Math.sqrt(y),g=(v+.1)*o,m=p/v,b=d/v,w=.5*(u(a)+u(t))*n/(g*g),_=r?r(t):1;if(e[2*c]+=m*w,e[2*c+1]+=b*w,e[2*h]-=m*w,e[2*h+1]-=b*w,i&&(l(a)+l(t))/2>v){var x=s*(u(a)+u(t))*.5/y;e[2*c]+=m*x/f,e[2*c+1]+=b*x/f,e[2*h]-=m*x/_,e[2*h+1]-=b*x/_}}})})},t.prototype.calAttractive=function(e,t){var r=this.nodeMap,n=this.nodeIdxMap,o=this.linkDistance,i=this.edgeStrength,s=this.nodeSize,u=this.getMass;t.forEach(function(t,l){var c=(0,a.getEdgeTerminal)(t,"source"),f=(0,a.getEdgeTerminal)(t,"target"),h=r[c],p=r[f],d=p.x-h.x,y=p.y-h.y;0===d&&0===y&&(d=.01*Math.random(),y=.01*Math.random());var v=Math.sqrt(d*d+y*y),g=d/v,m=y/v,b=((o(t,h,p)||1+(s(h)+s(p)||0)/2)-v)*i(t),w=n[c],_=n[f],x=u?u(h):1,S=u?u(p):1;e[2*w]-=g*b/x,e[2*w+1]-=m*b/x,e[2*_]+=g*b/S,e[2*_+1]+=m*b/S})},t.prototype.calGravity=function(e,t){for(var r=this.center,n=this.gravity,o=this.degrees,i=t.length,s=0;s<i;s++){var u=t[s],l=u.x-r[0],c=u.y-r[1],f=n;if(this.getCenter){var h=this.getCenter(u,o[s].all);h&&(0,a.isNumber)(h[0])&&(0,a.isNumber)(h[1])&&(0,a.isNumber)(h[2])&&(l=u.x-h[0],c=u.y-h[1],f=h[2])}f&&(e[2*s]-=f*l,e[2*s+1]-=f*c)}},t.prototype.updateVelocity=function(e,t,r,n){var o=this,i=r*o.damping;n.forEach(function(r,n){var a=e[2*n]*i||.01,s=e[2*n+1]*i||.01,u=Math.sqrt(a*a+s*s);if(u>o.maxSpeed){var l=o.maxSpeed/u;a*=l,s*=l}t[2*n]=a,t[2*n+1]=s})},t.prototype.updatePosition=function(e,t,r){r.forEach(function(r,n){if((0,a.isNumber)(r.fx)&&(0,a.isNumber)(r.fy))return r.x=r.fx,void(r.y=r.fy);var o=e[2*n]*t,i=e[2*n+1]*t;r.x+=o,r.y+=i})},t.prototype.stop=function(){this.timeInterval&&"undefined"!=typeof window&&window.clearInterval(this.timeInterval)},t.prototype.destroy=function(){this.stop(),this.tick=null,this.nodes=null,this.edges=null,this.destroyed=!0},t.prototype.getType=function(){return"gForce"},t}(i.Base);t.GForceLayout=u},69720:function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(o,i){function a(e){try{u(n.next(e))}catch(e){i(e)}}function s(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(a,s)}u((n=n.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(u){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(r=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===s[0]||2===s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],n=0}finally{r=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.FruchtermanGPULayout=void 0;var s=r(9284),u=r(58652),l=r(66887),c=r(70446),f=r(92444),h=r(84587),p=function(e){function t(t){var r=e.call(this)||this;return r.maxIteration=1e3,r.gravity=10,r.speed=1,r.clustering=!1,r.clusterField="cluster",r.clusterGravity=10,r.workerEnabled=!1,r.nodes=[],r.edges=[],r.width=300,r.height=300,r.nodeMap={},r.nodeIdxMap={},r.updateCfg(t),r}return o(t,e),t.prototype.getDefaultCfg=function(){return{maxIteration:1e3,gravity:10,speed:1,clustering:!1,clusterGravity:10}},t.prototype.execute=function(){return i(this,void 0,void 0,function(){var e,t,r,n,o,i=this;return a(this,function(a){switch(a.label){case 0:return(t=(e=this).nodes)&&0!==t.length?(e.width||"undefined"==typeof window||(e.width=window.innerWidth),e.height||"undefined"==typeof window||(e.height=window.innerHeight),e.center||(e.center=[e.width/2,e.height/2]),r=e.center,1===t.length?(t[0].x=r[0],t[0].y=r[1],e.onLayoutEnd&&e.onLayoutEnd(),[2]):(n={},o={},t.forEach(function(e,t){(0,u.isNumber)(e.x)||(e.x=Math.random()*i.width),(0,u.isNumber)(e.y)||(e.y=Math.random()*i.height),n[e.id]=e,o[e.id]=t}),e.nodeMap=n,e.nodeIdxMap=o,[4,e.run()])):(e.onLayoutEnd&&e.onLayoutEnd(),[2]);case 1:return a.sent(),[2]}})})},t.prototype.executeWithWorker=function(e,t){return i(this,void 0,void 0,function(){var r,n,o,i,s,l=this;return a(this,function(a){switch(a.label){case 0:return n=(r=this).nodes,o=r.center,n&&0!==n.length?1===n.length?(n[0].x=o[0],n[0].y=o[1],[2]):(i={},s={},n.forEach(function(e,t){(0,u.isNumber)(e.x)||(e.x=Math.random()*l.width),(0,u.isNumber)(e.y)||(e.y=Math.random()*l.height),i[e.id]=e,s[e.id]=t}),r.nodeMap=i,r.nodeIdxMap=s,[4,r.run(e,t)]):[2];case 1:return a.sent(),[2]}})})},t.prototype.run=function(e,t){return i(this,void 0,void 0,function(){var r,n,o,s,p,d,y,v,g,m,b,w,_,x,S,O,P,E,k,M,C,j,T,A,I,R=this;return a(this,function(L){switch(L.label){case 0:for(n=(r=this).nodes,o=r.edges,s=r.maxIteration,p=r.center,d=r.height*r.width,y=Math.sqrt(d)/10,v=d/(n.length+1),g=Math.sqrt(v),m=r.speed,b=r.clustering,w=(0,c.attributesToTextureData)([r.clusterField],n),_=w.array,x=w.count,n.forEach(function(e,t){var r=0,n=0;(0,u.isNumber)(e.fx)&&(0,u.isNumber)(e.fy)&&(r=e.fx||.001,n=e.fy||.001),_[4*t+1]=r,_[4*t+2]=n}),S=n.length,O=(0,c.buildTextureData)(n,o),P=O.maxEdgePerVetex,E=O.array,k=r.workerEnabled,M=k?l.World.create({canvas:e,engineOptions:{supportCompute:!0}}):l.World.create({engineOptions:{supportCompute:!0}}),C=r.onLayoutEnd,j=[],T=0;T<x;T++)j.push(0,0,0,0);return A=M.createKernel(f.fruchtermanBundle).setDispatch([S,1,1]).setBinding({u_Data:E,u_K:g,u_K2:v,u_Gravity:r.gravity,u_ClusterGravity:r.clusterGravity||r.gravity||1,u_Speed:m,u_MaxDisplace:y,u_Clustering:b?1:0,u_Center:p,u_AttributeArray:_,u_ClusterCenters:j,MAX_EDGE_PER_VERTEX:P,VERTEX_COUNT:S}),b&&(I=M.createKernel(f.clusterBundle).setDispatch([x,1,1]).setBinding({u_Data:E,u_NodeAttributes:_,u_ClusterCenters:j,VERTEX_COUNT:S,CLUSTER_COUNT:x})),[4,function(){return i(R,void 0,void 0,function(){var r,o;return a(this,function(i){switch(i.label){case 0:r=0,i.label=1;case 1:return r<s?[4,A.execute()]:[3,6];case 2:return i.sent(),b?(I.setBinding({u_Data:A}),[4,I.execute()]):[3,4];case 3:i.sent(),A.setBinding({u_ClusterCenters:I}),i.label=4;case 4:A.setBinding({u_MaxDisplace:y*=.99}),i.label=5;case 5:return r++,[3,1];case 6:return[4,A.getOutput()];case 7:return o=i.sent(),e?t.postMessage({type:h.LAYOUT_MESSAGE.GPUEND,vertexEdgeData:o}):n.forEach(function(e,t){var r=o[4*t],n=o[4*t+1];e.x=r,e.y=n}),C&&C(),[2]}})})}()];case 1:return L.sent(),[2]}})})},t.prototype.getType=function(){return"fruchterman-gpu"},t}(s.Base);t.FruchtermanGPULayout=p},92444:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.clusterBundle=t.clusterCode=t.fruchtermanBundle=t.fruchtermanCode=void 0,t.fruchtermanCode="\nimport { globalInvocationID } from 'g-webgpu';\nconst MAX_EDGE_PER_VERTEX;\nconst VERTEX_COUNT;\n@numthreads(1, 1, 1)\nclass Fruchterman {\n  @in @out\n  u_Data: vec4[];\n  @in\n  u_K: float;\n  @in\n  u_K2: float;\n  \n  @in\n  u_Center: vec2;\n  @in\n  u_Gravity: float;\n  @in\n  u_ClusterGravity: float;\n  @in\n  u_Speed: float;\n  @in\n  u_MaxDisplace: float;\n  @in\n  u_Clustering: float;\n  @in\n  u_AttributeArray: vec4[];\n  @in\n  u_ClusterCenters: vec4[];\n  calcRepulsive(i: int, currentNode: vec4): vec2 {\n    let dx = 0, dy = 0;\n    for (let j = 0; j < VERTEX_COUNT; j++) {\n      if (i != j) {\n        const nextNode = this.u_Data[j];\n        const xDist = currentNode[0] - nextNode[0];\n        const yDist = currentNode[1] - nextNode[1];\n        const dist = (xDist * xDist + yDist * yDist) + 0.01;\n        let param = this.u_K2 / dist;\n        \n        if (dist > 0.0) {\n          dx += param * xDist;\n          dy += param * yDist;\n          if (xDist == 0 && yDist == 0) {\n            const sign = i < j ? 1 : -1;\n            dx += param * sign;\n            dy += param * sign;\n          }\n        }\n      }\n    }\n    return [dx, dy];\n  }\n  calcGravity(currentNode: vec4, nodeAttributes: vec4): vec2 { // \n    let dx = 0, dy = 0;\n    const vx = currentNode[0] - this.u_Center[0];\n    const vy = currentNode[1] - this.u_Center[1];\n    const gf = 0.01 * this.u_K * this.u_Gravity;\n    dx = gf * vx;\n    dy = gf * vy;\n    if (this.u_Clustering == 1) {\n      const clusterIdx = int(nodeAttributes[0]);\n      const center = this.u_ClusterCenters[clusterIdx];\n      const cvx = currentNode[0] - center[0];\n      const cvy = currentNode[1] - center[1];\n      const dist = sqrt(cvx * cvx + cvy * cvy) + 0.01;\n      const parma = this.u_K * this.u_ClusterGravity / dist;\n      dx += parma * cvx;\n      dy += parma * cvy;\n    }\n    return [dx, dy];\n  }\n  calcAttractive(i: int, currentNode: vec4): vec2 {\n    let dx = 0, dy = 0;\n    const arr_offset = int(floor(currentNode[2] + 0.5));\n    const length = int(floor(currentNode[3] + 0.5));\n    const node_buffer: vec4;\n    for (let p = 0; p < MAX_EDGE_PER_VERTEX; p++) {\n      if (p >= length) break;\n      const arr_idx = arr_offset + p;\n      // when arr_idx % 4 == 0 update currentNodedx_buffer\n      const buf_offset = arr_idx - arr_idx / 4 * 4;\n      if (p == 0 || buf_offset == 0) {\n        node_buffer = this.u_Data[int(arr_idx / 4)];\n      }\n      const float_j = buf_offset == 0 ? node_buffer[0] :\n                      buf_offset == 1 ? node_buffer[1] :\n                      buf_offset == 2 ? node_buffer[2] :\n                                        node_buffer[3];\n      const nextNode = this.u_Data[int(float_j)];\n      const xDist = currentNode[0] - nextNode[0];\n      const yDist = currentNode[1] - nextNode[1];\n      const dist = sqrt(xDist * xDist + yDist * yDist) + 0.01;\n      let attractiveF = dist / this.u_K;\n    \n      if (dist > 0.0) {\n        dx -= xDist * attractiveF;\n        dy -= yDist * attractiveF;\n        if (xDist == 0 && yDist == 0) {\n          const sign = i < int(float_j) ? 1 : -1;\n          dx -= sign * attractiveF;\n          dy -= sign * attractiveF;\n        }\n      }\n    }\n    return [dx, dy];\n  }\n  @main\n  compute() {\n    const i = globalInvocationID.x;\n    const currentNode = this.u_Data[i];\n    let dx = 0, dy = 0;\n    if (i >= VERTEX_COUNT) {\n      this.u_Data[i] = currentNode;\n      return;\n    }\n\n    // [gravity, fx, fy, 0]\n    const nodeAttributes = this.u_AttributeArray[i];\n\n    if (nodeAttributes[1] != 0 && nodeAttributes[2] != 0) {\n      // the node is fixed\n      this.u_Data[i] = [\n        nodeAttributes[1],\n        nodeAttributes[2],\n        currentNode[2],\n        currentNode[3]\n      ];\n      return;\n    }\n\n    // repulsive\n    const repulsive = this.calcRepulsive(i, currentNode);\n    dx += repulsive[0];\n    dy += repulsive[1];\n    // attractive\n    const attractive = this.calcAttractive(i, currentNode);\n    dx += attractive[0];\n    dy += attractive[1];\n    // gravity\n    const gravity = this.calcGravity(currentNode, nodeAttributes);\n    dx -= gravity[0];\n    dy -= gravity[1];\n    // speed\n    dx *= this.u_Speed;\n    dy *= this.u_Speed;\n\n    // move\n    const distLength = sqrt(dx * dx + dy * dy);\n    if (distLength > 0.0) {\n      const limitedDist = min(this.u_MaxDisplace * this.u_Speed, distLength);\n      this.u_Data[i] = [\n        currentNode[0] + dx / distLength * limitedDist,\n        currentNode[1] + dy / distLength * limitedDist,\n        currentNode[2],\n        currentNode[3]\n      ];\n    }\n  }\n}\n",t.fruchtermanBundle='{"shaders":{"WGSL":"","GLSL450":"","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_K;\\nuniform float u_K2;\\nuniform vec2 u_Center;\\nuniform float u_Gravity;\\nuniform float u_ClusterGravity;\\nuniform float u_Speed;\\nuniform float u_MaxDisplace;\\nuniform float u_Clustering;\\nuniform sampler2D u_AttributeArray;\\nuniform vec2 u_AttributeArraySize;\\nvec4 getDatau_AttributeArray(vec2 address2D) {\\n  return vec4(texture2D(u_AttributeArray, address2D).rgba);\\n}\\nvec4 getDatau_AttributeArray(float address1D) {\\n  return getDatau_AttributeArray(addrTranslation_1Dto2D(address1D, u_AttributeArraySize));\\n}\\nvec4 getDatau_AttributeArray(int address1D) {\\n  return getDatau_AttributeArray(float(address1D));\\n}\\nuniform sampler2D u_ClusterCenters;\\nuniform vec2 u_ClusterCentersSize;\\nvec4 getDatau_ClusterCenters(vec2 address2D) {\\n  return vec4(texture2D(u_ClusterCenters, address2D).rgba);\\n}\\nvec4 getDatau_ClusterCenters(float address1D) {\\n  return getDatau_ClusterCenters(addrTranslation_1Dto2D(address1D, u_ClusterCentersSize));\\n}\\nvec4 getDatau_ClusterCenters(int address1D) {\\n  return getDatau_ClusterCenters(float(address1D));\\n}\\nvec2 calcRepulsive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = getDatau_Data(j);\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = ((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat param = u_K2 / dist;\\nif (dist > 0.0) {dx += param * xDist;\\ndy += param * yDist;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < j) ? (1.0) : (-1.0);\\ndx += param * sign;\\ndy += param * sign;}}}}\\nreturn vec2(dx, dy);}\\nvec2 calcGravity(vec4 currentNode, vec4 nodeAttributes) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nfloat vx = currentNode.x - u_Center.x;\\nfloat vy = currentNode.y - u_Center.y;\\nfloat gf = (0.01 * u_K) * u_Gravity;\\ndx = gf * vx;\\ndy = gf * vy;\\nif (u_Clustering == 1.0) {int clusterIdx = int(nodeAttributes.x);\\nvec4 center = getDatau_ClusterCenters(clusterIdx);\\nfloat cvx = currentNode.x - center.x;\\nfloat cvy = currentNode.y - center.y;\\nfloat dist = sqrt((cvx * cvx) + (cvy * cvy)) + 0.01;\\nfloat parma = (u_K * u_ClusterGravity) / dist;\\ndx += parma * cvx;\\ndy += parma * cvy;}\\nreturn vec2(dx, dy);}\\nvec2 calcAttractive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nint arr_offset = int(floor(currentNode.z + 0.5));\\nint length = int(floor(currentNode.w + 0.5));\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + int(p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = getDatau_Data(int(arr_idx / 4));}\\nfloat float_j = (buf_offset == 0) ? (node_buffer.x) : ((buf_offset == 1) ? (node_buffer.y) : ((buf_offset == 2) ? (node_buffer.z) : (node_buffer.w)));\\nvec4 nextNode = getDatau_Data(int(float_j));\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = sqrt((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat attractiveF = dist / u_K;\\nif (dist > 0.0) {dx -= xDist * attractiveF;\\ndy -= yDist * attractiveF;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < int(float_j)) ? (1.0) : (-1.0);\\ndx -= sign * attractiveF;\\ndy -= sign * attractiveF;}}}\\nreturn vec2(dx, dy);}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 currentNode = getDatau_Data(i);\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nif (i >= VERTEX_COUNT) {gl_FragColor = vec4(currentNode);\\nreturn ;}\\nvec4 nodeAttributes = getDatau_AttributeArray(i);\\nif ((nodeAttributes.y != 0.0) && (nodeAttributes.z != 0.0)) {gl_FragColor = vec4(vec4(nodeAttributes.y, nodeAttributes.z, currentNode.z, currentNode.w));\\nreturn ;}\\nvec2 repulsive = calcRepulsive(i, currentNode);\\ndx += repulsive.x;\\ndy += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode);\\ndx += attractive.x;\\ndy += attractive.y;\\nvec2 gravity = calcGravity(currentNode, nodeAttributes);\\ndx -= gravity.x;\\ndy -= gravity.y;\\ndx *= u_Speed;\\ndy *= u_Speed;\\nfloat distLength = sqrt((dx * dx) + (dy * dy));\\nif (distLength > 0.0) {float limitedDist = min(u_MaxDisplace * u_Speed, distLength);\\ngl_FragColor = vec4(vec4(currentNode.x + ((dx / distLength) * limitedDist), currentNode.y + ((dy / distLength) * limitedDist), currentNode.z, currentNode.w));}if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"MAX_EDGE_PER_VERTEX","type":"Float","runtime":true},{"name":"VERTEX_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]},{"name":"u_K","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_K2","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Center","type":"vec2<f32>","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Gravity","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterGravity","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Speed","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_MaxDisplace","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Clustering","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AttributeArray","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterCenters","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_Data","size":[1,1],"length":1},"needPingpong":true}}',t.clusterCode="\nimport { globalInvocationID } from 'g-webgpu';\nconst VERTEX_COUNT;\nconst CLUSTER_COUNT;\n@numthreads(1, 1, 1)\nclass CalcCenter {\n  @in\n  u_Data: vec4[];\n  @in\n  u_NodeAttributes: vec4[]; // [[clusterIdx, 0, 0, 0], ...]\n  @in @out\n  u_ClusterCenters: vec4[]; // [[cx, cy, nodeCount, clusterIdx], ...]\n  @main\n  compute() {\n    const i = globalInvocationID.x;\n    const center = this.u_ClusterCenters[i];\n    let sumx = 0;\n    let sumy = 0;\n    let count = 0;\n    for (let j = 0; j < VERTEX_COUNT; j++) {\n      const attributes = this.u_NodeAttributes[j];\n      const clusterIdx = int(attributes[0]);\n      const vertex = this.u_Data[j];\n      if (clusterIdx == i) {\n        sumx += vertex.x;\n        sumy += vertex.y;\n        count += 1;\n      }\n    }\n    this.u_ClusterCenters[i] = [\n      sumx / count,\n      sumy / count,\n      count,\n      i\n    ];\n  }\n}\n",t.clusterBundle='{"shaders":{"WGSL":"","GLSL450":"","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define CLUSTER_COUNT __DefineValuePlaceholder__CLUSTER_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform sampler2D u_NodeAttributes;\\nuniform vec2 u_NodeAttributesSize;\\nvec4 getDatau_NodeAttributes(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributes, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributes(float address1D) {\\n  return getDatau_NodeAttributes(addrTranslation_1Dto2D(address1D, u_NodeAttributesSize));\\n}\\nvec4 getDatau_NodeAttributes(int address1D) {\\n  return getDatau_NodeAttributes(float(address1D));\\n}\\nuniform sampler2D u_ClusterCenters;\\nuniform vec2 u_ClusterCentersSize;\\nvec4 getDatau_ClusterCenters(vec2 address2D) {\\n  return vec4(texture2D(u_ClusterCenters, address2D).rgba);\\n}\\nvec4 getDatau_ClusterCenters(float address1D) {\\n  return getDatau_ClusterCenters(addrTranslation_1Dto2D(address1D, u_ClusterCentersSize));\\n}\\nvec4 getDatau_ClusterCenters(int address1D) {\\n  return getDatau_ClusterCenters(float(address1D));\\n}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 center = getDatau_ClusterCenters(i);\\nfloat sumx = 0.0;\\nfloat sumy = 0.0;\\nfloat count = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 attributes = getDatau_NodeAttributes(j);\\nint clusterIdx = int(attributes.x);\\nvec4 vertex = getDatau_Data(j);\\nif (clusterIdx == i) {sumx += vertex.x;\\nsumy += vertex.y;\\ncount += 1.0;}}\\ngl_FragColor = vec4(vec4(sumx / count, sumy / count, count, i));if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"VERTEX_COUNT","type":"Float","runtime":true},{"name":"CLUSTER_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributes","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterCenters","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_ClusterCenters","size":[1,1],"length":1},"needPingpong":true}}'},54790:function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(o,i){function a(e){try{u(n.next(e))}catch(e){i(e)}}function s(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(a,s)}u((n=n.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(u){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(r=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===s[0]||2===s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],n=0}finally{r=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.GForceGPULayout=void 0;var s=r(9284),u=r(58652),l=r(66887),c=r(70446),f=r(23979),h=r(6920),p=r(84587),d=function(e){function t(t){var r=e.call(this)||this;return r.maxIteration=1e3,r.edgeStrength=200,r.nodeStrength=1e3,r.coulombDisScale=.005,r.damping=.9,r.maxSpeed=1e3,r.minMovement=.5,r.interval=.02,r.factor=1,r.linkDistance=1,r.gravity=10,r.workerEnabled=!1,r.nodes=[],r.edges=[],r.width=300,r.height=300,r.nodeMap={},r.nodeIdxMap={},r.updateCfg(t),r}return o(t,e),t.prototype.getDefaultCfg=function(){return{maxIteration:2e3,gravity:10,clustering:!1,clusterGravity:10}},t.prototype.execute=function(){return i(this,void 0,void 0,function(){var e,t,r,n,o;return a(this,function(i){switch(i.label){case 0:return(t=(e=this).nodes)&&0!==t.length?(e.width||"undefined"==typeof window||(e.width=window.innerWidth),e.height||"undefined"==typeof window||(e.height=window.innerHeight),e.center||(e.center=[e.width/2,e.height/2]),r=e.center,1===t.length?(t[0].x=r[0],t[0].y=r[1],e.onLayoutEnd&&e.onLayoutEnd(),[2]):(n={},o={},t.forEach(function(t,r){(0,u.isNumber)(t.x)||(t.x=Math.random()*e.width),(0,u.isNumber)(t.y)||(t.y=Math.random()*e.height),n[t.id]=t,o[t.id]=r}),e.nodeMap=n,e.nodeIdxMap=o,e.nodeStrength=(0,c.proccessToFunc)(e.nodeStrength,1),e.edgeStrength=(0,c.proccessToFunc)(e.edgeStrength,1),[4,e.run()])):(e.onLayoutEnd&&e.onLayoutEnd(),[2]);case 1:return i.sent(),[2]}})})},t.prototype.executeWithWorker=function(e,t){var r=this,n=r.nodes,o=r.center;if(n&&0!==n.length){if(1===n.length)return n[0].x=o[0],void(n[0].y=o[1]);var i={},a={};n.forEach(function(e,t){(0,u.isNumber)(e.x)||(e.x=Math.random()*r.width),(0,u.isNumber)(e.y)||(e.y=Math.random()*r.height),i[e.id]=e,a[e.id]=t}),r.nodeMap=i,r.nodeIdxMap=a,r.nodeStrength=(0,c.proccessToFunc)(r.nodeStrength,1),r.edgeStrength=(0,c.proccessToFunc)(r.edgeStrength,1),r.run(e,t)}},t.prototype.run=function(e,t){return i(this,void 0,void 0,function(){var r,n,o,s,d,y,v,g,m,b,w,_,x,S,O,P,E,k,M,C,j,T,A,I,R,L,N=this;return a(this,function(D){switch(D.label){case 0:for(n=(r=this).nodes,o=r.edges,s=r.maxIteration,r.width||"undefined"==typeof window||(r.width=window.innerWidth),r.height||"undefined"==typeof window||(r.height=window.innerHeight),d=n.length,r.linkDistance=(0,c.proccessToFunc)(r.linkDistance),r.edgeStrength=(0,c.proccessToFunc)(r.edgeStrength),y=(0,c.buildTextureDataWithTwoEdgeAttr)(n,o,r.linkDistance,r.edgeStrength),v=y.maxEdgePerVetex,g=y.array,r.degrees=(0,f.getDegree)(n.length,r.nodeIdxMap,o).map(function(e){return e.all}),m=[],b=[],w=[],_=[],x=[],S=[],O=[],r.getMass||(r.getMass=function(e){return r.degrees[r.nodeIdxMap[e.id]]||1}),P=r.gravity,E=r.center,n.forEach(function(e,t){m.push(r.getMass(e)),b.push(r.nodeStrength(e)),r.degrees[t]||(r.degrees[t]=0);var n=[E[0],E[1],P];if(r.getCenter){var o=r.getCenter(e,r.degrees[t]);o&&(0,u.isNumber)(o[0])&&(0,u.isNumber)(o[1])&&(0,u.isNumber)(o[2])&&(n=o)}w.push(n[0]),_.push(n[1]),x.push(n[2]),(0,u.isNumber)(e.fx)&&(0,u.isNumber)(e.fy)?(S.push(e.fx||.001),O.push(e.fy||.001)):(S.push(0),O.push(0))}),k=(0,c.arrayToTextureData)([m,r.degrees,b,S]),M=(0,c.arrayToTextureData)([w,_,x,O]),C=r.workerEnabled,j=C?l.World.create({canvas:e,engineOptions:{supportCompute:!0}}):l.World.create({engineOptions:{supportCompute:!0}}),T=r.onLayoutEnd,A=[],g.forEach(function(e){A.push(e)}),I=0;I<4;I++)A.push(0);return R=j.createKernel(h.gForceBundle).setDispatch([d,1,1]).setBinding({u_Data:g,u_damping:r.damping,u_maxSpeed:r.maxSpeed,u_minMovement:r.minMovement,u_coulombDisScale:r.coulombDisScale,u_factor:r.factor,u_NodeAttributeArray1:k,u_NodeAttributeArray2:M,MAX_EDGE_PER_VERTEX:v,VERTEX_COUNT:d,u_AveMovement:A,u_interval:r.interval}),L=j.createKernel(h.aveMovementBundle).setDispatch([1,1,1]).setBinding({u_Data:g,VERTEX_COUNT:d,u_AveMovement:[0,0,0,0]}),[4,function(){return i(N,void 0,void 0,function(){var o,i,u;return a(this,function(a){switch(a.label){case 0:o=0,a.label=1;case 1:return o<s?[4,R.execute()]:[3,5];case 2:return a.sent(),L.setBinding({u_Data:R}),[4,L.execute()];case 3:a.sent(),i=Math.max(.02,r.interval-.002*o),R.setBinding({u_interval:i,u_AveMovement:L}),a.label=4;case 4:return o++,[3,1];case 5:return[4,R.getOutput()];case 6:return u=a.sent(),e?t.postMessage({type:p.LAYOUT_MESSAGE.GPUEND,vertexEdgeData:u}):n.forEach(function(e,t){var r=u[4*t],n=u[4*t+1];e.x=r,e.y=n}),T&&T(),[2]}})})}()];case 1:return D.sent(),[2]}})})},t.prototype.getType=function(){return"gForce-gpu"},t}(s.Base);t.GForceGPULayout=d},6920:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.aveMovementBundle=t.aveMovementCode=t.gForceBundle=t.gForceCode=void 0,t.gForceCode="\nimport { globalInvocationID } from 'g-webgpu';\n\nconst MAX_EDGE_PER_VERTEX;\nconst VERTEX_COUNT;\nconst SHIFT_20 = 1048576;\n\n@numthreads(1, 1, 1)\nclass GGForce {\n  @in @out\n  u_Data: vec4[];\n\n  @in\n  u_damping: float;\n  \n  @in\n  u_maxSpeed: float;\n\n  @in\n  u_minMovement: float;\n\n  @in\n  u_AveMovement: vec4[];\n\n  @in\n  u_coulombDisScale: float;\n\n  @in\n  u_factor: float;\n\n  @in\n  u_NodeAttributeArray1: vec4[];\n\n  @in\n  u_NodeAttributeArray2: vec4[];\n\n  @in\n  u_interval: float;\n\n  unpack_float(packedValue: float): ivec2 {\n    const packedIntValue = int(packedValue);\n    const v0 = packedIntValue / SHIFT_20;\n    return [v0, packedIntValue - v0 * SHIFT_20];\n  }\n\n  calcRepulsive(i: int, currentNode: vec4): vec2 {\n    let ax = 0, ay = 0;\n    for (let j: int = 0; j < VERTEX_COUNT; j++) {\n      if (i != j) {\n        const nextNode = this.u_Data[j];\n        const vx = currentNode[0] - nextNode[0];\n        const vy = currentNode[1] - nextNode[1];\n        const dist = sqrt(vx * vx + vy * vy) + 0.01;\n        const n_dist = (dist + 0.1) * this.u_coulombDisScale;\n        const direx = vx / dist;\n        const direy = vy / dist;\n        const attributesi = this.u_NodeAttributeArray1[i];\n        const attributesj = this.u_NodeAttributeArray1[j];\n        const massi = attributesi[0];\n        const nodeStrengthi = attributesi[2];\n        const nodeStrengthj = attributesj[2];\n        const nodeStrength = (nodeStrengthi + nodeStrengthj) / 2;\n        // const param = nodeStrength * this.u_factor / (n_dist * n_dist * massi);\n        const param = nodeStrength * this.u_factor / (n_dist * n_dist);\n        ax += direx * param;\n        ay += direy * param;\n      }\n    }\n    return [ax, ay];\n  }\n\n  calcGravity(i: int, currentNode: vec4, attributes2: vec4): vec2 {\n    // note: attributes2 = [centerX, centerY, gravity, 0]\n\n    const vx = currentNode[0] - attributes2[0];\n    const vy = currentNode[1] - attributes2[1];\n    \n    const ax = vx * attributes2[2];\n    const ay = vy * attributes2[2];\n    \n    return [ax, ay];\n  }\n\n  calcAttractive(i: int, currentNode: vec4, attributes1: vec4): vec2 {\n    // note: attributes1 = [mass, degree, nodeSterngth, 0]\n\n    const mass = attributes1[0];\n    let ax = 0, ay = 0;\n    // const arr_offset = int(floor(currentNode[2] + 0.5));\n    // const length = int(floor(currentNode[3] + 0.5));\n\n    const compressed = this.unpack_float(currentNode[2]);\n    const length = compressed[0];\n    const arr_offset = compressed[1];\n\n    const node_buffer: vec4;\n    for (let p: int = 0; p < MAX_EDGE_PER_VERTEX; p++) {\n      if (p >= length) break;\n      const arr_idx = arr_offset + 4 * p; // i èç¹çç¬¬ p æ¡è¾¹å¼å§çå°æ ¼å­ä½ç½®\n      const buf_offset = arr_idx - arr_idx / 4 * 4;\n      if (p == 0 || buf_offset == 0) {\n        node_buffer = this.u_Data[int(arr_idx / 4)]; // å¤§æ ¼å­ï¼å¤§æ ¼å­ä½ç½®=å°ä¸ªå­ä½ç½® / 4ï¼\n      }\n\n      let float_j: float = node_buffer[0];\n\n      const nextNode = this.u_Data[int(float_j)];\n      const vx = nextNode[0] - currentNode[0];\n      const vy = nextNode[1] - currentNode[1];\n      const dist = sqrt(vx * vx + vy * vy) + 0.01;\n      const direx = vx / dist;\n      const direy = vy / dist;\n      const edgeLength = node_buffer[1];\n      const edgeStrength = node_buffer[2];\n      const diff: float = edgeLength - dist;//edgeLength\n      // const param = diff * this.u_stiffness / mass; //\n      const param = diff * edgeStrength / mass; // \n      ax -= direx * param;\n      ay -= direy * param;\n    }\n    return [ax, ay];\n  }\n\n  @main\n  compute() {\n    const i = globalInvocationID.x;\n    const currentNode = this.u_Data[i];\n    const movement = u_AveMovement[0];\n    let ax = 0, ay = 0;\n\n    if (i >= VERTEX_COUNT || movement.x < u_minMovement) {\n      this.u_Data[i] = currentNode;\n      return;\n    }\n\n    // æ¯ä¸ªèç¹å±æ§å ä¸¤ä¸ªæ°ç»ä¸­åä¸æ ¼\n    // [mass, degree, nodeStrength, fx]\n    const nodeAttributes1 = this.u_NodeAttributeArray1[i];\n    // [centerX, centerY, centerGravity, fy]\n    const nodeAttributes2 = this.u_NodeAttributeArray2[i];\n\n    // repulsive\n    const repulsive = this.calcRepulsive(i, currentNode);\n    ax += repulsive[0];\n    ay += repulsive[1];\n\n    // attractive\n    const attractive = this.calcAttractive(i, currentNode, nodeAttributes1);\n    ax += attractive[0];\n    ay += attractive[1];\n\n    // gravity\n    const gravity = this.calcGravity(i, currentNode, nodeAttributes2);\n    ax -= gravity[0];\n    ay -= gravity[1];\n\n    // speed\n    const param = this.u_interval * this.u_damping;\n    let vx = ax * param;\n    let vy = ay * param;\n    const vlength = sqrt(vx * vx + vy * vy) + 0.0001;\n    if (vlength > this.u_maxSpeed) {\n      const param2 = this.u_maxSpeed / vlength;\n      vx = param2 * vx;\n      vy = param2 * vy;\n    }\n\n    // move\n    if (nodeAttributes1[3] != 0 && nodeAttributes2[3] != 0) {\n      this.u_Data[i] = [\n        nodeAttributes1[3],\n        nodeAttributes2[3],\n        currentNode[2],\n        0\n      ];\n    } else {\n      const distx = vx * this.u_interval;\n      const disty = vy * this.u_interval;\n      const distLength = sqrt(distx * distx + disty * disty);\n      this.u_Data[i] = [\n        currentNode[0] + distx,\n        currentNode[1] + disty,\n        currentNode[2],\n        distLength\n      ];\n    }\n    \n    // the avarage move distance\n    // need to share memory\n    \n  }\n}\n",t.gForceBundle='{"shaders":{"WGSL":"","GLSL450":"","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define SHIFT_20 1048576.0\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_damping;\\nuniform float u_maxSpeed;\\nuniform float u_minMovement;\\nuniform sampler2D u_AveMovement;\\nuniform vec2 u_AveMovementSize;\\nvec4 getDatau_AveMovement(vec2 address2D) {\\n  return vec4(texture2D(u_AveMovement, address2D).rgba);\\n}\\nvec4 getDatau_AveMovement(float address1D) {\\n  return getDatau_AveMovement(addrTranslation_1Dto2D(address1D, u_AveMovementSize));\\n}\\nvec4 getDatau_AveMovement(int address1D) {\\n  return getDatau_AveMovement(float(address1D));\\n}\\nuniform float u_coulombDisScale;\\nuniform float u_factor;\\nuniform sampler2D u_NodeAttributeArray1;\\nuniform vec2 u_NodeAttributeArray1Size;\\nvec4 getDatau_NodeAttributeArray1(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributeArray1, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributeArray1(float address1D) {\\n  return getDatau_NodeAttributeArray1(addrTranslation_1Dto2D(address1D, u_NodeAttributeArray1Size));\\n}\\nvec4 getDatau_NodeAttributeArray1(int address1D) {\\n  return getDatau_NodeAttributeArray1(float(address1D));\\n}\\nuniform sampler2D u_NodeAttributeArray2;\\nuniform vec2 u_NodeAttributeArray2Size;\\nvec4 getDatau_NodeAttributeArray2(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributeArray2, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributeArray2(float address1D) {\\n  return getDatau_NodeAttributeArray2(addrTranslation_1Dto2D(address1D, u_NodeAttributeArray2Size));\\n}\\nvec4 getDatau_NodeAttributeArray2(int address1D) {\\n  return getDatau_NodeAttributeArray2(float(address1D));\\n}\\nuniform float u_interval;\\nivec2 unpack_float(float packedValue) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint packedIntValue = int(packedValue);\\nint v0 = packedIntValue / int(SHIFT_20);\\nreturn ivec2(v0, packedIntValue - (v0 * int(SHIFT_20)));}\\nvec2 calcRepulsive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = getDatau_Data(j);\\nfloat vx = currentNode.x - nextNode.x;\\nfloat vy = currentNode.y - nextNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat n_dist = (dist + 0.1) * u_coulombDisScale;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nvec4 attributesi = getDatau_NodeAttributeArray1(i);\\nvec4 attributesj = getDatau_NodeAttributeArray1(j);\\nfloat massi = attributesi.x;\\nfloat nodeStrengthi = attributesi.z;\\nfloat nodeStrengthj = attributesj.z;\\nfloat nodeStrength = (nodeStrengthi + nodeStrengthj) / 2.0;\\nfloat param = (nodeStrength * u_factor) / (n_dist * n_dist);\\nax += direx * param;\\nay += direy * param;}}\\nreturn vec2(ax, ay);}\\nvec2 calcGravity(int i, vec4 currentNode, vec4 attributes2) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat vx = currentNode.x - attributes2.x;\\nfloat vy = currentNode.y - attributes2.y;\\nfloat ax = vx * attributes2.z;\\nfloat ay = vy * attributes2.z;\\nreturn vec2(ax, ay);}\\nvec2 calcAttractive(int i, vec4 currentNode, vec4 attributes1) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat mass = attributes1.x;\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nivec2 compressed = unpack_float(currentNode.z);\\nint length = compressed.x;\\nint arr_offset = compressed.y;\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + (4 * p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = getDatau_Data(int(arr_idx / 4));}\\nfloat float_j = node_buffer.x;\\nvec4 nextNode = getDatau_Data(int(float_j));\\nfloat vx = nextNode.x - currentNode.x;\\nfloat vy = nextNode.y - currentNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nfloat edgeLength = node_buffer.y;\\nfloat edgeStrength = node_buffer.z;\\nfloat diff = edgeLength - dist;\\nfloat param = (diff * edgeStrength) / mass;\\nax -= direx * param;\\nay -= direy * param;}\\nreturn vec2(ax, ay);}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 currentNode = getDatau_Data(i);\\nvec4 movement = getDatau_AveMovement(0.0);\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nif ((i >= VERTEX_COUNT) || (movement.x < u_minMovement)) {gl_FragColor = vec4(currentNode);\\nreturn ;}\\nvec4 nodeAttributes1 = getDatau_NodeAttributeArray1(i);\\nvec4 nodeAttributes2 = getDatau_NodeAttributeArray2(i);\\nvec2 repulsive = calcRepulsive(i, currentNode);\\nax += repulsive.x;\\nay += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode, nodeAttributes1);\\nax += attractive.x;\\nay += attractive.y;\\nvec2 gravity = calcGravity(i, currentNode, nodeAttributes2);\\nax -= gravity.x;\\nay -= gravity.y;\\nfloat param = u_interval * u_damping;\\nfloat vx = ax * param;\\nfloat vy = ay * param;\\nfloat vlength = sqrt((vx * vx) + (vy * vy)) + 0.0001;\\nif (vlength > u_maxSpeed) {float param2 = u_maxSpeed / vlength;\\nvx = param2 * vx;\\nvy = param2 * vy;}\\nif ((nodeAttributes1.w != 0.0) && (nodeAttributes2.w != 0.0)) {gl_FragColor = vec4(vec4(nodeAttributes1.w, nodeAttributes2.w, currentNode.z, 0.0));}else {float distx = vx * u_interval;\\nfloat disty = vy * u_interval;\\nfloat distLength = sqrt((distx * distx) + (disty * disty));\\ngl_FragColor = vec4(vec4(currentNode.x + distx, currentNode.y + disty, currentNode.z, distLength));}if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"MAX_EDGE_PER_VERTEX","type":"Float","runtime":true},{"name":"VERTEX_COUNT","type":"Float","runtime":true},{"name":"SHIFT_20","type":"Float","value":1048576,"runtime":false}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]},{"name":"u_damping","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_maxSpeed","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_minMovement","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AveMovement","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_coulombDisScale","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_factor","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributeArray1","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributeArray2","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_interval","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_Data","size":[1,1],"length":1},"needPingpong":true}}',t.aveMovementCode="\nconst VERTEX_COUNT;\n@numthreads(1, 1, 1)\nclass CalcAveMovement {\n  @in\n  u_Data: vec4[];\n  @in\n  u_iter: float;\n  @in @out\n  u_AveMovement: vec4[];\n  @main\n  compute() {\n    let movement = 0;\n    for (let j: int = 0; j < VERTEX_COUNT; j++) {\n      const vertex = this.u_Data[j];\n      movement += vertex[3];\n    }\n    movement = movement / float(VERTEX_COUNT);\n    this.u_AveMovement[0] = [movement, 0, 0, 0];\n  }\n}\n",t.aveMovementBundle='{"shaders":{"WGSL":"","GLSL450":"","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_iter;\\nuniform sampler2D u_AveMovement;\\nuniform vec2 u_AveMovementSize;\\nvec4 getDatau_AveMovement(vec2 address2D) {\\n  return vec4(texture2D(u_AveMovement, address2D).rgba);\\n}\\nvec4 getDatau_AveMovement(float address1D) {\\n  return getDatau_AveMovement(addrTranslation_1Dto2D(address1D, u_AveMovementSize));\\n}\\nvec4 getDatau_AveMovement(int address1D) {\\n  return getDatau_AveMovement(float(address1D));\\n}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat movement = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 vertex = getDatau_Data(j);\\nmovement += vertex.w;}\\nmovement = movement / float(VERTEX_COUNT);\\ngl_FragColor = vec4(vec4(movement, 0.0, 0.0, 0.0));if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"VERTEX_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_iter","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AveMovement","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_AveMovement","size":[1,1],"length":1},"needPingpong":true}}'},50790:function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.GridLayout=void 0;var i=r(58652),a=function(e){function t(t){var r=e.call(this)||this;return r.begin=[0,0],r.preventOverlap=!0,r.preventOverlapPadding=10,r.condense=!1,r.sortBy="degree",r.nodes=[],r.edges=[],r.width=300,r.height=300,r.row=0,r.col=0,r.cellWidth=0,r.cellHeight=0,r.cellUsed={},r.id2manPos={},r.onLayoutEnd=function(){},r.updateCfg(t),r}return o(t,e),t.prototype.getDefaultCfg=function(){return{begin:[0,0],preventOverlap:!0,preventOverlapPadding:10,condense:!1,rows:void 0,cols:void 0,position:void 0,sortBy:"degree",nodeSize:30}},t.prototype.execute=function(){var e=this,t=e.nodes,r=e.edges,n=e.begin,o=t.length;if(0===o)return e.onLayoutEnd&&e.onLayoutEnd(),{nodes:t,edges:r};if(1===o)return t[0].x=n[0],t[0].y=n[1],e.onLayoutEnd&&e.onLayoutEnd(),{nodes:t,edges:r};var a=e.sortBy,s=e.width,u=e.height,l=e.condense,c=e.preventOverlapPadding,f=e.preventOverlap,h=e.nodeSpacing,p=e.nodeSize,d=[];t.forEach(function(e){d.push(e)});var y={};if(d.forEach(function(e,t){y[e.id]=t}),("degree"===a||!(0,i.isString)(a)||void 0===d[0][a])&&(a="degree",(0,i.isNaN)(t[0].degree))){var v=(0,i.getDegree)(d.length,y,r);d.forEach(function(e,t){e.degree=v[t].all})}d.sort(function(e,t){return t[a]-e[a]}),s||"undefined"==typeof window||(s=window.innerWidth),u||"undefined"==typeof window||(u=window.innerHeight);var g=e.rows,m=null!=e.cols?e.cols:e.columns;if(e.cells=o,null!=g&&null!=m?(e.rows=g,e.cols=m):null!=g&&null==m?(e.rows=g,e.cols=Math.ceil(e.cells/e.rows)):null==g&&null!=m?(e.cols=m,e.rows=Math.ceil(e.cells/e.cols)):(e.splits=Math.sqrt(e.cells*e.height/e.width),e.rows=Math.round(e.splits),e.cols=Math.round(e.width/e.height*e.splits)),e.rows=Math.max(e.rows,1),e.cols=Math.max(e.cols,1),e.cols*e.rows>e.cells)((w=e.small())-1)*(b=e.large())>=e.cells?e.small(w-1):(b-1)*w>=e.cells&&e.large(b-1);else for(;e.cols*e.rows<e.cells;){var b,w=e.small();((b=e.large())+1)*w>=e.cells?e.large(b+1):e.small(w+1)}if(e.cellWidth=s/e.cols,e.cellHeight=u/e.rows,l&&(e.cellWidth=0,e.cellHeight=0),f||h){var _=(0,i.getFuncByUnknownType)(10,h),x=(0,i.getFuncByUnknownType)(30,p,!1);d.forEach(function(t){t.x&&t.y||(t.x=0,t.y=0);var r,n,o=x(t)||30;(0,i.isArray)(o)?(r=o[0],n=o[1]):(r=o,n=o);var a=void 0!==_?_(t):c,s=r+a,u=n+a;e.cellWidth=Math.max(e.cellWidth,s),e.cellHeight=Math.max(e.cellHeight,u)})}e.cellUsed={},e.row=0,e.col=0,e.id2manPos={};for(var S=0;S<d.length;S++){var O=d[S],P=void 0;if(e.position&&(P=e.position(O)),P&&(void 0!==P.row||void 0!==P.col)){var E={row:P.row,col:P.col};if(void 0===E.col)for(E.col=0;e.used(E.row,E.col);)E.col++;else if(void 0===E.row)for(E.row=0;e.used(E.row,E.col);)E.row++;e.id2manPos[O.id]=E,e.use(E.row,E.col)}e.getPos(O)}return e.onLayoutEnd&&e.onLayoutEnd(),{edges:r,nodes:d}},t.prototype.small=function(e){var t,r=this.rows||5,n=this.cols||5;null==e?t=Math.min(r,n):Math.min(r,n)===this.rows?this.rows=e:this.cols=e;return t},t.prototype.large=function(e){var t,r=this.rows||5,n=this.cols||5;null==e?t=Math.max(r,n):Math.max(r,n)===this.rows?this.rows=e:this.cols=e;return t},t.prototype.used=function(e,t){return this.cellUsed["c-".concat(e,"-").concat(t)]||!1},t.prototype.use=function(e,t){this.cellUsed["c-".concat(e,"-").concat(t)]=!0},t.prototype.moveToNextCell=function(){var e=this.cols||5;this.col++,this.col>=e&&(this.col=0,this.row++)},t.prototype.getPos=function(e){var t,r,n=this.begin,o=this.cellWidth,i=this.cellHeight,a=this.id2manPos[e.id];if(a)t=a.col*o+o/2+n[0],r=a.row*i+i/2+n[1];else{for(;this.used(this.row,this.col);)this.moveToNextCell();t=this.col*o+o/2+n[0],r=this.row*i+i/2+n[1],this.use(this.row,this.col),this.moveToNextCell()}e.x=t,e.y=r},t.prototype.getType=function(){return"grid"},t}(r(9284).Base);t.GridLayout=a},71812:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&("get"in o?t.__esModule:!o.writable&&!o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.ERLayout=t.ForceAtlas2Layout=t.ComboCombinedLayout=t.ComboForceLayout=t.GForceGPULayout=t.FruchtermanGPULayout=t.FruchtermanLayout=t.MDSLayout=t.ConcentricLayout=t.RadialLayout=t.DagreCompoundLayout=t.DagreLayout=t.CircularLayout=t.ForceLayout=t.Force2Layout=t.GForceLayout=t.RandomLayout=t.GridLayout=t.Layouts=t.Layout=void 0;var i=r(50790);Object.defineProperty(t,"GridLayout",{enumerable:!0,get:function(){return i.GridLayout}});var a=r(83846);Object.defineProperty(t,"RandomLayout",{enumerable:!0,get:function(){return a.RandomLayout}});var s=r(66007);Object.defineProperty(t,"GForceLayout",{enumerable:!0,get:function(){return s.GForceLayout}});var u=r(13490);Object.defineProperty(t,"Force2Layout",{enumerable:!0,get:function(){return u.Force2Layout}});var l=r(1878);Object.defineProperty(t,"ForceLayout",{enumerable:!0,get:function(){return l.ForceLayout}});var c=r(64933);Object.defineProperty(t,"CircularLayout",{enumerable:!0,get:function(){return c.CircularLayout}});var f=r(10813);Object.defineProperty(t,"DagreLayout",{enumerable:!0,get:function(){return f.DagreLayout}});var h=r(91083);Object.defineProperty(t,"DagreCompoundLayout",{enumerable:!0,get:function(){return h.DagreCompoundLayout}});var p=r(44318);Object.defineProperty(t,"RadialLayout",{enumerable:!0,get:function(){return p.RadialLayout}});var d=r(57940);Object.defineProperty(t,"ConcentricLayout",{enumerable:!0,get:function(){return d.ConcentricLayout}});var y=r(15031);Object.defineProperty(t,"MDSLayout",{enumerable:!0,get:function(){return y.MDSLayout}});var v=r(66865);Object.defineProperty(t,"FruchtermanLayout",{enumerable:!0,get:function(){return v.FruchtermanLayout}});var g=r(69720);Object.defineProperty(t,"FruchtermanGPULayout",{enumerable:!0,get:function(){return g.FruchtermanGPULayout}});var m=r(54790);Object.defineProperty(t,"GForceGPULayout",{enumerable:!0,get:function(){return m.GForceGPULayout}});var b=r(65428);Object.defineProperty(t,"ComboForceLayout",{enumerable:!0,get:function(){return b.ComboForceLayout}});var w=r(99266);Object.defineProperty(t,"ComboCombinedLayout",{enumerable:!0,get:function(){return w.ComboCombinedLayout}});var _=r(40432);Object.defineProperty(t,"ForceAtlas2Layout",{enumerable:!0,get:function(){return _.ForceAtlas2Layout}});var x=r(4957);Object.defineProperty(t,"ERLayout",{enumerable:!0,get:function(){return x.ERLayout}});var S=r(34199);Object.defineProperty(t,"Layout",{enumerable:!0,get:function(){return S.Layout}}),Object.defineProperty(t,"Layouts",{enumerable:!0,get:function(){return S.Layouts}}),o(r(88312),t)},34199:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Layouts=t.Layout=void 0;var n=r(52235),o=r(50790),i=r(83846),a=r(13490),s=r(66007),u=r(1878),l=r(64933),c=r(10813),f=r(44318),h=r(57940),p=r(15031),d=r(66865),y=r(69720),v=r(54790),g=r(65428),m=r(99266),b=r(40432),w=r(4957),_=r(91083),x=r(58652),S=function(){function e(e){var t=(0,n.getLayoutByName)(e.type);this.layoutInstance=new t(e)}return e.prototype.layout=function(e){return this.layoutInstance.layout(e)},e.prototype.updateCfg=function(e){this.layoutInstance.updateCfg(e)},e.prototype.init=function(e){this.correctLayers(e.nodes),this.layoutInstance.init(e)},e.prototype.correctLayers=function(e){if(null===e||void 0===e?void 0:e.length){var t=1/0,r=[];if(e.forEach(function(e){(0,x.isString)(e.layer)&&(e.layer=parseInt(e.layer,10)),void 0===e.layer||isNaN(e.layer)||(r.push(e),e.layer<t&&(t=e.layer))}),t<=0){var n=Math.abs(t)+1;r.forEach(function(e){return e.layer+=n})}}},e.prototype.execute=function(){this.layoutInstance.execute()},e.prototype.getDefaultCfg=function(){return this.layoutInstance.getDefaultCfg()},e.prototype.destroy=function(){return this.layoutInstance.destroy()},e}();t.Layout=S,t.Layouts={force:u.ForceLayout,fruchterman:d.FruchtermanLayout,forceAtlas2:b.ForceAtlas2Layout,gForce:s.GForceLayout,force2:a.Force2Layout,dagre:c.DagreLayout,dagreCompound:_.DagreCompoundLayout,circular:l.CircularLayout,radial:f.RadialLayout,concentric:h.ConcentricLayout,grid:o.GridLayout,mds:p.MDSLayout,comboForce:g.ComboForceLayout,comboCombined:m.ComboCombinedLayout,random:i.RandomLayout,"gForce-gpu":v.GForceGPULayout,"fruchterman-gpu":y.FruchtermanGPULayout,er:w.ERLayout}},15031:function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.MDSLayout=void 0;var i=r(92686),a=r(58652),s=function(e){function t(t){var r=e.call(this)||this;return r.center=[0,0],r.linkDistance=50,r.nodes=[],r.edges=[],r.onLayoutEnd=function(){},r.updateCfg(t),r}return o(t,e),t.prototype.getDefaultCfg=function(){return{center:[0,0],linkDistance:50}},t.prototype.execute=function(){var e=this.nodes,t=this.edges,r=void 0===t?[]:t,n=this.center;if(e&&0!==e.length){if(1===e.length)return e[0].x=n[0],e[0].y=n[1],void(this.onLayoutEnd&&this.onLayoutEnd());var o=this.linkDistance,i=(0,a.getAdjMatrix)({nodes:e,edges:r},!1),s=(0,a.floydWarshall)(i);this.handleInfinity(s);var u=(0,a.scaleMatrix)(s,o);this.scaledDistances=u;var l=this.runMDS();return this.positions=l,l.forEach(function(t,r){e[r].x=t[0]+n[0],e[r].y=t[1]+n[1]}),this.onLayoutEnd&&this.onLayoutEnd(),{nodes:e,edges:r}}this.onLayoutEnd&&this.onLayoutEnd()},t.prototype.runMDS=function(){var e=this.scaledDistances,t=i.Matrix.mul(i.Matrix.pow(e,2),-.5),r=t.mean("row"),n=t.mean("column"),o=t.mean();t.add(o).subRowVector(r).subColumnVector(n);var a=new i.SingularValueDecomposition(t),s=i.Matrix.sqrt(a.diagonalMatrix).diagonal();return a.leftSingularVectors.toJSON().map(function(e){return i.Matrix.mul([e],[s]).toJSON()[0].splice(0,2)})},t.prototype.handleInfinity=function(e){var t=-999999;e.forEach(function(e){e.forEach(function(e){e!==1/0&&t<e&&(t=e)})}),e.forEach(function(r,n){r.forEach(function(r,o){r===1/0&&(e[n][o]=t)})})},t.prototype.getType=function(){return"mds"},t}(r(9284).Base);t.MDSLayout=s},44318:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&("get"in o?t.__esModule:!o.writable&&!o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(30910),t)},7655:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(92686),o=function(){function e(e){this.distances=e.distances,this.dimension=e.dimension||2,this.linkDistance=e.linkDistance}return e.prototype.layout=function(){var e=this.dimension,t=this.distances,r=this.linkDistance;try{var o=n.Matrix.mul(n.Matrix.pow(t,2),-.5),i=o.mean("row"),a=o.mean("column"),s=o.mean();o.add(s).subRowVector(i).subColumnVector(a);var u=new n.SingularValueDecomposition(o),l=n.Matrix.sqrt(u.diagonalMatrix).diagonal();return u.leftSingularVectors.toJSON().map(function(t){return n.Matrix.mul([t],[l]).toJSON()[0].splice(0,e)})}catch(e){for(var c=[],f=0;f<t.length;f++){var h=Math.random()*r,p=Math.random()*r;c.push([h,p])}return c}},e}();t.default=o},30910:function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.RadialLayout=void 0;var a=r(58652),s=r(9284),u=i(r(7655)),l=i(r(20632));function c(e,t){return Math.sqrt((e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1]))}var f=function(e){function t(t){var r=e.call(this)||this;return r.maxIteration=1e3,r.focusNode=null,r.unitRadius=null,r.linkDistance=50,r.preventOverlap=!1,r.strictRadial=!0,r.maxPreventOverlapIteration=200,r.sortStrength=10,r.nodes=[],r.edges=[],r.updateCfg(t),r}return o(t,e),t.prototype.getDefaultCfg=function(){return{maxIteration:1e3,focusNode:null,unitRadius:null,linkDistance:50,preventOverlap:!1,nodeSize:void 0,nodeSpacing:void 0,strictRadial:!0,maxPreventOverlapIteration:200,sortBy:void 0,sortStrength:10}},t.prototype.execute=function(){var e=this,t=e.nodes,r=e.edges||[];if(t&&0!==t.length){e.width||"undefined"==typeof window||(e.width=window.innerWidth),e.height||"undefined"==typeof window||(e.height=window.innerHeight),e.center||(e.center=[e.width/2,e.height/2]);var n=e.center;if(1===t.length)return t[0].x=n[0],t[0].y=n[1],void(e.onLayoutEnd&&e.onLayoutEnd());var o=e.linkDistance,i=null;if((0,a.isString)(e.focusNode)){for(var s=!1,c=0;c<t.length;c++)t[c].id===e.focusNode&&(i=t[c],e.focusNode=i,s=!0,c=t.length);s||(i=null)}else i=e.focusNode;i||(i=t[0],e.focusNode=i);var f,h,p,d=(f=t,h=i.id,p=-1,f.forEach(function(e,t){e.id===h&&(p=t)}),p);d<0&&(d=0),e.focusIndex=d;var y=(0,a.getAdjMatrix)({nodes:t,edges:r},!1),v=(0,a.floydWarshall)(y),g=e.maxToFocus(v,d);e.handleInfinity(v,d,g+1),e.distances=v;var m=v[d],b=e.width||500,w=e.height||500,_=b-n[0]>n[0]?n[0]:b-n[0],x=w-n[1]>n[1]?n[1]:w-n[1];0===_&&(_=b/2),0===x&&(x=w/2);var S=x>_?_:x,O=Math.max.apply(Math,m),P=[];m.forEach(function(t,r){e.unitRadius||(e.unitRadius=S/O),P[r]=t*e.unitRadius}),e.radii=P;var E=e.eIdealDisMatrix();e.eIdealDistances=E;var k=function(e){for(var t=e.length,r=e[0].length,n=[],o=0;o<t;o++){for(var i=[],a=0;a<r;a++)0!==e[o][a]?i.push(1/(e[o][a]*e[o][a])):i.push(0);n.push(i)}return n}(E);e.weights=k;var M=new u.default({linkDistance:o,distances:E}).layout();M.forEach(function(e){(0,a.isNaN)(e[0])&&(e[0]=Math.random()*o),(0,a.isNaN)(e[1])&&(e[1]=Math.random()*o)}),e.positions=M,M.forEach(function(e,r){t[r].x=e[0]+n[0],t[r].y=e[1]+n[1]}),M.forEach(function(e){e[0]-=M[d][0],e[1]-=M[d][1]}),e.run();var C,j=e.preventOverlap,T=e.nodeSize,A=e.strictRadial;if(j){var I,R=e.nodeSpacing;I=(0,a.isNumber)(R)?function(){return R}:(0,a.isFunction)(R)?R:function(){return 0},C=T?(0,a.isArray)(T)?function(e){return(T[0]>T[1]?T[0]:T[1])+I(e)}:function(e){return T+I(e)}:function(e){return e.size?(0,a.isArray)(e.size)?(e.size[0]>e.size[1]?e.size[0]:e.size[1])+I(e):(0,a.isObject)(e.size)?(e.size.width>e.size.height?e.size.width:e.size.height)+I(e):e.size+I(e):10+I(e)};var L={nodes:t,nodeSizeFunc:C,adjMatrix:y,positions:M,radii:P,height:w,width:b,strictRadial:A,focusID:d,iterations:e.maxPreventOverlapIteration||200,k:M.length/4.5},N=new l.default(L);M=N.layout()}return M.forEach(function(e,r){t[r].x=e[0]+n[0],t[r].y=e[1]+n[1]}),e.onLayoutEnd&&e.onLayoutEnd(),{nodes:t,edges:r}}e.onLayoutEnd&&e.onLayoutEnd()},t.prototype.run=function(){for(var e=this.maxIteration,t=this.positions||[],r=this.weights||[],n=this.eIdealDistances||[],o=this.radii||[],i=0;i<=e;i++){var a=i/e;this.oneIteration(a,t,o,n,r)}},t.prototype.oneIteration=function(e,t,r,n,o){var i=1-e,a=this.focusIndex;t.forEach(function(s,u){var l=c(s,[0,0]),f=0===l?0:1/l;if(u!==a){var h=0,p=0,d=0;t.forEach(function(e,t){if(u!==t){var r=c(s,e),i=0===r?0:1/r,a=n[t][u];d+=o[u][t],h+=o[u][t]*(e[0]+a*(s[0]-e[0])*i),p+=o[u][t]*(e[1]+a*(s[1]-e[1])*i)}});var y=0===r[u]?0:1/r[u];d*=i,d+=e*y*y,h*=i,h+=e*y*s[0]*f,s[0]=h/d,p*=i,p+=e*y*s[1]*f,s[1]=p/d}})},t.prototype.eIdealDisMatrix=function(){var e=this,t=e.nodes;if(!t)return[];var r=e.distances,n=e.linkDistance,o=e.radii||[],i=e.unitRadius||50,s=[];return r&&r.forEach(function(r,u){var l=[];r.forEach(function(r,s){if(u===s)l.push(0);else if(o[u]===o[s])if("data"===e.sortBy)l.push(r*(Math.abs(u-s)*e.sortStrength)/(o[u]/i));else if(e.sortBy){var c=t[u][e.sortBy]||0,f=t[s][e.sortBy]||0;(0,a.isString)(c)&&(c=c.charCodeAt(0)),(0,a.isString)(f)&&(f=f.charCodeAt(0)),l.push(r*(Math.abs(c-f)*e.sortStrength)/(o[u]/i))}else l.push(r*n/(o[u]/i));else{var h=(n+i)/2;l.push(r*h)}}),s.push(l)}),s},t.prototype.handleInfinity=function(e,t,r){for(var n=e.length,o=0;o<n;o++)if(e[t][o]===1/0){e[t][o]=r,e[o][t]=r;for(var i=0;i<n;i++)e[o][i]!==1/0&&e[t][i]===1/0&&(e[t][i]=r+e[o][i],e[i][t]=r+e[o][i])}for(o=0;o<n;o++)if(o!==t)for(i=0;i<n;i++)if(e[o][i]===1/0){var a=Math.abs(e[t][o]-e[t][i]);a=0===a?1:a,e[o][i]=a}},t.prototype.maxToFocus=function(e,t){for(var r=0,n=0;n<e[t].length;n++)e[t][n]!==1/0&&(r=e[t][n]>r?e[t][n]:r);return r},t.prototype.getType=function(){return"radial"},t}(s.Base);t.RadialLayout=f},20632:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this.disp=[],this.positions=e.positions,this.adjMatrix=e.adjMatrix,this.focusID=e.focusID,this.radii=e.radii,this.iterations=e.iterations||10,this.height=e.height||10,this.width=e.width||10,this.speed=e.speed||100,this.gravity=e.gravity||10,this.nodeSizeFunc=e.nodeSizeFunc,this.k=e.k||5,this.strictRadial=e.strictRadial,this.nodes=e.nodes}return e.prototype.layout=function(){var e=this.positions,t=[],r=this.iterations,n=this.width/10;this.maxDisplace=n,this.disp=t;for(var o=0;o<r;o++)e.forEach(function(e,r){t[r]={x:0,y:0}}),this.getRepulsion(),this.updatePositions();return e},e.prototype.getRepulsion=function(){var e=this,t=e.positions,r=e.nodes,n=e.disp,o=e.k,i=e.radii||[];t.forEach(function(a,s){n[s]={x:0,y:0},t.forEach(function(t,u){if(s!==u&&i[s]===i[u]){var l=a[0]-t[0],c=a[1]-t[1],f=Math.sqrt(l*l+c*c);if(0===f){f=1;var h=s>u?1:-1;l=.01*h,c=.01*h}if(f<e.nodeSizeFunc(r[s])/2+e.nodeSizeFunc(r[u])/2){var p=o*o/f;n[s].x+=l/f*p,n[s].y+=c/f*p}}})})},e.prototype.updatePositions=function(){var e=this.positions,t=this.disp,r=this.speed,n=this.strictRadial,o=this.focusID,i=this.maxDisplace||this.width/10;n&&t.forEach(function(t,r){var n=e[r][0]-e[o][0],i=e[r][1]-e[o][1],a=Math.sqrt(n*n+i*i),s=i/a,u=-n/a,l=Math.sqrt(t.x*t.x+t.y*t.y),c=Math.acos((s*t.x+u*t.y)/l);c>Math.PI/2&&(c-=Math.PI/2,s*=-1,u*=-1);var f=Math.cos(c)*l;t.x=s*f,t.y=u*f});var a=this.radii;e.forEach(function(s,u){if(u!==o){var l=Math.sqrt(t[u].x*t[u].x+t[u].y*t[u].y);if(l>0&&u!==o){var c=Math.min(i*(r/800),l);if(s[0]+=t[u].x/l*c,s[1]+=t[u].y/l*c,n){var f=s[0]-e[o][0],h=s[1]-e[o][1],p=Math.sqrt(f*f+h*h);f=f/p*a[u],h=h/p*a[u],s[0]=e[o][0]+f,s[1]=e[o][1]+h}}}})},e}();t.default=r},83846:function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.RandomLayout=void 0;var i=function(e){function t(t){var r=e.call(this)||this;return r.center=[0,0],r.width=300,r.height=300,r.nodes=[],r.edges=[],r.onLayoutEnd=function(){},r.updateCfg(t),r}return o(t,e),t.prototype.getDefaultCfg=function(){return{center:[0,0],width:300,height:300}},t.prototype.execute=function(){var e=this,t=e.nodes,r=e.center;return e.width||"undefined"==typeof window||(e.width=window.innerWidth),e.height||"undefined"==typeof window||(e.height=window.innerHeight),t&&t.forEach(function(t){t.x=.9*(Math.random()-.5)*e.width+r[0],t.y=.9*(Math.random()-.5)*e.height+r[1]}),e.onLayoutEnd&&e.onLayoutEnd(),{nodes:t,edges:this.edges}},t.prototype.getType=function(){return"random"},t}(r(9284).Base);t.RandomLayout=i},88312:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},52235:function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.getLayoutByName=t.unRegisterLayout=t.registerLayout=void 0;var i=r(9284),a=r(58652),s=new Map;t.registerLayout=function(e,t){if(s.get(e)&&console.warn("The layout with the name ".concat(e," exists already, it will be overridden")),(0,a.isObject)(t)){var r=function(e){function r(r){var n,o,i=n=e.call(this)||this,a={},s=Object.assign({},i.getDefaultCfg(),(null===(o=t.getDefaultCfg)||void 0===o?void 0:o.call(t))||{});return Object.assign(a,s,t,r),Object.keys(a).forEach(function(e){var t=a[e];i[e]=t}),n}return o(r,e),r}(i.Base);s.set(e,r)}else s.set(e,t);return s.get(e)};t.unRegisterLayout=function(e){s.has(e)&&s.delete(e)};t.getLayoutByName=function(e){return s.has(e)?s.get(e):null}},5458:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isArray=void 0,t.isArray=Array.isArray},77102:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getFuncByUnknownType=t.getFunc=t.isFunction=void 0;var n=r(58652),o=r(58325);t.isFunction=function(e){return"function"==typeof e};t.getFunc=function(e,t,r){return r||((0,o.isNumber)(e)?function(){return e}:function(){return t})};t.getFuncByUnknownType=function(e,r,i){return void 0===i&&(i=!0),r||0===r?(0,t.isFunction)(r)?r:(0,o.isNumber)(r)?function(){return r}:(0,n.isArray)(r)?function(){if(i){var t=Math.max.apply(Math,r);return isNaN(t)?e:t}return r}:(0,n.isObject)(r)?function(){if(i){var t=Math.max(r.width,r.height);return isNaN(t)?e:t}return[r.width,r.height]}:function(){return e}:function(t){return t.size?(0,n.isArray)(t.size)?t.size[0]>t.size[1]?t.size[0]:t.size[1]:(0,n.isObject)(t.size)?t.size.width>t.size.height?t.size.width:t.size.height:t.size:e}}},70446:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.arrayToTextureData=t.attributesToTextureData=t.buildTextureDataWithTwoEdgeAttr=t.buildTextureData=t.proccessToFunc=void 0;var n=r(58652),o=r(23979);t.proccessToFunc=function(e,t){return e?(0,n.isNumber)(e)?function(){return e}:e:function(){return t||1}};t.buildTextureData=function(e,t){var r=[],n=[],i={},a=0;for(a=0;a<e.length;a++){var s=e[a];i[s.id]=a,r.push(s.x),r.push(s.y),r.push(0),r.push(0),n.push([])}for(a=0;a<t.length;a++){var u=t[a],l=(0,o.getEdgeTerminal)(u,"source"),c=(0,o.getEdgeTerminal)(u,"target");isNaN(i[l])||isNaN(i[c])||(n[i[l]].push(i[c]),n[i[c]].push(i[l]))}var f=0;for(a=0;a<e.length;a++){var h=r.length,p=n[a],d=p.length;r[4*a+2]=h,r[4*a+3]=d,f=Math.max(f,d);for(var y=0;y<d;++y){var v=p[y];r.push(+v)}}for(;r.length%4!=0;)r.push(0);return{maxEdgePerVetex:f,array:new Float32Array(r)}};t.buildTextureDataWithTwoEdgeAttr=function(e,t,r,n){var i=[],a=[],s={},u=0;for(u=0;u<e.length;u++){var l=e[u];s[l.id]=u,i.push(l.x),i.push(l.y),i.push(0),i.push(0),a.push([])}for(u=0;u<t.length;u++){var c=t[u],f=(0,o.getEdgeTerminal)(c,"source"),h=(0,o.getEdgeTerminal)(c,"target");a[s[f]].push(s[h]),a[s[f]].push(r(c)),a[s[f]].push(n(c)),a[s[f]].push(0),a[s[h]].push(s[f]),a[s[h]].push(r(c)),a[s[h]].push(n(c)),a[s[h]].push(0)}var p=0;for(u=0;u<e.length;u++){var d=i.length,y=a[u],v=y.length;i[4*u+2]=d+1048576*v/4,i[4*u+3]=0,p=Math.max(p,v/4);for(var g=0;g<v;++g){var m=y[g];i.push(+m)}}for(;i.length%4!=0;)i.push(0);return{maxEdgePerVetex:p,array:new Float32Array(i)}};t.attributesToTextureData=function(e,t){var r=[],n=e.length,o={};return t.forEach(function(t){e.forEach(function(e,i){if(void 0===o[t[e]]&&(o[t[e]]=Object.keys(o).length),r.push(o[t[e]]),i===n-1)for(;r.length%4!=0;)r.push(0)})}),{array:new Float32Array(r),count:Object.keys(o).length}};t.arrayToTextureData=function(e){for(var t=[],r=e.length,n=e[0].length,o=function(n){e.forEach(function(e,o){if(t.push(e[n]),o===r-1)for(;t.length%4!=0;)t.push(0)})},i=0;i<n;i++)o(i);return new Float32Array(t)}},58652:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&("get"in o?t.__esModule:!o.writable&&!o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(66515),t),o(r(5458),t),o(r(58325),t),o(r(23979),t),o(r(74584),t),o(r(77102),t)},23979:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCoreNodeAndRelativeLeafNodes=t.getAvgNodePosition=t.getLayoutBBox=t.traverseTreeUp=t.scaleMatrix=t.getAdjMatrix=t.floydWarshall=t.getDegreeMap=t.getDegree=t.getEdgeTerminal=void 0;var n=r(5458),o=r(58325),i=r(74584);t.getEdgeTerminal=function(e,t){var r=e[t];return(0,i.isObject)(r)?r.cell:r};t.getDegree=function(e,r,n){for(var o=[],i=0;i<e;i++)o[i]={in:0,out:0,all:0};return n?(n.forEach(function(e){var n=(0,t.getEdgeTerminal)(e,"source"),i=(0,t.getEdgeTerminal)(e,"target");n&&o[r[n]]&&(o[r[n]].out+=1,o[r[n]].all+=1),i&&o[r[i]]&&(o[r[i]].in+=1,o[r[i]].all+=1)}),o):o};t.getDegreeMap=function(e,r){var n={};return e.forEach(function(e){n[e.id]={in:0,out:0,all:0}}),r?(r.forEach(function(e){var r=(0,t.getEdgeTerminal)(e,"source"),o=(0,t.getEdgeTerminal)(e,"target");r&&(n[r].out+=1,n[r].all+=1),o&&(n[o].in+=1,n[o].all+=1)}),n):n};t.floydWarshall=function(e){for(var t=[],r=e.length,n=0;n<r;n+=1){t[n]=[];for(var o=0;o<r;o+=1)n===o?t[n][o]=0:0!==e[n][o]&&e[n][o]?t[n][o]=e[n][o]:t[n][o]=1/0}for(var i=0;i<r;i+=1)for(n=0;n<r;n+=1)for(o=0;o<r;o+=1)t[n][o]>t[n][i]+t[i][o]&&(t[n][o]=t[n][i]+t[i][o]);return t};t.getAdjMatrix=function(e,r){var n=e.nodes,o=e.edges,i=[],a={};if(!n)throw new Error("invalid nodes data!");return n&&n.forEach(function(e,t){a[e.id]=t,i.push([])}),null===o||void 0===o||o.forEach(function(e){var n=(0,t.getEdgeTerminal)(e,"source"),o=(0,t.getEdgeTerminal)(e,"target"),s=a[n],u=a[o];void 0!==s&&void 0!==u&&(i[s][u]=1,r||(i[u][s]=1))}),i};t.scaleMatrix=function(e,t){var r=[];return e.forEach(function(e){var n=[];e.forEach(function(e){n.push(e*t)}),r.push(n)}),r};t.traverseTreeUp=function(e,t){"function"==typeof t&&function e(t,r){if(t&&t.children)for(var n=t.children.length-1;n>=0;n--)if(!e(t.children[n],r))return;return!!r(t)}(e,t)};t.getLayoutBBox=function(e){var t=1/0,r=1/0,i=-1/0,a=-1/0;return e.forEach(function(e){var s=e.size;(0,n.isArray)(s)?1===s.length&&(s=[s[0],s[0]]):(0,o.isNumber)(s)?s=[s,s]:(void 0===s||isNaN(s))&&(s=[30,30]);var u=[s[0]/2,s[1]/2],l=e.x-u[0],c=e.x+u[0],f=e.y-u[1],h=e.y+u[1];t>l&&(t=l),r>f&&(r=f),i<c&&(i=c),a<h&&(a=h)}),{minX:t,minY:r,maxX:i,maxY:a}};t.getAvgNodePosition=function(e){var t={x:0,y:0};e.forEach(function(e){t.x+=e.x||0,t.y+=e.y||0});var r=e.length||1;return{x:t.x/r,y:t.y/r}};var a=function(e,t,r){var n,o;return"source"===e?(null===(n=null===r||void 0===r?void 0:r.find(function(e){return e.target===t.id}))||void 0===n?void 0:n.source)||{}:(null===(o=null===r||void 0===r?void 0:r.find(function(e){return e.source===t.id}))||void 0===o?void 0:o.target)||{}},s=function(e,t,r){var n=[];switch(e){case"source":n=null===r||void 0===r?void 0:r.filter(function(e){return e.source===t.id}).map(function(e){return e.target});break;case"target":n=null===r||void 0===r?void 0:r.filter(function(e){return e.target===t.id}).map(function(e){return e.source});break;case"both":n=null===r||void 0===r?void 0:r.filter(function(e){return e.source===t.id}).map(function(e){return e.target}).concat(null===r||void 0===r?void 0:r.filter(function(e){return e.target===t.id}).map(function(e){return e.source}))}var o=new Set(n);return Array.from(o)};t.getCoreNodeAndRelativeLeafNodes=function(e,t,r,n,o,i){var u=o[t.id],l=u.in,c=u.out,f=t,h=[];return 0===l?(f=a("source",t,r),h=s("both",f,r).map(function(e){return i[e]})):0===c&&(f=a("target",t,r),h=s("both",f,r).map(function(e){return i[e]})),{coreNode:f,relativeLeafNodes:h=h.filter(function(e){return o[e.id]&&(0===o[e.id].in||0===o[e.id].out)}),sameTypeLeafNodes:function(e,t,r,n,o){var i=r[t]||"",a=(null===n||void 0===n?void 0:n.filter(function(e){return e[t]===i}))||[];return"leaf"===e&&(a=a.filter(function(e){var t,r;return 0===(null===(t=o[e.id])||void 0===t?void 0:t.in)||0===(null===(r=o[e.id])||void 0===r?void 0:r.out)})),a}(e,n,t,h,o)}}},58325:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toNumber=t.isNaN=t.isNumber=void 0;t.isNumber=function(e){return"number"==typeof e};t.isNaN=function(e){return Number.isNaN(Number(e))};t.toNumber=function(e){var r=parseFloat(e);return(0,t.isNaN)(r)?e:r}},74584:function(e,t){"use strict";function r(e){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.clone=t.isObject=void 0;t.isObject=function(e){return null!==e&&"object"===r(e)};t.clone=function(e){if(null===e)return e;if(e instanceof Date)return new Date(e.getTime());if(e instanceof Array){var o=[];return e.forEach(function(e){o.push(e)}),o.map(function(e){return(0,t.clone)(e)})}if("object"===r(e)&&Object.keys(e).length){var i=n({},e);return Object.keys(i).forEach(function(e){i[e]=(0,t.clone)(i[e])}),i}return e}},66515:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.camelize=t.isString=void 0;t.isString=function(e){return"string"==typeof e};var r,n,o=/-(\w)/g;t.camelize=(r=function(e){return e.replace(o,function(e,t){return t?t.toUpperCase():""})},n=Object.create(null),function(e){return n[e]||(n[e]=r(e))})},62974:function(e,t){"use strict";function r(e){var t=Math.round(e).toString(16);return 1===t.length?"0"+t:t}Object.defineProperty(t,"__esModule",{value:!0}),t.arr2rgb=t.toHex=void 0,t.toHex=r,t.arr2rgb=function(e){return"#"+r(e[0])+r(e[1])+r(e[2])}},88179:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.gradient=void 0;var n=r(97549),o=r(62974),i=r(27915);function a(e,t,r,n){return e[n]+(t[n]-e[n])*r}t.gradient=function(e){var t=("string"==typeof e?e.split("-"):e).map(function(e){return(0,n.rgb2arr)(-1===e.indexOf("#")?(0,i.toRGB)(e):e)});return function(e){return function(e,t){var r=isNaN(Number(t))||t<0?0:t>1?1:Number(t),n=e.length-1,i=Math.floor(n*r),s=n*r-i,u=e[i],l=i===n?u:e[i+1];return(0,o.arr2rgb)([a(u,l,s,0),a(u,l,s,1),a(u,l,s,2)])}(t,e)}}},36045:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toCSSGradient=t.toRGB=t.gradient=t.rgb2arr=void 0;var n=r(97549);Object.defineProperty(t,"rgb2arr",{enumerable:!0,get:function(){return n.rgb2arr}});var o=r(88179);Object.defineProperty(t,"gradient",{enumerable:!0,get:function(){return o.gradient}});var i=r(27915);Object.defineProperty(t,"toRGB",{enumerable:!0,get:function(){return i.toRGB}});var a=r(63398);Object.defineProperty(t,"toCSSGradient",{enumerable:!0,get:function(){return a.toCSSGradient}})},97549:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.rgb2arr=void 0,t.rgb2arr=function(e){return[parseInt(e.substr(1,2),16),parseInt(e.substr(3,2),16),parseInt(e.substr(5,2),16)]}},63398:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toCSSGradient=void 0;var r=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,n=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,o=/[\d.]+:(#[^\s]+|[^)]+\))/gi;t.toCSSGradient=function(e){if(/^[r,R,L,l]{1}[\s]*\(/.test(e)){var t,i=void 0;if("l"===e[0]){var a=+(s=r.exec(e))[1]+90;i=s[2],t="linear-gradient("+a+"deg, "}else if("r"===e[0]){var s;t="radial-gradient(",i=(s=n.exec(e))[4]}var u=i.match(o);return u.forEach(function(e,r){var n=e.split(":");t+=n[1]+" "+100*Number(n[0])+"%",r!==u.length-1&&(t+=", ")}),t+=")"}return e}},27915:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toRGB=void 0;var n,o=r(62974),i=/rgba?\(([\s.,0-9]+)\)/;t.toRGB=function(e){if("#"===e[0]&&7===e.length)return e;var t;n||((t=document.createElement("i")).title="Web Colour Picker",t.style.display="none",document.body.appendChild(t),n=t),n.style.color=e;var r=document.defaultView.getComputedStyle(n,"").getPropertyValue("color"),a=i.exec(r)[1].split(/\s*,\s*/).map(function(e){return Number(e)});return r=(0,o.arr2rgb)(a)}},24258:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(97582);(0,n.__exportStar)(r(36045),t),(0,n.__exportStar)(r(25494),t),(0,n.__exportStar)(r(28775),t),(0,n.__exportStar)(r(92446),t),(0,n.__exportStar)(r(17600),t)},97217:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(97582),o=(0,n.__importDefault)(r(57022)),i=(0,n.__importDefault)(r(94827));t.default=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var r=e[0],n=1;n<e.length;n++){var a=e[n];(0,i.default)(a)&&(a=a.prototype),(0,o.default)(r.prototype,a)}}},29180:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){this.map={}}return e.prototype.has=function(e){return void 0!==this.map[e]},e.prototype.get=function(e,t){var r=this.map[e];return void 0===r?t:r},e.prototype.set=function(e,t){this.map[e]=t},e.prototype.clear=function(){this.map={}},e.prototype.delete=function(e){delete this.map[e]},e.prototype.size=function(){return Object.keys(this.map).length},e}();t.default=r},69186:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e,t,r){return e<t?t:e>r?r:e}},88017:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout)(e)}},61669:function(e,t,r){"use strict";function n(e){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0});var o=(0,r(97582).__importDefault)(r(42970));t.default=function e(t){if("object"!==n(t)||null===t)return t;var r;if((0,o.default)(t)){r=[];for(var i=0,a=t.length;i<a;i++)"object"===n(t[i])&&null!=t[i]?r[i]=e(t[i]):r[i]=t[i]}else for(var s in r={},t)"object"===n(t[s])&&null!=t[s]?r[s]=e(t[s]):r[s]=t[s];return r}},78018:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(0,r(97582).__importDefault)(r(347));t.default=function(e,t){return!!(0,n.default)(e)&&e.indexOf(t)>-1}},26939:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r){var n;return function(){var o=this,i=arguments,a=r&&!n;clearTimeout(n),n=setTimeout(function(){n=null,r||e.apply(o,i)},t),a&&e.apply(o,i)}}},56403:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(97582),o=(0,n.__importDefault)(r(42970)),i=(0,n.__importDefault)(r(33104)),a=5;function s(e,t){if(Object.hasOwn)return Object.hasOwn(e,t);if(null==e)throw new TypeError("Cannot convert undefined or null to object");return Object.prototype.hasOwnProperty.call(Object(e),t)}function u(e,t,r,n){for(var l in r=r||0,n=n||a,t)if(s(t,l)){var c=t[l];null!==c&&(0,i.default)(c)?((0,i.default)(e[l])||(e[l]={}),r<n?u(e[l],c,r+1,n):e[l]=t[l]):(0,o.default)(c)?(e[l]=[],e[l]=e[l].concat(c)):void 0!==c&&(e[l]=c)}}t.default=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];for(var n=0;n<t.length;n+=1)u(e,t[n]);return e}},76705:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(97582),o=(0,n.__importDefault)(r(18227)),i=(0,n.__importDefault)(r(78018));t.default=function(e,t){return void 0===t&&(t=[]),(0,o.default)(e,function(e){return!(0,i.default)(t,e)})}},74748:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(97582),o=(0,n.__importDefault)(r(42970)),i=(0,n.__importDefault)(r(6422));t.default=function(e,t){if(e)if((0,o.default)(e))for(var r=0,n=e.length;r<n&&!1!==t(e[r],r);r++);else if((0,i.default)(e))for(var a in e)if(e.hasOwnProperty(a)&&!1===t(e[a],a))break}},76033:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(97582),o=(0,n.__importDefault)(r(42970)),i=(0,n.__importDefault)(r(69565));t.default=function(e,t){return!(!(0,o.default)(e)&&!(0,i.default)(e))&&e[e.length-1]===t}},28390:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e,t){for(var r=0;r<e.length;r++)if(!t(e[r],r))return!1;return!0}},45:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(97582),o=(0,n.__importDefault)(r(57022)),i=(0,n.__importDefault)(r(94827));t.default=function(e,t,r,n){(0,i.default)(t)||(r=t,t=e,e=function(){});var a=Object.create?function(e,t){return Object.create(e,{constructor:{value:t}})}:function(e,t){function r(){}r.prototype=e;var n=new r;return n.constructor=t,n},s=a(t.prototype,e);return e.prototype=(0,o.default)(s,e.prototype),e.superclass=a(t.prototype,t),(0,o.default)(s,r),(0,o.default)(e,n),e}},18227:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(0,r(97582).__importDefault)(r(347));t.default=function(e,t){if(!(0,n.default)(e))return e;for(var r=[],o=0;o<e.length;o++){var i=e[o];t(i,o)&&r.push(i)}return r}},62483:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r){void 0===r&&(r=0);for(var n=r;n<e.length;n++)if(t(e[n],n))return n;return-1}},47540:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(97582),o=(0,n.__importDefault)(r(94827)),i=(0,n.__importDefault)(r(22225)),a=(0,n.__importDefault)(r(42970)),s=(0,n.__importDefault)(r(33104));t.default=function(e,t){if(!(0,a.default)(e))return null;var r;if((0,o.default)(t)&&(r=t),(0,s.default)(t)&&(r=function(e){return(0,i.default)(e,t)}),r)for(var n=0;n<e.length;n+=1)if(r(e[n]))return e[n];return null}},96106:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(97582),o=(0,n.__importDefault)(r(81937)),i=(0,n.__importDefault)(r(42970));t.default=function(e,t){for(var r=null,n=0;n<e.length;n++){var a=e[n][t];if(!(0,o.default)(a)){r=(0,i.default)(a)?a[0]:a;break}}return r}},93348:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e,t){var r=t.toString(),n=r.indexOf(".");if(-1===n)return Math.round(e);var o=r.substr(n+1).length;return o>20&&(o=20),parseFloat(e.toFixed(o))}},92559:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(0,r(97582).__importDefault)(r(42970));t.default=function e(t,r){if(void 0===r&&(r=[]),(0,n.default)(t))for(var o=0;o<t.length;o+=1)e(t[o],r);else r.push(t);return r}},61037:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(0,r(97582).__importDefault)(r(42970));t.default=function(e){if(!(0,n.default)(e))return[];for(var t=[],r=0;r<e.length;r++)t=t.concat(e[r]);return t}},88177:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(0,r(97582).__importDefault)(r(74748));t.default=n.default},26533:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(97582),o=(0,n.__importDefault)(r(42970)),i=(0,n.__importDefault)(r(15409)),a=(0,n.__importDefault)(r(48291));t.default=function(e){var t=e.filter(function(e){return!isNaN(e)});if(!t.length)return{min:0,max:0};if((0,o.default)(e[0])){for(var r=[],n=0;n<e.length;n++)r=r.concat(e[n]);t=r}var s=(0,i.default)(t);return{min:(0,a.default)(t),max:s}}},35025:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={}.toString;t.default=function(e){return r.call(e).replace(/^\[object /,"").replace(/]$/,"")}},71931:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return e["_wrap_"+t]}},47324:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(0,r(97582).__importDefault)(r(69565));t.default=function(e,t,r){for(var o=0,i=(0,n.default)(t)?t.split("."):t;e&&o<i.length;)e=e[i[o++]];return void 0===e||o<i.length?r:e}},25979:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(97582),o=(0,n.__importDefault)(r(42970)),i=(0,n.__importDefault)(r(94827)),a=Object.prototype.hasOwnProperty;t.default=function(e,t){if(!t||!(0,o.default)(e))return{};for(var r,n={},s=(0,i.default)(t)?t:function(e){return e[t]},u=0;u<e.length;u++){var l=e[u];r=s(l),a.call(n,r)?n[r].push(l):n[r]=[l]}return n}},69004:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(97582),o=(0,n.__importDefault)(r(42970)),i=(0,n.__importDefault)(r(94827)),a=(0,n.__importDefault)(r(25979));t.default=function(e,t){if(!t)return{0:e};if(!(0,i.default)(t)){var r=(0,o.default)(t)?t:t.replace(/\s+/g,"").split("*");t=function(e){for(var t="_",n=0,o=r.length;n<o;n++)t+=e[r[n]]&&e[r[n]].toString();return t}}return(0,a.default)(e,t)}},20138:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(0,r(97582).__importDefault)(r(69004));t.default=function(e,t){if(!t)return[e];var r=(0,n.default)(e,t),o=[];for(var i in r)o.push(r[i]);return o}},73759:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(0,r(97582).__importDefault)(r(48554));t.default=n.default},13982:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(97582),o=(0,n.__importDefault)(r(78018)),i=(0,n.__importDefault)(r(6357));t.default=function(e,t){return(0,o.default)((0,i.default)(e),t)}},48554:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return e.hasOwnProperty(t)}},60349:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(0,r(97582).__importDefault)(r(347));t.default=function(e){if((0,n.default)(e))return e[0]}},76888:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e}},55487:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(0,r(97582).__importDefault)(r(347));t.default=function(e,t){if(!(0,n.default)(e))return-1;var r=Array.prototype.indexOf;if(r)return r.call(e,t);for(var o=-1,i=0;i<e.length;i++)if(e[i]===t){o=i;break}return o}},92446:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.has=t.forIn=t.toRadian=t.toInteger=t.toDegree=t.mod=t.minBy=t.min=t.maxBy=t.max=t.isPositive=t.isOdd=t.isNumberEqual=t.isNegative=t.isInteger=t.isEven=t.isDecimal=t.fixedBase=t.clamp=t.parseRadius=t.number2color=t.wrapBehavior=t.getWrapBehavior=t.groupToMap=t.groupBy=t.group=t.some=t.every=t.filter=t.endsWith=t.startsWith=t.last=t.head=t.valuesOfKey=t.uniq=t.union=t.sortBy=t.remove=t.reduce=t.pullAt=t.pull=t.getRange=t.flattenDeep=t.flatten=t.firstValue=t.findIndex=t.find=t.difference=t.includes=t.contains=void 0,t.set=t.get=t.assign=t.mix=t.mapValues=t.map=t.isEqualWith=t.isEqual=t.isEmpty=t.indexOf=t.extend=t.each=t.deepMix=t.memoize=t.debounce=t.clone=t.augment=t.clearAnimationFrame=t.requestAnimationFrame=t.isElement=t.isUndefined=t.isType=t.isString=t.isRegExp=t.isPrototype=t.isPlainObject=t.isObjectLike=t.isObject=t.isNumber=t.isNull=t.isNil=t.isFinite=t.isFunction=t.isError=t.isDate=t.isBoolean=t.isArrayLike=t.isArray=t.isArguments=t.getType=t.upperFirst=t.upperCase=t.substitute=t.lowerFirst=t.lowerCase=t.values=t.isMatch=t.keys=t.hasValue=t.hasKey=void 0,t.Cache=t.size=t.identity=t.noop=t.uniqueId=t.toString=t.toArray=t.throttle=t.omit=t.pick=void 0;var o=r(78018);Object.defineProperty(t,"contains",{enumerable:!0,get:function(){return n(o).default}}),Object.defineProperty(t,"includes",{enumerable:!0,get:function(){return n(o).default}});var i=r(76705);Object.defineProperty(t,"difference",{enumerable:!0,get:function(){return n(i).default}});var a=r(47540);Object.defineProperty(t,"find",{enumerable:!0,get:function(){return n(a).default}});var s=r(62483);Object.defineProperty(t,"findIndex",{enumerable:!0,get:function(){return n(s).default}});var u=r(96106);Object.defineProperty(t,"firstValue",{enumerable:!0,get:function(){return n(u).default}});var l=r(61037);Object.defineProperty(t,"flatten",{enumerable:!0,get:function(){return n(l).default}});var c=r(92559);Object.defineProperty(t,"flattenDeep",{enumerable:!0,get:function(){return n(c).default}});var f=r(26533);Object.defineProperty(t,"getRange",{enumerable:!0,get:function(){return n(f).default}});var h=r(35277);Object.defineProperty(t,"pull",{enumerable:!0,get:function(){return n(h).default}});var p=r(69226);Object.defineProperty(t,"pullAt",{enumerable:!0,get:function(){return n(p).default}});var d=r(98833);Object.defineProperty(t,"reduce",{enumerable:!0,get:function(){return n(d).default}});var y=r(64111);Object.defineProperty(t,"remove",{enumerable:!0,get:function(){return n(y).default}});var v=r(10528);Object.defineProperty(t,"sortBy",{enumerable:!0,get:function(){return n(v).default}});var g=r(84306);Object.defineProperty(t,"union",{enumerable:!0,get:function(){return n(g).default}});var m=r(55103);Object.defineProperty(t,"uniq",{enumerable:!0,get:function(){return n(m).default}});var b=r(84455);Object.defineProperty(t,"valuesOfKey",{enumerable:!0,get:function(){return n(b).default}});var w=r(60349);Object.defineProperty(t,"head",{enumerable:!0,get:function(){return n(w).default}});var _=r(44553);Object.defineProperty(t,"last",{enumerable:!0,get:function(){return n(_).default}});var x=r(58336);Object.defineProperty(t,"startsWith",{enumerable:!0,get:function(){return n(x).default}});var S=r(76033);Object.defineProperty(t,"endsWith",{enumerable:!0,get:function(){return n(S).default}});var O=r(18227);Object.defineProperty(t,"filter",{enumerable:!0,get:function(){return n(O).default}});var P=r(28390);Object.defineProperty(t,"every",{enumerable:!0,get:function(){return n(P).default}});var E=r(50657);Object.defineProperty(t,"some",{enumerable:!0,get:function(){return n(E).default}});var k=r(20138);Object.defineProperty(t,"group",{enumerable:!0,get:function(){return n(k).default}});var M=r(25979);Object.defineProperty(t,"groupBy",{enumerable:!0,get:function(){return n(M).default}});var C=r(69004);Object.defineProperty(t,"groupToMap",{enumerable:!0,get:function(){return n(C).default}});var j=r(71931);Object.defineProperty(t,"getWrapBehavior",{enumerable:!0,get:function(){return n(j).default}});var T=r(76532);Object.defineProperty(t,"wrapBehavior",{enumerable:!0,get:function(){return n(T).default}});var A=r(63389);Object.defineProperty(t,"number2color",{enumerable:!0,get:function(){return n(A).default}});var I=r(88397);Object.defineProperty(t,"parseRadius",{enumerable:!0,get:function(){return n(I).default}});var R=r(69186);Object.defineProperty(t,"clamp",{enumerable:!0,get:function(){return n(R).default}});var L=r(93348);Object.defineProperty(t,"fixedBase",{enumerable:!0,get:function(){return n(L).default}});var N=r(32325);Object.defineProperty(t,"isDecimal",{enumerable:!0,get:function(){return n(N).default}});var D=r(6289);Object.defineProperty(t,"isEven",{enumerable:!0,get:function(){return n(D).default}});var B=r(56671);Object.defineProperty(t,"isInteger",{enumerable:!0,get:function(){return n(B).default}});var F=r(5377);Object.defineProperty(t,"isNegative",{enumerable:!0,get:function(){return n(F).default}});var G=r(34426);Object.defineProperty(t,"isNumberEqual",{enumerable:!0,get:function(){return n(G).default}});var z=r(16941);Object.defineProperty(t,"isOdd",{enumerable:!0,get:function(){return n(z).default}});var U=r(37192);Object.defineProperty(t,"isPositive",{enumerable:!0,get:function(){return n(U).default}});var V=r(15409);Object.defineProperty(t,"max",{enumerable:!0,get:function(){return n(V).default}});var W=r(85118);Object.defineProperty(t,"maxBy",{enumerable:!0,get:function(){return n(W).default}});var Y=r(48291);Object.defineProperty(t,"min",{enumerable:!0,get:function(){return n(Y).default}});var H=r(68187);Object.defineProperty(t,"minBy",{enumerable:!0,get:function(){return n(H).default}});var X=r(38841);Object.defineProperty(t,"mod",{enumerable:!0,get:function(){return n(X).default}});var q=r(41092);Object.defineProperty(t,"toDegree",{enumerable:!0,get:function(){return n(q).default}});var J=r(61988);Object.defineProperty(t,"toInteger",{enumerable:!0,get:function(){return n(J).default}});var Z=r(63645);Object.defineProperty(t,"toRadian",{enumerable:!0,get:function(){return n(Z).default}});var K=r(88177);Object.defineProperty(t,"forIn",{enumerable:!0,get:function(){return n(K).default}});var Q=r(48554);Object.defineProperty(t,"has",{enumerable:!0,get:function(){return n(Q).default}});var $=r(73759);Object.defineProperty(t,"hasKey",{enumerable:!0,get:function(){return n($).default}});var ee=r(13982);Object.defineProperty(t,"hasValue",{enumerable:!0,get:function(){return n(ee).default}});var te=r(31421);Object.defineProperty(t,"keys",{enumerable:!0,get:function(){return n(te).default}});var re=r(22225);Object.defineProperty(t,"isMatch",{enumerable:!0,get:function(){return n(re).default}});var ne=r(6357);Object.defineProperty(t,"values",{enumerable:!0,get:function(){return n(ne).default}});var oe=r(36579);Object.defineProperty(t,"lowerCase",{enumerable:!0,get:function(){return n(oe).default}});var ie=r(27030);Object.defineProperty(t,"lowerFirst",{enumerable:!0,get:function(){return n(ie).default}});var ae=r(71633);Object.defineProperty(t,"substitute",{enumerable:!0,get:function(){return n(ae).default}});var se=r(16707);Object.defineProperty(t,"upperCase",{enumerable:!0,get:function(){return n(se).default}});var ue=r(82479);Object.defineProperty(t,"upperFirst",{enumerable:!0,get:function(){return n(ue).default}});var le=r(35025);Object.defineProperty(t,"getType",{enumerable:!0,get:function(){return n(le).default}});var ce=r(77636);Object.defineProperty(t,"isArguments",{enumerable:!0,get:function(){return n(ce).default}});var fe=r(42970);Object.defineProperty(t,"isArray",{enumerable:!0,get:function(){return n(fe).default}});var he=r(347);Object.defineProperty(t,"isArrayLike",{enumerable:!0,get:function(){return n(he).default}});var pe=r(26302);Object.defineProperty(t,"isBoolean",{enumerable:!0,get:function(){return n(pe).default}});var de=r(90718);Object.defineProperty(t,"isDate",{enumerable:!0,get:function(){return n(de).default}});var ye=r(9619);Object.defineProperty(t,"isError",{enumerable:!0,get:function(){return n(ye).default}});var ve=r(94827);Object.defineProperty(t,"isFunction",{enumerable:!0,get:function(){return n(ve).default}});var ge=r(778);Object.defineProperty(t,"isFinite",{enumerable:!0,get:function(){return n(ge).default}});var me=r(81937);Object.defineProperty(t,"isNil",{enumerable:!0,get:function(){return n(me).default}});var be=r(17129);Object.defineProperty(t,"isNull",{enumerable:!0,get:function(){return n(be).default}});var we=r(76985);Object.defineProperty(t,"isNumber",{enumerable:!0,get:function(){return n(we).default}});var _e=r(6422);Object.defineProperty(t,"isObject",{enumerable:!0,get:function(){return n(_e).default}});var xe=r(50190);Object.defineProperty(t,"isObjectLike",{enumerable:!0,get:function(){return n(xe).default}});var Se=r(33104);Object.defineProperty(t,"isPlainObject",{enumerable:!0,get:function(){return n(Se).default}});var Oe=r(51451);Object.defineProperty(t,"isPrototype",{enumerable:!0,get:function(){return n(Oe).default}});var Pe=r(64977);Object.defineProperty(t,"isRegExp",{enumerable:!0,get:function(){return n(Pe).default}});var Ee=r(69565);Object.defineProperty(t,"isString",{enumerable:!0,get:function(){return n(Ee).default}});var ke=r(79201);Object.defineProperty(t,"isType",{enumerable:!0,get:function(){return n(ke).default}});var Me=r(64987);Object.defineProperty(t,"isUndefined",{enumerable:!0,get:function(){return n(Me).default}});var Ce=r(51184);Object.defineProperty(t,"isElement",{enumerable:!0,get:function(){return n(Ce).default}});var je=r(68015);Object.defineProperty(t,"requestAnimationFrame",{enumerable:!0,get:function(){return n(je).default}});var Te=r(88017);Object.defineProperty(t,"clearAnimationFrame",{enumerable:!0,get:function(){return n(Te).default}});var Ae=r(97217);Object.defineProperty(t,"augment",{enumerable:!0,get:function(){return n(Ae).default}});var Ie=r(61669);Object.defineProperty(t,"clone",{enumerable:!0,get:function(){return n(Ie).default}});var Re=r(26939);Object.defineProperty(t,"debounce",{enumerable:!0,get:function(){return n(Re).default}});var Le=r(91569);Object.defineProperty(t,"memoize",{enumerable:!0,get:function(){return n(Le).default}});var Ne=r(56403);Object.defineProperty(t,"deepMix",{enumerable:!0,get:function(){return n(Ne).default}});var De=r(74748);Object.defineProperty(t,"each",{enumerable:!0,get:function(){return n(De).default}});var Be=r(45);Object.defineProperty(t,"extend",{enumerable:!0,get:function(){return n(Be).default}});var Fe=r(55487);Object.defineProperty(t,"indexOf",{enumerable:!0,get:function(){return n(Fe).default}});var Ge=r(46573);Object.defineProperty(t,"isEmpty",{enumerable:!0,get:function(){return n(Ge).default}});var ze=r(37987);Object.defineProperty(t,"isEqual",{enumerable:!0,get:function(){return n(ze).default}});var Ue=r(93299);Object.defineProperty(t,"isEqualWith",{enumerable:!0,get:function(){return n(Ue).default}});var Ve=r(12030);Object.defineProperty(t,"map",{enumerable:!0,get:function(){return n(Ve).default}});var We=r(40169);Object.defineProperty(t,"mapValues",{enumerable:!0,get:function(){return n(We).default}});var Ye=r(57022);Object.defineProperty(t,"mix",{enumerable:!0,get:function(){return n(Ye).default}}),Object.defineProperty(t,"assign",{enumerable:!0,get:function(){return n(Ye).default}});var He=r(47324);Object.defineProperty(t,"get",{enumerable:!0,get:function(){return n(He).default}});var Xe=r(20897);Object.defineProperty(t,"set",{enumerable:!0,get:function(){return n(Xe).default}});var qe=r(59730);Object.defineProperty(t,"pick",{enumerable:!0,get:function(){return n(qe).default}});var Je=r(82945);Object.defineProperty(t,"omit",{enumerable:!0,get:function(){return n(Je).default}});var Ze=r(29637);Object.defineProperty(t,"throttle",{enumerable:!0,get:function(){return n(Ze).default}});var Ke=r(46780);Object.defineProperty(t,"toArray",{enumerable:!0,get:function(){return n(Ke).default}});var Qe=r(57230);Object.defineProperty(t,"toString",{enumerable:!0,get:function(){return n(Qe).default}});var $e=r(34128);Object.defineProperty(t,"uniqueId",{enumerable:!0,get:function(){return n($e).default}});var et=r(64802);Object.defineProperty(t,"noop",{enumerable:!0,get:function(){return n(et).default}});var tt=r(76888);Object.defineProperty(t,"identity",{enumerable:!0,get:function(){return n(tt).default}});var rt=r(93580);Object.defineProperty(t,"size",{enumerable:!0,get:function(){return n(rt).default}});var nt=r(29180);Object.defineProperty(t,"Cache",{enumerable:!0,get:function(){return n(nt).default}})},77636:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(0,r(97582).__importDefault)(r(79201));t.default=function(e){return(0,n.default)(e,"Arguments")}},347:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e){return null!==e&&"function"!=typeof e&&isFinite(e.length)}},42970:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(0,r(97582).__importDefault)(r(79201));t.default=function(e){return Array.isArray?Array.isArray(e):(0,n.default)(e,"Array")}},26302:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(0,r(97582).__importDefault)(r(79201));t.default=function(e){return(0,n.default)(e,"Boolean")}},90718:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(0,r(97582).__importDefault)(r(79201));t.default=function(e){return(0,n.default)(e,"Date")}},32325:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(0,r(97582).__importDefault)(r(76985));t.default=function(e){return(0,n.default)(e)&&e%1!=0}},51184:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e){return e instanceof Element||e instanceof Document}},46573:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(97582),o=(0,n.__importDefault)(r(81937)),i=(0,n.__importDefault)(r(347)),a=(0,n.__importDefault)(r(35025)),s=(0,n.__importDefault)(r(51451)),u=Object.prototype.hasOwnProperty;t.default=function(e){if((0,o.default)(e))return!0;if((0,i.default)(e))return!e.length;var t=(0,a.default)(e);if("Map"===t||"Set"===t)return!e.size;if((0,s.default)(e))return!Object.keys(e).length;for(var r in e)if(u.call(e,r))return!1;return!0}},93299:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(97582),o=(0,n.__importDefault)(r(94827)),i=(0,n.__importDefault)(r(37987));t.default=function(e,t,r){return(0,o.default)(r)?!!r(e,t):(0,i.default)(e,t)}},37987:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(97582),o=(0,n.__importDefault)(r(50190)),i=(0,n.__importDefault)(r(347)),a=(0,n.__importDefault)(r(69565));t.default=function e(t,r){if(t===r)return!0;if(!t||!r)return!1;if((0,a.default)(t)||(0,a.default)(r))return!1;if((0,i.default)(t)||(0,i.default)(r)){if(t.length!==r.length)return!1;for(var n=!0,s=0;s<t.length&&(n=e(t[s],r[s]));s++);return n}if((0,o.default)(t)||(0,o.default)(r)){var u=Object.keys(t),l=Object.keys(r);if(u.length!==l.length)return!1;for(n=!0,s=0;s<u.length&&(n=e(t[u[s]],r[u[s]]));s++);return n}return!1}},9619:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(0,r(97582).__importDefault)(r(79201));t.default=function(e){return(0,n.default)(e,"Error")}},6289:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(0,r(97582).__importDefault)(r(76985));t.default=function(e){return(0,n.default)(e)&&e%2==0}},778:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(0,r(97582).__importDefault)(r(76985));t.default=function(e){return(0,n.default)(e)&&isFinite(e)}},94827:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return"function"==typeof e}},56671:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(0,r(97582).__importDefault)(r(76985)),o=Number.isInteger?Number.isInteger:function(e){return(0,n.default)(e)&&e%1==0};t.default=o},22225:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(97582),o=(0,n.__importDefault)(r(81937)),i=(0,n.__importDefault)(r(31421));t.default=function(e,t){var r=(0,i.default)(t),n=r.length;if((0,o.default)(e))return!n;for(var a=0;a<n;a+=1){var s=r[a];if(t[s]!==e[s]||!(s in e))return!1}return!0}},5377:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(0,r(97582).__importDefault)(r(76985));t.default=function(e){return(0,n.default)(e)&&e<0}},81937:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e){return null===e||void 0===e}},17129:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e){return null===e}},34426:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=1e-5;t.default=function(e,t,n){return void 0===n&&(n=r),Math.abs(e-t)<n}},76985:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(0,r(97582).__importDefault)(r(79201));t.default=function(e){return(0,n.default)(e,"Number")}},50190:function(e,t){"use strict";function r(e){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e){return"object"===r(e)&&null!==e}},6422:function(e,t){"use strict";function r(e){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=r(e);return null!==e&&"object"===t||"function"===t}},16941:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(0,r(97582).__importDefault)(r(76985));t.default=function(e){return(0,n.default)(e)&&e%2!=0}},33104:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(97582),o=(0,n.__importDefault)(r(50190)),i=(0,n.__importDefault)(r(79201));t.default=function(e){if(!(0,o.default)(e)||!(0,i.default)(e,"Object"))return!1;if(null===Object.getPrototypeOf(e))return!0;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}},37192:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(0,r(97582).__importDefault)(r(76985));t.default=function(e){return(0,n.default)(e)&&e>0}},51451:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.prototype;t.default=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||r)}},64977:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(0,r(97582).__importDefault)(r(79201));t.default=function(e){return(0,n.default)(e,"RegExp")}},69565:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(0,r(97582).__importDefault)(r(79201));t.default=function(e){return(0,n.default)(e,"String")}},79201:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={}.toString;t.default=function(e,t){return r.call(e)==="[object "+t+"]"}},64987:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e){return void 0===e}},31421:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(97582),o=(0,n.__importDefault)(r(74748)),i=(0,n.__importDefault)(r(94827)),a=Object.keys?function(e){return Object.keys(e)}:function(e){var t=[];return(0,o.default)(e,function(r,n){(0,i.default)(e)&&"prototype"===n||t.push(n)}),t};t.default=a},44553:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(0,r(97582).__importDefault)(r(347));t.default=function(e){if((0,n.default)(e))return e[e.length-1]}},36579:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(0,r(97582).__importDefault)(r(57230));t.default=function(e){return(0,n.default)(e).toLowerCase()}},27030:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(0,r(97582).__importDefault)(r(57230));t.default=function(e){var t=(0,n.default)(e);return t.charAt(0).toLowerCase()+t.substring(1)}},40169:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(97582),o=(0,n.__importDefault)(r(81937)),i=(0,n.__importDefault)(r(6422)),a=function(e){return e};t.default=function(e,t){void 0===t&&(t=a);var r={};return(0,i.default)(e)&&!(0,o.default)(e)&&Object.keys(e).forEach(function(n){r[n]=t(e[n],n)}),r}},12030:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(0,r(97582).__importDefault)(r(347));t.default=function(e,t){if(!(0,n.default)(e))return e;for(var r=[],o=0;o<e.length;o++){var i=e[o];r.push(t(i,o))}return r}},85118:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(97582),o=(0,n.__importDefault)(r(42970)),i=(0,n.__importDefault)(r(94827));t.default=function(e,t){if((0,o.default)(e)){for(var r,n=-1/0,a=0;a<e.length;a++){var s=e[a],u=(0,i.default)(t)?t(s):s[t];u>n&&(r=s,n=u)}return r}}},15409:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(0,r(97582).__importDefault)(r(42970));t.default=function(e){if((0,n.default)(e))return e.reduce(function(e,t){return Math.max(e,t)},e[0])}},91569:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(0,r(97582).__importDefault)(r(94827));t.default=function(e,t){if(!(0,n.default)(e))throw new TypeError("Expected a function");var r=function r(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];var i=t?t.apply(this,n):n[0],a=r.cache;if(a.has(i))return a.get(i);var s=e.apply(this,n);return a.set(i,s),s};return r.cache=new Map,r}},68187:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(97582),o=(0,n.__importDefault)(r(42970)),i=(0,n.__importDefault)(r(94827));t.default=function(e,t){if((0,o.default)(e)){for(var r,n=1/0,a=0;a<e.length;a++){var s=e[a],u=(0,i.default)(t)?t(s):s[t];u<n&&(r=s,n=u)}return r}}},48291:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(0,r(97582).__importDefault)(r(42970));t.default=function(e){if((0,n.default)(e))return e.reduce(function(e,t){return Math.min(e,t)},e[0])}},57022:function(e,t){"use strict";function r(e,t){for(var r in t)t.hasOwnProperty(r)&&"constructor"!==r&&void 0!==t[r]&&(e[r]=t[r])}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,o){return t&&r(e,t),n&&r(e,n),o&&r(e,o),e}},38841:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e,t){return(e%t+t)%t}},64802:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){}},63389:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={};t.default=function(e){var t=r[e];if(!t){for(var n=e.toString(16),o=n.length;o<6;o++)n="0"+n;t="#"+n,r[e]=t}return t}},82945:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(0,r(97582).__importDefault)(r(98833));t.default=function(e,t){return(0,n.default)(e,function(e,r,n){return t.includes(n)||(e[n]=r),e},{})}},88397:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(0,r(97582).__importDefault)(r(42970));t.default=function(e){var t=0,r=0,o=0,i=0;return(0,n.default)(e)?1===e.length?t=r=o=i=e[0]:2===e.length?(t=o=e[0],r=i=e[1]):3===e.length?(t=e[0],r=i=e[1],o=e[2]):(t=e[0],r=e[1],o=e[2],i=e[3]):t=r=o=i=e,{r1:t,r2:r,r3:o,r4:i}}},59730:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(97582),o=(0,n.__importDefault)(r(74748)),i=(0,n.__importDefault)(r(33104)),a=Object.prototype.hasOwnProperty;t.default=function(e,t){if(null===e||!(0,i.default)(e))return{};var r={};return(0,o.default)(t,function(t){a.call(e,t)&&(r[t]=e[t])}),r}},69226:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(0,r(97582).__importDefault)(r(347)),o=Array.prototype.splice;t.default=function(e,t){if(!(0,n.default)(e))return[];for(var r=e?t.length:0,i=r-1;r--;){var a=void 0,s=t[r];r!==i&&s===a||(a=s,o.call(e,s,1))}return e}},35277:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Array.prototype,n=r.splice,o=r.indexOf;t.default=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];for(var i=0;i<t.length;i++)for(var a=t[i],s=-1;(s=o.call(e,a))>-1;)n.call(e,s,1);return e}},98833:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(97582),o=(0,n.__importDefault)(r(74748)),i=(0,n.__importDefault)(r(42970)),a=(0,n.__importDefault)(r(33104));t.default=function(e,t,r){if(!(0,i.default)(e)&&!(0,a.default)(e))return e;var n=r;return(0,o.default)(e,function(e,r){n=t(n,e,r)}),n}},64111:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(97582),o=(0,n.__importDefault)(r(347)),i=(0,n.__importDefault)(r(69226));t.default=function(e,t){var r=[];if(!(0,o.default)(e))return r;for(var n=-1,a=[],s=e.length;++n<s;){var u=e[n];t(u,n,e)&&(r.push(u),a.push(n))}return(0,i.default)(e,a),r}},68015:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(e){return setTimeout(e,16)})(e)}},20897:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(97582),o=(0,n.__importDefault)(r(6422)),i=(0,n.__importDefault)(r(69565)),a=(0,n.__importDefault)(r(76985));t.default=function(e,t,r){var n=e,s=(0,i.default)(t)?t.split("."):t;return s.forEach(function(e,t){t<s.length-1?((0,o.default)(n[e])||(n[e]=(0,a.default)(s[t+1])?[]:{}),n=n[e]):n[e]=r}),e}},93580:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(97582),o=(0,n.__importDefault)(r(81937)),i=(0,n.__importDefault)(r(347));t.default=function(e){return(0,o.default)(e)?0:(0,i.default)(e)?e.length:Object.keys(e).length}},50657:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e,t){for(var r=0;r<e.length;r++)if(t(e[r],r))return!0;return!1}},10528:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(97582),o=(0,n.__importDefault)(r(42970)),i=(0,n.__importDefault)(r(69565)),a=(0,n.__importDefault)(r(94827));t.default=function(e,t){var r;if((0,a.default)(t))r=function(e,r){return t(e)-t(r)};else{var n=[];(0,i.default)(t)?n.push(t):(0,o.default)(t)&&(n=t),r=function(e,t){for(var r=0;r<n.length;r+=1){var o=n[r];if(e[o]>t[o])return 1;if(e[o]<t[o])return-1}return 0}}return e.sort(r),e}},58336:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(97582),o=(0,n.__importDefault)(r(42970)),i=(0,n.__importDefault)(r(69565));t.default=function(e,t){return!(!(0,o.default)(e)&&!(0,i.default)(e))&&e[0]===t}},71633:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return e&&t?e.replace(/\\?\{([^{}]+)\}/g,function(e,r){return"\\"===e.charAt(0)?e.slice(1):void 0===t[r]?"":t[r]}):e}},29637:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r){var n,o,i,a,s=0;r||(r={});var u=function(){s=!1===r.leading?0:Date.now(),n=null,a=e.apply(o,i),n||(o=i=null)},l=function(){var l=Date.now();s||!1!==r.leading||(s=l);var c=t-(l-s);return o=this,i=arguments,c<=0||c>t?(n&&(clearTimeout(n),n=null),s=l,a=e.apply(o,i),n||(o=i=null)):n||!1===r.trailing||(n=setTimeout(u,c)),a};return l.cancel=function(){clearTimeout(n),s=0,n=o=i=null},l}},46780:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(0,r(97582).__importDefault)(r(347));t.default=function(e){return(0,n.default)(e)?Array.prototype.slice.call(e):[]}},41092:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=180/Math.PI;t.default=function(e){return r*e}},61988:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=parseInt},63645:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Math.PI/180;t.default=function(e){return r*e}},57230:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(0,r(97582).__importDefault)(r(81937));t.default=function(e){return(0,n.default)(e)?"":e.toString()}},84306:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(0,r(97582).__importDefault)(r(55103));t.default=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return(0,n.default)([].concat.apply([],e))}},55103:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){void 0===t&&(t=new Map);var r=[];if(Array.isArray(e))for(var n=0,o=e.length;n<o;n++){var i=e[n];t.has(i)||(r.push(i),t.set(i,!0))}return r}},34128:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={};t.default=function(e){return r[e=e||"g"]?r[e]+=1:r[e]=1,e+r[e]}},16707:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(0,r(97582).__importDefault)(r(57230));t.default=function(e){return(0,n.default)(e).toUpperCase()}},82479:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(0,r(97582).__importDefault)(r(57230));t.default=function(e){var t=(0,n.default)(e);return t.charAt(0).toUpperCase()+t.substring(1)}},84455:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(97582),o=(0,n.__importDefault)(r(42970)),i=(0,n.__importDefault)(r(81937));t.default=function(e,t){for(var r=[],n={},a=0;a<e.length;a++){var s=e[a][t];if(!(0,i.default)(s)){(0,o.default)(s)||(s=[s]);for(var u=0;u<s.length;u++){var l=s[u];n[l]||(r.push(l),n[l]=!0)}}}return r}},6357:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(97582),o=(0,n.__importDefault)(r(74748)),i=(0,n.__importDefault)(r(94827)),a=Object.values?function(e){return Object.values(e)}:function(e){var t=[];return(0,o.default)(e,function(r,n){(0,i.default)(e)&&"prototype"===n||t.push(r)}),t};t.default=a},76532:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(e["_wrap_"+t])return e["_wrap_"+t];var r=function(r){e[t](r)};return e["_wrap_"+t]=r,r}},17600:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isPolygonsIntersect=t.isPointInPolygon=void 0;var n=r(49442);Object.defineProperty(t,"isPointInPolygon",{enumerable:!0,get:function(){return n.isPointInPolygon}});var o=r(55542);Object.defineProperty(t,"isPolygonsIntersect",{enumerable:!0,get:function(){return o.isPolygonsIntersect}})},49442:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isPointInPolygon=void 0;var r=1e-6;function n(e){return Math.abs(e)<r?0:e<0?-1:1}function o(e,t,r){return(r[0]-e[0])*(t[1]-e[1])==(t[0]-e[0])*(r[1]-e[1])&&Math.min(e[0],t[0])<=r[0]&&r[0]<=Math.max(e[0],t[0])&&Math.min(e[1],t[1])<=r[1]&&r[1]<=Math.max(e[1],t[1])}t.isPointInPolygon=function(e,t,r){var i=!1,a=e.length;if(a<=2)return!1;for(var s=0;s<a;s++){var u=e[s],l=e[(s+1)%a];if(o(u,l,[t,r]))return!0;n(u[1]-r)>0!=n(l[1]-r)>0&&n(t-(r-u[1])*(u[0]-l[0])/(u[1]-l[1])-u[0])<0&&(i=!i)}return i}},55542:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isPolygonsIntersect=void 0;var n=r(49442),o=function(e,t,r){return e>=t&&e<=r};function i(e){for(var t=[],r=e.length,n=0;n<r-1;n++){var o=e[n],i=e[n+1];t.push({from:{x:o[0],y:o[1]},to:{x:i[0],y:i[1]}})}if(t.length>1){var a=e[0],s=e[r-1];t.push({from:{x:s[0],y:s[1]},to:{x:a[0],y:a[1]}})}return t}function a(e,t){var r=!1;return e.forEach(function(e){if(function(e,t,r,n){var i=r.x-e.x,a=r.y-e.y,s=t.x-e.x,u=t.y-e.y,l=n.x-r.x,c=n.y-r.y,f=s*c-u*l,h=null;if(f*f>.001*(s*s+u*u)*(l*l+c*c)){var p=(i*c-a*l)/f,d=(i*u-a*s)/f;o(p,0,1)&&o(d,0,1)&&(h={x:e.x+p*s,y:e.y+p*u})}return h}(e.from,e.to,t.from,t.to))return r=!0,!1}),r}function s(e){var t=e.map(function(e){return e[0]}),r=e.map(function(e){return e[1]});return{minX:Math.min.apply(null,t),maxX:Math.max.apply(null,t),minY:Math.min.apply(null,r),maxY:Math.max.apply(null,r)}}t.isPolygonsIntersect=function(e,t){if(e.length<2||t.length<2)return!1;var r,o,u=s(e),l=s(t);if(r=u,(o=l).minX>r.maxX||o.maxX<r.minX||o.minY>r.maxY||o.maxY<r.minY)return!1;var c=!1;if(t.forEach(function(t){if((0,n.isPointInPolygon)(e,t[0],t[1]))return c=!0,!1}),c)return!0;if(e.forEach(function(e){if((0,n.isPointInPolygon)(t,e[0],e[1]))return c=!0,!1}),c)return!0;var f=i(e),h=!1;return i(t).forEach(function(e){if(a(f,e))return h=!0,!1}),h}},25494:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.vertical=t.angleTo=t.direction=t.transform=void 0;var n=r(27018);function o(e,t,r){var o=[0,0,0,0,0,0,0,0,0];return n.mat3.fromRotation(o,r),n.mat3.multiply(e,o,t)}function i(e,t,r){var o=[0,0,0,0,0,0,0,0,0];return n.mat3.fromScaling(o,r),n.mat3.multiply(e,o,t)}function a(e,t,r){return n.mat3.multiply(e,r,t)}function s(e,t){return e[0]*t[1]-t[0]*e[1]}t.transform=function(e,t){for(var r,s,u,l,c=e?[].concat(e):[1,0,0,0,1,0,0,0,1],f=0,h=t.length;f<h;f++){var p=t[f];switch(p[0]){case"t":r=c,s=c,u=[p[1],p[2]],l=[0,0,0,0,0,0,0,0,0],n.mat3.fromTranslation(l,u),n.mat3.multiply(r,l,s);break;case"s":i(c,c,[p[1],p[2]]);break;case"r":o(c,c,p[1]);break;case"m":a(c,c,p[1])}}return c},t.direction=s,t.angleTo=function(e,t,r){var o=n.vec2.angle(e,t),i=s(e,t)>=0;return r?i?2*Math.PI-o:o:i?o:2*Math.PI-o},t.vertical=function(e,t,r){return r?(e[0]=t[1],e[1]=-1*t[0]):(e[0]=-1*t[1],e[1]=t[0]),e}},67169:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.path2Absolute=void 0;var n=r(77507),o=r(15582);t.path2Absolute=function(e){if((0,n.isAbsoluteArray)(e))return[].concat(e);var t=0,r=0,i=0,a=0;return(0,o.parsePathString)(e).map(function(e){var n,o=e.slice(1).map(Number),s=e[0],u=s.toUpperCase();if("M"===s)return t=o[0],r=o[1],i=t,a=r,["M",t,r];if(s!==u)switch(u){case"A":n=[u,o[0],o[1],o[2],o[3],o[4],o[5]+t,o[6]+r];break;case"V":n=[u,o[0]+r];break;case"H":n=[u,o[0]+t];break;default:var l=o.map(function(e,n){return e+(n%2?r:t)});n=[u].concat(l)}else n=[u].concat(o);var c=n.length;switch(u){case"Z":t=i,r=a;break;case"H":t=n[1];break;case"V":r=n[1];break;default:t=n[c-2],r=n[c-1],"M"===u&&(i=t,a=r)}return n})}},45708:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.path2Curve=void 0;var n=r(97582),o=r(52338),i=r(37724),a=r(93249),s=r(25036),u=r(2407);t.path2Curve=function(e,t){if(void 0===t&&(t=!1),(0,s.isCurveArray)(e)){var r=[].concat(e);return t?[r,[]]:r}for(var l,c,f=(0,a.normalizePath)(e),h=(0,n.__assign)({},o.paramsParser),p=[],d="",y=f.length,v=[],g=0;g<y;g+=1){f[g]&&(d=f[g][0]),p[g]=d;var m=(0,u.segmentToCubic)(f[g],h);f[g]=m,(0,i.fixArc)(f,p,g),y=f.length,"Z"===d&&v.push(g),c=(l=f[g]).length,h.x1=+l[c-2],h.y1=+l[c-1],h.x2=+l[c-4]||h.x1,h.y2=+l[c-3]||h.y1}return t?[f,v]:f}},59138:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.path2String=void 0;var n=r(19492);t.path2String=function(e,t){return void 0===t&&(t="off"),(0,n.roundPath)(e,t).map(function(e){return e[0]+e.slice(1).join(" ")}).join("")}},28775:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.equalizeSegments=t.distanceSquareRoot=t.isPointInStroke=t.getPointAtLength=t.getDrawDirection=t.getPathArea=t.getRotatedCurve=t.getPathBBoxTotalLength=t.getTotalLength=t.getPathBBox=t.arcToCubic=t.reverseCurve=t.normalizePath=t.clonePath=t.path2Absolute=t.path2Curve=t.path2String=void 0;var n=r(97582),o=r(59138);Object.defineProperty(t,"path2String",{enumerable:!0,get:function(){return o.path2String}});var i=r(45708);Object.defineProperty(t,"path2Curve",{enumerable:!0,get:function(){return i.path2Curve}});var a=r(67169);Object.defineProperty(t,"path2Absolute",{enumerable:!0,get:function(){return a.path2Absolute}});var s=r(68248);Object.defineProperty(t,"clonePath",{enumerable:!0,get:function(){return s.clonePath}});var u=r(93249);Object.defineProperty(t,"normalizePath",{enumerable:!0,get:function(){return u.normalizePath}});var l=r(28453);Object.defineProperty(t,"reverseCurve",{enumerable:!0,get:function(){return l.reverseCurve}});var c=r(94122);Object.defineProperty(t,"arcToCubic",{enumerable:!0,get:function(){return c.arcToCubic}});var f=r(28447);Object.defineProperty(t,"getPathBBox",{enumerable:!0,get:function(){return f.getPathBBox}});var h=r(34329);Object.defineProperty(t,"getTotalLength",{enumerable:!0,get:function(){return h.getTotalLength}});var p=r(59141);Object.defineProperty(t,"getPathBBoxTotalLength",{enumerable:!0,get:function(){return p.getPathBBoxTotalLength}});var d=r(10009);Object.defineProperty(t,"getRotatedCurve",{enumerable:!0,get:function(){return d.getRotatedCurve}});var y=r(86114);Object.defineProperty(t,"getPathArea",{enumerable:!0,get:function(){return y.getPathArea}});var v=r(97242);Object.defineProperty(t,"getDrawDirection",{enumerable:!0,get:function(){return v.getDrawDirection}});var g=r(81830);Object.defineProperty(t,"getPointAtLength",{enumerable:!0,get:function(){return g.getPointAtLength}});var m=r(59104);Object.defineProperty(t,"isPointInStroke",{enumerable:!0,get:function(){return m.isPointInStroke}});var b=r(94725);Object.defineProperty(t,"distanceSquareRoot",{enumerable:!0,get:function(){return b.distanceSquareRoot}});var w=r(67803);Object.defineProperty(t,"equalizeSegments",{enumerable:!0,get:function(){return w.equalizeSegments}}),(0,n.__exportStar)(r(39921),t)},97052:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.finalizeSegment=void 0;var n=r(76899);t.finalizeSegment=function(e){for(var t=e.pathValue[e.segmentStart],r=t.toLowerCase(),o=e.data;o.length>=n.paramsCount[r]&&("m"===r&&o.length>2?(e.segments.push([t].concat(o.splice(0,2))),r="l",t="m"===t?"l":"L"):e.segments.push([t].concat(o.splice(0,n.paramsCount[r]))),n.paramsCount[r]););}},3766:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isArcCommand=void 0,t.isArcCommand=function(e){return 97==(32|e)}},54211:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isDigit=t.isDigitStart=void 0,t.isDigitStart=function(e){return e>=48&&e<=57||43===e||45===e||46===e},t.isDigit=function(e){return e>=48&&e<=57}},72737:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isPathCommand=void 0,t.isPathCommand=function(e){switch(32|e){case 109:case 122:case 108:case 104:case 118:case 99:case 115:case 113:case 116:case 97:return!0;default:return!1}}},39372:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isSpace=void 0,t.isSpace=function(e){return 10===e||13===e||8232===e||8233===e||32===e||9===e||11===e||12===e||160===e||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].includes(e)}},76899:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.paramsCount=void 0,t.paramsCount={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0}},52338:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.paramsParser=void 0,t.paramsParser={x1:0,y1:0,x2:0,y2:0,x:0,y:0,qx:null,qy:null}},15582:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parsePathString=void 0;var n=r(47710),o=r(89273),i=r(9363),a=r(7400);t.parsePathString=function(e){if((0,n.isPathArray)(e))return[].concat(e);var t=new a.PathParser(e);for((0,i.skipSpaces)(t);t.index<t.max&&!t.err.length;)(0,o.scanSegment)(t);return t.err?t.err:t.segments}},7400:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PathParser=void 0;var r=function(){return function(e){this.pathValue=e,this.segments=[],this.max=e.length,this.index=0,this.param=0,this.segmentStart=0,this.data=[],this.err=""}}();t.PathParser=r},95338:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.scanFlag=void 0,t.scanFlag=function(e){var t=e.index,r=e.pathValue,n=r.charCodeAt(t);return 48===n?(e.param=0,void(e.index+=1)):49===n?(e.param=1,void(e.index+=1)):void(e.err='[path-util]: invalid Arc flag "'+r[t]+'", expecting 0 or 1 at index '+t)}},22357:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.scanParam=void 0;var n=r(54211);t.scanParam=function(e){var t,r=e.max,o=e.pathValue,i=e.index,a=i,s=!1,u=!1,l=!1,c=!1;if(a>=r)e.err="[path-util]: Invalid path value at index "+a+', "pathValue" is missing param';else if(43!==(t=o.charCodeAt(a))&&45!==t||(a+=1,t=o.charCodeAt(a)),(0,n.isDigit)(t)||46===t){if(46!==t){if(s=48===t,a+=1,t=o.charCodeAt(a),s&&a<r&&t&&(0,n.isDigit)(t))return void(e.err="[path-util]: Invalid path value at index "+i+', "'+o[i]+'" illegal number');for(;a<r&&(0,n.isDigit)(o.charCodeAt(a));)a+=1,u=!0;t=o.charCodeAt(a)}if(46===t){for(c=!0,a+=1;(0,n.isDigit)(o.charCodeAt(a));)a+=1,l=!0;t=o.charCodeAt(a)}if(101===t||69===t){if(c&&!u&&!l)return void(e.err="[path-util]: Invalid path value at index "+a+', "'+o[a]+'" invalid float exponent');if(a+=1,43!==(t=o.charCodeAt(a))&&45!==t||(a+=1),!(a<r&&(0,n.isDigit)(o.charCodeAt(a))))return void(e.err="[path-util]: Invalid path value at index "+a+', "'+o[a]+'" invalid integer exponent');for(;a<r&&(0,n.isDigit)(o.charCodeAt(a));)a+=1}e.index=a,e.param=+e.pathValue.slice(i,a)}else e.err="[path-util]: Invalid path value at index "+a+', "'+o[a]+'" is not a number'}},89273:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.scanSegment=void 0;var n=r(97052),o=r(76899),i=r(95338),a=r(22357),s=r(9363),u=r(72737),l=r(54211),c=r(3766);t.scanSegment=function(e){var t=e.max,r=e.pathValue,f=e.index,h=r.charCodeAt(f),p=o.paramsCount[r[f].toLowerCase()];if(e.segmentStart=f,(0,u.isPathCommand)(h))if(e.index+=1,(0,s.skipSpaces)(e),e.data=[],p){for(;;){for(var d=p;d>0;d-=1){if(!(0,c.isArcCommand)(h)||3!==d&&4!==d?(0,a.scanParam)(e):(0,i.scanFlag)(e),e.err.length)return;e.data.push(e.param),(0,s.skipSpaces)(e),e.index<t&&44===r.charCodeAt(e.index)&&(e.index+=1,(0,s.skipSpaces)(e))}if(e.index>=e.max)break;if(!(0,l.isDigitStart)(r.charCodeAt(e.index)))break}(0,n.finalizeSegment)(e)}else(0,n.finalizeSegment)(e);else e.err='[path-util]: Invalid path value "'+r[f]+'" is not a path command'}},9363:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.skipSpaces=void 0;var n=r(39372);t.skipSpaces=function(e){for(var t=e.pathValue,r=e.max;e.index<r&&(0,n.isSpace)(t.charCodeAt(e.index));)e.index+=1}},94122:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.arcToCubic=void 0;var n=r(75474);t.arcToCubic=function e(t,r,o,i,a,s,u,l,c,f){var h,p,d,y,v,g=t,m=r,b=o,w=i,_=l,x=c,S=120*Math.PI/180,O=Math.PI/180*(+a||0),P=[];if(f)p=f[0],d=f[1],y=f[2],v=f[3];else{g=(h=(0,n.rotateVector)(g,m,-O)).x,m=h.y;var E=(g-(_=(h=(0,n.rotateVector)(_,x,-O)).x))/2,k=(m-(x=h.y))/2,M=E*E/(b*b)+k*k/(w*w);M>1&&(b*=M=Math.sqrt(M),w*=M);var C=b*b,j=w*w,T=(s===u?-1:1)*Math.sqrt(Math.abs((C*j-C*k*k-j*E*E)/(C*k*k+j*E*E)));y=T*b*k/w+(g+_)/2,v=T*-w*E/b+(m+x)/2,p=Math.asin(((m-v)/w*Math.pow(10,9)>>0)/Math.pow(10,9)),d=Math.asin(((x-v)/w*Math.pow(10,9)>>0)/Math.pow(10,9)),p=g<y?Math.PI-p:p,d=_<y?Math.PI-d:d,p<0&&(p=2*Math.PI+p),d<0&&(d=2*Math.PI+d),u&&p>d&&(p-=2*Math.PI),!u&&d>p&&(d-=2*Math.PI)}var A=d-p;if(Math.abs(A)>S){var I=d,R=_,L=x;d=p+S*(u&&d>p?1:-1),P=e(_=y+b*Math.cos(d),x=v+w*Math.sin(d),b,w,a,0,u,R,L,[d,I,y,v])}A=d-p;var N=Math.cos(p),D=Math.sin(p),B=Math.cos(d),F=Math.sin(d),G=Math.tan(A/4),z=4/3*b*G,U=4/3*w*G,V=[g,m],W=[g+z*D,m-U*N],Y=[_+z*F,x-U*B],H=[_,x];if(W[0]=2*V[0]-W[0],W[1]=2*V[1]-W[1],f)return W.concat(Y,H,P);for(var X=[],q=0,J=(P=W.concat(Y,H,P)).length;q<J;q+=1)X[q]=q%2?(0,n.rotateVector)(P[q-1],P[q],O).y:(0,n.rotateVector)(P[q],P[q+1],O).x;return X}},68248:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.clonePath=void 0,t.clonePath=function(e){return e.map(function(e){return Array.isArray(e)?[].concat(e):e})}},37724:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fixArc=void 0,t.fixArc=function(e,t,r){if(e[r].length>7){e[r].shift();for(var n=e[r],o=r;n.length;)t[r]="A",e.splice(o+=1,0,["C"].concat(n.splice(0,6)));e.splice(r,1)}}},69813:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.lineToCubic=void 0;var n=r(97582),o=r(47321);t.lineToCubic=function(e,t,r,i){var a=(0,o.midPoint)([e,t],[r,i],.5);return(0,n.__spreadArray)((0,n.__spreadArray)([],a,!0),[r,i,r,i],!1)}},93249:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.normalizePath=void 0;var n=r(97582),o=r(3501),i=r(52338),a=r(67169),s=r(87473);t.normalizePath=function(e){if((0,o.isNormalizedArray)(e))return[].concat(e);for(var t=(0,a.path2Absolute)(e),r=(0,n.__assign)({},i.paramsParser),u=0;u<t.length;u+=1){t[u]=(0,s.normalizeSegment)(t[u],r);var l=t[u],c=l.length;r.x1=+l[c-2],r.y1=+l[c-1],r.x2=+l[c-4]||r.x1,r.y2=+l[c-3]||r.y1}return t}},87473:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.normalizeSegment=void 0,t.normalizeSegment=function(e,t){var r=e[0],n=t.x1,o=t.y1,i=t.x2,a=t.y2,s=e.slice(1).map(Number),u=e;if("TQ".includes(r)||(t.qx=null,t.qy=null),"H"===r)u=["L",e[1],o];else if("V"===r)u=["L",n,e[1]];else if("S"===r){var l=2*n-i,c=2*o-a;t.x1=l,t.y1=c,u=["C",l,c].concat(s)}else if("T"===r){var f=2*n-t.qx,h=2*o-t.qy;t.qx=f,t.qy=h,u=["Q",f,h].concat(s)}else if("Q"===r){var p=s[0],d=s[1];t.qx=p,t.qy=d}return u}},83017:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.quadToCubic=void 0,t.quadToCubic=function(e,t,r,n,o,i){return[1/3*e+2/3*r,1/3*t+2/3*n,1/3*o+2/3*r,1/3*i+2/3*n,o,i]}},28453:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.reverseCurve=void 0,t.reverseCurve=function(e){var t=e.slice(1).map(function(t,r,n){return r?n[r-1].slice(-2).concat(t.slice(1)):e[0].slice(1).concat(t.slice(1))}).map(function(e){return e.map(function(t,r){return e[e.length-r-2*(1-r%2)]})}).reverse();return[["M"].concat(t[0].slice(0,2))].concat(t.map(function(e){return["C"].concat(e.slice(2))}))}},19492:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.roundPath=void 0,t.roundPath=function(e,t){if("off"===t)return[].concat(e);var r="number"==typeof t&&t>=1?Math.pow(10,t):1;return e.map(function(e){var n=e.slice(1).map(Number).map(function(e){return t?Math.round(e*r)/r:Math.round(e)});return[e[0]].concat(n)})}},2407:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.segmentToCubic=void 0;var n=r(94122),o=r(83017),i=r(69813);t.segmentToCubic=function(e,t){var r,a=e[0],s=e.slice(1).map(Number),u=s[0],l=s[1],c=t.x1,f=t.y1,h=t.x,p=t.y;switch("TQ".includes(a)||(t.qx=null,t.qy=null),a){case"M":return t.x=u,t.y=l,e;case"A":return r=[c,f].concat(s),["C"].concat((0,n.arcToCubic)(r[0],r[1],r[2],r[3],r[4],r[5],r[6],r[7],r[8],r[9]));case"Q":return t.qx=u,t.qy=l,r=[c,f].concat(s),["C"].concat((0,o.quadToCubic)(r[0],r[1],r[2],r[3],r[4],r[5]));case"L":return["C"].concat((0,i.lineToCubic)(c,f,u,l));case"Z":return c===h&&f===p?["C",c,f,h,p,h,p]:["C"].concat((0,i.lineToCubic)(c,f,h,p))}return e}},39921:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},94725:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.distanceSquareRoot=void 0,t.distanceSquareRoot=function(e,t){return Math.sqrt((e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1]))}},67803:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.equalizeSegments=void 0;var n=r(47321),o=r(41159);function i(e){return e.map(function(e,t,r){var i=t&&r[t-1].slice(-2).concat(e.slice(1)),a=t?(0,o.segmentCubicFactory)(i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7],i[8],{bbox:!1}).length:0;return{s:e,ss:t?a?function(e,t){void 0===t&&(t=.5);var r=e.slice(0,2),o=e.slice(2,4),i=e.slice(4,6),a=e.slice(6,8),s=(0,n.midPoint)(r,o,t),u=(0,n.midPoint)(o,i,t),l=(0,n.midPoint)(i,a,t),c=(0,n.midPoint)(s,u,t),f=(0,n.midPoint)(u,l,t),h=(0,n.midPoint)(c,f,t);return[["C"].concat(s,c,h),["C"].concat(f,l,a)]}(i):[e,e]:[e],l:a}})}t.equalizeSegments=function e(t,r,n){var o=i(t),a=i(r),s=o.length,u=a.length,l=o.filter(function(e){return e.l}).length,c=a.filter(function(e){return e.l}).length,f=o.filter(function(e){return e.l}).reduce(function(e,t){return e+t.l},0)/l||0,h=a.filter(function(e){return e.l}).reduce(function(e,t){return e+t.l},0)/c||0,p=n||Math.max(s,u),d=[f,h],y=[p-s,p-u],v=0,g=[o,a].map(function(e,t){return e.l===p?e.map(function(e){return e.s}):e.map(function(e,r){return v=r&&y[t]&&e.l>=d[t],y[t]-=v?1:0,v?e.ss:[e.s]}).flat()});return g[0].length===g[1].length?g:e(g[0],g[1],p)}},97242:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDrawDirection=void 0;var n=r(86114);t.getDrawDirection=function(e){return(0,n.getPathArea)(e)>=0}},86114:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPathArea=void 0;var n=r(45708);t.getPathArea=function(e){var t=0,r=0,o=0;return(0,n.path2Curve)(e).map(function(e){var n;switch(e[0]){case"M":return t=e[1],r=e[2],0;default:var i=e.slice(1),a=i[0],s=i[1],u=i[2],l=i[3],c=i[4],f=i[5];return o=function(e,t,r,n,o,i,a,s){return 3*((s-t)*(r+o)-(a-e)*(n+i)+n*(e-o)-r*(t-i)+s*(o+e/3)-a*(i+t/3))/20}(t,r,a,s,u,l,c,f),n=e.slice(-2),t=n[0],r=n[1],o}}).reduce(function(e,t){return e+t},0)}},59141:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPathBBoxTotalLength=void 0;var n=r(97582),o=r(12983);t.getPathBBoxTotalLength=function(e,t){if(!e)return{length:0,x:0,y:0,width:0,height:0,x2:0,y2:0,cx:0,cy:0,cz:0};var r=(0,o.pathLengthFactory)(e,void 0,(0,n.__assign)((0,n.__assign)({},t),{bbox:!0,length:!0})),i=r.length,a=r.min,s=a.x,u=a.y,l=r.max,c=l.x,f=l.y,h=c-s,p=f-u;return{length:i,width:h,height:p,x:s,y:u,x2:c,y2:f,cx:s+h/2,cy:u+p/2,cz:Math.max(h,p)+Math.min(h,p)/2}}},28447:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPathBBox=void 0;var n=r(97582),o=r(12983);t.getPathBBox=function(e,t){if(!e)return{x:0,y:0,width:0,height:0,x2:0,y2:0,cx:0,cy:0,cz:0};var r=(0,o.pathLengthFactory)(e,void 0,(0,n.__assign)((0,n.__assign)({},t),{length:!1})),i=r.min,a=i.x,s=i.y,u=r.max,l=u.x,c=u.y,f=l-a,h=c-s;return{width:f,height:h,x:a,y:s,x2:l,y2:c,cx:a+f/2,cy:s+h/2,cz:Math.max(f,h)+Math.min(f,h)/2}}},81830:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPointAtLength=void 0;var n=r(97582),o=r(12983);t.getPointAtLength=function(e,t,r){return(0,o.pathLengthFactory)(e,t,(0,n.__assign)((0,n.__assign)({},r),{bbox:!1,length:!0})).point}},52481:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPropertiesAtLength=void 0;var n=r(15582),o=r(34329);t.getPropertiesAtLength=function(e,t){var r=(0,n.parsePathString)(e);if("string"==typeof r)throw TypeError(r);var i=r.slice(),a=(0,o.getTotalLength)(i),s=i.length-1,u=0,l=0,c=r[0],f=c.slice(-2),h={x:f[0],y:f[1]};if(s<=0||!t||!Number.isFinite(t))return{segment:c,index:0,length:l,point:h,lengthAtSegment:u};if(t>=a)return i=r.slice(0,-1),l=a-(u=(0,o.getTotalLength)(i)),{segment:r[s],index:s,length:l,lengthAtSegment:u};for(var p=[];s>0;)c=i[s],i=i.slice(0,-1),l=a-(u=(0,o.getTotalLength)(i)),a=u,p.push({segment:c,index:s,length:l,lengthAtSegment:u}),s-=1;return p.find(function(e){return e.lengthAtSegment<=t})}},64546:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPropertiesAtPoint=void 0;var n=r(15582),o=r(93249),i=r(81830),a=r(52481),s=r(34329);t.getPropertiesAtPoint=function(e,t){for(var r,u,l,c,f=(0,n.parsePathString)(e),h=(0,o.normalizePath)(f),p=(0,s.getTotalLength)(f),d=function(e){var r=e.x-t.x,n=e.y-t.y;return r*r+n*n},y=8,v=0,g=0,m=1/0,b=0;b<=p;b+=y)(v=d(r=(0,i.getPointAtLength)(h,b)))<m&&(u=r,g=b,m=v);y/=2;for(var w=0,_=0,x=0,S=0;y>.5;)w=g-y,x=d(l=(0,i.getPointAtLength)(h,w)),_=g+y,S=d(c=(0,i.getPointAtLength)(h,_)),w>=0&&x<m?(u=l,g=w,m=x):_<=p&&S<m?(u=c,g=_,m=S):y/=2;var O=(0,a.getPropertiesAtLength)(f,g);return{closest:u,distance:Math.sqrt(m),segment:O}}},10009:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getRotatedCurve=void 0;var n=r(94725);t.getRotatedCurve=function(e,t){var r=e.length-1,o=[],i=0,a=function(e){var t=e.length,r=t-1;return e.map(function(n,o){return e.map(function(n,i){var a,s=o+i;return 0===i||e[s]&&"M"===e[s][0]?(a=e[s],["M"].concat(a.slice(-2))):(s>=t&&(s-=r),e[s])})})}(e);return a.forEach(function(a,s){e.slice(1).forEach(function(o,a){i+=(0,n.distanceSquareRoot)(e[(s+a)%r].slice(-2),t[a%r].slice(-2))}),o[s]=i,i=0}),a[o.indexOf(Math.min.apply(null,o))]}},34329:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getTotalLength=void 0;var n=r(97582),o=r(12983);t.getTotalLength=function(e,t){return(0,o.pathLengthFactory)(e,void 0,(0,n.__assign)((0,n.__assign)({},t),{bbox:!1,length:!0})).length}},77507:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isAbsoluteArray=void 0;var n=r(47710);t.isAbsoluteArray=function(e){return(0,n.isPathArray)(e)&&e.every(function(e){var t=e[0];return t===t.toUpperCase()})}},25036:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isCurveArray=void 0;var n=r(3501);t.isCurveArray=function(e){return(0,n.isNormalizedArray)(e)&&e.every(function(e){var t=e[0];return"MC".includes(t)})}},3501:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isNormalizedArray=void 0;var n=r(77507);t.isNormalizedArray=function(e){return(0,n.isAbsoluteArray)(e)&&e.every(function(e){var t=e[0];return"ACLMQZ".includes(t)})}},47710:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isPathArray=void 0;var n=r(76899);t.isPathArray=function(e){return Array.isArray(e)&&e.every(function(e){var t=e[0].toLowerCase();return n.paramsCount[t]===e.length-1&&"achlmqstvz".includes(t)})}},59104:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isPointInStroke=void 0;var n=r(64546);t.isPointInStroke=function(e,t){var r=(0,n.getPropertiesAtPoint)(e,t).distance;return Math.abs(r)<.001}},47321:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.midPoint=void 0,t.midPoint=function(e,t,r){var n=e[0],o=e[1];return[n+(t[0]-n)*r,o+(t[1]-o)*r]}},12983:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pathLengthFactory=void 0;var n=r(93249),o=r(26864),i=r(79807),a=r(41159),s=r(65930);t.pathLengthFactory=function(e,t,r){for(var u,l,c,f,h,p,d,y,v,g=(0,n.normalizePath)(e),m="number"==typeof t,b=[],w=0,_=0,x=0,S=0,O=[],P=[],E=0,k={x:0,y:0},M=k,C=k,j=k,T=0,A=0,I=g.length;A<I;A+=1)b=(d="M"===(y=(v=g[A])[0]))?b:[w,_].concat(v.slice(1)),d?(M=k={x:x=v[1],y:S=v[2]},E=0,m&&t<.001&&(j=k)):"L"===y?(E=(u=(0,o.segmentLineFactory)(b[0],b[1],b[2],b[3],(t||0)-T)).length,k=u.min,M=u.max,C=u.point):"A"===y?(E=(l=(0,i.segmentArcFactory)(b[0],b[1],b[2],b[3],b[4],b[5],b[6],b[7],b[8],(t||0)-T,r||{})).length,k=l.min,M=l.max,C=l.point):"C"===y?(E=(c=(0,a.segmentCubicFactory)(b[0],b[1],b[2],b[3],b[4],b[5],b[6],b[7],(t||0)-T,r||{})).length,k=c.min,M=c.max,C=c.point):"Q"===y?(E=(f=(0,s.segmentQuadFactory)(b[0],b[1],b[2],b[3],b[4],b[5],(t||0)-T,r||{})).length,k=f.min,M=f.max,C=f.point):"Z"===y&&(b=[w,_,x,S],E=(h=(0,o.segmentLineFactory)(b[0],b[1],b[2],b[3],(t||0)-T)).length,k=h.min,M=h.max,C=h.point),m&&T<t&&T+E>=t&&(j=C),P.push(M),O.push(k),T+=E,w=(p="Z"!==y?v.slice(-2):[x,S])[0],_=p[1];return m&&t>=T&&(j={x:w,y:_}),{length:T,point:j,min:{x:Math.min.apply(null,O.map(function(e){return e.x})),y:Math.min.apply(null,O.map(function(e){return e.y}))},max:{x:Math.max.apply(null,P.map(function(e){return e.x})),y:Math.max.apply(null,P.map(function(e){return e.y}))}}}},75474:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.rotateVector=void 0,t.rotateVector=function(e,t,r){return{x:e*Math.cos(r)-t*Math.sin(r),y:e*Math.sin(r)+t*Math.cos(r)}}},79807:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.segmentArcFactory=void 0;var n=r(26864),o=r(94725);function i(e,t){var r=e.x,n=e.y,o=t.x,i=t.y,a=r*o+n*i,s=Math.sqrt((Math.pow(r,2)+Math.pow(n,2))*(Math.pow(o,2)+Math.pow(i,2)));return(r*i-n*o<0?-1:1)*Math.acos(a/s)}function a(e,t,r,o,a,s,u,l,c,f){var h=Math.abs,p=Math.sin,d=Math.cos,y=Math.sqrt,v=Math.PI,g=h(r),m=h(o),b=(a%360+360)%360*(v/180);if(e===l&&t===c)return{x:e,y:t};if(0===g||0===m)return(0,n.segmentLineFactory)(e,t,l,c,f).point;var w=(e-l)/2,_=(t-c)/2,x={x:d(b)*w+p(b)*_,y:-p(b)*w+d(b)*_},S=Math.pow(x.x,2)/Math.pow(g,2)+Math.pow(x.y,2)/Math.pow(m,2);S>1&&(g*=y(S),m*=y(S));var O=(Math.pow(g,2)*Math.pow(m,2)-Math.pow(g,2)*Math.pow(x.y,2)-Math.pow(m,2)*Math.pow(x.x,2))/(Math.pow(g,2)*Math.pow(x.y,2)+Math.pow(m,2)*Math.pow(x.x,2));O=O<0?0:O;var P=(s!==u?1:-1)*y(O),E=P*(g*x.y/m),k=P*(-m*x.x/g),M=d(b)*E-p(b)*k+(e+l)/2,C=p(b)*E+d(b)*k+(t+c)/2,j={x:(x.x-E)/g,y:(x.y-k)/m},T=i({x:1,y:0},j),A=i(j,{x:(-x.x-E)/g,y:(-x.y-k)/m});!u&&A>0?A-=2*v:u&&A<0&&(A+=2*v);var I=T+(A%=2*v)*f,R=g*d(I),L=m*p(I);return{x:d(b)*R-p(b)*L+M,y:p(b)*R+d(b)*L+C}}t.segmentArcFactory=function(e,t,r,n,i,s,u,l,c,f,h){var p,d=h.bbox,y=void 0===d||d,v=h.length,g=void 0===v||v,m=h.sampleSize,b=void 0===m?30:m,w="number"==typeof f,_=e,x=t,S=0,O=[_,x,S],P=[_,x],E={x:0,y:0},k=[{x:_,y:x}];w&&f<=0&&(E={x:_,y:x});for(var M=0;M<=b;M+=1){if(_=(p=a(e,t,r,n,i,s,u,l,c,M/b)).x,x=p.y,y&&k.push({x:_,y:x}),g&&(S+=(0,o.distanceSquareRoot)(P,[_,x])),P=[_,x],w&&S>=f&&f>O[2]){var C=(S-f)/(S-O[2]);E={x:P[0]*(1-C)+O[0]*C,y:P[1]*(1-C)+O[1]*C}}O=[_,x,S]}return w&&f>=S&&(E={x:l,y:c}),{length:S,point:E,min:{x:Math.min.apply(null,k.map(function(e){return e.x})),y:Math.min.apply(null,k.map(function(e){return e.y}))},max:{x:Math.max.apply(null,k.map(function(e){return e.x})),y:Math.max.apply(null,k.map(function(e){return e.y}))}}}},41159:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.segmentCubicFactory=void 0;var n=r(94725);function o(e,t,r,n,o,i,a,s,u){var l=1-u;return{x:Math.pow(l,3)*e+3*Math.pow(l,2)*u*r+3*l*Math.pow(u,2)*o+Math.pow(u,3)*a,y:Math.pow(l,3)*t+3*Math.pow(l,2)*u*n+3*l*Math.pow(u,2)*i+Math.pow(u,3)*s}}t.segmentCubicFactory=function(e,t,r,i,a,s,u,l,c,f){var h,p=f.bbox,d=void 0===p||p,y=f.length,v=void 0===y||y,g=f.sampleSize,m=void 0===g?10:g,b="number"==typeof c,w=e,_=t,x=0,S=[w,_,x],O=[w,_],P={x:0,y:0},E=[{x:w,y:_}];b&&c<=0&&(P={x:w,y:_});for(var k=0;k<=m;k+=1){if(w=(h=o(e,t,r,i,a,s,u,l,k/m)).x,_=h.y,d&&E.push({x:w,y:_}),v&&(x+=(0,n.distanceSquareRoot)(O,[w,_])),O=[w,_],b&&x>=c&&c>S[2]){var M=(x-c)/(x-S[2]);P={x:O[0]*(1-M)+S[0]*M,y:O[1]*(1-M)+S[1]*M}}S=[w,_,x]}return b&&c>=x&&(P={x:u,y:l}),{length:x,point:P,min:{x:Math.min.apply(null,E.map(function(e){return e.x})),y:Math.min.apply(null,E.map(function(e){return e.y}))},max:{x:Math.max.apply(null,E.map(function(e){return e.x})),y:Math.max.apply(null,E.map(function(e){return e.y}))}}}},26864:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.segmentLineFactory=void 0;var n=r(47321),o=r(94725);t.segmentLineFactory=function(e,t,r,i,a){var s=(0,o.distanceSquareRoot)([e,t],[r,i]),u={x:0,y:0};if("number"==typeof a)if(a<=0)u={x:e,y:t};else if(a>=s)u={x:r,y:i};else{var l=(0,n.midPoint)([e,t],[r,i],a/s);u={x:l[0],y:l[1]}}return{length:s,point:u,min:{x:Math.min(e,r),y:Math.min(t,i)},max:{x:Math.max(e,r),y:Math.max(t,i)}}}},65930:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.segmentQuadFactory=void 0;var n=r(94725);function o(e,t,r,n,o,i,a){var s=1-a;return{x:Math.pow(s,2)*e+2*s*a*r+Math.pow(a,2)*o,y:Math.pow(s,2)*t+2*s*a*n+Math.pow(a,2)*i}}t.segmentQuadFactory=function(e,t,r,i,a,s,u,l){var c,f=l.bbox,h=void 0===f||f,p=l.length,d=void 0===p||p,y=l.sampleSize,v=void 0===y?10:y,g="number"==typeof u,m=e,b=t,w=0,_=[m,b,w],x=[m,b],S={x:0,y:0},O=[{x:m,y:b}];g&&u<=0&&(S={x:m,y:b});for(var P=0;P<=v;P+=1){if(m=(c=o(e,t,r,i,a,s,P/v)).x,b=c.y,h&&O.push({x:m,y:b}),d&&(w+=(0,n.distanceSquareRoot)(x,[m,b])),x=[m,b],g&&w>=u&&u>_[2]){var E=(w-u)/(w-_[2]);S={x:x[0]*(1-E)+_[0]*E,y:x[1]*(1-E)+_[1]*E}}_=[m,b,w]}return g&&u>=w&&(S={x:a,y:s}),{length:w,point:S,min:{x:Math.min.apply(null,O.map(function(e){return e.x})),y:Math.min.apply(null,O.map(function(e){return e.y}))},max:{x:Math.max.apply(null,O.map(function(e){return e.x})),y:Math.max.apply(null,O.map(function(e){return e.y}))}}}},47592:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(27018);function o(e,t,r){var o=[0,0,0,0,0,0,0,0,0];return n.mat3.fromTranslation(o,r),n.mat3.multiply(e,o,t)}function i(e,t,r){var o=[0,0,0,0,0,0,0,0,0];return n.mat3.fromRotation(o,r),n.mat3.multiply(e,o,t)}function a(e,t,r){var o=[0,0,0,0,0,0,0,0,0];return n.mat3.fromScaling(o,r),n.mat3.multiply(e,o,t)}function s(e,t){return e[0]*t[1]-t[0]*e[1]}t.leftTranslate=o,t.leftRotate=i,t.leftScale=a,t.transform=function(e,t){for(var r,s,u,l=e?[].concat(e):[1,0,0,0,1,0,0,0,1],c=0,f=t.length;c<f;c++){var h=t[c];switch(h[0]){case"t":o(l,l,[h[1],h[2]]);break;case"s":a(l,l,[h[1],h[2]]);break;case"r":i(l,l,h[1]);break;case"m":r=l,s=l,u=h[1],n.mat3.multiply(r,u,s)}}return l},t.direction=s,t.angleTo=function(e,t,r){var o=n.vec2.angle(e,t),i=s(e,t)>=0;return r?i?2*Math.PI-o:o:i?o:2*Math.PI-o},t.vertical=function(e,t,r){return r?(e[0]=t[1],e[1]=-1*t[0]):(e[0]=-1*t[1],e[1]=t[0]),e}},43708:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(27018);t.mat3=n.mat3,t.vec2=n.vec2,t.vec3=n.vec3;var o=r(47592);t.ext=o},84601:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(56686);t.default=function(e,t,r){void 0===t&&(t=!1),void 0===r&&(r=[[0,0],[1,1]]);for(var o=!!t,i=[],a=0,s=e.length;a<s;a+=2)i.push([e[a],e[a+1]]);var u,l,c,f=function(e,t,r,o){var i,a,s,u,l,c,f,h=[],p=!!o;if(p){s=o[0],u=o[1];for(var d=0,y=e.length;d<y;d+=1){var v=e[d];s=n.vec2.min([0,0],s,v),u=n.vec2.max([0,0],u,v)}}d=0;for(var g=e.length;d<g;d+=1)if(v=e[d],0!==d||r)if(d!==g-1||r){i=e[[d?d-1:g-1,d-1][r?0:1]],a=e[r?(d+1)%g:d+1];var m=[0,0];m=n.vec2.sub(m,a,i),m=n.vec2.scale(m,m,t);var b=n.vec2.distance(v,i),w=n.vec2.distance(v,a),_=b+w;0!==_&&(b/=_,w/=_);var x=n.vec2.scale([0,0],m,-b),S=n.vec2.scale([0,0],m,w);c=n.vec2.add([0,0],v,x),l=n.vec2.add([0,0],v,S),l=n.vec2.min([0,0],l,n.vec2.max([0,0],a,v)),l=n.vec2.max([0,0],l,n.vec2.min([0,0],a,v)),x=n.vec2.sub([0,0],l,v),x=n.vec2.scale([0,0],x,-b/w),c=n.vec2.add([0,0],v,x),c=n.vec2.min([0,0],c,n.vec2.max([0,0],i,v)),c=n.vec2.max([0,0],c,n.vec2.min([0,0],i,v)),S=n.vec2.sub([0,0],v,c),S=n.vec2.scale([0,0],S,w/b),l=n.vec2.add([0,0],v,S),p&&(c=n.vec2.max([0,0],c,s),c=n.vec2.min([0,0],c,u),l=n.vec2.max([0,0],l,s),l=n.vec2.min([0,0],l,u)),h.push(f),h.push(c),f=l}else c=v,h.push(f),h.push(c);else f=v;return r&&h.push(h.shift()),h}(i,.4,o,r),h=i.length,p=[];for(a=0;a<h-1;a+=1)u=f[2*a],l=f[2*a+1],c=i[a+1],p.push(["C",u[0],u[1],l[0],l[1],c[0],c[1]]);return o&&(u=f[h],l=f[h+1],c=i[0],p.push(["C",u[0],u[1],l[0],l[1],c[0],c[1]])),p}},99753:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(31834);function o(e,t,r){var n=null,o=r;return t<o&&(o=t,n="add"),e<o&&(o=e,n="del"),{type:n,min:o}}var i=function(e,t){var r,i,a=e.length,s=t.length,u=0;if(0===a||0===s)return null;for(var l=[],c=0;c<=a;c++)l[c]=[],l[c][0]={min:c};for(var f=0;f<=s;f++)l[0][f]={min:f};for(c=1;c<=a;c++){r=e[c-1];for(f=1;f<=s;f++){i=t[f-1],u=(0,n.isEqual)(r,i)?0:1;var h=l[c-1][f].min+1,p=l[c][f-1].min+1,d=l[c-1][f-1].min+u;l[c][f]=o(h,p,d)}}return l};t.default=function(e,t){var r=i(e,t),n=e.length,o=t.length,a=[],s=1,u=1;if(r[n][o]!==n){for(var l=1;l<=n;l++){var c=r[l][l].min;u=l;for(var f=s;f<=o;f++)r[l][f].min<c&&(c=r[l][f].min,u=f);s=u,r[l][s].type&&a.push({index:l-1,type:r[l][s].type})}for(l=a.length-1;l>=0;l--)s=a[l].index,"add"===a[l].type?e.splice(s,0,[].concat(e[s])):e.splice(s,1)}if((n=e.length)<o)for(l=0;l<o-n;l++)"z"===e[n-1][0]||"Z"===e[n-1][0]?e.splice(n-2,0,e[n-2]):e.push(e[n-1]);return e}},98716:function(e,t){"use strict";function r(e,t){var r=[],n=[];return e.length&&function e(t,o){if(1===t.length)r.push(t[0]),n.push(t[0]);else{for(var i=[],a=0;a<t.length-1;a++)0===a&&r.push(t[0]),a===t.length-2&&n.push(t[a+1]),i[a]=[(1-o)*t[a][0]+o*t[a+1][0],(1-o)*t[a][1]+o*t[a+1][1]];e(i,o)}}(e,t),{left:r,right:n.reverse()}}function n(e,t,n){if(1===n)return[[].concat(e)];var o=[];if("L"===t[0]||"C"===t[0]||"Q"===t[0])o=o.concat(function(e,t,n){var o=[[e[1],e[2]]];n=n||2;var i=[];"A"===t[0]?(o.push(t[6]),o.push(t[7])):"C"===t[0]?(o.push([t[1],t[2]]),o.push([t[3],t[4]]),o.push([t[5],t[6]])):"S"===t[0]||"Q"===t[0]?(o.push([t[1],t[2]]),o.push([t[3],t[4]])):o.push([t[1],t[2]]);for(var a=o,s=1/n,u=0;u<n-1;u++){var l=r(a,s/(1-s*u));i.push(l.left),a=l.right}return i.push(a),i.map(function(e){var t=[];return 4===e.length&&(t.push("C"),t=t.concat(e[2])),e.length>=3&&(3===e.length&&t.push("Q"),t=t.concat(e[1])),2===e.length&&t.push("L"),t=t.concat(e[e.length-1])})}(e,t,n));else{var i=[].concat(e);"M"===i[0]&&(i[0]="L");for(var a=0;a<=n-1;a++)o.push(i)}return o}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(1===e.length)return e;var r=e.length-1,o=t.length-1,i=r/o,a=[];if(1===e.length&&"M"===e[0][0]){for(var s=0;s<o-r;s++)e.push(e[0]);return e}for(s=0;s<o;s++){var u=Math.floor(i*s);a[u]=(a[u]||0)+1}var l=a.reduce(function(t,o,i){return i===r?t.concat(e[r]):t.concat(n(e[i],e[i+1],o))},[]);return l.unshift(e[0]),"Z"!==t[o]&&"z"!==t[o]||l.push("Z"),l}},66720:function(e,t){"use strict";function r(e){var t=[];switch(e[0]){case"M":case"L":t.push([e[1],e[2]]);break;case"A":t.push([e[6],e[7]]);break;case"Q":t.push([e[3],e[4]]),t.push([e[1],e[2]]);break;case"T":t.push([e[1],e[2]]);break;case"C":t.push([e[5],e[6]]),t.push([e[1],e[2]]),t.push([e[3],e[4]]);break;case"S":t.push([e[3],e[4]]),t.push([e[1],e[2]]);break;case"H":case"V":t.push([e[1],e[1]])}return t}function n(e,t,n){for(var o,i=[].concat(e),a=1/(n+1),s=r(t)[0],u=1;u<=n;u++)a*=u,0===(o=Math.floor(e.length*a))?i.unshift([s[0]*a+e[o][0]*(1-a),s[1]*a+e[o][1]*(1-a)]):i.splice(o,0,[s[0]*a+e[o][0]*(1-a),s[1]*a+e[o][1]*(1-a)]);return i}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(e.length<=1)return e;for(var o,i=0;i<t.length;i++)if(e[i][0]!==t[i][0])switch(o=r(e[i]),t[i][0]){case"M":e[i]=["M"].concat(o[0]);break;case"L":e[i]=["L"].concat(o[0]);break;case"A":e[i]=[].concat(t[i]),e[i][6]=o[0][0],e[i][7]=o[0][1];break;case"Q":if(o.length<2){if(!(i>0)){e[i]=t[i];break}o=n(o,e[i-1],1)}e[i]=["Q"].concat(o.reduce(function(e,t){return e.concat(t)},[]));break;case"T":e[i]=["T"].concat(o[0]);break;case"C":if(o.length<3){if(!(i>0)){e[i]=t[i];break}o=n(o,e[i-1],2)}e[i]=["C"].concat(o.reduce(function(e,t){return e.concat(t)},[]));break;case"S":if(o.length<2){if(!(i>0)){e[i]=t[i];break}o=n(o,e[i-1],1)}e[i]=["S"].concat(o.reduce(function(e,t){return e.concat(t)},[]));break;default:e[i]=t[i]}return e}},71697:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isSamePoint=void 0;var n=r(31834);function o(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function i(e,t){return o(e)*o(t)?(e[0]*t[0]+e[1]*t[1])/(o(e)*o(t)):1}function a(e,t){return(e[0]*t[1]<e[1]*t[0]?-1:1)*Math.acos(i(e,t))}function s(e,t){return e[0]===t[0]&&e[1]===t[1]}t.isSamePoint=s,t.default=function(e,t){var r=t[1],o=t[2],u=(0,n.mod)((0,n.toRadian)(t[3]),2*Math.PI),l=t[4],c=t[5],f=e[0],h=e[1],p=t[6],d=t[7],y=Math.cos(u)*(f-p)/2+Math.sin(u)*(h-d)/2,v=-1*Math.sin(u)*(f-p)/2+Math.cos(u)*(h-d)/2,g=y*y/(r*r)+v*v/(o*o);g>1&&(r*=Math.sqrt(g),o*=Math.sqrt(g));var m=r*r*(v*v)+o*o*(y*y),b=m?Math.sqrt((r*r*(o*o)-m)/m):1;l===c&&(b*=-1),isNaN(b)&&(b=0);var w=o?b*r*v/o:0,_=r?b*-o*y/r:0,x=(f+p)/2+Math.cos(u)*w-Math.sin(u)*_,S=(h+d)/2+Math.sin(u)*w+Math.cos(u)*_,O=[(y-w)/r,(v-_)/o],P=[(-1*y-w)/r,(-1*v-_)/o],E=a([1,0],O),k=a(O,P);return i(O,P)<=-1&&(k=Math.PI),i(O,P)>=1&&(k=0),0===c&&k>0&&(k-=2*Math.PI),1===c&&k<0&&(k+=2*Math.PI),{cx:x,cy:S,rx:s(e,[p,d])?0:r,ry:s(e,[p,d])?0:o,startAngle:E,endAngle:E+k,xRotation:u,arcFlag:l,sweepFlag:c}}},8272:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t,r){return e>=t&&e<=r};t.default=function(e,t,n,o){var i=n.x-e.x,a=n.y-e.y,s=t.x-e.x,u=t.y-e.y,l=o.x-n.x,c=o.y-n.y,f=s*c-u*l,h=null;if(f*f>.001*(s*s+u*u)*(l*l+c*c)){var p=(i*c-a*l)/f,d=(i*u-a*s)/f;r(p,0,1)&&r(d,0,1)&&(h={x:e.x+p*s,y:e.y+p*u})}return h}},73920:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isPointInPolygon=t.isPolygonsIntersect=t.getLineIntersect=t.path2Segments=t.getArcParams=t.reactPath=t.path2Absolute=t.path2Curve=t.parsePathString=t.parsePathArray=t.pathIntersection=t.formatPath=t.fillPathByDiff=t.fillPath=t.catmullRom2Bezier=t.parsePath=void 0;var n=r(74851);Object.defineProperty(t,"parsePath",{enumerable:!0,get:function(){return n.default}});var o=r(84601);Object.defineProperty(t,"catmullRom2Bezier",{enumerable:!0,get:function(){return o.default}});var i=r(98716);Object.defineProperty(t,"fillPath",{enumerable:!0,get:function(){return i.default}});var a=r(99753);Object.defineProperty(t,"fillPathByDiff",{enumerable:!0,get:function(){return a.default}});var s=r(66720);Object.defineProperty(t,"formatPath",{enumerable:!0,get:function(){return s.default}});var u=r(14672);Object.defineProperty(t,"pathIntersection",{enumerable:!0,get:function(){return u.default}});var l=r(92851);Object.defineProperty(t,"parsePathArray",{enumerable:!0,get:function(){return l.default}});var c=r(3376);Object.defineProperty(t,"parsePathString",{enumerable:!0,get:function(){return c.default}});var f=r(13482);Object.defineProperty(t,"path2Curve",{enumerable:!0,get:function(){return f.default}});var h=r(18057);Object.defineProperty(t,"path2Absolute",{enumerable:!0,get:function(){return h.default}});var p=r(11183);Object.defineProperty(t,"reactPath",{enumerable:!0,get:function(){return p.default}});var d=r(71697);Object.defineProperty(t,"getArcParams",{enumerable:!0,get:function(){return d.default}});var y=r(39038);Object.defineProperty(t,"path2Segments",{enumerable:!0,get:function(){return y.default}});var v=r(8272);Object.defineProperty(t,"getLineIntersect",{enumerable:!0,get:function(){return v.default}});var g=r(36841);Object.defineProperty(t,"isPolygonsIntersect",{enumerable:!0,get:function(){return g.default}});var m=r(53563);Object.defineProperty(t,"isPointInPolygon",{enumerable:!0,get:function(){return m.default}})},36841:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(53563),o=r(8272),i=r(31834);function a(e){for(var t=[],r=e.length,n=0;n<r-1;n++){var o=e[n],i=e[n+1];t.push({from:{x:o[0],y:o[1]},to:{x:i[0],y:i[1]}})}if(t.length>1){var a=e[0],s=e[r-1];t.push({from:{x:s[0],y:s[1]},to:{x:a[0],y:a[1]}})}return t}function s(e){var t=e.map(function(e){return e[0]}),r=e.map(function(e){return e[1]});return{minX:Math.min.apply(null,t),maxX:Math.max.apply(null,t),minY:Math.min.apply(null,r),maxY:Math.max.apply(null,r)}}t.default=function(e,t){if(e.length<2||t.length<2)return!1;var r,u,l=s(e),c=s(t);if(r=l,(u=c).minX>r.maxX||u.maxX<r.minX||u.minY>r.maxY||u.maxY<r.minY)return!1;var f=!1;if((0,i.each)(t,function(t){if((0,n.default)(e,t[0],t[1]))return f=!0,!1}),f)return!0;if((0,i.each)(e,function(e){if((0,n.default)(t,e[0],e[1]))return f=!0,!1}),f)return!0;var h=a(e),p=a(t),d=!1;return(0,i.each)(p,function(e){if(function(e,t){var r=!1;return(0,i.each)(e,function(e){if((0,o.default)(e.from,e.to,t.from,t.to))return r=!0,!1}),r}(h,e))return d=!0,!1}),d}},92851:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=/,?([a-z]),?/gi;t.default=function(e){return e.join(",").replace(r,"$1")}},3376:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(31834),o="\t\n\v\f\r Â áá ââââââââââââ¯âã\u2028\u2029",i=new RegExp("([a-z])["+o+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+o+"]*,?["+o+"]*)+)","ig"),a=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+o+"]*,?["+o+"]*","ig");t.default=function(e){if(!e)return null;if((0,n.isArray)(e))return e;var t={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},r=[];return String(e).replace(i,function(e,n,o){var i=[],s=n.toLowerCase();if(o.replace(a,function(e,t){t&&i.push(+t)}),"m"===s&&i.length>2&&(r.push([n].concat(i.splice(0,2))),s="l",n="m"===n?"l":"L"),"o"===s&&1===i.length&&r.push([n,i[0]]),"r"===s)r.push([n].concat(i));else for(;i.length>=t[s]&&(r.push([n].concat(i.splice(0,t[s]))),t[s]););return""}),r}},74851:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(31834),o=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/gi,i=/[^\s\,]+/gi;t.default=function(e){var t=e||[];return(0,n.isArray)(t)?t:(0,n.isString)(t)?(t=t.match(o),(0,n.each)(t,function(e,r){if((e=e.match(i))[0].length>1){var o=e[0].charAt(0);e.splice(1,0,e[0].substr(1)),e[0]=o}(0,n.each)(e,function(t,r){isNaN(t)||(e[r]=+t)}),t[r]=e}),t):void 0}},18057:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3376),o=/[a-z]/;function i(e,t){return[t[0]+(t[0]-e[0]),t[1]+(t[1]-e[1])]}t.default=function(e){var t=(0,n.default)(e);if(!t||!t.length)return[["M",0,0]];for(var r=!1,a=0;a<t.length;a++){var s=t[a][0];if(o.test(s)||["V","H","T","S"].indexOf(s)>=0){r=!0;break}}if(!r)return t;var u=[],l=0,c=0,f=0,h=0,p=0,d=t[0];"M"!==d[0]&&"m"!==d[0]||(f=l=+d[1],h=c=+d[2],p++,u[0]=["M",l,c]),a=p;for(var y=t.length;a<y;a++){var v=t[a],g=u[a-1],m=[],b=(s=v[0]).toUpperCase();if(s!==b)switch(m[0]=b,b){case"A":m[1]=v[1],m[2]=v[2],m[3]=v[3],m[4]=v[4],m[5]=v[5],m[6]=+v[6]+l,m[7]=+v[7]+c;break;case"V":m[1]=+v[1]+c;break;case"H":m[1]=+v[1]+l;break;case"M":f=+v[1]+l,h=+v[2]+c,m[1]=f,m[2]=h;break;default:for(var w=1,_=v.length;w<_;w++)m[w]=+v[w]+(w%2?l:c)}else m=t[a];switch(b){case"Z":l=+f,c=+h;break;case"H":m=["L",l=m[1],c];break;case"V":m=["L",l,c=m[1]];break;case"T":l=m[1],c=m[2];var x=i([g[1],g[2]],[g[3],g[4]]);m=["Q",x[0],x[1],l,c];break;case"S":l=m[m.length-2],c=m[m.length-1];var S=g.length,O=i([g[S-4],g[S-3]],[g[S-2],g[S-1]]);m=["C",O[0],O[1],m[1],m[2],l,c];break;case"M":f=m[m.length-2],h=m[m.length-1];break;default:l=m[m.length-2],c=m[m.length-1]}u.push(m)}return u}},13482:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(18057),o=r(75879);function i(e,t,r){if(e[r].length>7){e[r].shift();for(var n=e[r],o=r;n.length;)t[r]="A",e.splice(o+=1,0,["C"].concat(n.splice(0,6)));e.splice(r,1)}}t.default=function(e,t){void 0===t&&(t=!1);for(var r,a,s=(0,n.default)(e),u={x1:0,y1:0,x2:0,y2:0,x:0,y:0,qx:null,qy:null},l=[],c="",f=s.length,h=[],p=0;p<f;p+=1)s[p]&&(c=s[p][0]),l[p]=c,s[p]=(0,o.segmentToCubic)(s[p],u),i(s,l,p),f=s.length,"Z"===c&&h.push(p),a=(r=s[p]).length,u.x1=+r[a-2],u.y1=+r[a-1],u.x2=+r[a-4]||u.x1,u.y2=+r[a-3]||u.y1;return t?[s,h]:s}},39038:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(71697),o=r(71697),i=r(74851);function a(e,t){return[t[0]+(t[0]-e[0]),t[1]+(t[1]-e[1])]}t.default=function(e){for(var t=[],r=null,s=null,u=null,l=0,c=(e=(0,i.default)(e)).length,f=0;f<c;f++){var h=e[f];s=e[f+1];var p=h[0],d={command:p,prePoint:r,params:h,startTangent:null,endTangent:null};switch(p){case"M":u=[h[1],h[2]],l=f;break;case"A":var y=(0,n.default)(r,h);d.arcParams=y}if("Z"===p)r=u,s=e[l+1];else{var v=h.length;r=[h[v-2],h[v-1]]}s&&"Z"===s[0]&&(s=e[l],t[l]&&(t[l].prePoint=r)),d.currentPoint=r,t[l]&&(0,o.isSamePoint)(r,t[l].currentPoint)&&(t[l].prePoint=d.prePoint);var g=s?[s[s.length-2],s[s.length-1]]:null;d.nextPoint=g;var m=d.prePoint;if(["L","H","V"].includes(p))d.startTangent=[m[0]-r[0],m[1]-r[1]],d.endTangent=[r[0]-m[0],r[1]-m[1]];else if("Q"===p){var b=[h[1],h[2]];d.startTangent=[m[0]-b[0],m[1]-b[1]],d.endTangent=[r[0]-b[0],r[1]-b[1]]}else if("T"===p)b=a((x=t[f-1]).currentPoint,m),"Q"===x.command?(d.command="Q",d.startTangent=[m[0]-b[0],m[1]-b[1]],d.endTangent=[r[0]-b[0],r[1]-b[1]]):(d.command="TL",d.startTangent=[m[0]-r[0],m[1]-r[1]],d.endTangent=[r[0]-m[0],r[1]-m[1]]);else if("C"===p){var w=[h[1],h[2]],_=[h[3],h[4]];d.startTangent=[m[0]-w[0],m[1]-w[1]],d.endTangent=[r[0]-_[0],r[1]-_[1]],0===d.startTangent[0]&&0===d.startTangent[1]&&(d.startTangent=[w[0]-_[0],w[1]-_[1]]),0===d.endTangent[0]&&0===d.endTangent[1]&&(d.endTangent=[_[0]-w[0],_[1]-w[1]])}else if("S"===p){var x;w=a((x=t[f-1]).currentPoint,m),_=[h[1],h[2]],"C"===x.command?(d.command="C",d.startTangent=[m[0]-w[0],m[1]-w[1]],d.endTangent=[r[0]-_[0],r[1]-_[1]]):(d.command="SQ",d.startTangent=[m[0]-_[0],m[1]-_[1]],d.endTangent=[r[0]-_[0],r[1]-_[1]])}else if("A"===p){var S=.001,O=d.arcParams||{},P=O.cx,E=void 0===P?0:P,k=O.cy,M=void 0===k?0:k,C=O.rx,j=void 0===C?0:C,T=O.ry,A=void 0===T?0:T,I=O.sweepFlag,R=void 0===I?0:I,L=O.startAngle,N=void 0===L?0:L,D=O.endAngle,B=void 0===D?0:D;0===R&&(S*=-1);var F=j*Math.cos(N-S)+E,G=A*Math.sin(N-S)+M;d.startTangent=[F-u[0],G-u[1]];var z=j*Math.cos(N+B+S)+E,U=A*Math.sin(N+B-S)+M;d.endTangent=[m[0]-z,m[1]-U]}t.push(d)}return t}},14672:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(31834),o=r(11183),i=r(13482),a=function(e,t,r,n,o){return e*(e*(-3*t+9*r-9*n+3*o)+6*t-12*r+6*n)-3*t+3*r},s=function(e,t,r,n,o,i,s,u,l){null===l&&(l=1);for(var c=(l=l>1?1:l<0?0:l)/2,f=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],h=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],p=0,d=0;d<12;d++){var y=c*f[d]+c,v=a(y,e,r,o,s),g=a(y,t,n,i,u),m=v*v+g*g;p+=h[d]*Math.sqrt(m)}return c*p},u=function(e,t,r,n,o,i,a,s){if(!(Math.max(e,r)<Math.min(o,a)||Math.min(e,r)>Math.max(o,a)||Math.max(t,n)<Math.min(i,s)||Math.min(t,n)>Math.max(i,s))){var u=(e-r)*(i-s)-(t-n)*(o-a);if(u){var l=((e*n-t*r)*(o-a)-(e-r)*(o*s-i*a))/u,c=((e*n-t*r)*(i-s)-(t-n)*(o*s-i*a))/u,f=+l.toFixed(2),h=+c.toFixed(2);if(!(f<+Math.min(e,r).toFixed(2)||f>+Math.max(e,r).toFixed(2)||f<+Math.min(o,a).toFixed(2)||f>+Math.max(o,a).toFixed(2)||h<+Math.min(t,n).toFixed(2)||h>+Math.max(t,n).toFixed(2)||h<+Math.min(i,s).toFixed(2)||h>+Math.max(i,s).toFixed(2)))return{x:l,y:c}}}},l=function(e,t,r){return t>=e.x&&t<=e.x+e.width&&r>=e.y&&r<=e.y+e.height},c=function(e,t,r,n){return null===e&&(e=t=r=n=0),null===t&&(t=e.y,r=e.width,n=e.height,e=e.x),{x:e,y:t,width:r,w:r,height:n,h:n,x2:e+r,y2:t+n,cx:e+r/2,cy:t+n/2,r1:Math.min(r,n)/2,r2:Math.max(r,n)/2,r0:Math.sqrt(r*r+n*n)/2,path:(0,o.default)(e,t,r,n),vb:[e,t,r,n].join(" ")}},f=function(e,t,r,o,i,a,s,u){(0,n.isArray)(e)||(e=[e,t,r,o,i,a,s,u]);var l=function(e,t,r,n,o,i,a,s){for(var u,l,c,f,h=[],p=[[],[]],d=0;d<2;++d)if(0===d?(l=6*e-12*r+6*o,u=-3*e+9*r-9*o+3*a,c=3*r-3*e):(l=6*t-12*n+6*i,u=-3*t+9*n-9*i+3*s,c=3*n-3*t),Math.abs(u)<1e-12){if(Math.abs(l)<1e-12)continue;(f=-c/l)>0&&f<1&&h.push(f)}else{var y=l*l-4*c*u,v=Math.sqrt(y);if(!(y<0)){var g=(-l+v)/(2*u);g>0&&g<1&&h.push(g);var m=(-l-v)/(2*u);m>0&&m<1&&h.push(m)}}for(var b,w=h.length,_=w;w--;)b=1-(f=h[w]),p[0][w]=b*b*b*e+3*b*b*f*r+3*b*f*f*o+f*f*f*a,p[1][w]=b*b*b*t+3*b*b*f*n+3*b*f*f*i+f*f*f*s;return p[0][_]=e,p[1][_]=t,p[0][_+1]=a,p[1][_+1]=s,p[0].length=p[1].length=_+2,{min:{x:Math.min.apply(0,p[0]),y:Math.min.apply(0,p[1])},max:{x:Math.max.apply(0,p[0]),y:Math.max.apply(0,p[1])}}}.apply(null,e);return c(l.min.x,l.min.y,l.max.x-l.min.x,l.max.y-l.min.y)},h=function(e,t,r,n,o,i,a,s,u){var l=1-u,c=Math.pow(l,3),f=Math.pow(l,2),h=u*u,p=h*u,d=e+2*u*(r-e)+h*(o-2*r+e),y=t+2*u*(n-t)+h*(i-2*n+t),v=r+2*u*(o-r)+h*(a-2*o+r),g=n+2*u*(i-n)+h*(s-2*i+n);return{x:c*e+3*f*u*r+3*l*u*u*o+p*a,y:c*t+3*f*u*n+3*l*u*u*i+p*s,m:{x:d,y:y},n:{x:v,y:g},start:{x:l*e+u*r,y:l*t+u*n},end:{x:l*o+u*a,y:l*i+u*s},alpha:90-180*Math.atan2(d-v,y-g)/Math.PI}},p=function(e,t,r){if(!function(e,t){return e=c(e),t=c(t),l(t,e.x,e.y)||l(t,e.x2,e.y)||l(t,e.x,e.y2)||l(t,e.x2,e.y2)||l(e,t.x,t.y)||l(e,t.x2,t.y)||l(e,t.x,t.y2)||l(e,t.x2,t.y2)||(e.x<t.x2&&e.x>t.x||t.x<e.x2&&t.x>e.x)&&(e.y<t.y2&&e.y>t.y||t.y<e.y2&&t.y>e.y)}(f(e),f(t)))return r?0:[];for(var n=~~(s.apply(0,e)/8),o=~~(s.apply(0,t)/8),i=[],a=[],p={},d=r?0:[],y=0;y<n+1;y++){var v=h.apply(0,e.concat(y/n));i.push({x:v.x,y:v.y,t:y/n})}for(y=0;y<o+1;y++){v=h.apply(0,t.concat(y/o));a.push({x:v.x,y:v.y,t:y/o})}for(y=0;y<n;y++)for(var g=0;g<o;g++){var m=i[y],b=i[y+1],w=a[g],_=a[g+1],x=Math.abs(b.x-m.x)<.001?"y":"x",S=Math.abs(_.x-w.x)<.001?"y":"x",O=u(m.x,m.y,b.x,b.y,w.x,w.y,_.x,_.y);if(O){if(p[O.x.toFixed(4)]===O.y.toFixed(4))continue;p[O.x.toFixed(4)]=O.y.toFixed(4);var P=m.t+Math.abs((O[x]-m[x])/(b[x]-m[x]))*(b.t-m.t),E=w.t+Math.abs((O[S]-w[S])/(_[S]-w[S]))*(_.t-w.t);P>=0&&P<=1&&E>=0&&E<=1&&(r?d++:d.push({x:O.x,y:O.y,t1:P,t2:E}))}}return d},d=function(e,t,r){var n,o,a,s,u,l,c,f,h,d;e=(0,i.default)(e),t=(0,i.default)(t);for(var y=r?0:[],v=0,g=e.length;v<g;v++){var m=e[v];if("M"===m[0])n=u=m[1],o=l=m[2];else{"C"===m[0]?(n=(h=[n,o].concat(m.slice(1)))[6],o=h[7]):(h=[n,o,n,o,u,l,u,l],n=u,o=l);for(var b=0,w=t.length;b<w;b++){var _=t[b];if("M"===_[0])a=c=_[1],s=f=_[2];else{"C"===_[0]?(a=(d=[a,s].concat(_.slice(1)))[6],s=d[7]):(d=[a,s,a,s,c,f,c,f],a=c,s=f);var x=p(h,d,r);if(r)y+=x;else{for(var S=0,O=x.length;S<O;S++)x[S].segment1=v,x[S].segment2=b,x[S].bez1=h,x[S].bez2=d;y=y.concat(x)}}}}}return y};t.default=function(e,t){return d(e,t)}},53563:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=1e-6;function n(e){return Math.abs(e)<r?0:e<0?-1:1}function o(e,t,r){return(r[0]-e[0])*(t[1]-e[1])==(t[0]-e[0])*(r[1]-e[1])&&Math.min(e[0],t[0])<=r[0]&&r[0]<=Math.max(e[0],t[0])&&Math.min(e[1],t[1])<=r[1]&&r[1]<=Math.max(e[1],t[1])}t.default=function(e,t,r){var i=!1,a=e.length;if(a<=2)return!1;for(var s=0;s<a;s++){var u=e[s],l=e[(s+1)%a];if(o(u,l,[t,r]))return!0;n(u[1]-r)>0!=n(l[1]-r)>0&&n(t-(r-u[1])*(u[0]-l[0])/(u[1]-l[1])-u[0])<0&&(i=!i)}return i}},99626:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.arcToCubic=void 0;var r=2*Math.PI,n=function(e,t,r,n,o,i,a){var s=e.x,u=e.y;return{x:n*(s*=t)-o*(u*=r)+i,y:o*s+n*u+a}},o=function(e,t){var r=1.5707963267948966===t?.551915024494:-1.5707963267948966===t?-.551915024494:4/3*Math.tan(t/4),n=Math.cos(e),o=Math.sin(e),i=Math.cos(e+t),a=Math.sin(e+t);return[{x:n-o*r,y:o+n*r},{x:i+a*r,y:a-i*r},{x:i,y:a}]},i=function(e,t,r,n){var o=e*r+t*n;return o>1&&(o=1),o<-1&&(o=-1),(e*n-t*r<0?-1:1)*Math.acos(o)},a=function(e){var t=e.px,a=e.py,s=e.cx,u=e.cy,l=e.rx,c=e.ry,f=e.xAxisRotation,h=void 0===f?0:f,p=e.largeArcFlag,d=void 0===p?0:p,y=e.sweepFlag,v=void 0===y?0:y,g=[];if(0===l||0===c)return[{x1:0,y1:0,x2:0,y2:0,x:s,y:u}];var m=Math.sin(h*r/360),b=Math.cos(h*r/360),w=b*(t-s)/2+m*(a-u)/2,_=-m*(t-s)/2+b*(a-u)/2;if(0===w&&0===_)return[{x1:0,y1:0,x2:0,y2:0,x:s,y:u}];l=Math.abs(l),c=Math.abs(c);var x=Math.pow(w,2)/Math.pow(l,2)+Math.pow(_,2)/Math.pow(c,2);x>1&&(l*=Math.sqrt(x),c*=Math.sqrt(x));var S=function(e,t,n,o,a,s,u,l,c,f,h,p){var d=Math.pow(a,2),y=Math.pow(s,2),v=Math.pow(h,2),g=Math.pow(p,2),m=d*y-d*g-y*v;m<0&&(m=0),m/=d*g+y*v;var b=(m=Math.sqrt(m)*(u===l?-1:1))*a/s*p,w=m*-s/a*h,_=f*b-c*w+(e+n)/2,x=c*b+f*w+(t+o)/2,S=(h-b)/a,O=(p-w)/s,P=(-h-b)/a,E=(-p-w)/s,k=i(1,0,S,O),M=i(S,O,P,E);return 0===l&&M>0&&(M-=r),1===l&&M<0&&(M+=r),[_,x,k,M]}(t,a,s,u,l,c,d,v,m,b,w,_),O=S[0],P=S[1],E=S[2],k=S[3],M=Math.abs(k)/(r/4);Math.abs(1-M)<1e-7&&(M=1);var C=Math.max(Math.ceil(M),1);k/=C;for(var j=0;j<C;j++)g.push(o(E,k)),E+=k;return g.map(function(e){var t=n(e[0],l,c,b,m,O,P),r=t.x,o=t.y,i=n(e[1],l,c,b,m,O,P),a=i.x,s=i.y,u=n(e[2],l,c,b,m,O,P);return{x1:r,y1:o,x2:a,y2:s,x:u.x,y:u.y}})};t.arcToCubic=function(e,t,r,n,o,i,s,u,l){return a({px:e,py:t,cx:u,cy:l,rx:r,ry:n,xAxisRotation:o,largeArcFlag:i,sweepFlag:s}).reduce(function(e,t){var r=t.x1,n=t.y1,o=t.x2,i=t.y2,a=t.x,s=t.y;return e.push(r,n,o,i,a,s),e},[])}},63786:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.lineToCubic=void 0,t.lineToCubic=function(e,t,r,n){return[e,t,r,n,r,n]}},94973:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.quadToCubic=void 0,t.quadToCubic=function(e,t,r,n,o,i){return[1/3*e+2/3*r,1/3*t+2/3*n,1/3*o+2/3*r,1/3*i+2/3*n,o,i]}},75879:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.segmentToCubic=void 0;var n=r(99626),o=r(94973),i=r(63786);t.segmentToCubic=function(e,t){"TQ".indexOf(e[0])<0&&(t.qx=null,t.qy=null);var r=e.slice(1),a=r[0],s=r[1];switch(e[0]){case"M":return t.x=a,t.y=s,e;case"A":return["C"].concat(n.arcToCubic.apply(0,[t.x1,t.y1].concat(e.slice(1))));case"Q":return t.qx=a,t.qy=s,["C"].concat(o.quadToCubic.apply(0,[t.x1,t.y1].concat(e.slice(1))));case"L":return["C"].concat((0,i.lineToCubic)(t.x1,t.y1,e[1],e[2]));case"H":return["C"].concat((0,i.lineToCubic)(t.x1,t.y1,e[1],t.y1));case"V":return["C"].concat((0,i.lineToCubic)(t.x1,t.y1,t.x1,e[1]));case"Z":return["C"].concat((0,i.lineToCubic)(t.x1,t.y1,t.x,t.y))}return e}},11183:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r,n,o){return o?[["M",+e+ +o,t],["l",r-2*o,0],["a",o,o,0,0,1,o,o],["l",0,n-2*o],["a",o,o,0,0,1,-o,o],["l",2*o-r,0],["a",o,o,0,0,1,-o,-o],["l",0,2*o-n],["a",o,o,0,0,1,o,-o],["z"]]:[["M",e,t],["l",r,0],["l",0,n],["l",-r,0],["z"]]}},19690:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.vertical=t.angleTo=t.direction=t.transform=t.leftScale=t.leftRotate=t.leftTranslate=void 0;var n=r(27018);function o(e,t,r){var o=[0,0,0,0,0,0,0,0,0];return n.mat3.fromTranslation(o,r),n.mat3.multiply(e,o,t)}function i(e,t,r){var o=[0,0,0,0,0,0,0,0,0];return n.mat3.fromRotation(o,r),n.mat3.multiply(e,o,t)}function a(e,t,r){var o=[0,0,0,0,0,0,0,0,0];return n.mat3.fromScaling(o,r),n.mat3.multiply(e,o,t)}function s(e,t){return e[0]*t[1]-t[0]*e[1]}t.leftTranslate=o,t.leftRotate=i,t.leftScale=a,t.transform=function(e,t){for(var r,s,u,l=e?[].concat(e):[1,0,0,0,1,0,0,0,1],c=0,f=t.length;c<f;c++){var h=t[c];switch(h[0]){case"t":o(l,l,[h[1],h[2]]);break;case"s":a(l,l,[h[1],h[2]]);break;case"r":i(l,l,h[1]);break;case"m":r=l,s=l,u=h[1],n.mat3.multiply(r,u,s)}}return l},t.direction=s,t.angleTo=function(e,t,r){var o=n.vec2.angle(e,t),i=s(e,t)>=0;return r?i?2*Math.PI-o:o:i?o:2*Math.PI-o},t.vertical=function(e,t,r){return r?(e[0]=t[1],e[1]=-1*t[0]):(e[0]=-1*t[1],e[1]=t[0]),e}},56686:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ext=t.vec3=t.vec2=t.mat3=void 0;var n=r(27018);Object.defineProperty(t,"mat3",{enumerable:!0,get:function(){return n.mat3}}),Object.defineProperty(t,"vec2",{enumerable:!0,get:function(){return n.vec2}}),Object.defineProperty(t,"vec3",{enumerable:!0,get:function(){return n.vec3}});var o=r(19690);t.ext=o},67872:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(31834),o=r(94528),i=function(){function e(e){this.type="base",this.isCategory=!1,this.isLinear=!1,this.isContinuous=!1,this.isIdentity=!1,this.values=[],this.range=[0,1],this.ticks=[],this.__cfg__=e,this.initCfg(),this.init()}return e.prototype.translate=function(e){return e},e.prototype.change=function(e){n.assign(this.__cfg__,e),this.init()},e.prototype.clone=function(){return this.constructor(this.__cfg__)},e.prototype.getTicks=function(){var e=this;return n.map(this.ticks,function(t,r){return n.isObject(t)?t:{text:e.getText(t,r),tickValue:t,value:e.scale(t)}})},e.prototype.getText=function(e,t){var r=this.formatter,o=r?r(e,t):e;return n.isNil(o)||!n.isFunction(o.toString)?"":o.toString()},e.prototype.getConfig=function(e){return this.__cfg__[e]},e.prototype.init=function(){n.assign(this,this.__cfg__),this.setDomain(),n.isEmpty(this.getConfig("ticks"))&&(this.ticks=this.calculateTicks())},e.prototype.initCfg=function(){},e.prototype.setDomain=function(){},e.prototype.calculateTicks=function(){var e=this.tickMethod,t=[];if(n.isString(e)){var r=o.getTickMethod(e);if(!r)throw new Error("There is no method to to calculate ticks!");t=r(this)}else n.isFunction(e)&&(t=e(this));return t},e.prototype.rangeMin=function(){return this.range[0]},e.prototype.rangeMax=function(){return this.range[1]},e.prototype.calcPercent=function(e,t,r){return n.isNumber(e)?(e-t)/(r-t):NaN},e.prototype.calcValue=function(e,t,r){return t+e*(r-t)},e}();t.default=i},634:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(97582),o=r(31834),i=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="cat",t.isCategory=!0,t}return n.__extends(t,e),t.prototype.buildIndexMap=function(){if(!this.translateIndexMap){this.translateIndexMap=new Map;for(var e=0;e<this.values.length;e++)this.translateIndexMap.set(this.values[e],e)}},t.prototype.translate=function(e){this.buildIndexMap();var t=this.translateIndexMap.get(e);return void 0===t&&(t=o.isNumber(e)?e:NaN),t},t.prototype.scale=function(e){var t=this.translate(e),r=this.calcPercent(t,this.min,this.max);return this.calcValue(r,this.rangeMin(),this.rangeMax())},t.prototype.invert=function(e){var t=this.max-this.min,r=this.calcPercent(e,this.rangeMin(),this.rangeMax()),n=Math.round(t*r)+this.min;return n<this.min||n>this.max?NaN:this.values[n]},t.prototype.getText=function(t){for(var r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];var a=t;return o.isNumber(t)&&!this.values.includes(t)&&(a=this.values[a]),e.prototype.getText.apply(this,n.__spreadArrays([a],r))},t.prototype.initCfg=function(){this.tickMethod="cat"},t.prototype.setDomain=function(){if(o.isNil(this.getConfig("min"))&&(this.min=0),o.isNil(this.getConfig("max"))){var e=this.values.length;this.max=e>1?e-1:e}this.translateIndexMap&&(this.translateIndexMap=void 0)},t}(r(67872).default);t.default=i},38186:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(97582),o=r(31834),i=r(52938),a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="timeCat",t}return n.__extends(t,e),t.prototype.translate=function(e){e=i.toTimeStamp(e);var t=this.values.indexOf(e);return-1===t&&(t=o.isNumber(e)&&e<this.values.length?e:NaN),t},t.prototype.getText=function(e,t){var r=this.translate(e);if(r>-1){var n=this.values[r],o=this.formatter;return n=o?o(n,t):i.timeFormat(n,this.mask)}return e},t.prototype.initCfg=function(){this.tickMethod="time-cat",this.mask="YYYY-MM-DD",this.tickCount=7},t.prototype.setDomain=function(){var t=this.values;o.each(t,function(e,r){t[r]=i.toTimeStamp(e)}),t.sort(function(e,t){return e-t}),e.prototype.setDomain.call(this)},t}(r(634).default);t.default=a},52318:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(97582),o=r(31834),i=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isContinuous=!0,t}return n.__extends(t,e),t.prototype.scale=function(e){if(o.isNil(e))return NaN;var t=this.rangeMin(),r=this.rangeMax();return this.max===this.min?t:t+this.getScalePercent(e)*(r-t)},t.prototype.init=function(){e.prototype.init.call(this);var t=this.ticks,r=o.head(t),n=o.last(t);r<this.min&&(this.min=r),n>this.max&&(this.max=n),o.isNil(this.minLimit)||(this.min=r),o.isNil(this.maxLimit)||(this.max=n)},t.prototype.setDomain=function(){var e=o.getRange(this.values),t=e.min,r=e.max;o.isNil(this.min)&&(this.min=t),o.isNil(this.max)&&(this.max=r),this.min>this.max&&(this.min=t,this.max=r)},t.prototype.calculateTicks=function(){var t=this,r=e.prototype.calculateTicks.call(this);return this.nice||(r=o.filter(r,function(e){return e>=t.min&&e<=t.max})),r},t.prototype.getScalePercent=function(e){var t=this.max,r=this.min;return(e-r)/(t-r)},t.prototype.getInvertPercent=function(e){return(e-this.rangeMin())/(this.rangeMax()-this.rangeMin())},t}(r(67872).default);t.default=i},80910:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(97582),o=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="linear",t.isLinear=!0,t}return n.__extends(t,e),t.prototype.invert=function(e){var t=this.getInvertPercent(e);return this.min+t*(this.max-this.min)},t.prototype.initCfg=function(){this.tickMethod="wilkinson-extended",this.nice=!1},t}(r(52318).default);t.default=o},9349:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(97582),o=r(94841),i=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="log",t}return n.__extends(t,e),t.prototype.invert=function(e){var t,r=this.base,n=o.log(r,this.max),i=this.rangeMin(),a=this.rangeMax()-i,s=this.positiveMin;if(s){if(0===e)return 0;var u=1/(n-(t=o.log(r,s/r)))*a;if(e<u)return e/u*s}else t=o.log(r,this.min);var l=(e-i)/a*(n-t)+t;return Math.pow(r,l)},t.prototype.initCfg=function(){this.tickMethod="log",this.base=10,this.tickCount=6,this.nice=!0},t.prototype.setDomain=function(){e.prototype.setDomain.call(this);var t=this.min;if(t<0)throw new Error("When you use log scale, the minimum value must be greater than zero!");0===t&&(this.positiveMin=o.getLogPositiveMin(this.values,this.base,this.max))},t.prototype.getScalePercent=function(e){var t=this.max,r=this.min;if(t===r)return 0;if(e<=0)return 0;var n=this.base,i=this.positiveMin;return i&&(r=1*i/n),e<i?e/i/(o.log(n,t)-o.log(n,r)):(o.log(n,e)-o.log(n,r))/(o.log(n,t)-o.log(n,r))},t}(r(52318).default);t.default=i},21133:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(97582),o=r(94841),i=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="pow",t}return n.__extends(t,e),t.prototype.invert=function(e){var t=this.getInvertPercent(e),r=this.exponent,n=o.calBase(r,this.max),i=o.calBase(r,this.min),a=t*(n-i)+i,s=a>=0?1:-1;return Math.pow(a,r)*s},t.prototype.initCfg=function(){this.tickMethod="pow",this.exponent=2,this.tickCount=5,this.nice=!0},t.prototype.getScalePercent=function(e){var t=this.max,r=this.min;if(t===r)return 0;var n=this.exponent;return(o.calBase(n,e)-o.calBase(n,r))/(o.calBase(n,t)-o.calBase(n,r))},t}(r(52318).default);t.default=i},22816:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(97582),o=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="quantile",t}return n.__extends(t,e),t.prototype.initCfg=function(){this.tickMethod="quantile",this.tickCount=5,this.nice=!0},t}(r(52034).default);t.default=o},52034:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(97582),o=r(31834),i=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="quantize",t}return n.__extends(t,e),t.prototype.invert=function(e){var t=this.ticks,r=t.length,n=this.getInvertPercent(e),i=Math.floor(n*(r-1));if(i>=r-1)return o.last(t);if(i<0)return o.head(t);var a=t[i],s=i/(r-1);return a+(n-s)/((i+1)/(r-1)-s)*(t[i+1]-a)},t.prototype.initCfg=function(){this.tickMethod="r-pretty",this.tickCount=5,this.nice=!0},t.prototype.calculateTicks=function(){var t=e.prototype.calculateTicks.call(this);return this.nice||(o.last(t)!==this.max&&t.push(this.max),o.head(t)!==this.min&&t.unshift(this.min)),t},t.prototype.getScalePercent=function(e){var t=this.ticks;if(e<o.head(t))return 0;if(e>o.last(t))return 1;var r=0;return o.each(t,function(t,n){if(!(e>=t))return!1;r=n}),r/(t.length-1)},t}(r(52318).default);t.default=i},516:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(97582),o=r(31834),i=r(52938),a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="time",t}return n.__extends(t,e),t.prototype.getText=function(e,t){var r=this.translate(e),n=this.formatter;return n?n(r,t):i.timeFormat(r,this.mask)},t.prototype.scale=function(t){var r=t;return(o.isString(r)||o.isDate(r))&&(r=this.translate(r)),e.prototype.scale.call(this,r)},t.prototype.translate=function(e){return i.toTimeStamp(e)},t.prototype.initCfg=function(){this.tickMethod="time-pretty",this.mask="YYYY-MM-DD",this.tickCount=7,this.nice=!1},t.prototype.setDomain=function(){var e=this.values,t=this.getConfig("min"),r=this.getConfig("max");if(o.isNil(t)&&o.isNumber(t)||(this.min=this.translate(this.min)),o.isNil(r)&&o.isNumber(r)||(this.max=this.translate(this.max)),e&&e.length){var n=[],a=1/0,s=a,u=0;o.each(e,function(e){var t=i.toTimeStamp(e);if(isNaN(t))throw new TypeError("Invalid Time: "+e+" in time scale!");a>t?(s=a,a=t):s>t&&(s=t),u<t&&(u=t),n.push(t)}),e.length>1&&(this.minTickInterval=s-a),o.isNil(t)&&(this.min=a),o.isNil(r)&&(this.max=u)}},t}(r(80910).default);t.default=a},66200:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerScale=t.getScale=t.Scale=void 0;var n=r(67872);t.Scale=n.default;var o={};function i(e){return o[e]}t.getScale=i,t.registerScale=function(e,t){if(i(e))throw new Error("type '"+e+"' existed.");o[e]=t}},93753:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(97582),o=r(31834),i=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="identity",t.isIdentity=!0,t}return n.__extends(t,e),t.prototype.calculateTicks=function(){return this.values},t.prototype.scale=function(e){return this.values[0]!==e&&o.isNumber(e)?e:this.range[0]},t.prototype.invert=function(e){var t=this.range;return e<t[0]||e>t[1]?NaN:this.values[0]},t}(r(67872).default);t.default=i},91994:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerTickMethod=t.getTickMethod=t.registerScale=t.getScale=t.Scale=t.Quantize=t.Quantile=t.TimeCat=t.Time=t.Pow=t.Log=t.Linear=t.Identity=t.Category=void 0;var n=r(67872);t.Scale=n.default;var o=r(634);t.Category=o.default;var i=r(38186);t.TimeCat=i.default;var a=r(80910);t.Linear=a.default;var s=r(9349);t.Log=s.default;var u=r(21133);t.Pow=u.default;var l=r(516);t.Time=l.default;var c=r(52034);t.Quantize=c.default;var f=r(22816);t.Quantile=f.default;var h=r(66200);Object.defineProperty(t,"getScale",{enumerable:!0,get:function(){return h.getScale}}),Object.defineProperty(t,"registerScale",{enumerable:!0,get:function(){return h.registerScale}});var p=r(93753);t.Identity=p.default;var d=r(25927);Object.defineProperty(t,"getTickMethod",{enumerable:!0,get:function(){return d.getTickMethod}}),Object.defineProperty(t,"registerTickMethod",{enumerable:!0,get:function(){return d.registerTickMethod}}),h.registerScale("cat",o.default),h.registerScale("category",o.default),h.registerScale("identity",p.default),h.registerScale("linear",a.default),h.registerScale("log",s.default),h.registerScale("pow",u.default),h.registerScale("time",l.default),h.registerScale("timeCat",i.default),h.registerScale("quantize",c.default),h.registerScale("quantile",f.default)},14091:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(31834);t.default=function(e){var t=e.values,r=e.tickInterval,o=e.tickCount,i=e.showLast;if(n.isNumber(r)){var a=n.filter(t,function(e,t){return t%r==0}),s=n.last(t);return i&&n.last(a)!==s&&a.push(s),a}var u=t.length,l=e.min,c=e.max;if(n.isNil(l)&&(l=0),n.isNil(c)&&(c=t.length-1),!n.isNumber(o)||o>=u)return t.slice(l,c+1);if(o<=0||c<=0)return[];for(var f=1===o?u:Math.floor(u/(o-1)),h=[],p=l,d=0;d<o&&!(p>=c);d++)p=Math.min(l+d*f,c),d===o-1&&i?h.push(t[c]):h.push(t[p]);return h}},99164:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(31834),o=r(76951),i=r(66189),a=r(50273);t.default=function(e){var t=e.min,r=e.max,s=e.tickInterval,u=e.minLimit,l=e.maxLimit,c=o.default(e);return n.isNil(u)&&n.isNil(l)?s?i.default(t,r,s).ticks:c:a.default(e,n.head(c),n.last(c))}},25927:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerTickMethod=t.getTickMethod=void 0;var n=r(14091),o=r(99164),i=r(87159),a=r(57795),s=r(98323),u=r(85809),l=r(79821),c=r(94528);Object.defineProperty(t,"getTickMethod",{enumerable:!0,get:function(){return c.getTickMethod}}),Object.defineProperty(t,"registerTickMethod",{enumerable:!0,get:function(){return c.registerTickMethod}});var f=r(69137),h=r(65744),p=r(18228);c.registerTickMethod("cat",n.default),c.registerTickMethod("time-cat",h.default),c.registerTickMethod("wilkinson-extended",i.default),c.registerTickMethod("r-pretty",l.default),c.registerTickMethod("time",f.default),c.registerTickMethod("time-pretty",p.default),c.registerTickMethod("log",a.default),c.registerTickMethod("pow",s.default),c.registerTickMethod("quantile",u.default),c.registerTickMethod("d3-linear",o.default)},87159:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(31834),o=r(36068),i=r(66189),a=r(50273);t.default=function(e){var t=e.min,r=e.max,s=e.tickCount,u=e.nice,l=e.tickInterval,c=e.minLimit,f=e.maxLimit,h=o.default(t,r,s,u).ticks;return n.isNil(c)&&n.isNil(f)?l?i.default(t,r,l).ticks:h:a.default(e,n.head(h),n.last(h))}},57795:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(94841);t.default=function(e){var t,r=e.base,o=e.tickCount,i=e.min,a=e.max,s=e.values,u=n.log(r,a);if(i>0)t=Math.floor(n.log(r,i));else{var l=n.getLogPositiveMin(s,r,a);t=Math.floor(n.log(r,l))}for(var c=u-t,f=Math.ceil(c/o),h=[],p=t;p<u+f;p+=f)h.push(Math.pow(r,p));return i<=0&&h.unshift(0),h}},98323:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(94841),o=r(12710);t.default=function(e){var t=e.exponent,r=e.tickCount,i=Math.ceil(n.calBase(t,e.max)),a=Math.floor(n.calBase(t,e.min));return o.default(a,i,r).ticks.map(function(e){var r=e>=0?1:-1;return Math.pow(e,t)*r})}},85809:function(e,t){"use strict";function r(e,t){var r=e.length*t;return 1===t?e[e.length-1]:0===t?e[0]:r%1!=0?e[Math.ceil(r)-1]:e.length%2==0?(e[r-1]+e[r])/2:e[r]}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.tickCount,n=e.values;if(!n||!n.length)return[];for(var o=n.slice().sort(function(e,t){return e-t}),i=[],a=0;a<t;a++){var s=a/(t-1);i.push(r(o,s))}return i}},79821:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(31834),o=r(66189),i=r(12710),a=r(50273);t.default=function(e){var t=e.min,r=e.max,s=e.tickCount,u=e.tickInterval,l=e.minLimit,c=e.maxLimit,f=i.default(t,r,s).ticks;return n.isNil(l)&&n.isNil(c)?u?o.default(t,r,u).ticks:f:a.default(e,n.head(f),n.last(f))}},94528:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerTickMethod=t.getTickMethod=void 0;var r={};t.getTickMethod=function(e){return r[e]},t.registerTickMethod=function(e,t){r[e]=t}},65744:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(97582),o=r(14091);t.default=function(e){return o.default(n.__assign({showLast:!0},e))}},18228:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(52938);function o(e){return new Date(e).getFullYear()}function i(e){return new Date(e,0,1).getTime()}function a(e){return new Date(e).getMonth()}function s(e,t){return new Date(e,t,1).getTime()}t.default=function(e){var t=e.min,r=e.max,u=e.minTickInterval,l=e.tickCount,c=e.tickInterval,f=[];c||(c=(r-t)/l,u&&c<u&&(c=u)),c=Math.max(Math.floor((r-t)/(Math.pow(2,12)-1)),c);var h=o(t);if(c>n.YEAR)for(var p=o(r),d=Math.ceil(c/n.YEAR),y=h;y<=p+d;y+=d)f.push(i(y));else if(c>n.MONTH){var v=Math.ceil(c/n.MONTH),g=a(t),m=function(e,t){var r=o(e),n=o(t),i=a(e);return 12*(n-r)+(a(t)-i)%12}(t,r);for(y=0;y<=m+v;y+=v)f.push(s(h,y+g))}else if(c>n.DAY){var b=(O=new Date(t)).getFullYear(),w=O.getMonth(),_=O.getDate(),x=Math.ceil(c/n.DAY),S=function(e,t){return Math.ceil((t-e)/n.DAY)}(t,r);for(y=0;y<S+x;y+=x)f.push(new Date(b,w,_+y).getTime())}else if(c>n.HOUR){b=(O=new Date(t)).getFullYear(),w=O.getMonth(),x=O.getDate();var O,P=O.getHours(),E=Math.ceil(c/n.HOUR),k=function(e,t){return Math.ceil((t-e)/n.HOUR)}(t,r);for(y=0;y<=k+E;y+=E)f.push(new Date(b,w,x,P+y).getTime())}else if(c>n.MINUTE){var M=function(e,t){return Math.ceil((t-e)/6e4)}(t,r),C=Math.ceil(c/n.MINUTE);for(y=0;y<=M+C;y+=C)f.push(t+y*n.MINUTE)}else{var j=c;j<n.SECOND&&(j=n.SECOND);var T=Math.floor(t/n.SECOND)*n.SECOND,A=Math.ceil((r-t)/n.SECOND),I=Math.ceil(j/n.SECOND);for(y=0;y<A+I;y+=I)f.push(T+y*n.SECOND)}return f.length>=512&&console.warn("Notice: current ticks length("+f.length+') >= 512, may cause performance issues, even out of memory. Because of the configure "tickInterval"(in milliseconds, current is '+c+") is too small, increase the value to solve the problem!"),f}},69137:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(52938);t.default=function(e){var t=e.min,r=e.max,o=e.minTickInterval,i=e.tickInterval,a=e.tickCount;if(i)a=Math.ceil((r-t)/i);else{var s=(r-t)/(i=n.getTickInterval(t,r,a)[1])/a;s>1&&(i*=Math.ceil(s)),o&&i<o&&(i=o)}i=Math.max(Math.floor((r-t)/(Math.pow(2,12)-1)),i);for(var u=[],l=t;l<r+i;l+=i)u.push(l);return u}},47023:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(31834);t.default=function(e){return function(t,r,o,i){for(var a=n.isNil(o)?0:o,s=n.isNil(i)?t.length:i;a<s;){var u=a+s>>>1;e(t[u])>r?s=u:a=u+1}return a}}},76951:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.D3Linear=void 0,t.default=function(e){var t=e.min,r=e.max,n=e.nice,o=e.tickCount,a=new i;return a.domain([t,r]),n&&a.nice(o),a.ticks(o)};var r=Math.sqrt(50),n=Math.sqrt(10),o=Math.sqrt(2),i=function(){function e(){this._domain=[0,1]}return e.prototype.domain=function(e){return e?(this._domain=Array.from(e,Number),this):this._domain.slice()},e.prototype.nice=function(e){var t,r;void 0===e&&(e=5);var n,o=this._domain.slice(),i=0,s=this._domain.length-1,u=this._domain[i],l=this._domain[s];return l<u&&(u=(t=[l,u])[0],l=t[1],i=(r=[s,i])[0],s=r[1]),(n=a(u,l,e))>0?n=a(u=Math.floor(u/n)*n,l=Math.ceil(l/n)*n,e):n<0&&(n=a(u=Math.ceil(u*n)/n,l=Math.floor(l*n)/n,e)),n>0?(o[i]=Math.floor(u/n)*n,o[s]=Math.ceil(l/n)*n,this.domain(o)):n<0&&(o[i]=Math.ceil(u*n)/n,o[s]=Math.floor(l*n)/n,this.domain(o)),this},e.prototype.ticks=function(e){return void 0===e&&(e=5),function(e,t,r){var n,o,i,s,u=-1;if(r=+r,(e=+e)==(t=+t)&&r>0)return[e];(n=t<e)&&(o=e,e=t,t=o);if(0===(s=a(e,t,r))||!isFinite(s))return[];if(s>0)for(e=Math.ceil(e/s),t=Math.floor(t/s),i=new Array(o=Math.ceil(t-e+1));++u<o;)i[u]=(e+u)*s;else for(e=Math.floor(e*s),t=Math.ceil(t*s),i=new Array(o=Math.ceil(e-t+1));++u<o;)i[u]=(e-u)/s;n&&i.reverse();return i}(this._domain[0],this._domain[this._domain.length-1],e||5)},e}();function a(e,t,i){var a=(t-e)/Math.max(0,i),s=Math.floor(Math.log(a)/Math.LN10),u=a/Math.pow(10,s);return s>=0?(u>=r?10:u>=n?5:u>=o?2:1)*Math.pow(10,s):-Math.pow(10,-s)/(u>=r?10:u>=n?5:u>=o?2:1)}t.D3Linear=i},36068:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ALL_Q=t.DEFAULT_Q=void 0;var n=r(31834),o=r(3878);t.DEFAULT_Q=[1,5,2,2.5,4,3],t.ALL_Q=[1,5,2,2.5,4,3,1.5,7,6,8,9];var i=100*Number.EPSILON;function a(e,t,r,o,a,s){var u=n.size(t),l=n.indexOf(t,e),c=0,f=function(e,t){return(e%t+t)%t}(o,s);return(f<i||s-f<i)&&o<=0&&a>=0&&(c=1),1-l/(u-1)-r+c}function s(e,t,r){var o=n.size(t);return 1-n.indexOf(t,e)/(o-1)-r+1}function u(e,t,r,n,o,i){var a=(e-1)/(i-o),s=(t-1)/(Math.max(i,n)-Math.min(r,o));return 2-Math.max(a/s,s/a)}function l(e,t){return e>=t?2-(e-1)/(t-1):1}function c(e,t,r,n){var o=t-e;return 1-.5*(Math.pow(t-n,2)+Math.pow(e-r,2))/Math.pow(.1*o,2)}function f(e,t,r){var n=t-e;if(r>n){var o=(r-n)/2;return 1-Math.pow(o,2)/Math.pow(.1*n,2)}return 1}t.default=function(e,r,i,h,p,d){void 0===i&&(i=5),void 0===h&&(h=!0),void 0===p&&(p=t.DEFAULT_Q),void 0===d&&(d=[.25,.2,.5,.05]);var y=i<0?0:Math.round(i);if(Number.isNaN(e)||Number.isNaN(r)||"number"!=typeof e||"number"!=typeof r||!y)return{min:0,max:0,ticks:[]};if(r-e<1e-15||1===y)return{min:e,max:r,ticks:[e]};if(r-e>1e148){var v=(r-e)/(j=i||5);return{min:e,max:r,ticks:Array(j).fill(null).map(function(t,r){return o.prettyNumber(e+v*r)})}}for(var g={score:-2,lmin:0,lmax:0,lstep:0},m=1;m<1/0;){for(var b=0;b<p.length;b+=1){var w=p[b],_=s(w,p,m);if(d[0]*_+d[1]+d[2]+d[3]<g.score){m=1/0;break}for(var x=2;x<1/0;){var S=l(x,y);if(d[0]*_+d[1]+d[2]*S+d[3]<g.score)break;for(var O=(r-e)/(x+1)/m/w,P=Math.ceil(Math.log10(O));P<1/0;){var E=m*w*Math.pow(10,P),k=f(e,r,E*(x-1));if(d[0]*_+d[1]*k+d[2]*S+d[3]<g.score)break;var M=Math.floor(r/E)*m-(x-1)*m,C=Math.ceil(e/E)*m;if(M<=C)for(var j=C-M,T=0;T<=j;T+=1){var A=(M+T)*(E/m),I=A+E*(x-1),R=E,L=a(w,p,m,A,I,R),N=c(e,r,A,I),D=u(x,y,e,r,A,I),B=d[0]*L+d[1]*N+d[2]*D+1*d[3];B>g.score&&(!h||A<=e&&I>=r)&&(g.lmin=A,g.lmax=I,g.lstep=R,g.score=B)}P+=1}x+=1}}m+=1}var F=o.prettyNumber(g.lmax),G=o.prettyNumber(g.lmin),z=o.prettyNumber(g.lstep),U=Math.floor(function(e){return Math.round(1e12*e)/1e12}((F-G)/z))+1,V=new Array(U);for(V[0]=o.prettyNumber(G),b=1;b<U;b++)V[b]=o.prettyNumber(V[b-1]+z);return{min:Math.min(e,n.head(V)),max:Math.max(r,n.last(V)),ticks:V}}},66189:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(31834);function o(e,t,r){return("ceil"===r?Math.ceil(e/t):"floor"===r?Math.floor(e/t):Math.round(e/t))*t}t.default=function(e,t,r){var i=o(e,r,"floor"),a=o(t,r,"ceil");i=n.fixedBase(i,r),a=n.fixedBase(a,r);for(var s=[],u=Math.max((a-i)/(Math.pow(2,12)-1),r),l=i;l<=a;l+=u){var c=n.fixedBase(l,u);s.push(c)}return{min:i,max:a,ticks:s}}},94841:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.precisionAdd=t.getLogPositiveMin=t.log=t.calBase=void 0;var n=r(31834);function o(e){var t=e.toString().split(/[eE]/),r=(t[0].split(".")[1]||"").length-+(t[1]||0);return r>0?r:0}t.calBase=function(e,t){var r=Math.E;return t>=0?Math.pow(r,Math.log(t)/e):-1*Math.pow(r,Math.log(-t)/e)},t.log=function(e,t){return 1===e?1:Math.log(t)/Math.log(e)},t.getLogPositiveMin=function(e,t,r){n.isNil(r)&&(r=Math.max.apply(null,e));var o=r;return n.each(e,function(e){e>0&&e<o&&(o=e)}),o===r&&(o=r/t),o>1&&(o=1),o},t.precisionAdd=function(e,t){var r=o(e),n=o(t),i=Math.pow(10,Math.max(r,n));return(e*i+t*i)/i}},3878:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.prettyNumber=void 0,t.prettyNumber=function(e){return Math.abs(e)<1e-15?e:parseFloat(e.toFixed(15))}},12710:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3878);t.default=function(e,t,r){if(void 0===r&&(r=5),e===t)return{max:t,min:e,ticks:[e]};var o=r<0?0:Math.round(r);if(0===o)return{max:t,min:e,ticks:[]};var i=(t-e)/o,a=Math.pow(10,Math.floor(Math.log10(i))),s=a;2*a-i<1.5*(i-s)&&5*a-i<2.75*(i-(s=2*a))&&10*a-i<1.5*(i-(s=5*a))&&(s=10*a);for(var u=Math.ceil(t/s),l=Math.floor(e/s),c=Math.max(u*s,t),f=Math.min(l*s,e),h=Math.floor((c-f)/s)+1,p=new Array(h),d=0;d<h;d++)p[d]=n.prettyNumber(f+d*s);return{min:f,max:c,ticks:p}}},50273:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(31834);t.default=function(e,t,r){var o,i=e.minLimit,a=e.maxLimit,s=e.min,u=e.max,l=e.tickCount,c=void 0===l?5:l,f=n.isNil(i)?n.isNil(t)?s:t:i,h=n.isNil(a)?n.isNil(r)?u:r:a;if(f>h&&(h=(o=[f,h])[0],f=o[1]),c<=2)return[f,h];for(var p=(h-f)/(c-1),d=[],y=0;y<c;y++)d.push(f+p*y);return d}},52938:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getTickInterval=t.YEAR=t.MONTH=t.DAY=t.HOUR=t.MINUTE=t.SECOND=t.toTimeStamp=t.timeFormat=void 0;var n=r(31834),o=r(95676),i=r(95676),a=r(47023),s="format";t.timeFormat=function(e,t){return(i[s]||o.default[s])(e,t)},t.toTimeStamp=function(e){return n.isString(e)&&(e=e.indexOf("T")>0?new Date(e).getTime():new Date(e.replace(/-/gi,"/")).getTime()),n.isDate(e)&&(e=e.getTime()),e};t.SECOND=1e3;t.MINUTE=6e4;t.HOUR=36e5;var u=864e5;t.DAY=u;t.MONTH=26784e5;t.YEAR=31536e6;var l=[["HH:mm:ss",1e3],["HH:mm:ss",1e4],["HH:mm:ss",3e4],["HH:mm",6e4],["HH:mm",6e5],["HH:mm",18e5],["HH",36e5],["HH",216e5],["HH",432e5],["YYYY-MM-DD",u],["YYYY-MM-DD",4*u],["YYYY-WW",7*u],["YYYY-MM",26784e5],["YYYY-MM",107136e5],["YYYY-MM",160704e5],["YYYY",32832e6]];t.getTickInterval=function(e,t,r){var o=(t-e)/r,i=a.default(function(e){return e[1]})(l,o)-1,s=l[i];return i<0?s=l[0]:i>=l.length&&(s=n.last(l)),s}},8178:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(10014),o=r(33259);t.default=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var r=e[0],i=1;i<e.length;i++){var a=e[i];o.default(a)&&(a=a.prototype),n.default(r.prototype,a)}}},69855:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){this.map={}}return e.prototype.has=function(e){return void 0!==this.map[e]},e.prototype.get=function(e,t){var r=this.map[e];return void 0===r?t:r},e.prototype.set=function(e,t){this.map[e]=t},e.prototype.clear=function(){this.map={}},e.prototype.delete=function(e){delete this.map[e]},e.prototype.size=function(){return Object.keys(this.map).length},e}();t.default=r},50076:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e,t,r){return e<t?t:e>r?r:e}},27866:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout)(e)}},37441:function(e,t,r){"use strict";function n(e){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0});var o=r(29021);t.default=function e(t){if("object"!==n(t)||null===t)return t;var r;if(o.default(t)){r=[];for(var i=0,a=t.length;i<a;i++)"object"===n(t[i])&&null!=t[i]?r[i]=e(t[i]):r[i]=t[i]}else for(var s in r={},t)"object"===n(t[s])&&null!=t[s]?r[s]=e(t[s]):r[s]=t[s];return r}},79114:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(69104);t.default=function(e,t){return!!n.default(e)&&e.indexOf(t)>-1}},95323:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r){var n;return function(){var o=this,i=arguments,a=r&&!n;clearTimeout(n),n=setTimeout(function(){n=null,r||e.apply(o,i)},t),a&&e.apply(o,i)}}},5441:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(29021),o=r(18942),i=5;function a(e,t,r,s){for(var u in r=r||0,s=s||i,t)if(t.hasOwnProperty(u)){var l=t[u];null!==l&&o.default(l)?(o.default(e[u])||(e[u]={}),r<s?a(e[u],l,r+1,s):e[u]=t[u]):n.default(l)?(e[u]=[],e[u]=e[u].concat(l)):void 0!==l&&(e[u]=l)}}t.default=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];for(var n=0;n<t.length;n+=1)a(e,t[n]);return e}},79627:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(22330),o=r(79114);t.default=function(e,t){return void 0===t&&(t=[]),n.default(e,function(e){return!o.default(t,e)})}},9070:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(29021),o=r(72886);t.default=function(e,t){if(e)if(n.default(e))for(var r=0,i=e.length;r<i&&!1!==t(e[r],r);r++);else if(o.default(e))for(var a in e)if(e.hasOwnProperty(a)&&!1===t(e[a],a))break}},44168:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(29021),o=r(99034);t.default=function(e,t){return!(!n.default(e)&&!o.default(e))&&e[e.length-1]===t}},93744:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e,t){for(var r=0;r<e.length;r++)if(!t(e[r],r))return!1;return!0}},60865:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(10014),o=r(33259);t.default=function(e,t,r,i){o.default(t)||(r=t,t=e,e=function(){});var a=Object.create?function(e,t){return Object.create(e,{constructor:{value:t}})}:function(e,t){function r(){}r.prototype=e;var n=new r;return n.constructor=t,n},s=a(t.prototype,e);return e.prototype=n.default(s,e.prototype),e.superclass=a(t.prototype,t),n.default(s,r),n.default(e,i),e}},22330:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(69104);t.default=function(e,t){if(!n.default(e))return e;for(var r=[],o=0;o<e.length;o++){var i=e[o];t(i,o)&&r.push(i)}return r}},82301:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r){void 0===r&&(r=0);for(var n=r;n<e.length;n++)if(t(e[n],n))return n;return-1}},19776:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(33259),o=r(63893),i=r(29021),a=r(18942);t.default=function(e,t){if(!i.default(e))return null;var r;if(n.default(t)&&(r=t),a.default(t)&&(r=function(e){return o.default(e,t)}),r)for(var s=0;s<e.length;s+=1)if(r(e[s]))return e[s];return null}},31490:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(54184),o=r(29021);t.default=function(e,t){for(var r=null,i=0;i<e.length;i++){var a=e[i][t];if(!n.default(a)){r=o.default(a)?a[0]:a;break}}return r}},38026:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e,t){var r=t.toString(),n=r.indexOf(".");if(-1===n)return Math.round(e);var o=r.substr(n+1).length;return o>20&&(o=20),parseFloat(e.toFixed(o))}},60089:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(29021);t.default=function e(t,r){if(void 0===r&&(r=[]),n.default(t))for(var o=0;o<t.length;o+=1)e(t[o],r);else r.push(t);return r}},17513:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(29021);t.default=function(e){if(!n.default(e))return[];for(var t=[],r=0;r<e.length;r++)t=t.concat(e[r]);return t}},38117:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(9070);t.default=n.default},79070:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(99034),o=r(90344),i=r(47696);t.default=function(e,t,r,a){void 0===a&&(a="...");var s,u,l=i.default(a,r),c=n.default(e)?e:o.default(e),f=t,h=[];if(i.default(e,r)<=t)return e;for(;s=c.substr(0,16),!((u=i.default(s,r))+l>f&&u>f);)if(h.push(s),f-=u,!(c=c.substr(16)))return h.join("");for(;s=c.substr(0,1),!((u=i.default(s,r))+l>f);)if(h.push(s),f-=u,!(c=c.substr(1)))return h.join("");return""+h.join("")+a}},18008:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(29021),o=r(59625),i=r(95667);t.default=function(e){var t=e.filter(function(e){return!isNaN(e)});if(!t.length)return{min:0,max:0};if(n.default(e[0])){for(var r=[],a=0;a<e.length;a++)r=r.concat(e[a]);t=r}var s=o.default(t);return{min:i.default(t),max:s}}},64618:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={}.toString;t.default=function(e){return r.call(e).replace(/^\[object /,"").replace(/]$/,"")}},7441:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return e["_wrap_"+t]}},66908:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(99034);t.default=function(e,t,r){for(var o=0,i=n.default(t)?t.split("."):t;e&&o<i.length;)e=e[i[o++]];return void 0===e||o<i.length?r:e}},81154:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(29021),o=r(33259),i=Object.prototype.hasOwnProperty;t.default=function(e,t){if(!t||!n.default(e))return{};for(var r,a={},s=o.default(t)?t:function(e){return e[t]},u=0;u<e.length;u++){var l=e[u];r=s(l),i.call(a,r)?a[r].push(l):a[r]=[l]}return a}},34135:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(29021),o=r(33259),i=r(81154);t.default=function(e,t){if(!t)return{0:e};if(!o.default(t)){var r=n.default(t)?t:t.replace(/\s+/g,"").split("*");t=function(e){for(var t="_",n=0,o=r.length;n<o;n++)t+=e[r[n]]&&e[r[n]].toString();return t}}return i.default(e,t)}},48347:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(34135);t.default=function(e,t){if(!t)return[e];var r=n.default(e,t),o=[];for(var i in r)o.push(r[i]);return o}},70396:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(76942);t.default=n.default},41074:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(79114),o=r(26659);t.default=function(e,t){return n.default(o.default(e),t)}},76942:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return e.hasOwnProperty(t)}},62848:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(69104);t.default=function(e){if(n.default(e))return e[0]}},50151:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e}},48418:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(69104);t.default=function(e,t){if(!n.default(e))return-1;var r=Array.prototype.indexOf;if(r)return r.call(e,t);for(var o=-1,i=0;i<e.length;i++)if(e[i]===t){o=i;break}return o}},31834:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(79114);Object.defineProperty(t,"contains",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(t,"includes",{enumerable:!0,get:function(){return n.default}});var o=r(79627);Object.defineProperty(t,"difference",{enumerable:!0,get:function(){return o.default}});var i=r(19776);Object.defineProperty(t,"find",{enumerable:!0,get:function(){return i.default}});var a=r(82301);Object.defineProperty(t,"findIndex",{enumerable:!0,get:function(){return a.default}});var s=r(31490);Object.defineProperty(t,"firstValue",{enumerable:!0,get:function(){return s.default}});var u=r(17513);Object.defineProperty(t,"flatten",{enumerable:!0,get:function(){return u.default}});var l=r(60089);Object.defineProperty(t,"flattenDeep",{enumerable:!0,get:function(){return l.default}});var c=r(18008);Object.defineProperty(t,"getRange",{enumerable:!0,get:function(){return c.default}});var f=r(36710);Object.defineProperty(t,"pull",{enumerable:!0,get:function(){return f.default}});var h=r(97683);Object.defineProperty(t,"pullAt",{enumerable:!0,get:function(){return h.default}});var p=r(36237);Object.defineProperty(t,"reduce",{enumerable:!0,get:function(){return p.default}});var d=r(86790);Object.defineProperty(t,"remove",{enumerable:!0,get:function(){return d.default}});var y=r(74241);Object.defineProperty(t,"sortBy",{enumerable:!0,get:function(){return y.default}});var v=r(26622);Object.defineProperty(t,"union",{enumerable:!0,get:function(){return v.default}});var g=r(67919);Object.defineProperty(t,"uniq",{enumerable:!0,get:function(){return g.default}});var m=r(47328);Object.defineProperty(t,"valuesOfKey",{enumerable:!0,get:function(){return m.default}});var b=r(62848);Object.defineProperty(t,"head",{enumerable:!0,get:function(){return b.default}});var w=r(71049);Object.defineProperty(t,"last",{enumerable:!0,get:function(){return w.default}});var _=r(1828);Object.defineProperty(t,"startsWith",{enumerable:!0,get:function(){return _.default}});var x=r(44168);Object.defineProperty(t,"endsWith",{enumerable:!0,get:function(){return x.default}});var S=r(22330);Object.defineProperty(t,"filter",{enumerable:!0,get:function(){return S.default}});var O=r(93744);Object.defineProperty(t,"every",{enumerable:!0,get:function(){return O.default}});var P=r(18830);Object.defineProperty(t,"some",{enumerable:!0,get:function(){return P.default}});var E=r(48347);Object.defineProperty(t,"group",{enumerable:!0,get:function(){return E.default}});var k=r(81154);Object.defineProperty(t,"groupBy",{enumerable:!0,get:function(){return k.default}});var M=r(34135);Object.defineProperty(t,"groupToMap",{enumerable:!0,get:function(){return M.default}});var C=r(7441);Object.defineProperty(t,"getWrapBehavior",{enumerable:!0,get:function(){return C.default}});var j=r(14635);Object.defineProperty(t,"wrapBehavior",{enumerable:!0,get:function(){return j.default}});var T=r(25651);Object.defineProperty(t,"number2color",{enumerable:!0,get:function(){return T.default}});var A=r(18359);Object.defineProperty(t,"parseRadius",{enumerable:!0,get:function(){return A.default}});var I=r(50076);Object.defineProperty(t,"clamp",{enumerable:!0,get:function(){return I.default}});var R=r(38026);Object.defineProperty(t,"fixedBase",{enumerable:!0,get:function(){return R.default}});var L=r(63574);Object.defineProperty(t,"isDecimal",{enumerable:!0,get:function(){return L.default}});var N=r(17037);Object.defineProperty(t,"isEven",{enumerable:!0,get:function(){return N.default}});var D=r(45168);Object.defineProperty(t,"isInteger",{enumerable:!0,get:function(){return D.default}});var B=r(78474);Object.defineProperty(t,"isNegative",{enumerable:!0,get:function(){return B.default}});var F=r(36373);Object.defineProperty(t,"isNumberEqual",{enumerable:!0,get:function(){return F.default}});var G=r(5345);Object.defineProperty(t,"isOdd",{enumerable:!0,get:function(){return G.default}});var z=r(68092);Object.defineProperty(t,"isPositive",{enumerable:!0,get:function(){return z.default}});var U=r(59625);Object.defineProperty(t,"max",{enumerable:!0,get:function(){return U.default}});var V=r(87787);Object.defineProperty(t,"maxBy",{enumerable:!0,get:function(){return V.default}});var W=r(95667);Object.defineProperty(t,"min",{enumerable:!0,get:function(){return W.default}});var Y=r(72283);Object.defineProperty(t,"minBy",{enumerable:!0,get:function(){return Y.default}});var H=r(25645);Object.defineProperty(t,"mod",{enumerable:!0,get:function(){return H.default}});var X=r(6514);Object.defineProperty(t,"toDegree",{enumerable:!0,get:function(){return X.default}});var q=r(389);Object.defineProperty(t,"toInteger",{enumerable:!0,get:function(){return q.default}});var J=r(76227);Object.defineProperty(t,"toRadian",{enumerable:!0,get:function(){return J.default}});var Z=r(38117);Object.defineProperty(t,"forIn",{enumerable:!0,get:function(){return Z.default}});var K=r(76942);Object.defineProperty(t,"has",{enumerable:!0,get:function(){return K.default}});var Q=r(70396);Object.defineProperty(t,"hasKey",{enumerable:!0,get:function(){return Q.default}});var $=r(41074);Object.defineProperty(t,"hasValue",{enumerable:!0,get:function(){return $.default}});var ee=r(95439);Object.defineProperty(t,"keys",{enumerable:!0,get:function(){return ee.default}});var te=r(63893);Object.defineProperty(t,"isMatch",{enumerable:!0,get:function(){return te.default}});var re=r(26659);Object.defineProperty(t,"values",{enumerable:!0,get:function(){return re.default}});var ne=r(63026);Object.defineProperty(t,"lowerCase",{enumerable:!0,get:function(){return ne.default}});var oe=r(23863);Object.defineProperty(t,"lowerFirst",{enumerable:!0,get:function(){return oe.default}});var ie=r(57956);Object.defineProperty(t,"substitute",{enumerable:!0,get:function(){return ie.default}});var ae=r(46981);Object.defineProperty(t,"upperCase",{enumerable:!0,get:function(){return ae.default}});var se=r(57880);Object.defineProperty(t,"upperFirst",{enumerable:!0,get:function(){return se.default}});var ue=r(64618);Object.defineProperty(t,"getType",{enumerable:!0,get:function(){return ue.default}});var le=r(72692);Object.defineProperty(t,"isArguments",{enumerable:!0,get:function(){return le.default}});var ce=r(29021);Object.defineProperty(t,"isArray",{enumerable:!0,get:function(){return ce.default}});var fe=r(69104);Object.defineProperty(t,"isArrayLike",{enumerable:!0,get:function(){return fe.default}});var he=r(12646);Object.defineProperty(t,"isBoolean",{enumerable:!0,get:function(){return he.default}});var pe=r(29449);Object.defineProperty(t,"isDate",{enumerable:!0,get:function(){return pe.default}});var de=r(79558);Object.defineProperty(t,"isError",{enumerable:!0,get:function(){return de.default}});var ye=r(33259);Object.defineProperty(t,"isFunction",{enumerable:!0,get:function(){return ye.default}});var ve=r(88355);Object.defineProperty(t,"isFinite",{enumerable:!0,get:function(){return ve.default}});var ge=r(54184);Object.defineProperty(t,"isNil",{enumerable:!0,get:function(){return ge.default}});var me=r(93698);Object.defineProperty(t,"isNull",{enumerable:!0,get:function(){return me.default}});var be=r(82579);Object.defineProperty(t,"isNumber",{enumerable:!0,get:function(){return be.default}});var we=r(72886);Object.defineProperty(t,"isObject",{enumerable:!0,get:function(){return we.default}});var _e=r(4418);Object.defineProperty(t,"isObjectLike",{enumerable:!0,get:function(){return _e.default}});var xe=r(18942);Object.defineProperty(t,"isPlainObject",{enumerable:!0,get:function(){return xe.default}});var Se=r(52242);Object.defineProperty(t,"isPrototype",{enumerable:!0,get:function(){return Se.default}});var Oe=r(96308);Object.defineProperty(t,"isRegExp",{enumerable:!0,get:function(){return Oe.default}});var Pe=r(99034);Object.defineProperty(t,"isString",{enumerable:!0,get:function(){return Pe.default}});var Ee=r(9145);Object.defineProperty(t,"isType",{enumerable:!0,get:function(){return Ee.default}});var ke=r(72491);Object.defineProperty(t,"isUndefined",{enumerable:!0,get:function(){return ke.default}});var Me=r(10119);Object.defineProperty(t,"isElement",{enumerable:!0,get:function(){return Me.default}});var Ce=r(59908);Object.defineProperty(t,"requestAnimationFrame",{enumerable:!0,get:function(){return Ce.default}});var je=r(27866);Object.defineProperty(t,"clearAnimationFrame",{enumerable:!0,get:function(){return je.default}});var Te=r(8178);Object.defineProperty(t,"augment",{enumerable:!0,get:function(){return Te.default}});var Ae=r(37441);Object.defineProperty(t,"clone",{enumerable:!0,get:function(){return Ae.default}});var Ie=r(95323);Object.defineProperty(t,"debounce",{enumerable:!0,get:function(){return Ie.default}});var Re=r(98887);Object.defineProperty(t,"memoize",{enumerable:!0,get:function(){return Re.default}});var Le=r(5441);Object.defineProperty(t,"deepMix",{enumerable:!0,get:function(){return Le.default}});var Ne=r(9070);Object.defineProperty(t,"each",{enumerable:!0,get:function(){return Ne.default}});var De=r(60865);Object.defineProperty(t,"extend",{enumerable:!0,get:function(){return De.default}});var Be=r(48418);Object.defineProperty(t,"indexOf",{enumerable:!0,get:function(){return Be.default}});var Fe=r(725);Object.defineProperty(t,"isEmpty",{enumerable:!0,get:function(){return Fe.default}});var Ge=r(38570);Object.defineProperty(t,"isEqual",{enumerable:!0,get:function(){return Ge.default}});var ze=r(75567);Object.defineProperty(t,"isEqualWith",{enumerable:!0,get:function(){return ze.default}});var Ue=r(60453);Object.defineProperty(t,"map",{enumerable:!0,get:function(){return Ue.default}});var Ve=r(54921);Object.defineProperty(t,"mapValues",{enumerable:!0,get:function(){return Ve.default}});var We=r(10014);Object.defineProperty(t,"mix",{enumerable:!0,get:function(){return We.default}}),Object.defineProperty(t,"assign",{enumerable:!0,get:function(){return We.default}});var Ye=r(66908);Object.defineProperty(t,"get",{enumerable:!0,get:function(){return Ye.default}});var He=r(13272);Object.defineProperty(t,"set",{enumerable:!0,get:function(){return He.default}});var Xe=r(38733);Object.defineProperty(t,"pick",{enumerable:!0,get:function(){return Xe.default}});var qe=r(22254);Object.defineProperty(t,"omit",{enumerable:!0,get:function(){return qe.default}});var Je=r(57024);Object.defineProperty(t,"throttle",{enumerable:!0,get:function(){return Je.default}});var Ze=r(63317);Object.defineProperty(t,"toArray",{enumerable:!0,get:function(){return Ze.default}});var Ke=r(90344);Object.defineProperty(t,"toString",{enumerable:!0,get:function(){return Ke.default}});var Qe=r(80174);Object.defineProperty(t,"uniqueId",{enumerable:!0,get:function(){return Qe.default}});var $e=r(53589);Object.defineProperty(t,"noop",{enumerable:!0,get:function(){return $e.default}});var et=r(50151);Object.defineProperty(t,"identity",{enumerable:!0,get:function(){return et.default}});var tt=r(54750);Object.defineProperty(t,"size",{enumerable:!0,get:function(){return tt.default}});var rt=r(47696);Object.defineProperty(t,"measureTextWidth",{enumerable:!0,get:function(){return rt.default}});var nt=r(79070);Object.defineProperty(t,"getEllipsisText",{enumerable:!0,get:function(){return nt.default}});var ot=r(69855);Object.defineProperty(t,"Cache",{enumerable:!0,get:function(){return ot.default}})},72692:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(9145);t.default=function(e){return n.default(e,"Arguments")}},69104:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e){return null!==e&&"function"!=typeof e&&isFinite(e.length)}},29021:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(9145);t.default=function(e){return Array.isArray?Array.isArray(e):n.default(e,"Array")}},12646:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(9145);t.default=function(e){return n.default(e,"Boolean")}},29449:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(9145);t.default=function(e){return n.default(e,"Date")}},63574:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(82579);t.default=function(e){return n.default(e)&&e%1!=0}},10119:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e){return e instanceof Element||e instanceof HTMLDocument}},725:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(54184),o=r(69104),i=r(64618),a=r(52242),s=Object.prototype.hasOwnProperty;t.default=function(e){if(n.default(e))return!0;if(o.default(e))return!e.length;var t=i.default(e);if("Map"===t||"Set"===t)return!e.size;if(a.default(e))return!Object.keys(e).length;for(var r in e)if(s.call(e,r))return!1;return!0}},75567:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(33259),o=r(38570);t.default=function(e,t,r){return n.default(r)?!!r(e,t):o.default(e,t)}},38570:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(4418),o=r(69104),i=r(99034);t.default=function e(t,r){if(t===r)return!0;if(!t||!r)return!1;if(i.default(t)||i.default(r))return!1;if(o.default(t)||o.default(r)){if(t.length!==r.length)return!1;for(var a=!0,s=0;s<t.length&&(a=e(t[s],r[s]));s++);return a}if(n.default(t)||n.default(r)){var u=Object.keys(t),l=Object.keys(r);if(u.length!==l.length)return!1;for(a=!0,s=0;s<u.length&&(a=e(t[u[s]],r[u[s]]));s++);return a}return!1}},79558:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(9145);t.default=function(e){return n.default(e,"Error")}},17037:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(82579);t.default=function(e){return n.default(e)&&e%2==0}},88355:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(82579);t.default=function(e){return n.default(e)&&isFinite(e)}},33259:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(9145);t.default=function(e){return n.default(e,"Function")}},45168:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(82579),o=Number.isInteger?Number.isInteger:function(e){return n.default(e)&&e%1==0};t.default=o},63893:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(54184),o=r(95439);t.default=function(e,t){var r=o.default(t),i=r.length;if(n.default(e))return!i;for(var a=0;a<i;a+=1){var s=r[a];if(t[s]!==e[s]||!(s in e))return!1}return!0}},78474:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(82579);t.default=function(e){return n.default(e)&&e<0}},54184:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e){return null===e||void 0===e}},93698:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e){return null===e}},36373:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=1e-5;t.default=function(e,t,n){return void 0===n&&(n=r),Math.abs(e-t)<n}},82579:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(9145);t.default=function(e){return n.default(e,"Number")}},4418:function(e,t){"use strict";function r(e){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e){return"object"===r(e)&&null!==e}},72886:function(e,t){"use strict";function r(e){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=r(e);return null!==e&&"object"===t||"function"===t}},5345:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(82579);t.default=function(e){return n.default(e)&&e%2!=0}},18942:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(4418),o=r(9145);t.default=function(e){if(!n.default(e)||!o.default(e,"Object"))return!1;if(null===Object.getPrototypeOf(e))return!0;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}},68092:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(82579);t.default=function(e){return n.default(e)&&e>0}},52242:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.prototype;t.default=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||r)}},96308:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(9145);t.default=function(e){return n.default(e,"RegExp")}},99034:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(9145);t.default=function(e){return n.default(e,"String")}},9145:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={}.toString;t.default=function(e,t){return r.call(e)==="[object "+t+"]"}},72491:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e){return void 0===e}},95439:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(9070),o=r(33259),i=Object.keys?function(e){return Object.keys(e)}:function(e){var t=[];return n.default(e,function(r,n){o.default(e)&&"prototype"===n||t.push(n)}),t};t.default=i},71049:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(69104);t.default=function(e){if(n.default(e))return e[e.length-1]}},63026:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(90344);t.default=function(e){return n.default(e).toLowerCase()}},23863:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(90344);t.default=function(e){var t=n.default(e);return t.charAt(0).toLowerCase()+t.substring(1)}},54921:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(54184),o=r(72886),i=function(e){return e};t.default=function(e,t){void 0===t&&(t=i);var r={};return o.default(e)&&!n.default(e)&&Object.keys(e).forEach(function(n){r[n]=t(e[n],n)}),r}},60453:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(69104);t.default=function(e,t){if(!n.default(e))return e;for(var r=[],o=0;o<e.length;o++){var i=e[o];r.push(t(i,o))}return r}},87787:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(29021),o=r(33259);t.default=function(e,t){if(n.default(e)){for(var r,i=-1/0,a=0;a<e.length;a++){var s=e[a],u=o.default(t)?t(s):s[t];u>i&&(r=s,i=u)}return r}}},59625:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(29021);t.default=function(e){if(n.default(e))return e.reduce(function(e,t){return Math.max(e,t)},e[0])}},47696:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,o=r(97582),i=r(26659),a=r(98887),s=r(99034);t.default=a.default(function(e,t){void 0===t&&(t={});var r=t.fontSize,o=t.fontFamily,i=t.fontWeight,a=t.fontStyle,u=t.fontVariant;return n||(n=document.createElement("canvas").getContext("2d")),n.font=[a,u,i,r+"px",o].join(" "),n.measureText(s.default(e)?e:"").width},function(e,t){return void 0===t&&(t={}),o.__spreadArrays([e],i.default(t)).join("")})},98887:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(33259);t.default=function(e,t){if(!n.default(e))throw new TypeError("Expected a function");var r=function r(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];var i=t?t.apply(this,n):n[0],a=r.cache;if(a.has(i))return a.get(i);var s=e.apply(this,n);return a.set(i,s),s};return r.cache=new Map,r}},72283:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(29021),o=r(33259);t.default=function(e,t){if(n.default(e)){for(var r,i=1/0,a=0;a<e.length;a++){var s=e[a],u=o.default(t)?t(s):s[t];u<i&&(r=s,i=u)}return r}}},95667:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(29021);t.default=function(e){if(n.default(e))return e.reduce(function(e,t){return Math.min(e,t)},e[0])}},10014:function(e,t){"use strict";function r(e,t){for(var r in t)t.hasOwnProperty(r)&&"constructor"!==r&&void 0!==t[r]&&(e[r]=t[r])}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,o){return t&&r(e,t),n&&r(e,n),o&&r(e,o),e}},25645:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e,t){return(e%t+t)%t}},53589:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){}},25651:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={};t.default=function(e){var t=r[e];if(!t){for(var n=e.toString(16),o=n.length;o<6;o++)n="0"+n;t="#"+n,r[e]=t}return t}},22254:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(36237);t.default=function(e,t){return n.default(e,function(e,r,n){return t.includes(n)||(e[n]=r),e},{})}},18359:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(29021);t.default=function(e){var t=0,r=0,o=0,i=0;return n.default(e)?1===e.length?t=r=o=i=e[0]:2===e.length?(t=o=e[0],r=i=e[1]):3===e.length?(t=e[0],r=i=e[1],o=e[2]):(t=e[0],r=e[1],o=e[2],i=e[3]):t=r=o=i=e,{r1:t,r2:r,r3:o,r4:i}}},38733:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(9070),o=r(18942),i=Object.prototype.hasOwnProperty;t.default=function(e,t){if(null===e||!o.default(e))return{};var r={};return n.default(t,function(t){i.call(e,t)&&(r[t]=e[t])}),r}},97683:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(69104),o=Array.prototype.splice;t.default=function(e,t){if(!n.default(e))return[];for(var r=e?t.length:0,i=r-1;r--;){var a=void 0,s=t[r];r!==i&&s===a||(a=s,o.call(e,s,1))}return e}},36710:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Array.prototype,n=r.splice,o=r.indexOf;t.default=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];for(var i=0;i<t.length;i++)for(var a=t[i],s=-1;(s=o.call(e,a))>-1;)n.call(e,s,1);return e}},36237:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(9070),o=r(29021),i=r(18942);t.default=function(e,t,r){if(!o.default(e)&&!i.default(e))return e;var a=r;return n.default(e,function(e,r){a=t(a,e,r)}),a}},86790:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(69104),o=r(97683);t.default=function(e,t){var r=[];if(!n.default(e))return r;for(var i=-1,a=[],s=e.length;++i<s;){var u=e[i];t(u,i,e)&&(r.push(u),a.push(i))}return o.default(e,a),r}},59908:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(e){return setTimeout(e,16)})(e)}},13272:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(72886),o=r(99034),i=r(82579);t.default=function(e,t,r){var a=e,s=o.default(t)?t.split("."):t;return s.forEach(function(e,t){t<s.length-1?(n.default(a[e])||(a[e]=i.default(s[t+1])?[]:{}),a=a[e]):a[e]=r}),e}},54750:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(54184),o=r(69104);t.default=function(e){return n.default(e)?0:o.default(e)?e.length:Object.keys(e).length}},18830:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e,t){for(var r=0;r<e.length;r++)if(t(e[r],r))return!0;return!1}},74241:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(29021),o=r(99034),i=r(33259);t.default=function(e,t){var r;if(i.default(t))r=function(e,r){return t(e)-t(r)};else{var a=[];o.default(t)?a.push(t):n.default(t)&&(a=t),r=function(e,t){for(var r=0;r<a.length;r+=1){var n=a[r];if(e[n]>t[n])return 1;if(e[n]<t[n])return-1}return 0}}return e.sort(r),e}},1828:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(29021),o=r(99034);t.default=function(e,t){return!(!n.default(e)&&!o.default(e))&&e[0]===t}},57956:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return e&&t?e.replace(/\\?\{([^{}]+)\}/g,function(e,r){return"\\"===e.charAt(0)?e.slice(1):void 0===t[r]?"":t[r]}):e}},57024:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r){var n,o,i,a,s=0;r||(r={});var u=function(){s=!1===r.leading?0:Date.now(),n=null,a=e.apply(o,i),n||(o=i=null)},l=function(){var l=Date.now();s||!1!==r.leading||(s=l);var c=t-(l-s);return o=this,i=arguments,c<=0||c>t?(n&&(clearTimeout(n),n=null),s=l,a=e.apply(o,i),n||(o=i=null)):n||!1===r.trailing||(n=setTimeout(u,c)),a};return l.cancel=function(){clearTimeout(n),s=0,n=o=i=null},l}},63317:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(69104);t.default=function(e){return n.default(e)?Array.prototype.slice.call(e):[]}},6514:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=180/Math.PI;t.default=function(e){return r*e}},389:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=parseInt},76227:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Math.PI/180;t.default=function(e){return r*e}},90344:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(54184);t.default=function(e){return n.default(e)?"":e.toString()}},26622:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(67919);t.default=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return n.default([].concat.apply([],e))}},67919:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){void 0===t&&(t=new Map);var r=[];if(Array.isArray(e))for(var n=0,o=e.length;n<o;n++){var i=e[n];t.has(i)||(r.push(i),t.set(i,!0))}return r}},80174:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={};t.default=function(e){return r[e=e||"g"]?r[e]+=1:r[e]=1,e+r[e]}},46981:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(90344);t.default=function(e){return n.default(e).toUpperCase()}},57880:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(90344);t.default=function(e){var t=n.default(e);return t.charAt(0).toUpperCase()+t.substring(1)}},47328:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(29021),o=r(54184);t.default=function(e,t){for(var r=[],i={},a=0;a<e.length;a++){var s=e[a][t];if(!o.default(s)){n.default(s)||(s=[s]);for(var u=0;u<s.length;u++){var l=s[u];i[l]||(r.push(l),i[l]=!0)}}}return r}},26659:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(9070),o=r(33259),i=Object.values?function(e){return Object.values(e)}:function(e){var t=[];return n.default(e,function(r,n){o.default(e)&&"prototype"===n||t.push(r)}),t};t.default=i},14635:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(e["_wrap_"+t])return e["_wrap_"+t];var r=function(r){e[t](r)};return e["_wrap_"+t]=r,r}},67380:function(e){"use strict";e.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},19289:function(e,t,r){var n=r(67380),o=r(5515),i=Object.hasOwnProperty,a=Object.create(null);for(var s in n)i.call(n,s)&&(a[n[s]]=s);var u=e.exports={to:{},get:{}};function l(e,t,r){return Math.min(Math.max(t,e),r)}function c(e){var t=Math.round(e).toString(16).toUpperCase();return t.length<2?"0"+t:t}u.get=function(e){var t,r;switch(e.substring(0,3).toLowerCase()){case"hsl":t=u.get.hsl(e),r="hsl";break;case"hwb":t=u.get.hwb(e),r="hwb";break;default:t=u.get.rgb(e),r="rgb"}return t?{model:r,value:t}:null},u.get.rgb=function(e){if(!e)return null;var t,r,o,a=[0,0,0,1];if(t=e.match(/^#([a-f0-9]{6})([a-f0-9]{2})?$/i)){for(o=t[2],t=t[1],r=0;r<3;r++){var s=2*r;a[r]=parseInt(t.slice(s,s+2),16)}o&&(a[3]=parseInt(o,16)/255)}else if(t=e.match(/^#([a-f0-9]{3,4})$/i)){for(o=(t=t[1])[3],r=0;r<3;r++)a[r]=parseInt(t[r]+t[r],16);o&&(a[3]=parseInt(o+o,16)/255)}else if(t=e.match(/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/)){for(r=0;r<3;r++)a[r]=parseInt(t[r+1],0);t[4]&&(t[5]?a[3]=.01*parseFloat(t[4]):a[3]=parseFloat(t[4]))}else{if(!(t=e.match(/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/)))return(t=e.match(/^(\w+)$/))?"transparent"===t[1]?[0,0,0,0]:i.call(n,t[1])?((a=n[t[1]])[3]=1,a):null:null;for(r=0;r<3;r++)a[r]=Math.round(2.55*parseFloat(t[r+1]));t[4]&&(t[5]?a[3]=.01*parseFloat(t[4]):a[3]=parseFloat(t[4]))}for(r=0;r<3;r++)a[r]=l(a[r],0,255);return a[3]=l(a[3],0,1),a},u.get.hsl=function(e){if(!e)return null;var t=e.match(/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/);if(t){var r=parseFloat(t[4]);return[(parseFloat(t[1])%360+360)%360,l(parseFloat(t[2]),0,100),l(parseFloat(t[3]),0,100),l(isNaN(r)?1:r,0,1)]}return null},u.get.hwb=function(e){if(!e)return null;var t=e.match(/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/);if(t){var r=parseFloat(t[4]);return[(parseFloat(t[1])%360+360)%360,l(parseFloat(t[2]),0,100),l(parseFloat(t[3]),0,100),l(isNaN(r)?1:r,0,1)]}return null},u.to.hex=function(){var e=o(arguments);return"#"+c(e[0])+c(e[1])+c(e[2])+(e[3]<1?c(Math.round(255*e[3])):"")},u.to.rgb=function(){var e=o(arguments);return e.length<4||1===e[3]?"rgb("+Math.round(e[0])+", "+Math.round(e[1])+", "+Math.round(e[2])+")":"rgba("+Math.round(e[0])+", "+Math.round(e[1])+", "+Math.round(e[2])+", "+e[3]+")"},u.to.rgb.percent=function(){var e=o(arguments),t=Math.round(e[0]/255*100),r=Math.round(e[1]/255*100),n=Math.round(e[2]/255*100);return e.length<4||1===e[3]?"rgb("+t+"%, "+r+"%, "+n+"%)":"rgba("+t+"%, "+r+"%, "+n+"%, "+e[3]+")"},u.to.hsl=function(){var e=o(arguments);return e.length<4||1===e[3]?"hsl("+e[0]+", "+e[1]+"%, "+e[2]+"%)":"hsla("+e[0]+", "+e[1]+"%, "+e[2]+"%, "+e[3]+")"},u.to.hwb=function(){var e=o(arguments),t="";return e.length>=4&&1!==e[3]&&(t=", "+e[3]),"hwb("+e[0]+", "+e[1]+"%, "+e[2]+"%"+t+")"},u.to.keyword=function(e){return a[e.slice(0,3)]}},69630:function(e,t,r){"use strict";function n(e){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o=r(19289),i=r(40738),a=[].slice,s=["keyword","gray","hex"],u={};Object.keys(i).forEach(function(e){u[a.call(i[e].labels).sort().join("")]=e});var l={};function c(e,t){if(!(this instanceof c))return new c(e,t);if(t&&t in s&&(t=null),t&&!(t in i))throw new Error("Unknown model: "+t);var r,n;if(null==e)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(e instanceof c)this.model=e.model,this.color=e.color.slice(),this.valpha=e.valpha;else if("string"==typeof e){var f=o.get(e);if(null===f)throw new Error("Unable to parse color from string: "+e);this.model=f.model,n=i[this.model].channels,this.color=f.value.slice(0,n),this.valpha="number"==typeof f.value[n]?f.value[n]:1}else if(e.length){this.model=t||"rgb",n=i[this.model].channels;var h=a.call(e,0,n);this.color=p(h,n),this.valpha="number"==typeof e[n]?e[n]:1}else if("number"==typeof e)e&=16777215,this.model="rgb",this.color=[e>>16&255,e>>8&255,255&e],this.valpha=1;else{this.valpha=1;var d=Object.keys(e);"alpha"in e&&(d.splice(d.indexOf("alpha"),1),this.valpha="number"==typeof e.alpha?e.alpha:0);var y=d.sort().join("");if(!(y in u))throw new Error("Unable to parse color from object: "+JSON.stringify(e));this.model=u[y];var v=i[this.model].labels,g=[];for(r=0;r<v.length;r++)g.push(e[v[r]]);this.color=p(g)}if(l[this.model])for(n=i[this.model].channels,r=0;r<n;r++){var m=l[this.model][r];m&&(this.color[r]=m(this.color[r]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}function f(e,t,r){return(e=Array.isArray(e)?e:[e]).forEach(function(e){(l[e]||(l[e]=[]))[t]=r}),e=e[0],function(n){var o;return arguments.length?(r&&(n=r(n)),(o=this[e]()).color[t]=n,o):(o=this[e]().color[t],r&&(o=r(o)),o)}}function h(e){return function(t){return Math.max(0,Math.min(e,t))}}function p(e,t){for(var r=0;r<t;r++)"number"!=typeof e[r]&&(e[r]=0);return e}c.prototype={toString:function(){return this.string()},toJSON:function(){return this[this.model]()},string:function(e){var t=this.model in o.to?this:this.rgb(),r=1===(t=t.round("number"==typeof e?e:1)).valpha?t.color:t.color.concat(this.valpha);return o.to[t.model](r)},percentString:function(e){var t=this.rgb().round("number"==typeof e?e:1),r=1===t.valpha?t.color:t.color.concat(this.valpha);return o.to.rgb.percent(r)},array:function(){return 1===this.valpha?this.color.slice():this.color.concat(this.valpha)},object:function(){for(var e={},t=i[this.model].channels,r=i[this.model].labels,n=0;n<t;n++)e[r[n]]=this.color[n];return 1!==this.valpha&&(e.alpha=this.valpha),e},unitArray:function(){var e=this.rgb().color;return e[0]/=255,e[1]/=255,e[2]/=255,1!==this.valpha&&e.push(this.valpha),e},unitObject:function(){var e=this.rgb().object();return e.r/=255,e.g/=255,e.b/=255,1!==this.valpha&&(e.alpha=this.valpha),e},round:function(e){return e=Math.max(e||0,0),new c(this.color.map(function(e){return function(t){return function(e,t){return Number(e.toFixed(t))}(t,e)}}(e)).concat(this.valpha),this.model)},alpha:function(e){return arguments.length?new c(this.color.concat(Math.max(0,Math.min(1,e))),this.model):this.valpha},red:f("rgb",0,h(255)),green:f("rgb",1,h(255)),blue:f("rgb",2,h(255)),hue:f(["hsl","hsv","hsl","hwb","hcg"],0,function(e){return(e%360+360)%360}),saturationl:f("hsl",1,h(100)),lightness:f("hsl",2,h(100)),saturationv:f("hsv",1,h(100)),value:f("hsv",2,h(100)),chroma:f("hcg",1,h(100)),gray:f("hcg",2,h(100)),white:f("hwb",1,h(100)),wblack:f("hwb",2,h(100)),cyan:f("cmyk",0,h(100)),magenta:f("cmyk",1,h(100)),yellow:f("cmyk",2,h(100)),black:f("cmyk",3,h(100)),x:f("xyz",0,h(100)),y:f("xyz",1,h(100)),z:f("xyz",2,h(100)),l:f("lab",0,h(100)),a:f("lab",1),b:f("lab",2),keyword:function(e){return arguments.length?new c(e):i[this.model].keyword(this.color)},hex:function(e){return arguments.length?new c(e):o.to.hex(this.rgb().round().color)},rgbNumber:function(){var e=this.rgb().color;return(255&e[0])<<16|(255&e[1])<<8|255&e[2]},luminosity:function(){for(var e=this.rgb().color,t=[],r=0;r<e.length;r++){var n=e[r]/255;t[r]=n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4)}return.2126*t[0]+.7152*t[1]+.0722*t[2]},contrast:function(e){var t=this.luminosity(),r=e.luminosity();return t>r?(t+.05)/(r+.05):(r+.05)/(t+.05)},level:function(e){var t=this.contrast(e);return t>=7.1?"AAA":t>=4.5?"AA":""},isDark:function(){var e=this.rgb().color;return(299*e[0]+587*e[1]+114*e[2])/1e3<128},isLight:function(){return!this.isDark()},negate:function(){for(var e=this.rgb(),t=0;t<3;t++)e.color[t]=255-e.color[t];return e},lighten:function(e){var t=this.hsl();return t.color[2]+=t.color[2]*e,t},darken:function(e){var t=this.hsl();return t.color[2]-=t.color[2]*e,t},saturate:function(e){var t=this.hsl();return t.color[1]+=t.color[1]*e,t},desaturate:function(e){var t=this.hsl();return t.color[1]-=t.color[1]*e,t},whiten:function(e){var t=this.hwb();return t.color[1]+=t.color[1]*e,t},blacken:function(e){var t=this.hwb();return t.color[2]+=t.color[2]*e,t},grayscale:function(){var e=this.rgb().color,t=.3*e[0]+.59*e[1]+.11*e[2];return c.rgb(t,t,t)},fade:function(e){return this.alpha(this.valpha-this.valpha*e)},opaquer:function(e){return this.alpha(this.valpha+this.valpha*e)},rotate:function(e){var t=this.hsl(),r=t.color[0];return r=(r=(r+e)%360)<0?360+r:r,t.color[0]=r,t},mix:function(e,t){if(!e||!e.rgb)throw new Error('Argument to "mix" was not a Color instance, but rather an instance of '+n(e));var r=e.rgb(),o=this.rgb(),i=void 0===t?.5:t,a=2*i-1,s=r.alpha()-o.alpha(),u=((a*s==-1?a:(a+s)/(1+a*s))+1)/2,l=1-u;return c.rgb(u*r.red()+l*o.red(),u*r.green()+l*o.green(),u*r.blue()+l*o.blue(),r.alpha()*i+o.alpha()*(1-i))}},Object.keys(i).forEach(function(e){if(-1===s.indexOf(e)){var t=i[e].channels;c.prototype[e]=function(){if(this.model===e)return new c(this);if(arguments.length)return new c(arguments,e);var r,n="number"==typeof arguments[t]?t:this.valpha;return new c((r=i[this.model][e].raw(this.color),Array.isArray(r)?r:[r]).concat(n),e)},c[e]=function(r){return"number"==typeof r&&(r=p(a.call(arguments),t)),new c(r,e)}}}),e.exports=c},96786:function(e,t,r){var n=r(11719),o={};for(var i in n)n.hasOwnProperty(i)&&(o[n[i]]=i);var a=e.exports={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};for(var s in a)if(a.hasOwnProperty(s)){if(!("channels"in a[s]))throw new Error("missing channels property: "+s);if(!("labels"in a[s]))throw new Error("missing channel labels property: "+s);if(a[s].labels.length!==a[s].channels)throw new Error("channel and label counts mismatch: "+s);var u=a[s].channels,l=a[s].labels;delete a[s].channels,delete a[s].labels,Object.defineProperty(a[s],"channels",{value:u}),Object.defineProperty(a[s],"labels",{value:l})}a.rgb.hsl=function(e){var t,r,n=e[0]/255,o=e[1]/255,i=e[2]/255,a=Math.min(n,o,i),s=Math.max(n,o,i),u=s-a;return s===a?t=0:n===s?t=(o-i)/u:o===s?t=2+(i-n)/u:i===s&&(t=4+(n-o)/u),(t=Math.min(60*t,360))<0&&(t+=360),r=(a+s)/2,[t,100*(s===a?0:r<=.5?u/(s+a):u/(2-s-a)),100*r]},a.rgb.hsv=function(e){var t,r,n,o,i,a=e[0]/255,s=e[1]/255,u=e[2]/255,l=Math.max(a,s,u),c=l-Math.min(a,s,u),f=function(e){return(l-e)/6/c+.5};return 0===c?o=i=0:(i=c/l,t=f(a),r=f(s),n=f(u),a===l?o=n-r:s===l?o=1/3+t-n:u===l&&(o=2/3+r-t),o<0?o+=1:o>1&&(o-=1)),[360*o,100*i,100*l]},a.rgb.hwb=function(e){var t=e[0],r=e[1],n=e[2];return[a.rgb.hsl(e)[0],100*(1/255*Math.min(t,Math.min(r,n))),100*(n=1-1/255*Math.max(t,Math.max(r,n)))]},a.rgb.cmyk=function(e){var t,r=e[0]/255,n=e[1]/255,o=e[2]/255;return[100*((1-r-(t=Math.min(1-r,1-n,1-o)))/(1-t)||0),100*((1-n-t)/(1-t)||0),100*((1-o-t)/(1-t)||0),100*t]},a.rgb.keyword=function(e){var t=o[e];if(t)return t;var r,i,a,s=1/0;for(var u in n)if(n.hasOwnProperty(u)){var l=n[u],c=(i=e,a=l,Math.pow(i[0]-a[0],2)+Math.pow(i[1]-a[1],2)+Math.pow(i[2]-a[2],2));c<s&&(s=c,r=u)}return r},a.keyword.rgb=function(e){return n[e]},a.rgb.xyz=function(e){var t=e[0]/255,r=e[1]/255,n=e[2]/255;return[100*(.4124*(t=t>.04045?Math.pow((t+.055)/1.055,2.4):t/12.92)+.3576*(r=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92)+.1805*(n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92)),100*(.2126*t+.7152*r+.0722*n),100*(.0193*t+.1192*r+.9505*n)]},a.rgb.lab=function(e){var t=a.rgb.xyz(e),r=t[0],n=t[1],o=t[2];return n/=100,o/=108.883,r=(r/=95.047)>.008856?Math.pow(r,1/3):7.787*r+16/116,[116*(n=n>.008856?Math.pow(n,1/3):7.787*n+16/116)-16,500*(r-n),200*(n-(o=o>.008856?Math.pow(o,1/3):7.787*o+16/116))]},a.hsl.rgb=function(e){var t,r,n,o,i,a=e[0]/360,s=e[1]/100,u=e[2]/100;if(0===s)return[i=255*u,i,i];t=2*u-(r=u<.5?u*(1+s):u+s-u*s),o=[0,0,0];for(var l=0;l<3;l++)(n=a+1/3*-(l-1))<0&&n++,n>1&&n--,i=6*n<1?t+6*(r-t)*n:2*n<1?r:3*n<2?t+(r-t)*(2/3-n)*6:t,o[l]=255*i;return o},a.hsl.hsv=function(e){var t=e[0],r=e[1]/100,n=e[2]/100,o=r,i=Math.max(n,.01);return r*=(n*=2)<=1?n:2-n,o*=i<=1?i:2-i,[t,100*(0===n?2*o/(i+o):2*r/(n+r)),100*((n+r)/2)]},a.hsv.rgb=function(e){var t=e[0]/60,r=e[1]/100,n=e[2]/100,o=Math.floor(t)%6,i=t-Math.floor(t),a=255*n*(1-r),s=255*n*(1-r*i),u=255*n*(1-r*(1-i));switch(n*=255,o){case 0:return[n,u,a];case 1:return[s,n,a];case 2:return[a,n,u];case 3:return[a,s,n];case 4:return[u,a,n];case 5:return[n,a,s]}},a.hsv.hsl=function(e){var t,r,n,o=e[0],i=e[1]/100,a=e[2]/100,s=Math.max(a,.01);return n=(2-i)*a,r=i*s,[o,100*(r=(r/=(t=(2-i)*s)<=1?t:2-t)||0),100*(n/=2)]},a.hwb.rgb=function(e){var t,r,n,o,i,a,s,u=e[0]/360,l=e[1]/100,c=e[2]/100,f=l+c;switch(f>1&&(l/=f,c/=f),r=1-c,n=6*u-(t=Math.floor(6*u)),0!=(1&t)&&(n=1-n),o=l+n*(r-l),t){default:case 6:case 0:i=r,a=o,s=l;break;case 1:i=o,a=r,s=l;break;case 2:i=l,a=r,s=o;break;case 3:i=l,a=o,s=r;break;case 4:i=o,a=l,s=r;break;case 5:i=r,a=l,s=o}return[255*i,255*a,255*s]},a.cmyk.rgb=function(e){var t=e[0]/100,r=e[1]/100,n=e[2]/100,o=e[3]/100;return[255*(1-Math.min(1,t*(1-o)+o)),255*(1-Math.min(1,r*(1-o)+o)),255*(1-Math.min(1,n*(1-o)+o))]},a.xyz.rgb=function(e){var t,r,n,o=e[0]/100,i=e[1]/100,a=e[2]/100;return r=-.9689*o+1.8758*i+.0415*a,n=.0557*o+-.204*i+1.057*a,t=(t=3.2406*o+-1.5372*i+-.4986*a)>.0031308?1.055*Math.pow(t,1/2.4)-.055:12.92*t,r=r>.0031308?1.055*Math.pow(r,1/2.4)-.055:12.92*r,n=n>.0031308?1.055*Math.pow(n,1/2.4)-.055:12.92*n,[255*(t=Math.min(Math.max(0,t),1)),255*(r=Math.min(Math.max(0,r),1)),255*(n=Math.min(Math.max(0,n),1))]},a.xyz.lab=function(e){var t=e[0],r=e[1],n=e[2];return r/=100,n/=108.883,t=(t/=95.047)>.008856?Math.pow(t,1/3):7.787*t+16/116,[116*(r=r>.008856?Math.pow(r,1/3):7.787*r+16/116)-16,500*(t-r),200*(r-(n=n>.008856?Math.pow(n,1/3):7.787*n+16/116))]},a.lab.xyz=function(e){var t,r,n,o=e[0],i=e[1],a=e[2];t=i/500+(r=(o+16)/116),n=r-a/200;var s=Math.pow(r,3),u=Math.pow(t,3),l=Math.pow(n,3);return r=s>.008856?s:(r-16/116)/7.787,t=u>.008856?u:(t-16/116)/7.787,n=l>.008856?l:(n-16/116)/7.787,[t*=95.047,r*=100,n*=108.883]},a.lab.lch=function(e){var t,r=e[0],n=e[1],o=e[2];return(t=360*Math.atan2(o,n)/2/Math.PI)<0&&(t+=360),[r,Math.sqrt(n*n+o*o),t]},a.lch.lab=function(e){var t,r=e[0],n=e[1];return t=e[2]/360*2*Math.PI,[r,n*Math.cos(t),n*Math.sin(t)]},a.rgb.ansi16=function(e){var t=e[0],r=e[1],n=e[2],o=1 in arguments?arguments[1]:a.rgb.hsv(e)[2];if(0===(o=Math.round(o/50)))return 30;var i=30+(Math.round(n/255)<<2|Math.round(r/255)<<1|Math.round(t/255));return 2===o&&(i+=60),i},a.hsv.ansi16=function(e){return a.rgb.ansi16(a.hsv.rgb(e),e[2])},a.rgb.ansi256=function(e){var t=e[0],r=e[1],n=e[2];return t===r&&r===n?t<8?16:t>248?231:Math.round((t-8)/247*24)+232:16+36*Math.round(t/255*5)+6*Math.round(r/255*5)+Math.round(n/255*5)},a.ansi16.rgb=function(e){var t=e%10;if(0===t||7===t)return e>50&&(t+=3.5),[t=t/10.5*255,t,t];var r=.5*(1+~~(e>50));return[(1&t)*r*255,(t>>1&1)*r*255,(t>>2&1)*r*255]},a.ansi256.rgb=function(e){if(e>=232){var t=10*(e-232)+8;return[t,t,t]}var r;return e-=16,[Math.floor(e/36)/5*255,Math.floor((r=e%36)/6)/5*255,r%6/5*255]},a.rgb.hex=function(e){var t=(((255&Math.round(e[0]))<<16)+((255&Math.round(e[1]))<<8)+(255&Math.round(e[2]))).toString(16).toUpperCase();return"000000".substring(t.length)+t},a.hex.rgb=function(e){var t=e.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!t)return[0,0,0];var r=t[0];3===t[0].length&&(r=r.split("").map(function(e){return e+e}).join(""));var n=parseInt(r,16);return[n>>16&255,n>>8&255,255&n]},a.rgb.hcg=function(e){var t,r,n=e[0]/255,o=e[1]/255,i=e[2]/255,a=Math.max(Math.max(n,o),i),s=Math.min(Math.min(n,o),i),u=a-s;return t=u<1?s/(1-u):0,r=u<=0?0:a===n?(o-i)/u%6:a===o?2+(i-n)/u:4+(n-o)/u+4,r/=6,[360*(r%=1),100*u,100*t]},a.hsl.hcg=function(e){var t=e[1]/100,r=e[2]/100,n=1,o=0;return(n=r<.5?2*t*r:2*t*(1-r))<1&&(o=(r-.5*n)/(1-n)),[e[0],100*n,100*o]},a.hsv.hcg=function(e){var t=e[1]/100,r=e[2]/100,n=t*r,o=0;return n<1&&(o=(r-n)/(1-n)),[e[0],100*n,100*o]},a.hcg.rgb=function(e){var t=e[0]/360,r=e[1]/100,n=e[2]/100;if(0===r)return[255*n,255*n,255*n];var o,i=[0,0,0],a=t%1*6,s=a%1,u=1-s;switch(Math.floor(a)){case 0:i[0]=1,i[1]=s,i[2]=0;break;case 1:i[0]=u,i[1]=1,i[2]=0;break;case 2:i[0]=0,i[1]=1,i[2]=s;break;case 3:i[0]=0,i[1]=u,i[2]=1;break;case 4:i[0]=s,i[1]=0,i[2]=1;break;default:i[0]=1,i[1]=0,i[2]=u}return o=(1-r)*n,[255*(r*i[0]+o),255*(r*i[1]+o),255*(r*i[2]+o)]},a.hcg.hsv=function(e){var t=e[1]/100,r=t+e[2]/100*(1-t),n=0;return r>0&&(n=t/r),[e[0],100*n,100*r]},a.hcg.hsl=function(e){var t=e[1]/100,r=e[2]/100*(1-t)+.5*t,n=0;return r>0&&r<.5?n=t/(2*r):r>=.5&&r<1&&(n=t/(2*(1-r))),[e[0],100*n,100*r]},a.hcg.hwb=function(e){var t=e[1]/100,r=t+e[2]/100*(1-t);return[e[0],100*(r-t),100*(1-r)]},a.hwb.hcg=function(e){var t=e[1]/100,r=1-e[2]/100,n=r-t,o=0;return n<1&&(o=(r-n)/(1-n)),[e[0],100*n,100*o]},a.apple.rgb=function(e){return[e[0]/65535*255,e[1]/65535*255,e[2]/65535*255]},a.rgb.apple=function(e){return[e[0]/255*65535,e[1]/255*65535,e[2]/255*65535]},a.gray.rgb=function(e){return[e[0]/100*255,e[0]/100*255,e[0]/100*255]},a.gray.hsl=a.gray.hsv=function(e){return[0,0,e[0]]},a.gray.hwb=function(e){return[0,100,e[0]]},a.gray.cmyk=function(e){return[0,0,0,e[0]]},a.gray.lab=function(e){return[e[0],0,0]},a.gray.hex=function(e){var t=255&Math.round(e[0]/100*255),r=((t<<16)+(t<<8)+t).toString(16).toUpperCase();return"000000".substring(r.length)+r},a.rgb.gray=function(e){return[(e[0]+e[1]+e[2])/3/255*100]}},40738:function(e,t,r){function n(e){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o=r(96786),i=r(92511),a={};Object.keys(o).forEach(function(e){a[e]={},Object.defineProperty(a[e],"channels",{value:o[e].channels}),Object.defineProperty(a[e],"labels",{value:o[e].labels});var t=i(e);Object.keys(t).forEach(function(r){var o=t[r];a[e][r]=function(e){var t=function(t){if(void 0===t||null===t)return t;arguments.length>1&&(t=Array.prototype.slice.call(arguments));var r=e(t);if("object"===n(r))for(var o=r.length,i=0;i<o;i++)r[i]=Math.round(r[i]);return r};return"conversion"in e&&(t.conversion=e.conversion),t}(o),a[e][r].raw=function(e){var t=function(t){return void 0===t||null===t?t:(arguments.length>1&&(t=Array.prototype.slice.call(arguments)),e(t))};return"conversion"in e&&(t.conversion=e.conversion),t}(o)})}),e.exports=a},92511:function(e,t,r){var n=r(96786);function o(e){var t=function(){for(var e={},t=Object.keys(n),r=t.length,o=0;o<r;o++)e[t[o]]={distance:-1,parent:null};return e}(),r=[e];for(t[e].distance=0;r.length;)for(var o=r.pop(),i=Object.keys(n[o]),a=i.length,s=0;s<a;s++){var u=i[s],l=t[u];-1===l.distance&&(l.distance=t[o].distance+1,l.parent=o,r.unshift(u))}return t}function i(e,t){return function(r){return t(e(r))}}function a(e,t){for(var r=[t[e].parent,e],o=n[t[e].parent][e],a=t[e].parent;t[a].parent;)r.unshift(t[a].parent),o=i(n[t[a].parent][a],o),a=t[a].parent;return o.conversion=r,o}e.exports=function(e){for(var t=o(e),r={},n=Object.keys(t),i=n.length,s=0;s<i;s++){var u=n[s];null!==t[u].parent&&(r[u]=a(u,t))}return r}},11719:function(e){"use strict";e.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},55023:function(e,t,r){"use strict";var n=r(86727);e.exports=n},93123:function(e,t,r){"use strict";var n=r(8690);e.exports=n},10879:function(e,t,r){"use strict";r(47422);var n=r(50097);e.exports=n.Object.assign},33723:function(e,t,r){"use strict";r(44835);var n=r(98384);e.exports=n.f("asyncIterator")},45980:function(e,t,r){"use strict";var n=r(30729),o=r(48434),i=TypeError;e.exports=function(e){if(n(e))return e;throw i(o(e)+" is not a function")}},57563:function(e,t,r){"use strict";var n=r(10691),o=String,i=TypeError;e.exports=function(e){if(n(e))return e;throw i(o(e)+" is not an object")}},48632:function(e,t,r){"use strict";var n=r(6462),o=r(65333),i=r(6803),a=function(e){return function(t,r,a){var s,u=n(t),l=i(u),c=o(a,l);if(e&&r!=r){for(;l>c;)if((s=u[c++])!=s)return!0}else for(;l>c;c++)if((e||c in u)&&u[c]===r)return e||c||0;return!e&&-1}};e.exports={includes:a(!0),indexOf:a(!1)}},22177:function(e,t,r){"use strict";var n=r(99738),o=n({}.toString),i=n("".slice);e.exports=function(e){return i(o(e),8,-1)}},19029:function(e,t,r){"use strict";var n=r(61675),o=r(89402),i=r(67238),a=r(60704);e.exports=function(e,t,r){for(var s=o(t),u=a.f,l=i.f,c=0;c<s.length;c++){var f=s[c];n(e,f)||r&&n(r,f)||u(e,f,l(t,f))}}},58268:function(e,t,r){"use strict";var n=r(96539),o=r(60704),i=r(14925);e.exports=n?function(e,t,r){return o.f(e,t,i(1,r))}:function(e,t,r){return e[t]=r,e}},14925:function(e){"use strict";e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},27454:function(e,t,r){"use strict";var n=r(30729),o=r(60704),i=r(37948),a=r(80161);e.exports=function(e,t,r,s){s||(s={});var u=s.enumerable,l=void 0!==s.name?s.name:t;if(n(r)&&i(r,l,s),s.global)u?e[t]=r:a(t,r);else{try{s.unsafe?e[t]&&(u=!0):delete e[t]}catch(e){}u?e[t]=r:o.f(e,t,{value:r,enumerable:!1,configurable:!s.nonConfigurable,writable:!s.nonWritable})}return e}},80161:function(e,t,r){"use strict";var n=r(75835),o=Object.defineProperty;e.exports=function(e,t){try{o(n,e,{value:t,configurable:!0,writable:!0})}catch(r){n[e]=t}return t}},96539:function(e,t,r){"use strict";var n=r(56583);e.exports=!n(function(){return 7!==Object.defineProperty({},1,{get:function(){return 7}})[1]})},89967:function(e){"use strict";function t(e){"@babel/helpers - typeof";return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var r="object"==("undefined"==typeof document?"undefined":t(document))&&document.all,n=void 0===r&&void 0!==r;e.exports={all:r,IS_HTMLDDA:n}},13343:function(e,t,r){"use strict";var n=r(75835),o=r(10691),i=n.document,a=o(i)&&o(i.createElement);e.exports=function(e){return a?i.createElement(e):{}}},61785:function(e){"use strict";e.exports="undefined"!=typeof navigator&&String(navigator.userAgent)||""},39282:function(e,t,r){"use strict";var n,o,i=r(75835),a=r(61785),s=i.process,u=i.Deno,l=s&&s.versions||u&&u.version,c=l&&l.v8;c&&(o=(n=c.split("."))[0]>0&&n[0]<4?1:+(n[0]+n[1])),!o&&a&&(!(n=a.match(/Edge\/(\d+)/))||n[1]>=74)&&(n=a.match(/Chrome\/(\d+)/))&&(o=+n[1]),e.exports=o},68525:function(e){"use strict";e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},97926:function(e,t,r){"use strict";function n(e){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o=r(75835),i=r(67238).f,a=r(58268),s=r(27454),u=r(80161),l=r(19029),c=r(13175);e.exports=function(e,t){var r,f,h,p,d,y=e.target,v=e.global,g=e.stat;if(r=v?o:g?o[y]||u(y,{}):(o[y]||{}).prototype)for(f in t){if(p=t[f],h=e.dontCallGetSet?(d=i(r,f))&&d.value:r[f],!c(v?f:y+(g?".":"#")+f,e.forced)&&void 0!==h){if(n(p)==n(h))continue;l(p,h)}(e.sham||h&&h.sham)&&a(p,"sham",!0),s(r,f,p,e)}}},56583:function(e){"use strict";e.exports=function(e){try{return!!e()}catch(e){return!0}}},39096:function(e,t,r){"use strict";var n=r(56583);e.exports=!n(function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")})},75057:function(e,t,r){"use strict";var n=r(39096),o=Function.prototype.call;e.exports=n?o.bind(o):function(){return o.apply(o,arguments)}},41864:function(e,t,r){"use strict";var n=r(96539),o=r(61675),i=Function.prototype,a=n&&Object.getOwnPropertyDescriptor,s=o(i,"name"),u=s&&"something"===function(){}.name,l=s&&(!n||n&&a(i,"name").configurable);e.exports={EXISTS:s,PROPER:u,CONFIGURABLE:l}},99738:function(e,t,r){"use strict";var n=r(39096),o=Function.prototype,i=o.call,a=n&&o.bind.bind(i,i);e.exports=n?a:function(e){return function(){return i.apply(e,arguments)}}},8078:function(e,t,r){"use strict";var n=r(75835),o=r(30729);e.exports=function(e,t){return arguments.length<2?(r=n[e],o(r)?r:void 0):n[e]&&n[e][t];var r}},92337:function(e,t,r){"use strict";var n=r(45980),o=r(16254);e.exports=function(e,t){var r=e[t];return o(r)?void 0:n(r)}},75835:function(e,t,r){"use strict";function n(e){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o=function(e){return e&&e.Math===Math&&e};e.exports=o("object"==("undefined"==typeof globalThis?"undefined":n(globalThis))&&globalThis)||o("object"==("undefined"==typeof window?"undefined":n(window))&&window)||o("object"==("undefined"==typeof self?"undefined":n(self))&&self)||o("object"==(void 0===r.g?"undefined":n(r.g))&&r.g)||function(){return this}()||this||Function("return this")()},61675:function(e,t,r){"use strict";var n=r(99738),o=r(5825),i=n({}.hasOwnProperty);e.exports=Object.hasOwn||function(e,t){return i(o(e),t)}},20940:function(e){"use strict";e.exports={}},2175:function(e,t,r){"use strict";var n=r(96539),o=r(56583),i=r(13343);e.exports=!n&&!o(function(){return 7!==Object.defineProperty(i("div"),"a",{get:function(){return 7}}).a})},55407:function(e,t,r){"use strict";var n=r(99738),o=r(56583),i=r(22177),a=Object,s=n("".split);e.exports=o(function(){return!a("z").propertyIsEnumerable(0)})?function(e){return"String"===i(e)?s(e,""):a(e)}:a},86111:function(e,t,r){"use strict";var n=r(99738),o=r(30729),i=r(29700),a=n(Function.toString);o(i.inspectSource)||(i.inspectSource=function(e){return a(e)}),e.exports=i.inspectSource},44751:function(e,t,r){"use strict";var n,o,i,a=r(39801),s=r(75835),u=r(10691),l=r(58268),c=r(61675),f=r(29700),h=r(67307),p=r(20940),d=s.TypeError,y=s.WeakMap;if(a||f.state){var v=f.state||(f.state=new y);v.get=v.get,v.has=v.has,v.set=v.set,n=function(e,t){if(v.has(e))throw d("Object already initialized");return t.facade=e,v.set(e,t),t},o=function(e){return v.get(e)||{}},i=function(e){return v.has(e)}}else{var g=h("state");p[g]=!0,n=function(e,t){if(c(e,g))throw d("Object already initialized");return t.facade=e,l(e,g,t),t},o=function(e){return c(e,g)?e[g]:{}},i=function(e){return c(e,g)}}e.exports={set:n,get:o,has:i,enforce:function(e){return i(e)?o(e):n(e,{})},getterFor:function(e){return function(t){var r;if(!u(t)||(r=o(t)).type!==e)throw d("Incompatible receiver, "+e+" required");return r}}}},30729:function(e,t,r){"use strict";var n=r(89967),o=n.all;e.exports=n.IS_HTMLDDA?function(e){return"function"==typeof e||e===o}:function(e){return"function"==typeof e}},13175:function(e,t,r){"use strict";var n=r(56583),o=r(30729),i=/#|\.prototype\./,a=function(e,t){var r=u[s(e)];return r===c||r!==l&&(o(t)?n(t):!!t)},s=a.normalize=function(e){return String(e).replace(i,".").toLowerCase()},u=a.data={},l=a.NATIVE="N",c=a.POLYFILL="P";e.exports=a},16254:function(e){"use strict";e.exports=function(e){return null===e||void 0===e}},10691:function(e,t,r){"use strict";function n(e){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o=r(30729),i=r(89967),a=i.all;e.exports=i.IS_HTMLDDA?function(e){return"object"==n(e)?null!==e:o(e)||e===a}:function(e){return"object"==n(e)?null!==e:o(e)}},31437:function(e){"use strict";e.exports=!1},44192:function(e,t,r){"use strict";function n(e){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o=r(8078),i=r(30729),a=r(55522),s=r(77860),u=Object;e.exports=s?function(e){return"symbol"==n(e)}:function(e){var t=o("Symbol");return i(t)&&a(t.prototype,u(e))}},6803:function(e,t,r){"use strict";var n=r(85108);e.exports=function(e){return n(e.length)}},37948:function(e,t,r){"use strict";var n=r(99738),o=r(56583),i=r(30729),a=r(61675),s=r(96539),u=r(41864).CONFIGURABLE,l=r(86111),c=r(44751),f=c.enforce,h=c.get,p=String,d=Object.defineProperty,y=n("".slice),v=n("".replace),g=n([].join),m=s&&!o(function(){return 8!==d(function(){},"length",{value:8}).length}),b=String(String).split("String"),w=e.exports=function(e,t,r){"Symbol("===y(p(t),0,7)&&(t="["+v(p(t),/^Symbol\(([^)]*)\)/,"$1")+"]"),r&&r.getter&&(t="get "+t),r&&r.setter&&(t="set "+t),(!a(e,"name")||u&&e.name!==t)&&(s?d(e,"name",{value:t,configurable:!0}):e.name=t),m&&r&&a(r,"arity")&&e.length!==r.arity&&d(e,"length",{value:r.arity});try{r&&a(r,"constructor")&&r.constructor?s&&d(e,"prototype",{writable:!1}):e.prototype&&(e.prototype=void 0)}catch(e){}var n=f(e);return a(n,"source")||(n.source=g(b,"string"==typeof t?t:"")),e};Function.prototype.toString=w(function(){return i(this)&&h(this).source||l(this)},"toString")},84920:function(e){"use strict";var t=Math.ceil,r=Math.floor;e.exports=Math.trunc||function(e){var n=+e;return(n>0?r:t)(n)}},77328:function(e,t,r){"use strict";var n=r(96539),o=r(99738),i=r(75057),a=r(56583),s=r(35403),u=r(47485),l=r(75339),c=r(5825),f=r(55407),h=Object.assign,p=Object.defineProperty,d=o([].concat);e.exports=!h||a(function(){if(n&&1!==h({b:1},h(p({},"a",{enumerable:!0,get:function(){p(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},r=Symbol("assign detection");return e[r]=7,"abcdefghijklmnopqrst".split("").forEach(function(e){t[e]=e}),7!==h({},e)[r]||"abcdefghijklmnopqrst"!==s(h({},t)).join("")})?function(e,t){for(var r=c(e),o=arguments.length,a=1,h=u.f,p=l.f;o>a;)for(var y,v=f(arguments[a++]),g=h?d(s(v),h(v)):s(v),m=g.length,b=0;m>b;)y=g[b++],n&&!i(p,v,y)||(r[y]=v[y]);return r}:h},60704:function(e,t,r){"use strict";var n=r(96539),o=r(2175),i=r(4821),a=r(57563),s=r(99737),u=TypeError,l=Object.defineProperty,c=Object.getOwnPropertyDescriptor;t.f=n?i?function(e,t,r){if(a(e),t=s(t),a(r),"function"==typeof e&&"prototype"===t&&"value"in r&&"writable"in r&&!r.writable){var n=c(e,t);n&&n.writable&&(e[t]=r.value,r={configurable:"configurable"in r?r.configurable:n.configurable,enumerable:"enumerable"in r?r.enumerable:n.enumerable,writable:!1})}return l(e,t,r)}:l:function(e,t,r){if(a(e),t=s(t),a(r),o)try{return l(e,t,r)}catch(e){}if("get"in r||"set"in r)throw u("Accessors not supported");return"value"in r&&(e[t]=r.value),e}},67238:function(e,t,r){"use strict";var n=r(96539),o=r(75057),i=r(75339),a=r(14925),s=r(6462),u=r(99737),l=r(61675),c=r(2175),f=Object.getOwnPropertyDescriptor;t.f=n?f:function(e,t){if(e=s(e),t=u(t),c)try{return f(e,t)}catch(e){}if(l(e,t))return a(!o(i.f,e,t),e[t])}},95454:function(e,t,r){"use strict";var n=r(70497),o=r(68525).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return n(e,o)}},47485:function(e,t){"use strict";t.f=Object.getOwnPropertySymbols},55522:function(e,t,r){"use strict";var n=r(99738);e.exports=n({}.isPrototypeOf)},70497:function(e,t,r){"use strict";var n=r(99738),o=r(61675),i=r(6462),a=r(48632).indexOf,s=r(20940),u=n([].push);e.exports=function(e,t){var r,n=i(e),l=0,c=[];for(r in n)!o(s,r)&&o(n,r)&&u(c,r);for(;t.length>l;)o(n,r=t[l++])&&(~a(c,r)||u(c,r));return c}},35403:function(e,t,r){"use strict";var n=r(70497),o=r(68525);e.exports=Object.keys||function(e){return n(e,o)}},75339:function(e,t){"use strict";var r={}.propertyIsEnumerable,n=Object.getOwnPropertyDescriptor,o=n&&!r.call({1:2},1);t.f=o?function(e){var t=n(this,e);return!!t&&t.enumerable}:r},32821:function(e,t,r){"use strict";var n=r(75057),o=r(30729),i=r(10691),a=TypeError;e.exports=function(e,t){var r,s;if("string"===t&&o(r=e.toString)&&!i(s=n(r,e)))return s;if(o(r=e.valueOf)&&!i(s=n(r,e)))return s;if("string"!==t&&o(r=e.toString)&&!i(s=n(r,e)))return s;throw a("Can't convert object to primitive value")}},89402:function(e,t,r){"use strict";var n=r(8078),o=r(99738),i=r(95454),a=r(47485),s=r(57563),u=o([].concat);e.exports=n("Reflect","ownKeys")||function(e){var t=i.f(s(e)),r=a.f;return r?u(t,r(e)):t}},50097:function(e,t,r){"use strict";var n=r(75835);e.exports=n},71894:function(e,t,r){"use strict";var n=r(16254),o=TypeError;e.exports=function(e){if(n(e))throw o("Can't call method on "+e);return e}},67307:function(e,t,r){"use strict";var n=r(85464),o=r(16065),i=n("keys");e.exports=function(e){return i[e]||(i[e]=o(e))}},29700:function(e,t,r){"use strict";var n=r(75835),o=r(80161),i=n["__core-js_shared__"]||o("__core-js_shared__",{});e.exports=i},85464:function(e,t,r){"use strict";var n=r(31437),o=r(29700);(e.exports=function(e,t){return o[e]||(o[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.32.2",mode:n?"pure":"global",copyright:"Â© 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.32.2/LICENSE",source:"https://github.com/zloirock/core-js"})},94993:function(e,t,r){"use strict";var n=r(39282),o=r(56583),i=r(75835).String;e.exports=!!Object.getOwnPropertySymbols&&!o(function(){var e=Symbol("symbol detection");return!i(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&n&&n<41})},65333:function(e,t,r){"use strict";var n=r(71087),o=Math.max,i=Math.min;e.exports=function(e,t){var r=n(e);return r<0?o(r+t,0):i(r,t)}},6462:function(e,t,r){"use strict";var n=r(55407),o=r(71894);e.exports=function(e){return n(o(e))}},71087:function(e,t,r){"use strict";var n=r(84920);e.exports=function(e){var t=+e;return t!=t||0===t?0:n(t)}},85108:function(e,t,r){"use strict";var n=r(71087),o=Math.min;e.exports=function(e){return e>0?o(n(e),9007199254740991):0}},5825:function(e,t,r){"use strict";var n=r(71894),o=Object;e.exports=function(e){return o(n(e))}},41044:function(e,t,r){"use strict";var n=r(75057),o=r(10691),i=r(44192),a=r(92337),s=r(32821),u=r(63121),l=TypeError,c=u("toPrimitive");e.exports=function(e,t){if(!o(e)||i(e))return e;var r,u=a(e,c);if(u){if(void 0===t&&(t="default"),r=n(u,e,t),!o(r)||i(r))return r;throw l("Can't convert object to primitive value")}return void 0===t&&(t="number"),s(e,t)}},99737:function(e,t,r){"use strict";var n=r(41044),o=r(44192);e.exports=function(e){var t=n(e,"string");return o(t)?t:t+""}},48434:function(e){"use strict";var t=String;e.exports=function(e){try{return t(e)}catch(e){return"Object"}}},16065:function(e,t,r){"use strict";var n=r(99738),o=0,i=Math.random(),a=n(1..toString);e.exports=function(e){return"Symbol("+(void 0===e?"":e)+")_"+a(++o+i,36)}},77860:function(e,t,r){"use strict";function n(e){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o=r(94993);e.exports=o&&!Symbol.sham&&"symbol"==n(Symbol.iterator)},4821:function(e,t,r){"use strict";var n=r(96539),o=r(56583);e.exports=n&&o(function(){return 42!==Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype})},39801:function(e,t,r){"use strict";var n=r(75835),o=r(30729),i=n.WeakMap;e.exports=o(i)&&/native code/.test(String(i))},75336:function(e,t,r){"use strict";var n=r(50097),o=r(61675),i=r(98384),a=r(60704).f;e.exports=function(e){var t=n.Symbol||(n.Symbol={});o(t,e)||a(t,e,{value:i.f(e)})}},98384:function(e,t,r){"use strict";var n=r(63121);t.f=n},63121:function(e,t,r){"use strict";var n=r(75835),o=r(85464),i=r(61675),a=r(16065),s=r(94993),u=r(77860),l=n.Symbol,c=o("wks"),f=u?l.for||l:l&&l.withoutSetter||a;e.exports=function(e){return i(c,e)||(c[e]=s&&i(l,e)?l[e]:f("Symbol."+e)),c[e]}},47422:function(e,t,r){"use strict";var n=r(97926),o=r(77328);n({target:"Object",stat:!0,arity:2,forced:Object.assign!==o},{assign:o})},44835:function(e,t,r){"use strict";r(75336)("asyncIterator")},86727:function(e,t,r){"use strict";var n=r(10879);e.exports=n},8690:function(e,t,r){"use strict";var n=r(33723);e.exports=n},15128:function(e,t){var r,n,o,i;function a(e){"@babel/helpers - typeof";return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}i=function(e){"use strict";var t={value:function(){}};function r(){for(var e,t=0,r=arguments.length,o={};t<r;++t){if(!(e=arguments[t]+"")||e in o||/[\s.]/.test(e))throw new Error("illegal type: "+e);o[e]=[]}return new n(o)}function n(e){this._=e}function o(e,t){for(var r,n=0,o=e.length;n<o;++n)if((r=e[n]).name===t)return r.value}function i(e,r,n){for(var o=0,i=e.length;o<i;++o)if(e[o].name===r){e[o]=t,e=e.slice(0,o).concat(e.slice(o+1));break}return null!=n&&e.push({name:r,value:n}),e}n.prototype=r.prototype={constructor:n,on:function(e,t){var r,n,a=this._,s=(n=a,(e+"").trim().split(/^|\s+/).map(function(e){var t="",r=e.indexOf(".");if(r>=0&&(t=e.slice(r+1),e=e.slice(0,r)),e&&!n.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:t}})),u=-1,l=s.length;if(!(arguments.length<2)){if(null!=t&&"function"!=typeof t)throw new Error("invalid callback: "+t);for(;++u<l;)if(r=(e=s[u]).type)a[r]=i(a[r],e.name,t);else if(null==t)for(r in a)a[r]=i(a[r],e.name,null);return this}for(;++u<l;)if((r=(e=s[u]).type)&&(r=o(a[r],e.name)))return r},copy:function(){var e={},t=this._;for(var r in t)e[r]=t[r].slice();return new n(e)},call:function(e,t){if((r=arguments.length-2)>0)for(var r,n,o=new Array(r),i=0;i<r;++i)o[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(i=0,r=(n=this._[e]).length;i<r;++i)n[i].value.apply(t,o)},apply:function(e,t,r){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var n=this._[e],o=0,i=n.length;o<i;++o)n[o].value.apply(t,r)}},e.dispatch=r,Object.defineProperty(e,"__esModule",{value:!0})},"object"===a(t)?i(t):(n=[t],void 0===(o="function"==typeof(r=i)?r.apply(t,n):r)||(e.exports=o))},3301:function(e,t){var r,n,o,i;function a(e){"@babel/helpers - typeof";return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}i=function(e){"use strict";function t(e){return((e*=2)<=1?e*e:--e*(2-e)+1)/2}function r(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var n=function e(t){function r(e){return Math.pow(e,t)}return t=+t,r.exponent=e,r}(3),o=function e(t){function r(e){return 1-Math.pow(1-e,t)}return t=+t,r.exponent=e,r}(3),i=function e(t){function r(e){return((e*=2)<=1?Math.pow(e,t):2-Math.pow(2-e,t))/2}return t=+t,r.exponent=e,r}(3),a=Math.PI,s=a/2;function u(e){return(1-Math.cos(a*e))/2}function l(e){return 1.0009775171065494*(Math.pow(2,-10*e)-.0009765625)}function c(e){return((e*=2)<=1?l(1-e):2-l(e-1))/2}function f(e){return((e*=2)<=1?1-Math.sqrt(1-e*e):Math.sqrt(1-(e-=2)*e)+1)/2}var h=4/11,p=6/11,d=8/11,y=.75,v=9/11,g=10/11,m=.9375,b=21/22,w=63/64,_=1/h/h;function x(e){return(e=+e)<h?_*e*e:e<d?_*(e-=p)*e+y:e<g?_*(e-=v)*e+m:_*(e-=b)*e+w}var S=function e(t){function r(e){return(e=+e)*e*(t*(e-1)+e)}return t=+t,r.overshoot=e,r}(1.70158),O=function e(t){function r(e){return--e*e*((e+1)*t+e)+1}return t=+t,r.overshoot=e,r}(1.70158),P=function e(t){function r(e){return((e*=2)<1?e*e*((t+1)*e-t):(e-=2)*e*((t+1)*e+t)+2)/2}return t=+t,r.overshoot=e,r}(1.70158),E=2*Math.PI,k=function e(t,r){var n=Math.asin(1/(t=Math.max(1,t)))*(r/=E);function o(e){return t*l(- --e)*Math.sin((n-e)/r)}return o.amplitude=function(t){return e(t,r*E)},o.period=function(r){return e(t,r)},o}(1,.3),M=function e(t,r){var n=Math.asin(1/(t=Math.max(1,t)))*(r/=E);function o(e){return 1-t*l(e=+e)*Math.sin((e+n)/r)}return o.amplitude=function(t){return e(t,r*E)},o.period=function(r){return e(t,r)},o}(1,.3),C=function e(t,r){var n=Math.asin(1/(t=Math.max(1,t)))*(r/=E);function o(e){return((e=2*e-1)<0?t*l(-e)*Math.sin((n-e)/r):2-t*l(e)*Math.sin((n+e)/r))/2}return o.amplitude=function(t){return e(t,r*E)},o.period=function(r){return e(t,r)},o}(1,.3);e.easeBack=P,e.easeBackIn=S,e.easeBackInOut=P,e.easeBackOut=O,e.easeBounce=x,e.easeBounceIn=function(e){return 1-x(1-e)},e.easeBounceInOut=function(e){return((e*=2)<=1?1-x(1-e):x(e-1)+1)/2},e.easeBounceOut=x,e.easeCircle=f,e.easeCircleIn=function(e){return 1-Math.sqrt(1-e*e)},e.easeCircleInOut=f,e.easeCircleOut=function(e){return Math.sqrt(1- --e*e)},e.easeCubic=r,e.easeCubicIn=function(e){return e*e*e},e.easeCubicInOut=r,e.easeCubicOut=function(e){return--e*e*e+1},e.easeElastic=M,e.easeElasticIn=k,e.easeElasticInOut=C,e.easeElasticOut=M,e.easeExp=c,e.easeExpIn=function(e){return l(1-+e)},e.easeExpInOut=c,e.easeExpOut=function(e){return 1-l(e)},e.easeLinear=function(e){return+e},e.easePoly=i,e.easePolyIn=n,e.easePolyInOut=i,e.easePolyOut=o,e.easeQuad=t,e.easeQuadIn=function(e){return e*e},e.easeQuadInOut=t,e.easeQuadOut=function(e){return e*(2-e)},e.easeSin=u,e.easeSinIn=function(e){return 1==+e?1:1-Math.cos(e*s)},e.easeSinInOut=u,e.easeSinOut=function(e){return Math.sin(e*s)},Object.defineProperty(e,"__esModule",{value:!0})},"object"===a(t)?i(t):(n=[t],void 0===(o="function"==typeof(r=i)?r.apply(t,n):r)||(e.exports=o))},56129:function(e,t,r){var n,o,i,a;function s(e){"@babel/helpers - typeof";return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}a=function(e,t,r,n){"use strict";function o(e){return function(){return e}}function i(e){return 1e-6*(e()-.5)}function a(e){return e.x+e.vx}function u(e){return e.y+e.vy}function l(e){return e.index}function c(e,t){var r=e.get(t);if(!r)throw new Error("node not found: "+t);return r}var f=1664525,h=1013904223,p=4294967296;function d(e){return e.x}function y(e){return e.y}var v=10,g=Math.PI*(3-Math.sqrt(5));e.forceCenter=function(e,t){var r,n=1;function o(){var o,i,a=r.length,s=0,u=0;for(o=0;o<a;++o)s+=(i=r[o]).x,u+=i.y;for(s=(s/a-e)*n,u=(u/a-t)*n,o=0;o<a;++o)(i=r[o]).x-=s,i.y-=u}return null==e&&(e=0),null==t&&(t=0),o.initialize=function(e){r=e},o.x=function(t){return arguments.length?(e=+t,o):e},o.y=function(e){return arguments.length?(t=+e,o):t},o.strength=function(e){return arguments.length?(n=+e,o):n},o},e.forceCollide=function(e){var r,n,s,l=1,c=1;function f(){for(var e,o,f,p,d,y,v,g=r.length,m=0;m<c;++m)for(o=t.quadtree(r,a,u).visitAfter(h),e=0;e<g;++e)f=r[e],y=n[f.index],v=y*y,p=f.x+f.vx,d=f.y+f.vy,o.visit(b);function b(e,t,r,n,o){var a=e.data,u=e.r,c=y+u;if(!a)return t>p+c||n<p-c||r>d+c||o<d-c;if(a.index>f.index){var h=p-a.x-a.vx,g=d-a.y-a.vy,m=h*h+g*g;m<c*c&&(0===h&&(m+=(h=i(s))*h),0===g&&(m+=(g=i(s))*g),m=(c-(m=Math.sqrt(m)))/m*l,f.vx+=(h*=m)*(c=(u*=u)/(v+u)),f.vy+=(g*=m)*c,a.vx-=h*(c=1-c),a.vy-=g*c)}}}function h(e){if(e.data)return e.r=n[e.data.index];for(var t=e.r=0;t<4;++t)e[t]&&e[t].r>e.r&&(e.r=e[t].r)}function p(){if(r){var t,o,i=r.length;for(n=new Array(i),t=0;t<i;++t)o=r[t],n[o.index]=+e(o,t,r)}}return"function"!=typeof e&&(e=o(null==e?1:+e)),f.initialize=function(e,t){r=e,s=t,p()},f.iterations=function(e){return arguments.length?(c=+e,f):c},f.strength=function(e){return arguments.length?(l=+e,f):l},f.radius=function(t){return arguments.length?(e="function"==typeof t?t:o(+t),p(),f):e},f},e.forceLink=function(e){var t,r,n,a,u,f,h=l,p=function(e){return 1/Math.min(a[e.source.index],a[e.target.index])},d=o(30),y=1;function v(n){for(var o=0,a=e.length;o<y;++o)for(var s,l,c,h,p,d,v,g=0;g<a;++g)l=(s=e[g]).source,h=(c=s.target).x+c.vx-l.x-l.vx||i(f),p=c.y+c.vy-l.y-l.vy||i(f),h*=d=((d=Math.sqrt(h*h+p*p))-r[g])/d*n*t[g],p*=d,c.vx-=h*(v=u[g]),c.vy-=p*v,l.vx+=h*(v=1-v),l.vy+=p*v}function g(){if(n){var o,i,l=n.length,f=e.length,p=new Map(n.map(function(e,t){return[h(e,t,n),e]}));for(o=0,a=new Array(l);o<f;++o)(i=e[o]).index=o,"object"!==s(i.source)&&(i.source=c(p,i.source)),"object"!==s(i.target)&&(i.target=c(p,i.target)),a[i.source.index]=(a[i.source.index]||0)+1,a[i.target.index]=(a[i.target.index]||0)+1;for(o=0,u=new Array(f);o<f;++o)i=e[o],u[o]=a[i.source.index]/(a[i.source.index]+a[i.target.index]);t=new Array(f),m(),r=new Array(f),b()}}function m(){if(n)for(var r=0,o=e.length;r<o;++r)t[r]=+p(e[r],r,e)}function b(){if(n)for(var t=0,o=e.length;t<o;++t)r[t]=+d(e[t],t,e)}return null==e&&(e=[]),v.initialize=function(e,t){n=e,f=t,g()},v.links=function(t){return arguments.length?(e=t,g(),v):e},v.id=function(e){return arguments.length?(h=e,v):h},v.iterations=function(e){return arguments.length?(y=+e,v):y},v.strength=function(e){return arguments.length?(p="function"==typeof e?e:o(+e),m(),v):p},v.distance=function(e){return arguments.length?(d="function"==typeof e?e:o(+e),b(),v):d},v},e.forceManyBody=function(){var e,r,n,a,s,u=o(-30),l=1,c=1/0,f=.81;function h(n){var o,i=e.length,s=t.quadtree(e,d,y).visitAfter(v);for(a=n,o=0;o<i;++o)r=e[o],s.visit(g)}function p(){if(e){var t,r,n=e.length;for(s=new Array(n),t=0;t<n;++t)r=e[t],s[r.index]=+u(r,t,e)}}function v(e){var t,r,n,o,i,a=0,u=0;if(e.length){for(n=o=i=0;i<4;++i)(t=e[i])&&(r=Math.abs(t.value))&&(a+=t.value,u+=r,n+=r*t.x,o+=r*t.y);e.x=n/u,e.y=o/u}else{(t=e).x=t.data.x,t.y=t.data.y;do{a+=s[t.data.index]}while(t=t.next)}e.value=a}function g(e,t,o,u){if(!e.value)return!0;var h=e.x-r.x,p=e.y-r.y,d=u-t,y=h*h+p*p;if(d*d/f<y)return y<c&&(0===h&&(y+=(h=i(n))*h),0===p&&(y+=(p=i(n))*p),y<l&&(y=Math.sqrt(l*y)),r.vx+=h*e.value*a/y,r.vy+=p*e.value*a/y),!0;if(!(e.length||y>=c)){(e.data!==r||e.next)&&(0===h&&(y+=(h=i(n))*h),0===p&&(y+=(p=i(n))*p),y<l&&(y=Math.sqrt(l*y)));do{e.data!==r&&(d=s[e.data.index]*a/y,r.vx+=h*d,r.vy+=p*d)}while(e=e.next)}}return h.initialize=function(t,r){e=t,n=r,p()},h.strength=function(e){return arguments.length?(u="function"==typeof e?e:o(+e),p(),h):u},h.distanceMin=function(e){return arguments.length?(l=e*e,h):Math.sqrt(l)},h.distanceMax=function(e){return arguments.length?(c=e*e,h):Math.sqrt(c)},h.theta=function(e){return arguments.length?(f=e*e,h):Math.sqrt(f)},h},e.forceRadial=function(e,t,r){var n,i,a,s=o(.1);function u(e){for(var o=0,s=n.length;o<s;++o){var u=n[o],l=u.x-t||1e-6,c=u.y-r||1e-6,f=Math.sqrt(l*l+c*c),h=(a[o]-f)*i[o]*e/f;u.vx+=l*h,u.vy+=c*h}}function l(){if(n){var t,r=n.length;for(i=new Array(r),a=new Array(r),t=0;t<r;++t)a[t]=+e(n[t],t,n),i[t]=isNaN(a[t])?0:+s(n[t],t,n)}}return"function"!=typeof e&&(e=o(+e)),null==t&&(t=0),null==r&&(r=0),u.initialize=function(e){n=e,l()},u.strength=function(e){return arguments.length?(s="function"==typeof e?e:o(+e),l(),u):s},u.radius=function(t){return arguments.length?(e="function"==typeof t?t:o(+t),l(),u):e},u.x=function(e){return arguments.length?(t=+e,u):t},u.y=function(e){return arguments.length?(r=+e,u):r},u},e.forceSimulation=function(e){var t,o,i=1,a=.001,s=1-Math.pow(a,1/300),u=0,l=.6,c=new Map,d=n.timer(b),y=r.dispatch("tick","end"),m=(o=1,function(){return(o=(f*o+h)%p)/p});function b(){w(),y.call("tick",t),i<a&&(d.stop(),y.call("end",t))}function w(r){var n,o,a=e.length;void 0===r&&(r=1);for(var f=0;f<r;++f)for(i+=(u-i)*s,c.forEach(function(e){e(i)}),n=0;n<a;++n)null==(o=e[n]).fx?o.x+=o.vx*=l:(o.x=o.fx,o.vx=0),null==o.fy?o.y+=o.vy*=l:(o.y=o.fy,o.vy=0);return t}function _(){for(var t,r=0,n=e.length;r<n;++r){if((t=e[r]).index=r,null!=t.fx&&(t.x=t.fx),null!=t.fy&&(t.y=t.fy),isNaN(t.x)||isNaN(t.y)){var o=v*Math.sqrt(.5+r),i=r*g;t.x=o*Math.cos(i),t.y=o*Math.sin(i)}(isNaN(t.vx)||isNaN(t.vy))&&(t.vx=t.vy=0)}}function x(t){return t.initialize&&t.initialize(e,m),t}return null==e&&(e=[]),_(),t={tick:w,restart:function(){return d.restart(b),t},stop:function(){return d.stop(),t},nodes:function(r){return arguments.length?(e=r,_(),c.forEach(x),t):e},alpha:function(e){return arguments.length?(i=+e,t):i},alphaMin:function(e){return arguments.length?(a=+e,t):a},alphaDecay:function(e){return arguments.length?(s=+e,t):+s},alphaTarget:function(e){return arguments.length?(u=+e,t):u},velocityDecay:function(e){return arguments.length?(l=1-e,t):1-l},randomSource:function(e){return arguments.length?(m=e,c.forEach(x),t):m},force:function(e,r){return arguments.length>1?(null==r?c.delete(e):c.set(e,x(r)),t):c.get(e)},find:function(t,r,n){var o,i,a,s,u,l=0,c=e.length;for(null==n?n=1/0:n*=n,l=0;l<c;++l)(a=(o=t-(s=e[l]).x)*o+(i=r-s.y)*i)<n&&(u=s,n=a);return u},on:function(e,r){return arguments.length>1?(y.on(e,r),t):y.on(e)}}},e.forceX=function(e){var t,r,n,i=o(.1);function a(e){for(var o,i=0,a=t.length;i<a;++i)(o=t[i]).vx+=(n[i]-o.x)*r[i]*e}function s(){if(t){var o,a=t.length;for(r=new Array(a),n=new Array(a),o=0;o<a;++o)r[o]=isNaN(n[o]=+e(t[o],o,t))?0:+i(t[o],o,t)}}return"function"!=typeof e&&(e=o(null==e?0:+e)),a.initialize=function(e){t=e,s()},a.strength=function(e){return arguments.length?(i="function"==typeof e?e:o(+e),s(),a):i},a.x=function(t){return arguments.length?(e="function"==typeof t?t:o(+t),s(),a):e},a},e.forceY=function(e){var t,r,n,i=o(.1);function a(e){for(var o,i=0,a=t.length;i<a;++i)(o=t[i]).vy+=(n[i]-o.y)*r[i]*e}function s(){if(t){var o,a=t.length;for(r=new Array(a),n=new Array(a),o=0;o<a;++o)r[o]=isNaN(n[o]=+e(t[o],o,t))?0:+i(t[o],o,t)}}return"function"!=typeof e&&(e=o(null==e?0:+e)),a.initialize=function(e){t=e,s()},a.strength=function(e){return arguments.length?(i="function"==typeof e?e:o(+e),s(),a):i},a.y=function(t){return arguments.length?(e="function"==typeof t?t:o(+t),s(),a):e},a},Object.defineProperty(e,"__esModule",{value:!0})},"object"===s(t)?a(t,r(21617),r(15128),r(42433)):(o=[t,r(21617),r(15128),r(42433)],void 0===(i="function"==typeof(n=a)?n.apply(t,o):n)||(e.exports=i))},21617:function(e,t){var r,n,o,i;function a(e){"@babel/helpers - typeof";return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}i=function(e){"use strict";function t(e,t,r,n){if(isNaN(t)||isNaN(r))return e;var o,i,a,s,u,l,c,f,h,p=e._root,d={data:n},y=e._x0,v=e._y0,g=e._x1,m=e._y1;if(!p)return e._root=d,e;for(;p.length;)if((l=t>=(i=(y+g)/2))?y=i:g=i,(c=r>=(a=(v+m)/2))?v=a:m=a,o=p,!(p=p[f=c<<1|l]))return o[f]=d,e;if(s=+e._x.call(null,p.data),u=+e._y.call(null,p.data),t===s&&r===u)return d.next=p,o?o[f]=d:e._root=d,e;do{o=o?o[f]=new Array(4):e._root=new Array(4),(l=t>=(i=(y+g)/2))?y=i:g=i,(c=r>=(a=(v+m)/2))?v=a:m=a}while((f=c<<1|l)==(h=(u>=a)<<1|s>=i));return o[h]=p,o[f]=d,e}function r(e,t,r,n,o){this.node=e,this.x0=t,this.y0=r,this.x1=n,this.y1=o}function n(e){return e[0]}function o(e){return e[1]}function i(e,t,r){var i=new a(null==t?n:t,null==r?o:r,NaN,NaN,NaN,NaN);return null==e?i:i.addAll(e)}function a(e,t,r,n,o,i){this._x=e,this._y=t,this._x0=r,this._y0=n,this._x1=o,this._y1=i,this._root=void 0}function s(e){for(var t={data:e.data},r=t;e=e.next;)r=r.next={data:e.data};return t}var u=i.prototype=a.prototype;u.copy=function(){var e,t,r=new a(this._x,this._y,this._x0,this._y0,this._x1,this._y1),n=this._root;if(!n)return r;if(!n.length)return r._root=s(n),r;for(e=[{source:n,target:r._root=new Array(4)}];n=e.pop();)for(var o=0;o<4;++o)(t=n.source[o])&&(t.length?e.push({source:t,target:n.target[o]=new Array(4)}):n.target[o]=s(t));return r},u.add=function(e){var r=+this._x.call(null,e),n=+this._y.call(null,e);return t(this.cover(r,n),r,n,e)},u.addAll=function(e){var r,n,o,i,a=e.length,s=new Array(a),u=new Array(a),l=1/0,c=1/0,f=-1/0,h=-1/0;for(n=0;n<a;++n)isNaN(o=+this._x.call(null,r=e[n]))||isNaN(i=+this._y.call(null,r))||(s[n]=o,u[n]=i,o<l&&(l=o),o>f&&(f=o),i<c&&(c=i),i>h&&(h=i));if(l>f||c>h)return this;for(this.cover(l,c).cover(f,h),n=0;n<a;++n)t(this,s[n],u[n],e[n]);return this},u.cover=function(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var r=this._x0,n=this._y0,o=this._x1,i=this._y1;if(isNaN(r))o=(r=Math.floor(e))+1,i=(n=Math.floor(t))+1;else{for(var a,s,u=o-r||1,l=this._root;r>e||e>=o||n>t||t>=i;)switch(s=(t<n)<<1|e<r,(a=new Array(4))[s]=l,l=a,u*=2,s){case 0:o=r+u,i=n+u;break;case 1:r=o-u,i=n+u;break;case 2:o=r+u,n=i-u;break;case 3:r=o-u,n=i-u}this._root&&this._root.length&&(this._root=l)}return this._x0=r,this._y0=n,this._x1=o,this._y1=i,this},u.data=function(){var e=[];return this.visit(function(t){if(!t.length)do{e.push(t.data)}while(t=t.next)}),e},u.extent=function(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},u.find=function(e,t,n){var o,i,a,s,u,l,c,f=this._x0,h=this._y0,p=this._x1,d=this._y1,y=[],v=this._root;for(v&&y.push(new r(v,f,h,p,d)),null==n?n=1/0:(f=e-n,h=t-n,p=e+n,d=t+n,n*=n);l=y.pop();)if(!(!(v=l.node)||(i=l.x0)>p||(a=l.y0)>d||(s=l.x1)<f||(u=l.y1)<h))if(v.length){var g=(i+s)/2,m=(a+u)/2;y.push(new r(v[3],g,m,s,u),new r(v[2],i,m,g,u),new r(v[1],g,a,s,m),new r(v[0],i,a,g,m)),(c=(t>=m)<<1|e>=g)&&(l=y[y.length-1],y[y.length-1]=y[y.length-1-c],y[y.length-1-c]=l)}else{var b=e-+this._x.call(null,v.data),w=t-+this._y.call(null,v.data),_=b*b+w*w;if(_<n){var x=Math.sqrt(n=_);f=e-x,h=t-x,p=e+x,d=t+x,o=v.data}}return o},u.remove=function(e){if(isNaN(i=+this._x.call(null,e))||isNaN(a=+this._y.call(null,e)))return this;var t,r,n,o,i,a,s,u,l,c,f,h,p=this._root,d=this._x0,y=this._y0,v=this._x1,g=this._y1;if(!p)return this;if(p.length)for(;;){if((l=i>=(s=(d+v)/2))?d=s:v=s,(c=a>=(u=(y+g)/2))?y=u:g=u,t=p,!(p=p[f=c<<1|l]))return this;if(!p.length)break;(t[f+1&3]||t[f+2&3]||t[f+3&3])&&(r=t,h=f)}for(;p.data!==e;)if(n=p,!(p=p.next))return this;return(o=p.next)&&delete p.next,n?(o?n.next=o:delete n.next,this):t?(o?t[f]=o:delete t[f],(p=t[0]||t[1]||t[2]||t[3])&&p===(t[3]||t[2]||t[1]||t[0])&&!p.length&&(r?r[h]=p:this._root=p),this):(this._root=o,this)},u.removeAll=function(e){for(var t=0,r=e.length;t<r;++t)this.remove(e[t]);return this},u.root=function(){return this._root},u.size=function(){var e=0;return this.visit(function(t){if(!t.length)do{++e}while(t=t.next)}),e},u.visit=function(e){var t,n,o,i,a,s,u=[],l=this._root;for(l&&u.push(new r(l,this._x0,this._y0,this._x1,this._y1));t=u.pop();)if(!e(l=t.node,o=t.x0,i=t.y0,a=t.x1,s=t.y1)&&l.length){var c=(o+a)/2,f=(i+s)/2;(n=l[3])&&u.push(new r(n,c,f,a,s)),(n=l[2])&&u.push(new r(n,o,f,c,s)),(n=l[1])&&u.push(new r(n,c,i,a,f)),(n=l[0])&&u.push(new r(n,o,i,c,f))}return this},u.visitAfter=function(e){var t,n=[],o=[];for(this._root&&n.push(new r(this._root,this._x0,this._y0,this._x1,this._y1));t=n.pop();){var i=t.node;if(i.length){var a,s=t.x0,u=t.y0,l=t.x1,c=t.y1,f=(s+l)/2,h=(u+c)/2;(a=i[0])&&n.push(new r(a,s,u,f,h)),(a=i[1])&&n.push(new r(a,f,u,l,h)),(a=i[2])&&n.push(new r(a,s,h,f,c)),(a=i[3])&&n.push(new r(a,f,h,l,c))}o.push(t)}for(;t=o.pop();)e(t.node,t.x0,t.y0,t.x1,t.y1);return this},u.x=function(e){return arguments.length?(this._x=e,this):this._x},u.y=function(e){return arguments.length?(this._y=e,this):this._y},e.quadtree=i,Object.defineProperty(e,"__esModule",{value:!0})},"object"===a(t)?i(t):(n=[t],void 0===(o="function"==typeof(r=i)?r.apply(t,n):r)||(e.exports=o))},42433:function(e,t){var r,n,o,i;function a(e){"@babel/helpers - typeof";return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}i=function(e){"use strict";var t,r,n=0,o=0,i=0,s=1e3,u=0,l=0,c=0,f="object"===("undefined"==typeof performance?"undefined":a(performance))&&performance.now?performance:Date,h="object"===("undefined"==typeof window?"undefined":a(window))&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function p(){return l||(h(d),l=f.now()+c)}function d(){l=0}function y(){this._call=this._time=this._next=null}function v(e,t,r){var n=new y;return n.restart(e,t,r),n}function g(){p(),++n;for(var e,r=t;r;)(e=l-r._time)>=0&&r._call.call(null,e),r=r._next;--n}function m(){l=(u=f.now())+c,n=o=0;try{g()}finally{n=0,function(){var e,n,o=t,i=1/0;for(;o;)o._call?(i>o._time&&(i=o._time),e=o,o=o._next):(n=o._next,o._next=null,o=e?e._next=n:t=n);r=e,w(i)}(),l=0}}function b(){var e=f.now(),t=e-u;t>s&&(c-=t,u=e)}function w(e){n||(o&&(o=clearTimeout(o)),e-l>24?(e<1/0&&(o=setTimeout(m,e-f.now()-c)),i&&(i=clearInterval(i))):(i||(u=f.now(),i=setInterval(b,s)),n=1,h(m)))}y.prototype=v.prototype={constructor:y,restart:function(e,n,o){if("function"!=typeof e)throw new TypeError("callback is not a function");o=(null==o?p():+o)+(null==n?0:+n),this._next||r===this||(r?r._next=this:t=this,r=this),this._call=e,this._time=o,w()},stop:function(){this._call&&(this._call=null,this._time=1/0,w())}},e.interval=function(e,t,r){var n=new y,o=t;return null==t?(n.restart(e,t,r),n):(t=+t,r=null==r?p():+r,n.restart(function i(a){a+=o,n.restart(i,o+=t,r),e(a)},t,r),n)},e.now=p,e.timeout=function(e,t,r){var n=new y;return t=null==t?0:+t,n.restart(function(r){n.stop(),e(r+t)},t,r),n},e.timer=v,e.timerFlush=g,Object.defineProperty(e,"__esModule",{value:!0})},"object"===a(t)?i(t):(n=[t],void 0===(o="function"==typeof(r=i)?r.apply(t,n):r)||(e.exports=o))},94756:function(e,t,r){var n,o,i,a;function s(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=p(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function u(e){return function(e){if(Array.isArray(e))return d(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||p(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=f(e);if(t){var o=f(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===m(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,s=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(e){s=!0,o=e}finally{try{a||null==r.return||r.return()}finally{if(s)throw o}}return i}(e,t)||p(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){if(e){if("string"==typeof e)return d(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?d(e,t):void 0}}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function y(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function v(e,t,r){return t&&y(e.prototype,t),r&&y(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e){"@babel/helpers - typeof";return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}a=function(e){"use strict";var t={graph:{meta:{rankDir:"TB",nodeSep:50,rankSep:50,edgeSep:5,align:void 0}},subScene:{meta:{paddingTop:20,paddingBottom:20,paddingLeft:20,paddingRight:20,labelHeight:20}},nodeSize:{meta:{width:100,maxLabelWidth:0,height:20},node:{width:80,height:20,labelOffset:10,maxLabelWidth:40},bridge:{width:5,height:5,radius:2,labelOffset:0}}};function n(){var e,r,n,o,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,s=JSON.parse(JSON.stringify(a)),u=(null===(e=null==i?void 0:i.graph)||void 0===e?void 0:e.meta)||{},l=(null===(r=null==i?void 0:i.subScene)||void 0===r?void 0:r.meta)||{},c=(null===(n=null==i?void 0:i.nodeSize)||void 0===n?void 0:n.meta)||{},f=(null===(o=null==i?void 0:i.nodeSize)||void 0===o?void 0:o.node)||{},h=s.nodeSize.bridge;return{graph:{meta:Object.assign(s.graph.meta,u)},subScene:{meta:Object.assign(s.subScene.meta,l)},nodeSize:{meta:Object.assign(s.nodeSize.meta,c),node:Object.assign(s.nodeSize.node,f),bridge:h}}}function o(e){return"â¬".concat(e,"â¬")}var i,a,f,p,d=o("ROOT"),y=o("BRIDGE_GRAPH");(i=e.NodeType||(e.NodeType={}))[i.META=0]="META",i[i.NODE=1]="NODE",i[i.BRIDGE=2]="BRIDGE",(a=e.InclusionType||(e.InclusionType={}))[a.INCLUDE=0]="INCLUDE",a[a.EXCLUDE=1]="EXCLUDE",a[a.UNSPECIFIED=2]="UNSPECIFIED",(f=e.GraphType||(e.GraphType={}))[f.META=0]="META",f[f.CORE=1]="CORE",f[f.BRIDGE=2]="BRIDGE",(p=e.HierarchyNodeType||(e.HierarchyNodeType={}))[p.META=0]="META",p[p.OP=1]="OP",p[p.SERIES=2]="SERIES";var b="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==r.g?r.g:"undefined"!=typeof self?self:{};function w(e,t){return e(t={exports:{}},t.exports),t.exports}var _=function(e,t){return e===t||e!=e&&t!=t},x=function(e,t){for(var r=e.length;r--;)if(_(e[r][0],t))return r;return-1},S=Array.prototype.splice;function O(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}O.prototype.clear=function(){this.__data__=[],this.size=0},O.prototype.delete=function(e){var t=this.__data__,r=x(t,e);return!(r<0||(r==t.length-1?t.pop():S.call(t,r,1),--this.size,0))},O.prototype.get=function(e){var t=this.__data__,r=x(t,e);return r<0?void 0:t[r][1]},O.prototype.has=function(e){return x(this.__data__,e)>-1},O.prototype.set=function(e,t){var r=this.__data__,n=x(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this};var P,E=O,k="object"==m(b)&&b&&b.Object===Object&&b,M="object"==("undefined"==typeof self?"undefined":m(self))&&self&&self.Object===Object&&self,C=k||M||Function("return this")(),j=C.Symbol,T=Object.prototype,A=T.hasOwnProperty,I=T.toString,R=j?j.toStringTag:void 0,L=Object.prototype.toString,N=j?j.toStringTag:void 0,D=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":N&&N in Object(e)?function(e){var t=A.call(e,R),r=e[R];try{e[R]=void 0;var n=!0}catch(e){}var o=I.call(e);return n&&(t?e[R]=r:delete e[R]),o}(e):function(e){return L.call(e)}(e)},B=function(e){var t=m(e);return null!=e&&("object"==t||"function"==t)},F=function(e){if(!B(e))return!1;var t=D(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t},G=C["__core-js_shared__"],z=(P=/[^.]+$/.exec(G&&G.keys&&G.keys.IE_PROTO||""))?"Symbol(src)_1."+P:"",U=Function.prototype.toString,V=function(e){if(null!=e){try{return U.call(e)}catch(e){}try{return e+""}catch(e){}}return""},W=/^\[object .+?Constructor\]$/,Y=Function.prototype,H=Object.prototype,X=Y.toString,q=H.hasOwnProperty,J=RegExp("^"+X.call(q).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Z=function(e){return!(!B(e)||function(e){return!!z&&z in e}(e))&&(F(e)?J:W).test(V(e))},K=function(e,t){var r=function(e,t){return null==e?void 0:e[t]}(e,t);return Z(r)?r:void 0},Q=K(C,"Map"),$=K(Object,"create"),ee=Object.prototype.hasOwnProperty,te=Object.prototype.hasOwnProperty;function re(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}re.prototype.clear=function(){this.__data__=$?$(null):{},this.size=0},re.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},re.prototype.get=function(e){var t=this.__data__;if($){var r=t[e];return"__lodash_hash_undefined__"===r?void 0:r}return ee.call(t,e)?t[e]:void 0},re.prototype.has=function(e){var t=this.__data__;return $?void 0!==t[e]:te.call(t,e)},re.prototype.set=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=$&&void 0===t?"__lodash_hash_undefined__":t,this};var ne=re,oe=function(e,t){var r=e.__data__;return function(e){var t=m(e);return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?r["string"==typeof t?"string":"hash"]:r.map};function ie(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}ie.prototype.clear=function(){this.size=0,this.__data__={hash:new ne,map:new(Q||E),string:new ne}},ie.prototype.delete=function(e){var t=oe(this,e).delete(e);return this.size-=t?1:0,t},ie.prototype.get=function(e){return oe(this,e).get(e)},ie.prototype.has=function(e){return oe(this,e).has(e)},ie.prototype.set=function(e,t){var r=oe(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this};var ae=ie;function se(e){var t=this.__data__=new E(e);this.size=t.size}se.prototype.clear=function(){this.__data__=new E,this.size=0},se.prototype.delete=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r},se.prototype.get=function(e){return this.__data__.get(e)},se.prototype.has=function(e){return this.__data__.has(e)},se.prototype.set=function(e,t){var r=this.__data__;if(r instanceof E){var n=r.__data__;if(!Q||n.length<199)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new ae(n)}return r.set(e,t),this.size=r.size,this};var ue=se,le=function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n&&!1!==t(e[r],r,e););return e},ce=function(){try{var e=K(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),fe=function(e,t,r){"__proto__"==t&&ce?ce(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r},he=Object.prototype.hasOwnProperty,pe=function(e,t,r){var n=e[t];he.call(e,t)&&_(n,r)&&(void 0!==r||t in e)||fe(e,t,r)},de=function(e,t,r,n){var o=!r;r||(r={});for(var i=-1,a=t.length;++i<a;){var s=t[i],u=n?n(r[s],e[s],s,r,e):void 0;void 0===u&&(u=e[s]),o?fe(r,s,u):pe(r,s,u)}return r},ye=function(e){return null!=e&&"object"==m(e)},ve=function(e){return ye(e)&&"[object Arguments]"==D(e)},ge=Object.prototype,me=ge.hasOwnProperty,be=ge.propertyIsEnumerable,we=ve(function(){return arguments}())?ve:function(e){return ye(e)&&me.call(e,"callee")&&!be.call(e,"callee")},_e=Array.isArray,xe=function(){return!1},Se=w(function(e,t){var r=t&&!t.nodeType&&t,n=r&&e&&!e.nodeType&&e,o=n&&n.exports===r?C.Buffer:void 0,i=(o?o.isBuffer:void 0)||xe;e.exports=i}),Oe=/^(?:0|[1-9]\d*)$/,Pe=function(e,t){var r=m(e);return!!(t=null==t?9007199254740991:t)&&("number"==r||"symbol"!=r&&Oe.test(e))&&e>-1&&e%1==0&&e<t},Ee=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991},ke={};ke["[object Float32Array]"]=ke["[object Float64Array]"]=ke["[object Int8Array]"]=ke["[object Int16Array]"]=ke["[object Int32Array]"]=ke["[object Uint8Array]"]=ke["[object Uint8ClampedArray]"]=ke["[object Uint16Array]"]=ke["[object Uint32Array]"]=!0,ke["[object Arguments]"]=ke["[object Array]"]=ke["[object ArrayBuffer]"]=ke["[object Boolean]"]=ke["[object DataView]"]=ke["[object Date]"]=ke["[object Error]"]=ke["[object Function]"]=ke["[object Map]"]=ke["[object Number]"]=ke["[object Object]"]=ke["[object RegExp]"]=ke["[object Set]"]=ke["[object String]"]=ke["[object WeakMap]"]=!1;var Me=function(e){return function(t){return e(t)}},Ce=w(function(e,t){var r=t&&!t.nodeType&&t,n=r&&e&&!e.nodeType&&e,o=n&&n.exports===r&&k.process,i=function(){try{return n&&n.require&&n.require("util").types||o&&o.binding&&o.binding("util")}catch(e){}}();e.exports=i}),je=Ce&&Ce.isTypedArray,Te=je?Me(je):function(e){return ye(e)&&Ee(e.length)&&!!ke[D(e)]},Ae=Object.prototype.hasOwnProperty,Ie=function(e,t){var r=_e(e),n=!r&&we(e),o=!r&&!n&&Se(e),i=!r&&!n&&!o&&Te(e),a=r||n||o||i,s=a?function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}(e.length,String):[],u=s.length;for(var l in e)!t&&!Ae.call(e,l)||a&&("length"==l||o&&("offset"==l||"parent"==l)||i&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||Pe(l,u))||s.push(l);return s},Re=Object.prototype,Le=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Re)},Ne=function(e,t){return function(r){return e(t(r))}},De=Ne(Object.keys,Object),Be=Object.prototype.hasOwnProperty,Fe=function(e){if(!Le(e))return De(e);var t=[];for(var r in Object(e))Be.call(e,r)&&"constructor"!=r&&t.push(r);return t},Ge=function(e){return null!=e&&Ee(e.length)&&!F(e)},ze=function(e){return Ge(e)?Ie(e):Fe(e)},Ue=Object.prototype.hasOwnProperty,Ve=function(e){if(!B(e))return function(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t}(e);var t=Le(e),r=[];for(var n in e)("constructor"!=n||!t&&Ue.call(e,n))&&r.push(n);return r},We=function(e){return Ge(e)?Ie(e,!0):Ve(e)},Ye=w(function(e,t){var r=t&&!t.nodeType&&t,n=r&&e&&!e.nodeType&&e,o=n&&n.exports===r?C.Buffer:void 0,i=o?o.allocUnsafe:void 0;e.exports=function(e,t){if(t)return e.slice();var r=e.length,n=i?i(r):new e.constructor(r);return e.copy(n),n}}),He=function(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t},Xe=function(e,t){for(var r=-1,n=null==e?0:e.length,o=0,i=[];++r<n;){var a=e[r];t(a,r,e)&&(i[o++]=a)}return i},qe=function(){return[]},Je=Object.prototype.propertyIsEnumerable,Ze=Object.getOwnPropertySymbols,Ke=Ze?function(e){return null==e?[]:(e=Object(e),Xe(Ze(e),function(t){return Je.call(e,t)}))}:qe,Qe=function(e,t){for(var r=-1,n=t.length,o=e.length;++r<n;)e[o+r]=t[r];return e},$e=Ne(Object.getPrototypeOf,Object),et=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)Qe(t,Ke(e)),e=$e(e);return t}:qe,tt=function(e,t,r){var n=t(e);return _e(e)?n:Qe(n,r(e))},rt=function(e){return tt(e,ze,Ke)},nt=K(C,"DataView"),ot=K(C,"Promise"),it=K(C,"Set"),at=K(C,"WeakMap"),st="[object Map]",ut="[object Promise]",lt="[object Set]",ct="[object WeakMap]",ft="[object DataView]",ht=V(nt),pt=V(Q),dt=V(ot),yt=V(it),vt=V(at),gt=D;(nt&&gt(new nt(new ArrayBuffer(1)))!=ft||Q&&gt(new Q)!=st||ot&&gt(ot.resolve())!=ut||it&&gt(new it)!=lt||at&&gt(new at)!=ct)&&(gt=function(e){var t=D(e),r="[object Object]"==t?e.constructor:void 0,n=r?V(r):"";if(n)switch(n){case ht:return ft;case pt:return st;case dt:return ut;case yt:return lt;case vt:return ct}return t});var mt=gt,bt=Object.prototype.hasOwnProperty,wt=C.Uint8Array,_t=function(e){var t=new e.constructor(e.byteLength);return new wt(t).set(new wt(e)),t},xt=/\w*$/,St=j?j.prototype:void 0,Ot=St?St.valueOf:void 0,Pt=function(e,t){var r=t?_t(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)},Et=function(e,t,r){var n=e.constructor;switch(t){case"[object ArrayBuffer]":return _t(e);case"[object Boolean]":case"[object Date]":return new n(+e);case"[object DataView]":return function(e,t){var r=t?_t(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}(e,r);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return Pt(e,r);case"[object Map]":return new n;case"[object Number]":case"[object String]":return new n(e);case"[object RegExp]":return function(e){var t=new e.constructor(e.source,xt.exec(e));return t.lastIndex=e.lastIndex,t}(e);case"[object Set]":return new n;case"[object Symbol]":return function(e){return Ot?Object(Ot.call(e)):{}}(e)}},kt=Object.create,Mt=function(){function e(){}return function(t){if(!B(t))return{};if(kt)return kt(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}(),Ct=function(e){return"function"!=typeof e.constructor||Le(e)?{}:Mt($e(e))},jt=Ce&&Ce.isMap,Tt=jt?Me(jt):function(e){return ye(e)&&"[object Map]"==mt(e)},At=Ce&&Ce.isSet,It=At?Me(At):function(e){return ye(e)&&"[object Set]"==mt(e)},Rt="[object Arguments]",Lt="[object Function]",Nt="[object Object]",Dt={};Dt[Rt]=Dt["[object Array]"]=Dt["[object ArrayBuffer]"]=Dt["[object DataView]"]=Dt["[object Boolean]"]=Dt["[object Date]"]=Dt["[object Float32Array]"]=Dt["[object Float64Array]"]=Dt["[object Int8Array]"]=Dt["[object Int16Array]"]=Dt["[object Int32Array]"]=Dt["[object Map]"]=Dt["[object Number]"]=Dt[Nt]=Dt["[object RegExp]"]=Dt["[object Set]"]=Dt["[object String]"]=Dt["[object Symbol]"]=Dt["[object Uint8Array]"]=Dt["[object Uint8ClampedArray]"]=Dt["[object Uint16Array]"]=Dt["[object Uint32Array]"]=!0,Dt["[object Error]"]=Dt[Lt]=Dt["[object WeakMap]"]=!1;var Bt=function e(t,r,n,o,i,a){var s,u=1&r,l=2&r,c=4&r;if(n&&(s=i?n(t,o,i,a):n(t)),void 0!==s)return s;if(!B(t))return t;var f=_e(t);if(f){if(s=function(e){var t=e.length,r=new e.constructor(t);return t&&"string"==typeof e[0]&&bt.call(e,"index")&&(r.index=e.index,r.input=e.input),r}(t),!u)return He(t,s)}else{var h=mt(t),p=h==Lt||"[object GeneratorFunction]"==h;if(Se(t))return Ye(t,u);if(h==Nt||h==Rt||p&&!i){if(s=l||p?{}:Ct(t),!u)return l?function(e,t){return de(e,et(e),t)}(t,function(e,t){return e&&de(t,We(t),e)}(s,t)):function(e,t){return de(e,Ke(e),t)}(t,function(e,t){return e&&de(t,ze(t),e)}(s,t))}else{if(!Dt[h])return i?t:{};s=Et(t,h,u)}}a||(a=new ue);var d=a.get(t);if(d)return d;a.set(t,s),It(t)?t.forEach(function(o){s.add(e(o,r,n,o,t,a))}):Tt(t)&&t.forEach(function(o,i){s.set(i,e(o,r,n,i,t,a))});var y=f?void 0:(c?l?function(e){return tt(e,We,et)}:rt:l?We:ze)(t);return le(y||t,function(o,i){y&&(o=t[i=o]),pe(s,i,e(o,r,n,i,t,a))}),s},Ft=function(e){return function(){return e}},Gt=function(e,t,r){for(var n=-1,o=Object(e),i=r(e),a=i.length;a--;){var s=i[++n];if(!1===t(o[s],s,o))break}return e},zt=function(e,t){return e&&Gt(e,t,ze)},Ut=function(e,t){return function(t,r){if(null==t)return t;if(!Ge(t))return e(t,r);for(var n=t.length,o=-1,i=Object(t);++o<n&&!1!==r(i[o],o,i););return t}}(zt),Vt=function(e){return e},Wt=function(e){return"function"==typeof e?e:Vt},Yt=function(e,t){return(_e(e)?le:Ut)(e,Wt(t))},Ht=Yt;function Xt(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new ae;++t<r;)this.add(e[t])}Xt.prototype.add=Xt.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},Xt.prototype.has=function(e){return this.__data__.has(e)};var qt=Xt,Jt=function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1},Zt=function(e,t){return e.has(t)},Kt=function(e,t,r,n,o,i){var a=1&r,s=e.length,u=t.length;if(s!=u&&!(a&&u>s))return!1;var l=i.get(e),c=i.get(t);if(l&&c)return l==t&&c==e;var f=-1,h=!0,p=2&r?new qt:void 0;for(i.set(e,t),i.set(t,e);++f<s;){var d=e[f],y=t[f];if(n)var v=a?n(y,d,f,t,e,i):n(d,y,f,e,t,i);if(void 0!==v){if(v)continue;h=!1;break}if(p){if(!Jt(t,function(e,t){if(!Zt(p,t)&&(d===e||o(d,e,r,n,i)))return p.push(t)})){h=!1;break}}else if(d!==y&&!o(d,y,r,n,i)){h=!1;break}}return i.delete(e),i.delete(t),h},Qt=function(e){var t=-1,r=Array(e.size);return e.forEach(function(e,n){r[++t]=[n,e]}),r},$t=function(e){var t=-1,r=Array(e.size);return e.forEach(function(e){r[++t]=e}),r},er=j?j.prototype:void 0,tr=er?er.valueOf:void 0,rr=function(e,t,r,n,o,i,a){switch(r){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!i(new wt(e),new wt(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return _(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var s=Qt;case"[object Set]":var u=1&n;if(s||(s=$t),e.size!=t.size&&!u)return!1;var l=a.get(e);if(l)return l==t;n|=2,a.set(e,t);var c=Kt(s(e),s(t),n,o,i,a);return a.delete(e),c;case"[object Symbol]":if(tr)return tr.call(e)==tr.call(t)}return!1},nr=Object.prototype.hasOwnProperty,or="[object Arguments]",ir="[object Array]",ar="[object Object]",sr=Object.prototype.hasOwnProperty,ur=function(e,t,r,n,o,i){var a=_e(e),s=_e(t),u=a?ir:mt(e),l=s?ir:mt(t),c=(u=u==or?ar:u)==ar,f=(l=l==or?ar:l)==ar,h=u==l;if(h&&Se(e)){if(!Se(t))return!1;a=!0,c=!1}if(h&&!c)return i||(i=new ue),a||Te(e)?Kt(e,t,r,n,o,i):rr(e,t,u,r,n,o,i);if(!(1&r)){var p=c&&sr.call(e,"__wrapped__"),d=f&&sr.call(t,"__wrapped__");if(p||d){var y=p?e.value():e,v=d?t.value():t;return i||(i=new ue),o(y,v,r,n,i)}}return!!h&&(i||(i=new ue),function(e,t,r,n,o,i){var a=1&r,s=rt(e),u=s.length;if(u!=rt(t).length&&!a)return!1;for(var l=u;l--;){var c=s[l];if(!(a?c in t:nr.call(t,c)))return!1}var f=i.get(e),h=i.get(t);if(f&&h)return f==t&&h==e;var p=!0;i.set(e,t),i.set(t,e);for(var d=a;++l<u;){var y=e[c=s[l]],v=t[c];if(n)var g=a?n(v,y,c,t,e,i):n(y,v,c,e,t,i);if(!(void 0===g?y===v||o(y,v,r,n,i):g)){p=!1;break}d||(d="constructor"==c)}if(p&&!d){var m=e.constructor,b=t.constructor;m==b||!("constructor"in e)||!("constructor"in t)||"function"==typeof m&&m instanceof m&&"function"==typeof b&&b instanceof b||(p=!1)}return i.delete(e),i.delete(t),p}(e,t,r,n,o,i))},lr=function e(t,r,n,o,i){return t===r||(null==t||null==r||!ye(t)&&!ye(r)?t!=t&&r!=r:ur(t,r,n,o,e,i))},cr=function(e){return e==e&&!B(e)},fr=function(e,t){return function(r){return null!=r&&r[e]===t&&(void 0!==t||e in Object(r))}},hr=function(e){var t=function(e){for(var t=ze(e),r=t.length;r--;){var n=t[r],o=e[n];t[r]=[n,o,cr(o)]}return t}(e);return 1==t.length&&t[0][2]?fr(t[0][0],t[0][1]):function(r){return r===e||function(e,t,r,n){var o=r.length,i=o,a=!n;if(null==e)return!i;for(e=Object(e);o--;){var s=r[o];if(a&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++o<i;){var u=(s=r[o])[0],l=e[u],c=s[1];if(a&&s[2]){if(void 0===l&&!(u in e))return!1}else{var f=new ue;if(n)var h=n(l,c,u,e,t,f);if(!(void 0===h?lr(c,l,3,n,f):h))return!1}}return!0}(r,e,t)}},pr=function(e){return"symbol"==m(e)||ye(e)&&"[object Symbol]"==D(e)},dr=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,yr=/^\w*$/,vr=function(e,t){if(_e(e))return!1;var r=m(e);return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!pr(e))||yr.test(e)||!dr.test(e)||null!=t&&e in Object(t)};function gr(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var r=function r(){var n=arguments,o=t?t.apply(this,n):n[0],i=r.cache;if(i.has(o))return i.get(o);var a=e.apply(this,n);return r.cache=i.set(o,a)||i,a};return r.cache=new(gr.Cache||ae),r}gr.Cache=ae;var mr,br=gr,wr=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,_r=/\\(\\)?/g,xr=function(e){var t=br(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(wr,function(e,r,n,o){t.push(n?o.replace(_r,"$1"):r||e)}),t},function(e){return 500===r.size&&r.clear(),e}),r=t.cache;return t}(),Sr=function(e,t){for(var r=-1,n=null==e?0:e.length,o=Array(n);++r<n;)o[r]=t(e[r],r,e);return o},Or=j?j.prototype:void 0,Pr=Or?Or.toString:void 0,Er=function(e){return null==e?"":function e(t){if("string"==typeof t)return t;if(_e(t))return Sr(t,e)+"";if(pr(t))return Pr?Pr.call(t):"";var r=t+"";return"0"==r&&1/t==-1/0?"-0":r}(e)},kr=function(e,t){return _e(e)?e:vr(e,t)?[e]:xr(Er(e))},Mr=function(e){if("string"==typeof e||pr(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t},Cr=function(e,t){for(var r=0,n=(t=kr(t,e)).length;null!=e&&r<n;)e=e[Mr(t[r++])];return r&&r==n?e:void 0},jr=function(e,t){return null!=e&&t in Object(e)},Tr=function(e,t,r){for(var n=-1,o=(t=kr(t,e)).length,i=!1;++n<o;){var a=Mr(t[n]);if(!(i=null!=e&&r(e,a)))break;e=e[a]}return i||++n!=o?i:!!(o=null==e?0:e.length)&&Ee(o)&&Pe(a,o)&&(_e(e)||we(e))},Ar=function(e,t){return null!=e&&Tr(e,t,jr)},Ir=function(e,t){return vr(e)&&cr(t)?fr(Mr(e),t):function(r){var n=function(e,t,r){var n=null==e?void 0:Cr(e,t);return void 0===n?r:n}(r,e);return void 0===n&&n===t?Ar(r,e):lr(t,n,3)}},Rr=function(e){return function(t){return null==t?void 0:t[e]}},Lr=function(e){return vr(e)?Rr(Mr(e)):function(e){return function(t){return Cr(t,e)}}(e)},Nr=function(e){return"function"==typeof e?e:null==e?Vt:"object"==m(e)?_e(e)?Ir(e[0],e[1]):hr(e):Lr(e)},Dr=function(e,t){return(_e(e)?Xe:function(e,t){var r=[];return Ut(e,function(e,n,o){t(e,n,o)&&r.push(e)}),r})(e,Nr(t))},Br=Object.prototype.hasOwnProperty,Fr=function(e,t){return null!=e&&Br.call(e,t)},Gr=function(e,t){return null!=e&&Tr(e,t,Fr)},zr=Object.prototype.hasOwnProperty,Ur=function(e){return void 0===e},Vr=function(e,t){var r=-1,n=Ge(e)?Array(e.length):[];return Ut(e,function(e,o,i){n[++r]=t(e,o,i)}),n},Wr=function(e,t){return(_e(e)?Sr:Vr)(e,Nr(t))},Yr=function(e,t,r,n){var o=-1,i=null==e?0:e.length;for(n&&i&&(r=e[++o]);++o<i;)r=t(r,e[o],o,e);return r},Hr=function(e,t,r,n,o){return o(e,function(e,o,i){r=n?(n=!1,e):t(r,e,o,i)}),r},Xr=function(e,t,r){var n=_e(e)?Yr:Hr,o=arguments.length<3;return n(e,Nr(t),r,o,Ut)},qr=Rr("length"),Jr=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]"),Zr="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",Kr="\\ud83c[\\udffb-\\udfff]",Qr="[^\\ud800-\\udfff]",$r="(?:\\ud83c[\\udde6-\\uddff]){2}",en="[\\ud800-\\udbff][\\udc00-\\udfff]",tn="(?:"+Zr+"|"+Kr+")?",rn="[\\ufe0e\\ufe0f]?",nn=rn+tn+"(?:\\u200d(?:"+[Qr,$r,en].join("|")+")"+rn+tn+")*",on="(?:"+[Qr+Zr+"?",Zr,$r,en,"[\\ud800-\\udfff]"].join("|")+")",an=RegExp(Kr+"(?="+Kr+")|"+on+nn,"g"),sn=function(e){return function(e){return Jr.test(e)}(e)?function(e){for(var t=an.lastIndex=0;an.test(e);)++t;return t}(e):qr(e)},un=j?j.isConcatSpreadable:void 0,ln=function(e){return _e(e)||we(e)||!!(un&&e&&e[un])},cn=function e(t,r,n,o,i){var a=-1,s=t.length;for(n||(n=ln),i||(i=[]);++a<s;){var u=t[a];r>0&&n(u)?r>1?e(u,r-1,n,o,i):Qe(i,u):o||(i[i.length]=u)}return i},fn=Math.max,hn=function(e,t,r){return t=fn(void 0===t?e.length-1:t,0),function(){for(var n=arguments,o=-1,i=fn(n.length-t,0),a=Array(i);++o<i;)a[o]=n[t+o];o=-1;for(var s=Array(t+1);++o<t;)s[o]=n[o];return s[t]=r(a),function(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}(e,this,s)}},pn=ce?function(e,t){return ce(e,"toString",{configurable:!0,enumerable:!1,value:Ft(t),writable:!0})}:Vt,dn=Date.now,yn=function(e){var t=0,r=0;return function(){var n=dn(),o=16-(n-r);if(r=n,o>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(pn),vn=function(e,t){return yn(hn(e,t,Vt),e+"")},gn=function(e,t,r,n){for(var o=e.length,i=r+(n?1:-1);n?i--:++i<o;)if(t(e[i],i,e))return i;return-1},mn=function(e){return e!=e},bn=function(e,t){return!(null==e||!e.length)&&function(e,t,r){return t==t?function(e,t,r){for(var n=r-1,o=e.length;++n<o;)if(e[n]===t)return n;return-1}(e,t,r):gn(e,mn,r)}(e,t,0)>-1},wn=function(e,t,r){for(var n=-1,o=null==e?0:e.length;++n<o;)if(r(t,e[n]))return!0;return!1},_n=it&&1/$t(new it([,-0]))[1]==1/0?function(e){return new it(e)}:function(){},xn=function(e){return ye(e)&&Ge(e)},Sn=vn(function(e){return function(e,t,r){var n=-1,o=bn,i=e.length,a=!0,s=[],u=s;if(r)a=!1,o=wn;else if(i>=200){var l=t?null:_n(e);if(l)return $t(l);a=!1,o=Zt,u=new qt}else u=t?[]:s;e:for(;++n<i;){var c=e[n],f=t?t(c):c;if(c=r||0!==c?c:0,a&&f==f){for(var h=u.length;h--;)if(u[h]===f)continue e;t&&u.push(f),s.push(c)}else o(u,f,r)||(u!==s&&u.push(f),s.push(c))}return s}(cn(e,1,xn,!0))}),On=function(e){return null==e?[]:function(e,t){return Sr(t,function(t){return e[t]})}(e,ze(e))};try{mr={clone:function(e){return Bt(e,4)},constant:Ft,each:Ht,filter:Dr,has:Gr,isArray:_e,isEmpty:function(e){if(null==e)return!0;if(Ge(e)&&(_e(e)||"string"==typeof e||"function"==typeof e.splice||Se(e)||Te(e)||we(e)))return!e.length;var t=mt(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if(Le(e))return!Fe(e).length;for(var r in e)if(zr.call(e,r))return!1;return!0},isFunction:F,isUndefined:Ur,keys:ze,map:Wr,reduce:Xr,size:function(e){if(null==e)return 0;if(Ge(e))return function(e){return"string"==typeof e||!_e(e)&&ye(e)&&"[object String]"==D(e)}(e)?sn(e):e.length;var t=mt(e);return"[object Map]"==t||"[object Set]"==t?e.size:Fe(e).length},transform:function(e,t,r){var n=_e(e),o=n||Se(e)||Te(e);if(t=Nr(t),null==r){var i=e&&e.constructor;r=o?n?new i:[]:B(e)&&F(i)?Mt($e(e)):{}}return(o?le:zt)(e,function(e,n,o){return t(r,e,n,o)}),r},union:Sn,values:On}}catch(e){}mr||(mr=window._);var Pn=mr,En=Mn,kn="\0";function Mn(e){this._isDirected=!Pn.has(e,"directed")||e.directed,this._isMultigraph=!!Pn.has(e,"multigraph")&&e.multigraph,this._isCompound=!!Pn.has(e,"compound")&&e.compound,this._label=void 0,this._defaultNodeLabelFn=Pn.constant(void 0),this._defaultEdgeLabelFn=Pn.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children["\0"]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}function Cn(e,t){e[t]?e[t]++:e[t]=1}function jn(e,t){--e[t]||delete e[t]}function Tn(e,t,r,n){var o=""+t,i=""+r;if(!e&&o>i){var a=o;o=i,i=a}return o+""+i+""+(Pn.isUndefined(n)?"\0":n)}function An(e,t){return Tn(e,t.v,t.w,t.name)}Mn.prototype._nodeCount=0,Mn.prototype._edgeCount=0,Mn.prototype.isDirected=function(){return this._isDirected},Mn.prototype.isMultigraph=function(){return this._isMultigraph},Mn.prototype.isCompound=function(){return this._isCompound},Mn.prototype.setGraph=function(e){return this._label=e,this},Mn.prototype.graph=function(){return this._label},Mn.prototype.setDefaultNodeLabel=function(e){return Pn.isFunction(e)||(e=Pn.constant(e)),this._defaultNodeLabelFn=e,this},Mn.prototype.nodeCount=function(){return this._nodeCount},Mn.prototype.nodes=function(){return Pn.keys(this._nodes)},Mn.prototype.sources=function(){var e=this;return Pn.filter(this.nodes(),function(t){return Pn.isEmpty(e._in[t])})},Mn.prototype.sinks=function(){var e=this;return Pn.filter(this.nodes(),function(t){return Pn.isEmpty(e._out[t])})},Mn.prototype.setNodes=function(e,t){var r=arguments,n=this;return Pn.each(e,function(e){r.length>1?n.setNode(e,t):n.setNode(e)}),this},Mn.prototype.setNode=function(e,t){return Pn.has(this._nodes,e)?(arguments.length>1&&(this._nodes[e]=t),this):(this._nodes[e]=arguments.length>1?t:this._defaultNodeLabelFn(e),this._isCompound&&(this._parent[e]=kn,this._children[e]={},this._children["\0"][e]=!0),this._in[e]={},this._preds[e]={},this._out[e]={},this._sucs[e]={},++this._nodeCount,this)},Mn.prototype.node=function(e){return this._nodes[e]},Mn.prototype.hasNode=function(e){return Pn.has(this._nodes,e)},Mn.prototype.removeNode=function(e){var t=this;if(Pn.has(this._nodes,e)){var r=function(e){t.removeEdge(t._edgeObjs[e])};delete this._nodes[e],this._isCompound&&(this._removeFromParentsChildList(e),delete this._parent[e],Pn.each(this.children(e),function(e){t.setParent(e)}),delete this._children[e]),Pn.each(Pn.keys(this._in[e]),r),delete this._in[e],delete this._preds[e],Pn.each(Pn.keys(this._out[e]),r),delete this._out[e],delete this._sucs[e],--this._nodeCount}return this},Mn.prototype.setParent=function(e,t){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(Pn.isUndefined(t))t=kn;else{for(var r=t+="";!Pn.isUndefined(r);r=this.parent(r))if(r===e)throw new Error("Setting "+t+" as parent of "+e+" would create a cycle");this.setNode(t)}return this.setNode(e),this._removeFromParentsChildList(e),this._parent[e]=t,this._children[t][e]=!0,this},Mn.prototype._removeFromParentsChildList=function(e){delete this._children[this._parent[e]][e]},Mn.prototype.parent=function(e){if(this._isCompound){var t=this._parent[e];if(t!==kn)return t}},Mn.prototype.children=function(e){if(Pn.isUndefined(e)&&(e=kn),this._isCompound){var t=this._children[e];if(t)return Pn.keys(t)}else{if(e===kn)return this.nodes();if(this.hasNode(e))return[]}},Mn.prototype.predecessors=function(e){var t=this._preds[e];if(t)return Pn.keys(t)},Mn.prototype.successors=function(e){var t=this._sucs[e];if(t)return Pn.keys(t)},Mn.prototype.neighbors=function(e){var t=this.predecessors(e);if(t)return Pn.union(t,this.successors(e))},Mn.prototype.isLeaf=function(e){return 0===(this.isDirected()?this.successors(e):this.neighbors(e)).length},Mn.prototype.filterNodes=function(e){var t=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});t.setGraph(this.graph());var r=this;Pn.each(this._nodes,function(r,n){e(n)&&t.setNode(n,r)}),Pn.each(this._edgeObjs,function(e){t.hasNode(e.v)&&t.hasNode(e.w)&&t.setEdge(e,r.edge(e))});var n={};return this._isCompound&&Pn.each(t.nodes(),function(e){t.setParent(e,function e(o){var i=r.parent(o);return void 0===i||t.hasNode(i)?(n[o]=i,i):i in n?n[i]:e(i)}(e))}),t},Mn.prototype.setDefaultEdgeLabel=function(e){return Pn.isFunction(e)||(e=Pn.constant(e)),this._defaultEdgeLabelFn=e,this},Mn.prototype.edgeCount=function(){return this._edgeCount},Mn.prototype.edges=function(){return Pn.values(this._edgeObjs)},Mn.prototype.setPath=function(e,t){var r=this,n=arguments;return Pn.reduce(e,function(e,o){return n.length>1?r.setEdge(e,o,t):r.setEdge(e,o),o}),this},Mn.prototype.setEdge=function(){var e,t,r,n,o=!1,i=arguments[0];"object"==m(i)&&null!==i&&"v"in i?(e=i.v,t=i.w,r=i.name,2===arguments.length&&(n=arguments[1],o=!0)):(e=i,t=arguments[1],r=arguments[3],arguments.length>2&&(n=arguments[2],o=!0)),e=""+e,t=""+t,Pn.isUndefined(r)||(r=""+r);var a=Tn(this._isDirected,e,t,r);if(Pn.has(this._edgeLabels,a))return o&&(this._edgeLabels[a]=n),this;if(!Pn.isUndefined(r)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(e),this.setNode(t),this._edgeLabels[a]=o?n:this._defaultEdgeLabelFn(e,t,r);var s=function(e,t,r,n){var o=""+t,i=""+r;if(!e&&o>i){var a=o;o=i,i=a}var s={v:o,w:i};return n&&(s.name=n),s}(this._isDirected,e,t,r);return e=s.v,t=s.w,Object.freeze(s),this._edgeObjs[a]=s,Cn(this._preds[t],e),Cn(this._sucs[e],t),this._in[t][a]=s,this._out[e][a]=s,this._edgeCount++,this},Mn.prototype.edge=function(e,t,r){var n=1===arguments.length?An(this._isDirected,arguments[0]):Tn(this._isDirected,e,t,r);return this._edgeLabels[n]},Mn.prototype.hasEdge=function(e,t,r){var n=1===arguments.length?An(this._isDirected,arguments[0]):Tn(this._isDirected,e,t,r);return Pn.has(this._edgeLabels,n)},Mn.prototype.removeEdge=function(e,t,r){var n=1===arguments.length?An(this._isDirected,arguments[0]):Tn(this._isDirected,e,t,r),o=this._edgeObjs[n];return o&&(e=o.v,t=o.w,delete this._edgeLabels[n],delete this._edgeObjs[n],jn(this._preds[t],e),jn(this._sucs[e],t),delete this._in[t][n],delete this._out[e][n],this._edgeCount--),this},Mn.prototype.inEdges=function(e,t){var r=this._in[e];if(r){var n=Pn.values(r);return t?Pn.filter(n,function(e){return e.v===t}):n}},Mn.prototype.outEdges=function(e,t){var r=this._out[e];if(r){var n=Pn.values(r);return t?Pn.filter(n,function(e){return e.w===t}):n}},Mn.prototype.nodeEdges=function(e,t){var r=this.inEdges(e,t);if(r)return r.concat(this.outEdges(e,t))};var In={Graph:En,version:"2.1.8"},Rn={write:function(e){var t={options:{directed:e.isDirected(),multigraph:e.isMultigraph(),compound:e.isCompound()},nodes:function(e){return Pn.map(e.nodes(),function(t){var r=e.node(t),n=e.parent(t),o={v:t};return Pn.isUndefined(r)||(o.value=r),Pn.isUndefined(n)||(o.parent=n),o})}(e),edges:function(e){return Pn.map(e.edges(),function(t){var r=e.edge(t),n={v:t.v,w:t.w};return Pn.isUndefined(t.name)||(n.name=t.name),Pn.isUndefined(r)||(n.value=r),n})}(e)};return Pn.isUndefined(e.graph())||(t.value=Pn.clone(e.graph())),t},read:function(e){var t=new En(e.options).setGraph(e.value);return Pn.each(e.nodes,function(e){t.setNode(e.v,e.value),e.parent&&t.setParent(e.v,e.parent)}),Pn.each(e.edges,function(e){t.setEdge({v:e.v,w:e.w,name:e.name},e.value)}),t}};var Ln=Nn;function Nn(){this._arr=[],this._keyIndices={}}Nn.prototype.size=function(){return this._arr.length},Nn.prototype.keys=function(){return this._arr.map(function(e){return e.key})},Nn.prototype.has=function(e){return Pn.has(this._keyIndices,e)},Nn.prototype.priority=function(e){var t=this._keyIndices[e];if(void 0!==t)return this._arr[t].priority},Nn.prototype.min=function(){if(0===this.size())throw new Error("Queue underflow");return this._arr[0].key},Nn.prototype.add=function(e,t){var r=this._keyIndices;if(e=String(e),!Pn.has(r,e)){var n=this._arr,o=n.length;return r[e]=o,n.push({key:e,priority:t}),this._decrease(o),!0}return!1},Nn.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var e=this._arr.pop();return delete this._keyIndices[e.key],this._heapify(0),e.key},Nn.prototype.decrease=function(e,t){var r=this._keyIndices[e];if(t>this._arr[r].priority)throw new Error("New priority is greater than current priority. Key: "+e+" Old: "+this._arr[r].priority+" New: "+t);this._arr[r].priority=t,this._decrease(r)},Nn.prototype._heapify=function(e){var t=this._arr,r=2*e,n=r+1,o=e;r<t.length&&(o=t[r].priority<t[o].priority?r:o,n<t.length&&(o=t[n].priority<t[o].priority?n:o),o!==e&&(this._swap(e,o),this._heapify(o)))},Nn.prototype._decrease=function(e){for(var t,r=this._arr,n=r[e].priority;0!==e&&!(r[t=e>>1].priority<n);)this._swap(e,t),e=t},Nn.prototype._swap=function(e,t){var r=this._arr,n=this._keyIndices,o=r[e],i=r[t];r[e]=i,r[t]=o,n[i.key]=e,n[o.key]=t};var Dn=function(e,t,r,n){return function(e,t,r,n){var o,i,a={},s=new Ln,u=function(e){var t=e.v!==o?e.v:e.w,n=a[t],u=r(e),l=i.distance+u;if(u<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+e+" Weight: "+u);l<n.distance&&(n.distance=l,n.predecessor=o,s.decrease(t,l))};for(e.nodes().forEach(function(e){var r=e===t?0:Number.POSITIVE_INFINITY;a[e]={distance:r},s.add(e,r)});s.size()>0&&(o=s.removeMin(),(i=a[o]).distance!==Number.POSITIVE_INFINITY);)n(o).forEach(u);return a}(e,String(t),r||Bn,n||function(t){return e.outEdges(t)})},Bn=Pn.constant(1),Fn=function(e){var t=0,r=[],n={},o=[];function i(a){var s=n[a]={onStack:!0,lowlink:t,index:t++};if(r.push(a),e.successors(a).forEach(function(e){Pn.has(n,e)?n[e].onStack&&(s.lowlink=Math.min(s.lowlink,n[e].index)):(i(e),s.lowlink=Math.min(s.lowlink,n[e].lowlink))}),s.lowlink===s.index){var u,l=[];do{u=r.pop(),n[u].onStack=!1,l.push(u)}while(a!==u);o.push(l)}}return e.nodes().forEach(function(e){Pn.has(n,e)||i(e)}),o},Gn=Pn.constant(1),zn=Un;function Un(e){var t={},r={},n=[];if(Pn.each(e.sinks(),function o(i){if(Pn.has(r,i))throw new Vn;Pn.has(t,i)||(r[i]=!0,t[i]=!0,Pn.each(e.predecessors(i),o),delete r[i],n.push(i))}),Pn.size(t)!==e.nodeCount())throw new Vn;return n}function Vn(){}Un.CycleException=Vn,Vn.prototype=new Error;var Wn=function(e,t,r){Pn.isArray(t)||(t=[t]);var n=(e.isDirected()?e.successors:e.neighbors).bind(e),o=[],i={};return Pn.each(t,function(t){if(!e.hasNode(t))throw new Error("Graph does not have node: "+t);!function e(t,r,n,o,i,a){Pn.has(o,r)||(o[r]=!0,n||a.push(r),Pn.each(i(r),function(r){e(t,r,n,o,i,a)}),n&&a.push(r))}(e,t,"post"===r,i,n,o)}),o};var Yn,Hn={Graph:In.Graph,json:Rn,alg:{components:function(e){var t,r={},n=[];function o(n){Pn.has(r,n)||(r[n]=!0,t.push(n),Pn.each(e.successors(n),o),Pn.each(e.predecessors(n),o))}return Pn.each(e.nodes(),function(e){t=[],o(e),t.length&&n.push(t)}),n},dijkstra:Dn,dijkstraAll:function(e,t,r){return Pn.transform(e.nodes(),function(n,o){n[o]=Dn(e,o,t,r)},{})},findCycles:function(e){return Pn.filter(Fn(e),function(t){return t.length>1||1===t.length&&e.hasEdge(t[0],t[0])})},floydWarshall:function(e,t,r){return function(e,t,r){var n={},o=e.nodes();return o.forEach(function(e){n[e]={},n[e][e]={distance:0},o.forEach(function(t){e!==t&&(n[e][t]={distance:Number.POSITIVE_INFINITY})}),r(e).forEach(function(r){var o=r.v===e?r.w:r.v,i=t(r);n[e][o]={distance:i,predecessor:e}})}),o.forEach(function(e){var t=n[e];o.forEach(function(r){var i=n[r];o.forEach(function(r){var n=i[e],o=t[r],a=i[r],s=n.distance+o.distance;s<a.distance&&(a.distance=s,a.predecessor=o.predecessor)})})}),n}(e,t||Gn,r||function(t){return e.outEdges(t)})},isAcyclic:function(e){try{zn(e)}catch(e){if(e instanceof zn.CycleException)return!1;throw e}return!0},postorder:function(e,t){return Wn(e,t,"post")},preorder:function(e,t){return Wn(e,t,"pre")},prim:function(e,t){var r,n=new En,o={},i=new Ln;function a(e){var n=e.v===r?e.w:e.v,a=i.priority(n);if(void 0!==a){var s=t(e);s<a&&(o[n]=r,i.decrease(n,s))}}if(0===e.nodeCount())return n;Pn.each(e.nodes(),function(e){i.add(e,Number.POSITIVE_INFINITY),n.setNode(e)}),i.decrease(e.nodes()[0],0);for(var s=!1;i.size()>0;){if(r=i.removeMin(),Pn.has(o,r))n.setEdge(r,o[r]);else{if(s)throw new Error("Input graph is not connected: "+e);s=!0}e.nodeEdges(r).forEach(a)}return n},tarjan:Fn,topsort:zn},version:In.version};try{Yn=Hn}catch(e){}Yn||(Yn=window.graphlib);var Xn,qn=Yn,Jn=function(e,t,r){if(!B(r))return!1;var n=m(t);return!!("number"==n?Ge(r)&&Pe(t,r.length):"string"==n&&t in r)&&_(r[t],e)},Zn=Object.prototype,Kn=Zn.hasOwnProperty,Qn=vn(function(e,t){e=Object(e);var r=-1,n=t.length,o=n>2?t[2]:void 0;for(o&&Jn(t[0],t[1],o)&&(n=1);++r<n;)for(var i=t[r],a=We(i),s=-1,u=a.length;++s<u;){var l=a[s],c=e[l];(void 0===c||_(c,Zn[l])&&!Kn.call(e,l))&&(e[l]=i[l])}return e}),$n=/^\s+|\s+$/g,eo=/^[-+]0x[0-9a-f]+$/i,to=/^0b[01]+$/i,ro=/^0o[0-7]+$/i,no=parseInt,oo=function(e){return e?(e=function(e){if("number"==typeof e)return e;if(pr(e))return NaN;if(B(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=B(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace($n,"");var r=to.test(e);return r||ro.test(e)?no(e.slice(2),r?2:8):eo.test(e)?NaN:+e}(e))===1/0||e===-1/0?1.7976931348623157e308*(e<0?-1:1):e==e?e:0:0===e?e:0},io=Math.max,ao=function(e){return function(t,r,n){var o=Object(t);if(!Ge(t)){var i=Nr(r);t=ze(t),r=function(e){return i(o[e],e,o)}}var a=e(t,r,n);return a>-1?o[i?t[a]:a]:void 0}}(function(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var o=null==r?0:function(e){var t=oo(e),r=t%1;return t==t?r?t-r:t:0}(r);return o<0&&(o=io(n+o,0)),gn(e,Nr(t),o)}),so=function(e){return null!=e&&e.length?cn(e,1):[]},uo=function(e,t,r){for(var n=-1,o=e.length;++n<o;){var i=e[n],a=t(i);if(null!=a&&(void 0===s?a==a&&!pr(a):r(a,s)))var s=a,u=i}return u},lo=function(e,t){return e>t},co=function(e,t,r){(void 0!==r&&!_(e[t],r)||void 0===r&&!(t in e))&&fe(e,t,r)},fo=Function.prototype,ho=Object.prototype,po=fo.toString,yo=ho.hasOwnProperty,vo=po.call(Object),go=function(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]},mo=function(e,t,r,n,o,i,a){var s=go(e,r),u=go(t,r),l=a.get(u);if(l)co(e,r,l);else{var c=i?i(s,u,r+"",e,t,a):void 0,f=void 0===c;if(f){var h=_e(u),p=!h&&Se(u),d=!h&&!p&&Te(u);c=u,h||p||d?_e(s)?c=s:xn(s)?c=He(s):p?(f=!1,c=Ye(u,!0)):d?(f=!1,c=Pt(u,!0)):c=[]:function(e){if(!ye(e)||"[object Object]"!=D(e))return!1;var t=$e(e);if(null===t)return!0;var r=yo.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&po.call(r)==vo}(u)||we(u)?(c=s,we(s)?c=function(e){return de(e,We(e))}(s):B(s)&&!F(s)||(c=Ct(u))):f=!1}f&&(a.set(u,c),o(c,u,n,i,a),a.delete(u)),co(e,r,c)}},bo=function(e){return vn(function(t,r){var n=-1,o=r.length,i=o>1?r[o-1]:void 0,a=o>2?r[2]:void 0;for(i=e.length>3&&"function"==typeof i?(o--,i):void 0,a&&Jn(r[0],r[1],a)&&(i=o<3?void 0:i,o=1),t=Object(t);++n<o;){var s=r[n];s&&e(t,s,n)}return t})}(function(e,t,r){!function e(t,r,n,o,i){t!==r&&Gt(r,function(a,s){if(i||(i=new ue),B(a))mo(t,r,s,n,e,o,i);else{var u=o?o(go(t,s),a,s+"",t,r,i):void 0;void 0===u&&(u=a),co(t,s,u)}},We)}(e,t,r)}),wo=function(e,t){return e<t},_o=function(e,t,r,n){if(!B(e))return e;for(var o=-1,i=(t=kr(t,e)).length,a=i-1,s=e;null!=s&&++o<i;){var u=Mr(t[o]),l=r;if("__proto__"===u||"constructor"===u||"prototype"===u)return e;if(o!=a){var c=s[u];void 0===(l=n?n(c,u,s):void 0)&&(l=B(c)?c:Pe(t[o+1])?[]:{})}pe(s,u,l),s=s[u]}return e},xo=function(e,t){return function(e,t,r){for(var n=-1,o=t.length,i={};++n<o;){var a=t[n],s=Cr(e,a);r(s,a)&&_o(i,kr(a,e),s)}return i}(e,t,function(t,r){return Ar(e,r)})},So=function(e){return yn(hn(e,void 0,so),e+"")}(function(e,t){return null==e?{}:xo(e,t)}),Oo=Math.ceil,Po=Math.max,Eo=function(e,t,r){return r&&"number"!=typeof r&&Jn(e,t,r)&&(t=r=void 0),e=oo(e),void 0===t?(t=e,e=0):t=oo(t),function(e,t,r,n){for(var o=-1,i=Po(Oo((t-e)/(r||1)),0),a=Array(i);i--;)a[n?i:++o]=e,e+=r;return a}(e,t,r=void 0===r?e<t?1:-1:oo(r),void 0)},ko=function(e,t){if(e!==t){var r=void 0!==e,n=null===e,o=e==e,i=pr(e),a=void 0!==t,s=null===t,u=t==t,l=pr(t);if(!s&&!l&&!i&&e>t||i&&a&&u&&!s&&!l||n&&a&&u||!r&&u||!o)return 1;if(!n&&!i&&!l&&e<t||l&&r&&o&&!n&&!i||s&&r&&o||!a&&o||!u)return-1}return 0},Mo=function(e,t,r){t=t.length?Sr(t,function(e){return _e(e)?function(t){return Cr(t,1===e.length?e[0]:e)}:e}):[Vt];var n=-1;return t=Sr(t,Me(Nr)),function(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e}(Vr(e,function(e,r,o){return{criteria:Sr(t,function(t){return t(e)}),index:++n,value:e}}),function(e,t){return function(e,t,r){for(var n=-1,o=e.criteria,i=t.criteria,a=o.length,s=r.length;++n<a;){var u=ko(o[n],i[n]);if(u)return n>=s?u:u*("desc"==r[n]?-1:1)}return e.index-t.index}(e,t,r)})},Co=vn(function(e,t){if(null==e)return[];var r=t.length;return r>1&&Jn(e,t[0],t[1])?t=[]:r>2&&Jn(t[0],t[1],t[2])&&(t=[t[0]]),Mo(e,cn(t,1),[])}),jo=0;try{Xn={cloneDeep:function(e){return Bt(e,5)},constant:Ft,defaults:Qn,each:Ht,filter:Dr,find:ao,flatten:so,forEach:Yt,forIn:function(e,t){return null==e?e:Gt(e,Wt(t),We)},has:Gr,isUndefined:Ur,last:function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0},map:Wr,mapValues:function(e,t){var r={};return t=Nr(t),zt(e,function(e,n,o){fe(r,n,t(e,n,o))}),r},max:function(e){return e&&e.length?uo(e,Vt,lo):void 0},merge:bo,min:function(e){return e&&e.length?uo(e,Vt,wo):void 0},minBy:function(e,t){return e&&e.length?uo(e,Nr(t),wo):void 0},now:function(){return C.Date.now()},pick:So,range:Eo,reduce:Xr,sortBy:Co,uniqueId:function(e){var t=++jo;return Er(e)+t},values:On,zipObject:function(e,t){return function(e,t,r){for(var n=-1,o=e.length,i=t.length,a={};++n<o;){var s=n<i?t[n]:void 0;r(a,e[n],s)}return a}(e||[],t||[],pe)}}}catch(e){}Xn||(Xn=window._);var To=Xn,Ao=Io;function Io(){var e={};e._next=e._prev=e,this._sentinel=e}function Ro(e){e._prev._next=e._next,e._next._prev=e._prev,delete e._next,delete e._prev}function Lo(e,t){if("_next"!==e&&"_prev"!==e)return t}Io.prototype.dequeue=function(){var e=this._sentinel,t=e._prev;if(t!==e)return Ro(t),t},Io.prototype.enqueue=function(e){var t=this._sentinel;e._prev&&e._next&&Ro(e),e._next=t._next,t._next._prev=e,t._next=e,e._prev=t},Io.prototype.toString=function(){for(var e=[],t=this._sentinel,r=t._prev;r!==t;)e.push(JSON.stringify(r,Lo)),r=r._prev;return"["+e.join(", ")+"]"};var No=qn.Graph,Do=To.constant(1);function Bo(e,t,r,n,o){var i=o?[]:void 0;return To.forEach(e.inEdges(n.v),function(n){var a=e.edge(n),s=e.node(n.v);o&&i.push({v:n.v,w:n.w}),s.out-=a,Fo(t,r,s)}),To.forEach(e.outEdges(n.v),function(n){var o=e.edge(n),i=n.w,a=e.node(i);a.in-=o,Fo(t,r,a)}),e.removeNode(n.v),i}function Fo(e,t,r){r.out?r.in?e[r.out-r.in+t].enqueue(r):e[e.length-1].enqueue(r):e[0].enqueue(r)}var Go=function(e){var t="greedy"===e.graph().acyclicer?function(e,t){if(e.nodeCount()<=1)return[];var r=function(e,t){var r=new No,n=0,o=0;To.forEach(e.nodes(),function(e){r.setNode(e,{v:e,in:0,out:0})}),To.forEach(e.edges(),function(e){var i=r.edge(e.v,e.w)||0,a=t(e),s=i+a;r.setEdge(e.v,e.w,s),o=Math.max(o,r.node(e.v).out+=a),n=Math.max(n,r.node(e.w).in+=a)});var i=To.range(o+n+3).map(function(){return new Ao}),a=n+1;return To.forEach(r.nodes(),function(e){Fo(i,a,r.node(e))}),{graph:r,buckets:i,zeroIdx:a}}(e,t||Do),n=function(e,t,r){for(var n,o=[],i=t[t.length-1],a=t[0];e.nodeCount();){for(;n=a.dequeue();)Bo(e,t,r,n);for(;n=i.dequeue();)Bo(e,t,r,n);if(e.nodeCount())for(var s=t.length-2;s>0;--s)if(n=t[s].dequeue()){o=o.concat(Bo(e,t,r,n,!0));break}}return o}(r.graph,r.buckets,r.zeroIdx);return To.flatten(To.map(n,function(t){return e.outEdges(t.v,t.w)}),!0)}(e,function(e){return function(t){return e.edge(t).weight}}(e)):function(e){var t=[],r={},n={};return To.forEach(e.nodes(),function o(i){To.has(n,i)||(n[i]=!0,r[i]=!0,To.forEach(e.outEdges(i),function(e){To.has(r,e.w)?t.push(e):o(e.w)}),delete r[i])}),t}(e);To.forEach(t,function(t){var r=e.edge(t);e.removeEdge(t),r.forwardName=t.name,r.reversed=!0,e.setEdge(t.w,t.v,r,To.uniqueId("rev"))})},zo=function(e){To.forEach(e.edges(),function(t){var r=e.edge(t);if(r.reversed){e.removeEdge(t);var n=r.forwardName;delete r.reversed,delete r.forwardName,e.setEdge(t.w,t.v,r,n)}})},Uo=qn.Graph,Vo={addDummyNode:Wo,simplify:function(e){var t=(new Uo).setGraph(e.graph());return To.forEach(e.nodes(),function(r){t.setNode(r,e.node(r))}),To.forEach(e.edges(),function(r){var n=t.edge(r.v,r.w)||{weight:0,minlen:1},o=e.edge(r);t.setEdge(r.v,r.w,{weight:n.weight+o.weight,minlen:Math.max(n.minlen,o.minlen)})}),t},asNonCompoundGraph:function(e){var t=new Uo({multigraph:e.isMultigraph()}).setGraph(e.graph());return To.forEach(e.nodes(),function(r){e.children(r).length||t.setNode(r,e.node(r))}),To.forEach(e.edges(),function(r){t.setEdge(r,e.edge(r))}),t},successorWeights:function(e){var t=To.map(e.nodes(),function(t){var r={};return To.forEach(e.outEdges(t),function(t){r[t.w]=(r[t.w]||0)+e.edge(t).weight}),r});return To.zipObject(e.nodes(),t)},predecessorWeights:function(e){var t=To.map(e.nodes(),function(t){var r={};return To.forEach(e.inEdges(t),function(t){r[t.v]=(r[t.v]||0)+e.edge(t).weight}),r});return To.zipObject(e.nodes(),t)},intersectRect:function(e,t){var r,n,o=e.x,i=e.y,a=t.x-o,s=t.y-i,u=e.width/2,l=e.height/2;if(!a&&!s)throw new Error("Not possible to find intersection inside of the rectangle");return Math.abs(s)*u>Math.abs(a)*l?(s<0&&(l=-l),r=l*a/s,n=l):(a<0&&(u=-u),r=u,n=u*s/a),{x:o+r,y:i+n}},buildLayerMatrix:function(e){var t=To.map(To.range(Yo(e)+1),function(){return[]});return To.forEach(e.nodes(),function(r){var n=e.node(r),o=n.rank;To.isUndefined(o)||(t[o][n.order]=r)}),t},normalizeRanks:function(e){var t=To.min(To.map(e.nodes(),function(t){return e.node(t).rank}));To.forEach(e.nodes(),function(r){var n=e.node(r);To.has(n,"rank")&&(n.rank-=t)})},removeEmptyRanks:function(e){var t=To.min(To.map(e.nodes(),function(t){return e.node(t).rank})),r=[];To.forEach(e.nodes(),function(n){var o=e.node(n).rank-t;r[o]||(r[o]=[]),r[o].push(n)});var n=0,o=e.graph().nodeRankFactor;To.forEach(r,function(t,r){To.isUndefined(t)&&r%o!=0?--n:n&&To.forEach(t,function(t){e.node(t).rank+=n})})},addBorderNode:function(e,t,r,n){var o={width:0,height:0};return arguments.length>=4&&(o.rank=r,o.order=n),Wo(e,"border",o,t)},maxRank:Yo,partition:function(e,t){var r={lhs:[],rhs:[]};return To.forEach(e,function(e){t(e)?r.lhs.push(e):r.rhs.push(e)}),r},time:function(e,t){var r=To.now();try{return t()}finally{console.log(e+" time: "+(To.now()-r)+"ms")}},notime:function(e,t){return t()}};function Wo(e,t,r,n){var o;do{o=To.uniqueId(n)}while(e.hasNode(o));return r.dummy=t,e.setNode(o,r),o}function Yo(e){return To.max(To.map(e.nodes(),function(t){var r=e.node(t).rank;if(!To.isUndefined(r))return r}))}var Ho=function(e){e.graph().dummyChains=[],To.forEach(e.edges(),function(t){!function(e,t){var r,n,o,i=t.v,a=e.node(i).rank,s=t.w,u=e.node(s).rank,l=t.name,c=e.edge(t),f=c.labelRank;if(u!==a+1){for(e.removeEdge(t),o=0,++a;a<u;++o,++a)c.points=[],n={width:0,height:0,edgeLabel:c,edgeObj:t,rank:a},r=Vo.addDummyNode(e,"edge",n,"_d"),a===f&&(n.width=c.width,n.height=c.height,n.dummy="edge-label",n.labelpos=c.labelpos),e.setEdge(i,r,{weight:c.weight},l),0===o&&e.graph().dummyChains.push(r),i=r;e.setEdge(i,s,{weight:c.weight},l)}}(e,t)})},Xo=function(e){To.forEach(e.graph().dummyChains,function(t){var r,n=e.node(t),o=n.edgeLabel;for(e.setEdge(n.edgeObj,o);n.dummy;)r=e.successors(t)[0],e.removeNode(t),o.points.push({x:n.x,y:n.y}),"edge-label"===n.dummy&&(o.x=n.x,o.y=n.y,o.width=n.width,o.height=n.height),t=r,n=e.node(t)})},qo=function(e){var t={};To.forEach(e.sources(),function r(n){var o=e.node(n);if(To.has(t,n))return o.rank;t[n]=!0;var i=To.min(To.map(e.outEdges(n),function(t){return r(t.w)-e.edge(t).minlen}));return i!==Number.POSITIVE_INFINITY&&null!=i||(i=0),o.rank=i})},Jo=function(e,t){return e.node(t.w).rank-e.node(t.v).rank-e.edge(t).minlen},Zo=qn.Graph,Ko=Jo,Qo=function(e){var t,r=new Zo({directed:!1}),n=e.nodes()[0],o=e.nodeCount();for(r.setNode(n,{});$o(r,e)<o;)t=ei(r,e),ti(r,e,r.hasNode(t.v)?Ko(e,t):-Ko(e,t));return r};function $o(e,t){return To.forEach(e.nodes(),function r(n){To.forEach(t.nodeEdges(n),function(o){var i=o.v,a=n===i?o.w:i;e.hasNode(a)||Ko(t,o)||(e.setNode(a,{}),e.setEdge(n,a,{}),r(a))})}),e.nodeCount()}function ei(e,t){return To.minBy(t.edges(),function(r){if(e.hasNode(r.v)!==e.hasNode(r.w))return Ko(t,r)})}function ti(e,t,r){To.forEach(e.nodes(),function(e){t.node(e).rank+=r})}var ri=Jo,ni=qo,oi=qn.alg.preorder,ii=qn.alg.postorder,ai=Vo.simplify,si=ui;function ui(e){e=ai(e),ni(e);var t,r=Qo(e);for(fi(r),li(r,e);t=hi(r);)di(r,e,t,pi(r,e,t))}function li(e,t){var r=ii(e,e.nodes());r=r.slice(0,r.length-1),To.forEach(r,function(r){!function(e,t,r){var n=e.node(r).parent;e.edge(r,n).cutvalue=ci(e,t,r)}(e,t,r)})}function ci(e,t,r){var n=e.node(r).parent,o=!0,i=t.edge(r,n),a=0;return i||(o=!1,i=t.edge(n,r)),a=i.weight,To.forEach(t.nodeEdges(r),function(i){var s,u,l=i.v===r,c=l?i.w:i.v;if(c!==n){var f=l===o,h=t.edge(i).weight;if(a+=f?h:-h,s=r,u=c,e.hasEdge(s,u)){var p=e.edge(r,c).cutvalue;a+=f?-p:p}}}),a}function fi(e,t){arguments.length<2&&(t=e.nodes()[0]),function e(t,r,n,o,i){var a=n,s=t.node(o);return r[o]=!0,To.forEach(t.neighbors(o),function(i){To.has(r,i)||(n=e(t,r,n,i,o))}),s.low=a,s.lim=n++,i?s.parent=i:delete s.parent,n}(e,{},1,t)}function hi(e){return To.find(e.edges(),function(t){return e.edge(t).cutvalue<0})}function pi(e,t,r){var n=r.v,o=r.w;t.hasEdge(n,o)||(n=r.w,o=r.v);var i=e.node(n),a=e.node(o),s=i,u=!1;i.lim>a.lim&&(s=a,u=!0);var l=To.filter(t.edges(),function(t){return u===yi(e,e.node(t.v),s)&&u!==yi(e,e.node(t.w),s)});return To.minBy(l,function(e){return ri(t,e)})}function di(e,t,r,n){var o=r.v,i=r.w;e.removeEdge(o,i),e.setEdge(n.v,n.w,{}),fi(e),li(e,t),function(e,t){var r=To.find(e.nodes(),function(e){return!t.node(e).parent}),n=oi(e,r);n=n.slice(1),To.forEach(n,function(r){var n=e.node(r).parent,o=t.edge(r,n),i=!1;o||(o=t.edge(n,r),i=!0),t.node(r).rank=t.node(n).rank+(i?o.minlen:-o.minlen)})}(e,t)}function yi(e,t,r){return r.low<=t.lim&&t.lim<=r.lim}ui.initLowLimValues=fi,ui.initCutValues=li,ui.calcCutValue=ci,ui.leaveEdge=hi,ui.enterEdge=pi,ui.exchangeEdges=di;var vi=qo,gi=vi;function mi(e){si(e)}var bi=function(e){var t=Vo.addDummyNode(e,"root",{},"_root"),r=function(e){var t={};function r(n,o){var i=e.children(n);i&&i.length&&To.forEach(i,function(e){r(e,o+1)}),t[n]=o}return To.forEach(e.children(),function(e){r(e,1)}),t}(e),n=To.max(To.values(r))-1,o=2*n+1;e.graph().nestingRoot=t,To.forEach(e.edges(),function(t){e.edge(t).minlen*=o});var i=function(e){return To.reduce(e.edges(),function(t,r){return t+e.edge(r).weight},0)}(e)+1;To.forEach(e.children(),function(a){!function e(t,r,n,o,i,a,s){var u=t.children(s);if(u.length){var l=Vo.addBorderNode(t,"_bt"),c=Vo.addBorderNode(t,"_bb"),f=t.node(s);t.setParent(l,s),f.borderTop=l,t.setParent(c,s),f.borderBottom=c,To.forEach(u,function(u){e(t,r,n,o,i,a,u);var f=t.node(u),h=f.borderTop?f.borderTop:u,p=f.borderBottom?f.borderBottom:u,d=f.borderTop?o:2*o,y=h!==p?1:i-a[s]+1;t.setEdge(l,h,{weight:d,minlen:y,nestingEdge:!0}),t.setEdge(p,c,{weight:d,minlen:y,nestingEdge:!0})}),t.parent(s)||t.setEdge(r,l,{weight:0,minlen:i+a[s]})}else s!==r&&t.setEdge(r,s,{weight:0,minlen:n})}(e,t,o,i,n,r,a)}),e.graph().nodeRankFactor=o},wi=function(e){var t=e.graph();e.removeNode(t.nestingRoot),delete t.nestingRoot,To.forEach(e.edges(),function(t){e.edge(t).nestingEdge&&e.removeEdge(t)})};function _i(e,t,r,n,o,i){var a={width:0,height:0,rank:i,borderType:t},s=o[t][i-1],u=Vo.addDummyNode(e,"border",a,r);o[t][i]=u,e.setParent(u,n),s&&e.setEdge(s,u,{weight:1})}var xi=function(e){var t=e.graph().rankdir.toLowerCase();"lr"!==t&&"rl"!==t||Oi(e)},Si=function(e){var t=e.graph().rankdir.toLowerCase();"bt"!==t&&"rl"!==t||function(e){To.forEach(e.nodes(),function(t){Ei(e.node(t))}),To.forEach(e.edges(),function(t){var r=e.edge(t);To.forEach(r.points,Ei),To.has(r,"y")&&Ei(r)})}(e),"lr"!==t&&"rl"!==t||(function(e){To.forEach(e.nodes(),function(t){ki(e.node(t))}),To.forEach(e.edges(),function(t){var r=e.edge(t);To.forEach(r.points,ki),To.has(r,"x")&&ki(r)})}(e),Oi(e))};function Oi(e){To.forEach(e.nodes(),function(t){Pi(e.node(t))}),To.forEach(e.edges(),function(t){Pi(e.edge(t))})}function Pi(e){var t=e.width;e.width=e.height,e.height=t}function Ei(e){e.y=-e.y}function ki(e){var t=e.x;e.x=e.y,e.y=t}var Mi=function(e,t){for(var r=0,n=1;n<t.length;++n)r+=Ci(e,t[n-1],t[n]);return r};function Ci(e,t,r){for(var n=To.zipObject(r,To.map(r,function(e,t){return t})),o=To.flatten(To.map(t,function(t){return To.sortBy(To.map(e.outEdges(t),function(t){return{pos:n[t.w],weight:e.edge(t).weight}}),"pos")}),!0),i=1;i<r.length;)i<<=1;var a=2*i-1;i-=1;var s=To.map(new Array(a),function(){return 0}),u=0;return To.forEach(o.forEach(function(e){var t=e.pos+i;s[t]+=e.weight;for(var r=0;t>0;)t%2&&(r+=s[t+1]),s[t=t-1>>1]+=e.weight;u+=e.weight*r})),u}function ji(e,t,r){for(var n;t.length&&(n=To.last(t)).i<=r;)t.pop(),e.push(n.vs),r++;return r}var Ti=function e(t,r,n,o){var i=t.children(r),a=t.node(r),s=a?a.borderLeft:void 0,u=a?a.borderRight:void 0,l={};s&&(i=To.filter(i,function(e){return e!==s&&e!==u}));var c=function(e,t){return To.map(t,function(t){var r=e.inEdges(t);if(r.length){var n=To.reduce(r,function(t,r){var n=e.edge(r),o=e.node(r.v);return{sum:t.sum+n.weight*o.order,weight:t.weight+n.weight}},{sum:0,weight:0});return{v:t,barycenter:n.sum/n.weight,weight:n.weight}}return{v:t}})}(t,i);To.forEach(c,function(r){if(t.children(r.v).length){var i=e(t,r.v,n,o);l[r.v]=i,To.has(i,"barycenter")&&(a=r,s=i,To.isUndefined(a.barycenter)?(a.barycenter=s.barycenter,a.weight=s.weight):(a.barycenter=(a.barycenter*a.weight+s.barycenter*s.weight)/(a.weight+s.weight),a.weight+=s.weight))}var a,s});var f=function(e,t){var r={};return To.forEach(e,function(e,t){var n=r[e.v]={indegree:0,in:[],out:[],vs:[e.v],i:t};To.isUndefined(e.barycenter)||(n.barycenter=e.barycenter,n.weight=e.weight)}),To.forEach(t.edges(),function(e){var t=r[e.v],n=r[e.w];To.isUndefined(t)||To.isUndefined(n)||(n.indegree++,t.out.push(r[e.w]))}),function(e){var t=[];function r(e){return function(t){t.merged||(To.isUndefined(t.barycenter)||To.isUndefined(e.barycenter)||t.barycenter>=e.barycenter)&&function(e,t){var r=0,n=0;e.weight&&(r+=e.barycenter*e.weight,n+=e.weight),t.weight&&(r+=t.barycenter*t.weight,n+=t.weight),e.vs=t.vs.concat(e.vs),e.barycenter=r/n,e.weight=n,e.i=Math.min(t.i,e.i),t.merged=!0}(e,t)}}function n(t){return function(r){r.in.push(t),0==--r.indegree&&e.push(r)}}for(;e.length;){var o=e.pop();t.push(o),To.forEach(o.in.reverse(),r(o)),To.forEach(o.out,n(o))}return To.map(To.filter(t,function(e){return!e.merged}),function(e){return To.pick(e,["vs","i","barycenter","weight"])})}(To.filter(r,function(e){return!e.indegree}))}(c,n);!function(e,t){To.forEach(e,function(e){e.vs=To.flatten(e.vs.map(function(e){return t[e]?t[e].vs:e}),!0)})}(f,l);var h=function(e,t){var r,n=Vo.partition(e,function(e){return To.has(e,"barycenter")}),o=n.lhs,i=To.sortBy(n.rhs,function(e){return-e.i}),a=[],s=0,u=0,l=0;o.sort((r=!!t,function(e,t){return e.barycenter<t.barycenter?-1:e.barycenter>t.barycenter?1:r?t.i-e.i:e.i-t.i})),l=ji(a,i,l),To.forEach(o,function(e){l+=e.vs.length,a.push(e.vs),s+=e.barycenter*e.weight,u+=e.weight,l=ji(a,i,l)});var c={vs:To.flatten(a,!0)};return u&&(c.barycenter=s/u,c.weight=u),c}(f,o);if(s&&(h.vs=To.flatten([s,h.vs,u],!0),t.predecessors(s).length)){var p=t.node(t.predecessors(s)[0]),d=t.node(t.predecessors(u)[0]);To.has(h,"barycenter")||(h.barycenter=0,h.weight=0),h.barycenter=(h.barycenter*h.weight+p.order+d.order)/(h.weight+2),h.weight+=2}return h},Ai=qn.Graph,Ii=function(e,t,r){var n=function(e){for(var t;e.hasNode(t=To.uniqueId("_root")););return t}(e),o=new Ai({compound:!0}).setGraph({root:n}).setDefaultNodeLabel(function(t){return e.node(t)});return To.forEach(e.nodes(),function(i){var a=e.node(i),s=e.parent(i);(a.rank===t||a.minRank<=t&&t<=a.maxRank)&&(o.setNode(i),o.setParent(i,s||n),To.forEach(e[r](i),function(t){var r=t.v===i?t.w:t.v,n=o.edge(r,i),a=To.isUndefined(n)?0:n.weight;o.setEdge(r,i,{weight:e.edge(t).weight+a})}),To.has(a,"minRank")&&o.setNode(i,{borderLeft:a.borderLeft[t],borderRight:a.borderRight[t]}))}),o},Ri=function(e,t,r){var n,o={};To.forEach(r,function(r){for(var i,a,s=e.parent(r);s;){if((i=e.parent(s))?(a=o[i],o[i]=s):(a=n,n=s),a&&a!==s)return void t.setEdge(a,s);s=i}})},Li=qn.Graph,Ni=function(e){var t=Vo.maxRank(e),r=Di(e,To.range(1,t+1),"inEdges"),n=Di(e,To.range(t-1,-1,-1),"outEdges"),o=function(e){var t={},r=To.filter(e.nodes(),function(t){return!e.children(t).length}),n=To.max(To.map(r,function(t){return e.node(t).rank})),o=To.map(To.range(n+1),function(){return[]});var i=To.sortBy(r,function(t){return e.node(t).rank});return To.forEach(i,function r(n){if(!To.has(t,n)){t[n]=!0;var i=e.node(n);o[i.rank].push(n),To.forEach(e.successors(n),r)}}),o}(e);Fi(e,o);for(var i,a=Number.POSITIVE_INFINITY,s=0,u=0;u<4;++s,++u){Bi(s%2?r:n,s%4>=2),o=Vo.buildLayerMatrix(e);var l=Mi(e,o);l<a&&(u=0,i=To.cloneDeep(o),a=l)}Fi(e,i)};function Di(e,t,r){return To.map(t,function(t){return Ii(e,t,r)})}function Bi(e,t){var r=new Li;To.forEach(e,function(e){var n=e.graph().root,o=Ti(e,n,r,t);To.forEach(o.vs,function(t,r){e.node(t).order=r}),Ri(e,r,o.vs)})}function Fi(e,t){To.forEach(t,function(t){To.forEach(t,function(t,r){e.node(t).order=r})})}var Gi=qn.Graph;function zi(e,t,r){if(t>r){var n=t;t=r,r=n}var o=e[t];o||(e[t]=o={}),o[r]=!0}function Ui(e,t,r){if(t>r){var n=t;t=r,r=n}return To.has(e[t],r)}var Vi=function(e){var t,r=Vo.buildLayerMatrix(e),n=To.merge(function(e,t){var r={};return To.reduce(t,function(t,n){var o=0,i=0,a=t.length,s=To.last(n);return To.forEach(n,function(t,u){var l=function(e,t){if(e.node(t).dummy)return To.find(e.predecessors(t),function(t){return e.node(t).dummy})}(e,t),c=l?e.node(l).order:a;(l||t===s)&&(To.forEach(n.slice(i,u+1),function(t){To.forEach(e.predecessors(t),function(n){var i=e.node(n),a=i.order;!(a<o||c<a)||i.dummy&&e.node(t).dummy||zi(r,n,t)})}),i=u+1,o=c)}),n}),r}(e,r),function(e,t){var r={};function n(t,n,o,i,a){var s;To.forEach(To.range(n,o),function(n){s=t[n],e.node(s).dummy&&To.forEach(e.predecessors(s),function(t){var n=e.node(t);n.dummy&&(n.order<i||n.order>a)&&zi(r,t,s)})})}return To.reduce(t,function(t,r){var o,i=-1,a=0;return To.forEach(r,function(s,u){if("border"===e.node(s).dummy){var l=e.predecessors(s);l.length&&(o=e.node(l[0]).order,n(r,a,u,i,o),a=u,i=o)}n(r,a,r.length,o,t.length)}),r}),r}(e,r)),o={};To.forEach(["u","d"],function(i){t="u"===i?r:To.values(r).reverse(),To.forEach(["l","r"],function(r){"r"===r&&(t=To.map(t,function(e){return To.values(e).reverse()}));var a=("u"===i?e.predecessors:e.successors).bind(e),s=function(e,t,r,n){var o={},i={},a={};return To.forEach(t,function(e){To.forEach(e,function(e,t){o[e]=e,i[e]=e,a[e]=t})}),To.forEach(t,function(e){var t=-1;To.forEach(e,function(e){var s=n(e);if(s.length)for(var u=((s=To.sortBy(s,function(e){return a[e]})).length-1)/2,l=Math.floor(u),c=Math.ceil(u);l<=c;++l){var f=s[l];i[e]===e&&t<a[f]&&!Ui(r,e,f)&&(i[f]=e,i[e]=o[e]=o[f],t=a[f])}})}),{root:o,align:i}}(0,t,n,a),u=function(e,t,r,n,o){var i={},a=function(e,t,r,n){var o=new Gi,i=e.graph(),a=function(e,t,r){return function(n,o,i){var a,s=n.node(o),u=n.node(i),l=0;if(l+=s.width/2,To.has(s,"labelpos"))switch(s.labelpos.toLowerCase()){case"l":a=-s.width/2;break;case"r":a=s.width/2}if(a&&(l+=r?a:-a),a=0,l+=(s.dummy?t:e)/2,l+=(u.dummy?t:e)/2,l+=u.width/2,To.has(u,"labelpos"))switch(u.labelpos.toLowerCase()){case"l":a=u.width/2;break;case"r":a=-u.width/2}return a&&(l+=r?a:-a),a=0,l}}(i.nodesep,i.edgesep,n);return To.forEach(t,function(t){var n;To.forEach(t,function(t){var i=r[t];if(o.setNode(i),n){var s=r[n],u=o.edge(s,i);o.setEdge(s,i,Math.max(a(e,t,n),u||0))}n=t})}),o}(e,t,r,o),s=o?"borderLeft":"borderRight";function u(e,t){for(var r=a.nodes(),n=r.pop(),o={};n;)o[n]?e(n):(o[n]=!0,r.push(n),r=r.concat(t(n))),n=r.pop()}return u(function(e){i[e]=a.inEdges(e).reduce(function(e,t){return Math.max(e,i[t.v]+a.edge(t))},0)},a.predecessors.bind(a)),u(function(t){var r=a.outEdges(t).reduce(function(e,t){return Math.min(e,i[t.w]-a.edge(t))},Number.POSITIVE_INFINITY),n=e.node(t);r!==Number.POSITIVE_INFINITY&&n.borderType!==s&&(i[t]=Math.max(i[t],r))},a.successors.bind(a)),To.forEach(n,function(e){i[e]=i[r[e]]}),i}(e,t,s.root,s.align,"r"===r);"r"===r&&(u=To.mapValues(u,function(e){return-e})),o[i+r]=u})});var i=function(e,t){return To.minBy(To.values(t),function(t){var r=Number.NEGATIVE_INFINITY,n=Number.POSITIVE_INFINITY;return To.forIn(t,function(t,o){var i=function(e,t){return e.node(t).width}(e,o)/2;r=Math.max(t+i,r),n=Math.min(t-i,n)}),r-n})}(e,o);return function(e,t){var r=To.values(t),n=To.min(r),o=To.max(r);To.forEach(["u","d"],function(r){To.forEach(["l","r"],function(i){var a,s=r+i,u=e[s];if(u!==t){var l=To.values(u);(a="l"===i?n-To.min(l):o-To.max(l))&&(e[s]=To.mapValues(u,function(e){return e+a}))}})})}(o,i),function(e,t){return To.mapValues(e.ul,function(r,n){if(t)return e[t.toLowerCase()][n];var o=To.sortBy(To.map(e,n));return(o[1]+o[2])/2})}(o,e.graph().align)},Wi=Vo.normalizeRanks,Yi=Vo.removeEmptyRanks,Hi=Vo,Xi=qn.Graph,qi=["nodesep","edgesep","ranksep","marginx","marginy"],Ji={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},Zi=["acyclicer","ranker","rankdir","align"],Ki=["width","height"],Qi={width:0,height:0},$i=["minlen","weight","width","height","labeloffset"],ea={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},ta=["labelpos"];function ra(e,t){return To.mapValues(To.pick(e,t),Number)}function na(e){var t={};return To.forEach(e,function(e,r){t[r.toLowerCase()]=e}),t}var oa=qn.Graph,ia={graphlib:qn,layout:function(e,t){var r=t&&t.debugTiming?Hi.time:Hi.notime;r("layout",function(){var t=r("  buildLayoutGraph",function(){return function(e){var t=new Xi({multigraph:!0,compound:!0}),r=na(e.graph());return t.setGraph(To.merge({},Ji,ra(r,qi),To.pick(r,Zi))),To.forEach(e.nodes(),function(r){var n=na(e.node(r));t.setNode(r,To.defaults(ra(n,Ki),Qi)),t.setParent(r,e.parent(r))}),To.forEach(e.edges(),function(r){var n=na(e.edge(r));t.setEdge(r,To.merge({},ea,ra(n,$i),To.pick(n,ta)))}),t}(e)});r("  runLayout",function(){!function(e,t){t("    makeSpaceForEdgeLabels",function(){!function(e){var t=e.graph();t.ranksep/=2,To.forEach(e.edges(),function(r){var n=e.edge(r);n.minlen*=2,"c"!==n.labelpos.toLowerCase()&&("TB"===t.rankdir||"BT"===t.rankdir?n.width+=n.labeloffset:n.height+=n.labeloffset)})}(e)}),t("    removeSelfEdges",function(){!function(e){To.forEach(e.edges(),function(t){if(t.v===t.w){var r=e.node(t.v);r.selfEdges||(r.selfEdges=[]),r.selfEdges.push({e:t,label:e.edge(t)}),e.removeEdge(t)}})}(e)}),t("    acyclic",function(){Go(e)}),t("    nestingGraph.run",function(){bi(e)}),t("    rank",function(){!function(e){switch(e.graph().ranker){case"network-simplex":mi(e);break;case"tight-tree":!function(e){vi(e),Qo(e)}(e);break;case"longest-path":gi(e);break;default:mi(e)}}(Hi.asNonCompoundGraph(e))}),t("    injectEdgeLabelProxies",function(){!function(e){To.forEach(e.edges(),function(t){var r=e.edge(t);if(r.width&&r.height){var n=e.node(t.v),o={rank:(e.node(t.w).rank-n.rank)/2+n.rank,e:t};Hi.addDummyNode(e,"edge-proxy",o,"_ep")}})}(e)}),t("    removeEmptyRanks",function(){Yi(e)}),t("    nestingGraph.cleanup",function(){wi(e)}),t("    normalizeRanks",function(){Wi(e)}),t("    assignRankMinMax",function(){!function(e){var t=0;To.forEach(e.nodes(),function(r){var n=e.node(r);n.borderTop&&(n.minRank=e.node(n.borderTop).rank,n.maxRank=e.node(n.borderBottom).rank,t=To.max(t,n.maxRank))}),e.graph().maxRank=t}(e)}),t("    removeEdgeLabelProxies",function(){!function(e){To.forEach(e.nodes(),function(t){var r=e.node(t);"edge-proxy"===r.dummy&&(e.edge(r.e).labelRank=r.rank,e.removeNode(t))})}(e)}),t("    normalize.run",function(){Ho(e)}),t("    parentDummyChains",function(){!function(e){var t=function(e){var t={},r=0;return To.forEach(e.children(),function n(o){var i=r;To.forEach(e.children(o),n),t[o]={low:i,lim:r++}}),t}(e);To.forEach(e.graph().dummyChains,function(r){for(var n=e.node(r),o=n.edgeObj,i=function(e,t,r,n){var o,i,a=[],s=[],u=Math.min(t[r].low,t[n].low),l=Math.max(t[r].lim,t[n].lim);o=r;do{o=e.parent(o),a.push(o)}while(o&&(t[o].low>u||l>t[o].lim));for(i=o,o=n;(o=e.parent(o))!==i;)s.push(o);return{path:a.concat(s.reverse()),lca:i}}(e,t,o.v,o.w),a=i.path,s=i.lca,u=0,l=a[u],c=!0;r!==o.w;){if(n=e.node(r),c){for(;(l=a[u])!==s&&e.node(l).maxRank<n.rank;)u++;l===s&&(c=!1)}if(!c){for(;u<a.length-1&&e.node(l=a[u+1]).minRank<=n.rank;)u++;l=a[u]}e.setParent(r,l),r=e.successors(r)[0]}})}(e)}),t("    addBorderSegments",function(){!function(e){To.forEach(e.children(),function t(r){var n=e.children(r),o=e.node(r);if(n.length&&To.forEach(n,t),To.has(o,"minRank")){o.borderLeft=[],o.borderRight=[];for(var i=o.minRank,a=o.maxRank+1;i<a;++i)_i(e,"borderLeft","_bl",r,o,i),_i(e,"borderRight","_br",r,o,i)}})}(e)}),t("    order",function(){Ni(e)}),t("    insertSelfEdges",function(){!function(e){var t=Hi.buildLayerMatrix(e);To.forEach(t,function(t){var r=0;To.forEach(t,function(t,n){var o=e.node(t);o.order=n+r,To.forEach(o.selfEdges,function(t){Hi.addDummyNode(e,"selfedge",{width:t.label.width,height:t.label.height,rank:o.rank,order:n+ ++r,e:t.e,label:t.label},"_se")}),delete o.selfEdges})})}(e)}),t("    adjustCoordinateSystem",function(){xi(e)}),t("    position",function(){!function(e){(function(e){var t=Vo.buildLayerMatrix(e),r=e.graph().ranksep,n=0;To.forEach(t,function(t){var o=To.max(To.map(t,function(t){return e.node(t).height}));To.forEach(t,function(t){e.node(t).y=n+o/2}),n+=o+r})})(e=Vo.asNonCompoundGraph(e)),To.forEach(Vi(e),function(t,r){e.node(r).x=t})}(e)}),t("    positionSelfEdges",function(){!function(e){To.forEach(e.nodes(),function(t){var r=e.node(t);if("selfedge"===r.dummy){var n=e.node(r.e.v),o=n.x+n.width/2,i=n.y,a=r.x-o,s=n.height/2;e.setEdge(r.e,r.label),e.removeNode(t),r.label.points=[{x:o+2*a/3,y:i-s},{x:o+5*a/6,y:i-s},{x:o+a,y:i},{x:o+5*a/6,y:i+s},{x:o+2*a/3,y:i+s}],r.label.x=r.x,r.label.y=r.y}})}(e)}),t("    removeBorderNodes",function(){!function(e){To.forEach(e.nodes(),function(t){if(e.children(t).length){var r=e.node(t),n=e.node(r.borderTop),o=e.node(r.borderBottom),i=e.node(To.last(r.borderLeft)),a=e.node(To.last(r.borderRight));r.width=Math.abs(a.x-i.x),r.height=Math.abs(o.y-n.y),r.x=i.x+r.width/2,r.y=n.y+r.height/2}}),To.forEach(e.nodes(),function(t){"border"===e.node(t).dummy&&e.removeNode(t)})}(e)}),t("    normalize.undo",function(){Xo(e)}),t("    fixupEdgeLabelCoords",function(){!function(e){To.forEach(e.edges(),function(t){var r=e.edge(t);if(To.has(r,"x"))switch("l"!==r.labelpos&&"r"!==r.labelpos||(r.width-=r.labeloffset),r.labelpos){case"l":r.x-=r.width/2+r.labeloffset;break;case"r":r.x+=r.width/2+r.labeloffset}})}(e)}),t("    undoCoordinateSystem",function(){Si(e)}),t("    translateGraph",function(){!function(e){var t=Number.POSITIVE_INFINITY,r=0,n=Number.POSITIVE_INFINITY,o=0,i=e.graph(),a=i.marginx||0,s=i.marginy||0;function u(e){var i=e.x,a=e.y,s=e.width,u=e.height;t=Math.min(t,i-s/2),r=Math.max(r,i+s/2),n=Math.min(n,a-u/2),o=Math.max(o,a+u/2)}To.forEach(e.nodes(),function(t){u(e.node(t))}),To.forEach(e.edges(),function(t){var r=e.edge(t);To.has(r,"x")&&u(r)}),t-=a,n-=s,To.forEach(e.nodes(),function(r){var o=e.node(r);o.x-=t,o.y-=n}),To.forEach(e.edges(),function(r){var o=e.edge(r);To.forEach(o.points,function(e){e.x-=t,e.y-=n}),To.has(o,"x")&&(o.x-=t),To.has(o,"y")&&(o.y-=n)}),i.width=r-t+a,i.height=o-n+s}(e)}),t("    assignNodeIntersects",function(){!function(e){To.forEach(e.edges(),function(t){var r,n,o=e.edge(t),i=e.node(t.v),a=e.node(t.w);o.points?(r=o.points[0],n=o.points[o.points.length-1]):(o.points=[],r=a,n=i),o.points.unshift(Hi.intersectRect(i,r)),o.points.push(Hi.intersectRect(a,n))})}(e)}),t("    reversePoints",function(){!function(e){To.forEach(e.edges(),function(t){var r=e.edge(t);r.reversed&&r.points.reverse()})}(e)}),t("    acyclic.undo",function(){zo(e)})}(t,r)}),r("  updateInputGraph",function(){!function(e,t){To.forEach(e.nodes(),function(r){var n=e.node(r),o=t.node(r);n&&(n.x=o.x,n.y=o.y,t.children(r).length&&(n.width=o.width,n.height=o.height))}),To.forEach(e.edges(),function(r){var n=e.edge(r),o=t.edge(r);n.points=o.points,To.has(o,"x")&&(n.x=o.x,n.y=o.y)}),e.graph().width=t.graph().width,e.graph().height=t.graph().height}(e,t)})})},debug:{debugOrdering:function(e){var t=Vo.buildLayerMatrix(e),r=new oa({compound:!0,multigraph:!0}).setGraph({});return To.forEach(e.nodes(),function(t){r.setNode(t,{label:t}),r.setParent(t,"layer"+e.node(t).rank)}),To.forEach(e.edges(),function(e){r.setEdge(e.v,e.w,{},e.name)}),To.forEach(t,function(e,t){var n="layer"+t;r.setNode(n,{rank:"same"}),To.reduce(e,function(e,t){return r.setEdge(e,t,{style:"invis"}),t})}),r}},util:{time:Vo.time,notime:Vo.notime},version:"0.8.5"},aa=ia.graphlib,sa=ia.layout,ua=v(function t(r){g(this,t),this.cardinality=1,this.include=e.InclusionType.UNSPECIFIED,this.isGroupNode=!1,this.parentNode=null,this.type=e.NodeType.NODE,this.name=r.name,this.attr=r.attr||{},this.inputs=r.inputs,this.path=r.path||[],this.width=r.width,this.height=r.height}),la=v(function e(){g(this,e),this.nodes={},this.edges=[],this.nodes={},this.edges=[]});var ca=function(){function t(r){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};g(this,t),this.attr=null,this.bridgeGraph=null,this.cardinality=0,this.depth=1,this.include=e.InclusionType.UNSPECIFIED,this.isGroupNode=!0,this.parentNode=null,this.type=e.NodeType.META,this.path=[],this.name=r,this.metaGraph=da(r,e.GraphType.META,n)}return v(t,[{key:"getFirstChild",value:function(){return this.metaGraph.node(this.metaGraph.nodes()[0])}},{key:"getChildren",value:function(){var e=this;return this.metaGraph.nodes().map(function(t){return e.metaGraph.node(t)})}},{key:"leaves",value:function(){for(var e,t=[],r=[this];r.length;){var n=r.shift();n.isGroupNode?(e=n.metaGraph).nodes().forEach(function(t){return r.push(e.node(t))}):t.push(n.name)}return t}}]),t}(),fa=function(){function e(t,r){g(this,e),this.v=t,this.w=r,this.baseEdgeList=[],this.inbound=null,this.name=null}return v(e,[{key:"addBaseEdge",value:function(e,t){this.baseEdgeList.push(e)}}]),e}();function ha(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new ca(e,t)}function pa(e,t){return new fa(e,t)}function da(e,t,r){var n=r||{},o=new aa.Graph(n);return o.setGraph({name:e,rankdir:n.rankdir,type:t,align:n.align}),o}var ya=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};g(this,t),this.graphOptions=e,this.index={},this.graphOptions.compound=!0,this.root=ha(d,this.graphOptions),this.index[d]=this.root}return v(t,[{key:"getNodeMap",value:function(){return this.index}},{key:"node",value:function(e){return this.index[e]}},{key:"setNode",value:function(e,t){this.index[e]=t}},{key:"getBridgeGraph",value:function(t){var r=this,n=this.index[t];if(!n)throw Error("Could not find node in hierarchy: "+t);if(!("metaGraph"in n))return null;var o=n;if(o.bridgeGraph)return o.bridgeGraph;var i=da(y,e.GraphType.BRIDGE,this.graphOptions);if(o.bridgeGraph=i,!(n.parentNode&&"metaGraph"in n.parentNode))return i;var a=n.parentNode;return[a.metaGraph,this.getBridgeGraph(a.name)].forEach(function(e){e.edges().filter(function(e){return e.v===t||e.w===t}).forEach(function(n){var o=n.w===t;e.edge(n).baseEdgeList.forEach(function(e){var a=h(o?[e.w,n.v]:[e.v,n.w],2),s=a[0],u=a[1],l=r.getChildName(t,s),c={v:o?u:l,w:o?l:u},f=i.edge(c);f||((f=pa(c.v,c.w)).inbound=o,i.setEdge(c.v,c.w,f)),f.addBaseEdge(e,r)})})}),i}},{key:"getChildName",value:function(e,t){for(var r=this.index[t];r;){if(r.parentNode&&r.parentNode.name===e)return r.name;r=r.parentNode}throw Error("Could not find immediate child for descendant: "+t)}},{key:"getPredecessors",value:function(e){var t=this.index[e];if(!t)throw Error("Could not find node with name: "+e);return this.getOneWayEdges(t,!0)}},{key:"getSuccessors",value:function(e){var t=this.index[e];if(!t)throw Error("Could not find node with name: "+e);return this.getOneWayEdges(t,!1)}},{key:"getOneWayEdges",value:function(e,t){var r=[];if(!e.parentNode||!e.parentNode.isGroupNode)return r;var n=e.parentNode,o=n.metaGraph,i=this.getBridgeGraph(n.name);return va(o,e,t,r),va(i,e,t,r),r}}]),t}();function va(e,t,r,n){(r?e.inEdges(t.name):e.outEdges(t.name)).forEach(function(t){var r=e.edge(t);n.push(r)})}var ga=function(){function t(e){g(this,t),this.hierarchy=e,this.index={},this.hasSubHierarchy={},this.root=new wa(this.hierarchy.root,this.hierarchy.graphOptions),this.index[e.root.name]=this.root,this.buildSubHierarchy(e.root.name),this.root.expanded=!0}return v(t,[{key:"getRenderInfoNodes",value:function(){return Object.values(this.index)}},{key:"getSubHierarchy",value:function(){return this.hasSubHierarchy}},{key:"buildSubHierarchy",value:function(t){var r=this;if(!(t in this.hasSubHierarchy)){this.hasSubHierarchy[t]=!0;var n=this.index[t];if(n.node.type===e.NodeType.META){var o=n,i=o.node.metaGraph,a=o.coreGraph;i.nodes().forEach(function(e){var t=r.getOrCreateRenderNodeByName(e);a.setNode(e,t)}),i.edges().forEach(function(e){var t=i.edge(e),r=new ba(t);a.setEdge(e.v,e.w,r)});var s=o.node.parentNode;if(s){var u=this.getRenderNodeByName(s.name),l=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return r.concat([e?"IN":"OUT"]).join("~~")},c=this.hierarchy.getBridgeGraph(t);c.edges().forEach(function(n){var o=c.edge(n),f=!!i.node(n.w),p=h(f?[n.w,n.v]:[n.v,n.w],2),d=p[0],y=p[1],v=function(e){var r=f?{v:e,w:t}:{v:t,w:e};return u.coreGraph.edge(r)},g=v(y);g||(g=v(l(f,y,s.name)));var m=l(f,t),b=l(f,y,t),w=a.node(b);if(!w){var _=a.node(m);if(!_){var x={name:m,type:e.NodeType.BRIDGE,isGroupNode:!1,cardinality:0,parentNode:null,include:e.InclusionType.UNSPECIFIED,inbound:f,attr:{}};_=new ma(x),r.index[m]=_,a.setNode(m,_)}var S={name:b,type:e.NodeType.BRIDGE,isGroupNode:!1,cardinality:1,parentNode:null,include:e.InclusionType.UNSPECIFIED,inbound:f,attr:{}};w=new ma(S),r.index[b]=w,a.setNode(b,w),a.setParent(b,m),_.node.cardinality++}var O=new ba(o);O.adjoiningMetaEdge=g,f?a.setEdge(b,d,O):a.setEdge(d,b,O)})}}}}},{key:"getOrCreateRenderNodeByName",value:function(e){if(!e)return null;if(e in this.index)return this.index[e];var t=this.getNodeByName(e);return t?(this.index[e]=t.isGroupNode?new wa(t,this.hierarchy.graphOptions):new ma(t),this.index[e]):null}},{key:"getRenderNodeByName",value:function(e){return this.index[e]}},{key:"getNodeByName",value:function(e){return this.hierarchy.node(e)}}]),t}(),ma=v(function e(t){g(this,e),this.node=t,this.expanded=!1,this.x=0,this.y=0,this.coreBox={width:0,height:0},this.outboxWidth=0,this.labelOffset=0,this.radius=0,this.labelHeight=0,this.paddingTop=0,this.paddingLeft=0,this.paddingRight=0,this.paddingBottom=0,this.width=t.width||0,this.height=t.height||0,this.displayName=t.name,this.attr=t.attr}),ba=v(function e(t){g(this,e),this.metaEdge=t,this.adjoiningMetaEdge=null,this.weight=1,this.points=[]}),wa=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&l(e,t)}(n,ma);var r=c(n);function n(t,o){var i;g(this,n),i=r.call(this,t);var a=t.metaGraph.graph();return o.compound=!0,i.coreGraph=da(a.name,e.GraphType.CORE,o),i}return v(n)}();function _a(t,r){t.node.isGroupNode&&function(t,r){var o=n(r);t.coreGraph.nodes().map(function(e){return t.coreGraph.node(e)}).forEach(function(t){var n,i,a,s,u,l,c=t.height,f=t.width;switch(t.node.type){case e.NodeType.NODE:Object.assign(t,o.nodeSize.node),t.height=c||o.nodeSize.node.height,t.width=f||o.nodeSize.node.width;break;case e.NodeType.BRIDGE:Object.assign(t,o.nodeSize.bridge);break;case e.NodeType.META:t.expanded?_a(t,r):(Object.assign(t,o.nodeSize.meta),t.height=o.nodeSize.meta.height,t.width=o.nodeSize.meta.width);break;default:throw Error("Unrecognized node type: "+t.node.type)}if(!t.expanded){var h=t.attr;!function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.coreBox.width=e.width,e.coreBox.height=e.height,!t){var r="".concat(e.displayName).length;e.width=Math.max(e.coreBox.width,3*r)}}(t,r&&(0===t.node.type&&!!(null===(i=null===(n=null==r?void 0:r.nodeSize)||void 0===n?void 0:n.meta)||void 0===i?void 0:i.width)||1===t.node.type&&(!!(null===(s=null===(a=null==r?void 0:r.nodeSize)||void 0===a?void 0:a.node)||void 0===s?void 0:s.width)||!!h.width)||2===t.node.type&&!!(null===(l=null===(u=null==r?void 0:r.nodeSize)||void 0===u?void 0:u.bridge)||void 0===l?void 0:l.width)))}})}(t,r),t.node.type===e.NodeType.META&&function(t,r){var o=n(r),i=o.subScene.meta;Object.assign(t,i);var a=o.graph.meta,s={nodesep:a.nodeSep,ranksep:a.rankSep,edgesep:a.edgeSep,align:a.align};Object.assign(t.coreBox,function(t,r){var n=r.ranksep,o=r.nodesep,i=r.edgesep,a=r.align;Object.assign(t.graph(),{ranksep:n,nodesep:o,edgesep:i,align:a});var s=[];if(t.nodes().forEach(function(r){t.node(r).node.type!==e.NodeType.BRIDGE&&s.push(r)}),!s.length)return{width:0,height:0};sa(t);var u=1/0,l=1/0,c=-1/0,f=-1/0;return s.forEach(function(e){var r=t.node(e),n=.5*r.width,o=r.x-n,i=r.x+n;u=o<u?o:u,c=i>c?i:c;var a=.5*r.height,s=r.y-a,h=r.y+a;l=s<l?s:l,f=h>f?h:f}),t.edges().forEach(function(e){var r=t.edge(e),n=t.node(r.metaEdge.v),o=t.node(r.metaEdge.w);if(3===r.points.length&&function(e){for(var t=xa(e[0],e[1]),r=1;r<e.length-1;r++){var n=xa(e[r],e[r+1]);if(Math.abs(n-t)>1)return!1;t=n}return!0}(r.points)){if(null!=n){var i=n.expanded?n.x:Sa(n);r.points[0].x=i}if(null!=o){var a=o.expanded?o.x:Sa(o);r.points[2].x=a}r.points=[r.points[0],r.points[1]]}var s=r.points[r.points.length-2];null!=o&&(r.points[r.points.length-1]=Oa(s,o));var h=r.points[1];null!=n&&(r.points[0]=Oa(h,n)),r.points.forEach(function(e){u=e.x<u?e.x:u,c=e.x>c?e.x:c,l=e.y<l?e.y:l,f=e.y>f?e.y:f})}),t.nodes().forEach(function(e){var r=t.node(e);r.x-=u,r.y-=l}),t.edges().forEach(function(e){t.edge(e).points.forEach(function(e){e.x-=u,e.y-=l})}),{width:c-u,height:f-l}}(t.coreGraph,s));var u=0;t.coreGraph.nodeCount()>0&&u++;var l=u<=1?0:u;t.coreBox.width+=l+l,t.coreBox.height=i.labelHeight+t.coreBox.height,t.width=t.coreBox.width+i.paddingLeft+i.paddingRight,t.height=t.paddingTop+t.coreBox.height+t.paddingBottom}(t,r)}function xa(e,t){var r=t.x-e.x,n=t.y-e.y;return 180*Math.atan(n/r)/Math.PI}function Sa(e){return e.expanded?e.x:e.x-e.width/2+0+e.coreBox.width/2}function Oa(e,t){var r,n,o=t.expanded?t.x:Sa(t),i=t.y,a=e.x-o,s=e.y-i,u=t.expanded?t.width:t.coreBox.width,l=t.expanded?t.height:t.coreBox.height;return Math.abs(s)*u/2>Math.abs(a)*l/2?(s<0&&(l=-l),r=0===s?0:l/2*a/s,n=l/2):(a<0&&(u=-u),r=u/2,n=0===a?0:u/2*s/a),{x:o+r,y:i+n}}function Pa(t){var r,n=t.coreGraph.nodes().map(function(e){return t.coreGraph.node(e)});return Object.assign(Object.assign({},Ea(t)),{expanded:t.expanded,nodes:t.expanded?(r=n,r.map(function(t){return t.node.type===e.NodeType.META?Pa(t):Ea(t)})):[],edges:t.expanded?function(e){return e.coreGraph.edges().map(function(t){return{renderInfoEdge:e.coreGraph.edge(t),edge:t}}).filter(function(e){var t=e.renderInfoEdge;return t.metaEdge}).map(function(t){var r=t.edge,n=t.renderInfoEdge,o=function(e,t){var r=t.points.map(function(e){return Object.assign({},e)});if(t.adjoiningMetaEdge){var n=t.adjoiningMetaEdge.points,o=t.metaEdge.inbound,i=o?n[n.length-1]:n[0],a=r[o?0:r.length-1],s=e.x-e.width/2,u=e.y-e.height/2,l=i.x-s,c=i.y-u,f=-e.paddingLeft,h=-(e.paddingTop+e.labelHeight);a.x=l+f,a.y=c+h}return r}(e,n);return{adjoiningEdge:n.adjoiningMetaEdge?{w:n.adjoiningMetaEdge.metaEdge.w,v:n.adjoiningMetaEdge.metaEdge.v}:null,inbound:n.metaEdge.inbound,w:r.w,v:r.v,points:o,weight:n.weight,baseEdgeList:n.metaEdge.baseEdgeList,parentNodeName:e.node.name}})}(t):[]})}function Ea(e){return{id:e.node.name,name:e.node.name,type:e.node.type,cardinality:e.node.cardinality,attr:e.attr,parentNodeName:e.node.parentNode?e.node.parentNode.name:null,coreBox:Object.assign({},e.coreBox),x:e.x,y:e.y,width:e.width,height:e.height,radius:e.radius,labelHeight:e.labelHeight,labelOffset:e.labelOffset,outboxWidth:e.outboxWidth,paddingLeft:e.paddingLeft,paddingTop:e.paddingTop,paddingRight:e.paddingRight,paddingBottom:e.paddingBottom,path:e.node.path}}e.BRIDGE_GRAPH_NAME=y,e.LAYOUT_CONFIG=t,e.ROOT_NAME=d,e.buildGraph=function(e,r,n){var o,i,a,l,c=e.nodes.filter(function(e,t,r){return r.findIndex(function(t){return t.id===e.id})!==t}).map(function(e){return e.id});if(c.length)throw new Error("Duplicated ids found: ".concat(c.join(", ")));var f=function(e){var t={nodes:[]},r=e.compound,n=Object.keys(r||{}),o=new Map,i=function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(o.has(t))return o.get(t);for(var a=0;a<n.length;a++){var s=n[a];if(r&&-1!==r[s].indexOf(t))return i.unshift(s),e(s,i)}return 0===i.length&&o.set(t,i),i},a=function(t){return e.edges.filter(function(e){return e.w===t}).map(function(e){return{name:e.v}})};return e.nodes.forEach(function(e){var r=e.id,n=[].concat(u(i(r)),[r]),o=a(r);t.nodes.push({name:r,path:n,inputs:o,width:e.width,height:e.height,attr:Object.assign({},e)})}),t}(e),p=function(e,t){var r=function(e,t){var r,n=s(t.values());try{for(n.s();!(r=n.n()).done;){if(r.value.includes(e))return!0}}catch(e){n.e(e)}finally{n.f()}return!1};return function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(0===Object.keys(t).length)return u(new Set(n));var o,i=new Map(Object.keys(t).map(function(e){return[e,t[e]]})),a={},l=s(i);try{for(l.s();!(o=l.n()).done;){var c=h(o.value,2),f=c[0],p=c[1];r(f,i)?a[f]=p:n=n.concat(f,p)}}catch(e){l.e(e)}finally{l.f()}return e(a,n)}(e).filter(function(e){return t.includes(e)})}(e.compound||{},(null==r?void 0:r.expanded)||[]),d=function(e,t){return function(e){return new ga(e)}(function(e,t){var r=t.rankDirection,n=t.align,o=new ya({rankdir:r,align:n});return function(e,t){Object.keys(t.nodes).forEach(function(r){var n=t.nodes[r],o=n.path,i=e.root;i.depth=Math.max(o.length,i.depth);for(var a=0;a<o.length&&(i.depth=Math.max(i.depth,o.length-a),i.cardinality+=n.cardinality,a!==o.length-1);a++){var s=o[a],u=e.node(s);u||((u=ha(s,e.graphOptions)).path=n.path.slice(0,a+1),u.parentNode=i,e.setNode(s,u),i.metaGraph.setNode(s,u)),i=u}e.setNode(n.name,n),n.parentNode=i,i.metaGraph.setNode(n.name,n)})}(o,e),function(e,t){var r=e.getNodeMap(),n=[],o=[],i=function(e,t){for(var r=0;e;)t[r++]=e.name,e=e.parentNode;return r-1};t.edges.forEach(function(a){n=[],o=[];for(var s=i(t.nodes[a.v],n),u=i(t.nodes[a.w],o);n[s]===o[u];)if(u--,--s<0||u<0)throw Error("No difference found between ancestor paths.");var l=r[n[s+1]],c=n[s],f=o[u],h=l.metaGraph.edge(c,f);h||(h=pa(c,f),l.metaGraph.setEdge(c,f,h)),h.addBaseEdge(a,e)})}(o,e),o}(function(e){var t=new la;return e.nodes.map(function(e){return new ua(e)}).forEach(function(e){t.nodes[e.name]=e,e.inputs.forEach(function(r){!function(e,t,r){r.name!==t.name&&e.edges.push(Object.assign(Object.assign({},r.attr),{v:r.name,w:t.name}))}(t,e,r)})}),t}(e),t))}(f,{rankDirection:(null===(i=null===(o=null==n?void 0:n.graph)||void 0===o?void 0:o.meta)||void 0===i?void 0:i.rankDir)||(null==r?void 0:r.rankDirection)||t.graph.meta.rankDir,align:(null===(l=null===(a=null==n?void 0:n.graph)||void 0===a?void 0:a.meta)||void 0===l?void 0:l.align)||t.graph.meta.align});return function(e,t){p.forEach(function(t){var r=e.getRenderInfoNodes().find(function(e){return e.displayName===t}),n=r&&r.node&&r.node.name||"",o=e.getRenderNodeByName(n);if(!o)throw new Error("No nodes found: ".concat(n));o.expanded=!0,e.buildSubHierarchy(n)})}(d),_a(d.root,n),Pa(d.root)},e.flatGraph=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=JSON.parse(JSON.stringify(e)),n={nodes:[r],edges:u(r.edges)};return r.nodes.forEach(function e(t){(0===t.type||1===t.type)&&n.nodes.push(t),0===t.type&&(n.edges=n.edges.concat(t.edges)),Array.isArray(t.nodes)&&t.nodes.forEach(e)}),t&&n.nodes.forEach(function(e){var t=n.nodes.find(function(t){return t.id===e.parentNodeName});if(t){var r=t.x-t.width/2+t.paddingLeft,o=t.y-t.height/2+t.labelHeight+t.paddingTop;t.id!==d&&(e.x+=r,e.y+=o),0===e.type&&e.edges.forEach(function(t){t.points.forEach(function(t){t.x+=e.x-e.width/2+e.paddingLeft,t.y+=e.y-e.height/2+e.labelHeight+e.paddingTop})})}}),n},e.getEdges=function(e,t,r,n){var o,i,a=[],s=(null===(o=r.find(function(t){return t.id===e}))||void 0===o?void 0:o.path)||[],l=(null===(i=r.find(function(e){return e.id===t}))||void 0===i?void 0:i.path)||[],c=[d].concat(u(s)).slice(0,s.length).reverse(),f=[d].concat(u(l)).slice(0,l.length);return c.forEach(function(o){var i=r.find(function(e){return e.id===o});a=a.concat(i.edges.filter(function(r){return r.baseEdgeList.some(function(r){return r.v===((null==n?void 0:n.v)||e)&&r.w===((null==n?void 0:n.w)||t)})}))}),f.filter(function(e){return!c.includes(e)}).forEach(function(o){var i=r.find(function(e){return e.id===o});a=a.concat(i.edges.filter(function(r){return r.baseEdgeList.some(function(r){return r.v===((null==n?void 0:n.v)||e)&&r.w===((null==n?void 0:n.w)||t)})}))}),a},e.mergeConfig=n,Object.defineProperty(e,"__esModule",{value:!0})},"object"==m(t)?a(t):(o=[t],void 0===(i="function"==typeof(n=a)?n.apply(t,o):n)||(e.exports=i))},81758:function(e,t){"use strict";var r=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,o=0,i=t.length;o<i;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.getNodeVersion=t.detectOS=t.parseUserAgent=t.browserName=t.detect=t.ReactNativeInfo=t.BotInfo=t.SearchBotDeviceInfo=t.NodeInfo=t.BrowserInfo=void 0;var n=function(){return function(e,t,r){this.name=e,this.version=t,this.os=r,this.type="browser"}}();t.BrowserInfo=n;var o=function(){return function(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}}();t.NodeInfo=o;var i=function(){return function(e,t,r,n){this.name=e,this.version=t,this.os=r,this.bot=n,this.type="bot-device"}}();t.SearchBotDeviceInfo=i;var a=function(){return function(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}}();t.BotInfo=a;var s=function(){return function(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}}();t.ReactNativeInfo=s;var u=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,l=3,c=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/]],f=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function h(e){return""!==e&&c.reduce(function(t,r){var n=r[0],o=r[1];if(t)return t;var i=o.exec(e);return!!i&&[n,i]},!1)}function p(e){var t=h(e);if(!t)return null;var o=t[0],s=t[1];if("searchbot"===o)return new a;var c=s[1]&&s[1].split(".").join("_").split("_").slice(0,3);c?c.length<l&&(c=r(r([],c,!0),function(e){for(var t=[],r=0;r<e;r++)t.push("0");return t}(l-c.length),!0)):c=[];var f=c.join("."),p=d(e),y=u.exec(e);return y&&y[1]?new i(o,f,p,y[1]):new n(o,f,p)}function d(e){for(var t=0,r=f.length;t<r;t++){var n=f[t],o=n[0];if(n[1].exec(e))return o}return null}function y(){return"undefined"!=typeof process&&process.version?new o(process.version.slice(1)):null}t.detect=function(e){return e?p(e):"undefined"==typeof document&&"undefined"!=typeof navigator&&"ReactNative"===navigator.product?new s:"undefined"!=typeof navigator?p(navigator.userAgent):y()},t.browserName=function(e){var t=h(e);return t?t[0]:null},t.parseUserAgent=p,t.detectOS=d,t.getNodeVersion=y},95676:function(e,t){var r,n,o,i;function a(e){"@babel/helpers - typeof";return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}i=function(e){"use strict";var t=/d{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|ZZ|Z|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,r="[^\\s]+",n=/\[([^]*?)\]/gm;function o(e,t){for(var r=[],n=0,o=e.length;n<o;n++)r.push(e[n].substr(0,t));return r}var i=function(e){return function(t,r){var n=r[e].map(function(e){return e.toLowerCase()}).indexOf(t.toLowerCase());return n>-1?n:null}};function a(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];for(var n=0,o=t;n<o.length;n++){var i=o[n];for(var a in i)e[a]=i[a]}return e}var s=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],u=["January","February","March","April","May","June","July","August","September","October","November","December"],l=o(u,3),c={dayNamesShort:o(s,3),dayNames:s,monthNamesShort:l,monthNames:u,amPm:["am","pm"],DoFn:function(e){return e+["th","st","nd","rd"][e%10>3?0:(e-e%10!=10?1:0)*e%10]}},f=a({},c),h=function(e){return f=a(f,e)},p=function(e){return e.replace(/[|\\{()[^$+*?.-]/g,"\\$&")},d=function(e,t){for(void 0===t&&(t=2),e=String(e);e.length<t;)e="0"+e;return e},y={D:function(e){return String(e.getDate())},DD:function(e){return d(e.getDate())},Do:function(e,t){return t.DoFn(e.getDate())},d:function(e){return String(e.getDay())},dd:function(e){return d(e.getDay())},ddd:function(e,t){return t.dayNamesShort[e.getDay()]},dddd:function(e,t){return t.dayNames[e.getDay()]},M:function(e){return String(e.getMonth()+1)},MM:function(e){return d(e.getMonth()+1)},MMM:function(e,t){return t.monthNamesShort[e.getMonth()]},MMMM:function(e,t){return t.monthNames[e.getMonth()]},YY:function(e){return d(String(e.getFullYear()),4).substr(2)},YYYY:function(e){return d(e.getFullYear(),4)},h:function(e){return String(e.getHours()%12||12)},hh:function(e){return d(e.getHours()%12||12)},H:function(e){return String(e.getHours())},HH:function(e){return d(e.getHours())},m:function(e){return String(e.getMinutes())},mm:function(e){return d(e.getMinutes())},s:function(e){return String(e.getSeconds())},ss:function(e){return d(e.getSeconds())},S:function(e){return String(Math.round(e.getMilliseconds()/100))},SS:function(e){return d(Math.round(e.getMilliseconds()/10),2)},SSS:function(e){return d(e.getMilliseconds(),3)},a:function(e,t){return e.getHours()<12?t.amPm[0]:t.amPm[1]},A:function(e,t){return e.getHours()<12?t.amPm[0].toUpperCase():t.amPm[1].toUpperCase()},ZZ:function(e){var t=e.getTimezoneOffset();return(t>0?"-":"+")+d(100*Math.floor(Math.abs(t)/60)+Math.abs(t)%60,4)},Z:function(e){var t=e.getTimezoneOffset();return(t>0?"-":"+")+d(Math.floor(Math.abs(t)/60),2)+":"+d(Math.abs(t)%60,2)}},v=function(e){return+e-1},g=[null,"\\d\\d?"],m=[null,r],b=["isPm",r,function(e,t){var r=e.toLowerCase();return r===t.amPm[0]?0:r===t.amPm[1]?1:null}],w=["timezoneOffset","[^\\s]*?[\\+\\-]\\d\\d:?\\d\\d|[^\\s]*?Z?",function(e){var t=(e+"").match(/([+-]|\d\d)/gi);if(t){var r=60*+t[1]+parseInt(t[2],10);return"+"===t[0]?r:-r}return 0}],_={D:["day","\\d\\d?"],DD:["day","\\d\\d"],Do:["day","\\d\\d?"+r,function(e){return parseInt(e,10)}],M:["month","\\d\\d?",v],MM:["month","\\d\\d",v],YY:["year","\\d\\d",function(e){var t=+(""+(new Date).getFullYear()).substr(0,2);return+(""+(+e>68?t-1:t)+e)}],h:["hour","\\d\\d?",void 0,"isPm"],hh:["hour","\\d\\d",void 0,"isPm"],H:["hour","\\d\\d?"],HH:["hour","\\d\\d"],m:["minute","\\d\\d?"],mm:["minute","\\d\\d"],s:["second","\\d\\d?"],ss:["second","\\d\\d"],YYYY:["year","\\d{4}"],S:["millisecond","\\d",function(e){return 100*+e}],SS:["millisecond","\\d\\d",function(e){return 10*+e}],SSS:["millisecond","\\d{3}"],d:g,dd:g,ddd:m,dddd:m,MMM:["month",r,i("monthNamesShort")],MMMM:["month",r,i("monthNames")],a:b,A:b,ZZ:w,Z:w},x={default:"ddd MMM DD YYYY HH:mm:ss",shortDate:"M/D/YY",mediumDate:"MMM D, YYYY",longDate:"MMMM D, YYYY",fullDate:"dddd, MMMM D, YYYY",isoDate:"YYYY-MM-DD",isoDateTime:"YYYY-MM-DDTHH:mm:ssZ",shortTime:"HH:mm",mediumTime:"HH:mm:ss",longTime:"HH:mm:ss.SSS"},S=function(e){return a(x,e)},O=function(e,r,o){if(void 0===r&&(r=x.default),void 0===o&&(o={}),"number"==typeof e&&(e=new Date(e)),"[object Date]"!==Object.prototype.toString.call(e)||isNaN(e.getTime()))throw new Error("Invalid Date pass to format");var i=[];r=(r=x[r]||r).replace(n,function(e,t){return i.push(t),"@@@"});var s=a(a({},f),o);return(r=r.replace(t,function(t){return y[t](e,s)})).replace(/@@@/g,function(){return i.shift()})};function P(e,r,o){if(void 0===o&&(o={}),"string"!=typeof r)throw new Error("Invalid format in fecha parse");if(r=x[r]||r,e.length>1e3)return null;var i={year:(new Date).getFullYear(),month:0,day:1,hour:0,minute:0,second:0,millisecond:0,isPm:null,timezoneOffset:null},s=[],u=[],l=r.replace(n,function(e,t){return u.push(p(t)),"@@@"}),c={},h={};l=p(l).replace(t,function(e){var t=_[e],r=t[0],n=t[1],o=t[3];if(c[r])throw new Error("Invalid format. "+r+" specified twice in format");return c[r]=!0,o&&(h[o]=!0),s.push(t),"("+n+")"}),Object.keys(h).forEach(function(e){if(!c[e])throw new Error("Invalid format. "+e+" is required in specified format")}),l=l.replace(/@@@/g,function(){return u.shift()});var d=e.match(new RegExp(l,"i"));if(!d)return null;for(var y,v=a(a({},f),o),g=1;g<d.length;g++){var m=s[g-1],b=m[0],w=m[2],S=w?w(d[g],v):+d[g];if(null==S)return null;i[b]=S}if(1===i.isPm&&null!=i.hour&&12!=+i.hour?i.hour=+i.hour+12:0===i.isPm&&12==+i.hour&&(i.hour=0),null==i.timezoneOffset){y=new Date(i.year,i.month,i.day,i.hour,i.minute,i.second,i.millisecond);for(var O=[["month","getMonth"],["day","getDate"],["hour","getHours"],["minute","getMinutes"],["second","getSeconds"]],P=(g=0,O.length);g<P;g++)if(c[O[g][0]]&&i[O[g][0]]!==y[O[g][1]]())return null}else if(y=new Date(Date.UTC(i.year,i.month,i.day,i.hour,i.minute-i.timezoneOffset,i.second,i.millisecond)),i.month>11||i.month<0||i.day>31||i.day<1||i.hour>23||i.hour<0||i.minute>59||i.minute<0||i.second>59||i.second<0)return null;return y}var E={format:O,parse:P,defaultI18n:c,setGlobalDateI18n:h,setGlobalDateMasks:S};e.assign=a,e.default=E,e.format=O,e.parse=P,e.defaultI18n=c,e.setGlobalDateI18n=h,e.setGlobalDateMasks=S,Object.defineProperty(e,"__esModule",{value:!0})},"object"===a(t)?i(t):(n=[t],void 0===(o="function"==typeof(r=i)?r.apply(t,n):r)||(e.exports=o))},95937:function(e){!function(t){"use strict";if(t.__disableNativeFetch||!t.fetch){s.prototype.append=function(e,t){e=i(e),t=a(t);var r=this.map[e];r||(r=[],this.map[e]=r),r.push(t)},s.prototype.delete=function(e){delete this.map[i(e)]},s.prototype.get=function(e){var t=this.map[i(e)];return t?t[0]:null},s.prototype.getAll=function(e){return this.map[i(e)]||[]},s.prototype.has=function(e){return this.map.hasOwnProperty(i(e))},s.prototype.set=function(e,t){this.map[i(e)]=[a(t)]},s.prototype.forEach=function(e,t){Object.getOwnPropertyNames(this.map).forEach(function(r){this.map[r].forEach(function(n){e.call(t,n,r,this)},this)},this)};var r={blob:"FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in t,arrayBuffer:"ArrayBuffer"in t},n=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];h.prototype.clone=function(){return new h(this)},f.call(h.prototype),f.call(d.prototype),d.prototype.clone=function(){return new d(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new s(this.headers),url:this.url})},d.error=function(){var e=new d(null,{status:0,statusText:""});return e.type="error",e};var o=[301,302,303,307,308];d.redirect=function(e,t){if(-1===o.indexOf(t))throw new RangeError("Invalid status code");return new d(null,{status:t,headers:{location:e}})},t.Headers=s,t.Request=h,t.Response=d,t.fetch=function(e,t){return new Promise(function(n,o){var i;i=h.prototype.isPrototypeOf(e)&&!t?e:new h(e,t);var a=new XMLHttpRequest;var u=!1;function l(){if(4===a.readyState){var e=1223===a.status?204:a.status;if(e<100||e>599){if(u)return;return u=!0,void o(new TypeError("Network request failed"))}var t={status:e,statusText:a.statusText,headers:function(e){var t=new s;return e.getAllResponseHeaders().trim().split("\n").forEach(function(e){var r=e.trim().split(":"),n=r.shift().trim(),o=r.join(":").trim();t.append(n,o)}),t}(a),url:"responseURL"in a?a.responseURL:/^X-Request-URL:/m.test(a.getAllResponseHeaders())?a.getResponseHeader("X-Request-URL"):void 0},r="response"in a?a.response:a.responseText;u||(u=!0,n(new d(r,t)))}}a.onreadystatechange=l,a.onload=l,a.onerror=function(){u||(u=!0,o(new TypeError("Network request failed")))},a.open(i.method,i.url,!0);try{"include"===i.credentials&&("withCredentials"in a?a.withCredentials=!0:console&&console.warn&&console.warn("withCredentials is not supported, you can ignore this warning"))}catch(e){console&&console.warn&&console.warn("set withCredentials error:"+e)}"responseType"in a&&r.blob&&(a.responseType="blob"),i.headers.forEach(function(e,t){a.setRequestHeader(t,e)}),a.send(void 0===i._bodyInit?null:i._bodyInit)})},t.fetch.polyfill=!0,e.exports&&(e.exports=t.fetch)}function i(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function a(e){return"string"!=typeof e&&(e=String(e)),e}function s(e){this.map={},e instanceof s?e.forEach(function(e,t){this.append(t,e)},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function u(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function l(e){return new Promise(function(t,r){e.onload=function(){t(e.result)},e.onerror=function(){r(e.error)}})}function c(e){var t=new FileReader;return t.readAsArrayBuffer(e),l(t)}function f(){return this.bodyUsed=!1,this._initBody=function(e,t){if(this._bodyInit=e,"string"==typeof e)this._bodyText=e;else if(r.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e,this._options=t;else if(r.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(e){if(!r.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(e))throw new Error("unsupported BodyInit type")}else this._bodyText=""},r.blob?(this.blob=function(){var e=u(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this.blob().then(c)},this.text=function(){var e,t,r,n,o,i,a,s=u(this);if(s)return s;if(this._bodyBlob)return e=this._bodyBlob,t=this._options,r=new FileReader,n=t.headers.map["content-type"]?t.headers.map["content-type"].toString():"",o=/charset\=[0-9a-zA-Z\-\_]*;?/,i=e.type.match(o)||n.match(o),a=[e],i&&a.push(i[0].replace(/^charset\=/,"").replace(/;$/,"")),r.readAsText.apply(r,a),l(r);if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)}):this.text=function(){var e=u(this);return e||Promise.resolve(this._bodyText)},r.formData&&(this.formData=function(){return this.text().then(p)}),this.json=function(){return this.text().then(JSON.parse)},this}function h(e,t){var r,o,i=(t=t||{}).body;if(h.prototype.isPrototypeOf(e)){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new s(e.headers)),this.method=e.method,this.mode=e.mode,i||(i=e._bodyInit,e.bodyUsed=!0)}else this.url=e;if(this.credentials=t.credentials||this.credentials||"omit",!t.headers&&this.headers||(this.headers=new s(t.headers)),this.method=(r=t.method||this.method||"GET",o=r.toUpperCase(),n.indexOf(o)>-1?o:r),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(i,t)}function p(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var r=e.split("="),n=r.shift().replace(/\+/g," "),o=r.join("=").replace(/\+/g," ");t.append(decodeURIComponent(n),decodeURIComponent(o))}}),t}function d(e,t){t||(t={}),this._initBody(e,t),this.type="default",this.status=t.status,this.ok=this.status>=200&&this.status<300,this.statusText=t.statusText,this.headers=t.headers instanceof s?t.headers:new s(t.headers),this.url=t.url||""}}("undefined"!=typeof self?self:this)},54238:function(e,t){var r,n,o;n=[t,e],void 0===(o="function"==typeof(r=function(e,t){"use strict";var r={timeout:5e3,jsonpCallback:"callback",jsonpCallbackFunction:null};function n(e){try{delete window[e]}catch(t){window[e]=void 0}}function o(e){var t=document.getElementById(e);t&&document.getElementsByTagName("head")[0].removeChild(t)}t.exports=function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],i=e,a=t.timeout||r.timeout,s=t.jsonpCallback||r.jsonpCallback,u=void 0;return new Promise(function(r,l){var c=t.jsonpCallbackFunction||"jsonp_"+Date.now()+"_"+Math.ceil(1e5*Math.random()),f=s+"_"+c;window[c]=function(e){r({ok:!0,json:function(){return Promise.resolve(e)}}),u&&clearTimeout(u),o(f),n(c)},i+=-1===i.indexOf("?")?"?":"&";var h=document.createElement("script");h.setAttribute("src",""+i+s+"="+c),t.charset&&h.setAttribute("charset",t.charset),h.id=f,document.getElementsByTagName("head")[0].appendChild(h),u=setTimeout(function(){l(new Error("JSONP request to "+e+" timed out")),n(c),o(f),window[c]=function(){n(c)}},a),h.onerror=function(){l(new Error("JSONP request to "+e+" failed")),n(c),o(f),u&&clearTimeout(u)}})}})?r.apply(t,n):r)||(e.exports=o)},64634:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Builder=void 0;var n=r(51603),o=r(1083),i=function(){function e(e){var t;this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null,t=e||1024,this.bb=n.ByteBuffer.allocate(t),this.space=t}return e.prototype.clear=function(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null},e.prototype.forceDefaults=function(e){this.force_defaults=e},e.prototype.dataBuffer=function(){return this.bb},e.prototype.asUint8Array=function(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())},e.prototype.prep=function(t,r){t>this.minalign&&(this.minalign=t);for(var n=1+~(this.bb.capacity()-this.space+r)&t-1;this.space<n+t+r;){var o=this.bb.capacity();this.bb=e.growByteBuffer(this.bb),this.space+=this.bb.capacity()-o}this.pad(n)},e.prototype.pad=function(e){for(var t=0;t<e;t++)this.bb.writeInt8(--this.space,0)},e.prototype.writeInt8=function(e){this.bb.writeInt8(this.space-=1,e)},e.prototype.writeInt16=function(e){this.bb.writeInt16(this.space-=2,e)},e.prototype.writeInt32=function(e){this.bb.writeInt32(this.space-=4,e)},e.prototype.writeInt64=function(e){this.bb.writeInt64(this.space-=8,e)},e.prototype.writeFloat32=function(e){this.bb.writeFloat32(this.space-=4,e)},e.prototype.writeFloat64=function(e){this.bb.writeFloat64(this.space-=8,e)},e.prototype.addInt8=function(e){this.prep(1,0),this.writeInt8(e)},e.prototype.addInt16=function(e){this.prep(2,0),this.writeInt16(e)},e.prototype.addInt32=function(e){this.prep(4,0),this.writeInt32(e)},e.prototype.addInt64=function(e){this.prep(8,0),this.writeInt64(e)},e.prototype.addFloat32=function(e){this.prep(4,0),this.writeFloat32(e)},e.prototype.addFloat64=function(e){this.prep(8,0),this.writeFloat64(e)},e.prototype.addFieldInt8=function(e,t,r){(this.force_defaults||t!=r)&&(this.addInt8(t),this.slot(e))},e.prototype.addFieldInt16=function(e,t,r){(this.force_defaults||t!=r)&&(this.addInt16(t),this.slot(e))},e.prototype.addFieldInt32=function(e,t,r){(this.force_defaults||t!=r)&&(this.addInt32(t),this.slot(e))},e.prototype.addFieldInt64=function(e,t,r){(this.force_defaults||t!==r)&&(this.addInt64(t),this.slot(e))},e.prototype.addFieldFloat32=function(e,t,r){(this.force_defaults||t!=r)&&(this.addFloat32(t),this.slot(e))},e.prototype.addFieldFloat64=function(e,t,r){(this.force_defaults||t!=r)&&(this.addFloat64(t),this.slot(e))},e.prototype.addFieldOffset=function(e,t,r){(this.force_defaults||t!=r)&&(this.addOffset(t),this.slot(e))},e.prototype.addFieldStruct=function(e,t,r){t!=r&&(this.nested(t),this.slot(e))},e.prototype.nested=function(e){if(e!=this.offset())throw new Error("FlatBuffers: struct must be serialized inline.")},e.prototype.notNested=function(){if(this.isNested)throw new Error("FlatBuffers: object serialization must not be nested.")},e.prototype.slot=function(e){null!==this.vtable&&(this.vtable[e]=this.offset())},e.prototype.offset=function(){return this.bb.capacity()-this.space},e.growByteBuffer=function(e){var t=e.capacity();if(3221225472&t)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");var r=t<<1,o=n.ByteBuffer.allocate(r);return o.setPosition(r-t),o.bytes().set(e.bytes(),r-t),o},e.prototype.addOffset=function(e){this.prep(o.SIZEOF_INT,0),this.writeInt32(this.offset()-e+o.SIZEOF_INT)},e.prototype.startObject=function(e){this.notNested(),null==this.vtable&&(this.vtable=[]),this.vtable_in_use=e;for(var t=0;t<e;t++)this.vtable[t]=0;this.isNested=!0,this.object_start=this.offset()},e.prototype.endObject=function(){if(null==this.vtable||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);for(var e=this.offset(),t=this.vtable_in_use-1;t>=0&&0==this.vtable[t];t--);for(var r=t+1;t>=0;t--)this.addInt16(0!=this.vtable[t]?e-this.vtable[t]:0);this.addInt16(e-this.object_start);var n=(r+2)*o.SIZEOF_SHORT;this.addInt16(n);var i=0,a=this.space;e:for(t=0;t<this.vtables.length;t++){var s=this.bb.capacity()-this.vtables[t];if(n==this.bb.readInt16(s)){for(var u=o.SIZEOF_SHORT;u<n;u+=o.SIZEOF_SHORT)if(this.bb.readInt16(a+u)!=this.bb.readInt16(s+u))continue e;i=this.vtables[t];break}}return i?(this.space=this.bb.capacity()-e,this.bb.writeInt32(this.space,i-e)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-e,this.offset()-e)),this.isNested=!1,e},e.prototype.finish=function(e,t,r){var n=r?o.SIZE_PREFIX_LENGTH:0;if(t){var i=t;if(this.prep(this.minalign,o.SIZEOF_INT+o.FILE_IDENTIFIER_LENGTH+n),i.length!=o.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: file identifier must be length "+o.FILE_IDENTIFIER_LENGTH);for(var a=o.FILE_IDENTIFIER_LENGTH-1;a>=0;a--)this.writeInt8(i.charCodeAt(a))}this.prep(this.minalign,o.SIZEOF_INT+n),this.addOffset(e),n&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)},e.prototype.finishSizePrefixed=function(e,t){this.finish(e,t,!0)},e.prototype.requiredField=function(e,t){var r=this.bb.capacity()-e,n=r-this.bb.readInt32(r);if(!(0!=this.bb.readInt16(n+t)))throw new Error("FlatBuffers: field "+t+" must be set")},e.prototype.startVector=function(e,t,r){this.notNested(),this.vector_num_elems=t,this.prep(o.SIZEOF_INT,e*t),this.prep(r,e*t)},e.prototype.endVector=function(){return this.writeInt32(this.vector_num_elems),this.offset()},e.prototype.createSharedString=function(e){if(!e)return 0;if(this.string_maps||(this.string_maps=new Map),this.string_maps.has(e))return this.string_maps.get(e);var t=this.createString(e);return this.string_maps.set(e,t),t},e.prototype.createString=function(e){if(null===e||void 0===e)return 0;var t;if(e instanceof Uint8Array)t=e;else{t=[];for(var r=0;r<e.length;){var n=void 0,o=e.charCodeAt(r++);if(o<55296||o>=56320)n=o;else n=(o<<10)+e.charCodeAt(r++)+-56613888;n<128?t.push(n):(n<2048?t.push(n>>6&31|192):(n<65536?t.push(n>>12&15|224):t.push(n>>18&7|240,n>>12&63|128),t.push(n>>6&63|128)),t.push(63&n|128))}}this.addInt8(0),this.startVector(1,t.length,1),this.bb.setPosition(this.space-=t.length);r=0;for(var i=this.space,a=this.bb.bytes();r<t.length;r++)a[i++]=t[r];return this.endVector()},e.prototype.createObjectOffset=function(e){return null===e?0:"string"==typeof e?this.createString(e):e.pack(this)},e.prototype.createObjectOffsetList=function(e){for(var t=[],r=0;r<e.length;++r){var n=e[r];if(null===n)throw new Error("FlatBuffers: Argument for createObjectOffsetList cannot contain null.");t.push(this.createObjectOffset(n))}return t},e.prototype.createStructOffsetList=function(e,t){return t(this,e.length),this.createObjectOffsetList(e),this.endVector()},e}();t.Builder=i},51603:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ByteBuffer=void 0;var n=r(1083),o=r(28700),i=r(31958),a=function(){function e(e){this.bytes_=e,this.position_=0}return e.allocate=function(t){return new e(new Uint8Array(t))},e.prototype.clear=function(){this.position_=0},e.prototype.bytes=function(){return this.bytes_},e.prototype.position=function(){return this.position_},e.prototype.setPosition=function(e){this.position_=e},e.prototype.capacity=function(){return this.bytes_.length},e.prototype.readInt8=function(e){return this.readUint8(e)<<24>>24},e.prototype.readUint8=function(e){return this.bytes_[e]},e.prototype.readInt16=function(e){return this.readUint16(e)<<16>>16},e.prototype.readUint16=function(e){return this.bytes_[e]|this.bytes_[e+1]<<8},e.prototype.readInt32=function(e){return this.bytes_[e]|this.bytes_[e+1]<<8|this.bytes_[e+2]<<16|this.bytes_[e+3]<<24},e.prototype.readUint32=function(e){return this.readInt32(e)>>>0},e.prototype.readInt64=function(e){return BigInt.asIntN(64,BigInt(this.readUint32(e))+(BigInt(this.readUint32(e+4))<<BigInt(32)))},e.prototype.readUint64=function(e){return BigInt.asUintN(64,BigInt(this.readUint32(e))+(BigInt(this.readUint32(e+4))<<BigInt(32)))},e.prototype.readFloat32=function(e){return o.int32[0]=this.readInt32(e),o.float32[0]},e.prototype.readFloat64=function(e){return o.int32[o.isLittleEndian?0:1]=this.readInt32(e),o.int32[o.isLittleEndian?1:0]=this.readInt32(e+4),o.float64[0]},e.prototype.writeInt8=function(e,t){this.bytes_[e]=t},e.prototype.writeUint8=function(e,t){this.bytes_[e]=t},e.prototype.writeInt16=function(e,t){this.bytes_[e]=t,this.bytes_[e+1]=t>>8},e.prototype.writeUint16=function(e,t){this.bytes_[e]=t,this.bytes_[e+1]=t>>8},e.prototype.writeInt32=function(e,t){this.bytes_[e]=t,this.bytes_[e+1]=t>>8,this.bytes_[e+2]=t>>16,this.bytes_[e+3]=t>>24},e.prototype.writeUint32=function(e,t){this.bytes_[e]=t,this.bytes_[e+1]=t>>8,this.bytes_[e+2]=t>>16,this.bytes_[e+3]=t>>24},e.prototype.writeInt64=function(e,t){this.writeInt32(e,Number(BigInt.asIntN(32,t))),this.writeInt32(e+4,Number(BigInt.asIntN(32,t>>BigInt(32))))},e.prototype.writeUint64=function(e,t){this.writeUint32(e,Number(BigInt.asUintN(32,t))),this.writeUint32(e+4,Number(BigInt.asUintN(32,t>>BigInt(32))))},e.prototype.writeFloat32=function(e,t){o.float32[0]=t,this.writeInt32(e,o.int32[0])},e.prototype.writeFloat64=function(e,t){o.float64[0]=t,this.writeInt32(e,o.int32[o.isLittleEndian?0:1]),this.writeInt32(e+4,o.int32[o.isLittleEndian?1:0])},e.prototype.getBufferIdentifier=function(){if(this.bytes_.length<this.position_+n.SIZEOF_INT+n.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");for(var e="",t=0;t<n.FILE_IDENTIFIER_LENGTH;t++)e+=String.fromCharCode(this.readInt8(this.position_+n.SIZEOF_INT+t));return e},e.prototype.__offset=function(e,t){var r=e-this.readInt32(e);return t<this.readInt16(r)?this.readInt16(r+t):0},e.prototype.__union=function(e,t){return e.bb_pos=t+this.readInt32(t),e.bb=this,e},e.prototype.__string=function(e,t){e+=this.readInt32(e);var r=this.readInt32(e),o="",a=0;if(e+=n.SIZEOF_INT,t===i.Encoding.UTF8_BYTES)return this.bytes_.subarray(e,e+r);for(;a<r;){var s=void 0,u=this.readUint8(e+a++);if(u<192)s=u;else{var l=this.readUint8(e+a++);if(u<224)s=(31&u)<<6|63&l;else{var c=this.readUint8(e+a++);if(u<240)s=(15&u)<<12|(63&l)<<6|63&c;else s=(7&u)<<18|(63&l)<<12|(63&c)<<6|63&this.readUint8(e+a++)}}s<65536?o+=String.fromCharCode(s):(s-=65536,o+=String.fromCharCode(55296+(s>>10),56320+(1023&s)))}return o},e.prototype.__union_with_string=function(e,t){return"string"==typeof e?this.__string(t):this.__union(e,t)},e.prototype.__indirect=function(e){return e+this.readInt32(e)},e.prototype.__vector=function(e){return e+this.readInt32(e)+n.SIZEOF_INT},e.prototype.__vector_len=function(e){return this.readInt32(e+this.readInt32(e))},e.prototype.__has_identifier=function(e){if(e.length!=n.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: file identifier must be length "+n.FILE_IDENTIFIER_LENGTH);for(var t=0;t<n.FILE_IDENTIFIER_LENGTH;t++)if(e.charCodeAt(t)!=this.readInt8(this.position()+n.SIZEOF_INT+t))return!1;return!0},e.prototype.createScalarList=function(e,t){for(var r=[],n=0;n<t;++n)null!==e(n)&&r.push(e(n));return r},e.prototype.createObjList=function(e,t){for(var r=[],n=0;n<t;++n){var o=e(n);null!==o&&r.push(o.unpack())}return r},e}();t.ByteBuffer=a},1083:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SIZE_PREFIX_LENGTH=t.FILE_IDENTIFIER_LENGTH=t.SIZEOF_INT=t.SIZEOF_SHORT=void 0,t.SIZEOF_SHORT=2,t.SIZEOF_INT=4,t.FILE_IDENTIFIER_LENGTH=4,t.SIZE_PREFIX_LENGTH=4},31958:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Encoding=void 0,function(e){e[e.UTF8_BYTES=1]="UTF8_BYTES",e[e.UTF16_STRING=2]="UTF16_STRING"}(t.Encoding||(t.Encoding={}))},61095:function(e,t,r){"use strict";t.cZ=t.XU=void 0;var n=r(1083);var o=r(1083);var i=r(1083);var a=r(1083);Object.defineProperty(t,"XU",{enumerable:!0,get:function(){return a.SIZE_PREFIX_LENGTH}});var s=r(28700);var u=r(31958);var l=r(64634);var c=r(51603);Object.defineProperty(t,"cZ",{enumerable:!0,get:function(){return c.ByteBuffer}})},28700:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isLittleEndian=t.float64=t.float32=t.int32=void 0,t.int32=new Int32Array(2),t.float32=new Float32Array(t.int32.buffer),t.float64=new Float64Array(t.int32.buffer),t.isLittleEndian=1===new Uint16Array(new Uint8Array([1,0]).buffer)[0]},52105:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setMatrixArrayType=function(e){t.ARRAY_TYPE=n=e},t.toRadian=function(e){return e*i},t.equals=function(e,t){return Math.abs(e-t)<=r*Math.max(1,Math.abs(e),Math.abs(t))},t.RANDOM=t.ARRAY_TYPE=t.EPSILON=void 0;var r=1e-6;t.EPSILON=r;var n="undefined"!=typeof Float32Array?Float32Array:Array;t.ARRAY_TYPE=n;var o=Math.random;t.RANDOM=o;var i=Math.PI/180;Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)})},27018:function(e,t,r){"use strict";function n(e){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.vec4=t.vec3=t.vec2=t.quat2=t.quat=t.mat4=t.mat3=t.mat2d=t.mat2=t.glMatrix=void 0;var o=y(r(52105));t.glMatrix=o;var i=y(r(75352));t.mat2=i;var a=y(r(21967));t.mat2d=a;var s=y(r(96081));t.mat3=s;var u=y(r(92956));t.mat4=u;var l=y(r(2774));t.quat=l;var c=y(r(73195));t.quat2=c;var f=y(r(49679));t.vec2=f;var h=y(r(7157));t.vec3=h;var p=y(r(21020));function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(d=function(e){return e?r:t})(e)}function y(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var r=d(t);if(r&&r.has(e))return r.get(e);var o={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=i?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(o,a,s):o[a]=e[a]}return o.default=e,r&&r.set(e,o),o}t.vec4=p},75352:function(e,t,r){"use strict";function n(e){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.create=function(){var e=new o.ARRAY_TYPE(4);o.ARRAY_TYPE!=Float32Array&&(e[1]=0,e[2]=0);return e[0]=1,e[3]=1,e},t.clone=function(e){var t=new o.ARRAY_TYPE(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},t.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},t.identity=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e},t.fromValues=function(e,t,r,n){var i=new o.ARRAY_TYPE(4);return i[0]=e,i[1]=t,i[2]=r,i[3]=n,i},t.set=function(e,t,r,n,o){return e[0]=t,e[1]=r,e[2]=n,e[3]=o,e},t.transpose=function(e,t){if(e===t){var r=t[1];e[1]=t[2],e[2]=r}else e[0]=t[0],e[1]=t[2],e[2]=t[1],e[3]=t[3];return e},t.invert=function(e,t){var r=t[0],n=t[1],o=t[2],i=t[3],a=r*i-o*n;if(!a)return null;return a=1/a,e[0]=i*a,e[1]=-n*a,e[2]=-o*a,e[3]=r*a,e},t.adjoint=function(e,t){var r=t[0];return e[0]=t[3],e[1]=-t[1],e[2]=-t[2],e[3]=r,e},t.determinant=function(e){return e[0]*e[3]-e[2]*e[1]},t.multiply=a,t.rotate=function(e,t,r){var n=t[0],o=t[1],i=t[2],a=t[3],s=Math.sin(r),u=Math.cos(r);return e[0]=n*u+i*s,e[1]=o*u+a*s,e[2]=n*-s+i*u,e[3]=o*-s+a*u,e},t.scale=function(e,t,r){var n=t[0],o=t[1],i=t[2],a=t[3],s=r[0],u=r[1];return e[0]=n*s,e[1]=o*s,e[2]=i*u,e[3]=a*u,e},t.fromRotation=function(e,t){var r=Math.sin(t),n=Math.cos(t);return e[0]=n,e[1]=r,e[2]=-r,e[3]=n,e},t.fromScaling=function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e},t.str=function(e){return"mat2("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},t.frob=function(e){return Math.hypot(e[0],e[1],e[2],e[3])},t.LDU=function(e,t,r,n){return e[2]=n[2]/n[0],r[0]=n[0],r[1]=n[1],r[3]=n[3]-e[2]*r[1],[e,t,r]},t.add=function(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e},t.subtract=s,t.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]},t.equals=function(e,t){var r=e[0],n=e[1],i=e[2],a=e[3],s=t[0],u=t[1],l=t[2],c=t[3];return Math.abs(r-s)<=o.EPSILON*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(n-u)<=o.EPSILON*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(i-l)<=o.EPSILON*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(a-c)<=o.EPSILON*Math.max(1,Math.abs(a),Math.abs(c))},t.multiplyScalar=function(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e},t.multiplyScalarAndAdd=function(e,t,r,n){return e[0]=t[0]+r[0]*n,e[1]=t[1]+r[1]*n,e[2]=t[2]+r[2]*n,e[3]=t[3]+r[3]*n,e},t.sub=t.mul=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var r=i(t);if(r&&r.has(e))return r.get(e);var o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var u=a?Object.getOwnPropertyDescriptor(e,s):null;u&&(u.get||u.set)?Object.defineProperty(o,s,u):o[s]=e[s]}o.default=e,r&&r.set(e,o);return o}(r(52105));function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(i=function(e){return e?r:t})(e)}function a(e,t,r){var n=t[0],o=t[1],i=t[2],a=t[3],s=r[0],u=r[1],l=r[2],c=r[3];return e[0]=n*s+i*u,e[1]=o*s+a*u,e[2]=n*l+i*c,e[3]=o*l+a*c,e}function s(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e}var u=a;t.mul=u;var l=s;t.sub=l},21967:function(e,t,r){"use strict";function n(e){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.create=function(){var e=new o.ARRAY_TYPE(6);o.ARRAY_TYPE!=Float32Array&&(e[1]=0,e[2]=0,e[4]=0,e[5]=0);return e[0]=1,e[3]=1,e},t.clone=function(e){var t=new o.ARRAY_TYPE(6);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t},t.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e},t.identity=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e},t.fromValues=function(e,t,r,n,i,a){var s=new o.ARRAY_TYPE(6);return s[0]=e,s[1]=t,s[2]=r,s[3]=n,s[4]=i,s[5]=a,s},t.set=function(e,t,r,n,o,i,a){return e[0]=t,e[1]=r,e[2]=n,e[3]=o,e[4]=i,e[5]=a,e},t.invert=function(e,t){var r=t[0],n=t[1],o=t[2],i=t[3],a=t[4],s=t[5],u=r*i-n*o;if(!u)return null;return u=1/u,e[0]=i*u,e[1]=-n*u,e[2]=-o*u,e[3]=r*u,e[4]=(o*s-i*a)*u,e[5]=(n*a-r*s)*u,e},t.determinant=function(e){return e[0]*e[3]-e[1]*e[2]},t.multiply=a,t.rotate=function(e,t,r){var n=t[0],o=t[1],i=t[2],a=t[3],s=t[4],u=t[5],l=Math.sin(r),c=Math.cos(r);return e[0]=n*c+i*l,e[1]=o*c+a*l,e[2]=n*-l+i*c,e[3]=o*-l+a*c,e[4]=s,e[5]=u,e},t.scale=function(e,t,r){var n=t[0],o=t[1],i=t[2],a=t[3],s=t[4],u=t[5],l=r[0],c=r[1];return e[0]=n*l,e[1]=o*l,e[2]=i*c,e[3]=a*c,e[4]=s,e[5]=u,e},t.translate=function(e,t,r){var n=t[0],o=t[1],i=t[2],a=t[3],s=t[4],u=t[5],l=r[0],c=r[1];return e[0]=n,e[1]=o,e[2]=i,e[3]=a,e[4]=n*l+i*c+s,e[5]=o*l+a*c+u,e},t.fromRotation=function(e,t){var r=Math.sin(t),n=Math.cos(t);return e[0]=n,e[1]=r,e[2]=-r,e[3]=n,e[4]=0,e[5]=0,e},t.fromScaling=function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e[4]=0,e[5]=0,e},t.fromTranslation=function(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=t[0],e[5]=t[1],e},t.str=function(e){return"mat2d("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+")"},t.frob=function(e){return Math.hypot(e[0],e[1],e[2],e[3],e[4],e[5],1)},t.add=function(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e[4]=t[4]+r[4],e[5]=t[5]+r[5],e},t.subtract=s,t.multiplyScalar=function(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*r,e[5]=t[5]*r,e},t.multiplyScalarAndAdd=function(e,t,r,n){return e[0]=t[0]+r[0]*n,e[1]=t[1]+r[1]*n,e[2]=t[2]+r[2]*n,e[3]=t[3]+r[3]*n,e[4]=t[4]+r[4]*n,e[5]=t[5]+r[5]*n,e},t.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]},t.equals=function(e,t){var r=e[0],n=e[1],i=e[2],a=e[3],s=e[4],u=e[5],l=t[0],c=t[1],f=t[2],h=t[3],p=t[4],d=t[5];return Math.abs(r-l)<=o.EPSILON*Math.max(1,Math.abs(r),Math.abs(l))&&Math.abs(n-c)<=o.EPSILON*Math.max(1,Math.abs(n),Math.abs(c))&&Math.abs(i-f)<=o.EPSILON*Math.max(1,Math.abs(i),Math.abs(f))&&Math.abs(a-h)<=o.EPSILON*Math.max(1,Math.abs(a),Math.abs(h))&&Math.abs(s-p)<=o.EPSILON*Math.max(1,Math.abs(s),Math.abs(p))&&Math.abs(u-d)<=o.EPSILON*Math.max(1,Math.abs(u),Math.abs(d))},t.sub=t.mul=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var r=i(t);if(r&&r.has(e))return r.get(e);var o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var u=a?Object.getOwnPropertyDescriptor(e,s):null;u&&(u.get||u.set)?Object.defineProperty(o,s,u):o[s]=e[s]}o.default=e,r&&r.set(e,o);return o}(r(52105));function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(i=function(e){return e?r:t})(e)}function a(e,t,r){var n=t[0],o=t[1],i=t[2],a=t[3],s=t[4],u=t[5],l=r[0],c=r[1],f=r[2],h=r[3],p=r[4],d=r[5];return e[0]=n*l+i*c,e[1]=o*l+a*c,e[2]=n*f+i*h,e[3]=o*f+a*h,e[4]=n*p+i*d+s,e[5]=o*p+a*d+u,e}function s(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e[4]=t[4]-r[4],e[5]=t[5]-r[5],e}var u=a;t.mul=u;var l=s;t.sub=l},96081:function(e,t,r){"use strict";function n(e){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.create=function(){var e=new o.ARRAY_TYPE(9);o.ARRAY_TYPE!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0);return e[0]=1,e[4]=1,e[8]=1,e},t.fromMat4=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e},t.clone=function(e){var t=new o.ARRAY_TYPE(9);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},t.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},t.fromValues=function(e,t,r,n,i,a,s,u,l){var c=new o.ARRAY_TYPE(9);return c[0]=e,c[1]=t,c[2]=r,c[3]=n,c[4]=i,c[5]=a,c[6]=s,c[7]=u,c[8]=l,c},t.set=function(e,t,r,n,o,i,a,s,u,l){return e[0]=t,e[1]=r,e[2]=n,e[3]=o,e[4]=i,e[5]=a,e[6]=s,e[7]=u,e[8]=l,e},t.identity=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},t.transpose=function(e,t){if(e===t){var r=t[1],n=t[2],o=t[5];e[1]=t[3],e[2]=t[6],e[3]=r,e[5]=t[7],e[6]=n,e[7]=o}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e},t.invert=function(e,t){var r=t[0],n=t[1],o=t[2],i=t[3],a=t[4],s=t[5],u=t[6],l=t[7],c=t[8],f=c*a-s*l,h=-c*i+s*u,p=l*i-a*u,d=r*f+n*h+o*p;if(!d)return null;return d=1/d,e[0]=f*d,e[1]=(-c*n+o*l)*d,e[2]=(s*n-o*a)*d,e[3]=h*d,e[4]=(c*r-o*u)*d,e[5]=(-s*r+o*i)*d,e[6]=p*d,e[7]=(-l*r+n*u)*d,e[8]=(a*r-n*i)*d,e},t.adjoint=function(e,t){var r=t[0],n=t[1],o=t[2],i=t[3],a=t[4],s=t[5],u=t[6],l=t[7],c=t[8];return e[0]=a*c-s*l,e[1]=o*l-n*c,e[2]=n*s-o*a,e[3]=s*u-i*c,e[4]=r*c-o*u,e[5]=o*i-r*s,e[6]=i*l-a*u,e[7]=n*u-r*l,e[8]=r*a-n*i,e},t.determinant=function(e){var t=e[0],r=e[1],n=e[2],o=e[3],i=e[4],a=e[5],s=e[6],u=e[7],l=e[8];return t*(l*i-a*u)+r*(-l*o+a*s)+n*(u*o-i*s)},t.multiply=a,t.translate=function(e,t,r){var n=t[0],o=t[1],i=t[2],a=t[3],s=t[4],u=t[5],l=t[6],c=t[7],f=t[8],h=r[0],p=r[1];return e[0]=n,e[1]=o,e[2]=i,e[3]=a,e[4]=s,e[5]=u,e[6]=h*n+p*a+l,e[7]=h*o+p*s+c,e[8]=h*i+p*u+f,e},t.rotate=function(e,t,r){var n=t[0],o=t[1],i=t[2],a=t[3],s=t[4],u=t[5],l=t[6],c=t[7],f=t[8],h=Math.sin(r),p=Math.cos(r);return e[0]=p*n+h*a,e[1]=p*o+h*s,e[2]=p*i+h*u,e[3]=p*a-h*n,e[4]=p*s-h*o,e[5]=p*u-h*i,e[6]=l,e[7]=c,e[8]=f,e},t.scale=function(e,t,r){var n=r[0],o=r[1];return e[0]=n*t[0],e[1]=n*t[1],e[2]=n*t[2],e[3]=o*t[3],e[4]=o*t[4],e[5]=o*t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},t.fromTranslation=function(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=t[0],e[7]=t[1],e[8]=1,e},t.fromRotation=function(e,t){var r=Math.sin(t),n=Math.cos(t);return e[0]=n,e[1]=r,e[2]=0,e[3]=-r,e[4]=n,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},t.fromScaling=function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=t[1],e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},t.fromMat2d=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=0,e[3]=t[2],e[4]=t[3],e[5]=0,e[6]=t[4],e[7]=t[5],e[8]=1,e},t.fromQuat=function(e,t){var r=t[0],n=t[1],o=t[2],i=t[3],a=r+r,s=n+n,u=o+o,l=r*a,c=n*a,f=n*s,h=o*a,p=o*s,d=o*u,y=i*a,v=i*s,g=i*u;return e[0]=1-f-d,e[3]=c-g,e[6]=h+v,e[1]=c+g,e[4]=1-l-d,e[7]=p-y,e[2]=h-v,e[5]=p+y,e[8]=1-l-f,e},t.normalFromMat4=function(e,t){var r=t[0],n=t[1],o=t[2],i=t[3],a=t[4],s=t[5],u=t[6],l=t[7],c=t[8],f=t[9],h=t[10],p=t[11],d=t[12],y=t[13],v=t[14],g=t[15],m=r*s-n*a,b=r*u-o*a,w=r*l-i*a,_=n*u-o*s,x=n*l-i*s,S=o*l-i*u,O=c*y-f*d,P=c*v-h*d,E=c*g-p*d,k=f*v-h*y,M=f*g-p*y,C=h*g-p*v,j=m*C-b*M+w*k+_*E-x*P+S*O;if(!j)return null;return j=1/j,e[0]=(s*C-u*M+l*k)*j,e[1]=(u*E-a*C-l*P)*j,e[2]=(a*M-s*E+l*O)*j,e[3]=(o*M-n*C-i*k)*j,e[4]=(r*C-o*E+i*P)*j,e[5]=(n*E-r*M-i*O)*j,e[6]=(y*S-v*x+g*_)*j,e[7]=(v*w-d*S-g*b)*j,e[8]=(d*x-y*w+g*m)*j,e},t.projection=function(e,t,r){return e[0]=2/t,e[1]=0,e[2]=0,e[3]=0,e[4]=-2/r,e[5]=0,e[6]=-1,e[7]=1,e[8]=1,e},t.str=function(e){return"mat3("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+")"},t.frob=function(e){return Math.hypot(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8])},t.add=function(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e[4]=t[4]+r[4],e[5]=t[5]+r[5],e[6]=t[6]+r[6],e[7]=t[7]+r[7],e[8]=t[8]+r[8],e},t.subtract=s,t.multiplyScalar=function(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*r,e[5]=t[5]*r,e[6]=t[6]*r,e[7]=t[7]*r,e[8]=t[8]*r,e},t.multiplyScalarAndAdd=function(e,t,r,n){return e[0]=t[0]+r[0]*n,e[1]=t[1]+r[1]*n,e[2]=t[2]+r[2]*n,e[3]=t[3]+r[3]*n,e[4]=t[4]+r[4]*n,e[5]=t[5]+r[5]*n,e[6]=t[6]+r[6]*n,e[7]=t[7]+r[7]*n,e[8]=t[8]+r[8]*n,e},t.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]},t.equals=function(e,t){var r=e[0],n=e[1],i=e[2],a=e[3],s=e[4],u=e[5],l=e[6],c=e[7],f=e[8],h=t[0],p=t[1],d=t[2],y=t[3],v=t[4],g=t[5],m=t[6],b=t[7],w=t[8];return Math.abs(r-h)<=o.EPSILON*Math.max(1,Math.abs(r),Math.abs(h))&&Math.abs(n-p)<=o.EPSILON*Math.max(1,Math.abs(n),Math.abs(p))&&Math.abs(i-d)<=o.EPSILON*Math.max(1,Math.abs(i),Math.abs(d))&&Math.abs(a-y)<=o.EPSILON*Math.max(1,Math.abs(a),Math.abs(y))&&Math.abs(s-v)<=o.EPSILON*Math.max(1,Math.abs(s),Math.abs(v))&&Math.abs(u-g)<=o.EPSILON*Math.max(1,Math.abs(u),Math.abs(g))&&Math.abs(l-m)<=o.EPSILON*Math.max(1,Math.abs(l),Math.abs(m))&&Math.abs(c-b)<=o.EPSILON*Math.max(1,Math.abs(c),Math.abs(b))&&Math.abs(f-w)<=o.EPSILON*Math.max(1,Math.abs(f),Math.abs(w))},t.sub=t.mul=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var r=i(t);if(r&&r.has(e))return r.get(e);var o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var u=a?Object.getOwnPropertyDescriptor(e,s):null;u&&(u.get||u.set)?Object.defineProperty(o,s,u):o[s]=e[s]}o.default=e,r&&r.set(e,o);return o}(r(52105));function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(i=function(e){return e?r:t})(e)}function a(e,t,r){var n=t[0],o=t[1],i=t[2],a=t[3],s=t[4],u=t[5],l=t[6],c=t[7],f=t[8],h=r[0],p=r[1],d=r[2],y=r[3],v=r[4],g=r[5],m=r[6],b=r[7],w=r[8];return e[0]=h*n+p*a+d*l,e[1]=h*o+p*s+d*c,e[2]=h*i+p*u+d*f,e[3]=y*n+v*a+g*l,e[4]=y*o+v*s+g*c,e[5]=y*i+v*u+g*f,e[6]=m*n+b*a+w*l,e[7]=m*o+b*s+w*c,e[8]=m*i+b*u+w*f,e}function s(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e[4]=t[4]-r[4],e[5]=t[5]-r[5],e[6]=t[6]-r[6],e[7]=t[7]-r[7],e[8]=t[8]-r[8],e}var u=a;t.mul=u;var l=s;t.sub=l},92956:function(e,t,r){"use strict";function n(e){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.create=function(){var e=new o.ARRAY_TYPE(16);o.ARRAY_TYPE!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0);return e[0]=1,e[5]=1,e[10]=1,e[15]=1,e},t.clone=function(e){var t=new o.ARRAY_TYPE(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},t.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},t.fromValues=function(e,t,r,n,i,a,s,u,l,c,f,h,p,d,y,v){var g=new o.ARRAY_TYPE(16);return g[0]=e,g[1]=t,g[2]=r,g[3]=n,g[4]=i,g[5]=a,g[6]=s,g[7]=u,g[8]=l,g[9]=c,g[10]=f,g[11]=h,g[12]=p,g[13]=d,g[14]=y,g[15]=v,g},t.set=function(e,t,r,n,o,i,a,s,u,l,c,f,h,p,d,y,v){return e[0]=t,e[1]=r,e[2]=n,e[3]=o,e[4]=i,e[5]=a,e[6]=s,e[7]=u,e[8]=l,e[9]=c,e[10]=f,e[11]=h,e[12]=p,e[13]=d,e[14]=y,e[15]=v,e},t.identity=a,t.transpose=function(e,t){if(e===t){var r=t[1],n=t[2],o=t[3],i=t[6],a=t[7],s=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=r,e[6]=t[9],e[7]=t[13],e[8]=n,e[9]=i,e[11]=t[14],e[12]=o,e[13]=a,e[14]=s}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e},t.invert=function(e,t){var r=t[0],n=t[1],o=t[2],i=t[3],a=t[4],s=t[5],u=t[6],l=t[7],c=t[8],f=t[9],h=t[10],p=t[11],d=t[12],y=t[13],v=t[14],g=t[15],m=r*s-n*a,b=r*u-o*a,w=r*l-i*a,_=n*u-o*s,x=n*l-i*s,S=o*l-i*u,O=c*y-f*d,P=c*v-h*d,E=c*g-p*d,k=f*v-h*y,M=f*g-p*y,C=h*g-p*v,j=m*C-b*M+w*k+_*E-x*P+S*O;if(!j)return null;return j=1/j,e[0]=(s*C-u*M+l*k)*j,e[1]=(o*M-n*C-i*k)*j,e[2]=(y*S-v*x+g*_)*j,e[3]=(h*x-f*S-p*_)*j,e[4]=(u*E-a*C-l*P)*j,e[5]=(r*C-o*E+i*P)*j,e[6]=(v*w-d*S-g*b)*j,e[7]=(c*S-h*w+p*b)*j,e[8]=(a*M-s*E+l*O)*j,e[9]=(n*E-r*M-i*O)*j,e[10]=(d*x-y*w+g*m)*j,e[11]=(f*w-c*x-p*m)*j,e[12]=(s*P-a*k-u*O)*j,e[13]=(r*k-n*P+o*O)*j,e[14]=(y*b-d*_-v*m)*j,e[15]=(c*_-f*b+h*m)*j,e},t.adjoint=function(e,t){var r=t[0],n=t[1],o=t[2],i=t[3],a=t[4],s=t[5],u=t[6],l=t[7],c=t[8],f=t[9],h=t[10],p=t[11],d=t[12],y=t[13],v=t[14],g=t[15];return e[0]=s*(h*g-p*v)-f*(u*g-l*v)+y*(u*p-l*h),e[1]=-(n*(h*g-p*v)-f*(o*g-i*v)+y*(o*p-i*h)),e[2]=n*(u*g-l*v)-s*(o*g-i*v)+y*(o*l-i*u),e[3]=-(n*(u*p-l*h)-s*(o*p-i*h)+f*(o*l-i*u)),e[4]=-(a*(h*g-p*v)-c*(u*g-l*v)+d*(u*p-l*h)),e[5]=r*(h*g-p*v)-c*(o*g-i*v)+d*(o*p-i*h),e[6]=-(r*(u*g-l*v)-a*(o*g-i*v)+d*(o*l-i*u)),e[7]=r*(u*p-l*h)-a*(o*p-i*h)+c*(o*l-i*u),e[8]=a*(f*g-p*y)-c*(s*g-l*y)+d*(s*p-l*f),e[9]=-(r*(f*g-p*y)-c*(n*g-i*y)+d*(n*p-i*f)),e[10]=r*(s*g-l*y)-a*(n*g-i*y)+d*(n*l-i*s),e[11]=-(r*(s*p-l*f)-a*(n*p-i*f)+c*(n*l-i*s)),e[12]=-(a*(f*v-h*y)-c*(s*v-u*y)+d*(s*h-u*f)),e[13]=r*(f*v-h*y)-c*(n*v-o*y)+d*(n*h-o*f),e[14]=-(r*(s*v-u*y)-a*(n*v-o*y)+d*(n*u-o*s)),e[15]=r*(s*h-u*f)-a*(n*h-o*f)+c*(n*u-o*s),e},t.determinant=function(e){var t=e[0],r=e[1],n=e[2],o=e[3],i=e[4],a=e[5],s=e[6],u=e[7],l=e[8],c=e[9],f=e[10],h=e[11],p=e[12],d=e[13],y=e[14],v=e[15];return(t*a-r*i)*(f*v-h*y)-(t*s-n*i)*(c*v-h*d)+(t*u-o*i)*(c*y-f*d)+(r*s-n*a)*(l*v-h*p)-(r*u-o*a)*(l*y-f*p)+(n*u-o*s)*(l*d-c*p)},t.multiply=s,t.translate=function(e,t,r){var n,o,i,a,s,u,l,c,f,h,p,d,y=r[0],v=r[1],g=r[2];t===e?(e[12]=t[0]*y+t[4]*v+t[8]*g+t[12],e[13]=t[1]*y+t[5]*v+t[9]*g+t[13],e[14]=t[2]*y+t[6]*v+t[10]*g+t[14],e[15]=t[3]*y+t[7]*v+t[11]*g+t[15]):(n=t[0],o=t[1],i=t[2],a=t[3],s=t[4],u=t[5],l=t[6],c=t[7],f=t[8],h=t[9],p=t[10],d=t[11],e[0]=n,e[1]=o,e[2]=i,e[3]=a,e[4]=s,e[5]=u,e[6]=l,e[7]=c,e[8]=f,e[9]=h,e[10]=p,e[11]=d,e[12]=n*y+s*v+f*g+t[12],e[13]=o*y+u*v+h*g+t[13],e[14]=i*y+l*v+p*g+t[14],e[15]=a*y+c*v+d*g+t[15]);return e},t.scale=function(e,t,r){var n=r[0],o=r[1],i=r[2];return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*o,e[5]=t[5]*o,e[6]=t[6]*o,e[7]=t[7]*o,e[8]=t[8]*i,e[9]=t[9]*i,e[10]=t[10]*i,e[11]=t[11]*i,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},t.rotate=function(e,t,r,n){var i,a,s,u,l,c,f,h,p,d,y,v,g,m,b,w,_,x,S,O,P,E,k,M,C=n[0],j=n[1],T=n[2],A=Math.hypot(C,j,T);if(A<o.EPSILON)return null;C*=A=1/A,j*=A,T*=A,i=Math.sin(r),a=Math.cos(r),s=1-a,u=t[0],l=t[1],c=t[2],f=t[3],h=t[4],p=t[5],d=t[6],y=t[7],v=t[8],g=t[9],m=t[10],b=t[11],w=C*C*s+a,_=j*C*s+T*i,x=T*C*s-j*i,S=C*j*s-T*i,O=j*j*s+a,P=T*j*s+C*i,E=C*T*s+j*i,k=j*T*s-C*i,M=T*T*s+a,e[0]=u*w+h*_+v*x,e[1]=l*w+p*_+g*x,e[2]=c*w+d*_+m*x,e[3]=f*w+y*_+b*x,e[4]=u*S+h*O+v*P,e[5]=l*S+p*O+g*P,e[6]=c*S+d*O+m*P,e[7]=f*S+y*O+b*P,e[8]=u*E+h*k+v*M,e[9]=l*E+p*k+g*M,e[10]=c*E+d*k+m*M,e[11]=f*E+y*k+b*M,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]);return e},t.rotateX=function(e,t,r){var n=Math.sin(r),o=Math.cos(r),i=t[4],a=t[5],s=t[6],u=t[7],l=t[8],c=t[9],f=t[10],h=t[11];t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]);return e[4]=i*o+l*n,e[5]=a*o+c*n,e[6]=s*o+f*n,e[7]=u*o+h*n,e[8]=l*o-i*n,e[9]=c*o-a*n,e[10]=f*o-s*n,e[11]=h*o-u*n,e},t.rotateY=function(e,t,r){var n=Math.sin(r),o=Math.cos(r),i=t[0],a=t[1],s=t[2],u=t[3],l=t[8],c=t[9],f=t[10],h=t[11];t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]);return e[0]=i*o-l*n,e[1]=a*o-c*n,e[2]=s*o-f*n,e[3]=u*o-h*n,e[8]=i*n+l*o,e[9]=a*n+c*o,e[10]=s*n+f*o,e[11]=u*n+h*o,e},t.rotateZ=function(e,t,r){var n=Math.sin(r),o=Math.cos(r),i=t[0],a=t[1],s=t[2],u=t[3],l=t[4],c=t[5],f=t[6],h=t[7];t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]);return e[0]=i*o+l*n,e[1]=a*o+c*n,e[2]=s*o+f*n,e[3]=u*o+h*n,e[4]=l*o-i*n,e[5]=c*o-a*n,e[6]=f*o-s*n,e[7]=h*o-u*n,e},t.fromTranslation=function(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e},t.fromScaling=function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},t.fromRotation=function(e,t,r){var n,i,a,s=r[0],u=r[1],l=r[2],c=Math.hypot(s,u,l);if(c<o.EPSILON)return null;return s*=c=1/c,u*=c,l*=c,n=Math.sin(t),i=Math.cos(t),a=1-i,e[0]=s*s*a+i,e[1]=u*s*a+l*n,e[2]=l*s*a-u*n,e[3]=0,e[4]=s*u*a-l*n,e[5]=u*u*a+i,e[6]=l*u*a+s*n,e[7]=0,e[8]=s*l*a+u*n,e[9]=u*l*a-s*n,e[10]=l*l*a+i,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},t.fromXRotation=function(e,t){var r=Math.sin(t),n=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=n,e[6]=r,e[7]=0,e[8]=0,e[9]=-r,e[10]=n,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},t.fromYRotation=function(e,t){var r=Math.sin(t),n=Math.cos(t);return e[0]=n,e[1]=0,e[2]=-r,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=r,e[9]=0,e[10]=n,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},t.fromZRotation=function(e,t){var r=Math.sin(t),n=Math.cos(t);return e[0]=n,e[1]=r,e[2]=0,e[3]=0,e[4]=-r,e[5]=n,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},t.fromRotationTranslation=u,t.fromQuat2=function(e,t){var r=new o.ARRAY_TYPE(3),n=-t[0],i=-t[1],a=-t[2],s=t[3],l=t[4],c=t[5],f=t[6],h=t[7],p=n*n+i*i+a*a+s*s;p>0?(r[0]=2*(l*s+h*n+c*a-f*i)/p,r[1]=2*(c*s+h*i+f*n-l*a)/p,r[2]=2*(f*s+h*a+l*i-c*n)/p):(r[0]=2*(l*s+h*n+c*a-f*i),r[1]=2*(c*s+h*i+f*n-l*a),r[2]=2*(f*s+h*a+l*i-c*n));return u(e,t,r),e},t.getTranslation=function(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e},t.getScaling=l,t.getRotation=function(e,t){var r=new o.ARRAY_TYPE(3);l(r,t);var n=1/r[0],i=1/r[1],a=1/r[2],s=t[0]*n,u=t[1]*i,c=t[2]*a,f=t[4]*n,h=t[5]*i,p=t[6]*a,d=t[8]*n,y=t[9]*i,v=t[10]*a,g=s+h+v,m=0;g>0?(m=2*Math.sqrt(g+1),e[3]=.25*m,e[0]=(p-y)/m,e[1]=(d-c)/m,e[2]=(u-f)/m):s>h&&s>v?(m=2*Math.sqrt(1+s-h-v),e[3]=(p-y)/m,e[0]=.25*m,e[1]=(u+f)/m,e[2]=(d+c)/m):h>v?(m=2*Math.sqrt(1+h-s-v),e[3]=(d-c)/m,e[0]=(u+f)/m,e[1]=.25*m,e[2]=(p+y)/m):(m=2*Math.sqrt(1+v-s-h),e[3]=(u-f)/m,e[0]=(d+c)/m,e[1]=(p+y)/m,e[2]=.25*m);return e},t.fromRotationTranslationScale=function(e,t,r,n){var o=t[0],i=t[1],a=t[2],s=t[3],u=o+o,l=i+i,c=a+a,f=o*u,h=o*l,p=o*c,d=i*l,y=i*c,v=a*c,g=s*u,m=s*l,b=s*c,w=n[0],_=n[1],x=n[2];return e[0]=(1-(d+v))*w,e[1]=(h+b)*w,e[2]=(p-m)*w,e[3]=0,e[4]=(h-b)*_,e[5]=(1-(f+v))*_,e[6]=(y+g)*_,e[7]=0,e[8]=(p+m)*x,e[9]=(y-g)*x,e[10]=(1-(f+d))*x,e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e},t.fromRotationTranslationScaleOrigin=function(e,t,r,n,o){var i=t[0],a=t[1],s=t[2],u=t[3],l=i+i,c=a+a,f=s+s,h=i*l,p=i*c,d=i*f,y=a*c,v=a*f,g=s*f,m=u*l,b=u*c,w=u*f,_=n[0],x=n[1],S=n[2],O=o[0],P=o[1],E=o[2],k=(1-(y+g))*_,M=(p+w)*_,C=(d-b)*_,j=(p-w)*x,T=(1-(h+g))*x,A=(v+m)*x,I=(d+b)*S,R=(v-m)*S,L=(1-(h+y))*S;return e[0]=k,e[1]=M,e[2]=C,e[3]=0,e[4]=j,e[5]=T,e[6]=A,e[7]=0,e[8]=I,e[9]=R,e[10]=L,e[11]=0,e[12]=r[0]+O-(k*O+j*P+I*E),e[13]=r[1]+P-(M*O+T*P+R*E),e[14]=r[2]+E-(C*O+A*P+L*E),e[15]=1,e},t.fromQuat=function(e,t){var r=t[0],n=t[1],o=t[2],i=t[3],a=r+r,s=n+n,u=o+o,l=r*a,c=n*a,f=n*s,h=o*a,p=o*s,d=o*u,y=i*a,v=i*s,g=i*u;return e[0]=1-f-d,e[1]=c+g,e[2]=h-v,e[3]=0,e[4]=c-g,e[5]=1-l-d,e[6]=p+y,e[7]=0,e[8]=h+v,e[9]=p-y,e[10]=1-l-f,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},t.frustum=function(e,t,r,n,o,i,a){var s=1/(r-t),u=1/(o-n),l=1/(i-a);return e[0]=2*i*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*i*u,e[6]=0,e[7]=0,e[8]=(r+t)*s,e[9]=(o+n)*u,e[10]=(a+i)*l,e[11]=-1,e[12]=0,e[13]=0,e[14]=a*i*2*l,e[15]=0,e},t.perspectiveNO=c,t.perspectiveZO=function(e,t,r,n,o){var i,a=1/Math.tan(t/2);e[0]=a/r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=a,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=o&&o!==1/0?(i=1/(n-o),e[10]=o*i,e[14]=o*n*i):(e[10]=-1,e[14]=-n);return e},t.perspectiveFromFieldOfView=function(e,t,r,n){var o=Math.tan(t.upDegrees*Math.PI/180),i=Math.tan(t.downDegrees*Math.PI/180),a=Math.tan(t.leftDegrees*Math.PI/180),s=Math.tan(t.rightDegrees*Math.PI/180),u=2/(a+s),l=2/(o+i);return e[0]=u,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=l,e[6]=0,e[7]=0,e[8]=-(a-s)*u*.5,e[9]=(o-i)*l*.5,e[10]=n/(r-n),e[11]=-1,e[12]=0,e[13]=0,e[14]=n*r/(r-n),e[15]=0,e},t.orthoNO=h,t.orthoZO=function(e,t,r,n,o,i,a){var s=1/(t-r),u=1/(n-o),l=1/(i-a);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*u,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=l,e[11]=0,e[12]=(t+r)*s,e[13]=(o+n)*u,e[14]=i*l,e[15]=1,e},t.lookAt=function(e,t,r,n){var i,s,u,l,c,f,h,p,d,y,v=t[0],g=t[1],m=t[2],b=n[0],w=n[1],_=n[2],x=r[0],S=r[1],O=r[2];if(Math.abs(v-x)<o.EPSILON&&Math.abs(g-S)<o.EPSILON&&Math.abs(m-O)<o.EPSILON)return a(e);h=v-x,p=g-S,d=m-O,y=1/Math.hypot(h,p,d),i=w*(d*=y)-_*(p*=y),s=_*(h*=y)-b*d,u=b*p-w*h,(y=Math.hypot(i,s,u))?(i*=y=1/y,s*=y,u*=y):(i=0,s=0,u=0);l=p*u-d*s,c=d*i-h*u,f=h*s-p*i,(y=Math.hypot(l,c,f))?(l*=y=1/y,c*=y,f*=y):(l=0,c=0,f=0);return e[0]=i,e[1]=l,e[2]=h,e[3]=0,e[4]=s,e[5]=c,e[6]=p,e[7]=0,e[8]=u,e[9]=f,e[10]=d,e[11]=0,e[12]=-(i*v+s*g+u*m),e[13]=-(l*v+c*g+f*m),e[14]=-(h*v+p*g+d*m),e[15]=1,e},t.targetTo=function(e,t,r,n){var o=t[0],i=t[1],a=t[2],s=n[0],u=n[1],l=n[2],c=o-r[0],f=i-r[1],h=a-r[2],p=c*c+f*f+h*h;p>0&&(p=1/Math.sqrt(p),c*=p,f*=p,h*=p);var d=u*h-l*f,y=l*c-s*h,v=s*f-u*c;(p=d*d+y*y+v*v)>0&&(p=1/Math.sqrt(p),d*=p,y*=p,v*=p);return e[0]=d,e[1]=y,e[2]=v,e[3]=0,e[4]=f*v-h*y,e[5]=h*d-c*v,e[6]=c*y-f*d,e[7]=0,e[8]=c,e[9]=f,e[10]=h,e[11]=0,e[12]=o,e[13]=i,e[14]=a,e[15]=1,e},t.str=function(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"},t.frob=function(e){return Math.hypot(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15])},t.add=function(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e[4]=t[4]+r[4],e[5]=t[5]+r[5],e[6]=t[6]+r[6],e[7]=t[7]+r[7],e[8]=t[8]+r[8],e[9]=t[9]+r[9],e[10]=t[10]+r[10],e[11]=t[11]+r[11],e[12]=t[12]+r[12],e[13]=t[13]+r[13],e[14]=t[14]+r[14],e[15]=t[15]+r[15],e},t.subtract=d,t.multiplyScalar=function(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*r,e[5]=t[5]*r,e[6]=t[6]*r,e[7]=t[7]*r,e[8]=t[8]*r,e[9]=t[9]*r,e[10]=t[10]*r,e[11]=t[11]*r,e[12]=t[12]*r,e[13]=t[13]*r,e[14]=t[14]*r,e[15]=t[15]*r,e},t.multiplyScalarAndAdd=function(e,t,r,n){return e[0]=t[0]+r[0]*n,e[1]=t[1]+r[1]*n,e[2]=t[2]+r[2]*n,e[3]=t[3]+r[3]*n,e[4]=t[4]+r[4]*n,e[5]=t[5]+r[5]*n,e[6]=t[6]+r[6]*n,e[7]=t[7]+r[7]*n,e[8]=t[8]+r[8]*n,e[9]=t[9]+r[9]*n,e[10]=t[10]+r[10]*n,e[11]=t[11]+r[11]*n,e[12]=t[12]+r[12]*n,e[13]=t[13]+r[13]*n,e[14]=t[14]+r[14]*n,e[15]=t[15]+r[15]*n,e},t.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]},t.equals=function(e,t){var r=e[0],n=e[1],i=e[2],a=e[3],s=e[4],u=e[5],l=e[6],c=e[7],f=e[8],h=e[9],p=e[10],d=e[11],y=e[12],v=e[13],g=e[14],m=e[15],b=t[0],w=t[1],_=t[2],x=t[3],S=t[4],O=t[5],P=t[6],E=t[7],k=t[8],M=t[9],C=t[10],j=t[11],T=t[12],A=t[13],I=t[14],R=t[15];return Math.abs(r-b)<=o.EPSILON*Math.max(1,Math.abs(r),Math.abs(b))&&Math.abs(n-w)<=o.EPSILON*Math.max(1,Math.abs(n),Math.abs(w))&&Math.abs(i-_)<=o.EPSILON*Math.max(1,Math.abs(i),Math.abs(_))&&Math.abs(a-x)<=o.EPSILON*Math.max(1,Math.abs(a),Math.abs(x))&&Math.abs(s-S)<=o.EPSILON*Math.max(1,Math.abs(s),Math.abs(S))&&Math.abs(u-O)<=o.EPSILON*Math.max(1,Math.abs(u),Math.abs(O))&&Math.abs(l-P)<=o.EPSILON*Math.max(1,Math.abs(l),Math.abs(P))&&Math.abs(c-E)<=o.EPSILON*Math.max(1,Math.abs(c),Math.abs(E))&&Math.abs(f-k)<=o.EPSILON*Math.max(1,Math.abs(f),Math.abs(k))&&Math.abs(h-M)<=o.EPSILON*Math.max(1,Math.abs(h),Math.abs(M))&&Math.abs(p-C)<=o.EPSILON*Math.max(1,Math.abs(p),Math.abs(C))&&Math.abs(d-j)<=o.EPSILON*Math.max(1,Math.abs(d),Math.abs(j))&&Math.abs(y-T)<=o.EPSILON*Math.max(1,Math.abs(y),Math.abs(T))&&Math.abs(v-A)<=o.EPSILON*Math.max(1,Math.abs(v),Math.abs(A))&&Math.abs(g-I)<=o.EPSILON*Math.max(1,Math.abs(g),Math.abs(I))&&Math.abs(m-R)<=o.EPSILON*Math.max(1,Math.abs(m),Math.abs(R))},t.sub=t.mul=t.ortho=t.perspective=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var r=i(t);if(r&&r.has(e))return r.get(e);var o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var u=a?Object.getOwnPropertyDescriptor(e,s):null;u&&(u.get||u.set)?Object.defineProperty(o,s,u):o[s]=e[s]}o.default=e,r&&r.set(e,o);return o}(r(52105));function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(i=function(e){return e?r:t})(e)}function a(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function s(e,t,r){var n=t[0],o=t[1],i=t[2],a=t[3],s=t[4],u=t[5],l=t[6],c=t[7],f=t[8],h=t[9],p=t[10],d=t[11],y=t[12],v=t[13],g=t[14],m=t[15],b=r[0],w=r[1],_=r[2],x=r[3];return e[0]=b*n+w*s+_*f+x*y,e[1]=b*o+w*u+_*h+x*v,e[2]=b*i+w*l+_*p+x*g,e[3]=b*a+w*c+_*d+x*m,b=r[4],w=r[5],_=r[6],x=r[7],e[4]=b*n+w*s+_*f+x*y,e[5]=b*o+w*u+_*h+x*v,e[6]=b*i+w*l+_*p+x*g,e[7]=b*a+w*c+_*d+x*m,b=r[8],w=r[9],_=r[10],x=r[11],e[8]=b*n+w*s+_*f+x*y,e[9]=b*o+w*u+_*h+x*v,e[10]=b*i+w*l+_*p+x*g,e[11]=b*a+w*c+_*d+x*m,b=r[12],w=r[13],_=r[14],x=r[15],e[12]=b*n+w*s+_*f+x*y,e[13]=b*o+w*u+_*h+x*v,e[14]=b*i+w*l+_*p+x*g,e[15]=b*a+w*c+_*d+x*m,e}function u(e,t,r){var n=t[0],o=t[1],i=t[2],a=t[3],s=n+n,u=o+o,l=i+i,c=n*s,f=n*u,h=n*l,p=o*u,d=o*l,y=i*l,v=a*s,g=a*u,m=a*l;return e[0]=1-(p+y),e[1]=f+m,e[2]=h-g,e[3]=0,e[4]=f-m,e[5]=1-(c+y),e[6]=d+v,e[7]=0,e[8]=h+g,e[9]=d-v,e[10]=1-(c+p),e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e}function l(e,t){var r=t[0],n=t[1],o=t[2],i=t[4],a=t[5],s=t[6],u=t[8],l=t[9],c=t[10];return e[0]=Math.hypot(r,n,o),e[1]=Math.hypot(i,a,s),e[2]=Math.hypot(u,l,c),e}function c(e,t,r,n,o){var i,a=1/Math.tan(t/2);return e[0]=a/r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=a,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=o&&o!==1/0?(i=1/(n-o),e[10]=(o+n)*i,e[14]=2*o*n*i):(e[10]=-1,e[14]=-2*n),e}var f=c;function h(e,t,r,n,o,i,a){var s=1/(t-r),u=1/(n-o),l=1/(i-a);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*u,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*l,e[11]=0,e[12]=(t+r)*s,e[13]=(o+n)*u,e[14]=(a+i)*l,e[15]=1,e}t.perspective=f;var p=h;function d(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e[4]=t[4]-r[4],e[5]=t[5]-r[5],e[6]=t[6]-r[6],e[7]=t[7]-r[7],e[8]=t[8]-r[8],e[9]=t[9]-r[9],e[10]=t[10]-r[10],e[11]=t[11]-r[11],e[12]=t[12]-r[12],e[13]=t[13]-r[13],e[14]=t[14]-r[14],e[15]=t[15]-r[15],e}t.ortho=p;var y=s;t.mul=y;var v=d;t.sub=v},2774:function(e,t,r){"use strict";function n(e){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.create=c,t.identity=function(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e},t.setAxisAngle=f,t.getAxisAngle=function(e,t){var r=2*Math.acos(t[3]),n=Math.sin(r/2);n>o.EPSILON?(e[0]=t[0]/n,e[1]=t[1]/n,e[2]=t[2]/n):(e[0]=1,e[1]=0,e[2]=0);return r},t.getAngle=function(e,t){var r=O(e,t);return Math.acos(2*r*r-1)},t.multiply=h,t.rotateX=function(e,t,r){r*=.5;var n=t[0],o=t[1],i=t[2],a=t[3],s=Math.sin(r),u=Math.cos(r);return e[0]=n*u+a*s,e[1]=o*u+i*s,e[2]=i*u-o*s,e[3]=a*u-n*s,e},t.rotateY=function(e,t,r){r*=.5;var n=t[0],o=t[1],i=t[2],a=t[3],s=Math.sin(r),u=Math.cos(r);return e[0]=n*u-i*s,e[1]=o*u+a*s,e[2]=i*u+n*s,e[3]=a*u-o*s,e},t.rotateZ=function(e,t,r){r*=.5;var n=t[0],o=t[1],i=t[2],a=t[3],s=Math.sin(r),u=Math.cos(r);return e[0]=n*u+o*s,e[1]=o*u-n*s,e[2]=i*u+a*s,e[3]=a*u-i*s,e},t.calculateW=function(e,t){var r=t[0],n=t[1],o=t[2];return e[0]=r,e[1]=n,e[2]=o,e[3]=Math.sqrt(Math.abs(1-r*r-n*n-o*o)),e},t.exp=p,t.ln=d,t.pow=function(e,t,r){return d(e,t),S(e,e,r),p(e,e),e},t.slerp=y,t.random=function(e){var t=o.RANDOM(),r=o.RANDOM(),n=o.RANDOM(),i=Math.sqrt(1-t),a=Math.sqrt(t);return e[0]=i*Math.sin(2*Math.PI*r),e[1]=i*Math.cos(2*Math.PI*r),e[2]=a*Math.sin(2*Math.PI*n),e[3]=a*Math.cos(2*Math.PI*n),e},t.invert=function(e,t){var r=t[0],n=t[1],o=t[2],i=t[3],a=r*r+n*n+o*o+i*i,s=a?1/a:0;return e[0]=-r*s,e[1]=-n*s,e[2]=-o*s,e[3]=i*s,e},t.conjugate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e},t.fromMat3=v,t.fromEuler=function(e,t,r,n){var o=.5*Math.PI/180;t*=o,r*=o,n*=o;var i=Math.sin(t),a=Math.cos(t),s=Math.sin(r),u=Math.cos(r),l=Math.sin(n),c=Math.cos(n);return e[0]=i*u*c-a*s*l,e[1]=a*s*c+i*u*l,e[2]=a*u*l-i*s*c,e[3]=a*u*c+i*s*l,e},t.str=function(e){return"quat("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},t.setAxes=t.sqlerp=t.rotationTo=t.equals=t.exactEquals=t.normalize=t.sqrLen=t.squaredLength=t.len=t.length=t.lerp=t.dot=t.scale=t.mul=t.add=t.set=t.copy=t.fromValues=t.clone=void 0;var o=l(r(52105)),i=l(r(96081)),a=l(r(7157)),s=l(r(21020));function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(u=function(e){return e?r:t})(e)}function l(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var r=u(t);if(r&&r.has(e))return r.get(e);var o={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=i?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(o,a,s):o[a]=e[a]}return o.default=e,r&&r.set(e,o),o}function c(){var e=new o.ARRAY_TYPE(4);return o.ARRAY_TYPE!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e[3]=1,e}function f(e,t,r){r*=.5;var n=Math.sin(r);return e[0]=n*t[0],e[1]=n*t[1],e[2]=n*t[2],e[3]=Math.cos(r),e}function h(e,t,r){var n=t[0],o=t[1],i=t[2],a=t[3],s=r[0],u=r[1],l=r[2],c=r[3];return e[0]=n*c+a*s+o*l-i*u,e[1]=o*c+a*u+i*s-n*l,e[2]=i*c+a*l+n*u-o*s,e[3]=a*c-n*s-o*u-i*l,e}function p(e,t){var r=t[0],n=t[1],o=t[2],i=t[3],a=Math.sqrt(r*r+n*n+o*o),s=Math.exp(i),u=a>0?s*Math.sin(a)/a:0;return e[0]=r*u,e[1]=n*u,e[2]=o*u,e[3]=s*Math.cos(a),e}function d(e,t){var r=t[0],n=t[1],o=t[2],i=t[3],a=Math.sqrt(r*r+n*n+o*o),s=a>0?Math.atan2(a,i)/a:0;return e[0]=r*s,e[1]=n*s,e[2]=o*s,e[3]=.5*Math.log(r*r+n*n+o*o+i*i),e}function y(e,t,r,n){var i,a,s,u,l,c=t[0],f=t[1],h=t[2],p=t[3],d=r[0],y=r[1],v=r[2],g=r[3];return(a=c*d+f*y+h*v+p*g)<0&&(a=-a,d=-d,y=-y,v=-v,g=-g),1-a>o.EPSILON?(i=Math.acos(a),s=Math.sin(i),u=Math.sin((1-n)*i)/s,l=Math.sin(n*i)/s):(u=1-n,l=n),e[0]=u*c+l*d,e[1]=u*f+l*y,e[2]=u*h+l*v,e[3]=u*p+l*g,e}function v(e,t){var r,n=t[0]+t[4]+t[8];if(n>0)r=Math.sqrt(n+1),e[3]=.5*r,r=.5/r,e[0]=(t[5]-t[7])*r,e[1]=(t[6]-t[2])*r,e[2]=(t[1]-t[3])*r;else{var o=0;t[4]>t[0]&&(o=1),t[8]>t[3*o+o]&&(o=2);var i=(o+1)%3,a=(o+2)%3;r=Math.sqrt(t[3*o+o]-t[3*i+i]-t[3*a+a]+1),e[o]=.5*r,r=.5/r,e[3]=(t[3*i+a]-t[3*a+i])*r,e[i]=(t[3*i+o]+t[3*o+i])*r,e[a]=(t[3*a+o]+t[3*o+a])*r}return e}var g=s.clone;t.clone=g;var m=s.fromValues;t.fromValues=m;var b=s.copy;t.copy=b;var w=s.set;t.set=w;var _=s.add;t.add=_;var x=h;t.mul=x;var S=s.scale;t.scale=S;var O=s.dot;t.dot=O;var P=s.lerp;t.lerp=P;var E=s.length;t.length=E;var k=E;t.len=k;var M=s.squaredLength;t.squaredLength=M;var C=M;t.sqrLen=C;var j=s.normalize;t.normalize=j;var T=s.exactEquals;t.exactEquals=T;var A=s.equals;t.equals=A;var I,R,L,N=(I=a.create(),R=a.fromValues(1,0,0),L=a.fromValues(0,1,0),function(e,t,r){var n=a.dot(t,r);return n<-.999999?(a.cross(I,R,t),a.len(I)<1e-6&&a.cross(I,L,t),a.normalize(I,I),f(e,I,Math.PI),e):n>.999999?(e[0]=0,e[1]=0,e[2]=0,e[3]=1,e):(a.cross(I,t,r),e[0]=I[0],e[1]=I[1],e[2]=I[2],e[3]=1+n,j(e,e))});t.rotationTo=N;var D,B,F=(D=c(),B=c(),function(e,t,r,n,o,i){return y(D,t,o,i),y(B,r,n,i),y(e,D,B,2*i*(1-i)),e});t.sqlerp=F;var G,z=(G=i.create(),function(e,t,r,n){return G[0]=r[0],G[3]=r[1],G[6]=r[2],G[1]=n[0],G[4]=n[1],G[7]=n[2],G[2]=-t[0],G[5]=-t[1],G[8]=-t[2],j(e,v(e,G))});t.setAxes=z},73195:function(e,t,r){"use strict";function n(e){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.create=function(){var e=new o.ARRAY_TYPE(8);o.ARRAY_TYPE!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[4]=0,e[5]=0,e[6]=0,e[7]=0);return e[3]=1,e},t.clone=function(e){var t=new o.ARRAY_TYPE(8);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t},t.fromValues=function(e,t,r,n,i,a,s,u){var l=new o.ARRAY_TYPE(8);return l[0]=e,l[1]=t,l[2]=r,l[3]=n,l[4]=i,l[5]=a,l[6]=s,l[7]=u,l},t.fromRotationTranslationValues=function(e,t,r,n,i,a,s){var u=new o.ARRAY_TYPE(8);u[0]=e,u[1]=t,u[2]=r,u[3]=n;var l=.5*i,c=.5*a,f=.5*s;return u[4]=l*n+c*r-f*t,u[5]=c*n+f*e-l*r,u[6]=f*n+l*t-c*e,u[7]=-l*e-c*t-f*r,u},t.fromRotationTranslation=l,t.fromTranslation=function(e,t){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e[4]=.5*t[0],e[5]=.5*t[1],e[6]=.5*t[2],e[7]=0,e},t.fromRotation=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=0,e[5]=0,e[6]=0,e[7]=0,e},t.fromMat4=function(e,t){var r=i.create();a.getRotation(r,t);var n=new o.ARRAY_TYPE(3);return a.getTranslation(n,t),l(e,r,n),e},t.copy=c,t.identity=function(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e[6]=0,e[7]=0,e},t.set=function(e,t,r,n,o,i,a,s,u){return e[0]=t,e[1]=r,e[2]=n,e[3]=o,e[4]=i,e[5]=a,e[6]=s,e[7]=u,e},t.getDual=function(e,t){return e[0]=t[4],e[1]=t[5],e[2]=t[6],e[3]=t[7],e},t.setDual=function(e,t){return e[4]=t[0],e[5]=t[1],e[6]=t[2],e[7]=t[3],e},t.getTranslation=function(e,t){var r=t[4],n=t[5],o=t[6],i=t[7],a=-t[0],s=-t[1],u=-t[2],l=t[3];return e[0]=2*(r*l+i*a+n*u-o*s),e[1]=2*(n*l+i*s+o*a-r*u),e[2]=2*(o*l+i*u+r*s-n*a),e},t.translate=function(e,t,r){var n=t[0],o=t[1],i=t[2],a=t[3],s=.5*r[0],u=.5*r[1],l=.5*r[2],c=t[4],f=t[5],h=t[6],p=t[7];return e[0]=n,e[1]=o,e[2]=i,e[3]=a,e[4]=a*s+o*l-i*u+c,e[5]=a*u+i*s-n*l+f,e[6]=a*l+n*u-o*s+h,e[7]=-n*s-o*u-i*l+p,e},t.rotateX=function(e,t,r){var n=-t[0],o=-t[1],a=-t[2],s=t[3],u=t[4],l=t[5],c=t[6],f=t[7],h=u*s+f*n+l*a-c*o,p=l*s+f*o+c*n-u*a,d=c*s+f*a+u*o-l*n,y=f*s-u*n-l*o-c*a;return i.rotateX(e,t,r),n=e[0],o=e[1],a=e[2],s=e[3],e[4]=h*s+y*n+p*a-d*o,e[5]=p*s+y*o+d*n-h*a,e[6]=d*s+y*a+h*o-p*n,e[7]=y*s-h*n-p*o-d*a,e},t.rotateY=function(e,t,r){var n=-t[0],o=-t[1],a=-t[2],s=t[3],u=t[4],l=t[5],c=t[6],f=t[7],h=u*s+f*n+l*a-c*o,p=l*s+f*o+c*n-u*a,d=c*s+f*a+u*o-l*n,y=f*s-u*n-l*o-c*a;return i.rotateY(e,t,r),n=e[0],o=e[1],a=e[2],s=e[3],e[4]=h*s+y*n+p*a-d*o,e[5]=p*s+y*o+d*n-h*a,e[6]=d*s+y*a+h*o-p*n,e[7]=y*s-h*n-p*o-d*a,e},t.rotateZ=function(e,t,r){var n=-t[0],o=-t[1],a=-t[2],s=t[3],u=t[4],l=t[5],c=t[6],f=t[7],h=u*s+f*n+l*a-c*o,p=l*s+f*o+c*n-u*a,d=c*s+f*a+u*o-l*n,y=f*s-u*n-l*o-c*a;return i.rotateZ(e,t,r),n=e[0],o=e[1],a=e[2],s=e[3],e[4]=h*s+y*n+p*a-d*o,e[5]=p*s+y*o+d*n-h*a,e[6]=d*s+y*a+h*o-p*n,e[7]=y*s-h*n-p*o-d*a,e},t.rotateByQuatAppend=function(e,t,r){var n=r[0],o=r[1],i=r[2],a=r[3],s=t[0],u=t[1],l=t[2],c=t[3];return e[0]=s*a+c*n+u*i-l*o,e[1]=u*a+c*o+l*n-s*i,e[2]=l*a+c*i+s*o-u*n,e[3]=c*a-s*n-u*o-l*i,s=t[4],u=t[5],l=t[6],c=t[7],e[4]=s*a+c*n+u*i-l*o,e[5]=u*a+c*o+l*n-s*i,e[6]=l*a+c*i+s*o-u*n,e[7]=c*a-s*n-u*o-l*i,e},t.rotateByQuatPrepend=function(e,t,r){var n=t[0],o=t[1],i=t[2],a=t[3],s=r[0],u=r[1],l=r[2],c=r[3];return e[0]=n*c+a*s+o*l-i*u,e[1]=o*c+a*u+i*s-n*l,e[2]=i*c+a*l+n*u-o*s,e[3]=a*c-n*s-o*u-i*l,s=r[4],u=r[5],l=r[6],c=r[7],e[4]=n*c+a*s+o*l-i*u,e[5]=o*c+a*u+i*s-n*l,e[6]=i*c+a*l+n*u-o*s,e[7]=a*c-n*s-o*u-i*l,e},t.rotateAroundAxis=function(e,t,r,n){if(Math.abs(n)<o.EPSILON)return c(e,t);var i=Math.hypot(r[0],r[1],r[2]);n*=.5;var a=Math.sin(n),s=a*r[0]/i,u=a*r[1]/i,l=a*r[2]/i,f=Math.cos(n),h=t[0],p=t[1],d=t[2],y=t[3];e[0]=h*f+y*s+p*l-d*u,e[1]=p*f+y*u+d*s-h*l,e[2]=d*f+y*l+h*u-p*s,e[3]=y*f-h*s-p*u-d*l;var v=t[4],g=t[5],m=t[6],b=t[7];return e[4]=v*f+b*s+g*l-m*u,e[5]=g*f+b*u+m*s-v*l,e[6]=m*f+b*l+v*u-g*s,e[7]=b*f-v*s-g*u-m*l,e},t.add=function(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e[4]=t[4]+r[4],e[5]=t[5]+r[5],e[6]=t[6]+r[6],e[7]=t[7]+r[7],e},t.multiply=p,t.scale=function(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*r,e[5]=t[5]*r,e[6]=t[6]*r,e[7]=t[7]*r,e},t.lerp=function(e,t,r,n){var o=1-n;y(t,r)<0&&(n=-n);return e[0]=t[0]*o+r[0]*n,e[1]=t[1]*o+r[1]*n,e[2]=t[2]*o+r[2]*n,e[3]=t[3]*o+r[3]*n,e[4]=t[4]*o+r[4]*n,e[5]=t[5]*o+r[5]*n,e[6]=t[6]*o+r[6]*n,e[7]=t[7]*o+r[7]*n,e},t.invert=function(e,t){var r=m(t);return e[0]=-t[0]/r,e[1]=-t[1]/r,e[2]=-t[2]/r,e[3]=t[3]/r,e[4]=-t[4]/r,e[5]=-t[5]/r,e[6]=-t[6]/r,e[7]=t[7]/r,e},t.conjugate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e[4]=-t[4],e[5]=-t[5],e[6]=-t[6],e[7]=t[7],e},t.normalize=function(e,t){var r=m(t);if(r>0){r=Math.sqrt(r);var n=t[0]/r,o=t[1]/r,i=t[2]/r,a=t[3]/r,s=t[4],u=t[5],l=t[6],c=t[7],f=n*s+o*u+i*l+a*c;e[0]=n,e[1]=o,e[2]=i,e[3]=a,e[4]=(s-n*f)/r,e[5]=(u-o*f)/r,e[6]=(l-i*f)/r,e[7]=(c-a*f)/r}return e},t.str=function(e){return"quat2("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+")"},t.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]},t.equals=function(e,t){var r=e[0],n=e[1],i=e[2],a=e[3],s=e[4],u=e[5],l=e[6],c=e[7],f=t[0],h=t[1],p=t[2],d=t[3],y=t[4],v=t[5],g=t[6],m=t[7];return Math.abs(r-f)<=o.EPSILON*Math.max(1,Math.abs(r),Math.abs(f))&&Math.abs(n-h)<=o.EPSILON*Math.max(1,Math.abs(n),Math.abs(h))&&Math.abs(i-p)<=o.EPSILON*Math.max(1,Math.abs(i),Math.abs(p))&&Math.abs(a-d)<=o.EPSILON*Math.max(1,Math.abs(a),Math.abs(d))&&Math.abs(s-y)<=o.EPSILON*Math.max(1,Math.abs(s),Math.abs(y))&&Math.abs(u-v)<=o.EPSILON*Math.max(1,Math.abs(u),Math.abs(v))&&Math.abs(l-g)<=o.EPSILON*Math.max(1,Math.abs(l),Math.abs(g))&&Math.abs(c-m)<=o.EPSILON*Math.max(1,Math.abs(c),Math.abs(m))},t.sqrLen=t.squaredLength=t.len=t.length=t.dot=t.mul=t.setReal=t.getReal=void 0;var o=u(r(52105)),i=u(r(2774)),a=u(r(92956));function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(s=function(e){return e?r:t})(e)}function u(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var r=s(t);if(r&&r.has(e))return r.get(e);var o={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var u=i?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(o,a,u):o[a]=e[a]}return o.default=e,r&&r.set(e,o),o}function l(e,t,r){var n=.5*r[0],o=.5*r[1],i=.5*r[2],a=t[0],s=t[1],u=t[2],l=t[3];return e[0]=a,e[1]=s,e[2]=u,e[3]=l,e[4]=n*l+o*u-i*s,e[5]=o*l+i*a-n*u,e[6]=i*l+n*s-o*a,e[7]=-n*a-o*s-i*u,e}function c(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e}var f=i.copy;t.getReal=f;var h=i.copy;function p(e,t,r){var n=t[0],o=t[1],i=t[2],a=t[3],s=r[4],u=r[5],l=r[6],c=r[7],f=t[4],h=t[5],p=t[6],d=t[7],y=r[0],v=r[1],g=r[2],m=r[3];return e[0]=n*m+a*y+o*g-i*v,e[1]=o*m+a*v+i*y-n*g,e[2]=i*m+a*g+n*v-o*y,e[3]=a*m-n*y-o*v-i*g,e[4]=n*c+a*s+o*l-i*u+f*m+d*y+h*g-p*v,e[5]=o*c+a*u+i*s-n*l+h*m+d*v+p*y-f*g,e[6]=i*c+a*l+n*u-o*s+p*m+d*g+f*v-h*y,e[7]=a*c-n*s-o*u-i*l+d*m-f*y-h*v-p*g,e}t.setReal=h;var d=p;t.mul=d;var y=i.dot;t.dot=y;var v=i.length;t.length=v;var g=v;t.len=g;var m=i.squaredLength;t.squaredLength=m;var b=m;t.sqrLen=b},49679:function(e,t,r){"use strict";function n(e){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.create=a,t.clone=function(e){var t=new o.ARRAY_TYPE(2);return t[0]=e[0],t[1]=e[1],t},t.fromValues=function(e,t){var r=new o.ARRAY_TYPE(2);return r[0]=e,r[1]=t,r},t.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e},t.set=function(e,t,r){return e[0]=t,e[1]=r,e},t.add=function(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e},t.subtract=s,t.multiply=u,t.divide=l,t.ceil=function(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e},t.floor=function(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e},t.min=function(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e},t.max=function(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e},t.round=function(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e},t.scale=function(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e},t.scaleAndAdd=function(e,t,r,n){return e[0]=t[0]+r[0]*n,e[1]=t[1]+r[1]*n,e},t.distance=c,t.squaredDistance=f,t.length=h,t.squaredLength=p,t.negate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e},t.inverse=function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e},t.normalize=function(e,t){var r=t[0],n=t[1],o=r*r+n*n;o>0&&(o=1/Math.sqrt(o));return e[0]=t[0]*o,e[1]=t[1]*o,e},t.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]},t.cross=function(e,t,r){var n=t[0]*r[1]-t[1]*r[0];return e[0]=e[1]=0,e[2]=n,e},t.lerp=function(e,t,r,n){var o=t[0],i=t[1];return e[0]=o+n*(r[0]-o),e[1]=i+n*(r[1]-i),e},t.random=function(e,t){t=t||1;var r=2*o.RANDOM()*Math.PI;return e[0]=Math.cos(r)*t,e[1]=Math.sin(r)*t,e},t.transformMat2=function(e,t,r){var n=t[0],o=t[1];return e[0]=r[0]*n+r[2]*o,e[1]=r[1]*n+r[3]*o,e},t.transformMat2d=function(e,t,r){var n=t[0],o=t[1];return e[0]=r[0]*n+r[2]*o+r[4],e[1]=r[1]*n+r[3]*o+r[5],e},t.transformMat3=function(e,t,r){var n=t[0],o=t[1];return e[0]=r[0]*n+r[3]*o+r[6],e[1]=r[1]*n+r[4]*o+r[7],e},t.transformMat4=function(e,t,r){var n=t[0],o=t[1];return e[0]=r[0]*n+r[4]*o+r[12],e[1]=r[1]*n+r[5]*o+r[13],e},t.rotate=function(e,t,r,n){var o=t[0]-r[0],i=t[1]-r[1],a=Math.sin(n),s=Math.cos(n);return e[0]=o*s-i*a+r[0],e[1]=o*a+i*s+r[1],e},t.angle=function(e,t){var r=e[0],n=e[1],o=t[0],i=t[1],a=Math.sqrt(r*r+n*n)*Math.sqrt(o*o+i*i),s=a&&(r*o+n*i)/a;return Math.acos(Math.min(Math.max(s,-1),1))},t.zero=function(e){return e[0]=0,e[1]=0,e},t.str=function(e){return"vec2("+e[0]+", "+e[1]+")"},t.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]},t.equals=function(e,t){var r=e[0],n=e[1],i=t[0],a=t[1];return Math.abs(r-i)<=o.EPSILON*Math.max(1,Math.abs(r),Math.abs(i))&&Math.abs(n-a)<=o.EPSILON*Math.max(1,Math.abs(n),Math.abs(a))},t.forEach=t.sqrLen=t.sqrDist=t.dist=t.div=t.mul=t.sub=t.len=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var r=i(t);if(r&&r.has(e))return r.get(e);var o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var u=a?Object.getOwnPropertyDescriptor(e,s):null;u&&(u.get||u.set)?Object.defineProperty(o,s,u):o[s]=e[s]}o.default=e,r&&r.set(e,o);return o}(r(52105));function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(i=function(e){return e?r:t})(e)}function a(){var e=new o.ARRAY_TYPE(2);return o.ARRAY_TYPE!=Float32Array&&(e[0]=0,e[1]=0),e}function s(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e}function u(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e}function l(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e}function c(e,t){var r=t[0]-e[0],n=t[1]-e[1];return Math.hypot(r,n)}function f(e,t){var r=t[0]-e[0],n=t[1]-e[1];return r*r+n*n}function h(e){var t=e[0],r=e[1];return Math.hypot(t,r)}function p(e){var t=e[0],r=e[1];return t*t+r*r}var d=h;t.len=d;var y=s;t.sub=y;var v=u;t.mul=v;var g=l;t.div=g;var m=c;t.dist=m;var b=f;t.sqrDist=b;var w=p;t.sqrLen=w;var _,x=(_=a(),function(e,t,r,n,o,i){var a,s;for(t||(t=2),r||(r=0),s=n?Math.min(n*t+r,e.length):e.length,a=r;a<s;a+=t)_[0]=e[a],_[1]=e[a+1],o(_,_,i),e[a]=_[0],e[a+1]=_[1];return e});t.forEach=x},7157:function(e,t,r){"use strict";function n(e){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.create=a,t.clone=function(e){var t=new o.ARRAY_TYPE(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},t.length=s,t.fromValues=function(e,t,r){var n=new o.ARRAY_TYPE(3);return n[0]=e,n[1]=t,n[2]=r,n},t.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},t.set=function(e,t,r,n){return e[0]=t,e[1]=r,e[2]=n,e},t.add=function(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e},t.subtract=u,t.multiply=l,t.divide=c,t.ceil=function(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e},t.floor=function(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e},t.min=function(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e[2]=Math.min(t[2],r[2]),e},t.max=function(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e[2]=Math.max(t[2],r[2]),e},t.round=function(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e},t.scale=function(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e},t.scaleAndAdd=function(e,t,r,n){return e[0]=t[0]+r[0]*n,e[1]=t[1]+r[1]*n,e[2]=t[2]+r[2]*n,e},t.distance=f,t.squaredDistance=h,t.squaredLength=p,t.negate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e},t.inverse=function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e},t.normalize=function(e,t){var r=t[0],n=t[1],o=t[2],i=r*r+n*n+o*o;i>0&&(i=1/Math.sqrt(i));return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e},t.dot=d,t.cross=function(e,t,r){var n=t[0],o=t[1],i=t[2],a=r[0],s=r[1],u=r[2];return e[0]=o*u-i*s,e[1]=i*a-n*u,e[2]=n*s-o*a,e},t.lerp=function(e,t,r,n){var o=t[0],i=t[1],a=t[2];return e[0]=o+n*(r[0]-o),e[1]=i+n*(r[1]-i),e[2]=a+n*(r[2]-a),e},t.hermite=function(e,t,r,n,o,i){var a=i*i,s=a*(2*i-3)+1,u=a*(i-2)+i,l=a*(i-1),c=a*(3-2*i);return e[0]=t[0]*s+r[0]*u+n[0]*l+o[0]*c,e[1]=t[1]*s+r[1]*u+n[1]*l+o[1]*c,e[2]=t[2]*s+r[2]*u+n[2]*l+o[2]*c,e},t.bezier=function(e,t,r,n,o,i){var a=1-i,s=a*a,u=i*i,l=s*a,c=3*i*s,f=3*u*a,h=u*i;return e[0]=t[0]*l+r[0]*c+n[0]*f+o[0]*h,e[1]=t[1]*l+r[1]*c+n[1]*f+o[1]*h,e[2]=t[2]*l+r[2]*c+n[2]*f+o[2]*h,e},t.random=function(e,t){t=t||1;var r=2*o.RANDOM()*Math.PI,n=2*o.RANDOM()-1,i=Math.sqrt(1-n*n)*t;return e[0]=Math.cos(r)*i,e[1]=Math.sin(r)*i,e[2]=n*t,e},t.transformMat4=function(e,t,r){var n=t[0],o=t[1],i=t[2],a=r[3]*n+r[7]*o+r[11]*i+r[15];return a=a||1,e[0]=(r[0]*n+r[4]*o+r[8]*i+r[12])/a,e[1]=(r[1]*n+r[5]*o+r[9]*i+r[13])/a,e[2]=(r[2]*n+r[6]*o+r[10]*i+r[14])/a,e},t.transformMat3=function(e,t,r){var n=t[0],o=t[1],i=t[2];return e[0]=n*r[0]+o*r[3]+i*r[6],e[1]=n*r[1]+o*r[4]+i*r[7],e[2]=n*r[2]+o*r[5]+i*r[8],e},t.transformQuat=function(e,t,r){var n=r[0],o=r[1],i=r[2],a=r[3],s=t[0],u=t[1],l=t[2],c=o*l-i*u,f=i*s-n*l,h=n*u-o*s,p=o*h-i*f,d=i*c-n*h,y=n*f-o*c,v=2*a;return c*=v,f*=v,h*=v,p*=2,d*=2,y*=2,e[0]=s+c+p,e[1]=u+f+d,e[2]=l+h+y,e},t.rotateX=function(e,t,r,n){var o=[],i=[];return o[0]=t[0]-r[0],o[1]=t[1]-r[1],o[2]=t[2]-r[2],i[0]=o[0],i[1]=o[1]*Math.cos(n)-o[2]*Math.sin(n),i[2]=o[1]*Math.sin(n)+o[2]*Math.cos(n),e[0]=i[0]+r[0],e[1]=i[1]+r[1],e[2]=i[2]+r[2],e},t.rotateY=function(e,t,r,n){var o=[],i=[];return o[0]=t[0]-r[0],o[1]=t[1]-r[1],o[2]=t[2]-r[2],i[0]=o[2]*Math.sin(n)+o[0]*Math.cos(n),i[1]=o[1],i[2]=o[2]*Math.cos(n)-o[0]*Math.sin(n),e[0]=i[0]+r[0],e[1]=i[1]+r[1],e[2]=i[2]+r[2],e},t.rotateZ=function(e,t,r,n){var o=[],i=[];return o[0]=t[0]-r[0],o[1]=t[1]-r[1],o[2]=t[2]-r[2],i[0]=o[0]*Math.cos(n)-o[1]*Math.sin(n),i[1]=o[0]*Math.sin(n)+o[1]*Math.cos(n),i[2]=o[2],e[0]=i[0]+r[0],e[1]=i[1]+r[1],e[2]=i[2]+r[2],e},t.angle=function(e,t){var r=e[0],n=e[1],o=e[2],i=t[0],a=t[1],s=t[2],u=Math.sqrt(r*r+n*n+o*o),l=Math.sqrt(i*i+a*a+s*s),c=u*l,f=c&&d(e,t)/c;return Math.acos(Math.min(Math.max(f,-1),1))},t.zero=function(e){return e[0]=0,e[1]=0,e[2]=0,e},t.str=function(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"},t.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]},t.equals=function(e,t){var r=e[0],n=e[1],i=e[2],a=t[0],s=t[1],u=t[2];return Math.abs(r-a)<=o.EPSILON*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(n-s)<=o.EPSILON*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(i-u)<=o.EPSILON*Math.max(1,Math.abs(i),Math.abs(u))},t.forEach=t.sqrLen=t.len=t.sqrDist=t.dist=t.div=t.mul=t.sub=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var r=i(t);if(r&&r.has(e))return r.get(e);var o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var u=a?Object.getOwnPropertyDescriptor(e,s):null;u&&(u.get||u.set)?Object.defineProperty(o,s,u):o[s]=e[s]}o.default=e,r&&r.set(e,o);return o}(r(52105));function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(i=function(e){return e?r:t})(e)}function a(){var e=new o.ARRAY_TYPE(3);return o.ARRAY_TYPE!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function s(e){var t=e[0],r=e[1],n=e[2];return Math.hypot(t,r,n)}function u(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e}function l(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e[2]=t[2]*r[2],e}function c(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e[2]=t[2]/r[2],e}function f(e,t){var r=t[0]-e[0],n=t[1]-e[1],o=t[2]-e[2];return Math.hypot(r,n,o)}function h(e,t){var r=t[0]-e[0],n=t[1]-e[1],o=t[2]-e[2];return r*r+n*n+o*o}function p(e){var t=e[0],r=e[1],n=e[2];return t*t+r*r+n*n}function d(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}var y=u;t.sub=y;var v=l;t.mul=v;var g=c;t.div=g;var m=f;t.dist=m;var b=h;t.sqrDist=b;var w=s;t.len=w;var _=p;t.sqrLen=_;var x,S=(x=a(),function(e,t,r,n,o,i){var a,s;for(t||(t=3),r||(r=0),s=n?Math.min(n*t+r,e.length):e.length,a=r;a<s;a+=t)x[0]=e[a],x[1]=e[a+1],x[2]=e[a+2],o(x,x,i),e[a]=x[0],e[a+1]=x[1],e[a+2]=x[2];return e});t.forEach=S},21020:function(e,t,r){"use strict";function n(e){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.create=a,t.clone=function(e){var t=new o.ARRAY_TYPE(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},t.fromValues=function(e,t,r,n){var i=new o.ARRAY_TYPE(4);return i[0]=e,i[1]=t,i[2]=r,i[3]=n,i},t.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},t.set=function(e,t,r,n,o){return e[0]=t,e[1]=r,e[2]=n,e[3]=o,e},t.add=function(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e},t.subtract=s,t.multiply=u,t.divide=l,t.ceil=function(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e[3]=Math.ceil(t[3]),e},t.floor=function(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e[3]=Math.floor(t[3]),e},t.min=function(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e[2]=Math.min(t[2],r[2]),e[3]=Math.min(t[3],r[3]),e},t.max=function(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e[2]=Math.max(t[2],r[2]),e[3]=Math.max(t[3],r[3]),e},t.round=function(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e[3]=Math.round(t[3]),e},t.scale=function(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e},t.scaleAndAdd=function(e,t,r,n){return e[0]=t[0]+r[0]*n,e[1]=t[1]+r[1]*n,e[2]=t[2]+r[2]*n,e[3]=t[3]+r[3]*n,e},t.distance=c,t.squaredDistance=f,t.length=h,t.squaredLength=p,t.negate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e},t.inverse=function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e[3]=1/t[3],e},t.normalize=function(e,t){var r=t[0],n=t[1],o=t[2],i=t[3],a=r*r+n*n+o*o+i*i;a>0&&(a=1/Math.sqrt(a));return e[0]=r*a,e[1]=n*a,e[2]=o*a,e[3]=i*a,e},t.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]},t.cross=function(e,t,r,n){var o=r[0]*n[1]-r[1]*n[0],i=r[0]*n[2]-r[2]*n[0],a=r[0]*n[3]-r[3]*n[0],s=r[1]*n[2]-r[2]*n[1],u=r[1]*n[3]-r[3]*n[1],l=r[2]*n[3]-r[3]*n[2],c=t[0],f=t[1],h=t[2],p=t[3];return e[0]=f*l-h*u+p*s,e[1]=-c*l+h*a-p*i,e[2]=c*u-f*a+p*o,e[3]=-c*s+f*i-h*o,e},t.lerp=function(e,t,r,n){var o=t[0],i=t[1],a=t[2],s=t[3];return e[0]=o+n*(r[0]-o),e[1]=i+n*(r[1]-i),e[2]=a+n*(r[2]-a),e[3]=s+n*(r[3]-s),e},t.random=function(e,t){var r,n,i,a,s,u;t=t||1;do{r=2*o.RANDOM()-1,n=2*o.RANDOM()-1,s=r*r+n*n}while(s>=1);do{i=2*o.RANDOM()-1,a=2*o.RANDOM()-1,u=i*i+a*a}while(u>=1);var l=Math.sqrt((1-s)/u);return e[0]=t*r,e[1]=t*n,e[2]=t*i*l,e[3]=t*a*l,e},t.transformMat4=function(e,t,r){var n=t[0],o=t[1],i=t[2],a=t[3];return e[0]=r[0]*n+r[4]*o+r[8]*i+r[12]*a,e[1]=r[1]*n+r[5]*o+r[9]*i+r[13]*a,e[2]=r[2]*n+r[6]*o+r[10]*i+r[14]*a,e[3]=r[3]*n+r[7]*o+r[11]*i+r[15]*a,e},t.transformQuat=function(e,t,r){var n=t[0],o=t[1],i=t[2],a=r[0],s=r[1],u=r[2],l=r[3],c=l*n+s*i-u*o,f=l*o+u*n-a*i,h=l*i+a*o-s*n,p=-a*n-s*o-u*i;return e[0]=c*l+p*-a+f*-u-h*-s,e[1]=f*l+p*-s+h*-a-c*-u,e[2]=h*l+p*-u+c*-s-f*-a,e[3]=t[3],e},t.zero=function(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e},t.str=function(e){return"vec4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},t.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]},t.equals=function(e,t){var r=e[0],n=e[1],i=e[2],a=e[3],s=t[0],u=t[1],l=t[2],c=t[3];return Math.abs(r-s)<=o.EPSILON*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(n-u)<=o.EPSILON*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(i-l)<=o.EPSILON*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(a-c)<=o.EPSILON*Math.max(1,Math.abs(a),Math.abs(c))},t.forEach=t.sqrLen=t.len=t.sqrDist=t.dist=t.div=t.mul=t.sub=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var r=i(t);if(r&&r.has(e))return r.get(e);var o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var u=a?Object.getOwnPropertyDescriptor(e,s):null;u&&(u.get||u.set)?Object.defineProperty(o,s,u):o[s]=e[s]}o.default=e,r&&r.set(e,o);return o}(r(52105));function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(i=function(e){return e?r:t})(e)}function a(){var e=new o.ARRAY_TYPE(4);return o.ARRAY_TYPE!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0),e}function s(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e}function u(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e[2]=t[2]*r[2],e[3]=t[3]*r[3],e}function l(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e[2]=t[2]/r[2],e[3]=t[3]/r[3],e}function c(e,t){var r=t[0]-e[0],n=t[1]-e[1],o=t[2]-e[2],i=t[3]-e[3];return Math.hypot(r,n,o,i)}function f(e,t){var r=t[0]-e[0],n=t[1]-e[1],o=t[2]-e[2],i=t[3]-e[3];return r*r+n*n+o*o+i*i}function h(e){var t=e[0],r=e[1],n=e[2],o=e[3];return Math.hypot(t,r,n,o)}function p(e){var t=e[0],r=e[1],n=e[2],o=e[3];return t*t+r*r+n*n+o*o}var d=s;t.sub=d;var y=u;t.mul=y;var v=l;t.div=v;var g=c;t.dist=g;var m=f;t.sqrDist=m;var b=h;t.len=b;var w=p;t.sqrLen=w;var _,x=(_=a(),function(e,t,r,n,o,i){var a,s;for(t||(t=4),r||(r=0),s=n?Math.min(n*t+r,e.length):e.length,a=r;a<s;a+=t)_[0]=e[a],_[1]=e[a+1],_[2]=e[a+2],_[3]=e[a+3],o(_,_,i),e[a]=_[0],e[a+1]=_[1],e[a+2]=_[2],e[a+3]=_[3];return e});t.forEach=x},28813:function(e){var t=[],r=[],n="insert-css: You need to provide a CSS string. Usage: insertCss(cssString[, options]).";function o(e,o){if(o=o||{},void 0===e)throw new Error(n);var i,a=!0===o.prepend?"prepend":"append",s=void 0!==o.container?o.container:document.querySelector("head"),u=t.indexOf(s);return-1===u&&(u=t.push(s)-1,r[u]={}),void 0!==r[u]&&void 0!==r[u][a]?i=r[u][a]:(i=r[u][a]=function(){var e=document.createElement("style");return e.setAttribute("type","text/css"),e}(),"prepend"===a?s.insertBefore(i,s.childNodes[0]):s.appendChild(i)),65279===e.charCodeAt(0)&&(e=e.substr(1,e.length)),i.styleSheet?i.styleSheet.cssText+=e:i.textContent+=e,i}e.exports=o,e.exports.insertCss=o},88370:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isAnyArray=void 0;var r=Object.prototype.toString;t.isAnyArray=function(e){var t=r.call(e);return t.endsWith("Array]")&&!t.includes("Big")}},56730:function(e){e.exports=function(e){return!(!e||"string"==typeof e)&&(e instanceof Array||Array.isArray(e)||e.length>=0&&(e.splice instanceof Function||Object.getOwnPropertyDescriptor(e,e.length-1)&&"String"!==e.constructor.name))}},42138:function(e,t,r){function n(e){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e=r.nmd(e);var o=200,i="__lodash_hash_undefined__",a=9007199254740991,s="[object Arguments]",u="[object Boolean]",l="[object Date]",c="[object Function]",f="[object GeneratorFunction]",h="[object Map]",p="[object Number]",d="[object Object]",y="[object RegExp]",v="[object Set]",g="[object String]",m="[object Symbol]",b="[object ArrayBuffer]",w="[object DataView]",_="[object Float32Array]",x="[object Float64Array]",S="[object Int8Array]",O="[object Int16Array]",P="[object Int32Array]",E="[object Uint8Array]",k="[object Uint8ClampedArray]",M="[object Uint16Array]",C="[object Uint32Array]",j=/\w*$/,T=/^\[object .+?Constructor\]$/,A=/^(?:0|[1-9]\d*)$/,I={};I[s]=I["[object Array]"]=I[b]=I[w]=I[u]=I[l]=I[_]=I[x]=I[S]=I[O]=I[P]=I[h]=I[p]=I[d]=I[y]=I[v]=I[g]=I[m]=I[E]=I[k]=I[M]=I[C]=!0,I["[object Error]"]=I[c]=I["[object WeakMap]"]=!1;var R="object"==(void 0===r.g?"undefined":n(r.g))&&r.g&&r.g.Object===Object&&r.g,L="object"==("undefined"==typeof self?"undefined":n(self))&&self&&self.Object===Object&&self,N=R||L||Function("return this")(),D="object"==n(t)&&t&&!t.nodeType&&t,B=D&&"object"==n(e)&&e&&!e.nodeType&&e,F=B&&B.exports===D;function G(e,t){return e.set(t[0],t[1]),e}function z(e,t){return e.add(t),e}function U(e,t,r,n){var o=-1,i=e?e.length:0;for(n&&i&&(r=e[++o]);++o<i;)r=t(r,e[o],o,e);return r}function V(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}function W(e){var t=-1,r=Array(e.size);return e.forEach(function(e,n){r[++t]=[n,e]}),r}function Y(e,t){return function(r){return e(t(r))}}function H(e){var t=-1,r=Array(e.size);return e.forEach(function(e){r[++t]=e}),r}var X,q=Array.prototype,J=Function.prototype,Z=Object.prototype,K=N["__core-js_shared__"],Q=(X=/[^.]+$/.exec(K&&K.keys&&K.keys.IE_PROTO||""))?"Symbol(src)_1."+X:"",$=J.toString,ee=Z.hasOwnProperty,te=Z.toString,re=RegExp("^"+$.call(ee).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ne=F?N.Buffer:void 0,oe=N.Symbol,ie=N.Uint8Array,ae=Y(Object.getPrototypeOf,Object),se=Object.create,ue=Z.propertyIsEnumerable,le=q.splice,ce=Object.getOwnPropertySymbols,fe=ne?ne.isBuffer:void 0,he=Y(Object.keys,Object),pe=Be(N,"DataView"),de=Be(N,"Map"),ye=Be(N,"Promise"),ve=Be(N,"Set"),ge=Be(N,"WeakMap"),me=Be(Object,"create"),be=Ve(pe),we=Ve(de),_e=Ve(ye),xe=Ve(ve),Se=Ve(ge),Oe=oe?oe.prototype:void 0,Pe=Oe?Oe.valueOf:void 0;function Ee(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function ke(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Me(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Ce(e){this.__data__=new ke(e)}function je(e,t){var r=Ye(e)||function(e){return function(e){return function(e){return!!e&&"object"==n(e)}(e)&&He(e)}(e)&&ee.call(e,"callee")&&(!ue.call(e,"callee")||te.call(e)==s)}(e)?function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}(e.length,String):[],o=r.length,i=!!o;for(var a in e)!t&&!ee.call(e,a)||i&&("length"==a||ze(a,o))||r.push(a);return r}function Te(e,t,r){var n=e[t];ee.call(e,t)&&We(n,r)&&(void 0!==r||t in e)||(e[t]=r)}function Ae(e,t){for(var r=e.length;r--;)if(We(e[r][0],t))return r;return-1}function Ie(e,t,r,n,o,i,a){var T;if(n&&(T=i?n(e,o,i,a):n(e)),void 0!==T)return T;if(!Je(e))return e;var A=Ye(e);if(A){if(T=function(e){var t=e.length,r=e.constructor(t);t&&"string"==typeof e[0]&&ee.call(e,"index")&&(r.index=e.index,r.input=e.input);return r}(e),!t)return function(e,t){var r=-1,n=e.length;t||(t=Array(n));for(;++r<n;)t[r]=e[r];return t}(e,T)}else{var R=Ge(e),L=R==c||R==f;if(Xe(e))return function(e,t){if(t)return e.slice();var r=new e.constructor(e.length);return e.copy(r),r}(e,t);if(R==d||R==s||L&&!i){if(V(e))return i?e:{};if(T=function(e){return"function"!=typeof e.constructor||Ue(e)?{}:(t=ae(e),Je(t)?se(t):{});var t}(L?{}:e),!t)return function(e,t){return Ne(e,Fe(e),t)}(e,function(e,t){return e&&Ne(t,Ze(t),e)}(T,e))}else{if(!I[R])return i?e:{};T=function(e,t,r,n){var o=e.constructor;switch(t){case b:return Le(e);case u:case l:return new o(+e);case w:return function(e,t){var r=t?Le(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}(e,n);case _:case x:case S:case O:case P:case E:case k:case M:case C:return function(e,t){var r=t?Le(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}(e,n);case h:return function(e,t,r){return U(t?r(W(e),!0):W(e),G,new e.constructor)}(e,n,r);case p:case g:return new o(e);case y:return(s=new(a=e).constructor(a.source,j.exec(a))).lastIndex=a.lastIndex,s;case v:return function(e,t,r){return U(t?r(H(e),!0):H(e),z,new e.constructor)}(e,n,r);case m:return i=e,Pe?Object(Pe.call(i)):{}}var i;var a,s}(e,R,Ie,t)}}a||(a=new Ce);var N=a.get(e);if(N)return N;if(a.set(e,T),!A)var D=r?function(e){return function(e,t,r){var n=t(e);return Ye(e)?n:function(e,t){for(var r=-1,n=t.length,o=e.length;++r<n;)e[o+r]=t[r];return e}(n,r(e))}(e,Ze,Fe)}(e):Ze(e);return function(e,t){for(var r=-1,n=e?e.length:0;++r<n&&!1!==t(e[r],r,e););}(D||e,function(o,i){D&&(o=e[i=o]),Te(T,i,Ie(o,t,r,n,i,e,a))}),T}function Re(e){return!(!Je(e)||Q&&Q in e)&&(qe(e)||V(e)?re:T).test(Ve(e))}function Le(e){var t=new e.constructor(e.byteLength);return new ie(t).set(new ie(e)),t}function Ne(e,t,r,n){r||(r={});for(var o=-1,i=t.length;++o<i;){var a=t[o],s=n?n(r[a],e[a],a,r,e):void 0;Te(r,a,void 0===s?e[a]:s)}return r}function De(e,t){var r,o,i=e.__data__;return("string"==(o=n(r=t))||"number"==o||"symbol"==o||"boolean"==o?"__proto__"!==r:null===r)?i["string"==typeof t?"string":"hash"]:i.map}function Be(e,t){var r=function(e,t){return null==e?void 0:e[t]}(e,t);return Re(r)?r:void 0}Ee.prototype.clear=function(){this.__data__=me?me(null):{}},Ee.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},Ee.prototype.get=function(e){var t=this.__data__;if(me){var r=t[e];return r===i?void 0:r}return ee.call(t,e)?t[e]:void 0},Ee.prototype.has=function(e){var t=this.__data__;return me?void 0!==t[e]:ee.call(t,e)},Ee.prototype.set=function(e,t){return this.__data__[e]=me&&void 0===t?i:t,this},ke.prototype.clear=function(){this.__data__=[]},ke.prototype.delete=function(e){var t=this.__data__,r=Ae(t,e);return!(r<0||(r==t.length-1?t.pop():le.call(t,r,1),0))},ke.prototype.get=function(e){var t=this.__data__,r=Ae(t,e);return r<0?void 0:t[r][1]},ke.prototype.has=function(e){return Ae(this.__data__,e)>-1},ke.prototype.set=function(e,t){var r=this.__data__,n=Ae(r,e);return n<0?r.push([e,t]):r[n][1]=t,this},Me.prototype.clear=function(){this.__data__={hash:new Ee,map:new(de||ke),string:new Ee}},Me.prototype.delete=function(e){return De(this,e).delete(e)},Me.prototype.get=function(e){return De(this,e).get(e)},Me.prototype.has=function(e){return De(this,e).has(e)},Me.prototype.set=function(e,t){return De(this,e).set(e,t),this},Ce.prototype.clear=function(){this.__data__=new ke},Ce.prototype.delete=function(e){return this.__data__.delete(e)},Ce.prototype.get=function(e){return this.__data__.get(e)},Ce.prototype.has=function(e){return this.__data__.has(e)},Ce.prototype.set=function(e,t){var r=this.__data__;if(r instanceof ke){var n=r.__data__;if(!de||n.length<o-1)return n.push([e,t]),this;r=this.__data__=new Me(n)}return r.set(e,t),this};var Fe=ce?Y(ce,Object):function(){return[]},Ge=function(e){return te.call(e)};function ze(e,t){return!!(t=null==t?a:t)&&("number"==typeof e||A.test(e))&&e>-1&&e%1==0&&e<t}function Ue(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Z)}function Ve(e){if(null!=e){try{return $.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function We(e,t){return e===t||e!=e&&t!=t}(pe&&Ge(new pe(new ArrayBuffer(1)))!=w||de&&Ge(new de)!=h||ye&&"[object Promise]"!=Ge(ye.resolve())||ve&&Ge(new ve)!=v||ge&&"[object WeakMap]"!=Ge(new ge))&&(Ge=function(e){var t=te.call(e),r=t==d?e.constructor:void 0,n=r?Ve(r):void 0;if(n)switch(n){case be:return w;case we:return h;case _e:return"[object Promise]";case xe:return v;case Se:return"[object WeakMap]"}return t});var Ye=Array.isArray;function He(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=a}(e.length)&&!qe(e)}var Xe=fe||function(){return!1};function qe(e){var t=Je(e)?te.call(e):"";return t==c||t==f}function Je(e){var t=n(e);return!!e&&("object"==t||"function"==t)}function Ze(e){return He(e)?je(e):function(e){if(!Ue(e))return he(e);var t=[];for(var r in Object(e))ee.call(e,r)&&"constructor"!=r&&t.push(r);return t}(e)}e.exports=function(e){return Ie(e,!0,!0)}},77820:function(e,t,r){function n(e){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o=9007199254740991,i="[object Arguments]",a="[object Function]",s="[object GeneratorFunction]",u="[object Map]",l="[object Set]",c=/^\[object .+?Constructor\]$/,f=/^(?:0|[1-9]\d*)$/,h="object"==(void 0===r.g?"undefined":n(r.g))&&r.g&&r.g.Object===Object&&r.g,p="object"==("undefined"==typeof self?"undefined":n(self))&&self&&self.Object===Object&&self,d=h||p||Function("return this")();function y(e,t){return function(e,t){for(var r=-1,n=e?e.length:0,o=Array(n);++r<n;)o[r]=t(e[r],r,e);return o}(t,function(t){return[t,e[t]]})}var v,g,m,b=Function.prototype,w=Object.prototype,_=d["__core-js_shared__"],x=(v=/[^.]+$/.exec(_&&_.keys&&_.keys.IE_PROTO||""))?"Symbol(src)_1."+v:"",S=b.toString,O=w.hasOwnProperty,P=w.toString,E=RegExp("^"+S.call(O).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),k=w.propertyIsEnumerable,M=(g=Object.keys,m=Object,function(e){return g(m(e))}),C=U(d,"DataView"),j=U(d,"Map"),T=U(d,"Promise"),A=U(d,"Set"),I=U(d,"WeakMap"),R=Y(C),L=Y(j),N=Y(T),D=Y(A),B=Y(I);function F(e,t){var r=H(e)||function(e){return function(e){return function(e){return!!e&&"object"==n(e)}(e)&&X(e)}(e)&&O.call(e,"callee")&&(!k.call(e,"callee")||P.call(e)==i)}(e)?function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}(e.length,String):[],o=r.length,a=!!o;for(var s in e)!t&&!O.call(e,s)||a&&("length"==s||W(s,o))||r.push(s);return r}function G(e){return!(!J(e)||x&&x in e)&&(q(e)||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}(e)?E:c).test(Y(e))}function z(e){if(r=(t=e)&&t.constructor,n="function"==typeof r&&r.prototype||w,t!==n)return M(e);var t,r,n,o=[];for(var i in Object(e))O.call(e,i)&&"constructor"!=i&&o.push(i);return o}function U(e,t){var r=function(e,t){return null==e?void 0:e[t]}(e,t);return G(r)?r:void 0}var V=function(e){return P.call(e)};function W(e,t){return!!(t=null==t?o:t)&&("number"==typeof e||f.test(e))&&e>-1&&e%1==0&&e<t}function Y(e){if(null!=e){try{return S.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(C&&"[object DataView]"!=V(new C(new ArrayBuffer(1)))||j&&V(new j)!=u||T&&"[object Promise]"!=V(T.resolve())||A&&V(new A)!=l||I&&"[object WeakMap]"!=V(new I))&&(V=function(e){var t=P.call(e),r="[object Object]"==t?e.constructor:void 0,n=r?Y(r):void 0;if(n)switch(n){case R:return"[object DataView]";case L:return u;case N:return"[object Promise]";case D:return l;case B:return"[object WeakMap]"}return t});var H=Array.isArray;function X(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=o}(e.length)&&!q(e)}function q(e){var t=J(e)?P.call(e):"";return t==a||t==s}function J(e){var t=n(e);return!!e&&("object"==t||"function"==t)}var Z,K=(Z=function(e){return X(e)?F(e):z(e)},function(e){var t,r,n,o=V(e);return o==u?(t=e,r=-1,n=Array(t.size),t.forEach(function(e,t){n[++r]=[t,e]}),n):o==l?function(e){var t=-1,r=Array(e.size);return e.forEach(function(e){r[++t]=[e,e]}),r}(e):y(e,Z(e))});e.exports=K},29819:function(e,t,r){function n(e){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e=r.nmd(e);var o=200,i="Expected a function",a="__lodash_hash_undefined__",s=1,u=2,l=1/0,c=9007199254740991,f="[object Arguments]",h="[object Array]",p="[object Boolean]",d="[object Date]",y="[object Error]",v="[object Function]",g="[object GeneratorFunction]",m="[object Map]",b="[object Number]",w="[object Object]",_="[object RegExp]",x="[object Set]",S="[object String]",O="[object Symbol]",P="[object ArrayBuffer]",E="[object DataView]",k=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,M=/^\w*$/,C=/^\./,j=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,T=/\\(\\)?/g,A=/^\[object .+?Constructor\]$/,I=/^(?:0|[1-9]\d*)$/,R={};R["[object Float32Array]"]=R["[object Float64Array]"]=R["[object Int8Array]"]=R["[object Int16Array]"]=R["[object Int32Array]"]=R["[object Uint8Array]"]=R["[object Uint8ClampedArray]"]=R["[object Uint16Array]"]=R["[object Uint32Array]"]=!0,R[f]=R[h]=R[P]=R[p]=R[E]=R[d]=R[y]=R[v]=R[m]=R[b]=R[w]=R[_]=R[x]=R[S]=R["[object WeakMap]"]=!1;var L="object"==(void 0===r.g?"undefined":n(r.g))&&r.g&&r.g.Object===Object&&r.g,N="object"==("undefined"==typeof self?"undefined":n(self))&&self&&self.Object===Object&&self,D=L||N||Function("return this")(),B="object"==n(t)&&t&&!t.nodeType&&t,F=B&&"object"==n(e)&&e&&!e.nodeType&&e,G=F&&F.exports===B&&L.process,z=function(){try{return G&&G.binding("util")}catch(e){}}(),U=z&&z.isTypedArray;function V(e,t){return!!(e?e.length:0)&&function(e,t,r){if(t!=t)return function(e,t,r,n){var o=e.length,i=r+(n?1:-1);for(;n?i--:++i<o;)if(t(e[i],i,e))return i;return-1}(e,H,r);var n=r-1,o=e.length;for(;++n<o;)if(e[n]===t)return n;return-1}(e,t,0)>-1}function W(e,t,r){for(var n=-1,o=e?e.length:0;++n<o;)if(r(t,e[n]))return!0;return!1}function Y(e,t){for(var r=-1,n=e?e.length:0;++r<n;)if(t(e[r],r,e))return!0;return!1}function H(e){return e!=e}function X(e,t){return e.has(t)}function q(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}function J(e){var t=-1,r=Array(e.size);return e.forEach(function(e,n){r[++t]=[n,e]}),r}function Z(e){var t=-1,r=Array(e.size);return e.forEach(function(e){r[++t]=e}),r}var K,Q,$,ee=Array.prototype,te=Function.prototype,re=Object.prototype,ne=D["__core-js_shared__"],oe=(K=/[^.]+$/.exec(ne&&ne.keys&&ne.keys.IE_PROTO||""))?"Symbol(src)_1."+K:"",ie=te.toString,ae=re.hasOwnProperty,se=re.toString,ue=RegExp("^"+ie.call(ae).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),le=D.Symbol,ce=D.Uint8Array,fe=re.propertyIsEnumerable,he=ee.splice,pe=(Q=Object.keys,$=Object,function(e){return Q($(e))}),de=Ye(D,"DataView"),ye=Ye(D,"Map"),ve=Ye(D,"Promise"),ge=Ye(D,"Set"),me=Ye(D,"WeakMap"),be=Ye(Object,"create"),we=$e(de),_e=$e(ye),xe=$e(ve),Se=$e(ge),Oe=$e(me),Pe=le?le.prototype:void 0,Ee=Pe?Pe.valueOf:void 0,ke=Pe?Pe.toString:void 0;function Me(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Ce(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function je(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Te(e){var t=-1,r=e?e.length:0;for(this.__data__=new je;++t<r;)this.add(e[t])}function Ae(e){this.__data__=new Ce(e)}function Ie(e,t){var r=nt(e)||rt(e)?function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}(e.length,String):[],n=r.length,o=!!n;for(var i in e)!t&&!ae.call(e,i)||o&&("length"==i||Xe(i,n))||r.push(i);return r}function Re(e,t){for(var r=e.length;r--;)if(tt(e[r][0],t))return r;return-1}function Le(e,t){for(var r=0,n=(t=qe(t,e)?[t]:ze(t)).length;null!=e&&r<n;)e=e[Qe(t[r++])];return r&&r==n?e:void 0}function Ne(e,t){return null!=e&&t in Object(e)}function De(e,t,r,n,o){return e===t||(null==e||null==t||!st(e)&&!ut(t)?e!=e&&t!=t:function(e,t,r,n,o,i){var a=nt(e),l=nt(t),c=h,v=h;a||(c=(c=He(e))==f?w:c);l||(v=(v=He(t))==f?w:v);var g=c==w&&!q(e),k=v==w&&!q(t),M=c==v;if(M&&!g)return i||(i=new Ae),a||ct(e)?Ve(e,t,r,n,o,i):function(e,t,r,n,o,i,a){switch(r){case E:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case P:return!(e.byteLength!=t.byteLength||!n(new ce(e),new ce(t)));case p:case d:case b:return tt(+e,+t);case y:return e.name==t.name&&e.message==t.message;case _:case S:return e==t+"";case m:var l=J;case x:var c=i&u;if(l||(l=Z),e.size!=t.size&&!c)return!1;var f=a.get(e);if(f)return f==t;i|=s,a.set(e,t);var h=Ve(l(e),l(t),n,o,i,a);return a.delete(e),h;case O:if(Ee)return Ee.call(e)==Ee.call(t)}return!1}(e,t,c,r,n,o,i);if(!(o&u)){var C=g&&ae.call(e,"__wrapped__"),j=k&&ae.call(t,"__wrapped__");if(C||j){var T=C?e.value():e,A=j?t.value():t;return i||(i=new Ae),r(T,A,n,o,i)}}if(!M)return!1;return i||(i=new Ae),function(e,t,r,n,o,i){var a=o&u,s=ft(e),l=s.length,c=ft(t).length;if(l!=c&&!a)return!1;for(var f=l;f--;){var h=s[f];if(!(a?h in t:ae.call(t,h)))return!1}var p=i.get(e);if(p&&i.get(t))return p==t;var d=!0;i.set(e,t),i.set(t,e);for(var y=a;++f<l;){h=s[f];var v=e[h],g=t[h];if(n)var m=a?n(g,v,h,t,e,i):n(v,g,h,e,t,i);if(!(void 0===m?v===g||r(v,g,n,o,i):m)){d=!1;break}y||(y="constructor"==h)}if(d&&!y){var b=e.constructor,w=t.constructor;b!=w&&"constructor"in e&&"constructor"in t&&!("function"==typeof b&&b instanceof b&&"function"==typeof w&&w instanceof w)&&(d=!1)}return i.delete(e),i.delete(t),d}(e,t,r,n,o,i)}(e,t,De,r,n,o))}function Be(e){return!(!st(e)||oe&&oe in e)&&(it(e)||q(e)?ue:A).test($e(e))}function Fe(e){return"function"==typeof e?e:null==e?ht:"object"==n(e)?nt(e)?function(e,t){if(qe(e)&&Je(t))return Ze(Qe(e),t);return function(r){var n=function(e,t,r){var n=null==e?void 0:Le(e,t);return void 0===n?r:n}(r,e);return void 0===n&&n===t?function(e,t){return null!=e&&function(e,t,r){var n,o=-1,i=(t=qe(t,e)?[t]:ze(t)).length;for(;++o<i;){var a=Qe(t[o]);if(!(n=null!=e&&r(e,a)))break;e=e[a]}if(n)return n;return!!(i=e?e.length:0)&&at(i)&&Xe(a,i)&&(nt(e)||rt(e))}(e,t,Ne)}(r,e):De(t,n,void 0,s|u)}}(e[0],e[1]):function(e){var t=function(e){var t=ft(e),r=t.length;for(;r--;){var n=t[r],o=e[n];t[r]=[n,o,Je(o)]}return t}(e);if(1==t.length&&t[0][2])return Ze(t[0][0],t[0][1]);return function(r){return r===e||function(e,t,r,n){var o=r.length,i=o,a=!n;if(null==e)return!i;for(e=Object(e);o--;){var l=r[o];if(a&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++o<i;){var c=(l=r[o])[0],f=e[c],h=l[1];if(a&&l[2]){if(void 0===f&&!(c in e))return!1}else{var p=new Ae;if(n)var d=n(f,h,c,e,t,p);if(!(void 0===d?De(h,f,n,s|u,p):d))return!1}}return!0}(r,e,t)}}(e):qe(t=e)?(r=Qe(t),function(e){return null==e?void 0:e[r]}):function(e){return function(t){return Le(t,e)}}(t);var t,r}function Ge(e){if(r=(t=e)&&t.constructor,n="function"==typeof r&&r.prototype||re,t!==n)return pe(e);var t,r,n,o=[];for(var i in Object(e))ae.call(e,i)&&"constructor"!=i&&o.push(i);return o}function ze(e){return nt(e)?e:Ke(e)}Me.prototype.clear=function(){this.__data__=be?be(null):{}},Me.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},Me.prototype.get=function(e){var t=this.__data__;if(be){var r=t[e];return r===a?void 0:r}return ae.call(t,e)?t[e]:void 0},Me.prototype.has=function(e){var t=this.__data__;return be?void 0!==t[e]:ae.call(t,e)},Me.prototype.set=function(e,t){return this.__data__[e]=be&&void 0===t?a:t,this},Ce.prototype.clear=function(){this.__data__=[]},Ce.prototype.delete=function(e){var t=this.__data__,r=Re(t,e);return!(r<0||(r==t.length-1?t.pop():he.call(t,r,1),0))},Ce.prototype.get=function(e){var t=this.__data__,r=Re(t,e);return r<0?void 0:t[r][1]},Ce.prototype.has=function(e){return Re(this.__data__,e)>-1},Ce.prototype.set=function(e,t){var r=this.__data__,n=Re(r,e);return n<0?r.push([e,t]):r[n][1]=t,this},je.prototype.clear=function(){this.__data__={hash:new Me,map:new(ye||Ce),string:new Me}},je.prototype.delete=function(e){return We(this,e).delete(e)},je.prototype.get=function(e){return We(this,e).get(e)},je.prototype.has=function(e){return We(this,e).has(e)},je.prototype.set=function(e,t){return We(this,e).set(e,t),this},Te.prototype.add=Te.prototype.push=function(e){return this.__data__.set(e,a),this},Te.prototype.has=function(e){return this.__data__.has(e)},Ae.prototype.clear=function(){this.__data__=new Ce},Ae.prototype.delete=function(e){return this.__data__.delete(e)},Ae.prototype.get=function(e){return this.__data__.get(e)},Ae.prototype.has=function(e){return this.__data__.has(e)},Ae.prototype.set=function(e,t){var r=this.__data__;if(r instanceof Ce){var n=r.__data__;if(!ye||n.length<o-1)return n.push([e,t]),this;r=this.__data__=new je(n)}return r.set(e,t),this};var Ue=ge&&1/Z(new ge([,-0]))[1]==l?function(e){return new ge(e)}:function(){};function Ve(e,t,r,n,o,i){var a=o&u,l=e.length,c=t.length;if(l!=c&&!(a&&c>l))return!1;var f=i.get(e);if(f&&i.get(t))return f==t;var h=-1,p=!0,d=o&s?new Te:void 0;for(i.set(e,t),i.set(t,e);++h<l;){var y=e[h],v=t[h];if(n)var g=a?n(v,y,h,t,e,i):n(y,v,h,e,t,i);if(void 0!==g){if(g)continue;p=!1;break}if(d){if(!Y(t,function(e,t){if(!d.has(t)&&(y===e||r(y,e,n,o,i)))return d.add(t)})){p=!1;break}}else if(y!==v&&!r(y,v,n,o,i)){p=!1;break}}return i.delete(e),i.delete(t),p}function We(e,t){var r,o,i=e.__data__;return("string"==(o=n(r=t))||"number"==o||"symbol"==o||"boolean"==o?"__proto__"!==r:null===r)?i["string"==typeof t?"string":"hash"]:i.map}function Ye(e,t){var r=function(e,t){return null==e?void 0:e[t]}(e,t);return Be(r)?r:void 0}var He=function(e){return se.call(e)};function Xe(e,t){return!!(t=null==t?c:t)&&("number"==typeof e||I.test(e))&&e>-1&&e%1==0&&e<t}function qe(e,t){if(nt(e))return!1;var r=n(e);return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!lt(e))||(M.test(e)||!k.test(e)||null!=t&&e in Object(t))}function Je(e){return e==e&&!st(e)}function Ze(e,t){return function(r){return null!=r&&(r[e]===t&&(void 0!==t||e in Object(r)))}}(de&&He(new de(new ArrayBuffer(1)))!=E||ye&&He(new ye)!=m||ve&&"[object Promise]"!=He(ve.resolve())||ge&&He(new ge)!=x||me&&"[object WeakMap]"!=He(new me))&&(He=function(e){var t=se.call(e),r=t==w?e.constructor:void 0,n=r?$e(r):void 0;if(n)switch(n){case we:return E;case _e:return m;case xe:return"[object Promise]";case Se:return x;case Oe:return"[object WeakMap]"}return t});var Ke=et(function(e){var t;e=null==(t=e)?"":function(e){if("string"==typeof e)return e;if(lt(e))return ke?ke.call(e):"";var t=e+"";return"0"==t&&1/e==-l?"-0":t}(t);var r=[];return C.test(e)&&r.push(""),e.replace(j,function(e,t,n,o){r.push(n?o.replace(T,"$1"):t||e)}),r});function Qe(e){if("string"==typeof e||lt(e))return e;var t=e+"";return"0"==t&&1/e==-l?"-0":t}function $e(e){if(null!=e){try{return ie.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function et(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw new TypeError(i);var r=function r(){var n=arguments,o=t?t.apply(this,n):n[0],i=r.cache;if(i.has(o))return i.get(o);var a=e.apply(this,n);return r.cache=i.set(o,a),a};return r.cache=new(et.Cache||je),r}function tt(e,t){return e===t||e!=e&&t!=t}function rt(e){return function(e){return ut(e)&&ot(e)}(e)&&ae.call(e,"callee")&&(!fe.call(e,"callee")||se.call(e)==f)}et.Cache=je;var nt=Array.isArray;function ot(e){return null!=e&&at(e.length)&&!it(e)}function it(e){var t=st(e)?se.call(e):"";return t==v||t==g}function at(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=c}function st(e){var t=n(e);return!!e&&("object"==t||"function"==t)}function ut(e){return!!e&&"object"==n(e)}function lt(e){return"symbol"==n(e)||ut(e)&&se.call(e)==O}var ct=U?function(e){return function(t){return e(t)}}(U):function(e){return ut(e)&&at(e.length)&&!!R[se.call(e)]};function ft(e){return ot(e)?Ie(e):Ge(e)}function ht(e){return e}e.exports=function(e,t){return e&&e.length?function(e,t,r){var n=-1,i=V,a=e.length,s=!0,u=[],l=u;if(r)s=!1,i=W;else if(a>=o){var c=t?null:Ue(e);if(c)return Z(c);s=!1,i=X,l=new Te}else l=t?[]:u;e:for(;++n<a;){var f=e[n],h=t?t(f):f;if(f=r||0!==f?f:0,s&&h==h){for(var p=l.length;p--;)if(l[p]===h)continue e;t&&l.push(h),u.push(f)}else i(l,h,r)||(l!==u&&l.push(h),u.push(f))}return u}(e,Fe(t)):[]}},80442:function(e,t,r){var n=r(91203).Symbol;e.exports=n},15244:function(e,t,r){var n=r(80442),o=r(64384),i=r(49671),a="[object Null]",s="[object Undefined]",u=n?n.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?s:a:u&&u in Object(e)?o(e):i(e)}},14323:function(e,t,r){var n=r(15244),o=r(80501),i=r(88223),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1,e.exports=function(e){return i(e)&&o(e.length)&&!!a[n(e)]}},19679:function(e){e.exports=function(e){return function(t){return e(t)}}},59747:function(e,t,r){function n(e){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o="object"==(void 0===r.g?"undefined":n(r.g))&&r.g&&r.g.Object===Object&&r.g;e.exports=o},72264:function(e,t,r){var n=r(71182)(Object.getPrototypeOf,Object);e.exports=n},64384:function(e,t,r){var n=r(80442),o=Object.prototype,i=o.hasOwnProperty,a=o.toString,s=n?n.toStringTag:void 0;e.exports=function(e){var t=i.call(e,s),r=e[s];try{e[s]=void 0;var n=!0}catch(e){}var o=a.call(e);return n&&(t?e[s]=r:delete e[s]),o}},35684:function(e,t,r){function n(e){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e=r.nmd(e);var o=r(59747),i="object"==n(t)&&t&&!t.nodeType&&t,a=i&&"object"==n(e)&&e&&!e.nodeType&&e,s=a&&a.exports===i&&o.process,u=function(){try{var e=a&&a.require&&a.require("util").types;return e||s&&s.binding&&s.binding("util")}catch(e){}}();e.exports=u},49671:function(e){var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},71182:function(e){e.exports=function(e,t){return function(r){return e(t(r))}}},91203:function(e,t,r){function n(e){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o=r(59747),i="object"==("undefined"==typeof self?"undefined":n(self))&&self&&self.Object===Object&&self,a=o||i||Function("return this")();e.exports=a},43936:function(e){var t=Array.isArray;e.exports=t},80501:function(e){var t=9007199254740991;e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=t}},39505:function(e,t,r){var n=r(15244),o=r(88223),i="[object Number]";e.exports=function(e){return"number"==typeof e||o(e)&&n(e)==i}},88223:function(e){function t(e){"@babel/helpers - typeof";return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e.exports=function(e){return null!=e&&"object"==t(e)}},4361:function(e,t,r){var n=r(15244),o=r(72264),i=r(88223),a="[object Object]",s=Function.prototype,u=Object.prototype,l=s.toString,c=u.hasOwnProperty,f=l.call(Object);e.exports=function(e){if(!i(e)||n(e)!=a)return!1;var t=o(e);if(null===t)return!0;var r=c.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&l.call(r)==f}},34587:function(e,t,r){var n=r(14323),o=r(19679),i=r(35684),a=i&&i.isTypedArray,s=a?o(a):n;e.exports=s},49860:function(e,t,r){"use strict";var n=r(88370);e.exports=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!n.isAnyArray(e))throw new TypeError("input must be an array");if(0===e.length)throw new TypeError("input must not be empty");var r=t.fromIndex,o=void 0===r?0:r,i=t.toIndex,a=void 0===i?e.length:i;if(o<0||o>=e.length||!Number.isInteger(o))throw new Error("fromIndex must be a positive integer smaller than length");if(a<=o||a>e.length||!Number.isInteger(a))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var s=e[o],u=o+1;u<a;u++)e[u]>s&&(s=e[u]);return s}},10617:function(e,t,r){"use strict";var n=r(88370);e.exports=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!n.isAnyArray(e))throw new TypeError("input must be an array");if(0===e.length)throw new TypeError("input must not be empty");var r=t.fromIndex,o=void 0===r?0:r,i=t.toIndex,a=void 0===i?e.length:i;if(o<0||o>=e.length||!Number.isInteger(o))throw new Error("fromIndex must be a positive integer smaller than length");if(a<=o||a>e.length||!Number.isInteger(a))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var s=e[o],u=o+1;u<a;u++)e[u]<s&&(s=e[u]);return s}},94202:function(e,t,r){"use strict";function n(e){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o=r(88370),i=r(49860),a=r(10617);function s(e){return e&&"object"===n(e)&&"default"in e?e:{default:e}}var u=s(i),l=s(a);e.exports=function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!o.isAnyArray(e))throw new TypeError("input must be an array");if(0===e.length)throw new TypeError("input must not be empty");if(void 0!==r.output){if(!o.isAnyArray(r.output))throw new TypeError("output option must be an array if specified");t=r.output}else t=new Array(e.length);var n=l.default(e),i=u.default(e);if(n===i)throw new RangeError("minimum and maximum input values are equal. Cannot rescale a constant array");var a=r.min,s=void 0===a?r.autoMinMax?n:0:a,c=r.max,f=void 0===c?r.autoMinMax?i:1:c;if(s>=f)throw new RangeError("min option must be smaller than max option");for(var h=(f-s)/(i-n),p=0;p<e.length;p++)t[p]=(e[p]-n)*h+s;return t}},92686:function(e,t,r){"use strict";function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&o(e,t)}function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function i(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=s(e);if(t){var o=s(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return a(this,r)}}function a(e,t){if(t&&("object"===f(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e,t,r){return t&&l(e.prototype,t),r&&l(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function f(e){"@babel/helpers - typeof";return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0});var h=r(88370);var p=function(e){return e&&"object"===f(e)&&"default"in e?e:{default:e}}(r(94202)),d=" ".repeat(2),y=" ".repeat(4);function v(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.maxRows,n=void 0===r?15:r,o=t.maxColumns,i=void 0===o?10:o,a=t.maxNumSize,s=void 0===a?8:a,u=t.padMinus,l=void 0===u?"auto":u;return"".concat(e.constructor.name," {\n").concat(d,"[\n").concat(y).concat(function(e,t,r,n,o){var i=e.rows,a=e.columns,s=Math.min(i,t),u=Math.min(a,r),l=[];if("auto"===o){o=!1;e:for(var c=0;c<s;c++)for(var f=0;f<u;f++)if(e.get(c,f)<0){o=!0;break e}}for(var h=0;h<s;h++){for(var p=[],d=0;d<u;d++)p.push(g(e.get(h,d),n,o));l.push("".concat(p.join(" ")))}u!==a&&(l[l.length-1]+=" ... ".concat(a-r," more columns"));s!==i&&l.push("... ".concat(i-t," more rows"));return l.join("\n".concat(y))}(e,n,i,s,l),"\n").concat(d,"]\n").concat(d,"rows: ").concat(e.rows,"\n").concat(d,"columns: ").concat(e.columns,"\n}")}function g(e,t,r){return(e>=0&&r?" ".concat(m(e,t-1)):m(e,t)).padEnd(t)}function m(e,t){var r=e.toString();if(r.length<=t)return r;var n=e.toFixed(t);if(n.length>t&&(n=e.toFixed(Math.max(0,t-(n.length-t)))),n.length<=t&&!n.startsWith("0.000")&&!n.startsWith("-0.000"))return n;var o=e.toExponential(t);return o.length>t&&(o=e.toExponential(Math.max(0,t-(o.length-t)))),o.slice(0)}function b(e,t,r){var n=r?e.rows:e.rows-1;if(t<0||t>n)throw new RangeError("Row index out of range")}function w(e,t,r){var n=r?e.columns:e.columns-1;if(t<0||t>n)throw new RangeError("Column index out of range")}function _(e,t){if(t.to1DArray&&(t=t.to1DArray()),t.length!==e.columns)throw new RangeError("vector size must be the same as the number of columns");return t}function x(e,t){if(t.to1DArray&&(t=t.to1DArray()),t.length!==e.rows)throw new RangeError("vector size must be the same as the number of rows");return t}function S(e,t){if(!h.isAnyArray(t))throw new TypeError("row indices must be an array");for(var r=0;r<t.length;r++)if(t[r]<0||t[r]>=e.rows)throw new RangeError("row indices are out of range")}function O(e,t){if(!h.isAnyArray(t))throw new TypeError("column indices must be an array");for(var r=0;r<t.length;r++)if(t[r]<0||t[r]>=e.columns)throw new RangeError("column indices are out of range")}function P(e,t,r,n,o){if(5!==arguments.length)throw new RangeError("expected 4 arguments");if(k("startRow",t),k("endRow",r),k("startColumn",n),k("endColumn",o),t>r||n>o||t<0||t>=e.rows||r<0||r>=e.rows||n<0||n>=e.columns||o<0||o>=e.columns)throw new RangeError("Submatrix indices are out of range")}function E(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=[],n=0;n<e;n++)r.push(t);return r}function k(e,t){if("number"!=typeof t)throw new TypeError("".concat(e," must be a number"))}function M(e){if(e.isEmpty())throw new Error("Empty matrix has no elements to index")}var C=function(){function e(){u(this,e)}return c(e,[{key:"size",get:function(){return this.rows*this.columns}},{key:"apply",value:function(e){if("function"!=typeof e)throw new TypeError("callback must be a function");for(var t=0;t<this.rows;t++)for(var r=0;r<this.columns;r++)e.call(this,t,r);return this}},{key:"to1DArray",value:function(){for(var e=[],t=0;t<this.rows;t++)for(var r=0;r<this.columns;r++)e.push(this.get(t,r));return e}},{key:"to2DArray",value:function(){for(var e=[],t=0;t<this.rows;t++){e.push([]);for(var r=0;r<this.columns;r++)e[t].push(this.get(t,r))}return e}},{key:"toJSON",value:function(){return this.to2DArray()}},{key:"isRowVector",value:function(){return 1===this.rows}},{key:"isColumnVector",value:function(){return 1===this.columns}},{key:"isVector",value:function(){return 1===this.rows||1===this.columns}},{key:"isSquare",value:function(){return this.rows===this.columns}},{key:"isEmpty",value:function(){return 0===this.rows||0===this.columns}},{key:"isSymmetric",value:function(){if(this.isSquare()){for(var e=0;e<this.rows;e++)for(var t=0;t<=e;t++)if(this.get(e,t)!==this.get(t,e))return!1;return!0}return!1}},{key:"isEchelonForm",value:function(){for(var e=0,t=0,r=-1,n=!0,o=!1;e<this.rows&&n;){for(t=0,o=!1;t<this.columns&&!1===o;)0===this.get(e,t)?t++:1===this.get(e,t)&&t>r?(o=!0,r=t):(n=!1,o=!0);e++}return n}},{key:"isReducedEchelonForm",value:function(){for(var e=0,t=0,r=-1,n=!0,o=!1;e<this.rows&&n;){for(t=0,o=!1;t<this.columns&&!1===o;)0===this.get(e,t)?t++:1===this.get(e,t)&&t>r?(o=!0,r=t):(n=!1,o=!0);for(var i=t+1;i<this.rows;i++)0!==this.get(e,i)&&(n=!1);e++}return n}},{key:"echelonForm",value:function(){for(var e=this.clone(),t=0,r=0;t<e.rows&&r<e.columns;){for(var n=t,o=t;o<e.rows;o++)e.get(o,r)>e.get(n,r)&&(n=o);if(0===e.get(n,r))r++;else{e.swapRows(t,n);for(var i=e.get(t,r),a=r;a<e.columns;a++)e.set(t,a,e.get(t,a)/i);for(var s=t+1;s<e.rows;s++){var u=e.get(s,r)/e.get(t,r);e.set(s,r,0);for(var l=r+1;l<e.columns;l++)e.set(s,l,e.get(s,l)-e.get(t,l)*u)}t++,r++}}return e}},{key:"reducedEchelonForm",value:function(){for(var e=this.echelonForm(),t=e.columns,r=e.rows,n=r-1;n>=0;)if(0===e.maxRow(n))n--;else{for(var o=0,i=!1;o<r&&!1===i;)1===e.get(n,o)?i=!0:o++;for(var a=0;a<n;a++)for(var s=e.get(a,o),u=o;u<t;u++){var l=e.get(a,u)-s*e.get(n,u);e.set(a,u,l)}n--}return e}},{key:"set",value:function(){throw new Error("set method is unimplemented")}},{key:"get",value:function(){throw new Error("get method is unimplemented")}},{key:"repeat",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("object"!==f(e))throw new TypeError("options must be an object");var t=e.rows,r=void 0===t?1:t,n=e.columns,o=void 0===n?1:n;if(!Number.isInteger(r)||r<=0)throw new TypeError("rows must be a positive integer");if(!Number.isInteger(o)||o<=0)throw new TypeError("columns must be a positive integer");for(var i=new T(this.rows*r,this.columns*o),a=0;a<r;a++)for(var s=0;s<o;s++)i.setSubMatrix(this,this.rows*a,this.columns*s);return i}},{key:"fill",value:function(e){for(var t=0;t<this.rows;t++)for(var r=0;r<this.columns;r++)this.set(t,r,e);return this}},{key:"neg",value:function(){return this.mulS(-1)}},{key:"getRow",value:function(e){b(this,e);for(var t=[],r=0;r<this.columns;r++)t.push(this.get(e,r));return t}},{key:"getRowVector",value:function(e){return T.rowVector(this.getRow(e))}},{key:"setRow",value:function(e,t){b(this,e),t=_(this,t);for(var r=0;r<this.columns;r++)this.set(e,r,t[r]);return this}},{key:"swapRows",value:function(e,t){b(this,e),b(this,t);for(var r=0;r<this.columns;r++){var n=this.get(e,r);this.set(e,r,this.get(t,r)),this.set(t,r,n)}return this}},{key:"getColumn",value:function(e){w(this,e);for(var t=[],r=0;r<this.rows;r++)t.push(this.get(r,e));return t}},{key:"getColumnVector",value:function(e){return T.columnVector(this.getColumn(e))}},{key:"setColumn",value:function(e,t){w(this,e),t=x(this,t);for(var r=0;r<this.rows;r++)this.set(r,e,t[r]);return this}},{key:"swapColumns",value:function(e,t){w(this,e),w(this,t);for(var r=0;r<this.rows;r++){var n=this.get(r,e);this.set(r,e,this.get(r,t)),this.set(r,t,n)}return this}},{key:"addRowVector",value:function(e){e=_(this,e);for(var t=0;t<this.rows;t++)for(var r=0;r<this.columns;r++)this.set(t,r,this.get(t,r)+e[r]);return this}},{key:"subRowVector",value:function(e){e=_(this,e);for(var t=0;t<this.rows;t++)for(var r=0;r<this.columns;r++)this.set(t,r,this.get(t,r)-e[r]);return this}},{key:"mulRowVector",value:function(e){e=_(this,e);for(var t=0;t<this.rows;t++)for(var r=0;r<this.columns;r++)this.set(t,r,this.get(t,r)*e[r]);return this}},{key:"divRowVector",value:function(e){e=_(this,e);for(var t=0;t<this.rows;t++)for(var r=0;r<this.columns;r++)this.set(t,r,this.get(t,r)/e[r]);return this}},{key:"addColumnVector",value:function(e){e=x(this,e);for(var t=0;t<this.rows;t++)for(var r=0;r<this.columns;r++)this.set(t,r,this.get(t,r)+e[t]);return this}},{key:"subColumnVector",value:function(e){e=x(this,e);for(var t=0;t<this.rows;t++)for(var r=0;r<this.columns;r++)this.set(t,r,this.get(t,r)-e[t]);return this}},{key:"mulColumnVector",value:function(e){e=x(this,e);for(var t=0;t<this.rows;t++)for(var r=0;r<this.columns;r++)this.set(t,r,this.get(t,r)*e[t]);return this}},{key:"divColumnVector",value:function(e){e=x(this,e);for(var t=0;t<this.rows;t++)for(var r=0;r<this.columns;r++)this.set(t,r,this.get(t,r)/e[t]);return this}},{key:"mulRow",value:function(e,t){b(this,e);for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)*t);return this}},{key:"mulColumn",value:function(e,t){w(this,e);for(var r=0;r<this.rows;r++)this.set(r,e,this.get(r,e)*t);return this}},{key:"max",value:function(e){if(this.isEmpty())return NaN;switch(e){case"row":for(var t=new Array(this.rows).fill(Number.NEGATIVE_INFINITY),r=0;r<this.rows;r++)for(var n=0;n<this.columns;n++)this.get(r,n)>t[r]&&(t[r]=this.get(r,n));return t;case"column":for(var o=new Array(this.columns).fill(Number.NEGATIVE_INFINITY),i=0;i<this.rows;i++)for(var a=0;a<this.columns;a++)this.get(i,a)>o[a]&&(o[a]=this.get(i,a));return o;case void 0:for(var s=this.get(0,0),u=0;u<this.rows;u++)for(var l=0;l<this.columns;l++)this.get(u,l)>s&&(s=this.get(u,l));return s;default:throw new Error("invalid option: ".concat(e))}}},{key:"maxIndex",value:function(){M(this);for(var e=this.get(0,0),t=[0,0],r=0;r<this.rows;r++)for(var n=0;n<this.columns;n++)this.get(r,n)>e&&(e=this.get(r,n),t[0]=r,t[1]=n);return t}},{key:"min",value:function(e){if(this.isEmpty())return NaN;switch(e){case"row":for(var t=new Array(this.rows).fill(Number.POSITIVE_INFINITY),r=0;r<this.rows;r++)for(var n=0;n<this.columns;n++)this.get(r,n)<t[r]&&(t[r]=this.get(r,n));return t;case"column":for(var o=new Array(this.columns).fill(Number.POSITIVE_INFINITY),i=0;i<this.rows;i++)for(var a=0;a<this.columns;a++)this.get(i,a)<o[a]&&(o[a]=this.get(i,a));return o;case void 0:for(var s=this.get(0,0),u=0;u<this.rows;u++)for(var l=0;l<this.columns;l++)this.get(u,l)<s&&(s=this.get(u,l));return s;default:throw new Error("invalid option: ".concat(e))}}},{key:"minIndex",value:function(){M(this);for(var e=this.get(0,0),t=[0,0],r=0;r<this.rows;r++)for(var n=0;n<this.columns;n++)this.get(r,n)<e&&(e=this.get(r,n),t[0]=r,t[1]=n);return t}},{key:"maxRow",value:function(e){if(b(this,e),this.isEmpty())return NaN;for(var t=this.get(e,0),r=1;r<this.columns;r++)this.get(e,r)>t&&(t=this.get(e,r));return t}},{key:"maxRowIndex",value:function(e){b(this,e),M(this);for(var t=this.get(e,0),r=[e,0],n=1;n<this.columns;n++)this.get(e,n)>t&&(t=this.get(e,n),r[1]=n);return r}},{key:"minRow",value:function(e){if(b(this,e),this.isEmpty())return NaN;for(var t=this.get(e,0),r=1;r<this.columns;r++)this.get(e,r)<t&&(t=this.get(e,r));return t}},{key:"minRowIndex",value:function(e){b(this,e),M(this);for(var t=this.get(e,0),r=[e,0],n=1;n<this.columns;n++)this.get(e,n)<t&&(t=this.get(e,n),r[1]=n);return r}},{key:"maxColumn",value:function(e){if(w(this,e),this.isEmpty())return NaN;for(var t=this.get(0,e),r=1;r<this.rows;r++)this.get(r,e)>t&&(t=this.get(r,e));return t}},{key:"maxColumnIndex",value:function(e){w(this,e),M(this);for(var t=this.get(0,e),r=[0,e],n=1;n<this.rows;n++)this.get(n,e)>t&&(t=this.get(n,e),r[0]=n);return r}},{key:"minColumn",value:function(e){if(w(this,e),this.isEmpty())return NaN;for(var t=this.get(0,e),r=1;r<this.rows;r++)this.get(r,e)<t&&(t=this.get(r,e));return t}},{key:"minColumnIndex",value:function(e){w(this,e),M(this);for(var t=this.get(0,e),r=[0,e],n=1;n<this.rows;n++)this.get(n,e)<t&&(t=this.get(n,e),r[0]=n);return r}},{key:"diag",value:function(){for(var e=Math.min(this.rows,this.columns),t=[],r=0;r<e;r++)t.push(this.get(r,r));return t}},{key:"norm",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"frobenius",t=0;if("max"===e)return this.max();if("frobenius"===e){for(var r=0;r<this.rows;r++)for(var n=0;n<this.columns;n++)t+=this.get(r,n)*this.get(r,n);return Math.sqrt(t)}throw new RangeError("unknown norm type: ".concat(e))}},{key:"cumulativeSum",value:function(){for(var e=0,t=0;t<this.rows;t++)for(var r=0;r<this.columns;r++)e+=this.get(t,r),this.set(t,r,e);return this}},{key:"dot",value:function(t){e.isMatrix(t)&&(t=t.to1DArray());var r=this.to1DArray();if(r.length!==t.length)throw new RangeError("vectors do not have the same size");for(var n=0,o=0;o<r.length;o++)n+=r[o]*t[o];return n}},{key:"mmul",value:function(e){e=T.checkMatrix(e);for(var t=this.rows,r=this.columns,n=e.columns,o=new T(t,n),i=new Float64Array(r),a=0;a<n;a++){for(var s=0;s<r;s++)i[s]=e.get(s,a);for(var u=0;u<t;u++){for(var l=0,c=0;c<r;c++)l+=this.get(u,c)*i[c];o.set(u,a,l)}}return o}},{key:"strassen2x2",value:function(e){e=T.checkMatrix(e);var t=new T(2,2),r=this.get(0,0),n=e.get(0,0),o=this.get(0,1),i=e.get(0,1),a=this.get(1,0),s=e.get(1,0),u=this.get(1,1),l=e.get(1,1),c=(r+u)*(n+l),f=(a+u)*n,h=r*(i-l),p=u*(s-n),d=(r+o)*l,y=c+p-d+(o-u)*(s+l),v=h+d,g=f+p,m=c-f+h+(a-r)*(n+i);return t.set(0,0,y),t.set(0,1,v),t.set(1,0,g),t.set(1,1,m),t}},{key:"strassen3x3",value:function(e){e=T.checkMatrix(e);var t=new T(3,3),r=this.get(0,0),n=this.get(0,1),o=this.get(0,2),i=this.get(1,0),a=this.get(1,1),s=this.get(1,2),u=this.get(2,0),l=this.get(2,1),c=this.get(2,2),f=e.get(0,0),h=e.get(0,1),p=e.get(0,2),d=e.get(1,0),y=e.get(1,1),v=e.get(1,2),g=e.get(2,0),m=e.get(2,1),b=e.get(2,2),w=(r-i)*(-h+y),_=(-r+i+a)*(f-h+y),x=(i+a)*(-f+h),S=r*f,O=(-r+u+l)*(f-p+v),P=(-r+u)*(p-v),E=(u+l)*(-f+p),k=(-o+l+c)*(y+g-m),M=(o-c)*(y-m),C=o*g,j=(l+c)*(-g+m),A=(-o+a+s)*(v+g-b),I=(o-s)*(v-b),R=(a+s)*(-g+b),L=S+C+n*d,N=(r+n+o-i-a-l-c)*y+_+x+S+k+C+j,D=S+O+E+(r+n+o-a-s-u-l)*v+C+A+R,B=w+a*(-f+h+d-y-v-g+b)+_+S+C+A+I,F=w+_+x+S+s*m,G=C+A+I+R+i*p,z=S+O+P+l*(-f+p+d-y-v-g+m)+k+M+C,U=k+M+C+j+u*h,V=S+O+P+E+c*b;return t.set(0,0,L),t.set(0,1,N),t.set(0,2,D),t.set(1,0,B),t.set(1,1,F),t.set(1,2,G),t.set(2,0,z),t.set(2,1,U),t.set(2,2,V),t}},{key:"mmulStrassen",value:function(t){t=T.checkMatrix(t);var r=this.clone(),n=r.rows,o=r.columns,i=t.rows,a=t.columns;function s(t,r,n){var o=t.rows,i=t.columns;if(o===r&&i===n)return t;var a=e.zeros(r,n);return a=a.setSubMatrix(t,0,0)}o!==i&&console.warn("Multiplying ".concat(n," x ").concat(o," and ").concat(i," x ").concat(a," matrix: dimensions do not match."));var u=Math.max(n,i),l=Math.max(o,a);return function t(r,n,o,i){if(o<=512||i<=512)return r.mmul(n);o%2==1&&i%2==1?(r=s(r,o+1,i+1),n=s(n,o+1,i+1)):o%2==1?(r=s(r,o+1,i),n=s(n,o+1,i)):i%2==1&&(r=s(r,o,i+1),n=s(n,o,i+1));var a=parseInt(r.rows/2,10),u=parseInt(r.columns/2,10),l=r.subMatrix(0,a-1,0,u-1),c=n.subMatrix(0,a-1,0,u-1),f=r.subMatrix(0,a-1,u,r.columns-1),h=n.subMatrix(0,a-1,u,n.columns-1),p=r.subMatrix(a,r.rows-1,0,u-1),d=n.subMatrix(a,n.rows-1,0,u-1),y=r.subMatrix(a,r.rows-1,u,r.columns-1),v=n.subMatrix(a,n.rows-1,u,n.columns-1),g=t(e.add(l,y),e.add(c,v),a,u),m=t(e.add(p,y),c,a,u),b=t(l,e.sub(h,v),a,u),w=t(y,e.sub(d,c),a,u),_=t(e.add(l,f),v,a,u),x=t(e.sub(p,l),e.add(c,h),a,u),S=t(e.sub(f,y),e.add(d,v),a,u),O=e.add(g,w);O.sub(_),O.add(S);var P=e.add(b,_),E=e.add(m,w),k=e.sub(g,m);k.add(b),k.add(x);var M=e.zeros(2*O.rows,2*O.columns);return(M=(M=(M=(M=M.setSubMatrix(O,0,0)).setSubMatrix(P,O.rows,0)).setSubMatrix(E,0,O.columns)).setSubMatrix(k,O.rows,O.columns)).subMatrix(0,o-1,0,i-1)}(r=s(r,u,l),t=s(t,u,l),u,l)}},{key:"scaleRows",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("object"!==f(e))throw new TypeError("options must be an object");var t=e.min,r=void 0===t?0:t,n=e.max,o=void 0===n?1:n;if(!Number.isFinite(r))throw new TypeError("min must be a number");if(!Number.isFinite(o))throw new TypeError("max must be a number");if(r>=o)throw new RangeError("min must be smaller than max");for(var i=new T(this.rows,this.columns),a=0;a<this.rows;a++){var s=this.getRow(a);s.length>0&&p.default(s,{min:r,max:o,output:s}),i.setRow(a,s)}return i}},{key:"scaleColumns",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("object"!==f(e))throw new TypeError("options must be an object");var t=e.min,r=void 0===t?0:t,n=e.max,o=void 0===n?1:n;if(!Number.isFinite(r))throw new TypeError("min must be a number");if(!Number.isFinite(o))throw new TypeError("max must be a number");if(r>=o)throw new RangeError("min must be smaller than max");for(var i=new T(this.rows,this.columns),a=0;a<this.columns;a++){var s=this.getColumn(a);s.length&&p.default(s,{min:r,max:o,output:s}),i.setColumn(a,s)}return i}},{key:"flipRows",value:function(){for(var e=Math.ceil(this.columns/2),t=0;t<this.rows;t++)for(var r=0;r<e;r++){var n=this.get(t,r),o=this.get(t,this.columns-1-r);this.set(t,r,o),this.set(t,this.columns-1-r,n)}return this}},{key:"flipColumns",value:function(){for(var e=Math.ceil(this.rows/2),t=0;t<this.columns;t++)for(var r=0;r<e;r++){var n=this.get(r,t),o=this.get(this.rows-1-r,t);this.set(r,t,o),this.set(this.rows-1-r,t,n)}return this}},{key:"kroneckerProduct",value:function(e){e=T.checkMatrix(e);for(var t=this.rows,r=this.columns,n=e.rows,o=e.columns,i=new T(t*n,r*o),a=0;a<t;a++)for(var s=0;s<r;s++)for(var u=0;u<n;u++)for(var l=0;l<o;l++)i.set(n*a+u,o*s+l,this.get(a,s)*e.get(u,l));return i}},{key:"kroneckerSum",value:function(e){if(e=T.checkMatrix(e),!this.isSquare()||!e.isSquare())throw new Error("Kronecker Sum needs two Square Matrices");var t=this.rows,r=e.rows,n=this.kroneckerProduct(T.eye(r,r)),o=T.eye(t,t).kroneckerProduct(e);return n.add(o)}},{key:"transpose",value:function(){for(var e=new T(this.columns,this.rows),t=0;t<this.rows;t++)for(var r=0;r<this.columns;r++)e.set(r,t,this.get(t,r));return e}},{key:"sortRows",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,t=0;t<this.rows;t++)this.setRow(t,this.getRow(t).sort(e));return this}},{key:"sortColumns",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,t=0;t<this.columns;t++)this.setColumn(t,this.getColumn(t).sort(e));return this}},{key:"subMatrix",value:function(e,t,r,n){P(this,e,t,r,n);for(var o=new T(t-e+1,n-r+1),i=e;i<=t;i++)for(var a=r;a<=n;a++)o.set(i-e,a-r,this.get(i,a));return o}},{key:"subMatrixRow",value:function(e,t,r){if(void 0===t&&(t=0),void 0===r&&(r=this.columns-1),t>r||t<0||t>=this.columns||r<0||r>=this.columns)throw new RangeError("Argument out of range");for(var n=new T(e.length,r-t+1),o=0;o<e.length;o++)for(var i=t;i<=r;i++){if(e[o]<0||e[o]>=this.rows)throw new RangeError("Row index out of range: ".concat(e[o]));n.set(o,i-t,this.get(e[o],i))}return n}},{key:"subMatrixColumn",value:function(e,t,r){if(void 0===t&&(t=0),void 0===r&&(r=this.rows-1),t>r||t<0||t>=this.rows||r<0||r>=this.rows)throw new RangeError("Argument out of range");for(var n=new T(r-t+1,e.length),o=0;o<e.length;o++)for(var i=t;i<=r;i++){if(e[o]<0||e[o]>=this.columns)throw new RangeError("Column index out of range: ".concat(e[o]));n.set(i-t,o,this.get(i,e[o]))}return n}},{key:"setSubMatrix",value:function(e,t,r){if((e=T.checkMatrix(e)).isEmpty())return this;P(this,t,t+e.rows-1,r,r+e.columns-1);for(var n=0;n<e.rows;n++)for(var o=0;o<e.columns;o++)this.set(t+n,r+o,e.get(n,o));return this}},{key:"selection",value:function(e,t){S(this,e),O(this,t);for(var r=new T(e.length,t.length),n=0;n<e.length;n++)for(var o=e[n],i=0;i<t.length;i++){var a=t[i];r.set(n,i,this.get(o,a))}return r}},{key:"trace",value:function(){for(var e=Math.min(this.rows,this.columns),t=0,r=0;r<e;r++)t+=this.get(r,r);return t}},{key:"clone",value:function(){for(var e=new T(this.rows,this.columns),t=0;t<this.rows;t++)for(var r=0;r<this.columns;r++)e.set(t,r,this.get(t,r));return e}},{key:"sum",value:function(e){switch(e){case"row":return function(e){for(var t=E(e.rows),r=0;r<e.rows;++r)for(var n=0;n<e.columns;++n)t[r]+=e.get(r,n);return t}(this);case"column":return function(e){for(var t=E(e.columns),r=0;r<e.rows;++r)for(var n=0;n<e.columns;++n)t[n]+=e.get(r,n);return t}(this);case void 0:return function(e){for(var t=0,r=0;r<e.rows;r++)for(var n=0;n<e.columns;n++)t+=e.get(r,n);return t}(this);default:throw new Error("invalid option: ".concat(e))}}},{key:"product",value:function(e){switch(e){case"row":return function(e){for(var t=E(e.rows,1),r=0;r<e.rows;++r)for(var n=0;n<e.columns;++n)t[r]*=e.get(r,n);return t}(this);case"column":return function(e){for(var t=E(e.columns,1),r=0;r<e.rows;++r)for(var n=0;n<e.columns;++n)t[n]*=e.get(r,n);return t}(this);case void 0:return function(e){for(var t=1,r=0;r<e.rows;r++)for(var n=0;n<e.columns;n++)t*=e.get(r,n);return t}(this);default:throw new Error("invalid option: ".concat(e))}}},{key:"mean",value:function(e){var t=this.sum(e);switch(e){case"row":for(var r=0;r<this.rows;r++)t[r]/=this.columns;return t;case"column":for(var n=0;n<this.columns;n++)t[n]/=this.rows;return t;case void 0:return t/this.size;default:throw new Error("invalid option: ".concat(e))}}},{key:"variance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"===f(e)&&(t=e,e=void 0),"object"!==f(t))throw new TypeError("options must be an object");var r=t,n=r.unbiased,o=void 0===n||n,i=r.mean,a=void 0===i?this.mean(e):i;if("boolean"!=typeof o)throw new TypeError("unbiased must be a boolean");switch(e){case"row":if(!h.isAnyArray(a))throw new TypeError("mean must be an array");return function(e,t,r){for(var n=e.rows,o=e.columns,i=[],a=0;a<n;a++){for(var s=0,u=0,l=0,c=0;c<o;c++)s+=l=e.get(a,c)-r[a],u+=l*l;t?i.push((u-s*s/o)/(o-1)):i.push((u-s*s/o)/o)}return i}(this,o,a);case"column":if(!h.isAnyArray(a))throw new TypeError("mean must be an array");return function(e,t,r){for(var n=e.rows,o=e.columns,i=[],a=0;a<o;a++){for(var s=0,u=0,l=0,c=0;c<n;c++)s+=l=e.get(c,a)-r[a],u+=l*l;t?i.push((u-s*s/n)/(n-1)):i.push((u-s*s/n)/n)}return i}(this,o,a);case void 0:if("number"!=typeof a)throw new TypeError("mean must be a number");return function(e,t,r){for(var n=e.rows,o=e.columns,i=n*o,a=0,s=0,u=0,l=0;l<n;l++)for(var c=0;c<o;c++)a+=u=e.get(l,c)-r,s+=u*u;return t?(s-a*a/i)/(i-1):(s-a*a/i)/i}(this,o,a);default:throw new Error("invalid option: ".concat(e))}}},{key:"standardDeviation",value:function(e,t){"object"===f(e)&&(t=e,e=void 0);var r=this.variance(e,t);if(void 0===e)return Math.sqrt(r);for(var n=0;n<r.length;n++)r[n]=Math.sqrt(r[n]);return r}},{key:"center",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"===f(e)&&(t=e,e=void 0),"object"!==f(t))throw new TypeError("options must be an object");var r=t.center,n=void 0===r?this.mean(e):r;switch(e){case"row":if(!h.isAnyArray(n))throw new TypeError("center must be an array");return function(e,t){for(var r=0;r<e.rows;r++)for(var n=0;n<e.columns;n++)e.set(r,n,e.get(r,n)-t[r])}(this,n),this;case"column":if(!h.isAnyArray(n))throw new TypeError("center must be an array");return function(e,t){for(var r=0;r<e.rows;r++)for(var n=0;n<e.columns;n++)e.set(r,n,e.get(r,n)-t[n])}(this,n),this;case void 0:if("number"!=typeof n)throw new TypeError("center must be a number");return function(e,t){for(var r=0;r<e.rows;r++)for(var n=0;n<e.columns;n++)e.set(r,n,e.get(r,n)-t)}(this,n),this;default:throw new Error("invalid option: ".concat(e))}}},{key:"scale",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"===f(e)&&(t=e,e=void 0),"object"!==f(t))throw new TypeError("options must be an object");var r=t.scale;switch(e){case"row":if(void 0===r)r=function(e){for(var t=[],r=0;r<e.rows;r++){for(var n=0,o=0;o<e.columns;o++)n+=Math.pow(e.get(r,o),2)/(e.columns-1);t.push(Math.sqrt(n))}return t}(this);else if(!h.isAnyArray(r))throw new TypeError("scale must be an array");return function(e,t){for(var r=0;r<e.rows;r++)for(var n=0;n<e.columns;n++)e.set(r,n,e.get(r,n)/t[r])}(this,r),this;case"column":if(void 0===r)r=function(e){for(var t=[],r=0;r<e.columns;r++){for(var n=0,o=0;o<e.rows;o++)n+=Math.pow(e.get(o,r),2)/(e.rows-1);t.push(Math.sqrt(n))}return t}(this);else if(!h.isAnyArray(r))throw new TypeError("scale must be an array");return function(e,t){for(var r=0;r<e.rows;r++)for(var n=0;n<e.columns;n++)e.set(r,n,e.get(r,n)/t[n])}(this,r),this;case void 0:if(void 0===r)r=function(e){for(var t=e.size-1,r=0,n=0;n<e.columns;n++)for(var o=0;o<e.rows;o++)r+=Math.pow(e.get(o,n),2)/t;return Math.sqrt(r)}(this);else if("number"!=typeof r)throw new TypeError("scale must be a number");return function(e,t){for(var r=0;r<e.rows;r++)for(var n=0;n<e.columns;n++)e.set(r,n,e.get(r,n)/t)}(this,r),this;default:throw new Error("invalid option: ".concat(e))}}},{key:"toString",value:function(e){return v(this,e)}}],[{key:"from1DArray",value:function(e,t,r){if(e*t!==r.length)throw new RangeError("data length does not match given dimensions");for(var n=new T(e,t),o=0;o<e;o++)for(var i=0;i<t;i++)n.set(o,i,r[o*t+i]);return n}},{key:"rowVector",value:function(e){for(var t=new T(1,e.length),r=0;r<e.length;r++)t.set(0,r,e[r]);return t}},{key:"columnVector",value:function(e){for(var t=new T(e.length,1),r=0;r<e.length;r++)t.set(r,0,e[r]);return t}},{key:"zeros",value:function(e,t){return new T(e,t)}},{key:"ones",value:function(e,t){return new T(e,t).fill(1)}},{key:"rand",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("object"!==f(r))throw new TypeError("options must be an object");for(var n=r.random,o=void 0===n?Math.random:n,i=new T(e,t),a=0;a<e;a++)for(var s=0;s<t;s++)i.set(a,s,o());return i}},{key:"randInt",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("object"!==f(r))throw new TypeError("options must be an object");var n=r.min,o=void 0===n?0:n,i=r.max,a=void 0===i?1e3:i,s=r.random,u=void 0===s?Math.random:s;if(!Number.isInteger(o))throw new TypeError("min must be an integer");if(!Number.isInteger(a))throw new TypeError("max must be an integer");if(o>=a)throw new RangeError("min must be smaller than max");for(var l=a-o,c=new T(e,t),h=0;h<e;h++)for(var p=0;p<t;p++){var d=o+Math.round(u()*l);c.set(h,p,d)}return c}},{key:"eye",value:function(e,t,r){void 0===t&&(t=e),void 0===r&&(r=1);for(var n=Math.min(e,t),o=this.zeros(e,t),i=0;i<n;i++)o.set(i,i,r);return o}},{key:"diag",value:function(e,t,r){var n=e.length;void 0===t&&(t=n),void 0===r&&(r=t);for(var o=Math.min(n,t,r),i=this.zeros(t,r),a=0;a<o;a++)i.set(a,a,e[a]);return i}},{key:"min",value:function(e,t){e=this.checkMatrix(e),t=this.checkMatrix(t);for(var r=e.rows,n=e.columns,o=new T(r,n),i=0;i<r;i++)for(var a=0;a<n;a++)o.set(i,a,Math.min(e.get(i,a),t.get(i,a)));return o}},{key:"max",value:function(e,t){e=this.checkMatrix(e),t=this.checkMatrix(t);for(var r=e.rows,n=e.columns,o=new this(r,n),i=0;i<r;i++)for(var a=0;a<n;a++)o.set(i,a,Math.max(e.get(i,a),t.get(i,a)));return o}},{key:"checkMatrix",value:function(t){return e.isMatrix(t)?t:new T(t)}},{key:"isMatrix",value:function(e){return null!=e&&"Matrix"===e.klass}}]),e}();function j(e,t){return e-t}C.prototype.klass="Matrix","undefined"!=typeof Symbol&&(C.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return v(this)}),C.random=C.rand,C.randomInt=C.randInt,C.diagonal=C.diag,C.prototype.diagonal=C.prototype.diag,C.identity=C.eye,C.prototype.negate=C.prototype.neg,C.prototype.tensorProduct=C.prototype.kroneckerProduct;var T=function(e){n(r,C);var t=i(r);function r(e,n){var o;if(u(this,r),o=t.call(this),r.isMatrix(e))return a(o,e.clone());if(Number.isInteger(e)&&e>=0){if(o.data=[],!(Number.isInteger(n)&&n>=0))throw new TypeError("nColumns must be a positive integer");for(var i=0;i<e;i++)o.data.push(new Float64Array(n))}else{if(!h.isAnyArray(e))throw new TypeError("First argument must be a positive number or an array");var s=e;if("number"!=typeof(n=(e=s.length)?s[0].length:0))throw new TypeError("Data must be a 2D array with at least one element");o.data=[];for(var l=0;l<e;l++){if(s[l].length!==n)throw new RangeError("Inconsistent array dimensions");if(!s[l].every(function(e){return"number"==typeof e}))throw new TypeError("Input data contains non-numeric values");o.data.push(Float64Array.from(s[l]))}}return o.rows=e,o.columns=n,o}return c(r,[{key:"set",value:function(e,t,r){return this.data[e][t]=r,this}},{key:"get",value:function(e,t){return this.data[e][t]}},{key:"removeRow",value:function(e){return b(this,e),this.data.splice(e,1),this.rows-=1,this}},{key:"addRow",value:function(e,t){return void 0===t&&(t=e,e=this.rows),b(this,e,!0),t=Float64Array.from(_(this,t)),this.data.splice(e,0,t),this.rows+=1,this}},{key:"removeColumn",value:function(e){w(this,e);for(var t=0;t<this.rows;t++){for(var r=new Float64Array(this.columns-1),n=0;n<e;n++)r[n]=this.data[t][n];for(var o=e+1;o<this.columns;o++)r[o-1]=this.data[t][o];this.data[t]=r}return this.columns-=1,this}},{key:"addColumn",value:function(e,t){void 0===t&&(t=e,e=this.columns),w(this,e,!0),t=x(this,t);for(var r=0;r<this.rows;r++){for(var n=new Float64Array(this.columns+1),o=0;o<e;o++)n[o]=this.data[r][o];for(n[o++]=t[r];o<this.columns+1;o++)n[o]=this.data[r][o-1];this.data[r]=n}return this.columns+=1,this}}]),r}();!function(e,t){e.prototype.add=function(e){return"number"==typeof e?this.addS(e):this.addM(e)},e.prototype.addS=function(e){for(var t=0;t<this.rows;t++)for(var r=0;r<this.columns;r++)this.set(t,r,this.get(t,r)+e);return this},e.prototype.addM=function(e){if(e=t.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw new RangeError("Matrices dimensions must be equal");for(var r=0;r<this.rows;r++)for(var n=0;n<this.columns;n++)this.set(r,n,this.get(r,n)+e.get(r,n));return this},e.add=function(e,r){return new t(e).add(r)},e.prototype.sub=function(e){return"number"==typeof e?this.subS(e):this.subM(e)},e.prototype.subS=function(e){for(var t=0;t<this.rows;t++)for(var r=0;r<this.columns;r++)this.set(t,r,this.get(t,r)-e);return this},e.prototype.subM=function(e){if(e=t.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw new RangeError("Matrices dimensions must be equal");for(var r=0;r<this.rows;r++)for(var n=0;n<this.columns;n++)this.set(r,n,this.get(r,n)-e.get(r,n));return this},e.sub=function(e,r){return new t(e).sub(r)},e.prototype.subtract=e.prototype.sub,e.prototype.subtractS=e.prototype.subS,e.prototype.subtractM=e.prototype.subM,e.subtract=e.sub,e.prototype.mul=function(e){return"number"==typeof e?this.mulS(e):this.mulM(e)},e.prototype.mulS=function(e){for(var t=0;t<this.rows;t++)for(var r=0;r<this.columns;r++)this.set(t,r,this.get(t,r)*e);return this},e.prototype.mulM=function(e){if(e=t.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw new RangeError("Matrices dimensions must be equal");for(var r=0;r<this.rows;r++)for(var n=0;n<this.columns;n++)this.set(r,n,this.get(r,n)*e.get(r,n));return this},e.mul=function(e,r){return new t(e).mul(r)},e.prototype.multiply=e.prototype.mul,e.prototype.multiplyS=e.prototype.mulS,e.prototype.multiplyM=e.prototype.mulM,e.multiply=e.mul,e.prototype.div=function(e){return"number"==typeof e?this.divS(e):this.divM(e)},e.prototype.divS=function(e){for(var t=0;t<this.rows;t++)for(var r=0;r<this.columns;r++)this.set(t,r,this.get(t,r)/e);return this},e.prototype.divM=function(e){if(e=t.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw new RangeError("Matrices dimensions must be equal");for(var r=0;r<this.rows;r++)for(var n=0;n<this.columns;n++)this.set(r,n,this.get(r,n)/e.get(r,n));return this},e.div=function(e,r){return new t(e).div(r)},e.prototype.divide=e.prototype.div,e.prototype.divideS=e.prototype.divS,e.prototype.divideM=e.prototype.divM,e.divide=e.div,e.prototype.mod=function(e){return"number"==typeof e?this.modS(e):this.modM(e)},e.prototype.modS=function(e){for(var t=0;t<this.rows;t++)for(var r=0;r<this.columns;r++)this.set(t,r,this.get(t,r)%e);return this},e.prototype.modM=function(e){if(e=t.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw new RangeError("Matrices dimensions must be equal");for(var r=0;r<this.rows;r++)for(var n=0;n<this.columns;n++)this.set(r,n,this.get(r,n)%e.get(r,n));return this},e.mod=function(e,r){return new t(e).mod(r)},e.prototype.modulus=e.prototype.mod,e.prototype.modulusS=e.prototype.modS,e.prototype.modulusM=e.prototype.modM,e.modulus=e.mod,e.prototype.and=function(e){return"number"==typeof e?this.andS(e):this.andM(e)},e.prototype.andS=function(e){for(var t=0;t<this.rows;t++)for(var r=0;r<this.columns;r++)this.set(t,r,this.get(t,r)&e);return this},e.prototype.andM=function(e){if(e=t.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw new RangeError("Matrices dimensions must be equal");for(var r=0;r<this.rows;r++)for(var n=0;n<this.columns;n++)this.set(r,n,this.get(r,n)&e.get(r,n));return this},e.and=function(e,r){return new t(e).and(r)},e.prototype.or=function(e){return"number"==typeof e?this.orS(e):this.orM(e)},e.prototype.orS=function(e){for(var t=0;t<this.rows;t++)for(var r=0;r<this.columns;r++)this.set(t,r,this.get(t,r)|e);return this},e.prototype.orM=function(e){if(e=t.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw new RangeError("Matrices dimensions must be equal");for(var r=0;r<this.rows;r++)for(var n=0;n<this.columns;n++)this.set(r,n,this.get(r,n)|e.get(r,n));return this},e.or=function(e,r){return new t(e).or(r)},e.prototype.xor=function(e){return"number"==typeof e?this.xorS(e):this.xorM(e)},e.prototype.xorS=function(e){for(var t=0;t<this.rows;t++)for(var r=0;r<this.columns;r++)this.set(t,r,this.get(t,r)^e);return this},e.prototype.xorM=function(e){if(e=t.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw new RangeError("Matrices dimensions must be equal");for(var r=0;r<this.rows;r++)for(var n=0;n<this.columns;n++)this.set(r,n,this.get(r,n)^e.get(r,n));return this},e.xor=function(e,r){return new t(e).xor(r)},e.prototype.leftShift=function(e){return"number"==typeof e?this.leftShiftS(e):this.leftShiftM(e)},e.prototype.leftShiftS=function(e){for(var t=0;t<this.rows;t++)for(var r=0;r<this.columns;r++)this.set(t,r,this.get(t,r)<<e);return this},e.prototype.leftShiftM=function(e){if(e=t.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw new RangeError("Matrices dimensions must be equal");for(var r=0;r<this.rows;r++)for(var n=0;n<this.columns;n++)this.set(r,n,this.get(r,n)<<e.get(r,n));return this},e.leftShift=function(e,r){return new t(e).leftShift(r)},e.prototype.signPropagatingRightShift=function(e){return"number"==typeof e?this.signPropagatingRightShiftS(e):this.signPropagatingRightShiftM(e)},e.prototype.signPropagatingRightShiftS=function(e){for(var t=0;t<this.rows;t++)for(var r=0;r<this.columns;r++)this.set(t,r,this.get(t,r)>>e);return this},e.prototype.signPropagatingRightShiftM=function(e){if(e=t.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw new RangeError("Matrices dimensions must be equal");for(var r=0;r<this.rows;r++)for(var n=0;n<this.columns;n++)this.set(r,n,this.get(r,n)>>e.get(r,n));return this},e.signPropagatingRightShift=function(e,r){return new t(e).signPropagatingRightShift(r)},e.prototype.rightShift=function(e){return"number"==typeof e?this.rightShiftS(e):this.rightShiftM(e)},e.prototype.rightShiftS=function(e){for(var t=0;t<this.rows;t++)for(var r=0;r<this.columns;r++)this.set(t,r,this.get(t,r)>>>e);return this},e.prototype.rightShiftM=function(e){if(e=t.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw new RangeError("Matrices dimensions must be equal");for(var r=0;r<this.rows;r++)for(var n=0;n<this.columns;n++)this.set(r,n,this.get(r,n)>>>e.get(r,n));return this},e.rightShift=function(e,r){return new t(e).rightShift(r)},e.prototype.zeroFillRightShift=e.prototype.rightShift,e.prototype.zeroFillRightShiftS=e.prototype.rightShiftS,e.prototype.zeroFillRightShiftM=e.prototype.rightShiftM,e.zeroFillRightShift=e.rightShift,e.prototype.not=function(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,~this.get(e,t));return this},e.not=function(e){return new t(e).not()},e.prototype.abs=function(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,Math.abs(this.get(e,t)));return this},e.abs=function(e){return new t(e).abs()},e.prototype.acos=function(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,Math.acos(this.get(e,t)));return this},e.acos=function(e){return new t(e).acos()},e.prototype.acosh=function(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,Math.acosh(this.get(e,t)));return this},e.acosh=function(e){return new t(e).acosh()},e.prototype.asin=function(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,Math.asin(this.get(e,t)));return this},e.asin=function(e){return new t(e).asin()},e.prototype.asinh=function(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,Math.asinh(this.get(e,t)));return this},e.asinh=function(e){return new t(e).asinh()},e.prototype.atan=function(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,Math.atan(this.get(e,t)));return this},e.atan=function(e){return new t(e).atan()},e.prototype.atanh=function(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,Math.atanh(this.get(e,t)));return this},e.atanh=function(e){return new t(e).atanh()},e.prototype.cbrt=function(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,Math.cbrt(this.get(e,t)));return this},e.cbrt=function(e){return new t(e).cbrt()},e.prototype.ceil=function(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,Math.ceil(this.get(e,t)));return this},e.ceil=function(e){return new t(e).ceil()},e.prototype.clz32=function(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,Math.clz32(this.get(e,t)));return this},e.clz32=function(e){return new t(e).clz32()},e.prototype.cos=function(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,Math.cos(this.get(e,t)));return this},e.cos=function(e){return new t(e).cos()},e.prototype.cosh=function(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,Math.cosh(this.get(e,t)));return this},e.cosh=function(e){return new t(e).cosh()},e.prototype.exp=function(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,Math.exp(this.get(e,t)));return this},e.exp=function(e){return new t(e).exp()},e.prototype.expm1=function(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,Math.expm1(this.get(e,t)));return this},e.expm1=function(e){return new t(e).expm1()},e.prototype.floor=function(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,Math.floor(this.get(e,t)));return this},e.floor=function(e){return new t(e).floor()},e.prototype.fround=function(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,Math.fround(this.get(e,t)));return this},e.fround=function(e){return new t(e).fround()},e.prototype.log=function(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,Math.log(this.get(e,t)));return this},e.log=function(e){return new t(e).log()},e.prototype.log1p=function(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,Math.log1p(this.get(e,t)));return this},e.log1p=function(e){return new t(e).log1p()},e.prototype.log10=function(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,Math.log10(this.get(e,t)));return this},e.log10=function(e){return new t(e).log10()},e.prototype.log2=function(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,Math.log2(this.get(e,t)));return this},e.log2=function(e){return new t(e).log2()},e.prototype.round=function(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,Math.round(this.get(e,t)));return this},e.round=function(e){return new t(e).round()},e.prototype.sign=function(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,Math.sign(this.get(e,t)));return this},e.sign=function(e){return new t(e).sign()},e.prototype.sin=function(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,Math.sin(this.get(e,t)));return this},e.sin=function(e){return new t(e).sin()},e.prototype.sinh=function(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,Math.sinh(this.get(e,t)));return this},e.sinh=function(e){return new t(e).sinh()},e.prototype.sqrt=function(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,Math.sqrt(this.get(e,t)));return this},e.sqrt=function(e){return new t(e).sqrt()},e.prototype.tan=function(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,Math.tan(this.get(e,t)));return this},e.tan=function(e){return new t(e).tan()},e.prototype.tanh=function(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,Math.tanh(this.get(e,t)));return this},e.tanh=function(e){return new t(e).tanh()},e.prototype.trunc=function(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,Math.trunc(this.get(e,t)));return this},e.trunc=function(e){return new t(e).trunc()},e.pow=function(e,r){return new t(e).pow(r)},e.prototype.pow=function(e){return"number"==typeof e?this.powS(e):this.powM(e)},e.prototype.powS=function(e){for(var t=0;t<this.rows;t++)for(var r=0;r<this.columns;r++)this.set(t,r,Math.pow(this.get(t,r),e));return this},e.prototype.powM=function(e){if(e=t.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw new RangeError("Matrices dimensions must be equal");for(var r=0;r<this.rows;r++)for(var n=0;n<this.columns;n++)this.set(r,n,Math.pow(this.get(r,n),e.get(r,n)));return this}}(C,T);var A=function(e){n(r,C);var t=i(r);function r(e,n,o){var i;return u(this,r),(i=t.call(this)).matrix=e,i.rows=n,i.columns=o,i}return c(r)}(),I=function(e){n(r,A);var t=i(r);function r(e,n){var o;return u(this,r),w(e,n),(o=t.call(this,e,e.rows,1)).column=n,o}return c(r,[{key:"set",value:function(e,t,r){return this.matrix.set(e,this.column,r),this}},{key:"get",value:function(e){return this.matrix.get(e,this.column)}}]),r}(),R=function(e){n(r,A);var t=i(r);function r(e,n){var o;return u(this,r),O(e,n),(o=t.call(this,e,e.rows,n.length)).columnIndices=n,o}return c(r,[{key:"set",value:function(e,t,r){return this.matrix.set(e,this.columnIndices[t],r),this}},{key:"get",value:function(e,t){return this.matrix.get(e,this.columnIndices[t])}}]),r}(),L=function(e){n(r,A);var t=i(r);function r(e){return u(this,r),t.call(this,e,e.rows,e.columns)}return c(r,[{key:"set",value:function(e,t,r){return this.matrix.set(e,this.columns-t-1,r),this}},{key:"get",value:function(e,t){return this.matrix.get(e,this.columns-t-1)}}]),r}(),N=function(e){n(r,A);var t=i(r);function r(e){return u(this,r),t.call(this,e,e.rows,e.columns)}return c(r,[{key:"set",value:function(e,t,r){return this.matrix.set(this.rows-e-1,t,r),this}},{key:"get",value:function(e,t){return this.matrix.get(this.rows-e-1,t)}}]),r}(),D=function(e){n(r,A);var t=i(r);function r(e,n){var o;return u(this,r),b(e,n),(o=t.call(this,e,1,e.columns)).row=n,o}return c(r,[{key:"set",value:function(e,t,r){return this.matrix.set(this.row,t,r),this}},{key:"get",value:function(e,t){return this.matrix.get(this.row,t)}}]),r}(),B=function(e){n(r,A);var t=i(r);function r(e,n){var o;return u(this,r),S(e,n),(o=t.call(this,e,n.length,e.columns)).rowIndices=n,o}return c(r,[{key:"set",value:function(e,t,r){return this.matrix.set(this.rowIndices[e],t,r),this}},{key:"get",value:function(e,t){return this.matrix.get(this.rowIndices[e],t)}}]),r}(),F=function(e){n(r,A);var t=i(r);function r(e,n,o){var i;return u(this,r),S(e,n),O(e,o),(i=t.call(this,e,n.length,o.length)).rowIndices=n,i.columnIndices=o,i}return c(r,[{key:"set",value:function(e,t,r){return this.matrix.set(this.rowIndices[e],this.columnIndices[t],r),this}},{key:"get",value:function(e,t){return this.matrix.get(this.rowIndices[e],this.columnIndices[t])}}]),r}(),G=function(e){n(r,A);var t=i(r);function r(e,n,o,i,a){var s;return u(this,r),P(e,n,o,i,a),(s=t.call(this,e,o-n+1,a-i+1)).startRow=n,s.startColumn=i,s}return c(r,[{key:"set",value:function(e,t,r){return this.matrix.set(this.startRow+e,this.startColumn+t,r),this}},{key:"get",value:function(e,t){return this.matrix.get(this.startRow+e,this.startColumn+t)}}]),r}(),z=function(e){n(r,A);var t=i(r);function r(e){return u(this,r),t.call(this,e,e.columns,e.rows)}return c(r,[{key:"set",value:function(e,t,r){return this.matrix.set(t,e,r),this}},{key:"get",value:function(e,t){return this.matrix.get(t,e)}}]),r}(),U=function(e){n(r,C);var t=i(r);function r(e){var n,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};u(this,r);var i=o.rows,a=void 0===i?1:i;if(e.length%a!=0)throw new Error("the data length is not divisible by the number of rows");return(n=t.call(this)).rows=a,n.columns=e.length/a,n.data=e,n}return c(r,[{key:"set",value:function(e,t,r){var n=this._calculateIndex(e,t);return this.data[n]=r,this}},{key:"get",value:function(e,t){var r=this._calculateIndex(e,t);return this.data[r]}},{key:"_calculateIndex",value:function(e,t){return e*this.columns+t}}]),r}(),V=function(e){n(r,C);var t=i(r);function r(e){var n;return u(this,r),(n=t.call(this)).data=e,n.rows=e.length,n.columns=e[0].length,n}return c(r,[{key:"set",value:function(e,t,r){return this.data[e][t]=r,this}},{key:"get",value:function(e,t){return this.data[e][t]}}]),r}();var W=function(){function e(t){u(this,e);var r,n,o,i,a,s,l,c,f,h=(t=V.checkMatrix(t)).clone(),p=h.rows,d=h.columns,y=new Float64Array(p),v=1;for(r=0;r<p;r++)y[r]=r;for(c=new Float64Array(p),n=0;n<d;n++){for(r=0;r<p;r++)c[r]=h.get(r,n);for(r=0;r<p;r++){for(f=Math.min(r,n),a=0,o=0;o<f;o++)a+=h.get(r,o)*c[o];c[r]-=a,h.set(r,n,c[r])}for(i=n,r=n+1;r<p;r++)Math.abs(c[r])>Math.abs(c[i])&&(i=r);if(i!==n){for(o=0;o<d;o++)s=h.get(i,o),h.set(i,o,h.get(n,o)),h.set(n,o,s);l=y[i],y[i]=y[n],y[n]=l,v=-v}if(n<p&&0!==h.get(n,n))for(r=n+1;r<p;r++)h.set(r,n,h.get(r,n)/h.get(n,n))}this.LU=h,this.pivotVector=y,this.pivotSign=v}return c(e,[{key:"isSingular",value:function(){for(var e=this.LU,t=e.columns,r=0;r<t;r++)if(0===e.get(r,r))return!0;return!1}},{key:"solve",value:function(e){e=T.checkMatrix(e);var t=this.LU;if(t.rows!==e.rows)throw new Error("Invalid matrix dimensions");if(this.isSingular())throw new Error("LU matrix is singular");var r,n,o,i=e.columns,a=e.subMatrixRow(this.pivotVector,0,i-1),s=t.columns;for(o=0;o<s;o++)for(r=o+1;r<s;r++)for(n=0;n<i;n++)a.set(r,n,a.get(r,n)-a.get(o,n)*t.get(r,o));for(o=s-1;o>=0;o--){for(n=0;n<i;n++)a.set(o,n,a.get(o,n)/t.get(o,o));for(r=0;r<o;r++)for(n=0;n<i;n++)a.set(r,n,a.get(r,n)-a.get(o,n)*t.get(r,o))}return a}},{key:"determinant",get:function(){var e=this.LU;if(!e.isSquare())throw new Error("Matrix must be square");for(var t=this.pivotSign,r=e.columns,n=0;n<r;n++)t*=e.get(n,n);return t}},{key:"lowerTriangularMatrix",get:function(){for(var e=this.LU,t=e.rows,r=e.columns,n=new T(t,r),o=0;o<t;o++)for(var i=0;i<r;i++)o>i?n.set(o,i,e.get(o,i)):o===i?n.set(o,i,1):n.set(o,i,0);return n}},{key:"upperTriangularMatrix",get:function(){for(var e=this.LU,t=e.rows,r=e.columns,n=new T(t,r),o=0;o<t;o++)for(var i=0;i<r;i++)o<=i?n.set(o,i,e.get(o,i)):n.set(o,i,0);return n}},{key:"pivotPermutationVector",get:function(){return Array.from(this.pivotVector)}}]),e}();function Y(e,t){var r=0;return Math.abs(e)>Math.abs(t)?(r=t/e,Math.abs(e)*Math.sqrt(1+r*r)):0!==t?(r=e/t,Math.abs(t)*Math.sqrt(1+r*r)):0}var H=function(){function e(t){u(this,e);var r,n,o,i,a=(t=V.checkMatrix(t)).clone(),s=t.rows,l=t.columns,c=new Float64Array(l);for(o=0;o<l;o++){var f=0;for(r=o;r<s;r++)f=Y(f,a.get(r,o));if(0!==f){for(a.get(o,o)<0&&(f=-f),r=o;r<s;r++)a.set(r,o,a.get(r,o)/f);for(a.set(o,o,a.get(o,o)+1),n=o+1;n<l;n++){for(i=0,r=o;r<s;r++)i+=a.get(r,o)*a.get(r,n);for(i=-i/a.get(o,o),r=o;r<s;r++)a.set(r,n,a.get(r,n)+i*a.get(r,o))}}c[o]=-f}this.QR=a,this.Rdiag=c}return c(e,[{key:"solve",value:function(e){e=T.checkMatrix(e);var t=this.QR,r=t.rows;if(e.rows!==r)throw new Error("Matrix row dimensions must agree");if(!this.isFullRank())throw new Error("Matrix is rank deficient");var n,o,i,a,s=e.columns,u=e.clone(),l=t.columns;for(i=0;i<l;i++)for(o=0;o<s;o++){for(a=0,n=i;n<r;n++)a+=t.get(n,i)*u.get(n,o);for(a=-a/t.get(i,i),n=i;n<r;n++)u.set(n,o,u.get(n,o)+a*t.get(n,i))}for(i=l-1;i>=0;i--){for(o=0;o<s;o++)u.set(i,o,u.get(i,o)/this.Rdiag[i]);for(n=0;n<i;n++)for(o=0;o<s;o++)u.set(n,o,u.get(n,o)-u.get(i,o)*t.get(n,i))}return u.subMatrix(0,l-1,0,s-1)}},{key:"isFullRank",value:function(){for(var e=this.QR.columns,t=0;t<e;t++)if(0===this.Rdiag[t])return!1;return!0}},{key:"upperTriangularMatrix",get:function(){var e,t,r=this.QR,n=r.columns,o=new T(n,n);for(e=0;e<n;e++)for(t=0;t<n;t++)e<t?o.set(e,t,r.get(e,t)):e===t?o.set(e,t,this.Rdiag[e]):o.set(e,t,0);return o}},{key:"orthogonalMatrix",get:function(){var e,t,r,n,o=this.QR,i=o.rows,a=o.columns,s=new T(i,a);for(r=a-1;r>=0;r--){for(e=0;e<i;e++)s.set(e,r,0);for(s.set(r,r,1),t=r;t<a;t++)if(0!==o.get(r,r)){for(n=0,e=r;e<i;e++)n+=o.get(e,r)*s.get(e,t);for(n=-n/o.get(r,r),e=r;e<i;e++)s.set(e,t,s.get(e,t)+n*o.get(e,r))}}return s}}]),e}(),X=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(u(this,e),(t=V.checkMatrix(t)).isEmpty())throw new Error("Matrix must be non-empty");var n,o=t.rows,i=t.columns,a=r.computeLeftSingularVectors,s=void 0===a||a,l=r.computeRightSingularVectors,c=void 0===l||l,f=r.autoTranspose,h=void 0!==f&&f,p=Boolean(s),d=Boolean(c),y=!1;if(o<i)if(h){o=(n=t.transpose()).rows,i=n.columns,y=!0;var v=p;p=d,d=v}else n=t.clone(),console.warn("Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose");else n=t.clone();for(var g=Math.min(o,i),m=Math.min(o+1,i),b=new Float64Array(m),w=new T(o,g),_=new T(i,i),x=new Float64Array(i),S=new Float64Array(o),O=new Float64Array(m),P=0;P<m;P++)O[P]=P;for(var E=Math.min(o-1,i),k=Math.max(0,Math.min(i-2,o)),M=Math.max(E,k),C=0;C<M;C++){if(C<E){b[C]=0;for(var j=C;j<o;j++)b[C]=Y(b[C],n.get(j,C));if(0!==b[C]){n.get(C,C)<0&&(b[C]=-b[C]);for(var A=C;A<o;A++)n.set(A,C,n.get(A,C)/b[C]);n.set(C,C,n.get(C,C)+1)}b[C]=-b[C]}for(var I=C+1;I<i;I++){if(C<E&&0!==b[C]){for(var R=0,L=C;L<o;L++)R+=n.get(L,C)*n.get(L,I);R=-R/n.get(C,C);for(var N=C;N<o;N++)n.set(N,I,n.get(N,I)+R*n.get(N,C))}x[I]=n.get(C,I)}if(p&&C<E)for(var D=C;D<o;D++)w.set(D,C,n.get(D,C));if(C<k){x[C]=0;for(var B=C+1;B<i;B++)x[C]=Y(x[C],x[B]);if(0!==x[C]){x[C+1]<0&&(x[C]=0-x[C]);for(var F=C+1;F<i;F++)x[F]/=x[C];x[C+1]+=1}if(x[C]=-x[C],C+1<o&&0!==x[C]){for(var G=C+1;G<o;G++)S[G]=0;for(var z=C+1;z<o;z++)for(var U=C+1;U<i;U++)S[z]+=x[U]*n.get(z,U);for(var W=C+1;W<i;W++)for(var H=-x[W]/x[C+1],X=C+1;X<o;X++)n.set(X,W,n.get(X,W)+H*S[X])}if(d)for(var q=C+1;q<i;q++)_.set(q,C,x[q])}}var J=Math.min(i,o+1);if(E<i&&(b[E]=n.get(E,E)),o<J&&(b[J-1]=0),k+1<J&&(x[k]=n.get(k,J-1)),x[J-1]=0,p){for(var Z=E;Z<g;Z++){for(var K=0;K<o;K++)w.set(K,Z,0);w.set(Z,Z,1)}for(var Q=E-1;Q>=0;Q--)if(0!==b[Q]){for(var $=Q+1;$<g;$++){for(var ee=0,te=Q;te<o;te++)ee+=w.get(te,Q)*w.get(te,$);ee=-ee/w.get(Q,Q);for(var re=Q;re<o;re++)w.set(re,$,w.get(re,$)+ee*w.get(re,Q))}for(var ne=Q;ne<o;ne++)w.set(ne,Q,-w.get(ne,Q));w.set(Q,Q,1+w.get(Q,Q));for(var oe=0;oe<Q-1;oe++)w.set(oe,Q,0)}else{for(var ie=0;ie<o;ie++)w.set(ie,Q,0);w.set(Q,Q,1)}}if(d)for(var ae=i-1;ae>=0;ae--){if(ae<k&&0!==x[ae])for(var se=ae+1;se<i;se++){for(var ue=0,le=ae+1;le<i;le++)ue+=_.get(le,ae)*_.get(le,se);ue=-ue/_.get(ae+1,ae);for(var ce=ae+1;ce<i;ce++)_.set(ce,se,_.get(ce,se)+ue*_.get(ce,ae))}for(var fe=0;fe<i;fe++)_.set(fe,ae,0);_.set(ae,ae,1)}for(var he=J-1,pe=Number.EPSILON;J>0;){var de=void 0,ye=void 0;for(de=J-2;de>=-1&&-1!==de;de--){var ve=Number.MIN_VALUE+pe*Math.abs(b[de]+Math.abs(b[de+1]));if(Math.abs(x[de])<=ve||Number.isNaN(x[de])){x[de]=0;break}}if(de===J-2)ye=4;else{var ge=void 0;for(ge=J-1;ge>=de&&ge!==de;ge--){var me=(ge!==J?Math.abs(x[ge]):0)+(ge!==de+1?Math.abs(x[ge-1]):0);if(Math.abs(b[ge])<=pe*me){b[ge]=0;break}}ge===de?ye=3:ge===J-1?ye=1:(ye=2,de=ge)}switch(de++,ye){case 1:var be=x[J-2];x[J-2]=0;for(var we=J-2;we>=de;we--){var _e=Y(b[we],be),xe=b[we]/_e,Se=be/_e;if(b[we]=_e,we!==de&&(be=-Se*x[we-1],x[we-1]=xe*x[we-1]),d)for(var Oe=0;Oe<i;Oe++)_e=xe*_.get(Oe,we)+Se*_.get(Oe,J-1),_.set(Oe,J-1,-Se*_.get(Oe,we)+xe*_.get(Oe,J-1)),_.set(Oe,we,_e)}break;case 2:var Pe=x[de-1];x[de-1]=0;for(var Ee=de;Ee<J;Ee++){var ke=Y(b[Ee],Pe),Me=b[Ee]/ke,Ce=Pe/ke;if(b[Ee]=ke,Pe=-Ce*x[Ee],x[Ee]=Me*x[Ee],p)for(var je=0;je<o;je++)ke=Me*w.get(je,Ee)+Ce*w.get(je,de-1),w.set(je,de-1,-Ce*w.get(je,Ee)+Me*w.get(je,de-1)),w.set(je,Ee,ke)}break;case 3:var Te=Math.max(Math.abs(b[J-1]),Math.abs(b[J-2]),Math.abs(x[J-2]),Math.abs(b[de]),Math.abs(x[de])),Ae=b[J-1]/Te,Ie=b[J-2]/Te,Re=x[J-2]/Te,Le=b[de]/Te,Ne=x[de]/Te,De=((Ie+Ae)*(Ie-Ae)+Re*Re)/2,Be=Ae*Re*(Ae*Re),Fe=0;0===De&&0===Be||(Fe=Be/(De+(Fe=De<0?0-Math.sqrt(De*De+Be):Math.sqrt(De*De+Be))));for(var Ge=(Le+Ae)*(Le-Ae)+Fe,ze=Le*Ne,Ue=de;Ue<J-1;Ue++){var Ve=Y(Ge,ze);0===Ve&&(Ve=Number.MIN_VALUE);var We=Ge/Ve,Ye=ze/Ve;if(Ue!==de&&(x[Ue-1]=Ve),Ge=We*b[Ue]+Ye*x[Ue],x[Ue]=We*x[Ue]-Ye*b[Ue],ze=Ye*b[Ue+1],b[Ue+1]=We*b[Ue+1],d)for(var He=0;He<i;He++)Ve=We*_.get(He,Ue)+Ye*_.get(He,Ue+1),_.set(He,Ue+1,-Ye*_.get(He,Ue)+We*_.get(He,Ue+1)),_.set(He,Ue,Ve);if(0===(Ve=Y(Ge,ze))&&(Ve=Number.MIN_VALUE),We=Ge/Ve,Ye=ze/Ve,b[Ue]=Ve,Ge=We*x[Ue]+Ye*b[Ue+1],b[Ue+1]=-Ye*x[Ue]+We*b[Ue+1],ze=Ye*x[Ue+1],x[Ue+1]=We*x[Ue+1],p&&Ue<o-1)for(var Xe=0;Xe<o;Xe++)Ve=We*w.get(Xe,Ue)+Ye*w.get(Xe,Ue+1),w.set(Xe,Ue+1,-Ye*w.get(Xe,Ue)+We*w.get(Xe,Ue+1)),w.set(Xe,Ue,Ve)}x[J-2]=Ge;break;case 4:if(b[de]<=0&&(b[de]=b[de]<0?-b[de]:0,d))for(var qe=0;qe<=he;qe++)_.set(qe,de,-_.get(qe,de));for(;de<he&&!(b[de]>=b[de+1]);){var Je=b[de];if(b[de]=b[de+1],b[de+1]=Je,d&&de<i-1)for(var Ze=0;Ze<i;Ze++)Je=_.get(Ze,de+1),_.set(Ze,de+1,_.get(Ze,de)),_.set(Ze,de,Je);if(p&&de<o-1)for(var Ke=0;Ke<o;Ke++)Je=w.get(Ke,de+1),w.set(Ke,de+1,w.get(Ke,de)),w.set(Ke,de,Je);de++}J--}}if(y){var Qe=_;_=w,w=Qe}this.m=o,this.n=i,this.s=b,this.U=w,this.V=_}return c(e,[{key:"solve",value:function(e){for(var t=e,r=this.threshold,n=this.s.length,o=T.zeros(n,n),i=0;i<n;i++)Math.abs(this.s[i])<=r?o.set(i,i,0):o.set(i,i,1/this.s[i]);for(var a=this.U,s=this.rightSingularVectors,u=s.mmul(o),l=s.rows,c=a.rows,f=T.zeros(l,c),h=0;h<l;h++)for(var p=0;p<c;p++){for(var d=0,y=0;y<n;y++)d+=u.get(h,y)*a.get(p,y);f.set(h,p,d)}return f.mmul(t)}},{key:"solveForDiagonal",value:function(e){return this.solve(T.diag(e))}},{key:"inverse",value:function(){for(var e=this.V,t=this.threshold,r=e.rows,n=e.columns,o=new T(r,this.s.length),i=0;i<r;i++)for(var a=0;a<n;a++)Math.abs(this.s[a])>t&&o.set(i,a,e.get(i,a)/this.s[a]);for(var s=this.U,u=s.rows,l=s.columns,c=new T(r,u),f=0;f<r;f++)for(var h=0;h<u;h++){for(var p=0,d=0;d<l;d++)p+=o.get(f,d)*s.get(h,d);c.set(f,h,p)}return c}},{key:"condition",get:function(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]}},{key:"norm2",get:function(){return this.s[0]}},{key:"rank",get:function(){for(var e=Math.max(this.m,this.n)*this.s[0]*Number.EPSILON,t=0,r=this.s,n=0,o=r.length;n<o;n++)r[n]>e&&t++;return t}},{key:"diagonal",get:function(){return Array.from(this.s)}},{key:"threshold",get:function(){return Number.EPSILON/2*Math.max(this.m,this.n)*this.s[0]}},{key:"leftSingularVectors",get:function(){return this.U}},{key:"rightSingularVectors",get:function(){return this.V}},{key:"diagonalMatrix",get:function(){return T.diag(this.s)}}]),e}();function q(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return e=V.checkMatrix(e),t=V.checkMatrix(t),r?new X(e).solve(t):e.isSquare()?new W(e).solve(t):new H(e).solve(t)}function J(e,t){for(var r=[],n=0;n<e;n++)n!==t&&r.push(n);return r}function Z(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e-9;if(e>(arguments.length>4&&void 0!==arguments[4]?arguments[4]:1e-9))return new Array(t.rows+1).fill(0);for(var o=t.addRow(r,[0]),i=0;i<o.rows;i++)Math.abs(o.get(i,0))<n&&o.set(i,0,0);return o.to1DArray()}var K=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};u(this,e);var n=r.assumeSymmetric,o=void 0!==n&&n;if(!(t=V.checkMatrix(t)).isSquare())throw new Error("Matrix is not a square matrix");if(t.isEmpty())throw new Error("Matrix must be non-empty");var i,a,s=t.columns,l=new T(s,s),c=new Float64Array(s),f=new Float64Array(s),h=t;if(!!o||t.isSymmetric()){for(i=0;i<s;i++)for(a=0;a<s;a++)l.set(i,a,h.get(i,a));!function(e,t,r,n){var o,i,a,s,u,l,c,f;for(u=0;u<e;u++)r[u]=n.get(e-1,u);for(s=e-1;s>0;s--){for(f=0,a=0,l=0;l<s;l++)f+=Math.abs(r[l]);if(0===f)for(t[s]=r[s-1],u=0;u<s;u++)r[u]=n.get(s-1,u),n.set(s,u,0),n.set(u,s,0);else{for(l=0;l<s;l++)r[l]/=f,a+=r[l]*r[l];for(o=r[s-1],i=Math.sqrt(a),o>0&&(i=-i),t[s]=f*i,a-=o*i,r[s-1]=o-i,u=0;u<s;u++)t[u]=0;for(u=0;u<s;u++){for(o=r[u],n.set(u,s,o),i=t[u]+n.get(u,u)*o,l=u+1;l<=s-1;l++)i+=n.get(l,u)*r[l],t[l]+=n.get(l,u)*o;t[u]=i}for(o=0,u=0;u<s;u++)t[u]/=a,o+=t[u]*r[u];for(c=o/(a+a),u=0;u<s;u++)t[u]-=c*r[u];for(u=0;u<s;u++){for(o=r[u],i=t[u],l=u;l<=s-1;l++)n.set(l,u,n.get(l,u)-(o*t[l]+i*r[l]));r[u]=n.get(s-1,u),n.set(s,u,0)}}r[s]=a}for(s=0;s<e-1;s++){if(n.set(e-1,s,n.get(s,s)),n.set(s,s,1),0!==(a=r[s+1])){for(l=0;l<=s;l++)r[l]=n.get(l,s+1)/a;for(u=0;u<=s;u++){for(i=0,l=0;l<=s;l++)i+=n.get(l,s+1)*n.get(l,u);for(l=0;l<=s;l++)n.set(l,u,n.get(l,u)-i*r[l])}}for(l=0;l<=s;l++)n.set(l,s+1,0)}for(u=0;u<e;u++)r[u]=n.get(e-1,u),n.set(e-1,u,0);n.set(e-1,e-1,1),t[0]=0}(s,f,c,l),function(e,t,r,n){var o,i,a,s,u,l,c,f,h,p,d,y,v,g,m,b;for(a=1;a<e;a++)t[a-1]=t[a];t[e-1]=0;var w=0,_=0,x=Number.EPSILON;for(l=0;l<e;l++){for(_=Math.max(_,Math.abs(r[l])+Math.abs(t[l])),c=l;c<e&&!(Math.abs(t[c])<=x*_);)c++;if(c>l)do{for(o=r[l],f=(r[l+1]-o)/(2*t[l]),h=Y(f,1),f<0&&(h=-h),r[l]=t[l]/(f+h),r[l+1]=t[l]*(f+h),p=r[l+1],i=o-r[l],a=l+2;a<e;a++)r[a]-=i;for(w+=i,f=r[c],y=d=1,v=d,g=t[l+1],m=0,b=0,a=c-1;a>=l;a--)for(v=y,y=d,b=m,o=d*t[a],i=d*f,h=Y(f,t[a]),t[a+1]=m*h,m=t[a]/h,f=(d=f/h)*r[a]-m*o,r[a+1]=i+m*(d*o+m*r[a]),u=0;u<e;u++)i=n.get(u,a+1),n.set(u,a+1,m*n.get(u,a)+d*i),n.set(u,a,d*n.get(u,a)-m*i);f=-m*b*v*g*t[l]/p,t[l]=m*f,r[l]=d*f}while(Math.abs(t[l])>x*_);r[l]=r[l]+w,t[l]=0}for(a=0;a<e-1;a++){for(u=a,f=r[a],s=a+1;s<e;s++)r[s]<f&&(u=s,f=r[s]);if(u!==a)for(r[u]=r[a],r[a]=f,s=0;s<e;s++)f=n.get(s,a),n.set(s,a,n.get(s,u)),n.set(s,u,f)}}(s,f,c,l)}else{var p=new T(s,s),d=new Float64Array(s);for(a=0;a<s;a++)for(i=0;i<s;i++)p.set(i,a,h.get(i,a));!function(e,t,r,n){var o,i,a,s,u,l,c,f=e-1;for(l=1;l<=f-1;l++){for(c=0,s=l;s<=f;s++)c+=Math.abs(t.get(s,l-1));if(0!==c){for(a=0,s=f;s>=l;s--)r[s]=t.get(s,l-1)/c,a+=r[s]*r[s];for(i=Math.sqrt(a),r[l]>0&&(i=-i),a-=r[l]*i,r[l]=r[l]-i,u=l;u<e;u++){for(o=0,s=f;s>=l;s--)o+=r[s]*t.get(s,u);for(o/=a,s=l;s<=f;s++)t.set(s,u,t.get(s,u)-o*r[s])}for(s=0;s<=f;s++){for(o=0,u=f;u>=l;u--)o+=r[u]*t.get(s,u);for(o/=a,u=l;u<=f;u++)t.set(s,u,t.get(s,u)-o*r[u])}r[l]=c*r[l],t.set(l,l-1,c*i)}}for(s=0;s<e;s++)for(u=0;u<e;u++)n.set(s,u,s===u?1:0);for(l=f-1;l>=1;l--)if(0!==t.get(l,l-1)){for(s=l+1;s<=f;s++)r[s]=t.get(s,l-1);for(u=l;u<=f;u++){for(i=0,s=l;s<=f;s++)i+=r[s]*n.get(s,u);for(i=i/r[l]/t.get(l,l-1),s=l;s<=f;s++)n.set(s,u,n.get(s,u)+i*r[s])}}}(s,p,d,l),function(e,t,r,n,o){var i,a,s,u,l,c,f,h,p,d,y,v,g,m,b,w=e-1,_=e-1,x=Number.EPSILON,S=0,O=0,P=0,E=0,k=0,M=0,C=0,j=0;for(i=0;i<e;i++)for((i<0||i>_)&&(r[i]=o.get(i,i),t[i]=0),a=Math.max(i-1,0);a<e;a++)O+=Math.abs(o.get(i,a));for(;w>=0;){for(u=w;u>0&&(0===(M=Math.abs(o.get(u-1,u-1))+Math.abs(o.get(u,u)))&&(M=O),!(Math.abs(o.get(u,u-1))<x*M));)u--;if(u===w)o.set(w,w,o.get(w,w)+S),r[w]=o.get(w,w),t[w]=0,w--,j=0;else if(u===w-1){if(f=o.get(w,w-1)*o.get(w-1,w),P=(o.get(w-1,w-1)-o.get(w,w))/2,E=P*P+f,C=Math.sqrt(Math.abs(E)),o.set(w,w,o.get(w,w)+S),o.set(w-1,w-1,o.get(w-1,w-1)+S),h=o.get(w,w),E>=0){for(C=P>=0?P+C:P-C,r[w-1]=h+C,r[w]=r[w-1],0!==C&&(r[w]=h-f/C),t[w-1]=0,t[w]=0,h=o.get(w,w-1),M=Math.abs(h)+Math.abs(C),P=h/M,E=C/M,k=Math.sqrt(P*P+E*E),P/=k,E/=k,a=w-1;a<e;a++)C=o.get(w-1,a),o.set(w-1,a,E*C+P*o.get(w,a)),o.set(w,a,E*o.get(w,a)-P*C);for(i=0;i<=w;i++)C=o.get(i,w-1),o.set(i,w-1,E*C+P*o.get(i,w)),o.set(i,w,E*o.get(i,w)-P*C);for(i=0;i<=_;i++)C=n.get(i,w-1),n.set(i,w-1,E*C+P*n.get(i,w)),n.set(i,w,E*n.get(i,w)-P*C)}else r[w-1]=h+P,r[w]=h+P,t[w-1]=C,t[w]=-C;w-=2,j=0}else{if(h=o.get(w,w),p=0,f=0,u<w&&(p=o.get(w-1,w-1),f=o.get(w,w-1)*o.get(w-1,w)),10===j){for(S+=h,i=0;i<=w;i++)o.set(i,i,o.get(i,i)-h);M=Math.abs(o.get(w,w-1))+Math.abs(o.get(w-1,w-2)),h=p=.75*M,f=-.4375*M*M}if(30===j&&(M=(M=(p-h)/2)*M+f)>0){for(M=Math.sqrt(M),p<h&&(M=-M),M=h-f/((p-h)/2+M),i=0;i<=w;i++)o.set(i,i,o.get(i,i)-M);S+=M,h=p=f=.964}for(j+=1,l=w-2;l>=u&&(C=o.get(l,l),P=((k=h-C)*(M=p-C)-f)/o.get(l+1,l)+o.get(l,l+1),E=o.get(l+1,l+1)-C-k-M,k=o.get(l+2,l+1),M=Math.abs(P)+Math.abs(E)+Math.abs(k),P/=M,E/=M,k/=M,l!==u)&&!(Math.abs(o.get(l,l-1))*(Math.abs(E)+Math.abs(k))<x*(Math.abs(P)*(Math.abs(o.get(l-1,l-1))+Math.abs(C)+Math.abs(o.get(l+1,l+1)))));)l--;for(i=l+2;i<=w;i++)o.set(i,i-2,0),i>l+2&&o.set(i,i-3,0);for(s=l;s<=w-1&&(m=s!==w-1,s!==l&&(P=o.get(s,s-1),E=o.get(s+1,s-1),k=m?o.get(s+2,s-1):0,0!==(h=Math.abs(P)+Math.abs(E)+Math.abs(k))&&(P/=h,E/=h,k/=h)),0!==h);s++)if(M=Math.sqrt(P*P+E*E+k*k),P<0&&(M=-M),0!==M){for(s!==l?o.set(s,s-1,-M*h):u!==l&&o.set(s,s-1,-o.get(s,s-1)),h=(P+=M)/M,p=E/M,C=k/M,E/=P,k/=P,a=s;a<e;a++)P=o.get(s,a)+E*o.get(s+1,a),m&&(P+=k*o.get(s+2,a),o.set(s+2,a,o.get(s+2,a)-P*C)),o.set(s,a,o.get(s,a)-P*h),o.set(s+1,a,o.get(s+1,a)-P*p);for(i=0;i<=Math.min(w,s+3);i++)P=h*o.get(i,s)+p*o.get(i,s+1),m&&(P+=C*o.get(i,s+2),o.set(i,s+2,o.get(i,s+2)-P*k)),o.set(i,s,o.get(i,s)-P),o.set(i,s+1,o.get(i,s+1)-P*E);for(i=0;i<=_;i++)P=h*n.get(i,s)+p*n.get(i,s+1),m&&(P+=C*n.get(i,s+2),n.set(i,s+2,n.get(i,s+2)-P*k)),n.set(i,s,n.get(i,s)-P),n.set(i,s+1,n.get(i,s+1)-P*E)}}}if(0===O)return;for(w=e-1;w>=0;w--)if(P=r[w],0===(E=t[w]))for(u=w,o.set(w,w,1),i=w-1;i>=0;i--){for(f=o.get(i,i)-P,k=0,a=u;a<=w;a++)k+=o.get(i,a)*o.get(a,w);if(t[i]<0)C=f,M=k;else if(u=i,0===t[i]?o.set(i,w,0!==f?-k/f:-k/(x*O)):(h=o.get(i,i+1),p=o.get(i+1,i),E=(r[i]-P)*(r[i]-P)+t[i]*t[i],c=(h*M-C*k)/E,o.set(i,w,c),o.set(i+1,w,Math.abs(h)>Math.abs(C)?(-k-f*c)/h:(-M-p*c)/C)),c=Math.abs(o.get(i,w)),x*c*c>1)for(a=i;a<=w;a++)o.set(a,w,o.get(a,w)/c)}else if(E<0)for(u=w-1,Math.abs(o.get(w,w-1))>Math.abs(o.get(w-1,w))?(o.set(w-1,w-1,E/o.get(w,w-1)),o.set(w-1,w,-(o.get(w,w)-P)/o.get(w,w-1))):(b=Q(0,-o.get(w-1,w),o.get(w-1,w-1)-P,E),o.set(w-1,w-1,b[0]),o.set(w-1,w,b[1])),o.set(w,w-1,0),o.set(w,w,1),i=w-2;i>=0;i--){for(d=0,y=0,a=u;a<=w;a++)d+=o.get(i,a)*o.get(a,w-1),y+=o.get(i,a)*o.get(a,w);if(f=o.get(i,i)-P,t[i]<0)C=f,k=d,M=y;else if(u=i,0===t[i]?(b=Q(-d,-y,f,E),o.set(i,w-1,b[0]),o.set(i,w,b[1])):(h=o.get(i,i+1),p=o.get(i+1,i),v=(r[i]-P)*(r[i]-P)+t[i]*t[i]-E*E,g=2*(r[i]-P)*E,0===v&&0===g&&(v=x*O*(Math.abs(f)+Math.abs(E)+Math.abs(h)+Math.abs(p)+Math.abs(C))),b=Q(h*k-C*d+E*y,h*M-C*y-E*d,v,g),o.set(i,w-1,b[0]),o.set(i,w,b[1]),Math.abs(h)>Math.abs(C)+Math.abs(E)?(o.set(i+1,w-1,(-d-f*o.get(i,w-1)+E*o.get(i,w))/h),o.set(i+1,w,(-y-f*o.get(i,w)-E*o.get(i,w-1))/h)):(b=Q(-k-p*o.get(i,w-1),-M-p*o.get(i,w),C,E),o.set(i+1,w-1,b[0]),o.set(i+1,w,b[1]))),c=Math.max(Math.abs(o.get(i,w-1)),Math.abs(o.get(i,w))),x*c*c>1)for(a=i;a<=w;a++)o.set(a,w-1,o.get(a,w-1)/c),o.set(a,w,o.get(a,w)/c)}for(i=0;i<e;i++)if(i<0||i>_)for(a=i;a<e;a++)n.set(i,a,o.get(i,a));for(a=e-1;a>=0;a--)for(i=0;i<=_;i++){for(C=0,s=0;s<=Math.min(a,_);s++)C+=n.get(i,s)*o.get(s,a);n.set(i,a,C)}}(s,f,c,l,p)}this.n=s,this.e=f,this.d=c,this.V=l}return c(e,[{key:"realEigenvalues",get:function(){return Array.from(this.d)}},{key:"imaginaryEigenvalues",get:function(){return Array.from(this.e)}},{key:"eigenvectorMatrix",get:function(){return this.V}},{key:"diagonalMatrix",get:function(){var e,t,r=this.n,n=this.e,o=this.d,i=new T(r,r);for(e=0;e<r;e++){for(t=0;t<r;t++)i.set(e,t,0);i.set(e,e,o[e]),n[e]>0?i.set(e,e+1,n[e]):n[e]<0&&i.set(e,e-1,n[e])}return i}}]),e}();function Q(e,t,r,n){var o,i;return Math.abs(r)>Math.abs(n)?[(e+(o=n/r)*t)/(i=r+o*n),(t-o*e)/i]:[((o=r/n)*e+t)/(i=n+o*r),(o*t-e)/i]}var $=function(){function e(t){if(u(this,e),!(t=V.checkMatrix(t)).isSymmetric())throw new Error("Matrix is not symmetric");var r,n,o,i=t,a=i.rows,s=new T(a,a),l=!0;for(n=0;n<a;n++){var c=0;for(o=0;o<n;o++){var f=0;for(r=0;r<o;r++)f+=s.get(o,r)*s.get(n,r);f=(i.get(n,o)-f)/s.get(o,o),s.set(n,o,f),c+=f*f}for(l&=(c=i.get(n,n)-c)>0,s.set(n,n,Math.sqrt(Math.max(c,0))),o=n+1;o<a;o++)s.set(n,o,0)}this.L=s,this.positiveDefinite=Boolean(l)}return c(e,[{key:"isPositiveDefinite",value:function(){return this.positiveDefinite}},{key:"solve",value:function(e){e=V.checkMatrix(e);var t=this.L,r=t.rows;if(e.rows!==r)throw new Error("Matrix dimensions do not match");if(!1===this.isPositiveDefinite())throw new Error("Matrix is not positive definite");var n,o,i,a=e.columns,s=e.clone();for(i=0;i<r;i++)for(o=0;o<a;o++){for(n=0;n<i;n++)s.set(i,o,s.get(i,o)-s.get(n,o)*t.get(i,n));s.set(i,o,s.get(i,o)/t.get(i,i))}for(i=r-1;i>=0;i--)for(o=0;o<a;o++){for(n=i+1;n<r;n++)s.set(i,o,s.get(i,o)-s.get(n,o)*t.get(n,i));s.set(i,o,s.get(i,o)/t.get(i,i))}return s}},{key:"lowerTriangularMatrix",get:function(){return this.L}}]),e}(),ee=c(function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};u(this,e),t=V.checkMatrix(t);var n,o=r.Y,i=r.scaleScores,a=void 0!==i&&i,s=r.maxIterations,l=void 0===s?1e3:s,c=r.terminationCriteria,f=void 0===c?1e-10:c;if(o){if((o=h.isAnyArray(o)&&"number"==typeof o[0]?T.columnVector(o):V.checkMatrix(o)).rows!==t.rows)throw new Error("Y should have the same number of rows as X");n=o.getColumnVector(0)}else n=t.getColumnVector(0);for(var p,d,y,v,g=1,m=0;m<l&&g>f;m++)y=(y=t.transpose().mmul(n).div(n.transpose().mmul(n).get(0,0))).div(y.norm()),p=t.mmul(y).div(y.transpose().mmul(y).get(0,0)),m>0&&(g=p.clone().sub(v).pow(2).sum()),v=p.clone(),o?(d=(d=o.transpose().mmul(p).div(p.transpose().mmul(p).get(0,0))).div(d.norm()),n=o.mmul(d).div(d.transpose().mmul(d).get(0,0))):n=p;if(o){var b=t.transpose().mmul(p).div(p.transpose().mmul(p).get(0,0));b=b.div(b.norm());var w=t.clone().sub(p.clone().mmul(b.transpose())),_=n.transpose().mmul(p).div(p.transpose().mmul(p).get(0,0)),x=o.clone().sub(p.clone().mulS(_.get(0,0)).mmul(d.transpose()));this.t=p,this.p=b.transpose(),this.w=y.transpose(),this.q=d,this.u=n,this.s=p.transpose().mmul(p),this.xResidual=w,this.yResidual=x,this.betas=_}else this.w=y.transpose(),this.s=p.transpose().mmul(p).sqrt(),this.t=a?p.clone().div(this.s.get(0,0)):p,this.xResidual=t.sub(p.mmul(y.transpose()))});t.AbstractMatrix=C,t.CHO=$,t.CholeskyDecomposition=$,t.EVD=K,t.EigenvalueDecomposition=K,t.LU=W,t.LuDecomposition=W,t.Matrix=T,t.MatrixColumnSelectionView=R,t.MatrixColumnView=I,t.MatrixFlipColumnView=L,t.MatrixFlipRowView=N,t.MatrixRowSelectionView=B,t.MatrixRowView=D,t.MatrixSelectionView=F,t.MatrixSubView=G,t.MatrixTransposeView=z,t.NIPALS=ee,t.Nipals=ee,t.QR=H,t.QrDecomposition=H,t.SVD=X,t.SingularValueDecomposition=X,t.WrapperMatrix1D=U,t.WrapperMatrix2D=V,t.correlation=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};e=new T(e);var n=!1;if("object"!==f(t)||T.isMatrix(t)||h.isAnyArray(t)?t=new T(t):(r=t,t=e,n=!0),e.rows!==t.rows)throw new TypeError("Both matrices must have the same number of rows");var o=r,i=o.center,a=void 0===i||i,s=o.scale,u=void 0===s||s;a&&(e.center("column"),n||t.center("column")),u&&(e.scale("column"),n||t.scale("column"));for(var l=e.standardDeviation("column",{unbiased:!0}),c=n?l:t.standardDeviation("column",{unbiased:!0}),p=e.transpose().mmul(t),d=0;d<p.rows;d++)for(var y=0;y<p.columns;y++)p.set(d,y,p.get(d,y)*(1/(l[d]*c[y]))*(1/(e.rows-1)));return p},t.covariance=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};e=new T(e);var n=!1;if("object"!==f(t)||T.isMatrix(t)||h.isAnyArray(t)?t=new T(t):(r=t,t=e,n=!0),e.rows!==t.rows)throw new TypeError("Both matrices must have the same number of rows");var o=r.center;(void 0===o||o)&&(e=e.center("column"),n||(t=t.center("column")));for(var i=e.transpose().mmul(t),a=0;a<i.rows;a++)for(var s=0;s<i.columns;s++)i.set(a,s,i.get(a,s)*(1/(e.rows-1)));return i},t.default=T,t.determinant=function e(t){if(!(t=T.checkMatrix(t)).isSquare())throw Error("determinant can only be calculated for a square matrix");return 0===t.columns?1:2===t.columns?(r=t.get(0,0),n=t.get(0,1),o=t.get(1,0),r*t.get(1,1)-n*o):3===t.columns?(i=new F(t,[1,2],[1,2]),a=new F(t,[1,2],[0,2]),s=new F(t,[1,2],[0,1]),r=t.get(0,0),n=t.get(0,1),o=t.get(0,2),r*e(i)-n*e(a)+o*e(s)):new W(t).determinant;var r,n,o,i,a,s},t.inverse=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e=V.checkMatrix(e),t?new X(e).inverse():q(e,T.eye(e.rows))},t.linearDependencies=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.thresholdValue,n=void 0===r?1e-9:r,o=t.thresholdError,i=void 0===o?1e-9:o,a=(e=T.checkMatrix(e)).rows,s=new T(a,a),u=0;u<a;u++){var l=T.columnVector(e.getRow(u)),c=e.subMatrixRow(J(a,u)).transpose(),f=new X(c).solve(l),h=T.sub(l,c.mmul(f)).abs().max();s.setRow(u,Z(h,f,u,n,i))}return s},t.pseudoInverse=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.EPSILON;if((e=T.checkMatrix(e)).isEmpty())return e.transpose();for(var r=new X(e,{autoTranspose:!0}),n=r.leftSingularVectors,o=r.rightSingularVectors,i=r.diagonal,a=0;a<i.length;a++)Math.abs(i[a])>t?i[a]=1/i[a]:i[a]=0;return o.mmul(T.diag(i).mmul(n.transpose()))},t.solve=q,t.wrap=function(e,t){if(h.isAnyArray(e))return e[0]&&h.isAnyArray(e[0])?new V(e):new U(e,t);throw new Error("the argument is not an array")}},19957:function(e,t,r){var n,o,i;function a(e){"@babel/helpers - typeof";return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}i=function(){"use strict";function e(e){var t=this.constructor;return this.then(function(r){return t.resolve(e()).then(function(){return r})},function(r){return t.resolve(e()).then(function(){return t.reject(r)})})}function t(e){return new this(function(t,r){if(!e||void 0===e.length)return r(new TypeError(a(e)+" "+e+" is not iterable(cannot read property Symbol(Symbol.iterator))"));var n=Array.prototype.slice.call(e);if(0===n.length)return t([]);var o=n.length;function i(e,r){if(r&&("object"===a(r)||"function"==typeof r)){var s=r.then;if("function"==typeof s)return void s.call(r,function(t){i(e,t)},function(r){n[e]={status:"rejected",reason:r},0==--o&&t(n)})}n[e]={status:"fulfilled",value:r},0==--o&&t(n)}for(var s=0;s<n.length;s++)i(s,n[s])})}var n=setTimeout;function o(e){return Boolean(e&&void 0!==e.length)}function i(){}function s(e){if(!(this instanceof s))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],h(e,this)}function u(e,t){for(;3===e._state;)e=e._value;0!==e._state?(e._handled=!0,s._immediateFn(function(){var r=1===e._state?t.onFulfilled:t.onRejected;if(null!==r){var n;try{n=r(e._value)}catch(e){return void c(t.promise,e)}l(t.promise,n)}else(1===e._state?l:c)(t.promise,e._value)})):e._deferreds.push(t)}function l(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"===a(t)||"function"==typeof t)){var r=t.then;if(t instanceof s)return e._state=3,e._value=t,void f(e);if("function"==typeof r)return void h((n=r,o=t,function(){n.apply(o,arguments)}),e)}e._state=1,e._value=t,f(e)}catch(t){c(e,t)}var n,o}function c(e,t){e._state=2,e._value=t,f(e)}function f(e){2===e._state&&0===e._deferreds.length&&s._immediateFn(function(){e._handled||s._unhandledRejectionFn(e._value)});for(var t=0,r=e._deferreds.length;t<r;t++)u(e,e._deferreds[t]);e._deferreds=null}function h(e,t){var r=!1;try{e(function(e){r||(r=!0,l(t,e))},function(e){r||(r=!0,c(t,e))})}catch(e){if(r)return;r=!0,c(t,e)}}s.prototype.catch=function(e){return this.then(null,e)},s.prototype.then=function(e,t){var r=new this.constructor(i);return u(this,new function(e,t,r){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=r}(e,t,r)),r},s.prototype.finally=e,s.all=function(e){return new s(function(t,r){if(!o(e))return r(new TypeError("Promise.all accepts an array"));var n=Array.prototype.slice.call(e);if(0===n.length)return t([]);var i=n.length;function s(e,o){try{if(o&&("object"===a(o)||"function"==typeof o)){var u=o.then;if("function"==typeof u)return void u.call(o,function(t){s(e,t)},r)}n[e]=o,0==--i&&t(n)}catch(e){r(e)}}for(var u=0;u<n.length;u++)s(u,n[u])})},s.allSettled=t,s.resolve=function(e){return e&&"object"===a(e)&&e.constructor===s?e:new s(function(t){t(e)})},s.reject=function(e){return new s(function(t,r){r(e)})},s.race=function(e){return new s(function(t,r){if(!o(e))return r(new TypeError("Promise.race accepts an array"));for(var n=0,i=e.length;n<i;n++)s.resolve(e[n]).then(t,r)})},s._immediateFn="function"==typeof setImmediate&&function(e){setImmediate(e)}||function(e){n(e,0)},s._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)};var p=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==r.g)return r.g;throw new Error("unable to locate global object")}();"function"!=typeof p.Promise?p.Promise=s:(p.Promise.prototype.finally||(p.Promise.prototype.finally=e),p.Promise.allSettled||(p.Promise.allSettled=t))},"object"===a(t)?i():void 0===(o="function"==typeof(n=i)?n.call(t,r,t,e):n)||(e.exports=o)},43861:function(e,t,r){"use strict";e.exports=o,e.exports.default=o;var n=r(44333);function o(e,t){if(!(this instanceof o))return new o(e,t);this._maxEntries=Math.max(4,e||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),t&&this._initFormat(t),this.clear()}function i(e,t,r){if(!r)return t.indexOf(e);for(var n=0;n<t.length;n++)if(r(e,t[n]))return n;return-1}function a(e,t){s(e,0,e.children.length,t,e)}function s(e,t,r,n,o){o||(o=y(null)),o.minX=1/0,o.minY=1/0,o.maxX=-1/0,o.maxY=-1/0;for(var i,a=t;a<r;a++)i=e.children[a],u(o,e.leaf?n(i):i);return o}function u(e,t){return e.minX=Math.min(e.minX,t.minX),e.minY=Math.min(e.minY,t.minY),e.maxX=Math.max(e.maxX,t.maxX),e.maxY=Math.max(e.maxY,t.maxY),e}function l(e,t){return e.minX-t.minX}function c(e,t){return e.minY-t.minY}function f(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function h(e){return e.maxX-e.minX+(e.maxY-e.minY)}function p(e,t){return e.minX<=t.minX&&e.minY<=t.minY&&t.maxX<=e.maxX&&t.maxY<=e.maxY}function d(e,t){return t.minX<=e.maxX&&t.minY<=e.maxY&&t.maxX>=e.minX&&t.maxY>=e.minY}function y(e){return{children:e,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function v(e,t,r,o,i){for(var a,s=[t,r];s.length;)(r=s.pop())-(t=s.pop())<=o||(a=t+Math.ceil((r-t)/o/2)*o,n(e,a,t,r,i),s.push(t,a,a,r))}o.prototype={all:function(){return this._all(this.data,[])},search:function(e){var t=this.data,r=[],n=this.toBBox;if(!d(e,t))return r;for(var o,i,a,s,u=[];t;){for(o=0,i=t.children.length;o<i;o++)a=t.children[o],d(e,s=t.leaf?n(a):a)&&(t.leaf?r.push(a):p(e,s)?this._all(a,r):u.push(a));t=u.pop()}return r},collides:function(e){var t=this.data,r=this.toBBox;if(!d(e,t))return!1;for(var n,o,i,a,s=[];t;){for(n=0,o=t.children.length;n<o;n++)if(i=t.children[n],d(e,a=t.leaf?r(i):i)){if(t.leaf||p(e,a))return!0;s.push(i)}t=s.pop()}return!1},load:function(e){if(!e||!e.length)return this;if(e.length<this._minEntries){for(var t=0,r=e.length;t<r;t++)this.insert(e[t]);return this}var n=this._build(e.slice(),0,e.length-1,0);if(this.data.children.length)if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){var o=this.data;this.data=n,n=o}this._insert(n,this.data.height-n.height-1,!0)}else this.data=n;return this},insert:function(e){return e&&this._insert(e,this.data.height-1),this},clear:function(){return this.data=y([]),this},remove:function(e,t){if(!e)return this;for(var r,n,o,a,s=this.data,u=this.toBBox(e),l=[],c=[];s||l.length;){if(s||(s=l.pop(),n=l[l.length-1],r=c.pop(),a=!0),s.leaf&&-1!==(o=i(e,s.children,t)))return s.children.splice(o,1),l.push(s),this._condense(l),this;a||s.leaf||!p(s,u)?n?(r++,s=n.children[r],a=!1):s=null:(l.push(s),c.push(r),r=0,n=s,s=s.children[0])}return this},toBBox:function(e){return e},compareMinX:l,compareMinY:c,toJSON:function(){return this.data},fromJSON:function(e){return this.data=e,this},_all:function(e,t){for(var r=[];e;)e.leaf?t.push.apply(t,e.children):r.push.apply(r,e.children),e=r.pop();return t},_build:function(e,t,r,n){var o,i=r-t+1,s=this._maxEntries;if(i<=s)return a(o=y(e.slice(t,r+1)),this.toBBox),o;n||(n=Math.ceil(Math.log(i)/Math.log(s)),s=Math.ceil(i/Math.pow(s,n-1))),(o=y([])).leaf=!1,o.height=n;var u,l,c,f,h=Math.ceil(i/s),p=h*Math.ceil(Math.sqrt(s));for(v(e,t,r,p,this.compareMinX),u=t;u<=r;u+=p)for(v(e,u,c=Math.min(u+p-1,r),h,this.compareMinY),l=u;l<=c;l+=h)f=Math.min(l+h-1,c),o.children.push(this._build(e,l,f,n-1));return a(o,this.toBBox),o},_chooseSubtree:function(e,t,r,n){for(var o,i,a,s,u,l,c,h,p,d;n.push(t),!t.leaf&&n.length-1!==r;){for(c=h=1/0,o=0,i=t.children.length;o<i;o++)u=f(a=t.children[o]),p=e,d=a,(l=(Math.max(d.maxX,p.maxX)-Math.min(d.minX,p.minX))*(Math.max(d.maxY,p.maxY)-Math.min(d.minY,p.minY))-u)<h?(h=l,c=u<c?u:c,s=a):l===h&&u<c&&(c=u,s=a);t=s||t.children[0]}return t},_insert:function(e,t,r){var n=this.toBBox,o=r?e:n(e),i=[],a=this._chooseSubtree(o,this.data,t,i);for(a.children.push(e),u(a,o);t>=0&&i[t].children.length>this._maxEntries;)this._split(i,t),t--;this._adjustParentBBoxes(o,i,t)},_split:function(e,t){var r=e[t],n=r.children.length,o=this._minEntries;this._chooseSplitAxis(r,o,n);var i=this._chooseSplitIndex(r,o,n),s=y(r.children.splice(i,r.children.length-i));s.height=r.height,s.leaf=r.leaf,a(r,this.toBBox),a(s,this.toBBox),t?e[t-1].children.push(s):this._splitRoot(r,s)},_splitRoot:function(e,t){this.data=y([e,t]),this.data.height=e.height+1,this.data.leaf=!1,a(this.data,this.toBBox)},_chooseSplitIndex:function(e,t,r){var n,o,i,a,u,l,c,h,p,d,y,v,g,m;for(l=c=1/0,n=t;n<=r-t;n++)o=s(e,0,n,this.toBBox),i=s(e,n,r,this.toBBox),p=o,d=i,void 0,void 0,void 0,void 0,y=Math.max(p.minX,d.minX),v=Math.max(p.minY,d.minY),g=Math.min(p.maxX,d.maxX),m=Math.min(p.maxY,d.maxY),a=Math.max(0,g-y)*Math.max(0,m-v),u=f(o)+f(i),a<l?(l=a,h=n,c=u<c?u:c):a===l&&u<c&&(c=u,h=n);return h},_chooseSplitAxis:function(e,t,r){var n=e.leaf?this.compareMinX:l,o=e.leaf?this.compareMinY:c;this._allDistMargin(e,t,r,n)<this._allDistMargin(e,t,r,o)&&e.children.sort(n)},_allDistMargin:function(e,t,r,n){e.children.sort(n);var o,i,a=this.toBBox,l=s(e,0,t,a),c=s(e,r-t,r,a),f=h(l)+h(c);for(o=t;o<r-t;o++)i=e.children[o],u(l,e.leaf?a(i):i),f+=h(l);for(o=r-t-1;o>=t;o--)i=e.children[o],u(c,e.leaf?a(i):i),f+=h(c);return f},_adjustParentBBoxes:function(e,t,r){for(var n=r;n>=0;n--)u(t[n],e)},_condense:function(e){for(var t,r=e.length-1;r>=0;r--)0===e[r].children.length?r>0?(t=e[r-1].children).splice(t.indexOf(e[r]),1):this.clear():a(e[r],this.toBBox)},_initFormat:function(e){var t=["return a"," - b",";"];this.compareMinX=new Function("a","b",t.join(e[0])),this.compareMinY=new Function("a","b",t.join(e[1])),this.toBBox=new Function("a","return {minX: a"+e[0]+", minY: a"+e[1]+", maxX: a"+e[2]+", maxY: a"+e[3]+"};")}}},44333:function(e,t,r){var n,o,i;function a(e){"@babel/helpers - typeof";return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}i=function(){"use strict";function e(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function t(e,t){return e<t?-1:e>t?1:0}return function(r,n,o,i,a){!function t(r,n,o,i,a){for(;i>o;){if(i-o>600){var s=i-o+1,u=n-o+1,l=Math.log(s),c=.5*Math.exp(2*l/3),f=.5*Math.sqrt(l*c*(s-c)/s)*(u-s/2<0?-1:1),h=Math.max(o,Math.floor(n-u*c/s+f)),p=Math.min(i,Math.floor(n+(s-u)*c/s+f));t(r,n,h,p,a)}var d=r[n],y=o,v=i;for(e(r,o,n),a(r[i],d)>0&&e(r,o,i);y<v;){for(e(r,y,v),y++,v--;a(r[y],d)<0;)y++;for(;a(r[v],d)>0;)v--}0===a(r[o],d)?e(r,o,v):e(r,++v,i),v<=n&&(o=v+1),n<=v&&(i=v-1)}}(r,n,o||0,i||r.length-1,a||t)}},"object"===a(t)?e.exports=i():void 0===(o="function"==typeof(n=i)?n.call(t,r,t,e):n)||(e.exports=o)},44934:function(e,t,r){var n,o,i;function a(e){"@babel/helpers - typeof";return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}i=function(){"use strict";var e=function(e){return e instanceof Uint8Array||e instanceof Uint16Array||e instanceof Uint32Array||e instanceof Int8Array||e instanceof Int16Array||e instanceof Int32Array||e instanceof Float32Array||e instanceof Float64Array||e instanceof Uint8ClampedArray},t=function(e,t){for(var r=Object.keys(t),n=0;n<r.length;++n)e[r[n]]=t[r[n]];return e},r="\n";function n(e){var t=new Error("(regl) "+e);throw console.error(t),t}function o(e,t){e||n(t)}function i(e){return e?": "+e:""}function s(e,t){switch(t){case"number":return"number"==typeof e;case"object":return"object"===a(e);case"string":return"string"==typeof e;case"boolean":return"boolean"==typeof e;case"function":return"function"==typeof e;case"undefined":return void 0===e;case"symbol":return"symbol"===a(e)}}function u(e,t,r){t.indexOf(e)<0&&n("invalid value"+i(r)+". must be one of: "+t)}var l=["gl","canvas","container","attributes","pixelRatio","extensions","optionalExtensions","profile","onDone"];function c(e,t){for(e+="";e.length<t;)e=" "+e;return e}function f(){this.name="unknown",this.lines=[],this.index={},this.hasErrors=!1}function h(e,t){this.number=e,this.line=t,this.errors=[]}function p(e,t,r){this.file=e,this.line=t,this.message=r}function d(){var e=new Error,t=(e.stack||e).toString(),r=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(t);if(r)return r[1];var n=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(t);return n?n[1]:"unknown"}function y(){var e=new Error,t=(e.stack||e).toString(),r=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(t);if(r)return r[1];var n=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(t);return n?n[1]:"unknown"}function v(e,t){var r,n=e.split("\n"),o=1,i=0,a={unknown:new f,0:new f};a.unknown.name=a[0].name=t||d(),a.unknown.lines.push(new h(0,""));for(var s=0;s<n.length;++s){var u=n[s],l=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(u);if(l)switch(l[1]){case"line":var c=/(\d+)(\s+\d+)?/.exec(l[2]);c&&(o=0|c[1],c[2]&&((i=0|c[2])in a||(a[i]=new f)));break;case"define":var p=/SHADER_NAME(_B64)?\s+(.*)$/.exec(l[2]);p&&(a[i].name=p[1]?(r=p[2],"undefined"!=typeof atob?atob(r):"base64:"+r):p[2])}a[i].lines.push(new h(o++,u))}return Object.keys(a).forEach(function(e){var t=a[e];t.lines.forEach(function(e){t.index[e.number]=e})}),a}function g(e){e._commandRef=d()}function m(e,t){var r=y();n(e+" in command "+(t||d())+("unknown"===r?"":" called from "+r))}function b(e,t,r,n){s(e,t)||m("invalid parameter type"+i(r)+". expected "+t+", got "+a(e),n||d())}var w=33071,_=9728,x=9984,S=9985,O=9986,P=9987,E=5126,k=32819,M=32820,C=33635,j=34042,T={};function A(e,t){return e===M||e===k||e===C?2:e===j?4:T[e]*t}function I(e){return!(e&e-1||!e)}T[5120]=T[5121]=1,T[5122]=T[5123]=T[36193]=T[C]=T[k]=T[M]=2,T[5124]=T[5125]=T[E]=T[j]=4;var R=t(o,{optional:function(e){e()},raise:n,commandRaise:m,command:function(e,t,r){e||m(t,r||d())},parameter:function(e,t,r){e in t||n("unknown parameter ("+e+")"+i(r)+". possible values: "+Object.keys(t).join())},commandParameter:function(e,t,r,n){e in t||m("unknown parameter ("+e+")"+i(r)+". possible values: "+Object.keys(t).join(),n||d())},constructor:function(e){Object.keys(e).forEach(function(e){l.indexOf(e)<0&&n('invalid regl constructor argument "'+e+'". must be one of '+l)})},type:function(e,t,r){s(e,t)||n("invalid parameter type"+i(r)+". expected "+t+", got "+a(e))},commandType:b,isTypedArray:function(t,r){e(t)||n("invalid parameter type"+i(r)+". must be a typed array")},nni:function(e,t){e>=0&&(0|e)===e||n("invalid parameter type, ("+e+")"+i(t)+". must be a nonnegative integer")},oneOf:u,shaderError:function(e,t,n,i,a){if(!e.getShaderParameter(t,e.COMPILE_STATUS)){var s=e.getShaderInfoLog(t),u=i===e.FRAGMENT_SHADER?"fragment":"vertex";b(n,"string",u+" shader source must be a string",a);var l=v(n,a),f=function(e){var t=[];return e.split("\n").forEach(function(e){if(!(e.length<5)){var r=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(e);r?t.push(new p(0|r[1],0|r[2],r[3].trim())):e.length>0&&t.push(new p("unknown",0,e))}}),t}(s);!function(e,t){t.forEach(function(t){var r=e[t.file];if(r){var n=r.index[t.line];if(n)return n.errors.push(t),void(r.hasErrors=!0)}e.unknown.hasErrors=!0,e.unknown.lines[0].errors.push(t)})}(l,f),Object.keys(l).forEach(function(e){var t=l[e];if(t.hasErrors){var n=[""],o=[""];i("file number "+e+": "+t.name+"\n","color:red;text-decoration:underline;font-weight:bold"),t.lines.forEach(function(e){if(e.errors.length>0){i(c(e.number,4)+"|  ","background-color:yellow; font-weight:bold"),i(e.line+r,"color:red; background-color:yellow; font-weight:bold");var t=0;e.errors.forEach(function(n){var o=n.message,a=/^\s*'(.*)'\s*:\s*(.*)$/.exec(o);if(a){var s=a[1];switch(o=a[2],s){case"assign":s="="}t=Math.max(e.line.indexOf(s,t),0)}else t=0;i(c("| ",6)),i(c("^^^",t+3)+r,"font-weight:bold"),i(c("| ",6)),i(o+r,"font-weight:bold")}),i(c("| ",6)+r)}else i(c(e.number,4)+"|  "),i(e.line+r,"color:red")}),"undefined"==typeof document||window.chrome?console.log(n.join("")):(o[0]=n.join("%c"),console.log.apply(console,o))}function i(e,t){n.push(e),o.push(t||"")}}),o.raise("Error compiling "+u+" shader, "+l[0].name)}},linkError:function(e,t,n,i,a){if(!e.getProgramParameter(t,e.LINK_STATUS)){var s=e.getProgramInfoLog(t),u=v(n,a),l='Error linking program with vertex shader, "'+v(i,a)[0].name+'", and fragment shader "'+u[0].name+'"';"undefined"!=typeof document?console.log("%c"+l+r+"%c"+s,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(l+r+s),o.raise(l)}},callSite:y,saveCommandRef:g,saveDrawInfo:function(e,t,r,n){function o(e){return e?n.id(e):0}function i(e,t){Object.keys(t).forEach(function(t){e[n.id(t)]=!0})}g(e),e._fragId=o(e.static.frag),e._vertId=o(e.static.vert);var a=e._uniformSet={};i(a,t.static),i(a,t.dynamic);var s=e._attributeSet={};i(s,r.static),i(s,r.dynamic),e._hasCount="count"in e.static||"count"in e.dynamic||"elements"in e.static||"elements"in e.dynamic},framebufferFormat:function(e,t,r){e.texture?u(e.texture._texture.internalformat,t,"unsupported texture format for attachment"):u(e.renderbuffer._renderbuffer.format,r,"unsupported renderbuffer format for attachment")},guessCommand:d,texture2D:function(e,t,r){var n,i=t.width,a=t.height,s=t.channels;o(i>0&&i<=r.maxTextureSize&&a>0&&a<=r.maxTextureSize,"invalid texture shape"),e.wrapS===w&&e.wrapT===w||o(I(i)&&I(a),"incompatible wrap mode for texture, both width and height must be power of 2"),1===t.mipmask?1!==i&&1!==a&&o(e.minFilter!==x&&e.minFilter!==O&&e.minFilter!==S&&e.minFilter!==P,"min filter requires mipmap"):(o(I(i)&&I(a),"texture must be a square power of 2 to support mipmapping"),o(t.mipmask===(i<<1)-1,"missing or incomplete mipmap data")),t.type===E&&(r.extensions.indexOf("oes_texture_float_linear")<0&&o(e.minFilter===_&&e.magFilter===_,"filter not supported, must enable oes_texture_float_linear"),o(!e.genMipmaps,"mipmap generation not supported with float textures"));var u=t.images;for(n=0;n<16;++n)if(u[n]){var l=i>>n,c=a>>n;o(t.mipmask&1<<n,"missing mipmap data");var f=u[n];if(o(f.width===l&&f.height===c,"invalid shape for mip images"),o(f.format===t.format&&f.internalformat===t.internalformat&&f.type===t.type,"incompatible type for mip image"),f.compressed);else if(f.data){var h=Math.ceil(A(f.type,s)*l/f.unpackAlignment)*f.unpackAlignment;o(f.data.byteLength===h*c,"invalid data for image, buffer size is inconsistent with image format")}else f.element||f.copy}else e.genMipmaps||o(0==(t.mipmask&1<<n),"extra mipmap data");t.compressed&&o(!e.genMipmaps,"mipmap generation for compressed images not supported")},textureCube:function(e,t,r,n){var i=e.width,a=e.height,s=e.channels;o(i>0&&i<=n.maxTextureSize&&a>0&&a<=n.maxTextureSize,"invalid texture shape"),o(i===a,"cube map must be square"),o(t.wrapS===w&&t.wrapT===w,"wrap mode not supported by cube map");for(var u=0;u<r.length;++u){var l=r[u];o(l.width===i&&l.height===a,"inconsistent cube map face shape"),t.genMipmaps&&(o(!l.compressed,"can not generate mipmap for compressed textures"),o(1===l.mipmask,"can not specify mipmaps and generate mipmaps"));for(var c=l.images,f=0;f<16;++f){var h=c[f];if(h){var p=i>>f,d=a>>f;o(l.mipmask&1<<f,"missing mipmap data"),o(h.width===p&&h.height===d,"invalid shape for mip images"),o(h.format===e.format&&h.internalformat===e.internalformat&&h.type===e.type,"incompatible type for mip image"),h.compressed||(h.data?o(h.data.byteLength===p*d*Math.max(A(h.type,s),h.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format"):h.element||h.copy)}}}}}),L=0,N=0,D=5,B=6;function F(e,t){this.id=L++,this.type=e,this.data=t}function G(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function z(e){return"["+function e(t){if(0===t.length)return[];var r=t.charAt(0),n=t.charAt(t.length-1);if(t.length>1&&r===n&&('"'===r||"'"===r))return['"'+G(t.substr(1,t.length-2))+'"'];var o=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(t);if(o)return e(t.substr(0,o.index)).concat(e(o[1])).concat(e(t.substr(o.index+o[0].length)));var i=t.split(".");if(1===i.length)return['"'+G(t)+'"'];for(var a=[],s=0;s<i.length;++s)a=a.concat(e(i[s]));return a}(e).join("][")+"]"}var U={DynamicVariable:F,define:function(e,t){return new F(e,z(t+""))},isDynamic:function(e){return"function"==typeof e&&!e._reglType||e instanceof F},unbox:function e(t,r){return"function"==typeof t?new F(N,t):"number"==typeof t||"boolean"==typeof t?new F(D,t):Array.isArray(t)?new F(B,t.map(function(t,n){return e(t,r+"["+n+"]")})):t instanceof F?t:void R(!1,"invalid option type in uniform "+r)},accessor:z},V={next:"function"==typeof requestAnimationFrame?function(e){return requestAnimationFrame(e)}:function(e){return setTimeout(e,16)},cancel:"function"==typeof cancelAnimationFrame?function(e){return cancelAnimationFrame(e)}:clearTimeout},W="undefined"!=typeof performance&&performance.now?function(){return performance.now()}:function(){return+new Date};function Y(e){return"string"==typeof e?e.split():(R(Array.isArray(e),"invalid extension array"),e)}function H(e){return"string"==typeof e?(R("undefined"!=typeof document,"not supported outside of DOM"),document.querySelector(e)):e}function X(e){var r,n,o,i,s,u=e||{},l={},c=[],f=[],h="undefined"==typeof window?1:window.devicePixelRatio,p=!1,d=function(e){e&&R.raise(e)},y=function(){};if("string"==typeof u?(R("undefined"!=typeof document,"selector queries only supported in DOM enviroments"),r=document.querySelector(u),R(r,"invalid query string for element")):"object"===a(u)?"string"==typeof(s=u).nodeName&&"function"==typeof s.appendChild&&"function"==typeof s.getBoundingClientRect?r=u:!function(e){return"function"==typeof e.drawArrays||"function"==typeof e.drawElements}(u)?(R.constructor(u),"gl"in u?i=u.gl:"canvas"in u?o=H(u.canvas):"container"in u&&(n=H(u.container)),"attributes"in u&&(l=u.attributes,R.type(l,"object","invalid context attributes")),"extensions"in u&&(c=Y(u.extensions)),"optionalExtensions"in u&&(f=Y(u.optionalExtensions)),"onDone"in u&&(R.type(u.onDone,"function","invalid or missing onDone callback"),d=u.onDone),"profile"in u&&(p=!!u.profile),"pixelRatio"in u&&(h=+u.pixelRatio,R(h>0,"invalid pixel ratio"))):o=(i=u).canvas:R.raise("invalid arguments to regl"),r&&("canvas"===r.nodeName.toLowerCase()?o=r:n=r),!i){if(!o){R("undefined"!=typeof document,"must manually specify webgl context outside of DOM environments");var v=function(e,r,n){var o,i=document.createElement("canvas");function a(){var r=window.innerWidth,o=window.innerHeight;if(e!==document.body){var a=e.getBoundingClientRect();r=a.right-a.left,o=a.bottom-a.top}i.width=n*r,i.height=n*o,t(i.style,{width:r+"px",height:o+"px"})}return t(i.style,{border:0,margin:0,padding:0,top:0,left:0}),e.appendChild(i),e===document.body&&(i.style.position="absolute",t(e.style,{margin:0,padding:0})),e!==document.body&&"function"==typeof ResizeObserver?(o=new ResizeObserver(function(){setTimeout(a)})).observe(e):window.addEventListener("resize",a,!1),a(),{canvas:i,onDestroy:function(){o?o.disconnect():window.removeEventListener("resize",a),e.removeChild(i)}}}(n||document.body,0,h);if(!v)return null;o=v.canvas,y=v.onDestroy}void 0===l.premultipliedAlpha&&(l.premultipliedAlpha=!0),i=function(e,t){function r(r){try{return e.getContext(r,t)}catch(e){return null}}return r("webgl")||r("experimental-webgl")||r("webgl-experimental")}(o,l)}return i?{gl:i,canvas:o,container:n,extensions:c,optionalExtensions:f,pixelRatio:h,profile:p,onDone:d,onDestroy:y}:(y(),d("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function q(e,t){for(var r=Array(e),n=0;n<e;++n)r[n]=t(n);return r}var J=5120,Z=5121,K=5122,Q=5123,$=5124,ee=5125,te=5126;function re(e){var t,r;return t=(e>65535)<<4,t|=r=((e>>>=t)>255)<<3,t|=r=((e>>>=r)>15)<<2,(t|=r=((e>>>=r)>3)<<1)|(e>>>=r)>>1}function ne(){var e=q(8,function(){return[]});function t(t){var r=function(e){for(var t=16;t<=1<<28;t*=16)if(e<=t)return t;return 0}(t),n=e[re(r)>>2];return n.length>0?n.pop():new ArrayBuffer(r)}function r(t){e[re(t.byteLength)>>2].push(t)}return{alloc:t,free:r,allocType:function(e,r){var n=null;switch(e){case J:n=new Int8Array(t(r),0,r);break;case Z:n=new Uint8Array(t(r),0,r);break;case K:n=new Int16Array(t(2*r),0,r);break;case Q:n=new Uint16Array(t(2*r),0,r);break;case $:n=new Int32Array(t(4*r),0,r);break;case ee:n=new Uint32Array(t(4*r),0,r);break;case te:n=new Float32Array(t(4*r),0,r);break;default:return null}return n.length!==r?n.subarray(0,r):n},freeType:function(e){r(e.buffer)}}}var oe=ne();oe.zero=ne();var ie=function(e,t){var r=1;t.ext_texture_filter_anisotropic&&(r=e.getParameter(34047));var n=1,o=1;t.webgl_draw_buffers&&(n=e.getParameter(34852),o=e.getParameter(36063));var i=!!t.oes_texture_float;if(i){var a=e.createTexture();e.bindTexture(3553,a),e.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var s=e.createFramebuffer();if(e.bindFramebuffer(36160,s),e.framebufferTexture2D(36160,36064,3553,a,0),e.bindTexture(3553,null),36053!==e.checkFramebufferStatus(36160))i=!1;else{e.viewport(0,0,1,1),e.clearColor(1,0,0,1),e.clear(16384);var u=oe.allocType(5126,4);e.readPixels(0,0,1,1,6408,5126,u),e.getError()?i=!1:(e.deleteFramebuffer(s),e.deleteTexture(a),i=1===u[0]),oe.freeType(u)}}var l=!0;if(!("undefined"!=typeof navigator&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent)))){var c=e.createTexture(),f=oe.allocType(5121,36);e.activeTexture(33984),e.bindTexture(34067,c),e.texImage2D(34069,0,6408,3,3,0,6408,5121,f),oe.freeType(f),e.bindTexture(34067,null),e.deleteTexture(c),l=!e.getError()}return{colorBits:[e.getParameter(3410),e.getParameter(3411),e.getParameter(3412),e.getParameter(3413)],depthBits:e.getParameter(3414),stencilBits:e.getParameter(3415),subpixelBits:e.getParameter(3408),extensions:Object.keys(t).filter(function(e){return!!t[e]}),maxAnisotropic:r,maxDrawbuffers:n,maxColorAttachments:o,pointSizeDims:e.getParameter(33901),lineWidthDims:e.getParameter(33902),maxViewportDims:e.getParameter(3386),maxCombinedTextureUnits:e.getParameter(35661),maxCubeMapSize:e.getParameter(34076),maxRenderbufferSize:e.getParameter(34024),maxTextureUnits:e.getParameter(34930),maxTextureSize:e.getParameter(3379),maxAttributes:e.getParameter(34921),maxVertexUniforms:e.getParameter(36347),maxVertexTextureUnits:e.getParameter(35660),maxVaryingVectors:e.getParameter(36348),maxFragmentUniforms:e.getParameter(36349),glsl:e.getParameter(35724),renderer:e.getParameter(7937),vendor:e.getParameter(7936),version:e.getParameter(7938),readFloat:i,npotTextureCube:l}};function ae(t){return!!t&&"object"===a(t)&&Array.isArray(t.shape)&&Array.isArray(t.stride)&&"number"==typeof t.offset&&t.shape.length===t.stride.length&&(Array.isArray(t.data)||e(t.data))}var se=function(e){return Object.keys(e).map(function(t){return e[t]})},ue={shape:function(e){for(var t=[],r=e;r.length;r=r[0])t.push(r.length);return t},flatten:function(e,t,r,n){var o=1;if(t.length)for(var i=0;i<t.length;++i)o*=t[i];else o=0;var a=n||oe.allocType(r,o);switch(t.length){case 0:break;case 1:!function(e,t,r){for(var n=0;n<t;++n)r[n]=e[n]}(e,t[0],a);break;case 2:!function(e,t,r,n){for(var o=0,i=0;i<t;++i)for(var a=e[i],s=0;s<r;++s)n[o++]=a[s]}(e,t[0],t[1],a);break;case 3:le(e,t[0],t[1],t[2],a,0);break;default:!function e(t,r,n,o,i){var a=1;for(var s=n+1;s<r.length;++s)a*=r[s];var u=r[n];if(r.length-n==4){var l=r[n+1],c=r[n+2],f=r[n+3];for(s=0;s<u;++s)le(t[s],l,c,f,o,i),i+=a}else for(s=0;s<u;++s)e(t[s],r,n+1,o,i),i+=a}(e,t,0,a,0)}return a}};function le(e,t,r,n,o,i){for(var a=i,s=0;s<t;++s)for(var u=e[s],l=0;l<r;++l)for(var c=u[l],f=0;f<n;++f)o[a++]=c[f]}var ce={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},fe={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,float:5126,float32:5126},he={dynamic:35048,stream:35040,static:35044},pe=ue.flatten,de=ue.shape,ye=35044,ve=35040,ge=5121,me=5126,be=[];function we(e){return 0|ce[Object.prototype.toString.call(e)]}function _e(e,t){for(var r=0;r<t.length;++r)e[r]=t[r]}function xe(e,t,r,n,o,i,a){for(var s=0,u=0;u<r;++u)for(var l=0;l<n;++l)e[s++]=t[o*u+i*l+a]}be[5120]=1,be[5122]=2,be[5124]=4,be[5121]=1,be[5123]=2,be[5125]=4,be[5126]=4;var Se={points:0,point:0,lines:1,line:1,triangles:4,triangle:4,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},Oe=0,Pe=1,Ee=4,ke=5120,Me=5121,Ce=5122,je=5123,Te=5124,Ae=5125,Ie=34963,Re=35040,Le=35044;var Ne=new Float32Array(1),De=new Uint32Array(Ne.buffer),Be=5123;function Fe(e){for(var t=oe.allocType(Be,e.length),r=0;r<e.length;++r)if(isNaN(e[r]))t[r]=65535;else if(e[r]===1/0)t[r]=31744;else if(e[r]===-1/0)t[r]=64512;else{Ne[0]=e[r];var n=De[0],o=n>>>31<<15,i=(n<<1>>>24)-127,a=n>>13&1023;if(i<-24)t[r]=o;else if(i<-14){var s=-14-i;t[r]=o+(a+1024>>s)}else t[r]=i>15?o+31744:o+(i+15<<10)+a}return t}function Ge(t){return Array.isArray(t)||e(t)}var ze=function(e){return!(e&e-1||!e)},Ue=34467,Ve=3553,We=34067,Ye=34069,He=6408,Xe=6406,qe=6407,Je=6409,Ze=6410,Ke=32854,Qe=32855,$e=36194,et=32819,tt=32820,rt=33635,nt=34042,ot=6402,it=34041,at=35904,st=35906,ut=36193,lt=33776,ct=33777,ft=33778,ht=33779,pt=35986,dt=35987,yt=34798,vt=35840,gt=35841,mt=35842,bt=35843,wt=36196,_t=5121,xt=5123,St=5125,Ot=5126,Pt=10242,Et=10243,kt=10497,Mt=33071,Ct=33648,jt=10240,Tt=10241,At=9728,It=9729,Rt=9984,Lt=9985,Nt=9986,Dt=9987,Bt=33170,Ft=4352,Gt=4353,zt=4354,Ut=34046,Vt=3317,Wt=37440,Yt=37441,Ht=37443,Xt=37444,qt=33984,Jt=[Rt,Nt,Lt,Dt],Zt=[0,Je,Ze,qe,He],Kt={};function Qt(e){return"[object "+e+"]"}Kt[Je]=Kt[Xe]=Kt[ot]=1,Kt[it]=Kt[Ze]=2,Kt[qe]=Kt[at]=3,Kt[He]=Kt[st]=4;var $t=Qt("HTMLCanvasElement"),er=Qt("OffscreenCanvas"),tr=Qt("CanvasRenderingContext2D"),rr=Qt("ImageBitmap"),nr=Qt("HTMLImageElement"),or=Qt("HTMLVideoElement"),ir=Object.keys(ce).concat([$t,er,tr,rr,nr,or]),ar=[];ar[_t]=1,ar[Ot]=4,ar[ut]=2,ar[xt]=2,ar[St]=4;var sr=[];function ur(e){return Array.isArray(e)&&(0===e.length||"number"==typeof e[0])}function lr(e){return!!Array.isArray(e)&&!(0===e.length||!Ge(e[0]))}function cr(e){return Object.prototype.toString.call(e)}function fr(e){return cr(e)===$t}function hr(e){return cr(e)===er}function pr(e){if(!e)return!1;var t=cr(e);return ir.indexOf(t)>=0||(ur(e)||lr(e)||ae(e))}function dr(e){return 0|ce[Object.prototype.toString.call(e)]}function yr(e,t){return oe.allocType(e.type===ut?Ot:e.type,t)}function vr(e,t){e.type===ut?(e.data=Fe(t),oe.freeType(t)):e.data=t}function gr(e,t,r,n,o,i){var a;if(a=void 0!==sr[e]?sr[e]:Kt[e]*ar[t],i&&(a*=6),o){for(var s=0,u=r;u>=1;)s+=a*u*u,u/=2;return s}return a*r*n}function mr(r,n,o,i,s,u,l){var c={"don't care":Ft,"dont care":Ft,nice:zt,fast:Gt},f={repeat:kt,clamp:Mt,mirror:Ct},h={nearest:At,linear:It},p=t({mipmap:Dt,"nearest mipmap nearest":Rt,"linear mipmap nearest":Lt,"nearest mipmap linear":Nt,"linear mipmap linear":Dt},h),d={none:0,browser:Xt},y={uint8:_t,rgba4:et,rgb565:rt,"rgb5 a1":tt},v={alpha:Xe,luminance:Je,"luminance alpha":Ze,rgb:qe,rgba:He,rgba4:Ke,"rgb5 a1":Qe,rgb565:$e},g={};n.ext_srgb&&(v.srgb=at,v.srgba=st),n.oes_texture_float&&(y.float32=y.float=Ot),n.oes_texture_half_float&&(y.float16=y["half float"]=ut),n.webgl_depth_texture&&(t(v,{depth:ot,"depth stencil":it}),t(y,{uint16:xt,uint32:St,"depth stencil":nt})),n.webgl_compressed_texture_s3tc&&t(g,{"rgb s3tc dxt1":lt,"rgba s3tc dxt1":ct,"rgba s3tc dxt3":ft,"rgba s3tc dxt5":ht}),n.webgl_compressed_texture_atc&&t(g,{"rgb atc":pt,"rgba atc explicit alpha":dt,"rgba atc interpolated alpha":yt}),n.webgl_compressed_texture_pvrtc&&t(g,{"rgb pvrtc 4bppv1":vt,"rgb pvrtc 2bppv1":gt,"rgba pvrtc 4bppv1":mt,"rgba pvrtc 2bppv1":bt}),n.webgl_compressed_texture_etc1&&(g["rgb etc1"]=wt);var m=Array.prototype.slice.call(r.getParameter(Ue));Object.keys(g).forEach(function(e){var t=g[e];m.indexOf(t)>=0&&(v[e]=t)});var b=Object.keys(v);o.textureFormats=b;var w=[];Object.keys(v).forEach(function(e){var t=v[e];w[t]=e});var _=[];Object.keys(y).forEach(function(e){var t=y[e];_[t]=e});var x=[];Object.keys(h).forEach(function(e){var t=h[e];x[t]=e});var S=[];Object.keys(p).forEach(function(e){var t=p[e];S[t]=e});var O=[];Object.keys(f).forEach(function(e){var t=f[e];O[t]=e});var P=b.reduce(function(e,t){var r=v[t];return r===Je||r===Xe||r===Je||r===Ze||r===ot||r===it||n.ext_srgb&&(r===at||r===st)?e[r]=r:r===Qe||t.indexOf("rgba")>=0?e[r]=He:e[r]=qe,e},{});function E(){this.internalformat=He,this.format=He,this.type=_t,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=Xt,this.width=0,this.height=0,this.channels=0}function k(e,t){e.internalformat=t.internalformat,e.format=t.format,e.type=t.type,e.compressed=t.compressed,e.premultiplyAlpha=t.premultiplyAlpha,e.flipY=t.flipY,e.unpackAlignment=t.unpackAlignment,e.colorSpace=t.colorSpace,e.width=t.width,e.height=t.height,e.channels=t.channels}function M(e,t){if("object"===a(t)&&t){if("premultiplyAlpha"in t&&(R.type(t.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),e.premultiplyAlpha=t.premultiplyAlpha),"flipY"in t&&(R.type(t.flipY,"boolean","invalid texture flip"),e.flipY=t.flipY),"alignment"in t&&(R.oneOf(t.alignment,[1,2,4,8],"invalid texture unpack alignment"),e.unpackAlignment=t.alignment),"colorSpace"in t&&(R.parameter(t.colorSpace,d,"invalid colorSpace"),e.colorSpace=d[t.colorSpace]),"type"in t){var r=t.type;R(n.oes_texture_float||!("float"===r||"float32"===r),"you must enable the OES_texture_float extension in order to use floating point textures."),R(n.oes_texture_half_float||!("half float"===r||"float16"===r),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures."),R(n.webgl_depth_texture||!("uint16"===r||"uint32"===r||"depth stencil"===r),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),R.parameter(r,y,"invalid texture type"),e.type=y[r]}var i=e.width,s=e.height,u=e.channels,l=!1;"shape"in t?(R(Array.isArray(t.shape)&&t.shape.length>=2,"shape must be an array"),i=t.shape[0],s=t.shape[1],3===t.shape.length&&(u=t.shape[2],R(u>0&&u<=4,"invalid number of channels"),l=!0),R(i>=0&&i<=o.maxTextureSize,"invalid width"),R(s>=0&&s<=o.maxTextureSize,"invalid height")):("radius"in t&&(i=s=t.radius,R(i>=0&&i<=o.maxTextureSize,"invalid radius")),"width"in t&&(i=t.width,R(i>=0&&i<=o.maxTextureSize,"invalid width")),"height"in t&&(s=t.height,R(s>=0&&s<=o.maxTextureSize,"invalid height")),"channels"in t&&(u=t.channels,R(u>0&&u<=4,"invalid number of channels"),l=!0)),e.width=0|i,e.height=0|s,e.channels=0|u;var c=!1;if("format"in t){var f=t.format;R(n.webgl_depth_texture||!("depth"===f||"depth stencil"===f),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),R.parameter(f,v,"invalid texture format");var h=e.internalformat=v[f];e.format=P[h],f in y&&("type"in t||(e.type=y[f])),f in g&&(e.compressed=!0),c=!0}!l&&c?e.channels=Kt[e.format]:l&&!c?e.channels!==Zt[e.format]&&(e.format=e.internalformat=Zt[e.channels]):c&&l&&R(e.channels===Kt[e.format],"number of channels inconsistent with specified format")}}function C(e){r.pixelStorei(Wt,e.flipY),r.pixelStorei(Yt,e.premultiplyAlpha),r.pixelStorei(Ht,e.colorSpace),r.pixelStorei(Vt,e.unpackAlignment)}function j(){E.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function T(t,r){var n=null;if(pr(r)?n=r:r&&(R.type(r,"object","invalid pixel data type"),M(t,r),"x"in r&&(t.xOffset=0|r.x),"y"in r&&(t.yOffset=0|r.y),pr(r.data)&&(n=r.data)),R(!t.compressed||n instanceof Uint8Array,"compressed texture data must be stored in a uint8array"),r.copy){R(!n,"can not specify copy and data field for the same texture");var i=s.viewportWidth,a=s.viewportHeight;t.width=t.width||i-t.xOffset,t.height=t.height||a-t.yOffset,t.needsCopy=!0,R(t.xOffset>=0&&t.xOffset<i&&t.yOffset>=0&&t.yOffset<a&&t.width>0&&t.width<=i&&t.height>0&&t.height<=a,"copy texture read out of bounds")}else if(n){if(e(n))t.channels=t.channels||4,t.data=n,"type"in r||t.type!==_t||(t.type=dr(n));else if(ur(n))t.channels=t.channels||4,function(e,t){var r=t.length;switch(e.type){case _t:case xt:case St:case Ot:var n=oe.allocType(e.type,r);n.set(t),e.data=n;break;case ut:e.data=Fe(t);break;default:R.raise("unsupported texture type, must specify a typed array")}}(t,n),t.alignment=1,t.needsFree=!0;else if(ae(n)){var u=n.data;Array.isArray(u)||t.type!==_t||(t.type=dr(u));var l,c,f,h,p,d,y=n.shape,v=n.stride;3===y.length?(f=y[2],d=v[2]):(R(2===y.length,"invalid ndarray pixel data, must be 2 or 3D"),f=1,d=1),l=y[0],c=y[1],h=v[0],p=v[1],t.alignment=1,t.width=l,t.height=c,t.channels=f,t.format=t.internalformat=Zt[f],t.needsFree=!0,function(e,t,r,n,o,i){for(var a=e.width,s=e.height,u=e.channels,l=yr(e,a*s*u),c=0,f=0;f<s;++f)for(var h=0;h<a;++h)for(var p=0;p<u;++p)l[c++]=t[r*h+n*f+o*p+i];vr(e,l)}(t,u,h,p,d,n.offset)}else if(fr(n)||hr(n)||cr(n)===tr)fr(n)||hr(n)?t.element=n:t.element=n.canvas,t.width=t.element.width,t.height=t.element.height,t.channels=4;else if(function(e){return cr(e)===rr}(n))t.element=n,t.width=n.width,t.height=n.height,t.channels=4;else if(function(e){return cr(e)===nr}(n))t.element=n,t.width=n.naturalWidth,t.height=n.naturalHeight,t.channels=4;else if(function(e){return cr(e)===or}(n))t.element=n,t.width=n.videoWidth,t.height=n.videoHeight,t.channels=4;else if(lr(n)){var g=t.width||n[0].length,m=t.height||n.length,b=t.channels;b=Ge(n[0][0])?b||n[0][0].length:b||1;for(var w=ue.shape(n),_=1,x=0;x<w.length;++x)_*=w[x];var S=yr(t,_);ue.flatten(n,w,"",S),vr(t,S),t.alignment=1,t.width=g,t.height=m,t.channels=b,t.format=t.internalformat=Zt[b],t.needsFree=!0}}else t.width=t.width||1,t.height=t.height||1,t.channels=t.channels||4;t.type===Ot?R(o.extensions.indexOf("oes_texture_float")>=0,"oes_texture_float extension not enabled"):t.type===ut&&R(o.extensions.indexOf("oes_texture_half_float")>=0,"oes_texture_half_float extension not enabled")}function A(e,t,n){var o=e.element,a=e.data,s=e.internalformat,u=e.format,l=e.type,c=e.width,f=e.height;C(e),o?r.texImage2D(t,n,u,u,l,o):e.compressed?r.compressedTexImage2D(t,n,s,c,f,0,a):e.needsCopy?(i(),r.copyTexImage2D(t,n,u,e.xOffset,e.yOffset,c,f,0)):r.texImage2D(t,n,u,c,f,0,u,l,a||null)}function I(e,t,n,o,a){var s=e.element,u=e.data,l=e.internalformat,c=e.format,f=e.type,h=e.width,p=e.height;C(e),s?r.texSubImage2D(t,a,n,o,c,f,s):e.compressed?r.compressedTexSubImage2D(t,a,n,o,l,h,p,u):e.needsCopy?(i(),r.copyTexSubImage2D(t,a,n,o,e.xOffset,e.yOffset,h,p)):r.texSubImage2D(t,a,n,o,h,p,c,f,u)}var L=[];function N(){return L.pop()||new j}function D(e){e.needsFree&&oe.freeType(e.data),j.call(e),L.push(e)}function B(e,t,r){var n=e.images[0]=N();e.mipmask=1,n.width=e.width=t,n.height=e.height=r,n.channels=e.channels=4}function F(e,t){var r=null;if(pr(t))k(r=e.images[0]=N(),e),T(r,t),e.mipmask=1;else if(M(e,t),Array.isArray(t.mipmap))for(var n=t.mipmap,o=0;o<n.length;++o)k(r=e.images[o]=N(),e),r.width>>=o,r.height>>=o,T(r,n[o]),e.mipmask|=1<<o;else k(r=e.images[0]=N(),e),T(r,t),e.mipmask=1;k(e,e.images[0]),!e.compressed||e.internalformat!==lt&&e.internalformat!==ct&&e.internalformat!==ft&&e.internalformat!==ht||R(e.width%4==0&&e.height%4==0,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function G(e,t){for(var r=e.images,n=0;n<r.length;++n){if(!r[n])return;A(r[n],t,n)}}var z=[];function U(){var e=z.pop()||new function(){E.call(this),this.genMipmaps=!1,this.mipmapHint=Ft,this.mipmask=0,this.images=Array(16)};E.call(e),e.mipmask=0;for(var t=0;t<16;++t)e.images[t]=null;return e}function V(e){for(var t=e.images,r=0;r<t.length;++r)t[r]&&D(t[r]),t[r]=null;z.push(e)}function W(){this.minFilter=At,this.magFilter=At,this.wrapS=Mt,this.wrapT=Mt,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=Ft}function Y(e,t){if("min"in t){var r=t.min;R.parameter(r,p),e.minFilter=p[r],Jt.indexOf(e.minFilter)>=0&&!("faces"in t)&&(e.genMipmaps=!0)}if("mag"in t){var n=t.mag;R.parameter(n,h),e.magFilter=h[n]}var i=e.wrapS,s=e.wrapT;if("wrap"in t){var u=t.wrap;"string"==typeof u?(R.parameter(u,f),i=s=f[u]):Array.isArray(u)&&(R.parameter(u[0],f),R.parameter(u[1],f),i=f[u[0]],s=f[u[1]])}else{if("wrapS"in t){var l=t.wrapS;R.parameter(l,f),i=f[l]}if("wrapT"in t){var d=t.wrapT;R.parameter(d,f),s=f[d]}}if(e.wrapS=i,e.wrapT=s,"anisotropic"in t){var y=t.anisotropic;R("number"==typeof y&&y>=1&&y<=o.maxAnisotropic,"aniso samples must be between 1 and "),e.anisotropic=t.anisotropic}if("mipmap"in t){var v=!1;switch(a(t.mipmap)){case"string":R.parameter(t.mipmap,c,"invalid mipmap hint"),e.mipmapHint=c[t.mipmap],e.genMipmaps=!0,v=!0;break;case"boolean":v=e.genMipmaps=t.mipmap;break;case"object":R(Array.isArray(t.mipmap),"invalid mipmap type"),e.genMipmaps=!1,v=!0;break;default:R.raise("invalid mipmap type")}!v||"min"in t||(e.minFilter=Rt)}}function H(e,t){r.texParameteri(t,Tt,e.minFilter),r.texParameteri(t,jt,e.magFilter),r.texParameteri(t,Pt,e.wrapS),r.texParameteri(t,Et,e.wrapT),n.ext_texture_filter_anisotropic&&r.texParameteri(t,Ut,e.anisotropic),e.genMipmaps&&(r.hint(Bt,e.mipmapHint),r.generateMipmap(t))}var X=0,q={},J=o.maxTextureUnits,Z=Array(J).map(function(){return null});function K(e){E.call(this),this.mipmask=0,this.internalformat=He,this.id=X++,this.refCount=1,this.target=e,this.texture=r.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new W,l.profile&&(this.stats={size:0})}function Q(e){r.activeTexture(qt),r.bindTexture(e.target,e.texture)}function $(){var e=Z[0];e?r.bindTexture(e.target,e.texture):r.bindTexture(Ve,null)}function ee(e){var t=e.texture;R(t,"must not double destroy texture");var n=e.unit,o=e.target;n>=0&&(r.activeTexture(qt+n),r.bindTexture(o,null),Z[n]=null),r.deleteTexture(t),e.texture=null,e.params=null,e.pixels=null,e.refCount=0,delete q[e.id],u.textureCount--}return t(K.prototype,{bind:function(){this.bindCount+=1;var e=this.unit;if(e<0){for(var t=0;t<J;++t){var n=Z[t];if(n){if(n.bindCount>0)continue;n.unit=-1}Z[t]=this,e=t;break}e>=J&&R.raise("insufficient number of texture units"),l.profile&&u.maxTextureUnits<e+1&&(u.maxTextureUnits=e+1),this.unit=e,r.activeTexture(qt+e),r.bindTexture(this.target,this.texture)}return e},unbind:function(){this.bindCount-=1},decRef:function(){--this.refCount<=0&&ee(this)}}),l.profile&&(u.getTotalTextureSize=function(){var e=0;return Object.keys(q).forEach(function(t){e+=q[t].stats.size}),e}),{create2D:function(e,t){var n=new K(Ve);function i(e,t){var r=n.texInfo;W.call(r);var a=U();return"number"==typeof e?B(a,0|e,"number"==typeof t?0|t:0|e):e?(R.type(e,"object","invalid arguments to regl.texture"),Y(r,e),F(a,e)):B(a,1,1),r.genMipmaps&&(a.mipmask=(a.width<<1)-1),n.mipmask=a.mipmask,k(n,a),R.texture2D(r,a,o),n.internalformat=a.internalformat,i.width=a.width,i.height=a.height,Q(n),G(a,Ve),H(r,Ve),$(),V(a),l.profile&&(n.stats.size=gr(n.internalformat,n.type,a.width,a.height,r.genMipmaps,!1)),i.format=w[n.internalformat],i.type=_[n.type],i.mag=x[r.magFilter],i.min=S[r.minFilter],i.wrapS=O[r.wrapS],i.wrapT=O[r.wrapT],i}return q[n.id]=n,u.textureCount++,i(e,t),i.subimage=function(e,t,r,o){R(!!e,"must specify image data");var a=0|t,s=0|r,u=0|o,l=N();return k(l,n),l.width=0,l.height=0,T(l,e),l.width=l.width||(n.width>>u)-a,l.height=l.height||(n.height>>u)-s,R(n.type===l.type&&n.format===l.format&&n.internalformat===l.internalformat,"incompatible format for texture.subimage"),R(a>=0&&s>=0&&a+l.width<=n.width&&s+l.height<=n.height,"texture.subimage write out of bounds"),R(n.mipmask&1<<u,"missing mipmap data"),R(l.data||l.element||l.needsCopy,"missing image data"),Q(n),I(l,Ve,a,s,u),$(),D(l),i},i.resize=function(e,t){var o=0|e,a=0|t||o;if(o===n.width&&a===n.height)return i;i.width=n.width=o,i.height=n.height=a,Q(n);for(var s=0;n.mipmask>>s;++s){var u=o>>s,c=a>>s;if(!u||!c)break;r.texImage2D(Ve,s,n.format,u,c,0,n.format,n.type,null)}return $(),l.profile&&(n.stats.size=gr(n.internalformat,n.type,o,a,!1,!1)),i},i._reglType="texture2d",i._texture=n,l.profile&&(i.stats=n.stats),i.destroy=function(){n.decRef()},i},createCube:function(e,t,n,i,s,c){var f=new K(We);q[f.id]=f,u.cubeCount++;var h=new Array(6);function p(e,t,r,n,i,s){var u,c=f.texInfo;for(W.call(c),u=0;u<6;++u)h[u]=U();if("number"!=typeof e&&e)if("object"===a(e))if(t)F(h[0],e),F(h[1],t),F(h[2],r),F(h[3],n),F(h[4],i),F(h[5],s);else if(Y(c,e),M(f,e),"faces"in e){var d=e.faces;for(R(Array.isArray(d)&&6===d.length,"cube faces must be a length 6 array"),u=0;u<6;++u)R("object"===a(d[u])&&!!d[u],"invalid input for cube map face"),k(h[u],f),F(h[u],d[u])}else for(u=0;u<6;++u)F(h[u],e);else R.raise("invalid arguments to cube map");else{var y=0|e||1;for(u=0;u<6;++u)B(h[u],y,y)}for(k(f,h[0]),o.npotTextureCube||R(ze(f.width)&&ze(f.height),"your browser does not support non power or two texture dimensions"),c.genMipmaps?f.mipmask=(h[0].width<<1)-1:f.mipmask=h[0].mipmask,R.textureCube(f,c,h,o),f.internalformat=h[0].internalformat,p.width=h[0].width,p.height=h[0].height,Q(f),u=0;u<6;++u)G(h[u],Ye+u);for(H(c,We),$(),l.profile&&(f.stats.size=gr(f.internalformat,f.type,p.width,p.height,c.genMipmaps,!0)),p.format=w[f.internalformat],p.type=_[f.type],p.mag=x[c.magFilter],p.min=S[c.minFilter],p.wrapS=O[c.wrapS],p.wrapT=O[c.wrapT],u=0;u<6;++u)V(h[u]);return p}return p(e,t,n,i,s,c),p.subimage=function(e,t,r,n,o){R(!!t,"must specify image data"),R("number"==typeof e&&e===(0|e)&&e>=0&&e<6,"invalid face");var i=0|r,a=0|n,s=0|o,u=N();return k(u,f),u.width=0,u.height=0,T(u,t),u.width=u.width||(f.width>>s)-i,u.height=u.height||(f.height>>s)-a,R(f.type===u.type&&f.format===u.format&&f.internalformat===u.internalformat,"incompatible format for texture.subimage"),R(i>=0&&a>=0&&i+u.width<=f.width&&a+u.height<=f.height,"texture.subimage write out of bounds"),R(f.mipmask&1<<s,"missing mipmap data"),R(u.data||u.element||u.needsCopy,"missing image data"),Q(f),I(u,Ye+e,i,a,s),$(),D(u),p},p.resize=function(e){var t=0|e;if(t!==f.width){p.width=f.width=t,p.height=f.height=t,Q(f);for(var n=0;n<6;++n)for(var o=0;f.mipmask>>o;++o)r.texImage2D(Ye+n,o,f.format,t>>o,t>>o,0,f.format,f.type,null);return $(),l.profile&&(f.stats.size=gr(f.internalformat,f.type,p.width,p.height,!1,!0)),p}},p._reglType="textureCube",p._texture=f,l.profile&&(p.stats=f.stats),p.destroy=function(){f.decRef()},p},clear:function(){for(var e=0;e<J;++e)r.activeTexture(qt+e),r.bindTexture(Ve,null),Z[e]=null;se(q).forEach(ee),u.cubeCount=0,u.textureCount=0},getTexture:function(e){return null},restore:function(){for(var e=0;e<J;++e){var t=Z[e];t&&(t.bindCount=0,t.unit=-1,Z[e]=null)}se(q).forEach(function(e){e.texture=r.createTexture(),r.bindTexture(e.target,e.texture);for(var t=0;t<32;++t)if(0!=(e.mipmask&1<<t))if(e.target===Ve)r.texImage2D(Ve,t,e.internalformat,e.width>>t,e.height>>t,0,e.internalformat,e.type,null);else for(var n=0;n<6;++n)r.texImage2D(Ye+n,t,e.internalformat,e.width>>t,e.height>>t,0,e.internalformat,e.type,null);H(e.texInfo,e.target)})},refresh:function(){for(var e=0;e<J;++e){var t=Z[e];t&&(t.bindCount=0,t.unit=-1,Z[e]=null),r.activeTexture(qt+e),r.bindTexture(Ve,null),r.bindTexture(We,null)}}}}sr[Ke]=2,sr[Qe]=2,sr[$e]=2,sr[it]=4,sr[lt]=.5,sr[ct]=.5,sr[ft]=1,sr[ht]=1,sr[pt]=.5,sr[dt]=1,sr[yt]=1,sr[vt]=.5,sr[gt]=.25,sr[mt]=.5,sr[bt]=.25,sr[wt]=.5;var br=36161,wr=32854,_r=[];function xr(e,t,r){return _r[e]*t*r}_r[wr]=2,_r[32855]=2,_r[36194]=2,_r[33189]=2,_r[36168]=1,_r[34041]=4,_r[35907]=4,_r[34836]=16,_r[34842]=8,_r[34843]=6;var Sr=function(e,t,r,n,o){var i={rgba4:wr,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};t.ext_srgb&&(i.srgba=35907),t.ext_color_buffer_half_float&&(i.rgba16f=34842,i.rgb16f=34843),t.webgl_color_buffer_float&&(i.rgba32f=34836);var s=[];Object.keys(i).forEach(function(e){var t=i[e];s[t]=e});var u=0,l={};function c(e){this.id=u++,this.refCount=1,this.renderbuffer=e,this.format=wr,this.width=0,this.height=0,o.profile&&(this.stats={size:0})}function f(t){var r=t.renderbuffer;R(r,"must not double destroy renderbuffer"),e.bindRenderbuffer(br,null),e.deleteRenderbuffer(r),t.renderbuffer=null,t.refCount=0,delete l[t.id],n.renderbufferCount--}return c.prototype.decRef=function(){--this.refCount<=0&&f(this)},o.profile&&(n.getTotalRenderbufferSize=function(){var e=0;return Object.keys(l).forEach(function(t){e+=l[t].stats.size}),e}),{create:function(t,u){var f=new c(e.createRenderbuffer());function h(t,n){var u=0,l=0,c=wr;if("object"===a(t)&&t){var p=t;if("shape"in p){var d=p.shape;R(Array.isArray(d)&&d.length>=2,"invalid renderbuffer shape"),u=0|d[0],l=0|d[1]}else"radius"in p&&(u=l=0|p.radius),"width"in p&&(u=0|p.width),"height"in p&&(l=0|p.height);"format"in p&&(R.parameter(p.format,i,"invalid renderbuffer format"),c=i[p.format])}else"number"==typeof t?(u=0|t,l="number"==typeof n?0|n:u):t?R.raise("invalid arguments to renderbuffer constructor"):u=l=1;if(R(u>0&&l>0&&u<=r.maxRenderbufferSize&&l<=r.maxRenderbufferSize,"invalid renderbuffer size"),u!==f.width||l!==f.height||c!==f.format)return h.width=f.width=u,h.height=f.height=l,f.format=c,e.bindRenderbuffer(br,f.renderbuffer),e.renderbufferStorage(br,c,u,l),R(0===e.getError(),"invalid render buffer format"),o.profile&&(f.stats.size=xr(f.format,f.width,f.height)),h.format=s[f.format],h}return l[f.id]=f,n.renderbufferCount++,h(t,u),h.resize=function(t,n){var i=0|t,a=0|n||i;return i===f.width&&a===f.height?h:(R(i>0&&a>0&&i<=r.maxRenderbufferSize&&a<=r.maxRenderbufferSize,"invalid renderbuffer size"),h.width=f.width=i,h.height=f.height=a,e.bindRenderbuffer(br,f.renderbuffer),e.renderbufferStorage(br,f.format,i,a),R(0===e.getError(),"invalid render buffer format"),o.profile&&(f.stats.size=xr(f.format,f.width,f.height)),h)},h._reglType="renderbuffer",h._renderbuffer=f,o.profile&&(h.stats=f.stats),h.destroy=function(){f.decRef()},h},clear:function(){se(l).forEach(f)},restore:function(){se(l).forEach(function(t){t.renderbuffer=e.createRenderbuffer(),e.bindRenderbuffer(br,t.renderbuffer),e.renderbufferStorage(br,t.format,t.width,t.height)}),e.bindRenderbuffer(br,null)}}},Or=36160,Pr=36161,Er=3553,kr=34069,Mr=36064,Cr=36096,jr=36128,Tr=33306,Ar=36053,Ir=6402,Rr=[6407,6408],Lr=[];Lr[6408]=4,Lr[6407]=3;var Nr=[];Nr[5121]=1,Nr[5126]=4,Nr[36193]=2;var Dr=33189,Br=36168,Fr=34041,Gr=[32854,32855,36194,35907,34842,34843,34836],zr={};zr[Ar]="complete",zr[36054]="incomplete attachment",zr[36057]="incomplete dimensions",zr[36055]="incomplete, missing attachment",zr[36061]="unsupported";var Ur=5126,Vr=34962;function Wr(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=Ur,this.offset=0,this.stride=0,this.divisor=0}var Yr=35632,Hr=35633,Xr=35718,qr=35721;function Jr(e,r,n,o){var i={},a={};function s(e,t,r,n){this.name=e,this.id=t,this.location=r,this.info=n}function u(e,t){for(var r=0;r<e.length;++r)if(e[r].id===t.id)return void(e[r].location=t.location);e.push(t)}function l(t,n,o){var s=t===Yr?i:a,u=s[n];if(!u){var l=r.str(n);u=e.createShader(t),e.shaderSource(u,l),e.compileShader(u),R.shaderError(e,u,l,t,o),s[n]=u}return u}var c={},f=[],h=0;function p(t,n,i){var a,c,f=l(Yr,t.fragId),h=l(Hr,t.vertId),p=t.program=e.createProgram();if(e.attachShader(p,f),e.attachShader(p,h),i)for(a=0;a<i.length;++a){var d=i[a];e.bindAttribLocation(p,d[0],d[1])}e.linkProgram(p),R.linkError(e,p,r.str(t.fragId),r.str(t.vertId),n);var y=e.getProgramParameter(p,Xr);o.profile&&(t.stats.uniformsCount=y);var v=t.uniforms;for(a=0;a<y;++a)if(c=e.getActiveUniform(p,a))if(c.size>1)for(var g=0;g<c.size;++g){var m=c.name.replace("[0]","["+g+"]");u(v,new s(m,r.id(m),e.getUniformLocation(p,m),c))}else u(v,new s(c.name,r.id(c.name),e.getUniformLocation(p,c.name),c));var b=e.getProgramParameter(p,qr);o.profile&&(t.stats.attributesCount=b);var w=t.attributes;for(a=0;a<b;++a)(c=e.getActiveAttrib(p,a))&&u(w,new s(c.name,r.id(c.name),e.getAttribLocation(p,c.name),c))}return o.profile&&(n.getMaxUniformsCount=function(){var e=0;return f.forEach(function(t){t.stats.uniformsCount>e&&(e=t.stats.uniformsCount)}),e},n.getMaxAttributesCount=function(){var e=0;return f.forEach(function(t){t.stats.attributesCount>e&&(e=t.stats.attributesCount)}),e}),{clear:function(){var t=e.deleteShader.bind(e);se(i).forEach(t),i={},se(a).forEach(t),a={},f.forEach(function(t){e.deleteProgram(t.program)}),f.length=0,c={},n.shaderCount=0},program:function(r,s,u,l){R.command(r>=0,"missing vertex shader",u),R.command(s>=0,"missing fragment shader",u);var d=c[s];d||(d=c[s]={});var y=d[r];if(y&&(y.refCount++,!l))return y;var v=new function(e,t){this.id=h++,this.fragId=e,this.vertId=t,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,o.profile&&(this.stats={uniformsCount:0,attributesCount:0})}(s,r);return n.shaderCount++,p(v,u,l),y||(d[r]=v),f.push(v),t(v,{destroy:function(){if(v.refCount--,v.refCount<=0){e.deleteProgram(v.program);var t=f.indexOf(v);f.splice(t,1),n.shaderCount--}d[v.vertId].refCount<=0&&(e.deleteShader(a[v.vertId]),delete a[v.vertId],delete c[v.fragId][v.vertId]),Object.keys(c[v.fragId]).length||(e.deleteShader(i[v.fragId]),delete i[v.fragId],delete c[v.fragId])}})},restore:function(){i={},a={};for(var e=0;e<f.length;++e)p(f[e],null,f[e].attributes.map(function(e){return[e.location,e.name]}))},shader:l,frag:-1,vert:-1}}var Zr=6408,Kr=5121,Qr=3333,$r=5126;function en(t,r,n,o,i,a,s){function u(u){var l;null===r.next?(R(i.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),l=Kr):(R(null!==r.next.colorAttachments[0].texture,"You cannot read from a renderbuffer"),l=r.next.colorAttachments[0].texture._texture.type,a.oes_texture_float?(R(l===Kr||l===$r,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),l===$r&&R(s.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):R(l===Kr,"Reading from a framebuffer is only allowed for the type 'uint8'"));var c=0,f=0,h=o.framebufferWidth,p=o.framebufferHeight,d=null;e(u)?d=u:u&&(R.type(u,"object","invalid arguments to regl.read()"),c=0|u.x,f=0|u.y,R(c>=0&&c<o.framebufferWidth,"invalid x offset for regl.read"),R(f>=0&&f<o.framebufferHeight,"invalid y offset for regl.read"),h=0|(u.width||o.framebufferWidth-c),p=0|(u.height||o.framebufferHeight-f),d=u.data||null),d&&(l===Kr?R(d instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):l===$r&&R(d instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'")),R(h>0&&h+c<=o.framebufferWidth,"invalid width for read pixels"),R(p>0&&p+f<=o.framebufferHeight,"invalid height for read pixels"),n();var y=h*p*4;return d||(l===Kr?d=new Uint8Array(y):l===$r&&(d=d||new Float32Array(y))),R.isTypedArray(d,"data buffer for regl.read() must be a typedarray"),R(d.byteLength>=y,"data buffer for regl.read() too small"),t.pixelStorei(Qr,4),t.readPixels(c,f,h,p,Zr,l,d),d}return function(e){return e&&"framebuffer"in e?function(e){var t;return r.setFBO({framebuffer:e.framebuffer},function(){t=u(e)}),t}(e):u(e)}}function tn(e){return Array.prototype.slice.call(e)}function rn(e){return tn(e).join("")}var nn="xyzw".split(""),on=5121,an=1,sn=2,un=0,ln=1,cn=2,fn=3,hn=4,pn=5,dn=6,yn="dither",vn="blend.enable",gn="blend.color",mn="blend.equation",bn="blend.func",wn="depth.enable",_n="depth.func",xn="depth.range",Sn="depth.mask",On="colorMask",Pn="cull.enable",En="cull.face",kn="frontFace",Mn="lineWidth",Cn="polygonOffset.enable",jn="polygonOffset.offset",Tn="sample.alpha",An="sample.enable",In="sample.coverage",Rn="stencil.enable",Ln="stencil.mask",Nn="stencil.func",Dn="stencil.opFront",Bn="stencil.opBack",Fn="scissor.enable",Gn="scissor.box",zn="viewport",Un="profile",Vn="framebuffer",Wn="vert",Yn="frag",Hn="elements",Xn="primitive",qn="count",Jn="offset",Zn="instances",Kn="vao",Qn=Vn+"Width",$n=Vn+"Height",eo=zn+"Width",to=zn+"Height",ro="drawingBufferWidth",no="drawingBufferHeight",oo=[bn,mn,Nn,Dn,Bn,In,zn,Gn,jn],io=34962,ao=34963,so=3553,uo=34067,lo=2884,co=3042,fo=3024,ho=2960,po=2929,yo=3089,vo=32823,go=32926,mo=32928,bo=5126,wo=35664,_o=35665,xo=35666,So=5124,Oo=35667,Po=35668,Eo=35669,ko=35670,Mo=35671,Co=35672,jo=35673,To=35674,Ao=35675,Io=35676,Ro=35678,Lo=35680,No=4,Do=1028,Bo=1029,Fo=2304,Go=2305,zo=32775,Uo=32776,Vo=519,Wo=7680,Yo=0,Ho=1,Xo=32774,qo=513,Jo=36160,Zo=36064,Ko={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},Qo=["constant color, constant alpha","one minus constant color, constant alpha","constant color, one minus constant alpha","one minus constant color, one minus constant alpha","constant alpha, constant color","constant alpha, one minus constant color","one minus constant alpha, constant color","one minus constant alpha, one minus constant color"],$o={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},ei={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},ti={frag:35632,vert:35633},ri={cw:Fo,ccw:Go};function ni(t){return Array.isArray(t)||e(t)||ae(t)}function oi(e){return e.sort(function(e,t){return e===zn?-1:t===zn?1:e<t?-1:1})}function ii(e,t,r,n){this.thisDep=e,this.contextDep=t,this.propDep=r,this.append=n}function ai(e){return e&&!(e.thisDep||e.contextDep||e.propDep)}function si(e){return new ii(!1,!1,!1,e)}function ui(e,t){var r=e.type;if(r===un){var n=e.data.length;return new ii(!0,n>=1,n>=2,t)}if(r===hn){var o=e.data;return new ii(o.thisDep,o.contextDep,o.propDep,t)}if(r===pn)return new ii(!1,!1,!1,t);if(r===dn){for(var i=!1,a=!1,s=!1,u=0;u<e.data.length;++u){var l=e.data[u];if(l.type===ln)s=!0;else if(l.type===cn)a=!0;else if(l.type===fn)i=!0;else if(l.type===un){i=!0;var c=l.data;c>=1&&(a=!0),c>=2&&(s=!0)}else l.type===hn&&(i=i||l.data.thisDep,a=a||l.data.contextDep,s=s||l.data.propDep)}return new ii(i,a,s,t)}return new ii(r===fn,r===cn,r===ln,t)}var li=new ii(!1,!1,!1,function(){});function ci(e,r,n,o,i,s,u,l,c,f,h,p,d,y,v){var g=f.Record,m={add:32774,subtract:32778,"reverse subtract":32779};n.ext_blend_minmax&&(m.min=zo,m.max=Uo);var b=n.angle_instanced_arrays,w=n.webgl_draw_buffers,_={dirty:!0,profile:v.profile},x={},S=[],O={},P={};function E(e){return e.replace(".","_")}function k(e,t,r){var n=E(e);S.push(e),x[n]=_[n]=!!r,O[n]=t}function M(e,t,r){var n=E(e);S.push(e),Array.isArray(r)?(_[n]=r.slice(),x[n]=r.slice()):_[n]=x[n]=r,P[n]=t}k(yn,fo),k(vn,co),M(gn,"blendColor",[0,0,0,0]),M(mn,"blendEquationSeparate",[Xo,Xo]),M(bn,"blendFuncSeparate",[Ho,Yo,Ho,Yo]),k(wn,po,!0),M(_n,"depthFunc",qo),M(xn,"depthRange",[0,1]),M(Sn,"depthMask",!0),M(On,On,[!0,!0,!0,!0]),k(Pn,lo),M(En,"cullFace",Bo),M(kn,kn,Go),M(Mn,Mn,1),k(Cn,vo),M(jn,"polygonOffset",[0,0]),k(Tn,go),k(An,mo),M(In,"sampleCoverage",[1,!1]),k(Rn,ho),M(Ln,"stencilMask",-1),M(Nn,"stencilFunc",[Vo,0,-1]),M(Dn,"stencilOpSeparate",[Do,Wo,Wo,Wo]),M(Bn,"stencilOpSeparate",[Bo,Wo,Wo,Wo]),k(Fn,yo),M(Gn,"scissor",[0,0,e.drawingBufferWidth,e.drawingBufferHeight]),M(zn,zn,[0,0,e.drawingBufferWidth,e.drawingBufferHeight]);var C={gl:e,context:d,strings:r,next:x,current:_,draw:p,elements:s,buffer:i,shader:h,attributes:f.state,vao:f,uniforms:c,framebuffer:l,extensions:n,timer:y,isBufferArgs:ni},j={primTypes:Se,compareFuncs:$o,blendFuncs:Ko,blendEquations:m,stencilOps:ei,glTypes:fe,orientationType:ri};R.optional(function(){C.isArrayLike=Ge}),w&&(j.backBuffer=[Bo],j.drawBuffer=q(o.maxDrawbuffers,function(e){return 0===e?[0]:q(e,function(e){return Zo+e})}));var T=0;function A(){var e=function(){var e=0,r=[],n=[];function o(){var r=[],n=[];return t(function(){r.push.apply(r,tn(arguments))},{def:function(){var t="v"+e++;return n.push(t),arguments.length>0&&(r.push(t,"="),r.push.apply(r,tn(arguments)),r.push(";")),t},toString:function(){return rn([n.length>0?"var "+n.join(",")+";":"",rn(r)])}})}function i(){var e=o(),r=o(),n=e.toString,i=r.toString;function a(t,n){r(t,n,"=",e.def(t,n),";")}return t(function(){e.apply(e,tn(arguments))},{def:e.def,entry:e,exit:r,save:a,set:function(t,r,n){a(t,r),e(t,r,"=",n,";")},toString:function(){return n()+i()}})}var a=o(),s={};return{global:a,link:function(t){for(var o=0;o<n.length;++o)if(n[o]===t)return r[o];var i="g"+e++;return r.push(i),n.push(t),i},block:o,proc:function(e,r){var n=[];function o(){var e="a"+n.length;return n.push(e),e}r=r||0;for(var a=0;a<r;++a)o();var u=i(),l=u.toString;return s[e]=t(u,{arg:o,toString:function(){return rn(["function(",n.join(),"){",l(),"}"])}})},scope:i,cond:function(){var e=rn(arguments),r=i(),n=i(),o=r.toString,a=n.toString;return t(r,{then:function(){return r.apply(r,tn(arguments)),this},else:function(){return n.apply(n,tn(arguments)),this},toString:function(){var t=a();return t&&(t="else{"+t+"}"),rn(["if(",e,"){",o(),"}",t])}})},compile:function(){var e=['"use strict";',a,"return {"];Object.keys(s).forEach(function(t){e.push('"',t,'":',s[t].toString(),",")}),e.push("}");var t=rn(e).replace(/;/g,";\n").replace(/}/g,"}\n").replace(/{/g,"{\n");return Function.apply(null,r.concat(t)).apply(null,n)}}}(),n=e.link,o=e.global;e.id=T++,e.batchId="0";var i=n(C),a=e.shared={props:"a0"};Object.keys(C).forEach(function(e){a[e]=o.def(i,".",e)}),R.optional(function(){e.CHECK=n(R),e.commandStr=R.guessCommand(),e.command=n(e.commandStr),e.assert=function(e,t,r){e("if(!(",t,"))",this.CHECK,".commandRaise(",n(r),",",this.command,");")},j.invalidBlendCombinations=Qo});var s=e.next={},u=e.current={};Object.keys(P).forEach(function(e){Array.isArray(_[e])&&(s[e]=o.def(a.next,".",e),u[e]=o.def(a.current,".",e))});var l=e.constants={};Object.keys(j).forEach(function(e){l[e]=o.def(JSON.stringify(j[e]))}),e.invoke=function(t,r){switch(r.type){case un:var o=["this",a.context,a.props,e.batchId];return t.def(n(r.data),".call(",o.slice(0,Math.max(r.data.length+1,4)),")");case ln:return t.def(a.props,r.data);case cn:return t.def(a.context,r.data);case fn:return t.def("this",r.data);case hn:return r.data.append(e,t),r.data.ref;case pn:return r.data.toString();case dn:return r.data.map(function(r){return e.invoke(t,r)})}},e.attribCache={};var c={};return e.scopeAttrib=function(e){var t=r.id(e);if(t in c)return c[t];var o=f.scope[t];return o||(o=f.scope[t]=new g),c[t]=n(o)},e}function I(e,t,u,c,p){var d=e.static,y=e.dynamic;R.optional(function(){var e=[Vn,Wn,Yn,Hn,Xn,Jn,qn,Zn,Un,Kn].concat(S);function t(t){Object.keys(t).forEach(function(t){R.command(e.indexOf(t)>=0,'unknown parameter "'+t+'"',p.commandStr)})}t(d),t(y)});var v=function(e,t){var r=e.static;if("string"==typeof r[Yn]&&"string"==typeof r[Wn]){if(Object.keys(t.dynamic).length>0)return null;var n=t.static,o=Object.keys(n);if(o.length>0&&"number"==typeof n[o[0]]){for(var i=[],a=0;a<o.length;++a)R("number"==typeof n[o[a]],"must specify all vertex attribute locations when using vaos"),i.push([0|n[o[a]],o[a]]);return i}}return null}(e,t),w=function(e,t){var r=e.static,n=e.dynamic;if(Vn in r){var o=r[Vn];return o?(o=l.getFramebuffer(o),R.command(o,"invalid framebuffer object"),si(function(e,t){var r=e.link(o),n=e.shared;t.set(n.framebuffer,".next",r);var i=n.context;return t.set(i,"."+Qn,r+".width"),t.set(i,"."+$n,r+".height"),r})):si(function(e,t){var r=e.shared;t.set(r.framebuffer,".next","null");var n=r.context;return t.set(n,"."+Qn,n+"."+ro),t.set(n,"."+$n,n+"."+no),"null"})}if(Vn in n){var i=n[Vn];return ui(i,function(e,t){var r=e.invoke(t,i),n=e.shared,o=n.framebuffer,a=t.def(o,".getFramebuffer(",r,")");R.optional(function(){e.assert(t,"!"+r+"||"+a,"invalid framebuffer object")}),t.set(o,".next",a);var s=n.context;return t.set(s,"."+Qn,a+"?"+a+".width:"+s+"."+ro),t.set(s,"."+$n,a+"?"+a+".height:"+s+"."+no),a})}return null}(e),_=function(e,t,r){var n=e.static,o=e.dynamic;function i(e){if(e in n){var i=n[e];R.commandType(i,"object","invalid "+e,r.commandStr);var a,s,u=!0,l=0|i.x,c=0|i.y;return"width"in i?(a=0|i.width,R.command(a>=0,"invalid "+e,r.commandStr)):u=!1,"height"in i?(s=0|i.height,R.command(s>=0,"invalid "+e,r.commandStr)):u=!1,new ii(!u&&t&&t.thisDep,!u&&t&&t.contextDep,!u&&t&&t.propDep,function(e,t){var r=e.shared.context,n=a;"width"in i||(n=t.def(r,".",Qn,"-",l));var o=s;return"height"in i||(o=t.def(r,".",$n,"-",c)),[l,c,n,o]})}if(e in o){var f=o[e],h=ui(f,function(t,r){var n=t.invoke(r,f);R.optional(function(){t.assert(r,n+"&&typeof "+n+'==="object"',"invalid "+e)});var o=t.shared.context,i=r.def(n,".x|0"),a=r.def(n,".y|0"),s=r.def('"width" in ',n,"?",n,".width|0:","(",o,".",Qn,"-",i,")"),u=r.def('"height" in ',n,"?",n,".height|0:","(",o,".",$n,"-",a,")");return R.optional(function(){t.assert(r,s+">=0&&"+u+">=0","invalid "+e)}),[i,a,s,u]});return t&&(h.thisDep=h.thisDep||t.thisDep,h.contextDep=h.contextDep||t.contextDep,h.propDep=h.propDep||t.propDep),h}return t?new ii(t.thisDep,t.contextDep,t.propDep,function(e,t){var r=e.shared.context;return[0,0,t.def(r,".",Qn),t.def(r,".",$n)]}):null}var a=i(zn);if(a){var s=a;a=new ii(a.thisDep,a.contextDep,a.propDep,function(e,t){var r=s.append(e,t),n=e.shared.context;return t.set(n,"."+eo,r[2]),t.set(n,"."+to,r[3]),r})}return{viewport:a,scissor_box:i(Gn)}}(e,w,p),x=function(e,t){var r=e.static,n=e.dynamic,o=function(){if(Hn in r){var e=r[Hn];ni(e)?e=s.getElements(s.create(e,!0)):e&&(e=s.getElements(e),R.command(e,"invalid elements",t.commandStr));var o=si(function(t,r){if(e){var n=t.link(e);return t.ELEMENTS=n,n}return t.ELEMENTS=null,null});return o.value=e,o}if(Hn in n){var i=n[Hn];return ui(i,function(e,t){var r=e.shared,n=r.isBufferArgs,o=r.elements,a=e.invoke(t,i),s=t.def("null"),u=t.def(n,"(",a,")"),l=e.cond(u).then(s,"=",o,".createStream(",a,");").else(s,"=",o,".getElements(",a,");");return R.optional(function(){e.assert(l.else,"!"+a+"||"+s,"invalid elements")}),t.entry(l),t.exit(e.cond(u).then(o,".destroyStream(",s,");")),e.ELEMENTS=s,s})}return null}();function i(e,i){if(e in r){var a=0|r[e];return R.command(!i||a>=0,"invalid "+e,t.commandStr),si(function(e,t){return i&&(e.OFFSET=a),a})}if(e in n){var s=n[e];return ui(s,function(t,r){var n=t.invoke(r,s);return i&&(t.OFFSET=n,R.optional(function(){t.assert(r,n+">=0","invalid "+e)})),n})}return i&&o?si(function(e,t){return e.OFFSET="0",0}):null}var a=i(Jn,!0);return{elements:o,primitive:function(){if(Xn in r){var e=r[Xn];return R.commandParameter(e,Se,"invalid primitve",t.commandStr),si(function(t,r){return Se[e]})}if(Xn in n){var i=n[Xn];return ui(i,function(e,t){var r=e.constants.primTypes,n=e.invoke(t,i);return R.optional(function(){e.assert(t,n+" in "+r,"invalid primitive, must be one of "+Object.keys(Se))}),t.def(r,"[",n,"]")})}return o?ai(o)?o.value?si(function(e,t){return t.def(e.ELEMENTS,".primType")}):si(function(){return No}):new ii(o.thisDep,o.contextDep,o.propDep,function(e,t){var r=e.ELEMENTS;return t.def(r,"?",r,".primType:",No)}):null}(),count:function(){if(qn in r){var e=0|r[qn];return R.command("number"==typeof e&&e>=0,"invalid vertex count",t.commandStr),si(function(){return e})}if(qn in n){var i=n[qn];return ui(i,function(e,t){var r=e.invoke(t,i);return R.optional(function(){e.assert(t,"typeof "+r+'==="number"&&'+r+">=0&&"+r+"===("+r+"|0)","invalid vertex count")}),r})}if(o){if(ai(o)){if(o)return a?new ii(a.thisDep,a.contextDep,a.propDep,function(e,t){var r=t.def(e.ELEMENTS,".vertCount-",e.OFFSET);return R.optional(function(){e.assert(t,r+">=0","invalid vertex offset/element buffer too small")}),r}):si(function(e,t){return t.def(e.ELEMENTS,".vertCount")});var s=si(function(){return-1});return R.optional(function(){s.MISSING=!0}),s}var u=new ii(o.thisDep||a.thisDep,o.contextDep||a.contextDep,o.propDep||a.propDep,function(e,t){var r=e.ELEMENTS;return e.OFFSET?t.def(r,"?",r,".vertCount-",e.OFFSET,":-1"):t.def(r,"?",r,".vertCount:-1")});return R.optional(function(){u.DYNAMIC=!0}),u}return null}(),instances:i(Zn,!1),offset:a}}(e,p),O=function(e,t){var r=e.static,n=e.dynamic,i={};return S.forEach(function(e){var s=E(e);function u(t,o){if(e in r){var a=t(r[e]);i[s]=si(function(){return a})}else if(e in n){var u=n[e];i[s]=ui(u,function(e,t){return o(e,t,e.invoke(t,u))})}}switch(e){case Pn:case vn:case yn:case Rn:case wn:case Fn:case Cn:case Tn:case An:case Sn:return u(function(r){return R.commandType(r,"boolean",e,t.commandStr),r},function(t,r,n){return R.optional(function(){t.assert(r,"typeof "+n+'==="boolean"',"invalid flag "+e,t.commandStr)}),n});case _n:return u(function(r){return R.commandParameter(r,$o,"invalid "+e,t.commandStr),$o[r]},function(t,r,n){var o=t.constants.compareFuncs;return R.optional(function(){t.assert(r,n+" in "+o,"invalid "+e+", must be one of "+Object.keys($o))}),r.def(o,"[",n,"]")});case xn:return u(function(e){return R.command(Ge(e)&&2===e.length&&"number"==typeof e[0]&&"number"==typeof e[1]&&e[0]<=e[1],"depth range is 2d array",t.commandStr),e},function(e,t,r){return R.optional(function(){e.assert(t,e.shared.isArrayLike+"("+r+")&&"+r+".length===2&&typeof "+r+'[0]==="number"&&typeof '+r+'[1]==="number"&&'+r+"[0]<="+r+"[1]","depth range must be a 2d array")}),[t.def("+",r,"[0]"),t.def("+",r,"[1]")]});case bn:return u(function(e){R.commandType(e,"object","blend.func",t.commandStr);var r="srcRGB"in e?e.srcRGB:e.src,n="srcAlpha"in e?e.srcAlpha:e.src,o="dstRGB"in e?e.dstRGB:e.dst,i="dstAlpha"in e?e.dstAlpha:e.dst;return R.commandParameter(r,Ko,s+".srcRGB",t.commandStr),R.commandParameter(n,Ko,s+".srcAlpha",t.commandStr),R.commandParameter(o,Ko,s+".dstRGB",t.commandStr),R.commandParameter(i,Ko,s+".dstAlpha",t.commandStr),R.command(-1===Qo.indexOf(r+", "+o),"unallowed blending combination (srcRGB, dstRGB) = ("+r+", "+o+")",t.commandStr),[Ko[r],Ko[o],Ko[n],Ko[i]]},function(t,r,n){var o=t.constants.blendFuncs;function i(i,a){var s=r.def('"',i,a,'" in ',n,"?",n,".",i,a,":",n,".",i);return R.optional(function(){t.assert(r,s+" in "+o,"invalid "+e+"."+i+a+", must be one of "+Object.keys(Ko))}),s}R.optional(function(){t.assert(r,n+"&&typeof "+n+'==="object"',"invalid blend func, must be an object")});var a=i("src","RGB"),s=i("dst","RGB");R.optional(function(){var e=t.constants.invalidBlendCombinations;t.assert(r,e+".indexOf("+a+'+", "+'+s+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var u=r.def(o,"[",a,"]"),l=r.def(o,"[",i("src","Alpha"),"]");return[u,r.def(o,"[",s,"]"),l,r.def(o,"[",i("dst","Alpha"),"]")]});case mn:return u(function(r){return"string"==typeof r?(R.commandParameter(r,m,"invalid "+e,t.commandStr),[m[r],m[r]]):"object"===a(r)?(R.commandParameter(r.rgb,m,e+".rgb",t.commandStr),R.commandParameter(r.alpha,m,e+".alpha",t.commandStr),[m[r.rgb],m[r.alpha]]):void R.commandRaise("invalid blend.equation",t.commandStr)},function(t,r,n){var o=t.constants.blendEquations,i=r.def(),a=r.def(),s=t.cond("typeof ",n,'==="string"');return R.optional(function(){function r(e,r,n){t.assert(e,n+" in "+o,"invalid "+r+", must be one of "+Object.keys(m))}r(s.then,e,n),t.assert(s.else,n+"&&typeof "+n+'==="object"',"invalid "+e),r(s.else,e+".rgb",n+".rgb"),r(s.else,e+".alpha",n+".alpha")}),s.then(i,"=",a,"=",o,"[",n,"];"),s.else(i,"=",o,"[",n,".rgb];",a,"=",o,"[",n,".alpha];"),r(s),[i,a]});case gn:return u(function(e){return R.command(Ge(e)&&4===e.length,"blend.color must be a 4d array",t.commandStr),q(4,function(t){return+e[t]})},function(e,t,r){return R.optional(function(){e.assert(t,e.shared.isArrayLike+"("+r+")&&"+r+".length===4","blend.color must be a 4d array")}),q(4,function(e){return t.def("+",r,"[",e,"]")})});case Ln:return u(function(e){return R.commandType(e,"number",s,t.commandStr),0|e},function(e,t,r){return R.optional(function(){e.assert(t,"typeof "+r+'==="number"',"invalid stencil.mask")}),t.def(r,"|0")});case Nn:return u(function(r){R.commandType(r,"object",s,t.commandStr);var n=r.cmp||"keep",o=r.ref||0,i="mask"in r?r.mask:-1;return R.commandParameter(n,$o,e+".cmp",t.commandStr),R.commandType(o,"number",e+".ref",t.commandStr),R.commandType(i,"number",e+".mask",t.commandStr),[$o[n],o,i]},function(e,t,r){var n=e.constants.compareFuncs;return R.optional(function(){function o(){e.assert(t,Array.prototype.join.call(arguments,""),"invalid stencil.func")}o(r+"&&typeof ",r,'==="object"'),o('!("cmp" in ',r,")||(",r,".cmp in ",n,")")}),[t.def('"cmp" in ',r,"?",n,"[",r,".cmp]",":",Wo),t.def(r,".ref|0"),t.def('"mask" in ',r,"?",r,".mask|0:-1")]});case Dn:case Bn:return u(function(r){R.commandType(r,"object",s,t.commandStr);var n=r.fail||"keep",o=r.zfail||"keep",i=r.zpass||"keep";return R.commandParameter(n,ei,e+".fail",t.commandStr),R.commandParameter(o,ei,e+".zfail",t.commandStr),R.commandParameter(i,ei,e+".zpass",t.commandStr),[e===Bn?Bo:Do,ei[n],ei[o],ei[i]]},function(t,r,n){var o=t.constants.stencilOps;function i(i){return R.optional(function(){t.assert(r,'!("'+i+'" in '+n+")||("+n+"."+i+" in "+o+")","invalid "+e+"."+i+", must be one of "+Object.keys(ei))}),r.def('"',i,'" in ',n,"?",o,"[",n,".",i,"]:",Wo)}return R.optional(function(){t.assert(r,n+"&&typeof "+n+'==="object"',"invalid "+e)}),[e===Bn?Bo:Do,i("fail"),i("zfail"),i("zpass")]});case jn:return u(function(e){R.commandType(e,"object",s,t.commandStr);var r=0|e.factor,n=0|e.units;return R.commandType(r,"number",s+".factor",t.commandStr),R.commandType(n,"number",s+".units",t.commandStr),[r,n]},function(t,r,n){return R.optional(function(){t.assert(r,n+"&&typeof "+n+'==="object"',"invalid "+e)}),[r.def(n,".factor|0"),r.def(n,".units|0")]});case En:return u(function(e){var r=0;return"front"===e?r=Do:"back"===e&&(r=Bo),R.command(!!r,s,t.commandStr),r},function(e,t,r){return R.optional(function(){e.assert(t,r+'==="front"||'+r+'==="back"',"invalid cull.face")}),t.def(r,'==="front"?',Do,":",Bo)});case Mn:return u(function(e){return R.command("number"==typeof e&&e>=o.lineWidthDims[0]&&e<=o.lineWidthDims[1],"invalid line width, must be a positive number between "+o.lineWidthDims[0]+" and "+o.lineWidthDims[1],t.commandStr),e},function(e,t,r){return R.optional(function(){e.assert(t,"typeof "+r+'==="number"&&'+r+">="+o.lineWidthDims[0]+"&&"+r+"<="+o.lineWidthDims[1],"invalid line width")}),r});case kn:return u(function(e){return R.commandParameter(e,ri,s,t.commandStr),ri[e]},function(e,t,r){return R.optional(function(){e.assert(t,r+'==="cw"||'+r+'==="ccw"',"invalid frontFace, must be one of cw,ccw")}),t.def(r+'==="cw"?'+Fo+":"+Go)});case On:return u(function(e){return R.command(Ge(e)&&4===e.length,"color.mask must be length 4 array",t.commandStr),e.map(function(e){return!!e})},function(e,t,r){return R.optional(function(){e.assert(t,e.shared.isArrayLike+"("+r+")&&"+r+".length===4","invalid color.mask")}),q(4,function(e){return"!!"+r+"["+e+"]"})});case In:return u(function(e){R.command("object"===a(e)&&e,s,t.commandStr);var r="value"in e?e.value:1,n=!!e.invert;return R.command("number"==typeof r&&r>=0&&r<=1,"sample.coverage.value must be a number between 0 and 1",t.commandStr),[r,n]},function(e,t,r){return R.optional(function(){e.assert(t,r+"&&typeof "+r+'==="object"',"invalid sample.coverage")}),[t.def('"value" in ',r,"?+",r,".value:1"),t.def("!!",r,".invert")]})}}),i}(e,p),P=function(e,t,n){var o=e.static,i=e.dynamic;function a(e){if(e in o){var t=r.id(o[e]);R.optional(function(){h.shader(ti[e],t,R.guessCommand())});var n=si(function(){return t});return n.id=t,n}if(e in i){var a=i[e];return ui(a,function(t,r){var n=t.invoke(r,a),o=r.def(t.shared.strings,".id(",n,")");return R.optional(function(){r(t.shared.shader,".shader(",ti[e],",",o,",",t.command,");")}),o})}return null}var s,u=a(Yn),l=a(Wn),c=null;return ai(u)&&ai(l)?(c=h.program(l.id,u.id,null,n),s=si(function(e,t){return e.link(c)})):s=new ii(u&&u.thisDep||l&&l.thisDep,u&&u.contextDep||l&&l.contextDep,u&&u.propDep||l&&l.propDep,function(e,t){var r,n=e.shared.shader;r=u?u.append(e,t):t.def(n,".",Yn);var o=n+".program("+(l?l.append(e,t):t.def(n,".",Wn))+","+r;return R.optional(function(){o+=","+e.command}),t.def(o+")")}),{frag:u,vert:l,progVar:s,program:c}}(e,0,v);function k(e){var t=_[e];t&&(O[e]=t)}k(zn),k(E(Gn));var M=Object.keys(O).length>0,C={framebuffer:w,draw:x,shader:P,state:O,dirty:M,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(C.profile=function(e){var t,r=e.static,n=e.dynamic;if(Un in r){var o=!!r[Un];(t=si(function(e,t){return o})).enable=o}else if(Un in n){var i=n[Un];t=ui(i,function(e,t){return e.invoke(t,i)})}return t}(e),C.uniforms=function(e,t){var r=e.static,n=e.dynamic,o={};return Object.keys(r).forEach(function(e){var n,i=r[e];if("number"==typeof i||"boolean"==typeof i)n=si(function(){return i});else if("function"==typeof i){var a=i._reglType;"texture2d"===a||"textureCube"===a?n=si(function(e){return e.link(i)}):"framebuffer"===a||"framebufferCube"===a?(R.command(i.color.length>0,'missing color attachment for framebuffer sent to uniform "'+e+'"',t.commandStr),n=si(function(e){return e.link(i.color[0])})):R.commandRaise('invalid data for uniform "'+e+'"',t.commandStr)}else Ge(i)?n=si(function(t){return t.global.def("[",q(i.length,function(r){return R.command("number"==typeof i[r]||"boolean"==typeof i[r],"invalid uniform "+e,t.commandStr),i[r]}),"]")}):R.commandRaise('invalid or missing data for uniform "'+e+'"',t.commandStr);n.value=i,o[e]=n}),Object.keys(n).forEach(function(e){var t=n[e];o[e]=ui(t,function(e,r){return e.invoke(r,t)})}),o}(u,p),C.drawVAO=C.scopeVAO=function(e,t){var r=e.static,n=e.dynamic;if(Kn in r){var o=r[Kn];return null!==o&&null===f.getVAO(o)&&(o=f.createVAO(o)),si(function(e){return e.link(f.getVAO(o))})}if(Kn in n){var i=n[Kn];return ui(i,function(e,t){var r=e.invoke(t,i);return t.def(e.shared.vao+".getVAO("+r+")")})}return null}(e),!C.drawVAO&&P.program&&!v&&n.angle_instanced_arrays){var j=!0,T=P.program.attributes.map(function(e){var r=t.static[e];return j=j&&!!r,r});if(j&&T.length>0){var A=f.getVAO(f.createVAO(T));C.drawVAO=new ii(null,null,null,function(e,t){return e.link(A)}),C.useVAO=!0}}return v?C.useVAO=!0:C.attributes=function(e,t){var n=e.static,o=e.dynamic,s={};return Object.keys(n).forEach(function(e){var o=n[e],u=r.id(e),l=new g;if(ni(o))l.state=an,l.buffer=i.getBuffer(i.create(o,io,!1,!0)),l.type=0;else{var c=i.getBuffer(o);if(c)l.state=an,l.buffer=c,l.type=0;else if(R.command("object"===a(o)&&o,"invalid data for attribute "+e,t.commandStr),"constant"in o){var f=o.constant;l.buffer="null",l.state=sn,"number"==typeof f?l.x=f:(R.command(Ge(f)&&f.length>0&&f.length<=4,"invalid constant for attribute "+e,t.commandStr),nn.forEach(function(e,t){t<f.length&&(l[e]=f[t])}))}else{c=ni(o.buffer)?i.getBuffer(i.create(o.buffer,io,!1,!0)):i.getBuffer(o.buffer),R.command(!!c,'missing buffer for attribute "'+e+'"',t.commandStr);var h=0|o.offset;R.command(h>=0,'invalid offset for attribute "'+e+'"',t.commandStr);var p=0|o.stride;R.command(p>=0&&p<256,'invalid stride for attribute "'+e+'", must be integer betweeen [0, 255]',t.commandStr);var d=0|o.size;R.command(!("size"in o)||d>0&&d<=4,'invalid size for attribute "'+e+'", must be 1,2,3,4',t.commandStr);var y=!!o.normalized,v=0;"type"in o&&(R.commandParameter(o.type,fe,"invalid type for attribute "+e,t.commandStr),v=fe[o.type]);var m=0|o.divisor;"divisor"in o&&(R.command(0===m||b,'cannot specify divisor for attribute "'+e+'", instancing not supported',t.commandStr),R.command(m>=0,'invalid divisor for attribute "'+e+'"',t.commandStr)),R.optional(function(){var r=t.commandStr,n=["buffer","offset","divisor","normalized","type","size","stride"];Object.keys(o).forEach(function(t){R.command(n.indexOf(t)>=0,'unknown parameter "'+t+'" for attribute pointer "'+e+'" (valid parameters are '+n+")",r)})}),l.buffer=c,l.state=an,l.size=d,l.normalized=y,l.type=v||c.dtype,l.offset=h,l.stride=p,l.divisor=m}}s[e]=si(function(e,t){var r=e.attribCache;if(u in r)return r[u];var n={isStream:!1};return Object.keys(l).forEach(function(e){n[e]=l[e]}),l.buffer&&(n.buffer=e.link(l.buffer),n.type=n.type||n.buffer+".dtype"),r[u]=n,n})}),Object.keys(o).forEach(function(e){var t=o[e];s[e]=ui(t,function(r,n){var o=r.invoke(n,t),i=r.shared,a=r.constants,s=i.isBufferArgs,u=i.buffer;R.optional(function(){r.assert(n,o+"&&(typeof "+o+'==="object"||typeof '+o+'==="function")&&('+s+"("+o+")||"+u+".getBuffer("+o+")||"+u+".getBuffer("+o+".buffer)||"+s+"("+o+'.buffer)||("constant" in '+o+"&&(typeof "+o+'.constant==="number"||'+i.isArrayLike+"("+o+".constant))))",'invalid dynamic attribute "'+e+'"')});var l={isStream:n.def(!1)},c=new g;c.state=an,Object.keys(c).forEach(function(e){l[e]=n.def(""+c[e])});var f=l.buffer,h=l.type;function p(e){n(l[e],"=",o,".",e,"|0;")}return n("if(",s,"(",o,")){",l.isStream,"=true;",f,"=",u,".createStream(",io,",",o,");",h,"=",f,".dtype;","}else{",f,"=",u,".getBuffer(",o,");","if(",f,"){",h,"=",f,".dtype;",'}else if("constant" in ',o,"){",l.state,"=",sn,";","if(typeof "+o+'.constant === "number"){',l[nn[0]],"=",o,".constant;",nn.slice(1).map(function(e){return l[e]}).join("="),"=0;","}else{",nn.map(function(e,t){return l[e]+"="+o+".constant.length>"+t+"?"+o+".constant["+t+"]:0;"}).join(""),"}}else{","if(",s,"(",o,".buffer)){",f,"=",u,".createStream(",io,",",o,".buffer);","}else{",f,"=",u,".getBuffer(",o,".buffer);","}",h,'="type" in ',o,"?",a.glTypes,"[",o,".type]:",f,".dtype;",l.normalized,"=!!",o,".normalized;"),p("size"),p("offset"),p("stride"),p("divisor"),n("}}"),n.exit("if(",l.isStream,"){",u,".destroyStream(",f,");","}"),l})}),s}(t,p),C.context=function(e){var t=e.static,r=e.dynamic,n={};return Object.keys(t).forEach(function(e){var r=t[e];n[e]=si(function(e,t){return"number"==typeof r||"boolean"==typeof r?""+r:e.link(r)})}),Object.keys(r).forEach(function(e){var t=r[e];n[e]=ui(t,function(e,r){return e.invoke(r,t)})}),n}(c),C}function L(e,t,r){var n=e.shared.context,o=e.scope();Object.keys(r).forEach(function(i){t.save(n,"."+i);var a=r[i].append(e,t);Array.isArray(a)?o(n,".",i,"=[",a.join(),"];"):o(n,".",i,"=",a,";")}),t(o)}function N(e,t,r,n){var o,i=e.shared,a=i.gl,s=i.framebuffer;w&&(o=t.def(i.extensions,".webgl_draw_buffers"));var u,l=e.constants,c=l.drawBuffer,f=l.backBuffer;u=r?r.append(e,t):t.def(s,".next"),n||t("if(",u,"!==",s,".cur){"),t("if(",u,"){",a,".bindFramebuffer(",Jo,",",u,".framebuffer);"),w&&t(o,".drawBuffersWEBGL(",c,"[",u,".colorAttachments.length]);"),t("}else{",a,".bindFramebuffer(",Jo,",null);"),w&&t(o,".drawBuffersWEBGL(",f,");"),t("}",s,".cur=",u,";"),n||t("}")}function D(e,t,r){var n=e.shared,o=n.gl,i=e.current,a=e.next,s=n.current,u=n.next,l=e.cond(s,".dirty");S.forEach(function(t){var n,c,f=E(t);if(!(f in r.state))if(f in a){n=a[f],c=i[f];var h=q(_[f].length,function(e){return l.def(n,"[",e,"]")});l(e.cond(h.map(function(e,t){return e+"!=="+c+"["+t+"]"}).join("||")).then(o,".",P[f],"(",h,");",h.map(function(e,t){return c+"["+t+"]="+e}).join(";"),";"))}else{n=l.def(u,".",f);var p=e.cond(n,"!==",s,".",f);l(p),f in O?p(e.cond(n).then(o,".enable(",O[f],");").else(o,".disable(",O[f],");"),s,".",f,"=",n,";"):p(o,".",P[f],"(",n,");",s,".",f,"=",n,";")}}),0===Object.keys(r.state).length&&l(s,".dirty=false;"),t(l)}function B(e,t,r,n){var o=e.shared,i=e.current,a=o.current,s=o.gl;oi(Object.keys(r)).forEach(function(o){var u=r[o];if(!n||n(u)){var l=u.append(e,t);if(O[o]){var c=O[o];ai(u)?t(s,l?".enable(":".disable(",c,");"):t(e.cond(l).then(s,".enable(",c,");").else(s,".disable(",c,");")),t(a,".",o,"=",l,";")}else if(Ge(l)){var f=i[o];t(s,".",P[o],"(",l,");",l.map(function(e,t){return f+"["+t+"]="+e}).join(";"),";")}else t(s,".",P[o],"(",l,");",a,".",o,"=",l,";")}})}function F(e,t){b&&(e.instancing=t.def(e.shared.extensions,".angle_instanced_arrays"))}function G(e,t,r,n,o){var i,a,s,u=e.shared,l=e.stats,c=u.current,f=u.timer,h=r.profile;function p(){return"undefined"==typeof performance?"Date.now()":"performance.now()"}function d(e){e(i=t.def(),"=",p(),";"),"string"==typeof o?e(l,".count+=",o,";"):e(l,".count++;"),y&&(n?e(a=t.def(),"=",f,".getNumPendingQueries();"):e(f,".beginQuery(",l,");"))}function v(e){e(l,".cpuTime+=",p(),"-",i,";"),y&&(n?e(f,".pushScopeStats(",a,",",f,".getNumPendingQueries(),",l,");"):e(f,".endQuery();"))}function g(e){var r=t.def(c,".profile");t(c,".profile=",e,";"),t.exit(c,".profile=",r,";")}if(h){if(ai(h))return void(h.enable?(d(t),v(t.exit),g("true")):g("false"));g(s=h.append(e,t))}else s=t.def(c,".profile");var m=e.block();d(m),t("if(",s,"){",m,"}");var b=e.block();v(b),t.exit("if(",s,"){",b,"}")}function z(e,t,r,n,o){var i=e.shared;n.forEach(function(n){var a,s=n.name,u=r.attributes[s];if(u){if(!o(u))return;a=u.append(e,t)}else{if(!o(li))return;var l=e.scopeAttrib(s);R.optional(function(){e.assert(t,l+".state","missing attribute "+s)}),a={},Object.keys(new g).forEach(function(e){a[e]=t.def(l,".",e)})}!function(r,n,o){var a=i.gl,s=t.def(r,".location"),u=t.def(i.attributes,"[",s,"]"),l=o.state,c=o.buffer,f=[o.x,o.y,o.z,o.w],h=["buffer","normalized","offset","stride"];function p(){t("if(!",u,".buffer){",a,".enableVertexAttribArray(",s,");}");var r,i=o.type;if(r=o.size?t.def(o.size,"||",n):n,t("if(",u,".type!==",i,"||",u,".size!==",r,"||",h.map(function(e){return u+"."+e+"!=="+o[e]}).join("||"),"){",a,".bindBuffer(",io,",",c,".buffer);",a,".vertexAttribPointer(",[s,r,i,o.normalized,o.stride,o.offset],");",u,".type=",i,";",u,".size=",r,";",h.map(function(e){return u+"."+e+"="+o[e]+";"}).join(""),"}"),b){var l=o.divisor;t("if(",u,".divisor!==",l,"){",e.instancing,".vertexAttribDivisorANGLE(",[s,l],");",u,".divisor=",l,";}")}}function d(){t("if(",u,".buffer){",a,".disableVertexAttribArray(",s,");",u,".buffer=null;","}if(",nn.map(function(e,t){return u+"."+e+"!=="+f[t]}).join("||"),"){",a,".vertexAttrib4f(",s,",",f,");",nn.map(function(e,t){return u+"."+e+"="+f[t]+";"}).join(""),"}")}l===an?p():l===sn?d():(t("if(",l,"===",an,"){"),p(),t("}else{"),d(),t("}"))}(e.link(n),function(e){switch(e){case wo:case Oo:case Mo:return 2;case _o:case Po:case Co:return 3;case xo:case Eo:case jo:return 4;default:return 1}}(n.info.type),a)})}function V(e,t,n,o,i){for(var a,s=e.shared,u=s.gl,l=0;l<o.length;++l){var c,f=o[l],h=f.name,p=f.info.type,d=n.uniforms[h],y=e.link(f)+".location";if(d){if(!i(d))continue;if(ai(d)){var v=d.value;if(R.command(null!==v&&void 0!==v,'missing uniform "'+h+'"',e.commandStr),p===Ro||p===Lo){R.command("function"==typeof v&&(p===Ro&&("texture2d"===v._reglType||"framebuffer"===v._reglType)||p===Lo&&("textureCube"===v._reglType||"framebufferCube"===v._reglType)),"invalid texture for uniform "+h,e.commandStr);var g=e.link(v._texture||v.color[0]._texture);t(u,".uniform1i(",y,",",g+".bind());"),t.exit(g,".unbind();")}else if(p===To||p===Ao||p===Io){R.optional(function(){R.command(Ge(v),"invalid matrix for uniform "+h,e.commandStr),R.command(p===To&&4===v.length||p===Ao&&9===v.length||p===Io&&16===v.length,"invalid length for matrix uniform "+h,e.commandStr)});var m=e.global.def("new Float32Array(["+Array.prototype.slice.call(v)+"])"),b=2;p===Ao?b=3:p===Io&&(b=4),t(u,".uniformMatrix",b,"fv(",y,",false,",m,");")}else{switch(p){case bo:R.commandType(v,"number","uniform "+h,e.commandStr),a="1f";break;case wo:R.command(Ge(v)&&2===v.length,"uniform "+h,e.commandStr),a="2f";break;case _o:R.command(Ge(v)&&3===v.length,"uniform "+h,e.commandStr),a="3f";break;case xo:R.command(Ge(v)&&4===v.length,"uniform "+h,e.commandStr),a="4f";break;case ko:R.commandType(v,"boolean","uniform "+h,e.commandStr),a="1i";break;case So:R.commandType(v,"number","uniform "+h,e.commandStr),a="1i";break;case Mo:case Oo:R.command(Ge(v)&&2===v.length,"uniform "+h,e.commandStr),a="2i";break;case Co:case Po:R.command(Ge(v)&&3===v.length,"uniform "+h,e.commandStr),a="3i";break;case jo:case Eo:R.command(Ge(v)&&4===v.length,"uniform "+h,e.commandStr),a="4i"}t(u,".uniform",a,"(",y,",",Ge(v)?Array.prototype.slice.call(v):v,");")}continue}c=d.append(e,t)}else{if(!i(li))continue;c=t.def(s.uniforms,"[",r.id(h),"]")}p===Ro?(R(!Array.isArray(c),"must specify a scalar prop for textures"),t("if(",c,"&&",c,'._reglType==="framebuffer"){',c,"=",c,".color[0];","}")):p===Lo&&(R(!Array.isArray(c),"must specify a scalar prop for cube maps"),t("if(",c,"&&",c,'._reglType==="framebufferCube"){',c,"=",c,".color[0];","}")),R.optional(function(){function r(r,n){e.assert(t,r,'bad data or missing for uniform "'+h+'".  '+n)}function n(e){R(!Array.isArray(c),"must not specify an array type for uniform"),r("typeof "+c+'==="'+e+'"',"invalid type, expected "+e)}function o(t,n){Array.isArray(c)?R(c.length===t,"must have length "+t):r(s.isArrayLike+"("+c+")&&"+c+".length==="+t,"invalid vector, should have length "+t,e.commandStr)}function i(t){R(!Array.isArray(c),"must not specify a value type"),r("typeof "+c+'==="function"&&'+c+'._reglType==="texture'+(t===so?"2d":"Cube")+'"',"invalid texture type",e.commandStr)}switch(p){case So:n("number");break;case Oo:o(2);break;case Po:o(3);break;case Eo:o(4);break;case bo:n("number");break;case wo:o(2);break;case _o:o(3);break;case xo:o(4);break;case ko:n("boolean");break;case Mo:o(2);break;case Co:o(3);break;case jo:case To:o(4);break;case Ao:o(9);break;case Io:o(16);break;case Ro:i(so);break;case Lo:i(uo)}});var w=1;switch(p){case Ro:case Lo:var _=t.def(c,"._texture");t(u,".uniform1i(",y,",",_,".bind());"),t.exit(_,".unbind();");continue;case So:case ko:a="1i";break;case Oo:case Mo:a="2i",w=2;break;case Po:case Co:a="3i",w=3;break;case Eo:case jo:a="4i",w=4;break;case bo:a="1f";break;case wo:a="2f",w=2;break;case _o:a="3f",w=3;break;case xo:a="4f",w=4;break;case To:a="Matrix2fv";break;case Ao:a="Matrix3fv";break;case Io:a="Matrix4fv"}if(t(u,".uniform",a,"(",y,","),"M"===a.charAt(0)){var x=Math.pow(p-To+2,2),S=e.global.def("new Float32Array(",x,")");Array.isArray(c)?t("false,(",q(x,function(e){return S+"["+e+"]="+c[e]}),",",S,")"):t("false,(Array.isArray(",c,")||",c," instanceof Float32Array)?",c,":(",q(x,function(e){return S+"["+e+"]="+c+"["+e+"]"}),",",S,")")}else w>1?t(q(w,function(e){return Array.isArray(c)?c[e]:c+"["+e+"]"})):(R(!Array.isArray(c),"uniform value must not be an array"),t(c));t(");")}}function W(e,t,r,n){var o=e.shared,i=o.gl,a=o.draw,s=n.draw;var u=function(){var o,u=s.elements,l=t;return u?((u.contextDep&&n.contextDynamic||u.propDep)&&(l=r),o=u.append(e,l)):o=l.def(a,".",Hn),o&&l("if("+o+")"+i+".bindBuffer("+ao+","+o+".buffer.buffer);"),o}();function l(o){var i=s[o];return i?i.contextDep&&n.contextDynamic||i.propDep?i.append(e,r):i.append(e,t):t.def(a,".",o)}var c,f,h=l(Xn),p=l(Jn),d=function(){var o,i=s.count,u=t;return i?((i.contextDep&&n.contextDynamic||i.propDep)&&(u=r),o=i.append(e,u),R.optional(function(){i.MISSING&&e.assert(t,"false","missing vertex count"),i.DYNAMIC&&e.assert(u,o+">=0","missing vertex count")})):(o=u.def(a,".",qn),R.optional(function(){e.assert(u,o+">=0","missing vertex count")})),o}();if("number"==typeof d){if(0===d)return}else r("if(",d,"){"),r.exit("}");b&&(c=l(Zn),f=e.instancing);var y=u+".type",v=s.elements&&ai(s.elements);function g(){function e(){r(f,".drawElementsInstancedANGLE(",[h,d,y,p+"<<(("+y+"-"+on+")>>1)",c],");")}function t(){r(f,".drawArraysInstancedANGLE(",[h,p,d,c],");")}u?v?e():(r("if(",u,"){"),e(),r("}else{"),t(),r("}")):t()}function m(){function e(){r(i+".drawElements("+[h,d,y,p+"<<(("+y+"-"+on+")>>1)"]+");")}function t(){r(i+".drawArrays("+[h,p,d]+");")}u?v?e():(r("if(",u,"){"),e(),r("}else{"),t(),r("}")):t()}b&&("number"!=typeof c||c>=0)?"string"==typeof c?(r("if(",c,">0){"),g(),r("}else if(",c,"<0){"),m(),r("}")):g():m()}function Y(e,t,r,n,o){var i=A(),a=i.proc("body",o);return R.optional(function(){i.commandStr=t.commandStr,i.command=i.link(t.commandStr)}),b&&(i.instancing=a.def(i.shared.extensions,".angle_instanced_arrays")),e(i,a,r,n),i.compile().body}function H(e,t,r,n){F(e,t),r.useVAO?r.drawVAO?t(e.shared.vao,".setVAO(",r.drawVAO.append(e,t),");"):t(e.shared.vao,".setVAO(",e.shared.vao,".targetVAO);"):(t(e.shared.vao,".setVAO(null);"),z(e,t,r,n.attributes,function(){return!0})),V(e,t,r,n.uniforms,function(){return!0}),W(e,t,t,r)}function X(e,t,r,n){function o(){return!0}e.batchId="a1",F(e,t),z(e,t,r,n.attributes,o),V(e,t,r,n.uniforms,o),W(e,t,t,r)}function J(e,t,r,n){F(e,t);var o=r.contextDep,i=t.def(),a=t.def();e.shared.props=a,e.batchId=i;var s=e.scope(),u=e.scope();function l(e){return e.contextDep&&o||e.propDep}function c(e){return!l(e)}if(t(s.entry,"for(",i,"=0;",i,"<","a1",";++",i,"){",a,"=","a0","[",i,"];",u,"}",s.exit),r.needsContext&&L(e,u,r.context),r.needsFramebuffer&&N(e,u,r.framebuffer),B(e,u,r.state,l),r.profile&&l(r.profile)&&G(e,u,r,!1,!0),n)r.useVAO?r.drawVAO?l(r.drawVAO)?u(e.shared.vao,".setVAO(",r.drawVAO.append(e,u),");"):s(e.shared.vao,".setVAO(",r.drawVAO.append(e,s),");"):s(e.shared.vao,".setVAO(",e.shared.vao,".targetVAO);"):(s(e.shared.vao,".setVAO(null);"),z(e,s,r,n.attributes,c),z(e,u,r,n.attributes,l)),V(e,s,r,n.uniforms,c),V(e,u,r,n.uniforms,l),W(e,s,u,r);else{var f=e.global.def("{}"),h=r.shader.progVar.append(e,u),p=u.def(h,".id"),d=u.def(f,"[",p,"]");u(e.shared.gl,".useProgram(",h,".program);","if(!",d,"){",d,"=",f,"[",p,"]=",e.link(function(t){return Y(X,e,r,t,2)}),"(",h,");}",d,".call(this,a0[",i,"],",i,");")}}function Z(e,t,r){var n=t.static[r];if(n&&function(e){if("object"===a(e)&&!Ge(e)){for(var t=Object.keys(e),r=0;r<t.length;++r)if(U.isDynamic(e[t[r]]))return!0;return!1}}(n)){var o=e.global,i=Object.keys(n),s=!1,u=!1,l=!1,c=e.global.def("{}");i.forEach(function(t){var r=n[t];if(U.isDynamic(r)){"function"==typeof r&&(r=n[t]=U.unbox(r));var i=ui(r,null);s=s||i.thisDep,l=l||i.propDep,u=u||i.contextDep}else{switch(o(c,".",t,"="),a(r)){case"number":o(r);break;case"string":o('"',r,'"');break;case"object":Array.isArray(r)&&o("[",r.join(),"]");break;default:o(e.link(r))}o(";")}}),t.dynamic[r]=new U.DynamicVariable(hn,{thisDep:s,contextDep:u,propDep:l,ref:c,append:function(e,t){i.forEach(function(r){var o=n[r];if(U.isDynamic(o)){var i=e.invoke(t,o);t(c,".",r,"=",i,";")}})}}),delete t.static[r]}}return{next:x,current:_,procs:function(){var e=A(),t=e.proc("poll"),r=e.proc("refresh"),i=e.block();t(i),r(i);var a,s=e.shared,u=s.gl,l=s.next,c=s.current;i(c,".dirty=false;"),N(e,t),N(e,r,null,!0),b&&(a=e.link(b)),n.oes_vertex_array_object&&r(e.link(n.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var f=0;f<o.maxAttributes;++f){var h=r.def(s.attributes,"[",f,"]"),p=e.cond(h,".buffer");p.then(u,".enableVertexAttribArray(",f,");",u,".bindBuffer(",io,",",h,".buffer.buffer);",u,".vertexAttribPointer(",f,",",h,".size,",h,".type,",h,".normalized,",h,".stride,",h,".offset);").else(u,".disableVertexAttribArray(",f,");",u,".vertexAttrib4f(",f,",",h,".x,",h,".y,",h,".z,",h,".w);",h,".buffer=null;"),r(p),b&&r(a,".vertexAttribDivisorANGLE(",f,",",h,".divisor);")}return r(e.shared.vao,".currentVAO=null;",e.shared.vao,".setVAO(",e.shared.vao,".targetVAO);"),Object.keys(O).forEach(function(n){var o=O[n],a=i.def(l,".",n),s=e.block();s("if(",a,"){",u,".enable(",o,")}else{",u,".disable(",o,")}",c,".",n,"=",a,";"),r(s),t("if(",a,"!==",c,".",n,"){",s,"}")}),Object.keys(P).forEach(function(n){var o,a,s=P[n],f=_[n],h=e.block();if(h(u,".",s,"("),Ge(f)){var p=f.length;o=e.global.def(l,".",n),a=e.global.def(c,".",n),h(q(p,function(e){return o+"["+e+"]"}),");",q(p,function(e){return a+"["+e+"]="+o+"["+e+"];"}).join("")),t("if(",q(p,function(e){return o+"["+e+"]!=="+a+"["+e+"]"}).join("||"),"){",h,"}")}else o=i.def(l,".",n),a=i.def(c,".",n),h(o,");",c,".",n,"=",o,";"),t("if(",o,"!==",a,"){",h,"}");r(h)}),e.compile()}(),compile:function(e,n,o,i,a){var s=A();s.stats=s.link(a),Object.keys(n.static).forEach(function(e){Z(s,n,e)}),oo.forEach(function(t){Z(s,e,t)});var u=I(e,n,o,i,s);return function(e,t){var r=e.proc("draw",1);F(e,r),L(e,r,t.context),N(e,r,t.framebuffer),D(e,r,t),B(e,r,t.state),G(e,r,t,!1,!0);var n=t.shader.progVar.append(e,r);if(r(e.shared.gl,".useProgram(",n,".program);"),t.shader.program)H(e,r,t,t.shader.program);else{r(e.shared.vao,".setVAO(null);");var o=e.global.def("{}"),i=r.def(n,".id"),a=r.def(o,"[",i,"]");r(e.cond(a).then(a,".call(this,a0);").else(a,"=",o,"[",i,"]=",e.link(function(r){return Y(H,e,t,r,1)}),"(",n,");",a,".call(this,a0);"))}Object.keys(t.state).length>0&&r(e.shared.current,".dirty=true;")}(s,u),function(e,t){var n=e.proc("scope",3);e.batchId="a2";var o=e.shared,i=o.current;function a(r){var i=t.shader[r];i&&n.set(o.shader,"."+r,i.append(e,n))}L(e,n,t.context),t.framebuffer&&t.framebuffer.append(e,n),oi(Object.keys(t.state)).forEach(function(r){var i=t.state[r].append(e,n);Ge(i)?i.forEach(function(t,o){n.set(e.next[r],"["+o+"]",t)}):n.set(o.next,"."+r,i)}),G(e,n,t,!0,!0),[Hn,Jn,qn,Zn,Xn].forEach(function(r){var i=t.draw[r];i&&n.set(o.draw,"."+r,""+i.append(e,n))}),Object.keys(t.uniforms).forEach(function(i){var a=t.uniforms[i].append(e,n);Array.isArray(a)&&(a="["+a.join()+"]"),n.set(o.uniforms,"["+r.id(i)+"]",a)}),Object.keys(t.attributes).forEach(function(r){var o=t.attributes[r].append(e,n),i=e.scopeAttrib(r);Object.keys(new g).forEach(function(e){n.set(i,"."+e,o[e])})}),t.scopeVAO&&n.set(o.vao,".targetVAO",t.scopeVAO.append(e,n)),a(Wn),a(Yn),Object.keys(t.state).length>0&&(n(i,".dirty=true;"),n.exit(i,".dirty=true;")),n("a1(",e.shared.context,",a0,",e.batchId,");")}(s,u),function(e,t){var r=e.proc("batch",2);e.batchId="0",F(e,r);var n=!1,o=!0;Object.keys(t.context).forEach(function(e){n=n||t.context[e].propDep}),n||(L(e,r,t.context),o=!1);var i=t.framebuffer,a=!1;function s(e){return e.contextDep&&n||e.propDep}i?(i.propDep?n=a=!0:i.contextDep&&n&&(a=!0),a||N(e,r,i)):N(e,r,null),t.state.viewport&&t.state.viewport.propDep&&(n=!0),D(e,r,t),B(e,r,t.state,function(e){return!s(e)}),t.profile&&s(t.profile)||G(e,r,t,!1,"a1"),t.contextDep=n,t.needsContext=o,t.needsFramebuffer=a;var u=t.shader.progVar;if(u.contextDep&&n||u.propDep)J(e,r,t,null);else{var l=u.append(e,r);if(r(e.shared.gl,".useProgram(",l,".program);"),t.shader.program)J(e,r,t,t.shader.program);else{r(e.shared.vao,".setVAO(null);");var c=e.global.def("{}"),f=r.def(l,".id"),h=r.def(c,"[",f,"]");r(e.cond(h).then(h,".call(this,a0,a1);").else(h,"=",c,"[",f,"]=",e.link(function(r){return Y(J,e,t,r,2)}),"(",l,");",h,".call(this,a0,a1);"))}}Object.keys(t.state).length>0&&r(e.shared.current,".dirty=true;")}(s,u),t(s.compile(),{destroy:function(){u.shader.program.destroy()}})}}}var fi=34918,hi=34919,pi=35007,di=function(e,t){if(!t.ext_disjoint_timer_query)return null;var r=[];function n(e){r.push(e)}var o=[];var i=[];function a(e){i.push(e)}var s=[];function u(e,t,r){var n=i.pop()||new function(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null};n.startQueryIndex=e,n.endQueryIndex=t,n.sum=0,n.stats=r,s.push(n)}var l=[],c=[];return{beginQuery:function(e){var n=r.pop()||t.ext_disjoint_timer_query.createQueryEXT();t.ext_disjoint_timer_query.beginQueryEXT(pi,n),o.push(n),u(o.length-1,o.length,e)},endQuery:function(){t.ext_disjoint_timer_query.endQueryEXT(pi)},pushScopeStats:u,update:function(){var e,r,i=o.length;if(0!==i){c.length=Math.max(c.length,i+1),l.length=Math.max(l.length,i+1),l[0]=0,c[0]=0;var u=0;for(e=0,r=0;r<o.length;++r){var f=o[r];t.ext_disjoint_timer_query.getQueryObjectEXT(f,hi)?(u+=t.ext_disjoint_timer_query.getQueryObjectEXT(f,fi),n(f)):o[e++]=f,l[r+1]=u,c[r+1]=e}for(o.length=e,e=0,r=0;r<s.length;++r){var h=s[r],p=h.startQueryIndex,d=h.endQueryIndex;h.sum+=l[d]-l[p];var y=c[p],v=c[d];v===y?(h.stats.gpuTime+=h.sum/1e6,a(h)):(h.startQueryIndex=y,h.endQueryIndex=v,s[e++]=h)}s.length=e}},getNumPendingQueries:function(){return o.length},clear:function(){r.push.apply(r,o);for(var e=0;e<r.length;e++)t.ext_disjoint_timer_query.deleteQueryEXT(r[e]);o.length=0,r.length=0},restore:function(){o.length=0,r.length=0}}},yi=16384,vi=256,gi=1024,mi=34962,bi="webglcontextlost",wi="webglcontextrestored",_i=1,xi=2,Si=3;function Oi(e,t){for(var r=0;r<e.length;++r)if(e[r]===t)return r;return-1}return function(r){var n=X(r);if(!n)return null;var o=n.gl,i=o.getContextAttributes(),s=o.isContextLost(),u=function(e,t){var r={};function n(t){R.type(t,"string","extension name must be string");var n,o=t.toLowerCase();try{n=r[o]=e.getExtension(o)}catch(e){}return!!n}for(var o=0;o<t.extensions.length;++o){var i=t.extensions[o];if(!n(i))return t.onDestroy(),t.onDone('"'+i+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return t.optionalExtensions.forEach(n),{extensions:r,restore:function(){Object.keys(r).forEach(function(e){if(r[e]&&!n(e))throw new Error("(regl): error restoring extension "+e)})}}}(o,n);if(!u)return null;var l,c,f=(l={"":0},c=[""],{id:function(e){var t=l[e];return t||(t=l[e]=c.length,c.push(e),t)},str:function(e){return c[e]}}),h={vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0},p=u.extensions,d=di(o,p),y=W(),v=o.drawingBufferWidth,g=o.drawingBufferHeight,m={tick:0,time:0,viewportWidth:v,viewportHeight:g,framebufferWidth:v,framebufferHeight:g,drawingBufferWidth:v,drawingBufferHeight:g,pixelRatio:n.pixelRatio},b=ie(o,p),w=function(t,r,n,o){var i=0,a={};function s(e){this.id=i++,this.buffer=t.createBuffer(),this.type=e,this.usage=ye,this.byteLength=0,this.dimension=1,this.dtype=ge,this.persistentData=null,n.profile&&(this.stats={size:0})}s.prototype.bind=function(){t.bindBuffer(this.type,this.buffer)},s.prototype.destroy=function(){f(this)};var u=[];function l(e,r,n){e.byteLength=r.byteLength,t.bufferData(e.type,r,n)}function c(t,r,n,o,i,a){var s,u;if(t.usage=n,Array.isArray(r)){if(t.dtype=o||me,r.length>0)if(Array.isArray(r[0])){s=de(r);for(var c=1,f=1;f<s.length;++f)c*=s[f];t.dimension=c,l(t,u=pe(r,s,t.dtype),n),a?t.persistentData=u:oe.freeType(u)}else if("number"==typeof r[0]){t.dimension=i;var h=oe.allocType(t.dtype,r.length);_e(h,r),l(t,h,n),a?t.persistentData=h:oe.freeType(h)}else e(r[0])?(t.dimension=r[0].length,t.dtype=o||we(r[0])||me,l(t,u=pe(r,[r.length,r[0].length],t.dtype),n),a?t.persistentData=u:oe.freeType(u)):R.raise("invalid buffer data")}else if(e(r))t.dtype=o||we(r),t.dimension=i,l(t,r,n),a&&(t.persistentData=new Uint8Array(new Uint8Array(r.buffer)));else if(ae(r)){s=r.shape;var p=r.stride,d=r.offset,y=0,v=0,g=0,m=0;1===s.length?(y=s[0],v=1,g=p[0],m=0):2===s.length?(y=s[0],v=s[1],g=p[0],m=p[1]):R.raise("invalid shape"),t.dtype=o||we(r.data)||me,t.dimension=v;var b=oe.allocType(t.dtype,y*v);xe(b,r.data,y,v,g,m,d),l(t,b,n),a?t.persistentData=b:oe.freeType(b)}else r instanceof ArrayBuffer?(t.dtype=ge,t.dimension=i,l(t,r,n),a&&(t.persistentData=new Uint8Array(new Uint8Array(r)))):R.raise("invalid buffer data")}function f(e){r.bufferCount--,o(e);var n=e.buffer;R(n,"buffer must not be deleted already"),t.deleteBuffer(n),e.buffer=null,delete a[e.id]}return n.profile&&(r.getTotalBufferSize=function(){var e=0;return Object.keys(a).forEach(function(t){e+=a[t].stats.size}),e}),{create:function(o,i,u,l){r.bufferCount++;var h=new s(i);function p(r){var o=ye,i=null,a=0,s=0,u=1;return Array.isArray(r)||e(r)||ae(r)||r instanceof ArrayBuffer?i=r:"number"==typeof r?a=0|r:r&&(R.type(r,"object","buffer arguments must be an object, a number or an array"),"data"in r&&(R(null===i||Array.isArray(i)||e(i)||ae(i),"invalid data for buffer"),i=r.data),"usage"in r&&(R.parameter(r.usage,he,"invalid buffer usage"),o=he[r.usage]),"type"in r&&(R.parameter(r.type,fe,"invalid buffer type"),s=fe[r.type]),"dimension"in r&&(R.type(r.dimension,"number","invalid dimension"),u=0|r.dimension),"length"in r&&(R.nni(a,"buffer length must be a nonnegative integer"),a=0|r.length)),h.bind(),i?c(h,i,o,s,u,l):(a&&t.bufferData(h.type,a,o),h.dtype=s||ge,h.usage=o,h.dimension=u,h.byteLength=a),n.profile&&(h.stats.size=h.byteLength*be[h.dtype]),p}function d(e,r){R(r+e.byteLength<=h.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+e.byteLength+" starting from offset "+r+" to a buffer of size "+h.byteLength),t.bufferSubData(h.type,r,e)}return a[h.id]=h,u||p(o),p._reglType="buffer",p._buffer=h,p.subdata=function(t,r){var n,o=0|(r||0);if(h.bind(),e(t)||t instanceof ArrayBuffer)d(t,o);else if(Array.isArray(t)){if(t.length>0)if("number"==typeof t[0]){var i=oe.allocType(h.dtype,t.length);_e(i,t),d(i,o),oe.freeType(i)}else if(Array.isArray(t[0])||e(t[0])){n=de(t);var a=pe(t,n,h.dtype);d(a,o),oe.freeType(a)}else R.raise("invalid buffer data")}else if(ae(t)){n=t.shape;var s=t.stride,u=0,l=0,c=0,f=0;1===n.length?(u=n[0],l=1,c=s[0],f=0):2===n.length?(u=n[0],l=n[1],c=s[0],f=s[1]):R.raise("invalid shape");var y=Array.isArray(t.data)?h.dtype:we(t.data),v=oe.allocType(y,u*l);xe(v,t.data,u,l,c,f,t.offset),d(v,o),oe.freeType(v)}else R.raise("invalid data for buffer subdata");return p},n.profile&&(p.stats=h.stats),p.destroy=function(){f(h)},p},createStream:function(e,t){var r=u.pop();return r||(r=new s(e)),r.bind(),c(r,t,ve,0,1,!1),r},destroyStream:function(e){u.push(e)},clear:function(){se(a).forEach(f),u.forEach(f)},getBuffer:function(e){return e&&e._buffer instanceof s?e._buffer:null},restore:function(){se(a).forEach(function(e){e.buffer=t.createBuffer(),t.bindBuffer(e.type,e.buffer),t.bufferData(e.type,e.persistentData||e.byteLength,e.usage)})},_initBuffer:c}}(o,h,n,function(e){return _.destroyBuffer(e)}),_=function(t,r,n,o,i){for(var a=n.maxAttributes,s=new Array(a),u=0;u<a;++u)s[u]=new Wr;var l=0,c={},f={Record:Wr,scope:{},state:s,currentVAO:null,targetVAO:null,restore:h()?function(){h()&&se(c).forEach(function(e){e.refresh()})}:function(){},createVAO:function(t){var n=new d;function s(t){R(Array.isArray(t),"arguments to vertex array constructor must be an array"),R(t.length<a,"too many attributes"),R(t.length>0,"must specify at least one attribute");var o={},u=n.attributes;u.length=t.length;for(var l=0;l<t.length;++l){var c,f=t[l],h=u[l]=new Wr,p=f.data||f;Array.isArray(p)||e(p)||ae(p)?(n.buffers[l]&&(c=n.buffers[l],e(p)&&c._buffer.byteLength>=p.byteLength?c.subdata(p):(c.destroy(),n.buffers[l]=null)),n.buffers[l]||(c=n.buffers[l]=i.create(f,Vr,!1,!0)),h.buffer=i.getBuffer(c),h.size=0|h.buffer.dimension,h.normalized=!1,h.type=h.buffer.dtype,h.offset=0,h.stride=0,h.divisor=0,h.state=1,o[l]=1):i.getBuffer(f)?(h.buffer=i.getBuffer(f),h.size=0|h.buffer.dimension,h.normalized=!1,h.type=h.buffer.dtype,h.offset=0,h.stride=0,h.divisor=0,h.state=1):i.getBuffer(f.buffer)?(h.buffer=i.getBuffer(f.buffer),h.size=0|(+f.size||h.buffer.dimension),h.normalized=!!f.normalized||!1,"type"in f?(R.parameter(f.type,fe,"invalid buffer type"),h.type=fe[f.type]):h.type=h.buffer.dtype,h.offset=0|(f.offset||0),h.stride=0|(f.stride||0),h.divisor=0|(f.divisor||0),h.state=1,R(h.size>=1&&h.size<=4,"size must be between 1 and 4"),R(h.offset>=0,"invalid offset"),R(h.stride>=0&&h.stride<=255,"stride must be between 0 and 255"),R(h.divisor>=0,"divisor must be positive"),R(!h.divisor||!!r.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in f?(R(l>0,"first attribute must not be a constant"),h.x=+f.x||0,h.y=+f.y||0,h.z=+f.z||0,h.w=+f.w||0,h.state=2):R(!1,"invalid attribute spec for location "+l)}for(var d=0;d<n.buffers.length;++d)!o[d]&&n.buffers[d]&&(n.buffers[d].destroy(),n.buffers[d]=null);return n.refresh(),s}return o.vaoCount+=1,s.destroy=function(){for(var e=0;e<n.buffers.length;++e)n.buffers[e]&&n.buffers[e].destroy();n.buffers.length=0,n.destroy()},s._vao=n,s._reglType="vao",s(t)},getVAO:function(e){return"function"==typeof e&&e._vao?e._vao:null},destroyBuffer:function(e){for(var r=0;r<s.length;++r){var n=s[r];n.buffer===e&&(t.disableVertexAttribArray(r),n.buffer=null)}},setVAO:h()?function(e){if(e!==f.currentVAO){var t=h();e?t.bindVertexArrayOES(e.vao):t.bindVertexArrayOES(null),f.currentVAO=e}}:function(e){if(e!==f.currentVAO){if(e)e.bindAttrs();else for(var r=p(),n=0;n<s.length;++n){var o=s[n];o.buffer?(t.enableVertexAttribArray(n),t.vertexAttribPointer(n,o.size,o.type,o.normalized,o.stride,o.offfset),r&&o.divisor&&r.vertexAttribDivisorANGLE(n,o.divisor)):(t.disableVertexAttribArray(n),t.vertexAttrib4f(n,o.x,o.y,o.z,o.w))}f.currentVAO=e}},clear:h()?function(){se(c).forEach(function(e){e.destroy()})}:function(){}};function h(){return r.oes_vertex_array_object}function p(){return r.angle_instanced_arrays}function d(){this.id=++l,this.attributes=[];var e=h();this.vao=e?e.createVertexArrayOES():null,c[this.id]=this,this.buffers=[]}return d.prototype.bindAttrs=function(){for(var e=p(),r=this.attributes,n=0;n<r.length;++n){var o=r[n];o.buffer?(t.enableVertexAttribArray(n),t.bindBuffer(Vr,o.buffer.buffer),t.vertexAttribPointer(n,o.size,o.type,o.normalized,o.stride,o.offset),e&&o.divisor&&e.vertexAttribDivisorANGLE(n,o.divisor)):(t.disableVertexAttribArray(n),t.vertexAttrib4f(n,o.x,o.y,o.z,o.w))}for(var i=r.length;i<a;++i)t.disableVertexAttribArray(i)},d.prototype.refresh=function(){var e=h();e&&(e.bindVertexArrayOES(this.vao),this.bindAttrs(),f.currentVAO=this)},d.prototype.destroy=function(){if(this.vao){var e=h();this===f.currentVAO&&(f.currentVAO=null,e.bindVertexArrayOES(null)),e.deleteVertexArrayOES(this.vao),this.vao=null}c[this.id]&&(delete c[this.id],o.vaoCount-=1)},f}(o,p,b,h,w),x=function(t,r,n,o){var i={},a=0,s={uint8:Me,uint16:je};function u(e){this.id=a++,i[this.id]=this,this.buffer=e,this.primType=Ee,this.vertCount=0,this.type=0}r.oes_element_index_uint&&(s.uint32=Ae),u.prototype.bind=function(){this.buffer.bind()};var l=[];function c(o,i,a,s,u,l,c){var f;if(o.buffer.bind(),i){var h=c;c||e(i)&&(!ae(i)||e(i.data))||(h=r.oes_element_index_uint?Ae:je),n._initBuffer(o.buffer,i,a,h,3)}else t.bufferData(Ie,l,a),o.buffer.dtype=f||Me,o.buffer.usage=a,o.buffer.dimension=3,o.buffer.byteLength=l;if(f=c,!c){switch(o.buffer.dtype){case Me:case ke:f=Me;break;case je:case Ce:f=je;break;case Ae:case Te:f=Ae;break;default:R.raise("unsupported type for element array")}o.buffer.dtype=f}o.type=f,R(f!==Ae||!!r.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");var p=u;p<0&&(p=o.buffer.byteLength,f===je?p>>=1:f===Ae&&(p>>=2)),o.vertCount=p;var d=s;if(s<0){d=Ee;var y=o.buffer.dimension;1===y&&(d=Oe),2===y&&(d=Pe),3===y&&(d=Ee)}o.primType=d}function f(e){o.elementsCount--,R(null!==e.buffer,"must not double destroy elements"),delete i[e.id],e.buffer.destroy(),e.buffer=null}return{create:function(t,r){var i=n.create(null,Ie,!0),a=new u(i._buffer);function l(t){if(t)if("number"==typeof t)i(t),a.primType=Ee,a.vertCount=0|t,a.type=Me;else{var r=null,n=Le,o=-1,u=-1,f=0,h=0;Array.isArray(t)||e(t)||ae(t)?r=t:(R.type(t,"object","invalid arguments for elements"),"data"in t&&(r=t.data,R(Array.isArray(r)||e(r)||ae(r),"invalid data for element buffer")),"usage"in t&&(R.parameter(t.usage,he,"invalid element buffer usage"),n=he[t.usage]),"primitive"in t&&(R.parameter(t.primitive,Se,"invalid element buffer primitive"),o=Se[t.primitive]),"count"in t&&(R("number"==typeof t.count&&t.count>=0,"invalid vertex count for elements"),u=0|t.count),"type"in t&&(R.parameter(t.type,s,"invalid buffer type"),h=s[t.type]),"length"in t?f=0|t.length:(f=u,h===je||h===Ce?f*=2:h!==Ae&&h!==Te||(f*=4))),c(a,r,n,o,u,f,h)}else i(),a.primType=Ee,a.vertCount=0,a.type=Me;return l}return o.elementsCount++,l(t),l._reglType="elements",l._elements=a,l.subdata=function(e,t){return i.subdata(e,t),l},l.destroy=function(){f(a)},l},createStream:function(e){var t=l.pop();return t||(t=new u(n.create(null,Ie,!0,!1)._buffer)),c(t,e,Re,-1,-1,0,0),t},destroyStream:function(e){l.push(e)},getElements:function(e){return"function"==typeof e&&e._elements instanceof u?e._elements:null},clear:function(){se(i).forEach(f)}}}(o,p,w,h),S=Jr(o,f,h,n),O=mr(o,p,b,function(){k.procs.poll()},m,h,n),P=Sr(o,p,b,h,n),E=function(e,r,n,o,i,s){var u={cur:null,next:null,dirty:!1,setFBO:null},l=["rgba"],c=["rgba4","rgb565","rgb5 a1"];r.ext_srgb&&c.push("srgba"),r.ext_color_buffer_half_float&&c.push("rgba16f","rgb16f"),r.webgl_color_buffer_float&&c.push("rgba32f");var f=["uint8"];function h(e,t,r){this.target=e,this.texture=t,this.renderbuffer=r;var n=0,o=0;t?(n=t.width,o=t.height):r&&(n=r.width,o=r.height),this.width=n,this.height=o}function p(e){e&&(e.texture&&e.texture._texture.decRef(),e.renderbuffer&&e.renderbuffer._renderbuffer.decRef())}function d(e,t,r){if(e)if(e.texture){var n=e.texture._texture,o=Math.max(1,n.width),i=Math.max(1,n.height);R(o===t&&i===r,"inconsistent width/height for supplied texture"),n.refCount+=1}else{var a=e.renderbuffer._renderbuffer;R(a.width===t&&a.height===r,"inconsistent width/height for renderbuffer"),a.refCount+=1}}function y(t,r){r&&(r.texture?e.framebufferTexture2D(Or,t,r.target,r.texture._texture.texture,0):e.framebufferRenderbuffer(Or,t,Pr,r.renderbuffer._renderbuffer.renderbuffer))}function v(e){var t=Er,r=null,n=null,o=e;"object"===a(e)&&(o=e.data,"target"in e&&(t=0|e.target)),R.type(o,"function","invalid attachment data");var i=o._reglType;return"texture2d"===i?(r=o,R(t===Er)):"textureCube"===i?(r=o,R(t>=kr&&t<kr+6,"invalid cube map target")):"renderbuffer"===i?(n=o,t=Pr):R.raise("invalid regl object for attachment"),new h(t,r,n)}function g(e,t,r,n,a){if(r){var s=o.create2D({width:e,height:t,format:n,type:a});return s._texture.refCount=0,new h(Er,s,null)}var u=i.create({width:e,height:t,format:n});return u._renderbuffer.refCount=0,new h(Pr,null,u)}function m(e){return e&&(e.texture||e.renderbuffer)}function b(e,t,r){e&&(e.texture?e.texture.resize(t,r):e.renderbuffer&&e.renderbuffer.resize(t,r),e.width=t,e.height=r)}r.oes_texture_half_float&&f.push("half float","float16"),r.oes_texture_float&&f.push("float","float32");var w=0,_={};function x(){this.id=w++,_[this.id]=this,this.framebuffer=e.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function S(e){e.colorAttachments.forEach(p),p(e.depthAttachment),p(e.stencilAttachment),p(e.depthStencilAttachment)}function O(t){var r=t.framebuffer;R(r,"must not double destroy framebuffer"),e.deleteFramebuffer(r),t.framebuffer=null,s.framebufferCount--,delete _[t.id]}function P(t){var r;e.bindFramebuffer(Or,t.framebuffer);var o=t.colorAttachments;for(r=0;r<o.length;++r)y(Mr+r,o[r]);for(r=o.length;r<n.maxColorAttachments;++r)e.framebufferTexture2D(Or,Mr+r,Er,null,0);e.framebufferTexture2D(Or,Tr,Er,null,0),e.framebufferTexture2D(Or,Cr,Er,null,0),e.framebufferTexture2D(Or,jr,Er,null,0),y(Cr,t.depthAttachment),y(jr,t.stencilAttachment),y(Tr,t.depthStencilAttachment);var i=e.checkFramebufferStatus(Or);e.isContextLost()||i===Ar||R.raise("framebuffer configuration not supported, status = "+zr[i]),e.bindFramebuffer(Or,u.next?u.next.framebuffer:null),u.cur=u.next,e.getError()}function E(e,o){var i=new x;function a(e,t){var o;R(u.next!==i,"can not update framebuffer which is currently in use");var s=0,h=0,p=!0,y=!0,b=null,w=!0,_="rgba",x="uint8",O=1,E=null,k=null,M=null,C=!1;if("number"==typeof e)s=0|e,h=0|t||s;else if(e){R.type(e,"object","invalid arguments for framebuffer");var j=e;if("shape"in j){var T=j.shape;R(Array.isArray(T)&&T.length>=2,"invalid shape for framebuffer"),s=T[0],h=T[1]}else"radius"in j&&(s=h=j.radius),"width"in j&&(s=j.width),"height"in j&&(h=j.height);("color"in j||"colors"in j)&&(b=j.color||j.colors,Array.isArray(b)&&R(1===b.length||r.webgl_draw_buffers,"multiple render targets not supported")),b||("colorCount"in j&&(O=0|j.colorCount,R(O>0,"invalid color buffer count")),"colorTexture"in j&&(w=!!j.colorTexture,_="rgba4"),"colorType"in j&&(x=j.colorType,w?(R(r.oes_texture_float||!("float"===x||"float32"===x),"you must enable OES_texture_float in order to use floating point framebuffer objects"),R(r.oes_texture_half_float||!("half float"===x||"float16"===x),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects")):"half float"===x||"float16"===x?(R(r.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),_="rgba16f"):"float"!==x&&"float32"!==x||(R(r.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),_="rgba32f"),R.oneOf(x,f,"invalid color type")),"colorFormat"in j&&(_=j.colorFormat,l.indexOf(_)>=0?w=!0:c.indexOf(_)>=0?w=!1:w?R.oneOf(j.colorFormat,l,"invalid color format for texture"):R.oneOf(j.colorFormat,c,"invalid color format for renderbuffer"))),("depthTexture"in j||"depthStencilTexture"in j)&&(C=!(!j.depthTexture&&!j.depthStencilTexture),R(!C||r.webgl_depth_texture,"webgl_depth_texture extension not supported")),"depth"in j&&("boolean"==typeof j.depth?p=j.depth:(E=j.depth,y=!1)),"stencil"in j&&("boolean"==typeof j.stencil?y=j.stencil:(k=j.stencil,p=!1)),"depthStencil"in j&&("boolean"==typeof j.depthStencil?p=y=j.depthStencil:(M=j.depthStencil,p=!1,y=!1))}else s=h=1;var A=null,I=null,L=null,N=null;if(Array.isArray(b))A=b.map(v);else if(b)A=[v(b)];else for(A=new Array(O),o=0;o<O;++o)A[o]=g(s,h,w,_,x);R(r.webgl_draw_buffers||A.length<=1,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers."),R(A.length<=n.maxColorAttachments,"too many color attachments, not supported"),s=s||A[0].width,h=h||A[0].height,E?I=v(E):p&&!y&&(I=g(s,h,C,"depth","uint32")),k?L=v(k):y&&!p&&(L=g(s,h,!1,"stencil","uint8")),M?N=v(M):!E&&!k&&y&&p&&(N=g(s,h,C,"depth stencil","depth stencil")),R(!!E+!!k+!!M<=1,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");var D=null;for(o=0;o<A.length;++o)if(d(A[o],s,h),R(!A[o]||A[o].texture&&Rr.indexOf(A[o].texture._texture.format)>=0||A[o].renderbuffer&&Gr.indexOf(A[o].renderbuffer._renderbuffer.format)>=0,"framebuffer color attachment "+o+" is invalid"),A[o]&&A[o].texture){var B=Lr[A[o].texture._texture.format]*Nr[A[o].texture._texture.type];null===D?D=B:R(D===B,"all color attachments much have the same number of bits per pixel.")}return d(I,s,h),R(!I||I.texture&&I.texture._texture.format===Ir||I.renderbuffer&&I.renderbuffer._renderbuffer.format===Dr,"invalid depth attachment for framebuffer object"),d(L,s,h),R(!L||L.renderbuffer&&L.renderbuffer._renderbuffer.format===Br,"invalid stencil attachment for framebuffer object"),d(N,s,h),R(!N||N.texture&&N.texture._texture.format===Fr||N.renderbuffer&&N.renderbuffer._renderbuffer.format===Fr,"invalid depth-stencil attachment for framebuffer object"),S(i),i.width=s,i.height=h,i.colorAttachments=A,i.depthAttachment=I,i.stencilAttachment=L,i.depthStencilAttachment=N,a.color=A.map(m),a.depth=m(I),a.stencil=m(L),a.depthStencil=m(N),a.width=i.width,a.height=i.height,P(i),a}return s.framebufferCount++,a(e,o),t(a,{resize:function(e,t){R(u.next!==i,"can not resize a framebuffer which is currently in use");var r=Math.max(0|e,1),n=Math.max(0|t||r,1);if(r===i.width&&n===i.height)return a;for(var o=i.colorAttachments,s=0;s<o.length;++s)b(o[s],r,n);return b(i.depthAttachment,r,n),b(i.stencilAttachment,r,n),b(i.depthStencilAttachment,r,n),i.width=a.width=r,i.height=a.height=n,P(i),a},_reglType:"framebuffer",_framebuffer:i,destroy:function(){O(i),S(i)},use:function(e){u.setFBO({framebuffer:a},e)}})}return t(u,{getFramebuffer:function(e){if("function"==typeof e&&"framebuffer"===e._reglType){var t=e._framebuffer;if(t instanceof x)return t}return null},create:E,createCube:function(e){var i=Array(6);function a(e){var n;R(i.indexOf(u.next)<0,"can not update framebuffer which is currently in use");var s,c={color:null},h=0,p=null,d="rgba",y="uint8",v=1;if("number"==typeof e)h=0|e;else if(e){R.type(e,"object","invalid arguments for framebuffer");var g=e;if("shape"in g){var m=g.shape;R(Array.isArray(m)&&m.length>=2,"invalid shape for framebuffer"),R(m[0]===m[1],"cube framebuffer must be square"),h=m[0]}else"radius"in g&&(h=0|g.radius),"width"in g?(h=0|g.width,"height"in g&&R(g.height===h,"must be square")):"height"in g&&(h=0|g.height);("color"in g||"colors"in g)&&(p=g.color||g.colors,Array.isArray(p)&&R(1===p.length||r.webgl_draw_buffers,"multiple render targets not supported")),p||("colorCount"in g&&(v=0|g.colorCount,R(v>0,"invalid color buffer count")),"colorType"in g&&(R.oneOf(g.colorType,f,"invalid color type"),y=g.colorType),"colorFormat"in g&&(d=g.colorFormat,R.oneOf(g.colorFormat,l,"invalid color format for texture"))),"depth"in g&&(c.depth=g.depth),"stencil"in g&&(c.stencil=g.stencil),"depthStencil"in g&&(c.depthStencil=g.depthStencil)}else h=1;if(p)if(Array.isArray(p))for(s=[],n=0;n<p.length;++n)s[n]=p[n];else s=[p];else{s=Array(v);var b={radius:h,format:d,type:y};for(n=0;n<v;++n)s[n]=o.createCube(b)}for(c.color=Array(s.length),n=0;n<s.length;++n){var w=s[n];R("function"==typeof w&&"textureCube"===w._reglType,"invalid cube map"),h=h||w.width,R(w.width===h&&w.height===h,"invalid cube map shape"),c.color[n]={target:kr,data:s[n]}}for(n=0;n<6;++n){for(var _=0;_<s.length;++_)c.color[_].target=kr+n;n>0&&(c.depth=i[0].depth,c.stencil=i[0].stencil,c.depthStencil=i[0].depthStencil),i[n]?i[n](c):i[n]=E(c)}return t(a,{width:h,height:h,color:s})}return a(e),t(a,{faces:i,resize:function(e){var t,r=0|e;if(R(r>0&&r<=n.maxCubeMapSize,"invalid radius for cube fbo"),r===a.width)return a;var o=a.color;for(t=0;t<o.length;++t)o[t].resize(r);for(t=0;t<6;++t)i[t].resize(r);return a.width=a.height=r,a},_reglType:"framebufferCube",destroy:function(){i.forEach(function(e){e.destroy()})}})},clear:function(){se(_).forEach(O)},restore:function(){u.cur=null,u.next=null,u.dirty=!0,se(_).forEach(function(t){t.framebuffer=e.createFramebuffer(),P(t)})}})}(o,p,b,O,P,h),k=ci(o,f,p,b,w,x,0,E,{},_,S,{elements:null,primitive:4,count:-1,offset:0,instances:-1},m,d,n),M=en(o,E,k.procs.poll,m,i,p,b),C=k.next,j=o.canvas,T=[],A=[],I=[],L=[n.onDestroy],N=null;function D(){if(0===T.length)return d&&d.update(),void(N=null);N=V.next(D),K();for(var e=T.length-1;e>=0;--e){var t=T[e];t&&t(m,null,0)}o.flush(),d&&d.update()}function B(){!N&&T.length>0&&(N=V.next(D))}function F(){N&&(V.cancel(D),N=null)}function G(e){e.preventDefault(),s=!0,F(),A.forEach(function(e){e()})}function z(e){o.getError(),s=!1,u.restore(),S.restore(),w.restore(),O.restore(),P.restore(),E.restore(),_.restore(),d&&d.restore(),k.procs.refresh(),B(),I.forEach(function(e){e()})}function Y(e){function r(e,t){var r={},n={};return Object.keys(e).forEach(function(o){var i=e[o];if(U.isDynamic(i))n[o]=U.unbox(i,o);else{if(t&&Array.isArray(i))for(var a=0;a<i.length;++a)if(U.isDynamic(i[a]))return void(n[o]=U.unbox(i,o));r[o]=i}}),{dynamic:n,static:r}}R(!!e,"invalid args to regl({...})"),R.type(e,"object","invalid args to regl({...})");var n=r(e.context||{},!0),o=r(e.uniforms||{},!0),i=r(e.attributes||{},!1),a=r(function(e){var r=t({},e);function n(e){if(e in r){var t=r[e];delete r[e],Object.keys(t).forEach(function(n){r[e+"."+n]=t[n]})}}return delete r.uniforms,delete r.attributes,delete r.context,delete r.vao,"stencil"in r&&r.stencil.op&&(r.stencil.opBack=r.stencil.opFront=r.stencil.op,delete r.stencil.op),n("blend"),n("depth"),n("cull"),n("stencil"),n("polygonOffset"),n("scissor"),n("sample"),"vao"in e&&(r.vao=e.vao),r}(e),!1),u={gpuTime:0,cpuTime:0,count:0},l=k.compile(a,i,o,n,u),c=l.draw,f=l.batch,h=l.scope,p=[];return t(function(e,t){var r;if(s&&R.raise("context lost"),"function"==typeof e)return h.call(this,null,e,0);if("function"==typeof t)if("number"==typeof e)for(r=0;r<e;++r)h.call(this,null,t,r);else{if(!Array.isArray(e))return h.call(this,e,t,0);for(r=0;r<e.length;++r)h.call(this,e[r],t,r)}else if("number"==typeof e){if(e>0)return f.call(this,function(e){for(;p.length<e;)p.push(null);return p}(0|e),0|e)}else{if(!Array.isArray(e))return c.call(this,e);if(e.length)return f.call(this,e,e.length)}},{stats:u,destroy:function(){l.destroy()}})}j&&(j.addEventListener(bi,G,!1),j.addEventListener(wi,z,!1));var H=E.setFBO=Y({framebuffer:U.define.call(null,_i,"framebuffer")});function q(e,t){var r=0;k.procs.poll();var n=t.color;n&&(o.clearColor(+n[0]||0,+n[1]||0,+n[2]||0,+n[3]||0),r|=yi),"depth"in t&&(o.clearDepth(+t.depth),r|=vi),"stencil"in t&&(o.clearStencil(0|t.stencil),r|=gi),R(!!r,"called regl.clear with no buffer specified"),o.clear(r)}function J(e){return R.type(e,"function","regl.frame() callback must be a function"),T.push(e),B(),{cancel:function(){var t=Oi(T,e);R(t>=0,"cannot cancel a frame twice"),T[t]=function e(){var t=Oi(T,e);T[t]=T[T.length-1],T.length-=1,T.length<=0&&F()}}}}function Z(){var e=C.viewport,t=C.scissor_box;e[0]=e[1]=t[0]=t[1]=0,m.viewportWidth=m.framebufferWidth=m.drawingBufferWidth=e[2]=t[2]=o.drawingBufferWidth,m.viewportHeight=m.framebufferHeight=m.drawingBufferHeight=e[3]=t[3]=o.drawingBufferHeight}function K(){m.tick+=1,m.time=$(),Z(),k.procs.poll()}function Q(){O.refresh(),Z(),k.procs.refresh(),d&&d.update()}function $(){return(W()-y)/1e3}Q();var ee=t(Y,{clear:function(e){if(R("object"===a(e)&&e,"regl.clear() takes an object as input"),"framebuffer"in e)if(e.framebuffer&&"framebufferCube"===e.framebuffer_reglType)for(var r=0;r<6;++r)H(t({framebuffer:e.framebuffer.faces[r]},e),q);else H(e,q);else q(0,e)},prop:U.define.bind(null,_i),context:U.define.bind(null,xi),this:U.define.bind(null,Si),draw:Y({}),buffer:function(e){return w.create(e,mi,!1,!1)},elements:function(e){return x.create(e,!1)},texture:O.create2D,cube:O.createCube,renderbuffer:P.create,framebuffer:E.create,framebufferCube:E.createCube,vao:_.createVAO,attributes:i,frame:J,on:function(e,t){var r;switch(R.type(t,"function","listener callback must be a function"),e){case"frame":return J(t);case"lost":r=A;break;case"restore":r=I;break;case"destroy":r=L;break;default:R.raise("invalid event, must be one of frame,lost,restore,destroy")}return r.push(t),{cancel:function(){for(var e=0;e<r.length;++e)if(r[e]===t)return r[e]=r[r.length-1],void r.pop()}}},limits:b,hasExtension:function(e){return b.extensions.indexOf(e.toLowerCase())>=0},read:M,destroy:function(){T.length=0,F(),j&&(j.removeEventListener(bi,G),j.removeEventListener(wi,z)),S.clear(),E.clear(),P.clear(),O.clear(),x.clear(),w.clear(),_.clear(),d&&d.clear(),L.forEach(function(e){e()})},_gl:o,_refresh:Q,poll:function(){K(),d&&d.update()},now:$,stats:h});return n.onDone(null,ee),ee}},"object"===a(t)?e.exports=i():void 0===(o="function"==typeof(n=i)?n.call(t,r,t,e):n)||(e.exports=o)},5515:function(e,t,r){"use strict";var n=r(56730),o=Array.prototype.concat,i=Array.prototype.slice,a=e.exports=function(e){for(var t=[],r=0,a=e.length;r<a;r++){var s=e[r];n(s)?t=o.call(t,i.call(s)):t.push(s)}return t};a.wrap=function(e){return function(){return e(a(arguments))}}},43425:function(e,t,r){var n,o,i;function a(e){"@babel/helpers - typeof";return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}i=function(){"use strict";var e=new Uint8Array(0);function t(t){this._source=t,this._array=e,this._index=0}return t.prototype.read=function(){var t=this,r=t._array.subarray(t._index);return t._source.read().then(function(n){return t._array=e,t._index=0,n.done?r.length>0?{done:!1,value:r}:{done:!0,value:void 0}:{done:!1,value:function(e,t){if(!e.length)return t;if(!t.length)return e;var r=new Uint8Array(e.length+t.length);return r.set(e),r.set(t,e.length),r}(r,n.value)}})},t.prototype.slice=function(t){if((t|=0)<0)throw new Error("invalid length");var r=this,n=this._array.length-this._index;if(this._index+t<=this._array.length)return Promise.resolve(this._array.subarray(this._index,this._index+=t));var o=new Uint8Array(t);return o.set(this._array.subarray(this._index)),function i(){return r._source.read().then(function(a){return a.done?(r._array=e,r._index=0,n>0?o.subarray(0,n):null):n+a.value.length>=t?(r._array=a.value,r._index=t-n,o.set(a.value.subarray(0,t-n),n),o):(o.set(a.value,n),n+=a.value.length,i())})}()},t.prototype.cancel=function(){return this._source.cancel()},function(e){return"function"==typeof e.slice?e:new t("function"==typeof e.read?e:e.getReader())}},"object"===a(t)?e.exports=i():void 0===(o="function"==typeof(n=i)?n.call(t,r,t,e):n)||(e.exports=o)},3679:function(){"use strict"},55984:function(e,t,r){"use strict";var n=mapboxgl,o=r.n(n);!function(){o().Map.prototype.overlayLayersManager={},void 0===o().Map.prototype.addLayerBak&&(o().Map.prototype.addLayerBak=o().Map.prototype.addLayer,o().Map.prototype.addLayer=function(e,t){return e.source||"custom"===e.type||"background"===e.type?(this.addLayerBak(e,t),e.overlay&&!this.overlayLayersManager[e.id]&&(this.overlayLayersManager[e.id]=e),this):this.overlayLayersManager[e.id]||this.style._layers[e.id]?void this.fire("error",{error:new Error("A layer with this id already exists.")}):(function(e,t){e.onAdd&&e.onAdd(t)}(e,this),this.overlayLayersManager[e.id]=e,this)}),o().Map.prototype.getLayer=function(e){return this.overlayLayersManager[e]?this.overlayLayersManager[e]:this.style.getLayer(e)},o().Map.prototype.moveLayer=function(e,t){return this.overlayLayersManager[e]?(this.overlayLayersManager[e].moveLayer?this.overlayLayersManager[e].moveLayer(e,t):function(e,t){var r=document.getElementById(e);if(t){var n=document.getElementById(t);n||o().Evented.prototype.fire("error",{error:new Error('Layer with id "'.concat(t,'" does not exist on this document.'))})}r&&n?n.parentNode.insertBefore(r,n):r.parentNode.appendChild(r)}(e,t),this):this.style._layers[e]?(this.style.moveLayer(e,t),this._update(!0),this):void 0},o().Map.prototype.removeLayer=function(e){return this.overlayLayersManager[e]&&delete this.overlayLayersManager[e],this.style.removeLayer(e),this._update(!0),this},o().Map.prototype.setLayoutProperty=function(e,t,r){return this.overlayLayersManager[e]?("visibility"===t&&(r="visible"===r,n=this.overlayLayersManager[e],o=r,n.setVisibility&&n.setVisibility(o),this.style.fire("data",{dataType:"style"})),this):(this.style.setLayoutProperty(e,t,r),this._update(!0),this);var n,o},o().Map.prototype.updateTransform=function(e,t,r,n,i,a,s){this.transform.units=e;var u=this.mercatorZfromAltitude;o().MercatorCoordinate.fromLngLat=function(e,n){n=n||0;var i=o().LngLat.convert(e);return new(o().MercatorCoordinate)((i.lng-t)/a,(r-i.lat)/s,u(n,i.lat))},o().MercatorCoordinate.prototype.toLngLat=function(){return new(o().LngLat)(this.x*a+t,r-this.y*s)},this.customConvertPoint=window.URL.createObjectURL(new Blob(["customConvertPoint = {projectX:function(x){return (x - "+n+") / "+a+" + 0.5},projectY:function(y){y = 0.5 - ((y - "+i+") / "+s+");return y < 0 ? 0 : y > 1 ? 1 : y;},toY:function(y){return (0.5-y)*"+s+"+"+i+";}}"],{type:"text/javascript"}))}}();function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.imageUrl=null,this.link=null,this.width=null,this.height=null,this.alt="SuperMap iClient",this._extend(this,t)}var t,r,n;return t=e,(r=[{key:"onAdd",value:function(e){this._map=e,this._container=document.createElement("div"),this._container.className="mapboxgl-ctrl iclient-logo",this._container.style.marginTop=0,this._container.style.marginBottom=0,this._container.style.marginLeft=0,this._container.style.marginRight=0;var t="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAF4AAAAdCAYAAAAjHtusAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA4ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDY3IDc5LjE1Nzc0NywgMjAxNS8wMy8zMC0yMzo0MDo0MiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDozYWZlOGIwMi01MWE3LTRiZjYtYWVkYS05MGQ2ZTQ4YjZiMmUiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6ODg0NkFBQUE3RjEzMTFFNzhFRjJFQkY4RjcxQjc1NjIiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6ODg0NkFBQTk3RjEzMTFFNzhFRjJFQkY4RjcxQjc1NjIiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUgKE1hY2ludG9zaCkiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo4MWI3NzdhNC1lZmEyLTQ1MzUtOGQzNi03MmRjNDkyODMzN2UiIHN0UmVmOmRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDpjYTYzODVjMi1jNDQ1LTExN2EtYTc0ZC1lM2I5MzJlMGE4Y2QiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5q1HM0AAAF/ElEQVR42tSabYhUVRjHZ7W01C1uaCRW4F3oi9SXCUnwQ9gsGUFvOEtQH1bLu5VS9sbYh5KicjYt29qiGQwVg2xWWKgocob91AvC+CWsoJqB3qHMSdTMpZyeU/+Df07n3pk7997Z6cBv99z7nHvOvf/z/pxJNZvNVI/jCKXmv6EquAmVkxPSlvtp2GItr0/96fFQForChJAWDiVYTkMYMu4XBFcYjLOwWS3sNwmn8NGzZ0h4Flv/zwIdchAnh/slCGmmKUNIBzYPaXOUr0vPuEjD71JAPh7l61embzinhV3V8nnCGmGT8LwlzSL8/yUh4Tfjo9T/CgnCIYNKycA2Qq21AcHU/VHE80Idoo3Qs0W6p0UtUnkZvEMDeVcCyqxEafF7hL8Qf0oYsIj+lfC9cH1CwhchWAGCtZO+AooQOkdC1Km1VtCb63StW73uFSzgKFUkNwBbmZGGmqowhvg8ZNpH9oXChcIcYRdeNomgxLkaH+S1SGubAxyIpFv+Zp+0DYjrAS00j/dem2VGEl6FJ4Qa4quEu8j2hTCJ+GJhe4JjfQMf6JCYPPbysMPxBlp0BUKOogEF9Rg9/heNvNKYfM0KsZUZaYxX4STGrzJa+zbhPeFH2DcK10KItcI+pI0rVElwXl1ULaKnIJhDw0oRQpTQc1zcbwRU8ATy4DR6yMlTzwkqMziEWHvubJ4Nk4ZtHdnqwvwY17xq3Z4FjrG+z2Kdrdf2ZSGD+xlLPh6t1R0jP9fI22ZzKI92yvQl7EbmBxI4S7Y+vIAOL87QZqsc5uNnssxZIcfYjXT9snCR7jjobidp+FkxA2v+Cq1QervMDmp4P7Xs3YZtE9kOC3P/By6JGaETl8ElwueYTNTDq4UDsKnd7YfCNbT239LF1udS72xYJt1UWxNfN4IIP4bWuTpEja01JtMFZFsm/AHbtHBlDE6yasA4moYTrUbvdBTXHqUrAH4uSadbyzF+vbBM2IsNkS3MNa5305JxqfA02T4TnkX8XOH1mPw8ruVejpxbI9hZD2Cz1U7LdrrUvjP/WfZinNZhr6V27hP+FPZh9aLvLxVO4DllX0G2OcKnlO/DCblxaz6uXBtmi+8mBaP3/SP8IuEIiTRoPPQm2TaEmEyXo0JU+F0YiPFD0hhOsiE/vqeEVwyTgF8L51OilcIZ2I4Ll5NttvAJPfukUeB2sk0ZPSbKIUUJpCII7+DasWy08uhNNazT0wGHI7mAtB7KqMKm38HhDdAUibTVKGicbB8YAqrJ9DRsp43JdB4qUof1HQrPE6XTQWu3Ce/inVzjXhXpMiTwUYugNVQ+p80jrUsV5EH0POKeuXO9QjhFq5GryNYvfEMCDhsftYVsB9ETtG0V9ZjfhCURhbcJFpfwVZ9jvhxsLHwTYtp2svlWQw3vXL8UnqHVSIG8l8ex+tHhBXgjddgqHEZ8ufAA2aaEnYgrF/KrPXrEmMUqZ9THLW06xhoBaVueQpkug+ewOUphE3Qv2Q5gGamXYa+QbVq4O+DQ5FHyZqrjxNt7UHh9uuRa0F7HjCF8o9PCTOGnscM7g2u1Hl9C9oeEnxC/1ajZg8JLiM9Hj9GHJseMShwL2DO0G5yEWn3Zh1QUods5CPkIoqlwAZxhXMsb6HrcEPBxchhdJ6wj29vCW4hfLOzo8J3rltYX50nXQAATSf/K4DEaGlTLvplsk/QCpoD60EQ7gLYZc8H9wq+I3yncEOEcNhuz6HWf3XEiwU/4Y8YEqVp2P10rt+8REvBGw026i4aDcbL9jF8r8Blmf4fCOzhViiscskygXRdehf3CO4hfigmTBXyQrl8TFtD1IzQX3CbcQrY3hPcRv4z8OmHPXwchVNln2MmE7BX6VwIFi/he6uxvb6JM3m0fdqvx/ATidxg2JeC7VDErAw5NzGfvwRJVheEIQ8Mg/pdwIM+UOmi9Q8ivCsrIy0tF+wVbEcLrd3Pb2XisEb4Tdlhsi4WP4RBbaLGrHfC3PrvMIezy9rTpGm5lz9LOMG15xvFxD/j5gjzjjDbMOzk+9zzt3v5bgAEAibzFeFHVgYkAAAAASUVORK5CYII=";this.imageUrl&&(t=this.imageUrl);var r=this.alt,n="94px",o="29px",i="width:"+n+";height:"+o+";";this.imageUrl&&(i="width:"+(n=this.width)+";height:"+(o=this.height)+";",n&&o||(i=""));var a=this.link;return this._container.innerHTML="<a href='"+a+"' target='_blank'><img src="+t+" alt='"+r+"' style='"+i+"margin-bottom: 2px'></a>",this._createStyleSheet(),this._container}},{key:"_createStyleSheet",value:function(){var e=document.createElement("style");e.type="text/css",e.innerHTML=".iclient-logo{margin:0 !important;}.iclient-logo a{border: none;display: block;height:31px;}.iclient-logo img{border: none;white-space: nowrap}",document.getElementsByTagName("head")[0].appendChild(e)}},{key:"_extend",value:function(e){for(var t=0;t<Object.getOwnPropertyNames(arguments).length;t++){var r=Object.getOwnPropertyNames(arguments)[t];if("caller"!=r&&"callee"!=r&&"length"!=r&&"arguments"!=r){var n=arguments[r];if(n)for(var o=0;o<Object.getOwnPropertyNames(n).length;o++){var i=Object.getOwnPropertyNames(n)[o];"caller"!=r&&"callee"!=r&&"length"!=r&&"arguments"!=r&&(e[i]=n[i])}}}return e}}])&&i(t.prototype,r),n&&i(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var u=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.w=t?parseFloat(t):0,this.h=t?parseFloat(r):0,this.CLASS_NAME="SuperMap.Size"}var t,r,n;return t=e,(r=[{key:"toString",value:function(){return"w="+this.w+",h="+this.h}},{key:"clone",value:function(){return new e(this.w,this.h)}},{key:"equals",value:function(e){var t=!1;return null!=e&&(t=this.w===e.w&&this.h===e.h||isNaN(this.w)&&isNaN(this.h)&&isNaN(e.w)&&isNaN(e.h)),t}},{key:"destroy",value:function(){this.w=null,this.h=null}}])&&s(t.prototype,r),n&&s(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var c=function(){function e(t,r,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.x=t?parseFloat(t):0,this.y=r?parseFloat(r):0,this.mode=n,this.CLASS_NAME="SuperMap.Pixel"}var t,r,n;return t=e,(r=[{key:"toString",value:function(){return"x="+this.x+",y="+this.y}},{key:"clone",value:function(){return new e(this.x,this.y,this.mode)}},{key:"equals",value:function(e){var t=!1;return null!=e&&(t=this.x==e.x&&this.y==e.y||isNaN(this.x)&&isNaN(this.y)&&isNaN(e.x)&&isNaN(e.y)),t}},{key:"distanceTo",value:function(e){return Math.sqrt(Math.pow(this.x-e.x,2)+Math.pow(this.y-e.y,2))}},{key:"add",value:function(t,r){if(null==t||null==r)throw new TypeError("Pixel.add cannot receive null values");return new e(this.x+t,this.y+r)}},{key:"offset",value:function(e){var t=this.clone();return e&&(t=this.add(e.x,e.y)),t}},{key:"destroy",value:function(){this.x=null,this.y=null,this.mode=null}}])&&l(t.prototype,r),n&&l(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}c.Mode={LeftTop:"lefttop",RightTop:"righttop",RightBottom:"rightbottom",LeftBottom:"leftbottom"};var h=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];for(var n=function(e,t,r){return t&&f(e.prototype,t),r&&f(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);for(var n=0;n<t.length;n++)a(this,new t[n](r))}),o=0;o<t.length;o++){var i=t[o];a(n,i),a(n.prototype,i.prototype),a(n.prototype,new i)}return n;function a(e,t){var r=Object.getOwnPropertyNames(t);Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t)));for(var n=0;n<r.length;n++){var o=r[n];if("constructor"!==o&&"prototype"!==o&&"name"!==o&&"length"!==o){var i=Object.getOwnPropertyDescriptor(t,o);window.ActiveXObject?Object.defineProperty(e,o,i||{}):Object.defineProperty(e,o,i)}}}},p={startsWith:function(e,t){return 0==e.indexOf(t)},contains:function(e,t){return-1!=e.indexOf(t)},trim:function(e){return e.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},camelize:function(e){for(var t=e.split("-"),r=t[0],n=1,o=t.length;n<o;n++){var i=t[n];r+=i.charAt(0).toUpperCase()+i.substring(1)}return r},format:function(e,t,r){t||(t=window);return e.replace(p.tokenRegEx,function(e,n){for(var o,i=n.split(/\.+/),a=0;a<i.length;a++)0==a&&(o=t),o=o[i[a]];return"function"==typeof o&&(o=r?o.apply(null,r):o()),void 0===o?"undefined":o})},tokenRegEx:/\$\{([\w.]+?)\}/g,numberRegEx:/^([+-]?)(?=\d|\.\d)\d*(\.\d*)?([Ee]([+-]?\d+))?$/,isNumeric:function(e){return p.numberRegEx.test(e)},numericIf:function(e){return p.isNumeric(e)?parseFloat(e):e}},d={decimalSeparator:".",thousandsSeparator:",",limitSigDigs:function(e,t){var r=0;return t>0&&(r=parseFloat(e.toPrecision(t))),r},format:function(e,t,r,n){t=void 0!==t?t:0,r=void 0!==r?r:d.thousandsSeparator,n=void 0!==n?n:d.decimalSeparator,null!=t&&(e=parseFloat(e.toFixed(t)));var o=e.toString().split(".");1===o.length&&null==t&&(t=0);var i,a=o[0];if(r)for(var s=/(-?[0-9]+)([0-9]{3})/;s.test(a);)a=a.replace(s,"$1"+r+"$2");if(0==t)i=a;else{var u=o.length>1?o[1]:"0";null!=t&&(u+=new Array(t-u.length+1).join("0")),i=a+n+u}return i}};Number.prototype.limitSigDigs||(Number.prototype.limitSigDigs=function(e){return d.limitSigDigs(this,e)});var y={bind:function(e,t){var r=Array.prototype.slice.apply(arguments,[2]);return function(){var n=r.concat(Array.prototype.slice.apply(arguments,[0]));return e.apply(t,n)}},bindAsEventListener:function(e,t){return function(r){return e.call(t,r||window.event)}},False:function(){return!1},True:function(){return!0},Void:function(){}},v={filter:function(e,t,r){var n=[];if(Array.prototype.filter)n=e.filter(t,r);else{var o=e.length;if("function"!=typeof t)throw new TypeError;for(var i=0;i<o;i++)if(i in e){var a=e[i];t.call(r,a,i,e)&&n.push(a)}}return n}};function g(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var m=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.CLASS_NAME="SuperMap.Geometry",this.id=j.createUniqueID(this.CLASS_NAME+"_"),this.parent=null,this.bounds=null,this.SRID=null}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){this.id=null,this.bounds=null,this.SRID=null}},{key:"clone",value:function(){return new e}},{key:"setBounds",value:function(e){e&&(this.bounds=e.clone())}},{key:"clearBounds",value:function(){this.bounds=null,this.parent&&this.parent.clearBounds()}},{key:"extendBounds",value:function(e){this.getBounds()?this.bounds.extend(e):this.setBounds(e)}},{key:"getBounds",value:function(){return null==this.bounds&&this.calculateBounds(),this.bounds}},{key:"calculateBounds",value:function(){}},{key:"getVertices",value:function(e){}},{key:"getArea",value:function(){return 0}}])&&g(t.prototype,r),n&&g(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function b(e){"@babel/helpers - typeof";return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var w,_,x,S,O,P,E,k=(_="",x="",S="pc",(O=navigator.userAgent.toLowerCase()).indexOf("msie")>-1||O.indexOf("trident")>-1&&O.indexOf("rv")>-1?(_="msie",w=O.match(/msie ([\d.]+)/)||O.match(/rv:([\d.]+)/)):O.indexOf("chrome")>-1?(_="chrome",w=O.match(/chrome\/([\d.]+)/)):O.indexOf("firefox")>-1?(_="firefox",w=O.match(/firefox\/([\d.]+)/)):O.indexOf("opera")>-1?(_="opera",w=O.match(/version\/([\d.]+)/)):O.indexOf("safari")>-1&&(_="safari",w=O.match(/version\/([\d.]+)/)),x=w?w[1]:"",O.indexOf("ipad")>-1||O.indexOf("ipod")>-1||O.indexOf("iphone")>-1?S="apple":O.indexOf("android")>-1&&(x=(w=O.match(/version\/([\d.]+)/))?w[1]:"",S="android"),{name:_,version:x,device:S}),M=(P=!0,E=k,document.createElement("canvas").getContext?("firefox"===E.name&&parseFloat(E.version)<5&&(P=!1),"safari"===E.name&&parseFloat(E.version)<4&&(P=!1),"opera"===E.name&&parseFloat(E.version)<10&&(P=!1),"msie"===E.name&&parseFloat(E.version)<9&&(P=!1)):P=!1,P),C=function(){var e=navigator.userAgent.toLowerCase();return-1===e.indexOf("webkit")&&-1!==e.indexOf("gecko")}(),j={assign:function(e){for(var t=0;t<Object.getOwnPropertyNames(arguments).length;t++){var r=Object.getOwnPropertyNames(arguments)[t];if("caller"!=r&&"callee"!=r&&"length"!=r&&"arguments"!=r){var n=arguments[r];if(n)for(var o=0;o<Object.getOwnPropertyNames(n).length;o++){var i=Object.getOwnPropertyNames(n)[o];"caller"!=r&&"callee"!=r&&"length"!=r&&"arguments"!=r&&(e[i]=n[i])}}}return e},extend:function(e,t){if(e=e||{},t){for(var r in t){var n=t[r];void 0!==n&&(e[r]=n)}!("function"==typeof window.Event&&t instanceof window.Event)&&t.hasOwnProperty&&t.hasOwnProperty("toString")&&(e.toString=t.toString)}return e},copy:function(e,t){var r;if(e=e||{},t)for(var n in e)void 0!==(r=t[n])&&(e[n]=r)},reset:function(e){for(var t in e=e||{})if(e.hasOwnProperty(t)){if("object"===b(e[t])&&e[t]instanceof Array){for(var r in e[t])e[t][r].destroy&&e[t][r].destroy();e[t].length=0}else"object"===b(e[t])&&e[t]instanceof Object&&e[t].destroy&&e[t].destroy();e[t]=null}},getElement:function(){for(var e=[],t=0,r=arguments.length;t<r;t++){var n=arguments[t];if("string"==typeof n&&(n=document.getElementById(n)),1===arguments.length)return n;e.push(n)}return e},isElement:function(e){return!(!e||1!==e.nodeType)},isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},removeItem:function(e,t){for(var r=e.length-1;r>=0;r--)e[r]===t&&e.splice(r,1);return e},indexOf:function(e,t){if(null==e)return-1;if("function"==typeof e.indexOf)return e.indexOf(t);for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1},modifyDOMElement:function(e,t,r,n,o,i,a,s){t&&(e.id=t),r&&(e.style.left=r.x+"px",e.style.top=r.y+"px"),n&&(e.style.width=n.w+"px",e.style.height=n.h+"px"),o&&(e.style.position=o),i&&(e.style.border=i),a&&(e.style.overflow=a),parseFloat(s)>=0&&parseFloat(s)<1?(e.style.filter="alpha(opacity="+100*s+")",e.style.opacity=s):1===parseFloat(s)&&(e.style.filter="",e.style.opacity="")},applyDefaults:function(e,t){e=e||{};var r="function"==typeof window.Event&&t instanceof window.Event;for(var n in t)(void 0===e[n]||!r&&t.hasOwnProperty&&t.hasOwnProperty(n)&&!e.hasOwnProperty(n))&&(e[n]=t[n]);return!r&&t&&t.hasOwnProperty&&t.hasOwnProperty("toString")&&!e.hasOwnProperty("toString")&&(e.toString=t.toString),e},getParameterString:function(e){var t=[];for(var r in e){var n,o=e[r];if(null!=o&&"function"!=typeof o)n=Array.isArray(o)||"[object Object]"===o.toString()?encodeURIComponent(JSON.stringify(o)):encodeURIComponent(o),t.push(encodeURIComponent(r)+"="+n)}return t.join("&")},urlAppend:function(e,t){var r=e;if(t){0===t.indexOf("?")&&(t=t.substring(1));var n=(e+" ").split(/[?&]/);r+=" "===n.pop()?t:n.length?"&"+t:"?"+t}return r},urlPathAppend:function(e,t){var r=e;if(!t)return r;0===t.indexOf("/")&&(t=t.substring(1));var n=e.split("?");return n[0].indexOf("/",n[0].length-1)<0&&(n[0]+="/"),r="".concat(n[0]).concat(t).concat(n.length>1?"?".concat(n[1]):"")},DEFAULT_PRECISION:14,toFloat:function(e,t){return null==t&&(t=j.DEFAULT_PRECISION),"number"!=typeof e&&(e=parseFloat(e)),0===t?e:parseFloat(e.toPrecision(t))},rad:function(e){return e*Math.PI/180},getParameters:function(e){e=null===e||void 0===e?window.location.href:e;var t="";if(p.contains(e,"?")){var r=e.indexOf("?")+1,n=p.contains(e,"#")?e.indexOf("#"):e.length;t=e.substring(r,n)}for(var o={},i=t.split(/[&;]/),a=0,s=i.length;a<s;++a){var u=i[a].split("=");if(u[0]){var l=u[0];try{l=decodeURIComponent(l)}catch(e){l=unescape(l)}var c=(u[1]||"").replace(/\+/g," ");try{c=decodeURIComponent(c)}catch(e){c=unescape(c)}1==(c=c.split(",")).length&&(c=c[0]),o[l]=c}}return o},lastSeqID:0,createUniqueID:function(e){return null==e&&(e="id_"),j.lastSeqID+=1,e+j.lastSeqID},normalizeScale:function(e){return e>1?1/e:e},getResolutionFromScale:function(e,t){var r;e&&(null==t&&(t="degrees"),r=1/(j.normalizeScale(e)*T[t]*96));return r},getScaleFromResolution:function(e,t){return null==t&&(t="degrees"),e*T[t]*96},getBrowser:function(){return k},isSupportCanvas:M,supportCanvas:function(){return j.isSupportCanvas},isInTheSameDomain:function(e){if(!e)return!0;var t=e.indexOf("//"),r=document.location.toString(),n=r.indexOf("//");if(-1===t)return!0;var o,i=o=e.substring(0,t),a=r.substring(n+2);n=a.indexOf("/");var s=a.indexOf(":"),u=a.substring(0,n),l=document.location.protocol;if(-1!==s||(u+=":"+("http:"===l.toLowerCase()?80:443)),l.toLowerCase()!==i.toLowerCase())return!1;var c=(i=e.substring(t+2)).indexOf(":");t=i.indexOf("/");var f,h=i.substring(0,t);return-1!==c?f=i.substring(0,c):(f=i.substring(0,t),h+=":"+("http:"===o.toLowerCase()?80:443)),f===document.domain&&h===u},calculateDpi:function(e,t,r,n,o){if(e&&t&&r){var i,a=e.getWidth(),s=e.getHeight(),u=t.w,l=t.h;if(o=o||6378137,"degree"===(n=n||"degrees").toLowerCase()||"degrees"===n.toLowerCase()||"dd"===n.toLowerCase()){var c=a/u,f=s/l;i=254/(c>f?c:f)/r/(2*Math.PI*o/360)/1e4}else{i=254/(a/u)/r/1e4}return i}},toJSON:function(e){var t=e;if(null==t)return null;switch(t.constructor){case String:return t=(t=(t=(t=(t=(t=(t='"'+t.replace(/(["\\])/g,"\\$1")+'"').replace(/\n/g,"\\n")).replace(/\r/g,"\\r")).replace("<","&lt;")).replace(">","&gt;")).replace(/%/g,"%25")).replace(/&/g,"%26");case Array:for(var r="",n=0,o=t.length;n<o;n++)r+=j.toJSON(t[n]),n!==t.length-1&&(r+=",");return"["+r+"]";case Number:return isFinite(t)?String(t):null;case Boolean:return String(t);case Date:return"{'__type':\"System.DateTime\",'Year':"+t.getFullYear()+",'Month':"+(t.getMonth()+1)+",'Day':"+t.getDate()+",'Hour':"+t.getHours()+",'Minute':"+t.getMinutes()+",'Second':"+t.getSeconds()+",'Millisecond':"+t.getMilliseconds()+",'TimezoneOffset':"+t.getTimezoneOffset()+"}";default:if(null!=t.toJSON&&"function"==typeof t.toJSON)return t.toJSON();if("object"===b(t)){if(t.length){for(var i=[],a=0,s=t.length;a<s;a++)i.push(j.toJSON(t[a]));return"["+i.join(",")+"]"}var u=[];for(var l in t)"function"!=typeof t[l]&&"CLASS_NAME"!==l&&"parent"!==l&&u.push("'"+l+"':"+j.toJSON(t[l]));return u.length>0?"{"+u.join(",")+"}":"{}"}return t.toString()}},getResolutionFromScaleDpi:function(e,t,r,n){return n=n||6378137,r=r||"",e>0&&t>0?(e=j.normalizeScale(e),"degree"===r.toLowerCase()||"degrees"===r.toLowerCase()||"dd"===r.toLowerCase()?254/t/e/(2*Math.PI*n/360)/1e4:254/t/e/1e4):-1},getScaleFromResolutionDpi:function(e,t,r,n){return n=n||6378137,r=r||"",e>0&&t>0?"degree"===r.toLowerCase()||"degrees"===r.toLowerCase()||"dd"===r.toLowerCase()?254/t/e/(2*Math.PI*n/360)/1e4:254/t/e/1e4:-1},transformResult:function(e){return e.responseText&&"string"==typeof e.responseText&&(e=JSON.parse(e.responseText)),e},copyAttributes:function(e,t){if(e=e||{},t)for(var r in t){var n=t[r];void 0!==n&&"CLASS_NAME"!==r&&"function"!=typeof n&&(e[r]=n)}return e},copyAttributesWithClip:function(e,t,r){if(e=e||{},t)for(var n in t){var o=!1;if(r&&r.length)for(var i=0,a=r.length;i<a;i++)if(n===r[i]){o=!0;break}if(!0!==o){var s=t[n];void 0!==s&&"CLASS_NAME"!==n&&"function"!=typeof s&&(e[n]=s)}}return e},cloneObject:function(e){if(null===e||"object"!==b(e))return e;if(e instanceof Date){var t=new Date;return t.setTime(e.getTime()),t}if(e instanceof Array)return e.slice(0);if(e instanceof Object){var r={};for(var n in e)e.hasOwnProperty(n)&&(r[n]=j.cloneObject(e[n]));return r}throw new Error("Unable to copy obj! Its type isn't supported.")},lineIntersection:function(e,t,r,n){var o,i,a=null,s=(n.x-r.x)*(e.y-r.y)-(n.y-r.y)*(e.x-r.x),u=(t.x-e.x)*(e.y-r.y)-(t.y-e.y)*(e.x-r.x),l=(n.y-r.y)*(t.x-e.x)-(n.x-r.x)*(t.y-e.y);if(0!=l)i=u/l,a=(o=s/l)>=0&&i<=1&&o<=1&&i>=0?new m.Point(e.x+o*(t.x-e.x),e.y+o*(t.y-e.y)):"No Intersection";else if(0==s&&0==u){var c=Math.max(e.y,t.y),f=Math.min(e.y,t.y),h=Math.max(e.x,t.x),p=Math.min(e.x,t.x);a=(r.y>=f&&r.y<=c||n.y>=f&&n.y<=c)&&r.x>=p&&r.x<=h||n.x>=p&&n.x<=h?"Coincident":"Parallel"}else a="Parallel";return a},getTextBounds:function(e,t,r){document.body.appendChild(r),r.style.width="auto",r.style.height="auto",e.fontSize&&(r.style.fontSize=e.fontSize),e.fontFamily&&(r.style.fontFamily=e.fontFamily),e.fontWeight&&(r.style.fontWeight=e.fontWeight),r.style.position="relative",r.style.visibility="hidden",r.style.display="inline-block",r.innerHTML=t;var n=r.clientWidth,o=r.clientHeight;return document.body.removeChild(r),{textWidth:n,textHeight:o}},convertPath:function(e,t){return t?e.replace(/\{([\w-\.]+)\}/g,function(e,r){var n;return n=t.hasOwnProperty(r)?function(e){if(void 0==e||null==e)return"";if(e instanceof Date)return e.toJSON();if(function(e){if("string"!=typeof e&&"object"!==b(e))return!1;try{var t=e.toString();return"[object Object]"===t||"[object Array]"===t}catch(e){return!1}}(e))return JSON.stringify(e);return e.toString()}(t[r]):e,encodeURIComponent(n)}):e}},T={inches:1,ft:12,mi:63360,m:39.3701,km:39370.1,dd:4374754,yd:36};T.in=T.inches,T.degrees=T.dd,T.nmi=1852*T.m;var A=.0254000508001016;function I(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}j.extend(T,{Inch:T.inches,Meter:39.37,Foot:12,IFoot:11.999976,ClarkeFoot:11.999868327581488,SearsFoot:11.999955194477684,GoldCoastFoot:11.999964589846002,IInch:.9999979999999999,MicroInch:999998e-9,Mil:9.99998e-7,Centimeter:.3937,Kilometer:39370,Yard:36,SearsYard:35.99986558343306,IndianYard:35.99987015540864,IndianYd37:35.999740205100004,IndianYd62:35.999880755999996,IndianYd75:35.999868945,IndianFoot:11.9999567087,IndianFt37:11.9999134017,IndianFt62:11.999960252000001,IndianFt75:11.999956315,Mile:63360,IYard:35.999928,IMile:63359.87328,NautM:72913.24,"Lat-66":4367838.370169282,"Lat-83":4367954.152606599,Decimeter:3.9370000000000003,Millimeter:.03937,Dekameter:393.7,Decameter:393.7,Hectometer:3937,GermanMeter:39.370535294205006,CaGrid:39.359685060000004,ClarkeChain:791.991309620512,GunterChain:792.0000000000001,BenoitChain:791.9977268035781,SearsChain:791.9970428354235,ClarkeLink:7.91991309620512,GunterLink:7.920000000000001,BenoitLink:7.919977268035781,SearsLink:7.919970428354236,Rod:198.00000000000014,IntnlChain:791.998416,IntnlLink:7.91998416,Perch:198.00000000000014,Pole:198.00000000000014,Furlong:7919.999999999997,Rood:148.75036777426,CapeFoot:11.999868185255002,Brealey:14763.75,ModAmFt:12.000458400000001,Fathom:71.999856,"NautM-UK":72959.85408,"50kilometers":1968500,"150kilometers":5905500}),j.extend(T,{mm:T.Meter/1e3,cm:T.Meter/100,dm:100*T.Meter,km:1e3*T.Meter,kmi:T.nmi,fath:T.Fathom,ch:T.IntnlChain,link:T.IntnlLink,"us-in":T.inches,"us-ft":T.Foot,"us-yd":T.Yard,"us-ch":T.GunterChain,"us-mi":T.Mile,"ind-yd":T.IndianYd37,"ind-ft":T.IndianFt37,"ind-ch":791.9942845122}),T.degree=T.dd,T.meter=T.m,T.foot=T.ft,T.inch=T.inches,T.mile=T.mi,T.kilometer=T.km,T.yard=T.yd;var R=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),j.isArray(t)&&(r=t[1],t=t[0]),this.lon=t?j.toFloat(t):0,this.lat=r?j.toFloat(r):0,this.CLASS_NAME="SuperMap.LonLat"}var t,r,n;return t=e,n=[{key:"fromString",value:function(t){var r=t.split(",");return new e(r[0],r[1])}},{key:"fromArray",value:function(t){var r=j.isArray(t);return new e(r&&t[0],r&&t[1])}}],(r=[{key:"toString",value:function(){return"lon="+this.lon+",lat="+this.lat}},{key:"toShortString",value:function(){return this.lon+","+this.lat}},{key:"clone",value:function(){return new e(this.lon,this.lat)}},{key:"add",value:function(t,r){if(null==t||null==r)throw new TypeError("LonLat.add cannot receive null values");return new e(this.lon+j.toFloat(t),this.lat+j.toFloat(r))}},{key:"equals",value:function(e){var t=!1;return null!=e&&(t=this.lon===e.lon&&this.lat===e.lat||isNaN(this.lon)&&isNaN(this.lat)&&isNaN(e.lon)&&isNaN(e.lat)),t}},{key:"wrapDateLine",value:function(e){var t=this.clone();if(e){for(;t.lon<e.left;)t.lon+=e.getWidth();for(;t.lon>e.right;)t.lon-=e.getWidth()}return t}},{key:"destroy",value:function(){this.lon=null,this.lat=null}}])&&I(t.prototype,r),n&&I(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function L(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var N=function(){function e(t,r,n,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),j.isArray(t)&&(o=t[3],n=t[2],r=t[1],t=t[0]),this.left=null!=t?j.toFloat(t):this.left,this.bottom=null!=r?j.toFloat(r):this.bottom,this.right=null!=n?j.toFloat(n):this.right,this.top=null!=o?j.toFloat(o):this.top,this.centerLonLat=null,this.CLASS_NAME="SuperMap.Bounds"}var t,r,n;return t=e,n=[{key:"fromString",value:function(t,r){var n=t.split(",");return e.fromArray(n,r)}},{key:"fromArray",value:function(t,r){return!0===r?new e(t[1],t[0],t[3],t[2]):new e(t[0],t[1],t[2],t[3])}},{key:"fromSize",value:function(t){return new e(0,t.h,t.w,0)}},{key:"oppositeQuadrant",value:function(e){var t="";return t+="t"===e.charAt(0)?"b":"t",t+="l"===e.charAt(1)?"r":"l"}}],(r=[{key:"clone",value:function(){return new e(this.left,this.bottom,this.right,this.top)}},{key:"equals",value:function(e){var t=!1;return null!=e&&(t=this.left===e.left&&this.right===e.right&&this.top===e.top&&this.bottom===e.bottom),t}},{key:"toString",value:function(){return[this.left,this.bottom,this.right,this.top].join(",")}},{key:"toArray",value:function(e){return!0===e?[this.bottom,this.left,this.top,this.right]:[this.left,this.bottom,this.right,this.top]}},{key:"toBBOX",value:function(e,t){null==e&&(e=6);var r=Math.pow(10,e),n=Math.round(this.left*r)/r,o=Math.round(this.bottom*r)/r,i=Math.round(this.right*r)/r,a=Math.round(this.top*r)/r;return!0===t?o+","+n+","+a+","+i:n+","+o+","+i+","+a}},{key:"getWidth",value:function(){return this.right-this.left}},{key:"getHeight",value:function(){return this.top-this.bottom}},{key:"getSize",value:function(){return new u(this.getWidth(),this.getHeight())}},{key:"getCenterPixel",value:function(){return new c((this.left+this.right)/2,(this.bottom+this.top)/2)}},{key:"getCenterLonLat",value:function(){return this.centerLonLat||(this.centerLonLat=new R((this.left+this.right)/2,(this.bottom+this.top)/2)),this.centerLonLat}},{key:"scale",value:function(t,r){var n,o;return t=t||1,null==r&&(r=this.getCenterLonLat()),"SuperMap.LonLat"===r.CLASS_NAME?(n=r.lon,o=r.lat):(n=r.x,o=r.y),new e((this.left-n)*t+n,(this.bottom-o)*t+o,(this.right-n)*t+n,(this.top-o)*t+o)}},{key:"add",value:function(t,r){if(null==t||null==r)throw new TypeError("Bounds.add cannot receive null values");return new e(this.left+t,this.bottom+r,this.right+t,this.top+r)}},{key:"extend",value:function(t){var r=null;if(t){switch(t.CLASS_NAME){case"SuperMap.LonLat":r=new e(t.lon,t.lat,t.lon,t.lat);break;case"SuperMap.Geometry.Point":r=new e(t.x,t.y,t.x,t.y);break;case"SuperMap.Bounds":r=t}r&&(this.centerLonLat=null,(null==this.left||r.left<this.left)&&(this.left=r.left),(null==this.bottom||r.bottom<this.bottom)&&(this.bottom=r.bottom),(null==this.right||r.right>this.right)&&(this.right=r.right),(null==this.top||r.top>this.top)&&(this.top=r.top))}}},{key:"containsLonLat",value:function(e,t){"boolean"==typeof t&&(t={inclusive:t}),t=t||{};var r=this.contains(e.lon,e.lat,t.inclusive),n=t.worldBounds;if(n&&!r){var o=n.getWidth(),i=(n.left+n.right)/2,a=Math.round((e.lon-i)/o);r=this.containsLonLat({lon:e.lon-a*o,lat:e.lat},{inclusive:t.inclusive})}return r}},{key:"containsPixel",value:function(e,t){return this.contains(e.x,e.y,t)}},{key:"contains",value:function(e,t,r){if(null==r&&(r=!0),null==e||null==t)return!1;var n=!1;return n=r?e>=this.left&&e<=this.right&&t>=this.bottom&&t<=this.top:e>this.left&&e<this.right&&t>this.bottom&&t<this.top,n}},{key:"intersectsBounds",value:function(e,t){if("boolean"==typeof t&&(t={inclusive:t}),(t=t||{}).worldBounds){var r=this.wrapDateLine(t.worldBounds);e=e.wrapDateLine(t.worldBounds)}else r=this;null==t.inclusive&&(t.inclusive=!0);var n=!1,o=r.left===e.right||r.right===e.left||r.top===e.bottom||r.bottom===e.top;if(t.inclusive||!o){var i=e.bottom>=r.bottom&&e.bottom<=r.top||r.bottom>=e.bottom&&r.bottom<=e.top,a=e.top>=r.bottom&&e.top<=r.top||r.top>e.bottom&&r.top<e.top,s=e.left>=r.left&&e.left<=r.right||r.left>=e.left&&r.left<=e.right,u=e.right>=r.left&&e.right<=r.right||r.right>=e.left&&r.right<=e.right;n=(i||a)&&(s||u)}if(t.worldBounds&&!n){var l=t.worldBounds,c=l.getWidth(),f=!l.containsBounds(r),h=!l.containsBounds(e);f&&!h?(e=e.add(-c,0),n=r.intersectsBounds(e,{inclusive:t.inclusive})):h&&!f&&(r=r.add(-c,0),n=e.intersectsBounds(r,{inclusive:t.inclusive}))}return n}},{key:"containsBounds",value:function(e,t,r){null==t&&(t=!1),null==r&&(r=!0);var n=this.contains(e.left,e.bottom,r),o=this.contains(e.right,e.bottom,r),i=this.contains(e.left,e.top,r),a=this.contains(e.right,e.top,r);return t?n||o||i||a:n&&o&&i&&a}},{key:"determineQuadrant",value:function(e){var t="",r=this.getCenterLonLat();return t+=e.lat<r.lat?"b":"t",t+=e.lon<r.lon?"l":"r"}},{key:"wrapDateLine",value:function(e,t){var r=(t=t||{}).leftTolerance||0,n=t.rightTolerance||0,o=this.clone();if(e){for(var i=e.getWidth();o.left<e.left&&o.right-n<=e.left;)o=o.add(i,0);for(;o.left+r>=e.right&&o.right>e.right;)o=o.add(-i,0);var a=o.left+r;a<e.right&&a>e.left&&o.right-n>e.right&&(o=o.add(-i,0))}return o}},{key:"toServerJSONObject",value:function(){return{rightTop:{x:this.right,y:this.top},leftBottom:{x:this.left,y:this.bottom},left:this.left,right:this.right,top:this.top,bottom:this.bottom}}},{key:"destroy",value:function(){this.left=null,this.right=null,this.top=null,this.bottom=null,this.centerLonLat=null}}])&&L(t.prototype,r),n&&L(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function D(e){"@babel/helpers - typeof";return(D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function B(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function F(){return(F="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=U(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function G(e,t){return(G=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function z(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=U(e);if(t){var o=U(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===D(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function U(e){return(U=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var V=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&G(e,t)}(i,m);var t,r,n,o=z(i);function i(e,t,r,n){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(a=o.call(this,e,t,r,n)).x=parseFloat(e),a.y=parseFloat(t),a.tag=n||0==n?parseFloat(n):null,a.type=r||"Point",a.CLASS_NAME="SuperMap.Geometry.Point",a.geometryType="Point",a}return t=i,(r=[{key:"clone",value:function(e){return null==e&&(e=new i(this.x,this.y)),j.applyDefaults(e,this),e}},{key:"calculateBounds",value:function(){this.bounds=new N(this.x,this.y,this.x,this.y)}},{key:"equals",value:function(e){var t=!1;return null!=e&&(t=this.x===e.x&&this.y===e.y||isNaN(this.x)&&isNaN(this.y)&&isNaN(e.x)&&isNaN(e.y)),t}},{key:"move",value:function(e,t){this.x=this.x+e,this.y=this.y+t,this.clearBounds()}},{key:"toShortString",value:function(){return this.x+", "+this.y}},{key:"destroy",value:function(){this.x=null,this.y=null,this.tag=null,F(U(i.prototype),"destroy",this).call(this)}},{key:"getVertices",value:function(){return[this]}}])&&B(t.prototype,r),n&&B(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function W(e){"@babel/helpers - typeof";return(W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Y(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function H(){return(H="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=J(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function X(e,t){return(X=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function q(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=J(e);if(t){var o=J(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===W(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function J(e){return(J=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Z=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&X(e,t)}(i,m);var t,r,n,o=q(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this)).components=[],t.componentTypes=null,null!=e&&t.addComponents(e),t.CLASS_NAME="SuperMap.Geometry.Collection",t.geometryType="Collection",t}return t=i,(r=[{key:"destroy",value:function(){this.components.length=0,this.components=null,H(J(i.prototype),"destroy",this).call(this)}},{key:"clone",value:function(){for(var e=new i,t=0,r=this.components.length;t<r;t++)e.addComponent(this.components[t].clone());return j.applyDefaults(e,this),e}},{key:"getComponentsString",value:function(){for(var e=[],t=0,r=this.components.length;t<r;t++)e.push(this.components[t].toShortString());return e.join(",")}},{key:"calculateBounds",value:function(){this.bounds=null;var e=new N,t=this.components;if(t)for(var r=0,n=t.length;r<n;r++)e.extend(t[r].getBounds());null!=e.left&&null!=e.bottom&&null!=e.right&&null!=e.top&&this.setBounds(e)}},{key:"addComponents",value:function(e){j.isArray(e)||(e=[e]);for(var t=0,r=e.length;t<r;t++)this.addComponent(e[t])}},{key:"addComponent",value:function(e,t){var r=!1;if(e&&(null==this.componentTypes||j.indexOf(this.componentTypes,e.CLASS_NAME)>-1)){if(null!=t&&t<this.components.length){var n=this.components.slice(0,t),o=this.components.slice(t,this.components.length);n.push(e),this.components=n.concat(o)}else this.components.push(e);e.parent=this,this.clearBounds(),r=!0}return r}},{key:"removeComponents",value:function(e){var t=!1;j.isArray(e)||(e=[e]);for(var r=e.length-1;r>=0;--r)t=this.removeComponent(e[r])||t;return t}},{key:"removeComponent",value:function(e){return j.removeItem(this.components,e),this.clearBounds(),!0}},{key:"getArea",value:function(){for(var e=0,t=0,r=this.components.length;t<r;t++)e+=this.components[t].getArea();return e}},{key:"equals",value:function(e){var t=!0;if(e&&e.CLASS_NAME&&this.CLASS_NAME===e.CLASS_NAME)if(j.isArray(e.components)&&e.components.length===this.components.length){for(var r=0,n=this.components.length;r<n;++r)if(!this.components[r].equals(e.components[r])){t=!1;break}}else t=!1;else t=!1;return t}},{key:"getVertices",value:function(e){for(var t=[],r=0,n=this.components.length;r<n;++r)Array.prototype.push.apply(t,this.components[r].getVertices(e));return t}}])&&Y(t.prototype,r),n&&Y(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function K(e){"@babel/helpers - typeof";return(K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Q(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function $(e,t){return($=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function ee(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=te(e);if(t){var o=te(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===K(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function te(e){return(te=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var re=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$(e,t)}(i,Z);var t,r,n,o=ee(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).componentTypes=["SuperMap.Geometry.Point"],t.CLASS_NAME="SuperMap.Geometry.MultiPoint",t.geometryType="MultiPoint",t}return t=i,(r=[{key:"addPoint",value:function(e,t){this.addComponent(e,t)}},{key:"removePoint",value:function(e){this.removeComponent(e)}}])&&Q(t.prototype,r),n&&Q(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function ne(e){"@babel/helpers - typeof";return(ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function oe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ie(e,t){return(ie=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function ae(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=se(e);if(t){var o=se(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===ne(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function se(e){return(se=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ue=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ie(e,t)}(i,re);var t,r,n,o=ae(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).componentTypes=["SuperMap.Geometry.Point","SuperMap.PointWithMeasure"],t.CLASS_NAME="SuperMap.Geometry.Curve",t.geometryType="Curve",t}return t=i,r&&oe(t.prototype,r),n&&oe(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}();function le(e){"@babel/helpers - typeof";return(le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ce(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function fe(){return(fe="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=de(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function he(e,t){return(he=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function pe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=de(e);if(t){var o=de(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===le(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function de(e){return(de=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ye=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&he(e,t)}(i,ue);var t,r,n,o=pe(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).CLASS_NAME="SuperMap.Geometry.LineString",t.geometryType="LineString",t}return t=i,n=[{key:"calculateCircle",value:function(e){if(e.length<3)return e;var t={},r=e[0],n=e[1],o=e[2],i=0,a=0,s=!0,u=0,l=0,c=0,f=[],h=(o.y-r.y)/(o.x-r.x),p=o.y-h*o.x;if(o.x!=r.x&&o.y!=r.y&&n.y==h*n.x+p||o.x==r.x&&n.x==r.x||o.y==r.y&&n.y==r.y||o.x==r.x&&o.y==r.y||o.x==n.x&&o.y==n.y||r.x==n.x&&r.y==n.y)f.push(r),f.push(n),f.push(o);else{var d=(n.x*n.x+n.y*n.y-(r.x*r.x+r.y*r.y))*(2*(o.y-r.y))-(o.x*o.x+o.y*o.y-(r.x*r.x+r.y*r.y))*(2*(n.y-r.y)),y=2*(n.x-r.x)*(o.x*o.x+o.y*o.y-(r.x*r.x+r.y*r.y))-2*(o.x-r.x)*(n.x*n.x+n.y*n.y-(r.x*r.x+r.y*r.y)),v=4*((n.x-r.x)*(o.y-r.y)-(o.x-r.x)*(n.y-r.y));t.x=d/v,t.y=y/v;var g=(2*(i=Math.sqrt((r.x-t.x)*(r.x-t.x)+(r.y-t.y)*(r.y-t.y)))*i-((r.x-o.x)*(r.x-o.x)+(r.y-o.y)*(r.y-o.y)))/(2*i*i);g=(g=g>=1?1:g)<=-1?-1:g,c=180*Math.acos(g)/Math.PI,a=(c=o.x==r.x?t.x>r.x&&n.x>r.x||t.x<r.x&&n.x<r.x?360-c:c:t.y>h*t.x+p&&n.y>h*n.x+p||t.y<h*t.x+p&&n.y<h*n.x+p?360-c:c)/72,o.y!=r.y?o.x==r.x?o.y>r.y?n.x<r.x&&(s=!1):n.x>r.x&&(s=!1):o.x<r.x?n.y<h*n.x+p&&(s=!1):n.y>h*n.x+p&&(s=!1):o.x>r.x?n.y>r.y&&(s=!1):n.y<r.y&&(s=!1);var m=(r.y-t.y)/(r.x-t.x),b=m>=0?180*Math.atan(m)/Math.PI:Math.abs(180*Math.atan(m)/Math.PI)+90,w=Math.abs(t.y);r.y==w&&w==o.y&&r.x<o.x&&(b+=180);var _=r.y-t.y;f.push(r);for(var x=1;x<72;x++){u=a*x,l=b,s?_>=0?m>=0?l+=u:l=180-(l-90)+u:l=m>0?l-180+u:90-l+u:_>=0?m>=0?l-=u:l=180-(l-90)-u:l=m>=0?l-180-u:90-l-u,l=l*Math.PI/180;var S=t.x+i*Math.cos(l),O=t.y+i*Math.sin(l);f.push(new V(S,O))}f.push(o)}return f}},{key:"createLineEPS",value:function(e){var t=[],r=e.length;if(r<2)return e;for(var n=0;n<r;){if("LTypeArc"==e[n].type){var o=i.createLineArc(t,n,r,e);t=o[0],n=o[1]}else t.push(e[n]),n++}return t}},{key:"createLineArc",value:function(e,t,r,n){if(0==t){var o=i.addPointEPS(n,t,r,"LTypeArc");Array.prototype.push.apply(e,o[0]),t=o[1]+1}else if(t==r-1){var a=[n[t-1],n[t]],s=i.calculateCircle(a);Array.prototype.push.apply(e,s),t++}else{var u=i.addPointEPS(n,t,r,"LTypeArc");e.pop(),Array.prototype.push.apply(e,u[0]),t=u[1]+1}return[e,t]}},{key:"addPointEPS",value:function(e,t,r,n){var o,a=[],s=t+1;return 0==t?Array.prototype.push.apply(a,[e[t],e[t+1]]):t==r-1?Array.prototype.push.apply(a,[e[t-1],e[t]]):Array.prototype.push.apply(a,[e[t-1],e[t],e[t+1]]),"LTypeCurve"==n?o=i.calculatePointsFBZN(a):"LTypeArc"==n&&(o=i.calculateCircle(a)),[o,s]}}],(r=[{key:"removeComponent",value:function(e){var t=this.components&&this.components.length>2;return t&&fe(de(i.prototype),"removeComponent",this).apply(this,arguments),t}},{key:"getSortedSegments",value:function(){for(var e,t,r=this.components.length-1,n=new Array(r),o=0;o<r;++o)e=this.components[o],t=this.components[o+1],e.x<t.x?n[o]={x1:e.x,y1:e.y,x2:t.x,y2:t.y}:n[o]={x1:t.x,y1:t.y,x2:e.x,y2:e.y};return n.sort(function(e,t){return e.x1-t.x1})}},{key:"getVertices",value:function(e){return!0===e?[this.components[0],this.components[this.components.length-1]]:!1===e?this.components.slice(1,this.components.length-1):this.components.slice()}}])&&ce(t.prototype,r),n&&ce(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function ve(e){"@babel/helpers - typeof";return(ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ge(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function me(){return(me="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_e(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function be(e,t){return(be=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function we(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=_e(e);if(t){var o=_e(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===ve(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function _e(e){return(_e=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var xe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&be(e,t)}(i,ye);var t,r,n,o=we(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).componentTypes=["SuperMap.Geometry.Point"],t.CLASS_NAME="SuperMap.Geometry.LinearRing",t.geometryType="LinearRing",t}return t=i,(r=[{key:"addComponent",value:function(e,t){var r=!1,n=this.components.pop();null==t&&e.equals(n)||(r=me(_e(i.prototype),"addComponent",this).apply(this,arguments));var o=this.components[0];return me(_e(i.prototype),"addComponent",this).apply(this,[o]),r}},{key:"removeComponent",value:function(e){var t=this.components&&this.components.length>3;if(t){this.components.pop(),me(_e(i.prototype),"removeComponent",this).apply(this,arguments);var r=this.components[0];me(_e(i.prototype),"addComponent",this).apply(this,[r])}return t}},{key:"getArea",value:function(){var e=0;if(this.components&&this.components.length>2){for(var t=0,r=0,n=this.components.length;r<n-1;r++){var o=this.components[r],i=this.components[r+1];t+=(o.x+i.x)*(i.y-o.y)}e=-t/2}return e}},{key:"getVertices",value:function(e){return!0===e?[]:this.components.slice(0,this.components.length-1)}}])&&ge(t.prototype,r),n&&ge(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Se(e){"@babel/helpers - typeof";return(Se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Oe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Pe(e,t){return(Pe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Ee(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=ke(e);if(t){var o=ke(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===Se(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function ke(e){return(ke=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Me=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Pe(e,t)}(i,Z);var t,r,n,o=Ee(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).componentTypes=["SuperMap.Geometry.LinearRing"],t.CLASS_NAME="SuperMap.Geometry.Polygon",t.geometryType="Polygon",t}return t=i,(r=[{key:"getArea",value:function(){var e=0;if(this.components&&this.components.length>0){e+=Math.abs(this.components[0].getArea());for(var t=1,r=this.components.length;t<r;t++)e-=Math.abs(this.components[t].getArea())}return e}}])&&Oe(t.prototype,r),n&&Oe(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Ce(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var je=function(){function e(t,r,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.CLASS_NAME="SuperMap.Feature",this.layer=t,this.id=j.createUniqueID(this.CLASS_NAME+"_"),this.lonlat=r,this.data=null!=n?n:{}}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){this.id=null,this.lonlat=null,this.data=null}}])&&Ce(t.prototype,r),n&&Ce(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Te(e){"@babel/helpers - typeof";return(Te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ae(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ie(){return(Ie="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ne(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function Re(e,t){return(Re=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Le(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Ne(e);if(t){var o=Ne(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===Te(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function Ne(e){return(Ne=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var De="Unknown",Be="Insert",Fe="Update",Ge="Delete",ze=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Re(e,t)}(i,je);var t,r,n,o=Le(i);function i(e,t,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,null,null,t)).fid=null,n.geometry=e||null,n.attributes={},t&&(n.attributes=j.extend(n.attributes,t)),n.bounds=null,n.state=null,n.style=r||null,n.url=null,n.lonlat=null,n.CLASS_NAME="SuperMap.Feature.Vector",i.style={default:{fillColor:"#ee9900",fillOpacity:.4,hoverFillColor:"white",hoverFillOpacity:.8,strokeColor:"#ee9900",strokeOpacity:1,strokeWidth:1,strokeLinecap:"round",strokeDashstyle:"solid",hoverStrokeColor:"red",hoverStrokeOpacity:1,hoverStrokeWidth:.2,pointRadius:6,hoverPointRadius:1,hoverPointUnit:"%",pointerEvents:"visiblePainted",cursor:"inherit",fontColor:"#000000",labelAlign:"cm",labelOutlineColor:"white",labelOutlineWidth:3},select:{fillColor:"blue",fillOpacity:.4,hoverFillColor:"white",hoverFillOpacity:.8,strokeColor:"blue",strokeOpacity:1,strokeWidth:2,strokeLinecap:"round",strokeDashstyle:"solid",hoverStrokeColor:"red",hoverStrokeOpacity:1,hoverStrokeWidth:.2,pointRadius:6,hoverPointRadius:1,hoverPointUnit:"%",pointerEvents:"visiblePainted",cursor:"pointer",fontColor:"#000000",labelAlign:"cm",labelOutlineColor:"white",labelOutlineWidth:3},temporary:{fillColor:"#66cccc",fillOpacity:.2,hoverFillColor:"white",hoverFillOpacity:.8,strokeColor:"#66cccc",strokeOpacity:1,strokeLinecap:"round",strokeWidth:2,strokeDashstyle:"solid",hoverStrokeColor:"red",hoverStrokeOpacity:1,hoverStrokeWidth:.2,pointRadius:6,hoverPointRadius:1,hoverPointUnit:"%",pointerEvents:"visiblePainted",cursor:"default",fontColor:"#000000",labelAlign:"cm",labelOutlineColor:"white",labelOutlineWidth:3},delete:{display:"none"}},n}return t=i,(r=[{key:"destroy",value:function(){this.layer&&(this.layer.removeFeatures(this),this.layer=null),this.geometry=null,Ie(Ne(i.prototype),"destroy",this).call(this)}},{key:"clone",value:function(){return new i(this.geometry?this.geometry.clone():null,this.attributes,this.style)}},{key:"toState",value:function(e){if(e===Fe)switch(this.state){case De:case Ge:this.state=e}else if(e===Be)switch(this.state){case De:break;default:this.state=e}else if(e===Ge)switch(this.state){case Be:case Ge:break;case De:case Fe:this.state=e}else e===De&&(this.state=e)}}])&&Ae(t.prototype,r),n&&Ae(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Ue(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Ve=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.data=null,this.keepData=!1,j.extend(this,t),this.options=t,this.CLASS_NAME="SuperMap.Format"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){}},{key:"read",value:function(e){}},{key:"write",value:function(e){}}])&&Ue(t.prototype,r),n&&Ue(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function We(e){"@babel/helpers - typeof";return(We="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ye(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function He(e,t){return(He=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Xe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=qe(e);if(t){var o=qe(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===We(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function qe(e){return(qe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Je=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&He(e,t)}(i,Ve);var t,r,n,o=Xe(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).indent="    ",t.space=" ",t.newline="\n",t.level=0,t.pretty=!1,t.nativeJSON=!(!window.JSON||"function"!=typeof JSON.parse||"function"!=typeof JSON.stringify),t.CLASS_NAME="SuperMap.Format.JSON",t.serialize={object:function(e){if(null==e)return"null";if(e.constructor===Date)return this.serialize.date.apply(this,[e]);if(e.constructor===Array)return this.serialize.array.apply(this,[e]);var t,r,n,o=["{"];this.level+=1;var i=!1;for(t in e)e.hasOwnProperty(t)&&(r=this.write.apply(this,[t,this.pretty]),n=this.write.apply(this,[e[t],this.pretty]),null!=r&&null!=n&&(i&&o.push(","),o.push(this.writeNewline(),this.writeIndent(),r,":",this.writeSpace(),n),i=!0));return this.level-=1,o.push(this.writeNewline(),this.writeIndent(),"}"),o.join("")},array:function(e){var t,r=["["];this.level+=1;for(var n=0,o=e.length;n<o;++n)null!=(t=this.write.apply(this,[e[n],this.pretty]))&&(n>0&&r.push(","),r.push(this.writeNewline(),this.writeIndent(),t));return this.level-=1,r.push(this.writeNewline(),this.writeIndent(),"]"),r.join("")},string:function(e){var t={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};return/["\\\x00-\x1f]/.test(e)?'"'+e.replace(/([\x00-\x1f\\"])/g,function(e,r){var n=t[r];return n||(n=r.charCodeAt(),"\\u00"+Math.floor(n/16).toString(16)+(n%16).toString(16))})+'"':'"'+e+'"'},number:function(e){return isFinite(e)?String(e):"null"},boolean:function(e){return String(e)},date:function(e){function t(e){return e<10?"0"+e:e}return'"'+e.getFullYear()+"-"+t(e.getMonth()+1)+"-"+t(e.getDate())+"T"+t(e.getHours())+":"+t(e.getMinutes())+":"+t(e.getSeconds())+'"'}},t}return t=i,(r=[{key:"read",value:function(e,t){var r;if(this.nativeJSON)try{r=JSON.parse(e,t)}catch(t){return{data:e}}return this.keepData&&(this.data=r),r}},{key:"write",value:function(e,t){this.pretty=!!t;var r=null,n=We(e);if(this.serialize[n])try{r=!this.pretty&&this.nativeJSON?JSON.stringify(e):this.serialize[n].apply(this,[e])}catch(e){}return r}},{key:"writeIndent",value:function(){var e=[];if(this.pretty)for(var t=0;t<this.level;++t)e.push(this.indent);return e.join("")}},{key:"writeNewline",value:function(){return this.pretty?this.newline:""}},{key:"writeSpace",value:function(){return this.pretty?this.space:""}}])&&Ye(t.prototype,r),n&&Ye(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Ze(e){"@babel/helpers - typeof";return(Ze="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ke(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Qe(e,t){return(Qe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function $e(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=et(e);if(t){var o=et(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===Ze(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function et(e){return(et=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var tt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Qe(e,t)}(i,Z);var t,r,n,o=$e(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).componentTypes=["SuperMap.Geometry.LineString"],t.CLASS_NAME="SuperMap.Geometry.MultiLineString",t.geometryType="MultiLineString",t}return t=i,r&&Ke(t.prototype,r),n&&Ke(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}();function rt(e){"@babel/helpers - typeof";return(rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function nt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ot(e,t){return(ot=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function it(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=at(e);if(t){var o=at(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===rt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function at(e){return(at=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var st=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ot(e,t)}(i,Z);var t,r,n,o=it(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).componentTypes=["SuperMap.Geometry.Polygon"],t.CLASS_NAME="SuperMap.Geometry.MultiPolygon",t.geometryType="MultiPolygon",t}return t=i,r&&nt(t.prototype,r),n&&nt(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}();function ut(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var lt=function(){function e(t,r,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.red=t||0==t?t:255,this.green=r||0,this.blue=n||0,this.CLASS_NAME="SuperMap.ServerColor"}var t,r,n;return t=e,n=[{key:"fromJson",value:function(t){if(t){var r=new e,n=255;null!==t.red&&(n=Number(t.red)),r.red=n;var o=0;null!==t.green&&(o=Number(t.green)),r.green=o;var i=0;return null!==t.blue&&(i=Number(t.blue)),r.blue=i,r}}}],(r=[{key:"destroy",value:function(){this.red=null,this.green=null,this.blue=null}}])&&ut(t.prototype,r),n&&ut(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function ct(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var ft=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.fillBackColor=new lt(255,255,255),this.fillBackOpaque=!1,this.fillForeColor=new lt(255,0,0),this.fillGradientMode=null,this.fillGradientAngle=0,this.fillGradientOffsetRatioX=0,this.fillGradientOffsetRatioY=0,this.fillOpaqueRate=100,this.fillSymbolID=0,this.lineColor=new lt(0,0,0),this.lineSymbolID=0,this.lineWidth=1,this.markerAngle=0,this.markerSize=1,this.markerSymbolID=-1,t&&j.extend(this,t),this.CLASS_NAME="SuperMap.ServerStyle"}var t,r,n;return t=e,n=[{key:"fromJson",value:function(t){if(t)return new e({fillBackColor:lt.fromJson(t.fillBackColor),fillBackOpaque:t.fillBackOpaque,fillForeColor:lt.fromJson(t.fillForeColor),fillGradientMode:t.fillGradientMode,fillGradientAngle:t.fillGradientAngle,fillGradientOffsetRatioX:t.fillGradientOffsetRatioX,fillGradientOffsetRatioY:t.fillGradientOffsetRatioY,fillOpaqueRate:t.fillOpaqueRate,fillSymbolID:t.fillSymbolID,lineColor:lt.fromJson(t.lineColor),lineSymbolID:t.lineSymbolID,lineWidth:t.lineWidth,markerAngle:t.markerAngle,markerSize:t.markerSize,markerSymbolID:t.markerSymbolID})}}],(r=[{key:"destroy",value:function(){var e=this;e.fillBackColor&&(e.fillBackColor.destroy(),e.fillBackColor=null),e.fillBackOpaque=null,e.fillForeColor&&(e.fillForeColor.destroy(),e.fillForeColor=null),e.fillGradientMode=null,e.fillGradientAngle=null,e.fillGradientOffsetRatioX=null,e.fillGradientOffsetRatioY=null,e.fillOpaqueRate=null,e.fillSymbolID=null,e.lineColor&&(e.lineColor.destroy(),e.lineColor=null),e.lineSymbolID=null,e.lineWidth=null,e.markerAngle=null,e.markerSize=null,e.markerSymbolID=null}},{key:"toServerJSONObject",value:function(){var e={};return e=j.copyAttributes(e,this)}}])&&ct(t.prototype,r),n&&ct(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function ht(e){"@babel/helpers - typeof";return(ht="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function dt(e,t){return(dt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function yt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=gt(e);if(t){var o=gt(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===ht(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return vt(e)}(this,r)}}function vt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function gt(e){return(gt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var mt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&dt(e,t)}(i,V);var t,r,n,o=yt(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).measure=null,e&&j.extend(vt(t),e),t.CLASS_NAME="SuperMap.PointWithMeasure",t}return t=i,n=[{key:"fromJson",value:function(e){if(e)return new i({x:e.x,y:e.y,measure:e.measure})}}],(r=[{key:"equals",value:function(e){var t=!1;if(null!=e){var r=this.x===e.x&&this.y===e.y&&this.measure===e.measure,n=isNaN(this.x)&&isNaN(this.y)&&isNaN(this.measure),o=isNaN(e.x)&&isNaN(e.y)&&isNaN(e.measure);t=r||n&&o}return t}},{key:"toJson",value:function(){var e="{";return null!=this.measure&&void 0!=this.measure&&(e+='"measure":'+this.measure+","),e+='"x":'+this.x+",",e+='"y":'+this.y,e+="}"}},{key:"destroy",value:function(){this.measure=null,this.x=null,this.y=null}}])&&pt(t.prototype,r),n&&pt(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function bt(e){"@babel/helpers - typeof";return(bt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function wt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _t(e,t){return(_t=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function xt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Ot(e);if(t){var o=Ot(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===bt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return St(e)}(this,r)}}function St(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ot(e){return(Ot=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Pt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_t(e,t)}(i,Z);var t,r,n,o=xt(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t)).id=null,r.center=null,r.style=null,r.length=null,r.maxM=null,r.minM=null,r.parts=null,r.points=null,r.type=null,r.componentTypes=["SuperMap.Geometry.LinearRing","SuperMap.Geometry.LineString"],t&&j.extend(St(r),t),r.CLASS_NAME="SuperMap.Route",r.geometryType="LINEM",r}return t=i,n=[{key:"fromJson",value:function(e){if(e){var t=e.parts||[],r=e.points||[],n=t.length,o=[];if(!(n>0))return null;for(var a=0,s=0,u=[];a<n;a++){for(var l=0;l<t[a];l++)u.push(mt.fromJson(r[s+l]));s+=t[a],u[0].equals(u[t[a]-1])?o.push(new xe(u)):o.push(new ye(u)),u=[]}return new i(o,{id:e.id,center:e.center,style:e.style,length:e.length,maxM:e.maxM,minM:e.minM,type:e.type,parts:e.parts})}}}],(r=[{key:"toJson",value:function(){var e="{";if(null!=this.id&&void 0!=this.id&&(e+='"id":'+this.id+","),null!=this.center&&void 0!=this.center&&(e+='"center":'+this.center+","),null!=this.style&&void 0!=this.style&&(e+='"style":'+this.style+","),null!=this.length&&void 0!=this.length&&(e+='"length":'+this.length+","),null!=this.maxM&&void 0!=this.maxM&&(e+='"maxM":'+this.maxM+","),null!=this.minM&&void 0!=this.minM&&(e+='"minM":'+this.minM+","),null!=this.type&&void 0!=this.type&&(e+='"type":"'+this.type+'",'),null!=this.parts&&void 0!=this.parts){e+='"parts":['+this.parts[0];for(var t=1;t<this.parts.length;t++)e+=","+this.parts[t];e+="],"}if(null!=this.components&&this.components.length>0){e+='"points":[';for(var r=0,n=this.components.length;r<n;r++)for(var o=0,i=this.components[r].components.length;o<i;o++)e+=this.components[r].components[o].toJson()+",";e=e.replace(/,$/g,""),e+="]"}return e=e.replace(/,$/g,""),e+="}"}},{key:"destroy",value:function(){var e=this;e.id=null,e.center=null,e.style=null,e.length=null,e.maxM=null,e.minM=null,e.type=null,e.parts=null,e.components.length=0,e.components=null,e.componentTypes=null}}])&&wt(t.prototype,r),n&&wt(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(),Et={GEOJSON:"GEOJSON",ISERVER:"ISERVER",FGB:"FGB"},kt={ISERVER:"ISERVER",IPORTAL:"IPORTAL",ONLINE:"ONLINE"},Mt={LINE:"LINE",LINEM:"LINEM",POINT:"POINT",REGION:"REGION",POINTEPS:"POINTEPS",LINEEPS:"LINEEPS",REGIONEPS:"REGIONEPS",ELLIPSE:"ELLIPSE",CIRCLE:"CIRCLE",TEXT:"TEXT",RECTANGLE:"RECTANGLE",UNKNOWN:"UNKNOWN",GEOCOMPOUND:"GEOCOMPOUND"},Ct={ATTRIBUTE:"ATTRIBUTE",ATTRIBUTEANDGEOMETRY:"ATTRIBUTEANDGEOMETRY",GEOMETRY:"GEOMETRY"},jt={CONTAIN:"CONTAIN",CROSS:"CROSS",DISJOINT:"DISJOINT",IDENTITY:"IDENTITY",INTERSECT:"INTERSECT",NONE:"NONE",OVERLAP:"OVERLAP",TOUCH:"TOUCH",WITHIN:"WITHIN"},Tt={DISTANCE:"DISTANCE",AREA:"AREA"},At={METER:"METER",KILOMETER:"KILOMETER",MILE:"MILE",YARD:"YARD",DEGREE:"DEGREE",MILLIMETER:"MILLIMETER",CENTIMETER:"CENTIMETER",INCH:"INCH",DECIMETER:"DECIMETER",FOOT:"FOOT",SECOND:"SECOND",MINUTE:"MINUTE",RADIAN:"RADIAN"},It={CENTIMETER:"CENTIMETER",DECIMETER:"DECIMETER",FOOT:"FOOT",INCH:"INCH",KILOMETER:"KILOMETER",METER:"METER",MILE:"MILE",MILLIMETER:"MILLIMETER",YARD:"YARD"},Rt={CAPTION:"CAPTION",CAPTION_PERCENT:"CAPTION_PERCENT",CAPTION_VALUE:"CAPTION_VALUE",PERCENT:"PERCENT",VALUE:"VALUE"},Lt={AREA:"AREA",BAR:"BAR",BAR3D:"BAR3D",LINE:"LINE",PIE:"PIE",PIE3D:"PIE3D",POINT:"POINT",RING:"RING",ROSE:"ROSE",ROSE3D:"ROSE3D",STACK_BAR:"STACK_BAR",STACK_BAR3D:"STACK_BAR3D",STEP:"STEP"},Nt={ALL:"ALL",NONE:"NONE",YAXES:"YAXES"},Dt={CONSTANT:"CONSTANT",LOGARITHM:"LOGARITHM",SQUAREROOT:"SQUAREROOT"},Bt={CUSTOMINTERVAL:"CUSTOMINTERVAL",EQUALINTERVAL:"EQUALINTERVAL",LOGARITHM:"LOGARITHM",QUANTILE:"QUANTILE",SQUAREROOT:"SQUAREROOT",STDDEVIATION:"STDDEVIATION"},Ft={BLACK_WHITE:"BLACKWHITE",BLUE_BLACK:"BLUEBLACK",BLUE_RED:"BLUERED",BLUE_WHITE:"BLUEWHITE",CYAN_BLACK:"CYANBLACK",CYAN_BLUE:"CYANBLUE",CYAN_GREEN:"CYANGREEN",CYAN_WHITE:"CYANWHITE",GREEN_BLACK:"GREENBLACK",GREEN_BLUE:"GREENBLUE",GREEN_ORANGE_VIOLET:"GREENORANGEVIOLET",GREEN_RED:"GREENRED",GREEN_WHITE:"GREENWHITE",PINK_BLACK:"PINKBLACK",PINK_BLUE:"PINKBLUE",PINK_RED:"PINKRED",PINK_WHITE:"PINKWHITE",RAIN_BOW:"RAINBOW",RED_BLACK:"REDBLACK",RED_WHITE:"REDWHITE",SPECTRUM:"SPECTRUM",TERRAIN:"TERRAIN",YELLOW_BLACK:"YELLOWBLACK",YELLOW_BLUE:"YELLOWBLUE",YELLOW_GREEN:"YELLOWGREEN",YELLOW_RED:"YELLOWRED",YELLOW_WHITE:"YELLOWWHITE"},Gt={TOPLEFT:"TOPLEFT",TOPCENTER:"TOPCENTER",TOPRIGHT:"TOPRIGHT",BASELINELEFT:"BASELINELEFT",BASELINECENTER:"BASELINECENTER",BASELINERIGHT:"BASELINERIGHT",BOTTOMLEFT:"BOTTOMLEFT",BOTTOMCENTER:"BOTTOMCENTER",BOTTOMRIGHT:"BOTTOMRIGHT",MIDDLELEFT:"MIDDLELEFT",MIDDLECENTER:"MIDDLECENTER",MIDDLERIGHT:"MIDDLERIGHT"},zt={NORMAL:"ALONG_LINE_NORMAL",LB_TO_RT:"LEFT_BOTTOM_TO_RIGHT_TOP",LT_TO_RB:"LEFT_TOP_TO_RIGHT_BOTTOM",RB_TO_LT:"RIGHT_BOTTOM_TO_LEFT_TOP",RT_TO_LB:"RIGHT_TOP_TO_LEFT_BOTTOM"},Ut={DIAMOND:"DIAMOND",ELLIPSE:"ELLIPSE",MARKER:"MARKER",NONE:"NONE",RECT:"RECT",ROUNDRECT:"ROUNDRECT",TRIANGLE:"TRIANGLE"},Vt={NEWLINE:"NEWLINE",NONE:"NONE",OMIT:"OMIT"},Wt={FLAT:"FLAT",ROUND:"ROUND"},Yt={CLIP:"CLIP",ERASE:"ERASE",IDENTITY:"IDENTITY",INTERSECT:"INTERSECT",UNION:"UNION",UPDATE:"UPDATE",XOR:"XOR"},Ht={INDEXEDHDFS:"INDEXEDHDFS",UDB:"UDB",MONGODB:"MONGODB",PG:"PG"},Xt={BSPLINE:"BSPLINE",POLISH:"POLISH"},qt={ISOLINE:"ISOLINE",ISOREGION:"ISOREGION"},Jt={DATASET_AND_RECORDSET:"DATASET_AND_RECORDSET",DATASET_ONLY:"DATASET_ONLY",RECORDSET_ONLY:"RECORDSET_ONLY"},Zt={ADD:"add",UPDATE:"update",DELETE:"delete"},Kt={LESS_TIME:"LESS_TIME",LESS_TRANSFER:"LESS_TRANSFER",LESS_WALK:"LESS_WALK",MIN_DISTANCE:"MIN_DISTANCE"},Qt={BUS:"BUS",SUBWAY:"SUBWAY",NO_SUBWAY:"NO_SUBWAY",NONE:"NONE"},$t={EXPONENTIAL:"EXPONENTIAL",GAUSSIAN:"GAUSSIAN",SPHERICAL:"SPHERICAL"},er={EXP1:"EXP1",EXP2:"EXP2"},tr={IP:"IP",REFERER:"Referer",REQUESTIP:"RequestIP",NONE:"NONE",SERVER:"SERVER",WEB:"WEB"},rr={CLIP:"clip",INTERSECT:"intersect"},nr={SQUAREMETER:"SquareMeter",SQUAREKILOMETER:"SquareKiloMeter",HECTARE:"Hectare",ARE:"Are",ACRE:"Acre",SQUAREFOOT:"SquareFoot",SQUAREYARD:"SquareYard",SQUAREMILE:"SquareMile"},or={METER:"Meter",KILOMETER:"Kilometer",YARD:"Yard",FOOT:"Foot",MILE:"Mile"},ir={MAX:"max",MIN:"min",AVERAGE:"average",SUM:"sum",VARIANCE:"variance",STDDEVIATION:"stdDeviation"},ar={SUMMARYMESH:"SUMMARYMESH",SUMMARYREGION:"SUMMARYREGION"},sr={REGIONNOOVERLAP:"REGIONNOOVERLAP",REGIONNOOVERLAPWITH:"REGIONNOOVERLAPWITH",REGIONCONTAINEDBYREGION:"REGIONCONTAINEDBYREGION",REGIONCOVEREDBYREGION:"REGIONCOVEREDBYREGION",LINENOOVERLAP:"LINENOOVERLAP",LINENOOVERLAPWITH:"LINENOOVERLAPWITH",POINTNOIDENTICAL:"POINTNOIDENTICAL"},ur={GEOHASH_GRID:"geohash_grid"},lr={AVG:"avg",MAX:"max",MIN:"min",SUM:"sum"},cr={NDVI:"NDVI",HILLSHADE:"HILLSHADE"};function fr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var hr=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=0,this.style=null,this.parts=null,this.points=null,this.type=null,this.prjCoordSys=null,t&&j.extend(this,t),this.CLASS_NAME="SuperMap.ServerGeometry"}var t,r,n;return t=e,n=[{key:"fromJson",value:function(t){if(t)return new e({id:t.id,style:ft.fromJson(t.style),parts:t.parts,partTopo:t.partTopo,points:t.points,center:t.center,length:t.length,maxM:t.maxM,minM:t.minM,type:t.type})}},{key:"fromGeometry",value:function(t){if(t){var r=0,n=[],o=[],i=null,a=t.components,s=t.CLASS_NAME,u={epsgCode:t.SRID};if(isNaN(t.id)||(r=t.id),"SuperMap.Geometry.LinearRing"!=s&&"SuperMap.Geometry.LineString"!=s&&(t instanceof re||t instanceof tt)){for(var l=a.length,c=0;c<l;c++){var f=a[c].getVertices(),h=f.length;n.push(h);for(var p=0;p<h;p++)o.push(new V(f[p].x,f[p].y))}i="SuperMap.Geometry.MultiPoint"==s?Mt.POINT:Mt.LINE}else if(t instanceof st){for(var d=a.length,y=0;y<d;y++)for(var v=a[y].components,g=v.length,m=0;m<g;m++){var b=v[m].getVertices(),w=b.length+1;n.push(w);for(var _=0;_<w-1;_++)o.push(new V(b[_].x,b[_].y));o.push(new V(b[0].x,b[0].y))}i=Mt.REGION}else if(t instanceof Me){for(var x=a.length,S=0;S<x;S++){var O=a[S].getVertices(),P=O.length+1;n.push(P);for(var E=0;E<P-1;E++)o.push(new V(O[E].x,O[E].y));o.push(new V(O[0].x,O[0].y))}i=Mt.REGION}else{for(var k=t.getVertices(),M=k.length,C=0;C<M;C++)o.push(new V(k[C].x,k[C].y));t instanceof xe&&(o.push(new V(k[0].x,k[0].y)),M++),n.push(M),i=t instanceof V?Mt.POINT:Mt.LINE}return new e({id:r,style:null,parts:n,points:o,type:i,prjCoordSys:u})}}},{key:"IsClockWise",value:function(e){var t=e.length;if(t<3)return 0;var r=e[0].y*(e[t-1].x-e[1].x);e.push(e[0]);for(var n=1;n<t;n++)r+=e[n].y*(e[n-1].x-e[n+1].x);return.5*r}},{key:"bubbleSort",value:function(e,t,r,n){for(var o=0;o<e.length;o++)for(var i=0;i<e.length;i++)if(e[o]>e[i]){var a=e[i];e[i]=e[o],e[o]=a;var s=t[i];if(t[i]=t[o],t[o]=s,r&&r.length>0){var u=r[i];r[i]=r[o],r[o]=u}if(n&&n.length>0){var l=n[i];n[i]=n[o],n[o]=l}}}}],(r=[{key:"destroy",value:function(){var e=this;e.id=null,e.style=null,e.parts=null,e.partTopo=null,e.points=null,e.type=null,e.prjCoordSys=null}},{key:"toGeometry",value:function(){var e=this;switch(e.type.toUpperCase()){case Mt.POINT:return e.toGeoPoint();case Mt.LINE:return e.toGeoLine();case Mt.LINEM:return e.toGeoLinem();case Mt.REGION:return e.toGeoRegion();case Mt.POINTEPS:return e.toGeoPoint();case Mt.LINEEPS:return e.toGeoLineEPS();case Mt.REGIONEPS:return e.toGeoRegionEPS();case Mt.GEOCOMPOUND:return e.transformGeoCompound()}}},{key:"toGeoPoint",value:function(){var e=this.parts||[],t=this.points||[],r=e.length;if(r>0){if(1===r)return new V(t[0].x,t[0].y);for(var n=[],o=0;o<r;o++)n.push(new V(t[o].x,t[o].y));return new re(n)}return null}},{key:"toGeoLine",value:function(){var e=this.parts||[],t=this.points||[],r=e.length;if(r>0){if(1===r){for(var n=[],o=0;o<e[0];o++)n.push(new V(t[o].x,t[o].y));return n[0].equals(n[e[0]-1])?new xe(n):new ye(n)}for(var i=[],a=0;a<r;a++){for(var s=[],u=0;u<e[a];u++)s.push(new V(t[u].x,t[u].y));i.push(new ye(s)),t.splice(0,e[a])}return new tt(i)}return null}},{key:"toGeoLineEPS",value:function(){var e,t,r,n,o,i=this.parts||[],a=this.points||[],s=i.length;if(s>0){if(1===s){for(e=0,r=[];e<i[0];e++)r.push(new V(a[e].x,a[e].y,a[e].type));return r[0].equals(r[i[0]-1])?(o=ye.createLineEPS(r),new xe(o)):(o=ye.createLineEPS(r),new ye(o))}for(e=0,n=[];e<s;e++){for(t=0,r=[];t<i[e];t++)r.push(new V(a[t].x,a[t].y));o=ye.createLineEPS(r),n.push(new ye(o)),a.splice(0,i[e])}return new tt(n)}return null}},{key:"toGeoLinem",value:function(){return Pt.fromJson(this)}},{key:"toGeoRegion",value:function(){var t=this.parts||[],r=this.partTopo||[],n=this.points||[],o=t.length;if(o<=0)return null;var i=[],a=[];if(1==o){for(var s=0;s<n.length;s++)a.push(new V(n[s].x,n[s].y));return i.push(new Me([new xe(a)])),new st(i)}for(var u=[],l=[],c=[],f=[],h=[],p=0,d=0;p<o;p++){for(var y=0;y<t[p];y++)a.push(new V(n[d+y].x,n[d+y].y));d+=t[p];var v=new Me([new xe(a)]);a=[],c.push(v),0===r.length&&f.push(v.getBounds()),h.push(1),l.push(v.getArea())}if(0===r.length){e.bubbleSort(l,c,r,f);for(var g=[],m=1;m<c.length;m++)for(var b=m-1;b>=0;b--)if(g[m]=-1,f[b].containsBounds(f[m])){h[m]=-1*h[b],h[m]<0&&(g[m]=b);break}for(var w=0;w<c.length;w++)h[w]>0?i.push(c[w]):(i[g[w]].components=i[g[w]].components.concat(c[w].components),i.push(""))}else{i=new Array;for(var _=0;_<c.length;_++)if(r[_]&&-1==r[_]?u=u.concat(c[_].components):(u.length>0&&i.length>0&&(i[i.length-1].components=i[i.length-1].components.concat(u),u=[]),i.push(c[_])),_==o-1){var x=i.length;if(x)i[x-1].components=i[x-1].components.concat(u);else for(var S=0,O=u.length;S<O;S++)i.push(new Me(u))}}return new st(i)}},{key:"toGeoRegionEPS",value:function(){var t=this.parts||[],r=this.partTopo||[],n=this.points||[],o=t.length;if(o<=0)return null;var i,a=[],s=[];if(1==o){for(var u=0;u<n.length;u++)s.push(new V(n[u].x,n[u].y));return i=ye.createLineEPS(s),a.push(new Me([new xe(i)])),new st(a)}for(var l=[],c=[],f=[],h=[],p=[],d=0,y=0;d<o;d++){for(var v=0;v<t[d];v++)s.push(new V(n[y+v].x,n[y+v].y));y+=t[d],i=ye.createLineEPS(s);var g=new Me([new xe(i)]);s=[],f.push(g),0===r.length&&h.push(g.getBounds()),p.push(1),c.push(g.getArea())}if(0===r.length){e.bubbleSort(c,f,r,h);for(var m=[],b=1;b<f.length;b++)for(var w=b-1;w>=0;w--)if(m[b]=-1,h[w].containsBounds(h[b])){p[b]=-1*p[w],p[b]<0&&(m[b]=w);break}for(var _=0;_<f.length;_++)p[_]>0?a.push(f[_]):(a[m[_]].components=a[m[_]].components.concat(f[_].components),a.push(""))}else{a=new Array;for(var x=0;x<f.length;x++)if(r[x]&&-1==r[x]?l=l.concat(f[x].components):(l.length>0&&a.length>0&&(a[a.length-1].components=a[a.length-1].components.concat(l),l=[]),a.push(f[x])),x==o-1){var S=a.length;if(S)a[S-1].components=a[S-1].components.concat(l);else for(var O=0,P=l.length;O<P;O++)a.push(new Me(l))}}return new st(a)}},{key:"transformGeoCompound",value:function(){var t=this.geoParts||[],r=t.length;if(r<=0)return null;for(var n=[],o=0;o<r;o++){var i=t[o];n.push(new e(i).toGeometry())}return new Z(n)}}])&&fr(t.prototype,r),n&&fr(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function pr(e){"@babel/helpers - typeof";return(pr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function dr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function yr(){return(yr="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=mr(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function vr(e,t){return(vr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function gr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=mr(e);if(t){var o=mr(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===pr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function mr(e){return(mr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var br=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&vr(e,t)}(i,Je);var t,r,n,o=gr(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).ignoreExtraDims=!0,t.CLASS_NAME="SuperMap.Format.GeoJSON",t.parseCoords={point:function(e){if(!1===this.ignoreExtraDims&&2!=e.length)throw"Only 2D points are supported: "+e;return new V(e[0],e[1])},multipoint:function(e){for(var t=[],r=null,n=0,o=e.length;n<o;++n){try{r=this.parseCoords.point.apply(this,[e[n]])}catch(e){throw e}t.push(r)}return new re(t)},linestring:function(e){for(var t=[],r=null,n=0,o=e.length;n<o;++n){try{r=this.parseCoords.point.apply(this,[e[n]])}catch(e){throw e}t.push(r)}return new ye(t)},multilinestring:function(e){for(var t=[],r=null,n=0,o=e.length;n<o;++n){try{r=this.parseCoords.linestring.apply(this,[e[n]])}catch(e){throw e}t.push(r)}return new tt(t)},polygon:function(e){for(var t,r,n=[],o=0,i=e.length;o<i;++o){try{r=this.parseCoords.linestring.apply(this,[e[o]])}catch(e){throw e}t=new xe(r.components),n.push(t)}return new Me(n)},multipolygon:function(e){for(var t=[],r=null,n=0,o=e.length;n<o;++n){try{r=this.parseCoords.polygon.apply(this,[e[n]])}catch(e){throw e}t.push(r)}return new st(t)},box:function(e){if(2!=e.length)throw"GeoJSON box coordinates must have 2 elements";return new Me([new xe([new V(e[0][0],e[0][1]),new V(e[1][0],e[0][1]),new V(e[1][0],e[1][1]),new V(e[0][0],e[1][1]),new V(e[0][0],e[0][1])])])}},t.extract={feature:function(e){var t=this.extract.geometry.apply(this,[e.geometry]),r={type:"Feature",properties:this.createAttributes(e),geometry:t};return e.geometry&&"TEXT"===e.geometry.type&&(r.properties.texts=e.geometry.texts,r.properties.textStyle=e.geometry.textStyle),e.fid&&(r.id=e.fid),e.ID&&(r.id=e.ID),r},geometry:function(e){if(null==e)return null;!e.parts&&e.points&&(e.parts=[e.points.length]);var t,r=e.hasOwnProperty("geometryType")?e:new hr(e).toGeometry()||e,n=r.geometryType||r.type;return"LinearRing"===n&&(n="LineString"),"LINEM"===n&&(n="MultiLineString"),t=this.extract[n.toLowerCase()].apply(this,[r]),"Collection"===(n="TEXT"===n?"Point":n)?{type:"GeometryCollection",geometries:t}:{type:n,coordinates:t}},point:function(e){var t=[e.x,e.y];for(var r in e)"x"===r||"y"===r||null===e[r]||isNaN(e[r])||t.push(e[r]);return t},text:function(e){return[e.points[0].x,e.points[0].y]},multipoint:function(e){for(var t=[],r=0,n=e.components.length;r<n;++r)t.push(this.extract.point.apply(this,[e.components[r]]));return t},linestring:function(e){for(var t=[],r=0,n=e.components.length;r<n;++r)t.push(this.extract.point.apply(this,[e.components[r]]));return t},multilinestring:function(e){for(var t=[],r=0,n=e.components.length;r<n;++r)t.push(this.extract.linestring.apply(this,[e.components[r]]));return t},polygon:function(e){for(var t=[],r=0,n=e.components.length;r<n;++r)t.push(this.extract.linestring.apply(this,[e.components[r]]));return t},multipolygon:function(e){for(var t=[],r=0,n=e.components.length;r<n;++r)t.push(this.extract.polygon.apply(this,[e.components[r]]));return t},collection:function(e){for(var t=e.components.length,r=new Array(t),n=0;n<t;++n)r[n]=this.extract.geometry.apply(this,[e.components[n]]);return r}},t}return t=i,(r=[{key:"read",value:function(e,t,r){t=t||"FeatureCollection";var n=null,o=null;if(o="string"==typeof e?yr(mr(i.prototype),"read",this).call(this,e,r):e){if("string"!=typeof o.type);else if(this.isValidType(o,t))switch(t){case"Geometry":try{n=this.parseGeometry(o)}catch(e){}break;case"Feature":try{(n=this.parseFeature(o)).type="Feature"}catch(e){}break;case"FeatureCollection":switch(n=[],o.type){case"Feature":try{n.push(this.parseFeature(o))}catch(e){n=null}break;case"FeatureCollection":for(var a=0,s=o.features.length;a<s;++a)try{n.push(this.parseFeature(o.features[a]))}catch(e){n=null}break;default:try{var u=this.parseGeometry(o);n.push(new ze(u))}catch(e){n=null}}}}else;return n}},{key:"write",value:function(e,t){return yr(mr(i.prototype),"write",this).call(this,this.toGeoJSON(e),t)}},{key:"fromGeoJSON",value:function(e,t,r){var n=this,o=this.read(e,t,r);return j.isArray(o)?o.map(function(e){return n._toiSevrerFeature(e)}):this._toiSevrerFeature(o)}},{key:"toGeoJSON",value:function(e){var t={type:null};if(j.isArray(e)){t.type="FeatureCollection";var r=e.length;t.features=new Array(r);for(var n=0;n<r;++n){var o=e[n];if(s(o)){var i={};i.geometry=o,t.features[n]=this.extract.feature.apply(this,[i])}else t.features[n]=this.extract.feature.apply(this,[o])}}else if(s(e)){var a={};a.geometry=e,t=this.extract.feature.apply(this,[a])}else t=this.extract.feature.apply(this,[e]);function s(e){return e.hasOwnProperty("parts")&&e.hasOwnProperty("points")||e.hasOwnProperty("geoParts")}return t}},{key:"isValidType",value:function(e,t){var r=!1;switch(t){case"Geometry":-1==j.indexOf(["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon","Box","GeometryCollection"],e.type)||(r=!0);break;case"FeatureCollection":r=!0;break;default:e.type==t&&(r=!0)}return r}},{key:"parseFeature",value:function(e){var t,r,n,o;n=e.properties?e.properties:{},o=e.geometry&&e.geometry.bbox||e.bbox;try{r=this.parseGeometry(e.geometry)}catch(e){throw e}return t=new ze(r,n),o&&(t.bounds=N.fromArray(o)),e.id&&(t.geometry.id=e.id,t.fid=e.id),t}},{key:"parseGeometry",value:function(e){if(null==e)return null;var t;if("GeometryCollection"==e.type){if(!j.isArray(e.geometries))throw"GeometryCollection must have geometries array: "+e;for(var r=e.geometries.length,n=new Array(r),o=0;o<r;++o)n[o]=this.parseGeometry.apply(this,[e.geometries[o]]);t=new Z(n)}else{if(!j.isArray(e.coordinates))throw"Geometry must have coordinates array: "+e;if(!this.parseCoords[e.type.toLowerCase()])throw"Unsupported geometry type: "+e.type;try{t=this.parseCoords[e.type.toLowerCase()].apply(this,[e.coordinates])}catch(e){throw e}}return t}},{key:"createCRSObject",value:function(e){var t=e.layer.projection.toString(),r={};if(t.match(/epsg:/i)){var n=parseInt(t.substring(t.indexOf(":")+1));r=4326==n?{type:"name",properties:{name:"urn:ogc:def:crs:OGC:1.3:CRS84"}}:{type:"name",properties:{name:"EPSG:"+n}}}return r}},{key:"_toiSevrerFeature",value:function(e){var t=e.attributes,r=[],n=[];for(var o in t)r.push(o),n.push(t[o]);var i={fieldNames:r,fieldValues:n,geometry:hr.fromGeometry(e.geometry)};return i.geometry.id=e.fid,i}},{key:"createAttributes",value:function(e){if(!e)return null;var t={};!function(e,t){if(!e.hasOwnProperty("fieldNames")||!e.hasOwnProperty("fieldValues"))return;var r=e.fieldNames,n=e.fieldValues;for(var o in r)t[r[o]]=n[o]}(e,t);var r=["fieldNames","fieldValues","geometry","stringID","ID"];for(var n in e)r.indexOf(n)>-1||(t[n]=e[n]);return t}}])&&dr(t.prototype,r),n&&dr(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(),wr=function(e){return"[object Array]"==Object.prototype.toString.call(e)},_r=function(e){return"string"==typeof e&&e.constructor===String},xr={toSuperMapGeometry:function(e){if(e&&e.type)return(new br).read(e,"FeatureCollection")[0].geometry},toSuperMapBounds:function(e){return wr(e)?new N(e[0],e[1],e[2],e[3]):new N(e.getWest(),e.getSouth(),e.getEast(),e.getNorth())},toSuperMapPoint:function(e){return wr(e)?new V(e[0],e[1]):e.lng&&e.lat?new V(e.lng,e.lat):new V(e.geometry.coordinates[0],e.geometry.coordinates[1])},toSuperMapPolygon:function(e){var t=e.getWest(),r=e.getEast(),n=e.getSouth(),o=e.getNorth();return new Me([new xe([new V(t,n),new V(r,n),new V(r,o),new V(t,o)])])},isArray:wr,toGeoJSON:function(e){if(e)return(new br).toGeoJSON(e)},toProcessingParam:function(e){var t={};if(e.length<1)t="";else{for(var r=[],n=0;n<e.length;n++){var o={};o.x=e[n][0],o.y=e[n][1],r.push(o)}t.type="REGION",t.points=r}return t},extend:function(e){for(var t=0;t<Object.getOwnPropertyNames(arguments).length;t++){var r=Object.getOwnPropertyNames(arguments)[t];if("caller"!=r&&"callee"!=r&&"length"!=r&&"arguments"!=r){var n=arguments[r];if(n)for(var o=0;o<Object.getOwnPropertyNames(n).length;o++){var i=Object.getOwnPropertyNames(n)[o];"caller"!=r&&"callee"!=r&&"length"!=r&&"arguments"!=r&&(e[i]=n[i])}}}return e},isNumber:function(e){if(""===e)return!1;var t=Number(e);return 0===t||!isNaN(t)},isString:_r,newGuid:function(e){for(var t=e||32,r="",n=1;n<t;n++){r+=Math.floor(16*Math.random()).toString(16)}return r},hexToRgba:function(e,t){var r=[],n=[];if(3==(e=e.replace(/#/,"")).length){for(var o=[],i=0;i<3;i++)o.push(e.charAt(i)+e.charAt(i));e=o.join("")}for(var a=0;a<6;a+=2)r[a]="0x"+e.substr(a,2),n.push(parseInt(Number(r[a])));return n.push(t),"rgba("+n.join(",")+")"},isMatchAdministrativeName:function(e,t){if(_r(t)){var r=e.substr(0,2);return"å¼ å®¶"===r&&(r=e.substr(0,3)),!!t.match(new RegExp(r))}return!1}};function Sr(e){"@babel/helpers - typeof";return(Sr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Or(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Pr(){return(Pr="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Mr(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function Er(e,t){return(Er=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function kr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Mr(e);if(t){var o=Mr(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===Sr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function Mr(e){return(Mr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Cr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Er(e,t)}(i,m);var t,r,n,o=kr(i);function i(e,t,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t,r)).x=parseFloat(e),n.y=parseFloat(t),n.text=r.toString(),n.bsInfo={h:null,w:null},n.element=document.createElement("span"),n.CLASS_NAME="SuperMap.Geometry.GeoText",n.geometryType="GeoText",n}return t=i,(r=[{key:"destroy",value:function(){Pr(Mr(i.prototype),"destroy",this).call(this),this.x=null,this.y=null,this.text=null}},{key:"getCentroid",value:function(){return new V(this.x,this.y)}},{key:"clone",value:function(e){return null==e&&(e=new i(this.x,this.y,this.text)),j.applyDefaults(e,this),e}},{key:"calculateBounds",value:function(){this.bounds=new N(this.x,this.y,this.x,this.y)}},{key:"getLabelPxBoundsByLabel",value:function(e,t,r,n){var o,i,a,s,u=j.cloneObject(e),l=(n.label||this.text).split("\n").length;if(t=parseFloat(t),r=parseFloat(r),l>1&&(r=parseFloat(r)*l),n.labelAlign&&"cm"!==n.labelAlign)switch(n.labelAlign){case"lt":u.x+=t/2,u.y+=r/2;break;case"lm":u.x+=t/2;break;case"lb":u.x+=t/2,u.y-=r/2;break;case"ct":u.y+=r/2;break;case"cb":u.y-=r/2;break;case"rt":u.x-=t/2,u.y+=r/2;break;case"rm":u.x-=t/2;break;case"rb":u.x-=t/2,u.y-=r/2}return this.bsInfo.h=r,this.bsInfo.w=t,o=u.x-parseFloat(t)/2,i=u.y+parseFloat(r)/2,s=u.x+parseFloat(t)/2,a=u.y-parseFloat(r)/2,new N(o,i,s,a)}},{key:"getLabelPxBoundsByText",value:function(e,t){var r,n,o,i,a=this.getLabelPxSize(t),s=j.cloneObject(e);if(t.labelAlign&&"cm"!==t.labelAlign)switch(t.labelAlign){case"lt":s.x+=a.w/2,s.y+=a.h/2;break;case"lm":s.x+=a.w/2;break;case"lb":s.x+=a.w/2,s.y-=a.h/2;break;case"ct":s.y+=a.h/2;break;case"cb":s.y-=a.h/2;break;case"rt":s.x-=a.w/2,s.y+=a.h/2;break;case"rm":s.x-=a.w/2;break;case"rb":s.x-=a.w/2,s.y-=a.h/2}return this.bsInfo.h=a.h,this.bsInfo.w=a.w,r=s.x-a.w/2,n=s.y+a.h/2,i=t.fontStyle&&"italic"===t.fontStyle?s.x+a.w/2+parseInt(parseFloat(t.fontSize)/2):s.x+a.w/2,o=s.y-a.h/2,new N(r,n,i,o)}},{key:"getLabelPxSize",value:function(e){var t,r,n,o,i=parseFloat(e.strokeWidth);t=e.label||this.text,r=e.fontSize?parseFloat(e.fontSize):parseFloat("12px");var a=t.split("\n"),s=a.length;o=s>1?r*s+s+i+.2*r:r+i+.2*r+1,n=0,this.labelWTmp&&n<this.labelWTmp&&(n=this.labelWTmp);for(var u=0;u<s;u++){var l=this.getTextCount(a[u]),c=this.labelWTmp=j.getTextBounds(e,a[u],this.element).textWidth+1*l.textC+i;n<c&&(n=c)}var f=new Object;return f.h=o,f.w=n,f}},{key:"getTextCount",value:function(e){for(var t={},r=0,n=0,o=0;o<e.length;o++)e.charCodeAt(o)>255?r++:n++;return t.cnC=r,t.enC=n,t.textC=e.length,t}}])&&Or(t.prototype,r),n&&Or(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function jr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Tr=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&r&&r.map&&r.renderer&&(this.id=j.createUniqueID(this.CLASS_NAME+"_"),this.lonlat=null,this.location=[],this.data=t,this.shapes=[],this.layer=r,this.CLASS_NAME="SuperMap.Feature.Theme")}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){this.data=null,this.id=null,this.lonlat=null,this.location=null,this.shapes=null,this.layer=null}},{key:"getLocalXY",value:function(e){var t=this.layer.map.getResolution(),r=this.layer.map.getExtent();return e instanceof V||e instanceof Cr?[e.x/t+-r.left/t,r.top/t-e.y/t]:e instanceof R?[e.lon/t+-r.left/t,r.top/t-e.lat/t]:null}}])&&jr(t.prototype,r),n&&jr(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Ar(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Ir=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.geometry=t,this.attributes=r}var t,r,n;return t=e,(r=[{key:"toFeature",value:function(){var e=xr.toSuperMapGeometry(this.geometry),t=[];return this.geometry instanceof o().LngLat?t=[this.geometry.lng,this.geometry.lat]:this.geometry instanceof o().Point?t=[this.geometry.x,this.geometry.y]:3===this.geometry.length&&(e=new Cr(this.geometry[0],this.geometry[1],this.geometry[2])),t.length>1&&(e=new V(t[0],t[1])),new ze(e,this.attributes)}}])&&Ar(t.prototype,r),n&&Ar(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Rr(e){"@babel/helpers - typeof";return(Rr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Lr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Nr=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.BUILTIN_OBJECT={"[object Function]":1,"[object RegExp]":1,"[object Date]":1,"[object Error]":1,"[object CanvasGradient]":1},this._ctx=null,this._canvas=null,this._pixelCtx=null,this._width=null,this._height=null,this._offsetX=0,this._offsetY=0,this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Util"}var t,r,n;return t=e,(r=[{key:"clone",value:function(e){var t=this.BUILTIN_OBJECT;if("object"==Rr(e)&&null!==e){var r=e;if(e instanceof Array){r=[];for(var n=0,o=e.length;n<o;n++)r[n]=this.clone(e[n])}else if(!t[Object.prototype.toString.call(e)])for(var i in r={},e)e.hasOwnProperty(i)&&(r[i]=this.clone(e[i]));return r}return e}},{key:"mergeItem",value:function(e,t,r,n){var o=this.BUILTIN_OBJECT;t.hasOwnProperty(r)&&("object"!=Rr(e[r])||o[Object.prototype.toString.call(e[r])]?!n&&r in e||(e[r]=t[r]):this.merge(e[r],t[r],n))}},{key:"merge",value:function(e,t,r){for(var n in t)this.mergeItem(e,t,n,r);return e}},{key:"getContext",value:function(){return this._ctx||(this._ctx=document.createElement("canvas").getContext("2d")),this._ctx}},{key:"getPixelContext",value:function(){return this._pixelCtx||(this._canvas=document.createElement("canvas"),this._width=this._canvas.width,this._height=this._canvas.height,this._pixelCtx=this._canvas.getContext("2d")),this._pixelCtx}},{key:"adjustCanvasSize",value:function(e,t){var r,n=this._canvas,o=this._pixelCtx,i=this._width,a=this._height,s=this._offsetX,u=this._offsetY;e+s>i&&(i=e+s+100,n.width=i,r=!0),t+u>a&&(a=t+u+100,n.height=a,r=!0),e<-s&&(i+=s=100*Math.ceil(-e/100),n.width=i,r=!0),t<-u&&(a+=u=100*Math.ceil(-t/100),n.height=a,r=!0),r&&o.translate(s,u)}},{key:"getPixelOffset",value:function(){return{x:this._offsetX,y:this._offsetY}}},{key:"indexOf",value:function(e,t){if(e.indexOf)return e.indexOf(t);for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}},{key:"inherits",value:function(e,t){var r=e.prototype;function n(){}for(var o in n.prototype=t.prototype,e.prototype=new n,r)e.prototype[o]=r[o];e.constructor=e}}])&&Lr(t.prototype,r),n&&Lr(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Dr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Br=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._handlers={},this.CLASS_NAME="SuperMap.LevelRenderer.Eventful"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){this._handlers=null}},{key:"one",value:function(e,t,r){var n=this._handlers;return t&&e?(n[e]||(n[e]=[]),n[e].push({h:t,one:!0,ctx:r||this}),this):this}},{key:"bind",value:function(e,t,r){var n=this._handlers;return t&&e?(n[e]||(n[e]=[]),n[e].push({h:t,one:!1,ctx:r||this}),this):this}},{key:"unbind",value:function(e,t){var r=this._handlers;if(!e)return this._handlers={},this;if(t){if(r[e]){for(var n=[],o=0,i=r[e].length;o<i;o++)r[e][o].h!=t&&n.push(r[e][o]);r[e]=n}r[e]&&0===r[e].length&&delete r[e]}else delete r[e];return this}},{key:"dispatch",value:function(e){if(this._handlers[e]){var t=arguments,r=t.length;r>3&&(t=Array.prototype.slice.call(t,1));for(var n=this._handlers[e],o=n.length,i=0;i<o;){switch(r){case 1:n[i].h.call(n[i].ctx);break;case 2:n[i].h.call(n[i].ctx,t[1]);break;case 3:n[i].h.call(n[i].ctx,t[1],t[2]);break;default:n[i].h.apply(n[i].ctx,t)}n[i].one?(n.splice(i,1),o--):i++}}return this}},{key:"dispatchWithContext",value:function(e){if(this._handlers[e]){var t=arguments,r=t.length;r>4&&(t=Array.prototype.slice.call(t,1,t.length-1));for(var n=t[t.length-1],o=this._handlers[e],i=o.length,a=0;a<i;){switch(r){case 1:o[a].h.call(n);break;case 2:o[a].h.call(n,t[1]);break;case 3:o[a].h.call(n,t[1],t[2]);break;default:o[a].h.apply(n,t)}o[a].one?(o.splice(a,1),i--):a++}}return this}}])&&Dr(t.prototype,r),n&&Dr(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Fr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Gr=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.ArrayCtor="undefined"==typeof Float32Array?Array:Float32Array,this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Vector"}var t,r,n;return t=e,(r=[{key:"create",value:function(e,t){var r=new(0,this.ArrayCtor)(2);return r[0]=e||0,r[1]=t||0,r}},{key:"copy",value:function(e,t){return e[0]=t[0],e[1]=t[1],e}},{key:"set",value:function(e,t,r){return e[0]=t,e[1]=r,e}},{key:"add",value:function(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e}},{key:"scaleAndAdd",value:function(e,t,r,n){return e[0]=t[0]+r[0]*n,e[1]=t[1]+r[1]*n,e}},{key:"sub",value:function(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e}},{key:"len",value:function(e){return Math.sqrt(this.lenSquare(e))}},{key:"lenSquare",value:function(e){return e[0]*e[0]+e[1]*e[1]}},{key:"mul",value:function(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e}},{key:"div",value:function(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e}},{key:"dot",value:function(e,t){return e[0]*t[0]+e[1]*t[1]}},{key:"scale",value:function(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e}},{key:"normalize",value:function(e,t){var r=this.len(t);return 0===r?(e[0]=0,e[1]=0):(e[0]=t[0]/r,e[1]=t[1]/r),e}},{key:"distance",value:function(e,t){return Math.sqrt((e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1]))}},{key:"distanceSquare",value:function(e,t){return(e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1])}},{key:"negate",value:function(e,t){return e[0]=-t[0],e[1]=-t[1],e}},{key:"lerp",value:function(e,t,r,n){return e[0]=t[0]+n*(r[0]-t[0]),e[1]=t[1]+n*(r[1]-t[1]),e}},{key:"applyTransform",value:function(e,t,r){var n=t[0],o=t[1];return e[0]=r[0]*n+r[2]*o+r[4],e[1]=r[1]*n+r[3]*o+r[5],e}},{key:"min",value:function(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e}},{key:"max",value:function(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e}},{key:"length",value:function(e){return this.len(e)}},{key:"lengthSquare",value:function(e){return this.lenSquare(e)}},{key:"dist",value:function(e,t){return this.distance(e,t)}},{key:"distSquare",value:function(e,t){return this.distanceSquare(e,t)}}])&&Fr(t.prototype,r),n&&Fr(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function zr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Ur=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.vector=new Gr,this.EPSILON=1e-4,this.THREE_SQRT=Math.sqrt(3),this.ONE_THIRD=1/3,this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Curve"}var t,r,n;return t=e,(r=[{key:"isAroundZero",value:function(e){return e>-this.EPSILON&&e<this.EPSILON}},{key:"isNotAroundZero",value:function(e){return e>this.EPSILON||e<-this.EPSILON}},{key:"cubicAt",value:function(e,t,r,n,o){var i=1-o;return i*i*(i*e+3*o*t)+o*o*(o*n+3*i*r)}},{key:"cubicDerivativeAt",value:function(e,t,r,n,o){var i=1-o;return 3*(((t-e)*i+2*(r-t)*o)*i+(n-r)*o*o)}},{key:"cubicRootAt",value:function(e,t,r,n,o,i){var a=n+3*(t-r)-e,s=3*(r-2*t+e),u=3*(t-e),l=e-o,c=s*s-3*a*u,f=s*u-9*a*l,h=u*u-3*s*l,p=0;if(this.isAroundZero(c)&&this.isAroundZero(f))if(this.isAroundZero(s))i[0]=0;else{var d=-u/s;d>=0&&d<=1&&(i[p++]=d)}else{var y=f*f-4*c*h;if(this.isAroundZero(y)){var v=f/c,g=-s/a+v,m=-v/2;g>=0&&g<=1&&(i[p++]=g),m>=0&&m<=1&&(i[p++]=m)}else if(y>0){var b=Math.sqrt(y),w=c*s+1.5*a*(-f+b),_=c*s+1.5*a*(-f-b),x=(-s-((w=w<0?-Math.pow(-w,this.ONE_THIRD):Math.pow(w,this.ONE_THIRD))+(_=_<0?-Math.pow(-_,this.ONE_THIRD):Math.pow(_,this.ONE_THIRD))))/(3*a);x>=0&&x<=1&&(i[p++]=x)}else{var S=(2*c*s-3*a*f)/(2*Math.sqrt(c*c*c)),O=Math.acos(S)/3,P=Math.sqrt(c),E=Math.cos(O),k=(-s-2*P*E)/(3*a),M=(-s+P*(E+this.THREE_SQRT*Math.sin(O)))/(3*a),C=(-s+P*(E-this.THREE_SQRT*Math.sin(O)))/(3*a);k>=0&&k<=1&&(i[p++]=k),M>=0&&M<=1&&(i[p++]=M),C>=0&&C<=1&&(i[p++]=C)}}return p}},{key:"cubicExtrema",value:function(e,t,r,n,o){var i=6*r-12*t+6*e,a=9*t+3*n-3*e-9*r,s=3*t-3*e,u=0;if(this.isAroundZero(a)){if(this.isNotAroundZero(i)){var l=-s/i;l>=0&&l<=1&&(o[u++]=l)}}else{var c=i*i-4*a*s;if(this.isAroundZero(c))o[0]=-i/(2*a);else if(c>0){var f=Math.sqrt(c),h=(-i+f)/(2*a),p=(-i-f)/(2*a);h>=0&&h<=1&&(o[u++]=h),p>=0&&p<=1&&(o[u++]=p)}}return u}},{key:"cubicSubdivide",value:function(e,t,r,n,o,i){var a=(t-e)*o+e,s=(r-t)*o+t,u=(n-r)*o+r,l=(s-a)*o+a,c=(u-s)*o+s,f=(c-l)*o+l;i[0]=e,i[1]=a,i[2]=l,i[3]=f,i[4]=f,i[5]=c,i[6]=u,i[7]=n}},{key:"cubicProjectPoint",value:function(e,t,r,n,o,i,a,s,u,l,c){var f,h=this.vector.create(),p=this.vector.create(),d=this.vector.create(),y=.005,v=1/0;h[0]=u,h[1]=l;for(var g=0;g<1;g+=.05){p[0]=this.cubicAt(e,r,o,a,g),p[1]=this.cubicAt(t,n,i,s,g);var m=this.vector.distSquare(h,p);m<v&&(f=g,v=m)}v=1/0;for(var b=0;b<32&&!(y<this.EPSILON);b++){var w=f-y,_=f+y;p[0]=this.cubicAt(e,r,o,a,w),p[1]=this.cubicAt(t,n,i,s,w);var x=this.vector.distSquare(p,h);if(w>=0&&x<v)f=w,v=x;else{d[0]=this.cubicAt(e,r,o,a,_),d[1]=this.cubicAt(t,n,i,s,_);var S=this.vector.distSquare(d,h);_<=1&&S<v?(f=_,v=S):y*=.5}}return c&&(c[0]=this.cubicAt(e,r,o,a,f),c[1]=this.cubicAt(t,n,i,s,f)),Math.sqrt(v)}},{key:"quadraticAt",value:function(e,t,r,n){var o=1-n;return o*(o*e+2*n*t)+n*n*r}},{key:"quadraticDerivativeAt",value:function(e,t,r,n){return 2*((1-n)*(t-e)+n*(r-t))}},{key:"quadraticRootAt",value:function(e,t,r,n,o){var i=e-2*t+r,a=2*(t-e),s=e-n,u=0;if(this.isAroundZero(i)){if(this.isNotAroundZero(a)){var l=-s/a;l>=0&&l<=1&&(o[u++]=l)}}else{var c=a*a-4*i*s;if(this.isAroundZero(c)){var f=-a/(2*i);f>=0&&f<=1&&(o[u++]=f)}else if(c>0){var h=Math.sqrt(c),p=(-a+h)/(2*i),d=(-a-h)/(2*i);p>=0&&p<=1&&(o[u++]=p),d>=0&&d<=1&&(o[u++]=d)}}return u}},{key:"quadraticExtremum",value:function(e,t,r){var n=e+r-2*t;return 0===n?.5:(e-t)/n}},{key:"quadraticProjectPoint",value:function(e,t,r,n,o,i,a,s,u){var l,c=this.vector.create(),f=this.vector.create(),h=this.vector.create(),p=.005,d=1/0;c[0]=a,c[1]=s;for(var y=0;y<1;y+=.05){f[0]=this.quadraticAt(e,r,o,y),f[1]=this.quadraticAt(t,n,i,y);var v=this.vector.distSquare(c,f);v<d&&(l=y,d=v)}d=1/0;for(var g=0;g<32&&!(p<this.EPSILON);g++){var m=l-p,b=l+p;f[0]=this.quadraticAt(e,r,o,m),f[1]=this.quadraticAt(t,n,i,m);var w=this.vector.distSquare(f,c);if(m>=0&&w<d)l=m,d=w;else{h[0]=this.quadraticAt(e,r,o,b),h[1]=this.quadraticAt(t,n,i,b);var _=this.vector.distSquare(h,c);b<=1&&_<d?(l=b,d=_):p*=.5}}return u&&(u[0]=this.quadraticAt(e,r,o,l),u[1]=this.quadraticAt(t,n,i,l)),Math.sqrt(d)}}])&&zr(t.prototype,r),n&&zr(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Vr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Wr=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.util=new Nr,this.curve=new Ur,this._ctx=null,this._textWidthCache={},this._textHeightCache={},this._textWidthCacheCounter=0,this._textHeightCacheCounter=0,this.TEXT_CACHE_MAX=5e3,this.PI2=2*Math.PI,this.roots=[-1,-1,-1],this.extrema=[-1,-1],this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Area"}var t,r,n;return t=e,(r=[{key:"normalizeRadian",value:function(e){return(e%=this.PI2)<0&&(e+=this.PI2),e}},{key:"isInside",value:function(e,t,r,n){if(!t||!e)return!1;var o=e.type;this._ctx=this._ctx||this.util.getContext();var i=this._mathMethod(e,t,r,n);if(void 0!==i)return i;if(e.buildPath&&this._ctx.isPointInPath)return this._buildPathMethod(e,this._ctx,t,r,n);switch(o){case"ellipse":case"smicellipse":return!0;case"trochoid":var a="out"==t.location?t.r1+t.r2+t.d:t.r1-t.r2+t.d;return this.isInsideCircle(t,r,n,a);case"rose":return this.isInsideCircle(t,r,n,t.maxr);default:return!1}}},{key:"_mathMethod",value:function(e,t,r,n){switch(e.type){case"bezier-curve":return void 0===t.cpX2?this.isInsideQuadraticStroke(t.xStart,t.yStart,t.cpX1,t.cpY1,t.xEnd,t.yEnd,t.lineWidth,r,n):this.isInsideCubicStroke(t.xStart,t.yStart,t.cpX1,t.cpY1,t.cpX2,t.cpY2,t.xEnd,t.yEnd,t.lineWidth,r,n);case"line":return this.isInsideLine(t.xStart,t.yStart,t.xEnd,t.yEnd,t.lineWidth,r,n);case"broken-line":return this.isInsideBrokenLine(t.pointList,t.lineWidth,r,n);case"smicbroken-line":var o=r,i=n;return e.refOriginalPosition&&(o=r-e.refOriginalPosition[0],i=n-e.refOriginalPosition[1]),this.isInsideBrokenLine(t.pointList,t.lineWidth,o,i);case"ring":return this.isInsideRing(t.x,t.y,t.r0,t.r,r,n);case"smicring":var a=t.x,s=t.y;return e.refOriginalPosition&&(a=t.x+e.refOriginalPosition[0],s=t.y+e.refOriginalPosition[1]),this.isInsideRing(a,s,t.r0,t.r,r,n);case"circle":return this.isInsideCircle(t.x,t.y,t.r,r,n);case"smicpoint":var u=r,l=n;return e.refOriginalPosition&&(u=r-e.refOriginalPosition[0],l=n-e.refOriginalPosition[1]),this.isInsideCircle(t.x,t.y,t.r,u,l);case"sector":var c=t.startAngle*Math.PI/180,f=t.endAngle*Math.PI/180;return t.clockWise||(c=-c,f=-f),this.isInsideSector(t.x,t.y,t.r0,t.r,c,f,!t.clockWise,r,n);case"smicsector":var h=t.startAngle*Math.PI/180,p=t.endAngle*Math.PI/180;t.clockWise||(h=-h,p=-p);var d=t.x,y=t.y;return e.refOriginalPosition&&(d=t.x+e.refOriginalPosition[0],y=t.y+e.refOriginalPosition[1]),this.isInsideSector(d,y,t.r0,t.r,h,p,!t.clockWise,r,n);case"path":return this.isInsidePath(t.pathArray,Math.max(t.lineWidth,5),t.brushType,r,n);case"polygon":case"star":case"smicstar":case"isogon":case"smicisogon":return this.isInsidePolygon(t.pointList,r,n);case"smicpolygon":var v=r,g=n;if(e.refOriginalPosition&&(v=r-e.refOriginalPosition[0],g=n-e.refOriginalPosition[1]),e.holePolygonPointLists&&e.holePolygonPointLists.length>0){for(var m=this.isInsidePolygon(t.pointList,v,g),b=e.holePolygonPointLists,w=!1,_=0,x=b.length;_<x;_++){var S=b[_];!0===this.isInsidePolygon(S,v,g)&&(w=!0)}return!0===m&&!1===w}return this.isInsidePolygon(t.pointList,v,g);case"text":var O=t.__rect||e.getRect(t);return this.isInsideRect(O.x,O.y,O.width,O.height,r,n);case"smictext":var P=e.getTextBackground(t);return this.isInsidePolygon(P,r,n);case"rectangle":case"image":return this.isInsideRect(t.x,t.y,t.width,t.height,r,n);case"smicimage":var E=t.x,k=t.y;return e.refOriginalPosition&&(E=t.x+e.refOriginalPosition[0],k=t.y+e.refOriginalPosition[1]),this.isInsideRect(E,k,t.width,t.height,r,n)}}},{key:"_buildPathMethod",value:function(e,t,r,n,o){return t.beginPath(),e.buildPath(t,r),t.closePath(),t.isPointInPath(n,o)}},{key:"isOutside",value:function(e,t,r,n){return!this.isInside(e,t,r,n)}},{key:"isInsideLine",value:function(e,t,r,n,o,i,a){if(0===o)return!1;var s=Math.max(o,5),u=0;if(a>t+s&&a>n+s||a<t-s&&a<n-s||i>e+s&&i>r+s||i<e-s&&i<r-s)return!1;if(e===r)return Math.abs(i-e)<=s/2;var l=(u=(t-n)/(e-r))*i-a+(e*n-r*t)/(e-r);return l*l/(u*u+1)<=s/2*s/2}},{key:"isInsideCubicStroke",value:function(e,t,r,n,o,i,a,s,u,l,c){if(0===u)return!1;var f=Math.max(u,5);return!(c>t+f&&c>n+f&&c>i+f&&c>s+f||c<t-f&&c<n-f&&c<i-f&&c<s-f||l>e+f&&l>r+f&&l>o+f&&l>a+f||l<e-f&&l<r-f&&l<o-f&&l<a-f)&&this.curve.cubicProjectPoint(e,t,r,n,o,i,a,s,l,c,null)<=f/2}},{key:"isInsideQuadraticStroke",value:function(e,t,r,n,o,i,a,s,u){if(0===a)return!1;var l=Math.max(a,5);return!(u>t+l&&u>n+l&&u>i+l||u<t-l&&u<n-l&&u<i-l||s>e+l&&s>r+l&&s>o+l||s<e-l&&s<r-l&&s<o-l)&&this.curve.quadraticProjectPoint(e,t,r,n,o,i,s,u,null)<=l/2}},{key:"isInsideArcStroke",value:function(e,t,r,n,o,i,a,s,u){var l=this.PI2;if(0===a)return!1;var c=Math.max(a,5);s-=e,u-=t;var f=Math.sqrt(s*s+u*u);if(f-c>r||f+c<r)return!1;if(Math.abs(n-o)>=l)return!0;if(i){var h=n;n=this.normalizeRadian(o),o=this.normalizeRadian(h)}else n=this.normalizeRadian(n),o=this.normalizeRadian(o);n>o&&(o+=l);var p=Math.atan2(u,s);return p<0&&(p+=l),p>=n&&p<=o||p+l>=n&&p+l<=o}},{key:"isInsideBrokenLine",value:function(e,t,r,n){for(var o=Math.max(t,10),i=0,a=e.length-1;i<a;i++){var s=e[i][0],u=e[i][1],l=e[i+1][0],c=e[i+1][1];if(this.isInsideLine(s,u,l,c,o,r,n))return!0}return!1}},{key:"isInsideRing",value:function(e,t,r,n,o,i){var a=(o-e)*(o-e)+(i-t)*(i-t);return a<n*n&&a>r*r}},{key:"isInsideRect",value:function(e,t,r,n,o,i){return o>=e&&o<=e+r&&i>=t&&i<=t+n}},{key:"isInsideCircle",value:function(e,t,r,n,o){return(n-e)*(n-e)+(o-t)*(o-t)<r*r}},{key:"isInsideSector",value:function(e,t,r,n,o,i,a,s,u){return this.isInsideArcStroke(e,t,(r+n)/2,o,i,a,n-r,s,u)}},{key:"isInsidePolygon",value:function(e,t,r){for(var n=e.length,o=0,i=0,a=n-1;i<n;i++){var s=e[a][0],u=e[a][1],l=e[i][0],c=e[i][1];o+=this.windingLine(s,u,l,c,t,r),a=i}return 0!==o}},{key:"windingLine",value:function(e,t,r,n,o,i){return i>t&&i>n||i<t&&i<n?0:n==t?0:(i-t)/(n-t)*(r-e)+e>o?n<t?1:-1:0}},{key:"swapExtrema",value:function(){var e=this.extrema[0];this.extrema[0]=this.extrema[1],this.extrema[1]=e}},{key:"windingCubic",value:function(e,t,r,n,o,i,a,s,u,l){var c=this.curve,f=this.roots,h=this.extrema;if(l>t&&l>n&&l>i&&l>s||l<t&&l<n&&l<i&&l<s)return 0;var p=c.cubicRootAt(t,n,i,s,l,f);if(0===p)return 0;for(var d,y,v=0,g=-1,m=0;m<p;m++){var b=f[m];c.cubicAt(e,r,o,a,b)<u||(g<0&&(g=c.cubicExtrema(t,n,i,s,h),h[1]<h[0]&&g>1&&this.swapExtrema(),d=c.cubicAt(t,n,i,s,h[0]),g>1&&(y=c.cubicAt(t,n,i,s,h[1]))),2==g?b<h[0]?v+=d<t?1:-1:b<h[1]?v+=y<d?1:-1:v+=s<y?1:-1:b<h[0]?v+=d<t?1:-1:v+=s<d?1:-1)}return v}},{key:"windingQuadratic",value:function(e,t,r,n,o,i,a,s){var u=this.curve,l=this.roots;if(s>t&&s>n&&s>i||s<t&&s<n&&s<i)return 0;var c=u.quadraticRootAt(t,n,i,s,l);if(0===c)return 0;var f=u.quadraticExtremum(t,n,i);if(f>=0&&f<=1){for(var h=0,p=u.quadraticAt(t,n,i,f),d=0;d<c;d++){u.quadraticAt(e,r,o,l[d])>a||(l[d]<f?h+=p<t?1:-1:h+=i<p?1:-1)}return h}return u.quadraticAt(e,r,o,l[0])>a?0:i<t?1:-1}},{key:"windingArc",value:function(e,t,r,n,o,i,a,s){var u=this.roots,l=this.PI2;if((s-=t)>r||s<-r)return 0;var c=Math.sqrt(r*r-s*s);if(u[0]=-c,u[1]=c,Math.abs(n-o)>=l){n=0,o=l;var f=i?1:-1;return a>=u[0]+e&&a<=u[1]+e?f:0}if(i){var h=n;n=this.normalizeRadian(o),o=this.normalizeRadian(h)}else n=this.normalizeRadian(n),o=this.normalizeRadian(o);n>o&&(o+=l);for(var p=0,d=0;d<2;d++){var y=u[d];if(y+e>a){var v=Math.atan2(s,y),g=i?1:-1;v<0&&(v=l+v),(v>=n&&v<=o||v+l>=n&&v+l<=o)&&(v>Math.PI/2&&v<1.5*Math.PI&&(g=-g),p+=g)}}return p}},{key:"isInsidePath",value:function(e,t,r,n,o){for(var i=0,a=0,s=0,u=0,l=0,c=!0,f=!0,h="stroke"===(r=r||"fill")||"both"===r,p="fill"===r||"both"===r,d=0;d<e.length;d++){var y=e[d],v=y.points;if(c||"M"===y.command){if(d>0&&(p&&(i+=this.windingLine(a,s,u,l,n,o)),0!==i))return!0;u=v[v.length-2],l=v[v.length-1],c=!1,f&&"A"!==y.command&&(f=!1,a=u,s=l)}switch(y.command){case"M":a=v[0],s=v[1];break;case"L":if(h&&this.isInsideLine(a,s,v[0],v[1],t,n,o))return!0;p&&(i+=this.windingLine(a,s,v[0],v[1],n,o)),a=v[0],s=v[1];break;case"C":if(h&&this.isInsideCubicStroke(a,s,v[0],v[1],v[2],v[3],v[4],v[5],t,n,o))return!0;p&&(i+=this.windingCubic(a,s,v[0],v[1],v[2],v[3],v[4],v[5],n,o)),a=v[4],s=v[5];break;case"Q":if(h&&this.isInsideQuadraticStroke(a,s,v[0],v[1],v[2],v[3],t,n,o))return!0;p&&(i+=this.windingQuadratic(a,s,v[0],v[1],v[2],v[3],n,o)),a=v[2],s=v[3];break;case"A":var g=v[0],m=v[1],b=v[2],w=v[3],_=v[4],x=v[5],S=Math.cos(_)*b+g,O=Math.sin(_)*w+m;f?(f=!1,u=S,l=O):i+=this.windingLine(a,s,S,O);var P=(n-g)*w/b+g;if(h&&this.isInsideArcStroke(g,m,w,_,_+x,1-v[7],t,P,o))return!0;p&&(i+=this.windingArc(g,m,w,_,_+x,1-v[7],P,o)),a=Math.cos(_+x)*b+g,s=Math.sin(_+x)*w+m;break;case"z":if(h&&this.isInsideLine(a,s,u,l,t,n,o))return!0;c=!0}}return p&&(i+=this.windingLine(a,s,u,l,n,o)),0!==i}},{key:"getTextWidth",value:function(e,t){var r=e+":"+t;if(this._textWidthCache[r])return this._textWidthCache[r];this._ctx=this._ctx||this.util.getContext(),this._ctx.save(),t&&(this._ctx.font=t);for(var n=0,o=0,i=(e=(e+"").split("\n")).length;o<i;o++)n=Math.max(this._ctx.measureText(e[o]).width,n);return this._ctx.restore(),this._textWidthCache[r]=n,++this._textWidthCacheCounter>this.TEXT_CACHE_MAX&&(this._textWidthCacheCounter=0,this._textWidthCache={}),n}},{key:"getTextHeight",value:function(e,t){var r=e+":"+t;if(this._textHeightCache[r])return this._textHeightCache[r];this._ctx=this._ctx||this.util.getContext(),this._ctx.save(),t&&(this._ctx.font=t),e=(e+"").split("\n");var n=(this._ctx.measureText("ZH").width+2)*e.length;return this._ctx.restore(),this._textHeightCache[r]=n,++this._textHeightCacheCounter>this.TEXT_CACHE_MAX&&(this._textHeightCacheCounter=0,this._textHeightCache={}),n}}])&&Vr(t.prototype,r),n&&Vr(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Yr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Hr=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.util=new Nr,this._ctx=null,this.palette=["#ff9277"," #dddd00"," #ffc877"," #bbe3ff"," #d5ffbb","#bbbbff"," #ddb000"," #b0dd00"," #e2bbff"," #ffbbe3","#ff7777"," #ff9900"," #83dd00"," #77e3ff"," #778fff","#c877ff"," #ff77ab"," #ff6600"," #aa8800"," #77c7ff","#ad77ff"," #ff77ff"," #dd0083"," #777700"," #00aa00","#0088aa"," #8400dd"," #aa0088"," #dd0000"," #772e00"],this._palette=this.palette,this.highlightColor="rgba(0,0,255,1)",this._highlightColor=this.highlightColor,this.colorRegExp=/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i,this._nameColors={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#0ff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000",blanchedalmond:"#ffebcd",blue:"#00f",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#0ff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgrey:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#f0f",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#789",lightslategrey:"#789",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#0f0",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#f0f",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#f00",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#fff",whitesmoke:"#f5f5f5",yellow:"#ff0",yellowgreen:"#9acd32"},this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Color"}var t,r,n;return t=e,(r=[{key:"customPalette",value:function(e){this.palette=e}},{key:"resetPalette",value:function(){this.palette=this._palette}},{key:"getColor",value:function(e,t){return e|=0,(t=t||this.palette)[e%t.length]}},{key:"customHighlight",value:function(e){this.highlightColor=e}},{key:"resetHighlight",value:function(){this.highlightColor=this._highlightColor}},{key:"getHighlightColor",value:function(){return this.highlightColor}},{key:"getRadialGradient",value:function(e,t,r,n,o,i,a){var s=this.util;this._ctx||(this._ctx=s.getContext());for(var u=this._ctx.createRadialGradient(e,t,r,n,o,i),l=0,c=a.length;l<c;l++)u.addColorStop(a[l][0],a[l][1]);return u.__nonRecursion=!0,u}},{key:"getLinearGradient",value:function(e,t,r,n,o){var i=this.util;this._ctx||(this._ctx=i.getContext());for(var a=this._ctx.createLinearGradient(e,t,r,n),s=0,u=o.length;s<u;s++)a.addColorStop(o[s][0],o[s][1]);return a.__nonRecursion=!0,a}},{key:"getStepColors",value:function(e,t,r){e=this.toRGBA(e),t=this.toRGBA(t),e=this.getData(e);for(var n=[],o=((t=this.getData(t))[0]-e[0])/r,i=(t[1]-e[1])/r,a=(t[2]-e[2])/r,s=(t[3]-e[3])/r,u=0,l=e[0],c=e[1],f=e[2],h=e[3];u<r;u++)n[u]=this.toColor([this.adjust(Math.floor(l),[0,255]),this.adjust(Math.floor(c),[0,255]),this.adjust(Math.floor(f),[0,255]),h.toFixed(4)-0],"rgba"),l+=o,c+=i,f+=a,h+=s;return l=t[0],c=t[1],f=t[2],h=t[3],n[u]=this.toColor([l,c,f,h],"rgba"),n}},{key:"getGradientColors",value:function(e,t){var r=[],n=e.length;if(void 0===t&&(t=20),1===n)r=this.getStepColors(e[0],e[0],t);else if(n>1)for(var o=0,i=n-1;o<i;o++){var a=this.getStepColors(e[o],e[o+1],t);o<i-1&&a.pop(),r=r.concat(a)}return r}},{key:"toColor",value:function(e,t){if(t=t||"rgb",e&&(3===e.length||4===e.length)){if(e=this.map(e,function(e){return e>1?Math.ceil(e):e}),t.indexOf("hex")>-1)return"#"+((1<<24)+(e[0]<<16)+(e[1]<<8)+ +e[2]).toString(16).slice(1);if(t.indexOf("hs")>-1){var r=this.map(e.slice(1,3),function(e){return e+"%"});e[1]=r[0],e[2]=r[1]}return t.indexOf("a")>-1?(3===e.length&&e.push(1),e[3]=this.adjust(e[3],[0,1]),t+"("+e.slice(0,4).join(",")+")"):t+"("+e.slice(0,3).join(",")+")"}}},{key:"toArray",value:function(e){(e=this.trim(e)).indexOf("rgba")<0&&(e=this.toRGBA(e));var t=[],r=0;return e.replace(/[\d.]+/g,function(e){r<3?e|=0:e=+e,t[r++]=e}),t}},{key:"convert",value:function(e,t){if(!this.isCalculableColor(e))return e;var r=this.getData(e),n=r[3];return void 0===n&&(n=1),e.indexOf("hsb")>-1?r=this._HSV_2_RGB(r):e.indexOf("hsl")>-1&&(r=this._HSL_2_RGB(r)),t.indexOf("hsb")>-1||t.indexOf("hsv")>-1?r=this._RGB_2_HSB(r):t.indexOf("hsl")>-1&&(r=this._RGB_2_HSL(r)),r[3]=n,this.toColor(r,t)}},{key:"toRGBA",value:function(e){return this.convert(e,"rgba")}},{key:"toRGB",value:function(e){return this.convert(e,"rgb")}},{key:"toHex",value:function(e){return this.convert(e,"hex")}},{key:"toHSVA",value:function(e){return this.convert(e,"hsva")}},{key:"toHSV",value:function(e){return this.convert(e,"hsv")}},{key:"toHSBA",value:function(e){return this.convert(e,"hsba")}},{key:"toHSB",value:function(e){return this.convert(e,"hsb")}},{key:"toHSLA",value:function(e){return this.convert(e,"hsla")}},{key:"toHSL",value:function(e){return this.convert(e,"hsl")}},{key:"toName",value:function(e){for(var t in this._nameColors)if(this.toHex(this._nameColors[t])===this.toHex(e))return t;return null}},{key:"trim",value:function(e){return String(e).replace(/\s+/g,"")}},{key:"normalize",value:function(e){if(this._nameColors[e]&&(e=this._nameColors[e]),e=(e=this.trim(e)).replace(/hsv/i,"hsb"),/^#[\da-f]{3}$/i.test(e)){var t=(3840&(e=parseInt(e.slice(1),16)))<<8,r=(240&e)<<4,n=15&e;e="#"+((1<<24)+(t<<4)+t+(r<<4)+r+(n<<4)+n).toString(16).slice(1)}return e}},{key:"lift",value:function(e,t){if(!this.isCalculableColor(e))return e;var r=t>0?1:-1;void 0===t&&(t=0),t=Math.abs(t)>1?1:Math.abs(t),e=this.toRGB(e);for(var n=this.getData(e),o=0;o<3;o++)n[o]=1===r?n[o]*(1-t)|0:(255-n[o])*t+n[o]|0;return"rgb("+n.join(",")+")"}},{key:"reverse",value:function(e){if(!this.isCalculableColor(e))return e;var t=this.getData(this.toRGBA(e));return t=this.map(t,function(e){return 255-e}),this.toColor(t,"rgb")}},{key:"mix",value:function(e,t,r){if(!this.isCalculableColor(e)||!this.isCalculableColor(t))return e;void 0===r&&(r=.5);for(var n=2*(r=1-this.adjust(r,[0,1]))-1,o=this.getData(this.toRGBA(e)),i=this.getData(this.toRGBA(t)),a=o[3]-i[3],s=((n*a==-1?n:(n+a)/(1+n*a))+1)/2,u=1-s,l=[],c=0;c<3;c++)l[c]=o[c]*s+i[c]*u;var f=o[3]*r+i[3]*(1-r);return f=Math.max(0,Math.min(1,f)),1===o[3]&&1===i[3]?this.toColor(l,"rgb"):(l[3]=f,this.toColor(l,"rgba"))}},{key:"random",value:function(){return"#"+Math.random().toString(16).slice(2,8)}},{key:"getData",value:function(t){var r,n,o=(t=this.normalize(t)).match(this.colorRegExp);if(null===o)throw new Error("The color format error");var i,a=[];if(o[2])i=[(r=o[2].replace("#","").split(""))[0]+r[1],r[2]+r[3],r[4]+r[5]],a=this.map(i,function(t){return e.prototype.adjust.call(this,parseInt(t,16),[0,255])});else if(o[4]){var s=o[4].split(",");n=s[3],i=s.slice(0,3),a=this.map(i,function(t){return t=Math.floor(t.indexOf("%")>0?2.55*parseInt(t,0):t),e.prototype.adjust.call(this,t,[0,255])}),void 0!==n&&a.push(this.adjust(parseFloat(n),[0,1]))}else if(o[5]||o[6]){var u=(o[5]||o[6]).split(","),l=parseInt(u[0],0)/360,c=u[1],f=u[2];n=u[3],(a=this.map([c,f],function(t){return e.prototype.adjust.call(this,parseFloat(t)/100,[0,1])})).unshift(l),void 0!==n&&a.push(this.adjust(parseFloat(n),[0,1]))}return a}},{key:"alpha",value:function(e,t){if(!this.isCalculableColor(e))return e;null===t&&(t=1);var r=this.getData(this.toRGBA(e));return r[3]=this.adjust(Number(t).toFixed(4),[0,1]),this.toColor(r,"rgba")}},{key:"map",value:function(e,t){if("function"!=typeof t)throw new TypeError;for(var r=e?e.length:0,n=0;n<r;n++)e[n]=t(e[n]);return e}},{key:"adjust",value:function(e,t){return e<=t[0]?e=t[0]:e>=t[1]&&(e=t[1]),e}},{key:"isCalculableColor",value:function(e){return e instanceof Array||"string"==typeof e}},{key:"_HSV_2_RGB",value:function(e){var t,r,n,o=e[0],i=e[1],a=e[2];if(0===i)t=255*a,r=255*a,n=255*a;else{var s=6*o;6===s&&(s=0);var u=0|s,l=a*(1-i),c=a*(1-i*(s-u)),f=a*(1-i*(1-(s-u))),h=0,p=0,d=0;0===u?(h=a,p=f,d=l):1===u?(h=c,p=a,d=l):2===u?(h=l,p=a,d=f):3===u?(h=l,p=c,d=a):4===u?(h=f,p=l,d=a):(h=a,p=l,d=c),t=255*h,r=255*p,n=255*d}return[t,r,n]}},{key:"_HSL_2_RGB",value:function(e){var t,r,n,o=e[0],i=e[1],a=e[2];if(0===i)t=255*a,r=255*a,n=255*a;else{var s,u=2*a-(s=a<.5?a*(1+i):a+i-i*a);t=255*this._HUE_2_RGB(u,s,o+1/3),r=255*this._HUE_2_RGB(u,s,o),n=255*this._HUE_2_RGB(u,s,o-1/3)}return[t,r,n]}},{key:"_HUE_2_RGB",value:function(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),6*r<1?e+6*(t-e)*r:2*r<1?t:3*r<2?e+(t-e)*(2/3-r)*6:e}},{key:"_RGB_2_HSB",value:function(e){var t,r,n=e[0]/255,o=e[1]/255,i=e[2]/255,a=Math.min(n,o,i),s=Math.max(n,o,i),u=s-a,l=s;if(0===u)t=0,r=0;else{r=u/s;var c=((s-n)/6+u/2)/u,f=((s-o)/6+u/2)/u,h=((s-i)/6+u/2)/u;n===s?t=h-f:o===s?t=1/3+c-h:i===s&&(t=2/3+f-c),t<0&&(t+=1),t>1&&(t-=1)}return[t*=360,r*=100,l*=100]}},{key:"_RGB_2_HSL",value:function(e){var t,r,n=e[0]/255,o=e[1]/255,i=e[2]/255,a=Math.min(n,o,i),s=Math.max(n,o,i),u=s-a,l=(s+a)/2;if(0===u)t=0,r=0;else{r=l<.5?u/(s+a):u/(2-s-a);var c=((s-n)/6+u/2)/u,f=((s-o)/6+u/2)/u,h=((s-i)/6+u/2)/u;n===s?t=h-f:o===s?t=1/3+c-h:i===s&&(t=2/3+f-c),t<0&&(t+=1),t>1&&(t-=1)}return[t*=360,r*=100,l*=100]}}])&&Yr(t.prototype,r),n&&Yr(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Xr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var qr=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),3===arguments.length&&this.computeBoundingBox(arguments),this.CLASS_NAME="SuperMap.LevelRenderer.Tool.ComputeBoundingBox"}var t,r,n;return t=e,(r=[{key:"computeBoundingBox",value:function(e,t,r){if(0!==e.length){for(var n=e[0][0],o=e[0][0],i=e[0][1],a=e[0][1],s=1;s<e.length;s++){var u=e[s];u[0]<n&&(n=u[0]),u[0]>o&&(o=u[0]),u[1]<i&&(i=u[1]),u[1]>a&&(a=u[1])}t[0]=n,t[1]=i,r[0]=o,r[1]=a}}},{key:"cubeBezier",value:function(e,t,r,n,o,i){var a=new Ur,s=[];a.cubicExtrema(e[0],t[0],r[0],n[0],s);for(var u=0;u<s.length;u++)s[u]=a.cubicAt(e[0],t[0],r[0],n[0],s[u]);var l=[];a.cubicExtrema(e[1],t[1],r[1],n[1],l);for(var c=0;c<l.length;c++)l[c]=a.cubicAt(e[1],t[1],r[1],n[1],l[c]);s.push(e[0],n[0]),l.push(e[1],n[1]);var f=Math.min.apply(null,s),h=Math.max.apply(null,s),p=Math.min.apply(null,l),d=Math.max.apply(null,l);o[0]=f,o[1]=p,i[0]=h,i[1]=d}},{key:"quadraticBezier",value:function(e,t,r,n,o){var i=new Ur,a=i.quadraticExtremum(e[0],t[0],r[0]),s=i.quadraticExtremum(e[1],t[1],r[1]),u=1-(a=Math.max(Math.min(a,1),0)),l=1-(s=Math.max(Math.min(s,1),0)),c=u*u*e[0]+2*u*a*t[0]+a*a*r[0],f=u*u*e[1]+2*u*a*t[1]+a*a*r[1],h=l*l*e[0]+2*l*s*t[0]+s*s*r[0],p=l*l*e[1]+2*l*s*t[1]+s*s*r[1];n[0]=Math.min(e[0],r[0],c,h),n[1]=Math.min(e[1],r[1],f,p),o[0]=Math.max(e[0],r[0],c,h),o[1]=Math.max(e[1],r[1],f,p)}},{key:"arc",value:function(e,t,r,n,o,i,a,s){var u=new Gr,l=u.create(),c=u.create(),f=u.create();if(l[0]=Math.cos(n)*r+e,l[1]=Math.sin(n)*r+t,c[0]=Math.cos(o)*r+e,c[1]=Math.sin(o)*r+t,u.min(a,l,c),u.max(s,l,c),(n%=2*Math.PI)<0&&(n+=2*Math.PI),(o%=2*Math.PI)<0&&(o+=2*Math.PI),n>o&&!i?o+=2*Math.PI:n<o&&i&&(n+=2*Math.PI),i){var h=o;o=n,n=h}for(var p=0;p<o;p+=Math.PI/2)p>n&&(f[0]=Math.cos(p)*r+e,f[1]=Math.sin(p)*r+t,u.min(a,f,a),u.max(s,f,s))}}])&&Xr(t.prototype,r),n&&Xr(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Jr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Zr=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Env";var t,r,n,o,i,a,s,u,l,c,f,h,p,d,y,v,g,m,b,w,_,x=this;return t=navigator.userAgent,r=x.os={},n=x.browser={},o=t.match(/Web[kK]it[\/]{0,1}([\d.]+)/),i=t.match(/(Android);?[\s\/]+([\d.]+)?/),a=t.match(/(iPad).*OS\s([\d_]+)/),s=t.match(/(iPod)(.*OS\s([\d_]+))?/),u=!a&&t.match(/(iPhone\sOS)\s([\d_]+)/),l=t.match(/(webOS|hpwOS)[\s\/]([\d.]+)/),c=l&&t.match(/TouchPad/),f=t.match(/Kindle\/([\d.]+)/),h=t.match(/Silk\/([\d._]+)/),p=t.match(/(BlackBerry).*Version\/([\d.]+)/),d=t.match(/(BB10).*Version\/([\d.]+)/),y=t.match(/(RIM\sTablet\sOS)\s([\d.]+)/),v=t.match(/PlayBook/),g=t.match(/Chrome\/([\d.]+)/)||t.match(/CriOS\/([\d.]+)/),m=t.match(/Firefox\/([\d.]+)/),b=t.match(/MSIE ([\d.]+)/),w=o&&t.match(/Mobile\//)&&!g,_=t.match(/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/)&&!g,(n.webkit=!!o)&&(n.version=o[1]),i&&(r.android=!0,r.version=i[2]),u&&!s&&(r.ios=r.iphone=!0,r.version=u[2].replace(/_/g,".")),a&&(r.ios=r.ipad=!0,r.version=a[2].replace(/_/g,".")),s&&(r.ios=r.ipod=!0,r.version=s[3]?s[3].replace(/_/g,"."):null),l&&(r.webos=!0,r.version=l[2]),c&&(r.touchpad=!0),p&&(r.blackberry=!0,r.version=p[2]),d&&(r.bb10=!0,r.version=d[2]),y&&(r.rimtabletos=!0,r.version=y[2]),v&&(n.playbook=!0),f&&(r.kindle=!0,r.version=f[1]),h&&(n.silk=!0,n.version=h[1]),!h&&r.android&&t.match(/Kindle Fire/)&&(n.silk=!0),g&&(n.chrome=!0,n.version=g[1]),m&&(n.firefox=!0,n.version=m[1]),b&&(n.ie=!0,n.version=b[1]),w&&(t.match(/Safari/)||r.ios)&&(n.safari=!0),_&&(n.webview=!0),b&&(n.ie=!0,n.version=b[1]),r.tablet=!!(a||v||i&&!t.match(/Mobile/)||m&&t.match(/Tablet/)||b&&!t.match(/Phone/)&&t.match(/Touch/)),r.phone=!(r.tablet||r.ipod||!(i||u||l||p||d||g&&t.match(/Android/)||g&&t.match(/CriOS\/([\d.]+)/)||m&&t.match(/Mobile/)||b&&t.match(/Touch/))),{browser:n,os:r,canvasSupported:!!document.createElement("canvas").getContext}}var t,r,n;return t=e,(r=[{key:"destory",value:function(){return!0}}])&&Jr(t.prototype,r),n&&Jr(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Kr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Qr=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.stop="function"==typeof window.addEventListener?function(e){e.preventDefault(),e.stopPropagation(),e.cancelBubble=!0}:function(e){e.returnValue=!1,e.cancelBubble=!0},this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Event"}var t,r,n;return t=e,(r=[{key:"getX",value:function(e){return void 0!==e.zrenderX&&e.zrenderX||void 0!==e.offsetX&&e.offsetX||void 0!==e.layerX&&e.layerX||void 0!==e.clientX&&e.clientX}},{key:"getY",value:function(e){return void 0!==e.zrenderY&&e.zrenderY||void 0!==e.offsetY&&e.offsetY||void 0!==e.layerY&&e.layerY||void 0!==e.clientY&&e.clientY}},{key:"getDelta",value:function(e){return void 0!==e.zrenderDelta&&e.zrenderDelta||void 0!==e.wheelDelta&&e.wheelDelta||void 0!==e.detail&&-e.detail}}])&&Kr(t.prototype,r),n&&Kr(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function $r(e){"@babel/helpers - typeof";return($r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function en(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var tn=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Http"}var t,r,n;return t=e,(r=[{key:"get",value:function(e,t,r){if("object"===$r(e)){var n=e;e=n.url,t=n.onsuccess,r=n.onerror}var o=window.XMLHttpRequest?new XMLHttpRequest:new window.ActiveXObject("Microsoft.XMLHTTP");o.open("GET",e,!0),o.onreadystatechange=function(){4==o.readyState&&(o.status>=200&&o.status<300||304===o.status?t&&t(o.responseText):r&&r(),o.onreadystatechange=new Function,o=null)},o.send(null)}}])&&en(t.prototype,r),n&&en(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function rn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var nn=function(e,t,r){return t&&rn(e.prototype,t),r&&rn(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)});function on(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}nn.EVENT={RESIZE:"resize",CLICK:"click",DBLCLICK:"dblclick",MOUSEWHEEL:"mousewheel",MOUSEMOVE:"mousemove",MOUSEOVER:"mouseover",MOUSEOUT:"mouseout",MOUSEDOWN:"mousedown",MOUSEUP:"mouseup",GLOBALOUT:"globalout",DRAGSTART:"dragstart",DRAGEND:"dragend",DRAGENTER:"dragenter",DRAGOVER:"dragover",DRAGLEAVE:"dragleave",DROP:"drop",touchClickDelay:300},nn.catchBrushException=!1,nn.debugMode=0;var an=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Log",function(){if(0!=+nn.debugMode)if(1==+nn.debugMode)for(var e in arguments)throw new Error(arguments[e]);else if(+nn.debugMode>1)for(var t in arguments)console.log(arguments[t])}}var t,r,n;return t=e,(r=[{key:"destory",value:function(){return!0}}])&&on(t.prototype,r),n&&on(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function sn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var un=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._radians=window.Math.PI/180,this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Math"}var t,r,n;return t=e,(r=[{key:"sin",value:function(e,t){return window.Math.sin(t?e*this._radians:e)}},{key:"cos",value:function(e,t){return window.Math.cos(t?e*this._radians:e)}},{key:"degreeToRadian",value:function(e){return e*this._radians}},{key:"radianToDegree",value:function(e){return e/this._radians}}])&&sn(t.prototype,r),n&&sn(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function ln(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var cn=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.ArrayCtor="undefined"==typeof Float32Array?Array:Float32Array,this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Matrix"}var t,r,n;return t=e,(r=[{key:"create",value:function(){var e=new(0,this.ArrayCtor)(6);return this.identity(e),e}},{key:"identity",value:function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e}},{key:"copy",value:function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}},{key:"mul",value:function(e,t,r){return e[0]=t[0]*r[0]+t[2]*r[1],e[1]=t[1]*r[0]+t[3]*r[1],e[2]=t[0]*r[2]+t[2]*r[3],e[3]=t[1]*r[2]+t[3]*r[3],e[4]=t[0]*r[4]+t[2]*r[5]+t[4],e[5]=t[1]*r[4]+t[3]*r[5]+t[5],e}},{key:"translate",value:function(e,t,r){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4]+r[0],e[5]=t[5]+r[1],e}},{key:"rotate",value:function(e,t,r){var n=t[0],o=t[2],i=t[4],a=t[1],s=t[3],u=t[5],l=Math.sin(r),c=Math.cos(r);return e[0]=n*c+a*l,e[1]=-n*l+a*c,e[2]=o*c+s*l,e[3]=-o*l+c*s,e[4]=c*i+l*u,e[5]=c*u-l*i,e}},{key:"scale",value:function(e,t,r){var n=r[0],o=r[1];return e[0]=t[0]*n,e[1]=t[1]*o,e[2]=t[2]*n,e[3]=t[3]*o,e[4]=t[4]*n,e[5]=t[5]*o,e}},{key:"invert",value:function(e,t){var r=t[0],n=t[2],o=t[4],i=t[1],a=t[3],s=t[5],u=r*a-i*n;return u?(u=1/u,e[0]=a*u,e[1]=-i*u,e[2]=-n*u,e[3]=r*u,e[4]=(n*s-a*o)*u,e[5]=(i*o-r*s)*u,e):null}},{key:"mulVector",value:function(e,t,r){var n=t[0],o=t[2],i=t[4],a=t[1],s=t[3],u=t[5];return e[0]=r[0]*n+r[1]*o+i,e[1]=r[0]*a+r[1]*s+u,e}}])&&ln(t.prototype,r),n&&ln(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function fn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var hn=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,n;return t=e,n=[{key:"SUtil_smoothBezier",value:function(t,r,n,o,i){i&&2===i.length||(i=[0,0]);var a,s,u=i,l=[],c=[],f=[],h=[],p=!!o;if(p){a=[1/0,1/0],s=[-1/0,-1/0];for(var d=t.length,y=0;y<d;y++)e.Util_vector.min(a,a,[t[y][0]+u[0],t[y][1]+u[1]]),e.Util_vector.max(s,s,[t[y][0]+u[0],t[y][1]+u[1]]);e.Util_vector.min(a,a,o[0]),e.Util_vector.max(s,s,o[1])}for(var v=t.length,g=0;g<v;g++){var m=[t[g][0]+u[0],t[g][1]+u[1]],b=void 0,w=void 0;if(n)b=[t[g?g-1:v-1][0]+u[0],t[g?g-1:v-1][1]+u[1]],w=[t[(g+1)%v][0]+u[0],t[(g+1)%v][1]+u[1]];else{if(0===g||g===v-1){l.push([t[g][0]+u[0],t[g][1]+u[1]]);continue}b=[t[g-1][0]+u[0],t[g-1][1]+u[1]],w=[t[g+1][0]+u[0],t[g+1][1]+u[1]]}e.Util_vector.sub(c,w,b),e.Util_vector.scale(c,c,r);var _=e.Util_vector.distance(m,b),x=e.Util_vector.distance(m,w),S=_+x;0!==S&&(_/=S,x/=S),e.Util_vector.scale(f,c,-_),e.Util_vector.scale(h,c,x);var O=e.Util_vector.add([],m,f),P=e.Util_vector.add([],m,h);p&&(e.Util_vector.max(O,O,a),e.Util_vector.min(O,O,s),e.Util_vector.max(P,P,a),e.Util_vector.min(P,P,s)),l.push(O),l.push(P)}return n&&l.push(l.shift()),l}},{key:"SUtil_smoothSpline",value:function(t,r,n,o){o&&2===o.length||(o=[0,0]);for(var i=o,a=t.length,s=[],u=0,l=1;l<a;l++)u+=e.Util_vector.distance([t[l-1][0]+i[0],t[l-1][1]+i[1]],[t[l][0]+i[0],t[l][1]+i[1]]);var c=u/5;c=c<a?a:c;for(var f=0;f<c;f++){var h=f/(c-1)*(r?a:a-1),p=Math.floor(h),d=h-p,y=void 0,v=[t[p%a][0]+i[0],t[p%a][1]+i[1]],g=void 0,m=void 0;r?(y=[t[(p-1+a)%a][0]+i[0],t[(p-1+a)%a][1]+i[1]],g=[t[(p+1)%a][0]+i[0],t[(p+1)%a][1]+i[1]],m=[t[(p+2)%a][0]+i[0],t[(p+2)%a][1]+i[1]]):(y=[t[0===p?p:p-1][0]+i[0],t[0===p?p:p-1][1]+i[1]],g=[t[p>a-2?a-1:p+1][0]+i[0],t[p>a-2?a-1:p+1][1]+i[1]],m=[t[p>a-3?a-1:p+2][0]+i[0],t[p>a-3?a-1:p+2][1]+i[1]]);var b=d*d,w=d*b;s.push([_(y[0],v[0],g[0],m[0],d,b,w),_(y[1],v[1],g[1],m[1],d,b,w)])}return s;function _(e,t,r,n,o,i,a){var s=.5*(r-e),u=.5*(n-t);return(2*(t-r)+s+u)*a+(-3*(t-r)-2*s-u)*i+s*o+t}}},{key:"SUtil_dashedLineTo",value:function(e,t,r,n,o,i,a){var s=[5,5];if(i="number"!=typeof i?5:i,e.setLineDash)return s[0]=i,s[1]=i,a&&a instanceof Array?e.setLineDash(a):e.setLineDash(s),e.moveTo(t,r),void e.lineTo(n,o);var u=n-t,l=o-r,c=Math.floor(Math.sqrt(u*u+l*l)/i);u/=c,l/=c;for(var f=!0,h=0;h<c;++h)f?e.moveTo(t,r):e.lineTo(t,r),f=!f,t+=u,r+=l;e.lineTo(n,o)}}],(r=null)&&fn(t.prototype,r),n&&fn(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function pn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}hn.Util_area=new Wr,hn.Util_color=new Hr,hn.Util_computeBoundingBox=new qr,hn.Util_curve=new Ur,hn.Util_env=new Zr,hn.Util_event=new Qr,hn.Util_http=new tn,hn.Util_log=new an,hn.Util_math=new un,hn.Util_matrix=new cn,hn.Util=new Nr,hn.Util_vector=new Gr;var dn=function(){function e(){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.position=[0,0],this.rotation=[0,0,0],this.scale=[1,1,0,0],this.needLocalTransform=!1,this.needTransform=!1,this.CLASS_NAME="SuperMap.LevelRenderer.Transformable",this.lookAt=(t=hn.Util_vector.create(),function(e){this.transform||(this.transform=hn.Util_matrix.create());var r=this.transform;function n(e){return e>-5e-5&&e<5e-5}hn.Util_vector.sub(t,e,this.position),n(t[0])&&n(t[1])||(hn.Util_vector.normalize(t,t),r[2]=t[0]*this.scale[1],r[3]=t[1]*this.scale[1],r[0]=t[1]*this.scale[0],r[1]=-t[0]*this.scale[0],r[4]=this.position[0],r[5]=this.position[1],this.decomposeTransform())})}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){this.position=null,this.rotation=null,this.scale=null,this.needLocalTransform=null,this.needTransform=null}},{key:"updateNeedTransform",value:function(){function e(e){return e>5e-5||e<-5e-5}this.needLocalTransform=e(this.rotation[0])||e(this.position[0])||e(this.position[1])||e(this.scale[0]-1)||e(this.scale[1]-1)}},{key:"updateTransform",value:function(){if(this.updateNeedTransform(),this.parent?this.needTransform=this.needLocalTransform||this.parent.needTransform:this.needTransform=this.needLocalTransform,this.needTransform){var e=[0,0],t=this.transform||hn.Util_matrix.create();if(hn.Util_matrix.identity(t),this.needLocalTransform){if(o(this.scale[0])||o(this.scale[1])){e[0]=-this.scale[2]||0,e[1]=-this.scale[3]||0;var r=o(e[0])||o(e[1]);r&&hn.Util_matrix.translate(t,t,e),hn.Util_matrix.scale(t,t,this.scale),r&&(e[0]=-e[0],e[1]=-e[1],hn.Util_matrix.translate(t,t,e))}if(this.rotation instanceof Array){if(0!==this.rotation[0]){e[0]=-this.rotation[1]||0,e[1]=-this.rotation[2]||0;var n=o(e[0])||o(e[1]);n&&hn.Util_matrix.translate(t,t,e),hn.Util_matrix.rotate(t,t,this.rotation[0]),n&&(e[0]=-e[0],e[1]=-e[1],hn.Util_matrix.translate(t,t,e))}}else 0!=+this.rotation&&hn.Util_matrix.rotate(t,t,this.rotation);(o(this.position[0])||o(this.position[1]))&&hn.Util_matrix.translate(t,t,this.position)}this.transform=t,this.parent&&this.parent.needTransform&&(this.needLocalTransform?hn.Util_matrix.mul(this.transform,this.parent.transform,this.transform):hn.Util_matrix.copy(this.transform,this.parent.transform))}function o(e){return e>5e-5||e<-5e-5}}},{key:"setTransform",value:function(e){if(this.needTransform){var t=this.transform;e.transform(t[0],t[1],t[2],t[3],t[4],t[5])}}},{key:"decomposeTransform",value:function(){if(this.transform){var e=this.transform,t=e[0]*e[0]+e[1]*e[1],r=this.position,n=this.scale,o=this.rotation;a(t-1)&&(t=Math.sqrt(t));var i=e[2]*e[2]+e[3]*e[3];a(i-1)&&(i=Math.sqrt(i)),r[0]=e[4],r[1]=e[5],n[0]=t,n[1]=i,n[2]=n[3]=0,o[0]=Math.atan2(-e[1]/i,e[0]/t),o[1]=o[2]=0}function a(e){return e>5e-5||e<-5e-5}}}])&&pn(t.prototype,r),n&&pn(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function yn(e){"@babel/helpers - typeof";return(yn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function vn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function gn(){return(gn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_n(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function mn(e,t){return(mn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function bn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=_n(e);if(t){var o=_n(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===yn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return wn(e)}(this,r)}}function wn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _n(e){return(_n=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var xn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&mn(e,t)}(i,h(Br,dn));var t,r,n,o=bn(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),t=o.call(this,e),e=e||{},t.id=null,t.type="group",t.clipShape=null,t._children=[],t._storage=null,t.__dirty=!0,t.ignore=!1,j.extend(wn(t),e),t.id=t.id||j.createUniqueID("smShapeGroup_"),t.CLASS_NAME="SuperMap.LevelRenderer.Group",t}return t=i,(r=[{key:"destroy",value:function(){this.id=null,this.type=null,this.clipShape=null,this._children=null,this._storage=null,this.__dirty=null,this.ignore=null,gn(_n(i.prototype),"destroy",this).call(this)}},{key:"children",value:function(){return this._children.slice()}},{key:"childAt",value:function(e){return this._children[e]}},{key:"addChild",value:function(e){e!=this&&e.parent!=this&&(e.parent&&e.parent.removeChild(e),this._children.push(e),e.parent=this,this._storage&&this._storage!==e._storage&&(this._storage.addToMap(e),e instanceof i&&e.addChildrenToStorage(this._storage)))}},{key:"removeChild",value:function(e){var t=j.indexOf(this._children,e);this._children.splice(t,1),e.parent=null,this._storage&&(this._storage.delFromMap(e.id),e instanceof i&&e.delChildrenFromStorage(this._storage))}},{key:"eachChild",value:function(e,t){for(var r=!!t,n=0;n<this._children.length;n++){var o=this._children[n];r?e.call(t,o):e(o)}}},{key:"traverse",value:function(e,t){for(var r=!!t,n=0;n<this._children.length;n++){var o=this._children[n];r?e.call(t,o):e(o),"group"===o.type&&o.traverse(e,t)}}},{key:"addChildrenToStorage",value:function(e){for(var t=0;t<this._children.length;t++){var r=this._children[t];e.addToMap(r),"group"===r.type&&r.addChildrenToStorage(e)}}},{key:"delChildrenFromStorage",value:function(e){for(var t=0;t<this._children.length;t++){var r=this._children[t];e.delFromMap(r.id),"group"===r.type&&r.delChildrenFromStorage(e)}}},{key:"modSelf",value:function(){this.__dirty=!0}}])&&vn(t.prototype,r),n&&vn(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Sn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var On=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._elements={},this._hoverElements=[],this._roots=[],this._shapeList=[],this._shapeListOffset=0,this.CLASS_NAME="SuperMap.LevelRenderer.Storage"}var t,r,n;return t=e,n=[{key:"shapeCompareFunc",value:function(e,t){return e.zlevel==t.zlevel?e.z==t.z?e.__renderidx-t.__renderidx:e.z-t.z:e.zlevel-t.zlevel}}],(r=[{key:"destroy",value:function(){this.dispose(),this._shapeList=null,this._shapeListOffset=null}},{key:"iterShape",value:function(e,t){if(!t){t={hover:!1,normal:"down",update:!1}}if(t.hover)for(var r=0,n=this._hoverElements.length;r<n;r++){var o=this._hoverElements[r];if(o.updateTransform(),e(o))return this}switch(t.update&&this.updateShapeList(),t.normal){case"down":for(var i=this._shapeList.length;i--;)if(e(this._shapeList[i]))return this;break;default:for(var a=0,s=this._shapeList.length;a<s;a++)if(e(this._shapeList[a]))return this}return this}},{key:"getHoverShapes",value:function(t){for(var r=[],n=this._hoverElements.length,o=0;o<n;o++){r.push(this._hoverElements[o]);var i=this._hoverElements[o].hoverConnect;if(i)for(var a,s=0,u=(i=i instanceof Array?i:[i]).length;s<u;s++)(a=i[s].id?i[s]:this.get(i[s]))&&r.push(a)}if(r.sort(e.shapeCompareFunc),t)for(var l=0,c=r.length;l<c;l++)r[l].updateTransform();return r}},{key:"getShapeList",value:function(e){return e&&this.updateShapeList(),this._shapeList}},{key:"updateShapeList",value:function(){this._shapeListOffset=0;for(var t=this._roots.length,r=0;r<t;r++){var n=this._roots[r];this._updateAndAddShape(n)}this._shapeList.length=this._shapeListOffset;for(var o=this._shapeList.length,i=0;i<o;i++)this._shapeList[i].__renderidx=i;this._shapeList.sort(e.shapeCompareFunc)}},{key:"_updateAndAddShape",value:function(e,t){if(!e.ignore)if(e.updateTransform(),"group"==e.type){e.clipShape&&(e.clipShape.parent=e,e.clipShape.updateTransform(),t?(t=t.slice()).push(e.clipShape):t=[e.clipShape]);for(var r=0;r<e._children.length;r++){var n=e._children[r];n.__dirty=e.__dirty||n.__dirty,this._updateAndAddShape(n,t)}e.__dirty=!1}else e.__clipShapes=t,this._shapeList[this._shapeListOffset++]=e}},{key:"mod",value:function(e,t){var r=this._elements[e];if(r&&(r.modSelf(),t))if(t.parent||t._storage||t.__startClip){var n={};for(var o in t)"parent"!=o&&"_storage"!=o&&"__startClip"!=o&&t.hasOwnProperty(o)&&(n[o]=t[o]);(new Nr).merge(r,n,!0)}else(new Nr).merge(r,t,!0);return this}},{key:"drift",value:function(e,t,r){var n=this._elements[e];return n&&(n.needTransform=!0,"horizontal"===n.draggable?r=0:"vertical"===n.draggable&&(t=0),(!n.ondrift||n.ondrift&&!n.ondrift(t,r))&&n.drift(t,r)),this}},{key:"addHover",value:function(e){return e.updateNeedTransform(),this._hoverElements.push(e),this}},{key:"delHover",value:function(){return this._hoverElements=[],this}},{key:"hasHoverShape",value:function(){return this._hoverElements.length>0}},{key:"addRoot",value:function(e){e instanceof xn&&e.addChildrenToStorage(this),this.addToMap(e),this._roots.push(e)}},{key:"delRoot",value:function(e){if(void 0===e){for(var t=0;t<this._roots.length;t++){var r=this._roots[t];r instanceof xn&&r.delChildrenFromStorage(this)}return this._elements={},this._hoverElements=[],void(this._roots=[])}if(e instanceof Array)for(var n=e.length,o=0;o<n;o++)this.delRoot(e[o]);else{var i;i="string"==typeof e?this._elements[e]:e;var a=(new Nr).indexOf(this._roots,i);a>=0&&(this.delFromMap(i.id),this._roots.splice(a,1),i instanceof xn&&i.delChildrenFromStorage(this))}}},{key:"addToMap",value:function(e){return e instanceof xn&&(e._storage=this),e.modSelf(),this._elements[e.id]=e,this}},{key:"get",value:function(e){return this._elements[e]}},{key:"delFromMap",value:function(e){var t=this._elements[e];return t&&(delete this._elements[e],t instanceof xn&&(t._storage=null)),this}},{key:"dispose",value:function(){this._elements=null,this._roots=null,this._hoverElements=null}}])&&Sn(t.prototype,r),n&&Sn(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Pn(e){"@babel/helpers - typeof";return(Pn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function En(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function kn(e,t){return(kn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Mn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Cn(e);if(t){var o=Cn(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===Pn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function Cn(e){return(Cn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var jn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&kn(e,t)}(i,m);var t,r,n,o=Mn(i);function i(e,t,r,n){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(a=o.call(this,e,t,r,n)).x=e,a.y=t,a.width=r,a.height=n,a.CLASS_NAME="SuperMap.Geometry.Rectangle",a.geometryType="Rectangle",a}return t=i,(r=[{key:"calculateBounds",value:function(){this.bounds=new N(this.x,this.y,this.x+this.width,this.y+this.height)}},{key:"getArea",value:function(){return this.width*this.height}}])&&En(t.prototype,r),n&&En(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Tn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var An=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.value=t||"",this.name=r||"token",this.CLASS_NAME="SuperMap.Credential"}var t,r,n;return t=e,(r=[{key:"getUrlParameters",value:function(){return this.name+"="+this.value}},{key:"getValue",value:function(){return this.value}},{key:"destroy",value:function(){this.value=null,this.name=null}}])&&Tn(t.prototype,r),n&&Tn(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();An.CREDENTIAL=null;var In={toISOString:function(){if("toISOString"in Date.prototype)return function(e){return e.toISOString()};var e=function(e,t){for(var r=e+"";r.length<t;)r="0"+r;return r};return function(t){return isNaN(t.getTime())?"Invalid Date":t.getUTCFullYear()+"-"+e(t.getUTCMonth()+1,2)+"-"+e(t.getUTCDate(),2)+"T"+e(t.getUTCHours(),2)+":"+e(t.getUTCMinutes(),2)+":"+e(t.getUTCSeconds(),2)+"."+e(t.getUTCMilliseconds(),3)+"Z"}}(),parse:function(e){var t,r=e.match(/^(?:(\d{4})(?:-(\d{2})(?:-(\d{2}))?)?)?(?:(?:T(\d{1,2}):(\d{2}):(\d{2}(?:\.\d+)?)(Z|(?:[+-]\d{1,2}(?::(\d{2}))?)))|Z)?$/);if(r&&(r[1]||r[7])){var n=parseInt(r[1],10)||0,o=parseInt(r[2],10)-1||0,i=parseInt(r[3],10)||1;t=new Date(Date.UTC(n,o,i));var a=r[7];if(a){var s=parseInt(r[4],10),u=parseInt(r[5],10),l=parseFloat(r[6]),c=0|l,f=Math.round(1e3*(l-c));if(t.setUTCHours(s,u,c,f),"Z"!==a){var h=-1e3*(60*parseInt(a,10)*60+60*(parseInt(r[8],10)||0));t=new Date(t.getTime()+h)}}}else t=new Date("invalid");return t}},Rn={observers:!1,KEY_SPACE:32,KEY_BACKSPACE:8,KEY_TAB:9,KEY_RETURN:13,KEY_ESC:27,KEY_LEFT:37,KEY_UP:38,KEY_RIGHT:39,KEY_DOWN:40,KEY_DELETE:46,element:function(e){return e.target||e.srcElement},isSingleTouch:function(e){return e.touches&&1===e.touches.length},isMultiTouch:function(e){return e.touches&&e.touches.length>1},isLeftClick:function(e){return e.which&&1===e.which||e.button&&1===e.button},isRightClick:function(e){return e.which&&3===e.which||e.button&&2===e.button},stop:function(e,t){t||(e.preventDefault?e.preventDefault():e.returnValue=!1),e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},findElement:function(e,t){for(var r=Rn.element(e);r.parentNode&&(!r.tagName||r.tagName.toUpperCase()!=t.toUpperCase());)r=r.parentNode;return r},observe:function(e,t,r,n){var o=j.getElement(e);if(n=n||!1,"keypress"===t&&(navigator.appVersion.match(/Konqueror|Safari|KHTML/)||o.attachEvent)&&(t="keydown"),this.observers||(this.observers={}),!o._eventCacheID){var i="eventCacheID_";o.id&&(i=o.id+"_"+i),o._eventCacheID=j.createUniqueID(i)}var a=o._eventCacheID;this.observers[a]||(this.observers[a]=[]),this.observers[a].push({element:o,name:t,observer:r,useCapture:n}),o.addEventListener?"mousewheel"===t?o.addEventListener(t,r,{useCapture:n,passive:!1}):o.addEventListener(t,r,n):o.attachEvent&&o.attachEvent("on"+t,r)},stopObservingElement:function(e){var t=j.getElement(e)._eventCacheID;this._removeElementObservers(Rn.observers[t])},_removeElementObservers:function(e){if(e)for(var t=e.length-1;t>=0;t--){var r=e[t],n=new Array(r.element,r.name,r.observer,r.useCapture);Rn.stopObserving.apply(this,n)}},stopObserving:function(e,t,r,n){n=n||!1;var o=j.getElement(e),i=o._eventCacheID;"keypress"===t&&(navigator.appVersion.match(/Konqueror|Safari|KHTML/)||o.detachEvent)&&(t="keydown");var a=!1,s=Rn.observers[i];if(s)for(var u=0;!a&&u<s.length;){var l=s[u];if(l.name===t&&l.observer===r&&l.useCapture===n){s.splice(u,1),0==s.length&&delete Rn.observers[i],a=!0;break}u++}return a&&(o.removeEventListener?o.removeEventListener(t,r,n):o&&o.detachEvent&&o.detachEvent("on"+t,r)),a},unloadCache:function(){if(Rn&&Rn.observers){for(var e in Rn.observers){var t=Rn.observers[e];Rn._removeElementObservers.apply(this,[t])}Rn.observers=!1}},CLASS_NAME:"SuperMap.Event"};function Ln(e){"@babel/helpers - typeof";return(Ln="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Nn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Rn.observe(window,"resize",Rn.unloadCache,!1);var Dn=function(){function e(t,r,n,o,i){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.BROWSER_EVENTS=["mouseover","mouseout","mousedown","mouseup","mousemove","click","dblclick","rightclick","dblrightclick","resize","focus","blur","touchstart","touchmove","touchend","keydown","MSPointerDown","MSPointerUp","pointerdown","pointerup","MSGestureStart","MSGestureChange","MSGestureEnd","contextmenu"],this.listeners={},this.object=t,this.element=null,this.eventTypes=[],this.eventHandler=null,this.fallThrough=o,this.includeXY=!1,this.extensions={},this.extensionCount={},this.clearMouseListener=null,j.extend(this,i),null!=n)for(var a=0,s=n.length;a<s;a++)this.addEventType(n[a]);null!=r&&this.attachToElement(r),this.CLASS_NAME="SuperMap.Events"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){for(var e in this.extensions)"boolean"!=typeof this.extensions[e]&&this.extensions[e].destroy();this.extensions=null,this.element&&(Rn.stopObservingElement(this.element),this.element.hasScrollEvent&&Rn.stopObserving(window,"scroll",this.clearMouseListener)),this.element=null,this.listeners=null,this.object=null,this.eventTypes=null,this.fallThrough=null,this.eventHandler=null}},{key:"addEventType",value:function(e){this.listeners[e]||(this.eventTypes.push(e),this.listeners[e]=[])}},{key:"attachToElement",value:function(e){this.element?Rn.stopObservingElement(this.element):(this.eventHandler=y.bindAsEventListener(this.handleBrowserEvent,this),this.clearMouseListener=y.bind(this.clearMouseCache,this)),this.element=e;for(var t=0,r=this.BROWSER_EVENTS.length;t<r;t++){var n=this.BROWSER_EVENTS[t];this.addEventType(n),Rn.observe(e,n,this.eventHandler)}Rn.observe(e,"dragstart",Rn.stop)}},{key:"on",value:function(e){for(var t in e)"scope"!==t&&e.hasOwnProperty(t)&&this.register(t,e.scope,e[t])}},{key:"register",value:function(t,r,n,o){if(t in e&&!this.extensions[t]&&(this.extensions[t]=new e[t](this)),null!=n&&-1!==j.indexOf(this.eventTypes,t)){null==r&&(r=this.object);var i=this.listeners[t];i||(i=[],this.listeners[t]=i,this.extensionCount[t]=0);var a={obj:r,func:n};o?(i.splice(this.extensionCount[t],0,a),"object"===Ln(o)&&o.extension&&this.extensionCount[t]++):i.push(a)}}},{key:"registerPriority",value:function(e,t,r){this.register(e,t,r,!0)}},{key:"un",value:function(e){for(var t in e)"scope"!==t&&e.hasOwnProperty(t)&&this.unregister(t,e.scope,e[t])}},{key:"unregister",value:function(e,t,r){null==t&&(t=this.object);var n=this.listeners[e];if(null!=n)for(var o=0,i=n.length;o<i;o++)if(n[o].obj===t&&n[o].func===r){n.splice(o,1);break}}},{key:"remove",value:function(e){null!=this.listeners[e]&&(this.listeners[e]=[])}},{key:"triggerEvent",value:function(e,t){var r=this.listeners[e];if(r&&0!=r.length){var n;null==t&&(t={}),t.object=this.object,t.element=this.element,t.type||(t.type=e);for(var o=0,i=(r=r.slice()).length;o<i;o++){var a=r[o];if(void 0!=(n=a.func.apply(a.obj,[t]))&&!1===n)break}return this.fallThrough||Rn.stop(t,!0),n}}},{key:"handleBrowserEvent",value:function(e){var t=e.type,r=this.listeners[t];if(r&&0!=r.length){var n=e.touches;if(n&&n[0]){for(var o,i=0,a=0,s=n.length,u=0;u<s;++u)i+=(o=n[u]).clientX,a+=o.clientY;e.clientX=i/s,e.clientY=a/s}this.includeXY&&(e.xy=this.getMousePosition(e)),this.triggerEvent(t,e)}}},{key:"clearMouseCache",value:function(){this.element.scrolls=null,this.element.lefttop=null;var e=document.body;e&&(0==e.scrollTop&&0==e.scrollLeft||!navigator.userAgent.match(/iPhone/i))&&(this.element.offsets=null)}},{key:"getMousePosition",value:function(e){if(this.includeXY?this.element.hasScrollEvent||(Rn.observe(window,"scroll",this.clearMouseListener),this.element.hasScrollEvent=!0):this.clearMouseCache(),!this.element.scrolls){var t=j.getViewportElement();this.element.scrolls=[t.scrollLeft,t.scrollTop]}return this.element.lefttop||(this.element.lefttop=[document.documentElement.clientLeft||0,document.documentElement.clientTop||0]),this.element.offsets||(this.element.offsets=j.pagePosition(this.element)),new c(e.clientX+this.element.scrolls[0]-this.element.offsets[0]-this.element.lefttop[0],e.clientY+this.element.scrolls[1]-this.element.offsets[1]-this.element.lefttop[1])}}])&&Nn(t.prototype,r),n&&Nn(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Bn(e){"@babel/helpers - typeof";return(Bn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Fn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Gn(){return(Gn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Wn(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function zn(e,t){return(zn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Un(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Wn(e);if(t){var o=Wn(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===Bn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Vn(e)}(this,r)}}function Vn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Wn(e){return(Wn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Dn.prototype.BROWSER_EVENTS=["mouseover","mouseout","mousedown","mouseup","mousemove","click","dblclick","rightclick","dblrightclick","resize","focus","blur","touchstart","touchmove","touchend","keydown","MSPointerDown","MSPointerUp","pointerdown","pointerup","MSGestureStart","MSGestureChange","MSGestureEnd","contextmenu"];var Yn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&zn(e,t)}(i,h(Br,dn));var t,r,n,o=Un(i);function i(e){var t,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),t=o.call(this,e),e=e||{},t.id=null,t.style={},t.highlightStyle=null,t.parent=null,t.__dirty=!0,t.__clipShapes=[],t.invisible=!1,t.ignore=!1,t.zlevel=0,t.draggable=!1,t.clickable=!1,t.hoverable=!0,t.z=0,t.refOriginalPosition=[0,0],t.refDataID=null,t.isHoverByRefDataID=!1,t.refDataHoverGroup=null,t.dataInfo=null,j.extend(Vn(t),e),t.id=t.id||j.createUniqueID("smShape_"),t.CLASS_NAME="SuperMap.LevelRenderer.Shape",t.getTansform=(r=[],function(e,t){var n=[e,t];return this.needTransform&&this.transform&&(hn.Util_matrix.invert(r,this.transform),hn.Util_matrix.mulVector(n,r,[e,t,1]),e==n[0]&&t==n[1]&&this.updateNeedTransform()),n}),t}return t=i,n=[{key:"_fillText",value:function(e,t,r,n,o,a,s){o&&(e.font=o),e.textAlign=a,e.textBaseline=s;var u=i._getTextRect(t,r,n,o,a,s);t=(t+"").split("\n");var l=hn.Util_area.getTextHeight("ZH",o);switch(s){case"top":n=u.y;break;case"bottom":n=u.y+l;break;default:n=u.y+l/2}for(var c=0,f=t.length;c<f;c++)e.fillText(t[c],r,n),n+=l}},{key:"_getTextRect",value:function(e,t,r,n,o,i){var a=hn.Util_area.getTextWidth(e,n),s=hn.Util_area.getTextHeight("ZH",n);switch(e=(e+"").split("\n"),o){case"end":case"right":t-=a;break;case"center":t-=a/2}switch(i){case"top":break;case"bottom":r-=s*e.length;break;default:r-=s*e.length/2}return{x:t,y:r,width:a,height:s*e.length}}}],(r=[{key:"destroy",value:function(){this.id=null,this.style=null,this.highlightStyle=null,this.parent=null,this.__dirty=null,this.__clipShapes=null,this.invisible=null,this.ignore=null,this.zlevel=null,this.draggable=null,this.clickable=null,this.hoverable=null,this.z=null,this.refOriginalPosition=null,this.refDataID=null,this.refDataHoverGroup=null,this.isHoverByRefDataID=null,this.dataInfo=null,Gn(Wn(i.prototype),"destroy",this).call(this)}},{key:"brush",value:function(e,t){var r=this.beforeBrush(e,t);switch(e.beginPath(),this.buildPath(e,r),r.brushType){case"both":this.setCtxGlobalAlpha(e,"fill",r),e.fill(),r.lineWidth>0&&(this.setCtxGlobalAlpha(e,"stroke",r),e.stroke()),this.setCtxGlobalAlpha(e,"reset",r);break;case"stroke":this.setCtxGlobalAlpha(e,"stroke",r),r.lineWidth>0&&e.stroke(),this.setCtxGlobalAlpha(e,"reset",r);break;default:this.setCtxGlobalAlpha(e,"fill",r),e.fill(),this.setCtxGlobalAlpha(e,"reset",r)}this.drawText(e,r,this.style),this.afterBrush(e)}},{key:"beforeBrush",value:function(e,t){var r=this.style;return this.brushTypeOnly&&(r.brushType=this.brushTypeOnly),t&&(r=this.getHighlightStyle(r,this.highlightStyle||{},this.brushTypeOnly)),"stroke"==this.brushTypeOnly&&(r.strokeColor=r.strokeColor||r.color),e.save(),this.doClip(e),this.setContext(e,r),this.setTransform(e),r}},{key:"afterBrush",value:function(e){e.restore()}},{key:"setContext",value:function(e,t){for(var r=[["color","fillStyle"],["strokeColor","strokeStyle"],["opacity","globalAlpha"],["lineCap","lineCap"],["lineJoin","lineJoin"],["miterLimit","miterLimit"],["lineWidth","lineWidth"],["shadowBlur","shadowBlur"],["shadowColor","shadowColor"],["shadowOffsetX","shadowOffsetX"],["shadowOffsetY","shadowOffsetY"]],n=0,o=r.length;n<o;n++){var i=t[r[n][0]],a=r[n][1];void 0!==i&&(e[a]=i)}}},{key:"doClip",value:function(e){var t=hn.Util_matrix.create();if(this.__clipShapes)for(var r=0;r<this.__clipShapes.length;r++){var n=this.__clipShapes[r];if(n.needTransform){var o=n.transform;hn.Util_matrix.invert(t,o),e.transform(o[0],o[1],o[2],o[3],o[4],o[5])}if(e.beginPath(),n.buildPath(e,n.style),e.clip(),n.needTransform){var i=t;e.transform(i[0],i[1],i[2],i[3],i[4],i[5])}}}},{key:"getHighlightStyle",value:function(e,t,r){var n={};for(var o in e)n[o]=e[o];var i=hn.Util_color.getHighlightColor();for(var a in"stroke"!=e.brushType?(n.strokeColor=i,n.lineWidth=e.lineWidth||1,n.brushType="both"):"stroke"!=r?(n.strokeColor=i,n.lineWidth=e.lineWidth||1):n.strokeColor=t.strokeColor||hn.Util_color.mix(e.strokeColor,hn.Util_color.toRGB(i)),t)void 0!==t[a]&&(n[a]=t[a]);return n}},{key:"getHighlightZoom",value:function(){return"text"!=this.type?6:2}},{key:"drift",value:function(e,t){this.position[0]+=e,this.position[1]+=t}},{key:"buildPath",value:function(e,t){hn.Util_log("buildPath not implemented in "+this.type)}},{key:"getRect",value:function(e){hn.Util_log("getRect not implemented in "+this.type)}},{key:"isCover",value:function(e,t){var r=this.getTansform(e,t);e=r[0],t=r[1];var n=this.style.__rect;return n||(n=this.style.__rect=this.getRect(this.style)),e>=n.x&&e<=n.x+n.width&&t>=n.y&&t<=n.y+n.height&&hn.Util_area.isInside(this,this.style,e,t)}},{key:"drawText",value:function(e,t,r){if(void 0!==t.text&&!1!==t.text){var n=t.textColor||t.color||t.strokeColor;e.fillStyle=n;var o,a,s,u,l=10,c=t.textPosition||this.textPosition||"top",f=[];switch(f=this.refOriginalPosition&&2===this.refOriginalPosition.length?this.refOriginalPosition:[0,0],c){case"inside":case"top":case"bottom":case"left":case"right":if(this.getRect){var h=(r||t).__rect||this.getRect(r||t);switch(c){case"inside":s=h.x+h.width/2,u=h.y+h.height/2,o="center",a="middle","stroke"!=t.brushType&&n==t.color&&(e.fillStyle="#fff");break;case"left":s=h.x-l,u=h.y+h.height/2,o="end",a="middle";break;case"right":s=h.x+h.width+l,u=h.y+h.height/2,o="start",a="middle";break;case"top":s=h.x+h.width/2,u=h.y-l,o="center",a="bottom";break;case"bottom":s=h.x+h.width/2,u=h.y+h.height+l,o="center",a="top"}}break;case"start":case"end":var p=0,d=0,y=0,v=0;if(void 0!==t.pointList){var g=t.pointList;if(g.length<2)return;var m=g.length;switch(c){case"start":p=g[0][0]+f[0],d=g[1][0]+f[0],y=g[0][1]+f[1],v=g[1][1]+f[1];break;case"end":p=g[m-2][0]+f[0],d=g[m-1][0]+f[0],y=g[m-2][1]+f[1],v=g[m-1][1]+f[1]}}else p=t.xStart+f[0]||0,d=t.xEnd+f[0]||0,y=t.yStart+f[1]||0,v=t.yEnd+f[1]||0;switch(c){case"start":o=p<d?"end":"start",a=y<v?"bottom":"top",s=p,u=y;break;case"end":o=p<d?"start":"end",a=y<v?"top":"bottom",s=d,u=v}l-=4,p&&d&&p!=d?s-="end"==o?l:-l:o="center",y!=v?u-="bottom"==a?l:-l:a="middle";break;case"specific":s=t.textX||0,u=t.textY||0,o="start",a="middle"}t.labelXOffset&&!isNaN(t.labelXOffset)&&(s+=t.labelXOffset),t.labelYOffset&&!isNaN(t.labelYOffset)&&(u+=t.labelYOffset),null!=s&&null!=u&&i._fillText(e,t.text,s,u,t.textFont,t.textAlign||o,t.textBaseline||a)}}},{key:"modSelf",value:function(){this.__dirty=!0,this.style&&(this.style.__rect=null),this.highlightStyle&&(this.highlightStyle.__rect=null)}},{key:"isSilent",value:function(){return!(this.hoverable||this.draggable||this.clickable||this.onmousemove||this.onmouseover||this.onmouseout||this.onmousedown||this.onmouseup||this.onclick||this.ondragenter||this.ondragover||this.ondragleave||this.ondrop)}},{key:"setCtxGlobalAlpha",value:function(e,t,r){e.globalAlpha="fill"===t?void 0===r.fillOpacity?void 0===r.opacity?1:r.opacity:r.fillOpacity:"stroke"===t?void 0===r.strokeOpacity?void 0===r.opacity?1:r.opacity:r.strokeOpacity:void 0===r.opacity?1:r.opacity}}])&&Fn(t.prototype,r),n&&Fn(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Hn(e){"@babel/helpers - typeof";return(Hn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Xn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function qn(){return(qn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Kn(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function Jn(e,t){return(Jn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Zn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Kn(e);if(t){var o=Kn(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===Hn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function Kn(e){return(Kn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Qn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Jn(e,t)}(i,Yn);var t,r,n,o=Zn(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).type="smicimage",t._imageCache={},t.refOriginalPosition&&2===t.refOriginalPosition.length||(t.refOriginalPosition=[0,0]),t.CLASS_NAME="SuperMap.LevelRenderer.Shape.SmicImage",t}return t=i,(r=[{key:"destroy",value:function(){this.type=null,this._imageCache=null,qn(Kn(i.prototype),"destroy",this).call(this)}},{key:"brush",value:function(e,t,r){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var n=this.refOriginalPosition,o=this.style||{};t&&(o=this.getHighlightStyle(o,this.highlightStyle||{}));var a=o.image,s=this;if("string"==typeof a){var u=a;this._imageCache[u]?a=this._imageCache[u]:((a=new Image).onload=function(){a.onload=null,clearTimeout(i._refreshTimeout),i._needsRefresh.push(s),i._refreshTimeout=setTimeout(function(){r&&r(i._needsRefresh),i._needsRefresh=[]},10)},a.src=u,this._imageCache[u]=a)}if(a){if("IMG"==a.nodeName.toUpperCase())if(window.ActiveXObject){if("complete"!=a.readyState)return}else if(!a.complete)return;var l=o.width||a.width,c=o.height||a.height,f=o.x+n[0],h=o.y+n[1];if(!a.width||!a.height)return;if(e.save(),this.doClip(e),this.setContext(e,o),this.setTransform(e),o.sWidth&&o.sHeight){var p=o.sx+n[0]||0,d=o.sy+n[1]||0;e.drawImage(a,p,d,o.sWidth,o.sHeight,f,h,l,c)}else if(o.sx&&o.sy){var y=o.sx+n[0],v=o.sy+n[1],g=l-y,m=c-v;e.drawImage(a,y,v,g,m,f,h,l,c)}else e.drawImage(a,f,h,l,c);o.width||(o.width=l),o.height||(o.height=c),this.style.width||(this.style.width=l),this.style.height||(this.style.height=c),this.drawText(e,o,this.style),e.restore()}}},{key:"getRect",value:function(e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var t=this.refOriginalPosition;return{x:e.x+t[0],y:e.y+t[1],width:e.width,height:e.height}}},{key:"clearCache",value:function(){this._imageCache={}}}])&&Xn(t.prototype,r),n&&Xn(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function $n(e){"@babel/helpers - typeof";return($n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function eo(e,t){return(eo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function to(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=ro(e);if(t){var o=ro(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===$n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function ro(e){return(ro=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function no(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function oo(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function io(e,t,r){return t&&oo(e.prototype,t),r&&oo(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}Qn._needsRefresh=[],Qn._refreshTimeout=null;var ao=function(){function e(t,r){no(this,e),this.root=t,this.storage=r,this._domRoot=null,this._layers={},this._zlevelList=[],this._layerConfig={},this._bgDom=null,this.shapeToImage=null,e.devicePixelRatio=Math.max(window.devicePixelRatio||1,1),this.CLASS_NAME="SuperMap.LevelRenderer.Painter",this.root.innerHTML="",this._width=this._getWidth(),this._height=this._getHeight();var n=document.createElement("div");this._domRoot=n,n.style.position="relative",n.style.overflow="hidden",n.style.width=this._width+"px",n.style.height=this._height+"px",this.root.appendChild(n),this.shapeToImage=this._createShapeToImageProcessor(),this._bgDom=e.createDom(j.createUniqueID("SuperMap.Theme_background_"),"div",this),n.appendChild(this._bgDom),this._bgDom.onselectstart=a,this._bgDom.style["-webkit-user-select"]="none",this._bgDom.style["user-select"]="none",this._bgDom.style["-webkit-touch-callout"]="none";var o=new so(j.createUniqueID("_highLightLayer_"),this);this._layers.hover=o,n.appendChild(o.dom),o.initContext(),o.dom.onselectstart=a,o.dom.style["-webkit-user-select"]="none",o.dom.style["user-select"]="none",o.dom.style["-webkit-touch-callout"]="none";var i=this;function a(){return!1}this.updatePainter=function(e,t){i.refreshShapes(e,t)}}return io(e,[{key:"destroy",value:function(){this.dispose(),this._zlevelList=null,this._layerConfig=null,this._bgDom=null,this.shapeToImage=null}},{key:"render",value:function(e){return this.refresh(e,!0),this}},{key:"refresh",value:function(e,t){var r=this.storage.getShapeList(!0);return this._paintList(r,t),"function"==typeof e&&e(),this}},{key:"_paintList",value:function(e,t){var r,n,o;for(var i in void 0===t&&(t=!1),this._updateLayerStatus(e),this._layers)"hover"!==i&&(this._layers[i].unusedCount++,this._layers[i].updateTransform());for(var a=[],s=0,u=e.length;s<u;s++){var l=e[s];if(n!==l.zlevel&&(r&&r.needTransform&&o.restore(),o=(r=this.getLayer(l.zlevel)).ctx,n=l.zlevel,r.unusedCount=0,(r.dirty||t)&&r.clear(),r.needTransform&&(o.save(),r.setTransform(o))),o&&l.__startClip){var c=l.__startClip;if(o.save(),c.needTransform){var f=c.transform;hn.Util_matrix.invert(a,f),o.transform(f[0],f[1],f[2],f[3],f[4],f[5])}if(o.beginPath(),c.buildPath(o,c.style),o.clip(),c.needTransform){var h=a;o.transform(h[0],h[1],h[2],h[3],h[4],h[5])}}if((r&&r.dirty||t)&&!l.invisible&&(!l.onbrush||l.onbrush&&!l.onbrush(o,!1)))if(nn.catchBrushException)try{l.brush(o,!1,this.updatePainter)}catch(e){hn.Util_log(e,"brush error of "+l.type,l)}else l.brush(o,!1,this.updatePainter);o&&l.__stopClip&&o.restore(),l.__dirty=!1}for(var p in o&&r&&r.needTransform&&o.restore(),this._layers)if("hover"!==p){var d=this._layers[p];d.dirty=!1,1==d.unusedCount&&d.clear()}}},{key:"getLayer",value:function(e){var t=this._layers[e];if(!t){var r=this._zlevelList.length,n=null,o=-1;if(r>0&&e>this._zlevelList[0]){for(o=0;o<r-1&&!(this._zlevelList[o]<e&&this._zlevelList[o+1]>e);o++);n=this._layers[this._zlevelList[o]]}this._zlevelList.splice(o+1,0,e),t=new so(j.createUniqueID("_levelLayer_"+e),this);var i=n?n.dom:this._bgDom;i.nextSibling?i.parentNode.insertBefore(t.dom,i.nextSibling):i.parentNode.appendChild(t.dom),t.initContext(),this._layers[e]=t,this._layerConfig[e]&&(new Nr).merge(t,this._layerConfig[e],!0),t.updateTransform()}return t}},{key:"getLayers",value:function(){return this._layers}},{key:"_updateLayerStatus",value:function(e){var t=this._layers,r={};for(var n in t)"hover"!==n&&(r[n]=t[n].elCount,t[n].elCount=0);for(var o=0;o<e.length;o++){var i=e[o],a=t[i.zlevel];if(a){if(a.elCount++,a.dirty)continue;a.dirty=i.__dirty}}for(var s in t)"hover"!==s&&r[s]!==t[s].elCount&&(t[s].dirty=!0)}},{key:"refreshShapes",value:function(e,t){for(var r=0,n=e.length;r<n;r++){var o=e[r];this.storage.mod(o.id)}return this.refresh(t),this}},{key:"clear",value:function(){for(var e in this._layers)"hover"!=e&&this._layers[e].clear();return this}},{key:"modLayer",value:function(e,t){if(t){this._layerConfig[e]?(new Nr).merge(this._layerConfig[e],t,!0):this._layerConfig[e]=t;var r=this._layers[e];r&&(new Nr).merge(r,this._layerConfig[e],!0)}}},{key:"delLayer",value:function(e){var t=this._layers[e];t&&(this.modLayer(e,{position:t.position,rotation:t.rotation,scale:t.scale}),t.dom.parentNode.removeChild(t.dom),delete this._layers[e],this._zlevelList.splice((new Nr).indexOf(this._zlevelList,e),1))}},{key:"refreshHover",value:function(){this.clearHover();for(var e=this.storage.getHoverShapes(!0),t=0,r=e.length;t<r;t++)this._brushHover(e[t]);return this.storage.delHover(),this}},{key:"clearHover",value:function(){var e=this._layers.hover;return e&&e.clear(),this}},{key:"resize",value:function(){var e=this._domRoot;e.style.display="none";var t=this._getWidth(),r=this._getHeight();if(e.style.display="",this._width!=t||r!=this._height){for(var n in this._width=t,this._height=r,e.style.width=t+"px",e.style.height=r+"px",this._layers)this._layers[n].resize(t,r);this.refresh(null,!0)}return this}},{key:"clearLayer",value:function(e){var t=this._layers[e];t&&t.clear()}},{key:"dispose",value:function(){this.root.innerHTML="",this.root=null,this.storage=null,this._domRoot=null,this._layers=null}},{key:"getDomHover",value:function(){return this._layers.hover.dom}},{key:"toDataURL",value:function(t,r,n){var o=e.createDom(j.createUniqueID("SuperMap.Theme.image_"),"canvas",this);this._bgDom.appendChild(o);var i=o.getContext("2d");1!=e.devicePixelRatio&&i.scale(e.devicePixelRatio,e.devicePixelRatio),i.fillStyle=r||"#fff",i.rect(0,0,this._width*e.devicePixelRatio,this._height*e.devicePixelRatio),i.fill();var a=this;this.storage.iterShape(function(e){if(!e.invisible&&(!e.onbrush||e.onbrush&&!e.onbrush(i,!1)))if(nn.catchBrushException)try{e.brush(i,!1,a.updatePainter)}catch(t){hn.Util_log(t,"brush error of "+e.type,e)}else e.brush(i,!1,a.updatePainter)},{normal:"up",update:!0});var s=o.toDataURL(t,n);return i=null,this._bgDom.removeChild(o),s}},{key:"getWidth",value:function(){return this._width}},{key:"getHeight",value:function(){return this._height}},{key:"_getWidth",value:function(){var e=this.root,t=e.currentStyle||document.defaultView.getComputedStyle(e);return((e.clientWidth||parseInt(t.width,10))-parseInt(t.paddingLeft,10)-parseInt(t.paddingRight,10)).toFixed(0)-0}},{key:"_getHeight",value:function(){var e=this.root,t=e.currentStyle||document.defaultView.getComputedStyle(e);return((e.clientHeight||parseInt(t.height,10))-parseInt(t.paddingTop,10)-parseInt(t.paddingBottom,10)).toFixed(0)-0}},{key:"_brushHover",value:function(e){var t=this._layers.hover.ctx;if(!e.onbrush||e.onbrush&&!e.onbrush(t,!0)){var r=this.getLayer(e.zlevel);if(r.needTransform&&(t.save(),r.setTransform(t)),nn.catchBrushException)try{e.brush(t,!0,this.updatePainter)}catch(t){hn.Util_log(t,"hoverBrush error of "+e.type,e)}else e.brush(t,!0,this.updatePainter);r.needTransform&&t.restore()}}},{key:"_shapeToImage",value:function(e,t,r,n,o){var i=document.createElement("canvas"),a=i.getContext("2d"),s=o||window.devicePixelRatio||1;i.style.width=r+"px",i.style.height=n+"px",i.setAttribute("width",r*s),i.setAttribute("height",n*s),a.clearRect(0,0,r*s,n*s);var u={position:t.position,rotation:t.rotation,scale:t.scale};t.position=[0,0,0],t.rotation=0,t.scale=[1,1],t&&t.brush(a,!1);var l=new Qn({id:e,style:{x:0,y:0,image:i}});return null!=u.position&&(l.position=t.position=u.position),null!=u.rotation&&(l.rotation=t.rotation=u.rotation),null!=u.scale&&(l.scale=t.scale=u.scale),l}},{key:"_createShapeToImageProcessor",value:function(){var t=this;return function(r,n,o,i){return t._shapeToImage(r,n,o,i,e.devicePixelRatio)}}},{key:"updateHoverLayer",value:function(e){if(!(e instanceof Array))return this;this.clearHover(),this.storage.delHover();for(var t=0;t<e.length;t++)this.storage.addHover(e[t]),this._brushHover(e[t])}}],[{key:"createDom",value:function(t,r,n){var o=document.createElement(r),i=n._width,a=n._height;return o.style.position="absolute",o.style.left=0,o.style.top=0,o.style.width=i+"px",o.style.height=a+"px",o.setAttribute("width",i*e.devicePixelRatio),o.setAttribute("height",a*e.devicePixelRatio),o.setAttribute("id",t),o}}]),e}(),so=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&eo(e,t)}(r,dn);var t=to(r);function r(e,n){var o;return no(this,r),(o=t.call(this,e,n)).dom=null,o.domBack=null,o.ctxBack=null,o.painter=n,o.unusedCount=0,o.config=null,o.dirty=!0,o.elCount=0,o.clearColor=0,o.motionBlur=!1,o.lastFrameAlpha=.7,o.zoomable=!1,o.panable=!1,o.maxZoom=1/0,o.minZoom=0,o.ctx=null,o.dom=ao.createDom(j.createUniqueID("SuperMap.Theme"+e),"canvas",n),o.dom.onselectstart=function(){return!1},o.dom.style["-webkit-user-select"]="none",o.dom.style["user-select"]="none",o.dom.style["-webkit-touch-callout"]="none",o.CLASS_NAME="SuperMap.LevelRenderer.Painter.Layer",o}return io(r,[{key:"destroy",value:function(){this.dom=null,this.domBack=null,this.ctxBack=null,this.painter=null,this.unusedCount=null,this.config=null,this.dirty=null,this.elCount=null,this.clearColor=null,this.motionBlur=null,this.lastFrameAlpha=null,this.zoomable=null,this.panable=null,this.maxZoom=null,this.minZoom=null,this.ctx=null,dn.destroy.apply(this,arguments)}},{key:"initContext",value:function(){this.ctx=this.dom.getContext("2d"),1!=ao.devicePixelRatio&&this.ctx.scale(ao.devicePixelRatio,ao.devicePixelRatio)}},{key:"createBackBuffer",value:function(){this.domBack=ao.createDom(j.createUniqueID("SuperMap.Theme.back-"+this.id),"canvas",this.painter),this.ctxBack=this.domBack.getContext("2d"),1!=ao.devicePixelRatio&&this.ctxBack.scale(ao.devicePixelRatio,ao.devicePixelRatio)}},{key:"resize",value:function(e,t){this.dom.style.width=e+"px",this.dom.style.height=t+"px",this.dom.setAttribute("width",e*ao.devicePixelRatio),this.dom.setAttribute("height",t*ao.devicePixelRatio),1!=ao.devicePixelRatio&&this.ctx.scale(ao.devicePixelRatio,ao.devicePixelRatio),this.domBack&&(this.domBack.setAttribute("width",e*ao.devicePixelRatio),this.domBack.setAttribute("height",t*ao.devicePixelRatio),1!=ao.devicePixelRatio&&this.ctxBack.scale(ao.devicePixelRatio,ao.devicePixelRatio))}},{key:"clear",value:function(){var e=this.dom,t=this.ctx,r=e.width,n=e.height,o=this.clearColor,i=this.motionBlur,a=this.lastFrameAlpha;if(i&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(e,0,0,r/ao.devicePixelRatio,n/ao.devicePixelRatio)),o?(t.save(),t.fillStyle=this.config.clearColor,t.fillRect(0,0,r/ao.devicePixelRatio,n/ao.devicePixelRatio),t.restore()):t.clearRect(0,0,r/ao.devicePixelRatio,n/ao.devicePixelRatio),i){var s=this.domBack;t.save(),t.globalAlpha=a,t.drawImage(s,0,0,r/ao.devicePixelRatio,n/ao.devicePixelRatio),t.restore()}}}]),r}();function uo(e){"@babel/helpers - typeof";return(uo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function lo(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function co(e,t){return(co=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function fo(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=po(e);if(t){var o=po(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===uo(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ho(e)}(this,r)}}function ho(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function po(e){return(po=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var yo=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&co(e,t)}(i,Br);var t,r,n,o=fo(i);function i(e,t,r){var n,a,s;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t,r)).root=e,n.storage=t,n.painter=r,n._lastX=0,n._lastY=0,n._mouseX=0,n._mouseY=0,n._findHover=null,n._domHover=null,n._findHover=(a=function(e,t,r){var n=this;if(n._draggingTarget&&n._draggingTarget.id==e.id||e.isSilent())return!1;var o=n._event;if(e.isCover(t,r)){if(e.hoverable)if(e.isHoverByRefDataID&&!0===e.isHoverByRefDataID){if(e.refDataID){var i=e.refDataID,a=null;e.refDataHoverGroup&&(a=e.refDataHoverGroup);for(var s=n.storage._shapeList,u=0,l=s.length;u<l;u++){var c=s[u];c.refDataID&&i===c.refDataID&&(a?c.refDataHoverGroup&&a===c.refDataHoverGroup&&n.storage.addHover(c):n.storage.addHover(c))}}}else n.storage.addHover(e);for(var f=e.parent;f;){if(f.clipShape&&!f.clipShape.isCover(n._mouseX,n._mouseY))return!1;f=f.parent}return n._lastHover!=e&&(n._processOutShape(o),n._processDragLeave(o),n._lastHover=e,n._processDragEnter(o)),n._processOverShape(o),n._processDragOver(o),n._hasfound=1,!0}return!1},s=ho(n),function(e,t,r){return a.call(s,e,t,r)}),n._domHover=r.getDomHover(),n.CLASS_NAME="SuperMap.LevelRenderer.Handler";var u={resize:function(e){e=e||window.event,this._lastHover=null,this._isMouseDown=0,this.dispatch(nn.EVENT.RESIZE,e)},click:function(e){e=this._zrenderEventFixed(e);var t=this._lastHover;(t&&t.clickable||!t)&&this._clickThreshold<10&&this._dispatchAgency(t,nn.EVENT.CLICK,e),this._mousemoveHandler(e)},dblclick:function(e){e=e||window.event,e=this._zrenderEventFixed(e);var t=this._lastHover;(t&&t.clickable||!t)&&this._clickThreshold<5&&this._dispatchAgency(t,nn.EVENT.DBLCLICK,e),this._mousemoveHandler(e)},mousewheel:function(e){var t=((e=this._zrenderEventFixed(e)).wheelDelta||-e.detail)>0?1.1:1/1.1,r=this.painter.getLayers(),n=!1;for(var o in r)if("hover"!==o){var i=r[o],a=i.position;if(i.zoomable){i.__zoom=i.__zoom||1;var s=i.__zoom;s*=t,t=(s=Math.max(Math.min(i.maxZoom,s),i.minZoom))/i.__zoom,i.__zoom=s,a[0]-=(this._mouseX-a[0])*(t-1),a[1]-=(this._mouseY-a[1])*(t-1),i.scale[0]*=t,i.scale[1]*=t,i.dirty=!0,n=!0}}n&&this.painter.refresh(),this._dispatchAgency(this._lastHover,nn.EVENT.MOUSEWHEEL,e),this._mousemoveHandler(e)},mousemove:function(e){this._clickThreshold++,e=this._zrenderEventFixed(e),this._lastX=this._mouseX,this._lastY=this._mouseY,this._mouseX=hn.Util_event.getX(e),this._mouseY=hn.Util_event.getY(e);var t=this._mouseX-this._lastX,r=this._mouseY-this._lastY;this._processDragStart(e),this._hasfound=0,this._event=e,this._iterateAndFindHover(),this._hasfound||((!this._draggingTarget||this._lastHover&&this._lastHover!=this._draggingTarget)&&(this._processOutShape(e),this._processDragLeave(e)),this._lastHover=null,this.storage.delHover(),this.painter.clearHover());var n="";if(this._draggingTarget)this.storage.drift(this._draggingTarget.id,t,r),this._draggingTarget.modSelf(),this.storage.addHover(this._draggingTarget);else if(this._isMouseDown){var o=this.painter.getLayers(),i=!1;for(var a in o)if("hover"!==a){var s=o[a];s.panable&&(n="move",s.position[0]+=t,s.position[1]+=r,i=!0,s.dirty=!0)}i&&this.painter.refresh()}this._draggingTarget||this._hasfound&&this._lastHover.draggable?n="move":this._hasfound&&this._lastHover.clickable&&(n="pointer"),this.root.style.cursor=n,this._dispatchAgency(this._lastHover,nn.EVENT.MOUSEMOVE,e),(this._draggingTarget||this._hasfound||this.storage.hasHoverShape())&&this.painter.refreshHover()},mouseout:function(e){var t=(e=this._zrenderEventFixed(e)).toElement||e.relatedTarget;if(t!=this.root)for(;t&&9!=t.nodeType;){if(t==this.root)return void this._mousemoveHandler(e);t=t.parentNode}e.zrenderX=this._lastX,e.zrenderY=this._lastY,this.root.style.cursor="",this._isMouseDown=0,this._processOutShape(e),this._processDrop(e),this._processDragEnd(e),this.painter.refreshHover(),this.dispatch(nn.EVENT.GLOBALOUT,e)},mousedown:function(e){if(this._clickThreshold=0,2==this._lastDownButton)return this._lastDownButton=e.button,void(this._mouseDownTarget=null);this._lastMouseDownMoment=new Date,e=this._zrenderEventFixed(e),this._isMouseDown=1,this._mouseDownTarget=this._lastHover,this._dispatchAgency(this._lastHover,nn.EVENT.MOUSEDOWN,e),this._lastDownButton=e.button},mouseup:function(e){e=this._zrenderEventFixed(e),this.root.style.cursor="",this._isMouseDown=0,this._mouseDownTarget=null,this._dispatchAgency(this._lastHover,nn.EVENT.MOUSEUP,e),this._processDrop(e),this._processDragEnd(e)},touchstart:function(e){e=this._zrenderEventFixed(e,!0),this._lastTouchMoment=new Date,this._mobildFindFixed(e),this._mousedownHandler(e)},touchmove:function(e){e=this._zrenderEventFixed(e,!0),this._mousemoveHandler(e),this._isDragging&&hn.Util_event.stop(e)},touchend:function(e){e=this._zrenderEventFixed(e,!0),this._mouseupHandler(e);var t=new Date;t-this._lastTouchMoment<nn.EVENT.touchClickDelay&&(this._mobildFindFixed(e),this._clickHandler(e),t-this._lastClickMoment<nn.EVENT.touchClickDelay/2&&(this._dblclickHandler(e),this._lastHover&&this._lastHover.clickable&&hn.Util_event.stop(e)),this._lastClickMoment=t),this.painter.clearHover()}};function l(e,t){return function(r){return e.call(t,r)}}return function(e){var t=["resize","click","dblclick","mousewheel","mousemove","mouseout","mouseup","mousedown","touchstart","touchend","touchmove"],r=t.length;for(;r--;){var n=t[r];e["_"+n+"Handler"]=l(u[n],e)}}(ho(n)),window.addEventListener?(window.addEventListener("resize",n._resizeHandler),hn.Util_env.os.tablet||hn.Util_env.os.phone?(e.addEventListener("touchstart",n._touchstartHandler),e.addEventListener("touchmove",n._touchmoveHandler),e.addEventListener("touchend",n._touchendHandler)):(e.addEventListener("click",n._clickHandler),e.addEventListener("dblclick",n._dblclickHandler),e.addEventListener("mousewheel",n._mousewheelHandler),e.addEventListener("mousemove",n._mousemoveHandler),e.addEventListener("mousedown",n._mousedownHandler),e.addEventListener("mouseup",n._mouseupHandler)),e.addEventListener("DOMMouseScroll",n._mousewheelHandler),e.addEventListener("mouseout",n._mouseoutHandler)):(window.attachEvent("onresize",n._resizeHandler),e.attachEvent("onclick",n._clickHandler),e.ondblclick=n._dblclickHandler,e.attachEvent("onmousewheel",n._mousewheelHandler),e.attachEvent("onmousemove",n._mousemoveHandler),e.attachEvent("onmouseout",n._mouseoutHandler),e.attachEvent("onmousedown",n._mousedownHandler),e.attachEvent("onmouseup",n._mouseupHandler)),n}return t=i,(r=[{key:"destroy",value:function(){this.dispose(),this._lastX=null,this._lastY=null,this._mouseX=null,this._mouseY=null,this._findHover=null,Br.prototype.destroy.apply(this,arguments)}},{key:"on",value:function(e,t){return this.bind(e,t),this}},{key:"un",value:function(e,t){return this.unbind(e,t),this}},{key:"trigger",value:function(e,t){var r=nn.EVENT;switch(e){case r.RESIZE:case r.CLICK:case r.DBLCLICK:case r.MOUSEWHEEL:case r.MOUSEMOVE:case r.MOUSEDOWN:case r.MOUSEUP:case r.MOUSEOUT:this["_"+e+"Handler"](t)}}},{key:"dispose",value:function(){var e=this.root;window.removeEventListener?(window.removeEventListener("resize",this._resizeHandler),hn.Util_env.os.tablet||hn.Util_env.os.phone?(e.removeEventListener("touchstart",this._touchstartHandler),e.removeEventListener("touchmove",this._touchmoveHandler),e.removeEventListener("touchend",this._touchendHandler)):(e.removeEventListener("click",this._clickHandler),e.removeEventListener("dblclick",this._dblclickHandler),e.removeEventListener("mousewheel",this._mousewheelHandler),e.removeEventListener("mousemove",this._mousemoveHandler),e.removeEventListener("mousedown",this._mousedownHandler),e.removeEventListener("mouseup",this._mouseupHandler)),e.removeEventListener("DOMMouseScroll",this._mousewheelHandler),e.removeEventListener("mouseout",this._mouseoutHandler)):(window.detachEvent("onresize",this._resizeHandler),e.detachEvent("onclick",this._clickHandler),e.detachEvent("dblclick",this._dblclickHandler),e.detachEvent("onmousewheel",this._mousewheelHandler),e.detachEvent("onmousemove",this._mousemoveHandler),e.detachEvent("onmouseout",this._mouseoutHandler),e.detachEvent("onmousedown",this._mousedownHandler),e.detachEvent("onmouseup",this._mouseupHandler)),this.root=null,this._domHover=null,this.storage=null,this.painter=null,this.un()}},{key:"_processDragStart",value:function(e){var t=this._lastHover;if(this._isMouseDown&&t&&t.draggable&&!this._draggingTarget&&this._mouseDownTarget==t){if(t.dragEnableTime&&new Date-this._lastMouseDownMoment<t.dragEnableTime)return;var r=t;this._draggingTarget=r,this._isDragging=1,r.invisible=!0,this.storage.mod(r.id),this._dispatchAgency(r,nn.EVENT.DRAGSTART,e),this.painter.refresh()}}},{key:"_processDragEnter",value:function(e){this._draggingTarget&&this._dispatchAgency(this._lastHover,nn.EVENT.DRAGENTER,e,this._draggingTarget)}},{key:"_processDragOver",value:function(e){this._draggingTarget&&this._dispatchAgency(this._lastHover,nn.EVENT.DRAGOVER,e,this._draggingTarget)}},{key:"_processDragLeave",value:function(e){this._draggingTarget&&this._dispatchAgency(this._lastHover,nn.EVENT.DRAGLEAVE,e,this._draggingTarget)}},{key:"_processDrop",value:function(e){this._draggingTarget&&(this._draggingTarget.invisible=!1,this.storage.mod(this._draggingTarget.id),this.painter.refresh(),this._dispatchAgency(this._lastHover,nn.EVENT.DROP,e,this._draggingTarget))}},{key:"_processDragEnd",value:function(e){this._draggingTarget&&(this._dispatchAgency(this._draggingTarget,nn.EVENT.DRAGEND,e),this._lastHover=null),this._isDragging=0,this._draggingTarget=null}},{key:"_processOverShape",value:function(e){this._dispatchAgency(this._lastHover,nn.EVENT.MOUSEOVER,e)}},{key:"_processOutShape",value:function(e){this._dispatchAgency(this._lastHover,nn.EVENT.MOUSEOUT,e)}},{key:"_dispatchAgency",value:function(e,t,r,n){var o="on"+t,i={type:t,event:r,target:e,cancelBubble:!1},a=e;for(n&&(i.dragged=n);a&&(a[o]&&(i.cancelBubble=a[o](i)),a.dispatch(t,i),a=a.parent,!i.cancelBubble););e?i.cancelBubble||this.dispatch(t,i):n||this.dispatch(t,{type:t,event:r})}},{key:"_iterateAndFindHover",value:function(){for(var e,t=hn.Util_matrix.create(),r=this.storage.getShapeList(),n=[0,0],o=r.length-1;o>=0;o--){var i=r[o];if(void 0!==i.zlevel&&(e=this.painter.getLayer(i.zlevel,e),n[0]=this._mouseX,n[1]=this._mouseY,e.needTransform&&(hn.Util_matrix.invert(t,e.transform),hn.Util_vector.applyTransform(n,n,t))),this._findHover(i,n[0],n[1]))break}}},{key:"_mobildFindFixed",value:function(e){var t=[{x:10},{x:-20},{x:10,y:10},{y:-20}];this._lastHover=null,this._mouseX=e.zrenderX,this._mouseY=e.zrenderY,this._event=e,this._iterateAndFindHover();for(var r=0;!this._lastHover&&r<t.length;r++){var n=t[r];n.x&&(this._mouseX+=n.x),n.y&&(this._mouseX+=n.y),this._iterateAndFindHover()}this._lastHover&&(e.zrenderX=this._mouseX,e.zrenderY=this._mouseY)}},{key:"_zrenderEventFixed",value:function(e,t){if(e.zrenderFixed)return e;if(t){var r="touchend"!=e.type?e.targetTouches[0]:e.changedTouches[0];if(r){var n=this.root.getBoundingClientRect();e.zrenderX=r.clientX-n.left,e.zrenderY=r.clientY-n.top}}else{var o=(e=e||window.event).toElement||e.relatedTarget||e.srcElement||e.target;o&&o!=this._domHover&&(e.zrenderX=(void 0!==e.offsetX?e.offsetX:e.layerX)+o.offsetLeft,e.zrenderY=(void 0!==e.offsetY?e.offsetY:e.layerY)+o.offsetTop)}return e.zrenderFixed=1,e}},{key:"getLastHoverOne",value:function(){return this._lastHover?this._lastHover:null}}])&&lo(t.prototype,r),n&&lo(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function vo(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var go=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.CLASS_NAME="SuperMap.LevelRenderer.Animation.easing"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){}},{key:"Linear",value:function(e){return e}},{key:"QuadraticIn",value:function(e){return e*e}},{key:"QuadraticOut",value:function(e){return e*(2-e)}},{key:"QuadraticInOut",value:function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)}},{key:"CubicIn",value:function(e){return e*e*e}},{key:"CubicOut",value:function(e){return--e*e*e+1}},{key:"CubicInOut",value:function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)}},{key:"QuarticIn",value:function(e){return e*e*e*e}},{key:"QuarticOut",value:function(e){return 1- --e*e*e*e}},{key:"QuarticInOut",value:function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)}},{key:"QuinticIn",value:function(e){return e*e*e*e*e}},{key:"QuinticOut",value:function(e){return--e*e*e*e*e+1}},{key:"QuinticInOut",value:function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)}},{key:"SinusoidalIn",value:function(e){return 1-Math.cos(e*Math.PI/2)}},{key:"SinusoidalOut",value:function(e){return Math.sin(e*Math.PI/2)}},{key:"SinusoidalInOut",value:function(e){return.5*(1-Math.cos(Math.PI*e))}},{key:"ExponentialIn",value:function(e){return 0===e?0:Math.pow(1024,e-1)}},{key:"ExponentialOut",value:function(e){return 1===e?1:1-Math.pow(2,-10*e)}},{key:"ExponentialInOut",value:function(e){return 0===e?0:1===e?1:(e*=2)<1?.5*Math.pow(1024,e-1):.5*(2-Math.pow(2,-10*(e-1)))}},{key:"CircularIn",value:function(e){return 1-Math.sqrt(1-e*e)}},{key:"CircularOut",value:function(e){return Math.sqrt(1- --e*e)}},{key:"CircularInOut",value:function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)}},{key:"ElasticIn",value:function(e){var t,r=.1;return 0===e?0:1===e?1:(r<1?(r=1,t=.1):t=.4*Math.asin(1/r)/(2*Math.PI),-r*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/.4))}},{key:"ElasticOut",value:function(e){var t,r=.1;return 0===e?0:1===e?1:(r<1?(r=1,t=.1):t=.4*Math.asin(1/r)/(2*Math.PI),r*Math.pow(2,-10*e)*Math.sin((e-t)*(2*Math.PI)/.4)+1)}},{key:"ElasticInOut",value:function(e){var t,r=.1;return 0===e?0:1===e?1:(r<1?(r=1,t=.1):t=.4*Math.asin(1/r)/(2*Math.PI),(e*=2)<1?r*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/.4)*-.5:r*Math.pow(2,-10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/.4)*.5+1)}},{key:"BackIn",value:function(e){var t=1.70158;return e*e*((t+1)*e-t)}},{key:"BackOut",value:function(e){var t=1.70158;return--e*e*((t+1)*e+t)+1}},{key:"BackInOut",value:function(e){var t=2.5949095;return(e*=2)<1?e*e*((t+1)*e-t)*.5:.5*((e-=2)*e*((t+1)*e+t)+2)}},{key:"BounceIn",value:function(e){return 1-this.BounceOut(1-e)}},{key:"BounceOut",value:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375}},{key:"BounceInOut",value:function(e){return e<.5?.5*this.BounceIn(2*e):.5*this.BounceOut(2*e-1)+.5}}])&&vo(t.prototype,r),n&&vo(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function mo(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var bo=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._targetPool=t.target||{},this._targetPool instanceof Array||(this._targetPool=[this._targetPool]),this._life=t.life||1e3,this._delay=t.delay||0,this._startTime=(new Date).getTime()+this._delay,this._endTime=this._startTime+1e3*this._life,this.loop=void 0!==t.loop&&t.loop,this.gap=t.gap||0,this.easing=t.easing||"Linear",this.onframe=t.onframe,this.ondestroy=t.ondestroy,this.onrestart=t.onrestart,this.CLASS_NAME="SuperMap.LevelRenderer.Animation.Clip"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){}},{key:"step",value:function(e){var t=new go,r=(e-this._startTime)/this._life;if(!(r<0)){r=Math.min(r,1);var n="string"==typeof this.easing?t[this.easing]:this.easing,o="function"==typeof n?n(r):r;return this.fire("frame",o),1==r?this.loop?(this.restart(),"restart"):(this._needsRemove=!0,"destroy"):null}}},{key:"restart",value:function(){var e=((new Date).getTime()-this._startTime)%this._life;this._startTime=(new Date).getTime()-e+this.gap}},{key:"fire",value:function(e,t){for(var r=0,n=this._targetPool.length;r<n;r++)this["on"+e]&&this["on"+e](this._targetPool[r],t)}}])&&mo(t.prototype,r),n&&mo(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function wo(e){"@babel/helpers - typeof";return(wo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function xo(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function So(e,t,r){return t&&xo(e.prototype,t),r&&xo(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Oo(e,t){return(Oo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Po(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=ko(e);if(t){var o=ko(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===wo(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Eo(e)}(this,r)}}function Eo(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ko(e){return(ko=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Mo=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Oo(e,t)}(r,Br);var t=Po(r);function r(e){var n;return _o(this,r),n=t.call(this,e),e=e||{},n.stage={},n.onframe=function(){},n._clips=[],n._running=!1,n._time=0,j.extend(Eo(n),e),n.CLASS_NAME="SuperMap.LevelRenderer.Animation",n}return So(r,[{key:"add",value:function(e){this._clips.push(e)}},{key:"remove",value:function(e){var t=(new Nr).indexOf(this._clips,e);t>=0&&this._clips.splice(t,1)}},{key:"_update",value:function(){for(var e=(new Date).getTime(),t=e-this._time,r=this._clips,n=r.length,o=[],i=[],a=0;a<n;a++){var s=r[a],u=s.step(e);u&&(o.push(u),i.push(s))}this.stage.update&&this.stage.update();for(var l=0;l<n;)r[l]._needsRemove?(r[l]=r[n-1],r.pop(),n--):l++;n=o.length;for(var c=0;c<n;c++)i[c].fire(o[c]);this._time=e,this.onframe(t),this.dispatch("frame",t)}},{key:"start",value:function(){var e=window.requestAnimationFrame||window.msRequestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(e){setTimeout(e,16)},t=this;this._running=!0,this._time=(new Date).getTime(),e(function r(){t._running&&(t._update(),e(r))})}},{key:"stop",value:function(){this._running=!1}},{key:"clear",value:function(){this._clips=[]}},{key:"animate",value:function(e,t){var r=new Co(e,(t=t||{}).loop,t.getter,t.setter);return r.animation=this,r}}],[{key:"_interpolateNumber",value:function(e,t,r){return(t-e)*r+e}},{key:"_interpolateArray",value:function(e,t,n,o,i){var a=e.length;if(1==i)for(var s=0;s<a;s++)o[s]=r._interpolateNumber(e[s],t[s],n);else for(var u=e[0].length,l=0;l<a;l++)for(var c=0;c<u;c++)o[l][c]=r._interpolateNumber(e[l][c],t[l][c],n)}},{key:"_isArrayLike",value:function(e){switch(wo(e)){case"undefined":case"string":return!1}return void 0!==e.length}},{key:"_catmullRomInterpolateArray",value:function(e,t,n,o,i,a,s,u,l){var c=e.length;if(1==l)for(var f=0;f<c;f++)u[f]=r._catmullRomInterpolate(e[f],t[f],n[f],o[f],i,a,s);else for(var h=e[0].length,p=0;p<c;p++)for(var d=0;d<h;d++)u[p][d]=r._catmullRomInterpolate(e[p][d],t[p][d],n[p][d],o[p][d],i,a,s)}},{key:"_catmullRomInterpolate",value:function(e,t,r,n,o,i,a){var s=.5*(r-e),u=.5*(n-t);return(2*(t-r)+s+u)*a+(-3*(t-r)-2*s-u)*i+s*o+t}},{key:"_cloneValue",value:function(e){var t=Array.prototype.slice;if(r._isArrayLike(e)){var n=e.length;if(r._isArrayLike(e[0])){for(var o=[],i=0;i<n;i++)o.push(t.call(e[i]));return o}return t.call(e)}return e}},{key:"rgba2String",value:function(e){return e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.floor(e[2]),"rgba("+e.join(",")+")"}}]),r}(),Co=function(){function e(t,r,n,o){_o(this,e),this._tracks={},this._target=t,this._loop=r||!1,this._getter=n||function(e,t){return e[t]},this._setter=o||function(e,t,r){e[t]=r},this._clipCount=0,this._delay=0,this._doneList=[],this._onframeList=[],this._clipList=[],this.CLASS_NAME="SuperMap.LevelRenderer.Animation.Animator"}return So(e,[{key:"when",value:function(e,t){for(var r in t)this._tracks[r]||(this._tracks[r]=[],0!==e&&this._tracks[r].push({time:0,value:Mo._cloneValue(this._getter(this._target,r))})),this._tracks[r].push({time:parseInt(e,10),value:t[r]});return this}},{key:"during",value:function(e){return this._onframeList.push(e),this}},{key:"start",value:function(e){var t=this,r=this._setter,n=this._getter,o=t._onframeList.length,i="spline"===e,a=function(){if(t._clipCount--,0===t._clipCount){t._tracks={};for(var e=t._doneList.length,r=0;r<e;r++)t._doneList[r].call(t)}},s=function(s,u){var l=s.length;if(l){var c=s[0].value,f=Mo._isArrayLike(c),h=!1,p=f&&Mo._isArrayLike(c[0])?2:1;s.sort(function(e,t){return e.time-t.time});for(var d=s[l-1].time,y=[],v=[],g=0;g<l;g++){y.push(s[g].time/d);var m=s[g].value;"string"==typeof m&&(0===(m=hn.Util_color.toArray(m)).length&&(m[0]=m[1]=m[2]=0,m[3]=1),h=!0),v.push(m)}var b,w,_,x,S,O,P,E=0,k=0;if(h)var M=[0,0,0,0];var C=new bo({target:t._target,life:d,loop:t._loop,delay:t._delay,onframe:function(e,a){if(a<k){for(b=Math.min(E+1,l-1),w=b;w>=0&&!(y[w]<=a);w--);w=Math.min(w,l-2)}else{for(w=E;w<l&&!(y[w]>a);w++);w=Math.min(w-1,l-2)}E=w,k=a;var s=y[w+1]-y[w];if(0!==s){var c,d;for(_=(a-y[w])/s,i?(S=v[w],x=v[0===w?w:w-1],O=v[w>l-2?l-1:w+1],P=v[w>l-3?l-1:w+2],f?Mo._catmullRomInterpolateArray(x,S,O,P,_,_*_,_*_*_,n(e,u),p):(c=h?Mo.rgba2String(M):Mo._catmullRomInterpolate(x,S,O,P,_,_*_,_*_*_),r(e,u,c))):f?Mo._interpolateArray(v[w],v[w+1],_,n(e,u),p):(h?(Mo._interpolateArray(v[w],v[w+1],_,M,1),d=Mo.rgba2String(M)):d=Mo._interpolateNumber(v[w],v[w+1],_),r(e,u,d)),w=0;w<o;w++)t._onframeList[w](e,a)}},ondestroy:a});e&&"spline"!==e&&(C.easing=e),t._clipList.push(C),t._clipCount++,t.animation.add(C)}};for(var u in this._tracks)s(this._tracks[u],u);return this}},{key:"stop",value:function(){for(var e=0;e<this._clipList.length;e++){var t=this._clipList[e];this.animation.remove(t)}this._clipList=[]}},{key:"delay",value:function(e){return this._delay=e,this}},{key:"done",value:function(e){return e&&this._doneList.push(e),this}}]),e}();function jo(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var To=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=t,this.storage=new On,this.painter=new ao(r,this.storage),this.handler=new yo(r,this.storage,this.painter),this.animatingElements=[],this.animation=new Mo({stage:{update:e.getFrameCallback(this)}}),this._needsRefreshNextFrame=!1,this.animation.start(),this.CLASS_NAME="SuperMap.LevelRenderer.Render"}var t,r,n;return t=e,n=[{key:"getFrameCallback",value:function(e){return function(){var t=e.animatingElements;if(t instanceof Array){for(var r=0,n=t.length;r<n;r++)e.storage.mod(t[r].id);(t.length||e._needsRefreshNextFrame)&&e.refresh()}}}}],(r=[{key:"destroy",value:function(){this.id=null,this.storage=null,this.painter=null,this.handler=null,this.animatingElements=null,this.animation=null,this._needsRefreshNextFrame=null}},{key:"getId",value:function(){return this.id}},{key:"addShape",value:function(e){return this.storage.addRoot(e),this}},{key:"addGroup",value:function(e){return this.storage.addRoot(e),this}},{key:"delShape",value:function(e){return this.storage.delRoot(e),this}},{key:"delGroup",value:function(e){return this.storage.delRoot(e),this}},{key:"modShape",value:function(e,t){return this.storage.mod(e,t),this}},{key:"modGroup",value:function(e,t){return this.storage.mod(e,t),this}},{key:"modLayer",value:function(e,t){return this.painter.modLayer(e,t),this}},{key:"addHoverShape",value:function(e){return this.storage.addHover(e),this}},{key:"render",value:function(e){return this.painter.render(e),this._needsRefreshNextFrame=!1,this}},{key:"refresh",value:function(e){return this.painter.refresh(e),this._needsRefreshNextFrame=!1,this}},{key:"refreshNextFrame",value:function(){return this._needsRefreshNextFrame=!0,this}},{key:"refreshHover",value:function(e){return this.painter.refreshHover(e),this}},{key:"refreshShapes",value:function(e,t){return this.painter.refreshShapes(e,t),this}},{key:"resize",value:function(){return this.painter.resize(),this}},{key:"animate",value:function(e,t,r){if("string"==typeof e&&(e=this.storage.get(e)),e){var n;if(t){for(var o=t.split("."),i=e,a=0,s=o.length;a<s;a++)i&&(i=i[o[a]]);i&&(n=i)}else n=e;if(!n)return void hn.Util_log('Property "'+t+'" is not existed in element '+e.id);var u=this.animatingElements;return void 0===e.__aniCount&&(e.__aniCount=0),0===e.__aniCount&&u.push(e),e.__aniCount++,this.animation.animate(n,{loop:r}).done(function(){if(e.__aniCount--,0===e.__aniCount){var t=(new Nr).indexOf(u,e);u.splice(t,1)}})}hn.Util_log("Element not existed")}},{key:"clearAnimation",value:function(){this.animation.clear()}},{key:"getWidth",value:function(){return this.painter.getWidth()}},{key:"getHeight",value:function(){return this.painter.getHeight()}},{key:"toDataURL",value:function(e,t,r){return this.painter.toDataURL(e,t,r)}},{key:"shapeToImage",value:function(e,t,r){var n=j.createUniqueID("SuperMap.LevelRenderer.ToImage_");return this.painter.shapeToImage(n,e,t,r)}},{key:"on",value:function(e,t){return this.handler.on(e,t),this}},{key:"un",value:function(e,t){return this.handler.un(e,t),this}},{key:"trigger",value:function(e,t){return this.handler.trigger(e,t),this.handler.dispatch(e,t),this}},{key:"clear",value:function(){return this.storage.delRoot(),this.painter.clear(),this}},{key:"dispose",value:function(){this.animation.stop(),this.clear(),this.storage.dispose(),this.painter.dispose(),this.handler.dispose(),this.animation=null,this.animatingElements=null,this.storage=null,this.painter=null,this.handler=null}},{key:"updateHoverShapes",value:function(e){return this.painter.updateHoverLayer(e),this}},{key:"getAllShapes",value:function(){return this.storage._shapeList}},{key:"clearAll",value:function(){return this.clear(),this.painter.clearHover(),this}},{key:"getHoverOne",value:function(){return this.handler.getLastHoverOne()}}])&&jo(t.prototype,r),n&&jo(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Ao(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Io=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),e._instances={},e.Tool={},this.version="2.0.4",this.CLASS_NAME="SuperMap.LevelRenderer"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){this.dispose(),this.version=null}},{key:"init",value:function(t){var r=new To(j.createUniqueID("LRenderer_"),t);return e._instances[r.id]=r,r}},{key:"dispose",value:function(t){if(t)t.dispose(),this.delInstance(t.id);else{for(var r in e._instances)e._instances[r].dispose();e._instances={}}return this}},{key:"getInstance",value:function(t){return e._instances[t]}},{key:"delInstance",value:function(t){return delete e._instances[t],this}}])&&Ao(t.prototype,r),n&&Ao(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Ro(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Lo=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.fieldNames=null,this.fieldValues=null,this.geometry=null,t&&j.extend(this,t),this.CLASS_NAME="SuperMap.ServerFeature"}var t,r,n;return t=e,n=[{key:"fromJson",value:function(t){var r=null;if(t)return(r=t.geometry)&&(r=hr.fromJson(r)),new e({fieldNames:t.fieldNames,fieldValues:t.fieldValues,geometry:r})}}],(r=[{key:"destroy",value:function(){var e=this;e.fieldNames=null,e.fieldValues=null,e.geometry&&(e.geometry.destroy(),e.geometry=null)}},{key:"toFeature",value:function(){var e,t,r,n,o={},i=this;for(var a in e=i.fieldNames,t=i.fieldValues,e)o[e[a]]=t[a];return i.geometry&&(r=i.geometry.toGeometry()),n=new ze(r,o),i.geometry&&i.geometry.id&&(n.fid=i.geometry.id),n}}])&&Ro(t.prototype,r),n&&Ro(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function No(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Do=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var n=r||{};this.name=t,this.id=n.id?n.id:j.createUniqueID("themeLayer_"),this.opacity=n.opacity?n.opacity:1,this.visibility=!0,this.loadWhileAnimating=void 0===n.loadWhileAnimating||n.loadWhileAnimating,this.map=n.map?n.map:null,this.features=[],this.TFEvents=[],this.map&&this.map.addLayer(this)}var t,r,n;return t=e,(r=[{key:"onAdd",value:function(e){this.map=e,this._createCanvasContainer(),this.addTFEvents(),this.map.on("resize",this.resizeEvent.bind(this)),this.map.on("zoomstart",this.zoomStartEvent.bind(this)),this.map.on("zoomend",this.zoomEndEvent.bind(this)),this.map.on("rotatestart",this.rotateStartEvent.bind(this)),this.map.on("rotate",this.rotateEvent.bind(this)),this.map.on("rotateend",this.rotateEndEvent.bind(this)),this.map.on("dragend",this.dragEndEvent.bind(this)),this.map.on("movestart",this.moveStartEvent.bind(this)),this.map.on("move",this.moveEvent.bind(this)),this.map.on("moveend",this.moveEndEvent.bind(this)),this.map.on("remove",this.removeFromMap.bind(this)),this.refresh()}},{key:"refresh",value:function(){0!==this.features.length&&this.map&&this.redrawThematicFeatures(this.map.getBounds())}},{key:"_createCanvasContainer",value:function(){this.movingOffset=[0,0],this.mapContainer=this.map.getCanvasContainer(),this.div=document.createElement("div"),this.div.id=this.id,this.div.style.position="absolute";var e=this.map.getCanvasContainer(),t=this.map.getCanvas();this.mapContainer.style.perspective=this.map.transform.cameraToCenterDistance+"px",this.div.style.width=t.style.width,this.div.style.height=t.style.height,this.div.className="themeLayer",this.div.width=parseInt(t.width),this.div.height=parseInt(t.height),e.appendChild(this.div),this.setOpacity(this.opacity),this.levelRenderer=new Io,this.renderer=this.levelRenderer.init(this.div),this.renderer.clear()}},{key:"destroyFeatures",value:function(e){if(void 0===e&&(e=this.features),e){this.removeFeatures(e),Array.isArray(e)||(e=[e]);for(var t=e.length-1;t>=0;t--)e[t].destroy()}}},{key:"setVisibility",value:function(e){e!==this.visibility&&(this.visibility=e,this.display(e),this.redrawThematicFeatures(this.map.getBounds()))}},{key:"display",value:function(e){this.div.style.display=e?"block":"none"}},{key:"setOpacity",value:function(e){if(e!==this.opacity){this.opacity=e;var t=this.div;j.modifyDOMElement(t,null,null,null,null,null,null,e),null!==this.map&&o().Evented.prototype.fire("changelayer",{layer:this,property:"opacity"})}}},{key:"addFeatures",value:function(e){}},{key:"removeFeatures",value:function(e){var t=this;if(e){if(e===t.features)return t.removeAllFeatures();j.isArray(e)||"function"==typeof e||(e=[e]);for(var r=[],n=0;n<t.features.length;n++){var i=t.features[n];if(e&&"function"==typeof e)e(i)&&t.features.splice(n--,1);else-1===j.indexOf(e,i)?r.push(i):t.features.splice(n--,1)}for(var a=[],s=0,u=this.features.length;s<u;s++)i=this.features[s],a.push(i);this.features=[],this.addFeatures(a),this.renderer&&this.redrawThematicFeatures(this.map.getBounds());var l=0==r.length;o().Evented.prototype.fire("featuresremoved",{features:r,succeed:l})}}},{key:"removeAllFeatures",value:function(){this.renderer&&this.renderer.clear(),this.features=[],o().Evented.prototype.fire("featuresremoved",{features:[],succeed:!0})}},{key:"getFeatures",value:function(e){for(var t=this.features.length,r=[],n=0;n<t;++n)(!e||e&&"function"==typeof e&&e(this.features[n]))&&r.push(this.features[n]);return r}},{key:"getFeatureBy",value:function(e,t){var r=null;for(var n in this.features)if(this.features[n][e]===t){r=this.features[n];break}return r}},{key:"getFeatureById",value:function(e){return this.getFeatureBy("id",e)}},{key:"getFeaturesByAttribute",value:function(e,t){var r,n=[];for(var o in this.features)(r=this.features[o])&&r.attributes&&r.attributes[e]===t&&n.push(r);return n}},{key:"redrawThematicFeatures",value:function(e){}},{key:"on",value:function(e,t,r){return this.renderer?this.renderer.on(e,t):this.map.on(e,t),this}},{key:"off",value:function(e,t,r){return this.renderer?this.renderer.un(e,t):this.map.off(e,t),this}},{key:"addTFEvents",value:function(){for(var e=this.TFEvents,t=e.length,r=0;r<t;r++)this.renderer.on(e[r][0],e[r][1])}},{key:"getLocalXY",value:function(e){var t,r=this.map;if(e instanceof V||e instanceof Cr){var n=r.project(new(o().LngLat)(e.x,e.y));t=[n.x,n.y]}if(e instanceof R){var i=r.project(new(o().LngLat)(e.lon,e.lat));t=[i.x,i.y]}return t}},{key:"toiClientFeature",value:function(e){j.isArray(e)||(e=[e]);for(var t=[],r=0;r<e.length;r++)if(e[r]instanceof Ir)t.push(e[r].toFeature());else if(e[r]instanceof ze)t.push(e[r]);else if(-1!=["FeatureCollection","Feature","Geometry"].indexOf(e[r].type)){var n=new br;t=t.concat(n.read(e[r]))}else{if(!e[r].geometry||!e[r].geometry.parts)throw new Error("features's type is not be supported.");t.push(Lo.fromJson(e[r]).toFeature())}return t}},{key:"toFeature",value:function(e){return this.toiClientFeature(e)}},{key:"moveEndEvent",value:function(){!this.loadWhileAnimating&&this.visibility&&(this.div.style.transform="",this.redrawThematicFeatures(this.map.getBounds()),this._show())}},{key:"moveStartEvent",value:function(){if(!this.loadWhileAnimating&&this.visibility){this.startPitch=this.map.getPitch(),this.startBearing=this.map.getBearing();var e=this.map.project(new(o().LngLat)(0,0));this.startMoveX=e.x,this.startMoveY=e.y}}},{key:"moveEvent",value:function(){if(!this.loadWhileAnimating&&this.visibility){if(!this.rotating&&!this.zooming){0!==this.map.getPitch()&&this._hide(),this.mapContainer.style.perspective=this.map.transform.cameraToCenterDistance+"px";var e=this.map.getPitch()-this.startPitch,t=-this.map.getBearing()+this.startBearing,r=this.map.project(new(o().LngLat)(0,0)),n=r.x-this.startMoveX,i=r.y-this.startMoveY;this.div.style.transform="rotateX("+e+"deg) rotateZ("+t+"deg) translate3d("+n+"px, "+i+"px, 0px)"}}else this.redrawThematicFeatures(this.map.getBounds())}},{key:"zoomStartEvent",value:function(){!this.loadWhileAnimating&&this.visibility&&(this.zooming=!0,this._hide())}},{key:"zoomEndEvent",value:function(){!this.loadWhileAnimating&&this.visibility&&(this.zooming=!1,this._show())}},{key:"rotateStartEvent",value:function(){!this.loadWhileAnimating&&this.visibility&&(this.rotating=!0)}},{key:"rotateEvent",value:function(){if(!this.loadWhileAnimating&&this.visibility){0!==this.map.getPitch()&&this._hide(),this.mapContainer.style.perspective=this.map.transform.cameraToCenterDistance+"px";var e=this.map.getPitch()-this.startPitch,t=-this.map.getBearing()+this.startBearing;this.div.style.transform="rotateX("+e+"deg) rotateZ("+t+"deg)"}}},{key:"rotateEndEvent",value:function(){!this.loadWhileAnimating&&this.visibility&&(this.rotating=!1,this._show())}},{key:"dragEndEvent",value:function(){!this.loadWhileAnimating&&this.visibility&&this._hide()}},{key:"resizeEvent",value:function(){this.mapContainer.style.perspective=this.map.transform.cameraToCenterDistance+"px";var e=this.map.getCanvas();this.div.style.width=e.style.width,this.div.style.height=e.style.height,this.div.width=parseInt(e.width),this.div.height=parseInt(e.height),this.renderer.resize()}},{key:"removeFromMap",value:function(){this.mapContainer.removeChild(this.div),this.removeAllFeatures()}},{key:"moveTo",value:function(e,t){var r=document.getElementById(this.div.id);if(t=void 0===t||t){var n=document.getElementById(e);r&&n&&n.parentNode.insertBefore(r,n)}else{var o=document.getElementById(e);if(r){if(o.nextSibling)return void o.parentNode.insertBefore(r,o.nextSibling);o.parentNode.appendChild(r)}}}},{key:"_hide",value:function(){this.renderer.painter.root.style.display="none"}},{key:"_show",value:function(){this.renderer.painter.root.style.display="block"}}])&&No(t.prototype,r),n&&No(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Bo(e){"@babel/helpers - typeof";return(Bo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Fo(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Go(){return(Go="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Vo(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function zo(e,t){return(zo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Uo(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Vo(e);if(t){var o=Vo(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===Bo(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function Vo(e){return(Vo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Wo=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&zo(e,t)}(a,Do);var t,r,n,i=Uo(a);function a(e,t,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(n=i.call(this,e,r)).chartsSetting=r.chartsSetting||{},n.themeFields=r.themeFields||null,n.overlayWeightField=r.overlayWeightField||null,n.isOverLay=void 0===r.isOverLay||r.isOverLay,n.charts=r.charts||[],n.cache=r.cache||{},n.chartsType=t,n}return t=a,(r=[{key:"setChartsType",value:function(e){this.chartsType=e,this.redraw()}},{key:"addFeatures",value:function(e){!1!==o().Evented.prototype.fire("beforefeaturesadded",{features:e})&&(this.features=this.toiClientFeature(e),this.renderer&&this.redrawThematicFeatures(this.map.getBounds()))}},{key:"redrawThematicFeatures",value:function(){this.clearCache(),this.renderer.clearAll();for(var e=this.features,t=0,r=e.length;t<r;t++){var n=e[t],o=this.cache,i=n.id;if(!o[i]){o[i]=i;var a=this.createThematicFeature(n);a&&this.overlayWeightField&&n.attributes[this.overlayWeightField]&&!isNaN(n.attributes[this.overlayWeightField])&&(a.__overlayWeight=n.attributes[this.overlayWeightField]),a&&this.charts.push(a)}}this.drawCharts()}},{key:"createThematicFeature",value:function(e){var t;return Tr[this.chartsType]&&this.themeFields&&this.chartsSetting&&(t=new Tr[this.chartsType](e,this,this.themeFields,this.chartsSetting)),!!t&&(t.assembleShapes(),t)}},{key:"drawCharts",value:function(){if(this.renderer){var e=this.charts;if(this.overlayWeightField&&e.sort(function(e,t){return void 0===e.__overlayWeight&&void 0===t.__overlayWeight?0:void 0!==e.__overlayWeight&&void 0===t.__overlayWeight?-1:void 0===e.__overlayWeight&&void 0!==t.__overlayWeight?1:void 0!==e.__overlayWeight&&void 0!==t.__overlayWeight?parseFloat(e.__overlayWeight)<parseFloat(t.__overlayWeight)?1:-1:0}),this.isOverLay)for(var t=[],r=0,n=e.length;r<n;r++){var o=e[r],i=o.resetLocation(),a=o.chartBounds,s=[{x:a.left,y:a.top},{x:a.left,y:a.bottom},{x:a.right,y:a.bottom},{x:a.right,y:a.top},{x:a.left,y:a.top}],u=!1;if(0!==r)for(var l=0;l<t.length;l++)if(this.isQuadrilateralOverLap(s,t[l])){u=!0;break}if(!u){t.push(s);for(var c=o.shapes,f=0,h=c.length;f<h;f++)c[f].refOriginalPosition=i,this.renderer.addShape(c[f])}}else for(var p=0,d=e.length;p<d;p++)for(var y=e[p],v=y.resetLocation(),g=y.shapes,m=0,b=g.length;m<b;m++)g[m].refOriginalPosition=v,this.renderer.addShape(g[m]);this.renderer.render()}}},{key:"getShapesByFeatureID",value:function(e){var t=[],r=this.renderer.getAllShapes();if(!e)return r;for(var n=0,o=r.length;n<o;n++){var i=r[n];i.refDataID&&e===i.refDataID&&t.push(i)}return t}},{key:"isQuadrilateralOverLap",value:function(e,t){var r=e.length,n=t.length;if(5!==r||5!==n)return null;for(var o=!1,i=0;i<r;i++)if(this.isPointInPoly(e[i],t)){o=!0;break}for(var a=0;a<n;a++)if(this.isPointInPoly(t[a],e)){o=!0;break}for(var s=0;s<r-1&&!o;s++)for(var u=0;u<n-1;u++){if("SuperMap.Geometry.Point"===j.lineIntersection(e[s],e[s+1],t[u],t[u+1]).CLASS_NAME){o=!0;break}}return o}},{key:"isPointInPoly",value:function(e,t){for(var r=!1,n=-1,o=t.length,i=o-1;++n<o;i=n)(t[n].y<=e.y&&e.y<t[i].y||t[i].y<=e.y&&e.y<t[n].y)&&e.x<(t[i].x-t[n].x)*(e.y-t[n].y)/(t[i].y-t[n].y)+t[n].x&&(r=!r);return r}},{key:"isChartInMap",value:function(e,t){for(var r=e,n=!1,o=0,i=t.length;o<i;o++){var a=t[o];if(a.x>=r.left&&a.x<=r.right&&a.y>=r.top&&a.y<=r.bottom){n=!0;break}}return n}},{key:"clearCache",value:function(){this.cache={},this.charts=[]}},{key:"removeFeatures",value:function(e){this.clearCache(),Go(Vo(a.prototype),"removeFeatures",this).call(this,e)}},{key:"removeAllFeatures",value:function(){this.clearCache(),Go(Vo(a.prototype),"removeAllFeatures",this).call(this)}},{key:"redraw",value:function(){return this.clearCache(),!!this.renderer&&(this.redrawThematicFeatures(this.map.getBounds()),!0)}},{key:"clear",value:function(){this.renderer&&(this.renderer.clearAll(),this.renderer.refresh()),this.removeAllFeatures(),this.clearCache()}}])&&Fo(t.prototype,r),n&&Fo(t,n),Object.defineProperty(t,"prototype",{writable:!1}),a}();function Yo(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Ho=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.refOriginalPosition=[0,0],this.refDataID=null,this.isHoverByRefDataID=!1,this.refDataHoverGroup=null,this.dataInfo=null,this.clickable=!0,this.hoverable=!0,this.style=null,this.highlightStyle={},this.CLASS_NAME="SuperMap.Feature.ShapeParameters"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){this.refOriginalPosition=null,this.refDataID=null,this.isHoverByRefDataID=null,this.refDataHoverGroup=null,this.dataInfo=null,this.clickable=null,this.hoverable=null,this.style=null,this.highlightStyle=null}}])&&Yo(t.prototype,r),n&&Yo(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Xo(e){"@babel/helpers - typeof";return(Xo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qo(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Jo(){return(Jo="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Qo(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function Zo(e,t){return(Zo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Ko(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Qo(e);if(t){var o=Qo(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===Xo(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function Qo(e){return(Qo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var $o=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Zo(e,t)}(i,Ho);var t,r,n,o=Ko(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t)).x=isNaN(e)?0:e,r.y=isNaN(t)?0:t,r.r=6,r.CLASS_NAME="SuperMap.Feature.ShapeParameters.Point",r}return t=i,(r=[{key:"destroy",value:function(){this.x=null,this.y=null,this.r=null,Jo(Qo(i.prototype),"destroy",this).call(this)}}])&&qo(t.prototype,r),n&&qo(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function ei(e){"@babel/helpers - typeof";return(ei="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ti(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ri(){return(ri="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ii(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function ni(e,t){return(ni=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function oi(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=ii(e);if(t){var o=ii(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===ei(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function ii(e){return(ii=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ai=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ni(e,t)}(i,Ho);var t,r,n,o=oi(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).pointList=e,t.CLASS_NAME="SuperMap.Feature.ShapeParameters.Line",t}return t=i,(r=[{key:"destroy",value:function(){this.pointList=null,ri(ii(i.prototype),"destroy",this).call(this)}}])&&ti(t.prototype,r),n&&ti(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function si(e){"@babel/helpers - typeof";return(si="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ui(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function li(){return(li="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=hi(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function ci(e,t){return(ci=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function fi(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=hi(e);if(t){var o=hi(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===si(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function hi(e){return(hi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var pi=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ci(e,t)}(i,Ho);var t,r,n,o=fi(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).pointList=e,t.holePolygonPointLists=null,t.CLASS_NAME="SuperMap.Feature.ShapeParameters.Polygon",t}return t=i,(r=[{key:"destroy",value:function(){this.pointList=null,this.holePolygonPointLists=null,li(hi(i.prototype),"destroy",this).call(this)}}])&&ui(t.prototype,r),n&&ui(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function di(e){"@babel/helpers - typeof";return(di="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yi(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function vi(){return(vi="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=bi(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function gi(e,t){return(gi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function mi(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=bi(e);if(t){var o=bi(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===di(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function bi(e){return(bi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var wi=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&gi(e,t)}(i,Ho);var t,r,n,o=mi(i);function i(e,t,r,n){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(a=o.call(this,e,t,r,n)).x=isNaN(e)?0:e,a.y=isNaN(e)?0:t,a.width=isNaN(r)?0:r,a.height=isNaN(n)?0:n,a.CLASS_NAME="SuperMap.Feature.ShapeParameters.Rectangle",a}return t=i,(r=[{key:"destroy",value:function(){this.x=null,this.y=null,this.width=null,this.height=null,vi(bi(i.prototype),"destroy",this).call(this)}}])&&yi(t.prototype,r),n&&yi(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function _i(e){"@babel/helpers - typeof";return(_i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xi(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Si(){return(Si="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ei(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function Oi(e,t){return(Oi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Pi(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Ei(e);if(t){var o=Ei(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===_i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function Ei(e){return(Ei=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ki=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Oi(e,t)}(i,Ho);var t,r,n,o=Pi(i);function i(e,t,r,n,a,s,u){var l;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(l=o.call(this,e,t,r,n,a,s,u)).x=isNaN(e)?0:e,l.y=isNaN(t)?0:t,l.r=isNaN(r)?0:r,l.startAngle=isNaN(n)?0:n,l.endAngle=isNaN(a)?0:a,l.r0=isNaN(s)?0:s,l.clockWise=u,l.CLASS_NAME="SuperMap.Feature.ShapeParameters.Sector",l}return t=i,(r=[{key:"destroy",value:function(){this.x=null,this.y=null,this.r=null,this.startAngle=null,this.endAngle=null,this.r0=null,this.clockWise=null,Si(Ei(i.prototype),"destroy",this).call(this)}}])&&xi(t.prototype,r),n&&xi(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Mi(e){"@babel/helpers - typeof";return(Mi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ci(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ji(){return(ji="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ii(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function Ti(e,t){return(Ti=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Ai(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Ii(e);if(t){var o=Ii(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===Mi(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function Ii(e){return(Ii=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ri=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ti(e,t)}(i,Ho);var t,r,n,o=Ai(i);function i(e,t,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t,r)).x=e,n.y=t,n.text=r,n.CLASS_NAME="SuperMap.Feature.ShapeParameters.Label",n}return t=i,(r=[{key:"destroy",value:function(){this.x=null,this.y=null,this.text=null,ji(Ii(i.prototype),"destroy",this).call(this)}}])&&Ci(t.prototype,r),n&&Ci(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Li(e){"@babel/helpers - typeof";return(Li="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ni(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Di(){return(Di="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Gi(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function Bi(e,t){return(Bi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Fi(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Gi(e);if(t){var o=Gi(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===Li(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function Gi(e){return(Gi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var zi=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Bi(e,t)}(i,Ho);var t,r,n,o=Fi(i);function i(e,t,r,n,a,s,u,l,c){var f;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(f=o.call(this,e,t,r,n,a,s,u,l,c)).x=e,f.y=t,f.image=r,f.width=n,f.height=a,f.sx=s,f.sy=u,f.sWidth=l,f.sHeight=c,f.CLASS_NAME="SuperMap.Feature.ShapeParameters.Image",f}return t=i,(r=[{key:"destroy",value:function(){this.x=null,this.y=null,this.image=null,this.width=null,this.height=null,this.sx=null,this.sy=null,this.sWidth=null,this.sHeight=null,Di(Gi(i.prototype),"destroy",this).call(this)}}])&&Ni(t.prototype,r),n&&Ni(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Ui(e){"@babel/helpers - typeof";return(Ui="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Vi(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Wi(){return(Wi="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Xi(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function Yi(e,t){return(Yi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Hi(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Xi(e);if(t){var o=Xi(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===Ui(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function Xi(e){return(Xi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var qi=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Yi(e,t)}(i,Ho);var t,r,n,o=Hi(i);function i(e,t,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t,r)).x=isNaN(e)?0:e,n.y=isNaN(t)?0:t,n.r=isNaN(r)?0:r,n.CLASS_NAME="SuperMap.Feature.ShapeParameters.Circle",n}return t=i,(r=[{key:"destroy",value:function(){this.x=null,this.y=null,this.r=null,Wi(Xi(i.prototype),"destroy",this).call(this)}}])&&Vi(t.prototype,r),n&&Vi(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Ji(e){"@babel/helpers - typeof";return(Ji="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Zi(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ki(){return(Ki="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ea(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function Qi(e,t){return(Qi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function $i(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=ea(e);if(t){var o=ea(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===Ji(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function ea(e){return(ea=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ta=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Qi(e,t)}(i,Yn);var t,r,n,o=$i(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).type="smicpoint",t.refOriginalPosition&&2===t.refOriginalPosition.length||(t.refOriginalPosition=[0,0]),t.CLASS_NAME="SuperMap.LevelRenderer.Shape.SmicPoint",t}return t=i,(r=[{key:"destroy",value:function(){this.type=null,Ki(ea(i.prototype),"destroy",this).call(this)}},{key:"buildPath",value:function(e,t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var r=this.refOriginalPosition;e.arc(t.x+r[0],t.y+r[1],t.r,0,2*Math.PI,!0)}},{key:"getRect",value:function(e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var t,r=this.refOriginalPosition;return e.__rect?e.__rect:(t="stroke"==e.brushType||"fill"==e.brushType?e.lineWidth||1:0,e.__rect={x:Math.round(e.x+r[0]-e.r-t/2),y:Math.round(e.y+r[1]-e.r-t/2),width:2*e.r+t,height:2*e.r+t},e.__rect)}}])&&Zi(t.prototype,r),n&&Zi(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function ra(e){"@babel/helpers - typeof";return(ra="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function na(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function oa(){return(oa="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=sa(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function ia(e,t){return(ia=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function aa(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=sa(e);if(t){var o=sa(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===ra(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function sa(e){return(sa=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ua=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ia(e,t)}(i,Yn);var t,r,n,o=aa(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).type="smictext",t.refOriginalPosition&&2===t.refOriginalPosition.length||(t.refOriginalPosition=[0,0]),t.CLASS_NAME="SuperMap.LevelRenderer.Shape.SmicText",t}return t=i,(r=[{key:"destroy",value:function(){this.type=null,oa(sa(i.prototype),"destroy",this).call(this)}},{key:"brush",value:function(e,t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var r=this.refOriginalPosition,n=this.style;if(t&&(n=this.getHighlightStyle(n,this.highlightStyle||{})),void 0!==n.text&&!1!==n.text){e.save(),this.doClip(e),this.setContext(e,n),this.setTransform(e),n.textFont&&(e.font=n.textFont),e.textAlign=n.textAlign||"start",e.textBaseline=n.textBaseline||"middle";var o,i=(n.text+"").split("\n"),a=hn.Util_area.getTextHeight("ZH",n.textFont),s=this.getRectNoRotation(n),u=n.x+r[0];o="top"==n.textBaseline?s.y:"bottom"==n.textBaseline?s.y+a:s.y+a/2;for(var l=n.x+r[0],c=n.y+r[1],f=0,h=i.length;f<h;f++){switch(n.labelRect&&(e.fillRect(s.x-2,s.y,s.width+4,s.height),e.fillStyle=n.strokeColor,e.strokeRect(s.x-2,s.y,s.width+4,s.height),e.fillStyle=n.textColor),n.brushType){case"stroke":this.setCtxGlobalAlpha(e,"stroke",n),n.textRotation&&0!==n.textRotation?(e.save(),e.translate(l,c),e.rotate(n.textRotation*Math.PI/180),"top"==n.textBaseline?n.maxWidth?e.strokeText(i[f],0,a*f,n.maxWidth):e.strokeText(i[f],0,a*f):"bottom"==n.textBaseline?n.maxWidth?e.strokeText(i[f],0,a*(f+1)-s.height,n.maxWidth):e.strokeText(i[f],0,a*(f+1)-s.height):n.maxWidth?e.strokeText(i[f],0,a*(f+1)-s.height/2-a/2,n.maxWidth):e.strokeText(i[f],0,a*(f+1)-s.height/2-a/2),e.restore()):n.maxWidth?e.strokeText(i[f],u,o,n.maxWidth):e.strokeText(i[f],u,o),this.setCtxGlobalAlpha(e,"reset",n);break;case"both":n.textRotation&&0!==n.textRotation?(e.save(),e.translate(l,c),e.rotate(n.textRotation*Math.PI/180),"top"==n.textBaseline?n.maxWidth?(this.setCtxGlobalAlpha(e,"fill",n),e.fillText(i[f],0,a*f,n.maxWidth),this.setCtxGlobalAlpha(e,"reset",n),this.setCtxGlobalAlpha(e,"stroke",n),e.strokeText(i[f],0,a*f,n.maxWidth),this.setCtxGlobalAlpha(e,"reset",n)):(this.setCtxGlobalAlpha(e,"fill",n),e.fillText(i[f],0,a*f),this.setCtxGlobalAlpha(e,"reset",n),this.setCtxGlobalAlpha(e,"stroke",n),e.strokeText(i[f],0,a*f),this.setCtxGlobalAlpha(e,"reset",n)):"bottom"==n.textBaseline?n.maxWidth?(this.setCtxGlobalAlpha(e,"fill",n),e.fillText(i[f],0,a*(f+1)-s.height,n.maxWidth),this.setCtxGlobalAlpha(e,"reset",n),this.setCtxGlobalAlpha(e,"stroke",n),e.strokeText(i[f],0,a*(f+1)-s.height,n.maxWidth),this.setCtxGlobalAlpha(e,"reset",n)):(this.setCtxGlobalAlpha(e,"fill",n),e.fillText(i[f],0,a*(f+1)-s.height),this.setCtxGlobalAlpha(e,"reset",n),this.setCtxGlobalAlpha(e,"stroke",n),e.strokeText(i[f],0,a*(f+1)-s.height),this.setCtxGlobalAlpha(e,"reset",n)):n.maxWidth?(this.setCtxGlobalAlpha(e,"fill",n),e.fillText(i[f],0,a*(f+1)-s.height/2-a/2,n.maxWidth),this.setCtxGlobalAlpha(e,"reset",n),this.setCtxGlobalAlpha(e,"stroke",n),e.strokeText(i[f],0,a*(f+1)-s.height/2-a/2,n.maxWidth),this.setCtxGlobalAlpha(e,"reset",n)):(this.setCtxGlobalAlpha(e,"fill",n),e.fillText(i[f],0,a*(f+1)-s.height/2-a/2),this.setCtxGlobalAlpha(e,"reset",n),this.setCtxGlobalAlpha(e,"stroke",n),e.strokeText(i[f],0,a*(f+1)-s.height/2-a/2),this.setCtxGlobalAlpha(e,"reset",n)),e.restore()):n.maxWidth?(this.setCtxGlobalAlpha(e,"fill",n),e.fillText(i[f],u,o,n.maxWidth),this.setCtxGlobalAlpha(e,"reset",n),this.setCtxGlobalAlpha(e,"stroke",n),e.strokeText(i[f],u,o,n.maxWidth),this.setCtxGlobalAlpha(e,"reset",n)):(this.setCtxGlobalAlpha(e,"fill",n),e.fillText(i[f],u,o),this.setCtxGlobalAlpha(e,"reset",n),this.setCtxGlobalAlpha(e,"stroke",n),e.strokeText(i[f],u,o),this.setCtxGlobalAlpha(e,"reset",n));break;default:this.setCtxGlobalAlpha(e,"fill",n),n.textRotation&&0!==n.textRotation?(e.save(),e.translate(l,c),e.rotate(n.textRotation*Math.PI/180),"top"==n.textBaseline?n.maxWidth?e.fillText(i[f],0,a*f,n.maxWidth):e.fillText(i[f],0,a*f):"bottom"==n.textBaseline?n.maxWidth?e.fillText(i[f],0,a*(f+1)-s.height,n.maxWidth):e.fillText(i[f],0,a*(f+1)-s.height):n.maxWidth?e.fillText(i[f],0,a*(f+1)-s.height/2-a/2,n.maxWidth):e.fillText(i[f],0,a*(f+1)-s.height/2-a/2),e.restore()):n.maxWidth?e.fillText(i[f],u,o,n.maxWidth):e.fillText(i[f],u,o),this.setCtxGlobalAlpha(e,"reset",n)}o+=a}e.restore()}}},{key:"getRect",value:function(e){if(e.__rect)return e.__rect;for(var t,r,n,o,i=this.getTextBackground(e,!0),a=0,s=i.length;a<s;a++){var u=i[a];0==a?(t=u[0],n=u[0],r=u[1],o=u[1]):(u[0]<t&&(t=u[0]),u[0]>n&&(n=u[0]),u[1]<r&&(r=u[1]),u[1]>o&&(o=u[1]))}return e.__rect={x:t,y:r,width:n-t,height:o-r},e.__rect}},{key:"getRectNoRotation",value:function(e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var t,r=this.refOriginalPosition,n=hn.Util_area.getTextHeight("ZH",e.textFont),o=hn.Util_area.getTextWidth(e.text,e.textFont),i=hn.Util_area.getTextHeight(e.text,e.textFont),a=e.x+r[0];"end"==e.textAlign||"right"==e.textAlign?a-=o:"center"==e.textAlign&&(a-=o/2),t="top"==e.textBaseline?e.y+r[1]:"bottom"==e.textBaseline?e.y+r[1]-i:e.y+r[1]-i/2;var s,u=!1;if(e.maxWidth){var l=parseInt(e.maxWidth);l<o&&(s=o,u=!0,o=l),a=e.x+r[0],"end"==e.textAlign||"right"==e.textAlign?a-=o:"center"==e.textAlign&&(a-=o/2)}e.textFont&&(e.textFont.toLowerCase().indexOf("italic")>-1&&(o+=!0===u?n/3*(o/s):n/3));return{x:a,y:t,width:o,height:i}}},{key:"getTextBackground",value:function(e,t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var r=this.refOriginalPosition;if(!t&&e.__textBackground)return e.__textBackground;var n=this.getRectNoRotation(e),o=e.x+r[0],i=e.y+r[1],a=[];if(e.textRotation&&0!==e.textRotation){var s=e.textRotation,u=this.getRotatedLocation(n.x,n.y,o,i,s),l=this.getRotatedLocation(n.x+n.width,n.y,o,i,s),c=this.getRotatedLocation(n.x+n.width,n.y+n.height,o,i,s),f=this.getRotatedLocation(n.x,n.y+n.height,o,i,s);a.push(u),a.push(l),a.push(c),a.push(f)}else{var h=[n.x,n.y],p=[n.x+n.width,n.y],d=[n.x+n.width,n.y+n.height],y=[n.x,n.y+n.height];a.push(h),a.push(p),a.push(d),a.push(y)}return e.__textBackground=a,e.__textBackground}},{key:"getRotatedLocation",value:function(e,t,r,n,o){var i,a,s=new Array;return t=-t,n=-n,o=-o,i=(e-r)*Math.cos(o/180*Math.PI)-(t-n)*Math.sin(o/180*Math.PI)+r,a=(e-r)*Math.sin(o/180*Math.PI)+(t-n)*Math.cos(o/180*Math.PI)+n,s[0]=i,s[1]=-a,s}}])&&na(t.prototype,r),n&&na(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function la(e){"@babel/helpers - typeof";return(la="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ca(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function fa(){return(fa="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=da(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function ha(e,t){return(ha=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function pa(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=da(e);if(t){var o=da(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===la(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function da(e){return(da=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ya=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ha(e,t)}(i,Yn);var t,r,n,o=pa(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).type="smiccircle",t.refOriginalPosition&&2===t.refOriginalPosition.length||(t.refOriginalPosition=[0,0]),t.CLASS_NAME="SuperMap.LevelRenderer.Shape.SmicCircle",t}return t=i,(r=[{key:"destroy",value:function(){this.type=null,fa(da(i.prototype),"destroy",this).call(this)}},{key:"buildPath",value:function(e,t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var r=this.refOriginalPosition,n=t.x+r[0],o=t.y+r[1];return e.moveTo(n+t.r,o),e.arc(n,o,t.r,0,2*Math.PI,!0),!0}},{key:"getRect",value:function(e){if(e.__rect)return e.__rect;this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var t,r=this.refOriginalPosition,n=e.x+r[0],o=e.y+r[1],i=e.r;return t="stroke"==e.brushType||"fill"==e.brushType?e.lineWidth||1:0,e.__rect={x:Math.round(n-i-t/2),y:Math.round(o-i-t/2),width:2*i+t,height:2*i+t},e.__rect}}])&&ca(t.prototype,r),n&&ca(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function va(e){"@babel/helpers - typeof";return(va="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ga(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ma(){return(ma="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_a(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function ba(e,t){return(ba=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function wa(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=_a(e);if(t){var o=_a(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===va(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function _a(e){return(_a=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var xa=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ba(e,t)}(i,Yn);var t,r,n,o=wa(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).type="smicpolygon",t.holePolygonPointLists=null,t.refOriginalPosition&&2===t.refOriginalPosition.length||(t.refOriginalPosition=[0,0]),t.CLASS_NAME="SuperMap.LevelRenderer.Shape.SmicPolygon",t}return t=i,(r=[{key:"destroy",value:function(){this.type=null,this.holePolygonPointLists=null,ma(_a(i.prototype),"destroy",this).call(this)}},{key:"brush",value:function(e,t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var r=this.style;t&&(r=this.getHighlightStyle(r,this.highlightStyle||{})),e.save(),this.setContext(e,r),this.setTransform(e);var n=!1;"fill"!=r.brushType&&"both"!=r.brushType&&void 0!==r.brushType||(e.beginPath(),"dashed"==r.lineType||"dotted"==r.lineType||"dot"==r.lineType||"dash"==r.lineType||"dashdot"==r.lineType||"longdash"==r.lineType||"longdashdot"==r.lineType?this.buildPath(e,{lineType:"solid",lineWidth:r.lineWidth,pointList:r.pointList}):(this.buildPath(e,r),n=!0),e.closePath(),this.setCtxGlobalAlpha(e,"fill",r),e.fill(),this.setCtxGlobalAlpha(e,"reset",r)),r.lineWidth>0&&("stroke"==r.brushType||"both"==r.brushType)&&(n||(e.beginPath(),this.buildPath(e,r)),this.setCtxGlobalAlpha(e,"stroke",r),e.stroke(),this.setCtxGlobalAlpha(e,"reset",r)),this.drawText(e,r,this.style);var o=j.cloneObject(r);if(o.pointList&&this.holePolygonPointLists&&this.holePolygonPointLists.length>0)for(var i=this.holePolygonPointLists,a=i.length,s=0;s<a;s++){var u=i[s];o.pointList=u,e.globalCompositeOperation="destination-out",n=!1,"fill"!=o.brushType&&"both"!=o.brushType&&void 0!==o.brushType||(e.beginPath(),"dashed"==o.lineType||"dotted"==o.lineType||"dot"==o.lineType||"dash"==o.lineType||"dashdot"==o.lineType||"longdash"==o.lineType||"longdashdot"==o.lineType?this.buildPath(e,{lineType:"solid",lineWidth:o.lineWidth,pointList:o.pointList}):(this.buildPath(e,o),n=!0),e.closePath(),this.setCtxGlobalAlpha(e,"fill",o),e.fill(),this.setCtxGlobalAlpha(e,"reset",o)),o.lineWidth>0&&("stroke"==o.brushType||"both"==o.brushType)?(n||(e.beginPath(),this.buildPath(e,o)),e.globalCompositeOperation="source-over",this.setCtxGlobalAlpha(e,"stroke",o),e.stroke(),this.setCtxGlobalAlpha(e,"reset",o)):e.globalCompositeOperation="source-over"}e.restore()}},{key:"buildPath",value:function(e,t){t.showShadow&&(e.shadowBlur=t.shadowBlur,e.shadowColor=t.shadowColor,e.shadowOffsetX=t.shadowOffsetX,e.shadowOffsetY=t.shadowOffsetY),this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var r=this.refOriginalPosition,n=t.pointList;if(!(n.length<2))if(t.smooth&&"spline"!==t.smooth){var o,i,a,s=hn.SUtil_smoothBezier(n,t.smooth,!0,t.smoothConstraint,r);e.moveTo(n[0][0]+r[0],n[0][1]+r[1]);for(var u=n.length,l=0;l<u;l++)o=s[2*l],i=s[2*l+1],a=[n[(l+1)%u][0]+r[0],n[(l+1)%u][1]+r[1]],e.bezierCurveTo(o[0],o[1],i[0],i[1],a[0],a[1])}else if("spline"===t.smooth&&(n=hn.SUtil_smoothSpline(n,!0,null,r)),t.lineType&&"solid"!=t.lineType){if("dashed"===t.lineType||"dotted"===t.lineType||"dot"===t.lineType||"dash"===t.lineType||"longdash"===t.lineType){var c=t._dashLength||(t.lineWidth||1)*("dashed"==t.lineType?5:1);t._dashLength=c;var f=t.lineWidth||1,h=f,p=f;"dashed"===t.lineType&&(h*=5,p*=5,t.lineCap&&"butt"!==t.lineCap&&(h-=f,p+=f)),"dotted"===t.lineType&&t.lineCap&&"butt"!==t.lineCap&&(h=1,p+=f),"dot"===t.lineType&&(p*=4,t.lineCap&&"butt"!==t.lineCap&&(h=1,p+=f)),"dash"===t.lineType&&(h*=4,p*=4,t.lineCap&&"butt"!==t.lineCap&&(h-=f,p+=f)),"longdash"===t.lineType&&(h*=8,p*=4,t.lineCap&&"butt"!==t.lineCap&&(h-=f,p+=f)),e.moveTo(n[0][0]+r[0],n[0][1]+r[1]);for(var d=1;d<n.length;d++)hn.SUtil_dashedLineTo(e,n[d-1][0]+r[0],n[d-1][1]+r[1],n[d][0]+r[0],n[d][1]+r[1],f,[h,p]);hn.SUtil_dashedLineTo(e,n[n.length-1][0]+r[0],n[n.length-1][1]+r[1],n[0][0]+r[0],n[0][1]+r[1],f,[h,p])}else if("dashdot"===t.lineType||"longdashdot"===t.lineType){var y=t._dashLength||(t.lineWidth||1)*("dashed"==t.lineType?5:1);t._dashLength=y;var v=t.lineWidth||1,g=v,m=v,b=v,w=v;"dashdot"===t.lineType&&(g*=4,m*=4,w*=4,t.lineCap&&"butt"!==t.lineCap&&(g-=v,m+=v,b=1,w+=v)),"longdashdot"===t.lineType&&(g*=8,m*=4,w*=4,t.lineCap&&"butt"!==t.lineCap&&(g-=v,m+=v,b=1,w+=v)),e.moveTo(n[0][0]+r[0],n[0][1]+r[1]);for(var _=1;_<n.length;_++)hn.SUtil_dashedLineTo(e,n[_-1][0]+r[0],n[_-1][1]+r[1],n[_][0]+r[0],n[_][1]+r[1],v,[g,m,b,w]);hn.SUtil_dashedLineTo(e,n[n.length-1][0]+r[0],n[n.length-1][1]+r[1],n[0][0]+r[0],n[0][1]+r[1],v,[g,m,b,w])}}else{e.moveTo(n[0][0]+r[0],n[0][1]+r[1]);for(var x=1;x<n.length;x++)e.lineTo(n[x][0]+r[0],n[x][1]+r[1]);e.lineTo(n[0][0]+r[0],n[0][1]+r[1])}}},{key:"getRect",value:function(e,t){var r;if(t?r=t:(this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]),r=this.refOriginalPosition),e.__rect)return e.__rect;for(var n,o=Number.MAX_VALUE,i=Number.MIN_VALUE,a=Number.MAX_VALUE,s=Number.MIN_VALUE,u=e.pointList,l=0,c=u.length;l<c;l++)u[l][0]+r[0]<o&&(o=u[l][0]+r[0]),u[l][0]+r[0]>i&&(i=u[l][0]+r[0]),u[l][1]+r[1]<a&&(a=u[l][1]+r[1]),u[l][1]+r[1]>s&&(s=u[l][1]+r[1]);return n="stroke"==e.brushType||"fill"==e.brushType?e.lineWidth||1:0,e.__rect={x:Math.round(o-n/2),y:Math.round(a-n/2),width:i-o+n,height:s-a+n},e.__rect}}])&&ga(t.prototype,r),n&&ga(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Sa(e){"@babel/helpers - typeof";return(Sa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Oa(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Pa(){return(Pa="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ma(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function Ea(e,t){return(Ea=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function ka(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Ma(e);if(t){var o=Ma(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===Sa(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function Ma(e){return(Ma=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ca=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ea(e,t)}(i,Yn);var t,r,n,o=ka(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).brushTypeOnly="stroke",t.textPosition="end",t.type="smicbroken-line",t.refOriginalPosition&&2===t.refOriginalPosition.length||(t.refOriginalPosition=[0,0]),t.CLASS_NAME="SuperMap.LevelRenderer.Shape.SmicBrokenLine",t}return t=i,(r=[{key:"destroy",value:function(){this.brushTypeOnly=null,this.textPosition=null,this.type=null,Pa(Ma(i.prototype),"destroy",this).call(this)}},{key:"buildPath",value:function(e,t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var r=this.refOriginalPosition,n=t.pointList;if(!(n.length<2)){var o=Math.min(t.pointList.length,Math.round(t.pointListLength||t.pointList.length));if(t.smooth&&"spline"!==t.smooth){var i,a,s,u=hn.SUtil_smoothBezier(n,t.smooth,!1,t.smoothConstraint,r);e.moveTo(n[0][0]+r[0],n[0][1]+r[1]);for(var l=0;l<o-1;l++)i=u[2*l],a=u[2*l+1],s=[n[l+1][0]+r[0],n[l+1][1]+r[1]],e.bezierCurveTo(i[0],i[1],a[0],a[1],s[0],s[1])}else if("spline"===t.smooth&&(o=(n=hn.SUtil_smoothSpline(n,null,null,r)).length),t.lineType&&"solid"!==t.lineType){if("dashed"===t.lineType||"dotted"===t.lineType||"dot"===t.lineType||"dash"===t.lineType||"longdash"===t.lineType){var c=t.lineWidth||1,f=c,h=c;"dashed"===t.lineType&&(f*=5,h*=5,t.lineCap&&"butt"!==t.lineCap&&(f-=c,h+=c)),"dotted"===t.lineType&&t.lineCap&&"butt"!==t.lineCap&&(f=1,h+=c),"dot"===t.lineType&&(h*=4,t.lineCap&&"butt"!==t.lineCap&&(f=1,h+=c)),"dash"===t.lineType&&(f*=4,h*=4,t.lineCap&&"butt"!==t.lineCap&&(f-=c,h+=c)),"longdash"===t.lineType&&(f*=8,h*=4,t.lineCap&&"butt"!==t.lineCap&&(f-=c,h+=c)),e.moveTo(n[0][0]+r[0],n[0][1]+r[1]);for(var p=1;p<o;p++)hn.SUtil_dashedLineTo(e,n[p-1][0]+r[0],n[p-1][1]+r[1],n[p][0]+r[0],n[p][1]+r[1],c,[f,h])}else if("dashdot"===t.lineType||"longdashdot"===t.lineType){var d=t.lineWidth||1,y=d,v=d,g=d,m=d;"dashdot"===t.lineType&&(y*=4,v*=4,m*=4,t.lineCap&&"butt"!==t.lineCap&&(y-=d,v+=d,g=1,m+=d)),"longdashdot"===t.lineType&&(y*=8,v*=4,m*=4,t.lineCap&&"butt"!==t.lineCap&&(y-=d,v+=d,g=1,m+=d)),d=(t.lineWidth||1)*("dashed"===t.lineType?5:1),e.moveTo(n[0][0]+r[0],n[0][1]+r[1]);for(var b=1;b<o;b++)hn.SUtil_dashedLineTo(e,n[b-1][0]+r[0],n[b-1][1]+r[1],n[b][0]+r[0],n[b][1]+r[1],d,[y,v,g,m])}}else{e.moveTo(n[0][0]+r[0],n[0][1]+r[1]);for(var w=1;w<o;w++)e.lineTo(n[w][0]+r[0],n[w][1]+r[1])}}}},{key:"getRect",value:function(e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var t=this.refOriginalPosition;return xa.prototype.getRect.apply(this,[e,t])}}])&&Oa(t.prototype,r),n&&Oa(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function ja(e){"@babel/helpers - typeof";return(ja="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ta(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Aa(){return(Aa="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=La(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function Ia(e,t){return(Ia=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Ra(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=La(e);if(t){var o=La(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===ja(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function La(e){return(La=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Na=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ia(e,t)}(i,Yn);var t,r,n,o=Ra(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).type="smicrectangle",t.refOriginalPosition&&2===t.refOriginalPosition.length||(t.refOriginalPosition=[0,0]),t.CLASS_NAME="SuperMap.LevelRenderer.Shape.SmicRectangle",t}return t=i,(r=[{key:"destroy",value:function(){this.type=null,Aa(La(i.prototype),"destroy",this).call(this)}},{key:"_buildRadiusPath",value:function(e,t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var r,n,o,i,a,s=this.refOriginalPosition,u=t.x+s[0],l=t.y+s[1],c=t.width,f=t.height,h=t.radius;"number"==typeof h?r=n=o=i=h:h instanceof Array?1===h.length?r=n=o=i=h[0]:2===h.length?(r=o=h[0],n=i=h[1]):3===h.length?(r=h[0],n=i=h[1],o=h[2]):(r=h[0],n=h[1],o=h[2],i=h[3]):r=n=o=i=0,r+n>c&&(r*=c/(a=r+n),n*=c/a),o+i>c&&(o*=c/(a=o+i),i*=c/a),n+o>f&&(n*=f/(a=n+o),o*=f/a),r+i>f&&(r*=f/(a=r+i),i*=f/a),e.moveTo(u+r,l),e.lineTo(u+c-n,l),0!==n&&e.quadraticCurveTo(u+c,l,u+c,l+n),e.lineTo(u+c,l+f-o),0!==o&&e.quadraticCurveTo(u+c,l+f,u+c-o,l+f),e.lineTo(u+i,l+f),0!==i&&e.quadraticCurveTo(u,l+f,u,l+f-i),e.lineTo(u,l+r),0!==r&&e.quadraticCurveTo(u,l,u+r,l)}},{key:"buildPath",value:function(e,t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var r=this.refOriginalPosition;t.radius?this._buildRadiusPath(e,t):(e.moveTo(t.x+r[0],t.y+r[1]),e.lineTo(t.x+r[0]+t.width,t.y+r[1]),e.lineTo(t.x+r[0]+t.width,t.y+r[1]+t.height),e.lineTo(t.x+r[0],t.y+r[1]+t.height),e.lineTo(t.x+r[0],t.y+r[1])),e.closePath()}},{key:"getRect",value:function(e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var t,r=this.refOriginalPosition;return e.__rect?e.__rect:(t="stroke"==e.brushType||"fill"==e.brushType?e.lineWidth||1:0,e.__rect={x:Math.round(e.x+r[0]-t/2),y:Math.round(e.y+r[1]-t/2),width:e.width+t,height:e.height+t},e.__rect)}}])&&Ta(t.prototype,r),n&&Ta(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Da(e){"@babel/helpers - typeof";return(Da="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ba(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Fa(){return(Fa="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ua(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function Ga(e,t){return(Ga=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function za(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Ua(e);if(t){var o=Ua(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===Da(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function Ua(e){return(Ua=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Va=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ga(e,t)}(i,Yn);var t,r,n,o=za(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).type="smicsector",t.refOriginalPosition&&2===t.refOriginalPosition.length||(t.refOriginalPosition=[0,0]),t.CLASS_NAME="SuperMap.LevelRenderer.Shape.SmicSector",t}return t=i,(r=[{key:"destroy",value:function(){this.type=null,Fa(Ua(i.prototype),"destroy",this).call(this)}},{key:"buildPath",value:function(e,t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var r=this.refOriginalPosition,n=t.x+r[0],o=t.y+r[1],i=t.r0||0,a=t.r,s=t.startAngle,u=t.endAngle,l=t.clockWise||!1;s=hn.Util_math.degreeToRadian(s),u=hn.Util_math.degreeToRadian(u),l||(s=-s,u=-u);var c=hn.Util_math.cos(s),f=hn.Util_math.sin(s);e.moveTo(c*i+n,f*i+o),e.lineTo(c*a+n,f*a+o),e.arc(n,o,a,s,u,!l),e.lineTo(hn.Util_math.cos(u)*i+n,hn.Util_math.sin(u)*i+o),0!==i&&e.arc(n,o,i,u,s,l),e.closePath()}},{key:"getRect",value:function(e){if(e.__rect)return e.__rect;this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var t=this.refOriginalPosition,r=hn.Util_vector.create(),n=hn.Util_vector.create(),o=hn.Util_vector.create(),i=hn.Util_vector.create(),a=e.x+t[0],s=e.y+t[1],u=e.r0||0,l=e.r,c=hn.Util_math.degreeToRadian(e.startAngle),f=hn.Util_math.degreeToRadian(e.endAngle),h=e.clockWise;return h||(c=-c,f=-f),u>1?hn.Util_computeBoundingBox.arc(a,s,u,c,f,!h,r,o):(r[0]=o[0]=a,r[1]=o[1]=s),hn.Util_computeBoundingBox.arc(a,s,l,c,f,!h,n,i),hn.Util_vector.min(r,r,n),hn.Util_vector.max(o,o,i),e.__rect={x:r[0],y:r[1],width:o[0]-r[0],height:o[1]-r[1]},e.__rect}}])&&Ba(t.prototype,r),n&&Ba(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Wa(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Ya=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.shapeParameters=t,this.CLASS_NAME="SuperMap.Feature.ShapeFactory"}var t,r,n;return t=e,n=[{key:"transformStyle",value:function(e){var t={},r=["normal","normal","normal","12","arial,sans-serif"],n=[!0,!1];for(var o in e)switch(o){case"fill":n[0]=e[o];break;case"fillColor":t.color=e[o];break;case"stroke":n[1]=e[o];break;case"strokeWidth":t.lineWidth=e[o];break;case"strokeLinecap":t.lineCap=e[o];break;case"strokeLineJoin":t.lineJoin=e[o];break;case"strokeDashstyle":t.lineType=e[o];break;case"pointRadius":t.r=e[o];break;case"label":t.text=e[o];break;case"labelRect":t.labelRect=e[o];break;case"fontColor":t.textColor=e[o];break;case"fontStyle":r[0]=e[o];break;case"fontVariant":r[1]=e[o];break;case"fontWeight":r[2]=e[o];break;case"fontSize":var i="";e[o]&&e[o].toString().indexOf("px")<0&&(i="px"),r[3]=e[o]+i;break;case"fontFamily":r[4]=e[o];break;case"fontOpacity":t.opacity=e[o];break;case"labelPosition":t.textPosition=e[o];break;case"labelAlign":t.textAlign=e[o];break;case"labelBaseline":t.textBaseline=e[o];break;case"labelRotation":t.textRotation=e[o];break;default:t[o]=e[o]}return t.textFont=r.join(" "),!0===n[0]&&!1===n[1]?t.brushType="fill":!1===n[0]&&!0===n[1]?t.brushType="stroke":!0===n[0]&&!0===n[1]?t.brushType="both":t.brushType="fill",null==t.lineWidth&&(t.lineWidth=1),t}},{key:"Background",value:function(e,t,r){var n=r||{},o=new wi(t[0],t[3],Math.abs(t[2]-t[0]),Math.abs(t[3]-t[1]));return o.style={fillColor:"#f3f3f3"},n.backgroundStyle&&j.copyAttributesWithClip(o.style,n.backgroundStyle),n.backgroundRadius&&(o.style.radius=n.backgroundRadius),o.clickable=!1,o.hoverable=!1,e.createShape(o)}},{key:"GraphAxis",value:function(e,t,r,n){var o=t,i=r||{},a=[],s=[],u=!!i.useXReferenceLine&&i.useXReferenceLine,l=i.axisYTick&&!isNaN(i.axisYTick)?i.axisYTick:0,c=[],f=[];if(0==l){if(f.push([o[0],o[3]-5]),f.push([o[0],o[1]]),i.axis3DParameter&&!isNaN(i.axis3DParameter)&&i.axis3DParameter>=15){var h=parseInt(i.axis3DParameter),p=[o[0]-h,o[1]+h];i.axisUseArrow?(c.push([p[0]+1.5,p[1]-7.5]),c.push([p[0]-1,p[1]+1]),c.push([p[0]+7.5,p[1]-1.5]),f.push([p[0],p[1]])):f.push([p[0],p[1]]),f.push([o[0],o[1]])}f.push([o[2]+5,o[1]])}else{var d=Math.abs(o[1]-o[3])/l,y=o[3];f.push([o[0],y-5]);for(var v=0;v<l;v++){if(f.push([o[0],y]),f.push([o[0]-5,y]),f.push([o[0],y]),u){var g=new ai([[o[0],y],[o[2],y]]);g.style={strokeColor:"#cfcfcf",strokeLinecap:"butt",strokeLineJoin:"round",strokeWidth:1},g.clickable=!1,g.hoverable=!1,i.xReferenceLineStyle&&j.copyAttributesWithClip(g.style,i.xReferenceLineStyle),a.push(e.createShape(g))}y+=d}if(f.push([o[0],o[1]]),i.axis3DParameter&&!isNaN(i.axis3DParameter)&&i.axis3DParameter>=15){var m=parseInt(i.axis3DParameter),b=[o[0]-m,o[1]+m];i.axisUseArrow?(c.push([b[0]+1.5,b[1]-7.5]),c.push([b[0]-1,b[1]+1]),c.push([b[0]+7.5,b[1]-1.5]),f.push([b[0],b[1]])):f.push([b[0],b[1]]),f.push([o[0],o[1]])}f.push([o[2]+5,o[1]])}if(i.axisUseArrow){var w=[[o[2]+5,o[1]+4],[o[2]+13,o[1]],[o[2]+5,o[1]-4]],_=[[o[0]-4,o[3]-5],[o[0],o[3]-13],[o[0]+4,o[3]-5]],x=new pi(w);x.style={fillColor:"#008acd"},j.copyAttributesWithClip(x.style,i.axisStyle),s.push(e.createShape(x));var S=new pi(_);if(S.style={fillColor:"#008acd"},j.copyAttributesWithClip(S.style,i.axisStyle),s.push(e.createShape(S)),i.axis3DParameter&&!isNaN(i.axis3DParameter)&&i.axis3DParameter>=15){var O=new pi(c);O.style={fillColor:"#008acd"},j.copyAttributesWithClip(O.style,i.axisStyle),s.push(e.createShape(O))}}var P=new ai(f);P.style={strokeLinecap:"butt",strokeLineJoin:"round",strokeColor:"#008acd",strokeWidth:1},i.axisStyle&&j.copyAttributesWithClip(P.style,i.axisStyle),P.clickable=!1,P.hoverable=!1;var E=[e.createShape(P)],k=[];if(i.axisYLabels&&i.axisYLabels.length&&i.axisYLabels.length>0){var M=i.axisYLabels,C=M.length,T=[0,0];if(i.axisYLabelsOffset&&i.axisYLabelsOffset.length&&(T=i.axisYLabelsOffset),1==C){var A=new Ri(o[0]-5+T[0],o[3]+T[1],M[0]);A.style={labelAlign:"right"},i.axisYLabelsStyle&&j.copyAttributesWithClip(A.style,i.axisYLabelsStyle),A.clickable=!1,A.hoverable=!1,k.push(e.createShape(A))}else for(var I=o[3],R=Math.abs(o[1]-o[3])/(C-1),L=0;L<C;L++){var N=new Ri(o[0]-5+T[0],I+T[1],M[L]);N.style={labelAlign:"right"},i.axisYLabelsStyle&&j.copyAttributesWithClip(N.style,i.axisYLabelsStyle),N.clickable=!1,N.hoverable=!1,k.push(e.createShape(N)),I+=R}}var D=[];if(i.axisXLabels&&i.axisXLabels.length&&i.axisXLabels.length>0){var B=i.axisXLabels,F=B.length,G=[0,0];if(i.axisXLabelsOffset&&i.axisXLabelsOffset.length&&(G=i.axisXLabelsOffset),n&&n.xPositions&&n.xPositions.length&&n.xPositions.length==F)for(var z=n.xPositions,U=0;U<F;U++){var V=new Ri(z[U]+G[0],o[1]+G[1],B[U]);V.style={labelAlign:"center",labelBaseline:"top"},i.axisXLabelsStyle&&j.copyAttributesWithClip(V.style,i.axisXLabelsStyle),V.clickable=!1,V.hoverable=!1,D.push(e.createShape(V))}else if(1==F){var W=new Ri(o[0]-5+G[0],o[1]+G[0],B[0]);W.style={labelAlign:"center",labelBaseline:"top"},i.axisXLabelsStyle&&j.copyAttributesWithClip(W.style,i.axisXLabelsStyle),W.clickable=!1,W.hoverable=!1,D.push(e.createShape(W))}else for(var Y=o[0],H=Math.abs(o[2]-o[0])/(F-1),X=0;X<F;X++){var q=new Ri(Y+G[0],o[1]+G[1],B[X]);q.style={labelAlign:"center",labelBaseline:"top"},i.axisXLabelsStyle&&j.copyAttributesWithClip(q.style,i.axisXLabelsStyle),q.clickable=!1,q.hoverable=!1,D.push(e.createShape(q)),Y+=H}}return a.concat(E).concat(k).concat(D).concat(s)}},{key:"ShapeStyleTool",value:function(e,t,r,n,o,i){var a=e||{};if(t&&j.copyAttributesWithClip(a,t),r&&r.length&&void 0!==o&&!isNaN(o)&&o>=0&&r[o]&&j.copyAttributesWithClip(a,r[o]),n&&n.length&&void 0!==i)for(var s=n,u=s.length,l=parseFloat(i),c=0;c<u;c++)if(s[c].start<=l&&l<s[c].end){j.copyAttributesWithClip(a,s[c].style);break}return a}}],(r=[{key:"destroy",value:function(){this.shapeParameters=null}},{key:"createShape",value:function(t){if(t&&(this.shapeParameters=t),!this.shapeParameters)return null;var r=this.shapeParameters;if(r instanceof $o){var n=new Object;n.x=r.x,n.y=r.y,n.r=r.r,n=j.copyAttributesWithClip(n,r.style,["x","y"]);var o=new ta;return o.style=e.transformStyle(n),o.highlightStyle=e.transformStyle(r.highlightStyle),j.copyAttributesWithClip(o,r,["x","y","style","highlightStyle"]),o}if(r instanceof ai){if(!r.pointList)return null;var i=new Object;i.pointList=r.pointList,i=j.copyAttributesWithClip(i,r.style,["pointList"]);var a=new Ca;return a.style=e.transformStyle(i),a.highlightStyle=e.transformStyle(r.highlightStyle),j.copyAttributesWithClip(a,r,["pointList","style","highlightStyle"]),a}if(r instanceof pi){if(!r.pointList)return null;var s=new Object;s.pointList=r.pointList,s=j.copyAttributesWithClip(s,r.style,["pointList"]);var u=new xa;return u.style=e.transformStyle(s),u.highlightStyle=e.transformStyle(r.highlightStyle),j.copyAttributesWithClip(u,r,["pointList","style","highlightStyle"]),u}if(r instanceof wi){if(!r.x&&!r.y&!r.width&!r.height)return null;var l=new Object;l.x=r.x,l.y=r.y,l.width=r.width,l.height=r.height,l=j.copyAttributesWithClip(l,r.style,["x","y","width","height"]);var c=new Na;return c.style=e.transformStyle(l),c.highlightStyle=e.transformStyle(r.highlightStyle),j.copyAttributesWithClip(c,r,["x","y","width","height","style","highlightStyle"]),c}if(r instanceof ki){var f=new Object;f.x=r.x,f.y=r.y,f.r=r.r,f.startAngle=r.startAngle,f.endAngle=r.endAngle,r.r0&&(f.r0=r.r0),r.clockWise&&(f.clockWise=r.clockWise),f=j.copyAttributesWithClip(f,r.style,["x","y","r","startAngle","endAngle","r0","endAngle"]);var h=new Va;return h.style=e.transformStyle(f),h.highlightStyle=e.transformStyle(r.highlightStyle),j.copyAttributesWithClip(h,r,["x","y","r","startAngle","endAngle","r0","endAngle","style","highlightStyle"]),h}if(r instanceof Ri){var p=new Object;p.x=r.x,p.y=r.y,p.text=r.text,p=j.copyAttributesWithClip(p,r.style,["x","y","text"]);var d=new ua;return d.style=e.transformStyle(p),d.highlightStyle=e.transformStyle(r.highlightStyle),j.copyAttributesWithClip(d,r,["x","y","text","style","highlightStyle"]),d}if(r instanceof zi){var y=new Object;y.x=r.x,y.y=r.y,r.image&&(y.image=r.image),r.width&&(y.width=r.width),r.height&&(y.height=r.height),r.sx&&(y.sx=r.sx),r.sy&&(y.sy=r.sy),r.sWidth&&(y.sWidth=r.sWidth),r.sHeight&&(y.sHeight=r.sHeight),y=j.copyAttributesWithClip(y,r.style,["x","y","image","width","height","sx","sy","sWidth","sHeight"]);var v=new Qn;return v.style=e.transformStyle(y),v.highlightStyle=e.transformStyle(r.highlightStyle),j.copyAttributesWithClip(v,r,["x","y","image","width","height","style","highlightStyle"]),v}if(r instanceof qi){var g=new Object;g.x=r.x,g.r=r.r,g.y=r.y,g=j.copyAttributesWithClip(g,r.style,["x","y","r"]);var m=new ya;return m.style=e.transformStyle(g),m.highlightStyle=e.transformStyle(r.highlightStyle),j.copyAttributesWithClip(m,r,["x","y","r","style","highlightStyle","lineWidth","text","textPosition"]),m}return null}}])&&Wa(t.prototype,r),n&&Wa(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Ha(e){"@babel/helpers - typeof";return(Ha="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Xa(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function qa(){return(qa="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=$a(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function Ja(e,t){return(Ja=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Za(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=$a(e);if(t){var o=$a(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Ka(this,r)}}function Ka(e,t){if(t&&("object"===Ha(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Qa(e)}function Qa(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $a(e){return($a=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var es=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ja(e,t)}(i,Tr);var t,r,n,o=Za(i);function i(e,t,r,n,a){var s;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),s=o.call(this,e,t),!e.geometry)return Ka(s);if(!(e.geometry instanceof m))return Ka(s);s.dataBounds=e.geometry.getBounds(),s.nodesClipPixel=2,s.isHoverAble=!0,s.isMultiHover=!0,s.isClickAble=!0,s.highlightStyle=null,s.shapeOptions={},s.style=r||{},s.CLASS_NAME="SuperMap.Feature.Theme.Vector",s.style=r||{},n&&j.copyAttributesWithClip(Qa(s),n,["shapeOptions","dataBounds"]),a&&j.copyAttributesWithClip(s.shapeOptions,a);var u=e.geometry;return s.lonlat=s.dataBounds.getCenterLonLat(),s.location=s.getLocalXY(s.lonlat),u instanceof xe?s.lineToTF(u):u instanceof ye?s.lineToTF(u):u instanceof ue||(u instanceof re?s.multiPointToTF(u):u instanceof tt?s.multiLineStringToTF(u):u instanceof st?s.multiPolygonToTF(u):u instanceof Me?s.polygonToTF(u):u instanceof Z||(u instanceof V?s.pointToTF(u):u instanceof jn?s.rectangleToTF(u):u instanceof Cr&&s.geoTextToTF(u))),s}return t=i,(r=[{key:"destroy",value:function(){this.style=null,this.dataBounds=null,this.nodesClipPixel=null,this.isHoverAble=null,this.isMultiHover=null,this.isClickAble=null,this.highlightStyle=null,this.shapeOptions=null,qa($a(i.prototype),"destroy",this).call(this)}},{key:"lineToTF",value:function(e){for(var t=e.components,r=[],n=[],o=this.location,i=[],a=this.nodesClipPixel,s=0;s<t.length;s++){var u=t[s];if(n=[],r=this.getLocalXY(u),n[0]=r[0]-o[0],n[1]=r[1]-o[1],i.length>0){var l=i[i.length-1];if(Math.abs(l[0]-n[0])<=a&&Math.abs(l[1]-n[1])<=a)continue}i.push(n)}if(i.length<2)return null;var c=new Object;(c=j.copyAttributesWithClip(c,this.style,["pointList"])).pointList=i;var f=new Ca({style:c,clickable:this.isClickAble,hoverable:this.isHoverAble});this.highlightStyle&&(f.highlightStyle=this.highlightStyle),f.refOriginalPosition=this.location,f.refDataID=this.data.id,f.isHoverByRefDataID=this.isMultiHover,this.shapeOptions&&j.copyAttributesWithClip(f,this.shapeOptions),this.shapes.push(f)}},{key:"multiPointToTF",value:function(e){for(var t=e.components,r=[],n=[],o=this.location,i=[],a=this.nodesClipPixel,s=0;s<t.length;s++){var u=t[s];if(n=[],r=this.getLocalXY(u),n[0]=r[0]-o[0],n[1]=r[1]-o[1],i.length>0){var l=i[i.length-1];if(Math.abs(l[0]-n[0])<=a&&Math.abs(l[1]-n[1])<=a)continue}i.push(n);var c=new Object;c.r=6,(c=j.copyAttributesWithClip(c,this.style)).x=n[0],c.y=n[1];var f=new ta({style:c,clickable:this.isClickAble,hoverable:this.isHoverAble});this.highlightStyle&&(f.highlightStyle=this.highlightStyle),f.refOriginalPosition=o,f.refDataID=this.data.id,f.isHoverByRefDataID=this.isMultiHover,this.shapeOptions&&j.copyAttributesWithClip(f,this.shapeOptions),this.shapes.push(f)}}},{key:"multiLineStringToTF",value:function(e){for(var t=e.components,r=0;r<t.length;r++){var n=t[r];this.lineToTF(n)}}},{key:"multiPolygonToTF",value:function(e){for(var t=e.components,r=0;r<t.length;r++){var n=t[r];this.polygonToTF(n)}}},{key:"pointToTF",value:function(e){var t=this.location,r=this.getLocalXY(e),n=new Object;n.r=6,(n=j.copyAttributesWithClip(n,this.style)).x=r[0]-t[0],n.y=r[1]-t[1];var o=new ta({style:n,clickable:this.isClickAble,hoverable:this.isHoverAble});this.highlightStyle&&(o.highlightStyle=this.highlightStyle),o.refOriginalPosition=t,o.refDataID=this.data.id,o.isHoverByRefDataID=this.isMultiHover,this.shapeOptions&&j.copyAttributesWithClip(o,this.shapeOptions),this.shapes.push(o)}},{key:"polygonToTF",value:function(e){for(var t=e.components,r=[],n=[],o=this.location,i=[],a=[],s=[],u=this.nodesClipPixel,l=0;l<t.length;l++){var c=t[l].components;if(0===l){i=[];for(var f=0;f<c.length;f++){if(n=[],r=this.getLocalXY(c[f]),n[0]=r[0]-o[0],n[1]=r[1]-o[1],i.length>0){var h=i[i.length-1];if(Math.abs(h[0]-n[0])<=u&&Math.abs(h[1]-n[1])<=u)continue}i.push(n)}}else{a=[];for(var p=0;p<c.length;p++){if(n=[],r=this.getLocalXY(c[p]),n[0]=r[0]-o[0],n[1]=r[1]-o[1],a.length>0){var d=a[a.length-1];if(Math.abs(d[0]-n[0])<=u&&Math.abs(d[1]-n[1])<=u)continue}a.push(n)}}a.length<2||s.push(a)}if(!(i.length<2)){var y={};(y=j.copyAttributesWithClip(y,this.style,["pointList"])).pointList=i;var v=new xa({style:y,clickable:this.isClickAble,hoverable:this.isHoverAble});this.highlightStyle&&(v.highlightStyle=this.highlightStyle),v.refOriginalPosition=this.location,v.refDataID=this.data.id,v.isHoverByRefDataID=this.isMultiHover,s.length>0&&(v.holePolygonPointLists=s),this.shapeOptions&&j.copyAttributesWithClip(v,this.shapeOptions),this.shapes.push(v)}}},{key:"rectangleToTF",value:function(e){var t=this.location,r=new R(e.x,e.y),n=this.layer.map.getResolution(),o=this.getLocalXY(r),i=new Object;i.r=6,(i=j.copyAttributesWithClip(i,this.style)).x=o[0]-t[0],i.y=o[1]-t[1]-2*e.width/n,i.width=e.width/n,i.height=e.height/n;var a=new Na({style:i,clickable:this.isClickAble,hoverable:this.isHoverAble});this.highlightStyle&&(a.highlightStyle=this.highlightStyle),a.refOriginalPosition=t,a.refDataID=this.data.id,a.isHoverByRefDataID=this.isMultiHover,this.shapeOptions&&j.copyAttributesWithClip(a,this.shapeOptions),this.shapes.push(a)}},{key:"geoTextToTF",value:function(e){var t=this.location,r=this.getLocalXY(e),n=new Object;n.r=6,(n=j.copyAttributesWithClip(n,this.style,["x","y","text"])).x=r[0]-t[0],n.y=r[1]-t[1],n.text=e.text;var o=new ua({style:n,clickable:this.isClickAble,hoverable:this.isHoverAble});this.highlightStyle&&(o.highlightStyle=this.highlightStyle),o.refOriginalPosition=t,o.refDataID=this.data.id,o.isHoverByRefDataID=this.isMultiHover,this.shapeOptions&&j.copyAttributesWithClip(o,this.shapeOptions),this.shapes.push(o)}},{key:"updateAndAddShapes",value:function(){var e=this.getLocalXY(this.lonlat);this.location=e;for(var t=this.layer.renderer,r=0,n=this.shapes.length;r<n;r++){var o=this.shapes[r];o.refOriginalPosition=e,t.addShape(o)}}},{key:"getShapesCount",value:function(){return this.shapes.length}},{key:"getLocalXY",value:function(e){return this.layer.getLocalXY(e)}}])&&Xa(t.prototype,r),n&&Xa(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function ts(e){"@babel/helpers - typeof";return(ts="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function rs(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ns(e,t){return(ns=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function os(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=as(e);if(t){var o=as(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===ts(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return is(e)}(this,r)}}function is(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function as(e){return(as=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ss=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ns(e,t)}(a,Do);var t,r,n,i=os(a);function a(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(r=i.call(this,e,t)).name=null,r.style=null,r.highlightStyle=null,r.nodesClipPixel=2,r.isHoverAble=!1,r.isMultiHover=!1,r.isClickAble=!0,r.isAllowFeatureStyle=!1,j.extend(is(r),t),r.cache=t.cache||{},r.cacheFields=t.cacheFields||[],r.maxCacheCount=t.maxCacheCount||0,r.isCustomSetMaxCacheCount=void 0!==t.isCustomSetMaxCacheCount&&t.isCustomSetMaxCacheCount,r}return t=a,(r=[{key:"addFeatures",value:function(e){o().Evented.prototype.fire("beforefeaturesadded",{features:e}),this.features=this.toiClientFeature(e),this.isCustomSetMaxCacheCount||(this.maxCacheCount=5*this.features.length),this.renderer&&this.redrawThematicFeatures(this.map.getBounds())}},{key:"removeFeatures",value:function(e){this.clearCache(),Do.prototype.removeFeatures.call(this,e)}},{key:"removeAllFeatures",value:function(){this.clearCache(),Do.prototype.removeAllFeatures.apply(this,arguments)}},{key:"redrawThematicFeatures",value:function(e){this.clearCache();var t=this.renderer.getHoverOne(),r=null;t&&t.refDataID&&(r=t.refDataID),this.renderer.clearAll();for(var n=this.features,o=this.cache,i=this.cacheFields,a=this.map.getZoom(),s=this.maxCacheCount,u=0,l=n.length;u<l;u++){var c,f=n[u].id+"_zoom_"+a.toString();if(o[f])o[f].updateAndAddShapes();else{if((c=this.createThematicFeature(n[u])).getShapesCount()<1)continue;if(o[f]=c,i.push(f),i.length>s){var h=i[0];i.splice(0,1),delete o[h]}}}if(this.renderer.render(),r&&this.isHoverAble&&this.isMultiHover){var p=this.getShapesByFeatureID(r);this.renderer.updateHoverShapes(p)}}},{key:"createThematicFeature",value:function(e){var t=j.copyAttributesWithClip(this.style);e.style&&!0===this.isAllowFeatureStyle&&(t=j.copyAttributesWithClip(e.style));var r={};r.nodesClipPixel=this.nodesClipPixel,r.isHoverAble=this.isHoverAble,r.isMultiHover=this.isMultiHover,r.isClickAble=this.isClickAble,r.highlightStyle=Ya.transformStyle(this.highlightStyle);for(var n=new es(e,this,Ya.transformStyle(t),r),o=0;o<n.shapes.length;o++)this.renderer.addShape(n.shapes[o]);return n}},{key:"clearCache",value:function(){this.cache={},this.cacheFields=[]}},{key:"clear",value:function(){this.renderer.clearAll(),this.renderer.refresh(),this.removeAllFeatures(),this.clearCache()}},{key:"getCacheCount",value:function(){return this.cacheFields.length}},{key:"setMaxCacheCount",value:function(e){isNaN(e)||(this.maxCacheCount=e,this.isCustomSetMaxCacheCount=!0)}},{key:"getShapesByFeatureID",value:function(e){var t=[],r=this.renderer.getAllShapes();if(!e)return r;for(var n=0,o=r.length;n<o;n++){var i=r[n];i.refDataID&&e===i.refDataID&&t.push(i)}return t}}])&&rs(t.prototype,r),n&&rs(t,n),Object.defineProperty(t,"prototype",{writable:!1}),a}();function us(e){"@babel/helpers - typeof";return(us="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ls(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function cs(){return(cs="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ds(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function fs(e,t){return(fs=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function hs(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=ds(e);if(t){var o=ds(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===us(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ps(e)}(this,r)}}function ps(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ds(e){return(ds=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ys=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&fs(e,t)}(a,ss);var t,r,n,i=hs(a);function a(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(r=i.call(this,e,t)).isOverLay=!0,r.isAvoid=!0,r.themeField=null,r.styleGroups=null,j.extend(ps(r),t),r.defaultStyle={fontColor:"#000000",fontOpacity:1,fontSize:"12px",fontStyle:"normal",fontWeight:"normal",labelAlign:"cm",labelXOffset:0,labelYOffset:0,labelRotation:0,fill:!1,fillColor:"#ee9900",fillOpacity:.4,stroke:!1,strokeColor:"#ee9900",strokeOpacity:1,strokeWidth:1,strokeLinecap:"round",strokeDashstyle:"solid",labelRect:!0,labelSelect:!0,_isGeoTextStrategyStyle:!0},r.getPxBoundsMode=0,r.labelFeatures=[],r}return t=a,(r=[{key:"redrawThematicFeatures",value:function(e){if(this.features.length>0&&0==this.labelFeatures.length)for(var t=this.setLabelsStyle(this.features),r=0,n=t.length;r<n;r++)this.labelFeatures.push(t[r]);this.features=this.getDrawnLabels(this.labelFeatures),cs(ds(a.prototype),"redrawThematicFeatures",this).call(this,e)}},{key:"removeFeatures",value:function(e){this.labelFeatures=[],cs(ds(a.prototype),"removeFeatures",this).call(this,e)}},{key:"removeAllFeatures",value:function(){this.labelFeatures=[],cs(ds(a.prototype),"removeAllFeatures",this).call(this,arguments)}},{key:"createThematicFeature",value:function(e){var t=this.getStyleByData(e),r={};r.nodesClipPixel=this.nodesClipPixel,r.isHoverAble=this.isHoverAble,r.isMultiHover=this.isMultiHover,r.isClickAble=this.isClickAble,r.highlightStyle=Ya.transformStyle(this.highlightStyle);for(var n=new es(e,this,Ya.transformStyle(t),r),o=0;o<n.shapes.length;o++)this.renderer.addShape(n.shapes[o]);return n}},{key:"getDrawnLabels",value:function(e){for(var t,r,n,o,i=[],a=[],s={labelAlign:"cm",labelXOffset:0,labelYOffset:0},u=this.map,l=u.getZoom(),c=u.getCanvas(),f={x:parseFloat(c.style.width),y:parseFloat(c.style.height)},h=0,p=e.length;h<p;h++){((r=e[h]).isStyleChange||void 0===r.isStyleChange)&&(r=this.setStyle(r));var d=this.getLabelPxLocation(r);if(d.x>=0&&d.x<=f.x&&d.y>=0&&d.y<=f.y){if(r.style.minZoomLevel>-1&&l<=r.style.minZoomLevel)continue;if(r.style.maxZoomLevel>-1&&l>r.style.maxZoomLevel)continue;var y=null;r.isStyleChange?(r.isStyleChange=null,y=this.calculateLabelBounds(r,d)):y=r.geometry.bsInfo.w&&r.geometry.bsInfo.h?this.calculateLabelBounds2(r,d):this.calculateLabelBounds(r,d);var v=new N(0,f.y,f.x,0),g=y.length;if(this.isAvoid){var m=this.getAvoidInfo(v,y);if(m){if("left"===m.aspectW){r.style.labelXOffset+=m.offsetX;for(var b=0;b<g;b++)y[b].x+=m.offsetX}else if("right"===m.aspectW){r.style.labelXOffset+=-m.offsetX;for(var w=0;w<g;w++)y[w].x+=-m.offsetX}if("top"===m.aspectH){r.style.labelYOffset+=m.offsetY;for(var _=0;_<g;_++)y[_].y+=m.offsetY}else if("bottom"===m.aspectH){r.style.labelYOffset+=-m.offsetY;for(var x=0;x<g;x++)y[x].y+=-m.offsetY}r.isStyleChange=!0}}if(this.isOverLay){var S=!1;if(0!=h)for(var O=0;O<a.length;O++)if(this.isQuadrilateralOverLap(y,a[O])){S=!0;break}if(S)continue;a.push(y)}for(var P=[],E=0;E<g-1;E++)P.push(u.unproject(y[E]));var k=P[3],M=P[1],C=new N(k.lng,k.lat,M.lng,M.lat).getCenterLonLat(),T=new Cr(C.lon,C.lat,r.attributes[this.themeField]);T.calculateBounds(),n=j.cloneObject(r.style),o=j.cloneObject(j.copyAttributes(n,s)),(t=new ze(T,r.attributes,o)).id=r.id,t.fid=r.fid,i.push(t)}}return i}},{key:"getStyleByData",value:function(e){var t=e;if(t.style=j.copyAttributes(t.style,this.defaultStyle),this.style&&this.style.fontSize&&parseFloat(this.style.fontSize)<12&&(this.style.fontSize="12px"),t.style=j.copyAttributes(t.style,this.style),this.themeField&&this.styleGroups&&t.attributes){var r=this.themeField,n=t.attributes,o=this.styleGroups,i=!1,a=null;for(var s in n)if(r===s){i=!0,a=n[s];break}if(i)for(var u=0,l=o.length;u<l;u++)if(a>=o[u].start&&a<o[u].end){var c=o[u].style;c&&c.fontSize&&parseFloat(c.fontSize)<12&&(c.fontSize="12px"),t.style=j.copyAttributes(t.style,c)}t.style.label=t.attributes[this.themeField]}return t.style}},{key:"setLabelsStyle",value:function(e){for(var t,r=[],n=0,o=e.length;n<o;n++){var i=e[n];if("SuperMap.Geometry.GeoText"!==i.geometry.CLASS_NAME)return e;(i.geometry.bsInfo.w||i.geometry.bsInfo.h)&&(i.geometry.bsInfo.w=null,i.geometry.bsInfo.h=null,i.geometry.labelWTmp=null),(t=this.setStyle(i)).layer=this.layer,r.push(t)}return r}},{key:"setStyle",value:function(e){var t=e;if(t.style=j.copyAttributes(t.style,this.defaultStyle),this.style&&this.style.fontSize&&parseFloat(this.style.fontSize)<12&&(this.style.fontSize="12px"),t.style=j.copyAttributes(t.style,this.style),this.groupField&&this.styleGroups&&t.attributes){var r=this.groupField,n=t.attributes,o=this.styleGroups,i=!1,a=null;for(var s in n)if(r===s){i=!0,a=n[s];break}if(i)for(var u=0,l=o.length;u<l;u++)if(a>=o[u].start&&a<o[u].end){var c=o[u].style;c&&c.fontSize&&parseFloat(c.fontSize)<12&&(c.fontSize="12px"),t.style=j.copyAttributes(t.style,c)}}return t.style.label=t.geometry.text,t}},{key:"getLabelPxLocation",value:function(e){var t=e.geometry,r=e.style,n=t.getCentroid(),i=this.map.project(new(o().LngLat)(n.x,n.y)),a=new(o().Point)(i.x,i.y);if(r.labelXOffset||r.labelYOffset){var s=isNaN(r.labelXOffset)?0:r.labelXOffset,u=isNaN(r.labelYOffset)?0:r.labelYOffset,l=a.add(new(o().Point)(s,-u));return new(o().Point)(l.x,l.y)}return new(o().Point)(a.x,a.y)}},{key:"calculateLabelBounds",value:function(e,t){var r=e.geometry,n=null,o=null;if(0==this.getPxBoundsMode)n=r.getLabelPxBoundsByText(t,e.style);else{if(1!==this.getPxBoundsMode)return null;o=this.getLabelInfo(e.geometry.getCentroid(),e.style),n=r.getLabelPxBoundsByLabel(t,o.w,o.h,e.style)}var i=[];return i=e.style.labelRotation%180==0?[{x:n.left,y:n.top},{x:n.right,y:n.top},{x:n.right,y:n.bottom},{x:n.left,y:n.bottom},{x:n.left,y:n.top}]:this.rotationBounds(n,t,e.style.labelRotation),r.bounds=new N(i[1].x,i[3].y,i[2].x,i[4].y),i}},{key:"calculateLabelBounds2",value:function(e,t){var r,n,o,i,a,s=e.geometry.bsInfo,u=e.style,l=j.cloneObject(t);if(u.labelAlign&&"cm"!==u.labelAlign)switch(u.labelAlign){case"lt":l.x+=s.w/2,l.y+=s.h/2;break;case"lm":l.x+=s.w/2;break;case"lb":l.x+=s.w/2,l.y-=s.h/2;break;case"ct":l.y+=s.h/2;break;case"cb":l.y-=s.h/2;break;case"rt":l.x-=s.w/2,l.y+=s.h/2;break;case"rm":l.x-=s.w/2;break;case"rb":l.x-=s.w/2,l.y-=s.h/2}n=l.x-s.w/2,o=l.y+s.h/2,a=u.fontStyle&&"italic"===u.fontStyle?l.x+s.w/2+parseInt(parseFloat(u.fontSize)/2):l.x+s.w/2,i=l.y-s.h/2,r=new N(n,o,a,i);var c=[];return c=u.labelRotation%180==0?[{x:r.left,y:r.top},{x:r.right,y:r.top},{x:r.right,y:r.bottom},{x:r.left,y:r.bottom},{x:r.left,y:r.top}]:this.rotationBounds(r,t,u.labelRotation),e.geometry.bounds=new N(c[1].x,c[3].y,c[2].x,c[4].y),c}},{key:"getLabelInfo",value:function(e,t){var r={l:"left",r:"right",t:"top",b:"bottom"},n={l:0,r:-1,t:0,b:-1};t=j.extend({fontColor:"#000000",labelAlign:"cm"},t);var o=this.getLocalXY(e),i=0;if(t.labelXOffset||t.labelYOffset){var a=isNaN(t.labelXOffset)?0:t.labelXOffset,s=isNaN(t.labelYOffset)?0:t.labelYOffset;o[0]+=a,o[1]-=s}var u=document.createElement("canvas");u.globalAlpha=0,u.lineWidth=1;var l=u.getContext("2d");l.fillStyle=t.fontColor,l.globalAlpha=t.fontOpacity||1;var c,f,h,p=[t.fontStyle?t.fontStyle:"normal","normal",t.fontWeight?t.fontWeight:"normal",t.fontSize?t.fontSize:"1em",t.fontFamily?t.fontFamily:"sans-serif"].join(" "),d=t.label.split("\n"),y=d.length;if(l.fillText){l.font=p,l.textAlign=r[t.labelAlign[0]]||"center",l.textBaseline=r[t.labelAlign[1]]||"middle",null==(c=n[t.labelAlign[1]])&&(c=-.5),f=l.measureText("Mg").height||l.measureText("xx").width,o[1]+=f*c*(y-1);for(var v=0;v<y;v++)i<(h=l.measureText(d[v]).width)&&(i=h)}else if(l.mozDrawText){l.mozTextStyle=p,null==(c=n[t.labelAlign[1]])&&(c=-.5),f=l.mozMeasureText("xx"),o[1]+=f*(1+c*y);for(var g=0;g<y;g++)i<(h=l.measureText(d[g]).width)&&(i=h)}var m={};return i?(m.w=i,m.h=t.fontSize,m.rows=d.length,m):null}},{key:"rotationBounds",value:function(e,t,r){var n=new(o().Point)(e.left,e.top),i=new(o().Point)(e.right,e.top),a=new(o().Point)(e.right,e.bottom),s=new(o().Point)(e.left,e.bottom),u=[];u.push(this.getRotatedLocation(n.x,n.y,t.x,t.y,r)),u.push(this.getRotatedLocation(i.x,i.y,t.x,t.y,r)),u.push(this.getRotatedLocation(a.x,a.y,t.x,t.y,r)),u.push(this.getRotatedLocation(s.x,s.y,t.x,t.y,r));for(var l=[],c=0;c<u.length;c++)l.push({x:u[c].x,y:u[c].y});return l.push({x:u[0].x,y:u[0].y}),l}},{key:"getRotatedLocation",value:function(e,t,r,n,o){var i,a,s={};return t=-t,n=-n,o=-o,i=(e-r)*Math.cos(o/180*Math.PI)-(t-n)*Math.sin(o/180*Math.PI)+r,a=(e-r)*Math.sin(o/180*Math.PI)+(t-n)*Math.cos(o/180*Math.PI)+n,s.x=i,s.y=-a,s}},{key:"getAvoidInfo",value:function(e,t){if(5!==t.length)return null;for(var r=[{x:e.left,y:e.top},{x:e.right,y:e.top},{x:e.right,y:e.bottom},{x:e.left,y:e.bottom},{x:e.left,y:e.top}],n=!1,o=r.length,i=t.length,a=0,s=0,u="",l="",c=0;c<o-1;c++)for(var f=0;f<i-1;f++){"SuperMap.Geometry.Point"===j.lineIntersection(r[c],r[c+1],t[f],t[f+1]).CLASS_NAME&&(h(t[f]),h(t[f+1]),n=!0)}return n?{aspectW:l,aspectH:u,offsetX:a,offsetY:s}:null;function h(t){if(!e.contains(t.x,t.y)){if(t.y<e.top){var r=Math.abs(e.top-t.y);r>s&&(s=r,u="top")}if(t.y>e.bottom){var n=Math.abs(t.y-e.bottom);n>s&&(s=n,u="bottom")}if(t.x<e.left){var o=Math.abs(e.left-t.x);o>a&&(a=o,l="left")}if(t.x>e.right){var i=Math.abs(t.x-e.right);i>a&&(a=i,l="right")}}}}},{key:"isQuadrilateralOverLap",value:function(e,t){var r=e.length,n=t.length;if(5!==r||5!==n)return null;for(var o=!1,i=0;i<r;i++)if(this.isPointInPoly(e[i],t)){o=!0;break}for(var a=0;a<n;a++)if(this.isPointInPoly(t[a],e)){o=!0;break}for(var s=0;s<r-1&&!o;s++)for(var u=0;u<n-1;u++){if("SuperMap.Geometry.Point"===j.lineIntersection(e[s],e[s+1],t[u],t[u+1]).CLASS_NAME){o=!0;break}}return o}},{key:"isPointInPoly",value:function(e,t){for(var r=!1,n=-1,o=t.length,i=o-1;++n<o;i=n)(t[n].y<=e.y&&e.y<t[i].y||t[i].y<=e.y&&e.y<t[n].y)&&e.x<(t[i].x-t[n].x)*(e.y-t[n].y)/(t[i].y-t[n].y)+t[n].x&&(r=!r);return r}}])&&ls(t.prototype,r),n&&ls(t,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(),vs=function(){try{return mapv}catch(e){return{}}}();function gs(e){"@babel/helpers - typeof";return(gs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ms(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function bs(){return(bs="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Os(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function ws(e,t){return(ws=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function _s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Os(e);if(t){var o=Os(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return xs(this,r)}}function xs(e,t){if(t&&("object"===gs(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ss(e)}function Ss(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Os(e){return(Os=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ps=vs.baiduMapLayer?vs.baiduMapLayer.__proto__:Function,Es=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ws(e,t)}(i,Ps);var t,r,n,o=_s(i);function i(e,t,r,n,a){var s;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),s=o.call(this,e,t,r),!Ps)return xs(s);s.options=r||{},s.transferCoordinate=n.transferCoordinate,s.getCenterPixel=n.getCenterPixel,s.getResolution=n.getResolution,s.validZoom=n.validZoom;var u=a.mapElement,l=a.targetElement,c=a.id;return s.targetElement=l,s.canvas=s._createCanvas(c,u),s.canvasLayer={canvas:s.canvas,devicePixelRatio:s.devicePixelRatio},s.init(r),s.argCheck(r),s.stopAniamation=!1,s.animation=r.animation,s.clickEvent=s.clickEvent.bind(Ss(s)),s.mousemoveEvent=s.mousemoveEvent.bind(Ss(s)),s._canvasUpdate(),s.targetElement.appendChild(s.canvas),s._expectShow=!0,s.isShow=!0,s}return t=i,(r=[{key:"clickEvent",value:function(e){var t=e.point;bs(Os(i.prototype),"clickEvent",this).call(this,t,e)}},{key:"mousemoveEvent",value:function(e){var t=e.point;bs(Os(i.prototype),"mousemoveEvent",this).call(this,t,e)}},{key:"getContext",value:function(){return this.canvas.getContext(this.context)}},{key:"addData",value:function(e,t){var r=e;e&&e.get&&(r=e.get()),this.dataSet.add(r),this.update({options:t})}},{key:"update",value:function(e){var t=e||{},r=t.data;r&&r.get&&(r=r.get()),void 0!=r&&this.dataSet.set(r),bs(Os(i.prototype),"update",this).call(this,{options:t.options})}},{key:"getData",value:function(){return this.dataSet}},{key:"removeData",value:function(e){if(this.dataSet){var t=this.dataSet.get({filter:function(t){return null==e||"function"!=typeof e||!e(t)}});this.dataSet.set(t),this.update({options:null})}}},{key:"clearData",value:function(){this.dataSet&&this.dataSet.clear(),this.update({options:null})}},{key:"updateData",value:function(e,t){e&&e.get&&this.dataSet.set(e.get()),this.update({options:t})}},{key:"_createCanvas",value:function(e,t){var r=t.style,n=r.width,o=r.height,i=document.createElement("canvas");i.style.position="absolute",i.style.top="0px",i.style.left="0px",i.id=e;var a="undefined"==typeof window?{}:window,s=this.devicePixelRatio=a.devicePixelRatio||1;return i.width=parseInt(n)*s,i.height=parseInt(o)*s,this.options.context&&"2d"!=this.options.context||i.getContext("2d").scale(s,s),i.style.width=n,i.style.height=o,i}},{key:"_canvasUpdate",value:function(e){if(!this.stopAniamation){var t=this.options.animation,r=this.getContext();if(this.isEnabledTime()){if(void 0===e)return void this.clear(r);"2d"===this.context&&(r.save(),r.globalCompositeOperation="destination-out",r.fillStyle="rgba(0, 0, 0, .1)",r.fillRect(0,0,r.canvas.width,r.canvas.height),r.restore())}else this.clear(r);if("2d"===this.context)for(var n in this.options)r[n]=this.options[n];else r.clear(r.COLOR_BUFFER_BIT);if(this.validZoom()){var o={transferCoordinate:this.transferCoordinate()},i=this.getResolution();void 0!==e&&(o.filter=function(r){var n=t.trails||10;return e&&r.time>e-n&&r.time<e});var a=this.dataSet.get(o);this.processData(a),"m"===this.options.unit?(this.options.size&&(this.options._size=this.options.size/i),this.options.width&&(this.options._width=this.options.width/i),this.options.height&&(this.options._height=this.options.height/i)):(this.options._size=this.options.size,this.options._height=this.options.height,this.options._width=this.options.width);var s=this.getCenterPixel();this.drawContext(r,a,this.options,s),this.options.updateCallback&&this.options.updateCallback(e)}}}},{key:"init",value:function(e){this.options=e,this.initDataRange(e),this.context=this.options.context||"2d",this.options.zIndex&&this.setZIndex(this.options.zIndex),this.initAnimator()}},{key:"destroy",value:function(){this.targetElement.removeChild(this.canvas),this.clearData(),this.animator&&this.animator.stop(),this.animator=null}},{key:"addAnimatorEvent",value:function(){}},{key:"moveEndEvent",value:function(){this.stopAniamation=!1,this._canvasUpdate()}},{key:"draw",value:function(){this._canvasUpdate()}},{key:"visible",value:function(){return this.isShow}},{key:"hide",value:function(){this.isShow=!1,this.canvas.style.display="none"}},{key:"show",value:function(){this.isShow=!0,this.canvas.style.display="block"}},{key:"setZIndex",value:function(e){this.canvas.style.zIndex=e}},{key:"clear",value:function(e){e&&e.clearRect&&e.clearRect(0,0,parseInt(this.map.getCanvas().style.width),parseInt(this.map.getCanvas().style.height))}}])&&ms(t.prototype,r),n&&ms(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(),ks=function(e){var t;if(e===At.METER)t=1;else if(e===At.DEGREE)t=2*Math.PI*6378137/360;else if(e===At.KILOMETER)t=.001;else if(e===At.INCH)t=1/.025399999918;else{if(e!==At.FOOT)return t;t=.3048}return t};function Ms(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[-180,180],o=n[1],i=n[0],a=o-i;return e===o&&t?e:e===i&&r?e:0===((e-i)%a+a)%a&&t?o:((e-i)%a+a)%a+i}function Cs(e){var t=parseInt(e),r=parseInt(60*(e-t)),n=parseInt(60*(60*(e-t)-r));return r=0===parseInt(r/10)?"0".concat(r):r,n=0===parseInt(n/10)?"0".concat(n):n,"".concat(t,"Â°").concat(r,"'").concat(n)}function js(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Ts=function(){function e(t,r,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),3===arguments.length?(this.map=t,delete n.layerID,this.mapVOptions=n,this.dataSet=r):(this.dataSet=t,delete r.layerID,this.mapVOptions=r),this.id=this.mapVOptions.layerID?this.mapVOptions.layerID:j.createUniqueID("mapvLayer_"),this.type="custom",this.visibility=!0,this.renderingMode="3d",this.overlay=!0,this.context=this.mapVOptions.context||"2d",this.map&&this.map.addLayer(this)}var t,r,n;return t=e,(r=[{key:"onAdd",value:function(e){this.map=e,this.mapContainer=e.getCanvasContainer(),this.renderer=new Es(e,this.dataSet,this.mapVOptions,{transferCoordinate:this._transferCoordinate,getCenterPixel:this._getCenterPixel,getResolution:this._getResolution,validZoom:this._validZoom.bind(this)},{mapElement:this.map.getCanvas(),targetElement:this.mapContainer,id:this.id}),this.mapContainer.style.perspective=this.map.transform.cameraToCenterDistance+"px",this.bindEvent()}},{key:"onRemove",value:function(){this.renderer.destroy(),this.unbindEvent()}},{key:"render",value:function(){this.renderer&&this.renderer.draw()}},{key:"_transferCoordinate",value:function(){var e=this.map,t=e.getBounds(),r=t.getEast()-t.getWest(),n=t.getNorth()-t.getSouth(),i=e.getCanvas().getBoundingClientRect(),a=r/i.width,s=n/i.height,u=e.getCenter(),l=e.project(u),c=this;return function(t){if(e.transform.rotationMatrix||"2d"===c.context){var r=e.project(new(o().LngLat)(t[0],t[1]));return[r.x,r.y]}var n=[(t[0]-u.lng)/a,(u.lat-t[1])/s];return[n[0]+l.x,n[1]+l.y]}}},{key:"_validZoom",value:function(){return!(this.mapVOptions.minZoom&&this.map.getZoom()<this.mapVOptions.minZoom||this.mapVOptions.maxZoom&&this.map.getZoom()>this.mapVOptions.maxZoom)}},{key:"_getResolution",value:function(){var e=this.map.getBounds(),t=(e.getEast()-e.getWest())/this.map.getCanvas().getBoundingClientRect().width;return ks("DEGREE")*t}},{key:"_getCenterPixel",value:function(){return this.map.project(new(o().LngLat)(0,0))}},{key:"addData",value:function(e,t){this.renderer.addData(e,t)}},{key:"update",value:function(e){this.renderer.update(e)}},{key:"getData",value:function(){return this.renderer&&(this.dataSet=this.renderer.getData()),this.dataSet}},{key:"removeData",value:function(e){this.renderer&&this.renderer.removeData(e)}},{key:"clearData",value:function(){this.renderer.clearData()}},{key:"show",value:function(){return this.renderer&&this.renderer.show(),this}},{key:"hide",value:function(){return this.renderer&&this.renderer.hide(),this}},{key:"getTopLeft",value:function(){var e,t=this.map;t&&(e=t.getBounds().getNorthWest());return e}},{key:"bindEvent",value:function(){var e=this.map;this.mapVOptions.methods&&(this.mapVOptions.methods.click&&e.on("click",this.renderer.clickEvent),this.mapVOptions.methods.mousemove&&e.on("mousemove",this.renderer.mousemoveEvent))}},{key:"unbindEvent",value:function(){var e=this.map;this.mapvOptions.methods&&(this.mapvOptions.methods.click&&e.off("click",this.clickEvent),this.mapvOptions.methods.mousemove&&e.off("mousemove",this.mousemoveEvent))}},{key:"setVisibility",value:function(e){e!==this.visibility&&(this.visibility=e,e?this.show():this.hide())}},{key:"setZIndex",value:function(e){this.renderer.setZIndex(e)}}])&&js(t.prototype,r),n&&js(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function As(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Is=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=t,this.map=null,this.opacity=1,this.parseNumber=!1,this.enableHighlight=!1,this.highlight={color:"#ADA91E"},this.baseHeightField=null,this.height=null,this.heightField="height",this.themeField=this.heightField,this.showLegend=!0,this.legendTitle=null,this.legendTheme="light",this.legendOrientation="horizontal",this.legendPosition="bottom-right",this._highlightLayerId="".concat(this.id,"-highlightLayer"),this._extend(this,r)}var t,r,n;return t=e,(r=[{key:"setLayerOptions",value:function(e){return this._extend(this,e),this}},{key:"setHighlightStyleOptions",value:function(e){return this._extend(this.highlight,e),this}},{key:"setData",value:function(e,t){var r=this;return r.data=e,null!=t&&(r.parseNumber=t),r.parseNumber&&r.data&&r.data.features&&r.data.features.map(function(e){return r.baseHeightField&&e.properties[r.baseHeightField]&&(e.properties[r.baseHeightField]=parseFloat(e.properties[r.baseHeightField])),r.heightField&&e.properties[r.heightField]&&(e.properties[r.heightField]=parseFloat(e.properties[r.heightField])),e}),this}},{key:"getData",value:function(){return this.data}},{key:"addTo",value:function(e){return this.map=e,this.map?(this.show(),this):this}},{key:"show",value:function(e){return this._extend(this,e),this._addLayer(),this.enableHighlight&&this._addHighLightLayer(),this.showLegend&&(this.legend||(this.legend=this._createLegendControl()),this.map.addControl(this.legend,this.legendPosition)),this}},{key:"remove",value:function(){if(!this.map)return this;var e=this.id?this.id:"theme3DLayer";return this.map.getLayer(e)&&(this.map.off("mousemove",e,this._onMouseMove.bind(this)),this.map.on("mouseout",e,this._onMouseMove.bind(this)),this.map.removeLayer(e)),this.map.getLayer(this._highlightLayerId)&&(this._selectFeatureId=null,this.map.removeLayer(this._highlightLayerId)),this.legend&&this.map.removeControl(this.legend),this}},{key:"getLayerStyleOptions",value:function(){}},{key:"getHighlightStyleOptions",value:function(){}},{key:"_createLegendControl",value:function(e){var t=this;function r(){}return r.prototype.onAdd=function(r){this._map=r,this._container=document.createElement("div");var n="legend-light";"dark"===t.legendTheme&&(n="legend-dark");var o=" legend-horizontal";if("vertical"===t.legendOrientation&&(o=" legend-vertical"),this._container.className="mapboxgl-ctrl legend "+n+o,e)this._container.innerHTML=e;else{var i=" <div class='legend-title'>"+(t.legendTitle||"")+"</div>",a="<div class='legend-content'>"+(t._createLegendElement.call(t)||"")+"</div>";this._container.innerHTML=i+a}return t._appendLegendCSSStyle(),this._container},r.prototype.onRemove=function(){this._container.parentNode.removeChild(this._container),this._map=void 0},new r}},{key:"_createLegendElement",value:function(){}},{key:"_addLayer",value:function(){var e=this.getLayerStyleOptions(),t=this.id?this.id:"theme3DLayer",r=this.sourceId=t+"Source";this.map.getSource(r)?(this.map.removeSource(r),this.map.addSource(r,{type:"geojson",data:this.data})):this.map.addSource(r,{type:"geojson",data:this.data}),this.map.addLayer({id:t,type:"fill-extrusion",source:r,paint:e}),this.map.moveLayer(t)}},{key:"_addHighLightLayer",value:function(){if(this.map){var e=this.map;e.addLayer({id:this._highlightLayerId,type:"fill-extrusion",source:this.sourceId,paint:this.getHighlightStyleOptions(),filter:["in","$id",""]}),this._selectFeatureId=null,e.on("mousemove",this.id,this._onMouseMove.bind(this)),e.on("mouseout",this.id,this._onMouseMove.bind(this))}}},{key:"_onMouseMove",value:function(e){var t=this,r=this.map,n=r.queryRenderedFeatures(e.point,{layers:[t.id]});if(t.highlight&&t.highlight.callback&&t.highlight.callback(n,e),!n||n.length<1)return t._clearHighlight.call(t),void(t._selectFeatureId=null);var o=n[0].id;t._selectFeatureId!==o&&(t._selectFeatureId=o,r.setFilter(t._highlightLayerId,["==","$id",t._selectFeatureId]))}},{key:"_clearHighlight",value:function(){this.map&&this.map.setFilter(this._highlightLayerId,["in","$id",""])}},{key:"_appendLegendCSSStyle",value:function(){var e=document.createElement("style");e.type="text/css";e.innerHTML="\n        .legend {\n            display: inline-block;\n            border-radius: 2px;\n            -moz-border-radius: 2px;\n            -webkit-border-radius: 2px;\n            font-size: 12px;\n            color: rgba(0, 0, 0, 0.8);\n            background-color: rgb(255, 255, 255);\n        }\n        .legend-light {\n            color: rgba(0, 0, 0, 0.8);\n            background-color: rgb(255, 255, 255);\n            box-shadow: 0px 0px 6px #bbbbbb;\n            -moz-box-shadow: 0px 6px 10px #bbbbbb;\n            -webkit-box-shadow: 0px 0px 6px #bbbbbb;\n        }\n        .legend-dark {\n            color: rgba(255, 255, 255, 0.8);\n            background-color: rgb(64, 64, 64);\n        }\n        .legend .legend-title {\n            min-height: 14px;\n            max-width: 500px;\n            padding:6px 10px;\n        }\n        .legend-light .legend-title {\n            color: rgba(0, 0, 0, 0.8);\n        }\n        .legend-dark .legend-title {\n            color: rgba(255, 255, 255, 0.8);\n        }\n        .legend-content{\n            padding:6px 10px;\n        }\n        "+this._legendCSSStyle(),document.getElementsByTagName("head")[0].appendChild(e)}},{key:"_legendCSSStyle",value:function(){return"\n        .legend ul {\n            padding: 0;\n            margin: 0 16px;\n            height: 100%;\n            display: block;\n            list-style: none;\n        }\n\n        .legend li {\n            vertical-align: middle;\n        }\n\n        .legend li span:first-child {\n            vertical-align: middle;\n        }\n\n        .legend li span:last-child {\n            line-height: 28px;\n            max-width: 200px;\n            vertical-align: middle;\n            white-space: nowrap;\n            overflow: hidden;\n            text-overflow: ellipsis;\n            -ms-text-overflow: ellipsis;\n        }\n\n        .legend-vertical li {\n            height: 28px;\n        }\n\n        .legend-vertical li span:first-child {\n            display: inline-block;\n            width: 60px;\n            height: 100%;\n        }\n\n        .legend-vertical li span:last-child {\n            display: inline-block;\n            margin-left: 16px;\n            height: 100%;\n        }\n\n        .legend-horizontal li {\n            height: 56px;\n            float: left;\n        }\n\n        .legend-horizontal li span:first-child {\n            display: block;\n            width: 100%;\n            height: 50%;\n        }\n\n        .legend-horizontal li span:last-child {\n            display: block;\n            vertical-align: middle;\n            width: 60px;\n            height: 50%;\n            text-align: center;\n        }\n        "}},{key:"_extend",value:function(e){for(var t=0;t<Object.getOwnPropertyNames(arguments).length;t++){var r=Object.getOwnPropertyNames(arguments)[t];if("caller"!=r&&"callee"!=r&&"length"!=r&&"arguments"!=r){var n=arguments[r];if(n)for(var o=0;o<Object.getOwnPropertyNames(n).length;o++){var i=Object.getOwnPropertyNames(n)[o];"caller"!=r&&"callee"!=r&&"length"!=r&&"arguments"!=r&&(e[i]=n[i])}}}return e}}])&&As(t.prototype,r),n&&As(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Rs(e){"@babel/helpers - typeof";return(Rs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ls(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ns(e,t){return(Ns=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Ds(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Fs(e);if(t){var o=Fs(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===Rs(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Bs(e)}(this,r)}}function Bs(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Fs(e){return(Fs=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Gs=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ns(e,t)}(i,Is);var t,r,n,o=Ds(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t)).heightStops=null,r.colorStops=null,r.base=null,r.legendRatio=1,r._extend(Bs(r),t),r}return t=i,(r=[{key:"getLayerStyleOptions",value:function(){var e=null==this.opacity?1:this.opacity;e=isNaN(parseFloat(e))?1:parseFloat(e);var t=/^[0-9]+.?[0-9]*$/,r={"fill-extrusion-color":{stops:this.colorStops,property:this.themeField||this.heightField,type:"interval",base:t.test(this.base)?this.base:1},"fill-extrusion-opacity":e};return this.heightStops?r["fill-extrusion-height"]={stops:this.heightStops,property:this.heightField||"height",base:t.test(this.base)?this.base:1}:this.height?r["fill-extrusion-height"]=this.height:r["fill-extrusion-height"]={property:this.heightField||"height",type:"identity"},this.baseHeightField&&(r["fill-extrusion-base"]={property:this.baseHeightField,type:"identity"}),r}},{key:"getHighlightStyleOptions",value:function(){return{"fill-extrusion-color":this.highlight&&null!=this.highlight.color?this.highlight.color:"#ADA91E","fill-extrusion-height":{stops:this.heightStops,property:this.heightField},"fill-extrusion-opacity":this.highlight&&this.highlight.opacity||.6}}},{key:"_createLegendElement",value:function(){var e,t=this.colorStops&&this.colorStops.length||0,r="<ul>";for(e=0;e<t;e++){var n=this.colorStops[e][0],o=this._getWrapperText(n);if(e===t-1)o="> "+o;else o=o+"-"+this._getWrapperText(this.colorStops[e+1][0]);r+="<li><span style='background-color:"+this.colorStops[e][1]+";'></span><span>"+o+"</span></li>"}return r+="</ul>"}},{key:"_getWrapperText",value:function(e){var t=e*(null==this.legendRatio?1:parseFloat(this.legendRatio)),r=parseFloat(t);return r%1e6<=1e6?r.toString():parseInt(r/1e3)+"k"}}])&&Ls(t.prototype,r),n&&Ls(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function zs(e){"@babel/helpers - typeof";return(zs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Us(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Vs(e,t){return(Vs=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Ws(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Ys(e);if(t){var o=Ys(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===zs(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function Ys(e){return(Ys=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Hs=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Vs(e,t)}(i,ss);var t,r,n,o=Ws(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t)).style=t.style,r.isHoverAble=t.isHoverAble,r.highlightStyle=t.highlightStyle,r.themeField=t.themeField,r.styleGroups=t.styleGroups,r}return t=i,(r=[{key:"createThematicFeature",value:function(e){var t=this.getStyleByData(e),r={};r.nodesClipPixel=this.nodesClipPixel,r.isHoverAble=this.isHoverAble,r.isMultiHover=this.isMultiHover,r.isClickAble=this.isClickAble,r.highlightStyle=Ya.transformStyle(this.highlightStyle);for(var n=new es(e,this,Ya.transformStyle(t),r),o=0;o<n.shapes.length;o++)this.renderer.addShape(n.shapes[o]);return n}},{key:"getStyleByData",value:function(e){var t={},r=e;if(t=j.copyAttributesWithClip(t,this.style),this.themeField&&this.styleGroups&&this.styleGroups.length>0&&r.attributes){var n=this.themeField,o=r.attributes,i=this.styleGroups,a=!1,s=null;for(var u in o)if(n===u){a=!0,s=o[u];break}if(a)for(var l=0,c=i.length;l<c;l++)if(s>=i[l].start&&s<i[l].end){var f=i[l].style;t=j.copyAttributesWithClip(t,f)}}return r.style&&!0===this.isAllowFeatureStyle&&(t=j.copyAttributesWithClip(r.style)),t}}])&&Us(t.prototype,r),n&&Us(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Xs(e){"@babel/helpers - typeof";return(Xs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qs(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Js(e,t){return(Js=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Zs(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Ks(e);if(t){var o=Ks(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===Xs(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function Ks(e){return(Ks=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Qs=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Js(e,t)}(i,Wo);var t,r,n,o=Zs(i);function i(e,t,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e,t,r)).symbolType=t,n.symbolSetting=r.symbolSetting,n.themeField=r.themeField,n}return t=i,(r=[{key:"setSymbolType",value:function(e){this.symbolType=e,this.redraw()}},{key:"createThematicFeature",value:function(e){var t;return Tr[this.symbolType]&&this.themeField&&this.symbolSetting&&(t=new Tr[this.symbolType](e,this,[this.themeField],this.symbolSetting)),!!t&&(t.assembleShapes(),t)}}])&&qs(t.prototype,r),n&&qs(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function $s(e){"@babel/helpers - typeof";return($s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function eu(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function tu(e,t){return(tu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function ru(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=ou(e);if(t){var o=ou(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===$s(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return nu(e)}(this,r)}}function nu(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ou(e){return(ou=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var iu=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&tu(e,t)}(i,Is);var t,r,n,o=ru(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t)).colorStops=null,r._extend(nu(r),t),r}return t=i,(r=[{key:"getLayerStyleOptions",value:function(){var e=null==this.opacity?1:this.opacity;e=isNaN(parseFloat(e))?1:parseFloat(e);var t={"fill-extrusion-color":{stops:this.colorStops,property:this.themeField,type:"categorical"},"fill-extrusion-opacity":e};return null!=this.height?t["fill-extrusion-height"]=this.height:t["fill-extrusion-height"]={property:this.heightField||"height",type:"categorical"},this.baseHeightField&&(t["fill-extrusion-base"]={property:this.baseHeightField,type:"identity"}),t}},{key:"getHighlightStyleOptions",value:function(){var e={"fill-extrusion-color":this.highlight&&null!=this.highlight.color?this.highlight.color:"#ADA91E","fill-extrusion-height":{stops:this.heightStops,property:this.heightField,type:"categorical"},"fill-extrusion-opacity":this.highlight&&this.highlight.opacity||.6};return null!=this.height&&(e["fill-extrusion-height"]=this.height||0),e}},{key:"_createLegendElement",value:function(){for(var e="<ul>",t=this.colorStops&&this.colorStops.length||0,r=0;r<t;r++){var n=this.colorStops[r][0];e+="<li><span style='background-color:"+this.colorStops[r][1]+";'></span><span>"+n+"</span></li>"}return e+="</ul>"}}])&&eu(t.prototype,r),n&&eu(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function au(e){"@babel/helpers - typeof";return(au="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function su(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function uu(e,t){return(uu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function lu(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=cu(e);if(t){var o=cu(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===au(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function cu(e){return(cu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var fu=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&uu(e,t)}(i,ss);var t,r,n,o=lu(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t)).themeField=t.themeField,r.style=t.style,r.styleGroups=t.styleGroups,r.isHoverAble=t.isHoverAble,r.highlightStyle=t.highlightStyle,r}return t=i,(r=[{key:"createThematicFeature",value:function(e){var t=this.getStyleByData(e),r={};r.nodesClipPixel=this.nodesClipPixel,r.isHoverAble=this.isHoverAble,r.isMultiHover=this.isMultiHover,r.isClickAble=this.isClickAble,r.highlightStyle=Ya.transformStyle(this.highlightStyle);for(var n=new es(e,this,Ya.transformStyle(t),r),o=0;o<n.shapes.length;o++)this.renderer.addShape(n.shapes[o]);return n}},{key:"getStyleByData",value:function(e){var t={},r=e;if(t=j.copyAttributesWithClip(t,this.style),this.themeField&&this.styleGroups&&this.styleGroups.length>0&&r.attributes){var n=this.themeField,o=r.attributes,i=this.styleGroups,a=!1,s=null;for(var u in o)if(n===u){a=!0,s=o[u];break}if(a)for(var l=0,c=i.length;l<c;l++)if(s.toString()===i[l].value.toString()){var f=i[l].style;t=j.copyAttributesWithClip(t,f)}}return r.style&&!0===this.isAllowFeatureStyle&&(t=j.copyAttributesWithClip(r.style)),t}}])&&su(t.prototype,r),n&&su(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function hu(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function pu(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function du(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var yu={color:[0,0,0,255],opacity:.8,radius:10,radiusScale:1,radiusMinPixels:0,radiusMaxPixels:Number.MAX_SAFE_INTEGER,strokeWidth:1,outline:!1},vu=function(){function e(t,r,n,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var i=j.assign(this,yu,r);this.id=t,this.graphics=[].concat(i.graphics),this.mapOptions=o,this.functions=n,this.visibility=!0,this.init()}var t,r,n;return t=e,(r=[{key:"init",value:function(){this.canvas&&this.mapOptions.targetElement.appendChild(this.canvas),this._initContainer();var e=this.getState(),t=e.data,r=e.color,n=e.radius,o=e.opacity,i=e.highlightColor,a=e.radiusScale,s=e.radiusMinPixels,u=e.radiusMaxPixels,l=e.strokeWidth,c=e.outline,f=this,h={id:"scatter-plot",data:t,pickable:Boolean(this.onClick)||Boolean(this.onHover),autoHighlight:!0,color:r,opacity:o,radius:n,radiusScale:a,highlightColor:i,radiusMinPixels:s,radiusMaxPixels:u,strokeWidth:l,outline:c,isGeographicCoordinateSystem:this.isGeographicCoordinateSystem,coordinateSystem:this.coordinateSystem,getPosition:function(e){if(!e)return[0,0,0];var t=e.getLngLat();return t&&[t.lng,t.lat,0]},getColor:function(e){var t=e&&e.getStyle();return t&&t.color||f.color},getRadius:function(e){var t=e&&e.getStyle();return t&&t.radius||f.radius},updateTriggers:{getColor:[r],getRadius:[n]}};this.onClick&&(h.onClick=this.onClick),this.onHover&&(h.onHover=this.onHover),this.layer=new window.DeckGL.ScatterplotLayer(h);var p={};for(var d in e)p[d]=e[d];var y=parseInt(this.canvas.style.width),v=parseInt(this.canvas.style.height);p.width=y,p.height=v,p.layers=[this.layer],p.canvas=this.canvas,this.deckGL=new window.DeckGL.experimental.DeckGLJS(p),this.draw()}},{key:"setStyle",value:function(e){var t={color:this.color,radius:this.radius,opacity:this.opacity,highlightColor:this.highlightColor,radiusScale:this.radiusScale,radiusMinPixels:this.radiusMinPixels,radiusMaxPixels:this.radiusMaxPixels,strokeWidth:this.strokeWidth,outline:this.outline};j.assign(this,t,e),this.update()}},{key:"setGraphics",value:function(e){this.graphics=this.graphics||[],this.graphics.length=0;var t=j.isArray(e)?[].concat(e):[e];this.layer.props.data||(this.layer.props.data=[]),this.layer.props.data.length=0;for(var r=0;r<t.length;r++)this.layer.props.data.push(t[r]);this.update()}},{key:"addGraphics",value:function(e){this.graphics=this.graphics||[];var t=j.isArray(e)?[].concat(e):[e];this.layer.props.data||(this.layer.props.data=[]);for(var r=0;r<t.length;r++)this.layer.props.data.push(t[r]);this.update()}},{key:"getGraphicBy",value:function(e,t){var r=null;for(var n in this.graphics)if(this.graphics[n][e]===t){r=this.graphics[n];break}return r}},{key:"getGraphicById",value:function(e){return this.getGraphicBy("id",e)}},{key:"getGraphicsByAttribute",value:function(e,t){var r,n=[];for(var o in this.graphics)(r=this.graphics[o])&&r.attributes&&r.attributes[e]===t&&n.push(r);return n}},{key:"removeGraphics",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(!e||0===e.length||e===this.graphics)return this.graphics.length=0,this.layer.props.data&&(this.layer.props.data.length=0),void this.update();j.isArray(e)||(e=[e]);for(var t=e.length-1;t>=0;t--){var r=e[t],n=j.indexOf(this.graphics,r);-1!==n&&this.graphics.splice(n,1)}this.update()}},{key:"update",value:function(){if("Awaiting state"!==this.layer.lifecycle){this.layer.setChangeFlags({dataChanged:!0,propsChanged:!0,viewportChanged:!0,updateTriggersChanged:!0});var e=this.getState(),t=parseInt(this.canvas.style.width),r=parseInt(this.canvas.style.height);e.width=t,e.height=r,this.layer.setState(e)}}},{key:"clear",value:function(){this.removeGraphics(),this.deckGL.finalize()}},{key:"remove",value:function(){this.mapOptions.targetElement.removeChild(this.canvas)}},{key:"destroy",value:function(){this.remove(),this.clear()}},{key:"moveTo",value:function(e,t){var r=document.getElementById(this.id);if(t=void 0===t||t){var n=document.getElementById(e);r&&n&&n.parentNode.insertBefore(r,n)}else{var o=document.getElementById(e);if(r){if(o.nextSibling)return void o.parentNode.insertBefore(r,o.nextSibling);o.parentNode.appendChild(r)}}}},{key:"setVisibility",value:function(e){this.canvas&&e!==this.visibility&&(this.visibility=e,this.canvas.style.display=e?"block":"none")}},{key:"draw",value:function(){var e=this.getState(),t={};for(var r in e)t[r]=e[r];var n=parseInt(this.canvas.style.width),o=parseInt(this.canvas.style.height);t.width=n,t.height=o,t.layers=[this.layer],t.canvas=this.canvas,this.deckGL.setProps(t)}},{key:"_initContainer",value:function(){this.canvas=this._createCanvas(this.mapOptions.mapElement),this.mapOptions.targetElement.appendChild(this.canvas)}},{key:"_createCanvas",value:function(e){var t=document.createElement("canvas");return this.id&&(t.id=this.id),t.style.position="absolute",t.style.top="0px",t.style.left="0px",t.style.cursor="",t.width=parseInt(e.style.width),t.height=parseInt(e.style.height),t.style.width=e.style.width,t.style.height=e.style.height,t}},{key:"getState",value:function(){var e=this.functions.getMapState();return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?hu(Object(r),!0).forEach(function(t){pu(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hu(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({data:this.graphics,color:this.color,radius:this.radius,opacity:this.opacity,highlightColor:this.highlightColor,radiusScale:this.radiusScale,radiusMinPixels:this.radiusMinPixels,radiusMaxPixels:this.radiusMaxPixels,strokeWidth:this.strokeWidth,outline:this.outline},e)}}])&&du(t.prototype,r),n&&du(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function gu(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var mu=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options=r,this.id=t||j.createUniqueID("graphicLayer_"),this.type="custom",this.renderingMode="3d",this.overlay=!0}var t,r,n;return t=e,(r=[{key:"addTo",value:function(e){return this.onAdd(e),this}},{key:"onAdd",value:function(e){this.map=e,this.renderer=new vu(this.id,this.options,{getMapState:this.getMapState.bind(this)},{targetElement:this.map.getCanvasContainer(),mapElement:this.map.getCanvas()})}},{key:"onRemove",value:function(){this.remove(),this.clear()}},{key:"render",value:function(){this.renderer.draw()}},{key:"setStyle",value:function(e){this.renderer&&this.renderer.setStyle(e)}},{key:"setGraphics",value:function(e){this.renderer&&this.renderer.setGraphics(e)}},{key:"addGraphics",value:function(e){this.renderer&&this.renderer.addGraphics(e)}},{key:"getGraphicBy",value:function(e,t){return this.renderer&&this.renderer.getGraphicBy(e,t)}},{key:"getGraphicById",value:function(e){return this.getGraphicBy("id",e)}},{key:"getGraphicsByAttribute",value:function(e,t){return this.renderer&&this.renderer.getGraphicsByAttribute(e,t)}},{key:"removeGraphics",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.renderer&&this.renderer.removeGraphics(e)}},{key:"clear",value:function(){this.renderer&&this.renderer.clear()}},{key:"remove",value:function(){this.renderer&&this.renderer.remove()}},{key:"moveTo",value:function(e,t){this.renderer.moveTo(e,t)}},{key:"setVisibility",value:function(e){this.renderer.setVisibility(e)}},{key:"getState",value:function(){return this.renderer.getState()}},{key:"getMapState",value:function(){var e={},t=this.map.getCenter(),r={longitude:t.lng,latitude:t.lat,zoom:this.map.getZoom(),maxZoom:this.map.getMaxZoom(),pitch:this.map.getPitch(),bearing:this.map.getBearing()};for(var n in r)e[n]=r[n];return this.map.getCRS&&this.map.getCRS()!==o().CRS.EPSG3857&&(e.coordinateSystem=this.coordinateSystem,e.isGeographicCoordinateSystem=this.isGeographicCoordinateSystem),e}}])&&gu(t.prototype,r),n&&gu(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),bu=function(){try{return THREE}catch(e){return{}}}();function wu(e,t,r){if(e===r||e===t)return e;var n=r-t;return((e-t)%n+n)%n+t}function _u(e){return e*Math.PI/180}var xu={matrix:[1,-1,0,0],projection:{R:6378137,minZoom:0,maxZoom:22,nativeMaxZoom:19,RAD:Math.PI/180,METERS_PER_DEGREE:6378137*Math.PI/180,MAX_LATITUDE:85.0511287798,project:function(e){var t=this.RAD,r=this.METERS_PER_DEGREE,n=this.MAX_LATITUDE,o=e instanceof Array?{lng:e[0],lat:e[1]}:{lng:e.lng,lat:e.lat},i=o.lng,a=Math.max(Math.min(n,o.lat),-n);return{x:i*r,y:(0===a?0:Math.log(Math.tan((90+a)*t/2))/t)*r}},unproject:function(e){var t,r=e.x,n=e.y,o=this.RAD,i=this.METERS_PER_DEGREE;return 0===n?t=0:(t=n/i,t=(2*Math.atan(Math.exp(t*o))-Math.PI/2)/o),{lng:wu(r/i,-180,180),lat:wu(t,-this.MAX_LATITUDE,this.MAX_LATITUDE)}},locate:function(e,t,r){if(!e)return null;if(t=t||0,r=r||0,!t&&!r)return e;var n=e.lng;if(0!==t){var o=Math.abs(t),i=_u(e.lng);n=wu(180*(i+=2*Math.sqrt(Math.pow(Math.sin(o/(2*this.R)),2)/Math.pow(Math.cos(i),2))*(o>0?1:-1))/Math.PI,-180,180)}var a=e.lat;if(0!==r){var s=Math.abs(r),u=_u(e.lat);a=wu(180*(u+=2*Math.sin(s/(2*this.R))*(s>0?1:-1))/Math.PI,-90,90)}return{lng:n,lat:a}},getResolution:function(e){if(!this.resolutions){for(var t=[],r=12756274*Math.PI,n=0;n<=this.maxZoom;n++)t[n]=r/(256*Math.pow(2,n));this.resolutions=t}var o=0|e,i=this.resolutions.length;o=o<0?0:o>i-1?i-1:o;var a=this.resolutions[o];return(0|e)!==e&&o!==i-1?a+(this.resolutions[o+1]-a)*(e-o):a}},project:function(e){return this.projection.project(e)},unproject:function(e){return this.projection.unproject(e)},lngLatToPoint:function(e,t){var r=this.project(e);return this.transform(r,this.projection.getResolution(t))},locate:function(e,t,r){return this.projection.locate(e,t,r)},transform:function(e,t){return{x:this.matrix[0]*(e.x-this.matrix[2])/t,y:this.matrix[1]*(e.y-this.matrix[3])/t}}};function Su(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Ou=xu.projection,Pu=bu.Color,Eu=bu.Scene,ku=bu.WebGLRenderer,Mu=bu.PerspectiveCamera,Cu=bu.Vector3,ju=bu.Shape,Tu=bu.Mesh,Au=bu.ExtrudeGeometry,Iu=Math.PI/180,Ru=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame,Lu=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame,Nu=function(){function e(t,r,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._layer=t,this.renderer=r||"gl",this.options=n}var t,r,n;return t=e,(r=[{key:"setMap",value:function(e){this.map=e}},{key:"render",value:function(){this._layer&&(this.prepare(),this._layer.fire("initialized"),this._layer&&this._layer.draw(this.context,this.scene,this.camera),this._layer.fire("draw"),this.renderScene())}},{key:"update",value:function(){this.remove(),this.render()}},{key:"renderScene",value:function(){this.locationCamera(),this.animationFrame=this.renderFrame(function(){this.animationFrame=null,this.context&&this.context.render(this.scene,this.camera)}.bind(this))}},{key:"renderFrame",value:function(e){return Ru(function(){e&&"function"==typeof e&&e()})}},{key:"resize",value:function(){this._resetElementSize(this.container),this._resetElementSize(this.canvas);var e=this.canvas.width,t=this.canvas.height,r=this.getMapSize();this.camera.aspect=e/t,this.camera.updateProjectionMatrix(),this.context.setSize(r.width,r.height),this.renderScene()}},{key:"prepare",value:function(){if(!this.map)return new Error("map object is necessary");this.canvas?this.clear(this.context):(this._initContainer(),this._initThreeRenderer(),this._layer.fire("rendererinitialized"))}},{key:"getMapSize",value:function(){var e=this.map.getContainer();return{width:e.clientWidth,height:e.clientHeight}}},{key:"cancelFrame",value:function(){null!=this.animationFrame&&Lu(this.animationFrame)}},{key:"remove",value:function(){null!=this.animationFrame&&Lu(this.animationFrame),this.container.removeChild(this.canvas),this.container.parentNode.removeChild(this.container),this.context=null,this.canvas=null,this.container=null}},{key:"clear",value:function(e){e&&e.clear&&e.clear(),e&&e.clearRect&&e.clearRect(0,0,e.canvas.width,e.canvas.height)}},{key:"getScale",value:function(e){var t=this.map,r=null==e?t.getZoom():e,n=Ou.getResolution(Ou.nativeMaxZoom);return Ou.getResolution(r)/n}},{key:"getCanvasContainer",value:function(){return this.container}},{key:"getCanvas",value:function(){return this.canvas}},{key:"locationCamera",value:function(){var e=this.map,t=this.getMapSize(),r=e.transform.zoomScale(Ou.nativeMaxZoom-e.getZoom()-1),n=Math.tan(e.transform.fov/2*Iu),o=this.camera,i=e.getPitch()*Iu,a=-r*t.height/2/n;o.position.z=a*Math.cos(i);var s=xu.lngLatToPoint(e.getCenter(),Ou.nativeMaxZoom),u=Math.sin(i)*a,l=e.getBearing()*Iu;o.position.x=s.x+u*Math.sin(l),o.position.y=s.y-u*Math.cos(l),o.up.set(Math.sin(l),-Math.cos(l),0),o.lookAt(new bu.Vector3(s.x,s.y,0)),o.updateProjectionMatrix()}},{key:"toThreeShape",value:function(e){var t=this;if(!e)return null;var r=this.getCoordinatesCenter(e),n=this.lngLatToPosition(r),o=e.map(function(e){return t.lngLatToPosition({lng:e[0],lat:e[1]}).sub(n)});return new ju(o)}},{key:"toThreeMesh",value:function(e,t,r,n){if(!e)return null;var o=e;n&&(o=this.removeDuplicatedCoordinates(e));var i=this.distanceToThreeVector3(t,t).x,a=this.toThreeShape(o),s=new Au(a,{amount:i,bevelEnabled:!0}),u=new Tu(s,r),l=this.lngLatToPosition(this.getCoordinatesCenter(o));return u.position.set(l.x,l.y,-i),u}},{key:"addObject",value:function(e,t){t&&e&&this.setPosition(e,t),this.scene.add(e)}},{key:"clearMesh",value:function(){var e=this.scene;if(!e)return this;for(var t=e.children.length-1;t>=0;t--)e.children[t]instanceof bu.Mesh&&e.remove(e.children[t]);return this}},{key:"clearAll",value:function(e){var t=this.scene;if(!t)return this;for(var r=t.children.length-1;r>=0;r--)!e&&t.children[r]instanceof bu.Camera||t.remove(t.children[r]);return this}},{key:"setPosition",value:function(e,t){if(!e||!t)return this;var r=this.lngLatToPosition(t);return e.position.set(r.x,r.y,r.z),this}},{key:"lngLatToPosition",value:function(e){var t=xu.projection.nativeMaxZoom,r=xu.lngLatToPoint(e,t);return new Cu(r.x,r.y,-0)}},{key:"distanceToThreeVector3",value:function(e,t,r){var n=this.map,o=r||n.getCenter(),i=xu.projection.nativeMaxZoom,a=xu.locate(o,e,t),s=xu.lngLatToPoint(o,i),u=xu.lngLatToPoint(a,i),l=Math.abs(u.x-s.x)*Math.sign(e),c=Math.abs(u.y-s.y)*Math.sign(t);return new Cu(l,c,0)}},{key:"removeDuplicatedCoordinates",value:function(e){function t(e,t){return e[0]===t[0]&&e[1]===t[1]}for(var r=[].concat(e),n=r.length-1;n>=1;n--)t(r[n],r[n-1])&&r.splice(n,1);return t(r[0],r[r.length-1])&&r.splice(r.length-1,1),r}},{key:"getCoordinatesCenter",value:function(e){for(var t=0,r=0,n=0,o=0,i=e.length;o<i;o++)e[o]&&(t+=e[o][0],r+=e[o][1],n++);return{lng:t/n,lat:r/n}}},{key:"_initContainer",value:function(){var e=this._createCanvas(),t=this.container=document.createElement("div");t.id=this._layer.id,t.className="threejs-wrapper",t.style.position="absolute",t.style.left="0px",t.style.top="0px",t.style.overflow="hidden",this._resetElementSize(t),t.appendChild(e),this.map.getCanvasContainer().appendChild(t)}},{key:"_createCanvas",value:function(){if(!this.canvas){var e=this.canvas=document.createElement("canvas");return e.className="threejs-overlay",e.style.outline="none",this._resetElementSize(e),e}}},{key:"_resetElementSize",value:function(e){if(e){var t=this.getMapSize(),r=window.devicePixelRatio?window.devicePixelRatio:1,n=r*t.width,o=r*t.height;e.width=n,e.height=o,e.style.width=t.width+"px",e.style.height=t.height+"px"}}},{key:"_initThreeRenderer",value:function(){var e,t=this.map,r=this.getMapSize();"gl"===(this.renderer||"gl")&&((e=new ku({canvas:this.canvas,alpha:!0,antialias:!0,preserveDrawingBuffer:!0},this.options)).autoClear=!0,e.clear()),e.setClearColor(new Pu(1,1,1),0),e.canvas=this.canvas,this.context=e;var n=t.transform.fov,o=Math.tan(n/2*Iu),i=this.getScale(Ou.minZoom)/this.getScale(Ou.nativeMaxZoom)*r.height/2/o;this.camera=new Mu(n,r.width/r.height,1,i),this.scene=new Eu,this.scene.add(this.camera)}}])&&Su(t.prototype,r),n&&Su(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Du(e){"@babel/helpers - typeof";return(Du="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Bu(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Fu(e,t){return(Fu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Gu(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Uu(e);if(t){var o=Uu(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===Du(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return zu(e)}(this,r)}}function zu(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Uu(e){return(Uu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Vu=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Fu(e,t)}(a,o().Evented);var t,r,n,i=Gu(a);function a(e,t,r){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(n=i.call(this)).id=e,n.type="custom",n.renderingMode="3d",n.overlay=!0,n.options=r;var o=r&&r.threeOptions;return n.renderer=new Nu(zu(n),t,o),n}return t=a,(r=[{key:"onAdd",value:function(e){var t=this;return t._map=e,t.renderer.setMap(e),t.renderer.render(),t.on("render",function(){this.context&&this.context.render(this.scene,this.camera)}.bind(t.renderer)),this}},{key:"addTo",value:function(e){return e.addLayer(this),this}},{key:"toThreeShape",value:function(e){return this.renderer.toThreeShape(e)}},{key:"toThreeMesh",value:function(e,t,r,n){return this.renderer.toThreeMesh(e,t,r,n)}},{key:"addObject",value:function(e,t){this.renderer&&this.renderer.addObject(e,t)}},{key:"getScene",value:function(){return this.renderer.scene}},{key:"getCamera",value:function(){return this.renderer.camera}},{key:"getThreeRenderer",value:function(){return this.renderer.context}},{key:"clearMesh",value:function(){return this.renderer.clearMesh(),this}},{key:"clearAll",value:function(e){return this.renderer.clearAll(e),this}},{key:"setPosition",value:function(e,t){return this.renderer.setPosition(e,t)}},{key:"lngLatToPosition",value:function(e){return this.renderer.lngLatToPosition(e)}},{key:"distanceToThreeVector3",value:function(e,t,r){var n=this._map,o=r||n.getCenter();return this.renderer.distanceToThreeVector3(e,t,o)}},{key:"removeDuplicatedCoordinates",value:function(e){this.renderer.removeDuplicatedCoordinates(e)}},{key:"getCoordinatesCenter",value:function(e){return this.renderer.getCoordinatesCenter(e)}},{key:"render",value:function(){this._update()}},{key:"getCanvasContainer",value:function(){return this.renderer.getCanvasContainer()}},{key:"getCanvas",value:function(){return this.renderer.getCanvas()}},{key:"remove",value:function(){this.renderer.remove(),this._map=null}},{key:"draw",value:function(){return this}},{key:"renderScene",value:function(){return this.renderer.renderScene(),this.fire("renderscene"),this}},{key:"_update",value:function(){return this.renderScene(),this.fire("render"),this}}])&&Bu(t.prototype,r),n&&Bu(t,n),Object.defineProperty(t,"prototype",{writable:!1}),a}();function Wu(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Yu=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options=t,this.rootCanvas=null,this.features=[],this.visibility=!0,this.opacity=t.opacity?t.opacity:1,this.colors=t.colors?t.colors:["blue","cyan","lime","yellow","red"],this.useGeoUnit=!!t.useGeoUnit&&t.useGeoUnit,this.radius=t.radius?t.radius:50,this.featureWeight=t.featureWeight?t.featureWeight:null,this.maxWeight=null,this.minWeight=null,this.canvasContext=null,this.maxWidth=null,this.maxHeight=null,this.extent={},this.mapElement=t.mapElement,this._createCanvasContainer(t.targetElement,t.size)}var t,r,n;return t=e,(r=[{key:"addFeatures",value:function(e){this.features=this.toiClientFeature(e),this.refresh()}},{key:"refresh",value:function(){0!==this.features.length&&this.updateHeatPoints(this.extent)}},{key:"setOpacity",value:function(e){e!==this.opacity&&(this.opacity=e,j.modifyDOMElement(this.rootCanvas,null,null,null,null,null,null,e))}},{key:"updateHeatPoints",value:function(e){this.features&&this.features.length>0?this.convertFastToPixelPoints(e):this.canvasContext.clearRect(0,0,this.maxWidth,this.maxWidth)}},{key:"convertFastToPixelPoints",value:function(e){var t,r,n,o,i,a,s,u=[],l=e.getEast()-e.getWest(),c=e.getNorth()-e.getSouth(),f=this.mapElement;o=l/f.width>c/f.height?l/f.width:c/f.height,this.useRadius=this.useGeoUnit?parseInt(this.radius/o):this.radius;for(var h=0;h<this.features.length;h++){var p=this.features[h],d=p.geometry,y=this.getPixelXY(new R(d.x,d.y));this.featureWeight?(y.weight=p.attributes[this.featureWeight],this.maxWeight||(i=i||y.weight,a=a||y.weight,i=Math.max(i,y.weight),a=Math.min(a,y.weight))):y.weight=1,t=Math.floor(y.x),r=Math.floor(y.y),n=y.weight,u.push([t,r,n])}this.maxWeight?this.draw(u,this.maxWeight):(s=i&&a?(i+a)/2:1,this.draw(u,s))}},{key:"draw",value:function(e,t){if(!(this.maxHeight>0&&this.maxWidth>0))return!1;var r=this.canvasContext;r.setTransform(1,0,0,1,0,0),this.canvasContext.clearRect(0,0,this.maxWidth,this.maxHeight),this.drawCircle(this.useRadius),this.createGradient();for(var n=0;n<e.length;n++){var o=e[n];this.canvasContext.globalAlpha=Math.max(o[2]/t,.05),this.canvasContext.drawImage(this.circle,o[0]-this.useRadius,o[1]-this.useRadius)}var i=r.getImageData(0,0,this.maxWidth,this.maxHeight);this.colorize(i.data,this.grad),r.putImageData(i,0,0)}},{key:"colorize",value:function(e,t){for(var r,n=0;n<e.length;n+=4)(r=4*e[n+3])&&(e[n]=t[r],e[n+1]=t[r+1],e[n+2]=t[r+2])}},{key:"drawCircle",value:function(e){var t=e/2,r=this.circle=document.createElement("canvas"),n=r.getContext("2d");r.height=2*e,r.width=2*e,n.shadowOffsetX=n.shadowOffsetY=2*e,n.shadowBlur=t,n.shadowColor="#000000",n.beginPath(),n.arc(-e,-e,e/2,0,2*Math.PI,!0),n.closePath(),n.fill()}},{key:"createGradient",value:function(){var e=this.colors,t=document.createElement("canvas"),r=t.getContext("2d"),n=r.createLinearGradient(0,0,0,256);t.height=256,t.width=1;for(var o=1,i=0,a=e.length;i<a;i++)n.addColorStop(o/a,e[i]),o++;r.fillStyle=n,r.fillRect(0,0,1,256),this.grad=r.getImageData(0,0,1,256).data}},{key:"getPixelXY",value:function(e){var t;if(e instanceof V||e instanceof Cr){var r=this.options.convertLatlonToPixel({lon:e.x,lat:e.y});t={x:parseInt(r.x),y:parseInt(r.y)}}if(e instanceof R){var n=this.options.convertLatlonToPixel(e);t={x:parseInt(n.x),y:parseInt(n.y)}}return t}},{key:"_createCanvasContainer",value:function(e){this.rootCanvas=document.createElement("canvas"),this.rootCanvas.id=this.options.id,this.rootCanvas.width=this.maxWidth=parseInt(this.mapElement.style.width),this.rootCanvas.height=this.maxHeight=parseInt(this.mapElement.style.height),this.canvasContext=this.rootCanvas.getContext("2d");var t=window.devicePixelRatio||1;1!==t&&this.canvasContext&&this.canvasContext.scale(t,t),j.modifyDOMElement(this.rootCanvas,null,{x:0,y:0},{w:this.maxWidth,h:this.maxHeight},"absolute",null,null,this.opacity),e.appendChild(this.rootCanvas)}},{key:"toiClientFeature",value:function(e){j.isArray(e)||(e=[e]);for(var t=[],r=0;r<e.length;r++)if(e[r]instanceof ze)t.push(e[r]);else if(-1!=["FeatureCollection","Feature","Geometry"].indexOf(e[r].type)){var n=new br;t=t.concat(n.read(e[r]))}else{if(!e[r].geometry||!e[r].geometry.parts)throw new Error("Features[".concat(r,"]'s type does not match, please check."));t.push(Lo.fromJson(e[r]).toFeature())}return t}},{key:"removeFeatures",value:function(e){if(e&&0!==e.length&&this.features&&0!==this.features.length){if(e===this.features)return this.removeAllFeatures();j.isArray(e)||(e=[e]);for(var t,r,n=[],o=0,i=e.length;o<i;o++)t=e[o],-1!==(r=j.indexOf(this.features,t))?this.features.splice(r,1):n.push(t);var a=0==n.length;return this.refresh(),{succeed:a,heatPointsFailedRemoved:n}}}},{key:"removeAllFeatures",value:function(){this.features=[],this.refresh()}},{key:"removeFromMap",value:function(){this.removeAllFeatures(),this.options.targetElement.removeChild(this.rootCanvas)}},{key:"setVisibility",value:function(e){this.rootCanvas&&e!==this.visibility&&(this.visibility=e,this.rootCanvas.style.display=e?"block":"none")}},{key:"setExtent",value:function(e){this.extent=e}},{key:"_hide",value:function(){this.rootCanvas.style.display="none"}},{key:"_show",value:function(){this.rootCanvas.style.display="block"}}])&&Wu(t.prototype,r),n&&Wu(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Hu(e){"@babel/helpers - typeof";return(Hu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Xu(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function qu(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Xu(Object(r),!0).forEach(function(t){Ju(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Xu(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Ju(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Zu(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ku(e,t){return(Ku=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Qu(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=$u(e);if(t){var o=$u(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===Hu(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function $u(e){return($u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var el=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ku(e,t)}(a,o().Evented);var t,r,n,i=Qu(a);function a(e,t){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),r=i.call(this);var n=t||{};return r.options=n,r.name=e,r.id=n.id?n.id:j.createUniqueID("HeatMapLayer_"),r.loadWhileAnimating=void 0===n.loadWhileAnimating||n.loadWhileAnimating,r.features={},r.EVENT_TYPES=["featuresadded","featuresremoved","featuresdrawcompleted"],r.type="custom",r.renderingMode="3d",r.overlay=!0,r}return t=a,(r=[{key:"onAdd",value:function(e){this.map=e;var t=this.map.getCanvasContainer(),r=this.map.getCanvas();this.renderer=new Yu(qu(qu({id:this.id},this.options),{},{convertLatlonToPixel:this._convertLatlonToPixel.bind(this),targetElement:t,mapElement:r})),this.features.features&&this.features.features.length&&(this.renderer.setExtent(this.map.getBounds()),this.renderer.addFeatures(this.features))}},{key:"onRemove",value:function(){this.removeAllFeatures(),this.renderer.removeFromMap(),this.features={},this.renderer=null}},{key:"render",value:function(){this.refresh()}},{key:"addFeatures",value:function(e){this.renderer?this.renderer.addFeatures(e):this.features=e,this.fire(this.EVENT_TYPES[0],{features:e,succeed:!0})}},{key:"refresh",value:function(){this.map&&(this.renderer.setExtent(this.map.getBounds()),this.renderer.refresh())}},{key:"setOpacity",value:function(e){e!==this.opacity&&(this.renderer.setOpacity(e),null!==this.map&&this.fire("changelayer",{layer:this,property:"opacity"}))}},{key:"updateHeatPoints",value:function(e){this.renderer.updateHeatPoints(e)}},{key:"getPixelXY",value:function(e){return this.renderer.getPixelXY(e)}},{key:"removeFeatures",value:function(e){var t=this.renderer.removeFeatures(e);if(t){var r=t.heatPointsFailedRemoved,n=t.succeed;this.fire(this.EVENT_TYPES[1],{features:r,succeed:n})}}},{key:"removeAllFeatures",value:function(){this.renderer.removeAllFeatures()}},{key:"moveTo",value:function(e,t){var r=document.getElementById(this.renderer.rootCanvas.id);if(t=void 0===t||t){var n=document.getElementById(e);r&&n&&n.parentNode.insertBefore(r,n)}else{var o=document.getElementById(e);if(r){if(o.nextSibling)return void o.parentNode.insertBefore(r,o.nextSibling);o.parentNode.appendChild(r)}}}},{key:"setVisibility",value:function(e){this.renderer.setVisibility(e)}},{key:"_convertLatlonToPixel",value:function(e){return this.map.project(new(o().LngLat)(e.lon,e.lat))}}])&&Zu(t.prototype,r),n&&Zu(t,n),Object.defineProperty(t,"prototype",{writable:!1}),a}();function tl(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function rl(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nl(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var ol=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.layerTypeID=t,this.data=[].concat(r.data),this.props=r.props?r.props:{},this.callback=r.callback?r.callback:{},this.id=r.layerId?r.layerId:j.createUniqueID("graphicLayer_"+this.layerTypeID+"_")}var t,r,n;return t=e,(r=[{key:"onAdd",value:function(){}},{key:"render",value:function(){}},{key:"setStyle",value:function(e){j.extend(this.props,e),this._createLayerByLayerTypeID(),this.update()}},{key:"setData",value:function(e){this.data=this.data||[],this.data.length=0;var t=j.isArray(e)?[].concat(e):[e];this.layer.props.data||(this.layer.props.data=[]),this.layer.props.data.length=0;for(var r=0;r<t.length;r++)this.layer.props.data.push(t[r]);this.data=this.layer.props.data,this.update()}},{key:"addData",value:function(e){this.data=this.data||[];var t=j.isArray(e)?[].concat(e):[e];this.layer.props.data||(this.layer.props.data=[]);for(var r=0;r<t.length;r++)this.layer.props.data.push(t[r]);this.update()}},{key:"update",value:function(){if("Awaiting state"!==this.layer.lifecycle){this.layer.setChangeFlags({dataChanged:!0,propsChanged:!0,viewportChanged:!0,updateTriggersChanged:!0})}this._draw()}},{key:"clear",value:function(){this.removeData(),this.deckGL.finalize()}},{key:"removeData",value:function(){this.data.length=0,this.layer.props.data&&(this.layer.props.data.length=0),this.update()}},{key:"moveTo",value:function(e,t){var r=document.getElementById(this.id);if(t=void 0===t||t){var n=document.getElementById(e);r&&n&&n.parentNode.insertBefore(r,n)}else{var o=document.getElementById(e);if(r){if(o.nextSibling)return void o.parentNode.insertBefore(r,o.nextSibling);o.parentNode.appendChild(r)}}}},{key:"setVisibility",value:function(e){this.canvas&&e!==this.visibility&&(this.visibility=e,this.canvas.style.display=e?"block":"none")}},{key:"_draw",value:function(){var e=this._getState();e.layers=[this.layer],e.canvas=this.canvas,this.deckGL.setProps(e)}},{key:"_getState",value:function(){var e=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?tl(Object(r),!0).forEach(function(t){rl(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tl(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({width:parseInt(this.canvas.style.width),height:parseInt(this.canvas.style.height)},this.getMapInfo()),t={};for(var r in e)t[r]=e[r];for(var n in this.props)t[n]=this.props[n];return this._isEPSG3857&&this._isEPSG3857()?(t.coordinateSystem=this.coordinateSystem,t.isGeographicCoordinateSystem=this.isGeographicCoordinateSystem):(t.coordinateSystem=1,t.isGeographicCoordinateSystem=!1),t.data=this.data,t}},{key:"_createLayerByLayerTypeID",value:function(){if(this.props.data=this.data,this.props.isGeographicCoordinateSystem=this.isGeographicCoordinateSystem,this.props.coordinateSystem=this.coordinateSystem,this.props.pickable=Boolean(this.props.onClick)||Boolean(this.props.onHover),"scatter-plot"===this.layerTypeID)this.props.id="scatter-plot",this._createScatterPlotLayer();else if("path-layer"===this.layerTypeID)this.props.id="path-layer",this._createPathLayer();else if("polygon-layer"===this.layerTypeID)this.props.id="polygon-layer",this._createPolygonLayer();else if("arc-layer"===this.layerTypeID)this.props.id="arc-layer",this._createArcLineLayer();else{if("hexagon-layer"!==this.layerTypeID)throw new Error(this.layerTypeID+" does not support");this.props.id="hexagon-layer",this._createHexagonLayer()}}},{key:"_createScatterPlotLayer",value:function(){var e=this;this.props.getPosition=this.callback.getPosition?this.callback.getPosition:function(e){if(!e)return[0,0,0];var t=e.getLngLat();return t&&[t.lng,t.lat,0]},this.callback.getColor&&(this.props.getColor=this.callback.getColor?this.callback.getColor:function(t){var r=t&&t.getStyle();return r&&r.color||e.props.color}),this.callback.getRadius&&(this.props.getRadius=this.callback.getRadius?this.callback.getRadius:function(t){var r=t&&t.getStyle();return r&&r.radius||e.props.radius}),(this.props.color||this.props.radius)&&(this.props.updateTriggers={},this.props.radius&&(this.props.updateTriggers.getRadius=[this.props.radius]),this.props.color&&(this.props.updateTriggers.getColor=[this.props.color])),this.layer=new window.DeckGL.ScatterplotLayer(this.props)}},{key:"_createPathLayer",value:function(){this.props.getPath=this.callback.getPath?this.callback.getPath:function(e){return e.geometry.coordinates},this.callback.getColor&&(this.props.getColor=this.callback.getColor),this.callback.getWidth&&(this.props.getWidth=this.callback.getWidth),this.callback.getDashArray&&(this.props.getDashArray=this.callback.getDashArray),this.layer=new window.DeckGL.PathLayer(this.props)}},{key:"_createPolygonLayer",value:function(){this.props.getPolygon=this.callback.getPolygon?this.callback.getPolygon:function(e){return e.geometry.coordinates},this.callback.getElevation&&(this.props.getElevation=this.callback.getElevation),this.callback.getFillColor&&(this.props.getFillColor=this.callback.getFillColor),this.callback.getLineColor&&(this.props.getLineColor=this.callback.getLineColor),this.callback.getLineWidth&&(this.props.getLineWidth=this.callback.getLineWidth),this.props.updateTriggers={},this.props.updateTriggers.getColor=this.props.color?this.props.color:[0,0,128,128],this.layer=new window.DeckGL.PolygonLayer(this.props)}},{key:"_createArcLineLayer",value:function(){this.props.getSourcePosition=this.callback.getSourcePosition?this.callback.getSourcePosition:function(e){return e?e.geometry.coordinates[0]:[0,0,0]},this.props.getTargetPosition=this.callback.getTargetPosition?this.callback.getTargetPosition:function(e){return e?e.geometry.coordinates[1]:[0,0,0]},this.callback.getStrokeWidth&&(this.props.getStrokeWidth=this.callback.getStrokeWidth),this.callback.getSourceColor&&(this.props.getSourceColor=this.callback.getSourceColor),this.callback.getTargetColor&&(this.props.getTargetColor=this.callback.getTargetColor),this.layer=new window.DeckGL.ArcLayer(this.props)}},{key:"_createHexagonLayer",value:function(){this.props.getPosition=this.callback.getPosition?this.callback.getPosition:function(e){return e?e.geometry.coordinates:[0,0,0]},this.callback.getColorValue&&(this.props.getColorValue=this.callback.getColorValue),this.callback.getElevationValue&&(this.props.getElevationValue=this.callback.getElevationValue),this.layer=new window.DeckGL.HexagonLayer(this.props)}},{key:"_initContainer",value:function(e,t){var r=t.style,n=r.width,o=r.height;this.canvas=this._createCanvas(n,o),e.appendChild(this.canvas)}},{key:"_createCanvas",value:function(e,t){var r=document.createElement("canvas");return r.id=this.id,r.style.position="absolute",r.style.top="0px",r.style.left="0px",r.style.cursor="",r.width=parseInt(e),r.height=parseInt(t),r.style.width=e,r.style.height=t,r}}])&&nl(t.prototype,r),n&&nl(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function il(e){"@babel/helpers - typeof";return(il="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function al(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function sl(e,t){return(sl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function ul(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=ll(e);if(t){var o=ll(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===il(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function ll(e){return(ll=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var cl=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&sl(e,t)}(a,ol);var t,r,n,i=ul(a);function a(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(r=i.call(this,e,t)).type="custom",r.renderingMode="3d",r.overlay=!0,r}return t=a,(r=[{key:"onAdd",value:function(e){if(this.map=e,this.canvas)return this.mapContainer=this.map.getCanvasContainer(),this;this._isEPSG3857()?(this.coordinateSystem=3,this.isGeographicCoordinateSystem=!0):(this.coordinateSystem=1,this.isGeographicCoordinateSystem=!1),this._initContainer(this.map.getCanvasContainer(),this.map.getCanvas()),this._createLayerByLayerTypeID();var t=this._getState(),r={};for(var n in t)r[n]=t[n];return r.layers=[this.layer],r.canvas=this.canvas,this.deckGL=new window.DeckGL.experimental.DeckGLJS(r),this._draw(),this}},{key:"onRemove",value:function(){this.map.getCanvasContainer().removeChild(this.canvas),this.clear()}},{key:"getMapInfo",value:function(){var e=this.map.getCenter();return{center:e,zoom:this.map.getZoom(),maxZoom:this.map.getMaxZoom(),pitch:this.map.getPitch(),bearing:this.map.getBearing(),longitude:e.lng,latitude:e.lat}}},{key:"render",value:function(){this._draw()}},{key:"_isEPSG3857",value:function(){return this.map.getCRS&&this.map.getCRS()!==o().CRS.EPSG3857}}])&&al(t.prototype,r),n&&al(t,n),Object.defineProperty(t,"prototype",{writable:!1}),a}();function fl(e){return function(e){if(Array.isArray(e))return hl(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return hl(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return hl(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function hl(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function pl(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var dl={textSize:"12px",textFont:["12px Calibri","sans-serif"],textAnchor:"bottom",textColor:"rgba(0,0,0,1)",textHaloColor:"rgba(255,255,255,1)",textHaloWidth:1},yl={lineColor:"red",lineCap:"round",lineJoin:"round",lindDasharray:[.4,5],lineDashOffset:0,lineWidth:1},vl={showLabel:!0,opacity:1,visible:!0,interval:10,extent:null,minZoom:0,maxZoom:50,wrapX:!0,strokeStyle:yl,lngLabelFormatter:null,latLabelFormatter:null,lngLabelStyle:dl,latLabelStyle:dl},gl=function(){function e(t,r,n,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.map=t,this.id=o&&o.id,this.sourceId=this.id+"_line",this.canvasId=this.id,this.options=r,this.mapElement=o.mapElement,this.targetElement=o.targetElement,this.getMapStateByKey=n.getMapStateByKey,this.getDefaultExtent=n.getDefaultExtent,this.setVisibility=n.setVisibility,this.updateGraticuleLayer=n.updateGraticuleLayer,this.init()}var t,r,n;return t=e,(r=[{key:"init",value:function(){this._initialize(),this._createCanvas(),this._drawCanvas(),this.setVisibility(),this._drawLabel()}},{key:"onRemove",value:function(){this.targetElement.removeChild(this.canvas),this.canvas=null}},{key:"setMinZoom",value:function(e){this.options.minZoom=e,this.setVisibility()}},{key:"setMaxZoom",value:function(e){this.options.maxZoom=e,this.setVisibility()}},{key:"setShowLabel",value:function(e){this.options.showLabel=e,this._drawLabel()}},{key:"setExtent",value:function(e){this.options.extent=this.getDefaultExtent(e),this.features=this._getGraticuleFeatures(),this.updateGraticuleLayer(),this._drawLabel()}},{key:"setLngLabelStyle",value:function(e){this.options.lngLabelStyle=e,this._drawLabel()}},{key:"setLatLabelStyle",value:function(e){this.options.latLabelStyle=e,this._drawLabel()}},{key:"setIntervals",value:function(e){this.options.interval=e,this._calcInterval(),this.features=this._getGraticuleFeatures(),this.updateGraticuleLayer(),this._drawLabel()}},{key:"draw",value:function(){this._reset()}},{key:"_initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.options;(e=e||{}).strokeStyle=Object.assign({},yl,e.strokeStyle||{}),e.lngLabelStyle=Object.assign({},dl,e.lngLabelStyle||{}),e.latLabelStyle=Object.assign({},dl,e.latLabelStyle||{}),this.options=Object.assign({},vl,e,{extent:this.getDefaultExtent(e.extent),wrapX:e.wrapX}),this.oldExtent=this.options.extent,this._calcInterval(),this.isRotate=!1,this.visible=!0,this.features=this._getGraticuleFeatures()}},{key:"_createCanvas",value:function(){if(!this.canvas){var e=this.mapElement;this.canvas=document.createElement("canvas"),this.canvas.id=this.canvasId,this.canvas.style.position="absolute",this.canvas.style.top="0px",this.canvas.style.left="0px";var t=("undefined"==typeof window?{}:window).devicePixelRatio||1;this.canvas.width=parseInt(e.style.width)*t,this.canvas.height=parseInt(e.style.height)*t,this.canvas.style.width=e.style.width,this.canvas.style.height=e.style.height,this.canvas.globalAlpha=this.options.opacity,this.targetElement.appendChild(this.canvas)}}},{key:"_drawCanvas",value:function(){this.canvas||this._createCanvas(),this.setVisibility(),this._reset()}},{key:"_resizeCallback",value:function(){this.targetElement&&this.targetElement.removeChild(this.canvas),this.canvas=null,this._drawCanvas()}},{key:"_reset",value:function(){this._updateRotate(),this._updateExtent(),this._calcInterval(),this._drawLabel()}},{key:"_updateRotate",value:function(){var e=this.getMapStateByKey("getBearing");this.isRotate=e>-180&&e<=-90||e>=90&&e<180}},{key:"_updateExtent",value:function(){if(this.options.wrapX&&!this.oldExtent){var e=this.getMapStateByKey("getBounds"),t=e._ne,r=e._sw;this.options.extent=[r.lng,r.lat,t.lng,t.lat]}}},{key:"_calcInterval",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.options.interval;"function"==typeof e?(e=e(this.map),this._currLngInterval=e,this._currLatInterval=e):(this._currLngInterval=e,this._currLatInterval=e)}},{key:"_formatLat",value:function(e){return this.options.latFormatTickLabel?this.options.latLabelFormatter(e):e<0?Cs(-1*e)+"S":e>0?Cs(e)+"N":""+Cs(e)}},{key:"_formatLng",value:function(e){return this.options.lngLabelFormatter?this.options.lngLabelFormatter(e):(e=Ms(e))>0&&e<=180?Cs(e)+"E":e<0&&e>=-180?Cs(-1*e)+"W":""+Cs(e)}},{key:"_parsePxToInt",value:function(e){e.length>2&&"p"===e.charAt(e.length-2)&&(e=e.substr(0,e.length-2));try{return parseInt(e,10)}catch(e){console.log(e)}return 0}},{key:"_drawLabel",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.visible,r=this.canvas,n=r.getContext("2d");if(t&&this.options.showLabel){if(this.mapElement){this._currLngInterval&&this._currLatInterval||this._calcInterval(),n.clearRect(0,0,r.width,r.height);var o=this.options,i=o.lngLabelStyle,a=o.latLabelStyle,s=this._getGridiculePoints(),u=s.lngPoints,l=s.latPonits;u.forEach(function(t){e._drawLng(n,t[0],t[1],t[2],i)}),l.forEach(function(t){e._drawLat(n,t[0],t[1],t[2],a)})}}else n.clearRect(0,0,r.width,r.height)}},{key:"_drawLat",value:function(e,t,r,n,o){e=this._setLabelStyle(e,o);var i=this.canvas.width,a=12;try{var s=e.font.split(" ")[0];a=this._parsePxToInt(s)}catch(e){console.log(e)}if(!n){var u=t;t=r,r=this.getMapStateByKey("project",[u,t])}var l=this._formatLat(t),c=e.measureText(l).width;e.strokeText(l,(n?i:r.x)-c,(n?r:r.y)+a/2),e.fillText(l,(n?i:r.x)-c,(n?r:r.y)+a/2)}},{key:"_drawLng",value:function(e,t,r,n,o){e=this._setLabelStyle(e,o);var i=this.canvas.height;if(!n){var a=r;r=this.getMapStateByKey("project",[t,a])}var s=this._formatLng(t),u=e.measureText(s).width;e.strokeText(s,(n?r:r.x)-u/2,n?i:r.y),e.fillText(s,(n?r:r.x)-u/2,n?i:r.y)}},{key:"_getLatPoints",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[-180,180],r=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.features;if(o){if(this.options.wrapX&&-180===t[0]&&180===t[1])return[];var i=[];return o.forEach(function(o){var a=o.geometry.coordinates[0][1];if(o.geometry.coordinates[1][1]===a){var s="number"==typeof n?n:t[1];e.isRotate&&(s="number"==typeof r?r:t[0]),e.options.wrapX&&(i=i.concat(e._getWrapPoints(s,a,[s,s]))),i.push([s,a])}}),i}}},{key:"_getLngPoints",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[-90,90],r=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.features;if(o){var i="number"==typeof r?r:t[0];this.isRotate&&(i="number"==typeof n?n:t[1]);var a=[];return o.forEach(function(t){var r=t.geometry.coordinates[0][0];t.geometry.coordinates[1][0]===r&&(a.push([r,i]),e.options.wrapX&&(a=a.concat(e._getWrapPoints(r,i))))}),a}}},{key:"_getWrapPoints",value:function(e,t){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.oldExtent,n=[],o=this.getMapStateByKey("getBounds"),i=o._ne,a=o._sw,s=r.length>2?r[2]:r[1];e>=a.lng;){var u=Ms(e,180===s,-180===r[0]);(!r||u>=r[0]&&u<=s)&&n.push([e,t]),e-=360}for(;e<=i.lng;){var l=Ms(e,180===s,-180===r[0]);(!r||l>=r[0]&&l<=s)&&n.push([e,t]),e+=360}return n}},{key:"_getGridiculePoints",value:function(){var e=this._getEdgeLat(),t=this._getEdgeLng(),r=this._getRange(),n=r.latRange,o=r.lngRange,i=r.firstLat,a=r.firstLng,s=r.lastLat,u=r.lastLng;return{latPonits:this._getUniquePoint(this._getLatPoints(o,a,u),e,1),lngPoints:this._getUniquePoint(this._getLngPoints(n,i,s),t,0)}}},{key:"_getEdgeLat",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._currLatInterval,r=[],n=[],o=this.canvas.width,i=this.canvas.height,a=this._getRange().extent,s=this.getMapStateByKey("getBounds")._ne;if(this.options.wrapX&&Ms(s.lng)>a[2])return[];for(var u=this._countDecimals(t),l=0;l<=i;l++){var c=this.getMapStateByKey("unproject",[o,l]),f=Ms(c.lng);(this.options.wrapX?f>=a[0]&&f<=a[2]:c.lng>=a[0]&&c.lng<=a[2])&&c.lat>=a[1]&&c.lat<=a[3]&&(r.push([c.lat,l]),n.push(c.lat),void 0===e&&c.lat.toFixed(u)%t==0&&(e=Number(c.lat.toFixed(u))))}var h=this._getIntersectRange(e,n,r,t),p=h.first,d=h.last,y=h.coordinates,v=h.points;e=Math.min(Math.max(p,-90),90);var g=Math.max(Math.min(Math.round(d),90),-90);return-90!==e||-90!==g?this._getClosestCoordinate(e,g,y,v,t):[]}},{key:"_getEdgeLng",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._currLngInterval,r=[],n=[],o=this.canvas.width,i=this.canvas.height,a=this.options.extent,s=this._countDecimals(t),u=this.getMapStateByKey("getBounds")._sw;if(this.options.wrapX&&Ms(u.lat)>a[3])return[];for(var l=0;l<=o;l++){var c=this.getMapStateByKey("unproject",[l,i]),f=Ms(c.lng);(this.options.wrapX?f>=a[0]&&f<=a[2]:c.lng>=a[0]&&c.lng<=a[2])&&c.lat>=a[1]&&c.lat<=a[3]&&(r.push([c.lng,l]),n.push(c.lng),void 0===e&&c.lng.toFixed(s)%t==0&&(e=Number(c.lng.toFixed(s))))}var h=this._getIntersectRange(e,n,r,t),p=h.first,d=h.last,y=h.coordinates,v=h.points;return e=p,this._getClosestCoordinate(e,d,y,v,t)}},{key:"_getIntersectRange",value:function(e,t,r,n){var o=t[t.length-1];if(e>o){o=e,t.reverse(),r.reverse();for(var i=this._countDecimals(n),a=0;a<=t.length;a++){var s=t[a];if(s.toFixed(i)%n==0){e=Number(s.toFixed(i));break}}}return{first:e,last:o,coordinates:t,points:r}}},{key:"_getClosestCoordinate",value:function(e,t,r,n,o){for(var i=[],a=e;a<=t;){var s=this._getClosestNumberIndex(a,r),u=n[s];i.push([Math.round(u[0]),u[1],!0]),a+=o,r=r.slice(s),n=n.slice(s)}return i}},{key:"_getClosestNumberIndex",value:function(e,t){for(var r=0,n=Number.MAX_VALUE,o=0;o<t.length;o++){var i=Math.abs(t[o]-e);if(i<=n){if(i===n&&t[o]<t[r])continue;r=o,n=i}}return r}},{key:"_getUniquePoint",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(this.options.wrapX)return e.concat(t);if(!t||0===t.length)return e;var n=t,o=this.canvas.width,i=this.canvas.height;for(var a in e){var s=this.getMapStateByKey("project",e[a]),u=n.findIndex(function(t){return t[0]===e[a][r]});u<=-1?n.push(e[a]):s&&s.x>=0&&s.x<=o&&s.y>=0&&s.y<=i&&(n[u]=e[a])}return n}},{key:"_countDecimals",value:function(e){return Math.floor(e)!==e&&e.toString().split(".")[1].length||0}},{key:"_getGraticuleFeatures",value:function(){var e=this._currLngInterval||10,t=this._currLatInterval||10,r=[],n=this._getRange(),o=n.latRange,i=n.lngRange,a=n.firstLat,s=n.firstLng,u=n.lastLat,l=n.lastLng;this.options.wrapX&&!this.oldExtent&&(o=[-90,90],i=[-180,180],a=s=u=l=null),"number"==typeof s&&r.unshift(this._makeLineFeature(this._makeLineCoords(s,o,a,u))),"number"==typeof l&&r.unshift(this._makeLineFeature(this._makeLineCoords(l,o,a,u)));for(var c=i[0];c<=i[1];c+=e)r.unshift(this._makeLineFeature(this._makeLineCoords(c,o,a,u)));"number"==typeof a&&r.unshift(this._makeLineFeature(this._makeLineCoords(a,i,s,l,"lat"))),"number"==typeof u&&r.unshift(this._makeLineFeature(this._makeLineCoords(u,i,s,l,"lat")));for(var f=o[0];f<=o[1];f+=t)r.unshift(this._makeLineFeature(this._makeLineCoords(f,i,s,l,"lat")));return r}},{key:"_getRange",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.options.extent&&fl(this.options.extent);e&&0!==e.length||(e=this.getDefaultExtent());var t={};if((e=e.map(function(e){return Number(e.toFixed(6))}))[1]%this._currLatInterval!=0){t.firstLat=e[1];var r=Math.ceil(e[1]/this._currLatInterval);e[1]=r*this._currLatInterval}if(e[3]%this._currLatInterval!=0){t.lastLat=e[3];var n=Math.floor(e[3]/this._currLatInterval);e[3]=n*this._currLatInterval}if(e[0]%this._currLngInterval!=0){t.firstLng=e[0];var o=Math.ceil(e[0]/this._currLngInterval);e[0]=o*this._currLngInterval}if(e[2]%this._currLngInterval!=0){t.lastLng=e[2];var i=Math.floor(e[2]/this._currLngInterval);e[2]=i*this._currLngInterval}return Object.assign({latRange:[e[1],e[3]],lngRange:[e[0],e[2]],extent:e},t)}},{key:"_makeLineCoords",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[-90,90],r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"lng";e="lng"===o?this._lngFix(e):e,r="number"==typeof r?r:t[0],n="number"==typeof n?n:t[1];for(var i=Math.abs(r-n),a=[],s=r;s<=n;s+=i)"lng"===o?a.push([e,s]):a.push([s,e]);return a}},{key:"_makeLineFeature",value:function(e){return{type:"Feature",geometry:{type:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"LineString",coordinates:e}}}},{key:"_lngFix",value:function(e){return e>=180?180:e<=-180?-180:e}},{key:"_transformStrokeStyle",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.options.strokeStyle;if(!e||"string"==typeof e)return{paint:{"line-color":e||"rgba(0,0,0,0.2)"}};var t={visibility:this.visible?"visible":"none","line-join":e.lineJoin||"round","line-cap":e.lineCap||"round"},r={"line-color":e.lineColor||"rgba(0,0,0,0.2)","line-width":e.lineWidth||1,"line-offset":e.lineDashOffset||0,"line-translate-anchor":"viewport"};return e.lineWidth&&("function"==typeof e.lineWidth?r["line-width"]=e.lineWidth(this.map):r["line-width"]=e.lineWidth),e.lindDasharray&&("function"==typeof e.lindDasharray?r["line-dasharray"]=e.lindDasharray(this.map):r["line-dasharray"]=e.lindDasharray),{layout:t,paint:r}}},{key:"_setLabelStyle",value:function(e,t){return t.textColor&&(e.fillStyle=t.textColor),t.textSize&&(e.font=t.textSize+" "+(t.textFont||["Calibri","sans-serif"]).join(",")),t.textHaloColor&&(e.strokeStyle=t.textHaloColor,e.lineWidth=t.textHaloWidth||1),t.textAnchor&&(e.textBaseline=this._getTxetBaseline(t.textAnchor),e.textAligin=this._getTxetAlign(t.textAligin)),e}},{key:"_getTxetBaseline",value:function(e){if(!e)return"bottom";var t=e.split("-");return t.includes("bottom")?"bottom":t.includes("top")?"top":t.includes("center")?"middle":void 0}},{key:"_getTxetAlign",value:function(e){if(!e)return"center";var t=e.split("-");return t.includes("left")?"left":t.includes("right")?"right":t.includes("center")?"center":void 0}}])&&pl(t.prototype,r),n&&pl(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function ml(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var bl,wl,_l,xl={textSize:"12px",textFont:["12px Calibri","sans-serif"],textAnchor:"bottom",textColor:"rgba(0,0,0,1)",textHaloColor:"rgba(255,255,255,1)",textHaloWidth:1},Sl={lineColor:"red",lineCap:"round",lineJoin:"round",lindDasharray:[.4,5],lineDashOffset:0,lineWidth:1},Ol={showLabel:!0,opacity:1,visible:!0,interval:10,extent:null,minZoom:0,maxZoom:50,wrapX:!0,strokeStyle:Sl,lngLabelFormatter:null,latLabelFormatter:null,lngLabelStyle:xl,latLabelStyle:xl},Pl=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=t&&t.layerID?t.layerID:j.createUniqueID("graticuleLayer_"),this.sourceId=this.id+"_line",(t=t||{}).strokeStyle=Object.assign({},Sl,t.strokeStyle||{}),t.lngLabelStyle=Object.assign({},xl,t.lngLabelStyle||{}),t.latLabelStyle=Object.assign({},xl,t.latLabelStyle||{}),this.options=Object.assign({},Ol,t),this.type="custom",this.renderingMode="3d",this.overlay=!0,this.styleDataEevent=this._setLayerTop.bind(this)}var t,r,n;return t=e,(r=[{key:"onAdd",value:function(e){this.map=e,this.renderer=new gl(this.map,this.options,{getMapStateByKey:this.getMapStateByKey,getDefaultExtent:this.getDefaultExtent,updateGraticuleLayer:this.updateGraticuleLayer.bind(this),setVisibility:this.setVisibility.bind(this)},{mapElement:this.map.getCanvas(),targetElement:this.map.getCanvasContainer(),id:this.id}),this.addGraticuleLayer(),this.resizeEvent=this.renderer._resizeCallback.bind(this.renderer),this.zoomendEvent=this.setVisibility.bind(this),this._bindEvent()}},{key:"onRemove",value:function(){this.renderer.onRemove(),this._unbindEvent()}},{key:"render",value:function(){this.renderer.draw()}},{key:"getMapStateByKey",value:function(e,t){return"getBearing"===e?this.map.getBearing():"getBounds"===e?this.map.getBounds():"project"===e?this.map.project(t):"unproject"===e?this.map.unproject(t):void 0}},{key:"setVisibility",value:function(e){var t=this.map&&this.map.getZoom();this.options.visible="boolean"==typeof e?e:this.options.visible,this.visible="boolean"==typeof e?e:this.options.visible&&t>=this.options.minZoom&&t<=this.options.maxZoom,this.renderer&&(this.renderer.visible=this.visible),this.map.getLayer(this.sourceId)&&this.map.setLayoutProperty(this.sourceId,"visibility",this.visible?"visible":"none"),this.renderer&&this.renderer._drawLabel()}},{key:"setMinZoom",value:function(e){this.options.minZoom=e,this.setVisibility()}},{key:"setMaxZoom",value:function(e){this.options.maxZoom=e,this.setVisibility()}},{key:"setShowLabel",value:function(e){this.options.showLabel=e,this.renderer._drawLabel()}},{key:"setExtent",value:function(e){this.options.extent=this.getDefaultExtent(e,this.map),this.updateGraticuleLayer(),this.renderer._drawLabel()}},{key:"setStrokeStyle",value:function(e){if(this.map&&this.map.getLayer(this.sourceId)){this.options.strokeStyle=e;var t=this.renderer._transformStrokeStyle(e),r=t.layout,n=t.paint;for(var o in r)this.map.setLayoutProperty(this.sourceId,o,r[o]);for(var i in n)this.map.setPaintProperty(this.sourceId,i,n[i])}}},{key:"setLngLabelStyle",value:function(e){this.options.lngLabelStyle=e,this.renderer._drawLabel()}},{key:"setLatLabelStyle",value:function(e){this.options.latLabelStyle=e,this.renderer._drawLabel()}},{key:"setIntervals",value:function(e){this.renderer&&this.renderer.setIntervals(e)}},{key:"getDefaultExtent",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.map,r=(t.getCRS&&t.getCRS()||{}).extent;if(r||(r=[-180,-85.05119,180,85.05119]),!e||0===e.length)return r;var n=o().LngLatBounds.convert(e),i=n._sw,a=n._ne;return e=[i.lng,i.lat,a.lng,a.lat],e=[Math.max(r[0],e[0]),Math.max(r[1],e[1]),Math.min(r[2],e[2]),Math.min(r[3],e[3])]}},{key:"addGraticuleLayer",value:function(){if(!this.map.getSource(this.sourceId)){var e={type:"geojson",data:{type:"FeatureCollection",features:this.renderer.features}};this.map.addSource(this.sourceId,e)}if(!this.map.getLayer(this.sourceId)){var t=Object.assign({id:this.sourceId,type:"line",source:this.sourceId},this.renderer._transformStrokeStyle());this.map.addLayer(t)}}},{key:"_getLatPoints",value:function(e,t,r,n){return this.renderer._getLatPoints(e,t,r,n)}},{key:"_bindEvent",value:function(){this.map.on("styledata",this.styleDataEevent),this.map.on("resize",this.resizeEvent),this.map.on("zoomend",this.zoomendEvent)}},{key:"_unbindEvent",value:function(){this.map.off("styledata",this.styleDataEevent),this.map.off("resize",this.resizeEvent),this.map.off("zoomend",this.zoomendEvent)}},{key:"_setLayerTop",value:function(){var e=this,t=this.map;if(t){var r=t.getStyle&&t.getStyle().layers;r&&r.length&&r.findIndex(function(t){return t.id===e.sourceId})!==r.length-1&&t.getLayer(this.sourceId)&&(t.removeLayer(this.sourceId),this.addGraticuleLayer())}}},{key:"updateGraticuleLayer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.features;if(this.map.getSource(this.sourceId)){var t={type:"FeatureCollection",features:e};this.map.getSource(this.sourceId).setData(t)}this.addGraticuleLayer()}}])&&ml(t.prototype,r),n&&ml(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),El=(r(19957),r(95937),r(54238)),kl=r.n(El),Ml=window.fetch,Cl={limitLength:1500,queryKeys:[],queryValues:[],supermap_callbacks:{},addQueryStrings:function(e){for(var t in e){this.queryKeys.push(t),"string"!=typeof e[t]&&(e[t]=j.toJSON(e[t]));var r=encodeURIComponent(e[t]);this.queryValues.push(r)}},issue:function(e){for(var t=this,r=t.getUid(),n=e.url,o=[],i=n,a=0,s=t.queryKeys?t.queryKeys.length:0,u=0;u<s;u++)if(i.length+t.queryKeys[u].length+2>=t.limitLength){if(0==a)return!1;o.push(i),i=n,a=0,u--}else if(i.length+t.queryKeys[u].length+2+t.queryValues[u].length>t.limitLength)for(var l=t.queryValues[u];l.length>0;){var c=t.limitLength-i.length-t.queryKeys[u].length-2;i.indexOf("?")>-1?i+="&":i+="?";var f=l.substring(0,c);"%"===f.substring(c-1,c)?(c-=1,f=l.substring(0,c)):"%"===f.substring(c-2,c-1)&&(c-=2,f=l.substring(0,c)),i+=t.queryKeys[u]+"="+f,l=l.substring(c),f.length>0&&(o.push(i),i=n,a=0)}else a++,i.indexOf("?")>-1?i+="&":i+="?",i+=t.queryKeys[u]+"="+t.queryValues[u];return o.push(i),t.send(o,"SuperMapJSONPCallbacks_"+r,e&&e.proxy)},getUid:function(){return 1e3*(new Date).getTime()+Math.floor(1e17*Math.random())},send:function(e,t,r){var n=e.length;if(n>0)return new Promise(function(o){for(var i=(new Date).getTime(),a=0;a<n;a++){var s=e[a];s.indexOf("?")>-1?s+="&":s+="?",s+="sectionCount="+n,s+="&sectionIndex="+a,s+="&jsonpUserID="+i,r&&(s=decodeURIComponent(s),s=r+encodeURIComponent(s)),kl()(s,{jsonpCallbackFunction:t,timeout:3e4}).then(function(e){o(e.json())})}})},GET:function(e){return this.queryKeys.length=0,this.queryValues.length=0,this.addQueryStrings(e.params),this.issue(e)},POST:function(e){return this.queryKeys.length=0,this.queryValues.length=0,this.addQueryStrings({requestEntity:e.data}),this.issue(e)},PUT:function(e){return this.queryKeys.length=0,this.queryValues.length=0,this.addQueryStrings({requestEntity:e.data}),this.issue(e)},DELETE:function(e){return this.queryKeys.length=0,this.queryValues.length=0,this.addQueryStrings({requestEntity:e.data}),this.issue(e)}},jl=function(){return void 0!=bl?bl:window.XMLHttpRequest&&"withCredentials"in new window.XMLHttpRequest},Tl=function(){return wl||45e3},Al={commit:function(e,t,r,n){switch(e=e?e.toUpperCase():e){case"GET":return this.get(t,r,n);case"POST":return this.post(t,r,n);case"PUT":return this.put(t,r,n);case"DELETE":return this.delete(t,r,n);default:return this.get(t,r,n)}},supportDirectRequest:function(e,t){return!!j.isInTheSameDomain(e)||(void 0!=t.crossOrigin?t.crossOrigin:jl()||t.proxy)},get:function(e,t,r){r=r||{};if(e=j.urlAppend(e,this._getParameterString(t||{})),e=this._processUrl(e,r),!this.supportDirectRequest(e,r)){var n={url:e=e.replace(".json",".jsonp"),data:t};return Cl.GET(n)}return this.urlIsLong(e)?this._postSimulatie("GET",e.substring(0,e.indexOf("?")),t,r):this._fetch(e,t,r,"GET")},delete:function(e,t,r){r=r||{};if(e=j.urlAppend(e,this._getParameterString(t||{})),e=this._processUrl(e,r),!this.supportDirectRequest(e,r)){e=e.replace(".json",".jsonp");var n={url:e+="&_method=DELETE",data:t};return Cl.DELETE(n)}return this.urlIsLong(e)?this._postSimulatie("DELETE",e.substring(0,e.indexOf("?")),t,r):this._fetch(e,t,r,"DELETE")},post:function(e,t,r){if(r=r||{},e=this._processUrl(e,r),!this.supportDirectRequest(e,r)){e=e.replace(".json",".jsonp");var n={url:j.urlAppend(e,"_method=POST"),data:t};return Cl.POST(n)}return this._fetch(e,t,r,"POST")},put:function(e,t,r){if(r=r||{},e=this._processUrl(e,r),!this.supportDirectRequest(e,r)){e=e.replace(".json",".jsonp");var n={url:e+="&_method=PUT",data:t};return Cl.PUT(n)}return this._fetch(e,t,r,"PUT")},urlIsLong:function(e){for(var t=0,r=null,n=0,o=e.length;n<o;n++)(r=e.charCodeAt(n))<127?t++:128<=r&&r<=2047?t+=2:2048<=r&&r<=65535&&(t+=3);return!(t<2e3)},_postSimulatie:function(e,t,r,n){return t+=(t.indexOf("?")>-1?"&":"?")+"_method="+e,"string"!=typeof r&&(r=JSON.stringify(r)),this.post(t,r,n)},_processUrl:function(e,t){if(this._isMVTRequest(e))return e;if(-1===e.indexOf(".json")&&!t.withoutFormatSuffix)if(e.indexOf("?")<0)e+=".json";else{var r=e.split("?");2===r.length&&(e=r[0]+".json?"+r[1])}return t&&t.proxy&&("function"==typeof t.proxy?e=t.proxy(e):(e=decodeURIComponent(e),e=t.proxy+encodeURIComponent(e))),e},_fetch:function(e,t,r,n){return(r=r||{}).headers=r.headers||{},r.headers["Content-Type"]||FormData.prototype.isPrototypeOf(t)||(r.headers["Content-Type"]="application/x-www-form-urlencoded;charset=UTF-8"),r.timeout?this._timeout(r.timeout,Ml(e,{method:n,headers:r.headers,body:"PUT"===n||"POST"===n?t:void 0,credentials:this._getWithCredentials(r),mode:"cors",timeout:Tl()}).then(function(e){return e})):Ml(e,{method:n,body:"PUT"===n||"POST"===n?t:void 0,headers:r.headers,credentials:this._getWithCredentials(r),mode:"cors",timeout:Tl()}).then(function(e){return e})},_getWithCredentials:function(e){return!0===e.withCredentials?"include":!1===e.withCredentials?"omit":"same-origin"},_fetchJsonp:function(e,t){return t=t||{},kl()(e,{method:"GET",timeout:t.timeout}).then(function(e){return e})},_timeout:function(e,t){return new Promise(function(r,n){setTimeout(function(){n(new Error("timeout"))},e),t.then(r,n)})},_getParameterString:function(e){var t=[];for(var r in e){var n,o=e[r];if(null!=o&&"function"!=typeof o)n=Array.isArray(o)||"[object Object]"===o.toString()?encodeURIComponent(JSON.stringify(o)):encodeURIComponent(o),t.push(encodeURIComponent(r)+"="+n)}return t.join("&")},_isMVTRequest:function(e){return e.indexOf(".mvt")>-1||e.indexOf(".pbf")>-1}};!function(e){e[e.Unknown=0]="Unknown",e[e.Point=1]="Point",e[e.LineString=2]="LineString",e[e.Polygon=3]="Polygon",e[e.MultiPoint=4]="MultiPoint",e[e.MultiLineString=5]="MultiLineString",e[e.MultiPolygon=6]="MultiPolygon",e[e.GeometryCollection=7]="GeometryCollection",e[e.CircularString=8]="CircularString",e[e.CompoundCurve=9]="CompoundCurve",e[e.CurvePolygon=10]="CurvePolygon",e[e.MultiCurve=11]="MultiCurve",e[e.MultiSurface=12]="MultiSurface",e[e.Curve=13]="Curve",e[e.Surface=14]="Surface",e[e.PolyhedralSurface=15]="PolyhedralSurface",e[e.TIN=16]="TIN",e[e.Triangle=17]="Triangle"}(_l||(_l={}));var Il=r(61095);function Rl(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Ll,Nl=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.bb=null,this.bb_pos=0}var t,r,n;return t=e,n=[{key:"getRootAsGeometry",value:function(t,r){return(r||new e).__init(t.readInt32(t.position())+t.position(),t)}},{key:"getSizePrefixedRootAsGeometry",value:function(t,r){return t.setPosition(t.position()+Il.XU),(r||new e).__init(t.readInt32(t.position())+t.position(),t)}},{key:"startGeometry",value:function(e){e.startObject(8)}},{key:"addEnds",value:function(e,t){e.addFieldOffset(0,t,0)}},{key:"createEndsVector",value:function(e,t){e.startVector(4,t.length,4);for(var r=t.length-1;r>=0;r--)e.addInt32(t[r]);return e.endVector()}},{key:"startEndsVector",value:function(e,t){e.startVector(4,t,4)}},{key:"addXy",value:function(e,t){e.addFieldOffset(1,t,0)}},{key:"createXyVector",value:function(e,t){e.startVector(8,t.length,8);for(var r=t.length-1;r>=0;r--)e.addFloat64(t[r]);return e.endVector()}},{key:"startXyVector",value:function(e,t){e.startVector(8,t,8)}},{key:"addZ",value:function(e,t){e.addFieldOffset(2,t,0)}},{key:"createZVector",value:function(e,t){e.startVector(8,t.length,8);for(var r=t.length-1;r>=0;r--)e.addFloat64(t[r]);return e.endVector()}},{key:"startZVector",value:function(e,t){e.startVector(8,t,8)}},{key:"addM",value:function(e,t){e.addFieldOffset(3,t,0)}},{key:"createMVector",value:function(e,t){e.startVector(8,t.length,8);for(var r=t.length-1;r>=0;r--)e.addFloat64(t[r]);return e.endVector()}},{key:"startMVector",value:function(e,t){e.startVector(8,t,8)}},{key:"addT",value:function(e,t){e.addFieldOffset(4,t,0)}},{key:"createTVector",value:function(e,t){e.startVector(8,t.length,8);for(var r=t.length-1;r>=0;r--)e.addFloat64(t[r]);return e.endVector()}},{key:"startTVector",value:function(e,t){e.startVector(8,t,8)}},{key:"addTm",value:function(e,t){e.addFieldOffset(5,t,0)}},{key:"createTmVector",value:function(e,t){e.startVector(8,t.length,8);for(var r=t.length-1;r>=0;r--)e.addInt64(t[r]);return e.endVector()}},{key:"startTmVector",value:function(e,t){e.startVector(8,t,8)}},{key:"addType",value:function(e,t){e.addFieldInt8(6,t,_l.Unknown)}},{key:"addParts",value:function(e,t){e.addFieldOffset(7,t,0)}},{key:"createPartsVector",value:function(e,t){e.startVector(4,t.length,4);for(var r=t.length-1;r>=0;r--)e.addOffset(t[r]);return e.endVector()}},{key:"startPartsVector",value:function(e,t){e.startVector(4,t,4)}},{key:"endGeometry",value:function(e){return e.endObject()}},{key:"createGeometry",value:function(t,r,n,o,i,a,s,u,l){return e.startGeometry(t),e.addEnds(t,r),e.addXy(t,n),e.addZ(t,o),e.addM(t,i),e.addT(t,a),e.addTm(t,s),e.addType(t,u),e.addParts(t,l),e.endGeometry(t)}}],(r=[{key:"__init",value:function(e,t){return this.bb_pos=e,this.bb=t,this}},{key:"ends",value:function(e){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readUint32(this.bb.__vector(this.bb_pos+t)+4*e):0}},{key:"endsLength",value:function(){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__vector_len(this.bb_pos+e):0}},{key:"endsArray",value:function(){var e=this.bb.__offset(this.bb_pos,4);return e?new Uint32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null}},{key:"xy",value:function(e){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readFloat64(this.bb.__vector(this.bb_pos+t)+8*e):0}},{key:"xyLength",value:function(){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}},{key:"xyArray",value:function(){var e=this.bb.__offset(this.bb_pos,6);return e?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null}},{key:"z",value:function(e){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readFloat64(this.bb.__vector(this.bb_pos+t)+8*e):0}},{key:"zLength",value:function(){var e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__vector_len(this.bb_pos+e):0}},{key:"zArray",value:function(){var e=this.bb.__offset(this.bb_pos,8);return e?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null}},{key:"m",value:function(e){var t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readFloat64(this.bb.__vector(this.bb_pos+t)+8*e):0}},{key:"mLength",value:function(){var e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__vector_len(this.bb_pos+e):0}},{key:"mArray",value:function(){var e=this.bb.__offset(this.bb_pos,10);return e?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null}},{key:"t",value:function(e){var t=this.bb.__offset(this.bb_pos,12);return t?this.bb.readFloat64(this.bb.__vector(this.bb_pos+t)+8*e):0}},{key:"tLength",value:function(){var e=this.bb.__offset(this.bb_pos,12);return e?this.bb.__vector_len(this.bb_pos+e):0}},{key:"tArray",value:function(){var e=this.bb.__offset(this.bb_pos,12);return e?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null}},{key:"tm",value:function(e){var t=this.bb.__offset(this.bb_pos,14);return t?this.bb.readUint64(this.bb.__vector(this.bb_pos+t)+8*e):BigInt(0)}},{key:"tmLength",value:function(){var e=this.bb.__offset(this.bb_pos,14);return e?this.bb.__vector_len(this.bb_pos+e):0}},{key:"type",value:function(){var e=this.bb.__offset(this.bb_pos,16);return e?this.bb.readUint8(this.bb_pos+e):_l.Unknown}},{key:"parts",value:function(t,r){var n=this.bb.__offset(this.bb_pos,18);return n?(r||new e).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*t),this.bb):null}},{key:"partsLength",value:function(){var e=this.bb.__offset(this.bb_pos,18);return e?this.bb.__vector_len(this.bb_pos+e):0}}])&&Rl(t.prototype,r),n&&Rl(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Dl(e,t){for(var r=[],n=0;n<e.length;n+=2){var o=[e[n],e[n+1]];t&&o.push(t[n>>1]),r.push(o)}return r}function Bl(e,t,r){if(!r||0===r.length)return[Dl(e,t)];var n,o=0,i=Array.from(r).map(function(t){return e.slice(o,o=t<<1)});return t&&(o=0,n=Array.from(r).map(function(e){return t.slice(o,o=e)})),i.map(function(e,t){return Dl(e,n?n[t]:void 0)})}function Fl(e,t){var r=t;if(r===_l.Unknown&&(r=e.type()),r===_l.GeometryCollection){for(var n=[],o=0;o<e.partsLength();o++){var i=e.parts(o),a=i.type();n.push(Fl(i,a))}return{type:_l[r],geometries:n}}if(r===_l.MultiPolygon){for(var s=[],u=0;u<e.partsLength();u++)s.push(Fl(e.parts(u),_l.Polygon));return{type:_l[r],coordinates:s.map(function(e){return e.coordinates})}}var l=function(e,t){var r=e.xyArray(),n=e.zArray();switch(t){case _l.Point:var o=Array.from(r);return n&&o.push(n[0]),o;case _l.MultiPoint:case _l.LineString:return Dl(r,n);case _l.MultiLineString:case _l.Polygon:return Bl(r,n,e.endsArray())}}(e,r);return{type:_l[r],coordinates:l}}function Gl(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}!function(e){e[e.Byte=0]="Byte",e[e.UByte=1]="UByte",e[e.Bool=2]="Bool",e[e.Short=3]="Short",e[e.UShort=4]="UShort",e[e.Int=5]="Int",e[e.UInt=6]="UInt",e[e.Long=7]="Long",e[e.ULong=8]="ULong",e[e.Float=9]="Float",e[e.Double=10]="Double",e[e.String=11]="String",e[e.Json=12]="Json",e[e.DateTime=13]="DateTime",e[e.Binary=14]="Binary"}(Ll||(Ll={}));var zl=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.bb=null,this.bb_pos=0}var t,r,n;return t=e,n=[{key:"getRootAsColumn",value:function(t,r){return(r||new e).__init(t.readInt32(t.position())+t.position(),t)}},{key:"getSizePrefixedRootAsColumn",value:function(t,r){return t.setPosition(t.position()+Il.XU),(r||new e).__init(t.readInt32(t.position())+t.position(),t)}},{key:"startColumn",value:function(e){e.startObject(11)}},{key:"addName",value:function(e,t){e.addFieldOffset(0,t,0)}},{key:"addType",value:function(e,t){e.addFieldInt8(1,t,Ll.Byte)}},{key:"addTitle",value:function(e,t){e.addFieldOffset(2,t,0)}},{key:"addDescription",value:function(e,t){e.addFieldOffset(3,t,0)}},{key:"addWidth",value:function(e,t){e.addFieldInt32(4,t,-1)}},{key:"addPrecision",value:function(e,t){e.addFieldInt32(5,t,-1)}},{key:"addScale",value:function(e,t){e.addFieldInt32(6,t,-1)}},{key:"addNullable",value:function(e,t){e.addFieldInt8(7,+t,1)}},{key:"addUnique",value:function(e,t){e.addFieldInt8(8,+t,0)}},{key:"addPrimaryKey",value:function(e,t){e.addFieldInt8(9,+t,0)}},{key:"addMetadata",value:function(e,t){e.addFieldOffset(10,t,0)}},{key:"endColumn",value:function(e){var t=e.endObject();return e.requiredField(t,4),t}},{key:"createColumn",value:function(t,r,n,o,i,a,s,u,l,c,f,h){return e.startColumn(t),e.addName(t,r),e.addType(t,n),e.addTitle(t,o),e.addDescription(t,i),e.addWidth(t,a),e.addPrecision(t,s),e.addScale(t,u),e.addNullable(t,l),e.addUnique(t,c),e.addPrimaryKey(t,f),e.addMetadata(t,h),e.endColumn(t)}}],(r=[{key:"__init",value:function(e,t){return this.bb_pos=e,this.bb=t,this}},{key:"name",value:function(e){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__string(this.bb_pos+t,e):null}},{key:"type",value:function(){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readUint8(this.bb_pos+e):Ll.Byte}},{key:"title",value:function(e){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__string(this.bb_pos+t,e):null}},{key:"description",value:function(e){var t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__string(this.bb_pos+t,e):null}},{key:"width",value:function(){var e=this.bb.__offset(this.bb_pos,12);return e?this.bb.readInt32(this.bb_pos+e):-1}},{key:"precision",value:function(){var e=this.bb.__offset(this.bb_pos,14);return e?this.bb.readInt32(this.bb_pos+e):-1}},{key:"scale",value:function(){var e=this.bb.__offset(this.bb_pos,16);return e?this.bb.readInt32(this.bb_pos+e):-1}},{key:"nullable",value:function(){var e=this.bb.__offset(this.bb_pos,18);return!e||!!this.bb.readInt8(this.bb_pos+e)}},{key:"unique",value:function(){var e=this.bb.__offset(this.bb_pos,20);return!!e&&!!this.bb.readInt8(this.bb_pos+e)}},{key:"primaryKey",value:function(){var e=this.bb.__offset(this.bb_pos,22);return!!e&&!!this.bb.readInt8(this.bb_pos+e)}},{key:"metadata",value:function(e){var t=this.bb.__offset(this.bb_pos,24);return t?this.bb.__string(this.bb_pos+t,e):null}}])&&Gl(t.prototype,r),n&&Gl(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Ul(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Vl=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.bb=null,this.bb_pos=0}var t,r,n;return t=e,n=[{key:"getRootAsFeature",value:function(t,r){return(r||new e).__init(t.readInt32(t.position())+t.position(),t)}},{key:"getSizePrefixedRootAsFeature",value:function(t,r){return t.setPosition(t.position()+Il.XU),(r||new e).__init(t.readInt32(t.position())+t.position(),t)}},{key:"startFeature",value:function(e){e.startObject(3)}},{key:"addGeometry",value:function(e,t){e.addFieldOffset(0,t,0)}},{key:"addProperties",value:function(e,t){e.addFieldOffset(1,t,0)}},{key:"createPropertiesVector",value:function(e,t){e.startVector(1,t.length,1);for(var r=t.length-1;r>=0;r--)e.addInt8(t[r]);return e.endVector()}},{key:"startPropertiesVector",value:function(e,t){e.startVector(1,t,1)}},{key:"addColumns",value:function(e,t){e.addFieldOffset(2,t,0)}},{key:"createColumnsVector",value:function(e,t){e.startVector(4,t.length,4);for(var r=t.length-1;r>=0;r--)e.addOffset(t[r]);return e.endVector()}},{key:"startColumnsVector",value:function(e,t){e.startVector(4,t,4)}},{key:"endFeature",value:function(e){return e.endObject()}},{key:"finishFeatureBuffer",value:function(e,t){e.finish(t)}},{key:"finishSizePrefixedFeatureBuffer",value:function(e,t){e.finish(t,void 0,!0)}},{key:"createFeature",value:function(t,r,n,o){return e.startFeature(t),e.addGeometry(t,r),e.addProperties(t,n),e.addColumns(t,o),e.endFeature(t)}}],(r=[{key:"__init",value:function(e,t){return this.bb_pos=e,this.bb=t,this}},{key:"geometry",value:function(e){var t=this.bb.__offset(this.bb_pos,4);return t?(e||new Nl).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}},{key:"properties",value:function(e){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readUint8(this.bb.__vector(this.bb_pos+t)+e):0}},{key:"propertiesLength",value:function(){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}},{key:"propertiesArray",value:function(){var e=this.bb.__offset(this.bb_pos,6);return e?new Uint8Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null}},{key:"columns",value:function(e,t){var r=this.bb.__offset(this.bb_pos,8);return r?(t||new zl).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+4*e),this.bb):null}},{key:"columnsLength",value:function(){var e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__vector_len(this.bb_pos+e):0}}])&&Ul(t.prototype,r),n&&Ul(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),Wl=(new TextEncoder,new TextDecoder);function Yl(e,t){var r={};if(!t||0===t.length)return r;var n=e.propertiesArray();if(!n)return r;for(var o=new DataView(n.buffer,n.byteOffset),i=e.propertiesLength(),a=0;a<i;){var s=o.getUint16(a,!0);a+=2;var u=t[s],l=u.name;switch(u.type){case Ll.Bool:r[l]=!!o.getUint8(a),a+=1;break;case Ll.Byte:r[l]=o.getInt8(a),a+=1;break;case Ll.UByte:r[l]=o.getUint8(a),a+=1;break;case Ll.Short:r[l]=o.getInt16(a,!0),a+=2;break;case Ll.UShort:r[l]=o.getUint16(a,!0),a+=2;break;case Ll.Int:r[l]=o.getInt32(a,!0),a+=4;break;case Ll.UInt:r[l]=o.getUint32(a,!0),a+=4;break;case Ll.Long:r[l]=Number(o.getBigInt64(a,!0)),a+=8;break;case Ll.ULong:r[l]=Number(o.getBigUint64(a,!0)),a+=8;break;case Ll.Float:r[l]=o.getFloat32(a,!0),a+=4;break;case Ll.Double:r[l]=o.getFloat64(a,!0),a+=8;break;case Ll.DateTime:case Ll.String:var c=o.getUint32(a,!0);a+=4,r[l]=Wl.decode(n.subarray(a,a+c)),a+=c;break;case Ll.Json:var f=o.getUint32(a,!0);a+=4;var h=Wl.decode(n.subarray(a,a+f));r[l]=JSON.parse(h),a+=f;break;default:throw new Error("Unknown type "+u.type)}}return r}function Hl(e,t){var r=t.columns;return{type:"Feature",geometry:Fl(e.geometry(),t.geometryType),properties:Yl(e,r)}}var Xl=r(43425);function ql(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Jl=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.bb=null,this.bb_pos=0}var t,r,n;return t=e,n=[{key:"getRootAsCrs",value:function(t,r){return(r||new e).__init(t.readInt32(t.position())+t.position(),t)}},{key:"getSizePrefixedRootAsCrs",value:function(t,r){return t.setPosition(t.position()+Il.XU),(r||new e).__init(t.readInt32(t.position())+t.position(),t)}},{key:"startCrs",value:function(e){e.startObject(6)}},{key:"addOrg",value:function(e,t){e.addFieldOffset(0,t,0)}},{key:"addCode",value:function(e,t){e.addFieldInt32(1,t,0)}},{key:"addName",value:function(e,t){e.addFieldOffset(2,t,0)}},{key:"addDescription",value:function(e,t){e.addFieldOffset(3,t,0)}},{key:"addWkt",value:function(e,t){e.addFieldOffset(4,t,0)}},{key:"addCodeString",value:function(e,t){e.addFieldOffset(5,t,0)}},{key:"endCrs",value:function(e){return e.endObject()}},{key:"createCrs",value:function(t,r,n,o,i,a,s){return e.startCrs(t),e.addOrg(t,r),e.addCode(t,n),e.addName(t,o),e.addDescription(t,i),e.addWkt(t,a),e.addCodeString(t,s),e.endCrs(t)}}],(r=[{key:"__init",value:function(e,t){return this.bb_pos=e,this.bb=t,this}},{key:"org",value:function(e){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__string(this.bb_pos+t,e):null}},{key:"code",value:function(){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt32(this.bb_pos+e):0}},{key:"name",value:function(e){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__string(this.bb_pos+t,e):null}},{key:"description",value:function(e){var t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__string(this.bb_pos+t,e):null}},{key:"wkt",value:function(e){var t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__string(this.bb_pos+t,e):null}},{key:"codeString",value:function(e){var t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__string(this.bb_pos+t,e):null}}])&&ql(t.prototype,r),n&&ql(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Zl(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Kl=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.bb=null,this.bb_pos=0}var t,r,n;return t=e,n=[{key:"getRootAsHeader",value:function(t,r){return(r||new e).__init(t.readInt32(t.position())+t.position(),t)}},{key:"getSizePrefixedRootAsHeader",value:function(t,r){return t.setPosition(t.position()+Il.XU),(r||new e).__init(t.readInt32(t.position())+t.position(),t)}},{key:"startHeader",value:function(e){e.startObject(14)}},{key:"addName",value:function(e,t){e.addFieldOffset(0,t,0)}},{key:"addEnvelope",value:function(e,t){e.addFieldOffset(1,t,0)}},{key:"createEnvelopeVector",value:function(e,t){e.startVector(8,t.length,8);for(var r=t.length-1;r>=0;r--)e.addFloat64(t[r]);return e.endVector()}},{key:"startEnvelopeVector",value:function(e,t){e.startVector(8,t,8)}},{key:"addGeometryType",value:function(e,t){e.addFieldInt8(2,t,_l.Unknown)}},{key:"addHasZ",value:function(e,t){e.addFieldInt8(3,+t,0)}},{key:"addHasM",value:function(e,t){e.addFieldInt8(4,+t,0)}},{key:"addHasT",value:function(e,t){e.addFieldInt8(5,+t,0)}},{key:"addHasTm",value:function(e,t){e.addFieldInt8(6,+t,0)}},{key:"addColumns",value:function(e,t){e.addFieldOffset(7,t,0)}},{key:"createColumnsVector",value:function(e,t){e.startVector(4,t.length,4);for(var r=t.length-1;r>=0;r--)e.addOffset(t[r]);return e.endVector()}},{key:"startColumnsVector",value:function(e,t){e.startVector(4,t,4)}},{key:"addFeaturesCount",value:function(e,t){e.addFieldInt64(8,t,BigInt("0"))}},{key:"addIndexNodeSize",value:function(e,t){e.addFieldInt16(9,t,16)}},{key:"addCrs",value:function(e,t){e.addFieldOffset(10,t,0)}},{key:"addTitle",value:function(e,t){e.addFieldOffset(11,t,0)}},{key:"addDescription",value:function(e,t){e.addFieldOffset(12,t,0)}},{key:"addMetadata",value:function(e,t){e.addFieldOffset(13,t,0)}},{key:"endHeader",value:function(e){return e.endObject()}},{key:"finishHeaderBuffer",value:function(e,t){e.finish(t)}},{key:"finishSizePrefixedHeaderBuffer",value:function(e,t){e.finish(t,void 0,!0)}}],(r=[{key:"__init",value:function(e,t){return this.bb_pos=e,this.bb=t,this}},{key:"name",value:function(e){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__string(this.bb_pos+t,e):null}},{key:"envelope",value:function(e){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readFloat64(this.bb.__vector(this.bb_pos+t)+8*e):0}},{key:"envelopeLength",value:function(){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}},{key:"envelopeArray",value:function(){var e=this.bb.__offset(this.bb_pos,6);return e?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null}},{key:"geometryType",value:function(){var e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readUint8(this.bb_pos+e):_l.Unknown}},{key:"hasZ",value:function(){var e=this.bb.__offset(this.bb_pos,10);return!!e&&!!this.bb.readInt8(this.bb_pos+e)}},{key:"hasM",value:function(){var e=this.bb.__offset(this.bb_pos,12);return!!e&&!!this.bb.readInt8(this.bb_pos+e)}},{key:"hasT",value:function(){var e=this.bb.__offset(this.bb_pos,14);return!!e&&!!this.bb.readInt8(this.bb_pos+e)}},{key:"hasTm",value:function(){var e=this.bb.__offset(this.bb_pos,16);return!!e&&!!this.bb.readInt8(this.bb_pos+e)}},{key:"columns",value:function(e,t){var r=this.bb.__offset(this.bb_pos,18);return r?(t||new zl).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+4*e),this.bb):null}},{key:"columnsLength",value:function(){var e=this.bb.__offset(this.bb_pos,18);return e?this.bb.__vector_len(this.bb_pos+e):0}},{key:"featuresCount",value:function(){var e=this.bb.__offset(this.bb_pos,20);return e?this.bb.readUint64(this.bb_pos+e):BigInt("0")}},{key:"indexNodeSize",value:function(){var e=this.bb.__offset(this.bb_pos,22);return e?this.bb.readUint16(this.bb_pos+e):16}},{key:"crs",value:function(e){var t=this.bb.__offset(this.bb_pos,24);return t?(e||new Jl).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}},{key:"title",value:function(e){var t=this.bb.__offset(this.bb_pos,26);return t?this.bb.__string(this.bb_pos+t,e):null}},{key:"description",value:function(e){var t=this.bb.__offset(this.bb_pos,28);return t?this.bb.__string(this.bb_pos+t,e):null}},{key:"metadata",value:function(e){var t=this.bb.__offset(this.bb_pos,30);return t?this.bb.__string(this.bb_pos+t,e):null}}])&&Zl(t.prototype,r),n&&Zl(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Ql(e){for(var t=Kl.getRootAsHeader(e),r=t.featuresCount(),n=t.indexNodeSize(),o=[],i=0;i<t.columnsLength();i++){var a=t.columns(i);if(!a)throw new Error("Column unexpectedly missing");if(!a.name())throw new Error("Column name unexpectedly missing");o.push({name:a.name(),type:a.type(),title:a.title(),description:a.description(),width:a.width(),precision:a.precision(),scale:a.scale(),nullable:a.nullable(),unique:a.unique(),primary_key:a.primaryKey()})}var s=t.crs(),u=s?{org:s.org(),code:s.code(),name:s.name(),description:s.description(),wkt:s.wkt(),code_string:s.codeString()}:null;return{geometryType:t.geometryType(),columns:o,envelope:null,featuresCount:Number(r),indexNodeSize:n,crs:u,title:t.title(),description:t.description(),metadata:t.metadata()}}var $l=r(41351);function ec(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var tc,rc=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._extraRequestThreshold=262144}var t,r,n;return t=e,(r=[{key:"extraRequestThreshold",value:function(){return this._extraRequestThreshold}},{key:"setExtraRequestThreshold",value:function(e){if(e<0)throw new Error("extraRequestThreshold cannot be negative");this._extraRequestThreshold=e}}])&&ec(t.prototype,r),n&&ec(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function nc(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}rc.global=new rc,function(e){e[e.Debug=0]="Debug",e[e.Info=1]="Info",e[e.Warn=2]="Warn",e[e.Error=3]="Error"}(tc||(tc={}));var oc,ic=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,n;return t=e,n=[{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.log.apply(this,[tc.Debug].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.log.apply(this,[tc.Info].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.log.apply(this,[tc.Warn].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.log.apply(this,[tc.Error].concat(t))}},{key:"log",value:function(e){if(!(this.logLevel>e)){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];switch(e){case tc.Debug:var o;(o=console).debug.apply(o,r);break;case tc.Info:var i;(i=console).info.apply(i,r);break;case tc.Warn:var a;(a=console).warn.apply(a,r);break;case tc.Error:var s;(s=console).error.apply(s,r)}}}}],(r=null)&&nc(t.prototype,r),n&&nc(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function ac(e){"@babel/helpers - typeof";return(ac="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function sc(){sc=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var o=t&&t.prototype instanceof f?t:f,i=Object.create(o.prototype),a=new S(n||[]);return i._invoke=function(e,t,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return P()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=w(a,r);if(s){if(s===c)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=l(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===c)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(e,r,a),i}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var c={};function f(){}function h(){}function p(){}var d={};s(d,o,function(){return this});var y=Object.getPrototypeOf,v=y&&y(y(O([])));v&&v!==t&&r.call(v,o)&&(d=v);var g=p.prototype=f.prototype=Object.create(d);function m(e){["next","throw","return"].forEach(function(t){s(e,t,function(e){return this._invoke(t,e)})})}function b(e,t){var n;this._invoke=function(o,i){function a(){return new t(function(n,a){!function n(o,i,a,s){var u=l(e[o],e,i);if("throw"!==u.type){var c=u.arg,f=c.value;return f&&"object"==ac(f)&&r.call(f,"__await")?t.resolve(f.__await).then(function(e){n("next",e,a,s)},function(e){n("throw",e,a,s)}):t.resolve(f).then(function(e){c.value=e,a(c)},function(e){return n("throw",e,a,s)})}s(u.arg)}(o,i,n,a)})}return n=n?n.then(a,a):a()}}function w(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return c;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}var n=l(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,c;var o=n.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,c):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,c)}function _(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(_,this),this.reset(!0)}function O(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:P}}function P(){return{value:void 0,done:!0}}return h.prototype=p,s(g,"constructor",p),s(p,"constructor",h),h.displayName=s(p,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,s(e,a,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},m(b.prototype),s(b.prototype,i,function(){return this}),e.AsyncIterator=b,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(e){return e.done?e.value:a.next()})},m(g),s(g,a,"Generator"),s(g,o,function(){return this}),s(g,"toString",function(){return"[object Generator]"}),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=O,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,c):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),c},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),x(r),c}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:O(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),c}},e}function uc(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,s=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(e){s=!0,o=e}finally{try{a||null==r.return||r.return()}finally{if(s)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return lc(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return lc(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function lc(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function cc(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function fc(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function hc(e){var t,r;function n(t,r){try{var i=e[t](r),a=i.value,s=a instanceof pc;Promise.resolve(s?a.v:a).then(function(r){if(s){var u="return"===t?"return":"next";if(!a.k||r.done)return n(u,r);r=e[u](r).value}o(i.done?"return":"normal",r)},function(e){n("throw",e)})}catch(e){o("throw",e)}}function o(e,o){switch(e){case"return":t.resolve({value:o,done:!0});break;case"throw":t.reject(o);break;default:t.resolve({value:o,done:!1})}(t=t.next)?n(t.key,t.arg):r=null}this._invoke=function(e,o){return new Promise(function(i,a){var s={key:e,arg:o,resolve:i,reject:a,next:null};r?r=r.next=s:(t=r=s,n(e,o))})},"function"!=typeof e.return&&(this.return=void 0)}function pc(e,t){this.v=e,this.k=t}ic.logLevel=tc.Info,hc.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},hc.prototype.next=function(e){return this._invoke("next",e)},hc.prototype.throw=function(e){return this._invoke("throw",e)},hc.prototype.return=function(e){return this._invoke("return",e)};var dc=40;function yc(e,t){t=Math.min(Math.max(+t,2),65535);var r=e,n=r;do{n+=r=Math.ceil(r/t)}while(1!==r);return n*dc}function vc(e,t){if(t<2)throw new Error("Node size must be at least 2");if(0===e)throw new Error("Number of items must be greater than 0");var r=e,n=r,o=[r];do{n+=r=Math.ceil(r/t),o.push(r)}while(1!==r);var i=[];r=n;for(var a=0,s=o;a<s.length;a++){var u=s[a];i.push(r-u),r-=u}i.reverse(),o.reverse();for(var l=[],c=0;c<o.length;c++)l.push([i[c],i[c]+o[c]]);return l.reverse(),l}function gc(e,t,r,n){return(oc=oc||(o=sc().mark(function e(t,r,n,o){var i,a,s,u,l,c,f,h,p,d;return sc().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:i=function(){function e(t,r){cc(this,e),this._level=r,this.nodes=t}var t,r,n;return t=e,(r=[{key:"level",value:function(){return this._level}},{key:"startNode",value:function(){return this.nodes[0]}},{key:"endNode",value:function(){return this.nodes[1]}},{key:"extendEndNodeToNewOffset",value:function(e){console.assert(e>this.nodes[1]),this.nodes[1]=e}},{key:"toString",value:function(){return"[NodeRange level: ".concat(this._level,", nodes: ").concat(this.nodes[0],"-").concat(this.nodes[1],"]")}}])&&fc(t.prototype,r),n&&fc(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),a=n.minX,s=n.minY,u=n.maxX,l=n.maxY,ic.info("tree items: ".concat(t,", nodeSize: ").concat(r)),c=vc(t,r),f=c[0][0],void 0,y=c.length-1,h=new i([0,1],y),p=[h],ic.debug("starting stream search with queue: ".concat(p,", numItems: ").concat(t,", nodeSize: ").concat(r,", levelBounds: ").concat(c)),d=sc().mark(function e(){var n,h,d,y,v,g,m,b,w,_,x,S;return sc().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=p.shift(),ic.debug("popped node: ".concat(n,", queueLength: ").concat(p.length)),h=n.startNode(),d=h>=f,y=uc(c[n.level()],2),v=y[1],g=Math.min(n.endNode()+r,v),m=g-h,e.next=9,new pc(o(h*dc,m*dc),0);case 9:b=e.sent,w=new Float64Array(b),_=new Uint32Array(b),x=sc().mark(function e(r){var o,c,y,v,g,m,b,x;return sc().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(u<w[(o=5*(r-h))+0])){e.next=3;break}return e.abrupt("return",0);case 3:if(!(l<w[o+1])){e.next=5;break}return e.abrupt("return",0);case 5:if(!(a>w[o+2])){e.next=7;break}return e.abrupt("return",0);case 7:if(!(s>w[o+3])){e.next=9;break}return e.abrupt("return",0);case 9:if(c=_[8+(o<<1)],y=_[9+(o<<1)],v=mc(y,c),!d){e.next=17;break}return g=function(){if(r<t-1){var e=5*(r-h+1),n=_[8+(e<<1)];return mc(_[9+(e<<1)],n)-v}return null}(),e.next=16,[v,r-f,g];case 16:return e.abrupt("return",0);case 17:if(m=rc.global.extraRequestThreshold()/dc,!(void 0!==(b=p[p.length-1])&&b.level()==n.level()-1&&v<b.endNode()+m)){e.next=23;break}return ic.debug('Merging "nodeRange" request into existing range: '.concat(b,", newOffset: ").concat(b.endNode()," -> ").concat(v)),b.extendEndNodeToNewOffset(v),e.abrupt("return",0);case 23:void 0,S=n.level()-1,x=new i([v,v+1],S),void 0!==b&&b.level()==x.level()?ic.info("Same level, but too far away. Pushing new request at offset: ".concat(v," rather than merging with distant ").concat(b)):ic.info("Pushing new level for ".concat(x," onto queue with nearestNodeRange: ").concat(b," since there's not already a range for this level.")),p.push(x);case 26:case"end":return e.stop()}var S},e)}),S=h;case 14:if(!(S<g)){e.next=22;break}return e.delegateYield(x(S),"t0",16);case 16:if(0!==e.t0){e.next=19;break}return e.abrupt("continue",19);case 19:S++,e.next=14;break;case 22:case"end":return e.stop()}},e)});case 9:if(0==p.length){e.next=13;break}return e.delegateYield(d(),"t0",11);case 11:e.next=9;break;case 13:case"end":return e.stop()}var y},e)}),function(){return new hc(o.apply(this,arguments))})).apply(this,arguments);var o}function mc(e,t){if(0!=(4293918720&e))throw Error("integer is too large to be safely represented");return t+e*Math.pow(2,32)}var bc=new Uint8Array([102,103,98,3,102,103,98,0]),wc=4;function _c(e){"@babel/helpers - typeof";return(_c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xc(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=Oc(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function Sc(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,s=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(e){s=!0,o=e}finally{try{a||null==r.return||r.return()}finally{if(s)throw o}}return i}(e,t)||Oc(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Oc(e,t){if(e){if("string"==typeof e)return Pc(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Pc(e,t):void 0}}function Pc(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Ec(){Ec=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var o=t&&t.prototype instanceof f?t:f,i=Object.create(o.prototype),a=new S(n||[]);return i._invoke=function(e,t,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return P()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=w(a,r);if(s){if(s===c)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=l(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===c)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(e,r,a),i}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var c={};function f(){}function h(){}function p(){}var d={};s(d,o,function(){return this});var y=Object.getPrototypeOf,v=y&&y(y(O([])));v&&v!==t&&r.call(v,o)&&(d=v);var g=p.prototype=f.prototype=Object.create(d);function m(e){["next","throw","return"].forEach(function(t){s(e,t,function(e){return this._invoke(t,e)})})}function b(e,t){var n;this._invoke=function(o,i){function a(){return new t(function(n,a){!function n(o,i,a,s){var u=l(e[o],e,i);if("throw"!==u.type){var c=u.arg,f=c.value;return f&&"object"==_c(f)&&r.call(f,"__await")?t.resolve(f.__await).then(function(e){n("next",e,a,s)},function(e){n("throw",e,a,s)}):t.resolve(f).then(function(e){c.value=e,a(c)},function(e){return n("throw",e,a,s)})}s(u.arg)}(o,i,n,a)})}return n=n?n.then(a,a):a()}}function w(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return c;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}var n=l(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,c;var o=n.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,c):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,c)}function _(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(_,this),this.reset(!0)}function O(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:P}}function P(){return{value:void 0,done:!0}}return h.prototype=p,s(g,"constructor",p),s(p,"constructor",h),h.displayName=s(p,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,s(e,a,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},m(b.prototype),s(b.prototype,i,function(){return this}),e.AsyncIterator=b,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(e){return e.done?e.value:a.next()})},m(g),s(g,a,"Generator"),s(g,o,function(){return this}),s(g,"toString",function(){return"[object Generator]"}),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=O,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,c):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),c},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),x(r),c}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:O(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),c}},e}function kc(e,t,r,n,o,i,a){try{var s=e[i](a),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function Mc(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function a(e){kc(i,n,o,a,s,"next",e)}function s(e){kc(i,n,o,a,s,"throw",e)}a(void 0)})}}function Cc(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function jc(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Tc(e,t,r){return t&&jc(e.prototype,t),r&&jc(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ac(e){return function(){return new Ic(e.apply(this,arguments))}}function Ic(e){var t,r;function n(t,r){try{var i=e[t](r),a=i.value,s=a instanceof Nc;Promise.resolve(s?a.v:a).then(function(r){if(s){var u="return"===t?"return":"next";if(!a.k||r.done)return n(u,r);r=e[u](r).value}o(i.done?"return":"normal",r)},function(e){n("throw",e)})}catch(e){o("throw",e)}}function o(e,o){switch(e){case"return":t.resolve({value:o,done:!0});break;case"throw":t.reject(o);break;default:t.resolve({value:o,done:!1})}(t=t.next)?n(t.key,t.arg):r=null}this._invoke=function(e,o){return new Promise(function(i,a){var s={key:e,arg:o,resolve:i,reject:a,next:null};r?r=r.next=s:(t=r=s,n(e,o))})},"function"!=typeof e.return&&(this.return=void 0)}function Rc(e){return new Nc(e,0)}function Lc(e){var t={},r=!1;function n(t,n){return r=!0,{done:!1,value:new Nc(n=new Promise(function(r){r(e[t](n))}),1)}}return t["undefined"!=typeof Symbol&&Symbol.iterator||"@@iterator"]=function(){return this},t.next=function(e){return r?(r=!1,e):n("next",e)},"function"==typeof e.throw&&(t.throw=function(e){if(r)throw r=!1,e;return n("throw",e)}),"function"==typeof e.return&&(t.return=function(e){return r?(r=!1,e):n("return",e)}),t}function Nc(e,t){this.v=e,this.k=t}function Dc(e){var t,r,n,o=2;for("undefined"!=typeof Symbol&&(r=Symbol.asyncIterator,n=Symbol.iterator);o--;){if(r&&null!=(t=e[r]))return t.call(e);if(n&&null!=(t=e[n]))return new Bc(t.call(e));r="@@asyncIterator",n="@@iterator"}throw new TypeError("Object is not async iterable")}function Bc(e){function t(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then(function(e){return{value:e,done:t}})}return(Bc=function(e){this.s=e,this.n=e.next}).prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var r=this.s.return;return void 0===r?Promise.resolve({value:e,done:!0}):t(r.apply(this.s,arguments))},throw:function(e){var r=this.s.return;return void 0===r?Promise.reject(e):t(r.apply(this.s,arguments))}},new Bc(e)}Ic.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},Ic.prototype.next=function(e){return this._invoke("next",e)},Ic.prototype.throw=function(e){return this._invoke("throw",e)},Ic.prototype.return=function(e){return this._invoke("return",e)};var Fc,Gc,zc,Uc=function(){var e,t;function r(e,t,n,o){Cc(this,r),this.headerClient=e,this.header=t,this.headerLength=n,this.indexLength=o}return Tc(r,[{key:"selectBbox",value:function(e){var t=this;return Ac(Ec().mark(function r(){var n,o,i,a,s,u,l,c,f,h,p,d,y,v,g,m,b,w,_,x;return Ec().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:o=t.lengthBeforeTree(),i=t.headerClient,a=function(e,t){return(n=n||Mc(Ec().mark(function e(t,r){var n;return Ec().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=0,e.abrupt("return",i.getRange(o+t,r,n,"index"));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)},s=[],u=[],l=!1,c=!1,r.prev=7,h=Dc(gc(t.header.featuresCount,t.header.indexNodeSize,e,a));case 9:return r.next=11,Rc(h.next());case 11:if(!(l=!(p=r.sent).done)){r.next=26;break}if(d=p.value,y=Sc(d,2),v=y[0],g=Sc(d,3),(m=g[2])||(ic.info("final feature"),b=rc.global.extraRequestThreshold(),m=b),0!=u.length){r.next=19;break}return u.push([v,m]),r.abrupt("continue",23);case 19:w=u[u.length-1],(_=v-(w[0]+w[1]))>rc.global.extraRequestThreshold()&&(ic.info("Pushing new feature batch, since gap ".concat(_," was too large")),s.push(u),u=[]),u.push([v,m]);case 23:l=!1,r.next=9;break;case 26:r.next=32;break;case 28:r.prev=28,r.t0=r.catch(7),c=!0,f=r.t0;case 32:if(r.prev=32,r.prev=33,!l||null==h.return){r.next=37;break}return r.next=37,Rc(h.return());case 37:if(r.prev=37,!c){r.next=40;break}throw f;case 40:return r.finish(37);case 41:return r.finish(32);case 42:return t.headerClient.logUsage("header+index"),u.length>0&&s.push(u),x=s.flatMap(function(e){return t.readFeatureBatch(e)}),r.delegateYield(Lc(Dc($l.ZN.merge(x))),"t1",46);case 46:case"end":return r.stop()}},r,null,[[7,28,32,42],[33,,37,41]])}))()}},{key:"lengthBeforeTree",value:function(){return bc.length+wc+this.headerLength}},{key:"lengthBeforeFeatures",value:function(){return this.lengthBeforeTree()+this.indexLength}},{key:"buildFeatureClient",value:function(){return new Vc(this.headerClient.httpClient)}},{key:"readFeatureBatch",value:function(e){var t=this;return Ac(Ec().mark(function r(){var n,o,i,a,s,u,l,c,f,h,p;return Ec().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:n=Sc(e[0],1),o=n[0],i=Sc(e[e.length-1],2),a=i[0],s=i[1],u=a+s-o,l=t.buildFeatureClient(),c=xc(e),r.prev=7,c.s();case 9:if((f=c.n()).done){r.next=17;break}return h=Sc(f.value,1),p=h[0],r.next=13,Rc(t.readFeature(l,p,u));case 13:return r.next=15,r.sent;case 15:r.next=9;break;case 17:r.next=22;break;case 19:r.prev=19,r.t0=r.catch(7),c.e(r.t0);case 22:return r.prev=22,c.f(),r.finish(22);case 25:l.logUsage("feature");case 26:case"end":return r.stop()}},r,null,[[7,19,22,25]])}))()}},{key:"readFeature",value:function(t,r,n){return(e=e||Mc(Ec().mark(function e(t,r,n){var o,i,a,s,u,l,c;return Ec().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=r+this.lengthBeforeFeatures(),e.next=3,t.getRange(o,4,n,"feature length");case 3:return a=e.sent,i=new DataView(a).getUint32(0,!0),e.next=7,t.getRange(o+4,i,n,"feature data");case 7:return s=e.sent,u=new Uint8Array(s),(l=new Uint8Array(i+wc)).set(u,wc),(c=new Il.cZ(l)).setPosition(wc),e.abrupt("return",Vl.getRootAsFeature(c));case 14:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}}],[{key:"open",value:function(e){return(t=t||Mc(Ec().mark(function e(t){var n,o,i,a,s,u,l,c,f,h,p;return Ec().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=2024,o=new Vc(t),i=function(){var e,t=0;for(e=0;e<3;e++){t+=Math.pow(16,e)*dc}return t}(),a=n+i,ic.debug("fetching header. minReqLength: ".concat(a," (assumedHeaderLength: ").concat(n,", assumedIndexLength: ").concat(i,")")),e.t0=Uint8Array,e.next=8,o.getRange(0,8,a,"header");case 8:if(e.t1=e.sent,(s=new e.t0(e.t1)).subarray(0,3).every(function(e,t){return bc[t]===e})){e.next=13;break}throw ic.error("bytes: ".concat(s," != ").concat(bc)),new Error("Not a FlatGeobuf file");case 13:return ic.debug("magic bytes look good"),e.next=16,o.getRange(8,4,a,"header");case 16:if(l=e.sent,!((u=new DataView(l).getUint32(0,!0))>10485760||u<8)){e.next=21;break}throw new Error("Invalid header size");case 21:return ic.debug("headerLength: ".concat(u)),e.next=24,o.getRange(12,u,a,"header");case 24:return c=e.sent,f=new Il.cZ(new Uint8Array(c)),h=Ql(f),p=yc(h.featuresCount,h.indexNodeSize),ic.debug("completed: opening http reader"),e.abrupt("return",new r(o,h,u,p));case 30:case"end":return e.stop()}},e)}))).apply(this,arguments)}}]),r}(),Vc=function(){var e;function t(e){Cc(this,t),this.bytesEverUsed=0,this.bytesEverFetched=0,this.buffer=new ArrayBuffer(0),this.head=0,this.httpClient="string"==typeof e?new Wc(e):e}return Tc(t,[{key:"getRange",value:function(t,r,n,o){return(e=e||Mc(Ec().mark(function e(t,r,n,o){var i,a,s;return Ec().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.bytesEverUsed+=r,i=t-this.head,a=i+r,!(i>=0&&a<=this.buffer.byteLength)){e.next=5;break}return e.abrupt("return",this.buffer.slice(i,a));case 5:return s=Math.max(r,n),this.bytesEverFetched+=s,ic.debug("requesting for new Range: ".concat(t,"-").concat(t+r-1)),e.next=10,this.httpClient.getRange(t,s,o);case 10:return this.buffer=e.sent,this.head=t,e.abrupt("return",this.buffer.slice(0,r));case 13:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}},{key:"logUsage",value:function(e){var t=e.split(" ")[0],r=this.bytesEverUsed,n=this.bytesEverFetched,o=(100*r/n).toFixed(2);ic.info("".concat(t," bytes used/requested: ").concat(r," / ").concat(n," = ").concat(o,"%"))}}]),t}(),Wc=function(){var e;function t(e){Cc(this,t),this.requestsEverMade=0,this.bytesEverRequested=0,this.url=e}return Tc(t,[{key:"getRange",value:function(t,r,n){return(e=e||Mc(Ec().mark(function e(t,r,n){var o,i;return Ec().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.requestsEverMade+=1,this.bytesEverRequested+=r,o="bytes=".concat(t,"-").concat(t+r-1),ic.info("request: #".concat(this.requestsEverMade,", purpose: ").concat(n,"), bytes: (this_request: ").concat(r,", ever: ").concat(this.bytesEverRequested,"), Range: ").concat(o)),e.next=6,fetch(this.url,{headers:{Range:o}});case 6:return i=e.sent,e.abrupt("return",i.arrayBuffer());case 8:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}}]),t}();function Yc(e){"@babel/helpers - typeof";return(Yc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Hc(){Hc=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var o=t&&t.prototype instanceof f?t:f,i=Object.create(o.prototype),a=new S(n||[]);return i._invoke=function(e,t,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return P()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=w(a,r);if(s){if(s===c)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=l(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===c)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(e,r,a),i}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var c={};function f(){}function h(){}function p(){}var d={};s(d,o,function(){return this});var y=Object.getPrototypeOf,v=y&&y(y(O([])));v&&v!==t&&r.call(v,o)&&(d=v);var g=p.prototype=f.prototype=Object.create(d);function m(e){["next","throw","return"].forEach(function(t){s(e,t,function(e){return this._invoke(t,e)})})}function b(e,t){var n;this._invoke=function(o,i){function a(){return new t(function(n,a){!function n(o,i,a,s){var u=l(e[o],e,i);if("throw"!==u.type){var c=u.arg,f=c.value;return f&&"object"==Yc(f)&&r.call(f,"__await")?t.resolve(f.__await).then(function(e){n("next",e,a,s)},function(e){n("throw",e,a,s)}):t.resolve(f).then(function(e){c.value=e,a(c)},function(e){return n("throw",e,a,s)})}s(u.arg)}(o,i,n,a)})}return n=n?n.then(a,a):a()}}function w(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return c;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}var n=l(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,c;var o=n.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,c):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,c)}function _(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(_,this),this.reset(!0)}function O(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:P}}function P(){return{value:void 0,done:!0}}return h.prototype=p,s(g,"constructor",p),s(p,"constructor",h),h.displayName=s(p,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,s(e,a,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},m(b.prototype),s(b.prototype,i,function(){return this}),e.AsyncIterator=b,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(e){return e.done?e.value:a.next()})},m(g),s(g,a,"Generator"),s(g,o,function(){return this}),s(g,"toString",function(){return"[object Generator]"}),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=O,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,c):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),c},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),x(r),c}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:O(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),c}},e}function Xc(e,t,r,n,o,i,a){try{var s=e[i](a),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function qc(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function a(e){Xc(i,n,o,a,s,"next",e)}function s(e){Xc(i,n,o,a,s,"throw",e)}a(void 0)})}}function Jc(e){var t,r,n,o=2;for("undefined"!=typeof Symbol&&(r=Symbol.asyncIterator,n=Symbol.iterator);o--;){if(r&&null!=(t=e[r]))return t.call(e);if(n&&null!=(t=e[n]))return new Zc(t.call(e));r="@@asyncIterator",n="@@iterator"}throw new TypeError("Object is not async iterable")}function Zc(e){function t(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then(function(e){return{value:e,done:t}})}return(Zc=function(e){this.s=e,this.n=e.next}).prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var r=this.s.return;return void 0===r?Promise.resolve({value:e,done:!0}):t(r.apply(this.s,arguments))},throw:function(e){var r=this.s.return;return void 0===r?Promise.reject(e):t(r.apply(this.s,arguments))}},new Zc(e)}function Kc(e){return new ef(e,0)}function Qc(e){return function(){return new $c(e.apply(this,arguments))}}function $c(e){var t,r;function n(t,r){try{var i=e[t](r),a=i.value,s=a instanceof ef;Promise.resolve(s?a.v:a).then(function(r){if(s){var u="return"===t?"return":"next";if(!a.k||r.done)return n(u,r);r=e[u](r).value}o(i.done?"return":"normal",r)},function(e){n("throw",e)})}catch(e){o("throw",e)}}function o(e,o){switch(e){case"return":t.resolve({value:o,done:!0});break;case"throw":t.reject(o);break;default:t.resolve({value:o,done:!1})}(t=t.next)?n(t.key,t.arg):r=null}this._invoke=function(e,o){return new Promise(function(i,a){var s={key:e,arg:o,resolve:i,reject:a,next:null};r?r=r.next=s:(t=r=s,n(e,o))})},"function"!=typeof e.return&&(this.return=void 0)}function ef(e,t){this.v=e,this.k=t}function tf(e,t,r){return(zc=zc||qc(Hc().mark(function e(t,r,n){var o,i,a,s,u;return Hc().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Uint8Array,e.next=3,t(4,"feature length");case 3:if(e.t1=e.sent,0!==(o=new e.t0(e.t1)).byteLength){e.next=7;break}return e.abrupt("return");case 7:return i=new Il.cZ(o),a=i.readUint32(0),e.t2=Uint8Array,e.next=12,t(a,"feature data");case 12:return e.t3=e.sent,o=new e.t2(e.t3),(s=new Uint8Array(a+4)).set(o,4),(i=new Il.cZ(s)).setPosition(wc),u=Vl.getRootAsFeature(i),e.abrupt("return",n(u,r));case 20:case"end":return e.stop()}},e)}))).apply(this,arguments)}function rf(e,t){return{type:"FeatureCollection",features:function(e,t,r){if(!e.subarray(0,3).every(function(e,t){return bc[t]===e}))throw new Error("Not a FlatGeobuf file");var n=new Il.cZ(e),o=n.readUint32(bc.length);n.setPosition(bc.length+wc);var i=Ql(n);r&&r(i);var a=bc.length+wc+o,s=i.indexNodeSize,u=i.featuresCount;s>0&&(a+=yc(u,s));for(var l=[];a<n.capacity();){var c=n.readUint32(a);n.setPosition(a+wc);var f=Vl.getRootAsFeature(n);l.push(t(f,i)),a+=wc+c}return l}(e,Hl,t)}}function nf(e,t){return function(e,t,r){return(Fc=Fc||Qc(Hc().mark(function e(t,r,n){var o,i,a,s,u,l,c,f,h,p,d;return Hc().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=Xl(t),a=function(e){return(o=o||qc(Hc().mark(function e(t){return Hc().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.slice(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)},e.t0=Uint8Array,e.next=5,Kc(a(8,"magic bytes"));case 5:if(e.t1=e.sent,(s=new e.t0(e.t1)).subarray(0,3).every(function(e,t){return bc[t]===e})){e.next=9;break}throw new Error("Not a FlatGeobuf file");case 9:return e.t2=Uint8Array,e.next=12,Kc(a(4,"header length"));case 12:return e.t3=e.sent,s=new e.t2(e.t3),u=new Il.cZ(s),l=u.readUint32(0),e.t4=Uint8Array,e.next=19,Kc(a(l,"header data"));case 19:if(e.t5=e.sent,s=new e.t4(e.t5),u=new Il.cZ(s),c=Ql(u),n&&n(c),f=c.indexNodeSize,h=c.featuresCount,!(f>0)){e.next=29;break}return p=yc(h,f),e.next=29,Kc(a(p,"entire index, w/o rect"));case 29:return e.next=31,Kc(tf(a,c,r));case 31:if(!(d=e.sent)){e.next=36;break}return e.next=34,d;case 34:e.next=29;break;case 36:case"end":return e.stop()}},e)}))).apply(this,arguments)}(e,Hl,t)}function of(e,t,r){return function(e,t,r,n){return(Gc=Gc||Qc(Hc().mark(function e(t,r,n,o){var i,a,s,u,l,c,f;return Hc().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Kc(Uc.open(t));case 2:i=e.sent,ic.debug("opened reader"),o&&o(i.header),a=!1,s=!1,e.prev=7,l=Jc(i.selectBbox(r));case 9:return e.next=11,Kc(l.next());case 11:if(!(a=!(c=e.sent).done)){e.next=18;break}return f=c.value,e.next=15,n(f,i.header);case 15:a=!1,e.next=9;break;case 18:e.next=24;break;case 20:e.prev=20,e.t0=e.catch(7),s=!0,u=e.t0;case 24:if(e.prev=24,e.prev=25,!a||null==l.return){e.next=29;break}return e.next=29,Kc(l.return());case 29:if(e.prev=29,!s){e.next=32;break}throw u;case 32:return e.finish(29);case 33:return e.finish(24);case 34:case"end":return e.stop()}},e,null,[[7,20,24,34],[25,,29,33]])}))).apply(this,arguments)}(e,t,Hl,r)}function af(e,t,r){return e instanceof Uint8Array?rf(e,r):e instanceof ReadableStream?nf(e,r):of(e,t,r)}$c.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},$c.prototype.next=function(e){return this._invoke("next",e)},$c.prototype.throw=function(e){return this._invoke("throw",e)},$c.prototype.return=function(e){return this._invoke("return",e)};var sf=r(43861),uf=r.n(sf);function lf(e){"@babel/helpers - typeof";return(lf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function cf(){cf=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var o=t&&t.prototype instanceof f?t:f,i=Object.create(o.prototype),a=new S(n||[]);return i._invoke=function(e,t,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return P()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=w(a,r);if(s){if(s===c)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=l(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===c)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(e,r,a),i}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var c={};function f(){}function h(){}function p(){}var d={};s(d,o,function(){return this});var y=Object.getPrototypeOf,v=y&&y(y(O([])));v&&v!==t&&r.call(v,o)&&(d=v);var g=p.prototype=f.prototype=Object.create(d);function m(e){["next","throw","return"].forEach(function(t){s(e,t,function(e){return this._invoke(t,e)})})}function b(e,t){var n;this._invoke=function(o,i){function a(){return new t(function(n,a){!function n(o,i,a,s){var u=l(e[o],e,i);if("throw"!==u.type){var c=u.arg,f=c.value;return f&&"object"==lf(f)&&r.call(f,"__await")?t.resolve(f.__await).then(function(e){n("next",e,a,s)},function(e){n("throw",e,a,s)}):t.resolve(f).then(function(e){c.value=e,a(c)},function(e){return n("throw",e,a,s)})}s(u.arg)}(o,i,n,a)})}return n=n?n.then(a,a):a()}}function w(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return c;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}var n=l(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,c;var o=n.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,c):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,c)}function _(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(_,this),this.reset(!0)}function O(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:P}}function P(){return{value:void 0,done:!0}}return h.prototype=p,s(g,"constructor",p),s(p,"constructor",h),h.displayName=s(p,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,s(e,a,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},m(b.prototype),s(b.prototype,i,function(){return this}),e.AsyncIterator=b,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(e){return e.done?e.value:a.next()})},m(g),s(g,a,"Generator"),s(g,o,function(){return this}),s(g,"toString",function(){return"[object Generator]"}),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=O,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,c):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),c},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),x(r),c}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:O(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),c}},e}function ff(e,t,r,n,o,i,a){try{var s=e[i](a),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function hf(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function a(e){ff(i,n,o,a,s,"next",e)}function s(e){ff(i,n,o,a,s,"throw",e)}a(void 0)})}}function pf(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function df(e){var t,r,n,o=2;for("undefined"!=typeof Symbol&&(r=Symbol.asyncIterator,n=Symbol.iterator);o--;){if(r&&null!=(t=e[r]))return t.call(e);if(n&&null!=(t=e[n]))return new yf(t.call(e));r="@@asyncIterator",n="@@iterator"}throw new TypeError("Object is not async iterable")}function yf(e){function t(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then(function(e){return{value:e,done:t}})}return(yf=function(e){this.s=e,this.n=e.next}).prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var r=this.s.return;return void 0===r?Promise.resolve({value:e,done:!0}):t(r.apply(this.s,arguments))},throw:function(e){var r=this.s.return;return void 0===r?Promise.reject(e):t(r.apply(this.s,arguments))}},new yf(e)}var vf={1:"circle",2:"line",3:"fill",5:"line",4:"circle",6:"fill",MultiPolygon:"fill",Point:"circle",MultiLineString:"line",MultiPoint:"circle",LineString:"line",Polygon:"fill"},gf=function(){var e,t,r,n,o,i;function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),this.id=e.layerID?e.layerID:j.createUniqueID("FGBLayer_"),this.layerId=this.id+"outer",this.sourceId=this.layerId,this.options=e,this.strategy=e.strategy||"bbox",this.url=e.url,this.layerType="",this.extent=e.extent,this.init()}return n=a,(o=[{key:"init",value:function(){"bbox"===this.strategy&&(this.loadedExtentsRtree_=new(uf()))}},{key:"iterateFeatures",value:function(t){return(e=e||hf(cf().mark(function e(t){var r,n,o,i,a,s,u;return cf().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r={type:"FeatureCollection",features:[]},n=!1,o=!1,e.prev=3,a=df(t);case 5:return e.next=7,a.next();case 7:if(!(n=!(s=e.sent).done)){e.next=15;break}u=s.value,this.options.featureLoader&&"function"==typeof this.options.featureLoader&&(u=this.options.featureLoader(u)),this.layerType||(this.layerType=vf[u.geometry.type]),r.features.push(u);case 12:n=!1,e.next=5;break;case 15:e.next=21;break;case 17:e.prev=17,e.t0=e.catch(3),o=!0,i=e.t0;case 21:if(e.prev=21,e.prev=22,!n||null==a.return){e.next=26;break}return e.next=26,a.return();case 26:if(e.prev=26,!o){e.next=29;break}throw i;case 29:return e.finish(26);case 30:return e.finish(21);case 31:return e.abrupt("return",r);case 32:case"end":return e.stop()}},e,this,[[3,17,21,31],[22,,26,30]])}))).apply(this,arguments)}},{key:"_loadData",value:function(e){return(t=t||hf(cf().mark(function e(t){var r,n,o=this;return cf().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]},t.length){e.next=7;break}return e.next=4,this._getStream(this.url);case 4:r=e.sent,e.next=9;break;case 7:n.value={extent:t.slice()},this.loadedExtentsRtree_.insert(n);case 9:return e.next=11,af(r&&r.body||this.url,n,function(e){o.layerType=vf[e.geometryType]});case 11:return e.abrupt("return",e.sent);case 12:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}},{key:"_getStream",value:function(e){return(r=r||hf(cf().mark(function e(t){return cf().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Al.get(t,{},{withoutFormatSuffix:!0}).then(function(e){return e});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}},{key:"_containsExtent",value:function(e,t){return e[0]<=t[0]&&t[2]<=e[2]&&e[1]<=t[1]&&t[3]<=e[3]}},{key:"_getInExtent",value:function(e){var t={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]};return this.loadedExtentsRtree_.search(t).map(function(e){return e.value})}},{key:"_forEachInExtent",value:function(e,t){return this._forEach(this._getInExtent(e),t)}},{key:"_forEach",value:function(e,t){for(var r,n=0,o=e.length;n<o;n++)if(r=t(e[n]))return r;return r}}])&&pf(n.prototype,o),i&&pf(n,i),Object.defineProperty(n,"prototype",{writable:!1}),a}();function mf(e){"@babel/helpers - typeof";return(mf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function bf(){bf=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var o=t&&t.prototype instanceof f?t:f,i=Object.create(o.prototype),a=new S(n||[]);return i._invoke=function(e,t,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return P()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=w(a,r);if(s){if(s===c)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=l(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===c)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(e,r,a),i}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var c={};function f(){}function h(){}function p(){}var d={};s(d,o,function(){return this});var y=Object.getPrototypeOf,v=y&&y(y(O([])));v&&v!==t&&r.call(v,o)&&(d=v);var g=p.prototype=f.prototype=Object.create(d);function m(e){["next","throw","return"].forEach(function(t){s(e,t,function(e){return this._invoke(t,e)})})}function b(e,t){var n;this._invoke=function(o,i){function a(){return new t(function(n,a){!function n(o,i,a,s){var u=l(e[o],e,i);if("throw"!==u.type){var c=u.arg,f=c.value;return f&&"object"==mf(f)&&r.call(f,"__await")?t.resolve(f.__await).then(function(e){n("next",e,a,s)},function(e){n("throw",e,a,s)}):t.resolve(f).then(function(e){c.value=e,a(c)},function(e){return n("throw",e,a,s)})}s(u.arg)}(o,i,n,a)})}return n=n?n.then(a,a):a()}}function w(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return c;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}var n=l(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,c;var o=n.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,c):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,c)}function _(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(_,this),this.reset(!0)}function O(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:P}}function P(){return{value:void 0,done:!0}}return h.prototype=p,s(g,"constructor",p),s(p,"constructor",h),h.displayName=s(p,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,s(e,a,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},m(b.prototype),s(b.prototype,i,function(){return this}),e.AsyncIterator=b,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(e){return e.done?e.value:a.next()})},m(g),s(g,a,"Generator"),s(g,o,function(){return this}),s(g,"toString",function(){return"[object Generator]"}),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=O,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,c):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),c},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),x(r),c}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:O(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),c}},e}function wf(e,t,r,n,o,i,a){try{var s=e[i](a),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function _f(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function a(e){wf(i,n,o,a,s,"next",e)}function s(e){wf(i,n,o,a,s,"throw",e)}a(void 0)})}}function xf(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Sf={circle:{"circle-radius":6,"circle-color":"#3fb1e3","circle-opacity":1,"circle-blur":0,"circle-translate":[0,0],"circle-stroke-width":0,"circle-stroke-color":"#000","circle-stroke-opacity":1},line:{"line-opacity":1,"line-color":"#3fb1e3","line-width":3,"line-blur":1},fill:{"fill-opacity":.8,"fill-color":"#3fb1e3","fill-translate":[0,0],"fill-antialias":!0,"fill-outline-color":"#3fb1e3"}},Of=function(){var e,t,r,n,o;function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),this.id=e.layerID?e.layerID:j.createUniqueID("FGBLayer_"),this.layerId=this.id+"outer",this.sourceId=this.layerId,this.options=e,this.strategy=e.strategy||"bbox",this.url=e.url,this.layerType="",this.extent=e.extent,this.overlay=!0,this.type="custom",this.renderingMode="3d",this._updateFeaturesFn=this._updateFeatures.bind(this)}return r=i,(n=[{key:"onAdd",value:function(e){this.map=e;var t,r,n,o=[];if("bbox"===this.strategy){var i=this.map.getBounds().toArray();o=[i[0][0],i[0][1],i[1][0],i[1][1]],this.map.on("moveend",this._updateFeaturesFn)}if(this.extent){var a=(t=this.extent,n=[],function(e,t){return e[0]<=t[2]&&e[2]>=t[0]&&e[1]<=t[3]&&e[3]>=t[1]}(t,r=o)&&(t[0]>r[0]?n[0]=t[0]:n[0]=r[0],t[1]>r[1]?n[1]=t[1]:n[1]=r[1],t[2]<r[2]?n[2]=t[2]:n[2]=r[2],t[3]<r[3]?n[3]=t[3]:n[3]=r[3]),n);o=a&&a.length?a:this.extent}this.renderer=new gf(this.options),this._handleFeatures(o)}},{key:"onRemove",value:function(){this.map.off("moveend",this._updateFeaturesFn)}},{key:"moveLayer",value:function(e){this.map.moveLayer(this.layerId,e)}},{key:"render",value:function(){}},{key:"setVisibility",value:function(e){var t=e?"visible":"none";this.map.setLayoutProperty(this.layerId,"visibility",t)}},{key:"_handleFeatures",value:function(t){return(e=e||_f(bf().mark(function e(t){var r,n,o;return bf().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.renderer._loadData(t);case 2:return r=e.sent,e.next=5,this.renderer.iterateFeatures(r);case 5:n=e.sent,this.map.getSource(this.sourceId)?this.map.getSource(this.sourceId).setData(n):this.map.addSource(this.sourceId,{type:"geojson",data:n}),this.map.getLayer(this.layerId)||(this.layerType=this.renderer.layerType,o=Object.assign({id:this.layerId,type:this.layerType,source:this.sourceId,paint:Object.assign(Sf[this.layerType],this.options.paint)||{},layout:this.options.layout||{}}),this.map.addLayer(o));case 8:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}},{key:"_updateFeatures",value:function(){return(t=t||_f(bf().mark(function e(){var t,r,n,o,i=this;return bf().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.map.getBounds().toArray(),r=[t[0][0],t[0][1],t[1][0],t[1][1]],this.renderer._forEachInExtent(r,function(e){return i.renderer._containsExtent(e.extent,r)})){e.next=11;break}return e.next=6,this.renderer._loadData(r);case 6:return n=e.sent,e.next=9,this.renderer.iterateFeatures(n);case 9:o=e.sent,this.map.getSource(this.sourceId).setData(o);case 11:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}}])&&xf(r.prototype,n),o&&xf(r,o),Object.defineProperty(r,"prototype",{writable:!1}),i}();function Pf(e){"@babel/helpers - typeof";return(Pf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ef(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function kf(e,t){return(kf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Mf(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=jf(e);if(t){var o=jf(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===Pf(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Cf(e)}(this,r)}}function Cf(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function jf(e){return(jf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Tf=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&kf(e,t)}(a,o().Evented);var t,r,n,i=Mf(a);function a(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(r=i.call(this)).options=t||{},r.url=e,r.fire("initialized",Cf(r)),r}return t=a,r&&Ef(t.prototype,r),n&&Ef(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}();function Af(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var If=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,n;return t=e,n=[{key:"generateToken",value:function(e,t){var r=this.servers[e];if(r)return Al.post(r.tokenServiceUrl,JSON.stringify(t.toJSON())).then(function(e){return e.text()})}},{key:"registerServers",value:function(e){this.servers=this.servers||{},j.isArray(e)||(e=[e]);for(var t=0;t<e.length;t++){var r=e[t];this.servers[r.server]=r}}},{key:"registerToken",value:function(e,t){if(this.tokens=this.tokens||{},e&&t){var r=this._getTokenStorageKey(e);this.tokens[r]=t}}},{key:"registerKey",value:function(e,t){if(this.keys=this.keys||{},e&&!(e.length<1)&&t){e=j.isArray(e)?e:[e];for(var r=0;r<e.length;r++){var n=this._getUrlRestString(e[0])||e[0];this.keys[n]=t}}}},{key:"getServerInfo",value:function(e){return this.servers=this.servers||{},this.servers[e]}},{key:"getToken",value:function(e){if(e){this.tokens=this.tokens||{};var t=this._getTokenStorageKey(e);return this.tokens[t]}}},{key:"getKey",value:function(e){this.keys=this.keys||{};var t=this._getUrlRestString(e)||e;return this.keys[t]}},{key:"loginiServer",value:function(e,t,r,n){e=j.urlPathAppend(e,"services/security/login");var o={username:t&&t.toString(),password:r&&r.toString(),rememberme:n};o=JSON.stringify(o);return Al.post(e,o,{headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}}).then(function(e){return e.json()})}},{key:"logoutiServer",value:function(e){e=j.urlPathAppend(e,"services/security/logout");return Al.get(e,"",{headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},withoutFormatSuffix:!0}).then(function(){return!0}).catch(function(){return!1})}},{key:"loginOnline",value:function(t,r){var n=e.SSO+"/login?service="+t;this._open(n,r)}},{key:"loginiPortal",value:function(e,t,r){e=j.urlPathAppend(e,"web/login");var n={username:t&&t.toString(),password:r&&r.toString()};n=JSON.stringify(n);return Al.post(e,n,{headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},withCredentials:!0}).then(function(e){return e.json()})}},{key:"logoutiPortal",value:function(e){e=j.urlPathAppend(e,"services/security/logout");return Al.get(e,"",{headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},withCredentials:!0,withoutFormatSuffix:!0}).then(function(){return!0}).catch(function(){return!1})}},{key:"loginManager",value:function(e,t,r){if(j.isInTheSameDomain(e)){var n=j.urlPathAppend(e,"icloud/security/tokens"),o=t||{},i={username:o.userName&&o.userName.toString(),password:o.password&&o.password.toString()};i=JSON.stringify(i);var a=this;return Al.post(n,i,{headers:{Accept:"*/*","Content-Type":"application/json"}}).then(function(e){e.text().then(function(e){return a.imanagerToken=e,e})})}var s=!r||r.isNewTab;this._open(e,s)}},{key:"destroyAllCredentials",value:function(){this.keys=null,this.tokens=null,this.servers=null}},{key:"destroyToken",value:function(e){if(e){var t=this._getTokenStorageKey(e);this.tokens=this.tokens||{},this.tokens[t]&&delete this.tokens[t]}}},{key:"destroyKey",value:function(e){if(e){this.keys=this.keys||{};var t=this._getUrlRestString(e)||e;this.keys[t]&&delete this.keys[t]}}},{key:"appendCredential",value:function(e){var t=e,r=this.getToken(e),n=r?new An(r,"token"):null;return n||(n=(r=this.getKey(e))?new An(r,"key"):null),n&&(t=j.urlAppend(t,n.getUrlParameters())),t}},{key:"_open",value:function(e,t){t=null==t||t;var r=window.screen.availWidth/2-this.INNER_WINDOW_WIDTH/2,n=window.screen.availHeight/2-this.INNER_WINDOW_HEIGHT/2,o="height="+this.INNER_WINDOW_HEIGHT+", width="+this.INNER_WINDOW_WIDTH+",top="+n+", left="+r+",toolbar=no, menubar=no, scrollbars=no, resizable=no, location=no, status=no";t?window.open(e,"login"):window.open(e,"login",o)}},{key:"_getTokenStorageKey",value:function(e){var t=e.match(/(.*?):\/\/([^\/]+)/i);return t?t[0]:e}},{key:"_getUrlRestString",value:function(e){if(!e)return e;var t=e.match(/(http|https):\/\/(.*\/rest)/i);return t?t[0]:e}}],(r=null)&&Af(t.prototype,r),n&&Af(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Rf(e){"@babel/helpers - typeof";return(Rf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Lf(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}If.INNER_WINDOW_WIDTH=600,If.INNER_WINDOW_HEIGHT=600,If.SSO="https://sso.supermap.com",If.ONLINE="https://www.supermapol.com";var Nf=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var n=this;this.EVENT_TYPES=["processCompleted","processFailed"],this.events=null,this.eventListeners=null,this.url=null,this.urls=null,this.proxy=null,this.index=null,this.length=null,this.totalTimes=null,this.POLLING_TIMES=3,this.isInTheSameDomain=null,this.withCredentials=!1,j.isArray(t)?(n.urls=t,n.length=t.length,n.totalTimes=n.length,1===n.length?n.url=t[0]:(n.index=parseInt(Math.random()*n.length),n.url=t[n.index])):(n.totalTimes=1,n.url=t),j.isArray(t)&&!n.isServiceSupportPolling()&&(n.url=t[0],n.totalTimes=1),r=r||{},this.crossOrigin=r.crossOrigin,this.headers=r.headers,j.extend(this,r),n.isInTheSameDomain=j.isInTheSameDomain(n.url),n.events=new Dn(n,null,n.EVENT_TYPES,!0),n.eventListeners instanceof Object&&n.events.on(n.eventListeners),this.CLASS_NAME="SuperMap.CommonServiceBase"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){var e=this;j.isArray(e.urls)&&(e.urls=null,e.index=null,e.length=null,e.totalTimes=null),e.url=null,e._processSuccess=null,e._processFailed=null,e.isInTheSameDomain=null,e.EVENT_TYPES=null,e.events&&(e.events.destroy(),e.events=null),e.eventListeners&&(e.eventListeners=null)}},{key:"request",value:function(e){var t=e.scope.format;if(t&&!this.supportDataFormat(t))throw new Error("".concat(this.CLASS_NAME," is not surport ").concat(t," format!"));var r=this;e.url=e.url||r.url,this._returnContent(e)&&!e.url.includes("returnContent=true")&&(e.url=j.urlAppend(e.url,"returnContent=true")),e.proxy=e.proxy||r.proxy,e.withCredentials=void 0!=e.withCredentials?e.withCredentials:r.withCredentials,e.crossOrigin=void 0!=e.crossOrigin?e.crossOrigin:r.crossOrigin,e.headers=e.headers||r.headers,e.isInTheSameDomain=r.isInTheSameDomain,e.withoutFormatSuffix=e.scope.withoutFormatSuffix||!1,e.url=If.appendCredential(e.url),r.calculatePollingTimes(),e.scope=r;var n=e.scope?e.success.bind(e.scope):e.success,o=e.scope?e.failure.bind(e.scope):e.failure;e.success=r.getUrlCompleted(n,e),e.failure=r.getUrlFailed(o,e),r._commit(e)}},{key:"getUrlCompleted",value:function(e,t){return function(r){e&&e(r,t)}}},{key:"getUrlFailed",value:function(e,t){var r=this;return function(n){r.totalTimes>0?(r.totalTimes--,r.ajaxPolling(t)):e&&e(n,t)}}},{key:"ajaxPolling",value:function(e){var t=this,r=e.url,n=/^http:\/\/([a-z]{9}|(\d+\.){3}\d+):\d{0,4}/;t.index=parseInt(Math.random()*t.length),t.url=t.urls[t.index],r=r.replace(n,n.exec(t.url)[0]),e.url=r,e.isInTheSameDomain=j.isInTheSameDomain(r),t._commit(e)}},{key:"calculatePollingTimes",value:function(){var e=this;e.times?e.totalTimes>e.POLLING_TIMES?e.times>e.POLLING_TIMES?e.totalTimes=e.POLLING_TIMES:e.totalTimes=e.times:e.times<e.totalTimes&&(e.totalTimes=e.times):e.totalTimes>e.POLLING_TIMES&&(e.totalTimes=e.POLLING_TIMES),e.totalTimes--}},{key:"isServiceSupportPolling",value:function(){return!("SuperMap.REST.ThemeService"===this.CLASS_NAME||"SuperMap.REST.EditFeaturesService"===this.CLASS_NAME)}},{key:"serviceProcessCompleted",value:function(e,t){e=j.transformResult(e),this.events.triggerEvent("processCompleted",{result:e,options:t})}},{key:"serviceProcessFailed",value:function(e,t){var r=(e=j.transformResult(e)).error||e;this.events.triggerEvent("processFailed",{error:r,options:t})}},{key:"_returnContent",value:function(e){return e.scope.format!==Et.FGB&&!!e.scope.returnContent}},{key:"supportDataFormat",value:function(e){return this.dataFormat().includes(e)}},{key:"dataFormat",value:function(){return[Et.GEOJSON,Et.ISERVER]}},{key:"_commit",value:function(e){if("POST"===e.method||"PUT"===e.method||"PATCH"===e.method)if(e.params&&(e.url=j.urlAppend(e.url,j.getParameterString(e.params||{}))),"object"===Rf(e.data))try{e.params=j.toJSON(e.data)}catch(e){console.log("ä¸æ¯jsonå¯¹è±¡")}else e.params=e.data;Al.commit(e.method,e.url,e.params,{headers:e.headers,withoutFormatSuffix:e.withoutFormatSuffix,withCredentials:e.withCredentials,crossOrigin:e.crossOrigin,timeout:e.async?0:null,proxy:e.proxy}).then(function(e){return e.text?e.text():e.json?e.json():e}).then(function(t){var r=t;return"string"==typeof t&&(r=(new Je).read(t)),(!r||r.error||r.code>=300&&304!==r.code)&&(r=r&&r.error?{error:r.error}:{error:r}),r&&e.scope.format===Et.FGB&&(r.newResourceLocation=r.newResourceLocation.replace(".json","")+".fgb"),r}).catch(function(e){return{error:e}}).then(function(t){t.error?(e.scope?y.bind(e.failure,e.scope):e.failure)(t):(t.succeed=void 0==t.succeed||t.succeed,(e.scope?y.bind(e.success,e.scope):e.success)(t))})}}])&&Lf(t.prototype,r),n&&Lf(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Df(e){"@babel/helpers - typeof";return(Df="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Bf(){Bf=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var o=t&&t.prototype instanceof f?t:f,i=Object.create(o.prototype),a=new S(n||[]);return i._invoke=function(e,t,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return P()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=w(a,r);if(s){if(s===c)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=l(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===c)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(e,r,a),i}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var c={};function f(){}function h(){}function p(){}var d={};s(d,o,function(){return this});var y=Object.getPrototypeOf,v=y&&y(y(O([])));v&&v!==t&&r.call(v,o)&&(d=v);var g=p.prototype=f.prototype=Object.create(d);function m(e){["next","throw","return"].forEach(function(t){s(e,t,function(e){return this._invoke(t,e)})})}function b(e,t){var n;this._invoke=function(o,i){function a(){return new t(function(n,a){!function n(o,i,a,s){var u=l(e[o],e,i);if("throw"!==u.type){var c=u.arg,f=c.value;return f&&"object"==Df(f)&&r.call(f,"__await")?t.resolve(f.__await).then(function(e){n("next",e,a,s)},function(e){n("throw",e,a,s)}):t.resolve(f).then(function(e){c.value=e,a(c)},function(e){return n("throw",e,a,s)})}s(u.arg)}(o,i,n,a)})}return n=n?n.then(a,a):a()}}function w(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return c;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}var n=l(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,c;var o=n.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,c):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,c)}function _(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(_,this),this.reset(!0)}function O(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:P}}function P(){return{value:void 0,done:!0}}return h.prototype=p,s(g,"constructor",p),s(p,"constructor",h),h.displayName=s(p,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,s(e,a,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},m(b.prototype),s(b.prototype,i,function(){return this}),e.AsyncIterator=b,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(e){return e.done?e.value:a.next()})},m(g),s(g,a,"Generator"),s(g,o,function(){return this}),s(g,"toString",function(){return"[object Generator]"}),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=O,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,c):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),c},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),x(r),c}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:O(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),c}},e}function Ff(e){return function(e){if(Array.isArray(e))return Gf(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Gf(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Gf(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Gf(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function zf(e,t,r,n,o,i,a){try{var s=e[i](a),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function Uf(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Vf(){return(Vf="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Hf(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function Wf(e,t){return(Wf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Yf(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Hf(e);if(t){var o=Hf(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===Df(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function Hf(e){return(Hf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Xf=function(e){var t;!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Wf(e,t)}(a,Nf);var r,n,o,i=Yf(a);function a(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(r=i.call(this,e,t)).options=t||{},r.eventCount=0,r.CLASS_NAME="SuperMap.KnowledgeGraphService",r}return r=a,(n=[{key:"destroy",value:function(){Vf(Hf(a.prototype),"destroy",this).call(this)}},{key:"query",value:function(e,t){var r=j.urlAppend(this.url+"/query.json","".concat("cypherQuery","=").concat(encodeURI(e)));this.processAsync({url:r,method:"GET",callback:t})}},{key:"getGraphMaps",value:function(e){var t=this.url+"/graphmaps.json";this.processAsync({url:t,method:"GET",callback:e})}},{key:"getGraphMap",value:function(e,t){var r=this.url+"/graphmaps/".concat(e,".json");this.processAsync({url:r,method:"GET",callback:t})}},{key:"getGraphMapData",value:function(e){return(t=t||(r=Bf().mark(function e(t){var r,n,o,i,a,s,u,l,c;return Bf().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=[],e.next=3,this._getGraphMapData(t);case 3:if(n=e.sent){e.next=6;break}return e.abrupt("return");case 6:o=n.dataContent.queries&&n.dataContent.queries.query||[],i=[],i="string"==typeof o?[o]:o,(a=this._getGraphMapExpandQuery(n)).length&&(s=i).push.apply(s,Ff(a)),u=0;case 12:if(!(u<i.length)){e.next=21;break}return l=i[u],e.next=16,this._queryDataBySql(l);case 16:c=e.sent,r=r.concat([],c);case 18:u++,e.next=12;break;case 21:return e.abrupt("return",{data:r,graphMap:n});case 22:case"end":return e.stop()}},e,this)}),function(){var e=this,t=arguments;return new Promise(function(n,o){var i=r.apply(e,t);function a(e){zf(i,n,o,a,s,"next",e)}function s(e){zf(i,n,o,a,s,"throw",e)}a(void 0)})})).apply(this,arguments);var r}},{key:"_getGraphMapExpandQuery",value:function(e){var t=[];return(e.dataContent.expand&&JSON.parse(e.dataContent.expand)||[]).forEach(function(e){t.push("match p=(n)-[]-(m) where id(n)=".concat(e," return p;"))}),t}},{key:"processAsync",value:function(e){var t=e.url,r=e.params,n=e.method,o=e.callback,i=++this.eventCount,a={scope:this,processCompleted:function(e){if(i===e.result.eventId&&o)return delete e.result.eventId,o(e),this.events&&this.events.un(a),!1},processFailed:function(e){if((i===e.error.eventId||i===e.eventId)&&o)return delete e.eventId,o(e),this.events&&this.events.un(a),!1}};this.events.on(a);var s={method:n,url:t,scope:this,success:function(e,t){e.eventId=i,this.serviceProcessCompleted(e,t)},failure:function(e,t){e.eventId=i,this.serviceProcessFailed(e,t)}};r&&(s.params=r),this.request(s)}},{key:"_getGraphMapData",value:function(e){var t=this;return new Promise(function(r,n){t.getGraphMap(e,function(e){"processFailed"===e.type?n(e.error):""===e.result.data?n("æ æ°æ®"):r(e.result.graphMap)})})}},{key:"_queryDataBySql",value:function(e){var t=this;return new Promise(function(r,n){t.query(e,function(e){"processFailed"===e.type?n(e.error):r(e.result)})})}}])&&Uf(r.prototype,n),o&&Uf(r,o),Object.defineProperty(r,"prototype",{writable:!1}),a}();function qf(e){"@babel/helpers - typeof";return(qf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Jf(){Jf=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var o=t&&t.prototype instanceof f?t:f,i=Object.create(o.prototype),a=new S(n||[]);return i._invoke=function(e,t,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return P()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=w(a,r);if(s){if(s===c)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=l(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===c)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(e,r,a),i}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var c={};function f(){}function h(){}function p(){}var d={};s(d,o,function(){return this});var y=Object.getPrototypeOf,v=y&&y(y(O([])));v&&v!==t&&r.call(v,o)&&(d=v);var g=p.prototype=f.prototype=Object.create(d);function m(e){["next","throw","return"].forEach(function(t){s(e,t,function(e){return this._invoke(t,e)})})}function b(e,t){var n;this._invoke=function(o,i){function a(){return new t(function(n,a){!function n(o,i,a,s){var u=l(e[o],e,i);if("throw"!==u.type){var c=u.arg,f=c.value;return f&&"object"==qf(f)&&r.call(f,"__await")?t.resolve(f.__await).then(function(e){n("next",e,a,s)},function(e){n("throw",e,a,s)}):t.resolve(f).then(function(e){c.value=e,a(c)},function(e){return n("throw",e,a,s)})}s(u.arg)}(o,i,n,a)})}return n=n?n.then(a,a):a()}}function w(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return c;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}var n=l(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,c;var o=n.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,c):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,c)}function _(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(_,this),this.reset(!0)}function O(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:P}}function P(){return{value:void 0,done:!0}}return h.prototype=p,s(g,"constructor",p),s(p,"constructor",h),h.displayName=s(p,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,s(e,a,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},m(b.prototype),s(b.prototype,i,function(){return this}),e.AsyncIterator=b,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(e){return e.done?e.value:a.next()})},m(g),s(g,a,"Generator"),s(g,o,function(){return this}),s(g,"toString",function(){return"[object Generator]"}),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=O,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,c):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),c},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),x(r),c}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:O(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),c}},e}function Zf(e,t,r,n,o,i,a){try{var s=e[i](a),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function Kf(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Qf(e,t){return(Qf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function $f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=eh(e);if(t){var o=eh(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===qf(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function eh(e){return(eh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var th=function(e){var t;!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Qf(e,t)}(a,Tf);var r,n,o,i=$f(a);function a(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(r=i.call(this,e,t))._knowledgeGraphService=new Xf(e,t),r}return r=a,(n=[{key:"query",value:function(e,t){this._knowledgeGraphService.query(e,t)}},{key:"getGraphMaps",value:function(e){this._knowledgeGraphService.getGraphMaps(e)}},{key:"getGraphMap",value:function(e,t){this._knowledgeGraphService.getGraphMap(e,t)}},{key:"getGraphMapData",value:function(e){return(t=t||(r=Jf().mark(function e(t){var r;return Jf().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._knowledgeGraphService.getGraphMapData(t);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}},e,this)}),function(){var e=this,t=arguments;return new Promise(function(n,o){var i=r.apply(e,t);function a(e){Zf(i,n,o,a,s,"next",e)}function s(e){Zf(i,n,o,a,s,"throw",e)}a(void 0)})})).apply(this,arguments);var r}}])&&Kf(r.prototype,n),o&&Kf(r,o),Object.defineProperty(r,"prototype",{writable:!1}),a}(),rh=r(29819),nh=r.n(rh);function oh(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function ih(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?oh(Object(r),!0).forEach(function(t){ah(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oh(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function ah(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function sh(e){return function(e){if(Array.isArray(e))return uh(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return uh(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return uh(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function uh(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function lh(e,t){var r=t&&t.styles&&t.styles.style,n=t&&t.captionFields&&t.captionFields.captionField,o={nodes:[],edges:[]};return e.forEach(function(e){var t=e.path;if(t){var i,a,s=function(e,t,r){var n={nodes:[],edges:[]};return e.forEach(function(e){if(fh(e)){var o=ph(e,t);n.edges.push(o)}else{var i=hh(e,t,r);n.nodes.push(i)}}),n}(t,r,n),u=s.nodes,l=s.edges;(i=o.nodes).push.apply(i,sh(u)),(a=o.edges).push.apply(a,sh(l))}else if(fh(e)){var c=ph(e,r);o.edges.push(c)}else{var f=hh(e,r,n);o.nodes.push(f)}}),{nodes:ch(o.nodes),edges:ch(o.edges,"edgeId")}}function ch(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"id";return nh()(e,t)}function fh(e){return e.hasOwnProperty("start")&&e.hasOwnProperty("end")}function hh(e,t,r){var n=e.id,o=e.properties,i=e.lables,a=t?function(e,t){if(!t)return{};for(var r=e.id,n=e.labels,o=t.filter(function(e){return"entity"===e.type}),i=0;i<o.length;i++){var a=o[i],s=a.color,u=a.textColor,l=a.font,c=a.size,f=a.entityTypes,h=a.entityIds,p=JSON.parse(h||"[]"),d=JSON.parse(f||"[]");if(p.includes(r)||d.includes(n[0]))return ih(ih({fillColor:s,fontSize:l.fontSize,fill:u,size:c},yh(l.fontName)),dh(l.fontStyle))}return{}}(e,t):{},s=function(e,t){var r=e.id,n=e.labels,o=e.properties;if(t)for(var i=t instanceof Array?t:[t],a=0;a<i.length;a++){var s=i[a],u=s.name,l=s.entityTypes,c=s.entityIds,f=JSON.parse(c||"[]"),h=JSON.parse(l||"[]");if(f.includes(r)||h.includes(n[0]))return o[u]||""}return o[o._labelfieldname]||""}(e,r),u=a.fillColor||"",l={id:n+"",label:s,properties:o,lables:i};return a.size&&(l.size=a.size,delete a.size),a.fillColor&&(l.style={fill:u,stroke:u},delete a.fillColor),0!==Object.keys(a).length&&(l.labelCfg={style:a}),l}function ph(e,t){var r=e.start,n=e.end,o=e.id,i=e.type,a=e.properties,s=t?function(e,t){if(!t)return{};for(var r=e.id,n=e.type,o=t.filter(function(e){return"relationShip"===e.type}),i=0;i<o.length;i++){var a=o[i],s=a.color,u=a.width,l=a.textColor,c=a.font,f=a.relationTypes,h=a.relationIds,p=JSON.parse(h||"[]"),d=JSON.parse(f||"[]");if(p.includes(r)||d.includes(n))return ih(ih({stroke:s,lineWidth:1.4*Number(u),fontSize:c.fontSize,fill:l},yh(c.fontName)),dh(c.fontStyle))}return{}}(e,t):{},u={source:r+"",target:n+"",edgeId:o+"",label:i,style:{},labelCfg:{},properties:a};return s.stroke&&(u.style.stroke=s.stroke,u.style.endArrow={path:"M 0,0 L 4,2 L 4,-2 Z",fill:s.stroke},delete s.stroke),s.lineWidth&&(u.style.lineWidth=s.lineWidth,delete s.lineWidth),u.labelCfg={style:s},u}function dh(e){return 1===e||"bold"===e?{fontWeight:"bold"}:2===e||"italic"===e?{fontStyle:"italic"}:"bolditalic"===e?{fontWeight:"bold",fontStyle:"italic"}:{}}function yh(e){if(!e)return{};var t=e.split(".");return ih({fontFamily:t[0]},dh(t[1]))}var vh=r(27996),gh=r.n(vh),mh=r(28813),bh=r.n(mh);function wh(e){return function(e){if(Array.isArray(e))return _h(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return _h(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _h(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _h(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function xh(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Sh(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?xh(Object(r),!0).forEach(function(t){Oh(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xh(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Oh(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ph(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Eh=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.config=null,this.graph=null,this.data=null,this.collpasedData={},this.importG6(),this.CLASS_NAME="SuperMap.G6Render"}var t,r,n;return t=e,(r=[{key:"importG6",value:function(){gh()||console.log("please import g6, egï¼https://gw.alipayobjects.com/os/lib/antv/g6/4.3.2/dist/g6.min.js")}},{key:"initGraph",value:function(e){var t=new(gh().Graph)(e);return this.graph=t,e&&!1===e.highlightNode||this.highlightNode(t),e&&!1===e.highlightEdge||this.highlightEdge(t),!1===e.dragCanvas&&!1===e.dragNode||this.stopDefaultEventPropagation(),t}},{key:"_getContextMenu",value:function(){var e=this;return new(gh().Menu)({shouldBegin:function(e){return!!(e.target&&e.target.isCanvas&&e.target.isCanvas())||!!e.item},getContent:function(t){var r=t.item;if(!(t.target&&t.target.isCanvas&&t.target.isCanvas())&&r){var n=r.getType(),o=r.getModel();return n&&o&&"node"===n?e.isCollpased(o.id)?"<ul>\n              <li id='expand'>å±å¼</li>\n            </ul>":"<ul>\n              <li id='collapse'>æå </li>\n            </ul>":void 0}},handleMenuClick:function(t,r){switch(t.id.split("-")[0]){case"hide":e.hideItem(r);break;case"expand":e.expandNode(r);break;case"collapse":e.collapseNode(r);break;case"show":e.showItem(r)}},offsetX:26,offsetY:0,itemTypes:["node","edge","canvas"]})}},{key:"_getGraphConfig",value:function(e){var t=this,r={speed:120,maxIteration:83,tick:function(){t.refreshPositions()}},n={type:"fruchterman",gravity:5},o={},i={type:"line",style:{endArrow:{path:"M 0,0 L 4,2 L 4,-2 Z",fill:"#e0e0e0"},lineWidth:.5},labelCfg:{autoRotate:!0,style:{fontSize:4,fill:"#333"}}},a={default:["drag-canvas","zoom-canvas","drag-node"]},s=this._getContextMenu(),u=[new(gh().ToolBar),s],l={lineWidth:3,stroke:"#b4d6ff"},c={stroke:"#b4d6ff",shadowColor:"#b4d6ff",shadowBlur:5,endArrow:{path:"M 0,0 L 4,2 L 4,-2 Z",fill:"#b4d6ff"}};if(!e)return this._setToolBarStyle(),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"knowledgeGraph",t=document.querySelector("#".concat(e));return{container:e,width:t.scrollWidth,height:t.scrollHeight,plugins:u,modes:a,layout:Sh(Sh({},n),r),defaultNode:o,defaultEdge:i,nodeStateStyles:{hover:l},edgeStateStyles:{hover:c}}}();e.container=e.container||"knowledgeGraph";var f="string"==typeof e.container?document.querySelector("#".concat(e.container)):e.container;return e.width=e.width||f.scrollWidth,e.height=e.height||f.scrollHeight,e.layout=Sh(Sh(Sh({},n),e.layout||{}),!1!==e.animate?r:{}),e.defaultNode=Sh(Sh({},o),e.defaultNode||{}),e.defaultEdge=Sh(Sh({},i),e.defaultEdge||{}),e.modes={default:[!1!==e.dragCanvas&&"drag-canvas",!1!==e.zoomCanvas&&"zoom-canvas",!1!==e.dragNode&&"drag-node"]},e.nodeStateStyles={hover:Sh(Sh({},l),e.nodeHighlightStyle||{})},e.edgeStateStyles={hover:Sh(Sh({},c),e.edgeHighlightStyle||{})},!1!==e.showToolBar&&(e.plugins=[new(gh().ToolBar)],this._setToolBarStyle()),!1!==e.showContextMenu&&(e.plugins=[].concat(wh(e.plugins||[]),[s]),this._setToolBarStyle()),e}},{key:"changeSize",value:function(e,t){return this.graph.changeSize(e,t)}},{key:"autoResize",value:function(){var e=this,t=this.getContainer();window.addEventListener("resize",function(){var r=t.scrollWidth,n=t.scrollHeight;e.graph.changeSize(r,n),e.graph.refresh()})}},{key:"zoom",value:function(e,t,r,n){this.graph.zoom(e,t,r,n)}},{key:"zoomTo",value:function(e,t,r,n){this.graph.zoomTo(e,t,r,n)}},{key:"fitView",value:function(e,t,r,n){this.graph.fitView(e,t,r,n)}},{key:"fitCenter",value:function(e,t){this.graph.fitCenter(e,t)}},{key:"getGraphCenterPoint",value:function(){return this.graph.getGraphCenterPoint()}},{key:"getViewPortCenterPoint",value:function(){return this.graph.getViewPortCenterPoint()}},{key:"getZoom",value:function(){return this.graph.getZoom()}},{key:"getMinZoom",value:function(){return this.graph.getMinZoom()}},{key:"setMinZoom",value:function(e){this.graph.setMinZoom(e)}},{key:"getMaxZoom",value:function(){return this.graph.getMaxZoom()}},{key:"setMaxZoom",value:function(e){this.graph.setMaxZoom(e)}},{key:"getWidth",value:function(){return this.graph.getWidth()}},{key:"getHeight",value:function(){return this.graph.getHeight()}},{key:"setCenter",value:function(e){var t=this.graph.getWidth()/2,r=this.graph.getHeight()/2,n=this.graph.getCanvasByPoint(e.x,e.y);this.graph.translate(t-n.x,r-n.y)}},{key:"_setToolBarStyle",value:function(){bh()("\n      .g6-component-toolbar li[code='redo'],\n      .g6-component-toolbar li[code='undo'],\n      .g6-component-toolbar li[code='realZoom'] {\n        display: none;\n      }\n      .g6-component-contextmenu {\n        position: absolute;\n        z-index: 2;\n        list-style-type: none;\n        border-radius: 6px;\n        font-size: 14px;\n        width: fit-content;\n        transition: opacity .2s;\n        text-align: center;\n        box-shadow: 0 5px 18px 0 rgba(0, 0, 0, 0.6);\n        border: 0px;\n      }\n      .g6-component-contextmenu ul {\n        padding-left: 0px;\n        margin: 0;\n      }\n      .g6-component-contextmenu li {\n        cursor: pointer;\n        list-style-type: none;\n        list-style: none;\n        margin-left: 0;\n        line-height: 38px;\n        padding: 0px 35px;\n      }\n      .g6-component-contextmenu li:hover {\n        color: #333;\n        background: #aaaaaa45;\n      }\n    ")}},{key:"highlightNode",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.graph;e.on("node:mouseenter",function(t){var r=t.item;e.setAutoPaint(!1),e.getNodes().forEach(function(t){e.clearItemStates(t)}),e.setItemState(r,"hover",!0),e.paint(),e.setAutoPaint(!0)}),e.on("node:mouseleave",function(){e.setAutoPaint(!1),e.getNodes().forEach(function(t){e.clearItemStates(t)}),e.paint(),e.setAutoPaint(!0)})}},{key:"highlightEdge",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.graph;e.on("edge:mouseenter",function(t){var r=t.item;e.setAutoPaint(!1),e.getNodes().forEach(function(t){e.clearItemStates(t)}),e.setItemState(r,"hover",!0),e.paint(),e.setAutoPaint(!0)}),e.on("edge:mouseleave",function(){e.setAutoPaint(!1),e.getEdges().forEach(function(t){e.clearItemStates(t)}),e.paint(),e.setAutoPaint(!0)})}},{key:"setData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.graph;this.data?t.changeData(e):t.data(e),this.data=e}},{key:"render",value:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.graph).render()}},{key:"updateGraph",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.graph;this.data=e,t.changeData(e)}},{key:"refresh",value:function(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.graph).refresh()}},{key:"getContainer",value:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.graph).getContainer()}},{key:"getCanvas",value:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.graph).get("canvas")}},{key:"getNodes",value:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.graph).getNodes()}},{key:"getEdges",value:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.graph).getEdges()}},{key:"getNeighbors",value:function(e,t){return(arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.graph).getNeighbors(e,t)}},{key:"findById",value:function(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.graph).findById(e)}},{key:"find",value:function(e,t){return(arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.graph).find(e,t)}},{key:"findAll",value:function(e,t){return(arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.graph).findAll(e,t)}},{key:"getEdgesByNode",value:function(e){return e.getEdges()}},{key:"getInEdges",value:function(e){return e.getInEdges()}},{key:"getOutEdges",value:function(e){return e.getOutEdges()}},{key:"getSourceByEdge",value:function(e){return e.getSource()}},{key:"getTargetByEdge",value:function(e){return e.getTarget()}},{key:"expandNode",value:function(e){var t=e.getModel().id;this._expandCollapseNode(this.collpasedData[t],"show"),delete this.collpasedData[t]}},{key:"collapseNode",value:function(e){var t=e.getModel().id,r=[];this._collapseFunc(e,r),this.collpasedData[t]=r,this._expandCollapseNode(r)}},{key:"isCollpased",value:function(e){return!!this.collpasedData[e]}},{key:"_collapseFunc",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=this.getNeighbors(e,"target"),n=this.getNeighbors(e,"source"),o=0;o<r.length;o++){var i=r[o],a=i.getModel();1===this.getNeighbors(i).length&&t.push({id:a.id})}for(var s=0;s<n.length;s++){var u=n[s],l=u.getModel(),c=this.getNeighbors(u),f=this.getNeighbors(u,"source");if(1===c.length||0===f.length)t.push({id:l.id});else{var h=[];this._collapseFunc(u,h),t.push({id:l.id,children:h})}}return t}},{key:"_expandCollapseNode",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"hide";e&&e.forEach(function(e){"hide"===r?t.hideItem(e.id):(t.showItem(e.id),t.isCollpased(e.id)&&delete t.collpasedData[e.id]),e.children&&t._expandCollapseNode(e.children,r)})}},{key:"showItem",value:function(e,t){(arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.graph).showItem(e,t)}},{key:"hideItem",value:function(e,t){(arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.graph).hideItem(e,t)}},{key:"show",value:function(e){e.show()}},{key:"hide",value:function(e){e.hide()}},{key:"changeVisibility",value:function(e,t){e.changeVisibility(t)}},{key:"isVisible",value:function(e){return e.isVisible()}},{key:"getModel",value:function(e){return e.getModel()}},{key:"addItem",value:function(e,t){(arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.graph).addItem(e,t)}},{key:"removeItem",value:function(e){(arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.graph).removeItem(e)}},{key:"updateItem",value:function(e,t){(arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.graph).updateItem(e,t)}},{key:"refreshItem",value:function(e){(arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.graph).refreshItem(e)}},{key:"refreshPositions",value:function(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.graph).refreshPositions()}},{key:"on",value:function(e,t){(arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.graph).on(e,t)}},{key:"off",value:function(e,t){(arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.graph).off(e,t)}},{key:"toDataURL",value:function(e,t){(arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.graph).toDataURL(e,t)}},{key:"bindNodeDefaultDragEvent",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.graph;e.on("node:dragstart",function(e){kh(e)}),e.on("node:drag",function(e){kh(e)}),e.on("node:dragend",function(e){e.item.get("model").fx=null,e.item.get("model").fy=null})}},{key:"stopDefaultEventPropagation",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.graph;e.on("click",function(e){e.stopPropagation()}),e.on("mousedown",function(e){e.stopPropagation()}),e.on("mouseover",function(e){e.stopPropagation()}),e.on("mouseout",function(e){e.stopPropagation()})}},{key:"clear",value:function(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.graph).clear()}},{key:"destroy",value:function(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.graph).destroy()}}])&&Ph(t.prototype,r),n&&Ph(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function kh(e){var t=e.item.get("model");return t.fx=e.x,t.fy=e.y,t.x=e.x,t.y=e.y,t}var Mh=r(42138),Ch=r.n(Mh);function jh(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Th=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"G6";!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.graph=null,this.config=Ch()(t),this.graphRender=null,this.type=r,this.createGraphRender(this.type),this.config=this.graphRender._getGraphConfig(this.config),this.createGraph(this.config),this.CLASS_NAME="SuperMap.KnowledgeGraph"}var t,r,n;return t=e,n=[{key:"dataFromGraphMap",value:function(e,t){return lh(e,t)}},{key:"dataFromKnowledgeGraphQuery",value:function(e){return lh(e)}}],(r=[{key:"handleNodeStatus",value:function(e){var t=e.expand,r=e.collapse,n=e.hidden;this.expandNodes(t),this.collapseNodes(r),this.hideNodes(n)}},{key:"expandNodes",value:function(e){var t=this;e&&e.forEach(function(e){t.expandNode(e+"")})}},{key:"collapseNodes",value:function(e){var t=this;e&&e.forEach(function(e){t.collapseNode(e+"")})}},{key:"hideNodes",value:function(e){var t=this;e&&e.forEach(function(e){t.hideItem(e+"")})}},{key:"createGraphRender",value:function(e){"G6"===e&&(this.graphRender=new Eh)}},{key:"createGraph",value:function(e){var t=this.initGraph(e);return this.graph=t,this.autoResize(),t}},{key:"getGraph",value:function(){return this.graph}},{key:"autoResize",value:function(){this.config&&!1!==this.config.autoResize&&this.graphRender.autoResize()}},{key:"zoom",value:function(e,t,r,n){this.graphRender.zoom(e,t,r,n)}},{key:"zoomTo",value:function(e,t,r,n){this.graphRender.zoomTo(e,t,r,n)}},{key:"fitView",value:function(e,t,r,n){this.graphRender.fitView(e,t,r,n)}},{key:"fitCenter",value:function(e,t){this.graphRender.fitCenter(e,t)}},{key:"getGraphCenterPoint",value:function(){return this.graphRender.getGraphCenterPoint()}},{key:"getViewPortCenterPoint",value:function(){return this.graphRender.getViewPortCenterPoint()}},{key:"getZoom",value:function(){return this.graphRender.getZoom()}},{key:"getMinZoom",value:function(){return this.graphRender.getMinZoom()}},{key:"setMinZoom",value:function(e){this.graphRender.setMinZoom(e)}},{key:"getMaxZoom",value:function(){return this.graphRender.getMaxZoom()}},{key:"setMaxZoom",value:function(e){this.graphRender.setMaxZoom(e)}},{key:"getWidth",value:function(){return this.graphRender.getWidth()}},{key:"getHeight",value:function(){return this.graphRender.getHeight()}},{key:"initGraph",value:function(e){var t=this,r=this.graphRender.initGraph(e);this.graph=r;return this.graph.on("beforelayout",function(){void 0!==t.config.zoom&&t.zoom(t.config.zoom),void 0!==t.config.center&&t.graphRender.setCenter({x:t.config.center[0],y:t.config.center[1]})}),r}},{key:"setData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.graph;e=e||{nodes:[],edges:[]},this.config&&this.config.nodeLabelMaxWidth&&(e.nodes=this.nodeLabelOpenEllipsis(this.config.nodeLabelMaxWidth,e.nodes)),this.graphRender.setData(e,t),this.render(t),this.data=e}},{key:"render",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.graph;e&&this.graphRender.render(e)}},{key:"updateGraph",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.graph;t&&this.graphRender.updateGraph(e,t)}},{key:"refresh",value:function(){return this.graphRender.refresh()}},{key:"changeSize",value:function(e,t){return this.graphRender.changeSize(e,t)}},{key:"resize",value:function(e,t){this.graphRender.changeSize(e,t),this.graphRender.refresh()}},{key:"getContainer",value:function(){return this.graphRender.getContainer()}},{key:"getCanvas",value:function(){return this.graphRender.getCanvas()}},{key:"getNodes",value:function(){return this.graphRender.getNodes()}},{key:"getEdges",value:function(){return this.graphRender.getEdges()}},{key:"getNeighbors",value:function(e,t){return this.graphRender.getNeighbors(e,t)}},{key:"findById",value:function(e){return this.graphRender.findById(e)}},{key:"find",value:function(e,t){return this.graphRender.find(e,t)}},{key:"findAll",value:function(e,t){return this.graphRender.findAll(e,t)}},{key:"getEdgesByNode",value:function(e){return this.graphRender.getEdgesByNode(e)}},{key:"getInEdges",value:function(e){return this.graphRender.getInEdges(e)}},{key:"getOutEdges",value:function(e){return this.graphRender.getOutEdges(e)}},{key:"getSourceByEdge",value:function(e){return this.graphRender.getSourceByEdge(e)}},{key:"getTargetByEdge",value:function(e){return this.graphRender.getTargetByEdge(e)}},{key:"expandNode",value:function(e){var t=this.findById(e);t&&this.graphRender.expandNode(t)}},{key:"collapseNode",value:function(e){var t=this.findById(e);t&&this.graphRender.collapseNode(t)}},{key:"showItem",value:function(e,t){this.graphRender.showItem(e,t)}},{key:"hideItem",value:function(e,t){this.graphRender.hideItem(e,t)}},{key:"show",value:function(e){this.graphRender.show(e)}},{key:"hide",value:function(e){this.graphRender.hide(e)}},{key:"changeVisibility",value:function(e,t){this.graphRender.changeVisibility(e,t)}},{key:"isVisible",value:function(e){return this.graphRender.isVisible(e)}},{key:"getModel",value:function(e){return this.graphRender.getModel(e)}},{key:"addItem",value:function(e,t){return this.graphRender.addItem(e,t)}},{key:"removeItem",value:function(e){return this.graphRender.removeItem(e)}},{key:"updateItem",value:function(e,t){return this.graphRender.updateItem(e,t)}},{key:"refreshItem",value:function(e){return this.graphRender.refreshItem(e)}},{key:"refreshPositions",value:function(){return this.graphRender.refreshPositions()}},{key:"on",value:function(e,t){this.graphRender.on(e,t)}},{key:"off",value:function(e,t){this.graphRender.off(e,t)}},{key:"toDataURL",value:function(e,t){this.graphRender.toDataURL(e,t)}},{key:"nodeLabelOpenEllipsis",value:function(e,t){var r=this;return t?e?t.map(function(t){var n=t.labelCfg&&t.labelCfg.fontSize||r.defaultNode&&r.defaultNode.labelCfg&&r.defaultNode.labelCfg.fontSize||14;return t.label=function(e,t,r){var n=1*r;t*=1.6;if(function(e){for(var t=0,r=0;r<e.length;r++)e.charCodeAt(r)>0&&e.charCodeAt(r)<128?t++:t+=2;return t}(e)*n>t){var o=Math.floor((t-20)/n),i=e.substring(0,o);return(e.substring(o).length+"â¦".length)*n>t?i+"\n"+e.substring(o,o+o-2)+"â¦":0==e.substring(o).length?i:i+"\n"+e.substring(o)}return e}(t.label,e,n),t}):t:[]}},{key:"clear",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.graph;e&&e.clear()}},{key:"destroy",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.graph;e&&e.destroy()}}])&&jh(t.prototype,r),n&&jh(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Ah(e){"@babel/helpers - typeof";return(Ah="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ih(){Ih=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var o=t&&t.prototype instanceof f?t:f,i=Object.create(o.prototype),a=new S(n||[]);return i._invoke=function(e,t,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return P()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=w(a,r);if(s){if(s===c)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=l(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===c)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(e,r,a),i}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var c={};function f(){}function h(){}function p(){}var d={};s(d,o,function(){return this});var y=Object.getPrototypeOf,v=y&&y(y(O([])));v&&v!==t&&r.call(v,o)&&(d=v);var g=p.prototype=f.prototype=Object.create(d);function m(e){["next","throw","return"].forEach(function(t){s(e,t,function(e){return this._invoke(t,e)})})}function b(e,t){var n;this._invoke=function(o,i){function a(){return new t(function(n,a){!function n(o,i,a,s){var u=l(e[o],e,i);if("throw"!==u.type){var c=u.arg,f=c.value;return f&&"object"==Ah(f)&&r.call(f,"__await")?t.resolve(f.__await).then(function(e){n("next",e,a,s)},function(e){n("throw",e,a,s)}):t.resolve(f).then(function(e){c.value=e,a(c)},function(e){return n("throw",e,a,s)})}s(u.arg)}(o,i,n,a)})}return n=n?n.then(a,a):a()}}function w(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return c;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}var n=l(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,c;var o=n.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,c):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,c)}function _(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(_,this),this.reset(!0)}function O(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:P}}function P(){return{value:void 0,done:!0}}return h.prototype=p,s(g,"constructor",p),s(p,"constructor",h),h.displayName=s(p,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,s(e,a,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},m(b.prototype),s(b.prototype,i,function(){return this}),e.AsyncIterator=b,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(e){return e.done?e.value:a.next()})},m(g),s(g,a,"Generator"),s(g,o,function(){return this}),s(g,"toString",function(){return"[object Generator]"}),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=O,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,c):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),c},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),x(r),c}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:O(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),c}},e}function Rh(e,t,r,n,o,i,a){try{var s=e[i](a),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function Lh(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Nh(e,t){return(Nh=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Dh(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Bh(e);if(t){var o=Bh(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===Ah(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function Bh(e){return(Bh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Fh=function(e){var t;!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Nh(e,t)}(s,o().Evented);var r,n,i,a=Dh(s);function s(e,t){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(r=a.call(this,e,t)).graph=null,r.EVENT_TYPES=["loaded"];var n=e.split("/").pop();return r.url=e.replace("/graphmaps/".concat(n),""),r.createGraphMap(n,t),r}return r=s,(n=[{key:"createGraphMap",value:function(e,r){return(t=t||(n=Ih().mark(function e(t,r){var n,o,i=this;return Ih().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.knowledgeGraphService=this.createKnowledgeGraphService(this.url,r),e.next=3,this.knowledgeGraphService.getGraphMapData(t);case 3:n=e.sent,o=Th.dataFromGraphMap(n.data,n.graphMap),this.graph=new Th(r&&r.config),this.graph.on("beforelayout",function(){i.fire(i.EVENT_TYPES[0])}),this.graph.setData(o),this.graph.handleNodeStatus((a=n.graphMap,void 0,void 0,void 0,void 0,s=a.dataContent,u=s.expand,l=s.collapse,c=s.hidden,{expand:u&&JSON.parse(u),collapse:l&&JSON.parse(l),hidden:c&&JSON.parse(c)}));case 9:case"end":return e.stop()}var a,s,u,l,c},e,this)}),function(){var e=this,t=arguments;return new Promise(function(r,o){var i=n.apply(e,t);function a(e){Rh(i,r,o,a,s,"next",e)}function s(e){Rh(i,r,o,a,s,"throw",e)}a(void 0)})})).apply(this,arguments);var n}},{key:"createKnowledgeGraphService",value:function(e,t){return new th(e,t)}}])&&Lh(r.prototype,n),i&&Lh(r,i),Object.defineProperty(r,"prototype",{writable:!1}),s}();function Gh(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var zh=function(){function e(t,r,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.lngLat=xr.isArray(t)?{lng:t[0],lat:t[1]}:t,this.style=xr.extend({},r),this.attributes=n}var t,r,n;return t=e,(r=[{key:"getId",value:function(){return this.id}},{key:"setId",value:function(e){this.id=e}},{key:"getLngLat",value:function(){return this.lngLat}},{key:"setLngLat",value:function(e){this.lngLat=xr.isArray(e)?{lng:e[0],lat:e[1]}:e}},{key:"setStyle",value:function(e){this.style=xr.extend(this.style,e)}},{key:"getStyle",value:function(){return this.style}},{key:"setAttributes",value:function(e){this.attributes=xr.extend({},this.attributes,e)}},{key:"getAttributes",value:function(){return this.attributes}}])&&Gh(t.prototype,r),n&&Gh(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),Uh={getPoint:function(e){if(e&&e instanceof Array)return new vs.DataSet([{geometry:{type:"Point",coordinates:e}}])},getPoints:function(e){if(e&&e instanceof Array){var t=[];return e.forEach(function(e){t.push({geometry:{type:"Point",coordinates:e.geometry.coordinates}})}),new vs.DataSet(t)}},getCurveLines:function(e,t){if(e&&e instanceof Array&&t&&t instanceof Array){var r=[];return t.forEach(function(t){var n=t.geometry&&t.geometry.coordinates,o={lng:n[0],lat:n[1]},i={lng:e[0],lat:e[1]},a=vs.utilCurve.getPoints([i,o]);r.push({geometry:{type:"LineString",coordinates:a}})}),new vs.DataSet(r)}},getCurveDynamicPoints:function(e,t){if(e&&e instanceof Array&&t&&t instanceof Array){var r=[];return t.forEach(function(t){for(var n=t.geometry&&t.geometry.coordinates,o={lng:n[0],lat:n[1]},i={lng:e[0],lat:e[1]},a=vs.utilCurve.getPoints([i,o]),s=0;s<a.length;s++)r.push({geometry:{type:"Point",coordinates:a[s]},time:s})}),new vs.DataSet(r)}}};function Vh(e,t,r,n,o){return{id:e,type:t,source:r||"vector-tiles","source-layer":n||e,paint:o}}function Wh(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Yh(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Wh(Object(r),!0).forEach(function(t){Hh(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Wh(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Hh(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Xh(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var qh=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.map=t}var t,r,n;return t=e,(r=[{key:"addLayer",value:function(e,t,r){e.layout&&"none"===e.layout.visibility&&Object.assign(e.layout,{visibility:"visible"}),e.paint&&Object.assign(t.paint||{},e.paint),e.layout&&Object.assign(t.layout||{},e.layout),this.map.addLayerBySymbolBak(Yh(Yh({},e),t),r)}}])&&Xh(t.prototype,r),n&&Xh(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Jh(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Zh(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Jh(Object(r),!0).forEach(function(t){Kh(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Jh(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Kh(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Qh(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var $h=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.map=t,this.singleSymbol=new qh(t),this.layerIds={}}var t,r,n;return t=e,(r=[{key:"addLayer",value:function(e,t,r){var n=this;t.forEach(function(t){var o=j.createUniqueID("".concat(e.id,"_"));n.singleSymbol.addLayer(Zh(Zh({},e),{},{id:o}),t,r),n.addLayerId(e.id,o)})}},{key:"addLayerId",value:function(e,t){this.layerIds[e]||(this.layerIds[e]=[]),!this.layerIds[e].includes(t)&&this.layerIds[e].push(t)}},{key:"removeLayerId",value:function(e){delete this.layerIds[e]}},{key:"getLayerIds",value:function(e){return this.layerIds[e]}},{key:"getLayerId",value:function(e){for(var t in this.layerIds)if(this.layerIds[t].find(function(t){return t===e}))return t}}])&&Qh(t.prototype,r),n&&Qh(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function ep(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var tp=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.symbols={},this.images={}}var t,r,n;return t=e,(r=[{key:"addSymbol",value:function(e,t){this.symbols[e]=t}},{key:"getSymbol",value:function(e){return this.symbols[e]&&JSON.parse(JSON.stringify(this.symbols[e]))}},{key:"removeSymbol",value:function(e){delete this.symbols[e]}},{key:"addImageInfo",value:function(e,t){this.images[e]=t}},{key:"getImageInfo",value:function(e){return this.images[e]}}])&&ep(t.prototype,r),n&&ep(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function rp(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,s=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(e){s=!0,o=e}finally{try{a||null==r.return||r.return()}finally{if(s)throw o}}return i}(e,t)||np(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function np(e,t){if(e){if("string"==typeof e)return op(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?op(e,t):void 0}}function op(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ip(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ap={circle:"circle",symbol:"symbol",line:"line",fill:"fill"},sp=[{prefix:"line-",type:ap.line},{prefix:"fill-",type:ap.fill},{prefix:"circle-",type:ap.circle}];function up(e){return e&&e.length>0}function lp(e){var t,r=function(e){var t,r,n=e.paint,o=void 0===n?{}:n,i=e.layout,a=void 0===i?{}:i,s=Object.keys(o).concat(Object.keys(a)),u=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=np(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}(sp);try{var l=function(){var e=r.value,n=s.some(function(t){return t.startsWith(e.prefix)});if(n)return t=e.type,1};for(u.s();!(r=u.n()).done&&!l(););}catch(e){u.e(e)}finally{u.f()}return t||ap.symbol}(e);return(ip(t={},ap.symbol,{type:"layout",name:"icon-image"}),ip(t,ap.line,{type:"paint",name:"line-pattern"}),ip(t,ap.fill,{type:"paint",name:"fill-pattern"}),t)[r]}var cp=["array","boolean","collator","format","literal","number","object","string","to-boolean","to-color","to-number","to-string","typeof","feature-state","geometry-type","id","line-progress","properties","at","get","has","length","!","!=","<","<=","==",">",">=","all","any","case","match","coalesce","interpolate","interpolate-hcl","interpolate-lab","step","let","var","concat","downcase","is-supported-script","resolved-locale","upcase","rgb","rgba","-","*","/","%","^","+","abs","acos","asin","atan","ceil","cos","e","floor","ln","ln2","log10","log2","max","min","pi","round","sin","sqrt","tan","zoom","heatmap-density"];function fp(e){if(e&&e.length>0){var t=rp(e,1)[0];return"string"==typeof t&&cp.includes(t)}return!1}function hp(e){return Object.keys(e).every(function(t){return!fp(e[t])})}function pp(e){return(up(e)?e:[e]).every(function(e){return hp(e.paint||{})&&hp(e.layout||{})})}var dp=function(e){return["icon-color","icon-opacity","icon-translate","line-opacity","line-blur","line-translate","line-color","line-width","line-offset","line-dasharray","line-pattern","fill-color","fill-opacity","fill-pattern","fill-outline-color","text-color","text-halo-blur","text-halo-color","text-halo-width","text-opacity","text-translate","text-translate-anchor","circle-blur","circle-color","circle-opacity","circle-translate","circle-radius","circle-stroke-color","circle-stroke-opacity","circle-stroke-width"].includes(e)};function yp(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function vp(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?yp(Object(r),!0).forEach(function(t){gp(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yp(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function gp(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mp(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var bp=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.map=t,this.symbolManager=new tp,this.singleSymbolRender=new qh(t),this.compositeSymbolRender=new $h(t),this._layerSymbols={}}var t,r,n;return t=e,(r=[{key:"_update",value:function(e){return this.map=e,this}},{key:"addLayer",value:function(e,t){if("string"==typeof e.symbol){var r=e.symbol;if(r){var n=this.symbolManager.getSymbol(r);if(!n)return this.map.fire("error",{error:new Error('Symbol "'.concat(r,'" could not be loaded. Please make sure you have added the symbol with map.addSymbol().'))});this.setSymbolTolayer(e.id,r),this.getSymbolRender(n).addLayer(e,n,t)}}else fp(e.symbol)&&(this.setSymbolTolayer(e.id,e.symbol),this.addExpressionLayer(e,t))}},{key:"setSymbol",value:function(e,t){var r=this.map.getStyle().layers,n=r.findIndex(function(t){return t.id===e});if(-1===n)return this.map.fire("error",{error:new Error('Cannot set symbol "'.concat(t,'" to non-existing layer "').concat(e,'".'))});this.map.removeLayer(e);var o=r[n+1]&&r[n+1].id,i=o&&this.map.style.getLayer(o),a=i&&i.id||o&&this.getFirstLayerId(o),s=r[n];this.addLayer(vp(vp({},s),{},{paint:{},layout:{visibility:s.layout&&s.layout.visibility||"visible"},symbol:t}),a)}},{key:"getMatchLayers",value:function(e){var t=[],r=["all"];e.filter&&r.push(e.filter);var n=e.symbol.slice(2);return n.forEach(function(o,i){i%2==1?t.push(vp(vp({},e),{},{filter:[].concat(r,[["==",e.symbol[1][1],n[i-1]]]),symbol:o})):i===n.length-1&&t.unshift(vp(vp({},e),{},{symbol:o}))}),t}},{key:"getCaseLayers",value:function(e){var t=[],r=["all"];e.filter&&r.push(e.filter);var n=e.symbol.slice(1);return n.forEach(function(o,i){i%2==1?t.push(vp(vp({},e),{},{filter:[].concat(r,[n[i-1]]),symbol:o})):i===n.length-1&&t.unshift(vp(vp({},e),{},{symbol:o}))}),t}},{key:"addExpressionLayer",value:function(e,t){var r=this;delete e.paint,delete e.layout;var n={match:this.getMatchLayers,case:this.getCaseLayers}[e.symbol[0]],o=n&&n(e);if(!o)return this.map.fire("error",{error:new Error("This expressions not supported")});o.forEach(function(n){n.id=j.createUniqueID("".concat(e.id,"_")),r.compositeSymbolRender.addLayerId(e.id,n.id),r.addLayer(n,t)})}},{key:"getSymbolRender",value:function(e){return up(e)?this.compositeSymbolRender:this.singleSymbolRender}},{key:"addSymbolImageToMap",value:function(e,t){var r=lp(e),n=r.type,o=r.name,i=e[n]&&e[n][o];i&&!this.map.hasImage(i)&&(this.map.addImage(i,t),this.symbolManager.addImageInfo(i,t))}},{key:"addSymbol",value:function(e,t){return this.symbolManager.getSymbol(e)?this.map.fire("error",{error:new Error("An symbol with this name already exists.")}):pp(t)?void this.symbolManager.addSymbol(e,t):this.map.fire("error",{error:new Error("Symbol is not supported expressions.")})}},{key:"setSymbolTolayer",value:function(e,t){this._layerSymbols[e]=t}},{key:"getSymbol",value:function(e){return this._layerSymbols[e]}},{key:"hasSymbol",value:function(){return Object.keys(this._layerSymbols).length>0}},{key:"removeSymbol",value:function(e){this.symbolManager.removeSymbol(e)}},{key:"getSymbolInfo",value:function(e){return this.symbolManager.getSymbol(e)}},{key:"getLayerIds",value:function(e){return this.compositeSymbolRender.getLayerIds(e)||[]}},{key:"getLayerId",value:function(e){return this.compositeSymbolRender.getLayerId(e)}},{key:"removeLayerId",value:function(e){return this.compositeSymbolRender.removeLayerId(e)}},{key:"getLayer",value:function(e){var t=this.map.getLayerBySymbolBak(e),r=this.getSymbol(e);if(t)return r?vp(vp({},t),{},{symbol:r}):t;var n=this.getLayerIds(e);if(n[0]){var o=this.map.getLayerBySymbolBak(n[0]);return o&&vp(vp({},o),{},{symbol:r,id:e})}}},{key:"removeLayer",value:function(e){var t=this,r=this.getLayerIds(e);r.length>0?(r.forEach(function(e){return t.map.style.removeLayer(e)}),this.removeLayerId(e)):this.map.style.removeLayer(e)}},{key:"getStyle",value:function(){var e=this,t=this.map.style.serialize();return this.hasSymbol()&&(t.layers=t.layers.reduce(function(t,r){var n=e.getLayerId(r.id);return n?!t.find(function(e){return e.id===n})&&t.push(vp(vp({},r),{},{symbol:e.getSymbol(n),id:n})):e.getSymbol(r.id)?t.push(vp(vp({},r),{},{symbol:e.getSymbol(r.id)})):t.push(r),t},[])),t}},{key:"getFirstLayerId",value:function(e){return this.getLayerIds(e)[0]}},{key:"moveLayer",value:function(e,t){var r=this,n=this.getLayerIds(e),o=t&&this.map.style.getLayer(t),i=o&&o.id||t&&this.getFirstLayerId(t);n.length>0?n.forEach(function(e){return r.map.style.moveLayer(e,i)}):this.map.style.moveLayer(e,i)}},{key:"setFilter",value:function(e,t,r){var n=this;if(fp(this.getSymbol(e))){var o=this.getFirstLayerId(e);this.map.style.setFilter(o,t,r);var i=this.getSymbol(e);this.setSymbol(e,i)}else{var a=this.getLayerIds(e);a.length>0?a.forEach(function(e){return n.map.style.setFilter(e,t,r)}):this.map.style.setFilter(e,t,r)}}},{key:"getFilter",value:function(e){var t=this.getFirstLayerId(e);if(this.map.style.getLayer(t))return this.map.style.getFilter(t)}},{key:"setLayerZoomRange",value:function(e,t,r){var n=this,o=this.getLayerIds(e);o.length>0?o.forEach(function(e){return n.map.style.setLayerZoomRange(e,t,r)}):this.map.style.setLayerZoomRange(e,t,r)}},{key:"setPaintProperty",value:function(e,t,r,n){var o=this,i=this.getLayerIds(e);i.length>0?i.forEach(function(e){return o.map.style.setPaintProperty(e,t,r,n)}):this.map.style.setPaintProperty(e,t,r,n)}},{key:"getPaintProperty",value:function(e,t){var r=this.getFirstLayerId(e);return this.map.style.getPaintProperty(r,t)}},{key:"setLayoutProperty",value:function(e,t,r,n){var o=this,i=this.getLayerIds(e);i.length>0?i.forEach(function(e){return o.map.style.setLayoutProperty(e,t,r,n)}):this.map.style.setLayoutProperty(e,t,r,n)}},{key:"getLayoutProperty",value:function(e,t){var r=this.getFirstLayerId(e);return this.map.style.getLayoutProperty(r,t)}},{key:"updateLayerSymbol",value:function(e){var t=this;Object.keys(this._layerSymbols).forEach(function(r){var n=t._layerSymbols[r];n.includes(e)&&t.setSymbol(r,n)})}},{key:"updateSymbol",value:function(e,t){return this.symbolManager.getSymbol(e)?pp(t)?(this.symbolManager.addSymbol(e,t),void this.updateLayerSymbol(e)):this.map.fire("error",{error:new Error("Symbol is not supported expressions.")}):this.map.fire("error",{error:new Error('Symbol "'.concat(e,'" could not be loaded. Please make sure you have added the symbol with map.addSymbol().'))})}},{key:"setSymbolProperty",value:function(e,t,r,n){var o=this.symbolManager.getSymbol(e);if(!o)return this.map.fire("error",{error:new Error('Symbol "'.concat(e,'" could not be loaded. Please make sure you have added the symbol with map.addSymbol().'))});if(fp(n))return this.map.fire("error",{error:new Error("Symbol value is not supported expressions.")});var i=dp(r)?"paint":"layout";if(o.length>0){var a=o[t];if(!a)return this.map.fire("error",{error:new Error("symbol[".concat(t,"] does not exist."))});a[i]||(a[i]={}),Object.assign(a[i],gp({},r,n))}else o[i]||(o[i]={}),Object.assign(o[i],gp({},r,n));this.symbolManager.addSymbol(e,o),this.updateLayerSymbol(e)}},{key:"getSymbolProperty",value:function(e,t,r){var n=this.symbolManager.getSymbol(e);if(n){var o=dp(r)?"paint":"layout";return n.length>0?n[t]&&n[t][o]&&n[t][o][r]:n[o]&&n[o][r]}this.map.fire("error",{error:new Error('Symbol "'.concat(e,'" could not be loaded. Please make sure you have added the symbol with map.addSymbol().'))})}}])&&mp(t.prototype,r),n&&mp(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function wp(e){"@babel/helpers - typeof";return(wp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _p(){_p=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var o=t&&t.prototype instanceof f?t:f,i=Object.create(o.prototype),a=new S(n||[]);return i._invoke=function(e,t,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return P()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=w(a,r);if(s){if(s===c)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=l(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===c)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(e,r,a),i}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var c={};function f(){}function h(){}function p(){}var d={};s(d,o,function(){return this});var y=Object.getPrototypeOf,v=y&&y(y(O([])));v&&v!==t&&r.call(v,o)&&(d=v);var g=p.prototype=f.prototype=Object.create(d);function m(e){["next","throw","return"].forEach(function(t){s(e,t,function(e){return this._invoke(t,e)})})}function b(e,t){var n;this._invoke=function(o,i){function a(){return new t(function(n,a){!function n(o,i,a,s){var u=l(e[o],e,i);if("throw"!==u.type){var c=u.arg,f=c.value;return f&&"object"==wp(f)&&r.call(f,"__await")?t.resolve(f.__await).then(function(e){n("next",e,a,s)},function(e){n("throw",e,a,s)}):t.resolve(f).then(function(e){c.value=e,a(c)},function(e){return n("throw",e,a,s)})}s(u.arg)}(o,i,n,a)})}return n=n?n.then(a,a):a()}}function w(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return c;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}var n=l(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,c;var o=n.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,c):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,c)}function _(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(_,this),this.reset(!0)}function O(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:P}}function P(){return{value:void 0,done:!0}}return h.prototype=p,s(g,"constructor",p),s(p,"constructor",h),h.displayName=s(p,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,s(e,a,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},m(b.prototype),s(b.prototype,i,function(){return this}),e.AsyncIterator=b,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(e){return e.done?e.value:a.next()})},m(g),s(g,a,"Generator"),s(g,o,function(){return this}),s(g,"toString",function(){return"[object Generator]"}),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=O,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,c):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),c},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),x(r),c}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:O(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),c}},e}function xp(e,t,r,n,o,i,a){try{var s=e[i](a),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function Sp(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function a(e){xp(i,n,o,a,s,"next",e)}function s(e){xp(i,n,o,a,s,"throw",e)}a(void 0)})}}var Op=function(){var e,t,r=function(e){return o().Map.prototype.symbolHandler||(o().Map.prototype.symbolHandler=new bp(e)),o().Map.prototype.symbolHandler._update(e)};function n(e,r){return(t=t||Sp(_p().mark(function e(t,r){var n,o,i,a,s,u;return _p().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(r.basePath,"/").concat(t,"/").concat(t),e.next=4,Al.get("".concat(n,".json")).then(function(e){if(e.ok)return e.json()}).catch(function(){return null});case 4:if(o=e.sent){e.next=7;break}return e.abrupt("return",null);case 7:if(i=o.paint||{},a=o.layout||{},s=i["fill-pattern"]||i["line-pattern"]||a["icon-image"],e.t0=s,!e.t0){e.next=15;break}return e.next=14,new Promise(function(e){var t=new Image;t.src="".concat(n,".png"),t.onload=function(r){e(r?t:null)},t.onerror=function(){e(null)}});case 14:e.t0=e.sent;case 15:return u=e.t0,e.abrupt("return",{value:o,image:u});case 17:case"end":return e.stop()}},e)}))).apply(this,arguments)}void 0===o().Map.prototype.addLayerBySymbolBak&&(o().Map.prototype.addLayerBySymbolBak=o().Map.prototype.addLayer,o().Map.prototype.addLayer=function(e,t){return e.symbol?(r(this).addLayer(e,t),this):(this.addLayerBySymbolBak(e,t),this)}),void 0===o().Map.prototype.getLayerBySymbolBak&&(o().Map.prototype.getLayerBySymbolBak=o().Map.prototype.getLayer,o().Map.prototype.getLayer=function(e){return r(this).getLayer(e)}),void 0===o().Map.prototype.moveLayerBySymbolBak&&(o().Map.prototype.moveLayerBySymbolBak=o().Map.prototype.moveLayer,o().Map.prototype.moveLayer=function(e,t){return!this.style.getLayer(e)||t&&!this.style.getLayer(t)?(r(this).moveLayer(e,t),this._update(!0)):this.moveLayerBySymbolBak(e,t)}),void 0===o().Map.prototype.removeLayerBySymbolBak&&(o().Map.prototype.removeLayerBySymbolBak=o().Map.prototype.removeLayer,o().Map.prototype.removeLayer=function(e){return this.style.getLayer(e)?this.removeLayerBySymbolBak(e):r(this).removeLayer(e)}),void 0===o().Map.prototype.setLayoutPropertyBySymbolBak&&(o().Map.prototype.setLayoutPropertyBySymbolBak=o().Map.prototype.setLayoutProperty,o().Map.prototype.setLayoutProperty=function(e,t,n,o){return this.overlayLayersManager[e]||this.style.getLayer(e)?this.setLayoutPropertyBySymbolBak(e,t,n,o):(r(this).setLayoutProperty(e,t,n,o),this._update(!0))}),o().Map.prototype.setSymbol=function(e,t){r(this).setSymbol(e,t)},o().Map.prototype.setStyleBak||(o().Map.prototype.setStyleBak=o().Map.prototype.setStyle,o().Map.prototype.setStyle=function(e,t){var r=this;return this.setStyleBak(e,t),this.style&&this.style.once("style.load",function(){e.layers.filter(function(e){return e.symbol}).forEach(function(e){r.setSymbol(e.id,e.symbol)})}),this}),o().Map.prototype.loadSymbol=function(t,o){return(e=e||Sp(_p().mark(function e(t,o){var i,a,s,u;return _p().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("string"!=typeof t){e.next=15;break}if(i=r(this).getSymbolInfo(t)){e.next=12;break}return e.next=5,n(t,this);case 5:if(a=e.sent){e.next=9;break}return o({message:"This symbol is not exists."}),e.abrupt("return");case 9:s=a.value,u=a.image,i=s,u&&r(this).addSymbolImageToMap(s,u);case 12:o(null,i),e.next=16;break;case 15:o({message:"Symbol id must be a string."});case 16:case"end":return e.stop()}},e,this)}))).apply(this,arguments)},o().Map.prototype.addSymbol=function(e,t){r(this).addSymbol(e,t)},o().Map.prototype.hasSymbol=function(e){return e?!!r(this).getSymbolInfo(e):(this.fire("error",{error:new Error("Missing required symbol id")}),!1)},o().Map.prototype.removeSymbol=function(e){r(this).removeSymbol(e)},o().Map.prototype.updateSymbol=function(e,t){r(this).updateSymbol(e,t)},o().Map.prototype.setSymbolProperty=function(e,t,n,o){r(this).setSymbolProperty(e,t,n,o)},o().Map.prototype.getSymbolProperty=function(e,t,n){return r(this).getSymbolProperty(e,t,n)},o().Map.prototype.getStyle=function(){if(this.style)return r(this).getStyle()},o().Map.prototype.setFilter=function(e,t,n){return this.style.getLayer(e)?(this.style.setFilter(e,t,n),this._update(!0)):(r(this).setFilter(e,t,n),this._update(!0))},o().Map.prototype.getFilter=function(e){return this.style.getLayer(e)?this.style.getFilter(e):r(this).getFilter(e)},o().Map.prototype.setLayerZoomRange=function(e,t,n){return this.style.getLayer(e)?(this.style.setLayerZoomRange(e,t,n),this._update(!0)):(r(this).setLayerZoomRange(e,t,n),this._update(!0))},o().Map.prototype.setPaintProperty=function(e,t,n,o){return this.style.getLayer(e)?(this.style.setPaintProperty(e,t,n,o),this._update(!0)):(r(this).setPaintProperty(e,t,n,o),this._update(!0))},o().Map.prototype.getPaintProperty=function(e,t){return this.style.getLayer(e)?this.style.getPaintProperty(e,t):r(this).getPaintProperty(e,t)},o().Map.prototype.getLayoutProperty=function(e,t){return this.style.getLayer(e)?this.style.getLayoutProperty(e,t):r(this).getLayoutProperty(e,t)}};function Pp(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Ep=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.defaultBasePath="./resources/symbols"}var t,r,n;return t=e,(r=[{key:"init",value:function(e){o().Map.prototype.basePath=e&&e.basePath||this.defaultBasePath,Op()}}])&&Pp(t.prototype,r),n&&Pp(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function kp(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Mp=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t.filters&&"string"==typeof t.filters&&(t.filters=t.filters.split(",")),this.address=null,this.fromIndex=null,this.toIndex=null,this.filters=null,this.prjCoordSys=null,this.maxReturn=null,j.extend(this,t)}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){this.address=null,this.fromIndex=null,this.toIndex=null,this.filters=null,this.prjCoordSys=null,this.maxReturn=null}}])&&kp(t.prototype,r),n&&kp(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Cp(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var jp=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t.filters&&(t.filters=t.filters.split(",")),this.x=null,this.y=null,this.fromIndex=null,this.toIndex=null,this.filters=null,this.prjCoordSys=null,this.maxReturn=null,this.geoDecodingRadius=null,j.extend(this,t)}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){this.x=null,this.y=null,this.fromIndex=null,this.toIndex=null,this.filters=null,this.prjCoordSys=null,this.maxReturn=null,this.geoDecodingRadius=null}}])&&Cp(t.prototype,r),n&&Cp(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Tp(e){"@babel/helpers - typeof";return(Tp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ap(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ip(){return(Ip="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Np(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function Rp(e,t){return(Rp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Lp(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Np(e);if(t){var o=Np(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===Tp(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function Np(e){return(Np=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Dp=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Rp(e,t)}(i,Nf);var t,r,n,o=Lp(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t)).options=t||{},r.eventCount=0,r.CLASS_NAME="SuperMap.AddressMatchService",r}return t=i,(r=[{key:"destroy",value:function(){Ip(Np(i.prototype),"destroy",this).call(this)}},{key:"code",value:function(e,t,r){t instanceof Mp&&this.processAsync(e,t,r)}},{key:"decode",value:function(e,t,r){t instanceof jp&&this.processAsync(e,t,r)}},{key:"processAsync",value:function(e,t,r){var n=++this.eventCount,o={scope:this,processCompleted:function(e){if(n===e.result.eventId&&r)return delete e.result.eventId,r(e),this.events&&this.events.un(o),!1},processFailed:function(e){if((n===e.error.eventId||n===e.eventId)&&r)return r(e),this.events&&this.events.un(o),!1}};this.events.on(o),this.request({method:"GET",url:e,params:t,scope:this,success:function(e,t){e.eventId=n,this.serviceProcessCompleted(e,t)},failure:function(e,t){e.error&&(e.error.eventId=n),e.eventId=n,this.serviceProcessFailed(e,t)}})}},{key:"serviceProcessCompleted",value:function(e,t){e.succeed&&delete e.succeed,Ip(Np(i.prototype),"serviceProcessCompleted",this).call(this,e,t)}},{key:"serviceProcessFailed",value:function(e,t){Ip(Np(i.prototype),"serviceProcessFailed",this).call(this,e,t)}}])&&Ap(t.prototype,r),n&&Ap(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Bp(e){"@babel/helpers - typeof";return(Bp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Fp(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Gp(e,t){return(Gp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function zp(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Up(e);if(t){var o=Up(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===Bp(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function Up(e){return(Up=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Vp=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Gp(e,t)}(i,Tf);var t,r,n,o=zp(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t))._addressMatchService=new Dp(e,t),r}return t=i,(r=[{key:"code",value:function(e,t){this._addressMatchService.code(j.urlPathAppend(this.url,"geocoding"),e,t)}},{key:"decode",value:function(e,t){this._addressMatchService.decode(j.urlPathAppend(this.url,"geodecoding"),e,t)}}])&&Fp(t.prototype,r),n&&Fp(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Wp(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Yp=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.customParams=null,this.prjCoordSys=null,this.expectCount=1e5,this.networkType=Mt.LINE,this.queryOption=Ct.ATTRIBUTEANDGEOMETRY,this.queryParams=null,this.startRecord=0,this.holdTime=10,this.returnCustomResult=!1,this.returnFeatureWithFieldCaption=!1,j.extend(this,t),this.CLASS_NAME="SuperMap.QueryParameters")}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){var e=this;if(e.customParams=null,e.expectCount=null,e.networkType=null,e.queryOption=null,e.queryParams){for(var t=0,r=e.queryParams,n=r.length;t<n;t++)r[t].destroy();e.queryParams=null}e.startRecord=null,e.holdTime=null,e.returnCustomResult=null,e.prjCoordSys=null}}])&&Wp(t.prototype,r),n&&Wp(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Hp(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Xp=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.isQueryPoint=null,this.isQueryLine=null,this.isQueryRegion=null,this.attributeFilter=null,this.chartFeatureInfoSpecCode=null,j.extend(this,t),this.CLASS_NAME="SuperMap.ChartQueryFilterParameter"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){var e=this;e.isQueryPoint=null,e.isQueryLine=null,e.isQueryRegion=null,e.attributeFilter=null,e.chartFeatureInfoSpecCode=null}},{key:"toJson",value:function(){var e="";return e+='"isQueryPoint":'+this.isQueryPoint+",",e+='"isQueryLine":'+this.isQueryLine+",",e+='"isQueryRegion":'+this.isQueryRegion+",",this.attributeFilter&&(e+='"attributeFilter": "'+this.attributeFilter+'",'),e="{"+(e+='"chartFeatureInfoSpecCode":'+this.chartFeatureInfoSpecCode)+"}"}}])&&Hp(t.prototype,r),n&&Hp(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function qp(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Jp=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.queryMode=null,this.bounds=null,this.chartLayerNames=null,this.chartQueryFilterParameters=null,this.returnContent=!0,this.startRecord=0,this.expectCount=null,j.extend(this,t),this.CLASS_NAME="SuperMap.ChartQueryParameters"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){var e=this;e.queryMode=null,e.bounds=null,e.chartLayerNames=null,e.chartQueryFilterParameters=null,e.returnContent=!0,e.startRecord=0,e.expectCount=null}},{key:"getVariablesJson",value:function(){var e="";if(e+='"queryMode":"'+this.queryMode+'",',this.chartLayerNames&&this.chartLayerNames.length){for(var t=[],r=this.chartLayerNames.length,n=0;n<r;n++)t.push('"'+this.chartLayerNames[n]+'"');e+='"chartLayerNames":'+("["+t.join(",")+"]")+","}if("ChartBoundsQuery"===this.queryMode&&this.bounds&&(e+='"bounds":{"leftBottom":{"x":'+this.bounds.left+',"y":'+this.bounds.bottom+'},"rightTop":{"x":'+this.bounds.right+',"y":'+this.bounds.top+"}},"),this.chartQueryFilterParameters&&this.chartQueryFilterParameters.length){for(var o=[],i=this.chartQueryFilterParameters.length,a=0;a<i;a++){var s=this.chartQueryFilterParameters[a];s instanceof Xp&&o.push(s.toJson())}var u="["+o.join(",")+"]";u='"chartQueryParams":'+u+",",u+='"startRecord":'+this.startRecord+",",e+='"chartQueryParameters":'+(u="{"+(u+='"expectCount":'+this.expectCount)+"}")}return e="{"+e+"}"}}])&&qp(t.prototype,r),n&&qp(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Zp(e){"@babel/helpers - typeof";return(Zp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Kp(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Qp(e,t){return(Qp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function $p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=rd(e);if(t){var o=rd(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return ed(this,r)}}function ed(e,t){if(t&&("object"===Zp(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return td(e)}function td(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function rd(e){return(rd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var nd=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Qp(e,t)}(i,Nf);var t,r,n,o=$p(i);function i(e,t){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),r=o.call(this,e,t),t=t||{},r.returnContent=null,r.format=Et.GEOJSON,j.extend(td(r),t);var n=td(r);return t.format&&(n.format=t.format.toUpperCase()),n.url?(n.url=j.urlPathAppend(n.url,"queryResults"),r.CLASS_NAME="SuperMap.ChartQueryService",r):ed(r)}return t=i,(r=[{key:"destroy",value:function(){Nf.prototype.destroy.apply(this,arguments),this.returnContent=null,this.format=null}},{key:"processAsync",value:function(e){if(e instanceof Jp){var t,r=this;r.returnContent=e.returnContent,t=e.getVariablesJson(),r.returnContent&&(r.url=j.urlAppend(r.url,"returnContent=true")),r.request({method:"POST",data:t,scope:r,success:r.serviceProcessCompleted,failure:r.serviceProcessFailed})}}},{key:"serviceProcessCompleted",value:function(e,t){if((e=j.transformResult(e))&&e.recordsets&&this.format===Et.GEOJSON)for(var r=0,n=e.recordsets,o=n.length;r<o;r++)if(n[r].features){var i=new br;n[r].features=i.toGeoJSON(n[r].features)}this.events.triggerEvent("processCompleted",{result:e,options:t})}},{key:"getQueryParameters",value:function(e){return new Yp({queryMode:e.queryMode,bounds:e.bounds,chartLayerNames:e.chartLayerNames,chartQueryFilterParameters:e.chartQueryFilterParameters,returnContent:e.returnContent})}}])&&Kp(t.prototype,r),n&&Kp(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function od(e){"@babel/helpers - typeof";return(od="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function id(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ad(){return(ad="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ld(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function sd(e,t){return(sd=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function ud(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=ld(e);if(t){var o=ld(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===od(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function ld(e){return(ld=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var cd=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&sd(e,t)}(i,Nf);var t,r,n,o=ud(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t)).CLASS_NAME="SuperMap.ChartFeatureInfoSpecsService",r}return t=i,(r=[{key:"destroy",value:function(){ad(ld(i.prototype),"destroy",this).call(this),j.reset(this)}},{key:"processAsync",value:function(){var e=this;e.isTempLayers||j.urlPathAppend(e.url,"chartFeatureInfoSpecs"),e.request({method:"GET",params:null,scope:e,success:e.serviceProcessCompleted,failure:e.serviceProcessFailed})}}])&&id(t.prototype,r),n&&id(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function fd(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var hd=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.url=t,this.options=r||{}}var t,r,n;return t=e,(r=[{key:"queryChart",value:function(e,t,r){var n=this,o=e,i=n._processFormat(r);new nd(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,eventListeners:{scope:n,processCompleted:t,processFailed:t},format:i}).processAsync(o)}},{key:"getChartFeatureInfo",value:function(e){var t=this,r=j.urlPathAppend(t.url,"chartFeatureInfoSpecs");new cd(r,{proxy:t.options.proxy,withCredentials:t.options.withCredentials,crossOrigin:t.options.crossOrigin,headers:t.options.headers,eventListeners:{scope:t,processCompleted:e,processFailed:e}}).processAsync()}},{key:"_processFormat",value:function(e){return e||Et.GEOJSON}}])&&fd(t.prototype,r),n&&fd(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function pd(e){"@babel/helpers - typeof";return(pd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function dd(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function yd(e,t){return(yd=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function vd(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=gd(e);if(t){var o=gd(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===pd(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function gd(e){return(gd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var md=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&yd(e,t)}(i,Tf);var t,r,n,o=vd(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t))._chartService=new hd(e,t),r}return t=i,(r=[{key:"queryChart",value:function(e,t,r){this._chartService.queryChart(e,t,r)}},{key:"getChartFeatureInfo",value:function(e){this._chartService.getChartFeatureInfo(e)}},{key:"_processFormat",value:function(e){return e||Et.GEOJSON}}])&&dd(t.prototype,r),n&&dd(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function bd(e){"@babel/helpers - typeof";return(bd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function wd(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _d(e,t){return(_d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function xd(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Od(e);if(t){var o=Od(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===bd(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Sd(e)}(this,r)}}function Sd(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Od(e){return(Od=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Pd=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_d(e,t)}(i,Nf);var t,r,n,o=xd(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=t||{}).EVENT_TYPES=["broadcastSocketConnected","broadcastSocketClosed","broadcastSocketError","broadcastFailed","broadcastSucceeded","subscribeSocketConnected","subscribeSocketClosed","subscribeSocketError","messageSucceeded","setFilterParamSucceeded"],(r=o.call(this,e,t)).geometry=null,r.prjCoordSys=null,r.excludeField=null,j.extend(Sd(r),t),r.CLASS_NAME="SuperMap.DataFlowService",r}return t=i,(r=[{key:"initBroadcast",value:function(){var e=this;return this.broadcastWebSocket=this._connect(j.urlPathAppend(e.url,"broadcast")),this.broadcastWebSocket.onopen=function(t){e.broadcastWebSocket.isOpen=!0,t.eventType="broadcastSocketConnected",e.events.triggerEvent("broadcastSocketConnected",t)},this.broadcastWebSocket.onclose=function(t){e.broadcastWebSocket&&(e.broadcastWebSocket.isOpen=!1),t.eventType="broadcastSocketClosed",e.events.triggerEvent("broadcastSocketClosed",t)},this.broadcastWebSocket.onerror=function(t){t.eventType="broadcastSocketError",e.events.triggerEvent("broadcastSocketError",t)},this}},{key:"broadcast",value:function(e){this.broadcastWebSocket&&this.broadcastWebSocket.isOpen?(this.broadcastWebSocket.send(JSON.stringify(e)),this.events.triggerEvent("broadcastSucceeded")):this.events.triggerEvent("broadcastFailed")}},{key:"initSubscribe",value:function(){var e=this;return this.subscribeWebSocket=this._connect(j.urlPathAppend(e.url,"subscribe")),this.subscribeWebSocket.onopen=function(t){e.subscribeWebSocket.send(e._getFilterParams()),t.eventType="subscribeSocketConnected",e.events.triggerEvent("subscribeSocketConnected",t)},this.subscribeWebSocket.onclose=function(t){t.eventType="subscribeWebSocketClosed",e.events.triggerEvent("subscribeWebSocketClosed",t)},this.subscribeWebSocket.onerror=function(t){t.eventType="subscribeSocketError",e.events.triggerEvent("subscribeSocketError",t)},this.subscribeWebSocket.onmessage=function(t){e._onMessage(t)},this}},{key:"setExcludeField",value:function(e){return this.excludeField=e,this.subscribeWebSocket.send(this._getFilterParams()),this}},{key:"setGeometry",value:function(e){return this.geometry=e,this.subscribeWebSocket.send(this._getFilterParams()),this}},{key:"unSubscribe",value:function(){this.subscribeWebSocket&&(this.subscribeWebSocket.close(),this.subscribeWebSocket=null)}},{key:"unBroadcast",value:function(){this.broadcastWebSocket&&(this.broadcastWebSocket.close(),this.broadcastWebSocket=null)}},{key:"destroy",value:function(){Nf.prototype.destroy.apply(this,arguments);this.geometry=null,this.prjCoordSys=null,this.excludeField=null,this.unBroadcast(),this.unSubscribe()}},{key:"_getFilterParams",value:function(){var e={filterParam:{prjCoordSys:this.prjCoordSys,excludeField:this.excludeField,geometry:this.geometry}};return j.toJSON(e)}},{key:"_onMessage",value:function(e){if(e.data&&e.data.indexOf("filterParam")>=0){var t=JSON.parse(e.data);return e.filterParam=t,e.eventType="setFilterParamSucceeded",void this.events.triggerEvent("setFilterParamSucceeded",e)}var r=JSON.parse(e.data);e.featureResult=r,e.eventType="messageSucceeded",this.events.triggerEvent("messageSucceeded",e)}},{key:"_connect",value:function(e){return e=If.appendCredential(e),"WebSocket"in window?new WebSocket(e):"MozWebSocket"in window?new(0,window.MozWebSocket)(e):(console.log("no WebSocket"),null)}}])&&wd(t.prototype,r),n&&wd(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Ed(e){"@babel/helpers - typeof";return(Ed="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function kd(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Md(e,t){return(Md=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Cd(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Td(e);if(t){var o=Td(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===Ed(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return jd(e)}(this,r)}}function jd(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Td(e){return(Td=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ad=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Md(e,t)}(i,Tf);var t,r,n,o=Cd(i);function i(e,t){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=t||{}).projection&&(t.prjCoordSys=t.projection),(r=o.call(this,e,t)).dataFlow=new Pd(e,t),r.dataFlow.events.on({broadcastSocketConnected:r._defaultEvent,broadcastSocketError:r._defaultEvent,broadcastFailed:r._defaultEvent,broadcastSucceeded:r._defaultEvent,subscribeSocketConnected:r._defaultEvent,subscribeSocketError:r._defaultEvent,messageSucceeded:r._defaultEvent,setFilterParamSucceeded:r._defaultEvent,scope:jd(r)});var n=jd(r);return n.on("subscribeSocketConnected",function(e){n.fire("subscribesucceeded",e)}),r}return t=i,(r=[{key:"initBroadcast",value:function(){return this.dataFlow.initBroadcast(),this}},{key:"broadcast",value:function(e){this.dataFlow.broadcast(e)}},{key:"initSubscribe",value:function(){return this.dataFlow.initSubscribe(),this}},{key:"setExcludeField",value:function(e){return this.dataFlow.setExcludeField(e),this.options.excludeField=e,this}},{key:"setGeometry",value:function(e){return this.dataFlow.setGeometry(e),this.options.geometry=e,this}},{key:"unSubscribe",value:function(){this.dataFlow.unSubscribe()}},{key:"unBroadcast",value:function(){this.dataFlow.unBroadcast()}},{key:"_defaultEvent",value:function(e){this.fire(e.eventType||e.type,e)}}])&&kd(t.prototype,r),n&&kd(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Id(e){"@babel/helpers - typeof";return(Id="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Rd(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ld(){return(Ld="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Gd(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function Nd(e,t){return(Nd=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Dd(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Gd(e);if(t){var o=Gd(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Bd(this,r)}}function Bd(e,t){if(t&&("object"===Id(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Fd(e)}function Fd(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Gd(e){return(Gd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var zd=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Nd(e,t)}(i,Nf);var t,r,n,o=Dd(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),r=o.call(this,e,t),t?(r.datasource=null,r.dataset=null,r.eventCount=0,t&&j.extend(Fd(r),t),r.CLASS_NAME="SuperMap.DatasetService",r):Bd(r)}return t=i,(r=[{key:"destroy",value:function(){Ld(Gd(i.prototype),"destroy",this).call(this);this.datasource=null,this.dataset=null}},{key:"getDatasetsService",value:function(e,t){var r=j.urlPathAppend(this.url,"datasources/name/".concat(e,"/datasets"));this.processAsync(r,"GET",t)}},{key:"getDatasetService",value:function(e,t,r){var n=j.urlPathAppend(this.url,"datasources/name/".concat(e,"/datasets/name/").concat(t));this.processAsync(n,"GET",r)}},{key:"setDatasetService",value:function(e,t){if(e){var r=j.urlPathAppend(this.url,"datasources/name/".concat(e.datasourceName,"/datasets/name/").concat(e.datasetName));delete e.datasourceName,this.processAsync(r,"PUT",t,e)}}},{key:"deleteDatasetService",value:function(e,t,r){var n=j.urlPathAppend(this.url,"datasources/name/".concat(e,"/datasets/name/").concat(t));this.processAsync(n,"DELETE",r)}},{key:"processAsync",value:function(e,t,r,n){var o=++this.eventCount,i={scope:this,processCompleted:function(e){if(o===e.result.eventId&&r)return delete e.result.eventId,r(e),this.events&&this.events.un(i),!1},processFailed:function(e){if((o===e.error.eventId||o===e.eventId)&&r)return r(e),this.events&&this.events.un(i),!1}};this.events.on(i);var a=this,s={url:e,method:t,scope:a,success:function(e,t){e.eventId=o,a.serviceProcessCompleted(e,t)},failure:function(e,t){e.error&&(e.error.eventId=o),e.eventId=o,a.serviceProcessFailed(e,t)}};n&&(s.data=j.toJSON(n)),a.request(s)}}])&&Rd(t.prototype,r),n&&Rd(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Ud(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Vd=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.datasourceName=null,this.datasetName=null,this.datasetType=null,t&&j.extend(this,t),this.CLASS_NAME="SuperMap.CreateDatasetParameters")}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){this.datasourceName=null,this.datasetName=null,this.datasetType=null}}])&&Ud(t.prototype,r),n&&Ud(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Wd(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Yd=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.datasourceName=null,this.datasetName=null,this.isFileCache=null,this.description=null,this.prjCoordSys=null,this.charset=null,this.palette=null,this.noValue=null,t&&j.extend(this,t),this.CLASS_NAME="SuperMap.UpdateDatasetParameters")}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){var e=this;e.datasourceName=null,e.datasetName=null,e.isFileCache=null,e.prjCoordSys=null,e.charset=null,e.palette=null,e.noValue=null}}])&&Wd(t.prototype,r),n&&Wd(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Hd(e){"@babel/helpers - typeof";return(Hd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Xd(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function qd(e,t){return(qd=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Jd(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Zd(e);if(t){var o=Zd(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===Hd(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function Zd(e){return(Zd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Kd=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&qd(e,t)}(i,Tf);var t,r,n,o=Jd(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t))._datasetService=new zd(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers}),r}return t=i,(r=[{key:"getDatasets",value:function(e,t){e&&this._datasetService.getDatasetsService(e,t)}},{key:"getDataset",value:function(e,t,r){e&&t&&this._datasetService.getDatasetService(e,t,r)}},{key:"setDataset",value:function(e,t){if(e instanceof Vd||e instanceof Yd){if(e instanceof Vd)var r={datasetType:e.datasetType,datasetName:e.datasetName,datasourceName:e.datasourceName};else e instanceof Yd&&(r={datasetName:e.datasetName,datasourceName:e.datasourceName,isFileCache:e.isFileCache,description:e.description,prjCoordSys:e.prjCoordSys,charset:e.charset});this._datasetService.setDatasetService(r,t)}}},{key:"deleteDataset",value:function(e,t,r){this._datasetService.deleteDatasetService(e,t,r)}}])&&Xd(t.prototype,r),n&&Xd(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Qd(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var $d=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.datasourceName=null,this.description=null,this.coordUnit=null,this.distanceUnit=null,t&&j.extend(this,t),this.CLASS_NAME="SuperMap.SetDatasourceParameters")}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){this.datasourceName=null,this.description=null,this.coordUnit=null,this.distanceUnit=null}}])&&Qd(t.prototype,r),n&&Qd(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function ey(e){"@babel/helpers - typeof";return(ey="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ty(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ry(){return(ry="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ay(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function ny(e,t){return(ny=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function oy(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=ay(e);if(t){var o=ay(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===ey(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return iy(e)}(this,r)}}function iy(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ay(e){return(ay=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var sy=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ny(e,t)}(i,Nf);var t,r,n,o=oy(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),r=o.call(this,e,t),t&&j.extend(iy(r),t),r.eventCount=0,r.CLASS_NAME="SuperMap.DatasourceService",r}return t=i,(r=[{key:"destroy",value:function(){this.eventCount=0,ry(ay(i.prototype),"destroy",this).call(this)}},{key:"getDatasourceService",value:function(e,t){var r=j.urlPathAppend(this.url,"datasources/name/".concat(e));this.processAsync(r,"GET",t)}},{key:"getDatasourcesService",value:function(e){var t=j.urlPathAppend(this.url,"datasources");this.processAsync(t,"GET",e)}},{key:"setDatasourceService",value:function(e,t){if(e){var r=j.urlPathAppend(this.url,"datasources/name/".concat(e.datasourceName));this.processAsync(r,"PUT",t,e)}}},{key:"processAsync",value:function(e,t,r,n){var o=++this.eventCount,i={scope:this,processCompleted:function(e){if(o===e.result.eventId&&r)return delete e.result.eventId,r(e),this.events&&this.events.un(i),!1},processFailed:function(e){if((o===e.error.eventId||o===e.eventId)&&r)return r(e),this.events&&this.events.un(i),!1}};this.events.on(i);var a={url:e,method:t,scope:this,success:function(e,t){e.eventId=o,this.serviceProcessCompleted(e,t)},failure:function(e,t){e.error&&(e.error.eventId=o),e.eventId=o,this.serviceProcessFailed(e,t)}};n&&(a.data=j.toJSON(n)),this.request(a)}}])&&ty(t.prototype,r),n&&ty(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function uy(e){"@babel/helpers - typeof";return(uy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ly(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function cy(e,t){return(cy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function fy(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=hy(e);if(t){var o=hy(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===uy(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function hy(e){return(hy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var py=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&cy(e,t)}(i,Tf);var t,r,n,o=fy(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t))._datasourceService=new sy(r.url,{proxy:r.proxy,withCredentials:r.withCredentials,crossOrigin:r.crossOrigin,headers:r.headers}),r}return t=i,(r=[{key:"getDatasources",value:function(e){this._datasourceService.getDatasourcesService(e)}},{key:"getDatasource",value:function(e,t){e&&this._datasourceService.getDatasourceService(e,t)}},{key:"setDatasource",value:function(e,t){if(e instanceof $d){var r={description:e.description,coordUnit:e.coordUnit,distanceUnit:e.distanceUnit,datasourceName:e.datasourceName};this._datasourceService.setDatasourceService(r,t)}}}])&&ly(t.prototype,r),n&&ly(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function dy(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var yy=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.dataSourceName=null,this.dataSetName=null,this.features=null,this.editType=Zt.ADD,this.IDs=null,this.returnContent=!1,this.isUseBatch=!1,j.extend(this,t),this.CLASS_NAME="SuperMap.EditFeaturesParameters"}var t,r,n;return t=e,n=[{key:"toJsonParameters",value:function(e){var t,r,n;if(e.editType===Zt.DELETE){if(null===e.IDs)return;n={ids:e.IDs}}else if(n=[],e.features){r=e.features.length;for(var o=0;o<r;o++)(t=e.features[o]).geometry=hr.fromGeometry(t.geometry),n.push(t)}return j.toJSON(n)}}],(r=[{key:"destroy",value:function(){var e=this;e.dataSourceName=null,e.dataSetName=null,e.features=null,e.editType=null,e.IDs=null,e.returnContent=null}}])&&dy(t.prototype,r),n&&dy(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function vy(e){"@babel/helpers - typeof";return(vy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function gy(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function my(){return(my="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=xy(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function by(e,t){return(by=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function wy(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=xy(e);if(t){var o=xy(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===vy(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _y(e)}(this,r)}}function _y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function xy(e){return(xy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Sy=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&by(e,t)}(i,Nf);var t,r,n,o=wy(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t)).returnContent=!1,r.isUseBatch=!1,t&&j.extend(_y(r),t),r.url=j.urlPathAppend(r.url,"features"),r.CLASS_NAME="SuperMap.EditFeaturesService",r}return t=i,(r=[{key:"destroy",value:function(){my(xy(i.prototype),"destroy",this).call(this);this.returnContent=null,this.isUseBatch=null,this.fromIndex=null,this.toIndex=null}},{key:"processAsync",value:function(e){if(e instanceof yy){var t=this,r="POST",n="",o=e.editType,i=null;if(t.returnContent=e.returnContent,t.isUseBatch=e.isUseBatch,i=yy.toJsonParameters(e),o===Zt.DELETE){i=n=j.toJSON(e.IDs);var a=j.urlAppend(t.url,j.getParameterString({ids:n}));Al.urlIsLong(a)?(t.url=j.urlAppend(t.url,j.getParameterString({_method:"DELETE"})),r="POST"):(t.url=a,r="DELETE")}else o===Zt.UPDATE?r="PUT":(t.isUseBatch&&(t.url=j.urlAppend(t.url,"isUseBatch=".concat(t.isUseBatch)),t.returnContent=!1),t.returnContent&&(t.url=j.urlAppend(t.url,"returnContent=true"),r="POST"));t.request({method:r,data:i,scope:t,success:t.serviceProcessCompleted,failure:t.serviceProcessFailed})}}}])&&gy(t.prototype,r),n&&gy(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Oy(e){"@babel/helpers - typeof";return(Oy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Py(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ey(){return(Ey="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=jy(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function ky(e,t){return(ky=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function My(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=jy(e);if(t){var o=jy(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===Oy(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Cy(e)}(this,r)}}function Cy(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function jy(e){return(jy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ty=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ky(e,t)}(i,Nf);var t,r,n,o=My(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),r=o.call(this,e,t),t=t||{},r.returnContent=!0,r.fromIndex=0,r.toIndex=19,r.hasGeometry=!0,r.maxFeatures=null,r.format=Et.GEOJSON,j.extend(Cy(r),t),r.url=j.urlPathAppend(r.url,"featureResults"),r.CLASS_NAME="SuperMap.GetFeaturesServiceBase",r}return t=i,(r=[{key:"destroy",value:function(){Ey(jy(i.prototype),"destroy",this).call(this);var e=this;e.returnContent=null,e.fromIndex=null,e.toIndex=null,e.maxFeatures=null,e.format=null,e.hasGeometry=null}},{key:"processAsync",value:function(e){if(e){var t,r=this,n=!0;r.returnContent=e.returnContent,r.fromIndex=e.fromIndex,r.toIndex=e.toIndex,r.maxFeatures=e.maxFeatures,r.hasGeometry=e.hasGeometry,r.returnContent&&(n=!1),null!=r.fromIndex&&null!=r.toIndex&&!isNaN(r.fromIndex)&&!isNaN(r.toIndex)&&r.fromIndex>=0&&r.toIndex>=0&&!n&&(r.url=j.urlAppend(r.url,"fromIndex=".concat(r.fromIndex,"&toIndex=").concat(r.toIndex))),e.returnCountOnly&&(r.url=j.urlAppend(r.url,"&returnCountOnly="+e.returnContent)),t=r.getJsonParameters(e),r.request({method:"POST",data:t,scope:r,success:r.serviceProcessCompleted,failure:r.serviceProcessFailed})}}},{key:"serviceProcessCompleted",value:function(e,t){if(e=j.transformResult(e),this.format===Et.GEOJSON&&e.features){var r=new br;e.features=r.toGeoJSON(e.features)}this.events.triggerEvent("processCompleted",{result:e,options:t})}},{key:"dataFormat",value:function(){return[Et.GEOJSON,Et.ISERVER,Et.FGB]}}])&&Py(t.prototype,r),n&&Py(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Ay(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Iy=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.attributeFilter=null,this.name=null,this.joinItems=null,this.linkItems=null,this.ids=null,this.orderBy=null,this.groupBy=null,this.fields=null,t&&j.extend(this,t),this.CLASS_NAME="SuperMap.FilterParameter"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){var e=this;if(e.attributeFilter=null,e.name=null,e.joinItems){for(var t=0,r=e.joinItems,n=r.length;t<n;t++)r[t].destroy();e.joinItems=null}if(e.linkItems){for(var o=0,i=e.linkItems,a=i.length;o<a;o++)i[o].destroy();e.linkItems=null}e.ids=null,e.orderBy=null,e.groupBy=null,e.fields=null}}])&&Ay(t.prototype,r),n&&Ay(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Ry(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Ly=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.datasetNames=null,this.targetEpsgCode=null,this.targetPrj=null,this.returnContent=!0,this.fromIndex=0,this.toIndex=19,this.returnCountOnly=!1,this.maxFeatures=null,this.hasGeometry=!0,this.aggregations=null,j.extend(this,t),this.CLASS_NAME="SuperMap.GetFeaturesParametersBase"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){var e=this;e.datasetNames=null,e.returnContent=null,e.fromIndex=null,e.toIndex=null,e.hasGeometry=null,e.maxFeatures=null,e.targetEpsgCode=null,e.targetPrj=null,e.aggregation&&(e.aggregation=null)}}])&&Ry(t.prototype,r),n&&Ry(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Ny(e){"@babel/helpers - typeof";return(Ny="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Dy(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function By(){return(By="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Uy(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function Fy(e,t){return(Fy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Gy(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Uy(e);if(t){var o=Uy(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===Ny(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return zy(e)}(this,r)}}function zy(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Uy(e){return(Uy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Vy=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Fy(e,t)}(i,Ly);var t,r,n,o=Gy(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).getFeatureMode="ID",t.IDs=null,t.fields=null,j.extend(zy(t),e),t.CLASS_NAME="SuperMap.GetFeaturesByIDsParameters",t}return t=i,n=[{key:"toJsonParameters",value:function(e){var t,r;return t={datasetNames:e.datasetNames,getFeatureMode:"ID",ids:e.IDs},e.fields&&((r=new Iy).name=e.datasetNames,r.fields=e.fields,t.queryParameter=r),e.targetEpsgCode&&(t.targetEpsgCode=e.targetEpsgCode),"boolean"==typeof e.hasGeometry&&(t.hasGeometry=e.hasGeometry),!e.targetEpsgCode&&e.targetPrj&&(t.targetPrj=e.targetPrj),e.aggregations&&(t.aggregations=e.aggregations),j.toJSON(t)}}],(r=[{key:"destroy",value:function(){By(Uy(i.prototype),"destroy",this).call(this);var e=this;if(e.IDs=null,e.getFeatureMode=null,e.fields){for(;e.fields.length>0;)e.fields.pop();e.fields=null}}}])&&Dy(t.prototype,r),n&&Dy(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Wy(e){"@babel/helpers - typeof";return(Wy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Yy(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Hy(){return(Hy="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Jy(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function Xy(e,t){return(Xy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function qy(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Jy(e);if(t){var o=Jy(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===Wy(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function Jy(e){return(Jy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Zy=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Xy(e,t)}(i,Ty);var t,r,n,o=qy(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t)).CLASS_NAME="SuperMap.GetFeaturesByIDsService",r}return t=i,(r=[{key:"destroy",value:function(){Hy(Jy(i.prototype),"destroy",this).call(this)}},{key:"getJsonParameters",value:function(e){return Vy.toJsonParameters(e)}}])&&Yy(t.prototype,r),n&&Yy(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Ky(e){"@babel/helpers - typeof";return(Ky="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Qy(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function $y(){return($y="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=nv(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function ev(e,t){return(ev=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function tv(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=nv(e);if(t){var o=nv(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===Ky(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return rv(e)}(this,r)}}function rv(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function nv(e){return(nv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ov=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ev(e,t)}(i,Ly);var t,r,n,o=tv(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).getFeatureMode="SQL",t.queryParameter=null,j.extend(rv(t),e),t.CLASS_NAME="SuperMap.GetFeaturesBySQLParameters",t}return t=i,n=[{key:"toJsonParameters",value:function(e){var t={datasetNames:e.datasetNames,getFeatureMode:"SQL",queryParameter:e.queryParameter};return e.maxFeatures&&!isNaN(e.maxFeatures)&&(t.maxFeatures=e.maxFeatures),"boolean"==typeof e.hasGeometry&&(t.hasGeometry=e.hasGeometry),e.aggregations&&(t.aggregations=e.aggregations),e.targetEpsgCode&&(t.targetEpsgCode=e.targetEpsgCode),!e.targetEpsgCode&&e.targetPrj&&(t.targetPrj=e.targetPrj),e.aggregations&&(t.aggregations=e.aggregations),j.toJSON(t)}}],(r=[{key:"destroy",value:function(){$y(nv(i.prototype),"destroy",this).call(this);this.getFeatureMode=null,this.queryParameter&&(this.queryParameter.destroy(),this.queryParameter=null)}}])&&Qy(t.prototype,r),n&&Qy(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function iv(e){"@babel/helpers - typeof";return(iv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function av(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function sv(){return(sv="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=cv(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function uv(e,t){return(uv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function lv(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=cv(e);if(t){var o=cv(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===iv(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function cv(e){return(cv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var fv=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&uv(e,t)}(i,Ty);var t,r,n,o=lv(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t)).CLASS_NAME="SuperMap.GetFeaturesBySQLService",r}return t=i,(r=[{key:"destroy",value:function(){sv(cv(i.prototype),"destroy",this).call(this)}},{key:"getJsonParameters",value:function(e){return ov.toJsonParameters(e)}}])&&av(t.prototype,r),n&&av(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function hv(e){"@babel/helpers - typeof";return(hv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pv(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function dv(){return(dv="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=mv(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function yv(e,t){return(yv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function vv(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=mv(e);if(t){var o=mv(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===hv(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return gv(e)}(this,r)}}function gv(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function mv(e){return(mv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var bv=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&yv(e,t)}(i,Ly);var t,r,n,o=vv(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).getFeatureMode=i.getFeatureMode.BOUNDS,t.bounds=null,t.fields=null,t.attributeFilter=null,t.spatialQueryMode=jt.CONTAIN,j.extend(gv(t),e),t.CLASS_NAME="SuperMap.GetFeaturesByBoundsParameters",t}return t=i,n=[{key:"toJsonParameters",value:function(e){var t,r,n;return r={leftBottom:{x:e.bounds.left,y:e.bounds.bottom},rightTop:{x:e.bounds.right,y:e.bounds.top}},n={datasetNames:e.datasetNames,getFeatureMode:i.getFeatureMode.BOUNDS,bounds:r,spatialQueryMode:e.spatialQueryMode},e.fields&&((t=new Iy).name=e.datasetNames,t.fields=e.fields,n.queryParameter=t),e.attributeFilter&&(n.attributeFilter=e.attributeFilter,n.getFeatureMode=i.getFeatureMode.BOUNDS_ATTRIBUTEFILTER),e.maxFeatures&&!isNaN(e.maxFeatures)&&(n.maxFeatures=e.maxFeatures),"boolean"==typeof e.hasGeometry&&(n.hasGeometry=e.hasGeometry),e.targetEpsgCode&&(n.targetEpsgCode=e.targetEpsgCode),!e.targetEpsgCode&&e.targetPrj&&(n.targetPrj=e.targetPrj),e.aggregations&&(n.aggregations=e.aggregations),j.toJSON(n)}}],(r=[{key:"destroy",value:function(){dv(mv(i.prototype),"destroy",this).call(this);var e=this;if(e.bounds&&(e.bounds.destroy(),e.bounds=null),e.fields){for(;e.fields.length>0;)e.fields.pop();e.fields=null}e.attributeFilter=null,e.spatialQueryMode=null,e.getFeatureMode=null}}])&&pv(t.prototype,r),n&&pv(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function wv(e){"@babel/helpers - typeof";return(wv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _v(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function xv(){return(xv="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Pv(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function Sv(e,t){return(Sv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Ov(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Pv(e);if(t){var o=Pv(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===wv(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function Pv(e){return(Pv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}bv.getFeatureMode={BOUNDS:"BOUNDS",BOUNDS_ATTRIBUTEFILTER:"BOUNDS_ATTRIBUTEFILTER"};var Ev=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Sv(e,t)}(i,Ty);var t,r,n,o=Ov(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t)).CLASS_NAME="SuperMap.GetFeaturesByBoundsService",r}return t=i,(r=[{key:"destroy",value:function(){xv(Pv(i.prototype),"destroy",this).call(this)}},{key:"getJsonParameters",value:function(e){return bv.toJsonParameters(e)}}])&&_v(t.prototype,r),n&&_v(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function kv(e){"@babel/helpers - typeof";return(kv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Mv(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Cv(){return(Cv="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Iv(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function jv(e,t){return(jv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Tv(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Iv(e);if(t){var o=Iv(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===kv(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Av(e)}(this,r)}}function Av(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Iv(e){return(Iv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Rv=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&jv(e,t)}(i,Ly);var t,r,n,o=Tv(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).bufferDistance=null,t.attributeFilter=null,t.geometry=null,t.fields=null,j.extend(Av(t),e),t.CLASS_NAME="SuperMap.GetFeaturesByBufferParameters",t}return t=i,n=[{key:"toJsonParameters",value:function(e){var t,r,n;return n=hr.fromGeometry(e.geometry),r={datasetNames:e.datasetNames,getFeatureMode:"BUFFER",bufferDistance:e.bufferDistance,geometry:n},e.fields&&((t=new Iy).name=e.datasetNames,t.fields=e.fields,r.queryParameter=t),e.attributeFilter&&(r.attributeFilter=e.attributeFilter,r.getFeatureMode="BUFFER_ATTRIBUTEFILTER"),e.maxFeatures&&!isNaN(e.maxFeatures)&&(r.maxFeatures=e.maxFeatures),"boolean"==typeof e.hasGeometry&&(r.hasGeometry=e.hasGeometry),e.targetEpsgCode&&(r.targetEpsgCode=e.targetEpsgCode),!e.targetEpsgCode&&e.targetPrj&&(r.targetPrj=e.targetPrj),j.toJSON(r)}}],(r=[{key:"destroy",value:function(){Cv(Iv(i.prototype),"destroy",this).call(this);var e=this;if(e.bufferDistance=null,e.attributeFilter=null,e.fields){for(;e.fields.length>0;)e.fields.pop();e.fields=null}e.geometry&&(e.geometry.destroy(),e.geometry=null)}}])&&Mv(t.prototype,r),n&&Mv(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Lv(e){"@babel/helpers - typeof";return(Lv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Nv(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Dv(){return(Dv="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Gv(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function Bv(e,t){return(Bv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Fv(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Gv(e);if(t){var o=Gv(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===Lv(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function Gv(e){return(Gv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var zv=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Bv(e,t)}(i,Ty);var t,r,n,o=Fv(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t)).CLASS_NAME="SuperMap.GetFeaturesByBufferService",r}return t=i,(r=[{key:"destroy",value:function(){Dv(Gv(i.prototype),"destroy",this).call(this)}},{key:"getJsonParameters",value:function(e){if(e instanceof Rv)return Rv.toJsonParameters(e)}}])&&Nv(t.prototype,r),n&&Nv(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Uv(e){"@babel/helpers - typeof";return(Uv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Vv(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Wv(){return(Wv="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=qv(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function Yv(e,t){return(Yv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Hv(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=qv(e);if(t){var o=qv(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===Uv(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Xv(e)}(this,r)}}function Xv(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function qv(e){return(qv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Jv=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Yv(e,t)}(i,Ly);var t,r,n,o=Hv(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).getFeatureMode="SPATIAL",t.geometry=null,t.fields=null,t.attributeFilter=null,t.spatialQueryMode=jt.CONTAIN,j.extend(Xv(t),e),t.CLASS_NAME="SuperMap.GetFeaturesByGeometryParameters",t}return t=i,n=[{key:"toJsonParameters",value:function(e){var t,r,n;return r=hr.fromGeometry(e.geometry),n={datasetNames:e.datasetNames,getFeatureMode:"SPATIAL",geometry:r,spatialQueryMode:e.spatialQueryMode},e.fields&&((t=new Iy).name=e.datasetNames,t.fields=e.fields,n.queryParameter=t),e.attributeFilter&&(n.attributeFilter=e.attributeFilter,n.getFeatureMode="SPATIAL_ATTRIBUTEFILTER"),e.maxFeatures&&!isNaN(e.maxFeatures)&&(n.maxFeatures=e.maxFeatures),"boolean"==typeof e.hasGeometry&&(n.hasGeometry=e.hasGeometry),e.targetEpsgCode&&(n.targetEpsgCode=e.targetEpsgCode),!e.targetEpsgCode&&e.targetPrj&&(n.targetPrj=e.targetPrj),e.aggregations&&(n.aggregations=e.aggregations),j.toJSON(n)}}],(r=[{key:"destroy",value:function(){Wv(qv(i.prototype),"destroy",this).call(this);var e=this;if(e.geometry&&(e.geometry.destroy(),e.geometry=null),e.fields){for(;e.fields.length>0;)e.fields.pop();e.fields=null}e.attributeFilter=null,e.spatialQueryMode=null,e.getFeatureMode=null}}])&&Vv(t.prototype,r),n&&Vv(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Zv(e){"@babel/helpers - typeof";return(Zv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Kv(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Qv(){return(Qv="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=tg(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function $v(e,t){return($v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function eg(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=tg(e);if(t){var o=tg(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===Zv(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function tg(e){return(tg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var rg=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$v(e,t)}(i,Ty);var t,r,n,o=eg(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t)).CLASS_NAME="SuperMap.GetFeaturesByGeometryService",r}return t=i,(r=[{key:"destroy",value:function(){Qv(tg(i.prototype),"destroy",this).call(this)}},{key:"getJsonParameters",value:function(e){return Jv.toJsonParameters(e)}}])&&Kv(t.prototype,r),n&&Kv(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function ng(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var og=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.url=t,this.options=r||{}}var t,r,n;return t=e,(r=[{key:"getFeaturesByIDs",value:function(e,t,r){var n=this;new Zy(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,eventListeners:{processCompleted:t,processFailed:t},format:r}).processAsync(e)}},{key:"getFeaturesByBounds",value:function(e,t,r){var n=this;new Ev(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,eventListeners:{processCompleted:t,processFailed:t},format:n._processFormat(r)}).processAsync(e)}},{key:"getFeaturesByBuffer",value:function(e,t,r){var n=this;new zv(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,eventListeners:{processCompleted:t,processFailed:t},format:n._processFormat(r)}).processAsync(e)}},{key:"getFeaturesBySQL",value:function(e,t,r){var n=this;new fv(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,eventListeners:{processCompleted:t,processFailed:t},format:n._processFormat(r)}).processAsync(e)}},{key:"getFeaturesByGeometry",value:function(e,t,r){var n=this;new rg(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,eventListeners:{processCompleted:t,processFailed:t},format:n._processFormat(r)}).processAsync(e)}},{key:"editFeatures",value:function(e,t){if(e&&e.dataSourceName&&e.dataSetName){var r=this,n=r.url,o=e.dataSourceName,i=e.dataSetName;n=j.urlPathAppend(n,"datasources/"+o+"/datasets/"+i),new Sy(n,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,eventListeners:{processCompleted:t,processFailed:t}}).processAsync(e)}}},{key:"_processFormat",value:function(e){return e||Et.GEOJSON}}])&&ng(t.prototype,r),n&&ng(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function ig(e){"@babel/helpers - typeof";return(ig="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ag(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function sg(e,t){return(sg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function ug(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=lg(e);if(t){var o=lg(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===ig(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function lg(e){return(lg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var cg=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&sg(e,t)}(a,Tf);var t,r,n,i=ug(a);function a(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(r=i.call(this,e,t))._featureService=new og(e,t),r}return t=a,(r=[{key:"getFeaturesByIDs",value:function(e,t,r){e=this._processParams(e),this._featureService.getFeaturesByIDs(e,t,r)}},{key:"getFeaturesByBounds",value:function(e,t,r){e=this._processParams(e),this._featureService.getFeaturesByBounds(e,t,r)}},{key:"getFeaturesByBuffer",value:function(e,t,r){e=this._processParams(e),this._featureService.getFeaturesByBuffer(e,t,r)}},{key:"getFeaturesBySQL",value:function(e,t,r){e=this._processParams(e),this._featureService.getFeaturesBySQL(e,t,r)}},{key:"getFeaturesByGeometry",value:function(e,t,r){e=this._processParams(e),this._featureService.getFeaturesByGeometry(e,t,r)}},{key:"editFeatures",value:function(e,t){if(e&&e.dataSourceName&&e.dataSetName){var r=this,n=r.url,o=e.dataSourceName,i=e.dataSetName;n=j.urlPathAppend(n,"datasources/"+o+"/datasets/"+i),new Sy(n,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,eventListeners:{processCompleted:t,processFailed:t}}).processAsync(r._processParams(e))}}},{key:"_processParams",value:function(e){if(!e)return{};var t=this;if(e.returnContent=null==e.returnContent||e.returnContent,e.fromIndex=e.fromIndex?e.fromIndex:0,e.toIndex=0===e.toIndex?0:e.toIndex?e.toIndex:-1,e.bounds&&(e.bounds=xr.toSuperMapBounds(e.bounds)),e.editType&&(e.editType=e.editType.toLowerCase()),e.geometry&&(e.geometry instanceof o().LngLatBounds?(e.geometry=xr.toSuperMapPolygon(e.geometry),e.geometry.SRID=4326):e.geometry instanceof o().Point?e.geometry=new V(e.geometry.x,e.geometry.y):e.geometry instanceof o().LngLat?(e.geometry=new V(e.geometry.lng,e.geometry.lat),e.geometry.SRID=4326):e.geometry instanceof m||(e.geometry=xr.toSuperMapGeometry(e.geometry))),e.features){var r=[];xr.isArray(e.features)?e.features.map(function(e){return r.push(t._createServerFeature(e)),r}):r.push(t._createServerFeature(e.features)),e.features=r}return e}},{key:"_createServerFeature",value:function(e){var t={},r=[],n=[],o=e.properties;for(var i in o)r.push(i),n.push(o[i]);return t.fieldNames=r,t.fieldValues=n,e.id&&(t.id=e.id),t.geometry=xr.toSuperMapGeometry(e),t}}])&&ag(t.prototype,r),n&&ag(t,n),Object.defineProperty(t,"prototype",{writable:!1}),a}();function fg(e){"@babel/helpers - typeof";return(fg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function hg(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function pg(){return(pg="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=gg(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function dg(e,t){return(dg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function yg(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=gg(e);if(t){var o=gg(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===fg(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return vg(e)}(this,r)}}function vg(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function gg(e){return(gg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var mg=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&dg(e,t)}(i,Nf);var t,r,n,o=yg(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t)).datasource=null,r.dataset=null,t&&j.extend(vg(r),t),r.CLASS_NAME="SuperMap.GetFieldsService",r}return t=i,(r=[{key:"destroy",value:function(){pg(gg(i.prototype),"destroy",this).call(this);this.datasource=null,this.dataset=null}},{key:"processAsync",value:function(){var e=this;e.url=j.urlPathAppend(e.url,"datasources/".concat(e.datasource,"/datasets/").concat(e.dataset,"/fields")),e.request({method:"GET",data:null,scope:e,success:e.serviceProcessCompleted,failure:e.serviceProcessFailed})}}])&&hg(t.prototype,r),n&&hg(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function bg(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var wg=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.datasource=null,this.dataset=null,t&&j.extend(this,t),this.CLASS_NAME="SuperMap.FieldParameters"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){this.datasource=null,this.dataset=null}}])&&bg(t.prototype,r),n&&bg(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function _g(e){"@babel/helpers - typeof";return(_g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xg(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Sg(e,t){return(Sg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Og(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Eg(e);if(t){var o=Eg(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===_g(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Pg(e)}(this,r)}}function Pg(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Eg(e){return(Eg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var kg=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Sg(e,t)}(i,wg);var t,r,n,o=Og(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).fieldName=null,t.statisticMode=null,e&&j.extend(Pg(t),e),t.CLASS_NAME="SuperMap.FieldStatisticsParameters",t}return t=i,(r=[{key:"destroy",value:function(){this.fieldName=null,this.statisticMode=null}}])&&xg(t.prototype,r),n&&xg(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Mg(e){"@babel/helpers - typeof";return(Mg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Cg(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function jg(){return(jg="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Rg(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function Tg(e,t){return(Tg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Ag(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Rg(e);if(t){var o=Rg(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===Mg(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ig(e)}(this,r)}}function Ig(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Rg(e){return(Rg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Lg=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Tg(e,t)}(i,Nf);var t,r,n,o=Ag(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t)).datasource=null,r.dataset=null,r.field=null,r.statisticMode=null,t&&j.extend(Ig(r),t),r.CLASS_NAME="SuperMap.FieldStatisticService",r}return t=i,(r=[{key:"destroy",value:function(){jg(Rg(i.prototype),"destroy",this).call(this);this.datasource=null,this.dataset=null,this.field=null,this.statisticMode=null}},{key:"processAsync",value:function(){var e=this,t="datasources/"+e.datasource+"/datasets/"+e.dataset+"/fields/"+e.field+"/"+e.statisticMode;e.url=j.urlPathAppend(e.url,t),e.request({method:"GET",data:null,scope:e,success:e.serviceProcessCompleted,failure:e.serviceProcessFailed})}}])&&Cg(t.prototype,r),n&&Cg(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Ng(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Dg=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.url=t,this.options=r||{}}var t,r,n;return t=e,(r=[{key:"getFields",value:function(e,t){var r=this;new mg(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,eventListeners:{scope:r,processCompleted:t,processFailed:t},datasource:e.datasource,dataset:e.dataset}).processAsync()}},{key:"getFieldStatisticsInfo",value:function(e,t){if(e instanceof kg){var r=this,n=e.fieldName,o=e.statisticMode;o&&!Array.isArray(o)&&(o=[o]),r.currentStatisticResult={fieldName:n},r._statisticsCallback=t,o.forEach(function(t){r.currentStatisticResult[t]=null,r._fieldStatisticRequest(e.datasource,e.dataset,n,t)})}}},{key:"_fieldStatisticRequest",value:function(e,t,r,n){var o=this;new Lg(o.url,{eventListeners:{scope:o,processCompleted:o._processCompleted.bind(o),processFailed:o._statisticsCallback},datasource:e,dataset:t,field:r,statisticMode:n,crossOrigin:o.options.crossOrigin,headers:o.options.headers}).processAsync()}},{key:"_processCompleted",value:function(e,t){var r=this,n=!0,o=e.result;for(var i in this.currentStatisticResult&&null==r.currentStatisticResult[o.mode]&&(this.currentStatisticResult[o.mode]=o.result),r.currentStatisticResult)if(null==r.currentStatisticResult[i]){n=!1;break}n&&r._statisticsCallback({result:r.currentStatisticResult,options:t})}}])&&Ng(t.prototype,r),n&&Ng(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Bg(e){"@babel/helpers - typeof";return(Bg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Fg(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Gg(e,t){return(Gg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function zg(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Ug(e);if(t){var o=Ug(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===Bg(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function Ug(e){return(Ug=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Vg=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Gg(e,t)}(i,Tf);var t,r,n,o=zg(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t))._fieldService=new Dg(e,t),r}return t=i,(r=[{key:"getFields",value:function(e,t){this._fieldService.getFields(e,t)}},{key:"getFieldStatisticsInfo",value:function(e,t){this._fieldService.getFieldStatisticsInfo(e,t)}}])&&Fg(t.prototype,r),n&&Fg(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Wg(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Yg=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.datasetName=null,this.dataSourceName=null,this.X=null,this.Y=null,j.extend(this,t),this.CLASS_NAME="SuperMap.GetGridCellInfosParameters"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){this.datasetName=null,this.dataSourceName=null,this.X=null,this.Y=null}}])&&Wg(t.prototype,r),n&&Wg(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Hg(e){"@babel/helpers - typeof";return(Hg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Xg(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function qg(){return(qg="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Qg(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function Jg(e,t){return(Jg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Zg(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Qg(e);if(t){var o=Qg(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===Hg(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Kg(e)}(this,r)}}function Kg(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Qg(e){return(Qg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var $g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Jg(e,t)}(i,Nf);var t,r,n,o=Zg(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t)).datasetName=null,r.dataSourceName=null,r.datasetType=null,r.X=null,r.Y=null,t&&j.extend(Kg(r),t),r.eventCount=0,r.CLASS_NAME="SuperMap.GetGridCellInfosService",r}return t=i,(r=[{key:"destroy",value:function(){qg(Qg(i.prototype),"destroy",this).call(this);var e=this;e.X=null,e.Y=null,e.datasetName=null,e.dataSourceName=null,e.datasetType=null}},{key:"processAsync",value:function(e,t){if(e instanceof Yg){j.extend(this,e);var r=this;r.url=j.urlPathAppend(r.url,"datasources/".concat(r.dataSourceName,"/datasets/").concat(r.datasetName)),r.queryRequest(r.getDatasetInfoCompleted.bind(r),r.getDatasetInfoFailed.bind(r),t)}}},{key:"queryRequest",value:function(e,t,r){var n=++this.eventCount,o={scope:this,processCompleted:function(e){if(n===e.result.eventId&&r)return delete e.result.eventId,r(e),this.events&&this.events.un(o),!1},processFailed:function(e){if((n===e.error.eventId||n===e.eventId)&&r)return r(e),this.events&&this.events.un(o),!1}};this.events.on(o);this.request({method:"GET",data:null,scope:this,success:function(t,o){t.eventId=n,e(t,o,r)},failure:function(e,r){e.error&&(e.error.eventId=n),e.eventId=n,t(e,r)}})}},{key:"getDatasetInfoCompleted",value:function(e,t,r){e=j.transformResult(e),this.datasetType=e.datasetInfo.type,this.queryGridInfos(r)}},{key:"queryGridInfos",value:function(e){var t=this;t.url=j.urlPathAppend(t.url,"GRID"==t.datasetType?"gridValue":"imageValue"),null!=t.X&&null!=t.Y&&(t.url=j.urlAppend(t.url,"x=".concat(t.X,"&y=").concat(t.Y))),t.queryRequest(t.serviceProcessCompleted.bind(t),t.serviceProcessFailed.bind(t),e)}},{key:"getDatasetInfoFailed",value:function(e,t){this.serviceProcessFailed(e,t)}}])&&Xg(t.prototype,r),n&&Xg(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function em(e){"@babel/helpers - typeof";return(em="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tm(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function rm(e,t){return(rm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function nm(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=om(e);if(t){var o=om(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===em(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function om(e){return(om=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var im=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&rm(e,t)}(i,Tf);var t,r,n,o=nm(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t))._gridCellQueryService=new $g(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers}),r}return t=i,(r=[{key:"getGridCellInfos",value:function(e,t){if(!e)return null;this._gridCellQueryService.processAsync(e,t)}}])&&tm(t.prototype,r),n&&tm(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function am(e){"@babel/helpers - typeof";return(am="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function sm(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function um(e,t){return(um=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function lm(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=cm(e);if(t){var o=cm(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===am(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function cm(e){return(cm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var fm=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&um(e,t)}(i,Nf);var t,r,n,o=lm(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=t||{}).EVENT_TYPES=["processCompleted","processFailed","processRunning"],(r=o.call(this,e,t)).CLASS_NAME="SuperMap.GeoprocessingService",r.headers={},r.crossOrigin=!0,r.eventCount=0,r}return t=i,(r=[{key:"getTools",value:function(e){this._processAsync({url:"".concat(this.url,"/list"),callback:e})}},{key:"getTool",value:function(e,t){this._processAsync({url:"".concat(this.url,"/").concat(e),callback:t})}},{key:"execute",value:function(e,t,r,n){var o={parameter:t=t||null,environment:r=r||null};this._processAsync({url:"".concat(this.url,"/").concat(e,"/execute"),executeParamter:o,callback:n})}},{key:"submitJob",value:function(e,t,r,n){t=t||null,r=r||null;var o=JSON.stringify({parameter:t,environments:r});this._processAsync({url:"".concat(this.url,"/").concat(e,"/jobs"),method:"POST",callback:n,params:o})}},{key:"waitForJobCompletion",value:function(e,t,r,n){var o=this,i=setInterval(function(){o._processAsync({url:"".concat(o.url,"/").concat(t,"/jobs/").concat(e),serviceProcessCompleted:function(e,t){var r=e.state.runState;switch(t.statusCallback&&t.statusCallback(r),r){case"FINISHED":clearInterval(i),o.events.triggerEvent("processCompleted",{result:e,options:t});break;case"FAILED":case"CANCELED":clearInterval(i),o.events.triggerEvent("processFailed",{result:e,options:t})}},callback:n})},r.interval)}},{key:"getJobInfo",value:function(e,t,r){this._processAsync({url:"".concat(this.url,"/").concat(e,"/jobs/").concat(t),callback:r})}},{key:"cancelJob",value:function(e,t,r){this._processAsync({url:"".concat(this.url,"/").concat(e,"/jobs/").concat(t,"/cancel"),callback:r})}},{key:"getJobs",value:function(e,t){var r="".concat(this.url,"/jobs");e&&(r="".concat(this.url,"/").concat(e,"/jobs")),this._processAsync({url:r,callback:t})}},{key:"getResults",value:function(e,t,r,n){var o="".concat(this.url,"/").concat(e,"/jobs/").concat(t,"/results");r&&(o="".concat(o,"/").concat(r)),this._processAsync({url:o,callback:n})}},{key:"_processAsync",value:function(e){var t=e.url,r=e.method,n=e.callback,o=e.paramter,i=e.serviceProcessCompleted,a=e.serviceProcessFailed,s=++this.eventCount,u={scope:this,processCompleted:function(e){if(s===e.result.eventId&&n)return delete e.result.eventId,n(e),this.events&&this.events.un(u),!1},processFailed:function(e){if((s===e.error.eventId||s===e.eventId)&&n)return n(e),this.events&&this.events.un(u),!1}};this.events.on(u),this.request({url:t,method:r||"GET",params:o,headers:{"Content-type":"application/json"},scope:this,success:function(e,t){e.eventId=s,(i||this.serviceProcessCompleted.bind(this))(e,t)},failure:function(e,t){e.error&&(e.error.eventId=s),e.eventId=s,(a||this.serviceProcessFailed.bind(this))(e,t)}})}}])&&sm(t.prototype,r),n&&sm(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function hm(e){"@babel/helpers - typeof";return(hm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pm(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function dm(e,t){return(dm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function ym(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=vm(e);if(t){var o=vm(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===hm(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function vm(e){return(vm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var gm=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&dm(e,t)}(i,Tf);var t,r,n,o=ym(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t)).headers={},r.crossOrigin=!0,r.withCredentials=!0,r.proxy=!0,r._geoprocessingJobsService=new fm(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers}),r}return t=i,(r=[{key:"getTools",value:function(e){this._geoprocessingJobsService.getTools(e)}},{key:"getTool",value:function(e,t){this._geoprocessingJobsService.getTool(e,t)}},{key:"execute",value:function(e,t,r,n){this._geoprocessingJobsService.execute(e,t,r,n)}},{key:"submitJob",value:function(e,t,r,n){this._geoprocessingJobsService.submitJob(e,t,r,n)}},{key:"waitForJobCompletion",value:function(e,t,r,n){this._geoprocessingJobsService.waitForJobCompletion(e,t,r,n)}},{key:"getJobInfo",value:function(e,t,r){this._geoprocessingJobsService.getJobInfo(e,t,r)}},{key:"cancelJob",value:function(e,t,r){this._geoprocessingJobsService.cancelJob(e,t,r)}},{key:"getJobs",value:function(e,t){this._geoprocessingJobsService.getJobs(e,t)}},{key:"getResults",value:function(e,t,r,n){this._geoprocessingJobsService.getResults(e,t,r,n)}}])&&pm(t.prototype,r),n&&pm(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function mm(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var bm=function(){function e(t,r){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!t)return this;this.memoryData=null,this.type=t,r&&j.extend(this,r),this.CLASS_NAME="SuperMap.Theme"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){this.memoryData&&(this.memoryData.destroy(),this.memoryData=null),this.type=null}},{key:"toServerJSONObject",value:function(){}}])&&mm(t.prototype,r),n&&mm(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function wm(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var _m=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.align=Gt.BASELINECENTER,this.backColor=new lt(255,255,255),this.foreColor=new lt(0,0,0),this.backOpaque=!1,this.sizeFixed=!0,this.fontHeight=6,this.fontWidth=0,this.fontWeight=400,this.fontName="Times New Roman",this.bold=!1,this.italic=!1,this.italicAngle=0,this.shadow=!1,this.strikeout=!1,this.outline=!1,this.opaqueRate=0,this.underline=!1,this.rotation=0,t&&j.extend(this,t),this.CLASS_NAME="SuperMap.ServerTextStyle"}var t,r,n;return t=e,n=[{key:"fromObj",value:function(t){var r=new e(t);return j.copy(r,t),r.backColor=lt.fromJson(t.backColor),r.foreColor=lt.fromJson(t.foreColor),r}}],(r=[{key:"destroy",value:function(){var e=this;e.align=null,e.backColor&&(e.backColor.destroy(),e.backColor=null),e.foreColor&&(e.foreColor.destroy(),e.foreColor=null),e.backOpaque=null,e.sizeFixed=null,e.fontHeight=null,e.fontWidth=null,e.fontWeight=null,e.fontName=null,e.bold=null,e.italic=null,e.italicAngle=null,e.shadow=null,e.strikeout=null,e.outline=null,e.opaqueRate=null,e.underline=null,e.rotation=null}}])&&wm(t.prototype,r),n&&wm(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function xm(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Sm=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.caption=null,this.end=0,this.start=0,this.visible=!0,this.style=new _m,t&&j.extend(this,t),this.CLASS_NAME="SuperMap.ThemeLabelItem"}var t,r,n;return t=e,n=[{key:"fromObj",value:function(t){if(t){var r=new e;return j.copy(r,t),r}}}],(r=[{key:"destroy",value:function(){var e=this;e.caption=null,e.end=null,e.start=null,e.style&&(e.style.destroy(),e.style=null),e.visible=null}}])&&xm(t.prototype,r),n&&xm(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Om(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Pm=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.caption=null,this.style=new ft,this.unique=null,this.visible=!0,t&&j.extend(this,t),this.CLASS_NAME="SuperMap.ThemeUniqueItem"}var t,r,n;return t=e,n=[{key:"fromObj",value:function(t){var r=new e;return j.copy(r,t),r.style=ft.fromJson(t.style),r}}],(r=[{key:"destroy",value:function(){var e=this;e.caption=null,e.unique=null,e.style&&(e.style.destroy(),e.style=null),e.visible=null}},{key:"toServerJSONObject",value:function(){var e={};return(e=j.copyAttributes(e,this)).style&&e.style.toServerJSONObject&&(e.style=e.style.toServerJSONObject()),e}}])&&Om(t.prototype,r),n&&Om(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Em(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var km=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.offsetFixed=!1,this.offsetX="0.0",this.offsetY="0.0",t&&j.extend(this,t),this.CLASS_NAME="SuperMap.ThemeOffset"}var t,r,n;return t=e,n=[{key:"fromObj",value:function(t){if(t){var r=new e;return j.copy(r,t),r}}}],(r=[{key:"destroy",value:function(){this.offsetFixed=null,this.offsetX=null,this.offsetY=null}}])&&Em(t.prototype,r),n&&Em(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Mm(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Cm=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.defaultStyle=null,this.separator=null,this.separatorEnabled=!1,this.splitIndexes=null,this.styles=new _m,t&&j.extend(this,t),this.CLASS_NAME="SuperMap.LabelMixedTextStyle"}var t,r,n;return t=e,n=[{key:"fromObj",value:function(t){if(t){var r=new e,n=t.styles;if(j.copy(r,t),r.defaultStyle=new _m(t.defaultStyle),n){r.styles=[];for(var o=0,i=n.length;o<i;o++)r.styles.push(new _m(n[o]))}return r}}}],(r=[{key:"destroy",value:function(){var e=this;if(e.defaultStyle&&(e.defaultStyle.destroy(),e.defaultStyle=null),e.separator=null,e.separatorEnabled=null,e.splitIndexes&&(e.splitIndexes=null),e.styles){for(var t=0,r=e.styles,n=r.length;t<n;t++)r[t].destroy();e.styles=null}}}])&&Mm(t.prototype,r),n&&Mm(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function jm(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Tm=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.maxTextHeight=0,this.maxTextWidth=0,this.minTextHeight=0,this.minTextWidth=0,this.uniformStyle=new _m,this.uniformMixedStyle=null,t&&j.extend(this,t),this.CLASS_NAME="SuperMap.ThemeLabelText"}var t,r,n;return t=e,n=[{key:"fromObj",value:function(t){if(t){var r=new e;return j.copy(r,t),r.uniformStyle=_m.fromObj(t.uniformStyle),r.uniformMixedStyle=Cm.fromObj(t.uniformMixedStyle),r}}}],(r=[{key:"destroy",value:function(){var e=this;e.maxTextHeight=null,e.maxTextWidth=null,e.minTextHeight=null,e.minTextWidth=null,e.uniformStyle&&(e.uniformStyle.destroy(),e.uniformStyle=null),e.uniformMixedStyle&&(e.uniformMixedStyle.destroy(),e.uniformMixedStyle=null)}}])&&jm(t.prototype,r),n&&jm(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Am(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Im=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.isAlongLine=!0,this.alongLineDirection=zt.LB_TO_RT,this.angleFixed=!1,this.repeatedLabelAvoided=!1,this.repeatIntervalFixed=!1,this.labelRepeatInterval=0,t&&j.extend(this,t),this.CLASS_NAME="SuperMap.ThemeLabelAlongLine"}var t,r,n;return t=e,n=[{key:"fromObj",value:function(t){if(t){var r=new e;return j.copy(r,t),r}}}],(r=[{key:"destroy",value:function(){var e=this;e.isAlongLine=null,e.alongLineDirection=null,e.angleFixed=null,e.repeatedLabelAvoided=null,e.repeatIntervalFixed=null,e.labelRepeatInterval=null}}])&&Am(t.prototype,r),n&&Am(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Rm(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Lm=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.labelBackShape=Ut.NONE,this.backStyle=new ft,t&&j.extend(this,t),this.CLASS_NAME="SuperMap.ThemeLabelBackground"}var t,r,n;return t=e,n=[{key:"fromObj",value:function(t){if(t){var r=new e;return r.labelBackShape=t.labelBackShape,r.backStyle=ft.fromJson(t.backStyle),r}}}],(r=[{key:"destroy",value:function(){this.labelBackShape=null,this.backStyle&&(this.backStyle.destroy(),this.backStyle=null)}}])&&Rm(t.prototype,r),n&&Rm(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Nm(e){"@babel/helpers - typeof";return(Nm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Dm(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Bm(){return(Bm="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Um(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function Fm(e,t){return(Fm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Gm(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Um(e);if(t){var o=Um(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===Nm(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return zm(e)}(this,r)}}function zm(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Um(e){return(Um=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Vm=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Fm(e,t)}(i,bm);var t,r,n,o=Gm(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,"LABEL",e)).alongLine=new Im,t.background=new Lm,t.items=null,t.uniqueItems=null,t.labelExpression=null,t.labelOverLengthMode=Vt.NONE,t.matrixCells=null,t.maxLabelLength=256,t.numericPrecision=0,t.offset=new km,t.overlapAvoided=!0,t.rangeExpression=null,t.uniqueExpression=null,t.smallGeometryLabeled=!1,t.text=new Tm,t.textSpace=0,e&&j.extend(zm(t),e),t.CLASS_NAME="SuperMap.ThemeLabel",t}return t=i,n=[{key:"fromObj",value:function(e){if(e){var t=new i,r=e.items,n=e.uniqueItems,o=e.matrixCells;if(e.matrixCells=null,j.copy(t,e),t.alongLine=Im.fromObj(e),t.background=Lm.fromObj(e),r){t.items=[];for(var a=0,s=r.length;a<s;a++)t.items.push(Sm.fromObj(r[a]))}if(n){t.uniqueItems=[];for(var u=0,l=n.length;u<l;u++)t.uniqueItems.push(Pm.fromObj(n[u]))}if(o){t.matrixCells=[];for(var c=0,f=o.length;c<f;c++);}return t.offset=km.fromObj(e),t.text=Tm.fromObj(e),t}}}],(r=[{key:"destroy",value:function(){Bm(Um(i.prototype),"destroy",this).call(this);var e=this;if(e.alongLine=null,e.background&&(e.background.destroy(),e.background=null),e.items){for(var t=0,r=e.items,n=r.length;t<n;t++)r[t].destroy();e.items=null}if(e.uniqueItems){for(var o=0,a=e.uniqueItems,s=a.length;o<s;o++)a[o].destory();e.uniqueItems=null}e.labelExpression=null,e.labelOverLengthMode=null,e.matrixCells=null,e.maxLabelLength=null,e.numericPrecision=null,e.overlapAvoided=null,e.rangeExpression=null,e.uniqueExpression=null,e.offset&&(e.offset.destroy(),e.offset=null),e.overlapAvoided=null,e.smallGeometryLabeled=null,e.text&&(e.text.destroy(),e.text=null),e.textSpace=null}},{key:"toJSON",value:function(){return j.toJSON(this.toServerJSONObject())}},{key:"toServerJSONObject",value:function(){var e={};return e.type=this.type,e.memoryData=this.memoryData,this.alongLine&&(e.alongLine=this.alongLine.isAlongLine,e.alongLineDirection=this.alongLine.alongLineDirection,e.angleFixed=this.alongLine.angleFixed,e.isLabelRepeated=this.alongLine.isLabelRepeated,e.labelRepeatInterval=this.alongLine.labelRepeatInterval,e.repeatedLabelAvoided=this.alongLine.repeatedLabelAvoided,e.repeatIntervalFixed=this.alongLine.repeatIntervalFixed),this.offset&&(e.offsetFixed=this.offset.offsetFixed,e.offsetX=this.offset.offsetX,e.offsetY=this.offset.offsetY),this.text&&(e.maxTextHeight=this.text.maxTextHeight,e.maxTextWidth=this.text.maxTextWidth,e.minTextHeight=this.text.minTextHeight,e.minTextWidth=this.text.minTextWidth,e.uniformStyle=this.text.uniformStyle,e.uniformMixedStyle=this.text.uniformMixedStyle),this.background&&(e.labelBackShape=this.background.labelBackShape,e.backStyle=this.background.backStyle),e.labelOverLengthMode=this.labelOverLengthMode,e.maxLabelLength=this.maxLabelLength,e.smallGeometryLabeled=this.smallGeometryLabeled,e.rangeExpression=this.rangeExpression,e.uniqueExpression=this.uniqueExpression,e.numericPrecision=this.numericPrecision,e.items=this.items,e.uniqueItems=this.uniqueItems,e.labelExpression=this.labelExpression,e.overlapAvoided=this.overlapAvoided,e.matrixCells=this.matrixCells,e.textSpace=this.textSpace,e}}])&&Dm(t.prototype,r),n&&Dm(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Wm(e){"@babel/helpers - typeof";return(Wm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ym(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Hm(){return(Hm="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Zm(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function Xm(e,t){return(Xm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function qm(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Zm(e);if(t){var o=Zm(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===Wm(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Jm(e)}(this,r)}}function Jm(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Zm(e){return(Zm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Km=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Xm(e,t)}(i,bm);var t,r,n,o=qm(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,"UNIQUE",e)).defaultStyle=new ft,t.items=null,t.uniqueExpression=null,t.colorGradientType=Ft.YELLOW_RED,e&&j.extend(Jm(t),e),t.CLASS_NAME="SuperMap.ThemeUnique",t}return t=i,n=[{key:"fromObj",value:function(e){var t=new i,r=e.items,n=r?r.length:0;j.extend(t,e),t.items=[],t.defaultStyle=ft.fromJson(e.defaultStyle);for(var o=0;o<n;o++)t.items.push(Pm.fromObj(r[o]));return t}}],(r=[{key:"destroy",value:function(){Hm(Zm(i.prototype),"destroy",this).call(this);var e=this;if(e.uniqueExpression=null,e.colorGradientType=null,e.items){if(e.items.length>0)for(var t in e.items)e.items[t].destroy(),e.items[t]=null;e.items=null}e.defaultStyle&&(e.defaultStyle.destroy(),e.defaultStyle=null)}},{key:"toServerJSONObject",value:function(){var e={};if((e=j.copyAttributes(e,this)).defaultStyle&&e.defaultStyle.toServerJSONObject&&(e.defaultStyle=e.defaultStyle.toServerJSONObject()),e.items){for(var t=[],r=e.items.length,n=0;n<r;n++)t.push(e.items[n].toServerJSONObject());e.items=t}return e}}])&&Ym(t.prototype,r),n&&Ym(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Qm(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var $m=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.axesColor=new lt(0,0,0),this.axesDisplayed=!1,this.axesGridDisplayed=!1,this.axesTextDisplayed=!1,this.axesTextStyle=new _m,t&&j.extend(this,t),this.CLASS_NAME="SuperMap.ThemeGraphAxes"}var t,r,n;return t=e,n=[{key:"fromObj",value:function(t){if(t){var r=new e;return j.copy(r,t),r.axesColor=lt.fromJson(t.axesColor),r.axesTextStyle=_m.fromObj(t.axesTextStyle),r}}}],(r=[{key:"destroy",value:function(){var e=this;e.axesColor&&(e.axesColor.destroy(),e.axesColor=null),e.axesDisplayed=null,e.axesGridDisplayed=null,e.axesTextDisplayed=null,e.axesTextStyle&&(e.axesTextStyle.destroy(),e.axesTextStyle=null)}}])&&Qm(t.prototype,r),n&&Qm(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function eb(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var tb=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.maxGraphSize=0,this.minGraphSize=0,t&&j.extend(this,t),this.CLASS_NAME="SuperMap.ThemeGraphSize"}var t,r,n;return t=e,n=[{key:"fromObj",value:function(t){var r=new e;return j.copy(r,t),r}}],(r=[{key:"destroy",value:function(){this.maxGraphSize=null,this.minGraphSize=null}}])&&eb(t.prototype,r),n&&eb(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function rb(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var nb=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.graphTextDisplayed=!1,this.graphTextFormat=Rt.CAPTION,this.graphTextStyle=new _m,t&&j.extend(this,t),this.CLASS_NAME="SuperMap.ThemeGraphText"}var t,r,n;return t=e,n=[{key:"fromObj",value:function(t){var r=new e;return j.copy(r,t),r.graphTextStyle=_m.fromObj(t.graphTextStyle),r}}],(r=[{key:"destroy",value:function(){var e=this;e.graphTextDisplayed=null,e.graphTextFormat=null,e.graphTextStyle&&(e.graphTextStyle.destroy(),e.graphTextStyle=null)}}])&&rb(t.prototype,r),n&&rb(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function ob(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var ib=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.caption=null,this.graphExpression=null,this.memoryDoubleValues=null,this.uniformStyle=new ft,t&&j.extend(this,t),this.CLASS_NAME="SuperMap.ThemeGraphItem"}var t,r,n;return t=e,n=[{key:"fromObj",value:function(t){if(t){var r=new e;return j.copy(r,t),r.uniformStyle=ft.fromJson(t.uniformStyle),r}}}],(r=[{key:"destroy",value:function(){this.caption=null,this.graphExpression=null,this.memoryDoubleValues=null,this.uniformStyle=null}}])&&ob(t.prototype,r),n&&ob(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function ab(e){"@babel/helpers - typeof";return(ab="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function sb(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ub(){return(ub="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=hb(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function lb(e,t){return(lb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function cb(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=hb(e);if(t){var o=hb(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===ab(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return fb(e)}(this,r)}}function fb(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function hb(e){return(hb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var pb=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&lb(e,t)}(i,bm);var t,r,n,o=cb(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,"GRAPH",e)).barWidth=0,t.graduatedMode=Dt.CONSTANT,t.graphAxes=new $m,t.graphSize=new tb,t.graphSizeFixed=!1,t.graphText=new nb,t.graphType=Lt.AREA,t.graphAxesTextDisplayMode=Nt.NONE,t.items=null,t.memoryKeys=null,t.negativeDisplayed=!1,t.offset=new km,t.overlapAvoided=!0,t.roseAngle=0,t.startAngle=0,e&&j.extend(fb(t),e),t.CLASS_NAME="SuperMap.ThemeGraph",t}return t=i,n=[{key:"fromObj",value:function(e){var t=new i,r=e.items,n=r?r.length:0;j.copy(t,e),t.items=[],t.graphAxes=$m.fromObj(e),t.graphSize=tb.fromObj(e),t.graphText=nb.fromObj(e),t.offset=km.fromObj(e);for(var o=0;o<n;o++)t.items.push(ib.fromObj(r[o]));return t}}],(r=[{key:"destroy",value:function(){ub(hb(i.prototype),"destroy",this).call(this);var e=this;if(e.barWidth=null,e.graduatedMode=null,e.graphAxes&&(e.graphAxes.destroy(),e.graphAxes=null),e.graphSize&&(e.graphSize.destroy(),e.graphSize=null),e.graphSizeFixed=null,e.graphText&&(e.graphText.destroy(),e.graphText=null),e.graphType=null,e.items){for(var t=0,r=e.items,n=r.length;t<n;t++)r[t].destroy();e.items=null}e.memoryKeys=null,e.negativeDisplayed=null,e.offset&&(e.offset.destroy(),e.offset=null),e.overlapAvoided=null,e.roseAngle=null,e.startAngle=null,e.graphAxesTextDisplayMode=null}},{key:"toJSON",value:function(){return j.toJSON(this.toServerJSONObject())}},{key:"toServerJSONObject",value:function(){var e={};return e.type=this.type,this.graphText&&(e.graphTextDisplayed=this.graphText.graphTextDisplayed,e.graphTextFormat=this.graphText.graphTextFormat,e.graphTextStyle=this.graphText.graphTextStyle),this.graphAxes&&(e.axesColor=this.graphAxes.axesColor,e.axesDisplayed=this.graphAxes.axesDisplayed,e.axesGridDisplayed=this.graphAxes.axesGridDisplayed,e.axesTextDisplayed=this.graphAxes.axesTextDisplayed,e.axesTextStyle=this.graphAxes.axesTextStyle),this.graphSize&&(e.maxGraphSize=this.graphSize.maxGraphSize,e.minGraphSize=this.graphSize.minGraphSize),this.offset&&(e.offsetFixed=this.offset.offsetFixed,e.offsetX=this.offset.offsetX,e.offsetY=this.offset.offsetY),e.barWidth=this.barWidth,e.graduatedMode=this.graduatedMode,e.graphSizeFixed=this.graphSizeFixed,e.graphType=this.graphType,e.graphAxesTextDisplayMode=this.graphAxesTextDisplayMode,e.items=this.items,e.memoryKeys=this.memoryKeys,e.negativeDisplayed=this.negativeDisplayed,e.overlapAvoided=this.overlapAvoided,e.roseAngle=this.roseAngle,e.startAngle=this.startAngle,e}}])&&sb(t.prototype,r),n&&sb(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function db(e){"@babel/helpers - typeof";return(db="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yb(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function vb(e,t){return(vb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function gb(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=bb(e);if(t){var o=bb(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===db(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return mb(e)}(this,r)}}function mb(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function bb(e){return(bb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var wb=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&vb(e,t)}(i,bm);var t,r,n,o=gb(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,"DOTDENSITY",e)).dotExpression=null,t.style=new ft,t.value=null,e&&j.extend(mb(t),e),t.CLASS_NAME="SuperMap.ThemeDotDensity",t}return t=i,n=[{key:"fromObj",value:function(e){if(e){var t=new i;return j.copy(t,e),t.style=ft.fromJson(e.style),t}}}],(r=[{key:"destroy",value:function(){var e=this;e.dotExpression=null,e.value=null,e.style&&(e.style.destroy(),e.style=null)}},{key:"toServerJSONObject",value:function(){var e={};return(e=j.copyAttributes(e,this)).style&&e.style.toServerJSONObject&&(e.style=e.style.toServerJSONObject()),e}}])&&yb(t.prototype,r),n&&yb(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function _b(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var xb=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.negativeDisplayed=!1,this.negativeStyle=new ft,this.positiveStyle=new ft,this.zeroDisplayed=!1,this.zeroStyle=new ft,t&&j.extend(this,t),this.CLASS_NAME="SuperMap.ThemeGraduatedSymbolStyle"}var t,r,n;return t=e,n=[{key:"fromObj",value:function(t){if(t){var r=new e;return j.copy(r,t),r.negativeStyle=ft.fromJson(t.negativeStyle),r.positiveStyle=ft.fromJson(t.positiveStyle),r.zeroStyle=ft.fromJson(t.zeroStyle),r}}}],(r=[{key:"destroy",value:function(){var e=this;e.negativeDisplayed=null,e.negativeStyle=null,e.positiveStyle=null,e.zeroDisplayed=null,e.zeroStyle=null}}])&&_b(t.prototype,r),n&&_b(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Sb(e){"@babel/helpers - typeof";return(Sb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ob(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Pb(){return(Pb="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Cb(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function Eb(e,t){return(Eb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function kb(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Cb(e);if(t){var o=Cb(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===Sb(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Mb(e)}(this,r)}}function Mb(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Cb(e){return(Cb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var jb=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Eb(e,t)}(i,bm);var t,r,n,o=kb(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,"GRADUATEDSYMBOL",e)).baseValue=0,t.expression=null,t.graduatedMode=Dt.CONSTAN,t.offset=new km,t.style=new xb,e&&j.extend(Mb(t),e),t.CLASS_NAME="SuperMap.ThemeGraduatedSymbol",t}return t=i,n=[{key:"fromObj",value:function(e){if(e){var t=new i;return j.copy(t,e),t.offset=km.fromObj(e),t.style=xb.fromObj(e),t}}}],(r=[{key:"destroy",value:function(){Pb(Cb(i.prototype),"destroy",this).call(this);var e=this;e.expression=null,e.graduatedMode=Dt.CONSTANT,e.offset&&(e.offset.destroy(),e.offset=null),e.style&&(e.style.destroy(),e.style=null)}},{key:"toJSON",value:function(){return j.toJSON(this.toServerJSONObject())}},{key:"toServerJSONObject",value:function(){var e={};return e.type=this.type,e.memoryData=this.memoryData,e.baseValue=this.baseValue,e.expression=this.expression,e.graduatedMode=this.graduatedMode,this.offset&&(e.offsetFixed=this.offset.offsetFixed,e.offsetX=this.offset.offsetX,e.offsetY=this.offset.offsetY),this.style&&(e.negativeStyle=this.style.negativeStyle,e.negativeDisplayed=this.style.negativeDisplayed,e.positiveStyle=this.style.positiveStyle,e.zeroDisplayed=this.style.zeroDisplayed,e.zeroStyle=this.style.zeroStyle),e}}])&&Ob(t.prototype,r),n&&Ob(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Tb(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Ab=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.caption=null,this.end=0,this.start=0,this.style=new ft,this.visible=!0,t&&j.extend(this,t),this.CLASS_NAME="SuperMap.ThemeRangeItem"}var t,r,n;return t=e,n=[{key:"fromObj",value:function(t){if(t){var r=new e;return j.copy(r,t),r.style=ft.fromJson(t.style),r}}}],(r=[{key:"destroy",value:function(){var e=this;e.caption=null,e.end=null,e.start=null,e.style&&(e.style.destroy(),e.style=null),e.visible=null}},{key:"toServerJSONObject",value:function(){var e={};return(e=j.copyAttributes(e,this)).style&&e.style.toServerJSONObject&&(e.style=e.style.toServerJSONObject()),e}}])&&Tb(t.prototype,r),n&&Tb(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Ib(e){"@babel/helpers - typeof";return(Ib="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Rb(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Lb(){return(Lb="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Fb(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function Nb(e,t){return(Nb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Db(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Fb(e);if(t){var o=Fb(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===Ib(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Bb(e)}(this,r)}}function Bb(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Fb(e){return(Fb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Gb=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Nb(e,t)}(i,bm);var t,r,n,o=Db(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,"RANGE",e)).precision="1.0E-12",t.items=null,t.rangeExpression=null,t.rangeMode=Bt.EQUALINTERVAL,t.rangeParameter=0,t.colorGradientType=Ft.YELLOW_RED,e&&j.extend(Bb(t),e),t.CLASS_NAME="SuperMap.ThemeRange",t}return t=i,n=[{key:"fromObj",value:function(e){if(e){var t=new i;j.copy(t,e);var r=e.items,n=r?r.length:0;t.items=[];for(var o=0;o<n;o++)t.items.push(Ab.fromObj(r[o]));return t}}}],(r=[{key:"destroy",value:function(){Lb(Fb(i.prototype),"destroy",this).call(this);var e=this;if(e.items){if(e.items.length>0)for(var t in e.items)e.items[t].destroy(),e.items[t]=null;e.items=null}e.rangeExpression=null,e.rangeMode=null,e.rangeParameter=null,e.colorGradientType=null}}])&&Rb(t.prototype,r),n&&Rb(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function zb(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Ub=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.bounds=null,this.caption=null,this.description=null,this.name=null,this.queryable=null,this.subLayers=null,this.type=null,this.visible=null,j.extend(this,t),this.CLASS_NAME="SuperMap.UGCLayer"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){j.reset(this)}},{key:"fromJson",value:function(e){e=e||{},j.extend(this,e);var t=this.bounds;t&&(this.bounds=new N(t.leftBottom.x,t.leftBottom.y,t.rightTop.x,t.rightTop.y))}},{key:"toServerJSONObject",value:function(){var e={};return(e=j.copyAttributes(e,this)).bounds&&e.bounds.toServerJSONObject&&(e.bounds=e.bounds.toServerJSONObject()),e}}])&&zb(t.prototype,r),n&&zb(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Vb(e){"@babel/helpers - typeof";return(Vb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Wb(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Yb(){return(Yb="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=qb(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function Hb(e,t){return(Hb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Xb(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=qb(e);if(t){var o=qb(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===Vb(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function qb(e){return(qb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Jb=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Hb(e,t)}(i,Ub);var t,r,n,o=Xb(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),e=e||{},(t=o.call(this,e)).completeLineSymbolDisplayed=null,t.maxScale=null,t.minScale=null,t.minVisibleGeometrySize=null,t.opaqueRate=null,t.symbolScalable=null,t.symbolScale=null,t.overlapDisplayed=null,t.overlapDisplayedOptions=null,t.CLASS_NAME="SuperMap.UGCMapLayer",t}return t=i,(r=[{key:"destroy",value:function(){Yb(qb(i.prototype),"destroy",this).call(this),j.reset(this)}},{key:"fromJson",value:function(e){Yb(qb(i.prototype),"fromJson",this).call(this,e)}},{key:"toServerJSONObject",value:function(){return Yb(qb(i.prototype),"toServerJSONObject",this).call(this)}}])&&Wb(t.prototype,r),n&&Wb(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Zb(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Kb=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.foreignTableName=null,this.joinFilter=null,this.joinType=null,t&&j.extend(this,t),this.CLASS_NAME="SuperMap.JoinItem"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){this.foreignTableName=null,this.joinFilter=null,this.joinType=null}},{key:"toServerJSONObject",value:function(){var e={};return e=j.copyAttributes(e,this)}}])&&Zb(t.prototype,r),n&&Zb(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Qb(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var $b=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.bounds=null,this.dataSourceName=null,this.description=null,this.encodeType=null,this.isReadOnly=null,this.name=null,this.prjCoordSys=null,this.tableName=null,this.type=null,j.extend(this,t);var r=this.bounds;r&&(this.bounds=new N(r.leftBottom.x,r.leftBottom.y,r.rightTop.x,r.rightTop.y)),this.CLASS_NAME="SuperMap.DatasetInfo"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){j.reset(this)}},{key:"toServerJSONObject",value:function(){var e={};return(e=j.copyAttributes(e,this)).bounds&&e.bounds.toServerJSONObject&&(e.bounds=e.bounds.toServerJSONObject()),e}}])&&Qb(t.prototype,r),n&&Qb(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function ew(e){"@babel/helpers - typeof";return(ew="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tw(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function rw(){return(rw="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=iw(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function nw(e,t){return(nw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function ow(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=iw(e);if(t){var o=iw(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===ew(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function iw(e){return(iw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var aw=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&nw(e,t)}(i,Jb);var t,r,n,o=ow(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),e=e||{},(t=o.call(this,e)).datasetInfo=null,t.displayFilter=null,t.joinItems=null,t.representationField=null,t.ugcLayerType=null,t.CLASS_NAME="SuperMap.UGCSubLayer",t}return t=i,(r=[{key:"fromJson",value:function(e){if(rw(iw(i.prototype),"fromJson",this).call(this,e),this.datasetInfo&&(this.datasetInfo=new $b(this.datasetInfo)),this.joinItems&&this.joinItems.length){for(var t=[],r=0;r<this.joinItems.length;r++)t[r]=new Kb(this.joinItems[r]);this.joinItems=t}}},{key:"destroy",value:function(){rw(iw(i.prototype),"destroy",this).call(this),j.reset(this)}},{key:"toServerJSONObject",value:function(){var e=rw(iw(i.prototype),"toServerJSONObject",this).call(this);if(e.joinItems){for(var t=[],r=0;r<e.joinItems.length;r++)e.joinItems[r].toServerJSONObject&&(t[r]=e.joinItems[r].toServerJSONObject());e.joinItems=t}return e.datasetInfo&&e.datasetInfo.toServerJSONObject&&(e.datasetInfo=e.datasetInfo.toServerJSONObject()),e}}])&&tw(t.prototype,r),n&&tw(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function sw(e){"@babel/helpers - typeof";return(sw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function uw(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function lw(){return(lw="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=hw(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function cw(e,t){return(cw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function fw(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=hw(e);if(t){var o=hw(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===sw(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function hw(e){return(hw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var pw=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&cw(e,t)}(i,aw);var t,r,n,o=fw(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),e=e||{},(t=o.call(this,e)).theme=null,t.themeElementPosition=null,t.CLASS_NAME="SuperMap.ServerTheme",t}return t=i,(r=[{key:"destroy",value:function(){lw(hw(i.prototype),"destroy",this).call(this),j.reset(this)}},{key:"fromJson",value:function(e){lw(hw(i.prototype),"fromJson",this).call(this,e);var t=this.theme;switch(t&&t.type){case"LABEL":this.theme=Vm.fromObj(t);break;case"UNIQUE":this.theme=Km.fromObj(t);break;case"GRAPH":this.theme=pb.fromObj(t);break;case"DOTDENSITY":this.theme=wb.fromObj(t);break;case"GRADUATEDSYMBOL":this.theme=jb.fromObj(t);break;case"RANGE":this.theme=Gb.fromObj(t)}this.themeElementPosition&&(this.themeElementPosition=new R(this.themeElementPosition.x,this.themeElementPosition.y))}},{key:"toServerJSONObject",value:function(){var e=lw(hw(i.prototype),"toServerJSONObject",this).call(this);return e.themeElementPosition&&e.themeElementPosition.toServerJSONObject&&(e.themeElementPosition=e.themeElementPosition.toServerJSONObject()),e.theme&&e.theme.toServerJSONObject&&(e.theme=e.theme.toServerJSONObject()),e}}])&&uw(t.prototype,r),n&&uw(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function dw(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var yw=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.elevation=null,this.color=null,j.extend(this,t);var r=this.color;r&&(this.color=new lt(r.red,r.green,r.blue)),this.CLASS_NAME="SuperMap.ColorDictionary"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){j.reset(this)}},{key:"toServerJSONObject",value:function(){var e={};return e=j.copyAttributes(e,this)}}])&&dw(t.prototype,r),n&&dw(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function vw(e){"@babel/helpers - typeof";return(vw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function gw(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function mw(){return(mw="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_w(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function bw(e,t){return(bw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function ww(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=_w(e);if(t){var o=_w(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===vw(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function _w(e){return(_w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var xw=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&bw(e,t)}(i,aw);var t,r,n,o=ww(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),e=e||{},(t=o.call(this,e)).colorDictionarys=null,t.brightness=null,t.colorGradientType=null,t.colors=null,t.contrast=null,t.dashStyle=null,t.gridType=null,t.horizontalSpacing=null,t.sizeFixed=null,t.solidStyle=null,t.specialColor=null,t.specialValue=null,t.specialValueTransparent=null,t.verticalSpacing=null,t.CLASS_NAME="SuperMap.Grid",t}return t=i,(r=[{key:"destroy",value:function(){mw(_w(i.prototype),"destroy",this).call(this),j.reset(this)}},{key:"fromJson",value:function(e){if(mw(_w(i.prototype),"fromJson",this).call(this,e),this.specialColor&&(this.specialColor=new lt(this.specialColor.red,this.specialColor.green,this.specialColor.blue)),this.colors){var t,r=[];for(var n in this.colors)t=this.colors[n],r.push(new lt(t.red,t.green,t.blue));this.colors=r}if(this.dashStyle&&(this.dashStyle=new ft(this.dashStyle)),this.solidStyle&&(this.solidStyle=new ft(this.solidStyle)),this.colorDictionary){var o,a=[];for(var s in this.colorDictionary)o=this.colorDictionary[s],a.push(new yw({elevation:s,color:o}));this.colorDictionarys=a}delete this.colorDictionary}},{key:"toServerJSONObject",value:function(){var e=mw(_w(i.prototype),"toServerJSONObject",this).call(this);return e.dashStyle&&e.dashStyle.toServerJSONObject&&(e.dashStyle=e.dashStyle.toServerJSONObject()),e.solidStyle&&e.solidStyle.toServerJSONObject&&(e.solidStyle=e.solidStyle.toServerJSONObject()),e}}])&&gw(t.prototype,r),n&&gw(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Sw(e){"@babel/helpers - typeof";return(Sw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ow(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Pw(){return(Pw="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Mw(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function Ew(e,t){return(Ew=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function kw(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Mw(e);if(t){var o=Mw(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===Sw(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function Mw(e){return(Mw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Cw=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ew(e,t)}(i,aw);var t,r,n,o=kw(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),e=e||{},(t=o.call(this,e)).brightness=null,t.colorSpaceType=null,t.contrast=null,t.displayBandIndexes=null,t.transparent=null,t.transparentColor=null,t.transparentColorTolerance=null,t.CLASS_NAME="SuperMap.Image",t}return t=i,(r=[{key:"destroy",value:function(){Pw(Mw(i.prototype),"destroy",this).call(this),j.reset(this)}},{key:"fromJson",value:function(e){Pw(Mw(i.prototype),"fromJson",this).call(this,e),this.transparentColor&&(this.transparentColor=new lt(this.transparentColor.red,this.transparentColor.green,this.transparentColor.blue))}},{key:"toServerJSONObject",value:function(){return Pw(Mw(i.prototype),"toServerJSONObject",this).call(this)}}])&&Ow(t.prototype,r),n&&Ow(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function jw(e){"@babel/helpers - typeof";return(jw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Tw(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Aw(){return(Aw="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Lw(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function Iw(e,t){return(Iw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Rw(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Lw(e);if(t){var o=Lw(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===jw(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function Lw(e){return(Lw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Nw=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Iw(e,t)}(i,aw);var t,r,n,o=Rw(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),e=e||{},(t=o.call(this,e)).style=null,t.CLASS_NAME="SuperMap.Vector",t}return t=i,(r=[{key:"destroy",value:function(){Aw(Lw(i.prototype),"destroy",this).call(this),j.reset(this)}},{key:"fromJson",value:function(e){Aw(Lw(i.prototype),"fromJson",this).call(this,e);var t=this.style;t&&(this.style=new ft(t))}},{key:"toServerJSONObject",value:function(){var e=Aw(Lw(i.prototype),"toServerJSONObject",this).call(this);return e.style&&e.style.toServerJSONObject&&(e.style=e.style.toServerJSONObject()),e}}])&&Tw(t.prototype,r),n&&Tw(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Dw(e){"@babel/helpers - typeof";return(Dw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Bw(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Fw(){return(Fw="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Vw(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function Gw(e,t){return(Gw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function zw(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Vw(e);if(t){var o=Vw(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===Dw(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Uw(e)}(this,r)}}function Uw(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Vw(e){return(Vw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ww=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Gw(e,t)}(i,Nf);var t,r,n,o=zw(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t)).isTempLayers=!1,t&&j.extend(Uw(r),t),r.CLASS_NAME="SuperMap.GetLayersInfoService",r}return t=i,(r=[{key:"destroy",value:function(){Fw(Vw(i.prototype),"destroy",this).call(this),j.reset(this)}},{key:"processAsync",value:function(){var e=this;e.isTempLayers||(e.url=j.urlPathAppend(e.url,"layers")),e.request({method:"GET",params:null,scope:e,success:e.serviceProcessCompleted,failure:e.serviceProcessFailed})}},{key:"serviceProcessCompleted",value:function(e,t){var r,n;n=(r=!!(e=j.transformResult(e))&&e.length>0?e[0].subLayers.layers:null)?r.length:0,this.handleLayers(n,r),this.events.triggerEvent("processCompleted",{result:e[0],options:t})}},{key:"handleLayers",value:function(e,t){var r;if(e)for(var n=0;n<e;n++){if(t[n].subLayers&&t[n].subLayers.layers&&t[n].subLayers.layers.length>0)this.handleLayers(t[n].subLayers.layers.length,t[n].subLayers.layers);else switch(t[n].ugcLayerType){case"THEME":(r=new pw).fromJson(t[n]),t[n]=r;break;case"GRID":(r=new xw).fromJson(t[n]),t[n]=r;break;case"IMAGE":(r=new Cw).fromJson(t[n]),t[n]=r;break;case"VECTOR":(r=new Nw).fromJson(t[n]),t[n]=r}}}}])&&Bw(t.prototype,r),n&&Bw(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Yw(e){"@babel/helpers - typeof";return(Yw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Hw(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Xw(){return(Xw="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Kw(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function qw(e,t){return(qw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Jw(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Kw(e);if(t){var o=Kw(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===Yw(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Zw(e)}(this,r)}}function Zw(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Kw(e){return(Kw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Qw=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&qw(e,t)}(i,Nf);var t,r,n,o=Jw(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),r=o.call(this,e,t),t&&j.extend(Zw(r),t),r.CLASS_NAME="SuperMap.SetLayerInfoService",r}return t=i,(r=[{key:"destroy",value:function(){Xw(Kw(i.prototype),"destroy",this).call(this),j.reset(this)}},{key:"processAsync",value:function(e){if(e){var t=j.toJSON(e);this.request({method:"PUT",data:t,scope:this,success:this.serviceProcessCompleted,failure:this.serviceProcessFailed})}}}])&&Hw(t.prototype,r),n&&Hw(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function $w(e){"@babel/helpers - typeof";return($w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function e_(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function t_(){return(t_="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=i_(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function r_(e,t){return(r_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function n_(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=i_(e);if(t){var o=i_(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===$w(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return o_(e)}(this,r)}}function o_(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function i_(e){return(i_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var a_=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&r_(e,t)}(i,Nf);var t,r,n,o=n_(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t)).resourceID=null,r.isTempLayers=!1,t&&j.extend(o_(r),t),r.CLASS_NAME="SuperMap.SetLayersInfoService",r}return t=i,(r=[{key:"destroy",value:function(){t_(i_(i.prototype),"destroy",this).call(this),j.reset(this)}},{key:"processAsync",value:function(e){if(e){var t,r=[],n=this,o="";n.isTempLayers?(n.url=j.urlPathAppend(n.url,"tempLayersSet/"+n.resourceID),o="PUT"):(n.url=j.urlPathAppend(n.url,"tempLayersSet"),o="POST"),e.subLayers||(e.subLayers={layers:[]}),e.subLayers.layers||(e.subLayers.layers=[]);var i=e.subLayers.layers,a=i.length;for(var s in i){if("GRID"===i[s].ugcLayerType){var u={},l=i[s].colorDictionarys;for(var c in l){u[l[c].elevation]=l[c].color}}i[s].colorDictionary=u,delete i[s].colorDictionarys}for(var f=0;f<a;f++)i[f].toJsonObject?r.push(i[f].toJsonObject()):r.push(i[f]);(t=j.extend(t,e)).subLayers={layers:r},t.object=null;var h=j.toJSON([t]);n.request({method:o,data:h,scope:n,success:n.serviceProcessCompleted,failure:n.serviceProcessFailed})}}}])&&e_(t.prototype,r),n&&e_(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function s_(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var u_=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.layerStatusList=[],this.holdTime=15,this.resourceID=null,t&&j.extend(this,t)}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){this.layerStatusList=null,this.holdTime=null,this.resourceID=null}},{key:"toJSON",value:function(){var e="{";e+='"layers":[';for(var t=[],r=0,n=this.layerStatusList.length;r<n;r++)t.push(this.layerStatusList[r].toJSON());return e+=t,e+="]",e+="}"}}])&&s_(t.prototype,r),n&&s_(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function l_(e){"@babel/helpers - typeof";return(l_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c_(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function f_(){return(f_="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=y_(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function h_(e,t){return(h_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function p_(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=y_(e);if(t){var o=y_(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===l_(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return d_(e)}(this,r)}}function d_(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y_(e){return(y_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var v_=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h_(e,t)}(i,Nf);var t,r,n,o=p_(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t)).lastparams=null,r.mapUrl=e,t&&j.extend(d_(r),t),r.CLASS_NAME="SuperMap.SetLayerStatusService",r}return t=i,(r=[{key:"destroy",value:function(){f_(y_(i.prototype),"destroy",this).call(this),j.reset(this)}},{key:"processAsync",value:function(e){if(e instanceof u_){var t=this;if(t.url=t.mapUrl,null==e.resourceID)t.url=j.urlPathAppend(t.url,"tempLayersSet"),t.lastparams=e,t.request({method:"POST",scope:t,success:t.createTempLayerComplete,failure:t.serviceProcessFailed});else{t.url=j.urlPathAppend(t.url,"tempLayersSet/"+e.resourceID),t.url=j.urlAppend(t.url,"elementRemain=true&reference="+e.resourceID+"&holdTime="+e.holdTime.toString());var r="[{";r+='"type":"UGC",',null!=e.layerStatusList&&e.layerStatusList.length>0&&(r+='"subLayers":'+e.toJSON()),r+=',"visible":true,',r+='"name":"'+this.getMapName(this.mapUrl)+'"',r+="}]",t.request({method:"PUT",data:r,scope:t,success:t.serviceProcessCompleted,failure:t.serviceProcessFailed})}}}},{key:"createTempLayerComplete",value:function(e){(e=j.transformResult(e)).succeed&&(this.lastparams.resourceID=e.newResourceID),this.processAsync(this.lastparams)}},{key:"getMapName",value:function(e){var t=e;"/"===t.charAt(t.length-1)&&(t=t.substr(0,t.length-1));var r=t.lastIndexOf("/");return t.substring(r+1,t.length)}},{key:"serviceProcessCompleted",value:function(e,t){null!=(e=j.transformResult(e))&&null!=this.lastparams&&(e.newResourceID=this.lastparams.resourceID),this.events.triggerEvent("processCompleted",{result:e,options:t})}}])&&c_(t.prototype,r),n&&c_(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function g_(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var m_=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.url=t,this.options=r||{}}var t,r,n;return t=e,(r=[{key:"getLayersInfo",value:function(e){var t=this;new Ww(t.url,{proxy:t.options.proxy,withCredentials:t.options.withCredentials,crossOrigin:t.options.crossOrigin,headers:t.options.headers,eventListeners:{processCompleted:e,processFailed:e}}).processAsync()}},{key:"setLayerInfo",value:function(e,t){if(e){var r=this,n=e.resourceID,o=e.tempLayerName,i=e.layerInfo;if(n&&o){var a=j.urlPathAppend(r.url,"tempLayersSet/"+n+"/"+o);new Qw(a,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,eventListeners:{processCompleted:t,processFailed:t}}).processAsync(i)}}}},{key:"setLayersInfo",value:function(e,t){if(e){var r=this,n=e.resourceID,o=!!e.isTempLayers&&e.isTempLayers,i=e.layersInfo;if((!o||n)&&i)new a_(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,eventListeners:{processCompleted:t,processFailed:t},resourceID:n,isTempLayers:o}).processAsync(i)}}},{key:"setLayerStatus",value:function(e,t){if(e){var r=this;new v_(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,eventListeners:{processCompleted:t,processFailed:t}}).processAsync(e)}}}])&&g_(t.prototype,r),n&&g_(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function b_(e){"@babel/helpers - typeof";return(b_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function w_(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function __(e,t){return(__=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function x_(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=S_(e);if(t){var o=S_(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===b_(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function S_(e){return(S_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var O_=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&__(e,t)}(i,Tf);var t,r,n,o=x_(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t))._layerInfoService=new m_(e,t),r}return t=i,(r=[{key:"getLayersInfo",value:function(e){this._layerInfoService.getLayersInfo(e)}},{key:"setLayerInfo",value:function(e,t){this._layerInfoService.setLayerInfo(e,t)}},{key:"setLayersInfo",value:function(e,t){this._layerInfoService.setLayersInfo(e,t)}},{key:"setLayerStatus",value:function(e,t){this._layerInfoService.setLayerStatus(e,t)}}])&&w_(t.prototype,r),n&&w_(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function P_(e){"@babel/helpers - typeof";return(P_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function E_(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function k_(){return(k_="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=T_(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function M_(e,t){return(M_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function C_(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=T_(e);if(t){var o=T_(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===P_(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return j_(e)}(this,r)}}function j_(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function T_(e){return(T_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var A_=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&M_(e,t)}(i,Nf);var t,r,n,o=C_(i);function i(e,t){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t)).projection=null,r.CLASS_NAME="SuperMap.MapService",t&&j.extend(j_(r),t);var n=j_(r);if(n.projection){var a=n.projection.split(":");a instanceof Array&&(2===a.length&&(n.url=j.urlAppend(n.url,"prjCoordSys=".concat(encodeURIComponent('{"epsgCode":"'.concat(a[1],'"}'))))),1===a.length&&(n.url=j.urlAppend(n.url,"prjCoordSys=".concat(encodeURIComponent('{"epsgCode":"'.concat(a[0],'"}'))))))}return r.eventCount=0,r}return t=i,(r=[{key:"destroy",value:function(){k_(T_(i.prototype),"destroy",this).call(this);var e=this;e.events&&(e.events.un(e.eventListeners),e.events.listeners=null,e.events.destroy(),e.events=null,e.eventListeners=null)}},{key:"processAsync",value:function(e){var t=++this.eventCount,r={scope:this,processCompleted:function(n){if(t===n.result.eventId&&e)return delete n.result.eventId,e(n),this.events&&this.events.un(r),!1},processFailed:function(n){if((t===n.error.eventId||t===n.eventId)&&e)return e(n),this.events&&this.events.un(r),!1}};this.events.on(r);this.request({method:"GET",scope:this,success:function(e,r){e.eventId=t,this.serviceProcessCompleted(e,r)},failure:function(e,r){e.error&&(e.error.eventId=t),e.eventId=t,this.serviceProcessFailed(e,r)}})}},{key:"serviceProcessCompleted",value:function(e,t){var r=(e=j.transformResult(e)).code>=200&&e.code<300||0==e.code||304===e.code,n=e.code&&r;!e.code||n?this.events&&this.events.triggerEvent("processCompleted",{result:e,options:t}):this.events.triggerEvent("processFailed",{error:e,options:t})}}])&&E_(t.prototype,r),n&&E_(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function I_(e){"@babel/helpers - typeof";return(I_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function R_(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function L_(){return(L_="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=B_(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function N_(e,t){return(N_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function D_(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=B_(e);if(t){var o=B_(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===I_(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function B_(e){return(B_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var F_=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&N_(e,t)}(i,Nf);var t,r,n,o=D_(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t)).CLASS_NAME="SuperMap.TilesetsService",r}return t=i,(r=[{key:"destroy",value:function(){L_(B_(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(){if(this.url){var e=this;e.url=j.urlPathAppend(e.url,"tilesets"),e.request({method:"GET",scope:e,success:e.serviceProcessCompleted,failure:e.serviceProcessFailed})}}}])&&R_(t.prototype,r),n&&R_(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function G_(e){"@babel/helpers - typeof";return(G_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function z_(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function U_(e,t){return(U_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function V_(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=W_(e);if(t){var o=W_(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===G_(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function W_(e){return(W_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Y_=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&U_(e,t)}(i,Tf);var t,r,n,o=V_(i);function i(e,t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.call(this,e,t)}return t=i,(r=[{key:"getMapInfo",value:function(e){var t=this;new A_(t.url,{proxy:t.options.proxy,withCredentials:t.options.withCredentials,crossOrigin:t.options.crossOrigin,headers:t.options.headers,projection:t.options.projection}).processAsync(e)}},{key:"getTilesets",value:function(e){var t=this;new F_(t.url,{proxy:t.options.proxy,withCredentials:t.options.withCredentials,crossOrigin:t.options.crossOrigin,headers:t.options.headers,eventListeners:{scope:t,processCompleted:e,processFailed:e}}).processAsync()}}])&&z_(t.prototype,r),n&&z_(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function H_(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var X_=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.geometry=t,this.unit=At.METER,this.prjCoordSys=null,this.distanceMode=null,r&&j.extend(this,r),this.CLASS_NAME="SuperMap.MeasureParameters")}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){this.geometry=null,this.unit=null,this.prjCoordSys=null}}])&&H_(t.prototype,r),n&&H_(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function q_(e){"@babel/helpers - typeof";return(q_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function J_(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Z_(){return(Z_="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ex(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function K_(e,t){return(K_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Q_(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=ex(e);if(t){var o=ex(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===q_(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return $_(e)}(this,r)}}function $_(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ex(e){return(ex=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var tx=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&K_(e,t)}(i,Nf);var t,r,n,o=Q_(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t)).measureMode=Tt.DISTANCE,t&&j.extend($_(r),t),r.eventCount=0,r.CLASS_NAME="SuperMap.MeasureService",r}return t=i,(r=[{key:"destroy",value:function(){Z_(ex(i.prototype),"destroy",this).call(this);this.measureMode=null}},{key:"processAsync",value:function(e,t){if(e instanceof X_){var r=++this.eventCount,n={scope:this,processCompleted:function(e){if(r===e.result.eventId&&t)return delete e.result.eventId,t(e),this.events&&this.events.un(n),!1},processFailed:function(e){if((r===e.error.eventId||r===e.eventId)&&t)return t(e),this.events&&this.events.un(n),!1}};this.events.on(n);var o,i,a=this,s=e.geometry;if(s){a.url=j.urlPathAppend(a.url,a.measureMode===Tt.AREA?"area":"distance");var u,l,c,f=hr.fromGeometry(s);if(f)o=f.parts[0],i=f.points.splice(0,o),e.prjCoordSys?("object"===q_(e.prjCoordSys)?u='{"epsgCode"'+(l=e.prjCoordSys.projCode).substring(l.indexOf(":"),l.length)+"}":"string"==typeof e.prjCoordSys&&(u='{"epsgCode"'+e.prjCoordSys.substring(e.prjCoordSys.indexOf(":"),e.prjCoordSys.length)+"}"),c={point2Ds:j.toJSON(i),unit:e.unit,prjCoordSys:u,distanceMode:e.distanceMode||"Geodesic"}):c={point2Ds:j.toJSON(i),unit:e.unit,distanceMode:e.distanceMode||"Geodesic"},a.request({method:"GET",params:c,scope:a,success:function(e,t){e.eventId=r,this.serviceProcessCompleted(e,t)},failure:function(e,t){e.error&&(e.error.eventId=r),e.eventId=r,this.serviceProcessFailed(e,t)}})}}}}])&&J_(t.prototype,r),n&&J_(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function rx(e){"@babel/helpers - typeof";return(rx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function nx(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ox(e,t){return(ox=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function ix(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=ax(e);if(t){var o=ax(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===rx(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function ax(e){return(ax=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var sx=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ox(e,t)}(i,Tf);var t,r,n,o=ix(i);function i(e,t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.call(this,e,t)}return t=i,(r=[{key:"measureDistance",value:function(e,t){this.measure(e,"DISTANCE",t)}},{key:"measureArea",value:function(e,t){this.measure(e,"AREA",t)}},{key:"measure",value:function(e,t,r){var n=this;new tx(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,measureMode:t}).processAsync(n._processParam(e),r)}},{key:"_processParam",value:function(e){return!e||e.geometry instanceof m||(e.geometry=xr.toSuperMapGeometry(e.geometry)),e}}])&&nx(t.prototype,r),n&&nx(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function ux(e){"@babel/helpers - typeof";return(ux="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function lx(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function cx(){return(cx="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=px(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function fx(e,t){return(fx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function hx(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=px(e);if(t){var o=px(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===ux(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function px(e){return(px=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var dx=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&fx(e,t)}(i,Nf);var t,r,n,o=hx(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t)).format=Et.GEOJSON,r.CLASS_NAME="SuperMap.NetworkAnalystServiceBase",r}return t=i,(r=[{key:"destroy",value:function(){cx(px(i.prototype),"destroy",this).call(this),this.format=null}},{key:"serviceProcessCompleted",value:function(e,t){var r;(e=j.transformResult(e))&&this.format===Et.GEOJSON&&"function"==typeof this.toGeoJSONResult&&(r=this.toGeoJSONResult(e)),r||(r=e),this.events.triggerEvent("processCompleted",{result:r,options:t})}},{key:"toGeoJSONResult",value:function(e){return null}}])&&lx(t.prototype,r),n&&lx(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function yx(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var vx=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);this.sourceNodeIDs=null,this.edgeID=null,this.nodeID=null,this.isUncertainDirectionValid=!1,j.extend(this,t),this.CLASS_NAME="SuperMap.BurstPipelineAnalystParameters"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){this.sourceNodeIDs=null,this.edgeID=null,this.nodeID=null,this.isUncertainDirectionValid=null}}])&&yx(t.prototype,r),n&&yx(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function gx(e){"@babel/helpers - typeof";return(gx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function mx(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function bx(){return(bx="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=xx(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function wx(e,t){return(wx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function _x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=xx(e);if(t){var o=xx(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===gx(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function xx(e){return(xx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Sx=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&wx(e,t)}(i,dx);var t,r,n,o=_x(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t)).CLASS_NAME="SuperMap.BurstPipelineAnalystService",r}return t=i,(r=[{key:"destroy",value:function(){bx(xx(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(!(e instanceof vx))return null;var t,r=this;if(r.url=j.urlPathAppend(r.url,"burstAnalyse"),t={sourceNodeIDs:e.sourceNodeIDs,isUncertainDirectionValid:e.isUncertainDirectionValid},null!==e.edgeID&&null!==e.nodeID)throw new Error("edgeID and nodeID cannot be null at the same time.");if(null===e.edgeID&&null===e.nodeID)throw new Error("edgeID and nodeID cannot be null at the same time.");null!==e.edgeID?t.edgeID=e.edgeID:t.nodeID=e.nodeID,r.request({method:"GET",params:t,scope:r,success:r.serviceProcessCompleted,failure:r.serviceProcessFailed})}}])&&mx(t.prototype,r),n&&mx(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Ox(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Px=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.returnEdgeFeatures=!1,this.returnEdgeGeometry=!1,this.returnEdgeIDs=!1,this.returnNodeFeatures=!1,this.returnNodeGeometry=!1,this.returnNodeIDs=!1,this.returnPathGuides=!1,this.returnRoutes=!1,j.extend(this,t),this.CLASS_NAME="SuperMap.TransportationAnalystResultSetting")}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){var e=this;e.returnEdgeFeatures=null,e.returnEdgeGeometry=null,e.returnEdgeIDs=null,e.returnNodeFeatures=null,e.returnNodeGeometry=null,e.returnNodeIDs=null,e.returnPathGuides=null,e.returnRoutes=null}}])&&Ox(t.prototype,r),n&&Ox(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Ex(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var kx=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.barrierEdgeIDs=null,this.barrierNodeIDs=null,this.barrierPoints=null,this.weightFieldName=null,this.turnWeightField=null,this.resultSetting=new Px,j.extend(this,t),this.CLASS_NAME="SuperMap.TransportationAnalystParameter")}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){var e=this;if(e.barrierEdgeIDs=null,e.barrierNodeIDs=null,e.weightFieldName=null,e.turnWeightField=null,e.resultSetting&&(e.resultSetting.destroy(),e.resultSetting=null),e.barrierPoints&&e.barrierPoints.length)for(var t in e.barrierPoints)e.barrierPoints[t].destroy();e.barrierPoints=null}}])&&Ex(t.prototype,r),n&&Ex(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Mx(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Cx=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.isAnalyzeById=!1,this.nodes=null,this.parameter=new kx,j.extend(this,t),this.CLASS_NAME="SuperMap.ComputeWeightMatrixParameters"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){var e=this;e.isAnalyzeById=null,e.nodes=null,e.parameter&&(e.parameter.destroy(),e.parameter=null)}}])&&Mx(t.prototype,r),n&&Mx(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function jx(e){"@babel/helpers - typeof";return(jx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Tx(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ax(){return(Ax="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Lx(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function Ix(e,t){return(Ix=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Rx(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Lx(e);if(t){var o=Lx(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===jx(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function Lx(e){return(Lx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Nx=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ix(e,t)}(i,dx);var t,r,n,o=Rx(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t)).CLASS_NAME="SuperMap.ComputeWeightMatrixService",r}return t=i,(r=[{key:"destroy",value:function(){Ax(Lx(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof Cx){var t,r=this;r.url=j.urlPathAppend(r.url,"weightmatrix"),t={parameter:j.toJSON(e.parameter),nodes:r.getJson(e.isAnalyzeById,e.nodes)},r.request({method:"GET",params:t,scope:r,success:r.serviceProcessCompleted,failure:r.serviceProcessFailed})}}},{key:"getJson",value:function(e,t){var r="[",n=t?t.length:0;if(!1===e)for(var o=0;o<n;o++)o>0&&(r+=","),r+='{"x":'+t[o].x+',"y":'+t[o].y+"}";else if(!0===e)for(var i=0;i<n;i++)i>0&&(r+=","),r+=t[i];return r+="]"}}])&&Tx(t.prototype,r),n&&Tx(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Dx(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Bx=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.sourceNodeIDs=null,this.edgeID=null,this.nodeID=null,this.isUncertainDirectionValid=!1,this.queryType=null,j.extend(this,t),this.CLASS_NAME="SuperMap.FacilityAnalystStreamParameters"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){var e=this;e.edgeID=null,e.nodeID=null,e.weightName=null,e.isUncertainDirectionValid=null,e.type=null}}])&&Dx(t.prototype,r),n&&Dx(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Fx(e){"@babel/helpers - typeof";return(Fx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Gx(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function zx(){return(zx="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Wx(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function Ux(e,t){return(Ux=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Vx(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Wx(e);if(t){var o=Wx(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===Fx(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function Wx(e){return(Wx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Yx=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ux(e,t)}(i,dx);var t,r,n,o=Vx(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t)).CLASS_NAME="SuperMap.FacilityAnalystStreamService",r}return t=i,(r=[{key:"destroy",value:function(){zx(Wx(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof Bx){var t,r=this;if(0===e.queryType)r.url=j.urlPathAppend(r.url,"upstreamcirticalfaclilities");else{if(1!==e.queryType)return;r.url=j.urlPathAppend(r.url,"downstreamcirticalfaclilities")}t={sourceNodeIDs:e.sourceNodeIDs,isUncertainDirectionValid:e.isUncertainDirectionValid},null!==e.edgeID&&null!==e.nodeID||null===e.edgeID&&null===e.nodeID||(null!==e.edgeID?t.edgeID=e.edgeID:t.nodeID=e.nodeID,r.request({method:"GET",params:t,scope:r,success:r.serviceProcessCompleted,failure:r.serviceProcessFailed}))}}}])&&Gx(t.prototype,r),n&&Gx(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Hx(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Xx=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.event=null,this.expectFacilityCount=1,this.facilities=null,this.fromEvent=!1,this.isAnalyzeById=!1,this.maxWeight=0,this.parameter=new kx,j.extend(this,t),this.CLASS_NAME="SuperMap.FindClosestFacilitiesParameters"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){var e=this;e.event=null,e.expectFacilityCount=null,e.facilities=null,e.fromEvent=null,e.isAnalyzeById=null,e.maxWeight=null,e.parameter&&(e.parameter.destroy(),e.parameter=null)}}])&&Hx(t.prototype,r),n&&Hx(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function qx(e){"@babel/helpers - typeof";return(qx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Jx(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Zx(){return(Zx="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=$x(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function Kx(e,t){return(Kx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Qx(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=$x(e);if(t){var o=$x(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===qx(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function $x(e){return($x=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var eS=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Kx(e,t)}(i,dx);var t,r,n,o=Qx(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t)).CLASS_NAME="SuperMap.FindClosestFacilitiesService",r}return t=i,(r=[{key:"destroy",value:function(){Zx($x(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof Xx){var t,r=this;r.url=j.urlPathAppend(r.url,"closestfacility"),t={expectFacilityCount:e.expectFacilityCount,fromEvent:e.fromEvent,maxWeight:e.maxWeight,parameter:j.toJSON(e.parameter),event:j.toJSON(e.event),facilities:r.getJson(e.isAnalyzeById,e.facilities)},r.request({method:"GET",params:t,scope:r,success:r.serviceProcessCompleted,failure:r.serviceProcessFailed})}}},{key:"getJson",value:function(e,t){var r="[",n=t?t.length:0;if(!1===e)for(var o=0;o<n;o++)o>0&&(r+=","),r+='{"x":'+t[o].x+',"y":'+t[o].y+"}";else if(!0===e)for(var i=0;i<n;i++)i>0&&(r+=","),r+=t[i];return r+="]"}},{key:"toGeoJSONResult",value:function(e){if(!e||!e.facilityPathList)return e;var t=new br;return e.facilityPathList.map(function(e){return e.route&&(e.route=t.toGeoJSON(e.route)),e.pathGuideItems&&(e.pathGuideItems=t.toGeoJSON(e.pathGuideItems)),e.edgeFeatures&&(e.edgeFeatures=t.toGeoJSON(e.edgeFeatures)),e.nodeFeatures&&(e.nodeFeatures=t.toGeoJSON(e.nodeFeatures)),e}),e}}])&&Jx(t.prototype,r),n&&Jx(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function tS(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var rS=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.expectedSupplyCenterCount=null,this.isFromCenter=!1,this.supplyCenters=null,this.turnWeightField=null,this.weightName=null,j.extend(this,t),this.CLASS_NAME="SuperMap.FindLocationParameters"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){var e=this;if(e.expectedSupplyCenterCount=null,e.isFromCenter=null,e.turnWeightField=null,e.weightName=null,e.supplyCenters){for(var t=0,r=e.supplyCenters,n=r.length;t<n;t++)r[t].destroy();e.supplyCenters=null}}}])&&tS(t.prototype,r),n&&tS(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function nS(e){"@babel/helpers - typeof";return(nS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function oS(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function iS(){return(iS="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=uS(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function aS(e,t){return(aS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function sS(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=uS(e);if(t){var o=uS(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===nS(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function uS(e){return(uS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var lS=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&aS(e,t)}(i,dx);var t,r,n,o=sS(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t)).CLASS_NAME="SuperMap.FindLocationService",r}return t=i,(r=[{key:"destroy",value:function(){iS(uS(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof rS){var t,r=this;r.url=j.urlPathAppend(r.url,"location"),t={isFromCenter:e.isFromCenter,expectedSupplyCenterCount:e.expectedSupplyCenterCount,weightName:e.weightName,turnWeightField:e.turnWeightField,returnEdgeFeature:!0,returnEdgeGeometry:!0,returnNodeFeature:!0,mapParameter:j.toJSON(e.mapParameter),supplyCenters:r.getCentersJson(e.supplyCenters)},r.request({method:"GET",params:t,scope:r,success:r.serviceProcessCompleted,failure:r.serviceProcessFailed})}}},{key:"getCentersJson",value:function(e){for(var t="[",r=e?e.length:0,n=0;n<r;n++)n>0&&(t+=","),t+=j.toJSON(e[n]);return t+="]"}},{key:"toGeoJSONResult",value:function(e){if(!e)return null;var t=new br;return e.demandResults&&(e.demandResults=t.toGeoJSON(e.demandResults)),e.supplyResults&&(e.supplyResults=t.toGeoJSON(e.supplyResults)),e}}])&&oS(t.prototype,r),n&&oS(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function cS(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var fS=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.centers=null,this.hasLeastTotalCost=!1,this.isAnalyzeById=!1,this.nodes=null,this.parameter=new kx,j.extend(this,t),this.CLASS_NAME="SuperMap.FindMTSPPathsParameters"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){var e=this;e.centers=null,e.hasLeastTotalCost=null,e.isAnalyzeById=null,e.nodes=null,e.maxWeight=null,e.parameter&&(e.parameter.destroy(),e.parameter=null)}}])&&cS(t.prototype,r),n&&cS(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function hS(e){"@babel/helpers - typeof";return(hS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pS(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function dS(){return(dS="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=gS(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function yS(e,t){return(yS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function vS(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=gS(e);if(t){var o=gS(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===hS(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function gS(e){return(gS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var mS=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&yS(e,t)}(i,dx);var t,r,n,o=vS(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t)).CLASS_NAME="SuperMap.FindMTSPPathsService",r}return t=i,(r=[{key:"destroy",value:function(){dS(gS(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof fS){var t,r=this,n=r.getJson(e.isAnalyzeById,e.centers),o=r.getJson(e.isAnalyzeById,e.nodes);r.url=j.urlPathAppend(r.url,"mtsppath"),t={centers:n,nodes:o,parameter:j.toJSON(e.parameter),hasLeastTotalCost:e.hasLeastTotalCost},r.request({method:"GET",params:t,scope:r,success:r.serviceProcessCompleted,failure:r.serviceProcessFailed})}}},{key:"getJson",value:function(e,t){var r="[",n=t?t.length:0;if(!1===e)for(var o=0;o<n;o++)o>0&&(r+=","),r+='{"x":'+t[o].x+',"y":'+t[o].y+"}";else if(!0===e)for(var i=0;i<n;i++)i>0&&(r+=","),r+=t[i];return r+="]"}},{key:"toGeoJSONResult",value:function(e){if(!e||!e.pathList)return null;var t=new br;return e.pathList.map(function(e){return e.route&&(e.route=t.toGeoJSON(e.route)),e.pathGuideItems&&(e.pathGuideItems=t.toGeoJSON(e.pathGuideItems)),e.edgeFeatures&&(e.edgeFeatures=t.toGeoJSON(e.edgeFeatures)),e.nodeFeatures&&(e.nodeFeatures=t.toGeoJSON(e.nodeFeatures)),e}),e}}])&&pS(t.prototype,r),n&&pS(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function bS(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var wS=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.isAnalyzeById=!1,this.hasLeastEdgeCount=null,this.nodes=null,this.parameter=new kx,j.extend(this,t),this.CLASS_NAME="SuperMap.FindPathParameters"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){var e=this;e.isAnalyzeById=null,e.hasLeastEdgeCount=null,e.nodes=null,e.parameter&&(e.parameter.destroy(),e.parameter=null)}}])&&bS(t.prototype,r),n&&bS(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function _S(e){"@babel/helpers - typeof";return(_S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xS(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function SS(){return(SS="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ES(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function OS(e,t){return(OS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function PS(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=ES(e);if(t){var o=ES(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===_S(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function ES(e){return(ES=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var kS=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&OS(e,t)}(i,dx);var t,r,n,o=PS(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t)).CLASS_NAME="SuperMap.FindPathService",r}return t=i,(r=[{key:"destroy",value:function(){SS(ES(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof wS){var t,r=this;r.url=j.urlPathAppend(r.url,"path"),t={hasLeastEdgeCount:e.hasLeastEdgeCount,parameter:j.toJSON(e.parameter),nodes:r.getJson(e.isAnalyzeById,e.nodes)},r.request({method:"GET",params:t,scope:r,success:r.serviceProcessCompleted,failure:r.serviceProcessFailed})}}},{key:"getJson",value:function(e,t){var r="[",n=t?t.length:0;if(!1===e)for(var o=0;o<n;o++)o>0&&(r+=","),r+='{"x":'+t[o].x+',"y":'+t[o].y+"}";else if(!0===e)for(var i=0;i<n;i++)i>0&&(r+=","),r+=t[i];return r+="]"}},{key:"toGeoJSONResult",value:function(e){if(!e||!e.pathList||e.pathList.length<1)return null;var t=new br;return e.pathList.forEach(function(e){e.route&&(e.route=t.toGeoJSON(e.route)),e.pathGuideItems&&(e.pathGuideItems=t.toGeoJSON(e.pathGuideItems)),e.edgeFeatures&&(e.edgeFeatures=t.toGeoJSON(e.edgeFeatures)),e.nodeFeatures&&(e.nodeFeatures=t.toGeoJSON(e.nodeFeatures))}),e}}])&&xS(t.prototype,r),n&&xS(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function MS(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var CS=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.isAnalyzeById=!1,this.isCenterMutuallyExclusive=!1,this.centers=null,this.isFromCenter=!1,this.weights=null,this.parameter=new kx,j.extend(this,t),this.CLASS_NAME="SuperMap.FindServiceAreasParameters"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){var e=this;e.isAnalyzeById=null,e.isCenterMutuallyExclusive=null,e.centers=null,e.isFromCenter=null,e.weights=null,e.parameter&&(e.parameter.destroy(),e.parameter=null)}}])&&MS(t.prototype,r),n&&MS(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function jS(e){"@babel/helpers - typeof";return(jS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function TS(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function AS(){return(AS="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=LS(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function IS(e,t){return(IS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function RS(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=LS(e);if(t){var o=LS(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===jS(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function LS(e){return(LS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var NS=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&IS(e,t)}(i,dx);var t,r,n,o=RS(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t)).CLASS_NAME="SuperMap.FindServiceAreasService",r}return t=i,(r=[{key:"destroy",value:function(){AS(LS(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof CS){var t,r=this;r.url=j.urlPathAppend(r.url,"servicearea"),t={isFromCenter:e.isFromCenter,isCenterMutuallyExclusive:e.isCenterMutuallyExclusive,parameter:j.toJSON(e.parameter),centers:r.getJson(e.isAnalyzeById,e.centers),weights:r.getJson(!0,e.weights)},r.request({method:"GET",params:t,scope:r,success:r.serviceProcessCompleted,failure:r.serviceProcessFailed})}}},{key:"getJson",value:function(e,t){var r="[",n=t?t.length:0;if(!1===e)for(var o=0;o<n;o++)o>0&&(r+=","),r+='{"x":'+t[o].x+',"y":'+t[o].y+"}";else if(!0===e)for(var i=0;i<n;i++)i>0&&(r+=","),r+=t[i];return r+="]"}},{key:"toGeoJSONResult",value:function(e){if(!e||!e.serviceAreaList)return e;var t=new br;return e.serviceAreaList.map(function(e){return e.serviceRegion&&(e.serviceRegion=t.toGeoJSON(e.serviceRegion)),e.edgeFeatures&&(e.edgeFeatures=t.toGeoJSON(e.edgeFeatures)),e.nodeFeatures&&(e.nodeFeatures=t.toGeoJSON(e.nodeFeatures)),e.routes&&(e.routes=t.toGeoJSON(e.routes)),e}),e}}])&&TS(t.prototype,r),n&&TS(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function DS(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var BS=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.endNodeAssigned=!1,this.isAnalyzeById=!1,this.nodes=null,this.parameter=new kx,j.extend(this,t),this.CLASS_NAME="SuperMap.FindTSPPathsParameters"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){var e=this;e.endNodeAssigned=null,e.isAnalyzeById=null,e.nodes=null,e.parameter&&(e.parameter.destroy(),e.parameter=null)}}])&&DS(t.prototype,r),n&&DS(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function FS(e){"@babel/helpers - typeof";return(FS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function GS(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function zS(){return(zS="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=WS(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function US(e,t){return(US=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function VS(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=WS(e);if(t){var o=WS(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===FS(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function WS(e){return(WS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var YS=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&US(e,t)}(i,dx);var t,r,n,o=VS(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t)).CLASS_NAME="SuperMap.FindTSPPathsService",r}return t=i,(r=[{key:"destroy",value:function(){zS(WS(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof BS){var t,r=this;r.url=j.urlPathAppend(r.url,"tsppath"),t={parameter:j.toJSON(e.parameter),endNodeAssigned:e.endNodeAssigned,nodes:r.getNodesJson(e)},r.request({method:"GET",params:t,scope:r,success:r.serviceProcessCompleted,failure:r.serviceProcessFailed})}}},{key:"getNodesJson",value:function(e){var t,r,n,o,i="";if(!1===e.isAnalyzeById){for(t="[",r=0,n=(o=e.nodes).length;r<n;r++)r>0&&(t+=","),t+='{"x":'+o[r].x+',"y":'+o[r].y+"}";i+=t+="]"}else if(!0===e.isAnalyzeById){for(var a="[",s=e.nodes,u=s.length,l=0;l<u;l++)l>0&&(a+=","),a+=s[l];i+=a+="]"}return i}},{key:"toGeoJSONResult",value:function(e){if(!e||!e.tspPathList)return null;var t=new br;return e.tspPathList.forEach(function(e){e.route&&(e.route=t.toGeoJSON(e.route)),e.pathGuideItems&&(e.pathGuideItems=t.toGeoJSON(e.pathGuideItems)),e.edgeFeatures&&(e.edgeFeatures=t.toGeoJSON(e.edgeFeatures)),e.nodeFeatures&&(e.nodeFeatures=t.toGeoJSON(e.nodeFeatures))}),e}}])&&GS(t.prototype,r),n&&GS(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function HS(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var XS=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.edgeId="",this.fromNodeId="",this.toNodeId="",this.weightField="",this.edgeWeight="",j.extend(this,t),this.CLASS_NAME="SuperMap.UpdateEdgeWeightParameters")}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){this.edgeId=null,this.fromNodeId=null,this.toNodeId=null,this.weightField=null,this.edgeWeight=null}}])&&HS(t.prototype,r),n&&HS(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function qS(e){"@babel/helpers - typeof";return(qS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function JS(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ZS(){return(ZS="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=$S(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function KS(e,t){return(KS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function QS(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=$S(e);if(t){var o=$S(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===qS(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function $S(e){return($S=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var eO=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&KS(e,t)}(i,dx);var t,r,n,o=QS(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t)).CLASS_NAME="SuperMap.UpdateEdgeWeightService",r}return t=i,(r=[{key:"destroy",value:function(){ZS($S(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof XS){var t=this,r=t.parse(e);t.url=j.urlPathAppend(t.url,r);var n=e.edgeWeight?e.edgeWeight:null;t.request({method:"PUT",scope:t,data:n,success:t.serviceProcessCompleted,failure:t.serviceProcessFailed})}}},{key:"parse",value:function(e){if(e){var t="";for(var r in e)if(""!==e[r]&&"edgeWeight"!==e[r])switch(r){case"edgeId":t+="/edgeweight/"+e[r];break;case"fromNodeId":t+="/fromnode/"+e[r];break;case"toNodeId":t+="/tonode/"+e[r];break;case"weightField":t+="/weightfield/"+e[r]}return t}}}])&&JS(t.prototype,r),n&&JS(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function tO(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var rO=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.nodeId="",this.fromEdgeId="",this.toEdgeId="",this.weightField="",this.turnNodeWeight="",j.extend(this,t),this.CLASS_NAME="SuperMap.UpdateTurnNodeWeightParameters")}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){this.nodeId=null,this.fromEdgeId=null,this.toEdgeId=null,this.weightField=null,this.turnNodeWeight=null}}])&&tO(t.prototype,r),n&&tO(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function nO(e){"@babel/helpers - typeof";return(nO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function oO(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function iO(){return(iO="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=uO(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function aO(e,t){return(aO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function sO(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=uO(e);if(t){var o=uO(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===nO(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function uO(e){return(uO=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var lO=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&aO(e,t)}(i,dx);var t,r,n,o=sO(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t)).CLASS_NAME="SuperMap.UpdateTurnNodeWeightService",r}return t=i,(r=[{key:"destroy",value:function(){iO(uO(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof rO){var t=this,r=t.parse(e);t.url=j.urlPathAppend(t.url,r);var n=e.turnNodeWeight?e.turnNodeWeight:null;t.request({method:"PUT",scope:t,data:n,success:t.serviceProcessCompleted,failure:t.serviceProcessFailed})}}},{key:"parse",value:function(e){if(e){var t="";for(var r in e)if(""!==e[r]&&"turnNodeWeight"!==e[r])switch(r){case"nodeId":t+="/turnnodeweight/"+e[r];break;case"fromEdgeId":t+="/fromedge/"+e[r];break;case"toEdgeId":t+="/toedge/"+e[r];break;case"weightField":t+="/weightfield/"+e[r]}return t}}}])&&oO(t.prototype,r),n&&oO(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function cO(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var fO=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.url=t,this.options=r||{}}var t,r,n;return t=e,(r=[{key:"burstPipelineAnalyst",value:function(e,t){var r=this;new Sx(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,eventListeners:{scope:r,processCompleted:t,processFailed:t}}).processAsync(e)}},{key:"computeWeightMatrix",value:function(e,t){var r=this;new Nx(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,eventListeners:{scope:r,processCompleted:t,processFailed:t}}).processAsync(e)}},{key:"findClosestFacilities",value:function(e,t,r){var n=this;new eS(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,eventListeners:{scope:n,processCompleted:t,processFailed:t},format:n._processFormat(r)}).processAsync(e)}},{key:"streamFacilityAnalyst",value:function(e,t,r){var n=this;new Yx(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,eventListeners:{scope:n,processCompleted:t,processFailed:t},format:n._processFormat(r)}).processAsync(e)}},{key:"findLocation",value:function(e,t,r){var n=this;new lS(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,eventListeners:{scope:n,processCompleted:t,processFailed:t},format:n._processFormat(r)}).processAsync(e)}},{key:"findPath",value:function(e,t,r){var n=this;new kS(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,eventListeners:{scope:n,processCompleted:t,processFailed:t},format:n._processFormat(r)}).processAsync(e)}},{key:"findTSPPaths",value:function(e,t,r){var n=this;new YS(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,eventListeners:{scope:n,processCompleted:t,processFailed:t},format:n._processFormat(r)}).processAsync(e)}},{key:"findMTSPPaths",value:function(e,t,r){var n=this;new mS(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,eventListeners:{scope:n,processCompleted:t,processFailed:t},format:n._processFormat(r)}).processAsync(e)}},{key:"findServiceAreas",value:function(e,t,r){var n=this;new NS(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,eventListeners:{scope:n,processCompleted:t,processFailed:t},format:n._processFormat(r)}).processAsync(e)}},{key:"updateEdgeWeight",value:function(e,t){var r=this;new eO(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,eventListeners:{scope:r,processCompleted:t,processFailed:t}}).processAsync(e)}},{key:"updateTurnNodeWeight",value:function(e,t){var r=this;new lO(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,eventListeners:{scope:r,processCompleted:t,processFailed:t}}).processAsync(e)}},{key:"_processFormat",value:function(e){return e||Et.GEOJSON}}])&&cO(t.prototype,r),n&&cO(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function hO(e){"@babel/helpers - typeof";return(hO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pO(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function dO(e,t){return(dO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function yO(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=vO(e);if(t){var o=vO(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===hO(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function vO(e){return(vO=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var gO=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&dO(e,t)}(a,Tf);var t,r,n,i=yO(a);function a(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(r=i.call(this,e,t))._networkAnalystService=new fO(e,t),r}return t=a,(r=[{key:"burstPipelineAnalyst",value:function(e,t){e=this._processParams(e),this._networkAnalystService.burstPipelineAnalyst(e,t)}},{key:"computeWeightMatrix",value:function(e,t){e=this._processParams(e),this._networkAnalystService.computeWeightMatrix(e,t)}},{key:"findClosestFacilities",value:function(e,t,r){e=this._processParams(e),this._networkAnalystService.findClosestFacilities(e,t,r)}},{key:"streamFacilityAnalyst",value:function(e,t,r){e=this._processParams(e),this._networkAnalystService.streamFacilityAnalyst(e,t,r)}},{key:"findLocation",value:function(e,t,r){e=this._processParams(e),this._networkAnalystService.findLocation(e,t,r)}},{key:"findPath",value:function(e,t,r){e=this._processParams(e),this._networkAnalystService.findPath(e,t,r)}},{key:"findTSPPaths",value:function(e,t,r){e=this._processParams(e),this._networkAnalystService.findTSPPaths(e,t,r)}},{key:"findMTSPPaths",value:function(e,t,r){e=this._processParams(e),this._networkAnalystService.findMTSPPaths(e,t,r)}},{key:"findServiceAreas",value:function(e,t,r){e=this._processParams(e),this._networkAnalystService.findServiceAreas(e,t,r)}},{key:"updateEdgeWeight",value:function(e,t){this._networkAnalystService.updateEdgeWeight(e,t)}},{key:"updateTurnNodeWeight",value:function(e,t){this._networkAnalystService.updateTurnNodeWeight(e,t)}},{key:"_processParams",value:function(e){if(!e)return{};var t=this;if(e.centers&&xr.isArray(e.centers)&&e.centers.map(function(r,n){return e.centers[n]=t._toPointObject(r),e.centers[n]}),e.nodes&&xr.isArray(e.nodes)&&e.nodes.map(function(r,n){return e.nodes[n]=t._toPointObject(r),e.nodes[n]}),e.event&&(e.event=t._toPointObject(e.event)),e.facilities&&xr.isArray(e.facilities)&&e.facilities.map(function(r,n){return e.facilities[n]=t._toPointObject(r),e.facilities[n]}),e.parameter&&e.parameter.barrierPoints){var r=e.parameter.barrierPoints;xr.isArray(r)?r.map(function(r,n){return e.parameter[n]=t._toPointObject(r),e.parameter.barrierPoints[n]}):e.parameter.barrierPoints=[r instanceof o().LngLat?{x:r.lng,y:r.lat}:r]}return e}},{key:"_toPointObject",value:function(e){return xr.isArray(e)?{x:e[0],y:e[1]}:e instanceof o().LngLat?{x:e.lng,y:e.lat}:e instanceof o().Point?{x:e.x,y:e.y}:e}},{key:"_processFormat",value:function(e){return e||Et.GEOJSON}}])&&pO(t.prototype,r),n&&pO(t,n),Object.defineProperty(t,"prototype",{writable:!1}),a}();function mO(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var bO=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.edgeID=null,this.nodeID=null,this.weightName=null,this.isUncertainDirectionValid=!1,j.extend(this,t),this.CLASS_NAME="SuperMap.FacilityAnalyst3DParameters"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){this.edgeID=null,this.nodeID=null,this.weightName=null,this.isUncertainDirectionValid=null}}])&&mO(t.prototype,r),n&&mO(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function wO(e){"@babel/helpers - typeof";return(wO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _O(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function xO(){return(xO="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=PO(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function SO(e,t){return(SO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function OO(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=PO(e);if(t){var o=PO(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===wO(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function PO(e){return(PO=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var EO=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&SO(e,t)}(i,bO);var t,r,n,o=OO(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).CLASS_NAME="SuperMap.FacilityAnalystSinks3DParameters",t}return t=i,(r=[{key:"destroy",value:function(){xO(PO(i.prototype),"destroy",this).call(this)}}])&&_O(t.prototype,r),n&&_O(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function kO(e){"@babel/helpers - typeof";return(kO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function MO(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function CO(e,t){return(CO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function jO(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=TO(e);if(t){var o=TO(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===kO(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function TO(e){return(TO=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var AO=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&CO(e,t)}(i,Nf);var t,r,n,o=jO(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t)).CLASS_NAME="SuperMap.FacilityAnalystSinks3DService",r}return t=i,(r=[{key:"destroy",value:function(){Nf.prototype.destroy.apply(this,arguments)}},{key:"processAsync",value:function(e){if(e instanceof EO){var t,r=this;r.url=j.urlPathAppend(r.url,"sinks"),t={edgeID:e.edgeID,nodeID:e.nodeID,weightName:e.weightName,isUncertainDirectionValid:e.isUncertainDirectionValid},r.request({method:"GET",params:t,scope:r,success:r.serviceProcessCompleted,failure:r.serviceProcessFailed})}}}])&&MO(t.prototype,r),n&&MO(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function IO(e){"@babel/helpers - typeof";return(IO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function RO(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function LO(){return(LO="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=BO(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function NO(e,t){return(NO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function DO(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=BO(e);if(t){var o=BO(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===IO(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function BO(e){return(BO=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var FO=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&NO(e,t)}(i,bO);var t,r,n,o=DO(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).CLASS_NAME="SuperMap.FacilityAnalystSources3DParameters",t}return t=i,(r=[{key:"destroy",value:function(){LO(BO(i.prototype),"destroy",this).call(this)}}])&&RO(t.prototype,r),n&&RO(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function GO(e){"@babel/helpers - typeof";return(GO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function zO(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function UO(){return(UO="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=YO(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function VO(e,t){return(VO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function WO(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=YO(e);if(t){var o=YO(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===GO(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function YO(e){return(YO=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var HO=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&VO(e,t)}(i,Nf);var t,r,n,o=WO(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t)).CLASS_NAME="SuperMap.FacilityAnalystSources3DService",r}return t=i,(r=[{key:"destroy",value:function(){UO(YO(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof FO){var t,r=this;r.url=j.urlPathAppend(r.url,"sources"),t={edgeID:e.edgeID,nodeID:e.nodeID,weightName:e.weightName,isUncertainDirectionValid:e.isUncertainDirectionValid},r.request({method:"GET",params:t,scope:r,success:r.serviceProcessCompleted,failure:r.serviceProcessFailed})}}}])&&zO(t.prototype,r),n&&zO(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function XO(e){"@babel/helpers - typeof";return(XO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qO(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function JO(){return(JO="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=QO(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function ZO(e,t){return(ZO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function KO(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=QO(e);if(t){var o=QO(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===XO(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function QO(e){return(QO=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var $O=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ZO(e,t)}(i,bO);var t,r,n,o=KO(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).CLASS_NAME="SuperMap.FacilityAnalystTraceup3DParameters",t}return t=i,(r=[{key:"destroy",value:function(){JO(QO(i.prototype),"destroy",this).call(this)}}])&&qO(t.prototype,r),n&&qO(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function eP(e){"@babel/helpers - typeof";return(eP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tP(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function rP(){return(rP="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=iP(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function nP(e,t){return(nP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function oP(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=iP(e);if(t){var o=iP(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===eP(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function iP(e){return(iP=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var aP=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&nP(e,t)}(i,Nf);var t,r,n,o=oP(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t)).CLASS_NAME="SuperMap.FacilityAnalystTraceup3DService",r}return t=i,(r=[{key:"destroy",value:function(){rP(iP(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof $O){var t,r=this;r.url=j.urlPathAppend(r.url,"traceupresult"),t={edgeID:e.edgeID,nodeID:e.nodeID,weightName:e.weightName,isUncertainDirectionValid:e.isUncertainDirectionValid},r.request({method:"GET",params:t,scope:r,success:r.serviceProcessCompleted,failure:r.serviceProcessFailed})}}}])&&tP(t.prototype,r),n&&tP(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function sP(e){"@babel/helpers - typeof";return(sP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function uP(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function lP(){return(lP="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=hP(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function cP(e,t){return(cP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function fP(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=hP(e);if(t){var o=hP(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===sP(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function hP(e){return(hP=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var pP=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&cP(e,t)}(i,bO);var t,r,n,o=fP(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).CLASS_NAME="SuperMap.FacilityAnalystTracedown3DParameters",t}return t=i,(r=[{key:"destroy",value:function(){lP(hP(i.prototype),"destroy",this).call(this)}}])&&uP(t.prototype,r),n&&uP(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function dP(e){"@babel/helpers - typeof";return(dP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yP(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function vP(){return(vP="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=bP(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function gP(e,t){return(gP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function mP(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=bP(e);if(t){var o=bP(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===dP(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function bP(e){return(bP=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var wP=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&gP(e,t)}(i,Nf);var t,r,n,o=mP(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t)).CLASS_NAME="SuperMap.FacilityAnalystTracedown3DService",r}return t=i,(r=[{key:"destroy",value:function(){vP(bP(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof pP){var t,r=this;r.url=j.urlPathAppend(r.url,"tracedownresult"),t={edgeID:e.edgeID,nodeID:e.nodeID,weightName:e.weightName,isUncertainDirectionValid:e.isUncertainDirectionValid},r.request({method:"GET",params:t,scope:r,success:r.serviceProcessCompleted,failure:r.serviceProcessFailed})}}}])&&yP(t.prototype,r),n&&yP(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function _P(e){"@babel/helpers - typeof";return(_P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xP(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function SP(){return(SP="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=kP(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function OP(e,t){return(OP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function PP(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=kP(e);if(t){var o=kP(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===_P(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return EP(e)}(this,r)}}function EP(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function kP(e){return(kP=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var MP=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&OP(e,t)}(i,bO);var t,r,n,o=PP(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),t=o.call(this,e),e=e||{},t.sourceNodeIDs=null,j.extend(EP(t),e),t.CLASS_NAME="SuperMap.FacilityAnalystUpstream3DParameters",t}return t=i,(r=[{key:"destroy",value:function(){SP(kP(i.prototype),"destroy",this).call(this),this.sourceNodeIDs=null}}])&&xP(t.prototype,r),n&&xP(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function CP(e){"@babel/helpers - typeof";return(CP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function jP(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function TP(){return(TP="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=RP(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function AP(e,t){return(AP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function IP(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=RP(e);if(t){var o=RP(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===CP(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function RP(e){return(RP=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var LP=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&AP(e,t)}(i,Nf);var t,r,n,o=IP(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t)).CLASS_NAME="SuperMap.FacilityAnalystUpstream3DService",r}return t=i,(r=[{key:"destroy",value:function(){TP(RP(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof MP){var t,r=this;r.url=j.urlPathAppend(r.url,"upstreamcirticalfaclilities"),t={sourceNodeIDs:e.sourceNodeIDs,edgeID:e.edgeID,nodeID:e.nodeID,isUncertainDirectionValid:e.isUncertainDirectionValid},r.request({method:"GET",params:t,scope:r,success:r.serviceProcessCompleted,failure:r.serviceProcessFailed})}}}])&&jP(t.prototype,r),n&&jP(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function NP(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var DP=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.url=t,this.options=r||{}}var t,r,n;return t=e,(r=[{key:"sinksFacilityAnalyst",value:function(e,t){var r=this;new AO(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,eventListeners:{scope:r,processCompleted:t,processFailed:t}}).processAsync(e)}},{key:"sourcesFacilityAnalyst",value:function(e,t){var r=this;new HO(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,eventListeners:{scope:r,processCompleted:t,processFailed:t}}).processAsync(e)}},{key:"traceUpFacilityAnalyst",value:function(e,t){var r=this;new aP(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,eventListeners:{scope:r,processCompleted:t,processFailed:t}}).processAsync(e)}},{key:"traceDownFacilityAnalyst",value:function(e,t){var r=this;new wP(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,eventListeners:{scope:r,processCompleted:t,processFailed:t}}).processAsync(e)}},{key:"upstreamFacilityAnalyst",value:function(e,t){var r=this;new LP(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,eventListeners:{scope:r,processCompleted:t,processFailed:t}}).processAsync(e)}}])&&NP(t.prototype,r),n&&NP(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function BP(e){"@babel/helpers - typeof";return(BP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function FP(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function GP(e,t){return(GP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function zP(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=UP(e);if(t){var o=UP(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===BP(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function UP(e){return(UP=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var VP=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&GP(e,t)}(i,Tf);var t,r,n,o=zP(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t))._networkAnalyst3DService=new DP(e,t),r}return t=i,(r=[{key:"sinksFacilityAnalyst",value:function(e,t){this._networkAnalyst3DService.sinksFacilityAnalyst(e,t)}},{key:"sourcesFacilityAnalyst",value:function(e,t){this._networkAnalyst3DService.sourcesFacilityAnalyst(e,t)}},{key:"traceUpFacilityAnalyst",value:function(e,t){this._networkAnalyst3DService.traceUpFacilityAnalyst(e,t)}},{key:"traceDownFacilityAnalyst",value:function(e,t){this._networkAnalyst3DService.traceDownFacilityAnalyst(e,t)}},{key:"upstreamFacilityAnalyst",value:function(e,t){this._networkAnalyst3DService.upstreamFacilityAnalyst(e,t)}}])&&FP(t.prototype,r),n&&FP(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function WP(e){"@babel/helpers - typeof";return(WP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function YP(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function HP(){return(HP="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=JP(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function XP(e,t){return(XP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function qP(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=JP(e);if(t){var o=JP(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===WP(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function JP(e){return(JP=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ZP=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&XP(e,t)}(i,Nf);var t,r,n,o=qP(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=t||{}).EVENT_TYPES=["processCompleted","processFailed","processRunning"],(r=o.call(this,e,t)).CLASS_NAME="SuperMap.ProcessingServiceBase",r}return t=i,(r=[{key:"destroy",value:function(){HP(JP(i.prototype),"destroy",this).call(this)}},{key:"getJobs",value:function(e){var t=this;Al.get(If.appendCredential(e),null,{proxy:t.proxy}).then(function(e){return e.json()}).then(function(e){t.events.triggerEvent("processCompleted",{result:e})}).catch(function(e){t.eventListeners.processFailed({error:e})})}},{key:"addJob",value:function(e,t,r,n){var o=this,i=null;t&&t instanceof r&&(i=new Object,r.toObject(t,i));var a=Object.assign({"Content-Type":"application/x-www-form-urlencoded"},o.headers||{}),s={proxy:o.proxy,headers:a,withCredentials:o.withCredentials,crossOrigin:o.crossOrigin,isInTheSameDomain:o.isInTheSameDomain};Al.post(If.appendCredential(e),JSON.stringify(i),s).then(function(e){return e.json()}).then(function(e){e.succeed?o.serviceProcessCompleted(e,n):o.serviceProcessFailed(e)}).catch(function(e){o.serviceProcessFailed({error:e})})}},{key:"serviceProcessCompleted",value:function(e,t){e=j.transformResult(e),t=t||1e3;var r=this;if(e)var n=setInterval(function(){Al.get(If.appendCredential(e.newResourceLocation),{_t:(new Date).getTime()}).then(function(e){return e.json()}).then(function(e){r.events.triggerEvent("processRunning",{id:e.id,state:e.state}),"LOST"!==e.state.runState&&"KILLED"!==e.state.runState&&"FAILED"!==e.state.runState||(clearInterval(n),r.events.triggerEvent("processFailed",{error:e.state.errorMsg,state:e.state.runState})),"FINISHED"===e.state.runState&&e.setting.serviceInfo&&(clearInterval(n),r.events.triggerEvent("processCompleted",{result:e}))}).catch(function(e){clearInterval(n),r.events.triggerEvent("processFailed",{error:e})})},t)}},{key:"serviceProcessFailed",value:function(e){HP(JP(i.prototype),"serviceProcessFailed",this).call(this,e)}}])&&YP(t.prototype,r),n&&YP(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function KP(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var QP=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.alias=null,this.connect=null,this.dataBase=null,this.driver=null,this.engineType=null,this.exclusive=null,this.OpenLinkTable=null,this.password=null,this.readOnly=null,this.server=null,this.user=null,t&&j.extend(this,t),this.CLASS_NAME="SuperMap.DatasourceConnectionInfo"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){var e=this;e.alias=null,e.connect=null,e.dataBase=null,e.driver=null,e.engineType=null,e.exclusive=null,e.OpenLinkTable=null,e.password=null,e.readOnly=null,e.server=null,e.user=null}}])&&KP(t.prototype,r),n&&KP(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function $P(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var eE=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.type=Ht.UDB,this.datasetName="analystResult",this.datasourceInfo=null,this.outputPath="",j.extend(this,t),this.CLASS_NAME="SuperMap.OutputSetting"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){var e=this;e.type=null,e.datasetName=null,e.outputPath=null,e.datasourceInfo instanceof QP&&(e.datasourceInfo.destroy(),e.datasourceInfo=null)}}])&&$P(t.prototype,r),n&&$P(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function tE(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var rE=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.items=null,this.numericPrecision=1,this.rangeMode=Bt.EQUALINTERVAL,this.rangeCount="",this.colorGradientType=Ft.YELLOW_RED,j.extend(this,t),this.CLASS_NAME="SuperMap.MappingParameters"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){var e=this;if(e.items){if(e.items.length>0)for(var t in e.items)e.items[t].destroy(),e.items[t]=null;e.items=null}e.numericPrecision=null,e.rangeMode=null,e.rangeCount=null,e.colorGradientType=null}}])&&tE(t.prototype,r),n&&tE(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function nE(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var oE=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.datasetName="",this.query="",this.resolution=80,this.method=0,this.meshType=0,this.fields="",this.radius=300,this.meshSizeUnit=or.METER,this.radiusUnit=or.METER,this.areaUnit=nr.SQUAREMILE,this.output=null,this.mappingParameters=null,j.extend(this,t),this.CLASS_NAME="SuperMap.KernelDensityJobParameter")}var t,r,n;return t=e,n=[{key:"toObject",value:function(e,t){for(var r in e)"datasetName"!==r?"output"!==r?(t.analyst=t.analyst||{},"query"===r&&e[r]?t.analyst[r]=e[r].toBBOX():t.analyst[r]=e[r],"mappingParameters"===r&&(t.analyst[r]=t.analyst[r]||{},t.analyst.mappingParameters=e[r])):(t.output=t.output||{},t.output=e[r]):(t.input=t.input||{},t.input[r]=e[r])}}],(r=[{key:"destroy",value:function(){this.datasetName=null,this.query=null,this.resolution=null,this.method=null,this.radius=null,this.meshType=null,this.fields=null,this.meshSizeUnit=null,this.radiusUnit=null,this.areaUnit=null,this.output instanceof eE&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof rE&&(this.mappingParameters.destroy(),this.mappingParameters=null)}}])&&nE(t.prototype,r),n&&nE(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function iE(e){"@babel/helpers - typeof";return(iE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function aE(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function sE(){return(sE="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=cE(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function uE(e,t){return(uE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function lE(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=cE(e);if(t){var o=cE(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===iE(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function cE(e){return(cE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var fE=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&uE(e,t)}(i,ZP);var t,r,n,o=lE(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t)).url=j.urlPathAppend(r.url,"spatialanalyst/density"),r.CLASS_NAME="SuperMap.KernelDensityJobsService",r}return t=i,(r=[{key:"destroy",value:function(){sE(cE(i.prototype),"destroy",this).call(this)}},{key:"getKernelDensityJobs",value:function(){sE(cE(i.prototype),"getJobs",this).call(this,this.url)}},{key:"getKernelDensityJob",value:function(e){sE(cE(i.prototype),"getJobs",this).call(this,j.urlPathAppend(this.url,e))}},{key:"addKernelDensityJob",value:function(e,t){sE(cE(i.prototype),"addJob",this).call(this,this.url,e,oE,t)}}])&&aE(t.prototype,r),n&&aE(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function hE(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var pE=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.datasetName="",this.datasetQuery="",this.geometryQuery="",this.mode=jt.CONTAIN,this.output=null,this.mappingParameters=null,j.extend(this,t),this.CLASS_NAME="SuperMap.SingleObjectQueryJobsParameter")}var t,r,n;return t=e,n=[{key:"toObject",value:function(e,t){for(var r in e)"datasetName"!==r?"output"!==r?(t.analyst=t.analyst||{},t.analyst[r]=e[r],"mappingParameters"===r&&(t.analyst[r]=t.analyst[r]||{},t.analyst.mappingParameters=e[r])):(t.output=t.output||{},t.output=e[r]):(t.input=t.input||{},t.input[r]=e[r])}}],(r=[{key:"destroy",value:function(){this.datasetName=null,this.datasetQuery=null,this.geometryQuery=null,this.mode=null,this.output instanceof eE&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof rE&&(this.mappingParameters.destroy(),this.mappingParameters=null)}}])&&hE(t.prototype,r),n&&hE(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function dE(e){"@babel/helpers - typeof";return(dE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yE(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function vE(){return(vE="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=bE(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function gE(e,t){return(gE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function mE(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=bE(e);if(t){var o=bE(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===dE(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function bE(e){return(bE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var wE=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&gE(e,t)}(i,ZP);var t,r,n,o=mE(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t)).url=j.urlPathAppend(r.url,"spatialanalyst/query"),r.CLASS_NAME="SuperMap.SingleObjectQueryJobsService",r}return t=i,(r=[{key:"destroy",value:function(){vE(bE(i.prototype),"destroy",this).call(this)}},{key:"getQueryJobs",value:function(){vE(bE(i.prototype),"getJobs",this).call(this,this.url)}},{key:"getQueryJob",value:function(e){vE(bE(i.prototype),"getJobs",this).call(this,j.urlPathAppend(this.url,e))}},{key:"addQueryJob",value:function(e,t){vE(bE(i.prototype),"addJob",this).call(this,this.url,e,pE,t)}}])&&yE(t.prototype,r),n&&yE(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function _E(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var xE=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.datasetName="",this.regionDataset="",this.query="",this.resolution=100,this.meshType=0,this.statisticModes=ir.AVERAGE,this.fields="",this.type=ar.SUMMARYMESH,this.output=null,this.mappingParameters=null,j.extend(this,t),this.CLASS_NAME="SuperMap.SummaryMeshJobParameter")}var t,r,n;return t=e,n=[{key:"toObject",value:function(e,t){for(var r in e)"datasetName"!==r?"type"!==r?"output"!==r?("SUMMARYMESH"===e.type&&"regionDataset"!==r||"SUMMARYREGION"===e.type&&!n(["meshType","resolution","query"],r))&&(t.analyst=t.analyst||{},"query"===r&&e[r]?t.analyst[r]=e[r].toBBOX():t.analyst[r]=e[r],"mappingParameters"===r&&(t.analyst[r]=t.analyst[r]||{},t.analyst.mappingParameters=e[r])):(t.output=t.output||{},t.output=e[r]):t.type=e[r]:(t.input=t.input||{},t.input[r]=e[r]);function n(e,t){for(var r=e.length;r--;)if(e[r]===t)return!0;return!1}}}],(r=[{key:"destroy",value:function(){this.datasetName=null,this.query=null,this.resolution=null,this.statisticModes=null,this.meshType=null,this.fields=null,this.regionDataset=null,this.type=null,this.output instanceof eE&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof rE&&(this.mappingParameters.destroy(),this.mappingParameters=null)}}])&&_E(t.prototype,r),n&&_E(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function SE(e){"@babel/helpers - typeof";return(SE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function OE(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function PE(){return(PE="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ME(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function EE(e,t){return(EE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function kE(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=ME(e);if(t){var o=ME(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===SE(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function ME(e){return(ME=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var CE=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&EE(e,t)}(i,ZP);var t,r,n,o=kE(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t)).url=j.urlPathAppend(r.url,"spatialanalyst/aggregatepoints"),r.CLASS_NAME="SuperMap.SummaryMeshJobsService",r}return t=i,(r=[{key:"destroy",value:function(){PE(ME(i.prototype),"destroy",this).call(this)}},{key:"getSummaryMeshJobs",value:function(){PE(ME(i.prototype),"getJobs",this).call(this,this.url)}},{key:"getSummaryMeshJob",value:function(e){PE(ME(i.prototype),"getJobs",this).call(this,j.urlPathAppend(this.url,e))}},{key:"addSummaryMeshJob",value:function(e,t){PE(ME(i.prototype),"addJob",this).call(this,this.url,e,xE,t)}}])&&OE(t.prototype,r),n&&OE(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function jE(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var TE=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.datasetName="",this.datasetVectorClip="",this.geometryClip="",this.mode=rr.CLIP,this.output=null,this.mappingParameters=null,j.extend(this,t),this.CLASS_NAME="SuperMap.VectorClipJobsParameter"}var t,r,n;return t=e,n=[{key:"toObject",value:function(e,t){for(var r in e)"datasetName"!==r?"output"!==r?(t.analyst=t.analyst||{},t.analyst[r]=e[r],"mappingParameters"===r&&(t.analyst[r]=t.analyst[r]||{},t.analyst.mappingParameters=e[r])):(t.output=t.output||{},t.output=e[r]):(t.input=t.input||{},t.input[r]=e[r])}}],(r=[{key:"destroy",value:function(){this.datasetName=null,this.datasetVectorClip=null,this.geometryClip=null,this.mode=null,this.output instanceof eE&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof rE&&(this.mappingParameters.destroy(),this.mappingParameters=null)}}])&&jE(t.prototype,r),n&&jE(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function AE(e){"@babel/helpers - typeof";return(AE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function IE(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function RE(){return(RE="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=DE(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function LE(e,t){return(LE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function NE(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=DE(e);if(t){var o=DE(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===AE(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function DE(e){return(DE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var BE=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&LE(e,t)}(i,ZP);var t,r,n,o=NE(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t)).url=j.urlPathAppend(r.url,"spatialanalyst/vectorclip"),r.CLASS_NAME="SuperMap.VectorClipJobsService",r}return t=i,(r=[{key:"destroy",value:function(){RE(DE(i.prototype),"destroy",this).call(this)}},{key:"getVectorClipJobs",value:function(){RE(DE(i.prototype),"getJobs",this).call(this,this.url)}},{key:"getVectorClipJob",value:function(e){RE(DE(i.prototype),"getJobs",this).call(this,j.urlPathAppend(this.url,e))}},{key:"addVectorClipJob",value:function(e,t){RE(DE(i.prototype),"addJob",this).call(this,this.url,e,TE,t)}}])&&IE(t.prototype,r),n&&IE(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function FE(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var GE=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.datasetName="",this.datasetOverlay="",this.mode="",this.srcFields="",this.overlayFields="",this.output=null,this.mappingParameters=null,j.extend(this,t),this.CLASS_NAME="SuperMap.OverlayGeoJobParameter")}var t,r,n;return t=e,n=[{key:"toObject",value:function(e,t){for(var r in e)"datasetName"!=r?"output"!==r?(t.analyst=t.analyst||{},t.analyst[r]=e[r],"mappingParameters"===r&&(t.analyst[r]=t.analyst[r]||{},t.analyst.mappingParameters=e[r])):(t.output=t.output||{},t.output=e[r]):(t.input=t.input||{},t.input[r]=e[r])}}],(r=[{key:"destroy",value:function(){this.datasetName=null,this.datasetOverlay=null,this.mode=null,this.srcFields=null,this.overlayFields=null,this.output instanceof eE&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof rE&&(this.mappingParameters.destroy(),this.mappingParameters=null)}}])&&FE(t.prototype,r),n&&FE(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function zE(e){"@babel/helpers - typeof";return(zE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function UE(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function VE(){return(VE="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=HE(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function WE(e,t){return(WE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function YE(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=HE(e);if(t){var o=HE(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===zE(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function HE(e){return(HE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var XE=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&WE(e,t)}(i,ZP);var t,r,n,o=YE(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t)).url=j.urlPathAppend(r.url,"spatialanalyst/overlay"),r.CLASS_NAME="SuperMap.OverlayGeoJobsService",r}return t=i,(r=[{key:"destroy",value:function(){VE(HE(i.prototype),"destroy",this).call(this)}},{key:"getOverlayGeoJobs",value:function(){VE(HE(i.prototype),"getJobs",this).call(this,this.url)}},{key:"getOverlayGeoJob",value:function(e){VE(HE(i.prototype),"getJobs",this).call(this,j.urlPathAppend(this.url,e))}},{key:"addOverlayGeoJob",value:function(e,t){VE(HE(i.prototype),"addJob",this).call(this,this.url,e,GE,t)}}])&&UE(t.prototype,r),n&&UE(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function qE(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var JE=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.datasetName="",this.regionDataset="",this.sumShape=!0,this.query="",this.standardSummaryFields=!1,this.standardFields="",this.standardStatisticModes="",this.weightedSummaryFields=!1,this.weightedFields="",this.weightedStatisticModes="",this.meshType=0,this.resolution=100,this.meshSizeUnit=or.METER,this.type=ar.SUMMARYMESH,this.output=null,this.mappingParameters=null,j.extend(this,t),this.CLASS_NAME="SuperMap.SummaryRegionJobParameter")}var t,r,n;return t=e,n=[{key:"toObject",value:function(e,t){for(var r in e)"datasetName"!==r?"type"!==r&&"type"!==r?"output"!==r?("SUMMARYREGION"===e.type||"SUMMARYMESH"===e.type&&"regionDataset"!==r)&&(t.analyst=t.analyst||{},"query"===r&&e[r]?t.analyst[r]=e[r].toBBOX():t.analyst[r]=e[r],"mappingParameters"===r&&(t.analyst[r]=t.analyst[r]||{},t.analyst.mappingParameters=e[r])):(t.output=t.output||{},t.output=e[r]):t.type=e[r]:(t.input=t.input||{},t.input[r]=e[r])}}],(r=[{key:"destroy",value:function(){this.datasetName=null,this.sumShape=null,this.regionDataset=null,this.query=null,this.standardSummaryFields=null,this.standardFields=null,this.standardStatisticModes=null,this.weightedSummaryFields=null,this.weightedFields=null,this.weightedStatisticModes=null,this.meshType=null,this.resolution=null,this.meshSizeUnit=null,this.type=null,this.output instanceof eE&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof rE&&(this.mappingParameters.destroy(),this.mappingParameters=null)}}])&&qE(t.prototype,r),n&&qE(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function ZE(e){"@babel/helpers - typeof";return(ZE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function KE(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function QE(){return(QE="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=tk(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function $E(e,t){return($E=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function ek(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=tk(e);if(t){var o=tk(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===ZE(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function tk(e){return(tk=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var rk=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$E(e,t)}(i,ZP);var t,r,n,o=ek(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t)).url=j.urlPathAppend(r.url,"spatialanalyst/summaryregion"),r.CLASS_NAME="SuperMap.SummaryRegionJobsService",r}return t=i,(r=[{key:"destroy",value:function(){QE(tk(i.prototype),"destroy",this).call(this)}},{key:"getSummaryRegionJobs",value:function(){QE(tk(i.prototype),"getJobs",this).call(this,this.url)}},{key:"getSummaryRegionJob",value:function(e){QE(tk(i.prototype),"getJobs",this).call(this,j.urlPathAppend(this.url,e))}},{key:"addSummaryRegionJob",value:function(e,t){QE(tk(i.prototype),"addJob",this).call(this,this.url,e,JE,t)}}])&&KE(t.prototype,r),n&&KE(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function nk(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var ok=function(){function e(t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.datasetName="",this.bounds="",this.distance="",this.distanceField="",this.distanceUnit=or.METER,this.dissolveField="",this.output=null,this.mappingParameters=null,!t)return this;j.extend(this,t),this.CLASS_NAME="SuperMap.BuffersAnalystJobsParameter"}var t,r,n;return t=e,n=[{key:"toObject",value:function(e,t){for(var r in e)"datasetName"!==r?"output"!==r?(t.analyst=t.analyst||{},"bounds"===r&&e[r]?t.analyst[r]=e[r].toBBOX():t.analyst[r]=e[r],"mappingParameters"===r&&(t.analyst[r]=t.analyst[r]||{},t.analyst.mappingParameters=e[r])):(t.output=t.output||{},t.output=e[r]):(t.input=t.input||{},t.input[r]=e[r])}}],(r=[{key:"destroy",value:function(){this.datasetName=null,this.bounds=null,this.distance=null,this.distanceField=null,this.distanceUnit=null,this.dissolveField=null,this.output instanceof eE&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof rE&&(this.mappingParameters.destroy(),this.mappingParameters=null)}}])&&nk(t.prototype,r),n&&nk(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function ik(e){"@babel/helpers - typeof";return(ik="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ak(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function sk(){return(sk="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ck(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function uk(e,t){return(uk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function lk(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=ck(e);if(t){var o=ck(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===ik(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function ck(e){return(ck=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var fk=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&uk(e,t)}(i,ZP);var t,r,n,o=lk(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t)).url=j.urlPathAppend(r.url,"spatialanalyst/buffers"),r.CLASS_NAME="SuperMap.BuffersAnalystJobsService",r}return t=i,(r=[{key:"destroy",value:function(){sk(ck(i.prototype),"destroy",this).call(this)}},{key:"getBuffersJobs",value:function(){sk(ck(i.prototype),"getJobs",this).call(this,this.url)}},{key:"getBuffersJob",value:function(e){sk(ck(i.prototype),"getJobs",this).call(this,j.urlPathAppend(this.url,e))}},{key:"addBuffersJob",value:function(e,t){sk(ck(i.prototype),"addJob",this).call(this,this.url,e,ok,t)}}])&&ak(t.prototype,r),n&&ak(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function hk(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var pk=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.datasetName="",this.datasetTopology="",this.tolerance="",this.rule=sr.REGIONNOOVERLAP,this.output=null,this.mappingParameters=null,j.extend(this,t),this.CLASS_NAME="SuperMap.TopologyValidatorJobsParameter")}var t,r,n;return t=e,n=[{key:"toObject",value:function(e,t){for(var r in e)"datasetName"!==r?"output"!==r?(t.analyst=t.analyst||{},t.analyst[r]=e[r],"mappingParameters"===r&&(t.analyst[r]=t.analyst[r]||{},t.analyst.mappingParameters=e[r])):(t.output=t.output||{},t.output=e[r]):(t.input=t.input||{},t.input[r]=e[r])}}],(r=[{key:"destroy",value:function(){this.datasetName=null,this.datasetTopology=null,this.tolerance=null,this.rule=null,this.output instanceof eE&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof rE&&(this.mappingParameters.destroy(),this.mappingParameters=null)}}])&&hk(t.prototype,r),n&&hk(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function dk(e){"@babel/helpers - typeof";return(dk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yk(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function vk(){return(vk="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=bk(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function gk(e,t){return(gk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function mk(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=bk(e);if(t){var o=bk(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===dk(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function bk(e){return(bk=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var wk=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&gk(e,t)}(i,ZP);var t,r,n,o=mk(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t)).url=j.urlPathAppend(r.url,"spatialanalyst/topologyvalidator"),r.CLASS_NAME="SuperMap.TopologyValidatorJobsService",r}return t=i,(r=[{key:"destroy",value:function(){vk(bk(i.prototype),"destroy",this).call(this)}},{key:"getTopologyValidatorJobs",value:function(){vk(bk(i.prototype),"getJobs",this).call(this,this.url)}},{key:"getTopologyValidatorJob",value:function(e){vk(bk(i.prototype),"getJobs",this).call(this,j.urlPathAppend(this.url,e))}},{key:"addTopologyValidatorJob",value:function(e,t){vk(bk(i.prototype),"addJob",this).call(this,this.url,e,pk,t)}}])&&yk(t.prototype,r),n&&yk(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function _k(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var xk=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.datasetName="",this.groupField="",this.attributeField="",this.statisticModes="",this.output=null,this.mappingParameters=null,j.extend(this,t),this.CLASS_NAME="SuperMap.SummaryAttributesJobsParameter")}var t,r,n;return t=e,n=[{key:"toObject",value:function(e,t){for(var r in e)"datasetName"!==r?"output"!==r?(t.analyst=t.analyst||{},t.analyst[r]=e[r],"mappingParameters"===r&&(t.analyst[r]=t.analyst[r]||{},t.analyst.mappingParameters=e[r])):(t.output=t.output||{},t.output=e[r]):(t.input=t.input||{},t.input[r]=e[r])}}],(r=[{key:"destroy",value:function(){this.datasetName=null,this.groupField=null,this.attributeField=null,this.statisticModes=null,this.output instanceof eE&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof rE&&(this.mappingParameters.destroy(),this.mappingParameters=null)}}])&&_k(t.prototype,r),n&&_k(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Sk(e){"@babel/helpers - typeof";return(Sk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ok(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Pk(){return(Pk="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Mk(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function Ek(e,t){return(Ek=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function kk(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Mk(e);if(t){var o=Mk(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===Sk(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function Mk(e){return(Mk=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ck=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ek(e,t)}(i,ZP);var t,r,n,o=kk(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t)).url=j.urlPathAppend(r.url,"spatialanalyst/summaryattributes"),r.CLASS_NAME="SuperMap.SummaryAttributesJobsService",r}return t=i,(r=[{key:"destroy",value:function(){Pk(Mk(i.prototype),"destroy",this).call(this)}},{key:"getSummaryAttributesJobs",value:function(){Pk(Mk(i.prototype),"getJobs",this).call(this,this.url)}},{key:"getSummaryAttributesJob",value:function(e){Pk(Mk(i.prototype),"getJobs",this).call(this,j.urlPathAppend(this.url,e))}},{key:"addSummaryAttributesJob",value:function(e,t){Pk(Mk(i.prototype),"addJob",this).call(this,this.url,e,xk,t)}}])&&Ok(t.prototype,r),n&&Ok(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function jk(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Tk=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.url=t,this.options=r||{},this.kernelDensityJobs={},this.summaryMeshJobs={},this.queryJobs={},this.summaryRegionJobs={},this.vectorClipJobs={},this.overlayGeoJobs={},this.buffersJobs={},this.topologyValidatorJobs={},this.summaryAttributesJobs={}}var t,r,n;return t=e,(r=[{key:"getKernelDensityJobs",value:function(e,t){var r=this,n=r._processFormat(t);new fE(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,eventListeners:{scope:r,processCompleted:e,processFailed:e},format:n}).getKernelDensityJobs()}},{key:"getKernelDensityJob",value:function(e,t,r){var n=this,o=n._processFormat(r);new fE(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,eventListeners:{scope:n,processCompleted:t,processFailed:t},format:o}).getKernelDensityJob(e)}},{key:"addKernelDensityJob",value:function(e,t,r,n){var o=this,i=o._processFormat(n);new fE(o.url,{proxy:o.options.proxy,withCredentials:o.options.withCredentials,crossOrigin:o.options.crossOrigin,headers:o.options.headers,eventListeners:{scope:o,processCompleted:t,processFailed:t,processRunning:function(e){o.kernelDensityJobs[e.id]=e.state}},format:i}).addKernelDensityJob(e,r)}},{key:"getKernelDensityJobState",value:function(e){return this.kernelDensityJobs[e]}},{key:"getSummaryMeshJobs",value:function(e,t){var r=this,n=r._processFormat(t);new CE(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,eventListeners:{scope:r,processCompleted:e,processFailed:e},format:n}).getSummaryMeshJobs()}},{key:"getSummaryMeshJob",value:function(e,t,r){var n=this,o=n._processFormat(r);new CE(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,eventListeners:{scope:n,processCompleted:t,processFailed:t},format:o}).getSummaryMeshJob(e)}},{key:"addSummaryMeshJob",value:function(e,t,r,n){var o=this,i=o._processFormat(n);new CE(o.url,{proxy:o.options.proxy,withCredentials:o.options.withCredentials,crossOrigin:o.options.crossOrigin,headers:o.options.headers,eventListeners:{scope:o,processCompleted:t,processFailed:t,processRunning:function(e){o.summaryMeshJobs[e.id]=e.state}},format:i}).addSummaryMeshJob(e,r)}},{key:"getSummaryMeshJobState",value:function(e){return this.summaryMeshJobs[e]}},{key:"getQueryJobs",value:function(e,t){var r=this,n=r._processFormat(t);new wE(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,eventListeners:{scope:r,processCompleted:e,processFailed:e},format:n}).getQueryJobs()}},{key:"getQueryJob",value:function(e,t,r){var n=this,o=n._processFormat(r);new wE(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,eventListeners:{scope:n,processCompleted:t,processFailed:t},format:o}).getQueryJob(e)}},{key:"addQueryJob",value:function(e,t,r,n){var o=this,i=o._processFormat(n);new wE(o.url,{proxy:o.options.proxy,withCredentials:o.options.withCredentials,crossOrigin:o.options.crossOrigin,headers:o.options.headers,eventListeners:{scope:o,processCompleted:t,processFailed:t,processRunning:function(e){o.queryJobs[e.id]=e.state}},format:i}).addQueryJob(e,r)}},{key:"getQueryJobState",value:function(e){return this.queryJobs[e]}},{key:"getSummaryRegionJobs",value:function(e,t){var r=this,n=r._processFormat(t);new rk(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,eventListeners:{scope:r,processCompleted:e,processFailed:e},format:n}).getSummaryRegionJobs()}},{key:"getSummaryRegionJob",value:function(e,t,r){var n=this,o=n._processFormat(r);new rk(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,eventListeners:{scope:n,processCompleted:t,processFailed:t},format:o}).getSummaryRegionJob(e)}},{key:"addSummaryRegionJob",value:function(e,t,r,n){var o=this,i=o._processFormat(n);new rk(o.url,{proxy:o.options.proxy,withCredentials:o.options.withCredentials,crossOrigin:o.options.crossOrigin,headers:o.options.headers,eventListeners:{scope:o,processCompleted:t,processFailed:t,processRunning:function(e){o.summaryRegionJobs[e.id]=e.state}},format:i}).addSummaryRegionJob(e,r)}},{key:"getSummaryRegionJobState",value:function(e){return this.summaryRegionJobs[e]}},{key:"getVectorClipJobs",value:function(e,t){var r=this,n=r._processFormat(t);new BE(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,eventListeners:{scope:r,processCompleted:e,processFailed:e},format:n}).getVectorClipJobs()}},{key:"getVectorClipJob",value:function(e,t,r){var n=this,o=n._processFormat(r);new BE(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,eventListeners:{scope:n,processCompleted:t,processFailed:t},format:o}).getVectorClipJob(e)}},{key:"addVectorClipJob",value:function(e,t,r,n){var o=this,i=o._processFormat(n);new BE(o.url,{proxy:o.options.proxy,withCredentials:o.options.withCredentials,crossOrigin:o.options.crossOrigin,headers:o.options.headers,eventListeners:{scope:o,processCompleted:t,processFailed:t,processRunning:function(e){o.vectorClipJobs[e.id]=e.state}},format:i}).addVectorClipJob(e,r)}},{key:"getVectorClipJobState",value:function(e){return this.vectorClipJobs[e]}},{key:"getOverlayGeoJobs",value:function(e,t){var r=this,n=r._processFormat(t);new XE(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,eventListeners:{scope:r,processCompleted:e,processFailed:e},format:n}).getOverlayGeoJobs()}},{key:"getOverlayGeoJob",value:function(e,t,r){var n=this,o=n._processFormat(r);new XE(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,eventListeners:{scope:n,processCompleted:t,processFailed:t},format:o}).getOverlayGeoJob(e)}},{key:"addOverlayGeoJob",value:function(e,t,r,n){var o=this,i=o._processFormat(n);new XE(o.url,{proxy:o.options.proxy,withCredentials:o.options.withCredentials,crossOrigin:o.options.crossOrigin,headers:o.options.headers,eventListeners:{scope:o,processCompleted:t,processFailed:t,processRunning:function(e){o.overlayGeoJobs[e.id]=e.state}},format:i}).addOverlayGeoJob(e,r)}},{key:"getoverlayGeoJobState",value:function(e){return this.overlayGeoJobs[e]}},{key:"getBuffersJobs",value:function(e,t){var r=this,n=r._processFormat(t);new fk(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,eventListeners:{scope:r,processCompleted:e,processFailed:e},format:n}).getBuffersJobs()}},{key:"getBuffersJob",value:function(e,t,r){var n=this,o=n._processFormat(r);new fk(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,eventListeners:{scope:n,processCompleted:t,processFailed:t},format:o}).getBuffersJob(e)}},{key:"addBuffersJob",value:function(e,t,r,n){var o=this,i=o._processFormat(n);new fk(o.url,{proxy:o.options.proxy,withCredentials:o.options.withCredentials,crossOrigin:o.options.crossOrigin,headers:o.options.headers,eventListeners:{scope:o,processCompleted:t,processFailed:t,processRunning:function(e){o.buffersJobs[e.id]=e.state}},format:i}).addBuffersJob(e,r)}},{key:"getBuffersJobState",value:function(e){return this.buffersJobs[e]}},{key:"getTopologyValidatorJobs",value:function(e,t){var r=this,n=r._processFormat(t);new wk(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,eventListeners:{scope:r,processCompleted:e,processFailed:e},format:n}).getTopologyValidatorJobs()}},{key:"getTopologyValidatorJob",value:function(e,t,r){var n=this,o=n._processFormat(r);new wk(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,eventListeners:{scope:n,processCompleted:t,processFailed:t},format:o}).getTopologyValidatorJob(e)}},{key:"addTopologyValidatorJob",value:function(e,t,r,n){var o=this,i=o._processFormat(n);new wk(o.url,{proxy:o.options.proxy,withCredentials:o.options.withCredentials,crossOrigin:o.options.crossOrigin,headers:o.options.headers,eventListeners:{scope:o,processCompleted:t,processFailed:t,processRunning:function(e){o.topologyValidatorJobs[e.id]=e.state}},format:i}).addTopologyValidatorJob(e,r)}},{key:"getTopologyValidatorJobState",value:function(e){return this.topologyValidatorJobs[e]}},{key:"getSummaryAttributesJobs",value:function(e,t){var r=this,n=r._processFormat(t);new Ck(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,eventListeners:{scope:r,processCompleted:e,processFailed:e},format:n}).getSummaryAttributesJobs()}},{key:"getSummaryAttributesJob",value:function(e,t,r){var n=this,o=n._processFormat(r);new Ck(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,eventListeners:{scope:n,processCompleted:t,processFailed:t},format:o}).getSummaryAttributesJob(e)}},{key:"addSummaryAttributesJob",value:function(e,t,r,n){var o=this,i=o._processFormat(n);new Ck(o.url,{proxy:o.options.proxy,withCredentials:o.options.withCredentials,crossOrigin:o.options.crossOrigin,headers:o.options.headers,eventListeners:{scope:o,processCompleted:t,processFailed:t,processRunning:function(e){o.summaryAttributesJobs[e.id]=e.state}},format:i}).addSummaryAttributesJob(e,r)}},{key:"getSummaryAttributesJobState",value:function(e){return this.summaryAttributesJobs[e]}},{key:"_processFormat",value:function(e){return e||Et.GEOJSON}}])&&jk(t.prototype,r),n&&jk(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Ak(e){"@babel/helpers - typeof";return(Ak="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ik(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Rk(e,t){return(Rk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Lk(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Nk(e);if(t){var o=Nk(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===Ak(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function Nk(e){return(Nk=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Dk=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Rk(e,t)}(i,Tf);var t,r,n,o=Lk(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t))._processingService=new Tk(e,t),r}return t=i,(r=[{key:"getKernelDensityJobs",value:function(e,t){this._processingService.getKernelDensityJobs(e,t)}},{key:"getKernelDensityJob",value:function(e,t,r){this._processingService.getKernelDensityJob(e,t,r)}},{key:"addKernelDensityJob",value:function(e,t,r,n){e=this._processParams(e),this._processingService.addKernelDensityJob(e,t,r,n)}},{key:"getKernelDensityJobState",value:function(e){return this._processingService.getKernelDensityJobState(e)}},{key:"getSummaryMeshJobs",value:function(e,t){this._processingService.getSummaryMeshJobs(e,t)}},{key:"getSummaryMeshJob",value:function(e,t,r){this._processingService.getSummaryMeshJob(e,t,r)}},{key:"addSummaryMeshJob",value:function(e,t,r,n){e=this._processParams(e),this._processingService.addSummaryMeshJob(e,t,r,n)}},{key:"getSummaryMeshJobState",value:function(e){return this._processingService.getSummaryMeshJobState(e)}},{key:"getQueryJobs",value:function(e,t){this._processingService.getQueryJobs(e,t)}},{key:"getQueryJob",value:function(e,t,r){this._processingService.getQueryJob(e,t,r)}},{key:"addQueryJob",value:function(e,t,r,n){e=this._processParams(e),this._processingService.addQueryJob(e,t,r,n)}},{key:"getQueryJobState",value:function(e){return this._processingService.getQueryJobState(e)}},{key:"getSummaryRegionJobs",value:function(e,t){this._processingService.getSummaryRegionJobs(e,t)}},{key:"getSummaryRegionJob",value:function(e,t,r){this._processingService.getSummaryRegionJob(e,t,r)}},{key:"addSummaryRegionJob",value:function(e,t,r,n){e=this._processParams(e),this._processingService.addSummaryRegionJob(e,t,r,n)}},{key:"getSummaryRegionJobState",value:function(e){return this._processingService.getSummaryRegionJobState(e)}},{key:"getVectorClipJobs",value:function(e,t){this._processingService.getVectorClipJobs(e,t)}},{key:"getVectorClipJob",value:function(e,t,r){this._processingService.getVectorClipJob(e,t,r)}},{key:"addVectorClipJob",value:function(e,t,r,n){e=this._processParams(e),this._processingService.addVectorClipJob(e,t,r,n)}},{key:"getVectorClipJobState",value:function(e){return this._processingService.getVectorClipJobState(e)}},{key:"getOverlayGeoJobs",value:function(e,t){this._processingService.getOverlayGeoJobs(e,t)}},{key:"getOverlayGeoJob",value:function(e,t,r){this._processingService.getOverlayGeoJob(e,t,r)}},{key:"addOverlayGeoJob",value:function(e,t,r,n){e=this._processParams(e),this._processingService.addOverlayGeoJob(e,t,r,n)}},{key:"getoverlayGeoJobState",value:function(e){return this._processingService.getoverlayGeoJobState(e)}},{key:"getBuffersJobs",value:function(e,t){this._processingService.getBuffersJobs(e,t)}},{key:"getBuffersJob",value:function(e,t,r){this._processingService.getBuffersJob(e,t,r)}},{key:"addBuffersJob",value:function(e,t,r,n){e=this._processParams(e),this._processingService.addBuffersJob(e,t,r,n)}},{key:"getBuffersJobState",value:function(e){return this._processingService.getBuffersJobState(e)}},{key:"getTopologyValidatorJobs",value:function(e,t){this._processingService.getTopologyValidatorJobs(e,t)}},{key:"getTopologyValidatorJob",value:function(e,t,r){this._processingService.getTopologyValidatorJob(e,t,r)}},{key:"addTopologyValidatorJob",value:function(e,t,r,n){e=this._processParams(e),this._processingService.addTopologyValidatorJob(e,t,r,n)}},{key:"getTopologyValidatorJobState",value:function(e){return this._processingService.getTopologyValidatorJobState(e)}},{key:"getSummaryAttributesJobs",value:function(e,t){this._processingService.getSummaryAttributesJobs(e,t)}},{key:"getSummaryAttributesJob",value:function(e,t,r){this._processingService.getSummaryAttributesJob(e,t,r)}},{key:"addSummaryAttributesJob",value:function(e,t,r,n){e=this._processParams(e),this._processingService.addSummaryAttributesJob(e,t,r,n)}},{key:"getSummaryAttributesJobState",value:function(e){return this._processingService.getSummaryAttributesJobState(e)}},{key:"_processFormat",value:function(e){return e||Et.GEOJSON}},{key:"_processParams",value:function(e){return e?(e.bounds&&(e.bounds=xr.toSuperMapBounds(e.bounds)),e.query&&(e.query=xr.toSuperMapBounds(e.query)),e.geometryQuery&&(e.geometryQuery=xr.toProcessingParam(e.geometryQuery)),e.geometryClip&&(e.geometryClip=xr.toProcessingParam(e.geometryClip)),e):{}}}])&&Ik(t.prototype,r),n&&Ik(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Bk(e){"@babel/helpers - typeof";return(Bk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Fk(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Gk(){return(Gk="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Yk(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function zk(e,t){return(zk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Uk(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Yk(e);if(t){var o=Yk(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Vk(this,r)}}function Vk(e,t){if(t&&("object"===Bk(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Wk(e)}function Wk(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Yk(e){return(Yk=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Hk=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&zk(e,t)}(i,Nf);var t,r,n,o=Uk(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t)).returnContent=!1,r.format=Et.GEOJSON,r.returnFeatureWithFieldCaption=!1,t&&j.extend(Wk(r),t),r.CLASS_NAME="SuperMap.QueryService",r.url?(t&&t.format&&(r.format=t.format.toUpperCase()),r.url=j.urlPathAppend(r.url,"queryResults"),r):Vk(r)}return t=i,(r=[{key:"destroy",value:function(){Gk(Yk(i.prototype),"destroy",this).call(this);this.returnContent=null,this.format=null}},{key:"processAsync",value:function(e){if(e instanceof Yp){var t,r=this,n=null;r.returnContent=e.returnContent,t=r.getJsonParameters(e),r.returnContent||(n=e.returnCustomResult)&&(r.url=j.urlAppend(r.url,"returnCustomResult="+n)),r.returnFeatureWithFieldCaption=e.returnFeatureWithFieldCaption,r.request({method:"POST",data:t,scope:r,success:r.serviceProcessCompleted,failure:r.serviceProcessFailed})}}},{key:"serviceProcessCompleted",value:function(e,t){e=j.transformResult(e);var r=new br;if(e&&e.recordsets)for(var n=0,o=e.recordsets,i=o.length;n<i;n++)o[n].features&&(!0===this.returnFeatureWithFieldCaption&&o[n].features.map(function(e){return e.fieldNames=o[n].fieldCaptions,e}),this.format===Et.GEOJSON&&(o[n].features=r.toGeoJSON(o[n].features)));this.events.triggerEvent("processCompleted",{result:e,options:t})}},{key:"dataFormat",value:function(){return[Et.GEOJSON,Et.ISERVER,Et.FGB]}},{key:"getQueryParameters",value:function(e){return new Yp({customParams:e.customParams,expectCount:e.expectCount,networkType:e.networkType,queryOption:e.queryOption,queryParams:e.queryParams,startRecord:e.startRecord,prjCoordSys:e.prjCoordSys,holdTime:e.holdTime})}}])&&Fk(t.prototype,r),n&&Fk(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Xk(e){"@babel/helpers - typeof";return(Xk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qk(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Jk(){return(Jk="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=$k(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function Zk(e,t){return(Zk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Kk(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=$k(e);if(t){var o=$k(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===Xk(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Qk(e)}(this,r)}}function Qk(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $k(e){return($k=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var eM=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Zk(e,t)}(i,Yp);var t,r,n,o=Kk(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),e=e||{},(t=o.call(this,e)).returnContent=!0,t.bounds=null,j.extend(Qk(t),e),t.CLASS_NAME="SuperMap.QueryByBoundsParameters",t}return t=i,(r=[{key:"destroy",value:function(){Jk($k(i.prototype),"destroy",this).call(this);this.returnContent=null,this.bounds&&(this.bounds=null)}}])&&qk(t.prototype,r),n&&qk(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function tM(e){"@babel/helpers - typeof";return(tM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function rM(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function nM(){return(nM="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=aM(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function oM(e,t){return(oM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function iM(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=aM(e);if(t){var o=aM(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===tM(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function aM(e){return(aM=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var sM=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&oM(e,t)}(i,Hk);var t,r,n,o=iM(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t)).CLASS_NAME="SuperMap.QueryByBoundsService",r}return t=i,(r=[{key:"destroy",value:function(){nM(aM(i.prototype),"destroy",this).call(this)}},{key:"getJsonParameters",value:function(e){if(!(e instanceof eM))return null;var t,r="",n=e.bounds;return t=this.getQueryParameters(e),r+="'queryMode':'BoundsQuery','queryParameters':",r+=j.toJSON(t),r="{"+(r+=",'bounds': {'rightTop':{'y':"+n.top+",'x':"+n.right+"},'leftBottom':{'y':"+n.bottom+",'x':"+n.left+"}}")+"}"}}])&&rM(t.prototype,r),n&&rM(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function uM(e){"@babel/helpers - typeof";return(uM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function lM(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function cM(){return(cM="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=dM(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function fM(e,t){return(fM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function hM(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=dM(e);if(t){var o=dM(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===uM(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return pM(e)}(this,r)}}function pM(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function dM(e){return(dM=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var yM=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&fM(e,t)}(i,Yp);var t,r,n,o=hM(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),e=e||{},(t=o.call(this,e)).geometry=null,t.isNearest=null,t.returnContent=!0,j.extend(pM(t),e),t.CLASS_NAME="SuperMap.QueryByDistanceParameters",t}return t=i,(r=[{key:"destroy",value:function(){cM(dM(i.prototype),"destroy",this).call(this);var e=this;e.returnContent=null,e.distance=null,e.isNearest=null,e.geometry&&(e.geometry.destroy(),e.geometry=null)}}])&&lM(t.prototype,r),n&&lM(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function vM(e){"@babel/helpers - typeof";return(vM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function gM(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function mM(){return(mM="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_M(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function bM(e,t){return(bM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function wM(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=_M(e);if(t){var o=_M(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===vM(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function _M(e){return(_M=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var xM=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&bM(e,t)}(i,Hk);var t,r,n,o=wM(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t)).CLASS_NAME="SuperMap.QueryByDistanceService",r}return t=i,(r=[{key:"destroy",value:function(){mM(_M(i.prototype),"destroy",this).call(this)}},{key:"getJsonParameters",value:function(e){if(e instanceof yM){var t="",r=this.getQueryParameters(e),n=hr.fromGeometry(e.geometry);return t+=e.isNearest?"'queryMode':'FindNearest','queryParameters':":"'queryMode':'DistanceQuery','queryParameters':",t+=j.toJSON(r),t="{"+(t+=",'geometry':"+j.toJSON(n)+",'distance':"+e.distance)+"}"}}}])&&gM(t.prototype,r),n&&gM(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function SM(e){"@babel/helpers - typeof";return(SM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function OM(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function PM(){return(PM="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=CM(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function EM(e,t){return(EM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function kM(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=CM(e);if(t){var o=CM(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===SM(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return MM(e)}(this,r)}}function MM(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function CM(e){return(CM=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var jM=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&EM(e,t)}(i,Yp);var t,r,n,o=kM(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),e=e||{},(t=o.call(this,e)).returnContent=!0,j.extend(MM(t),e),t.CLASS_NAME="SuperMap.QueryBySQLParameters",t}return t=i,(r=[{key:"destroy",value:function(){PM(CM(i.prototype),"destroy",this).call(this);this.returnContent=null}}])&&OM(t.prototype,r),n&&OM(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function TM(e){"@babel/helpers - typeof";return(TM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function AM(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function IM(){return(IM="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=NM(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function RM(e,t){return(RM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function LM(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=NM(e);if(t){var o=NM(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===TM(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function NM(e){return(NM=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var DM=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&RM(e,t)}(i,Hk);var t,r,n,o=LM(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t)).CLASS_NAME="SuperMap.QueryBySQLService",r}return t=i,(r=[{key:"destroy",value:function(){IM(NM(i.prototype),"destroy",this).call(this)}},{key:"getJsonParameters",value:function(e){if(e instanceof jM){var t,r="";return t=this.getQueryParameters(e),r+="'queryMode':'SqlQuery','queryParameters':",r="{"+(r+=j.toJSON(t))+"}"}}}])&&AM(t.prototype,r),n&&AM(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function BM(e){"@babel/helpers - typeof";return(BM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function FM(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function GM(){return(GM="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=WM(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function zM(e,t){return(zM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function UM(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=WM(e);if(t){var o=WM(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===BM(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return VM(e)}(this,r)}}function VM(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function WM(e){return(WM=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var YM=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&zM(e,t)}(i,Yp);var t,r,n,o=UM(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),e=e||{},(t=o.call(this,e)).returnContent=!0,t.geometry=null,t.spatialQueryMode=jt.INTERSECT,j.extend(VM(t),e),t.CLASS_NAME="SuperMap.QueryByGeometryParameters",t}return t=i,(r=[{key:"destroy",value:function(){GM(WM(i.prototype),"destroy",this).call(this);this.returnContent=null,this.geometry=null,this.spatialQueryMode=null}}])&&FM(t.prototype,r),n&&FM(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function HM(e){"@babel/helpers - typeof";return(HM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function XM(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function qM(){return(qM="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=KM(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function JM(e,t){return(JM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function ZM(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=KM(e);if(t){var o=KM(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===HM(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function KM(e){return(KM=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var QM=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&JM(e,t)}(i,Hk);var t,r,n,o=ZM(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t)).CLASS_NAME="SuperMap.QueryByGeometryService",r}return t=i,(r=[{key:"destroy",value:function(){qM(KM(i.prototype),"destroy",this).call(this)}},{key:"getJsonParameters",value:function(e){if(e instanceof YM){var t,r="",n=e.geometry,o=hr.fromGeometry(n);return t=this.getQueryParameters(e),r+="'queryMode':'SpatialQuery','queryParameters':",r="{"+(r+=j.toJSON(t)+",'geometry':"+j.toJSON(o)+",'spatialQueryMode':"+j.toJSON(e.spatialQueryMode))+"}"}}}])&&XM(t.prototype,r),n&&XM(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function $M(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var eC=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options=r||{},this.url=t}var t,r,n;return t=e,(r=[{key:"queryByBounds",value:function(e,t,r){var n=this;new sM(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,eventListeners:{scope:n,processCompleted:t,processFailed:t},format:n._processFormat(r)}).processAsync(e)}},{key:"queryByDistance",value:function(e,t,r){var n=this;new xM(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,eventListeners:{scope:n,processCompleted:t,processFailed:t},format:r}).processAsync(e)}},{key:"queryBySQL",value:function(e,t,r){var n=this;new DM(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,eventListeners:{scope:n,processCompleted:t,processFailed:t},format:r}).processAsync(e)}},{key:"queryByGeometry",value:function(e,t,r){var n=this;new QM(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,eventListeners:{scope:n,processCompleted:t,processFailed:t},format:r}).processAsync(e)}},{key:"_processFormat",value:function(e){return e||Et.GEOJSON}}])&&$M(t.prototype,r),n&&$M(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function tC(e){"@babel/helpers - typeof";return(tC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function rC(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function nC(e,t){return(nC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function oC(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=iC(e);if(t){var o=iC(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===tC(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function iC(e){return(iC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var aC=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&nC(e,t)}(a,Tf);var t,r,n,i=oC(a);function a(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(r=i.call(this,e,t))._queryService=new eC(e,t),r}return t=a,(r=[{key:"queryByBounds",value:function(e,t,r){e=this._processParams(e),this._queryService.queryByBounds(e,t,r)}},{key:"queryByDistance",value:function(e,t,r){e=this._processParams(e),this._queryService.queryByDistance(e,t,r)}},{key:"queryBySQL",value:function(e,t,r){e=this._processParams(e),this._queryService.queryBySQL(e,t,r)}},{key:"queryByGeometry",value:function(e,t,r){e=this._processParams(e),this._queryService.queryByGeometry(e,t,r)}},{key:"_processParams",value:function(e){return e?(e.returnContent=null==e.returnContent||e.returnContent,e.queryParams&&!xr.isArray(e.queryParams)&&(e.queryParams=[e.queryParams]),e.bounds&&(e.bounds instanceof Array&&(e.bounds=new N(e.bounds[0],e.bounds[1],e.bounds[2],e.bounds[3])),e.bounds instanceof o().LngLatBounds&&(e.bounds=new N(e.bounds.getSouthWest().lng,e.bounds.getSouthWest().lat,e.bounds.getNorthEast().lng,e.bounds.getNorthEast().lat))),e.geometry&&(e.geometry instanceof o().LngLat&&(e.geometry=new V(e.geometry.lng,e.geometry.lat)),e.geometry instanceof o().Point&&(e.geometry=new V(e.geometry.x,e.geometry.y)),e.geometry instanceof o().LngLatBounds&&(e.geometry=xr.toSuperMapPolygon(e.geometry)),e.geometry instanceof m||(e.geometry=xr.toSuperMapGeometry(e.geometry))),e):{}}}])&&rC(t.prototype,r),n&&rC(t,n),Object.defineProperty(t,"prototype",{writable:!1}),a}();function sC(e){"@babel/helpers - typeof";return(sC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function uC(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function lC(){return(lC="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=hC(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function cC(e,t){return(cC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function fC(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=hC(e);if(t){var o=hC(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===sC(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function hC(e){return(hC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var pC=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&cC(e,t)}(i,Nf);var t,r,n,o=fC(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t)).format=t.format||Et.GEOJSON,r.CLASS_NAME="SuperMap.SpatialAnalystBase",r}return t=i,(r=[{key:"destroy",value:function(){lC(hC(i.prototype),"destroy",this).call(this),this.format=null}},{key:"serviceProcessCompleted",value:function(e,t){var r,n=this;if((e=j.transformResult(e))&&n.format===Et.GEOJSON&&"function"==typeof n.toGeoJSONResult)if(j.isArray(e)){for(var o=0;o<e.length;o++)e[o]=n.toGeoJSONResult(e[o]);r=e}else r=n.toGeoJSONResult(e);r||(r=e),n.events.triggerEvent("processCompleted",{result:r,options:t})}},{key:"toGeoJSONResult",value:function(e){if(!e)return null;e.result&&e.result.resultGeometry&&(e=e.result);var t=new br;if(e.recordsets)for(var r=0,n=e.recordsets,o=n.length;r<o;r++)n[r].features&&(n[r].features=t.toGeoJSON(n[r].features));else e.recordset&&e.recordset.features&&(e.recordset.features=t.toGeoJSON(e.recordset.features));return e.resultGeometry&&(e.resultGeometry=t.toGeoJSON(e.resultGeometry)),e.regions&&(e.regions=t.toGeoJSON(e.regions)),e}}])&&uC(t.prototype,r),n&&uC(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function dC(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var yC=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.dataset=null,this.targetDatasourceName=null,this.totalGridName=null,this.diffuseDatasetGridName=null,this.durationDatasetGridName=null,this.directDatasetGridName=null,this.latitude=null,this.timeMode="MULTIDAYS",this.dayStart=null,this.dayEnd=null,this.hourStart=null,this.hourEnd=null,this.transmittance=null,this.hourInterval=null,this.dayInterval=null,this.deleteExistResultDataset=!1,j.extend(this,t),this.CLASS_NAME="SuperMap.AreaSolarRadiationParameters"}var t,r,n;return t=e,n=[{key:"toObject",value:function(e,t){var r={};for(var n in e){if("dataset"!==n)"latitude"===n||"timeMode"===n||"dayStart"===n||("dayEnd"===n||"hourStart"===n||"hourEnd"===n)||("transmittance"===n||"hourInterval"===n||"dayInterval"===n)?r[n]=e[n]:t[n]=e[n]}t.parameter=r}}],(r=[{key:"destroy",value:function(){var e=this;e.dataset=null,e.zFactor=1,e.averageCurvatureName=null,e.profileCurvatureName=null,e.planCurvatureName=null,e.deleteExistResultDataset=!0}}])&&dC(t.prototype,r),n&&dC(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function vC(e){"@babel/helpers - typeof";return(vC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function gC(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function mC(){return(mC="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_C(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function bC(e,t){return(bC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function wC(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=_C(e);if(t){var o=_C(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===vC(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function _C(e){return(_C=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var xC=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&bC(e,t)}(i,pC);var t,r,n,o=wC(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t)).CLASS_NAME="SuperMap.AreaSolarRadiationService",r}return t=i,(r=[{key:"destroy",value:function(){mC(_C(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof yC){var t=this,r={};e instanceof yC&&(t.url=j.urlPathAppend(t.url,"datasets/".concat(e.dataset,"/solarradiation"))),t.url=j.urlAppend(t.url,"returnContent=true"),yC.toObject(e,r);var n=j.toJSON(r);t.request({method:"POST",data:n,scope:t,success:t.serviceProcessCompleted,failure:t.serviceProcessFailed})}}}])&&gC(t.prototype,r),n&&gC(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function SC(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var OC=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.exp=null,this.value=100,j.extend(this,t),this.CLASS_NAME="SuperMap.BufferDistance"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){this.exp=null,this.value=null}}])&&SC(t.prototype,r),n&&SC(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function PC(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var EC=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.endType=Wt.FLAT,this.leftDistance=new OC,this.rightDistance=new OC,this.semicircleLineSegment=4,this.radiusUnit=It.METER,t&&j.extend(this,t),this.CLASS_NAME="SuperMap.BufferSetting"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){var e=this;e.endType=null,e.leftDistance&&(e.leftDistance.destroy(),e.leftDistance=null),e.rightDistance&&(e.rightDistance.destroy(),e.rightDistance=null),e.semicircleLineSegment=null,e.radiusUnit=null}}])&&PC(t.prototype,r),n&&PC(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function kC(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var MC=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);this.bufferSetting=new EC,j.extend(this,t),this.CLASS_NAME="SuperMap.BufferAnalystParameters"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){this.bufferSetting&&(this.bufferSetting.destroy(),this.bufferSetting=null)}}])&&kC(t.prototype,r),n&&kC(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function CC(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var jC=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.expectCount=1e3,this.dataset=null,this.dataReturnMode=Jt.RECORDSET_ONLY,this.deleteExistResultDataset=!0,j.extend(this,t),this.CLASS_NAME="SuperMap.DataReturnOption"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){this.expectCount=null,this.dataset=null,this.dataReturnMode=null,this.deleteExistResultDataset=null}}])&&CC(t.prototype,r),n&&CC(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function TC(e){"@babel/helpers - typeof";return(TC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function AC(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function IC(){return(IC="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=DC(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function RC(e,t){return(RC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function LC(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=DC(e);if(t){var o=DC(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===TC(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return NC(e)}(this,r)}}function NC(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function DC(e){return(DC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var BC=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&RC(e,t)}(i,MC);var t,r,n,o=LC(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).dataset=null,t.filterQueryParameter=new Iy,t.resultSetting=new jC,t.isAttributeRetained=!0,t.isUnion=!1,j.extend(NC(t),e),t.CLASS_NAME="SuperMap.DatasetBufferAnalystParameters",t}return t=i,n=[{key:"toObject",value:function(e,t){for(var r in e)if("bufferSetting"===r)e.bufferSetting.radiusUnit=e.bufferSetting.radiusUnit.toUpperCase(),t.bufferAnalystParameter=e.bufferSetting;else if("resultSetting"===r)t.dataReturnOption=e.resultSetting;else{if("dataset"===r)continue;t[r]=e[r]}}}],(r=[{key:"destroy",value:function(){IC(DC(i.prototype),"destroy",this).call(this);var e=this;e.dataset=null,e.filterQueryParameter&&(e.filterQueryParameter.destroy(),e.filterQueryParameter=null),e.resultSetting&&(e.resultSetting.destroy(),e.resultSetting=null),e.isAttributeRetained=null,e.isUnion=null}}])&&AC(t.prototype,r),n&&AC(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function FC(e){"@babel/helpers - typeof";return(FC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function GC(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function zC(){return(zC="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=YC(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function UC(e,t){return(UC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function VC(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=YC(e);if(t){var o=YC(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===FC(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return WC(e)}(this,r)}}function WC(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function YC(e){return(YC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var HC=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&UC(e,t)}(i,MC);var t,r,n,o=VC(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).sourceGeometry=null,t.sourceGeometrySRID=null,e&&j.extend(WC(t),e),t.CLASS_NAME=" SuperMap.GeometryBufferAnalystParameters",t}return t=i,n=[{key:"toObject",value:function(e,t){for(var r in e)if("bufferSetting"===r){var n={};for(var o in e.bufferSetting)n[o]=e.bufferSetting[o];t.analystParameter=n}else"sourceGeometry"===r?t.sourceGeometry=hr.fromGeometry(e.sourceGeometry):t[r]=e[r]}}],(r=[{key:"destroy",value:function(){zC(YC(i.prototype),"destroy",this).call(this);this.sourceGeometry&&(this.sourceGeometry.destroy(),this.sourceGeometry=null)}}])&&GC(t.prototype,r),n&&GC(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function XC(e){"@babel/helpers - typeof";return(XC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qC(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function JC(){return(JC="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=$C(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function ZC(e,t){return(ZC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function KC(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=$C(e);if(t){var o=$C(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===XC(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return QC(e)}(this,r)}}function QC(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $C(e){return($C=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ej=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ZC(e,t)}(i,pC);var t,r,n,o=KC(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t)).mode=null,t&&j.extend(QC(r),t),r.CLASS_NAME="SuperMap.BufferAnalystService",r}return t=i,(r=[{key:"destroy",value:function(){JC($C(i.prototype),"destroy",this).call(this),this.mode=null}},{key:"processAsync",value:function(e){var t={},r=this;e instanceof BC?(r.mode="datasets",r.url=j.urlPathAppend(r.url,"datasets/"+e.dataset+"/buffer"),BC.toObject(e,t)):e instanceof HC&&(r.mode="geometry",r.url=j.urlPathAppend(r.url,"geometry/buffer"),HC.toObject(e,t));var n=j.toJSON(t);this.returnContent=!0,r.request({method:"POST",data:n,scope:r,success:r.serviceProcessCompleted,failure:r.serviceProcessFailed})}},{key:"dataFormat",value:function(){return[Et.GEOJSON,Et.ISERVER,Et.FGB]}}])&&qC(t.prototype,r),n&&qC(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function tj(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var rj=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.dataset=null,this.bounds=null,this.fieldName=null,this.resultGridDatasetResolution=null,this.searchRadius=null,this.targetDatasource=null,this.resultGridName=null,this.deleteExistResultDataset=!1,j.extend(this,t),this.CLASS_NAME="SuperMap.DensityKernelAnalystParameters"}var t,r,n;return t=e,n=[{key:"toObject",value:function(e,t){for(var r in e)"dataset"!==r&&(t[r]=e[r])}}],(r=[{key:"destroy",value:function(){var e=this;e.dataset=null,e.bounds=null,e.fieldName=null,e.resultGridDatasetResolution=null,e.searchRadius=null,e.targetDatasource=null,e.resultGridName=null,e.deleteExistResultDataset=null}}])&&tj(t.prototype,r),n&&tj(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function nj(e){"@babel/helpers - typeof";return(nj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function oj(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ij(){return(ij="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=lj(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function aj(e,t){return(aj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function sj(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=lj(e);if(t){var o=lj(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===nj(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return uj(e)}(this,r)}}function uj(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function lj(e){return(lj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var cj=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&aj(e,t)}(i,pC);var t,r,n,o=sj(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t)).mode=null,t&&j.extend(uj(r),t),r.CLASS_NAME="SuperMap.DensityAnalystService",r}return t=i,(r=[{key:"destroy",value:function(){ij(lj(i.prototype),"destroy",this).call(this),this.mode=null}},{key:"processAsync",value:function(e){var t=this,r=new Object;e instanceof rj&&(t.url=j.urlPathAppend(t.url,"datasets/"+e.dataset+"/densityanalyst/kernel"),t.mode="kernel"),rj.toObject(e,r);var n=j.toJSON(r);t.url=j.urlAppend(t.url,"returnContent=true"),t.request({method:"POST",data:n,scope:t,success:t.serviceProcessCompleted,failure:t.serviceProcessFailed})}}])&&oj(t.prototype,r),n&&oj(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function fj(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var hj=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.routeTable=null,this.routeIDField=null,this.attributeFilter=null,this.eventTable=null,this.eventRouteIDField=null,this.measureField=null,this.measureStartField=null,this.measureEndField=null,this.measureOffsetField=null,this.errorInfoField=null,this.retainedFields=null,this.dataReturnOption=null,t&&j.extend(this,t),this.CLASS_NAME="SuperMap.GenerateSpatialDataParameters"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){var e=this;e.routeTable&&(e.routeTable=null),e.routeIDField=null,e.attributeFilter=null,e.eventTable=null,e.eventRouteIDField=null,e.measureField=null,e.measureStartField=null,e.measureEndField=null,e.measureOffsetField=null,e.errorInfoField=null,e.dataReturnOption&&(e.dataReturnOption.destroy(),e.dataReturnOption=null)}}])&&fj(t.prototype,r),n&&fj(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function pj(e){"@babel/helpers - typeof";return(pj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function dj(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function yj(){return(yj="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=mj(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function vj(e,t){return(vj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function gj(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=mj(e);if(t){var o=mj(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===pj(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function mj(e){return(mj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var bj=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&vj(e,t)}(i,pC);var t,r,n,o=gj(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t)).CLASS_NAME="SuperMap.GenerateSpatialDataService",r}return t=i,(r=[{key:"destroy",value:function(){yj(mj(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof hj){var t,r=this;t=r.getJsonParameters(e),r.request({method:"POST",data:t,scope:r,success:r.serviceProcessCompleted,failure:r.serviceProcessFailed})}}},{key:"getJsonParameters",value:function(e){var t="datasets/"+e.routeTable+"/linearreferencing/generatespatialdata";return this.url=j.urlPathAppend(this.url,t),this.url=j.urlAppend(this.url,"returnContent=true"),j.toJSON(e)}}])&&dj(t.prototype,r),n&&dj(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function wj(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var _j=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.dataset=null,this.sourceFilter=null,this.referenceFilter=null,this.spatialRelationType=null,this.isBorderInside=null,this.returnFeature=null,this.returnGeoRelatedOnly=null,this.startRecord=0,this.expectCount=500,t&&j.extend(this,t),this.CLASS_NAME="SuperMap.GeoRelationAnalystParameters"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){var e=this;e.sourceFilter&&e.sourceFilter.destroy(),e.sourceFilter=null,e.referenceFilter&&e.referenceFilter.destroy(),e.referenceFilter=null,e.dataset=null,e.spatialRelationType=null,e.isBorderInside=null,e.returnFeature=null,e.returnGeoRelatedOnly=null,e.startRecord=null,e.expectCount=null}}])&&wj(t.prototype,r),n&&wj(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function xj(e){"@babel/helpers - typeof";return(xj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Sj(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Oj(){return(Oj="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=kj(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function Pj(e,t){return(Pj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Ej(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=kj(e);if(t){var o=kj(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===xj(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function kj(e){return(kj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Mj=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Pj(e,t)}(i,pC);var t,r,n,o=Ej(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t)).CLASS_NAME="SuperMap.GeoRelationAnalystService",r}return t=i,(r=[{key:"destroy",value:function(){Oj(kj(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof _j){var t=this;t.url=j.urlPathAppend(t.url,"datasets/"+e.dataset+"/georelation");var r=j.toJSON(e);t.url=j.urlAppend(t.url,"returnContent=true"),t.request({method:"POST",data:r,scope:t,success:t.serviceProcessCompleted,failure:t.serviceProcessFailed})}}}])&&Sj(t.prototype,r),n&&Sj(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Cj(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var jj=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.bounds=null,this.searchRadius=0,this.zValueFieldName=null,this.zValueScale=1,this.resolution=null,this.filterQueryParameter=null,this.outputDatasetName=null,this.outputDatasourceName=null,this.pixelFormat=null,this.dataset=null,this.inputPoints=null,this.InterpolationAnalystType="dataset",this.clipParam=null,j.extend(this,t),this.CLASS_NAME="SuperMap.InterpolationAnalystParameters")}var t,r,n;return t=e,n=[{key:"toObject",value:function(e,t){for(var r in e)if("inputPoints"===r&&"geometry"===e.InterpolationAnalystType){for(var n=[],o=0;o<e.inputPoints.length;o++){var i=e.inputPoints[o],a={x:i.x,y:i.y,z:i.tag};n.push(a)}t[r]=n}else t[r]=e[r]}}],(r=[{key:"destroy",value:function(){var e=this;e.bounds=null,e.searchRadius=null,e.zValueFieldName=null,e.zValueScale=null,e.resolution=null,e.filterQueryParameter=null,e.outputDatasetName=null,e.pixelFormat=null}}])&&Cj(t.prototype,r),n&&Cj(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Tj(e){"@babel/helpers - typeof";return(Tj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Aj(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ij(){return(Ij="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Dj(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function Rj(e,t){return(Rj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Lj(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Dj(e);if(t){var o=Dj(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===Tj(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Nj(e)}(this,r)}}function Nj(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Dj(e){return(Dj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Bj=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Rj(e,t)}(i,jj);var t,r,n,o=Lj(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).smooth=.1,t.tension=40,t.searchMode=null,t.expectedCount=12,t.maxPointCountForInterpolation=200,t.maxPointCountInNode=50,e&&j.extend(Nj(t),e),t.CLASS_NAME="SuperMap.InterpolationRBFAnalystParameters",t}return t=i,n=[{key:"toObject",value:function(e,t){for(var r in e)t[r]=e[r]}}],(r=[{key:"destroy",value:function(){Ij(Dj(i.prototype),"destroy",this).call(this);var e=this;e.smooth=null,e.tension=null,e.searchMode=null,e.expectedCount=null,e.maxPointCountForInterpolation=null,e.maxPointCountInNode=null}}])&&Aj(t.prototype,r),n&&Aj(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Fj(e){"@babel/helpers - typeof";return(Fj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Gj(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function zj(){return(zj="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Yj(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function Uj(e,t){return(Uj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Vj(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Yj(e);if(t){var o=Yj(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===Fj(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Wj(e)}(this,r)}}function Wj(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Yj(e){return(Yj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Hj=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Uj(e,t)}(i,jj);var t,r,n,o=Vj(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),t=o.call(this,e),e&&j.extend(Wj(t),e),t.CLASS_NAME="SuperMap.InterpolationDensityAnalystParameters",t}return t=i,(r=[{key:"destroy",value:function(){zj(Yj(i.prototype),"destroy",this).call(this)}}])&&Gj(t.prototype,r),n&&Gj(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Xj(e){"@babel/helpers - typeof";return(Xj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qj(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Jj(){return(Jj="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=$j(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function Zj(e,t){return(Zj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Kj(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=$j(e);if(t){var o=$j(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===Xj(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Qj(e)}(this,r)}}function Qj(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $j(e){return($j=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var eT=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Zj(e,t)}(i,jj);var t,r,n,o=Kj(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).power=2,t.searchMode=null,t.expectedCount=12,e&&j.extend(Qj(t),e),t.CLASS_NAME="SuperMap.InterpolationIDWAnalystParameters",t}return t=i,(r=[{key:"destroy",value:function(){Jj($j(i.prototype),"destroy",this).call(this);this.power=null,this.searchMode=null,this.expectedCount=null}}])&&qj(t.prototype,r),n&&qj(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function tT(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var rT=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.clipRegion=null,this.createResultDataset=!1,this.resultDatasetName=null,this.resultDatasourceName=null,this.returnResultRegion=!0,j.extend(this,t),this.CLASS_NAME="SuperMap.ThiessenAnalystParameters")}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){var e=this;e.clipRegion&&(e.clipRegion.destroy(),e.clipRegion=null),e.createResultDataset=null,e.resultDatasetName=null,e.resultDatasourceName=null,e.returnResultRegion=null}}])&&tT(t.prototype,r),n&&tT(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function nT(e){"@babel/helpers - typeof";return(nT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function oT(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function iT(){return(iT="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=lT(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function aT(e,t){return(aT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function sT(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=lT(e);if(t){var o=lT(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===nT(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return uT(e)}(this,r)}}function uT(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function lT(e){return(lT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var cT=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&aT(e,t)}(i,jj);var t,r,n,o=sT(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).type=null,t.mean=null,t.angle=0,t.nugget=0,t.range=0,t.sill=0,t.variogramMode=$t.SPHERICAL,t.exponent=er.EXP1,t.searchMode=null,t.expectedCount=12,t.maxPointCountForInterpolation=200,t.maxPointCountInNode=50,e&&j.extend(uT(t),e),t.CLASS_NAME="SuperMap.InterpolationKrigingAnalystParameters",t}return t=i,(r=[{key:"destroy",value:function(){iT(lT(i.prototype),"destroy",this).call(this);var e=this;e.type=null,e.mean=null,e.angle=null,e.nugget=null,e.range=null,e.sill=null,e.variogramMode=null,e.exponent=null,e.searchMode=null,e.expectedCount=null,e.maxPointCountForInterpolation=null,e.maxPointCountInNode=null}}])&&oT(t.prototype,r),n&&oT(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function fT(e){"@babel/helpers - typeof";return(fT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function hT(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function pT(){return(pT="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=gT(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function dT(e,t){return(dT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function yT(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=gT(e);if(t){var o=gT(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===fT(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return vT(e)}(this,r)}}function vT(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function gT(e){return(gT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var mT=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&dT(e,t)}(i,pC);var t,r,n,o=yT(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t)).mode=null,t&&j.extend(vT(r),t),r}return t=i,(r=[{key:"destroy",value:function(){pT(gT(i.prototype),"destroy",this).call(this),this.mode=null,this.CLASS_NAME="SuperMap.InterpolationAnalystService"}},{key:"processAsync",value:function(e){var t={},r=this;e instanceof Hj?(r.mode="Density","geometry"===e.InterpolationAnalystType?r.url=j.urlPathAppend(r.url,"geometry/interpolation/density"):r.url=j.urlPathAppend(r.url,"datasets/"+e.dataset+"/interpolation/density")):e instanceof eT?(r.mode="IDW","geometry"===e.InterpolationAnalystType?r.url=j.urlPathAppend(r.url,"geometry/interpolation/idw"):r.url=j.urlPathAppend(r.url,"datasets/"+e.dataset+"/interpolation/idw")):e instanceof Bj?(r.mode="RBF","geometry"===e.InterpolationAnalystType?r.url=j.urlPathAppend(r.url,"geometry/interpolation/rbf"):r.url=j.urlPathAppend(r.url,"datasets/"+e.dataset+"/interpolation/rbf")):e instanceof cT&&(r.mode="Kriging","geometry"===e.InterpolationAnalystType?r.url=j.urlPathAppend(r.url,"geometry/interpolation/kriging"):r.url=j.urlPathAppend(r.url,"datasets/"+e.dataset+"/interpolation/kriging")),jj.toObject(e,t);var n=j.toJSON(t);r.url=j.urlAppend(r.url,"returnContent=true"),r.request({method:"POST",data:n,scope:r,success:r.serviceProcessCompleted,failure:r.serviceProcessFailed})}}])&&hT(t.prototype,r),n&&hT(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function bT(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var wT=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.dataset=null,this.extractRegion=null,this.expression=null,this.isZip=!1,this.ignoreNoValue=!1,this.targetDatasource=null,this.resultGridName=null,this.deleteExistResultDataset=!1,j.extend(this,t),this.CLASS_NAME="SuperMap.MathExpressionAnalysisParameters")}var t,r,n;return t=e,n=[{key:"toObject",value:function(e,t){for(var r in e)if("dataset"!==r&&(t[r]=e[r]),"extractRegion"===r&&e[r]){for(var n=e[r].components[0].components,o={},i=[],a=n.length,s=0;s<a-1;s++){var u={};u.x=n[s].x,u.y=n[s].y,i.push(u)}o.points=i,o.type="REGION",t[r]=o}}}],(r=[{key:"destroy",value:function(){var e=this;e.dataset=null,e.bounds=null,e.expression=null,e.isZip=!0,e.ignoreNoValue=!0,e.targetDatasource=null,e.resultGridName=null,e.deleteExistResultDataset=null}}])&&bT(t.prototype,r),n&&bT(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function _T(e){"@babel/helpers - typeof";return(_T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xT(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ST(){return(ST="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ET(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function OT(e,t){return(OT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function PT(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=ET(e);if(t){var o=ET(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===_T(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function ET(e){return(ET=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var kT=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&OT(e,t)}(i,pC);var t,r,n,o=PT(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t)).CLASS_NAME="SuperMap.MathExpressionAnalysisService",r}return t=i,(r=[{key:"destroy",value:function(){ST(ET(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){var t=this,r={};e instanceof wT&&(t.url=j.urlPathAppend(t.url,"datasets/"+e.dataset+"/mathanalyst")),wT.toObject(e,r);var n=j.toJSON(r);t.url=j.urlAppend(t.url,"returnContent=true"),t.request({method:"POST",data:n,scope:t,success:t.serviceProcessCompleted,failure:t.serviceProcessFailed})}}])&&xT(t.prototype,r),n&&xT(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function MT(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var CT=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.operation=Yt.UNION,t&&j.extend(this,t),this.CLASS_NAME="SuperMap.OverlayAnalystParameters"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){this.operation=null}}])&&MT(t.prototype,r),n&&MT(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function jT(e){"@babel/helpers - typeof";return(jT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function TT(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function AT(){return(AT="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=NT(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function IT(e,t){return(IT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function RT(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=NT(e);if(t){var o=NT(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===jT(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return LT(e)}(this,r)}}function LT(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function NT(e){return(NT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var DT=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&IT(e,t)}(i,CT);var t,r,n,o=RT(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).operateDataset=null,t.operateDatasetFields=[],t.operateDatasetFilter=new Iy,t.operateRegions=[],t.sourceDataset=null,t.sourceDatasetFields=[],t.sourceDatasetFilter=new Iy,t.tolerance=0,t.resultSetting=new jC,j.extend(LT(t),e),t.CLASS_NAME="SuperMap.DatasetOverlayAnalystParameters",t}return t=i,n=[{key:"toObject",value:function(e,t){for(var r in e)if("sourceDataset"!==r)if("operateRegions"===r){t.operateRegions=[];var n=e.operateRegions;for(var o in n)n.hasOwnProperty(o)&&(t.operateRegions[o]=hr.fromGeometry(n[o]))}else"resultSetting"===r?t.dataReturnOption=e.resultSetting:t[r]=e[r]}}],(r=[{key:"destroy",value:function(){AT(NT(i.prototype),"destroy",this).call(this);var e=this;if(e.operateDataset=null,e.operateDatasetFields=null,e.operateDatasetFilter&&(e.operateDatasetFilter.destroy(),e.operateDatasetFilter=null),e.operateRegions){for(var t=0,r=e.operateRegions,n=r.length;t<n;t++)r[t].destroy();e.operateRegions=null}e.sourceDataset=null,e.sourceDatasetFields=null,e.sourceDatasetFilter&&(e.sourceDatasetFilter.destroy(),e.sourceDatasetFilter=null),e.tolerance=null,e.resultSetting&&(e.resultSetting.destroy(),e.resultSetting=null)}}])&&TT(t.prototype,r),n&&TT(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function BT(e){"@babel/helpers - typeof";return(BT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function FT(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function GT(){return(GT="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=WT(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function zT(e,t){return(zT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function UT(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=WT(e);if(t){var o=WT(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===BT(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return VT(e)}(this,r)}}function VT(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function WT(e){return(WT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var YT=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&zT(e,t)}(i,CT);var t,r,n,o=UT(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),t=o.call(this,e),e&&e.operateGeometry&&(t.operateGeometry=e.operateGeometry),e&&e.sourceGeometry&&(t.sourceGeometry=e.sourceGeometry),e&&e.operateGeometries&&(t.operateGeometries=e.operateGeometries),e&&e.sourceGeometries&&(t.sourceGeometries=e.sourceGeometries),e&&j.extend(VT(t),e),t.CLASS_NAME="SuperMap.GeometryOverlayAnalystParameters",t}return t=i,n=[{key:"toObject",value:function(e,t){for(var r in e)if("sourceGeometry"===r)t.sourceGeometry=hr.fromGeometry(e.sourceGeometry);else if("sourceGeometries"===r){for(var n=[],o=0;o<e.sourceGeometries.length;o++)n.push(hr.fromGeometry(e.sourceGeometries[o]));t.sourceGeometries=n}else if("operateGeometry"===r)t.operateGeometry=hr.fromGeometry(e.operateGeometry);else if("operateGeometries"===r){for(var i=[],a=0;a<e.operateGeometries.length;a++)i.push(hr.fromGeometry(e.operateGeometries[a]));t.operateGeometries=i}else t[r]=e[r]}}],(r=[{key:"destroy",value:function(){GT(WT(i.prototype),"destroy",this).call(this);var e=this;e.sourceGeometry&&(e.sourceGeometry.destroy(),e.sourceGeometry=null),e.sourceGeometries&&(e.sourceGeometries.destroy(),e.sourceGeometries=null),e.sourceGeometry&&(e.sourceGeometry.destroy(),e.sourceGeometry=null),e.operateGeometries&&(e.operateGeometries.destroy(),e.operateGeometries=null)}}])&&FT(t.prototype,r),n&&FT(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function HT(e){"@babel/helpers - typeof";return(HT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function XT(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function qT(){return(qT="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=QT(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function JT(e,t){return(JT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function ZT(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=QT(e);if(t){var o=QT(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===HT(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return KT(e)}(this,r)}}function KT(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function QT(e){return(QT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var $T=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&JT(e,t)}(i,pC);var t,r,n,o=ZT(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t)).mode=null,t&&j.extend(KT(r),t),r.CLASS_NAME="SuperMap.OverlayAnalystService",r}return t=i,(r=[{key:"destroy",value:function(){qT(QT(i.prototype),"destroy",this).call(this),this.mode=null}},{key:"processAsync",value:function(e){var t={},r=this;e instanceof DT?(r.mode="datasets",r.url=j.urlPathAppend(r.url,"datasets/"+e.sourceDataset+"/overlay"),DT.toObject(e,t)):e instanceof YT&&(r.mode="geometry",e.operateGeometries&&e.sourceGeometries?(r.url=j.urlPathAppend(r.url,"geometry/overlay/batch"),r.url=j.urlAppend(r.url,"ignoreAnalystParam=true")):r.url=j.urlPathAppend(r.url,"geometry/overlay"),YT.toObject(e,t)),this.returnContent=!0;var n=j.toJSON(t);r.request({method:"POST",data:n,scope:r,success:r.serviceProcessCompleted,failure:r.serviceProcessFailed})}},{key:"dataFormat",value:function(){return[Et.GEOJSON,Et.ISERVER,Et.FGB]}}])&&XT(t.prototype,r),n&&XT(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function eA(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var tA=function(){function e(t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!t)return this;this.sourceRoute=null,this.point=null,this.tolerance=null,this.isIgnoreGap=!1,j.extend(this,t),this.CLASS_NAME="SuperMap.RouteCalculateMeasureParameters"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){var e=this;e.sourceRoute=null,e.point=null,e.tolerance&&(e.tolerance=null),e.isIgnoreGap&&(e.isIgnoreGap=!1)}}])&&eA(t.prototype,r),n&&eA(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function rA(e){"@babel/helpers - typeof";return(rA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function nA(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function oA(){return(oA="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=sA(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function iA(e,t){return(iA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function aA(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=sA(e);if(t){var o=sA(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===rA(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function sA(e){return(sA=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var uA=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&iA(e,t)}(i,pC);var t,r,n,o=aA(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t)).CLASS_NAME="SuperMap.RouteCalculateMeasureService",r}return t=i,(r=[{key:"destroy",value:function(){oA(sA(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof tA){var t,r=this;t=r.getJsonParameters(e),r.request({method:"POST",data:t,scope:r,success:r.serviceProcessCompleted,failure:r.serviceProcessFailed})}}},{key:"getJsonParameters",value:function(e){return this.url=j.urlPathAppend(this.url,"geometry/calculatemeasure"),this.url=j.urlAppend(this.url,"returnContent=true"),j.toJSON(e)}}])&&nA(t.prototype,r),n&&nA(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function lA(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var cA=function(){function e(t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!t)return this;this.sourceRoute=null,this.dataset=null,this.routeIDField=null,this.routeID=null,this.type=null,this.measure=null,this.offset=0,this.isIgnoreGap=!1,this.startMeasure=null,this.endMeasure=null;var r=t.sourceRoute,n={};if(r&&r instanceof m&&r.components){n.type=r.type,n.parts=r.parts;for(var o=[],i=0,a=r.components.length;i<a;i++)o=o.concat(r.components[i].components);n.points=o,t.sourceRoute=n}j.extend(this,t),this.CLASS_NAME="SuperMap.RouteLocatorParameters"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){var e=this;e.sourceRoute=null,e.type=null,e.measure=null,e.offset=0,e.isIgnoreGap=!1,e.startMeasure=null,e.endMeasure=null,e.dataset=null,e.routeID=null,e.routeIDField=null}}])&&lA(t.prototype,r),n&&lA(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function fA(e){"@babel/helpers - typeof";return(fA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function hA(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function pA(){return(pA="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=vA(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function dA(e,t){return(dA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function yA(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=vA(e);if(t){var o=vA(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===fA(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function vA(e){return(vA=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var gA=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&dA(e,t)}(i,pC);var t,r,n,o=yA(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t)).CLASS_NAME="SuperMap.RouteLocatorService",r}return t=i,(r=[{key:"destroy",value:function(){pA(vA(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof cA){var t,r=this;t=r.getJsonParameters(e),r.request({method:"POST",data:t,scope:r,success:r.serviceProcessCompleted,failure:r.serviceProcessFailed})}}},{key:"getJsonParameters",value:function(e){var t="geometry/routelocator";return e.dataset&&(t="datasets/"+e.dataset+"/linearreferencing/routelocator",e.sourceRoute=null),this.url=j.urlPathAppend(this.url,t),this.url=j.urlAppend(this.url,"returnContent=true"),j.toJSON(e)}}])&&hA(t.prototype,r),n&&hA(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function mA(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var bA=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.clipRegion=null,this.datumValue=0,this.expectedZValues=null,this.interval=0,this.resampleTolerance=0,this.smoothMethod=Xt.BSPLINE,this.smoothness=0,t&&j.extend(this,t),this.CLASS_NAME="SuperMap.SurfaceAnalystParametersSetting"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){var e=this;e.clipRegion&&(e.clipRegion.destroy(),e.clipRegion=null),e.datumValue=null,e.expectedZValues=null,e.interval=null,e.resampleTolerance=null,e.smoothMethod=null,e.smoothness=null}},{key:"toJSON",value:function(){var e="'datumValue':"+j.toJSON(this.datumValue);if(e+=",'interval':"+j.toJSON(this.interval),e+=",'resampleTolerance':"+j.toJSON(this.resampleTolerance),e+=",'smoothMethod':"+j.toJSON(this.smoothMethod),e+=",'smoothness':"+j.toJSON(this.smoothness),null!=this.expectedZValues&&(e+=",'expectedZValues':"+j.toJSON(this.expectedZValues)),null!=this.clipRegion){var t=this.clipRegion;this.clipRegion instanceof m&&this.clipRegion.components&&(t=hr.fromGeometry(this.clipRegion)),e+=",'clipRegion':"+j.toJSON(t)}return"{"+e+"}"}}])&&mA(t.prototype,r),n&&mA(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function wA(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var _A=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.resolution=0,this.extractParameter=new bA,this.resultSetting=new jC,this.surfaceAnalystMethod=qt.ISOLINE,t&&j.extend(this,t),this.CLASS_NAME="SuperMap.SurfaceAnalystParameters"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){var e=this;e.resolution=null,e.extractParameter&&(e.extractParameter.destroy(),e.extractParameter=null),e.resultSetting&&(e.resultSetting.destroy(),e.resultSetting=null),e.surfaceAnalystMethod=null}}])&&wA(t.prototype,r),n&&wA(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function xA(e){"@babel/helpers - typeof";return(xA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function SA(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function OA(){return(OA="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=MA(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function PA(e,t){return(PA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function EA(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=MA(e);if(t){var o=MA(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===xA(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return kA(e)}(this,r)}}function kA(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function MA(e){return(MA=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var CA=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&PA(e,t)}(i,_A);var t,r,n,o=EA(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).dataset=null,t.filterQueryParameter=new Iy,t.zValueFieldName=null,e&&j.extend(kA(t),e),t.CLASS_NAME="SuperMap.DatasetSurfaceAnalystParameters",t}return t=i,n=[{key:"toObject",value:function(e,t){for(var r in e)if("filterQueryParameter"===r&&(t.filterQueryParameter=e.filterQueryParameter),"extractParameter"===r)e.extractParameter.clipRegion instanceof m&&e.extractParameter.clipRegion.components&&(e.extractParameter.clipRegion=hr.fromGeometry(e.extractParameter.clipRegion)),t.extractParameter=e.extractParameter;else{if("dataset"===r)continue;if("surfaceAnalystMethod"===r)continue;t[r]=e[r]}}}],(r=[{key:"destroy",value:function(){OA(MA(i.prototype),"destroy",this).call(this);var e=this;e.dataset=null,e.filterQueryParameter&&(e.filterQueryParameter.destroy(),e.filterQueryParameter=null),e.zValueFieldName=null}}])&&SA(t.prototype,r),n&&SA(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function jA(e){"@babel/helpers - typeof";return(jA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function TA(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function AA(){return(AA="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=NA(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function IA(e,t){return(IA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function RA(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=NA(e);if(t){var o=NA(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===jA(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return LA(e)}(this,r)}}function LA(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function NA(e){return(NA=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var DA=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&IA(e,t)}(i,_A);var t,r,n,o=RA(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).points=null,t.zValues=null,e&&j.extend(LA(t),e),t.CLASS_NAME="SuperMap.GeometrySurfaceAnalystParameters",t}return t=i,(r=[{key:"destroy",value:function(){AA(NA(i.prototype),"destroy",this).call(this);if(this.points){for(var e=0,t=this.points,r=t.length;e<r;e++)t[e].destroy();this.points=null}this.zValues=null}}])&&TA(t.prototype,r),n&&TA(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function BA(e){"@babel/helpers - typeof";return(BA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function FA(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function GA(){return(GA="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=VA(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function zA(e,t){return(zA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function UA(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=VA(e);if(t){var o=VA(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===BA(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function VA(e){return(VA=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var WA=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&zA(e,t)}(i,pC);var t,r,n,o=UA(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t)).CLASS_NAME="SuperMap.SurfaceAnalystService",r}return t=i,(r=[{key:"destroy",value:function(){GA(VA(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof _A){var t,r=this;t=r.getJsonParameters(e),r.request({method:"POST",data:t,scope:r,success:r.serviceProcessCompleted,failure:r.serviceProcessFailed})}}},{key:"getJsonParameters",value:function(e){var t="",r={};if(e instanceof CA)this.url=j.urlPathAppend(this.url,"datasets/"+e.dataset+"/"+e.surfaceAnalystMethod.toLowerCase()),CA.toObject(e,r),t=j.toJSON(r);else{if(!(e instanceof DA))return;this.url=j.urlPathAppend(this.url,"geometry/"+e.surfaceAnalystMethod.toLowerCase()),t=j.toJSON(e)}return this.returnContent=!0,t}},{key:"dataFormat",value:function(){return[Et.GEOJSON,Et.ISERVER,Et.FGB]}}])&&FA(t.prototype,r),n&&FA(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function YA(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var HA=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.dataset=null,this.zFactor=1,this.averageCurvatureName=null,this.profileCurvatureName="",this.planCurvatureName="",this.deleteExistResultDataset=!1,j.extend(this,t),this.CLASS_NAME="SuperMap.TerrainCurvatureCalculationParameters")}var t,r,n;return t=e,n=[{key:"toObject",value:function(e,t){for(var r in e)"dataset"!==r&&(t[r]=e[r])}}],(r=[{key:"destroy",value:function(){var e=this;e.dataset=null,e.zFactor=1,e.averageCurvatureName=null,e.profileCurvatureName=null,e.planCurvatureName=null,e.deleteExistResultDataset=!0}}])&&YA(t.prototype,r),n&&YA(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function XA(e){"@babel/helpers - typeof";return(XA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qA(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function JA(){return(JA="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=QA(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function ZA(e,t){return(ZA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function KA(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=QA(e);if(t){var o=QA(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===XA(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function QA(e){return(QA=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var $A=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ZA(e,t)}(i,pC);var t,r,n,o=KA(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t)).CLASS_NAME="SuperMap.TerrainCurvatureCalculationService",r}return t=i,(r=[{key:"destroy",value:function(){JA(QA(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){var t=this,r={};e instanceof HA&&(t.url=j.urlPathAppend(t.url,"datasets/"+e.dataset+"/terraincalculation/curvature")),HA.toObject(e,r);var n=j.toJSON(r);t.url=j.urlAppend(t.url,"returnContent=true"),t.request({method:"POST",data:n,scope:t,success:t.serviceProcessCompleted,failure:t.serviceProcessFailed})}}])&&qA(t.prototype,r),n&&qA(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function eI(e){"@babel/helpers - typeof";return(eI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tI(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function rI(){return(rI="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=aI(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function nI(e,t){return(nI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function oI(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=aI(e);if(t){var o=aI(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===eI(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return iI(e)}(this,r)}}function iI(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function aI(e){return(aI=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var sI=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&nI(e,t)}(i,rT);var t,r,n,o=oI(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).filterQueryParameter=null,t.dataset=null,e&&j.extend(iI(t),e),t.CLASS_NAME="SuperMap.DatasetThiessenAnalystParameters",t}return t=i,n=[{key:"toObject",value:function(e,t){for(var r in e)"clipRegion"===r?t.clipRegion=hr.fromGeometry(e.clipRegion):t[r]=e[r]}}],(r=[{key:"destroy",value:function(){rI(aI(i.prototype),"destroy",this).call(this);this.filterQueryParameter&&(this.filterQueryParameter.destroy(),this.filterQueryParameter=null)}}])&&tI(t.prototype,r),n&&tI(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function uI(e){"@babel/helpers - typeof";return(uI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function lI(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function cI(){return(cI="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=dI(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function fI(e,t){return(fI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function hI(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=dI(e);if(t){var o=dI(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===uI(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return pI(e)}(this,r)}}function pI(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function dI(e){return(dI=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var yI=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&fI(e,t)}(i,rT);var t,r,n,o=hI(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).points=null,e&&j.extend(pI(t),e),t.CLASS_NAME="SuperMap.GeometryThiessenAnalystParameters",t}return t=i,n=[{key:"toObject",value:function(e,t){for(var r in e)"clipRegion"===r?t.clipRegion=hr.fromGeometry(e.clipRegion):t[r]=e[r]}}],(r=[{key:"destroy",value:function(){cI(dI(i.prototype),"destroy",this).call(this);if(this.points){for(var e=this.points.length-1;e>=0;e--)this.points[e].destroy();this.points=null}}}])&&lI(t.prototype,r),n&&lI(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function vI(e){"@babel/helpers - typeof";return(vI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function gI(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function mI(){return(mI="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=xI(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function bI(e,t){return(bI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function wI(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=xI(e);if(t){var o=xI(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===vI(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _I(e)}(this,r)}}function _I(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function xI(e){return(xI=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var SI=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&bI(e,t)}(i,pC);var t,r,n,o=wI(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t)).mode=null,t&&j.extend(_I(r),t),r.CLASS_NAME="SuperMap.ThiessenAnalystService",r}return t=i,(r=[{key:"destroy",value:function(){mI(xI(i.prototype),"destroy",this).call(this),this.mode=null}},{key:"processAsync",value:function(e){var t={},r=this;e instanceof sI?(r.mode="datasets",r.url=j.urlPathAppend(r.url,"datasets/"+e.dataset+"/thiessenpolygon"),sI.toObject(e,t)):e instanceof yI&&(r.mode="geometry",r.url=j.urlPathAppend(r.url,"geometry/thiessenpolygon"),yI.toObject(e,t));var n=j.toJSON(t);this.returnContent=!0,r.request({method:"POST",data:n,scope:r,success:r.serviceProcessCompleted,failure:r.serviceProcessFailed})}},{key:"dataFormat",value:function(){return[Et.GEOJSON,Et.ISERVER,Et.FGB]}}])&&gI(t.prototype,r),n&&gI(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function OI(e){"@babel/helpers - typeof";return(OI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function PI(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function EI(){return(EI="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=jI(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function kI(e,t){return(kI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function MI(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=jI(e);if(t){var o=jI(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===OI(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return CI(e)}(this,r)}}function CI(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function jI(e){return(jI=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var TI=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&kI(e,t)}(i,pC);var t,r,n,o=MI(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),r=o.call(this,e,t),t&&j.extend(CI(r),t),r.CLASS_NAME="SuperMap.GeometryBatchAnalystService",r}return t=i,(r=[{key:"processAsync",value:function(e){var t=this;t.url=j.urlPathAppend(t.url,"geometry/batchanalyst"),t.url=j.urlAppend(t.url,"returnContent=true&ignoreAnalystParam=true");var r=t._processParams(e),n=j.toJSON(r);t.request({method:"POST",data:n,scope:t,success:t.serviceProcessCompleted,failure:t.serviceProcessFailed})}},{key:"_processParams",value:function(e){var t=this;if(j.isArray(e)){var r=[];return e.map(function(e){return r.push(t._toJSON(e)),e}),r}}},{key:"_toJSON",value:function(e){var t={};if("buffer"===e.analystName)t.analystName="buffer",t.param={},HC.toObject(e.param,t.param);else if("overlay"===e.analystName)t.analystName="overlay",t.param={},YT.toObject(e.param,t.param);else if("interpolationDensity"===e.analystName)t.analystName="interpolationDensity",t.param={},jj.toObject(e.param,t.param);else if("interpolationidw"===e.analystName)t.analystName="interpolationidw",t.param={},jj.toObject(e.param,t.param);else if("interpolationRBF"===e.analystName)t.analystName="interpolationRBF",t.param={},jj.toObject(e.param,t.param);else if("interpolationKriging"===e.analystName)t.analystName="interpolationKriging",t.param={},jj.toObject(e.param,t.param);else{if("thiessenpolygon"!==e.analystName)return e;t.analystName="thiessenpolygon",t.param={},yI.toObject(e.param,t.param)}return t}},{key:"destroy",value:function(){EI(jI(i.prototype),"destroy",this).call(this)}}])&&PI(t.prototype,r),n&&PI(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function AI(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var II=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.url=t,this.options=r||{}}var t,r,n;return t=e,(r=[{key:"getAreaSolarRadiationResult",value:function(e,t,r){var n=this;new xC(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,eventListeners:{scope:n,processCompleted:t,processFailed:t},format:n._processFormat(r)}).processAsync(e)}},{key:"bufferAnalysis",value:function(e,t,r){var n=this;new ej(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,eventListeners:{scope:n,processCompleted:t,processFailed:t},format:n._processFormat(r)}).processAsync(e)}},{key:"densityAnalysis",value:function(e,t,r){var n=this;new cj(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,eventListeners:{scope:n,processCompleted:t,processFailed:t},format:n._processFormat(r)}).processAsync(e)}},{key:"generateSpatialData",value:function(e,t,r){var n=this;new bj(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,eventListeners:{scope:n,processCompleted:t,processFailed:t},format:n._processFormat(r)}).processAsync(e)}},{key:"geoRelationAnalysis",value:function(e,t,r){var n=this;new Mj(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,eventListeners:{scope:n,processCompleted:t,processFailed:t},format:n._processFormat(r)}).processAsync(e)}},{key:"interpolationAnalysis",value:function(e,t,r){var n=this;new mT(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,eventListeners:{scope:n,processCompleted:t,processFailed:t},format:n._processFormat(r)}).processAsync(e)}},{key:"mathExpressionAnalysis",value:function(e,t,r){var n=this;new kT(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,eventListeners:{scope:n,processCompleted:t,processFailed:t},format:n._processFormat(r)}).processAsync(e)}},{key:"overlayAnalysis",value:function(e,t,r){var n=this;new $T(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,eventListeners:{scope:n,processCompleted:t,processFailed:t},format:n._processFormat(r)}).processAsync(e)}},{key:"routeCalculateMeasure",value:function(e,t,r){var n=this;new uA(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,eventListeners:{scope:n,processCompleted:t,processFailed:t},format:n._processFormat(r)}).processAsync(e)}},{key:"routeLocate",value:function(e,t,r){var n=this;new gA(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,eventListeners:{scope:n,processCompleted:t,processFailed:t},format:n._processFormat(r)}).processAsync(e)}},{key:"surfaceAnalysis",value:function(e,t,r){var n=this;new WA(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,eventListeners:{scope:n,processCompleted:t,processFailed:t},format:n._processFormat(r)}).processAsync(e)}},{key:"terrainCurvatureCalculate",value:function(e,t,r){var n=this;new $A(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,eventListeners:{scope:n,processCompleted:t,processFailed:t},format:n._processFormat(r)}).processAsync(e)}},{key:"thiessenAnalysis",value:function(e,t,r){var n=this;new SI(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,eventListeners:{scope:n,processCompleted:t,processFailed:t},format:n._processFormat(r)}).processAsync(e)}},{key:"geometrybatchAnalysis",value:function(e,t,r){for(var n=new TI(this.url,{eventListeners:{scope:this,processCompleted:t,processFailed:t},format:this._processFormat(r)}),o=[],i=0;i<e.length;i++){var a=e[i];o.push({analystName:a.analystName,param:a.param})}n.processAsync(o)}},{key:"_processFormat",value:function(e){return e||Et.GEOJSON}}])&&AI(t.prototype,r),n&&AI(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function RI(e){"@babel/helpers - typeof";return(RI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function LI(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function NI(e,t){return(NI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function DI(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=BI(e);if(t){var o=BI(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===RI(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function BI(e){return(BI=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var FI=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&NI(e,t)}(i,Tf);var t,r,n,o=DI(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t))._spatialAnalystService=new II(e,t),r}return t=i,(r=[{key:"getAreaSolarRadiationResult",value:function(e,t,r){this._spatialAnalystService.getAreaSolarRadiationResult(e,t,r)}},{key:"bufferAnalysis",value:function(e,t,r){e=this._processParams(e),this._spatialAnalystService.bufferAnalysis(e,t,r)}},{key:"densityAnalysis",value:function(e,t,r){e=this._processParams(e),this._spatialAnalystService.densityAnalysis(e,t,r)}},{key:"generateSpatialData",value:function(e,t,r){this._spatialAnalystService.generateSpatialData(e,t,r)}},{key:"geoRelationAnalysis",value:function(e,t,r){e=this._processParams(e),this._spatialAnalystService.geoRelationAnalysis(e,t,r)}},{key:"interpolationAnalysis",value:function(e,t,r){e=this._processParams(e),this._spatialAnalystService.interpolationAnalysis(e,t,r)}},{key:"mathExpressionAnalysis",value:function(e,t,r){e=this._processParams(e),this._spatialAnalystService.mathExpressionAnalysis(e,t,r)}},{key:"overlayAnalysis",value:function(e,t,r){e=this._processParams(e),this._spatialAnalystService.overlayAnalysis(e,t,r)}},{key:"routeCalculateMeasure",value:function(e,t,r){e=this._processParams(e),this._spatialAnalystService.routeCalculateMeasure(e,t,r)}},{key:"routeLocate",value:function(e,t,r){e=this._processParams(e),this._spatialAnalystService.routeLocate(e,t,r)}},{key:"surfaceAnalysis",value:function(e,t,r){e=this._processParams(e),this._spatialAnalystService.surfaceAnalysis(e,t,r)}},{key:"terrainCurvatureCalculate",value:function(e,t,r){this._spatialAnalystService.terrainCurvatureCalculate(e,t,r)}},{key:"thiessenAnalysis",value:function(e,t,r){e=this._processParams(e),this._spatialAnalystService.thiessenAnalysis(e,t,r)}},{key:"geometrybatchAnalysis",value:function(e,t,r){for(var n=0;n<e.length;n++)e[n].param=this._processParams(e[n].param);this._spatialAnalystService.geometrybatchAnalysis(e,t,r)}},{key:"_processParams",value:function(e){if(!e)return{};if(e.bounds&&(e.bounds=xr.toSuperMapBounds(e.bounds)),e.inputPoints)for(var t=0;t<e.inputPoints.length;t++){var r=e.inputPoints[t];xr.isArray(r)&&(e.inputPoints[t]={x:r[0],y:r[1],tag:r[2]})}if(e.points)for(var n=0;n<e.points.length;n++){var o=e.points[n];e.points[n]=xr.toSuperMapPoint(o)}if(e.point&&(e.point=xr.toSuperMapPoint(e.point)),e.extractRegion&&(e.extractRegion=xr.toSuperMapGeometry(e.extractRegion)),e.extractParameter&&e.extractParameter.clipRegion&&(e.extractParameter.clipRegion=xr.toSuperMapGeometry(e.extractParameter.clipRegion)),e.clipParam&&e.clipParam.clipRegion&&(e.clipParam.clipRegion=xr.toSuperMapGeometry(e.clipParam.clipRegion)),e.sourceRoute&&e.sourceRoute){var i={type:"LINEM"};i.parts=[e.sourceRoute.geometry.coordinates.length],i.points=[];for(var a=0;a<e.sourceRoute.geometry.coordinates.length;a++){var s=e.sourceRoute.geometry.coordinates[a];i.points=i.points.concat({x:s[0],y:s[1],measure:s[2]})}e.sourceRoute=i}if(e.operateRegions&&xr.isArray(e.operateRegions)&&e.operateRegions.map(function(t,r){return e.operateRegions[r]=xr.toSuperMapGeometry(t),e.operateRegions[r]}),e.sourceGeometry){var u=null;e.sourceGeometrySRID&&(u=e.sourceGeometrySRID),e.sourceGeometry=xr.toSuperMapGeometry(e.sourceGeometry),u&&(e.sourceGeometry.SRID=u),delete e.sourceGeometry.sourceGeometrySRID}if(e.operateGeometry&&(e.operateGeometry=xr.toSuperMapGeometry(e.operateGeometry)),e.sourceGeometries){for(var l=[],c=0;c<e.sourceGeometries.length;c++)l.push(xr.toSuperMapGeometry(e.sourceGeometries[c]));e.sourceGeometries=l}if(e.operateGeometries){for(var f=[],h=0;h<e.operateGeometries.length;h++)f.push(xr.toSuperMapGeometry(e.operateGeometries[h]));e.operateGeometries=f}return e.sourceRoute&&e.sourceRoute.components&&xr.isArray(e.sourceRoute.components)&&e.sourceRoute.components.map(function(t,r){return e.sourceRoute.components[r]=xr.toSuperMapGeometry(t),e.sourceRoute.components[r]}),e}},{key:"_processFormat",value:function(e){return e||Et.GEOJSON}}])&&LI(t.prototype,r),n&&LI(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function GI(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var zI=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.datasetNames=null,this.dataSourceNames=null,this.joinItems=null,this.themes=null,this.displayFilters=null,this.displayOrderBys=null,this.fieldValuesDisplayFilter=null,t&&j.extend(this,t),this.CLASS_NAME="SuperMap.ThemeParameters"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){var e=this;if(e.datasetNames=null,e.dataSourceNames=null,e.joinItems){for(var t=0,r=e.joinItems,n=r.length;t<n;t++)r[t].destroy();e.joinItems=null}if(e.themes){for(var o=0,i=e.themes,a=i.length;o<a;o++)i[o].destroy();e.themes=null}}}])&&GI(t.prototype,r),n&&GI(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function UI(e){"@babel/helpers - typeof";return(UI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function VI(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function WI(){return(WI="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=qI(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function YI(e,t){return(YI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function HI(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=qI(e);if(t){var o=qI(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===UI(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return XI(e)}(this,r)}}function XI(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function qI(e){return(qI=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var JI=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&YI(e,t)}(i,Nf);var t,r,n,o=HI(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),r=o.call(this,e,t),t&&j.extend(XI(r),t),r.eventCount=0,r.url=j.urlPathAppend(r.url,"tempLayersSet"),r.CLASS_NAME="SuperMap.ThemeService",r}return t=i,(r=[{key:"destroy",value:function(){WI(qI(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e,t){if(e instanceof zI){var r;r=this.getJsonParameters(e);var n=++this.eventCount,o={scope:this,processCompleted:function(e){if(n===e.result.eventId&&t)return delete e.result.eventId,t(e),this.events&&this.events.un(o),!1},processFailed:function(e){if((n===e.error.eventId||n===e.eventId)&&t)return t(e),this.events&&this.events.un(o),!1}};this.events.on(o),this.request({method:"POST",data:r,scope:this,success:function(e,t){e.eventId=n,this.serviceProcessCompleted(e,t)},failure:function(e,t){e.error&&(e.error.eventId=n),e.eventId=n,this.serviceProcessFailed(e,t)}})}}},{key:"getJsonParameters",value:function(e){var t,r="",n=null,o=null,i=null;r+="[{'type': 'UGC','subLayers': {'layers': [";for(var a=0;a<e.themes.length;a++){n=e.themes[a];var s=j.toJSON(n);if(r+="{'theme': "+(s=s.slice(0,-1))+"},'type': 'UGC','ugcLayerType': 'THEME',",(o=e.displayFilters)&&o.length>0&&(1===o.length?r+="'displayFilter':\""+o[0]+'",':r+="'displayFilter':\""+o[a]+'",'),(i=e.displayOrderBy)&&i.length>0&&(1===i.length?r+="'displayOrderBy':'"+i[0]+"',":r+="'displayOrderBy':'"+i[a]+"',"),(t=e.fieldValuesDisplayFilter)&&(r+="'fieldValuesDisplayFilter':"+j.toJSON(t)+","),e.joinItems&&e.joinItems.length>0&&e.joinItems[a]&&(r+="'joinItems':["+j.toJSON(e.joinItems[a])+"],"),e.datasetNames&&e.dataSourceNames){var u=e.datasetNames[a]?a:e.datasetNames.length-1,l=e.dataSourceNames[a]?a:e.dataSourceNames.length-1;r+="'datasetInfo': {'name': '"+e.datasetNames[u]+"','dataSourceName': '"+e.dataSourceNames[l]+"'}},"}else r+="},"}e.themes&&e.themes.length>0&&(r=r.substring(0,r.length-1)),r+="]},";var c=this.url.split("/");return r+="'name': '"+c[c.length-2]+"'}]"}}])&&VI(t.prototype,r),n&&VI(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function ZI(e){"@babel/helpers - typeof";return(ZI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function KI(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function QI(e,t){return(QI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function $I(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=eR(e);if(t){var o=eR(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===ZI(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function eR(e){return(eR=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var tR=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&QI(e,t)}(i,Tf);var t,r,n,o=$I(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t))._themeService=new JI(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers}),r}return t=i,(r=[{key:"getThemeInfo",value:function(e,t){this._themeService.processAsync(e,t)}}])&&KI(t.prototype,r),n&&KI(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function rR(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var nR=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.keyWord=null,this.returnPosition=!1,j.extend(this,t),this.CLASS_NAME="SuperMap.StopQueryParameters"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){j.reset(this)}}])&&rR(t.prototype,r),n&&rR(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function oR(e){"@babel/helpers - typeof";return(oR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function iR(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function aR(){return(aR="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=cR(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function sR(e,t){return(sR=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function uR(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=cR(e);if(t){var o=cR(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===oR(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return lR(e)}(this,r)}}function lR(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function cR(e){return(cR=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var fR=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&sR(e,t)}(i,Nf);var t,r,n,o=uR(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),r=o.call(this,e,t),t=t||{},j.extend(lR(r),t),r.CLASS_NAME="SuperMap.StopQueryService",r}return t=i,(r=[{key:"destroy",value:function(){aR(cR(i.prototype),"destroy",this).call(this),j.reset(this)}},{key:"processAsync",value:function(e){if(e instanceof nR){var t=this;t.url=j.urlPathAppend(t.url,"stops/keyword/"+e.keyWord),t.request({method:"GET",params:{returnPosition:e.returnPosition},scope:t,success:t.serviceProcessCompleted,failure:t.serviceProcessFailed})}}}])&&iR(t.prototype,r),n&&iR(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function hR(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var pR=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.transferLines=null,this.points=null,j.extend(this,t),this.CLASS_NAME="SuperMap.TransferPathParameters"}var t,r,n;return t=e,n=[{key:"toJson",value:function(e){if(e)return j.toJSON(e)}}],(r=[{key:"destroy",value:function(){j.reset(this)}}])&&hR(t.prototype,r),n&&hR(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function dR(e){"@babel/helpers - typeof";return(dR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yR(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function vR(){return(vR="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=bR(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function gR(e,t){return(gR=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function mR(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=bR(e);if(t){var o=bR(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===dR(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function bR(e){return(bR=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var wR=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&gR(e,t)}(i,Nf);var t,r,n,o=mR(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t)).CLASS_NAME="SuperMap.TransferPathService",r}return t=i,(r=[{key:"destroy",value:function(){vR(bR(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof pR){var t,r=this;r.url=j.urlPathAppend(r.url,"path"),t={points:j.toJSON(e.points),transferLines:j.toJSON(e.transferLines)},r.request({method:"GET",params:t,scope:r,success:r.serviceProcessCompleted,failure:r.serviceProcessFailed})}}}])&&yR(t.prototype,r),n&&yR(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function _R(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var xR=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.solutionCount=6,this.transferPreference=Qt.NONE,this.transferTactic=Kt.LESS_TIME,this.walkingRatio=null,this.points=!1,this.evadeLines=null,this.evadeStops=null,this.priorLines=null,this.priorStops=null,this.travelTime=null,j.extend(this,t),this.CLASS_NAME="SuperMap.TransferSolutionParameters"}var t,r,n;return t=e,n=[{key:"toJson",value:function(e){if(e)return j.toJSON(e)}}],(r=[{key:"destroy",value:function(){j.reset(this)}}])&&_R(t.prototype,r),n&&_R(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function SR(e){"@babel/helpers - typeof";return(SR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function OR(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function PR(){return(PR="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=MR(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function ER(e,t){return(ER=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function kR(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=MR(e);if(t){var o=MR(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===SR(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function MR(e){return(MR=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var CR=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ER(e,t)}(i,Nf);var t,r,n,o=kR(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t)).CLASS_NAME="SuperMap.TransferSolutionService",r}return t=i,(r=[{key:"destroy",value:function(){PR(MR(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof xR){var t,r=this;r.url=j.urlPathAppend(r.url,"solutions"),t={points:j.toJSON(e.points),walkingRatio:e.walkingRatio,transferTactic:e.transferTactic,solutionCount:e.solutionCount,transferPreference:e.transferPreference},e.evadeLines&&(t.evadeLines=j.toJSON(e.evadeLines)),e.evadeStops&&(t.evadeStops=j.toJSON(e.evadeStops)),e.priorLines&&(t.priorLines=j.toJSON(e.priorLines)),e.priorStops&&(t.priorStops=j.toJSON(e.priorStops)),e.travelTime&&(t.travelTime=e.travelTime),r.request({method:"GET",params:t,scope:r,success:r.serviceProcessCompleted,failure:r.serviceProcessFailed})}}}])&&OR(t.prototype,r),n&&OR(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function jR(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var TR=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.url=t,this.options=r||{}}var t,r,n;return t=e,(r=[{key:"queryStop",value:function(e,t){var r=this;new fR(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,eventListeners:{scope:r,processCompleted:t,processFailed:t}}).processAsync(e)}},{key:"analysisTransferPath",value:function(e,t){var r=this;new wR(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,eventListeners:{scope:r,processCompleted:t,processFailed:t}}).processAsync(e)}},{key:"analysisTransferSolution",value:function(e,t){var r=this;new CR(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,eventListeners:{scope:r,processCompleted:t,processFailed:t}}).processAsync(e)}}])&&jR(t.prototype,r),n&&jR(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function AR(e){"@babel/helpers - typeof";return(AR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function IR(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function RR(e,t){return(RR=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function LR(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=NR(e);if(t){var o=NR(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===AR(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function NR(e){return(NR=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var DR=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&RR(e,t)}(a,Tf);var t,r,n,i=LR(a);function a(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(r=i.call(this,e,t))._trafficTransferAnalystService=new TR(e,t),r}return t=a,(r=[{key:"queryStop",value:function(e,t){this._trafficTransferAnalystService.queryStop(e,t)}},{key:"analysisTransferPath",value:function(e,t){this._trafficTransferAnalystService.analysisTransferPath(e,t)}},{key:"analysisTransferSolution",value:function(e,t){this._trafficTransferAnalystService.analysisTransferSolution(e,t)}},{key:"_processParams",value:function(e){return e?(e.transferLines&&!xr.isArray(e.transferLines)&&(e.transferLines=[e.transferLines]),e.points&&xr.isArray(e.points)&&e.points.map(function(t,r){return e.points[r]=t instanceof o().LngLat?{x:t.lng,y:t.lat}:t,e.points[r]}),e):{}}}])&&IR(t.prototype,r),n&&IR(t,n),Object.defineProperty(t,"prototype",{writable:!1}),a}();function BR(e){"@babel/helpers - typeof";return(BR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function FR(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function GR(){return(GR="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=YR(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function zR(e,t){return(zR=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function UR(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=YR(e);if(t){var o=YR(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return VR(this,r)}}function VR(e,t){if(t&&("object"===BR(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return WR(e)}function WR(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function YR(e){return(YR=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var HR=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&zR(e,t)}(i,Nf);var t,r,n,o=UR(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),r=o.call(this,e,t),t&&j.extend(WR(r),t),r.eventCount=0,r.CLASS_NAME="SuperMap.WebPrintingService",r.url?r:VR(r)}return t=i,(r=[{key:"destroy",value:function(){GR(YR(i.prototype),"destroy",this).call(this)}},{key:"createWebPrintingJob",value:function(e,t){e&&(e.layoutOptions&&e.layoutOptions.legendOptions&&(!e.layoutOptions.legendOptions.title&&(e.layoutOptions.legendOptions.title=""),e.layoutOptions.legendOptions.picAsBase64=e.layoutOptions.legendOptions.picAsBase64&&e.layoutOptions.legendOptions.picAsBase64.replace(/^data:.+;base64,/,""),e.layoutOptions.legendOptions.customItems&&e.layoutOptions.legendOptions.customItems.hasOwnProperty("picAsBase64")&&(e.layoutOptions.legendOptions.customItems.picAsBase64=e.layoutOptions.legendOptions.customItems.picAsBase64.replace(/^data:.+;base64,/,""))),this.processAsync("jobs","POST",t,e))}},{key:"getPrintingJob",value:function(e,t){var r=this;r.processAsync("jobs/".concat(e),"GET",function(n){r.rollingProcess(n,r._processUrl("jobs/".concat(e)),t)})}},{key:"getPrintingJobResult",value:function(e,t){this.processAsync("jobs/".concat(e,"/result"),"GET",t)}},{key:"getLayoutTemplates",value:function(e){this.processAsync("layouts","GET",e)}},{key:"rollingProcess",value:function(e,t,r){var n=this;if(e)var o=setInterval(function(){var e=++n.eventCount,i={scope:this,processCompleted:function(t){if(e===t.result.eventId&&r)return delete t.result.eventId,r(t),n.events.un(i),!1},processFailed:function(t){if((e===t.error.eventId||e===t.eventId)&&r)return r(t),n.events.un(i),!1}};n.events.on(i),n.request({url:t,method:"GET",scope:n,success:function(t,r){switch(t.eventId=e,t.status){case"FINISHED":clearInterval(o),n.serviceProcessCompleted(t,r);break;case"ERROR":clearInterval(o),n.serviceProcessFailed(t,r);break;case"RUNNING":n.events.triggerEvent("processRunning",t)}},failure:n.serviceProcessFailed})},1e3)}},{key:"processAsync",value:function(e,t,r,n){var o=++this.eventCount,i={scope:this,processCompleted:function(e){if(o===e.result.eventId&&r)return delete e.result.eventId,r(e),this.events&&this.events.un(i),!1},processFailed:function(e){if(o===e.error.eventId||o===e.eventId)return r(e),this.events&&this.events.un(i),!1}};this.events.on(i);var a={url:this._processUrl(e),method:t,scope:this,success:function(e,t){e.eventId=o,this.serviceProcessCompleted(e,t)},failure:function(e,t){e.error&&(e.error.eventId=o),e.eventId=o,this.serviceProcessFailed(e,t)}};n&&(a.data=j.toJSON(n)),this.request(a)}},{key:"_processUrl",value:function(e){return e?j.urlPathAppend(this.url,e):this.url}}])&&FR(t.prototype,r),n&&FR(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function XR(e){"@babel/helpers - typeof";return(XR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qR(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function JR(e,t){return(JR=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function ZR(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=KR(e);if(t){var o=KR(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===XR(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function KR(e){return(KR=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var QR=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&JR(e,t)}(a,Tf);var t,r,n,i=ZR(a);function a(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(r=i.call(this,e,t))._webPrintingService=new HR(e,t),r}return t=a,(r=[{key:"createWebPrintingJob",value:function(e,t){e&&this._webPrintingService.createWebPrintingJob(this._processParams(e),t)}},{key:"getPrintingJob",value:function(e,t){this._webPrintingService.getPrintingJob(e,t)}},{key:"getPrintingJobResult",value:function(e,t){this._webPrintingService.getPrintingJobResult(e,t)}},{key:"getLayoutTemplates",value:function(e){this._webPrintingService.getLayoutTemplates(e)}},{key:"_processParams",value:function(e){return e.layoutOptions&&e.layoutOptions.littleMapOptions&&(e.layoutOptions.littleMapOptions.center=this._toPointObject(e.layoutOptions.littleMapOptions.center)),e.exportOptions&&(e.exportOptions.center=this._toPointObject(e.exportOptions.center)),e}},{key:"_toPointObject",value:function(e){return xr.isArray(e)?{x:e[0],y:e[1]}:e instanceof V||e instanceof o().Point?{x:e.x,y:e.y}:e instanceof o().LngLat?{x:e.lng,y:e.lat}:e}}])&&qR(t.prototype,r),n&&qR(t,n),Object.defineProperty(t,"prototype",{writable:!1}),a}();function $R(e){"@babel/helpers - typeof";return($R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function eL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function tL(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rL(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function nL(){return(nL="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=sL(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function oL(e,t){return(oL=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function iL(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=sL(e);if(t){var o=sL(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===$R(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return aL(e)}(this,r)}}function aL(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function sL(e){return(sL=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var uL=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&oL(e,t)}(i,Nf);var t,r,n,o=iL(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t)).options=t||{},t&&j.extend(aL(r),t),r.eventCount=0,r.CLASS_NAME="SuperMap.ImageService",r}return t=i,(r=[{key:"destroy",value:function(){nL(sL(i.prototype),"destroy",this).call(this)}},{key:"getCollections",value:function(e){var t=j.convertPath("/collections"),r=j.urlPathAppend(this.url,t);this._processAsync({url:r,mehtod:"GET",callback:e})}},{key:"getCollectionByID",value:function(e,t){var r={collectionId:e},n=j.convertPath("/collections/{collectionId}",r),o=j.urlPathAppend(this.url,n);this._processAsync({url:o,mehtod:"GET",callback:t})}},{key:"search",value:function(e,t){var r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?eL(Object(r),!0).forEach(function(t){tL(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eL(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},e||{}),n=j.convertPath("/search"),o=j.urlPathAppend(this.url,n);this._processAsync({url:o,method:"POST",data:r,callback:t})}},{key:"_processAsync",value:function(e){var t=e.url,r=e.method,n=e.callback,o=e.data,i=++this.eventCount,a=this,s={scope:this,processCompleted:function(e){if(i===e.result.eventId&&n)return delete e.result.eventId,n(e),this.events&&this.events.un(s),!1},processFailed:function(e){if((i===e.error.eventId||i===e.eventId)&&n)return n(e),this.events&&this.events.un(s),!1}};this.events.on(s),this.request({method:r||"GET",url:t,data:o,scope:this,success:function(e,t){e.eventId=i,a.serviceProcessCompleted(e,t)},failure:function(e,t){e.error&&(e.error.eventId=i),e.eventId=i,a.serviceProcessFailed(e,t)}})}}])&&rL(t.prototype,r),n&&rL(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function lL(e){"@babel/helpers - typeof";return(lL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function cL(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function fL(e,t){return(fL=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function hL(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=pL(e);if(t){var o=pL(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===lL(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function pL(e){return(pL=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var dL=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&fL(e,t)}(i,Tf);var t,r,n,o=hL(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t))._imageService=new uL(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers}),r}return t=i,(r=[{key:"getCollections",value:function(e){this._imageService.getCollections(e)}},{key:"getCollectionByID",value:function(e,t){this._imageService.getCollectionByID(e,t)}},{key:"search",value:function(e,t){this._imageService.search(e,t)}}])&&cL(t.prototype,r),n&&cL(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function yL(e){"@babel/helpers - typeof";return(yL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function vL(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function gL(){return(gL="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_L(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function mL(e,t){return(mL=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function bL(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=_L(e);if(t){var o=_L(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===yL(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return wL(e)}(this,r)}}function wL(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _L(e){return(_L=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var xL=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&mL(e,t)}(i,Nf);var t,r,n,o=bL(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t)).options=t||{},t&&j.extend(wL(r),t),r.eventCount=0,r.CLASS_NAME="SuperMap.ImageCollectionService",r}return t=i,(r=[{key:"destroy",value:function(){gL(_L(i.prototype),"destroy",this).call(this)}},{key:"getLegend",value:function(e,t){var r={collectionId:this.options.collectionId},n=j.convertPath("/collections/{collectionId}/legend",r),o=j.urlPathAppend(this.url,n);this._processAsync({url:o,method:"GET",params:e,callback:t})}},{key:"getStatistics",value:function(e){var t={collectionId:this.options.collectionId},r=j.convertPath("/collections/{collectionId}/statistics",t),n=j.urlPathAppend(this.url,r);this._processAsync({url:n,method:"GET",callback:e})}},{key:"getTileInfo",value:function(e){var t={collectionId:this.options.collectionId},r=j.convertPath("/collections/{collectionId}/tileInfo",t),n=j.urlPathAppend(this.url,r);this._processAsync({url:n,method:"GET",callback:e})}},{key:"deleteItemByID",value:function(e,t){var r={collectionId:this.options.collectionId,featureId:e},n=j.convertPath("/collections/{collectionId}/items/{featureId}",r),o=j.urlPathAppend(this.url,n);this._processAsync({url:o,method:"DELETE",callback:t})}},{key:"getItemByID",value:function(e,t){var r={collectionId:this.options.collectionId,featureId:e},n=j.convertPath("/collections/{collectionId}/items/{featureId}",r),o=j.urlPathAppend(this.url,n);this._processAsync({url:o,method:"GET",callback:t})}},{key:"_processAsync",value:function(e){var t=e.url,r=e.method,n=e.callback,o=e.params,i=++this.eventCount,a={scope:this,processCompleted:function(e){if(i===e.result.eventId&&n)return delete e.result.eventId,n(e),this.events&&this.events.un(a),!1},processFailed:function(e){if((i===e.error.eventId||i===e.eventId)&&n)return n(e),this.events&&this.events.un(a),!1}};this.events.on(a),this.request({method:r||"GET",url:t,params:o,scope:this,success:function(e,t){e.eventId=i,this.serviceProcessCompleted(e,t)},failure:function(e,t){e.error&&(e.error.eventId=i),e.eventId=i,this.serviceProcessFailed(e,t)}})}}])&&vL(t.prototype,r),n&&vL(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function SL(e){"@babel/helpers - typeof";return(SL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function OL(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function PL(e,t){return(PL=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function EL(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=kL(e);if(t){var o=kL(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===SL(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function kL(e){return(kL=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ML=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&PL(e,t)}(i,Tf);var t,r,n,o=EL(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t))._imageCollectionService=new xL(r.url,{collectionId:r.options.collectionId,proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers}),r}return t=i,(r=[{key:"getLegend",value:function(e,t){this._imageCollectionService.getLegend(e,t)}},{key:"getStatistics",value:function(e){this._imageCollectionService.getStatistics(e)}},{key:"getTileInfo",value:function(e){this._imageCollectionService.getTileInfo(e)}},{key:"deleteItemByID",value:function(e,t){this._imageCollectionService.deleteItemByID(e,t)}},{key:"getItemByID",value:function(e,t){this._imageCollectionService.getItemByID(e,t)}}])&&OL(t.prototype,r),n&&OL(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(),CL=window.SuperMap=window.SuperMap||{};function jL(e){"@babel/helpers - typeof";return(jL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function TL(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function AL(e,t){return(AL=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function IL(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=RL(e);if(t){var o=RL(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===jL(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function RL(e){return(RL=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}CL.Components=window.SuperMap.Components||{};var LL=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&AL(e,t)}(i,Ve);var t,r,n,o=IL(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).regExes={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/},t.CLASS_NAME="SuperMap.Format.WKT",t.extract={point:function(e){return e.x+" "+e.y},multipoint:function(e){for(var t=[],r=0,n=e.components.length;r<n;++r)t.push("("+this.extract.point.apply(this,[e.components[r]])+")");return t.join(",")},linestring:function(e){for(var t=[],r=0,n=e.components.length;r<n;++r)t.push(this.extract.point.apply(this,[e.components[r]]));return t.join(",")},multilinestring:function(e){for(var t=[],r=0,n=e.components.length;r<n;++r)t.push("("+this.extract.linestring.apply(this,[e.components[r]])+")");return t.join(",")},polygon:function(e){for(var t=[],r=0,n=e.components.length;r<n;++r)t.push("("+this.extract.linestring.apply(this,[e.components[r]])+")");return t.join(",")},multipolygon:function(e){for(var t=[],r=0,n=e.components.length;r<n;++r)t.push("("+this.extract.polygon.apply(this,[e.components[r]])+")");return t.join(",")},collection:function(e){for(var t=[],r=0,n=e.components.length;r<n;++r)t.push(this.extractGeometry.apply(this,[e.components[r]]));return t.join(",")}},t.parse={point:function(e){var t=p.trim(e).split(this.regExes.spaces);return new ze(new V(t[0],t[1]))},multipoint:function(e){for(var t,r=p.trim(e).split(","),n=[],o=0,i=r.length;o<i;++o)t=r[o].replace(this.regExes.trimParens,"$1"),n.push(this.parse.point.apply(this,[t]).geometry);return new ze(new re(n))},linestring:function(e){for(var t=p.trim(e).split(","),r=[],n=0,o=t.length;n<o;++n)r.push(this.parse.point.apply(this,[t[n]]).geometry);return new ze(new ye(r))},multilinestring:function(e){for(var t,r=p.trim(e).split(this.regExes.parenComma),n=[],o=0,i=r.length;o<i;++o)t=r[o].replace(this.regExes.trimParens,"$1"),n.push(this.parse.linestring.apply(this,[t]).geometry);return new ze(new tt(n))},polygon:function(e){for(var t,r,n,o=p.trim(e).split(this.regExes.parenComma),i=[],a=0,s=o.length;a<s;++a)t=o[a].replace(this.regExes.trimParens,"$1"),r=this.parse.linestring.apply(this,[t]).geometry,n=new xe(r.components),i.push(n);return new ze(new Me(i))},multipolygon:function(e){for(var t,r=p.trim(e).split(this.regExes.doubleParenComma),n=[],o=0,i=r.length;o<i;++o)t=r[o].replace(this.regExes.trimParens,"$1"),n.push(this.parse.polygon.apply(this,[t]).geometry);return new ze(new st(n))},geometrycollection:function(e){e=e.replace(/,\s*([A-Za-z])/g,"|$1");for(var t=p.trim(e).split("|"),r=[],n=0,o=t.length;n<o;++n)r.push(this.read(t[n]));return r}},t}return t=i,(r=[{key:"read",value:function(e){var t,r,n;e=e.replace(/[\n\r]/g," ");var o=this.regExes.typeStr.exec(e);return o&&(r=o[1].toLowerCase(),n=o[2],this.parse[r]&&(t=this.parse[r].apply(this,[n]))),t}},{key:"write",value:function(e){var t,r,n;e.constructor===Array?(t=e,n=!0):(t=[e],n=!1);var o=[];n&&o.push("GEOMETRYCOLLECTION(");for(var i=0,a=t.length;i<a;++i)n&&i>0&&o.push(","),r=t[i].geometry,o.push(this.extractGeometry(r));return n&&o.push(")"),o.join("")}},{key:"extractGeometry",value:function(e){var t=e.CLASS_NAME.split(".")[2].toLowerCase();return this.extract[t]?("collection"===t?"GEOMETRYCOLLECTION":t.toUpperCase())+"("+this.extract[t].apply(this,[e])+")":null}}])&&TL(t.prototype,r),n&&TL(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function NL(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var DL=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var r=this;t=t||{},this.speed=t.speed&&t.speed>=0?t.speed:1,this.frequency=t.speed&&t.frequency>=0?t.frequency:1e3,this.startTime=t.startTime&&null!=t.startTime?t.startTime:0,this.endTime=t.endTime&&null!=t.endTime&&t.endTime>=r.startTime?t.endTime:+new Date,this.repeat=void 0===t.repeat||t.repeat,this.reverse=void 0!==t.reverse&&t.reverse,this.currentTime=null,this.oldTime=null,this.running=!1,this.EVENT_TYPES=["start","pause","stop"],r.events=new Dn(this,null,this.EVENT_TYPES),r.speed=Number(r.speed),r.frequency=Number(r.frequency),r.startTime=Number(r.startTime),r.endTime=Number(r.endTime),r.startTime=Date.parse(new Date(r.startTime)),r.endTime=Date.parse(new Date(r.endTime)),r.currentTime=r.startTime,this.CLASS_NAME="SuperMap.TimeControlBase"}var t,r,n;return t=e,(r=[{key:"updateOptions",value:function(e){var t=this;(e=e||{}).speed&&e.speed>=0&&(t.speed=e.speed,t.speed=Number(t.speed)),e.speed&&e.frequency>=0&&(t.frequency=e.frequency,t.frequency=Number(t.frequency)),e.startTime&&null!=e.startTime&&(t.startTime=e.startTime,t.startTime=Date.parse(new Date(t.startTime))),e.endTime&&null!=e.endTime&&e.endTime>=t.startTime&&(t.endTime=e.endTime,t.endTime=Date.parse(new Date(t.endTime))),null!=e.repeat&&(t.repeat=e.repeat),null!=e.reverse&&(t.reverse=e.reverse)}},{key:"start",value:function(){var e=this;e.running||(e.running=!0,e.tick(),e.events.triggerEvent("start",e.currentTime))}},{key:"pause",value:function(){this.running=!1,this.events.triggerEvent("pause",this.currentTime)}},{key:"stop",value:function(){var e=this;e.currentTime=e.startTime,e.running&&(e.running=!1),e.events.triggerEvent("stop",e.currentTime)}},{key:"toggle",value:function(){this.running?this.pause():this.start()}},{key:"setSpeed",value:function(e){return e>=0&&(this.speed=e,!0)}},{key:"getSpeed",value:function(){return this.speed}},{key:"setFrequency",value:function(e){return e>=0&&(this.frequency=e,!0)}},{key:"getFrequency",value:function(){return this.frequency}},{key:"setStartTime",value:function(e){var t=this;return!((e=Date.parse(new Date(e)))>t.endTime)&&(t.startTime=e,t.currentTime<t.startTime&&(t.currentTime=t.startTime,t.tick()),!0)}},{key:"getStartTime",value:function(){return this.startTime}},{key:"setEndTime",value:function(e){var t=this;return t.endTime=Date.parse(new Date(t.endTime)),!(e<t.startTime)&&(t.endTime=e,t.currentTime>=t.endTime&&(t.currentTime=t.startTime,t.tick()),!0)}},{key:"getEndTime",value:function(){return this.endTime}},{key:"setCurrentTime",value:function(e){var t=this;return t.currentTime=Date.parse(new Date(t.currentTime)),e>=t.startTime&&e<=t.endTime&&(t.currentTime=e,t.startTime=t.currentTime,t.tick(),!0)}},{key:"getCurrentTime",value:function(){return this.currentTime}},{key:"setRepeat",value:function(e){this.repeat=e}},{key:"getRepeat",value:function(){return this.repeat}},{key:"setReverse",value:function(e){this.reverse=e}},{key:"getReverse",value:function(){return this.reverse}},{key:"getRunning",value:function(){return this.running}},{key:"destroy",value:function(){var e=this;e.speed=null,e.frequency=null,e.startTime=null,e.endTime=null,e.currentTime=null,e.repeat=null,e.running=!1,e.reverse=null}},{key:"tick",value:function(){}}])&&NL(t.prototype,r),n&&NL(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function BL(e){"@babel/helpers - typeof";return(BL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function FL(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function GL(){return(GL="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=WL(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function zL(e,t){return(zL=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function UL(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=WL(e);if(t){var o=WL(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===BL(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return VL(e)}(this,r)}}function VL(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function WL(e){return(WL=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var YL=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&zL(e,t)}(i,DL);var t,r,n,o=UL(i);function i(e,t){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);var n=VL(r=o.call(this,t));return n.callback=e,Function.prototype.bind||(Function.prototype.bind=function(e){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var t=Array.prototype.slice.call(arguments,1),r=this,n=function(){},o=function(){return r.apply(this instanceof n&&e?this:e,t.concat(Array.prototype.slice.call(arguments)))};return n.prototype=this.prototype,o.prototype=new n,o}),n.update=n.update.bind(n),n.oldTime=n.currentTime,n.CLASS_NAME="SuperMap.TimeFlowControl",r}return t=i,(r=[{key:"updateOptions",value:function(e){e=e||{},GL(WL(i.prototype),"updateOptions",this).call(this,e)}},{key:"start",value:function(){var e=this;e.running||(e.running=!0,e.reverse?e.currentTime===e.startTime&&(e.oldTime=e.endTime,e.currentTime=e.oldTime):e.oldTime===e.endTime&&(e.currentTime=e.startTime,e.oldTime=e.currentTime),e.tick())}},{key:"stop",value:function(){GL(WL(i.prototype),"stop",this).call(this);var e=this;e.oldTime=e.currentTime,e.running&&(e.running=!1),e.intervalId&&window.clearTimeout(e.intervalId)}},{key:"destroy",value:function(){GL(WL(i.prototype),"destroy",this).call(this);this.oldTime=null,this.callback=null}},{key:"tick",value:function(){var e=this;e.intervalId&&window.clearInterval(e.intervalId),e.intervalId=null,e.update(),e.intervalId=window.setInterval(e.update,e.frequency)}},{key:"update",value:function(){var e=this;if(e.running)if(e.callback&&e.callback(e.currentTime),e.reverse){if(e.currentTime===e.startTime){if(!e.repeat)return e.running=!1,null;e.oldTime=e.endTime,e.currentTime=e.oldTime}else e.currentTime=e.oldTime,e.oldTime-=e.speed;e.oldTime<=e.startTime&&(e.oldTime=e.startTime)}else{if(e.currentTime===e.endTime){if(!e.repeat)return e.running=!1,e.stop(),null;e.stop(),e.currentTime=e.startTime,e.oldTime=e.currentTime,e.start()}else e.oldTime=e.currentTime,e.currentTime+=e.speed;e.currentTime>=e.endTime&&(e.currentTime=e.endTime)}}}])&&FL(t.prototype,r),n&&FL(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function HL(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var XL=function(){function e(t,r){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t){var n=t.substr(t.length-1,1);this.serviceUrl="/"===n?t.substr(0,t.length-2):t}this.options=r||{},this.CLASS_NAME="SuperMap.iManagerServiceBase"}var t,r,n;return t=e,(r=[{key:"request",value:function(e,t,r,n){(n=n||{headers:{Accept:"*/*","Content-Type":"application/json"}}).hasOwnProperty("withCredentials")||(n.withCredentials=!0),n.crossOrigin=this.options.crossOrigin,n.headers=this.options.headers;var o=If.imanagerToken;return o&&(n.headers||(n.headers=[]),n.headers["X-Auth-Token"]=o),r&&(r=JSON.stringify(r)),Al.commit(e,t,r,n).then(function(e){return e.json()})}}])&&HL(t.prototype,r),n&&HL(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function qL(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var JL=function(e,t,r){return t&&qL(e.prototype,t),r&&qL(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.nodeSpec="SMALL",this.nodeCount=1,this.nodeName="",this.password="",this.description="",this.physicalMachineName="",this.ips=[],this.userName="",j.extend(this,t)});function ZL(e){"@babel/helpers - typeof";return(ZL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function KL(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function QL(e,t){return(QL=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function $L(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=eN(e);if(t){var o=eN(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===ZL(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function eN(e){return(eN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var tN=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&QL(e,t)}(i,XL);var t,r,n,o=$L(i);function i(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.call(this,e)}return t=i,(r=[{key:"load",value:function(){return this.request("GET",this.serviceUrl+"/web/api/service.json")}},{key:"createIServer",value:function(e){return this.request("POST",this.serviceUrl+"/icloud/web/nodes/server.json",new JL(e))}},{key:"createIPortal",value:function(e){return this.request("POST",this.serviceUrl+"/icloud/web/nodes/portal.json",new JL(e))}},{key:"iServerList",value:function(){return this.request("GET",this.serviceUrl+"/icloud/web/nodes/server.json")}},{key:"iPortalList",value:function(){return this.request("GET",this.serviceUrl+"/icloud/web/nodes/portal.json")}},{key:"startNodes",value:function(e){return this.request("POST",this.serviceUrl+"/icloud/web/nodes/started.json",e)}},{key:"stopNodes",value:function(e){return this.request("POST",this.serviceUrl+"/icloud/web/nodes/stopped.json",e)}}])&&KL(t.prototype,r),n&&KL(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function rN(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var nN=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r=r||{},this.serviceUrl=t,this.CLASS_NAME="SuperMap.iPortalServiceBase",this.withCredentials=r.withCredentials||!1,this.crossOrigin=r.crossOrigin,this.headers=r.headers}var t,r,n;return t=e,(r=[{key:"request",value:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{headers:this.headers,crossOrigin:this.crossOrigin,withCredentials:this.withCredentials};return t=If.appendCredential(t),Al.commit(e,t,r,n).then(function(e){return e.json()})}}])&&rN(t.prototype,r),n&&rN(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function oN(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var iN=function(e,t,r){return t&&oN(e.prototype,t),r&&oN(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.resourceType="",this.pageSize=12,this.currentPage=1,this.orderBy="UPDATETIME",this.orderType="DESC",this.searchType="PUBLIC",this.tags=[],this.dirIds=[],this.resourceSubTypes=[],this.aggregationTypes=[],this.text="",this.groupIds=[],this.departmentIds=[],j.extend(this,t)});function aN(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var sN=function(e,t,r){return t&&aN(e.prototype,t),r&&aN(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.content=[],this.total=0,this.currentPage=1,this.pageSize=12,this.aggregations=null,j.extend(this,t)});function uN(e){"@babel/helpers - typeof";return(uN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function lN(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function cN(e,t){return(cN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function fN(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=pN(e);if(t){var o=pN(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===uN(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return hN(e)}(this,r)}}function hN(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function pN(e){return(pN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var dN=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&cN(e,t)}(i,nN);var t,r,n,o=fN(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),r=o.call(this,e),t=t||{},r.authorizeSetting=[],r.bounds="",r.bounds4326="",r.checkStatus="",r.createTime=0,r.description=null,r.dirId=null,r.epsgCode=0,r.heatLevel=0,r.id=0,r.name="",r.personalDirId=null,r.resourceId=0,r.resourceSubType=null,r.resourceType=null,r.serviceRootUrlId=null,r.tags=null,r.thumbnail=null,r.updateTime=0,r.userName="",r.sourceJSON={},j.extend(hN(r),t),r.resourceUrl=e+"/web/"+r.resourceType.replace("_","").toLowerCase()+"s/"+r.resourceId,r.withCredentials&&(r.resourceUrl=e+"/web/mycontent/"+r.resourceType.replace("_","").toLowerCase()+"s/"+r.resourceId),r}return t=i,(r=[{key:"load",value:function(){var e=this;return e.request("GET",e.resourceUrl+".json").then(function(t){if(t.error)return t;e.sourceJSON=t})}},{key:"update",value:function(){var e=this.resourceType.replace("_","").toLowerCase();"data"===e&&(this.resourceUrl=this.resourceUrl+"/attributes.json");var t=JSON.stringify(this.sourceJSON);if("service"===e){var r={authorizeSetting:this.sourceJSON.authorizeSetting,metadata:this.sourceJSON.metadata,tags:this.sourceJSON.tags,thumbnail:this.sourceJSON.thumbnail,tokenRefreshUrl:this.sourceJSON.tokenRefreshUrl};t=JSON.stringify(r)}return this.request("PUT",this.resourceUrl,t,{headers:{"Content-Type":"application/x-www-form-urlencoded"}})}}])&&lN(t.prototype,r),n&&lN(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function yN(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var vN=function(e,t,r){return t&&yN(e.prototype,t),r&&yN(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.ids=[],this.entities=[],this.resourceType="",j.extend(this,t)});function gN(e){"@babel/helpers - typeof";return(gN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function mN(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function bN(e,t){return(bN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function wN(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=_N(e);if(t){var o=_N(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===gN(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function _N(e){return(_N=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var xN=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&bN(e,t)}(i,nN);var t,r,n,o=wN(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t)).iportalUrl=e,t=t||{},r.withCredentials=t.withCredentials||!1,r}return t=i,(r=[{key:"load",value:function(){return Al.get(this.iportalUrl+"/web")}},{key:"queryResources",value:function(e){if(!(e instanceof iN))return new Promise(function(e){e("queryParams is not instanceof iPortalQueryParam !")});var t=this,r=this.iportalUrl+"/gateway/catalog/resource/search.json";return e.t=(new Date).getTime(),this.request("GET",r,e).then(function(e){var r=[];(e.content||[]).forEach(function(e){r.push(new dN(t.iportalUrl,e))});var n=new sN;return n.content=r,n.total=e.total,n.currentPage=e.currentPage,n.pageSize=e.pageSize,n.aggregations=e.aggregations,n})}},{key:"updateResourcesShareSetting",value:function(e){if(!(e instanceof vN))return new Promise(function(e){e("shareParams is not instanceof iPortalShareParam !")});var t=e.resourceType.replace("_","").toLowerCase()+"s";"datas"===t&&(t="mycontent/"+t);var r={ids:e.ids,entities:e.entities},n=this.iportalUrl+"/web/"+t+"/sharesetting.json";return this.request("PUT",n,JSON.stringify(r)).then(function(e){return e})}}])&&mN(t.prototype,r),n&&mN(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function SN(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var ON=function(e,t,r){return t&&SN(e.prototype,t),r&&SN(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.permissionType="",this.entityType="",this.entityName="GUEST",this.entityId=null,j.extend(this,t)});function PN(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var EN=function(e,t,r){return t&&PN(e.prototype,t),r&&PN(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.rootUrl="",this.tags=[],this.entities=[],j.extend(this,t)});function kN(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var MN=function(e,t,r){return t&&kN(e.prototype,t),r&&kN(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.type="",this.tags=[],this.entities=[],this.metadata={},this.addedMapNames=[],this.addedSceneNames=[],j.extend(this,t)});function CN(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var jN=function(e,t,r){return t&&CN(e.prototype,t),r&&CN(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.fileName="",this.type="",this.tags=[],this.dataMetaInfo={},j.extend(this,t)});function TN(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var AN=function(e,t,r){return t&&TN(e.prototype,t),r&&TN(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.xField="",this.yField="",this.fileEncoding="UTF-8",this.xIndex=1,this.yIndex=1,this.fieldTypes=[],this.separator="",this.firstRowIsHead=!0,this.url="",this.dataStoreInfo={},j.extend(this,t)});function IN(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var RN=function(e,t,r){return t&&IN(e.prototype,t),r&&IN(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.type="",this.url="",this.connectionInfo={},j.extend(this,t)});function LN(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var NN=function(e,t,r){return t&&LN(e.prototype,t),r&&LN(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.dataBase="",this.server="",j.extend(this,t)});function DN(e){"@babel/helpers - typeof";return(DN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function BN(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function FN(e,t){return(FN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function GN(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=zN(e);if(t){var o=zN(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===DN(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function zN(e){return(zN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var UN=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&FN(e,t)}(i,nN);var t,r,n,o=GN(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).iportalUrl=e,t}return t=i,(r=[{key:"deleteResources",value:function(e){var t=e.resourceType.replace("_","").toLowerCase(),r=this.iportalUrl+"/web/"+t+"s.json?ids="+encodeURI(JSON.stringify(e.ids));return"data"===t?(r=this.iportalUrl+"/web/mycontent/datas/delete.json",this.request("POST",r,JSON.stringify(e.ids))):this.request("DELETE",r)}},{key:"addMap",value:function(e){if(!(e instanceof EN))return this.getErrMsgPromise("addMapParams is not instanceof IPortalAddResourceParam !");var t={rootUrl:e.rootUrl,tags:e.tags,authorizeSetting:e.entities},r=this.iportalUrl+"/web/maps/batchaddmaps.json";return this.request("POST",r,JSON.stringify(t)).then(function(e){return e})}},{key:"addScene",value:function(e){if(!(e instanceof EN))return this.getErrMsgPromise("addSceneParams is not instanceof IPortalAddResourceParam !");var t={rootUrl:e.rootUrl,tags:e.tags,authorizeSetting:e.entities},r=this.iportalUrl+"/web/scenes/batchaddscenes.json";return this.request("POST",r,JSON.stringify(t)).then(function(e){return e})}},{key:"registerService",value:function(e){if(!(e instanceof MN))return this.getErrMsgPromise("registerParams is not instanceof IPortalRegisterServiceParam !");var t={type:e.type,tags:e.tags,authorizeSetting:e.entities,metadata:e.metadata,addedMapNames:e.addedMapNames,addedSceneNames:e.addedSceneNames},r=this.iportalUrl+"/web/services.json";return this.request("POST",r,JSON.stringify(t)).then(function(e){return e})}},{key:"getErrMsgPromise",value:function(e){return new Promise(function(t){t(e)})}},{key:"uploadDataRequest",value:function(e,t){var r=this.iportalUrl+"/web/mycontent/datas/"+e+"/upload.json";return this.request("POST",r,t)}},{key:"addData",value:function(e,t){var r=this;if(!(e instanceof jN))return this.getErrMsgPromise("params is not instanceof iPortalAddDataParam !");var n,o=this.iportalUrl+"/web/mycontent/datas.json",i={fileName:e.fileName,tags:e.tags,type:e.type},a=e.type.toLowerCase();if("excel"===a||"csv"===a){if(!(e.dataMetaInfo instanceof AN))return this.getErrMsgPromise("params.dataMetaInfo is not instanceof iPortalDataMetaInfoParam !");n={xField:e.dataMetaInfo.xField,yField:e.dataMetaInfo.yField},"csv"===a&&(n.fileEncoding=e.dataMetaInfo.fileEncoding),i.coordType="WGS84",i.dataMetaInfo=n}else if("hdfs"===a||"hbase"===a){if(!(e.dataMetaInfo instanceof AN))return this.getErrMsgPromise("params.dataMetaInfo is not instanceof iPortalDataMetaInfoParam !");if(!(e.dataMetaInfo.dataStoreInfo instanceof RN))return this.getErrMsgPromise("params.dataMetaInfo.dataStoreInfo is not instanceof iPortalDataStoreInfoParam !");var s={type:e.dataMetaInfo.dataStoreInfo.type};switch(a){case"hdfs":s.url=e.dataMetaInfo.dataStoreInfo.url,n={url:e.dataMetaInfo.url,dataStoreInfo:s};break;case"hbase":if(!(e.dataMetaInfo.dataStoreInfo.connectionInfo instanceof NN))return this.getErrMsgPromise("params.dataMetaInfo.dataStoreInfo.connectionInfo is not instanceof iPortalDataConnectionInfoParam !");s.connectionInfo={dataBase:e.dataMetaInfo.dataStoreInfo.connectionInfo.dataBase,server:e.dataMetaInfo.dataStoreInfo.connectionInfo.server,engineType:"HBASE"},s.datastoreType="SPATIAL",n={dataStoreInfo:s}}i.dataMetaInfo=n}return this.request("POST",o,JSON.stringify(i)).then(function(e){return"hdfs"===a||"hbase"===a?e:e.childID?r.uploadDataRequest(e.childID,t):e.customResult})}},{key:"publishOrUnpublish",value:function(e,t){if(!e.dataId||!e.serviceType)return this.getErrMsgPromise("option.dataID and option.serviceType are Required!");var r=e.dataId,n=e.dataServiceId,o=e.serviceType,i=this.iportalUrl+"/web/mycontent/datas/"+r+"/publishstatus.json?serviceType="+o;return n&&(i+="&dataServiceId="+n),this.request("PUT",i,JSON.stringify(t)).then(function(e){return t?(n||(n=e.customResult),n):e})}},{key:"getDataPublishedStatus",value:function(e,t){var r=this.iportalUrl+"/web/mycontent/datas/"+e+"/publishstatus.json?dataServiceId="+t+"&forPublish=true";return this.request("GET",r)}},{key:"unPublishDataService",value:function(e){return this.publishOrUnpublish(e,!1)}},{key:"publishDataService",value:function(e){return this.publishOrUnpublish(e,!0)}}])&&BN(t.prototype,r),n&&BN(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function VN(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var WN=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.aggName=null,this.aggFieldName=null,this.CLASS_NAME="SuperMap.AggregationParameter",j.extend(this,t)}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){this.aggName=null,this.aggFieldName=null,this.aggType=null}}])&&VN(t.prototype,r),n&&VN(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function YN(e){"@babel/helpers - typeof";return(YN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function HN(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function XN(e,t){return(XN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function qN(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=ZN(e);if(t){var o=ZN(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===YN(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return JN(e)}(this,r)}}function JN(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ZN(e){return(ZN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var KN=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&XN(e,t)}(i,WN);var t,r,n,o=qN(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this)).subAggs=null,t.aggType=null,t.CLASS_NAME="SuperMap.BucketAggParameter",j.extend(JN(t),e),t}return t=i,(r=[{key:"destroy",value:function(){this.subAggs&&(this.subAggs=null)}}])&&HN(t.prototype,r),n&&HN(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function QN(e){"@babel/helpers - typeof";return(QN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $N(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function eD(){return(eD="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=oD(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function tD(e,t){return(tD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function rD(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=oD(e);if(t){var o=oD(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===QN(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return nD(e)}(this,r)}}function nD(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function oD(e){return(oD=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var iD=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&tD(e,t)}(i,WN);var t,r,n,o=rD(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this)).aggType=lr.AVG,j.extend(nD(t),e),t.CLASS_NAME="SuperMap.MetricsAggParameter",t}return t=i,(r=[{key:"destroy",value:function(){eD(oD(i.prototype),"destroy",this).call(this);this.aggType=null}}])&&$N(t.prototype,r),n&&$N(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function aD(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var sD=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.clipDatasetName=null,this.clipDatasourceName=null,this.clipRegion=null,this.isClipInRegion=!0,this.isExactClip=null,t&&j.extend(this,t),this.CLASS_NAME="SuperMap.ClipParameter"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){var e=this;e.clipDatasetName=null,e.clipDatasourceName=null,e.clipRegion=null,e.isClipInRegion=null,e.isExactClip=null}},{key:"toJSON",value:function(){return j.toJSON({isClipInRegion:this.isClipInRegion,clipDatasetName:this.clipDatasetName,clipDatasourceName:this.clipDatasourceName,isExactClip:this.isExactClip,clipRegion:hr.fromGeometry(this.clipRegion)})}}])&&aD(t.prototype,r),n&&aD(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function uD(e){"@babel/helpers - typeof";return(uD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function lD(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function cD(){return(cD="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=dD(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function fD(e,t){return(fD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function hD(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=dD(e);if(t){var o=dD(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===uD(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return pD(e)}(this,r)}}function pD(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function dD(e){return(dD=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var yD=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&fD(e,t)}(i,KN);var t,r,n,o=hD(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this)).precision=5,j.extend(pD(t),e),t.aggType=ur.GEOHASH_GRID,t.CLASS_NAME="SuperMap.GeoHashGridAggParameter",t}return t=i,n=[{key:"toJsonParameters",value:function(e){var t={aggName:e.aggName,aggFieldName:e.aggFieldName,aggType:e.aggType,precision:e.precision};return j.toJson(t)}}],(r=[{key:"destroy",value:function(){cD(dD(i.prototype),"destroy",this).call(this),this.aggType=null,this.precision=null}}])&&lD(t.prototype,r),n&&lD(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function vD(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var gD=function(e,t,r){return t&&vD(e.prototype,t),r&&vD(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.CLASS_NAME="LabelMatrixCell"});function mD(e){"@babel/helpers - typeof";return(mD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function bD(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function wD(e,t){return(wD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function _D(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=SD(e);if(t){var o=SD(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===mD(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return xD(e)}(this,r)}}function xD(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function SD(e){return(SD=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var OD=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&wD(e,t)}(i,gD);var t,r,n,o=_D(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).height=0,t.pathField=null,t.rotation=0,t.width=0,t.sizeFixed=!1,t.type="IMAGE",e&&j.extend(xD(t),e),t.CLASS_NAME="SuperMap.LabelImageCell",t}return t=i,(r=[{key:"destroy",value:function(){var e=this;e.height=null,e.pathField=null,e.rotation=null,e.width=null,e.sizeFixed=null}}])&&bD(t.prototype,r),n&&bD(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function PD(e){"@babel/helpers - typeof";return(PD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ED(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function kD(e,t){return(kD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function MD(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=jD(e);if(t){var o=jD(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===PD(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return CD(e)}(this,r)}}function CD(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function jD(e){return(jD=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var TD=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&kD(e,t)}(i,gD);var t,r,n,o=MD(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).style=new ft,t.symbolIDField=null,t.type="SYMBOL",e&&j.extend(CD(t),e),t.CLASS_NAME="SuperMap.LabelSymbolCell",t}return t=i,(r=[{key:"destroy",value:function(){this.style&&(this.style.destroy(),this.style=null),this.symbolIDField=null}}])&&ED(t.prototype,r),n&&ED(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function AD(e){"@babel/helpers - typeof";return(AD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ID(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function RD(e,t){return(RD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function LD(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=DD(e);if(t){var o=DD(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===AD(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ND(e)}(this,r)}}function ND(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function DD(e){return(DD=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var BD=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&RD(e,t)}(i,gD);var t,r,n,o=LD(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).themeLabel=new Vm,t.type="THEME",e&&j.extend(ND(t),e),t.CLASS_NAME=" SuperMap.LabelThemeCell",t}return t=i,(r=[{key:"destroy",value:function(){this.themeLabel&&(this.themeLabel.destroy(),this.themeLabel=null)}}])&&ID(t.prototype,r),n&&ID(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function FD(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var GD=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.layerName=null,this.isVisible=null,this.displayFilter=null,this.fieldValuesDisplayFilter=null,t&&j.extend(this,t),this.CLASS_NAME="SuperMap.LayerStatus"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){this.layerName=null,this.isVisible=null,this.displayFilter=null}},{key:"toJSON",value:function(){var e="{";e+='"type":"UGC",';var t=[];return this.layerName&&(t.push('"name":"'+this.layerName+'"'),t.push('"visible":'+this.isVisible)),this.displayFilter&&t.push('"displayFilter":"'+this.displayFilter+'"'),(this.minScale||0==this.minScale)&&t.push('"minScale":'+this.minScale),(this.maxScale||0==this.maxScale)&&t.push('"maxScale":'+this.maxScale),this.fieldValuesDisplayFilter&&t.push('"fieldValuesDisplayFilter":'+j.toJSON(this.fieldValuesDisplayFilter)),e+=t,e+="}"}}])&&FD(t.prototype,r),n&&FD(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function zD(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var UD=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.datasourceConnectionInfo=null,this.foreignKeys=null,this.foreignTable=null,this.linkFields=null,this.linkFilter=null,this.name=null,this.primaryKeys=null,t&&j.extend(this,t),this.CLASS_NAME="SuperMap.LinkItem"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){var e=this;e.datasourceConnectionInfo instanceof QP&&(e.datasourceConnectionInfo.destroy(),e.datasourceConnectionInfo=null),e.foreignKeys=null,e.foreignTable=null,e.linkFields=null,e.linkFilter=null,e.name=null,e.primaryKeys=null}}])&&zD(t.prototype,r),n&&zD(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function VD(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var WD=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.allowPointOverlap=!0,this.allowPointWithTextDisplay=!0,this.allowTextOverlap=!1,this.allowTextAndPointOverlap=!0,this.allowThemeGraduatedSymbolOverlap=!1,this.allowThemeGraphOverlap=!1,this.horizontalOverlappedSpaceSize=0,this.verticalOverlappedSpaceSize=0,j.extend(this,t),this.ugcLayer=new Ub(t),this.CLASS_NAME="SuperMap.OverlapDisplayedOptions"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){j.reset(this)}},{key:"fromJson",value:function(e){this.ugcLayer.fromJson.apply(this,[e])}},{key:"toServerJSONObject",value:function(){return this.ugcLayer.toServerJSONObject.apply(this,arguments)}},{key:"toString",value:function(){var e=this.ugcLayer.toServerJSONObject.apply(this,arguments),t="{";for(var r in e)e.hasOwnProperty(r)&&(t+="'"+r+"':"+e[r]+",");return t=t.substr(0,t.length-1),t+="}"}}])&&VD(t.prototype,r),n&&VD(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function YD(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var HD=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.resourceID=null,this.tempLayerName=null,this.layerInfo=null,j.extend(this,t),this.CLASS_NAME="SuperMap.SetLayerInfoParameters"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){this.resourceID=null,this.tempLayerName=null,this.layerInfo=null}}])&&YD(t.prototype,r),n&&YD(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function XD(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var qD=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.isTempLayers=null,this.resourceID=null,this.layersInfo=null,j.extend(this,t),this.CLASS_NAME="SuperMap.SetLayersInfoParameters"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){this.isTempLayers=null,this.resourceID=null,this.layersInfo=null}}])&&XD(t.prototype,r),n&&XD(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function JD(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var ZD=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.maxWeight=null,this.nodeID=null,this.resourceValue=null,this.type=null,t&&j.extend(this,t),this.CLASS_NAME="SuperMap.SupplyCenter"}var t,r,n;return t=e,n=[{key:"fromJson",value:function(t){if(t)return new e({maxWeight:t.maxWeight,nodeID:t.nodeID,resourceValue:t.resourceValue,type:t.type})}}],(r=[{key:"destroy",value:function(){this.maxWeight=null,this.nodeID=null,this.resourceValue=null,this.type=null}}])&&JD(t.prototype,r),n&&JD(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function KD(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var QD=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.flowEnabled=!1,this.leaderLineDisplayed=!1,this.leaderLineStyle=new ft,t&&j.extend(this,t),this.CLASS_NAME="SuperMap.ThemeFlow"}var t,r,n;return t=e,n=[{key:"fromObj",value:function(t){if(t){var r=new e;return j.copy(r,t),r.leaderLineStyle=ft.fromJson(t.leaderLineStyle),r}}}],(r=[{key:"destroy",value:function(){var e=this;e.flowEnabled=null,e.leaderLineDisplayed=null,e.leaderLineStyle&&(e.leaderLineStyle.destroy(),e.leaderLineStyle=null)}}])&&KD(t.prototype,r),n&&KD(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function $D(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var eB=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.caption=null,this.color=new lt,this.end=0,this.start=0,this.visible=!0,t&&j.extend(this,t),this.CLASS_NAME="SuperMap.ThemeGridRangeItem"}var t,r,n;return t=e,n=[{key:"fromObj",value:function(t){if(t){var r=new e;return j.copy(r,t),r.color=lt.fromJson(t.color),r}}}],(r=[{key:"destroy",value:function(){var e=this;e.caption=null,e.end=null,e.start=null,e.color&&(e.color.destroy(),e.color=null),e.visible=null}},{key:"toServerJSONObject",value:function(){var e={};return(e=j.copyAttributes(e,this)).color&&e.color.toServerJSONObject&&(e.color=e.color.toServerJSONObject()),e}}])&&$D(t.prototype,r),n&&$D(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function tB(e){"@babel/helpers - typeof";return(tB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function rB(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function nB(){return(nB="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=sB(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function oB(e,t){return(oB=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function iB(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=sB(e);if(t){var o=sB(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===tB(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return aB(e)}(this,r)}}function aB(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function sB(e){return(sB=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var uB=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&oB(e,t)}(i,bm);var t,r,n,o=iB(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,"GRIDRANGE",e)).items=null,t.rangeMode=Bt.EQUALINTERVAL,t.rangeParameter=0,t.colorGradientType=Ft.YELLOW_RED,t.reverseColor=!1,e&&j.extend(aB(t),e),t.CLASS_NAME="SuperMap.ThemeGridRange",t}return t=i,n=[{key:"fromObj",value:function(e){if(e){var t=new i;j.copy(t,e);var r=e.items,n=r?r.length:0;t.items=[];for(var o=0;o<n;o++)t.items.push(eB.fromObj(r[o]));return t}}}],(r=[{key:"destroy",value:function(){nB(sB(i.prototype),"destroy",this).call(this);var e=this;if(e.items){if(e.items.length>0)for(var t in e.items)e.items[t].destroy(),e.items[t]=null;e.items=null}e.reverseColor=null,e.rangeMode=null,e.rangeParameter=null,e.colorGradientType=null}}])&&rB(t.prototype,r),n&&rB(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function lB(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var cB=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.caption=null,this.color=new lt,this.unique=null,this.visible=!0,t&&j.extend(this,t),this.CLASS_NAME="SuperMap.ThemeGridUniqueItem"}var t,r,n;return t=e,n=[{key:"fromObj",value:function(t){var r=new e;return j.copy(r,t),r.color=lt.fromJson(t.color),r}}],(r=[{key:"destroy",value:function(){var e=this;e.caption=null,e.unique=null,e.color&&(e.color.destroy(),e.color=null),e.visible=null}},{key:"toServerJSONObject",value:function(){var e={};return(e=j.copyAttributes(e,this)).color&&e.color.toServerJSONObject&&(e.color=e.color.toServerJSONObject()),e}}])&&lB(t.prototype,r),n&&lB(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function fB(e){"@babel/helpers - typeof";return(fB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function hB(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function pB(){return(pB="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=gB(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function dB(e,t){return(dB=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function yB(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=gB(e);if(t){var o=gB(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===fB(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return vB(e)}(this,r)}}function vB(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function gB(e){return(gB=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var mB=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&dB(e,t)}(i,bm);var t,r,n,o=yB(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,"GRIDUNIQUE",e)).defaultcolor=new lt,t.items=null,e&&j.extend(vB(t),e),t.CLASS_NAME="SuperMap.ThemeGridUnique",t}return t=i,n=[{key:"fromObj",value:function(e){var t=new i,r=e.items,n=r?r.length:0;j.extend(t,e),t.items=[],t.defaultcolor=lt.fromJson(e.defaultcolor);for(var o=0;o<n;o++)t.items.push(cB.fromObj(r[o]));return t}}],(r=[{key:"destroy",value:function(){pB(gB(i.prototype),"destroy",this).call(this);var e=this;if(e.items){if(e.items.length>0)for(var t in e.items)e.items[t].destroy(),e.items[t]=null;e.items=null}e.defaultcolor&&(e.defaultcolor.destroy(),e.defaultcolor=null)}},{key:"toServerJSONObject",value:function(){var e={};if((e=j.copyAttributes(e,this)).defaultcolor&&e.defaultcolor.toServerJSONObject&&(e.defaultcolor=e.defaultcolor.toServerJSONObject()),e.items){for(var t=[],r=e.items.length,n=0;n<r;n++)t.push(e.items[n].toServerJSONObject());e.items=t}return e}}])&&hB(t.prototype,r),n&&hB(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function bB(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var wB=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.caption=null,this.unique=null,this.offsetX=0,this.offsetY=0,this.visible=!0,this.style=new _m,t&&j.extend(this,t),this.CLASS_NAME="SuperMap.ThemeLabelUniqueItem"}var t,r,n;return t=e,n=[{key:"fromObj",value:function(t){if(t){var r=new e;return j.copy(r,t),r}}}],(r=[{key:"destroy",value:function(){var e=this;e.unique=null,e.caption=null,e.offsetX=null,e.offsetY=null,e.style&&(e.style.destroy(),e.style=null),e.visible=null}}])&&bB(t.prototype,r),n&&bB(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function _B(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var xB=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.srcData=t,this.targetData=r,this.CLASS_NAME="SuperMap.ThemeMemoryData"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){this.srcData=null,this.targetData=null}},{key:"toJSON",value:function(){if(this.srcData&&this.targetData){for(var e="",t=Math.min(this.srcData.length,this.targetData.length),r=0;r<t;r++)e+="'"+this.srcData[r]+"':'"+this.targetData[r]+"',";return r>0&&(e=e.substring(0,e.length-1)),"{"+e+"}"}return null}}])&&_B(t.prototype,r),n&&_B(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function SB(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var OB=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.lineID=null,this.lineName=null,this.lineAliasName=null,this.startStopIndex=null,this.startStopName=null,this.startStopAliasName=null,this.endStopIndex=null,this.endStopName=null,this.endStopAliasName=null,j.extend(this,t),this.CLASS_NAME="SuperMap.TransferLine"}var t,r,n;return t=e,n=[{key:"fromJson",value:function(t){if(t)return new e({lineID:t.lineID,lineName:t.lineName,lineAliasName:t.lineAliasName,startStopIndex:t.startStopIndex,startStopName:t.startStopName,startStopAliasName:t.startStopAliasName,endStopIndex:t.endStopIndex,endStopName:t.endStopName,endStopAliasName:t.endStopAliasName})}}],(r=[{key:"destroy",value:function(){j.reset(this)}}])&&SB(t.prototype,r),n&&SB(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function PB(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var EB=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.type=null,j.extend(this,t),this.CLASS_NAME="SuperMap.RasterFunctionParameter"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){this.type=null}}])&&PB(t.prototype,r),n&&PB(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function kB(e){"@babel/helpers - typeof";return(kB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function MB(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function CB(){return(CB="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=IB(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function jB(e,t){return(jB=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function TB(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=IB(e);if(t){var o=IB(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===kB(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return AB(e)}(this,r)}}function AB(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function IB(e){return(IB=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var RB=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&jB(e,t)}(i,EB);var t,r,n,o=TB(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).redIndex=0,t.nirIndex=1,t.colorMap="0:ffffe5ff;0.1:f7fcb9ff;0.2:d9f0a3ff;0.3:addd8eff;0.4:78c679ff;0.5:41ab5dff;0.6:238443ff;0.7:006837ff;1:004529ff",t.type=cr.NDVI,j.extend(AB(t),e),t.CLASS_NAME="SuperMap.NDVIParameter",t}return t=i,(r=[{key:"destroy",value:function(){CB(IB(i.prototype),"destroy",this).call(this),this.redIndex=null,this.nirIndex=null,this.colorMap=null}},{key:"toJSON",value:function(){return{redIndex:this.redIndex,nirIndex:this.nirIndex,colorMap:this.colorMap,type:this.type}}}])&&MB(t.prototype,r),n&&MB(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function LB(e){"@babel/helpers - typeof";return(LB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function NB(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function DB(){return(DB="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=zB(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function BB(e,t){return(BB=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function FB(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=zB(e);if(t){var o=zB(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===LB(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return GB(e)}(this,r)}}function GB(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function zB(e){return(zB=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var UB=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&BB(e,t)}(i,EB);var t,r,n,o=FB(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).altitude=45,t.azimuth=315,t.zFactor=1,t.type=cr.HILLSHADE,j.extend(GB(t),e),t.CLASS_NAME="SuperMap.HillshadeParameter",t}return t=i,(r=[{key:"destroy",value:function(){DB(zB(i.prototype),"destroy",this).call(this),this.altitude=null,this.azimuth=null,this.zFactor=null}},{key:"toJSON",value:function(){return{altitude:this.altitude,azimuth:this.azimuth,zFactor:this.zFactor,type:this.type}}}])&&NB(t.prototype,r),n&&NB(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function VB(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var WB=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.name=null,this.picAsUrl=null,this.picAsBase64=null,this.CLASS_NAME="SuperMap.WebPrintingJobCustomItems",j.extend(this,t)}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){this.name=null,this.picAsUrl=null,this.picAsBase64=null}},{key:"toJSON",value:function(){var e={name:this.name};return this.title&&(e.title=this.title),this.picAsUrl?e.picAsUrl=this.picAsUrl:this.picAsBase64&&(e.picAsBase64=this.picAsBase64.replace(/^data:.+;base64,/,"")),j.toJSON(e)}}])&&VB(t.prototype,r),n&&VB(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function YB(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var HB=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.picAsUrl=null,this.picAsBase64=null,this.CLASS_NAME="SuperMap.WebPrintingJobImage",j.extend(this,t)}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){this.picAsUrl=null,this.picAsBase64=null}},{key:"toJSON",value:function(){var e={};return this.picAsUrl&&(e.picAsUrl=this.picAsUrl),this.picAsBase64&&(e.picAsBase64=this.picAsBase64.replace(/^data:.+;base64,/,"")),j.toJSON(e)}}])&&YB(t.prototype,r),n&&YB(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function XB(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var qB=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.name=null,this.layerType=null,this.url=null,this.CLASS_NAME="SuperMap.WebPrintingJobLayers",j.extend(this,t)}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){this.name=null,this.layerType=null,this.url=null}}])&&XB(t.prototype,r),n&&XB(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function JB(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var ZB=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.title=null,this.picAsUrl=null,this.picAsBase64=null,this.layers=null,this.customItems=null,this.CLASS_NAME="SuperMap.WebPrintingJobLegendOptions",j.extend(this,t)}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){this.title=null,this.picAsUrl=null,this.picAsBase64=null,this.layers instanceof qB&&(this.layers.destroy(),this.layers=null),this.customItems instanceof WB&&(this.customItems.destroy(),this.customItems=null)}},{key:"toJSON",value:function(){var e={title:this.title||""};return this.picAsUrl?e.picAsUrl=this.picAsUrl:this.picAsBase64?e.picAsBase64=this.picAsBase64.replace(/^data:.+;base64,/,""):this.customItems&&(e.customItems=this.customItems),j.toJSON(e)}}])&&JB(t.prototype,r),n&&JB(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function KB(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var QB=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.center=null,this.scale=null,this.layerNames=null,this.image=null,this.layers=null,this.CLASS_NAME="SuperMap.WebPrintingJobLittleMapOptions",j.extend(this,t)}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){this.center=null,this.scale=null,this.layerNames=null,this.image instanceof HB&&(this.image.destroy(),this.image=null),this.layers instanceof qB&&(this.layers.destroy(),this.layers=null)}},{key:"toJSON",value:function(){var e={scale:this.scale,center:this.center};return this.layerNames?e.layerNames=this.layerNames:this.layers&&(e.layers=this.layers),this.image&&(e.image=this.image),j.toJSON(e)}}])&&KB(t.prototype,r),n&&KB(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function $B(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var eF=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.picAsUrl=null,this.picAsBase64=null,this.CLASS_NAME="SuperMap.WebPrintingJobNorthArrowOptions",j.extend(this,t)}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){this.picAsUrl=null,this.picAsBase64=null}},{key:"toJSON",value:function(){var e={};return this.picAsUrl?e.picAsUrl=this.picAsUrl:this.picAsBase64&&(e.picAsBase64=this.picAsBase64.replace(/^data:.+;base64,/,"")),j.toJSON(e)}}])&&$B(t.prototype,r),n&&$B(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function tF(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var rF=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.scaleText=null,this.orientation=null,this.type=null,this.intervals=null,this.unit=null,this.CLASS_NAME="SuperMap.WebPrintingJobScaleBarOptions",j.extend(this,t)}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){this.scaleText=null,this.orientation=null,this.type=null,this.intervals=null,this.unit=null}},{key:"toJSON",value:function(){var e={scaleText:this.scaleText||"",type:this.type||"BAR",intervals:this.intervals||"",unit:this.unit||"METER"};return this.orientation&&(e.orientation=this.orientation),j.toJSON(e)}}])&&tF(t.prototype,r),n&&tF(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function nF(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var oF=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.type=null,this.url=null,this.token=null,this.value=null,this.CLASS_NAME="SuperMap.WebPrintingJobContent",j.extend(this,t)}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){this.type="WEBMAP",this.url=null,this.token=null,this.value=null}},{key:"toJSON",value:function(){var e={type:this.type};return this.token&&(e.token=this.token),this.url?e.url=this.url:this.value&&(e.value=this.value),j.toJSON(e)}}])&&nF(t.prototype,r),n&&nF(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function iF(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var aF=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.templateName=null,this.title=null,this.subTitle=null,this.author=null,this.copyright=null,this.scaleBarOptions=null,this.northArrowOptions=null,this.littleMapOptions=null,this.legendOptions=null,this.CLASS_NAME="SuperMap.WebPrintingJobLayoutOptions",j.extend(this,t)}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){this.templateName=null,this.title=null,this.subTitle=null,this.author=null,this.copyright=null,this.scaleBarOptions instanceof rF&&(this.scaleBarOptions.destroy(),this.scaleBarOptions=null),this.northArrowOptions instanceof eF&&(this.northArrowOptions.destroy(),this.northArrowOptions=null),this.littleMapOptions instanceof QB&&(this.littleMapOptions.destroy(),this.littleMapOptions=null),this.legendOptions instanceof ZB&&(this.legendOptions.destroy(),this.legendOptions=null)}},{key:"toJSON",value:function(){var e={templateName:this.templateName,title:this.title,subTitle:this.subTitle,author:this.author,copyright:this.copyright};return this.scaleBarOptions&&(e.scaleBarOptions=this.scaleBarOptions),this.northArrowOptions&&(e.northArrowOptions=this.northArrowOptions),this.littleMapOptions&&(e.littleMapOptions=this.littleMapOptions),this.legendOptions&&(e.legendOptions=this.legendOptions),j.toJSON(e)}}])&&iF(t.prototype,r),n&&iF(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function sF(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var uF=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.format=null,this.dpi=96,this.scale=null,this.rotation=null,this.center=null,this.CLASS_NAME="SuperMap.WebPrintingJobExportOptions",j.extend(this,t)}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){this.format=null,this.dpi=null,this.scale=null,this.rotation=null,this.center=null,this.outputSize=null}},{key:"toJSON",value:function(){var e={format:this.format||"PDF",dpi:this.dpi,scale:this.scale,center:this.center};return this.rotation&&(e.rotation=this.rotation),this.outputSize&&(e.outputSize=this.outputSize),j.toJSON(e)}}])&&sF(t.prototype,r),n&&sF(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function lF(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var cF=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.content=null,this.layoutOptions=null,this.exportOptions=null,j.extend(this,t),this.CLASS_NAME="SuperMap.WebPrintingJobParameters")}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){this.content instanceof oF&&(this.content.destroy(),this.content=null),this.layoutOptions instanceof aF&&(this.layoutOptions.destroy(),this.layoutOptions=null),this.exportOptions instanceof uF&&(this.exportOptions.destroy(),this.exportOptions=null)}}])&&lF(t.prototype,r),n&&lF(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function fF(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var hF=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.include=void 0,this.exclude=void 0,this.CLASS_NAME="SuperMap.FieldsFilter",j.extend(this,t)}var t,r,n;return t=e,n=[{key:"constructFromObject",value:function(t,r){return t&&(r=r||new e,t.hasOwnProperty("include")&&(r.include=t.include),t.hasOwnProperty("exclude")&&(r.exclude=t.exclude)),r}}],(r=[{key:"destroy",value:function(){this.include=void 0,this.exclude=void 0}}])&&fF(t.prototype,r),n&&fF(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function pF(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var dF=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.field=void 0,this.direction=e.Direction.ASC,this.CLASS_NAME="SuperMap.Sortby",j.extend(this,t)}var t,r,n;return t=e,n=[{key:"constructFromObject",value:function(t,r){return t&&(r=r||new e,t.hasOwnProperty("field")&&(r.field=t.field),t.hasOwnProperty("direction")&&(r.direction=t.direction)),r}}],(r=[{key:"destroy",value:function(){this.field=void 0,this.direction="ASC"}}])&&pF(t.prototype,r),n&&pF(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function yF(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}dF.Direction={ASC:"ASC",DESC:"DESC"};var vF=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.bbox=void 0,this.collections=void 0,this.ids=void 0,this.limit=void 0,this.fields=void 0,this.query=void 0,this.sortby=void 0,this.CLASS_NAME="SuperMap.ImageSearchParameter",j.extend(this,t)}var t,r,n;return t=e,n=[{key:"constructFromObject",value:function(t,r){return t&&(r=r||new e,t.hasOwnProperty("bbox")&&(r.bbox=t.bbox),t.hasOwnProperty("collections")&&(r.collections=t.collections),t.hasOwnProperty("ids")&&(r.ids=t.ids),t.hasOwnProperty("limit")&&(r.limit=t.limit),t.hasOwnProperty("fields")&&(r.fields=hF.constructFromObject&&hF.constructFromObject(t.fields,{})||t.fields),t.hasOwnProperty("query")&&(r.query=t.query),t.hasOwnProperty("sortby")&&(r.sortby=t.sortby,t.sortby&&(r.sortby=t.sortby.map(function(e){return dF.constructFromObject&&dF.constructFromObject(e,{})||e})))),r}}],(r=[{key:"destroy",value:function(){var e=this;e.bbox=void 0,e.collections=void 0,e.ids=void 0,e.limit=void 0,e.fields=void 0,e.query=void 0,e.sortby=void 0}}])&&yF(t.prototype,r),n&&yF(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function gF(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var mF=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.stretchType=void 0,this.stdevCoefficient=void 0,this.gaussianCoefficient=void 0,this.useMedianValue=void 0,this.minPercent=void 0,this.maxPercent=void 0,this.CLASS_NAME="SuperMap.ImageStretchOption",j.extend(this,t)}var t,r,n;return t=e,n=[{key:"constructFromObject",value:function(t,r){return t&&(r=r||new e,t.hasOwnProperty("stretchType")&&(r.stretchType=t.stretchType),t.hasOwnProperty("stdevCoefficient")&&(r.stdevCoefficient=t.stdevCoefficient),t.hasOwnProperty("gaussianCoefficient")&&(r.gaussianCoefficient=t.gaussianCoefficient),t.hasOwnProperty("useMedianValue")&&(r.useMedianValue=t.useMedianValue),t.hasOwnProperty("minPercent")&&(r.minPercent=t.minPercent),t.hasOwnProperty("maxPercent")&&(r.maxPercent=t.maxPercent)),r}}],(r=[{key:"destroy",value:function(){var e=this;e.stretchType=void 0,e.stdevCoefficient=void 0,e.gaussianCoefficient=void 0,e.useMedianValue=void 0,e.minPercent=void 0,e.maxPercent=void 0}}])&&gF(t.prototype,r),n&&gF(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function bF(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}mF.StretchType={NONE:"NONE",GAUSSIAN:"GAUSSIAN",PERCENTCLIP:"PERCENTCLIP",MINIMUMMAXIMUM:"MINIMUMMAXIMUM",STANDARDDEVIATION:"STANDARDDEVIATION"};var wF=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.displayMode=void 0,this.displayBands=void 0,this.stretchOption=void 0,this.interpolationMode=void 0,this.colorScheme=void 0,this.colorTable=void 0,this.brightness=void 0,this.contrast=void 0,this.noData=void 0,this.noDataColor=void 0,this.noDataTransparent=void 0,this.backgroundValue=void 0,this.backgroundColor=void 0,this.backgroundTransparent=void 0,this.gridFunctions=void 0,this.CLASS_NAME="SuperMap.ImageRenderingRule",j.extend(this,t)}var t,r,n;return t=e,n=[{key:"constructFromObject",value:function(t,r){return t&&(r=r||new e,t.hasOwnProperty("displayMode")&&(r.displayMode=t.displayMode),t.hasOwnProperty("displayBands")&&(r.displayBands=t.displayBands),t.hasOwnProperty("stretchOption")&&(r.stretchOption=mF.constructFromObject&&mF.constructFromObject(t.stretchOption,{})||t.stretchOption),t.hasOwnProperty("interpolationMode")&&(r.interpolationMode=t.interpolationMode),t.hasOwnProperty("colorScheme")&&(r.colorScheme=t.colorScheme),t.hasOwnProperty("colorTable")&&(r.colorTable=t.colorTable),t.hasOwnProperty("brightness")&&(r.brightness=t.brightness),t.hasOwnProperty("contrast")&&(r.contrast=t.contrast),t.hasOwnProperty("noData")&&(r.noData=t.noData),t.hasOwnProperty("noDataColor")&&(r.noDataColor=t.noDataColor),t.hasOwnProperty("backgroundValue")&&(r.backgroundValue=t.backgroundValue),t.hasOwnProperty("noDataTransparent")&&(r.noDataTransparent=t.noDataTransparent),t.hasOwnProperty("backgroundColor")&&(r.backgroundColor=t.backgroundColor),t.hasOwnProperty("backgroundTransparent")&&(r.backgroundTransparent=t.backgroundTransparent),t.hasOwnProperty("gridFunctions")&&(r.gridFunctions=t.gridFunctions)),r}}],(r=[{key:"destroy",value:function(){var e=this;e.displayMode=void 0,e.displayBands=void 0,e.stretchOption=void 0,e.interpolationMode=void 0,e.colorScheme=void 0,e.colorTable=void 0,e.brightness=void 0,e.contrast=void 0,e.noData=void 0,e.noDataColor=void 0,e.noDataTransparent=void 0,e.backgroundValue=void 0,e.backgroundColor=void 0,e.backgroundTransparent=void 0,e.gridFuncOptions=void 0}}])&&bF(t.prototype,r),n&&bF(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function _F(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}wF.DisplayMode={COMPOSITE:"COMPOSITE",STRETCHED:"Stretched"},wF.InterpolationMode={NEARESTNEIGHBOR:"NEARESTNEIGHBOR",HIGHQUALITYBILINEAR:"HIGHQUALITYBILINEAR",DEFAULT:"DEFAULT"};var xF=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.girdFuncName="GFHillShade",this.Azimuth=315,this.Altitude=45,this.ZFactor=1,this.CLASS_NAME="SuperMap.ImageGFHillShade",j.extend(this,t)}var t,r,n;return t=e,n=[{key:"constructFromObject",value:function(t,r){return t&&(r=r||new e,t.hasOwnProperty("girdFuncName")&&(r.girdFuncName=t.girdFuncName),t.hasOwnProperty("Azimuth")&&(r.Azimuth=t.Azimuth),t.hasOwnProperty("Altitude")&&(r.Altitude=t.Altitude),t.hasOwnProperty("ZFactor")&&(r.ZFactor=t.ZFactor)),r}}],(r=[{key:"destroy",value:function(){this.girdFuncName="GFHillShade",this.Azimuth=315,this.Altitude=45,this.ZFactor=1}}])&&_F(t.prototype,r),n&&_F(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function SF(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var OF=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.girdFuncName="GFAspect",this.Azimuth=void 0,this.CLASS_NAME="SuperMap.ImageGFAspect",j.extend(this,t)}var t,r,n;return t=e,n=[{key:"constructFromObject",value:function(t,r){return t&&(r=r||new e,t.hasOwnProperty("girdFuncName")&&(r.girdFuncName=t.girdFuncName),t.hasOwnProperty("Azimuth")&&(r.Azimuth=t.Azimuth)),r}}],(r=[{key:"destroy",value:function(){this.girdFuncName="GFAspect",this.Azimuth=void 0}}])&&SF(t.prototype,r),n&&SF(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function PF(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var EF=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.girdFuncName="GFOrtho",this.CLASS_NAME="SuperMap.ImageGFOrtho",j.extend(this,t)}var t,r,n;return t=e,n=[{key:"constructFromObject",value:function(t,r){return t&&(r=r||new e,t.hasOwnProperty("girdFuncName")&&(r.girdFuncName=t.girdFuncName)),r}}],(r=[{key:"destroy",value:function(){this.girdFuncName="GFOrtho"}}])&&PF(t.prototype,r),n&&PF(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function kF(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var MF=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.girdFuncName="GFSlope",this.Altitude=45,this.ZFactor=1,this.CLASS_NAME="SuperMap.ImageGFSlope",j.extend(this,t)}var t,r,n;return t=e,n=[{key:"constructFromObject",value:function(t,r){return t&&(r=r||new e,t.hasOwnProperty("girdFuncName")&&(r.girdFuncName=t.girdFuncName),t.hasOwnProperty("Altitude")&&(r.Altitude=t.Altitude),t.hasOwnProperty("ZFactor")&&(r.ZFactor=t.ZFactor)),r}}],(r=[{key:"destroy",value:function(){this.girdFuncName="GFSlope",this.Altitude=45,this.ZFactor=1}}])&&kF(t.prototype,r),n&&kF(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function CF(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var jF=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},j.extend(this,t),this.CLASS_NAME="SuperMap.OnlineServiceBase"}var t,r,n;return t=e,(r=[{key:"request",value:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return t=If.appendCredential(t),n.crossOrigin=this.options.crossOrigin,n.headers=this.options.headers,Al.commit(e,t,r,n).then(function(e){return e.json()})}}])&&CF(t.prototype,r),n&&CF(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function TF(e){"@babel/helpers - typeof";return(TF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function AF(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function IF(e,t){return(IF=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function RF(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=NF(e);if(t){var o=NF(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===TF(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return LF(e)}(this,r)}}function LF(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function NF(e){return(NF=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var DF=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&IF(e,t)}(i,jF);var t,r,n,o=RF(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),r=o.call(this,e),t=t||{},r.MD5=null,r.type=null,r.userName=null,r.fileName=null,r.size=null,r.serviceStatus=null,r.serviceId=null,r.id=null,r.lastModfiedTime=null,r.status=null,r.storageId=null,r.publishInfo=null,r.authorizeSetting=null,r.nickname=null,r.tags=[],r.description=null,r.dataItemServices=null,r.coordType=null,r.dataCheckResult=null,r.dataMetaInfo=null,r.thumbnail=null,j.extend(LF(r),t),r.id&&(r.serviceUrl=e+"/"+r.id),r.CLASS_NAME="SuperMap.OnlineData",r}return t=i,(r=[{key:"load",value:function(){if(this.serviceUrl){var e=this;return e.request("GET",this.serviceUrl).then(function(t){j.extend(e,t)})}}},{key:"getPublishedServices",value:function(){return this.dataItemServices}},{key:"getAuthorizeSetting",value:function(){return this.authorizeSetting}}])&&AF(t.prototype,r),n&&AF(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function BF(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var FF=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.rootUrl="https://www.supermapol.com",this.webUrl=this.rootUrl+"/web";var t=this.webUrl+"/mycontent";this.mDatasUrl=t+"/datas",this.CLASS_NAME="SuperMap.Online"}var t,r,n;return t=e,(r=[{key:"load",value:function(){return Al.get(this.rootUrl).then(function(e){return e})}},{key:"login",value:function(){If.loginOnline(this.rootUrl,!0)}},{key:"queryDatas",value:function(e){var t=this,r=t.mDatasUrl;return e&&(e=e.toJSON()),Al.get(r,e).then(function(e){if(e&&e.content&&!(e.content.length<1)){for(var r=[],n=e.content,o=n.length,i=0;i<o;i++){var a=n[i],s=new DF(t.mDatasUrl,a);r.push(s)}return r}})}}])&&BF(t.prototype,r),n&&BF(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function GF(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var zF=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.userNames=null,this.types=null,this.fileName=null,this.serviceStatuses=null,this.serviceId=null,this.ids=null,this.keywords=null,this.orderBy=null,this.tags=null,this.filterFields=null,j.extend(this,t),this.CLASS_NAME="SuperMap.OnlineQueryDatasParameter"}var t,r,n;return t=e,(r=[{key:"toJSON",value:function(){var e=this,t={types:e.types,fileName:e.fileName,serviceStatuses:e.serviceStatuses,serviceId:e.serviceId,ids:e.ids,keywords:e.keywords,orderBy:e.orderBy,tags:e.tags,filterFields:e.filterFields};for(var r in t)null==t[r]&&delete t[r];return t}}])&&GF(t.prototype,r),n&&GF(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function UF(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var VF=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.name=null,this.serviceIds=null,this.clientType=tr.SERVER,this.limitation=null,j.extend(this,t),this.CLASS_NAME="SuperMap.KeyServiceParameter"}var t,r,n;return t=e,(r=[{key:"toJSON",value:function(){return{name:this.name,serviceIds:this.serviceIds,clientType:this.clientType,limitation:this.limitation}}}])&&UF(t.prototype,r),n&&UF(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function WF(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var YF=function(e,t,r){return t&&WF(e.prototype,t),r&&WF(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.type=t,this.server=null,this.tokenServiceUrl=null,this.keyServiceUrl=null,j.extend(this,r),this.CLASS_NAME="SuperMap.ServerInfo",this.type=this.type||kt.ISERVER,this.server||console.error("server url require is not  undefined");var n="/services/security/tokens";this.type===kt.ISERVER&&this.server.indexOf("iserver")<0&&(n="/iserver"+n),this.tokenServiceUrl||(this.tokenServiceUrl=j.urlPathAppend(this.server,n)),this.keyServiceUrl||(this.type===kt.IPORTAL?this.keyServiceUrl=j.urlPathAppend(this.server,"/web/mycontent/keys/register"):this.type===kt.ONLINE&&(this.keyServiceUrl=j.urlPathAppend(this.server,"/web/mycontent/keys")))});function HF(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var XF=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.userName=null,this.password=null,this.clientType=tr.NONE,this.ip=null,this.referer=null,this.expiration=60,j.extend(this,t),this.CLASS_NAME="SuperMap.TokenServiceParameter"}var t,r,n;return t=e,(r=[{key:"toJSON",value:function(){return{userName:this.userName,password:this.password,clientType:this.clientType,ip:this.ip,referer:this.referer,expiration:this.expiration}}}])&&HF(t.prototype,r),n&&HF(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),qF=function(){try{return elasticsearch}catch(e){return{}}}(),JF=r.n(qF);function ZF(e){return function(e){if(Array.isArray(e))return KF(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return KF(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return KF(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function KF(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function QF(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var $F=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r=r||{},this.url=t;try{this.client=new(JF().Client)({host:this.url})}catch(e){this.client=new(JF().Client)({node:{url:new URL(this.url)}})}this.change=null,this.openGeoFence=!1,this.outOfGeoFence=null,this.geoFence=null,this.EVENT_TYPES=["change","error","outOfGeoFence"],this.events=new Dn(this,null,this.EVENT_TYPES),this.eventListeners=null,j.extend(this,r),this.eventListeners instanceof Object&&this.events.on(this.eventListeners)}var t,r,n;return t=e,(r=[{key:"setGeoFence",value:function(e){this.geoFence=e}},{key:"bulk",value:function(e,t){return this.client.bulk(e,this._handleCallback(t))}},{key:"clearScroll",value:function(e,t){return this.client.clearScroll(e,this._handleCallback(t))}},{key:"count",value:function(e,t){return this.client.count(e,this._handleCallback(t))}},{key:"create",value:function(e,t){return this.client.create(e,this._handleCallback(t))}},{key:"delete",value:function(e,t){return this.client.delete(e,this._handleCallback(t))}},{key:"deleteByQuery",value:function(e,t){return this.client.deleteByQuery(e,this._handleCallback(t))}},{key:"deleteScript",value:function(e,t){return this.client.deleteScript(e,this._handleCallback(t))}},{key:"deleteTemplate",value:function(e,t){return this.client.deleteTemplate(e,this._handleCallback(t))}},{key:"exists",value:function(e,t){return this.client.exists(e,this._handleCallback(t))}},{key:"existsSource",value:function(e,t){return this.client.existsSource(e,this._handleCallback(t))}},{key:"explain",value:function(e,t){return this.client.explain(e,this._handleCallback(t))}},{key:"fieldCaps",value:function(e,t){return this.client.fieldCaps(e,this._handleCallback(t))}},{key:"get",value:function(e,t){return this.client.get(e,this._handleCallback(t))}},{key:"getScript",value:function(e,t){return this.client.getScript(e,this._handleCallback(t))}},{key:"getSource",value:function(e,t){return this.client.getSource(e,this._handleCallback(t))}},{key:"getTemplate",value:function(e,t){return this.client.getTemplate(e,this._handleCallback(t))}},{key:"index",value:function(e,t){return this.client.index(e,this._handleCallback(t))}},{key:"info",value:function(e,t){return this.client.info(e,this._handleCallback(t))}},{key:"mget",value:function(e,t){return this.client.mget(e,this._handleCallback(t))}},{key:"msearch",value:function(e,t){var r=this;return r.client.msearch(e).then(function(e){return e=e.body||e,r._update(e.responses,t),e},function(e){return t(e),r.events.triggerEvent("error",{error:e}),e})}},{key:"msearchTemplate",value:function(e,t){return this.client.msearchTemplate(e,this._handleCallback(t))}},{key:"mtermvectors",value:function(e,t){return this.client.mtermvectors(e,this._handleCallback(t))}},{key:"ping",value:function(e,t){return this.client.ping(e,this._handleCallback(t))}},{key:"putScript",value:function(e,t){return this.client.putScript(e,this._handleCallback(t))}},{key:"putTemplate",value:function(e,t){return this.client.putTemplate(e,this._handleCallback(t))}},{key:"reindex",value:function(e,t){return this.client.reindex(e,this._handleCallback(t))}},{key:"reindexRessrottle",value:function(e,t){return this.client.reindexRessrottle(e,this._handleCallback(t))}},{key:"renderSearchTemplate",value:function(e,t){return this.client.renderSearchTemplate(e,this._handleCallback(t))}},{key:"scroll",value:function(e,t){return this.client.scroll(e,this._handleCallback(t))}},{key:"search",value:function(e,t){var r=this;return r.client.search(e).then(function(e){return e=e.body||e,r._update(e,t),e},function(e){return t&&t(e),r.events.triggerEvent("error",{error:e}),e})}},{key:"searchShards",value:function(e,t){return this.client.searchShards(e,this._handleCallback(t))}},{key:"searchTemplate",value:function(e,t){return this.client.searchTemplate(e,this._handleCallback(t))}},{key:"suggest",value:function(e,t){return this.client.suggest(e,this._handleCallback(t))}},{key:"termvectors",value:function(e,t){return this.client.termvectors(e,this._handleCallback(t))}},{key:"update",value:function(e,t){return this.client.update(e,this._handleCallback(t))}},{key:"updateByQuery",value:function(e,t){return this.client.updateByQuery(e,this._handleCallback(t))}},{key:"_handleCallback",value:function(e){return function(){var t=Array.from(arguments),r=t.shift(),n=t.shift(),o=n&&n.body;if(o){var i=n;t=[i.statusCode,i.headers],n=o}e.call.apply(e,[this,r,n].concat(ZF(t)))}}},{key:"_update",value:function(e,t){var r=this;e&&(r.data=e,r.openGeoFence&&r.geoFence&&r._validateDatas(e),r.events.triggerEvent("change",{data:r.data}),r.change?r.change&&r.change(e):t&&t(void 0,{responses:e}))}},{key:"_validateDatas",value:function(e){if(e){e instanceof Array||(e=[e]);var t,r=e.length;for(t=0;t<r;t++)this._validateData(e[t])}}},{key:"_validateData",value:function(e){var t=this;e.hits.hits.map(function(r){var n=r._source,o=t._getMeterPerMapUnit(t.geoFence.unit),i=t.geoFence.center[0]*o,a=t.geoFence.center[1]*o,s=n.x*o,u=n.y*o;return t._distance(s,u,i,a)>t.geoFence.radius&&(t.outOfGeoFence&&t.outOfGeoFence(e),t.events.triggerEvent("outOfGeoFence",{data:e})),r})}},{key:"_distance",value:function(e,t,r,n){return Math.sqrt((e-r)*(e-r)+(t-n)*(t-n))}},{key:"_getMeterPerMapUnit",value:function(e){var t;return"meter"===e?t=1:"degree"===e&&(t=2*Math.PI*6378137/360),t}}])&&QF(t.prototype,r),n&&QF(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function eG(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var tG=new Hr,rG=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,n;return t=e,n=[{key:"createCanvas",value:function(e,t){var r=document.createElement("canvas");return r.height=e,r.width=t,r.getContext("2d")}},{key:"getLinearGradient",value:function(e,t,r,n,o){this._ctx||(this._ctx=this.getContext());for(var i=this._ctx.createLinearGradient(e,t,r,n),a=o.length,s=1/(a-1),u=0,l=0;l<a;l++)i.addColorStop(u,o[l]),u+=s;return i.__nonRecursion=!0,i}},{key:"getContext",value:function(){return this._ctx||(this._ctx=document.createElement("canvas").getContext("2d")),this._ctx}},{key:"getStepColors",value:function(e,t,r){e=tG.toRGBA(e),t=tG.toRGBA(t),e=tG.getData(e);for(var n=[],o=((t=tG.getData(t))[0]-e[0])/r,i=(t[1]-e[1])/r,a=(t[2]-e[2])/r,s=(t[3]-e[3])/r,u=0,l=e[0],c=e[1],f=e[2],h=e[3];u<r;u++)n[u]=tG.toColor([tG.adjust(Math.floor(l),[0,255]),tG.adjust(Math.floor(c),[0,255]),tG.adjust(Math.floor(f),[0,255]),h.toFixed(4)-0],"hex"),l+=o,c+=i,f+=a,h+=s;return l=t[0],c=t[1],f=t[2],h=t[3],n[u]=tG.toColor([l,c,f,h],"hex"),n}},{key:"getGradientColors",value:function(e,t,r){var n,o,i,a=[],s=e.length;if(void 0!==t){if(s>=t)if("RANGE"===r)for(o=0;o<t;o++)a.push(e[o]);else for(o=0;o<t;o++){var u=Math.floor(o/2);if(o%2==0)a.push(e[u]);else{var l=e.length-1-u;a.push(e[l])}}else{for(n=Math.ceil(t/(s-1)),o=0,i=s-1;o<i;o++){var c=this.getStepColors(e[o],e[o+1],n);o<i-1&&c.pop(),a=a.concat(c)}for(var f=a.length-t,h=0;h<f;h++)a.splice(2,1)}return a}}}],(r=null)&&eG(t.prototype,r),n&&eG(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function nG(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var oG=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,n;return t=e,n=[{key:"newInstance",value:function(){return this.geostatsInstance||(this.geostatsInstance=new window.geostats),this.geostatsInstance}},{key:"getInstance",value:function(e){var t=this.newInstance();return t.setSerie(e),t}},{key:"getArrayStatistic",value:function(e,t){return e.length?"Sum"===t||"æ±å"===t?this.getSum(e):"Maximum"===t||"æå¤§å¼"===t?this.getMax(e):"Minimum"===t||"æå°å¼"===t?this.getMin(e):"Average"===t||"å¹³åå¼"===t?this.getMean(e):"Median"===t||"ä¸­ä½æ°"===t?this.getMedian(e):"times"===t||"è®¡æ°"===t?this.getTimes(e):void 0:0}},{key:"getArraySegments",value:function(e,t,r){return"offset"===t?this.getEqInterval(e,r):"jenks"===t?this.getJenks(e,r):"square"===t?this.getMin(e)>=0&&this.getSqrtInterval(e,r):"logarithm"===t?this.getMin(e)>0&&this.getGeometricProgression(e,r):void 0}},{key:"getSum",value:function(e){return this.getInstance(e).sum()}},{key:"getMax",value:function(e){return this.getInstance(e).max()}},{key:"getMin",value:function(e){return this.getInstance(e).min()}},{key:"getMean",value:function(e){return this.getInstance(e).mean()}},{key:"getMedian",value:function(e){return this.getInstance(e).median()}},{key:"getTimes",value:function(e){return e.length}},{key:"getEqInterval",value:function(e,t){return this.getInstance(e).getClassEqInterval(t)}},{key:"getJenks",value:function(e,t){return this.getInstance(e).getClassJenks(t)}},{key:"getSqrtInterval",value:function(e,t){return e=e.map(function(e){return Math.sqrt(e)}),this.getInstance(e).getClassEqInterval(t).map(function(e){return e*e})}},{key:"getGeometricProgression",value:function(e,t){return this.getInstance(e).getClassGeometricProgression(t)}}],(r=null)&&nG(t.prototype,r),n&&nG(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();var iG=r(77820),aG=r.n(iG);function sG(e){"@babel/helpers - typeof";return(sG="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function uG(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function lG(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function cG(e,t,r){return t&&lG(e.prototype,t),r&&lG(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}var fG=function(){function e(t){uG(this,e),this.env=null,this.parser=null,this.ruleSet=null,this.cartoStr="",this.shaders=null,"string"==typeof t&&(this.cartoStr=t,this.env={frames:[],errors:[],error:function(e){this.errors.push(e)}},this.parser=this.getParser(this.env),this.parse(t),this.shaders=this.toShaders())}return cG(e,[{key:"getParser",value:function(t){var r,n,o,i,a,s,u,l,c,f=this;function h(){i=u[o],a=n,l=n}function p(){u[o]=i,l=n=a}function d(){n>l&&(u[o]=u[o].slice(n-l),l=n)}function y(e){var t,i,a,s;if(e instanceof Function)return e.call(c.parsers);if("string"==typeof e)t=r.charAt(n)===e?e:null,i=1,d();else{if(d(),!(t=e.exec(u[o])))return null;i=t[0].length}if(t){var f=n+=i;for(s=n+u[o].length-i;n<s&&(32===(a=r.charCodeAt(n))||10===a||9===a);)n++;return u[o]=u[o].slice(i+(n-f)),l=n,0===u[o].length&&o<u.length-1&&o++,"string"==typeof t?t:1===t.length?t[0]:t}}function v(e){var n,o={index:s,filename:t.filename,message:"Parse error.",line:0,column:-1};for(var i in o)0===e[i]&&(e[i]=o[i]);n=e.filename&&f.env.inputs&&f.env.inputs[e.filename]?f.env.inputs[e.filename]:r,e.line=(n.slice(0,e.index).match(/\n/g)||"").length+1;for(var a=e.index;a>=0&&"\n"!==n.charAt(a);a--)e.column++;return new Error([e.filename,e.line,e.column,e.message].join(";"))}return this.env=t=t||{},this.env.filename=this.env.filename||null,this.env.inputs=this.env.inputs||{},c={parse:function(i){var a,c=null;if(n=o=l=s=0,u=[],r=i.replace(/\r\n/g,"\n"),t.filename&&(f.env.inputs[t.filename]=r),u=function(e){for(var t,n,o,i,a=0,s=/(?:@\{[\w-]+\}|[^"'`\{\}\/\(\)\\])+/g,u=/\/\*(?:[^*]|\*+[^\/*])*\*+\/|\/\/.*/g,l=/"((?:[^"\\\r\n]|\\.)*)"|'((?:[^'\\\r\n]|\\.)*)'|`((?:[^`]|\\.)*)`/g,f=0,h=e[0],p=0;p<r.length;)if(s.lastIndex=p,(t=s.exec(r))&&t.index===p&&(p+=t[0].length,h.push(t[0])),o=r.charAt(p),u.lastIndex=l.lastIndex=p,(t=l.exec(r))&&t.index===p)p+=t[0].length,h.push(t[0]);else if(n||"/"!==o||"/"!==(i=r.charAt(p+1))&&"*"!==i||!(t=u.exec(r))||t.index!==p){switch(o){case"{":if(!n){f++,h.push(o);break}case"}":if(!n){f--,h.push(o),e[++a]=h=[];break}case"(":if(!n){n=!0,h.push(o);break}case")":if(n){n=!1,h.push(o);break}default:h.push(o)}p++}else p+=t[0].length,h.push(t[0]);return 0!==f&&(c={index:p-1,type:"Parse",message:f>0?"missing closing `}`":"missing opening `{`"}),e.map(function(e){return e.join("")})}([[]]),c)throw v(c);var h=function(e,t){var r=e.specificity,n=t.specificity;return r[0]!=n[0]?n[0]-r[0]:r[1]!=n[1]?n[1]-r[1]:r[2]!=n[2]?n[2]-r[2]:n[3]-r[3]};return(a=new e.Tree.Ruleset([],y(this.parsers.primary))).root=!0,a.toList=function(e){e.error=function(t){e.errors||(e.errors=new Error("")),e.errors.message?e.errors.message+="\n"+v(t).message:e.errors.message=v(t).message},e.frames=e.frames||[];var t=this.flatten([],[],e);return t.sort(h),t},a},parsers:{primary:function(){for(var e,t=[];(e=y(this.rule)||y(this.ruleset)||y(this.comment))||y(/^[\s\n]+/)||(e=y(this.invalid));)e&&t.push(e);return t},invalid:function(){var t=y(/^[^;\n]*[;\n]/);if(t)return new e.Tree.Invalid(t,a)},comment:function(){var t;if("/"===r.charAt(n))return"/"===r.charAt(n+1)?new e.Tree.Comment(y(/^\/\/.*/),!0):(t=y(/^\/\*(?:[^*]|\*+[^\/*])*\*+\/\n?/))?new e.Tree.Comment(t):void 0},entities:{quoted:function(){if('"'===r.charAt(n)||"'"===r.charAt(n)){var t=y(/^"((?:[^"\\\r\n]|\\.)*)"|'((?:[^'\\\r\n]|\\.)*)'/);return t?new e.Tree.Quoted(t[1]||t[2]):void 0}},field:function(){if(y("[")){var t=y(/(^[^\]]+)/);if(y("]"))return t?new e.Tree.Field(t[1]):void 0}},comparison:function(){var e=y(/^=~|=|!=|<=|>=|<|>/);if(e)return e},keyword:function(){var t=y(/^[A-Za-z\u4e00-\u9fa5-]+[A-Za-z-0-9\u4e00-\u9fa5_]*/);if(t)return new e.Tree.Keyword(t)},call:function(){var t,r;if(t=/^([\w\-]+|%)\(/.exec(u[o])){if("url"===(t=t[1]))return null;n+=t.length;if(y("("),r=y(this.entities.arguments),y(")"))return t?new e.Tree.Call(t,r,n):void 0}},arguments:function(){for(var e,t=[];e=y(this.expression);){t.push(e);if(!y(","))break}return t},literal:function(){return y(this.entities.dimension)||y(this.entities.keywordcolor)||y(this.entities.hexcolor)||y(this.entities.quoted)},url:function(){var t;if("u"===r.charAt(n)&&y(/^url\(/)){t=y(this.entities.quoted)||y(this.entities.variable)||y(/^[\-\w%@_match\/.&=:;#+?~]+/)||"";return y(")")?new e.Tree.URL(void 0!==t.value||t instanceof e.Tree.Variable?t:new e.Tree.Quoted(t)):new e.Tree.Invalid(t,a,"Missing closing ) in URL.")}},variable:function(){var o,i=n;if("@"===r.charAt(n)&&(o=y(/^@[\w-]+/)))return new e.Tree.Variable(o,i,t.filename)},hexcolor:function(){var t;if("#"===r.charAt(n)&&(t=y(/^#([a-fA-F0-9]{6}|[a-fA-F0-9]{3})/)))return new e.Tree.Color(t[1])},keywordcolor:function(){var t=u[o].match(/^[a-z]+/);if(t&&t[0]in e.Tree.Reference.data.colors)return new e.Tree.Color(e.Tree.Reference.data.colors[y(/^[a-z]+/)])},dimension:function(){var t=r.charCodeAt(n);if(!(t>57||t<45||47===t)){var o=y(/^(-?\d*\.?\d+(?:[eE][-+]?\d+)?)(\%|\w+)?/);return o?new e.Tree.Dimension(o[1],o[2],a):void 0}}},variable:function(){var e;if("@"===r.charAt(n)&&(e=y(/^(@[\w-]+)\s*:/)))return e[1]},entity:function(){var e=y(this.entities.call)||y(this.entities.literal),t=y(this.entities.field)||y(this.entities.variable),r=y(this.entities.url)||y(this.entities.keyword);return e||t||r},end:function(){var e;return y(";")||("string"==typeof(e="}")?r.charAt(n)===e:!!e.test(u[o]))},element:function(){var t=y(/^(?:[.#][\w\u4e00-\u9fa5\-]+|\*|Map)/);if(t)return new e.Tree.Element(t)},attachment:function(){var e=y(/^::([\w\-]+(?:\/[\w\-]+)*)/);if(e)return e[1]},selector:function(){for(var t,o,i,s,u,l=[],c=new e.Tree.Filterset,f=[],h=0,p=0;(i=y(this.element))||(u=y(this.zoom))||(s=y(this.filter))||(t=y(this.attachment));){if(h++,i)l.push(i);else if(u)f.push(u),p++;else if(s){var d=c.add(s);if(d)throw v({message:d,index:n-1});p++}else{if(o)throw v({message:"Encountered second attachment name.",index:n-1});o=t}var g=r.charAt(n);if("{"===g||"}"===g||";"===g||","===g)break}if(h)return new e.Tree.Selector(c,f,l,o,p,a)},filter:function(){h();var r,n,o;if(y("[")&&(r=y(/^[a-zA-Z0-9\-_]+/)||y(this.entities.quoted)||y(this.entities.variable)||y(this.entities.keyword)||y(this.entities.field))&&(r instanceof e.Tree.Quoted&&(r=new e.Tree.Field(r.toString())),(n=y(this.entities.comparison))&&(o=y(this.entities.quoted)||y(this.entities.variable)||y(this.entities.dimension)||y(this.entities.keyword)||y(this.entities.field)))){if(!y("]"))throw v({message:"Missing closing ] of filter.",index:a-1});return r.is||(r=new e.Tree.Field(r)),new e.Tree.Filter(r,n,o,a,t.filename)}},zoom:function(){h();var t,r;if(y(/^\[\s*zoom/g)&&(t=y(this.entities.comparison))&&(r=y(this.entities.variable)||y(this.entities.dimension))&&y("]"))return new e.Tree.Zoom(t,r,a);p()},block:function(){var e;if(y("{")&&(e=y(this.primary))&&y("}"))return e},ruleset:function(){var t,r,n=[];for(h();t=y(this.selector);){for(n.push(t);y(this.comment););if(!y(","))break;for(;y(this.comment););}if(t)for(;y(this.comment););if(n.length>0&&(r=y(this.block))){if(1===n.length&&n[0].elements.length&&"Map"===n[0].elements[0].value){var o=new e.Tree.Ruleset(n,r);return o.isMap=!0,o}return new e.Tree.Ruleset(n,r)}p()},rule:function(){var o,i,u=r.charAt(n);if(h(),"."!==u&&"#"!==u&&(o=y(this.variable)||y(this.property))){if((i=y(this.value))&&y(this.end))return new e.Tree.Rule(o,i,a,t.filename);s=n,p()}},font:function(){for(var t,r=[],n=[];t=y(this.entity);)n.push(t);if(r.push(new e.Tree.Expression(n)),y(","))for(;(t=y(this.expression))&&(r.push(t),y(",")););return new e.Tree.Value(r)},value:function(){for(var t,r=[];(t=y(this.expression))&&(r.push(t),y(",")););return r.length>1?new e.Tree.Value(r.map(function(e){return e.value[0]})):1===r.length?new e.Tree.Value(r):void 0},sub:function(){var e;if(y("(")&&(e=y(this.expression))&&y(")"))return e},multiplication:function(){var t,r,n,o;if(t=y(this.operand)){for(;(n=y("/")||y("*")||y("%"))&&(r=y(this.operand));)o=new e.Tree.Operation(n,[o||t,r],a);return o||t}},addition:function(){var t,o,i,s;if(t=y(this.multiplication)){for(;(i=y(/^[-+]\s+/)||" "!=r.charAt(n-1)&&(y("+")||y("-")))&&(o=y(this.multiplication));)s=new e.Tree.Operation(i,[s||t,o],a);return s||t}},operand:function(){return y(this.sub)||y(this.entity)},expression:function(){for(var t,r=[];t=y(this.addition)||y(this.entity);)r.push(t);if(r.length>0)return new e.Tree.Expression(r)},property:function(){var e=y(/^(([a-z][-a-z_0-9]*\/)?\*?-?[-a-z_0-9]+)\s*:/);if(e)return e[1]}}}}},{key:"parse",value:function(e){var t=this.parser;return this.ruleSet=t.parse(e)}},{key:"toShaders",value:function(){if(this.ruleSet){var e=this.ruleSet;if(e){var t=e.toList(this.env);t.reverse();var r={},n=[];this._toShaders(r,n,t);for(var o=[],i={},a=0,s=t.length;a<s;++a){var u=t[a],l=u.attachment,c=r[n[a]],f=[];if(!i[l]){var h=0;for(var p in c)if("zoom"!==p&&"frames"!==p&&"attachment"!==p&&"elements"!=p)if("layer-index"===p){var d=(c[p].join("\n"),null);Object.defineProperty(f,"layerIndex",{configurable:!0,enumerable:!1,value:d})}else f[h++]=function(e,t){if(!Array.isArray(e))return e;var r=e.join("\n"),n='attributes["FEATUREID"]&&attributes["FEATUREID"]',o=r.indexOf(n);if(o>=0){if(!t.featureFilter){var i=o+n.length,a=r.indexOf(")",i+1),s="featureId&&(featureId"+r.substring(i,a)+")";Object.defineProperty(t,"featureFilter",{configurable:!0,enumerable:!1,value:function(e){return!!s}})}return{property:p,getValue:Function("attributes","zoom","seftFilter","var _value = null; var isExcute=typeof seftFilter=='function'?sefgFilter():seftFilter;if(isExcute){"+r+";} return _value; ")}}return{property:p,getValue:Function("attributes","zoom","var _value = null;"+r+"; return _value; ")}}(c[p],f);Object.defineProperty(f,"attachment",{configurable:!0,enumerable:!1,value:l}),Object.defineProperty(f,"elements",{configurable:!0,enumerable:!1,value:u.elements}),o.push(f),i[n[a]]=!0}Object.defineProperty(f,"zoom",{configurable:!0,enumerable:!1,value:u.zoom})}return o}}return null}},{key:"_toShaders",value:function(t,r,n){for(var o=0,i=n.length;o<i;++o){for(var a=n[o],s=[],u=0,l=a.elements.length;u<l;u++)s.push(a.elements[u]);var c=a.filters.filters,f=[];for(var h in c)f.push(c[h].id);var p=s.join("/")+"::"+a.attachment+"_"+f.join("_");r.push(p);var d=t[p]=t[p]||{};d.zoom=e.Tree.Zoom.all;var y=a.toJS(this.env);for(var v in y)(d[v]=d[v]||[]).push(y[v].join("\n"))}}},{key:"getShaders",value:function(){return this.shaders}},{key:"destroy",value:function(){this.cartoStr=null,this.env=null,this.ruleSet=null,this.parser=null,this.shaders=null}}]),e}(),hG={version:"2.1.1",style:{"filter-mode":{type:["all","first"],doc:"Control the processing behavior of Rule filters within a Style. If 'all' is used then all Rules are processed sequentially independent of whether any previous filters matched. If 'first' is used then it means processing ends after the first match (a positive filter evaluation) and no further Rules in the Style are processed ('first' is usually the default for CSS implementations on top of Mapnik to simplify translation from CSS to Mapnik XML)","default-value":"all","default-meaning":"All Rules in a Style are processed whether they have filters or not and whether or not the filter conditions evaluate to true."},"image-filters":{css:"image-filters","default-value":"none","default-meaning":"no filters",type:"functions",functions:[["agg-stack-blur",2],["emboss",0],["blur",0],["gray",0],["sobel",0],["edge-detect",0],["x-gradient",0],["y-gradient",0],["invert",0],["sharpen",0]],doc:"A list of image filters."},"comp-op":{css:"comp-op","default-value":"src-over","default-meaning":"add the current layer on top of other layers",doc:"Composite operation. This defines how this layer should behave relative to layers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]},opacity:{css:"opacity",type:"float",doc:"An alpha value for the style (which means an alpha applied to all features in separate buffer and then composited back to main buffer)","default-value":1,"default-meaning":"no separate buffer will be used and no alpha will be applied to the style after rendering"}},layer:{name:{"default-value":"",type:"string",required:!0,"default-meaning":"No layer name has been provided",doc:"The name of a layer. Can be anything you wish and is not strictly validated, but ideally unique  in the map"},srs:{"default-value":"",type:"string","default-meaning":"No srs value is provided and the value will be inherited from the Map's srs",doc:"The spatial reference system definition for the layer, aka the projection. Can either be a proj4 literal string like '+proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs' or, if the proper proj4 epsg/nad/etc identifier files are installed, a string that uses an id like: '+init=epsg:4326'"},status:{"default-value":!0,type:"boolean","default-meaning":"This layer will be marked as active and available for processing",doc:"A property that can be set to false to disable this layer from being processed"},minzoom:{"default-value":"0",type:"float","default-meaning":"The layer will be visible at the minimum possible scale",doc:"The minimum scale denominator that this layer will be visible at. A layer's visibility is determined by whether its status is true and if the Map scale >= minzoom - 1e-6 and scale < maxzoom + 1e-6"},maxzoom:{"default-value":"1.79769e+308",type:"float","default-meaning":"The layer will be visible at the maximum possible scale",doc:"The maximum scale denominator that this layer will be visible at. The default is the numeric limit of the C++ double type, which may vary slightly by system, but is likely a massive number like 1.79769e+308 and ensures that this layer will always be visible unless the value is reduced. A layer's visibility is determined by whether its status is true and if the Map scale >= minzoom - 1e-6 and scale < maxzoom + 1e-6"},queryable:{"default-value":!1,type:"boolean","default-meaning":"The layer will not be available for the direct querying of data values",doc:"This property was added for GetFeatureInfo/WMS compatibility and is rarely used. It is off by default meaning that in a WMS context the layer will not be able to be queried unless the property is explicitly set to true"},"clear-label-cache":{"default-value":!1,type:"boolean","default-meaning":"The renderer's collision detector cache (used for avoiding duplicate labels and overlapping markers) will not be cleared immediately before processing this layer",doc:"This property, by default off, can be enabled to allow a user to clear the collision detector cache before a given layer is processed. This may be desirable to ensure that a given layers data shows up on the map even if it normally would not because of collisions with previously rendered labels or markers"},"group-by":{"default-value":"",type:"string","default-meaning":"No special layer grouping will be used during rendering",doc:"https://github.com/mapnik/mapnik/wiki/Grouped-rendering"},"buffer-size":{"default-value":"0",type:"float","default-meaning":"No buffer will be used",doc:"Extra tolerance around the Layer extent (in pixels) used to when querying and (potentially) clipping the layer data during rendering"},"maximum-extent":{"default-value":"none",type:"bbox","default-meaning":"No clipping extent will be used",doc:"An extent to be used to limit the bounds used to query this specific layer data during rendering. Should be minx, miny, maxx, maxy in the coordinates of the Layer."}},symbolizers:{"*":{"image-filters":{css:"image-filters","default-value":"none","default-meaning":"no filters",type:"functions",functions:[["agg-stack-blur",2],["emboss",0],["blur",0],["gray",0],["sobel",0],["edge-detect",0],["x-gradient",0],["y-gradient",0],["invert",0],["sharpen",0]],doc:"A list of image filters."},"comp-op":{css:"comp-op","default-value":"src-over","default-meaning":"add the current layer on top of other layers",doc:"Composite operation. This defines how this layer should behave relative to layers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]},opacity:{css:"opacity",type:"float",doc:"An alpha value for the style (which means an alpha applied to all features in separate buffer and then composited back to main buffer)","default-value":1,"default-meaning":"no separate buffer will be used and no alpha will be applied to the style after rendering"}},map:{"background-color":{css:"background-color","default-value":"none","default-meaning":"transparent",type:"color",doc:"Map Background color"},"background-image":{css:"background-image",type:"uri","default-value":"","default-meaning":"transparent",doc:"An image that is repeated below all features on a map as a background.",description:"Map Background image"},srs:{css:"srs",type:"string","default-value":"+proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs","default-meaning":"The proj4 literal of EPSG:4326 is assumed to be the Map's spatial reference and all data from layers within this map will be plotted using this coordinate system. If any layers do not declare an srs value then they will be assumed to be in the same srs as the Map and not transformations will be needed to plot them in the Map's coordinate space",doc:"Map spatial reference (proj4 string)"},"buffer-size":{css:"buffer-size","default-value":"0",type:"float","default-meaning":"No buffer will be used",doc:'Extra tolerance around the map (in pixels) used to ensure labels crossing tile boundaries are equally rendered in each tile (e.g. cut in each tile). Not intended to be used in combination with "avoid-edges".'},"maximum-extent":{css:"","default-value":"none",type:"bbox","default-meaning":"No clipping extent will be used",doc:"An extent to be used to limit the bounds used to query all layers during rendering. Should be minx, miny, maxx, maxy in the coordinates of the Map."},base:{css:"base","default-value":"","default-meaning":"This base path defaults to an empty string meaning that any relative paths to files referenced in styles or layers will be interpreted relative to the application process.",type:"string",doc:"Any relative paths used to reference files will be understood as relative to this directory path if the map is loaded from an in memory object rather than from the filesystem. If the map is loaded from the filesystem and this option is not provided it will be set to the directory of the stylesheet."},"paths-from-xml":{css:"","default-value":!0,"default-meaning":"Paths read from XML will be interpreted from the location of the XML",type:"boolean",doc:"value to control whether paths in the XML will be interpreted from the location of the XML or from the working directory of the program that calls load_map()"},"minimum-version":{css:"","default-value":"none","default-meaning":"Mapnik version will not be detected and no error will be thrown about compatibility",type:"string",doc:"The minumum Mapnik version (e.g. 0.7.2) needed to use certain functionality in the stylesheet"},"font-directory":{css:"font-directory",type:"uri","default-value":"none","default-meaning":"No map-specific fonts will be registered",doc:"Path to a directory which holds fonts which should be registered when the Map is loaded (in addition to any fonts that may be automatically registered)."}},polygon:{fill:{css:"polygon-fill",type:"color","default-value":"rgba(128,128,128,1)","default-meaning":"gray and fully opaque (alpha = 1), same as rgb(128,128,128)",doc:"Fill color to assign to a polygon"},"fill-opacity":{css:"polygon-opacity",type:"float",doc:"The opacity of the polygon","default-value":1,"default-meaning":"opaque"},gamma:{css:"polygon-gamma",type:"float","default-value":1,"default-meaning":"fully antialiased",range:"0-1",doc:"Level of antialiasing of polygon edges"},"gamma-method":{css:"polygon-gamma-method",type:["power","linear","none","threshold","multiply"],"default-value":"power","default-meaning":"pow(x,gamma) is used to calculate pixel gamma, which produces slightly smoother line and polygon antialiasing than the 'linear' method, while other methods are usually only used to disable AA",doc:"An Antigrain Geometry specific rendering hint to control the quality of antialiasing. Under the hood in Mapnik this method is used in combination with the 'gamma' value (which defaults to 1). The methods are in the AGG source at https://github.com/mapnik/mapnik/blob/master/deps/agg/include/agg_gamma_functions.h"},clip:{css:"polygon-clip",type:"boolean","default-value":!0,"default-meaning":"geometry will be clipped to map bounds before rendering",doc:"geometries are clipped to map bounds by default for best rendering performance. In some cases users may wish to disable this to avoid rendering artifacts."},smooth:{css:"polygon-smooth",type:"float","default-value":0,"default-meaning":"no smoothing",range:"0-1",doc:"Smooths out geometry angles. 0 is no smoothing, 1 is fully smoothed. Values greater than 1 will produce wild, looping geometries."},"geometry-transform":{css:"polygon-geometry-transform",type:"functions","default-value":"none","default-meaning":"geometry will not be transformed",doc:"Allows transformation functions to be applied to the geometry.",functions:[["matrix",6],["translate",2],["scale",2],["rotate",3],["skewX",1],["skewY",1]]},"comp-op":{css:"polygon-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},line:{stroke:{css:"line-color","default-value":"rgba(0,0,0,1)",type:"color","default-meaning":"black and fully opaque (alpha = 1), same as rgb(0,0,0)",doc:"The color of a drawn line"},"stroke-width":{css:"line-width","default-value":1,type:"float",doc:"The width of a line in pixels"},"stroke-opacity":{css:"line-opacity","default-value":1,type:"float","default-meaning":"opaque",doc:"The opacity of a line"},"stroke-linejoin":{css:"line-join","default-value":"miter",type:["miter","round","bevel"],doc:"The behavior of lines when joining"},"stroke-linecap":{css:"line-cap","default-value":"butt",type:["butt","round","square"],doc:"The display of line endings"},"stroke-gamma":{css:"line-gamma",type:"float","default-value":1,"default-meaning":"fully antialiased",range:"0-1",doc:"Level of antialiasing of stroke line"},"stroke-gamma-method":{css:"line-gamma-method",type:["power","linear","none","threshold","multiply"],"default-value":"power","default-meaning":"pow(x,gamma) is used to calculate pixel gamma, which produces slightly smoother line and polygon antialiasing than the 'linear' method, while other methods are usually only used to disable AA",doc:"An Antigrain Geometry specific rendering hint to control the quality of antialiasing. Under the hood in Mapnik this method is used in combination with the 'gamma' value (which defaults to 1). The methods are in the AGG source at https://github.com/mapnik/mapnik/blob/master/deps/agg/include/agg_gamma_functions.h"},"stroke-dasharray":{css:"line-dasharray",type:"numbers",doc:"A pair of length values [a,b], where (a) is the dash length and (b) is the gap length respectively. More than two values are supported for more complex patterns.","default-value":"none","default-meaning":"solid line"},"stroke-dashoffset":{css:"line-dash-offset",type:"numbers",doc:"valid parameter but not currently used in renderers (only exists for experimental svg support in Mapnik which is not yet enabled)","default-value":"none","default-meaning":"solid line"},"stroke-miterlimit":{css:"line-miterlimit",type:"float",doc:"The limit on the ratio of the miter length to the stroke-width. Used to automatically convert miter joins to bevel joins for sharp angles to avoid the miter extending beyond the thickness of the stroking path. Normally will not need to be set, but a larger value can sometimes help avoid jaggy artifacts.","default-value":4,"default-meaning":"Will auto-convert miters to bevel line joins when theta is less than 29 degrees as per the SVG spec: 'miterLength / stroke-width = 1 / sin ( theta / 2 )'"},clip:{css:"line-clip",type:"boolean","default-value":!0,"default-meaning":"geometry will be clipped to map bounds before rendering",doc:"geometries are clipped to map bounds by default for best rendering performance. In some cases users may wish to disable this to avoid rendering artifacts."},smooth:{css:"line-smooth",type:"float","default-value":0,"default-meaning":"no smoothing",range:"0-1",doc:"Smooths out geometry angles. 0 is no smoothing, 1 is fully smoothed. Values greater than 1 will produce wild, looping geometries."},offset:{css:"line-offset",type:"float","default-value":0,"default-meaning":"no offset",doc:"Offsets a line a number of pixels parallel to its actual path. Postive values move the line left, negative values move it right (relative to the directionality of the line)."},rasterizer:{css:"line-rasterizer",type:["full","fast"],"default-value":"full",doc:"Exposes an alternate AGG rendering method that sacrifices some accuracy for speed."},"geometry-transform":{css:"line-geometry-transform",type:"functions","default-value":"none","default-meaning":"geometry will not be transformed",doc:"Allows transformation functions to be applied to the geometry.",functions:[["matrix",6],["translate",2],["scale",2],["rotate",3],["skewX",1],["skewY",1]]},"comp-op":{css:"line-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},markers:{file:{css:"marker-file",doc:"An SVG file that this marker shows at each placement. If no file is given, the marker will show an ellipse.","default-value":"","default-meaning":"An ellipse or circle, if width equals height",type:"uri"},opacity:{css:"marker-opacity",doc:"The overall opacity of the marker, if set, overrides both the opacity of both the fill and stroke","default-value":1,"default-meaning":"The stroke-opacity and fill-opacity will be used",type:"float"},"fill-opacity":{css:"marker-fill-opacity",doc:"The fill opacity of the marker","default-value":1,"default-meaning":"opaque",type:"float"},stroke:{css:"marker-line-color",doc:"The color of the stroke around a marker shape.","default-value":"black",type:"color"},"stroke-width":{css:"marker-line-width",doc:"The width of the stroke around a marker shape, in pixels. This is positioned on the boundary, so high values can cover the area itself.",type:"float"},"stroke-opacity":{css:"marker-line-opacity","default-value":1,"default-meaning":"opaque",doc:"The opacity of a line",type:"float"},placement:{css:"marker-placement",type:["point","line","interior"],"default-value":"point","default-meaning":"Place markers at the center point (centroid) of the geometry",doc:"Attempt to place markers on a point, in the center of a polygon, or if markers-placement:line, then multiple times along a line. 'interior' placement can be used to ensure that points placed on polygons are forced to be inside the polygon interior"},"multi-policy":{css:"marker-multi-policy",type:["each","whole","largest"],"default-value":"each","default-meaning":"If a feature contains multiple geometries and the placement type is either point or interior then a marker will be rendered for each",doc:"A special setting to allow the user to control rendering behavior for 'multi-geometries' (when a feature contains multiple geometries). This setting does not apply to markers placed along lines. The 'each' policy is default and means all geometries will get a marker. The 'whole' policy means that the aggregate centroid between all geometries will be used. The 'largest' policy means that only the largest (by bounding box areas) feature will get a rendered marker (this is how text labeling behaves by default)."},"marker-type":{css:"marker-type",type:["arrow","ellipse"],"default-value":"ellipse",doc:"The default marker-type. If a SVG file is not given as the marker-file parameter, the renderer provides either an arrow or an ellipse (a circle if height is equal to width)"},width:{css:"marker-width","default-value":10,doc:"The width of the marker, if using one of the default types.",type:"expression"},height:{css:"marker-height","default-value":10,doc:"The height of the marker, if using one of the default types.",type:"expression"},fill:{css:"marker-fill","default-value":"blue",doc:"The color of the area of the marker.",type:"color"},"allow-overlap":{css:"marker-allow-overlap",type:"boolean","default-value":!1,doc:"Control whether overlapping markers are shown or hidden.","default-meaning":"Do not allow makers to overlap with each other - overlapping markers will not be shown."},"ignore-placement":{css:"marker-ignore-placement",type:"boolean","default-value":!1,"default-meaning":"do not store the bbox of this geometry in the collision detector cache",doc:"value to control whether the placement of the feature will prevent the placement of other features"},spacing:{css:"marker-spacing",doc:"Space between repeated labels","default-value":100,type:"float"},"max-error":{css:"marker-max-error",type:"float","default-value":.2,doc:"The maximum difference between actual marker placement and the marker-spacing parameter. Setting a high value can allow the renderer to try to resolve placement conflicts with other symbolizers."},transform:{css:"marker-transform",type:"functions",functions:[["matrix",6],["translate",2],["scale",2],["rotate",3],["skewX",1],["skewY",1]],"default-value":"","default-meaning":"No transformation",doc:"SVG transformation definition"},clip:{css:"marker-clip",type:"boolean","default-value":!0,"default-meaning":"geometry will be clipped to map bounds before rendering",doc:"geometries are clipped to map bounds by default for best rendering performance. In some cases users may wish to disable this to avoid rendering artifacts."},smooth:{css:"marker-smooth",type:"float","default-value":0,"default-meaning":"no smoothing",range:"0-1",doc:"Smooths out geometry angles. 0 is no smoothing, 1 is fully smoothed. Values greater than 1 will produce wild, looping geometries."},"geometry-transform":{css:"marker-geometry-transform",type:"functions","default-value":"none","default-meaning":"geometry will not be transformed",doc:"Allows transformation functions to be applied to the geometry.",functions:[["matrix",6],["translate",2],["scale",2],["rotate",3],["skewX",1],["skewY",1]]},"comp-op":{css:"marker-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},shield:{name:{css:"shield-name",type:"expression",serialization:"content",doc:'Value to use for a shield"s text label. Data columns are specified using brackets like [column_name]'},file:{css:"shield-file",required:!0,type:"uri","default-value":"none",doc:"Image file to render behind the shield text"},"face-name":{css:"shield-face-name",type:"string",validate:"font",doc:"Font name and style to use for the shield text","default-value":"",required:!0},"unlock-image":{css:"shield-unlock-image",type:"boolean",doc:"This parameter should be set to true if you are trying to position text beside rather than on top of the shield image","default-value":!1,"default-meaning":"text alignment relative to the shield image uses the center of the image as the anchor for text positioning."},size:{css:"shield-size",type:"float",doc:"The size of the shield text in pixels"},fill:{css:"shield-fill",type:"color",doc:"The color of the shield text"},placement:{css:"shield-placement",type:["point","line","vertex","interior"],"default-value":"point",doc:"How this shield should be placed. Point placement attempts to place it on top of points, line places along lines multiple times per feature, vertex places on the vertexes of polygons, and interior attempts to place inside of polygons."},"avoid-edges":{css:"shield-avoid-edges",doc:"Tell positioning algorithm to avoid labeling near intersection edges.",type:"boolean","default-value":!1},"allow-overlap":{css:"shield-allow-overlap",type:"boolean","default-value":!1,doc:"Control whether overlapping shields are shown or hidden.","default-meaning":"Do not allow shields to overlap with other map elements already placed."},"minimum-distance":{css:"shield-min-distance",type:"float","default-value":0,doc:"Minimum distance to the next shield symbol, not necessarily the same shield."},spacing:{css:"shield-spacing",type:"float","default-value":0,doc:"The spacing between repeated occurrences of the same shield on a line"},"minimum-padding":{css:"shield-min-padding","default-value":0,doc:"Determines the minimum amount of padding that a shield gets relative to other shields",type:"float"},"wrap-width":{css:"shield-wrap-width",type:"unsigned","default-value":0,doc:"Length of a chunk of text in characters before wrapping text"},"wrap-before":{css:"shield-wrap-before",type:"boolean","default-value":!1,doc:"Wrap text before wrap-width is reached. If false, wrapped lines will be a bit longer than wrap-width."},"wrap-character":{css:"shield-wrap-character",type:"string","default-value":" ",doc:"Use this character instead of a space to wrap long names."},"halo-fill":{css:"shield-halo-fill",type:"color","default-value":"#FFFFFF","default-meaning":"white",doc:"Specifies the color of the halo around the text."},"halo-radius":{css:"shield-halo-radius",doc:"Specify the radius of the halo in pixels","default-value":0,"default-meaning":"no halo",type:"float"},"character-spacing":{css:"shield-character-spacing",type:"unsigned","default-value":0,doc:"Horizontal spacing between characters (in pixels). Currently works for point placement only, not line placement."},"line-spacing":{css:"shield-line-spacing",doc:"Vertical spacing between lines of multiline labels (in pixels)",type:"unsigned"},dx:{css:"shield-text-dx",type:"float",doc:"Displace text within shield by fixed amount, in pixels, +/- along the X axis.  A positive value will shift the text right","default-value":0},dy:{css:"shield-text-dy",type:"float",doc:"Displace text within shield by fixed amount, in pixels, +/- along the Y axis.  A positive value will shift the text down","default-value":0},"shield-dx":{css:"shield-dx",type:"float",doc:"Displace shield by fixed amount, in pixels, +/- along the X axis.  A positive value will shift the text right","default-value":0},"shield-dy":{css:"shield-dy",type:"float",doc:"Displace shield by fixed amount, in pixels, +/- along the Y axis.  A positive value will shift the text down","default-value":0},opacity:{css:"shield-opacity",type:"float",doc:"(Default 1.0) - opacity of the image used for the shield","default-value":1},"text-opacity":{css:"shield-text-opacity",type:"float",doc:"(Default 1.0) - opacity of the text placed on top of the shield","default-value":1},"horizontal-alignment":{css:"shield-horizontal-alignment",type:["left","middle","right","auto"],doc:"The shield's horizontal alignment from its centerpoint","default-value":"auto"},"vertical-alignment":{css:"shield-vertical-alignment",type:["top","middle","bottom","auto"],doc:"The shield's vertical alignment from its centerpoint","default-value":"middle"},"text-transform":{css:"shield-text-transform",type:["none","uppercase","lowercase","capitalize"],doc:"Transform the case of the characters","default-value":"none"},"justify-alignment":{css:"shield-justify-alignment",type:["left","center","right","auto"],doc:"Define how text in a shield's label is justified","default-value":"auto"},clip:{css:"shield-clip",type:"boolean","default-value":!0,"default-meaning":"geometry will be clipped to map bounds before rendering",doc:"geometries are clipped to map bounds by default for best rendering performance. In some cases users may wish to disable this to avoid rendering artifacts."},"comp-op":{css:"shield-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},"line-pattern":{file:{css:"line-pattern-file",type:"uri","default-value":"none",required:!0,doc:"An image file to be repeated and warped along a line"},clip:{css:"line-pattern-clip",type:"boolean","default-value":!0,"default-meaning":"geometry will be clipped to map bounds before rendering",doc:"geometries are clipped to map bounds by default for best rendering performance. In some cases users may wish to disable this to avoid rendering artifacts."},smooth:{css:"line-pattern-smooth",type:"float","default-value":0,"default-meaning":"no smoothing",range:"0-1",doc:"Smooths out geometry angles. 0 is no smoothing, 1 is fully smoothed. Values greater than 1 will produce wild, looping geometries."},"geometry-transform":{css:"line-pattern-geometry-transform",type:"functions","default-value":"none","default-meaning":"geometry will not be transformed",doc:"Allows transformation functions to be applied to the geometry.",functions:[["matrix",6],["translate",2],["scale",2],["rotate",3],["skewX",1],["skewY",1]]},"comp-op":{css:"line-pattern-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},"polygon-pattern":{file:{css:"polygon-pattern-file",type:"uri","default-value":"none",required:!0,doc:"Image to use as a repeated pattern fill within a polygon"},alignment:{css:"polygon-pattern-alignment",type:["local","global"],"default-value":"local",doc:"Specify whether to align pattern fills to the layer or to the map."},gamma:{css:"polygon-pattern-gamma",type:"float","default-value":1,"default-meaning":"fully antialiased",range:"0-1",doc:"Level of antialiasing of polygon pattern edges"},opacity:{css:"polygon-pattern-opacity",type:"float",doc:"(Default 1.0) - Apply an opacity level to the image used for the pattern","default-value":1,"default-meaning":"The image is rendered without modifications"},clip:{css:"polygon-pattern-clip",type:"boolean","default-value":!0,"default-meaning":"geometry will be clipped to map bounds before rendering",doc:"geometries are clipped to map bounds by default for best rendering performance. In some cases users may wish to disable this to avoid rendering artifacts."},smooth:{css:"polygon-pattern-smooth",type:"float","default-value":0,"default-meaning":"no smoothing",range:"0-1",doc:"Smooths out geometry angles. 0 is no smoothing, 1 is fully smoothed. Values greater than 1 will produce wild, looping geometries."},"geometry-transform":{css:"polygon-pattern-geometry-transform",type:"functions","default-value":"none","default-meaning":"geometry will not be transformed",doc:"Allows transformation functions to be applied to the geometry.",functions:[["matrix",6],["translate",2],["scale",2],["rotate",3],["skewX",1],["skewY",1]]},"comp-op":{css:"polygon-pattern-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},raster:{opacity:{css:"raster-opacity","default-value":1,"default-meaning":"opaque",type:"float",doc:"The opacity of the raster symbolizer on top of other symbolizers."},"filter-factor":{css:"raster-filter-factor","default-value":-1,"default-meaning":"Allow the datasource to choose appropriate downscaling.",type:"float",doc:"This is used by the Raster or Gdal datasources to pre-downscale images using overviews. Higher numbers can sometimes cause much better scaled image output, at the cost of speed."},scaling:{css:"raster-scaling",type:["near","fast","bilinear","bilinear8","bicubic","spline16","spline36","hanning","hamming","hermite","kaiser","quadric","catrom","gaussian","bessel","mitchell","sinc","lanczos","blackman"],"default-value":"near",doc:"The scaling algorithm used to making different resolution versions of this raster layer. Bilinear is a good compromise between speed and accuracy, while lanczos gives the highest quality."},"mesh-size":{css:"raster-mesh-size","default-value":16,"default-meaning":"Reprojection mesh will be 1/16 of the resolution of the source image",type:"unsigned",doc:"A reduced resolution mesh is used for raster reprojection, and the total image size is divided by the mesh-size to determine the quality of that mesh. Values for mesh-size larger than the default will result in faster reprojection but might lead to distortion."},"comp-op":{css:"raster-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},point:{file:{css:"point-file",type:"uri",required:!1,"default-value":"none",doc:"Image file to represent a point"},"allow-overlap":{css:"point-allow-overlap",type:"boolean","default-value":!1,doc:"Control whether overlapping points are shown or hidden.","default-meaning":"Do not allow points to overlap with each other - overlapping markers will not be shown."},"ignore-placement":{css:"point-ignore-placement",type:"boolean","default-value":!1,"default-meaning":"do not store the bbox of this geometry in the collision detector cache",doc:"value to control whether the placement of the feature will prevent the placement of other features"},opacity:{css:"point-opacity",type:"float","default-value":1,"default-meaning":"Fully opaque",doc:"A value from 0 to 1 to control the opacity of the point"},placement:{css:"point-placement",type:["centroid","interior"],doc:"How this point should be placed. Centroid calculates the geometric center of a polygon, which can be outside of it, while interior always places inside of a polygon.","default-value":"centroid"},transform:{css:"point-transform",type:"functions",functions:[["matrix",6],["translate",2],["scale",2],["rotate",3],["skewX",1],["skewY",1]],"default-value":"","default-meaning":"No transformation",doc:"SVG transformation definition"},"comp-op":{css:"point-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},text:{name:{css:"text-name",type:"expression",required:!0,"default-value":"",serialization:"content",doc:"Value to use for a text label. Data columns are specified using brackets like [column_name]"},"face-name":{css:"text-face-name",type:"string",validate:"font",doc:"Font name and style to render a label in",required:!0},size:{css:"text-size",type:"float","default-value":10,doc:"Text size in pixels"},"text-ratio":{css:"text-ratio",doc:"Define the amount of text (of the total) present on successive lines when wrapping occurs","default-value":0,type:"unsigned"},"wrap-width":{css:"text-wrap-width",doc:"Length of a chunk of text in characters before wrapping text","default-value":0,type:"unsigned"},"wrap-before":{css:"text-wrap-before",type:"boolean","default-value":!1,doc:"Wrap text before wrap-width is reached. If false, wrapped lines will be a bit longer than wrap-width."},"wrap-character":{css:"text-wrap-character",type:"string","default-value":" ",doc:"Use this character instead of a space to wrap long text."},spacing:{css:"text-spacing",type:"unsigned",doc:"Distance between repeated text labels on a line (aka. label-spacing)"},"character-spacing":{css:"text-character-spacing",type:"float","default-value":0,doc:"Horizontal spacing adjustment between characters in pixels"},"line-spacing":{css:"text-line-spacing","default-value":0,type:"unsigned",doc:"Vertical spacing adjustment between lines in pixels"},"label-position-tolerance":{css:"text-label-position-tolerance","default-value":0,type:"unsigned",doc:"Allows the label to be displaced from its ideal position by a number of pixels (only works with placement:line)"},"max-char-angle-delta":{css:"text-max-char-angle-delta",type:"float","default-value":"22.5",doc:"The maximum angle change, in degrees, allowed between adjacent characters in a label. This value internally is converted to radians to the default is 22.5*math.pi/180.0. The higher the value the fewer labels will be placed around around sharp corners."},fill:{css:"text-fill",doc:"Specifies the color for the text","default-value":"#000000",type:"color"},opacity:{css:"text-opacity",doc:"A number from 0 to 1 specifying the opacity for the text","default-value":1,"default-meaning":"Fully opaque",type:"float"},"halo-fill":{css:"text-halo-fill",type:"color","default-value":"#FFFFFF","default-meaning":"white",doc:"Specifies the color of the halo around the text."},"halo-radius":{css:"text-halo-radius",doc:"Specify the radius of the halo in pixels","default-value":0,"default-meaning":"no halo",type:"float"},dx:{css:"text-dx",type:"float",doc:"Displace text by fixed amount, in pixels, +/- along the X axis.  A positive value will shift the text right","default-value":0},dy:{css:"text-dy",type:"float",doc:"Displace text by fixed amount, in pixels, +/- along the Y axis.  A positive value will shift the text down","default-value":0},"vertical-alignment":{css:"text-vertical-alignment",type:["top","middle","bottom","auto"],doc:"Position of label relative to point position.","default-value":"auto","default-meaning":'Default affected by value of dy; "bottom" for dy>0, "top" for dy<0.'},"avoid-edges":{css:"text-avoid-edges",doc:"Tell positioning algorithm to avoid labeling near intersection edges.","default-value":!1,type:"boolean"},"minimum-distance":{css:"text-min-distance",doc:"Minimum permitted distance to the next text symbolizer.",type:"float"},"minimum-padding":{css:"text-min-padding",doc:"Determines the minimum amount of padding that a text symbolizer gets relative to other text",type:"float"},"minimum-path-length":{css:"text-min-path-length",type:"float","default-value":0,"default-meaning":"place labels on all paths",doc:"Place labels only on paths longer than this value."},"allow-overlap":{css:"text-allow-overlap",type:"boolean","default-value":!1,doc:"Control whether overlapping text is shown or hidden.","default-meaning":"Do not allow text to overlap with other text - overlapping markers will not be shown."},orientation:{css:"text-orientation",type:"expression",doc:"Rotate the text."},placement:{css:"text-placement",type:["point","line","vertex","interior"],"default-value":"point",doc:"Control the style of placement of a point versus the geometry it is attached to."},"placement-type":{css:"text-placement-type",doc:'Re-position and/or re-size text to avoid overlaps. "simple" for basic algorithm (using text-placements string,) "dummy" to turn this feature off.',type:["dummy","simple"],"default-value":"dummy"},placements:{css:"text-placements",type:"string","default-value":"",doc:'If "placement-type" is set to "simple", use this "POSITIONS,[SIZES]" string. An example is `text-placements: "E,NE,SE,W,NW,SW";` '},"text-transform":{css:"text-transform",type:["none","uppercase","lowercase","capitalize"],doc:"Transform the case of the characters","default-value":"none"},"horizontal-alignment":{css:"text-horizontal-alignment",type:["left","middle","right","auto"],doc:"The text's horizontal alignment from its centerpoint","default-value":"auto"},"justify-alignment":{css:"text-align",type:["left","right","center","auto"],doc:"Define how text is justified","default-value":"auto","default-meaning":"Auto alignment means that text will be centered by default except when using the `placement-type` parameter - in that case either right or left justification will be used automatically depending on where the text could be fit given the `text-placements` directives"},clip:{css:"text-clip",type:"boolean","default-value":!0,"default-meaning":"geometry will be clipped to map bounds before rendering",doc:"geometries are clipped to map bounds by default for best rendering performance. In some cases users may wish to disable this to avoid rendering artifacts."},"comp-op":{css:"text-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},building:{fill:{css:"building-fill","default-value":"#FFFFFF",doc:"The color of the buildings walls.",type:"color"},"fill-opacity":{css:"building-fill-opacity",type:"float",doc:"The opacity of the building as a whole, including all walls.","default-value":1},height:{css:"building-height",doc:"The height of the building in pixels.",type:"expression","default-value":"0"}}},colors:{aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50],transparent:[0,0,0,0]},filter:{value:["true","false","null","point","linestring","polygon","collection"]}};function pG(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}fG.mapnik_reference={version:{latest:hG,"2.1.1":hG}},fG.Tree={},fG.Tree.operate=function(e,t,r){switch(e){case"+":return t+r;case"-":return t-r;case"*":return t*r;case"%":return t%r;case"/":return t/r}},fG.Tree.functions={rgb:function(e,t,r){return this.rgba(e,t,r,1)},rgba:function(e,t,r,n){var o=this,i=[e,t,r].map(function(e){return o.number(e)});return n=o.number(n),i.some(isNaN)||isNaN(n)?null:new fG.Tree.Color(i,n)},stop:function(e){var t,r;return arguments.length>1&&(t=arguments[1]),arguments.length>2&&(r=arguments[2]),{is:"tag",val:e,color:t,mode:r,toString:function(n){return'\n\t<stop value="'+e.ev(n)+'"'+(t?' color="'+t.ev(n)+'" ':"")+(r?' mode="'+r.ev(n)+'" ':"")+"/>"}}},hsl:function(e,t,r){return this.hsla(e,t,r,1)},hsla:function(e,t,r,n){if([e=this.number(e)%360/360,t=this.number(t),r=this.number(r),n=this.number(n)].some(isNaN))return null;var o=r<=.5?r*(t+1):r+t-r*t,i=2*r-o;return this.rgba(255*a(e+1/3),255*a(e),255*a(e-1/3),n);function a(e){return 6*(e=e<0?e+1:e>1?e-1:e)<1?i+(o-i)*e*6:2*e<1?o:3*e<2?i+(o-i)*(2/3-e)*6:i}},hue:function(e){return"toHSL"in e?new fG.Tree.Dimension(Math.round(e.toHSL().h)):null},saturation:function(e){return"toHSL"in e?new fG.Tree.Dimension(Math.round(100*e.toHSL().s),"%"):null},lightness:function(e){return"toHSL"in e?new fG.Tree.Dimension(Math.round(100*e.toHSL().l),"%"):null},alpha:function(e){return"toHSL"in e?new fG.Tree.Dimension(e.toHSL().a):null},saturate:function(e,t){if(!("toHSL"in e))return null;var r=e.toHSL();return r.s+=t.value/100,r.s=this.clamp(r.s),this.hsla_simple(r)},desaturate:function(e,t){if(!("toHSL"in e))return null;var r=e.toHSL();return r.s-=t.value/100,r.s=this.clamp(r.s),this.hsla_simple(r)},lighten:function(e,t){if(!("toHSL"in e))return null;var r=e.toHSL();return r.l+=t.value/100,r.l=this.clamp(r.l),this.hsla_simple(r)},darken:function(e,t){if(!("toHSL"in e))return null;var r=e.toHSL();return r.l-=t.value/100,r.l=this.clamp(r.l),this.hsla_simple(r)},fadein:function(e,t){if(!("toHSL"in e))return null;var r=e.toHSL();return r.a+=t.value/100,r.a=this.clamp(r.a),this.hsla_simple(r)},fadeout:function(e,t){if(!("toHSL"in e))return null;var r=e.toHSL();return r.a-=t.value/100,r.a=this.clamp(r.a),this.hsla_simple(r)},spin:function(e,t){if(!("toHSL"in e))return null;var r=e.toHSL(),n=(r.h+t.value)%360;return r.h=n<0?360+n:n,this.hsla_simple(r)},replace:function(e,t,r){return"field"===e.is?e.toString+".replace("+t.toString()+", "+r.toString()+")":e.replace(t,r)},mix:function(e,t,r){var n=r.value/100,o=2*n-1,i=e.toHSL().a-t.toHSL().a,a=((o*i==-1?o:(o+i)/(1+o*i))+1)/2,s=1-a,u=[e.rgb[0]*a+t.rgb[0]*s,e.rgb[1]*a+t.rgb[1]*s,e.rgb[2]*a+t.rgb[2]*s],l=e.alpha*n+t.alpha*(1-n);return new fG.Tree.Color(u,l)},greyscale:function(e){return this.desaturate(e,new fG.Tree.Dimension(100))},"%":function(e){for(var t=Array.prototype.slice.call(arguments,1),r=e.value,n=0;n<t.length;n++)r=r.replace(/%s/,t[n].value).replace(/%[da]/,t[n].toString());return r=r.replace(/%%/g,"%"),new fG.Tree.Quoted(r)},hsla_simple:function(e){return this.hsla(e.h,e.s,e.l,e.a)},number:function(e){return e instanceof fG.Tree.Dimension?parseFloat("%"===e.unit?e.value/100:e.value):"number"==typeof e?e:NaN},clamp:function(e){return Math.min(1,Math.max(0,e))}},fG.Tree.Call=function(){function e(t,r,n){uG(this,e),this.is="call",this.name=t,this.args=r,this.index=n}return cG(e,[{key:"ev",value:function(e){for(var t=this.args.map(function(t){return t.ev(e)}),r=0;r<t.length;r++)if("undefined"===t[r].is)return{is:"undefined",value:"undefined"};if(this.name in fG.Tree.functions){if(fG.Tree.functions[this.name].length<=t.length){var n=fG.Tree.functions[this.name].apply(fG.Tree.functions,t);return null===n?(e.error({message:"incorrect arguments given to "+this.name+"()",index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"}):n}return e.error({message:"incorrect number of arguments for "+this.name+"(). "+fG.Tree.functions[this.name].length+" expected.",index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"}}var o=fG.Tree.Reference.mapnikFunctions[this.name];if(void 0===o){var i=aG()(fG.Tree.Reference.mapnikFunctions),a=this.name,s=i.map(function(e){return[e[0],fG.Tree.Reference.editDistance(a,e[0]),e[1]]}).sort(function(e,t){return e[1]-t[1]});return e.error({message:"unknown function "+this.name+"(), did you mean "+s[0][0]+"("+s[0][2]+")",index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"}}return o!==t.length&&-1!==o?(e.error({message:"function "+this.name+"() takes "+o+" arguments and was given "+t.length,index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"}):(this.args=t,this)}},{key:"toString",value:function(e,t){return this.args.length?this.name+"("+this.args.join(",")+")":this.name}}]),e}(),fG.Tree.Color=function(){function e(t,r){uG(this,e),this.is="color",Array.isArray(t)?this.rgb=t.slice(0,3):6==t.length?this.rgb=t.match(/.{2}/g).map(function(e){return parseInt(e,16)}):this.rgb=t.split("").map(function(e){return parseInt(e+e,16)}),"number"==typeof r?this.alpha=r:4===t.length?this.alpha=t[3]:this.alpha=1}return cG(e,[{key:"ev",value:function(){return this}},{key:"toString",value:function(){return"rgba("+this.rgb.map(function(e){return Math.round(e)}).concat(this.alpha).join(", ")+")"}},{key:"operate",value:function(e,t,r){var n=[];r instanceof fG.Tree.Color||(r=r.toColor());for(var o=0;o<3;o++)n[o]=fG.Tree.operate(t,this.rgb[o],r.rgb[o]);return new fG.Tree.Color(n)}},{key:"toHSL",value:function(){var e,t,r=this.rgb[0]/255,n=this.rgb[1]/255,o=this.rgb[2]/255,i=this.alpha,a=Math.max(r,n,o),s=Math.min(r,n,o),u=(a+s)/2,l=a-s;if(a===s)e=t=0;else{switch(t=u>.5?l/(2-a-s):l/(a+s),a){case r:e=(n-o)/l+(n<o?6:0);break;case n:e=(o-r)/l+2;break;case o:e=(r-n)/l+4}e/=6}return{h:360*e,s:t,l:u,a:i}}}]),e}(),fG.Tree.Comment=function(){function e(t,r){uG(this,e),this.value=t,this.silent=!!r}return cG(e,[{key:"toString",value:function(e){return"\x3c!--"+this.value+"--\x3e"}},{key:"ev",value:function(){return this}}]),e}(),fG.Tree.Definition=function(){function e(t,r){uG(this,e),this.elements=t.elements,this.rules=r,this.ruleIndex={};for(var n=0;n<this.rules.length;n++)"zoom"in this.rules[n]&&(this.rules[n]=this.rules[n].clone()),this.rules[n].zoom=t.zoom,this.ruleIndex[this.rules[n].updateID()]=!0;this.filters=t.filters,this.zoom=t.zoom,this.attachment=t.attachment||"__default__",this.specificity=t.specificity()}return cG(e,[{key:"toString",value:function(){for(var e=this.filters.toString(),t=0;t<this.rules.length;t++)e+="\n    "+this.rules[t];return e}},{key:"toJS",value:function(e){var t={},r=this.zoom,n=this.filters.toJS(e),o=[r];function i(r){if(r instanceof fG.Tree.Rule)t[r.name]=t[r.name]||[],n?t[r.name].push("if("+n+"){"+r.value.toJS(e)+"}"):t[r.name].push(r.value.toJS(e));else if(r instanceof fG.Tree.Ruleset){var o=r.toJS(e);for(var i in o)for(var a in t[i]=t[i]||[],o[i])t[i].push(o[i][a])}}for(var a in n&&o.push(n),n=o.join(" && "),this.rules)i(this.rules[a]);return t}}]),e}(),fG.Tree.Dimension=function(){function e(t,r,n){uG(this,e),this.is="float",this.physical_units=["m","cm","in","mm","pt","pc"],this.screen_units=["px","%"],this.all_units=["m","cm","in","mm","pt","pc","px","%"],this.densities={m:.0254,mm:25.4,cm:2.54,pt:72,pc:6},this.value=parseFloat(t),this.unit=r||null,this.index=n}return cG(e,[{key:"ev",value:function(e){if(this.unit&&this.all_units.indexOf(this.unit)<0)return e.error({message:"Invalid unit: '"+this.unit+"'",index:this.index}),{is:"undefined",value:"undefined"};if(this.unit&&this.physical_units.indexOf(this.unit)>=0){if(!e.ppi)return e.error({message:"ppi is not set, so metric units can't be used",index:this.index}),{is:"undefined",value:"undefined"};this.value=this.value/this.densities[this.unit]*e.ppi,this.unit="px"}return this}},{key:"toColor",value:function(){return new fG.Tree.Color([this.value,this.value,this.value])}},{key:"round",value:function(){return this.value=Math.round(this.value),this}},{key:"toString",value:function(){return this.value.toString()}},{key:"operate",value:function(e,t,r){return"%"===this.unit&&"%"!==r.unit?(e.error({message:"If two operands differ, the first must not be %",index:this.index}),{is:"undefined",value:"undefined"}):"%"!==this.unit&&"%"===r.unit?"*"===t||"/"===t||"%"===t?(e.error({message:"Percent values can only be added or subtracted from other values",index:this.index}),{is:"undefined",value:"undefined"}):new fG.Tree.Dimension(fG.Tree.operate(t,this.value,this.value*r.value*.01),this.unit):new fG.Tree.Dimension(fG.Tree.operate(t,this.value,r.value),this.unit||r.unit)}}]),e}(),fG.Tree.Element=function(){function e(t){uG(this,e),this.value=t.trim(),"#"===this.value[0]&&(this.type="id",this.clean=this.value.replace(/^#/,"")),"."===this.value[0]&&(this.type="class",this.clean=this.value.replace(/^\./,"")),-1!==this.value.indexOf("*")&&(this.type="wildcard")}return cG(e,[{key:"specificity",value:function(){return["id"===this.type?1:0,"class"===this.type?1:0]}},{key:"toString",value:function(){return this.value}}]),e}(),fG.Tree.Expression=function(){function e(t){uG(this,e),this.is="expression",this.value=t}return cG(e,[{key:"ev",value:function(e){return this.value.length>1?new fG.Tree.Expression(this.value.map(function(t){return t.ev(e)})):this.value[0].ev(e)}},{key:"toString",value:function(e){return this.value.map(function(t){return t.toString(e)}).join(" ")}}]),e}(),fG.Tree.Field=function(){function e(t){uG(this,e),this.is="field",this.value=t||""}return cG(e,[{key:"toString",value:function(){return'["'+this.value.toUpperCase()+'"]'}},{key:"ev",value:function(){return this}}]),e}(),fG.Tree.Filter=function(){function e(t,r,n,o,i){uG(this,e),this.ops={"<":[" &lt; ","numeric"],">":[" &gt; ","numeric"],"=":[" = ","both"],"!=":[" != ","both"],"<=":[" &lt;= ","numeric"],">=":[" &gt;= ","numeric"],"=~":[".match(","string",")"]},this.key=t,this.op=r,this.val=n,this.index=o,this.filename=i,this.id=this.key+this.op+this.val}return cG(e,[{key:"ev",value:function(e){return this.key=this.key.ev(e),this.val=this.val.ev(e),this}},{key:"toString",value:function(){return"["+this.id+"]"}}]),e}(),fG.Tree.Filterset=function(){function e(){uG(this,e),this.filters={}}return cG(e,[{key:"toJS",value:function(e){function t(e){var t=e.op;"="===t&&(t="==");var r=e.val;void 0!==e._val&&(r=e._val.toString(!0)),e.key&&"scale"===e.key.value?r=+r:"string"!=typeof r&&"object"!==sG(r)||(r="'"+r+"'");var n="attributes";return n+"&&"+n+e.key+"&&"+n+e.key+" "+t+r}var r=[];for(var n in this.filters)r.push(t(this.filters[n]));return r.join(" && ")}},{key:"toString",value:function(){var e=[];for(var t in this.filters)e.push(this.filters[t].id);return e.sort().join("\t")}},{key:"ev",value:function(e){for(var t in this.filters)this.filters[t].ev(e);return this}},{key:"clone",value:function(){var e=new fG.Tree.Filterset;for(var t in this.filters)e.filters[t]=this.filters[t];return e}},{key:"cloneWith",value:function(e){var t=[];for(var r in e.filters){var n=this.addable(e.filters[r]);if(!1===n)return!1;!0===n&&t.push(e.filters[r])}if(!t.length)return null;var o=new fG.Tree.Filterset;for(r in this.filters)o.filters[r]=this.filters[r];for(;r=t.shift();)o.add(r);return o}},{key:"addable",value:function(e){var t=e.key.toString(),r=e.val.toString();switch(r.match(/^[0-9]+(\.[0-9]*)?_match/)&&(r=parseFloat(r)),e.op){case"=":return void 0!==this.filters[t+"="]?this.filters[t+"="].val.toString()==r&&null:void 0===this.filters[t+"!="+r]&&(!(void 0!==this.filters[t+">"]&&this.filters[t+">"].val>=r)&&(!(void 0!==this.filters[t+"<"]&&this.filters[t+"<"].val<=r)&&(!(void 0!==this.filters[t+">="]&&this.filters[t+">="].val>r)&&!(void 0!==this.filters[t+"<="]&&this.filters[t+"<="].val<r))));case"=~":return!0;case"!=":return void 0!==this.filters[t+"="]?this.filters[t+"="].val!==r&&null:void 0!==this.filters[t+"!="+r]?null:void 0!==this.filters[t+">"]&&this.filters[t+">"].val>=r?null:void 0!==this.filters[t+"<"]&&this.filters[t+"<"].val<=r?null:void 0!==this.filters[t+">="]&&this.filters[t+">="].val>r?null:!(void 0!==this.filters[t+"<="]&&this.filters[t+"<="].val<r)||null;case">":return t+"="in this.filters?!(this.filters[t+"="].val<=r)&&null:!(void 0!==this.filters[t+"<"]&&this.filters[t+"<"].val<=r)&&(!(void 0!==this.filters[t+"<="]&&this.filters[t+"<="].val<=r)&&(void 0!==this.filters[t+">"]&&this.filters[t+">"].val>=r?null:!(void 0!==this.filters[t+">="]&&this.filters[t+">="].val>r)||null));case">=":return void 0!==this.filters[t+"="]?!(this.filters[t+"="].val<r)&&null:!(void 0!==this.filters[t+"<"]&&this.filters[t+"<"].val<=r)&&(!(void 0!==this.filters[t+"<="]&&this.filters[t+"<="].val<r)&&(void 0!==this.filters[t+">"]&&this.filters[t+">"].val>=r?null:!(void 0!==this.filters[t+">="]&&this.filters[t+">="].val>=r)||null));case"<":return void 0!==this.filters[t+"="]?!(this.filters[t+"="].val>=r)&&null:!(void 0!==this.filters[t+">"]&&this.filters[t+">"].val>=r)&&(!(void 0!==this.filters[t+">="]&&this.filters[t+">="].val>=r)&&(void 0!==this.filters[t+"<"]&&this.filters[t+"<"].val<=r?null:!(void 0!==this.filters[t+"<="]&&this.filters[t+"<="].val<r)||null));case"<=":return void 0!==this.filters[t+"="]?!(this.filters[t+"="].val>r)&&null:!(void 0!==this.filters[t+">"]&&this.filters[t+">"].val>=r)&&(!(void 0!==this.filters[t+">="]&&this.filters[t+">="].val>r)&&(void 0!==this.filters[t+"<"]&&this.filters[t+"<"].val<=r?null:!(void 0!==this.filters[t+"<="]&&this.filters[t+"<="].val<=r)||null))}}},{key:"conflict",value:function(e){var t=e.key.toString(),r=e.val.toString();return isNaN(parseFloat(r))||(r=parseFloat(r)),("="===e.op&&void 0!==this.filters[t+"="]&&r!=this.filters[t+"="].val.toString()||"!="===e.op&&void 0!==this.filters[t+"="]&&r==this.filters[t+"="].val.toString()||"="===e.op&&void 0!==this.filters[t+"!="]&&r===this.filters[t+"!="].val.toString())&&e.toString()+" added to "+this.toString()+" produces an invalid filter"}},{key:"add",value:function(e,t){var r,n=e.key.toString(),o=e.op,i=this.conflict(e);if(i)return i;if("="===o){for(var a in this.filters)this.filters[a].key===n&&delete this.filters[a];this.filters[n+"="]=e}else if("!="===o)this.filters[n+"!="+e.val]=e;else if("=~"===o)this.filters[n+"=~"+e.val]=e;else if(">"===o){for(var s in this.filters)this.filters[s].key===n&&this.filters[s].val<=e.val&&delete this.filters[s];this.filters[n+">"]=e}else if(">="===o){for(var u in this.filters)r=+this.filters[u].val.toString(),this.filters[u].key===n&&r<e.val&&delete this.filters[u];void 0!==this.filters[n+"!="+e.val]?(delete this.filters[n+"!="+e.val],e.op=">",this.filters[n+">"]=e):this.filters[n+">="]=e}else if("<"===o){for(var l in this.filters)r=+this.filters[l].val.toString(),this.filters[l].key===n&&r>=e.val&&delete this.filters[l];this.filters[n+"<"]=e}else if("<="===o){for(var c in this.filters)r=+this.filters[c].val.toString(),this.filters[c].key===n&&r>e.val&&delete this.filters[c];void 0!==this.filters[n+"!="+e.val]?(delete this.filters[n+"!="+e.val],e.op="<",this.filters[n+"<"]=e):this.filters[n+"<="]=e}}}]),e}(),fG.Tree.Fontset=cG(function e(t,r){uG(this,e),this.fonts=r,this.name="fontset-"+t.effects.length}),fG.Tree.Invalid=function(){function e(t,r,n){uG(this,e),this.is="invalid",this.chunk=t,this.index=r,this.type="syntax",this.message=n||"Invalid code: "+this.chunk}return cG(e,[{key:"ev",value:function(e){return e.error({chunk:this.chunk,index:this.index,type:"syntax",message:this.message||"Invalid code: "+this.chunk}),{is:"undefined"}}}]),e}(),fG.Tree.Keyword=function(){function e(t){uG(this,e),this.value=t;var r={transparent:"color",true:"boolean",false:"boolean"};this.is=r[t]?r[t]:"keyword"}return cG(e,[{key:"ev",value:function(){return this}},{key:"toString",value:function(){return this.value}}]),e}(),fG.Tree.Literal=function(){function e(t){uG(this,e),this.value=t||"",this.is="field"}return cG(e,[{key:"toString",value:function(){return this.value}},{key:"ev",value:function(){return this}}]),e}(),fG.Tree.Operation=function(){function e(t,r,n){uG(this,e),this.is="operation",this.op=t.trim(),this.operands=r,this.index=n}return cG(e,[{key:"ev",value:function(e){var t,r=this.operands[0].ev(e),n=this.operands[1].ev(e);return"undefined"===r.is||"undefined"===n.is?{is:"undefined",value:"undefined"}:(r instanceof fG.Tree.Dimension&&n instanceof fG.Tree.Color&&("*"===this.op||"+"===this.op?(t=n,n=r,r=t):e.error({name:"OperationError",message:"Can't substract or divide a color from a number",index:this.index})),r instanceof fG.Tree.Quoted&&n instanceof fG.Tree.Quoted&&"+"!==this.op?(e.error({message:"Can't subtract, divide, or multiply strings.",index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"}):r instanceof fG.Tree.Field||n instanceof fG.Tree.Field||r instanceof fG.Tree.Literal||n instanceof fG.Tree.Literal?"color"===r.is||"color"===n.is?(e.error({message:"Can't subtract, divide, or multiply colors in expressions.",index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"}):new fG.Tree.Literal(r.ev(e).toString(!0)+this.op+n.ev(e).toString(!0)):void 0===r.operate?(e.error({message:"Cannot do math with type "+r.is+".",index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"}):r.operate(e,this.op,n))}}]),e}(),fG.Tree.Quoted=function(){function e(t){uG(this,e),this.is="string",this.value=t||""}return cG(e,[{key:"toString",value:function(e){var t=this.value.replace(/&/g,"&amp;"),r=t.replace(/\'/g,"\\'").replace(/\"/g,"&quot;").replace(/</g,"&lt;").replace(/\>/g,"&gt;");return!0===e?"'"+r+"'":t}},{key:"ev",value:function(){return this}},{key:"operate",value:function(e,t,r){return new fG.Tree.Quoted(fG.Tree.operate(t,this.toString(),r.toString(this.contains_field)))}}]),e}(),fG.Tree.Reference={_validateValue:{font:function(e,t){return!e.validation_data||!e.validation_data.fonts||-1!=e.validation_data.fonts.indexOf(t)}},setData:function(e){this.data=e,this.selector_cache=function(e){var t={};for(var r in e.symbolizers)for(var n in e.symbolizers[r])e.symbolizers[r][n].hasOwnProperty("css")&&(t[e.symbolizers[r][n].css]=[e.symbolizers[r][n],r,n]);return t}(e),this.mapnikFunctions=function(e){var t={};for(var r in e.symbolizers)for(var n in e.symbolizers[r])if("functions"===e.symbolizers[r][n].type)for(var o=0;o<e.symbolizers[r][n].functions.length;o++){var i=e.symbolizers[r][n].functions[o];t[i[0]]=i[1]}return t}(e),this.required_cache=function(e){var t={};for(var r in e.symbolizers)for(var n in t[r]=[],e.symbolizers[r])e.symbolizers[r][n].required&&t[r].push(e.symbolizers[r][n].css);return t}(e)},setVersion:function(e){return!!fG.mapnik_reference.version.hasOwnProperty(e)&&(this.setData(fG.mapnik_reference.version[e]),!0)},selectorData:function(e,t){if(this.selector_cache&&this.selector_cache[e])return this.selector_cache[e][t]},validSelector:function(e){return!!this.selector_cache[e]},selectorName:function(e){return this.selectorData(e,2)},selector:function(e){return this.selectorData(e,0)},symbolizer:function(e){return this.selectorData(e,1)},requiredProperties:function(e,t){var r=this.required_cache[e];for(var n in r)if(!(r[n]in t))return"Property "+r[n]+" required for defining "+e+" styles."},isFont:function(e){return"font"===this.selector(e).validate},editDistance:function(e,t){if(0===e.length)return t.length;if(0===t.length)return e.length;for(var r=[],n=0;n<=t.length;n++)r[n]=[n];for(var o=0;o<=e.length;o++)r[0][o]=o;for(n=1;n<=t.length;n++)for(o=1;o<=e.length;o++)t.charAt(n-1)===e.charAt(o-1)?r[n][o]=r[n-1][o-1]:r[n][o]=Math.min(r[n-1][o-1]+1,Math.min(r[n][o-1]+1,r[n-1][o]+1));return r[t.length][e.length]},validValue:function(e,t,r){var n;if(this.selector(t)){if("keyword"===r.value[0].is)return function(e,t){return"object"===sG(this.selector(t).type)?-1!==this.selector(t).type.indexOf(e.value[0].value):"string"===this.selector(t).type}(r,t);if("undefined"===r.value[0].is)return!0;if("numbers"===this.selector(t).type){for(n in r.value)if("float"!==r.value[n].is)return!1;return!0}if("tags"===this.selector(t).type){if(!r.value)return!1;if(!r.value[0].value)return"tag"===r.value[0].is;for(n=0;n<r.value[0].value.length;n++)if("tag"!==r.value[0].value[n].is)return!1;return!0}if("functions"==this.selector(t).type)return function(e,t){if("string"===e.value[0].is)return!0;for(var r in e.value)for(var n in e.value[r].value){if("call"!==e.value[r].value[n].is)return!1;var o=find(this.selector(t).functions,function(t){return t[0]===e.value[r].value[n].name});if(!(o&&-1===o[1]||o&&o[1]===e.value[r].value[n].args.length))return!1}return!0}(r,t);if("expression"===this.selector(t).type)return!0;if("unsigned"===this.selector(t).type)return"float"===r.value[0].is&&(r.value[0].round(),!0);if(this.selector(t).validate){for(n=0;n<r.value.length;n++)if(this.selector(t).type===r.value[n].is&&this._validateValue[this.selector(t).validate](e,r.value[n].value))return!0;return!1}return this.selector(t).type===r.value[0].is}return!1}},fG.Tree.Reference.setVersion("latest"),fG.Tree.Rule=function(){function e(t,r,n,o){uG(this,e),this.is="rule";var i=t.split("/");this.name=i.pop(),this.instance=i.length?i[0]:"__default__",this.value=r instanceof fG.Tree.Value?r:new fG.Tree.Value([r]),this.index=n,this.symbolizer=fG.Tree.Reference.symbolizer(this.name),this.filename=o,this.variable="@"===t.charAt(0)}return cG(e,[{key:"clone",value:function(){var e=Object.create(fG.Tree.Rule.prototype);return e.name=this.name,e.value=this.value,e.index=this.index,e.instance=this.instance,e.symbolizer=this.symbolizer,e.filename=this.filename,e.variable=this.variable,e}},{key:"updateID",value:function(){return this.id=this.zoom+"#"+this.instance+"#"+this.name}},{key:"toString",value:function(){return"["+fG.Tree.Zoom.toString(this.zoom)+"] "+this.name+": "+this.value}},{key:"ev",value:function(e){return new fG.Tree.Rule(this.name,this.value.ev(e),this.index,this.filename)}}]),e}(),fG.Tree.Ruleset=function(){function e(t,r){uG(this,e),this.is="ruleset",this.selectors=t,this.rules=r,this._lookups={}}return cG(e,[{key:"ev",value:function(e){var t,r,n=new fG.Tree.Ruleset(this.selectors,this.rules.slice(0));for(n.root=this.root,e.frames.unshift(n),t=0;t<n.rules.length;t++)r=n.rules[t],n.rules[t]=r.ev?r.ev(e):r;return e.frames.shift(),n}},{key:"match",value:function(e){return!e||0===e.length}},{key:"variables",value:function(){return this._variables?this._variables:this._variables=this.rules.reduce(function(e,t){return t instanceof fG.Tree.Rule&&!0===t.variable&&(e[t.name]=t),e},{})}},{key:"variable",value:function(e){return this.variables()[e]}},{key:"rulesets",value:function(){return this._rulesets?this._rulesets:this._rulesets=this.rules.filter(function(e){return e instanceof fG.Tree.Ruleset})}},{key:"find",value:function(e,t){t=t||this;var r=[],n=e.toString();return n in this._lookups?this._lookups[n]:(this.rulesets().forEach(function(n){if(n!==t)for(var o=0;o<n.selectors.length;o++)if(e.match(n.selectors[o])){e.elements.length>1?Array.prototype.push.apply(r,n.find(new fG.Tree.Selector(null,null,e.elements.slice(1)),t)):r.push(n);break}}),this._lookups[n]=r)}},{key:"evZooms",value:function(e){for(var t=0;t<this.selectors.length;t++){for(var r=fG.Tree.Zoom.all,n=0;n<this.selectors[t].zoom.length;n++)r=this.selectors[t].zoom[n].ev(e).zoom;this.selectors[t].zoom=r}}},{key:"flatten",value:function(e,t,r){var n,o,i=[];for(0===this.selectors.length&&(r.frames=r.frames.concat(this.rules)),this.evZooms(r),n=0;n<this.selectors.length;n++){var a=this.selectors[n];if(a.filters)if(t.length)for(o=0;o<t.length;o++){var s=t[o],u=s.filters.cloneWith(a.filters);if(null===u){if(s.zoom===a.zoom&&s.attachment===a.attachment&&s.elements.join()===a.elements.join()){i.push(s);continue}u=s.filters}else if(!u)continue;var l=Object.create(fG.Tree.Selector.prototype);l.filters=u,l.zoom=a.zoom,l.elements=s.elements.concat(a.elements),s.attachment&&a.attachment?l.attachment=s.attachment+"/"+a.attachment:l.attachment=a.attachment||s.attachment,l.conditions=s.conditions+a.conditions,l.index=a.index,i.push(l)}else i.push(a)}var c=[];for(n=0;n<this.rules.length;n++){var f=this.rules[n];f instanceof fG.Tree.Ruleset?f.flatten(e,i,r):f instanceof fG.Tree.Rule?c.push(f):f instanceof fG.Tree.Invalid&&r.error(f)}var h=!!c.length&&c[0].index;for(n=0;n<i.length;n++)!1!==h&&(i[n].index=h),e.push(new fG.Tree.Definition(i[n],c.slice()));return e}}]),e}(),fG.Tree.Selector=function(){function e(t,r,n,o,i,a){uG(this,e),this.elements=n||[],this.attachment=o,this.filters=t||{},this.zoom=void 0!==r?r:fG.Tree.Zoom.all,this.conditions=i,this.index=a}return cG(e,[{key:"specificity",value:function(){return this.elements.reduce(function(e,t){var r=t.specificity();return e[0]+=r[0],e[1]+=r[1],e},[0,0,this.conditions,this.index])}}]),e}(),fG.Tree.URL=function(){function e(t,r){uG(this,e),this.is="uri",this.value=t,this.paths=r}return cG(e,[{key:"toString",value:function(){return this.value.toString()}},{key:"ev",value:function(e){return new fG.Tree.URL(this.value.ev(e),this.paths)}}]),e}(),fG.Tree.Value=function(){function e(t){uG(this,e),this.is="value",this.value=t}return cG(e,[{key:"ev",value:function(e){return 1===this.value.length?this.value[0].ev(e):new fG.Tree.Value(this.value.map(function(t){return t.ev(e)}))}},{key:"toJS",value:function(e){var t=this.ev(e),r=t.toString();return"color"===t.is||"uri"===t.is||"string"===t.is||"keyword"===t.is?r="'"+r+"'":"field"===t.is?r=r.replace(/\[(.*)\]/g,"attributes['_match1']"):t.value&&"object"===sG(t.value)&&(r="["+r+"]"),"_value = "+r+";"}},{key:"toString",value:function(e,t,r,n){return this.value.map(function(t){return t.toString(e,n)}).join(r||", ")}},{key:"clone",value:function(){var e=Object.create(fG.Tree.Value.prototype);return Array.isArray(e)?e.value=this.value.slice():e.value=this.value,e.is=this.is,e}}]),e}(),fG.Tree.Variable=function(){function e(t,r,n){uG(this,e),this.is="variable",this.name=t,this.index=r,this.filename=n}return cG(e,[{key:"toString",value:function(){return this.name}},{key:"ev",value:function(e){if(this._css)return this._css;var t=e.frames.filter(function(e){return e.name===this.name}.bind(this));return t.length?t[0].value.ev(e):(e.error({message:"variable "+this.name+" is undefined",index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"})}}]),e}(),fG.Tree.Zoom=function(){function e(t,r,n){uG(this,e),this.op=t,this.value=r,this.index=n}return cG(e,[{key:"setZoom",value:function(e){return this.zoom=e,this}},{key:"ev",value:function(e){var t=parseInt(this.value.ev(e).toString(),10);switch((t>fG.Tree.Zoom.maxZoom||t<0)&&e.error({message:"Only zoom levels between 0 and "+fG.Tree.Zoom.maxZoom+" supported.",index:this.index}),this.op){case"=":return this.zoom="zoom && zoom === "+t,this;case">":this.zoom="zoom && zoom > "+t;break;case">=":this.zoom="zoom && zoom >= "+t;break;case"<":this.zoom="zoom && zoom < "+t;break;case"<=":this.zoom="zoom && zoom <= "+t}return this}},{key:"toString",value:function(){for(var e="",t=0;t<=fG.Tree.Zoom.maxZoom;t++)e+=this.zoom&1<<t?"X":".";return e}}]),e}(),fG.Tree.Zoom.all=23,fG.Tree.Zoom.maxZoom=22,fG.Tree.Zoom.ranges={0:1e9,1:5e8,2:2e8,3:1e8,4:5e7,5:25e6,6:125e5,7:65e5,8:3e6,9:15e5,10:75e4,11:4e5,12:2e5,13:1e5,14:5e4,15:25e3,16:12500,17:5e3,18:2500,19:1500,20:750,21:500,22:250,23:100};var dG=function(e,t,r){return t&&pG(e.prototype,t),r&&pG(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.fill=!0,this.fillColor="#000000",this.fillOpacity=1,this.stroke=!1,this.strokeColor="#000000",this.strokeOpacity=1,this.strokeWidth=1,this.strokeLinecap="butt",this.strokeLineJoin="miter",this.strokeDashstyle="solid",this.pointRadius=6,this.shadowBlur=0,this.shadowColor="#000000",this.shadowOffsetX=0,this.shadowOffsetY=0,this.label="",this.labelRect=!1,this.fontColor="",this.fontSize=12,this.fontStyle="normal",this.fontVariant="normal",this.fontWeight="normal",this.fontFamily="arial,sans-serif",this.labelPosition="top",this.labelAlign="center",this.labelBaseline="middle",this.labelXOffset=0,this.labelYOffset=0,j.extend(this,t)});function yG(e){"@babel/helpers - typeof";return(yG="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function vG(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function gG(){return(gG="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=wG(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function mG(e,t){return(mG=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function bG(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=wG(e);if(t){var o=wG(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===yG(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function wG(e){return(wG=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var _G=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&mG(e,t)}(i,Tr);var t,r,n,o=bG(i);function i(e,t,r,n,a,s){var u;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(u=o.call(this,e,t,r,n,a,s)).shapeFactory=new Ya,u.shapeParameters=null,u.RelativeCoordinate=!1,u.setting=null,u.origonPoint=null,u.chartBox=null,u.chartBounds=null,u.width=null,u.height=null,u.XOffset=0,u.YOffset=0,u.DVBParameter=null,u.dataViewBox=null,u.DVBCodomain=null,u.DVBCenterPoint=null,u.DVBUnitValue=null,u.DVBOrigonPoint=null,u.DVBWidth=null,u.DVBHeight=null,u.origonPointOffset=null,u.fields=r||[],u.dataValues=null,u.lonlat=a||u.data.geometry.getBounds().getCenterLonLat(),n&&n.width&&n.height&&n.codomain&&(u.setting=n),u.CLASS_NAME="SuperMap.Feature.Theme.Graph",u}return t=i,(r=[{key:"destroy",value:function(){this.shapeFactory=null,this.shapeParameters=null,this.width=null,this.height=null,this.origonPoint=null,this.chartBox=null,this.dataViewBox=null,this.chartBounds=null,this.DVBParameter=null,this.DVBOrigonPoint=null,this.DVBCenterPoint=null,this.DVBWidth=null,this.DVBHeight=null,this.DVBCodomain=null,this.DVBUnitValue=null,this.origonPointOffset=null,this.XOffset=null,this.YOffset=null,this.fields=null,this.dataValues=null,this.setting=null,gG(wG(i.prototype),"destroy",this).call(this)}},{key:"initBaseParameter",value:function(){if(!this.setting)return!1;var e=this.setting;if(!(e.width&&e.height&&e.codomain))return!1;var t=void 0===e.decimalNumber||isNaN(e.decimalNumber)?-1:e.decimalNumber,r=Tr.getDataValues(this.data,this.fields,t);this.dataValues=r||[],this.width=parseFloat(e.width),this.height=parseFloat(e.height),this.DVBCodomain=e.codomain,this.XOffset=e.XOffset?e.XOffset:0,this.YOffset=e.YOffset?e.YOffset:0,this.origonPoint=[],this.chartBox=[],this.dataViewBox=[],this.DVBParameter=e.dataViewBoxParameter?e.dataViewBoxParameter:[0,0,0,0],this.DVBOrigonPoint=[],this.DVBCenterPoint=[],this.origonPointOffset=[],this.resetLocation();var n=this.width,o=this.height,i=this.location;this.origonPoint=[i[0]-n/2,i[1]-o/2];var a=this.origonPoint;this.chartBox=[a[0],a[1]+o,a[0]+n,a[1]];var s=this.chartBox,u=this.DVBParameter;this.dataViewBox=[s[0]+u[0],s[1]-u[1],s[2]-u[2],s[3]+u[3]];var l=this.dataViewBox;return!(l[0]>=l[2]||l[1]<=l[3])&&(this.DVBOrigonPoint=[l[0],l[3]],this.DVBWidth=Math.abs(l[2]-l[0]),this.DVBHeight=Math.abs(l[1]-l[3]),this.DVBCenterPoint=[this.DVBOrigonPoint[0]+this.DVBWidth/2,this.DVBOrigonPoint[1]+this.DVBHeight/2],this.origonPointOffset=[this.DVBOrigonPoint[0]-a[0],this.DVBOrigonPoint[1]-a[1]],!0)}},{key:"resetLocation",value:function(e){e&&(this.lonlat=e);var t=this.getLocalXY(this.lonlat);t[0]+=this.XOffset,t[1]+=this.YOffset,this.location=t;var r=this.width,n=this.height,o=this.location;return this.chartBounds=new N(o[0]-r/2,o[1]+n/2,o[0]+r/2,o[1]-n/2),this.resetLinearGradient(),o}},{key:"resetLinearGradient",value:function(){}},{key:"shapesConvertToRelativeCoordinate",value:function(){for(var e=this.shapes,t=this.location,r=0,n=e.length;r<n;r++){e[r].refOriginalPosition=t;var o=e[r].style;for(var i in o)switch(i){case"pointList":for(var a=o[i],s=0,u=a.length;s<u;s++)a[s][0]-=t[0],a[s][1]-=t[1];break;case"x":o[i]-=t[0];break;case"y":o[i]-=t[1]}}this.RelativeCoordinate=!0}},{key:"assembleShapes",value:function(){}},{key:"getLocalXY",value:function(e){return this.layer.getLocalXY(e)}}])&&vG(t.prototype,r),n&&vG(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function xG(e){"@babel/helpers - typeof";return(xG="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function SG(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function OG(){return(OG="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=kG(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function PG(e,t){return(PG=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function EG(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=kG(e);if(t){var o=kG(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===xG(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function kG(e){return(kG=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Tr.getDataValues=function(e,t,r){if(!e.attributes)return!1;for(var n=[],o=e.attributes,i=0;i<t.length;i++)for(var a in o)if(a===t[i])try{!isNaN(r)&&r>=0?n.push(parseFloat(o[a].toString()).toFixed(r)):n.push(parseFloat(o[a].toString()))}catch(e){throw new Error("not a number")}return n.length===t.length&&n};var MG=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&PG(e,t)}(i,_G);var t,r,n,o=EG(i);function i(e,t,r,n,a){var s;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(s=o.call(this,e,t,r,n,a)).CLASS_NAME="SuperMap.Feature.Theme.Bar",s}return t=i,(r=[{key:"destroy",value:function(){OG(kG(i.prototype),"destroy",this).call(this)}},{key:"assembleShapes",value:function(){var e={showShadow:!0,shadowBlur:8,shadowColor:"rgba(100,100,100,0.8)",shadowOffsetX:2,shadowOffsetY:2},t=this.setting;if(t.barLinearGradient||(t.barLinearGradient=[["#00FF00","#00CD00"],["#00CCFF","#5E87A2"],["#00FF66","#669985"],["#CCFF00","#94A25E"],["#FF9900","#A2945E"]]),t.dataViewBoxParameter||(void 0===t.useAxis||t.useAxis?t.dataViewBoxParameter=[45,15,15,15]:t.dataViewBoxParameter=[5,5,5,5]),this.initBaseParameter()){var r=this.DVBCodomain;this.DVBUnitValue=(r[1]-r[0])/this.DVBHeight;var n=this.dataViewBox,o=this.dataValues;if(!(o.length<1)){for(var i=0,a=o.length;i<a;i++)if(o[i]<r[0]||o[i]>r[1])return;var s=this.calculateXShapeInfo();if(s){var u=s.xPositions,l=s.width;(void 0===t.useBackground||t.useBackground)&&this.shapes.push(Ya.Background(this.shapeFactory,this.chartBox,t)),(void 0===t.useAxis||t.useAxis)&&(this.shapes=this.shapes.concat(Ya.GraphAxis(this.shapeFactory,n,t,s)));for(var c=0;c<o.length;c++){var f=n[1]-(o[c]-r[0])/this.DVBUnitValue,h=[[u[c]-l/2,n[1]-1],[u[c]+l/2,n[1]-1],[u[c]+l/2,f],[u[c]-l/2,f]],p=new pi(h);if(void 0===t.showShadow||t.showShadow){if(t.barShadowStyle){var d=t.barShadowStyle;d.shadowBlur&&(e.shadowBlur=d.shadowBlur),d.shadowColor&&(e.shadowColor=d.shadowColor),d.shadowOffsetX&&(e.shadowOffsetX=d.shadowOffsetX),d.shadowOffsetY&&(e.shadowOffsetY=d.shadowOffsetY)}p.style={},j.copyAttributesWithClip(p.style,e)}p.refDataID=this.data.id,p.dataInfo={field:this.fields[c],value:o[c]},void 0!==t.barHoverAble&&(p.hoverable=t.barHoverAble),void 0!==t.barClickAble&&(p.clickable=t.barClickAble),this.shapes.push(this.shapeFactory.createShape(p))}this.shapesConvertToRelativeCoordinate()}}}}},{key:"calculateXShapeInfo",value:function(){var e,t=this.dataViewBox,r=this.setting,n=this.dataValues.length;if(n<1)return null;var o=[],i=0,a=this.DVBWidth;if(r.xShapeBlank&&r.xShapeBlank.length&&3==r.xShapeBlank.length){var s=a-((e=r.xShapeBlank)[0]+e[2]+(n-1)*e[1]);if(s<=n)return null;i=s/n}else e=[i=a/(2*n+1),i,i];for(var u=0,l=0;l<n;l++)0==l?u=e[0]+i/2:u+=i+e[1],o.push(t[0]+u);return{xPositions:o,width:i}}},{key:"resetLinearGradient",value:function(){if(this.RelativeCoordinate)for(var e=this.shapes.length,t=this.setting.barLinearGradient,r=-1,n=0;n<e;n++){var o=this.shapes[n];if("SuperMap.LevelRenderer.Shape.SmicPolygon"===o.CLASS_NAME){var i=o.style,a=this.location[0]+i.pointList[0][0],s=this.location[0]+i.pointList[1][0];++r>=t.length&&(r%=t.length);var u=t[r][0],l=t[r][1],c=(new Hr).getLinearGradient(a,0,s,0,[[0,u],[1,l]]);o.style.color=c}}}}])&&SG(t.prototype,r),n&&SG(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function CG(e){"@babel/helpers - typeof";return(CG="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function jG(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function TG(){return(TG="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=RG(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function AG(e,t){return(AG=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function IG(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=RG(e);if(t){var o=RG(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===CG(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function RG(e){return(RG=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var LG=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&AG(e,t)}(i,_G);var t,r,n,o=IG(i);function i(e,t,r,n,a){var s;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(s=o.call(this,e,t,r,n,a)).CLASS_NAME="SuperMap.Feature.Theme.Bar3D",s}return t=i,(r=[{key:"destroy",value:function(){TG(RG(i.prototype),"destroy",this).call(this)}},{key:"assembleShapes",value:function(){var e=this.setting;if(e.dataViewBoxParameter||(void 0===e.useAxis||e.useAxis?e.dataViewBoxParameter=[45,25,20,20]:e.dataViewBoxParameter=[5,5,5,5]),e.axisUseArrow=void 0===e.axisUseArrow||e.axisUseArrow,e.axisXLabelsOffset=void 0!==e.axisXLabelsOffset?e.axisXLabelsOffset:[-10,10],this.initBaseParameter()){var t=this.DVBCodomain;this.DVBUnitValue=(t[1]-t[0])/this.DVBHeight;var r=this.dataViewBox,n=this.dataValues;if(!(n.length<1)){for(var o=0,i=n.length;o<i;o++)if(n[o]<t[0]||n[o]>t[1])return;var a=this.calculateXShapeInfo();if(a){var s=a.xPositions,u=a.width;(void 0===e.useBackground||e.useBackground)&&this.shapes.push(Ya.Background(this.shapeFactory,this.chartBox,e)),(!e.axis3DParameter||isNaN(e.axis3DParameter)||e.axis3DParameter<15)&&(e.axis3DParameter=20),(void 0===e.useAxis||e.useAxis)&&(this.shapes=this.shapes.concat(Ya.GraphAxis(this.shapeFactory,r,e,a)));for(var l=e.bar3DParameter&&!isNaN(e.bar3DParameter)?e.bar3DParameter:10,c=0;c<n.length;c++){var f=r[1]-(n[c]-t[0])/this.DVBUnitValue,h=s[c]-u/2,p=s[c]+u/2,d=[[h,f],[p,f],[p-l,f+l],[h-l,f+l]],y=[[p,f],[p-l,f+l],[p-l,r[1]+l],[p,r[1]]],v=[[h-l,r[1]+l],[p-l,r[1]+l],[p-l,f+l],[h-l,f+l]];l<=0&&(v=[[h,r[1]],[p,r[1]],[p,f],[h,f]]);var g=new pi(d),m=new pi(y),b=new pi(v);e.barSideStyle=e.barSideStyle?e.barSideStyle:e.barFaceStyle,e.barSideStyleByFields=e.barSideStyleByFields?e.barSideStyleByFields:e.barFaceStyleByFields,e.barSideStyleByCodomain=e.barSideStyleByCodomain?e.barSideStyleByCodomain:e.barFaceStyleByCodomain,e.barTopStyle=e.barTopStyle?e.barTopStyle:e.barFaceStyle,e.barTopStyleByFields=e.barTopStyleByFields?e.barTopStyleByFields:e.barFaceStyleByFields,e.barTopStyleByCodomain=e.barTopStyleByCodomain?e.barTopStyleByCodomain:e.barFaceStyleByCodomain,b.style=Ya.ShapeStyleTool({stroke:!0,strokeColor:"#ffffff",fillColor:"#ee9900"},e.barFaceStyle,e.barFaceStyleByFields,e.barFaceStyleByCodomain,c,n[c]),m.style=Ya.ShapeStyleTool({stroke:!0,strokeColor:"#ffffff",fillColor:"#ee9900"},e.barSideStyle,e.barSideStyleByFields,e.barSideStyleByCodomain,c,n[c]),g.style=Ya.ShapeStyleTool({stroke:!0,strokeColor:"#ffffff",fillColor:"#ee9900"},e.barTopStyle,e.barTopStyleByFields,e.barTopStyleByCodomain,c,n[c]),e.barSideHoverStyle=e.barSideHoverStyle?e.barSideHoverStyle:e.barFaceHoverStyle,e.barTopHoverStyle=e.barTopHoverStyle?e.barTopHoverStyle:e.barFaceHoverStyle,b.highlightStyle=Ya.ShapeStyleTool({stroke:!0},e.barFaceHoverStyle),m.highlightStyle=Ya.ShapeStyleTool({stroke:!0},e.barSideHoverStyle),g.highlightStyle=Ya.ShapeStyleTool({stroke:!0},e.barTopHoverStyle),g.refDataID=m.refDataID=b.refDataID=this.data.id,g.isHoverByRefDataID=m.isHoverByRefDataID=b.isHoverByRefDataID=!0,g.refDataHoverGroup=m.refDataHoverGroup=b.refDataHoverGroup=j.createUniqueID("lr_shg"),g.dataInfo=m.dataInfo=b.dataInfo={field:this.fields[c],value:n[c]},void 0!==e.barHoverAble&&(g.hoverable=m.hoverable=b.hoverable=e.barHoverAble),void 0!==e.barClickAble&&(g.clickable=m.clickable=b.clickable=e.barClickAble),this.shapes.push(this.shapeFactory.createShape(m)),this.shapes.push(this.shapeFactory.createShape(g)),this.shapes.push(this.shapeFactory.createShape(b))}this.shapesConvertToRelativeCoordinate()}}}}},{key:"calculateXShapeInfo",value:function(){var e,t=this.dataViewBox,r=this.setting,n=this.dataValues.length;if(n<1)return null;var o=[],i=0,a=this.DVBWidth;if(r.xShapeBlank&&r.xShapeBlank.length&&3==r.xShapeBlank.length){var s=a-((e=r.xShapeBlank)[0]+e[2]+(n-1)*e[1]);if(s<=n)return null;i=s/n}else e=[i=a/(2*n+1),i,i];for(var u=0,l=0;l<n;l++)0==l?u=e[0]+i/2:u+=i+e[1],o.push(t[0]+u);return{xPositions:o,width:i}}}])&&jG(t.prototype,r),n&&jG(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function NG(e){"@babel/helpers - typeof";return(NG="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function DG(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function BG(){return(BG="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=zG(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function FG(e,t){return(FG=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function GG(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=zG(e);if(t){var o=zG(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===NG(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function zG(e){return(zG=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var UG=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&FG(e,t)}(i,_G);var t,r,n,o=GG(i);function i(e,t,r,n,a,s){var u;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(u=o.call(this,e,t,r,n,a,s)).setting=null,n&&n.codomain&&(u.setting=n,u.DVBCodomain=u.setting.codomain),u.CLASS_NAME="SuperMap.Feature.Theme.RankSymbol",u}return t=i,(r=[{key:"destroy",value:function(){this.setting=null,BG(zG(i.prototype),"destroy",this).call(this)}},{key:"initBaseParameter",value:function(){if(!this.setting)return!1;var e=this.setting;e.XOffset&&(this.XOffset=e.XOffset),e.YOffset&&(this.YOffset=e.YOffset),this.XOffset=e.XOffset?e.XOffset:0,this.YOffset=e.YOffset?e.YOffset:0,this.origonPoint=[],this.chartBox=[],this.dataViewBox=[],this.DVBParameter=e.dataViewBoxParameter?e.dataViewBoxParameter:[0,0,0,0],this.DVBOrigonPoint=[],this.DVBCenterPoint=[],this.origonPointOffset=[],this.resetLocation();var t=this.width,r=this.height,n=this.location;this.origonPoint=[n[0]-t/2,n[1]-r/2];var o=this.origonPoint;this.chartBox=[o[0],o[1]+r,o[0]+t,o[1]];var i=this.chartBox,a=this.DVBParameter;this.dataViewBox=[i[0]+a[0],i[1]-a[1],i[2]-a[2],i[3]+a[3]];var s=this.dataViewBox;return!(s[0]>=s[2]||s[1]<=s[3])&&(this.DVBOrigonPoint=[s[0],s[3]],this.DVBWidth=Math.abs(s[2]-s[0]),this.DVBHeight=Math.abs(s[1]-s[3]),this.DVBCenterPoint=[this.DVBOrigonPoint[0]+this.DVBWidth/2,this.DVBOrigonPoint[1]+this.DVBHeight/2],this.origonPointOffset=[this.DVBOrigonPoint[0]-o[0],this.DVBOrigonPoint[1]-o[1]],!0)}}])&&DG(t.prototype,r),n&&DG(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function VG(e){"@babel/helpers - typeof";return(VG="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function WG(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function YG(){return(YG="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=qG(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function HG(e,t){return(HG=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function XG(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=qG(e);if(t){var o=qG(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===VG(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function qG(e){return(qG=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var JG=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&HG(e,t)}(i,UG);var t,r,n,o=XG(i);function i(e,t,r,n,a){var s;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(s=o.call(this,e,t,r,n,a)).CLASS_NAME="SuperMap.Feature.Theme.Circle",s}return t=i,(r=[{key:"destroy",value:function(){YG(qG(i.prototype),"destroy",this).call(this)}},{key:"assembleShapes",value:function(){if(!this.setting)return!1;var e=this.setting;if(!e.codomain)return!1;var t=void 0===e.decimalNumber||isNaN(e.decimalNumber)?-1:e.decimalNumber,r=Tr.getDataValues(this.data,this.fields,t);this.dataValues=r||[];var n=this.dataValues;e.maxR||(e.maxR=100),e.minR||(e.minR=0);var o=this.DVBCodomain;o&&o[1]-o[0]>0?this.DVBUnitValue=e.maxR/(o[1]-o[0]):this.DVBUnitValue=e.maxR;var i=this.DVBUnitValue,a=n[0]*i+e.minR;if(this.width=2*a,this.height=2*a,this.initBaseParameter()&&(!o||!(n[0]<o[0]||n[0]>o[1]))){var s=this.DVBCenterPoint,u=new qi(s[0],s[1],a);u.style=Ya.ShapeStyleTool(null,e.circleStyle,null,null,0),void 0!==e.fillColor?u.style.fillColor=e.fillColor:u.style.fillColor="#ff9277",u.highlightStyle=Ya.ShapeStyleTool(null,e.circleHoverStyle),void 0!==e.circleHoverAble&&(u.hoverable=e.circleHoverAble),void 0!==e.circleClickAble&&(u.clickable=e.circleClickAble),u.refDataID=this.data.id,u.dataInfo={field:this.fields[0],r:a,value:n[0]},this.shapes.push(this.shapeFactory.createShape(u)),this.shapesConvertToRelativeCoordinate()}}}])&&WG(t.prototype,r),n&&WG(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function ZG(e){"@babel/helpers - typeof";return(ZG="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function KG(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function QG(){return(QG="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=tz(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function $G(e,t){return($G=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function ez(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=tz(e);if(t){var o=tz(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===ZG(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function tz(e){return(tz=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var rz=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$G(e,t)}(i,_G);var t,r,n,o=ez(i);function i(e,t,r,n,a,s){var u;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(u=o.call(this,e,t,r,n,a,s)).CLASS_NAME="SuperMap.Feature.Theme.Line",u}return t=i,(r=[{key:"destroy",value:function(){QG(tz(i.prototype),"destroy",this).call(this)}},{key:"assembleShapes",value:function(){var e=this.setting;if(e.dataViewBoxParameter||(void 0===e.useAxis||e.useAxis?e.dataViewBoxParameter=[45,15,15,15]:e.dataViewBoxParameter=[5,5,5,5]),this.initBaseParameter()){var t=this.dataViewBox,r=this.DVBCodomain;this.DVBUnitValue=(r[1]-r[0])/this.DVBHeight;var n=this.DVBUnitValue,o=this.dataValues;if(!(o.length<1)){var i=this.calculateXShapeInfo();if(i){var a,s,u=i.xPositions;(void 0===e.useBackground||e.useBackground)&&this.shapes.push(Ya.Background(this.shapeFactory,this.chartBox,e)),this.shapes=this.shapes.concat(Ya.GraphAxis(this.shapeFactory,t,e,i));for(var l=[],c=[],f=0,h=o.length;f<h;f++){if(o[f]<r[0]||o[f]>r[1])return null;a=u[f],s=t[1]-(o[f]-r[0])/n;var p=new $o(a,s);p.style=Ya.ShapeStyleTool({fillColor:"#ee9900"},e.pointStyle,e.pointStyleByFields,e.pointStyleByCodomain,f,o[f]),p.highlightStyle=Ya.ShapeStyleTool(null,e.pointHoverStyle),void 0!==e.pointHoverAble&&(p.hoverable=e.pointHoverAble),void 0!==e.pointClickAble&&(p.clickable=e.pointClickAble),p.refDataID=this.data.id,p.dataInfo={field:this.fields[f],value:o[f]},c.push(this.shapeFactory.createShape(p));var d=[a,s];l.push(d)}var y=new ai(l);y.style=Ya.ShapeStyleTool({strokeColor:"#ee9900"},e.lineStyle),y.clickable=!1,y.hoverable=!1;var v=this.shapeFactory.createShape(y);this.shapes.push(v),this.shapes=this.shapes.concat(c),this.shapesConvertToRelativeCoordinate()}}}}},{key:"calculateXShapeInfo",value:function(){var e,t=this.dataViewBox,r=this.setting,n=this.dataValues.length;if(n<1)return null;var o=[],i=this.DVBWidth,a=0;if(r.xShapeBlank&&r.xShapeBlank.length&&2==r.xShapeBlank.length){var s=i-((e=r.xShapeBlank)[0]+e[1]);if(s<=n)return null;a=s/(n-1)}else e=[a=i/(n+1),a,a];for(var u=0,l=0;l<n;l++)0==l?u=e[0]:u+=a,o.push(t[0]+u);return{xPositions:o,width:0}}}])&&KG(t.prototype,r),n&&KG(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function nz(e){"@babel/helpers - typeof";return(nz="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function oz(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function iz(){return(iz="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=uz(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function az(e,t){return(az=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function sz(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=uz(e);if(t){var o=uz(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===nz(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function uz(e){return(uz=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var lz=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&az(e,t)}(i,_G);var t,r,n,o=sz(i);function i(e,t,r,n,a){var s;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(s=o.call(this,e,t,r,n,a)).CLASS_NAME="SuperMap.Feature.Theme.Pie",s}return t=i,(r=[{key:"destroy",value:function(){iz(uz(i.prototype),"destroy",this).call(this)}},{key:"assembleShapes",value:function(){var e=this.setting,t=[{fillColor:"#ff9277"},{fillColor:"#dddd00"},{fillColor:"#ffc877"},{fillColor:"#bbe3ff"},{fillColor:"#d5ffbb"},{fillColor:"#bbbbff"},{fillColor:"#ddb000"},{fillColor:"#b0dd00"},{fillColor:"#e2bbff"},{fillColor:"#ffbbe3"},{fillColor:"#ff7777"},{fillColor:"#ff9900"},{fillColor:"#83dd00"},{fillColor:"#77e3ff"},{fillColor:"#778fff"},{fillColor:"#c877ff"},{fillColor:"#ff77ab"},{fillColor:"#ff6600"},{fillColor:"#aa8800"},{fillColor:"#77c7ff"},{fillColor:"#ad77ff"},{fillColor:"#ff77ff"},{fillColor:"#dd0083"},{fillColor:"#777700"},{fillColor:"#00aa00"},{fillColor:"#0088aa"},{fillColor:"#8400dd"},{fillColor:"#aa0088"},{fillColor:"#dd0000"},{fillColor:"#772e00"}];if(this.initBaseParameter()){e.useBackground&&this.shapes.push(Ya.Background(this.shapeFactory,this.chartBox,e));var r=this.dataValues;if(!(r.length<1)){for(var n=this.DVBCodomain,o=0;o<r.length;o++)if(r[o]<n[0]||r[o]>n[1])return;for(var i=0,a=0;a<r.length;a++)i+=Math.abs(r[a]);this.DVBUnitValue=360/i;for(var s=this.DVBUnitValue,u=this.DVBCenterPoint,l=0,c=0,f=l,h=this.DVBHeight<this.DVBWidth?this.DVBHeight/2:this.DVBWidth/2,p=0;p<r.length;p++){var d=Math.abs(r[p]);(c=0===p?l+d*s:p===d.length-1?f:l+d*s)-l>=360&&(c=359.9999999);var y=new ki(u[0],u[1],h,l,c);if(void 0===e.sectorStyleByFields){var v=p%t.length;y.style=Ya.ShapeStyleTool(null,e.sectorStyle,t,null,v)}else y.style=Ya.ShapeStyleTool(null,e.sectorStyle,e.sectorStyleByFields,e.sectorStyleByCodomain,p,r[p]);y.highlightStyle=Ya.ShapeStyleTool(null,e.sectorHoverStyle),void 0!==e.sectorHoverAble&&(y.hoverable=e.sectorHoverAble),void 0!==e.sectorClickAble&&(y.clickable=e.sectorClickAble),y.refDataID=this.data.id,y.dataInfo={field:this.fields[p],value:r[p]},this.shapes.push(this.shapeFactory.createShape(y)),l=c}this.shapesConvertToRelativeCoordinate()}}}}])&&oz(t.prototype,r),n&&oz(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function cz(e){"@babel/helpers - typeof";return(cz="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fz(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function hz(){return(hz="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=yz(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function pz(e,t){return(pz=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function dz(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=yz(e);if(t){var o=yz(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===cz(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function yz(e){return(yz=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var vz=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&pz(e,t)}(i,_G);var t,r,n,o=dz(i);function i(e,t,r,n,a,s){var u;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(u=o.call(this,e,t,r,n,a,s)).CLASS_NAME="SuperMap.Feature.Theme.Point",u}return t=i,(r=[{key:"destroy",value:function(){hz(yz(i.prototype),"destroy",this).call(this)}},{key:"assembleShapes",value:function(){var e=this.setting;if(e.dataViewBoxParameter||(void 0===e.useAxis||e.useAxis?e.dataViewBoxParameter=[45,15,15,15]:e.dataViewBoxParameter=[5,5,5,5]),this.initBaseParameter()){var t=this.dataViewBox,r=this.DVBCodomain;this.DVBUnitValue=(r[1]-r[0])/this.DVBHeight;var n=this.DVBUnitValue,o=this.dataValues,i=this.calculateXShapeInfo();if(i){var a,s,u=i.xPositions;(void 0===e.useBackground||e.useBackground)&&this.shapes.push(Ya.Background(this.shapeFactory,this.chartBox,e)),this.shapes=this.shapes.concat(Ya.GraphAxis(this.shapeFactory,t,e,i));for(var l=0,c=o.length;l<c;l++){if(o[l]<r[0]||o[l]>r[1])return null;a=u[l],s=t[1]-(o[l]-r[0])/n;var f=new $o(a,s);f.style=Ya.ShapeStyleTool({fillColor:"#ee9900"},e.pointStyle,e.pointStyleByFields,e.pointStyleByCodomain,l,o[l]),f.highlightStyle=Ya.ShapeStyleTool(null,e.pointHoverStyle),void 0!==e.pointHoverAble&&(f.hoverable=e.pointHoverAble),void 0!==e.pointClickAble&&(f.clickable=e.pointClickAble),f.refDataID=this.data.id,f.dataInfo={field:this.fields[l],value:o[l]},this.shapes.push(this.shapeFactory.createShape(f))}this.shapesConvertToRelativeCoordinate()}}}},{key:"calculateXShapeInfo",value:function(){var e,t=this.dataViewBox,r=this.setting,n=this.dataValues.length;if(n<1)return null;var o=[],i=this.DVBWidth,a=0;if(r.xShapeBlank&&r.xShapeBlank.length&&2==r.xShapeBlank.length){var s=i-((e=r.xShapeBlank)[0]+e[1]);if(s<=n)return null;a=s/(n-1)}else e=[a=i/(n+1),a,a];for(var u=0,l=0;l<n;l++)0==l?u=e[0]:u+=a,o.push(t[0]+u);return{xPositions:o,width:0}}}])&&fz(t.prototype,r),n&&fz(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function gz(e){"@babel/helpers - typeof";return(gz="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function mz(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function bz(){return(bz="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=xz(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function wz(e,t){return(wz=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function _z(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=xz(e);if(t){var o=xz(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===gz(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function xz(e){return(xz=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Sz=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&wz(e,t)}(i,_G);var t,r,n,o=_z(i);function i(e,t,r,n,a){var s;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(s=o.call(this,e,t,r,n,a)).CLASS_NAME="SuperMap.Feature.Theme.Ring",s}return t=i,(r=[{key:"destroy",value:function(){bz(xz(i.prototype),"destroy",this).call(this)}},{key:"assembleShapes",value:function(){if(this.initBaseParameter()){var e=[{fillColor:"#ff9277"},{fillColor:"#dddd00"},{fillColor:"#ffc877"},{fillColor:"#bbe3ff"},{fillColor:"#d5ffbb"},{fillColor:"#bbbbff"},{fillColor:"#ddb000"},{fillColor:"#b0dd00"},{fillColor:"#e2bbff"},{fillColor:"#ffbbe3"},{fillColor:"#ff7777"},{fillColor:"#ff9900"},{fillColor:"#83dd00"},{fillColor:"#77e3ff"},{fillColor:"#778fff"},{fillColor:"#c877ff"},{fillColor:"#ff77ab"},{fillColor:"#ff6600"},{fillColor:"#aa8800"},{fillColor:"#77c7ff"},{fillColor:"#ad77ff"},{fillColor:"#ff77ff"},{fillColor:"#dd0083"},{fillColor:"#777700"},{fillColor:"#00aa00"},{fillColor:"#0088aa"},{fillColor:"#8400dd"},{fillColor:"#aa0088"},{fillColor:"#dd0000"},{fillColor:"#772e00"}],t=this.setting;t.useBackground&&this.shapes.push(Ya.Background(this.shapeFactory,this.chartBox,t));var r=this.dataValues;if(!(r.length<1)){for(var n=this.DVBCodomain,o=0;o<r.length;o++)if(r[o]<n[0]||r[o]>n[1])return;for(var i=0,a=0;a<r.length;a++)i+=Math.abs(r[a]);this.DVBUnitValue=360/i;for(var s=this.DVBUnitValue,u=this.DVBCenterPoint,l=0,c=0,f=l,h=this.DVBHeight<this.DVBWidth?this.DVBHeight/2:this.DVBWidth/2,p=t.innerRingRadius>=0&&t.innerRingRadius<h,d=void 0!==t.innerRingRadius&&!isNaN(t.innerRingRadius)&&p?t.innerRingRadius:0,y=0;y<r.length;y++){var v=Math.abs(r[y]);c=0===y?l+v*s:y===v.length-1?f:l+v*s;var g=new ki(u[0],u[1],h,l,c,d);if(void 0===t.sectorStyleByFields){var m=y%e.length;g.style=Ya.ShapeStyleTool(null,t.sectorStyle,e,null,m)}else g.style=Ya.ShapeStyleTool(null,t.sectorStyle,t.sectorStyleByFields,t.sectorStyleByCodomain,y,r[y]);g.highlightStyle=Ya.ShapeStyleTool(null,t.sectorHoverStyle),void 0!==t.sectorHoverAble&&(g.hoverable=t.sectorHoverAble),void 0!==t.sectorClickAble&&(g.clickable=t.sectorClickAble),g.refDataID=this.data.id,g.dataInfo={field:this.fields[y],value:r[y]},this.shapes.push(this.shapeFactory.createShape(g)),l=c}this.shapesConvertToRelativeCoordinate()}}}}])&&mz(t.prototype,r),n&&mz(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();var Oz="EXCEL",Pz="CSV",Ez="GEOJSON",kz="JSON";function Mz(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Cz=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._initView()}var t,r,n;return t=e,(r=[{key:"_initView",value:function(){var e=document.createElement("div");e.hidden=!0,e.setAttribute("class","component-messageboxcontainer component-border-bottom-orange");var t=document.createElement("div");t.setAttribute("class","icon"),this.icon=document.createElement("span"),this.icon.setAttribute("class","supermapol-icons-message-warning"),t.appendChild(this.icon),e.appendChild(t);var r=document.createElement("div");r.setAttribute("class","component-messagebox"),r.innerHTML="",e.appendChild(r),this.messageBox=r;var n=document.createElement("div");n.setAttribute("class","component-messagebox__cancelbtncontainer");var o=document.createElement("button");o.setAttribute("class","component-messagebox__cancelBtn"),o.innerHTML="x",o.onclick=this.closeView.bind(this),n.appendChild(o),e.appendChild(n),this.messageBoxContainer=e,document.body.appendChild(this.messageBoxContainer)}},{key:"closeView",value:function(){this.messageBoxContainer.hidden=!0}},{key:"showView",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"warring";"success"===t?(this.icon.setAttribute("class","supermapol-icons-message-success"),this.messageBoxContainer.setAttribute("class","component-messageboxcontainer component-border-bottom-green")):"failure"===t?(this.icon.setAttribute("class","supermapol-icons-message-failure"),this.messageBoxContainer.setAttribute("class","component-messageboxcontainer component-border-bottom-red")):"warring"===t&&(this.icon.setAttribute("class","supermapol-icons-message-warning"),this.messageBoxContainer.setAttribute("class","component-messageboxcontainer component-border-bottom-orange")),this.messageBox.innerHTML=e,this.messageBoxContainer.hidden=!1}}])&&Mz(t.prototype,r),n&&Mz(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),jz=function(){try{return echarts}catch(e){return{}}}(),Tz=r.n(jz),Az={"en-US":{title_dataFlowService:"Data Flow Service",title_distributedAnalysis:"Distributed Analysis",title_clientComputing:"Client Computing",title_dataServiceQuery:"Data Service Query",title_searchCity:"Search city",title_searchLayer:" Search layer",text_input_value_inputDataFlowUrl:"Please enter the data stream service address such as: ws://{serviceRoot}/{dataFlowName}/dataflow/subscribe",text_displayFeaturesInfo:"Display feature information",text_subscribe:"subscribe",text_cancelSubscribe:"unsubscribe",text_densityAnalysis:"Density Analysis",text_CalculateTheValuePerUnitArea:"Calculate the value per unit area within the neighborhood shape",text_option_selectDataset:"Please select a dataset",text_label_dataset:"Dataset",text_option_simplePointDensityAnalysis:"Simple point density analysis",text_option_nuclearDensityAnalysis:"Nuclear density analysis",text_label_analyticalMethod:"Analytical method",text_option_quadrilateral:"Quadrilateral",text_option_hexagon:"hexagon",text_label_meshType:"Mesh type",text_option_notSet:"Not set",text_label_weightField:"Weight field",text_label_gridSizeInMeters:"Grid size",text_label_searchRadius:"Search radius",text_label_queryRange:"Scope of analysis",text_label_areaUnit:"Area unit",text_option_equidistantSegmentation:"Equidistant segmentation",text_option_logarithm:"Logarithm",text_option_equalCountingSegment:"Equal counting segment",text_option_squareRootSegmentation:"Square root segmentation",text_label_thematicMapSegmentationMode:"Thematic map segmentation mode",text_label_thematicMapSegmentationParameters:"Thematic map segmentation parameters",text_option_greenOrangePurpleGradient:"Green orange purple gradient",text_option_greenOrangeRedGradient:"Green orange red gradient",text_option_rainbowGradient:"Rainbow gradient",text_option_spectralGradient:"Spectral gradient",text_option_terrainGradient:"Terrain gradient",text_label_thematicMapColorGradientMode:"Thematic map color gradient mode",text_label_resultLayerName:"Result layer name",text_chooseFile:"Open File",text_isoline:"Isoline",text_extractDiscreteValue:"Extract discrete value generation curve",text_buffer:"Buffer",text_specifyTheDistance:"Specify the distance to create the surrounding area",text_label_analysisLayer:"Analysis layer",text_label_extractField:"Extract field",text_label_extractedValue:"Extracted value",text_label_distanceAttenuation:"Distance attenuation",text_label_gridSize:"gridSize",text_label_bufferRadius:"Buffer radius",text_label_defaultkilometers:"Default 10 kilometers",text_label_kilometer:"kilometer",text_label_unit:"unit",text_retainOriginal:"Retain original object field",text_mergeBuffer:"Merge buffer",text_label_color:"Color",text_label_buffer:"[Buffer]",text_label_isolines:"[Isolines]",text_label_queryRangeTips:"The default is the full range of input data. Example: -74.050, 40.650, -73.850, 40.850",text_label_queryModel:"Query mode",text_label_IDArrayOfFeatures:"ID array of features",text_label_maxFeatures:"The maximum number of features that can be returned",text_label_bufferDistance:"Buffer distance",text_label_queryRange1:"Query range",text_label_spatialQueryMode:"Spatial query mode",text_label_featureFilter:"Feature filter",text_label_geometricObject:"Geometric object",text_label_queryMode:"Query mode",text_label_searchTips:"Search for city locations or layer features",text_label_chooseSearchLayers:"Select a query layer",text_loadSearchCriteria:"Load search criteria",text_saveSearchCriteria:"Save search criteria",btn_analyze:"Analyze",btn_analyzing:"Analyzing",btn_emptyTheAnalysisLayer:"Empty the analysis layer",btn_cancelAnalysis:"Cancel",btn_query:"Query",btn_querying:"Querying",btn_emptyTheRresultLayer:"Clear all result layers","msg_dataReturnedIsEmpty.":"The request is successful and the data returned by the query is empty.",msg_dataFlowServiceHasBeenSubscribed:"The data stream service has been subscribed to.",msg_inputDataFlowUrlFirst:"Please enter the data stream service address first.",msg_datasetOrMethodUnsupport:"This dataset does not support this analysis type. Please reselect the dataset.",msg_selectDataset:"Please select a data set!",msg_setTheWeightField:"Please set the weight field!",msg_theFieldNotSupportAnalysis:"The field you currently select does not support analysis!",msg_resultIsEmpty:"The result of the analysis is empty!",msg_openFileFail:"Failed to open file!",msg_fileTypeUnsupported:"File format is not supported!",msg_fileSizeExceeded:"File size exceeded! The file size should not exceed 10M!",msg_dataInWrongGeoJSONFormat:"Wrong data format! Non standard GEOJSON format data!",msg_dataInWrongFormat:"Wrong data format! Non standard EXCEL, CSV or GEOJSON format data!",msg_searchKeywords:"Search keywords cannot be empty. Please enter your search criteria.",msg_searchGeocodeField:"Did not match the address matching service data!",msg_cityGeocodeField:"The address matching service of the current city is not configured.",msg_getFeatureField:"No related vector features found!",msg_dataflowservicesubscribed:"The data stream service has been subscribed to.",msg_subscribesucceeded:"The data stream service subscription was successful.",msg_crsunsupport:"Does not support the coordinate system of the current map",msg_tilematrixsetunsupport:"Incoming TileMatrixSet is not supported",msg_jsonResolveFiled:"JSON format parsing failureï¼",msg_requestContentFiled:"Failed to request data through iportal!",msg_getdatafailed:"Failed to get data!"},"zh-CN":{title_dataFlowService:"æ°æ®æµæå¡",title_distributedAnalysis:"åå¸å¼åæ",title_clientComputing:"å®¢æ·ç«¯è®¡ç®",title_dataServiceQuery:"æ°æ®æå¡æ¥è¯¢",title_searchCity:"æç´¢åå¸",title_searchLayer:"æç´¢å¾å±",text_input_value_inputDataFlowUrl:"è¯·è¾å¥æ°æ®æµæå¡å°åå¦:ws://{serviceRoot}/{dataFlowName}/dataflow/subscribe",text_displayFeaturesInfo:"æ¾ç¤ºè¦ç´ ä¿¡æ¯",text_subscribe:"è®¢é",text_cancelSubscribe:"åæ¶è®¢é",text_densityAnalysis:"å¯åº¦åæ",text_CalculateTheValuePerUnitArea:"è®¡ç®ç¹æå®é»åå½¢ç¶åçæ¯åä½é¢ç§¯éå¼",text_option_selectDataset:"è¯·éæ©æ°æ®é",text_label_dataset:"æ°æ®é",text_option_simplePointDensityAnalysis:"ç®åç¹å¯åº¦åæ",text_option_nuclearDensityAnalysis:"æ ¸å¯åº¦åæ",text_label_analyticalMethod:"åææ¹æ³",text_option_quadrilateral:"åè¾¹å½¢",text_option_hexagon:"å­è¾¹å½¢",text_label_meshType:"ç½æ ¼é¢ç±»å",text_option_notSet:"æªè®¾ç½®",text_label_weightField:"æéå­æ®µ",text_label_gridSizeInMeters:"ç½æ ¼å¤§å°",text_label_searchRadius:"æç´¢åå¾",text_label_queryRange:"åæèå´",text_label_areaUnit:"é¢ç§¯åä½",text_option_equidistantSegmentation:"ç­è·ç¦»åæ®µ",text_option_logarithm:"å¯¹æ°",text_option_equalCountingSegment:"ç­è®¡æ°åæ®µ",text_option_squareRootSegmentation:"å¹³æ¹æ ¹åæ®µ",text_label_thematicMapSegmentationMode:"ä¸é¢å¾åæ®µæ¨¡å¼",text_label_thematicMapSegmentationParameters:"ä¸é¢å¾åæ®µåæ°",text_option_greenOrangePurpleGradient:"ç»¿æ©ç´«æ¸å",text_option_greenOrangeRedGradient:"ç»¿æ©çº¢æ¸å",text_option_rainbowGradient:"å½©è¹æ¸å",text_option_spectralGradient:"åè°±æ¸å",text_option_terrainGradient:"å°å½¢æ¸å",text_label_thematicMapColorGradientMode:"ä¸é¢å¾é¢è²æ¸åæ¨¡å¼",text_label_resultLayerName:"ç»æå¾å±åç§°",text_chooseFile:"éæ©æä»¶",text_isoline:"ç­å¼çº¿",text_extractDiscreteValue:"æåç¦»æ£å¼çææ²çº¿",text_buffer:"ç¼å²åº",text_specifyTheDistance:"æå®è·ç¦»åå»ºå¨è¾¹åºå",text_label_analysisLayer:"åæå¾å±",text_label_extractField:"æåå­æ®µ",text_label_extractedValue:"æåå¼",text_label_distanceAttenuation:"è·ç¦»è¡°å",text_label_gridSize:"æ æ ¼å¤§å°",text_label_bufferRadius:"ç¼å²åå¾",text_label_defaultkilometers:"é»è®¤10åç±³",text_option_kilometer:"åç±³",text_label_unit:"åä½",text_retainOriginal:"ä¿çåå¯¹è±¡å­æ®µå±æ§",text_mergeBuffer:"åå¹¶ç¼å²åº",text_label_color:"é¢è²",text_label_buffer:"[ç¼å²åº]",text_label_isolines:"[ç­å¼çº¿]",text_label_queryRangeTips:"é»è®¤ä¸ºè¾å¥æ°æ®çå¨å¹èå´ãèä¾ï¼-74.050,40.650,-73.850,40.850",text_label_IDArrayOfFeatures:"è¦ç´  ID æ°ç»",text_label_maxFeatures:"æå¤å¯è¿åçè¦ç´ æ°é",text_label_bufferDistance:"ç¼å²åºè·ç¦»",text_label_queryRange1:"æ¥è¯¢èå´",text_label_spatialQueryMode:"ç©ºé´æ¥è¯¢æ¨¡å¼",text_label_featureFilter:"è¦ç´ è¿æ»¤å¨",text_label_geometricObject:"å ä½å¯¹è±¡",text_label_queryMode:"æ¥è¯¢æ¨¡å¼",text_label_searchTips:"æç´¢åå¸å°ç¹æå¾å±è¦ç´ ",text_label_chooseSearchLayers:"éæ©æ¥è¯¢å¾å±",text_loadSearchCriteria:"å è½½æç´¢æ¡ä»¶",text_saveSearchCriteria:"ä¿å­æç´¢æ¡ä»¶",btn_analyze:"åæ",btn_analyzing:"åæä¸­",btn_emptyTheAnalysisLayer:"æ¸ç©ºåæå¾å±",btn_cancelAnalysis:"åæ¶",btn_query:"æ¥è¯¢",btn_querying:"æ¥è¯¢ä¸­",btn_emptyTheRresultLayer:"æ¸é¤ææç»æå¾å±",msg_dataFlowServiceHasBeenSubscribed:"å·²è®¢éè¯¥æ°æ®æµæå¡ã",msg_inputDataFlowUrlFirst:"è¯·åè¾å¥æ°æ®æµæå¡å°åã",msg_datasetOrMethodUnsupport:"è¯¥æ°æ®éä¸æ¯ææ¬åæç±»åï¼è¯·éæ°éæ©æ°æ®é",msg_selectDataset:"è¯·éæ©æ°æ®éï¼",msg_setTheWeightField:"è¯·è®¾ç½®æéå­æ®µï¼",msg_theFieldNotSupportAnalysis:"æ¨å½åéæ©çå­æ®µä¸æ¯æåæï¼",msg_resultIsEmpty:"åæçç»æä¸ºç©ºï¼",msg_dataReturnedIsEmpty:"è¯·æ±æåï¼æ¥è¯¢è¿åçæ°æ®ä¸ºç©ºã",msg_openFileFail:"æå¼æä»¶å¤±è´¥ï¼",msg_fileTypeUnsupported:"ä¸æ¯æè¯¥æä»¶æ ¼å¼ï¼",msg_fileSizeExceeded:"æä»¶å¤§å°è¶éï¼æä»¶å¤§å°ä¸å¾è¶è¿ 10Mï¼",msg_dataInWrongGeoJSONFormat:"æ°æ®æ ¼å¼éè¯¯ï¼éæ åç GEOJSON æ ¼å¼æ°æ®ï¼",msg_dataInWrongFormat:"æ°æ®æ ¼å¼éè¯¯ï¼éæ åç EXCEL, CSV æ GEOJSON æ ¼å¼æ°æ®ï¼",msg_searchKeywords:"æç´¢å³é®å­ä¸è½ä¸ºç©ºï¼è¯·è¾å¥æç´¢æ¡ä»¶ã",msg_searchGeocodeField:"æªå¹éå°å°åå¹éæå¡æ°æ®ï¼",msg_cityGeocodeField:"æªéç½®å½ååå¸çå°åå¹éæå¡ã",msg_getFeatureField:"æªæ¥æ¾å°ç¸å³ç¢éè¦ç´ ï¼",msg_dataflowservicesubscribed:"å·²è®¢éè¯¥æ°æ®æµæå¡ã",msg_subscribesucceeded:"æ°æ®æµæå¡è®¢éæåã",msg_crsunsupport:"ä¸æ¯æå½åå°å¾çåæ ç³»",msg_tilematrixsetunsupport:"ä¸æ¯æä¼ å¥çTileMatrixSet",msg_jsonResolveFiled:"jsonæ ¼å¼è§£æå¤±è´¥ï¼",msg_requestContentFiled:"éè¿iportalè¯·æ±æ°æ®å¤±è´¥ï¼",msg_getdatafailed:"è·åæ°æ®å¤±è´¥ï¼"},code:null,defaultCode:"en-US",getCode:function(){return Az.code||Az.setCode(),Az.code},setCode:function(){var e=this.getLanguageFromCookie();e||(e=Az.defaultCode,e="Netscape"===navigator.appName?navigator.language:navigator.browserLanguage),0===e.indexOf("zh")&&(e="zh-CN"),0===e.indexOf("en")&&(e="en-US"),Az.code=e},getLanguageFromCookie:function(){for(var e=document.cookie.split(";"),t=0;t<e.length;t++){for(var r=e[t];" "===r.charAt(0);)r=r.substring(1);if(-1!==r.indexOf("language="))return r.substring("language=".length,r.length)}return""},i18n:function(e){var t=Az[Az.getCode()],r=t&&t[e];return r||(r=e),r}},Iz=function(){try{return XLSX}catch(e){return{}}}(),Rz={rABS:"undefined"!=typeof FileReader&&FileReader.prototype&&FileReader.prototype.readAsBinaryString,rABF:"undefined"!=typeof FileReader&&FileReader.prototype&&FileReader.prototype.readAsArrayBuffer,rAT:"undefined"!=typeof FileReader&&FileReader.prototype&&FileReader.prototype.readAsText,readFile:function(e,t,r,n,o){kz===e||Ez===e?this.readTextFile(t,r,n,o):Oz!==e&&Pz!==e||this.readXLSXFile(t,r,n,o)},readTextFile:function(e,t,r,n){var o=new FileReader;o.onloadend=function(e){t&&t.call(n,e.target.result)},o.onerror=function(e){r&&r.call(n,e)},this.rAT?o.readAsText(e.file,"utf-8"):o.readAsBinaryString(e.file)},readXLSXFile:function(e,t,r,n){var o=new FileReader;o.onloadend=function(e){var o=new Uint8Array(e.target.result),i=Iz.read(o,{type:"array"});try{if(i&&i.SheetNames&&i.SheetNames.length>0){var a=i.SheetNames[0],s=Iz.utils.sheet_to_csv(i.Sheets[a]);t&&t.call(n,s)}}catch(e){r&&r.call(n,e)}},o.onerror=function(e){r&&r.call(n,e)},this.rABF&&o.readAsArrayBuffer(e.file)},processDataToGeoJson:function(e,t,r,n,o){var i=null;if("EXCEL"===e||"CSV"===e)i=this.processExcelDataToGeoJson(t),r&&r.call(o,i);else if("JSON"===e||"GEOJSON"===e){var a=t;"string"==typeof a&&(a=JSON.parse(a)),"ISERVER"===a.type?i=a.data.recordsets[0].features:"FeatureCollection"===a.type?i=a:n&&n.call(o,Az.i18n("msg_dataInWrongGeoJSONFormat")),r&&r.call(o,i)}else n&&n.call(o,Az.i18n("msg_dataInWrongFormat"))},processExcelDataToGeoJson:function(e){for(var t=this.string2Csv(e),r=t.colTitles,n=-1,o=-1,i=0,a=r.length;i<a;i++)this.isXField(r[i])&&(n=i),this.isYField(r[i])&&(o=i);for(var s=[],u=0,l=t.rows.length;u<l;u++){var c=t.rows[u],f=Number(c[n]),h=Number(c[o]),p={};for(var d in t.colTitles){p[t.colTitles[d]]=t.rows[u][d]}var y={type:"Feature",geometry:{type:"Point",coordinates:[f,h]},properties:p};s.push(y)}return s},isXField:function(e){var t=e.toLowerCase();return"x"===t||"smx"===t||"jd"===t||"ç»åº¦"===t||"ä¸ç»"===t||"longitude"===t||"lot"===t||"lon"===t||"lng"===t||"xåæ "===t},isYField:function(e){var t=e.toLowerCase();return"y"===t||"smy"===t||"wd"===t||"çº¬åº¦"===t||"åçº¬"===t||"latitude"===t||"lat"===t||"yåæ "===t},string2Csv:function(e,t){var r=e.split("\n"),n={};n.colTitles=t?[]:r[0].split(","),n.rows=[];for(var o=t?0:1;o<r.length;o++)r[o]&&n.rows.push(r[o].split(","));return n}};function Lz(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Nz=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.datasets=t,this.EVENT_TYPES=["getdatafailed"],this.events=new Dn(this,null,this.EVENT_TYPES)}var t,r,n;return t=e,(r=[{key:"getDatasetInfo",value:function(e){var t=this.datasets.url,r=this;Al.get(t).then(function(e){return e.json()}).then(function(t){if(t.datasetInfo){var n=t.datasetInfo;r.datasetsInfo={dataSourceName:n.dataSourceName,datasetName:n.name,mapName:t.name},e({result:r.datasetsInfo})}}).catch(function(e){console.log(e),r._fireFailedEvent(e)})}},{key:"getDataFeatures",value:function(e,t){var r,n,o=e.result,i={name:o.datasetName+"@"+o.dataSourceName};Object.assign(i,this.datasets.queryInfo),r=new Iy(i),n=new ov({queryParameter:r,datasetNames:[o.dataSourceName+":"+o.datasetName],fromIndex:0,toIndex:1e5}),new fv(o.dataUrl,{eventListeners:{processCompleted:t,processFailed:function(){}}}).processAsync(n)}},{key:"getLayerFeatures",value:function(e,t){var r,n,o=e.result,i={name:o.mapName};Object.assign(i,this.datasets.queryInfo),r=new Iy(i),n=new jM({queryParams:[r],expectCount:1e5}),new DM(o.dataUrl,{eventListeners:{processCompleted:t,processFailed:function(){}}}).processAsync(n)}},{key:"getDataInfoByIptl",value:function(e){this.getServiceInfo(this.datasets.url,e)}},{key:"getServiceInfo",value:function(e,t){var r=this;Al.get(e,null,{withCredentials:this.datasets.withCredentials}).then(function(e){return e.json()}).then(function(n){var o;!1!==n.succeed?n.dataItemServices&&n.dataItemServices.length>0?(n.dataItemServices.forEach(function(n){if("RESTDATA"===n.serviceType&&"PUBLISHED"===n.serviceStatus)o=n;else{if("RESTMAP"!==n.serviceType||"PUBLISHED"!==n.serviceStatus)return void r.getDatafromContent(e,t);o=n}}),o&&r.getDatafromRest(o.serviceType,o.address,t)):r.getDatafromContent(e,t):r._fireFailedEvent(n)}).catch(function(e){console.log(e),r._fireFailedEvent(e)})}},{key:"getDatafromContent",value:function(e,t){var r=this,n={result:{}},o=this;e+="/content.json?pageSize=9999999&currentPage=1",Al.get(e,null,{withCredentials:this.datasets.withCredentials}).then(function(e){return e.json()}).then(function(e){if(!1!==e.succeed){if(e.type){if("JSON"===e.type||"GEOJSON"===e.type){if(e.content=JSON.parse(e.content.trim()),!e.content.features)return void console.log(Az.i18n("msg_jsonResolveFiled"));var i=r._formatGeoJSON(e.content);n.result.features={type:e.content.type,features:i}}else if("EXCEL"===e.type||"CSV"===e.type){var a=r._excelData2Feature(e.content);n.result.features={type:"FeatureCollection",features:a}}t(n,"content")}}else o._fireFailedEvent(e)},this).catch(function(e){console.log(e),o._fireFailedEvent(e)})}},{key:"getDatafromRest",value:function(e,t,r){var n=this,o=this.datasets.withCredentials;if("RESTDATA"===e){var i,a,s="".concat(t,"/data/datasources");Al.get(s,null,{withCredentials:o}).then(function(e){return e.json()}).then(function(e){i=e.datasourceNames[0],s="".concat(t,"/data/datasources/").concat(i,"/datasets"),Al.get(s,null,{withCredentials:o}).then(function(e){return e.json()}).then(function(e){return a=e.datasetNames[0],n.getDatafromRestData("".concat(t,"/data"),[i+":"+a],r),[i+":"+a]}).catch(function(e){n._fireFailedEvent(e)})}).catch(function(e){n._fireFailedEvent(e)})}else{var u,l,c,f="".concat(t,"/maps");Al.get(f,null,{withCredentials:o}).then(function(e){return e.json()}).then(function(e){u=e[0].name,c=e[0].path,f=f="".concat(t,"/maps/").concat(u,"/layers"),Al.get(f,null,{withCredentials:o}).then(function(e){return e.json()}).then(function(e){return l=e[0].subLayers.layers[0].caption,n.getDatafromRestMap(l,c,r),l}).catch(function(e){n._fireFailedEvent(e)})}).catch(function(e){n._fireFailedEvent(e)})}}},{key:"getDatafromRestData",value:function(e,t,r){var n=this;this.datasets.queryInfo.attributeFilter=this.datasets.queryInfo.attributeFilter||"SmID>0",this._getFeatureBySQL(e,t,this.datasets.queryInfo,function(e){r(e,"RESTDATA")},function(e){console.log(e),n._fireFailedEvent(e)})}},{key:"getDatafromRestMap",value:function(e,t,r){var n=this;this.datasets.queryInfo.attributeFilter=this.datasets.queryInfo.attributeFilter||"smid=1",this._queryFeatureBySQL(t,e,this.datasets.queryInfo,null,null,function(e){r(e,"RESTMAP")},function(e){console.log(e),n._fireFailedEvent(e)})}},{key:"_getFeatureBySQL",value:function(e,t,r,n,o){var i,a,s={name:t.join().replace(":","@")};Object.assign(s,r),i=new Iy(s),a=new ov({queryParameter:i,datasetNames:t,fromIndex:0,toIndex:1e5,returnContent:!0}),new fv(e,{eventListeners:{processCompleted:function(e){n&&n(e)},processFailed:function(e){o&&o(e)}}}).processAsync(a)}},{key:"_queryFeatureBySQL",value:function(e,t,r,n,o,i,a,s,u,l){var c,f,h={name:t};Object.assign(h,r),c=new Iy(h),n&&(c.fields=n);var p={queryParams:[c]};l&&(p.queryOption=Ct.ATTRIBUTE),s&&(p.startRecord=s),u&&(p.expectCount=u),o&&(p.prjCoordSys={epsgCode:o}),f=new jM(p),this._queryBySQL(e,f,function(e){"processCompleted"===e.type?i(e):a(e)})}},{key:"_queryBySQL",value:function(e,t,r,n){new DM(e,{eventListeners:{scope:this,processCompleted:r,processFailed:r},format:this._processFormat(n)}).processAsync(t)}},{key:"_processFormat",value:function(e){return e||Et.GEOJSON}},{key:"_formatGeoJSON",value:function(e){var t=e.features;return t.forEach(function(e,t){e.properties.index=t}),t}},{key:"_excelData2Feature",value:function(e){for(var t=e.colTitles,r=-1,n=-1,o=0,i=t.length;o<i;o++)Rz.isXField(t[o])&&(r=o),Rz.isYField(t[o])&&(n=o);for(var a=[],s=0,u=e.rows.length;s<u;s++){var l=e.rows[s],c=Number(l[r]),f=Number(l[n]),h={};for(var p in e.colTitles){h[e.colTitles[p]]=e.rows[s][p]}h.index=s+"";var d={type:"Feature",geometry:{type:"Point",coordinates:[c,f]},properties:h};a.push(d)}return a}},{key:"_fireFailedEvent",value:function(e){var t=e?{error:e,message:Az.i18n("msg_getdatafailed")}:{message:Az.i18n("msg_getdatafailed")};this.events.triggerEvent("getdatafailed",t)}}])&&Lz(t.prototype,r),n&&Lz(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Dz(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return Bz(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Bz(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function Bz(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Fz(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Gz=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.datasets=t.datasets,this.xField=[],this.yField=[],this.grid={top:"50px",bottom:"50px",left:"50px",right:"60px"},this.chartType=t.type||"bar",this._initXYField(t.chartOptions),this.EVENT_TYPES=["getdatafailed"],this.events=new Dn(this,null,this.EVENT_TYPES)}var t,r,n;return t=e,(r=[{key:"_initXYField",value:function(e){var t=this;e&&e.length>0&&e.forEach(function(e){e.xAxis&&t.xField.push({field:e.xAxis.field,name:e.xAxis.name}),e.yAxis&&t.yField.push({field:e.yAxis.field,name:e.yAxis.name})})}},{key:"getDatasetInfo",value:function(e){var t=this;this.createChart=e,this.datasets&&this._checkUrl(this.datasets.url)&&(this.chartModel=new Nz(this.datasets),"iServer"===this.datasets.type?this.chartModel.getDatasetInfo(this._getDatasetInfoSuccess.bind(this)):"iPortal"===this.datasets.type&&this.chartModel.getDataInfoByIptl(this._getDataInfoSuccess.bind(this)),this.chartModel.events.on({getdatafailed:function(e){t.events.triggerEvent("getdatafailed",e)}}))}},{key:"_getDatasetInfoSuccess",value:function(e){var t=this.datasets.url,r=t.indexOf("rest");if(r>0){var n=t.indexOf("/",r+5),o=t.substring(r+5,n),i=t.substring(0,r+4)+"/data";if("maps"===o){var a=t.indexOf("/",n+1),s=t.substring(n+1,a);i=t.substring(0,r+4)+"/maps/"+s,e.result.dataUrl=i,this._getLayerFeatures(e)}else"data"===o&&(e.result.dataUrl=i,this._getDataFeatures(e))}}},{key:"_getDataInfoSuccess",value:function(e,t){"RESTMAP"===t?this._getChartDatasFromLayer(e):this._getChartDatas(e)}},{key:"_getDataFeatures",value:function(e){this.chartModel.getDataFeatures(e,this._getChartDatas.bind(this))}},{key:"_getLayerFeatures",value:function(e){this.chartModel.getLayerFeatures(e,this._getChartDatasFromLayer.bind(this))}},{key:"_getChartDatas",value:function(e){if(e){this.features=e.result.features;var t=this.features.features,r={};if(t.length){var n=t[0],o=[],i=[];for(var a in n.properties)o.push(a),i.push(this._getDataType(n.properties[a]));for(var s in r={features:t,fieldCaptions:o,fieldTypes:i,fieldValues:[]},i){var u=[];for(var l in t){var c=t[l],f=r.fieldCaptions[s],h=c.properties[f];u.push(h)}r.fieldValues.push(u)}this.createChart(r)}}}},{key:"_getChartDatasFromLayer",value:function(e){if(e.result.recordsets){var t=e.result.recordsets[0],r=t.features.features;this.features=t.features;var n={};if(r.length){for(var o in(n={features:t.features,fieldCaptions:t.fieldCaptions,fieldTypes:t.fieldTypes,fieldValues:[]}).fieldCaptions){var i=[];for(var a in r){var s=r[a],u=n.fieldCaptions[o],l=s.properties[u];i.push(l)}n.fieldValues.push(i)}this.createChart(n)}}}},{key:"_createChartOptions",value:function(e){return this.calculatedData=this._createChartDatas(e),this.updateChartOptions(this.chartType)}},{key:"changeType",value:function(e){if(e!==this.chartType)return this.chartType=e,this.updateChartOptions(this.chartType)}},{key:"updateData",value:function(e,t,r){this.updateChart=r,this.xField=[],this.yField=[],this._initXYField(t),e.type=e.type||"iServer",e.withCredentials=e.withCredentials||!1,this.datasets=e,this.getDatasetInfo(this._updateDataSuccess.bind(this))}},{key:"_updateDataSuccess",value:function(e){var t=this._createChartOptions(e);this.updateChart(t)}},{key:"updateChartOptions",value:function(e,t){if(this.calculatedData){var r=this.grid,n=this._createChartSeries(this.calculatedData,e),o=[];for(var i in this.calculatedData.XData)o.push({value:this.calculatedData.XData[i].fieldsData});var a={type:"category",name:this.xField[0].name||"X",data:o,nameTextStyle:{color:"#fff",fontSize:14},splitLine:{show:!1},axisLine:{lineStyle:{color:"#eee"}}},s={type:"value",name:this.yFieldName||"Y",data:{},nameTextStyle:{color:"#fff",fontSize:14},splitLine:{show:!1},axisLine:{lineStyle:{color:"#eee"}}},u={formatter:"{b0}: {c0}"},l="#404a59";return t&&(t.grid&&(r=t.grid),t.tooltip&&(u=t.tooltip),t.backgroundColor&&(l=t.backgroundColor)),{backgroundColor:l,grid:r,series:n,xAxis:a,yAxis:s,tooltip:u}}}},{key:"_createChartDatas",value:function(e){var t=0,r=[],n=e.fieldCaptions,o=this;n.forEach(function(e,r){o.xField[0]&&e===o.xField[0].field&&(t=r)}),this.yFieldName="",this.yField.forEach(function(e,t){0!==t&&(o.yFieldName=o.yFieldName+","),o.yFieldName=o.yFieldName+e.name,n.forEach(function(t,n){t===e.field&&r.push(n)})});var i=this._getAttrData(e,t),a=[];if(r.length>0)r.forEach(function(t){var r=[];for(var n in e.fieldValues[t])r.push({value:e.fieldValues[t][n]});a.push(r)});else{for(var s=[],u=[],l=i.length,c=0;c<l;c++){for(var f=!1,h=0,p=u.length;h<p;h++)if(i[c].fieldsData===u[h].fieldsData){s[h].value++,u[h].recordIndexs.push(c),f=!0;break}f||i[c].fieldsData&&(u.push({fieldsData:i[c].fieldsData,recordIndexs:[c]}),s.push({value:1}))}i=u,a=[s]}return{XData:i,YData:a}}},{key:"_getAttrData",value:function(e,t){0===t&&(this.xField=[{field:e.fieldCaptions[t],name:e.fieldCaptions[t]}]);for(var r=[],n=0,o=e.fieldValues[t].length;n<o;n++){var i=e.fieldValues[t][n];r.push({recordIndexs:n,fieldsData:i})}return r}},{key:"_createChartSeries",value:function(e,t){var r=[];return e.YData.forEach(function(e){var n,o=0,i=[],a=Dz(e);try{for(a.s();!(n=a.n()).done;){o=n.value.value,i.push({value:o})}}catch(e){a.e(e)}finally{a.f()}var s={type:t,data:i,name:"y"};r.push(s)}),r}},{key:"_isDate",value:function(e){return/((^((1[8-9]\d{2})|([2-9]\d{3}))([-\/\._])(10|12|0?[13578])([-\/\._])(3[01]|[12][0-9]|0?[1-9])$)|(^((1[8-9]\d{2})|([2-9]\d{3}))([-\/\._])(11|0?[469])([-\/\._])(30|[12][0-9]|0?[1-9])$)|(^((1[8-9]\d{2})|([2-9]\d{3}))([-\/\._])(0?2)([-\/\._])(2[0-8]|1[0-9]|0?[1-9])$)|(^([2468][048]00)([-\/\._])(0?2)([-\/\._])(29)$)|(^([3579][26]00)([-\/\._])(0?2)([-\/\._])(29)$)|(^([1][89][0][48])([-\/\._])(0?2)([-\/\._])(29)$)|(^([2-9][0-9][0][48])([-\/\._])(0?2)([-\/\._])(29)$)|(^([1][89][2468][048])([-\/\._])(0?2)([-\/\._])(29)$)|(^([2-9][0-9][2468][048])([-\/\._])(0?2)([-\/\._])(29)$)|(^([1][89][13579][26])([-\/\._])(0?2)([-\/\._])(29)$)|(^([2-9][0-9][13579][26])([-\/\._])(0?2)([-\/\._])(29)$))/gi.test(e)}},{key:"_isNumber",value:function(e){var t=Number(e);return 0===t||!isNaN(t)}},{key:"_getDataType",value:function(e){if(null!==e&&void 0!==e&&""!==e){if(this._isDate(e))return"DATE";if(this._isNumber(e))return"NUMBER"}return"STRING"}},{key:"_checkUrl",value:function(e){return!(""===e||!this._isMatchUrl(e))&&(!/^http[s]?:\/\/localhost/.test(e)&&!/^http[s]?:\/\/127.0.0.1/.test(e))}},{key:"_isMatchUrl",value:function(e){return new RegExp("(https?|http|file|ftp)://[-A-Za-z0-9+&@#/%?=~_|!:,.;]+[-A-Za-z0-9+&@#/%=~_|]").test(e)}},{key:"getStyle",value:function(){return{grid:this.grid,tooltip:this.tooltip,backgroundColor:this.backgroundColor}}},{key:"getFeatures",value:function(){return this.features}},{key:"setStyle",value:function(e){return this.updateChartOptions(this.chartType,e)}}])&&Fz(t.prototype,r),n&&Fz(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function zz(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Uz=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.domID=t,this.chartType=r.type||"bar",r.datasets.type=r.datasets.type||"iServer",r.datasets.withCredentials=r.datasets.withCredentials||!1,this.viewModel=new Gz(r),this._fillDataToView()}var t,r,n;return t=e,(r=[{key:"onAdd",value:function(e){this.addChart=e}},{key:"_fillDataToView",value:function(){var e=new Cz;this.viewModel.getDatasetInfo(this._createChart.bind(this)),this.viewModel.events.on({getdatafailed:function(t){e.showView(t.message)}})}},{key:"getStyle",value:function(){return this.viewModel.getStyle()}},{key:"getFeatures",value:function(){return this.viewModel.getFeatures()}},{key:"setStyle",value:function(e){var t=this.viewModel.setStyle(e);this._updateChart(t)}},{key:"changeType",value:function(e){if(this.chartType!==e){this.chartType=e;var t=this.viewModel.changeType(e);this._updateChart(t)}}},{key:"updateData",value:function(e,t){var r=this;this.viewModel.updateData(e,t,function(e){r._updateChart(e),r.addChart&&r.addChart()})}},{key:"_createChart",value:function(e){this.echart=Tz().init(document.getElementById(this.domID),null,{renderer:"canvas"});var t=this.viewModel._createChartOptions(e);this.echart.setOption(t),this.addChart&&this.addChart()}},{key:"_updateChart",value:function(e){this.echart&&(this.echart.clear(),this.echart.setOption(e))}}])&&zz(t.prototype,r),n&&zz(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Vz(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Wz=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.id=t.id?t.id:null,this.rootContainer=null}var t,r,n;return t=e,(r=[{key:"getElement",value:function(){return this.id&&(this.rootContainer.id=this.id),this.rootContainer}},{key:"_initView",value:function(){}},{key:"showView",value:function(){this.rootContainer.hidden=!1}},{key:"closeView",value:function(){this.rootContainer.hidden=!0}}])&&Vz(t.prototype,r),n&&Vz(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Yz(e){"@babel/helpers - typeof";return(Yz="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Hz(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Xz(e,t){return(Xz=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function qz(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Jz(e);if(t){var o=Jz(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===Yz(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function Jz(e){return(Jz=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Zz=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Xz(e,t)}(i,Wz);var t,r,n,o=qz(i);function i(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),t=o.call(this,e);var r=e.title?e.title:"";return t._initView(r),t}return t=i,(r=[{key:"_initView",value:function(e){var t=document.createElement("div");t.setAttribute("class","component-container");var r=document.createElement("div");r.setAttribute("class","component-title");var n=document.createElement("div");n.innerHTML=e,r.appendChild(n),t.appendChild(r);var o=document.createElement("div");return o.setAttribute("class","component-content"),t.appendChild(o),this.content=o,this.rootContainer=t,t}},{key:"getContentElement",value:function(){return this.content}},{key:"appendContent",value:function(e){this.content.appendChild(e)}}])&&Hz(t.prototype,r),n&&Hz(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function Kz(e){"@babel/helpers - typeof";return(Kz="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Qz(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function $z(e,t){return($z=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function eU(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=tU(e);if(t){var o=tU(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===Kz(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function tU(e){return(tU=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var rU=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$z(e,t)}(i,Wz);var t,r,n,o=eU(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e))._initView(e),t}return t=i,(r=[{key:"_initView",value:function(e){var t=this._createElement("div","component-selecttool");e.labelName&&(this._createElement("label","component-selecttool__lable--describe",t).innerHTML=e.labelName);var r=this._createElement("div","component-selecttool--chart",t);r.setAttribute("tabindex","1");var n=this._createElement("div","component-selecttool__name",r);n.title=e.optionsArr[0],n.innerHTML=e.optionsArr[0];var o=this._createElement("div","component-selecttool__trianglebtn--chart",r),i=this._createElement("div","component-triangle-down-img",o),a=this._createElement("div","component-selecttool__content",r),s=this._createElement("div","component-selecttool__content--chart",a),u=this._createElement("div","component-selecttool__scrollarea__content",s);u.setAttribute("tabindex","1"),this.createOptions(u,e.optionsArr),this.optionClickEvent(u,n,e.optionsClickCb),this._selectClickEvent(r,a,i),this.rootContainer=t}},{key:"createOptions",value:function(e,t){for(var r in t){var n=this._createElement("div","component-selecttool__option",e);n.title=t[r],n.innerHTML=t[r]}}},{key:"_selectClickEvent",value:function(e,t,r){e.onclick=function(e){"block"===t.style.display?(t.style.display="none",r.className="component-triangle-down-img"):(t.style.display="block",r.className="triangle-up-img"),e.preventDefault(),e.stopPropagation()},e.onmousedown=function(e){e.target!==this&&(this.focus(),e.preventDefault(),e.stopPropagation())},e.onblur=function(){t.style.display="none",r.className="component-triangle-down-img"}}},{key:"_createElement",value:function(e,t,r){var n=document.createElement(e||"div");return t&&(n.className=t),r&&r.appendChild(n),n}},{key:"optionClickEvent",value:function(e,t,r){for(var n=function(){var n=e.children[o];n.onclick=function(){t.innerHTML=n.innerHTML,t.title=n.title,n.getAttribute("data-value")&&t.setAttribute("data-value",n.getAttribute("data-value")),r&&r(n)}},o=0;o<e.children.length;o++)n()}}])&&Qz(t.prototype,r),n&&Qz(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function nU(e){"@babel/helpers - typeof";return(nU="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function oU(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function iU(e,t){return(iU=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function aU(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=sU(e);if(t){var o=sU(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===nU(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function sU(e){return(sU=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var uU=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&iU(e,t)}(i,Wz);var t,r,n,o=aU(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e))._initView(e),t}return t=i,(r=[{key:"_initView",value:function(e){var t=document.createElement("div");t.className="component-dropdownbox--container";var r=document.createElement("div");r.setAttribute("tabindex","1"),r.className="component-dropdownbox",t.appendChild(r);var n=document.createElement("div");r.appendChild(n),this._createDropDownOption(e[0],n);var o=document.createElement("div");o.className="component-dropdownbox__triangle-btn",r.appendChild(o);var i=document.createElement("div");i.className="component-triangle-down-img",o.appendChild(i);var a={parentEle:r,dropDownContent:["component-dropdownbox__content component-dropdownbox__content--chart","dropDownContent"],scrollareaContent:"component-selecttool__scrollarea__content",optionsArr:e,triangleBtn:i,dropDownTopContainer:n};this._createDropDownBox(a),this.rootContainer=t}},{key:"_createDropDownBox",value:function(e){var t=e.parentEle,r=e.dropDownTopContainer,n=document.createElement("div");n.className=e.dropDownContent[0],t.appendChild(n);var o=document.createElement("div");o.className=e.scrollareaContent,n.appendChild(o);for(var i=e.optionsArr,a=0;a<i.length;a++)this._createDropDownOption(i[a],o);var s=e.triangleBtn;this._dropDownClickEvent(t,n,s),this._eleOnblur(t,n,s);for(var u=o.children,l=function(e){u[e].onclick=function(){r.innerHTML=u[e].outerHTML}},c=0;c<u.length;c++)l(c)}},{key:"_createDropDownOption",value:function(e,t){var r=document.createElement("div");r.className="component-dropdownbox__item";var n=e;n.dataValue&&r.setAttribute("data-value",n.dataValue),t.appendChild(r);var o=document.createElement("div");o.className="component-dropdownbox__item__img",r.appendChild(o);var i=document.createElement("div");n.icon.className&&(i.className=n.icon.className),n.icon.background&&(i.style.background=n.icon.background),o.appendChild(i);var a=document.createElement("div");a.className="component-dropdownbox__item__title",a.title=n.title,a.innerHTML=n.title,r.appendChild(a);var s=document.createElement("div");s.className="component-dropdownbox__item__remark",s.title=n.remark,s.innerHTML=n.remark,r.appendChild(s)}},{key:"_dropDownClickEvent",value:function(e,t,r){e.onclick=function(e){"block"===t.style.display?(t.style.display="none",r.className="component-triangle-down-img"):(t.style.display="block",r.className="triangle-up-img"),e.preventDefault(),e.stopPropagation()},e.onmousedown=function(e){e.target!==this&&(this.focus(),e.preventDefault(),e.stopPropagation())}}},{key:"_eleOnblur",value:function(e,t,r){e.onblur=function(){t.style.display="none",r.className="component-triangle-down-img"}}},{key:"_createElement",value:function(e,t,r){var n=document.createElement(e||"div");return t&&(n.className=t),r&&r.appendChild(n),n}}])&&oU(t.prototype,r),n&&oU(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function lU(e){"@babel/helpers - typeof";return(lU="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function cU(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function fU(e,t){return(fU=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function hU(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=pU(e);if(t){var o=pU(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===lU(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function pU(e){return(pU=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var dU=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&fU(e,t)}(i,Wz);var t,r,n,o=hU(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),e=e||{},t=o.call(this,e),e.title=e.title?e.title:"",t._initView(e.title),t}return t=i,(r=[{key:"_initView",value:function(e){var t=document.createElement("div");t.setAttribute("class","component-popcontainer");var r=document.createElement("div");r.setAttribute("class","component-popcontainer__header");var n=document.createElement("label");n.setAttribute("class","component-popcontainer__header__title"),n.innerHTML=e,r.appendChild(n);var o=document.createElement("span");o.setAttribute("class","supermapol-icons-clear component-popcontainer__header__close"),o.onclick=this.closeView.bind(this),t.appendChild(o),t.appendChild(r);var i=document.createElement("div");i.setAttribute("class","component-popcontainer__content"),this.content=i,t.appendChild(i),this.rootContainer=t}},{key:"appendContent",value:function(e){this.content.appendChild(e)}}])&&cU(t.prototype,r),n&&cU(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function yU(e){"@babel/helpers - typeof";return(yU="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function vU(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function gU(e,t){return(gU=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function mU(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=bU(e);if(t){var o=bU(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===yU(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function bU(e){return(bU=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var wU=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&gU(e,t)}(i,dU);var t,r,n,o=mU(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),e.title=e.title?e.title:"å±æ§",(t=o.call(this,e)).rootContainer.firstChild.hidden=!0,e.attributes=e.attributes?e.attributes:[],t._createAttributesTable(e.attributes),t}return t=i,(r=[{key:"_createAttributesTable",value:function(e){var t=document.createElement("table");t.setAttribute("class","component-popcontainer__content__table");var r=document.createElement("tbody"),n=!0;for(var o in e){var i=document.createElement("tr");n&&i.setAttribute("class","component-popcontainer__content__td--color");var a=document.createElement("td"),s=document.createElement("Span");s.innerHTML=o,a.appendChild(s);var u=document.createElement("td");u.innerHTML=e[o],i.appendChild(a),i.appendChild(u),r.appendChild(i),n=!n}t.appendChild(r),this.appendContent(t)}}])&&vU(t.prototype,r),n&&vU(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function _U(e){"@babel/helpers - typeof";return(_U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xU(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function SU(e,t){return(SU=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function OU(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=PU(e);if(t){var o=PU(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===_U(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function PU(e){return(PU=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var EU=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&SU(e,t)}(i,Wz);var t,r,n,o=OU(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e))._initView(),t}return t=i,(r=[{key:"_initView",value:function(){var e=document.createElement("div");e.setAttribute("class","component-tabpage");var t=document.createElement("ul");this.header=t;var r=document.createElement("div");r.setAttribute("class","component-tabpage__content"),this.content=r,e.appendChild(t),e.appendChild(r),this.rootContainer=e}},{key:"setTabs",value:function(e){this.removeAllTabs(),this.appendTabs(e)}},{key:"appendTabs",value:function(e){for(var t=0;t<e.length;t++){var r=document.createElement("span");r.index=t,r.appendChild(document.createTextNode(e[t].title)),r.onclick=this._changeTabsPage.bind(this);var n=e[t].content;n.index=t,n.hidden=!0,this.header.appendChild(r),this.content.appendChild(n)}this.header.firstChild.setAttribute("class","on"),this.content.firstChild.hidden=!1}},{key:"removeTab",value:function(e){this.header.removeChild(this.header.children[e]),this.content.removeChild(this.content.children[e])}},{key:"removeAllTabs",value:function(){for(var e=this.header.children.length;e>0;e--)this.header.removeChild(this.header.children[e]),this.content.removeChild(this.content.children[e])}},{key:"_changeTabsPage",value:function(e){for(var t=e.target.index,r=0;r<this.header.children.length;r++)this.header.children[r].setAttribute("class",""),this.content.children[r].hidden=!0,r===t&&(this.header.children[r].setAttribute("class","on"),this.content.children[r].hidden=!1)}}])&&xU(t.prototype,r),n&&xU(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function kU(e){"@babel/helpers - typeof";return(kU="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function MU(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function CU(e,t){return(CU=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function jU(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=TU(e);if(t){var o=TU(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===kU(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function TU(e){return(TU=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var AU=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&CU(e,t)}(i,EU);var t,r,n,o=jU(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).rootContainer.classList.add("component-citytabpage--noneBoxShadow"),t.config=e.config,j.isArray(t.config)?(t.header.hidden=!0,t._createCityItem("åå¸",t.config),t.content.style.border="none"):(t._createTabs(),t.header.onclick=function(e){for(var r=0;r<t.header.children.length;r++)t.header.children[r].setAttribute("class","");e.target.setAttribute("class","on"),t._createCityContent(e.target.innerHTML)}),t}return t=i,(r=[{key:"_createTabs",value:function(){if(j.isArray(this.config))for(var e=0;e<this.config.length;e++){var t="";for(var r in this.config[e])t+=r;var n=document.createElement("li");n.innerHTML=t,this.header.appendChild(n)}else for(var o in this.config){var i=document.createElement("li");i.innerHTML=o,this.header.appendChild(i)}this.header.firstChild.setAttribute("class","on"),this._createCityContent(this.header.firstChild.innerHTML)}},{key:"_createCityContent",value:function(e){for(var t=this.content.children.length;t>0;t--)this.content.removeChild(this.content.children[t-1]);var r=this.config[e];for(var n in r)this._createCityItem(n,r[n])}},{key:"_createCityItem",value:function(e,t){var r=document.createElement("div"),n=document.createElement("div");n.setAttribute("class","component-citytabpag__py-key"),n.innerHTML=e,r.appendChild(n);var o=document.createElement("div");o.setAttribute("class","component-citytabpag__content");for(var i=0;i<t.length;i++){var a=document.createElement("span");a.innerHTML=t[i],o.appendChild(a)}"HOT"===e&&(o.style.width="428px"),r.appendChild(o),this.content.appendChild(r)}}])&&MU(t.prototype,r),n&&MU(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function IU(e){"@babel/helpers - typeof";return(IU="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function RU(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function LU(e,t){return(LU=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function NU(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=DU(e);if(t){var o=DU(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===IU(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function DU(e){return(DU=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var BU=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&LU(e,t)}(i,Wz);var t,r,n,o=NU(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).navTabsTitle=null,t.navTabsContent=null,e.tabs=e.tabs?e.tabs:[],t._initView(e.tabs),t}return t=i,(r=[{key:"_initView",value:function(e){var t=document.createElement("div");t.setAttribute("class","component-navtabspage");var r=document.createElement("span");r.setAttribute("class","supermapol-icons-close"),r.onclick=this.closeView.bind(this),t.appendChild(r);var n=document.createElement("div");this.navTabsTitle=n,n.setAttribute("class","component-navtabspage__title"),t.appendChild(n);var o=document.createElement("div");this.navTabsContent=o,o.setAttribute("class","component-navtabspage__content"),t.appendChild(o),e.length>0&&this.appendTabs(e),this.rootContainer=t}},{key:"setTabs",value:function(e){this.removeAllTabs(),this.appendTabs(e)}},{key:"appendTabs",value:function(e){for(var t=0;t<e.length;t++){var r=document.createElement("span");r.index=t,r.appendChild(document.createTextNode(e[t].title)),r.onclick=this._changeTabsPage.bind(this);var n=e[t].content;n.index=t,n.hidden=!0,this.navTabsTitle.appendChild(r),this.navTabsContent.appendChild(n)}this.navTabsTitle.firstChild.setAttribute("class","component-navtabspage__tabs--select"),this.navTabsContent.firstChild.hidden=!1}},{key:"removeTab",value:function(e){this.navTabsTitle.removeChild(this.navTabsTitle.children[e]),this.navTabsContent.removeChild(this.navTabsContent.children[e])}},{key:"removeAllTabs",value:function(){for(var e=this.navTabsTitle.children.length;e>0;e--)this.navTabsTitle.removeChild(this.navTabsTitle.children[e]),this.navTabsContent.removeChild(this.navTabsContent.children[e])}},{key:"_changeTabsPage",value:function(e){for(var t=e.target.index,r=0;r<this.navTabsTitle.children.length;r++)this.navTabsTitle.children[r].setAttribute("class",""),this.navTabsContent.children[r].hidden=!0,r===t&&(this.navTabsTitle.children[r].setAttribute("class","component-navtabspage__tabs--select"),this.navTabsContent.children[r].hidden=!1)}}])&&RU(t.prototype,r),n&&RU(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function FU(e){"@babel/helpers - typeof";return(FU="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function GU(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function zU(e,t){return(zU=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function UU(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=VU(e);if(t){var o=VU(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===FU(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function VU(e){return(VU=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var WU=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&zU(e,t)}(i,Wz);var t,r,n,o=UU(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),e=e||{},(t=o.call(this,e)).currentPage=0,t.pageNumberLis=[],t.currentPageNumberLis=[],t.linkageEvent=null,e.contents=e.contents?e.contents:null,e.pageCounts=e.pageCounts?e.pageCounts:0,t._initView(e.contents,e.pageCounts),t}return t=i,(r=[{key:"setLinkageEvent",value:function(e){this.linkageEvent=e}},{key:"_initView",value:function(e,t){var r=document.createElement("div");r.setAttribute("class","component-pagination");var n=document.createElement("div");n.setAttribute("class","component-pagination__content"),r.appendChild(n),this.content=n;var o=document.createElement("ul");o.setAttribute("class","component-pagination__link"),o.onclick=this._changePageEvent.bind(this),r.appendChild(o),this._createLink(o),this.link=o,e&&this.setContent(e),0!==t&&this.setPageLink(t),this.rootContainer=r}},{key:"setContent",value:function(e){this.clearContent(),this.appendContent(e)}},{key:"appendContent",value:function(e){this.content.appendChild(e)}},{key:"clearContent",value:function(){for(var e=this.content.children.length-1;e>=0;e--)this.content.removeChild(this.content.children[e])}},{key:"setPageLink",value:function(e){this.pageNumberLis=[],this.currentPageNumberLis=[],this.clearPageLink(),this._createPageLi(e),this._appendPageLink()}},{key:"_createPageLi",value:function(e){for(var t=0;t<e;t++){var r=document.createElement("li");r.innerHTML=t+1,this.pageNumberLis.push(r)}if(this.pageNumberLis[0].setAttribute("class","active"),this.currentPage=1,e<5)this.currentPageNumberLis=this.pageNumberLis;else for(var n=0;n<5;n++)this.currentPageNumberLis.push(this.pageNumberLis[n])}},{key:"_appendPageLink",value:function(){for(var e=0;e<this.currentPageNumberLis.length;e++)this.link.insertBefore(this.currentPageNumberLis[e],this.link.childNodes[this.link.children.length-2]);for(var t=0;t<this.currentPageNumberLis.length;t++)this.currentPageNumberLis[t].setAttribute("class",""),Number(this.currentPageNumberLis[t].innerHTML)===this.currentPage&&this.currentPageNumberLis[t].setAttribute("class","active");this._changeDisableState(),this.linkageEvent&&this.linkageEvent(this.currentPage)}},{key:"clearPageLink",value:function(){for(var e=this.link.children.length-3;e>1;e--)this.link.removeChild(this.link.children[e])}},{key:"_createLink",value:function(e){for(var t=0;t<4;t++){var r=document.createElement("li");r.setAttribute("class","disable");var n=document.createElement("span");r.appendChild(n),0===t?(n.id="first",n.setAttribute("class","supermapol-icons-first")):1===t?(n.id="prev",n.setAttribute("class","supermapol-icons-prev")):2===t?(n.id="next",n.setAttribute("class","supermapol-icons-next")):3===t&&(n.id="last",n.setAttribute("class","supermapol-icons-last")),e.appendChild(r)}}},{key:"_changePageEvent",value:function(e){var t=e.target;if("disable"!==t.parentElement.classList[0]){var r;if(t.id)r=t.id;else{if(!Number(t.innerHTML))return;r=Number(t.innerHTML)}this._prePageNum(r),this.clearPageLink(),this._appendPageLink()}}},{key:"_changeDisableState",value:function(){this.link.children[0].setAttribute("class",""),this.link.children[1].setAttribute("class",""),this.link.children[this.link.children.length-1].setAttribute("class",""),this.link.children[this.link.children.length-2].setAttribute("class",""),1===this.currentPage&&(this.link.children[0].setAttribute("class","disable"),this.link.children[1].setAttribute("class","disable")),this.currentPage===this.pageNumberLis.length&&(this.link.children[this.link.children.length-1].setAttribute("class","disable"),this.link.children[this.link.children.length-2].setAttribute("class","disable"))}},{key:"_prePageNum",value:function(e){var t=[];if(this.currentPage="first"===e?1:"last"===e?this.pageNumberLis.length:"prev"===e?this.currentPage-1:"next"===e?this.currentPage+1:e,this.pageNumberLis.length<=5)for(var r=0;r<this.pageNumberLis.length;r++)t.push(this.pageNumberLis[r]);else if(this.currentPage<=3)for(var n=0;n<5;n++)t.push(this.pageNumberLis[n]);else if(this.currentPage>=this.pageNumberLis.length-3)for(var o=this.pageNumberLis.length-5;o<this.pageNumberLis.length;o++)t.push(this.pageNumberLis[o]);else for(var i=this.currentPage-3;i<=this.currentPage+1;i++)t.push(this.pageNumberLis[i]);t.length>0&&(this.currentPageNumberLis=t)}}])&&GU(t.prototype,r),n&&GU(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}();function YU(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function HU(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?YU(Object(r),!0).forEach(function(t){XU(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):YU(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function XU(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qU(e){var t,r=(t={},["(",")","ï¼","ï¼",",","ï¼"].forEach(function(e,r){t[e]="$".concat(r)}),t);for(var n in r)for(var o=r[n],i=new RegExp("\\".concat(n),"g");i.test(e);)e=e.replace(i,o);return e}function JU(e,t){var r=e;return e.replace(/&|\||>|<|=|!/g," ").split(" ").filter(function(e){return e}).forEach(function(e){var n=t.find(function(t){return t===e});if(KU(e)&&n&&(r=r.replace(n,"$"+n)),n){var o=qU(n);r=r.replace(n,o)}}),r}function ZU(e){var t={};for(var r in e){var n=r;KU(r)&&(n="$"+r),t[n=qU(n)]=e[r]}return t}function KU(e){return/^\d/.test(e)}CL.Lang=Az,CL.i18n=CL.Lang.i18n,CL.Util=HU(HU({},CL.Util),j),CL.Browser=k,CL.INCHES_PER_UNIT=T,CL.METERS_PER_INCH=A,CL.DOTS_PER_INCH=96,CL.IS_GECKO=C,CL.setCORS=function(e){bl=e},CL.isCORS=jl,CL.setRequestTimeout=function(e){return wl=e},CL.getRequestTimeout=Tl,CL.FetchRequest=Al,CL.inherit=function(e,t){var r,n,o,i=function(){};for(i.prototype=t.prototype,e.prototype=new i,r=2,n=arguments.length;r<n;r++)"function"==typeof(o=arguments[r])&&(o=o.prototype),j.extend(e.prototype,o)},CL.mixin=h,CL.String=p,CL.Number=d,CL.Function=y,CL.Array=v,CL.Date=In,CL.Event=Rn,CL.Bounds=N,CL.Credential=An,CL.Events=Dn,CL.Feature=je,CL.Geometry=m,CL.Pixel=c,CL.Size=u,CL.Feature.Vector=ze,CL.Geometry.Collection=Z,CL.Geometry.Curve=ue,CL.Geometry.GeoText=Cr,CL.Geometry.LinearRing=xe,CL.Geometry.LineString=ye,CL.Geometry.MultiLineString=tt,CL.Geometry.MultiPoint=re,CL.Geometry.MultiPolygon=st,CL.Geometry.Point=V,CL.Geometry.Polygon=Me,CL.Geometry.Rectangle=jn,CL.Components.Chart=Uz,CL.Components.ChartViewModel=Gz,CL.Components.MessageBox=Cz,CL.Components.AttributesPopContainer=wU,CL.Components.CityTabsPage=AU,CL.Components.CommonContainer=Zz,CL.Components.DropDownBox=uU,CL.Components.IndexTabsPageContainer=EU,CL.Components.NavTabsPage=BU,CL.Components.PaginationContainer=WU,CL.Components.PopContainer=dU,CL.Components.Select=rU,CL.Components.TemplateBase=Wz,CL.Components.FileReaderUtil=Rz,CL.TimeControlBase=DL,CL.TimeFlowControl=YL,CL.Format=CL.Format||Ve,CL.Format.GeoJSON=br,CL.Format.JSON=Je,CL.Format.WKT=LL,CL.iManager=tN,CL.iManagerCreateNodeParam=JL,CL.iManagerServiceBase=XL,CL.iPortal=xN,CL.iPortalAddDataParam=jN,CL.iPortalAddResourceParam=EN,CL.iPortalDataConnectionInfoParam=NN,CL.iPortalDataMetaInfoParam=AN,CL.iPortalDataStoreInfoParam=RN,CL.iPortalQueryParam=iN,CL.iPortalQueryResult=sN,CL.iPortalRegisterServiceParam=MN,CL.iPortalResource=dN,CL.iPortalServiceBase=nN,CL.iPortalShareEntity=ON,CL.iPortalShareParam=vN,CL.iPortalUser=UN,CL.AddressMatchService=Dp,CL.AggregationParameter=WN,CL.AreaSolarRadiationParameters=yC,CL.AreaSolarRadiationService=xC,CL.BucketAggParameter=KN,CL.BufferAnalystParameters=MC,CL.BufferAnalystService=ej,CL.BufferDistance=OC,CL.BuffersAnalystJobsParameter=ok,CL.BuffersAnalystJobsService=fk,CL.BufferSetting=EC,CL.BurstPipelineAnalystParameters=vx,CL.BurstPipelineAnalystService=Sx,CL.ChartFeatureInfoSpecsService=cd,CL.ChartQueryFilterParameter=Xp,CL.ChartQueryParameters=Jp,CL.ChartQueryService=nd,CL.ClipParameter=sD,CL.ColorDictionary=yw,CL.CommonServiceBase=Nf,CL.ComputeWeightMatrixParameters=Cx,CL.ComputeWeightMatrixService=Nx,CL.CreateDatasetParameters=Vd,CL.DataFlowService=Pd,CL.DataReturnOption=jC,CL.DatasetBufferAnalystParameters=BC,CL.DatasetInfo=$b,CL.DatasetOverlayAnalystParameters=DT,CL.DatasetService=zd,CL.DatasetSurfaceAnalystParameters=CA,CL.DatasetThiessenAnalystParameters=sI,CL.DatasourceConnectionInfo=QP,CL.DatasourceService=sy,CL.DensityAnalystService=cj,CL.DensityKernelAnalystParameters=rj,CL.EditFeaturesParameters=yy,CL.EditFeaturesService=Sy,CL.FacilityAnalyst3DParameters=bO,CL.FacilityAnalystSinks3DParameters=EO,CL.FacilityAnalystSinks3DService=AO,CL.FacilityAnalystSources3DParameters=FO,CL.FacilityAnalystSources3DService=HO,CL.FacilityAnalystStreamParameters=Bx,CL.FacilityAnalystStreamService=Yx,CL.FacilityAnalystTracedown3DParameters=pP,CL.FacilityAnalystTracedown3DService=wP,CL.FacilityAnalystTraceup3DParameters=$O,CL.FacilityAnalystTraceup3DService=aP,CL.FacilityAnalystUpstream3DParameters=MP,CL.FacilityAnalystUpstream3DService=LP,CL.FieldParameters=wg,CL.FieldsFilter=hF,CL.FieldStatisticService=Lg,CL.FieldStatisticsParameters=kg,CL.FilterParameter=Iy,CL.FindClosestFacilitiesParameters=Xx,CL.FindClosestFacilitiesService=eS,CL.FindLocationParameters=rS,CL.FindLocationService=lS,CL.FindMTSPPathsParameters=fS,CL.FindMTSPPathsService=mS,CL.FindPathParameters=wS,CL.FindPathService=kS,CL.FindServiceAreasParameters=CS,CL.FindServiceAreasService=NS,CL.FindTSPPathsParameters=BS,CL.FindTSPPathsService=YS,CL.GenerateSpatialDataParameters=hj,CL.GenerateSpatialDataService=bj,CL.GeoCodingParameter=Mp,CL.GeoDecodingParameter=jp,CL.GeoHashGridAggParameter=yD,CL.GeometryBatchAnalystService=TI,CL.GeometryBufferAnalystParameters=HC,CL.GeometryOverlayAnalystParameters=YT,CL.GeometrySurfaceAnalystParameters=DA,CL.GeometryThiessenAnalystParameters=yI,CL.GeoprocessingService=fm,CL.GeoRelationAnalystParameters=_j,CL.GeoRelationAnalystService=Mj,CL.GetFeaturesByBoundsParameters=bv,CL.GetFeaturesByBoundsService=Ev,CL.GetFeaturesByBufferParameters=Rv,CL.GetFeaturesByBufferService=zv,CL.GetFeaturesByGeometryParameters=Jv,CL.GetFeaturesByGeometryService=rg,CL.GetFeaturesByIDsParameters=Vy,CL.GetFeaturesByIDsService=Zy,CL.GetFeaturesBySQLParameters=ov,CL.GetFeaturesBySQLService=fv,CL.GetFeaturesParametersBase=Ly,CL.GetFeaturesServiceBase=Ty,CL.GetFieldsService=mg,CL.GetGridCellInfosParameters=Yg,CL.GetGridCellInfosService=$g,CL.GetLayersInfoService=Ww,CL.Grid=xw,CL.HillshadeParameter=UB,CL.Image=Cw,CL.ImageCollectionService=xL,CL.ImageGFAspect=OF,CL.ImageGFHillShade=xF,CL.ImageGFOrtho=EF,CL.ImageGFSlope=MF,CL.ImageRenderingRule=wF,CL.ImageSearchParameter=vF,CL.ImageService=uL,CL.ImageStretchOption=mF,CL.InterpolationAnalystParameters=jj,CL.InterpolationAnalystService=mT,CL.InterpolationDensityAnalystParameters=Hj,CL.InterpolationIDWAnalystParameters=eT,CL.InterpolationKrigingAnalystParameters=cT,CL.InterpolationRBFAnalystParameters=Bj,CL.JoinItem=Kb,CL.KernelDensityJobParameter=oE,CL.KernelDensityJobsService=fE,CL.LabelImageCell=OD,CL.LabelMatrixCell=gD,CL.LabelMixedTextStyle=Cm,CL.LabelSymbolCell=TD,CL.LabelThemeCell=BD,CL.LayerStatus=GD,CL.LinkItem=UD,CL.MappingParameters=rE,CL.MapService=A_,CL.MathExpressionAnalysisParameters=wT,CL.MathExpressionAnalysisService=kT,CL.MeasureParameters=X_,CL.MeasureService=tx,CL.MetricsAggParameter=iD,CL.NDVIParameter=RB,CL.NetworkAnalystServiceBase=dx,CL.OutputSetting=eE,CL.OverlapDisplayedOptions=WD,CL.OverlayAnalystParameters=CT,CL.OverlayAnalystService=$T,CL.OverlayGeoJobParameter=GE,CL.OverlayGeoJobsService=XE,CL.PointWithMeasure=mt,CL.ProcessingServiceBase=ZP,CL.QueryByBoundsParameters=eM,CL.QueryByBoundsService=sM,CL.QueryByDistanceParameters=yM,CL.QueryByDistanceService=xM,CL.QueryByGeometryParameters=YM,CL.QueryByGeometryService=QM,CL.QueryBySQLParameters=jM,CL.QueryBySQLService=DM,CL.QueryParameters=Yp,CL.QueryService=eC,CL.RasterFunctionParameter=EB,CL.Route=Pt,CL.RouteCalculateMeasureParameters=tA,CL.RouteCalculateMeasureService=uA,CL.RouteLocatorParameters=cA,CL.RouteLocatorService=gA,CL.ServerColor=lt,CL.ServerFeature=Lo,CL.ServerGeometry=hr,CL.ServerStyle=ft,CL.ServerTextStyle=_m,CL.ServerTheme=pw,CL.SetDatasourceParameters=$d,CL.SetLayerInfoParameters=HD,CL.SetLayerInfoService=Qw,CL.SetLayersInfoParameters=qD,CL.SetLayersInfoService=a_,CL.SetLayerStatusParameters=u_,CL.SetLayerStatusService=v_,CL.SingleObjectQueryJobsParameter=pE,CL.SingleObjectQueryJobsService=wE,CL.Sortby=dF,CL.SpatialAnalystBase=pC,CL.StopQueryParameters=nR,CL.StopQueryService=fR,CL.SummaryAttributesJobsParameter=xk,CL.SummaryAttributesJobsService=Ck,CL.SummaryMeshJobParameter=xE,CL.SummaryMeshJobsService=CE,CL.SummaryRegionJobParameter=JE,CL.SummaryRegionJobsService=rk,CL.SupplyCenter=ZD,CL.SurfaceAnalystParameters=_A,CL.SurfaceAnalystParametersSetting=bA,CL.SurfaceAnalystService=WA,CL.TerrainCurvatureCalculationParameters=HA,CL.TerrainCurvatureCalculationService=$A,CL.Theme=bm,CL.ThemeDotDensity=wb,CL.ThemeFlow=QD,CL.ThemeGraduatedSymbol=jb,CL.ThemeGraduatedSymbolStyle=xb,CL.ThemeGraph=pb,CL.ThemeGraphAxes=$m,CL.ThemeGraphItem=ib,CL.ThemeGraphSize=tb,CL.ThemeGraphText=nb,CL.ThemeGridRange=uB,CL.ThemeGridRangeItem=eB,CL.ThemeGridUnique=mB,CL.ThemeGridUniqueItem=cB,CL.ThemeLabel=Vm,CL.ThemeLabelAlongLine=Im,CL.ThemeLabelBackground=Lm,CL.ThemeLabelItem=Sm,CL.ThemeLabelText=Tm,CL.ThemeLabelUniqueItem=wB,CL.ThemeMemoryData=xB,CL.ThemeOffset=km,CL.ThemeParameters=zI,CL.ThemeRange=Gb,CL.ThemeRangeItem=Ab,CL.ThemeService=JI,CL.ThemeUnique=Km,CL.ThemeUniqueItem=Pm,CL.ThiessenAnalystParameters=rT,CL.ThiessenAnalystService=SI,CL.TilesetsService=F_,CL.TopologyValidatorJobsParameter=pk,CL.TopologyValidatorJobsService=wk,CL.TransferLine=OB,CL.TransferPathParameters=pR,CL.TransferPathService=wR,CL.TransferSolutionParameters=xR,CL.TransferSolutionService=CR,CL.TransportationAnalystParameter=kx,CL.TransportationAnalystResultSetting=Px,CL.UGCLayer=Ub,CL.UGCMapLayer=Jb,CL.UGCSubLayer=aw,CL.UpdateDatasetParameters=Yd,CL.UpdateEdgeWeightParameters=XS,CL.UpdateEdgeWeightService=eO,CL.UpdateTurnNodeWeightParameters=rO,CL.UpdateTurnNodeWeightService=lO,CL.Vector=Nw,CL.VectorClipJobsParameter=TE,CL.VectorClipJobsService=BE,CL.WebPrintingJobContent=oF,CL.WebPrintingJobCustomItems=WB,CL.WebPrintingJobExportOptions=uF,CL.WebPrintingJobImage=HB,CL.WebPrintingJobLayers=qB,CL.WebPrintingJobLayoutOptions=aF,CL.WebPrintingJobLegendOptions=ZB,CL.WebPrintingJobLittleMapOptions=QB,CL.WebPrintingJobNorthArrowOptions=eF,CL.WebPrintingJobParameters=cF,CL.WebPrintingJobScaleBarOptions=rF,CL.WebPrintingService=HR,CL.Online=FF,CL.OnlineData=DF,CL.OnlineQueryDatasParameter=zF,CL.ServiceStatus={DOES_NOT_INVOLVE:"DOES_NOT_INVOLVE",PUBLISH_FAILED:"PUBLISH_FAILED",PUBLISHED:"PUBLISHED",PUBLISHING:"PUBLISHING",UNPUBLISHED:"UNPUBLISHED",UNPUBLISHED_FAILED:"UNPUBLISHED_FAILED"},CL.DataItemType={GEOJSON:"GEOJSON",UGCV5_MVT:"UGCV5_MVT",JSON:"JSON",AUDIO:"AUDIO",COLOR:"COLOR",COLORSCHEME:"COLORSCHEME",CSV:"CSV",EXCEL:"EXCEL",FILLSYMBOL:"FILLSYMBOL",IMAGE:"IMAGE",LAYERTEMPLATE:"LAYERTEMPLATE",LAYOUTTEMPLATE:"LAYOUTTEMPLATE",LINESYMBOL:"LINESYMBOL",MAPTEMPLATE:"MAPTEMPLATE",MARKERSYMBOL:"MARKERSYMBOL",MBTILES:"MBTILES",PHOTOS:"PHOTOS",SHP:"SHP",SMTILES:"SMTILES",SVTILES:"SVTILES",THEMETEMPLATE:"THEMETEMPLATE",TPK:"TPK",UDB:"UDB",UGCV5:"UGCV5",UNKNOWN:"UNKNOWN",VIDEO:"VIDEO",WORKENVIRONMENT:"WORKENVIRONMENT",WORKSPACE:"WORKSPACE"},CL.DataItemOrderBy={FILENAME:"FILENAME",ID:"ID",LASTMODIFIEDTIME:"LASTMODIFIEDTIME",NICKNAME:"NICKNAME",SERVICESTATUS:"SERVICESTATUS",SIZE:"SIZE",STATUS:"STATUS",TYPE:"TYPE",UPDATETIME:"UPDATETIME",USERNAME:"USERNAME"},CL.FilterField={LINKPAGE:"LINKPAGE",MAPTITLE:"MAPTITLE",NICKNAME:"NICKNAME",RESTITLE:"RESTITLE",USERNAME:"USERNAME"},CL.OnlineServiceBase=jF,CL.Feature=CL.Feature||{},CL.Feature.Theme=Tr,CL.Feature.Theme.Bar=MG,CL.Feature.Theme.Bar3D=LG,CL.Feature.Theme.Circle=JG,CL.Feature.Theme.Graph=_G,CL.Feature.Theme.Line=rz,CL.Feature.Theme.Pie=lz,CL.Feature.Theme.Point=vz,CL.Feature.Theme.RankSymbol=UG,CL.Feature.Theme.Ring=Sz,CL.Feature.Theme.ThemeVector=es,CL.Feature.ShapeParameters=Ho,CL.Feature.ShapeParameters.Circle=qi,CL.Feature.ShapeParameters.Image=zi,CL.Feature.ShapeParameters.Label=Ri,CL.Feature.ShapeParameters.Line=ai,CL.Feature.ShapeParameters.Point=$o,CL.Feature.ShapeParameters.Polygon=pi,CL.Feature.ShapeParameters.Rectangle=wi,CL.Feature.ShapeParameters.Sector=ki,CL.Feature.ShapeFactory=Ya,CL.LevelRenderer=Io,CL.KeyServiceParameter=VF,CL.SecurityManager=If,CL.ServerInfo=YF,CL.TokenServiceParameter=XF,CL.ThemeStyle=dG,CL.CartoCSS=fG,CL.ElasticSearch=$F,CL.ArrayStatistic=oG,CL.ColorsPickerUtil=rG,CL.DataFormat=Et,CL.ServerType=kt,CL.GeometryType=Mt,CL.QueryOption=Ct,CL.JoinType={INNERJOIN:"INNERJOIN",LEFTJOIN:"LEFTJOIN"},CL.SpatialQueryMode=jt,CL.SpatialRelationType={CONTAIN:"CONTAIN",INTERSECT:"INTERSECT",WITHIN:"WITHIN"},CL.MeasureMode=Tt,CL.Unit=At,CL.BufferRadiusUnit=It,CL.EngineType={IMAGEPLUGINS:"IMAGEPLUGINS",OGC:"OGC",ORACLEPLUS:"ORACLEPLUS",SDBPLUS:"SDBPLUS",SQLPLUS:"SQLPLUS",UDB:"UDB"},CL.ThemeGraphTextFormat=Rt,CL.ThemeGraphType=Lt,CL.GraphAxesTextDisplayMode=Nt,CL.GraduatedMode=Dt,CL.RangeMode=Bt,CL.ThemeType={DOTDENSITY:"DOTDENSITY",GRADUATEDSYMBOL:"GRADUATEDSYMBOL",GRAPH:"GRAPH",LABEL:"LABEL",RANGE:"RANGE",UNIQUE:"UNIQUE"},CL.ColorGradientType=Ft,CL.TextAlignment=Gt,CL.FillGradientMode={NONE:"NONE",LINEAR:"LINEAR",RADIAL:"RADIAL",CONICAL:"CONICAL",SQUARE:"SQUARE"},CL.AlongLineDirection=zt,CL.LabelBackShape=Ut,CL.LabelOverLengthMode=Vt,CL.DirectionType={EAST:"EAST",NONE:"NONE",NORTH:"NORTH",SOURTH:"SOURTH",WEST:"WEST"},CL.OverlayOperationType=Yt,CL.OutputType=Ht,CL.SideType={LEFT:"LEFT",MIDDLE:"MIDDLE",NONE:"NONE",RIGHT:"RIGHT"},CL.SupplyCenterType={FIXEDCENTER:"FIXEDCENTER",NULL:"NULL",OPTIONALCENTER:"OPTIONALCENTER"},CL.TurnType={AHEAD:"AHEAD",BACK:"BACK",END:"END",LEFT:"LEFT",NONE:"NONE",RIGHT:"RIGHT"},CL.BufferEndType=Wt,CL.SmoothMethod=Xt,CL.SurfaceAnalystMethod=qt,CL.DataReturnMode=Jt,CL.EditType=Zt,CL.TransferTactic=Kt,CL.TransferPreference=Qt,CL.GridType={CROSS:"CROSS",GRID:"GRID",POINT:"POINT"},CL.ColorSpaceType={CMYK:"CMYK",RGB:"RGB"},CL.LayerType={UGC:"UGC",WMS:"WMS",WFS:"WFS",CUSTOM:"CUSTOM"},CL.UGCLayerType={THEME:"THEME",VECTOR:"VECTOR",GRID:"GRID",IMAGE:"IMAGE"},CL.StatisticMode={AVERAGE:"AVERAGE",MAX:"MAX",MIN:"MIN",STDDEVIATION:"STDDEVIATION",SUM:"SUM",VARIANCE:"VARIANCE"},CL.PixelFormat={BIT16:"BIT16",BIT32:"BIT32",BIT64:"BIT64",SINGLE:"SINGLE",DOUBLE:"DOUBLE",UBIT1:"UBIT1",UBIT4:"UBIT4",UBIT8:"UBIT8",UBIT24:"UBIT24",UBIT32:"UBIT32"},CL.SearchMode={KDTREE_FIXED_COUNT:"KDTREE_FIXED_COUNT",KDTREE_FIXED_RADIUS:"KDTREE_FIXED_RADIUS",NONE:"NONE",QUADTREE:"QUADTREE"},CL.InterpolationAlgorithmType={KRIGING:"KRIGING",SimpleKriging:"SimpleKriging",UniversalKriging:"UniversalKriging"},CL.VariogramMode=$t,CL.Exponent=er,CL.ClientType=tr,CL.ChartType={BAR:"Bar",BAR3D:"Bar3D",CIRCLE:"Circle",PIE:"Pie",POINT:"Point",LINE:"Line",RING:"Ring"},CL.ClipAnalystMode=rr,CL.AnalystAreaUnit=nr,CL.AnalystSizeUnit=or,CL.StatisticAnalystMode=ir,CL.SummaryType=ar,CL.TopologyValidatorRule=sr,CL.BucketAggType=ur,CL.MetricsAggType=lr,CL.GetFeatureMode={BOUNDS:"BOUNDS",BUFFER:"BUFFER",ID:"ID",SPATIAL:"SPATIAL",SQL:"SQL"},CL.RasterFunctionType=cr,CL.ResourceType={MAP:"MAP",SERVICE:"SERVICE",SCENE:"SCENE",DATA:"DATA",INSIGHTS_WORKSPACE:"INSIGHTS_WORKSPACE",MAP_DASHBOARD:"MAP_DASHBOARD"},CL.OrderBy={UPDATETIME:"UPDATETIME",HEATLEVEL:"HEATLEVEL",RELEVANCE:"RELEVANCE"},CL.OrderType={ASC:"ASC",DESC:"DESC"},CL.SearchType={PUBLIC:"PUBLIC",MY_RES:"MY_RES",MYGROUP_RES:"MYGROUP_RES",MYDEPARTMENT_RES:"MYDEPARTMENT_RES",SHARETOME_RES:"SHARETOME_RES"},CL.AggregationTypes={TAG:"TAG",TYPE:"TYPE"},CL.PermissionType={SEARCH:"SEARCH",READ:"READ",READWRITE:"READWRITE",DELETE:"DELETE",DOWNLOAD:"DOWNLOAD"},CL.EntityType={DEPARTMENT:"DEPARTMENT",GROUP:"GROUP",IPORTALGROUP:"IPORTALGROUP",ROLE:"ROLE",USER:"USER"},CL.WebExportFormatType={PNG:"PNG",PDF:"PDF"},CL.WebScaleOrientationType={HORIZONTALLABELSBELOW:"HORIZONTALLABELSBELOW",HORIZONTALLABELSABOVE:"HORIZONTALLABELSABOVE",VERTICALLABELSLEFT:"VERTICALLABELSLEFT",VERTICALLABELSRIGHT:"VERTICALLABELSRIGHT"},CL.WebScaleType={LINE:"LINE",BAR:"BAR",BAR_SUB:"BAR_SUB"},CL.WebScaleUnit={METER:"METER",FOOT:"FOOT",DEGREES:"DEGREES"},CL.KnowledgeGraph=Th;var QU=function(){try{return convert}catch(e){return{}}}(),$U=r.n(QU),eV=function(){try{return canvg}catch(e){return{}}}(),tV=r.n(eV);function rV(e){"@babel/helpers - typeof";return(rV="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function nV(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function oV(e,t){return(oV=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function iV(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=aV(e);if(t){var o=aV(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===rV(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function aV(e){return(aV=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var sV=["559082264.0287178","279541132.0143589","139770566.0071794","69885283.00358972","34942641.50179486","17471320.75089743","8735660.375448715","4367830.1877224357","2183915.093862179","1091957.546931089","545978.7734655447","272989.7734655447","272989.3867327723","136494.6933663862","68247.34668319309","34123.67334159654","17061.83667079827","8530.918335399136","4265.459167699568","2132.729583849784"],uV=["5.590822640287176E8","2.795411320143588E8","1.397705660071794E8","6.98852830035897E7","3.494264150179485E7","1.7471320750897426E7","8735660.375448713","4367830.187724357","2183915.0938621783","1091957.5469310891","545978.7734655446","272989.3867327723","136494.69336638614","68247.34668319307","34123.673341596535","17061.836670798268","8530.918335399134"],lV=["GoogleCRS84Quad","GoogleMapsCompatible"],cV=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&oV(e,t)}(a,o().Evented);var t,r,n,i=iV(a);function a(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(r=i.call(this)).mapId=e,t=t||{},r.server=t.server,r.credentialKey=t.credentialKey,r.credentialValue=t.credentialValue,r.withCredentials=t.withCredentials||!1,r.target=t.target||"map",r._canvgsV=[],r._createWebMap(),r.on("mapinitialized",function(){r.map.on("remove",function(){r._stopCanvg()})}),r}return t=a,(r=[{key:"resize",value:function(){this.map.resize()}},{key:"setMapId",value:function(e){this.mapId=e,this._createWebMap()}},{key:"setWebMapOptions",value:function(e){this.server=e.server,this._createWebMap()}},{key:"setMapOptions",value:function(e){var t=e.center,r=e.zoom,n=e.maxBounds,o=e.minZoom,i=e.maxZoom,a=e.isWorldCopy,s=e.bearing,u=e.pitch;t&&t.length&&this.map.setCenter(t),r&&this.map.setZoom(r),n&&this.map.setMaxBounds(n),o&&this.map.setMinZoom(o),i&&this.map.setMaxZoom(i),a&&this.map.setRenderWorldCopies(a),s&&this.map.setBearing(s),u&&this.map.setPitch(u)}},{key:"_createWebMap",value:function(){var e=this.server.split("");"/"!==e[e.length-1]&&(this.server+="/");var t=this.server+"web/maps/"+this.mapId+"/map";this.credentialValue&&this.credentialKey&&(t+="?"+this.credentialKey+"="+this.credentialValue);var r="getUrlResource.json?url=";if(this.excludePortalProxyUrl&&this.server.indexOf(r)>-1){var n=this.server.split(r);n.length>1&&(t=n[0]+r+this.server+"web/maps/"+this.mapId+"/map.json")}this._getMapInfo(t)}},{key:"_createMap",value:function(e){var t=[],r=e.layers;r&&r.length>0&&r.forEach(function(e){e.labelStyle&&t.push(e.labelStyle.fontFamily)},this),t.push("'supermapol-icons'");var n,i=t.join(","),a=e.center,s=e.level||0,u=0;if(e.minScale&&e.maxScale)u=this._transformScaleToZoom(e.minScale,o().CRS?o().CRS.get(this.baseProjection):"EPSG:3857");else{var l=this._getResolution(o().CRS?o().CRS.get(this.baseProjection).getExtent():[-20037508.3427892,-20037508.3427892,20037508.3427892,20037508.3427892])/this._getResolution(e.extent);u=+Math.log(l)/Math.LN2.toFixed(2)}s+=u,n=a?this._unproject([a.x,a.y]):new(o().LngLat)(0,0),this.map=new(o().Map)({container:this.target,center:n,zoom:s,style:{version:8,sources:{},layers:[]},crs:this.baseProjection,localIdeographFontFamily:i||""}),this.fire("mapinitialized")}},{key:"_getMapInfo",value:function(e){var t=this,r=-1===e.indexOf(".json")?"".concat(e,".json"):e;Al.get(r,null,{withCredentials:this.withCredentials}).then(function(e){return e.json()}).then(function(e){t.baseProjection=e.projection,t.mapParams={title:e.title,description:e.description};if(!(t.baseProjection in{"EPSG:4490":"EPSG:4490","EPSG:4214":"EPSG:4214","EPSG:4610":"EPSG:4610","EPSG:3857":"EPSG:3857","EPSG:4326":"EPSG:4326"}))throw Error(Az.i18n("msg_crsunsupport"));t._createMap(e,t.mapSetting);var r=e.layers;t.map.on("load",function(){t._addBaseMap(e),r&&0!==r.length?t._addLayers(r):t._sendMapToUser(0,0)})}).catch(function(e){t.fire("getmapfailed",{error:e})})}},{key:"_addBaseMap",value:function(e){this._createBaseLayer(e)}},{key:"_createBaseLayer",value:function(e){var t=e.baseLayer||e,r=t.layerType;(r.indexOf("TIANDITU_VEC")>-1||r.indexOf("TIANDITU_IMG")>-1||r.indexOf("TIANDITU_TER")>-1)&&(r=r.substr(0,12));var n;switch(r){case"TIANDITU_VEC":case"TIANDITU_IMG":case"TIANDITU_TER":this._createTiandituLayer(e);break;case"BING":this._createBingLayer(t.name);break;case"WMS":this._createWMSLayer(t);break;case"WMTS":this._createWMTSLayer(t);break;case"TILE":case"SUPERMAP_REST":this._createDynamicTiledLayer(t);break;case"CLOUD":case"CLOUD_BLACK":case"OSM":case"JAPAN_ORT":case"JAPAN_RELIEF":case"JAPAN_PALE":case"JAPAN_STD":case"GOOGLE_CN":case"GOOGLE":n={CLOUD:"http://t2.dituhui.com/FileService/image?map=quanguo&type=web&x={x}&y={y}&z={z}",CLOUD_BLACK:"http://t3.dituhui.com/MapService/getGdp?x={x}&y={y}&z={z}",OSM:"http://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png",GOOGLE:"https://www.google.cn/maps/vt/pb=!1m4!1m3!1i{z}!2i{x}!3i{y}!2m3!1e0!2sm!3i380072576!3m8!2szh-CN!3scn!5e1105!12m4!1e68!2m2!1sset!2sRoadmap!4e0!5m1!1e0",GOOGLE_CN:"https://mt{0-3}.google.cn/vt/lyrs=m&hl=zh-CN&gl=cn&x={x}&y={y}&z={z}",JAPAN_STD:"https://cyberjapandata.gsi.go.jp/xyz/std/{z}/{x}/{y}.png",JAPAN_PALE:"https://cyberjapandata.gsi.go.jp/xyz/pale/{z}/{x}/{y}.png",JAPAN_RELIEF:"https://cyberjapandata.gsi.go.jp/xyz/relief/{z}/{x}/{y}.png",JAPAN_ORT:"https://cyberjapandata.gsi.go.jp/xyz/ort/{z}/{x}/{y}.jpg"}[r],this._createXYZLayer(t,n);break;case"MAPBOXSTYLE":this._createMapboxStyle(t)}}},{key:"_createMapboxStyle",value:function(e){var t,r=this,n=e.dataSource,o=void 0===n?{}:n,i=o.serverId,a=o.url;t=void 0!==i?"".concat(this.server,"web/datas/").concat(i,"/download"):a,Al.get(t,null,{withCredentials:this.withCredentials,withoutFormatSuffix:!0,headers:{"Content-Type":"application/json;chartset=uft-8"}}).then(function(e){return e.json()}).then(function(e){r._matchStyleObject(e),r.map.setStyle(e)})}},{key:"_matchStyleObject",value:function(e){var t=e.sprite,r=e.glyphs;t&&"object"===rV(t)&&(e.sprite=Object.values(t)[0]),r&&"object"===rV(r)&&(e.glyphs=Object.values(r)[0])}},{key:"_createTiandituLayer",value:function(e){var t=this._getTiandituUrl(e),r=e.baseLayer.layerType,n=Boolean(e.baseLayer.labelLayerVisible),o=t.labelUrl,i=t.tiandituUrl;this._addBaselayer(i,"tianditu-layers-"+r),n&&this._addBaselayer(o,"tianditu-label-layers-"+r)}},{key:"_createWMTSLayer",value:function(e){var t=this,r=this._getWMTSUrl(e);this._filterWMTSIsMatched(e,function(n,o){n&&t._addBaselayer([r],"wmts-layers"+e.name,0,o)})}},{key:"_filterWMTSIsMatched",value:function(e,t){var r=this,n=!1,o=22,i=e.url;Al.get(i,null,{withCredentials:!1,withoutFormatSuffix:!0}).then(function(e){return e.text()}).then(function(i){var a=$U()?$U():window.convert,s=JSON.parse(a.xml2json(i,{compact:!0,spaces:4})).Capabilities.Contents.TileMatrixSet;Array.isArray(s)||(s=[s]);for(var u=0;u<s.length;u++)if(s[u]["ows:Identifier"]&&s[u]["ows:Identifier"]._text===e.tileMatrixSet)if(lV.indexOf(s[u].WellKnownScaleSet._text)>-1)n=!0;else{if(!s[u].WellKnownScaleSet||"Custom"!==s[u].WellKnownScaleSet._text)throw Error(Az.i18n("msg_tilematrixsetunsupport"));for(var l=[],c="EPSG:3857"===r.map.crs?sV:uV,f=0,h=c.length;f<h&&s[u].TileMatrix[f]&&c[f]===s[u].TileMatrix[f].ScaleDenominator._text;f++)l.push(c[f]);if(o=l.length-1,0===l.length)throw Error(Az.i18n("msg_tilematrixsetunsupport"));n=!0}t(n,o)}).catch(function(e){r.fire("getwmtsfailed",{error:e,map:r.map})})}},{key:"_createBingLayer",value:function(e){this.addLayer(["https://dynamic.t0.tiles.ditu.live.com/comp/ch/{quadkey}?it=G,TW,L,LA&mkt=zh-cn&og=109&cstl=w4c&ur=CN&n=z"],"bing-layers-"+e)}},{key:"_createXYZLayer",value:function(e,t){var r=[];if("OSM"===e.layerType){for(var n=t.match(/\w\-\w/g)[0],o=n[0],i=n[2],a="",s=97;s<123;s++)a+=String.fromCharCode(s);for(var u=a.split(""),l=u.indexOf(o),c=u.indexOf(i),f=u.slice(l,c+1),h=0;h<f.length;h++){var p=t.replace(/{\w\-\w}/g,f[h]);r.push(p)}}else if("GOOGLE_CN"===e.layerType)for(var d=t.match(/\d\-\d/g)[0],y=d[0],v=d[2],g=y;g<=v;g++){var m=t.replace(/{\d\-\d}/g,g);r.push(m)}else r=[t];this._addBaselayer(r,"XYZ-layers-"+e.name)}},{key:"_createDynamicTiledLayer",value:function(e){var t=e.url,r=e.layerID||e.name,n=e.minzoom,o=e.maxzoom;this._addBaselayer([t],r,n,o,!0)}},{key:"_createWMSLayer",value:function(e){var t=this._getWMSUrl(e);this._addBaselayer([t],"WMS-layers-"+e.name)}},{key:"_createVectorLayer",value:function(e,t){var r=e.style,n=e.featureType,o=e.layerID,i=e.visible,a={};a.style=this._transformStyleToMapBoxGl(r,n),a.layout={visibility:i};var s={type:"geojson",data:{type:"FeatureCollection",features:t}};this._addOverlayToMap(n,s,o,a),"POLYGON"===n&&r.strokeColor&&this._addStrokeLineForPoly(r,s,o+"-strokeLine",i)}},{key:"_getTiandituUrl",value:function(e){for(var t=/t0/gi,r={},n=e.baseLayer.layerType.split("_")[1].toLowerCase(),o=Boolean(e.baseLayer.labelLayerVisible),i="https://t0.tianditu.gov.cn/{layer}_{proj}/wmts?",a=i,s="EPSG:4326"===this.baseProjection?"c":"w",u={service:"WMTS",request:"GetTile",style:"default",version:"1.0.0",layer:n,tilematrixSet:s,format:"tiles",width:256,height:256},l=(i+=this._getParamString(u,i)+"&tilematrix={z}&tilerow={y}&tilecol={x}").replace("{layer}",n).replace("{proj}",s),c=[],f=0;f<8;f++)c.push(l.replace(t,"t".concat(f)));if(r.tiandituUrl=c,o){var h={vec:"cva",ter:"cta",img:"cia"}[n];u.layer=h,a=(a+=this._getParamString(u,a)+"&tilematrix={z}&tilerow={y}&tilecol={x}").replace("{layer}",h).replace("{proj}",s);for(var p=[],d=0;d<8;d++)p.push(a.replace(t,"t".concat(d)));r.labelUrl=p}return r}},{key:"_getWMSUrl",value:function(e){var t=e.url,r=(t=t.split("?")[0]).split("/"),n={service:"WMS",request:"GetMap",layers:r[r.length-1],styles:"",format:"image/png",transparent:"true",version:"1.1.1",width:256,height:256,srs:this.baseProjection},o="EPSG:4326"===this.baseProjection?"{bbox-epsg-4326}":"{bbox-epsg-3857}";return t+=this._getParamString(n,t)+"&bbox=".concat(o)}},{key:"_addLayers",value:function(e){var t=this;this.layers=e;var r,n=0,o=e.length;e.forEach(function(e,i){if(e.dataSource&&e.dataSource.serverId||"MARKER"===e.layerType){var a=e.dataSource?e.dataSource.serverId:e.serverId,s="".concat(t.server,"web/datas/").concat(a,"/content.json?pageSize=9999999&currentPage=1");a&&Al.get(s,null,{withCredentials:t.withCredentials}).then(function(e){return e.json()}).then(function(a){if(!1===a.succeed)return n++,t._sendMapToUser(n,o),void t.fire("getlayersfailed",{error:a.error,map:t.map});a.type&&("JSON"===a.type||"GEOJSON"===a.type?(a.content=JSON.parse(a.content.trim()),r=t._formatGeoJSON(a.content,e)):"EXCEL"!==a.type&&"CSV"!==a.type||(r=t._excelData2Feature(a.content,e)),t._addLayer(e,r,i),n++,t._sendMapToUser(n,o))}).catch(function(e){n++,t._sendMapToUser(n,o),t.fire("getlayersfailed",{error:e,map:t.map})})}else if("SUPERMAP_REST"===e.layerType||"TILE"===e.layerType||"WMS"===e.layerType||"WMTS"===e.layerType)t._createBaseLayer(e),n++,t._sendMapToUser(n,o);else if(e.dataSource&&"REST_DATA"===e.dataSource.type){var u=e.dataSource;t._getFeatureBySQL(u.url,[u.dataSourseName||e.name],function(a){r=t._parseGeoJsonData2Feature({allDatas:{features:a.result.features.features},fileCode:e.projection,featureProjection:t.baseProjection}),t._addLayer(e,r,i),n++,t._sendMapToUser(n,o)},function(e){n++,t._sendMapToUser(n,o),t.fire("getfeaturesfailed",{error:e})})}else e.dataSource&&"REST_MAP"===e.dataSource.type&&e.dataSource.url&&t._queryFeatureBySQL(e.dataSource.url,e.dataSource.layerName,"smid=1",null,null,function(r){var a=r&&r.result.recordsets,s=a&&a[0],u=s.fields;if(s&&u){var l=[];for(var c in u){var f=u[c];0===f.indexOf("Sm")&&"SmID"!==f||l.push(f)}t._getFeatures(l,e,function(r){t._addLayer(e,r,i),n++,t._sendMapToUser(n,o)},function(e){n++,t.fire("getfeaturesfailed",{error:e,map:t.map})})}},function(e){t.fire("getlayersfailed",{error:e,map:t.map})})},this)}},{key:"_getFeatures",value:function(e,t,r,n){var o=this,i=t.dataSource,a=t.projection;this._queryFeatureBySQL(i.url,i.layerName,null,e,null,function(e){var t=e.result.recordsets[0].features.features,n=o._parseGeoJsonData2Feature({allDatas:{features:t},fileCode:a,featureProjection:o.baseProjection},"JSON");r(n)},function(e){n(e)})}},{key:"_addLayer",value:function(e,t,r){var n=e.layerType;e.layerID=n+"-"+e.name+"-"+r,e.visible=e.visible?"visible":"none",t[0]&&"Polygon"===t[0].geometry.type&&(t=this._handleMultyPolygon(t)),e.style&&e.filterCondition&&"RANGE"!==n&&"UNIQUE"!==n&&(t=this._getFiterFeatures(e.filterCondition,t)),"VECTOR"===n?"POINT"===e.featureType?"SYMBOL_POINT"===e.style.type?this._createSymbolLayer(e,t):this._createGraphicLayer(e,t):this._createVectorLayer(e,t):"UNIQUE"===n?this._createUniqueLayer(e,t):"RANGE"===n?this._createRangeLayer(e,t):"HEAT"===n?this._createHeatLayer(e,t):"MARKER"===n&&this._createMarkerLayer(e,t),e.labelStyle&&e.labelStyle.labelField&&this._addLabelLayer(e,t)}},{key:"_addLabelLayer",value:function(e,t){var r=e.labelStyle;this.map.addLayer({id:e.layerID+"label",type:"symbol",source:{type:"geojson",data:{type:"FeatureCollection",features:t}},paint:{"text-color":r.fill},layout:{"text-field":"{".concat(r.labelField,"}"),"text-size":parseFloat(r.fontSize)||12,"text-offset":r.offsetX?[r.offsetX/10||0,r.offsetY/10||0]:[0,-1.5],"text-font":["DIN Offc Pro Italic","Arial Unicode MS Regular"],visibility:e.visible}})}},{key:"_createSymbolLayer",value:function(e,t){document.getElementById("".concat(this.target)).classList.add("supermapol-icons-map");var r=e.style,n=e.style.unicode,o=String.fromCharCode(parseInt(n.replace(/^&#x/,""),16)),i=e.layerID;this.map.addSource(i+"-source",{type:"geojson",data:{type:"FeatureCollection",features:[]}}),this.map.addLayer({id:i,type:"symbol",source:i+"-source",paint:{"text-color":r.fillColor},layout:{"text-field":o,"text-font":["DIN Offc Pro Italic","Arial Unicode MS Regular"],visibility:e.visible}}),this.map.getSource(i+"-source").setData({type:"FeatureCollection",features:t})}},{key:"_createGraphicLayer",value:function(e,t){var r=this,n=e.style,o={},i=e.layerID,a={type:"geojson",data:{type:"FeatureCollection",features:t}};if("IMAGE_POINT"===n.type){var s=n.imageInfo,u=s.img;u&&u.src||(s.url=this.server+s.url),this.map.loadImage(s.url||u.src,function(t,o){t&&console.log(t);var s=2*Number.parseFloat((n.radius/o.height).toFixed(2));r.map.addImage("imageIcon",o),r.map.addLayer({id:i,type:"symbol",source:a,layout:{"icon-image":"imageIcon","icon-size":s,visibility:e.visible}})})}else if("SVG_POINT"===n.type){var l=n.url;this.svgDiv||(this.svgDiv=document.createElement("div"),document.body.appendChild(this.svgDiv)),this._getCanvasFromSVG(l,this.svgDiv,function(t){var o=t.toDataURL("img/png");o&&r.map.loadImage(o,function(o,s){o&&console.log(o);var u=Number.parseFloat((n.radius/t.width).toFixed(2));r.map.addImage("imageIcon",s),r.map.addLayer({id:i,type:"symbol",source:a,layout:{"icon-image":"imageIcon","icon-size":u,visibility:e.visible}})},r)})}else o.style=this._transformStyleToMapBoxGl(n,e.featureType),o.layout={visibility:e.visible},this._addOverlayToMap("POINT",a,i,o)}},{key:"_createUniqueLayer",value:function(e,t){var r=this._getUniqueStyleGroup(e,t);t=this._getFiterFeatures(e.filterCondition,t);var n=e.style,o={},i=e.themeSetting.themeField,a=e.featureType,s=["match",["get","index"]],u=e.layerID;t.forEach(function(e){r.forEach(function(t){t.value===e.properties[i]&&s.push(e.properties.index,t.color)})}),s.push("#ffffff"),o.style=this._transformStyleToMapBoxGl(n,a,s);var l=e.visible;o.layout={visibility:l};var c={type:"geojson",data:{type:"FeatureCollection",features:t}};this._addOverlayToMap(a,c,u,o),"POLYGON"===a&&n.strokeColor&&this._addStrokeLineForPoly(n,c,u+"-strokeLine",l)}},{key:"_getUniqueStyleGroup",value:function(e,t){var r=e.featureType,n=e.style,o=e.themeSetting,i=o.themeField,a=o.colors,s=[],u=o.customSettings;for(var l in t){var c=t[l].properties[i],f=!1;for(var h in s)if(s[h]===c){f=!0;break}f||s.push(c)}var p=a||this.defaultParameters.colors;p=rG.getGradientColors(p,s.length);var d=[];return s.forEach(function(e,t){var o=p[t];e in u&&(o=u[e]),"LINE"===r?n.strokeColor=o:n.fillColor=o,d.push({color:o,value:e})},this),d}},{key:"_getWMTSUrl",value:function(e){var t={service:"WMTS",request:"GetTile",version:"1.0.0",style:"default",layer:e.layer,tilematrixSet:e.tileMatrixSet,format:"image/png"},r=e.url;return r+=this._getParamString(t,r)+"&tilematrix={z}&tilerow={y}&tilecol={x}"}},{key:"_createMarkerLayer",value:function(e,t){var r=this;t&&t.forEach(function(t){var n=t.geometry.type.toUpperCase(),o=t.dv_v5_markerStyle;"POINT"===n&&o.text&&(n="TEXT");var i=r.setFeatureInfo(t);t.properties.useStyle=o,t.properties.featureInfo=i,"POINT"===n&&o.src&&-1===o.src.indexOf("http://")&&-1===o.src.indexOf("https://")&&(o.src=r.server+o.src);var a={type:"geojson",data:t},s=t.properties.index,u=n+"-"+s;if("POINT"===n&&o.src&&o.src.indexOf("svg")<=-1&&r.map.loadImage(o.src,function(t,n){t&&console.log(t),r.map.addImage(s+"",n),r.map.addLayer({id:u,type:"symbol",source:a,layout:{"icon-image":s+"","icon-size":o.scale,visibility:e.visible}})},r),"POINT"===n&&o.src&&o.src.indexOf("svg")>-1&&(r.svgDiv||(r.svgDiv=document.createElement("div"),document.body.appendChild(r.svgDiv)),r._getCanvasFromSVG(o.src,r.svgDiv,function(t){var n=t.toDataURL("img/png");n&&r.map.loadImage(n,function(t,n){t&&console.log(t),r.map.addImage(s+"",n),r.map.addLayer({id:u,type:"symbol",source:a,layout:{"icon-image":s+"","icon-size":o.scale,visibility:e.visible}})},r)})),!o.src){var l={layout:{}};"LINESTRING"===n&&o.lineCap&&(n="LINE",l.layout={"line-cap":o.lineCap});var c=e.visible;l.layout.visibility=c,l.style=r._transformStyleToMapBoxGl(o,n),r._addOverlayToMap(n,a,u,l),"POLYGON"===n&&o.strokeColor&&r._addStrokeLineForPoly(o,a,u+"-strokeLine",c)}},this)}},{key:"setFeatureInfo",value:function(e){var t,r=e.dv_v5_markerInfo;if(!r||!r.dataViz_title)return r;t=r;var n=e.properties;for(var o in t)n[o]&&(t[o]=n[o],delete n[o]);return t}},{key:"_createHeatLayer",value:function(e,t){var r=e.themeSetting,n={};n.gradient=r.colors.slice(),n.radius=parseInt(r.radius);var o=r.customSettings;for(var i in o)n.gradient[i]=o[i];r.weight&&this._changeWeight(t,r.weight);var a=["interpolate",["linear"],["heatmap-density"]],s=(1/n.gradient.length).toFixed(2);n.gradient.forEach(function(e,t){a.push(t*s),0===t&&(e=xr.hexToRgba(e,0)),a.push(e)});var u={"heatmap-color":a,"heatmap-radius":r.radius+15,"heatmap-intensity":{base:1,stops:[[0,.8],[22,1]]}};if(t[0].weight&&t.length>=4){var l=[];t.forEach(function(e){l.push(e.weight)});var c=oG.getMax(l),f=oG.getMin(l);u["heatmap-weight"]=["interpolate",["linear"],["get","weight"],f,0,c,1]}this.map.addLayer({id:e.layerID,type:"heatmap",source:{type:"geojson",data:{type:"FeatureCollection",features:t}},paint:u})}},{key:"_changeWeight",value:function(e,t){this.fieldMaxValue={},this._getMaxValue(e,t);var r=this.fieldMaxValue[t];e.forEach(function(e){var n=e.properties[t];e.weight=n/r})}},{key:"_getMaxValue",value:function(e,t){var r,n=[],o=t;this.fieldMaxValue[o]||(e.forEach(function(e){(r=e.properties)&&parseFloat(r[o])&&n.push(parseFloat(r[o]))}),this.fieldMaxValue[o]=oG.getArrayStatistic(n,"Maximum"))}},{key:"_createRangeLayer",value:function(e,t){var r=e.themeSetting.themeField,n=e.style,o=e.featureType,i=this._getRangeStyleGroup(e,t),a={type:"geojson",data:{type:"FeatureCollection",features:t=this._getFiterFeatures(e.filterCondition,t)}},s=["match",["get","index"]];t.forEach(function(e){for(var t=parseFloat(e.properties[r]),n=0;n<i.length;n++)i[n].start<=t&&t<i[n].end&&s.push(e.properties.index,i[n].color);!t&&s.push(e.properties.index,"rgba(0, 0, 0, 0)")},this),s.push("rgba(0, 0, 0, 0)");var u={layout:{}};"LINE"===o&&n.lineCap&&(u.layout={"line-cap":n.lineCap});var l=e.visible;u.layout.visibility=l,u.style=this._transformStyleToMapBoxGl(n,o,s);var c=e.layerID;this._addOverlayToMap(o,a,c,u),"POLYGON"===o&&n.strokeColor&&this._addStrokeLineForPoly(n,a,c+"-strokeline",l)}},{key:"_getFiterFeatures",value:function(e,t){if(!e)return t;for(var r=this._replaceFilterCharacter(e),n=[],o=0;o<t.length;o++){var i=t[o],a=!1;try{var s=i.properties,u=JU(r,Object.keys(s)),l=ZU(s),c="select * from json where ("+u+")";a=window.jsonsql.query(c,{attr:l})}catch(e){continue}a&&a.length>0&&n.push(i)}return n}},{key:"_replaceFilterCharacter",value:function(e){return e=e.replace(/=/g,"==").replace(/AND|and/g,"&&").replace(/or|OR/g,"||").replace(/<==/g,"<=").replace(/>==/g,">=")}},{key:"_getRangeStyleGroup",value:function(e,t){var r,n=e.featureType,o=e.style,i=[],a=e.themeSetting,s=a.customSettings,u=a.themeField,l=a.segmentCount;t.forEach(function(e){(r=e.properties||e.get("Properties"))?r[u]&&xr.isNumber(r[u])&&i.push(parseFloat(r[u])):e.get(u)&&xr.isNumber(e.get(u))&&e.get(u)&&i.push(parseFloat(e.get(u)))},this);var c=oG.getArraySegments(i,a.segmentMethod,l);if(c){var f=l;for(var h in r&&c[0]===c[r.length-1]&&(f=1,c.length=2),c){var p=c[h];p=0==h?Math.floor(100*p)/100:Math.ceil(100*p)/100+.1,c[h]=Number(p.toFixed(2))}for(var d=a.colors,y=0;y<f;y++)y in s&&(s[y].segment.start&&(c[y]=s[y].segment.start),s[y].segment.end&&(c[y+1]=s[y].segment.end));for(var v=[],g=0;g<f;g++){var m=d[g];g in s&&s[g].color&&(m=s[g].color),"LINE"===n?o.strokeColor=m:o.fillColor=m;var b=c[g],w=c[g+1],_=JSON.parse(JSON.stringify(o));v.push({style:_,color:m,start:b,end:w})}return v}}},{key:"_formatGeoJSON",value:function(e){var t=e.features;return t.forEach(function(e,t){e.properties.index=t}),t}},{key:"_excelData2Feature",value:function(e){for(var t=e.colTitles,r=-1,n=-1,o=0,i=t.length;o<i;o++)this._isXField(t[o])&&(r=o),this._isYField(t[o])&&(n=o);for(var a=[],s=0,u=e.rows.length;s<u;s++){var l=e.rows[s],c=Number(l[r]),f=Number(l[n]),h={};for(var p in e.colTitles){h[e.colTitles[p]]=e.rows[s][p]}h.index=s+"";var d={type:"Feature",geometry:{type:"Point",coordinates:[c,f]},properties:h};a.push(d)}return a}},{key:"_sendMapToUser",value:function(e,t){e===t&&this.fire("addlayerssucceeded",{map:this.map,mapparams:this.mapParams,layers:this.layers})}},{key:"_unproject",value:function(e){for(var t,r=180/Math.PI,n=6378137,i=Math.exp(-e[1]/n),a=Math.PI/2-2*Math.atan(i),s=0,u=.1;s<15&&Math.abs(u)>1e-7;s++)t=1,a+=u=Math.PI/2-2*Math.atan(i*t)-a;return new(o().LngLat)(e[0]*r/n,a*r)}},{key:"_getParamString",value:function(e,t,r){var n=[];for(var o in e)n.push((r?o.toUpperCase():o)+"="+e[o]);return(t&&-1!==t.indexOf("?")?"&":"?")+n.join("&")}},{key:"_isXField",value:function(e){var t=e.toLowerCase();return"x"===t||"smx"===t||"jd"===t||"ç»åº¦"===t||"ä¸ç»"===t||"longitude"===t||"lot"===t||"lon"===t||"lng"===t}},{key:"_isYField",value:function(e){var t=e.toLowerCase();return"y"===t||"smy"===t||"wd"===t||"çº¬åº¦"===t||"åçº¬"===t||"latitude"===t||"lat"===t}},{key:"_transformStyleToMapBoxGl",value:function(e,t,r){var n={};"POINT"!==e.type&&"BASIC_POINT"!==e.type&&"POINT"!==t||"LINE"===t?"LINE"===t?n={strokeWidth:"line-width",strokeColor:"line-color",strokeOpacity:"line-opacity"}:"POLYGON"===t&&(n={fillColor:"fill-color",fillOpacity:"fill-opacity",strokeColor:"fill-outline-color"}):n={fillColor:"circle-color",strokeWidth:"circle-stroke-width",fillOpacity:"circle-opacity",radius:"circle-radius",strokeColor:"circle-stroke-color",strokeOpacity:"circle-stroke-opacity"};var o={};for(var i in e)n[i]&&(o[n[i]]=e[i]);return r&&(o["circle-color"]?o["circle-color"]=r:o["line-color"]?o["line-color"]=r:o["fill-color"]=r),e.lineDash&&"solid"!==e.lineDash&&"LINE"===t&&(o["line-dasharray"]=this._dashStyle(e)),o}},{key:"_dashStyle",value:function(e){if(!e)return[];var t=e.strokeDashstyle||e.lineDash;switch(t){case"solid":return[];case"dot":return[1,4];case"dash":return[4,4];case"dashdot":return[4,4,1,4];case"longdash":return[8,4];case"longdashdot":return[8,4,1,4];default:return t?j.isArray(t)?t:(t=p.trim(t).replace(/\s+/g,",")).replace(/\[|\]/gi,"").split(","):[]}}},{key:"_getCanvasFromSVG",value:function(e,t,r){var n=this,o=document.createElement("canvas");o.id="dataviz-canvas-"+xr.newGuid(8),o.style.display="none",t.appendChild(o);var i=window.canvg&&window.canvg.default?window.canvg.default:tV(),a=o.getContext("2d");i.from(a,e,{ignoreMouse:!0,ignoreAnimation:!0,forceRedraw:function(){return!1}}).then(function(e){e.start(),n._canvgsV.push(e),o.width>300||o.height>300||r(o)})}},{key:"_stopCanvg",value:function(){this._canvgsV.forEach(function(e){return e.stop()}),this._canvgsV=[]}},{key:"_addOverlayToMap",value:function(e,t,r,n){"circle"!==(e={POINT:"circle",LINE:"line",POLYGON:"fill"}[e])&&"line"!==e&&"fill"!==e||this.map.addLayer({id:r,type:e,source:t,paint:n.style,layout:n.layout||{}})}},{key:"_addBaselayer",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:22,o=arguments.length>4?arguments[4]:void 0;this.map.addLayer({id:t,type:"raster",source:{type:"raster",tiles:e,tileSize:256,rasterSource:o?"iserver":"",prjCoordSys:o?{epsgCode:this.baseProjection.split(":")[1]}:""},minzoom:r,maxzoom:n})}},{key:"_addStrokeLineForPoly",value:function(e,t,r,n){var o={};o.style=this._transformStyleToMapBoxGl(e,"LINE"),o.layout={visibility:n},this._addOverlayToMap("LINE",t,r,o)}},{key:"_parseGeoJsonData2Feature",value:function(e){for(var t=e.allDatas.features,r=[],n=0,o=t.length;n<o;n++){var i=t[n],a=i.geometry.coordinates;"Point"===t[n].geometry.type&&t[n].properties&&(t[n].properties.lon=a[0],t[n].properties.lat=a[1]),i.properties.index=n+"",r.push(i)}return r}},{key:"_getFeatureBySQL",value:function(e,t,r,n){var o,i;o=new Iy({name:t.join().replace(":","@"),attributeFilter:"SMID > 0"}),i=new ov({queryParameter:o,datasetNames:t,fromIndex:0,toIndex:1e5,returnContent:!0}),new fv(e,{eventListeners:{processCompleted:function(e){r&&r(e)},processFailed:function(e){n&&n(e)}}}).processAsync(i)}},{key:"_queryFeatureBySQL",value:function(e,t,r,n,o,i,a,s,u,l){var c,f;c=new Iy({name:t,attributeFilter:r}),n&&(c.fields=n);var h={queryParams:[c]};l&&(h.queryOption=Ct.ATTRIBUTE),s&&(h.startRecord=s),u&&(h.expectCount=u),o&&(h.prjCoordSys={epsgCode:o}),f=new jM(h),new aC(e).queryBySQL(f,function(e){"processCompleted"===e.type?i(e):a(e)})}},{key:"_handleMultyPolygon",value:function(e){return e.forEach(function(e){if("Polygon"===e.geometry.type){var t=e.geometry.coordinates;if(t.length>1){var r=[];t.forEach(function(e){r.push([e])}),e.geometry.coordinates=r,e.geometry.type="MultiPolygon"}}}),e}},{key:"_transformScaleToZoom",value:function(e,t){var r=295829515.2024169;"EPSG:3857"!==(t||this.map.getCRS()).epsgCode&&(r=295295895);var n=e.split(":")[1];return Math.min(24,+Math.log2(r/+n).toFixed(2))}},{key:"_getResolution",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:512;return e.leftBottom&&e.rightTop?Math.max(e.rightTop.x-e.leftBottom.x,e.rightTop.y-e.leftBottom.y)/t:Math.max(e[2]-e[0],e[3]-e[1])/t}}])&&nV(t.prototype,r),n&&nV(t,n),Object.defineProperty(t,"prototype",{writable:!1}),a}();function fV(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function hV(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?fV(Object(r),!0).forEach(function(t){pV(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fV(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function pV(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}o().supermap=hV(hV({},CL),o().supermap),o().supermap.map=o().supermap.map||{},o().supermap.LogoControl=a,o().supermap.Logo=a,o().supermap.Util=xr,o().supermap.WebMap=cV,o().supermap.Graphic=zh,o().supermap.map.getDefaultVectorTileStyle=function(e,t){t=t||{};var r={};r.version=t.version||8,r.layers=t.layers||[],r.light=t.light||{anchor:"viewport",color:"#fcf6ef",intensity:.5,position:[1.15,201,20]};var n={version:r.version,sources:{"vector-tiles":{type:"vector",tiles:[e]}},layers:r.layers,light:r.light};return null!=t.sprite&&(n.sprite=t.sprite),null!=t.glyphs&&(n.glyphs=t.glyphs),n},o().supermap.map.setBackground=function(e,t){t&&e&&e.addLayer({id:"background",type:"background",paint:{"background-color":t}},"background")},o().supermap.map.setPaintProperty=function(e,t,r,n,o,i){if(t&&e){"[object Array]"!==Object.prototype.toString.call(t)&&(t=[t]);for(var a=0;a<t.length;a++){var s=i?i[a]:null,u=Vh(t[a],r,o,s,n);e.addLayer(u,t[a]),e.moveLayer(t[a])}}},o().supermap.MapvDataSet=Uh,o().supermap.GeoFeatureThemeLayer=ss,o().supermap.Theme3DLayer=Is,o().supermap.ThemeFeature=Ir,o().supermap.ThemeLayer=Do,o().supermap.Transform=xu,o().supermap.WebSymbol=Ep,o().supermap.DeckglLayer=cl,o().supermap.GraphicLayer=mu,o().supermap.GraphThemeLayer=Wo,o().supermap.GraticuleLayer=Pl,o().supermap.HeatMapLayer=el,o().supermap.LabelThemeLayer=ys,o().supermap.MapvLayer=Ts,o().supermap.FGBLayer=Of,o().supermap.RangeTheme3DLayer=Gs,o().supermap.RangeThemeLayer=Hs,o().supermap.RankSymbolThemeLayer=Qs,o().supermap.ThreeLayer=Vu,o().supermap.UniqueTheme3DLayer=iu,o().supermap.UniqueThemeLayer=fu,o().supermap.GraphMap=Fh,o().supermap.AddressMatchService=Vp,o().supermap.ChartService=md,o().supermap.DataFlowService=Ad,o().supermap.DatasetService=Kd,o().supermap.DatasourceService=py,o().supermap.FeatureService=cg,o().supermap.FieldService=Vg,o().supermap.GeoprocessingService=gm,o().supermap.GridCellInfosService=im,o().supermap.ImageCollectionService=ML,o().supermap.ImageService=dL,o().supermap.LayerInfoService=O_,o().supermap.MapService=Y_,o().supermap.MeasureService=sx,o().supermap.NetworkAnalyst3DService=VP,o().supermap.NetworkAnalystService=gO,o().supermap.ProcessingService=Dk,o().supermap.QueryService=aC,o().supermap.ServiceBase=Tf,o().supermap.SpatialAnalystService=FI,o().supermap.ThemeService=tR,o().supermap.TrafficTransferAnalystService=DR,o().supermap.WebPrintingJobService=QR,o().supermap.KnowledgeGraphService=th,o().supermap.Components.ChartView=Uz,o().supermap.CommonUtil=j},52174:function(e){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n},e.exports.__esModule=!0,e.exports.default=e.exports},77574:function(e,t,r){var n=r(52174);e.exports=function(e){if(Array.isArray(e))return n(e)},e.exports.__esModule=!0,e.exports.default=e.exports},81121:function(e){function t(e,t,r,n,o,i,a){try{var s=e[i](a),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}e.exports=function(e){return function(){var r=this,n=arguments;return new Promise(function(o,i){var a=e.apply(r,n);function s(e){t(a,o,i,s,u,"next",e)}function u(e){t(a,o,i,s,u,"throw",e)}s(void 0)})}},e.exports.__esModule=!0,e.exports.default=e.exports},46834:function(e){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports},43083:function(e,t,r){var n=r(90597);function o(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,n(o.key),o)}}e.exports=function(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e},e.exports.__esModule=!0,e.exports.default=e.exports},75650:function(e,t,r){var n=r(90597);e.exports=function(e,t,r){return(t=n(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e},e.exports.__esModule=!0,e.exports.default=e.exports},28860:function(e){e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports},26791:function(e){e.exports=function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},e.exports.__esModule=!0,e.exports.default=e.exports},82015:function(e){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},83342:function(e,t,r){var n=r(60549).default;function o(){"use strict";e.exports=o=function(){return r},e.exports.__esModule=!0,e.exports.default=e.exports;var t,r={},i=Object.prototype,a=i.hasOwnProperty,s=Object.defineProperty||function(e,t,r){e[t]=r.value},u="function"==typeof Symbol?Symbol:{},l=u.iterator||"@@iterator",c=u.asyncIterator||"@@asyncIterator",f=u.toStringTag||"@@toStringTag";function h(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{h({},"")}catch(t){h=function(e,t,r){return e[t]=r}}function p(e,t,r,n){var o=t&&t.prototype instanceof w?t:w,i=Object.create(o.prototype),a=new I(n||[]);return s(i,"_invoke",{value:C(e,r,a)}),i}function d(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}r.wrap=p;var y="suspendedStart",v="suspendedYield",g="executing",m="completed",b={};function w(){}function _(){}function x(){}var S={};h(S,l,function(){return this});var O=Object.getPrototypeOf,P=O&&O(O(R([])));P&&P!==i&&a.call(P,l)&&(S=P);var E=x.prototype=w.prototype=Object.create(S);function k(e){["next","throw","return"].forEach(function(t){h(e,t,function(e){return this._invoke(t,e)})})}function M(e,t){function r(o,i,s,u){var l=d(e[o],e,i);if("throw"!==l.type){var c=l.arg,f=c.value;return f&&"object"==n(f)&&a.call(f,"__await")?t.resolve(f.__await).then(function(e){r("next",e,s,u)},function(e){r("throw",e,s,u)}):t.resolve(f).then(function(e){c.value=e,s(c)},function(e){return r("throw",e,s,u)})}u(l.arg)}var o;s(this,"_invoke",{value:function(e,n){function i(){return new t(function(t,o){r(e,n,t,o)})}return o=o?o.then(i,i):i()}})}function C(e,r,n){var o=y;return function(i,a){if(o===g)throw new Error("Generator is already running");if(o===m){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var u=j(s,n);if(u){if(u===b)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===y)throw o=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=g;var l=d(e,r,n);if("normal"===l.type){if(o=n.done?m:v,l.arg===b)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=m,n.method="throw",n.arg=l.arg)}}}function j(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,j(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),b;var i=d(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,b;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,b):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,b)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function R(e){if(e||""===e){var r=e[l];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(a.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(n(e)+" is not iterable")}return _.prototype=x,s(E,"constructor",{value:x,configurable:!0}),s(x,"constructor",{value:_,configurable:!0}),_.displayName=h(x,f,"GeneratorFunction"),r.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},r.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,h(e,f,"GeneratorFunction")),e.prototype=Object.create(E),e},r.awrap=function(e){return{__await:e}},k(M.prototype),h(M.prototype,c,function(){return this}),r.AsyncIterator=M,r.async=function(e,t,n,o,i){void 0===i&&(i=Promise);var a=new M(p(e,t,n,o),i);return r.isGeneratorFunction(t)?a:a.next().then(function(e){return e.done?e.value:a.next()})},k(E),h(E,f,"Generator"),h(E,l,function(){return this}),h(E,"toString",function(){return"[object Generator]"}),r.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},r.values=R,I.prototype={constructor:I,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(A),!e)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],s=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var u=a.call(i,"catchLoc"),l=a.call(i,"finallyLoc");if(u&&l){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,b):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),b},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),A(r),b}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;A(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:R(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),b}},r}e.exports=o,e.exports.__esModule=!0,e.exports.default=e.exports},7637:function(e,t,r){var n=r(77574),o=r(26791),i=r(77630),a=r(82015);e.exports=function(e){return n(e)||o(e)||i(e)||a()},e.exports.__esModule=!0,e.exports.default=e.exports},51285:function(e,t,r){var n=r(60549).default;e.exports=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)},e.exports.__esModule=!0,e.exports.default=e.exports},90597:function(e,t,r){var n=r(60549).default,o=r(51285);e.exports=function(e){var t=o(e,"string");return"symbol"===n(t)?t:String(t)},e.exports.__esModule=!0,e.exports.default=e.exports},60549:function(e){function t(r){"@babel/helpers - typeof";return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},77630:function(e,t,r){var n=r(52174);e.exports=function(e,t){if(e){if("string"==typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports},31364:function(e,t,r){function n(e){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o=r(83342)();e.exports=o;try{regeneratorRuntime=o}catch(e){"object"===("undefined"==typeof globalThis?"undefined":n(globalThis))?globalThis.regeneratorRuntime=o:Function("r","regeneratorRuntime = r")(o)}},41351:function(e,t){"use strict";var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)};function n(e,t,r,n){return new(r||(r=Promise))(function(o,i){function a(e){try{u(n.next(e))}catch(e){i(e)}}function s(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(a,s)}u((n=n.apply(e,t||[])).next())})}function o(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}function i(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function a(e){return this instanceof a?(this.v=e,this):new a(e)}function s(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,o=r.apply(e,t||[]),i=[];return n={},s("next"),s("throw"),s("return"),n[Symbol.asyncIterator]=function(){return this},n;function s(e){o[e]&&(n[e]=function(t){return new Promise(function(r,n){i.push([e,t,r,n])>1||u(e,t)})})}function u(e,t){try{(r=o[e](t)).value instanceof a?Promise.resolve(r.value.v).then(l,c):f(i[0][2],r)}catch(e){f(i[0][3],e)}var r}function l(e){u("next",e)}function c(e){u("throw",e)}function f(e,t){e(t),i.shift(),i.length&&u(i[0][0],i[0][1])}}var u=function(e){function t(t){var r=e.call(this,t)||this;return Object.defineProperty(r,"name",{value:"RepeaterOverflowError",enumerable:!1}),"function"==typeof Object.setPrototypeOf?Object.setPrototypeOf(r,r.constructor.prototype):r.__proto__=r.constructor.prototype,"function"==typeof Error.captureStackTrace&&Error.captureStackTrace(r,r.constructor),r}return function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t}(Error),l=function(){function e(e){if(e<0)throw new RangeError("Capacity may not be less than 0");this._c=e,this._q=[]}return Object.defineProperty(e.prototype,"empty",{get:function(){return 0===this._q.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"full",{get:function(){return this._q.length>=this._c},enumerable:!1,configurable:!0}),e.prototype.add=function(e){if(this.full)throw new Error("Buffer full");this._q.push(e)},e.prototype.remove=function(){if(this.empty)throw new Error("Buffer empty");return this._q.shift()},e}(),c=function(){function e(e){if(e<1)throw new RangeError("Capacity may not be less than 1");this._c=e,this._q=[]}return Object.defineProperty(e.prototype,"empty",{get:function(){return 0===this._q.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"full",{get:function(){return!1},enumerable:!1,configurable:!0}),e.prototype.add=function(e){for(;this._q.length>=this._c;)this._q.shift();this._q.push(e)},e.prototype.remove=function(){if(this.empty)throw new Error("Buffer empty");return this._q.shift()},e}(),f=function(){function e(e){if(e<1)throw new RangeError("Capacity may not be less than 1");this._c=e,this._q=[]}return Object.defineProperty(e.prototype,"empty",{get:function(){return 0===this._q.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"full",{get:function(){return!1},enumerable:!1,configurable:!0}),e.prototype.add=function(e){this._q.length<this._c&&this._q.push(e)},e.prototype.remove=function(){if(this.empty)throw new Error("Buffer empty");return this._q.shift()},e}();function h(e){null!=e&&"function"==typeof e.then&&e.then(b,b)}var p=0,d=1,y=2,v=3,g=4,m=1024,b=function(){};function w(e){var t=e.err,r=Promise.resolve(e.execution).then(function(e){if(null!=t)throw t;return e});return e.err=void 0,e.execution=r.then(function(){},function(){}),void 0===e.pending?r:e.pending.then(function(){return r})}function _(e,t){var r=e.state>=v;return Promise.resolve(t).then(function(t){return!r&&e.state>=g?w(e).then(function(e){return{value:e,done:!0}}):{value:t,done:r}})}function x(e,t){var r,n;if(!(e.state>=y))if(e.state=y,e.onnext(),e.onstop(),null==e.err&&(e.err=t),0!==e.pushes.length||void 0!==e.buffer&&!e.buffer.empty)try{for(var o=i(e.pushes),a=o.next();!a.done;a=o.next()){a.value.resolve()}}catch(e){r={error:e}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}else S(e)}function S(e){var t,r;if(!(e.state>=v)){e.state<y&&x(e),e.state=v,e.buffer=void 0;try{for(var n=i(e.nexts),o=n.next();!o.done;o=n.next()){var a=o.value,s=void 0===e.pending?w(e):e.pending.then(function(){return w(e)});a.resolve(_(e,s))}}catch(e){t={error:e}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(t)throw t.error}}e.pushes=[],e.nexts=[]}}function O(e){e.state>=g||(e.state<v&&S(e),e.state=g)}function P(e){if(!(e.state>=d)){e.state=d;var t=function(e,t){if(h(t),e.pushes.length>=m)throw new u("No more than "+m+" pending calls to push are allowed on a single repeater.");if(e.state>=y)return Promise.resolve(void 0);var r,n=void 0===e.pending?Promise.resolve(t):e.pending.then(function(){return t});n=n.catch(function(t){e.state<y&&(e.err=t),O(e)}),e.nexts.length?(e.nexts.shift().resolve(_(e,n)),r=e.nexts.length?Promise.resolve(e.nexts[0].value):new Promise(function(t){return e.onnext=t})):void 0===e.buffer||e.buffer.full?r=new Promise(function(t){return e.pushes.push({resolve:t,value:n})}):(e.buffer.add(n),r=Promise.resolve(void 0));var o=!0,i={},a=r.catch(function(e){if(o)throw e});return i.then=function(e,t){return o=!1,Promise.prototype.then.call(r,e,t)},i.catch=function(e){return o=!1,Promise.prototype.catch.call(r,e)},i.finally=r.finally.bind(r),e.pending=n.then(function(){return a}).catch(function(t){e.err=t,O(e)}),i}.bind(null,e),r=function(e){var t=x.bind(null,e),r=new Promise(function(t){return e.onstop=t});return t.then=r.then.bind(r),t.catch=r.catch.bind(r),t.finally=r.finally.bind(r),t}(e);e.execution=new Promise(function(n){return n(e.executor(t,r))}),e.execution.catch(function(){return x(e)})}}var E=new WeakMap,k=function(){function e(e,t){E.set(this,{executor:e,buffer:t,err:void 0,state:p,pushes:[],nexts:[],pending:void 0,execution:void 0,onnext:b,onstop:b})}return e.prototype.next=function(e){h(e);var t=E.get(this);if(void 0===t)throw new Error("WeakMap error");if(t.nexts.length>=m)throw new u("No more than "+m+" pending calls to next are allowed on a single repeater.");if(t.state<=p&&P(t),t.onnext(e),void 0!==t.buffer&&!t.buffer.empty){var r=_(t,t.buffer.remove());if(t.pushes.length){var n=t.pushes.shift();t.buffer.add(n.value),t.onnext=n.resolve}return r}if(t.pushes.length){var o=t.pushes.shift();return t.onnext=o.resolve,_(t,o.value)}return t.state>=y?(S(t),_(t,w(t))):new Promise(function(r){return t.nexts.push({resolve:r,value:e})})},e.prototype.return=function(e){h(e);var t=E.get(this);if(void 0===t)throw new Error("WeakMap error");return S(t),t.execution=Promise.resolve(t.execution).then(function(){return e}),_(t,w(t))},e.prototype.throw=function(e){var t=E.get(this);if(void 0===t)throw new Error("WeakMap error");return t.state<=p||t.state>=y||void 0!==t.buffer&&!t.buffer.empty?(S(t),null==t.err&&(t.err=e),_(t,w(t))):this.next(Promise.reject(e))},e.prototype[Symbol.asyncIterator]=function(){return this},e.race=C,e.merge=j,e.zip=T,e.latest=A,e}();function M(e,t){var r,n,u=[],l=function(e){null!=e&&"function"==typeof e[Symbol.asyncIterator]?u.push(e[Symbol.asyncIterator]()):null!=e&&"function"==typeof e[Symbol.iterator]?u.push(e[Symbol.iterator]()):u.push(function(){return s(this,arguments,function(){return o(this,function(r){switch(r.label){case 0:return t.yieldValues?[4,a(e)]:[3,3];case 1:return[4,r.sent()];case 2:r.sent(),r.label=3;case 3:return t.returnValues?[4,a(e)]:[3,5];case 4:return[2,r.sent()];case 5:return[2]}})})}())};try{for(var c=i(e),f=c.next();!f.done;f=c.next()){l(f.value)}}catch(e){r={error:e}}finally{try{f&&!f.done&&(n=c.return)&&n.call(c)}finally{if(r)throw r.error}}return u}function C(e){var t=this,r=M(e,{returnValues:!0});return new k(function(e,a){return n(t,void 0,void 0,function(){var t,n,s,u,l,c;return o(this,function(f){switch(f.label){case 0:if(!r.length)return a(),[2];n=!1,a.then(function(){t(),n=!0}),f.label=1;case 1:f.trys.push([1,,5,7]),u=void 0,l=0,c=function(){var n,c,f,h,p,d;return o(this,function(o){switch(o.label){case 0:n=l;try{for(p=void 0,c=i(r),f=c.next();!f.done;f=c.next())h=f.value,Promise.resolve(h.next()).then(function(e){e.done?(a(),void 0===s&&(s=e)):l===n&&(l++,t(e))},function(e){return a(e)})}catch(e){p={error:e}}finally{try{f&&!f.done&&(d=c.return)&&d.call(c)}finally{if(p)throw p.error}}return[4,new Promise(function(e){return t=e})];case 1:return void 0===(u=o.sent())?[3,3]:[4,e(u.value)];case 2:o.sent(),o.label=3;case 3:return[2]}})},f.label=2;case 2:return n?[3,4]:[5,c()];case 3:return f.sent(),[3,2];case 4:return[2,s&&s.value];case 5:return a(),[4,Promise.race(r.map(function(e){return e.return&&e.return()}))];case 6:return f.sent(),[7];case 7:return[2]}})})})}function j(e){var t=this,r=M(e,{yieldValues:!0});return new k(function(e,a){return n(t,void 0,void 0,function(){var t,s,u,l=this;return o(this,function(c){switch(c.label){case 0:if(!r.length)return a(),[2];t=[],s=!1,a.then(function(){var e,r;s=!0;try{for(var n=i(t),o=n.next();!o.done;o=n.next()){(0,o.value)()}}catch(t){e={error:t}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}}),c.label=1;case 1:return c.trys.push([1,,3,4]),[4,Promise.all(r.map(function(r,i){return n(l,void 0,void 0,function(){var n;return o(this,function(o){switch(o.label){case 0:o.trys.push([0,,6,9]),o.label=1;case 1:return s?[3,5]:(Promise.resolve(r.next()).then(function(e){return t[i](e)},function(e){return a(e)}),[4,new Promise(function(e){t[i]=e})]);case 2:return void 0===(n=o.sent())?[3,4]:n.done?(u=n,[2]):[4,e(n.value)];case 3:o.sent(),o.label=4;case 4:return[3,1];case 5:return[3,9];case 6:return r.return?[4,r.return()]:[3,8];case 7:o.sent(),o.label=8;case 8:return[7];case 9:return[2]}})})}))];case 2:return c.sent(),[2,u&&u.value];case 3:return a(),[7];case 4:return[2]}})})})}function T(e){var t=this,r=M(e,{returnValues:!0});return new k(function(e,i){return n(t,void 0,void 0,function(){var t,n,a,s;return o(this,function(o){switch(o.label){case 0:if(!r.length)return i(),[2,[]];n=!1,i.then(function(){t(),n=!0}),o.label=1;case 1:o.trys.push([1,,6,8]),o.label=2;case 2:return n?[3,5]:(Promise.all(r.map(function(e){return e.next()})).then(function(e){return t(e)},function(e){return i(e)}),[4,new Promise(function(e){return t=e})]);case 3:return void 0===(a=o.sent())?[2]:(s=a.map(function(e){return e.value}),a.some(function(e){return e.done})?[2,s]:[4,e(s)]);case 4:return o.sent(),[3,2];case 5:return[3,8];case 6:return i(),[4,Promise.all(r.map(function(e){return e.return&&e.return()}))];case 7:return o.sent(),[7];case 8:return[2]}})})})}function A(e){var t=this,r=M(e,{yieldValues:!0,returnValues:!0});return new k(function(e,a){return n(t,void 0,void 0,function(){var t,s,u,l,c,f=this;return o(this,function(h){switch(h.label){case 0:if(!r.length)return a(),[2,[]];s=[],u=!1,a.then(function(){var e,r;t();try{for(var n=i(s),o=n.next();!o.done;o=n.next()){(0,o.value)()}}catch(t){e={error:t}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}u=!0}),h.label=1;case 1:return h.trys.push([1,,5,7]),Promise.all(r.map(function(e){return e.next()})).then(function(e){return t(e)},function(e){return a(e)}),[4,new Promise(function(e){return t=e})];case 2:return void 0===(l=h.sent())?[2]:(c=l.map(function(e){return e.value}),l.every(function(e){return e.done})?[2,c]:[4,e(c.slice())]);case 3:return h.sent(),[4,Promise.all(r.map(function(t,r){return n(f,void 0,void 0,function(){var n;return o(this,function(o){switch(o.label){case 0:if(l[r].done)return[2,l[r].value];o.label=1;case 1:return u?[3,4]:(Promise.resolve(t.next()).then(function(e){return s[r](e)},function(e){return a(e)}),[4,new Promise(function(e){return s[r]=e})]);case 2:return void 0===(n=o.sent())?[2,l[r].value]:n.done?[2,n.value]:(c[r]=n.value,[4,e(c.slice())]);case 3:return o.sent(),[3,1];case 4:return[2]}})})}))];case 4:return[2,h.sent()];case 5:return a(),[4,Promise.all(r.map(function(e){return e.return&&e.return()}))];case 6:return h.sent(),[7];case 7:return[2]}})})})}t.ZN=k},65064:function(e,t,r){var n,o,i;function a(e){"@babel/helpers - typeof";return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}i=function(){"use strict";function e(t){"@babel/helpers - typeof";return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}var t=/^\s+/,r=/\s+$/;function n(o,i){if(o=o||"",i=i||{},o instanceof n)return o;if(!(this instanceof n))return new n(o,i);var a=function(n){var o={r:0,g:0,b:0},i=1,a=null,s=null,u=null,l=!1,c=!1;"string"==typeof n&&(n=function(e){e=e.replace(t,"").replace(r,"").toLowerCase();var n,o=!1;if(w[e])e=w[e],o=!0;else if("transparent"==e)return{r:0,g:0,b:0,a:0,format:"name"};if(n=I.rgb.exec(e))return{r:n[1],g:n[2],b:n[3]};if(n=I.rgba.exec(e))return{r:n[1],g:n[2],b:n[3],a:n[4]};if(n=I.hsl.exec(e))return{h:n[1],s:n[2],l:n[3]};if(n=I.hsla.exec(e))return{h:n[1],s:n[2],l:n[3],a:n[4]};if(n=I.hsv.exec(e))return{h:n[1],s:n[2],v:n[3]};if(n=I.hsva.exec(e))return{h:n[1],s:n[2],v:n[3],a:n[4]};if(n=I.hex8.exec(e))return{r:P(n[1]),g:P(n[2]),b:P(n[3]),a:C(n[4]),format:o?"name":"hex8"};if(n=I.hex6.exec(e))return{r:P(n[1]),g:P(n[2]),b:P(n[3]),format:o?"name":"hex"};if(n=I.hex4.exec(e))return{r:P(n[1]+""+n[1]),g:P(n[2]+""+n[2]),b:P(n[3]+""+n[3]),a:C(n[4]+""+n[4]),format:o?"name":"hex8"};if(n=I.hex3.exec(e))return{r:P(n[1]+""+n[1]),g:P(n[2]+""+n[2]),b:P(n[3]+""+n[3]),format:o?"name":"hex"};return!1}(n));"object"==e(n)&&(R(n.r)&&R(n.g)&&R(n.b)?(f=n.r,h=n.g,p=n.b,o={r:255*S(f,255),g:255*S(h,255),b:255*S(p,255)},l=!0,c="%"===String(n.r).substr(-1)?"prgb":"rgb"):R(n.h)&&R(n.s)&&R(n.v)?(a=k(n.s),s=k(n.v),o=function(e,t,r){e=6*S(e,360),t=S(t,100),r=S(r,100);var n=Math.floor(e),o=e-n,i=r*(1-t),a=r*(1-o*t),s=r*(1-(1-o)*t),u=n%6;return{r:255*[r,a,i,i,s,r][u],g:255*[s,r,r,a,i,i][u],b:255*[i,i,s,r,r,a][u]}}(n.h,a,s),l=!0,c="hsv"):R(n.h)&&R(n.s)&&R(n.l)&&(a=k(n.s),u=k(n.l),o=function(e,t,r){var n,o,i;function a(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+6*(t-e)*r:r<.5?t:r<2/3?e+(t-e)*(2/3-r)*6:e}if(e=S(e,360),t=S(t,100),r=S(r,100),0===t)n=o=i=r;else{var s=r<.5?r*(1+t):r+t-r*t,u=2*r-s;n=a(u,s,e+1/3),o=a(u,s,e),i=a(u,s,e-1/3)}return{r:255*n,g:255*o,b:255*i}}(n.h,a,u),l=!0,c="hsl"),n.hasOwnProperty("a")&&(i=n.a));var f,h,p;return i=x(i),{ok:l,format:n.format||c,r:Math.min(255,Math.max(o.r,0)),g:Math.min(255,Math.max(o.g,0)),b:Math.min(255,Math.max(o.b,0)),a:i}}(o);this._originalInput=o,this._r=a.r,this._g=a.g,this._b=a.b,this._a=a.a,this._roundA=Math.round(100*this._a)/100,this._format=i.format||a.format,this._gradientType=i.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=a.ok}function o(e,t,r){e=S(e,255),t=S(t,255),r=S(r,255);var n,o,i=Math.max(e,t,r),a=Math.min(e,t,r),s=(i+a)/2;if(i==a)n=o=0;else{var u=i-a;switch(o=s>.5?u/(2-i-a):u/(i+a),i){case e:n=(t-r)/u+(t<r?6:0);break;case t:n=(r-e)/u+2;break;case r:n=(e-t)/u+4}n/=6}return{h:n,s:o,l:s}}function i(e,t,r){e=S(e,255),t=S(t,255),r=S(r,255);var n,o,i=Math.max(e,t,r),a=Math.min(e,t,r),s=i,u=i-a;if(o=0===i?0:u/i,i==a)n=0;else{switch(i){case e:n=(t-r)/u+(t<r?6:0);break;case t:n=(r-e)/u+2;break;case r:n=(e-t)/u+4}n/=6}return{h:n,s:o,v:s}}function a(e,t,r,n){var o=[E(Math.round(e).toString(16)),E(Math.round(t).toString(16)),E(Math.round(r).toString(16))];return n&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0):o.join("")}function s(e,t,r,n){return[E(M(n)),E(Math.round(e).toString(16)),E(Math.round(t).toString(16)),E(Math.round(r).toString(16))].join("")}function u(e,t){t=0===t?0:t||10;var r=n(e).toHsl();return r.s-=t/100,r.s=O(r.s),n(r)}function l(e,t){t=0===t?0:t||10;var r=n(e).toHsl();return r.s+=t/100,r.s=O(r.s),n(r)}function c(e){return n(e).desaturate(100)}function f(e,t){t=0===t?0:t||10;var r=n(e).toHsl();return r.l+=t/100,r.l=O(r.l),n(r)}function h(e,t){t=0===t?0:t||10;var r=n(e).toRgb();return r.r=Math.max(0,Math.min(255,r.r-Math.round(-t/100*255))),r.g=Math.max(0,Math.min(255,r.g-Math.round(-t/100*255))),r.b=Math.max(0,Math.min(255,r.b-Math.round(-t/100*255))),n(r)}function p(e,t){t=0===t?0:t||10;var r=n(e).toHsl();return r.l-=t/100,r.l=O(r.l),n(r)}function d(e,t){var r=n(e).toHsl(),o=(r.h+t)%360;return r.h=o<0?360+o:o,n(r)}function y(e){var t=n(e).toHsl();return t.h=(t.h+180)%360,n(t)}function v(e,t){if(isNaN(t)||t<=0)throw new Error("Argument to polyad must be a positive number");for(var r=n(e).toHsl(),o=[n(e)],i=360/t,a=1;a<t;a++)o.push(n({h:(r.h+a*i)%360,s:r.s,l:r.l}));return o}function g(e){var t=n(e).toHsl(),r=t.h;return[n(e),n({h:(r+72)%360,s:t.s,l:t.l}),n({h:(r+216)%360,s:t.s,l:t.l})]}function m(e,t,r){t=t||6,r=r||30;var o=n(e).toHsl(),i=360/r,a=[n(e)];for(o.h=(o.h-(i*t>>1)+720)%360;--t;)o.h=(o.h+i)%360,a.push(n(o));return a}function b(e,t){t=t||6;for(var r=n(e).toHsv(),o=r.h,i=r.s,a=r.v,s=[],u=1/t;t--;)s.push(n({h:o,s:i,v:a})),a=(a+u)%1;return s}n.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(299*e.r+587*e.g+114*e.b)/1e3},getLuminance:function(){var e,t,r,n=this.toRgb();return e=n.r/255,t=n.g/255,r=n.b/255,.2126*(e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4))+.7152*(t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4))+.0722*(r<=.03928?r/12.92:Math.pow((r+.055)/1.055,2.4))},setAlpha:function(e){return this._a=x(e),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var e=i(this._r,this._g,this._b);return{h:360*e.h,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=i(this._r,this._g,this._b),t=Math.round(360*e.h),r=Math.round(100*e.s),n=Math.round(100*e.v);return 1==this._a?"hsv("+t+", "+r+"%, "+n+"%)":"hsva("+t+", "+r+"%, "+n+"%, "+this._roundA+")"},toHsl:function(){var e=o(this._r,this._g,this._b);return{h:360*e.h,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=o(this._r,this._g,this._b),t=Math.round(360*e.h),r=Math.round(100*e.s),n=Math.round(100*e.l);return 1==this._a?"hsl("+t+", "+r+"%, "+n+"%)":"hsla("+t+", "+r+"%, "+n+"%, "+this._roundA+")"},toHex:function(e){return a(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return function(e,t,r,n,o){var i=[E(Math.round(e).toString(16)),E(Math.round(t).toString(16)),E(Math.round(r).toString(16)),E(M(n))];if(o&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)&&i[3].charAt(0)==i[3].charAt(1))return i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0)+i[3].charAt(0);return i.join("")}(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(100*S(this._r,255))+"%",g:Math.round(100*S(this._g,255))+"%",b:Math.round(100*S(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+Math.round(100*S(this._r,255))+"%, "+Math.round(100*S(this._g,255))+"%, "+Math.round(100*S(this._b,255))+"%)":"rgba("+Math.round(100*S(this._r,255))+"%, "+Math.round(100*S(this._g,255))+"%, "+Math.round(100*S(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(_[a(this._r,this._g,this._b,!0)]||!1)},toFilter:function(e){var t="#"+s(this._r,this._g,this._b,this._a),r=t,o=this._gradientType?"GradientType = 1, ":"";if(e){var i=n(e);r="#"+s(i._r,i._g,i._b,i._a)}return"progid:DXImageTransform.Microsoft.gradient("+o+"startColorstr="+t+",endColorstr="+r+")"},toString:function(e){var t=!!e;e=e||this._format;var r=!1,n=this._a<1&&this._a>=0;return t||!n||"hex"!==e&&"hex6"!==e&&"hex3"!==e&&"hex4"!==e&&"hex8"!==e&&"name"!==e?("rgb"===e&&(r=this.toRgbString()),"prgb"===e&&(r=this.toPercentageRgbString()),"hex"!==e&&"hex6"!==e||(r=this.toHexString()),"hex3"===e&&(r=this.toHexString(!0)),"hex4"===e&&(r=this.toHex8String(!0)),"hex8"===e&&(r=this.toHex8String()),"name"===e&&(r=this.toName()),"hsl"===e&&(r=this.toHslString()),"hsv"===e&&(r=this.toHsvString()),r||this.toHexString()):"name"===e&&0===this._a?this.toName():this.toRgbString()},clone:function(){return n(this.toString())},_applyModification:function(e,t){var r=e.apply(null,[this].concat([].slice.call(t)));return this._r=r._r,this._g=r._g,this._b=r._b,this.setAlpha(r._a),this},lighten:function(){return this._applyModification(f,arguments)},brighten:function(){return this._applyModification(h,arguments)},darken:function(){return this._applyModification(p,arguments)},desaturate:function(){return this._applyModification(u,arguments)},saturate:function(){return this._applyModification(l,arguments)},greyscale:function(){return this._applyModification(c,arguments)},spin:function(){return this._applyModification(d,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(m,arguments)},complement:function(){return this._applyCombination(y,arguments)},monochromatic:function(){return this._applyCombination(b,arguments)},splitcomplement:function(){return this._applyCombination(g,arguments)},triad:function(){return this._applyCombination(v,[3])},tetrad:function(){return this._applyCombination(v,[4])}},n.fromRatio=function(t,r){if("object"==e(t)){var o={};for(var i in t)t.hasOwnProperty(i)&&(o[i]="a"===i?t[i]:k(t[i]));t=o}return n(t,r)},n.equals=function(e,t){return!(!e||!t)&&n(e).toRgbString()==n(t).toRgbString()},n.random=function(){return n.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})},n.mix=function(e,t,r){r=0===r?0:r||50;var o=n(e).toRgb(),i=n(t).toRgb(),a=r/100;return n({r:(i.r-o.r)*a+o.r,g:(i.g-o.g)*a+o.g,b:(i.b-o.b)*a+o.b,a:(i.a-o.a)*a+o.a})},n.readability=function(e,t){var r=n(e),o=n(t);return(Math.max(r.getLuminance(),o.getLuminance())+.05)/(Math.min(r.getLuminance(),o.getLuminance())+.05)},n.isReadable=function(e,t,r){var o,i,a=n.readability(e,t);switch(i=!1,(o=function(e){var t,r;t=((e=e||{level:"AA",size:"small"}).level||"AA").toUpperCase(),r=(e.size||"small").toLowerCase(),"AA"!==t&&"AAA"!==t&&(t="AA");"small"!==r&&"large"!==r&&(r="small");return{level:t,size:r}}(r)).level+o.size){case"AAsmall":case"AAAlarge":i=a>=4.5;break;case"AAlarge":i=a>=3;break;case"AAAsmall":i=a>=7}return i},n.mostReadable=function(e,t,r){var o,i,a,s,u=null,l=0;i=(r=r||{}).includeFallbackColors,a=r.level,s=r.size;for(var c=0;c<t.length;c++)(o=n.readability(e,t[c]))>l&&(l=o,u=n(t[c]));return n.isReadable(e,u,{level:a,size:s})||!i?u:(r.includeFallbackColors=!1,n.mostReadable(e,["#fff","#000"],r))};var w=n.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},_=n.hexNames=function(e){var t={};for(var r in e)e.hasOwnProperty(r)&&(t[e[r]]=r);return t}(w);function x(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function S(e,t){(function(e){return"string"==typeof e&&-1!=e.indexOf(".")&&1===parseFloat(e)})(e)&&(e="100%");var r=function(e){return"string"==typeof e&&-1!=e.indexOf("%")}(e);return e=Math.min(t,Math.max(0,parseFloat(e))),r&&(e=parseInt(e*t,10)/100),Math.abs(e-t)<1e-6?1:e%t/parseFloat(t)}function O(e){return Math.min(1,Math.max(0,e))}function P(e){return parseInt(e,16)}function E(e){return 1==e.length?"0"+e:""+e}function k(e){return e<=1&&(e=100*e+"%"),e}function M(e){return Math.round(255*parseFloat(e)).toString(16)}function C(e){return P(e)/255}var j,T,A,I=(T="[\\s|\\(]+("+(j="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+j+")[,|\\s]+("+j+")\\s*\\)?",A="[\\s|\\(]+("+j+")[,|\\s]+("+j+")[,|\\s]+("+j+")[,|\\s]+("+j+")\\s*\\)?",{CSS_UNIT:new RegExp(j),rgb:new RegExp("rgb"+T),rgba:new RegExp("rgba"+A),hsl:new RegExp("hsl"+T),hsla:new RegExp("hsla"+A),hsv:new RegExp("hsv"+T),hsva:new RegExp("hsva"+A),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function R(e){return!!I.CSS_UNIT.exec(e)}return n},"object"===a(t)?e.exports=i():void 0===(o="function"==typeof(n=i)?n.call(t,r,t,e):n)||(e.exports=o)},4644:function(e,t,r){"use strict";function n(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function o(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function i(){}r.r(t),r.d(t,{interpolate:function(){return se},interpolateArray:function(){return K},interpolateBasis:function(){return B},interpolateBasisClosed:function(){return F},interpolateCubehelix:function(){return it},interpolateCubehelixLong:function(){return at},interpolateDate:function(){return $},interpolateDiscrete:function(){return ue},interpolateHcl:function(){return He},interpolateHclLong:function(){return Xe},interpolateHsl:function(){return xe},interpolateHslLong:function(){return Se},interpolateHue:function(){return le},interpolateLab:function(){return We},interpolateNumber:function(){return ee},interpolateNumberArray:function(){return J},interpolateObject:function(){return re},interpolateRgb:function(){return Y},interpolateRgbBasis:function(){return X},interpolateRgbBasisClosed:function(){return q},interpolateRound:function(){return ce},interpolateString:function(){return ie},interpolateTransformCss:function(){return ve},interpolateTransformSvg:function(){return ge},interpolateZoom:function(){return we},piecewise:function(){return st},quantize:function(){return ut}});var a="\\s*([+-]?\\d+)\\s*",s="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",u="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",l=/^#([0-9a-f]{3,8})$/,c=new RegExp("^rgb\\(".concat(a,",").concat(a,",").concat(a,"\\)$")),f=new RegExp("^rgb\\(".concat(u,",").concat(u,",").concat(u,"\\)$")),h=new RegExp("^rgba\\(".concat(a,",").concat(a,",").concat(a,",").concat(s,"\\)$")),p=new RegExp("^rgba\\(".concat(u,",").concat(u,",").concat(u,",").concat(s,"\\)$")),d=new RegExp("^hsl\\(".concat(s,",").concat(u,",").concat(u,"\\)$")),y=new RegExp("^hsla\\(".concat(s,",").concat(u,",").concat(u,",").concat(s,"\\)$")),v={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function g(){return this.rgb().formatHex()}function m(){return this.rgb().formatRgb()}function b(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=l.exec(e))?(r=t[1].length,t=parseInt(t[1],16),6===r?w(t):3===r?new O(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===r?_(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===r?_(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=c.exec(e))?new O(t[1],t[2],t[3],1):(t=f.exec(e))?new O(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=h.exec(e))?_(t[1],t[2],t[3],t[4]):(t=p.exec(e))?_(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=d.exec(e))?j(t[1],t[2]/100,t[3]/100,1):(t=y.exec(e))?j(t[1],t[2]/100,t[3]/100,t[4]):v.hasOwnProperty(e)?w(v[e]):"transparent"===e?new O(NaN,NaN,NaN,0):null}function w(e){return new O(e>>16&255,e>>8&255,255&e,1)}function _(e,t,r,n){return n<=0&&(e=t=r=NaN),new O(e,t,r,n)}function x(e){return e instanceof i||(e=b(e)),e?new O((e=e.rgb()).r,e.g,e.b,e.opacity):new O}function S(e,t,r,n){return 1===arguments.length?x(e):new O(e,t,r,null==n?1:n)}function O(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}function P(){return"#".concat(C(this.r)).concat(C(this.g)).concat(C(this.b))}function E(){var e=k(this.opacity);return"".concat(1===e?"rgb(":"rgba(").concat(M(this.r),", ").concat(M(this.g),", ").concat(M(this.b)).concat(1===e?")":", ".concat(e,")"))}function k(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function M(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function C(e){return((e=M(e))<16?"0":"")+e.toString(16)}function j(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new I(e,t,r,n)}function T(e){if(e instanceof I)return new I(e.h,e.s,e.l,e.opacity);if(e instanceof i||(e=b(e)),!e)return new I;if(e instanceof I)return e;var t=(e=e.rgb()).r/255,r=e.g/255,n=e.b/255,o=Math.min(t,r,n),a=Math.max(t,r,n),s=NaN,u=a-o,l=(a+o)/2;return u?(s=t===a?(r-n)/u+6*(r<n):r===a?(n-t)/u+2:(t-r)/u+4,u/=l<.5?a+o:2-a-o,s*=60):u=l>0&&l<1?0:s,new I(s,u,l,e.opacity)}function A(e,t,r,n){return 1===arguments.length?T(e):new I(e,t,r,null==n?1:n)}function I(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}function R(e){return(e=(e||0)%360)<0?e+360:e}function L(e){return Math.max(0,Math.min(1,e||0))}function N(e,t,r){return 255*(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)}function D(e,t,r,n,o){var i=e*e,a=i*e;return((1-3*e+3*i-a)*t+(4-6*i+3*a)*r+(1+3*e+3*i-3*a)*n+a*o)/6}function B(e){var t=e.length-1;return function(r){var n=r<=0?r=0:r>=1?(r=1,t-1):Math.floor(r*t),o=e[n],i=e[n+1],a=n>0?e[n-1]:2*o-i,s=n<t-1?e[n+2]:2*i-o;return D((r-n/t)*t,a,o,i,s)}}function F(e){var t=e.length;return function(r){var n=Math.floor(((r%=1)<0?++r:r)*t),o=e[(n+t-1)%t],i=e[n%t],a=e[(n+1)%t],s=e[(n+2)%t];return D((r-n/t)*t,o,i,a,s)}}n(i,b,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:g,formatHex:g,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return T(this).formatHsl()},formatRgb:m,toString:m}),n(O,S,o(i,{brighter:function(e){return e=null==e?1/.7:Math.pow(1/.7,e),new O(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?.7:Math.pow(.7,e),new O(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},clamp:function(){return new O(M(this.r),M(this.g),M(this.b),k(this.opacity))},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:P,formatHex:P,formatHex8:function(){return"#".concat(C(this.r)).concat(C(this.g)).concat(C(this.b)).concat(C(255*(isNaN(this.opacity)?1:this.opacity)))},formatRgb:E,toString:E})),n(I,A,o(i,{brighter:function(e){return e=null==e?1/.7:Math.pow(1/.7,e),new I(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?.7:Math.pow(.7,e),new I(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,o=2*r-n;return new O(N(e>=240?e-240:e+120,o,n),N(e,o,n),N(e<120?e+240:e-120,o,n),this.opacity)},clamp:function(){return new I(R(this.h),L(this.s),L(this.l),k(this.opacity))},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=k(this.opacity);return"".concat(1===e?"hsl(":"hsla(").concat(R(this.h),", ").concat(100*L(this.s),"%, ").concat(100*L(this.l),"%").concat(1===e?")":", ".concat(e,")"))}}));var G=function(e){return function(){return e}};function z(e,t){return function(r){return e+r*t}}function U(e,t){var r=t-e;return r?z(e,r>180||r<-180?r-360*Math.round(r/360):r):G(isNaN(e)?t:e)}function V(e){return 1==(e=+e)?W:function(t,r){return r-t?function(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}(t,r,e):G(isNaN(t)?r:t)}}function W(e,t){var r=t-e;return r?z(e,r):G(isNaN(e)?t:e)}var Y=function e(t){var r=V(t);function n(e,t){var n=r((e=S(e)).r,(t=S(t)).r),o=r(e.g,t.g),i=r(e.b,t.b),a=W(e.opacity,t.opacity);return function(t){return e.r=n(t),e.g=o(t),e.b=i(t),e.opacity=a(t),e+""}}return n.gamma=e,n}(1);function H(e){return function(t){var r,n,o=t.length,i=new Array(o),a=new Array(o),s=new Array(o);for(r=0;r<o;++r)n=S(t[r]),i[r]=n.r||0,a[r]=n.g||0,s[r]=n.b||0;return i=e(i),a=e(a),s=e(s),n.opacity=1,function(e){return n.r=i(e),n.g=a(e),n.b=s(e),n+""}}}var X=H(B),q=H(F);function J(e,t){t||(t=[]);var r,n=e?Math.min(t.length,e.length):0,o=t.slice();return function(i){for(r=0;r<n;++r)o[r]=e[r]*(1-i)+t[r]*i;return o}}function Z(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function K(e,t){return(Z(t)?J:Q)(e,t)}function Q(e,t){var r,n=t?t.length:0,o=e?Math.min(n,e.length):0,i=new Array(o),a=new Array(n);for(r=0;r<o;++r)i[r]=se(e[r],t[r]);for(;r<n;++r)a[r]=t[r];return function(e){for(r=0;r<o;++r)a[r]=i[r](e);return a}}function $(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function ee(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function te(e){"@babel/helpers - typeof";return(te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function re(e,t){var r,n={},o={};for(r in null!==e&&"object"===te(e)||(e={}),null!==t&&"object"===te(t)||(t={}),t)r in e?n[r]=se(e[r],t[r]):o[r]=t[r];return function(e){for(r in n)o[r]=n[r](e);return o}}var ne=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,oe=new RegExp(ne.source,"g");function ie(e,t){var r,n,o,i=ne.lastIndex=oe.lastIndex=0,a=-1,s=[],u=[];for(e+="",t+="";(r=ne.exec(e))&&(n=oe.exec(t));)(o=n.index)>i&&(o=t.slice(i,o),s[a]?s[a]+=o:s[++a]=o),(r=r[0])===(n=n[0])?s[a]?s[a]+=n:s[++a]=n:(s[++a]=null,u.push({i:a,x:ee(r,n)})),i=oe.lastIndex;return i<t.length&&(o=t.slice(i),s[a]?s[a]+=o:s[++a]=o),s.length<2?u[0]?function(e){return function(t){return e(t)+""}}(u[0].x):function(e){return function(){return e}}(t):(t=u.length,function(e){for(var r,n=0;n<t;++n)s[(r=u[n]).i]=r.x(e);return s.join("")})}function ae(e){"@babel/helpers - typeof";return(ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function se(e,t){var r,n=ae(t);return null==t||"boolean"===n?G(t):("number"===n?ee:"string"===n?(r=b(t))?(t=r,Y):ie:t instanceof b?Y:t instanceof Date?$:Z(t)?J:Array.isArray(t)?Q:"function"!=typeof t.valueOf&&"function"!=typeof t.toString||isNaN(t)?re:ee)(e,t)}function ue(e){var t=e.length;return function(r){return e[Math.max(0,Math.min(t-1,Math.floor(r*t)))]}}function le(e,t){var r=U(+e,+t);return function(e){var t=r(e);return t-360*Math.floor(t/360)}}function ce(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}var fe,he=180/Math.PI,pe={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function de(e,t,r,n,o,i){var a,s,u;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(u=e*r+t*n)&&(r-=e*u,n-=t*u),(s=Math.sqrt(r*r+n*n))&&(r/=s,n/=s,u/=s),e*n<t*r&&(e=-e,t=-t,u=-u,a=-a),{translateX:o,translateY:i,rotate:Math.atan2(t,e)*he,skewX:Math.atan(u)*he,scaleX:a,scaleY:s}}function ye(e,t,r,n){function o(e){return e.length?e.pop()+" ":""}return function(i,a){var s=[],u=[];return i=e(i),a=e(a),function(e,n,o,i,a,s){if(e!==o||n!==i){var u=a.push("translate(",null,t,null,r);s.push({i:u-4,x:ee(e,o)},{i:u-2,x:ee(n,i)})}else(o||i)&&a.push("translate("+o+t+i+r)}(i.translateX,i.translateY,a.translateX,a.translateY,s,u),function(e,t,r,i){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),i.push({i:r.push(o(r)+"rotate(",null,n)-2,x:ee(e,t)})):t&&r.push(o(r)+"rotate("+t+n)}(i.rotate,a.rotate,s,u),function(e,t,r,i){e!==t?i.push({i:r.push(o(r)+"skewX(",null,n)-2,x:ee(e,t)}):t&&r.push(o(r)+"skewX("+t+n)}(i.skewX,a.skewX,s,u),function(e,t,r,n,i,a){if(e!==r||t!==n){var s=i.push(o(i)+"scale(",null,",",null,")");a.push({i:s-4,x:ee(e,r)},{i:s-2,x:ee(t,n)})}else 1===r&&1===n||i.push(o(i)+"scale("+r+","+n+")")}(i.scaleX,i.scaleY,a.scaleX,a.scaleY,s,u),i=a=null,function(e){for(var t,r=-1,n=u.length;++r<n;)s[(t=u[r]).i]=t.x(e);return s.join("")}}}var ve=ye(function(e){var t=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?pe:de(t.a,t.b,t.c,t.d,t.e,t.f)},"px, ","px)","deg)"),ge=ye(function(e){return null==e?pe:(fe||(fe=document.createElementNS("http://www.w3.org/2000/svg","g")),fe.setAttribute("transform",e),(e=fe.transform.baseVal.consolidate())?de((e=e.matrix).a,e.b,e.c,e.d,e.e,e.f):pe)},", ",")",")"),me=1e-12;function be(e){return((e=Math.exp(e))+1/e)/2}var we=function e(t,r,n){function o(e,o){var i,a,s=e[0],u=e[1],l=e[2],c=o[0],f=o[1],h=o[2],p=c-s,d=f-u,y=p*p+d*d;if(y<me)a=Math.log(h/l)/t,i=function(e){return[s+e*p,u+e*d,l*Math.exp(t*e*a)]};else{var v=Math.sqrt(y),g=(h*h-l*l+n*y)/(2*l*r*v),m=(h*h-l*l-n*y)/(2*h*r*v),b=Math.log(Math.sqrt(g*g+1)-g),w=Math.log(Math.sqrt(m*m+1)-m);a=(w-b)/t,i=function(e){var n,o=e*a,i=be(b),c=l/(r*v)*(i*(n=t*o+b,((n=Math.exp(2*n))-1)/(n+1))-function(e){return((e=Math.exp(e))-1/e)/2}(b));return[s+c*p,u+c*d,l*i/be(t*o+b)]}}return i.duration=1e3*a*t/Math.SQRT2,i}return o.rho=function(t){var r=Math.max(.001,+t),n=r*r;return e(r,n,n*n)},o}(Math.SQRT2,2,4);function _e(e){return function(t,r){var n=e((t=A(t)).h,(r=A(r)).h),o=W(t.s,r.s),i=W(t.l,r.l),a=W(t.opacity,r.opacity);return function(e){return t.h=n(e),t.s=o(e),t.l=i(e),t.opacity=a(e),t+""}}}var xe=_e(U),Se=_e(W),Oe=Math.PI/180,Pe=180/Math.PI,Ee=.96422,ke=1,Me=.82521,Ce=4/29,je=6/29,Te=3*je*je,Ae=je*je*je;function Ie(e){if(e instanceof Le)return new Le(e.l,e.a,e.b,e.opacity);if(e instanceof Ue)return Ve(e);e instanceof O||(e=x(e));var t,r,n=Fe(e.r),o=Fe(e.g),i=Fe(e.b),a=Ne((.2225045*n+.7168786*o+.0606169*i)/ke);return n===o&&o===i?t=r=a:(t=Ne((.4360747*n+.3850649*o+.1430804*i)/Ee),r=Ne((.0139322*n+.0971045*o+.7141733*i)/Me)),new Le(116*a-16,500*(t-a),200*(a-r),e.opacity)}function Re(e,t,r,n){return 1===arguments.length?Ie(e):new Le(e,t,r,null==n?1:n)}function Le(e,t,r,n){this.l=+e,this.a=+t,this.b=+r,this.opacity=+n}function Ne(e){return e>Ae?Math.pow(e,1/3):e/Te+Ce}function De(e){return e>je?e*e*e:Te*(e-Ce)}function Be(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function Fe(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function Ge(e){if(e instanceof Ue)return new Ue(e.h,e.c,e.l,e.opacity);if(e instanceof Le||(e=Ie(e)),0===e.a&&0===e.b)return new Ue(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*Pe;return new Ue(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function ze(e,t,r,n){return 1===arguments.length?Ge(e):new Ue(e,t,r,null==n?1:n)}function Ue(e,t,r,n){this.h=+e,this.c=+t,this.l=+r,this.opacity=+n}function Ve(e){if(isNaN(e.h))return new Le(e.l,0,0,e.opacity);var t=e.h*Oe;return new Le(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}function We(e,t){var r=W((e=Re(e)).l,(t=Re(t)).l),n=W(e.a,t.a),o=W(e.b,t.b),i=W(e.opacity,t.opacity);return function(t){return e.l=r(t),e.a=n(t),e.b=o(t),e.opacity=i(t),e+""}}function Ye(e){return function(t,r){var n=e((t=ze(t)).h,(r=ze(r)).h),o=W(t.c,r.c),i=W(t.l,r.l),a=W(t.opacity,r.opacity);return function(e){return t.h=n(e),t.c=o(e),t.l=i(e),t.opacity=a(e),t+""}}}n(Le,Re,o(i,{brighter:function(e){return new Le(this.l+18*(null==e?1:e),this.a,this.b,this.opacity)},darker:function(e){return new Le(this.l-18*(null==e?1:e),this.a,this.b,this.opacity)},rgb:function(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,r=isNaN(this.b)?e:e-this.b/200;return new O(Be(3.1338561*(t=Ee*De(t))-1.6168667*(e=ke*De(e))-.4906146*(r=Me*De(r))),Be(-.9787684*t+1.9161415*e+.033454*r),Be(.0719453*t-.2289914*e+1.4052427*r),this.opacity)}})),n(Ue,ze,o(i,{brighter:function(e){return new Ue(this.h,this.c,this.l+18*(null==e?1:e),this.opacity)},darker:function(e){return new Ue(this.h,this.c,this.l-18*(null==e?1:e),this.opacity)},rgb:function(){return Ve(this).rgb()}}));var He=Ye(U),Xe=Ye(W),qe=-.14861,Je=1.78277,Ze=-.29227,Ke=-.90649,Qe=1.97294,$e=Qe*Ke,et=Qe*Je,tt=Je*Ze-Ke*qe;function rt(e,t,r,n){return 1===arguments.length?function(e){if(e instanceof nt)return new nt(e.h,e.s,e.l,e.opacity);e instanceof O||(e=x(e));var t=e.r/255,r=e.g/255,n=e.b/255,o=(tt*n+$e*t-et*r)/(tt+$e-et),i=n-o,a=(Qe*(r-o)-Ze*i)/Ke,s=Math.sqrt(a*a+i*i)/(Qe*o*(1-o)),u=s?Math.atan2(a,i)*Pe-120:NaN;return new nt(u<0?u+360:u,s,o,e.opacity)}(e):new nt(e,t,r,null==n?1:n)}function nt(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}function ot(e){return function t(r){function n(t,n){var o=e((t=rt(t)).h,(n=rt(n)).h),i=W(t.s,n.s),a=W(t.l,n.l),s=W(t.opacity,n.opacity);return function(e){return t.h=o(e),t.s=i(e),t.l=a(Math.pow(e,r)),t.opacity=s(e),t+""}}return r=+r,n.gamma=t,n}(1)}n(nt,rt,o(i,{brighter:function(e){return e=null==e?1/.7:Math.pow(1/.7,e),new nt(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?.7:Math.pow(.7,e),new nt(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=isNaN(this.h)?0:(this.h+120)*Oe,t=+this.l,r=isNaN(this.s)?0:this.s*t*(1-t),n=Math.cos(e),o=Math.sin(e);return new O(255*(t+r*(qe*n+Je*o)),255*(t+r*(Ze*n+Ke*o)),255*(t+r*(Qe*n)),this.opacity)}}));var it=ot(U),at=ot(W);function st(e,t){void 0===t&&(t=e,e=se);for(var r=0,n=t.length-1,o=t[0],i=new Array(n<0?0:n);r<n;)i[r]=e(o,o=t[++r]);return function(e){var t=Math.max(0,Math.min(n-1,Math.floor(e*=n)));return i[t](e-t)}}function ut(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e(n/(t-1));return r}},97582:function(e,t,r){"use strict";r.r(t),r.d(t,{__addDisposableResource:function(){return R},__assign:function(){return i},__asyncDelegator:function(){return P},__asyncGenerator:function(){return O},__asyncValues:function(){return E},__await:function(){return S},__awaiter:function(){return d},__classPrivateFieldGet:function(){return T},__classPrivateFieldIn:function(){return I},__classPrivateFieldSet:function(){return A},__createBinding:function(){return v},__decorate:function(){return s},__disposeResources:function(){return N},__esDecorate:function(){return l},__exportStar:function(){return g},__extends:function(){return o},__generator:function(){return y},__importDefault:function(){return j},__importStar:function(){return C},__makeTemplateObject:function(){return k},__metadata:function(){return p},__param:function(){return u},__propKey:function(){return f},__read:function(){return b},__rest:function(){return a},__runInitializers:function(){return c},__setFunctionName:function(){return h},__spread:function(){return w},__spreadArray:function(){return x},__spreadArrays:function(){return _},__values:function(){return m}});var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var i=function(){return(i=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function a(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r}function s(e,t,r,n){var o,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,r,a):o(t,r))||a);return i>3&&a&&Object.defineProperty(t,r,a),a}function u(e,t){return function(r,n){t(r,n,e)}}function l(e,t,r,n,o,i){function a(e){if(void 0!==e&&"function"!=typeof e)throw new TypeError("Function expected");return e}for(var s,u=n.kind,l="getter"===u?"get":"setter"===u?"set":"value",c=!t&&e?n.static?e:e.prototype:null,f=t||(c?Object.getOwnPropertyDescriptor(c,n.name):{}),h=!1,p=r.length-1;p>=0;p--){var d={};for(var y in n)d[y]="access"===y?{}:n[y];for(var y in n.access)d.access[y]=n.access[y];d.addInitializer=function(e){if(h)throw new TypeError("Cannot add initializers after decoration has completed");i.push(a(e||null))};var v=(0,r[p])("accessor"===u?{get:f.get,set:f.set}:f[l],d);if("accessor"===u){if(void 0===v)continue;if(null===v||"object"!=typeof v)throw new TypeError("Object expected");(s=a(v.get))&&(f.get=s),(s=a(v.set))&&(f.set=s),(s=a(v.init))&&o.unshift(s)}else(s=a(v))&&("field"===u?o.unshift(s):f[l]=s)}c&&Object.defineProperty(c,n.name,f),h=!0}function c(e,t,r){for(var n=arguments.length>2,o=0;o<t.length;o++)r=n?t[o].call(e,r):t[o].call(e);return n?r:void 0}function f(e){return"symbol"==typeof e?e:"".concat(e)}function h(e,t,r){return"symbol"==typeof t&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:r?"".concat(r," ",t):t})}function p(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function d(e,t,r,n){return new(r||(r=Promise))(function(o,i){function a(e){try{u(n.next(e))}catch(e){i(e)}}function s(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(a,s)}u((n=n.apply(e,t||[])).next())})}function y(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(u){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(r=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===s[0]||2===s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],n=0}finally{r=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}}var v=Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&("get"in o?t.__esModule:!o.writable&&!o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]};function g(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||v(t,e,r)}function m(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function b(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a}function w(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(b(arguments[t]));return e}function _(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),o=0;for(t=0;t<r;t++)for(var i=arguments[t],a=0,s=i.length;a<s;a++,o++)n[o]=i[a];return n}function x(e,t,r){if(r||2===arguments.length)for(var n,o=0,i=t.length;o<i;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))}function S(e){return this instanceof S?(this.v=e,this):new S(e)}function O(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,o=r.apply(e,t||[]),i=[];return n={},a("next"),a("throw"),a("return"),n[Symbol.asyncIterator]=function(){return this},n;function a(e){o[e]&&(n[e]=function(t){return new Promise(function(r,n){i.push([e,t,r,n])>1||s(e,t)})})}function s(e,t){try{(r=o[e](t)).value instanceof S?Promise.resolve(r.value.v).then(u,l):c(i[0][2],r)}catch(e){c(i[0][3],e)}var r}function u(e){s("next",e)}function l(e){s("throw",e)}function c(e,t){e(t),i.shift(),i.length&&s(i[0][0],i[0][1])}}function P(e){var t,r;return t={},n("next"),n("throw",function(e){throw e}),n("return"),t[Symbol.iterator]=function(){return this},t;function n(n,o){t[n]=e[n]?function(t){return(r=!r)?{value:S(e[n](t)),done:!1}:o?o(t):t}:o}}function E(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e=m(e),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(r){t[r]=e[r]&&function(t){return new Promise(function(n,o){(function(e,t,r,n){Promise.resolve(n).then(function(t){e({value:t,done:r})},t)})(n,o,(t=e[r](t)).done,t.value)})}}}function k(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var M=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t};function C(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&v(t,e,r);return M(t,e),t}function j(e){return e&&e.__esModule?e:{default:e}}function T(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)}function A(e,t,r,n,o){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?o.call(e,r):o?o.value=r:t.set(e,r),r}function I(e,t){if(null===t||"object"!=typeof t&&"function"!=typeof t)throw new TypeError("Cannot use 'in' operator on non-object");return"function"==typeof e?t===e:e.has(t)}function R(e,t,r){if(null!==t&&void 0!==t){if("object"!=typeof t&&"function"!=typeof t)throw new TypeError("Object expected.");var n;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=t[Symbol.asyncDispose]}if(void 0===n){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=t[Symbol.dispose]}if("function"!=typeof n)throw new TypeError("Object not disposable.");e.stack.push({value:t,dispose:n,async:r})}else r&&e.stack.push({async:!0});return t}var L="function"==typeof SuppressedError?SuppressedError:function(e,t,r){var n=new Error(r);return n.name="SuppressedError",n.error=e,n.suppressed=t,n};function N(e){function t(t){e.error=e.hasError?new L(t,e.error,"An error was suppressed during disposal."):t,e.hasError=!0}return function r(){for(;e.stack.length;){var n=e.stack.pop();try{var o=n.dispose&&n.dispose.call(n.value);if(n.async)return Promise.resolve(o).then(r,function(e){return t(e),r()})}catch(e){t(e)}}if(e.hasError)throw e.error}()}t.default={__extends:o,__assign:i,__rest:a,__decorate:s,__param:u,__metadata:p,__awaiter:d,__generator:y,__createBinding:v,__exportStar:g,__values:m,__read:b,__spread:w,__spreadArrays:_,__spreadArray:x,__await:S,__asyncGenerator:O,__asyncDelegator:P,__asyncValues:E,__makeTemplateObject:k,__importStar:C,__importDefault:j,__classPrivateFieldGet:T,__classPrivateFieldSet:A,__classPrivateFieldIn:I,__addDisposableResource:R,__disposeResources:N}}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var i=t[n]={id:n,loaded:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.loaded=!0,i.exports}r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,{a:t}),t},r.d=function(e,t){for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e},r(93123),r(55023),r(55984);r(3679)}();