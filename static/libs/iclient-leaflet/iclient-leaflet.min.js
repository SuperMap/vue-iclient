/*!
 * 
 *          iclient-leaflet
 *          Copyright© 2000 - 2024 SuperMap Software Co.Ltd
 *          license: Apache-2.0
 *          version: v11.2.0
 *
 */!function(){var t={1862:function(t){"use strict";function e(t,e){this.x=t,this.y=e}t.exports=e,e.prototype={clone:function(){return new e(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},multByPoint:function(t){return this.clone()._multByPoint(t)},divByPoint:function(t){return this.clone()._divByPoint(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},rotateAround:function(t,e){return this.clone()._rotateAround(t,e)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var e=t.x-this.x,r=t.y-this.y;return e*e+r*r},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,e){return Math.atan2(this.x*e-this.y*t,this.x*t+this.y*e)},_matMult:function(t){var e=t[0]*this.x+t[1]*this.y,r=t[2]*this.x+t[3]*this.y;return this.x=e,this.y=r,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_multByPoint:function(t){return this.x*=t.x,this.y*=t.y,this},_divByPoint:function(t){return this.x/=t.x,this.y/=t.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var e=Math.cos(t),r=Math.sin(t),n=e*this.x-r*this.y,o=r*this.x+e*this.y;return this.x=n,this.y=o,this},_rotateAround:function(t,e){var r=Math.cos(t),n=Math.sin(t),o=e.x+r*(this.x-e.x)-n*(this.y-e.y),i=e.y+n*(this.x-e.x)+r*(this.y-e.y);return this.x=o,this.y=i,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},e.convert=function(t){return t instanceof e?t:Array.isArray(t)?new e(t[0],t[1]):t}},779:function(t,e,r){t.exports.VectorTile=r(2080),r(4940),r(9123)},2080:function(t,e,r){"use strict";var n=r(9123);function o(t,e,r){if(3===t){var o=new n(r,r.readVarint()+r.pos);o.length&&(e[o.name]=o)}}t.exports=function(t,e){this.layers=t.readFields(o,{},e)}},4940:function(t,e,r){"use strict";var n=r(1862);function o(t,e,r,n,o){this.properties={},this.extent=r,this.type=0,this._pbf=t,this._geometry=-1,this._keys=n,this._values=o,t.readFields(i,this,e)}function i(t,e,r){1==t?e.id=r.readVarint():2==t?function(t,e){var r=t.readVarint()+t.pos;for(;t.pos<r;){var n=e._keys[t.readVarint()],o=e._values[t.readVarint()];e.properties[n]=o}}(r,e):3==t?e.type=r.readVarint():4==t&&(e._geometry=r.pos)}function a(t){for(var e,r,n=0,o=0,i=t.length,a=i-1;o<i;a=o++)e=t[o],n+=((r=t[a]).x-e.x)*(e.y+r.y);return n}t.exports=o,o.types=["Unknown","Point","LineString","Polygon"],o.prototype.loadGeometry=function(){var t=this._pbf;t.pos=this._geometry;for(var e,r=t.readVarint()+t.pos,o=1,i=0,a=0,s=0,u=[];t.pos<r;){if(i<=0){var l=t.readVarint();o=7&l,i=l>>3}if(i--,1===o||2===o)a+=t.readSVarint(),s+=t.readSVarint(),1===o&&(e&&u.push(e),e=[]),e.push(new n(a,s));else{if(7!==o)throw new Error("unknown command "+o);e&&e.push(e[0].clone())}}return e&&u.push(e),u},o.prototype.bbox=function(){var t=this._pbf;t.pos=this._geometry;for(var e=t.readVarint()+t.pos,r=1,n=0,o=0,i=0,a=1/0,s=-1/0,u=1/0,l=-1/0;t.pos<e;){if(n<=0){var c=t.readVarint();r=7&c,n=c>>3}if(n--,1===r||2===r)o+=t.readSVarint(),i+=t.readSVarint(),o<a&&(a=o),o>s&&(s=o),i<u&&(u=i),i>l&&(l=i);else if(7!==r)throw new Error("unknown command "+r)}return[a,u,s,l]},o.prototype.toGeoJSON=function(t,e,r){var n,i,s=this.extent*Math.pow(2,r),u=this.extent*t,l=this.extent*e,c=this.loadGeometry(),f=o.types[this.type];function p(t){for(var e=0;e<t.length;e++){var r=t[e],n=180-360*(r.y+l)/s;t[e]=[360*(r.x+u)/s-180,360/Math.PI*Math.atan(Math.exp(n*Math.PI/180))-90]}}switch(this.type){case 1:var h=[];for(n=0;n<c.length;n++)h[n]=c[n][0];p(c=h);break;case 2:for(n=0;n<c.length;n++)p(c[n]);break;case 3:for(c=function(t){var e=t.length;if(e<=1)return[t];for(var r,n,o=[],i=0;i<e;i++){var s=a(t[i]);0!==s&&(void 0===n&&(n=s<0),n===s<0?(r&&o.push(r),r=[t[i]]):r.push(t[i]))}r&&o.push(r);return o}(c),n=0;n<c.length;n++)for(i=0;i<c[n].length;i++)p(c[n][i])}1===c.length?c=c[0]:f="Multi"+f;var y={type:"Feature",geometry:{type:f,coordinates:c},properties:this.properties};return"id"in this&&(y.id=this.id),y}},9123:function(t,e,r){"use strict";var n=r(4940);function o(t,e){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=t,this._keys=[],this._values=[],this._features=[],t.readFields(i,this,e),this.length=this._features.length}function i(t,e,r){15===t?e.version=r.readVarint():1===t?e.name=r.readString():5===t?e.extent=r.readVarint():2===t?e._features.push(r.pos):3===t?e._keys.push(r.readString()):4===t&&e._values.push(function(t){var e=null,r=t.readVarint()+t.pos;for(;t.pos<r;){var n=t.readVarint()>>3;e=1===n?t.readString():2===n?t.readFloat():3===n?t.readDouble():4===n?t.readVarint64():5===n?t.readVarint():6===n?t.readSVarint():7===n?t.readBoolean():null}return e}(r))}t.exports=o,o.prototype.feature=function(t){if(t<0||t>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[t];var e=this._pbf.readVarint()+this._pbf.pos;return new n(this._pbf,e,this.extent,this._keys,this._values)}},304:function(t,e,r){"use strict";var n=r(2651),o=r(5045),i=r(3174);t.exports={XMLParser:o,XMLValidator:n,XMLBuilder:i}},6392:function(t,e){"use strict";var r=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",n="["+r+"][:A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*",o=new RegExp("^"+n+"$");e.isExist=function(t){return void 0!==t},e.isEmptyObject=function(t){return 0===Object.keys(t).length},e.merge=function(t,e,r){if(e)for(var n=Object.keys(e),o=n.length,i=0;i<o;i++)t[n[i]]="strict"===r?[e[n[i]]]:e[n[i]]},e.getValue=function(t){return e.isExist(t)?t:""},e.isName=function(t){var e=o.exec(t);return!(null===e||void 0===e)},e.getAllMatches=function(t,e){for(var r=[],n=e.exec(t);n;){var o=[];o.startIndex=e.lastIndex-n[0].length;for(var i=n.length,a=0;a<i;a++)o.push(n[a]);r.push(o),n=e.exec(t)}return r},e.nameRegexp=n},2651:function(t,e,r){"use strict";var n=r(6392),o={allowBooleanAttributes:!1,unpairedTags:[]};function i(t){return" "===t||"\t"===t||"\n"===t||"\r"===t}function a(t,e){for(var r=e;e<t.length;e++)if("?"!=t[e]&&" "!=t[e]);else{var n=t.substr(r,e-r);if(e>5&&"xml"===n)return y("InvalidXml","XML declaration allowed only at the start of the document.",v(t,e));if("?"==t[e]&&">"==t[e+1]){e++;break}}return e}function s(t,e){if(t.length>e+5&&"-"===t[e+1]&&"-"===t[e+2]){for(e+=3;e<t.length;e++)if("-"===t[e]&&"-"===t[e+1]&&">"===t[e+2]){e+=2;break}}else if(t.length>e+8&&"D"===t[e+1]&&"O"===t[e+2]&&"C"===t[e+3]&&"T"===t[e+4]&&"Y"===t[e+5]&&"P"===t[e+6]&&"E"===t[e+7]){var r=1;for(e+=8;e<t.length;e++)if("<"===t[e])r++;else if(">"===t[e]&&0===--r)break}else if(t.length>e+9&&"["===t[e+1]&&"C"===t[e+2]&&"D"===t[e+3]&&"A"===t[e+4]&&"T"===t[e+5]&&"A"===t[e+6]&&"["===t[e+7])for(e+=8;e<t.length;e++)if("]"===t[e]&&"]"===t[e+1]&&">"===t[e+2]){e+=2;break}return e}e.validate=function(t,e){e=Object.assign({},o,e);var r,u=[],l=!1,f=!1;"\ufeff"===t[0]&&(t=t.substr(1));for(var d=0;d<t.length;d++)if("<"===t[d]&&"?"===t[d+1]){if((d=a(t,d+=2)).err)return d}else{if("<"!==t[d]){if(i(t[d]))continue;return y("InvalidChar","char '"+t[d]+"' is not expected.",v(t,d))}var m=d;if("!"===t[++d]){d=s(t,d);continue}var b=!1;"/"===t[d]&&(b=!0,d++);for(var g="";d<t.length&&">"!==t[d]&&" "!==t[d]&&"\t"!==t[d]&&"\n"!==t[d]&&"\r"!==t[d];d++)g+=t[d];if("/"===(g=g.trim())[g.length-1]&&(g=g.substring(0,g.length-1),d--),r=g,!n.isName(r)){return y("InvalidTag",0===g.trim().length?"Invalid space after '<'.":"Tag '"+g+"' is an invalid name.",v(t,d))}var S=c(t,d);if(!1===S)return y("InvalidAttr","Attributes for '"+g+"' have open quote.",v(t,d));var w=S.value;if(d=S.index,"/"===w[w.length-1]){var _=d-w.length,O=p(w=w.substring(0,w.length-1),e);if(!0!==O)return y(O.err.code,O.err.msg,v(t,_+O.err.line));l=!0}else if(b){if(!S.tagClosed)return y("InvalidTag","Closing tag '"+g+"' doesn't have proper closing.",v(t,d));if(w.trim().length>0)return y("InvalidTag","Closing tag '"+g+"' can't have attributes or invalid starting.",v(t,m));var E=u.pop();if(g!==E.tagName){var P=v(t,E.tagStartPos);return y("InvalidTag","Expected closing tag '"+E.tagName+"' (opened in line "+P.line+", col "+P.col+") instead of closing tag '"+g+"'.",v(t,m))}0==u.length&&(f=!0)}else{var x=p(w,e);if(!0!==x)return y(x.err.code,x.err.msg,v(t,d-w.length+x.err.line));if(!0===f)return y("InvalidXml","Multiple possible root nodes found.",v(t,d));-1!==e.unpairedTags.indexOf(g)||u.push({tagName:g,tagStartPos:m}),l=!0}for(d++;d<t.length;d++)if("<"===t[d]){if("!"===t[d+1]){d=s(t,++d);continue}if("?"!==t[d+1])break;if((d=a(t,++d)).err)return d}else if("&"===t[d]){var T=h(t,d);if(-1==T)return y("InvalidChar","char '&' is not expected.",v(t,d));d=T}else if(!0===f&&!i(t[d]))return y("InvalidXml","Extra text at the end",v(t,d));"<"===t[d]&&d--}return l?1==u.length?y("InvalidTag","Unclosed tag '"+u[0].tagName+"'.",v(t,u[0].tagStartPos)):!(u.length>0)||y("InvalidXml","Invalid '"+JSON.stringify(u.map(function(t){return t.tagName}),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1}):y("InvalidXml","Start tag expected.",1)};var u='"',l="'";function c(t,e){for(var r="",n="",o=!1;e<t.length;e++){if(t[e]===u||t[e]===l)""===n?n=t[e]:n!==t[e]||(n="");else if(">"===t[e]&&""===n){o=!0;break}r+=t[e]}return""===n&&{value:r,index:e,tagClosed:o}}var f=new RegExp("(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['\"])(([\\s\\S])*?)\\5)?","g");function p(t,e){for(var r=n.getAllMatches(t,f),o={},i=0;i<r.length;i++){if(0===r[i][1].length)return y("InvalidAttr","Attribute '"+r[i][2]+"' has no space in starting.",m(r[i]));if(void 0!==r[i][3]&&void 0===r[i][4])return y("InvalidAttr","Attribute '"+r[i][2]+"' is without value.",m(r[i]));if(void 0===r[i][3]&&!e.allowBooleanAttributes)return y("InvalidAttr","boolean attribute '"+r[i][2]+"' is not allowed.",m(r[i]));var a=r[i][2];if(!d(a))return y("InvalidAttr","Attribute '"+a+"' is an invalid name.",m(r[i]));if(o.hasOwnProperty(a))return y("InvalidAttr","Attribute '"+a+"' is repeated.",m(r[i]));o[a]=1}return!0}function h(t,e){if(";"===t[++e])return-1;if("#"===t[e])return function(t,e){var r=/\d/;for("x"===t[e]&&(e++,r=/[\da-fA-F]/);e<t.length;e++){if(";"===t[e])return e;if(!t[e].match(r))break}return-1}(t,++e);for(var r=0;e<t.length;e++,r++)if(!(t[e].match(/\w/)&&r<20)){if(";"===t[e])break;return-1}return e}function y(t,e,r){return{err:{code:t,msg:e,line:r.line||r,col:r.col}}}function d(t){return n.isName(t)}function v(t,e){var r=t.substring(0,e).split(/\r?\n/);return{line:r.length,col:r[r.length-1].length+1}}function m(t){return t.startIndex+t[1].length}},3174:function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e,r){var o;return(e="symbol"==n(o=function(t,e){if("object"!=n(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"))?o:o+"")in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var i=r(2874),a={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(t,e){return e},attributeValueProcessor:function(t,e){return e},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[],oneListGroup:!1};function s(t){this.options=Object.assign({},a,t),this.options.ignoreAttributes||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=c),this.processTextOrObjNode=u,this.options.format?(this.indentate=l,this.tagEndChar=">\n",this.newLine="\n"):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine="")}function u(t,e,r){var n=this.j2x(t,r+1);return void 0!==t[this.options.textNodeName]&&1===Object.keys(t).length?this.buildTextValNode(t[this.options.textNodeName],e,n.attrStr,r):this.buildObjectNode(n.val,e,n.attrStr,r)}function l(t){return this.options.indentBy.repeat(t)}function c(t){return!(!t.startsWith(this.options.attributeNamePrefix)||t===this.options.textNodeName)&&t.substr(this.attrPrefixLen)}s.prototype.build=function(t){return this.options.preserveOrder?i(t,this.options):(Array.isArray(t)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(t=o({},this.options.arrayNodeName,t)),this.j2x(t,0).val)},s.prototype.j2x=function(t,e){var r="",o="";for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i))if(void 0===t[i])this.isAttribute(i)&&(o+="");else if(null===t[i])this.isAttribute(i)?o+="":"?"===i[0]?o+=this.indentate(e)+"<"+i+"?"+this.tagEndChar:o+=this.indentate(e)+"<"+i+"/"+this.tagEndChar;else if(t[i]instanceof Date)o+=this.buildTextValNode(t[i],i,"",e);else if("object"!==n(t[i])){var a=this.isAttribute(i);if(a)r+=this.buildAttrPairStr(a,""+t[i]);else if(i===this.options.textNodeName){var s=this.options.tagValueProcessor(i,""+t[i]);o+=this.replaceEntitiesValue(s)}else o+=this.buildTextValNode(t[i],i,"",e)}else if(Array.isArray(t[i])){for(var u=t[i].length,l="",c=0;c<u;c++){var f=t[i][c];void 0===f||(null===f?"?"===i[0]?o+=this.indentate(e)+"<"+i+"?"+this.tagEndChar:o+=this.indentate(e)+"<"+i+"/"+this.tagEndChar:"object"===n(f)?this.options.oneListGroup?l+=this.j2x(f,e+1).val:l+=this.processTextOrObjNode(f,i,e):l+=this.buildTextValNode(f,i,"",e))}this.options.oneListGroup&&(l=this.buildObjectNode(l,i,"",e)),o+=l}else if(this.options.attributesGroupName&&i===this.options.attributesGroupName)for(var p=Object.keys(t[i]),h=p.length,y=0;y<h;y++)r+=this.buildAttrPairStr(p[y],""+t[i][p[y]]);else o+=this.processTextOrObjNode(t[i],i,e);return{attrStr:r,val:o}},s.prototype.buildAttrPairStr=function(t,e){return e=this.options.attributeValueProcessor(t,""+e),e=this.replaceEntitiesValue(e),this.options.suppressBooleanAttributes&&"true"===e?" "+t:" "+t+'="'+e+'"'},s.prototype.buildObjectNode=function(t,e,r,n){if(""===t)return"?"===e[0]?this.indentate(n)+"<"+e+r+"?"+this.tagEndChar:this.indentate(n)+"<"+e+r+this.closeTag(e)+this.tagEndChar;var o="</"+e+this.tagEndChar,i="";return"?"===e[0]&&(i="?",o=""),!r&&""!==r||-1!==t.indexOf("<")?!1!==this.options.commentPropName&&e===this.options.commentPropName&&0===i.length?this.indentate(n)+"\x3c!--".concat(t,"--\x3e")+this.newLine:this.indentate(n)+"<"+e+r+i+this.tagEndChar+t+this.indentate(n)+o:this.indentate(n)+"<"+e+r+i+">"+t+o},s.prototype.closeTag=function(t){var e="";return-1!==this.options.unpairedTags.indexOf(t)?this.options.suppressUnpairedNode||(e="/"):e=this.options.suppressEmptyNode?"/":"></".concat(t),e},s.prototype.buildTextValNode=function(t,e,r,n){if(!1!==this.options.cdataPropName&&e===this.options.cdataPropName)return this.indentate(n)+"<![CDATA[".concat(t,"]]>")+this.newLine;if(!1!==this.options.commentPropName&&e===this.options.commentPropName)return this.indentate(n)+"\x3c!--".concat(t,"--\x3e")+this.newLine;if("?"===e[0])return this.indentate(n)+"<"+e+r+"?"+this.tagEndChar;var o=this.options.tagValueProcessor(e,t);return""===(o=this.replaceEntitiesValue(o))?this.indentate(n)+"<"+e+r+this.closeTag(e)+this.tagEndChar:this.indentate(n)+"<"+e+r+">"+o+"</"+e+this.tagEndChar},s.prototype.replaceEntitiesValue=function(t){if(t&&t.length>0&&this.options.processEntities)for(var e=0;e<this.options.entities.length;e++){var r=this.options.entities[e];t=t.replace(r.regex,r.val)}return t},t.exports=s},2874:function(t){var e="\n";function r(t){for(var e=Object.keys(t),r=0;r<e.length;r++){var n=e[r];if(t.hasOwnProperty(n)&&":@"!==n)return n}}function n(t,e){var r="";if(t&&!e.ignoreAttributes)for(var n in t)if(t.hasOwnProperty(n)){var o=e.attributeValueProcessor(n,t[n]);!0===(o=i(o,e))&&e.suppressBooleanAttributes?r+=" ".concat(n.substr(e.attributeNamePrefix.length)):r+=" ".concat(n.substr(e.attributeNamePrefix.length),'="').concat(o,'"')}return r}function o(t,e){var r=(t=t.substr(0,t.length-e.textNodeName.length-1)).substr(t.lastIndexOf(".")+1);for(var n in e.stopNodes)if(e.stopNodes[n]===t||e.stopNodes[n]==="*."+r)return!0;return!1}function i(t,e){if(t&&t.length>0&&e.processEntities)for(var r=0;r<e.entities.length;r++){var n=e.entities[r];t=t.replace(n.regex,n.val)}return t}t.exports=function(t,a){var s="";return a.format&&a.indentBy.length>0&&(s=e),function t(e,a,s,u){for(var l="",c=!1,f=0;f<e.length;f++){var p=e[f],h=r(p);if(void 0!==h){var y="";if(y=0===s.length?h:"".concat(s,".").concat(h),h!==a.textNodeName)if(h!==a.cdataPropName)if(h!==a.commentPropName)if("?"!==h[0]){var d=u;""!==d&&(d+=a.indentBy);var v=n(p[":@"],a),m=u+"<".concat(h).concat(v),b=t(p[h],a,y,d);-1!==a.unpairedTags.indexOf(h)?a.suppressUnpairedNode?l+=m+">":l+=m+"/>":b&&0!==b.length||!a.suppressEmptyNode?b&&b.endsWith(">")?l+=m+">".concat(b).concat(u,"</").concat(h,">"):(l+=m+">",b&&""!==u&&(b.includes("/>")||b.includes("</"))?l+=u+a.indentBy+b+u:l+=b,l+="</".concat(h,">")):l+=m+"/>",c=!0}else{var g=n(p[":@"],a),S="?xml"===h?"":u,w=p[h][0][a.textNodeName];w=0!==w.length?" "+w:"",l+=S+"<".concat(h).concat(w).concat(g,"?>"),c=!0}else l+=u+"\x3c!--".concat(p[h][0][a.textNodeName],"--\x3e"),c=!0;else c&&(l+=u),l+="<![CDATA[".concat(p[h][0][a.textNodeName],"]]>"),c=!1;else{var _=p[h];o(y,a)||(_=i(_=a.tagValueProcessor(h,_),a)),c&&(l+=u),l+=_,c=!1}}}return l}(t,a,"",s)}},3214:function(t,e,r){function n(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,s=[],u=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(s.push(n.value),s.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return o(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var i=r(6392);function a(t,e){for(var r="";e<t.length&&"'"!==t[e]&&'"'!==t[e];e++)r+=t[e];if(-1!==(r=r.trim()).indexOf(" "))throw new Error("External entites are not supported");for(var n=t[e++],o="";e<t.length&&t[e]!==n;e++)o+=t[e];return[r,o,e]}function s(t,e){return"!"===t[e+1]&&"-"===t[e+2]&&"-"===t[e+3]}function u(t,e){return"!"===t[e+1]&&"E"===t[e+2]&&"N"===t[e+3]&&"T"===t[e+4]&&"I"===t[e+5]&&"T"===t[e+6]&&"Y"===t[e+7]}function l(t,e){return"!"===t[e+1]&&"E"===t[e+2]&&"L"===t[e+3]&&"E"===t[e+4]&&"M"===t[e+5]&&"E"===t[e+6]&&"N"===t[e+7]&&"T"===t[e+8]}function c(t,e){return"!"===t[e+1]&&"A"===t[e+2]&&"T"===t[e+3]&&"T"===t[e+4]&&"L"===t[e+5]&&"I"===t[e+6]&&"S"===t[e+7]&&"T"===t[e+8]}function f(t,e){return"!"===t[e+1]&&"N"===t[e+2]&&"O"===t[e+3]&&"T"===t[e+4]&&"A"===t[e+5]&&"T"===t[e+6]&&"I"===t[e+7]&&"O"===t[e+8]&&"N"===t[e+9]}function p(t){if(i.isName(t))return t;throw new Error("Invalid entity name ".concat(t))}t.exports=function(t,e){var r={};if("O"!==t[e+3]||"C"!==t[e+4]||"T"!==t[e+5]||"Y"!==t[e+6]||"P"!==t[e+7]||"E"!==t[e+8])throw new Error("Invalid Tag instead of DOCTYPE");e+=9;for(var o=1,i=!1,h=!1;e<t.length;e++)if("<"!==t[e]||h)if(">"===t[e]){if(h?"-"===t[e-1]&&"-"===t[e-2]&&(h=!1,o--):o--,0===o)break}else"["===t[e]?i=!0:t[e];else{if(i&&u(t,e)){var y=n(a(t,(e+=7)+1),3);entityName=y[0],val=y[1],e=y[2],-1===val.indexOf("&")&&(r[p(entityName)]={regx:RegExp("&".concat(entityName,";"),"g"),val:val})}else if(i&&l(t,e))e+=8;else if(i&&c(t,e))e+=8;else if(i&&f(t,e))e+=9;else{if(!s)throw new Error("Invalid DOCTYPE");h=!0}o++}if(0!==o)throw new Error("Unclosed DOCTYPE");return{entities:r,i:e}}},3070:function(t,e){var r={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(t,e){return e},attributeValueProcessor:function(t,e){return e},stopNodes:[],alwaysCreateTextNode:!1,isArray:function(){return!1},commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(t,e,r){return t}};e.buildOptions=function(t){return Object.assign({},r,t)},e.defaultOptions=r},2246:function(t,e,r){"use strict";function n(t,e,r){return(e=a(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function o(t){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,a(n.key),n)}}function a(t){var e=function(t,e){if("object"!=o(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==o(e)?e:e+""}var s=r(6392),u=r(4670),l=r(3214),c=r(1097),f=function(t,e,r){return e&&i(t.prototype,e),r&&i(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.options=e,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"¢"},pound:{regex:/&(pound|#163);/g,val:"£"},yen:{regex:/&(yen|#165);/g,val:"¥"},euro:{regex:/&(euro|#8364);/g,val:"€"},copyright:{regex:/&(copy|#169);/g,val:"©"},reg:{regex:/&(reg|#174);/g,val:"®"},inr:{regex:/&(inr|#8377);/g,val:"₹"},num_dec:{regex:/&#([0-9]{1,7});/g,val:function(t,e){return String.fromCharCode(Number.parseInt(e,10))}},num_hex:{regex:/&#x([0-9a-fA-F]{1,6});/g,val:function(t,e){return String.fromCharCode(Number.parseInt(e,16))}}},this.addExternalEntities=p,this.parseXml=m,this.parseTextData=h,this.resolveNameSpace=y,this.buildAttributesMap=v,this.isItStopNode=w,this.replaceEntitiesValue=g,this.readStopNodeData=E,this.saveTextToParentTag=S,this.addChild=b});function p(t){for(var e=Object.keys(t),r=0;r<e.length;r++){var n=e[r];this.lastEntities[n]={regex:new RegExp("&"+n+";","g"),val:t[n]}}}function h(t,e,r,n,i,a,s){if(void 0!==t&&(this.options.trimValues&&!n&&(t=t.trim()),t.length>0)){s||(t=this.replaceEntitiesValue(t));var u=this.options.tagValueProcessor(e,t,r,i,a);return null===u||void 0===u?t:o(u)!==o(t)||u!==t?u:this.options.trimValues?P(t,this.options.parseTagValue,this.options.numberParseOptions):t.trim()===t?P(t,this.options.parseTagValue,this.options.numberParseOptions):t}}function y(t){if(this.options.removeNSPrefix){var e=t.split(":"),r="/"===t.charAt(0)?"/":"";if("xmlns"===e[0])return"";2===e.length&&(t=r+e[1])}return t}var d=new RegExp("([^\\s=]+)\\s*(=\\s*(['\"])([\\s\\S]*?)\\3)?","gm");function v(t,e,r){if(!this.options.ignoreAttributes&&"string"==typeof t){for(var n=s.getAllMatches(t,d),i=n.length,a={},u=0;u<i;u++){var l=this.resolveNameSpace(n[u][1]),c=n[u][4],f=this.options.attributeNamePrefix+l;if(l.length)if(this.options.transformAttributeName&&(f=this.options.transformAttributeName(f)),"__proto__"===f&&(f="#__proto__"),void 0!==c){this.options.trimValues&&(c=c.trim()),c=this.replaceEntitiesValue(c);var p=this.options.attributeValueProcessor(l,c,e);null===p||void 0===p?a[f]=c:o(p)!==o(c)||p!==c?a[f]=p:a[f]=P(c,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(a[f]=!0)}if(!Object.keys(a).length)return;if(this.options.attributesGroupName){var h={};return h[this.options.attributesGroupName]=a,h}return a}}var m=function(t){t=t.replace(/\r\n?/g,"\n");for(var e=new u("!xml"),r=e,o="",i="",a=0;a<t.length;a++){if("<"===t[a])if("/"===t[a+1]){var s=_(t,">",a,"Closing Tag is not closed."),c=t.substring(a+2,s).trim();if(this.options.removeNSPrefix){var f=c.indexOf(":");-1!==f&&(c=c.substr(f+1))}this.options.transformTagName&&(c=this.options.transformTagName(c)),r&&(o=this.saveTextToParentTag(o,r,i));var p=i.substring(i.lastIndexOf(".")+1);if(c&&-1!==this.options.unpairedTags.indexOf(c))throw new Error("Unpaired tag can not be used as closing tag: </".concat(c,">"));var h=0;p&&-1!==this.options.unpairedTags.indexOf(p)?(h=i.lastIndexOf(".",i.lastIndexOf(".")-1),this.tagsNodeStack.pop()):h=i.lastIndexOf("."),i=i.substring(0,h),r=this.tagsNodeStack.pop(),o="",a=s}else if("?"===t[a+1]){var y=O(t,a,!1,"?>");if(!y)throw new Error("Pi Tag is not closed.");if(o=this.saveTextToParentTag(o,r,i),this.options.ignoreDeclaration&&"?xml"===y.tagName||this.options.ignorePiTags);else{var d=new u(y.tagName);d.add(this.options.textNodeName,""),y.tagName!==y.tagExp&&y.attrExpPresent&&(d[":@"]=this.buildAttributesMap(y.tagExp,i,y.tagName)),this.addChild(r,d,i)}a=y.closeIndex+1}else if("!--"===t.substr(a+1,3)){var v=_(t,"--\x3e",a+4,"Comment is not closed.");if(this.options.commentPropName){var m=t.substring(a+4,v-2);o=this.saveTextToParentTag(o,r,i),r.add(this.options.commentPropName,[n({},this.options.textNodeName,m)])}a=v}else if("!D"===t.substr(a+1,2)){var b=l(t,a);this.docTypeEntities=b.entities,a=b.i}else if("!["===t.substr(a+1,2)){var g=_(t,"]]>",a,"CDATA is not closed.")-2,S=t.substring(a+9,g);o=this.saveTextToParentTag(o,r,i);var w=this.parseTextData(S,r.tagname,i,!0,!1,!0,!0);void 0==w&&(w=""),this.options.cdataPropName?r.add(this.options.cdataPropName,[n({},this.options.textNodeName,S)]):r.add(this.options.textNodeName,w),a=g+2}else{var E=O(t,a,this.options.removeNSPrefix),P=E.tagName,x=E.rawTagName,T=E.tagExp,C=E.attrExpPresent,k=E.closeIndex;this.options.transformTagName&&(P=this.options.transformTagName(P)),r&&o&&"!xml"!==r.tagname&&(o=this.saveTextToParentTag(o,r,i,!1));var A=r;if(A&&-1!==this.options.unpairedTags.indexOf(A.tagname)&&(r=this.tagsNodeStack.pop(),i=i.substring(0,i.lastIndexOf("."))),P!==e.tagname&&(i+=i?"."+P:P),this.isItStopNode(this.options.stopNodes,i,P)){var j="";if(T.length>0&&T.lastIndexOf("/")===T.length-1)a=E.closeIndex;else if(-1!==this.options.unpairedTags.indexOf(P))a=E.closeIndex;else{var N=this.readStopNodeData(t,x,k+1);if(!N)throw new Error("Unexpected end of ".concat(x));a=N.i,j=N.tagContent}var I=new u(P);P!==T&&C&&(I[":@"]=this.buildAttributesMap(T,i,P)),j&&(j=this.parseTextData(j,P,i,!0,C,!0,!0)),i=i.substr(0,i.lastIndexOf(".")),I.add(this.options.textNodeName,j),this.addChild(r,I,i)}else{if(T.length>0&&T.lastIndexOf("/")===T.length-1){"/"===P[P.length-1]?(P=P.substr(0,P.length-1),i=i.substr(0,i.length-1),T=P):T=T.substr(0,T.length-1),this.options.transformTagName&&(P=this.options.transformTagName(P));var M=new u(P);P!==T&&C&&(M[":@"]=this.buildAttributesMap(T,i,P)),this.addChild(r,M,i),i=i.substr(0,i.lastIndexOf("."))}else{var R=new u(P);this.tagsNodeStack.push(r),P!==T&&C&&(R[":@"]=this.buildAttributesMap(T,i,P)),this.addChild(r,R,i),r=R}o="",a=k}}else o+=t[a]}return e.child};function b(t,e,r){var n=this.options.updateTag(e.tagname,r,e[":@"]);!1===n||("string"==typeof n?(e.tagname=n,t.addChild(e)):t.addChild(e))}var g=function(t){if(this.options.processEntities){for(var e in this.docTypeEntities){var r=this.docTypeEntities[e];t=t.replace(r.regx,r.val)}for(var n in this.lastEntities){var o=this.lastEntities[n];t=t.replace(o.regex,o.val)}if(this.options.htmlEntities)for(var i in this.htmlEntities){var a=this.htmlEntities[i];t=t.replace(a.regex,a.val)}t=t.replace(this.ampEntity.regex,this.ampEntity.val)}return t};function S(t,e,r,n){return t&&(void 0===n&&(n=0===Object.keys(e.child).length),void 0!==(t=this.parseTextData(t,e.tagname,r,!1,!!e[":@"]&&0!==Object.keys(e[":@"]).length,n))&&""!==t&&e.add(this.options.textNodeName,t),t=""),t}function w(t,e,r){var n="*."+r;for(var o in t){var i=t[o];if(n===i||e===i)return!0}return!1}function _(t,e,r,n){var o=t.indexOf(e,r);if(-1===o)throw new Error(n);return o+e.length-1}function O(t,e,r){var n=function(t,e){for(var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:">",o="",i=e;i<t.length;i++){var a=t[i];if(r)a===r&&(r="");else if('"'===a||"'"===a)r=a;else if(a===n[0]){if(!n[1])return{data:o,index:i};if(t[i+1]===n[1])return{data:o,index:i}}else"\t"===a&&(a=" ");o+=a}}(t,e+1,arguments.length>3&&void 0!==arguments[3]?arguments[3]:">");if(n){var o=n.data,i=n.index,a=o.search(/\s/),s=o,u=!0;-1!==a&&(s=o.substring(0,a),o=o.substring(a+1).trimStart());var l=s;if(r){var c=s.indexOf(":");-1!==c&&(u=(s=s.substr(c+1))!==n.data.substr(c+1))}return{tagName:s,tagExp:o,closeIndex:i,attrExpPresent:u,rawTagName:l}}}function E(t,e,r){for(var n=r,o=1;r<t.length;r++)if("<"===t[r])if("/"===t[r+1]){var i=_(t,">",r,"".concat(e," is not closed"));if(t.substring(r+2,i).trim()===e&&0===--o)return{tagContent:t.substring(n,r),i:i};r=i}else if("?"===t[r+1]){r=_(t,"?>",r+1,"StopNode is not closed.")}else if("!--"===t.substr(r+1,3)){r=_(t,"--\x3e",r+3,"StopNode is not closed.")}else if("!["===t.substr(r+1,2)){r=_(t,"]]>",r,"StopNode is not closed.")-2}else{var a=O(t,r,">");if(a)(a&&a.tagName)===e&&"/"!==a.tagExp[a.tagExp.length-1]&&o++,r=a.closeIndex}}function P(t,e,r){if(e&&"string"==typeof t){var n=t.trim();return"true"===n||"false"!==n&&c(t,r)}return s.isExist(t)?t:""}t.exports=f},5045:function(t,e,r){function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,i(n.key),n)}}function i(t){var e=function(t,e){if("object"!=n(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==n(e)?e:e+""}var a=r(3070).buildOptions,s=r(2246),u=r(9279).prettify,l=r(2651),c=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.externalEntities={},this.options=a(e)},(e=[{key:"parse",value:function(t,e){if("string"==typeof t);else{if(!t.toString)throw new Error("XML data is accepted in String or Bytes[] form.");t=t.toString()}if(e){!0===e&&(e={});var r=l.validate(t,e);if(!0!==r)throw Error("".concat(r.err.msg,":").concat(r.err.line,":").concat(r.err.col))}var n=new s(this.options);n.addExternalEntities(this.externalEntities);var o=n.parseXml(t);return this.options.preserveOrder||void 0===o?o:u(o,this.options)}},{key:"addEntity",value:function(t,e){if(-1!==e.indexOf("&"))throw new Error("Entity value can't have '&'");if(-1!==t.indexOf("&")||-1!==t.indexOf(";"))throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if("&"===e)throw new Error("An entity with value '&' is not permitted");this.externalEntities[t]=e}}])&&o(t.prototype,e),r&&o(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();t.exports=c},9279:function(t,e){"use strict";function r(t){for(var e=Object.keys(t),r=0;r<e.length;r++){var n=e[r];if(":@"!==n)return n}}function n(t,e,r,n){if(e)for(var o=Object.keys(e),i=o.length,a=0;a<i;a++){var s=o[a];n.isArray(s,r+"."+s,!0,!0)?t[s]=[e[s]]:t[s]=e[s]}}function o(t,e){var r=e.textNodeName,n=Object.keys(t).length;return 0===n||!(1!==n||!t[r]&&"boolean"!=typeof t[r]&&0!==t[r])}e.prettify=function(t,e){return function t(e,i,a){for(var s,u={},l=0;l<e.length;l++){var c=e[l],f=r(c),p="";if(p=void 0===a?f:a+"."+f,f===i.textNodeName)void 0===s?s=c[f]:s+=""+c[f];else{if(void 0===f)continue;if(c[f]){var h=t(c[f],i,p),y=o(h,i);c[":@"]?n(h,c[":@"],p,i):1!==Object.keys(h).length||void 0===h[i.textNodeName]||i.alwaysCreateTextNode?0===Object.keys(h).length&&(i.alwaysCreateTextNode?h[i.textNodeName]="":h=""):h=h[i.textNodeName],void 0!==u[f]&&u.hasOwnProperty(f)?(Array.isArray(u[f])||(u[f]=[u[f]]),u[f].push(h)):i.isArray(f,p,y)?u[f]=[h]:u[f]=h}}}return"string"==typeof s?s.length>0&&(u[i.textNodeName]=s):void 0!==s&&(u[i.textNodeName]=s),u}(t,e)}},4670:function(t){"use strict";function e(t){"@babel/helpers - typeof";return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e,r){return(e=o(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,o(n.key),n)}}function o(t){var r=function(t,r){if("object"!=e(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,r||"default");if("object"!=e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==e(r)?r:r+""}var i=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.tagname=e,this.child=[],this[":@"]={}},(e=[{key:"add",value:function(t,e){"__proto__"===t&&(t="#__proto__"),this.child.push(r({},t,e))}},{key:"addChild",value:function(t){"__proto__"===t.tagname&&(t.tagname="#__proto__"),t[":@"]&&Object.keys(t[":@"]).length>0?this.child.push(r(r({},t.tagname,t.child),":@",t[":@"])):this.child.push(r({},t.tagname,t.child))}}])&&n(t.prototype,e),o&&n(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,o}();t.exports=i},1358:function(t){!function(e){"use strict";if(e.__disableNativeFetch||!e.fetch){s.prototype.append=function(t,e){t=i(t),e=a(e);var r=this.map[t];r||(r=[],this.map[t]=r),r.push(e)},s.prototype.delete=function(t){delete this.map[i(t)]},s.prototype.get=function(t){var e=this.map[i(t)];return e?e[0]:null},s.prototype.getAll=function(t){return this.map[i(t)]||[]},s.prototype.has=function(t){return this.map.hasOwnProperty(i(t))},s.prototype.set=function(t,e){this.map[i(t)]=[a(e)]},s.prototype.forEach=function(t,e){Object.getOwnPropertyNames(this.map).forEach(function(r){this.map[r].forEach(function(n){t.call(e,n,r,this)},this)},this)};var r={blob:"FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e},n=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];p.prototype.clone=function(){return new p(this)},f.call(p.prototype),f.call(y.prototype),y.prototype.clone=function(){return new y(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new s(this.headers),url:this.url})},y.error=function(){var t=new y(null,{status:0,statusText:""});return t.type="error",t};var o=[301,302,303,307,308];y.redirect=function(t,e){if(-1===o.indexOf(e))throw new RangeError("Invalid status code");return new y(null,{status:e,headers:{location:t}})},e.Headers=s,e.Request=p,e.Response=y,e.fetch=function(t,e){return new Promise(function(n,o){var i;i=p.prototype.isPrototypeOf(t)&&!e?t:new p(t,e);var a=new XMLHttpRequest;var u=!1;function l(){if(4===a.readyState){var t=1223===a.status?204:a.status;if(t<100||t>599){if(u)return;return u=!0,void o(new TypeError("Network request failed"))}var e={status:t,statusText:a.statusText,headers:function(t){var e=new s;return t.getAllResponseHeaders().trim().split("\n").forEach(function(t){var r=t.trim().split(":"),n=r.shift().trim(),o=r.join(":").trim();e.append(n,o)}),e}(a),url:"responseURL"in a?a.responseURL:/^X-Request-URL:/m.test(a.getAllResponseHeaders())?a.getResponseHeader("X-Request-URL"):void 0},r="response"in a?a.response:a.responseText;u||(u=!0,n(new y(r,e)))}}a.onreadystatechange=l,a.onload=l,a.onerror=function(){u||(u=!0,o(new TypeError("Network request failed")))},a.open(i.method,i.url,!0);try{"include"===i.credentials&&("withCredentials"in a?a.withCredentials=!0:console&&console.warn&&console.warn("withCredentials is not supported, you can ignore this warning"))}catch(t){console&&console.warn&&console.warn("set withCredentials error:"+t)}"responseType"in a&&r.blob&&(a.responseType="blob"),i.headers.forEach(function(t,e){a.setRequestHeader(e,t)}),a.send(void 0===i._bodyInit?null:i._bodyInit)})},e.fetch.polyfill=!0,t.exports&&(t.exports=e.fetch)}function i(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function a(t){return"string"!=typeof t&&(t=String(t)),t}function s(t){this.map={},t instanceof s?t.forEach(function(t,e){this.append(e,t)},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}function u(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function l(t){return new Promise(function(e,r){t.onload=function(){e(t.result)},t.onerror=function(){r(t.error)}})}function c(t){var e=new FileReader;return e.readAsArrayBuffer(t),l(e)}function f(){return this.bodyUsed=!1,this._initBody=function(t,e){if(this._bodyInit=t,"string"==typeof t)this._bodyText=t;else if(r.blob&&Blob.prototype.isPrototypeOf(t))this._bodyBlob=t,this._options=e;else if(r.formData&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else if(t){if(!r.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(t))throw new Error("unsupported BodyInit type")}else this._bodyText=""},r.blob?(this.blob=function(){var t=u(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this.blob().then(c)},this.text=function(){var t,e,r,n,o,i,a,s=u(this);if(s)return s;if(this._bodyBlob)return t=this._bodyBlob,e=this._options,r=new FileReader,n=e.headers.map["content-type"]?e.headers.map["content-type"].toString():"",o=/charset\=[0-9a-zA-Z\-\_]*;?/,i=t.type.match(o)||n.match(o),a=[t],i&&a.push(i[0].replace(/^charset\=/,"").replace(/;$/,"")),r.readAsText.apply(r,a),l(r);if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)}):this.text=function(){var t=u(this);return t||Promise.resolve(this._bodyText)},r.formData&&(this.formData=function(){return this.text().then(h)}),this.json=function(){return this.text().then(JSON.parse)},this}function p(t,e){var r,o,i=(e=e||{}).body;if(p.prototype.isPrototypeOf(t)){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new s(t.headers)),this.method=t.method,this.mode=t.mode,i||(i=t._bodyInit,t.bodyUsed=!0)}else this.url=t;if(this.credentials=e.credentials||this.credentials||"omit",!e.headers&&this.headers||(this.headers=new s(e.headers)),this.method=(r=e.method||this.method||"GET",o=r.toUpperCase(),n.indexOf(o)>-1?o:r),this.mode=e.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(i,e)}function h(t){var e=new FormData;return t.trim().split("&").forEach(function(t){if(t){var r=t.split("="),n=r.shift().replace(/\+/g," "),o=r.join("=").replace(/\+/g," ");e.append(decodeURIComponent(n),decodeURIComponent(o))}}),e}function y(t,e){e||(e={}),this._initBody(t,e),this.type="default",this.status=e.status,this.ok=this.status>=200&&this.status<300,this.statusText=e.statusText,this.headers=e.headers instanceof s?e.headers:new s(e.headers),this.url=e.url||""}}("undefined"!=typeof self?self:this)},3678:function(t,e){var r,n,o;n=[e,t],void 0===(o="function"==typeof(r=function(t,e){"use strict";var r={timeout:5e3,jsonpCallback:"callback",jsonpCallbackFunction:null};function n(t){try{delete window[t]}catch(e){window[t]=void 0}}function o(t){var e=document.getElementById(t);e&&document.getElementsByTagName("head")[0].removeChild(e)}e.exports=function(t){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],i=t,a=e.timeout||r.timeout,s=e.jsonpCallback||r.jsonpCallback,u=void 0;return new Promise(function(r,l){var c=e.jsonpCallbackFunction||"jsonp_"+Date.now()+"_"+Math.ceil(1e5*Math.random()),f=s+"_"+c;window[c]=function(t){r({ok:!0,json:function(){return Promise.resolve(t)}}),u&&clearTimeout(u),o(f),n(c)},i+=-1===i.indexOf("?")?"?":"&";var p=document.createElement("script");p.setAttribute("src",""+i+s+"="+c),e.charset&&p.setAttribute("charset",e.charset),p.id=f,document.getElementsByTagName("head")[0].appendChild(p),u=setTimeout(function(){l(new Error("JSONP request to "+t+" timed out")),n(c),o(f),window[c]=function(){n(c)}},a),p.onerror=function(){l(new Error("JSONP request to "+t+" failed")),n(c),o(f),u&&clearTimeout(u)}})}})?r.apply(e,n):r)||(t.exports=o)},4933:function(t,e){e.read=function(t,e,r,n,o){var i,a,s=8*o-n-1,u=(1<<s)-1,l=u>>1,c=-7,f=r?o-1:0,p=r?-1:1,h=t[e+f];for(f+=p,i=h&(1<<-c)-1,h>>=-c,c+=s;c>0;i=256*i+t[e+f],f+=p,c-=8);for(a=i&(1<<-c)-1,i>>=-c,c+=n;c>0;a=256*a+t[e+f],f+=p,c-=8);if(0===i)i=1-l;else{if(i===u)return a?NaN:1/0*(h?-1:1);a+=Math.pow(2,n),i-=l}return(h?-1:1)*a*Math.pow(2,i-n)},e.write=function(t,e,r,n,o,i){var a,s,u,l=8*i-o-1,c=(1<<l)-1,f=c>>1,p=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,h=n?0:i-1,y=n?1:-1,d=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=c):(a=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-a))<1&&(a--,u*=2),(e+=a+f>=1?p/u:p*Math.pow(2,1-f))*u>=2&&(a++,u/=2),a+f>=c?(s=0,a=c):a+f>=1?(s=(e*u-1)*Math.pow(2,o),a+=f):(s=e*Math.pow(2,f-1)*Math.pow(2,o),a=0));o>=8;t[r+h]=255&s,h+=y,s/=256,o-=8);for(a=a<<o|s,l+=o;l>0;t[r+h]=255&a,h+=y,a/=256,l-=8);t[r+h-y]|=128*d}},3448:function(t){var e=[],r=[],n="insert-css: You need to provide a CSS string. Usage: insertCss(cssString[, options]).";function o(t,o){if(o=o||{},void 0===t)throw new Error(n);var i,a=!0===o.prepend?"prepend":"append",s=void 0!==o.container?o.container:document.querySelector("head"),u=e.indexOf(s);return-1===u&&(u=e.push(s)-1,r[u]={}),void 0!==r[u]&&void 0!==r[u][a]?i=r[u][a]:(i=r[u][a]=function(){var t=document.createElement("style");return t.setAttribute("type","text/css"),t}(),"prepend"===a?s.insertBefore(i,s.childNodes[0]):s.appendChild(i)),65279===t.charCodeAt(0)&&(t=t.substr(1,t.length)),i.styleSheet?i.styleSheet.cssText+=t:i.textContent+=t,i}t.exports=o,t.exports.insertCss=o},3871:function(t,e,r){function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=r(5306),i="&&",a="||",s="and",u="or",l="=",c="~",f="!"+l,p="!"+c,h=">",y=">=",d="<",v="<=",m="*",b=",",g=".",S="(",w=")",_="where",O={pathway:[],groups:{}},E={},P={},x=console.log;function T(t){var e=k(t,_),r=e[0],n=e[1];O.pathway=k(r,b);for(var o=0,s=O.pathway.length;o<s;o++)O.pathway[o]=k(O.pathway[o],g),O.pathway[o][0]==m&&O.pathway[o].shift(),0===O.pathway[o].length&&O.pathway.splice(o,1);for(var u=-1,P=-1,x=0;x<n.length;){if(n[x]===S)u=x;else if(n[x]===w&&(P=x)>u&&-1!==u){var T="gr_"+(new Date).getTime();O.groups[T]=n.substring(u+1,P),n=n.replace(S+O.groups[T]+w,T),x=-1}x+=1}!function t(e,r){var n=C(r,i),o=C(r,a);if(n!==Number.MAX_VALUE||o!==Number.MAX_VALUE)if(n<o){e.and=e.and||[];var s=k(r,i);e.and.push(s[0]),t(e.and,s[1])}else{e.or=e.or||[];var s=k(r,a);e.or.push(s[0]),t(e.or,s[1])}else O.groups[r]?(r=O.groups[r],t(e,r)):(Array.isArray(e)?e.push(r):e.or=[r],function t(e){for(var r in e)if(e.hasOwnProperty(r))if(Array.isArray(e[r]))t(e[r]);else if("string"==typeof e[r])if(A(e[r],f)){var n=k(e[r],f);e[r]={ne:[n[0],n[1]]}}else if(A(e[r],p)){var n=k(e[r],p);e[r]={nreq:[n[0],n[1]]}}else if(A(e[r],c)){var n=k(e[r],c);e[r]={req:[n[0],n[1]]}}else if(A(e[r],y)){var n=k(e[r],y);e[r]={ge:[n[0],n[1]]}}else if(A(e[r],h)){var n=k(e[r],h);e[r]={gt:[n[0],n[1]]}}else if(A(e[r],v)){var n=k(e[r],v);e[r]={le:[n[0],n[1]]}}else if(A(e[r],d)){var n=k(e[r],d);e[r]={lt:[n[0],n[1]]}}else if(A(e[r],l)){var n=k(e[r],l);e[r]={eq:[n[0],n[1]]}}}(E.or?E.or:E.and))}(E,n)}function C(t,e){var r=t.indexOf(e);return-1===r?Number.MAX_VALUE:r}function k(t,e){return t.split(e).map(function(t){return t.trim()})}function A(t,e){return t.indexOf(e)>-1}function j(t,e){var r=k(e,g),n=t;for(var i in r){if(!n.hasOwnProperty(r[i]))return"";n=n[r[i]]}return n=o.isDate(n)?n.valueOf():o.isDateString(n)?o.parseDateFromString(n):n.toString()}function N(t,e){var r=!1;for(var n in t){if(r=r||(n===s?I:n===u?N:M)(t[n],e),P.trace&&x(O.step,"======((( or",t[n],r),r)return r}return r}function I(t,e){var r=!0;for(var n in t){if(r=r&&(n===s?I:n===u?N:M)(t[n],e),P.trace&&x(O.step,"======((( and",t[n],r),!r)return r}return r}function M(t,e){if(O.step+=1,t.or){var r=N(t.or,e);return P.trace&&x(O.step,"OR",t,r),r}if(t.and){r=I(t.and,e);return P.trace&&x(O.step,"AND",t,r),r}if("object"===n(t))return t.eq?j(e,t.eq[0])===t.eq[1]:t.ne?j(e,t.ne[0])!==t.ne[1]:t.req?A(j(e,t.req[0]),t.req[1]):t.nreq?!A(j(e,t.nreq[0]),t.nreq[1]):t.gt?j(e,t.gt[0])>t.gt[1]:t.ge?j(e,t.ge[0])>=t.ge[1]:t.lt?j(e,t.lt[0])<t.lt[1]:t.le?j(e,t.le[0])<=t.le[1]:M(t,e)}function R(t,e,r){return O={pathway:[],groups:{},step:0},E={},P=r=r||{trace:!1},T(e),(n=function(t){var e=[];for(var r in t)M(E,t[r])&&e.push(t[r]);return e}(t))&&O.pathway.length>0?n.map(function(t){for(var e={},r=0,n=O.pathway.length;r<n;r++){var o=O.pathway[r].join(g);e[o]=j(t,o)}return e}):n;var n}void 0!==t.exports&&(t.exports=R),"undefined"!=typeof window&&(window.Query=R)},5306:function(t){function e(t){return Object.prototype.toString.call(t)}function r(t){return"[object String]"===e(t)}t.exports={getObjectType:e,isDate:function(t){return"[object Date]"===e(t)},isString:r,isDateString:function(t){return r(t)&&!isNaN(Date.parse(t))},parseDateFromString:function(t){return Date.parse(t)},isNumber:function(t){return"number"==typeof t}}},5611:function(t,e,r){function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}t=r.nmd(t);var o=200,i="__lodash_hash_undefined__",a=9007199254740991,s="[object Arguments]",u="[object Boolean]",l="[object Date]",c="[object Function]",f="[object GeneratorFunction]",p="[object Map]",h="[object Number]",y="[object Object]",d="[object RegExp]",v="[object Set]",m="[object String]",b="[object Symbol]",g="[object ArrayBuffer]",S="[object DataView]",w="[object Float32Array]",_="[object Float64Array]",O="[object Int8Array]",E="[object Int16Array]",P="[object Int32Array]",x="[object Uint8Array]",T="[object Uint8ClampedArray]",C="[object Uint16Array]",k="[object Uint32Array]",A=/\w*$/,j=/^\[object .+?Constructor\]$/,N=/^(?:0|[1-9]\d*)$/,I={};I[s]=I["[object Array]"]=I[g]=I[S]=I[u]=I[l]=I[w]=I[_]=I[O]=I[E]=I[P]=I[p]=I[h]=I[y]=I[d]=I[v]=I[m]=I[b]=I[x]=I[T]=I[C]=I[k]=!0,I["[object Error]"]=I[c]=I["[object WeakMap]"]=!1;var M="object"==(void 0===r.g?"undefined":n(r.g))&&r.g&&r.g.Object===Object&&r.g,R="object"==("undefined"==typeof self?"undefined":n(self))&&self&&self.Object===Object&&self,L=M||R||Function("return this")(),D="object"==n(e)&&e&&!e.nodeType&&e,B=D&&"object"==n(t)&&t&&!t.nodeType&&t,F=B&&B.exports===D;function U(t,e){return t.set(e[0],e[1]),t}function G(t,e){return t.add(e),t}function V(t,e,r,n){var o=-1,i=t?t.length:0;for(n&&i&&(r=t[++o]);++o<i;)r=e(r,t[o],o,t);return r}function z(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}function H(t){var e=-1,r=Array(t.size);return t.forEach(function(t,n){r[++e]=[n,t]}),r}function q(t,e){return function(r){return t(e(r))}}function J(t){var e=-1,r=Array(t.size);return t.forEach(function(t){r[++e]=t}),r}var W,K=Array.prototype,Y=Function.prototype,Q=Object.prototype,X=L["__core-js_shared__"],Z=(W=/[^.]+$/.exec(X&&X.keys&&X.keys.IE_PROTO||""))?"Symbol(src)_1."+W:"",$=Y.toString,tt=Q.hasOwnProperty,et=Q.toString,rt=RegExp("^"+$.call(tt).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),nt=F?L.Buffer:void 0,ot=L.Symbol,it=L.Uint8Array,at=q(Object.getPrototypeOf,Object),st=Object.create,ut=Q.propertyIsEnumerable,lt=K.splice,ct=Object.getOwnPropertySymbols,ft=nt?nt.isBuffer:void 0,pt=q(Object.keys,Object),ht=Bt(L,"DataView"),yt=Bt(L,"Map"),dt=Bt(L,"Promise"),vt=Bt(L,"Set"),mt=Bt(L,"WeakMap"),bt=Bt(Object,"create"),gt=zt(ht),St=zt(yt),wt=zt(dt),_t=zt(vt),Ot=zt(mt),Et=ot?ot.prototype:void 0,Pt=Et?Et.valueOf:void 0;function xt(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function Tt(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function Ct(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function kt(t){this.__data__=new Tt(t)}function At(t,e){var r=qt(t)||function(t){return function(t){return function(t){return!!t&&"object"==n(t)}(t)&&Jt(t)}(t)&&tt.call(t,"callee")&&(!ut.call(t,"callee")||et.call(t)==s)}(t)?function(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}(t.length,String):[],o=r.length,i=!!o;for(var a in t)!e&&!tt.call(t,a)||i&&("length"==a||Gt(a,o))||r.push(a);return r}function jt(t,e,r){var n=t[e];tt.call(t,e)&&Ht(n,r)&&(void 0!==r||e in t)||(t[e]=r)}function Nt(t,e){for(var r=t.length;r--;)if(Ht(t[r][0],e))return r;return-1}function It(t,e,r,n,o,i,a){var j;if(n&&(j=i?n(t,o,i,a):n(t)),void 0!==j)return j;if(!Yt(t))return t;var N=qt(t);if(N){if(j=function(t){var e=t.length,r=t.constructor(e);e&&"string"==typeof t[0]&&tt.call(t,"index")&&(r.index=t.index,r.input=t.input);return r}(t),!e)return function(t,e){var r=-1,n=t.length;e||(e=Array(n));for(;++r<n;)e[r]=t[r];return e}(t,j)}else{var M=Ut(t),R=M==c||M==f;if(Wt(t))return function(t,e){if(e)return t.slice();var r=new t.constructor(t.length);return t.copy(r),r}(t,e);if(M==y||M==s||R&&!i){if(z(t))return i?t:{};if(j=function(t){return"function"!=typeof t.constructor||Vt(t)?{}:(e=at(t),Yt(e)?st(e):{});var e}(R?{}:t),!e)return function(t,e){return Lt(t,Ft(t),e)}(t,function(t,e){return t&&Lt(e,Qt(e),t)}(j,t))}else{if(!I[M])return i?t:{};j=function(t,e,r,n){var o=t.constructor;switch(e){case g:return Rt(t);case u:case l:return new o(+t);case S:return function(t,e){var r=e?Rt(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)}(t,n);case w:case _:case O:case E:case P:case x:case T:case C:case k:return function(t,e){var r=e?Rt(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}(t,n);case p:return function(t,e,r){return V(e?r(H(t),!0):H(t),U,new t.constructor)}(t,n,r);case h:case m:return new o(t);case d:return(s=new(a=t).constructor(a.source,A.exec(a))).lastIndex=a.lastIndex,s;case v:return function(t,e,r){return V(e?r(J(t),!0):J(t),G,new t.constructor)}(t,n,r);case b:return i=t,Pt?Object(Pt.call(i)):{}}var i;var a,s}(t,M,It,e)}}a||(a=new kt);var L=a.get(t);if(L)return L;if(a.set(t,j),!N)var D=r?function(t){return function(t,e,r){var n=e(t);return qt(t)?n:function(t,e){for(var r=-1,n=e.length,o=t.length;++r<n;)t[o+r]=e[r];return t}(n,r(t))}(t,Qt,Ft)}(t):Qt(t);return function(t,e){for(var r=-1,n=t?t.length:0;++r<n&&!1!==e(t[r],r,t););}(D||t,function(o,i){D&&(o=t[i=o]),jt(j,i,It(o,e,r,n,i,t,a))}),j}function Mt(t){return!(!Yt(t)||Z&&Z in t)&&(Kt(t)||z(t)?rt:j).test(zt(t))}function Rt(t){var e=new t.constructor(t.byteLength);return new it(e).set(new it(t)),e}function Lt(t,e,r,n){r||(r={});for(var o=-1,i=e.length;++o<i;){var a=e[o],s=n?n(r[a],t[a],a,r,t):void 0;jt(r,a,void 0===s?t[a]:s)}return r}function Dt(t,e){var r,o,i=t.__data__;return("string"==(o=n(r=e))||"number"==o||"symbol"==o||"boolean"==o?"__proto__"!==r:null===r)?i["string"==typeof e?"string":"hash"]:i.map}function Bt(t,e){var r=function(t,e){return null==t?void 0:t[e]}(t,e);return Mt(r)?r:void 0}xt.prototype.clear=function(){this.__data__=bt?bt(null):{}},xt.prototype.delete=function(t){return this.has(t)&&delete this.__data__[t]},xt.prototype.get=function(t){var e=this.__data__;if(bt){var r=e[t];return r===i?void 0:r}return tt.call(e,t)?e[t]:void 0},xt.prototype.has=function(t){var e=this.__data__;return bt?void 0!==e[t]:tt.call(e,t)},xt.prototype.set=function(t,e){return this.__data__[t]=bt&&void 0===e?i:e,this},Tt.prototype.clear=function(){this.__data__=[]},Tt.prototype.delete=function(t){var e=this.__data__,r=Nt(e,t);return!(r<0||(r==e.length-1?e.pop():lt.call(e,r,1),0))},Tt.prototype.get=function(t){var e=this.__data__,r=Nt(e,t);return r<0?void 0:e[r][1]},Tt.prototype.has=function(t){return Nt(this.__data__,t)>-1},Tt.prototype.set=function(t,e){var r=this.__data__,n=Nt(r,t);return n<0?r.push([t,e]):r[n][1]=e,this},Ct.prototype.clear=function(){this.__data__={hash:new xt,map:new(yt||Tt),string:new xt}},Ct.prototype.delete=function(t){return Dt(this,t).delete(t)},Ct.prototype.get=function(t){return Dt(this,t).get(t)},Ct.prototype.has=function(t){return Dt(this,t).has(t)},Ct.prototype.set=function(t,e){return Dt(this,t).set(t,e),this},kt.prototype.clear=function(){this.__data__=new Tt},kt.prototype.delete=function(t){return this.__data__.delete(t)},kt.prototype.get=function(t){return this.__data__.get(t)},kt.prototype.has=function(t){return this.__data__.has(t)},kt.prototype.set=function(t,e){var r=this.__data__;if(r instanceof Tt){var n=r.__data__;if(!yt||n.length<o-1)return n.push([t,e]),this;r=this.__data__=new Ct(n)}return r.set(t,e),this};var Ft=ct?q(ct,Object):function(){return[]},Ut=function(t){return et.call(t)};function Gt(t,e){return!!(e=null==e?a:e)&&("number"==typeof t||N.test(t))&&t>-1&&t%1==0&&t<e}function Vt(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Q)}function zt(t){if(null!=t){try{return $.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function Ht(t,e){return t===e||t!=t&&e!=e}(ht&&Ut(new ht(new ArrayBuffer(1)))!=S||yt&&Ut(new yt)!=p||dt&&"[object Promise]"!=Ut(dt.resolve())||vt&&Ut(new vt)!=v||mt&&"[object WeakMap]"!=Ut(new mt))&&(Ut=function(t){var e=et.call(t),r=e==y?t.constructor:void 0,n=r?zt(r):void 0;if(n)switch(n){case gt:return S;case St:return p;case wt:return"[object Promise]";case _t:return v;case Ot:return"[object WeakMap]"}return e});var qt=Array.isArray;function Jt(t){return null!=t&&function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=a}(t.length)&&!Kt(t)}var Wt=ft||function(){return!1};function Kt(t){var e=Yt(t)?et.call(t):"";return e==c||e==f}function Yt(t){var e=n(t);return!!t&&("object"==e||"function"==e)}function Qt(t){return Jt(t)?At(t):function(t){if(!Vt(t))return pt(t);var e=[];for(var r in Object(t))tt.call(t,r)&&"constructor"!=r&&e.push(r);return e}(t)}t.exports=function(t){return It(t,!0,!0)}},311:function(t,e,r){function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=200,i="__lodash_hash_undefined__",a=9007199254740991,s="[object Arguments]",u="[object Function]",l="[object GeneratorFunction]",c=/^\[object .+?Constructor\]$/,f="object"==(void 0===r.g?"undefined":n(r.g))&&r.g&&r.g.Object===Object&&r.g,p="object"==("undefined"==typeof self?"undefined":n(self))&&self&&self.Object===Object&&self,h=f||p||Function("return this")();function y(t,e){return!!(t?t.length:0)&&function(t,e,r){if(e!=e)return function(t,e,r,n){var o=t.length,i=r+(n?1:-1);for(;n?i--:++i<o;)if(e(t[i],i,t))return i;return-1}(t,m,r);var n=r-1,o=t.length;for(;++n<o;)if(t[n]===e)return n;return-1}(t,e,0)>-1}function d(t,e,r){for(var n=-1,o=t?t.length:0;++n<o;)if(r(e,t[n]))return!0;return!1}function v(t,e){for(var r=-1,n=e.length,o=t.length;++r<n;)t[o+r]=e[r];return t}function m(t){return t!=t}function b(t,e){return t.has(e)}var g,S=Array.prototype,w=Function.prototype,_=Object.prototype,O=h["__core-js_shared__"],E=(g=/[^.]+$/.exec(O&&O.keys&&O.keys.IE_PROTO||""))?"Symbol(src)_1."+g:"",P=w.toString,x=_.hasOwnProperty,T=_.toString,C=RegExp("^"+P.call(x).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),k=h.Symbol,A=_.propertyIsEnumerable,j=S.splice,N=k?k.isConcatSpreadable:void 0,I=Math.max,M=H(h,"Map"),R=H(Object,"create");function L(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function D(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function B(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function F(t){var e=-1,r=t?t.length:0;for(this.__data__=new B;++e<r;)this.add(t[e])}function U(t,e){for(var r,n,o=t.length;o--;)if((r=t[o][0])===(n=e)||r!=r&&n!=n)return o;return-1}function G(t,e,r,n){var i,a=-1,s=y,u=!0,l=t.length,c=[],f=e.length;if(!l)return c;r&&(e=function(t,e){for(var r=-1,n=t?t.length:0,o=Array(n);++r<n;)o[r]=e(t[r],r,t);return o}(e,(i=r,function(t){return i(t)}))),n?(s=d,u=!1):e.length>=o&&(s=b,u=!1,e=new F(e));t:for(;++a<l;){var p=t[a],h=r?r(p):p;if(p=n||0!==p?p:0,u&&h==h){for(var v=f;v--;)if(e[v]===h)continue t;c.push(p)}else s(e,h,n)||c.push(p)}return c}function V(t){return!(!$(t)||E&&E in t)&&(Z(t)||function(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}(t)?C:c).test(function(t){if(null!=t){try{return P.call(t)}catch(t){}try{return t+""}catch(t){}}return""}(t))}function z(t,e){var r,o,i=t.__data__;return("string"==(o=n(r=e))||"number"==o||"symbol"==o||"boolean"==o?"__proto__"!==r:null===r)?i["string"==typeof e?"string":"hash"]:i.map}function H(t,e){var r=function(t,e){return null==t?void 0:t[e]}(t,e);return V(r)?r:void 0}function q(t){return Y(t)||function(t){return X(t)&&x.call(t,"callee")&&(!A.call(t,"callee")||T.call(t)==s)}(t)||!!(N&&t&&t[N])}L.prototype.clear=function(){this.__data__=R?R(null):{}},L.prototype.delete=function(t){return this.has(t)&&delete this.__data__[t]},L.prototype.get=function(t){var e=this.__data__;if(R){var r=e[t];return r===i?void 0:r}return x.call(e,t)?e[t]:void 0},L.prototype.has=function(t){var e=this.__data__;return R?void 0!==e[t]:x.call(e,t)},L.prototype.set=function(t,e){return this.__data__[t]=R&&void 0===e?i:e,this},D.prototype.clear=function(){this.__data__=[]},D.prototype.delete=function(t){var e=this.__data__,r=U(e,t);return!(r<0||(r==e.length-1?e.pop():j.call(e,r,1),0))},D.prototype.get=function(t){var e=this.__data__,r=U(e,t);return r<0?void 0:e[r][1]},D.prototype.has=function(t){return U(this.__data__,t)>-1},D.prototype.set=function(t,e){var r=this.__data__,n=U(r,t);return n<0?r.push([t,e]):r[n][1]=e,this},B.prototype.clear=function(){this.__data__={hash:new L,map:new(M||D),string:new L}},B.prototype.delete=function(t){return z(this,t).delete(t)},B.prototype.get=function(t){return z(this,t).get(t)},B.prototype.has=function(t){return z(this,t).has(t)},B.prototype.set=function(t,e){return z(this,t).set(t,e),this},F.prototype.add=F.prototype.push=function(t){return this.__data__.set(t,i),this},F.prototype.has=function(t){return this.__data__.has(t)};var J,W,K=(J=function(t,e){return X(t)?G(t,function t(e,r,n,o,i){var a=-1,s=e.length;for(n||(n=q),i||(i=[]);++a<s;){var u=e[a];r>0&&n(u)?r>1?t(u,r-1,n,o,i):v(i,u):o||(i[i.length]=u)}return i}(e,1,X,!0)):[]},W=I(void 0===W?J.length-1:W,0),function(){for(var t=arguments,e=-1,r=I(t.length-W,0),n=Array(r);++e<r;)n[e]=t[W+e];e=-1;for(var o=Array(W+1);++e<W;)o[e]=t[e];return o[W]=n,function(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}(J,this,o)});var Y=Array.isArray;function Q(t){return null!=t&&function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=a}(t.length)&&!Z(t)}function X(t){return function(t){return!!t&&"object"==n(t)}(t)&&Q(t)}function Z(t){var e=$(t)?T.call(t):"";return e==u||e==l}function $(t){var e=n(t);return!!t&&("object"==e||"function"==e)}t.exports=K},8518:function(t,e,r){function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=9007199254740991,i="[object Arguments]",a="[object Function]",s="[object GeneratorFunction]",u="[object Map]",l="[object Set]",c=/^\[object .+?Constructor\]$/,f=/^(?:0|[1-9]\d*)$/,p="object"==(void 0===r.g?"undefined":n(r.g))&&r.g&&r.g.Object===Object&&r.g,h="object"==("undefined"==typeof self?"undefined":n(self))&&self&&self.Object===Object&&self,y=p||h||Function("return this")();function d(t,e){return function(t,e){for(var r=-1,n=t?t.length:0,o=Array(n);++r<n;)o[r]=e(t[r],r,t);return o}(e,function(e){return[e,t[e]]})}var v,m,b,g=Function.prototype,S=Object.prototype,w=y["__core-js_shared__"],_=(v=/[^.]+$/.exec(w&&w.keys&&w.keys.IE_PROTO||""))?"Symbol(src)_1."+v:"",O=g.toString,E=S.hasOwnProperty,P=S.toString,x=RegExp("^"+O.call(E).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),T=S.propertyIsEnumerable,C=(m=Object.keys,b=Object,function(t){return m(b(t))}),k=V(y,"DataView"),A=V(y,"Map"),j=V(y,"Promise"),N=V(y,"Set"),I=V(y,"WeakMap"),M=q(k),R=q(A),L=q(j),D=q(N),B=q(I);function F(t,e){var r=J(t)||function(t){return function(t){return function(t){return!!t&&"object"==n(t)}(t)&&W(t)}(t)&&E.call(t,"callee")&&(!T.call(t,"callee")||P.call(t)==i)}(t)?function(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}(t.length,String):[],o=r.length,a=!!o;for(var s in t)!e&&!E.call(t,s)||a&&("length"==s||H(s,o))||r.push(s);return r}function U(t){return!(!Y(t)||_&&_ in t)&&(K(t)||function(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}(t)?x:c).test(q(t))}function G(t){if(r=(e=t)&&e.constructor,n="function"==typeof r&&r.prototype||S,e!==n)return C(t);var e,r,n,o=[];for(var i in Object(t))E.call(t,i)&&"constructor"!=i&&o.push(i);return o}function V(t,e){var r=function(t,e){return null==t?void 0:t[e]}(t,e);return U(r)?r:void 0}var z=function(t){return P.call(t)};function H(t,e){return!!(e=null==e?o:e)&&("number"==typeof t||f.test(t))&&t>-1&&t%1==0&&t<e}function q(t){if(null!=t){try{return O.call(t)}catch(t){}try{return t+""}catch(t){}}return""}(k&&"[object DataView]"!=z(new k(new ArrayBuffer(1)))||A&&z(new A)!=u||j&&"[object Promise]"!=z(j.resolve())||N&&z(new N)!=l||I&&"[object WeakMap]"!=z(new I))&&(z=function(t){var e=P.call(t),r="[object Object]"==e?t.constructor:void 0,n=r?q(r):void 0;if(n)switch(n){case M:return"[object DataView]";case R:return u;case L:return"[object Promise]";case D:return l;case B:return"[object WeakMap]"}return e});var J=Array.isArray;function W(t){return null!=t&&function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=o}(t.length)&&!K(t)}function K(t){var e=Y(t)?P.call(t):"";return e==a||e==s}function Y(t){var e=n(t);return!!t&&("object"==e||"function"==e)}var Q,X=(Q=function(t){return W(t)?F(t):G(t)},function(t){var e,r,n,o=z(t);return o==u?(e=t,r=-1,n=Array(e.size),e.forEach(function(t,e){n[++r]=[e,t]}),n):o==l?function(t){var e=-1,r=Array(t.size);return t.forEach(function(t){r[++e]=[t,t]}),r}(t):d(t,Q(t))});t.exports=X},44:function(t,e,r){function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}t=r.nmd(t);var o=200,i="Expected a function",a="__lodash_hash_undefined__",s=1,u=2,l=1/0,c=9007199254740991,f="[object Arguments]",p="[object Array]",h="[object Boolean]",y="[object Date]",d="[object Error]",v="[object Function]",m="[object GeneratorFunction]",b="[object Map]",g="[object Number]",S="[object Object]",w="[object RegExp]",_="[object Set]",O="[object String]",E="[object Symbol]",P="[object ArrayBuffer]",x="[object DataView]",T=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,C=/^\w*$/,k=/^\./,A=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,j=/\\(\\)?/g,N=/^\[object .+?Constructor\]$/,I=/^(?:0|[1-9]\d*)$/,M={};M["[object Float32Array]"]=M["[object Float64Array]"]=M["[object Int8Array]"]=M["[object Int16Array]"]=M["[object Int32Array]"]=M["[object Uint8Array]"]=M["[object Uint8ClampedArray]"]=M["[object Uint16Array]"]=M["[object Uint32Array]"]=!0,M[f]=M[p]=M[P]=M[h]=M[x]=M[y]=M[d]=M[v]=M[b]=M[g]=M[S]=M[w]=M[_]=M[O]=M["[object WeakMap]"]=!1;var R="object"==(void 0===r.g?"undefined":n(r.g))&&r.g&&r.g.Object===Object&&r.g,L="object"==("undefined"==typeof self?"undefined":n(self))&&self&&self.Object===Object&&self,D=R||L||Function("return this")(),B="object"==n(e)&&e&&!e.nodeType&&e,F=B&&"object"==n(t)&&t&&!t.nodeType&&t,U=F&&F.exports===B&&R.process,G=function(){try{return U&&U.binding("util")}catch(t){}}(),V=G&&G.isTypedArray;function z(t,e){return!!(t?t.length:0)&&function(t,e,r){if(e!=e)return function(t,e,r,n){var o=t.length,i=r+(n?1:-1);for(;n?i--:++i<o;)if(e(t[i],i,t))return i;return-1}(t,J,r);var n=r-1,o=t.length;for(;++n<o;)if(t[n]===e)return n;return-1}(t,e,0)>-1}function H(t,e,r){for(var n=-1,o=t?t.length:0;++n<o;)if(r(e,t[n]))return!0;return!1}function q(t,e){for(var r=-1,n=t?t.length:0;++r<n;)if(e(t[r],r,t))return!0;return!1}function J(t){return t!=t}function W(t,e){return t.has(e)}function K(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}function Y(t){var e=-1,r=Array(t.size);return t.forEach(function(t,n){r[++e]=[n,t]}),r}function Q(t){var e=-1,r=Array(t.size);return t.forEach(function(t){r[++e]=t}),r}var X,Z,$,tt=Array.prototype,et=Function.prototype,rt=Object.prototype,nt=D["__core-js_shared__"],ot=(X=/[^.]+$/.exec(nt&&nt.keys&&nt.keys.IE_PROTO||""))?"Symbol(src)_1."+X:"",it=et.toString,at=rt.hasOwnProperty,st=rt.toString,ut=RegExp("^"+it.call(at).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),lt=D.Symbol,ct=D.Uint8Array,ft=rt.propertyIsEnumerable,pt=tt.splice,ht=(Z=Object.keys,$=Object,function(t){return Z($(t))}),yt=qt(D,"DataView"),dt=qt(D,"Map"),vt=qt(D,"Promise"),mt=qt(D,"Set"),bt=qt(D,"WeakMap"),gt=qt(Object,"create"),St=$t(yt),wt=$t(dt),_t=$t(vt),Ot=$t(mt),Et=$t(bt),Pt=lt?lt.prototype:void 0,xt=Pt?Pt.valueOf:void 0,Tt=Pt?Pt.toString:void 0;function Ct(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function kt(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function At(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function jt(t){var e=-1,r=t?t.length:0;for(this.__data__=new At;++e<r;)this.add(t[e])}function Nt(t){this.__data__=new kt(t)}function It(t,e){var r=ne(t)||re(t)?function(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}(t.length,String):[],n=r.length,o=!!n;for(var i in t)!e&&!at.call(t,i)||o&&("length"==i||Wt(i,n))||r.push(i);return r}function Mt(t,e){for(var r=t.length;r--;)if(ee(t[r][0],e))return r;return-1}function Rt(t,e){for(var r=0,n=(e=Kt(e,t)?[e]:Gt(e)).length;null!=t&&r<n;)t=t[Zt(e[r++])];return r&&r==n?t:void 0}function Lt(t,e){return null!=t&&e in Object(t)}function Dt(t,e,r,n,o){return t===e||(null==t||null==e||!se(t)&&!ue(e)?t!=t&&e!=e:function(t,e,r,n,o,i){var a=ne(t),l=ne(e),c=p,v=p;a||(c=(c=Jt(t))==f?S:c);l||(v=(v=Jt(e))==f?S:v);var m=c==S&&!K(t),T=v==S&&!K(e),C=c==v;if(C&&!m)return i||(i=new Nt),a||ce(t)?zt(t,e,r,n,o,i):function(t,e,r,n,o,i,a){switch(r){case x:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case P:return!(t.byteLength!=e.byteLength||!n(new ct(t),new ct(e)));case h:case y:case g:return ee(+t,+e);case d:return t.name==e.name&&t.message==e.message;case w:case O:return t==e+"";case b:var l=Y;case _:var c=i&u;if(l||(l=Q),t.size!=e.size&&!c)return!1;var f=a.get(t);if(f)return f==e;i|=s,a.set(t,e);var p=zt(l(t),l(e),n,o,i,a);return a.delete(t),p;case E:if(xt)return xt.call(t)==xt.call(e)}return!1}(t,e,c,r,n,o,i);if(!(o&u)){var k=m&&at.call(t,"__wrapped__"),A=T&&at.call(e,"__wrapped__");if(k||A){var j=k?t.value():t,N=A?e.value():e;return i||(i=new Nt),r(j,N,n,o,i)}}if(!C)return!1;return i||(i=new Nt),function(t,e,r,n,o,i){var a=o&u,s=fe(t),l=s.length,c=fe(e).length;if(l!=c&&!a)return!1;for(var f=l;f--;){var p=s[f];if(!(a?p in e:at.call(e,p)))return!1}var h=i.get(t);if(h&&i.get(e))return h==e;var y=!0;i.set(t,e),i.set(e,t);for(var d=a;++f<l;){p=s[f];var v=t[p],m=e[p];if(n)var b=a?n(m,v,p,e,t,i):n(v,m,p,t,e,i);if(!(void 0===b?v===m||r(v,m,n,o,i):b)){y=!1;break}d||(d="constructor"==p)}if(y&&!d){var g=t.constructor,S=e.constructor;g!=S&&"constructor"in t&&"constructor"in e&&!("function"==typeof g&&g instanceof g&&"function"==typeof S&&S instanceof S)&&(y=!1)}return i.delete(t),i.delete(e),y}(t,e,r,n,o,i)}(t,e,Dt,r,n,o))}function Bt(t){return!(!se(t)||ot&&ot in t)&&(ie(t)||K(t)?ut:N).test($t(t))}function Ft(t){return"function"==typeof t?t:null==t?pe:"object"==n(t)?ne(t)?function(t,e){if(Kt(t)&&Yt(e))return Qt(Zt(t),e);return function(r){var n=function(t,e,r){var n=null==t?void 0:Rt(t,e);return void 0===n?r:n}(r,t);return void 0===n&&n===e?function(t,e){return null!=t&&function(t,e,r){var n,o=-1,i=(e=Kt(e,t)?[e]:Gt(e)).length;for(;++o<i;){var a=Zt(e[o]);if(!(n=null!=t&&r(t,a)))break;t=t[a]}if(n)return n;return!!(i=t?t.length:0)&&ae(i)&&Wt(a,i)&&(ne(t)||re(t))}(t,e,Lt)}(r,t):Dt(e,n,void 0,s|u)}}(t[0],t[1]):function(t){var e=function(t){var e=fe(t),r=e.length;for(;r--;){var n=e[r],o=t[n];e[r]=[n,o,Yt(o)]}return e}(t);if(1==e.length&&e[0][2])return Qt(e[0][0],e[0][1]);return function(r){return r===t||function(t,e,r,n){var o=r.length,i=o,a=!n;if(null==t)return!i;for(t=Object(t);o--;){var l=r[o];if(a&&l[2]?l[1]!==t[l[0]]:!(l[0]in t))return!1}for(;++o<i;){var c=(l=r[o])[0],f=t[c],p=l[1];if(a&&l[2]){if(void 0===f&&!(c in t))return!1}else{var h=new Nt;if(n)var y=n(f,p,c,t,e,h);if(!(void 0===y?Dt(p,f,n,s|u,h):y))return!1}}return!0}(r,t,e)}}(t):Kt(e=t)?(r=Zt(e),function(t){return null==t?void 0:t[r]}):function(t){return function(e){return Rt(e,t)}}(e);var e,r}function Ut(t){if(r=(e=t)&&e.constructor,n="function"==typeof r&&r.prototype||rt,e!==n)return ht(t);var e,r,n,o=[];for(var i in Object(t))at.call(t,i)&&"constructor"!=i&&o.push(i);return o}function Gt(t){return ne(t)?t:Xt(t)}Ct.prototype.clear=function(){this.__data__=gt?gt(null):{}},Ct.prototype.delete=function(t){return this.has(t)&&delete this.__data__[t]},Ct.prototype.get=function(t){var e=this.__data__;if(gt){var r=e[t];return r===a?void 0:r}return at.call(e,t)?e[t]:void 0},Ct.prototype.has=function(t){var e=this.__data__;return gt?void 0!==e[t]:at.call(e,t)},Ct.prototype.set=function(t,e){return this.__data__[t]=gt&&void 0===e?a:e,this},kt.prototype.clear=function(){this.__data__=[]},kt.prototype.delete=function(t){var e=this.__data__,r=Mt(e,t);return!(r<0||(r==e.length-1?e.pop():pt.call(e,r,1),0))},kt.prototype.get=function(t){var e=this.__data__,r=Mt(e,t);return r<0?void 0:e[r][1]},kt.prototype.has=function(t){return Mt(this.__data__,t)>-1},kt.prototype.set=function(t,e){var r=this.__data__,n=Mt(r,t);return n<0?r.push([t,e]):r[n][1]=e,this},At.prototype.clear=function(){this.__data__={hash:new Ct,map:new(dt||kt),string:new Ct}},At.prototype.delete=function(t){return Ht(this,t).delete(t)},At.prototype.get=function(t){return Ht(this,t).get(t)},At.prototype.has=function(t){return Ht(this,t).has(t)},At.prototype.set=function(t,e){return Ht(this,t).set(t,e),this},jt.prototype.add=jt.prototype.push=function(t){return this.__data__.set(t,a),this},jt.prototype.has=function(t){return this.__data__.has(t)},Nt.prototype.clear=function(){this.__data__=new kt},Nt.prototype.delete=function(t){return this.__data__.delete(t)},Nt.prototype.get=function(t){return this.__data__.get(t)},Nt.prototype.has=function(t){return this.__data__.has(t)},Nt.prototype.set=function(t,e){var r=this.__data__;if(r instanceof kt){var n=r.__data__;if(!dt||n.length<o-1)return n.push([t,e]),this;r=this.__data__=new At(n)}return r.set(t,e),this};var Vt=mt&&1/Q(new mt([,-0]))[1]==l?function(t){return new mt(t)}:function(){};function zt(t,e,r,n,o,i){var a=o&u,l=t.length,c=e.length;if(l!=c&&!(a&&c>l))return!1;var f=i.get(t);if(f&&i.get(e))return f==e;var p=-1,h=!0,y=o&s?new jt:void 0;for(i.set(t,e),i.set(e,t);++p<l;){var d=t[p],v=e[p];if(n)var m=a?n(v,d,p,e,t,i):n(d,v,p,t,e,i);if(void 0!==m){if(m)continue;h=!1;break}if(y){if(!q(e,function(t,e){if(!y.has(e)&&(d===t||r(d,t,n,o,i)))return y.add(e)})){h=!1;break}}else if(d!==v&&!r(d,v,n,o,i)){h=!1;break}}return i.delete(t),i.delete(e),h}function Ht(t,e){var r,o,i=t.__data__;return("string"==(o=n(r=e))||"number"==o||"symbol"==o||"boolean"==o?"__proto__"!==r:null===r)?i["string"==typeof e?"string":"hash"]:i.map}function qt(t,e){var r=function(t,e){return null==t?void 0:t[e]}(t,e);return Bt(r)?r:void 0}var Jt=function(t){return st.call(t)};function Wt(t,e){return!!(e=null==e?c:e)&&("number"==typeof t||I.test(t))&&t>-1&&t%1==0&&t<e}function Kt(t,e){if(ne(t))return!1;var r=n(t);return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=t&&!le(t))||(C.test(t)||!T.test(t)||null!=e&&t in Object(e))}function Yt(t){return t==t&&!se(t)}function Qt(t,e){return function(r){return null!=r&&(r[t]===e&&(void 0!==e||t in Object(r)))}}(yt&&Jt(new yt(new ArrayBuffer(1)))!=x||dt&&Jt(new dt)!=b||vt&&"[object Promise]"!=Jt(vt.resolve())||mt&&Jt(new mt)!=_||bt&&"[object WeakMap]"!=Jt(new bt))&&(Jt=function(t){var e=st.call(t),r=e==S?t.constructor:void 0,n=r?$t(r):void 0;if(n)switch(n){case St:return x;case wt:return b;case _t:return"[object Promise]";case Ot:return _;case Et:return"[object WeakMap]"}return e});var Xt=te(function(t){var e;t=null==(e=t)?"":function(t){if("string"==typeof t)return t;if(le(t))return Tt?Tt.call(t):"";var e=t+"";return"0"==e&&1/t==-l?"-0":e}(e);var r=[];return k.test(t)&&r.push(""),t.replace(A,function(t,e,n,o){r.push(n?o.replace(j,"$1"):e||t)}),r});function Zt(t){if("string"==typeof t||le(t))return t;var e=t+"";return"0"==e&&1/t==-l?"-0":e}function $t(t){if(null!=t){try{return it.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function te(t,e){if("function"!=typeof t||e&&"function"!=typeof e)throw new TypeError(i);var r=function r(){var n=arguments,o=e?e.apply(this,n):n[0],i=r.cache;if(i.has(o))return i.get(o);var a=t.apply(this,n);return r.cache=i.set(o,a),a};return r.cache=new(te.Cache||At),r}function ee(t,e){return t===e||t!=t&&e!=e}function re(t){return function(t){return ue(t)&&oe(t)}(t)&&at.call(t,"callee")&&(!ft.call(t,"callee")||st.call(t)==f)}te.Cache=At;var ne=Array.isArray;function oe(t){return null!=t&&ae(t.length)&&!ie(t)}function ie(t){var e=se(t)?st.call(t):"";return e==v||e==m}function ae(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=c}function se(t){var e=n(t);return!!t&&("object"==e||"function"==e)}function ue(t){return!!t&&"object"==n(t)}function le(t){return"symbol"==n(t)||ue(t)&&st.call(t)==E}var ce=V?function(t){return function(e){return t(e)}}(V):function(t){return ue(t)&&ae(t.length)&&!!M[st.call(t)]};function fe(t){return oe(t)?It(t):Ut(t)}function pe(t){return t}t.exports=function(t,e){return t&&t.length?function(t,e,r){var n=-1,i=z,a=t.length,s=!0,u=[],l=u;if(r)s=!1,i=H;else if(a>=o){var c=e?null:Vt(t);if(c)return Q(c);s=!1,i=W,l=new jt}else l=e?[]:u;t:for(;++n<a;){var f=t[n],p=e?e(f):f;if(f=r||0!==f?f:0,s&&p==p){for(var h=l.length;h--;)if(l[h]===p)continue t;e&&l.push(p),u.push(f)}else i(l,p,r)||(l!==u&&l.push(p),u.push(f))}return u}(t,Ft(e)):[]}},7915:function(t,e,r){var n,o,i,a;function s(t){"@babel/helpers - typeof";return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}t=r.nmd(t),window,a=function(){return function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==s(t)&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(n,o,function(e){return t[e]}.bind(null,o));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=32)}([function(t,e){t.exports={options:{usePureJavaScript:!1}}},function(t,e,r){(function(e){var n=r(0),o=r(35),i=t.exports=n.util=n.util||{};function a(t){if(8!==t&&16!==t&&24!==t&&32!==t)throw new Error("Only 8, 16, 24, or 32 bits supported: "+t)}function u(t){if(this.data="",this.read=0,"string"==typeof t)this.data=t;else if(i.isArrayBuffer(t)||i.isArrayBufferView(t))if("undefined"!=typeof Buffer&&t instanceof Buffer)this.data=t.toString("binary");else{var e=new Uint8Array(t);try{this.data=String.fromCharCode.apply(null,e)}catch(t){for(var r=0;r<e.length;++r)this.putByte(e[r])}}else(t instanceof u||"object"==s(t)&&"string"==typeof t.data&&"number"==typeof t.read)&&(this.data=t.data,this.read=t.read);this._constructedStringLength=0}!function(){if("undefined"!=typeof process&&process.nextTick&&!process.browser)return i.nextTick=process.nextTick,void("function"==typeof setImmediate?i.setImmediate=setImmediate:i.setImmediate=i.nextTick);if("function"==typeof setImmediate)return i.setImmediate=function(){return setImmediate.apply(void 0,arguments)},void(i.nextTick=function(t){return setImmediate(t)});if(i.setImmediate=function(t){setTimeout(t,0)},"undefined"!=typeof window&&"function"==typeof window.postMessage){var t="forge.setImmediate",e=[];i.setImmediate=function(r){e.push(r),1===e.length&&window.postMessage(t,"*")},window.addEventListener("message",function(r){if(r.source===window&&r.data===t){r.stopPropagation();var n=e.slice();e.length=0,n.forEach(function(t){t()})}},!0)}if("undefined"!=typeof MutationObserver){var r=Date.now(),n=!0,o=document.createElement("div");e=[],new MutationObserver(function(){var t=e.slice();e.length=0,t.forEach(function(t){t()})}).observe(o,{attributes:!0});var a=i.setImmediate;i.setImmediate=function(t){Date.now()-r>15?(r=Date.now(),a(t)):(e.push(t),1===e.length&&o.setAttribute("a",n=!n))}}i.nextTick=i.setImmediate}(),i.isNodejs="undefined"!=typeof process&&process.versions&&process.versions.node,i.globalScope=i.isNodejs?e:"undefined"==typeof self?window:self,i.isArray=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},i.isArrayBuffer=function(t){return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer},i.isArrayBufferView=function(t){return t&&i.isArrayBuffer(t.buffer)&&void 0!==t.byteLength},i.ByteBuffer=u,i.ByteStringBuffer=u,i.ByteStringBuffer.prototype._optimizeConstructedString=function(t){this._constructedStringLength+=t,this._constructedStringLength>4096&&(this.data.substr(0,1),this._constructedStringLength=0)},i.ByteStringBuffer.prototype.length=function(){return this.data.length-this.read},i.ByteStringBuffer.prototype.isEmpty=function(){return this.length()<=0},i.ByteStringBuffer.prototype.putByte=function(t){return this.putBytes(String.fromCharCode(t))},i.ByteStringBuffer.prototype.fillWithByte=function(t,e){t=String.fromCharCode(t);for(var r=this.data;e>0;)1&e&&(r+=t),(e>>>=1)>0&&(t+=t);return this.data=r,this._optimizeConstructedString(e),this},i.ByteStringBuffer.prototype.putBytes=function(t){return this.data+=t,this._optimizeConstructedString(t.length),this},i.ByteStringBuffer.prototype.putString=function(t){return this.putBytes(i.encodeUtf8(t))},i.ByteStringBuffer.prototype.putInt16=function(t){return this.putBytes(String.fromCharCode(t>>8&255)+String.fromCharCode(255&t))},i.ByteStringBuffer.prototype.putInt24=function(t){return this.putBytes(String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(255&t))},i.ByteStringBuffer.prototype.putInt32=function(t){return this.putBytes(String.fromCharCode(t>>24&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(255&t))},i.ByteStringBuffer.prototype.putInt16Le=function(t){return this.putBytes(String.fromCharCode(255&t)+String.fromCharCode(t>>8&255))},i.ByteStringBuffer.prototype.putInt24Le=function(t){return this.putBytes(String.fromCharCode(255&t)+String.fromCharCode(t>>8&255)+String.fromCharCode(t>>16&255))},i.ByteStringBuffer.prototype.putInt32Le=function(t){return this.putBytes(String.fromCharCode(255&t)+String.fromCharCode(t>>8&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>24&255))},i.ByteStringBuffer.prototype.putInt=function(t,e){a(e);var r="";do{e-=8,r+=String.fromCharCode(t>>e&255)}while(e>0);return this.putBytes(r)},i.ByteStringBuffer.prototype.putSignedInt=function(t,e){return t<0&&(t+=2<<e-1),this.putInt(t,e)},i.ByteStringBuffer.prototype.putBuffer=function(t){return this.putBytes(t.getBytes())},i.ByteStringBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)},i.ByteStringBuffer.prototype.getInt16=function(){var t=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);return this.read+=2,t},i.ByteStringBuffer.prototype.getInt24=function(){var t=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);return this.read+=3,t},i.ByteStringBuffer.prototype.getInt32=function(){var t=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,t},i.ByteStringBuffer.prototype.getInt16Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;return this.read+=2,t},i.ByteStringBuffer.prototype.getInt24Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;return this.read+=3,t},i.ByteStringBuffer.prototype.getInt32Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;return this.read+=4,t},i.ByteStringBuffer.prototype.getInt=function(t){a(t);var e=0;do{e=(e<<8)+this.data.charCodeAt(this.read++),t-=8}while(t>0);return e},i.ByteStringBuffer.prototype.getSignedInt=function(t){var e=this.getInt(t),r=2<<t-2;return e>=r&&(e-=r<<1),e},i.ByteStringBuffer.prototype.getBytes=function(t){var e;return t?(t=Math.min(this.length(),t),e=this.data.slice(this.read,this.read+t),this.read+=t):0===t?e="":(e=0===this.read?this.data:this.data.slice(this.read),this.clear()),e},i.ByteStringBuffer.prototype.bytes=function(t){return void 0===t?this.data.slice(this.read):this.data.slice(this.read,this.read+t)},i.ByteStringBuffer.prototype.at=function(t){return this.data.charCodeAt(this.read+t)},i.ByteStringBuffer.prototype.setAt=function(t,e){return this.data=this.data.substr(0,this.read+t)+String.fromCharCode(e)+this.data.substr(this.read+t+1),this},i.ByteStringBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1)},i.ByteStringBuffer.prototype.copy=function(){var t=i.createBuffer(this.data);return t.read=this.read,t},i.ByteStringBuffer.prototype.compact=function(){return this.read>0&&(this.data=this.data.slice(this.read),this.read=0),this},i.ByteStringBuffer.prototype.clear=function(){return this.data="",this.read=0,this},i.ByteStringBuffer.prototype.truncate=function(t){var e=Math.max(0,this.length()-t);return this.data=this.data.substr(this.read,e),this.read=0,this},i.ByteStringBuffer.prototype.toHex=function(){for(var t="",e=this.read;e<this.data.length;++e){var r=this.data.charCodeAt(e);r<16&&(t+="0"),t+=r.toString(16)}return t},i.ByteStringBuffer.prototype.toString=function(){return i.decodeUtf8(this.bytes())},i.DataBuffer=function(t,e){e=e||{},this.read=e.readOffset||0,this.growSize=e.growSize||1024;var r=i.isArrayBuffer(t),n=i.isArrayBufferView(t);if(r||n)return this.data=r?new DataView(t):new DataView(t.buffer,t.byteOffset,t.byteLength),void(this.write="writeOffset"in e?e.writeOffset:this.data.byteLength);this.data=new DataView(new ArrayBuffer(0)),this.write=0,null!=t&&this.putBytes(t),"writeOffset"in e&&(this.write=e.writeOffset)},i.DataBuffer.prototype.length=function(){return this.write-this.read},i.DataBuffer.prototype.isEmpty=function(){return this.length()<=0},i.DataBuffer.prototype.accommodate=function(t,e){if(this.length()>=t)return this;e=Math.max(e||this.growSize,t);var r=new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength),n=new Uint8Array(this.length()+e);return n.set(r),this.data=new DataView(n.buffer),this},i.DataBuffer.prototype.putByte=function(t){return this.accommodate(1),this.data.setUint8(this.write++,t),this},i.DataBuffer.prototype.fillWithByte=function(t,e){this.accommodate(e);for(var r=0;r<e;++r)this.data.setUint8(t);return this},i.DataBuffer.prototype.putBytes=function(t,e){if(i.isArrayBufferView(t)){var r=(n=new Uint8Array(t.buffer,t.byteOffset,t.byteLength)).byteLength-n.byteOffset;return this.accommodate(r),new Uint8Array(this.data.buffer,this.write).set(n),this.write+=r,this}if(i.isArrayBuffer(t)){var n=new Uint8Array(t);return this.accommodate(n.byteLength),new Uint8Array(this.data.buffer).set(n,this.write),this.write+=n.byteLength,this}if(t instanceof i.DataBuffer||"object"==s(t)&&"number"==typeof t.read&&"number"==typeof t.write&&i.isArrayBufferView(t.data))return n=new Uint8Array(t.data.byteLength,t.read,t.length()),this.accommodate(n.byteLength),new Uint8Array(t.data.byteLength,this.write).set(n),this.write+=n.byteLength,this;if(t instanceof i.ByteStringBuffer&&(t=t.data,e="binary"),e=e||"binary","string"==typeof t){var o;if("hex"===e)return this.accommodate(Math.ceil(t.length/2)),o=new Uint8Array(this.data.buffer,this.write),this.write+=i.binary.hex.decode(t,o,this.write),this;if("base64"===e)return this.accommodate(3*Math.ceil(t.length/4)),o=new Uint8Array(this.data.buffer,this.write),this.write+=i.binary.base64.decode(t,o,this.write),this;if("utf8"===e&&(t=i.encodeUtf8(t),e="binary"),"binary"===e||"raw"===e)return this.accommodate(t.length),o=new Uint8Array(this.data.buffer,this.write),this.write+=i.binary.raw.decode(o),this;if("utf16"===e)return this.accommodate(2*t.length),o=new Uint16Array(this.data.buffer,this.write),this.write+=i.text.utf16.encode(o),this;throw new Error("Invalid encoding: "+e)}throw Error("Invalid parameter: "+t)},i.DataBuffer.prototype.putBuffer=function(t){return this.putBytes(t),t.clear(),this},i.DataBuffer.prototype.putString=function(t){return this.putBytes(t,"utf16")},i.DataBuffer.prototype.putInt16=function(t){return this.accommodate(2),this.data.setInt16(this.write,t),this.write+=2,this},i.DataBuffer.prototype.putInt24=function(t){return this.accommodate(3),this.data.setInt16(this.write,t>>8&65535),this.data.setInt8(this.write,t>>16&255),this.write+=3,this},i.DataBuffer.prototype.putInt32=function(t){return this.accommodate(4),this.data.setInt32(this.write,t),this.write+=4,this},i.DataBuffer.prototype.putInt16Le=function(t){return this.accommodate(2),this.data.setInt16(this.write,t,!0),this.write+=2,this},i.DataBuffer.prototype.putInt24Le=function(t){return this.accommodate(3),this.data.setInt8(this.write,t>>16&255),this.data.setInt16(this.write,t>>8&65535,!0),this.write+=3,this},i.DataBuffer.prototype.putInt32Le=function(t){return this.accommodate(4),this.data.setInt32(this.write,t,!0),this.write+=4,this},i.DataBuffer.prototype.putInt=function(t,e){a(e),this.accommodate(e/8);do{e-=8,this.data.setInt8(this.write++,t>>e&255)}while(e>0);return this},i.DataBuffer.prototype.putSignedInt=function(t,e){return a(e),this.accommodate(e/8),t<0&&(t+=2<<e-1),this.putInt(t,e)},i.DataBuffer.prototype.getByte=function(){return this.data.getInt8(this.read++)},i.DataBuffer.prototype.getInt16=function(){var t=this.data.getInt16(this.read);return this.read+=2,t},i.DataBuffer.prototype.getInt24=function(){var t=this.data.getInt16(this.read)<<8^this.data.getInt8(this.read+2);return this.read+=3,t},i.DataBuffer.prototype.getInt32=function(){var t=this.data.getInt32(this.read);return this.read+=4,t},i.DataBuffer.prototype.getInt16Le=function(){var t=this.data.getInt16(this.read,!0);return this.read+=2,t},i.DataBuffer.prototype.getInt24Le=function(){var t=this.data.getInt8(this.read)^this.data.getInt16(this.read+1,!0)<<8;return this.read+=3,t},i.DataBuffer.prototype.getInt32Le=function(){var t=this.data.getInt32(this.read,!0);return this.read+=4,t},i.DataBuffer.prototype.getInt=function(t){a(t);var e=0;do{e=(e<<8)+this.data.getInt8(this.read++),t-=8}while(t>0);return e},i.DataBuffer.prototype.getSignedInt=function(t){var e=this.getInt(t),r=2<<t-2;return e>=r&&(e-=r<<1),e},i.DataBuffer.prototype.getBytes=function(t){var e;return t?(t=Math.min(this.length(),t),e=this.data.slice(this.read,this.read+t),this.read+=t):0===t?e="":(e=0===this.read?this.data:this.data.slice(this.read),this.clear()),e},i.DataBuffer.prototype.bytes=function(t){return void 0===t?this.data.slice(this.read):this.data.slice(this.read,this.read+t)},i.DataBuffer.prototype.at=function(t){return this.data.getUint8(this.read+t)},i.DataBuffer.prototype.setAt=function(t,e){return this.data.setUint8(t,e),this},i.DataBuffer.prototype.last=function(){return this.data.getUint8(this.write-1)},i.DataBuffer.prototype.copy=function(){return new i.DataBuffer(this)},i.DataBuffer.prototype.compact=function(){if(this.read>0){var t=new Uint8Array(this.data.buffer,this.read),e=new Uint8Array(t.byteLength);e.set(t),this.data=new DataView(e),this.write-=this.read,this.read=0}return this},i.DataBuffer.prototype.clear=function(){return this.data=new DataView(new ArrayBuffer(0)),this.read=this.write=0,this},i.DataBuffer.prototype.truncate=function(t){return this.write=Math.max(0,this.length()-t),this.read=Math.min(this.read,this.write),this},i.DataBuffer.prototype.toHex=function(){for(var t="",e=this.read;e<this.data.byteLength;++e){var r=this.data.getUint8(e);r<16&&(t+="0"),t+=r.toString(16)}return t},i.DataBuffer.prototype.toString=function(t){var e=new Uint8Array(this.data,this.read,this.length());if("binary"===(t=t||"utf8")||"raw"===t)return i.binary.raw.encode(e);if("hex"===t)return i.binary.hex.encode(e);if("base64"===t)return i.binary.base64.encode(e);if("utf8"===t)return i.text.utf8.decode(e);if("utf16"===t)return i.text.utf16.decode(e);throw new Error("Invalid encoding: "+t)},i.createBuffer=function(t,e){return e=e||"raw",void 0!==t&&"utf8"===e&&(t=i.encodeUtf8(t)),new i.ByteBuffer(t)},i.fillString=function(t,e){for(var r="";e>0;)1&e&&(r+=t),(e>>>=1)>0&&(t+=t);return r},i.xorBytes=function(t,e,r){for(var n="",o="",i="",a=0,s=0;r>0;--r,++a)o=t.charCodeAt(a)^e.charCodeAt(a),s>=10&&(n+=i,i="",s=0),i+=String.fromCharCode(o),++s;return n+i},i.hexToBytes=function(t){var e="",r=0;for(!0&t.length&&(r=1,e+=String.fromCharCode(parseInt(t[0],16)));r<t.length;r+=2)e+=String.fromCharCode(parseInt(t.substr(r,2),16));return e},i.bytesToHex=function(t){return i.createBuffer(t).toHex()},i.int32ToBytes=function(t){return String.fromCharCode(t>>24&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(255&t)};var l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",c=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],f="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";i.encode64=function(t,e){for(var r,n,o,i="",a="",s=0;s<t.length;)r=t.charCodeAt(s++),n=t.charCodeAt(s++),o=t.charCodeAt(s++),i+=l.charAt(r>>2),i+=l.charAt((3&r)<<4|n>>4),isNaN(n)?i+="==":(i+=l.charAt((15&n)<<2|o>>6),i+=isNaN(o)?"=":l.charAt(63&o)),e&&i.length>e&&(a+=i.substr(0,e)+"\r\n",i=i.substr(e));return a+i},i.decode64=function(t){t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var e,r,n,o,i="",a=0;a<t.length;)e=c[t.charCodeAt(a++)-43],r=c[t.charCodeAt(a++)-43],n=c[t.charCodeAt(a++)-43],o=c[t.charCodeAt(a++)-43],i+=String.fromCharCode(e<<2|r>>4),64!==n&&(i+=String.fromCharCode((15&r)<<4|n>>2),64!==o&&(i+=String.fromCharCode((3&n)<<6|o)));return i},i.encodeUtf8=function(t){return unescape(encodeURIComponent(t))},i.decodeUtf8=function(t){return decodeURIComponent(escape(t))},i.binary={raw:{},hex:{},base64:{},base58:{},baseN:{encode:o.encode,decode:o.decode}},i.binary.raw.encode=function(t){return String.fromCharCode.apply(null,t)},i.binary.raw.decode=function(t,e,r){var n=e;n||(n=new Uint8Array(t.length));for(var o=r=r||0,i=0;i<t.length;++i)n[o++]=t.charCodeAt(i);return e?o-r:n},i.binary.hex.encode=i.bytesToHex,i.binary.hex.decode=function(t,e,r){var n=e;n||(n=new Uint8Array(Math.ceil(t.length/2)));var o=0,i=r=r||0;for(1&t.length&&(o=1,n[i++]=parseInt(t[0],16));o<t.length;o+=2)n[i++]=parseInt(t.substr(o,2),16);return e?i-r:n},i.binary.base64.encode=function(t,e){for(var r,n,o,i="",a="",s=0;s<t.byteLength;)r=t[s++],n=t[s++],o=t[s++],i+=l.charAt(r>>2),i+=l.charAt((3&r)<<4|n>>4),isNaN(n)?i+="==":(i+=l.charAt((15&n)<<2|o>>6),i+=isNaN(o)?"=":l.charAt(63&o)),e&&i.length>e&&(a+=i.substr(0,e)+"\r\n",i=i.substr(e));return a+i},i.binary.base64.decode=function(t,e,r){var n,o,i,a,s=e;s||(s=new Uint8Array(3*Math.ceil(t.length/4))),t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var u=0,l=r=r||0;u<t.length;)n=c[t.charCodeAt(u++)-43],o=c[t.charCodeAt(u++)-43],i=c[t.charCodeAt(u++)-43],a=c[t.charCodeAt(u++)-43],s[l++]=n<<2|o>>4,64!==i&&(s[l++]=(15&o)<<4|i>>2,64!==a&&(s[l++]=(3&i)<<6|a));return e?l-r:s.subarray(0,l)},i.binary.base58.encode=function(t,e){return i.binary.baseN.encode(t,f,e)},i.binary.base58.decode=function(t,e){return i.binary.baseN.decode(t,f,e)},i.text={utf8:{},utf16:{}},i.text.utf8.encode=function(t,e,r){t=i.encodeUtf8(t);var n=e;n||(n=new Uint8Array(t.length));for(var o=r=r||0,a=0;a<t.length;++a)n[o++]=t.charCodeAt(a);return e?o-r:n},i.text.utf8.decode=function(t){return i.decodeUtf8(String.fromCharCode.apply(null,t))},i.text.utf16.encode=function(t,e,r){var n=e;n||(n=new Uint8Array(2*t.length));for(var o=new Uint16Array(n.buffer),i=r=r||0,a=r,s=0;s<t.length;++s)o[a++]=t.charCodeAt(s),i+=2;return e?i-r:n},i.text.utf16.decode=function(t){return String.fromCharCode.apply(null,new Uint16Array(t.buffer))},i.deflate=function(t,e,r){if(e=i.decode64(t.deflate(i.encode64(e)).rval),r){var n=2;32&e.charCodeAt(1)&&(n=6),e=e.substring(n,e.length-4)}return e},i.inflate=function(t,e,r){var n=t.inflate(i.encode64(e)).rval;return null===n?null:i.decode64(n)};var p=function(t,e,r){if(!t)throw new Error("WebStorage not available.");var n;if(null===r?n=t.removeItem(e):(r=i.encode64(JSON.stringify(r)),n=t.setItem(e,r)),void 0!==n&&!0!==n.rval){var o=new Error(n.error.message);throw o.id=n.error.id,o.name=n.error.name,o}},h=function(t,e){if(!t)throw new Error("WebStorage not available.");var r=t.getItem(e);if(t.init)if(null===r.rval){if(r.error){var n=new Error(r.error.message);throw n.id=r.error.id,n.name=r.error.name,n}r=null}else r=r.rval;return null!==r&&(r=JSON.parse(i.decode64(r))),r},y=function(t,e,r,n){var o=h(t,e);null===o&&(o={}),o[r]=n,p(t,e,o)},d=function(t,e,r){var n=h(t,e);return null!==n&&(n=r in n?n[r]:null),n},v=function(t,e,r){var n=h(t,e);if(null!==n&&r in n){delete n[r];var o=!0;for(var i in n){o=!1;break}o&&(n=null),p(t,e,n)}},m=function(t,e){p(t,e,null)},b=function(t,e,r){var n,o=null;void 0===r&&(r=["web","flash"]);var i=!1,a=null;for(var s in r){n=r[s];try{if("flash"===n||"both"===n){if(null===e[0])throw new Error("Flash local storage not available.");o=t.apply(this,e),i="flash"===n}"web"!==n&&"both"!==n||(e[0]=localStorage,o=t.apply(this,e),i=!0)}catch(t){a=t}if(i)break}if(!i)throw a;return o};i.setItem=function(t,e,r,n,o){b(y,arguments,o)},i.getItem=function(t,e,r,n){return b(d,arguments,n)},i.removeItem=function(t,e,r,n){b(v,arguments,n)},i.clearItems=function(t,e,r){b(m,arguments,r)},i.isEmpty=function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0},i.format=function(t){for(var e,r,n=/%./g,o=0,i=[],a=0;e=n.exec(t);){(r=t.substring(a,n.lastIndex-2)).length>0&&i.push(r),a=n.lastIndex;var s=e[0][1];switch(s){case"s":case"o":o<arguments.length?i.push(arguments[1+o++]):i.push("<?>");break;case"%":i.push("%");break;default:i.push("<%"+s+"?>")}}return i.push(t.substring(a)),i.join("")},i.formatNumber=function(t,e,r,n){var o=t,i=isNaN(e=Math.abs(e))?2:e,a=void 0===r?",":r,s=void 0===n?".":n,u=o<0?"-":"",l=parseInt(o=Math.abs(+o||0).toFixed(i),10)+"",c=l.length>3?l.length%3:0;return u+(c?l.substr(0,c)+s:"")+l.substr(c).replace(/(\d{3})(?=\d)/g,"$1"+s)+(i?a+Math.abs(o-l).toFixed(i).slice(2):"")},i.formatSize=function(t){return t>=1073741824?i.formatNumber(t/1073741824,2,".","")+" GiB":t>=1048576?i.formatNumber(t/1048576,2,".","")+" MiB":t>=1024?i.formatNumber(t/1024,0)+" KiB":i.formatNumber(t,0)+" bytes"},i.bytesFromIP=function(t){return-1!==t.indexOf(".")?i.bytesFromIPv4(t):-1!==t.indexOf(":")?i.bytesFromIPv6(t):null},i.bytesFromIPv4=function(t){if(4!==(t=t.split(".")).length)return null;for(var e=i.createBuffer(),r=0;r<t.length;++r){var n=parseInt(t[r],10);if(isNaN(n))return null;e.putByte(n)}return e.getBytes()},i.bytesFromIPv6=function(t){for(var e=0,r=2*(8-(t=t.split(":").filter(function(t){return 0===t.length&&++e,!0})).length+e),n=i.createBuffer(),o=0;o<8;++o)if(t[o]&&0!==t[o].length){var a=i.hexToBytes(t[o]);a.length<2&&n.putByte(0),n.putBytes(a)}else n.fillWithByte(0,r),r=0;return n.getBytes()},i.bytesToIP=function(t){return 4===t.length?i.bytesToIPv4(t):16===t.length?i.bytesToIPv6(t):null},i.bytesToIPv4=function(t){if(4!==t.length)return null;for(var e=[],r=0;r<t.length;++r)e.push(t.charCodeAt(r));return e.join(".")},i.bytesToIPv6=function(t){if(16!==t.length)return null;for(var e=[],r=[],n=0,o=0;o<t.length;o+=2){for(var a=i.bytesToHex(t[o]+t[o+1]);"0"===a[0]&&"0"!==a;)a=a.substr(1);if("0"===a){var s=r[r.length-1],u=e.length;s&&u===s.end+1?(s.end=u,s.end-s.start>r[n].end-r[n].start&&(n=r.length-1)):r.push({start:u,end:u})}e.push(a)}if(r.length>0){var l=r[n];l.end-l.start>0&&(e.splice(l.start,l.end-l.start+1,""),0===l.start&&e.unshift(""),7===l.end&&e.push(""))}return e.join(":")},i.estimateCores=function(t,e){if("function"==typeof t&&(e=t,t={}),t=t||{},"cores"in i&&!t.update)return e(null,i.cores);if("undefined"!=typeof navigator&&"hardwareConcurrency"in navigator&&navigator.hardwareConcurrency>0)return i.cores=navigator.hardwareConcurrency,e(null,i.cores);if("undefined"==typeof Worker)return i.cores=1,e(null,i.cores);if("undefined"==typeof Blob)return i.cores=2,e(null,i.cores);var r=URL.createObjectURL(new Blob(["(",function(){self.addEventListener("message",function(t){for(var e=Date.now(),r=e+4;Date.now()<r;);self.postMessage({st:e,et:r})})}.toString(),")()"],{type:"application/javascript"}));!function t(n,o,a){if(0===o){var s=Math.floor(n.reduce(function(t,e){return t+e},0)/n.length);return i.cores=Math.max(1,s),URL.revokeObjectURL(r),e(null,i.cores)}!function(t,e){for(var n=[],o=[],i=0;i<t;++i){var a=new Worker(r);a.addEventListener("message",function(r){if(o.push(r.data),o.length===t){for(var i=0;i<t;++i)n[i].terminate();e(null,o)}}),n.push(a)}for(i=0;i<t;++i)n[i].postMessage(i)}(a,function(e,r){n.push(function(t,e){for(var r=[],n=0;n<t;++n)for(var o=e[n],i=r[n]=[],a=0;a<t;++a)if(n!==a){var s=e[a];(o.st>s.st&&o.st<s.et||s.st>o.st&&s.st<o.et)&&i.push(a)}return r.reduce(function(t,e){return Math.max(t,e.length)},0)}(a,r)),t(n,o-1,a)})}([],5,16)}}).call(this,r(34))},function(t,e,r){var n=r(0);r(5),r(23),r(24),r(1),n.random&&n.random.getBytes?t.exports=n.random:function(e){var r={},o=new Array(4),i=n.util.createBuffer();function a(){var t=n.prng.create(r);return t.getBytes=function(e,r){return t.generate(e,r)},t.getBytesSync=function(e){return t.generate(e)},t}r.formatKey=function(t){var e=n.util.createBuffer(t);return(t=new Array(4))[0]=e.getInt32(),t[1]=e.getInt32(),t[2]=e.getInt32(),t[3]=e.getInt32(),n.aes._expandKey(t,!1)},r.formatSeed=function(t){var e=n.util.createBuffer(t);return(t=new Array(4))[0]=e.getInt32(),t[1]=e.getInt32(),t[2]=e.getInt32(),t[3]=e.getInt32(),t},r.cipher=function(t,e){return n.aes._updateBlock(t,e,o,!1),i.putInt32(o[0]),i.putInt32(o[1]),i.putInt32(o[2]),i.putInt32(o[3]),i.getBytes()},r.increment=function(t){return++t[3],t},r.md=n.md.sha256;var s=a(),u=null,l=n.util.globalScope,c=l.crypto||l.msCrypto;if(c&&c.getRandomValues&&(u=function(t){return c.getRandomValues(t)}),n.options.usePureJavaScript||!n.util.isNodejs&&!u){if("undefined"==typeof window||window.document,s.collectInt(+new Date,32),"undefined"!=typeof navigator){var f="";for(var p in navigator)try{"string"==typeof navigator[p]&&(f+=navigator[p])}catch(t){}s.collect(f),f=null}e&&(e().mousemove(function(t){s.collectInt(t.clientX,16),s.collectInt(t.clientY,16)}),e().keypress(function(t){s.collectInt(t.charCode,8)}))}if(n.random)for(var p in s)n.random[p]=s[p];else n.random=s;n.random.createInstance=a,t.exports=n.random}("undefined"!=typeof jQuery?jQuery:null)},function(t,e,r){var n=r(0);r(1),r(6);var o=t.exports=n.asn1=n.asn1||{};function i(t,e,r){if(r>e){var n=new Error("Too few bytes to parse DER.");throw n.available=t.length(),n.remaining=e,n.requested=r,n}}o.Class={UNIVERSAL:0,APPLICATION:64,CONTEXT_SPECIFIC:128,PRIVATE:192},o.Type={NONE:0,BOOLEAN:1,INTEGER:2,BITSTRING:3,OCTETSTRING:4,NULL:5,OID:6,ODESC:7,EXTERNAL:8,REAL:9,ENUMERATED:10,EMBEDDED:11,UTF8:12,ROID:13,SEQUENCE:16,SET:17,PRINTABLESTRING:19,IA5STRING:22,UTCTIME:23,GENERALIZEDTIME:24,BMPSTRING:30},o.create=function(t,e,r,i,a){if(n.util.isArray(i)){for(var s=[],u=0;u<i.length;++u)void 0!==i[u]&&s.push(i[u]);i=s}var l={tagClass:t,type:e,constructed:r,composed:r||n.util.isArray(i),value:i};return a&&"bitStringContents"in a&&(l.bitStringContents=a.bitStringContents,l.original=o.copy(l)),l},o.copy=function(t,e){var r;if(n.util.isArray(t)){r=[];for(var i=0;i<t.length;++i)r.push(o.copy(t[i],e));return r}return"string"==typeof t?t:(r={tagClass:t.tagClass,type:t.type,constructed:t.constructed,composed:t.composed,value:o.copy(t.value,e)},e&&!e.excludeBitStringContents&&(r.bitStringContents=t.bitStringContents),r)},o.equals=function(t,e,r){if(n.util.isArray(t)){if(!n.util.isArray(e))return!1;if(t.length!==e.length)return!1;for(var i=0;i<t.length;++i)if(!o.equals(t[i],e[i]))return!1;return!0}if(s(t)!=s(e))return!1;if("string"==typeof t)return t===e;var a=t.tagClass===e.tagClass&&t.type===e.type&&t.constructed===e.constructed&&t.composed===e.composed&&o.equals(t.value,e.value);return r&&r.includeBitStringContents&&(a=a&&t.bitStringContents===e.bitStringContents),a},o.getBerValueLength=function(t){var e=t.getByte();if(128!==e)return 128&e?t.getInt((127&e)<<3):e},o.fromDer=function(t,e){void 0===e&&(e={strict:!0,parseAllBytes:!0,decodeBitStrings:!0}),"boolean"==typeof e&&(e={strict:e,parseAllBytes:!0,decodeBitStrings:!0}),"strict"in e||(e.strict=!0),"parseAllBytes"in e||(e.parseAllBytes=!0),"decodeBitStrings"in e||(e.decodeBitStrings=!0),"string"==typeof t&&(t=n.util.createBuffer(t));var r=t.length(),a=function t(e,r,n,a){var s;i(e,r,2);var u=e.getByte();r--;var l=192&u,c=31&u;s=e.length();var f,p,h=function(t,e){var r=t.getByte();if(e--,128!==r){var n;if(128&r){var o=127&r;i(t,e,o),n=t.getInt(o<<3)}else n=r;if(n<0)throw new Error("Negative length: "+n);return n}}(e,r);if(r-=s-e.length(),void 0!==h&&h>r){if(a.strict){var y=new Error("Too few bytes to read ASN.1 value.");throw y.available=e.length(),y.remaining=r,y.requested=h,y}h=r}var d=32==(32&u);if(d)if(f=[],void 0===h)for(;;){if(i(e,r,2),e.bytes(2)===String.fromCharCode(0,0)){e.getBytes(2),r-=2;break}s=e.length(),f.push(t(e,r,n+1,a)),r-=s-e.length()}else for(;h>0;)s=e.length(),f.push(t(e,h,n+1,a)),r-=s-e.length(),h-=s-e.length();if(void 0===f&&l===o.Class.UNIVERSAL&&c===o.Type.BITSTRING&&(p=e.bytes(h)),void 0===f&&a.decodeBitStrings&&l===o.Class.UNIVERSAL&&c===o.Type.BITSTRING&&h>1){var v=e.read,m=r,b=0;if(c===o.Type.BITSTRING&&(i(e,r,1),b=e.getByte(),r--),0===b)try{s=e.length();var g=t(e,r,n+1,{strict:!0,decodeBitStrings:!0}),S=s-e.length();r-=S,c==o.Type.BITSTRING&&S++;var w=g.tagClass;S!==h||w!==o.Class.UNIVERSAL&&w!==o.Class.CONTEXT_SPECIFIC||(f=[g])}catch(t){}void 0===f&&(e.read=v,r=m)}if(void 0===f){if(void 0===h){if(a.strict)throw new Error("Non-constructed ASN.1 object of indefinite length.");h=r}if(c===o.Type.BMPSTRING)for(f="";h>0;h-=2)i(e,r,2),f+=String.fromCharCode(e.getInt16()),r-=2;else f=e.getBytes(h),r-=h}var _=void 0===p?null:{bitStringContents:p};return o.create(l,c,d,f,_)}(t,t.length(),0,e);if(e.parseAllBytes&&0!==t.length()){var s=new Error("Unparsed DER bytes remain after ASN.1 parsing.");throw s.byteCount=r,s.remaining=t.length(),s}return a},o.toDer=function(t){var e=n.util.createBuffer(),r=t.tagClass|t.type,i=n.util.createBuffer(),a=!1;if("bitStringContents"in t&&(a=!0,t.original&&(a=o.equals(t,t.original))),a)i.putBytes(t.bitStringContents);else if(t.composed){t.constructed?r|=32:i.putByte(0);for(var s=0;s<t.value.length;++s)void 0!==t.value[s]&&i.putBuffer(o.toDer(t.value[s]))}else if(t.type===o.Type.BMPSTRING)for(s=0;s<t.value.length;++s)i.putInt16(t.value.charCodeAt(s));else t.type===o.Type.INTEGER&&t.value.length>1&&(0===t.value.charCodeAt(0)&&0==(128&t.value.charCodeAt(1))||255===t.value.charCodeAt(0)&&128==(128&t.value.charCodeAt(1)))?i.putBytes(t.value.substr(1)):i.putBytes(t.value);if(e.putByte(r),i.length()<=127)e.putByte(127&i.length());else{var u=i.length(),l="";do{l+=String.fromCharCode(255&u),u>>>=8}while(u>0);for(e.putByte(128|l.length),s=l.length-1;s>=0;--s)e.putByte(l.charCodeAt(s))}return e.putBuffer(i),e},o.oidToDer=function(t){var e,r,o,i,a=t.split("."),s=n.util.createBuffer();s.putByte(40*parseInt(a[0],10)+parseInt(a[1],10));for(var u=2;u<a.length;++u){e=!0,r=[],o=parseInt(a[u],10);do{i=127&o,o>>>=7,e||(i|=128),r.push(i),e=!1}while(o>0);for(var l=r.length-1;l>=0;--l)s.putByte(r[l])}return s},o.derToOid=function(t){var e;"string"==typeof t&&(t=n.util.createBuffer(t));var r=t.getByte();e=Math.floor(r/40)+"."+r%40;for(var o=0;t.length()>0;)o<<=7,128&(r=t.getByte())?o+=127&r:(e+="."+(o+r),o=0);return e},o.utcTimeToDate=function(t){var e=new Date,r=parseInt(t.substr(0,2),10);r=r>=50?1900+r:2e3+r;var n=parseInt(t.substr(2,2),10)-1,o=parseInt(t.substr(4,2),10),i=parseInt(t.substr(6,2),10),a=parseInt(t.substr(8,2),10),s=0;if(t.length>11){var u=t.charAt(10),l=10;"+"!==u&&"-"!==u&&(s=parseInt(t.substr(10,2),10),l+=2)}if(e.setUTCFullYear(r,n,o),e.setUTCHours(i,a,s,0),l&&("+"===(u=t.charAt(l))||"-"===u)){var c=60*parseInt(t.substr(l+1,2),10)+parseInt(t.substr(l+4,2),10);c*=6e4,"+"===u?e.setTime(+e-c):e.setTime(+e+c)}return e},o.generalizedTimeToDate=function(t){var e=new Date,r=parseInt(t.substr(0,4),10),n=parseInt(t.substr(4,2),10)-1,o=parseInt(t.substr(6,2),10),i=parseInt(t.substr(8,2),10),a=parseInt(t.substr(10,2),10),s=parseInt(t.substr(12,2),10),u=0,l=0,c=!1;"Z"===t.charAt(t.length-1)&&(c=!0);var f=t.length-5,p=t.charAt(f);return"+"!==p&&"-"!==p||(l=60*parseInt(t.substr(f+1,2),10)+parseInt(t.substr(f+4,2),10),l*=6e4,"+"===p&&(l*=-1),c=!0),"."===t.charAt(14)&&(u=1e3*parseFloat(t.substr(14),10)),c?(e.setUTCFullYear(r,n,o),e.setUTCHours(i,a,s,u),e.setTime(+e+l)):(e.setFullYear(r,n,o),e.setHours(i,a,s,u)),e},o.dateToUtcTime=function(t){if("string"==typeof t)return t;var e="",r=[];r.push((""+t.getUTCFullYear()).substr(2)),r.push(""+(t.getUTCMonth()+1)),r.push(""+t.getUTCDate()),r.push(""+t.getUTCHours()),r.push(""+t.getUTCMinutes()),r.push(""+t.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(e+="0"),e+=r[n];return e+"Z"},o.dateToGeneralizedTime=function(t){if("string"==typeof t)return t;var e="",r=[];r.push(""+t.getUTCFullYear()),r.push(""+(t.getUTCMonth()+1)),r.push(""+t.getUTCDate()),r.push(""+t.getUTCHours()),r.push(""+t.getUTCMinutes()),r.push(""+t.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(e+="0"),e+=r[n];return e+"Z"},o.integerToDer=function(t){var e=n.util.createBuffer();if(t>=-128&&t<128)return e.putSignedInt(t,8);if(t>=-32768&&t<32768)return e.putSignedInt(t,16);if(t>=-8388608&&t<8388608)return e.putSignedInt(t,24);if(t>=-2147483648&&t<2147483648)return e.putSignedInt(t,32);var r=new Error("Integer too large; max is 32-bits.");throw r.integer=t,r},o.derToInteger=function(t){"string"==typeof t&&(t=n.util.createBuffer(t));var e=8*t.length();if(e>32)throw new Error("Integer too large; max is 32-bits.");return t.getSignedInt(e)},o.validate=function(t,e,r,i){var a=!1;if(t.tagClass!==e.tagClass&&void 0!==e.tagClass||t.type!==e.type&&void 0!==e.type)i&&(t.tagClass!==e.tagClass&&i.push("["+e.name+'] Expected tag class "'+e.tagClass+'", got "'+t.tagClass+'"'),t.type!==e.type&&i.push("["+e.name+'] Expected type "'+e.type+'", got "'+t.type+'"'));else if(t.constructed===e.constructed||void 0===e.constructed){if(a=!0,e.value&&n.util.isArray(e.value))for(var s=0,u=0;a&&u<e.value.length;++u)a=e.value[u].optional||!1,t.value[s]&&((a=o.validate(t.value[s],e.value[u],r,i))?++s:e.value[u].optional&&(a=!0)),!a&&i&&i.push("["+e.name+'] Tag class "'+e.tagClass+'", type "'+e.type+'" expected value length "'+e.value.length+'", got "'+t.value.length+'"');if(a&&r&&(e.capture&&(r[e.capture]=t.value),e.captureAsn1&&(r[e.captureAsn1]=t),e.captureBitStringContents&&"bitStringContents"in t&&(r[e.captureBitStringContents]=t.bitStringContents),e.captureBitStringValue&&"bitStringContents"in t))if(t.bitStringContents.length<2)r[e.captureBitStringValue]="";else{if(0!==t.bitStringContents.charCodeAt(0))throw new Error("captureBitStringValue only supported for zero unused bits");r[e.captureBitStringValue]=t.bitStringContents.slice(1)}}else i&&i.push("["+e.name+'] Expected constructed "'+e.constructed+'", got "'+t.constructed+'"');return a};var a=/[^\\u0000-\\u00ff]/;o.prettyPrint=function(t,e,r){var i="";r=r||2,(e=e||0)>0&&(i+="\n");for(var s="",u=0;u<e*r;++u)s+=" ";switch(i+=s+"Tag: ",t.tagClass){case o.Class.UNIVERSAL:i+="Universal:";break;case o.Class.APPLICATION:i+="Application:";break;case o.Class.CONTEXT_SPECIFIC:i+="Context-Specific:";break;case o.Class.PRIVATE:i+="Private:"}if(t.tagClass===o.Class.UNIVERSAL)switch(i+=t.type,t.type){case o.Type.NONE:i+=" (None)";break;case o.Type.BOOLEAN:i+=" (Boolean)";break;case o.Type.INTEGER:i+=" (Integer)";break;case o.Type.BITSTRING:i+=" (Bit string)";break;case o.Type.OCTETSTRING:i+=" (Octet string)";break;case o.Type.NULL:i+=" (Null)";break;case o.Type.OID:i+=" (Object Identifier)";break;case o.Type.ODESC:i+=" (Object Descriptor)";break;case o.Type.EXTERNAL:i+=" (External or Instance of)";break;case o.Type.REAL:i+=" (Real)";break;case o.Type.ENUMERATED:i+=" (Enumerated)";break;case o.Type.EMBEDDED:i+=" (Embedded PDV)";break;case o.Type.UTF8:i+=" (UTF8)";break;case o.Type.ROID:i+=" (Relative Object Identifier)";break;case o.Type.SEQUENCE:i+=" (Sequence)";break;case o.Type.SET:i+=" (Set)";break;case o.Type.PRINTABLESTRING:i+=" (Printable String)";break;case o.Type.IA5String:i+=" (IA5String (ASCII))";break;case o.Type.UTCTIME:i+=" (UTC time)";break;case o.Type.GENERALIZEDTIME:i+=" (Generalized time)";break;case o.Type.BMPSTRING:i+=" (BMP String)"}else i+=t.type;if(i+="\n",i+=s+"Constructed: "+t.constructed+"\n",t.composed){var l=0,c="";for(u=0;u<t.value.length;++u)void 0!==t.value[u]&&(l+=1,c+=o.prettyPrint(t.value[u],e+1,r),u+1<t.value.length&&(c+=","));i+=s+"Sub values: "+l+c}else{if(i+=s+"Value: ",t.type===o.Type.OID){var f=o.derToOid(t.value);i+=f,n.pki&&n.pki.oids&&f in n.pki.oids&&(i+=" ("+n.pki.oids[f]+") ")}if(t.type===o.Type.INTEGER)try{i+=o.derToInteger(t.value)}catch(e){i+="0x"+n.util.bytesToHex(t.value)}else if(t.type===o.Type.BITSTRING){if(t.value.length>1?i+="0x"+n.util.bytesToHex(t.value.slice(1)):i+="(none)",t.value.length>0){var p=t.value.charCodeAt(0);1==p?i+=" (1 unused bit shown)":p>1&&(i+=" ("+p+" unused bits shown)")}}else if(t.type===o.Type.OCTETSTRING)a.test(t.value)||(i+="("+t.value+") "),i+="0x"+n.util.bytesToHex(t.value);else if(t.type===o.Type.UTF8)try{i+=n.util.decodeUtf8(t.value)}catch(e){if("URI malformed"!==e.message)throw e;i+="0x"+n.util.bytesToHex(t.value)+" (malformed UTF8)"}else t.type===o.Type.PRINTABLESTRING||t.type===o.Type.IA5String?i+=t.value:a.test(t.value)?i+="0x"+n.util.bytesToHex(t.value):0===t.value.length?i+="[null]":i+=t.value}return i}},function(t,e,r){var n=r(0);t.exports=n.md=n.md||{},n.md.algorithms=n.md.algorithms||{}},function(t,e,r){var n=r(0);function o(t,e){n.cipher.registerAlgorithm(t,function(){return new n.aes.Algorithm(t,e)})}r(13),r(19),r(1),t.exports=n.aes=n.aes||{},n.aes.startEncrypting=function(t,e,r,n){var o=y({key:t,output:r,decrypt:!1,mode:n});return o.start(e),o},n.aes.createEncryptionCipher=function(t,e){return y({key:t,output:null,decrypt:!1,mode:e})},n.aes.startDecrypting=function(t,e,r,n){var o=y({key:t,output:r,decrypt:!0,mode:n});return o.start(e),o},n.aes.createDecryptionCipher=function(t,e){return y({key:t,output:null,decrypt:!0,mode:e})},n.aes.Algorithm=function(t,e){c||f();var r=this;r.name=t,r.mode=new e({blockSize:16,cipher:{encrypt:function(t,e){return h(r._w,t,e,!1)},decrypt:function(t,e){return h(r._w,t,e,!0)}}}),r._init=!1},n.aes.Algorithm.prototype.initialize=function(t){if(!this._init){var e,r=t.key;if("string"!=typeof r||16!==r.length&&24!==r.length&&32!==r.length){if(n.util.isArray(r)&&(16===r.length||24===r.length||32===r.length)){e=r,r=n.util.createBuffer();for(var o=0;o<e.length;++o)r.putByte(e[o])}}else r=n.util.createBuffer(r);if(!n.util.isArray(r)){e=r,r=[];var i=e.length();if(16===i||24===i||32===i)for(i>>>=2,o=0;o<i;++o)r.push(e.getInt32())}if(!n.util.isArray(r)||4!==r.length&&6!==r.length&&8!==r.length)throw new Error("Invalid key parameter.");var a=this.mode.name,s=-1!==["CFB","OFB","CTR","GCM"].indexOf(a);this._w=p(r,t.decrypt&&!s),this._init=!0}},n.aes._expandKey=function(t,e){return c||f(),p(t,e)},n.aes._updateBlock=h,o("AES-ECB",n.cipher.modes.ecb),o("AES-CBC",n.cipher.modes.cbc),o("AES-CFB",n.cipher.modes.cfb),o("AES-OFB",n.cipher.modes.ofb),o("AES-CTR",n.cipher.modes.ctr),o("AES-GCM",n.cipher.modes.gcm);var i,a,s,u,l,c=!1;function f(){c=!0,s=[0,1,2,4,8,16,32,64,128,27,54];for(var t=new Array(256),e=0;e<128;++e)t[e]=e<<1,t[e+128]=e+128<<1^283;for(i=new Array(256),a=new Array(256),u=new Array(4),l=new Array(4),e=0;e<4;++e)u[e]=new Array(256),l[e]=new Array(256);var r,n,o,f,p,h,y,d=0,v=0;for(e=0;e<256;++e){f=(f=v^v<<1^v<<2^v<<3^v<<4)>>8^255&f^99,i[d]=f,a[f]=d,h=(p=t[f])<<24^f<<16^f<<8^f^p,y=((r=t[d])^(n=t[r])^(o=t[n]))<<24^(d^o)<<16^(d^n^o)<<8^d^r^o;for(var m=0;m<4;++m)u[m][d]=h,l[m][f]=y,h=h<<24|h>>>8,y=y<<24|y>>>8;0===d?d=v=1:(d=r^t[t[t[r^o]]],v^=t[t[v]])}}function p(t,e){for(var r,n=t.slice(0),o=1,a=n.length,u=4*(a+6+1),c=a;c<u;++c)r=n[c-1],c%a==0?(r=i[r>>>16&255]<<24^i[r>>>8&255]<<16^i[255&r]<<8^i[r>>>24]^s[o]<<24,o++):a>6&&c%a==4&&(r=i[r>>>24]<<24^i[r>>>16&255]<<16^i[r>>>8&255]<<8^i[255&r]),n[c]=n[c-a]^r;if(e){for(var f,p=l[0],h=l[1],y=l[2],d=l[3],v=n.slice(0),m=(c=0,(u=n.length)-4);c<u;c+=4,m-=4)if(0===c||c===u-4)v[c]=n[m],v[c+1]=n[m+3],v[c+2]=n[m+2],v[c+3]=n[m+1];else for(var b=0;b<4;++b)f=n[m+b],v[c+(3&-b)]=p[i[f>>>24]]^h[i[f>>>16&255]]^y[i[f>>>8&255]]^d[i[255&f]];n=v}return n}function h(t,e,r,n){var o,s,c,f,p,h,y,d,v,m,b,g,S=t.length/4-1;n?(o=l[0],s=l[1],c=l[2],f=l[3],p=a):(o=u[0],s=u[1],c=u[2],f=u[3],p=i),h=e[0]^t[0],y=e[n?3:1]^t[1],d=e[2]^t[2],v=e[n?1:3]^t[3];for(var w=3,_=1;_<S;++_)m=o[h>>>24]^s[y>>>16&255]^c[d>>>8&255]^f[255&v]^t[++w],b=o[y>>>24]^s[d>>>16&255]^c[v>>>8&255]^f[255&h]^t[++w],g=o[d>>>24]^s[v>>>16&255]^c[h>>>8&255]^f[255&y]^t[++w],v=o[v>>>24]^s[h>>>16&255]^c[y>>>8&255]^f[255&d]^t[++w],h=m,y=b,d=g;r[0]=p[h>>>24]<<24^p[y>>>16&255]<<16^p[d>>>8&255]<<8^p[255&v]^t[++w],r[n?3:1]=p[y>>>24]<<24^p[d>>>16&255]<<16^p[v>>>8&255]<<8^p[255&h]^t[++w],r[2]=p[d>>>24]<<24^p[v>>>16&255]<<16^p[h>>>8&255]<<8^p[255&y]^t[++w],r[n?1:3]=p[v>>>24]<<24^p[h>>>16&255]<<16^p[y>>>8&255]<<8^p[255&d]^t[++w]}function y(t){var e,r="AES-"+((t=t||{}).mode||"CBC").toUpperCase(),o=(e=t.decrypt?n.cipher.createDecipher(r,t.key):n.cipher.createCipher(r,t.key)).start;return e.start=function(t,r){var i=null;r instanceof n.util.ByteBuffer&&(i=r,r={}),(r=r||{}).output=i,r.iv=t,o.call(e,r)},e}},function(t,e,r){var n=r(0);n.pki=n.pki||{};var o=t.exports=n.pki.oids=n.oids=n.oids||{};function i(t,e){o[t]=e,o[e]=t}function a(t,e){o[t]=e}i("1.2.840.113549.1.1.1","rsaEncryption"),i("1.2.840.113549.1.1.4","md5WithRSAEncryption"),i("1.2.840.113549.1.1.5","sha1WithRSAEncryption"),i("1.2.840.113549.1.1.7","RSAES-OAEP"),i("1.2.840.113549.1.1.8","mgf1"),i("1.2.840.113549.1.1.9","pSpecified"),i("1.2.840.113549.1.1.10","RSASSA-PSS"),i("1.2.840.113549.1.1.11","sha256WithRSAEncryption"),i("1.2.840.113549.1.1.12","sha384WithRSAEncryption"),i("1.2.840.113549.1.1.13","sha512WithRSAEncryption"),i("1.3.101.112","EdDSA25519"),i("1.2.840.10040.4.3","dsa-with-sha1"),i("1.3.14.3.2.7","desCBC"),i("1.3.14.3.2.26","sha1"),i("1.3.14.3.2.29","sha1WithRSASignature"),i("2.16.840.1.101.3.4.2.1","sha256"),i("2.16.840.1.101.3.4.2.2","sha384"),i("2.16.840.1.101.3.4.2.3","sha512"),i("2.16.840.1.101.3.4.2.4","sha224"),i("2.16.840.1.101.3.4.2.5","sha512-224"),i("2.16.840.1.101.3.4.2.6","sha512-256"),i("1.2.840.113549.2.2","md2"),i("1.2.840.113549.2.5","md5"),i("1.2.840.113549.1.7.1","data"),i("1.2.840.113549.1.7.2","signedData"),i("1.2.840.113549.1.7.3","envelopedData"),i("1.2.840.113549.1.7.4","signedAndEnvelopedData"),i("1.2.840.113549.1.7.5","digestedData"),i("1.2.840.113549.1.7.6","encryptedData"),i("1.2.840.113549.1.9.1","emailAddress"),i("1.2.840.113549.1.9.2","unstructuredName"),i("1.2.840.113549.1.9.3","contentType"),i("1.2.840.113549.1.9.4","messageDigest"),i("1.2.840.113549.1.9.5","signingTime"),i("1.2.840.113549.1.9.6","counterSignature"),i("1.2.840.113549.1.9.7","challengePassword"),i("1.2.840.113549.1.9.8","unstructuredAddress"),i("1.2.840.113549.1.9.14","extensionRequest"),i("1.2.840.113549.1.9.20","friendlyName"),i("1.2.840.113549.1.9.21","localKeyId"),i("1.2.840.113549.1.9.22.1","x509Certificate"),i("1.2.840.113549.1.12.10.1.1","keyBag"),i("1.2.840.113549.1.12.10.1.2","pkcs8ShroudedKeyBag"),i("1.2.840.113549.1.12.10.1.3","certBag"),i("1.2.840.113549.1.12.10.1.4","crlBag"),i("1.2.840.113549.1.12.10.1.5","secretBag"),i("1.2.840.113549.1.12.10.1.6","safeContentsBag"),i("1.2.840.113549.1.5.13","pkcs5PBES2"),i("1.2.840.113549.1.5.12","pkcs5PBKDF2"),i("1.2.840.113549.1.12.1.1","pbeWithSHAAnd128BitRC4"),i("1.2.840.113549.1.12.1.2","pbeWithSHAAnd40BitRC4"),i("1.2.840.113549.1.12.1.3","pbeWithSHAAnd3-KeyTripleDES-CBC"),i("1.2.840.113549.1.12.1.4","pbeWithSHAAnd2-KeyTripleDES-CBC"),i("1.2.840.113549.1.12.1.5","pbeWithSHAAnd128BitRC2-CBC"),i("1.2.840.113549.1.12.1.6","pbewithSHAAnd40BitRC2-CBC"),i("1.2.840.113549.2.7","hmacWithSHA1"),i("1.2.840.113549.2.8","hmacWithSHA224"),i("1.2.840.113549.2.9","hmacWithSHA256"),i("1.2.840.113549.2.10","hmacWithSHA384"),i("1.2.840.113549.2.11","hmacWithSHA512"),i("1.2.840.113549.3.7","des-EDE3-CBC"),i("2.16.840.1.101.3.4.1.2","aes128-CBC"),i("2.16.840.1.101.3.4.1.22","aes192-CBC"),i("2.16.840.1.101.3.4.1.42","aes256-CBC"),i("2.5.4.3","commonName"),i("2.5.4.4","surname"),i("2.5.4.5","serialNumber"),i("2.5.4.6","countryName"),i("2.5.4.7","localityName"),i("2.5.4.8","stateOrProvinceName"),i("2.5.4.9","streetAddress"),i("2.5.4.10","organizationName"),i("2.5.4.11","organizationalUnitName"),i("2.5.4.12","title"),i("2.5.4.13","description"),i("2.5.4.15","businessCategory"),i("2.5.4.17","postalCode"),i("2.5.4.42","givenName"),i("1.3.6.1.4.1.311.60.2.1.2","jurisdictionOfIncorporationStateOrProvinceName"),i("1.3.6.1.4.1.311.60.2.1.3","jurisdictionOfIncorporationCountryName"),i("2.16.840.1.113730.1.1","nsCertType"),i("2.16.840.1.113730.1.13","nsComment"),a("2.5.29.1","authorityKeyIdentifier"),a("2.5.29.2","keyAttributes"),a("2.5.29.3","certificatePolicies"),a("2.5.29.4","keyUsageRestriction"),a("2.5.29.5","policyMapping"),a("2.5.29.6","subtreesConstraint"),a("2.5.29.7","subjectAltName"),a("2.5.29.8","issuerAltName"),a("2.5.29.9","subjectDirectoryAttributes"),a("2.5.29.10","basicConstraints"),a("2.5.29.11","nameConstraints"),a("2.5.29.12","policyConstraints"),a("2.5.29.13","basicConstraints"),i("2.5.29.14","subjectKeyIdentifier"),i("2.5.29.15","keyUsage"),a("2.5.29.16","privateKeyUsagePeriod"),i("2.5.29.17","subjectAltName"),i("2.5.29.18","issuerAltName"),i("2.5.29.19","basicConstraints"),a("2.5.29.20","cRLNumber"),a("2.5.29.21","cRLReason"),a("2.5.29.22","expirationDate"),a("2.5.29.23","instructionCode"),a("2.5.29.24","invalidityDate"),a("2.5.29.25","cRLDistributionPoints"),a("2.5.29.26","issuingDistributionPoint"),a("2.5.29.27","deltaCRLIndicator"),a("2.5.29.28","issuingDistributionPoint"),a("2.5.29.29","certificateIssuer"),a("2.5.29.30","nameConstraints"),i("2.5.29.31","cRLDistributionPoints"),i("2.5.29.32","certificatePolicies"),a("2.5.29.33","policyMappings"),a("2.5.29.34","policyConstraints"),i("2.5.29.35","authorityKeyIdentifier"),a("2.5.29.36","policyConstraints"),i("2.5.29.37","extKeyUsage"),a("2.5.29.46","freshestCRL"),a("2.5.29.54","inhibitAnyPolicy"),i("1.3.6.1.4.1.11129.2.4.2","timestampList"),i("1.3.6.1.5.5.7.1.1","authorityInfoAccess"),i("1.3.6.1.5.5.7.3.1","serverAuth"),i("1.3.6.1.5.5.7.3.2","clientAuth"),i("1.3.6.1.5.5.7.3.3","codeSigning"),i("1.3.6.1.5.5.7.3.4","emailProtection"),i("1.3.6.1.5.5.7.3.8","timeStamping")},function(t,e,r){var n=r(0);r(1);var o=t.exports=n.pem=n.pem||{};function i(t){for(var e=t.name+": ",r=[],n=function(t,e){return" "+e},o=0;o<t.values.length;++o)r.push(t.values[o].replace(/^(\S+\r\n)/,n));e+=r.join(",")+"\r\n";var i=0,a=-1;for(o=0;o<e.length;++o,++i)if(i>65&&-1!==a){var s=e[a];","===s?(++a,e=e.substr(0,a)+"\r\n "+e.substr(a)):e=e.substr(0,a)+"\r\n"+s+e.substr(a+1),i=o-a-1,a=-1,++o}else" "!==e[o]&&"\t"!==e[o]&&","!==e[o]||(a=o);return e}function a(t){return t.replace(/^\s+/,"")}o.encode=function(t,e){e=e||{};var r,o="-----BEGIN "+t.type+"-----\r\n";if(t.procType&&(o+=i(r={name:"Proc-Type",values:[String(t.procType.version),t.procType.type]})),t.contentDomain&&(o+=i(r={name:"Content-Domain",values:[t.contentDomain]})),t.dekInfo&&(r={name:"DEK-Info",values:[t.dekInfo.algorithm]},t.dekInfo.parameters&&r.values.push(t.dekInfo.parameters),o+=i(r)),t.headers)for(var a=0;a<t.headers.length;++a)o+=i(t.headers[a]);return t.procType&&(o+="\r\n"),(o+=n.util.encode64(t.body,e.maxline||64)+"\r\n")+"-----END "+t.type+"-----\r\n"},o.decode=function(t){for(var e,r=[],o=/\s*-----BEGIN ([A-Z0-9- ]+)-----\r?\n?([\x21-\x7e\s]+?(?:\r?\n\r?\n))?([:A-Za-z0-9+\/=\s]+?)-----END \1-----/g,i=/([\x21-\x7e]+):\s*([\x21-\x7e\s^:]+)/,s=/\r?\n/;e=o.exec(t);){var u=e[1];"NEW CERTIFICATE REQUEST"===u&&(u="CERTIFICATE REQUEST");var l={type:u,procType:null,contentDomain:null,dekInfo:null,headers:[],body:n.util.decode64(e[3])};if(r.push(l),e[2]){for(var c=e[2].split(s),f=0;e&&f<c.length;){for(var p=c[f].replace(/\s+$/,""),h=f+1;h<c.length;++h){var y=c[h];if(!/\s/.test(y[0]))break;p+=y,f=h}if(e=p.match(i)){for(var d={name:e[1],values:[]},v=e[2].split(","),m=0;m<v.length;++m)d.values.push(a(v[m]));if(l.procType)if(l.contentDomain||"Content-Domain"!==d.name)if(l.dekInfo||"DEK-Info"!==d.name)l.headers.push(d);else{if(0===d.values.length)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must have at least one subfield.');l.dekInfo={algorithm:v[0],parameters:v[1]||null}}else l.contentDomain=v[0]||"";else{if("Proc-Type"!==d.name)throw new Error('Invalid PEM formatted message. The first encapsulated header must be "Proc-Type".');if(2!==d.values.length)throw new Error('Invalid PEM formatted message. The "Proc-Type" header must have two subfields.');l.procType={version:v[0],type:v[1]}}}++f}if("ENCRYPTED"===l.procType&&!l.dekInfo)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must be present if "Proc-Type" is "ENCRYPTED".')}}if(0===r.length)throw new Error("Invalid PEM formatted message.");return r}},function(t,e,r){var n=r(0);r(4),r(1),(t.exports=n.hmac=n.hmac||{}).create=function(){var t=null,e=null,r=null,o=null,i={start:function(i,a){if(null!==i)if("string"==typeof i){if(!((i=i.toLowerCase())in n.md.algorithms))throw new Error('Unknown hash algorithm "'+i+'"');e=n.md.algorithms[i].create()}else e=i;if(null===a)a=t;else{if("string"==typeof a)a=n.util.createBuffer(a);else if(n.util.isArray(a)){var s=a;a=n.util.createBuffer();for(var u=0;u<s.length;++u)a.putByte(s[u])}var l=a.length();for(l>e.blockLength&&(e.start(),e.update(a.bytes()),a=e.digest()),r=n.util.createBuffer(),o=n.util.createBuffer(),l=a.length(),u=0;u<l;++u)s=a.at(u),r.putByte(54^s),o.putByte(92^s);if(l<e.blockLength)for(s=e.blockLength-l,u=0;u<s;++u)r.putByte(54),o.putByte(92);t=a,r=r.bytes(),o=o.bytes()}e.start(),e.update(r)},update:function(t){e.update(t)},getMac:function(){var t=e.digest().bytes();return e.start(),e.update(o),e.update(t),e.digest()}};return i.digest=i.getMac,i}},function(t,e,r){var n=r(0);r(4),r(1);var o=t.exports=n.sha1=n.sha1||{};n.md.sha1=n.md.algorithms.sha1=o,o.create=function(){a||(i=String.fromCharCode(128),i+=n.util.fillString(String.fromCharCode(0),64),a=!0);var t=null,e=n.util.createBuffer(),r=new Array(80),o={algorithm:"sha1",blockLength:64,digestLength:20,messageLength:0,fullMessageLength:null,messageLengthSize:8,start:function(){o.messageLength=0,o.fullMessageLength=o.messageLength64=[];for(var r=o.messageLengthSize/4,i=0;i<r;++i)o.fullMessageLength.push(0);return e=n.util.createBuffer(),t={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520},o}};return o.start(),o.update=function(i,a){"utf8"===a&&(i=n.util.encodeUtf8(i));var u=i.length;o.messageLength+=u,u=[u/4294967296>>>0,u>>>0];for(var l=o.fullMessageLength.length-1;l>=0;--l)o.fullMessageLength[l]+=u[1],u[1]=u[0]+(o.fullMessageLength[l]/4294967296>>>0),o.fullMessageLength[l]=o.fullMessageLength[l]>>>0,u[0]=u[1]/4294967296>>>0;return e.putBytes(i),s(t,r,e),(e.read>2048||0===e.length())&&e.compact(),o},o.digest=function(){var a=n.util.createBuffer();a.putBytes(e.bytes());var u,l=o.fullMessageLength[o.fullMessageLength.length-1]+o.messageLengthSize&o.blockLength-1;a.putBytes(i.substr(0,o.blockLength-l));for(var c=8*o.fullMessageLength[0],f=0;f<o.fullMessageLength.length-1;++f)c+=(u=8*o.fullMessageLength[f+1])/4294967296>>>0,a.putInt32(c>>>0),c=u>>>0;a.putInt32(c);var p={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3,h4:t.h4};s(p,r,a);var h=n.util.createBuffer();return h.putInt32(p.h0),h.putInt32(p.h1),h.putInt32(p.h2),h.putInt32(p.h3),h.putInt32(p.h4),h},o};var i=null,a=!1;function s(t,e,r){for(var n,o,i,a,s,u,l,c=r.length();c>=64;){for(o=t.h0,i=t.h1,a=t.h2,s=t.h3,u=t.h4,l=0;l<16;++l)n=r.getInt32(),e[l]=n,n=(o<<5|o>>>27)+(s^i&(a^s))+u+1518500249+n,u=s,s=a,a=(i<<30|i>>>2)>>>0,i=o,o=n;for(;l<20;++l)n=(n=e[l-3]^e[l-8]^e[l-14]^e[l-16])<<1|n>>>31,e[l]=n,n=(o<<5|o>>>27)+(s^i&(a^s))+u+1518500249+n,u=s,s=a,a=(i<<30|i>>>2)>>>0,i=o,o=n;for(;l<32;++l)n=(n=e[l-3]^e[l-8]^e[l-14]^e[l-16])<<1|n>>>31,e[l]=n,n=(o<<5|o>>>27)+(i^a^s)+u+1859775393+n,u=s,s=a,a=(i<<30|i>>>2)>>>0,i=o,o=n;for(;l<40;++l)n=(n=e[l-6]^e[l-16]^e[l-28]^e[l-32])<<2|n>>>30,e[l]=n,n=(o<<5|o>>>27)+(i^a^s)+u+1859775393+n,u=s,s=a,a=(i<<30|i>>>2)>>>0,i=o,o=n;for(;l<60;++l)n=(n=e[l-6]^e[l-16]^e[l-28]^e[l-32])<<2|n>>>30,e[l]=n,n=(o<<5|o>>>27)+(i&a|s&(i^a))+u+2400959708+n,u=s,s=a,a=(i<<30|i>>>2)>>>0,i=o,o=n;for(;l<80;++l)n=(n=e[l-6]^e[l-16]^e[l-28]^e[l-32])<<2|n>>>30,e[l]=n,n=(o<<5|o>>>27)+(i^a^s)+u+3395469782+n,u=s,s=a,a=(i<<30|i>>>2)>>>0,i=o,o=n;t.h0=t.h0+o|0,t.h1=t.h1+i|0,t.h2=t.h2+a|0,t.h3=t.h3+s|0,t.h4=t.h4+u|0,c-=64}}},function(t,e,r){var n=r(0);function o(t,e){n.cipher.registerAlgorithm(t,function(){return new n.des.Algorithm(t,e)})}r(13),r(19),r(1),t.exports=n.des=n.des||{},n.des.startEncrypting=function(t,e,r,n){var o=y({key:t,output:r,decrypt:!1,mode:n||(null===e?"ECB":"CBC")});return o.start(e),o},n.des.createEncryptionCipher=function(t,e){return y({key:t,output:null,decrypt:!1,mode:e})},n.des.startDecrypting=function(t,e,r,n){var o=y({key:t,output:r,decrypt:!0,mode:n||(null===e?"ECB":"CBC")});return o.start(e),o},n.des.createDecryptionCipher=function(t,e){return y({key:t,output:null,decrypt:!0,mode:e})},n.des.Algorithm=function(t,e){var r=this;r.name=t,r.mode=new e({blockSize:8,cipher:{encrypt:function(t,e){return h(r._keys,t,e,!1)},decrypt:function(t,e){return h(r._keys,t,e,!0)}}}),r._init=!1},n.des.Algorithm.prototype.initialize=function(t){if(!this._init){var e=n.util.createBuffer(t.key);if(0===this.name.indexOf("3DES")&&24!==e.length())throw new Error("Invalid Triple-DES key size: "+8*e.length());this._keys=function(t){for(var e,r=[0,4,536870912,536870916,65536,65540,536936448,536936452,512,516,536871424,536871428,66048,66052,536936960,536936964],n=[0,1,1048576,1048577,67108864,67108865,68157440,68157441,256,257,1048832,1048833,67109120,67109121,68157696,68157697],o=[0,8,2048,2056,16777216,16777224,16779264,16779272,0,8,2048,2056,16777216,16777224,16779264,16779272],i=[0,2097152,134217728,136314880,8192,2105344,134225920,136323072,131072,2228224,134348800,136445952,139264,2236416,134356992,136454144],a=[0,262144,16,262160,0,262144,16,262160,4096,266240,4112,266256,4096,266240,4112,266256],s=[0,1024,32,1056,0,1024,32,1056,33554432,33555456,33554464,33555488,33554432,33555456,33554464,33555488],u=[0,268435456,524288,268959744,2,268435458,524290,268959746,0,268435456,524288,268959744,2,268435458,524290,268959746],l=[0,65536,2048,67584,536870912,536936448,536872960,536938496,131072,196608,133120,198656,537001984,537067520,537004032,537069568],c=[0,262144,0,262144,2,262146,2,262146,33554432,33816576,33554432,33816576,33554434,33816578,33554434,33816578],f=[0,268435456,8,268435464,0,268435456,8,268435464,1024,268436480,1032,268436488,1024,268436480,1032,268436488],p=[0,32,0,32,1048576,1048608,1048576,1048608,8192,8224,8192,8224,1056768,1056800,1056768,1056800],h=[0,16777216,512,16777728,2097152,18874368,2097664,18874880,67108864,83886080,67109376,83886592,69206016,85983232,69206528,85983744],y=[0,4096,134217728,134221824,524288,528384,134742016,134746112,16,4112,134217744,134221840,524304,528400,134742032,134746128],d=[0,4,256,260,0,4,256,260,1,5,257,261,1,5,257,261],v=t.length()>8?3:1,m=[],b=[0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,0],g=0,S=0;S<v;S++){var w=t.getInt32(),_=t.getInt32();w^=(e=252645135&(w>>>4^_))<<4,w^=e=65535&((_^=e)>>>-16^w),w^=(e=858993459&(w>>>2^(_^=e<<-16)))<<2,w^=e=65535&((_^=e)>>>-16^w),w^=(e=1431655765&(w>>>1^(_^=e<<-16)))<<1,w^=e=16711935&((_^=e)>>>8^w),e=(w^=(e=1431655765&(w>>>1^(_^=e<<8)))<<1)<<8|(_^=e)>>>20&240,w=_<<24|_<<8&16711680|_>>>8&65280|_>>>24&240,_=e;for(var O=0;O<b.length;++O){b[O]?(w=w<<2|w>>>26,_=_<<2|_>>>26):(w=w<<1|w>>>27,_=_<<1|_>>>27);var E=r[(w&=-15)>>>28]|n[w>>>24&15]|o[w>>>20&15]|i[w>>>16&15]|a[w>>>12&15]|s[w>>>8&15]|u[w>>>4&15],P=l[(_&=-15)>>>28]|c[_>>>24&15]|f[_>>>20&15]|p[_>>>16&15]|h[_>>>12&15]|y[_>>>8&15]|d[_>>>4&15];e=65535&(P>>>16^E),m[g++]=E^e,m[g++]=P^e<<16}}return m}(e),this._init=!0}},o("DES-ECB",n.cipher.modes.ecb),o("DES-CBC",n.cipher.modes.cbc),o("DES-CFB",n.cipher.modes.cfb),o("DES-OFB",n.cipher.modes.ofb),o("DES-CTR",n.cipher.modes.ctr),o("3DES-ECB",n.cipher.modes.ecb),o("3DES-CBC",n.cipher.modes.cbc),o("3DES-CFB",n.cipher.modes.cfb),o("3DES-OFB",n.cipher.modes.ofb),o("3DES-CTR",n.cipher.modes.ctr);var i=[16843776,0,65536,16843780,16842756,66564,4,65536,1024,16843776,16843780,1024,16778244,16842756,16777216,4,1028,16778240,16778240,66560,66560,16842752,16842752,16778244,65540,16777220,16777220,65540,0,1028,66564,16777216,65536,16843780,4,16842752,16843776,16777216,16777216,1024,16842756,65536,66560,16777220,1024,4,16778244,66564,16843780,65540,16842752,16778244,16777220,1028,66564,16843776,1028,16778240,16778240,0,65540,66560,0,16842756],a=[-2146402272,-2147450880,32768,1081376,1048576,32,-2146435040,-2147450848,-2147483616,-2146402272,-2146402304,-2147483648,-2147450880,1048576,32,-2146435040,1081344,1048608,-2147450848,0,-2147483648,32768,1081376,-2146435072,1048608,-2147483616,0,1081344,32800,-2146402304,-2146435072,32800,0,1081376,-2146435040,1048576,-2147450848,-2146435072,-2146402304,32768,-2146435072,-2147450880,32,-2146402272,1081376,32,32768,-2147483648,32800,-2146402304,1048576,-2147483616,1048608,-2147450848,-2147483616,1048608,1081344,0,-2147450880,32800,-2147483648,-2146435040,-2146402272,1081344],s=[520,134349312,0,134348808,134218240,0,131592,134218240,131080,134217736,134217736,131072,134349320,131080,134348800,520,134217728,8,134349312,512,131584,134348800,134348808,131592,134218248,131584,131072,134218248,8,134349320,512,134217728,134349312,134217728,131080,520,131072,134349312,134218240,0,512,131080,134349320,134218240,134217736,512,0,134348808,134218248,131072,134217728,134349320,8,131592,131584,134217736,134348800,134218248,520,134348800,131592,8,134348808,131584],u=[8396801,8321,8321,128,8396928,8388737,8388609,8193,0,8396800,8396800,8396929,129,0,8388736,8388609,1,8192,8388608,8396801,128,8388608,8193,8320,8388737,1,8320,8388736,8192,8396928,8396929,129,8388736,8388609,8396800,8396929,129,0,0,8396800,8320,8388736,8388737,1,8396801,8321,8321,128,8396929,129,1,8192,8388609,8193,8396928,8388737,8193,8320,8388608,8396801,128,8388608,8192,8396928],l=[256,34078976,34078720,1107296512,524288,256,1073741824,34078720,1074266368,524288,33554688,1074266368,1107296512,1107820544,524544,1073741824,33554432,1074266112,1074266112,0,1073742080,1107820800,1107820800,33554688,1107820544,1073742080,0,1107296256,34078976,33554432,1107296256,524544,524288,1107296512,256,33554432,1073741824,34078720,1107296512,1074266368,33554688,1073741824,1107820544,34078976,1074266368,256,33554432,1107820544,1107820800,524544,1107296256,1107820800,34078720,0,1074266112,1107296256,524544,33554688,1073742080,524288,0,1074266112,34078976,1073742080],c=[536870928,541065216,16384,541081616,541065216,16,541081616,4194304,536887296,4210704,4194304,536870928,4194320,536887296,536870912,16400,0,4194320,536887312,16384,4210688,536887312,16,541065232,541065232,0,4210704,541081600,16400,4210688,541081600,536870912,536887296,16,541065232,4210688,541081616,4194304,16400,536870928,4194304,536887296,536870912,16400,536870928,541081616,4210688,541065216,4210704,541081600,0,541065232,16,16384,541065216,4210704,16384,4194320,536887312,0,541081600,536870912,4194320,536887312],f=[2097152,69206018,67110914,0,2048,67110914,2099202,69208064,69208066,2097152,0,67108866,2,67108864,69206018,2050,67110912,2099202,2097154,67110912,67108866,69206016,69208064,2097154,69206016,2048,2050,69208066,2099200,2,67108864,2099200,67108864,2099200,2097152,67110914,67110914,69206018,69206018,2,2097154,67108864,67110912,2097152,69208064,2050,2099202,69208064,2050,67108866,69208066,69206016,2099200,0,2,69208066,0,2099202,69206016,2048,67108866,67110912,2048,2097154],p=[268439616,4096,262144,268701760,268435456,268439616,64,268435456,262208,268697600,268701760,266240,268701696,266304,4096,64,268697600,268435520,268439552,4160,266240,262208,268697664,268701696,4160,0,0,268697664,268435520,268439552,266304,262144,266304,262144,268701696,4096,64,268697664,4096,266304,268439552,64,268435520,268697600,268697664,268435456,262144,268439616,0,268701760,262208,268435520,268697600,268439552,268439616,0,268701760,266240,266240,4160,4160,262208,268435456,268701696];function h(t,e,r,n){var o,h,y=32===t.length?3:9;o=3===y?n?[30,-2,-2]:[0,32,2]:n?[94,62,-2,32,64,2,30,-2,-2]:[0,32,2,62,30,-2,64,96,2];var d=e[0],v=e[1];d^=(h=252645135&(d>>>4^v))<<4,d^=(h=65535&(d>>>16^(v^=h)))<<16,d^=h=858993459&((v^=h)>>>2^d),d^=h=16711935&((v^=h<<2)>>>8^d),d=(d^=(h=1431655765&(d>>>1^(v^=h<<8)))<<1)<<1|d>>>31,v=(v^=h)<<1|v>>>31;for(var m=0;m<y;m+=3){for(var b=o[m+1],g=o[m+2],S=o[m];S!=b;S+=g){var w=v^t[S],_=(v>>>4|v<<28)^t[S+1];h=d,d=v,v=h^(a[w>>>24&63]|u[w>>>16&63]|c[w>>>8&63]|p[63&w]|i[_>>>24&63]|s[_>>>16&63]|l[_>>>8&63]|f[63&_])}h=d,d=v,v=h}v=v>>>1|v<<31,v^=h=1431655765&((d=d>>>1|d<<31)>>>1^v),v^=(h=16711935&(v>>>8^(d^=h<<1)))<<8,v^=(h=858993459&(v>>>2^(d^=h)))<<2,v^=h=65535&((d^=h)>>>16^v),v^=h=252645135&((d^=h<<16)>>>4^v),d^=h<<4,r[0]=d,r[1]=v}function y(t){var e,r="DES-"+((t=t||{}).mode||"CBC").toUpperCase(),o=(e=t.decrypt?n.cipher.createDecipher(r,t.key):n.cipher.createCipher(r,t.key)).start;return e.start=function(t,r){var i=null;r instanceof n.util.ByteBuffer&&(i=r,r={}),(r=r||{}).output=i,r.iv=t,o.call(e,r)},e}},function(t,e,r){var n=r(0);if(r(3),r(12),r(6),r(26),r(27),r(2),r(1),void 0===o)var o=n.jsbn.BigInteger;var i=n.util.isNodejs?r(16):null,a=n.asn1,u=n.util;n.pki=n.pki||{},t.exports=n.pki.rsa=n.rsa=n.rsa||{};var l=n.pki,c=[6,4,2,4,2,4,6,2],f={name:"PrivateKeyInfo",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:a.Class.UNIVERSAL,type:a.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:a.Class.UNIVERSAL,type:a.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:a.Class.UNIVERSAL,type:a.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]},p={name:"RSAPrivateKey",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPrivateKey.version",tagClass:a.Class.UNIVERSAL,type:a.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"RSAPrivateKey.modulus",tagClass:a.Class.UNIVERSAL,type:a.Type.INTEGER,constructed:!1,capture:"privateKeyModulus"},{name:"RSAPrivateKey.publicExponent",tagClass:a.Class.UNIVERSAL,type:a.Type.INTEGER,constructed:!1,capture:"privateKeyPublicExponent"},{name:"RSAPrivateKey.privateExponent",tagClass:a.Class.UNIVERSAL,type:a.Type.INTEGER,constructed:!1,capture:"privateKeyPrivateExponent"},{name:"RSAPrivateKey.prime1",tagClass:a.Class.UNIVERSAL,type:a.Type.INTEGER,constructed:!1,capture:"privateKeyPrime1"},{name:"RSAPrivateKey.prime2",tagClass:a.Class.UNIVERSAL,type:a.Type.INTEGER,constructed:!1,capture:"privateKeyPrime2"},{name:"RSAPrivateKey.exponent1",tagClass:a.Class.UNIVERSAL,type:a.Type.INTEGER,constructed:!1,capture:"privateKeyExponent1"},{name:"RSAPrivateKey.exponent2",tagClass:a.Class.UNIVERSAL,type:a.Type.INTEGER,constructed:!1,capture:"privateKeyExponent2"},{name:"RSAPrivateKey.coefficient",tagClass:a.Class.UNIVERSAL,type:a.Type.INTEGER,constructed:!1,capture:"privateKeyCoefficient"}]},h={name:"RSAPublicKey",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPublicKey.modulus",tagClass:a.Class.UNIVERSAL,type:a.Type.INTEGER,constructed:!1,capture:"publicKeyModulus"},{name:"RSAPublicKey.exponent",tagClass:a.Class.UNIVERSAL,type:a.Type.INTEGER,constructed:!1,capture:"publicKeyExponent"}]},y=n.pki.rsa.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:a.Class.UNIVERSAL,type:a.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{name:"SubjectPublicKeyInfo.subjectPublicKey",tagClass:a.Class.UNIVERSAL,type:a.Type.BITSTRING,constructed:!1,value:[{name:"SubjectPublicKeyInfo.subjectPublicKey.RSAPublicKey",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"rsaPublicKey"}]}]},d={name:"DigestInfo",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm.algorithmIdentifier",tagClass:a.Class.UNIVERSAL,type:a.Type.OID,constructed:!1,capture:"algorithmIdentifier"},{name:"DigestInfo.DigestAlgorithm.parameters",tagClass:a.Class.UNIVERSAL,type:a.Type.NULL,capture:"parameters",optional:!0,constructed:!1}]},{name:"DigestInfo.digest",tagClass:a.Class.UNIVERSAL,type:a.Type.OCTETSTRING,constructed:!1,capture:"digest"}]},v=function(t){var e;if(!(t.algorithm in l.oids)){var r=new Error("Unknown message digest algorithm.");throw r.algorithm=t.algorithm,r}e=l.oids[t.algorithm];var n=a.oidToDer(e).getBytes(),o=a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[]),i=a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[]);i.value.push(a.create(a.Class.UNIVERSAL,a.Type.OID,!1,n)),i.value.push(a.create(a.Class.UNIVERSAL,a.Type.NULL,!1,""));var s=a.create(a.Class.UNIVERSAL,a.Type.OCTETSTRING,!1,t.digest().getBytes());return o.value.push(i),o.value.push(s),a.toDer(o).getBytes()},m=function(t,e,r){if(r)return t.modPow(e.e,e.n);if(!e.p||!e.q)return t.modPow(e.d,e.n);var i;e.dP||(e.dP=e.d.mod(e.p.subtract(o.ONE))),e.dQ||(e.dQ=e.d.mod(e.q.subtract(o.ONE))),e.qInv||(e.qInv=e.q.modInverse(e.p));do{i=new o(n.util.bytesToHex(n.random.getBytes(e.n.bitLength()/8)),16)}while(i.compareTo(e.n)>=0||!i.gcd(e.n).equals(o.ONE));for(var a=(t=t.multiply(i.modPow(e.e,e.n)).mod(e.n)).mod(e.p).modPow(e.dP,e.p),s=t.mod(e.q).modPow(e.dQ,e.q);a.compareTo(s)<0;)a=a.add(e.p);var u=a.subtract(s).multiply(e.qInv).mod(e.p).multiply(e.q).add(s);return u.multiply(i.modInverse(e.n)).mod(e.n)};function b(t,e,r){var o=n.util.createBuffer(),i=Math.ceil(e.n.bitLength()/8);if(t.length>i-11){var a=new Error("Message is too long for PKCS#1 v1.5 padding.");throw a.length=t.length,a.max=i-11,a}o.putByte(0),o.putByte(r);var s,u=i-3-t.length;if(0===r||1===r){s=0===r?0:255;for(var l=0;l<u;++l)o.putByte(s)}else for(;u>0;){var c=0,f=n.random.getBytes(u);for(l=0;l<u;++l)0===(s=f.charCodeAt(l))?++c:o.putByte(s);u=c}return o.putByte(0),o.putBytes(t),o}function g(t,e,r,o){var i=Math.ceil(e.n.bitLength()/8),a=n.util.createBuffer(t),s=a.getByte(),u=a.getByte();if(0!==s||r&&0!==u&&1!==u||!r&&2!=u||r&&0===u&&void 0===o)throw new Error("Encryption block is invalid.");var l=0;if(0===u){l=i-3-o;for(var c=0;c<l;++c)if(0!==a.getByte())throw new Error("Encryption block is invalid.")}else if(1===u)for(l=0;a.length()>1;){if(255!==a.getByte()){--a.read;break}++l}else if(2===u)for(l=0;a.length()>1;){if(0===a.getByte()){--a.read;break}++l}if(0!==a.getByte()||l!==i-3-a.length())throw new Error("Encryption block is invalid.");return a.getBytes()}function S(t,e,r){"function"==typeof e&&(r=e,e={});var i={algorithm:{name:(e=e||{}).algorithm||"PRIMEINC",options:{workers:e.workers||2,workLoad:e.workLoad||100,workerScript:e.workerScript}}};function a(){s(t.pBits,function(e,n){return e?r(e):(t.p=n,null!==t.q?u(e,t.q):void s(t.qBits,u))})}function s(t,e){n.prime.generateProbablePrime(t,i,e)}function u(e,n){if(e)return r(e);if(t.q=n,t.p.compareTo(t.q)<0){var i=t.p;t.p=t.q,t.q=i}if(0!==t.p.subtract(o.ONE).gcd(t.e).compareTo(o.ONE))return t.p=null,void a();if(0!==t.q.subtract(o.ONE).gcd(t.e).compareTo(o.ONE))return t.q=null,void s(t.qBits,u);if(t.p1=t.p.subtract(o.ONE),t.q1=t.q.subtract(o.ONE),t.phi=t.p1.multiply(t.q1),0!==t.phi.gcd(t.e).compareTo(o.ONE))return t.p=t.q=null,void a();if(t.n=t.p.multiply(t.q),t.n.bitLength()!==t.bits)return t.q=null,void s(t.qBits,u);var c=t.e.modInverse(t.phi);t.keys={privateKey:l.rsa.setPrivateKey(t.n,t.e,c,t.p,t.q,c.mod(t.p1),c.mod(t.q1),t.q.modInverse(t.p)),publicKey:l.rsa.setPublicKey(t.n,t.e)},r(null,t.keys)}"prng"in e&&(i.prng=e.prng),a()}function w(t){var e=t.toString(16);e[0]>="8"&&(e="00"+e);var r=n.util.hexToBytes(e);return r.length>1&&(0===r.charCodeAt(0)&&0==(128&r.charCodeAt(1))||255===r.charCodeAt(0)&&128==(128&r.charCodeAt(1)))?r.substr(1):r}function _(t){return t<=100?27:t<=150?18:t<=200?15:t<=250?12:t<=300?9:t<=350?8:t<=400?7:t<=500?6:t<=600?5:t<=800?4:t<=1250?3:2}function O(t){return n.util.isNodejs&&"function"==typeof i[t]}function E(t){return void 0!==u.globalScope&&"object"==s(u.globalScope.crypto)&&"object"==s(u.globalScope.crypto.subtle)&&"function"==typeof u.globalScope.crypto.subtle[t]}function P(t){return void 0!==u.globalScope&&"object"==s(u.globalScope.msCrypto)&&"object"==s(u.globalScope.msCrypto.subtle)&&"function"==typeof u.globalScope.msCrypto.subtle[t]}function x(t){for(var e=n.util.hexToBytes(t.toString(16)),r=new Uint8Array(e.length),o=0;o<e.length;++o)r[o]=e.charCodeAt(o);return r}l.rsa.encrypt=function(t,e,r){var i,a=r,s=Math.ceil(e.n.bitLength()/8);!1!==r&&!0!==r?(a=2===r,i=b(t,e,r)):(i=n.util.createBuffer()).putBytes(t);for(var u=new o(i.toHex(),16),l=m(u,e,a).toString(16),c=n.util.createBuffer(),f=s-Math.ceil(l.length/2);f>0;)c.putByte(0),--f;return c.putBytes(n.util.hexToBytes(l)),c.getBytes()},l.rsa.decrypt=function(t,e,r,i){var a=Math.ceil(e.n.bitLength()/8);if(t.length!==a){var s=new Error("Encrypted message length is invalid.");throw s.length=t.length,s.expected=a,s}var u=new o(n.util.createBuffer(t).toHex(),16);if(u.compareTo(e.n)>=0)throw new Error("Encrypted message is invalid.");for(var l=m(u,e,r).toString(16),c=n.util.createBuffer(),f=a-Math.ceil(l.length/2);f>0;)c.putByte(0),--f;return c.putBytes(n.util.hexToBytes(l)),!1!==i?g(c.getBytes(),e,r):c.getBytes()},l.rsa.createKeyPairGenerationState=function(t,e,r){"string"==typeof t&&(t=parseInt(t,10)),t=t||2048;var i,a=(r=r||{}).prng||n.random,s={nextBytes:function(t){for(var e=a.getBytesSync(t.length),r=0;r<t.length;++r)t[r]=e.charCodeAt(r)}},u=r.algorithm||"PRIMEINC";if("PRIMEINC"!==u)throw new Error("Invalid key generation algorithm: "+u);return(i={algorithm:u,state:0,bits:t,rng:s,eInt:e||65537,e:new o(null),p:null,q:null,qBits:t>>1,pBits:t-(t>>1),pqState:0,num:null,keys:null}).e.fromInt(i.eInt),i},l.rsa.stepKeyPairGenerationState=function(t,e){"algorithm"in t||(t.algorithm="PRIMEINC");var r=new o(null);r.fromInt(30);for(var n,i=0,a=function(t,e){return t|e},s=+new Date,u=0;null===t.keys&&(e<=0||u<e);){if(0===t.state){var f=null===t.p?t.pBits:t.qBits,p=f-1;0===t.pqState?(t.num=new o(f,t.rng),t.num.testBit(p)||t.num.bitwiseTo(o.ONE.shiftLeft(p),a,t.num),t.num.dAddOffset(31-t.num.mod(r).byteValue(),0),i=0,++t.pqState):1===t.pqState?t.num.bitLength()>f?t.pqState=0:t.num.isProbablePrime(_(t.num.bitLength()))?++t.pqState:t.num.dAddOffset(c[i++%8],0):2===t.pqState?t.pqState=0===t.num.subtract(o.ONE).gcd(t.e).compareTo(o.ONE)?3:0:3===t.pqState&&(t.pqState=0,null===t.p?t.p=t.num:t.q=t.num,null!==t.p&&null!==t.q&&++t.state,t.num=null)}else if(1===t.state)t.p.compareTo(t.q)<0&&(t.num=t.p,t.p=t.q,t.q=t.num),++t.state;else if(2===t.state)t.p1=t.p.subtract(o.ONE),t.q1=t.q.subtract(o.ONE),t.phi=t.p1.multiply(t.q1),++t.state;else if(3===t.state)0===t.phi.gcd(t.e).compareTo(o.ONE)?++t.state:(t.p=null,t.q=null,t.state=0);else if(4===t.state)t.n=t.p.multiply(t.q),t.n.bitLength()===t.bits?++t.state:(t.q=null,t.state=0);else if(5===t.state){var h=t.e.modInverse(t.phi);t.keys={privateKey:l.rsa.setPrivateKey(t.n,t.e,h,t.p,t.q,h.mod(t.p1),h.mod(t.q1),t.q.modInverse(t.p)),publicKey:l.rsa.setPublicKey(t.n,t.e)}}u+=(n=+new Date)-s,s=n}return null!==t.keys},l.rsa.generateKeyPair=function(t,e,r,o){if(1===arguments.length?"object"==s(t)?(r=t,t=void 0):"function"==typeof t&&(o=t,t=void 0):2===arguments.length?"number"==typeof t?"function"==typeof e?(o=e,e=void 0):"number"!=typeof e&&(r=e,e=void 0):(r=t,o=e,t=void 0,e=void 0):3===arguments.length&&("number"==typeof e?"function"==typeof r&&(o=r,r=void 0):(o=r,r=e,e=void 0)),r=r||{},void 0===t&&(t=r.bits||2048),void 0===e&&(e=r.e||65537),!n.options.usePureJavaScript&&!r.prng&&t>=256&&t<=16384&&(65537===e||3===e))if(o){if(O("generateKeyPair"))return i.generateKeyPair("rsa",{modulusLength:t,publicExponent:e,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}},function(t,e,r){if(t)return o(t);o(null,{privateKey:l.privateKeyFromPem(r),publicKey:l.publicKeyFromPem(e)})});if(E("generateKey")&&E("exportKey"))return u.globalScope.crypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:x(e),hash:{name:"SHA-256"}},!0,["sign","verify"]).then(function(t){return u.globalScope.crypto.subtle.exportKey("pkcs8",t.privateKey)}).then(void 0,function(t){o(t)}).then(function(t){if(t){var e=l.privateKeyFromAsn1(a.fromDer(n.util.createBuffer(t)));o(null,{privateKey:e,publicKey:l.setRsaPublicKey(e.n,e.e)})}});if(P("generateKey")&&P("exportKey")){var c=u.globalScope.msCrypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:x(e),hash:{name:"SHA-256"}},!0,["sign","verify"]);return c.oncomplete=function(t){var e=t.target.result,r=u.globalScope.msCrypto.subtle.exportKey("pkcs8",e.privateKey);r.oncomplete=function(t){var e=t.target.result,r=l.privateKeyFromAsn1(a.fromDer(n.util.createBuffer(e)));o(null,{privateKey:r,publicKey:l.setRsaPublicKey(r.n,r.e)})},r.onerror=function(t){o(t)}},void(c.onerror=function(t){o(t)})}}else if(O("generateKeyPairSync")){var f=i.generateKeyPairSync("rsa",{modulusLength:t,publicExponent:e,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}});return{privateKey:l.privateKeyFromPem(f.privateKey),publicKey:l.publicKeyFromPem(f.publicKey)}}var p=l.rsa.createKeyPairGenerationState(t,e,r);if(!o)return l.rsa.stepKeyPairGenerationState(p,0),p.keys;S(p,r,o)},l.setRsaPublicKey=l.rsa.setPublicKey=function(t,e){var r={n:t,e:e,encrypt:function(t,e,o){if("string"==typeof e?e=e.toUpperCase():void 0===e&&(e="RSAES-PKCS1-V1_5"),"RSAES-PKCS1-V1_5"===e)e={encode:function(t,e,r){return b(t,e,2).getBytes()}};else if("RSA-OAEP"===e||"RSAES-OAEP"===e)e={encode:function(t,e){return n.pkcs1.encode_rsa_oaep(e,t,o)}};else if(-1!==["RAW","NONE","NULL",null].indexOf(e))e={encode:function(t){return t}};else if("string"==typeof e)throw new Error('Unsupported encryption scheme: "'+e+'".');var i=e.encode(t,r,!0);return l.rsa.encrypt(i,r,!0)},verify:function(t,e,o,i){"string"==typeof o?o=o.toUpperCase():void 0===o&&(o="RSASSA-PKCS1-V1_5"),void 0===i&&(i={_parseAllDigestBytes:!0}),"_parseAllDigestBytes"in i||(i._parseAllDigestBytes=!0),"RSASSA-PKCS1-V1_5"===o?o={verify:function(t,e){e=g(e,r,!0);var o=a.fromDer(e,{parseAllBytes:i._parseAllDigestBytes}),s={},u=[];if(!a.validate(o,d,s,u))throw(l=new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value.")).errors=u,l;var l,c=a.derToOid(s.algorithmIdentifier);if(c!==n.oids.md2&&c!==n.oids.md5&&c!==n.oids.sha1&&c!==n.oids.sha224&&c!==n.oids.sha256&&c!==n.oids.sha384&&c!==n.oids.sha512&&c!==n.oids["sha512-224"]&&c!==n.oids["sha512-256"])throw(l=new Error("Unknown RSASSA-PKCS1-v1_5 DigestAlgorithm identifier.")).oid=c,l;if(!(c!==n.oids.md2&&c!==n.oids.md5||"parameters"in s))throw new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value. Missing algorithm identifer NULL parameters.");return t===s.digest}}:"NONE"!==o&&"NULL"!==o&&null!==o||(o={verify:function(t,e){return t===g(e,r,!0)}});var s=l.rsa.decrypt(e,r,!0,!1);return o.verify(t,s,r.n.bitLength())}};return r},l.setRsaPrivateKey=l.rsa.setPrivateKey=function(t,e,r,o,i,a,s,u){var c={n:t,e:e,d:r,p:o,q:i,dP:a,dQ:s,qInv:u,decrypt:function(t,e,r){"string"==typeof e?e=e.toUpperCase():void 0===e&&(e="RSAES-PKCS1-V1_5");var o=l.rsa.decrypt(t,c,!1,!1);if("RSAES-PKCS1-V1_5"===e)e={decode:g};else if("RSA-OAEP"===e||"RSAES-OAEP"===e)e={decode:function(t,e){return n.pkcs1.decode_rsa_oaep(e,t,r)}};else{if(-1===["RAW","NONE","NULL",null].indexOf(e))throw new Error('Unsupported encryption scheme: "'+e+'".');e={decode:function(t){return t}}}return e.decode(o,c,!1)},sign:function(t,e){var r=!1;"string"==typeof e&&(e=e.toUpperCase()),void 0===e||"RSASSA-PKCS1-V1_5"===e?(e={encode:v},r=1):"NONE"!==e&&"NULL"!==e&&null!==e||(e={encode:function(){return t}},r=1);var n=e.encode(t,c.n.bitLength());return l.rsa.encrypt(n,c,r)}};return c},l.wrapRsaPrivateKey=function(t){return a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.INTEGER,!1,a.integerToDer(0).getBytes()),a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.OID,!1,a.oidToDer(l.oids.rsaEncryption).getBytes()),a.create(a.Class.UNIVERSAL,a.Type.NULL,!1,"")]),a.create(a.Class.UNIVERSAL,a.Type.OCTETSTRING,!1,a.toDer(t).getBytes())])},l.privateKeyFromAsn1=function(t){var e,r,i,s,u,c,h,y,d={},v=[];if(a.validate(t,f,d,v)&&(t=a.fromDer(n.util.createBuffer(d.privateKey))),d={},v=[],!a.validate(t,p,d,v)){var m=new Error("Cannot read private key. ASN.1 object does not contain an RSAPrivateKey.");throw m.errors=v,m}return e=n.util.createBuffer(d.privateKeyModulus).toHex(),r=n.util.createBuffer(d.privateKeyPublicExponent).toHex(),i=n.util.createBuffer(d.privateKeyPrivateExponent).toHex(),s=n.util.createBuffer(d.privateKeyPrime1).toHex(),u=n.util.createBuffer(d.privateKeyPrime2).toHex(),c=n.util.createBuffer(d.privateKeyExponent1).toHex(),h=n.util.createBuffer(d.privateKeyExponent2).toHex(),y=n.util.createBuffer(d.privateKeyCoefficient).toHex(),l.setRsaPrivateKey(new o(e,16),new o(r,16),new o(i,16),new o(s,16),new o(u,16),new o(c,16),new o(h,16),new o(y,16))},l.privateKeyToAsn1=l.privateKeyToRSAPrivateKey=function(t){return a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.INTEGER,!1,a.integerToDer(0).getBytes()),a.create(a.Class.UNIVERSAL,a.Type.INTEGER,!1,w(t.n)),a.create(a.Class.UNIVERSAL,a.Type.INTEGER,!1,w(t.e)),a.create(a.Class.UNIVERSAL,a.Type.INTEGER,!1,w(t.d)),a.create(a.Class.UNIVERSAL,a.Type.INTEGER,!1,w(t.p)),a.create(a.Class.UNIVERSAL,a.Type.INTEGER,!1,w(t.q)),a.create(a.Class.UNIVERSAL,a.Type.INTEGER,!1,w(t.dP)),a.create(a.Class.UNIVERSAL,a.Type.INTEGER,!1,w(t.dQ)),a.create(a.Class.UNIVERSAL,a.Type.INTEGER,!1,w(t.qInv))])},l.publicKeyFromAsn1=function(t){var e={},r=[];if(a.validate(t,y,e,r)){var i,s=a.derToOid(e.publicKeyOid);if(s!==l.oids.rsaEncryption)throw(i=new Error("Cannot read public key. Unknown OID.")).oid=s,i;t=e.rsaPublicKey}if(r=[],!a.validate(t,h,e,r))throw(i=new Error("Cannot read public key. ASN.1 object does not contain an RSAPublicKey.")).errors=r,i;var u=n.util.createBuffer(e.publicKeyModulus).toHex(),c=n.util.createBuffer(e.publicKeyExponent).toHex();return l.setRsaPublicKey(new o(u,16),new o(c,16))},l.publicKeyToAsn1=l.publicKeyToSubjectPublicKeyInfo=function(t){return a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.OID,!1,a.oidToDer(l.oids.rsaEncryption).getBytes()),a.create(a.Class.UNIVERSAL,a.Type.NULL,!1,"")]),a.create(a.Class.UNIVERSAL,a.Type.BITSTRING,!1,[l.publicKeyToRSAPublicKey(t)])])},l.publicKeyToRSAPublicKey=function(t){return a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.INTEGER,!1,w(t.n)),a.create(a.Class.UNIVERSAL,a.Type.INTEGER,!1,w(t.e))])}},function(t,e,r){var n,o=r(0);function i(t,e,r){this.data=[],null!=t&&("number"==typeof t?this.fromNumber(t,e,r):null==e&&"string"!=typeof t?this.fromString(t,256):this.fromString(t,e))}function a(){return new i(null)}function s(t,e,r,n,o,i){for(var a=16383&e,s=e>>14;--i>=0;){var u=16383&this.data[t],l=this.data[t++]>>14,c=s*u+l*a;o=((u=a*u+((16383&c)<<14)+r.data[n]+o)>>28)+(c>>14)+s*l,r.data[n++]=268435455&u}return o}t.exports=o.jsbn=o.jsbn||{},o.jsbn.BigInteger=i,"undefined"==typeof navigator?(i.prototype.am=s,n=28):"Microsoft Internet Explorer"==navigator.appName?(i.prototype.am=function(t,e,r,n,o,i){for(var a=32767&e,s=e>>15;--i>=0;){var u=32767&this.data[t],l=this.data[t++]>>15,c=s*u+l*a;o=((u=a*u+((32767&c)<<15)+r.data[n]+(1073741823&o))>>>30)+(c>>>15)+s*l+(o>>>30),r.data[n++]=1073741823&u}return o},n=30):"Netscape"!=navigator.appName?(i.prototype.am=function(t,e,r,n,o,i){for(;--i>=0;){var a=e*this.data[t++]+r.data[n]+o;o=Math.floor(a/67108864),r.data[n++]=67108863&a}return o},n=26):(i.prototype.am=s,n=28),i.prototype.DB=n,i.prototype.DM=(1<<n)-1,i.prototype.DV=1<<n,i.prototype.FV=Math.pow(2,52),i.prototype.F1=52-n,i.prototype.F2=2*n-52;var u,l,c=new Array;for(u="0".charCodeAt(0),l=0;l<=9;++l)c[u++]=l;for(u="a".charCodeAt(0),l=10;l<36;++l)c[u++]=l;for(u="A".charCodeAt(0),l=10;l<36;++l)c[u++]=l;function f(t){return"0123456789abcdefghijklmnopqrstuvwxyz".charAt(t)}function p(t,e){var r=c[t.charCodeAt(e)];return null==r?-1:r}function h(t){var e=a();return e.fromInt(t),e}function y(t){var e,r=1;return 0!=(e=t>>>16)&&(t=e,r+=16),0!=(e=t>>8)&&(t=e,r+=8),0!=(e=t>>4)&&(t=e,r+=4),0!=(e=t>>2)&&(t=e,r+=2),0!=(e=t>>1)&&(t=e,r+=1),r}function d(t){this.m=t}function v(t){this.m=t,this.mp=t.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}function m(t,e){return t&e}function b(t,e){return t|e}function g(t,e){return t^e}function S(t,e){return t&~e}function w(t){if(0==t)return-1;var e=0;return 0==(65535&t)&&(t>>=16,e+=16),0==(255&t)&&(t>>=8,e+=8),0==(15&t)&&(t>>=4,e+=4),0==(3&t)&&(t>>=2,e+=2),0==(1&t)&&++e,e}function _(t){for(var e=0;0!=t;)t&=t-1,++e;return e}function O(){}function E(t){return t}function P(t){this.r2=a(),this.q3=a(),i.ONE.dlShiftTo(2*t.t,this.r2),this.mu=this.r2.divide(t),this.m=t}d.prototype.convert=function(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t},d.prototype.revert=function(t){return t},d.prototype.reduce=function(t){t.divRemTo(this.m,null,t)},d.prototype.mulTo=function(t,e,r){t.multiplyTo(e,r),this.reduce(r)},d.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)},v.prototype.convert=function(t){var e=a();return t.abs().dlShiftTo(this.m.t,e),e.divRemTo(this.m,null,e),t.s<0&&e.compareTo(i.ZERO)>0&&this.m.subTo(e,e),e},v.prototype.revert=function(t){var e=a();return t.copyTo(e),this.reduce(e),e},v.prototype.reduce=function(t){for(;t.t<=this.mt2;)t.data[t.t++]=0;for(var e=0;e<this.m.t;++e){var r=32767&t.data[e],n=r*this.mpl+((r*this.mph+(t.data[e]>>15)*this.mpl&this.um)<<15)&t.DM;for(r=e+this.m.t,t.data[r]+=this.m.am(0,n,t,e,0,this.m.t);t.data[r]>=t.DV;)t.data[r]-=t.DV,t.data[++r]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)},v.prototype.mulTo=function(t,e,r){t.multiplyTo(e,r),this.reduce(r)},v.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)},i.prototype.copyTo=function(t){for(var e=this.t-1;e>=0;--e)t.data[e]=this.data[e];t.t=this.t,t.s=this.s},i.prototype.fromInt=function(t){this.t=1,this.s=t<0?-1:0,t>0?this.data[0]=t:t<-1?this.data[0]=t+this.DV:this.t=0},i.prototype.fromString=function(t,e){var r;if(16==e)r=4;else if(8==e)r=3;else if(256==e)r=8;else if(2==e)r=1;else if(32==e)r=5;else{if(4!=e)return void this.fromRadix(t,e);r=2}this.t=0,this.s=0;for(var n=t.length,o=!1,a=0;--n>=0;){var s=8==r?255&t[n]:p(t,n);s<0?"-"==t.charAt(n)&&(o=!0):(o=!1,0==a?this.data[this.t++]=s:a+r>this.DB?(this.data[this.t-1]|=(s&(1<<this.DB-a)-1)<<a,this.data[this.t++]=s>>this.DB-a):this.data[this.t-1]|=s<<a,(a+=r)>=this.DB&&(a-=this.DB))}8==r&&0!=(128&t[0])&&(this.s=-1,a>0&&(this.data[this.t-1]|=(1<<this.DB-a)-1<<a)),this.clamp(),o&&i.ZERO.subTo(this,this)},i.prototype.clamp=function(){for(var t=this.s&this.DM;this.t>0&&this.data[this.t-1]==t;)--this.t},i.prototype.dlShiftTo=function(t,e){var r;for(r=this.t-1;r>=0;--r)e.data[r+t]=this.data[r];for(r=t-1;r>=0;--r)e.data[r]=0;e.t=this.t+t,e.s=this.s},i.prototype.drShiftTo=function(t,e){for(var r=t;r<this.t;++r)e.data[r-t]=this.data[r];e.t=Math.max(this.t-t,0),e.s=this.s},i.prototype.lShiftTo=function(t,e){var r,n=t%this.DB,o=this.DB-n,i=(1<<o)-1,a=Math.floor(t/this.DB),s=this.s<<n&this.DM;for(r=this.t-1;r>=0;--r)e.data[r+a+1]=this.data[r]>>o|s,s=(this.data[r]&i)<<n;for(r=a-1;r>=0;--r)e.data[r]=0;e.data[a]=s,e.t=this.t+a+1,e.s=this.s,e.clamp()},i.prototype.rShiftTo=function(t,e){e.s=this.s;var r=Math.floor(t/this.DB);if(r>=this.t)e.t=0;else{var n=t%this.DB,o=this.DB-n,i=(1<<n)-1;e.data[0]=this.data[r]>>n;for(var a=r+1;a<this.t;++a)e.data[a-r-1]|=(this.data[a]&i)<<o,e.data[a-r]=this.data[a]>>n;n>0&&(e.data[this.t-r-1]|=(this.s&i)<<o),e.t=this.t-r,e.clamp()}},i.prototype.subTo=function(t,e){for(var r=0,n=0,o=Math.min(t.t,this.t);r<o;)n+=this.data[r]-t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;if(t.t<this.t){for(n-=t.s;r<this.t;)n+=this.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<t.t;)n-=t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n-=t.s}e.s=n<0?-1:0,n<-1?e.data[r++]=this.DV+n:n>0&&(e.data[r++]=n),e.t=r,e.clamp()},i.prototype.multiplyTo=function(t,e){var r=this.abs(),n=t.abs(),o=r.t;for(e.t=o+n.t;--o>=0;)e.data[o]=0;for(o=0;o<n.t;++o)e.data[o+r.t]=r.am(0,n.data[o],e,o,0,r.t);e.s=0,e.clamp(),this.s!=t.s&&i.ZERO.subTo(e,e)},i.prototype.squareTo=function(t){for(var e=this.abs(),r=t.t=2*e.t;--r>=0;)t.data[r]=0;for(r=0;r<e.t-1;++r){var n=e.am(r,e.data[r],t,2*r,0,1);(t.data[r+e.t]+=e.am(r+1,2*e.data[r],t,2*r+1,n,e.t-r-1))>=e.DV&&(t.data[r+e.t]-=e.DV,t.data[r+e.t+1]=1)}t.t>0&&(t.data[t.t-1]+=e.am(r,e.data[r],t,2*r,0,1)),t.s=0,t.clamp()},i.prototype.divRemTo=function(t,e,r){var n=t.abs();if(!(n.t<=0)){var o=this.abs();if(o.t<n.t)return null!=e&&e.fromInt(0),void(null!=r&&this.copyTo(r));null==r&&(r=a());var s=a(),u=this.s,l=t.s,c=this.DB-y(n.data[n.t-1]);c>0?(n.lShiftTo(c,s),o.lShiftTo(c,r)):(n.copyTo(s),o.copyTo(r));var f=s.t,p=s.data[f-1];if(0!=p){var h=p*(1<<this.F1)+(f>1?s.data[f-2]>>this.F2:0),d=this.FV/h,v=(1<<this.F1)/h,m=1<<this.F2,b=r.t,g=b-f,S=null==e?a():e;for(s.dlShiftTo(g,S),r.compareTo(S)>=0&&(r.data[r.t++]=1,r.subTo(S,r)),i.ONE.dlShiftTo(f,S),S.subTo(s,s);s.t<f;)s.data[s.t++]=0;for(;--g>=0;){var w=r.data[--b]==p?this.DM:Math.floor(r.data[b]*d+(r.data[b-1]+m)*v);if((r.data[b]+=s.am(0,w,r,g,0,f))<w)for(s.dlShiftTo(g,S),r.subTo(S,r);r.data[b]<--w;)r.subTo(S,r)}null!=e&&(r.drShiftTo(f,e),u!=l&&i.ZERO.subTo(e,e)),r.t=f,r.clamp(),c>0&&r.rShiftTo(c,r),u<0&&i.ZERO.subTo(r,r)}}},i.prototype.invDigit=function(){if(this.t<1)return 0;var t=this.data[0];if(0==(1&t))return 0;var e=3&t;return(e=(e=(e=(e=e*(2-(15&t)*e)&15)*(2-(255&t)*e)&255)*(2-((65535&t)*e&65535))&65535)*(2-t*e%this.DV)%this.DV)>0?this.DV-e:-e},i.prototype.isEven=function(){return 0==(this.t>0?1&this.data[0]:this.s)},i.prototype.exp=function(t,e){if(t>4294967295||t<1)return i.ONE;var r=a(),n=a(),o=e.convert(this),s=y(t)-1;for(o.copyTo(r);--s>=0;)if(e.sqrTo(r,n),(t&1<<s)>0)e.mulTo(n,o,r);else{var u=r;r=n,n=u}return e.revert(r)},i.prototype.toString=function(t){if(this.s<0)return"-"+this.negate().toString(t);var e;if(16==t)e=4;else if(8==t)e=3;else if(2==t)e=1;else if(32==t)e=5;else{if(4!=t)return this.toRadix(t);e=2}var r,n=(1<<e)-1,o=!1,i="",a=this.t,s=this.DB-a*this.DB%e;if(a-- >0)for(s<this.DB&&(r=this.data[a]>>s)>0&&(o=!0,i=f(r));a>=0;)s<e?(r=(this.data[a]&(1<<s)-1)<<e-s,r|=this.data[--a]>>(s+=this.DB-e)):(r=this.data[a]>>(s-=e)&n,s<=0&&(s+=this.DB,--a)),r>0&&(o=!0),o&&(i+=f(r));return o?i:"0"},i.prototype.negate=function(){var t=a();return i.ZERO.subTo(this,t),t},i.prototype.abs=function(){return this.s<0?this.negate():this},i.prototype.compareTo=function(t){var e=this.s-t.s;if(0!=e)return e;var r=this.t;if(0!=(e=r-t.t))return this.s<0?-e:e;for(;--r>=0;)if(0!=(e=this.data[r]-t.data[r]))return e;return 0},i.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+y(this.data[this.t-1]^this.s&this.DM)},i.prototype.mod=function(t){var e=a();return this.abs().divRemTo(t,null,e),this.s<0&&e.compareTo(i.ZERO)>0&&t.subTo(e,e),e},i.prototype.modPowInt=function(t,e){var r;return r=t<256||e.isEven()?new d(e):new v(e),this.exp(t,r)},i.ZERO=h(0),i.ONE=h(1),O.prototype.convert=E,O.prototype.revert=E,O.prototype.mulTo=function(t,e,r){t.multiplyTo(e,r)},O.prototype.sqrTo=function(t,e){t.squareTo(e)},P.prototype.convert=function(t){if(t.s<0||t.t>2*this.m.t)return t.mod(this.m);if(t.compareTo(this.m)<0)return t;var e=a();return t.copyTo(e),this.reduce(e),e},P.prototype.revert=function(t){return t},P.prototype.reduce=function(t){for(t.drShiftTo(this.m.t-1,this.r2),t.t>this.m.t+1&&(t.t=this.m.t+1,t.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);t.compareTo(this.r2)<0;)t.dAddOffset(1,this.m.t+1);for(t.subTo(this.r2,t);t.compareTo(this.m)>=0;)t.subTo(this.m,t)},P.prototype.mulTo=function(t,e,r){t.multiplyTo(e,r),this.reduce(r)},P.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)};var x=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],T=(1<<26)/x[x.length-1];i.prototype.chunkSize=function(t){return Math.floor(Math.LN2*this.DB/Math.log(t))},i.prototype.toRadix=function(t){if(null==t&&(t=10),0==this.signum()||t<2||t>36)return"0";var e=this.chunkSize(t),r=Math.pow(t,e),n=h(r),o=a(),i=a(),s="";for(this.divRemTo(n,o,i);o.signum()>0;)s=(r+i.intValue()).toString(t).substr(1)+s,o.divRemTo(n,o,i);return i.intValue().toString(t)+s},i.prototype.fromRadix=function(t,e){this.fromInt(0),null==e&&(e=10);for(var r=this.chunkSize(e),n=Math.pow(e,r),o=!1,a=0,s=0,u=0;u<t.length;++u){var l=p(t,u);l<0?"-"==t.charAt(u)&&0==this.signum()&&(o=!0):(s=e*s+l,++a>=r&&(this.dMultiply(n),this.dAddOffset(s,0),a=0,s=0))}a>0&&(this.dMultiply(Math.pow(e,a)),this.dAddOffset(s,0)),o&&i.ZERO.subTo(this,this)},i.prototype.fromNumber=function(t,e,r){if("number"==typeof e)if(t<2)this.fromInt(1);else for(this.fromNumber(t,r),this.testBit(t-1)||this.bitwiseTo(i.ONE.shiftLeft(t-1),b,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(e);)this.dAddOffset(2,0),this.bitLength()>t&&this.subTo(i.ONE.shiftLeft(t-1),this);else{var n=new Array,o=7&t;n.length=1+(t>>3),e.nextBytes(n),o>0?n[0]&=(1<<o)-1:n[0]=0,this.fromString(n,256)}},i.prototype.bitwiseTo=function(t,e,r){var n,o,i=Math.min(t.t,this.t);for(n=0;n<i;++n)r.data[n]=e(this.data[n],t.data[n]);if(t.t<this.t){for(o=t.s&this.DM,n=i;n<this.t;++n)r.data[n]=e(this.data[n],o);r.t=this.t}else{for(o=this.s&this.DM,n=i;n<t.t;++n)r.data[n]=e(o,t.data[n]);r.t=t.t}r.s=e(this.s,t.s),r.clamp()},i.prototype.changeBit=function(t,e){var r=i.ONE.shiftLeft(t);return this.bitwiseTo(r,e,r),r},i.prototype.addTo=function(t,e){for(var r=0,n=0,o=Math.min(t.t,this.t);r<o;)n+=this.data[r]+t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;if(t.t<this.t){for(n+=t.s;r<this.t;)n+=this.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<t.t;)n+=t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n+=t.s}e.s=n<0?-1:0,n>0?e.data[r++]=n:n<-1&&(e.data[r++]=this.DV+n),e.t=r,e.clamp()},i.prototype.dMultiply=function(t){this.data[this.t]=this.am(0,t-1,this,0,0,this.t),++this.t,this.clamp()},i.prototype.dAddOffset=function(t,e){if(0!=t){for(;this.t<=e;)this.data[this.t++]=0;for(this.data[e]+=t;this.data[e]>=this.DV;)this.data[e]-=this.DV,++e>=this.t&&(this.data[this.t++]=0),++this.data[e]}},i.prototype.multiplyLowerTo=function(t,e,r){var n,o=Math.min(this.t+t.t,e);for(r.s=0,r.t=o;o>0;)r.data[--o]=0;for(n=r.t-this.t;o<n;++o)r.data[o+this.t]=this.am(0,t.data[o],r,o,0,this.t);for(n=Math.min(t.t,e);o<n;++o)this.am(0,t.data[o],r,o,0,e-o);r.clamp()},i.prototype.multiplyUpperTo=function(t,e,r){--e;var n=r.t=this.t+t.t-e;for(r.s=0;--n>=0;)r.data[n]=0;for(n=Math.max(e-this.t,0);n<t.t;++n)r.data[this.t+n-e]=this.am(e-n,t.data[n],r,0,0,this.t+n-e);r.clamp(),r.drShiftTo(1,r)},i.prototype.modInt=function(t){if(t<=0)return 0;var e=this.DV%t,r=this.s<0?t-1:0;if(this.t>0)if(0==e)r=this.data[0]%t;else for(var n=this.t-1;n>=0;--n)r=(e*r+this.data[n])%t;return r},i.prototype.millerRabin=function(t){var e=this.subtract(i.ONE),r=e.getLowestSetBit();if(r<=0)return!1;for(var n,o=e.shiftRight(r),a={nextBytes:function(t){for(var e=0;e<t.length;++e)t[e]=Math.floor(256*Math.random())}},s=0;s<t;++s){do{n=new i(this.bitLength(),a)}while(n.compareTo(i.ONE)<=0||n.compareTo(e)>=0);var u=n.modPow(o,this);if(0!=u.compareTo(i.ONE)&&0!=u.compareTo(e)){for(var l=1;l++<r&&0!=u.compareTo(e);)if(0==(u=u.modPowInt(2,this)).compareTo(i.ONE))return!1;if(0!=u.compareTo(e))return!1}}return!0},i.prototype.clone=function(){var t=a();return this.copyTo(t),t},i.prototype.intValue=function(){if(this.s<0){if(1==this.t)return this.data[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this.data[0];if(0==this.t)return 0}return(this.data[1]&(1<<32-this.DB)-1)<<this.DB|this.data[0]},i.prototype.byteValue=function(){return 0==this.t?this.s:this.data[0]<<24>>24},i.prototype.shortValue=function(){return 0==this.t?this.s:this.data[0]<<16>>16},i.prototype.signum=function(){return this.s<0?-1:this.t<=0||1==this.t&&this.data[0]<=0?0:1},i.prototype.toByteArray=function(){var t=this.t,e=new Array;e[0]=this.s;var r,n=this.DB-t*this.DB%8,o=0;if(t-- >0)for(n<this.DB&&(r=this.data[t]>>n)!=(this.s&this.DM)>>n&&(e[o++]=r|this.s<<this.DB-n);t>=0;)n<8?(r=(this.data[t]&(1<<n)-1)<<8-n,r|=this.data[--t]>>(n+=this.DB-8)):(r=this.data[t]>>(n-=8)&255,n<=0&&(n+=this.DB,--t)),0!=(128&r)&&(r|=-256),0==o&&(128&this.s)!=(128&r)&&++o,(o>0||r!=this.s)&&(e[o++]=r);return e},i.prototype.equals=function(t){return 0==this.compareTo(t)},i.prototype.min=function(t){return this.compareTo(t)<0?this:t},i.prototype.max=function(t){return this.compareTo(t)>0?this:t},i.prototype.and=function(t){var e=a();return this.bitwiseTo(t,m,e),e},i.prototype.or=function(t){var e=a();return this.bitwiseTo(t,b,e),e},i.prototype.xor=function(t){var e=a();return this.bitwiseTo(t,g,e),e},i.prototype.andNot=function(t){var e=a();return this.bitwiseTo(t,S,e),e},i.prototype.not=function(){for(var t=a(),e=0;e<this.t;++e)t.data[e]=this.DM&~this.data[e];return t.t=this.t,t.s=~this.s,t},i.prototype.shiftLeft=function(t){var e=a();return t<0?this.rShiftTo(-t,e):this.lShiftTo(t,e),e},i.prototype.shiftRight=function(t){var e=a();return t<0?this.lShiftTo(-t,e):this.rShiftTo(t,e),e},i.prototype.getLowestSetBit=function(){for(var t=0;t<this.t;++t)if(0!=this.data[t])return t*this.DB+w(this.data[t]);return this.s<0?this.t*this.DB:-1},i.prototype.bitCount=function(){for(var t=0,e=this.s&this.DM,r=0;r<this.t;++r)t+=_(this.data[r]^e);return t},i.prototype.testBit=function(t){var e=Math.floor(t/this.DB);return e>=this.t?0!=this.s:0!=(this.data[e]&1<<t%this.DB)},i.prototype.setBit=function(t){return this.changeBit(t,b)},i.prototype.clearBit=function(t){return this.changeBit(t,S)},i.prototype.flipBit=function(t){return this.changeBit(t,g)},i.prototype.add=function(t){var e=a();return this.addTo(t,e),e},i.prototype.subtract=function(t){var e=a();return this.subTo(t,e),e},i.prototype.multiply=function(t){var e=a();return this.multiplyTo(t,e),e},i.prototype.divide=function(t){var e=a();return this.divRemTo(t,e,null),e},i.prototype.remainder=function(t){var e=a();return this.divRemTo(t,null,e),e},i.prototype.divideAndRemainder=function(t){var e=a(),r=a();return this.divRemTo(t,e,r),new Array(e,r)},i.prototype.modPow=function(t,e){var r,n,o=t.bitLength(),i=h(1);if(o<=0)return i;r=o<18?1:o<48?3:o<144?4:o<768?5:6,n=o<8?new d(e):e.isEven()?new P(e):new v(e);var s=new Array,u=3,l=r-1,c=(1<<r)-1;if(s[1]=n.convert(this),r>1){var f=a();for(n.sqrTo(s[1],f);u<=c;)s[u]=a(),n.mulTo(f,s[u-2],s[u]),u+=2}var p,m,b=t.t-1,g=!0,S=a();for(o=y(t.data[b])-1;b>=0;){for(o>=l?p=t.data[b]>>o-l&c:(p=(t.data[b]&(1<<o+1)-1)<<l-o,b>0&&(p|=t.data[b-1]>>this.DB+o-l)),u=r;0==(1&p);)p>>=1,--u;if((o-=u)<0&&(o+=this.DB,--b),g)s[p].copyTo(i),g=!1;else{for(;u>1;)n.sqrTo(i,S),n.sqrTo(S,i),u-=2;u>0?n.sqrTo(i,S):(m=i,i=S,S=m),n.mulTo(S,s[p],i)}for(;b>=0&&0==(t.data[b]&1<<o);)n.sqrTo(i,S),m=i,i=S,S=m,--o<0&&(o=this.DB-1,--b)}return n.revert(i)},i.prototype.modInverse=function(t){var e=t.isEven();if(this.isEven()&&e||0==t.signum())return i.ZERO;for(var r=t.clone(),n=this.clone(),o=h(1),a=h(0),s=h(0),u=h(1);0!=r.signum();){for(;r.isEven();)r.rShiftTo(1,r),e?(o.isEven()&&a.isEven()||(o.addTo(this,o),a.subTo(t,a)),o.rShiftTo(1,o)):a.isEven()||a.subTo(t,a),a.rShiftTo(1,a);for(;n.isEven();)n.rShiftTo(1,n),e?(s.isEven()&&u.isEven()||(s.addTo(this,s),u.subTo(t,u)),s.rShiftTo(1,s)):u.isEven()||u.subTo(t,u),u.rShiftTo(1,u);r.compareTo(n)>=0?(r.subTo(n,r),e&&o.subTo(s,o),a.subTo(u,a)):(n.subTo(r,n),e&&s.subTo(o,s),u.subTo(a,u))}return 0!=n.compareTo(i.ONE)?i.ZERO:u.compareTo(t)>=0?u.subtract(t):u.signum()<0?(u.addTo(t,u),u.signum()<0?u.add(t):u):u},i.prototype.pow=function(t){return this.exp(t,new O)},i.prototype.gcd=function(t){var e=this.s<0?this.negate():this.clone(),r=t.s<0?t.negate():t.clone();if(e.compareTo(r)<0){var n=e;e=r,r=n}var o=e.getLowestSetBit(),i=r.getLowestSetBit();if(i<0)return e;for(o<i&&(i=o),i>0&&(e.rShiftTo(i,e),r.rShiftTo(i,r));e.signum()>0;)(o=e.getLowestSetBit())>0&&e.rShiftTo(o,e),(o=r.getLowestSetBit())>0&&r.rShiftTo(o,r),e.compareTo(r)>=0?(e.subTo(r,e),e.rShiftTo(1,e)):(r.subTo(e,r),r.rShiftTo(1,r));return i>0&&r.lShiftTo(i,r),r},i.prototype.isProbablePrime=function(t){var e,r=this.abs();if(1==r.t&&r.data[0]<=x[x.length-1]){for(e=0;e<x.length;++e)if(r.data[0]==x[e])return!0;return!1}if(r.isEven())return!1;for(e=1;e<x.length;){for(var n=x[e],o=e+1;o<x.length&&n<T;)n*=x[o++];for(n=r.modInt(n);e<o;)if(n%x[e++]==0)return!1}return r.millerRabin(t)}},function(t,e,r){var n=r(0);r(1),t.exports=n.cipher=n.cipher||{},n.cipher.algorithms=n.cipher.algorithms||{},n.cipher.createCipher=function(t,e){var r=t;if("string"==typeof r&&(r=n.cipher.getAlgorithm(r))&&(r=r()),!r)throw new Error("Unsupported algorithm: "+t);return new n.cipher.BlockCipher({algorithm:r,key:e,decrypt:!1})},n.cipher.createDecipher=function(t,e){var r=t;if("string"==typeof r&&(r=n.cipher.getAlgorithm(r))&&(r=r()),!r)throw new Error("Unsupported algorithm: "+t);return new n.cipher.BlockCipher({algorithm:r,key:e,decrypt:!0})},n.cipher.registerAlgorithm=function(t,e){t=t.toUpperCase(),n.cipher.algorithms[t]=e},n.cipher.getAlgorithm=function(t){return(t=t.toUpperCase())in n.cipher.algorithms?n.cipher.algorithms[t]:null};var o=n.cipher.BlockCipher=function(t){this.algorithm=t.algorithm,this.mode=this.algorithm.mode,this.blockSize=this.mode.blockSize,this._finish=!1,this._input=null,this.output=null,this._op=t.decrypt?this.mode.decrypt:this.mode.encrypt,this._decrypt=t.decrypt,this.algorithm.initialize(t)};o.prototype.start=function(t){t=t||{};var e={};for(var r in t)e[r]=t[r];e.decrypt=this._decrypt,this._finish=!1,this._input=n.util.createBuffer(),this.output=t.output||n.util.createBuffer(),this.mode.start(e)},o.prototype.update=function(t){for(t&&this._input.putBuffer(t);!this._op.call(this.mode,this._input,this.output,this._finish)&&!this._finish;);this._input.compact()},o.prototype.finish=function(t){!t||"ECB"!==this.mode.name&&"CBC"!==this.mode.name||(this.mode.pad=function(e){return t(this.blockSize,e,!1)},this.mode.unpad=function(e){return t(this.blockSize,e,!0)});var e={};return e.decrypt=this._decrypt,e.overflow=this._input.length()%this.blockSize,!(!this._decrypt&&this.mode.pad&&!this.mode.pad(this._input,e)||(this._finish=!0,this.update(),this._decrypt&&this.mode.unpad&&!this.mode.unpad(this.output,e)||this.mode.afterFinish&&!this.mode.afterFinish(this.output,e)))}},function(t,e,r){var n=r(0);r(4),r(1);var o=t.exports=n.md5=n.md5||{};n.md.md5=n.md.algorithms.md5=o,o.create=function(){l||function(){i=String.fromCharCode(128),i+=n.util.fillString(String.fromCharCode(0),64),a=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,1,6,11,0,5,10,15,4,9,14,3,8,13,2,7,12,5,8,11,14,1,4,7,10,13,0,3,6,9,12,15,2,0,7,14,5,12,3,10,1,8,15,6,13,4,11,2,9],s=[7,12,17,22,7,12,17,22,7,12,17,22,7,12,17,22,5,9,14,20,5,9,14,20,5,9,14,20,5,9,14,20,4,11,16,23,4,11,16,23,4,11,16,23,4,11,16,23,6,10,15,21,6,10,15,21,6,10,15,21,6,10,15,21],u=new Array(64);for(var t=0;t<64;++t)u[t]=Math.floor(4294967296*Math.abs(Math.sin(t+1)));l=!0}();var t=null,e=n.util.createBuffer(),r=new Array(16),o={algorithm:"md5",blockLength:64,digestLength:16,messageLength:0,fullMessageLength:null,messageLengthSize:8,start:function(){o.messageLength=0,o.fullMessageLength=o.messageLength64=[];for(var r=o.messageLengthSize/4,i=0;i<r;++i)o.fullMessageLength.push(0);return e=n.util.createBuffer(),t={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878},o}};return o.start(),o.update=function(i,a){"utf8"===a&&(i=n.util.encodeUtf8(i));var s=i.length;o.messageLength+=s,s=[s/4294967296>>>0,s>>>0];for(var u=o.fullMessageLength.length-1;u>=0;--u)o.fullMessageLength[u]+=s[1],s[1]=s[0]+(o.fullMessageLength[u]/4294967296>>>0),o.fullMessageLength[u]=o.fullMessageLength[u]>>>0,s[0]=s[1]/4294967296>>>0;return e.putBytes(i),c(t,r,e),(e.read>2048||0===e.length())&&e.compact(),o},o.digest=function(){var a=n.util.createBuffer();a.putBytes(e.bytes());var s=o.fullMessageLength[o.fullMessageLength.length-1]+o.messageLengthSize&o.blockLength-1;a.putBytes(i.substr(0,o.blockLength-s));for(var u,l=0,f=o.fullMessageLength.length-1;f>=0;--f)l=(u=8*o.fullMessageLength[f]+l)/4294967296>>>0,a.putInt32Le(u>>>0);var p={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3};c(p,r,a);var h=n.util.createBuffer();return h.putInt32Le(p.h0),h.putInt32Le(p.h1),h.putInt32Le(p.h2),h.putInt32Le(p.h3),h},o};var i=null,a=null,s=null,u=null,l=!1;function c(t,e,r){for(var n,o,i,l,c,f,p,h=r.length();h>=64;){for(o=t.h0,i=t.h1,l=t.h2,c=t.h3,p=0;p<16;++p)e[p]=r.getInt32Le(),n=o+(c^i&(l^c))+u[p]+e[p],o=c,c=l,l=i,i+=n<<(f=s[p])|n>>>32-f;for(;p<32;++p)n=o+(l^c&(i^l))+u[p]+e[a[p]],o=c,c=l,l=i,i+=n<<(f=s[p])|n>>>32-f;for(;p<48;++p)n=o+(i^l^c)+u[p]+e[a[p]],o=c,c=l,l=i,i+=n<<(f=s[p])|n>>>32-f;for(;p<64;++p)n=o+(l^(i|~c))+u[p]+e[a[p]],o=c,c=l,l=i,i+=n<<(f=s[p])|n>>>32-f;t.h0=t.h0+o|0,t.h1=t.h1+i|0,t.h2=t.h2+l|0,t.h3=t.h3+c|0,h-=64}}},function(t,e,r){var n=r(0);r(8),r(4),r(1);var o,i=n.pkcs5=n.pkcs5||{};n.util.isNodejs&&!n.options.usePureJavaScript&&(o=r(16)),t.exports=n.pbkdf2=i.pbkdf2=function(t,e,r,i,a,u){if("function"==typeof a&&(u=a,a=null),n.util.isNodejs&&!n.options.usePureJavaScript&&o.pbkdf2&&(null===a||"object"!=s(a))&&(o.pbkdf2Sync.length>4||!a||"sha1"===a))return"string"!=typeof a&&(a="sha1"),t=Buffer.from(t,"binary"),e=Buffer.from(e,"binary"),u?4===o.pbkdf2Sync.length?o.pbkdf2(t,e,r,i,function(t,e){if(t)return u(t);u(null,e.toString("binary"))}):o.pbkdf2(t,e,r,i,a,function(t,e){if(t)return u(t);u(null,e.toString("binary"))}):4===o.pbkdf2Sync.length?o.pbkdf2Sync(t,e,r,i).toString("binary"):o.pbkdf2Sync(t,e,r,i,a).toString("binary");if(null==a&&(a="sha1"),"string"==typeof a){if(!(a in n.md.algorithms))throw new Error("Unknown hash algorithm: "+a);a=n.md[a].create()}var l=a.digestLength;if(i>4294967295*l){var c=new Error("Derived key is too long.");if(u)return u(c);throw c}var f=Math.ceil(i/l),p=i-(f-1)*l,h=n.hmac.create();h.start(a,t);var y,d,v,m="";if(!u){for(var b=1;b<=f;++b){h.start(null,null),h.update(e),h.update(n.util.int32ToBytes(b)),y=v=h.digest().getBytes();for(var g=2;g<=r;++g)h.start(null,null),h.update(v),d=h.digest().getBytes(),y=n.util.xorBytes(y,d,l),v=d;m+=b<f?y:y.substr(0,p)}return m}function S(){if(b>f)return u(null,m);h.start(null,null),h.update(e),h.update(n.util.int32ToBytes(b)),y=v=h.digest().getBytes(),g=2,w()}function w(){if(g<=r)return h.start(null,null),h.update(v),d=h.digest().getBytes(),y=n.util.xorBytes(y,d,l),v=d,++g,n.util.setImmediate(w);m+=b<f?y:y.substr(0,p),++b,S()}b=1,S()}},function(t,e){},function(t,e,r){var n=r(0);r(5),r(3),r(10),r(4),r(37),r(6),r(7),r(18),r(11),r(1);var o=n.asn1,i=t.exports=n.pki=n.pki||{},a=i.oids,u={};u.CN=a.commonName,u.commonName="CN",u.C=a.countryName,u.countryName="C",u.L=a.localityName,u.localityName="L",u.ST=a.stateOrProvinceName,u.stateOrProvinceName="ST",u.O=a.organizationName,u.organizationName="O",u.OU=a.organizationalUnitName,u.organizationalUnitName="OU",u.E=a.emailAddress,u.emailAddress="E";var l=n.pki.rsa.publicKeyValidator,c={name:"Certificate",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,captureAsn1:"tbsCertificate",value:[{name:"Certificate.TBSCertificate.version",tagClass:o.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.version.integer",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"certVersion"}]},{name:"Certificate.TBSCertificate.serialNumber",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"certSerialNumber"},{name:"Certificate.TBSCertificate.signature",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.signature.algorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"certinfoSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:o.Class.UNIVERSAL,optional:!0,captureAsn1:"certinfoSignatureParams"}]},{name:"Certificate.TBSCertificate.issuer",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,captureAsn1:"certIssuer"},{name:"Certificate.TBSCertificate.validity",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.validity.notBefore (utc)",tagClass:o.Class.UNIVERSAL,type:o.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity1UTCTime"},{name:"Certificate.TBSCertificate.validity.notBefore (generalized)",tagClass:o.Class.UNIVERSAL,type:o.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity2GeneralizedTime"},{name:"Certificate.TBSCertificate.validity.notAfter (utc)",tagClass:o.Class.UNIVERSAL,type:o.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity3UTCTime"},{name:"Certificate.TBSCertificate.validity.notAfter (generalized)",tagClass:o.Class.UNIVERSAL,type:o.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity4GeneralizedTime"}]},{name:"Certificate.TBSCertificate.subject",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,captureAsn1:"certSubject"},l,{name:"Certificate.TBSCertificate.issuerUniqueID",tagClass:o.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.issuerUniqueID.id",tagClass:o.Class.UNIVERSAL,type:o.Type.BITSTRING,constructed:!1,captureBitStringValue:"certIssuerUniqueId"}]},{name:"Certificate.TBSCertificate.subjectUniqueID",tagClass:o.Class.CONTEXT_SPECIFIC,type:2,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.subjectUniqueID.id",tagClass:o.Class.UNIVERSAL,type:o.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSubjectUniqueId"}]},{name:"Certificate.TBSCertificate.extensions",tagClass:o.Class.CONTEXT_SPECIFIC,type:3,constructed:!0,captureAsn1:"certExtensions",optional:!0}]},{name:"Certificate.signatureAlgorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.signatureAlgorithm.algorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"certSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:o.Class.UNIVERSAL,optional:!0,captureAsn1:"certSignatureParams"}]},{name:"Certificate.signatureValue",tagClass:o.Class.UNIVERSAL,type:o.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSignature"}]},f={name:"rsapss",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.hashAlgorithm",tagClass:o.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier",tagClass:o.Class.UNIVERSAL,type:o.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier.algorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"hashOid"}]}]},{name:"rsapss.maskGenAlgorithm",tagClass:o.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier",tagClass:o.Class.UNIVERSAL,type:o.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.algorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"maskGenOid"},{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params.algorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"maskGenHashOid"}]}]}]},{name:"rsapss.saltLength",tagClass:o.Class.CONTEXT_SPECIFIC,type:2,optional:!0,value:[{name:"rsapss.saltLength.saltLength",tagClass:o.Class.UNIVERSAL,type:o.Class.INTEGER,constructed:!1,capture:"saltLength"}]},{name:"rsapss.trailerField",tagClass:o.Class.CONTEXT_SPECIFIC,type:3,optional:!0,value:[{name:"rsapss.trailer.trailer",tagClass:o.Class.UNIVERSAL,type:o.Class.INTEGER,constructed:!1,capture:"trailer"}]}]},p={name:"CertificationRequestInfo",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfo",value:[{name:"CertificationRequestInfo.integer",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"certificationRequestInfoVersion"},{name:"CertificationRequestInfo.subject",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfoSubject"},l,{name:"CertificationRequestInfo.attributes",tagClass:o.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"certificationRequestInfoAttributes",value:[{name:"CertificationRequestInfo.attributes",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequestInfo.attributes.type",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1},{name:"CertificationRequestInfo.attributes.value",tagClass:o.Class.UNIVERSAL,type:o.Type.SET,constructed:!0}]}]}]},h={name:"CertificationRequest",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,captureAsn1:"csr",value:[p,{name:"CertificationRequest.signatureAlgorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequest.signatureAlgorithm.algorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"csrSignatureOid"},{name:"CertificationRequest.signatureAlgorithm.parameters",tagClass:o.Class.UNIVERSAL,optional:!0,captureAsn1:"csrSignatureParams"}]},{name:"CertificationRequest.signature",tagClass:o.Class.UNIVERSAL,type:o.Type.BITSTRING,constructed:!1,captureBitStringValue:"csrSignature"}]};function y(t,e){"string"==typeof e&&(e={shortName:e});for(var r,n=null,o=0;null===n&&o<t.attributes.length;++o)r=t.attributes[o],(e.type&&e.type===r.type||e.name&&e.name===r.name||e.shortName&&e.shortName===r.shortName)&&(n=r);return n}i.RDNAttributesAsArray=function(t,e){for(var r,n,i,s=[],l=0;l<t.value.length;++l){r=t.value[l];for(var c=0;c<r.value.length;++c)i={},n=r.value[c],i.type=o.derToOid(n.value[0].value),i.value=n.value[1].value,i.valueTagClass=n.value[1].type,i.type in a&&(i.name=a[i.type],i.name in u&&(i.shortName=u[i.name])),e&&(e.update(i.type),e.update(i.value)),s.push(i)}return s},i.CRIAttributesAsArray=function(t){for(var e=[],r=0;r<t.length;++r)for(var n=t[r],s=o.derToOid(n.value[0].value),l=n.value[1].value,c=0;c<l.length;++c){var f={};if(f.type=s,f.value=l[c].value,f.valueTagClass=l[c].type,f.type in a&&(f.name=a[f.type],f.name in u&&(f.shortName=u[f.name])),f.type===a.extensionRequest){f.extensions=[];for(var p=0;p<f.value.length;++p)f.extensions.push(i.certificateExtensionFromAsn1(f.value[p]))}e.push(f)}return e};var d=function(t,e,r){var n={};if(t!==a["RSASSA-PSS"])return n;r&&(n={hash:{algorithmOid:a.sha1},mgf:{algorithmOid:a.mgf1,hash:{algorithmOid:a.sha1}},saltLength:20});var i={},s=[];if(!o.validate(e,f,i,s)){var u=new Error("Cannot read RSASSA-PSS parameter block.");throw u.errors=s,u}return void 0!==i.hashOid&&(n.hash=n.hash||{},n.hash.algorithmOid=o.derToOid(i.hashOid)),void 0!==i.maskGenOid&&(n.mgf=n.mgf||{},n.mgf.algorithmOid=o.derToOid(i.maskGenOid),n.mgf.hash=n.mgf.hash||{},n.mgf.hash.algorithmOid=o.derToOid(i.maskGenHashOid)),void 0!==i.saltLength&&(n.saltLength=i.saltLength.charCodeAt(0)),n},v=function(t){switch(a[t.signatureOid]){case"sha1WithRSAEncryption":case"sha1WithRSASignature":return n.md.sha1.create();case"md5WithRSAEncryption":return n.md.md5.create();case"sha256WithRSAEncryption":return n.md.sha256.create();case"sha384WithRSAEncryption":return n.md.sha384.create();case"sha512WithRSAEncryption":return n.md.sha512.create();case"RSASSA-PSS":return n.md.sha256.create();default:var e=new Error("Could not compute "+t.type+" digest. Unknown signature OID.");throw e.signatureOid=t.signatureOid,e}},m=function(t){var e,r=t.certificate;switch(r.signatureOid){case a.sha1WithRSAEncryption:case a.sha1WithRSASignature:break;case a["RSASSA-PSS"]:var o,i,s;if(void 0===(o=a[r.signatureParameters.mgf.hash.algorithmOid])||void 0===n.md[o])throw(s=new Error("Unsupported MGF hash function.")).oid=r.signatureParameters.mgf.hash.algorithmOid,s.name=o,s;if(void 0===(i=a[r.signatureParameters.mgf.algorithmOid])||void 0===n.mgf[i])throw(s=new Error("Unsupported MGF function.")).oid=r.signatureParameters.mgf.algorithmOid,s.name=i,s;if(i=n.mgf[i].create(n.md[o].create()),void 0===(o=a[r.signatureParameters.hash.algorithmOid])||void 0===n.md[o])throw(s=new Error("Unsupported RSASSA-PSS hash function.")).oid=r.signatureParameters.hash.algorithmOid,s.name=o,s;e=n.pss.create(n.md[o].create(),i,r.signatureParameters.saltLength)}return r.publicKey.verify(t.md.digest().getBytes(),t.signature,e)};function b(t){for(var e,r,i=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[]),a=t.attributes,s=0;s<a.length;++s){var u=(e=a[s]).value,l=o.Type.PRINTABLESTRING;"valueTagClass"in e&&(l=e.valueTagClass)===o.Type.UTF8&&(u=n.util.encodeUtf8(u)),r=o.create(o.Class.UNIVERSAL,o.Type.SET,!0,[o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(e.type).getBytes()),o.create(o.Class.UNIVERSAL,l,!1,u)])]),i.value.push(r)}return i}function g(t){for(var e,r=0;r<t.length;++r){if(void 0===(e=t[r]).name&&(e.type&&e.type in i.oids?e.name=i.oids[e.type]:e.shortName&&e.shortName in u&&(e.name=i.oids[u[e.shortName]])),void 0===e.type){if(!(e.name&&e.name in i.oids))throw(s=new Error("Attribute type not specified.")).attribute=e,s;e.type=i.oids[e.name]}if(void 0===e.shortName&&e.name&&e.name in u&&(e.shortName=u[e.name]),e.type===a.extensionRequest&&(e.valueConstructed=!0,e.valueTagClass=o.Type.SEQUENCE,!e.value&&e.extensions)){e.value=[];for(var n=0;n<e.extensions.length;++n)e.value.push(i.certificateExtensionToAsn1(S(e.extensions[n])))}var s;if(void 0===e.value)throw(s=new Error("Attribute value not specified.")).attribute=e,s}}function S(t,e){if(e=e||{},void 0===t.name&&t.id&&t.id in i.oids&&(t.name=i.oids[t.id]),void 0===t.id){if(!(t.name&&t.name in i.oids))throw(w=new Error("Extension ID not specified.")).extension=t,w;t.id=i.oids[t.name]}if(void 0!==t.value)return t;if("keyUsage"===t.name){var r=0,s=0,u=0;t.digitalSignature&&(s|=128,r=7),t.nonRepudiation&&(s|=64,r=6),t.keyEncipherment&&(s|=32,r=5),t.dataEncipherment&&(s|=16,r=4),t.keyAgreement&&(s|=8,r=3),t.keyCertSign&&(s|=4,r=2),t.cRLSign&&(s|=2,r=1),t.encipherOnly&&(s|=1,r=0),t.decipherOnly&&(u|=128,r=7);var l=String.fromCharCode(r);0!==u?l+=String.fromCharCode(s)+String.fromCharCode(u):0!==s&&(l+=String.fromCharCode(s)),t.value=o.create(o.Class.UNIVERSAL,o.Type.BITSTRING,!1,l)}else if("basicConstraints"===t.name)t.value=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[]),t.cA&&t.value.value.push(o.create(o.Class.UNIVERSAL,o.Type.BOOLEAN,!1,String.fromCharCode(255))),"pathLenConstraint"in t&&t.value.value.push(o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,o.integerToDer(t.pathLenConstraint).getBytes()));else if("extKeyUsage"===t.name){t.value=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[]);var c=t.value.value;for(var f in t)!0===t[f]&&(f in a?c.push(o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(a[f]).getBytes())):-1!==f.indexOf(".")&&c.push(o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(f).getBytes())))}else if("nsCertType"===t.name)r=0,s=0,t.client&&(s|=128,r=7),t.server&&(s|=64,r=6),t.email&&(s|=32,r=5),t.objsign&&(s|=16,r=4),t.reserved&&(s|=8,r=3),t.sslCA&&(s|=4,r=2),t.emailCA&&(s|=2,r=1),t.objCA&&(s|=1,r=0),l=String.fromCharCode(r),0!==s&&(l+=String.fromCharCode(s)),t.value=o.create(o.Class.UNIVERSAL,o.Type.BITSTRING,!1,l);else if("subjectAltName"===t.name||"issuerAltName"===t.name){t.value=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[]);for(var p=0;p<t.altNames.length;++p){if(l=(m=t.altNames[p]).value,7===m.type&&m.ip){if(null===(l=n.util.bytesFromIP(m.ip)))throw(w=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.')).extension=t,w}else 8===m.type&&(l=m.oid?o.oidToDer(o.oidToDer(m.oid)):o.oidToDer(l));t.value.value.push(o.create(o.Class.CONTEXT_SPECIFIC,m.type,!1,l))}}else if("nsComment"===t.name&&e.cert){if(!/^[\x00-\x7F]*$/.test(t.comment)||t.comment.length<1||t.comment.length>128)throw new Error('Invalid "nsComment" content.');t.value=o.create(o.Class.UNIVERSAL,o.Type.IA5STRING,!1,t.comment)}else if("subjectKeyIdentifier"===t.name&&e.cert){var h=e.cert.generateSubjectKeyIdentifier();t.subjectKeyIdentifier=h.toHex(),t.value=o.create(o.Class.UNIVERSAL,o.Type.OCTETSTRING,!1,h.getBytes())}else if("authorityKeyIdentifier"===t.name&&e.cert){if(t.value=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[]),c=t.value.value,t.keyIdentifier){var y=!0===t.keyIdentifier?e.cert.generateSubjectKeyIdentifier().getBytes():t.keyIdentifier;c.push(o.create(o.Class.CONTEXT_SPECIFIC,0,!1,y))}if(t.authorityCertIssuer){var d=[o.create(o.Class.CONTEXT_SPECIFIC,4,!0,[b(!0===t.authorityCertIssuer?e.cert.issuer:t.authorityCertIssuer)])];c.push(o.create(o.Class.CONTEXT_SPECIFIC,1,!0,d))}if(t.serialNumber){var v=n.util.hexToBytes(!0===t.serialNumber?e.cert.serialNumber:t.serialNumber);c.push(o.create(o.Class.CONTEXT_SPECIFIC,2,!1,v))}}else if("cRLDistributionPoints"===t.name){t.value=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[]),c=t.value.value;var m,g=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[]),S=o.create(o.Class.CONTEXT_SPECIFIC,0,!0,[]);for(p=0;p<t.altNames.length;++p){if(l=(m=t.altNames[p]).value,7===m.type&&m.ip){if(null===(l=n.util.bytesFromIP(m.ip)))throw(w=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.')).extension=t,w}else 8===m.type&&(l=m.oid?o.oidToDer(o.oidToDer(m.oid)):o.oidToDer(l));S.value.push(o.create(o.Class.CONTEXT_SPECIFIC,m.type,!1,l))}g.value.push(o.create(o.Class.CONTEXT_SPECIFIC,0,!0,[S])),c.push(g)}var w;if(void 0===t.value)throw(w=new Error("Extension value not specified.")).extension=t,w;return t}function w(t,e){switch(t){case a["RSASSA-PSS"]:var r=[];return void 0!==e.hash.algorithmOid&&r.push(o.create(o.Class.CONTEXT_SPECIFIC,0,!0,[o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(e.hash.algorithmOid).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.NULL,!1,"")])])),void 0!==e.mgf.algorithmOid&&r.push(o.create(o.Class.CONTEXT_SPECIFIC,1,!0,[o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(e.mgf.algorithmOid).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(e.mgf.hash.algorithmOid).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.NULL,!1,"")])])])),void 0!==e.saltLength&&r.push(o.create(o.Class.CONTEXT_SPECIFIC,2,!0,[o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,o.integerToDer(e.saltLength).getBytes())])),o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,r);default:return o.create(o.Class.UNIVERSAL,o.Type.NULL,!1,"")}}i.certificateFromPem=function(t,e,r){var a=n.pem.decode(t)[0];if("CERTIFICATE"!==a.type&&"X509 CERTIFICATE"!==a.type&&"TRUSTED CERTIFICATE"!==a.type){var s=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw s.headerType=a.type,s}if(a.procType&&"ENCRYPTED"===a.procType.type)throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var u=o.fromDer(a.body,r);return i.certificateFromAsn1(u,e)},i.certificateToPem=function(t,e){var r={type:"CERTIFICATE",body:o.toDer(i.certificateToAsn1(t)).getBytes()};return n.pem.encode(r,{maxline:e})},i.publicKeyFromPem=function(t){var e=n.pem.decode(t)[0];if("PUBLIC KEY"!==e.type&&"RSA PUBLIC KEY"!==e.type){var r=new Error('Could not convert public key from PEM; PEM header type is not "PUBLIC KEY" or "RSA PUBLIC KEY".');throw r.headerType=e.type,r}if(e.procType&&"ENCRYPTED"===e.procType.type)throw new Error("Could not convert public key from PEM; PEM is encrypted.");var a=o.fromDer(e.body);return i.publicKeyFromAsn1(a)},i.publicKeyToPem=function(t,e){var r={type:"PUBLIC KEY",body:o.toDer(i.publicKeyToAsn1(t)).getBytes()};return n.pem.encode(r,{maxline:e})},i.publicKeyToRSAPublicKeyPem=function(t,e){var r={type:"RSA PUBLIC KEY",body:o.toDer(i.publicKeyToRSAPublicKey(t)).getBytes()};return n.pem.encode(r,{maxline:e})},i.getPublicKeyFingerprint=function(t,e){var r,a=(e=e||{}).md||n.md.sha1.create();switch(e.type||"RSAPublicKey"){case"RSAPublicKey":r=o.toDer(i.publicKeyToRSAPublicKey(t)).getBytes();break;case"SubjectPublicKeyInfo":r=o.toDer(i.publicKeyToAsn1(t)).getBytes();break;default:throw new Error('Unknown fingerprint type "'+e.type+'".')}a.start(),a.update(r);var s=a.digest();if("hex"===e.encoding){var u=s.toHex();return e.delimiter?u.match(/.{2}/g).join(e.delimiter):u}if("binary"===e.encoding)return s.getBytes();if(e.encoding)throw new Error('Unknown encoding "'+e.encoding+'".');return s},i.certificationRequestFromPem=function(t,e,r){var a=n.pem.decode(t)[0];if("CERTIFICATE REQUEST"!==a.type){var s=new Error('Could not convert certification request from PEM; PEM header type is not "CERTIFICATE REQUEST".');throw s.headerType=a.type,s}if(a.procType&&"ENCRYPTED"===a.procType.type)throw new Error("Could not convert certification request from PEM; PEM is encrypted.");var u=o.fromDer(a.body,r);return i.certificationRequestFromAsn1(u,e)},i.certificationRequestToPem=function(t,e){var r={type:"CERTIFICATE REQUEST",body:o.toDer(i.certificationRequestToAsn1(t)).getBytes()};return n.pem.encode(r,{maxline:e})},i.createCertificate=function(){var t={version:2,serialNumber:"00",signatureOid:null,signature:null,siginfo:{}};return t.siginfo.algorithmOid=null,t.validity={},t.validity.notBefore=new Date,t.validity.notAfter=new Date,t.issuer={},t.issuer.getField=function(e){return y(t.issuer,e)},t.issuer.addField=function(e){g([e]),t.issuer.attributes.push(e)},t.issuer.attributes=[],t.issuer.hash=null,t.subject={},t.subject.getField=function(e){return y(t.subject,e)},t.subject.addField=function(e){g([e]),t.subject.attributes.push(e)},t.subject.attributes=[],t.subject.hash=null,t.extensions=[],t.publicKey=null,t.md=null,t.setSubject=function(e,r){g(e),t.subject.attributes=e,delete t.subject.uniqueId,r&&(t.subject.uniqueId=r),t.subject.hash=null},t.setIssuer=function(e,r){g(e),t.issuer.attributes=e,delete t.issuer.uniqueId,r&&(t.issuer.uniqueId=r),t.issuer.hash=null},t.setExtensions=function(e){for(var r=0;r<e.length;++r)S(e[r],{cert:t});t.extensions=e},t.getExtension=function(e){"string"==typeof e&&(e={name:e});for(var r,n=null,o=0;null===n&&o<t.extensions.length;++o)r=t.extensions[o],(e.id&&r.id===e.id||e.name&&r.name===e.name)&&(n=r);return n},t.sign=function(e,r){t.md=r||n.md.sha1.create();var s=a[t.md.algorithm+"WithRSAEncryption"];if(!s){var u=new Error("Could not compute certificate digest. Unknown message digest algorithm OID.");throw u.algorithm=t.md.algorithm,u}t.signatureOid=t.siginfo.algorithmOid=s,t.tbsCertificate=i.getTBSCertificate(t);var l=o.toDer(t.tbsCertificate);t.md.update(l.getBytes()),t.signature=e.sign(t.md)},t.verify=function(e){var r=!1;if(!t.issued(e)){var n=e.issuer,a=t.subject,s=new Error("The parent certificate did not issue the given child certificate; the child certificate's issuer does not match the parent's subject.");throw s.expectedIssuer=a.attributes,s.actualIssuer=n.attributes,s}var u=e.md;if(null===u){u=v({signatureOid:e.signatureOid,type:"certificate"});var l=e.tbsCertificate||i.getTBSCertificate(e),c=o.toDer(l);u.update(c.getBytes())}return null!==u&&(r=m({certificate:t,md:u,signature:e.signature})),r},t.isIssuer=function(e){var r=!1,n=t.issuer,o=e.subject;if(n.hash&&o.hash)r=n.hash===o.hash;else if(n.attributes.length===o.attributes.length){var i,a;r=!0;for(var s=0;r&&s<n.attributes.length;++s)i=n.attributes[s],a=o.attributes[s],i.type===a.type&&i.value===a.value||(r=!1)}return r},t.issued=function(e){return e.isIssuer(t)},t.generateSubjectKeyIdentifier=function(){return i.getPublicKeyFingerprint(t.publicKey,{type:"RSAPublicKey"})},t.verifySubjectKeyIdentifier=function(){for(var e=a.subjectKeyIdentifier,r=0;r<t.extensions.length;++r){var o=t.extensions[r];if(o.id===e){var i=t.generateSubjectKeyIdentifier().getBytes();return n.util.hexToBytes(o.subjectKeyIdentifier)===i}}return!1},t},i.certificateFromAsn1=function(t,e){var r={},a=[];if(!o.validate(t,c,r,a)){var s=new Error("Cannot read X.509 certificate. ASN.1 object is not an X509v3 Certificate.");throw s.errors=a,s}if(o.derToOid(r.publicKeyOid)!==i.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var u=i.createCertificate();u.version=r.certVersion?r.certVersion.charCodeAt(0):0;var l=n.util.createBuffer(r.certSerialNumber);u.serialNumber=l.toHex(),u.signatureOid=n.asn1.derToOid(r.certSignatureOid),u.signatureParameters=d(u.signatureOid,r.certSignatureParams,!0),u.siginfo.algorithmOid=n.asn1.derToOid(r.certinfoSignatureOid),u.siginfo.parameters=d(u.siginfo.algorithmOid,r.certinfoSignatureParams,!1),u.signature=r.certSignature;var f=[];if(void 0!==r.certValidity1UTCTime&&f.push(o.utcTimeToDate(r.certValidity1UTCTime)),void 0!==r.certValidity2GeneralizedTime&&f.push(o.generalizedTimeToDate(r.certValidity2GeneralizedTime)),void 0!==r.certValidity3UTCTime&&f.push(o.utcTimeToDate(r.certValidity3UTCTime)),void 0!==r.certValidity4GeneralizedTime&&f.push(o.generalizedTimeToDate(r.certValidity4GeneralizedTime)),f.length>2)throw new Error("Cannot read notBefore/notAfter validity times; more than two times were provided in the certificate.");if(f.length<2)throw new Error("Cannot read notBefore/notAfter validity times; they were not provided as either UTCTime or GeneralizedTime.");if(u.validity.notBefore=f[0],u.validity.notAfter=f[1],u.tbsCertificate=r.tbsCertificate,e){u.md=v({signatureOid:u.signatureOid,type:"certificate"});var p=o.toDer(u.tbsCertificate);u.md.update(p.getBytes())}var h=n.md.sha1.create(),m=o.toDer(r.certIssuer);h.update(m.getBytes()),u.issuer.getField=function(t){return y(u.issuer,t)},u.issuer.addField=function(t){g([t]),u.issuer.attributes.push(t)},u.issuer.attributes=i.RDNAttributesAsArray(r.certIssuer),r.certIssuerUniqueId&&(u.issuer.uniqueId=r.certIssuerUniqueId),u.issuer.hash=h.digest().toHex();var b=n.md.sha1.create(),S=o.toDer(r.certSubject);return b.update(S.getBytes()),u.subject.getField=function(t){return y(u.subject,t)},u.subject.addField=function(t){g([t]),u.subject.attributes.push(t)},u.subject.attributes=i.RDNAttributesAsArray(r.certSubject),r.certSubjectUniqueId&&(u.subject.uniqueId=r.certSubjectUniqueId),u.subject.hash=b.digest().toHex(),r.certExtensions?u.extensions=i.certificateExtensionsFromAsn1(r.certExtensions):u.extensions=[],u.publicKey=i.publicKeyFromAsn1(r.subjectPublicKeyInfo),u},i.certificateExtensionsFromAsn1=function(t){for(var e=[],r=0;r<t.value.length;++r)for(var n=t.value[r],o=0;o<n.value.length;++o)e.push(i.certificateExtensionFromAsn1(n.value[o]));return e},i.certificateExtensionFromAsn1=function(t){var e={};if(e.id=o.derToOid(t.value[0].value),e.critical=!1,t.value[1].type===o.Type.BOOLEAN?(e.critical=0!==t.value[1].value.charCodeAt(0),e.value=t.value[2].value):e.value=t.value[1].value,e.id in a)if(e.name=a[e.id],"keyUsage"===e.name){var r=0,i=0;(u=o.fromDer(e.value)).value.length>1&&(r=u.value.charCodeAt(1),i=u.value.length>2?u.value.charCodeAt(2):0),e.digitalSignature=128==(128&r),e.nonRepudiation=64==(64&r),e.keyEncipherment=32==(32&r),e.dataEncipherment=16==(16&r),e.keyAgreement=8==(8&r),e.keyCertSign=4==(4&r),e.cRLSign=2==(2&r),e.encipherOnly=1==(1&r),e.decipherOnly=128==(128&i)}else if("basicConstraints"===e.name){(u=o.fromDer(e.value)).value.length>0&&u.value[0].type===o.Type.BOOLEAN?e.cA=0!==u.value[0].value.charCodeAt(0):e.cA=!1;var s=null;u.value.length>0&&u.value[0].type===o.Type.INTEGER?s=u.value[0].value:u.value.length>1&&(s=u.value[1].value),null!==s&&(e.pathLenConstraint=o.derToInteger(s))}else if("extKeyUsage"===e.name)for(var u=o.fromDer(e.value),l=0;l<u.value.length;++l){var c=o.derToOid(u.value[l].value);c in a?e[a[c]]=!0:e[c]=!0}else if("nsCertType"===e.name)r=0,(u=o.fromDer(e.value)).value.length>1&&(r=u.value.charCodeAt(1)),e.client=128==(128&r),e.server=64==(64&r),e.email=32==(32&r),e.objsign=16==(16&r),e.reserved=8==(8&r),e.sslCA=4==(4&r),e.emailCA=2==(2&r),e.objCA=1==(1&r);else if("subjectAltName"===e.name||"issuerAltName"===e.name){var f;e.altNames=[],u=o.fromDer(e.value);for(var p=0;p<u.value.length;++p){var h={type:(f=u.value[p]).type,value:f.value};switch(e.altNames.push(h),f.type){case 1:case 2:case 6:break;case 7:h.ip=n.util.bytesToIP(f.value);break;case 8:h.oid=o.derToOid(f.value)}}}else"subjectKeyIdentifier"===e.name&&(u=o.fromDer(e.value),e.subjectKeyIdentifier=n.util.bytesToHex(u.value));return e},i.certificationRequestFromAsn1=function(t,e){var r={},a=[];if(!o.validate(t,h,r,a)){var s=new Error("Cannot read PKCS#10 certificate request. ASN.1 object is not a PKCS#10 CertificationRequest.");throw s.errors=a,s}if(o.derToOid(r.publicKeyOid)!==i.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var u=i.createCertificationRequest();if(u.version=r.csrVersion?r.csrVersion.charCodeAt(0):0,u.signatureOid=n.asn1.derToOid(r.csrSignatureOid),u.signatureParameters=d(u.signatureOid,r.csrSignatureParams,!0),u.siginfo.algorithmOid=n.asn1.derToOid(r.csrSignatureOid),u.siginfo.parameters=d(u.siginfo.algorithmOid,r.csrSignatureParams,!1),u.signature=r.csrSignature,u.certificationRequestInfo=r.certificationRequestInfo,e){u.md=v({signatureOid:u.signatureOid,type:"certification request"});var l=o.toDer(u.certificationRequestInfo);u.md.update(l.getBytes())}var c=n.md.sha1.create();return u.subject.getField=function(t){return y(u.subject,t)},u.subject.addField=function(t){g([t]),u.subject.attributes.push(t)},u.subject.attributes=i.RDNAttributesAsArray(r.certificationRequestInfoSubject,c),u.subject.hash=c.digest().toHex(),u.publicKey=i.publicKeyFromAsn1(r.subjectPublicKeyInfo),u.getAttribute=function(t){return y(u,t)},u.addAttribute=function(t){g([t]),u.attributes.push(t)},u.attributes=i.CRIAttributesAsArray(r.certificationRequestInfoAttributes||[]),u},i.createCertificationRequest=function(){var t={version:0,signatureOid:null,signature:null,siginfo:{}};return t.siginfo.algorithmOid=null,t.subject={},t.subject.getField=function(e){return y(t.subject,e)},t.subject.addField=function(e){g([e]),t.subject.attributes.push(e)},t.subject.attributes=[],t.subject.hash=null,t.publicKey=null,t.attributes=[],t.getAttribute=function(e){return y(t,e)},t.addAttribute=function(e){g([e]),t.attributes.push(e)},t.md=null,t.setSubject=function(e){g(e),t.subject.attributes=e,t.subject.hash=null},t.setAttributes=function(e){g(e),t.attributes=e},t.sign=function(e,r){t.md=r||n.md.sha1.create();var s=a[t.md.algorithm+"WithRSAEncryption"];if(!s){var u=new Error("Could not compute certification request digest. Unknown message digest algorithm OID.");throw u.algorithm=t.md.algorithm,u}t.signatureOid=t.siginfo.algorithmOid=s,t.certificationRequestInfo=i.getCertificationRequestInfo(t);var l=o.toDer(t.certificationRequestInfo);t.md.update(l.getBytes()),t.signature=e.sign(t.md)},t.verify=function(){var e=!1,r=t.md;if(null===r){r=v({signatureOid:t.signatureOid,type:"certification request"});var n=t.certificationRequestInfo||i.getCertificationRequestInfo(t),a=o.toDer(n);r.update(a.getBytes())}return null!==r&&(e=m({certificate:t,md:r,signature:t.signature})),e},t};var _=new Date("1950-01-01T00:00:00Z"),O=new Date("2050-01-01T00:00:00Z");function E(t){return t>=_&&t<O?o.create(o.Class.UNIVERSAL,o.Type.UTCTIME,!1,o.dateToUtcTime(t)):o.create(o.Class.UNIVERSAL,o.Type.GENERALIZEDTIME,!1,o.dateToGeneralizedTime(t))}i.getTBSCertificate=function(t){var e=E(t.validity.notBefore),r=E(t.validity.notAfter),a=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.CONTEXT_SPECIFIC,0,!0,[o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,o.integerToDer(t.version).getBytes())]),o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,n.util.hexToBytes(t.serialNumber)),o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(t.siginfo.algorithmOid).getBytes()),w(t.siginfo.algorithmOid,t.siginfo.parameters)]),b(t.issuer),o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[e,r]),b(t.subject),i.publicKeyToAsn1(t.publicKey)]);return t.issuer.uniqueId&&a.value.push(o.create(o.Class.CONTEXT_SPECIFIC,1,!0,[o.create(o.Class.UNIVERSAL,o.Type.BITSTRING,!1,String.fromCharCode(0)+t.issuer.uniqueId)])),t.subject.uniqueId&&a.value.push(o.create(o.Class.CONTEXT_SPECIFIC,2,!0,[o.create(o.Class.UNIVERSAL,o.Type.BITSTRING,!1,String.fromCharCode(0)+t.subject.uniqueId)])),t.extensions.length>0&&a.value.push(i.certificateExtensionsToAsn1(t.extensions)),a},i.getCertificationRequestInfo=function(t){return o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,o.integerToDer(t.version).getBytes()),b(t.subject),i.publicKeyToAsn1(t.publicKey),function(t){var e=o.create(o.Class.CONTEXT_SPECIFIC,0,!0,[]);if(0===t.attributes.length)return e;for(var r=t.attributes,i=0;i<r.length;++i){var a=r[i],s=a.value,u=o.Type.UTF8;"valueTagClass"in a&&(u=a.valueTagClass),u===o.Type.UTF8&&(s=n.util.encodeUtf8(s));var l=!1;"valueConstructed"in a&&(l=a.valueConstructed);var c=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(a.type).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.SET,!0,[o.create(o.Class.UNIVERSAL,u,l,s)])]);e.value.push(c)}return e}(t)])},i.distinguishedNameToAsn1=function(t){return b(t)},i.certificateToAsn1=function(t){var e=t.tbsCertificate||i.getTBSCertificate(t);return o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[e,o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(t.signatureOid).getBytes()),w(t.signatureOid,t.signatureParameters)]),o.create(o.Class.UNIVERSAL,o.Type.BITSTRING,!1,String.fromCharCode(0)+t.signature)])},i.certificateExtensionsToAsn1=function(t){var e=o.create(o.Class.CONTEXT_SPECIFIC,3,!0,[]),r=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[]);e.value.push(r);for(var n=0;n<t.length;++n)r.value.push(i.certificateExtensionToAsn1(t[n]));return e},i.certificateExtensionToAsn1=function(t){var e=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[]);e.value.push(o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(t.id).getBytes())),t.critical&&e.value.push(o.create(o.Class.UNIVERSAL,o.Type.BOOLEAN,!1,String.fromCharCode(255)));var r=t.value;return"string"!=typeof t.value&&(r=o.toDer(r).getBytes()),e.value.push(o.create(o.Class.UNIVERSAL,o.Type.OCTETSTRING,!1,r)),e},i.certificationRequestToAsn1=function(t){var e=t.certificationRequestInfo||i.getCertificationRequestInfo(t);return o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[e,o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(t.signatureOid).getBytes()),w(t.signatureOid,t.signatureParameters)]),o.create(o.Class.UNIVERSAL,o.Type.BITSTRING,!1,String.fromCharCode(0)+t.signature)])},i.createCaStore=function(t){var e={certs:{}};function r(t){return a(t),e.certs[t.hash]||null}function a(t){if(!t.hash){var e=n.md.sha1.create();t.attributes=i.RDNAttributesAsArray(b(t),e),t.hash=e.digest().toHex()}}if(e.getIssuer=function(t){return r(t.issuer)},e.addCertificate=function(t){if("string"==typeof t&&(t=n.pki.certificateFromPem(t)),a(t.subject),!e.hasCertificate(t))if(t.subject.hash in e.certs){var r=e.certs[t.subject.hash];n.util.isArray(r)||(r=[r]),r.push(t),e.certs[t.subject.hash]=r}else e.certs[t.subject.hash]=t},e.hasCertificate=function(t){"string"==typeof t&&(t=n.pki.certificateFromPem(t));var e=r(t.subject);if(!e)return!1;n.util.isArray(e)||(e=[e]);for(var a=o.toDer(i.certificateToAsn1(t)).getBytes(),s=0;s<e.length;++s)if(a===o.toDer(i.certificateToAsn1(e[s])).getBytes())return!0;return!1},e.listAllCertificates=function(){var t=[];for(var r in e.certs)if(e.certs.hasOwnProperty(r)){var o=e.certs[r];if(n.util.isArray(o))for(var i=0;i<o.length;++i)t.push(o[i]);else t.push(o)}return t},e.removeCertificate=function(t){var s;if("string"==typeof t&&(t=n.pki.certificateFromPem(t)),a(t.subject),!e.hasCertificate(t))return null;var u=r(t.subject);if(!n.util.isArray(u))return s=e.certs[t.subject.hash],delete e.certs[t.subject.hash],s;for(var l=o.toDer(i.certificateToAsn1(t)).getBytes(),c=0;c<u.length;++c)l===o.toDer(i.certificateToAsn1(u[c])).getBytes()&&(s=u[c],u.splice(c,1));return 0===u.length&&delete e.certs[t.subject.hash],s},t)for(var s=0;s<t.length;++s){var u=t[s];e.addCertificate(u)}return e},i.certificateError={bad_certificate:"forge.pki.BadCertificate",unsupported_certificate:"forge.pki.UnsupportedCertificate",certificate_revoked:"forge.pki.CertificateRevoked",certificate_expired:"forge.pki.CertificateExpired",certificate_unknown:"forge.pki.CertificateUnknown",unknown_ca:"forge.pki.UnknownCertificateAuthority"},i.verifyCertificateChain=function(t,e,r){"function"==typeof r&&(r={verify:r}),r=r||{};var o=(e=e.slice(0)).slice(0),a=r.validityCheckDate;void 0===a&&(a=new Date);var u=!0,l=null,c=0;do{var f=e.shift(),p=null,h=!1;if(a&&(a<f.validity.notBefore||a>f.validity.notAfter)&&(l={message:"Certificate is not valid yet or has expired.",error:i.certificateError.certificate_expired,notBefore:f.validity.notBefore,notAfter:f.validity.notAfter,now:a}),null===l){if(null===(p=e[0]||t.getIssuer(f))&&f.isIssuer(f)&&(h=!0,p=f),p){var y=p;n.util.isArray(y)||(y=[y]);for(var d=!1;!d&&y.length>0;){p=y.shift();try{d=p.verify(f)}catch(t){}}d||(l={message:"Certificate signature is invalid.",error:i.certificateError.bad_certificate})}null!==l||p&&!h||t.hasCertificate(f)||(l={message:"Certificate is not trusted.",error:i.certificateError.unknown_ca})}if(null===l&&p&&!f.isIssuer(p)&&(l={message:"Certificate issuer is invalid.",error:i.certificateError.bad_certificate}),null===l)for(var v={keyUsage:!0,basicConstraints:!0},m=0;null===l&&m<f.extensions.length;++m){var b=f.extensions[m];b.critical&&!(b.name in v)&&(l={message:"Certificate has an unsupported critical extension.",error:i.certificateError.unsupported_certificate})}if(null===l&&(!u||0===e.length&&(!p||h))){var g=f.getExtension("basicConstraints"),S=f.getExtension("keyUsage");null!==S&&(S.keyCertSign&&null!==g||(l={message:"Certificate keyUsage or basicConstraints conflict or indicate that the certificate is not a CA. If the certificate is the only one in the chain or isn't the first then the certificate must be a valid CA.",error:i.certificateError.bad_certificate})),null!==l||null===g||g.cA||(l={message:"Certificate basicConstraints indicates the certificate is not a CA.",error:i.certificateError.bad_certificate}),null===l&&null!==S&&"pathLenConstraint"in g&&c-1>g.pathLenConstraint&&(l={message:"Certificate basicConstraints pathLenConstraint violated.",error:i.certificateError.bad_certificate})}var w=null===l||l.error,_=r.verify?r.verify(w,c,o):w;if(!0!==_)throw!0===w&&(l={message:"The application rejected the certificate.",error:i.certificateError.bad_certificate}),(_||0===_)&&("object"!=s(_)||n.util.isArray(_)?"string"==typeof _&&(l.error=_):(_.message&&(l.message=_.message),_.error&&(l.error=_.error))),l;l=null,u=!1,++c}while(e.length>0);return!0}},function(t,e,r){var n=r(0);r(2),r(1),(t.exports=n.pss=n.pss||{}).create=function(t){3===arguments.length&&(t={md:arguments[0],mgf:arguments[1],saltLength:arguments[2]});var e,r=t.md,o=t.mgf,i=r.digestLength,a=t.salt||null;if("string"==typeof a&&(a=n.util.createBuffer(a)),"saltLength"in t)e=t.saltLength;else{if(null===a)throw new Error("Salt length not specified or specific salt not given.");e=a.length()}if(null!==a&&a.length()!==e)throw new Error("Given salt length does not match length of given salt.");var s=t.prng||n.random;return{encode:function(t,u){var l,c,f=u-1,p=Math.ceil(f/8),h=t.digest().getBytes();if(p<i+e+2)throw new Error("Message is too long to encrypt.");c=null===a?s.getBytesSync(e):a.bytes();var y=new n.util.ByteBuffer;y.fillWithByte(0,8),y.putBytes(h),y.putBytes(c),r.start(),r.update(y.getBytes());var d=r.digest().getBytes(),v=new n.util.ByteBuffer;v.fillWithByte(0,p-e-i-2),v.putByte(1),v.putBytes(c);var m=v.getBytes(),b=p-i-1,g=o.generate(d,b),S="";for(l=0;l<b;l++)S+=String.fromCharCode(m.charCodeAt(l)^g.charCodeAt(l));var w=65280>>8*p-f&255;return(S=String.fromCharCode(S.charCodeAt(0)&~w)+S.substr(1))+d+String.fromCharCode(188)},verify:function(t,a,s){var u,l=s-1,c=Math.ceil(l/8);if(a=a.substr(-c),c<i+e+2)throw new Error("Inconsistent parameters to PSS signature verification.");if(188!==a.charCodeAt(c-1))throw new Error("Encoded message does not end in 0xBC.");var f=c-i-1,p=a.substr(0,f),h=a.substr(f,i),y=65280>>8*c-l&255;if(0!=(p.charCodeAt(0)&y))throw new Error("Bits beyond keysize not zero as expected.");var d=o.generate(h,f),v="";for(u=0;u<f;u++)v+=String.fromCharCode(p.charCodeAt(u)^d.charCodeAt(u));v=String.fromCharCode(v.charCodeAt(0)&~y)+v.substr(1);var m=c-i-e-2;for(u=0;u<m;u++)if(0!==v.charCodeAt(u))throw new Error("Leftmost octets not zero as expected");if(1!==v.charCodeAt(m))throw new Error("Inconsistent PSS signature, 0x01 marker not found");var b=v.substr(-e),g=new n.util.ByteBuffer;return g.fillWithByte(0,8),g.putBytes(t),g.putBytes(b),r.start(),r.update(g.getBytes()),h===r.digest().getBytes()}}}},function(t,e,r){var n=r(0);r(1),n.cipher=n.cipher||{};var o=t.exports=n.cipher.modes=n.cipher.modes||{};function i(t,e){if("string"==typeof t&&(t=n.util.createBuffer(t)),n.util.isArray(t)&&t.length>4){var r=t;t=n.util.createBuffer();for(var o=0;o<r.length;++o)t.putByte(r[o])}if(t.length()<e)throw new Error("Invalid IV length; got "+t.length()+" bytes and expected "+e+" bytes.");if(!n.util.isArray(t)){var i=[],a=e/4;for(o=0;o<a;++o)i.push(t.getInt32());t=i}return t}function a(t){t[t.length-1]=t[t.length-1]+1&4294967295}function s(t){return[t/4294967296|0,4294967295&t]}o.ecb=function(t){t=t||{},this.name="ECB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)},o.ecb.prototype.start=function(t){},o.ecb.prototype.encrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32();for(this.cipher.encrypt(this._inBlock,this._outBlock),n=0;n<this._ints;++n)e.putInt32(this._outBlock[n])},o.ecb.prototype.decrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32();for(this.cipher.decrypt(this._inBlock,this._outBlock),n=0;n<this._ints;++n)e.putInt32(this._outBlock[n])},o.ecb.prototype.pad=function(t,e){var r=t.length()===this.blockSize?this.blockSize:this.blockSize-t.length();return t.fillWithByte(r,r),!0},o.ecb.prototype.unpad=function(t,e){if(e.overflow>0)return!1;var r=t.length(),n=t.at(r-1);return!(n>this.blockSize<<2||(t.truncate(n),0))},o.cbc=function(t){t=t||{},this.name="CBC",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)},o.cbc.prototype.start=function(t){if(null===t.iv){if(!this._prev)throw new Error("Invalid IV parameter.");this._iv=this._prev.slice(0)}else{if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=i(t.iv,this.blockSize),this._prev=this._iv.slice(0)}},o.cbc.prototype.encrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=this._prev[n]^t.getInt32();for(this.cipher.encrypt(this._inBlock,this._outBlock),n=0;n<this._ints;++n)e.putInt32(this._outBlock[n]);this._prev=this._outBlock},o.cbc.prototype.decrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32();for(this.cipher.decrypt(this._inBlock,this._outBlock),n=0;n<this._ints;++n)e.putInt32(this._prev[n]^this._outBlock[n]);this._prev=this._inBlock.slice(0)},o.cbc.prototype.pad=function(t,e){var r=t.length()===this.blockSize?this.blockSize:this.blockSize-t.length();return t.fillWithByte(r,r),!0},o.cbc.prototype.unpad=function(t,e){if(e.overflow>0)return!1;var r=t.length(),n=t.at(r-1);return!(n>this.blockSize<<2||(t.truncate(n),0))},o.cfb=function(t){t=t||{},this.name="CFB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialBlock=new Array(this._ints),this._partialOutput=n.util.createBuffer(),this._partialBytes=0},o.cfb.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=i(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0},o.cfb.prototype.encrypt=function(t,e,r){var n=t.length();if(0===n)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&n>=this.blockSize)for(var o=0;o<this._ints;++o)this._inBlock[o]=t.getInt32()^this._outBlock[o],e.putInt32(this._inBlock[o]);else{var i=(this.blockSize-n)%this.blockSize;for(i>0&&(i=this.blockSize-i),this._partialOutput.clear(),o=0;o<this._ints;++o)this._partialBlock[o]=t.getInt32()^this._outBlock[o],this._partialOutput.putInt32(this._partialBlock[o]);if(i>0)t.read-=this.blockSize;else for(o=0;o<this._ints;++o)this._inBlock[o]=this._partialBlock[o];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),i>0&&!r)return e.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=i,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}},o.cfb.prototype.decrypt=function(t,e,r){var n=t.length();if(0===n)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&n>=this.blockSize)for(var o=0;o<this._ints;++o)this._inBlock[o]=t.getInt32(),e.putInt32(this._inBlock[o]^this._outBlock[o]);else{var i=(this.blockSize-n)%this.blockSize;for(i>0&&(i=this.blockSize-i),this._partialOutput.clear(),o=0;o<this._ints;++o)this._partialBlock[o]=t.getInt32(),this._partialOutput.putInt32(this._partialBlock[o]^this._outBlock[o]);if(i>0)t.read-=this.blockSize;else for(o=0;o<this._ints;++o)this._inBlock[o]=this._partialBlock[o];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),i>0&&!r)return e.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=i,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}},o.ofb=function(t){t=t||{},this.name="OFB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=n.util.createBuffer(),this._partialBytes=0},o.ofb.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=i(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0},o.ofb.prototype.encrypt=function(t,e,r){var n=t.length();if(0===t.length())return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&n>=this.blockSize)for(var o=0;o<this._ints;++o)e.putInt32(t.getInt32()^this._outBlock[o]),this._inBlock[o]=this._outBlock[o];else{var i=(this.blockSize-n)%this.blockSize;for(i>0&&(i=this.blockSize-i),this._partialOutput.clear(),o=0;o<this._ints;++o)this._partialOutput.putInt32(t.getInt32()^this._outBlock[o]);if(i>0)t.read-=this.blockSize;else for(o=0;o<this._ints;++o)this._inBlock[o]=this._outBlock[o];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),i>0&&!r)return e.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=i,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}},o.ofb.prototype.decrypt=o.ofb.prototype.encrypt,o.ctr=function(t){t=t||{},this.name="CTR",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=n.util.createBuffer(),this._partialBytes=0},o.ctr.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=i(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0},o.ctr.prototype.encrypt=function(t,e,r){var n=t.length();if(0===n)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&n>=this.blockSize)for(var o=0;o<this._ints;++o)e.putInt32(t.getInt32()^this._outBlock[o]);else{var i=(this.blockSize-n)%this.blockSize;for(i>0&&(i=this.blockSize-i),this._partialOutput.clear(),o=0;o<this._ints;++o)this._partialOutput.putInt32(t.getInt32()^this._outBlock[o]);if(i>0&&(t.read-=this.blockSize),this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),i>0&&!r)return e.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=i,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}a(this._inBlock)},o.ctr.prototype.decrypt=o.ctr.prototype.encrypt,o.gcm=function(t){t=t||{},this.name="GCM",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints),this._partialOutput=n.util.createBuffer(),this._partialBytes=0,this._R=3774873600},o.gcm.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");var e,r=n.util.createBuffer(t.iv);if(this._cipherLength=0,e="additionalData"in t?n.util.createBuffer(t.additionalData):n.util.createBuffer(),this._tagLength="tagLength"in t?t.tagLength:128,this._tag=null,t.decrypt&&(this._tag=n.util.createBuffer(t.tag).getBytes(),this._tag.length!==this._tagLength/8))throw new Error("Authentication tag does not match tag length.");this._hashBlock=new Array(this._ints),this.tag=null,this._hashSubkey=new Array(this._ints),this.cipher.encrypt([0,0,0,0],this._hashSubkey),this.componentBits=4,this._m=this.generateHashTable(this._hashSubkey,this.componentBits);var o=r.length();if(12===o)this._j0=[r.getInt32(),r.getInt32(),r.getInt32(),1];else{for(this._j0=[0,0,0,0];r.length()>0;)this._j0=this.ghash(this._hashSubkey,this._j0,[r.getInt32(),r.getInt32(),r.getInt32(),r.getInt32()]);this._j0=this.ghash(this._hashSubkey,this._j0,[0,0].concat(s(8*o)))}this._inBlock=this._j0.slice(0),a(this._inBlock),this._partialBytes=0,e=n.util.createBuffer(e),this._aDataLength=s(8*e.length());var i=e.length()%this.blockSize;for(i&&e.fillWithByte(0,this.blockSize-i),this._s=[0,0,0,0];e.length()>0;)this._s=this.ghash(this._hashSubkey,this._s,[e.getInt32(),e.getInt32(),e.getInt32(),e.getInt32()])},o.gcm.prototype.encrypt=function(t,e,r){var n=t.length();if(0===n)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&n>=this.blockSize){for(var o=0;o<this._ints;++o)e.putInt32(this._outBlock[o]^=t.getInt32());this._cipherLength+=this.blockSize}else{var i=(this.blockSize-n)%this.blockSize;for(i>0&&(i=this.blockSize-i),this._partialOutput.clear(),o=0;o<this._ints;++o)this._partialOutput.putInt32(t.getInt32()^this._outBlock[o]);if(i<=0||r){if(r){var s=n%this.blockSize;this._cipherLength+=s,this._partialOutput.truncate(this.blockSize-s)}else this._cipherLength+=this.blockSize;for(o=0;o<this._ints;++o)this._outBlock[o]=this._partialOutput.getInt32();this._partialOutput.read-=this.blockSize}if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),i>0&&!r)return t.read-=this.blockSize,e.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=i,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}this._s=this.ghash(this._hashSubkey,this._s,this._outBlock),a(this._inBlock)},o.gcm.prototype.decrypt=function(t,e,r){var n=t.length();if(n<this.blockSize&&!(r&&n>0))return!0;this.cipher.encrypt(this._inBlock,this._outBlock),a(this._inBlock),this._hashBlock[0]=t.getInt32(),this._hashBlock[1]=t.getInt32(),this._hashBlock[2]=t.getInt32(),this._hashBlock[3]=t.getInt32(),this._s=this.ghash(this._hashSubkey,this._s,this._hashBlock);for(var o=0;o<this._ints;++o)e.putInt32(this._outBlock[o]^this._hashBlock[o]);n<this.blockSize?this._cipherLength+=n%this.blockSize:this._cipherLength+=this.blockSize},o.gcm.prototype.afterFinish=function(t,e){var r=!0;e.decrypt&&e.overflow&&t.truncate(this.blockSize-e.overflow),this.tag=n.util.createBuffer();var o=this._aDataLength.concat(s(8*this._cipherLength));this._s=this.ghash(this._hashSubkey,this._s,o);var i=[];this.cipher.encrypt(this._j0,i);for(var a=0;a<this._ints;++a)this.tag.putInt32(this._s[a]^i[a]);return this.tag.truncate(this.tag.length()%(this._tagLength/8)),e.decrypt&&this.tag.bytes()!==this._tag&&(r=!1),r},o.gcm.prototype.multiply=function(t,e){for(var r=[0,0,0,0],n=e.slice(0),o=0;o<128;++o)t[o/32|0]&1<<31-o%32&&(r[0]^=n[0],r[1]^=n[1],r[2]^=n[2],r[3]^=n[3]),this.pow(n,n);return r},o.gcm.prototype.pow=function(t,e){for(var r=1&t[3],n=3;n>0;--n)e[n]=t[n]>>>1|(1&t[n-1])<<31;e[0]=t[0]>>>1,r&&(e[0]^=this._R)},o.gcm.prototype.tableMultiply=function(t){for(var e=[0,0,0,0],r=0;r<32;++r){var n=t[r/8|0]>>>4*(7-r%8)&15,o=this._m[r][n];e[0]^=o[0],e[1]^=o[1],e[2]^=o[2],e[3]^=o[3]}return e},o.gcm.prototype.ghash=function(t,e,r){return e[0]^=r[0],e[1]^=r[1],e[2]^=r[2],e[3]^=r[3],this.tableMultiply(e)},o.gcm.prototype.generateHashTable=function(t,e){for(var r=8/e,n=4*r,o=16*r,i=new Array(o),a=0;a<o;++a){var s=[0,0,0,0],u=(n-1-a%n)*e;s[a/n|0]=1<<e-1<<u,i[a]=this.generateSubHashTable(this.multiply(s,t),e)}return i},o.gcm.prototype.generateSubHashTable=function(t,e){var r=1<<e,n=r>>>1,o=new Array(r);o[n]=t.slice(0);for(var i=n>>>1;i>0;)this.pow(o[2*i],o[i]=[]),i>>=1;for(i=2;i<n;){for(var a=1;a<i;++a){var s=o[i],u=o[a];o[i+a]=[s[0]^u[0],s[1]^u[1],s[2]^u[2],s[3]^u[3]]}i*=2}for(o[0]=[0,0,0,0],i=n+1;i<r;++i){var l=o[i^n];o[i]=[t[0]^l[0],t[1]^l[1],t[2]^l[2],t[3]^l[3]]}return o}},function(t,e,r){var n=r(0);r(3),r(8),r(14),r(7),r(21),r(2),r(9),r(1);var o=function(t,e,r,o){var i=n.util.createBuffer(),a=t.length>>1,s=a+(1&t.length),u=t.substr(0,s),l=t.substr(a,s),c=n.util.createBuffer(),f=n.hmac.create();r=e+r;var p=Math.ceil(o/16),h=Math.ceil(o/20);f.start("MD5",u);var y=n.util.createBuffer();c.putBytes(r);for(var d=0;d<p;++d)f.start(null,null),f.update(c.getBytes()),c.putBuffer(f.digest()),f.start(null,null),f.update(c.bytes()+r),y.putBuffer(f.digest());f.start("SHA1",l);var v=n.util.createBuffer();for(c.clear(),c.putBytes(r),d=0;d<h;++d)f.start(null,null),f.update(c.getBytes()),c.putBuffer(f.digest()),f.start(null,null),f.update(c.bytes()+r),v.putBuffer(f.digest());return i.putBytes(n.util.xorBytes(y.getBytes(),v.getBytes(),o)),i},i=function(t,e,r){var o=!1;try{var i=t.deflate(e.fragment.getBytes());e.fragment=n.util.createBuffer(i),e.length=i.length,o=!0}catch(t){}return o},a=function(t,e,r){var o=!1;try{var i=t.inflate(e.fragment.getBytes());e.fragment=n.util.createBuffer(i),e.length=i.length,o=!0}catch(t){}return o},u=function(t,e){var r=0;switch(e){case 1:r=t.getByte();break;case 2:r=t.getInt16();break;case 3:r=t.getInt24();break;case 4:r=t.getInt32()}return n.util.createBuffer(t.getBytes(r))},l=function(t,e,r){t.putInt(r.length(),e<<3),t.putBuffer(r)},c={Versions:{TLS_1_0:{major:3,minor:1},TLS_1_1:{major:3,minor:2},TLS_1_2:{major:3,minor:3}}};c.SupportedVersions=[c.Versions.TLS_1_1,c.Versions.TLS_1_0],c.Version=c.SupportedVersions[0],c.MaxFragment=15360,c.ConnectionEnd={server:0,client:1},c.PRFAlgorithm={tls_prf_sha256:0},c.BulkCipherAlgorithm={none:null,rc4:0,des3:1,aes:2},c.CipherType={stream:0,block:1,aead:2},c.MACAlgorithm={none:null,hmac_md5:0,hmac_sha1:1,hmac_sha256:2,hmac_sha384:3,hmac_sha512:4},c.CompressionMethod={none:0,deflate:1},c.ContentType={change_cipher_spec:20,alert:21,handshake:22,application_data:23,heartbeat:24},c.HandshakeType={hello_request:0,client_hello:1,server_hello:2,certificate:11,server_key_exchange:12,certificate_request:13,server_hello_done:14,certificate_verify:15,client_key_exchange:16,finished:20},c.Alert={},c.Alert.Level={warning:1,fatal:2},c.Alert.Description={close_notify:0,unexpected_message:10,bad_record_mac:20,decryption_failed:21,record_overflow:22,decompression_failure:30,handshake_failure:40,bad_certificate:42,unsupported_certificate:43,certificate_revoked:44,certificate_expired:45,certificate_unknown:46,illegal_parameter:47,unknown_ca:48,access_denied:49,decode_error:50,decrypt_error:51,export_restriction:60,protocol_version:70,insufficient_security:71,internal_error:80,user_canceled:90,no_renegotiation:100},c.HeartbeatMessageType={heartbeat_request:1,heartbeat_response:2},c.CipherSuites={},c.getCipherSuite=function(t){var e=null;for(var r in c.CipherSuites){var n=c.CipherSuites[r];if(n.id[0]===t.charCodeAt(0)&&n.id[1]===t.charCodeAt(1)){e=n;break}}return e},c.handleUnexpected=function(t,e){!t.open&&t.entity===c.ConnectionEnd.client||t.error(t,{message:"Unexpected message. Received TLS record out of order.",send:!0,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.unexpected_message}})},c.handleHelloRequest=function(t,e,r){!t.handshaking&&t.handshakes>0&&(c.queue(t,c.createAlert(t,{level:c.Alert.Level.warning,description:c.Alert.Description.no_renegotiation})),c.flush(t)),t.process()},c.parseHelloMessage=function(t,e,r){var o=null,i=t.entity===c.ConnectionEnd.client;if(r<38)t.error(t,{message:i?"Invalid ServerHello message. Message too short.":"Invalid ClientHello message. Message too short.",send:!0,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.illegal_parameter}});else{var a=e.fragment,s=a.length();if(o={version:{major:a.getByte(),minor:a.getByte()},random:n.util.createBuffer(a.getBytes(32)),session_id:u(a,1),extensions:[]},i?(o.cipher_suite=a.getBytes(2),o.compression_method=a.getByte()):(o.cipher_suites=u(a,2),o.compression_methods=u(a,1)),(s=r-(s-a.length()))>0){for(var l=u(a,2);l.length()>0;)o.extensions.push({type:[l.getByte(),l.getByte()],data:u(l,2)});if(!i)for(var f=0;f<o.extensions.length;++f){var p=o.extensions[f];if(0===p.type[0]&&0===p.type[1])for(var h=u(p.data,2);h.length()>0&&0===h.getByte();)t.session.extensions.server_name.serverNameList.push(u(h,2).getBytes())}}if(t.session.version&&(o.version.major!==t.session.version.major||o.version.minor!==t.session.version.minor))return t.error(t,{message:"TLS version change is disallowed during renegotiation.",send:!0,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.protocol_version}});if(i)t.session.cipherSuite=c.getCipherSuite(o.cipher_suite);else for(var y=n.util.createBuffer(o.cipher_suites.bytes());y.length()>0&&(t.session.cipherSuite=c.getCipherSuite(y.getBytes(2)),null===t.session.cipherSuite););if(null===t.session.cipherSuite)return t.error(t,{message:"No cipher suites in common.",send:!0,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.handshake_failure},cipherSuite:n.util.bytesToHex(o.cipher_suite)});t.session.compressionMethod=i?o.compression_method:c.CompressionMethod.none}return o},c.createSecurityParameters=function(t,e){var r=t.entity===c.ConnectionEnd.client,n=e.random.bytes(),o=r?t.session.sp.client_random:n,i=r?n:c.createRandom().getBytes();t.session.sp={entity:t.entity,prf_algorithm:c.PRFAlgorithm.tls_prf_sha256,bulk_cipher_algorithm:null,cipher_type:null,enc_key_length:null,block_length:null,fixed_iv_length:null,record_iv_length:null,mac_algorithm:null,mac_length:null,mac_key_length:null,compression_algorithm:t.session.compressionMethod,pre_master_secret:null,master_secret:null,client_random:o,server_random:i}},c.handleServerHello=function(t,e,r){var n=c.parseHelloMessage(t,e,r);if(!t.fail){if(!(n.version.minor<=t.version.minor))return t.error(t,{message:"Incompatible TLS version.",send:!0,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.protocol_version}});t.version.minor=n.version.minor,t.session.version=t.version;var o=n.session_id.bytes();o.length>0&&o===t.session.id?(t.expect=d,t.session.resuming=!0,t.session.sp.server_random=n.random.bytes()):(t.expect=f,t.session.resuming=!1,c.createSecurityParameters(t,n)),t.session.id=o,t.process()}},c.handleClientHello=function(t,e,r){var o=c.parseHelloMessage(t,e,r);if(!t.fail){var i=o.session_id.bytes(),a=null;if(t.sessionCache&&(null===(a=t.sessionCache.getSession(i))?i="":(a.version.major!==o.version.major||a.version.minor>o.version.minor)&&(a=null,i="")),0===i.length&&(i=n.random.getBytes(32)),t.session.id=i,t.session.clientHelloVersion=o.version,t.session.sp={},a)t.version=t.session.version=a.version,t.session.sp=a.sp;else{for(var s,u=1;u<c.SupportedVersions.length&&!((s=c.SupportedVersions[u]).minor<=o.version.minor);++u);t.version={major:s.major,minor:s.minor},t.session.version=t.version}null!==a?(t.expect=_,t.session.resuming=!0,t.session.sp.client_random=o.random.bytes()):(t.expect=!1!==t.verifyClient?g:S,t.session.resuming=!1,c.createSecurityParameters(t,o)),t.open=!0,c.queue(t,c.createRecord(t,{type:c.ContentType.handshake,data:c.createServerHello(t)})),t.session.resuming?(c.queue(t,c.createRecord(t,{type:c.ContentType.change_cipher_spec,data:c.createChangeCipherSpec()})),t.state.pending=c.createConnectionState(t),t.state.current.write=t.state.pending.write,c.queue(t,c.createRecord(t,{type:c.ContentType.handshake,data:c.createFinished(t)}))):(c.queue(t,c.createRecord(t,{type:c.ContentType.handshake,data:c.createCertificate(t)})),t.fail||(c.queue(t,c.createRecord(t,{type:c.ContentType.handshake,data:c.createServerKeyExchange(t)})),!1!==t.verifyClient&&c.queue(t,c.createRecord(t,{type:c.ContentType.handshake,data:c.createCertificateRequest(t)})),c.queue(t,c.createRecord(t,{type:c.ContentType.handshake,data:c.createServerHelloDone(t)})))),c.flush(t),t.process()}},c.handleCertificate=function(t,e,r){if(r<3)return t.error(t,{message:"Invalid Certificate message. Message too short.",send:!0,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.illegal_parameter}});var o,i,a=e.fragment,s={certificate_list:u(a,3)},l=[];try{for(;s.certificate_list.length()>0;)o=u(s.certificate_list,3),i=n.asn1.fromDer(o),o=n.pki.certificateFromAsn1(i,!0),l.push(o)}catch(e){return t.error(t,{message:"Could not parse certificate list.",cause:e,send:!0,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.bad_certificate}})}var f=t.entity===c.ConnectionEnd.client;!f&&!0!==t.verifyClient||0!==l.length?0===l.length?t.expect=f?p:S:(f?t.session.serverCertificate=l[0]:t.session.clientCertificate=l[0],c.verifyCertificateChain(t,l)&&(t.expect=f?p:S)):t.error(t,{message:f?"No server certificate provided.":"No client certificate provided.",send:!0,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.illegal_parameter}}),t.process()},c.handleServerKeyExchange=function(t,e,r){if(r>0)return t.error(t,{message:"Invalid key parameters. Only RSA is supported.",send:!0,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.unsupported_certificate}});t.expect=h,t.process()},c.handleClientKeyExchange=function(t,e,r){if(r<48)return t.error(t,{message:"Invalid key parameters. Only RSA is supported.",send:!0,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.unsupported_certificate}});var o=e.fragment,i={enc_pre_master_secret:u(o,2).getBytes()},a=null;if(t.getPrivateKey)try{a=t.getPrivateKey(t,t.session.serverCertificate),a=n.pki.privateKeyFromPem(a)}catch(e){t.error(t,{message:"Could not get private key.",cause:e,send:!0,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.internal_error}})}if(null===a)return t.error(t,{message:"No private key set.",send:!0,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.internal_error}});try{var s=t.session.sp;s.pre_master_secret=a.decrypt(i.enc_pre_master_secret);var l=t.session.clientHelloVersion;if(l.major!==s.pre_master_secret.charCodeAt(0)||l.minor!==s.pre_master_secret.charCodeAt(1))throw new Error("TLS version rollback attack detected.")}catch(t){s.pre_master_secret=n.random.getBytes(48)}t.expect=_,null!==t.session.clientCertificate&&(t.expect=w),t.process()},c.handleCertificateRequest=function(t,e,r){if(r<3)return t.error(t,{message:"Invalid CertificateRequest. Message too short.",send:!0,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.illegal_parameter}});var n=e.fragment,o={certificate_types:u(n,1),certificate_authorities:u(n,2)};t.session.certificateRequest=o,t.expect=y,t.process()},c.handleCertificateVerify=function(t,e,r){if(r<2)return t.error(t,{message:"Invalid CertificateVerify. Message too short.",send:!0,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.illegal_parameter}});var o=e.fragment;o.read-=4;var i=o.bytes();o.read+=4;var a={signature:u(o,2).getBytes()},s=n.util.createBuffer();s.putBuffer(t.session.md5.digest()),s.putBuffer(t.session.sha1.digest()),s=s.getBytes();try{if(!t.session.clientCertificate.publicKey.verify(s,a.signature,"NONE"))throw new Error("CertificateVerify signature does not match.");t.session.md5.update(i),t.session.sha1.update(i)}catch(e){return t.error(t,{message:"Bad signature in CertificateVerify.",send:!0,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.handshake_failure}})}t.expect=_,t.process()},c.handleServerHelloDone=function(t,e,r){if(r>0)return t.error(t,{message:"Invalid ServerHelloDone message. Invalid length.",send:!0,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.record_overflow}});if(null===t.serverCertificate){var o={message:"No server certificate provided. Not enough security.",send:!0,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.insufficient_security}},i=t.verify(t,o.alert.description,0,[]);if(!0!==i)return(i||0===i)&&("object"!=s(i)||n.util.isArray(i)?"number"==typeof i&&(o.alert.description=i):(i.message&&(o.message=i.message),i.alert&&(o.alert.description=i.alert))),t.error(t,o)}null!==t.session.certificateRequest&&(e=c.createRecord(t,{type:c.ContentType.handshake,data:c.createCertificate(t)}),c.queue(t,e)),e=c.createRecord(t,{type:c.ContentType.handshake,data:c.createClientKeyExchange(t)}),c.queue(t,e),t.expect=b;var a=function(t,e){null!==t.session.certificateRequest&&null!==t.session.clientCertificate&&c.queue(t,c.createRecord(t,{type:c.ContentType.handshake,data:c.createCertificateVerify(t,e)})),c.queue(t,c.createRecord(t,{type:c.ContentType.change_cipher_spec,data:c.createChangeCipherSpec()})),t.state.pending=c.createConnectionState(t),t.state.current.write=t.state.pending.write,c.queue(t,c.createRecord(t,{type:c.ContentType.handshake,data:c.createFinished(t)})),t.expect=d,c.flush(t),t.process()};if(null===t.session.certificateRequest||null===t.session.clientCertificate)return a(t,null);c.getClientSignature(t,a)},c.handleChangeCipherSpec=function(t,e){if(1!==e.fragment.getByte())return t.error(t,{message:"Invalid ChangeCipherSpec message received.",send:!0,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.illegal_parameter}});var r=t.entity===c.ConnectionEnd.client;(t.session.resuming&&r||!t.session.resuming&&!r)&&(t.state.pending=c.createConnectionState(t)),t.state.current.read=t.state.pending.read,(!t.session.resuming&&r||t.session.resuming&&!r)&&(t.state.pending=null),t.expect=r?v:O,t.process()},c.handleFinished=function(t,e,r){var i=e.fragment;i.read-=4;var a=i.bytes();i.read+=4;var s=e.fragment.getBytes();(i=n.util.createBuffer()).putBuffer(t.session.md5.digest()),i.putBuffer(t.session.sha1.digest());var u=t.entity===c.ConnectionEnd.client,l=u?"server finished":"client finished",f=t.session.sp;if((i=o(f.master_secret,l,i.getBytes(),12)).getBytes()!==s)return t.error(t,{message:"Invalid verify_data in Finished message.",send:!0,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.decrypt_error}});t.session.md5.update(a),t.session.sha1.update(a),(t.session.resuming&&u||!t.session.resuming&&!u)&&(c.queue(t,c.createRecord(t,{type:c.ContentType.change_cipher_spec,data:c.createChangeCipherSpec()})),t.state.current.write=t.state.pending.write,t.state.pending=null,c.queue(t,c.createRecord(t,{type:c.ContentType.handshake,data:c.createFinished(t)}))),t.expect=u?m:E,t.handshaking=!1,++t.handshakes,t.peerCertificate=u?t.session.serverCertificate:t.session.clientCertificate,c.flush(t),t.isConnected=!0,t.connected(t),t.process()},c.handleAlert=function(t,e){var r,n=e.fragment,o={level:n.getByte(),description:n.getByte()};switch(o.description){case c.Alert.Description.close_notify:r="Connection closed.";break;case c.Alert.Description.unexpected_message:r="Unexpected message.";break;case c.Alert.Description.bad_record_mac:r="Bad record MAC.";break;case c.Alert.Description.decryption_failed:r="Decryption failed.";break;case c.Alert.Description.record_overflow:r="Record overflow.";break;case c.Alert.Description.decompression_failure:r="Decompression failed.";break;case c.Alert.Description.handshake_failure:r="Handshake failure.";break;case c.Alert.Description.bad_certificate:r="Bad certificate.";break;case c.Alert.Description.unsupported_certificate:r="Unsupported certificate.";break;case c.Alert.Description.certificate_revoked:r="Certificate revoked.";break;case c.Alert.Description.certificate_expired:r="Certificate expired.";break;case c.Alert.Description.certificate_unknown:r="Certificate unknown.";break;case c.Alert.Description.illegal_parameter:r="Illegal parameter.";break;case c.Alert.Description.unknown_ca:r="Unknown certificate authority.";break;case c.Alert.Description.access_denied:r="Access denied.";break;case c.Alert.Description.decode_error:r="Decode error.";break;case c.Alert.Description.decrypt_error:r="Decrypt error.";break;case c.Alert.Description.export_restriction:r="Export restriction.";break;case c.Alert.Description.protocol_version:r="Unsupported protocol version.";break;case c.Alert.Description.insufficient_security:r="Insufficient security.";break;case c.Alert.Description.internal_error:r="Internal error.";break;case c.Alert.Description.user_canceled:r="User canceled.";break;case c.Alert.Description.no_renegotiation:r="Renegotiation not supported.";break;default:r="Unknown error."}if(o.description===c.Alert.Description.close_notify)return t.close();t.error(t,{message:r,send:!1,origin:t.entity===c.ConnectionEnd.client?"server":"client",alert:o}),t.process()},c.handleHandshake=function(t,e){var r=e.fragment,o=r.getByte(),i=r.getInt24();if(i>r.length())return t.fragmented=e,e.fragment=n.util.createBuffer(),r.read-=4,t.process();t.fragmented=null,r.read-=4;var a=r.bytes(i+4);r.read+=4,o in F[t.entity][t.expect]?(t.entity!==c.ConnectionEnd.server||t.open||t.fail||(t.handshaking=!0,t.session={version:null,extensions:{server_name:{serverNameList:[]}},cipherSuite:null,compressionMethod:null,serverCertificate:null,clientCertificate:null,md5:n.md.md5.create(),sha1:n.md.sha1.create()}),o!==c.HandshakeType.hello_request&&o!==c.HandshakeType.certificate_verify&&o!==c.HandshakeType.finished&&(t.session.md5.update(a),t.session.sha1.update(a)),F[t.entity][t.expect][o](t,e,i)):c.handleUnexpected(t,e)},c.handleApplicationData=function(t,e){t.data.putBuffer(e.fragment),t.dataReady(t),t.process()},c.handleHeartbeat=function(t,e){var r=e.fragment,o=r.getByte(),i=r.getInt16(),a=r.getBytes(i);if(o===c.HeartbeatMessageType.heartbeat_request){if(t.handshaking||i>a.length)return t.process();c.queue(t,c.createRecord(t,{type:c.ContentType.heartbeat,data:c.createHeartbeat(c.HeartbeatMessageType.heartbeat_response,a)})),c.flush(t)}else if(o===c.HeartbeatMessageType.heartbeat_response){if(a!==t.expectedHeartbeatPayload)return t.process();t.heartbeatReceived&&t.heartbeatReceived(t,n.util.createBuffer(a))}t.process()};var f=1,p=2,h=3,y=4,d=5,v=6,m=7,b=8,g=1,S=2,w=3,_=4,O=5,E=6,P=c.handleUnexpected,x=c.handleChangeCipherSpec,T=c.handleAlert,C=c.handleHandshake,k=c.handleApplicationData,A=c.handleHeartbeat,j=[];j[c.ConnectionEnd.client]=[[P,T,C,P,A],[P,T,C,P,A],[P,T,C,P,A],[P,T,C,P,A],[P,T,C,P,A],[x,T,P,P,A],[P,T,C,P,A],[P,T,C,k,A],[P,T,C,P,A]],j[c.ConnectionEnd.server]=[[P,T,C,P,A],[P,T,C,P,A],[P,T,C,P,A],[P,T,C,P,A],[x,T,P,P,A],[P,T,C,P,A],[P,T,C,k,A],[P,T,C,P,A]];var N=c.handleHelloRequest,I=c.handleServerHello,M=c.handleCertificate,R=c.handleServerKeyExchange,L=c.handleCertificateRequest,D=c.handleServerHelloDone,B=c.handleFinished,F=[];F[c.ConnectionEnd.client]=[[P,P,I,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P],[N,P,P,P,P,P,P,P,P,P,P,M,R,L,D,P,P,P,P,P,P],[N,P,P,P,P,P,P,P,P,P,P,P,R,L,D,P,P,P,P,P,P],[N,P,P,P,P,P,P,P,P,P,P,P,P,L,D,P,P,P,P,P,P],[N,P,P,P,P,P,P,P,P,P,P,P,P,P,D,P,P,P,P,P,P],[N,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P],[N,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,B],[N,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P],[N,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P]];var U=c.handleClientHello,G=c.handleClientKeyExchange,V=c.handleCertificateVerify;F[c.ConnectionEnd.server]=[[P,U,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P],[P,P,P,P,P,P,P,P,P,P,P,M,P,P,P,P,P,P,P,P,P],[P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,G,P,P,P,P],[P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,V,P,P,P,P,P],[P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P],[P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,B],[P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P],[P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P]],c.generateKeys=function(t,e){var r=o,n=e.client_random+e.server_random;t.session.resuming||(e.master_secret=r(e.pre_master_secret,"master secret",n,48).bytes(),e.pre_master_secret=null),n=e.server_random+e.client_random;var i=2*e.mac_key_length+2*e.enc_key_length,a=t.version.major===c.Versions.TLS_1_0.major&&t.version.minor===c.Versions.TLS_1_0.minor;a&&(i+=2*e.fixed_iv_length);var s=r(e.master_secret,"key expansion",n,i),u={client_write_MAC_key:s.getBytes(e.mac_key_length),server_write_MAC_key:s.getBytes(e.mac_key_length),client_write_key:s.getBytes(e.enc_key_length),server_write_key:s.getBytes(e.enc_key_length)};return a&&(u.client_write_IV=s.getBytes(e.fixed_iv_length),u.server_write_IV=s.getBytes(e.fixed_iv_length)),u},c.createConnectionState=function(t){var e=t.entity===c.ConnectionEnd.client,r=function(){var t={sequenceNumber:[0,0],macKey:null,macLength:0,macFunction:null,cipherState:null,cipherFunction:function(t){return!0},compressionState:null,compressFunction:function(t){return!0},updateSequenceNumber:function(){4294967295===t.sequenceNumber[1]?(t.sequenceNumber[1]=0,++t.sequenceNumber[0]):++t.sequenceNumber[1]}};return t},n={read:r(),write:r()};if(n.read.update=function(t,e){return n.read.cipherFunction(e,n.read)?n.read.compressFunction(t,e,n.read)||t.error(t,{message:"Could not decompress record.",send:!0,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.decompression_failure}}):t.error(t,{message:"Could not decrypt record or bad MAC.",send:!0,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.bad_record_mac}}),!t.fail},n.write.update=function(t,e){return n.write.compressFunction(t,e,n.write)?n.write.cipherFunction(e,n.write)||t.error(t,{message:"Could not encrypt record.",send:!1,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.internal_error}}):t.error(t,{message:"Could not compress record.",send:!1,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.internal_error}}),!t.fail},t.session){var o=t.session.sp;switch(t.session.cipherSuite.initSecurityParameters(o),o.keys=c.generateKeys(t,o),n.read.macKey=e?o.keys.server_write_MAC_key:o.keys.client_write_MAC_key,n.write.macKey=e?o.keys.client_write_MAC_key:o.keys.server_write_MAC_key,t.session.cipherSuite.initConnectionState(n,t,o),o.compression_algorithm){case c.CompressionMethod.none:break;case c.CompressionMethod.deflate:n.read.compressFunction=a,n.write.compressFunction=i;break;default:throw new Error("Unsupported compression algorithm.")}}return n},c.createRandom=function(){var t=new Date,e=+t+6e4*t.getTimezoneOffset(),r=n.util.createBuffer();return r.putInt32(e),r.putBytes(n.random.getBytes(28)),r},c.createRecord=function(t,e){return e.data?{type:e.type,version:{major:t.version.major,minor:t.version.minor},length:e.data.length(),fragment:e.data}:null},c.createAlert=function(t,e){var r=n.util.createBuffer();return r.putByte(e.level),r.putByte(e.description),c.createRecord(t,{type:c.ContentType.alert,data:r})},c.createClientHello=function(t){t.session.clientHelloVersion={major:t.version.major,minor:t.version.minor};for(var e=n.util.createBuffer(),r=0;r<t.cipherSuites.length;++r){var o=t.cipherSuites[r];e.putByte(o.id[0]),e.putByte(o.id[1])}var i=e.length(),a=n.util.createBuffer();a.putByte(c.CompressionMethod.none);var s=a.length(),u=n.util.createBuffer();if(t.virtualHost){var f=n.util.createBuffer();f.putByte(0),f.putByte(0);var p=n.util.createBuffer();p.putByte(0),l(p,2,n.util.createBuffer(t.virtualHost));var h=n.util.createBuffer();l(h,2,p),l(f,2,h),u.putBuffer(f)}var y=u.length();y>0&&(y+=2);var d=t.session.id,v=d.length+1+2+4+28+2+i+1+s+y,m=n.util.createBuffer();return m.putByte(c.HandshakeType.client_hello),m.putInt24(v),m.putByte(t.version.major),m.putByte(t.version.minor),m.putBytes(t.session.sp.client_random),l(m,1,n.util.createBuffer(d)),l(m,2,e),l(m,1,a),y>0&&l(m,2,u),m},c.createServerHello=function(t){var e=t.session.id,r=e.length+1+2+4+28+2+1,o=n.util.createBuffer();return o.putByte(c.HandshakeType.server_hello),o.putInt24(r),o.putByte(t.version.major),o.putByte(t.version.minor),o.putBytes(t.session.sp.server_random),l(o,1,n.util.createBuffer(e)),o.putByte(t.session.cipherSuite.id[0]),o.putByte(t.session.cipherSuite.id[1]),o.putByte(t.session.compressionMethod),o},c.createCertificate=function(t){var e,r=t.entity===c.ConnectionEnd.client,o=null;t.getCertificate&&(e=r?t.session.certificateRequest:t.session.extensions.server_name.serverNameList,o=t.getCertificate(t,e));var i=n.util.createBuffer();if(null!==o)try{n.util.isArray(o)||(o=[o]);for(var a=null,s=0;s<o.length;++s){var u=n.pem.decode(o[s])[0];if("CERTIFICATE"!==u.type&&"X509 CERTIFICATE"!==u.type&&"TRUSTED CERTIFICATE"!==u.type){var f=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw f.headerType=u.type,f}if(u.procType&&"ENCRYPTED"===u.procType.type)throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var p=n.util.createBuffer(u.body);null===a&&(a=n.asn1.fromDer(p.bytes(),!1));var h=n.util.createBuffer();l(h,3,p),i.putBuffer(h)}o=n.pki.certificateFromAsn1(a),r?t.session.clientCertificate=o:t.session.serverCertificate=o}catch(e){return t.error(t,{message:"Could not send certificate list.",cause:e,send:!0,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.bad_certificate}})}var y=3+i.length(),d=n.util.createBuffer();return d.putByte(c.HandshakeType.certificate),d.putInt24(y),l(d,3,i),d},c.createClientKeyExchange=function(t){var e=n.util.createBuffer();e.putByte(t.session.clientHelloVersion.major),e.putByte(t.session.clientHelloVersion.minor),e.putBytes(n.random.getBytes(46));var r=t.session.sp;r.pre_master_secret=e.getBytes();var o=(e=t.session.serverCertificate.publicKey.encrypt(r.pre_master_secret)).length+2,i=n.util.createBuffer();return i.putByte(c.HandshakeType.client_key_exchange),i.putInt24(o),i.putInt16(e.length),i.putBytes(e),i},c.createServerKeyExchange=function(t){return n.util.createBuffer()},c.getClientSignature=function(t,e){var r=n.util.createBuffer();r.putBuffer(t.session.md5.digest()),r.putBuffer(t.session.sha1.digest()),r=r.getBytes(),t.getSignature=t.getSignature||function(t,e,r){var o=null;if(t.getPrivateKey)try{o=t.getPrivateKey(t,t.session.clientCertificate),o=n.pki.privateKeyFromPem(o)}catch(e){t.error(t,{message:"Could not get private key.",cause:e,send:!0,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.internal_error}})}null===o?t.error(t,{message:"No private key set.",send:!0,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.internal_error}}):e=o.sign(e,null),r(t,e)},t.getSignature(t,r,e)},c.createCertificateVerify=function(t,e){var r=e.length+2,o=n.util.createBuffer();return o.putByte(c.HandshakeType.certificate_verify),o.putInt24(r),o.putInt16(e.length),o.putBytes(e),o},c.createCertificateRequest=function(t){var e=n.util.createBuffer();e.putByte(1);var r=n.util.createBuffer();for(var o in t.caStore.certs){var i=t.caStore.certs[o],a=n.pki.distinguishedNameToAsn1(i.subject),s=n.asn1.toDer(a);r.putInt16(s.length()),r.putBuffer(s)}var u=1+e.length()+2+r.length(),f=n.util.createBuffer();return f.putByte(c.HandshakeType.certificate_request),f.putInt24(u),l(f,1,e),l(f,2,r),f},c.createServerHelloDone=function(t){var e=n.util.createBuffer();return e.putByte(c.HandshakeType.server_hello_done),e.putInt24(0),e},c.createChangeCipherSpec=function(){var t=n.util.createBuffer();return t.putByte(1),t},c.createFinished=function(t){var e=n.util.createBuffer();e.putBuffer(t.session.md5.digest()),e.putBuffer(t.session.sha1.digest());var r=t.entity===c.ConnectionEnd.client,i=t.session.sp,a=r?"client finished":"server finished";e=o(i.master_secret,a,e.getBytes(),12);var s=n.util.createBuffer();return s.putByte(c.HandshakeType.finished),s.putInt24(e.length()),s.putBuffer(e),s},c.createHeartbeat=function(t,e,r){void 0===r&&(r=e.length);var o=n.util.createBuffer();o.putByte(t),o.putInt16(r),o.putBytes(e);var i=o.length(),a=Math.max(16,i-r-3);return o.putBytes(n.random.getBytes(a)),o},c.queue=function(t,e){if(e&&(0!==e.fragment.length()||e.type!==c.ContentType.handshake&&e.type!==c.ContentType.alert&&e.type!==c.ContentType.change_cipher_spec)){if(e.type===c.ContentType.handshake){var r=e.fragment.bytes();t.session.md5.update(r),t.session.sha1.update(r),r=null}var o;if(e.fragment.length()<=c.MaxFragment)o=[e];else{o=[];for(var i=e.fragment.bytes();i.length>c.MaxFragment;)o.push(c.createRecord(t,{type:e.type,data:n.util.createBuffer(i.slice(0,c.MaxFragment))})),i=i.slice(c.MaxFragment);i.length>0&&o.push(c.createRecord(t,{type:e.type,data:n.util.createBuffer(i)}))}for(var a=0;a<o.length&&!t.fail;++a){var s=o[a];t.state.current.write.update(t,s)&&t.records.push(s)}}},c.flush=function(t){for(var e=0;e<t.records.length;++e){var r=t.records[e];t.tlsData.putByte(r.type),t.tlsData.putByte(r.version.major),t.tlsData.putByte(r.version.minor),t.tlsData.putInt16(r.fragment.length()),t.tlsData.putBuffer(t.records[e].fragment)}return t.records=[],t.tlsDataReady(t)};var z=function(t){switch(t){case!0:return!0;case n.pki.certificateError.bad_certificate:return c.Alert.Description.bad_certificate;case n.pki.certificateError.unsupported_certificate:return c.Alert.Description.unsupported_certificate;case n.pki.certificateError.certificate_revoked:return c.Alert.Description.certificate_revoked;case n.pki.certificateError.certificate_expired:return c.Alert.Description.certificate_expired;case n.pki.certificateError.certificate_unknown:return c.Alert.Description.certificate_unknown;case n.pki.certificateError.unknown_ca:return c.Alert.Description.unknown_ca;default:return c.Alert.Description.bad_certificate}};for(var H in c.verifyCertificateChain=function(t,e){try{var r={};for(var o in t.verifyOptions)r[o]=t.verifyOptions[o];r.verify=function(e,r,o){z(e);var i=t.verify(t,e,r,o);if(!0!==i){if("object"==s(i)&&!n.util.isArray(i)){var a=new Error("The application rejected the certificate.");throw a.send=!0,a.alert={level:c.Alert.Level.fatal,description:c.Alert.Description.bad_certificate},i.message&&(a.message=i.message),i.alert&&(a.alert.description=i.alert),a}i!==e&&(i=function(t){switch(i){case!0:return!0;case c.Alert.Description.bad_certificate:return n.pki.certificateError.bad_certificate;case c.Alert.Description.unsupported_certificate:return n.pki.certificateError.unsupported_certificate;case c.Alert.Description.certificate_revoked:return n.pki.certificateError.certificate_revoked;case c.Alert.Description.certificate_expired:return n.pki.certificateError.certificate_expired;case c.Alert.Description.certificate_unknown:return n.pki.certificateError.certificate_unknown;case c.Alert.Description.unknown_ca:return n.pki.certificateError.unknown_ca;default:return n.pki.certificateError.bad_certificate}}())}return i},n.pki.verifyCertificateChain(t.caStore,e,r)}catch(e){var i=e;("object"!=s(i)||n.util.isArray(i))&&(i={send:!0,alert:{level:c.Alert.Level.fatal,description:z(e)}}),"send"in i||(i.send=!0),"alert"in i||(i.alert={level:c.Alert.Level.fatal,description:z(i.error)}),t.error(t,i)}return!t.fail},c.createSessionCache=function(t,e){var r=null;if(t&&t.getSession&&t.setSession&&t.order)r=t;else{for(var o in(r={}).cache=t||{},r.capacity=Math.max(e||100,1),r.order=[],t)r.order.length<=e?r.order.push(o):delete t[o];r.getSession=function(t){var e=null,o=null;if(t?o=n.util.bytesToHex(t):r.order.length>0&&(o=r.order[0]),null!==o&&o in r.cache)for(var i in e=r.cache[o],delete r.cache[o],r.order)if(r.order[i]===o){r.order.splice(i,1);break}return e},r.setSession=function(t,e){if(r.order.length===r.capacity){var o=r.order.shift();delete r.cache[o]}o=n.util.bytesToHex(t),r.order.push(o),r.cache[o]=e}}return r},c.createConnection=function(t){var e;e=t.caStore?n.util.isArray(t.caStore)?n.pki.createCaStore(t.caStore):t.caStore:n.pki.createCaStore();var r=t.cipherSuites||null;if(null===r)for(var o in r=[],c.CipherSuites)r.push(c.CipherSuites[o]);var i=t.server?c.ConnectionEnd.server:c.ConnectionEnd.client,a=t.sessionCache?c.createSessionCache(t.sessionCache):null,s={version:{major:c.Version.major,minor:c.Version.minor},entity:i,sessionId:t.sessionId,caStore:e,sessionCache:a,cipherSuites:r,connected:t.connected,virtualHost:t.virtualHost||null,verifyClient:t.verifyClient||!1,verify:t.verify||function(t,e,r,n){return e},verifyOptions:t.verifyOptions||{},getCertificate:t.getCertificate||null,getPrivateKey:t.getPrivateKey||null,getSignature:t.getSignature||null,input:n.util.createBuffer(),tlsData:n.util.createBuffer(),data:n.util.createBuffer(),tlsDataReady:t.tlsDataReady,dataReady:t.dataReady,heartbeatReceived:t.heartbeatReceived,closed:t.closed,error:function(e,r){r.origin=r.origin||(e.entity===c.ConnectionEnd.client?"client":"server"),r.send&&(c.queue(e,c.createAlert(e,r.alert)),c.flush(e));var n=!1!==r.fatal;n&&(e.fail=!0),t.error(e,r),n&&e.close(!1)},deflate:t.deflate||null,inflate:t.inflate||null,reset:function(t){s.version={major:c.Version.major,minor:c.Version.minor},s.record=null,s.session=null,s.peerCertificate=null,s.state={pending:null,current:null},s.expect=(s.entity,c.ConnectionEnd.client,0),s.fragmented=null,s.records=[],s.open=!1,s.handshakes=0,s.handshaking=!1,s.isConnected=!1,s.fail=!(t||void 0===t),s.input.clear(),s.tlsData.clear(),s.data.clear(),s.state.current=c.createConnectionState(s)}};return s.reset(),s.handshake=function(t){if(s.entity!==c.ConnectionEnd.client)s.error(s,{message:"Cannot initiate handshake as a server.",fatal:!1});else if(s.handshaking)s.error(s,{message:"Handshake already in progress.",fatal:!1});else{s.fail&&!s.open&&0===s.handshakes&&(s.fail=!1),s.handshaking=!0;var e=null;(t=t||"").length>0&&(s.sessionCache&&(e=s.sessionCache.getSession(t)),null===e&&(t="")),0===t.length&&s.sessionCache&&null!==(e=s.sessionCache.getSession())&&(t=e.id),s.session={id:t,version:null,cipherSuite:null,compressionMethod:null,serverCertificate:null,certificateRequest:null,clientCertificate:null,sp:{},md5:n.md.md5.create(),sha1:n.md.sha1.create()},e&&(s.version=e.version,s.session.sp=e.sp),s.session.sp.client_random=c.createRandom().getBytes(),s.open=!0,c.queue(s,c.createRecord(s,{type:c.ContentType.handshake,data:c.createClientHello(s)})),c.flush(s)}},s.process=function(t){var e=0;return t&&s.input.putBytes(t),s.fail||(null!==s.record&&s.record.ready&&s.record.fragment.isEmpty()&&(s.record=null),null===s.record&&(e=function(t){var e=0,r=t.input,o=r.length();if(o<5)e=5-o;else{t.record={type:r.getByte(),version:{major:r.getByte(),minor:r.getByte()},length:r.getInt16(),fragment:n.util.createBuffer(),ready:!1};var i=t.record.version.major===t.version.major;i&&t.session&&t.session.version&&(i=t.record.version.minor===t.version.minor),i||t.error(t,{message:"Incompatible TLS version.",send:!0,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.protocol_version}})}return e}(s)),s.fail||null===s.record||s.record.ready||(e=function(t){var e=0,r=t.input,n=r.length();return n<t.record.length?e=t.record.length-n:(t.record.fragment.putBytes(r.getBytes(t.record.length)),r.compact(),t.state.current.read.update(t,t.record)&&(null!==t.fragmented&&(t.fragmented.type===t.record.type?(t.fragmented.fragment.putBuffer(t.record.fragment),t.record=t.fragmented):t.error(t,{message:"Invalid fragmented record.",send:!0,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.unexpected_message}})),t.record.ready=!0)),e}(s)),!s.fail&&null!==s.record&&s.record.ready&&function(t,e){var r=e.type-c.ContentType.change_cipher_spec,n=j[t.entity][t.expect];r in n?n[r](t,e):c.handleUnexpected(t,e)}(s,s.record)),e},s.prepare=function(t){return c.queue(s,c.createRecord(s,{type:c.ContentType.application_data,data:n.util.createBuffer(t)})),c.flush(s)},s.prepareHeartbeatRequest=function(t,e){return t instanceof n.util.ByteBuffer&&(t=t.bytes()),void 0===e&&(e=t.length),s.expectedHeartbeatPayload=t,c.queue(s,c.createRecord(s,{type:c.ContentType.heartbeat,data:c.createHeartbeat(c.HeartbeatMessageType.heartbeat_request,t,e)})),c.flush(s)},s.close=function(t){if(!s.fail&&s.sessionCache&&s.session){var e={id:s.session.id,version:s.session.version,sp:s.session.sp};e.sp.keys=null,s.sessionCache.setSession(e.id,e)}s.open&&(s.open=!1,s.input.clear(),(s.isConnected||s.handshaking)&&(s.isConnected=s.handshaking=!1,c.queue(s,c.createAlert(s,{level:c.Alert.Level.warning,description:c.Alert.Description.close_notify})),c.flush(s)),s.closed(s)),s.reset(t)},s},t.exports=n.tls=n.tls||{},c)"function"!=typeof c[H]&&(n.tls[H]=c[H]);n.tls.prf_tls1=o,n.tls.hmac_sha1=function(t,e,r){var o=n.hmac.create();o.start("SHA1",t);var i=n.util.createBuffer();return i.putInt32(e[0]),i.putInt32(e[1]),i.putByte(r.type),i.putByte(r.version.major),i.putByte(r.version.minor),i.putInt16(r.length),i.putBytes(r.fragment.bytes()),o.update(i.getBytes()),o.digest().getBytes()},n.tls.createSessionCache=c.createSessionCache,n.tls.createConnection=c.createConnection},function(t,e,r){var n=r(0);r(3),r(6),r(22),r(7),r(15),r(28),r(18),r(11),r(1),r(17);var o=n.asn1,i=t.exports=n.pki=n.pki||{};i.pemToDer=function(t){var e=n.pem.decode(t)[0];if(e.procType&&"ENCRYPTED"===e.procType.type)throw new Error("Could not convert PEM to DER; PEM is encrypted.");return n.util.createBuffer(e.body)},i.privateKeyFromPem=function(t){var e=n.pem.decode(t)[0];if("PRIVATE KEY"!==e.type&&"RSA PRIVATE KEY"!==e.type){var r=new Error('Could not convert private key from PEM; PEM header type is not "PRIVATE KEY" or "RSA PRIVATE KEY".');throw r.headerType=e.type,r}if(e.procType&&"ENCRYPTED"===e.procType.type)throw new Error("Could not convert private key from PEM; PEM is encrypted.");var a=o.fromDer(e.body);return i.privateKeyFromAsn1(a)},i.privateKeyToPem=function(t,e){var r={type:"RSA PRIVATE KEY",body:o.toDer(i.privateKeyToAsn1(t)).getBytes()};return n.pem.encode(r,{maxline:e})},i.privateKeyInfoToPem=function(t,e){var r={type:"PRIVATE KEY",body:o.toDer(t).getBytes()};return n.pem.encode(r,{maxline:e})}},function(t,e,r){var n=r(0);if(r(5),r(3),r(10),r(4),r(6),r(15),r(7),r(2),r(25),r(11),r(1),void 0===o)var o=n.jsbn.BigInteger;var i=n.asn1,a=n.pki=n.pki||{};t.exports=a.pbe=n.pbe=n.pbe||{};var s=a.oids,u={name:"EncryptedPrivateKeyInfo",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedPrivateKeyInfo.encryptionAlgorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"encryptionOid"},{name:"AlgorithmIdentifier.parameters",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,captureAsn1:"encryptionParams"}]},{name:"EncryptedPrivateKeyInfo.encryptedData",tagClass:i.Class.UNIVERSAL,type:i.Type.OCTETSTRING,constructed:!1,capture:"encryptedData"}]},l={name:"PBES2Algorithms",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc.oid",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"kdfOid"},{name:"PBES2Algorithms.params",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.params.salt",tagClass:i.Class.UNIVERSAL,type:i.Type.OCTETSTRING,constructed:!1,capture:"kdfSalt"},{name:"PBES2Algorithms.params.iterationCount",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"kdfIterationCount"},{name:"PBES2Algorithms.params.keyLength",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,optional:!0,capture:"keyLength"},{name:"PBES2Algorithms.params.prf",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,optional:!0,value:[{name:"PBES2Algorithms.params.prf.algorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"prfOid"}]}]}]},{name:"PBES2Algorithms.encryptionScheme",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.encryptionScheme.oid",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"encOid"},{name:"PBES2Algorithms.encryptionScheme.iv",tagClass:i.Class.UNIVERSAL,type:i.Type.OCTETSTRING,constructed:!1,capture:"encIv"}]}]},c={name:"pkcs-12PbeParams",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"pkcs-12PbeParams.salt",tagClass:i.Class.UNIVERSAL,type:i.Type.OCTETSTRING,constructed:!1,capture:"salt"},{name:"pkcs-12PbeParams.iterations",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"iterations"}]};function f(t,e){return t.start().update(e).digest().getBytes()}function p(t){var e;if(t){if(!(e=a.oids[i.derToOid(t)])){var r=new Error("Unsupported PRF OID.");throw r.oid=t,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}}else e="hmacWithSHA1";return h(e)}function h(t){var e=n.md;switch(t){case"hmacWithSHA224":e=n.md.sha512;case"hmacWithSHA1":case"hmacWithSHA256":case"hmacWithSHA384":case"hmacWithSHA512":t=t.substr(8).toLowerCase();break;default:var r=new Error("Unsupported PRF algorithm.");throw r.algorithm=t,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}if(!(e&&t in e))throw new Error("Unknown hash algorithm: "+t);return e[t].create()}a.encryptPrivateKeyInfo=function(t,e,r){(r=r||{}).saltSize=r.saltSize||8,r.count=r.count||2048,r.algorithm=r.algorithm||"aes128",r.prfAlgorithm=r.prfAlgorithm||"sha1";var o,u,l,c=n.random.getBytesSync(r.saltSize),f=r.count,p=i.integerToDer(f);if(0===r.algorithm.indexOf("aes")||"des"===r.algorithm){var y,d,v;switch(r.algorithm){case"aes128":o=16,y=16,d=s["aes128-CBC"],v=n.aes.createEncryptionCipher;break;case"aes192":o=24,y=16,d=s["aes192-CBC"],v=n.aes.createEncryptionCipher;break;case"aes256":o=32,y=16,d=s["aes256-CBC"],v=n.aes.createEncryptionCipher;break;case"des":o=8,y=8,d=s.desCBC,v=n.des.createEncryptionCipher;break;default:throw(_=new Error("Cannot encrypt private key. Unknown encryption algorithm.")).algorithm=r.algorithm,_}var m="hmacWith"+r.prfAlgorithm.toUpperCase(),b=h(m),g=n.pkcs5.pbkdf2(e,c,f,o,b),S=n.random.getBytesSync(y);(O=v(g)).start(S),O.update(i.toDer(t)),O.finish(),l=O.output.getBytes();var w=function(t,e,r,o){var s=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,t),i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,e.getBytes())]);return"hmacWithSHA1"!==o&&s.value.push(i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,n.util.hexToBytes(r.toString(16))),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(a.oids[o]).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.NULL,!1,"")])),s}(c,p,o,m);u=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(s.pkcs5PBES2).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(s.pkcs5PBKDF2).getBytes()),w]),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(d).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,S)])])])}else{var _;if("3des"!==r.algorithm)throw(_=new Error("Cannot encrypt private key. Unknown encryption algorithm.")).algorithm=r.algorithm,_;o=24;var O,E=new n.util.ByteBuffer(c);g=a.pbe.generatePkcs12Key(e,E,1,f,o),S=a.pbe.generatePkcs12Key(e,E,2,f,o),(O=n.des.createEncryptionCipher(g)).start(S),O.update(i.toDer(t)),O.finish(),l=O.output.getBytes(),u=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(s["pbeWithSHAAnd3-KeyTripleDES-CBC"]).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,c),i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,p.getBytes())])])}return i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[u,i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,l)])},a.decryptPrivateKeyInfo=function(t,e){var r=null,o={},s=[];if(!i.validate(t,u,o,s)){var l=new Error("Cannot read encrypted private key. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw l.errors=s,l}var c=i.derToOid(o.encryptionOid),f=a.pbe.getCipher(c,o.encryptionParams,e),p=n.util.createBuffer(o.encryptedData);return f.update(p),f.finish()&&(r=i.fromDer(f.output)),r},a.encryptedPrivateKeyToPem=function(t,e){var r={type:"ENCRYPTED PRIVATE KEY",body:i.toDer(t).getBytes()};return n.pem.encode(r,{maxline:e})},a.encryptedPrivateKeyFromPem=function(t){var e=n.pem.decode(t)[0];if("ENCRYPTED PRIVATE KEY"!==e.type){var r=new Error('Could not convert encrypted private key from PEM; PEM header type is "ENCRYPTED PRIVATE KEY".');throw r.headerType=e.type,r}if(e.procType&&"ENCRYPTED"===e.procType.type)throw new Error("Could not convert encrypted private key from PEM; PEM is encrypted.");return i.fromDer(e.body)},a.encryptRsaPrivateKey=function(t,e,r){if(!(r=r||{}).legacy){var o=a.wrapRsaPrivateKey(a.privateKeyToAsn1(t));return o=a.encryptPrivateKeyInfo(o,e,r),a.encryptedPrivateKeyToPem(o)}var s,u,l,c;switch(r.algorithm){case"aes128":s="AES-128-CBC",l=16,u=n.random.getBytesSync(16),c=n.aes.createEncryptionCipher;break;case"aes192":s="AES-192-CBC",l=24,u=n.random.getBytesSync(16),c=n.aes.createEncryptionCipher;break;case"aes256":s="AES-256-CBC",l=32,u=n.random.getBytesSync(16),c=n.aes.createEncryptionCipher;break;case"3des":s="DES-EDE3-CBC",l=24,u=n.random.getBytesSync(8),c=n.des.createEncryptionCipher;break;case"des":s="DES-CBC",l=8,u=n.random.getBytesSync(8),c=n.des.createEncryptionCipher;break;default:var f=new Error('Could not encrypt RSA private key; unsupported encryption algorithm "'+r.algorithm+'".');throw f.algorithm=r.algorithm,f}var p=c(n.pbe.opensslDeriveBytes(e,u.substr(0,8),l));p.start(u),p.update(i.toDer(a.privateKeyToAsn1(t))),p.finish();var h={type:"RSA PRIVATE KEY",procType:{version:"4",type:"ENCRYPTED"},dekInfo:{algorithm:s,parameters:n.util.bytesToHex(u).toUpperCase()},body:p.output.getBytes()};return n.pem.encode(h)},a.decryptRsaPrivateKey=function(t,e){var r=null,o=n.pem.decode(t)[0];if("ENCRYPTED PRIVATE KEY"!==o.type&&"PRIVATE KEY"!==o.type&&"RSA PRIVATE KEY"!==o.type)throw(l=new Error('Could not convert private key from PEM; PEM header type is not "ENCRYPTED PRIVATE KEY", "PRIVATE KEY", or "RSA PRIVATE KEY".')).headerType=l,l;if(o.procType&&"ENCRYPTED"===o.procType.type){var s,u;switch(o.dekInfo.algorithm){case"DES-CBC":s=8,u=n.des.createDecryptionCipher;break;case"DES-EDE3-CBC":s=24,u=n.des.createDecryptionCipher;break;case"AES-128-CBC":s=16,u=n.aes.createDecryptionCipher;break;case"AES-192-CBC":s=24,u=n.aes.createDecryptionCipher;break;case"AES-256-CBC":s=32,u=n.aes.createDecryptionCipher;break;case"RC2-40-CBC":s=5,u=function(t){return n.rc2.createDecryptionCipher(t,40)};break;case"RC2-64-CBC":s=8,u=function(t){return n.rc2.createDecryptionCipher(t,64)};break;case"RC2-128-CBC":s=16,u=function(t){return n.rc2.createDecryptionCipher(t,128)};break;default:var l;throw(l=new Error('Could not decrypt private key; unsupported encryption algorithm "'+o.dekInfo.algorithm+'".')).algorithm=o.dekInfo.algorithm,l}var c=n.util.hexToBytes(o.dekInfo.parameters),f=u(n.pbe.opensslDeriveBytes(e,c.substr(0,8),s));if(f.start(c),f.update(n.util.createBuffer(o.body)),!f.finish())return r;r=f.output.getBytes()}else r=o.body;return null!==(r="ENCRYPTED PRIVATE KEY"===o.type?a.decryptPrivateKeyInfo(i.fromDer(r),e):i.fromDer(r))&&(r=a.privateKeyFromAsn1(r)),r},a.pbe.generatePkcs12Key=function(t,e,r,o,i,a){var s,u;if(null==a){if(!("sha1"in n.md))throw new Error('"sha1" hash algorithm unavailable.');a=n.md.sha1.create()}var l=a.digestLength,c=a.blockLength,f=new n.util.ByteBuffer,p=new n.util.ByteBuffer;if(null!=t){for(u=0;u<t.length;u++)p.putInt16(t.charCodeAt(u));p.putInt16(0)}var h=p.length(),y=e.length(),d=new n.util.ByteBuffer;d.fillWithByte(r,c);var v=c*Math.ceil(y/c),m=new n.util.ByteBuffer;for(u=0;u<v;u++)m.putByte(e.at(u%y));var b=c*Math.ceil(h/c),g=new n.util.ByteBuffer;for(u=0;u<b;u++)g.putByte(p.at(u%h));var S=m;S.putBuffer(g);for(var w=Math.ceil(i/l),_=1;_<=w;_++){var O=new n.util.ByteBuffer;O.putBytes(d.bytes()),O.putBytes(S.bytes());for(var E=0;E<o;E++)a.start(),a.update(O.getBytes()),O=a.digest();var P=new n.util.ByteBuffer;for(u=0;u<c;u++)P.putByte(O.at(u%l));var x=Math.ceil(y/c)+Math.ceil(h/c),T=new n.util.ByteBuffer;for(s=0;s<x;s++){var C=new n.util.ByteBuffer(S.getBytes(c)),k=511;for(u=P.length()-1;u>=0;u--)k>>=8,k+=P.at(u)+C.at(u),C.setAt(u,255&k);T.putBuffer(C)}S=T,f.putBuffer(O)}return f.truncate(f.length()-i),f},a.pbe.getCipher=function(t,e,r){switch(t){case a.oids.pkcs5PBES2:return a.pbe.getCipherForPBES2(t,e,r);case a.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:case a.oids["pbewithSHAAnd40BitRC2-CBC"]:return a.pbe.getCipherForPKCS12PBE(t,e,r);default:var n=new Error("Cannot read encrypted PBE data block. Unsupported OID.");throw n.oid=t,n.supportedOids=["pkcs5PBES2","pbeWithSHAAnd3-KeyTripleDES-CBC","pbewithSHAAnd40BitRC2-CBC"],n}},a.pbe.getCipherForPBES2=function(t,e,r){var o,s={},u=[];if(!i.validate(e,l,s,u))throw(o=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.")).errors=u,o;if((t=i.derToOid(s.kdfOid))!==a.oids.pkcs5PBKDF2)throw(o=new Error("Cannot read encrypted private key. Unsupported key derivation function OID.")).oid=t,o.supportedOids=["pkcs5PBKDF2"],o;if((t=i.derToOid(s.encOid))!==a.oids["aes128-CBC"]&&t!==a.oids["aes192-CBC"]&&t!==a.oids["aes256-CBC"]&&t!==a.oids["des-EDE3-CBC"]&&t!==a.oids.desCBC)throw(o=new Error("Cannot read encrypted private key. Unsupported encryption scheme OID.")).oid=t,o.supportedOids=["aes128-CBC","aes192-CBC","aes256-CBC","des-EDE3-CBC","desCBC"],o;var c,f,h=s.kdfSalt,y=n.util.createBuffer(s.kdfIterationCount);switch(y=y.getInt(y.length()<<3),a.oids[t]){case"aes128-CBC":c=16,f=n.aes.createDecryptionCipher;break;case"aes192-CBC":c=24,f=n.aes.createDecryptionCipher;break;case"aes256-CBC":c=32,f=n.aes.createDecryptionCipher;break;case"des-EDE3-CBC":c=24,f=n.des.createDecryptionCipher;break;case"desCBC":c=8,f=n.des.createDecryptionCipher}var d=p(s.prfOid),v=n.pkcs5.pbkdf2(r,h,y,c,d),m=s.encIv,b=f(v);return b.start(m),b},a.pbe.getCipherForPKCS12PBE=function(t,e,r){var o={},s=[];if(!i.validate(e,c,o,s))throw(d=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.")).errors=s,d;var u,l,f,h=n.util.createBuffer(o.salt),y=n.util.createBuffer(o.iterations);switch(y=y.getInt(y.length()<<3),t){case a.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:u=24,l=8,f=n.des.startDecrypting;break;case a.oids["pbewithSHAAnd40BitRC2-CBC"]:u=5,l=8,f=function(t,e){var r=n.rc2.createDecryptionCipher(t,40);return r.start(e,null),r};break;default:var d;throw(d=new Error("Cannot read PKCS #12 PBE data block. Unsupported OID.")).oid=t,d}var v=p(o.prfOid),m=a.pbe.generatePkcs12Key(r,h,1,y,u,v);return v.start(),f(m,a.pbe.generatePkcs12Key(r,h,2,y,l,v))},a.pbe.opensslDeriveBytes=function(t,e,r,o){if(null==o){if(!("md5"in n.md))throw new Error('"md5" hash algorithm unavailable.');o=n.md.md5.create()}null===e&&(e="");for(var i=[f(o,t+e)],a=16,s=1;a<r;++s,a+=16)i.push(f(o,i[s-1]+t+e));return i.join("").substr(0,r)}},function(t,e,r){var n=r(0);r(4),r(1);var o=t.exports=n.sha256=n.sha256||{};n.md.sha256=n.md.algorithms.sha256=o,o.create=function(){a||(i=String.fromCharCode(128),i+=n.util.fillString(String.fromCharCode(0),64),s=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],a=!0);var t=null,e=n.util.createBuffer(),r=new Array(64),o={algorithm:"sha256",blockLength:64,digestLength:32,messageLength:0,fullMessageLength:null,messageLengthSize:8,start:function(){o.messageLength=0,o.fullMessageLength=o.messageLength64=[];for(var r=o.messageLengthSize/4,i=0;i<r;++i)o.fullMessageLength.push(0);return e=n.util.createBuffer(),t={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225},o}};return o.start(),o.update=function(i,a){"utf8"===a&&(i=n.util.encodeUtf8(i));var s=i.length;o.messageLength+=s,s=[s/4294967296>>>0,s>>>0];for(var l=o.fullMessageLength.length-1;l>=0;--l)o.fullMessageLength[l]+=s[1],s[1]=s[0]+(o.fullMessageLength[l]/4294967296>>>0),o.fullMessageLength[l]=o.fullMessageLength[l]>>>0,s[0]=s[1]/4294967296>>>0;return e.putBytes(i),u(t,r,e),(e.read>2048||0===e.length())&&e.compact(),o},o.digest=function(){var a=n.util.createBuffer();a.putBytes(e.bytes());var s,l=o.fullMessageLength[o.fullMessageLength.length-1]+o.messageLengthSize&o.blockLength-1;a.putBytes(i.substr(0,o.blockLength-l));for(var c=8*o.fullMessageLength[0],f=0;f<o.fullMessageLength.length-1;++f)c+=(s=8*o.fullMessageLength[f+1])/4294967296>>>0,a.putInt32(c>>>0),c=s>>>0;a.putInt32(c);var p={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3,h4:t.h4,h5:t.h5,h6:t.h6,h7:t.h7};u(p,r,a);var h=n.util.createBuffer();return h.putInt32(p.h0),h.putInt32(p.h1),h.putInt32(p.h2),h.putInt32(p.h3),h.putInt32(p.h4),h.putInt32(p.h5),h.putInt32(p.h6),h.putInt32(p.h7),h},o};var i=null,a=!1,s=null;function u(t,e,r){for(var n,o,i,a,u,l,c,f,p,h,y,d,v,m=r.length();m>=64;){for(u=0;u<16;++u)e[u]=r.getInt32();for(;u<64;++u)n=((n=e[u-2])>>>17|n<<15)^(n>>>19|n<<13)^n>>>10,o=((o=e[u-15])>>>7|o<<25)^(o>>>18|o<<14)^o>>>3,e[u]=n+e[u-7]+o+e[u-16]|0;for(l=t.h0,c=t.h1,f=t.h2,p=t.h3,h=t.h4,y=t.h5,d=t.h6,v=t.h7,u=0;u<64;++u)i=(l>>>2|l<<30)^(l>>>13|l<<19)^(l>>>22|l<<10),a=l&c|f&(l^c),n=v+((h>>>6|h<<26)^(h>>>11|h<<21)^(h>>>25|h<<7))+(d^h&(y^d))+s[u]+e[u],v=d,d=y,y=h,h=p+n>>>0,p=f,f=c,c=l,l=n+(o=i+a)>>>0;t.h0=t.h0+l|0,t.h1=t.h1+c|0,t.h2=t.h2+f|0,t.h3=t.h3+p|0,t.h4=t.h4+h|0,t.h5=t.h5+y|0,t.h6=t.h6+d|0,t.h7=t.h7+v|0,m-=64}}},function(t,e,r){var n=r(0);r(1);var o=null;!n.util.isNodejs||n.options.usePureJavaScript||process.versions["node-webkit"]||(o=r(16)),(t.exports=n.prng=n.prng||{}).create=function(t){for(var e={plugin:t,key:null,seed:null,time:null,reseeds:0,generated:0,keyBytes:""},r=t.md,i=new Array(32),a=0;a<32;++a)i[a]=r.create();function s(){if(e.pools[0].messageLength>=32)return u();var t=32-e.pools[0].messageLength<<5;e.collect(e.seedFileSync(t)),u()}function u(){e.reseeds=4294967295===e.reseeds?0:e.reseeds+1;var t=e.plugin.md.create();t.update(e.keyBytes);for(var r=1,n=0;n<32;++n)e.reseeds%r==0&&(t.update(e.pools[n].digest().getBytes()),e.pools[n].start()),r<<=1;e.keyBytes=t.digest().getBytes(),t.start(),t.update(e.keyBytes);var o=t.digest().getBytes();e.key=e.plugin.formatKey(e.keyBytes),e.seed=e.plugin.formatSeed(o),e.generated=0}function l(t){var e=null,r=n.util.globalScope,o=r.crypto||r.msCrypto;o&&o.getRandomValues&&(e=function(t){return o.getRandomValues(t)});var i=n.util.createBuffer();if(e)for(;i.length()<t;){var a=Math.max(1,Math.min(t-i.length(),65536)/4),s=new Uint32Array(Math.floor(a));try{e(s);for(var u=0;u<s.length;++u)i.putInt32(s[u])}catch(t){if(!("undefined"!=typeof QuotaExceededError&&t instanceof QuotaExceededError))throw t}}if(i.length()<t)for(var l,c,f,p=Math.floor(65536*Math.random());i.length()<t;)for(c=16807*(65535&p),c+=(32767&(l=16807*(p>>16)))<<16,p=4294967295&(c=(2147483647&(c+=l>>15))+(c>>31)),u=0;u<3;++u)f=p>>>(u<<3),f^=Math.floor(256*Math.random()),i.putByte(255&f);return i.getBytes(t)}return e.pools=i,e.pool=0,e.generate=function(t,r){if(!r)return e.generateSync(t);var o=e.plugin.cipher,i=e.plugin.increment,a=e.plugin.formatKey,s=e.plugin.formatSeed,l=n.util.createBuffer();e.key=null,function c(f){if(f)return r(f);if(l.length()>=t)return r(null,l.getBytes(t));if(e.generated>1048575&&(e.key=null),null===e.key)return n.util.nextTick(function(){!function(t){if(e.pools[0].messageLength>=32)return u(),t();var r=32-e.pools[0].messageLength<<5;e.seedFile(r,function(r,n){if(r)return t(r);e.collect(n),u(),t()})}(c)});var p=o(e.key,e.seed);e.generated+=p.length,l.putBytes(p),e.key=a(o(e.key,i(e.seed))),e.seed=s(o(e.key,e.seed)),n.util.setImmediate(c)}()},e.generateSync=function(t){var r=e.plugin.cipher,o=e.plugin.increment,i=e.plugin.formatKey,a=e.plugin.formatSeed;e.key=null;for(var u=n.util.createBuffer();u.length()<t;){e.generated>1048575&&(e.key=null),null===e.key&&s();var l=r(e.key,e.seed);e.generated+=l.length,u.putBytes(l),e.key=i(r(e.key,o(e.seed))),e.seed=a(r(e.key,e.seed))}return u.getBytes(t)},o?(e.seedFile=function(t,e){o.randomBytes(t,function(t,r){if(t)return e(t);e(null,r.toString())})},e.seedFileSync=function(t){return o.randomBytes(t).toString()}):(e.seedFile=function(t,e){try{e(null,l(t))}catch(t){e(t)}},e.seedFileSync=l),e.collect=function(t){for(var r=t.length,n=0;n<r;++n)e.pools[e.pool].update(t.substr(n,1)),e.pool=31===e.pool?0:e.pool+1},e.collectInt=function(t,r){for(var n="",o=0;o<r;o+=8)n+=String.fromCharCode(t>>o&255);e.collect(n)},e.registerWorker=function(t){t===self?e.seedFile=function(t,e){self.addEventListener("message",function t(r){var n=r.data;n.forge&&n.forge.prng&&(self.removeEventListener("message",t),e(n.forge.prng.err,n.forge.prng.bytes))}),self.postMessage({forge:{prng:{needed:t}}})}:t.addEventListener("message",function(r){var n=r.data;n.forge&&n.forge.prng&&e.seedFile(n.forge.prng.needed,function(e,r){t.postMessage({forge:{prng:{err:e,bytes:r}}})})})},e}},function(t,e,r){var n=r(0);r(1);var o=[217,120,249,196,25,221,181,237,40,233,253,121,74,160,216,157,198,126,55,131,43,118,83,142,98,76,100,136,68,139,251,162,23,154,89,245,135,179,79,19,97,69,109,141,9,129,125,50,189,143,64,235,134,183,123,11,240,149,33,34,92,107,78,130,84,214,101,147,206,96,178,28,115,86,192,20,167,140,241,220,18,117,202,31,59,190,228,209,66,61,212,48,163,60,182,38,111,191,14,218,70,105,7,87,39,242,29,155,188,148,67,3,248,17,199,246,144,239,62,231,6,195,213,47,200,102,30,215,8,232,234,222,128,82,238,247,132,170,114,172,53,77,106,42,150,26,210,113,90,21,73,116,75,159,208,94,4,24,164,236,194,224,65,110,15,81,203,204,36,145,175,80,161,244,112,57,153,124,58,133,35,184,180,122,252,2,54,91,37,85,151,49,45,93,250,152,227,138,146,174,5,223,41,16,103,108,186,201,211,0,230,207,225,158,168,44,99,22,1,63,88,226,137,169,13,56,52,27,171,51,255,176,187,72,12,95,185,177,205,46,197,243,219,71,229,165,156,119,10,166,32,104,254,127,193,173],i=[1,2,3,5],a=function(t,e){return t<<e&65535|(65535&t)>>16-e},s=function(t,e){return(65535&t)>>e|t<<16-e&65535};t.exports=n.rc2=n.rc2||{},n.rc2.expandKey=function(t,e){"string"==typeof t&&(t=n.util.createBuffer(t)),e=e||128;var r,i=t,a=t.length(),s=e,u=Math.ceil(s/8),l=255>>(7&s);for(r=a;r<128;r++)i.putByte(o[i.at(r-1)+i.at(r-a)&255]);for(i.setAt(128-u,o[i.at(128-u)&l]),r=127-u;r>=0;r--)i.setAt(r,o[i.at(r+1)^i.at(r+u)]);return i};var u=function(t,e,r){var o,u,l,c,f=!1,p=null,h=null,y=null,d=[];for(t=n.rc2.expandKey(t,e),l=0;l<64;l++)d.push(t.getInt16Le());r?(o=function(t){for(l=0;l<4;l++)t[l]+=d[c]+(t[(l+3)%4]&t[(l+2)%4])+(~t[(l+3)%4]&t[(l+1)%4]),t[l]=a(t[l],i[l]),c++},u=function(t){for(l=0;l<4;l++)t[l]+=d[63&t[(l+3)%4]]}):(o=function(t){for(l=3;l>=0;l--)t[l]=s(t[l],i[l]),t[l]-=d[c]+(t[(l+3)%4]&t[(l+2)%4])+(~t[(l+3)%4]&t[(l+1)%4]),c--},u=function(t){for(l=3;l>=0;l--)t[l]-=d[63&t[(l+3)%4]]});var v=function(t){var e=[];for(l=0;l<4;l++){var n=p.getInt16Le();null!==y&&(r?n^=y.getInt16Le():y.putInt16Le(n)),e.push(65535&n)}c=r?0:63;for(var o=0;o<t.length;o++)for(var i=0;i<t[o][0];i++)t[o][1](e);for(l=0;l<4;l++)null!==y&&(r?y.putInt16Le(e[l]):e[l]^=y.getInt16Le()),h.putInt16Le(e[l])},m=null;return m={start:function(t,e){t&&"string"==typeof t&&(t=n.util.createBuffer(t)),f=!1,p=n.util.createBuffer(),h=e||new n.util.createBuffer,y=t,m.output=h},update:function(t){for(f||p.putBuffer(t);p.length()>=8;)v([[5,o],[1,u],[6,o],[1,u],[5,o]])},finish:function(t){var e=!0;if(r)if(t)e=t(8,p,!r);else{var n=8===p.length()?8:8-p.length();p.fillWithByte(n,n)}if(e&&(f=!0,m.update()),!r&&(e=0===p.length()))if(t)e=t(8,h,!r);else{var o=h.length(),i=h.at(o-1);i>o?e=!1:h.truncate(i)}return e}}};n.rc2.startEncrypting=function(t,e,r){var o=n.rc2.createEncryptionCipher(t,128);return o.start(e,r),o},n.rc2.createEncryptionCipher=function(t,e){return u(t,e,!0)},n.rc2.startDecrypting=function(t,e,r){var o=n.rc2.createDecryptionCipher(t,128);return o.start(e,r),o},n.rc2.createDecryptionCipher=function(t,e){return u(t,e,!1)}},function(t,e,r){var n=r(0);r(1),r(2),r(9);var o=t.exports=n.pkcs1=n.pkcs1||{};function i(t,e,r){r||(r=n.md.sha1.create());for(var o="",i=Math.ceil(e/r.digestLength),a=0;a<i;++a){var s=String.fromCharCode(a>>24&255,a>>16&255,a>>8&255,255&a);r.start(),r.update(t+s),o+=r.digest().getBytes()}return o.substring(0,e)}o.encode_rsa_oaep=function(t,e,r){var o,a,s,u;"string"==typeof r?(o=r,a=arguments[3]||void 0,s=arguments[4]||void 0):r&&(o=r.label||void 0,a=r.seed||void 0,s=r.md||void 0,r.mgf1&&r.mgf1.md&&(u=r.mgf1.md)),s?s.start():s=n.md.sha1.create(),u||(u=s);var l=Math.ceil(t.n.bitLength()/8),c=l-2*s.digestLength-2;if(e.length>c)throw(d=new Error("RSAES-OAEP input message length is too long.")).length=e.length,d.maxLength=c,d;o||(o=""),s.update(o,"raw");for(var f=s.digest(),p="",h=c-e.length,y=0;y<h;y++)p+="\0";var d,v=f.getBytes()+p+""+e;if(a){if(a.length!==s.digestLength)throw(d=new Error("Invalid RSAES-OAEP seed. The seed length must match the digest length.")).seedLength=a.length,d.digestLength=s.digestLength,d}else a=n.random.getBytes(s.digestLength);var m=i(a,l-s.digestLength-1,u),b=n.util.xorBytes(v,m,v.length),g=i(b,s.digestLength,u);return"\0"+n.util.xorBytes(a,g,a.length)+b},o.decode_rsa_oaep=function(t,e,r){var o,a,s;"string"==typeof r?(o=r,a=arguments[3]||void 0):r&&(o=r.label||void 0,a=r.md||void 0,r.mgf1&&r.mgf1.md&&(s=r.mgf1.md));var u=Math.ceil(t.n.bitLength()/8);if(e.length!==u)throw(m=new Error("RSAES-OAEP encoded message length is invalid.")).length=e.length,m.expectedLength=u,m;if(void 0===a?a=n.md.sha1.create():a.start(),s||(s=a),u<2*a.digestLength+2)throw new Error("RSAES-OAEP key is too short for the hash function.");o||(o=""),a.update(o,"raw");for(var l=a.digest().getBytes(),c=e.charAt(0),f=e.substring(1,a.digestLength+1),p=e.substring(1+a.digestLength),h=i(p,a.digestLength,s),y=i(n.util.xorBytes(f,h,f.length),u-a.digestLength-1,s),d=n.util.xorBytes(p,y,p.length),v=d.substring(0,a.digestLength),m="\0"!==c,b=0;b<a.digestLength;++b)m|=l.charAt(b)!==v.charAt(b);for(var g=1,S=a.digestLength,w=a.digestLength;w<d.length;w++){var _=d.charCodeAt(w);m|=_&(g?65534:0),S+=g&=1&_^1}if(m||1!==d.charCodeAt(S))throw new Error("Invalid RSAES-OAEP padding.");return d.substring(S+1)}},function(t,e,r){var n=r(0);r(1),r(12),r(2),function(){if(n.prime)t.exports=n.prime;else{var e=t.exports=n.prime=n.prime||{},r=n.jsbn.BigInteger,o=[6,4,2,4,2,4,6,2],i=new r(null);i.fromInt(30);var a=function(t,e){return t|e};e.generateProbablePrime=function(t,e,o){"function"==typeof e&&(o=e,e={});var i=(e=e||{}).algorithm||"PRIMEINC";"string"==typeof i&&(i={name:i}),i.options=i.options||{};var a=e.prng||n.random,l={nextBytes:function(t){for(var e=a.getBytesSync(t.length),r=0;r<t.length;++r)t[r]=e.charCodeAt(r)}};if("PRIMEINC"===i.name)return function(t,e,o,i){return"workers"in o?function(t,e,o,i){if("undefined"==typeof Worker)return s(t,e,o,i);var a=u(t,e),l=o.workers,c=o.workLoad||100,f=30*c/8,p=o.workerScript||"forge/prime.worker.js";if(-1===l)return n.util.estimateCores(function(t,e){t&&(e=2),l=e-1,h()});function h(){l=Math.max(1,l);for(var n=[],o=0;o<l;++o)n[o]=new Worker(p);for(o=0;o<l;++o)n[o].addEventListener("message",h);var s=!1;function h(o){if(!s){var l=o.data;if(l.found){for(var p=0;p<n.length;++p)n[p].terminate();return s=!0,i(null,new r(l.prime,16))}a.bitLength()>t&&(a=u(t,e));var h=a.toString(16);o.target.postMessage({hex:h,workLoad:c}),a.dAddOffset(f,0)}}}h()}(t,e,o,i):s(t,e,o,i)}(t,l,i.options,o);throw new Error("Invalid prime generation algorithm: "+i.name)}}function s(t,e,r,i){var a=u(t,e),s=function(t){return t<=100?27:t<=150?18:t<=200?15:t<=250?12:t<=300?9:t<=350?8:t<=400?7:t<=500?6:t<=600?5:t<=800?4:t<=1250?3:2}(a.bitLength());"millerRabinTests"in r&&(s=r.millerRabinTests);var l=10;"maxBlockTime"in r&&(l=r.maxBlockTime),function t(e,r,i,a,s,l,c){var f=+new Date;do{if(e.bitLength()>r&&(e=u(r,i)),e.isProbablePrime(s))return c(null,e);e.dAddOffset(o[a++%8],0)}while(l<0||+new Date-f<l);n.util.setImmediate(function(){t(e,r,i,a,s,l,c)})}(a,t,e,0,s,l,i)}function u(t,e){var n=new r(t,e),o=t-1;return n.testBit(o)||n.bitwiseTo(r.ONE.shiftLeft(o),a,n),n.dAddOffset(31-n.mod(i).byteValue(),0),n}}()},function(t,e,r){var n=r(0);r(3),r(8),r(6),r(29),r(22),r(2),r(11),r(9),r(1),r(17);var o=n.asn1,i=n.pki,a=t.exports=n.pkcs12=n.pkcs12||{},s={name:"ContentInfo",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.contentType",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:o.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"content"}]},u={name:"PFX",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.version",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"version"},s,{name:"PFX.macData",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"mac",value:[{name:"PFX.macData.mac",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm.algorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"macAlgorithm"},{name:"PFX.macData.mac.digestAlgorithm.parameters",tagClass:o.Class.UNIVERSAL,captureAsn1:"macAlgorithmParameters"}]},{name:"PFX.macData.mac.digest",tagClass:o.Class.UNIVERSAL,type:o.Type.OCTETSTRING,constructed:!1,capture:"macDigest"}]},{name:"PFX.macData.macSalt",tagClass:o.Class.UNIVERSAL,type:o.Type.OCTETSTRING,constructed:!1,capture:"macSalt"},{name:"PFX.macData.iterations",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,optional:!0,capture:"macIterations"}]}]},l={name:"SafeBag",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"SafeBag.bagId",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"bagId"},{name:"SafeBag.bagValue",tagClass:o.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"bagValue"},{name:"SafeBag.bagAttributes",tagClass:o.Class.UNIVERSAL,type:o.Type.SET,constructed:!0,optional:!0,capture:"bagAttributes"}]},c={name:"Attribute",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"Attribute.attrId",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"oid"},{name:"Attribute.attrValues",tagClass:o.Class.UNIVERSAL,type:o.Type.SET,constructed:!0,capture:"values"}]},f={name:"CertBag",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"CertBag.certId",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"certId"},{name:"CertBag.certValue",tagClass:o.Class.CONTEXT_SPECIFIC,constructed:!0,value:[{name:"CertBag.certValue[0]",tagClass:o.Class.UNIVERSAL,type:o.Class.OCTETSTRING,constructed:!1,capture:"cert"}]}]};function p(t,e,r,n){for(var o=[],i=0;i<t.length;i++)for(var a=0;a<t[i].safeBags.length;a++){var s=t[i].safeBags[a];void 0!==n&&s.type!==n||(null!==e?void 0!==s.attributes[e]&&s.attributes[e].indexOf(r)>=0&&o.push(s):o.push(s))}return o}function h(t){if(t.composed||t.constructed){for(var e=n.util.createBuffer(),r=0;r<t.value.length;++r)e.putBytes(t.value[r].value);t.composed=t.constructed=!1,t.value=e.getBytes()}return t}function y(t,e){var r={},a=[];if(!o.validate(t,n.pkcs7.asn1.encryptedDataValidator,r,a))throw(s=new Error("Cannot read EncryptedContentInfo.")).errors=a,s;var s,u=o.derToOid(r.contentType);if(u!==i.oids.data)throw(s=new Error("PKCS#12 EncryptedContentInfo ContentType is not Data.")).oid=u,s;u=o.derToOid(r.encAlgorithm);var l=i.pbe.getCipher(u,r.encParameter,e),c=h(r.encryptedContentAsn1),f=n.util.createBuffer(c.value);if(l.update(f),!l.finish())throw new Error("Failed to decrypt PKCS#12 SafeContents.");return l.output.getBytes()}function d(t,e,r){if(!e&&0===t.length)return[];if((t=o.fromDer(t,e)).tagClass!==o.Class.UNIVERSAL||t.type!==o.Type.SEQUENCE||!0!==t.constructed)throw new Error("PKCS#12 SafeContents expected to be a SEQUENCE OF SafeBag.");for(var n=[],a=0;a<t.value.length;a++){var s=t.value[a],u={},c=[];if(!o.validate(s,l,u,c))throw(m=new Error("Cannot read SafeBag.")).errors=c,m;var p,h,y={type:o.derToOid(u.bagId),attributes:v(u.bagAttributes)};n.push(y);var d=u.bagValue.value[0];switch(y.type){case i.oids.pkcs8ShroudedKeyBag:if(null===(d=i.decryptPrivateKeyInfo(d,r)))throw new Error("Unable to decrypt PKCS#8 ShroudedKeyBag, wrong password?");case i.oids.keyBag:try{y.key=i.privateKeyFromAsn1(d)}catch(t){y.key=null,y.asn1=d}continue;case i.oids.certBag:p=f,h=function(){if(o.derToOid(u.certId)!==i.oids.x509Certificate){var t=new Error("Unsupported certificate type, only X.509 supported.");throw t.oid=o.derToOid(u.certId),t}var r=o.fromDer(u.cert,e);try{y.cert=i.certificateFromAsn1(r,!0)}catch(t){y.cert=null,y.asn1=r}};break;default:var m;throw(m=new Error("Unsupported PKCS#12 SafeBag type.")).oid=y.type,m}if(void 0!==p&&!o.validate(d,p,u,c))throw(m=new Error("Cannot read PKCS#12 "+p.name)).errors=c,m;h()}return n}function v(t){var e={};if(void 0!==t)for(var r=0;r<t.length;++r){var n={},a=[];if(!o.validate(t[r],c,n,a)){var s=new Error("Cannot read PKCS#12 BagAttribute.");throw s.errors=a,s}var u=o.derToOid(n.oid);if(void 0!==i.oids[u]){e[i.oids[u]]=[];for(var l=0;l<n.values.length;++l)e[i.oids[u]].push(n.values[l].value)}}return e}a.pkcs12FromAsn1=function(t,e,r){"string"==typeof e?(r=e,e=!0):void 0===e&&(e=!0);var l={};if(!o.validate(t,u,l,[]))throw(c=new Error("Cannot read PKCS#12 PFX. ASN.1 object is not an PKCS#12 PFX.")).errors=c,c;var c,f={version:l.version.charCodeAt(0),safeContents:[],getBags:function(t){var e,r={};return"localKeyId"in t?e=t.localKeyId:"localKeyIdHex"in t&&(e=n.util.hexToBytes(t.localKeyIdHex)),void 0===e&&!("friendlyName"in t)&&"bagType"in t&&(r[t.bagType]=p(f.safeContents,null,null,t.bagType)),void 0!==e&&(r.localKeyId=p(f.safeContents,"localKeyId",e,t.bagType)),"friendlyName"in t&&(r.friendlyName=p(f.safeContents,"friendlyName",t.friendlyName,t.bagType)),r},getBagsByFriendlyName:function(t,e){return p(f.safeContents,"friendlyName",t,e)},getBagsByLocalKeyId:function(t,e){return p(f.safeContents,"localKeyId",t,e)}};if(3!==l.version.charCodeAt(0))throw(c=new Error("PKCS#12 PFX of version other than 3 not supported.")).version=l.version.charCodeAt(0),c;if(o.derToOid(l.contentType)!==i.oids.data)throw(c=new Error("Only PKCS#12 PFX in password integrity mode supported.")).oid=o.derToOid(l.contentType),c;var v=l.content.value[0];if(v.tagClass!==o.Class.UNIVERSAL||v.type!==o.Type.OCTETSTRING)throw new Error("PKCS#12 authSafe content data is not an OCTET STRING.");if(v=h(v),l.mac){var m=null,b=0,g=o.derToOid(l.macAlgorithm);switch(g){case i.oids.sha1:m=n.md.sha1.create(),b=20;break;case i.oids.sha256:m=n.md.sha256.create(),b=32;break;case i.oids.sha384:m=n.md.sha384.create(),b=48;break;case i.oids.sha512:m=n.md.sha512.create(),b=64;break;case i.oids.md5:m=n.md.md5.create(),b=16}if(null===m)throw new Error("PKCS#12 uses unsupported MAC algorithm: "+g);var S=new n.util.ByteBuffer(l.macSalt),w="macIterations"in l?parseInt(n.util.bytesToHex(l.macIterations),16):1,_=a.generateKey(r,S,3,w,b,m),O=n.hmac.create();if(O.start(m,_),O.update(v.value),O.getMac().getBytes()!==l.macDigest)throw new Error("PKCS#12 MAC could not be verified. Invalid password?")}return function(t,e,r,n){if((e=o.fromDer(e,r)).tagClass!==o.Class.UNIVERSAL||e.type!==o.Type.SEQUENCE||!0!==e.constructed)throw new Error("PKCS#12 AuthenticatedSafe expected to be a SEQUENCE OF ContentInfo");for(var a=0;a<e.value.length;a++){var u=e.value[a],l={},c=[];if(!o.validate(u,s,l,c))throw(m=new Error("Cannot read ContentInfo.")).errors=c,m;var f={encrypted:!1},p=null,v=l.content.value[0];switch(o.derToOid(l.contentType)){case i.oids.data:if(v.tagClass!==o.Class.UNIVERSAL||v.type!==o.Type.OCTETSTRING)throw new Error("PKCS#12 SafeContents Data is not an OCTET STRING.");p=h(v).value;break;case i.oids.encryptedData:p=y(v,n),f.encrypted=!0;break;default:var m;throw(m=new Error("Unsupported PKCS#12 contentType.")).contentType=o.derToOid(l.contentType),m}f.safeBags=d(p,r,n),t.safeContents.push(f)}}(f,v.value,e,r),f},a.toPkcs12Asn1=function(t,e,r,s){(s=s||{}).saltSize=s.saltSize||8,s.count=s.count||2048,s.algorithm=s.algorithm||s.encAlgorithm||"aes128","useMac"in s||(s.useMac=!0),"localKeyId"in s||(s.localKeyId=null),"generateLocalKeyId"in s||(s.generateLocalKeyId=!0);var u,l=s.localKeyId;if(null!==l)l=n.util.hexToBytes(l);else if(s.generateLocalKeyId)if(e){var c=n.util.isArray(e)?e[0]:e;"string"==typeof c&&(c=i.certificateFromPem(c)),(T=n.md.sha1.create()).update(o.toDer(i.certificateToAsn1(c)).getBytes()),l=T.digest().getBytes()}else l=n.random.getBytes(20);var f=[];null!==l&&f.push(o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(i.oids.localKeyId).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.SET,!0,[o.create(o.Class.UNIVERSAL,o.Type.OCTETSTRING,!1,l)])])),"friendlyName"in s&&f.push(o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(i.oids.friendlyName).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.SET,!0,[o.create(o.Class.UNIVERSAL,o.Type.BMPSTRING,!1,s.friendlyName)])])),f.length>0&&(u=o.create(o.Class.UNIVERSAL,o.Type.SET,!0,f));var p=[],h=[];null!==e&&(h=n.util.isArray(e)?e:[e]);for(var y=[],d=0;d<h.length;++d){"string"==typeof(e=h[d])&&(e=i.certificateFromPem(e));var v=0===d?u:void 0,m=i.certificateToAsn1(e),b=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(i.oids.certBag).getBytes()),o.create(o.Class.CONTEXT_SPECIFIC,0,!0,[o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(i.oids.x509Certificate).getBytes()),o.create(o.Class.CONTEXT_SPECIFIC,0,!0,[o.create(o.Class.UNIVERSAL,o.Type.OCTETSTRING,!1,o.toDer(m).getBytes())])])]),v]);y.push(b)}if(y.length>0){var g=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,y),S=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(i.oids.data).getBytes()),o.create(o.Class.CONTEXT_SPECIFIC,0,!0,[o.create(o.Class.UNIVERSAL,o.Type.OCTETSTRING,!1,o.toDer(g).getBytes())])]);p.push(S)}var w=null;if(null!==t){var _=i.wrapRsaPrivateKey(i.privateKeyToAsn1(t));w=null===r?o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(i.oids.keyBag).getBytes()),o.create(o.Class.CONTEXT_SPECIFIC,0,!0,[_]),u]):o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(i.oids.pkcs8ShroudedKeyBag).getBytes()),o.create(o.Class.CONTEXT_SPECIFIC,0,!0,[i.encryptPrivateKeyInfo(_,r,s)]),u]);var O=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[w]),E=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(i.oids.data).getBytes()),o.create(o.Class.CONTEXT_SPECIFIC,0,!0,[o.create(o.Class.UNIVERSAL,o.Type.OCTETSTRING,!1,o.toDer(O).getBytes())])]);p.push(E)}var P,x=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,p);if(s.useMac){var T=n.md.sha1.create(),C=new n.util.ByteBuffer(n.random.getBytes(s.saltSize)),k=s.count,A=(t=a.generateKey(r,C,3,k,20),n.hmac.create());A.start(T,t),A.update(o.toDer(x).getBytes());var j=A.getMac();P=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(i.oids.sha1).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.NULL,!1,"")]),o.create(o.Class.UNIVERSAL,o.Type.OCTETSTRING,!1,j.getBytes())]),o.create(o.Class.UNIVERSAL,o.Type.OCTETSTRING,!1,C.getBytes()),o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,o.integerToDer(k).getBytes())])}return o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,o.integerToDer(3).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(i.oids.data).getBytes()),o.create(o.Class.CONTEXT_SPECIFIC,0,!0,[o.create(o.Class.UNIVERSAL,o.Type.OCTETSTRING,!1,o.toDer(x).getBytes())])]),P])},a.generateKey=n.pbe.generatePkcs12Key},function(t,e,r){var n=r(0);r(3),r(1);var o=n.asn1,i=t.exports=n.pkcs7asn1=n.pkcs7asn1||{};n.pkcs7=n.pkcs7||{},n.pkcs7.asn1=i;var a={name:"ContentInfo",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.ContentType",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:o.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,captureAsn1:"content"}]};i.contentInfoValidator=a;var s={name:"EncryptedContentInfo",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentType",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"contentType"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentEncryptionAlgorithm.algorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm.parameter",tagClass:o.Class.UNIVERSAL,captureAsn1:"encParameter"}]},{name:"EncryptedContentInfo.encryptedContent",tagClass:o.Class.CONTEXT_SPECIFIC,type:0,capture:"encryptedContent",captureAsn1:"encryptedContentAsn1"}]};i.envelopedDataValidator={name:"EnvelopedData",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"EnvelopedData.Version",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"version"},{name:"EnvelopedData.RecipientInfos",tagClass:o.Class.UNIVERSAL,type:o.Type.SET,constructed:!0,captureAsn1:"recipientInfos"}].concat(s)},i.encryptedDataValidator={name:"EncryptedData",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedData.Version",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"version"}].concat(s)};var u={name:"SignerInfo",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.version",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1},{name:"SignerInfo.issuerAndSerialNumber",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.issuerAndSerialNumber.issuer",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"SignerInfo.issuerAndSerialNumber.serialNumber",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"SignerInfo.digestAlgorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.digestAlgorithm.algorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"digestAlgorithm"},{name:"SignerInfo.digestAlgorithm.parameter",tagClass:o.Class.UNIVERSAL,constructed:!1,captureAsn1:"digestParameter",optional:!0}]},{name:"SignerInfo.authenticatedAttributes",tagClass:o.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"authenticatedAttributes"},{name:"SignerInfo.digestEncryptionAlgorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,capture:"signatureAlgorithm"},{name:"SignerInfo.encryptedDigest",tagClass:o.Class.UNIVERSAL,type:o.Type.OCTETSTRING,constructed:!1,capture:"signature"},{name:"SignerInfo.unauthenticatedAttributes",tagClass:o.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,capture:"unauthenticatedAttributes"}]};i.signedDataValidator={name:"SignedData",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"SignedData.Version",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"version"},{name:"SignedData.DigestAlgorithms",tagClass:o.Class.UNIVERSAL,type:o.Type.SET,constructed:!0,captureAsn1:"digestAlgorithms"},a,{name:"SignedData.Certificates",tagClass:o.Class.CONTEXT_SPECIFIC,type:0,optional:!0,captureAsn1:"certificates"},{name:"SignedData.CertificateRevocationLists",tagClass:o.Class.CONTEXT_SPECIFIC,type:1,optional:!0,captureAsn1:"crls"},{name:"SignedData.SignerInfos",tagClass:o.Class.UNIVERSAL,type:o.Type.SET,capture:"signerInfos",optional:!0,value:[u]}]},i.recipientInfoValidator={name:"RecipientInfo",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.version",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"version"},{name:"RecipientInfo.issuerAndSerial",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.issuerAndSerial.issuer",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"RecipientInfo.issuerAndSerial.serialNumber",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"RecipientInfo.keyEncryptionAlgorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.keyEncryptionAlgorithm.algorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"RecipientInfo.keyEncryptionAlgorithm.parameter",tagClass:o.Class.UNIVERSAL,constructed:!1,captureAsn1:"encParameter",optional:!0}]},{name:"RecipientInfo.encryptedKey",tagClass:o.Class.UNIVERSAL,type:o.Type.OCTETSTRING,constructed:!1,capture:"encKey"}]}},function(t,e,r){var n=r(0);r(1),n.mgf=n.mgf||{},(t.exports=n.mgf.mgf1=n.mgf1=n.mgf1||{}).create=function(t){return{generate:function(e,r){for(var o=new n.util.ByteBuffer,i=Math.ceil(r/t.digestLength),a=0;a<i;a++){var s=new n.util.ByteBuffer;s.putInt32(a),t.start(),t.update(e+s.getBytes()),o.putBuffer(t.digest())}return o.truncate(o.length()-r),o.getBytes()}}}},function(t,e,r){var n=r(0);r(4),r(1);var o=t.exports=n.sha512=n.sha512||{};n.md.sha512=n.md.algorithms.sha512=o;var i=n.sha384=n.sha512.sha384=n.sha512.sha384||{};i.create=function(){return o.create("SHA-384")},n.md.sha384=n.md.algorithms.sha384=i,n.sha512.sha256=n.sha512.sha256||{create:function(){return o.create("SHA-512/256")}},n.md["sha512/256"]=n.md.algorithms["sha512/256"]=n.sha512.sha256,n.sha512.sha224=n.sha512.sha224||{create:function(){return o.create("SHA-512/224")}},n.md["sha512/224"]=n.md.algorithms["sha512/224"]=n.sha512.sha224,o.create=function(t){if(s||(a=String.fromCharCode(128),a+=n.util.fillString(String.fromCharCode(0),128),u=[[1116352408,3609767458],[1899447441,602891725],[3049323471,3964484399],[3921009573,2173295548],[961987163,4081628472],[1508970993,3053834265],[2453635748,2937671579],[2870763221,3664609560],[3624381080,2734883394],[310598401,1164996542],[607225278,1323610764],[1426881987,3590304994],[1925078388,4068182383],[2162078206,991336113],[2614888103,633803317],[3248222580,3479774868],[3835390401,2666613458],[4022224774,944711139],[264347078,2341262773],[604807628,2007800933],[770255983,1495990901],[1249150122,1856431235],[1555081692,3175218132],[1996064986,2198950837],[2554220882,3999719339],[2821834349,766784016],[2952996808,2566594879],[3210313671,3203337956],[3336571891,1034457026],[3584528711,2466948901],[113926993,3758326383],[338241895,168717936],[666307205,1188179964],[773529912,1546045734],[1294757372,1522805485],[1396182291,2643833823],[1695183700,2343527390],[1986661051,1014477480],[2177026350,1206759142],[2456956037,344077627],[2730485921,1290863460],[2820302411,3158454273],[3259730800,3505952657],[3345764771,106217008],[3516065817,3606008344],[3600352804,1432725776],[4094571909,1467031594],[275423344,851169720],[430227734,3100823752],[506948616,1363258195],[659060556,3750685593],[883997877,3785050280],[958139571,3318307427],[1322822218,3812723403],[1537002063,2003034995],[1747873779,3602036899],[1955562222,1575990012],[2024104815,1125592928],[2227730452,2716904306],[2361852424,442776044],[2428436474,593698344],[2756734187,3733110249],[3204031479,2999351573],[3329325298,3815920427],[3391569614,3928383900],[3515267271,566280711],[3940187606,3454069534],[4118630271,4000239992],[116418474,1914138554],[174292421,2731055270],[289380356,3203993006],[460393269,320620315],[685471733,587496836],[852142971,1086792851],[1017036298,365543100],[1126000580,2618297676],[1288033470,3409855158],[1501505948,4234509866],[1607167915,987167468],[1816402316,1246189591]],(l={})["SHA-512"]=[[1779033703,4089235720],[3144134277,2227873595],[1013904242,4271175723],[2773480762,1595750129],[1359893119,2917565137],[2600822924,725511199],[528734635,4215389547],[1541459225,327033209]],l["SHA-384"]=[[3418070365,3238371032],[1654270250,914150663],[2438529370,812702999],[355462360,4144912697],[1731405415,4290775857],[2394180231,1750603025],[3675008525,1694076839],[1203062813,3204075428]],l["SHA-512/256"]=[[573645204,4230739756],[2673172387,3360449730],[596883563,1867755857],[2520282905,1497426621],[2519219938,2827943907],[3193839141,1401305490],[721525244,746961066],[246885852,2177182882]],l["SHA-512/224"]=[[2352822216,424955298],[1944164710,2312950998],[502970286,855612546],[1738396948,1479516111],[258812777,2077511080],[2011393907,79989058],[1067287976,1780299464],[286451373,2446758561]],s=!0),void 0===t&&(t="SHA-512"),!(t in l))throw new Error("Invalid SHA-512 algorithm: "+t);for(var e=l[t],r=null,o=n.util.createBuffer(),i=new Array(80),f=0;f<80;++f)i[f]=new Array(2);var p=64;switch(t){case"SHA-384":p=48;break;case"SHA-512/256":p=32;break;case"SHA-512/224":p=28}var h={algorithm:t.replace("-","").toLowerCase(),blockLength:128,digestLength:p,messageLength:0,fullMessageLength:null,messageLengthSize:16,start:function(){h.messageLength=0,h.fullMessageLength=h.messageLength128=[];for(var t=h.messageLengthSize/4,i=0;i<t;++i)h.fullMessageLength.push(0);for(o=n.util.createBuffer(),r=new Array(e.length),i=0;i<e.length;++i)r[i]=e[i].slice(0);return h}};return h.start(),h.update=function(t,e){"utf8"===e&&(t=n.util.encodeUtf8(t));var a=t.length;h.messageLength+=a,a=[a/4294967296>>>0,a>>>0];for(var s=h.fullMessageLength.length-1;s>=0;--s)h.fullMessageLength[s]+=a[1],a[1]=a[0]+(h.fullMessageLength[s]/4294967296>>>0),h.fullMessageLength[s]=h.fullMessageLength[s]>>>0,a[0]=a[1]/4294967296>>>0;return o.putBytes(t),c(r,i,o),(o.read>2048||0===o.length())&&o.compact(),h},h.digest=function(){var e=n.util.createBuffer();e.putBytes(o.bytes());var s,u=h.fullMessageLength[h.fullMessageLength.length-1]+h.messageLengthSize&h.blockLength-1;e.putBytes(a.substr(0,h.blockLength-u));for(var l=8*h.fullMessageLength[0],f=0;f<h.fullMessageLength.length-1;++f)l+=(s=8*h.fullMessageLength[f+1])/4294967296>>>0,e.putInt32(l>>>0),l=s>>>0;e.putInt32(l);var p=new Array(r.length);for(f=0;f<r.length;++f)p[f]=r[f].slice(0);c(p,i,e);var y,d=n.util.createBuffer();for(y="SHA-512"===t?p.length:"SHA-384"===t?p.length-2:p.length-4,f=0;f<y;++f)d.putInt32(p[f][0]),f===y-1&&"SHA-512/224"===t||d.putInt32(p[f][1]);return d},h};var a=null,s=!1,u=null,l=null;function c(t,e,r){for(var n,o,i,a,s,l,c,f,p,h,y,d,v,m,b,g,S,w,_,O,E,P,x,T,C,k,A,j,N,I,M,R,L,D=r.length();D>=128;){for(A=0;A<16;++A)e[A][0]=r.getInt32()>>>0,e[A][1]=r.getInt32()>>>0;for(;A<80;++A)n=(((j=(I=e[A-2])[0])>>>19|(N=I[1])<<13)^(N>>>29|j<<3)^j>>>6)>>>0,o=((j<<13|N>>>19)^(N<<3|j>>>29)^(j<<26|N>>>6))>>>0,i=(((j=(R=e[A-15])[0])>>>1|(N=R[1])<<31)^(j>>>8|N<<24)^j>>>7)>>>0,a=((j<<31|N>>>1)^(j<<24|N>>>8)^(j<<25|N>>>7))>>>0,M=e[A-7],L=e[A-16],N=o+M[1]+a+L[1],e[A][0]=n+M[0]+i+L[0]+(N/4294967296>>>0)>>>0,e[A][1]=N>>>0;for(y=t[0][0],d=t[0][1],v=t[1][0],m=t[1][1],b=t[2][0],g=t[2][1],S=t[3][0],w=t[3][1],_=t[4][0],O=t[4][1],E=t[5][0],P=t[5][1],x=t[6][0],T=t[6][1],C=t[7][0],k=t[7][1],A=0;A<80;++A)c=((_>>>14|O<<18)^(_>>>18|O<<14)^(O>>>9|_<<23))>>>0,f=(x^_&(E^x))>>>0,s=((y>>>28|d<<4)^(d>>>2|y<<30)^(d>>>7|y<<25))>>>0,l=((y<<4|d>>>28)^(d<<30|y>>>2)^(d<<25|y>>>7))>>>0,p=(y&v|b&(y^v))>>>0,h=(d&m|g&(d^m))>>>0,N=k+(((_<<18|O>>>14)^(_<<14|O>>>18)^(O<<23|_>>>9))>>>0)+((T^O&(P^T))>>>0)+u[A][1]+e[A][1],n=C+c+f+u[A][0]+e[A][0]+(N/4294967296>>>0)>>>0,o=N>>>0,i=s+p+((N=l+h)/4294967296>>>0)>>>0,a=N>>>0,C=x,k=T,x=E,T=P,E=_,P=O,_=S+n+((N=w+o)/4294967296>>>0)>>>0,O=N>>>0,S=b,w=g,b=v,g=m,v=y,m=d,y=n+i+((N=o+a)/4294967296>>>0)>>>0,d=N>>>0;N=t[0][1]+d,t[0][0]=t[0][0]+y+(N/4294967296>>>0)>>>0,t[0][1]=N>>>0,N=t[1][1]+m,t[1][0]=t[1][0]+v+(N/4294967296>>>0)>>>0,t[1][1]=N>>>0,N=t[2][1]+g,t[2][0]=t[2][0]+b+(N/4294967296>>>0)>>>0,t[2][1]=N>>>0,N=t[3][1]+w,t[3][0]=t[3][0]+S+(N/4294967296>>>0)>>>0,t[3][1]=N>>>0,N=t[4][1]+O,t[4][0]=t[4][0]+_+(N/4294967296>>>0)>>>0,t[4][1]=N>>>0,N=t[5][1]+P,t[5][0]=t[5][0]+E+(N/4294967296>>>0)>>>0,t[5][1]=N>>>0,N=t[6][1]+T,t[6][0]=t[6][0]+x+(N/4294967296>>>0)>>>0,t[6][1]=N>>>0,N=t[7][1]+k,t[7][0]=t[7][0]+C+(N/4294967296>>>0)>>>0,t[7][1]=N>>>0,D-=128}}},function(t,e,r){t.exports=r(33)},function(t,e,r){t.exports=r(0),r(5),r(36),r(3),r(13),r(10),r(38),r(8),r(40),r(41),r(42),r(30),r(15),r(7),r(26),r(28),r(43),r(21),r(27),r(24),r(18),r(2),r(25),r(44),r(20),r(1)},function(t,e){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(t){"object"==("undefined"==typeof window?"undefined":s(window))&&(r=window)}t.exports=r},function(t,e){var r={};t.exports=r;var n={};r.encode=function(t,e,r){if("string"!=typeof e)throw new TypeError('"alphabet" must be a string.');if(void 0!==r&&"number"!=typeof r)throw new TypeError('"maxline" must be a number.');var n="";if(t instanceof Uint8Array){var o=0,i=e.length,a=e.charAt(0),s=[0];for(o=0;o<t.length;++o){for(var u=0,l=t[o];u<s.length;++u)l+=s[u]<<8,s[u]=l%i,l=l/i|0;for(;l>0;)s.push(l%i),l=l/i|0}for(o=0;0===t[o]&&o<t.length-1;++o)n+=a;for(o=s.length-1;o>=0;--o)n+=e[s[o]]}else n=function(t,e){var r=0,n=e.length,o=e.charAt(0),i=[0];for(r=0;r<t.length();++r){for(var a=0,s=t.at(r);a<i.length;++a)s+=i[a]<<8,i[a]=s%n,s=s/n|0;for(;s>0;)i.push(s%n),s=s/n|0}var u="";for(r=0;0===t.at(r)&&r<t.length()-1;++r)u+=o;for(r=i.length-1;r>=0;--r)u+=e[i[r]];return u}(t,e);if(r){var c=new RegExp(".{1,"+r+"}","g");n=n.match(c).join("\r\n")}return n},r.decode=function(t,e){if("string"!=typeof t)throw new TypeError('"input" must be a string.');if("string"!=typeof e)throw new TypeError('"alphabet" must be a string.');var r=n[e];if(!r){r=n[e]=[];for(var o=0;o<e.length;++o)r[e.charCodeAt(o)]=o}t=t.replace(/\s/g,"");var i=e.length,a=e.charAt(0),s=[0];for(o=0;o<t.length;o++){var u=r[t.charCodeAt(o)];if(void 0===u)return;for(var l=0,c=u;l<s.length;++l)c+=s[l]*i,s[l]=255&c,c>>=8;for(;c>0;)s.push(255&c),c>>=8}for(var f=0;t[f]===a&&f<t.length-1;++f)s.push(0);return"undefined"!=typeof Buffer?Buffer.from(s.reverse()):new Uint8Array(s.reverse())}},function(t,e,r){var n=r(0);r(5),r(20);var o=t.exports=n.tls;function i(t,e,r){var i=e.entity===n.tls.ConnectionEnd.client;t.read.cipherState={init:!1,cipher:n.cipher.createDecipher("AES-CBC",i?r.keys.server_write_key:r.keys.client_write_key),iv:i?r.keys.server_write_IV:r.keys.client_write_IV},t.write.cipherState={init:!1,cipher:n.cipher.createCipher("AES-CBC",i?r.keys.client_write_key:r.keys.server_write_key),iv:i?r.keys.client_write_IV:r.keys.server_write_IV},t.read.cipherFunction=l,t.write.cipherFunction=a,t.read.macLength=t.write.macLength=r.mac_length,t.read.macFunction=t.write.macFunction=o.hmac_sha1}function a(t,e){var r,i=!1,a=e.macFunction(e.macKey,e.sequenceNumber,t);t.fragment.putBytes(a),e.updateSequenceNumber(),r=t.version.minor===o.Versions.TLS_1_0.minor?e.cipherState.init?null:e.cipherState.iv:n.random.getBytesSync(16),e.cipherState.init=!0;var u=e.cipherState.cipher;return u.start({iv:r}),t.version.minor>=o.Versions.TLS_1_1.minor&&u.output.putBytes(r),u.update(t.fragment),u.finish(s)&&(t.fragment=u.output,t.length=t.fragment.length(),i=!0),i}function s(t,e,r){if(!r){var n=t-e.length()%t;e.fillWithByte(n-1,n)}return!0}function u(t,e,r){var n=!0;if(r){for(var o=e.length(),i=e.last(),a=o-1-i;a<o-1;++a)n=n&&e.at(a)==i;n&&e.truncate(i+1)}return n}function l(t,e){var r,i=!1;r=t.version.minor===o.Versions.TLS_1_0.minor?e.cipherState.init?null:e.cipherState.iv:t.fragment.getBytes(16),e.cipherState.init=!0;var a=e.cipherState.cipher;a.start({iv:r}),a.update(t.fragment),i=a.finish(u);var s=e.macLength,l=n.random.getBytesSync(s),c=a.output.length();c>=s?(t.fragment=a.output.getBytes(c-s),l=a.output.getBytes(s)):t.fragment=a.output.getBytes(),t.fragment=n.util.createBuffer(t.fragment),t.length=t.fragment.length();var f=e.macFunction(e.macKey,e.sequenceNumber,t);return e.updateSequenceNumber(),function(t,e,r){var o=n.hmac.create();return o.start("SHA1",t),o.update(e),e=o.digest().getBytes(),o.start(null,null),o.update(r),e===(r=o.digest().getBytes())}(e.macKey,l,f)&&i}o.CipherSuites.TLS_RSA_WITH_AES_128_CBC_SHA={id:[0,47],name:"TLS_RSA_WITH_AES_128_CBC_SHA",initSecurityParameters:function(t){t.bulk_cipher_algorithm=o.BulkCipherAlgorithm.aes,t.cipher_type=o.CipherType.block,t.enc_key_length=16,t.block_length=16,t.fixed_iv_length=16,t.record_iv_length=16,t.mac_algorithm=o.MACAlgorithm.hmac_sha1,t.mac_length=20,t.mac_key_length=20},initConnectionState:i},o.CipherSuites.TLS_RSA_WITH_AES_256_CBC_SHA={id:[0,53],name:"TLS_RSA_WITH_AES_256_CBC_SHA",initSecurityParameters:function(t){t.bulk_cipher_algorithm=o.BulkCipherAlgorithm.aes,t.cipher_type=o.CipherType.block,t.enc_key_length=32,t.block_length=16,t.fixed_iv_length=16,t.record_iv_length=16,t.mac_algorithm=o.MACAlgorithm.hmac_sha1,t.mac_length=20,t.mac_key_length=20},initConnectionState:i}},function(t,e,r){var n=r(0);r(30),t.exports=n.mgf=n.mgf||{},n.mgf.mgf1=n.mgf1},function(t,e,r){var n=r(0);r(12),r(2),r(31),r(1);var o=r(39),i=o.publicKeyValidator,a=o.privateKeyValidator;if(void 0===s)var s=n.jsbn.BigInteger;var u=n.util.ByteBuffer,l="undefined"==typeof Buffer?Uint8Array:Buffer;n.pki=n.pki||{},t.exports=n.pki.ed25519=n.ed25519=n.ed25519||{};var c=n.ed25519;function f(t){var e=t.message;if(e instanceof Uint8Array||e instanceof l)return e;var r=t.encoding;if(void 0===e){if(!t.md)throw new TypeError('"options.message" or "options.md" not specified.');e=t.md.digest().getBytes(),r="binary"}if("string"==typeof e&&!r)throw new TypeError('"options.encoding" must be "binary" or "utf8".');if("string"==typeof e){if("undefined"!=typeof Buffer)return Buffer.from(e,r);e=new u(e,r)}else if(!(e instanceof u))throw new TypeError('"options.message" must be a node.js Buffer, a Uint8Array, a forge ByteBuffer, or a string with "options.encoding" specifying its encoding.');for(var n=new l(e.length()),o=0;o<n.length;++o)n[o]=e.at(o);return n}c.constants={},c.constants.PUBLIC_KEY_BYTE_LENGTH=32,c.constants.PRIVATE_KEY_BYTE_LENGTH=64,c.constants.SEED_BYTE_LENGTH=32,c.constants.SIGN_BYTE_LENGTH=64,c.constants.HASH_BYTE_LENGTH=64,c.generateKeyPair=function(t){var e=(t=t||{}).seed;if(void 0===e)e=n.random.getBytesSync(c.constants.SEED_BYTE_LENGTH);else if("string"==typeof e){if(e.length!==c.constants.SEED_BYTE_LENGTH)throw new TypeError('"seed" must be '+c.constants.SEED_BYTE_LENGTH+" bytes in length.")}else if(!(e instanceof Uint8Array))throw new TypeError('"seed" must be a node.js Buffer, Uint8Array, or a binary string.');e=f({message:e,encoding:"binary"});for(var r=new l(c.constants.PUBLIC_KEY_BYTE_LENGTH),o=new l(c.constants.PRIVATE_KEY_BYTE_LENGTH),i=0;i<32;++i)o[i]=e[i];return function(t,e){var r,n=[R(),R(),R(),R()],o=S(e,32);for(o[0]&=248,o[31]&=127,o[31]|=64,j(n,o),P(t,n),r=0;r<32;++r)e[r+32]=t[r]}(r,o),{publicKey:r,privateKey:o}},c.privateKeyFromAsn1=function(t){var e={},r=[];if(!n.asn1.validate(t,a,e,r)){var o=new Error("Invalid Key.");throw o.errors=r,o}var i=n.asn1.derToOid(e.privateKeyOid),s=n.oids.EdDSA25519;if(i!==s)throw new Error('Invalid OID "'+i+'"; OID must be "'+s+'".');var u=e.privateKey;return{privateKeyBytes:f({message:n.asn1.fromDer(u).value,encoding:"binary"})}},c.publicKeyFromAsn1=function(t){var e={},r=[];if(!n.asn1.validate(t,i,e,r)){var o=new Error("Invalid Key.");throw o.errors=r,o}var a=n.asn1.derToOid(e.publicKeyOid),s=n.oids.EdDSA25519;if(a!==s)throw new Error('Invalid OID "'+a+'"; OID must be "'+s+'".');var u=e.ed25519PublicKey;if(u.length!==c.constants.PUBLIC_KEY_BYTE_LENGTH)throw new Error("Key length is invalid.");return f({message:u,encoding:"binary"})},c.publicKeyFromPrivateKey=function(t){var e=f({message:(t=t||{}).privateKey,encoding:"binary"});if(e.length!==c.constants.PRIVATE_KEY_BYTE_LENGTH)throw new TypeError('"options.privateKey" must have a byte length of '+c.constants.PRIVATE_KEY_BYTE_LENGTH);for(var r=new l(c.constants.PUBLIC_KEY_BYTE_LENGTH),n=0;n<r.length;++n)r[n]=e[32+n];return r},c.sign=function(t){var e=f(t=t||{}),r=f({message:t.privateKey,encoding:"binary"});if(r.length===c.constants.SEED_BYTE_LENGTH)r=c.generateKeyPair({seed:r}).privateKey;else if(r.length!==c.constants.PRIVATE_KEY_BYTE_LENGTH)throw new TypeError('"options.privateKey" must have a byte length of '+c.constants.SEED_BYTE_LENGTH+" or "+c.constants.PRIVATE_KEY_BYTE_LENGTH);var n=new l(c.constants.SIGN_BYTE_LENGTH+e.length);!function(t,e,r,n){var o,i,a=new Float64Array(64),s=[R(),R(),R(),R()],u=S(n,32);u[0]&=248,u[31]&=127,u[31]|=64;for(o=0;o<r;++o)t[64+o]=e[o];for(o=0;o<32;++o)t[32+o]=u[32+o];var l=S(t.subarray(32),r+32);for(_(l),j(s,l),P(t,s),o=32;o<64;++o)t[o]=n[o];var c=S(t,r+64);for(_(c),o=32;o<64;++o)a[o]=0;for(o=0;o<32;++o)a[o]=l[o];for(o=0;o<32;++o)for(i=0;i<32;i++)a[o+i]+=c[o]*u[i];w(t.subarray(32),a)}(n,e,e.length,r);for(var o=new l(c.constants.SIGN_BYTE_LENGTH),i=0;i<o.length;++i)o[i]=n[i];return o},c.verify=function(t){var e=f(t=t||{});if(void 0===t.signature)throw new TypeError('"options.signature" must be a node.js Buffer, a Uint8Array, a forge ByteBuffer, or a binary string.');var r=f({message:t.signature,encoding:"binary"});if(r.length!==c.constants.SIGN_BYTE_LENGTH)throw new TypeError('"options.signature" must have a byte length of '+c.constants.SIGN_BYTE_LENGTH);var n=f({message:t.publicKey,encoding:"binary"});if(n.length!==c.constants.PUBLIC_KEY_BYTE_LENGTH)throw new TypeError('"options.publicKey" must have a byte length of '+c.constants.PUBLIC_KEY_BYTE_LENGTH);var o,i=new l(c.constants.SIGN_BYTE_LENGTH+e.length),a=new l(c.constants.SIGN_BYTE_LENGTH+e.length);for(o=0;o<c.constants.SIGN_BYTE_LENGTH;++o)i[o]=r[o];for(o=0;o<e.length;++o)i[o+c.constants.SIGN_BYTE_LENGTH]=e[o];return function(t,e,r,n){var o,i=new l(32),a=[R(),R(),R(),R()],s=[R(),R(),R(),R()];if(r<64)return-1;if(function(t,e){var r=R(),n=R(),o=R(),i=R(),a=R(),s=R(),u=R();return N(t[2],h),function(t,e){var r;for(r=0;r<16;++r)t[r]=e[2*r]+(e[2*r+1]<<8);t[15]&=32767}(t[1],e),B(o,t[1]),F(i,o,y),D(o,o,t[2]),L(i,t[2],i),B(a,i),B(s,a),F(u,s,a),F(r,u,o),F(r,r,i),function(t,e){var r,n=R();for(r=0;r<16;++r)n[r]=e[r];for(r=250;r>=0;--r)B(n,n),1!==r&&F(n,n,e);for(r=0;r<16;++r)t[r]=n[r]}(r,r),F(r,r,o),F(r,r,i),F(r,r,i),F(t[0],r,i),B(n,t[0]),F(n,n,i),T(n,o)&&F(t[0],t[0],g),B(n,t[0]),F(n,n,i),T(n,o)?-1:(k(t[0])===e[31]>>7&&D(t[0],p,t[0]),F(t[3],t[0],t[1]),0)}(s,n))return-1;for(o=0;o<r;++o)t[o]=e[o];for(o=0;o<32;++o)t[o+32]=n[o];var u=S(t,r);if(_(u),A(a,s,u),j(s,e.subarray(32)),O(a,s),P(i,a),r-=64,C(e,0,i,0)){for(o=0;o<r;++o)t[o]=0;return-1}for(o=0;o<r;++o)t[o]=e[o+64];return r}(a,i,i.length,n)>=0};var p=R(),h=R([1]),y=R([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),d=R([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),v=R([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),m=R([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),b=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]),g=R([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function S(t,e){var r=n.md.sha512.create(),o=new u(t);r.update(o.getBytes(e),"binary");var i=r.digest().getBytes();if("undefined"!=typeof Buffer)return Buffer.from(i,"binary");for(var a=new l(c.constants.HASH_BYTE_LENGTH),s=0;s<64;++s)a[s]=i.charCodeAt(s);return a}function w(t,e){var r,n,o,i;for(n=63;n>=32;--n){for(r=0,o=n-32,i=n-12;o<i;++o)e[o]+=r-16*e[n]*b[o-(n-32)],r=e[o]+128>>8,e[o]-=256*r;e[o]+=r,e[n]=0}for(r=0,o=0;o<32;++o)e[o]+=r-(e[31]>>4)*b[o],r=e[o]>>8,e[o]&=255;for(o=0;o<32;++o)e[o]-=r*b[o];for(n=0;n<32;++n)e[n+1]+=e[n]>>8,t[n]=255&e[n]}function _(t){for(var e=new Float64Array(64),r=0;r<64;++r)e[r]=t[r],t[r]=0;w(t,e)}function O(t,e){var r=R(),n=R(),o=R(),i=R(),a=R(),s=R(),u=R(),l=R(),c=R();D(r,t[1],t[0]),D(c,e[1],e[0]),F(r,r,c),L(n,t[0],t[1]),L(c,e[0],e[1]),F(n,n,c),F(o,t[3],e[3]),F(o,o,d),F(i,t[2],e[2]),L(i,i,i),D(a,n,r),D(s,i,o),L(u,i,o),L(l,n,r),F(t[0],a,s),F(t[1],l,u),F(t[2],u,s),F(t[3],a,l)}function E(t,e,r){for(var n=0;n<4;++n)M(t[n],e[n],r)}function P(t,e){var r=R(),n=R(),o=R();!function(t,e){var r,n=R();for(r=0;r<16;++r)n[r]=e[r];for(r=253;r>=0;--r)B(n,n),2!==r&&4!==r&&F(n,n,e);for(r=0;r<16;++r)t[r]=n[r]}(o,e[2]),F(r,e[0],o),F(n,e[1],o),x(t,n),t[31]^=k(r)<<7}function x(t,e){var r,n,o,i=R(),a=R();for(r=0;r<16;++r)a[r]=e[r];for(I(a),I(a),I(a),n=0;n<2;++n){for(i[0]=a[0]-65517,r=1;r<15;++r)i[r]=a[r]-65535-(i[r-1]>>16&1),i[r-1]&=65535;i[15]=a[15]-32767-(i[14]>>16&1),o=i[15]>>16&1,i[14]&=65535,M(a,i,1-o)}for(r=0;r<16;r++)t[2*r]=255&a[r],t[2*r+1]=a[r]>>8}function T(t,e){var r=new l(32),n=new l(32);return x(r,t),x(n,e),C(r,0,n,0)}function C(t,e,r,n){return function(t,e,r,n,o){var i,a=0;for(i=0;i<32;++i)a|=t[e+i]^r[n+i];return(1&a-1>>>8)-1}(t,e,r,n)}function k(t){var e=new l(32);return x(e,t),1&e[0]}function A(t,e,r){var n,o;for(N(t[0],p),N(t[1],h),N(t[2],h),N(t[3],p),o=255;o>=0;--o)E(t,e,n=r[o/8|0]>>(7&o)&1),O(e,t),O(t,t),E(t,e,n)}function j(t,e){var r=[R(),R(),R(),R()];N(r[0],v),N(r[1],m),N(r[2],h),F(r[3],v,m),A(t,r,e)}function N(t,e){var r;for(r=0;r<16;r++)t[r]=0|e[r]}function I(t){var e,r,n=1;for(e=0;e<16;++e)r=t[e]+n+65535,n=Math.floor(r/65536),t[e]=r-65536*n;t[0]+=n-1+37*(n-1)}function M(t,e,r){for(var n,o=~(r-1),i=0;i<16;++i)n=o&(t[i]^e[i]),t[i]^=n,e[i]^=n}function R(t){var e,r=new Float64Array(16);if(t)for(e=0;e<t.length;++e)r[e]=t[e];return r}function L(t,e,r){for(var n=0;n<16;++n)t[n]=e[n]+r[n]}function D(t,e,r){for(var n=0;n<16;++n)t[n]=e[n]-r[n]}function B(t,e){F(t,e,e)}function F(t,e,r){var n,o,i=0,a=0,s=0,u=0,l=0,c=0,f=0,p=0,h=0,y=0,d=0,v=0,m=0,b=0,g=0,S=0,w=0,_=0,O=0,E=0,P=0,x=0,T=0,C=0,k=0,A=0,j=0,N=0,I=0,M=0,R=0,L=r[0],D=r[1],B=r[2],F=r[3],U=r[4],G=r[5],V=r[6],z=r[7],H=r[8],q=r[9],J=r[10],W=r[11],K=r[12],Y=r[13],Q=r[14],X=r[15];i+=(n=e[0])*L,a+=n*D,s+=n*B,u+=n*F,l+=n*U,c+=n*G,f+=n*V,p+=n*z,h+=n*H,y+=n*q,d+=n*J,v+=n*W,m+=n*K,b+=n*Y,g+=n*Q,S+=n*X,a+=(n=e[1])*L,s+=n*D,u+=n*B,l+=n*F,c+=n*U,f+=n*G,p+=n*V,h+=n*z,y+=n*H,d+=n*q,v+=n*J,m+=n*W,b+=n*K,g+=n*Y,S+=n*Q,w+=n*X,s+=(n=e[2])*L,u+=n*D,l+=n*B,c+=n*F,f+=n*U,p+=n*G,h+=n*V,y+=n*z,d+=n*H,v+=n*q,m+=n*J,b+=n*W,g+=n*K,S+=n*Y,w+=n*Q,_+=n*X,u+=(n=e[3])*L,l+=n*D,c+=n*B,f+=n*F,p+=n*U,h+=n*G,y+=n*V,d+=n*z,v+=n*H,m+=n*q,b+=n*J,g+=n*W,S+=n*K,w+=n*Y,_+=n*Q,O+=n*X,l+=(n=e[4])*L,c+=n*D,f+=n*B,p+=n*F,h+=n*U,y+=n*G,d+=n*V,v+=n*z,m+=n*H,b+=n*q,g+=n*J,S+=n*W,w+=n*K,_+=n*Y,O+=n*Q,E+=n*X,c+=(n=e[5])*L,f+=n*D,p+=n*B,h+=n*F,y+=n*U,d+=n*G,v+=n*V,m+=n*z,b+=n*H,g+=n*q,S+=n*J,w+=n*W,_+=n*K,O+=n*Y,E+=n*Q,P+=n*X,f+=(n=e[6])*L,p+=n*D,h+=n*B,y+=n*F,d+=n*U,v+=n*G,m+=n*V,b+=n*z,g+=n*H,S+=n*q,w+=n*J,_+=n*W,O+=n*K,E+=n*Y,P+=n*Q,x+=n*X,p+=(n=e[7])*L,h+=n*D,y+=n*B,d+=n*F,v+=n*U,m+=n*G,b+=n*V,g+=n*z,S+=n*H,w+=n*q,_+=n*J,O+=n*W,E+=n*K,P+=n*Y,x+=n*Q,T+=n*X,h+=(n=e[8])*L,y+=n*D,d+=n*B,v+=n*F,m+=n*U,b+=n*G,g+=n*V,S+=n*z,w+=n*H,_+=n*q,O+=n*J,E+=n*W,P+=n*K,x+=n*Y,T+=n*Q,C+=n*X,y+=(n=e[9])*L,d+=n*D,v+=n*B,m+=n*F,b+=n*U,g+=n*G,S+=n*V,w+=n*z,_+=n*H,O+=n*q,E+=n*J,P+=n*W,x+=n*K,T+=n*Y,C+=n*Q,k+=n*X,d+=(n=e[10])*L,v+=n*D,m+=n*B,b+=n*F,g+=n*U,S+=n*G,w+=n*V,_+=n*z,O+=n*H,E+=n*q,P+=n*J,x+=n*W,T+=n*K,C+=n*Y,k+=n*Q,A+=n*X,v+=(n=e[11])*L,m+=n*D,b+=n*B,g+=n*F,S+=n*U,w+=n*G,_+=n*V,O+=n*z,E+=n*H,P+=n*q,x+=n*J,T+=n*W,C+=n*K,k+=n*Y,A+=n*Q,j+=n*X,m+=(n=e[12])*L,b+=n*D,g+=n*B,S+=n*F,w+=n*U,_+=n*G,O+=n*V,E+=n*z,P+=n*H,x+=n*q,T+=n*J,C+=n*W,k+=n*K,A+=n*Y,j+=n*Q,N+=n*X,b+=(n=e[13])*L,g+=n*D,S+=n*B,w+=n*F,_+=n*U,O+=n*G,E+=n*V,P+=n*z,x+=n*H,T+=n*q,C+=n*J,k+=n*W,A+=n*K,j+=n*Y,N+=n*Q,I+=n*X,g+=(n=e[14])*L,S+=n*D,w+=n*B,_+=n*F,O+=n*U,E+=n*G,P+=n*V,x+=n*z,T+=n*H,C+=n*q,k+=n*J,A+=n*W,j+=n*K,N+=n*Y,I+=n*Q,M+=n*X,S+=(n=e[15])*L,a+=38*(_+=n*B),s+=38*(O+=n*F),u+=38*(E+=n*U),l+=38*(P+=n*G),c+=38*(x+=n*V),f+=38*(T+=n*z),p+=38*(C+=n*H),h+=38*(k+=n*q),y+=38*(A+=n*J),d+=38*(j+=n*W),v+=38*(N+=n*K),m+=38*(I+=n*Y),b+=38*(M+=n*Q),g+=38*(R+=n*X),i=(n=(i+=38*(w+=n*D))+(o=1)+65535)-65536*(o=Math.floor(n/65536)),a=(n=a+o+65535)-65536*(o=Math.floor(n/65536)),s=(n=s+o+65535)-65536*(o=Math.floor(n/65536)),u=(n=u+o+65535)-65536*(o=Math.floor(n/65536)),l=(n=l+o+65535)-65536*(o=Math.floor(n/65536)),c=(n=c+o+65535)-65536*(o=Math.floor(n/65536)),f=(n=f+o+65535)-65536*(o=Math.floor(n/65536)),p=(n=p+o+65535)-65536*(o=Math.floor(n/65536)),h=(n=h+o+65535)-65536*(o=Math.floor(n/65536)),y=(n=y+o+65535)-65536*(o=Math.floor(n/65536)),d=(n=d+o+65535)-65536*(o=Math.floor(n/65536)),v=(n=v+o+65535)-65536*(o=Math.floor(n/65536)),m=(n=m+o+65535)-65536*(o=Math.floor(n/65536)),b=(n=b+o+65535)-65536*(o=Math.floor(n/65536)),g=(n=g+o+65535)-65536*(o=Math.floor(n/65536)),S=(n=S+o+65535)-65536*(o=Math.floor(n/65536)),i=(n=(i+=o-1+37*(o-1))+(o=1)+65535)-65536*(o=Math.floor(n/65536)),a=(n=a+o+65535)-65536*(o=Math.floor(n/65536)),s=(n=s+o+65535)-65536*(o=Math.floor(n/65536)),u=(n=u+o+65535)-65536*(o=Math.floor(n/65536)),l=(n=l+o+65535)-65536*(o=Math.floor(n/65536)),c=(n=c+o+65535)-65536*(o=Math.floor(n/65536)),f=(n=f+o+65535)-65536*(o=Math.floor(n/65536)),p=(n=p+o+65535)-65536*(o=Math.floor(n/65536)),h=(n=h+o+65535)-65536*(o=Math.floor(n/65536)),y=(n=y+o+65535)-65536*(o=Math.floor(n/65536)),d=(n=d+o+65535)-65536*(o=Math.floor(n/65536)),v=(n=v+o+65535)-65536*(o=Math.floor(n/65536)),m=(n=m+o+65535)-65536*(o=Math.floor(n/65536)),b=(n=b+o+65535)-65536*(o=Math.floor(n/65536)),g=(n=g+o+65535)-65536*(o=Math.floor(n/65536)),S=(n=S+o+65535)-65536*(o=Math.floor(n/65536)),i+=o-1+37*(o-1),t[0]=i,t[1]=a,t[2]=s,t[3]=u,t[4]=l,t[5]=c,t[6]=f,t[7]=p,t[8]=h,t[9]=y,t[10]=d,t[11]=v,t[12]=m,t[13]=b,t[14]=g,t[15]=S}},function(t,e,r){var n=r(0);r(3);var o=n.asn1;e.privateKeyValidator={name:"PrivateKeyInfo",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:o.Class.UNIVERSAL,type:o.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]},e.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{tagClass:o.Class.UNIVERSAL,type:o.Type.BITSTRING,constructed:!1,composed:!0,captureBitStringValue:"ed25519PublicKey"}]}},function(t,e,r){var n=r(0);r(1),r(2),r(12),t.exports=n.kem=n.kem||{};var o=n.jsbn.BigInteger;function i(t,e,r,o){t.generate=function(t,i){for(var a=new n.util.ByteBuffer,s=Math.ceil(i/o)+r,u=new n.util.ByteBuffer,l=r;l<s;++l){u.putInt32(l),e.start(),e.update(t+u.getBytes());var c=e.digest();a.putBytes(c.getBytes(o))}return a.truncate(a.length()-i),a.getBytes()}}n.kem.rsa={},n.kem.rsa.create=function(t,e){var r=(e=e||{}).prng||n.random;return{encrypt:function(e,i){var a,s=Math.ceil(e.n.bitLength()/8);do{a=new o(n.util.bytesToHex(r.getBytesSync(s)),16).mod(e.n)}while(a.compareTo(o.ONE)<=0);var u=s-(a=n.util.hexToBytes(a.toString(16))).length;return u>0&&(a=n.util.fillString(String.fromCharCode(0),u)+a),{encapsulation:e.encrypt(a,"NONE"),key:t.generate(a,i)}},decrypt:function(e,r,n){var o=e.decrypt(r,"NONE");return t.generate(o,n)}}},n.kem.kdf1=function(t,e){i(this,t,0,e||t.digestLength)},n.kem.kdf2=function(t,e){i(this,t,1,e||t.digestLength)}},function(t,e,r){var n=r(0);r(1),t.exports=n.log=n.log||{},n.log.levels=["none","error","warning","info","debug","verbose","max"];var o={},i=[],a=null;n.log.LEVEL_LOCKED=2,n.log.NO_LEVEL_CHECK=4,n.log.INTERPOLATE=8;for(var s=0;s<n.log.levels.length;++s){var u=n.log.levels[s];o[u]={index:s,name:u.toUpperCase()}}n.log.logMessage=function(t){for(var e=o[t.level].index,r=0;r<i.length;++r){var a=i[r];a.flags&n.log.NO_LEVEL_CHECK?a.f(t):e<=o[a.level].index&&a.f(a,t)}},n.log.prepareStandard=function(t){"standard"in t||(t.standard=o[t.level].name+" ["+t.category+"] "+t.message)},n.log.prepareFull=function(t){if(!("full"in t)){var e=[t.message];e=e.concat([]||0),t.full=n.util.format.apply(this,e)}},n.log.prepareStandardFull=function(t){"standardFull"in t||(n.log.prepareStandard(t),t.standardFull=t.standard)};var l=["error","warning","info","debug","verbose"];for(s=0;s<l.length;++s)!function(t){n.log[t]=function(e,r){var o=Array.prototype.slice.call(arguments).slice(2),i={timestamp:new Date,level:t,category:e,message:r,arguments:o};n.log.logMessage(i)}}(l[s]);if(n.log.makeLogger=function(t){var e={flags:0,f:t};return n.log.setLevel(e,"none"),e},n.log.setLevel=function(t,e){var r=!1;if(t&&!(t.flags&n.log.LEVEL_LOCKED))for(var o=0;o<n.log.levels.length;++o)if(e==n.log.levels[o]){t.level=e,r=!0;break}return r},n.log.lock=function(t,e){void 0===e||e?t.flags|=n.log.LEVEL_LOCKED:t.flags&=~n.log.LEVEL_LOCKED},n.log.addLogger=function(t){i.push(t)},"undefined"!=typeof console&&"log"in console){var c;if(console.error&&console.warn&&console.info&&console.debug){var f={error:console.error,warning:console.warn,info:console.info,debug:console.debug,verbose:console.debug},p=function(t,e){n.log.prepareStandard(e);var r=f[e.level],o=[e.standard];o=o.concat(e.arguments.slice()),r.apply(console,o)};c=n.log.makeLogger(p)}else p=function(t,e){n.log.prepareStandardFull(e),console.log(e.standardFull)},c=n.log.makeLogger(p);n.log.setLevel(c,"debug"),n.log.addLogger(c),a=c}else console={log:function(){}};if(null!==a&&"undefined"!=typeof window&&window.location){var h=new URL(window.location.href).searchParams;h.has("console.level")&&n.log.setLevel(a,h.get("console.level").slice(-1)[0]),h.has("console.lock")&&"true"==h.get("console.lock").slice(-1)[0]&&n.log.lock(a)}n.log.consoleLogger=a},function(t,e,r){t.exports=r(4),r(14),r(9),r(23),r(31)},function(t,e,r){var n=r(0);r(5),r(3),r(10),r(6),r(7),r(29),r(2),r(1),r(17);var o=n.asn1,i=t.exports=n.pkcs7=n.pkcs7||{};function a(t){var e={},r=[];if(!o.validate(t,i.asn1.recipientInfoValidator,e,r)){var a=new Error("Cannot read PKCS#7 RecipientInfo. ASN.1 object is not an PKCS#7 RecipientInfo.");throw a.errors=r,a}return{version:e.version.charCodeAt(0),issuer:n.pki.RDNAttributesAsArray(e.issuer),serialNumber:n.util.createBuffer(e.serial).toHex(),encryptedContent:{algorithm:o.derToOid(e.encAlgorithm),parameter:e.encParameter?e.encParameter.value:void 0,content:e.encKey}}}function u(t){var e=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,o.integerToDer(t.version).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[n.pki.distinguishedNameToAsn1({attributes:t.issuer}),o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,n.util.hexToBytes(t.serialNumber))]),o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(t.digestAlgorithm).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.NULL,!1,"")])]);if(t.authenticatedAttributesAsn1&&e.value.push(t.authenticatedAttributesAsn1),e.value.push(o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(t.signatureAlgorithm).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.NULL,!1,"")])),e.value.push(o.create(o.Class.UNIVERSAL,o.Type.OCTETSTRING,!1,t.signature)),t.unauthenticatedAttributes.length>0){for(var r=o.create(o.Class.CONTEXT_SPECIFIC,1,!0,[]),i=0;i<t.unauthenticatedAttributes.length;++i){var a=t.unauthenticatedAttributes[i];r.values.push(l(a))}e.value.push(r)}return e}function l(t){var e;if(t.type===n.pki.oids.contentType)e=o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(t.value).getBytes());else if(t.type===n.pki.oids.messageDigest)e=o.create(o.Class.UNIVERSAL,o.Type.OCTETSTRING,!1,t.value.bytes());else if(t.type===n.pki.oids.signingTime){var r=new Date("1950-01-01T00:00:00Z"),i=new Date("2050-01-01T00:00:00Z"),a=t.value;if("string"==typeof a){var s=Date.parse(a);a=isNaN(s)?13===a.length?o.utcTimeToDate(a):o.generalizedTimeToDate(a):new Date(s)}e=a>=r&&a<i?o.create(o.Class.UNIVERSAL,o.Type.UTCTIME,!1,o.dateToUtcTime(a)):o.create(o.Class.UNIVERSAL,o.Type.GENERALIZEDTIME,!1,o.dateToGeneralizedTime(a))}return o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(t.type).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.SET,!0,[e])])}function c(t,e,r){var i={};if(!o.validate(e,r,i,[])){var a=new Error("Cannot read PKCS#7 message. ASN.1 object is not a supported PKCS#7 message.");throw a.errors=a,a}if(o.derToOid(i.contentType)!==n.pki.oids.data)throw new Error("Unsupported PKCS#7 message. Only wrapped ContentType Data supported.");if(i.encryptedContent){var s="";if(n.util.isArray(i.encryptedContent))for(var u=0;u<i.encryptedContent.length;++u){if(i.encryptedContent[u].type!==o.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting encrypted content constructed of only OCTET STRING objects.");s+=i.encryptedContent[u].value}else s=i.encryptedContent;t.encryptedContent={algorithm:o.derToOid(i.encAlgorithm),parameter:n.util.createBuffer(i.encParameter.value),content:n.util.createBuffer(s)}}if(i.content){if(s="",n.util.isArray(i.content))for(u=0;u<i.content.length;++u){if(i.content[u].type!==o.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting content constructed of only OCTET STRING objects.");s+=i.content[u].value}else s=i.content;t.content=n.util.createBuffer(s)}return t.version=i.version.charCodeAt(0),t.rawCapture=i,i}function f(t){if(void 0===t.encryptedContent.key)throw new Error("Symmetric key not available.");if(void 0===t.content){var e;switch(t.encryptedContent.algorithm){case n.pki.oids["aes128-CBC"]:case n.pki.oids["aes192-CBC"]:case n.pki.oids["aes256-CBC"]:e=n.aes.createDecryptionCipher(t.encryptedContent.key);break;case n.pki.oids.desCBC:case n.pki.oids["des-EDE3-CBC"]:e=n.des.createDecryptionCipher(t.encryptedContent.key);break;default:throw new Error("Unsupported symmetric cipher, OID "+t.encryptedContent.algorithm)}if(e.start(t.encryptedContent.parameter),e.update(t.encryptedContent.content),!e.finish())throw new Error("Symmetric decryption failed.");t.content=e.output}}i.messageFromPem=function(t){var e=n.pem.decode(t)[0];if("PKCS7"!==e.type){var r=new Error('Could not convert PKCS#7 message from PEM; PEM header type is not "PKCS#7".');throw r.headerType=e.type,r}if(e.procType&&"ENCRYPTED"===e.procType.type)throw new Error("Could not convert PKCS#7 message from PEM; PEM is encrypted.");var a=o.fromDer(e.body);return i.messageFromAsn1(a)},i.messageToPem=function(t,e){var r={type:"PKCS7",body:o.toDer(t.toAsn1()).getBytes()};return n.pem.encode(r,{maxline:e})},i.messageFromAsn1=function(t){var e={},r=[];if(!o.validate(t,i.asn1.contentInfoValidator,e,r)){var a=new Error("Cannot read PKCS#7 message. ASN.1 object is not an PKCS#7 ContentInfo.");throw a.errors=r,a}var s,u=o.derToOid(e.contentType);switch(u){case n.pki.oids.envelopedData:s=i.createEnvelopedData();break;case n.pki.oids.encryptedData:s=i.createEncryptedData();break;case n.pki.oids.signedData:s=i.createSignedData();break;default:throw new Error("Cannot read PKCS#7 message. ContentType with OID "+u+" is not (yet) supported.")}return s.fromAsn1(e.content.value[0]),s},i.createSignedData=function(){var t=null;return t={type:n.pki.oids.signedData,version:1,certificates:[],crls:[],signers:[],digestAlgorithmIdentifiers:[],contentInfo:null,signerInfos:[],fromAsn1:function(e){if(c(t,e,i.asn1.signedDataValidator),t.certificates=[],t.crls=[],t.digestAlgorithmIdentifiers=[],t.contentInfo=null,t.signerInfos=[],t.rawCapture.certificates)for(var r=t.rawCapture.certificates.value,o=0;o<r.length;++o)t.certificates.push(n.pki.certificateFromAsn1(r[o]))},toAsn1:function(){t.contentInfo||t.sign();for(var e=[],r=0;r<t.certificates.length;++r)e.push(n.pki.certificateToAsn1(t.certificates[r]));var i=[],a=o.create(o.Class.CONTEXT_SPECIFIC,0,!0,[o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,o.integerToDer(t.version).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.SET,!0,t.digestAlgorithmIdentifiers),t.contentInfo])]);return e.length>0&&a.value[0].value.push(o.create(o.Class.CONTEXT_SPECIFIC,0,!0,e)),i.length>0&&a.value[0].value.push(o.create(o.Class.CONTEXT_SPECIFIC,1,!0,i)),a.value[0].value.push(o.create(o.Class.UNIVERSAL,o.Type.SET,!0,t.signerInfos)),o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(t.type).getBytes()),a])},addSigner:function(e){var r=e.issuer,o=e.serialNumber;if(e.certificate){var i=e.certificate;"string"==typeof i&&(i=n.pki.certificateFromPem(i)),r=i.issuer.attributes,o=i.serialNumber}var a=e.key;if(!a)throw new Error("Could not add PKCS#7 signer; no private key specified.");"string"==typeof a&&(a=n.pki.privateKeyFromPem(a));var s=e.digestAlgorithm||n.pki.oids.sha1;switch(s){case n.pki.oids.sha1:case n.pki.oids.sha256:case n.pki.oids.sha384:case n.pki.oids.sha512:case n.pki.oids.md5:break;default:throw new Error("Could not add PKCS#7 signer; unknown message digest algorithm: "+s)}var u=e.authenticatedAttributes||[];if(u.length>0){for(var l=!1,c=!1,f=0;f<u.length;++f){var p=u[f];if(l||p.type!==n.pki.oids.contentType){if(c||p.type!==n.pki.oids.messageDigest);else if(c=!0,l)break}else if(l=!0,c)break}if(!l||!c)throw new Error("Invalid signer.authenticatedAttributes. If signer.authenticatedAttributes is specified, then it must contain at least two attributes, PKCS #9 content-type and PKCS #9 message-digest.")}t.signers.push({key:a,version:1,issuer:r,serialNumber:o,digestAlgorithm:s,signatureAlgorithm:n.pki.oids.rsaEncryption,signature:null,authenticatedAttributes:u,unauthenticatedAttributes:[]})},sign:function(e){var r;e=e||{},("object"!=s(t.content)||null===t.contentInfo)&&(t.contentInfo=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(n.pki.oids.data).getBytes())]),"content"in t&&(t.content instanceof n.util.ByteBuffer?r=t.content.bytes():"string"==typeof t.content&&(r=n.util.encodeUtf8(t.content)),e.detached?t.detachedContent=o.create(o.Class.UNIVERSAL,o.Type.OCTETSTRING,!1,r):t.contentInfo.value.push(o.create(o.Class.CONTEXT_SPECIFIC,0,!0,[o.create(o.Class.UNIVERSAL,o.Type.OCTETSTRING,!1,r)])))),0!==t.signers.length&&function(e){var r;if(!(r=t.detachedContent?t.detachedContent:(r=t.contentInfo.value[1]).value[0]))throw new Error("Could not sign PKCS#7 message; there is no content to sign.");var i=o.derToOid(t.contentInfo.value[0].value),a=o.toDer(r);for(var s in a.getByte(),o.getBerValueLength(a),a=a.getBytes(),e)e[s].start().update(a);for(var c=new Date,f=0;f<t.signers.length;++f){var p=t.signers[f];if(0===p.authenticatedAttributes.length){if(i!==n.pki.oids.data)throw new Error("Invalid signer; authenticatedAttributes must be present when the ContentInfo content type is not PKCS#7 Data.")}else{p.authenticatedAttributesAsn1=o.create(o.Class.CONTEXT_SPECIFIC,0,!0,[]);for(var h=o.create(o.Class.UNIVERSAL,o.Type.SET,!0,[]),y=0;y<p.authenticatedAttributes.length;++y){var d=p.authenticatedAttributes[y];d.type===n.pki.oids.messageDigest?d.value=e[p.digestAlgorithm].digest():d.type===n.pki.oids.signingTime&&(d.value||(d.value=c)),h.value.push(l(d)),p.authenticatedAttributesAsn1.value.push(l(d))}a=o.toDer(h).getBytes(),p.md.start().update(a)}p.signature=p.key.sign(p.md,"RSASSA-PKCS1-V1_5")}t.signerInfos=function(t){for(var e=[],r=0;r<t.length;++r)e.push(u(t[r]));return e}(t.signers)}(function(){for(var e={},r=0;r<t.signers.length;++r){var i=t.signers[r];(a=i.digestAlgorithm)in e||(e[a]=n.md[n.pki.oids[a]].create()),0===i.authenticatedAttributes.length?i.md=e[a]:i.md=n.md[n.pki.oids[a]].create()}for(var a in t.digestAlgorithmIdentifiers=[],e)t.digestAlgorithmIdentifiers.push(o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(a).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.NULL,!1,"")]));return e}())},verify:function(){throw new Error("PKCS#7 signature verification not yet implemented.")},addCertificate:function(e){"string"==typeof e&&(e=n.pki.certificateFromPem(e)),t.certificates.push(e)},addCertificateRevokationList:function(t){throw new Error("PKCS#7 CRL support not yet implemented.")}}},i.createEncryptedData=function(){var t=null;return t={type:n.pki.oids.encryptedData,version:0,encryptedContent:{algorithm:n.pki.oids["aes256-CBC"]},fromAsn1:function(e){c(t,e,i.asn1.encryptedDataValidator)},decrypt:function(e){void 0!==e&&(t.encryptedContent.key=e),f(t)}}},i.createEnvelopedData=function(){var t=null;return t={type:n.pki.oids.envelopedData,version:0,recipients:[],encryptedContent:{algorithm:n.pki.oids["aes256-CBC"]},fromAsn1:function(e){var r=c(t,e,i.asn1.envelopedDataValidator);t.recipients=function(t){for(var e=[],r=0;r<t.length;++r)e.push(a(t[r]));return e}(r.recipientInfos.value)},toAsn1:function(){return o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(t.type).getBytes()),o.create(o.Class.CONTEXT_SPECIFIC,0,!0,[o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,o.integerToDer(t.version).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.SET,!0,function(t){for(var e,r=[],i=0;i<t.length;++i)r.push((e=t[i],o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,o.integerToDer(e.version).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[n.pki.distinguishedNameToAsn1({attributes:e.issuer}),o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,n.util.hexToBytes(e.serialNumber))]),o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(e.encryptedContent.algorithm).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.NULL,!1,"")]),o.create(o.Class.UNIVERSAL,o.Type.OCTETSTRING,!1,e.encryptedContent.content)])));return r}(t.recipients)),o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,(e=t.encryptedContent,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(n.pki.oids.data).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(e.algorithm).getBytes()),e.parameter?o.create(o.Class.UNIVERSAL,o.Type.OCTETSTRING,!1,e.parameter.getBytes()):void 0]),o.create(o.Class.CONTEXT_SPECIFIC,0,!0,[o.create(o.Class.UNIVERSAL,o.Type.OCTETSTRING,!1,e.content.getBytes())])]))])])]);var e},findRecipient:function(e){for(var r=e.issuer.attributes,n=0;n<t.recipients.length;++n){var o=t.recipients[n],i=o.issuer;if(o.serialNumber===e.serialNumber&&i.length===r.length){for(var a=!0,s=0;s<r.length;++s)if(i[s].type!==r[s].type||i[s].value!==r[s].value){a=!1;break}if(a)return o}}return null},decrypt:function(e,r){if(void 0===t.encryptedContent.key&&void 0!==e&&void 0!==r)switch(e.encryptedContent.algorithm){case n.pki.oids.rsaEncryption:case n.pki.oids.desCBC:var o=r.decrypt(e.encryptedContent.content);t.encryptedContent.key=n.util.createBuffer(o);break;default:throw new Error("Unsupported asymmetric cipher, OID "+e.encryptedContent.algorithm)}f(t)},addRecipient:function(e){t.recipients.push({version:0,issuer:e.issuer.attributes,serialNumber:e.serialNumber,encryptedContent:{algorithm:n.pki.oids.rsaEncryption,key:e.publicKey}})},encrypt:function(e,r){if(void 0===t.encryptedContent.content){var o,i,a;switch(r=r||t.encryptedContent.algorithm,e=e||t.encryptedContent.key,r){case n.pki.oids["aes128-CBC"]:o=16,i=16,a=n.aes.createEncryptionCipher;break;case n.pki.oids["aes192-CBC"]:o=24,i=16,a=n.aes.createEncryptionCipher;break;case n.pki.oids["aes256-CBC"]:o=32,i=16,a=n.aes.createEncryptionCipher;break;case n.pki.oids["des-EDE3-CBC"]:o=24,i=8,a=n.des.createEncryptionCipher;break;default:throw new Error("Unsupported symmetric cipher, OID "+r)}if(void 0===e)e=n.util.createBuffer(n.random.getBytes(o));else if(e.length()!=o)throw new Error("Symmetric key has wrong length; got "+e.length()+" bytes, expected "+o+".");t.encryptedContent.algorithm=r,t.encryptedContent.key=e,t.encryptedContent.parameter=n.util.createBuffer(n.random.getBytes(i));var s=a(e);if(s.start(t.encryptedContent.parameter.copy()),s.update(t.content),!s.finish())throw new Error("Symmetric encryption failed.");t.encryptedContent.content=s.output}for(var u=0;u<t.recipients.length;++u){var l=t.recipients[u];if(void 0===l.encryptedContent.content)switch(l.encryptedContent.algorithm){case n.pki.oids.rsaEncryption:l.encryptedContent.content=l.encryptedContent.key.encrypt(t.encryptedContent.key.data);break;default:throw new Error("Unsupported asymmetric cipher, OID "+l.encryptedContent.algorithm)}}}}}},function(t,e,r){var n=r(0);r(5),r(8),r(14),r(9),r(1);var o=t.exports=n.ssh=n.ssh||{};function i(t,e){var r=e.toString(16);r[0]>="8"&&(r="00"+r);var o=n.util.hexToBytes(r);t.putInt32(o.length),t.putBytes(o)}function a(t,e){t.putInt32(e.length),t.putString(e)}function s(){for(var t=n.md.sha1.create(),e=arguments.length,r=0;r<e;++r)t.update(arguments[r]);return t.digest()}o.privateKeyToPutty=function(t,e,r){var o=""===(e=e||"")?"none":"aes256-cbc",u="PuTTY-User-Key-File-2: ssh-rsa\r\n";u+="Encryption: "+o+"\r\n",u+="Comment: "+(r=r||"")+"\r\n";var l=n.util.createBuffer();a(l,"ssh-rsa"),i(l,t.e),i(l,t.n);var c=n.util.encode64(l.bytes(),64),f=Math.floor(c.length/66)+1;u+="Public-Lines: "+f+"\r\n",u+=c;var p,h=n.util.createBuffer();if(i(h,t.d),i(h,t.p),i(h,t.q),i(h,t.qInv),e){var y=h.length()+16-1;y-=y%16;var d=s(h.bytes());d.truncate(d.length()-y+h.length()),h.putBuffer(d);var v=n.util.createBuffer();v.putBuffer(s("\0\0\0\0",e)),v.putBuffer(s("\0\0\0",e));var m=n.aes.createEncryptionCipher(v.truncate(8),"CBC");m.start(n.util.createBuffer().fillWithByte(0,16)),m.update(h.copy()),m.finish();var b=m.output;b.truncate(16),p=n.util.encode64(b.bytes(),64)}else p=n.util.encode64(h.bytes(),64);u+="\r\nPrivate-Lines: "+(f=Math.floor(p.length/66)+1)+"\r\n",u+=p;var g=s("putty-private-key-file-mac-key",e),S=n.util.createBuffer();a(S,"ssh-rsa"),a(S,o),a(S,r),S.putInt32(l.length()),S.putBuffer(l),S.putInt32(h.length()),S.putBuffer(h);var w=n.hmac.create();return w.start("sha1",g),w.update(S.bytes()),u+"\r\nPrivate-MAC: "+w.digest().toHex()+"\r\n"},o.publicKeyToOpenSSH=function(t,e){e=e||"";var r=n.util.createBuffer();return a(r,"ssh-rsa"),i(r,t.e),i(r,t.n),"ssh-rsa "+n.util.encode64(r.bytes())+" "+e},o.privateKeyToOpenSSH=function(t,e){return e?n.pki.encryptRsaPrivateKey(t,e,{legacy:!0,algorithm:"aes128"}):n.pki.privateKeyToPem(t)},o.getPublicKeyFingerprint=function(t,e){var r=(e=e||{}).md||n.md.md5.create(),o=n.util.createBuffer();a(o,"ssh-rsa"),i(o,t.e),i(o,t.n),r.start(),r.update(o.getBytes());var s=r.digest();if("hex"===e.encoding){var u=s.toHex();return e.delimiter?u.match(/.{2}/g).join(e.delimiter):u}if("binary"===e.encoding)return s.getBytes();if(e.encoding)throw new Error('Unknown encoding "'+e.encoding+'".');return s}}])},"object"==s(e)&&"object"==s(t)?t.exports=a():(o=[],void 0===(i="function"==typeof(n=a)?n.apply(e,o):n)||(t.exports=i))},7965:function(t,e,r){"use strict";t.exports=o;var n=r(4933);function o(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}o.Varint=0,o.Fixed64=1,o.Bytes=2,o.Fixed32=5;var i="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function a(t){return t.type===o.Bytes?t.readVarint()+t.pos:t.pos+1}function s(t,e,r){return r?4294967296*e+(t>>>0):4294967296*(e>>>0)+(t>>>0)}function u(t,e,r){var n=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(7*Math.LN2));r.realloc(n);for(var o=r.pos-1;o>=t;o--)r.buf[o+n]=r.buf[o]}function l(t,e){for(var r=0;r<t.length;r++)e.writeVarint(t[r])}function c(t,e){for(var r=0;r<t.length;r++)e.writeSVarint(t[r])}function f(t,e){for(var r=0;r<t.length;r++)e.writeFloat(t[r])}function p(t,e){for(var r=0;r<t.length;r++)e.writeDouble(t[r])}function h(t,e){for(var r=0;r<t.length;r++)e.writeBoolean(t[r])}function y(t,e){for(var r=0;r<t.length;r++)e.writeFixed32(t[r])}function d(t,e){for(var r=0;r<t.length;r++)e.writeSFixed32(t[r])}function v(t,e){for(var r=0;r<t.length;r++)e.writeFixed64(t[r])}function m(t,e){for(var r=0;r<t.length;r++)e.writeSFixed64(t[r])}function b(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+16777216*t[e+3]}function g(t,e,r){t[r]=e,t[r+1]=e>>>8,t[r+2]=e>>>16,t[r+3]=e>>>24}function S(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+(t[e+3]<<24)}o.prototype={destroy:function(){this.buf=null},readFields:function(t,e,r){for(r=r||this.length;this.pos<r;){var n=this.readVarint(),o=n>>3,i=this.pos;this.type=7&n,t(o,e,this),this.pos===i&&this.skip(n)}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=b(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=S(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=b(this.buf,this.pos)+4294967296*b(this.buf,this.pos+4);return this.pos+=8,t},readSFixed64:function(){var t=b(this.buf,this.pos)+4294967296*S(this.buf,this.pos+4);return this.pos+=8,t},readFloat:function(){var t=n.read(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=n.read(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var e,r,n=this.buf;return e=127&(r=n[this.pos++]),r<128?e:(e|=(127&(r=n[this.pos++]))<<7,r<128?e:(e|=(127&(r=n[this.pos++]))<<14,r<128?e:(e|=(127&(r=n[this.pos++]))<<21,r<128?e:function(t,e,r){var n,o,i=r.buf;if(o=i[r.pos++],n=(112&o)>>4,o<128)return s(t,n,e);if(o=i[r.pos++],n|=(127&o)<<3,o<128)return s(t,n,e);if(o=i[r.pos++],n|=(127&o)<<10,o<128)return s(t,n,e);if(o=i[r.pos++],n|=(127&o)<<17,o<128)return s(t,n,e);if(o=i[r.pos++],n|=(127&o)<<24,o<128)return s(t,n,e);if(o=i[r.pos++],n|=(1&o)<<31,o<128)return s(t,n,e);throw new Error("Expected varint not more than 10 bytes")}(e|=(15&(r=n[this.pos]))<<28,t,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2==1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,e=this.pos;return this.pos=t,t-e>=12&&i?function(t,e,r){return i.decode(t.subarray(e,r))}(this.buf,e,t):function(t,e,r){var n="",o=e;for(;o<r;){var i,a,s,u=t[o],l=null,c=u>239?4:u>223?3:u>191?2:1;if(o+c>r)break;1===c?u<128&&(l=u):2===c?128==(192&(i=t[o+1]))&&(l=(31&u)<<6|63&i)<=127&&(l=null):3===c?(i=t[o+1],a=t[o+2],128==(192&i)&&128==(192&a)&&((l=(15&u)<<12|(63&i)<<6|63&a)<=2047||l>=55296&&l<=57343)&&(l=null)):4===c&&(i=t[o+1],a=t[o+2],s=t[o+3],128==(192&i)&&128==(192&a)&&128==(192&s)&&((l=(15&u)<<18|(63&i)<<12|(63&a)<<6|63&s)<=65535||l>=1114112)&&(l=null)),null===l?(l=65533,c=1):l>65535&&(l-=65536,n+=String.fromCharCode(l>>>10&1023|55296),l=56320|1023&l),n+=String.fromCharCode(l),o+=c}return n}(this.buf,e,t)},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e},readPackedVarint:function(t,e){if(this.type!==o.Bytes)return t.push(this.readVarint(e));var r=a(this);for(t=t||[];this.pos<r;)t.push(this.readVarint(e));return t},readPackedSVarint:function(t){if(this.type!==o.Bytes)return t.push(this.readSVarint());var e=a(this);for(t=t||[];this.pos<e;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){if(this.type!==o.Bytes)return t.push(this.readBoolean());var e=a(this);for(t=t||[];this.pos<e;)t.push(this.readBoolean());return t},readPackedFloat:function(t){if(this.type!==o.Bytes)return t.push(this.readFloat());var e=a(this);for(t=t||[];this.pos<e;)t.push(this.readFloat());return t},readPackedDouble:function(t){if(this.type!==o.Bytes)return t.push(this.readDouble());var e=a(this);for(t=t||[];this.pos<e;)t.push(this.readDouble());return t},readPackedFixed32:function(t){if(this.type!==o.Bytes)return t.push(this.readFixed32());var e=a(this);for(t=t||[];this.pos<e;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){if(this.type!==o.Bytes)return t.push(this.readSFixed32());var e=a(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){if(this.type!==o.Bytes)return t.push(this.readFixed64());var e=a(this);for(t=t||[];this.pos<e;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){if(this.type!==o.Bytes)return t.push(this.readSFixed64());var e=a(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed64());return t},skip:function(t){var e=7&t;if(e===o.Varint)for(;this.buf[this.pos++]>127;);else if(e===o.Bytes)this.pos=this.readVarint()+this.pos;else if(e===o.Fixed32)this.pos+=4;else{if(e!==o.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(t,e){this.writeVarint(t<<3|e)},realloc:function(t){for(var e=this.length||16;e<this.pos+t;)e*=2;if(e!==this.length){var r=new Uint8Array(e);r.set(this.buf),this.buf=r,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),g(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),g(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),g(this.buf,-1&t,this.pos),g(this.buf,Math.floor(t*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),g(this.buf,-1&t,this.pos),g(this.buf,Math.floor(t*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(t){(t=+t||0)>268435455||t<0?function(t,e){var r,n;t>=0?(r=t%4294967296|0,n=t/4294967296|0):(n=~(-t/4294967296),4294967295^(r=~(-t%4294967296))?r=r+1|0:(r=0,n=n+1|0));if(t>=0x10000000000000000||t<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),function(t,e,r){r.buf[r.pos++]=127&t|128,t>>>=7,r.buf[r.pos++]=127&t|128,t>>>=7,r.buf[r.pos++]=127&t|128,t>>>=7,r.buf[r.pos++]=127&t|128,t>>>=7,r.buf[r.pos]=127&t}(r,0,e),function(t,e){var r=(7&t)<<4;if(e.buf[e.pos++]|=r|((t>>>=3)?128:0),!t)return;if(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),!t)return;if(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),!t)return;if(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),!t)return;if(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),!t)return;e.buf[e.pos++]=127&t}(n,e)}(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127))))},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t),this.realloc(4*t.length),this.pos++;var e=this.pos;this.pos=function(t,e,r){for(var n,o,i=0;i<e.length;i++){if((n=e.charCodeAt(i))>55295&&n<57344){if(!o){n>56319||i+1===e.length?(t[r++]=239,t[r++]=191,t[r++]=189):o=n;continue}if(n<56320){t[r++]=239,t[r++]=191,t[r++]=189,o=n;continue}n=o-55296<<10|n-56320|65536,o=null}else o&&(t[r++]=239,t[r++]=191,t[r++]=189,o=null);n<128?t[r++]=n:(n<2048?t[r++]=n>>6|192:(n<65536?t[r++]=n>>12|224:(t[r++]=n>>18|240,t[r++]=n>>12&63|128),t[r++]=n>>6&63|128),t[r++]=63&n|128)}return r}(this.buf,t,this.pos);var r=this.pos-e;r>=128&&u(e,r,this),this.pos=e-1,this.writeVarint(r),this.pos+=r},writeFloat:function(t){this.realloc(4),n.write(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),n.write(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var e=t.length;this.writeVarint(e),this.realloc(e);for(var r=0;r<e;r++)this.buf[this.pos++]=t[r]},writeRawMessage:function(t,e){this.pos++;var r=this.pos;t(e,this);var n=this.pos-r;n>=128&&u(r,n,this),this.pos=r-1,this.writeVarint(n),this.pos+=n},writeMessage:function(t,e,r){this.writeTag(t,o.Bytes),this.writeRawMessage(e,r)},writePackedVarint:function(t,e){e.length&&this.writeMessage(t,l,e)},writePackedSVarint:function(t,e){e.length&&this.writeMessage(t,c,e)},writePackedBoolean:function(t,e){e.length&&this.writeMessage(t,h,e)},writePackedFloat:function(t,e){e.length&&this.writeMessage(t,f,e)},writePackedDouble:function(t,e){e.length&&this.writeMessage(t,p,e)},writePackedFixed32:function(t,e){e.length&&this.writeMessage(t,y,e)},writePackedSFixed32:function(t,e){e.length&&this.writeMessage(t,d,e)},writePackedFixed64:function(t,e){e.length&&this.writeMessage(t,v,e)},writePackedSFixed64:function(t,e){e.length&&this.writeMessage(t,m,e)},writeBytesField:function(t,e){this.writeTag(t,o.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,o.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,o.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,o.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,o.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,o.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,o.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,o.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,o.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,o.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,e){this.writeVarintField(t,Boolean(e))}}},4186:function(t){(function(){var e,r,n,o,i,a;"undefined"!=typeof performance&&null!==performance&&performance.now?t.exports=function(){return performance.now()}:"undefined"!=typeof process&&null!==process&&process.hrtime?(t.exports=function(){return(e()-i)/1e6},r=process.hrtime,o=(e=function(){var t;return 1e9*(t=r())[0]+t[1]})(),a=1e9*process.uptime(),i=o-a):Date.now?(t.exports=function(){return Date.now()-n},n=Date.now()):(t.exports=function(){return(new Date).getTime()-n},n=(new Date).getTime())}).call(this)},5246:function(t,e,r){var n,o,i;function a(t){"@babel/helpers - typeof";return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}i=function(){"use strict";function t(t){var e=this.constructor;return this.then(function(r){return e.resolve(t()).then(function(){return r})},function(r){return e.resolve(t()).then(function(){return e.reject(r)})})}function e(t){return new this(function(e,r){if(!t||void 0===t.length)return r(new TypeError(a(t)+" "+t+" is not iterable(cannot read property Symbol(Symbol.iterator))"));var n=Array.prototype.slice.call(t);if(0===n.length)return e([]);var o=n.length;function i(t,r){if(r&&("object"===a(r)||"function"==typeof r)){var s=r.then;if("function"==typeof s)return void s.call(r,function(e){i(t,e)},function(r){n[t]={status:"rejected",reason:r},0==--o&&e(n)})}n[t]={status:"fulfilled",value:r},0==--o&&e(n)}for(var s=0;s<n.length;s++)i(s,n[s])})}var n=setTimeout;function o(t){return Boolean(t&&void 0!==t.length)}function i(){}function s(t){if(!(this instanceof s))throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],p(t,this)}function u(t,e){for(;3===t._state;)t=t._value;0!==t._state?(t._handled=!0,s._immediateFn(function(){var r=1===t._state?e.onFulfilled:e.onRejected;if(null!==r){var n;try{n=r(t._value)}catch(t){return void c(e.promise,t)}l(e.promise,n)}else(1===t._state?l:c)(e.promise,t._value)})):t._deferreds.push(e)}function l(t,e){try{if(e===t)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"===a(e)||"function"==typeof e)){var r=e.then;if(e instanceof s)return t._state=3,t._value=e,void f(t);if("function"==typeof r)return void p((n=r,o=e,function(){n.apply(o,arguments)}),t)}t._state=1,t._value=e,f(t)}catch(e){c(t,e)}var n,o}function c(t,e){t._state=2,t._value=e,f(t)}function f(t){2===t._state&&0===t._deferreds.length&&s._immediateFn(function(){t._handled||s._unhandledRejectionFn(t._value)});for(var e=0,r=t._deferreds.length;e<r;e++)u(t,t._deferreds[e]);t._deferreds=null}function p(t,e){var r=!1;try{t(function(t){r||(r=!0,l(e,t))},function(t){r||(r=!0,c(e,t))})}catch(t){if(r)return;r=!0,c(e,t)}}s.prototype.catch=function(t){return this.then(null,t)},s.prototype.then=function(t,e){var r=new this.constructor(i);return u(this,new function(t,e,r){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=r}(t,e,r)),r},s.prototype.finally=t,s.all=function(t){return new s(function(e,r){if(!o(t))return r(new TypeError("Promise.all accepts an array"));var n=Array.prototype.slice.call(t);if(0===n.length)return e([]);var i=n.length;function s(t,o){try{if(o&&("object"===a(o)||"function"==typeof o)){var u=o.then;if("function"==typeof u)return void u.call(o,function(e){s(t,e)},r)}n[t]=o,0==--i&&e(n)}catch(t){r(t)}}for(var u=0;u<n.length;u++)s(u,n[u])})},s.allSettled=e,s.resolve=function(t){return t&&"object"===a(t)&&t.constructor===s?t:new s(function(e){e(t)})},s.reject=function(t){return new s(function(e,r){r(t)})},s.race=function(t){return new s(function(e,r){if(!o(t))return r(new TypeError("Promise.race accepts an array"));for(var n=0,i=t.length;n<i;n++)s.resolve(t[n]).then(e,r)})},s._immediateFn="function"==typeof setImmediate&&function(t){setImmediate(t)}||function(t){n(t,0)},s._unhandledRejectionFn=function(t){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)};var h=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==r.g)return r.g;throw new Error("unable to locate global object")}();"function"!=typeof h.Promise?h.Promise=s:(h.Promise.prototype.finally||(h.Promise.prototype.finally=t),h.Promise.allSettled||(h.Promise.allSettled=e))},"object"===a(e)?i():void 0===(o="function"==typeof(n=i)?n.call(e,r,e,t):n)||(t.exports=o)},1089:function(t,e,r){var n,o,i;function a(t){"@babel/helpers - typeof";return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}i=function(){"use strict";function t(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function e(t,e){return t<e?-1:t>e?1:0}return function(r,n,o,i,a){!function e(r,n,o,i,a){for(;i>o;){if(i-o>600){var s=i-o+1,u=n-o+1,l=Math.log(s),c=.5*Math.exp(2*l/3),f=.5*Math.sqrt(l*c*(s-c)/s)*(u-s/2<0?-1:1),p=Math.max(o,Math.floor(n-u*c/s+f)),h=Math.min(i,Math.floor(n+(s-u)*c/s+f));e(r,n,p,h,a)}var y=r[n],d=o,v=i;for(t(r,o,n),a(r[i],y)>0&&t(r,o,i);d<v;){for(t(r,d,v),d++,v--;a(r[d],y)<0;)d++;for(;a(r[v],y)>0;)v--}0===a(r[o],y)?t(r,o,v):t(r,++v,i),v<=n&&(o=v+1),n<=v&&(i=v-1)}}(r,n,o||0,i||r.length-1,a||e)}},"object"===a(e)?t.exports=i():void 0===(o="function"==typeof(n=i)?n.call(e,r,e,t):n)||(t.exports=o)},368:function(t,e,r){for(var n=r(4186),o="undefined"==typeof window?r.g:window,i=["moz","webkit"],a="AnimationFrame",s=o["request"+a],u=o["cancel"+a]||o["cancelRequest"+a],l=0;!s&&l<i.length;l++)s=o[i[l]+"Request"+a],u=o[i[l]+"Cancel"+a]||o[i[l]+"CancelRequest"+a];if(!s||!u){var c=0,f=0,p=[];s=function(t){if(0===p.length){var e=n(),r=Math.max(0,1e3/60-(e-c));c=r+e,setTimeout(function(){var t=p.slice(0);p.length=0;for(var e=function(){if(!t[r].cancelled)try{t[r].callback(c)}catch(t){setTimeout(function(){throw t},0)}},r=0;r<t.length;r++)e()},Math.round(r))}return p.push({handle:++f,callback:t,cancelled:!1}),f},u=function(t){for(var e=0;e<p.length;e++)p[e].handle===t&&(p[e].cancelled=!0)}}t.exports=function(t){return s.call(o,t)},t.exports.cancel=function(){u.apply(o,arguments)},t.exports.polyfill=function(t){t||(t=o),t.requestAnimationFrame=s,t.cancelAnimationFrame=u}},833:function(t,e,r){"use strict";t.exports=o,t.exports.default=o;var n=r(1089);function o(t,e){if(!(this instanceof o))return new o(t,e);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&this._initFormat(e),this.clear()}function i(t,e,r){if(!r)return e.indexOf(t);for(var n=0;n<e.length;n++)if(r(t,e[n]))return n;return-1}function a(t,e){s(t,0,t.children.length,e,t)}function s(t,e,r,n,o){o||(o=d(null)),o.minX=1/0,o.minY=1/0,o.maxX=-1/0,o.maxY=-1/0;for(var i,a=e;a<r;a++)i=t.children[a],u(o,t.leaf?n(i):i);return o}function u(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function l(t,e){return t.minX-e.minX}function c(t,e){return t.minY-e.minY}function f(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function p(t){return t.maxX-t.minX+(t.maxY-t.minY)}function h(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function y(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function d(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function v(t,e,r,o,i){for(var a,s=[e,r];s.length;)(r=s.pop())-(e=s.pop())<=o||(a=e+Math.ceil((r-e)/o/2)*o,n(t,a,e,r,i),s.push(e,a,a,r))}o.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,r=[],n=this.toBBox;if(!y(t,e))return r;for(var o,i,a,s,u=[];e;){for(o=0,i=e.children.length;o<i;o++)a=e.children[o],y(t,s=e.leaf?n(a):a)&&(e.leaf?r.push(a):h(t,s)?this._all(a,r):u.push(a));e=u.pop()}return r},collides:function(t){var e=this.data,r=this.toBBox;if(!y(t,e))return!1;for(var n,o,i,a,s=[];e;){for(n=0,o=e.children.length;n<o;n++)if(i=e.children[n],y(t,a=e.leaf?r(i):i)){if(e.leaf||h(t,a))return!0;s.push(i)}e=s.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,r=t.length;e<r;e++)this.insert(t[e]);return this}var n=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){var o=this.data;this.data=n,n=o}this._insert(n,this.data.height-n.height-1,!0)}else this.data=n;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=d([]),this},remove:function(t,e){if(!t)return this;for(var r,n,o,a,s=this.data,u=this.toBBox(t),l=[],c=[];s||l.length;){if(s||(s=l.pop(),n=l[l.length-1],r=c.pop(),a=!0),s.leaf&&-1!==(o=i(t,s.children,e)))return s.children.splice(o,1),l.push(s),this._condense(l),this;a||s.leaf||!h(s,u)?n?(r++,s=n.children[r],a=!1):s=null:(l.push(s),c.push(r),r=0,n=s,s=s.children[0])}return this},toBBox:function(t){return t},compareMinX:l,compareMinY:c,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var r=[];t;)t.leaf?e.push.apply(e,t.children):r.push.apply(r,t.children),t=r.pop();return e},_build:function(t,e,r,n){var o,i=r-e+1,s=this._maxEntries;if(i<=s)return a(o=d(t.slice(e,r+1)),this.toBBox),o;n||(n=Math.ceil(Math.log(i)/Math.log(s)),s=Math.ceil(i/Math.pow(s,n-1))),(o=d([])).leaf=!1,o.height=n;var u,l,c,f,p=Math.ceil(i/s),h=p*Math.ceil(Math.sqrt(s));for(v(t,e,r,h,this.compareMinX),u=e;u<=r;u+=h)for(v(t,u,c=Math.min(u+h-1,r),p,this.compareMinY),l=u;l<=c;l+=p)f=Math.min(l+p-1,c),o.children.push(this._build(t,l,f,n-1));return a(o,this.toBBox),o},_chooseSubtree:function(t,e,r,n){for(var o,i,a,s,u,l,c,p,h,y;n.push(e),!e.leaf&&n.length-1!==r;){for(c=p=1/0,o=0,i=e.children.length;o<i;o++)u=f(a=e.children[o]),h=t,y=a,(l=(Math.max(y.maxX,h.maxX)-Math.min(y.minX,h.minX))*(Math.max(y.maxY,h.maxY)-Math.min(y.minY,h.minY))-u)<p?(p=l,c=u<c?u:c,s=a):l===p&&u<c&&(c=u,s=a);e=s||e.children[0]}return e},_insert:function(t,e,r){var n=this.toBBox,o=r?t:n(t),i=[],a=this._chooseSubtree(o,this.data,e,i);for(a.children.push(t),u(a,o);e>=0&&i[e].children.length>this._maxEntries;)this._split(i,e),e--;this._adjustParentBBoxes(o,i,e)},_split:function(t,e){var r=t[e],n=r.children.length,o=this._minEntries;this._chooseSplitAxis(r,o,n);var i=this._chooseSplitIndex(r,o,n),s=d(r.children.splice(i,r.children.length-i));s.height=r.height,s.leaf=r.leaf,a(r,this.toBBox),a(s,this.toBBox),e?t[e-1].children.push(s):this._splitRoot(r,s)},_splitRoot:function(t,e){this.data=d([t,e]),this.data.height=t.height+1,this.data.leaf=!1,a(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,r){var n,o,i,a,u,l,c,p,h,y,d,v,m,b;for(l=c=1/0,n=e;n<=r-e;n++)o=s(t,0,n,this.toBBox),i=s(t,n,r,this.toBBox),h=o,y=i,void 0,void 0,void 0,void 0,d=Math.max(h.minX,y.minX),v=Math.max(h.minY,y.minY),m=Math.min(h.maxX,y.maxX),b=Math.min(h.maxY,y.maxY),a=Math.max(0,m-d)*Math.max(0,b-v),u=f(o)+f(i),a<l?(l=a,p=n,c=u<c?u:c):a===l&&u<c&&(c=u,p=n);return p},_chooseSplitAxis:function(t,e,r){var n=t.leaf?this.compareMinX:l,o=t.leaf?this.compareMinY:c;this._allDistMargin(t,e,r,n)<this._allDistMargin(t,e,r,o)&&t.children.sort(n)},_allDistMargin:function(t,e,r,n){t.children.sort(n);var o,i,a=this.toBBox,l=s(t,0,e,a),c=s(t,r-e,r,a),f=p(l)+p(c);for(o=e;o<r-e;o++)i=t.children[o],u(l,t.leaf?a(i):i),f+=p(l);for(o=r-e-1;o>=e;o--)i=t.children[o],u(c,t.leaf?a(i):i),f+=p(c);return f},_adjustParentBBoxes:function(t,e,r){for(var n=r;n>=0;n--)u(e[n],t)},_condense:function(t){for(var e,r=t.length-1;r>=0;r--)0===t[r].children.length?r>0?(e=t[r-1].children).splice(e.indexOf(t[r]),1):this.clear():a(t[r],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}}},9973:function(t){t.exports=function(t){this.ok=!1,this.alpha=1,"#"==t.charAt(0)&&(t=t.substr(1,6)),t=(t=t.replace(/ /g,"")).toLowerCase();var e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"};t=e[t]||t;for(var r=[{re:/^rgba\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3}),\s*((?:\d?\.)?\d)\)$/,example:["rgba(123, 234, 45, 0.8)","rgba(255,234,245,1.0)"],process:function(t){return[parseInt(t[1]),parseInt(t[2]),parseInt(t[3]),parseFloat(t[4])]}},{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(t){return[parseInt(t[1]),parseInt(t[2]),parseInt(t[3])]}},{re:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,example:["#00ff00","336699"],process:function(t){return[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]}},{re:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,example:["#fb0","f0f"],process:function(t){return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16)]}}],n=0;n<r.length;n++){var o=r[n].re,i=r[n].process,a=o.exec(t);if(a){var s=i(a);this.r=s[0],this.g=s[1],this.b=s[2],s.length>3&&(this.alpha=s[3]),this.ok=!0}}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.alpha=this.alpha<0?0:this.alpha>1||isNaN(this.alpha)?1:this.alpha,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toRGBA=function(){return"rgba("+this.r+", "+this.g+", "+this.b+", "+this.alpha+")"},this.toHex=function(){var t=this.r.toString(16),e=this.g.toString(16),r=this.b.toString(16);return 1==t.length&&(t="0"+t),1==e.length&&(e="0"+e),1==r.length&&(r="0"+r),"#"+t+e+r},this.getHelpXML=function(){for(var t=new Array,n=0;n<r.length;n++)for(var o=r[n].example,i=0;i<o.length;i++)t[t.length]=o[i];for(var a in e)t[t.length]=a;var s=document.createElement("ul");s.setAttribute("id","rgbcolor-examples");for(n=0;n<t.length;n++)try{var u=document.createElement("li"),l=new RGBColor(t[n]),c=document.createElement("div");c.style.cssText="margin: 3px; border: 1px solid black; background:"+l.toHex()+"; color:"+l.toHex(),c.appendChild(document.createTextNode("test"));var f=document.createTextNode(" "+t[n]+" -> "+l.toRGB()+" -> "+l.toHex());u.appendChild(c),u.appendChild(f),s.appendChild(u)}catch(t){}return s}}},1097:function(t){var e=/^[-+]?0x[a-fA-F0-9]+$/,r=/^([\-\+])?(0*)(\.[0-9]+([eE]\-?[0-9]+)?|[0-9]+(\.[0-9]+([eE]\-?[0-9]+)?)?)$/;!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt),!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);var n={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};t.exports=function(t){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(o=Object.assign({},n,o),!t||"string"!=typeof t)return t;var i=t.trim();if(void 0!==o.skipLike&&o.skipLike.test(i))return t;if(o.hex&&e.test(i))return Number.parseInt(i,16);var a=r.exec(i);if(a){var s=a[1],u=a[2],l=function(t){return t&&-1!==t.indexOf(".")?("."===(t=t.replace(/0+$/,""))?t="0":"."===t[0]?t="0"+t:"."===t[t.length-1]&&(t=t.substr(0,t.length-1)),t):t}(a[3]),c=a[4]||a[6];if(!o.leadingZeros&&u.length>0&&s&&"."!==i[2])return t;if(!o.leadingZeros&&u.length>0&&!s&&"."!==i[1])return t;var f=Number(i),p=""+f;return-1!==p.search(/[eE]/)?o.eNotation?f:t:c?o.eNotation?f:t:-1!==i.indexOf(".")?"0"===p&&""===l?f:p===l?f:s&&p==="-"+l?f:t:u?l===p?f:s+l===p?f:t:i===p?f:i===s+p?f:t}return t}},5400:function(t,e,r){var n,o;function i(t){"@babel/helpers - typeof";return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}t=r.nmd(t),function(a,s){"use strict";"object"===i(t)&&t.exports?t.exports=s():void 0===(o="function"==typeof(n=s)?n.call(e,r,e,t):n)||(t.exports=o)}(0,function(t){"use strict";var e=t&&t.IPv6;return{best:function(t){var e,r,n=t.toLowerCase().split(":"),o=n.length,i=8;for(""===n[0]&&""===n[1]&&""===n[2]?(n.shift(),n.shift()):""===n[0]&&""===n[1]?n.shift():""===n[o-1]&&""===n[o-2]&&n.pop(),-1!==n[(o=n.length)-1].indexOf(".")&&(i=7),e=0;e<o&&""!==n[e];e++);if(e<i)for(n.splice(e,1,"0000");n.length<i;)n.splice(e,0,"0000");for(var a=0;a<i;a++){r=n[a].split("");for(var s=0;s<3&&"0"===r[0]&&r.length>1;s++)r.splice(0,1);n[a]=r.join("")}var u=-1,l=0,c=0,f=-1,p=!1;for(a=0;a<i;a++)p?"0"===n[a]?c+=1:(p=!1,c>l&&(u=f,l=c)):"0"===n[a]&&(p=!0,f=a,c=1);c>l&&(u=f,l=c),l>1&&n.splice(u,l,""),o=n.length;var h="";for(""===n[0]&&(h=":"),a=0;a<o&&(h+=n[a],a!==o-1);a++)h+=":";return""===n[o-1]&&(h+=":"),h},noConflict:function(){return t.IPv6===this&&(t.IPv6=e),this}}})},2714:function(t,e,r){var n,o;function i(t){"@babel/helpers - typeof";return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}t=r.nmd(t),function(a,s){"use strict";"object"===i(t)&&t.exports?t.exports=s():void 0===(o="function"==typeof(n=s)?n.call(e,r,e,t):n)||(t.exports=o)}(0,function(t){"use strict";var e=t&&t.SecondLevelDomains,r={list:{ac:" com gov mil net org ",ae:" ac co gov mil name net org pro sch ",af:" com edu gov net org ",al:" com edu gov mil net org ",ao:" co ed gv it og pb ",ar:" com edu gob gov int mil net org tur ",at:" ac co gv or ",au:" asn com csiro edu gov id net org ",ba:" co com edu gov mil net org rs unbi unmo unsa untz unze ",bb:" biz co com edu gov info net org store tv ",bh:" biz cc com edu gov info net org ",bn:" com edu gov net org ",bo:" com edu gob gov int mil net org tv ",br:" adm adv agr am arq art ato b bio blog bmd cim cng cnt com coop ecn edu eng esp etc eti far flog fm fnd fot fst g12 ggf gov imb ind inf jor jus lel mat med mil mus net nom not ntr odo org ppg pro psc psi qsl rec slg srv tmp trd tur tv vet vlog wiki zlg ",bs:" com edu gov net org ",bz:" du et om ov rg ",ca:" ab bc mb nb nf nl ns nt nu on pe qc sk yk ",ck:" biz co edu gen gov info net org ",cn:" ac ah bj com cq edu fj gd gov gs gx gz ha hb he hi hl hn jl js jx ln mil net nm nx org qh sc sd sh sn sx tj tw xj xz yn zj ",co:" com edu gov mil net nom org ",cr:" ac c co ed fi go or sa ",cy:" ac biz com ekloges gov ltd name net org parliament press pro tm ",do:" art com edu gob gov mil net org sld web ",dz:" art asso com edu gov net org pol ",ec:" com edu fin gov info med mil net org pro ",eg:" com edu eun gov mil name net org sci ",er:" com edu gov ind mil net org rochest w ",es:" com edu gob nom org ",et:" biz com edu gov info name net org ",fj:" ac biz com info mil name net org pro ",fk:" ac co gov net nom org ",fr:" asso com f gouv nom prd presse tm ",gg:" co net org ",gh:" com edu gov mil org ",gn:" ac com gov net org ",gr:" com edu gov mil net org ",gt:" com edu gob ind mil net org ",gu:" com edu gov net org ",hk:" com edu gov idv net org ",hu:" 2000 agrar bolt casino city co erotica erotika film forum games hotel info ingatlan jogasz konyvelo lakas media news org priv reklam sex shop sport suli szex tm tozsde utazas video ",id:" ac co go mil net or sch web ",il:" ac co gov idf k12 muni net org ",in:" ac co edu ernet firm gen gov i ind mil net nic org res ",iq:" com edu gov i mil net org ",ir:" ac co dnssec gov i id net org sch ",it:" edu gov ",je:" co net org ",jo:" com edu gov mil name net org sch ",jp:" ac ad co ed go gr lg ne or ",ke:" ac co go info me mobi ne or sc ",kh:" com edu gov mil net org per ",ki:" biz com de edu gov info mob net org tel ",km:" asso com coop edu gouv k medecin mil nom notaires pharmaciens presse tm veterinaire ",kn:" edu gov net org ",kr:" ac busan chungbuk chungnam co daegu daejeon es gangwon go gwangju gyeongbuk gyeonggi gyeongnam hs incheon jeju jeonbuk jeonnam k kg mil ms ne or pe re sc seoul ulsan ",kw:" com edu gov net org ",ky:" com edu gov net org ",kz:" com edu gov mil net org ",lb:" com edu gov net org ",lk:" assn com edu gov grp hotel int ltd net ngo org sch soc web ",lr:" com edu gov net org ",lv:" asn com conf edu gov id mil net org ",ly:" com edu gov id med net org plc sch ",ma:" ac co gov m net org press ",mc:" asso tm ",me:" ac co edu gov its net org priv ",mg:" com edu gov mil nom org prd tm ",mk:" com edu gov inf name net org pro ",ml:" com edu gov net org presse ",mn:" edu gov org ",mo:" com edu gov net org ",mt:" com edu gov net org ",mv:" aero biz com coop edu gov info int mil museum name net org pro ",mw:" ac co com coop edu gov int museum net org ",mx:" com edu gob net org ",my:" com edu gov mil name net org sch ",nf:" arts com firm info net other per rec store web ",ng:" biz com edu gov mil mobi name net org sch ",ni:" ac co com edu gob mil net nom org ",np:" com edu gov mil net org ",nr:" biz com edu gov info net org ",om:" ac biz co com edu gov med mil museum net org pro sch ",pe:" com edu gob mil net nom org sld ",ph:" com edu gov i mil net ngo org ",pk:" biz com edu fam gob gok gon gop gos gov net org web ",pl:" art bialystok biz com edu gda gdansk gorzow gov info katowice krakow lodz lublin mil net ngo olsztyn org poznan pwr radom slupsk szczecin torun warszawa waw wroc wroclaw zgora ",pr:" ac biz com edu est gov info isla name net org pro prof ",ps:" com edu gov net org plo sec ",pw:" belau co ed go ne or ",ro:" arts com firm info nom nt org rec store tm www ",rs:" ac co edu gov in org ",sb:" com edu gov net org ",sc:" com edu gov net org ",sh:" co com edu gov net nom org ",sl:" com edu gov net org ",st:" co com consulado edu embaixada gov mil net org principe saotome store ",sv:" com edu gob org red ",sz:" ac co org ",tr:" av bbs bel biz com dr edu gen gov info k12 name net org pol tel tsk tv web ",tt:" aero biz cat co com coop edu gov info int jobs mil mobi museum name net org pro tel travel ",tw:" club com ebiz edu game gov idv mil net org ",mu:" ac co com gov net or org ",mz:" ac co edu gov org ",na:" co com ",nz:" ac co cri geek gen govt health iwi maori mil net org parliament school ",pa:" abo ac com edu gob ing med net nom org sld ",pt:" com edu gov int net nome org publ ",py:" com edu gov mil net org ",qa:" com edu gov mil net org ",re:" asso com nom ",ru:" ac adygeya altai amur arkhangelsk astrakhan bashkiria belgorod bir bryansk buryatia cbg chel chelyabinsk chita chukotka chuvashia com dagestan e-burg edu gov grozny int irkutsk ivanovo izhevsk jar joshkar-ola kalmykia kaluga kamchatka karelia kazan kchr kemerovo khabarovsk khakassia khv kirov koenig komi kostroma kranoyarsk kuban kurgan kursk lipetsk magadan mari mari-el marine mil mordovia mosreg msk murmansk nalchik net nnov nov novosibirsk nsk omsk orenburg org oryol penza perm pp pskov ptz rnd ryazan sakhalin samara saratov simbirsk smolensk spb stavropol stv surgut tambov tatarstan tom tomsk tsaritsyn tsk tula tuva tver tyumen udm udmurtia ulan-ude vladikavkaz vladimir vladivostok volgograd vologda voronezh vrn vyatka yakutia yamal yekaterinburg yuzhno-sakhalinsk ",rw:" ac co com edu gouv gov int mil net ",sa:" com edu gov med net org pub sch ",sd:" com edu gov info med net org tv ",se:" a ac b bd c d e f g h i k l m n o org p parti pp press r s t tm u w x y z ",sg:" com edu gov idn net org per ",sn:" art com edu gouv org perso univ ",sy:" com edu gov mil net news org ",th:" ac co go in mi net or ",tj:" ac biz co com edu go gov info int mil name net nic org test web ",tn:" agrinet com defense edunet ens fin gov ind info intl mincom nat net org perso rnrt rns rnu tourism ",tz:" ac co go ne or ",ua:" biz cherkassy chernigov chernovtsy ck cn co com crimea cv dn dnepropetrovsk donetsk dp edu gov if in ivano-frankivsk kh kharkov kherson khmelnitskiy kiev kirovograd km kr ks kv lg lugansk lutsk lviv me mk net nikolaev od odessa org pl poltava pp rovno rv sebastopol sumy te ternopil uzhgorod vinnica vn zaporizhzhe zhitomir zp zt ",ug:" ac co go ne or org sc ",uk:" ac bl british-library co cym gov govt icnet jet lea ltd me mil mod national-library-scotland nel net nhs nic nls org orgn parliament plc police sch scot soc ",us:" dni fed isa kids nsn ",uy:" com edu gub mil net org ",ve:" co com edu gob info mil net org web ",vi:" co com k12 net org ",vn:" ac biz com edu gov health info int name net org pro ",ye:" co com gov ltd me net org plc ",yu:" ac co edu gov org ",za:" ac agric alt bourse city co cybernet db edu gov grondar iaccess imt inca landesign law mil net ngo nis nom olivetti org pix school tm web ",zm:" ac co com edu gov net org sch ",com:"ar br cn de eu gb gr hu jpn kr no qc ru sa se uk us uy za ",net:"gb jp se uk ",org:"ae",de:"com "},has:function(t){var e=t.lastIndexOf(".");if(e<=0||e>=t.length-1)return!1;var n=t.lastIndexOf(".",e-1);if(n<=0||n>=e-1)return!1;var o=r.list[t.slice(e+1)];return!!o&&o.indexOf(" "+t.slice(n+1,e)+" ")>=0},is:function(t){var e=t.lastIndexOf(".");if(e<=0||e>=t.length-1)return!1;if(t.lastIndexOf(".",e-1)>=0)return!1;var n=r.list[t.slice(e+1)];return!!n&&n.indexOf(" "+t.slice(0,e)+" ")>=0},get:function(t){var e=t.lastIndexOf(".");if(e<=0||e>=t.length-1)return null;var n=t.lastIndexOf(".",e-1);if(n<=0||n>=e-1)return null;var o=r.list[t.slice(e+1)];return o?o.indexOf(" "+t.slice(n+1,e)+" ")<0?null:t.slice(n+1):null},noConflict:function(){return t.SecondLevelDomains===this&&(t.SecondLevelDomains=e),this}};return r})},7411:function(t,e,r){var n,o,i;function a(t){"@babel/helpers - typeof";return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}t=r.nmd(t),function(s,u){"use strict";"object"===a(t)&&t.exports?t.exports=u(r(9018),r(5400),r(2714)):(o=[r(9018),r(5400),r(2714)],void 0===(i="function"==typeof(n=u)?n.apply(e,o):n)||(t.exports=i))}(0,function(t,e,r,n){"use strict";var o=n&&n.URI;function i(t,e){var r=arguments.length>=1,n=arguments.length>=2;if(!(this instanceof i))return r?n?new i(t,e):new i(t):new i;if(void 0===t){if(r)throw new TypeError("undefined is not a valid argument for URI");t="undefined"!=typeof location?location.href+"":""}if(null===t&&r)throw new TypeError("null is not a valid argument for URI");return this.href(t),void 0!==e?this.absoluteTo(e):this}i.version="1.19.11";var s=i.prototype,u=Object.prototype.hasOwnProperty;function l(t){return t.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}function c(t){return void 0===t?"Undefined":String(Object.prototype.toString.call(t)).slice(8,-1)}function f(t){return"Array"===c(t)}function p(t,e){var r,n,o={};if("RegExp"===c(e))o=null;else if(f(e))for(r=0,n=e.length;r<n;r++)o[e[r]]=!0;else o[e]=!0;for(r=0,n=t.length;r<n;r++){(o&&void 0!==o[t[r]]||!o&&e.test(t[r]))&&(t.splice(r,1),n--,r--)}return t}function h(t,e){var r,n;if(f(e)){for(r=0,n=e.length;r<n;r++)if(!h(t,e[r]))return!1;return!0}var o=c(e);for(r=0,n=t.length;r<n;r++)if("RegExp"===o){if("string"==typeof t[r]&&t[r].match(e))return!0}else if(t[r]===e)return!0;return!1}function y(t,e){if(!f(t)||!f(e))return!1;if(t.length!==e.length)return!1;t.sort(),e.sort();for(var r=0,n=t.length;r<n;r++)if(t[r]!==e[r])return!1;return!0}function d(t){return t.replace(/^\/+|\/+$/g,"")}function v(t){return escape(t)}function m(t){return encodeURIComponent(t).replace(/[!'()*]/g,v).replace(/\*/g,"%2A")}i._parts=function(){return{protocol:null,username:null,password:null,hostname:null,urn:null,port:null,path:null,query:null,fragment:null,preventInvalidHostname:i.preventInvalidHostname,duplicateQueryParameters:i.duplicateQueryParameters,escapeQuerySpace:i.escapeQuerySpace}},i.preventInvalidHostname=!1,i.duplicateQueryParameters=!1,i.escapeQuerySpace=!0,i.protocol_expression=/^[a-z][a-z0-9.+-]*$/i,i.idn_expression=/[^a-z0-9\._-]/i,i.punycode_expression=/(xn--)/i,i.ip4_expression=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,i.ip6_expression=/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/,i.find_uri_expression=/\b((?:[a-z][\w-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?«»“”‘’]))/gi,i.findUri={start:/\b(?:([a-z][a-z0-9.+-]*:\/\/)|www\.)/gi,end:/[\s\r\n]|$/,trim:/[`!()\[\]{};:'".,<>?«»“”„‘’]+$/,parens:/(\([^\)]*\)|\[[^\]]*\]|\{[^}]*\}|<[^>]*>)/g},i.leading_whitespace_expression=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,i.ascii_tab_whitespace=/[\u0009\u000A\u000D]+/g,i.defaultPorts={http:"80",https:"443",ftp:"21",gopher:"70",ws:"80",wss:"443"},i.hostProtocols=["http","https"],i.invalid_hostname_characters=/[^a-zA-Z0-9\.\-:_]/,i.domAttributes={a:"href",blockquote:"cite",link:"href",base:"href",script:"src",form:"action",img:"src",area:"href",iframe:"src",embed:"src",source:"src",track:"src",input:"src",audio:"src",video:"src"},i.getDomAttribute=function(t){if(t&&t.nodeName){var e=t.nodeName.toLowerCase();if("input"!==e||"image"===t.type)return i.domAttributes[e]}},i.encode=m,i.decode=decodeURIComponent,i.iso8859=function(){i.encode=escape,i.decode=unescape},i.unicode=function(){i.encode=m,i.decode=decodeURIComponent},i.characters={pathname:{encode:{expression:/%(24|26|2B|2C|3B|3D|3A|40)/gi,map:{"%24":"$","%26":"&","%2B":"+","%2C":",","%3B":";","%3D":"=","%3A":":","%40":"@"}},decode:{expression:/[\/\?#]/g,map:{"/":"%2F","?":"%3F","#":"%23"}}},reserved:{encode:{expression:/%(21|23|24|26|27|28|29|2A|2B|2C|2F|3A|3B|3D|3F|40|5B|5D)/gi,map:{"%3A":":","%2F":"/","%3F":"?","%23":"#","%5B":"[","%5D":"]","%40":"@","%21":"!","%24":"$","%26":"&","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"="}}},urnpath:{encode:{expression:/%(21|24|27|28|29|2A|2B|2C|3B|3D|40)/gi,map:{"%21":"!","%24":"$","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"=","%40":"@"}},decode:{expression:/[\/\?#:]/g,map:{"/":"%2F","?":"%3F","#":"%23",":":"%3A"}}}},i.encodeQuery=function(t,e){var r=i.encode(t+"");return void 0===e&&(e=i.escapeQuerySpace),e?r.replace(/%20/g,"+"):r},i.decodeQuery=function(t,e){t+="",void 0===e&&(e=i.escapeQuerySpace);try{return i.decode(e?t.replace(/\+/g,"%20"):t)}catch(e){return t}};var b,g={encode:"encode",decode:"decode"},S=function(t,e){return function(r){try{return i[e](r+"").replace(i.characters[t][e].expression,function(r){return i.characters[t][e].map[r]})}catch(t){return r}}};for(b in g)i[b+"PathSegment"]=S("pathname",g[b]),i[b+"UrnPathSegment"]=S("urnpath",g[b]);var w=function(t,e,r){return function(n){var o;o=r?function(t){return i[e](i[r](t))}:i[e];for(var a=(n+"").split(t),s=0,u=a.length;s<u;s++)a[s]=o(a[s]);return a.join(t)}};function _(t){return function(e,r){return void 0===e?this._parts[t]||"":(this._parts[t]=e||null,this.build(!r),this)}}function O(t,e){return function(r,n){return void 0===r?this._parts[t]||"":(null!==r&&(r+="").charAt(0)===e&&(r=r.substring(1)),this._parts[t]=r,this.build(!n),this)}}i.decodePath=w("/","decodePathSegment"),i.decodeUrnPath=w(":","decodeUrnPathSegment"),i.recodePath=w("/","encodePathSegment","decode"),i.recodeUrnPath=w(":","encodeUrnPathSegment","decode"),i.encodeReserved=S("reserved","encode"),i.parse=function(t,e){var r;return e||(e={preventInvalidHostname:i.preventInvalidHostname}),(r=(t=(t=t.replace(i.leading_whitespace_expression,"")).replace(i.ascii_tab_whitespace,"")).indexOf("#"))>-1&&(e.fragment=t.substring(r+1)||null,t=t.substring(0,r)),(r=t.indexOf("?"))>-1&&(e.query=t.substring(r+1)||null,t=t.substring(0,r)),"//"===(t=(t=t.replace(/^(https?|ftp|wss?)?:+[/\\]*/i,"$1://")).replace(/^[/\\]{2,}/i,"//")).substring(0,2)?(e.protocol=null,t=t.substring(2),t=i.parseAuthority(t,e)):(r=t.indexOf(":"))>-1&&(e.protocol=t.substring(0,r)||null,e.protocol&&!e.protocol.match(i.protocol_expression)?e.protocol=void 0:"//"===t.substring(r+1,r+3).replace(/\\/g,"/")?(t=t.substring(r+3),t=i.parseAuthority(t,e)):(t=t.substring(r+1),e.urn=!0)),e.path=t,e},i.parseHost=function(t,e){t||(t="");var r,n,o=(t=t.replace(/\\/g,"/")).indexOf("/");if(-1===o&&(o=t.length),"["===t.charAt(0))r=t.indexOf("]"),e.hostname=t.substring(1,r)||null,e.port=t.substring(r+2,o)||null,"/"===e.port&&(e.port=null);else{var a=t.indexOf(":"),s=t.indexOf("/"),u=t.indexOf(":",a+1);-1!==u&&(-1===s||u<s)?(e.hostname=t.substring(0,o)||null,e.port=null):(n=t.substring(0,o).split(":"),e.hostname=n[0]||null,e.port=n[1]||null)}return e.hostname&&"/"!==t.substring(o).charAt(0)&&(o++,t="/"+t),e.preventInvalidHostname&&i.ensureValidHostname(e.hostname,e.protocol),e.port&&i.ensureValidPort(e.port),t.substring(o)||"/"},i.parseAuthority=function(t,e){return t=i.parseUserinfo(t,e),i.parseHost(t,e)},i.parseUserinfo=function(t,e){var r=t;-1!==t.indexOf("\\")&&(t=t.replace(/\\/g,"/"));var n,o=t.indexOf("/"),a=t.lastIndexOf("@",o>-1?o:t.length-1);return a>-1&&(-1===o||a<o)?(n=t.substring(0,a).split(":"),e.username=n[0]?i.decode(n[0]):null,n.shift(),e.password=n[0]?i.decode(n.join(":")):null,t=r.substring(a+1)):(e.username=null,e.password=null),t},i.parseQuery=function(t,e){if(!t)return{};if(!(t=t.replace(/&+/g,"&").replace(/^\?*&*|&+$/g,"")))return{};for(var r,n,o,a={},s=t.split("&"),l=s.length,c=0;c<l;c++)r=s[c].split("="),n=i.decodeQuery(r.shift(),e),o=r.length?i.decodeQuery(r.join("="),e):null,"__proto__"!==n&&(u.call(a,n)?("string"!=typeof a[n]&&null!==a[n]||(a[n]=[a[n]]),a[n].push(o)):a[n]=o);return a},i.build=function(t){var e="",r=!1;return t.protocol&&(e+=t.protocol+":"),t.urn||!e&&!t.hostname||(e+="//",r=!0),e+=i.buildAuthority(t)||"","string"==typeof t.path&&("/"!==t.path.charAt(0)&&r&&(e+="/"),e+=t.path),"string"==typeof t.query&&t.query&&(e+="?"+t.query),"string"==typeof t.fragment&&t.fragment&&(e+="#"+t.fragment),e},i.buildHost=function(t){var e="";return t.hostname?(i.ip6_expression.test(t.hostname)?e+="["+t.hostname+"]":e+=t.hostname,t.port&&(e+=":"+t.port),e):""},i.buildAuthority=function(t){return i.buildUserinfo(t)+i.buildHost(t)},i.buildUserinfo=function(t){var e="";return t.username&&(e+=i.encode(t.username)),t.password&&(e+=":"+i.encode(t.password)),e&&(e+="@"),e},i.buildQuery=function(t,e,r){var n,o,a,s,l="";for(o in t)if("__proto__"!==o&&u.call(t,o))if(f(t[o]))for(n={},a=0,s=t[o].length;a<s;a++)void 0!==t[o][a]&&void 0===n[t[o][a]+""]&&(l+="&"+i.buildQueryParameter(o,t[o][a],r),!0!==e&&(n[t[o][a]+""]=!0));else void 0!==t[o]&&(l+="&"+i.buildQueryParameter(o,t[o],r));return l.substring(1)},i.buildQueryParameter=function(t,e,r){return i.encodeQuery(t,r)+(null!==e?"="+i.encodeQuery(e,r):"")},i.addQuery=function(t,e,r){if("object"===a(e))for(var n in e)u.call(e,n)&&i.addQuery(t,n,e[n]);else{if("string"!=typeof e)throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");if(void 0===t[e])return void(t[e]=r);"string"==typeof t[e]&&(t[e]=[t[e]]),f(r)||(r=[r]),t[e]=(t[e]||[]).concat(r)}},i.setQuery=function(t,e,r){if("object"===a(e))for(var n in e)u.call(e,n)&&i.setQuery(t,n,e[n]);else{if("string"!=typeof e)throw new TypeError("URI.setQuery() accepts an object, string as the name parameter");t[e]=void 0===r?null:r}},i.removeQuery=function(t,e,r){var n,o,s;if(f(e))for(n=0,o=e.length;n<o;n++)t[e[n]]=void 0;else if("RegExp"===c(e))for(s in t)e.test(s)&&(t[s]=void 0);else if("object"===a(e))for(s in e)u.call(e,s)&&i.removeQuery(t,s,e[s]);else{if("string"!=typeof e)throw new TypeError("URI.removeQuery() accepts an object, string, RegExp as the first parameter");void 0!==r?"RegExp"===c(r)?!f(t[e])&&r.test(t[e])?t[e]=void 0:t[e]=p(t[e],r):t[e]!==String(r)||f(r)&&1!==r.length?f(t[e])&&(t[e]=p(t[e],r)):t[e]=void 0:t[e]=void 0}},i.hasQuery=function(t,e,r,n){switch(c(e)){case"String":break;case"RegExp":for(var o in t)if(u.call(t,o)&&e.test(o)&&(void 0===r||i.hasQuery(t,o,r)))return!0;return!1;case"Object":for(var a in e)if(u.call(e,a)&&!i.hasQuery(t,a,e[a]))return!1;return!0;default:throw new TypeError("URI.hasQuery() accepts a string, regular expression or object as the name parameter")}switch(c(r)){case"Undefined":return e in t;case"Boolean":return r===Boolean(f(t[e])?t[e].length:t[e]);case"Function":return!!r(t[e],e,t);case"Array":return!!f(t[e])&&(n?h:y)(t[e],r);case"RegExp":return f(t[e])?!!n&&h(t[e],r):Boolean(t[e]&&t[e].match(r));case"Number":r=String(r);case"String":return f(t[e])?!!n&&h(t[e],r):t[e]===r;default:throw new TypeError("URI.hasQuery() accepts undefined, boolean, string, number, RegExp, Function as the value parameter")}},i.joinPaths=function(){for(var t=[],e=[],r=0,n=0;n<arguments.length;n++){var o=new i(arguments[n]);t.push(o);for(var a=o.segment(),s=0;s<a.length;s++)"string"==typeof a[s]&&e.push(a[s]),a[s]&&r++}if(!e.length||!r)return new i("");var u=new i("").segment(e);return""!==t[0].path()&&"/"!==t[0].path().slice(0,1)||u.path("/"+u.path()),u.normalize()},i.commonPath=function(t,e){var r,n=Math.min(t.length,e.length);for(r=0;r<n;r++)if(t.charAt(r)!==e.charAt(r)){r--;break}return r<1?t.charAt(0)===e.charAt(0)&&"/"===t.charAt(0)?"/":"":("/"===t.charAt(r)&&"/"===e.charAt(r)||(r=t.substring(0,r).lastIndexOf("/")),t.substring(0,r+1))},i.withinString=function(t,e,r){r||(r={});var n=r.start||i.findUri.start,o=r.end||i.findUri.end,a=r.trim||i.findUri.trim,s=r.parens||i.findUri.parens,u=/[a-z0-9-]=["']?$/i;for(n.lastIndex=0;;){var l=n.exec(t);if(!l)break;var c=l.index;if(r.ignoreHtml){var f=t.slice(Math.max(c-3,0),c);if(f&&u.test(f))continue}for(var p=c+t.slice(c).search(o),h=t.slice(c,p),y=-1;;){var d=s.exec(h);if(!d)break;var v=d.index+d[0].length;y=Math.max(y,v)}if(!((h=y>-1?h.slice(0,y)+h.slice(y).replace(a,""):h.replace(a,"")).length<=l[0].length||r.ignore&&r.ignore.test(h))){var m=e(h,c,p=c+h.length,t);void 0!==m?(m=String(m),t=t.slice(0,c)+m+t.slice(p),n.lastIndex=c+m.length):n.lastIndex=p}}return n.lastIndex=0,t},i.ensureValidHostname=function(e,r){var n=!!e,o=!1;if(!!r&&(o=h(i.hostProtocols,r)),o&&!n)throw new TypeError("Hostname cannot be empty, if protocol is "+r);if(e&&e.match(i.invalid_hostname_characters)){if(!t)throw new TypeError('Hostname "'+e+'" contains characters other than [A-Z0-9.-:_] and Punycode.js is not available');if(t.toASCII(e).match(i.invalid_hostname_characters))throw new TypeError('Hostname "'+e+'" contains characters other than [A-Z0-9.-:_]')}},i.ensureValidPort=function(t){if(t){var e=Number(t);if(!(/^[0-9]+$/.test(e)&&e>0&&e<65536))throw new TypeError('Port "'+t+'" is not a valid port')}},i.noConflict=function(t){if(t){var e={URI:this.noConflict()};return n.URITemplate&&"function"==typeof n.URITemplate.noConflict&&(e.URITemplate=n.URITemplate.noConflict()),n.IPv6&&"function"==typeof n.IPv6.noConflict&&(e.IPv6=n.IPv6.noConflict()),n.SecondLevelDomains&&"function"==typeof n.SecondLevelDomains.noConflict&&(e.SecondLevelDomains=n.SecondLevelDomains.noConflict()),e}return n.URI===this&&(n.URI=o),this},s.build=function(t){return!0===t?this._deferred_build=!0:(void 0===t||this._deferred_build)&&(this._string=i.build(this._parts),this._deferred_build=!1),this},s.clone=function(){return new i(this)},s.valueOf=s.toString=function(){return this.build(!1)._string},s.protocol=_("protocol"),s.username=_("username"),s.password=_("password"),s.hostname=_("hostname"),s.port=_("port"),s.query=O("query","?"),s.fragment=O("fragment","#"),s.search=function(t,e){var r=this.query(t,e);return"string"==typeof r&&r.length?"?"+r:r},s.hash=function(t,e){var r=this.fragment(t,e);return"string"==typeof r&&r.length?"#"+r:r},s.pathname=function(t,e){if(void 0===t||!0===t){var r=this._parts.path||(this._parts.hostname?"/":"");return t?(this._parts.urn?i.decodeUrnPath:i.decodePath)(r):r}return this._parts.urn?this._parts.path=t?i.recodeUrnPath(t):"":this._parts.path=t?i.recodePath(t):"/",this.build(!e),this},s.path=s.pathname,s.href=function(t,e){var r;if(void 0===t)return this.toString();this._string="",this._parts=i._parts();var n=t instanceof i,o="object"===a(t)&&(t.hostname||t.path||t.pathname);t.nodeName&&(t=t[i.getDomAttribute(t)]||"",o=!1);if(!n&&o&&void 0!==t.pathname&&(t=t.toString()),"string"==typeof t||t instanceof String)this._parts=i.parse(String(t),this._parts);else{if(!n&&!o)throw new TypeError("invalid input");var s=n?t._parts:t;for(r in s)"query"!==r&&u.call(this._parts,r)&&(this._parts[r]=s[r]);s.query&&this.query(s.query,!1)}return this.build(!e),this},s.is=function(t){var e=!1,n=!1,o=!1,a=!1,s=!1,u=!1,l=!1,c=!this._parts.urn;switch(this._parts.hostname&&(c=!1,n=i.ip4_expression.test(this._parts.hostname),o=i.ip6_expression.test(this._parts.hostname),s=(a=!(e=n||o))&&r&&r.has(this._parts.hostname),u=a&&i.idn_expression.test(this._parts.hostname),l=a&&i.punycode_expression.test(this._parts.hostname)),t.toLowerCase()){case"relative":return c;case"absolute":return!c;case"domain":case"name":return a;case"sld":return s;case"ip":return e;case"ip4":case"ipv4":case"inet4":return n;case"ip6":case"ipv6":case"inet6":return o;case"idn":return u;case"url":return!this._parts.urn;case"urn":return!!this._parts.urn;case"punycode":return l}return null};var E=s.protocol,P=s.port,x=s.hostname;s.protocol=function(t,e){if(t&&!(t=t.replace(/:(\/\/)?$/,"")).match(i.protocol_expression))throw new TypeError('Protocol "'+t+"\" contains characters other than [A-Z0-9.+-] or doesn't start with [A-Z]");return E.call(this,t,e)},s.scheme=s.protocol,s.port=function(t,e){return this._parts.urn?void 0===t?"":this:(void 0!==t&&(0===t&&(t=null),t&&(":"===(t+="").charAt(0)&&(t=t.substring(1)),i.ensureValidPort(t))),P.call(this,t,e))},s.hostname=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0!==t){var r={preventInvalidHostname:this._parts.preventInvalidHostname};if("/"!==i.parseHost(t,r))throw new TypeError('Hostname "'+t+'" contains characters other than [A-Z0-9.-]');t=r.hostname,this._parts.preventInvalidHostname&&i.ensureValidHostname(t,this._parts.protocol)}return x.call(this,t,e)},s.origin=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0===t){var r=this.protocol();return this.authority()?(r?r+"://":"")+this.authority():""}var n=i(t);return this.protocol(n.protocol()).authority(n.authority()).build(!e),this},s.host=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0===t)return this._parts.hostname?i.buildHost(this._parts):"";if("/"!==i.parseHost(t,this._parts))throw new TypeError('Hostname "'+t+'" contains characters other than [A-Z0-9.-]');return this.build(!e),this},s.authority=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0===t)return this._parts.hostname?i.buildAuthority(this._parts):"";if("/"!==i.parseAuthority(t,this._parts))throw new TypeError('Hostname "'+t+'" contains characters other than [A-Z0-9.-]');return this.build(!e),this},s.userinfo=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0===t){var r=i.buildUserinfo(this._parts);return r?r.substring(0,r.length-1):r}return"@"!==t[t.length-1]&&(t+="@"),i.parseUserinfo(t,this._parts),this.build(!e),this},s.resource=function(t,e){var r;return void 0===t?this.path()+this.search()+this.hash():(r=i.parse(t),this._parts.path=r.path,this._parts.query=r.query,this._parts.fragment=r.fragment,this.build(!e),this)},s.subdomain=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0===t){if(!this._parts.hostname||this.is("IP"))return"";var r=this._parts.hostname.length-this.domain().length-1;return this._parts.hostname.substring(0,r)||""}var n=this._parts.hostname.length-this.domain().length,o=this._parts.hostname.substring(0,n),a=new RegExp("^"+l(o));if(t&&"."!==t.charAt(t.length-1)&&(t+="."),-1!==t.indexOf(":"))throw new TypeError("Domains cannot contain colons");return t&&i.ensureValidHostname(t,this._parts.protocol),this._parts.hostname=this._parts.hostname.replace(a,t),this.build(!e),this},s.domain=function(t,e){if(this._parts.urn)return void 0===t?"":this;if("boolean"==typeof t&&(e=t,t=void 0),void 0===t){if(!this._parts.hostname||this.is("IP"))return"";var r=this._parts.hostname.match(/\./g);if(r&&r.length<2)return this._parts.hostname;var n=this._parts.hostname.length-this.tld(e).length-1;return n=this._parts.hostname.lastIndexOf(".",n-1)+1,this._parts.hostname.substring(n)||""}if(!t)throw new TypeError("cannot set domain empty");if(-1!==t.indexOf(":"))throw new TypeError("Domains cannot contain colons");if(i.ensureValidHostname(t,this._parts.protocol),!this._parts.hostname||this.is("IP"))this._parts.hostname=t;else{var o=new RegExp(l(this.domain())+"$");this._parts.hostname=this._parts.hostname.replace(o,t)}return this.build(!e),this},s.tld=function(t,e){if(this._parts.urn)return void 0===t?"":this;if("boolean"==typeof t&&(e=t,t=void 0),void 0===t){if(!this._parts.hostname||this.is("IP"))return"";var n=this._parts.hostname.lastIndexOf("."),o=this._parts.hostname.substring(n+1);return!0!==e&&r&&r.list[o.toLowerCase()]&&r.get(this._parts.hostname)||o}var i;if(!t)throw new TypeError("cannot set TLD empty");if(t.match(/[^a-zA-Z0-9-]/)){if(!r||!r.is(t))throw new TypeError('TLD "'+t+'" contains characters other than [A-Z0-9]');i=new RegExp(l(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(i,t)}else{if(!this._parts.hostname||this.is("IP"))throw new ReferenceError("cannot set TLD on non-domain host");i=new RegExp(l(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(i,t)}return this.build(!e),this},s.directory=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0===t||!0===t){if(!this._parts.path&&!this._parts.hostname)return"";if("/"===this._parts.path)return"/";var r=this._parts.path.length-this.filename().length-1,n=this._parts.path.substring(0,r)||(this._parts.hostname?"/":"");return t?i.decodePath(n):n}var o=this._parts.path.length-this.filename().length,a=this._parts.path.substring(0,o),s=new RegExp("^"+l(a));return this.is("relative")||(t||(t="/"),"/"!==t.charAt(0)&&(t="/"+t)),t&&"/"!==t.charAt(t.length-1)&&(t+="/"),t=i.recodePath(t),this._parts.path=this._parts.path.replace(s,t),this.build(!e),this},s.filename=function(t,e){if(this._parts.urn)return void 0===t?"":this;if("string"!=typeof t){if(!this._parts.path||"/"===this._parts.path)return"";var r=this._parts.path.lastIndexOf("/"),n=this._parts.path.substring(r+1);return t?i.decodePathSegment(n):n}var o=!1;"/"===t.charAt(0)&&(t=t.substring(1)),t.match(/\.?\//)&&(o=!0);var a=new RegExp(l(this.filename())+"$");return t=i.recodePath(t),this._parts.path=this._parts.path.replace(a,t),o?this.normalizePath(e):this.build(!e),this},s.suffix=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0===t||!0===t){if(!this._parts.path||"/"===this._parts.path)return"";var r,n,o=this.filename(),a=o.lastIndexOf(".");return-1===a?"":(r=o.substring(a+1),n=/^[a-z0-9%]+$/i.test(r)?r:"",t?i.decodePathSegment(n):n)}"."===t.charAt(0)&&(t=t.substring(1));var s,u=this.suffix();if(u)s=t?new RegExp(l(u)+"$"):new RegExp(l("."+u)+"$");else{if(!t)return this;this._parts.path+="."+i.recodePath(t)}return s&&(t=i.recodePath(t),this._parts.path=this._parts.path.replace(s,t)),this.build(!e),this},s.segment=function(t,e,r){var n=this._parts.urn?":":"/",o=this.path(),i="/"===o.substring(0,1),a=o.split(n);if(void 0!==t&&"number"!=typeof t&&(r=e,e=t,t=void 0),void 0!==t&&"number"!=typeof t)throw new Error('Bad segment "'+t+'", must be 0-based integer');if(i&&a.shift(),t<0&&(t=Math.max(a.length+t,0)),void 0===e)return void 0===t?a:a[t];if(null===t||void 0===a[t])if(f(e)){a=[];for(var s=0,u=e.length;s<u;s++)(e[s].length||a.length&&a[a.length-1].length)&&(a.length&&!a[a.length-1].length&&a.pop(),a.push(d(e[s])))}else(e||"string"==typeof e)&&(e=d(e),""===a[a.length-1]?a[a.length-1]=e:a.push(e));else e?a[t]=d(e):a.splice(t,1);return i&&a.unshift(""),this.path(a.join(n),r)},s.segmentCoded=function(t,e,r){var n,o,a;if("number"!=typeof t&&(r=e,e=t,t=void 0),void 0===e){if(f(n=this.segment(t,e,r)))for(o=0,a=n.length;o<a;o++)n[o]=i.decode(n[o]);else n=void 0!==n?i.decode(n):void 0;return n}if(f(e))for(o=0,a=e.length;o<a;o++)e[o]=i.encode(e[o]);else e="string"==typeof e||e instanceof String?i.encode(e):e;return this.segment(t,e,r)};var T=s.query;return s.query=function(t,e){if(!0===t)return i.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if("function"==typeof t){var r=i.parseQuery(this._parts.query,this._parts.escapeQuerySpace),n=t.call(this,r);return this._parts.query=i.buildQuery(n||r,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!e),this}return void 0!==t&&"string"!=typeof t?(this._parts.query=i.buildQuery(t,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!e),this):T.call(this,t,e)},s.setQuery=function(t,e,r){var n=i.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if("string"==typeof t||t instanceof String)n[t]=void 0!==e?e:null;else{if("object"!==a(t))throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");for(var o in t)u.call(t,o)&&(n[o]=t[o])}return this._parts.query=i.buildQuery(n,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof t&&(r=e),this.build(!r),this},s.addQuery=function(t,e,r){var n=i.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return i.addQuery(n,t,void 0===e?null:e),this._parts.query=i.buildQuery(n,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof t&&(r=e),this.build(!r),this},s.removeQuery=function(t,e,r){var n=i.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return i.removeQuery(n,t,e),this._parts.query=i.buildQuery(n,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof t&&(r=e),this.build(!r),this},s.hasQuery=function(t,e,r){var n=i.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return i.hasQuery(n,t,e,r)},s.setSearch=s.setQuery,s.addSearch=s.addQuery,s.removeSearch=s.removeQuery,s.hasSearch=s.hasQuery,s.normalize=function(){return this._parts.urn?this.normalizeProtocol(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build():this.normalizeProtocol(!1).normalizeHostname(!1).normalizePort(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build()},s.normalizeProtocol=function(t){return"string"==typeof this._parts.protocol&&(this._parts.protocol=this._parts.protocol.toLowerCase(),this.build(!t)),this},s.normalizeHostname=function(r){return this._parts.hostname&&(this.is("IDN")&&t?this._parts.hostname=t.toASCII(this._parts.hostname):this.is("IPv6")&&e&&(this._parts.hostname=e.best(this._parts.hostname)),this._parts.hostname=this._parts.hostname.toLowerCase(),this.build(!r)),this},s.normalizePort=function(t){return"string"==typeof this._parts.protocol&&this._parts.port===i.defaultPorts[this._parts.protocol]&&(this._parts.port=null,this.build(!t)),this},s.normalizePath=function(t){var e,r=this._parts.path;if(!r)return this;if(this._parts.urn)return this._parts.path=i.recodeUrnPath(this._parts.path),this.build(!t),this;if("/"===this._parts.path)return this;var n,o,a="";for("/"!==(r=i.recodePath(r)).charAt(0)&&(e=!0,r="/"+r),"/.."!==r.slice(-3)&&"/."!==r.slice(-2)||(r+="/"),r=r.replace(/(\/(\.\/)+)|(\/\.$)/g,"/").replace(/\/{2,}/g,"/"),e&&(a=r.substring(1).match(/^(\.\.\/)+/)||"")&&(a=a[0]);-1!==(n=r.search(/\/\.\.(\/|$)/));)0!==n?(-1===(o=r.substring(0,n).lastIndexOf("/"))&&(o=n),r=r.substring(0,o)+r.substring(n+3)):r=r.substring(3);return e&&this.is("relative")&&(r=a+r.substring(1)),this._parts.path=r,this.build(!t),this},s.normalizePathname=s.normalizePath,s.normalizeQuery=function(t){return"string"==typeof this._parts.query&&(this._parts.query.length?this.query(i.parseQuery(this._parts.query,this._parts.escapeQuerySpace)):this._parts.query=null,this.build(!t)),this},s.normalizeFragment=function(t){return this._parts.fragment||(this._parts.fragment=null,this.build(!t)),this},s.normalizeSearch=s.normalizeQuery,s.normalizeHash=s.normalizeFragment,s.iso8859=function(){var t=i.encode,e=i.decode;i.encode=escape,i.decode=decodeURIComponent;try{this.normalize()}finally{i.encode=t,i.decode=e}return this},s.unicode=function(){var t=i.encode,e=i.decode;i.encode=m,i.decode=unescape;try{this.normalize()}finally{i.encode=t,i.decode=e}return this},s.readable=function(){var e=this.clone();e.username("").password("").normalize();var r="";if(e._parts.protocol&&(r+=e._parts.protocol+"://"),e._parts.hostname&&(e.is("punycode")&&t?(r+=t.toUnicode(e._parts.hostname),e._parts.port&&(r+=":"+e._parts.port)):r+=e.host()),e._parts.hostname&&e._parts.path&&"/"!==e._parts.path.charAt(0)&&(r+="/"),r+=e.path(!0),e._parts.query){for(var n="",o=0,a=e._parts.query.split("&"),s=a.length;o<s;o++){var u=(a[o]||"").split("=");n+="&"+i.decodeQuery(u[0],this._parts.escapeQuerySpace).replace(/&/g,"%26"),void 0!==u[1]&&(n+="="+i.decodeQuery(u[1],this._parts.escapeQuerySpace).replace(/&/g,"%26"))}r+="?"+n.substring(1)}return r+=i.decodeQuery(e.hash(),!0)},s.absoluteTo=function(t){var e,r,n,o=this.clone(),a=["protocol","username","password","hostname","port"];if(this._parts.urn)throw new Error("URNs do not have any generally defined hierarchical components");if(t instanceof i||(t=new i(t)),o._parts.protocol)return o;if(o._parts.protocol=t._parts.protocol,this._parts.hostname)return o;for(r=0;n=a[r];r++)o._parts[n]=t._parts[n];return o._parts.path?(".."===o._parts.path.substring(-2)&&(o._parts.path+="/"),"/"!==o.path().charAt(0)&&(e=(e=t.directory())||(0===t.path().indexOf("/")?"/":""),o._parts.path=(e?e+"/":"")+o._parts.path,o.normalizePath())):(o._parts.path=t._parts.path,o._parts.query||(o._parts.query=t._parts.query)),o.build(),o},s.relativeTo=function(t){var e,r,n,o,a,s=this.clone().normalize();if(s._parts.urn)throw new Error("URNs do not have any generally defined hierarchical components");if(t=new i(t).normalize(),e=s._parts,r=t._parts,o=s.path(),a=t.path(),"/"!==o.charAt(0))throw new Error("URI is already relative");if("/"!==a.charAt(0))throw new Error("Cannot calculate a URI relative to another relative URI");if(e.protocol===r.protocol&&(e.protocol=null),e.username!==r.username||e.password!==r.password)return s.build();if(null!==e.protocol||null!==e.username||null!==e.password)return s.build();if(e.hostname!==r.hostname||e.port!==r.port)return s.build();if(e.hostname=null,e.port=null,o===a)return e.path="",s.build();if(!(n=i.commonPath(o,a)))return s.build();var u=r.path.substring(n.length).replace(/[^\/]*$/,"").replace(/.*?\//g,"../");return e.path=u+e.path.substring(n.length)||"./",s.build()},s.equals=function(t){var e,r,n,o,a,s=this.clone(),l=new i(t),c={};if(s.normalize(),l.normalize(),s.toString()===l.toString())return!0;if(n=s.query(),o=l.query(),s.query(""),l.query(""),s.toString()!==l.toString())return!1;if(n.length!==o.length)return!1;for(a in e=i.parseQuery(n,this._parts.escapeQuerySpace),r=i.parseQuery(o,this._parts.escapeQuerySpace),e)if(u.call(e,a)){if(f(e[a])){if(!y(e[a],r[a]))return!1}else if(e[a]!==r[a])return!1;c[a]=!0}for(a in r)if(u.call(r,a)&&!c[a])return!1;return!0},s.preventInvalidHostname=function(t){return this._parts.preventInvalidHostname=!!t,this},s.duplicateQueryParameters=function(t){return this._parts.duplicateQueryParameters=!!t,this},s.escapeQuerySpace=function(t){return this._parts.escapeQuerySpace=!!t,this},i})},9018:function(t,e,r){var n;function o(t){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}t=r.nmd(t),function(i){var a="object"==o(e)&&e&&!e.nodeType&&e,s="object"==o(t)&&t&&!t.nodeType&&t,u="object"==(void 0===r.g?"undefined":o(r.g))&&r.g;u.global!==u&&u.window!==u&&u.self!==u||(i=u);var l,c,f=2147483647,p=36,h=1,y=26,d=38,v=700,m=72,b=128,g="-",S=/^xn--/,w=/[^\x20-\x7E]/,_=/[\x2E\u3002\uFF0E\uFF61]/g,O={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},E=p-h,P=Math.floor,x=String.fromCharCode;function T(t){throw new RangeError(O[t])}function C(t,e){for(var r=t.length,n=[];r--;)n[r]=e(t[r]);return n}function k(t,e){var r=t.split("@"),n="";return r.length>1&&(n=r[0]+"@",t=r[1]),n+C((t=t.replace(_,".")).split("."),e).join(".")}function A(t){for(var e,r,n=[],o=0,i=t.length;o<i;)(e=t.charCodeAt(o++))>=55296&&e<=56319&&o<i?56320==(64512&(r=t.charCodeAt(o++)))?n.push(((1023&e)<<10)+(1023&r)+65536):(n.push(e),o--):n.push(e);return n}function j(t){return C(t,function(t){var e="";return t>65535&&(e+=x((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+=x(t)}).join("")}function N(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function I(t,e,r){var n=0;for(t=r?P(t/v):t>>1,t+=P(t/e);t>E*y>>1;n+=p)t=P(t/E);return P(n+(E+1)*t/(t+d))}function M(t){var e,r,n,o,i,a,s,u,l,c,d,v=[],S=t.length,w=0,_=b,O=m;for((r=t.lastIndexOf(g))<0&&(r=0),n=0;n<r;++n)t.charCodeAt(n)>=128&&T("not-basic"),v.push(t.charCodeAt(n));for(o=r>0?r+1:0;o<S;){for(i=w,a=1,s=p;o>=S&&T("invalid-input"),((u=(d=t.charCodeAt(o++))-48<10?d-22:d-65<26?d-65:d-97<26?d-97:p)>=p||u>P((f-w)/a))&&T("overflow"),w+=u*a,!(u<(l=s<=O?h:s>=O+y?y:s-O));s+=p)a>P(f/(c=p-l))&&T("overflow"),a*=c;O=I(w-i,e=v.length+1,0==i),P(w/e)>f-_&&T("overflow"),_+=P(w/e),w%=e,v.splice(w++,0,_)}return j(v)}function R(t){var e,r,n,o,i,a,s,u,l,c,d,v,S,w,_,O=[];for(v=(t=A(t)).length,e=b,r=0,i=m,a=0;a<v;++a)(d=t[a])<128&&O.push(x(d));for(n=o=O.length,o&&O.push(g);n<v;){for(s=f,a=0;a<v;++a)(d=t[a])>=e&&d<s&&(s=d);for(s-e>P((f-r)/(S=n+1))&&T("overflow"),r+=(s-e)*S,e=s,a=0;a<v;++a)if((d=t[a])<e&&++r>f&&T("overflow"),d==e){for(u=r,l=p;!(u<(c=l<=i?h:l>=i+y?y:l-i));l+=p)_=u-c,w=p-c,O.push(x(N(c+_%w,0))),u=P(_/w);O.push(x(N(u,0))),i=I(r,S,n==o),r=0,++n}++r,++e}return O.join("")}if(l={version:"1.3.2",ucs2:{decode:A,encode:j},decode:M,encode:R,toASCII:function(t){return k(t,function(t){return w.test(t)?"xn--"+R(t):t})},toUnicode:function(t){return k(t,function(t){return S.test(t)?M(t.slice(4).toLowerCase()):t})}},"object"==o(r.amdO)&&r.amdO)void 0===(n=function(){return l}.call(e,r,e,t))||(t.exports=n);else if(a&&s)if(t.exports==a)s.exports=l;else for(c in l)l.hasOwnProperty(c)&&(a[c]=l[c]);else i.punycode=l}(this)},3872:function(){"use strict"},5619:function(t,e,r){"use strict";var n=window.SuperMap=window.SuperMap||{};n.Components=window.SuperMap.Components||{};var o={GEOJSON:"GEOJSON",ISERVER:"ISERVER",FGB:"FGB"},i={ISERVER:"ISERVER",IPORTAL:"IPORTAL",ONLINE:"ONLINE"},a={LINE:"LINE",LINEM:"LINEM",POINT:"POINT",REGION:"REGION",POINTEPS:"POINTEPS",LINEEPS:"LINEEPS",REGIONEPS:"REGIONEPS",ELLIPSE:"ELLIPSE",CIRCLE:"CIRCLE",TEXT:"TEXT",RECTANGLE:"RECTANGLE",UNKNOWN:"UNKNOWN",GEOCOMPOUND:"GEOCOMPOUND"},s={ATTRIBUTE:"ATTRIBUTE",ATTRIBUTEANDGEOMETRY:"ATTRIBUTEANDGEOMETRY",GEOMETRY:"GEOMETRY"},u={CONTAIN:"CONTAIN",CROSS:"CROSS",DISJOINT:"DISJOINT",IDENTITY:"IDENTITY",INTERSECT:"INTERSECT",NONE:"NONE",OVERLAP:"OVERLAP",TOUCH:"TOUCH",WITHIN:"WITHIN"},l={DISTANCE:"DISTANCE",AREA:"AREA"},c={METER:"METER",KILOMETER:"KILOMETER",MILE:"MILE",YARD:"YARD",DEGREE:"DEGREE",MILLIMETER:"MILLIMETER",CENTIMETER:"CENTIMETER",INCH:"INCH",DECIMETER:"DECIMETER",FOOT:"FOOT",SECOND:"SECOND",MINUTE:"MINUTE",RADIAN:"RADIAN"},f={CENTIMETER:"CENTIMETER",DECIMETER:"DECIMETER",FOOT:"FOOT",INCH:"INCH",KILOMETER:"KILOMETER",METER:"METER",MILE:"MILE",MILLIMETER:"MILLIMETER",YARD:"YARD"},p={CAPTION:"CAPTION",CAPTION_PERCENT:"CAPTION_PERCENT",CAPTION_VALUE:"CAPTION_VALUE",PERCENT:"PERCENT",VALUE:"VALUE"},h={AREA:"AREA",BAR:"BAR",BAR3D:"BAR3D",LINE:"LINE",PIE:"PIE",PIE3D:"PIE3D",POINT:"POINT",RING:"RING",ROSE:"ROSE",ROSE3D:"ROSE3D",STACK_BAR:"STACK_BAR",STACK_BAR3D:"STACK_BAR3D",STEP:"STEP"},y={ALL:"ALL",NONE:"NONE",YAXES:"YAXES"},d={CONSTANT:"CONSTANT",LOGARITHM:"LOGARITHM",SQUAREROOT:"SQUAREROOT"},v={CUSTOMINTERVAL:"CUSTOMINTERVAL",EQUALINTERVAL:"EQUALINTERVAL",LOGARITHM:"LOGARITHM",QUANTILE:"QUANTILE",SQUAREROOT:"SQUAREROOT",STDDEVIATION:"STDDEVIATION"},m={BLACK_WHITE:"BLACKWHITE",BLUE_BLACK:"BLUEBLACK",BLUE_RED:"BLUERED",BLUE_WHITE:"BLUEWHITE",CYAN_BLACK:"CYANBLACK",CYAN_BLUE:"CYANBLUE",CYAN_GREEN:"CYANGREEN",CYAN_WHITE:"CYANWHITE",GREEN_BLACK:"GREENBLACK",GREEN_BLUE:"GREENBLUE",GREEN_ORANGE_VIOLET:"GREENORANGEVIOLET",GREEN_RED:"GREENRED",GREEN_WHITE:"GREENWHITE",PINK_BLACK:"PINKBLACK",PINK_BLUE:"PINKBLUE",PINK_RED:"PINKRED",PINK_WHITE:"PINKWHITE",RAIN_BOW:"RAINBOW",RED_BLACK:"REDBLACK",RED_WHITE:"REDWHITE",SPECTRUM:"SPECTRUM",TERRAIN:"TERRAIN",YELLOW_BLACK:"YELLOWBLACK",YELLOW_BLUE:"YELLOWBLUE",YELLOW_GREEN:"YELLOWGREEN",YELLOW_RED:"YELLOWRED",YELLOW_WHITE:"YELLOWWHITE"},b={TOPLEFT:"TOPLEFT",TOPCENTER:"TOPCENTER",TOPRIGHT:"TOPRIGHT",BASELINELEFT:"BASELINELEFT",BASELINECENTER:"BASELINECENTER",BASELINERIGHT:"BASELINERIGHT",BOTTOMLEFT:"BOTTOMLEFT",BOTTOMCENTER:"BOTTOMCENTER",BOTTOMRIGHT:"BOTTOMRIGHT",MIDDLELEFT:"MIDDLELEFT",MIDDLECENTER:"MIDDLECENTER",MIDDLERIGHT:"MIDDLERIGHT"},g={NORMAL:"ALONG_LINE_NORMAL",LB_TO_RT:"LEFT_BOTTOM_TO_RIGHT_TOP",LT_TO_RB:"LEFT_TOP_TO_RIGHT_BOTTOM",RB_TO_LT:"RIGHT_BOTTOM_TO_LEFT_TOP",RT_TO_LB:"RIGHT_TOP_TO_LEFT_BOTTOM"},S={DIAMOND:"DIAMOND",ELLIPSE:"ELLIPSE",MARKER:"MARKER",NONE:"NONE",RECT:"RECT",ROUNDRECT:"ROUNDRECT",TRIANGLE:"TRIANGLE"},w={NEWLINE:"NEWLINE",NONE:"NONE",OMIT:"OMIT"},_={FLAT:"FLAT",ROUND:"ROUND"},O={CLIP:"CLIP",ERASE:"ERASE",IDENTITY:"IDENTITY",INTERSECT:"INTERSECT",UNION:"UNION",UPDATE:"UPDATE",XOR:"XOR"},E={INDEXEDHDFS:"INDEXEDHDFS",UDB:"UDB",MONGODB:"MONGODB",PG:"PG"},P={BSPLINE:"BSPLINE",POLISH:"POLISH"},x={ISOLINE:"ISOLINE",ISOREGION:"ISOREGION"},T={DATASET_AND_RECORDSET:"DATASET_AND_RECORDSET",DATASET_ONLY:"DATASET_ONLY",RECORDSET_ONLY:"RECORDSET_ONLY"},C={ADD:"add",UPDATE:"update",DELETE:"delete"},k={LESS_TIME:"LESS_TIME",LESS_TRANSFER:"LESS_TRANSFER",LESS_WALK:"LESS_WALK",MIN_DISTANCE:"MIN_DISTANCE"},A={BUS:"BUS",SUBWAY:"SUBWAY",NO_SUBWAY:"NO_SUBWAY",NONE:"NONE"},j={EXPONENTIAL:"EXPONENTIAL",GAUSSIAN:"GAUSSIAN",SPHERICAL:"SPHERICAL"},N={EXP1:"EXP1",EXP2:"EXP2"},I={IP:"IP",REFERER:"Referer",REQUESTIP:"RequestIP",NONE:"NONE",SERVER:"SERVER",WEB:"WEB"},M={CLIP:"clip",INTERSECT:"intersect"},R={SQUAREMETER:"SquareMeter",SQUAREKILOMETER:"SquareKiloMeter",HECTARE:"Hectare",ARE:"Are",ACRE:"Acre",SQUAREFOOT:"SquareFoot",SQUAREYARD:"SquareYard",SQUAREMILE:"SquareMile"},D={METER:"Meter",KILOMETER:"Kilometer",YARD:"Yard",FOOT:"Foot",MILE:"Mile"},B={MAX:"max",MIN:"min",AVERAGE:"average",SUM:"sum",VARIANCE:"variance",STDDEVIATION:"stdDeviation"},F={SUMMARYMESH:"SUMMARYMESH",SUMMARYREGION:"SUMMARYREGION"},U={REGIONNOOVERLAP:"REGIONNOOVERLAP",REGIONNOOVERLAPWITH:"REGIONNOOVERLAPWITH",REGIONCONTAINEDBYREGION:"REGIONCONTAINEDBYREGION",REGIONCOVEREDBYREGION:"REGIONCOVEREDBYREGION",LINENOOVERLAP:"LINENOOVERLAP",LINENOOVERLAPWITH:"LINENOOVERLAPWITH",POINTNOIDENTICAL:"POINTNOIDENTICAL"},G={GEOHASH_GRID:"geohash_grid"},V={AVG:"avg",MAX:"max",MIN:"min",SUM:"sum"},z={NDVI:"NDVI",HILLSHADE:"HILLSHADE"},H={CUSTOM:"CUSTOM",INTERSECTION:"INTERSECTION",UNION:"UNION"},q={CUSTOM:"CUSTOM",MAX:"MAX",MIN:"MIN"},J={DAY_BRIGHT:"DAY_BRIGHT",DUSK:"DUSK",NIGHT:"NIGHT"},W={BASIC:"BASIC",STANDARD:"STANDARD",OTHER:"OTHER"};function K(t){"@babel/helpers - typeof";return(K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Y(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Q(n.key),n)}}function Q(t){var e=function(t,e){if("object"!=K(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=K(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==K(e)?e:e+""}var X=function(){function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.w=e?parseFloat(e):0,this.h=e?parseFloat(r):0,this.CLASS_NAME="SuperMap.Size"}return e=t,(r=[{key:"toString",value:function(){return"w="+this.w+",h="+this.h}},{key:"clone",value:function(){return new t(this.w,this.h)}},{key:"equals",value:function(t){var e=!1;return null!=t&&(e=this.w===t.w&&this.h===t.h||isNaN(this.w)&&isNaN(this.h)&&isNaN(t.w)&&isNaN(t.h)),e}},{key:"destroy",value:function(){this.w=null,this.h=null}}])&&Y(e.prototype,r),n&&Y(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,r,n}();function Z(t){"@babel/helpers - typeof";return(Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function $(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,tt(n.key),n)}}function tt(t){var e=function(t,e){if("object"!=Z(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Z(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Z(e)?e:e+""}var et=function(){function t(e,r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.x=e?parseFloat(e):0,this.y=r?parseFloat(r):0,this.mode=n,this.CLASS_NAME="SuperMap.Pixel"}return e=t,(r=[{key:"toString",value:function(){return"x="+this.x+",y="+this.y}},{key:"clone",value:function(){return new t(this.x,this.y,this.mode)}},{key:"equals",value:function(t){var e=!1;return null!=t&&(e=this.x==t.x&&this.y==t.y||isNaN(this.x)&&isNaN(this.y)&&isNaN(t.x)&&isNaN(t.y)),e}},{key:"distanceTo",value:function(t){return Math.sqrt(Math.pow(this.x-t.x,2)+Math.pow(this.y-t.y,2))}},{key:"add",value:function(e,r){if(null==e||null==r)throw new TypeError("Pixel.add cannot receive null values");return new t(this.x+e,this.y+r)}},{key:"offset",value:function(t){var e=this.clone();return t&&(e=this.add(t.x,t.y)),e}},{key:"destroy",value:function(){this.x=null,this.y=null,this.mode=null}}])&&$(e.prototype,r),n&&$(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,r,n}();function rt(t){"@babel/helpers - typeof";return(rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function nt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ot(n.key),n)}}function ot(t){var e=function(t,e){if("object"!=rt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=rt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==rt(e)?e:e+""}et.Mode={LeftTop:"lefttop",RightTop:"righttop",RightBottom:"rightbottom",LeftBottom:"leftbottom"};var it=function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];for(var n=function(t,e,r){return e&&nt(t.prototype,e),r&&nt(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=0;n<e.length;n++)a(this,new e[n](r))}),o=0;o<e.length;o++){var i=e[o];a(n,i),a(n.prototype,i.prototype),a(n.prototype,new i)}return n;function a(t,e){var r=Object.getOwnPropertyNames(e);Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(e)));for(var n=0;n<r.length;n++){var o=r[n];if("constructor"!==o&&"prototype"!==o&&"name"!==o&&"length"!==o){var i=Object.getOwnPropertyDescriptor(e,o);window.ActiveXObject?Object.defineProperty(t,o,i||{}):Object.defineProperty(t,o,i)}}}},at={startsWith:function(t,e){return 0==t.indexOf(e)},contains:function(t,e){return-1!=t.indexOf(e)},trim:function(t){return t.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},camelize:function(t){for(var e=t.split("-"),r=e[0],n=1,o=e.length;n<o;n++){var i=e[n];r+=i.charAt(0).toUpperCase()+i.substring(1)}return r},format:function(t,e,r){e||(e=window);return t.replace(at.tokenRegEx,function(t,n){for(var o,i=n.split(/\.+/),a=0;a<i.length;a++)0==a&&(o=e),o=o[i[a]];return"function"==typeof o&&(o=r?o.apply(null,r):o()),void 0===o?"undefined":o})},tokenRegEx:/\$\{([\w.]+?)\}/g,numberRegEx:/^([+-]?)(?=\d|\.\d)\d*(\.\d*)?([Ee]([+-]?\d+))?$/,isNumeric:function(t){return at.numberRegEx.test(t)},numericIf:function(t){return at.isNumeric(t)?parseFloat(t):t}},st={decimalSeparator:".",thousandsSeparator:",",limitSigDigs:function(t,e){var r=0;return e>0&&(r=parseFloat(t.toPrecision(e))),r},format:function(t,e,r,n){e=void 0!==e?e:0,r=void 0!==r?r:st.thousandsSeparator,n=void 0!==n?n:st.decimalSeparator,null!=e&&(t=parseFloat(t.toFixed(e)));var o=t.toString().split(".");1===o.length&&null==e&&(e=0);var i,a=o[0];if(r)for(var s=/(-?[0-9]+)([0-9]{3})/;s.test(a);)a=a.replace(s,"$1"+r+"$2");if(0==e)i=a;else{var u=o.length>1?o[1]:"0";null!=e&&(u+=new Array(e-u.length+1).join("0")),i=a+n+u}return i}};Number.prototype.limitSigDigs||(Number.prototype.limitSigDigs=function(t){return st.limitSigDigs(this,t)});var ut={bind:function(t,e){var r=Array.prototype.slice.apply(arguments,[2]);return function(){var n=r.concat(Array.prototype.slice.apply(arguments,[0]));return t.apply(e,n)}},bindAsEventListener:function(t,e){return function(r){return t.call(e,r||window.event)}},False:function(){return!1},True:function(){return!0},Void:function(){}},lt={filter:function(t,e,r){var n=[];if(Array.prototype.filter)n=t.filter(e,r);else{var o=t.length;if("function"!=typeof e)throw new TypeError;for(var i=0;i<o;i++)if(i in t){var a=t[i];e.call(r,a,i,t)&&n.push(a)}}return n}};function ct(t){"@babel/helpers - typeof";return(ct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ft(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,pt(n.key),n)}}function pt(t){var e=function(t,e){if("object"!=ct(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=ct(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ct(e)?e:e+""}var ht=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.CLASS_NAME="SuperMap.Geometry",this.id=Tt.createUniqueID(this.CLASS_NAME+"_"),this.parent=null,this.bounds=null,this.SRID=null}return e=t,(r=[{key:"destroy",value:function(){this.id=null,this.bounds=null,this.SRID=null}},{key:"clone",value:function(){return new t}},{key:"setBounds",value:function(t){t&&(this.bounds=t.clone())}},{key:"clearBounds",value:function(){this.bounds=null,this.parent&&this.parent.clearBounds()}},{key:"extendBounds",value:function(t){this.getBounds()?this.bounds.extend(t):this.setBounds(t)}},{key:"getBounds",value:function(){return null==this.bounds&&this.calculateBounds(),this.bounds}},{key:"calculateBounds",value:function(){}},{key:"getVertices",value:function(t){}},{key:"getArea",value:function(){return 0}}])&&ft(e.prototype,r),n&&ft(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,r,n}(),yt=r(7411),dt=r.n(yt);function vt(t){"@babel/helpers - typeof";return(vt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var mt,bt,gt,St,wt,_t,Ot,Et=(bt="",gt="",St="pc",(wt=navigator.userAgent.toLowerCase()).indexOf("msie")>-1||wt.indexOf("trident")>-1&&wt.indexOf("rv")>-1?(bt="msie",mt=wt.match(/msie ([\d.]+)/)||wt.match(/rv:([\d.]+)/)):wt.indexOf("chrome")>-1?(bt="chrome",mt=wt.match(/chrome\/([\d.]+)/)):wt.indexOf("firefox")>-1?(bt="firefox",mt=wt.match(/firefox\/([\d.]+)/)):wt.indexOf("opera")>-1?(bt="opera",mt=wt.match(/version\/([\d.]+)/)):wt.indexOf("safari")>-1&&(bt="safari",mt=wt.match(/version\/([\d.]+)/)),gt=mt?mt[1]:"",wt.indexOf("ipad")>-1||wt.indexOf("ipod")>-1||wt.indexOf("iphone")>-1?St="apple":wt.indexOf("android")>-1&&(gt=(mt=wt.match(/version\/([\d.]+)/))?mt[1]:"",St="android"),{name:bt,version:gt,device:St}),Pt=(_t=!0,Ot=Et,document.createElement("canvas").getContext?("firefox"===Ot.name&&parseFloat(Ot.version)<5&&(_t=!1),"safari"===Ot.name&&parseFloat(Ot.version)<4&&(_t=!1),"opera"===Ot.name&&parseFloat(Ot.version)<10&&(_t=!1),"msie"===Ot.name&&parseFloat(Ot.version)<9&&(_t=!1)):_t=!1,_t),xt=function(){var t=navigator.userAgent.toLowerCase();return-1===t.indexOf("webkit")&&-1!==t.indexOf("gecko")}(),Tt={assign:function(t){for(var e=0;e<Object.getOwnPropertyNames(arguments).length;e++){var r=Object.getOwnPropertyNames(arguments)[e];if("caller"!=r&&"callee"!=r&&"length"!=r&&"arguments"!=r){var n=arguments[r];if(n)for(var o=0;o<Object.getOwnPropertyNames(n).length;o++){var i=Object.getOwnPropertyNames(n)[o];"caller"!=r&&"callee"!=r&&"length"!=r&&"arguments"!=r&&(t[i]=n[i])}}}return t},extend:function(t,e){if(t=t||{},e){for(var r in e){var n=e[r];void 0!==n&&(t[r]=n)}!("function"==typeof window.Event&&e instanceof window.Event)&&e.hasOwnProperty&&e.hasOwnProperty("toString")&&(t.toString=e.toString)}return t},copy:function(t,e){var r;if(t=t||{},e)for(var n in t)void 0!==(r=e[n])&&(t[n]=r)},reset:function(t){for(var e in t=t||{})if(t.hasOwnProperty(e)){if("object"===vt(t[e])&&t[e]instanceof Array){for(var r in t[e])t[e][r].destroy&&t[e][r].destroy();t[e].length=0}else"object"===vt(t[e])&&t[e]instanceof Object&&t[e].destroy&&t[e].destroy();t[e]=null}},getElement:function(){for(var t=[],e=0,r=arguments.length;e<r;e++){var n=arguments[e];if("string"==typeof n&&(n=document.getElementById(n)),1===arguments.length)return n;t.push(n)}return t},isElement:function(t){return!(!t||1!==t.nodeType)},isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},removeItem:function(t,e){for(var r=t.length-1;r>=0;r--)t[r]===e&&t.splice(r,1);return t},indexOf:function(t,e){if(null==t)return-1;if("function"==typeof t.indexOf)return t.indexOf(e);for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1},modifyDOMElement:function(t,e,r,n,o,i,a,s){e&&(t.id=e),r&&(t.style.left=r.x+"px",t.style.top=r.y+"px"),n&&(t.style.width=n.w+"px",t.style.height=n.h+"px"),o&&(t.style.position=o),i&&(t.style.border=i),a&&(t.style.overflow=a),parseFloat(s)>=0&&parseFloat(s)<1?(t.style.filter="alpha(opacity="+100*s+")",t.style.opacity=s):1===parseFloat(s)&&(t.style.filter="",t.style.opacity="")},applyDefaults:function(t,e){t=t||{};var r="function"==typeof window.Event&&e instanceof window.Event;for(var n in e)(void 0===t[n]||!r&&e.hasOwnProperty&&e.hasOwnProperty(n)&&!t.hasOwnProperty(n))&&(t[n]=e[n]);return!r&&e&&e.hasOwnProperty&&e.hasOwnProperty("toString")&&!t.hasOwnProperty("toString")&&(t.toString=e.toString),t},getParameterString:function(t){var e=[];for(var r in t){var n,o=t[r];if(null!=o&&"function"!=typeof o)n=Array.isArray(o)||"[object Object]"===o.toString()?encodeURIComponent(JSON.stringify(o)):encodeURIComponent(o),e.push(encodeURIComponent(r)+"="+n)}return e.join("&")},urlAppend:function(t,e){var r=t;if(e){0===e.indexOf("?")&&(e=e.substring(1));var n=(t+" ").split(/[?&]/);r+=" "===n.pop()?e:n.length?"&"+e:"?"+e}return r},urlPathAppend:function(t,e){var r=t;if(!e)return r;0===e.indexOf("/")&&(e=e.substring(1));var n=t.split("?");return n[0].indexOf("/",n[0].length-1)<0&&(n[0]+="/"),r="".concat(n[0]).concat(e).concat(n.length>1?"?".concat(n[1]):"")},DEFAULT_PRECISION:14,toFloat:function(t,e){return null==e&&(e=Tt.DEFAULT_PRECISION),"number"!=typeof t&&(t=parseFloat(t)),0===e?t:parseFloat(t.toPrecision(e))},rad:function(t){return t*Math.PI/180},getParameters:function(t){t=null===t||void 0===t?window.location.href:t;var e="";if(at.contains(t,"?")){var r=t.indexOf("?")+1,n=at.contains(t,"#")?t.indexOf("#"):t.length;e=t.substring(r,n)}for(var o={},i=e.split(/[&;]/),a=0,s=i.length;a<s;++a){var u=i[a].split("=");if(u[0]){var l=u[0];try{l=decodeURIComponent(l)}catch(t){l=unescape(l)}var c=(u[1]||"").replace(/\+/g," ");try{c=decodeURIComponent(c)}catch(t){c=unescape(c)}1==(c=c.split(",")).length&&(c=c[0]),o[l]=c}}return o},lastSeqID:0,createUniqueID:function(t){return null==t&&(t="id_"),Tt.lastSeqID+=1,t+Tt.lastSeqID},normalizeScale:function(t){return t>1?1/t:t},getResolutionFromScale:function(t,e){var r;t&&(null==e&&(e="degrees"),r=1/(Tt.normalizeScale(t)*Ct[e]*96));return r},getScaleFromResolution:function(t,e){return null==e&&(e="degrees"),t*Ct[e]*96},getBrowser:function(){return Et},isSupportCanvas:Pt,supportCanvas:function(){return Tt.isSupportCanvas},isInTheSameDomain:function(t){return!t||(-1===t.indexOf("//")||Tt.isSameDomain(t,document.location.toString()))},isSameDomain:function(t,e){return new(dt())(t).normalize().origin()===new(dt())(e).normalize().origin()},calculateDpi:function(t,e,r,n,o){if(t&&e&&r){var i,a=t.getWidth(),s=t.getHeight(),u=e.w,l=e.h;if(o=o||6378137,"degree"===(n=n||"degrees").toLowerCase()||"degrees"===n.toLowerCase()||"dd"===n.toLowerCase()){var c=a/u,f=s/l;i=254/(c>f?c:f)/r/(2*Math.PI*o/360)/1e4}else{i=254/(a/u)/r/1e4}return i}},toJSON:function(t){var e=t;if(null==e)return null;switch(e.constructor){case String:return e=(e=(e=(e=(e=(e=(e='"'+e.replace(/(["\\])/g,"\\$1")+'"').replace(/\n/g,"\\n")).replace(/\r/g,"\\r")).replace("<","&lt;")).replace(">","&gt;")).replace(/%/g,"%25")).replace(/&/g,"%26");case Array:for(var r="",n=0,o=e.length;n<o;n++)r+=Tt.toJSON(e[n]),n!==e.length-1&&(r+=",");return"["+r+"]";case Number:return isFinite(e)?String(e):null;case Boolean:return String(e);case Date:return"{'__type':\"System.DateTime\",'Year':"+e.getFullYear()+",'Month':"+(e.getMonth()+1)+",'Day':"+e.getDate()+",'Hour':"+e.getHours()+",'Minute':"+e.getMinutes()+",'Second':"+e.getSeconds()+",'Millisecond':"+e.getMilliseconds()+",'TimezoneOffset':"+e.getTimezoneOffset()+"}";default:if(null!=e.toJSON&&"function"==typeof e.toJSON)return e.toJSON();if("object"===vt(e)){if(e.length){for(var i=[],a=0,s=e.length;a<s;a++)i.push(Tt.toJSON(e[a]));return"["+i.join(",")+"]"}var u=[];for(var l in e)"function"!=typeof e[l]&&"CLASS_NAME"!==l&&"parent"!==l&&u.push("'"+l+"':"+Tt.toJSON(e[l]));return u.length>0?"{"+u.join(",")+"}":"{}"}return e.toString()}},getResolutionFromScaleDpi:function(t,e,r,n){return n=n||6378137,r=r||"",t>0&&e>0?(t=Tt.normalizeScale(t),"degree"===r.toLowerCase()||"degrees"===r.toLowerCase()||"dd"===r.toLowerCase()?254/e/t/(2*Math.PI*n/360)/1e4:254/e/t/1e4):-1},getScaleFromResolutionDpi:function(t,e,r,n){return n=n||6378137,r=r||"",t>0&&e>0?"degree"===r.toLowerCase()||"degrees"===r.toLowerCase()||"dd"===r.toLowerCase()?254/e/t/(2*Math.PI*n/360)/1e4:254/e/t/1e4:-1},transformResult:function(t){return t.responseText&&"string"==typeof t.responseText&&(t=JSON.parse(t.responseText)),t},copyAttributes:function(t,e){if(t=t||{},e)for(var r in e){var n=e[r];void 0!==n&&"CLASS_NAME"!==r&&"function"!=typeof n&&(t[r]=n)}return t},copyAttributesWithClip:function(t,e,r){if(t=t||{},e)for(var n in e){var o=!1;if(r&&r.length)for(var i=0,a=r.length;i<a;i++)if(n===r[i]){o=!0;break}if(!0!==o){var s=e[n];void 0!==s&&"CLASS_NAME"!==n&&"function"!=typeof s&&(t[n]=s)}}return t},cloneObject:function(t){if(null===t||"object"!==vt(t))return t;if(t instanceof Date){var e=new Date;return e.setTime(t.getTime()),e}if(t instanceof Array)return t.slice(0);if(t instanceof Object){var r={};for(var n in t)t.hasOwnProperty(n)&&(r[n]=Tt.cloneObject(t[n]));return r}throw new Error("Unable to copy obj! Its type isn't supported.")},lineIntersection:function(t,e,r,n){var o,i,a=null,s=(n.x-r.x)*(t.y-r.y)-(n.y-r.y)*(t.x-r.x),u=(e.x-t.x)*(t.y-r.y)-(e.y-t.y)*(t.x-r.x),l=(n.y-r.y)*(e.x-t.x)-(n.x-r.x)*(e.y-t.y);if(0!=l)i=u/l,a=(o=s/l)>=0&&i<=1&&o<=1&&i>=0?new ht.Point(t.x+o*(e.x-t.x),t.y+o*(e.y-t.y)):"No Intersection";else if(0==s&&0==u){var c=Math.max(t.y,e.y),f=Math.min(t.y,e.y),p=Math.max(t.x,e.x),h=Math.min(t.x,e.x);a=(r.y>=f&&r.y<=c||n.y>=f&&n.y<=c)&&r.x>=h&&r.x<=p||n.x>=h&&n.x<=p?"Coincident":"Parallel"}else a="Parallel";return a},getTextBounds:function(t,e,r){document.body.appendChild(r),r.style.width="auto",r.style.height="auto",t.fontSize&&(r.style.fontSize=t.fontSize),t.fontFamily&&(r.style.fontFamily=t.fontFamily),t.fontWeight&&(r.style.fontWeight=t.fontWeight),r.style.position="relative",r.style.visibility="hidden",r.style.display="inline-block",r.innerHTML=e;var n=r.clientWidth,o=r.clientHeight;return document.body.removeChild(r),{textWidth:n,textHeight:o}},convertPath:function(t,e){return e?t.replace(/\{([\w-\.]+)\}/g,function(t,r){var n;return n=e.hasOwnProperty(r)?function(t){if(void 0==t||null==t)return"";if(t instanceof Date)return t.toJSON();if(function(t){if("string"!=typeof t&&"object"!==vt(t))return!1;try{var e=t.toString();return"[object Object]"===e||"[object Array]"===e}catch(t){return!1}}(t))return JSON.stringify(t);return t.toString()}(e[r]):t,encodeURIComponent(n)}):t}},Ct={inches:1,ft:12,mi:63360,m:39.3701,km:39370.1,dd:4374754,yd:36};Ct.in=Ct.inches,Ct.degrees=Ct.dd,Ct.nmi=1852*Ct.m;var kt=.0254000508001016;function At(t){"@babel/helpers - typeof";return(At="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function jt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Nt(n.key),n)}}function Nt(t){var e=function(t,e){if("object"!=At(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=At(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==At(e)?e:e+""}Tt.extend(Ct,{Inch:Ct.inches,Meter:39.37,Foot:12,IFoot:11.999976,ClarkeFoot:11.999868327581488,SearsFoot:11.999955194477684,GoldCoastFoot:11.999964589846002,IInch:.9999979999999999,MicroInch:999998e-9,Mil:9.99998e-7,Centimeter:.3937,Kilometer:39370,Yard:36,SearsYard:35.99986558343306,IndianYard:35.99987015540864,IndianYd37:35.999740205100004,IndianYd62:35.999880755999996,IndianYd75:35.999868945,IndianFoot:11.9999567087,IndianFt37:11.9999134017,IndianFt62:11.999960252000001,IndianFt75:11.999956315,Mile:63360,IYard:35.999928,IMile:63359.87328,NautM:72913.24,"Lat-66":4367838.370169282,"Lat-83":4367954.152606599,Decimeter:3.9370000000000003,Millimeter:.03937,Dekameter:393.7,Decameter:393.7,Hectometer:3937,GermanMeter:39.370535294205006,CaGrid:39.359685060000004,ClarkeChain:791.991309620512,GunterChain:792.0000000000001,BenoitChain:791.9977268035781,SearsChain:791.9970428354235,ClarkeLink:7.91991309620512,GunterLink:7.920000000000001,BenoitLink:7.919977268035781,SearsLink:7.919970428354236,Rod:198.00000000000014,IntnlChain:791.998416,IntnlLink:7.91998416,Perch:198.00000000000014,Pole:198.00000000000014,Furlong:7919.999999999997,Rood:148.75036777426,CapeFoot:11.999868185255002,Brealey:14763.75,ModAmFt:12.000458400000001,Fathom:71.999856,"NautM-UK":72959.85408,"50kilometers":1968500,"150kilometers":5905500}),Tt.extend(Ct,{mm:Ct.Meter/1e3,cm:Ct.Meter/100,dm:100*Ct.Meter,km:1e3*Ct.Meter,kmi:Ct.nmi,fath:Ct.Fathom,ch:Ct.IntnlChain,link:Ct.IntnlLink,"us-in":Ct.inches,"us-ft":Ct.Foot,"us-yd":Ct.Yard,"us-ch":Ct.GunterChain,"us-mi":Ct.Mile,"ind-yd":Ct.IndianYd37,"ind-ft":Ct.IndianFt37,"ind-ch":791.9942845122}),Ct.degree=Ct.dd,Ct.meter=Ct.m,Ct.foot=Ct.ft,Ct.inch=Ct.inches,Ct.mile=Ct.mi,Ct.kilometer=Ct.km,Ct.yard=Ct.yd;var It=function(){function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Tt.isArray(e)&&(r=e[1],e=e[0]),this.lon=e?Tt.toFloat(e):0,this.lat=r?Tt.toFloat(r):0,this.CLASS_NAME="SuperMap.LonLat"}return e=t,n=[{key:"fromString",value:function(e){var r=e.split(",");return new t(r[0],r[1])}},{key:"fromArray",value:function(e){var r=Tt.isArray(e);return new t(r&&e[0],r&&e[1])}}],(r=[{key:"toString",value:function(){return"lon="+this.lon+",lat="+this.lat}},{key:"toShortString",value:function(){return this.lon+","+this.lat}},{key:"clone",value:function(){return new t(this.lon,this.lat)}},{key:"add",value:function(e,r){if(null==e||null==r)throw new TypeError("LonLat.add cannot receive null values");return new t(this.lon+Tt.toFloat(e),this.lat+Tt.toFloat(r))}},{key:"equals",value:function(t){var e=!1;return null!=t&&(e=this.lon===t.lon&&this.lat===t.lat||isNaN(this.lon)&&isNaN(this.lat)&&isNaN(t.lon)&&isNaN(t.lat)),e}},{key:"wrapDateLine",value:function(t){var e=this.clone();if(t){for(;e.lon<t.left;)e.lon+=t.getWidth();for(;e.lon>t.right;)e.lon-=t.getWidth()}return e}},{key:"destroy",value:function(){this.lon=null,this.lat=null}}])&&jt(e.prototype,r),n&&jt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,r,n}();function Mt(t){"@babel/helpers - typeof";return(Mt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Rt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Lt(n.key),n)}}function Lt(t){var e=function(t,e){if("object"!=Mt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Mt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Mt(e)?e:e+""}var Dt=function(){function t(e,r,n,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Tt.isArray(e)&&(o=e[3],n=e[2],r=e[1],e=e[0]),this.left=null!=e?Tt.toFloat(e):this.left,this.bottom=null!=r?Tt.toFloat(r):this.bottom,this.right=null!=n?Tt.toFloat(n):this.right,this.top=null!=o?Tt.toFloat(o):this.top,this.centerLonLat=null,this.CLASS_NAME="SuperMap.Bounds"}return e=t,n=[{key:"fromString",value:function(e,r){var n=e.split(",");return t.fromArray(n,r)}},{key:"fromArray",value:function(e,r){return!0===r?new t(e[1],e[0],e[3],e[2]):new t(e[0],e[1],e[2],e[3])}},{key:"fromSize",value:function(e){return new t(0,e.h,e.w,0)}},{key:"oppositeQuadrant",value:function(t){var e="";return e+="t"===t.charAt(0)?"b":"t",e+="l"===t.charAt(1)?"r":"l"}}],(r=[{key:"clone",value:function(){return new t(this.left,this.bottom,this.right,this.top)}},{key:"equals",value:function(t){var e=!1;return null!=t&&(e=this.left===t.left&&this.right===t.right&&this.top===t.top&&this.bottom===t.bottom),e}},{key:"toString",value:function(){return[this.left,this.bottom,this.right,this.top].join(",")}},{key:"toArray",value:function(t){return!0===t?[this.bottom,this.left,this.top,this.right]:[this.left,this.bottom,this.right,this.top]}},{key:"toBBOX",value:function(t,e){null==t&&(t=6);var r=Math.pow(10,t),n=Math.round(this.left*r)/r,o=Math.round(this.bottom*r)/r,i=Math.round(this.right*r)/r,a=Math.round(this.top*r)/r;return!0===e?o+","+n+","+a+","+i:n+","+o+","+i+","+a}},{key:"getWidth",value:function(){return this.right-this.left}},{key:"getHeight",value:function(){return this.top-this.bottom}},{key:"getSize",value:function(){return new X(this.getWidth(),this.getHeight())}},{key:"getCenterPixel",value:function(){return new et((this.left+this.right)/2,(this.bottom+this.top)/2)}},{key:"getCenterLonLat",value:function(){return this.centerLonLat||(this.centerLonLat=new It((this.left+this.right)/2,(this.bottom+this.top)/2)),this.centerLonLat}},{key:"scale",value:function(e,r){var n,o;return e=e||1,null==r&&(r=this.getCenterLonLat()),"SuperMap.LonLat"===r.CLASS_NAME?(n=r.lon,o=r.lat):(n=r.x,o=r.y),new t((this.left-n)*e+n,(this.bottom-o)*e+o,(this.right-n)*e+n,(this.top-o)*e+o)}},{key:"add",value:function(e,r){if(null==e||null==r)throw new TypeError("Bounds.add cannot receive null values");return new t(this.left+e,this.bottom+r,this.right+e,this.top+r)}},{key:"extend",value:function(e){var r=null;if(e){switch(e.CLASS_NAME){case"SuperMap.LonLat":r=new t(e.lon,e.lat,e.lon,e.lat);break;case"SuperMap.Geometry.Point":r=new t(e.x,e.y,e.x,e.y);break;case"SuperMap.Bounds":r=e}r&&(this.centerLonLat=null,(null==this.left||r.left<this.left)&&(this.left=r.left),(null==this.bottom||r.bottom<this.bottom)&&(this.bottom=r.bottom),(null==this.right||r.right>this.right)&&(this.right=r.right),(null==this.top||r.top>this.top)&&(this.top=r.top))}}},{key:"containsLonLat",value:function(t,e){"boolean"==typeof e&&(e={inclusive:e}),e=e||{};var r=this.contains(t.lon,t.lat,e.inclusive),n=e.worldBounds;if(n&&!r){var o=n.getWidth(),i=(n.left+n.right)/2,a=Math.round((t.lon-i)/o);r=this.containsLonLat({lon:t.lon-a*o,lat:t.lat},{inclusive:e.inclusive})}return r}},{key:"containsPixel",value:function(t,e){return this.contains(t.x,t.y,e)}},{key:"contains",value:function(t,e,r){if(null==r&&(r=!0),null==t||null==e)return!1;var n=!1;return n=r?t>=this.left&&t<=this.right&&e>=this.bottom&&e<=this.top:t>this.left&&t<this.right&&e>this.bottom&&e<this.top,n}},{key:"intersectsBounds",value:function(t,e){if("boolean"==typeof e&&(e={inclusive:e}),(e=e||{}).worldBounds){var r=this.wrapDateLine(e.worldBounds);t=t.wrapDateLine(e.worldBounds)}else r=this;null==e.inclusive&&(e.inclusive=!0);var n=!1,o=r.left===t.right||r.right===t.left||r.top===t.bottom||r.bottom===t.top;if(e.inclusive||!o){var i=t.bottom>=r.bottom&&t.bottom<=r.top||r.bottom>=t.bottom&&r.bottom<=t.top,a=t.top>=r.bottom&&t.top<=r.top||r.top>t.bottom&&r.top<t.top,s=t.left>=r.left&&t.left<=r.right||r.left>=t.left&&r.left<=t.right,u=t.right>=r.left&&t.right<=r.right||r.right>=t.left&&r.right<=t.right;n=(i||a)&&(s||u)}if(e.worldBounds&&!n){var l=e.worldBounds,c=l.getWidth(),f=!l.containsBounds(r),p=!l.containsBounds(t);f&&!p?(t=t.add(-c,0),n=r.intersectsBounds(t,{inclusive:e.inclusive})):p&&!f&&(r=r.add(-c,0),n=t.intersectsBounds(r,{inclusive:e.inclusive}))}return n}},{key:"containsBounds",value:function(t,e,r){null==e&&(e=!1),null==r&&(r=!0);var n=this.contains(t.left,t.bottom,r),o=this.contains(t.right,t.bottom,r),i=this.contains(t.left,t.top,r),a=this.contains(t.right,t.top,r);return e?n||o||i||a:n&&o&&i&&a}},{key:"determineQuadrant",value:function(t){var e="",r=this.getCenterLonLat();return e+=t.lat<r.lat?"b":"t",e+=t.lon<r.lon?"l":"r"}},{key:"wrapDateLine",value:function(t,e){var r=(e=e||{}).leftTolerance||0,n=e.rightTolerance||0,o=this.clone();if(t){for(var i=t.getWidth();o.left<t.left&&o.right-n<=t.left;)o=o.add(i,0);for(;o.left+r>=t.right&&o.right>t.right;)o=o.add(-i,0);var a=o.left+r;a<t.right&&a>t.left&&o.right-n>t.right&&(o=o.add(-i,0))}return o}},{key:"toServerJSONObject",value:function(){return{rightTop:{x:this.right,y:this.top},leftBottom:{x:this.left,y:this.bottom},left:this.left,right:this.right,top:this.top,bottom:this.bottom}}},{key:"destroy",value:function(){this.left=null,this.right=null,this.top=null,this.bottom=null,this.centerLonLat=null}}])&&Rt(e.prototype,r),n&&Rt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,r,n}();function Bt(t){"@babel/helpers - typeof";return(Bt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ft(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ut(n.key),n)}}function Ut(t){var e=function(t,e){if("object"!=Bt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Bt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Bt(e)?e:e+""}function Gt(t,e,r){return e=zt(e),function(t,e){if(e&&("object"===Bt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],zt(t).constructor):e.apply(t,r))}function Vt(){return(Vt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=zt(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function zt(t){return(zt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ht(t,e){return(Ht=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var qt=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=Gt(this,e)).components=[],r.componentTypes=null,null!=t&&r.addComponents(t),r.CLASS_NAME="SuperMap.Geometry.Collection",r.geometryType="Collection",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ht(t,e)}(e,ht),r=e,(n=[{key:"destroy",value:function(){this.components.length=0,this.components=null,Vt(zt(e.prototype),"destroy",this).call(this)}},{key:"clone",value:function(){for(var t=new e,r=0,n=this.components.length;r<n;r++)t.addComponent(this.components[r].clone());return Tt.applyDefaults(t,this),t}},{key:"getComponentsString",value:function(){for(var t=[],e=0,r=this.components.length;e<r;e++)t.push(this.components[e].toShortString());return t.join(",")}},{key:"calculateBounds",value:function(){this.bounds=null;var t=new Dt,e=this.components;if(e)for(var r=0,n=e.length;r<n;r++)t.extend(e[r].getBounds());null!=t.left&&null!=t.bottom&&null!=t.right&&null!=t.top&&this.setBounds(t)}},{key:"addComponents",value:function(t){Tt.isArray(t)||(t=[t]);for(var e=0,r=t.length;e<r;e++)this.addComponent(t[e])}},{key:"addComponent",value:function(t,e){var r=!1;if(t&&(null==this.componentTypes||Tt.indexOf(this.componentTypes,t.CLASS_NAME)>-1)){if(null!=e&&e<this.components.length){var n=this.components.slice(0,e),o=this.components.slice(e,this.components.length);n.push(t),this.components=n.concat(o)}else this.components.push(t);t.parent=this,this.clearBounds(),r=!0}return r}},{key:"removeComponents",value:function(t){var e=!1;Tt.isArray(t)||(t=[t]);for(var r=t.length-1;r>=0;--r)e=this.removeComponent(t[r])||e;return e}},{key:"removeComponent",value:function(t){return Tt.removeItem(this.components,t),this.clearBounds(),!0}},{key:"getArea",value:function(){for(var t=0,e=0,r=this.components.length;e<r;e++)t+=this.components[e].getArea();return t}},{key:"equals",value:function(t){var e=!0;if(t&&t.CLASS_NAME&&this.CLASS_NAME===t.CLASS_NAME)if(Tt.isArray(t.components)&&t.components.length===this.components.length){for(var r=0,n=this.components.length;r<n;++r)if(!this.components[r].equals(t.components[r])){e=!1;break}}else e=!1;else e=!1;return e}},{key:"getVertices",value:function(t){for(var e=[],r=0,n=this.components.length;r<n;++r)Array.prototype.push.apply(e,this.components[r].getVertices(t));return e}}])&&Ft(r.prototype,n),o&&Ft(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function Jt(t){"@babel/helpers - typeof";return(Jt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Wt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Kt(n.key),n)}}function Kt(t){var e=function(t,e){if("object"!=Jt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Jt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Jt(e)?e:e+""}function Yt(t,e,r){return e=Qt(e),function(t,e){if(e&&("object"===Jt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Qt(t).constructor):e.apply(t,r))}function Qt(t){return(Qt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Xt(t,e){return(Xt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Zt=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=Yt(this,e,[t])).componentTypes=["SuperMap.Geometry.Point"],r.CLASS_NAME="SuperMap.Geometry.MultiPoint",r.geometryType="MultiPoint",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Xt(t,e)}(e,qt),r=e,(n=[{key:"addPoint",value:function(t,e){this.addComponent(t,e)}},{key:"removePoint",value:function(t){this.removeComponent(t)}}])&&Wt(r.prototype,n),o&&Wt(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function $t(t){"@babel/helpers - typeof";return($t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function te(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ee(n.key),n)}}function ee(t){var e=function(t,e){if("object"!=$t(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=$t(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==$t(e)?e:e+""}function re(t,e,r){return e=ne(e),function(t,e){if(e&&("object"===$t(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],ne(t).constructor):e.apply(t,r))}function ne(t){return(ne=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function oe(t,e){return(oe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var ie=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=re(this,e,[t])).componentTypes=["SuperMap.Geometry.Point","SuperMap.PointWithMeasure"],r.CLASS_NAME="SuperMap.Geometry.Curve",r.geometryType="Curve",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&oe(t,e)}(e,Zt),r=e,n&&te(r.prototype,n),o&&te(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function ae(t){"@babel/helpers - typeof";return(ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function se(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ue(n.key),n)}}function ue(t){var e=function(t,e){if("object"!=ae(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=ae(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ae(e)?e:e+""}function le(t,e,r){return e=fe(e),function(t,e){if(e&&("object"===ae(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],fe(t).constructor):e.apply(t,r))}function ce(){return(ce="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=fe(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function fe(t){return(fe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function pe(t,e){return(pe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var he=function(t){function e(t,r,n,o){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(i=le(this,e,[t,r,n,o])).x=parseFloat(t),i.y=parseFloat(r),i.tag=o||0==o?parseFloat(o):null,i.type=n||"Point",i.CLASS_NAME="SuperMap.Geometry.Point",i.geometryType="Point",i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&pe(t,e)}(e,ht),r=e,(n=[{key:"clone",value:function(t){return null==t&&(t=new e(this.x,this.y)),Tt.applyDefaults(t,this),t}},{key:"calculateBounds",value:function(){this.bounds=new Dt(this.x,this.y,this.x,this.y)}},{key:"equals",value:function(t){var e=!1;return null!=t&&(e=this.x===t.x&&this.y===t.y||isNaN(this.x)&&isNaN(this.y)&&isNaN(t.x)&&isNaN(t.y)),e}},{key:"move",value:function(t,e){this.x=this.x+t,this.y=this.y+e,this.clearBounds()}},{key:"toShortString",value:function(){return this.x+", "+this.y}},{key:"destroy",value:function(){this.x=null,this.y=null,this.tag=null,ce(fe(e.prototype),"destroy",this).call(this)}},{key:"getVertices",value:function(){return[this]}}])&&se(r.prototype,n),o&&se(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function ye(t){"@babel/helpers - typeof";return(ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function de(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ve(n.key),n)}}function ve(t){var e=function(t,e){if("object"!=ye(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=ye(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ye(e)?e:e+""}function me(t,e,r){return e=ge(e),function(t,e){if(e&&("object"===ye(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],ge(t).constructor):e.apply(t,r))}function be(){return(be="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ge(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function ge(t){return(ge=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Se(t,e){return(Se=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var we=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=me(this,e,[t])).CLASS_NAME="SuperMap.Geometry.LineString",r.geometryType="LineString",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Se(t,e)}(e,ie),r=e,o=[{key:"calculateCircle",value:function(t){if(t.length<3)return t;var e={},r=t[0],n=t[1],o=t[2],i=0,a=0,s=!0,u=0,l=0,c=0,f=[],p=(o.y-r.y)/(o.x-r.x),h=o.y-p*o.x;if(o.x!=r.x&&o.y!=r.y&&n.y==p*n.x+h||o.x==r.x&&n.x==r.x||o.y==r.y&&n.y==r.y||o.x==r.x&&o.y==r.y||o.x==n.x&&o.y==n.y||r.x==n.x&&r.y==n.y)f.push(r),f.push(n),f.push(o);else{var y=(n.x*n.x+n.y*n.y-(r.x*r.x+r.y*r.y))*(2*(o.y-r.y))-(o.x*o.x+o.y*o.y-(r.x*r.x+r.y*r.y))*(2*(n.y-r.y)),d=2*(n.x-r.x)*(o.x*o.x+o.y*o.y-(r.x*r.x+r.y*r.y))-2*(o.x-r.x)*(n.x*n.x+n.y*n.y-(r.x*r.x+r.y*r.y)),v=4*((n.x-r.x)*(o.y-r.y)-(o.x-r.x)*(n.y-r.y));e.x=y/v,e.y=d/v;var m=(2*(i=Math.sqrt((r.x-e.x)*(r.x-e.x)+(r.y-e.y)*(r.y-e.y)))*i-((r.x-o.x)*(r.x-o.x)+(r.y-o.y)*(r.y-o.y)))/(2*i*i);m=(m=m>=1?1:m)<=-1?-1:m,c=180*Math.acos(m)/Math.PI,a=(c=o.x==r.x?e.x>r.x&&n.x>r.x||e.x<r.x&&n.x<r.x?360-c:c:e.y>p*e.x+h&&n.y>p*n.x+h||e.y<p*e.x+h&&n.y<p*n.x+h?360-c:c)/72,o.y!=r.y?o.x==r.x?o.y>r.y?n.x<r.x&&(s=!1):n.x>r.x&&(s=!1):o.x<r.x?n.y<p*n.x+h&&(s=!1):n.y>p*n.x+h&&(s=!1):o.x>r.x?n.y>r.y&&(s=!1):n.y<r.y&&(s=!1);var b=(r.y-e.y)/(r.x-e.x),g=b>=0?180*Math.atan(b)/Math.PI:Math.abs(180*Math.atan(b)/Math.PI)+90,S=Math.abs(e.y);r.y==S&&S==o.y&&r.x<o.x&&(g+=180);var w=r.y-e.y;f.push(r);for(var _=1;_<72;_++){u=a*_,l=g,s?w>=0?b>=0?l+=u:l=180-(l-90)+u:l=b>0?l-180+u:90-l+u:w>=0?b>=0?l-=u:l=180-(l-90)-u:l=b>=0?l-180-u:90-l-u,l=l*Math.PI/180;var O=e.x+i*Math.cos(l),E=e.y+i*Math.sin(l);f.push(new he(O,E))}f.push(o)}return f}},{key:"createLineEPS",value:function(t){var r=[],n=t.length;if(n<2)return t;for(var o=0;o<n;){if("LTypeArc"==t[o].type){var i=e.createLineArc(r,o,n,t);r=i[0],o=i[1]}else r.push(t[o]),o++}return r}},{key:"createLineArc",value:function(t,r,n,o){if(0==r){var i=e.addPointEPS(o,r,n,"LTypeArc");Array.prototype.push.apply(t,i[0]),r=i[1]+1}else if(r==n-1){var a=[o[r-1],o[r]],s=e.calculateCircle(a);Array.prototype.push.apply(t,s),r++}else{var u=e.addPointEPS(o,r,n,"LTypeArc");t.pop(),Array.prototype.push.apply(t,u[0]),r=u[1]+1}return[t,r]}},{key:"addPointEPS",value:function(t,r,n,o){var i,a=[],s=r+1;return 0==r?Array.prototype.push.apply(a,[t[r],t[r+1]]):r==n-1?Array.prototype.push.apply(a,[t[r-1],t[r]]):Array.prototype.push.apply(a,[t[r-1],t[r],t[r+1]]),"LTypeCurve"==o?i=e.calculatePointsFBZN(a):"LTypeArc"==o&&(i=e.calculateCircle(a)),[i,s]}}],(n=[{key:"removeComponent",value:function(t){var r=this.components&&this.components.length>2;return r&&be(ge(e.prototype),"removeComponent",this).apply(this,arguments),r}},{key:"getSortedSegments",value:function(){for(var t,e,r=this.components.length-1,n=new Array(r),o=0;o<r;++o)t=this.components[o],e=this.components[o+1],t.x<e.x?n[o]={x1:t.x,y1:t.y,x2:e.x,y2:e.y}:n[o]={x1:e.x,y1:e.y,x2:t.x,y2:t.y};return n.sort(function(t,e){return t.x1-e.x1})}},{key:"getVertices",value:function(t){return!0===t?[this.components[0],this.components[this.components.length-1]]:!1===t?this.components.slice(1,this.components.length-1):this.components.slice()}}])&&de(r.prototype,n),o&&de(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function _e(t){"@babel/helpers - typeof";return(_e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Oe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ee(n.key),n)}}function Ee(t){var e=function(t,e){if("object"!=_e(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=_e(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==_e(e)?e:e+""}function Pe(t,e,r){return e=Te(e),function(t,e){if(e&&("object"===_e(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Te(t).constructor):e.apply(t,r))}function xe(){return(xe="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Te(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Te(t){return(Te=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ce(t,e){return(Ce=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var ke=function(t){function e(t,r,n){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(o=Pe(this,e,[t,r,n])).x=parseFloat(t),o.y=parseFloat(r),o.text=n.toString(),o.bsInfo={h:null,w:null},o.element=document.createElement("span"),o.CLASS_NAME="SuperMap.Geometry.GeoText",o.geometryType="GeoText",o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ce(t,e)}(e,ht),r=e,(n=[{key:"destroy",value:function(){xe(Te(e.prototype),"destroy",this).call(this),this.x=null,this.y=null,this.text=null}},{key:"getCentroid",value:function(){return new he(this.x,this.y)}},{key:"clone",value:function(t){return null==t&&(t=new e(this.x,this.y,this.text)),Tt.applyDefaults(t,this),t}},{key:"calculateBounds",value:function(){this.bounds=new Dt(this.x,this.y,this.x,this.y)}},{key:"getLabelPxBoundsByLabel",value:function(t,e,r,n){var o,i,a,s,u=Tt.cloneObject(t),l=(n.label||this.text).split("\n").length;if(e=parseFloat(e),r=parseFloat(r),l>1&&(r=parseFloat(r)*l),n.labelAlign&&"cm"!==n.labelAlign)switch(n.labelAlign){case"lt":u.x+=e/2,u.y+=r/2;break;case"lm":u.x+=e/2;break;case"lb":u.x+=e/2,u.y-=r/2;break;case"ct":u.y+=r/2;break;case"cb":u.y-=r/2;break;case"rt":u.x-=e/2,u.y+=r/2;break;case"rm":u.x-=e/2;break;case"rb":u.x-=e/2,u.y-=r/2}return this.bsInfo.h=r,this.bsInfo.w=e,o=u.x-parseFloat(e)/2,i=u.y+parseFloat(r)/2,s=u.x+parseFloat(e)/2,a=u.y-parseFloat(r)/2,new Dt(o,i,s,a)}},{key:"getLabelPxBoundsByText",value:function(t,e){var r,n,o,i,a=this.getLabelPxSize(e),s=Tt.cloneObject(t);if(e.labelAlign&&"cm"!==e.labelAlign)switch(e.labelAlign){case"lt":s.x+=a.w/2,s.y+=a.h/2;break;case"lm":s.x+=a.w/2;break;case"lb":s.x+=a.w/2,s.y-=a.h/2;break;case"ct":s.y+=a.h/2;break;case"cb":s.y-=a.h/2;break;case"rt":s.x-=a.w/2,s.y+=a.h/2;break;case"rm":s.x-=a.w/2;break;case"rb":s.x-=a.w/2,s.y-=a.h/2}return this.bsInfo.h=a.h,this.bsInfo.w=a.w,r=s.x-a.w/2,n=s.y+a.h/2,i=e.fontStyle&&"italic"===e.fontStyle?s.x+a.w/2+parseInt(parseFloat(e.fontSize)/2):s.x+a.w/2,o=s.y-a.h/2,new Dt(r,n,i,o)}},{key:"getLabelPxSize",value:function(t){var e,r,n,o,i=parseFloat(t.strokeWidth);e=t.label||this.text,r=t.fontSize?parseFloat(t.fontSize):parseFloat("12px");var a=e.split("\n"),s=a.length;o=s>1?r*s+s+i+.2*r:r+i+.2*r+1,n=0,this.labelWTmp&&n<this.labelWTmp&&(n=this.labelWTmp);for(var u=0;u<s;u++){var l=this.getTextCount(a[u]),c=this.labelWTmp=Tt.getTextBounds(t,a[u],this.element).textWidth+1*l.textC+i;n<c&&(n=c)}var f=new Object;return f.h=o,f.w=n,f}},{key:"getTextCount",value:function(t){for(var e={},r=0,n=0,o=0;o<t.length;o++)t.charCodeAt(o)>255?r++:n++;return e.cnC=r,e.enC=n,e.textC=t.length,e}}])&&Oe(r.prototype,n),o&&Oe(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function Ae(t){"@babel/helpers - typeof";return(Ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function je(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ne(n.key),n)}}function Ne(t){var e=function(t,e){if("object"!=Ae(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Ae(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Ae(e)?e:e+""}function Ie(t,e,r){return e=Re(e),function(t,e){if(e&&("object"===Ae(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Re(t).constructor):e.apply(t,r))}function Me(){return(Me="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Re(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Re(t){return(Re=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Le(t,e){return(Le=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var De=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=Ie(this,e,[t])).componentTypes=["SuperMap.Geometry.Point"],r.CLASS_NAME="SuperMap.Geometry.LinearRing",r.geometryType="LinearRing",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Le(t,e)}(e,we),r=e,(n=[{key:"addComponent",value:function(t,r){var n=!1,o=this.components.pop();null==r&&t.equals(o)||(n=Me(Re(e.prototype),"addComponent",this).apply(this,arguments));var i=this.components[0];return Me(Re(e.prototype),"addComponent",this).apply(this,[i]),n}},{key:"removeComponent",value:function(t){var r=this.components&&this.components.length>3;if(r){this.components.pop(),Me(Re(e.prototype),"removeComponent",this).apply(this,arguments);var n=this.components[0];Me(Re(e.prototype),"addComponent",this).apply(this,[n])}return r}},{key:"getArea",value:function(){var t=0;if(this.components&&this.components.length>2){for(var e=0,r=0,n=this.components.length;r<n-1;r++){var o=this.components[r],i=this.components[r+1];e+=(o.x+i.x)*(i.y-o.y)}t=-e/2}return t}},{key:"getVertices",value:function(t){return!0===t?[]:this.components.slice(0,this.components.length-1)}}])&&je(r.prototype,n),o&&je(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function Be(t){"@babel/helpers - typeof";return(Be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Fe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ue(n.key),n)}}function Ue(t){var e=function(t,e){if("object"!=Be(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Be(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Be(e)?e:e+""}function Ge(t,e,r){return e=Ve(e),function(t,e){if(e&&("object"===Be(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Ve(t).constructor):e.apply(t,r))}function Ve(t){return(Ve=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ze(t,e){return(ze=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var He=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=Ge(this,e,[t])).componentTypes=["SuperMap.Geometry.LineString"],r.CLASS_NAME="SuperMap.Geometry.MultiLineString",r.geometryType="MultiLineString",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ze(t,e)}(e,qt),r=e,n&&Fe(r.prototype,n),o&&Fe(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function qe(t){"@babel/helpers - typeof";return(qe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Je(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,We(n.key),n)}}function We(t){var e=function(t,e){if("object"!=qe(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=qe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==qe(e)?e:e+""}function Ke(t,e,r){return e=Ye(e),function(t,e){if(e&&("object"===qe(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Ye(t).constructor):e.apply(t,r))}function Ye(t){return(Ye=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Qe(t,e){return(Qe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Xe=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=Ke(this,e,[t])).componentTypes=["SuperMap.Geometry.Polygon"],r.CLASS_NAME="SuperMap.Geometry.MultiPolygon",r.geometryType="MultiPolygon",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Qe(t,e)}(e,qt),r=e,n&&Je(r.prototype,n),o&&Je(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function Ze(t){"@babel/helpers - typeof";return(Ze="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function $e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,tr(n.key),n)}}function tr(t){var e=function(t,e){if("object"!=Ze(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Ze(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Ze(e)?e:e+""}function er(t,e,r){return e=rr(e),function(t,e){if(e&&("object"===Ze(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],rr(t).constructor):e.apply(t,r))}function rr(t){return(rr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function nr(t,e){return(nr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var or=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=er(this,e,[t])).componentTypes=["SuperMap.Geometry.LinearRing"],r.CLASS_NAME="SuperMap.Geometry.Polygon",r.geometryType="Polygon",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&nr(t,e)}(e,qt),r=e,(n=[{key:"getArea",value:function(){var t=0;if(this.components&&this.components.length>0){t+=Math.abs(this.components[0].getArea());for(var e=1,r=this.components.length;e<r;e++)t-=Math.abs(this.components[e].getArea())}return t}}])&&$e(r.prototype,n),o&&$e(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function ir(t){"@babel/helpers - typeof";return(ir="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ar(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,sr(n.key),n)}}function sr(t){var e=function(t,e){if("object"!=ir(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=ir(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ir(e)?e:e+""}function ur(t,e,r){return e=lr(e),function(t,e){if(e&&("object"===ir(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],lr(t).constructor):e.apply(t,r))}function lr(t){return(lr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function cr(t,e){return(cr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var fr=function(t){function e(t,r,n,o){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(i=ur(this,e,[t,r,n,o])).x=t,i.y=r,i.width=n,i.height=o,i.CLASS_NAME="SuperMap.Geometry.Rectangle",i.geometryType="Rectangle",i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&cr(t,e)}(e,ht),r=e,(n=[{key:"calculateBounds",value:function(){this.bounds=new Dt(this.x,this.y,this.x+this.width,this.y+this.height)}},{key:"getArea",value:function(){return this.width*this.height}}])&&ar(r.prototype,n),o&&ar(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function pr(t){"@babel/helpers - typeof";return(pr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function hr(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,yr(n.key),n)}}function yr(t){var e=function(t,e){if("object"!=pr(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=pr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==pr(e)?e:e+""}var dr=function(){return t=function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.value=e||"",this.name=r||"token",this.CLASS_NAME="SuperMap.Credential"},(e=[{key:"getUrlParameters",value:function(){return this.name+"="+this.value}},{key:"getValue",value:function(){return this.value}},{key:"destroy",value:function(){this.value=null,this.name=null}}])&&hr(t.prototype,e),r&&hr(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();dr.CREDENTIAL=null;var vr={toISOString:function(){if("toISOString"in Date.prototype)return function(t){return t.toISOString()};var t=function(t,e){for(var r=t+"";r.length<e;)r="0"+r;return r};return function(e){return isNaN(e.getTime())?"Invalid Date":e.getUTCFullYear()+"-"+t(e.getUTCMonth()+1,2)+"-"+t(e.getUTCDate(),2)+"T"+t(e.getUTCHours(),2)+":"+t(e.getUTCMinutes(),2)+":"+t(e.getUTCSeconds(),2)+"."+t(e.getUTCMilliseconds(),3)+"Z"}}(),parse:function(t){var e,r=t.match(/^(?:(\d{4})(?:-(\d{2})(?:-(\d{2}))?)?)?(?:(?:T(\d{1,2}):(\d{2}):(\d{2}(?:\.\d+)?)(Z|(?:[+-]\d{1,2}(?::(\d{2}))?)))|Z)?$/);if(r&&(r[1]||r[7])){var n=parseInt(r[1],10)||0,o=parseInt(r[2],10)-1||0,i=parseInt(r[3],10)||1;e=new Date(Date.UTC(n,o,i));var a=r[7];if(a){var s=parseInt(r[4],10),u=parseInt(r[5],10),l=parseFloat(r[6]),c=0|l,f=Math.round(1e3*(l-c));if(e.setUTCHours(s,u,c,f),"Z"!==a){var p=-1e3*(60*parseInt(a,10)*60+60*(parseInt(r[8],10)||0));e=new Date(e.getTime()+p)}}}else e=new Date("invalid");return e}},mr={observers:!1,KEY_SPACE:32,KEY_BACKSPACE:8,KEY_TAB:9,KEY_RETURN:13,KEY_ESC:27,KEY_LEFT:37,KEY_UP:38,KEY_RIGHT:39,KEY_DOWN:40,KEY_DELETE:46,element:function(t){return t.target||t.srcElement},isSingleTouch:function(t){return t.touches&&1===t.touches.length},isMultiTouch:function(t){return t.touches&&t.touches.length>1},isLeftClick:function(t){return t.which&&1===t.which||t.button&&1===t.button},isRightClick:function(t){return t.which&&3===t.which||t.button&&2===t.button},stop:function(t,e){e||(t.preventDefault?t.preventDefault():t.returnValue=!1),t.stopPropagation?t.stopPropagation():t.cancelBubble=!0},findElement:function(t,e){for(var r=mr.element(t);r.parentNode&&(!r.tagName||r.tagName.toUpperCase()!=e.toUpperCase());)r=r.parentNode;return r},observe:function(t,e,r,n){var o=Tt.getElement(t);if(n=n||!1,"keypress"===e&&(navigator.appVersion.match(/Konqueror|Safari|KHTML/)||o.attachEvent)&&(e="keydown"),this.observers||(this.observers={}),!o._eventCacheID){var i="eventCacheID_";o.id&&(i=o.id+"_"+i),o._eventCacheID=Tt.createUniqueID(i)}var a=o._eventCacheID;this.observers[a]||(this.observers[a]=[]),this.observers[a].push({element:o,name:e,observer:r,useCapture:n}),o.addEventListener?"mousewheel"===e?o.addEventListener(e,r,{useCapture:n,passive:!1}):o.addEventListener(e,r,n):o.attachEvent&&o.attachEvent("on"+e,r)},stopObservingElement:function(t){var e=Tt.getElement(t)._eventCacheID;this._removeElementObservers(mr.observers[e])},_removeElementObservers:function(t){if(t)for(var e=t.length-1;e>=0;e--){var r=t[e],n=new Array(r.element,r.name,r.observer,r.useCapture);mr.stopObserving.apply(this,n)}},stopObserving:function(t,e,r,n){n=n||!1;var o=Tt.getElement(t),i=o._eventCacheID;"keypress"===e&&(navigator.appVersion.match(/Konqueror|Safari|KHTML/)||o.detachEvent)&&(e="keydown");var a=!1,s=mr.observers[i];if(s)for(var u=0;!a&&u<s.length;){var l=s[u];if(l.name===e&&l.observer===r&&l.useCapture===n){s.splice(u,1),0==s.length&&delete mr.observers[i],a=!0;break}u++}return a&&(o.removeEventListener?o.removeEventListener(e,r,n):o&&o.detachEvent&&o.detachEvent("on"+e,r)),a},unloadCache:function(){if(mr&&mr.observers){for(var t in mr.observers){var e=mr.observers[t];mr._removeElementObservers.apply(this,[e])}mr.observers=!1}},CLASS_NAME:"SuperMap.Event"};function br(t){"@babel/helpers - typeof";return(br="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function gr(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Sr(n.key),n)}}function Sr(t){var e=function(t,e){if("object"!=br(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=br(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==br(e)?e:e+""}mr.observe(window,"resize",mr.unloadCache,!1);var wr=function(){function t(e,r,n,o,i){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.BROWSER_EVENTS=["mouseover","mouseout","mousedown","mouseup","mousemove","click","dblclick","rightclick","dblrightclick","resize","focus","blur","touchstart","touchmove","touchend","keydown","MSPointerDown","MSPointerUp","pointerdown","pointerup","MSGestureStart","MSGestureChange","MSGestureEnd","contextmenu"],this.listeners={},this.object=e,this.element=null,this.eventTypes=[],this.eventHandler=null,this.fallThrough=o,this.includeXY=!1,this.extensions={},this.extensionCount={},this.clearMouseListener=null,Tt.extend(this,i),null!=n)for(var a=0,s=n.length;a<s;a++)this.addEventType(n[a]);null!=r&&this.attachToElement(r),this.CLASS_NAME="SuperMap.Events"}return e=t,(r=[{key:"destroy",value:function(){for(var t in this.extensions)"boolean"!=typeof this.extensions[t]&&this.extensions[t].destroy();this.extensions=null,this.element&&(mr.stopObservingElement(this.element),this.element.hasScrollEvent&&mr.stopObserving(window,"scroll",this.clearMouseListener)),this.element=null,this.listeners=null,this.object=null,this.eventTypes=null,this.fallThrough=null,this.eventHandler=null}},{key:"addEventType",value:function(t){this.listeners[t]||(this.eventTypes.push(t),this.listeners[t]=[])}},{key:"attachToElement",value:function(t){this.element?mr.stopObservingElement(this.element):(this.eventHandler=ut.bindAsEventListener(this.handleBrowserEvent,this),this.clearMouseListener=ut.bind(this.clearMouseCache,this)),this.element=t;for(var e=0,r=this.BROWSER_EVENTS.length;e<r;e++){var n=this.BROWSER_EVENTS[e];this.addEventType(n),mr.observe(t,n,this.eventHandler)}mr.observe(t,"dragstart",mr.stop)}},{key:"on",value:function(t){for(var e in t)"scope"!==e&&t.hasOwnProperty(e)&&this.register(e,t.scope,t[e])}},{key:"register",value:function(e,r,n,o){if(e in t&&!this.extensions[e]&&(this.extensions[e]=new t[e](this)),null!=n&&-1!==Tt.indexOf(this.eventTypes,e)){null==r&&(r=this.object);var i=this.listeners[e];i||(i=[],this.listeners[e]=i,this.extensionCount[e]=0);var a={obj:r,func:n};o?(i.splice(this.extensionCount[e],0,a),"object"===br(o)&&o.extension&&this.extensionCount[e]++):i.push(a)}}},{key:"registerPriority",value:function(t,e,r){this.register(t,e,r,!0)}},{key:"un",value:function(t){for(var e in t)"scope"!==e&&t.hasOwnProperty(e)&&this.unregister(e,t.scope,t[e])}},{key:"unregister",value:function(t,e,r){null==e&&(e=this.object);var n=this.listeners[t];if(null!=n)for(var o=0,i=n.length;o<i;o++)if(n[o].obj===e&&n[o].func===r){n.splice(o,1);break}}},{key:"remove",value:function(t){null!=this.listeners[t]&&(this.listeners[t]=[])}},{key:"triggerEvent",value:function(t,e){var r=this.listeners[t];if(r&&0!=r.length){var n;null==e&&(e={}),e.object=this.object,e.element=this.element,e.type||(e.type=t);for(var o=0,i=(r=r.slice()).length;o<i;o++){var a=r[o];if(void 0!=(n=a.func.apply(a.obj,[e]))&&!1===n)break}return this.fallThrough||mr.stop(e,!0),n}}},{key:"handleBrowserEvent",value:function(t){var e=t.type,r=this.listeners[e];if(r&&0!=r.length){var n=t.touches;if(n&&n[0]){for(var o,i=0,a=0,s=n.length,u=0;u<s;++u)i+=(o=n[u]).clientX,a+=o.clientY;t.clientX=i/s,t.clientY=a/s}this.includeXY&&(t.xy=this.getMousePosition(t)),this.triggerEvent(e,t)}}},{key:"clearMouseCache",value:function(){this.element.scrolls=null,this.element.lefttop=null;var t=document.body;t&&(0==t.scrollTop&&0==t.scrollLeft||!navigator.userAgent.match(/iPhone/i))&&(this.element.offsets=null)}},{key:"getMousePosition",value:function(t){if(this.includeXY?this.element.hasScrollEvent||(mr.observe(window,"scroll",this.clearMouseListener),this.element.hasScrollEvent=!0):this.clearMouseCache(),!this.element.scrolls){var e=Tt.getViewportElement();this.element.scrolls=[e.scrollLeft,e.scrollTop]}return this.element.lefttop||(this.element.lefttop=[document.documentElement.clientLeft||0,document.documentElement.clientTop||0]),this.element.offsets||(this.element.offsets=Tt.pagePosition(this.element)),new et(t.clientX+this.element.scrolls[0]-this.element.offsets[0]-this.element.lefttop[0],t.clientY+this.element.scrolls[1]-this.element.offsets[1]-this.element.lefttop[1])}}])&&gr(e.prototype,r),n&&gr(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,r,n}();function _r(t){"@babel/helpers - typeof";return(_r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Or(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Er(n.key),n)}}function Er(t){var e=function(t,e){if("object"!=_r(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=_r(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==_r(e)?e:e+""}wr.prototype.BROWSER_EVENTS=["mouseover","mouseout","mousedown","mouseup","mousemove","click","dblclick","rightclick","dblrightclick","resize","focus","blur","touchstart","touchmove","touchend","keydown","MSPointerDown","MSPointerUp","pointerdown","pointerup","MSGestureStart","MSGestureChange","MSGestureEnd","contextmenu"];var Pr=function(){return t=function t(e,r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.CLASS_NAME="SuperMap.Feature",this.layer=e,this.id=Tt.createUniqueID(this.CLASS_NAME+"_"),this.lonlat=r,this.data=null!=n?n:{}},(e=[{key:"destroy",value:function(){this.id=null,this.lonlat=null,this.data=null}}])&&Or(t.prototype,e),r&&Or(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function xr(t){"@babel/helpers - typeof";return(xr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Tr(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Cr(n.key),n)}}function Cr(t){var e=function(t,e){if("object"!=xr(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=xr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==xr(e)?e:e+""}var kr=function(){function t(e,r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.red=e||0==e?e:255,this.green=r||0,this.blue=n||0,this.CLASS_NAME="SuperMap.ServerColor"}return e=t,n=[{key:"fromJson",value:function(e){if(e){var r=new t,n=255;null!==e.red&&(n=Number(e.red)),r.red=n;var o=0;null!==e.green&&(o=Number(e.green)),r.green=o;var i=0;return null!==e.blue&&(i=Number(e.blue)),r.blue=i,r}}}],(r=[{key:"destroy",value:function(){this.red=null,this.green=null,this.blue=null}}])&&Tr(e.prototype,r),n&&Tr(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,r,n}();function Ar(t){"@babel/helpers - typeof";return(Ar="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function jr(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Nr(n.key),n)}}function Nr(t){var e=function(t,e){if("object"!=Ar(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Ar(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Ar(e)?e:e+""}var Ir=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.fillBackColor=new kr(255,255,255),this.fillBackOpaque=!1,this.fillForeColor=new kr(255,0,0),this.fillGradientMode=null,this.fillGradientAngle=0,this.fillGradientOffsetRatioX=0,this.fillGradientOffsetRatioY=0,this.fillOpaqueRate=100,this.fillSymbolID=0,this.lineColor=new kr(0,0,0),this.lineSymbolID=0,this.lineWidth=1,this.markerAngle=0,this.markerSize=1,this.markerSymbolID=-1,e&&Tt.extend(this,e),this.CLASS_NAME="SuperMap.ServerStyle"}return e=t,n=[{key:"fromJson",value:function(e){if(e)return new t({fillBackColor:kr.fromJson(e.fillBackColor),fillBackOpaque:e.fillBackOpaque,fillForeColor:kr.fromJson(e.fillForeColor),fillGradientMode:e.fillGradientMode,fillGradientAngle:e.fillGradientAngle,fillGradientOffsetRatioX:e.fillGradientOffsetRatioX,fillGradientOffsetRatioY:e.fillGradientOffsetRatioY,fillOpaqueRate:e.fillOpaqueRate,fillSymbolID:e.fillSymbolID,lineColor:kr.fromJson(e.lineColor),lineSymbolID:e.lineSymbolID,lineWidth:e.lineWidth,markerAngle:e.markerAngle,markerSize:e.markerSize,markerSymbolID:e.markerSymbolID})}}],(r=[{key:"destroy",value:function(){var t=this;t.fillBackColor&&(t.fillBackColor.destroy(),t.fillBackColor=null),t.fillBackOpaque=null,t.fillForeColor&&(t.fillForeColor.destroy(),t.fillForeColor=null),t.fillGradientMode=null,t.fillGradientAngle=null,t.fillGradientOffsetRatioX=null,t.fillGradientOffsetRatioY=null,t.fillOpaqueRate=null,t.fillSymbolID=null,t.lineColor&&(t.lineColor.destroy(),t.lineColor=null),t.lineSymbolID=null,t.lineWidth=null,t.markerAngle=null,t.markerSize=null,t.markerSymbolID=null}},{key:"toServerJSONObject",value:function(){var t={};return t=Tt.copyAttributes(t,this)}}])&&jr(e.prototype,r),n&&jr(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,r,n}();function Mr(t){"@babel/helpers - typeof";return(Mr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Rr(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Lr(n.key),n)}}function Lr(t){var e=function(t,e){if("object"!=Mr(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Mr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Mr(e)?e:e+""}function Dr(t,e,r){return e=Br(e),function(t,e){if(e&&("object"===Mr(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Br(t).constructor):e.apply(t,r))}function Br(t){return(Br=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Fr(t,e){return(Fr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Ur=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=Dr(this,e,[t])).measure=null,t&&Tt.extend(r,t),r.CLASS_NAME="SuperMap.PointWithMeasure",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Fr(t,e)}(e,he),r=e,o=[{key:"fromJson",value:function(t){if(t)return new e({x:t.x,y:t.y,measure:t.measure})}}],(n=[{key:"equals",value:function(t){var e=!1;if(null!=t){var r=this.x===t.x&&this.y===t.y&&this.measure===t.measure,n=isNaN(this.x)&&isNaN(this.y)&&isNaN(this.measure),o=isNaN(t.x)&&isNaN(t.y)&&isNaN(t.measure);e=r||n&&o}return e}},{key:"toJson",value:function(){var t="{";return null!=this.measure&&void 0!=this.measure&&(t+='"measure":'+this.measure+","),t+='"x":'+this.x+",",t+='"y":'+this.y,t+="}"}},{key:"destroy",value:function(){this.measure=null,this.x=null,this.y=null}}])&&Rr(r.prototype,n),o&&Rr(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function Gr(t){"@babel/helpers - typeof";return(Gr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Vr(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,zr(n.key),n)}}function zr(t){var e=function(t,e){if("object"!=Gr(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Gr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Gr(e)?e:e+""}function Hr(t,e,r){return e=qr(e),function(t,e){if(e&&("object"===Gr(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],qr(t).constructor):e.apply(t,r))}function qr(t){return(qr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Jr(t,e){return(Jr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Wr=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Hr(this,e,[t,r])).id=null,n.center=null,n.style=null,n.length=null,n.maxM=null,n.minM=null,n.parts=null,n.points=null,n.type=null,n.componentTypes=["SuperMap.Geometry.LinearRing","SuperMap.Geometry.LineString"],r&&Tt.extend(n,r),n.CLASS_NAME="SuperMap.Route",n.geometryType="LINEM",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Jr(t,e)}(e,qt),r=e,o=[{key:"fromJson",value:function(t){if(t){var r=t.parts||[],n=t.points||[],o=r.length,i=[];if(!(o>0))return null;for(var a=0,s=0,u=[];a<o;a++){for(var l=0;l<r[a];l++)u.push(Ur.fromJson(n[s+l]));s+=r[a],u[0].equals(u[r[a]-1])?i.push(new De(u)):i.push(new we(u)),u=[]}return new e(i,{id:t.id,center:t.center,style:t.style,length:t.length,maxM:t.maxM,minM:t.minM,type:t.type,parts:t.parts})}}}],(n=[{key:"toJson",value:function(){var t="{";if(null!=this.id&&void 0!=this.id&&(t+='"id":'+this.id+","),null!=this.center&&void 0!=this.center&&(t+='"center":'+this.center+","),null!=this.style&&void 0!=this.style&&(t+='"style":'+this.style+","),null!=this.length&&void 0!=this.length&&(t+='"length":'+this.length+","),null!=this.maxM&&void 0!=this.maxM&&(t+='"maxM":'+this.maxM+","),null!=this.minM&&void 0!=this.minM&&(t+='"minM":'+this.minM+","),null!=this.type&&void 0!=this.type&&(t+='"type":"'+this.type+'",'),null!=this.parts&&void 0!=this.parts){t+='"parts":['+this.parts[0];for(var e=1;e<this.parts.length;e++)t+=","+this.parts[e];t+="],"}if(null!=this.components&&this.components.length>0){t+='"points":[';for(var r=0,n=this.components.length;r<n;r++)for(var o=0,i=this.components[r].components.length;o<i;o++)t+=this.components[r].components[o].toJson()+",";t=t.replace(/,$/g,""),t+="]"}return t=t.replace(/,$/g,""),t+="}"}},{key:"destroy",value:function(){var t=this;t.id=null,t.center=null,t.style=null,t.length=null,t.maxM=null,t.minM=null,t.type=null,t.parts=null,t.components.length=0,t.components=null,t.componentTypes=null}}])&&Vr(r.prototype,n),o&&Vr(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function Kr(t){"@babel/helpers - typeof";return(Kr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Yr(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Qr(n.key),n)}}function Qr(t){var e=function(t,e){if("object"!=Kr(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Kr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Kr(e)?e:e+""}var Xr=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=0,this.style=null,this.parts=null,this.points=null,this.type=null,this.prjCoordSys=null,e&&Tt.extend(this,e),this.CLASS_NAME="SuperMap.ServerGeometry"}return e=t,n=[{key:"fromJson",value:function(e){if(e)return new t({id:e.id,style:Ir.fromJson(e.style),parts:e.parts,partTopo:e.partTopo,points:e.points,center:e.center,length:e.length,maxM:e.maxM,minM:e.minM,type:e.type})}},{key:"fromGeometry",value:function(e){if(e){var r=0,n=[],o=[],i=null,s=e.components,u=e.CLASS_NAME,l={epsgCode:e.SRID};if(isNaN(e.id)||(r=e.id),"SuperMap.Geometry.LinearRing"!=u&&"SuperMap.Geometry.LineString"!=u&&(e instanceof Zt||e instanceof He)){for(var c=s.length,f=0;f<c;f++){var p=s[f].getVertices(),h=p.length;n.push(h);for(var y=0;y<h;y++)o.push(new he(p[y].x,p[y].y))}i="SuperMap.Geometry.MultiPoint"==u?a.POINT:a.LINE}else if(e instanceof Xe){for(var d=s.length,v=0;v<d;v++)for(var m=s[v].components,b=m.length,g=0;g<b;g++){var S=m[g].getVertices(),w=S.length+1;n.push(w);for(var _=0;_<w-1;_++)o.push(new he(S[_].x,S[_].y));o.push(new he(S[0].x,S[0].y))}i=a.REGION}else if(e instanceof or){for(var O=s.length,E=0;E<O;E++){var P=s[E].getVertices(),x=P.length+1;n.push(x);for(var T=0;T<x-1;T++)o.push(new he(P[T].x,P[T].y));o.push(new he(P[0].x,P[0].y))}i=a.REGION}else{for(var C=e.getVertices(),k=C.length,A=0;A<k;A++)o.push(new he(C[A].x,C[A].y));e instanceof De&&(o.push(new he(C[0].x,C[0].y)),k++),n.push(k),i=e instanceof he?a.POINT:a.LINE}return new t({id:r,style:null,parts:n,points:o,type:i,prjCoordSys:l})}}},{key:"IsClockWise",value:function(t){var e=t.length;if(e<3)return 0;var r=t[0].y*(t[e-1].x-t[1].x);t.push(t[0]);for(var n=1;n<e;n++)r+=t[n].y*(t[n-1].x-t[n+1].x);return.5*r}},{key:"bubbleSort",value:function(t,e,r,n){for(var o=0;o<t.length;o++)for(var i=0;i<t.length;i++)if(t[o]>t[i]){var a=t[i];t[i]=t[o],t[o]=a;var s=e[i];if(e[i]=e[o],e[o]=s,r&&r.length>0){var u=r[i];r[i]=r[o],r[o]=u}if(n&&n.length>0){var l=n[i];n[i]=n[o],n[o]=l}}}}],(r=[{key:"destroy",value:function(){var t=this;t.id=null,t.style=null,t.parts=null,t.partTopo=null,t.points=null,t.type=null,t.prjCoordSys=null}},{key:"toGeometry",value:function(){var t=this;switch(t.type.toUpperCase()){case a.POINT:return t.toGeoPoint();case a.LINE:return t.toGeoLine();case a.LINEM:return t.toGeoLinem();case a.REGION:return t.toGeoRegion();case a.POINTEPS:return t.toGeoPoint();case a.LINEEPS:return t.toGeoLineEPS();case a.REGIONEPS:return t.toGeoRegionEPS();case a.GEOCOMPOUND:return t.transformGeoCompound()}}},{key:"toGeoPoint",value:function(){var t=this.parts||[],e=this.points||[],r=t.length;if(r>0){if(1===r)return new he(e[0].x,e[0].y);for(var n=[],o=0;o<r;o++)n.push(new he(e[o].x,e[o].y));return new Zt(n)}return null}},{key:"toGeoLine",value:function(){var t=this.parts||[],e=this.points||[],r=t.length;if(r>0){if(1===r){for(var n=[],o=0;o<t[0];o++)n.push(new he(e[o].x,e[o].y));return n[0].equals(n[t[0]-1])?new De(n):new we(n)}for(var i=[],a=0;a<r;a++){for(var s=[],u=0;u<t[a];u++)s.push(new he(e[u].x,e[u].y));i.push(new we(s)),e.splice(0,t[a])}return new He(i)}return null}},{key:"toGeoLineEPS",value:function(){var t,e,r,n,o,i=this.parts||[],a=this.points||[],s=i.length;if(s>0){if(1===s){for(t=0,r=[];t<i[0];t++)r.push(new he(a[t].x,a[t].y,a[t].type));return r[0].equals(r[i[0]-1])?(o=we.createLineEPS(r),new De(o)):(o=we.createLineEPS(r),new we(o))}for(t=0,n=[];t<s;t++){for(e=0,r=[];e<i[t];e++)r.push(new he(a[e].x,a[e].y));o=we.createLineEPS(r),n.push(new we(o)),a.splice(0,i[t])}return new He(n)}return null}},{key:"toGeoLinem",value:function(){return Wr.fromJson(this)}},{key:"toGeoRegion",value:function(){var e=this.parts||[],r=this.partTopo||[],n=this.points||[],o=e.length;if(o<=0)return null;var i=[],a=[];if(1==o){for(var s=0;s<n.length;s++)a.push(new he(n[s].x,n[s].y));return i.push(new or([new De(a)])),new Xe(i)}for(var u=[],l=[],c=[],f=[],p=[],h=0,y=0;h<o;h++){for(var d=0;d<e[h];d++)a.push(new he(n[y+d].x,n[y+d].y));y+=e[h];var v=new or([new De(a)]);a=[],c.push(v),0===r.length&&f.push(v.getBounds()),p.push(1),l.push(v.getArea())}if(0===r.length){t.bubbleSort(l,c,r,f);for(var m=[],b=1;b<c.length;b++)for(var g=b-1;g>=0;g--)if(m[b]=-1,f[g].containsBounds(f[b])){p[b]=-1*p[g],p[b]<0&&(m[b]=g);break}for(var S=0;S<c.length;S++)p[S]>0?i.push(c[S]):(i[m[S]].components=i[m[S]].components.concat(c[S].components),i.push(""))}else{i=new Array;for(var w=0;w<c.length;w++)if(r[w]&&-1==r[w]?u=u.concat(c[w].components):(u.length>0&&i.length>0&&(i[i.length-1].components=i[i.length-1].components.concat(u),u=[]),i.push(c[w])),w==o-1){var _=i.length;if(_)i[_-1].components=i[_-1].components.concat(u);else for(var O=0,E=u.length;O<E;O++)i.push(new or(u))}}return new Xe(i)}},{key:"toGeoRegionEPS",value:function(){var e=this.parts||[],r=this.partTopo||[],n=this.points||[],o=e.length;if(o<=0)return null;var i,a=[],s=[];if(1==o){for(var u=0;u<n.length;u++)s.push(new he(n[u].x,n[u].y));return i=we.createLineEPS(s),a.push(new or([new De(i)])),new Xe(a)}for(var l=[],c=[],f=[],p=[],h=[],y=0,d=0;y<o;y++){for(var v=0;v<e[y];v++)s.push(new he(n[d+v].x,n[d+v].y));d+=e[y],i=we.createLineEPS(s);var m=new or([new De(i)]);s=[],f.push(m),0===r.length&&p.push(m.getBounds()),h.push(1),c.push(m.getArea())}if(0===r.length){t.bubbleSort(c,f,r,p);for(var b=[],g=1;g<f.length;g++)for(var S=g-1;S>=0;S--)if(b[g]=-1,p[S].containsBounds(p[g])){h[g]=-1*h[S],h[g]<0&&(b[g]=S);break}for(var w=0;w<f.length;w++)h[w]>0?a.push(f[w]):(a[b[w]].components=a[b[w]].components.concat(f[w].components),a.push(""))}else{a=new Array;for(var _=0;_<f.length;_++)if(r[_]&&-1==r[_]?l=l.concat(f[_].components):(l.length>0&&a.length>0&&(a[a.length-1].components=a[a.length-1].components.concat(l),l=[]),a.push(f[_])),_==o-1){var O=a.length;if(O)a[O-1].components=a[O-1].components.concat(l);else for(var E=0,P=l.length;E<P;E++)a.push(new or(l))}}return new Xe(a)}},{key:"transformGeoCompound",value:function(){var e=this.geoParts||[],r=e.length;if(r<=0)return null;for(var n=[],o=0;o<r;o++){var i=e[o];n.push(new t(i).toGeometry())}return new qt(n)}}])&&Yr(e.prototype,r),n&&Yr(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,r,n}();function Zr(t){"@babel/helpers - typeof";return(Zr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function $r(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,tn(n.key),n)}}function tn(t){var e=function(t,e){if("object"!=Zr(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Zr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Zr(e)?e:e+""}function en(t,e,r){return e=rn(e),function(t,e){if(e&&("object"===Zr(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],rn(t).constructor):e.apply(t,r))}function rn(t){return(rn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function nn(t,e){return(nn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var on=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=en(this,e,[t])).CLASS_NAME="SuperMap.Geometry3D",r.position=null,r.rotationX=null,r.rotationY=null,r.rotationZ=null,r.scaleX=null,r.scaleY=null,r.scaleZ=null,Tt.extend(r,t),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&nn(t,e)}(e,Xr),r=e,(n=[{key:"destroy",value:function(){this.position=null,this.rotationX=null,this.rotationY=null,this.rotationZ=null,this.scaleX=null,this.scaleY=null,this.scaleZ=null}}])&&$r(r.prototype,n),o&&$r(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function an(t){"@babel/helpers - typeof";return(an="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function sn(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,un(n.key),n)}}function un(t){var e=function(t,e){if("object"!=an(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=an(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==an(e)?e:e+""}function ln(t,e,r){return e=fn(e),function(t,e){if(e&&("object"===an(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],fn(t).constructor):e.apply(t,r))}function cn(){return(cn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=fn(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function fn(t){return(fn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function pn(t,e){return(pn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var hn="Unknown",yn="Insert",dn="Update",vn="Delete",mn=function(t){function e(t,r,n){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(o=ln(this,e,[null,null,r])).fid=null,o.geometry=t||null,o.attributes={},r&&(o.attributes=Tt.extend(o.attributes,r)),o.bounds=null,o.state=null,o.style=n||null,o.url=null,o.lonlat=null,o.CLASS_NAME="SuperMap.Feature.Vector",e.style={default:{fillColor:"#ee9900",fillOpacity:.4,hoverFillColor:"white",hoverFillOpacity:.8,strokeColor:"#ee9900",strokeOpacity:1,strokeWidth:1,strokeLinecap:"round",strokeDashstyle:"solid",hoverStrokeColor:"red",hoverStrokeOpacity:1,hoverStrokeWidth:.2,pointRadius:6,hoverPointRadius:1,hoverPointUnit:"%",pointerEvents:"visiblePainted",cursor:"inherit",fontColor:"#000000",labelAlign:"cm",labelOutlineColor:"white",labelOutlineWidth:3},select:{fillColor:"blue",fillOpacity:.4,hoverFillColor:"white",hoverFillOpacity:.8,strokeColor:"blue",strokeOpacity:1,strokeWidth:2,strokeLinecap:"round",strokeDashstyle:"solid",hoverStrokeColor:"red",hoverStrokeOpacity:1,hoverStrokeWidth:.2,pointRadius:6,hoverPointRadius:1,hoverPointUnit:"%",pointerEvents:"visiblePainted",cursor:"pointer",fontColor:"#000000",labelAlign:"cm",labelOutlineColor:"white",labelOutlineWidth:3},temporary:{fillColor:"#66cccc",fillOpacity:.2,hoverFillColor:"white",hoverFillOpacity:.8,strokeColor:"#66cccc",strokeOpacity:1,strokeLinecap:"round",strokeWidth:2,strokeDashstyle:"solid",hoverStrokeColor:"red",hoverStrokeOpacity:1,hoverStrokeWidth:.2,pointRadius:6,hoverPointRadius:1,hoverPointUnit:"%",pointerEvents:"visiblePainted",cursor:"default",fontColor:"#000000",labelAlign:"cm",labelOutlineColor:"white",labelOutlineWidth:3},delete:{display:"none"}},o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&pn(t,e)}(e,Pr),r=e,(n=[{key:"destroy",value:function(){this.layer&&(this.layer.removeFeatures(this),this.layer=null),this.geometry=null,cn(fn(e.prototype),"destroy",this).call(this)}},{key:"clone",value:function(){return new e(this.geometry?this.geometry.clone():null,this.attributes,this.style)}},{key:"toState",value:function(t){if(t===dn)switch(this.state){case hn:case vn:this.state=t}else if(t===yn)switch(this.state){case hn:break;default:this.state=t}else if(t===vn)switch(this.state){case yn:case vn:break;case hn:case dn:this.state=t}else t===hn&&(this.state=t)}}])&&sn(r.prototype,n),o&&sn(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function bn(t){"@babel/helpers - typeof";return(bn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function gn(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Sn(n.key),n)}}function Sn(t){var e=function(t,e){if("object"!=bn(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=bn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==bn(e)?e:e+""}var wn=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.data=null,this.keepData=!1,Tt.extend(this,e),this.options=e,this.CLASS_NAME="SuperMap.Format"},(e=[{key:"destroy",value:function(){}},{key:"read",value:function(t){}},{key:"write",value:function(t){}}])&&gn(t.prototype,e),r&&gn(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function _n(t){"@babel/helpers - typeof";return(_n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function On(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,En(n.key),n)}}function En(t){var e=function(t,e){if("object"!=_n(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=_n(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==_n(e)?e:e+""}function Pn(t,e,r){return e=xn(e),function(t,e){if(e&&("object"===_n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],xn(t).constructor):e.apply(t,r))}function xn(t){return(xn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Tn(t,e){return(Tn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Cn=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=Pn(this,e,[t])).indent="    ",r.space=" ",r.newline="\n",r.level=0,r.pretty=!1,r.nativeJSON=!(!window.JSON||"function"!=typeof JSON.parse||"function"!=typeof JSON.stringify),r.CLASS_NAME="SuperMap.Format.JSON",r.serialize={object:function(t){if(null==t)return"null";if(t.constructor===Date)return this.serialize.date.apply(this,[t]);if(t.constructor===Array)return this.serialize.array.apply(this,[t]);var e,r,n,o=["{"];this.level+=1;var i=!1;for(e in t)t.hasOwnProperty(e)&&(r=this.write.apply(this,[e,this.pretty]),n=this.write.apply(this,[t[e],this.pretty]),null!=r&&null!=n&&(i&&o.push(","),o.push(this.writeNewline(),this.writeIndent(),r,":",this.writeSpace(),n),i=!0));return this.level-=1,o.push(this.writeNewline(),this.writeIndent(),"}"),o.join("")},array:function(t){var e,r=["["];this.level+=1;for(var n=0,o=t.length;n<o;++n)null!=(e=this.write.apply(this,[t[n],this.pretty]))&&(n>0&&r.push(","),r.push(this.writeNewline(),this.writeIndent(),e));return this.level-=1,r.push(this.writeNewline(),this.writeIndent(),"]"),r.join("")},string:function(t){var e={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};return/["\\\x00-\x1f]/.test(t)?'"'+t.replace(/([\x00-\x1f\\"])/g,function(t,r){var n=e[r];return n||(n=r.charCodeAt(),"\\u00"+Math.floor(n/16).toString(16)+(n%16).toString(16))})+'"':'"'+t+'"'},number:function(t){return isFinite(t)?String(t):"null"},boolean:function(t){return String(t)},date:function(t){function e(t){return t<10?"0"+t:t}return'"'+t.getFullYear()+"-"+e(t.getMonth()+1)+"-"+e(t.getDate())+"T"+e(t.getHours())+":"+e(t.getMinutes())+":"+e(t.getSeconds())+'"'}},r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Tn(t,e)}(e,wn),r=e,(n=[{key:"read",value:function(t,e){var r;if(this.nativeJSON)try{r=JSON.parse(t,e)}catch(e){return{data:t}}return this.keepData&&(this.data=r),r}},{key:"write",value:function(t,e){this.pretty=!!e;var r=null,n=_n(t);if(this.serialize[n])try{r=!this.pretty&&this.nativeJSON?JSON.stringify(t):this.serialize[n].apply(this,[t])}catch(t){}return r}},{key:"writeIndent",value:function(){var t=[];if(this.pretty)for(var e=0;e<this.level;++e)t.push(this.indent);return t.join("")}},{key:"writeNewline",value:function(){return this.pretty?this.newline:""}},{key:"writeSpace",value:function(){return this.pretty?this.space:""}}])&&On(r.prototype,n),o&&On(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function kn(t){"@babel/helpers - typeof";return(kn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function An(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,jn(n.key),n)}}function jn(t){var e=function(t,e){if("object"!=kn(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=kn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==kn(e)?e:e+""}function Nn(t,e,r){return e=Mn(e),function(t,e){if(e&&("object"===kn(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Mn(t).constructor):e.apply(t,r))}function In(){return(In="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Mn(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Mn(t){return(Mn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Rn(t,e){return(Rn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Ln=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=Nn(this,e,[t])).ignoreExtraDims=!0,r.CLASS_NAME="SuperMap.Format.GeoJSON",r.parseCoords={point:function(t){if(!1===this.ignoreExtraDims&&2!=t.length)throw"Only 2D points are supported: "+t;return new he(t[0],t[1])},multipoint:function(t){for(var e=[],r=null,n=0,o=t.length;n<o;++n){try{r=this.parseCoords.point.apply(this,[t[n]])}catch(t){throw t}e.push(r)}return new Zt(e)},linestring:function(t){for(var e=[],r=null,n=0,o=t.length;n<o;++n){try{r=this.parseCoords.point.apply(this,[t[n]])}catch(t){throw t}e.push(r)}return new we(e)},multilinestring:function(t){for(var e=[],r=null,n=0,o=t.length;n<o;++n){try{r=this.parseCoords.linestring.apply(this,[t[n]])}catch(t){throw t}e.push(r)}return new He(e)},polygon:function(t){for(var e,r,n=[],o=0,i=t.length;o<i;++o){try{r=this.parseCoords.linestring.apply(this,[t[o]])}catch(t){throw t}e=new De(r.components),n.push(e)}return new or(n)},multipolygon:function(t){for(var e=[],r=null,n=0,o=t.length;n<o;++n){try{r=this.parseCoords.polygon.apply(this,[t[n]])}catch(t){throw t}e.push(r)}return new Xe(e)},box:function(t){if(2!=t.length)throw"GeoJSON box coordinates must have 2 elements";return new or([new De([new he(t[0][0],t[0][1]),new he(t[1][0],t[0][1]),new he(t[1][0],t[1][1]),new he(t[0][0],t[1][1]),new he(t[0][0],t[0][1])])])}},r.extract={feature:function(t){var e=this.extract.geometry.apply(this,[t.geometry]),r={type:"Feature",properties:this.createAttributes(t),geometry:e};return t.geometry&&"TEXT"===t.geometry.type&&(r.properties.texts=t.geometry.texts,r.properties.textStyle=t.geometry.textStyle),t.fid&&(r.id=t.fid),t.ID&&(r.id=t.ID),r},geometry:function(t){if(null==t)return null;!t.parts&&t.points&&(t.parts=[t.points.length]);var e,r=t.hasOwnProperty("geometryType")?t:new Xr(t).toGeometry()||t,n=r.geometryType||r.type;return"LinearRing"===n&&(n="LineString"),"LINEM"===n&&(n="MultiLineString"),e=this.extract[n.toLowerCase()].apply(this,[r]),"Collection"===(n="TEXT"===n?"Point":n)?{type:"GeometryCollection",geometries:e}:{type:n,coordinates:e}},point:function(t){var e=[t.x,t.y];for(var r in t)"x"===r||"y"===r||null===t[r]||isNaN(t[r])||e.push(t[r]);return e},text:function(t){return[t.points[0].x,t.points[0].y]},multipoint:function(t){for(var e=[],r=0,n=t.components.length;r<n;++r)e.push(this.extract.point.apply(this,[t.components[r]]));return e},linestring:function(t){for(var e=[],r=0,n=t.components.length;r<n;++r)e.push(this.extract.point.apply(this,[t.components[r]]));return e},multilinestring:function(t){for(var e=[],r=0,n=t.components.length;r<n;++r)e.push(this.extract.linestring.apply(this,[t.components[r]]));return e},polygon:function(t){for(var e=[],r=0,n=t.components.length;r<n;++r)e.push(this.extract.linestring.apply(this,[t.components[r]]));return e},multipolygon:function(t){for(var e=[],r=0,n=t.components.length;r<n;++r)e.push(this.extract.polygon.apply(this,[t.components[r]]));return e},collection:function(t){for(var e=t.components.length,r=new Array(e),n=0;n<e;++n)r[n]=this.extract.geometry.apply(this,[t.components[n]]);return r}},r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Rn(t,e)}(e,Cn),r=e,(n=[{key:"read",value:function(t,r,n){r=r||"FeatureCollection";var o=null,i=null;if(i="string"==typeof t?In(Mn(e.prototype),"read",this).call(this,t,n):t){if("string"!=typeof i.type);else if(this.isValidType(i,r))switch(r){case"Geometry":try{o=this.parseGeometry(i)}catch(t){}break;case"Feature":try{(o=this.parseFeature(i)).type="Feature"}catch(t){}break;case"FeatureCollection":switch(o=[],i.type){case"Feature":try{o.push(this.parseFeature(i))}catch(t){o=null}break;case"FeatureCollection":for(var a=0,s=i.features.length;a<s;++a)try{o.push(this.parseFeature(i.features[a]))}catch(t){o=null}break;default:try{var u=this.parseGeometry(i);o.push(new mn(u))}catch(t){o=null}}}}else;return o}},{key:"write",value:function(t,r){return In(Mn(e.prototype),"write",this).call(this,this.toGeoJSON(t),r)}},{key:"fromGeoJSON",value:function(t,e,r){var n=this,o=this.read(t,e,r);return Tt.isArray(o)?o.map(function(t){return n._toiSevrerFeature(t)}):this._toiSevrerFeature(o)}},{key:"toGeoJSON",value:function(t){var e={type:null};if(Tt.isArray(t)){e.type="FeatureCollection";var r=t.length;e.features=new Array(r);for(var n=0;n<r;++n){var o=t[n];if(s(o)){var i={};i.geometry=o,e.features[n]=this.extract.feature.apply(this,[i])}else e.features[n]=this.extract.feature.apply(this,[o])}}else if(s(t)){var a={};a.geometry=t,e=this.extract.feature.apply(this,[a])}else e=this.extract.feature.apply(this,[t]);function s(t){return t.hasOwnProperty("parts")&&t.hasOwnProperty("points")||t.hasOwnProperty("geoParts")}return e}},{key:"isValidType",value:function(t,e){var r=!1;switch(e){case"Geometry":-1==Tt.indexOf(["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon","Box","GeometryCollection"],t.type)||(r=!0);break;case"FeatureCollection":r=!0;break;default:t.type==e&&(r=!0)}return r}},{key:"parseFeature",value:function(t){var e,r,n,o;n=t.properties?t.properties:{},o=t.geometry&&t.geometry.bbox||t.bbox;try{r=this.parseGeometry(t.geometry)}catch(t){throw t}return e=new mn(r,n),o&&(e.bounds=Dt.fromArray(o)),t.id&&(e.geometry.id=t.id,e.fid=t.id),e}},{key:"parseGeometry",value:function(t){if(null==t)return null;var e;if("GeometryCollection"==t.type){if(!Tt.isArray(t.geometries))throw"GeometryCollection must have geometries array: "+t;for(var r=t.geometries.length,n=new Array(r),o=0;o<r;++o)n[o]=this.parseGeometry.apply(this,[t.geometries[o]]);e=new qt(n)}else{if(!Tt.isArray(t.coordinates))throw"Geometry must have coordinates array: "+t;if(!this.parseCoords[t.type.toLowerCase()])throw"Unsupported geometry type: "+t.type;try{e=this.parseCoords[t.type.toLowerCase()].apply(this,[t.coordinates])}catch(t){throw t}}return e}},{key:"createCRSObject",value:function(t){var e=t.layer.projection.toString(),r={};if(e.match(/epsg:/i)){var n=parseInt(e.substring(e.indexOf(":")+1));r=4326==n?{type:"name",properties:{name:"urn:ogc:def:crs:OGC:1.3:CRS84"}}:{type:"name",properties:{name:"EPSG:"+n}}}return r}},{key:"_toiSevrerFeature",value:function(t){var e=t.attributes,r=[],n=[];for(var o in e)r.push(o),n.push(e[o]);var i={fieldNames:r,fieldValues:n,geometry:Xr.fromGeometry(t.geometry)};return i.geometry.id=t.fid,i}},{key:"createAttributes",value:function(t){if(!t)return null;var e={};!function(t,e){if(!t.hasOwnProperty("fieldNames")||!t.hasOwnProperty("fieldValues"))return;var r=t.fieldNames,n=t.fieldValues;for(var o in r)e[r[o]]=n[o]}(t,e);var r=["fieldNames","fieldValues","geometry","stringID","ID"];for(var n in t)r.indexOf(n)>-1||(e[n]=t[n]);return e}}])&&An(r.prototype,n),o&&An(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function Dn(t){"@babel/helpers - typeof";return(Dn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Bn(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Fn(n.key),n)}}function Fn(t){var e=function(t,e){if("object"!=Dn(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Dn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Dn(e)?e:e+""}function Un(t,e,r){return e=Gn(e),function(t,e){if(e&&("object"===Dn(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Gn(t).constructor):e.apply(t,r))}function Gn(t){return(Gn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Vn(t,e){return(Vn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var zn=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=Un(this,e,[t])).regExes={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/},r.CLASS_NAME="SuperMap.Format.WKT",r.extract={point:function(t){return t.x+" "+t.y},multipoint:function(t){for(var e=[],r=0,n=t.components.length;r<n;++r)e.push("("+this.extract.point.apply(this,[t.components[r]])+")");return e.join(",")},linestring:function(t){for(var e=[],r=0,n=t.components.length;r<n;++r)e.push(this.extract.point.apply(this,[t.components[r]]));return e.join(",")},multilinestring:function(t){for(var e=[],r=0,n=t.components.length;r<n;++r)e.push("("+this.extract.linestring.apply(this,[t.components[r]])+")");return e.join(",")},polygon:function(t){for(var e=[],r=0,n=t.components.length;r<n;++r)e.push("("+this.extract.linestring.apply(this,[t.components[r]])+")");return e.join(",")},multipolygon:function(t){for(var e=[],r=0,n=t.components.length;r<n;++r)e.push("("+this.extract.polygon.apply(this,[t.components[r]])+")");return e.join(",")},collection:function(t){for(var e=[],r=0,n=t.components.length;r<n;++r)e.push(this.extractGeometry.apply(this,[t.components[r]]));return e.join(",")}},r.parse={point:function(t){var e=at.trim(t).split(this.regExes.spaces);return new mn(new he(e[0],e[1]))},multipoint:function(t){for(var e,r=at.trim(t).split(","),n=[],o=0,i=r.length;o<i;++o)e=r[o].replace(this.regExes.trimParens,"$1"),n.push(this.parse.point.apply(this,[e]).geometry);return new mn(new Zt(n))},linestring:function(t){for(var e=at.trim(t).split(","),r=[],n=0,o=e.length;n<o;++n)r.push(this.parse.point.apply(this,[e[n]]).geometry);return new mn(new we(r))},multilinestring:function(t){for(var e,r=at.trim(t).split(this.regExes.parenComma),n=[],o=0,i=r.length;o<i;++o)e=r[o].replace(this.regExes.trimParens,"$1"),n.push(this.parse.linestring.apply(this,[e]).geometry);return new mn(new He(n))},polygon:function(t){for(var e,r,n,o=at.trim(t).split(this.regExes.parenComma),i=[],a=0,s=o.length;a<s;++a)e=o[a].replace(this.regExes.trimParens,"$1"),r=this.parse.linestring.apply(this,[e]).geometry,n=new De(r.components),i.push(n);return new mn(new or(i))},multipolygon:function(t){for(var e,r=at.trim(t).split(this.regExes.doubleParenComma),n=[],o=0,i=r.length;o<i;++o)e=r[o].replace(this.regExes.trimParens,"$1"),n.push(this.parse.polygon.apply(this,[e]).geometry);return new mn(new Xe(n))},geometrycollection:function(t){t=t.replace(/,\s*([A-Za-z])/g,"|$1");for(var e=at.trim(t).split("|"),r=[],n=0,o=e.length;n<o;++n)r.push(this.read(e[n]));return r}},r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Vn(t,e)}(e,wn),r=e,(n=[{key:"read",value:function(t){var e,r,n;t=t.replace(/[\n\r]/g," ");var o=this.regExes.typeStr.exec(t);return o&&(r=o[1].toLowerCase(),n=o[2],this.parse[r]&&(e=this.parse[r].apply(this,[n]))),e}},{key:"write",value:function(t){var e,r,n;t.constructor===Array?(e=t,n=!0):(e=[t],n=!1);var o=[];n&&o.push("GEOMETRYCOLLECTION(");for(var i=0,a=e.length;i<a;++i)n&&i>0&&o.push(","),r=e[i].geometry,o.push(this.extractGeometry(r));return n&&o.push(")"),o.join("")}},{key:"extractGeometry",value:function(t){var e=t.CLASS_NAME.split(".")[2].toLowerCase();return this.extract[e]?("collection"===e?"GEOMETRYCOLLECTION":e.toUpperCase())+"("+this.extract[e].apply(this,[t])+")":null}}])&&Bn(r.prototype,n),o&&Bn(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function Hn(t){"@babel/helpers - typeof";return(Hn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function qn(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Jn(n.key),n)}}function Jn(t){var e=function(t,e){if("object"!=Hn(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Hn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Hn(e)?e:e+""}var Wn=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var r=this;e=e||{},this.speed=e.speed&&e.speed>=0?e.speed:1,this.frequency=e.speed&&e.frequency>=0?e.frequency:1e3,this.startTime=e.startTime&&null!=e.startTime?e.startTime:0,this.endTime=e.endTime&&null!=e.endTime&&e.endTime>=r.startTime?e.endTime:+new Date,this.repeat=void 0===e.repeat||e.repeat,this.reverse=void 0!==e.reverse&&e.reverse,this.currentTime=null,this.oldTime=null,this.running=!1,this.EVENT_TYPES=["start","pause","stop"],r.events=new wr(this,null,this.EVENT_TYPES),r.speed=Number(r.speed),r.frequency=Number(r.frequency),r.startTime=Number(r.startTime),r.endTime=Number(r.endTime),r.startTime=Date.parse(new Date(r.startTime)),r.endTime=Date.parse(new Date(r.endTime)),r.currentTime=r.startTime,this.CLASS_NAME="SuperMap.TimeControlBase"},(e=[{key:"updateOptions",value:function(t){var e=this;(t=t||{}).speed&&t.speed>=0&&(e.speed=t.speed,e.speed=Number(e.speed)),t.speed&&t.frequency>=0&&(e.frequency=t.frequency,e.frequency=Number(e.frequency)),t.startTime&&null!=t.startTime&&(e.startTime=t.startTime,e.startTime=Date.parse(new Date(e.startTime))),t.endTime&&null!=t.endTime&&t.endTime>=e.startTime&&(e.endTime=t.endTime,e.endTime=Date.parse(new Date(e.endTime))),null!=t.repeat&&(e.repeat=t.repeat),null!=t.reverse&&(e.reverse=t.reverse)}},{key:"start",value:function(){var t=this;t.running||(t.running=!0,t.tick(),t.events.triggerEvent("start",t.currentTime))}},{key:"pause",value:function(){this.running=!1,this.events.triggerEvent("pause",this.currentTime)}},{key:"stop",value:function(){var t=this;t.currentTime=t.startTime,t.running&&(t.running=!1),t.events.triggerEvent("stop",t.currentTime)}},{key:"toggle",value:function(){this.running?this.pause():this.start()}},{key:"setSpeed",value:function(t){return t>=0&&(this.speed=t,!0)}},{key:"getSpeed",value:function(){return this.speed}},{key:"setFrequency",value:function(t){return t>=0&&(this.frequency=t,!0)}},{key:"getFrequency",value:function(){return this.frequency}},{key:"setStartTime",value:function(t){var e=this;return!((t=Date.parse(new Date(t)))>e.endTime)&&(e.startTime=t,e.currentTime<e.startTime&&(e.currentTime=e.startTime,e.tick()),!0)}},{key:"getStartTime",value:function(){return this.startTime}},{key:"setEndTime",value:function(t){var e=this;return e.endTime=Date.parse(new Date(e.endTime)),!(t<e.startTime)&&(e.endTime=t,e.currentTime>=e.endTime&&(e.currentTime=e.startTime,e.tick()),!0)}},{key:"getEndTime",value:function(){return this.endTime}},{key:"setCurrentTime",value:function(t){var e=this;return e.currentTime=Date.parse(new Date(e.currentTime)),t>=e.startTime&&t<=e.endTime&&(e.currentTime=t,e.startTime=e.currentTime,e.tick(),!0)}},{key:"getCurrentTime",value:function(){return this.currentTime}},{key:"setRepeat",value:function(t){this.repeat=t}},{key:"getRepeat",value:function(){return this.repeat}},{key:"setReverse",value:function(t){this.reverse=t}},{key:"getReverse",value:function(){return this.reverse}},{key:"getRunning",value:function(){return this.running}},{key:"destroy",value:function(){var t=this;t.speed=null,t.frequency=null,t.startTime=null,t.endTime=null,t.currentTime=null,t.repeat=null,t.running=!1,t.reverse=null}},{key:"tick",value:function(){}}])&&qn(t.prototype,e),r&&qn(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function Kn(t){"@babel/helpers - typeof";return(Kn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Yn(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Qn(n.key),n)}}function Qn(t){var e=function(t,e){if("object"!=Kn(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Kn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Kn(e)?e:e+""}function Xn(t,e,r){return e=$n(e),function(t,e){if(e&&("object"===Kn(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],$n(t).constructor):e.apply(t,r))}function Zn(){return(Zn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=$n(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function $n(t){return($n=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function to(t,e){return(to=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var eo,ro,no=function(t){function e(t,r){var n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var o=n=Xn(this,e,[r]);return o.callback=t,Function.prototype.bind||(Function.prototype.bind=function(t){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var e=Array.prototype.slice.call(arguments,1),r=this,n=function(){},o=function(){return r.apply(this instanceof n&&t?this:t,e.concat(Array.prototype.slice.call(arguments)))};return n.prototype=this.prototype,o.prototype=new n,o}),o.update=o.update.bind(o),o.oldTime=o.currentTime,o.CLASS_NAME="SuperMap.TimeFlowControl",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&to(t,e)}(e,Wn),r=e,(n=[{key:"updateOptions",value:function(t){t=t||{},Zn($n(e.prototype),"updateOptions",this).call(this,t)}},{key:"start",value:function(){var t=this;t.running||(t.running=!0,t.reverse?t.currentTime===t.startTime&&(t.oldTime=t.endTime,t.currentTime=t.oldTime):t.oldTime===t.endTime&&(t.currentTime=t.startTime,t.oldTime=t.currentTime),t.tick())}},{key:"stop",value:function(){Zn($n(e.prototype),"stop",this).call(this);var t=this;t.oldTime=t.currentTime,t.running&&(t.running=!1),t.intervalId&&window.clearTimeout(t.intervalId)}},{key:"destroy",value:function(){Zn($n(e.prototype),"destroy",this).call(this);this.oldTime=null,this.callback=null}},{key:"tick",value:function(){var t=this;t.intervalId&&window.clearInterval(t.intervalId),t.intervalId=null,t.update(),t.intervalId=window.setInterval(t.update,t.frequency)}},{key:"update",value:function(){var t=this;if(t.running)if(t.callback&&t.callback(t.currentTime),t.reverse){if(t.currentTime===t.startTime){if(!t.repeat)return t.running=!1,null;t.oldTime=t.endTime,t.currentTime=t.oldTime}else t.currentTime=t.oldTime,t.oldTime-=t.speed;t.oldTime<=t.startTime&&(t.oldTime=t.startTime)}else{if(t.currentTime===t.endTime){if(!t.repeat)return t.running=!1,t.stop(),null;t.stop(),t.currentTime=t.startTime,t.oldTime=t.currentTime,t.start()}else t.oldTime=t.currentTime,t.currentTime+=t.speed;t.currentTime>=t.endTime&&(t.currentTime=t.endTime)}}}])&&Yn(r.prototype,n),o&&Yn(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}(),oo=(r(5246),r(1358),r(3678)),io=r.n(oo),ao=window.fetch,so={limitLength:1500,queryKeys:[],queryValues:[],supermap_callbacks:{},addQueryStrings:function(t){for(var e in t){this.queryKeys.push(e),"string"!=typeof t[e]&&(t[e]=Tt.toJSON(t[e]));var r=encodeURIComponent(t[e]);this.queryValues.push(r)}},issue:function(t){for(var e=this,r=e.getUid(),n=t.url,o=[],i=n,a=0,s=e.queryKeys?e.queryKeys.length:0,u=0;u<s;u++)if(i.length+e.queryKeys[u].length+2>=e.limitLength){if(0==a)return!1;o.push(i),i=n,a=0,u--}else if(i.length+e.queryKeys[u].length+2+e.queryValues[u].length>e.limitLength)for(var l=e.queryValues[u];l.length>0;){var c=e.limitLength-i.length-e.queryKeys[u].length-2;i.indexOf("?")>-1?i+="&":i+="?";var f=l.substring(0,c);"%"===f.substring(c-1,c)?(c-=1,f=l.substring(0,c)):"%"===f.substring(c-2,c-1)&&(c-=2,f=l.substring(0,c)),i+=e.queryKeys[u]+"="+f,l=l.substring(c),f.length>0&&(o.push(i),i=n,a=0)}else a++,i.indexOf("?")>-1?i+="&":i+="?",i+=e.queryKeys[u]+"="+e.queryValues[u];return o.push(i),e.send(o,"SuperMapJSONPCallbacks_"+r,t&&t.proxy)},getUid:function(){return 1e3*(new Date).getTime()+Math.floor(1e17*Math.random())},send:function(t,e,r){var n=t.length;if(n>0)return new Promise(function(o){for(var i=(new Date).getTime(),a=0;a<n;a++){var s=t[a];s.indexOf("?")>-1?s+="&":s+="?",s+="sectionCount="+n,s+="&sectionIndex="+a,s+="&jsonpUserID="+i,r&&(s=decodeURIComponent(s),s=r+encodeURIComponent(s)),io()(s,{jsonpCallbackFunction:e,timeout:3e4}).then(function(t){o(t.json())})}})},GET:function(t){return this.queryKeys.length=0,this.queryValues.length=0,this.addQueryStrings(t.params),this.issue(t)},POST:function(t){return this.queryKeys.length=0,this.queryValues.length=0,this.addQueryStrings({requestEntity:t.data}),this.issue(t)},PUT:function(t){return this.queryKeys.length=0,this.queryValues.length=0,this.addQueryStrings({requestEntity:t.data}),this.issue(t)},DELETE:function(t){return this.queryKeys.length=0,this.queryValues.length=0,this.addQueryStrings({requestEntity:t.data}),this.issue(t)}},uo=function(){return void 0!=eo?eo:window.XMLHttpRequest&&"withCredentials"in new window.XMLHttpRequest},lo=function(){return ro||45e3},co={commit:function(t,e,r,n){switch(t=t?t.toUpperCase():t){case"GET":return this.get(e,r,n);case"POST":return this.post(e,r,n);case"PUT":return this.put(e,r,n);case"DELETE":return this.delete(e,r,n);default:return this.get(e,r,n)}},supportDirectRequest:function(t,e){return!!Tt.isInTheSameDomain(t)||(void 0!=e.crossOrigin?e.crossOrigin:uo()||e.proxy)},get:function(t,e,r){r=r||{};if(t=Tt.urlAppend(t,this._getParameterString(e||{})),t=this._processUrl(t,r),!this.supportDirectRequest(t,r)){var n={url:t=t.replace(".json",".jsonp"),data:e};return so.GET(n)}return this.urlIsLong(t)?this._postSimulatie("GET",t.substring(0,t.indexOf("?")),e,r):this._fetch(t,e,r,"GET")},delete:function(t,e,r){r=r||{};if(t=Tt.urlAppend(t,this._getParameterString(e||{})),t=this._processUrl(t,r),!this.supportDirectRequest(t,r)){t=t.replace(".json",".jsonp");var n={url:t+="&_method=DELETE",data:e};return so.DELETE(n)}return this.urlIsLong(t)?this._postSimulatie("DELETE",t.substring(0,t.indexOf("?")),e,r):this._fetch(t,e,r,"DELETE")},post:function(t,e,r){if(r=r||{},t=this._processUrl(t,r),!this.supportDirectRequest(t,r)){t=t.replace(".json",".jsonp");var n={url:Tt.urlAppend(t,"_method=POST"),data:e};return so.POST(n)}return this._fetch(t,e,r,"POST")},put:function(t,e,r){if(r=r||{},t=this._processUrl(t,r),!this.supportDirectRequest(t,r)){t=t.replace(".json",".jsonp");var n={url:t+="&_method=PUT",data:e};return so.PUT(n)}return this._fetch(t,e,r,"PUT")},urlIsLong:function(t){for(var e=0,r=null,n=0,o=t.length;n<o;n++)(r=t.charCodeAt(n))<127?e++:128<=r&&r<=2047?e+=2:2048<=r&&r<=65535&&(e+=3);return!(e<2e3)},_postSimulatie:function(t,e,r,n){return e+=(e.indexOf("?")>-1?"&":"?")+"_method="+t,"string"!=typeof r&&(r=JSON.stringify(r)),this.post(e,r,n)},_processUrl:function(t,e){if(this._isMVTRequest(t))return t;if(-1===t.indexOf(".json")&&!e.withoutFormatSuffix)if(t.indexOf("?")<0)t+=".json";else{var r=t.split("?");2===r.length&&(t=r[0]+".json?"+r[1])}return e&&e.proxy&&("function"==typeof e.proxy?t=e.proxy(t):(t=decodeURIComponent(t),t=e.proxy+encodeURIComponent(t))),t},_fetch:function(t,e,r,n){return(r=r||{}).headers=r.headers||{},r.headers["Content-Type"]||FormData.prototype.isPrototypeOf(e)||(r.headers["Content-Type"]="application/x-www-form-urlencoded;charset=UTF-8"),r.timeout?this._timeout(r.timeout,ao(t,{method:n,headers:r.headers,body:"PUT"===n||"POST"===n?e:void 0,credentials:this._getWithCredentials(r),mode:"cors",timeout:lo()}).then(function(t){return t})):ao(t,{method:n,body:"PUT"===n||"POST"===n?e:void 0,headers:r.headers,credentials:this._getWithCredentials(r),mode:"cors",timeout:lo()}).then(function(t){return t})},_getWithCredentials:function(t){return!0===t.withCredentials?"include":!1===t.withCredentials?"omit":"same-origin"},_fetchJsonp:function(t,e){return e=e||{},io()(t,{method:"GET",timeout:e.timeout}).then(function(t){return t})},_timeout:function(t,e){return new Promise(function(r,n){setTimeout(function(){n(new Error("timeout"))},t),e.then(r,n)})},_getParameterString:function(t){var e=[];for(var r in t){var n,o=t[r];if(null!=o&&"function"!=typeof o)n=Array.isArray(o)||"[object Object]"===o.toString()?encodeURIComponent(JSON.stringify(o)):encodeURIComponent(o),e.push(encodeURIComponent(r)+"="+n)}return e.join("&")},_isMVTRequest:function(t){return t.indexOf(".mvt")>-1||t.indexOf(".pbf")>-1}};function fo(t){"@babel/helpers - typeof";return(fo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function po(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ho(n.key),n)}}function ho(t){var e=function(t,e){if("object"!=fo(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=fo(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==fo(e)?e:e+""}var yo=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return e=t,n=[{key:"generateToken",value:function(t,e){var r=this.servers[t];if(r)return co.post(r.tokenServiceUrl,JSON.stringify(e.toJSON())).then(function(t){return t.text()})}},{key:"registerServers",value:function(t){this.servers=this.servers||{},Tt.isArray(t)||(t=[t]);for(var e=0;e<t.length;e++){var r=t[e];this.servers[r.server]=r}}},{key:"registerToken",value:function(t,e){if(this.tokens=this.tokens||{},t&&e){var r=this._getTokenStorageKey(t);this.tokens[r]=e}}},{key:"registerKey",value:function(t,e){if(this.keys=this.keys||{},t&&!(t.length<1)&&e){t=Tt.isArray(t)?t:[t];for(var r=0;r<t.length;r++){var n=this._getUrlRestString(t[0])||t[0];this.keys[n]=e}}}},{key:"getServerInfo",value:function(t){return this.servers=this.servers||{},this.servers[t]}},{key:"getToken",value:function(t){if(t){this.tokens=this.tokens||{};var e=this._getTokenStorageKey(t);return this.tokens[e]}}},{key:"getKey",value:function(t){this.keys=this.keys||{};var e=this._getUrlRestString(t)||t;return this.keys[e]}},{key:"loginiServer",value:function(t,e,r,n){t=Tt.urlPathAppend(t,"services/security/login");var o={username:e&&e.toString(),password:r&&r.toString(),rememberme:n};o=JSON.stringify(o);return co.post(t,o,{headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}}).then(function(t){return t.json()})}},{key:"logoutiServer",value:function(t){t=Tt.urlPathAppend(t,"services/security/logout");return co.get(t,"",{headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},withoutFormatSuffix:!0}).then(function(){return!0}).catch(function(){return!1})}},{key:"loginOnline",value:function(e,r){var n=t.SSO+"/login?service="+e;this._open(n,r)}},{key:"loginiPortal",value:function(t,e,r){t=Tt.urlPathAppend(t,"web/login");var n={username:e&&e.toString(),password:r&&r.toString()};n=JSON.stringify(n);return co.post(t,n,{headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},withCredentials:!1}).then(function(t){return t.json()})}},{key:"logoutiPortal",value:function(t){t=Tt.urlPathAppend(t,"services/security/logout");return co.get(t,"",{headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},withCredentials:!0,withoutFormatSuffix:!0}).then(function(){return!0}).catch(function(){return!1})}},{key:"loginManager",value:function(t,e){var r=Tt.urlPathAppend(t,"/security/tokens"),n=e||{},o={username:n.userName&&n.userName.toString(),password:n.password&&n.password.toString()};o=JSON.stringify(o);var i=this;return co.post(r,o,{headers:{Accept:"*/*","Content-Type":"application/json; charset=UTF-8"}}).then(function(t){return t.text()}).then(function(t){return i.imanagerToken=t,t})}},{key:"destroyAllCredentials",value:function(){this.keys=null,this.tokens=null,this.servers=null}},{key:"destroyToken",value:function(t){if(t){var e=this._getTokenStorageKey(t);this.tokens=this.tokens||{},this.tokens[e]&&delete this.tokens[e]}}},{key:"destroyKey",value:function(t){if(t){this.keys=this.keys||{};var e=this._getUrlRestString(t)||t;this.keys[e]&&delete this.keys[e]}}},{key:"appendCredential",value:function(t){var e=t,r=this.getToken(t),n=r?new dr(r,"token"):null;return n||(n=(r=this.getKey(t))?new dr(r,"key"):null),n&&(e=Tt.urlAppend(e,n.getUrlParameters())),e}},{key:"_open",value:function(t,e){e=null==e||e;var r=window.screen.availWidth/2-this.INNER_WINDOW_WIDTH/2,n=window.screen.availHeight/2-this.INNER_WINDOW_HEIGHT/2,o="height="+this.INNER_WINDOW_HEIGHT+", width="+this.INNER_WINDOW_WIDTH+",top="+n+", left="+r+",toolbar=no, menubar=no, scrollbars=no, resizable=no, location=no, status=no";e?window.open(t,"login"):window.open(t,"login",o)}},{key:"_getTokenStorageKey",value:function(t){var e=t.match(/(.*?):\/\/([^\/]+)/i);return e?e[0]:t}},{key:"_getUrlRestString",value:function(t){if(!t)return t;var e=t.match(/(http|https):\/\/(.*\/rest)/i);return e?e[0]:t}}],(r=null)&&po(e.prototype,r),n&&po(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,r,n}();function vo(t){"@babel/helpers - typeof";return(vo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function mo(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,bo(n.key),n)}}function bo(t){var e=function(t,e){if("object"!=vo(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=vo(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==vo(e)?e:e+""}yo.INNER_WINDOW_WIDTH=600,yo.INNER_WINDOW_HEIGHT=600,yo.SSO="https://sso.supermap.com",yo.ONLINE="https://www.supermapol.com";var go=function(){return t=function t(e,r){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e){var n=e.substr(e.length-1,1);this.serviceUrl="/"===n?e.substr(0,e.length-2):e}this.options=r||{},this.CLASS_NAME="SuperMap.iManagerServiceBase"},(e=[{key:"request",value:function(t,e,r,n){(n=n||{headers:{Accept:"*/*","Content-Type":"application/json"}}).crossOrigin=this.options.crossOrigin,n.headers=this.options.headers;var o=yo.imanagerToken;return o&&(n.headers||(n.headers={}),n.headers["X-Auth-Token"]=o),r&&(r=JSON.stringify(r)),co.commit(t,e,r,n).then(function(t){return t.json()})}}])&&mo(t.prototype,e),r&&mo(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function So(t){"@babel/helpers - typeof";return(So="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function wo(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,_o(n.key),n)}}function _o(t){var e=function(t,e){if("object"!=So(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=So(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==So(e)?e:e+""}var Oo=function(t,e,r){return e&&wo(t.prototype,e),r&&wo(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},this.nodeSpec="SMALL",this.nodeCount=1,this.nodeName="",this.password="",this.description="",this.physicalMachineName="",this.ips=[],this.userName="",Tt.extend(this,e)});function Eo(t){"@babel/helpers - typeof";return(Eo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Po(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,xo(n.key),n)}}function xo(t){var e=function(t,e){if("object"!=Eo(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Eo(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Eo(e)?e:e+""}function To(t,e,r){return e=Co(e),function(t,e){if(e&&("object"===Eo(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Co(t).constructor):e.apply(t,r))}function Co(t){return(Co=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ko(t,e){return(ko=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Ao=function(t){function e(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),To(this,e,[t])}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ko(t,e)}(e,go),r=e,(n=[{key:"load",value:function(){return this.request("GET",this.serviceUrl+"/web/api/service.json")}},{key:"createIServer",value:function(t){return this.request("POST",this.serviceUrl+"/cloud/web/nodes/server.json",new Oo(t))}},{key:"createIPortal",value:function(t){return this.request("POST",this.serviceUrl+"/icloud/web/nodes/portal.json",new Oo(t))}},{key:"iServerList",value:function(){return this.request("GET",this.serviceUrl+"/cloud/web/nodes/server.json")}},{key:"iPortalList",value:function(){return this.request("GET",this.serviceUrl+"/icloud/web/nodes/portal.json")}},{key:"startNodes",value:function(t){return this.request("POST",this.serviceUrl+"/cloud/web/nodes/started.json",t)}},{key:"stopNodes",value:function(t){return this.request("POST",this.serviceUrl+"/cloud/web/nodes/stopped.json",t)}}])&&Po(r.prototype,n),o&&Po(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function jo(t){"@babel/helpers - typeof";return(jo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function No(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Io(n.key),n)}}function Io(t){var e=function(t,e){if("object"!=jo(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=jo(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==jo(e)?e:e+""}var Mo=function(){return t=function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),r=r||{},this.serviceUrl=e,this.CLASS_NAME="SuperMap.iPortalServiceBase",this.withCredentials=r.withCredentials||!1,this.crossOrigin=r.crossOrigin,this.headers=r.headers},(e=[{key:"request",value:function(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{headers:this.headers,crossOrigin:this.crossOrigin,withCredentials:this.withCredentials};return e=yo.appendCredential(e),co.commit(t,e,r,n).then(function(t){return t.json()})}}])&&No(t.prototype,e),r&&No(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function Ro(t){"@babel/helpers - typeof";return(Ro="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Lo(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Do(n.key),n)}}function Do(t){var e=function(t,e){if("object"!=Ro(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Ro(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Ro(e)?e:e+""}var Bo=function(t,e,r){return e&&Lo(t.prototype,e),r&&Lo(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},this.resourceType="",this.pageSize=12,this.currentPage=1,this.orderBy="UPDATETIME",this.orderType="DESC",this.searchType="PUBLIC",this.tags=[],this.dirIds=[],this.resourceSubTypes=[],this.aggregationTypes=[],this.text="",this.groupIds=[],this.departmentIds=[],Tt.extend(this,e)});function Fo(t){"@babel/helpers - typeof";return(Fo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Uo(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Go(n.key),n)}}function Go(t){var e=function(t,e){if("object"!=Fo(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Fo(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Fo(e)?e:e+""}var Vo=function(t,e,r){return e&&Uo(t.prototype,e),r&&Uo(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},this.content=[],this.total=0,this.currentPage=1,this.pageSize=12,this.aggregations=null,Tt.extend(this,e)});function zo(t){"@babel/helpers - typeof";return(zo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ho(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,qo(n.key),n)}}function qo(t){var e=function(t,e){if("object"!=zo(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=zo(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==zo(e)?e:e+""}function Jo(t,e,r){return e=Wo(e),function(t,e){if(e&&("object"===zo(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Wo(t).constructor):e.apply(t,r))}function Wo(t){return(Wo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ko(t,e){return(Ko=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Yo=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=Jo(this,e,[t]),r=r||{},n.authorizeSetting=[],n.bounds="",n.bounds4326="",n.checkStatus="",n.createTime=0,n.description=null,n.dirId=null,n.epsgCode=0,n.heatLevel=0,n.id=0,n.name="",n.personalDirId=null,n.resourceId=0,n.resourceSubType=null,n.resourceType=null,n.serviceRootUrlId=null,n.tags=null,n.thumbnail=null,n.updateTime=0,n.userName="",n.sourceJSON={},Tt.extend(n,r),n.resourceUrl=t+"/web/"+n.resourceType.replace("_","").toLowerCase()+"s/"+n.resourceId,n.withCredentials&&(n.resourceUrl=t+"/web/mycontent/"+n.resourceType.replace("_","").toLowerCase()+"s/"+n.resourceId),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ko(t,e)}(e,Mo),r=e,(n=[{key:"load",value:function(){var t=this;return t.request("GET",t.resourceUrl+".json").then(function(e){if(e.error)return e;t.sourceJSON=e})}},{key:"update",value:function(){var t=this.resourceType.replace("_","").toLowerCase();"data"===t&&(this.resourceUrl=this.resourceUrl+"/attributes.json");var e=JSON.stringify(this.sourceJSON);if("service"===t){var r={authorizeSetting:this.sourceJSON.authorizeSetting,metadata:this.sourceJSON.metadata,tags:this.sourceJSON.tags,thumbnail:this.sourceJSON.thumbnail,tokenRefreshUrl:this.sourceJSON.tokenRefreshUrl};e=JSON.stringify(r)}return this.request("PUT",this.resourceUrl,e,{headers:{"Content-Type":"application/x-www-form-urlencoded"}})}}])&&Ho(r.prototype,n),o&&Ho(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function Qo(t){"@babel/helpers - typeof";return(Qo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Xo(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Zo(n.key),n)}}function Zo(t){var e=function(t,e){if("object"!=Qo(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Qo(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Qo(e)?e:e+""}var $o=function(t,e,r){return e&&Xo(t.prototype,e),r&&Xo(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},this.ids=[],this.entities=[],this.resourceType="",Tt.extend(this,e)});function ti(t){"@babel/helpers - typeof";return(ti="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ei(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ri(n.key),n)}}function ri(t){var e=function(t,e){if("object"!=ti(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=ti(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ti(e)?e:e+""}function ni(t,e,r){return e=oi(e),function(t,e){if(e&&("object"===ti(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],oi(t).constructor):e.apply(t,r))}function oi(t){return(oi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ii(t,e){return(ii=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var ai=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=ni(this,e,[t,r])).iportalUrl=t,r=r||{},n.withCredentials=r.withCredentials||!1,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ii(t,e)}(e,Mo),r=e,(n=[{key:"load",value:function(){return co.get(this.iportalUrl+"/web")}},{key:"queryResources",value:function(t){if(!(t instanceof Bo))return new Promise(function(t){t("queryParams is not instanceof iPortalQueryParam !")});var e=this,r=this.iportalUrl+"/gateway/catalog/resource/search.json";return t.t=(new Date).getTime(),this.request("GET",r,t).then(function(t){var r=[];(t.content||[]).forEach(function(t){r.push(new Yo(e.iportalUrl,t))});var n=new Vo;return n.content=r,n.total=t.total,n.currentPage=t.currentPage,n.pageSize=t.pageSize,n.aggregations=t.aggregations,n})}},{key:"updateResourcesShareSetting",value:function(t){if(!(t instanceof $o))return new Promise(function(t){t("shareParams is not instanceof iPortalShareParam !")});var e=t.resourceType.replace("_","").toLowerCase()+"s";"datas"===e&&(e="mycontent/"+e);var r={ids:t.ids,entities:t.entities},n=this.iportalUrl+"/web/"+e+"/sharesetting.json";return this.request("PUT",n,JSON.stringify(r)).then(function(t){return t})}}])&&ei(r.prototype,n),o&&ei(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function si(t){"@babel/helpers - typeof";return(si="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ui(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,li(n.key),n)}}function li(t){var e=function(t,e){if("object"!=si(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=si(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==si(e)?e:e+""}var ci=function(t,e,r){return e&&ui(t.prototype,e),r&&ui(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},this.permissionType="",this.entityType="",this.entityName="GUEST",this.entityId=null,Tt.extend(this,e)});function fi(t){"@babel/helpers - typeof";return(fi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function pi(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,hi(n.key),n)}}function hi(t){var e=function(t,e){if("object"!=fi(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=fi(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==fi(e)?e:e+""}var yi=function(t,e,r){return e&&pi(t.prototype,e),r&&pi(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},this.rootUrl="",this.tags=[],this.entities=[],Tt.extend(this,e)});function di(t){"@babel/helpers - typeof";return(di="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function vi(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,mi(n.key),n)}}function mi(t){var e=function(t,e){if("object"!=di(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=di(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==di(e)?e:e+""}var bi=function(t,e,r){return e&&vi(t.prototype,e),r&&vi(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},this.type="",this.tags=[],this.entities=[],this.metadata={},this.addedMapNames=[],this.addedSceneNames=[],Tt.extend(this,e)});function gi(t){"@babel/helpers - typeof";return(gi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Si(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,wi(n.key),n)}}function wi(t){var e=function(t,e){if("object"!=gi(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=gi(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==gi(e)?e:e+""}var _i=function(t,e,r){return e&&Si(t.prototype,e),r&&Si(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},this.fileName="",this.type="",this.tags=[],this.dataMetaInfo={},Tt.extend(this,e)});function Oi(t){"@babel/helpers - typeof";return(Oi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ei(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Pi(n.key),n)}}function Pi(t){var e=function(t,e){if("object"!=Oi(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Oi(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Oi(e)?e:e+""}var xi=function(t,e,r){return e&&Ei(t.prototype,e),r&&Ei(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},this.xField="",this.yField="",this.fileEncoding="UTF-8",this.xIndex=1,this.yIndex=1,this.fieldTypes=[],this.separator="",this.firstRowIsHead=!0,this.url="",this.dataStoreInfo={},Tt.extend(this,e)});function Ti(t){"@babel/helpers - typeof";return(Ti="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ci(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ki(n.key),n)}}function ki(t){var e=function(t,e){if("object"!=Ti(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Ti(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Ti(e)?e:e+""}var Ai=function(t,e,r){return e&&Ci(t.prototype,e),r&&Ci(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},this.type="",this.url="",this.connectionInfo={},Tt.extend(this,e)});function ji(t){"@babel/helpers - typeof";return(ji="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ni(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ii(n.key),n)}}function Ii(t){var e=function(t,e){if("object"!=ji(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=ji(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ji(e)?e:e+""}var Mi=function(t,e,r){return e&&Ni(t.prototype,e),r&&Ni(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},this.dataBase="",this.server="",Tt.extend(this,e)});function Ri(t){"@babel/helpers - typeof";return(Ri="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Li(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Di(n.key),n)}}function Di(t){var e=function(t,e){if("object"!=Ri(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Ri(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Ri(e)?e:e+""}function Bi(t,e,r){return e=Fi(e),function(t,e){if(e&&("object"===Ri(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Fi(t).constructor):e.apply(t,r))}function Fi(t){return(Fi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ui(t,e){return(Ui=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Gi=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=Bi(this,e,[t])).iportalUrl=t,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ui(t,e)}(e,Mo),r=e,(n=[{key:"deleteResources",value:function(t){var e=t.resourceType.replace("_","").toLowerCase(),r=this.iportalUrl+"/web/"+e+"s.json?ids="+encodeURI(JSON.stringify(t.ids));return"data"===e?(r=this.iportalUrl+"/web/mycontent/datas/delete.json",this.request("POST",r,JSON.stringify(t.ids))):this.request("DELETE",r)}},{key:"addMap",value:function(t){if(!(t instanceof yi))return this.getErrMsgPromise("addMapParams is not instanceof IPortalAddResourceParam !");var e={rootUrl:t.rootUrl,tags:t.tags,authorizeSetting:t.entities},r=this.iportalUrl+"/web/maps/batchaddmaps.json";return this.request("POST",r,JSON.stringify(e)).then(function(t){return t})}},{key:"addScene",value:function(t){if(!(t instanceof yi))return this.getErrMsgPromise("addSceneParams is not instanceof IPortalAddResourceParam !");var e={rootUrl:t.rootUrl,tags:t.tags,authorizeSetting:t.entities},r=this.iportalUrl+"/web/scenes/batchaddscenes.json";return this.request("POST",r,JSON.stringify(e)).then(function(t){return t})}},{key:"registerService",value:function(t){if(!(t instanceof bi))return this.getErrMsgPromise("registerParams is not instanceof IPortalRegisterServiceParam !");var e={type:t.type,tags:t.tags,authorizeSetting:t.entities,metadata:t.metadata,addedMapNames:t.addedMapNames,addedSceneNames:t.addedSceneNames},r=this.iportalUrl+"/web/services.json";return this.request("POST",r,JSON.stringify(e)).then(function(t){return t})}},{key:"getErrMsgPromise",value:function(t){return new Promise(function(e){e(t)})}},{key:"uploadDataRequest",value:function(t,e){var r=this.iportalUrl+"/web/mycontent/datas/"+t+"/upload.json";return this.request("POST",r,e)}},{key:"addData",value:function(t,e){var r=this;if(!(t instanceof _i))return this.getErrMsgPromise("params is not instanceof iPortalAddDataParam !");var n,o=this.iportalUrl+"/web/mycontent/datas.json",i={fileName:t.fileName,tags:t.tags,type:t.type},a=t.type.toLowerCase();if("excel"===a||"csv"===a){if(!(t.dataMetaInfo instanceof xi))return this.getErrMsgPromise("params.dataMetaInfo is not instanceof iPortalDataMetaInfoParam !");n={xField:t.dataMetaInfo.xField,yField:t.dataMetaInfo.yField},"csv"===a&&(n.fileEncoding=t.dataMetaInfo.fileEncoding),i.coordType="WGS84",i.dataMetaInfo=n}else if("hdfs"===a||"hbase"===a){if(!(t.dataMetaInfo instanceof xi))return this.getErrMsgPromise("params.dataMetaInfo is not instanceof iPortalDataMetaInfoParam !");if(!(t.dataMetaInfo.dataStoreInfo instanceof Ai))return this.getErrMsgPromise("params.dataMetaInfo.dataStoreInfo is not instanceof iPortalDataStoreInfoParam !");var s={type:t.dataMetaInfo.dataStoreInfo.type};switch(a){case"hdfs":s.url=t.dataMetaInfo.dataStoreInfo.url,n={url:t.dataMetaInfo.url,dataStoreInfo:s};break;case"hbase":if(!(t.dataMetaInfo.dataStoreInfo.connectionInfo instanceof Mi))return this.getErrMsgPromise("params.dataMetaInfo.dataStoreInfo.connectionInfo is not instanceof iPortalDataConnectionInfoParam !");s.connectionInfo={dataBase:t.dataMetaInfo.dataStoreInfo.connectionInfo.dataBase,server:t.dataMetaInfo.dataStoreInfo.connectionInfo.server,engineType:"HBASE"},s.datastoreType="SPATIAL",n={dataStoreInfo:s}}i.dataMetaInfo=n}return this.request("POST",o,JSON.stringify(i)).then(function(t){return"hdfs"===a||"hbase"===a?t:t.childID?r.uploadDataRequest(t.childID,e):t.customResult})}},{key:"publishOrUnpublish",value:function(t,e){if(!t.dataId||!t.serviceType)return this.getErrMsgPromise("option.dataID and option.serviceType are Required!");var r=t.dataId,n=t.dataServiceId,o=t.serviceType,i=this.iportalUrl+"/web/mycontent/datas/"+r+"/publishstatus.json?serviceType="+o;return n&&(i+="&dataServiceId="+n),this.request("PUT",i,JSON.stringify(e)).then(function(t){return e?(n||(n=t.customResult),n):t})}},{key:"getDataPublishedStatus",value:function(t,e){var r=this.iportalUrl+"/web/mycontent/datas/"+t+"/publishstatus.json?dataServiceId="+e+"&forPublish=true";return this.request("GET",r)}},{key:"unPublishDataService",value:function(t){return this.publishOrUnpublish(t,!1)}},{key:"publishDataService",value:function(t){return this.publishOrUnpublish(t,!0)}}])&&Li(r.prototype,n),o&&Li(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function Vi(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function zi(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Vi(Object(r),!0).forEach(function(e){Hi(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Vi(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function Hi(t,e,r){return(e=Wi(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function qi(t){"@babel/helpers - typeof";return(qi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ji(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Wi(n.key),n)}}function Wi(t){var e=function(t,e){if("object"!=qi(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=qi(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==qi(e)?e:e+""}var Ki=function(){return t=function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var n=this;this.EVENT_TYPES=["processCompleted","processFailed"],this.events=null,this.eventListeners=null,this.url=null,this.urls=null,this.proxy=null,this.index=null,this.length=null,this.totalTimes=null,this.POLLING_TIMES=3,this.isInTheSameDomain=null,this.withCredentials=!1,Tt.isArray(e)?(n.urls=e,n.length=e.length,n.totalTimes=n.length,1===n.length?n.url=e[0]:(n.index=parseInt(Math.random()*n.length),n.url=e[n.index])):(n.totalTimes=1,n.url=e),Tt.isArray(e)&&!n.isServiceSupportPolling()&&(n.url=e[0],n.totalTimes=1),r=r||{},this.crossOrigin=r.crossOrigin,this.headers=r.headers,Tt.extend(this,r),n.isInTheSameDomain=Tt.isInTheSameDomain(n.url),n.events=new wr(n,null,n.EVENT_TYPES,!0),n.eventListeners instanceof Object&&n.events.on(n.eventListeners),this.CLASS_NAME="SuperMap.CommonServiceBase"},(e=[{key:"destroy",value:function(){var t=this;Tt.isArray(t.urls)&&(t.urls=null,t.index=null,t.length=null,t.totalTimes=null),t.url=null,t.isInTheSameDomain=null,t.EVENT_TYPES=null,t.events&&(t.events.destroy(),t.events=null),t.eventListeners&&(t.eventListeners=null)}},{key:"request",value:function(t){var e=t.scope.format;if("string"==typeof t.success&&(t.scope.format=t.success,e=t.success,t.success=null,t.failure=null),e&&!this.supportDataFormat(e))throw new Error("".concat(this.CLASS_NAME," is not surport ").concat(e," format!"));var r=this;return t.url=t.url||r.url,this._returnContent(t)&&!t.url.includes("returnContent=true")&&(t.url=Tt.urlAppend(t.url,"returnContent=true")),t.proxy=t.proxy||r.proxy,t.withCredentials=void 0!=t.withCredentials?t.withCredentials:r.withCredentials,t.crossOrigin=void 0!=t.crossOrigin?t.crossOrigin:r.crossOrigin,t.headers=t.headers||r.headers,t.isInTheSameDomain=r.isInTheSameDomain,t.withoutFormatSuffix=t.scope.withoutFormatSuffix||!1,t.url=yo.appendCredential(t.url),r.calculatePollingTimes(),t.scope=r,r.totalTimes>0?(r.totalTimes--,r.ajaxPolling(t)):r._commit(t)}},{key:"ajaxPolling",value:function(t){var e=this,r=t.url,n=/^http:\/\/([a-z]{9}|(\d+\.){3}\d+):\d{0,4}/;return e.index=parseInt(Math.random()*e.length),e.url=e.urls[e.index],r=r.replace(n,n.exec(e.url)[0]),t.url=r,t.isInTheSameDomain=Tt.isInTheSameDomain(r),e._commit(t)}},{key:"calculatePollingTimes",value:function(){var t=this;t.times?t.totalTimes>t.POLLING_TIMES?t.times>t.POLLING_TIMES?t.totalTimes=t.POLLING_TIMES:t.totalTimes=t.times:t.times<t.totalTimes&&(t.totalTimes=t.times):t.totalTimes>t.POLLING_TIMES&&(t.totalTimes=t.POLLING_TIMES),t.totalTimes--}},{key:"isServiceSupportPolling",value:function(){return!("SuperMap.REST.ThemeService"===this.CLASS_NAME||"SuperMap.REST.EditFeaturesService"===this.CLASS_NAME)}},{key:"transformResult",value:function(t,e){return{result:t=Tt.transformResult(t),options:e}}},{key:"transformErrorResult",value:function(t,e){return{error:(t=Tt.transformResult(t)).error||t,options:e}}},{key:"serviceProcessCompleted",value:function(t,e){t=this.transformResult(t).result,this.events.triggerEvent("processCompleted",{result:t,options:e})}},{key:"serviceProcessFailed",value:function(t,e){var r=(t=this.transformErrorResult(t).error).error||t;this.events.triggerEvent("processFailed",{error:r,options:e})}},{key:"_returnContent",value:function(t){return t.scope.format!==o.FGB&&!!t.scope.returnContent}},{key:"supportDataFormat",value:function(t){return this.dataFormat().includes(t)}},{key:"dataFormat",value:function(){return[o.GEOJSON,o.ISERVER]}},{key:"_commit",value:function(t){var e=this;if("POST"===t.method||"PUT"===t.method||"PATCH"===t.method)if(t.params&&(t.url=Tt.urlAppend(t.url,Tt.getParameterString(t.params||{}))),"object"!==qi(t.data)||t.data instanceof FormData)t.params=t.data;else try{t.params=Tt.toJSON(t.data)}catch(t){console.log("不是json对象")}return co.commit(t.method,t.url,t.params,{headers:t.headers,withoutFormatSuffix:t.withoutFormatSuffix,withCredentials:t.withCredentials,crossOrigin:t.crossOrigin,timeout:t.async?0:null,proxy:t.proxy}).then(function(t){return t.text?t.text():t.json?t.json():t}).then(function(e){var r=e;return"string"==typeof e&&(r=(new Cn).read(e)),(!r||r.error||r.code>=300&&304!==r.code)&&(r=r&&r.error?{error:r.error}:{error:r}),r&&t.scope.format===o.FGB&&(r.newResourceLocation=r.newResourceLocation.replace(".json","")+".fgb"),r}).catch(function(t){return{error:t}}).then(function(r){var n={object:e};if(r.error){var o="processFailed";if(e.events&&e.events.listeners[o]&&e.events.listeners[o].length){var i=t.failure&&(t.scope?ut.bind(t.failure,t.scope):t.failure);i?i(r,t):e.serviceProcessFailed(r,t)}else(n=zi(zi({},n),e.transformErrorResult(r,t))).type=o,t.failure&&t.failure(n)}else{var a="processCompleted";if(e.events&&e.events.listeners[a]&&e.events.listeners[a].length){var s=t.success&&(t.scope?ut.bind(t.success,t.scope):t.success);s?s(r,t):e.serviceProcessCompleted(r,t)}else r.succeed=void 0==r.succeed||r.succeed,(n=zi(zi({},n),e.transformResult(r,t))).type=a,t.success&&t.success(n)}return n})}}])&&Ji(t.prototype,e),r&&Ji(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function Yi(t){"@babel/helpers - typeof";return(Yi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Qi(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Xi(n.key),n)}}function Xi(t){var e=function(t,e){if("object"!=Yi(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Yi(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Yi(e)?e:e+""}var Zi=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e.filters&&"string"==typeof e.filters&&(e.filters=e.filters.split(",")),this.address=null,this.fromIndex=null,this.toIndex=null,this.filters=null,this.prjCoordSys=null,this.maxReturn=null,Tt.extend(this,e)},(e=[{key:"destroy",value:function(){this.address=null,this.fromIndex=null,this.toIndex=null,this.filters=null,this.prjCoordSys=null,this.maxReturn=null}}])&&Qi(t.prototype,e),r&&Qi(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function $i(t){"@babel/helpers - typeof";return($i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ta(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ea(n.key),n)}}function ea(t){var e=function(t,e){if("object"!=$i(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=$i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==$i(e)?e:e+""}var ra=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e.filters&&(e.filters=e.filters.split(",")),this.x=null,this.y=null,this.fromIndex=null,this.toIndex=null,this.filters=null,this.prjCoordSys=null,this.maxReturn=null,this.geoDecodingRadius=null,Tt.extend(this,e)},(e=[{key:"destroy",value:function(){this.x=null,this.y=null,this.fromIndex=null,this.toIndex=null,this.filters=null,this.prjCoordSys=null,this.maxReturn=null,this.geoDecodingRadius=null}}])&&ta(t.prototype,e),r&&ta(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function na(t){"@babel/helpers - typeof";return(na="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function oa(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ia(n.key),n)}}function ia(t){var e=function(t,e){if("object"!=na(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=na(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==na(e)?e:e+""}function aa(t,e,r){return e=ua(e),function(t,e){if(e&&("object"===na(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],ua(t).constructor):e.apply(t,r))}function sa(){return(sa="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ua(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function ua(t){return(ua=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function la(t,e){return(la=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var ca=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=aa(this,e,[t,r])).options=r||{},n.CLASS_NAME="SuperMap.AddressMatchService",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&la(t,e)}(e,Ki),r=e,(n=[{key:"destroy",value:function(){sa(ua(e.prototype),"destroy",this).call(this)}},{key:"code",value:function(t,e,r){if(e instanceof Zi)return this.processAsync(t,e,r)}},{key:"decode",value:function(t,e,r){if(e instanceof ra)return this.processAsync(t,e,r)}},{key:"processAsync",value:function(t,e,r){return this.request({method:"GET",url:t,params:e,scope:this,success:r,failure:r})}},{key:"transformResult",value:function(t,e){return t.succeed&&delete t.succeed,{result:t,options:e}}}])&&oa(r.prototype,n),o&&oa(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function fa(t){"@babel/helpers - typeof";return(fa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function pa(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ha(n.key),n)}}function ha(t){var e=function(t,e){if("object"!=fa(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=fa(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==fa(e)?e:e+""}var ya=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.aggName=null,this.aggFieldName=null,this.CLASS_NAME="SuperMap.AggregationParameter",Tt.extend(this,e)},(e=[{key:"destroy",value:function(){this.aggName=null,this.aggFieldName=null,this.aggType=null}}])&&pa(t.prototype,e),r&&pa(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function da(t){"@babel/helpers - typeof";return(da="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function va(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ma(n.key),n)}}function ma(t){var e=function(t,e){if("object"!=da(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=da(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==da(e)?e:e+""}var ba=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.dataSourceName=null,this.dataSetName=null,this.featureId=null,Tt.extend(this,e),this.CLASS_NAME="SuperMap.AttachmentsParameters"},(e=[{key:"destroy",value:function(){this.dataSourceName=null,this.dataSetName=null,this.featureId=null}}])&&va(t.prototype,e),r&&va(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function ga(t){"@babel/helpers - typeof";return(ga="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Sa(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,wa(n.key),n)}}function wa(t){var e=function(t,e){if("object"!=ga(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=ga(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ga(e)?e:e+""}function _a(t,e,r){return e=Oa(e),function(t,e){if(e&&("object"===ga(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Oa(t).constructor):e.apply(t,r))}function Oa(t){return(Oa=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ea(t,e){return(Ea=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Pa=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=_a(this,e)).subAggs=null,r.aggType=null,r.CLASS_NAME="SuperMap.BucketAggParameter",Tt.extend(r,t),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ea(t,e)}(e,ya),r=e,(n=[{key:"destroy",value:function(){this.subAggs&&(this.subAggs=null)}}])&&Sa(r.prototype,n),o&&Sa(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function xa(t){"@babel/helpers - typeof";return(xa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ta(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ca(n.key),n)}}function Ca(t){var e=function(t,e){if("object"!=xa(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=xa(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==xa(e)?e:e+""}function ka(t,e,r){return e=ja(e),function(t,e){if(e&&("object"===xa(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],ja(t).constructor):e.apply(t,r))}function Aa(){return(Aa="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ja(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function ja(t){return(ja=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Na(t,e){return(Na=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Ia=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=ka(this,e)).aggType=V.AVG,Tt.extend(r,t),r.CLASS_NAME="SuperMap.MetricsAggParameter",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Na(t,e)}(e,ya),r=e,(n=[{key:"destroy",value:function(){Aa(ja(e.prototype),"destroy",this).call(this);this.aggType=null}}])&&Ta(r.prototype,n),o&&Ta(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function Ma(t){"@babel/helpers - typeof";return(Ma="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ra(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,La(n.key),n)}}function La(t){var e=function(t,e){if("object"!=Ma(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Ma(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Ma(e)?e:e+""}var Da=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.dataset=null,this.targetDatasourceName=null,this.totalGridName=null,this.diffuseDatasetGridName=null,this.durationDatasetGridName=null,this.directDatasetGridName=null,this.latitude=null,this.timeMode="MULTIDAYS",this.dayStart=null,this.dayEnd=null,this.hourStart=null,this.hourEnd=null,this.transmittance=null,this.hourInterval=null,this.dayInterval=null,this.deleteExistResultDataset=!1,Tt.extend(this,e),this.CLASS_NAME="SuperMap.AreaSolarRadiationParameters"},r=[{key:"toObject",value:function(t,e){var r={};for(var n in t){if("dataset"!==n)"latitude"===n||"timeMode"===n||"dayStart"===n||("dayEnd"===n||"hourStart"===n||"hourEnd"===n)||("transmittance"===n||"hourInterval"===n||"dayInterval"===n)?r[n]=t[n]:e[n]=t[n]}e.parameter=r}}],(e=[{key:"destroy",value:function(){var t=this;t.dataset=null,t.zFactor=1,t.averageCurvatureName=null,t.profileCurvatureName=null,t.planCurvatureName=null,t.deleteExistResultDataset=!0}}])&&Ra(t.prototype,e),r&&Ra(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function Ba(t){"@babel/helpers - typeof";return(Ba="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Fa(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ua(n.key),n)}}function Ua(t){var e=function(t,e){if("object"!=Ba(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Ba(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Ba(e)?e:e+""}function Ga(t,e,r){return e=za(e),function(t,e){if(e&&("object"===Ba(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],za(t).constructor):e.apply(t,r))}function Va(){return(Va="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=za(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function za(t){return(za=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ha(t,e){return(Ha=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var qa=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Ga(this,e,[t,r])).format=r&&r.format||o.GEOJSON,n.CLASS_NAME="SuperMap.SpatialAnalystBase",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ha(t,e)}(e,Ki),r=e,(n=[{key:"destroy",value:function(){Va(za(e.prototype),"destroy",this).call(this),this.format=null}},{key:"transformResult",value:function(t,e){var r;if((t=Tt.transformResult(t))&&this.format===o.GEOJSON&&"function"==typeof this.toGeoJSONResult)if(Tt.isArray(t)){for(var n=0;n<t.length;n++)t[n]=this.toGeoJSONResult(t[n]);r=t}else r=this.toGeoJSONResult(t);return r||(r=t),{result:r,options:e}}},{key:"toGeoJSONResult",value:function(t){if(!t)return null;t.result&&t.result.resultGeometry&&(t=t.result);var e=new Ln;if(t.recordsets)for(var r=0,n=t.recordsets,o=n.length;r<o;r++)n[r].features&&(n[r].features=e.toGeoJSON(n[r].features));else t.recordset&&t.recordset.features&&(t.recordset.features=e.toGeoJSON(t.recordset.features));return t.resultGeometry&&(t.resultGeometry=e.toGeoJSON(t.resultGeometry)),t.regions&&(t.regions=e.toGeoJSON(t.regions)),t}}])&&Fa(r.prototype,n),i&&Fa(r,i),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,i}();function Ja(t){"@babel/helpers - typeof";return(Ja="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Wa(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ka(n.key),n)}}function Ka(t){var e=function(t,e){if("object"!=Ja(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Ja(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Ja(e)?e:e+""}function Ya(t,e,r){return e=Xa(e),function(t,e){if(e&&("object"===Ja(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Xa(t).constructor):e.apply(t,r))}function Qa(){return(Qa="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Xa(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Xa(t){return(Xa=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Za(t,e){return(Za=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var $a=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Ya(this,e,[t,r])).CLASS_NAME="SuperMap.AreaSolarRadiationService",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Za(t,e)}(e,qa),r=e,(n=[{key:"destroy",value:function(){Qa(Xa(e.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){if(t instanceof Da){var r=this,n={};t instanceof Da&&(r.url=Tt.urlPathAppend(r.url,"datasets/".concat(t.dataset,"/solarradiation"))),r.url=Tt.urlAppend(r.url,"returnContent=true"),Da.toObject(t,n);var o=Tt.toJSON(n);return r.request({method:"POST",data:o,scope:r,success:e,failure:e})}}}])&&Wa(r.prototype,n),o&&Wa(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function ts(t){"@babel/helpers - typeof";return(ts="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function es(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,rs(n.key),n)}}function rs(t){var e=function(t,e){if("object"!=ts(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=ts(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ts(e)?e:e+""}var ns=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.exp=null,this.value=100,Tt.extend(this,e),this.CLASS_NAME="SuperMap.BufferDistance"},(e=[{key:"destroy",value:function(){this.exp=null,this.value=null}}])&&es(t.prototype,e),r&&es(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function os(t){"@babel/helpers - typeof";return(os="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function is(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,as(n.key),n)}}function as(t){var e=function(t,e){if("object"!=os(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=os(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==os(e)?e:e+""}var ss=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.endType=_.FLAT,this.leftDistance=new ns,this.rightDistance=new ns,this.semicircleLineSegment=4,this.radiusUnit=f.METER,e&&Tt.extend(this,e),this.CLASS_NAME="SuperMap.BufferSetting"},(e=[{key:"destroy",value:function(){var t=this;t.endType=null,t.leftDistance&&(t.leftDistance.destroy(),t.leftDistance=null),t.rightDistance&&(t.rightDistance.destroy(),t.rightDistance=null),t.semicircleLineSegment=null,t.radiusUnit=null}}])&&is(t.prototype,e),r&&is(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function us(t){"@babel/helpers - typeof";return(us="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ls(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,cs(n.key),n)}}function cs(t){var e=function(t,e){if("object"!=us(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=us(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==us(e)?e:e+""}var fs=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);this.bufferSetting=new ss,Tt.extend(this,e),this.CLASS_NAME="SuperMap.BufferAnalystParameters"},(e=[{key:"destroy",value:function(){this.bufferSetting&&(this.bufferSetting.destroy(),this.bufferSetting=null)}}])&&ls(t.prototype,e),r&&ls(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function ps(t){"@babel/helpers - typeof";return(ps="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function hs(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ys(n.key),n)}}function ys(t){var e=function(t,e){if("object"!=ps(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=ps(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ps(e)?e:e+""}var ds=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.expectCount=1e3,this.dataset=null,this.dataReturnMode=T.RECORDSET_ONLY,this.deleteExistResultDataset=!0,Tt.extend(this,e),this.CLASS_NAME="SuperMap.DataReturnOption"},(e=[{key:"destroy",value:function(){this.expectCount=null,this.dataset=null,this.dataReturnMode=null,this.deleteExistResultDataset=null}}])&&hs(t.prototype,e),r&&hs(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function vs(t){"@babel/helpers - typeof";return(vs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ms(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,bs(n.key),n)}}function bs(t){var e=function(t,e){if("object"!=vs(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=vs(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==vs(e)?e:e+""}var gs=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.attributeFilter=null,this.name=null,this.joinItems=null,this.linkItems=null,this.ids=null,this.orderBy=null,this.groupBy=null,this.fields=null,e&&Tt.extend(this,e),this.CLASS_NAME="SuperMap.FilterParameter"},(e=[{key:"destroy",value:function(){var t=this;if(t.attributeFilter=null,t.name=null,t.joinItems){for(var e=0,r=t.joinItems,n=r.length;e<n;e++)r[e].destroy();t.joinItems=null}if(t.linkItems){for(var o=0,i=t.linkItems,a=i.length;o<a;o++)i[o].destroy();t.linkItems=null}t.ids=null,t.orderBy=null,t.groupBy=null,t.fields=null}}])&&ms(t.prototype,e),r&&ms(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function Ss(t){"@babel/helpers - typeof";return(Ss="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ws(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,_s(n.key),n)}}function _s(t){var e=function(t,e){if("object"!=Ss(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Ss(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Ss(e)?e:e+""}function Os(t,e,r){return e=Ps(e),function(t,e){if(e&&("object"===Ss(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Ps(t).constructor):e.apply(t,r))}function Es(){return(Es="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ps(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Ps(t){return(Ps=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function xs(t,e){return(xs=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Ts=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=Os(this,e,[t])).dataset=null,r.filterQueryParameter=new gs,r.resultSetting=new ds,r.isAttributeRetained=!0,r.isUnion=!1,Tt.extend(r,t),r.CLASS_NAME="SuperMap.DatasetBufferAnalystParameters",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&xs(t,e)}(e,fs),r=e,o=[{key:"toObject",value:function(t,e){for(var r in t)if("bufferSetting"===r)t.bufferSetting.radiusUnit=t.bufferSetting.radiusUnit.toUpperCase(),e.bufferAnalystParameter=t.bufferSetting;else if("resultSetting"===r)e.dataReturnOption=t.resultSetting;else{if("dataset"===r)continue;e[r]=t[r]}}}],(n=[{key:"destroy",value:function(){Es(Ps(e.prototype),"destroy",this).call(this);var t=this;t.dataset=null,t.filterQueryParameter&&(t.filterQueryParameter.destroy(),t.filterQueryParameter=null),t.resultSetting&&(t.resultSetting.destroy(),t.resultSetting=null),t.isAttributeRetained=null,t.isUnion=null}}])&&ws(r.prototype,n),o&&ws(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function Cs(t){"@babel/helpers - typeof";return(Cs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ks(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,As(n.key),n)}}function As(t){var e=function(t,e){if("object"!=Cs(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Cs(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Cs(e)?e:e+""}function js(t,e,r){return e=Is(e),function(t,e){if(e&&("object"===Cs(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Is(t).constructor):e.apply(t,r))}function Ns(){return(Ns="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Is(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Is(t){return(Is=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ms(t,e){return(Ms=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Rs=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=js(this,e,[t])).sourceGeometry=null,r.sourceGeometrySRID=null,t&&Tt.extend(r,t),r.CLASS_NAME=" SuperMap.GeometryBufferAnalystParameters",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ms(t,e)}(e,fs),r=e,o=[{key:"toObject",value:function(t,e){for(var r in t)if("bufferSetting"===r){var n={};for(var o in t.bufferSetting)n[o]=t.bufferSetting[o];e.analystParameter=n}else"sourceGeometry"===r?e.sourceGeometry=Xr.fromGeometry(t.sourceGeometry):e[r]=t[r]}}],(n=[{key:"destroy",value:function(){Ns(Is(e.prototype),"destroy",this).call(this);this.sourceGeometry&&(this.sourceGeometry.destroy(),this.sourceGeometry=null)}}])&&ks(r.prototype,n),o&&ks(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function Ls(t){"@babel/helpers - typeof";return(Ls="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ds(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Bs(n.key),n)}}function Bs(t){var e=function(t,e){if("object"!=Ls(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Ls(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Ls(e)?e:e+""}function Fs(t,e,r){return e=Gs(e),function(t,e){if(e&&("object"===Ls(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Gs(t).constructor):e.apply(t,r))}function Us(){return(Us="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Gs(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Gs(t){return(Gs=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Vs(t,e){return(Vs=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var zs=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Fs(this,e,[t,r])).mode=null,r&&Tt.extend(n,r),n.CLASS_NAME="SuperMap.BufferAnalystService",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Vs(t,e)}(e,qa),r=e,(n=[{key:"destroy",value:function(){Us(Gs(e.prototype),"destroy",this).call(this),this.mode=null}},{key:"processAsync",value:function(t,e){var r={},n=this;t instanceof Ts?(n.mode="datasets",n.url=Tt.urlPathAppend(n.url,"datasets/"+t.dataset+"/buffer"),Ts.toObject(t,r)):t instanceof Rs&&(n.mode="geometry",n.url=Tt.urlPathAppend(n.url,"geometry/buffer"),Rs.toObject(t,r));var o=Tt.toJSON(r);return this.returnContent=!0,n.request({method:"POST",data:o,scope:n,success:e,failure:e})}},{key:"dataFormat",value:function(){return[o.GEOJSON,o.ISERVER,o.FGB]}}])&&Ds(r.prototype,n),i&&Ds(r,i),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,i}();function Hs(t){"@babel/helpers - typeof";return(Hs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function qs(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Js(n.key),n)}}function Js(t){var e=function(t,e){if("object"!=Hs(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Hs(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Hs(e)?e:e+""}var Ws=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.alias=null,this.connect=null,this.dataBase=null,this.driver=null,this.engineType=null,this.exclusive=null,this.OpenLinkTable=null,this.password=null,this.readOnly=null,this.server=null,this.user=null,e&&Tt.extend(this,e),this.CLASS_NAME="SuperMap.DatasourceConnectionInfo"},(e=[{key:"destroy",value:function(){var t=this;t.alias=null,t.connect=null,t.dataBase=null,t.driver=null,t.engineType=null,t.exclusive=null,t.OpenLinkTable=null,t.password=null,t.readOnly=null,t.server=null,t.user=null}}])&&qs(t.prototype,e),r&&qs(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function Ks(t){"@babel/helpers - typeof";return(Ks="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ys(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Qs(n.key),n)}}function Qs(t){var e=function(t,e){if("object"!=Ks(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Ks(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Ks(e)?e:e+""}var Xs=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.type=E.UDB,this.datasetName="analystResult",this.datasourceInfo=null,this.outputPath="",Tt.extend(this,e),this.CLASS_NAME="SuperMap.OutputSetting"},(e=[{key:"destroy",value:function(){var t=this;t.type=null,t.datasetName=null,t.outputPath=null,t.datasourceInfo instanceof Ws&&(t.datasourceInfo.destroy(),t.datasourceInfo=null)}}])&&Ys(t.prototype,e),r&&Ys(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function Zs(t){"@babel/helpers - typeof";return(Zs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function $s(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,tu(n.key),n)}}function tu(t){var e=function(t,e){if("object"!=Zs(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Zs(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Zs(e)?e:e+""}var eu=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.items=null,this.numericPrecision=1,this.rangeMode=v.EQUALINTERVAL,this.rangeCount="",this.colorGradientType=m.YELLOW_RED,Tt.extend(this,e),this.CLASS_NAME="SuperMap.MappingParameters"},(e=[{key:"destroy",value:function(){var t=this;if(t.items){if(t.items.length>0)for(var e in t.items)t.items[e].destroy(),t.items[e]=null;t.items=null}t.numericPrecision=null,t.rangeMode=null,t.rangeCount=null,t.colorGradientType=null}}])&&$s(t.prototype,e),r&&$s(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function ru(t){"@babel/helpers - typeof";return(ru="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function nu(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ou(n.key),n)}}function ou(t){var e=function(t,e){if("object"!=ru(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=ru(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ru(e)?e:e+""}var iu=function(){return t=function t(e){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.datasetName="",this.bounds="",this.distance="",this.distanceField="",this.distanceUnit=D.METER,this.dissolveField="",this.output=null,this.mappingParameters=null,!e)return this;Tt.extend(this,e),this.CLASS_NAME="SuperMap.BuffersAnalystJobsParameter"},r=[{key:"toObject",value:function(t,e){for(var r in t)"datasetName"!==r?"output"!==r?(e.analyst=e.analyst||{},"bounds"===r&&t[r]?e.analyst[r]=t[r].toBBOX():e.analyst[r]=t[r],"mappingParameters"===r&&(e.analyst[r]=e.analyst[r]||{},e.analyst.mappingParameters=t[r])):(e.output=e.output||{},e.output=t[r]):(e.input=e.input||{},e.input[r]=t[r])}}],(e=[{key:"destroy",value:function(){this.datasetName=null,this.bounds=null,this.distance=null,this.distanceField=null,this.distanceUnit=null,this.dissolveField=null,this.output instanceof Xs&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof eu&&(this.mappingParameters.destroy(),this.mappingParameters=null)}}])&&nu(t.prototype,e),r&&nu(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function au(t){"@babel/helpers - typeof";return(au="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function su(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,uu(n.key),n)}}function uu(t){var e=function(t,e){if("object"!=au(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=au(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==au(e)?e:e+""}function lu(t,e,r){return e=fu(e),function(t,e){if(e&&("object"===au(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],fu(t).constructor):e.apply(t,r))}function cu(){return(cu="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=fu(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function fu(t){return(fu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function pu(t,e){return(pu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var hu=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=lu(this,e,[t,r=r||{}])).CLASS_NAME="SuperMap.ProcessingServiceBase",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&pu(t,e)}(e,Ki),r=e,(n=[{key:"destroy",value:function(){cu(fu(e.prototype),"destroy",this).call(this)}},{key:"getJobs",value:function(t,e){var r=this;return co.get(yo.appendCredential(t),null,{proxy:r.proxy}).then(function(t){return t.json()}).then(function(t){var n={result:t,object:r,type:"processCompleted"};return e(n),n}).catch(function(t){var n={error:t,object:r,type:"processFailed"};return e(n),n})}},{key:"addJob",value:function(t,e,r,n,o,i){var a=this,s=null;e&&e instanceof r&&(s=new Object,r.toObject(e,s));var u=Object.assign({"Content-Type":"application/x-www-form-urlencoded"},a.headers||{}),l={proxy:a.proxy,headers:u,withCredentials:a.withCredentials,crossOrigin:a.crossOrigin,isInTheSameDomain:a.isInTheSameDomain};return co.post(yo.appendCredential(t),JSON.stringify(s),l).then(function(t){return t.json()}).then(function(t){return t.succeed?a.transformResult(t,n,o,i):((t=a.transformErrorResult(t)).options=a,t.type="processFailed",o(t),t)}).catch(function(t){return(t=a.transformErrorResult({error:t})).options=a,t.type="processFailed",o(t),t})}},{key:"transformResult",value:function(t,e,r,n){t=Tt.transformResult(t),e=e||1e3;var o=this;if(t)return new Promise(function(i){var a=setInterval(function(){co.get(yo.appendCredential(t.newResourceLocation),{_t:(new Date).getTime()}).then(function(t){return t.json()}).then(function(t){if(i({object:o,id:t.id,state:t.state}),n({id:t.id,state:t.state,object:o}),"LOST"===t.state.runState||"KILLED"===t.state.runState||"FAILED"===t.state.runState){clearInterval(a);var e={error:t.state.errorMsg,state:t.state.runState,object:o,type:"processFailed"};i(e),r(e)}if("FINISHED"===t.state.runState&&t.setting.serviceInfo){clearInterval(a);var s={result:t,object:o,type:"processCompleted"};i(s),r(s)}}).catch(function(t){clearInterval(a);var e={error:t,object:o,type:"processFailed"};i(e),r(e)})},e)})}}])&&su(r.prototype,n),o&&su(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function yu(t){"@babel/helpers - typeof";return(yu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function du(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,vu(n.key),n)}}function vu(t){var e=function(t,e){if("object"!=yu(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=yu(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==yu(e)?e:e+""}function mu(t,e,r){return e=gu(e),function(t,e){if(e&&("object"===yu(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],gu(t).constructor):e.apply(t,r))}function bu(){return(bu="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=gu(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function gu(t){return(gu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Su(t,e){return(Su=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var wu=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=mu(this,e,[t,r])).url=Tt.urlPathAppend(n.url,"spatialanalyst/buffers"),n.CLASS_NAME="SuperMap.BuffersAnalystJobsService",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Su(t,e)}(e,hu),r=e,(n=[{key:"destroy",value:function(){bu(gu(e.prototype),"destroy",this).call(this)}},{key:"getBuffersJobs",value:function(t){return bu(gu(e.prototype),"getJobs",this).call(this,this.url,t)}},{key:"getBuffersJob",value:function(t,r){return bu(gu(e.prototype),"getJobs",this).call(this,Tt.urlPathAppend(this.url,t),r)}},{key:"addBuffersJob",value:function(t,r,n,o){return bu(gu(e.prototype),"addJob",this).call(this,this.url,t,iu,r,n,o)}}])&&du(r.prototype,n),o&&du(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function _u(t){"@babel/helpers - typeof";return(_u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ou(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Eu(n.key),n)}}function Eu(t){var e=function(t,e){if("object"!=_u(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=_u(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==_u(e)?e:e+""}var Pu=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);this.sourceNodeIDs=null,this.edgeID=null,this.nodeID=null,this.isUncertainDirectionValid=!1,Tt.extend(this,e),this.CLASS_NAME="SuperMap.BurstPipelineAnalystParameters"},(e=[{key:"destroy",value:function(){this.sourceNodeIDs=null,this.edgeID=null,this.nodeID=null,this.isUncertainDirectionValid=null}}])&&Ou(t.prototype,e),r&&Ou(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function xu(t){"@babel/helpers - typeof";return(xu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Tu(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Cu(n.key),n)}}function Cu(t){var e=function(t,e){if("object"!=xu(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=xu(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==xu(e)?e:e+""}function ku(t,e,r){return e=ju(e),function(t,e){if(e&&("object"===xu(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],ju(t).constructor):e.apply(t,r))}function Au(){return(Au="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ju(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function ju(t){return(ju=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Nu(t,e){return(Nu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Iu=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=ku(this,e,[t,r])).format=o.GEOJSON,n.CLASS_NAME="SuperMap.NetworkAnalystServiceBase",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Nu(t,e)}(e,Ki),r=e,(n=[{key:"destroy",value:function(){Au(ju(e.prototype),"destroy",this).call(this),this.format=null}},{key:"transformResult",value:function(t,e){var r;return(t=Tt.transformResult(t))&&this.format===o.GEOJSON&&"function"==typeof this.toGeoJSONResult&&(r=this.toGeoJSONResult(t)),r||(r=t),{result:r,options:e}}},{key:"toGeoJSONResult",value:function(t){return null}}])&&Tu(r.prototype,n),i&&Tu(r,i),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,i}();function Mu(t){"@babel/helpers - typeof";return(Mu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ru(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Lu(n.key),n)}}function Lu(t){var e=function(t,e){if("object"!=Mu(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Mu(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Mu(e)?e:e+""}function Du(t,e,r){return e=Fu(e),function(t,e){if(e&&("object"===Mu(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Fu(t).constructor):e.apply(t,r))}function Bu(){return(Bu="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Fu(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Fu(t){return(Fu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Uu(t,e){return(Uu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Gu=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Du(this,e,[t,r])).CLASS_NAME="SuperMap.BurstPipelineAnalystService",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Uu(t,e)}(e,Iu),r=e,(n=[{key:"destroy",value:function(){Bu(Fu(e.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){if(!(t instanceof Pu))return null;var r;if(this.url=Tt.urlPathAppend(this.url,"burstAnalyse"),r={sourceNodeIDs:t.sourceNodeIDs,isUncertainDirectionValid:t.isUncertainDirectionValid},null!==t.edgeID&&null!==t.nodeID)throw new Error("edgeID and nodeID cannot be null at the same time.");if(null===t.edgeID&&null===t.nodeID)throw new Error("edgeID and nodeID cannot be null at the same time.");return null!==t.edgeID?r.edgeID=t.edgeID:r.nodeID=t.nodeID,this.request({method:"GET",params:r,scope:this,success:e,failure:e})}}])&&Ru(r.prototype,n),o&&Ru(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function Vu(t){"@babel/helpers - typeof";return(Vu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function zu(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Hu(n.key),n)}}function Hu(t){var e=function(t,e){if("object"!=Vu(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Vu(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Vu(e)?e:e+""}function qu(t,e,r){return e=Wu(e),function(t,e){if(e&&("object"===Vu(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Wu(t).constructor):e.apply(t,r))}function Ju(){return(Ju="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Wu(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Wu(t){return(Wu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ku(t,e){return(Ku=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Yu=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=qu(this,e,[t,r])).CLASS_NAME="SuperMap.ChartFeatureInfoSpecsService",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ku(t,e)}(e,Ki),r=e,(n=[{key:"destroy",value:function(){Ju(Wu(e.prototype),"destroy",this).call(this),Tt.reset(this)}},{key:"processAsync",value:function(t){return this.isTempLayers||Tt.urlPathAppend(this.url,"chartFeatureInfoSpecs"),this.request({method:"GET",params:null,scope:this,success:t,failure:t})}}])&&zu(r.prototype,n),o&&zu(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function Qu(t){"@babel/helpers - typeof";return(Qu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Xu(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Zu(n.key),n)}}function Zu(t){var e=function(t,e){if("object"!=Qu(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Qu(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Qu(e)?e:e+""}function $u(t,e,r){return e=el(e),function(t,e){if(e&&("object"===Qu(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],el(t).constructor):e.apply(t,r))}function tl(){return(tl="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=el(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function el(t){return(el=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function rl(t,e){return(rl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var nl=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=$u(this,e,[t,r])).CLASS_NAME="SuperMap.ChartAcronymClassifyService",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&rl(t,e)}(e,Ki),r=e,(n=[{key:"destroy",value:function(){tl(el(e.prototype),"destroy",this).call(this),Tt.reset(this)}},{key:"processAsync",value:function(t){var e=this;return e.isTempLayers||(e.url=Tt.urlPathAppend(e.url,"chartAcronymClassify")),e.request({method:"GET",params:null,scope:e,success:t,failure:t})}}])&&Xu(r.prototype,n),o&&Xu(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function ol(t){"@babel/helpers - typeof";return(ol="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function il(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,al(n.key),n)}}function al(t){var e=function(t,e){if("object"!=ol(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=ol(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ol(e)?e:e+""}var sl=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.isQueryPoint=null,this.isQueryLine=null,this.isQueryRegion=null,this.attributeFilter=null,this.chartFeatureInfoSpecCode=null,Tt.extend(this,e),this.CLASS_NAME="SuperMap.ChartQueryFilterParameter"},(e=[{key:"destroy",value:function(){var t=this;t.isQueryPoint=null,t.isQueryLine=null,t.isQueryRegion=null,t.attributeFilter=null,t.chartFeatureInfoSpecCode=null}},{key:"toJson",value:function(){var t="";return t+='"isQueryPoint":'+this.isQueryPoint+",",t+='"isQueryLine":'+this.isQueryLine+",",t+='"isQueryRegion":'+this.isQueryRegion+",",this.attributeFilter&&(t+='"attributeFilter": "'+this.attributeFilter.replace(/"/g,"'")+'",'),t="{"+(t+='"chartFeatureInfoSpecCode":'+this.chartFeatureInfoSpecCode)+"}"}}])&&il(t.prototype,e),r&&il(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function ul(t){"@babel/helpers - typeof";return(ul="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ll(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,cl(n.key),n)}}function cl(t){var e=function(t,e){if("object"!=ul(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=ul(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ul(e)?e:e+""}var fl=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.queryMode=null,this.bounds=null,this.chartLayerNames=null,this.chartQueryFilterParameters=null,this.returnContent=!0,this.startRecord=0,this.expectCount=null,Tt.extend(this,e),this.CLASS_NAME="SuperMap.ChartQueryParameters"},(e=[{key:"destroy",value:function(){var t=this;t.queryMode=null,t.bounds=null,t.chartLayerNames=null,t.chartQueryFilterParameters=null,t.returnContent=!0,t.startRecord=0,t.expectCount=null}},{key:"getVariablesJson",value:function(){var t="";if(t+='"queryMode":"'+this.queryMode+'",',this.chartLayerNames&&this.chartLayerNames.length){for(var e=[],r=this.chartLayerNames.length,n=0;n<r;n++)e.push('"'+this.chartLayerNames[n]+'"');t+='"chartLayerNames":'+("["+e.join(",")+"]")+","}if("ChartBoundsQuery"!==this.queryMode&&"ChartFeatureBoundsQuery"!==this.queryMode||!this.bounds||(t+='"bounds":{"leftBottom":{"x":'+this.bounds.left+',"y":'+this.bounds.bottom+'},"rightTop":{"x":'+this.bounds.right+',"y":'+this.bounds.top+"}},"),this.chartQueryFilterParameters&&this.chartQueryFilterParameters.length){for(var o=[],i=this.chartQueryFilterParameters.length,a=0;a<i;a++){var s=this.chartQueryFilterParameters[a];s instanceof sl&&o.push(s.toJson())}var u="["+o.join(",")+"]";u='"chartQueryParams":'+u+",",u+='"startRecord":'+this.startRecord+",",t+='"chartQueryParameters":'+(u="{"+(u+='"expectCount":'+this.expectCount)+"}")}return t="{"+t+"}"}}])&&ll(t.prototype,e),r&&ll(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function pl(t){"@babel/helpers - typeof";return(pl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function hl(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,yl(n.key),n)}}function yl(t){var e=function(t,e){if("object"!=pl(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=pl(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==pl(e)?e:e+""}var dl=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e&&(this.customParams=null,this.prjCoordSys=null,this.expectCount=1e5,this.networkType=a.LINE,this.queryOption=s.ATTRIBUTEANDGEOMETRY,this.queryParams=null,this.startRecord=0,this.holdTime=10,this.returnCustomResult=!1,this.returnFeatureWithFieldCaption=!1,Tt.extend(this,e),this.CLASS_NAME="SuperMap.QueryParameters")},(e=[{key:"destroy",value:function(){var t=this;if(t.customParams=null,t.expectCount=null,t.networkType=null,t.queryOption=null,t.queryParams){for(var e=0,r=t.queryParams,n=r.length;e<n;e++)r[e].destroy();t.queryParams=null}t.startRecord=null,t.holdTime=null,t.returnCustomResult=null,t.prjCoordSys=null}}])&&hl(t.prototype,e),r&&hl(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}(),vl={AGENCY:"产品责任机构",BCNSHP:"立标形状",BUISHP:"建筑形状",BOYSHP:"浮标形状",BURDEP:"埋置深度",CALSGN:"呼号",CATAIR:"机场类",CATACH:"锚地类",CATBRG:"桥梁类",CATBUA:"建筑群区类",CATCBL:"电缆类",CATCAN:"渠道类",CATCAM:"方位标志类",CATCHP:"检查站类",CATCOA:"海岸线类",CATCTR:"控制点类",CATCON:"传送装置类",CATCOV:"作用范围类",CATCRN:"起重机类",CATDAM:"水坝类",CATDIS:"距离标志类",CATDOC:"船坞类",CATDPG:"倾废场类",CATFNC:"栅栏类",CATFRY:"轮渡类",CATFIF:"捕鱼设备类",CATFOG:"雾号类",CATFOR:"防御工事类",CATGAT:"门类",CATHAF:"港口设备类",CATHLK:"趸船类",CATICE:"冰类",CATINB:"作业浮标类",CATLND:"地面地带类",CATLMK:"陆标类",CATLAM:"侧面标志类",CATLIT:"灯标类",CATMFA:"海水养殖场类",CATMPA:"军事演习区类",CATMOR:"系泊绞缆设备类",CATNAV:"导航线类",CATOBS:"障碍物类",CATOFP:"海上平台类",CATOLB:"油障类",CATPLE:"木桩类",CATPIL:"引航员登船点类",CATPIP:"管道类",CATPRA:"生产区域类",CATPYL:"塔架类",CATQUA:"数据质量类",CATRAS:"雷达站类",CATRTB:"雷达应答器类",CATROS:"无线电台类",CATTRK:"推荐航线类",CATRSC:"救助站类",CATREA:"限制区类",CATROD:"道路类",CATRUN:"跑道类",CATSEA:"海区类",CATSLC:"岸线建筑物类",CATSIT:"交通信号站类",CATSIW:"告警信号台类",CATSIL:"筒仓、罐类",CATSLO:"斜坡类",CATSCF:"小型船用设备类",CATSPM:"专用标志类",CATTSS:"分道通航制类",CATVEG:"植被类",CATWAT:"紊流类",CATWED:"海草、巨型海藻类",CATWRK:"沉船类",CATZOC:"数据置信度区类",SPACE_:"字符空格",CHARS_:"字符说明",COLOUR:"颜色",COLPAT:"彩色图案",COMCHA:"通信频道",CSIZE_:"罗经花尺寸",CPDATE:"汇编日期",CSCALE:"编辑比例尺",CONDTN:"状态",CONRAD:"雷达可视",CONVIS:"视觉可见",CURVEL:"海流速度",DATEND:"终止日期",DATSTA:"开始日期",DRVAL1:"深度范围值1",DRVAL2:"深度范围值2",DUNITS:"深度单位",ELEVAT:"海拔",ESTRNG:"预计传输范围",EXCLIT:"灯光显示状况",EXPSOU:"水深说明",FUNCTN:"功能",HEIGHT:"高度",HUNITS:"高度、长度单位",HORACC:"水平精度",HORCLR:"水平净空",HORLEN:"水平长度",HORWID:"水平宽度",ICEFAC:"冰况系数",INFORM:"信息",JRSDTN:"管辖区域",JUSTH_:"水平对齐",JUSTV_:"垂直对齐",LIFCAP:"起重能力",LITCHR:"灯质",LITVIS:"灯标能见度",MARSYS:"海上标志体系",MLTYLT:"灯组",NATION:"国籍",NATCON:"建筑结构性质",NATSUR:"表面性质",NATQUA:"表面性质限定术语",NMDATE:"航海通告日期",OBJNAM:"物标名称",ORIENT:"方位",PEREND:"定期终止日期",PERSTA:"定期开始日期",PICREP:"图示显示",PILDST:"引航区域",PRCTRY:"生产国家",PRODCT:"产品",PUBREF:"出版物参考",QUASOU:"水深测量特性",RADWAL:"雷达波长",RADIUS:"半径",RECDAT:"记录日期",RECIND:"记录表示法",RYRMGV:"磁差参考年份",RESTRN:"限制区",SCAMAX:"最大比例尺",SCAMIN:"最小比例尺",SCVAL1:"比例值1",SCVAL2:"比例值2",SECTR1:"扇形界限1",SECTR2:"扇形界限2",SHIPAM:"偏移参数",SIGFRQ:"信号频率",SIGGEN:"信号生成",SIGGRP:"信号组",SIGPER:"信号周期",SIGSEQ:"信号时序",SOUACC:"测深精度",SDISMX:"最大测深间距",SDISMN:"最小测深间距",SORDAT:"数据来源日期",SORIND:"数据来源表示",STATUS:"状况",SURATH:"测量机构",SUREND:"测量结束日期",SURSTA:"测量开始日期",SURTYP:"测量类型",SCALE_:"符号缩放系数",SCODE_:"符号代码",TECSOU:"水深测量技术",TXSTR_:"文本串",TXTDSC:"正文描述",TS_TSP:"潮流通告版值",TS_TSV:"潮流时序值",T_ACWL:"潮汐潮位精度",T_HWLW:"潮汐高低潮值",T_MTOD:"潮汐预报方法",T_THDF:"潮汐潮时与潮高差",T_TINT:"潮汐时间间隔值",T_TSVL:"潮汐时序值",T_VAHC:"潮汐调和分潮值",TIMEND:"终止时间",TIMSTA:"开始时间",TINTS_:"色调",TOPSHP:"顶标、昼标形状",TRAFIC:"交通流",VALACM:"磁差年变率",VALDCO:"等深线值",VALLMA:"局部磁力异常值",VALMAG:"磁差值",VALMXR:"最大作用距离",VALNMR:"标定作用距离",VALSOU:"水深值",VERACC:"垂直精度",VERCLR:"竖向净空",VERCCL:"封闭竖向净空",VERCOP:"开启竖向净空",VERCSA:"安全竖向净空",VERDAT:"垂直基准面",VERLEN:"垂直高度",WATLEV:"水位效应",CAT_TS:"潮流类",PUNITS:"位置精度单位",CLSDEF:"物标定义",CLSNAM:"物标名称",SYMINS:"物标名称",NINFOM:"用国家语言表示的信息",NOBJNM:"用国家语言表示的物标名称",NPLDST:"用国家语言表示的引航区",NTXST_:"用国家语言表示的文本串",NTXTDS:"用国家语言表示的正文",HORDAT:"水平基准面",POSACC:"位置精度",QUAPOS:"位置性质"};function ml(t){"@babel/helpers - typeof";return(ml="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function bl(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,gl(n.key),n)}}function gl(t){var e=function(t,e){if("object"!=ml(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=ml(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ml(e)?e:e+""}function Sl(t,e,r){return e=_l(e),wl(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],_l(t).constructor):e.apply(t,r))}function wl(t,e){if(e&&("object"===ml(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function _l(t){return(_l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ol(t,e){return(Ol=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var El=function(t){function e(t,r){var n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=Sl(this,e,[t,r]),r=r||{},n.returnContent=null,n.format=o.GEOJSON,Tt.extend(n,r);var i=n;return r.format&&(i.format=r.format.toUpperCase()),i.url?(i.url=Tt.urlPathAppend(i.url,"queryResults"),n.CLASS_NAME="SuperMap.ChartQueryService",n):wl(n)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ol(t,e)}(e,Ki),r=e,(n=[{key:"destroy",value:function(){Ki.prototype.destroy.apply(this,arguments),this.returnContent=null,this.format=null}},{key:"processAsync",value:function(t,e){if(t instanceof fl){var r,n=this;return n.returnContent=t.returnContent,r=t.getVariablesJson(),n.returnContent&&(n.url=Tt.urlAppend(n.url,"returnContent=true")),n.request({method:"POST",data:r,scope:n,success:e,failure:e})}}},{key:"_tranformFeatureField",value:function(t,e){t.forEach(function(t){t.fieldNames.forEach(function(r,n){t.fieldNames[n]="function"==typeof e&&e(r)||vl[r]||r})})}},{key:"_transformFeatures",value:function(t,e,r){this._tranformFeatureField(t.features,e),r===o.GEOJSON&&(t.features=(new Ln).toGeoJSON(t.features))}},{key:"transformResult",value:function(t,e){var r=this,n=this;t=Tt.transformResult(t);var o=n.fieldNameFormatter;if(t&&t.recordsets)for(var i=0,a=t.recordsets,s=a.length;i<s;i++)a[i].features&&this._transformFeatures(a[i],o,n.format),a[i].chartRecordsets&&a[i].chartRecordsets.forEach(function(t){r._transformFeatures(t,o,n.format)});return{result:t,options:e}}},{key:"getQueryParameters",value:function(t){return new dl({queryMode:t.queryMode,bounds:t.bounds,chartLayerNames:t.chartLayerNames,chartQueryFilterParameters:t.chartQueryFilterParameters,returnContent:t.returnContent})}}])&&bl(r.prototype,n),i&&bl(r,i),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,i}();function Pl(t){"@babel/helpers - typeof";return(Pl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function xl(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Tl(n.key),n)}}function Tl(t){var e=function(t,e){if("object"!=Pl(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Pl(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Pl(e)?e:e+""}var Cl=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.displayModeChart=W.STANDARD,this.colourModeChart=J.DAY_BRIGHT,this.displayTypeName="S52",this.fontName="Arial",this.simplifiedMarker=!0,this.symbolizedAreaBoundary=!1,this.displayTextMessage=!1,this.displaySounding=!1,this.minVisibleScaleEnabled=!0,this.localizationDisplayText=!1,this.displayMetaObject=!1,this.displayCellName=!1,this.displaySafetyContourLabel=!1,this.displayBorder=!1,this.safetyContour=30,this.shallowContour=2,this.deepContour=30,this.safetyDepth=30,this.displayOtherContourLabel=!1,this.displayTwoShades=!1,this.depthUnit=c.METER,this.fontSize=10,this.displayableFeature=null,this.selectableFeature=null,this.textClipRegionEnabled=!1,this.displayLowAccurateMarker=!0,this.displayScaleFactor=.05,this.displayableAcronymClassify=null,e&&Tt.extend(this,e),this.CLASS_NAME="SuperMap.ChartSetting"},(e=[{key:"destroy",value:function(){this.displayModeChart=null,this.colourModeChart=null,this.displayTypeName=null,this.fontName=null,this.simplifiedMarker=null,this.symbolizedAreaBoundary=null,this.displayTextMessage=null,this.displaySounding=null,this.minVisibleScaleEnabled=null,this.localizationDisplayText=null,this.displayMetaObject=null,this.displayCellName=null,this.displaySafetyContourLabel=null,this.displayBorder=null,this.safetyContour=null,this.shallowContour=null,this.deepContour=null,this.safetyDepth=null,this.displayOtherContourLabel=null,this.displayTwoShades=null,this.depthUnit=null,this.fontSize=null,this.displayableFeature=null,this.selectableFeature=null,this.textClipRegionEnabled=null,this.displayLowAccurateMarker=null,this.displayScaleFactor=null,this.displayableAcronymClassify=null}}])&&xl(t.prototype,e),r&&xl(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function kl(t){"@babel/helpers - typeof";return(kl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Al(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,jl(n.key),n)}}function jl(t){var e=function(t,e){if("object"!=kl(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=kl(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==kl(e)?e:e+""}var Nl=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.clipDatasetName=null,this.clipDatasourceName=null,this.clipRegion=null,this.isClipInRegion=!0,this.isExactClip=null,e&&Tt.extend(this,e),this.CLASS_NAME="SuperMap.ClipParameter"},(e=[{key:"destroy",value:function(){var t=this;t.clipDatasetName=null,t.clipDatasourceName=null,t.clipRegion=null,t.isClipInRegion=null,t.isExactClip=null}},{key:"toJSON",value:function(){return Tt.toJSON({isClipInRegion:this.isClipInRegion,clipDatasetName:this.clipDatasetName,clipDatasourceName:this.clipDatasourceName,isExactClip:this.isExactClip,clipRegion:Xr.fromGeometry(this.clipRegion)})}}])&&Al(t.prototype,e),r&&Al(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function Il(t){"@babel/helpers - typeof";return(Il="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ml(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Rl(n.key),n)}}function Rl(t){var e=function(t,e){if("object"!=Il(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Il(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Il(e)?e:e+""}var Ll=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},this.elevation=null,this.color=null,Tt.extend(this,e);var r=this.color;r&&(this.color=new kr(r.red,r.green,r.blue)),this.CLASS_NAME="SuperMap.ColorDictionary"},(e=[{key:"destroy",value:function(){Tt.reset(this)}},{key:"toServerJSONObject",value:function(){var t={};return t=Tt.copyAttributes(t,this)}}])&&Ml(t.prototype,e),r&&Ml(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function Dl(t){"@babel/helpers - typeof";return(Dl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Bl(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Fl(n.key),n)}}function Fl(t){var e=function(t,e){if("object"!=Dl(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Dl(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Dl(e)?e:e+""}var Ul=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e&&(this.returnEdgeFeatures=!1,this.returnEdgeGeometry=!1,this.returnEdgeIDs=!1,this.returnNodeFeatures=!1,this.returnNodeGeometry=!1,this.returnNodeIDs=!1,this.returnPathGuides=!1,this.returnRoutes=!1,Tt.extend(this,e),this.CLASS_NAME="SuperMap.TransportationAnalystResultSetting")},(e=[{key:"destroy",value:function(){var t=this;t.returnEdgeFeatures=null,t.returnEdgeGeometry=null,t.returnEdgeIDs=null,t.returnNodeFeatures=null,t.returnNodeGeometry=null,t.returnNodeIDs=null,t.returnPathGuides=null,t.returnRoutes=null}}])&&Bl(t.prototype,e),r&&Bl(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function Gl(t){"@babel/helpers - typeof";return(Gl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Vl(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,zl(n.key),n)}}function zl(t){var e=function(t,e){if("object"!=Gl(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Gl(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Gl(e)?e:e+""}var Hl=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e&&(this.barrierEdgeIDs=null,this.barrierNodeIDs=null,this.barrierPoints=null,this.weightFieldName=null,this.turnWeightField=null,this.resultSetting=new Ul,Tt.extend(this,e),this.CLASS_NAME="SuperMap.TransportationAnalystParameter")},(e=[{key:"destroy",value:function(){var t=this;if(t.barrierEdgeIDs=null,t.barrierNodeIDs=null,t.weightFieldName=null,t.turnWeightField=null,t.resultSetting&&(t.resultSetting.destroy(),t.resultSetting=null),t.barrierPoints&&t.barrierPoints.length)for(var e in t.barrierPoints)t.barrierPoints[e].destroy();t.barrierPoints=null}}])&&Vl(t.prototype,e),r&&Vl(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function ql(t){"@babel/helpers - typeof";return(ql="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Jl(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Wl(n.key),n)}}function Wl(t){var e=function(t,e){if("object"!=ql(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=ql(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ql(e)?e:e+""}var Kl=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.isAnalyzeById=!1,this.nodes=null,this.parameter=new Hl,Tt.extend(this,e),this.CLASS_NAME="SuperMap.ComputeWeightMatrixParameters"},(e=[{key:"destroy",value:function(){var t=this;t.isAnalyzeById=null,t.nodes=null,t.parameter&&(t.parameter.destroy(),t.parameter=null)}}])&&Jl(t.prototype,e),r&&Jl(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function Yl(t){"@babel/helpers - typeof";return(Yl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ql(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Xl(n.key),n)}}function Xl(t){var e=function(t,e){if("object"!=Yl(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Yl(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Yl(e)?e:e+""}function Zl(t,e,r){return e=tc(e),function(t,e){if(e&&("object"===Yl(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],tc(t).constructor):e.apply(t,r))}function $l(){return($l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=tc(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function tc(t){return(tc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ec(t,e){return(ec=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var rc=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Zl(this,e,[t,r])).CLASS_NAME="SuperMap.ComputeWeightMatrixService",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ec(t,e)}(e,Iu),r=e,(n=[{key:"destroy",value:function(){$l(tc(e.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){if(t instanceof Kl){var r,n=this;return n.url=Tt.urlPathAppend(n.url,"weightmatrix"),r={parameter:Tt.toJSON(t.parameter),nodes:n.getJson(t.isAnalyzeById,t.nodes)},n.request({method:"GET",params:r,scope:n,success:e,failure:e})}}},{key:"getJson",value:function(t,e){var r="[",n=e?e.length:0;if(!1===t)for(var o=0;o<n;o++)o>0&&(r+=","),r+='{"x":'+e[o].x+',"y":'+e[o].y+"}";else if(!0===t)for(var i=0;i<n;i++)i>0&&(r+=","),r+=e[i];return r+="]"}}])&&Ql(r.prototype,n),o&&Ql(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function nc(t){"@babel/helpers - typeof";return(nc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function oc(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ic(n.key),n)}}function ic(t){var e=function(t,e){if("object"!=nc(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=nc(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==nc(e)?e:e+""}function ac(t,e,r){return e=sc(e),function(t,e){if(e&&("object"===nc(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],sc(t).constructor):e.apply(t,r))}function sc(t){return(sc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function uc(t,e){return(uc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var lc=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=r||{}).EVENT_TYPES=["broadcastSocketConnected","broadcastSocketClosed","broadcastSocketError","broadcastFailed","broadcastSucceeded","subscribeSocketConnected","subscribeSocketClosed","subscribeSocketError","messageSucceeded","setFilterParamSucceeded"],(n=ac(this,e,[t,r])).geometry=null,n.prjCoordSys=null,n.excludeField=null,Tt.extend(n,r),n.CLASS_NAME="SuperMap.DataFlowService",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&uc(t,e)}(e,Ki),r=e,(n=[{key:"initBroadcast",value:function(){var t=this;return this.broadcastWebSocket=this._connect(Tt.urlPathAppend(t.url,"broadcast")),this.broadcastWebSocket.onopen=function(e){t.broadcastWebSocket.isOpen=!0,e.eventType="broadcastSocketConnected",t.events.triggerEvent("broadcastSocketConnected",e)},this.broadcastWebSocket.onclose=function(e){t.broadcastWebSocket&&(t.broadcastWebSocket.isOpen=!1),e.eventType="broadcastSocketClosed",t.events.triggerEvent("broadcastSocketClosed",e)},this.broadcastWebSocket.onerror=function(e){e.eventType="broadcastSocketError",t.events.triggerEvent("broadcastSocketError",e)},this}},{key:"broadcast",value:function(t){this.broadcastWebSocket&&this.broadcastWebSocket.isOpen?(this.broadcastWebSocket.send(JSON.stringify(t)),this.events.triggerEvent("broadcastSucceeded")):this.events.triggerEvent("broadcastFailed")}},{key:"initSubscribe",value:function(){var t=this;return this.subscribeWebSocket=this._connect(Tt.urlPathAppend(t.url,"subscribe")),this.subscribeWebSocket.onopen=function(e){t.subscribeWebSocket.send(t._getFilterParams()),e.eventType="subscribeSocketConnected",t.events.triggerEvent("subscribeSocketConnected",e)},this.subscribeWebSocket.onclose=function(e){e.eventType="subscribeWebSocketClosed",t.events.triggerEvent("subscribeWebSocketClosed",e)},this.subscribeWebSocket.onerror=function(e){e.eventType="subscribeSocketError",t.events.triggerEvent("subscribeSocketError",e)},this.subscribeWebSocket.onmessage=function(e){t._onMessage(e)},this}},{key:"setExcludeField",value:function(t){return this.excludeField=t,this.subscribeWebSocket.send(this._getFilterParams()),this}},{key:"setGeometry",value:function(t){return this.geometry=t,this.subscribeWebSocket.send(this._getFilterParams()),this}},{key:"unSubscribe",value:function(){this.subscribeWebSocket&&(this.subscribeWebSocket.close(),this.subscribeWebSocket=null)}},{key:"unBroadcast",value:function(){this.broadcastWebSocket&&(this.broadcastWebSocket.close(),this.broadcastWebSocket=null)}},{key:"destroy",value:function(){Ki.prototype.destroy.apply(this,arguments);this.geometry=null,this.prjCoordSys=null,this.excludeField=null,this.unBroadcast(),this.unSubscribe()}},{key:"_getFilterParams",value:function(){var t={filterParam:{prjCoordSys:this.prjCoordSys,excludeField:this.excludeField,geometry:this.geometry}};return Tt.toJSON(t)}},{key:"_onMessage",value:function(t){if(t.data&&t.data.indexOf("filterParam")>=0){var e=JSON.parse(t.data);return t.filterParam=e,t.eventType="setFilterParamSucceeded",void this.events.triggerEvent("setFilterParamSucceeded",t)}var r=JSON.parse(t.data);t.featureResult=r,t.eventType="messageSucceeded",this.events.triggerEvent("messageSucceeded",t)}},{key:"_connect",value:function(t){return t=yo.appendCredential(t),"WebSocket"in window?new WebSocket(t):"MozWebSocket"in window?new(0,window.MozWebSocket)(t):(console.log("no WebSocket"),null)}}])&&oc(r.prototype,n),o&&oc(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function cc(t){"@babel/helpers - typeof";return(cc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function fc(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,pc(n.key),n)}}function pc(t){var e=function(t,e){if("object"!=cc(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=cc(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==cc(e)?e:e+""}var hc=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},this.bounds=null,this.dataSourceName=null,this.description=null,this.encodeType=null,this.isReadOnly=null,this.name=null,this.prjCoordSys=null,this.tableName=null,this.type=null,Tt.extend(this,e);var r=this.bounds;r&&(this.bounds=new Dt(r.leftBottom.x,r.leftBottom.y,r.rightTop.x,r.rightTop.y)),this.CLASS_NAME="SuperMap.DatasetInfo"},(e=[{key:"destroy",value:function(){Tt.reset(this)}},{key:"toServerJSONObject",value:function(){var t={};return(t=Tt.copyAttributes(t,this)).bounds&&t.bounds.toServerJSONObject&&(t.bounds=t.bounds.toServerJSONObject()),t}}])&&fc(t.prototype,e),r&&fc(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function yc(t){"@babel/helpers - typeof";return(yc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function dc(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,vc(n.key),n)}}function vc(t){var e=function(t,e){if("object"!=yc(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=yc(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==yc(e)?e:e+""}var mc=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.operation=O.UNION,e&&Tt.extend(this,e),this.CLASS_NAME="SuperMap.OverlayAnalystParameters"},(e=[{key:"destroy",value:function(){this.operation=null}}])&&dc(t.prototype,e),r&&dc(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function bc(t){"@babel/helpers - typeof";return(bc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function gc(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Sc(n.key),n)}}function Sc(t){var e=function(t,e){if("object"!=bc(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=bc(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==bc(e)?e:e+""}function wc(t,e,r){return e=Oc(e),function(t,e){if(e&&("object"===bc(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Oc(t).constructor):e.apply(t,r))}function _c(){return(_c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Oc(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Oc(t){return(Oc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ec(t,e){return(Ec=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Pc=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=wc(this,e,[t])).operateDataset=null,r.operateDatasetFields=[],r.operateDatasetFilter=new gs,r.operateRegions=[],r.sourceDataset=null,r.sourceDatasetFields=[],r.sourceDatasetFilter=new gs,r.tolerance=0,r.resultSetting=new ds,Tt.extend(r,t),r.CLASS_NAME="SuperMap.DatasetOverlayAnalystParameters",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ec(t,e)}(e,mc),r=e,o=[{key:"toObject",value:function(t,e){for(var r in t)if("sourceDataset"!==r)if("operateRegions"===r){e.operateRegions=[];var n=t.operateRegions;for(var o in n)n.hasOwnProperty(o)&&(e.operateRegions[o]=Xr.fromGeometry(n[o]))}else"resultSetting"===r?e.dataReturnOption=t.resultSetting:e[r]=t[r]}}],(n=[{key:"destroy",value:function(){_c(Oc(e.prototype),"destroy",this).call(this);var t=this;if(t.operateDataset=null,t.operateDatasetFields=null,t.operateDatasetFilter&&(t.operateDatasetFilter.destroy(),t.operateDatasetFilter=null),t.operateRegions){for(var r=0,n=t.operateRegions,o=n.length;r<o;r++)n[r].destroy();t.operateRegions=null}t.sourceDataset=null,t.sourceDatasetFields=null,t.sourceDatasetFilter&&(t.sourceDatasetFilter.destroy(),t.sourceDatasetFilter=null),t.tolerance=null,t.resultSetting&&(t.resultSetting.destroy(),t.resultSetting=null)}}])&&gc(r.prototype,n),o&&gc(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function xc(t){"@babel/helpers - typeof";return(xc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Tc(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Cc(n.key),n)}}function Cc(t){var e=function(t,e){if("object"!=xc(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=xc(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==xc(e)?e:e+""}var kc=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.clipRegion=null,this.datumValue=0,this.expectedZValues=null,this.interval=0,this.resampleTolerance=0,this.smoothMethod=P.BSPLINE,this.smoothness=0,e&&Tt.extend(this,e),this.CLASS_NAME="SuperMap.SurfaceAnalystParametersSetting"},(e=[{key:"destroy",value:function(){var t=this;t.clipRegion&&(t.clipRegion.destroy(),t.clipRegion=null),t.datumValue=null,t.expectedZValues=null,t.interval=null,t.resampleTolerance=null,t.smoothMethod=null,t.smoothness=null}},{key:"toJSON",value:function(){var t="'datumValue':"+Tt.toJSON(this.datumValue);if(t+=",'interval':"+Tt.toJSON(this.interval),t+=",'resampleTolerance':"+Tt.toJSON(this.resampleTolerance),t+=",'smoothMethod':"+Tt.toJSON(this.smoothMethod),t+=",'smoothness':"+Tt.toJSON(this.smoothness),null!=this.expectedZValues&&(t+=",'expectedZValues':"+Tt.toJSON(this.expectedZValues)),null!=this.clipRegion){var e=this.clipRegion;this.clipRegion instanceof ht&&this.clipRegion.components&&(e=Xr.fromGeometry(this.clipRegion)),t+=",'clipRegion':"+Tt.toJSON(e)}return"{"+t+"}"}}])&&Tc(t.prototype,e),r&&Tc(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function Ac(t){"@babel/helpers - typeof";return(Ac="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function jc(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Nc(n.key),n)}}function Nc(t){var e=function(t,e){if("object"!=Ac(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Ac(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Ac(e)?e:e+""}var Ic=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.resolution=0,this.extractParameter=new kc,this.resultSetting=new ds,this.surfaceAnalystMethod=x.ISOLINE,e&&Tt.extend(this,e),this.CLASS_NAME="SuperMap.SurfaceAnalystParameters"},(e=[{key:"destroy",value:function(){var t=this;t.resolution=null,t.extractParameter&&(t.extractParameter.destroy(),t.extractParameter=null),t.resultSetting&&(t.resultSetting.destroy(),t.resultSetting=null),t.surfaceAnalystMethod=null}}])&&jc(t.prototype,e),r&&jc(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function Mc(t){"@babel/helpers - typeof";return(Mc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Rc(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Lc(n.key),n)}}function Lc(t){var e=function(t,e){if("object"!=Mc(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Mc(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Mc(e)?e:e+""}function Dc(t,e,r){return e=Fc(e),function(t,e){if(e&&("object"===Mc(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Fc(t).constructor):e.apply(t,r))}function Bc(){return(Bc="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Fc(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Fc(t){return(Fc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Uc(t,e){return(Uc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Gc=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=Dc(this,e,[t])).dataset=null,r.filterQueryParameter=new gs,r.zValueFieldName=null,t&&Tt.extend(r,t),r.CLASS_NAME="SuperMap.DatasetSurfaceAnalystParameters",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Uc(t,e)}(e,Ic),r=e,o=[{key:"toObject",value:function(t,e){for(var r in t)if("filterQueryParameter"===r&&(e.filterQueryParameter=t.filterQueryParameter),"extractParameter"===r)t.extractParameter.clipRegion instanceof ht&&t.extractParameter.clipRegion.components&&(t.extractParameter.clipRegion=Xr.fromGeometry(t.extractParameter.clipRegion)),e.extractParameter=t.extractParameter;else{if("dataset"===r)continue;if("surfaceAnalystMethod"===r)continue;e[r]=t[r]}}}],(n=[{key:"destroy",value:function(){Bc(Fc(e.prototype),"destroy",this).call(this);var t=this;t.dataset=null,t.filterQueryParameter&&(t.filterQueryParameter.destroy(),t.filterQueryParameter=null),t.zValueFieldName=null}}])&&Rc(r.prototype,n),o&&Rc(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function Vc(t){"@babel/helpers - typeof";return(Vc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function zc(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Hc(n.key),n)}}function Hc(t){var e=function(t,e){if("object"!=Vc(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Vc(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Vc(e)?e:e+""}var qc=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e&&(this.clipRegion=null,this.createResultDataset=!1,this.resultDatasetName=null,this.resultDatasourceName=null,this.returnResultRegion=!0,Tt.extend(this,e),this.CLASS_NAME="SuperMap.ThiessenAnalystParameters")},(e=[{key:"destroy",value:function(){var t=this;t.clipRegion&&(t.clipRegion.destroy(),t.clipRegion=null),t.createResultDataset=null,t.resultDatasetName=null,t.resultDatasourceName=null,t.returnResultRegion=null}}])&&zc(t.prototype,e),r&&zc(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function Jc(t){"@babel/helpers - typeof";return(Jc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Wc(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Kc(n.key),n)}}function Kc(t){var e=function(t,e){if("object"!=Jc(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Jc(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Jc(e)?e:e+""}function Yc(t,e,r){return e=Xc(e),function(t,e){if(e&&("object"===Jc(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Xc(t).constructor):e.apply(t,r))}function Qc(){return(Qc="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Xc(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Xc(t){return(Xc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Zc(t,e){return(Zc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var $c=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=Yc(this,e,[t])).filterQueryParameter=null,r.dataset=null,t&&Tt.extend(r,t),r.CLASS_NAME="SuperMap.DatasetThiessenAnalystParameters",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Zc(t,e)}(e,qc),r=e,o=[{key:"toObject",value:function(t,e){for(var r in t)"clipRegion"===r?e.clipRegion=Xr.fromGeometry(t.clipRegion):e[r]=t[r]}}],(n=[{key:"destroy",value:function(){Qc(Xc(e.prototype),"destroy",this).call(this);this.filterQueryParameter&&(this.filterQueryParameter.destroy(),this.filterQueryParameter=null)}}])&&Wc(r.prototype,n),o&&Wc(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function tf(t){"@babel/helpers - typeof";return(tf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ef(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,rf(n.key),n)}}function rf(t){var e=function(t,e){if("object"!=tf(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=tf(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==tf(e)?e:e+""}function nf(t,e,r){return e=af(e),function(t,e){if(e&&("object"===tf(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],af(t).constructor):e.apply(t,r))}function of(){return(of="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=af(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function af(t){return(af=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function sf(t,e){return(sf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var uf=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=nf(this,e,[t,r]),r&&Tt.extend(n,r),n.CLASS_NAME="SuperMap.DatasourceService",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&sf(t,e)}(e,Ki),r=e,(n=[{key:"destroy",value:function(){of(af(e.prototype),"destroy",this).call(this)}},{key:"getDatasourceService",value:function(t,e){var r=Tt.urlPathAppend(this.url,"datasources/name/".concat(t));return this.processAsync(r,"GET",e)}},{key:"getDatasourcesService",value:function(t){var e=Tt.urlPathAppend(this.url,"datasources");return this.processAsync(e,"GET",t)}},{key:"setDatasourceService",value:function(t,e){if(t){var r=Tt.urlPathAppend(this.url,"datasources/name/".concat(t.datasourceName));return this.processAsync(r,"PUT",e,t)}}},{key:"processAsync",value:function(t,e,r,n){var o={url:t,method:e,scope:this,success:r,failure:r};return n&&(o.data=Tt.toJSON(n)),this.request(o)}}])&&ef(r.prototype,n),o&&ef(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function lf(t){"@babel/helpers - typeof";return(lf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function cf(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ff(n.key),n)}}function ff(t){var e=function(t,e){if("object"!=lf(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=lf(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==lf(e)?e:e+""}var pf=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.dataset=null,this.bounds=null,this.fieldName=null,this.resultGridDatasetResolution=null,this.searchRadius=null,this.targetDatasource=null,this.resultGridName=null,this.deleteExistResultDataset=!1,Tt.extend(this,e),this.CLASS_NAME="SuperMap.DensityKernelAnalystParameters"},r=[{key:"toObject",value:function(t,e){for(var r in t)"dataset"!==r&&(e[r]=t[r])}}],(e=[{key:"destroy",value:function(){var t=this;t.dataset=null,t.bounds=null,t.fieldName=null,t.resultGridDatasetResolution=null,t.searchRadius=null,t.targetDatasource=null,t.resultGridName=null,t.deleteExistResultDataset=null}}])&&cf(t.prototype,e),r&&cf(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function hf(t){"@babel/helpers - typeof";return(hf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function yf(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,df(n.key),n)}}function df(t){var e=function(t,e){if("object"!=hf(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=hf(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==hf(e)?e:e+""}function vf(t,e,r){return e=bf(e),function(t,e){if(e&&("object"===hf(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],bf(t).constructor):e.apply(t,r))}function mf(){return(mf="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=bf(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function bf(t){return(bf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function gf(t,e){return(gf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Sf=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=vf(this,e,[t,r])).mode=null,r&&Tt.extend(n,r),n.CLASS_NAME="SuperMap.DensityAnalystService",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&gf(t,e)}(e,qa),r=e,(n=[{key:"destroy",value:function(){mf(bf(e.prototype),"destroy",this).call(this),this.mode=null}},{key:"processAsync",value:function(t,e){var r=this,n=new Object;t instanceof pf&&(r.url=Tt.urlPathAppend(r.url,"datasets/"+t.dataset+"/densityanalyst/kernel"),r.mode="kernel"),pf.toObject(t,n);var o=Tt.toJSON(n);return r.url=Tt.urlAppend(r.url,"returnContent=true"),r.request({method:"POST",data:o,scope:r,success:e,failure:e})}}])&&yf(r.prototype,n),o&&yf(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function wf(t){"@babel/helpers - typeof";return(wf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _f(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Of(n.key),n)}}function Of(t){var e=function(t,e){if("object"!=wf(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=wf(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==wf(e)?e:e+""}var Ef=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.dataSourceName=null,this.dataSetName=null,this.features=null,this.editType=C.ADD,this.IDs=null,this.returnContent=!1,this.isUseBatch=!1,Tt.extend(this,e),this.CLASS_NAME="SuperMap.EditFeaturesParameters"},r=[{key:"toJsonParameters",value:function(t){var e,r,n;if(t.editType===C.DELETE){if(null===t.IDs)return;n={ids:t.IDs}}else if(n=[],t.features){r=t.features.length;for(var o=0;o<r;o++)(e=t.features[o]).geometry=Xr.fromGeometry(e.geometry),n.push(e)}return Tt.toJSON(n)}}],(e=[{key:"destroy",value:function(){var t=this;t.dataSourceName=null,t.dataSetName=null,t.features=null,t.editType=null,t.IDs=null,t.returnContent=null}}])&&_f(t.prototype,e),r&&_f(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function Pf(t){"@babel/helpers - typeof";return(Pf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function xf(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Tf(n.key),n)}}function Tf(t){var e=function(t,e){if("object"!=Pf(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Pf(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Pf(e)?e:e+""}function Cf(t,e,r){return e=Af(e),function(t,e){if(e&&("object"===Pf(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Af(t).constructor):e.apply(t,r))}function kf(){return(kf="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Af(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Af(t){return(Af=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function jf(t,e){return(jf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Nf=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Cf(this,e,[t,r])).returnContent=!1,n.isUseBatch=!1,r&&Tt.extend(n,r),n.url=Tt.urlPathAppend(n.url,"features"),n.CLASS_NAME="SuperMap.EditFeaturesService",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&jf(t,e)}(e,Ki),r=e,(n=[{key:"destroy",value:function(){kf(Af(e.prototype),"destroy",this).call(this);this.returnContent=null,this.isUseBatch=null,this.fromIndex=null,this.toIndex=null}},{key:"processAsync",value:function(t,e){if(t instanceof Ef){var r=this,n="POST",o="",i=t.editType,a=null;if(r.returnContent=t.returnContent,r.isUseBatch=t.isUseBatch,a=Ef.toJsonParameters(t),i===C.DELETE){a=o=Tt.toJSON(t.IDs);var s=Tt.urlAppend(r.url,Tt.getParameterString({ids:o}));co.urlIsLong(s)?(r.url=Tt.urlAppend(r.url,Tt.getParameterString({_method:"DELETE"})),n="POST"):(r.url=s,n="DELETE")}else i===C.UPDATE?n="PUT":(r.isUseBatch&&(r.url=Tt.urlAppend(r.url,"isUseBatch=".concat(r.isUseBatch)),r.returnContent=!1),r.returnContent&&(r.url=Tt.urlAppend(r.url,"returnContent=true"),n="POST"));return r.request({method:n,data:a,scope:r,success:e,failure:e})}}},{key:"getMetaData",value:function(t,e){var r=t.featureId;return this.url=Tt.urlPathAppend(this.url,r+"/metadata"),this.request({method:"GET",data:null,scope:this,success:e,failure:e})}}])&&xf(r.prototype,n),o&&xf(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function If(t){"@babel/helpers - typeof";return(If="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Mf(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Rf(n.key),n)}}function Rf(t){var e=function(t,e){if("object"!=If(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=If(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==If(e)?e:e+""}function Lf(t,e,r){return e=Df(e),function(t,e){if(e&&("object"===If(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Df(t).constructor):e.apply(t,r))}function Df(t){return(Df=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Bf(t,e){return(Bf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Ff=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=Lf(this,e,[t])).file=null,r.IDs=null,r.editType=C.ADD,Tt.extend(r,t),r.CLASS_NAME="SuperMap.EditAttachmentsParameters",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Bf(t,e)}(e,ba),r=e,(n=[{key:"destroy",value:function(){var t=this;t.dataSourceName=null,t.dataSetName=null,t.featureId=null,t.file=null,t.IDs=null,t.editType=null}}])&&Mf(r.prototype,n),o&&Mf(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function Uf(t){"@babel/helpers - typeof";return(Uf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Gf(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Vf(n.key),n)}}function Vf(t){var e=function(t,e){if("object"!=Uf(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Uf(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Uf(e)?e:e+""}var zf=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.edgeID=null,this.nodeID=null,this.weightName=null,this.isUncertainDirectionValid=!1,Tt.extend(this,e),this.CLASS_NAME="SuperMap.FacilityAnalyst3DParameters"},(e=[{key:"destroy",value:function(){this.edgeID=null,this.nodeID=null,this.weightName=null,this.isUncertainDirectionValid=null}}])&&Gf(t.prototype,e),r&&Gf(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function Hf(t){"@babel/helpers - typeof";return(Hf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function qf(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Jf(n.key),n)}}function Jf(t){var e=function(t,e){if("object"!=Hf(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Hf(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Hf(e)?e:e+""}function Wf(t,e,r){return e=Yf(e),function(t,e){if(e&&("object"===Hf(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Yf(t).constructor):e.apply(t,r))}function Kf(){return(Kf="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Yf(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Yf(t){return(Yf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Qf(t,e){return(Qf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Xf=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=Wf(this,e,[t])).CLASS_NAME="SuperMap.FacilityAnalystSinks3DParameters",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Qf(t,e)}(e,zf),r=e,(n=[{key:"destroy",value:function(){Kf(Yf(e.prototype),"destroy",this).call(this)}}])&&qf(r.prototype,n),o&&qf(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function Zf(t){"@babel/helpers - typeof";return(Zf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function $f(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,tp(n.key),n)}}function tp(t){var e=function(t,e){if("object"!=Zf(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Zf(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Zf(e)?e:e+""}function ep(t,e,r){return e=rp(e),function(t,e){if(e&&("object"===Zf(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],rp(t).constructor):e.apply(t,r))}function rp(t){return(rp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function np(t,e){return(np=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var op=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=ep(this,e,[t,r])).CLASS_NAME="SuperMap.FacilityAnalystSinks3DService",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&np(t,e)}(e,Ki),r=e,(n=[{key:"destroy",value:function(){Ki.prototype.destroy.apply(this,arguments)}},{key:"processAsync",value:function(t,e){if(t instanceof Xf){var r;return this.url=Tt.urlPathAppend(this.url,"sinks"),r={edgeID:t.edgeID,nodeID:t.nodeID,weightName:t.weightName,isUncertainDirectionValid:t.isUncertainDirectionValid},this.request({method:"GET",params:r,scope:this,success:e,failure:e})}}}])&&$f(r.prototype,n),o&&$f(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function ip(t){"@babel/helpers - typeof";return(ip="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ap(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,sp(n.key),n)}}function sp(t){var e=function(t,e){if("object"!=ip(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=ip(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ip(e)?e:e+""}function up(t,e,r){return e=cp(e),function(t,e){if(e&&("object"===ip(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],cp(t).constructor):e.apply(t,r))}function lp(){return(lp="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=cp(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function cp(t){return(cp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function fp(t,e){return(fp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var pp=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=up(this,e,[t])).CLASS_NAME="SuperMap.FacilityAnalystSources3DParameters",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&fp(t,e)}(e,zf),r=e,(n=[{key:"destroy",value:function(){lp(cp(e.prototype),"destroy",this).call(this)}}])&&ap(r.prototype,n),o&&ap(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function hp(t){"@babel/helpers - typeof";return(hp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function yp(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,dp(n.key),n)}}function dp(t){var e=function(t,e){if("object"!=hp(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=hp(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==hp(e)?e:e+""}function vp(t,e,r){return e=bp(e),function(t,e){if(e&&("object"===hp(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],bp(t).constructor):e.apply(t,r))}function mp(){return(mp="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=bp(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function bp(t){return(bp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function gp(t,e){return(gp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Sp=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=vp(this,e,[t,r])).CLASS_NAME="SuperMap.FacilityAnalystSources3DService",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&gp(t,e)}(e,Ki),r=e,(n=[{key:"destroy",value:function(){mp(bp(e.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){if(t instanceof pp){var r;return this.url=Tt.urlPathAppend(this.url,"sources"),r={edgeID:t.edgeID,nodeID:t.nodeID,weightName:t.weightName,isUncertainDirectionValid:t.isUncertainDirectionValid},this.request({method:"GET",params:r,scope:this,success:e,failure:e})}}}])&&yp(r.prototype,n),o&&yp(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function wp(t){"@babel/helpers - typeof";return(wp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _p(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Op(n.key),n)}}function Op(t){var e=function(t,e){if("object"!=wp(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=wp(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==wp(e)?e:e+""}var Ep=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.sourceNodeIDs=null,this.edgeID=null,this.nodeID=null,this.returnFeatures=!0,this.isUncertainDirectionValid=!1,this.queryType=null,Tt.extend(this,e),this.CLASS_NAME="SuperMap.FacilityAnalystStreamParameters"},(e=[{key:"destroy",value:function(){var t=this;t.edgeID=null,t.nodeID=null,t.weightName=null,t.returnFeatures=null,t.isUncertainDirectionValid=null,t.type=null}}])&&_p(t.prototype,e),r&&_p(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function Pp(t){"@babel/helpers - typeof";return(Pp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function xp(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Tp(n.key),n)}}function Tp(t){var e=function(t,e){if("object"!=Pp(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Pp(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Pp(e)?e:e+""}function Cp(t,e,r){return e=Ap(e),function(t,e){if(e&&("object"===Pp(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Ap(t).constructor):e.apply(t,r))}function kp(){return(kp="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ap(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Ap(t){return(Ap=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function jp(t,e){return(jp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Np=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Cp(this,e,[t,r])).CLASS_NAME="SuperMap.FacilityAnalystStreamService",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&jp(t,e)}(e,Iu),r=e,(n=[{key:"destroy",value:function(){kp(Ap(e.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){if(t instanceof Ep){var r,n=this;if(0===t.queryType)n.url=Tt.urlPathAppend(n.url,"upstreamcirticalfaclilities");else{if(1!==t.queryType)return;n.url=Tt.urlPathAppend(n.url,"downstreamcirticalfaclilities")}if(r={sourceNodeIDs:t.sourceNodeIDs,isUncertainDirectionValid:t.isUncertainDirectionValid,returnFeatures:t.returnFeatures},!(null!==t.edgeID&&null!==t.nodeID||null===t.edgeID&&null===t.nodeID))return null!==t.edgeID?r.edgeID=t.edgeID:r.nodeID=t.nodeID,n.request({method:"GET",params:r,scope:n,success:e,failure:e})}}},{key:"toGeoJSONResult",value:function(t){if(!t)return null;var e=new Ln;return t.edgesFeatures&&(t.edgesFeatures=e.toGeoJSON(t.edgesFeatures)),t.nodesFeatures&&(t.nodesFeatures=e.toGeoJSON(t.nodesFeatures)),t}}])&&xp(r.prototype,n),o&&xp(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function Ip(t){"@babel/helpers - typeof";return(Ip="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Mp(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Rp(n.key),n)}}function Rp(t){var e=function(t,e){if("object"!=Ip(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Ip(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Ip(e)?e:e+""}function Lp(t,e,r){return e=Bp(e),function(t,e){if(e&&("object"===Ip(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Bp(t).constructor):e.apply(t,r))}function Dp(){return(Dp="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Bp(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Bp(t){return(Bp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Fp(t,e){return(Fp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Up=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=Lp(this,e,[t])).CLASS_NAME="SuperMap.FacilityAnalystTracedown3DParameters",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Fp(t,e)}(e,zf),r=e,(n=[{key:"destroy",value:function(){Dp(Bp(e.prototype),"destroy",this).call(this)}}])&&Mp(r.prototype,n),o&&Mp(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function Gp(t){"@babel/helpers - typeof";return(Gp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Vp(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,zp(n.key),n)}}function zp(t){var e=function(t,e){if("object"!=Gp(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Gp(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Gp(e)?e:e+""}function Hp(t,e,r){return e=Jp(e),function(t,e){if(e&&("object"===Gp(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Jp(t).constructor):e.apply(t,r))}function qp(){return(qp="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Jp(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Jp(t){return(Jp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Wp(t,e){return(Wp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Kp=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Hp(this,e,[t,r])).CLASS_NAME="SuperMap.FacilityAnalystTracedown3DService",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Wp(t,e)}(e,Ki),r=e,(n=[{key:"destroy",value:function(){qp(Jp(e.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){if(t instanceof Up){var r;return this.url=Tt.urlPathAppend(this.url,"tracedownresult"),r={edgeID:t.edgeID,nodeID:t.nodeID,weightName:t.weightName,isUncertainDirectionValid:t.isUncertainDirectionValid},this.request({method:"GET",params:r,scope:this,success:e,failure:e})}}}])&&Vp(r.prototype,n),o&&Vp(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function Yp(t){"@babel/helpers - typeof";return(Yp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Qp(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Xp(n.key),n)}}function Xp(t){var e=function(t,e){if("object"!=Yp(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Yp(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Yp(e)?e:e+""}function Zp(t,e,r){return e=th(e),function(t,e){if(e&&("object"===Yp(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],th(t).constructor):e.apply(t,r))}function $p(){return($p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=th(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function th(t){return(th=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function eh(t,e){return(eh=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var rh=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=Zp(this,e,[t])).CLASS_NAME="SuperMap.FacilityAnalystTraceup3DParameters",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&eh(t,e)}(e,zf),r=e,(n=[{key:"destroy",value:function(){$p(th(e.prototype),"destroy",this).call(this)}}])&&Qp(r.prototype,n),o&&Qp(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function nh(t){"@babel/helpers - typeof";return(nh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function oh(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ih(n.key),n)}}function ih(t){var e=function(t,e){if("object"!=nh(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=nh(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==nh(e)?e:e+""}function ah(t,e,r){return e=uh(e),function(t,e){if(e&&("object"===nh(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],uh(t).constructor):e.apply(t,r))}function sh(){return(sh="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=uh(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function uh(t){return(uh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function lh(t,e){return(lh=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var ch=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=ah(this,e,[t,r])).CLASS_NAME="SuperMap.FacilityAnalystTraceup3DService",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&lh(t,e)}(e,Ki),r=e,(n=[{key:"destroy",value:function(){sh(uh(e.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){if(t instanceof rh){var r;return this.url=Tt.urlPathAppend(this.url,"traceupresult"),r={edgeID:t.edgeID,nodeID:t.nodeID,weightName:t.weightName,isUncertainDirectionValid:t.isUncertainDirectionValid},this.request({method:"GET",params:r,scope:this,success:e,failure:e})}}}])&&oh(r.prototype,n),o&&oh(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function fh(t){"@babel/helpers - typeof";return(fh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ph(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,hh(n.key),n)}}function hh(t){var e=function(t,e){if("object"!=fh(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=fh(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==fh(e)?e:e+""}function yh(t,e,r){return e=vh(e),function(t,e){if(e&&("object"===fh(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],vh(t).constructor):e.apply(t,r))}function dh(){return(dh="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=vh(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function vh(t){return(vh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function mh(t,e){return(mh=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var bh=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r=yh(this,e,[t]),t=t||{},r.sourceNodeIDs=null,Tt.extend(r,t),r.CLASS_NAME="SuperMap.FacilityAnalystUpstream3DParameters",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&mh(t,e)}(e,zf),r=e,(n=[{key:"destroy",value:function(){dh(vh(e.prototype),"destroy",this).call(this),this.sourceNodeIDs=null}}])&&ph(r.prototype,n),o&&ph(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function gh(t){"@babel/helpers - typeof";return(gh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Sh(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,wh(n.key),n)}}function wh(t){var e=function(t,e){if("object"!=gh(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=gh(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==gh(e)?e:e+""}function _h(t,e,r){return e=Eh(e),function(t,e){if(e&&("object"===gh(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Eh(t).constructor):e.apply(t,r))}function Oh(){return(Oh="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Eh(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Eh(t){return(Eh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ph(t,e){return(Ph=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var xh=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=_h(this,e,[t,r])).CLASS_NAME="SuperMap.FacilityAnalystUpstream3DService",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ph(t,e)}(e,Ki),r=e,(n=[{key:"destroy",value:function(){Oh(Eh(e.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){if(t instanceof bh){var r;return this.url=Tt.urlPathAppend(this.url,"upstreamcirticalfaclilities"),r={sourceNodeIDs:t.sourceNodeIDs,edgeID:t.edgeID,nodeID:t.nodeID,isUncertainDirectionValid:t.isUncertainDirectionValid},this.request({method:"GET",params:r,scope:this,success:e,failure:e})}}}])&&Sh(r.prototype,n),o&&Sh(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function Th(t){"@babel/helpers - typeof";return(Th="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ch(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,kh(n.key),n)}}function kh(t){var e=function(t,e){if("object"!=Th(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Th(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Th(e)?e:e+""}function Ah(t,e,r){return e=Nh(e),function(t,e){if(e&&("object"===Th(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Nh(t).constructor):e.apply(t,r))}function jh(){return(jh="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Nh(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Nh(t){return(Nh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ih(t,e){return(Ih=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Mh=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=Ah(this,e,[t,r]),r&&Tt.extend(n,r),n.CLASS_NAME="SuperMap.FeatureAttachmentsService",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ih(t,e)}(e,Ki),r=e,(n=[{key:"destroy",value:function(){jh(Nh(e.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){if(t instanceof Ff){Tt.extend(this,t);var r=this,n=t.editType;if(r.featureId=t.featureId,r.IDs=t.IDs,n===C.DELETE){if(!r.IDs||Array.isArray(r.IDs)&&0===r.IDs.length)return;r.method="DELETE";for(var o=[],i=0;i<r.IDs.length;i++){var a=Tt.urlPathAppend(r.url,"/features/".concat(r.featureId,"/attachments/").concat(r.IDs[i])),s=r.request({url:a,method:r.method,data:null,scope:r,success:null,failure:null});o.push(s)}return Promise.all(o).then(function(t){return e&&e(t),t})}if(t.file&&(t.file instanceof File||t.file instanceof Blob)){var u=new FormData;return u.append("file",t.file),r.method="POST",r.url=Tt.urlPathAppend(r.url,"/features/".concat(r.featureId,"/attachments")),r.request({method:r.method,data:u,scope:r,success:e,failure:e})}}}},{key:"getAttachments",value:function(t,e){if(t instanceof ba){Tt.extend(this,t);var r=this;return r.method="GET",r.featureId=t.featureId,r.url=Tt.urlPathAppend(r.url,"/features/".concat(r.featureId,"/attachments")),r.request({method:r.method,data:null,scope:r,success:e,failure:e})}}}])&&Ch(r.prototype,n),o&&Ch(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function Rh(t){"@babel/helpers - typeof";return(Rh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Lh(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Dh(n.key),n)}}function Dh(t){var e=function(t,e){if("object"!=Rh(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Rh(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Rh(e)?e:e+""}var Bh=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.datasource=null,this.dataset=null,e&&Tt.extend(this,e),this.CLASS_NAME="SuperMap.FieldParameters"},(e=[{key:"destroy",value:function(){this.datasource=null,this.dataset=null}}])&&Lh(t.prototype,e),r&&Lh(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function Fh(t){"@babel/helpers - typeof";return(Fh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Uh(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Gh(n.key),n)}}function Gh(t){var e=function(t,e){if("object"!=Fh(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Fh(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Fh(e)?e:e+""}function Vh(t,e,r){return e=zh(e),function(t,e){if(e&&("object"===Fh(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],zh(t).constructor):e.apply(t,r))}function zh(t){return(zh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Hh(t,e){return(Hh=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var qh=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=Vh(this,e,[t])).fieldName=null,r.statisticMode=null,t&&Tt.extend(r,t),r.CLASS_NAME="SuperMap.FieldStatisticsParameters",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Hh(t,e)}(e,Bh),r=e,(n=[{key:"destroy",value:function(){this.fieldName=null,this.statisticMode=null}}])&&Uh(r.prototype,n),o&&Uh(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function Jh(t){"@babel/helpers - typeof";return(Jh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Wh(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Kh(n.key),n)}}function Kh(t){var e=function(t,e){if("object"!=Jh(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Jh(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Jh(e)?e:e+""}function Yh(t,e,r){return e=Xh(e),function(t,e){if(e&&("object"===Jh(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Xh(t).constructor):e.apply(t,r))}function Qh(){return(Qh="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Xh(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Xh(t){return(Xh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Zh(t,e){return(Zh=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var $h=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Yh(this,e,[t,r])).datasource=null,n.dataset=null,n.field=null,n.statisticMode=null,r&&Tt.extend(n,r),n.CLASS_NAME="SuperMap.FieldStatisticService",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Zh(t,e)}(e,Ki),r=e,(n=[{key:"destroy",value:function(){Qh(Xh(e.prototype),"destroy",this).call(this);this.datasource=null,this.dataset=null,this.field=null,this.statisticMode=null}},{key:"processAsync",value:function(t){var e=this,r="datasources/"+e.datasource+"/datasets/"+e.dataset+"/fields/"+e.field+"/"+e.statisticMode;return e.url=Tt.urlPathAppend(e.url,r),e.request({method:"GET",data:null,scope:e,success:t,failure:t})}}])&&Wh(r.prototype,n),o&&Wh(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function ty(t){"@babel/helpers - typeof";return(ty="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ey(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ry(n.key),n)}}function ry(t){var e=function(t,e){if("object"!=ty(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=ty(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ty(e)?e:e+""}var ny=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.event=null,this.expectFacilityCount=1,this.facilities=null,this.fromEvent=!1,this.isAnalyzeById=!1,this.maxWeight=0,this.parameter=new Hl,Tt.extend(this,e),this.CLASS_NAME="SuperMap.FindClosestFacilitiesParameters"},(e=[{key:"destroy",value:function(){var t=this;t.event=null,t.expectFacilityCount=null,t.facilities=null,t.fromEvent=null,t.isAnalyzeById=null,t.maxWeight=null,t.parameter&&(t.parameter.destroy(),t.parameter=null)}}])&&ey(t.prototype,e),r&&ey(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function oy(t){"@babel/helpers - typeof";return(oy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function iy(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ay(n.key),n)}}function ay(t){var e=function(t,e){if("object"!=oy(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=oy(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==oy(e)?e:e+""}function sy(t,e,r){return e=ly(e),function(t,e){if(e&&("object"===oy(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],ly(t).constructor):e.apply(t,r))}function uy(){return(uy="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ly(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function ly(t){return(ly=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function cy(t,e){return(cy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var fy=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=sy(this,e,[t,r])).CLASS_NAME="SuperMap.FindClosestFacilitiesService",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&cy(t,e)}(e,Iu),r=e,(n=[{key:"destroy",value:function(){uy(ly(e.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){if(t instanceof ny){var r,n=this;return n.url=Tt.urlPathAppend(n.url,"closestfacility"),r={expectFacilityCount:t.expectFacilityCount,fromEvent:t.fromEvent,maxWeight:t.maxWeight,parameter:Tt.toJSON(t.parameter),event:Tt.toJSON(t.event),facilities:n.getJson(t.isAnalyzeById,t.facilities)},n.request({method:"GET",params:r,scope:n,success:e,failure:e})}}},{key:"getJson",value:function(t,e){var r="[",n=e?e.length:0;if(!1===t)for(var o=0;o<n;o++)o>0&&(r+=","),r+='{"x":'+e[o].x+',"y":'+e[o].y+"}";else if(!0===t)for(var i=0;i<n;i++)i>0&&(r+=","),r+=e[i];return r+="]"}},{key:"toGeoJSONResult",value:function(t){if(!t||!t.facilityPathList)return t;var e=new Ln;return t.facilityPathList.map(function(t){return t.route&&(t.route=e.toGeoJSON(t.route)),t.pathGuideItems&&(t.pathGuideItems=e.toGeoJSON(t.pathGuideItems)),t.edgeFeatures&&(t.edgeFeatures=e.toGeoJSON(t.edgeFeatures)),t.nodeFeatures&&(t.nodeFeatures=e.toGeoJSON(t.nodeFeatures)),t}),t}}])&&iy(r.prototype,n),o&&iy(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function py(t){"@babel/helpers - typeof";return(py="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function hy(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,yy(n.key),n)}}function yy(t){var e=function(t,e){if("object"!=py(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=py(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==py(e)?e:e+""}var dy=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.expectedSupplyCenterCount=null,this.isFromCenter=!1,this.supplyCenters=null,this.turnWeightField=null,this.weightName=null,Tt.extend(this,e),this.CLASS_NAME="SuperMap.FindLocationParameters"},(e=[{key:"destroy",value:function(){var t=this;if(t.expectedSupplyCenterCount=null,t.isFromCenter=null,t.turnWeightField=null,t.weightName=null,t.supplyCenters){for(var e=0,r=t.supplyCenters,n=r.length;e<n;e++)r[e].destroy();t.supplyCenters=null}}}])&&hy(t.prototype,e),r&&hy(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function vy(t){"@babel/helpers - typeof";return(vy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function my(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,by(n.key),n)}}function by(t){var e=function(t,e){if("object"!=vy(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=vy(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==vy(e)?e:e+""}function gy(t,e,r){return e=wy(e),function(t,e){if(e&&("object"===vy(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],wy(t).constructor):e.apply(t,r))}function Sy(){return(Sy="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=wy(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function wy(t){return(wy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _y(t,e){return(_y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Oy=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=gy(this,e,[t,r])).CLASS_NAME="SuperMap.FindLocationService",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_y(t,e)}(e,Iu),r=e,(n=[{key:"destroy",value:function(){Sy(wy(e.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){if(t instanceof dy){var r,n=this;return n.url=Tt.urlPathAppend(n.url,"location"),r={isFromCenter:t.isFromCenter,expectedSupplyCenterCount:t.expectedSupplyCenterCount,weightName:t.weightName,turnWeightField:t.turnWeightField,returnEdgeFeature:!0,returnEdgeGeometry:!0,returnNodeFeature:!0,mapParameter:Tt.toJSON(t.mapParameter),supplyCenters:n.getCentersJson(t.supplyCenters)},n.request({method:"GET",params:r,scope:n,success:e,failure:e})}}},{key:"getCentersJson",value:function(t){for(var e="[",r=t?t.length:0,n=0;n<r;n++)n>0&&(e+=","),e+=Tt.toJSON(t[n]);return e+="]"}},{key:"toGeoJSONResult",value:function(t){if(!t)return null;var e=new Ln;return t.demandResults&&(t.demandResults=e.toGeoJSON(t.demandResults)),t.supplyResults&&(t.supplyResults=e.toGeoJSON(t.supplyResults)),t}}])&&my(r.prototype,n),o&&my(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function Ey(t){"@babel/helpers - typeof";return(Ey="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Py(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,xy(n.key),n)}}function xy(t){var e=function(t,e){if("object"!=Ey(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Ey(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Ey(e)?e:e+""}var Ty=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.centers=null,this.hasLeastTotalCost=!1,this.isAnalyzeById=!1,this.nodes=null,this.parameter=new Hl,Tt.extend(this,e),this.CLASS_NAME="SuperMap.FindMTSPPathsParameters"},(e=[{key:"destroy",value:function(){var t=this;t.centers=null,t.hasLeastTotalCost=null,t.isAnalyzeById=null,t.nodes=null,t.maxWeight=null,t.parameter&&(t.parameter.destroy(),t.parameter=null)}}])&&Py(t.prototype,e),r&&Py(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function Cy(t){"@babel/helpers - typeof";return(Cy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ky(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ay(n.key),n)}}function Ay(t){var e=function(t,e){if("object"!=Cy(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Cy(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Cy(e)?e:e+""}function jy(t,e,r){return e=Iy(e),function(t,e){if(e&&("object"===Cy(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Iy(t).constructor):e.apply(t,r))}function Ny(){return(Ny="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Iy(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Iy(t){return(Iy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function My(t,e){return(My=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Ry=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=jy(this,e,[t,r])).CLASS_NAME="SuperMap.FindMTSPPathsService",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&My(t,e)}(e,Iu),r=e,(n=[{key:"destroy",value:function(){Ny(Iy(e.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){if(t instanceof Ty){var r,n=this,o=n.getJson(t.isAnalyzeById,t.centers),i=n.getJson(t.isAnalyzeById,t.nodes);return n.url=Tt.urlPathAppend(n.url,"mtsppath"),r={centers:o,nodes:i,parameter:Tt.toJSON(t.parameter),hasLeastTotalCost:t.hasLeastTotalCost},n.request({method:"GET",params:r,scope:n,success:e,failure:e})}}},{key:"getJson",value:function(t,e){var r="[",n=e?e.length:0;if(!1===t)for(var o=0;o<n;o++)o>0&&(r+=","),r+='{"x":'+e[o].x+',"y":'+e[o].y+"}";else if(!0===t)for(var i=0;i<n;i++)i>0&&(r+=","),r+=e[i];return r+="]"}},{key:"toGeoJSONResult",value:function(t){if(!t||!t.pathList)return null;var e=new Ln;return t.pathList.map(function(t){return t.route&&(t.route=e.toGeoJSON(t.route)),t.pathGuideItems&&(t.pathGuideItems=e.toGeoJSON(t.pathGuideItems)),t.edgeFeatures&&(t.edgeFeatures=e.toGeoJSON(t.edgeFeatures)),t.nodeFeatures&&(t.nodeFeatures=e.toGeoJSON(t.nodeFeatures)),t}),t}}])&&ky(r.prototype,n),o&&ky(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function Ly(t){"@babel/helpers - typeof";return(Ly="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Dy(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,By(n.key),n)}}function By(t){var e=function(t,e){if("object"!=Ly(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Ly(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Ly(e)?e:e+""}var Fy=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.isAnalyzeById=!1,this.hasLeastEdgeCount=null,this.nodes=null,this.parameter=new Hl,Tt.extend(this,e),this.CLASS_NAME="SuperMap.FindPathParameters"},(e=[{key:"destroy",value:function(){var t=this;t.isAnalyzeById=null,t.hasLeastEdgeCount=null,t.nodes=null,t.parameter&&(t.parameter.destroy(),t.parameter=null)}}])&&Dy(t.prototype,e),r&&Dy(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function Uy(t){"@babel/helpers - typeof";return(Uy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Gy(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Vy(n.key),n)}}function Vy(t){var e=function(t,e){if("object"!=Uy(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Uy(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Uy(e)?e:e+""}function zy(t,e,r){return e=qy(e),function(t,e){if(e&&("object"===Uy(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],qy(t).constructor):e.apply(t,r))}function Hy(){return(Hy="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=qy(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function qy(t){return(qy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Jy(t,e){return(Jy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Wy=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=zy(this,e,[t,r])).CLASS_NAME="SuperMap.FindPathService",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Jy(t,e)}(e,Iu),r=e,(n=[{key:"destroy",value:function(){Hy(qy(e.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){if(t instanceof Fy){var r,n=this;return n.url=Tt.urlPathAppend(n.url,"path"),r={hasLeastEdgeCount:t.hasLeastEdgeCount,parameter:Tt.toJSON(t.parameter),nodes:n.getJson(t.isAnalyzeById,t.nodes)},n.request({method:"GET",params:r,scope:n,success:e,failure:e})}}},{key:"getJson",value:function(t,e){var r="[",n=e?e.length:0;if(!1===t)for(var o=0;o<n;o++)o>0&&(r+=","),r+='{"x":'+e[o].x+',"y":'+e[o].y+"}";else if(!0===t)for(var i=0;i<n;i++)i>0&&(r+=","),r+=e[i];return r+="]"}},{key:"toGeoJSONResult",value:function(t){if(!t||!t.pathList||t.pathList.length<1)return null;var e=new Ln;return t.pathList.forEach(function(t){t.route&&(t.route=e.toGeoJSON(t.route)),t.pathGuideItems&&(t.pathGuideItems=e.toGeoJSON(t.pathGuideItems)),t.edgeFeatures&&(t.edgeFeatures=e.toGeoJSON(t.edgeFeatures)),t.nodeFeatures&&(t.nodeFeatures=e.toGeoJSON(t.nodeFeatures))}),t}}])&&Gy(r.prototype,n),o&&Gy(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function Ky(t){"@babel/helpers - typeof";return(Ky="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Yy(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Qy(n.key),n)}}function Qy(t){var e=function(t,e){if("object"!=Ky(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Ky(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Ky(e)?e:e+""}var Xy=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.isAnalyzeById=!1,this.isCenterMutuallyExclusive=!1,this.centers=null,this.isFromCenter=!1,this.isReturnComplexArea=!1,this.serviceBufferRadius=100,this.weights=null,this.parameter=new Hl,Tt.extend(this,e),this.CLASS_NAME="SuperMap.FindServiceAreasParameters"},(e=[{key:"destroy",value:function(){var t=this;t.isAnalyzeById=null,t.isCenterMutuallyExclusive=null,t.centers=null,t.isFromCenter=null,t.weights=null,t.parameter&&(t.parameter.destroy(),t.parameter=null)}}])&&Yy(t.prototype,e),r&&Yy(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function Zy(t){"@babel/helpers - typeof";return(Zy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function $y(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,td(n.key),n)}}function td(t){var e=function(t,e){if("object"!=Zy(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Zy(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Zy(e)?e:e+""}function ed(t,e,r){return e=nd(e),function(t,e){if(e&&("object"===Zy(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],nd(t).constructor):e.apply(t,r))}function rd(){return(rd="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=nd(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function nd(t){return(nd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function od(t,e){return(od=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var id=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=ed(this,e,[t,r])).CLASS_NAME="SuperMap.FindServiceAreasService",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&od(t,e)}(e,Iu),r=e,(n=[{key:"destroy",value:function(){rd(nd(e.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){if(t instanceof Xy){var r,n=this;return n.url=Tt.urlPathAppend(n.url,"servicearea"),r={isReturnComplexArea:t.isReturnComplexArea,serviceBufferRadius:t.serviceBufferRadius,isFromCenter:t.isFromCenter,isCenterMutuallyExclusive:t.isCenterMutuallyExclusive,parameter:Tt.toJSON(t.parameter),centers:n.getJson(t.isAnalyzeById,t.centers),weights:n.getJson(!0,t.weights)},n.request({method:"GET",params:r,scope:n,success:e,failure:e})}}},{key:"getJson",value:function(t,e){var r="[",n=e?e.length:0;if(!1===t)for(var o=0;o<n;o++)o>0&&(r+=","),r+='{"x":'+e[o].x+',"y":'+e[o].y+"}";else if(!0===t)for(var i=0;i<n;i++)i>0&&(r+=","),r+=e[i];return r+="]"}},{key:"toGeoJSONResult",value:function(t){if(!t||!t.serviceAreaList)return t;var e=new Ln;return t.serviceAreaList.map(function(t){return t.serviceRegion&&(t.serviceRegion=e.toGeoJSON(t.serviceRegion)),t.edgeFeatures&&(t.edgeFeatures=e.toGeoJSON(t.edgeFeatures)),t.nodeFeatures&&(t.nodeFeatures=e.toGeoJSON(t.nodeFeatures)),t.routes&&(t.routes=e.toGeoJSON(t.routes)),t}),t}}])&&$y(r.prototype,n),o&&$y(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function ad(t){"@babel/helpers - typeof";return(ad="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function sd(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ud(n.key),n)}}function ud(t){var e=function(t,e){if("object"!=ad(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=ad(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ad(e)?e:e+""}var ld=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.endNodeAssigned=!1,this.isAnalyzeById=!1,this.nodes=null,this.parameter=new Hl,Tt.extend(this,e),this.CLASS_NAME="SuperMap.FindTSPPathsParameters"},(e=[{key:"destroy",value:function(){var t=this;t.endNodeAssigned=null,t.isAnalyzeById=null,t.nodes=null,t.parameter&&(t.parameter.destroy(),t.parameter=null)}}])&&sd(t.prototype,e),r&&sd(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function cd(t){"@babel/helpers - typeof";return(cd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function fd(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,pd(n.key),n)}}function pd(t){var e=function(t,e){if("object"!=cd(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=cd(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==cd(e)?e:e+""}function hd(t,e,r){return e=dd(e),function(t,e){if(e&&("object"===cd(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],dd(t).constructor):e.apply(t,r))}function yd(){return(yd="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=dd(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function dd(t){return(dd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function vd(t,e){return(vd=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var md=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=hd(this,e,[t,r])).CLASS_NAME="SuperMap.FindTSPPathsService",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&vd(t,e)}(e,Iu),r=e,(n=[{key:"destroy",value:function(){yd(dd(e.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){if(t instanceof ld){var r,n=this;return n.url=Tt.urlPathAppend(n.url,"tsppath"),r={parameter:Tt.toJSON(t.parameter),endNodeAssigned:t.endNodeAssigned,nodes:n.getNodesJson(t)},n.request({method:"GET",params:r,scope:n,success:e,failure:e})}}},{key:"getNodesJson",value:function(t){var e,r,n,o,i="";if(!1===t.isAnalyzeById){for(e="[",r=0,n=(o=t.nodes).length;r<n;r++)r>0&&(e+=","),e+='{"x":'+o[r].x+',"y":'+o[r].y+"}";i+=e+="]"}else if(!0===t.isAnalyzeById){for(var a="[",s=t.nodes,u=s.length,l=0;l<u;l++)l>0&&(a+=","),a+=s[l];i+=a+="]"}return i}},{key:"toGeoJSONResult",value:function(t){if(!t||!t.tspPathList)return null;var e=new Ln;return t.tspPathList.forEach(function(t){t.route&&(t.route=e.toGeoJSON(t.route)),t.pathGuideItems&&(t.pathGuideItems=e.toGeoJSON(t.pathGuideItems)),t.edgeFeatures&&(t.edgeFeatures=e.toGeoJSON(t.edgeFeatures)),t.nodeFeatures&&(t.nodeFeatures=e.toGeoJSON(t.nodeFeatures))}),t}}])&&fd(r.prototype,n),o&&fd(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function bd(t){"@babel/helpers - typeof";return(bd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function gd(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Sd(n.key),n)}}function Sd(t){var e=function(t,e){if("object"!=bd(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=bd(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==bd(e)?e:e+""}var wd=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.routeTable=null,this.routeIDField=null,this.attributeFilter=null,this.eventTable=null,this.eventRouteIDField=null,this.measureField=null,this.measureStartField=null,this.measureEndField=null,this.measureOffsetField=null,this.errorInfoField=null,this.retainedFields=null,this.dataReturnOption=null,e&&Tt.extend(this,e),this.CLASS_NAME="SuperMap.GenerateSpatialDataParameters"},(e=[{key:"destroy",value:function(){var t=this;t.routeTable&&(t.routeTable=null),t.routeIDField=null,t.attributeFilter=null,t.eventTable=null,t.eventRouteIDField=null,t.measureField=null,t.measureStartField=null,t.measureEndField=null,t.measureOffsetField=null,t.errorInfoField=null,t.dataReturnOption&&(t.dataReturnOption.destroy(),t.dataReturnOption=null)}}])&&gd(t.prototype,e),r&&gd(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function _d(t){"@babel/helpers - typeof";return(_d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Od(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ed(n.key),n)}}function Ed(t){var e=function(t,e){if("object"!=_d(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=_d(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==_d(e)?e:e+""}function Pd(t,e,r){return e=Td(e),function(t,e){if(e&&("object"===_d(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Td(t).constructor):e.apply(t,r))}function xd(){return(xd="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Td(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Td(t){return(Td=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Cd(t,e){return(Cd=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var kd=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Pd(this,e,[t,r])).CLASS_NAME="SuperMap.GenerateSpatialDataService",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Cd(t,e)}(e,qa),r=e,(n=[{key:"destroy",value:function(){xd(Td(e.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){if(t instanceof wd){var r;return r=this.getJsonParameters(t),this.request({method:"POST",data:r,scope:this,success:e,failure:e})}}},{key:"getJsonParameters",value:function(t){var e="datasets/"+t.routeTable+"/linearreferencing/generatespatialdata";return this.url=Tt.urlPathAppend(this.url,e),this.url=Tt.urlAppend(this.url,"returnContent=true"),Tt.toJSON(t)}}])&&Od(r.prototype,n),o&&Od(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function Ad(t){"@babel/helpers - typeof";return(Ad="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function jd(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Nd(n.key),n)}}function Nd(t){var e=function(t,e){if("object"!=Ad(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Ad(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Ad(e)?e:e+""}function Id(t,e,r){return e=Rd(e),function(t,e){if(e&&("object"===Ad(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Rd(t).constructor):e.apply(t,r))}function Md(){return(Md="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Rd(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Rd(t){return(Rd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ld(t,e){return(Ld=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Dd=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=Id(this,e)).precision=5,Tt.extend(r,t),r.aggType=G.GEOHASH_GRID,r.CLASS_NAME="SuperMap.GeoHashGridAggParameter",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ld(t,e)}(e,Pa),r=e,o=[{key:"toJsonParameters",value:function(t){var e={aggName:t.aggName,aggFieldName:t.aggFieldName,aggType:t.aggType,precision:t.precision};return Tt.toJson(e)}}],(n=[{key:"destroy",value:function(){Md(Rd(e.prototype),"destroy",this).call(this),this.aggType=null,this.precision=null}}])&&jd(r.prototype,n),o&&jd(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function Bd(t){"@babel/helpers - typeof";return(Bd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Fd(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ud(n.key),n)}}function Ud(t){var e=function(t,e){if("object"!=Bd(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Bd(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Bd(e)?e:e+""}function Gd(t,e,r){return e=zd(e),function(t,e){if(e&&("object"===Bd(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],zd(t).constructor):e.apply(t,r))}function Vd(){return(Vd="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=zd(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function zd(t){return(zd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Hd(t,e){return(Hd=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var qd=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r=Gd(this,e,[t]),t&&t.operateGeometry&&(r.operateGeometry=t.operateGeometry),t&&t.sourceGeometry&&(r.sourceGeometry=t.sourceGeometry),t&&t.operateGeometries&&(r.operateGeometries=t.operateGeometries),t&&t.sourceGeometries&&(r.sourceGeometries=t.sourceGeometries),t&&Tt.extend(r,t),r.CLASS_NAME="SuperMap.GeometryOverlayAnalystParameters",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Hd(t,e)}(e,mc),r=e,o=[{key:"toObject",value:function(t,e){for(var r in t)if("sourceGeometry"===r)e.sourceGeometry=Xr.fromGeometry(t.sourceGeometry);else if("sourceGeometries"===r){for(var n=[],o=0;o<t.sourceGeometries.length;o++)n.push(Xr.fromGeometry(t.sourceGeometries[o]));e.sourceGeometries=n}else if("operateGeometry"===r)e.operateGeometry=Xr.fromGeometry(t.operateGeometry);else if("operateGeometries"===r){for(var i=[],a=0;a<t.operateGeometries.length;a++)i.push(Xr.fromGeometry(t.operateGeometries[a]));e.operateGeometries=i}else e[r]=t[r]}}],(n=[{key:"destroy",value:function(){Vd(zd(e.prototype),"destroy",this).call(this);var t=this;t.sourceGeometry&&(t.sourceGeometry.destroy(),t.sourceGeometry=null),t.sourceGeometries&&(t.sourceGeometries.destroy(),t.sourceGeometries=null),t.sourceGeometry&&(t.sourceGeometry.destroy(),t.sourceGeometry=null),t.operateGeometries&&(t.operateGeometries.destroy(),t.operateGeometries=null)}}])&&Fd(r.prototype,n),o&&Fd(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function Jd(t){"@babel/helpers - typeof";return(Jd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Wd(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Kd(n.key),n)}}function Kd(t){var e=function(t,e){if("object"!=Jd(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Jd(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Jd(e)?e:e+""}function Yd(t,e,r){return e=Xd(e),function(t,e){if(e&&("object"===Jd(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Xd(t).constructor):e.apply(t,r))}function Qd(){return(Qd="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Xd(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Xd(t){return(Xd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Zd(t,e){return(Zd=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var $d=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=Yd(this,e,[t])).points=null,r.zValues=null,t&&Tt.extend(r,t),r.CLASS_NAME="SuperMap.GeometrySurfaceAnalystParameters",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Zd(t,e)}(e,Ic),r=e,(n=[{key:"destroy",value:function(){Qd(Xd(e.prototype),"destroy",this).call(this);if(this.points){for(var t=0,r=this.points,n=r.length;t<n;t++)r[t].destroy();this.points=null}this.zValues=null}}])&&Wd(r.prototype,n),o&&Wd(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function tv(t){"@babel/helpers - typeof";return(tv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ev(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,rv(n.key),n)}}function rv(t){var e=function(t,e){if("object"!=tv(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=tv(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==tv(e)?e:e+""}function nv(t,e,r){return e=iv(e),function(t,e){if(e&&("object"===tv(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],iv(t).constructor):e.apply(t,r))}function ov(){return(ov="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=iv(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function iv(t){return(iv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function av(t,e){return(av=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var sv=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=nv(this,e,[t])).points=null,t&&Tt.extend(r,t),r.CLASS_NAME="SuperMap.GeometryThiessenAnalystParameters",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&av(t,e)}(e,qc),r=e,o=[{key:"toObject",value:function(t,e){for(var r in t)"clipRegion"===r?e.clipRegion=Xr.fromGeometry(t.clipRegion):e[r]=t[r]}}],(n=[{key:"destroy",value:function(){ov(iv(e.prototype),"destroy",this).call(this);if(this.points){for(var t=this.points.length-1;t>=0;t--)this.points[t].destroy();this.points=null}}}])&&ev(r.prototype,n),o&&ev(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function uv(t){"@babel/helpers - typeof";return(uv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function lv(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,cv(n.key),n)}}function cv(t){var e=function(t,e){if("object"!=uv(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=uv(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==uv(e)?e:e+""}function fv(t,e,r){return e=pv(e),function(t,e){if(e&&("object"===uv(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],pv(t).constructor):e.apply(t,r))}function pv(t){return(pv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function hv(t,e){return(hv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var yv=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=fv(this,e,[t,r=r||{}])).CLASS_NAME="SuperMap.GeoprocessingService",n.headers={},n.crossOrigin=!0,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&hv(t,e)}(e,Ki),r=e,(n=[{key:"getTools",value:function(t){return this._processAsync({url:"".concat(this.url,"/list"),callback:t})}},{key:"getTool",value:function(t,e){return this._processAsync({url:"".concat(this.url,"/").concat(t),callback:e})}},{key:"execute",value:function(t,e,r,n){var o={parameter:e=e||null,environment:r=r||null};return this._processAsync({url:"".concat(this.url,"/").concat(t,"/execute"),executeParamter:o,callback:n})}},{key:"submitJob",value:function(t,e,r,n){e=e||null,r=r||null;var o=JSON.stringify({parameter:e,environments:r});return this._processAsync({url:"".concat(this.url,"/").concat(t,"/jobs"),method:"POST",callback:n,params:o})}},{key:"waitForJobCompletion",value:function(t,e,r,n){var o=this,i=setInterval(function(){o._processAsync({url:"".concat(o.url,"/").concat(e,"/jobs/").concat(t),callback:function(t){var e=t.result.state.runState;t.options.statusCallback&&t.options.statusCallback(e),-1!==["FINISHED","FAILED","CANCELED"].indexOf(e)&&(clearInterval(i),n(t))}})},r.interval)}},{key:"getJobInfo",value:function(t,e,r){return this._processAsync({url:"".concat(this.url,"/").concat(t,"/jobs/").concat(e),callback:r})}},{key:"cancelJob",value:function(t,e,r){return this._processAsync({url:"".concat(this.url,"/").concat(t,"/jobs/").concat(e,"/cancel"),callback:r})}},{key:"getJobs",value:function(t,e){var r="".concat(this.url,"/jobs");t&&"string"==typeof t?r="".concat(this.url,"/").concat(t,"/jobs"):e=t,this._processAsync({url:r,callback:e})}},{key:"getResults",value:function(t,e,r,n){var o="".concat(this.url,"/").concat(t,"/jobs/").concat(e,"/results");return r&&("string"==typeof r?o="".concat(o,"/").concat(r):n=r),this._processAsync({url:o,callback:n})}},{key:"_processAsync",value:function(t){var e=t.url,r=t.method,n=t.callback,o=t.paramter;return this.request({url:e,method:r||"GET",params:o,headers:{"Content-type":"application/json"},scope:this,success:n,failure:n})}}])&&lv(r.prototype,n),o&&lv(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function dv(t){"@babel/helpers - typeof";return(dv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function vv(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,mv(n.key),n)}}function mv(t){var e=function(t,e){if("object"!=dv(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=dv(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==dv(e)?e:e+""}var bv=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.dataset=null,this.sourceFilter=null,this.referenceFilter=null,this.spatialRelationType=null,this.isBorderInside=null,this.returnFeature=null,this.returnGeoRelatedOnly=null,this.startRecord=0,this.expectCount=500,e&&Tt.extend(this,e),this.CLASS_NAME="SuperMap.GeoRelationAnalystParameters"},(e=[{key:"destroy",value:function(){var t=this;t.sourceFilter&&t.sourceFilter.destroy(),t.sourceFilter=null,t.referenceFilter&&t.referenceFilter.destroy(),t.referenceFilter=null,t.dataset=null,t.spatialRelationType=null,t.isBorderInside=null,t.returnFeature=null,t.returnGeoRelatedOnly=null,t.startRecord=null,t.expectCount=null}}])&&vv(t.prototype,e),r&&vv(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function gv(t){"@babel/helpers - typeof";return(gv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Sv(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,wv(n.key),n)}}function wv(t){var e=function(t,e){if("object"!=gv(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=gv(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==gv(e)?e:e+""}function _v(t,e,r){return e=Ev(e),function(t,e){if(e&&("object"===gv(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Ev(t).constructor):e.apply(t,r))}function Ov(){return(Ov="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ev(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Ev(t){return(Ev=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Pv(t,e){return(Pv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var xv=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=_v(this,e,[t,r])).CLASS_NAME="SuperMap.GeoRelationAnalystService",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Pv(t,e)}(e,qa),r=e,(n=[{key:"destroy",value:function(){Ov(Ev(e.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){if(t instanceof bv){var r=this;r.url=Tt.urlPathAppend(r.url,"datasets/"+t.dataset+"/georelation");var n=Tt.toJSON(t);return r.url=Tt.urlAppend(r.url,"returnContent=true"),r.request({method:"POST",data:n,scope:r,success:e,failure:e})}}}])&&Sv(r.prototype,n),o&&Sv(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function Tv(t){"@babel/helpers - typeof";return(Tv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Cv(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,kv(n.key),n)}}function kv(t){var e=function(t,e){if("object"!=Tv(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Tv(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Tv(e)?e:e+""}function Av(t,e,r){return e=Iv(e),jv(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Iv(t).constructor):e.apply(t,r))}function jv(t,e){if(e&&("object"===Tv(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Nv(){return(Nv="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Iv(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Iv(t){return(Iv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Mv(t,e){return(Mv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Rv=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=Av(this,e,[t,r]),r?(n.datasource=null,n.dataset=null,r&&Tt.extend(n,r),n.CLASS_NAME="SuperMap.DatasetService",n):jv(n)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Mv(t,e)}(e,Ki),r=e,(n=[{key:"destroy",value:function(){Nv(Iv(e.prototype),"destroy",this).call(this);this.datasource=null,this.dataset=null}},{key:"getDatasetsService",value:function(t,e){var r=Tt.urlPathAppend(this.url,"datasources/name/".concat(t,"/datasets"));return this.processAsync(r,"GET",e)}},{key:"getDatasetService",value:function(t,e,r){var n=Tt.urlPathAppend(this.url,"datasources/name/".concat(t,"/datasets/name/").concat(e));return this.processAsync(n,"GET",r)}},{key:"setDatasetService",value:function(t,e){if(t){var r=Tt.urlPathAppend(this.url,"datasources/name/".concat(t.datasourceName,"/datasets/name/").concat(t.datasetName));return delete t.datasourceName,this.processAsync(r,"PUT",e,t)}}},{key:"deleteDatasetService",value:function(t,e,r){var n=Tt.urlPathAppend(this.url,"datasources/name/".concat(t,"/datasets/name/").concat(e));return this.processAsync(n,"DELETE",r)}},{key:"processAsync",value:function(t,e,r,n){var o={url:t,method:e,scope:this,success:r,failure:r};return n&&(o.data=Tt.toJSON(n)),this.request(o)}}])&&Cv(r.prototype,n),o&&Cv(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function Lv(t){"@babel/helpers - typeof";return(Lv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Dv(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Bv(n.key),n)}}function Bv(t){var e=function(t,e){if("object"!=Lv(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Lv(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Lv(e)?e:e+""}var Fv=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.datasetNames=null,this.targetEpsgCode=null,this.targetPrj=null,this.returnContent=!0,this.fromIndex=0,this.toIndex=19,this.returnFeaturesOnly=!1,this.maxFeatures=null,this.hasGeometry=!0,this.aggregations=null,Tt.extend(this,e),this.CLASS_NAME="SuperMap.GetFeaturesParametersBase"},(e=[{key:"destroy",value:function(){var t=this;t.datasetNames=null,t.returnContent=null,t.fromIndex=null,t.toIndex=null,t.hasGeometry=null,t.maxFeatures=null,t.targetEpsgCode=null,t.targetPrj=null,t.aggregation&&(t.aggregation=null)}}])&&Dv(t.prototype,e),r&&Dv(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function Uv(t){"@babel/helpers - typeof";return(Uv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Gv(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Vv(n.key),n)}}function Vv(t){var e=function(t,e){if("object"!=Uv(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Uv(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Uv(e)?e:e+""}function zv(t,e,r){return e=qv(e),function(t,e){if(e&&("object"===Uv(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],qv(t).constructor):e.apply(t,r))}function Hv(){return(Hv="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=qv(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function qv(t){return(qv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Jv(t,e){return(Jv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Wv=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=zv(this,e,[t])).getFeatureMode=e.getFeatureMode.BOUNDS,r.bounds=null,r.fields=null,r.attributeFilter=null,r.spatialQueryMode=u.CONTAIN,Tt.extend(r,t),r.CLASS_NAME="SuperMap.GetFeaturesByBoundsParameters",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Jv(t,e)}(e,Fv),r=e,o=[{key:"toJsonParameters",value:function(t){var r,n,o;return n={leftBottom:{x:t.bounds.left,y:t.bounds.bottom},rightTop:{x:t.bounds.right,y:t.bounds.top}},o={datasetNames:t.datasetNames,getFeatureMode:e.getFeatureMode.BOUNDS,bounds:n,spatialQueryMode:t.spatialQueryMode},t.fields&&((r=new gs).name=t.datasetNames,r.fields=t.fields,o.queryParameter=r),t.attributeFilter&&(o.attributeFilter=t.attributeFilter,o.getFeatureMode=e.getFeatureMode.BOUNDS_ATTRIBUTEFILTER),t.maxFeatures&&!isNaN(t.maxFeatures)&&(o.maxFeatures=t.maxFeatures),"boolean"==typeof t.hasGeometry&&(o.hasGeometry=t.hasGeometry),t.targetEpsgCode&&(o.targetEpsgCode=t.targetEpsgCode),!t.targetEpsgCode&&t.targetPrj&&(o.targetPrj=t.targetPrj),t.aggregations&&(o.aggregations=t.aggregations),Tt.toJSON(o)}}],(n=[{key:"destroy",value:function(){Hv(qv(e.prototype),"destroy",this).call(this);var t=this;if(t.bounds&&(t.bounds.destroy(),t.bounds=null),t.fields){for(;t.fields.length>0;)t.fields.pop();t.fields=null}t.attributeFilter=null,t.spatialQueryMode=null,t.getFeatureMode=null}}])&&Gv(r.prototype,n),o&&Gv(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function Kv(t){"@babel/helpers - typeof";return(Kv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Yv(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Qv(n.key),n)}}function Qv(t){var e=function(t,e){if("object"!=Kv(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Kv(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Kv(e)?e:e+""}function Xv(t,e,r){return e=$v(e),function(t,e){if(e&&("object"===Kv(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],$v(t).constructor):e.apply(t,r))}function Zv(){return(Zv="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=$v(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function $v(t){return($v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function tm(t,e){return(tm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}Wv.getFeatureMode={BOUNDS:"BOUNDS",BOUNDS_ATTRIBUTEFILTER:"BOUNDS_ATTRIBUTEFILTER"};var em=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=Xv(this,e,[t,r]),r=r||{},n.returnContent=!0,n.returnFeaturesOnly=!1,n.fromIndex=0,n.toIndex=19,n.hasGeometry=!0,n.maxFeatures=null,n.format=o.GEOJSON,Tt.extend(n,r),n.url=Tt.urlPathAppend(n.url,"featureResults"),n.CLASS_NAME="SuperMap.GetFeaturesServiceBase",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&tm(t,e)}(e,Ki),r=e,(n=[{key:"destroy",value:function(){Zv($v(e.prototype),"destroy",this).call(this);var t=this;t.returnContent=null,t.fromIndex=null,t.toIndex=null,t.maxFeatures=null,t.format=null,t.hasGeometry=null}},{key:"processAsync",value:function(t,e){if(t){var r,n=this,o=!0;return n.returnContent=t.returnContent,n.returnFeaturesOnly=t.returnFeaturesOnly,n.fromIndex=t.fromIndex,n.toIndex=t.toIndex,n.maxFeatures=t.maxFeatures,n.hasGeometry=t.hasGeometry,n.returnContent&&(o=!1),null!=n.fromIndex&&null!=n.toIndex&&!isNaN(n.fromIndex)&&!isNaN(n.toIndex)&&n.fromIndex>=0&&n.toIndex>=0&&!o&&(n.url=Tt.urlAppend(n.url,"fromIndex=".concat(n.fromIndex,"&toIndex=").concat(n.toIndex))),n.returnContent&&(t.returnCountOnly||t.returnDatasetInfoOnly||t.returnFeaturesOnly||console.warn("recommend set returnFeaturesOnly config to true to imporve performance. if need get Total amount and Dataset information. FeatureService provide getFeaturesCount and getFeaturesDatasetInfo method"),t.returnCountOnly&&(n.url=Tt.urlAppend(n.url,"returnCountOnly="+t.returnCountOnly)),t.returnDatasetInfoOnly&&(n.url=Tt.urlAppend(n.url,"returnDatasetInfoOnly="+t.returnDatasetInfoOnly)),t.returnFeaturesOnly&&(n.url=Tt.urlAppend(n.url,"returnFeaturesOnly="+t.returnFeaturesOnly))),r=n.getJsonParameters(t),n.request({method:"POST",data:r,scope:n,success:e,failure:e})}}},{key:"transformResult",value:function(t,e){t=Tt.transformResult(t);var r=new Ln;(this.format===o.GEOJSON&&t.features&&(t.features=r.toGeoJSON(t.features)),this.returnFeaturesOnly&&Array.isArray(t))&&(t={succeed:t.succeed,features:r.toGeoJSON(t)});return{result:t,options:e}}},{key:"dataFormat",value:function(){return[o.GEOJSON,o.ISERVER,o.FGB]}}])&&Yv(r.prototype,n),i&&Yv(r,i),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,i}();function rm(t){"@babel/helpers - typeof";return(rm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function nm(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,om(n.key),n)}}function om(t){var e=function(t,e){if("object"!=rm(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=rm(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==rm(e)?e:e+""}function im(t,e,r){return e=sm(e),function(t,e){if(e&&("object"===rm(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],sm(t).constructor):e.apply(t,r))}function am(){return(am="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=sm(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function sm(t){return(sm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function um(t,e){return(um=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var lm=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=im(this,e,[t,r])).CLASS_NAME="SuperMap.GetFeaturesByBoundsService",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&um(t,e)}(e,em),r=e,(n=[{key:"destroy",value:function(){am(sm(e.prototype),"destroy",this).call(this)}},{key:"getJsonParameters",value:function(t){return Wv.toJsonParameters(t)}}])&&nm(r.prototype,n),o&&nm(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function cm(t){"@babel/helpers - typeof";return(cm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function fm(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,pm(n.key),n)}}function pm(t){var e=function(t,e){if("object"!=cm(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=cm(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==cm(e)?e:e+""}function hm(t,e,r){return e=dm(e),function(t,e){if(e&&("object"===cm(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],dm(t).constructor):e.apply(t,r))}function ym(){return(ym="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=dm(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function dm(t){return(dm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function vm(t,e){return(vm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var mm=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=hm(this,e,[t])).bufferDistance=null,r.attributeFilter=null,r.geometry=null,r.fields=null,Tt.extend(r,t),r.CLASS_NAME="SuperMap.GetFeaturesByBufferParameters",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&vm(t,e)}(e,Fv),r=e,o=[{key:"toJsonParameters",value:function(t){var e,r,n;return n=Xr.fromGeometry(t.geometry),r={datasetNames:t.datasetNames,getFeatureMode:"BUFFER",bufferDistance:t.bufferDistance,geometry:n},t.fields&&((e=new gs).name=t.datasetNames,e.fields=t.fields,r.queryParameter=e),t.attributeFilter&&(r.attributeFilter=t.attributeFilter,r.getFeatureMode="BUFFER_ATTRIBUTEFILTER"),t.maxFeatures&&!isNaN(t.maxFeatures)&&(r.maxFeatures=t.maxFeatures),"boolean"==typeof t.hasGeometry&&(r.hasGeometry=t.hasGeometry),t.targetEpsgCode&&(r.targetEpsgCode=t.targetEpsgCode),!t.targetEpsgCode&&t.targetPrj&&(r.targetPrj=t.targetPrj),Tt.toJSON(r)}}],(n=[{key:"destroy",value:function(){ym(dm(e.prototype),"destroy",this).call(this);var t=this;if(t.bufferDistance=null,t.attributeFilter=null,t.fields){for(;t.fields.length>0;)t.fields.pop();t.fields=null}t.geometry&&(t.geometry.destroy(),t.geometry=null)}}])&&fm(r.prototype,n),o&&fm(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function bm(t){"@babel/helpers - typeof";return(bm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function gm(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Sm(n.key),n)}}function Sm(t){var e=function(t,e){if("object"!=bm(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=bm(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==bm(e)?e:e+""}function wm(t,e,r){return e=Om(e),function(t,e){if(e&&("object"===bm(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Om(t).constructor):e.apply(t,r))}function _m(){return(_m="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Om(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Om(t){return(Om=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Em(t,e){return(Em=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Pm=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=wm(this,e,[t,r])).CLASS_NAME="SuperMap.GetFeaturesByBufferService",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Em(t,e)}(e,em),r=e,(n=[{key:"destroy",value:function(){_m(Om(e.prototype),"destroy",this).call(this)}},{key:"getJsonParameters",value:function(t){return mm.toJsonParameters(t)}}])&&gm(r.prototype,n),o&&gm(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function xm(t){"@babel/helpers - typeof";return(xm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Tm(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Cm(n.key),n)}}function Cm(t){var e=function(t,e){if("object"!=xm(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=xm(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==xm(e)?e:e+""}function km(t,e,r){return e=jm(e),function(t,e){if(e&&("object"===xm(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],jm(t).constructor):e.apply(t,r))}function Am(){return(Am="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=jm(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function jm(t){return(jm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Nm(t,e){return(Nm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Im=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=km(this,e,[t])).getFeatureMode="SPATIAL",r.geometry=null,r.fields=null,r.attributeFilter=null,r.spatialQueryMode=u.CONTAIN,Tt.extend(r,t),r.CLASS_NAME="SuperMap.GetFeaturesByGeometryParameters",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Nm(t,e)}(e,Fv),r=e,o=[{key:"toJsonParameters",value:function(t){var e,r,n;return r=Xr.fromGeometry(t.geometry),n={datasetNames:t.datasetNames,getFeatureMode:"SPATIAL",geometry:r,spatialQueryMode:t.spatialQueryMode},t.fields&&((e=new gs).name=t.datasetNames,e.fields=t.fields,n.queryParameter=e),t.attributeFilter&&(n.attributeFilter=t.attributeFilter,n.getFeatureMode="SPATIAL_ATTRIBUTEFILTER"),t.maxFeatures&&!isNaN(t.maxFeatures)&&(n.maxFeatures=t.maxFeatures),"boolean"==typeof t.hasGeometry&&(n.hasGeometry=t.hasGeometry),t.targetEpsgCode&&(n.targetEpsgCode=t.targetEpsgCode),!t.targetEpsgCode&&t.targetPrj&&(n.targetPrj=t.targetPrj),t.aggregations&&(n.aggregations=t.aggregations),Tt.toJSON(n)}}],(n=[{key:"destroy",value:function(){Am(jm(e.prototype),"destroy",this).call(this);var t=this;if(t.geometry&&(t.geometry.destroy(),t.geometry=null),t.fields){for(;t.fields.length>0;)t.fields.pop();t.fields=null}t.attributeFilter=null,t.spatialQueryMode=null,t.getFeatureMode=null}}])&&Tm(r.prototype,n),o&&Tm(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function Mm(t){"@babel/helpers - typeof";return(Mm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Rm(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Lm(n.key),n)}}function Lm(t){var e=function(t,e){if("object"!=Mm(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Mm(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Mm(e)?e:e+""}function Dm(t,e,r){return e=Fm(e),function(t,e){if(e&&("object"===Mm(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Fm(t).constructor):e.apply(t,r))}function Bm(){return(Bm="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Fm(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Fm(t){return(Fm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Um(t,e){return(Um=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Gm=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Dm(this,e,[t,r])).CLASS_NAME="SuperMap.GetFeaturesByGeometryService",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Um(t,e)}(e,em),r=e,(n=[{key:"destroy",value:function(){Bm(Fm(e.prototype),"destroy",this).call(this)}},{key:"getJsonParameters",value:function(t){return Im.toJsonParameters(t)}}])&&Rm(r.prototype,n),o&&Rm(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function Vm(t){"@babel/helpers - typeof";return(Vm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function zm(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Hm(n.key),n)}}function Hm(t){var e=function(t,e){if("object"!=Vm(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Vm(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Vm(e)?e:e+""}function qm(t,e,r){return e=Wm(e),function(t,e){if(e&&("object"===Vm(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Wm(t).constructor):e.apply(t,r))}function Jm(){return(Jm="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Wm(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Wm(t){return(Wm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Km(t,e){return(Km=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Ym=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=qm(this,e,[t])).getFeatureMode="ID",r.IDs=null,r.fields=null,Tt.extend(r,t),r.CLASS_NAME="SuperMap.GetFeaturesByIDsParameters",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Km(t,e)}(e,Fv),r=e,o=[{key:"toJsonParameters",value:function(t){var e,r;return e={datasetNames:t.datasetNames,getFeatureMode:"ID",ids:t.IDs},t.fields&&((r=new gs).name=t.datasetNames,r.fields=t.fields,e.queryParameter=r),t.targetEpsgCode&&(e.targetEpsgCode=t.targetEpsgCode),"boolean"==typeof t.hasGeometry&&(e.hasGeometry=t.hasGeometry),!t.targetEpsgCode&&t.targetPrj&&(e.targetPrj=t.targetPrj),t.aggregations&&(e.aggregations=t.aggregations),Tt.toJSON(e)}}],(n=[{key:"destroy",value:function(){Jm(Wm(e.prototype),"destroy",this).call(this);var t=this;if(t.IDs=null,t.getFeatureMode=null,t.fields){for(;t.fields.length>0;)t.fields.pop();t.fields=null}}}])&&zm(r.prototype,n),o&&zm(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function Qm(t){"@babel/helpers - typeof";return(Qm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Xm(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Zm(n.key),n)}}function Zm(t){var e=function(t,e){if("object"!=Qm(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Qm(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Qm(e)?e:e+""}function $m(t,e,r){return e=eb(e),function(t,e){if(e&&("object"===Qm(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],eb(t).constructor):e.apply(t,r))}function tb(){return(tb="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=eb(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function eb(t){return(eb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function rb(t,e){return(rb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var nb=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=$m(this,e,[t,r])).CLASS_NAME="SuperMap.GetFeaturesByIDsService",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&rb(t,e)}(e,em),r=e,(n=[{key:"destroy",value:function(){tb(eb(e.prototype),"destroy",this).call(this)}},{key:"getJsonParameters",value:function(t){return Ym.toJsonParameters(t)}}])&&Xm(r.prototype,n),o&&Xm(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function ob(t){"@babel/helpers - typeof";return(ob="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ib(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ab(n.key),n)}}function ab(t){var e=function(t,e){if("object"!=ob(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=ob(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ob(e)?e:e+""}function sb(t,e,r){return e=lb(e),function(t,e){if(e&&("object"===ob(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],lb(t).constructor):e.apply(t,r))}function ub(){return(ub="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=lb(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function lb(t){return(lb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function cb(t,e){return(cb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var fb=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=sb(this,e,[t])).getFeatureMode="SQL",r.queryParameter=null,Tt.extend(r,t),r.CLASS_NAME="SuperMap.GetFeaturesBySQLParameters",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&cb(t,e)}(e,Fv),r=e,o=[{key:"toJsonParameters",value:function(t){var e={datasetNames:t.datasetNames,getFeatureMode:"SQL",queryParameter:t.queryParameter};return t.maxFeatures&&!isNaN(t.maxFeatures)&&(e.maxFeatures=t.maxFeatures),"boolean"==typeof t.hasGeometry&&(e.hasGeometry=t.hasGeometry),t.aggregations&&(e.aggregations=t.aggregations),t.targetEpsgCode&&(e.targetEpsgCode=t.targetEpsgCode),!t.targetEpsgCode&&t.targetPrj&&(e.targetPrj=t.targetPrj),t.aggregations&&(e.aggregations=t.aggregations),Tt.toJSON(e)}}],(n=[{key:"destroy",value:function(){ub(lb(e.prototype),"destroy",this).call(this);this.getFeatureMode=null,this.queryParameter&&(this.queryParameter.destroy(),this.queryParameter=null)}}])&&ib(r.prototype,n),o&&ib(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function pb(t){"@babel/helpers - typeof";return(pb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function hb(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,yb(n.key),n)}}function yb(t){var e=function(t,e){if("object"!=pb(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=pb(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==pb(e)?e:e+""}function db(t,e,r){return e=mb(e),function(t,e){if(e&&("object"===pb(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],mb(t).constructor):e.apply(t,r))}function vb(){return(vb="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=mb(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function mb(t){return(mb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function bb(t,e){return(bb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var gb=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=db(this,e,[t,r])).CLASS_NAME="SuperMap.GetFeaturesBySQLService",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&bb(t,e)}(e,em),r=e,(n=[{key:"destroy",value:function(){vb(mb(e.prototype),"destroy",this).call(this)}},{key:"getJsonParameters",value:function(t){return fb.toJsonParameters(t)}}])&&hb(r.prototype,n),o&&hb(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function Sb(t){"@babel/helpers - typeof";return(Sb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function wb(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,_b(n.key),n)}}function _b(t){var e=function(t,e){if("object"!=Sb(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Sb(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Sb(e)?e:e+""}function Ob(t,e,r){return e=Pb(e),function(t,e){if(e&&("object"===Sb(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Pb(t).constructor):e.apply(t,r))}function Eb(){return(Eb="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Pb(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Pb(t){return(Pb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function xb(t,e){return(xb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Tb=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Ob(this,e,[t,r])).datasource=null,n.dataset=null,r&&Tt.extend(n,r),n.CLASS_NAME="SuperMap.GetFieldsService",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&xb(t,e)}(e,Ki),r=e,(n=[{key:"destroy",value:function(){Eb(Pb(e.prototype),"destroy",this).call(this);this.datasource=null,this.dataset=null}},{key:"processAsync",value:function(t){var e=this;return e.url=Tt.urlPathAppend(e.url,"datasources/".concat(e.datasource,"/datasets/").concat(e.dataset,"/fields")),e.request({method:"GET",data:null,scope:e,success:t,failure:t})}}])&&wb(r.prototype,n),o&&wb(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function Cb(t){"@babel/helpers - typeof";return(Cb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function kb(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ab(n.key),n)}}function Ab(t){var e=function(t,e){if("object"!=Cb(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Cb(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Cb(e)?e:e+""}var jb=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.datasetName=null,this.dataSourceName=null,this.X=null,this.Y=null,this.bounds=null,Tt.extend(this,e),this.CLASS_NAME="SuperMap.GetGridCellInfosParameters"},(e=[{key:"destroy",value:function(){this.datasetName=null,this.dataSourceName=null,this.X=null,this.Y=null}}])&&kb(t.prototype,e),r&&kb(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function Nb(t){"@babel/helpers - typeof";return(Nb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ib(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Mb(n.key),n)}}function Mb(t){var e=function(t,e){if("object"!=Nb(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Nb(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Nb(e)?e:e+""}function Rb(t,e,r){return e=Db(e),function(t,e){if(e&&("object"===Nb(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Db(t).constructor):e.apply(t,r))}function Lb(){return(Lb="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Db(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Db(t){return(Db=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Bb(t,e){return(Bb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Fb=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Rb(this,e,[t,r])).datasetName=null,n.dataSourceName=null,n.datasetType=null,n.X=null,n.Y=null,r&&Tt.extend(n,r),n.CLASS_NAME="SuperMap.GetGridCellInfosService",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Bb(t,e)}(e,Ki),r=e,(n=[{key:"destroy",value:function(){Lb(Db(e.prototype),"destroy",this).call(this);var t=this;t.X=null,t.Y=null,t.datasetName=null,t.dataSourceName=null,t.datasetType=null}},{key:"processAsync",value:function(t,e){if(t instanceof jb){Tt.extend(this,t);var r=this;return r.url=Tt.urlPathAppend(r.url,"datasources/".concat(r.dataSourceName,"/datasets/").concat(r.datasetName)),r.request({method:"GET",data:null,scope:r,success:function(t){!e&&t.result||(t=t.result?t.result:t,r.getDatasetInfoCompleted(t,e))},failure:e}).then(function(t){var e=t.result;return e&&r.getDatasetInfoCompleted(e)})}}},{key:"getDatasetInfoCompleted",value:function(t,e){return t=Tt.transformResult(t),this.datasetType=t.datasetInfo.type,this.queryGridInfos(e)}},{key:"queryGridInfos",value:function(t){var e=this,r="GRID"===e.datasetType?"gridValue":"imageValue",n=e.bounds?r+"s":r,o=Tt.urlPathAppend(e.url,n),i="GET",a=null;return Array.isArray(e.bounds)?(i="POST",a=e.bounds):e.bounds?o=Tt.urlAppend(o,"bounds=".concat(encodeURIComponent(JSON.stringify(e.bounds)))):null!=e.X&&null!=e.Y&&(o=Tt.urlAppend(o,"x=".concat(e.X,"&y=").concat(e.Y))),e.request({url:o,method:i,data:a,scope:e,success:t,failure:t})}}])&&Ib(r.prototype,n),o&&Ib(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function Ub(t){"@babel/helpers - typeof";return(Ub="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Gb(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Vb(n.key),n)}}function Vb(t){var e=function(t,e){if("object"!=Ub(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Ub(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Ub(e)?e:e+""}var zb=function(){return t=function t(e,r){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),!e)return this;this.memoryData=null,this.type=e,r&&Tt.extend(this,r),this.CLASS_NAME="SuperMap.Theme"},(e=[{key:"destroy",value:function(){this.memoryData&&(this.memoryData.destroy(),this.memoryData=null),this.type=null}},{key:"toServerJSONObject",value:function(){}}])&&Gb(t.prototype,e),r&&Gb(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function Hb(t){"@babel/helpers - typeof";return(Hb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function qb(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Jb(n.key),n)}}function Jb(t){var e=function(t,e){if("object"!=Hb(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Hb(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Hb(e)?e:e+""}var Wb=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.align=b.BASELINECENTER,this.backColor=new kr(255,255,255),this.foreColor=new kr(0,0,0),this.backOpaque=!1,this.sizeFixed=!0,this.fontHeight=6,this.fontWidth=0,this.fontWeight=400,this.fontName="Times New Roman",this.bold=!1,this.italic=!1,this.italicAngle=0,this.shadow=!1,this.strikeout=!1,this.outline=!1,this.opaqueRate=0,this.underline=!1,this.rotation=0,e&&Tt.extend(this,e),this.CLASS_NAME="SuperMap.ServerTextStyle"}return e=t,n=[{key:"fromObj",value:function(e){var r=new t(e);return Tt.copy(r,e),r.backColor=kr.fromJson(e.backColor),r.foreColor=kr.fromJson(e.foreColor),r}}],(r=[{key:"destroy",value:function(){var t=this;t.align=null,t.backColor&&(t.backColor.destroy(),t.backColor=null),t.foreColor&&(t.foreColor.destroy(),t.foreColor=null),t.backOpaque=null,t.sizeFixed=null,t.fontHeight=null,t.fontWidth=null,t.fontWeight=null,t.fontName=null,t.bold=null,t.italic=null,t.italicAngle=null,t.shadow=null,t.strikeout=null,t.outline=null,t.opaqueRate=null,t.underline=null,t.rotation=null}}])&&qb(e.prototype,r),n&&qb(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,r,n}();function Kb(t){"@babel/helpers - typeof";return(Kb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Yb(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Qb(n.key),n)}}function Qb(t){var e=function(t,e){if("object"!=Kb(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Kb(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Kb(e)?e:e+""}var Xb=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.caption=null,this.end=0,this.start=0,this.visible=!0,this.style=new Wb,e&&Tt.extend(this,e),this.CLASS_NAME="SuperMap.ThemeLabelItem"}return e=t,n=[{key:"fromObj",value:function(e){if(e){var r=new t;return Tt.copy(r,e),r}}}],(r=[{key:"destroy",value:function(){var t=this;t.caption=null,t.end=null,t.start=null,t.style&&(t.style.destroy(),t.style=null),t.visible=null}}])&&Yb(e.prototype,r),n&&Yb(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,r,n}();function Zb(t){"@babel/helpers - typeof";return(Zb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function $b(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,tg(n.key),n)}}function tg(t){var e=function(t,e){if("object"!=Zb(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Zb(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Zb(e)?e:e+""}var eg=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.caption=null,this.style=new Ir,this.unique=null,this.visible=!0,e&&Tt.extend(this,e),this.CLASS_NAME="SuperMap.ThemeUniqueItem"}return e=t,n=[{key:"fromObj",value:function(e){var r=new t;return Tt.copy(r,e),r.style=Ir.fromJson(e.style),r}}],(r=[{key:"destroy",value:function(){var t=this;t.caption=null,t.unique=null,t.style&&(t.style.destroy(),t.style=null),t.visible=null}},{key:"toServerJSONObject",value:function(){var t={};return(t=Tt.copyAttributes(t,this)).style&&t.style.toServerJSONObject&&(t.style=t.style.toServerJSONObject()),t}}])&&$b(e.prototype,r),n&&$b(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,r,n}();function rg(t){"@babel/helpers - typeof";return(rg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ng(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,og(n.key),n)}}function og(t){var e=function(t,e){if("object"!=rg(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=rg(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==rg(e)?e:e+""}var ig=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.offsetFixed=!1,this.offsetX="0.0",this.offsetY="0.0",e&&Tt.extend(this,e),this.CLASS_NAME="SuperMap.ThemeOffset"}return e=t,n=[{key:"fromObj",value:function(e){if(e){var r=new t;return Tt.copy(r,e),r}}}],(r=[{key:"destroy",value:function(){this.offsetFixed=null,this.offsetX=null,this.offsetY=null}}])&&ng(e.prototype,r),n&&ng(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,r,n}();function ag(t){"@babel/helpers - typeof";return(ag="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function sg(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ug(n.key),n)}}function ug(t){var e=function(t,e){if("object"!=ag(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=ag(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ag(e)?e:e+""}var lg=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.defaultStyle=null,this.separator=null,this.separatorEnabled=!1,this.splitIndexes=null,this.styles=new Wb,e&&Tt.extend(this,e),this.CLASS_NAME="SuperMap.LabelMixedTextStyle"}return e=t,n=[{key:"fromObj",value:function(e){if(e){var r=new t,n=e.styles;if(Tt.copy(r,e),r.defaultStyle=new Wb(e.defaultStyle),n){r.styles=[];for(var o=0,i=n.length;o<i;o++)r.styles.push(new Wb(n[o]))}return r}}}],(r=[{key:"destroy",value:function(){var t=this;if(t.defaultStyle&&(t.defaultStyle.destroy(),t.defaultStyle=null),t.separator=null,t.separatorEnabled=null,t.splitIndexes&&(t.splitIndexes=null),t.styles){for(var e=0,r=t.styles,n=r.length;e<n;e++)r[e].destroy();t.styles=null}}}])&&sg(e.prototype,r),n&&sg(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,r,n}();function cg(t){"@babel/helpers - typeof";return(cg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function fg(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,pg(n.key),n)}}function pg(t){var e=function(t,e){if("object"!=cg(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=cg(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==cg(e)?e:e+""}var hg=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.maxTextHeight=0,this.maxTextWidth=0,this.minTextHeight=0,this.minTextWidth=0,this.uniformStyle=new Wb,this.uniformMixedStyle=null,e&&Tt.extend(this,e),this.CLASS_NAME="SuperMap.ThemeLabelText"}return e=t,n=[{key:"fromObj",value:function(e){if(e){var r=new t;return Tt.copy(r,e),r.uniformStyle=Wb.fromObj(e.uniformStyle),r.uniformMixedStyle=lg.fromObj(e.uniformMixedStyle),r}}}],(r=[{key:"destroy",value:function(){var t=this;t.maxTextHeight=null,t.maxTextWidth=null,t.minTextHeight=null,t.minTextWidth=null,t.uniformStyle&&(t.uniformStyle.destroy(),t.uniformStyle=null),t.uniformMixedStyle&&(t.uniformMixedStyle.destroy(),t.uniformMixedStyle=null)}}])&&fg(e.prototype,r),n&&fg(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,r,n}();function yg(t){"@babel/helpers - typeof";return(yg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function dg(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,vg(n.key),n)}}function vg(t){var e=function(t,e){if("object"!=yg(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=yg(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==yg(e)?e:e+""}var mg=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.isAlongLine=!0,this.alongLineDirection=g.LB_TO_RT,this.angleFixed=!1,this.repeatedLabelAvoided=!1,this.repeatIntervalFixed=!1,this.labelRepeatInterval=0,e&&Tt.extend(this,e),this.CLASS_NAME="SuperMap.ThemeLabelAlongLine"}return e=t,n=[{key:"fromObj",value:function(e){if(e){var r=new t;return Tt.copy(r,e),r}}}],(r=[{key:"destroy",value:function(){var t=this;t.isAlongLine=null,t.alongLineDirection=null,t.angleFixed=null,t.repeatedLabelAvoided=null,t.repeatIntervalFixed=null,t.labelRepeatInterval=null}}])&&dg(e.prototype,r),n&&dg(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,r,n}();function bg(t){"@babel/helpers - typeof";return(bg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function gg(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Sg(n.key),n)}}function Sg(t){var e=function(t,e){if("object"!=bg(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=bg(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==bg(e)?e:e+""}var wg=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.labelBackShape=S.NONE,this.backStyle=new Ir,e&&Tt.extend(this,e),this.CLASS_NAME="SuperMap.ThemeLabelBackground"}return e=t,n=[{key:"fromObj",value:function(e){if(e){var r=new t;return r.labelBackShape=e.labelBackShape,r.backStyle=Ir.fromJson(e.backStyle),r}}}],(r=[{key:"destroy",value:function(){this.labelBackShape=null,this.backStyle&&(this.backStyle.destroy(),this.backStyle=null)}}])&&gg(e.prototype,r),n&&gg(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,r,n}();function _g(t){"@babel/helpers - typeof";return(_g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Og(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Eg(n.key),n)}}function Eg(t){var e=function(t,e){if("object"!=_g(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=_g(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==_g(e)?e:e+""}function Pg(t,e,r){return e=Tg(e),function(t,e){if(e&&("object"===_g(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Tg(t).constructor):e.apply(t,r))}function xg(){return(xg="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Tg(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Tg(t){return(Tg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Cg(t,e){return(Cg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var kg=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=Pg(this,e,["LABEL",t])).alongLine=new mg,r.background=new wg,r.items=null,r.uniqueItems=null,r.labelExpression=null,r.labelOverLengthMode=w.NONE,r.matrixCells=null,r.maxLabelLength=256,r.numericPrecision=0,r.offset=new ig,r.overlapAvoided=!0,r.rangeExpression=null,r.uniqueExpression=null,r.smallGeometryLabeled=!1,r.text=new hg,r.textSpace=0,t&&Tt.extend(r,t),r.CLASS_NAME="SuperMap.ThemeLabel",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Cg(t,e)}(e,zb),r=e,o=[{key:"fromObj",value:function(t){if(t){var r=new e,n=t.items,o=t.uniqueItems,i=t.matrixCells;if(t.matrixCells=null,Tt.copy(r,t),r.alongLine=mg.fromObj(t),r.background=wg.fromObj(t),n){r.items=[];for(var a=0,s=n.length;a<s;a++)r.items.push(Xb.fromObj(n[a]))}if(o){r.uniqueItems=[];for(var u=0,l=o.length;u<l;u++)r.uniqueItems.push(eg.fromObj(o[u]))}if(i){r.matrixCells=[];for(var c=0,f=i.length;c<f;c++);}return r.offset=ig.fromObj(t),r.text=hg.fromObj(t),r}}}],(n=[{key:"destroy",value:function(){xg(Tg(e.prototype),"destroy",this).call(this);var t=this;if(t.alongLine=null,t.background&&(t.background.destroy(),t.background=null),t.items){for(var r=0,n=t.items,o=n.length;r<o;r++)n[r].destroy();t.items=null}if(t.uniqueItems){for(var i=0,a=t.uniqueItems,s=a.length;i<s;i++)a[i].destory();t.uniqueItems=null}t.labelExpression=null,t.labelOverLengthMode=null,t.matrixCells=null,t.maxLabelLength=null,t.numericPrecision=null,t.overlapAvoided=null,t.rangeExpression=null,t.uniqueExpression=null,t.offset&&(t.offset.destroy(),t.offset=null),t.overlapAvoided=null,t.smallGeometryLabeled=null,t.text&&(t.text.destroy(),t.text=null),t.textSpace=null}},{key:"toJSON",value:function(){return Tt.toJSON(this.toServerJSONObject())}},{key:"toServerJSONObject",value:function(){var t={};return t.type=this.type,t.memoryData=this.memoryData,this.alongLine&&(t.alongLine=this.alongLine.isAlongLine,t.alongLineDirection=this.alongLine.alongLineDirection,t.angleFixed=this.alongLine.angleFixed,t.isLabelRepeated=this.alongLine.isLabelRepeated,t.labelRepeatInterval=this.alongLine.labelRepeatInterval,t.repeatedLabelAvoided=this.alongLine.repeatedLabelAvoided,t.repeatIntervalFixed=this.alongLine.repeatIntervalFixed),this.offset&&(t.offsetFixed=this.offset.offsetFixed,t.offsetX=this.offset.offsetX,t.offsetY=this.offset.offsetY),this.text&&(t.maxTextHeight=this.text.maxTextHeight,t.maxTextWidth=this.text.maxTextWidth,t.minTextHeight=this.text.minTextHeight,t.minTextWidth=this.text.minTextWidth,t.uniformStyle=this.text.uniformStyle,t.uniformMixedStyle=this.text.uniformMixedStyle),this.background&&(t.labelBackShape=this.background.labelBackShape,t.backStyle=this.background.backStyle),t.labelOverLengthMode=this.labelOverLengthMode,t.maxLabelLength=this.maxLabelLength,t.smallGeometryLabeled=this.smallGeometryLabeled,t.rangeExpression=this.rangeExpression,t.uniqueExpression=this.uniqueExpression,t.numericPrecision=this.numericPrecision,t.items=this.items,t.uniqueItems=this.uniqueItems,t.labelExpression=this.labelExpression,t.overlapAvoided=this.overlapAvoided,t.matrixCells=this.matrixCells,t.textSpace=this.textSpace,t}}])&&Og(r.prototype,n),o&&Og(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function Ag(t){"@babel/helpers - typeof";return(Ag="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function jg(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ng(n.key),n)}}function Ng(t){var e=function(t,e){if("object"!=Ag(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Ag(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Ag(e)?e:e+""}function Ig(t,e,r){return e=Rg(e),function(t,e){if(e&&("object"===Ag(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Rg(t).constructor):e.apply(t,r))}function Mg(){return(Mg="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Rg(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Rg(t){return(Rg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Lg(t,e){return(Lg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Dg=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=Ig(this,e,["UNIQUE",t])).defaultStyle=new Ir,r.items=null,r.uniqueExpression=null,r.colorGradientType=m.YELLOW_RED,t&&Tt.extend(r,t),r.CLASS_NAME="SuperMap.ThemeUnique",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Lg(t,e)}(e,zb),r=e,o=[{key:"fromObj",value:function(t){var r=new e,n=t.items,o=n?n.length:0;Tt.extend(r,t),r.items=[],r.defaultStyle=Ir.fromJson(t.defaultStyle);for(var i=0;i<o;i++)r.items.push(eg.fromObj(n[i]));return r}}],(n=[{key:"destroy",value:function(){Mg(Rg(e.prototype),"destroy",this).call(this);var t=this;if(t.uniqueExpression=null,t.colorGradientType=null,t.items){if(t.items.length>0)for(var r in t.items)t.items[r].destroy(),t.items[r]=null;t.items=null}t.defaultStyle&&(t.defaultStyle.destroy(),t.defaultStyle=null)}},{key:"toServerJSONObject",value:function(){var t={};if((t=Tt.copyAttributes(t,this)).defaultStyle&&t.defaultStyle.toServerJSONObject&&(t.defaultStyle=t.defaultStyle.toServerJSONObject()),t.items){for(var e=[],r=t.items.length,n=0;n<r;n++)e.push(t.items[n].toServerJSONObject());t.items=e}return t}}])&&jg(r.prototype,n),o&&jg(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function Bg(t){"@babel/helpers - typeof";return(Bg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Fg(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ug(n.key),n)}}function Ug(t){var e=function(t,e){if("object"!=Bg(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Bg(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Bg(e)?e:e+""}var Gg=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.axesColor=new kr(0,0,0),this.axesDisplayed=!1,this.axesGridDisplayed=!1,this.axesTextDisplayed=!1,this.axesTextStyle=new Wb,e&&Tt.extend(this,e),this.CLASS_NAME="SuperMap.ThemeGraphAxes"}return e=t,n=[{key:"fromObj",value:function(e){if(e){var r=new t;return Tt.copy(r,e),r.axesColor=kr.fromJson(e.axesColor),r.axesTextStyle=Wb.fromObj(e.axesTextStyle),r}}}],(r=[{key:"destroy",value:function(){var t=this;t.axesColor&&(t.axesColor.destroy(),t.axesColor=null),t.axesDisplayed=null,t.axesGridDisplayed=null,t.axesTextDisplayed=null,t.axesTextStyle&&(t.axesTextStyle.destroy(),t.axesTextStyle=null)}}])&&Fg(e.prototype,r),n&&Fg(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,r,n}();function Vg(t){"@babel/helpers - typeof";return(Vg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function zg(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Hg(n.key),n)}}function Hg(t){var e=function(t,e){if("object"!=Vg(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Vg(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Vg(e)?e:e+""}var qg=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.maxGraphSize=0,this.minGraphSize=0,e&&Tt.extend(this,e),this.CLASS_NAME="SuperMap.ThemeGraphSize"}return e=t,n=[{key:"fromObj",value:function(e){var r=new t;return Tt.copy(r,e),r}}],(r=[{key:"destroy",value:function(){this.maxGraphSize=null,this.minGraphSize=null}}])&&zg(e.prototype,r),n&&zg(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,r,n}();function Jg(t){"@babel/helpers - typeof";return(Jg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Wg(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Kg(n.key),n)}}function Kg(t){var e=function(t,e){if("object"!=Jg(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Jg(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Jg(e)?e:e+""}var Yg=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.graphTextDisplayed=!1,this.graphTextFormat=p.CAPTION,this.graphTextStyle=new Wb,e&&Tt.extend(this,e),this.CLASS_NAME="SuperMap.ThemeGraphText"}return e=t,n=[{key:"fromObj",value:function(e){var r=new t;return Tt.copy(r,e),r.graphTextStyle=Wb.fromObj(e.graphTextStyle),r}}],(r=[{key:"destroy",value:function(){var t=this;t.graphTextDisplayed=null,t.graphTextFormat=null,t.graphTextStyle&&(t.graphTextStyle.destroy(),t.graphTextStyle=null)}}])&&Wg(e.prototype,r),n&&Wg(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,r,n}();function Qg(t){"@babel/helpers - typeof";return(Qg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Xg(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Zg(n.key),n)}}function Zg(t){var e=function(t,e){if("object"!=Qg(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Qg(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Qg(e)?e:e+""}var $g=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.caption=null,this.graphExpression=null,this.memoryDoubleValues=null,this.uniformStyle=new Ir,e&&Tt.extend(this,e),this.CLASS_NAME="SuperMap.ThemeGraphItem"}return e=t,n=[{key:"fromObj",value:function(e){if(e){var r=new t;return Tt.copy(r,e),r.uniformStyle=Ir.fromJson(e.uniformStyle),r}}}],(r=[{key:"destroy",value:function(){this.caption=null,this.graphExpression=null,this.memoryDoubleValues=null,this.uniformStyle=null}}])&&Xg(e.prototype,r),n&&Xg(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,r,n}();function tS(t){"@babel/helpers - typeof";return(tS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function eS(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,rS(n.key),n)}}function rS(t){var e=function(t,e){if("object"!=tS(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=tS(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==tS(e)?e:e+""}function nS(t,e,r){return e=iS(e),function(t,e){if(e&&("object"===tS(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],iS(t).constructor):e.apply(t,r))}function oS(){return(oS="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=iS(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function iS(t){return(iS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function aS(t,e){return(aS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var sS=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=nS(this,e,["GRAPH",t])).barWidth=0,r.graduatedMode=d.CONSTANT,r.graphAxes=new Gg,r.graphSize=new qg,r.graphSizeFixed=!1,r.graphText=new Yg,r.graphType=h.AREA,r.graphAxesTextDisplayMode=y.NONE,r.items=null,r.memoryKeys=null,r.negativeDisplayed=!1,r.offset=new ig,r.overlapAvoided=!0,r.roseAngle=0,r.startAngle=0,t&&Tt.extend(r,t),r.CLASS_NAME="SuperMap.ThemeGraph",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&aS(t,e)}(e,zb),r=e,o=[{key:"fromObj",value:function(t){var r=new e,n=t.items,o=n?n.length:0;Tt.copy(r,t),r.items=[],r.graphAxes=Gg.fromObj(t),r.graphSize=qg.fromObj(t),r.graphText=Yg.fromObj(t),r.offset=ig.fromObj(t);for(var i=0;i<o;i++)r.items.push($g.fromObj(n[i]));return r}}],(n=[{key:"destroy",value:function(){oS(iS(e.prototype),"destroy",this).call(this);var t=this;if(t.barWidth=null,t.graduatedMode=null,t.graphAxes&&(t.graphAxes.destroy(),t.graphAxes=null),t.graphSize&&(t.graphSize.destroy(),t.graphSize=null),t.graphSizeFixed=null,t.graphText&&(t.graphText.destroy(),t.graphText=null),t.graphType=null,t.items){for(var r=0,n=t.items,o=n.length;r<o;r++)n[r].destroy();t.items=null}t.memoryKeys=null,t.negativeDisplayed=null,t.offset&&(t.offset.destroy(),t.offset=null),t.overlapAvoided=null,t.roseAngle=null,t.startAngle=null,t.graphAxesTextDisplayMode=null}},{key:"toJSON",value:function(){return Tt.toJSON(this.toServerJSONObject())}},{key:"toServerJSONObject",value:function(){var t={};return t.type=this.type,this.graphText&&(t.graphTextDisplayed=this.graphText.graphTextDisplayed,t.graphTextFormat=this.graphText.graphTextFormat,t.graphTextStyle=this.graphText.graphTextStyle),this.graphAxes&&(t.axesColor=this.graphAxes.axesColor,t.axesDisplayed=this.graphAxes.axesDisplayed,t.axesGridDisplayed=this.graphAxes.axesGridDisplayed,t.axesTextDisplayed=this.graphAxes.axesTextDisplayed,t.axesTextStyle=this.graphAxes.axesTextStyle),this.graphSize&&(t.maxGraphSize=this.graphSize.maxGraphSize,t.minGraphSize=this.graphSize.minGraphSize),this.offset&&(t.offsetFixed=this.offset.offsetFixed,t.offsetX=this.offset.offsetX,t.offsetY=this.offset.offsetY),t.barWidth=this.barWidth,t.graduatedMode=this.graduatedMode,t.graphSizeFixed=this.graphSizeFixed,t.graphType=this.graphType,t.graphAxesTextDisplayMode=this.graphAxesTextDisplayMode,t.items=this.items,t.memoryKeys=this.memoryKeys,t.negativeDisplayed=this.negativeDisplayed,t.overlapAvoided=this.overlapAvoided,t.roseAngle=this.roseAngle,t.startAngle=this.startAngle,t}}])&&eS(r.prototype,n),o&&eS(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function uS(t){"@babel/helpers - typeof";return(uS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function lS(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,cS(n.key),n)}}function cS(t){var e=function(t,e){if("object"!=uS(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=uS(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==uS(e)?e:e+""}function fS(t,e,r){return e=pS(e),function(t,e){if(e&&("object"===uS(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],pS(t).constructor):e.apply(t,r))}function pS(t){return(pS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function hS(t,e){return(hS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var yS=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=fS(this,e,["DOTDENSITY",t])).dotExpression=null,r.style=new Ir,r.value=null,t&&Tt.extend(r,t),r.CLASS_NAME="SuperMap.ThemeDotDensity",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&hS(t,e)}(e,zb),r=e,o=[{key:"fromObj",value:function(t){if(t){var r=new e;return Tt.copy(r,t),r.style=Ir.fromJson(t.style),r}}}],(n=[{key:"destroy",value:function(){var t=this;t.dotExpression=null,t.value=null,t.style&&(t.style.destroy(),t.style=null)}},{key:"toServerJSONObject",value:function(){var t={};return(t=Tt.copyAttributes(t,this)).style&&t.style.toServerJSONObject&&(t.style=t.style.toServerJSONObject()),t}}])&&lS(r.prototype,n),o&&lS(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function dS(t){"@babel/helpers - typeof";return(dS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function vS(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,mS(n.key),n)}}function mS(t){var e=function(t,e){if("object"!=dS(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=dS(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==dS(e)?e:e+""}var bS=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.negativeDisplayed=!1,this.negativeStyle=new Ir,this.positiveStyle=new Ir,this.zeroDisplayed=!1,this.zeroStyle=new Ir,e&&Tt.extend(this,e),this.CLASS_NAME="SuperMap.ThemeGraduatedSymbolStyle"}return e=t,n=[{key:"fromObj",value:function(e){if(e){var r=new t;return Tt.copy(r,e),r.negativeStyle=Ir.fromJson(e.negativeStyle),r.positiveStyle=Ir.fromJson(e.positiveStyle),r.zeroStyle=Ir.fromJson(e.zeroStyle),r}}}],(r=[{key:"destroy",value:function(){var t=this;t.negativeDisplayed=null,t.negativeStyle=null,t.positiveStyle=null,t.zeroDisplayed=null,t.zeroStyle=null}}])&&vS(e.prototype,r),n&&vS(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,r,n}();function gS(t){"@babel/helpers - typeof";return(gS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function SS(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,wS(n.key),n)}}function wS(t){var e=function(t,e){if("object"!=gS(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=gS(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==gS(e)?e:e+""}function _S(t,e,r){return e=ES(e),function(t,e){if(e&&("object"===gS(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],ES(t).constructor):e.apply(t,r))}function OS(){return(OS="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ES(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function ES(t){return(ES=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function PS(t,e){return(PS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var xS=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=_S(this,e,["GRADUATEDSYMBOL",t])).baseValue=0,r.expression=null,r.graduatedMode=d.CONSTAN,r.offset=new ig,r.style=new bS,t&&Tt.extend(r,t),r.CLASS_NAME="SuperMap.ThemeGraduatedSymbol",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&PS(t,e)}(e,zb),r=e,o=[{key:"fromObj",value:function(t){if(t){var r=new e;return Tt.copy(r,t),r.offset=ig.fromObj(t),r.style=bS.fromObj(t),r}}}],(n=[{key:"destroy",value:function(){OS(ES(e.prototype),"destroy",this).call(this);var t=this;t.expression=null,t.graduatedMode=d.CONSTANT,t.offset&&(t.offset.destroy(),t.offset=null),t.style&&(t.style.destroy(),t.style=null)}},{key:"toJSON",value:function(){return Tt.toJSON(this.toServerJSONObject())}},{key:"toServerJSONObject",value:function(){var t={};return t.type=this.type,t.memoryData=this.memoryData,t.baseValue=this.baseValue,t.expression=this.expression,t.graduatedMode=this.graduatedMode,this.offset&&(t.offsetFixed=this.offset.offsetFixed,t.offsetX=this.offset.offsetX,t.offsetY=this.offset.offsetY),this.style&&(t.negativeStyle=this.style.negativeStyle,t.negativeDisplayed=this.style.negativeDisplayed,t.positiveStyle=this.style.positiveStyle,t.zeroDisplayed=this.style.zeroDisplayed,t.zeroStyle=this.style.zeroStyle),t}}])&&SS(r.prototype,n),o&&SS(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function TS(t){"@babel/helpers - typeof";return(TS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function CS(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,kS(n.key),n)}}function kS(t){var e=function(t,e){if("object"!=TS(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=TS(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==TS(e)?e:e+""}var AS=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.caption=null,this.end=0,this.start=0,this.style=new Ir,this.visible=!0,e&&Tt.extend(this,e),this.CLASS_NAME="SuperMap.ThemeRangeItem"}return e=t,n=[{key:"fromObj",value:function(e){if(e){var r=new t;return Tt.copy(r,e),r.style=Ir.fromJson(e.style),r}}}],(r=[{key:"destroy",value:function(){var t=this;t.caption=null,t.end=null,t.start=null,t.style&&(t.style.destroy(),t.style=null),t.visible=null}},{key:"toServerJSONObject",value:function(){var t={};return(t=Tt.copyAttributes(t,this)).style&&t.style.toServerJSONObject&&(t.style=t.style.toServerJSONObject()),t}}])&&CS(e.prototype,r),n&&CS(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,r,n}();function jS(t){"@babel/helpers - typeof";return(jS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function NS(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,IS(n.key),n)}}function IS(t){var e=function(t,e){if("object"!=jS(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=jS(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==jS(e)?e:e+""}function MS(t,e,r){return e=LS(e),function(t,e){if(e&&("object"===jS(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],LS(t).constructor):e.apply(t,r))}function RS(){return(RS="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=LS(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function LS(t){return(LS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function DS(t,e){return(DS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var BS=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=MS(this,e,["RANGE",t])).precision="1.0E-12",r.items=null,r.rangeExpression=null,r.rangeMode=v.EQUALINTERVAL,r.rangeParameter=0,r.colorGradientType=m.YELLOW_RED,t&&Tt.extend(r,t),r.CLASS_NAME="SuperMap.ThemeRange",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&DS(t,e)}(e,zb),r=e,o=[{key:"fromObj",value:function(t){if(t){var r=new e;Tt.copy(r,t);var n=t.items,o=n?n.length:0;r.items=[];for(var i=0;i<o;i++)r.items.push(AS.fromObj(n[i]));return r}}}],(n=[{key:"destroy",value:function(){RS(LS(e.prototype),"destroy",this).call(this);var t=this;if(t.items){if(t.items.length>0)for(var r in t.items)t.items[r].destroy(),t.items[r]=null;t.items=null}t.rangeExpression=null,t.rangeMode=null,t.rangeParameter=null,t.colorGradientType=null}}])&&NS(r.prototype,n),o&&NS(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function FS(t){"@babel/helpers - typeof";return(FS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function US(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,GS(n.key),n)}}function GS(t){var e=function(t,e){if("object"!=FS(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=FS(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==FS(e)?e:e+""}var VS=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},this.bounds=null,this.caption=null,this.description=null,this.name=null,this.queryable=null,this.subLayers=null,this.type=null,this.visible=null,Tt.extend(this,e),this.CLASS_NAME="SuperMap.UGCLayer"},(e=[{key:"destroy",value:function(){Tt.reset(this)}},{key:"fromJson",value:function(t){t=t||{},Tt.extend(this,t);var e=this.bounds;e&&(this.bounds=new Dt(e.leftBottom.x,e.leftBottom.y,e.rightTop.x,e.rightTop.y))}},{key:"toServerJSONObject",value:function(){var t={};return(t=Tt.copyAttributes(t,this)).bounds&&t.bounds.toServerJSONObject&&(t.bounds=t.bounds.toServerJSONObject()),t}}])&&US(t.prototype,e),r&&US(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function zS(t){"@babel/helpers - typeof";return(zS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function HS(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,qS(n.key),n)}}function qS(t){var e=function(t,e){if("object"!=zS(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=zS(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==zS(e)?e:e+""}function JS(t,e,r){return e=KS(e),function(t,e){if(e&&("object"===zS(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],KS(t).constructor):e.apply(t,r))}function WS(){return(WS="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=KS(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function KS(t){return(KS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function YS(t,e){return(YS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var QS=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=JS(this,e,[t=t||{}])).completeLineSymbolDisplayed=null,r.maxScale=null,r.minScale=null,r.minVisibleGeometrySize=null,r.opaqueRate=null,r.symbolScalable=null,r.symbolScale=null,r.overlapDisplayed=null,r.overlapDisplayedOptions=null,r.CLASS_NAME="SuperMap.UGCMapLayer",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&YS(t,e)}(e,VS),r=e,(n=[{key:"destroy",value:function(){WS(KS(e.prototype),"destroy",this).call(this),Tt.reset(this)}},{key:"fromJson",value:function(t){WS(KS(e.prototype),"fromJson",this).call(this,t)}},{key:"toServerJSONObject",value:function(){return WS(KS(e.prototype),"toServerJSONObject",this).call(this)}}])&&HS(r.prototype,n),o&&HS(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function XS(t){"@babel/helpers - typeof";return(XS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ZS(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,$S(n.key),n)}}function $S(t){var e=function(t,e){if("object"!=XS(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=XS(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==XS(e)?e:e+""}var tw=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.foreignTableName=null,this.joinFilter=null,this.joinType=null,e&&Tt.extend(this,e),this.CLASS_NAME="SuperMap.JoinItem"},(e=[{key:"destroy",value:function(){this.foreignTableName=null,this.joinFilter=null,this.joinType=null}},{key:"toServerJSONObject",value:function(){var t={};return t=Tt.copyAttributes(t,this)}}])&&ZS(t.prototype,e),r&&ZS(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function ew(t){"@babel/helpers - typeof";return(ew="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function rw(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,nw(n.key),n)}}function nw(t){var e=function(t,e){if("object"!=ew(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=ew(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ew(e)?e:e+""}function ow(t,e,r){return e=aw(e),function(t,e){if(e&&("object"===ew(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],aw(t).constructor):e.apply(t,r))}function iw(){return(iw="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=aw(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function aw(t){return(aw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function sw(t,e){return(sw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var uw=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=ow(this,e,[t=t||{}])).datasetInfo=null,r.displayFilter=null,r.joinItems=null,r.representationField=null,r.ugcLayerType=null,r.CLASS_NAME="SuperMap.UGCSubLayer",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&sw(t,e)}(e,QS),r=e,(n=[{key:"fromJson",value:function(t){if(iw(aw(e.prototype),"fromJson",this).call(this,t),this.datasetInfo&&(this.datasetInfo=new hc(this.datasetInfo)),this.joinItems&&this.joinItems.length){for(var r=[],n=0;n<this.joinItems.length;n++)r[n]=new tw(this.joinItems[n]);this.joinItems=r}}},{key:"destroy",value:function(){iw(aw(e.prototype),"destroy",this).call(this),Tt.reset(this)}},{key:"toServerJSONObject",value:function(){var t=iw(aw(e.prototype),"toServerJSONObject",this).call(this);if(t.joinItems){for(var r=[],n=0;n<t.joinItems.length;n++)t.joinItems[n].toServerJSONObject&&(r[n]=t.joinItems[n].toServerJSONObject());t.joinItems=r}return t.datasetInfo&&t.datasetInfo.toServerJSONObject&&(t.datasetInfo=t.datasetInfo.toServerJSONObject()),t}}])&&rw(r.prototype,n),o&&rw(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function lw(t){"@babel/helpers - typeof";return(lw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function cw(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,fw(n.key),n)}}function fw(t){var e=function(t,e){if("object"!=lw(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=lw(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==lw(e)?e:e+""}function pw(t,e,r){return e=yw(e),function(t,e){if(e&&("object"===lw(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],yw(t).constructor):e.apply(t,r))}function hw(){return(hw="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=yw(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function yw(t){return(yw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function dw(t,e){return(dw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var vw=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=pw(this,e,[t=t||{}])).theme=null,r.themeElementPosition=null,r.CLASS_NAME="SuperMap.ServerTheme",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&dw(t,e)}(e,uw),r=e,(n=[{key:"destroy",value:function(){hw(yw(e.prototype),"destroy",this).call(this),Tt.reset(this)}},{key:"fromJson",value:function(t){hw(yw(e.prototype),"fromJson",this).call(this,t);var r=this.theme;switch(r&&r.type){case"LABEL":this.theme=kg.fromObj(r);break;case"UNIQUE":this.theme=Dg.fromObj(r);break;case"GRAPH":this.theme=sS.fromObj(r);break;case"DOTDENSITY":this.theme=yS.fromObj(r);break;case"GRADUATEDSYMBOL":this.theme=xS.fromObj(r);break;case"RANGE":this.theme=BS.fromObj(r)}this.themeElementPosition&&(this.themeElementPosition=new It(this.themeElementPosition.x,this.themeElementPosition.y))}},{key:"toServerJSONObject",value:function(){var t=hw(yw(e.prototype),"toServerJSONObject",this).call(this);return t.themeElementPosition&&t.themeElementPosition.toServerJSONObject&&(t.themeElementPosition=t.themeElementPosition.toServerJSONObject()),t.theme&&t.theme.toServerJSONObject&&(t.theme=t.theme.toServerJSONObject()),t}}])&&cw(r.prototype,n),o&&cw(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function mw(t){"@babel/helpers - typeof";return(mw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function bw(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,gw(n.key),n)}}function gw(t){var e=function(t,e){if("object"!=mw(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=mw(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==mw(e)?e:e+""}function Sw(t,e,r){return e=_w(e),function(t,e){if(e&&("object"===mw(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],_w(t).constructor):e.apply(t,r))}function ww(){return(ww="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=_w(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function _w(t){return(_w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ow(t,e){return(Ow=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Ew=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=Sw(this,e,[t=t||{}])).colorDictionarys=null,r.brightness=null,r.colorGradientType=null,r.colors=null,r.contrast=null,r.dashStyle=null,r.gridType=null,r.horizontalSpacing=null,r.sizeFixed=null,r.solidStyle=null,r.specialColor=null,r.specialValue=null,r.specialValueTransparent=null,r.verticalSpacing=null,r.CLASS_NAME="SuperMap.Grid",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ow(t,e)}(e,uw),r=e,(n=[{key:"destroy",value:function(){ww(_w(e.prototype),"destroy",this).call(this),Tt.reset(this)}},{key:"fromJson",value:function(t){if(ww(_w(e.prototype),"fromJson",this).call(this,t),this.specialColor&&(this.specialColor=new kr(this.specialColor.red,this.specialColor.green,this.specialColor.blue)),this.colors){var r,n=[];for(var o in this.colors)r=this.colors[o],n.push(new kr(r.red,r.green,r.blue));this.colors=n}if(this.dashStyle&&(this.dashStyle=new Ir(this.dashStyle)),this.solidStyle&&(this.solidStyle=new Ir(this.solidStyle)),this.colorDictionary){var i,a=[];for(var s in this.colorDictionary)i=this.colorDictionary[s],a.push(new Ll({elevation:s,color:i}));this.colorDictionarys=a}delete this.colorDictionary}},{key:"toServerJSONObject",value:function(){var t=ww(_w(e.prototype),"toServerJSONObject",this).call(this);return t.dashStyle&&t.dashStyle.toServerJSONObject&&(t.dashStyle=t.dashStyle.toServerJSONObject()),t.solidStyle&&t.solidStyle.toServerJSONObject&&(t.solidStyle=t.solidStyle.toServerJSONObject()),t}}])&&bw(r.prototype,n),o&&bw(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function Pw(t){"@babel/helpers - typeof";return(Pw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function xw(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Tw(n.key),n)}}function Tw(t){var e=function(t,e){if("object"!=Pw(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Pw(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Pw(e)?e:e+""}function Cw(t,e,r){return e=Aw(e),function(t,e){if(e&&("object"===Pw(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Aw(t).constructor):e.apply(t,r))}function kw(){return(kw="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Aw(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Aw(t){return(Aw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function jw(t,e){return(jw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Nw=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=Cw(this,e,[t=t||{}])).brightness=null,r.colorSpaceType=null,r.contrast=null,r.displayBandIndexes=null,r.transparent=null,r.transparentColor=null,r.transparentColorTolerance=null,r.CLASS_NAME="SuperMap.Image",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&jw(t,e)}(e,uw),r=e,(n=[{key:"destroy",value:function(){kw(Aw(e.prototype),"destroy",this).call(this),Tt.reset(this)}},{key:"fromJson",value:function(t){kw(Aw(e.prototype),"fromJson",this).call(this,t),this.transparentColor&&(this.transparentColor=new kr(this.transparentColor.red,this.transparentColor.green,this.transparentColor.blue))}},{key:"toServerJSONObject",value:function(){return kw(Aw(e.prototype),"toServerJSONObject",this).call(this)}}])&&xw(r.prototype,n),o&&xw(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function Iw(t){"@babel/helpers - typeof";return(Iw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Mw(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Rw(n.key),n)}}function Rw(t){var e=function(t,e){if("object"!=Iw(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Iw(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Iw(e)?e:e+""}function Lw(t,e,r){return e=Bw(e),function(t,e){if(e&&("object"===Iw(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Bw(t).constructor):e.apply(t,r))}function Dw(){return(Dw="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Bw(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Bw(t){return(Bw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Fw(t,e){return(Fw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Uw=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=Lw(this,e,[t=t||{}])).style=null,r.CLASS_NAME="SuperMap.Vector",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Fw(t,e)}(e,uw),r=e,(n=[{key:"destroy",value:function(){Dw(Bw(e.prototype),"destroy",this).call(this),Tt.reset(this)}},{key:"fromJson",value:function(t){Dw(Bw(e.prototype),"fromJson",this).call(this,t);var r=this.style;r&&(this.style=new Ir(r))}},{key:"toServerJSONObject",value:function(){var t=Dw(Bw(e.prototype),"toServerJSONObject",this).call(this);return t.style&&t.style.toServerJSONObject&&(t.style=t.style.toServerJSONObject()),t}}])&&Mw(r.prototype,n),o&&Mw(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function Gw(t){"@babel/helpers - typeof";return(Gw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Vw(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,zw(n.key),n)}}function zw(t){var e=function(t,e){if("object"!=Gw(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Gw(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Gw(e)?e:e+""}function Hw(t,e,r){return e=Jw(e),function(t,e){if(e&&("object"===Gw(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Jw(t).constructor):e.apply(t,r))}function qw(){return(qw="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Jw(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Jw(t){return(Jw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ww(t,e){return(Ww=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Kw=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Hw(this,e,[t,r])).isTempLayers=!1,r&&Tt.extend(n,r),n.CLASS_NAME="SuperMap.GetLayersInfoService",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ww(t,e)}(e,Ki),r=e,(n=[{key:"destroy",value:function(){qw(Jw(e.prototype),"destroy",this).call(this),Tt.reset(this)}},{key:"processAsync",value:function(t){var e=this;return e.isTempLayers||(e.url=Tt.urlPathAppend(e.url,"layers")),e.request({method:"GET",params:null,scope:e,success:t,failure:t})}},{key:"transformResult",value:function(t,e){var r,n;return n=(r=!!(t=Tt.transformResult(t))&&t.length>0?t[0].subLayers.layers:null)?r.length:0,this.handleLayers(n,r),{result:t[0],options:e}}},{key:"handleLayers",value:function(t,e){var r;if(t)for(var n=0;n<t;n++){if(e[n].subLayers&&e[n].subLayers.layers&&e[n].subLayers.layers.length>0)this.handleLayers(e[n].subLayers.layers.length,e[n].subLayers.layers);else switch(e[n].ugcLayerType){case"THEME":(r=new vw).fromJson(e[n]),e[n]=r;break;case"GRID":(r=new Ew).fromJson(e[n]),e[n]=r;break;case"IMAGE":(r=new Nw).fromJson(e[n]),e[n]=r;break;case"VECTOR":(r=new Uw).fromJson(e[n]),e[n]=r}}}}])&&Vw(r.prototype,n),o&&Vw(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function Yw(t){"@babel/helpers - typeof";return(Yw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Qw(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Xw(n.key),n)}}function Xw(t){var e=function(t,e){if("object"!=Yw(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Yw(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Yw(e)?e:e+""}var Zw=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e&&(this.bounds=null,this.searchRadius=0,this.zValueFieldName=null,this.zValueScale=1,this.resolution=null,this.filterQueryParameter=null,this.outputDatasetName=null,this.outputDatasourceName=null,this.pixelFormat=null,this.dataset=null,this.inputPoints=null,this.InterpolationAnalystType="dataset",this.clipParam=null,Tt.extend(this,e),this.CLASS_NAME="SuperMap.InterpolationAnalystParameters")},r=[{key:"toObject",value:function(t,e){for(var r in t)if("inputPoints"===r&&"geometry"===t.InterpolationAnalystType){for(var n=[],o=0;o<t.inputPoints.length;o++){var i=t.inputPoints[o],a={x:i.x,y:i.y,z:i.tag};n.push(a)}e[r]=n}else e[r]=t[r]}}],(e=[{key:"destroy",value:function(){var t=this;t.bounds=null,t.searchRadius=null,t.zValueFieldName=null,t.zValueScale=null,t.resolution=null,t.filterQueryParameter=null,t.outputDatasetName=null,t.pixelFormat=null}}])&&Qw(t.prototype,e),r&&Qw(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function $w(t){"@babel/helpers - typeof";return($w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function t_(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,e_(n.key),n)}}function e_(t){var e=function(t,e){if("object"!=$w(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=$w(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==$w(e)?e:e+""}function r_(t,e,r){return e=o_(e),function(t,e){if(e&&("object"===$w(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],o_(t).constructor):e.apply(t,r))}function n_(){return(n_="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=o_(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function o_(t){return(o_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function i_(t,e){return(i_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var a_=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=r_(this,e,[t])).smooth=.1,r.tension=40,r.searchMode=null,r.expectedCount=12,r.maxPointCountForInterpolation=200,r.maxPointCountInNode=50,t&&Tt.extend(r,t),r.CLASS_NAME="SuperMap.InterpolationRBFAnalystParameters",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&i_(t,e)}(e,Zw),r=e,o=[{key:"toObject",value:function(t,e){for(var r in t)e[r]=t[r]}}],(n=[{key:"destroy",value:function(){n_(o_(e.prototype),"destroy",this).call(this);var t=this;t.smooth=null,t.tension=null,t.searchMode=null,t.expectedCount=null,t.maxPointCountForInterpolation=null,t.maxPointCountInNode=null}}])&&t_(r.prototype,n),o&&t_(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function s_(t){"@babel/helpers - typeof";return(s_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u_(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,l_(n.key),n)}}function l_(t){var e=function(t,e){if("object"!=s_(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=s_(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==s_(e)?e:e+""}function c_(t,e,r){return e=p_(e),function(t,e){if(e&&("object"===s_(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],p_(t).constructor):e.apply(t,r))}function f_(){return(f_="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=p_(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function p_(t){return(p_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function h_(t,e){return(h_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var y_=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r=c_(this,e,[t]),t&&Tt.extend(r,t),r.CLASS_NAME="SuperMap.InterpolationDensityAnalystParameters",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&h_(t,e)}(e,Zw),r=e,(n=[{key:"destroy",value:function(){f_(p_(e.prototype),"destroy",this).call(this)}}])&&u_(r.prototype,n),o&&u_(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function d_(t){"@babel/helpers - typeof";return(d_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function v_(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,m_(n.key),n)}}function m_(t){var e=function(t,e){if("object"!=d_(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=d_(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==d_(e)?e:e+""}function b_(t,e,r){return e=S_(e),function(t,e){if(e&&("object"===d_(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],S_(t).constructor):e.apply(t,r))}function g_(){return(g_="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=S_(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function S_(t){return(S_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function w_(t,e){return(w_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var __=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=b_(this,e,[t])).power=2,r.searchMode=null,r.expectedCount=12,t&&Tt.extend(r,t),r.CLASS_NAME="SuperMap.InterpolationIDWAnalystParameters",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&w_(t,e)}(e,Zw),r=e,(n=[{key:"destroy",value:function(){g_(S_(e.prototype),"destroy",this).call(this);this.power=null,this.searchMode=null,this.expectedCount=null}}])&&v_(r.prototype,n),o&&v_(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function O_(t){"@babel/helpers - typeof";return(O_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function E_(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,P_(n.key),n)}}function P_(t){var e=function(t,e){if("object"!=O_(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=O_(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==O_(e)?e:e+""}function x_(t,e,r){return e=C_(e),function(t,e){if(e&&("object"===O_(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],C_(t).constructor):e.apply(t,r))}function T_(){return(T_="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=C_(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function C_(t){return(C_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function k_(t,e){return(k_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var A_=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=x_(this,e,[t])).type=null,r.mean=null,r.angle=0,r.nugget=0,r.range=0,r.sill=0,r.variogramMode=j.SPHERICAL,r.exponent=N.EXP1,r.searchMode=null,r.expectedCount=12,r.maxPointCountForInterpolation=200,r.maxPointCountInNode=50,t&&Tt.extend(r,t),r.CLASS_NAME="SuperMap.InterpolationKrigingAnalystParameters",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&k_(t,e)}(e,Zw),r=e,(n=[{key:"destroy",value:function(){T_(C_(e.prototype),"destroy",this).call(this);var t=this;t.type=null,t.mean=null,t.angle=null,t.nugget=null,t.range=null,t.sill=null,t.variogramMode=null,t.exponent=null,t.searchMode=null,t.expectedCount=null,t.maxPointCountForInterpolation=null,t.maxPointCountInNode=null}}])&&E_(r.prototype,n),o&&E_(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function j_(t){"@babel/helpers - typeof";return(j_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function N_(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,I_(n.key),n)}}function I_(t){var e=function(t,e){if("object"!=j_(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=j_(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==j_(e)?e:e+""}function M_(t,e,r){return e=L_(e),function(t,e){if(e&&("object"===j_(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],L_(t).constructor):e.apply(t,r))}function R_(){return(R_="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=L_(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function L_(t){return(L_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function D_(t,e){return(D_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var B_=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=M_(this,e,[t,r])).mode=null,r&&Tt.extend(n,r),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&D_(t,e)}(e,qa),r=e,(n=[{key:"destroy",value:function(){R_(L_(e.prototype),"destroy",this).call(this),this.mode=null,this.CLASS_NAME="SuperMap.InterpolationAnalystService"}},{key:"processAsync",value:function(t,e){var r={},n=this;t instanceof y_?(n.mode="Density","geometry"===t.InterpolationAnalystType?n.url=Tt.urlPathAppend(n.url,"geometry/interpolation/density"):n.url=Tt.urlPathAppend(n.url,"datasets/"+t.dataset+"/interpolation/density")):t instanceof __?(n.mode="IDW","geometry"===t.InterpolationAnalystType?n.url=Tt.urlPathAppend(n.url,"geometry/interpolation/idw"):n.url=Tt.urlPathAppend(n.url,"datasets/"+t.dataset+"/interpolation/idw")):t instanceof a_?(n.mode="RBF","geometry"===t.InterpolationAnalystType?n.url=Tt.urlPathAppend(n.url,"geometry/interpolation/rbf"):n.url=Tt.urlPathAppend(n.url,"datasets/"+t.dataset+"/interpolation/rbf")):t instanceof A_&&(n.mode="Kriging","geometry"===t.InterpolationAnalystType?n.url=Tt.urlPathAppend(n.url,"geometry/interpolation/kriging"):n.url=Tt.urlPathAppend(n.url,"datasets/"+t.dataset+"/interpolation/kriging")),Zw.toObject(t,r);var o=Tt.toJSON(r);return n.url=Tt.urlAppend(n.url,"returnContent=true"),n.request({method:"POST",data:o,scope:n,success:e,failure:e})}}])&&N_(r.prototype,n),o&&N_(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function F_(t){"@babel/helpers - typeof";return(F_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function U_(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,G_(n.key),n)}}function G_(t){var e=function(t,e){if("object"!=F_(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=F_(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==F_(e)?e:e+""}var V_=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e&&(this.datasetName="",this.query="",this.resolution=80,this.method=0,this.meshType=0,this.fields="",this.radius=300,this.meshSizeUnit=D.METER,this.radiusUnit=D.METER,this.areaUnit=R.SQUAREMILE,this.output=null,this.mappingParameters=null,Tt.extend(this,e),this.CLASS_NAME="SuperMap.KernelDensityJobParameter")},r=[{key:"toObject",value:function(t,e){for(var r in t)"datasetName"!==r?"output"!==r?(e.analyst=e.analyst||{},"query"===r&&t[r]?e.analyst[r]=t[r].toBBOX():e.analyst[r]=t[r],"mappingParameters"===r&&(e.analyst[r]=e.analyst[r]||{},e.analyst.mappingParameters=t[r])):(e.output=e.output||{},e.output=t[r]):(e.input=e.input||{},e.input[r]=t[r])}}],(e=[{key:"destroy",value:function(){this.datasetName=null,this.query=null,this.resolution=null,this.method=null,this.radius=null,this.meshType=null,this.fields=null,this.meshSizeUnit=null,this.radiusUnit=null,this.areaUnit=null,this.output instanceof Xs&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof eu&&(this.mappingParameters.destroy(),this.mappingParameters=null)}}])&&U_(t.prototype,e),r&&U_(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function z_(t){"@babel/helpers - typeof";return(z_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function H_(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,q_(n.key),n)}}function q_(t){var e=function(t,e){if("object"!=z_(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=z_(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==z_(e)?e:e+""}function J_(t,e,r){return e=K_(e),function(t,e){if(e&&("object"===z_(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],K_(t).constructor):e.apply(t,r))}function W_(){return(W_="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=K_(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function K_(t){return(K_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Y_(t,e){return(Y_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Q_=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=J_(this,e,[t,r])).url=Tt.urlPathAppend(n.url,"spatialanalyst/density"),n.CLASS_NAME="SuperMap.KernelDensityJobsService",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Y_(t,e)}(e,hu),r=e,(n=[{key:"destroy",value:function(){W_(K_(e.prototype),"destroy",this).call(this)}},{key:"getKernelDensityJobs",value:function(t){return W_(K_(e.prototype),"getJobs",this).call(this,this.url,t)}},{key:"getKernelDensityJob",value:function(t,r){return W_(K_(e.prototype),"getJobs",this).call(this,Tt.urlPathAppend(this.url,t),r)}},{key:"addKernelDensityJob",value:function(t,r,n,o){return W_(K_(e.prototype),"addJob",this).call(this,this.url,t,V_,r,n,o)}}])&&H_(r.prototype,n),o&&H_(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function X_(t){"@babel/helpers - typeof";return(X_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Z_(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,$_(n.key),n)}}function $_(t){var e=function(t,e){if("object"!=X_(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=X_(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==X_(e)?e:e+""}var tO=function(t,e,r){return e&&Z_(t.prototype,e),r&&Z_(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.CLASS_NAME="LabelMatrixCell"});function eO(t){"@babel/helpers - typeof";return(eO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function rO(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,nO(n.key),n)}}function nO(t){var e=function(t,e){if("object"!=eO(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=eO(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==eO(e)?e:e+""}function oO(t,e,r){return e=iO(e),function(t,e){if(e&&("object"===eO(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],iO(t).constructor):e.apply(t,r))}function iO(t){return(iO=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function aO(t,e){return(aO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var sO=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=oO(this,e,[t])).height=0,r.pathField=null,r.rotation=0,r.width=0,r.sizeFixed=!1,r.type="IMAGE",t&&Tt.extend(r,t),r.CLASS_NAME="SuperMap.LabelImageCell",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&aO(t,e)}(e,tO),r=e,(n=[{key:"destroy",value:function(){var t=this;t.height=null,t.pathField=null,t.rotation=null,t.width=null,t.sizeFixed=null}}])&&rO(r.prototype,n),o&&rO(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function uO(t){"@babel/helpers - typeof";return(uO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function lO(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,cO(n.key),n)}}function cO(t){var e=function(t,e){if("object"!=uO(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=uO(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==uO(e)?e:e+""}function fO(t,e,r){return e=pO(e),function(t,e){if(e&&("object"===uO(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],pO(t).constructor):e.apply(t,r))}function pO(t){return(pO=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function hO(t,e){return(hO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var yO=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=fO(this,e,[t])).style=new Ir,r.symbolIDField=null,r.type="SYMBOL",t&&Tt.extend(r,t),r.CLASS_NAME="SuperMap.LabelSymbolCell",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&hO(t,e)}(e,tO),r=e,(n=[{key:"destroy",value:function(){this.style&&(this.style.destroy(),this.style=null),this.symbolIDField=null}}])&&lO(r.prototype,n),o&&lO(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function dO(t){"@babel/helpers - typeof";return(dO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function vO(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,mO(n.key),n)}}function mO(t){var e=function(t,e){if("object"!=dO(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=dO(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==dO(e)?e:e+""}function bO(t,e,r){return e=gO(e),function(t,e){if(e&&("object"===dO(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],gO(t).constructor):e.apply(t,r))}function gO(t){return(gO=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function SO(t,e){return(SO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var wO=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=bO(this,e,[t])).themeLabel=new kg,r.type="THEME",t&&Tt.extend(r,t),r.CLASS_NAME=" SuperMap.LabelThemeCell",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&SO(t,e)}(e,tO),r=e,(n=[{key:"destroy",value:function(){this.themeLabel&&(this.themeLabel.destroy(),this.themeLabel=null)}}])&&vO(r.prototype,n),o&&vO(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function _O(t){"@babel/helpers - typeof";return(_O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function OO(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,EO(n.key),n)}}function EO(t){var e=function(t,e){if("object"!=_O(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=_O(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==_O(e)?e:e+""}var PO=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.layerName=null,this.isVisible=null,this.displayFilter=null,this.fieldValuesDisplayFilter=null,e&&Tt.extend(this,e),this.CLASS_NAME="SuperMap.LayerStatus"},(e=[{key:"destroy",value:function(){this.layerName=null,this.isVisible=null,this.displayFilter=null}},{key:"toJSON",value:function(){var t="{";t+='"type":"UGC",';var e=[];return this.layerName&&(e.push('"name":"'+this.layerName+'"'),e.push('"visible":'+this.isVisible)),this.displayFilter&&e.push('"displayFilter":"'+this.displayFilter+'"'),(this.minScale||0==this.minScale)&&e.push('"minScale":'+this.minScale),(this.maxScale||0==this.maxScale)&&e.push('"maxScale":'+this.maxScale),this.fieldValuesDisplayFilter&&e.push('"fieldValuesDisplayFilter":'+Tt.toJSON(this.fieldValuesDisplayFilter)),t+=e,t+="}"}}])&&OO(t.prototype,e),r&&OO(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function xO(t){"@babel/helpers - typeof";return(xO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function TO(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,CO(n.key),n)}}function CO(t){var e=function(t,e){if("object"!=xO(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=xO(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==xO(e)?e:e+""}var kO=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.datasourceConnectionInfo=null,this.foreignKeys=null,this.foreignTable=null,this.linkFields=null,this.linkFilter=null,this.name=null,this.primaryKeys=null,e&&Tt.extend(this,e),this.CLASS_NAME="SuperMap.LinkItem"},(e=[{key:"destroy",value:function(){var t=this;t.datasourceConnectionInfo instanceof Ws&&(t.datasourceConnectionInfo.destroy(),t.datasourceConnectionInfo=null),t.foreignKeys=null,t.foreignTable=null,t.linkFields=null,t.linkFilter=null,t.name=null,t.primaryKeys=null}}])&&TO(t.prototype,e),r&&TO(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function AO(t){"@babel/helpers - typeof";return(AO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function jO(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,NO(n.key),n)}}function NO(t){var e=function(t,e){if("object"!=AO(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=AO(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==AO(e)?e:e+""}function IO(t,e,r){return e=RO(e),function(t,e){if(e&&("object"===AO(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],RO(t).constructor):e.apply(t,r))}function MO(){return(MO="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=RO(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function RO(t){return(RO=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function LO(t,e){return(LO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var DO=function(t){function e(t,r){var n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=IO(this,e,[t,r])).projection=null,n.CLASS_NAME="SuperMap.MapService",r&&Tt.extend(n,r);var o=n;if(o.projection){var i=o.projection.split(":");i instanceof Array&&(2===i.length&&(o.url=Tt.urlAppend(o.url,"prjCoordSys=".concat(encodeURIComponent('{"epsgCode":"'.concat(i[1],'"}'))))),1===i.length&&(o.url=Tt.urlAppend(o.url,"prjCoordSys=".concat(encodeURIComponent('{"epsgCode":"'.concat(i[0],'"}'))))))}return n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&LO(t,e)}(e,Ki),r=e,(n=[{key:"destroy",value:function(){MO(RO(e.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t){return this.request({method:"GET",scope:this,success:t,failure:t})}},{key:"transformResult",value:function(t,e){var r=(t=Tt.transformResult(t)).code>=200&&t.code<300||0==t.code||304===t.code,n=t.code&&r;return!t.code||n?{result:t,options:e}:{error:t,options:e}}}])&&jO(r.prototype,n),o&&jO(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function BO(t){"@babel/helpers - typeof";return(BO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function FO(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,UO(n.key),n)}}function UO(t){var e=function(t,e){if("object"!=BO(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=BO(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==BO(e)?e:e+""}var GO=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e&&(this.dataset=null,this.extractRegion=null,this.expression=null,this.isZip=!1,this.ignoreNoValue=!1,this.targetDatasource=null,this.resultGridName=null,this.deleteExistResultDataset=!1,Tt.extend(this,e),this.CLASS_NAME="SuperMap.MathExpressionAnalysisParameters")},r=[{key:"toObject",value:function(t,e){for(var r in t)if("dataset"!==r&&(e[r]=t[r]),"extractRegion"===r&&t[r]){for(var n=t[r].components[0].components,o={},i=[],a=n.length,s=0;s<a-1;s++){var u={};u.x=n[s].x,u.y=n[s].y,i.push(u)}o.points=i,o.type="REGION",e[r]=o}}}],(e=[{key:"destroy",value:function(){var t=this;t.dataset=null,t.bounds=null,t.expression=null,t.isZip=!0,t.ignoreNoValue=!0,t.targetDatasource=null,t.resultGridName=null,t.deleteExistResultDataset=null}}])&&FO(t.prototype,e),r&&FO(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function VO(t){"@babel/helpers - typeof";return(VO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function zO(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,HO(n.key),n)}}function HO(t){var e=function(t,e){if("object"!=VO(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=VO(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==VO(e)?e:e+""}function qO(t,e,r){return e=WO(e),function(t,e){if(e&&("object"===VO(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],WO(t).constructor):e.apply(t,r))}function JO(){return(JO="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=WO(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function WO(t){return(WO=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function KO(t,e){return(KO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var YO=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=qO(this,e,[t,r])).CLASS_NAME="SuperMap.MathExpressionAnalysisService",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&KO(t,e)}(e,qa),r=e,(n=[{key:"destroy",value:function(){JO(WO(e.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){var r=this,n={};t instanceof GO&&(r.url=Tt.urlPathAppend(r.url,"datasets/"+t.dataset+"/mathanalyst")),GO.toObject(t,n);var o=Tt.toJSON(n);return r.url=Tt.urlAppend(r.url,"returnContent=true"),r.request({method:"POST",data:o,scope:r,success:e,failure:e})}}])&&zO(r.prototype,n),o&&zO(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function QO(t){"@babel/helpers - typeof";return(QO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function XO(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ZO(n.key),n)}}function ZO(t){var e=function(t,e){if("object"!=QO(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=QO(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==QO(e)?e:e+""}var $O=function(){return t=function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e&&(this.geometry=e,this.unit=c.METER,this.prjCoordSys=null,this.distanceMode=null,r&&Tt.extend(this,r),this.CLASS_NAME="SuperMap.MeasureParameters")},(e=[{key:"destroy",value:function(){this.geometry=null,this.unit=null,this.prjCoordSys=null}}])&&XO(t.prototype,e),r&&XO(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function tE(t){"@babel/helpers - typeof";return(tE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function eE(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,rE(n.key),n)}}function rE(t){var e=function(t,e){if("object"!=tE(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=tE(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==tE(e)?e:e+""}function nE(t,e,r){return e=iE(e),function(t,e){if(e&&("object"===tE(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],iE(t).constructor):e.apply(t,r))}function oE(){return(oE="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=iE(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function iE(t){return(iE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function aE(t,e){return(aE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var sE=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=nE(this,e,[t,r])).measureMode=l.DISTANCE,r&&Tt.extend(n,r),n.CLASS_NAME="SuperMap.MeasureService",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&aE(t,e)}(e,Ki),r=e,(n=[{key:"destroy",value:function(){oE(iE(e.prototype),"destroy",this).call(this);this.measureMode=null}},{key:"processAsync",value:function(t,e){if(t instanceof $O){var r,n,o=this,i=t.geometry;if(i){o.url=Tt.urlPathAppend(o.url,o.measureMode===l.AREA?"area":"distance");var a,s,u,c=Xr.fromGeometry(i);if(c)return r=c.parts[0],n=c.points.splice(0,r),t.prjCoordSys?("object"===tE(t.prjCoordSys)?a='{"epsgCode"'+(s=t.prjCoordSys.projCode).substring(s.indexOf(":"),s.length)+"}":"string"==typeof t.prjCoordSys&&(a='{"epsgCode"'+t.prjCoordSys.substring(t.prjCoordSys.indexOf(":"),t.prjCoordSys.length)+"}"),u={point2Ds:Tt.toJSON(n),unit:t.unit,prjCoordSys:a,distanceMode:t.distanceMode||"Geodesic"}):u={point2Ds:Tt.toJSON(n),unit:t.unit,distanceMode:t.distanceMode||"Geodesic"},o.request({method:"GET",params:u,scope:o,success:e,failure:e})}}}}])&&eE(r.prototype,n),o&&eE(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function uE(t){"@babel/helpers - typeof";return(uE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function lE(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,cE(n.key),n)}}function cE(t){var e=function(t,e){if("object"!=uE(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=uE(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==uE(e)?e:e+""}var fE=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},this.allowPointOverlap=!0,this.allowPointWithTextDisplay=!0,this.allowTextOverlap=!1,this.allowTextAndPointOverlap=!0,this.allowThemeGraduatedSymbolOverlap=!1,this.allowThemeGraphOverlap=!1,this.horizontalOverlappedSpaceSize=0,this.verticalOverlappedSpaceSize=0,Tt.extend(this,e),this.ugcLayer=new VS(e),this.CLASS_NAME="SuperMap.OverlapDisplayedOptions"},(e=[{key:"destroy",value:function(){Tt.reset(this)}},{key:"fromJson",value:function(t){this.ugcLayer.fromJson.apply(this,[t])}},{key:"toServerJSONObject",value:function(){return this.ugcLayer.toServerJSONObject.apply(this,arguments)}},{key:"toString",value:function(){var t=this.ugcLayer.toServerJSONObject.apply(this,arguments),e="{";for(var r in t)t.hasOwnProperty(r)&&(e+="'"+r+"':"+t[r]+",");return e=e.substr(0,e.length-1),e+="}"}}])&&lE(t.prototype,e),r&&lE(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function pE(t){"@babel/helpers - typeof";return(pE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function hE(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,yE(n.key),n)}}function yE(t){var e=function(t,e){if("object"!=pE(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=pE(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==pE(e)?e:e+""}function dE(t,e,r){return e=mE(e),function(t,e){if(e&&("object"===pE(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],mE(t).constructor):e.apply(t,r))}function vE(){return(vE="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=mE(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function mE(t){return(mE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function bE(t,e){return(bE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var gE=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=dE(this,e,[t,r])).mode=null,r&&Tt.extend(n,r),n.CLASS_NAME="SuperMap.OverlayAnalystService",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&bE(t,e)}(e,qa),r=e,(n=[{key:"destroy",value:function(){vE(mE(e.prototype),"destroy",this).call(this),this.mode=null}},{key:"processAsync",value:function(t,e){var r={},n=this;t instanceof Pc?(n.mode="datasets",n.url=Tt.urlPathAppend(n.url,"datasets/"+t.sourceDataset+"/overlay"),Pc.toObject(t,r)):t instanceof qd&&(n.mode="geometry",t.operateGeometries&&t.sourceGeometries?(n.url=Tt.urlPathAppend(n.url,"geometry/overlay/batch"),n.url=Tt.urlAppend(n.url,"ignoreAnalystParam=true")):n.url=Tt.urlPathAppend(n.url,"geometry/overlay"),qd.toObject(t,r)),this.returnContent=!0;var o=Tt.toJSON(r);return n.request({method:"POST",data:o,scope:n,success:e,failure:e})}},{key:"dataFormat",value:function(){return[o.GEOJSON,o.ISERVER,o.FGB]}}])&&hE(r.prototype,n),i&&hE(r,i),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,i}();function SE(t){"@babel/helpers - typeof";return(SE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function wE(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,_E(n.key),n)}}function _E(t){var e=function(t,e){if("object"!=SE(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=SE(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==SE(e)?e:e+""}var OE=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e&&(this.datasetName="",this.datasetOverlay="",this.mode="",this.srcFields="",this.overlayFields="",this.output=null,this.mappingParameters=null,Tt.extend(this,e),this.CLASS_NAME="SuperMap.OverlayGeoJobParameter")},r=[{key:"toObject",value:function(t,e){for(var r in t)"datasetName"!=r?"output"!==r?(e.analyst=e.analyst||{},e.analyst[r]=t[r],"mappingParameters"===r&&(e.analyst[r]=e.analyst[r]||{},e.analyst.mappingParameters=t[r])):(e.output=e.output||{},e.output=t[r]):(e.input=e.input||{},e.input[r]=t[r])}}],(e=[{key:"destroy",value:function(){this.datasetName=null,this.datasetOverlay=null,this.mode=null,this.srcFields=null,this.overlayFields=null,this.output instanceof Xs&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof eu&&(this.mappingParameters.destroy(),this.mappingParameters=null)}}])&&wE(t.prototype,e),r&&wE(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function EE(t){"@babel/helpers - typeof";return(EE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function PE(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,xE(n.key),n)}}function xE(t){var e=function(t,e){if("object"!=EE(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=EE(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==EE(e)?e:e+""}function TE(t,e,r){return e=kE(e),function(t,e){if(e&&("object"===EE(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],kE(t).constructor):e.apply(t,r))}function CE(){return(CE="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=kE(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function kE(t){return(kE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function AE(t,e){return(AE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var jE=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=TE(this,e,[t,r])).url=Tt.urlPathAppend(n.url,"spatialanalyst/overlay"),n.CLASS_NAME="SuperMap.OverlayGeoJobsService",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&AE(t,e)}(e,hu),r=e,(n=[{key:"destroy",value:function(){CE(kE(e.prototype),"destroy",this).call(this)}},{key:"getOverlayGeoJobs",value:function(t){return CE(kE(e.prototype),"getJobs",this).call(this,this.url,t)}},{key:"getOverlayGeoJob",value:function(t,r){return CE(kE(e.prototype),"getJobs",this).call(this,Tt.urlPathAppend(this.url,t),r)}},{key:"addOverlayGeoJob",value:function(t,r,n,o){return CE(kE(e.prototype),"addJob",this).call(this,this.url,t,OE,r,n,o)}}])&&PE(r.prototype,n),o&&PE(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function NE(t){"@babel/helpers - typeof";return(NE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function IE(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ME(n.key),n)}}function ME(t){var e=function(t,e){if("object"!=NE(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=NE(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==NE(e)?e:e+""}function RE(t,e,r){return e=DE(e),function(t,e){if(e&&("object"===NE(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],DE(t).constructor):e.apply(t,r))}function LE(){return(LE="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=DE(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function DE(t){return(DE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function BE(t,e){return(BE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var FE=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=RE(this,e,[t=t||{}])).returnContent=!0,r.bounds=null,Tt.extend(r,t),r.CLASS_NAME="SuperMap.QueryByBoundsParameters",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&BE(t,e)}(e,dl),r=e,(n=[{key:"destroy",value:function(){LE(DE(e.prototype),"destroy",this).call(this);this.returnContent=null,this.bounds&&(this.bounds=null)}}])&&IE(r.prototype,n),o&&IE(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function UE(t){"@babel/helpers - typeof";return(UE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function GE(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,VE(n.key),n)}}function VE(t){var e=function(t,e){if("object"!=UE(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=UE(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==UE(e)?e:e+""}function zE(t,e,r){return e=JE(e),HE(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],JE(t).constructor):e.apply(t,r))}function HE(t,e){if(e&&("object"===UE(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function qE(){return(qE="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=JE(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function JE(t){return(JE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function WE(t,e){return(WE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var KE=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=zE(this,e,[t,r])).returnContent=!1,n.format=o.GEOJSON,n.returnFeatureWithFieldCaption=!1,r&&Tt.extend(n,r),n.CLASS_NAME="SuperMap.QueryService",n.url?(r&&r.format&&(n.format=r.format.toUpperCase()),n.url=Tt.urlPathAppend(n.url,"queryResults"),n):HE(n)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&WE(t,e)}(e,Ki),r=e,(n=[{key:"destroy",value:function(){qE(JE(e.prototype),"destroy",this).call(this);this.returnContent=null,this.format=null}},{key:"processAsync",value:function(t,e){if(t instanceof dl){var r,n=this,o=null;return n.returnContent=t.returnContent,r=n.getJsonParameters(t),n.returnContent||(o=t.returnCustomResult)&&(n.url=Tt.urlAppend(n.url,"returnCustomResult="+o)),n.returnFeatureWithFieldCaption=t.returnFeatureWithFieldCaption,n.request({method:"POST",data:r,scope:n,success:e,failure:e})}}},{key:"transformResult",value:function(t,e){t=Tt.transformResult(t);var r=new Ln;if(t&&t.recordsets)for(var n=0,i=t.recordsets,a=i.length;n<a;n++)i[n].features&&(!0===this.returnFeatureWithFieldCaption&&i[n].features.map(function(t){return t.fieldNames=i[n].fieldCaptions,t}),this.format===o.GEOJSON&&(i[n].features=r.toGeoJSON(i[n].features)));return{result:t,options:e}}},{key:"dataFormat",value:function(){return[o.GEOJSON,o.ISERVER,o.FGB]}},{key:"getQueryParameters",value:function(t){return new dl({customParams:t.customParams,expectCount:t.expectCount,networkType:t.networkType,queryOption:t.queryOption,queryParams:t.queryParams,startRecord:t.startRecord,prjCoordSys:t.prjCoordSys,holdTime:t.holdTime})}}])&&GE(r.prototype,n),i&&GE(r,i),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,i}();function YE(t){"@babel/helpers - typeof";return(YE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function QE(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,XE(n.key),n)}}function XE(t){var e=function(t,e){if("object"!=YE(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=YE(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==YE(e)?e:e+""}function ZE(t,e,r){return e=tP(e),function(t,e){if(e&&("object"===YE(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],tP(t).constructor):e.apply(t,r))}function $E(){return($E="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=tP(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function tP(t){return(tP=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function eP(t,e){return(eP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var rP=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=ZE(this,e,[t,r])).CLASS_NAME="SuperMap.QueryByBoundsService",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&eP(t,e)}(e,KE),r=e,(n=[{key:"destroy",value:function(){$E(tP(e.prototype),"destroy",this).call(this)}},{key:"getJsonParameters",value:function(t){if(!(t instanceof FE))return null;var e,r="",n=t.bounds;return e=this.getQueryParameters(t),r+="'queryMode':'BoundsQuery','queryParameters':",r+=Tt.toJSON(e),r="{"+(r+=",'bounds': {'rightTop':{'y':"+n.top+",'x':"+n.right+"},'leftBottom':{'y':"+n.bottom+",'x':"+n.left+"}}")+"}"}}])&&QE(r.prototype,n),o&&QE(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function nP(t){"@babel/helpers - typeof";return(nP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function oP(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,iP(n.key),n)}}function iP(t){var e=function(t,e){if("object"!=nP(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=nP(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==nP(e)?e:e+""}function aP(t,e,r){return e=uP(e),function(t,e){if(e&&("object"===nP(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],uP(t).constructor):e.apply(t,r))}function sP(){return(sP="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=uP(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function uP(t){return(uP=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function lP(t,e){return(lP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var cP=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=aP(this,e,[t=t||{}])).geometry=null,r.isNearest=null,r.returnContent=!0,Tt.extend(r,t),r.CLASS_NAME="SuperMap.QueryByDistanceParameters",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&lP(t,e)}(e,dl),r=e,(n=[{key:"destroy",value:function(){sP(uP(e.prototype),"destroy",this).call(this);var t=this;t.returnContent=null,t.distance=null,t.isNearest=null,t.geometry&&(t.geometry.destroy(),t.geometry=null)}}])&&oP(r.prototype,n),o&&oP(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function fP(t){"@babel/helpers - typeof";return(fP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function pP(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,hP(n.key),n)}}function hP(t){var e=function(t,e){if("object"!=fP(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=fP(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==fP(e)?e:e+""}function yP(t,e,r){return e=vP(e),function(t,e){if(e&&("object"===fP(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],vP(t).constructor):e.apply(t,r))}function dP(){return(dP="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=vP(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function vP(t){return(vP=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function mP(t,e){return(mP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var bP=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=yP(this,e,[t,r])).CLASS_NAME="SuperMap.QueryByDistanceService",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&mP(t,e)}(e,KE),r=e,(n=[{key:"destroy",value:function(){dP(vP(e.prototype),"destroy",this).call(this)}},{key:"getJsonParameters",value:function(t){if(t instanceof cP){var e="",r=this.getQueryParameters(t),n=Xr.fromGeometry(t.geometry);return e+=t.isNearest?"'queryMode':'FindNearest','queryParameters':":"'queryMode':'DistanceQuery','queryParameters':",e+=Tt.toJSON(r),e="{"+(e+=",'geometry':"+Tt.toJSON(n)+",'distance':"+t.distance)+"}"}}}])&&pP(r.prototype,n),o&&pP(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function gP(t){"@babel/helpers - typeof";return(gP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function SP(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,wP(n.key),n)}}function wP(t){var e=function(t,e){if("object"!=gP(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=gP(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==gP(e)?e:e+""}function _P(t,e,r){return e=EP(e),function(t,e){if(e&&("object"===gP(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],EP(t).constructor):e.apply(t,r))}function OP(){return(OP="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=EP(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function EP(t){return(EP=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function PP(t,e){return(PP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var xP=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=_P(this,e,[t=t||{}])).returnContent=!0,r.geometry=null,r.spatialQueryMode=u.INTERSECT,Tt.extend(r,t),r.CLASS_NAME="SuperMap.QueryByGeometryParameters",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&PP(t,e)}(e,dl),r=e,(n=[{key:"destroy",value:function(){OP(EP(e.prototype),"destroy",this).call(this);this.returnContent=null,this.geometry=null,this.spatialQueryMode=null}}])&&SP(r.prototype,n),o&&SP(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function TP(t){"@babel/helpers - typeof";return(TP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function CP(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,kP(n.key),n)}}function kP(t){var e=function(t,e){if("object"!=TP(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=TP(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==TP(e)?e:e+""}function AP(t,e,r){return e=NP(e),function(t,e){if(e&&("object"===TP(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],NP(t).constructor):e.apply(t,r))}function jP(){return(jP="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=NP(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function NP(t){return(NP=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function IP(t,e){return(IP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var MP=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=AP(this,e,[t,r])).CLASS_NAME="SuperMap.QueryByGeometryService",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&IP(t,e)}(e,KE),r=e,(n=[{key:"destroy",value:function(){jP(NP(e.prototype),"destroy",this).call(this)}},{key:"getJsonParameters",value:function(t){if(t instanceof xP){var e,r="",n=t.geometry,o=Xr.fromGeometry(n);return e=this.getQueryParameters(t),r+="'queryMode':'SpatialQuery','queryParameters':",r="{"+(r+=Tt.toJSON(e)+",'geometry':"+Tt.toJSON(o)+",'spatialQueryMode':"+Tt.toJSON(t.spatialQueryMode))+"}"}}}])&&CP(r.prototype,n),o&&CP(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function RP(t){"@babel/helpers - typeof";return(RP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function LP(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,DP(n.key),n)}}function DP(t){var e=function(t,e){if("object"!=RP(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=RP(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==RP(e)?e:e+""}function BP(t,e,r){return e=UP(e),function(t,e){if(e&&("object"===RP(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],UP(t).constructor):e.apply(t,r))}function FP(){return(FP="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=UP(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function UP(t){return(UP=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function GP(t,e){return(GP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var VP=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=BP(this,e,[t=t||{}])).returnContent=!0,Tt.extend(r,t),r.CLASS_NAME="SuperMap.QueryBySQLParameters",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&GP(t,e)}(e,dl),r=e,(n=[{key:"destroy",value:function(){FP(UP(e.prototype),"destroy",this).call(this);this.returnContent=null}}])&&LP(r.prototype,n),o&&LP(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function zP(t){"@babel/helpers - typeof";return(zP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function HP(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,qP(n.key),n)}}function qP(t){var e=function(t,e){if("object"!=zP(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=zP(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==zP(e)?e:e+""}function JP(t,e,r){return e=KP(e),function(t,e){if(e&&("object"===zP(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],KP(t).constructor):e.apply(t,r))}function WP(){return(WP="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=KP(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function KP(t){return(KP=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function YP(t,e){return(YP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var QP=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=JP(this,e,[t,r])).CLASS_NAME="SuperMap.QueryBySQLService",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&YP(t,e)}(e,KE),r=e,(n=[{key:"destroy",value:function(){WP(KP(e.prototype),"destroy",this).call(this)}},{key:"getJsonParameters",value:function(t){if(t instanceof VP){var e,r="";return e=this.getQueryParameters(t),r+="'queryMode':'SqlQuery','queryParameters':",r="{"+(r+=Tt.toJSON(e))+"}"}}}])&&HP(r.prototype,n),o&&HP(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function XP(t){"@babel/helpers - typeof";return(XP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ZP(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,$P(n.key),n)}}function $P(t){var e=function(t,e){if("object"!=XP(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=XP(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==XP(e)?e:e+""}var tx=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.referenceDatasetName=null,this.referenceFilterQueryParameter=null,this.createResultDataset=null,this.resultDatasetName=null,this.resultDatasourceName=null,this.minDistance=null,this.maxDistance=null,e&&Tt.extend(this,e),this.CLASS_NAME="SuperMap.MinDistanceAnalystParameters"},(e=[{key:"destroy",value:function(){var t=this;t.referenceDatasetName=null,t.dataset=null,t.referenceFilterQueryParameter=null,t.createResultDataset=null,t.resultDatasetName=null,t.resultDatasourceName=null,t.minDistance=null,t.maxDistance=null}}])&&ZP(t.prototype,e),r&&ZP(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function ex(t){"@babel/helpers - typeof";return(ex="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function rx(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,nx(n.key),n)}}function nx(t){var e=function(t,e){if("object"!=ex(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=ex(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ex(e)?e:e+""}function ox(t,e,r){return e=ax(e),function(t,e){if(e&&("object"===ex(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],ax(t).constructor):e.apply(t,r))}function ix(){return(ix="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ax(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function ax(t){return(ax=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function sx(t,e){return(sx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var ux=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=ox(this,e,[t])).dataset=null,r.inputFilterQueryParameter=null,t&&Tt.extend(r,t),r.CLASS_NAME="SuperMap.DatasetMinDistanceAnalystParameters",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&sx(t,e)}(e,tx),r=e,(n=[{key:"destroy",value:function(){ix(ax(e.prototype),"destroy",this).call(this);this.dataset=null,this.inputFilterQueryParameter=null}}])&&rx(r.prototype,n),o&&rx(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function lx(t){"@babel/helpers - typeof";return(lx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function cx(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,fx(n.key),n)}}function fx(t){var e=function(t,e){if("object"!=lx(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=lx(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==lx(e)?e:e+""}function px(t,e,r){return e=yx(e),function(t,e){if(e&&("object"===lx(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],yx(t).constructor):e.apply(t,r))}function hx(){return(hx="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=yx(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function yx(t){return(yx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function dx(t,e){return(dx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var vx=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=px(this,e,[t])).inputGeometries=null,t&&Tt.extend(r,t),r.CLASS_NAME="SuperMap.GeometryMinDistanceAnalystParameters",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&dx(t,e)}(e,tx),r=e,o=[{key:"toObject",value:function(t,e){for(var r in t)if("inputGeometries"===r&&t.inputGeometries){for(var n=[],o=0;o<t.inputGeometries.length;o++)n.push(Xr.fromGeometry(t.inputGeometries[o]));e.inputGeometries=n}else e[r]=t[r]}}],(n=[{key:"destroy",value:function(){hx(yx(e.prototype),"destroy",this).call(this);this.inputGeometries=null}}])&&cx(r.prototype,n),o&&cx(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function mx(t){"@babel/helpers - typeof";return(mx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function bx(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,gx(n.key),n)}}function gx(t){var e=function(t,e){if("object"!=mx(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=mx(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==mx(e)?e:e+""}function Sx(t,e,r){return e=_x(e),function(t,e){if(e&&("object"===mx(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],_x(t).constructor):e.apply(t,r))}function wx(){return(wx="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=_x(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function _x(t){return(_x=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ox(t,e){return(Ox=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Ex=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=Sx(this,e,[t,r]),r&&Tt.extend(n,r),n.CLASS_NAME="SuperMap.MinDistanceAnalystService",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ox(t,e)}(e,qa),r=e,(n=[{key:"destroy",value:function(){wx(_x(e.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){var r=this,n={};t instanceof ux?(r.url=Tt.urlPathAppend(r.url,"datasets/"+t.dataset+"/mindistance"),n=t):t instanceof vx&&(r.url=Tt.urlPathAppend(r.url,"geometry/mindistance"),vx.toObject(t,n));var o=Tt.toJSON(n);return r.url=Tt.urlAppend(r.url,"returnContent=true"),r.request({method:"POST",data:o,scope:r,success:e,failure:e})}}])&&bx(r.prototype,n),o&&bx(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function Px(t){"@babel/helpers - typeof";return(Px="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function xx(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Tx(n.key),n)}}function Tx(t){var e=function(t,e){if("object"!=Px(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Px(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Px(e)?e:e+""}var Cx=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e&&(this.dataset=null,this.cutFillType="GRID",this.afterCutFillDataset=null,this.resultDataset=null,this.buildPyramid=null,this.deleteExistResultDataset=null,this.bufferRadius=null,this.isRoundHead=null,this.line3D=null,this.region=null,this.region3D=null,Tt.extend(this,e),this.CLASS_NAME="SuperMap.TerrainCutFillCalculationParameters")},r=[{key:"toObject",value:function(t,e){for(var r in t)"dataset"!==r&&(e[r]=t[r])}}],(e=[{key:"destroy",value:function(){var t=this;t.cutFillType=null,t.afterCutFillDataset=null,t.resultDataset=null,t.buildPyramid=null,t.deleteExistResultDataset=null,t.bufferRadius=null,t.isRoundHead=null,t.line3D=null,t.region=null,t.region3D=null}}])&&xx(t.prototype,e),r&&xx(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function kx(t){"@babel/helpers - typeof";return(kx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ax(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,jx(n.key),n)}}function jx(t){var e=function(t,e){if("object"!=kx(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=kx(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==kx(e)?e:e+""}function Nx(t,e,r){return e=Mx(e),function(t,e){if(e&&("object"===kx(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Mx(t).constructor):e.apply(t,r))}function Ix(){return(Ix="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Mx(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Mx(t){return(Mx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Rx(t,e){return(Rx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Lx=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Nx(this,e,[t,r])).CLASS_NAME="SuperMap.TerrainCutFillCalculationService",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Rx(t,e)}(e,qa),r=e,(n=[{key:"destroy",value:function(){Ix(Mx(e.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){var r=this,n={};t instanceof Cx&&(r.url=Tt.urlPathAppend(r.url,"datasets/"+t.dataset+"/terraincalculation/cutfill")),Cx.toObject(t,n);var o=Tt.toJSON(n);return r.url=Tt.urlAppend(r.url,"returnContent=true"),r.request({method:"POST",data:o,scope:r,success:e,failure:e})}}])&&Ax(r.prototype,n),o&&Ax(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function Dx(t){"@babel/helpers - typeof";return(Dx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Bx(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Fx(n.key),n)}}function Fx(t){var e=function(t,e){if("object"!=Dx(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Dx(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Dx(e)?e:e+""}var Ux=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e&&(this.dataset=null,this.terrainAnalystSetting=null,this.resultDatasetName=null,this.deleteExistResultDataset=null,Tt.extend(this,e),this.CLASS_NAME="SuperMap.TerrainAspectCalculationParameters")},r=[{key:"toObject",value:function(t,e){for(var r in t)"dataset"!==r&&(e[r]=t[r])}}],(e=[{key:"destroy",value:function(){this.terrainAnalystSetting=null,this.resultDatasetName=null,this.deleteExistResultDataset=null}}])&&Bx(t.prototype,e),r&&Bx(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function Gx(t){"@babel/helpers - typeof";return(Gx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Vx(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,zx(n.key),n)}}function zx(t){var e=function(t,e){if("object"!=Gx(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Gx(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Gx(e)?e:e+""}function Hx(t,e,r){return e=Jx(e),function(t,e){if(e&&("object"===Gx(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Jx(t).constructor):e.apply(t,r))}function qx(){return(qx="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Jx(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Jx(t){return(Jx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Wx(t,e){return(Wx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Kx=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Hx(this,e,[t,r])).CLASS_NAME="SuperMap.TerrainAspectCalculationService",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Wx(t,e)}(e,qa),r=e,(n=[{key:"destroy",value:function(){qx(Jx(e.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){var r=this,n={};t instanceof Ux&&(r.url=Tt.urlPathAppend(r.url,"datasets/"+t.dataset+"/terraincalculation/aspect")),Ux.toObject(t,n);var o=Tt.toJSON(n);return r.url=Tt.urlAppend(r.url,"returnContent=true"),r.request({method:"POST",data:o,scope:r,success:e,failure:e})}}])&&Vx(r.prototype,n),o&&Vx(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function Yx(t){"@babel/helpers - typeof";return(Yx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Qx(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Xx(n.key),n)}}function Xx(t){var e=function(t,e){if("object"!=Yx(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Yx(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Yx(e)?e:e+""}var Zx=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e&&(this.dataset=null,this.terrainAnalystSetting=null,this.resultDatasetName=null,this.deleteExistResultDataset=null,this.zFactor=null,this.slopeType=null,Tt.extend(this,e),this.CLASS_NAME="SuperMap.TerrainSlopeCalculationParameters")},r=[{key:"toObject",value:function(t,e){for(var r in t)"dataset"!==r&&(e[r]=t[r])}}],(e=[{key:"destroy",value:function(){var t=this;t.terrainAnalystSetting=null,t.resultDatasetName=null,t.deleteExistResultDataset=null,t.zFactor=null,t.slopeType=null}}])&&Qx(t.prototype,e),r&&Qx(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function $x(t){"@babel/helpers - typeof";return($x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function tT(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,eT(n.key),n)}}function eT(t){var e=function(t,e){if("object"!=$x(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=$x(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==$x(e)?e:e+""}function rT(t,e,r){return e=oT(e),function(t,e){if(e&&("object"===$x(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],oT(t).constructor):e.apply(t,r))}function nT(){return(nT="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=oT(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function oT(t){return(oT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function iT(t,e){return(iT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var aT=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=rT(this,e,[t,r])).CLASS_NAME="SuperMap.TerrainSlopeCalculationService",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&iT(t,e)}(e,qa),r=e,(n=[{key:"destroy",value:function(){nT(oT(e.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){var r=this,n={};t instanceof Zx&&(r.url=Tt.urlPathAppend(r.url,"datasets/"+t.dataset+"/terraincalculation/slope")),Zx.toObject(t,n);var o=Tt.toJSON(n);return r.url=Tt.urlAppend(r.url,"returnContent=true"),r.request({method:"POST",data:o,scope:r,success:e,failure:e})}}])&&tT(r.prototype,n),o&&tT(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function sT(t){"@babel/helpers - typeof";return(sT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function uT(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,lT(n.key),n)}}function lT(t){var e=function(t,e){if("object"!=sT(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=sT(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==sT(e)?e:e+""}var cT=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.model=null,this.resultSetting=null,e&&Tt.extend(this,e),this.CLASS_NAME="SuperMap.ConvexHullAnalystParameters"},(e=[{key:"destroy",value:function(){this.model=null,this.resultSetting=null}}])&&uT(t.prototype,e),r&&uT(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function fT(t){"@babel/helpers - typeof";return(fT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function pT(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,hT(n.key),n)}}function hT(t){var e=function(t,e){if("object"!=fT(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=fT(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==fT(e)?e:e+""}function yT(t,e,r){return e=vT(e),function(t,e){if(e&&("object"===fT(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],vT(t).constructor):e.apply(t,r))}function dT(){return(dT="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=vT(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function vT(t){return(vT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function mT(t,e){return(mT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var bT=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=yT(this,e,[t,r]),r&&Tt.extend(n,r),n.CLASS_NAME="SuperMap.ConvexHullAnalystService",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&mT(t,e)}(e,qa),r=e,(n=[{key:"destroy",value:function(){dT(vT(e.prototype),"destroy",this).call(this),this.mode=null}},{key:"processAsync",value:function(t,e){var r=this;r.url=Tt.urlPathAppend(r.url,"geometry/3d/convexhull");var n=Tt.toJSON(t);return r.url=Tt.urlAppend(r.url,"returnContent=true"),r.request({method:"POST",data:n,scope:r,success:e,failure:e})}}])&&pT(r.prototype,n),o&&pT(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function gT(t){"@babel/helpers - typeof";return(gT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ST(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,wT(n.key),n)}}function wT(t){var e=function(t,e){if("object"!=gT(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=gT(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==gT(e)?e:e+""}var _T=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.edgeID=null,this.nodeID=null,this.weightName=null,this.returnFeatures=!0,this.isUncertainDirectionValid=!0,this.traceType=null,this.withIndex=null,Tt.extend(this,e),this.CLASS_NAME="SuperMap.TraceAnalystParameters"},(e=[{key:"destroy",value:function(){var t=this;t.edgeID=null,t.nodeID=null,t.weightName=null,t.returnFeatures=null,t.isUncertainDirectionValid=null,t.type=null,t.withIndex=null}}])&&ST(t.prototype,e),r&&ST(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function OT(t){"@babel/helpers - typeof";return(OT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ET(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,PT(n.key),n)}}function PT(t){var e=function(t,e){if("object"!=OT(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=OT(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==OT(e)?e:e+""}function xT(t,e,r){return e=CT(e),function(t,e){if(e&&("object"===OT(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],CT(t).constructor):e.apply(t,r))}function TT(){return(TT="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=CT(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function CT(t){return(CT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function kT(t,e){return(kT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var AT=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=xT(this,e,[t,r])).CLASS_NAME="SuperMap.TraceAnalystService",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&kT(t,e)}(e,Iu),r=e,(n=[{key:"destroy",value:function(){TT(CT(e.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){if(t instanceof _T){var r,n=this;if(0===t.traceType)n.url=Tt.urlPathAppend(n.url,"traceup");else{if(1!==t.traceType)return;n.url=Tt.urlPathAppend(n.url,"tracedown")}if(r={weightName:t.weightName,isUncertainDirectionValid:t.isUncertainDirectionValid,returnFeatures:t.returnFeatures},!(null!==t.edgeID&&null!==t.nodeID||null===t.edgeID&&null===t.nodeID))return null!==t.edgeID?r.edgeID=t.edgeID:r.nodeID=t.nodeID,n.request({method:"GET",params:r,scope:n,success:e,failure:e})}}},{key:"toGeoJSONResult",value:function(t){if(!t)return null;var e=new Ln;return t.edgesFeatures&&(t.edgesFeatures=e.toGeoJSON(t.edgesFeatures)),t.nodesFeatures&&(t.nodesFeatures=e.toGeoJSON(t.nodesFeatures)),t}}])&&ET(r.prototype,n),o&&ET(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function jT(t){"@babel/helpers - typeof";return(jT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function NT(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,IT(n.key),n)}}function IT(t){var e=function(t,e){if("object"!=jT(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=jT(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==jT(e)?e:e+""}var MT=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.connected=null,this.returnFeatures=!0,this.edgeIDs=null,this.nodeIDs=null,this.withIndex=null,Tt.extend(this,e),this.CLASS_NAME="SuperMap.ConnectedEdgesAnalystParameters"},(e=[{key:"destroy",value:function(){var t=this;t.edgeIDs=null,t.nodeIDs=null,t.connected=null,t.returnFeatures=null,t.withIndex=null}}])&&NT(t.prototype,e),r&&NT(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function RT(t){"@babel/helpers - typeof";return(RT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function LT(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,DT(n.key),n)}}function DT(t){var e=function(t,e){if("object"!=RT(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=RT(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==RT(e)?e:e+""}function BT(t,e,r){return e=UT(e),function(t,e){if(e&&("object"===RT(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],UT(t).constructor):e.apply(t,r))}function FT(){return(FT="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=UT(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function UT(t){return(UT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function GT(t,e){return(GT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var VT=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=BT(this,e,[t,r])).CLASS_NAME="SuperMap.ConnectedEdgesAnalystService",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&GT(t,e)}(e,Iu),r=e,(n=[{key:"destroy",value:function(){FT(UT(e.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){if(t instanceof MT){var r;if(this.url=Tt.urlPathAppend(this.url,"connectededges"),r={connected:t.connected,returnFeatures:t.returnFeatures},!(null!==t.edgeIDs&&null!==t.nodeIDs||null===t.edgeIDs&&null===t.nodeIDs))return null!==t.edgeIDs?r.edgeIDs=t.edgeIDs:r.nodeIDs=t.nodeIDs,this.request({method:"GET",params:r,scope:this,success:e,failure:e})}}},{key:"toGeoJSONResult",value:function(t){if(!t)return null;var e=new Ln;return t.edgesFeatures&&(t.edgesFeatures=e.toGeoJSON(t.edgesFeatures)),t.nodesFeatures&&(t.nodesFeatures=e.toGeoJSON(t.nodesFeatures)),t}}])&&LT(r.prototype,n),o&&LT(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function zT(t){"@babel/helpers - typeof";return(zT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function HT(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,qT(n.key),n)}}function qT(t){var e=function(t,e){if("object"!=zT(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=zT(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==zT(e)?e:e+""}var JT=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.bbox=null,this.layers=null,this.transparent=null,this.mapScale=null,this.returnVisibleOnly=null,this.width=null,this.height=null,Tt.extend(this,e),this.CLASS_NAME="SuperMap.GetLayersLegendInfoParameters"},(e=[{key:"destroy",value:function(){var t=this;t.bbox=null,t.layers=null,t.transparent=null,t.mapScale=null,t.returnVisibleOnly=null,t.width=null,t.height=null}}])&&HT(t.prototype,e),r&&HT(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function WT(t){"@babel/helpers - typeof";return(WT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function KT(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,YT(n.key),n)}}function YT(t){var e=function(t,e){if("object"!=WT(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=WT(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==WT(e)?e:e+""}function QT(t,e,r){return e=ZT(e),function(t,e){if(e&&("object"===WT(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],ZT(t).constructor):e.apply(t,r))}function XT(){return(XT="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ZT(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function ZT(t){return(ZT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function $T(t,e){return($T=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var tC=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=QT(this,e,[t,r]),r&&Tt.extend(n,r),n.CLASS_NAME="SuperMap.GetLayersLegendInfoService",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&$T(t,e)}(e,Ki),r=e,(n=[{key:"destroy",value:function(){XT(ZT(e.prototype),"destroy",this).call(this),Tt.reset(this)}},{key:"processAsync",value:function(t,e){return this.url=Tt.urlPathAppend(this.url,"/legend"),this.request({method:"GET",params:t,scope:this,success:e,failure:e})}}])&&KT(r.prototype,n),o&&KT(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function eC(t){"@babel/helpers - typeof";return(eC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function rC(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,nC(n.key),n)}}function nC(t){var e=function(t,e){if("object"!=eC(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=eC(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==eC(e)?e:e+""}var oC=function(){return t=function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.options=r||{},this.url=e},(e=[{key:"queryByBounds",value:function(t,e,r){var n=this;return new rP(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(t,e)}},{key:"queryByDistance",value:function(t,e,r){var n=this;return new bP(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:r}).processAsync(t,e)}},{key:"queryBySQL",value:function(t,e,r){var n=this;return new QP(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:r}).processAsync(t,e)}},{key:"queryByGeometry",value:function(t,e,r){var n=this;return new MP(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:r}).processAsync(t,e)}},{key:"_processFormat",value:function(t){return t||o.GEOJSON}}])&&rC(t.prototype,e),r&&rC(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function iC(t){"@babel/helpers - typeof";return(iC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function aC(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,sC(n.key),n)}}function sC(t){var e=function(t,e){if("object"!=iC(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=iC(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==iC(e)?e:e+""}var uC=function(){return t=function t(e){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),!e)return this;this.sourceRoute=null,this.point=null,this.tolerance=null,this.isIgnoreGap=!1,Tt.extend(this,e),this.CLASS_NAME="SuperMap.RouteCalculateMeasureParameters"},(e=[{key:"destroy",value:function(){var t=this;t.sourceRoute=null,t.point=null,t.tolerance&&(t.tolerance=null),t.isIgnoreGap&&(t.isIgnoreGap=!1)}}])&&aC(t.prototype,e),r&&aC(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function lC(t){"@babel/helpers - typeof";return(lC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function cC(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,fC(n.key),n)}}function fC(t){var e=function(t,e){if("object"!=lC(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=lC(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==lC(e)?e:e+""}function pC(t,e,r){return e=yC(e),function(t,e){if(e&&("object"===lC(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],yC(t).constructor):e.apply(t,r))}function hC(){return(hC="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=yC(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function yC(t){return(yC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function dC(t,e){return(dC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var vC=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=pC(this,e,[t,r])).CLASS_NAME="SuperMap.RouteCalculateMeasureService",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&dC(t,e)}(e,qa),r=e,(n=[{key:"destroy",value:function(){hC(yC(e.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){if(t instanceof uC){var r;return r=this.getJsonParameters(t),this.request({method:"POST",data:r,scope:this,success:e,failure:e})}}},{key:"getJsonParameters",value:function(t){return this.url=Tt.urlPathAppend(this.url,"geometry/calculatemeasure"),this.url=Tt.urlAppend(this.url,"returnContent=true"),Tt.toJSON(t)}}])&&cC(r.prototype,n),o&&cC(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function mC(t){"@babel/helpers - typeof";return(mC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function bC(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,gC(n.key),n)}}function gC(t){var e=function(t,e){if("object"!=mC(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=mC(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==mC(e)?e:e+""}var SC=function(){return t=function t(e){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),!e)return this;this.sourceRoute=null,this.dataset=null,this.routeIDField=null,this.routeID=null,this.type=null,this.measure=null,this.offset=0,this.isIgnoreGap=!1,this.startMeasure=null,this.endMeasure=null;var r=e.sourceRoute,n={};if(r&&r instanceof ht&&r.components){n.type=r.type,n.parts=r.parts;for(var o=[],i=0,a=r.components.length;i<a;i++)o=o.concat(r.components[i].components);n.points=o,e.sourceRoute=n}Tt.extend(this,e),this.CLASS_NAME="SuperMap.RouteLocatorParameters"},(e=[{key:"destroy",value:function(){var t=this;t.sourceRoute=null,t.type=null,t.measure=null,t.offset=0,t.isIgnoreGap=!1,t.startMeasure=null,t.endMeasure=null,t.dataset=null,t.routeID=null,t.routeIDField=null}}])&&bC(t.prototype,e),r&&bC(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function wC(t){"@babel/helpers - typeof";return(wC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _C(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,OC(n.key),n)}}function OC(t){var e=function(t,e){if("object"!=wC(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=wC(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==wC(e)?e:e+""}function EC(t,e,r){return e=xC(e),function(t,e){if(e&&("object"===wC(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],xC(t).constructor):e.apply(t,r))}function PC(){return(PC="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=xC(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function xC(t){return(xC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function TC(t,e){return(TC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var CC=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=EC(this,e,[t,r])).CLASS_NAME="SuperMap.RouteLocatorService",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&TC(t,e)}(e,qa),r=e,(n=[{key:"destroy",value:function(){PC(xC(e.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){if(t instanceof SC){var r;return r=this.getJsonParameters(t),this.request({method:"POST",data:r,scope:this,success:e,failure:e})}}},{key:"getJsonParameters",value:function(t){var e="geometry/routelocator";return t.dataset&&(e="datasets/"+t.dataset+"/linearreferencing/routelocator",t.sourceRoute=null),this.url=Tt.urlPathAppend(this.url,e),this.url=Tt.urlAppend(this.url,"returnContent=true"),Tt.toJSON(t)}}])&&_C(r.prototype,n),o&&_C(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function kC(t){"@babel/helpers - typeof";return(kC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function AC(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,jC(n.key),n)}}function jC(t){var e=function(t,e){if("object"!=kC(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=kC(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==kC(e)?e:e+""}var NC=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.fieldNames=null,this.fieldValues=null,this.geometry=null,e&&Tt.extend(this,e),this.CLASS_NAME="SuperMap.ServerFeature"}return e=t,n=[{key:"fromJson",value:function(e){var r=null;if(e)return(r=e.geometry)&&(r=Xr.fromJson(r)),new t({fieldNames:e.fieldNames,fieldValues:e.fieldValues,geometry:r})}}],(r=[{key:"destroy",value:function(){var t=this;t.fieldNames=null,t.fieldValues=null,t.geometry&&(t.geometry.destroy(),t.geometry=null)}},{key:"toFeature",value:function(){var t,e,r,n,o={},i=this;for(var a in t=i.fieldNames,e=i.fieldValues,t)o[t[a]]=e[a];return i.geometry&&(r=i.geometry.toGeometry()),n=new mn(r,o),i.geometry&&i.geometry.id&&(n.fid=i.geometry.id),n}}])&&AC(e.prototype,r),n&&AC(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,r,n}();function IC(t){"@babel/helpers - typeof";return(IC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function MC(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,RC(n.key),n)}}function RC(t){var e=function(t,e){if("object"!=IC(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=IC(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==IC(e)?e:e+""}var LC=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e&&(this.datasourceName=null,this.description=null,this.coordUnit=null,this.distanceUnit=null,e&&Tt.extend(this,e),this.CLASS_NAME="SuperMap.SetDatasourceParameters")},(e=[{key:"destroy",value:function(){this.datasourceName=null,this.description=null,this.coordUnit=null,this.distanceUnit=null}}])&&MC(t.prototype,e),r&&MC(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function DC(t){"@babel/helpers - typeof";return(DC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function BC(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,FC(n.key),n)}}function FC(t){var e=function(t,e){if("object"!=DC(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=DC(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==DC(e)?e:e+""}var UC=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},this.resourceID=null,this.tempLayerName=null,this.layerInfo=null,Tt.extend(this,e),this.CLASS_NAME="SuperMap.SetLayerInfoParameters"},(e=[{key:"destroy",value:function(){this.resourceID=null,this.tempLayerName=null,this.layerInfo=null}}])&&BC(t.prototype,e),r&&BC(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function GC(t){"@babel/helpers - typeof";return(GC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function VC(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,zC(n.key),n)}}function zC(t){var e=function(t,e){if("object"!=GC(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=GC(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==GC(e)?e:e+""}function HC(t,e,r){return e=JC(e),function(t,e){if(e&&("object"===GC(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],JC(t).constructor):e.apply(t,r))}function qC(){return(qC="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=JC(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function JC(t){return(JC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function WC(t,e){return(WC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var KC=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=HC(this,e,[t,r]),r&&Tt.extend(n,r),n.CLASS_NAME="SuperMap.SetLayerInfoService",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&WC(t,e)}(e,Ki),r=e,(n=[{key:"destroy",value:function(){qC(JC(e.prototype),"destroy",this).call(this),Tt.reset(this)}},{key:"processAsync",value:function(t,e){if(t){var r=Tt.toJSON(t);return this.request({method:"PUT",data:r,scope:this,success:e,failure:e})}}}])&&VC(r.prototype,n),o&&VC(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function YC(t){"@babel/helpers - typeof";return(YC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function QC(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,XC(n.key),n)}}function XC(t){var e=function(t,e){if("object"!=YC(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=YC(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==YC(e)?e:e+""}var ZC=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},this.isTempLayers=null,this.resourceID=null,this.layersInfo=null,Tt.extend(this,e),this.CLASS_NAME="SuperMap.SetLayersInfoParameters"},(e=[{key:"destroy",value:function(){this.isTempLayers=null,this.resourceID=null,this.layersInfo=null}}])&&QC(t.prototype,e),r&&QC(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function $C(t){"@babel/helpers - typeof";return($C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function tk(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ek(n.key),n)}}function ek(t){var e=function(t,e){if("object"!=$C(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=$C(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==$C(e)?e:e+""}function rk(t,e,r){return e=ok(e),function(t,e){if(e&&("object"===$C(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],ok(t).constructor):e.apply(t,r))}function nk(){return(nk="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ok(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function ok(t){return(ok=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ik(t,e){return(ik=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var ak=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=rk(this,e,[t,r])).resourceID=null,n.isTempLayers=!1,r&&Tt.extend(n,r),n.CLASS_NAME="SuperMap.SetLayersInfoService",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ik(t,e)}(e,Ki),r=e,(n=[{key:"destroy",value:function(){nk(ok(e.prototype),"destroy",this).call(this),Tt.reset(this)}},{key:"processAsync",value:function(t,e){if(t){var r,n=[],o=this,i="";o.isTempLayers?(o.url=Tt.urlPathAppend(o.url,"tempLayersSet/"+o.resourceID),i="PUT"):(o.url=Tt.urlPathAppend(o.url,"tempLayersSet"),i="POST"),t.subLayers||(t.subLayers={layers:[]}),t.subLayers.layers||(t.subLayers.layers=[]);var a=t.subLayers.layers,s=a.length;for(var u in a){if("GRID"===a[u].ugcLayerType){var l={},c=a[u].colorDictionarys;for(var f in c){l[c[f].elevation]=c[f].color}}a[u].colorDictionary=l,delete a[u].colorDictionarys}for(var p=0;p<s;p++)a[p].toJsonObject?n.push(a[p].toJsonObject()):n.push(a[p]);(r=Tt.extend(r,t)).subLayers={layers:n},r.object=null;var h=Tt.toJSON([r]);return o.request({method:i,data:h,scope:o,success:e,failure:e})}}}])&&tk(r.prototype,n),o&&tk(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function sk(t){"@babel/helpers - typeof";return(sk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function uk(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,lk(n.key),n)}}function lk(t){var e=function(t,e){if("object"!=sk(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=sk(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==sk(e)?e:e+""}var ck=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.layerStatusList=[],this.holdTime=15,this.resourceID=null,e&&Tt.extend(this,e)},(e=[{key:"destroy",value:function(){this.layerStatusList=null,this.holdTime=null,this.resourceID=null}},{key:"toJSON",value:function(){var t="{";t+='"layers":[';for(var e=[],r=0,n=this.layerStatusList.length;r<n;r++)e.push(this.layerStatusList[r].toJSON());return t+=e,t+="]",t+="}"}}])&&uk(t.prototype,e),r&&uk(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function fk(t){"@babel/helpers - typeof";return(fk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function pk(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,hk(n.key),n)}}function hk(t){var e=function(t,e){if("object"!=fk(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=fk(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==fk(e)?e:e+""}function yk(t,e,r){return e=vk(e),function(t,e){if(e&&("object"===fk(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],vk(t).constructor):e.apply(t,r))}function dk(){return(dk="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=vk(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function vk(t){return(vk=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function mk(t,e){return(mk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var bk=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=yk(this,e,[t,r])).lastparams=null,n.mapUrl=t,r&&Tt.extend(n,r),n.CLASS_NAME="SuperMap.SetLayerStatusService",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&mk(t,e)}(e,Ki),r=e,(n=[{key:"destroy",value:function(){dk(vk(e.prototype),"destroy",this).call(this),Tt.reset(this)}},{key:"processAsync",value:function(t,e){if(t instanceof ck){var r=this;if(r.url=r.mapUrl,null==t.resourceID)return r.url=Tt.urlPathAppend(r.url,"tempLayersSet"),r.lastparams=t,r.request({method:"POST",scope:r,success:r.createTempLayerComplete.bind(r,e),failure:e});r.url=Tt.urlPathAppend(r.url,"tempLayersSet/"+t.resourceID),r.url=Tt.urlAppend(r.url,"elementRemain=true&reference="+t.resourceID+"&holdTime="+t.holdTime.toString());var n="[{";return n+='"type":"UGC",',null!=t.layerStatusList&&t.layerStatusList.length>0&&(n+='"subLayers":'+t.toJSON()),n+=',"visible":true,',n+='"name":"'+this.getMapName(this.mapUrl)+'"',n+="}]",r.request({method:"PUT",data:n,scope:r,success:e,failure:e})}}},{key:"createTempLayerComplete",value:function(t,e){return e=e.result?e.result:e,(e=Tt.transformResult(e)).succeed&&(this.lastparams.resourceID=e.newResourceID),this.processAsync(this.lastparams,t)}},{key:"getMapName",value:function(t){var e=t;"/"===e.charAt(e.length-1)&&(e=e.substr(0,e.length-1));var r=e.lastIndexOf("/");return e.substring(r+1,e.length)}},{key:"transformResult",value:function(t,e){return null!=(t=Tt.transformResult(t))&&null!=this.lastparams&&null!=this.lastparams.resourceID&&(t.newResourceID=this.lastparams.resourceID),{result:t,options:e}}}])&&pk(r.prototype,n),o&&pk(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function gk(t){"@babel/helpers - typeof";return(gk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Sk(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,wk(n.key),n)}}function wk(t){var e=function(t,e){if("object"!=gk(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=gk(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==gk(e)?e:e+""}var _k=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e&&(this.datasetName="",this.datasetQuery="",this.geometryQuery="",this.mode=u.CONTAIN,this.output=null,this.mappingParameters=null,Tt.extend(this,e),this.CLASS_NAME="SuperMap.SingleObjectQueryJobsParameter")},r=[{key:"toObject",value:function(t,e){for(var r in t)"datasetName"!==r?"output"!==r?(e.analyst=e.analyst||{},e.analyst[r]=t[r],"mappingParameters"===r&&(e.analyst[r]=e.analyst[r]||{},e.analyst.mappingParameters=t[r])):(e.output=e.output||{},e.output=t[r]):(e.input=e.input||{},e.input[r]=t[r])}}],(e=[{key:"destroy",value:function(){this.datasetName=null,this.datasetQuery=null,this.geometryQuery=null,this.mode=null,this.output instanceof Xs&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof eu&&(this.mappingParameters.destroy(),this.mappingParameters=null)}}])&&Sk(t.prototype,e),r&&Sk(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function Ok(t){"@babel/helpers - typeof";return(Ok="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ek(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Pk(n.key),n)}}function Pk(t){var e=function(t,e){if("object"!=Ok(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Ok(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Ok(e)?e:e+""}function xk(t,e,r){return e=Ck(e),function(t,e){if(e&&("object"===Ok(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Ck(t).constructor):e.apply(t,r))}function Tk(){return(Tk="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ck(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Ck(t){return(Ck=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function kk(t,e){return(kk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Ak=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=xk(this,e,[t,r])).url=Tt.urlPathAppend(n.url,"spatialanalyst/query"),n.CLASS_NAME="SuperMap.SingleObjectQueryJobsService",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&kk(t,e)}(e,hu),r=e,(n=[{key:"destroy",value:function(){Tk(Ck(e.prototype),"destroy",this).call(this)}},{key:"getQueryJobs",value:function(t){return Tk(Ck(e.prototype),"getJobs",this).call(this,this.url,t)}},{key:"getQueryJob",value:function(t,r){return Tk(Ck(e.prototype),"getJobs",this).call(this,Tt.urlPathAppend(this.url,t),r)}},{key:"addQueryJob",value:function(t,r,n,o){return Tk(Ck(e.prototype),"addJob",this).call(this,this.url,t,_k,r,n,o)}}])&&Ek(r.prototype,n),o&&Ek(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function jk(t){"@babel/helpers - typeof";return(jk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Nk(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ik(n.key),n)}}function Ik(t){var e=function(t,e){if("object"!=jk(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=jk(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==jk(e)?e:e+""}var Mk=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},this.keyWord=null,this.returnPosition=!1,Tt.extend(this,e),this.CLASS_NAME="SuperMap.StopQueryParameters"},(e=[{key:"destroy",value:function(){Tt.reset(this)}}])&&Nk(t.prototype,e),r&&Nk(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function Rk(t){"@babel/helpers - typeof";return(Rk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Lk(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Dk(n.key),n)}}function Dk(t){var e=function(t,e){if("object"!=Rk(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Rk(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Rk(e)?e:e+""}function Bk(t,e,r){return e=Uk(e),function(t,e){if(e&&("object"===Rk(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Uk(t).constructor):e.apply(t,r))}function Fk(){return(Fk="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Uk(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Uk(t){return(Uk=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Gk(t,e){return(Gk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Vk=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=Bk(this,e,[t,r]),r=r||{},Tt.extend(n,r),n.CLASS_NAME="SuperMap.StopQueryService",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Gk(t,e)}(e,Ki),r=e,(n=[{key:"destroy",value:function(){Fk(Uk(e.prototype),"destroy",this).call(this),Tt.reset(this)}},{key:"processAsync",value:function(t,e){if(t instanceof Mk){return this.url=Tt.urlPathAppend(this.url,"stops/keyword/"+t.keyWord),this.request({method:"GET",params:{returnPosition:t.returnPosition},scope:this,success:e,failure:e})}}}])&&Lk(r.prototype,n),o&&Lk(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function zk(t){"@babel/helpers - typeof";return(zk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Hk(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,qk(n.key),n)}}function qk(t){var e=function(t,e){if("object"!=zk(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=zk(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==zk(e)?e:e+""}var Jk=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e&&(this.datasetName="",this.groupField="",this.attributeField="",this.statisticModes="",this.output=null,this.mappingParameters=null,Tt.extend(this,e),this.CLASS_NAME="SuperMap.SummaryAttributesJobsParameter")},r=[{key:"toObject",value:function(t,e){for(var r in t)"datasetName"!==r?"output"!==r?(e.analyst=e.analyst||{},e.analyst[r]=t[r],"mappingParameters"===r&&(e.analyst[r]=e.analyst[r]||{},e.analyst.mappingParameters=t[r])):(e.output=e.output||{},e.output=t[r]):(e.input=e.input||{},e.input[r]=t[r])}}],(e=[{key:"destroy",value:function(){this.datasetName=null,this.groupField=null,this.attributeField=null,this.statisticModes=null,this.output instanceof Xs&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof eu&&(this.mappingParameters.destroy(),this.mappingParameters=null)}}])&&Hk(t.prototype,e),r&&Hk(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function Wk(t){"@babel/helpers - typeof";return(Wk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Kk(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Yk(n.key),n)}}function Yk(t){var e=function(t,e){if("object"!=Wk(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Wk(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Wk(e)?e:e+""}function Qk(t,e,r){return e=Zk(e),function(t,e){if(e&&("object"===Wk(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Zk(t).constructor):e.apply(t,r))}function Xk(){return(Xk="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Zk(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Zk(t){return(Zk=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function $k(t,e){return($k=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var tA=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Qk(this,e,[t,r])).url=Tt.urlPathAppend(n.url,"spatialanalyst/summaryattributes"),n.CLASS_NAME="SuperMap.SummaryAttributesJobsService",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&$k(t,e)}(e,hu),r=e,(n=[{key:"destroy",value:function(){Xk(Zk(e.prototype),"destroy",this).call(this)}},{key:"getSummaryAttributesJobs",value:function(t){return Xk(Zk(e.prototype),"getJobs",this).call(this,this.url,t)}},{key:"getSummaryAttributesJob",value:function(t,r){return Xk(Zk(e.prototype),"getJobs",this).call(this,Tt.urlPathAppend(this.url,t),r)}},{key:"addSummaryAttributesJob",value:function(t,r,n,o){return Xk(Zk(e.prototype),"addJob",this).call(this,this.url,t,Jk,r,n,o)}}])&&Kk(r.prototype,n),o&&Kk(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function eA(t){"@babel/helpers - typeof";return(eA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function rA(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,nA(n.key),n)}}function nA(t){var e=function(t,e){if("object"!=eA(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=eA(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==eA(e)?e:e+""}var oA=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e&&(this.datasetName="",this.regionDataset="",this.query="",this.resolution=100,this.meshType=0,this.statisticModes=B.AVERAGE,this.fields="",this.type=F.SUMMARYMESH,this.output=null,this.mappingParameters=null,Tt.extend(this,e),this.CLASS_NAME="SuperMap.SummaryMeshJobParameter")},r=[{key:"toObject",value:function(t,e){for(var r in t)"datasetName"!==r?"type"!==r?"output"!==r?("SUMMARYMESH"===t.type&&"regionDataset"!==r||"SUMMARYREGION"===t.type&&!n(["meshType","resolution","query"],r))&&(e.analyst=e.analyst||{},"query"===r&&t[r]?e.analyst[r]=t[r].toBBOX():e.analyst[r]=t[r],"mappingParameters"===r&&(e.analyst[r]=e.analyst[r]||{},e.analyst.mappingParameters=t[r])):(e.output=e.output||{},e.output=t[r]):e.type=t[r]:(e.input=e.input||{},e.input[r]=t[r]);function n(t,e){for(var r=t.length;r--;)if(t[r]===e)return!0;return!1}}}],(e=[{key:"destroy",value:function(){this.datasetName=null,this.query=null,this.resolution=null,this.statisticModes=null,this.meshType=null,this.fields=null,this.regionDataset=null,this.type=null,this.output instanceof Xs&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof eu&&(this.mappingParameters.destroy(),this.mappingParameters=null)}}])&&rA(t.prototype,e),r&&rA(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function iA(t){"@babel/helpers - typeof";return(iA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function aA(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,sA(n.key),n)}}function sA(t){var e=function(t,e){if("object"!=iA(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=iA(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==iA(e)?e:e+""}function uA(t,e,r){return e=cA(e),function(t,e){if(e&&("object"===iA(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],cA(t).constructor):e.apply(t,r))}function lA(){return(lA="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=cA(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function cA(t){return(cA=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function fA(t,e){return(fA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var pA=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=uA(this,e,[t,r])).url=Tt.urlPathAppend(n.url,"spatialanalyst/aggregatepoints"),n.CLASS_NAME="SuperMap.SummaryMeshJobsService",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&fA(t,e)}(e,hu),r=e,(n=[{key:"destroy",value:function(){lA(cA(e.prototype),"destroy",this).call(this)}},{key:"getSummaryMeshJobs",value:function(t){return lA(cA(e.prototype),"getJobs",this).call(this,this.url,t)}},{key:"getSummaryMeshJob",value:function(t,r){return lA(cA(e.prototype),"getJobs",this).call(this,Tt.urlPathAppend(this.url,t),r)}},{key:"addSummaryMeshJob",value:function(t,r,n,o){return lA(cA(e.prototype),"addJob",this).call(this,this.url,t,oA,r,n,o)}}])&&aA(r.prototype,n),o&&aA(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function hA(t){"@babel/helpers - typeof";return(hA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function yA(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,dA(n.key),n)}}function dA(t){var e=function(t,e){if("object"!=hA(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=hA(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==hA(e)?e:e+""}var vA=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e&&(this.datasetName="",this.regionDataset="",this.sumShape=!0,this.query="",this.standardSummaryFields=!1,this.standardFields="",this.standardStatisticModes="",this.weightedSummaryFields=!1,this.weightedFields="",this.weightedStatisticModes="",this.meshType=0,this.resolution=100,this.meshSizeUnit=D.METER,this.type=F.SUMMARYMESH,this.output=null,this.mappingParameters=null,Tt.extend(this,e),this.CLASS_NAME="SuperMap.SummaryRegionJobParameter")},r=[{key:"toObject",value:function(t,e){for(var r in t)"datasetName"!==r?"type"!==r&&"type"!==r?"output"!==r?("SUMMARYREGION"===t.type||"SUMMARYMESH"===t.type&&"regionDataset"!==r)&&(e.analyst=e.analyst||{},"query"===r&&t[r]?e.analyst[r]=t[r].toBBOX():e.analyst[r]=t[r],"mappingParameters"===r&&(e.analyst[r]=e.analyst[r]||{},e.analyst.mappingParameters=t[r])):(e.output=e.output||{},e.output=t[r]):e.type=t[r]:(e.input=e.input||{},e.input[r]=t[r])}}],(e=[{key:"destroy",value:function(){this.datasetName=null,this.sumShape=null,this.regionDataset=null,this.query=null,this.standardSummaryFields=null,this.standardFields=null,this.standardStatisticModes=null,this.weightedSummaryFields=null,this.weightedFields=null,this.weightedStatisticModes=null,this.meshType=null,this.resolution=null,this.meshSizeUnit=null,this.type=null,this.output instanceof Xs&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof eu&&(this.mappingParameters.destroy(),this.mappingParameters=null)}}])&&yA(t.prototype,e),r&&yA(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function mA(t){"@babel/helpers - typeof";return(mA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function bA(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,gA(n.key),n)}}function gA(t){var e=function(t,e){if("object"!=mA(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=mA(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==mA(e)?e:e+""}function SA(t,e,r){return e=_A(e),function(t,e){if(e&&("object"===mA(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],_A(t).constructor):e.apply(t,r))}function wA(){return(wA="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=_A(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function _A(t){return(_A=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function OA(t,e){return(OA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var EA=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=SA(this,e,[t,r])).url=Tt.urlPathAppend(n.url,"spatialanalyst/summaryregion"),n.CLASS_NAME="SuperMap.SummaryRegionJobsService",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&OA(t,e)}(e,hu),r=e,(n=[{key:"destroy",value:function(){wA(_A(e.prototype),"destroy",this).call(this)}},{key:"getSummaryRegionJobs",value:function(t){return wA(_A(e.prototype),"getJobs",this).call(this,this.url,t)}},{key:"getSummaryRegionJob",value:function(t,r){return wA(_A(e.prototype),"getJobs",this).call(this,Tt.urlPathAppend(this.url,t),r)}},{key:"addSummaryRegionJob",value:function(t,r,n,o){return wA(_A(e.prototype),"addJob",this).call(this,this.url,t,vA,r,n,o)}}])&&bA(r.prototype,n),o&&bA(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function PA(t){"@babel/helpers - typeof";return(PA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function xA(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,TA(n.key),n)}}function TA(t){var e=function(t,e){if("object"!=PA(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=PA(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==PA(e)?e:e+""}var CA=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.maxWeight=null,this.nodeID=null,this.resourceValue=null,this.type=null,e&&Tt.extend(this,e),this.CLASS_NAME="SuperMap.SupplyCenter"}return e=t,n=[{key:"fromJson",value:function(e){if(e)return new t({maxWeight:e.maxWeight,nodeID:e.nodeID,resourceValue:e.resourceValue,type:e.type})}}],(r=[{key:"destroy",value:function(){this.maxWeight=null,this.nodeID=null,this.resourceValue=null,this.type=null}}])&&xA(e.prototype,r),n&&xA(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,r,n}();function kA(t){"@babel/helpers - typeof";return(kA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function AA(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,jA(n.key),n)}}function jA(t){var e=function(t,e){if("object"!=kA(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=kA(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==kA(e)?e:e+""}var NA=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.bounds=null,this.boundsType=H.MAX,this.cellSize=null,this.cellSizeType=q.UNION,Tt.extend(this,e),this.CLASS_NAME="SuperMap.terrainAnalystSetting"},(e=[{key:"destroy",value:function(){this.bounds=null,this.boundsType=null,this.cellSize=null,this.cellSizeType=null}}])&&AA(t.prototype,e),r&&AA(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function IA(t){"@babel/helpers - typeof";return(IA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function MA(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,RA(n.key),n)}}function RA(t){var e=function(t,e){if("object"!=IA(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=IA(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==IA(e)?e:e+""}function LA(t,e,r){return e=BA(e),function(t,e){if(e&&("object"===IA(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],BA(t).constructor):e.apply(t,r))}function DA(){return(DA="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=BA(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function BA(t){return(BA=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function FA(t,e){return(FA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var UA=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=LA(this,e,[t,r])).CLASS_NAME="SuperMap.SurfaceAnalystService",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&FA(t,e)}(e,qa),r=e,(n=[{key:"destroy",value:function(){DA(BA(e.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){if(t instanceof Ic){var r;return r=this.getJsonParameters(t),this.request({method:"POST",data:r,scope:this,success:e,failure:e})}}},{key:"getJsonParameters",value:function(t){var e="",r={};if(t instanceof Gc)this.url=Tt.urlPathAppend(this.url,"datasets/"+t.dataset+"/"+t.surfaceAnalystMethod.toLowerCase()),Gc.toObject(t,r),e=Tt.toJSON(r);else{if(!(t instanceof $d))return;this.url=Tt.urlPathAppend(this.url,"geometry/"+t.surfaceAnalystMethod.toLowerCase()),e=Tt.toJSON(t)}return this.returnContent=!0,e}},{key:"dataFormat",value:function(){return[o.GEOJSON,o.ISERVER,o.FGB]}}])&&MA(r.prototype,n),i&&MA(r,i),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,i}();function GA(t){"@babel/helpers - typeof";return(GA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function VA(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,zA(n.key),n)}}function zA(t){var e=function(t,e){if("object"!=GA(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=GA(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==GA(e)?e:e+""}var HA=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e&&(this.dataset=null,this.zFactor=1,this.averageCurvatureName=null,this.profileCurvatureName="",this.planCurvatureName="",this.deleteExistResultDataset=!1,Tt.extend(this,e),this.CLASS_NAME="SuperMap.TerrainCurvatureCalculationParameters")},r=[{key:"toObject",value:function(t,e){for(var r in t)"dataset"!==r&&(e[r]=t[r])}}],(e=[{key:"destroy",value:function(){var t=this;t.dataset=null,t.zFactor=1,t.averageCurvatureName=null,t.profileCurvatureName=null,t.planCurvatureName=null,t.deleteExistResultDataset=!0}}])&&VA(t.prototype,e),r&&VA(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function qA(t){"@babel/helpers - typeof";return(qA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function JA(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,WA(n.key),n)}}function WA(t){var e=function(t,e){if("object"!=qA(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=qA(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==qA(e)?e:e+""}function KA(t,e,r){return e=QA(e),function(t,e){if(e&&("object"===qA(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],QA(t).constructor):e.apply(t,r))}function YA(){return(YA="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=QA(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function QA(t){return(QA=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function XA(t,e){return(XA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var ZA=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=KA(this,e,[t,r])).CLASS_NAME="SuperMap.TerrainCurvatureCalculationService",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&XA(t,e)}(e,qa),r=e,(n=[{key:"destroy",value:function(){YA(QA(e.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){var r=this,n={};t instanceof HA&&(r.url=Tt.urlPathAppend(r.url,"datasets/"+t.dataset+"/terraincalculation/curvature")),HA.toObject(t,n);var o=Tt.toJSON(n);return r.url=Tt.urlAppend(r.url,"returnContent=true"),r.request({method:"POST",data:o,scope:r,success:e,failure:e})}}])&&JA(r.prototype,n),o&&JA(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function $A(t){"@babel/helpers - typeof";return($A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function tj(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ej(n.key),n)}}function ej(t){var e=function(t,e){if("object"!=$A(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=$A(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==$A(e)?e:e+""}var rj=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.flowEnabled=!1,this.leaderLineDisplayed=!1,this.leaderLineStyle=new Ir,e&&Tt.extend(this,e),this.CLASS_NAME="SuperMap.ThemeFlow"}return e=t,n=[{key:"fromObj",value:function(e){if(e){var r=new t;return Tt.copy(r,e),r.leaderLineStyle=Ir.fromJson(e.leaderLineStyle),r}}}],(r=[{key:"destroy",value:function(){var t=this;t.flowEnabled=null,t.leaderLineDisplayed=null,t.leaderLineStyle&&(t.leaderLineStyle.destroy(),t.leaderLineStyle=null)}}])&&tj(e.prototype,r),n&&tj(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,r,n}();function nj(t){"@babel/helpers - typeof";return(nj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function oj(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ij(n.key),n)}}function ij(t){var e=function(t,e){if("object"!=nj(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=nj(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==nj(e)?e:e+""}var aj=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.caption=null,this.color=new kr,this.end=0,this.start=0,this.visible=!0,e&&Tt.extend(this,e),this.CLASS_NAME="SuperMap.ThemeGridRangeItem"}return e=t,n=[{key:"fromObj",value:function(e){if(e){var r=new t;return Tt.copy(r,e),r.color=kr.fromJson(e.color),r}}}],(r=[{key:"destroy",value:function(){var t=this;t.caption=null,t.end=null,t.start=null,t.color&&(t.color.destroy(),t.color=null),t.visible=null}},{key:"toServerJSONObject",value:function(){var t={};return(t=Tt.copyAttributes(t,this)).color&&t.color.toServerJSONObject&&(t.color=t.color.toServerJSONObject()),t}}])&&oj(e.prototype,r),n&&oj(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,r,n}();function sj(t){"@babel/helpers - typeof";return(sj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function uj(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,lj(n.key),n)}}function lj(t){var e=function(t,e){if("object"!=sj(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=sj(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==sj(e)?e:e+""}function cj(t,e,r){return e=pj(e),function(t,e){if(e&&("object"===sj(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],pj(t).constructor):e.apply(t,r))}function fj(){return(fj="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=pj(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function pj(t){return(pj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function hj(t,e){return(hj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var yj=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=cj(this,e,["GRIDRANGE",t])).items=null,r.rangeMode=v.EQUALINTERVAL,r.rangeParameter=0,r.colorGradientType=m.YELLOW_RED,r.reverseColor=!1,t&&Tt.extend(r,t),r.CLASS_NAME="SuperMap.ThemeGridRange",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&hj(t,e)}(e,zb),r=e,o=[{key:"fromObj",value:function(t){if(t){var r=new e;Tt.copy(r,t);var n=t.items,o=n?n.length:0;r.items=[];for(var i=0;i<o;i++)r.items.push(aj.fromObj(n[i]));return r}}}],(n=[{key:"destroy",value:function(){fj(pj(e.prototype),"destroy",this).call(this);var t=this;if(t.items){if(t.items.length>0)for(var r in t.items)t.items[r].destroy(),t.items[r]=null;t.items=null}t.reverseColor=null,t.rangeMode=null,t.rangeParameter=null,t.colorGradientType=null}}])&&uj(r.prototype,n),o&&uj(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function dj(t){"@babel/helpers - typeof";return(dj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function vj(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,mj(n.key),n)}}function mj(t){var e=function(t,e){if("object"!=dj(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=dj(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==dj(e)?e:e+""}var bj=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.caption=null,this.color=new kr,this.unique=null,this.visible=!0,e&&Tt.extend(this,e),this.CLASS_NAME="SuperMap.ThemeGridUniqueItem"}return e=t,n=[{key:"fromObj",value:function(e){var r=new t;return Tt.copy(r,e),r.color=kr.fromJson(e.color),r}}],(r=[{key:"destroy",value:function(){var t=this;t.caption=null,t.unique=null,t.color&&(t.color.destroy(),t.color=null),t.visible=null}},{key:"toServerJSONObject",value:function(){var t={};return(t=Tt.copyAttributes(t,this)).color&&t.color.toServerJSONObject&&(t.color=t.color.toServerJSONObject()),t}}])&&vj(e.prototype,r),n&&vj(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,r,n}();function gj(t){"@babel/helpers - typeof";return(gj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Sj(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,wj(n.key),n)}}function wj(t){var e=function(t,e){if("object"!=gj(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=gj(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==gj(e)?e:e+""}function _j(t,e,r){return e=Ej(e),function(t,e){if(e&&("object"===gj(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Ej(t).constructor):e.apply(t,r))}function Oj(){return(Oj="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ej(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Ej(t){return(Ej=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Pj(t,e){return(Pj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var xj=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=_j(this,e,["GRIDUNIQUE",t])).defaultcolor=new kr,r.items=null,t&&Tt.extend(r,t),r.CLASS_NAME="SuperMap.ThemeGridUnique",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Pj(t,e)}(e,zb),r=e,o=[{key:"fromObj",value:function(t){var r=new e,n=t.items,o=n?n.length:0;Tt.extend(r,t),r.items=[],r.defaultcolor=kr.fromJson(t.defaultcolor);for(var i=0;i<o;i++)r.items.push(bj.fromObj(n[i]));return r}}],(n=[{key:"destroy",value:function(){Oj(Ej(e.prototype),"destroy",this).call(this);var t=this;if(t.items){if(t.items.length>0)for(var r in t.items)t.items[r].destroy(),t.items[r]=null;t.items=null}t.defaultcolor&&(t.defaultcolor.destroy(),t.defaultcolor=null)}},{key:"toServerJSONObject",value:function(){var t={};if((t=Tt.copyAttributes(t,this)).defaultcolor&&t.defaultcolor.toServerJSONObject&&(t.defaultcolor=t.defaultcolor.toServerJSONObject()),t.items){for(var e=[],r=t.items.length,n=0;n<r;n++)e.push(t.items[n].toServerJSONObject());t.items=e}return t}}])&&Sj(r.prototype,n),o&&Sj(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function Tj(t){"@babel/helpers - typeof";return(Tj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Cj(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,kj(n.key),n)}}function kj(t){var e=function(t,e){if("object"!=Tj(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Tj(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Tj(e)?e:e+""}var Aj=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.caption=null,this.unique=null,this.offsetX=0,this.offsetY=0,this.visible=!0,this.style=new Wb,e&&Tt.extend(this,e),this.CLASS_NAME="SuperMap.ThemeLabelUniqueItem"}return e=t,n=[{key:"fromObj",value:function(e){if(e){var r=new t;return Tt.copy(r,e),r}}}],(r=[{key:"destroy",value:function(){var t=this;t.unique=null,t.caption=null,t.offsetX=null,t.offsetY=null,t.style&&(t.style.destroy(),t.style=null),t.visible=null}}])&&Cj(e.prototype,r),n&&Cj(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,r,n}();function jj(t){"@babel/helpers - typeof";return(jj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Nj(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ij(n.key),n)}}function Ij(t){var e=function(t,e){if("object"!=jj(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=jj(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==jj(e)?e:e+""}var Mj=function(){return t=function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.srcData=e,this.targetData=r,this.CLASS_NAME="SuperMap.ThemeMemoryData"},(e=[{key:"destroy",value:function(){this.srcData=null,this.targetData=null}},{key:"toJSON",value:function(){if(this.srcData&&this.targetData){for(var t="",e=Math.min(this.srcData.length,this.targetData.length),r=0;r<e;r++)t+="'"+this.srcData[r]+"':'"+this.targetData[r]+"',";return r>0&&(t=t.substring(0,t.length-1)),"{"+t+"}"}return null}}])&&Nj(t.prototype,e),r&&Nj(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function Rj(t){"@babel/helpers - typeof";return(Rj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Lj(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Dj(n.key),n)}}function Dj(t){var e=function(t,e){if("object"!=Rj(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Rj(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Rj(e)?e:e+""}var Bj=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.datasetNames=null,this.dataSourceNames=null,this.joinItems=null,this.themes=null,this.displayFilters=null,this.displayOrderBys=null,this.fieldValuesDisplayFilter=null,e&&Tt.extend(this,e),this.CLASS_NAME="SuperMap.ThemeParameters"},(e=[{key:"destroy",value:function(){var t=this;if(t.datasetNames=null,t.dataSourceNames=null,t.joinItems){for(var e=0,r=t.joinItems,n=r.length;e<n;e++)r[e].destroy();t.joinItems=null}if(t.themes){for(var o=0,i=t.themes,a=i.length;o<a;o++)i[o].destroy();t.themes=null}}}])&&Lj(t.prototype,e),r&&Lj(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function Fj(t){"@babel/helpers - typeof";return(Fj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Uj(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Gj(n.key),n)}}function Gj(t){var e=function(t,e){if("object"!=Fj(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Fj(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Fj(e)?e:e+""}function Vj(t,e,r){return e=Hj(e),function(t,e){if(e&&("object"===Fj(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Hj(t).constructor):e.apply(t,r))}function zj(){return(zj="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Hj(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Hj(t){return(Hj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function qj(t,e){return(qj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Jj=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=Vj(this,e,[t,r]),r&&Tt.extend(n,r),n.url=Tt.urlPathAppend(n.url,"tempLayersSet"),n.CLASS_NAME="SuperMap.ThemeService",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&qj(t,e)}(e,Ki),r=e,(n=[{key:"destroy",value:function(){zj(Hj(e.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){if(t instanceof Bj){var r;return r=this.getJsonParameters(t),this.request({method:"POST",data:r,scope:this,success:e,failure:e})}}},{key:"getJsonParameters",value:function(t){var e,r="",n=null,o=null,i=null;r+="[{'type': 'UGC','subLayers': {'layers': [";for(var a=0;a<t.themes.length;a++){n=t.themes[a];var s=Tt.toJSON(n);if(r+="{'theme': "+(s=s.slice(0,-1))+"},'type': 'UGC','ugcLayerType': 'THEME',",(o=t.displayFilters)&&o.length>0&&(1===o.length?r+="'displayFilter':\""+o[0]+'",':r+="'displayFilter':\""+o[a]+'",'),(i=t.displayOrderBy)&&i.length>0&&(1===i.length?r+="'displayOrderBy':'"+i[0]+"',":r+="'displayOrderBy':'"+i[a]+"',"),(e=t.fieldValuesDisplayFilter)&&(r+="'fieldValuesDisplayFilter':"+Tt.toJSON(e)+","),t.joinItems&&t.joinItems.length>0&&t.joinItems[a]&&(r+="'joinItems':["+Tt.toJSON(t.joinItems[a])+"],"),t.datasetNames&&t.dataSourceNames){var u=t.datasetNames[a]?a:t.datasetNames.length-1,l=t.dataSourceNames[a]?a:t.dataSourceNames.length-1;r+="'datasetInfo': {'name': '"+t.datasetNames[u]+"','dataSourceName': '"+t.dataSourceNames[l]+"'}},"}else r+="},"}t.themes&&t.themes.length>0&&(r=r.substring(0,r.length-1)),r+="]},";var c=this.url.split("/");return r+="'name': '"+c[c.length-2]+"'}]"}}])&&Uj(r.prototype,n),o&&Uj(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function Wj(t){"@babel/helpers - typeof";return(Wj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Kj(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Yj(n.key),n)}}function Yj(t){var e=function(t,e){if("object"!=Wj(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Wj(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Wj(e)?e:e+""}function Qj(t,e,r){return e=Zj(e),function(t,e){if(e&&("object"===Wj(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Zj(t).constructor):e.apply(t,r))}function Xj(){return(Xj="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Zj(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Zj(t){return(Zj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function $j(t,e){return($j=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var tN=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Qj(this,e,[t,r])).mode=null,r&&Tt.extend(n,r),n.CLASS_NAME="SuperMap.ThiessenAnalystService",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&$j(t,e)}(e,qa),r=e,(n=[{key:"destroy",value:function(){Xj(Zj(e.prototype),"destroy",this).call(this),this.mode=null}},{key:"processAsync",value:function(t,e){var r={},n=this;t instanceof $c?(n.mode="datasets",n.url=Tt.urlPathAppend(n.url,"datasets/"+t.dataset+"/thiessenpolygon"),$c.toObject(t,r)):t instanceof sv&&(n.mode="geometry",n.url=Tt.urlPathAppend(n.url,"geometry/thiessenpolygon"),sv.toObject(t,r));var o=Tt.toJSON(r);return this.returnContent=!0,n.request({method:"POST",data:o,scope:n,success:e,failure:e})}},{key:"dataFormat",value:function(){return[o.GEOJSON,o.ISERVER,o.FGB]}}])&&Kj(r.prototype,n),i&&Kj(r,i),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,i}();function eN(t){"@babel/helpers - typeof";return(eN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function rN(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,nN(n.key),n)}}function nN(t){var e=function(t,e){if("object"!=eN(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=eN(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==eN(e)?e:e+""}function oN(t,e,r){return e=aN(e),function(t,e){if(e&&("object"===eN(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],aN(t).constructor):e.apply(t,r))}function iN(){return(iN="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=aN(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function aN(t){return(aN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function sN(t,e){return(sN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var uN=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=oN(this,e,[t,r]),r&&Tt.extend(n,r),n.CLASS_NAME="SuperMap.GeometryBatchAnalystService",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&sN(t,e)}(e,qa),r=e,(n=[{key:"processAsync",value:function(t,e){var r=this;r.url=Tt.urlPathAppend(r.url,"geometry/batchanalyst"),r.url=Tt.urlAppend(r.url,"returnContent=true&ignoreAnalystParam=true");var n=r._processParams(t),o=Tt.toJSON(n);return r.request({method:"POST",data:o,scope:r,success:e,failure:e})}},{key:"_processParams",value:function(t){var e=this;if(Tt.isArray(t)){var r=[];return t.map(function(t){return r.push(e._toJSON(t)),t}),r}}},{key:"_toJSON",value:function(t){var e={};if("buffer"===t.analystName)e.analystName="buffer",e.param={},Rs.toObject(t.param,e.param);else if("overlay"===t.analystName)e.analystName="overlay",e.param={},qd.toObject(t.param,e.param);else if("interpolationDensity"===t.analystName)e.analystName="interpolationDensity",e.param={},Zw.toObject(t.param,e.param);else if("interpolationidw"===t.analystName)e.analystName="interpolationidw",e.param={},Zw.toObject(t.param,e.param);else if("interpolationRBF"===t.analystName)e.analystName="interpolationRBF",e.param={},Zw.toObject(t.param,e.param);else if("interpolationKriging"===t.analystName)e.analystName="interpolationKriging",e.param={},Zw.toObject(t.param,e.param);else{if("thiessenpolygon"!==t.analystName)return t;e.analystName="thiessenpolygon",e.param={},sv.toObject(t.param,e.param)}return e}},{key:"destroy",value:function(){iN(aN(e.prototype),"destroy",this).call(this)}}])&&rN(r.prototype,n),o&&rN(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function lN(t){"@babel/helpers - typeof";return(lN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function cN(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,fN(n.key),n)}}function fN(t){var e=function(t,e){if("object"!=lN(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=lN(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==lN(e)?e:e+""}function pN(t,e,r){return e=yN(e),function(t,e){if(e&&("object"===lN(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],yN(t).constructor):e.apply(t,r))}function hN(){return(hN="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=yN(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function yN(t){return(yN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function dN(t,e){return(dN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var vN=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=pN(this,e,[t,r])).CLASS_NAME="SuperMap.TilesetsService",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&dN(t,e)}(e,Ki),r=e,(n=[{key:"destroy",value:function(){hN(yN(e.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t){if(this.url){return this.url=Tt.urlPathAppend(this.url,"tilesets"),this.request({method:"GET",scope:this,success:t,failure:t})}}}])&&cN(r.prototype,n),o&&cN(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function mN(t){"@babel/helpers - typeof";return(mN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function bN(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,gN(n.key),n)}}function gN(t){var e=function(t,e){if("object"!=mN(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=mN(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==mN(e)?e:e+""}var SN=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e&&(this.datasetName="",this.datasetTopology="",this.tolerance="",this.rule=U.REGIONNOOVERLAP,this.output=null,this.mappingParameters=null,Tt.extend(this,e),this.CLASS_NAME="SuperMap.TopologyValidatorJobsParameter")},r=[{key:"toObject",value:function(t,e){for(var r in t)"datasetName"!==r?"output"!==r?(e.analyst=e.analyst||{},e.analyst[r]=t[r],"mappingParameters"===r&&(e.analyst[r]=e.analyst[r]||{},e.analyst.mappingParameters=t[r])):(e.output=e.output||{},e.output=t[r]):(e.input=e.input||{},e.input[r]=t[r])}}],(e=[{key:"destroy",value:function(){this.datasetName=null,this.datasetTopology=null,this.tolerance=null,this.rule=null,this.output instanceof Xs&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof eu&&(this.mappingParameters.destroy(),this.mappingParameters=null)}}])&&bN(t.prototype,e),r&&bN(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function wN(t){"@babel/helpers - typeof";return(wN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _N(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ON(n.key),n)}}function ON(t){var e=function(t,e){if("object"!=wN(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=wN(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==wN(e)?e:e+""}function EN(t,e,r){return e=xN(e),function(t,e){if(e&&("object"===wN(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],xN(t).constructor):e.apply(t,r))}function PN(){return(PN="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=xN(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function xN(t){return(xN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function TN(t,e){return(TN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var CN=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=EN(this,e,[t,r])).url=Tt.urlPathAppend(n.url,"spatialanalyst/topologyvalidator"),n.CLASS_NAME="SuperMap.TopologyValidatorJobsService",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&TN(t,e)}(e,hu),r=e,(n=[{key:"destroy",value:function(){PN(xN(e.prototype),"destroy",this).call(this)}},{key:"getTopologyValidatorJobs",value:function(t){return PN(xN(e.prototype),"getJobs",this).call(this,this.url,t)}},{key:"getTopologyValidatorJob",value:function(t,r){return PN(xN(e.prototype),"getJobs",this).call(this,Tt.urlPathAppend(this.url,t),r)}},{key:"addTopologyValidatorJob",value:function(t,r,n,o){return PN(xN(e.prototype),"addJob",this).call(this,this.url,t,SN,r,n,o)}}])&&_N(r.prototype,n),o&&_N(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function kN(t){"@babel/helpers - typeof";return(kN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function AN(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,jN(n.key),n)}}function jN(t){var e=function(t,e){if("object"!=kN(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=kN(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==kN(e)?e:e+""}var NN=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},this.lineID=null,this.lineName=null,this.lineAliasName=null,this.startStopIndex=null,this.startStopName=null,this.startStopAliasName=null,this.endStopIndex=null,this.endStopName=null,this.endStopAliasName=null,Tt.extend(this,e),this.CLASS_NAME="SuperMap.TransferLine"}return e=t,n=[{key:"fromJson",value:function(e){if(e)return new t({lineID:e.lineID,lineName:e.lineName,lineAliasName:e.lineAliasName,startStopIndex:e.startStopIndex,startStopName:e.startStopName,startStopAliasName:e.startStopAliasName,endStopIndex:e.endStopIndex,endStopName:e.endStopName,endStopAliasName:e.endStopAliasName})}}],(r=[{key:"destroy",value:function(){Tt.reset(this)}}])&&AN(e.prototype,r),n&&AN(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,r,n}();function IN(t){"@babel/helpers - typeof";return(IN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function MN(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,RN(n.key),n)}}function RN(t){var e=function(t,e){if("object"!=IN(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=IN(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==IN(e)?e:e+""}var LN=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},this.transferLines=null,this.points=null,Tt.extend(this,e),this.CLASS_NAME="SuperMap.TransferPathParameters"},r=[{key:"toJson",value:function(t){if(t)return Tt.toJSON(t)}}],(e=[{key:"destroy",value:function(){Tt.reset(this)}}])&&MN(t.prototype,e),r&&MN(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function DN(t){"@babel/helpers - typeof";return(DN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function BN(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,FN(n.key),n)}}function FN(t){var e=function(t,e){if("object"!=DN(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=DN(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==DN(e)?e:e+""}function UN(t,e,r){return e=VN(e),function(t,e){if(e&&("object"===DN(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],VN(t).constructor):e.apply(t,r))}function GN(){return(GN="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=VN(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function VN(t){return(VN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function zN(t,e){return(zN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var HN=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=UN(this,e,[t,r])).CLASS_NAME="SuperMap.TransferPathService",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&zN(t,e)}(e,Ki),r=e,(n=[{key:"destroy",value:function(){GN(VN(e.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){if(t instanceof LN){var r;return this.url=Tt.urlPathAppend(this.url,"path"),r={points:Tt.toJSON(t.points),transferLines:Tt.toJSON(t.transferLines)},this.request({method:"GET",params:r,scope:this,success:e,failure:e})}}}])&&BN(r.prototype,n),o&&BN(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function qN(t){"@babel/helpers - typeof";return(qN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function JN(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,WN(n.key),n)}}function WN(t){var e=function(t,e){if("object"!=qN(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=qN(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==qN(e)?e:e+""}var KN=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},this.solutionCount=6,this.transferPreference=A.NONE,this.transferTactic=k.LESS_TIME,this.walkingRatio=null,this.points=!1,this.evadeLines=null,this.evadeStops=null,this.priorLines=null,this.priorStops=null,this.travelTime=null,Tt.extend(this,e),this.CLASS_NAME="SuperMap.TransferSolutionParameters"},r=[{key:"toJson",value:function(t){if(t)return Tt.toJSON(t)}}],(e=[{key:"destroy",value:function(){Tt.reset(this)}}])&&JN(t.prototype,e),r&&JN(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function YN(t){"@babel/helpers - typeof";return(YN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function QN(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,XN(n.key),n)}}function XN(t){var e=function(t,e){if("object"!=YN(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=YN(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==YN(e)?e:e+""}function ZN(t,e,r){return e=tI(e),function(t,e){if(e&&("object"===YN(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],tI(t).constructor):e.apply(t,r))}function $N(){return($N="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=tI(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function tI(t){return(tI=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function eI(t,e){return(eI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var rI=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=ZN(this,e,[t,r])).CLASS_NAME="SuperMap.TransferSolutionService",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&eI(t,e)}(e,Ki),r=e,(n=[{key:"destroy",value:function(){$N(tI(e.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){if(t instanceof KN){var r;return this.url=Tt.urlPathAppend(this.url,"solutions"),r={points:Tt.toJSON(t.points),walkingRatio:t.walkingRatio,transferTactic:t.transferTactic,solutionCount:t.solutionCount,transferPreference:t.transferPreference},t.evadeLines&&(r.evadeLines=Tt.toJSON(t.evadeLines)),t.evadeStops&&(r.evadeStops=Tt.toJSON(t.evadeStops)),t.priorLines&&(r.priorLines=Tt.toJSON(t.priorLines)),t.priorStops&&(r.priorStops=Tt.toJSON(t.priorStops)),t.travelTime&&(r.travelTime=t.travelTime),this.request({method:"GET",params:r,scope:this,success:e,failure:e})}}}])&&QN(r.prototype,n),o&&QN(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function nI(t){"@babel/helpers - typeof";return(nI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function oI(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,iI(n.key),n)}}function iI(t){var e=function(t,e){if("object"!=nI(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=nI(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==nI(e)?e:e+""}var aI=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e&&(this.edgeId="",this.fromNodeId="",this.toNodeId="",this.weightField="",this.edgeWeight="",Tt.extend(this,e),this.CLASS_NAME="SuperMap.UpdateEdgeWeightParameters")},(e=[{key:"destroy",value:function(){this.edgeId=null,this.fromNodeId=null,this.toNodeId=null,this.weightField=null,this.edgeWeight=null}}])&&oI(t.prototype,e),r&&oI(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function sI(t){"@babel/helpers - typeof";return(sI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function uI(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,lI(n.key),n)}}function lI(t){var e=function(t,e){if("object"!=sI(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=sI(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==sI(e)?e:e+""}var cI=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e&&(this.datasourceName=null,this.datasetName=null,this.datasetType=null,e&&Tt.extend(this,e),this.CLASS_NAME="SuperMap.CreateDatasetParameters")},(e=[{key:"destroy",value:function(){this.datasourceName=null,this.datasetName=null,this.datasetType=null}}])&&uI(t.prototype,e),r&&uI(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function fI(t){"@babel/helpers - typeof";return(fI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function pI(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,hI(n.key),n)}}function hI(t){var e=function(t,e){if("object"!=fI(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=fI(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==fI(e)?e:e+""}function yI(t,e,r){return e=vI(e),function(t,e){if(e&&("object"===fI(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],vI(t).constructor):e.apply(t,r))}function dI(){return(dI="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=vI(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function vI(t){return(vI=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function mI(t,e){return(mI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var bI=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=yI(this,e,[t,r])).CLASS_NAME="SuperMap.UpdateEdgeWeightService",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&mI(t,e)}(e,Iu),r=e,(n=[{key:"destroy",value:function(){dI(vI(e.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){if(t instanceof aI){var r=this,n=r.parse(t);r.url=Tt.urlPathAppend(r.url,n);var o=t.edgeWeight?t.edgeWeight:null;return r.request({method:"PUT",scope:r,data:o,success:e,failure:e})}}},{key:"parse",value:function(t){if(t){var e="";for(var r in t)if(""!==t[r]&&"edgeWeight"!==t[r])switch(r){case"edgeId":e+="/edgeweight/"+t[r];break;case"fromNodeId":e+="/fromnode/"+t[r];break;case"toNodeId":e+="/tonode/"+t[r];break;case"weightField":e+="/weightfield/"+t[r]}return e}}}])&&pI(r.prototype,n),o&&pI(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function gI(t){"@babel/helpers - typeof";return(gI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function SI(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,wI(n.key),n)}}function wI(t){var e=function(t,e){if("object"!=gI(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=gI(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==gI(e)?e:e+""}var _I=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e&&(this.nodeId="",this.fromEdgeId="",this.toEdgeId="",this.weightField="",this.turnNodeWeight="",Tt.extend(this,e),this.CLASS_NAME="SuperMap.UpdateTurnNodeWeightParameters")},(e=[{key:"destroy",value:function(){this.nodeId=null,this.fromEdgeId=null,this.toEdgeId=null,this.weightField=null,this.turnNodeWeight=null}}])&&SI(t.prototype,e),r&&SI(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function OI(t){"@babel/helpers - typeof";return(OI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function EI(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,PI(n.key),n)}}function PI(t){var e=function(t,e){if("object"!=OI(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=OI(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==OI(e)?e:e+""}function xI(t,e,r){return e=CI(e),function(t,e){if(e&&("object"===OI(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],CI(t).constructor):e.apply(t,r))}function TI(){return(TI="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=CI(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function CI(t){return(CI=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function kI(t,e){return(kI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var AI=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=xI(this,e,[t,r])).CLASS_NAME="SuperMap.UpdateTurnNodeWeightService",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&kI(t,e)}(e,Iu),r=e,(n=[{key:"destroy",value:function(){TI(CI(e.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){if(t instanceof _I){var r=this,n=r.parse(t);r.url=Tt.urlPathAppend(r.url,n);var o=t.turnNodeWeight?t.turnNodeWeight:null;return r.request({method:"PUT",scope:r,data:o,success:e,failure:e})}}},{key:"parse",value:function(t){if(t){var e="";for(var r in t)if(""!==t[r]&&"turnNodeWeight"!==t[r])switch(r){case"nodeId":e+="/turnnodeweight/"+t[r];break;case"fromEdgeId":e+="/fromedge/"+t[r];break;case"toEdgeId":e+="/toedge/"+t[r];break;case"weightField":e+="/weightfield/"+t[r]}return e}}}])&&EI(r.prototype,n),o&&EI(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function jI(t){"@babel/helpers - typeof";return(jI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function NI(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,II(n.key),n)}}function II(t){var e=function(t,e){if("object"!=jI(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=jI(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==jI(e)?e:e+""}var MI=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e&&(this.datasourceName=null,this.datasetName=null,this.isFileCache=null,this.description=null,this.prjCoordSys=null,this.charset=null,this.palette=null,this.noValue=null,e&&Tt.extend(this,e),this.CLASS_NAME="SuperMap.UpdateDatasetParameters")},(e=[{key:"destroy",value:function(){var t=this;t.datasourceName=null,t.datasetName=null,t.isFileCache=null,t.prjCoordSys=null,t.charset=null,t.palette=null,t.noValue=null}}])&&NI(t.prototype,e),r&&NI(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function RI(t){"@babel/helpers - typeof";return(RI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function LI(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,DI(n.key),n)}}function DI(t){var e=function(t,e){if("object"!=RI(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=RI(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==RI(e)?e:e+""}var BI=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},this.datasetName="",this.datasetVectorClip="",this.geometryClip="",this.mode=M.CLIP,this.output=null,this.mappingParameters=null,Tt.extend(this,e),this.CLASS_NAME="SuperMap.VectorClipJobsParameter"},r=[{key:"toObject",value:function(t,e){for(var r in t)"datasetName"!==r?"output"!==r?(e.analyst=e.analyst||{},e.analyst[r]=t[r],"mappingParameters"===r&&(e.analyst[r]=e.analyst[r]||{},e.analyst.mappingParameters=t[r])):(e.output=e.output||{},e.output=t[r]):(e.input=e.input||{},e.input[r]=t[r])}}],(e=[{key:"destroy",value:function(){this.datasetName=null,this.datasetVectorClip=null,this.geometryClip=null,this.mode=null,this.output instanceof Xs&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof eu&&(this.mappingParameters.destroy(),this.mappingParameters=null)}}])&&LI(t.prototype,e),r&&LI(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function FI(t){"@babel/helpers - typeof";return(FI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function UI(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,GI(n.key),n)}}function GI(t){var e=function(t,e){if("object"!=FI(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=FI(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==FI(e)?e:e+""}function VI(t,e,r){return e=HI(e),function(t,e){if(e&&("object"===FI(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],HI(t).constructor):e.apply(t,r))}function zI(){return(zI="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=HI(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function HI(t){return(HI=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function qI(t,e){return(qI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var JI=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=VI(this,e,[t,r])).url=Tt.urlPathAppend(n.url,"spatialanalyst/vectorclip"),n.CLASS_NAME="SuperMap.VectorClipJobsService",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&qI(t,e)}(e,hu),r=e,(n=[{key:"destroy",value:function(){zI(HI(e.prototype),"destroy",this).call(this)}},{key:"getVectorClipJobs",value:function(t){return zI(HI(e.prototype),"getJobs",this).call(this,this.url,t)}},{key:"getVectorClipJob",value:function(t,r){return zI(HI(e.prototype),"getJobs",this).call(this,Tt.urlPathAppend(this.url,t),r)}},{key:"addVectorClipJob",value:function(t,r,n,o){return zI(HI(e.prototype),"addJob",this).call(this,this.url,t,BI,r,n,o)}}])&&UI(r.prototype,n),o&&UI(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function WI(t){"@babel/helpers - typeof";return(WI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function KI(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,YI(n.key),n)}}function YI(t){var e=function(t,e){if("object"!=WI(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=WI(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==WI(e)?e:e+""}var QI=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},this.type=null,Tt.extend(this,e),this.CLASS_NAME="SuperMap.RasterFunctionParameter"},(e=[{key:"destroy",value:function(){this.type=null}}])&&KI(t.prototype,e),r&&KI(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function XI(t){"@babel/helpers - typeof";return(XI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ZI(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,$I(n.key),n)}}function $I(t){var e=function(t,e){if("object"!=XI(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=XI(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==XI(e)?e:e+""}function tM(t,e,r){return e=rM(e),function(t,e){if(e&&("object"===XI(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],rM(t).constructor):e.apply(t,r))}function eM(){return(eM="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=rM(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function rM(t){return(rM=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function nM(t,e){return(nM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var oM=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=tM(this,e,[t])).redIndex=0,r.nirIndex=1,r.colorMap="0:ffffe5ff;0.1:f7fcb9ff;0.2:d9f0a3ff;0.3:addd8eff;0.4:78c679ff;0.5:41ab5dff;0.6:238443ff;0.7:006837ff;1:004529ff",r.type=z.NDVI,Tt.extend(r,t),r.CLASS_NAME="SuperMap.NDVIParameter",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&nM(t,e)}(e,QI),r=e,(n=[{key:"destroy",value:function(){eM(rM(e.prototype),"destroy",this).call(this),this.redIndex=null,this.nirIndex=null,this.colorMap=null}},{key:"toJSON",value:function(){return{redIndex:this.redIndex,nirIndex:this.nirIndex,colorMap:this.colorMap,type:this.type}}}])&&ZI(r.prototype,n),o&&ZI(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function iM(t){"@babel/helpers - typeof";return(iM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function aM(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,sM(n.key),n)}}function sM(t){var e=function(t,e){if("object"!=iM(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=iM(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==iM(e)?e:e+""}function uM(t,e,r){return e=cM(e),function(t,e){if(e&&("object"===iM(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],cM(t).constructor):e.apply(t,r))}function lM(){return(lM="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=cM(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function cM(t){return(cM=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function fM(t,e){return(fM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var pM=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=uM(this,e,[t])).altitude=45,r.azimuth=315,r.zFactor=1,r.type=z.HILLSHADE,Tt.extend(r,t),r.CLASS_NAME="SuperMap.HillshadeParameter",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&fM(t,e)}(e,QI),r=e,(n=[{key:"destroy",value:function(){lM(cM(e.prototype),"destroy",this).call(this),this.altitude=null,this.azimuth=null,this.zFactor=null}},{key:"toJSON",value:function(){return{altitude:this.altitude,azimuth:this.azimuth,zFactor:this.zFactor,type:this.type}}}])&&aM(r.prototype,n),o&&aM(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function hM(t){"@babel/helpers - typeof";return(hM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function yM(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,dM(n.key),n)}}function dM(t){var e=function(t,e){if("object"!=hM(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=hM(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==hM(e)?e:e+""}var vM=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.name=null,this.picAsUrl=null,this.picAsBase64=null,this.CLASS_NAME="SuperMap.WebPrintingJobCustomItems",Tt.extend(this,e)},(e=[{key:"destroy",value:function(){this.name=null,this.picAsUrl=null,this.picAsBase64=null}},{key:"toJSON",value:function(){var t={name:this.name};return this.title&&(t.title=this.title),this.picAsUrl?t.picAsUrl=this.picAsUrl:this.picAsBase64&&(t.picAsBase64=this.picAsBase64.replace(/^data:.+;base64,/,"")),Tt.toJSON(t)}}])&&yM(t.prototype,e),r&&yM(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function mM(t){"@babel/helpers - typeof";return(mM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function bM(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,gM(n.key),n)}}function gM(t){var e=function(t,e){if("object"!=mM(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=mM(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==mM(e)?e:e+""}var SM=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.picAsUrl=null,this.picAsBase64=null,this.CLASS_NAME="SuperMap.WebPrintingJobImage",Tt.extend(this,e)},(e=[{key:"destroy",value:function(){this.picAsUrl=null,this.picAsBase64=null}},{key:"toJSON",value:function(){var t={};return this.picAsUrl&&(t.picAsUrl=this.picAsUrl),this.picAsBase64&&(t.picAsBase64=this.picAsBase64.replace(/^data:.+;base64,/,"")),Tt.toJSON(t)}}])&&bM(t.prototype,e),r&&bM(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function wM(t){"@babel/helpers - typeof";return(wM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _M(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,OM(n.key),n)}}function OM(t){var e=function(t,e){if("object"!=wM(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=wM(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==wM(e)?e:e+""}var EM=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.name=null,this.layerType=null,this.url=null,this.CLASS_NAME="SuperMap.WebPrintingJobLayers",Tt.extend(this,e)},(e=[{key:"destroy",value:function(){this.name=null,this.layerType=null,this.url=null}}])&&_M(t.prototype,e),r&&_M(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function PM(t){"@babel/helpers - typeof";return(PM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function xM(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,TM(n.key),n)}}function TM(t){var e=function(t,e){if("object"!=PM(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=PM(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==PM(e)?e:e+""}var CM=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.title=null,this.picAsUrl=null,this.picAsBase64=null,this.layers=null,this.customItems=null,this.CLASS_NAME="SuperMap.WebPrintingJobLegendOptions",Tt.extend(this,e)},(e=[{key:"destroy",value:function(){this.title=null,this.picAsUrl=null,this.picAsBase64=null,this.layers instanceof EM&&(this.layers.destroy(),this.layers=null),this.customItems instanceof vM&&(this.customItems.destroy(),this.customItems=null)}},{key:"toJSON",value:function(){var t={title:this.title||""};return this.picAsUrl?t.picAsUrl=this.picAsUrl:this.picAsBase64?t.picAsBase64=this.picAsBase64.replace(/^data:.+;base64,/,""):this.customItems&&(t.customItems=this.customItems),Tt.toJSON(t)}}])&&xM(t.prototype,e),r&&xM(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function kM(t){"@babel/helpers - typeof";return(kM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function AM(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,jM(n.key),n)}}function jM(t){var e=function(t,e){if("object"!=kM(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=kM(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==kM(e)?e:e+""}var NM=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.center=null,this.scale=null,this.layerNames=null,this.image=null,this.layers=null,this.CLASS_NAME="SuperMap.WebPrintingJobLittleMapOptions",Tt.extend(this,e)},(e=[{key:"destroy",value:function(){this.center=null,this.scale=null,this.layerNames=null,this.image instanceof SM&&(this.image.destroy(),this.image=null),this.layers instanceof EM&&(this.layers.destroy(),this.layers=null)}},{key:"toJSON",value:function(){var t={scale:this.scale,center:this.center};return this.layerNames?t.layerNames=this.layerNames:this.layers&&(t.layers=this.layers),this.image&&(t.image=this.image),Tt.toJSON(t)}}])&&AM(t.prototype,e),r&&AM(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function IM(t){"@babel/helpers - typeof";return(IM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function MM(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,RM(n.key),n)}}function RM(t){var e=function(t,e){if("object"!=IM(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=IM(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==IM(e)?e:e+""}var LM=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.picAsUrl=null,this.picAsBase64=null,this.CLASS_NAME="SuperMap.WebPrintingJobNorthArrowOptions",Tt.extend(this,e)},(e=[{key:"destroy",value:function(){this.picAsUrl=null,this.picAsBase64=null}},{key:"toJSON",value:function(){var t={};return this.picAsUrl?t.picAsUrl=this.picAsUrl:this.picAsBase64&&(t.picAsBase64=this.picAsBase64.replace(/^data:.+;base64,/,"")),Tt.toJSON(t)}}])&&MM(t.prototype,e),r&&MM(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function DM(t){"@babel/helpers - typeof";return(DM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function BM(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,FM(n.key),n)}}function FM(t){var e=function(t,e){if("object"!=DM(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=DM(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==DM(e)?e:e+""}var UM=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.scaleText=null,this.orientation=null,this.type=null,this.intervals=null,this.unit=null,this.CLASS_NAME="SuperMap.WebPrintingJobScaleBarOptions",Tt.extend(this,e)},(e=[{key:"destroy",value:function(){this.scaleText=null,this.orientation=null,this.type=null,this.intervals=null,this.unit=null}},{key:"toJSON",value:function(){var t={scaleText:this.scaleText||"",type:this.type||"BAR",intervals:this.intervals||"",unit:this.unit||"METER"};return this.orientation&&(t.orientation=this.orientation),Tt.toJSON(t)}}])&&BM(t.prototype,e),r&&BM(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function GM(t){"@babel/helpers - typeof";return(GM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function VM(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,zM(n.key),n)}}function zM(t){var e=function(t,e){if("object"!=GM(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=GM(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==GM(e)?e:e+""}var HM=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.type=null,this.url=null,this.token=null,this.value=null,this.CLASS_NAME="SuperMap.WebPrintingJobContent",Tt.extend(this,e)},(e=[{key:"destroy",value:function(){this.type="WEBMAP",this.url=null,this.token=null,this.value=null}},{key:"toJSON",value:function(){var t={type:this.type};return this.token&&(t.token=this.token),this.url?t.url=this.url:this.value&&(t.value=this.value),Tt.toJSON(t)}}])&&VM(t.prototype,e),r&&VM(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function qM(t){"@babel/helpers - typeof";return(qM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function JM(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,WM(n.key),n)}}function WM(t){var e=function(t,e){if("object"!=qM(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=qM(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==qM(e)?e:e+""}var KM=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.templateName=null,this.title=null,this.subTitle=null,this.author=null,this.copyright=null,this.summaryText=null,this.time=null,this.scaleBarOptions=null,this.northArrowOptions=null,this.littleMapOptions=null,this.legendOptions=null,this.CLASS_NAME="SuperMap.WebPrintingJobLayoutOptions",Tt.extend(this,e)},(e=[{key:"destroy",value:function(){this.templateName=null,this.title=null,this.subTitle=null,this.author=null,this.copyright=null,this.summaryText=null,this.time=null,this.scaleBarOptions instanceof UM&&(this.scaleBarOptions.destroy(),this.scaleBarOptions=null),this.northArrowOptions instanceof LM&&(this.northArrowOptions.destroy(),this.northArrowOptions=null),this.littleMapOptions instanceof NM&&(this.littleMapOptions.destroy(),this.littleMapOptions=null),this.legendOptions instanceof CM&&(this.legendOptions.destroy(),this.legendOptions=null)}}])&&JM(t.prototype,e),r&&JM(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function YM(t){"@babel/helpers - typeof";return(YM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function QM(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,XM(n.key),n)}}function XM(t){var e=function(t,e){if("object"!=YM(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=YM(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==YM(e)?e:e+""}var ZM=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.format=null,this.dpi=96,this.scale=null,this.rotation=null,this.center=null,this.CLASS_NAME="SuperMap.WebPrintingJobExportOptions",Tt.extend(this,e)},(e=[{key:"destroy",value:function(){this.format=null,this.dpi=null,this.scale=null,this.rotation=null,this.center=null,this.outputSize=null}},{key:"toJSON",value:function(){var t={format:this.format||"PDF",dpi:this.dpi,scale:this.scale,center:this.center};return this.rotation&&(t.rotation=this.rotation),this.outputSize&&(t.outputSize=this.outputSize),Tt.toJSON(t)}}])&&QM(t.prototype,e),r&&QM(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function $M(t){"@babel/helpers - typeof";return($M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function tR(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,eR(n.key),n)}}function eR(t){var e=function(t,e){if("object"!=$M(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=$M(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==$M(e)?e:e+""}var rR=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e&&(this.content=null,this.layoutOptions=null,this.exportOptions=null,Tt.extend(this,e),this.CLASS_NAME="SuperMap.WebPrintingJobParameters")},(e=[{key:"destroy",value:function(){this.content instanceof HM&&(this.content.destroy(),this.content=null),this.layoutOptions instanceof KM&&(this.layoutOptions.destroy(),this.layoutOptions=null),this.exportOptions instanceof ZM&&(this.exportOptions.destroy(),this.exportOptions=null)}}])&&tR(t.prototype,e),r&&tR(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function nR(t){"@babel/helpers - typeof";return(nR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function oR(){oR=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),s=new A(n||[]);return o(a,"_invoke",{value:x(t,r,s)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var p="suspendedStart",h="suspendedYield",y="executing",d="completed",v={};function m(){}function b(){}function g(){}var S={};l(S,a,function(){return this});var w=Object.getPrototypeOf,_=w&&w(w(j([])));_&&_!==r&&n.call(_,a)&&(S=_);var O=g.prototype=m.prototype=Object.create(S);function E(t){["next","throw","return"].forEach(function(e){l(t,e,function(t){return this._invoke(e,t)})})}function P(t,e){function r(o,i,a,s){var u=f(t[o],t,i);if("throw"!==u.type){var l=u.arg,c=l.value;return c&&"object"==nR(c)&&n.call(c,"__await")?e.resolve(c.__await).then(function(t){r("next",t,a,s)},function(t){r("throw",t,a,s)}):e.resolve(c).then(function(t){l.value=t,a(l)},function(t){return r("throw",t,a,s)})}s(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e(function(e,o){r(t,n,e,o)})}return i=i?i.then(o,o):o()}})}function x(e,r,n){var o=p;return function(i,a){if(o===y)throw Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var u=T(s,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var l=f(e,r,n);if("normal"===l.type){if(o=n.done?d:h,l.arg===v)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=d,n.method="throw",n.arg=l.arg)}}}function T(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,T(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function A(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function j(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(nR(e)+" is not iterable")}return b.prototype=g,o(O,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=l(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,l(t,u,"GeneratorFunction")),t.prototype=Object.create(O),t},e.awrap=function(t){return{__await:t}},E(P.prototype),l(P.prototype,s,function(){return this}),e.AsyncIterator=P,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new P(c(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next()})},E(O),l(O,u,"Generator"),l(O,a,function(){return this}),l(O,"toString",function(){return"[object Generator]"}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=j,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(k),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),k(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;k(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:j(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function iR(t,e,r,n,o,i,a){try{var s=t[i](a),u=s.value}catch(t){return void r(t)}s.done?e(u):Promise.resolve(u).then(n,o)}function aR(t){return function(){var e=this,r=arguments;return new Promise(function(n,o){var i=t.apply(e,r);function a(t){iR(i,n,o,a,s,"next",t)}function s(t){iR(i,n,o,a,s,"throw",t)}a(void 0)})}}function sR(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,uR(n.key),n)}}function uR(t){var e=function(t,e){if("object"!=nR(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=nR(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==nR(e)?e:e+""}function lR(t,e,r){return e=pR(e),cR(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],pR(t).constructor):e.apply(t,r))}function cR(t,e){if(e&&("object"===nR(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function fR(){return(fR="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=pR(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function pR(t){return(pR=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function hR(t,e){return(hR=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var yR=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=lR(this,e,[t,r]),r&&Tt.extend(n,r),n.templates=[],n.CLASS_NAME="SuperMap.WebPrintingService",n.url?n:cR(n)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&hR(t,e)}(e,Ki),r=e,(n=[{key:"destroy",value:function(){fR(pR(e.prototype),"destroy",this).call(this)}},{key:"createWebPrintingJob",value:function(){var t=aR(oR().mark(function t(e,r){return oR().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,this._processParams(e);case 4:return t.abrupt("return",this.processAsync("jobs","POST",r,e));case 5:case"end":return t.stop()}},t,this)}));return function(e,r){return t.apply(this,arguments)}}()},{key:"getPrintingJob",value:function(t,e){this.rollingProcess(this._processUrl("jobs/".concat(t)),e)}},{key:"getPrintingJobResult",value:function(t,e){return this.processAsync("jobs/".concat(t,"/result"),"GET",e)}},{key:"getLayoutTemplates",value:function(t){return this.processAsync("layouts","GET",t)}},{key:"rollingProcess",value:function(t,e){var r=this;this.id&&clearInterval(this.id),this.id=setInterval(function(){r.request({url:t,method:"GET",scope:r,success:e,failure:e})},1e3)}},{key:"processAsync",value:function(t,e,r,n){var o={url:this._processUrl(t),method:e,scope:this,success:r,failure:r};return n&&(o.data=Tt.toJSON(n)),this.request(o)}},{key:"transformResult",value:function(t,e){return"FINISHED"===(t=Tt.transformResult(t)).status||"ERROR"===t.status?clearInterval(this.id):"RUNNING"===t.status&&(e.success=!1),{result:t,options:e}}},{key:"_processUrl",value:function(t){return t?Tt.urlPathAppend(this.url,t):this.url}},{key:"_processParams",value:function(){var t=aR(oR().mark(function t(e){var r,n,o,i,a,s,u,l,c,f,p,h,y,d,v,m,b;return oR().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.layoutOptions){t.next=2;break}return t.abrupt("return");case 2:if(r=e.layoutOptions,n=r.legendOptions,o=r.templateName,n&&(!e.layoutOptions.legendOptions.title&&(e.layoutOptions.legendOptions.title=""),e.layoutOptions.legendOptions.picAsBase64=e.layoutOptions.legendOptions.picAsBase64&&e.layoutOptions.legendOptions.picAsBase64.replace(/^data:.+;base64,/,""),e.layoutOptions.legendOptions.customItems&&e.layoutOptions.legendOptions.customItems.hasOwnProperty("picAsBase64")&&(e.layoutOptions.legendOptions.customItems.picAsBase64=e.layoutOptions.legendOptions.customItems.picAsBase64.replace(/^data:.+;base64,/,""))),this.templates.length){t.next=9;break}return t.next=7,this.getLayoutTemplates();case 7:i=t.sent,this.templates=i.result;case 9:a=this.templates.find(function(t){return t.templateName===o}),s=a.layoutOptions,u=s.hasCopyright,l=s.hasSubtitle,c=s.hasAuthor,f=s.hasScaleBar,p=s.hasTitle,h=s.hasTime,y=s.hasSummaryText,d=s.hasLittleMap,v=s.hasNorthArrow,m=s.hasLegend,b=e.layoutOptions,p?void 0===b.title&&(e.layoutOptions.title=null):delete e.layoutOptions.title,l?void 0===b.subTitle&&(e.layoutOptions.subTitle=null):delete e.layoutOptions.subTitle,c?void 0===b.author&&(e.layoutOptions.author=null):delete e.layoutOptions.author,u?void 0===b.copyright&&(e.layoutOptions.copyright=null):delete e.layoutOptions.copyright,y&&b.summaryText||delete e.layoutOptions.summaryText,h&&b.time||delete e.layoutOptions.time,d&&b.littleMapOptions||delete e.layoutOptions.littleMapOptions,f&&b.scaleBarOptions||delete e.layoutOptions.scaleBarOptions,v&&b.northArrowOptions||delete e.layoutOptions.northArrowOptions,m&&b.legendOptions||delete e.layoutOptions.legendOptions;case 22:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()}])&&sR(r.prototype,n),o&&sR(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function dR(t){"@babel/helpers - typeof";return(dR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function vR(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,mR(n.key),n)}}function mR(t){var e=function(t,e){if("object"!=dR(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=dR(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==dR(e)?e:e+""}function bR(t,e,r){return e=SR(e),function(t,e){if(e&&("object"===dR(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],SR(t).constructor):e.apply(t,r))}function gR(){return(gR="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=SR(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function SR(t){return(SR=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function wR(t,e){return(wR=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var _R=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=bR(this,e,[t,r])).options=r||{},r&&Tt.extend(n,r),n.CLASS_NAME="SuperMap.ImageCollectionService",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&wR(t,e)}(e,Ki),r=e,(n=[{key:"destroy",value:function(){gR(SR(e.prototype),"destroy",this).call(this)}},{key:"getLegend",value:function(t,e){var r={collectionId:this.options.collectionId};"function"==typeof t&&(e=t,t=null);var n=Tt.convertPath("/collections/{collectionId}/legend",r),o=Tt.urlPathAppend(this.url,n);return this._processAsync({url:o,method:"GET",params:t,callback:e})}},{key:"getStatistics",value:function(t){var e={collectionId:this.options.collectionId},r=Tt.convertPath("/collections/{collectionId}/statistics",e),n=Tt.urlPathAppend(this.url,r);return this._processAsync({url:n,method:"GET",callback:t})}},{key:"getTileInfo",value:function(t){var e={collectionId:this.options.collectionId},r=Tt.convertPath("/collections/{collectionId}/tileInfo",e),n=Tt.urlPathAppend(this.url,r);return this._processAsync({url:n,method:"GET",callback:t})}},{key:"deleteItemByID",value:function(t,e){var r={collectionId:this.options.collectionId,featureId:t},n=Tt.convertPath("/collections/{collectionId}/items/{featureId}",r),o=Tt.urlPathAppend(this.url,n);return this._processAsync({url:o,method:"DELETE",callback:e})}},{key:"getItemByID",value:function(t,e){var r={collectionId:this.options.collectionId,featureId:t},n=Tt.convertPath("/collections/{collectionId}/items/{featureId}",r),o=Tt.urlPathAppend(this.url,n);return this._processAsync({url:o,method:"GET",callback:e})}},{key:"_processAsync",value:function(t){var e=t.url,r=t.method,n=t.callback,o=t.params;return this.request({method:r||"GET",url:e,params:o,scope:this,success:n,failure:n})}}])&&vR(r.prototype,n),o&&vR(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function OR(t){"@babel/helpers - typeof";return(OR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ER(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function PR(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,xR(n.key),n)}}function xR(t){var e=function(t,e){if("object"!=OR(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=OR(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==OR(e)?e:e+""}function TR(t,e,r){return e=kR(e),function(t,e){if(e&&("object"===OR(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],kR(t).constructor):e.apply(t,r))}function CR(){return(CR="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=kR(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function kR(t){return(kR=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function AR(t,e){return(AR=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var jR=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=TR(this,e,[t,r])).options=r||{},r&&Tt.extend(n,r),n.CLASS_NAME="SuperMap.ImageService",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&AR(t,e)}(e,Ki),r=e,(n=[{key:"destroy",value:function(){CR(kR(e.prototype),"destroy",this).call(this)}},{key:"getCollections",value:function(t){var e=Tt.convertPath("/collections"),r=Tt.urlPathAppend(this.url,e);return this._processAsync({url:r,mehtod:"GET",callback:t})}},{key:"getCollectionByID",value:function(t,e){var r={collectionId:t},n=Tt.convertPath("/collections/{collectionId}",r),o=Tt.urlPathAppend(this.url,n);return this._processAsync({url:o,mehtod:"GET",callback:e})}},{key:"search",value:function(t,e){var r=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ER(Object(r),!0).forEach(function(e){var n,o,i;n=t,o=e,i=r[e],(o=xR(o))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ER(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}({},t||{}),n=Tt.convertPath("/search"),o=Tt.urlPathAppend(this.url,n);return this._processAsync({url:o,method:"POST",data:r,callback:e})}},{key:"_processAsync",value:function(t){var e=t.url,r=t.method,n=t.callback,o=t.data;return this.request({method:r||"GET",url:e,data:o,scope:this,success:n,failure:n})}}])&&PR(r.prototype,n),o&&PR(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function NR(t){"@babel/helpers - typeof";return(NR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function IR(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,MR(n.key),n)}}function MR(t){var e=function(t,e){if("object"!=NR(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=NR(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==NR(e)?e:e+""}var RR=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.include=void 0,this.exclude=void 0,this.CLASS_NAME="SuperMap.FieldsFilter",Tt.extend(this,e)}return e=t,n=[{key:"constructFromObject",value:function(e,r){return e&&(r=r||new t,e.hasOwnProperty("include")&&(r.include=e.include),e.hasOwnProperty("exclude")&&(r.exclude=e.exclude)),r}}],(r=[{key:"destroy",value:function(){this.include=void 0,this.exclude=void 0}}])&&IR(e.prototype,r),n&&IR(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,r,n}();function LR(t){"@babel/helpers - typeof";return(LR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function DR(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,BR(n.key),n)}}function BR(t){var e=function(t,e){if("object"!=LR(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=LR(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==LR(e)?e:e+""}var FR=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.field=void 0,this.direction=t.Direction.ASC,this.CLASS_NAME="SuperMap.Sortby",Tt.extend(this,e)}return e=t,n=[{key:"constructFromObject",value:function(e,r){return e&&(r=r||new t,e.hasOwnProperty("field")&&(r.field=e.field),e.hasOwnProperty("direction")&&(r.direction=e.direction)),r}}],(r=[{key:"destroy",value:function(){this.field=void 0,this.direction="ASC"}}])&&DR(e.prototype,r),n&&DR(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,r,n}();function UR(t){"@babel/helpers - typeof";return(UR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function GR(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,VR(n.key),n)}}function VR(t){var e=function(t,e){if("object"!=UR(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=UR(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==UR(e)?e:e+""}FR.Direction={ASC:"ASC",DESC:"DESC"};var zR=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.bbox=void 0,this.collections=void 0,this.ids=void 0,this.limit=void 0,this.fields=void 0,this.query=void 0,this.sortby=void 0,this.CLASS_NAME="SuperMap.ImageSearchParameter",Tt.extend(this,e)}return e=t,n=[{key:"constructFromObject",value:function(e,r){return e&&(r=r||new t,e.hasOwnProperty("bbox")&&(r.bbox=e.bbox),e.hasOwnProperty("collections")&&(r.collections=e.collections),e.hasOwnProperty("ids")&&(r.ids=e.ids),e.hasOwnProperty("limit")&&(r.limit=e.limit),e.hasOwnProperty("fields")&&(r.fields=RR.constructFromObject&&RR.constructFromObject(e.fields,{})||e.fields),e.hasOwnProperty("query")&&(r.query=e.query),e.hasOwnProperty("sortby")&&(r.sortby=e.sortby,e.sortby&&(r.sortby=e.sortby.map(function(t){return FR.constructFromObject&&FR.constructFromObject(t,{})||t})))),r}}],(r=[{key:"destroy",value:function(){var t=this;t.bbox=void 0,t.collections=void 0,t.ids=void 0,t.limit=void 0,t.fields=void 0,t.query=void 0,t.sortby=void 0}}])&&GR(e.prototype,r),n&&GR(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,r,n}();function HR(t){"@babel/helpers - typeof";return(HR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function qR(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,JR(n.key),n)}}function JR(t){var e=function(t,e){if("object"!=HR(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=HR(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==HR(e)?e:e+""}var WR=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.stretchType=void 0,this.stdevCoefficient=void 0,this.gaussianCoefficient=void 0,this.useMedianValue=void 0,this.minPercent=void 0,this.maxPercent=void 0,this.CLASS_NAME="SuperMap.ImageStretchOption",Tt.extend(this,e)}return e=t,n=[{key:"constructFromObject",value:function(e,r){return e&&(r=r||new t,e.hasOwnProperty("stretchType")&&(r.stretchType=e.stretchType),e.hasOwnProperty("stdevCoefficient")&&(r.stdevCoefficient=e.stdevCoefficient),e.hasOwnProperty("gaussianCoefficient")&&(r.gaussianCoefficient=e.gaussianCoefficient),e.hasOwnProperty("useMedianValue")&&(r.useMedianValue=e.useMedianValue),e.hasOwnProperty("minPercent")&&(r.minPercent=e.minPercent),e.hasOwnProperty("maxPercent")&&(r.maxPercent=e.maxPercent)),r}}],(r=[{key:"destroy",value:function(){var t=this;t.stretchType=void 0,t.stdevCoefficient=void 0,t.gaussianCoefficient=void 0,t.useMedianValue=void 0,t.minPercent=void 0,t.maxPercent=void 0}}])&&qR(e.prototype,r),n&&qR(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,r,n}();function KR(t){"@babel/helpers - typeof";return(KR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function YR(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,QR(n.key),n)}}function QR(t){var e=function(t,e){if("object"!=KR(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=KR(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==KR(e)?e:e+""}WR.StretchType={NONE:"NONE",GAUSSIAN:"GAUSSIAN",PERCENTCLIP:"PERCENTCLIP",MINIMUMMAXIMUM:"MINIMUMMAXIMUM",STANDARDDEVIATION:"STANDARDDEVIATION"};var XR=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.displayMode=void 0,this.displayBands=void 0,this.stretchOption=void 0,this.interpolationMode=void 0,this.colorScheme=void 0,this.colorTable=void 0,this.brightness=void 0,this.contrast=void 0,this.noData=void 0,this.noDataColor=void 0,this.noDataTransparent=void 0,this.backgroundValue=void 0,this.backgroundColor=void 0,this.backgroundTransparent=void 0,this.gridFunctions=void 0,this.CLASS_NAME="SuperMap.ImageRenderingRule",Tt.extend(this,e)}return e=t,n=[{key:"constructFromObject",value:function(e,r){return e&&(r=r||new t,e.hasOwnProperty("displayMode")&&(r.displayMode=e.displayMode),e.hasOwnProperty("displayBands")&&(r.displayBands=e.displayBands),e.hasOwnProperty("stretchOption")&&(r.stretchOption=WR.constructFromObject&&WR.constructFromObject(e.stretchOption,{})||e.stretchOption),e.hasOwnProperty("interpolationMode")&&(r.interpolationMode=e.interpolationMode),e.hasOwnProperty("colorScheme")&&(r.colorScheme=e.colorScheme),e.hasOwnProperty("colorTable")&&(r.colorTable=e.colorTable),e.hasOwnProperty("brightness")&&(r.brightness=e.brightness),e.hasOwnProperty("contrast")&&(r.contrast=e.contrast),e.hasOwnProperty("noData")&&(r.noData=e.noData),e.hasOwnProperty("noDataColor")&&(r.noDataColor=e.noDataColor),e.hasOwnProperty("backgroundValue")&&(r.backgroundValue=e.backgroundValue),e.hasOwnProperty("noDataTransparent")&&(r.noDataTransparent=e.noDataTransparent),e.hasOwnProperty("backgroundColor")&&(r.backgroundColor=e.backgroundColor),e.hasOwnProperty("backgroundTransparent")&&(r.backgroundTransparent=e.backgroundTransparent),e.hasOwnProperty("gridFunctions")&&(r.gridFunctions=e.gridFunctions)),r}}],(r=[{key:"destroy",value:function(){var t=this;t.displayMode=void 0,t.displayBands=void 0,t.stretchOption=void 0,t.interpolationMode=void 0,t.colorScheme=void 0,t.colorTable=void 0,t.brightness=void 0,t.contrast=void 0,t.noData=void 0,t.noDataColor=void 0,t.noDataTransparent=void 0,t.backgroundValue=void 0,t.backgroundColor=void 0,t.backgroundTransparent=void 0,t.gridFuncOptions=void 0}}])&&YR(e.prototype,r),n&&YR(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,r,n}();function ZR(t){"@babel/helpers - typeof";return(ZR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function $R(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,tL(n.key),n)}}function tL(t){var e=function(t,e){if("object"!=ZR(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=ZR(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ZR(e)?e:e+""}XR.DisplayMode={COMPOSITE:"COMPOSITE",STRETCHED:"Stretched"},XR.InterpolationMode={NEARESTNEIGHBOR:"NEARESTNEIGHBOR",HIGHQUALITYBILINEAR:"HIGHQUALITYBILINEAR",DEFAULT:"DEFAULT"};var eL=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.girdFuncName="GFHillShade",this.Azimuth=315,this.Altitude=45,this.ZFactor=1,this.CLASS_NAME="SuperMap.ImageGFHillShade",Tt.extend(this,e)}return e=t,n=[{key:"constructFromObject",value:function(e,r){return e&&(r=r||new t,e.hasOwnProperty("girdFuncName")&&(r.girdFuncName=e.girdFuncName),e.hasOwnProperty("Azimuth")&&(r.Azimuth=e.Azimuth),e.hasOwnProperty("Altitude")&&(r.Altitude=e.Altitude),e.hasOwnProperty("ZFactor")&&(r.ZFactor=e.ZFactor)),r}}],(r=[{key:"destroy",value:function(){this.girdFuncName="GFHillShade",this.Azimuth=315,this.Altitude=45,this.ZFactor=1}}])&&$R(e.prototype,r),n&&$R(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,r,n}();function rL(t){"@babel/helpers - typeof";return(rL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function nL(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,oL(n.key),n)}}function oL(t){var e=function(t,e){if("object"!=rL(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=rL(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==rL(e)?e:e+""}var iL=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.girdFuncName="GFAspect",this.Azimuth=void 0,this.CLASS_NAME="SuperMap.ImageGFAspect",Tt.extend(this,e)}return e=t,n=[{key:"constructFromObject",value:function(e,r){return e&&(r=r||new t,e.hasOwnProperty("girdFuncName")&&(r.girdFuncName=e.girdFuncName),e.hasOwnProperty("Azimuth")&&(r.Azimuth=e.Azimuth)),r}}],(r=[{key:"destroy",value:function(){this.girdFuncName="GFAspect",this.Azimuth=void 0}}])&&nL(e.prototype,r),n&&nL(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,r,n}();function aL(t){"@babel/helpers - typeof";return(aL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function sL(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,uL(n.key),n)}}function uL(t){var e=function(t,e){if("object"!=aL(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=aL(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==aL(e)?e:e+""}var lL=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.girdFuncName="GFOrtho",this.CLASS_NAME="SuperMap.ImageGFOrtho",Tt.extend(this,e)}return e=t,n=[{key:"constructFromObject",value:function(e,r){return e&&(r=r||new t,e.hasOwnProperty("girdFuncName")&&(r.girdFuncName=e.girdFuncName)),r}}],(r=[{key:"destroy",value:function(){this.girdFuncName="GFOrtho"}}])&&sL(e.prototype,r),n&&sL(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,r,n}();function cL(t){"@babel/helpers - typeof";return(cL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function fL(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,pL(n.key),n)}}function pL(t){var e=function(t,e){if("object"!=cL(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=cL(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==cL(e)?e:e+""}var hL=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.girdFuncName="GFSlope",this.Altitude=45,this.ZFactor=1,this.CLASS_NAME="SuperMap.ImageGFSlope",Tt.extend(this,e)}return e=t,n=[{key:"constructFromObject",value:function(e,r){return e&&(r=r||new t,e.hasOwnProperty("girdFuncName")&&(r.girdFuncName=e.girdFuncName),e.hasOwnProperty("Altitude")&&(r.Altitude=e.Altitude),e.hasOwnProperty("ZFactor")&&(r.ZFactor=e.ZFactor)),r}}],(r=[{key:"destroy",value:function(){this.girdFuncName="GFSlope",this.Altitude=45,this.ZFactor=1}}])&&fL(e.prototype,r),n&&fL(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,r,n}();function yL(t){"@babel/helpers - typeof";return(yL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function dL(){dL=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),s=new A(n||[]);return o(a,"_invoke",{value:x(t,r,s)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var p="suspendedStart",h="suspendedYield",y="executing",d="completed",v={};function m(){}function b(){}function g(){}var S={};l(S,a,function(){return this});var w=Object.getPrototypeOf,_=w&&w(w(j([])));_&&_!==r&&n.call(_,a)&&(S=_);var O=g.prototype=m.prototype=Object.create(S);function E(t){["next","throw","return"].forEach(function(e){l(t,e,function(t){return this._invoke(e,t)})})}function P(t,e){function r(o,i,a,s){var u=f(t[o],t,i);if("throw"!==u.type){var l=u.arg,c=l.value;return c&&"object"==yL(c)&&n.call(c,"__await")?e.resolve(c.__await).then(function(t){r("next",t,a,s)},function(t){r("throw",t,a,s)}):e.resolve(c).then(function(t){l.value=t,a(l)},function(t){return r("throw",t,a,s)})}s(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e(function(e,o){r(t,n,e,o)})}return i=i?i.then(o,o):o()}})}function x(e,r,n){var o=p;return function(i,a){if(o===y)throw Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var u=T(s,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var l=f(e,r,n);if("normal"===l.type){if(o=n.done?d:h,l.arg===v)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=d,n.method="throw",n.arg=l.arg)}}}function T(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,T(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function A(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function j(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(yL(e)+" is not iterable")}return b.prototype=g,o(O,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=l(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,l(t,u,"GeneratorFunction")),t.prototype=Object.create(O),t},e.awrap=function(t){return{__await:t}},E(P.prototype),l(P.prototype,s,function(){return this}),e.AsyncIterator=P,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new P(c(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next()})},E(O),l(O,u,"Generator"),l(O,a,function(){return this}),l(O,"toString",function(){return"[object Generator]"}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=j,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(k),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),k(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;k(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:j(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function vL(t){return function(t){if(Array.isArray(t))return mL(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return mL(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return mL(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function mL(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function bL(t,e,r,n,o,i,a){try{var s=t[i](a),u=s.value}catch(t){return void r(t)}s.done?e(u):Promise.resolve(u).then(n,o)}function gL(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,SL(n.key),n)}}function SL(t){var e=function(t,e){if("object"!=yL(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=yL(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==yL(e)?e:e+""}function wL(t,e,r){return e=OL(e),function(t,e){if(e&&("object"===yL(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],OL(t).constructor):e.apply(t,r))}function _L(){return(_L="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=OL(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function OL(t){return(OL=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function EL(t,e){return(EL=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var PL=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=wL(this,e,[t,r])).options=r||{},n.CLASS_NAME="SuperMap.KnowledgeGraphService",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&EL(t,e)}(e,Ki),r=e,(n=[{key:"destroy",value:function(){_L(OL(e.prototype),"destroy",this).call(this)}},{key:"findShortestPath",value:function(t,e){var r=this.url+"/shortestPath.json?startID=".concat(t.startID,"&endID=").concat(t.endID);this.processAsync({url:r,method:"GET",callback:e})}},{key:"query",value:function(t,e){var r=Tt.urlAppend(this.url+"/query.json","".concat("cypherQuery","=").concat(encodeURI(t)));this.processAsync({url:r,method:"GET",callback:e})}},{key:"getGraphMaps",value:function(t){var e=this.url+"/graphmaps.json";this.processAsync({url:e,method:"GET",callback:t})}},{key:"getGraphMap",value:function(t,e){var r=this.url+"/graphmaps/".concat(t,".json");this.processAsync({url:r,method:"GET",callback:e})}},{key:"getGraphMapData",value:function(){var t,e=(t=dL().mark(function t(e){var r,n,o,i,a,s,u,l,c;return dL().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=[],t.next=3,this._getGraphMapData(e);case 3:if(n=t.sent){t.next=6;break}return t.abrupt("return");case 6:o=n.dataContent.queries&&n.dataContent.queries.query||[],i=[],i="string"==typeof o?[o]:o,(a=this._getGraphMapExpandQuery(n)).length&&(s=i).push.apply(s,vL(a)),u=0;case 12:if(!(u<i.length)){t.next=21;break}return l=i[u],t.next=16,this._queryDataBySql(l);case 16:c=t.sent,r=r.concat([],c);case 18:u++,t.next=12;break;case 21:return t.abrupt("return",{data:r,graphMap:n});case 22:case"end":return t.stop()}},t,this)}),function(){var e=this,r=arguments;return new Promise(function(n,o){var i=t.apply(e,r);function a(t){bL(i,n,o,a,s,"next",t)}function s(t){bL(i,n,o,a,s,"throw",t)}a(void 0)})});return function(t){return e.apply(this,arguments)}}()},{key:"_getGraphMapExpandQuery",value:function(t){var e=[];return(t.dataContent.expand&&JSON.parse(t.dataContent.expand)||[]).forEach(function(t){e.push("match p=(n)-[]-(m) where id(n)=".concat(t," return p;"))}),e}},{key:"processAsync",value:function(t){var e=t.url,r=t.params,n=t.method,o=t.callback,i={method:n,url:e,scope:this,success:o,failure:o};return r&&(i.params=r),this.request(i)}},{key:"_getGraphMapData",value:function(t){var e=this;return new Promise(function(r,n){e.getGraphMap(t,function(t){"processFailed"===t.type?n(t.error):""===t.result.data?n("无数据"):r(t.result.graphMap)})})}},{key:"_queryDataBySql",value:function(t){var e=this;return new Promise(function(r,n){e.query(t,function(t){"processFailed"===t.type?n(t.error):r(t.result)})})}}])&&gL(r.prototype,n),o&&gL(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function xL(t){"@babel/helpers - typeof";return(xL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function TL(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,CL(n.key),n)}}function CL(t){var e=function(t,e){if("object"!=xL(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=xL(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==xL(e)?e:e+""}var kL=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=null,this.name=null,this.geometry=null,this.address=null,this.attributes={},this.videoParameters=null,this.cameraLocation=null,Tt.extend(this,e),this.CLASS_NAME="SuperMap.VideoFeature"},(e=[{key:"destroy",value:function(){this.geometry&&this.geometry.destroy&&this.geometry.destroy(),this.geometry=null,this.name=null,this.videoParameters=null,this.cameraLocation=null,this.address=null,this.attributes=null}},{key:"toGeoJSONFeature",value:function(t){return{type:"Feature",geometry:t?t(this.geometry):this.geometry,properties:this.attributes,name:this.name,address:this.address,id:this.id}}},{key:"toServerFeature",value:function(t){var e=t.geometryFunction,r={type:"VideoFeature",geometry:e&&this.geometry?e(this.geometry):this.geometry,name:this.name,address:this.address,id:this.id},n=[],o=[];for(var i in this.attributes)n.push(i),o.push(this.attributes[i]);return r.fieldNames=n,r.fieldValues=o,r}}])&&TL(t.prototype,e),r&&TL(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function AL(t){"@babel/helpers - typeof";return(AL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function jL(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,NL(n.key),n)}}function NL(t){var e=function(t,e){if("object"!=AL(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=AL(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==AL(e)?e:e+""}var IL=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},Tt.extend(this,e),this.CLASS_NAME="SuperMap.OnlineServiceBase"},(e=[{key:"request",value:function(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return e=yo.appendCredential(e),n.crossOrigin=this.options.crossOrigin,n.headers=this.options.headers,co.commit(t,e,r,n).then(function(t){return t.json()})}}])&&jL(t.prototype,e),r&&jL(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function ML(t){"@babel/helpers - typeof";return(ML="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function RL(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,LL(n.key),n)}}function LL(t){var e=function(t,e){if("object"!=ML(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=ML(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ML(e)?e:e+""}function DL(t,e,r){return e=BL(e),function(t,e){if(e&&("object"===ML(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],BL(t).constructor):e.apply(t,r))}function BL(t){return(BL=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function FL(t,e){return(FL=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var UL=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=DL(this,e,[t]),r=r||{},n.MD5=null,n.type=null,n.userName=null,n.fileName=null,n.size=null,n.serviceStatus=null,n.serviceId=null,n.id=null,n.lastModfiedTime=null,n.status=null,n.storageId=null,n.publishInfo=null,n.authorizeSetting=null,n.nickname=null,n.tags=[],n.description=null,n.dataItemServices=null,n.coordType=null,n.dataCheckResult=null,n.dataMetaInfo=null,n.thumbnail=null,Tt.extend(n,r),n.id&&(n.serviceUrl=t+"/"+n.id),n.CLASS_NAME="SuperMap.OnlineData",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&FL(t,e)}(e,IL),r=e,(n=[{key:"load",value:function(){if(this.serviceUrl){var t=this;return t.request("GET",this.serviceUrl).then(function(e){Tt.extend(t,e)})}}},{key:"getPublishedServices",value:function(){return this.dataItemServices}},{key:"getAuthorizeSetting",value:function(){return this.authorizeSetting}}])&&RL(r.prototype,n),o&&RL(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function GL(t){"@babel/helpers - typeof";return(GL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function VL(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,zL(n.key),n)}}function zL(t){var e=function(t,e){if("object"!=GL(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=GL(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==GL(e)?e:e+""}var HL=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.rootUrl="https://www.supermapol.com",this.webUrl=this.rootUrl+"/web";var e=this.webUrl+"/mycontent";this.mDatasUrl=e+"/datas",this.CLASS_NAME="SuperMap.Online"},(e=[{key:"load",value:function(){return co.get(this.rootUrl).then(function(t){return t})}},{key:"login",value:function(){yo.loginOnline(this.rootUrl,!0)}},{key:"queryDatas",value:function(t){var e=this,r=e.mDatasUrl;return t&&(t=t.toJSON()),co.get(r,t).then(function(t){if(t&&t.content&&!(t.content.length<1)){for(var r=[],n=t.content,o=n.length,i=0;i<o;i++){var a=n[i],s=new UL(e.mDatasUrl,a);r.push(s)}return r}})}}])&&VL(t.prototype,e),r&&VL(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function qL(t){"@babel/helpers - typeof";return(qL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function JL(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,WL(n.key),n)}}function WL(t){var e=function(t,e){if("object"!=qL(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=qL(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==qL(e)?e:e+""}var KL=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},this.userNames=null,this.types=null,this.fileName=null,this.serviceStatuses=null,this.serviceId=null,this.ids=null,this.keywords=null,this.orderBy=null,this.tags=null,this.filterFields=null,Tt.extend(this,e),this.CLASS_NAME="SuperMap.OnlineQueryDatasParameter"},(e=[{key:"toJSON",value:function(){var t=this,e={types:t.types,fileName:t.fileName,serviceStatuses:t.serviceStatuses,serviceId:t.serviceId,ids:t.ids,keywords:t.keywords,orderBy:t.orderBy,tags:t.tags,filterFields:t.filterFields};for(var r in e)null==e[r]&&delete e[r];return e}}])&&JL(t.prototype,e),r&&JL(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function YL(t){"@babel/helpers - typeof";return(YL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function QL(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,XL(n.key),n)}}function XL(t){var e=function(t,e){if("object"!=YL(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=YL(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==YL(e)?e:e+""}var ZL=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.name=null,this.serviceIds=null,this.clientType=I.SERVER,this.limitation=null,Tt.extend(this,e),this.CLASS_NAME="SuperMap.KeyServiceParameter"},(e=[{key:"toJSON",value:function(){return{name:this.name,serviceIds:this.serviceIds,clientType:this.clientType,limitation:this.limitation}}}])&&QL(t.prototype,e),r&&QL(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function $L(t){"@babel/helpers - typeof";return($L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function tD(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,eD(n.key),n)}}function eD(t){var e=function(t,e){if("object"!=$L(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=$L(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==$L(e)?e:e+""}var rD=function(t,e,r){return e&&tD(t.prototype,e),r&&tD(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.type=e,this.server=null,this.tokenServiceUrl=null,this.keyServiceUrl=null,Tt.extend(this,r),this.CLASS_NAME="SuperMap.ServerInfo",this.type=this.type||i.ISERVER,this.server||console.error("server url require is not  undefined");var n="/services/security/tokens";this.type===i.ISERVER&&this.server.indexOf("iserver")<0&&(n="/iserver"+n),this.tokenServiceUrl||(this.tokenServiceUrl=Tt.urlPathAppend(this.server,n)),this.keyServiceUrl||(this.type===i.IPORTAL?this.keyServiceUrl=Tt.urlPathAppend(this.server,"/web/mycontent/keys/register"):this.type===i.ONLINE&&(this.keyServiceUrl=Tt.urlPathAppend(this.server,"/web/mycontent/keys")))});function nD(t){"@babel/helpers - typeof";return(nD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function oD(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,iD(n.key),n)}}function iD(t){var e=function(t,e){if("object"!=nD(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=nD(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==nD(e)?e:e+""}var aD=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.userName=null,this.password=null,this.clientType=I.NONE,this.ip=null,this.referer=null,this.expiration=60,Tt.extend(this,e),this.CLASS_NAME="SuperMap.TokenServiceParameter"},(e=[{key:"toJSON",value:function(){return{userName:this.userName,password:this.password,clientType:this.clientType,ip:this.ip,referer:this.referer,expiration:this.expiration}}}])&&oD(t.prototype,e),r&&oD(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function sD(t){return function(t){if(Array.isArray(t))return uD(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return uD(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return uD(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function uD(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function lD(t){"@babel/helpers - typeof";return(lD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function cD(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,fD(n.key),n)}}function fD(t){var e=function(t,e){if("object"!=lD(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=lD(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==lD(e)?e:e+""}var pD=function(){return t=function t(e,r,n){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),!r||"function"!=typeof r&&"object"!==lD(r)||"function"!=typeof r.Client)throw Error("Please enter the global variable of @elastic/elasticsearch@5.6.22 or elasticsearch@16.7.3 for the second parameter!");n=n||{},this.url=e;try{this.client=new r.Client({host:this.url})}catch(t){this.client=new r.Client({node:{url:new URL(this.url)}})}this.change=null,this.openGeoFence=!1,this.outOfGeoFence=null,this.geoFence=null,this.EVENT_TYPES=["change","error","outOfGeoFence"],this.events=new wr(this,null,this.EVENT_TYPES),this.eventListeners=null,Tt.extend(this,n),this.eventListeners instanceof Object&&this.events.on(this.eventListeners)},(e=[{key:"setGeoFence",value:function(t){this.geoFence=t}},{key:"bulk",value:function(t,e){return this.client.bulk(t,this._handleCallback(e))}},{key:"clearScroll",value:function(t,e){return this.client.clearScroll(t,this._handleCallback(e))}},{key:"count",value:function(t,e){return this.client.count(t,this._handleCallback(e))}},{key:"create",value:function(t,e){return this.client.create(t,this._handleCallback(e))}},{key:"delete",value:function(t,e){return this.client.delete(t,this._handleCallback(e))}},{key:"deleteByQuery",value:function(t,e){return this.client.deleteByQuery(t,this._handleCallback(e))}},{key:"deleteScript",value:function(t,e){return this.client.deleteScript(t,this._handleCallback(e))}},{key:"deleteTemplate",value:function(t,e){return this.client.deleteTemplate(t,this._handleCallback(e))}},{key:"exists",value:function(t,e){return this.client.exists(t,this._handleCallback(e))}},{key:"existsSource",value:function(t,e){return this.client.existsSource(t,this._handleCallback(e))}},{key:"explain",value:function(t,e){return this.client.explain(t,this._handleCallback(e))}},{key:"fieldCaps",value:function(t,e){return this.client.fieldCaps(t,this._handleCallback(e))}},{key:"get",value:function(t,e){return this.client.get(t,this._handleCallback(e))}},{key:"getScript",value:function(t,e){return this.client.getScript(t,this._handleCallback(e))}},{key:"getSource",value:function(t,e){return this.client.getSource(t,this._handleCallback(e))}},{key:"getTemplate",value:function(t,e){return this.client.getTemplate(t,this._handleCallback(e))}},{key:"index",value:function(t,e){return this.client.index(t,this._handleCallback(e))}},{key:"info",value:function(t,e){return this.client.info(t,this._handleCallback(e))}},{key:"mget",value:function(t,e){return this.client.mget(t,this._handleCallback(e))}},{key:"msearch",value:function(t,e){var r=this;return r.client.msearch(t).then(function(t){return t=t.body||t,r._update(t.responses,e),t},function(t){return e(t),r.events.triggerEvent("error",{error:t}),t})}},{key:"msearchTemplate",value:function(t,e){return this.client.msearchTemplate(t,this._handleCallback(e))}},{key:"mtermvectors",value:function(t,e){return this.client.mtermvectors(t,this._handleCallback(e))}},{key:"ping",value:function(t,e){return this.client.ping(t,this._handleCallback(e))}},{key:"putScript",value:function(t,e){return this.client.putScript(t,this._handleCallback(e))}},{key:"putTemplate",value:function(t,e){return this.client.putTemplate(t,this._handleCallback(e))}},{key:"reindex",value:function(t,e){return this.client.reindex(t,this._handleCallback(e))}},{key:"reindexRessrottle",value:function(t,e){return this.client.reindexRessrottle(t,this._handleCallback(e))}},{key:"renderSearchTemplate",value:function(t,e){return this.client.renderSearchTemplate(t,this._handleCallback(e))}},{key:"scroll",value:function(t,e){return this.client.scroll(t,this._handleCallback(e))}},{key:"search",value:function(t,e){var r=this;return r.client.search(t).then(function(t){return t=t.body||t,r._update(t,e),t},function(t){return e&&e(t),r.events.triggerEvent("error",{error:t}),t})}},{key:"searchShards",value:function(t,e){return this.client.searchShards(t,this._handleCallback(e))}},{key:"searchTemplate",value:function(t,e){return this.client.searchTemplate(t,this._handleCallback(e))}},{key:"suggest",value:function(t,e){return this.client.suggest(t,this._handleCallback(e))}},{key:"termvectors",value:function(t,e){return this.client.termvectors(t,this._handleCallback(e))}},{key:"update",value:function(t,e){return this.client.update(t,this._handleCallback(e))}},{key:"updateByQuery",value:function(t,e){return this.client.updateByQuery(t,this._handleCallback(e))}},{key:"_handleCallback",value:function(t){return function(){var e=Array.from(arguments),r=e.shift(),n=e.shift(),o=n&&n.body;if(o){var i=n;e=[i.statusCode,i.headers],n=o}t.call.apply(t,[this,r,n].concat(sD(e)))}}},{key:"_update",value:function(t,e){var r=this;t&&(r.data=t,r.openGeoFence&&r.geoFence&&r._validateDatas(t),r.events.triggerEvent("change",{data:r.data}),r.change?r.change&&r.change(t):e&&e(void 0,{responses:t}))}},{key:"_validateDatas",value:function(t){if(t){t instanceof Array||(t=[t]);var e,r=t.length;for(e=0;e<r;e++)this._validateData(t[e])}}},{key:"_validateData",value:function(t){var e=this;t.hits.hits.map(function(r){var n=r._source,o=e._getMeterPerMapUnit(e.geoFence.unit),i=e.geoFence.center[0]*o,a=e.geoFence.center[1]*o,s=n.x*o,u=n.y*o;return e._distance(s,u,i,a)>e.geoFence.radius&&(e.outOfGeoFence&&e.outOfGeoFence(t),e.events.triggerEvent("outOfGeoFence",{data:t})),r})}},{key:"_distance",value:function(t,e,r,n){return Math.sqrt((t-r)*(t-r)+(e-n)*(e-n))}},{key:"_getMeterPerMapUnit",value:function(t){var e;return"meter"===t?e=1:"degree"===t&&(e=2*Math.PI*6378137/360),e}}])&&cD(t.prototype,e),r&&cD(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function hD(t){"@babel/helpers - typeof";return(hD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function yD(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,dD(n.key),n)}}function dD(t){var e=function(t,e){if("object"!=hD(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=hD(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==hD(e)?e:e+""}var vD=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.BUILTIN_OBJECT={"[object Function]":1,"[object RegExp]":1,"[object Date]":1,"[object Error]":1,"[object CanvasGradient]":1},this._ctx=null,this._canvas=null,this._pixelCtx=null,this._width=null,this._height=null,this._offsetX=0,this._offsetY=0,this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Util"},(e=[{key:"clone",value:function(t){var e=this.BUILTIN_OBJECT;if("object"==hD(t)&&null!==t){var r=t;if(t instanceof Array){r=[];for(var n=0,o=t.length;n<o;n++)r[n]=this.clone(t[n])}else if(!e[Object.prototype.toString.call(t)])for(var i in r={},t)t.hasOwnProperty(i)&&(r[i]=this.clone(t[i]));return r}return t}},{key:"mergeItem",value:function(t,e,r,n){var o=this.BUILTIN_OBJECT;e.hasOwnProperty(r)&&("object"!=hD(t[r])||o[Object.prototype.toString.call(t[r])]?!n&&r in t||(t[r]=e[r]):this.merge(t[r],e[r],n))}},{key:"merge",value:function(t,e,r){for(var n in e)this.mergeItem(t,e,n,r);return t}},{key:"getContext",value:function(){return this._ctx||(this._ctx=document.createElement("canvas").getContext("2d")),this._ctx}},{key:"getPixelContext",value:function(){return this._pixelCtx||(this._canvas=document.createElement("canvas"),this._width=this._canvas.width,this._height=this._canvas.height,this._pixelCtx=this._canvas.getContext("2d")),this._pixelCtx}},{key:"adjustCanvasSize",value:function(t,e){var r,n=this._canvas,o=this._pixelCtx,i=this._width,a=this._height,s=this._offsetX,u=this._offsetY;t+s>i&&(i=t+s+100,n.width=i,r=!0),e+u>a&&(a=e+u+100,n.height=a,r=!0),t<-s&&(i+=s=100*Math.ceil(-t/100),n.width=i,r=!0),e<-u&&(a+=u=100*Math.ceil(-e/100),n.height=a,r=!0),r&&o.translate(s,u)}},{key:"getPixelOffset",value:function(){return{x:this._offsetX,y:this._offsetY}}},{key:"indexOf",value:function(t,e){if(t.indexOf)return t.indexOf(e);for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}},{key:"inherits",value:function(t,e){var r=t.prototype;function n(){}for(var o in n.prototype=e.prototype,t.prototype=new n,r)t.prototype[o]=r[o];t.constructor=t}}])&&yD(t.prototype,e),r&&yD(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function mD(t){"@babel/helpers - typeof";return(mD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function bD(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,gD(n.key),n)}}function gD(t){var e=function(t,e){if("object"!=mD(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=mD(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==mD(e)?e:e+""}var SD=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.util=new vD,this._ctx=null,this.palette=["#ff9277"," #dddd00"," #ffc877"," #bbe3ff"," #d5ffbb","#bbbbff"," #ddb000"," #b0dd00"," #e2bbff"," #ffbbe3","#ff7777"," #ff9900"," #83dd00"," #77e3ff"," #778fff","#c877ff"," #ff77ab"," #ff6600"," #aa8800"," #77c7ff","#ad77ff"," #ff77ff"," #dd0083"," #777700"," #00aa00","#0088aa"," #8400dd"," #aa0088"," #dd0000"," #772e00"],this._palette=this.palette,this.highlightColor="rgba(0,0,255,1)",this._highlightColor=this.highlightColor,this.colorRegExp=/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i,this._nameColors={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#0ff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000",blanchedalmond:"#ffebcd",blue:"#00f",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#0ff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgrey:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#f0f",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#789",lightslategrey:"#789",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#0f0",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#f0f",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#f00",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#fff",whitesmoke:"#f5f5f5",yellow:"#ff0",yellowgreen:"#9acd32"},this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Color"}return e=t,(r=[{key:"customPalette",value:function(t){this.palette=t}},{key:"resetPalette",value:function(){this.palette=this._palette}},{key:"getColor",value:function(t,e){return t|=0,(e=e||this.palette)[t%e.length]}},{key:"customHighlight",value:function(t){this.highlightColor=t}},{key:"resetHighlight",value:function(){this.highlightColor=this._highlightColor}},{key:"getHighlightColor",value:function(){return this.highlightColor}},{key:"getRadialGradient",value:function(t,e,r,n,o,i,a){var s=this.util;this._ctx||(this._ctx=s.getContext());for(var u=this._ctx.createRadialGradient(t,e,r,n,o,i),l=0,c=a.length;l<c;l++)u.addColorStop(a[l][0],a[l][1]);return u.__nonRecursion=!0,u}},{key:"getLinearGradient",value:function(t,e,r,n,o){var i=this.util;this._ctx||(this._ctx=i.getContext());for(var a=this._ctx.createLinearGradient(t,e,r,n),s=0,u=o.length;s<u;s++)a.addColorStop(o[s][0],o[s][1]);return a.__nonRecursion=!0,a}},{key:"getStepColors",value:function(t,e,r){t=this.toRGBA(t),e=this.toRGBA(e),t=this.getData(t);for(var n=[],o=((e=this.getData(e))[0]-t[0])/r,i=(e[1]-t[1])/r,a=(e[2]-t[2])/r,s=(e[3]-t[3])/r,u=0,l=t[0],c=t[1],f=t[2],p=t[3];u<r;u++)n[u]=this.toColor([this.adjust(Math.floor(l),[0,255]),this.adjust(Math.floor(c),[0,255]),this.adjust(Math.floor(f),[0,255]),p.toFixed(4)-0],"rgba"),l+=o,c+=i,f+=a,p+=s;return l=e[0],c=e[1],f=e[2],p=e[3],n[u]=this.toColor([l,c,f,p],"rgba"),n}},{key:"getGradientColors",value:function(t,e){var r=[],n=t.length;if(void 0===e&&(e=20),1===n)r=this.getStepColors(t[0],t[0],e);else if(n>1)for(var o=0,i=n-1;o<i;o++){var a=this.getStepColors(t[o],t[o+1],e);o<i-1&&a.pop(),r=r.concat(a)}return r}},{key:"toColor",value:function(t,e){if(e=e||"rgb",t&&(3===t.length||4===t.length)){if(t=this.map(t,function(t){return t>1?Math.ceil(t):t}),e.indexOf("hex")>-1)return"#"+((1<<24)+(t[0]<<16)+(t[1]<<8)+ +t[2]).toString(16).slice(1);if(e.indexOf("hs")>-1){var r=this.map(t.slice(1,3),function(t){return t+"%"});t[1]=r[0],t[2]=r[1]}return e.indexOf("a")>-1?(3===t.length&&t.push(1),t[3]=this.adjust(t[3],[0,1]),e+"("+t.slice(0,4).join(",")+")"):e+"("+t.slice(0,3).join(",")+")"}}},{key:"toArray",value:function(t){(t=this.trim(t)).indexOf("rgba")<0&&(t=this.toRGBA(t));var e=[],r=0;return t.replace(/[\d.]+/g,function(t){r<3?t|=0:t=+t,e[r++]=t}),e}},{key:"convert",value:function(t,e){if(!this.isCalculableColor(t))return t;var r=this.getData(t),n=r[3];return void 0===n&&(n=1),t.indexOf("hsb")>-1?r=this._HSV_2_RGB(r):t.indexOf("hsl")>-1&&(r=this._HSL_2_RGB(r)),e.indexOf("hsb")>-1||e.indexOf("hsv")>-1?r=this._RGB_2_HSB(r):e.indexOf("hsl")>-1&&(r=this._RGB_2_HSL(r)),r[3]=n,this.toColor(r,e)}},{key:"toRGBA",value:function(t){return this.convert(t,"rgba")}},{key:"toRGB",value:function(t){return this.convert(t,"rgb")}},{key:"toHex",value:function(t){return this.convert(t,"hex")}},{key:"toHSVA",value:function(t){return this.convert(t,"hsva")}},{key:"toHSV",value:function(t){return this.convert(t,"hsv")}},{key:"toHSBA",value:function(t){return this.convert(t,"hsba")}},{key:"toHSB",value:function(t){return this.convert(t,"hsb")}},{key:"toHSLA",value:function(t){return this.convert(t,"hsla")}},{key:"toHSL",value:function(t){return this.convert(t,"hsl")}},{key:"toName",value:function(t){for(var e in this._nameColors)if(this.toHex(this._nameColors[e])===this.toHex(t))return e;return null}},{key:"trim",value:function(t){return String(t).replace(/\s+/g,"")}},{key:"normalize",value:function(t){if(this._nameColors[t]&&(t=this._nameColors[t]),t=(t=this.trim(t)).replace(/hsv/i,"hsb"),/^#[\da-f]{3}$/i.test(t)){var e=(3840&(t=parseInt(t.slice(1),16)))<<8,r=(240&t)<<4,n=15&t;t="#"+((1<<24)+(e<<4)+e+(r<<4)+r+(n<<4)+n).toString(16).slice(1)}return t}},{key:"lift",value:function(t,e){if(!this.isCalculableColor(t))return t;var r=e>0?1:-1;void 0===e&&(e=0),e=Math.abs(e)>1?1:Math.abs(e),t=this.toRGB(t);for(var n=this.getData(t),o=0;o<3;o++)n[o]=1===r?n[o]*(1-e)|0:(255-n[o])*e+n[o]|0;return"rgb("+n.join(",")+")"}},{key:"reverse",value:function(t){if(!this.isCalculableColor(t))return t;var e=this.getData(this.toRGBA(t));return e=this.map(e,function(t){return 255-t}),this.toColor(e,"rgb")}},{key:"mix",value:function(t,e,r){if(!this.isCalculableColor(t)||!this.isCalculableColor(e))return t;void 0===r&&(r=.5);for(var n=2*(r=1-this.adjust(r,[0,1]))-1,o=this.getData(this.toRGBA(t)),i=this.getData(this.toRGBA(e)),a=o[3]-i[3],s=((n*a==-1?n:(n+a)/(1+n*a))+1)/2,u=1-s,l=[],c=0;c<3;c++)l[c]=o[c]*s+i[c]*u;var f=o[3]*r+i[3]*(1-r);return f=Math.max(0,Math.min(1,f)),1===o[3]&&1===i[3]?this.toColor(l,"rgb"):(l[3]=f,this.toColor(l,"rgba"))}},{key:"random",value:function(){return"#"+Math.random().toString(16).slice(2,8)}},{key:"getData",value:function(e){var r,n,o=(e=this.normalize(e)).match(this.colorRegExp);if(null===o)throw new Error("The color format error");var i,a=[];if(o[2])i=[(r=o[2].replace("#","").split(""))[0]+r[1],r[2]+r[3],r[4]+r[5]],a=this.map(i,function(e){return t.prototype.adjust.call(this,parseInt(e,16),[0,255])});else if(o[4]){var s=o[4].split(",");n=s[3],i=s.slice(0,3),a=this.map(i,function(e){return e=Math.floor(e.indexOf("%")>0?2.55*parseInt(e,0):e),t.prototype.adjust.call(this,e,[0,255])}),void 0!==n&&a.push(this.adjust(parseFloat(n),[0,1]))}else if(o[5]||o[6]){var u=(o[5]||o[6]).split(","),l=parseInt(u[0],0)/360,c=u[1],f=u[2];n=u[3],(a=this.map([c,f],function(e){return t.prototype.adjust.call(this,parseFloat(e)/100,[0,1])})).unshift(l),void 0!==n&&a.push(this.adjust(parseFloat(n),[0,1]))}return a}},{key:"alpha",value:function(t,e){if(!this.isCalculableColor(t))return t;null===e&&(e=1);var r=this.getData(this.toRGBA(t));return r[3]=this.adjust(Number(e).toFixed(4),[0,1]),this.toColor(r,"rgba")}},{key:"map",value:function(t,e){if("function"!=typeof e)throw new TypeError;for(var r=t?t.length:0,n=0;n<r;n++)t[n]=e(t[n]);return t}},{key:"adjust",value:function(t,e){return t<=e[0]?t=e[0]:t>=e[1]&&(t=e[1]),t}},{key:"isCalculableColor",value:function(t){return t instanceof Array||"string"==typeof t}},{key:"_HSV_2_RGB",value:function(t){var e,r,n,o=t[0],i=t[1],a=t[2];if(0===i)e=255*a,r=255*a,n=255*a;else{var s=6*o;6===s&&(s=0);var u=0|s,l=a*(1-i),c=a*(1-i*(s-u)),f=a*(1-i*(1-(s-u))),p=0,h=0,y=0;0===u?(p=a,h=f,y=l):1===u?(p=c,h=a,y=l):2===u?(p=l,h=a,y=f):3===u?(p=l,h=c,y=a):4===u?(p=f,h=l,y=a):(p=a,h=l,y=c),e=255*p,r=255*h,n=255*y}return[e,r,n]}},{key:"_HSL_2_RGB",value:function(t){var e,r,n,o=t[0],i=t[1],a=t[2];if(0===i)e=255*a,r=255*a,n=255*a;else{var s,u=2*a-(s=a<.5?a*(1+i):a+i-i*a);e=255*this._HUE_2_RGB(u,s,o+1/3),r=255*this._HUE_2_RGB(u,s,o),n=255*this._HUE_2_RGB(u,s,o-1/3)}return[e,r,n]}},{key:"_HUE_2_RGB",value:function(t,e,r){return r<0&&(r+=1),r>1&&(r-=1),6*r<1?t+6*(e-t)*r:2*r<1?e:3*r<2?t+(e-t)*(2/3-r)*6:t}},{key:"_RGB_2_HSB",value:function(t){var e,r,n=t[0]/255,o=t[1]/255,i=t[2]/255,a=Math.min(n,o,i),s=Math.max(n,o,i),u=s-a,l=s;if(0===u)e=0,r=0;else{r=u/s;var c=((s-n)/6+u/2)/u,f=((s-o)/6+u/2)/u,p=((s-i)/6+u/2)/u;n===s?e=p-f:o===s?e=1/3+c-p:i===s&&(e=2/3+f-c),e<0&&(e+=1),e>1&&(e-=1)}return[e*=360,r*=100,l*=100]}},{key:"_RGB_2_HSL",value:function(t){var e,r,n=t[0]/255,o=t[1]/255,i=t[2]/255,a=Math.min(n,o,i),s=Math.max(n,o,i),u=s-a,l=(s+a)/2;if(0===u)e=0,r=0;else{r=l<.5?u/(s+a):u/(2-s-a);var c=((s-n)/6+u/2)/u,f=((s-o)/6+u/2)/u,p=((s-i)/6+u/2)/u;n===s?e=p-f:o===s?e=1/3+c-p:i===s&&(e=2/3+f-c),e<0&&(e+=1),e>1&&(e-=1)}return[e*=360,r*=100,l*=100]}}])&&bD(e.prototype,r),n&&bD(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,r,n}();function wD(t){"@babel/helpers - typeof";return(wD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _D(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,OD(n.key),n)}}function OD(t){var e=function(t,e){if("object"!=wD(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=wD(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==wD(e)?e:e+""}var ED=new SD,PD=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)},r=[{key:"createCanvas",value:function(t,e){var r=document.createElement("canvas");return r.height=t,r.width=e,r.getContext("2d")}},{key:"getLinearGradient",value:function(t,e,r,n,o){this._ctx||(this._ctx=this.getContext());for(var i=this._ctx.createLinearGradient(t,e,r,n),a=o.length,s=1/(a-1),u=0,l=0;l<a;l++)i.addColorStop(u,o[l]),u+=s;return i.__nonRecursion=!0,i}},{key:"getContext",value:function(){return this._ctx||(this._ctx=document.createElement("canvas").getContext("2d")),this._ctx}},{key:"getStepColors",value:function(t,e,r){t=ED.toRGBA(t),e=ED.toRGBA(e),t=ED.getData(t);for(var n=[],o=((e=ED.getData(e))[0]-t[0])/r,i=(e[1]-t[1])/r,a=(e[2]-t[2])/r,s=(e[3]-t[3])/r,u=0,l=t[0],c=t[1],f=t[2],p=t[3];u<r;u++)n[u]=ED.toColor([ED.adjust(Math.floor(l),[0,255]),ED.adjust(Math.floor(c),[0,255]),ED.adjust(Math.floor(f),[0,255]),p.toFixed(4)-0],"hex"),l+=o,c+=i,f+=a,p+=s;return l=e[0],c=e[1],f=e[2],p=e[3],n[u]=ED.toColor([l,c,f,p],"hex"),n}},{key:"getGradientColors",value:function(t,e,r){var n,o,i,a=[],s=t.length;if(void 0!==e){if(s>=e)if("RANGE"===r)for(o=0;o<e;o++)a.push(t[o]);else for(o=0;o<e;o++){var u=Math.floor(o/2);if(o%2==0)a.push(t[u]);else{var l=t.length-1-u;a.push(t[l])}}else{for(n=Math.ceil(e/(s-1)),o=0,i=s-1;o<i;o++){var c=this.getStepColors(t[o],t[o+1],n);o<i-1&&c.pop(),a=a.concat(c)}for(var f=a.length-e,p=0;p<f;p++)a.splice(2,1)}return a}}},{key:"getColorWithOpacity",value:function(t,e){return ED.alpha(t,e)}}],(e=null)&&_D(t.prototype,e),r&&_D(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}(),xD=r(7915);function TD(t,e){t&&-1===t.indexOf("BEGIN PUBLIC KEY")&&(t="-----BEGIN PUBLIC KEY-----\n".concat(t,"\n-----END PUBLIC KEY-----"));var r=xD.pki.publicKeyFromPem(t),n={md:xD.md.sha256.create(),mgf1:{md:xD.md.sha1.create()}},o=r.encrypt(e,"RSA-OAEP",n);return!!o&&window.btoa(o)}function CD(t,e,r){r=xD.util.encodeUtf8(r);var n=xD.cipher.createCipher("AES-GCM",t);if(n.start({iv:e,additionalData:"",tagLength:128}),n.update(xD.util.createBuffer(r)),n.finish()){var o=n.output,i=n.mode.tag;return window.btoa(o.data+i.data)}return!1}function kD(t){for(var e="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",r="",n=t;n>0;--n)r+=e[Math.floor(Math.random()*e.length)];return r}function AD(t){"@babel/helpers - typeof";return(AD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function jD(){jD=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),s=new A(n||[]);return o(a,"_invoke",{value:x(t,r,s)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var p="suspendedStart",h="suspendedYield",y="executing",d="completed",v={};function m(){}function b(){}function g(){}var S={};l(S,a,function(){return this});var w=Object.getPrototypeOf,_=w&&w(w(j([])));_&&_!==r&&n.call(_,a)&&(S=_);var O=g.prototype=m.prototype=Object.create(S);function E(t){["next","throw","return"].forEach(function(e){l(t,e,function(t){return this._invoke(e,t)})})}function P(t,e){function r(o,i,a,s){var u=f(t[o],t,i);if("throw"!==u.type){var l=u.arg,c=l.value;return c&&"object"==AD(c)&&n.call(c,"__await")?e.resolve(c.__await).then(function(t){r("next",t,a,s)},function(t){r("throw",t,a,s)}):e.resolve(c).then(function(t){l.value=t,a(l)},function(t){return r("throw",t,a,s)})}s(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e(function(e,o){r(t,n,e,o)})}return i=i?i.then(o,o):o()}})}function x(e,r,n){var o=p;return function(i,a){if(o===y)throw Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var u=T(s,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var l=f(e,r,n);if("normal"===l.type){if(o=n.done?d:h,l.arg===v)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=d,n.method="throw",n.arg=l.arg)}}}function T(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,T(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function A(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function j(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(AD(e)+" is not iterable")}return b.prototype=g,o(O,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=l(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,l(t,u,"GeneratorFunction")),t.prototype=Object.create(O),t},e.awrap=function(t){return{__await:t}},E(P.prototype),l(P.prototype,s,function(){return this}),e.AsyncIterator=P,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new P(c(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next()})},E(O),l(O,u,"Generator"),l(O,a,function(){return this}),l(O,"toString",function(){return"[object Generator]"}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=j,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(k),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),k(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;k(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:j(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function ND(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return ID(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ID(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){s=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function ID(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function MD(t,e,r,n,o,i,a){try{var s=t[i](a),u=s.value}catch(t){return void r(t)}s.done?e(u):Promise.resolve(u).then(n,o)}function RD(t){return function(){var e=this,r=arguments;return new Promise(function(n,o){var i=t.apply(e,r);function a(t){MD(i,n,o,a,s,"next",t)}function s(t){MD(i,n,o,a,s,"throw",t)}a(void 0)})}}function LD(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,DD(n.key),n)}}function DD(t){var e=function(t,e){if("object"!=AD(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=AD(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==AD(e)?e:e+""}var BD=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.serverUrl=e,this.tunnelUrl=void 0,this.blockedUrlRegex={HEAD:[],POST:[],GET:[],PUT:[],DELETE:[]},this.encryptAESKey=kD(16),this.encryptAESIV=kD(12)},(e=[{key:"request",value:function(){var t=RD(jD().mark(function t(e){var r,n,o,i,a,s,u,l,c,f;return jD().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.serverUrl){t.next=2;break}throw"serverUrl can not be empty.";case 2:return r=Object.assign({baseURL:""},e),t.next=5,this._createTunnel();case 5:if(t.sent){t.next=8;break}return t.abrupt("return");case 8:n=ND(this.blockedUrlRegex[r.method.toUpperCase()]),t.prev=9,n.s();case 11:if((o=n.n()).done){t.next=24;break}if(i=o.value,!new RegExp(i).test(r.baseURL+r.url)){t.next=22;break}if(a={url:r.baseURL+(r.url.startsWith("/")?r.url.substring(1,r.url.length):r.url),method:r.method,timeout:r.timeout,headers:r.headers,body:r.data},r.method="post",r.data=CD(this.encryptAESKey,this.encryptAESIV,JSON.stringify(a)),r.data){t.next=20;break}throw"encrypt failed";case 20:return r.url=this.tunnelUrl,t.abrupt("break",24);case 22:t.next=11;break;case 24:t.next=29;break;case 26:t.prev=26,t.t0=t.catch(9),n.e(t.t0);case 29:return t.prev=29,n.f(),t.finish(29);case 32:return t.next=34,co.commit(r.method,r.url,r.data,r.options);case 34:if(s=t.sent,r.url!==this.tunnelUrl){t.next=46;break}return t.next=38,s.text();case 38:if(u=t.sent,p=this.encryptAESKey,h=this.encryptAESIV,y=u,d=void 0,void 0,void 0,b=void 0,d=window.atob(y),v=d.substring(0,d.length-16),m=d.substring(d.length-16),(b=xD.cipher.createDecipher("AES-GCM",xD.util.createBuffer(p))).start({iv:xD.util.createBuffer(h),additionalData:"",tagLength:128,tag:m}),b.update(xD.util.createBuffer(v)),l=!!b.finish()&&xD.util.decodeUtf8(b.output.data)){t.next=43;break}return console.debug("解密请求响应失败"),t.abrupt("return");case 43:return c=JSON.parse(l),f=Object.create({json:function(){return Promise.resolve(c.data)}}),t.abrupt("return",Object.assign(f,c));case 46:return t.abrupt("return",s);case 47:case"end":return t.stop()}var p,h,y,d,v,m,b},t,this,[[9,26,29,32]])}));return function(e){return t.apply(this,arguments)}}()},{key:"_getRSAPublicKey",value:function(){var t=RD(jD().mark(function t(){var e,r,n,o;return jD().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,co.get(dt()(this.serverUrl).segment("services/security/tunnel/v1/publickey").toString());case 3:return e=t.sent,t.next=6,e.json();case 6:return r=t.sent,n={key:this.encryptAESKey,iv:this.encryptAESIV,mode:"GCM",padding:"NoPadding"},o=TD(r.publicKey,n.key+n.iv),t.abrupt("return",o);case 12:t.prev=12,t.t0=t.catch(0),console.debug("RSA公钥获取失败，错误详情："+t.t0);case 15:case"end":return t.stop()}},t,this,[[0,12]])}));return function(){return t.apply(this,arguments)}}()},{key:"_createTunnel",value:function(){var t=RD(jD().mark(function t(){var e,r,n;return jD().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.tunnelUrl){t.next=19;break}return t.prev=1,t.next=4,this._getRSAPublicKey();case 4:if(e=t.sent){t.next=7;break}throw"fetch RSA publicKey failed";case 7:return t.next=9,co.post(dt()(this.serverUrl).segment("services/security/tunnel/v1/tunnels").toString(),e);case 9:return r=t.sent,t.next=12,r.json();case 12:n=t.sent,Object.assign(this,{tunnelUrl:n.tunnelUrl,blockedUrlRegex:Object.assign({},this.blockedUrlRegex,n.blockedUrlRegex)}),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(1),console.debug("安全隧道创建失败，错误详情："+t.t0);case 19:return t.abrupt("return",this.tunnelUrl);case 20:case"end":return t.stop()}},t,this,[[1,16]])}));return function(){return t.apply(this,arguments)}}()}])&&LD(t.prototype,e),r&&LD(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function FD(){return(FD=RD(jD().mark(function t(e){var r,n,o,i,a,s,u,l,c;return jD().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,r=(e&&e.match(/.+(?=(\/restjsr\/v1\/vectortile\/|\/rest\/maps\/|\/rest\/data\/))/)||[])[0]){t.next=4;break}return t.abrupt("return");case 4:return t.next=6,co.get(r);case 6:return n=t.sent,t.next=9,n.json();case 9:if(o=t.sent,i=(o||[]).find(function(t){return e.includes(t.name)&&t.serviceEncryptInfo})){t.next=13;break}return t.abrupt("return");case 13:return a=r.split("/services/")[0],s=new BD(a),u=i&&"".concat(a,"/services/security/svckeys/").concat(i.serviceEncryptInfo.encrptKeyID,".json"),t.next=18,s.request({method:"get",url:u});case 18:return l=t.sent,t.next=21,l.json();case 21:if(c=t.sent){t.next=24;break}return t.abrupt("return");case 24:return t.abrupt("return",{serviceKey:c,algorithm:i.serviceEncryptInfo.encrptSpec.algorithm});case 27:t.prev=27,t.t0=t.catch(0),console.error(t.t0);case 30:case"end":return t.stop()}},t,null,[[0,27]])}))).apply(this,arguments)}function UD(t){"@babel/helpers - typeof";return(UD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function GD(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,VD(n.key),n)}}function VD(t){var e=function(t,e){if("object"!=UD(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=UD(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==UD(e)?e:e+""}var zD=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)},r=[{key:"newInstance",value:function(){return this.geostatsInstance||(this.geostatsInstance=new window.geostats),this.geostatsInstance}},{key:"getInstance",value:function(t){var e=this.newInstance();return e.setSerie(t),e}},{key:"getArrayStatistic",value:function(t,e){return t.length?"Sum"===e||"求和"===e?this.getSum(t):"Maximum"===e||"最大值"===e?this.getMax(t):"Minimum"===e||"最小值"===e?this.getMin(t):"Average"===e||"平均值"===e?this.getMean(t):"Median"===e||"中位数"===e?this.getMedian(t):"times"===e||"计数"===e?this.getTimes(t):void 0:0}},{key:"getArraySegments",value:function(t,e,r){return"offset"===e?this.getEqInterval(t,r):"jenks"===e?this.getJenks(t,r):"square"===e?this.getMin(t)>=0&&this.getSqrtInterval(t,r):"logarithm"===e?this.getMin(t)>0&&this.getGeometricProgression(t,r):void 0}},{key:"getSum",value:function(t){return this.getInstance(t).sum()}},{key:"getMax",value:function(t){return this.getInstance(t).max()}},{key:"getMin",value:function(t){return this.getInstance(t).min()}},{key:"getMean",value:function(t){return this.getInstance(t).mean()}},{key:"getMedian",value:function(t){return this.getInstance(t).median()}},{key:"getTimes",value:function(t){return t.length}},{key:"getEqInterval",value:function(t,e){return this.getInstance(t).getClassEqInterval(e)}},{key:"getJenks",value:function(t,e){return this.getInstance(t).getClassJenks(e)}},{key:"getSqrtInterval",value:function(t,e){return t=t.map(function(t){return Math.sqrt(t)}),this.getInstance(t).getClassEqInterval(e).map(function(t){return t*t})}},{key:"getGeometricProgression",value:function(t,e){return this.getInstance(t).getClassGeometricProgression(e)}}],(e=null)&&GD(t.prototype,e),r&&GD(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}(),HD=function(t){var e;if(!t)return e;return["m","meter","meters"].indexOf(t.toLocaleLowerCase())>-1?e=1:["degrees","deg","degree","dd"].indexOf(t.toLocaleLowerCase())>-1?e=2*Math.PI*6378137/360:t===c.KILOMETER?e=.001:t===c.INCH?e=1/.025399999918:t===c.FOOT&&(e=.3048),e};function qD(t,e,r,n){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:22,i=arguments.length>5?arguments[5]:void 0,a=[];if(t&&t.length>0)for(var s=0;s<t.length;s++)a.push(WD(t[s],r,n));else if(i){for(var u=Math.abs(e.left-e.right)/256,l=WD(i,r,n),c=l,f=0;f<o;f++){var p=l*Math.pow(2,f);if(Math.abs(p,u)<=1e-6||p>u){c=p;break}}for(var h=0;h<o;h++)a.push(c/Math.pow(2,h))}else for(var y=Math.abs(e.left-e.right)/256,d=0;d<o;d++)a.push(y/Math.pow(2,d));return a.sort(function(t,e){return e-t})}function JD(t,e){for(var r,n=0,o=0;o<e.length;o++)0===o&&(r=Math.abs(t-e[o])),r>Math.abs(t-e[o])&&(r=Math.abs(t-e[o]),n=o);return n}function WD(t,e,r){return 1/(t*e*(1/.0254)*HD(r))}function KD(t,e,r){return 1/e/(t*(1/.0254)*HD(r))}function YD(t){if(!t)throw new Error("No GeoJSON coords provided");if(!t||0===t.length)return null;var e=t.length,r=new Float64Array(t.flat()),n=window.Module._malloc(2*e*8);window.Module.HEAPF64.set(r,n/8);var o=window.Module._UGCWasm_Geometry_CreatePoint2DsFromBuffer(n,e);return window.Module._free(n),o}function QD(t){if(!t)throw new Error("No GeoJSON coords provided");if(!t||0===t.length)return null;var e=t.length,r=new Float64Array(t),n=window.Module._malloc(8*e);window.Module.HEAPF64.set(r,n/8);var o=window.Module._UGCWasm_Helper_CreateDoubleArray(n,e);return window.Module._free(n),o}function XD(t){var e=window.Module._UGCWasm_Helper_GetDoubleArrayLength(t),r=window.Module._malloc(8*e);window.Module._UGCWasm_Helper_GetBufferFromDoubleArray(t,r);for(var n=new Float64Array(window.Module.HEAPF64.buffer,r,e),o=[],i=0;i<e;i++)o.push(n[i]);return window.Module._free(r),o}function ZD(t){if(!t)return null;switch(window.Module._UGCWasm_Geometry_GetType(t)){case 1:var e=[],r=window.Module._UGCWasm_GeoPoint_GetX(t),n=window.Module._UGCWasm_GeoPoint_GetY(t);return e.push(r,n),{type:"Point",coordinates:e};case 3:for(var o=[],i=window.Module._UGCWasm_GeoLine_GetPartCount(t),a=0;a<i;a++){var s=window.Module._UGCWasm_GeoLine_GetPartPointCount(t,a),u=window.Module._malloc(2*s*8);window.Module._UGCWasm_GeoLine_GetPart2(t,u,a);for(var l=new Float64Array(window.Module.HEAPF64.buffer,u,2*s),c=[],f=0;f<2*s;f+=2)c.push([l[f],l[f+1]]);window.Module._free(u),o.push(c)}return{type:"LineString",coordinates:o[0]};case 5:for(var p=[],h=window.Module._UGCWasm_GeoRegion_GetPartCount(t),y=0;y<h;y++){var d=window.Module._UGCWasm_GeoRegion_GetPartPointCount(t,y),v=window.Module._malloc(2*d*8);window.Module._UGCWasm_GeoRegion_GetPart2(t,v,y);for(var m=new Float64Array(window.Module.HEAPF64.buffer,v,2*d),b=[],g=0;g<2*d;g+=2)b.push([m[g],m[g+1]]);window.Module._free(v),p.push(b)}return{type:"Polygon",coordinates:p};default:return null}}function $D(t){if(!t)throw new Error("No GeoJSON object provided");switch(t.type){case"Feature":return $D(t.geometry);case"FeatureCollection":return 0===t.features.length?null:$D(t.features[0].geometry);case"Point":return 0===t.coordinates.length?window.Module._UGCWasm_GeoPoint_New():window.Module._UGCWasm_GeoPoint_New2(t.coordinates[0],t.coordinates[1]);case"LineString":if(0===t.coordinates.length)return window.Module._UGCWasm_GeoLine_New();var e=window.Module._UGCWasm_GeoLine_New(),r=YD(t.coordinates);return window.Module._UGCWasm_GeoLine_AddPart2(e,r,t.coordinates.length),e;case"Polygon":if(0===t.coordinates.length)return window.Module._UGCWasm_GeoRegion_New();var n=window.Module._UGCWasm_GeoRegion_New(),o=YD(t.coordinates[0]);if(window.Module._UGCWasm_GeoRegion_AddPart2(n,o,t.coordinates[0].length),t.coordinates.length>1)for(var i=1;i<t.coordinates.length;i++){var a=YD(t.coordinates[i]);window.Module._UGCWasm_GeoRegion_AddPart2(n,a,t.coordinates[i].length)}return n;case"MultiLineString":if(0===t.coordinates.length)return window.Module._UGCWasm_GeoLine_New();var s=window.Module._UGCWasm_GeoLine_New(),u=YD(t.coordinates[0]);if(window.Module._UGCWasm_GeoLine_AddPart2(s,u,t.coordinates[0].length),t.coordinates.length>1)for(var l=1;l<t.coordinates.length;l++){var c=YD(t.coordinates[l]);window.Module._UGCWasm_GeoLine_AddPart2(s,c,t.coordinates[l].length)}return s;default:throw new Error("Unsupported GeoJSON type: "+t.type+". Are you sure this is valid GeoJSON?")}}var tB=function(){try{return Module}catch(t){return{}}}();function eB(t){"@babel/helpers - typeof";return(eB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function rB(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,nB(n.key),n)}}function nB(t){var e=function(t,e){if("object"!=eB(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=eB(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==eB(e)?e:e+""}function oB(t,e,r){return e=iB(e),function(t,e){if(e&&("object"===eB(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],iB(t).constructor):e.apply(t,r))}function iB(t){return(iB=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function aB(t,e){return(aB=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var sB=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r=oB(this,e),t&&(window.Module=t),window.Module||(window.Module=tB),r.module=window.Module,r.addEventType("loaded"),r.module.calledRun?r.triggerEvent("loaded",{}):r.module.onRuntimeInitialized=function(){r.triggerEvent("loaded",{})},r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&aB(t,e)}(e,wr),r=e,(n=[{key:"buffer",value:function(t,e){var r=$D(t),n=this.module._UGCWasm_Geometrist_Buffer(r,e);return{type:"Feature",geometry:ZD(n)}}},{key:"computeConvexHull",value:function(t){var e=t.length,r=YD(t);return{type:"Feature",geometry:ZD(this.module._UGCWasm_Geometrist_ComputeConvexHull(r,e))}}},{key:"isIdentical",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e-6,n=$D(t),o=$D(e);return 1===this.module._UGCWasm_Geometrist_IsIdentical(n,o,r)}},{key:"hasIntersection",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e-6,n=$D(t),o=$D(e);return 1===this.module._UGCWasm_Geometrist_HasIntersection(n,o,r)}},{key:"hasTouch",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e-6,n=$D(t),o=$D(e);return 1===this.module._UGCWasm_Geometrist_HasTouch(n,o,r)}},{key:"resample",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e-6,r=$D(t);return{type:"Feature",geometry:ZD(this.module._UGCWasm_Geometrist_Resample(r,e))}}},{key:"isParallel",value:function(t,e,r,n,o,i,a,s){return 1===this.module._UGCWasm_Geometrist_IsParallel(t,e,r,n,o,i,a,s)}},{key:"computePerpendicularPosition",value:function(t,e,r,n,o,i){var a=this.module._UGCWasm_Helper_CreateDoubleArray(0,2);return this.module._UGCWasm_Geometrist_ComputePerpendicularPosition(t,e,r,n,o,i,a),a=XD(a)}},{key:"isPointOnLine",value:function(t,e,r,n,o,i,a){return 1===this.module._UGCWasm_Geometrist_IsPointOnLine(t,e,r,n,o,i,a)}},{key:"isProjectOnLineSegment",value:function(t,e,r,n,o,i){return 1===this.module._UGCWasm_Geometrist_IsProjectOnLineSegment(t,e,r,n,o,i)}},{key:"distanceToLineSegment",value:function(t,e,r,n,o,i){return this.module._UGCWasm_Geometrist_DistanceToLineSegment(t,e,r,n,o,i)}},{key:"nearestPointToVertex",value:function(t,e,r){var n=this.module._UGCWasm_Helper_CreateDoubleArray(0,2),o=$D(r);return this.module._UGCWasm_Geometrist_NearestPointToVertex(t,e,o,n),n=XD(n)}},{key:"computeConcaveHullPoints",value:function(t,e,r){var n=QD(t),o=QD(e);return{type:"Feature",geometry:ZD(this.module._UGCWasm_Geometrist_ComputeConcaveHullPoints(n,o,t.length,r))}}},{key:"isSegmentIntersect",value:function(t,e,r,n,o,i,a,s){return 1===this.module._UGCWasm_Geometrist_IsSegmentIntersect(t,e,r,n,o,i,a,s)}},{key:"isIntersectRegionWithRect",value:function(t,e,r,n,o){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1e-6,a=$D(t);return 0!==this.module._UGCWasm_Geometrist_isIntersectRegionWithRect(a,e,r,n,o,i)}},{key:"isOnSameSide",value:function(t,e,r,n,o,i,a,s){return 1===this.module._UGCWasm_Geometrist_IsOnSameSide(t,e,r,n,o,i,a,s)}},{key:"isRight",value:function(t,e,r,n,o,i){return 1===this.module._UGCWasm_Geometrist_IsRight(t,e,r,n,o,i)}},{key:"isLeft",value:function(t,e,r,n,o,i){return 1===this.module._UGCWasm_Geometrist_IsLeft(t,e,r,n,o,i)}},{key:"computeGeodesicArea",value:function(t){var e=$D(t),r=this.module._UGCWasm_Geometry_NewUGPrjCoordSys(4326);return this.module._UGCWasm_Geometrist_ComputeGeodesicArea(e,r)}},{key:"smooth",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,r=$D(t);return{type:"Feature",geometry:ZD(this.module._UGCWasm_Geometrist_Smooth(r,e))}}},{key:"computeGeodesicDistance",value:function(t,e,r,n){var o=QD(t),i=QD(e);return this.module._UGCWasm_Geometrist_ComputeGeodesicDistance(o,i,r,n)}},{key:"computeParallel",value:function(t,e){var r=$D(t);return{type:"Feature",geometry:ZD(this.module._UGCWasm_Geometrist_ComputeParallel(r,e))}}},{key:"computeConvexHullPoints",value:function(t,e){var r=QD(t),n=QD(e);return{type:"Feature",geometry:ZD(this.module._UGCWasm_Geometrist_ComputeConvexHullPoints(r,n,t.length))}}}])&&rB(r.prototype,n),o&&rB(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();var uB=r(8518),lB=r.n(uB);function cB(t){"@babel/helpers - typeof";return(cB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function fB(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function pB(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,yB(n.key),n)}}function hB(t,e,r){return e&&pB(t.prototype,e),r&&pB(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function yB(t){var e=function(t,e){if("object"!=cB(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=cB(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==cB(e)?e:e+""}var dB=function(){function t(e){fB(this,t),this.env=null,this.parser=null,this.ruleSet=null,this.cartoStr="",this.shaders=null,"string"==typeof e&&(this.cartoStr=e,this.env={frames:[],errors:[],error:function(t){this.errors.push(t)}},this.parser=this.getParser(this.env),this.parse(e),this.shaders=this.toShaders())}return hB(t,[{key:"getParser",value:function(e){var r,n,o,i,a,s,u,l,c,f=this;function p(){i=u[o],a=n,l=n}function h(){u[o]=i,l=n=a}function y(){n>l&&(u[o]=u[o].slice(n-l),l=n)}function d(t){var e,i,a,s;if(t instanceof Function)return t.call(c.parsers);if("string"==typeof t)e=r.charAt(n)===t?t:null,i=1,y();else{if(y(),!(e=t.exec(u[o])))return null;i=e[0].length}if(e){var f=n+=i;for(s=n+u[o].length-i;n<s&&(32===(a=r.charCodeAt(n))||10===a||9===a);)n++;return u[o]=u[o].slice(i+(n-f)),l=n,0===u[o].length&&o<u.length-1&&o++,"string"==typeof e?e:1===e.length?e[0]:e}}function v(t){var n,o={index:s,filename:e.filename,message:"Parse error.",line:0,column:-1};for(var i in o)0===t[i]&&(t[i]=o[i]);n=t.filename&&f.env.inputs&&f.env.inputs[t.filename]?f.env.inputs[t.filename]:r,t.line=(n.slice(0,t.index).match(/\n/g)||"").length+1;for(var a=t.index;a>=0&&"\n"!==n.charAt(a);a--)t.column++;return new Error([t.filename,t.line,t.column,t.message].join(";"))}return this.env=e=e||{},this.env.filename=this.env.filename||null,this.env.inputs=this.env.inputs||{},c={parse:function(i){var a,c=null;if(n=o=l=s=0,u=[],r=i.replace(/\r\n/g,"\n"),e.filename&&(f.env.inputs[e.filename]=r),u=function(t){for(var e,n,o,i,a=0,s=/(?:@\{[\w-]+\}|[^"'`\{\}\/\(\)\\])+/g,u=/\/\*(?:[^*]|\*+[^\/*])*\*+\/|\/\/.*/g,l=/"((?:[^"\\\r\n]|\\.)*)"|'((?:[^'\\\r\n]|\\.)*)'|`((?:[^`]|\\.)*)`/g,f=0,p=t[0],h=0;h<r.length;)if(s.lastIndex=h,(e=s.exec(r))&&e.index===h&&(h+=e[0].length,p.push(e[0])),o=r.charAt(h),u.lastIndex=l.lastIndex=h,(e=l.exec(r))&&e.index===h)h+=e[0].length,p.push(e[0]);else if(n||"/"!==o||"/"!==(i=r.charAt(h+1))&&"*"!==i||!(e=u.exec(r))||e.index!==h){switch(o){case"{":if(!n){f++,p.push(o);break}case"}":if(!n){f--,p.push(o),t[++a]=p=[];break}case"(":if(!n){n=!0,p.push(o);break}case")":if(n){n=!1,p.push(o);break}default:p.push(o)}h++}else h+=e[0].length,p.push(e[0]);return 0!==f&&(c={index:h-1,type:"Parse",message:f>0?"missing closing `}`":"missing opening `{`"}),t.map(function(t){return t.join("")})}([[]]),c)throw v(c);var p=function(t,e){var r=t.specificity,n=e.specificity;return r[0]!=n[0]?n[0]-r[0]:r[1]!=n[1]?n[1]-r[1]:r[2]!=n[2]?n[2]-r[2]:n[3]-r[3]};return(a=new t.Tree.Ruleset([],d(this.parsers.primary))).root=!0,a.toList=function(t){t.error=function(e){t.errors||(t.errors=new Error("")),t.errors.message?t.errors.message+="\n"+v(e).message:t.errors.message=v(e).message},t.frames=t.frames||[];var e=this.flatten([],[],t);return e.sort(p),e},a},parsers:{primary:function(){for(var t,e=[];(t=d(this.rule)||d(this.ruleset)||d(this.comment))||d(/^[\s\n]+/)||(t=d(this.invalid));)t&&e.push(t);return e},invalid:function(){var e=d(/^[^;\n]*[;\n]/);if(e)return new t.Tree.Invalid(e,a)},comment:function(){var e;if("/"===r.charAt(n))return"/"===r.charAt(n+1)?new t.Tree.Comment(d(/^\/\/.*/),!0):(e=d(/^\/\*(?:[^*]|\*+[^\/*])*\*+\/\n?/))?new t.Tree.Comment(e):void 0},entities:{quoted:function(){if('"'===r.charAt(n)||"'"===r.charAt(n)){var e=d(/^"((?:[^"\\\r\n]|\\.)*)"|'((?:[^'\\\r\n]|\\.)*)'/);return e?new t.Tree.Quoted(e[1]||e[2]):void 0}},field:function(){if(d("[")){var e=d(/(^[^\]]+)/);if(d("]"))return e?new t.Tree.Field(e[1]):void 0}},comparison:function(){var t=d(/^=~|=|!=|<=|>=|<|>/);if(t)return t},keyword:function(){var e=d(/^[A-Za-z\u4e00-\u9fa5-]+[A-Za-z-0-9\u4e00-\u9fa5_]*/);if(e)return new t.Tree.Keyword(e)},call:function(){var e,r;if(e=/^([\w\-]+|%)\(/.exec(u[o])){if("url"===(e=e[1]))return null;n+=e.length;if(d("("),r=d(this.entities.arguments),d(")"))return e?new t.Tree.Call(e,r,n):void 0}},arguments:function(){for(var t,e=[];t=d(this.expression);){e.push(t);if(!d(","))break}return e},literal:function(){return d(this.entities.dimension)||d(this.entities.keywordcolor)||d(this.entities.hexcolor)||d(this.entities.quoted)},url:function(){var e;if("u"===r.charAt(n)&&d(/^url\(/)){e=d(this.entities.quoted)||d(this.entities.variable)||d(/^[\-\w%@_match\/.&=:;#+?~]+/)||"";return d(")")?new t.Tree.URL(void 0!==e.value||e instanceof t.Tree.Variable?e:new t.Tree.Quoted(e)):new t.Tree.Invalid(e,a,"Missing closing ) in URL.")}},variable:function(){var o,i=n;if("@"===r.charAt(n)&&(o=d(/^@[\w-]+/)))return new t.Tree.Variable(o,i,e.filename)},hexcolor:function(){var e;if("#"===r.charAt(n)&&(e=d(/^#([a-fA-F0-9]{6}|[a-fA-F0-9]{3})/)))return new t.Tree.Color(e[1])},keywordcolor:function(){var e=u[o].match(/^[a-z]+/);if(e&&e[0]in t.Tree.Reference.data.colors)return new t.Tree.Color(t.Tree.Reference.data.colors[d(/^[a-z]+/)])},dimension:function(){var e=r.charCodeAt(n);if(!(e>57||e<45||47===e)){var o=d(/^(-?\d*\.?\d+(?:[eE][-+]?\d+)?)(\%|\w+)?/);return o?new t.Tree.Dimension(o[1],o[2],a):void 0}}},variable:function(){var t;if("@"===r.charAt(n)&&(t=d(/^(@[\w-]+)\s*:/)))return t[1]},entity:function(){var t=d(this.entities.call)||d(this.entities.literal),e=d(this.entities.field)||d(this.entities.variable),r=d(this.entities.url)||d(this.entities.keyword);return t||e||r},end:function(){var t;return d(";")||("string"==typeof(t="}")?r.charAt(n)===t:!!t.test(u[o]))},element:function(){var e=d(/^(?:[.#][\w\u4e00-\u9fa5\-]+|\*|Map)/);if(e)return new t.Tree.Element(e)},attachment:function(){var t=d(/^::([\w\-]+(?:\/[\w\-]+)*)/);if(t)return t[1]},selector:function(){for(var e,o,i,s,u,l=[],c=new t.Tree.Filterset,f=[],p=0,h=0;(i=d(this.element))||(u=d(this.zoom))||(s=d(this.filter))||(e=d(this.attachment));){if(p++,i)l.push(i);else if(u)f.push(u),h++;else if(s){var y=c.add(s);if(y)throw v({message:y,index:n-1});h++}else{if(o)throw v({message:"Encountered second attachment name.",index:n-1});o=e}var m=r.charAt(n);if("{"===m||"}"===m||";"===m||","===m)break}if(p)return new t.Tree.Selector(c,f,l,o,h,a)},filter:function(){p();var r,n,o;if(d("[")&&(r=d(/^[a-zA-Z0-9\-_]+/)||d(this.entities.quoted)||d(this.entities.variable)||d(this.entities.keyword)||d(this.entities.field))&&(r instanceof t.Tree.Quoted&&(r=new t.Tree.Field(r.toString())),(n=d(this.entities.comparison))&&(o=d(this.entities.quoted)||d(this.entities.variable)||d(this.entities.dimension)||d(this.entities.keyword)||d(this.entities.field)))){if(!d("]"))throw v({message:"Missing closing ] of filter.",index:a-1});return r.is||(r=new t.Tree.Field(r)),new t.Tree.Filter(r,n,o,a,e.filename)}},zoom:function(){p();var e,r;if(d(/^\[\s*zoom/g)&&(e=d(this.entities.comparison))&&(r=d(this.entities.variable)||d(this.entities.dimension))&&d("]"))return new t.Tree.Zoom(e,r,a);h()},block:function(){var t;if(d("{")&&(t=d(this.primary))&&d("}"))return t},ruleset:function(){var e,r,n=[];for(p();e=d(this.selector);){for(n.push(e);d(this.comment););if(!d(","))break;for(;d(this.comment););}if(e)for(;d(this.comment););if(n.length>0&&(r=d(this.block))){if(1===n.length&&n[0].elements.length&&"Map"===n[0].elements[0].value){var o=new t.Tree.Ruleset(n,r);return o.isMap=!0,o}return new t.Tree.Ruleset(n,r)}h()},rule:function(){var o,i,u=r.charAt(n);if(p(),"."!==u&&"#"!==u&&(o=d(this.variable)||d(this.property))){if((i=d(this.value))&&d(this.end))return new t.Tree.Rule(o,i,a,e.filename);s=n,h()}},font:function(){for(var e,r=[],n=[];e=d(this.entity);)n.push(e);if(r.push(new t.Tree.Expression(n)),d(","))for(;(e=d(this.expression))&&(r.push(e),d(",")););return new t.Tree.Value(r)},value:function(){for(var e,r=[];(e=d(this.expression))&&(r.push(e),d(",")););return r.length>1?new t.Tree.Value(r.map(function(t){return t.value[0]})):1===r.length?new t.Tree.Value(r):void 0},sub:function(){var t;if(d("(")&&(t=d(this.expression))&&d(")"))return t},multiplication:function(){var e,r,n,o;if(e=d(this.operand)){for(;(n=d("/")||d("*")||d("%"))&&(r=d(this.operand));)o=new t.Tree.Operation(n,[o||e,r],a);return o||e}},addition:function(){var e,o,i,s;if(e=d(this.multiplication)){for(;(i=d(/^[-+]\s+/)||" "!=r.charAt(n-1)&&(d("+")||d("-")))&&(o=d(this.multiplication));)s=new t.Tree.Operation(i,[s||e,o],a);return s||e}},operand:function(){return d(this.sub)||d(this.entity)},expression:function(){for(var e,r=[];e=d(this.addition)||d(this.entity);)r.push(e);if(r.length>0)return new t.Tree.Expression(r)},property:function(){var t=d(/^(([a-z][-a-z_0-9]*\/)?\*?-?[-a-z_0-9]+)\s*:/);if(t)return t[1]}}}}},{key:"parse",value:function(t){var e=this.parser;return this.ruleSet=e.parse(t)}},{key:"toShaders",value:function(){if(this.ruleSet){var t=this.ruleSet;if(t){var e=t.toList(this.env);e.reverse();var r={},n=[];this._toShaders(r,n,e);for(var o=[],i={},a=0,s=e.length;a<s;++a){var u=e[a],l=u.attachment,c=r[n[a]],f=[];if(!i[l]){var p=0;for(var h in c)if("zoom"!==h&&"frames"!==h&&"attachment"!==h&&"elements"!=h)if("layer-index"===h){var y=(c[h].join("\n"),null);Object.defineProperty(f,"layerIndex",{configurable:!0,enumerable:!1,value:y})}else f[p++]=function(t,e){if(!Array.isArray(t))return t;var r=t.join("\n"),n='attributes["FEATUREID"]&&attributes["FEATUREID"]',o=r.indexOf(n);if(o>=0){if(!e.featureFilter){var i=o+n.length,a=r.indexOf(")",i+1),s="featureId&&(featureId"+r.substring(i,a)+")";Object.defineProperty(e,"featureFilter",{configurable:!0,enumerable:!1,value:function(t){return!!s}})}return{property:h,getValue:Function("attributes","zoom","seftFilter","var _value = null; var isExcute=typeof seftFilter=='function'?sefgFilter():seftFilter;if(isExcute){"+r+";} return _value; ")}}return{property:h,getValue:Function("attributes","zoom","var _value = null;"+r+"; return _value; ")}}(c[h],f);Object.defineProperty(f,"attachment",{configurable:!0,enumerable:!1,value:l}),Object.defineProperty(f,"elements",{configurable:!0,enumerable:!1,value:u.elements}),o.push(f),i[n[a]]=!0}Object.defineProperty(f,"zoom",{configurable:!0,enumerable:!1,value:u.zoom})}return o}}return null}},{key:"_toShaders",value:function(e,r,n){for(var o=0,i=n.length;o<i;++o){for(var a=n[o],s=[],u=0,l=a.elements.length;u<l;u++)s.push(a.elements[u]);var c=a.filters.filters,f=[];for(var p in c)f.push(c[p].id);var h=s.join("/")+"::"+a.attachment+"_"+f.join("_");r.push(h);var y=e[h]=e[h]||{};y.zoom=t.Tree.Zoom.all;var d=a.toJS(this.env);for(var v in d)(y[v]=y[v]||[]).push(d[v].join("\n"))}}},{key:"getShaders",value:function(){return this.shaders}},{key:"destroy",value:function(){this.cartoStr=null,this.env=null,this.ruleSet=null,this.parser=null,this.shaders=null}}])}(),vB={version:"2.1.1",style:{"filter-mode":{type:["all","first"],doc:"Control the processing behavior of Rule filters within a Style. If 'all' is used then all Rules are processed sequentially independent of whether any previous filters matched. If 'first' is used then it means processing ends after the first match (a positive filter evaluation) and no further Rules in the Style are processed ('first' is usually the default for CSS implementations on top of Mapnik to simplify translation from CSS to Mapnik XML)","default-value":"all","default-meaning":"All Rules in a Style are processed whether they have filters or not and whether or not the filter conditions evaluate to true."},"image-filters":{css:"image-filters","default-value":"none","default-meaning":"no filters",type:"functions",functions:[["agg-stack-blur",2],["emboss",0],["blur",0],["gray",0],["sobel",0],["edge-detect",0],["x-gradient",0],["y-gradient",0],["invert",0],["sharpen",0]],doc:"A list of image filters."},"comp-op":{css:"comp-op","default-value":"src-over","default-meaning":"add the current layer on top of other layers",doc:"Composite operation. This defines how this layer should behave relative to layers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]},opacity:{css:"opacity",type:"float",doc:"An alpha value for the style (which means an alpha applied to all features in separate buffer and then composited back to main buffer)","default-value":1,"default-meaning":"no separate buffer will be used and no alpha will be applied to the style after rendering"}},layer:{name:{"default-value":"",type:"string",required:!0,"default-meaning":"No layer name has been provided",doc:"The name of a layer. Can be anything you wish and is not strictly validated, but ideally unique  in the map"},srs:{"default-value":"",type:"string","default-meaning":"No srs value is provided and the value will be inherited from the Map's srs",doc:"The spatial reference system definition for the layer, aka the projection. Can either be a proj4 literal string like '+proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs' or, if the proper proj4 epsg/nad/etc identifier files are installed, a string that uses an id like: '+init=epsg:4326'"},status:{"default-value":!0,type:"boolean","default-meaning":"This layer will be marked as active and available for processing",doc:"A property that can be set to false to disable this layer from being processed"},minzoom:{"default-value":"0",type:"float","default-meaning":"The layer will be visible at the minimum possible scale",doc:"The minimum scale denominator that this layer will be visible at. A layer's visibility is determined by whether its status is true and if the Map scale >= minzoom - 1e-6 and scale < maxzoom + 1e-6"},maxzoom:{"default-value":"1.79769e+308",type:"float","default-meaning":"The layer will be visible at the maximum possible scale",doc:"The maximum scale denominator that this layer will be visible at. The default is the numeric limit of the C++ double type, which may vary slightly by system, but is likely a massive number like 1.79769e+308 and ensures that this layer will always be visible unless the value is reduced. A layer's visibility is determined by whether its status is true and if the Map scale >= minzoom - 1e-6 and scale < maxzoom + 1e-6"},queryable:{"default-value":!1,type:"boolean","default-meaning":"The layer will not be available for the direct querying of data values",doc:"This property was added for GetFeatureInfo/WMS compatibility and is rarely used. It is off by default meaning that in a WMS context the layer will not be able to be queried unless the property is explicitly set to true"},"clear-label-cache":{"default-value":!1,type:"boolean","default-meaning":"The renderer's collision detector cache (used for avoiding duplicate labels and overlapping markers) will not be cleared immediately before processing this layer",doc:"This property, by default off, can be enabled to allow a user to clear the collision detector cache before a given layer is processed. This may be desirable to ensure that a given layers data shows up on the map even if it normally would not because of collisions with previously rendered labels or markers"},"group-by":{"default-value":"",type:"string","default-meaning":"No special layer grouping will be used during rendering",doc:"https://github.com/mapnik/mapnik/wiki/Grouped-rendering"},"buffer-size":{"default-value":"0",type:"float","default-meaning":"No buffer will be used",doc:"Extra tolerance around the Layer extent (in pixels) used to when querying and (potentially) clipping the layer data during rendering"},"maximum-extent":{"default-value":"none",type:"bbox","default-meaning":"No clipping extent will be used",doc:"An extent to be used to limit the bounds used to query this specific layer data during rendering. Should be minx, miny, maxx, maxy in the coordinates of the Layer."}},symbolizers:{"*":{"image-filters":{css:"image-filters","default-value":"none","default-meaning":"no filters",type:"functions",functions:[["agg-stack-blur",2],["emboss",0],["blur",0],["gray",0],["sobel",0],["edge-detect",0],["x-gradient",0],["y-gradient",0],["invert",0],["sharpen",0]],doc:"A list of image filters."},"comp-op":{css:"comp-op","default-value":"src-over","default-meaning":"add the current layer on top of other layers",doc:"Composite operation. This defines how this layer should behave relative to layers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]},opacity:{css:"opacity",type:"float",doc:"An alpha value for the style (which means an alpha applied to all features in separate buffer and then composited back to main buffer)","default-value":1,"default-meaning":"no separate buffer will be used and no alpha will be applied to the style after rendering"}},map:{"background-color":{css:"background-color","default-value":"none","default-meaning":"transparent",type:"color",doc:"Map Background color"},"background-image":{css:"background-image",type:"uri","default-value":"","default-meaning":"transparent",doc:"An image that is repeated below all features on a map as a background.",description:"Map Background image"},srs:{css:"srs",type:"string","default-value":"+proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs","default-meaning":"The proj4 literal of EPSG:4326 is assumed to be the Map's spatial reference and all data from layers within this map will be plotted using this coordinate system. If any layers do not declare an srs value then they will be assumed to be in the same srs as the Map and not transformations will be needed to plot them in the Map's coordinate space",doc:"Map spatial reference (proj4 string)"},"buffer-size":{css:"buffer-size","default-value":"0",type:"float","default-meaning":"No buffer will be used",doc:'Extra tolerance around the map (in pixels) used to ensure labels crossing tile boundaries are equally rendered in each tile (e.g. cut in each tile). Not intended to be used in combination with "avoid-edges".'},"maximum-extent":{css:"","default-value":"none",type:"bbox","default-meaning":"No clipping extent will be used",doc:"An extent to be used to limit the bounds used to query all layers during rendering. Should be minx, miny, maxx, maxy in the coordinates of the Map."},base:{css:"base","default-value":"","default-meaning":"This base path defaults to an empty string meaning that any relative paths to files referenced in styles or layers will be interpreted relative to the application process.",type:"string",doc:"Any relative paths used to reference files will be understood as relative to this directory path if the map is loaded from an in memory object rather than from the filesystem. If the map is loaded from the filesystem and this option is not provided it will be set to the directory of the stylesheet."},"paths-from-xml":{css:"","default-value":!0,"default-meaning":"Paths read from XML will be interpreted from the location of the XML",type:"boolean",doc:"value to control whether paths in the XML will be interpreted from the location of the XML or from the working directory of the program that calls load_map()"},"minimum-version":{css:"","default-value":"none","default-meaning":"Mapnik version will not be detected and no error will be thrown about compatibility",type:"string",doc:"The minumum Mapnik version (e.g. 0.7.2) needed to use certain functionality in the stylesheet"},"font-directory":{css:"font-directory",type:"uri","default-value":"none","default-meaning":"No map-specific fonts will be registered",doc:"Path to a directory which holds fonts which should be registered when the Map is loaded (in addition to any fonts that may be automatically registered)."}},polygon:{fill:{css:"polygon-fill",type:"color","default-value":"rgba(128,128,128,1)","default-meaning":"gray and fully opaque (alpha = 1), same as rgb(128,128,128)",doc:"Fill color to assign to a polygon"},"fill-opacity":{css:"polygon-opacity",type:"float",doc:"The opacity of the polygon","default-value":1,"default-meaning":"opaque"},gamma:{css:"polygon-gamma",type:"float","default-value":1,"default-meaning":"fully antialiased",range:"0-1",doc:"Level of antialiasing of polygon edges"},"gamma-method":{css:"polygon-gamma-method",type:["power","linear","none","threshold","multiply"],"default-value":"power","default-meaning":"pow(x,gamma) is used to calculate pixel gamma, which produces slightly smoother line and polygon antialiasing than the 'linear' method, while other methods are usually only used to disable AA",doc:"An Antigrain Geometry specific rendering hint to control the quality of antialiasing. Under the hood in Mapnik this method is used in combination with the 'gamma' value (which defaults to 1). The methods are in the AGG source at https://github.com/mapnik/mapnik/blob/master/deps/agg/include/agg_gamma_functions.h"},clip:{css:"polygon-clip",type:"boolean","default-value":!0,"default-meaning":"geometry will be clipped to map bounds before rendering",doc:"geometries are clipped to map bounds by default for best rendering performance. In some cases users may wish to disable this to avoid rendering artifacts."},smooth:{css:"polygon-smooth",type:"float","default-value":0,"default-meaning":"no smoothing",range:"0-1",doc:"Smooths out geometry angles. 0 is no smoothing, 1 is fully smoothed. Values greater than 1 will produce wild, looping geometries."},"geometry-transform":{css:"polygon-geometry-transform",type:"functions","default-value":"none","default-meaning":"geometry will not be transformed",doc:"Allows transformation functions to be applied to the geometry.",functions:[["matrix",6],["translate",2],["scale",2],["rotate",3],["skewX",1],["skewY",1]]},"comp-op":{css:"polygon-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},line:{stroke:{css:"line-color","default-value":"rgba(0,0,0,1)",type:"color","default-meaning":"black and fully opaque (alpha = 1), same as rgb(0,0,0)",doc:"The color of a drawn line"},"stroke-width":{css:"line-width","default-value":1,type:"float",doc:"The width of a line in pixels"},"stroke-opacity":{css:"line-opacity","default-value":1,type:"float","default-meaning":"opaque",doc:"The opacity of a line"},"stroke-linejoin":{css:"line-join","default-value":"miter",type:["miter","round","bevel"],doc:"The behavior of lines when joining"},"stroke-linecap":{css:"line-cap","default-value":"butt",type:["butt","round","square"],doc:"The display of line endings"},"stroke-gamma":{css:"line-gamma",type:"float","default-value":1,"default-meaning":"fully antialiased",range:"0-1",doc:"Level of antialiasing of stroke line"},"stroke-gamma-method":{css:"line-gamma-method",type:["power","linear","none","threshold","multiply"],"default-value":"power","default-meaning":"pow(x,gamma) is used to calculate pixel gamma, which produces slightly smoother line and polygon antialiasing than the 'linear' method, while other methods are usually only used to disable AA",doc:"An Antigrain Geometry specific rendering hint to control the quality of antialiasing. Under the hood in Mapnik this method is used in combination with the 'gamma' value (which defaults to 1). The methods are in the AGG source at https://github.com/mapnik/mapnik/blob/master/deps/agg/include/agg_gamma_functions.h"},"stroke-dasharray":{css:"line-dasharray",type:"numbers",doc:"A pair of length values [a,b], where (a) is the dash length and (b) is the gap length respectively. More than two values are supported for more complex patterns.","default-value":"none","default-meaning":"solid line"},"stroke-dashoffset":{css:"line-dash-offset",type:"numbers",doc:"valid parameter but not currently used in renderers (only exists for experimental svg support in Mapnik which is not yet enabled)","default-value":"none","default-meaning":"solid line"},"stroke-miterlimit":{css:"line-miterlimit",type:"float",doc:"The limit on the ratio of the miter length to the stroke-width. Used to automatically convert miter joins to bevel joins for sharp angles to avoid the miter extending beyond the thickness of the stroking path. Normally will not need to be set, but a larger value can sometimes help avoid jaggy artifacts.","default-value":4,"default-meaning":"Will auto-convert miters to bevel line joins when theta is less than 29 degrees as per the SVG spec: 'miterLength / stroke-width = 1 / sin ( theta / 2 )'"},clip:{css:"line-clip",type:"boolean","default-value":!0,"default-meaning":"geometry will be clipped to map bounds before rendering",doc:"geometries are clipped to map bounds by default for best rendering performance. In some cases users may wish to disable this to avoid rendering artifacts."},smooth:{css:"line-smooth",type:"float","default-value":0,"default-meaning":"no smoothing",range:"0-1",doc:"Smooths out geometry angles. 0 is no smoothing, 1 is fully smoothed. Values greater than 1 will produce wild, looping geometries."},offset:{css:"line-offset",type:"float","default-value":0,"default-meaning":"no offset",doc:"Offsets a line a number of pixels parallel to its actual path. Postive values move the line left, negative values move it right (relative to the directionality of the line)."},rasterizer:{css:"line-rasterizer",type:["full","fast"],"default-value":"full",doc:"Exposes an alternate AGG rendering method that sacrifices some accuracy for speed."},"geometry-transform":{css:"line-geometry-transform",type:"functions","default-value":"none","default-meaning":"geometry will not be transformed",doc:"Allows transformation functions to be applied to the geometry.",functions:[["matrix",6],["translate",2],["scale",2],["rotate",3],["skewX",1],["skewY",1]]},"comp-op":{css:"line-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},markers:{file:{css:"marker-file",doc:"An SVG file that this marker shows at each placement. If no file is given, the marker will show an ellipse.","default-value":"","default-meaning":"An ellipse or circle, if width equals height",type:"uri"},opacity:{css:"marker-opacity",doc:"The overall opacity of the marker, if set, overrides both the opacity of both the fill and stroke","default-value":1,"default-meaning":"The stroke-opacity and fill-opacity will be used",type:"float"},"fill-opacity":{css:"marker-fill-opacity",doc:"The fill opacity of the marker","default-value":1,"default-meaning":"opaque",type:"float"},stroke:{css:"marker-line-color",doc:"The color of the stroke around a marker shape.","default-value":"black",type:"color"},"stroke-width":{css:"marker-line-width",doc:"The width of the stroke around a marker shape, in pixels. This is positioned on the boundary, so high values can cover the area itself.",type:"float"},"stroke-opacity":{css:"marker-line-opacity","default-value":1,"default-meaning":"opaque",doc:"The opacity of a line",type:"float"},placement:{css:"marker-placement",type:["point","line","interior"],"default-value":"point","default-meaning":"Place markers at the center point (centroid) of the geometry",doc:"Attempt to place markers on a point, in the center of a polygon, or if markers-placement:line, then multiple times along a line. 'interior' placement can be used to ensure that points placed on polygons are forced to be inside the polygon interior"},"multi-policy":{css:"marker-multi-policy",type:["each","whole","largest"],"default-value":"each","default-meaning":"If a feature contains multiple geometries and the placement type is either point or interior then a marker will be rendered for each",doc:"A special setting to allow the user to control rendering behavior for 'multi-geometries' (when a feature contains multiple geometries). This setting does not apply to markers placed along lines. The 'each' policy is default and means all geometries will get a marker. The 'whole' policy means that the aggregate centroid between all geometries will be used. The 'largest' policy means that only the largest (by bounding box areas) feature will get a rendered marker (this is how text labeling behaves by default)."},"marker-type":{css:"marker-type",type:["arrow","ellipse"],"default-value":"ellipse",doc:"The default marker-type. If a SVG file is not given as the marker-file parameter, the renderer provides either an arrow or an ellipse (a circle if height is equal to width)"},width:{css:"marker-width","default-value":10,doc:"The width of the marker, if using one of the default types.",type:"expression"},height:{css:"marker-height","default-value":10,doc:"The height of the marker, if using one of the default types.",type:"expression"},fill:{css:"marker-fill","default-value":"blue",doc:"The color of the area of the marker.",type:"color"},"allow-overlap":{css:"marker-allow-overlap",type:"boolean","default-value":!1,doc:"Control whether overlapping markers are shown or hidden.","default-meaning":"Do not allow makers to overlap with each other - overlapping markers will not be shown."},"ignore-placement":{css:"marker-ignore-placement",type:"boolean","default-value":!1,"default-meaning":"do not store the bbox of this geometry in the collision detector cache",doc:"value to control whether the placement of the feature will prevent the placement of other features"},spacing:{css:"marker-spacing",doc:"Space between repeated labels","default-value":100,type:"float"},"max-error":{css:"marker-max-error",type:"float","default-value":.2,doc:"The maximum difference between actual marker placement and the marker-spacing parameter. Setting a high value can allow the renderer to try to resolve placement conflicts with other symbolizers."},transform:{css:"marker-transform",type:"functions",functions:[["matrix",6],["translate",2],["scale",2],["rotate",3],["skewX",1],["skewY",1]],"default-value":"","default-meaning":"No transformation",doc:"SVG transformation definition"},clip:{css:"marker-clip",type:"boolean","default-value":!0,"default-meaning":"geometry will be clipped to map bounds before rendering",doc:"geometries are clipped to map bounds by default for best rendering performance. In some cases users may wish to disable this to avoid rendering artifacts."},smooth:{css:"marker-smooth",type:"float","default-value":0,"default-meaning":"no smoothing",range:"0-1",doc:"Smooths out geometry angles. 0 is no smoothing, 1 is fully smoothed. Values greater than 1 will produce wild, looping geometries."},"geometry-transform":{css:"marker-geometry-transform",type:"functions","default-value":"none","default-meaning":"geometry will not be transformed",doc:"Allows transformation functions to be applied to the geometry.",functions:[["matrix",6],["translate",2],["scale",2],["rotate",3],["skewX",1],["skewY",1]]},"comp-op":{css:"marker-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},shield:{name:{css:"shield-name",type:"expression",serialization:"content",doc:'Value to use for a shield"s text label. Data columns are specified using brackets like [column_name]'},file:{css:"shield-file",required:!0,type:"uri","default-value":"none",doc:"Image file to render behind the shield text"},"face-name":{css:"shield-face-name",type:"string",validate:"font",doc:"Font name and style to use for the shield text","default-value":"",required:!0},"unlock-image":{css:"shield-unlock-image",type:"boolean",doc:"This parameter should be set to true if you are trying to position text beside rather than on top of the shield image","default-value":!1,"default-meaning":"text alignment relative to the shield image uses the center of the image as the anchor for text positioning."},size:{css:"shield-size",type:"float",doc:"The size of the shield text in pixels"},fill:{css:"shield-fill",type:"color",doc:"The color of the shield text"},placement:{css:"shield-placement",type:["point","line","vertex","interior"],"default-value":"point",doc:"How this shield should be placed. Point placement attempts to place it on top of points, line places along lines multiple times per feature, vertex places on the vertexes of polygons, and interior attempts to place inside of polygons."},"avoid-edges":{css:"shield-avoid-edges",doc:"Tell positioning algorithm to avoid labeling near intersection edges.",type:"boolean","default-value":!1},"allow-overlap":{css:"shield-allow-overlap",type:"boolean","default-value":!1,doc:"Control whether overlapping shields are shown or hidden.","default-meaning":"Do not allow shields to overlap with other map elements already placed."},"minimum-distance":{css:"shield-min-distance",type:"float","default-value":0,doc:"Minimum distance to the next shield symbol, not necessarily the same shield."},spacing:{css:"shield-spacing",type:"float","default-value":0,doc:"The spacing between repeated occurrences of the same shield on a line"},"minimum-padding":{css:"shield-min-padding","default-value":0,doc:"Determines the minimum amount of padding that a shield gets relative to other shields",type:"float"},"wrap-width":{css:"shield-wrap-width",type:"unsigned","default-value":0,doc:"Length of a chunk of text in characters before wrapping text"},"wrap-before":{css:"shield-wrap-before",type:"boolean","default-value":!1,doc:"Wrap text before wrap-width is reached. If false, wrapped lines will be a bit longer than wrap-width."},"wrap-character":{css:"shield-wrap-character",type:"string","default-value":" ",doc:"Use this character instead of a space to wrap long names."},"halo-fill":{css:"shield-halo-fill",type:"color","default-value":"#FFFFFF","default-meaning":"white",doc:"Specifies the color of the halo around the text."},"halo-radius":{css:"shield-halo-radius",doc:"Specify the radius of the halo in pixels","default-value":0,"default-meaning":"no halo",type:"float"},"character-spacing":{css:"shield-character-spacing",type:"unsigned","default-value":0,doc:"Horizontal spacing between characters (in pixels). Currently works for point placement only, not line placement."},"line-spacing":{css:"shield-line-spacing",doc:"Vertical spacing between lines of multiline labels (in pixels)",type:"unsigned"},dx:{css:"shield-text-dx",type:"float",doc:"Displace text within shield by fixed amount, in pixels, +/- along the X axis.  A positive value will shift the text right","default-value":0},dy:{css:"shield-text-dy",type:"float",doc:"Displace text within shield by fixed amount, in pixels, +/- along the Y axis.  A positive value will shift the text down","default-value":0},"shield-dx":{css:"shield-dx",type:"float",doc:"Displace shield by fixed amount, in pixels, +/- along the X axis.  A positive value will shift the text right","default-value":0},"shield-dy":{css:"shield-dy",type:"float",doc:"Displace shield by fixed amount, in pixels, +/- along the Y axis.  A positive value will shift the text down","default-value":0},opacity:{css:"shield-opacity",type:"float",doc:"(Default 1.0) - opacity of the image used for the shield","default-value":1},"text-opacity":{css:"shield-text-opacity",type:"float",doc:"(Default 1.0) - opacity of the text placed on top of the shield","default-value":1},"horizontal-alignment":{css:"shield-horizontal-alignment",type:["left","middle","right","auto"],doc:"The shield's horizontal alignment from its centerpoint","default-value":"auto"},"vertical-alignment":{css:"shield-vertical-alignment",type:["top","middle","bottom","auto"],doc:"The shield's vertical alignment from its centerpoint","default-value":"middle"},"text-transform":{css:"shield-text-transform",type:["none","uppercase","lowercase","capitalize"],doc:"Transform the case of the characters","default-value":"none"},"justify-alignment":{css:"shield-justify-alignment",type:["left","center","right","auto"],doc:"Define how text in a shield's label is justified","default-value":"auto"},clip:{css:"shield-clip",type:"boolean","default-value":!0,"default-meaning":"geometry will be clipped to map bounds before rendering",doc:"geometries are clipped to map bounds by default for best rendering performance. In some cases users may wish to disable this to avoid rendering artifacts."},"comp-op":{css:"shield-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},"line-pattern":{file:{css:"line-pattern-file",type:"uri","default-value":"none",required:!0,doc:"An image file to be repeated and warped along a line"},clip:{css:"line-pattern-clip",type:"boolean","default-value":!0,"default-meaning":"geometry will be clipped to map bounds before rendering",doc:"geometries are clipped to map bounds by default for best rendering performance. In some cases users may wish to disable this to avoid rendering artifacts."},smooth:{css:"line-pattern-smooth",type:"float","default-value":0,"default-meaning":"no smoothing",range:"0-1",doc:"Smooths out geometry angles. 0 is no smoothing, 1 is fully smoothed. Values greater than 1 will produce wild, looping geometries."},"geometry-transform":{css:"line-pattern-geometry-transform",type:"functions","default-value":"none","default-meaning":"geometry will not be transformed",doc:"Allows transformation functions to be applied to the geometry.",functions:[["matrix",6],["translate",2],["scale",2],["rotate",3],["skewX",1],["skewY",1]]},"comp-op":{css:"line-pattern-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},"polygon-pattern":{file:{css:"polygon-pattern-file",type:"uri","default-value":"none",required:!0,doc:"Image to use as a repeated pattern fill within a polygon"},alignment:{css:"polygon-pattern-alignment",type:["local","global"],"default-value":"local",doc:"Specify whether to align pattern fills to the layer or to the map."},gamma:{css:"polygon-pattern-gamma",type:"float","default-value":1,"default-meaning":"fully antialiased",range:"0-1",doc:"Level of antialiasing of polygon pattern edges"},opacity:{css:"polygon-pattern-opacity",type:"float",doc:"(Default 1.0) - Apply an opacity level to the image used for the pattern","default-value":1,"default-meaning":"The image is rendered without modifications"},clip:{css:"polygon-pattern-clip",type:"boolean","default-value":!0,"default-meaning":"geometry will be clipped to map bounds before rendering",doc:"geometries are clipped to map bounds by default for best rendering performance. In some cases users may wish to disable this to avoid rendering artifacts."},smooth:{css:"polygon-pattern-smooth",type:"float","default-value":0,"default-meaning":"no smoothing",range:"0-1",doc:"Smooths out geometry angles. 0 is no smoothing, 1 is fully smoothed. Values greater than 1 will produce wild, looping geometries."},"geometry-transform":{css:"polygon-pattern-geometry-transform",type:"functions","default-value":"none","default-meaning":"geometry will not be transformed",doc:"Allows transformation functions to be applied to the geometry.",functions:[["matrix",6],["translate",2],["scale",2],["rotate",3],["skewX",1],["skewY",1]]},"comp-op":{css:"polygon-pattern-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},raster:{opacity:{css:"raster-opacity","default-value":1,"default-meaning":"opaque",type:"float",doc:"The opacity of the raster symbolizer on top of other symbolizers."},"filter-factor":{css:"raster-filter-factor","default-value":-1,"default-meaning":"Allow the datasource to choose appropriate downscaling.",type:"float",doc:"This is used by the Raster or Gdal datasources to pre-downscale images using overviews. Higher numbers can sometimes cause much better scaled image output, at the cost of speed."},scaling:{css:"raster-scaling",type:["near","fast","bilinear","bilinear8","bicubic","spline16","spline36","hanning","hamming","hermite","kaiser","quadric","catrom","gaussian","bessel","mitchell","sinc","lanczos","blackman"],"default-value":"near",doc:"The scaling algorithm used to making different resolution versions of this raster layer. Bilinear is a good compromise between speed and accuracy, while lanczos gives the highest quality."},"mesh-size":{css:"raster-mesh-size","default-value":16,"default-meaning":"Reprojection mesh will be 1/16 of the resolution of the source image",type:"unsigned",doc:"A reduced resolution mesh is used for raster reprojection, and the total image size is divided by the mesh-size to determine the quality of that mesh. Values for mesh-size larger than the default will result in faster reprojection but might lead to distortion."},"comp-op":{css:"raster-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},point:{file:{css:"point-file",type:"uri",required:!1,"default-value":"none",doc:"Image file to represent a point"},"allow-overlap":{css:"point-allow-overlap",type:"boolean","default-value":!1,doc:"Control whether overlapping points are shown or hidden.","default-meaning":"Do not allow points to overlap with each other - overlapping markers will not be shown."},"ignore-placement":{css:"point-ignore-placement",type:"boolean","default-value":!1,"default-meaning":"do not store the bbox of this geometry in the collision detector cache",doc:"value to control whether the placement of the feature will prevent the placement of other features"},opacity:{css:"point-opacity",type:"float","default-value":1,"default-meaning":"Fully opaque",doc:"A value from 0 to 1 to control the opacity of the point"},placement:{css:"point-placement",type:["centroid","interior"],doc:"How this point should be placed. Centroid calculates the geometric center of a polygon, which can be outside of it, while interior always places inside of a polygon.","default-value":"centroid"},transform:{css:"point-transform",type:"functions",functions:[["matrix",6],["translate",2],["scale",2],["rotate",3],["skewX",1],["skewY",1]],"default-value":"","default-meaning":"No transformation",doc:"SVG transformation definition"},"comp-op":{css:"point-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},text:{name:{css:"text-name",type:"expression",required:!0,"default-value":"",serialization:"content",doc:"Value to use for a text label. Data columns are specified using brackets like [column_name]"},"face-name":{css:"text-face-name",type:"string",validate:"font",doc:"Font name and style to render a label in",required:!0},size:{css:"text-size",type:"float","default-value":10,doc:"Text size in pixels"},"text-ratio":{css:"text-ratio",doc:"Define the amount of text (of the total) present on successive lines when wrapping occurs","default-value":0,type:"unsigned"},"wrap-width":{css:"text-wrap-width",doc:"Length of a chunk of text in characters before wrapping text","default-value":0,type:"unsigned"},"wrap-before":{css:"text-wrap-before",type:"boolean","default-value":!1,doc:"Wrap text before wrap-width is reached. If false, wrapped lines will be a bit longer than wrap-width."},"wrap-character":{css:"text-wrap-character",type:"string","default-value":" ",doc:"Use this character instead of a space to wrap long text."},spacing:{css:"text-spacing",type:"unsigned",doc:"Distance between repeated text labels on a line (aka. label-spacing)"},"character-spacing":{css:"text-character-spacing",type:"float","default-value":0,doc:"Horizontal spacing adjustment between characters in pixels"},"line-spacing":{css:"text-line-spacing","default-value":0,type:"unsigned",doc:"Vertical spacing adjustment between lines in pixels"},"label-position-tolerance":{css:"text-label-position-tolerance","default-value":0,type:"unsigned",doc:"Allows the label to be displaced from its ideal position by a number of pixels (only works with placement:line)"},"max-char-angle-delta":{css:"text-max-char-angle-delta",type:"float","default-value":"22.5",doc:"The maximum angle change, in degrees, allowed between adjacent characters in a label. This value internally is converted to radians to the default is 22.5*math.pi/180.0. The higher the value the fewer labels will be placed around around sharp corners."},fill:{css:"text-fill",doc:"Specifies the color for the text","default-value":"#000000",type:"color"},opacity:{css:"text-opacity",doc:"A number from 0 to 1 specifying the opacity for the text","default-value":1,"default-meaning":"Fully opaque",type:"float"},"halo-fill":{css:"text-halo-fill",type:"color","default-value":"#FFFFFF","default-meaning":"white",doc:"Specifies the color of the halo around the text."},"halo-radius":{css:"text-halo-radius",doc:"Specify the radius of the halo in pixels","default-value":0,"default-meaning":"no halo",type:"float"},dx:{css:"text-dx",type:"float",doc:"Displace text by fixed amount, in pixels, +/- along the X axis.  A positive value will shift the text right","default-value":0},dy:{css:"text-dy",type:"float",doc:"Displace text by fixed amount, in pixels, +/- along the Y axis.  A positive value will shift the text down","default-value":0},"vertical-alignment":{css:"text-vertical-alignment",type:["top","middle","bottom","auto"],doc:"Position of label relative to point position.","default-value":"auto","default-meaning":'Default affected by value of dy; "bottom" for dy>0, "top" for dy<0.'},"avoid-edges":{css:"text-avoid-edges",doc:"Tell positioning algorithm to avoid labeling near intersection edges.","default-value":!1,type:"boolean"},"minimum-distance":{css:"text-min-distance",doc:"Minimum permitted distance to the next text symbolizer.",type:"float"},"minimum-padding":{css:"text-min-padding",doc:"Determines the minimum amount of padding that a text symbolizer gets relative to other text",type:"float"},"minimum-path-length":{css:"text-min-path-length",type:"float","default-value":0,"default-meaning":"place labels on all paths",doc:"Place labels only on paths longer than this value."},"allow-overlap":{css:"text-allow-overlap",type:"boolean","default-value":!1,doc:"Control whether overlapping text is shown or hidden.","default-meaning":"Do not allow text to overlap with other text - overlapping markers will not be shown."},orientation:{css:"text-orientation",type:"expression",doc:"Rotate the text."},placement:{css:"text-placement",type:["point","line","vertex","interior"],"default-value":"point",doc:"Control the style of placement of a point versus the geometry it is attached to."},"placement-type":{css:"text-placement-type",doc:'Re-position and/or re-size text to avoid overlaps. "simple" for basic algorithm (using text-placements string,) "dummy" to turn this feature off.',type:["dummy","simple"],"default-value":"dummy"},placements:{css:"text-placements",type:"string","default-value":"",doc:'If "placement-type" is set to "simple", use this "POSITIONS,[SIZES]" string. An example is `text-placements: "E,NE,SE,W,NW,SW";` '},"text-transform":{css:"text-transform",type:["none","uppercase","lowercase","capitalize"],doc:"Transform the case of the characters","default-value":"none"},"horizontal-alignment":{css:"text-horizontal-alignment",type:["left","middle","right","auto"],doc:"The text's horizontal alignment from its centerpoint","default-value":"auto"},"justify-alignment":{css:"text-align",type:["left","right","center","auto"],doc:"Define how text is justified","default-value":"auto","default-meaning":"Auto alignment means that text will be centered by default except when using the `placement-type` parameter - in that case either right or left justification will be used automatically depending on where the text could be fit given the `text-placements` directives"},clip:{css:"text-clip",type:"boolean","default-value":!0,"default-meaning":"geometry will be clipped to map bounds before rendering",doc:"geometries are clipped to map bounds by default for best rendering performance. In some cases users may wish to disable this to avoid rendering artifacts."},"comp-op":{css:"text-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},building:{fill:{css:"building-fill","default-value":"#FFFFFF",doc:"The color of the buildings walls.",type:"color"},"fill-opacity":{css:"building-fill-opacity",type:"float",doc:"The opacity of the building as a whole, including all walls.","default-value":1},height:{css:"building-height",doc:"The height of the building in pixels.",type:"expression","default-value":"0"}}},colors:{aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50],transparent:[0,0,0,0]},filter:{value:["true","false","null","point","linestring","polygon","collection"]}};function mB(t){"@babel/helpers - typeof";return(mB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function bB(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,gB(n.key),n)}}function gB(t){var e=function(t,e){if("object"!=mB(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=mB(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==mB(e)?e:e+""}dB.mapnik_reference={version:{latest:vB,"2.1.1":vB}},dB.Tree={},dB.Tree.operate=function(t,e,r){switch(t){case"+":return e+r;case"-":return e-r;case"*":return e*r;case"%":return e%r;case"/":return e/r}},dB.Tree.functions={rgb:function(t,e,r){return this.rgba(t,e,r,1)},rgba:function(t,e,r,n){var o=this,i=[t,e,r].map(function(t){return o.number(t)});return n=o.number(n),i.some(isNaN)||isNaN(n)?null:new dB.Tree.Color(i,n)},stop:function(t){var e,r;return arguments.length>1&&(e=arguments[1]),arguments.length>2&&(r=arguments[2]),{is:"tag",val:t,color:e,mode:r,toString:function(n){return'\n\t<stop value="'+t.ev(n)+'"'+(e?' color="'+e.ev(n)+'" ':"")+(r?' mode="'+r.ev(n)+'" ':"")+"/>"}}},hsl:function(t,e,r){return this.hsla(t,e,r,1)},hsla:function(t,e,r,n){if([t=this.number(t)%360/360,e=this.number(e),r=this.number(r),n=this.number(n)].some(isNaN))return null;var o=r<=.5?r*(e+1):r+e-r*e,i=2*r-o;return this.rgba(255*a(t+1/3),255*a(t),255*a(t-1/3),n);function a(t){return 6*(t=t<0?t+1:t>1?t-1:t)<1?i+(o-i)*t*6:2*t<1?o:3*t<2?i+(o-i)*(2/3-t)*6:i}},hue:function(t){return"toHSL"in t?new dB.Tree.Dimension(Math.round(t.toHSL().h)):null},saturation:function(t){return"toHSL"in t?new dB.Tree.Dimension(Math.round(100*t.toHSL().s),"%"):null},lightness:function(t){return"toHSL"in t?new dB.Tree.Dimension(Math.round(100*t.toHSL().l),"%"):null},alpha:function(t){return"toHSL"in t?new dB.Tree.Dimension(t.toHSL().a):null},saturate:function(t,e){if(!("toHSL"in t))return null;var r=t.toHSL();return r.s+=e.value/100,r.s=this.clamp(r.s),this.hsla_simple(r)},desaturate:function(t,e){if(!("toHSL"in t))return null;var r=t.toHSL();return r.s-=e.value/100,r.s=this.clamp(r.s),this.hsla_simple(r)},lighten:function(t,e){if(!("toHSL"in t))return null;var r=t.toHSL();return r.l+=e.value/100,r.l=this.clamp(r.l),this.hsla_simple(r)},darken:function(t,e){if(!("toHSL"in t))return null;var r=t.toHSL();return r.l-=e.value/100,r.l=this.clamp(r.l),this.hsla_simple(r)},fadein:function(t,e){if(!("toHSL"in t))return null;var r=t.toHSL();return r.a+=e.value/100,r.a=this.clamp(r.a),this.hsla_simple(r)},fadeout:function(t,e){if(!("toHSL"in t))return null;var r=t.toHSL();return r.a-=e.value/100,r.a=this.clamp(r.a),this.hsla_simple(r)},spin:function(t,e){if(!("toHSL"in t))return null;var r=t.toHSL(),n=(r.h+e.value)%360;return r.h=n<0?360+n:n,this.hsla_simple(r)},replace:function(t,e,r){return"field"===t.is?t.toString+".replace("+e.toString()+", "+r.toString()+")":t.replace(e,r)},mix:function(t,e,r){var n=r.value/100,o=2*n-1,i=t.toHSL().a-e.toHSL().a,a=((o*i==-1?o:(o+i)/(1+o*i))+1)/2,s=1-a,u=[t.rgb[0]*a+e.rgb[0]*s,t.rgb[1]*a+e.rgb[1]*s,t.rgb[2]*a+e.rgb[2]*s],l=t.alpha*n+e.alpha*(1-n);return new dB.Tree.Color(u,l)},greyscale:function(t){return this.desaturate(t,new dB.Tree.Dimension(100))},"%":function(t){for(var e=Array.prototype.slice.call(arguments,1),r=t.value,n=0;n<e.length;n++)r=r.replace(/%s/,e[n].value).replace(/%[da]/,e[n].toString());return r=r.replace(/%%/g,"%"),new dB.Tree.Quoted(r)},hsla_simple:function(t){return this.hsla(t.h,t.s,t.l,t.a)},number:function(t){return t instanceof dB.Tree.Dimension?parseFloat("%"===t.unit?t.value/100:t.value):"number"==typeof t?t:NaN},clamp:function(t){return Math.min(1,Math.max(0,t))}},dB.Tree.Call=function(){return hB(function t(e,r,n){fB(this,t),this.is="call",this.name=e,this.args=r,this.index=n},[{key:"ev",value:function(t){for(var e=this.args.map(function(e){return e.ev(t)}),r=0;r<e.length;r++)if("undefined"===e[r].is)return{is:"undefined",value:"undefined"};if(this.name in dB.Tree.functions){if(dB.Tree.functions[this.name].length<=e.length){var n=dB.Tree.functions[this.name].apply(dB.Tree.functions,e);return null===n?(t.error({message:"incorrect arguments given to "+this.name+"()",index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"}):n}return t.error({message:"incorrect number of arguments for "+this.name+"(). "+dB.Tree.functions[this.name].length+" expected.",index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"}}var o=dB.Tree.Reference.mapnikFunctions[this.name];if(void 0===o){var i=lB()(dB.Tree.Reference.mapnikFunctions),a=this.name,s=i.map(function(t){return[t[0],dB.Tree.Reference.editDistance(a,t[0]),t[1]]}).sort(function(t,e){return t[1]-e[1]});return t.error({message:"unknown function "+this.name+"(), did you mean "+s[0][0]+"("+s[0][2]+")",index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"}}return o!==e.length&&-1!==o?(t.error({message:"function "+this.name+"() takes "+o+" arguments and was given "+e.length,index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"}):(this.args=e,this)}},{key:"toString",value:function(t,e){return this.args.length?this.name+"("+this.args.join(",")+")":this.name}}])}(),dB.Tree.Color=function(){return hB(function t(e,r){fB(this,t),this.is="color",Array.isArray(e)?this.rgb=e.slice(0,3):6==e.length?this.rgb=e.match(/.{2}/g).map(function(t){return parseInt(t,16)}):this.rgb=e.split("").map(function(t){return parseInt(t+t,16)}),"number"==typeof r?this.alpha=r:4===e.length?this.alpha=e[3]:this.alpha=1},[{key:"ev",value:function(){return this}},{key:"toString",value:function(){return"rgba("+this.rgb.map(function(t){return Math.round(t)}).concat(this.alpha).join(", ")+")"}},{key:"operate",value:function(t,e,r){var n=[];r instanceof dB.Tree.Color||(r=r.toColor());for(var o=0;o<3;o++)n[o]=dB.Tree.operate(e,this.rgb[o],r.rgb[o]);return new dB.Tree.Color(n)}},{key:"toHSL",value:function(){var t,e,r=this.rgb[0]/255,n=this.rgb[1]/255,o=this.rgb[2]/255,i=this.alpha,a=Math.max(r,n,o),s=Math.min(r,n,o),u=(a+s)/2,l=a-s;if(a===s)t=e=0;else{switch(e=u>.5?l/(2-a-s):l/(a+s),a){case r:t=(n-o)/l+(n<o?6:0);break;case n:t=(o-r)/l+2;break;case o:t=(r-n)/l+4}t/=6}return{h:360*t,s:e,l:u,a:i}}}])}(),dB.Tree.Comment=function(){return hB(function t(e,r){fB(this,t),this.value=e,this.silent=!!r},[{key:"toString",value:function(t){return"\x3c!--"+this.value+"--\x3e"}},{key:"ev",value:function(){return this}}])}(),dB.Tree.Definition=function(){return hB(function t(e,r){fB(this,t),this.elements=e.elements,this.rules=r,this.ruleIndex={};for(var n=0;n<this.rules.length;n++)"zoom"in this.rules[n]&&(this.rules[n]=this.rules[n].clone()),this.rules[n].zoom=e.zoom,this.ruleIndex[this.rules[n].updateID()]=!0;this.filters=e.filters,this.zoom=e.zoom,this.attachment=e.attachment||"__default__",this.specificity=e.specificity()},[{key:"toString",value:function(){for(var t=this.filters.toString(),e=0;e<this.rules.length;e++)t+="\n    "+this.rules[e];return t}},{key:"toJS",value:function(t){var e={},r=this.zoom,n=this.filters.toJS(t),o=[r];function i(r){if(r instanceof dB.Tree.Rule)e[r.name]=e[r.name]||[],n?e[r.name].push("if("+n+"){"+r.value.toJS(t)+"}"):e[r.name].push(r.value.toJS(t));else if(r instanceof dB.Tree.Ruleset){var o=r.toJS(t);for(var i in o)for(var a in e[i]=e[i]||[],o[i])e[i].push(o[i][a])}}for(var a in n&&o.push(n),n=o.join(" && "),this.rules)i(this.rules[a]);return e}}])}(),dB.Tree.Dimension=function(){return hB(function t(e,r,n){fB(this,t),this.is="float",this.physical_units=["m","cm","in","mm","pt","pc"],this.screen_units=["px","%"],this.all_units=["m","cm","in","mm","pt","pc","px","%"],this.densities={m:.0254,mm:25.4,cm:2.54,pt:72,pc:6},this.value=parseFloat(e),this.unit=r||null,this.index=n},[{key:"ev",value:function(t){if(this.unit&&this.all_units.indexOf(this.unit)<0)return t.error({message:"Invalid unit: '"+this.unit+"'",index:this.index}),{is:"undefined",value:"undefined"};if(this.unit&&this.physical_units.indexOf(this.unit)>=0){if(!t.ppi)return t.error({message:"ppi is not set, so metric units can't be used",index:this.index}),{is:"undefined",value:"undefined"};this.value=this.value/this.densities[this.unit]*t.ppi,this.unit="px"}return this}},{key:"toColor",value:function(){return new dB.Tree.Color([this.value,this.value,this.value])}},{key:"round",value:function(){return this.value=Math.round(this.value),this}},{key:"toString",value:function(){return this.value.toString()}},{key:"operate",value:function(t,e,r){return"%"===this.unit&&"%"!==r.unit?(t.error({message:"If two operands differ, the first must not be %",index:this.index}),{is:"undefined",value:"undefined"}):"%"!==this.unit&&"%"===r.unit?"*"===e||"/"===e||"%"===e?(t.error({message:"Percent values can only be added or subtracted from other values",index:this.index}),{is:"undefined",value:"undefined"}):new dB.Tree.Dimension(dB.Tree.operate(e,this.value,this.value*r.value*.01),this.unit):new dB.Tree.Dimension(dB.Tree.operate(e,this.value,r.value),this.unit||r.unit)}}])}(),dB.Tree.Element=function(){return hB(function t(e){fB(this,t),this.value=e.trim(),"#"===this.value[0]&&(this.type="id",this.clean=this.value.replace(/^#/,"")),"."===this.value[0]&&(this.type="class",this.clean=this.value.replace(/^\./,"")),-1!==this.value.indexOf("*")&&(this.type="wildcard")},[{key:"specificity",value:function(){return["id"===this.type?1:0,"class"===this.type?1:0]}},{key:"toString",value:function(){return this.value}}])}(),dB.Tree.Expression=function(){return hB(function t(e){fB(this,t),this.is="expression",this.value=e},[{key:"ev",value:function(t){return this.value.length>1?new dB.Tree.Expression(this.value.map(function(e){return e.ev(t)})):this.value[0].ev(t)}},{key:"toString",value:function(t){return this.value.map(function(e){return e.toString(t)}).join(" ")}}])}(),dB.Tree.Field=function(){return hB(function t(e){fB(this,t),this.is="field",this.value=e||""},[{key:"toString",value:function(){return'["'+this.value.toUpperCase()+'"]'}},{key:"ev",value:function(){return this}}])}(),dB.Tree.Filter=function(){return hB(function t(e,r,n,o,i){fB(this,t),this.ops={"<":[" &lt; ","numeric"],">":[" &gt; ","numeric"],"=":[" = ","both"],"!=":[" != ","both"],"<=":[" &lt;= ","numeric"],">=":[" &gt;= ","numeric"],"=~":[".match(","string",")"]},this.key=e,this.op=r,this.val=n,this.index=o,this.filename=i,this.id=this.key+this.op+this.val},[{key:"ev",value:function(t){return this.key=this.key.ev(t),this.val=this.val.ev(t),this}},{key:"toString",value:function(){return"["+this.id+"]"}}])}(),dB.Tree.Filterset=function(){return hB(function t(){fB(this,t),this.filters={}},[{key:"toJS",value:function(t){function e(t){var e=t.op;"="===e&&(e="==");var r=t.val;void 0!==t._val&&(r=t._val.toString(!0)),t.key&&"scale"===t.key.value?r=+r:"string"!=typeof r&&"object"!==cB(r)||(r="'"+r+"'");var n="attributes";return n+"&&"+n+t.key+"&&"+n+t.key+" "+e+r}var r=[];for(var n in this.filters)r.push(e(this.filters[n]));return r.join(" && ")}},{key:"toString",value:function(){var t=[];for(var e in this.filters)t.push(this.filters[e].id);return t.sort().join("\t")}},{key:"ev",value:function(t){for(var e in this.filters)this.filters[e].ev(t);return this}},{key:"clone",value:function(){var t=new dB.Tree.Filterset;for(var e in this.filters)t.filters[e]=this.filters[e];return t}},{key:"cloneWith",value:function(t){var e=[];for(var r in t.filters){var n=this.addable(t.filters[r]);if(!1===n)return!1;!0===n&&e.push(t.filters[r])}if(!e.length)return null;var o=new dB.Tree.Filterset;for(r in this.filters)o.filters[r]=this.filters[r];for(;r=e.shift();)o.add(r);return o}},{key:"addable",value:function(t){var e=t.key.toString(),r=t.val.toString();switch(r.match(/^[0-9]+(\.[0-9]*)?_match/)&&(r=parseFloat(r)),t.op){case"=":return void 0!==this.filters[e+"="]?this.filters[e+"="].val.toString()==r&&null:void 0===this.filters[e+"!="+r]&&(!(void 0!==this.filters[e+">"]&&this.filters[e+">"].val>=r)&&(!(void 0!==this.filters[e+"<"]&&this.filters[e+"<"].val<=r)&&(!(void 0!==this.filters[e+">="]&&this.filters[e+">="].val>r)&&!(void 0!==this.filters[e+"<="]&&this.filters[e+"<="].val<r))));case"=~":return!0;case"!=":return void 0!==this.filters[e+"="]?this.filters[e+"="].val!==r&&null:void 0!==this.filters[e+"!="+r]?null:void 0!==this.filters[e+">"]&&this.filters[e+">"].val>=r?null:void 0!==this.filters[e+"<"]&&this.filters[e+"<"].val<=r?null:void 0!==this.filters[e+">="]&&this.filters[e+">="].val>r?null:!(void 0!==this.filters[e+"<="]&&this.filters[e+"<="].val<r)||null;case">":return e+"="in this.filters?!(this.filters[e+"="].val<=r)&&null:!(void 0!==this.filters[e+"<"]&&this.filters[e+"<"].val<=r)&&(!(void 0!==this.filters[e+"<="]&&this.filters[e+"<="].val<=r)&&(void 0!==this.filters[e+">"]&&this.filters[e+">"].val>=r?null:!(void 0!==this.filters[e+">="]&&this.filters[e+">="].val>r)||null));case">=":return void 0!==this.filters[e+"="]?!(this.filters[e+"="].val<r)&&null:!(void 0!==this.filters[e+"<"]&&this.filters[e+"<"].val<=r)&&(!(void 0!==this.filters[e+"<="]&&this.filters[e+"<="].val<r)&&(void 0!==this.filters[e+">"]&&this.filters[e+">"].val>=r?null:!(void 0!==this.filters[e+">="]&&this.filters[e+">="].val>=r)||null));case"<":return void 0!==this.filters[e+"="]?!(this.filters[e+"="].val>=r)&&null:!(void 0!==this.filters[e+">"]&&this.filters[e+">"].val>=r)&&(!(void 0!==this.filters[e+">="]&&this.filters[e+">="].val>=r)&&(void 0!==this.filters[e+"<"]&&this.filters[e+"<"].val<=r?null:!(void 0!==this.filters[e+"<="]&&this.filters[e+"<="].val<r)||null));case"<=":return void 0!==this.filters[e+"="]?!(this.filters[e+"="].val>r)&&null:!(void 0!==this.filters[e+">"]&&this.filters[e+">"].val>=r)&&(!(void 0!==this.filters[e+">="]&&this.filters[e+">="].val>r)&&(void 0!==this.filters[e+"<"]&&this.filters[e+"<"].val<=r?null:!(void 0!==this.filters[e+"<="]&&this.filters[e+"<="].val<=r)||null))}}},{key:"conflict",value:function(t){var e=t.key.toString(),r=t.val.toString();return isNaN(parseFloat(r))||(r=parseFloat(r)),("="===t.op&&void 0!==this.filters[e+"="]&&r!=this.filters[e+"="].val.toString()||"!="===t.op&&void 0!==this.filters[e+"="]&&r==this.filters[e+"="].val.toString()||"="===t.op&&void 0!==this.filters[e+"!="]&&r===this.filters[e+"!="].val.toString())&&t.toString()+" added to "+this.toString()+" produces an invalid filter"}},{key:"add",value:function(t,e){var r,n=t.key.toString(),o=t.op,i=this.conflict(t);if(i)return i;if("="===o){for(var a in this.filters)this.filters[a].key===n&&delete this.filters[a];this.filters[n+"="]=t}else if("!="===o)this.filters[n+"!="+t.val]=t;else if("=~"===o)this.filters[n+"=~"+t.val]=t;else if(">"===o){for(var s in this.filters)this.filters[s].key===n&&this.filters[s].val<=t.val&&delete this.filters[s];this.filters[n+">"]=t}else if(">="===o){for(var u in this.filters)r=+this.filters[u].val.toString(),this.filters[u].key===n&&r<t.val&&delete this.filters[u];void 0!==this.filters[n+"!="+t.val]?(delete this.filters[n+"!="+t.val],t.op=">",this.filters[n+">"]=t):this.filters[n+">="]=t}else if("<"===o){for(var l in this.filters)r=+this.filters[l].val.toString(),this.filters[l].key===n&&r>=t.val&&delete this.filters[l];this.filters[n+"<"]=t}else if("<="===o){for(var c in this.filters)r=+this.filters[c].val.toString(),this.filters[c].key===n&&r>t.val&&delete this.filters[c];void 0!==this.filters[n+"!="+t.val]?(delete this.filters[n+"!="+t.val],t.op="<",this.filters[n+"<"]=t):this.filters[n+"<="]=t}}}])}(),dB.Tree.Fontset=hB(function t(e,r){fB(this,t),this.fonts=r,this.name="fontset-"+e.effects.length}),dB.Tree.Invalid=function(){return hB(function t(e,r,n){fB(this,t),this.is="invalid",this.chunk=e,this.index=r,this.type="syntax",this.message=n||"Invalid code: "+this.chunk},[{key:"ev",value:function(t){return t.error({chunk:this.chunk,index:this.index,type:"syntax",message:this.message||"Invalid code: "+this.chunk}),{is:"undefined"}}}])}(),dB.Tree.Keyword=function(){return hB(function t(e){fB(this,t),this.value=e;var r={transparent:"color",true:"boolean",false:"boolean"};this.is=r[e]?r[e]:"keyword"},[{key:"ev",value:function(){return this}},{key:"toString",value:function(){return this.value}}])}(),dB.Tree.Literal=function(){return hB(function t(e){fB(this,t),this.value=e||"",this.is="field"},[{key:"toString",value:function(){return this.value}},{key:"ev",value:function(){return this}}])}(),dB.Tree.Operation=function(){return hB(function t(e,r,n){fB(this,t),this.is="operation",this.op=e.trim(),this.operands=r,this.index=n},[{key:"ev",value:function(t){var e,r=this.operands[0].ev(t),n=this.operands[1].ev(t);return"undefined"===r.is||"undefined"===n.is?{is:"undefined",value:"undefined"}:(r instanceof dB.Tree.Dimension&&n instanceof dB.Tree.Color&&("*"===this.op||"+"===this.op?(e=n,n=r,r=e):t.error({name:"OperationError",message:"Can't substract or divide a color from a number",index:this.index})),r instanceof dB.Tree.Quoted&&n instanceof dB.Tree.Quoted&&"+"!==this.op?(t.error({message:"Can't subtract, divide, or multiply strings.",index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"}):r instanceof dB.Tree.Field||n instanceof dB.Tree.Field||r instanceof dB.Tree.Literal||n instanceof dB.Tree.Literal?"color"===r.is||"color"===n.is?(t.error({message:"Can't subtract, divide, or multiply colors in expressions.",index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"}):new dB.Tree.Literal(r.ev(t).toString(!0)+this.op+n.ev(t).toString(!0)):void 0===r.operate?(t.error({message:"Cannot do math with type "+r.is+".",index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"}):r.operate(t,this.op,n))}}])}(),dB.Tree.Quoted=function(){return hB(function t(e){fB(this,t),this.is="string",this.value=e||""},[{key:"toString",value:function(t){var e=this.value.replace(/&/g,"&amp;"),r=e.replace(/\'/g,"\\'").replace(/\"/g,"&quot;").replace(/</g,"&lt;").replace(/\>/g,"&gt;");return!0===t?"'"+r+"'":e}},{key:"ev",value:function(){return this}},{key:"operate",value:function(t,e,r){return new dB.Tree.Quoted(dB.Tree.operate(e,this.toString(),r.toString(this.contains_field)))}}])}(),dB.Tree.Reference={_validateValue:{font:function(t,e){return!t.validation_data||!t.validation_data.fonts||-1!=t.validation_data.fonts.indexOf(e)}},setData:function(t){this.data=t,this.selector_cache=function(t){var e={};for(var r in t.symbolizers)for(var n in t.symbolizers[r])t.symbolizers[r][n].hasOwnProperty("css")&&(e[t.symbolizers[r][n].css]=[t.symbolizers[r][n],r,n]);return e}(t),this.mapnikFunctions=function(t){var e={};for(var r in t.symbolizers)for(var n in t.symbolizers[r])if("functions"===t.symbolizers[r][n].type)for(var o=0;o<t.symbolizers[r][n].functions.length;o++){var i=t.symbolizers[r][n].functions[o];e[i[0]]=i[1]}return e}(t),this.required_cache=function(t){var e={};for(var r in t.symbolizers)for(var n in e[r]=[],t.symbolizers[r])t.symbolizers[r][n].required&&e[r].push(t.symbolizers[r][n].css);return e}(t)},setVersion:function(t){return!!dB.mapnik_reference.version.hasOwnProperty(t)&&(this.setData(dB.mapnik_reference.version[t]),!0)},selectorData:function(t,e){if(this.selector_cache&&this.selector_cache[t])return this.selector_cache[t][e]},validSelector:function(t){return!!this.selector_cache[t]},selectorName:function(t){return this.selectorData(t,2)},selector:function(t){return this.selectorData(t,0)},symbolizer:function(t){return this.selectorData(t,1)},requiredProperties:function(t,e){var r=this.required_cache[t];for(var n in r)if(!(r[n]in e))return"Property "+r[n]+" required for defining "+t+" styles."},isFont:function(t){return"font"===this.selector(t).validate},editDistance:function(t,e){if(0===t.length)return e.length;if(0===e.length)return t.length;for(var r=[],n=0;n<=e.length;n++)r[n]=[n];for(var o=0;o<=t.length;o++)r[0][o]=o;for(n=1;n<=e.length;n++)for(o=1;o<=t.length;o++)e.charAt(n-1)===t.charAt(o-1)?r[n][o]=r[n-1][o-1]:r[n][o]=Math.min(r[n-1][o-1]+1,Math.min(r[n][o-1]+1,r[n-1][o]+1));return r[e.length][t.length]},validValue:function(t,e,r){var n;if(this.selector(e)){if("keyword"===r.value[0].is)return function(t,e){return"object"===cB(this.selector(e).type)?-1!==this.selector(e).type.indexOf(t.value[0].value):"string"===this.selector(e).type}(r,e);if("undefined"===r.value[0].is)return!0;if("numbers"===this.selector(e).type){for(n in r.value)if("float"!==r.value[n].is)return!1;return!0}if("tags"===this.selector(e).type){if(!r.value)return!1;if(!r.value[0].value)return"tag"===r.value[0].is;for(n=0;n<r.value[0].value.length;n++)if("tag"!==r.value[0].value[n].is)return!1;return!0}if("functions"==this.selector(e).type)return function(t,e){if("string"===t.value[0].is)return!0;for(var r in t.value)for(var n in t.value[r].value){if("call"!==t.value[r].value[n].is)return!1;var o=find(this.selector(e).functions,function(e){return e[0]===t.value[r].value[n].name});if(!(o&&-1===o[1]||o&&o[1]===t.value[r].value[n].args.length))return!1}return!0}(r,e);if("expression"===this.selector(e).type)return!0;if("unsigned"===this.selector(e).type)return"float"===r.value[0].is&&(r.value[0].round(),!0);if(this.selector(e).validate){for(n=0;n<r.value.length;n++)if(this.selector(e).type===r.value[n].is&&this._validateValue[this.selector(e).validate](t,r.value[n].value))return!0;return!1}return this.selector(e).type===r.value[0].is}return!1}},dB.Tree.Reference.setVersion("latest"),dB.Tree.Rule=function(){return hB(function t(e,r,n,o){fB(this,t),this.is="rule";var i=e.split("/");this.name=i.pop(),this.instance=i.length?i[0]:"__default__",this.value=r instanceof dB.Tree.Value?r:new dB.Tree.Value([r]),this.index=n,this.symbolizer=dB.Tree.Reference.symbolizer(this.name),this.filename=o,this.variable="@"===e.charAt(0)},[{key:"clone",value:function(){var t=Object.create(dB.Tree.Rule.prototype);return t.name=this.name,t.value=this.value,t.index=this.index,t.instance=this.instance,t.symbolizer=this.symbolizer,t.filename=this.filename,t.variable=this.variable,t}},{key:"updateID",value:function(){return this.id=this.zoom+"#"+this.instance+"#"+this.name}},{key:"toString",value:function(){return"["+dB.Tree.Zoom.toString(this.zoom)+"] "+this.name+": "+this.value}},{key:"ev",value:function(t){return new dB.Tree.Rule(this.name,this.value.ev(t),this.index,this.filename)}}])}(),dB.Tree.Ruleset=function(){return hB(function t(e,r){fB(this,t),this.is="ruleset",this.selectors=e,this.rules=r,this._lookups={}},[{key:"ev",value:function(t){var e,r,n=new dB.Tree.Ruleset(this.selectors,this.rules.slice(0));for(n.root=this.root,t.frames.unshift(n),e=0;e<n.rules.length;e++)r=n.rules[e],n.rules[e]=r.ev?r.ev(t):r;return t.frames.shift(),n}},{key:"match",value:function(t){return!t||0===t.length}},{key:"variables",value:function(){return this._variables?this._variables:this._variables=this.rules.reduce(function(t,e){return e instanceof dB.Tree.Rule&&!0===e.variable&&(t[e.name]=e),t},{})}},{key:"variable",value:function(t){return this.variables()[t]}},{key:"rulesets",value:function(){return this._rulesets?this._rulesets:this._rulesets=this.rules.filter(function(t){return t instanceof dB.Tree.Ruleset})}},{key:"find",value:function(t,e){e=e||this;var r=[],n=t.toString();return n in this._lookups?this._lookups[n]:(this.rulesets().forEach(function(n){if(n!==e)for(var o=0;o<n.selectors.length;o++)if(t.match(n.selectors[o])){t.elements.length>1?Array.prototype.push.apply(r,n.find(new dB.Tree.Selector(null,null,t.elements.slice(1)),e)):r.push(n);break}}),this._lookups[n]=r)}},{key:"evZooms",value:function(t){for(var e=0;e<this.selectors.length;e++){for(var r=dB.Tree.Zoom.all,n=0;n<this.selectors[e].zoom.length;n++)r=this.selectors[e].zoom[n].ev(t).zoom;this.selectors[e].zoom=r}}},{key:"flatten",value:function(t,e,r){var n,o,i=[];for(0===this.selectors.length&&(r.frames=r.frames.concat(this.rules)),this.evZooms(r),n=0;n<this.selectors.length;n++){var a=this.selectors[n];if(a.filters)if(e.length)for(o=0;o<e.length;o++){var s=e[o],u=s.filters.cloneWith(a.filters);if(null===u){if(s.zoom===a.zoom&&s.attachment===a.attachment&&s.elements.join()===a.elements.join()){i.push(s);continue}u=s.filters}else if(!u)continue;var l=Object.create(dB.Tree.Selector.prototype);l.filters=u,l.zoom=a.zoom,l.elements=s.elements.concat(a.elements),s.attachment&&a.attachment?l.attachment=s.attachment+"/"+a.attachment:l.attachment=a.attachment||s.attachment,l.conditions=s.conditions+a.conditions,l.index=a.index,i.push(l)}else i.push(a)}var c=[];for(n=0;n<this.rules.length;n++){var f=this.rules[n];f instanceof dB.Tree.Ruleset?f.flatten(t,i,r):f instanceof dB.Tree.Rule?c.push(f):f instanceof dB.Tree.Invalid&&r.error(f)}var p=!!c.length&&c[0].index;for(n=0;n<i.length;n++)!1!==p&&(i[n].index=p),t.push(new dB.Tree.Definition(i[n],c.slice()));return t}}])}(),dB.Tree.Selector=function(){return hB(function t(e,r,n,o,i,a){fB(this,t),this.elements=n||[],this.attachment=o,this.filters=e||{},this.zoom=void 0!==r?r:dB.Tree.Zoom.all,this.conditions=i,this.index=a},[{key:"specificity",value:function(){return this.elements.reduce(function(t,e){var r=e.specificity();return t[0]+=r[0],t[1]+=r[1],t},[0,0,this.conditions,this.index])}}])}(),dB.Tree.URL=function(){return hB(function t(e,r){fB(this,t),this.is="uri",this.value=e,this.paths=r},[{key:"toString",value:function(){return this.value.toString()}},{key:"ev",value:function(t){return new dB.Tree.URL(this.value.ev(t),this.paths)}}])}(),dB.Tree.Value=function(){return hB(function t(e){fB(this,t),this.is="value",this.value=e},[{key:"ev",value:function(t){return 1===this.value.length?this.value[0].ev(t):new dB.Tree.Value(this.value.map(function(e){return e.ev(t)}))}},{key:"toJS",value:function(t){var e=this.ev(t),r=e.toString();return"color"===e.is||"uri"===e.is||"string"===e.is||"keyword"===e.is?r="'"+r+"'":"field"===e.is?r=r.replace(/\[(.*)\]/g,"attributes['_match1']"):e.value&&"object"===cB(e.value)&&(r="["+r+"]"),"_value = "+r+";"}},{key:"toString",value:function(t,e,r,n){return this.value.map(function(e){return e.toString(t,n)}).join(r||", ")}},{key:"clone",value:function(){var t=Object.create(dB.Tree.Value.prototype);return Array.isArray(t)?t.value=this.value.slice():t.value=this.value,t.is=this.is,t}}])}(),dB.Tree.Variable=function(){return hB(function t(e,r,n){fB(this,t),this.is="variable",this.name=e,this.index=r,this.filename=n},[{key:"toString",value:function(){return this.name}},{key:"ev",value:function(t){if(this._css)return this._css;var e=t.frames.filter(function(t){return t.name===this.name}.bind(this));return e.length?e[0].value.ev(t):(t.error({message:"variable "+this.name+" is undefined",index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"})}}])}(),dB.Tree.Zoom=function(){return hB(function t(e,r,n){fB(this,t),this.op=e,this.value=r,this.index=n},[{key:"setZoom",value:function(t){return this.zoom=t,this}},{key:"ev",value:function(t){var e=parseInt(this.value.ev(t).toString(),10);switch((e>dB.Tree.Zoom.maxZoom||e<0)&&t.error({message:"Only zoom levels between 0 and "+dB.Tree.Zoom.maxZoom+" supported.",index:this.index}),this.op){case"=":return this.zoom="zoom && zoom === "+e,this;case">":this.zoom="zoom && zoom > "+e;break;case">=":this.zoom="zoom && zoom >= "+e;break;case"<":this.zoom="zoom && zoom < "+e;break;case"<=":this.zoom="zoom && zoom <= "+e}return this}},{key:"toString",value:function(){for(var t="",e=0;e<=dB.Tree.Zoom.maxZoom;e++)t+=this.zoom&1<<e?"X":".";return t}}])}(),dB.Tree.Zoom.all=23,dB.Tree.Zoom.maxZoom=22,dB.Tree.Zoom.ranges={0:1e9,1:5e8,2:2e8,3:1e8,4:5e7,5:25e6,6:125e5,7:65e5,8:3e6,9:15e5,10:75e4,11:4e5,12:2e5,13:1e5,14:5e4,15:25e3,16:12500,17:5e3,18:2500,19:1500,20:750,21:500,22:250,23:100};var SB=function(t,e,r){return e&&bB(t.prototype,e),r&&bB(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},this.fill=!0,this.fillColor="#000000",this.fillOpacity=1,this.stroke=!1,this.strokeColor="#000000",this.strokeOpacity=1,this.strokeWidth=1,this.strokeLinecap="butt",this.strokeLineJoin="miter",this.strokeDashstyle="solid",this.pointRadius=6,this.shadowBlur=0,this.shadowColor="#000000",this.shadowOffsetX=0,this.shadowOffsetY=0,this.label="",this.labelRect=!1,this.fontColor="",this.fontSize=12,this.fontStyle="normal",this.fontVariant="normal",this.fontWeight="normal",this.fontFamily="arial,sans-serif",this.labelPosition="top",this.labelAlign="center",this.labelBaseline="middle",this.labelXOffset=0,this.labelYOffset=0,Tt.extend(this,e)});function wB(t){"@babel/helpers - typeof";return(wB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _B(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,OB(n.key),n)}}function OB(t){var e=function(t,e){if("object"!=wB(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=wB(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==wB(e)?e:e+""}var EB=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.refOriginalPosition=[0,0],this.refDataID=null,this.isHoverByRefDataID=!1,this.refDataHoverGroup=null,this.dataInfo=null,this.clickable=!0,this.hoverable=!0,this.style=null,this.highlightStyle={},this.CLASS_NAME="SuperMap.Feature.ShapeParameters"},(e=[{key:"destroy",value:function(){this.refOriginalPosition=null,this.refDataID=null,this.isHoverByRefDataID=null,this.refDataHoverGroup=null,this.dataInfo=null,this.clickable=null,this.hoverable=null,this.style=null,this.highlightStyle=null}}])&&_B(t.prototype,e),r&&_B(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function PB(t){"@babel/helpers - typeof";return(PB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function xB(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,TB(n.key),n)}}function TB(t){var e=function(t,e){if("object"!=PB(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=PB(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==PB(e)?e:e+""}function CB(t,e,r){return e=AB(e),function(t,e){if(e&&("object"===PB(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],AB(t).constructor):e.apply(t,r))}function kB(){return(kB="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=AB(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function AB(t){return(AB=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function jB(t,e){return(jB=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var NB=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=CB(this,e,[t,r])).x=isNaN(t)?0:t,n.y=isNaN(r)?0:r,n.r=6,n.CLASS_NAME="SuperMap.Feature.ShapeParameters.Point",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&jB(t,e)}(e,EB),r=e,(n=[{key:"destroy",value:function(){this.x=null,this.y=null,this.r=null,kB(AB(e.prototype),"destroy",this).call(this)}}])&&xB(r.prototype,n),o&&xB(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function IB(t){"@babel/helpers - typeof";return(IB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function MB(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,RB(n.key),n)}}function RB(t){var e=function(t,e){if("object"!=IB(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=IB(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==IB(e)?e:e+""}function LB(t,e,r){return e=BB(e),function(t,e){if(e&&("object"===IB(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],BB(t).constructor):e.apply(t,r))}function DB(){return(DB="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=BB(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function BB(t){return(BB=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function FB(t,e){return(FB=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var UB=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=LB(this,e,[t])).pointList=t,r.CLASS_NAME="SuperMap.Feature.ShapeParameters.Line",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&FB(t,e)}(e,EB),r=e,(n=[{key:"destroy",value:function(){this.pointList=null,DB(BB(e.prototype),"destroy",this).call(this)}}])&&MB(r.prototype,n),o&&MB(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function GB(t){"@babel/helpers - typeof";return(GB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function VB(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,zB(n.key),n)}}function zB(t){var e=function(t,e){if("object"!=GB(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=GB(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==GB(e)?e:e+""}function HB(t,e,r){return e=JB(e),function(t,e){if(e&&("object"===GB(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],JB(t).constructor):e.apply(t,r))}function qB(){return(qB="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=JB(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function JB(t){return(JB=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function WB(t,e){return(WB=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var KB=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=HB(this,e,[t])).pointList=t,r.holePolygonPointLists=null,r.CLASS_NAME="SuperMap.Feature.ShapeParameters.Polygon",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&WB(t,e)}(e,EB),r=e,(n=[{key:"destroy",value:function(){this.pointList=null,this.holePolygonPointLists=null,qB(JB(e.prototype),"destroy",this).call(this)}}])&&VB(r.prototype,n),o&&VB(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function YB(t){"@babel/helpers - typeof";return(YB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function QB(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,XB(n.key),n)}}function XB(t){var e=function(t,e){if("object"!=YB(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=YB(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==YB(e)?e:e+""}function ZB(t,e,r){return e=tF(e),function(t,e){if(e&&("object"===YB(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],tF(t).constructor):e.apply(t,r))}function $B(){return($B="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=tF(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function tF(t){return(tF=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function eF(t,e){return(eF=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var rF=function(t){function e(t,r,n,o){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(i=ZB(this,e,[t,r,n,o])).x=isNaN(t)?0:t,i.y=isNaN(t)?0:r,i.width=isNaN(n)?0:n,i.height=isNaN(o)?0:o,i.CLASS_NAME="SuperMap.Feature.ShapeParameters.Rectangle",i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&eF(t,e)}(e,EB),r=e,(n=[{key:"destroy",value:function(){this.x=null,this.y=null,this.width=null,this.height=null,$B(tF(e.prototype),"destroy",this).call(this)}}])&&QB(r.prototype,n),o&&QB(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function nF(t){"@babel/helpers - typeof";return(nF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function oF(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,iF(n.key),n)}}function iF(t){var e=function(t,e){if("object"!=nF(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=nF(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==nF(e)?e:e+""}function aF(t,e,r){return e=uF(e),function(t,e){if(e&&("object"===nF(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],uF(t).constructor):e.apply(t,r))}function sF(){return(sF="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=uF(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function uF(t){return(uF=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function lF(t,e){return(lF=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var cF=function(t){function e(t,r,n,o,i,a,s){var u;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(u=aF(this,e,[t,r,n,o,i,a,s])).x=isNaN(t)?0:t,u.y=isNaN(r)?0:r,u.r=isNaN(n)?0:n,u.startAngle=isNaN(o)?0:o,u.endAngle=isNaN(i)?0:i,u.r0=isNaN(a)?0:a,u.clockWise=s,u.CLASS_NAME="SuperMap.Feature.ShapeParameters.Sector",u}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&lF(t,e)}(e,EB),r=e,(n=[{key:"destroy",value:function(){this.x=null,this.y=null,this.r=null,this.startAngle=null,this.endAngle=null,this.r0=null,this.clockWise=null,sF(uF(e.prototype),"destroy",this).call(this)}}])&&oF(r.prototype,n),o&&oF(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function fF(t){"@babel/helpers - typeof";return(fF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function pF(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,hF(n.key),n)}}function hF(t){var e=function(t,e){if("object"!=fF(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=fF(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==fF(e)?e:e+""}function yF(t,e,r){return e=vF(e),function(t,e){if(e&&("object"===fF(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],vF(t).constructor):e.apply(t,r))}function dF(){return(dF="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=vF(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function vF(t){return(vF=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function mF(t,e){return(mF=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var bF=function(t){function e(t,r,n){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(o=yF(this,e,[t,r,n])).x=t,o.y=r,o.text=n,o.CLASS_NAME="SuperMap.Feature.ShapeParameters.Label",o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&mF(t,e)}(e,EB),r=e,(n=[{key:"destroy",value:function(){this.x=null,this.y=null,this.text=null,dF(vF(e.prototype),"destroy",this).call(this)}}])&&pF(r.prototype,n),o&&pF(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function gF(t){"@babel/helpers - typeof";return(gF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function SF(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,wF(n.key),n)}}function wF(t){var e=function(t,e){if("object"!=gF(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=gF(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==gF(e)?e:e+""}function _F(t,e,r){return e=EF(e),function(t,e){if(e&&("object"===gF(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],EF(t).constructor):e.apply(t,r))}function OF(){return(OF="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=EF(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function EF(t){return(EF=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function PF(t,e){return(PF=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var xF=function(t){function e(t,r,n,o,i,a,s,u,l){var c;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(c=_F(this,e,[t,r,n,o,i,a,s,u,l])).x=t,c.y=r,c.image=n,c.width=o,c.height=i,c.sx=a,c.sy=s,c.sWidth=u,c.sHeight=l,c.CLASS_NAME="SuperMap.Feature.ShapeParameters.Image",c}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&PF(t,e)}(e,EB),r=e,(n=[{key:"destroy",value:function(){this.x=null,this.y=null,this.image=null,this.width=null,this.height=null,this.sx=null,this.sy=null,this.sWidth=null,this.sHeight=null,OF(EF(e.prototype),"destroy",this).call(this)}}])&&SF(r.prototype,n),o&&SF(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function TF(t){"@babel/helpers - typeof";return(TF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function CF(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,kF(n.key),n)}}function kF(t){var e=function(t,e){if("object"!=TF(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=TF(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==TF(e)?e:e+""}function AF(t,e,r){return e=NF(e),function(t,e){if(e&&("object"===TF(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],NF(t).constructor):e.apply(t,r))}function jF(){return(jF="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=NF(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function NF(t){return(NF=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function IF(t,e){return(IF=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var MF=function(t){function e(t,r,n){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(o=AF(this,e,[t,r,n])).x=isNaN(t)?0:t,o.y=isNaN(r)?0:r,o.r=isNaN(n)?0:n,o.CLASS_NAME="SuperMap.Feature.ShapeParameters.Circle",o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&IF(t,e)}(e,EB),r=e,(n=[{key:"destroy",value:function(){this.x=null,this.y=null,this.r=null,jF(NF(e.prototype),"destroy",this).call(this)}}])&&CF(r.prototype,n),o&&CF(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function RF(t){"@babel/helpers - typeof";return(RF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function LF(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,DF(n.key),n)}}function DF(t){var e=function(t,e){if("object"!=RF(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=RF(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==RF(e)?e:e+""}var BF=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._handlers={},this.CLASS_NAME="SuperMap.LevelRenderer.Eventful"},(e=[{key:"destroy",value:function(){this._handlers=null}},{key:"one",value:function(t,e,r){var n=this._handlers;return e&&t?(n[t]||(n[t]=[]),n[t].push({h:e,one:!0,ctx:r||this}),this):this}},{key:"bind",value:function(t,e,r){var n=this._handlers;return e&&t?(n[t]||(n[t]=[]),n[t].push({h:e,one:!1,ctx:r||this}),this):this}},{key:"unbind",value:function(t,e){var r=this._handlers;if(!t)return this._handlers={},this;if(e){if(r[t]){for(var n=[],o=0,i=r[t].length;o<i;o++)r[t][o].h!=e&&n.push(r[t][o]);r[t]=n}r[t]&&0===r[t].length&&delete r[t]}else delete r[t];return this}},{key:"dispatch",value:function(t){if(this._handlers[t]){var e=arguments,r=e.length;r>3&&(e=Array.prototype.slice.call(e,1));for(var n=this._handlers[t],o=n.length,i=0;i<o;){switch(r){case 1:n[i].h.call(n[i].ctx);break;case 2:n[i].h.call(n[i].ctx,e[1]);break;case 3:n[i].h.call(n[i].ctx,e[1],e[2]);break;default:n[i].h.apply(n[i].ctx,e)}n[i].one?(n.splice(i,1),o--):i++}}return this}},{key:"dispatchWithContext",value:function(t){if(this._handlers[t]){var e=arguments,r=e.length;r>4&&(e=Array.prototype.slice.call(e,1,e.length-1));for(var n=e[e.length-1],o=this._handlers[t],i=o.length,a=0;a<i;){switch(r){case 1:o[a].h.call(n);break;case 2:o[a].h.call(n,e[1]);break;case 3:o[a].h.call(n,e[1],e[2]);break;default:o[a].h.apply(n,e)}o[a].one?(o.splice(a,1),i--):a++}}return this}}])&&LF(t.prototype,e),r&&LF(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function FF(t){"@babel/helpers - typeof";return(FF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function UF(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,GF(n.key),n)}}function GF(t){var e=function(t,e){if("object"!=FF(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=FF(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==FF(e)?e:e+""}var VF=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.ArrayCtor="undefined"==typeof Float32Array?Array:Float32Array,this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Vector"},(e=[{key:"create",value:function(t,e){var r=new(0,this.ArrayCtor)(2);return r[0]=t||0,r[1]=e||0,r}},{key:"copy",value:function(t,e){return t[0]=e[0],t[1]=e[1],t}},{key:"set",value:function(t,e,r){return t[0]=e,t[1]=r,t}},{key:"add",value:function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t}},{key:"scaleAndAdd",value:function(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t}},{key:"sub",value:function(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t}},{key:"len",value:function(t){return Math.sqrt(this.lenSquare(t))}},{key:"lenSquare",value:function(t){return t[0]*t[0]+t[1]*t[1]}},{key:"mul",value:function(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t}},{key:"div",value:function(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t}},{key:"dot",value:function(t,e){return t[0]*e[0]+t[1]*e[1]}},{key:"scale",value:function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t}},{key:"normalize",value:function(t,e){var r=this.len(e);return 0===r?(t[0]=0,t[1]=0):(t[0]=e[0]/r,t[1]=e[1]/r),t}},{key:"distance",value:function(t,e){return Math.sqrt((t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1]))}},{key:"distanceSquare",value:function(t,e){return(t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1])}},{key:"negate",value:function(t,e){return t[0]=-e[0],t[1]=-e[1],t}},{key:"lerp",value:function(t,e,r,n){return t[0]=e[0]+n*(r[0]-e[0]),t[1]=e[1]+n*(r[1]-e[1]),t}},{key:"applyTransform",value:function(t,e,r){var n=e[0],o=e[1];return t[0]=r[0]*n+r[2]*o+r[4],t[1]=r[1]*n+r[3]*o+r[5],t}},{key:"min",value:function(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t}},{key:"max",value:function(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t}},{key:"length",value:function(t){return this.len(t)}},{key:"lengthSquare",value:function(t){return this.lenSquare(t)}},{key:"dist",value:function(t,e){return this.distance(t,e)}},{key:"distSquare",value:function(t,e){return this.distanceSquare(t,e)}}])&&UF(t.prototype,e),r&&UF(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function zF(t){"@babel/helpers - typeof";return(zF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function HF(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,qF(n.key),n)}}function qF(t){var e=function(t,e){if("object"!=zF(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=zF(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==zF(e)?e:e+""}var JF=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.vector=new VF,this.EPSILON=1e-4,this.THREE_SQRT=Math.sqrt(3),this.ONE_THIRD=1/3,this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Curve"},(e=[{key:"isAroundZero",value:function(t){return t>-this.EPSILON&&t<this.EPSILON}},{key:"isNotAroundZero",value:function(t){return t>this.EPSILON||t<-this.EPSILON}},{key:"cubicAt",value:function(t,e,r,n,o){var i=1-o;return i*i*(i*t+3*o*e)+o*o*(o*n+3*i*r)}},{key:"cubicDerivativeAt",value:function(t,e,r,n,o){var i=1-o;return 3*(((e-t)*i+2*(r-e)*o)*i+(n-r)*o*o)}},{key:"cubicRootAt",value:function(t,e,r,n,o,i){var a=n+3*(e-r)-t,s=3*(r-2*e+t),u=3*(e-t),l=t-o,c=s*s-3*a*u,f=s*u-9*a*l,p=u*u-3*s*l,h=0;if(this.isAroundZero(c)&&this.isAroundZero(f))if(this.isAroundZero(s))i[0]=0;else{var y=-u/s;y>=0&&y<=1&&(i[h++]=y)}else{var d=f*f-4*c*p;if(this.isAroundZero(d)){var v=f/c,m=-s/a+v,b=-v/2;m>=0&&m<=1&&(i[h++]=m),b>=0&&b<=1&&(i[h++]=b)}else if(d>0){var g=Math.sqrt(d),S=c*s+1.5*a*(-f+g),w=c*s+1.5*a*(-f-g),_=(-s-((S=S<0?-Math.pow(-S,this.ONE_THIRD):Math.pow(S,this.ONE_THIRD))+(w=w<0?-Math.pow(-w,this.ONE_THIRD):Math.pow(w,this.ONE_THIRD))))/(3*a);_>=0&&_<=1&&(i[h++]=_)}else{var O=(2*c*s-3*a*f)/(2*Math.sqrt(c*c*c)),E=Math.acos(O)/3,P=Math.sqrt(c),x=Math.cos(E),T=(-s-2*P*x)/(3*a),C=(-s+P*(x+this.THREE_SQRT*Math.sin(E)))/(3*a),k=(-s+P*(x-this.THREE_SQRT*Math.sin(E)))/(3*a);T>=0&&T<=1&&(i[h++]=T),C>=0&&C<=1&&(i[h++]=C),k>=0&&k<=1&&(i[h++]=k)}}return h}},{key:"cubicExtrema",value:function(t,e,r,n,o){var i=6*r-12*e+6*t,a=9*e+3*n-3*t-9*r,s=3*e-3*t,u=0;if(this.isAroundZero(a)){if(this.isNotAroundZero(i)){var l=-s/i;l>=0&&l<=1&&(o[u++]=l)}}else{var c=i*i-4*a*s;if(this.isAroundZero(c))o[0]=-i/(2*a);else if(c>0){var f=Math.sqrt(c),p=(-i+f)/(2*a),h=(-i-f)/(2*a);p>=0&&p<=1&&(o[u++]=p),h>=0&&h<=1&&(o[u++]=h)}}return u}},{key:"cubicSubdivide",value:function(t,e,r,n,o,i){var a=(e-t)*o+t,s=(r-e)*o+e,u=(n-r)*o+r,l=(s-a)*o+a,c=(u-s)*o+s,f=(c-l)*o+l;i[0]=t,i[1]=a,i[2]=l,i[3]=f,i[4]=f,i[5]=c,i[6]=u,i[7]=n}},{key:"cubicProjectPoint",value:function(t,e,r,n,o,i,a,s,u,l,c){var f,p=this.vector.create(),h=this.vector.create(),y=this.vector.create(),d=.005,v=1/0;p[0]=u,p[1]=l;for(var m=0;m<1;m+=.05){h[0]=this.cubicAt(t,r,o,a,m),h[1]=this.cubicAt(e,n,i,s,m);var b=this.vector.distSquare(p,h);b<v&&(f=m,v=b)}v=1/0;for(var g=0;g<32&&!(d<this.EPSILON);g++){var S=f-d,w=f+d;h[0]=this.cubicAt(t,r,o,a,S),h[1]=this.cubicAt(e,n,i,s,S);var _=this.vector.distSquare(h,p);if(S>=0&&_<v)f=S,v=_;else{y[0]=this.cubicAt(t,r,o,a,w),y[1]=this.cubicAt(e,n,i,s,w);var O=this.vector.distSquare(y,p);w<=1&&O<v?(f=w,v=O):d*=.5}}return c&&(c[0]=this.cubicAt(t,r,o,a,f),c[1]=this.cubicAt(e,n,i,s,f)),Math.sqrt(v)}},{key:"quadraticAt",value:function(t,e,r,n){var o=1-n;return o*(o*t+2*n*e)+n*n*r}},{key:"quadraticDerivativeAt",value:function(t,e,r,n){return 2*((1-n)*(e-t)+n*(r-e))}},{key:"quadraticRootAt",value:function(t,e,r,n,o){var i=t-2*e+r,a=2*(e-t),s=t-n,u=0;if(this.isAroundZero(i)){if(this.isNotAroundZero(a)){var l=-s/a;l>=0&&l<=1&&(o[u++]=l)}}else{var c=a*a-4*i*s;if(this.isAroundZero(c)){var f=-a/(2*i);f>=0&&f<=1&&(o[u++]=f)}else if(c>0){var p=Math.sqrt(c),h=(-a+p)/(2*i),y=(-a-p)/(2*i);h>=0&&h<=1&&(o[u++]=h),y>=0&&y<=1&&(o[u++]=y)}}return u}},{key:"quadraticExtremum",value:function(t,e,r){var n=t+r-2*e;return 0===n?.5:(t-e)/n}},{key:"quadraticProjectPoint",value:function(t,e,r,n,o,i,a,s,u){var l,c=this.vector.create(),f=this.vector.create(),p=this.vector.create(),h=.005,y=1/0;c[0]=a,c[1]=s;for(var d=0;d<1;d+=.05){f[0]=this.quadraticAt(t,r,o,d),f[1]=this.quadraticAt(e,n,i,d);var v=this.vector.distSquare(c,f);v<y&&(l=d,y=v)}y=1/0;for(var m=0;m<32&&!(h<this.EPSILON);m++){var b=l-h,g=l+h;f[0]=this.quadraticAt(t,r,o,b),f[1]=this.quadraticAt(e,n,i,b);var S=this.vector.distSquare(f,c);if(b>=0&&S<y)l=b,y=S;else{p[0]=this.quadraticAt(t,r,o,g),p[1]=this.quadraticAt(e,n,i,g);var w=this.vector.distSquare(p,c);g<=1&&w<y?(l=g,y=w):h*=.5}}return u&&(u[0]=this.quadraticAt(t,r,o,l),u[1]=this.quadraticAt(e,n,i,l)),Math.sqrt(y)}}])&&HF(t.prototype,e),r&&HF(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function WF(t){"@babel/helpers - typeof";return(WF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function KF(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,YF(n.key),n)}}function YF(t){var e=function(t,e){if("object"!=WF(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=WF(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==WF(e)?e:e+""}var QF=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.util=new vD,this.curve=new JF,this._ctx=null,this._textWidthCache={},this._textHeightCache={},this._textWidthCacheCounter=0,this._textHeightCacheCounter=0,this.TEXT_CACHE_MAX=5e3,this.PI2=2*Math.PI,this.roots=[-1,-1,-1],this.extrema=[-1,-1],this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Area"},(e=[{key:"normalizeRadian",value:function(t){return(t%=this.PI2)<0&&(t+=this.PI2),t}},{key:"isInside",value:function(t,e,r,n){if(!e||!t)return!1;var o=t.type;this._ctx=this._ctx||this.util.getContext();var i=this._mathMethod(t,e,r,n);if(void 0!==i)return i;if(t.buildPath&&this._ctx.isPointInPath)return this._buildPathMethod(t,this._ctx,e,r,n);switch(o){case"ellipse":case"smicellipse":return!0;case"trochoid":var a="out"==e.location?e.r1+e.r2+e.d:e.r1-e.r2+e.d;return this.isInsideCircle(e,r,n,a);case"rose":return this.isInsideCircle(e,r,n,e.maxr);default:return!1}}},{key:"_mathMethod",value:function(t,e,r,n){switch(t.type){case"bezier-curve":return void 0===e.cpX2?this.isInsideQuadraticStroke(e.xStart,e.yStart,e.cpX1,e.cpY1,e.xEnd,e.yEnd,e.lineWidth,r,n):this.isInsideCubicStroke(e.xStart,e.yStart,e.cpX1,e.cpY1,e.cpX2,e.cpY2,e.xEnd,e.yEnd,e.lineWidth,r,n);case"line":return this.isInsideLine(e.xStart,e.yStart,e.xEnd,e.yEnd,e.lineWidth,r,n);case"broken-line":return this.isInsideBrokenLine(e.pointList,e.lineWidth,r,n);case"smicbroken-line":var o=r,i=n;return t.refOriginalPosition&&(o=r-t.refOriginalPosition[0],i=n-t.refOriginalPosition[1]),this.isInsideBrokenLine(e.pointList,e.lineWidth,o,i);case"ring":return this.isInsideRing(e.x,e.y,e.r0,e.r,r,n);case"smicring":var a=e.x,s=e.y;return t.refOriginalPosition&&(a=e.x+t.refOriginalPosition[0],s=e.y+t.refOriginalPosition[1]),this.isInsideRing(a,s,e.r0,e.r,r,n);case"circle":return this.isInsideCircle(e.x,e.y,e.r,r,n);case"smicpoint":var u=r,l=n;return t.refOriginalPosition&&(u=r-t.refOriginalPosition[0],l=n-t.refOriginalPosition[1]),this.isInsideCircle(e.x,e.y,e.r,u,l);case"sector":var c=e.startAngle*Math.PI/180,f=e.endAngle*Math.PI/180;return e.clockWise||(c=-c,f=-f),this.isInsideSector(e.x,e.y,e.r0,e.r,c,f,!e.clockWise,r,n);case"smicsector":var p=e.startAngle*Math.PI/180,h=e.endAngle*Math.PI/180;e.clockWise||(p=-p,h=-h);var y=e.x,d=e.y;return t.refOriginalPosition&&(y=e.x+t.refOriginalPosition[0],d=e.y+t.refOriginalPosition[1]),this.isInsideSector(y,d,e.r0,e.r,p,h,!e.clockWise,r,n);case"path":return this.isInsidePath(e.pathArray,Math.max(e.lineWidth,5),e.brushType,r,n);case"polygon":case"star":case"smicstar":case"isogon":case"smicisogon":return this.isInsidePolygon(e.pointList,r,n);case"smicpolygon":var v=r,m=n;if(t.refOriginalPosition&&(v=r-t.refOriginalPosition[0],m=n-t.refOriginalPosition[1]),t.holePolygonPointLists&&t.holePolygonPointLists.length>0){for(var b=this.isInsidePolygon(e.pointList,v,m),g=t.holePolygonPointLists,S=!1,w=0,_=g.length;w<_;w++){var O=g[w];!0===this.isInsidePolygon(O,v,m)&&(S=!0)}return!0===b&&!1===S}return this.isInsidePolygon(e.pointList,v,m);case"text":var E=e.__rect||t.getRect(e);return this.isInsideRect(E.x,E.y,E.width,E.height,r,n);case"smictext":var P=t.getTextBackground(e);return this.isInsidePolygon(P,r,n);case"rectangle":case"image":return this.isInsideRect(e.x,e.y,e.width,e.height,r,n);case"smicimage":var x=e.x,T=e.y;return t.refOriginalPosition&&(x=e.x+t.refOriginalPosition[0],T=e.y+t.refOriginalPosition[1]),this.isInsideRect(x,T,e.width,e.height,r,n)}}},{key:"_buildPathMethod",value:function(t,e,r,n,o){return e.beginPath(),t.buildPath(e,r),e.closePath(),e.isPointInPath(n,o)}},{key:"isOutside",value:function(t,e,r,n){return!this.isInside(t,e,r,n)}},{key:"isInsideLine",value:function(t,e,r,n,o,i,a){if(0===o)return!1;var s=Math.max(o,5),u=0;if(a>e+s&&a>n+s||a<e-s&&a<n-s||i>t+s&&i>r+s||i<t-s&&i<r-s)return!1;if(t===r)return Math.abs(i-t)<=s/2;var l=(u=(e-n)/(t-r))*i-a+(t*n-r*e)/(t-r);return l*l/(u*u+1)<=s/2*s/2}},{key:"isInsideCubicStroke",value:function(t,e,r,n,o,i,a,s,u,l,c){if(0===u)return!1;var f=Math.max(u,5);return!(c>e+f&&c>n+f&&c>i+f&&c>s+f||c<e-f&&c<n-f&&c<i-f&&c<s-f||l>t+f&&l>r+f&&l>o+f&&l>a+f||l<t-f&&l<r-f&&l<o-f&&l<a-f)&&this.curve.cubicProjectPoint(t,e,r,n,o,i,a,s,l,c,null)<=f/2}},{key:"isInsideQuadraticStroke",value:function(t,e,r,n,o,i,a,s,u){if(0===a)return!1;var l=Math.max(a,5);return!(u>e+l&&u>n+l&&u>i+l||u<e-l&&u<n-l&&u<i-l||s>t+l&&s>r+l&&s>o+l||s<t-l&&s<r-l&&s<o-l)&&this.curve.quadraticProjectPoint(t,e,r,n,o,i,s,u,null)<=l/2}},{key:"isInsideArcStroke",value:function(t,e,r,n,o,i,a,s,u){var l=this.PI2;if(0===a)return!1;var c=Math.max(a,5);s-=t,u-=e;var f=Math.sqrt(s*s+u*u);if(f-c>r||f+c<r)return!1;if(Math.abs(n-o)>=l)return!0;if(i){var p=n;n=this.normalizeRadian(o),o=this.normalizeRadian(p)}else n=this.normalizeRadian(n),o=this.normalizeRadian(o);n>o&&(o+=l);var h=Math.atan2(u,s);return h<0&&(h+=l),h>=n&&h<=o||h+l>=n&&h+l<=o}},{key:"isInsideBrokenLine",value:function(t,e,r,n){for(var o=Math.max(e,10),i=0,a=t.length-1;i<a;i++){var s=t[i][0],u=t[i][1],l=t[i+1][0],c=t[i+1][1];if(this.isInsideLine(s,u,l,c,o,r,n))return!0}return!1}},{key:"isInsideRing",value:function(t,e,r,n,o,i){var a=(o-t)*(o-t)+(i-e)*(i-e);return a<n*n&&a>r*r}},{key:"isInsideRect",value:function(t,e,r,n,o,i){return o>=t&&o<=t+r&&i>=e&&i<=e+n}},{key:"isInsideCircle",value:function(t,e,r,n,o){return(n-t)*(n-t)+(o-e)*(o-e)<r*r}},{key:"isInsideSector",value:function(t,e,r,n,o,i,a,s,u){return this.isInsideArcStroke(t,e,(r+n)/2,o,i,a,n-r,s,u)}},{key:"isInsidePolygon",value:function(t,e,r){for(var n=t.length,o=0,i=0,a=n-1;i<n;i++){var s=t[a][0],u=t[a][1],l=t[i][0],c=t[i][1];o+=this.windingLine(s,u,l,c,e,r),a=i}return 0!==o}},{key:"windingLine",value:function(t,e,r,n,o,i){return i>e&&i>n||i<e&&i<n?0:n==e?0:(i-e)/(n-e)*(r-t)+t>o?n<e?1:-1:0}},{key:"swapExtrema",value:function(){var t=this.extrema[0];this.extrema[0]=this.extrema[1],this.extrema[1]=t}},{key:"windingCubic",value:function(t,e,r,n,o,i,a,s,u,l){var c=this.curve,f=this.roots,p=this.extrema;if(l>e&&l>n&&l>i&&l>s||l<e&&l<n&&l<i&&l<s)return 0;var h=c.cubicRootAt(e,n,i,s,l,f);if(0===h)return 0;for(var y,d,v=0,m=-1,b=0;b<h;b++){var g=f[b];c.cubicAt(t,r,o,a,g)<u||(m<0&&(m=c.cubicExtrema(e,n,i,s,p),p[1]<p[0]&&m>1&&this.swapExtrema(),y=c.cubicAt(e,n,i,s,p[0]),m>1&&(d=c.cubicAt(e,n,i,s,p[1]))),2==m?g<p[0]?v+=y<e?1:-1:g<p[1]?v+=d<y?1:-1:v+=s<d?1:-1:g<p[0]?v+=y<e?1:-1:v+=s<y?1:-1)}return v}},{key:"windingQuadratic",value:function(t,e,r,n,o,i,a,s){var u=this.curve,l=this.roots;if(s>e&&s>n&&s>i||s<e&&s<n&&s<i)return 0;var c=u.quadraticRootAt(e,n,i,s,l);if(0===c)return 0;var f=u.quadraticExtremum(e,n,i);if(f>=0&&f<=1){for(var p=0,h=u.quadraticAt(e,n,i,f),y=0;y<c;y++){u.quadraticAt(t,r,o,l[y])>a||(l[y]<f?p+=h<e?1:-1:p+=i<h?1:-1)}return p}return u.quadraticAt(t,r,o,l[0])>a?0:i<e?1:-1}},{key:"windingArc",value:function(t,e,r,n,o,i,a,s){var u=this.roots,l=this.PI2;if((s-=e)>r||s<-r)return 0;var c=Math.sqrt(r*r-s*s);if(u[0]=-c,u[1]=c,Math.abs(n-o)>=l){n=0,o=l;var f=i?1:-1;return a>=u[0]+t&&a<=u[1]+t?f:0}if(i){var p=n;n=this.normalizeRadian(o),o=this.normalizeRadian(p)}else n=this.normalizeRadian(n),o=this.normalizeRadian(o);n>o&&(o+=l);for(var h=0,y=0;y<2;y++){var d=u[y];if(d+t>a){var v=Math.atan2(s,d),m=i?1:-1;v<0&&(v=l+v),(v>=n&&v<=o||v+l>=n&&v+l<=o)&&(v>Math.PI/2&&v<1.5*Math.PI&&(m=-m),h+=m)}}return h}},{key:"isInsidePath",value:function(t,e,r,n,o){for(var i=0,a=0,s=0,u=0,l=0,c=!0,f=!0,p="stroke"===(r=r||"fill")||"both"===r,h="fill"===r||"both"===r,y=0;y<t.length;y++){var d=t[y],v=d.points;if(c||"M"===d.command){if(y>0&&(h&&(i+=this.windingLine(a,s,u,l,n,o)),0!==i))return!0;u=v[v.length-2],l=v[v.length-1],c=!1,f&&"A"!==d.command&&(f=!1,a=u,s=l)}switch(d.command){case"M":a=v[0],s=v[1];break;case"L":if(p&&this.isInsideLine(a,s,v[0],v[1],e,n,o))return!0;h&&(i+=this.windingLine(a,s,v[0],v[1],n,o)),a=v[0],s=v[1];break;case"C":if(p&&this.isInsideCubicStroke(a,s,v[0],v[1],v[2],v[3],v[4],v[5],e,n,o))return!0;h&&(i+=this.windingCubic(a,s,v[0],v[1],v[2],v[3],v[4],v[5],n,o)),a=v[4],s=v[5];break;case"Q":if(p&&this.isInsideQuadraticStroke(a,s,v[0],v[1],v[2],v[3],e,n,o))return!0;h&&(i+=this.windingQuadratic(a,s,v[0],v[1],v[2],v[3],n,o)),a=v[2],s=v[3];break;case"A":var m=v[0],b=v[1],g=v[2],S=v[3],w=v[4],_=v[5],O=Math.cos(w)*g+m,E=Math.sin(w)*S+b;f?(f=!1,u=O,l=E):i+=this.windingLine(a,s,O,E);var P=(n-m)*S/g+m;if(p&&this.isInsideArcStroke(m,b,S,w,w+_,1-v[7],e,P,o))return!0;h&&(i+=this.windingArc(m,b,S,w,w+_,1-v[7],P,o)),a=Math.cos(w+_)*g+m,s=Math.sin(w+_)*S+b;break;case"z":if(p&&this.isInsideLine(a,s,u,l,e,n,o))return!0;c=!0}}return h&&(i+=this.windingLine(a,s,u,l,n,o)),0!==i}},{key:"getTextWidth",value:function(t,e){var r=t+":"+e;if(this._textWidthCache[r])return this._textWidthCache[r];this._ctx=this._ctx||this.util.getContext(),this._ctx.save(),e&&(this._ctx.font=e);for(var n=0,o=0,i=(t=(t+"").split("\n")).length;o<i;o++)n=Math.max(this._ctx.measureText(t[o]).width,n);return this._ctx.restore(),this._textWidthCache[r]=n,++this._textWidthCacheCounter>this.TEXT_CACHE_MAX&&(this._textWidthCacheCounter=0,this._textWidthCache={}),n}},{key:"getTextHeight",value:function(t,e){var r=t+":"+e;if(this._textHeightCache[r])return this._textHeightCache[r];this._ctx=this._ctx||this.util.getContext(),this._ctx.save(),e&&(this._ctx.font=e),t=(t+"").split("\n");var n=(this._ctx.measureText("ZH").width+2)*t.length;return this._ctx.restore(),this._textHeightCache[r]=n,++this._textHeightCacheCounter>this.TEXT_CACHE_MAX&&(this._textHeightCacheCounter=0,this._textHeightCache={}),n}}])&&KF(t.prototype,e),r&&KF(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function XF(t){"@babel/helpers - typeof";return(XF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ZF(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,$F(n.key),n)}}function $F(t){var e=function(t,e){if("object"!=XF(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=XF(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==XF(e)?e:e+""}var tU=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),3===arguments.length&&this.computeBoundingBox(arguments),this.CLASS_NAME="SuperMap.LevelRenderer.Tool.ComputeBoundingBox"},(e=[{key:"computeBoundingBox",value:function(t,e,r){if(0!==t.length){for(var n=t[0][0],o=t[0][0],i=t[0][1],a=t[0][1],s=1;s<t.length;s++){var u=t[s];u[0]<n&&(n=u[0]),u[0]>o&&(o=u[0]),u[1]<i&&(i=u[1]),u[1]>a&&(a=u[1])}e[0]=n,e[1]=i,r[0]=o,r[1]=a}}},{key:"cubeBezier",value:function(t,e,r,n,o,i){var a=new JF,s=[];a.cubicExtrema(t[0],e[0],r[0],n[0],s);for(var u=0;u<s.length;u++)s[u]=a.cubicAt(t[0],e[0],r[0],n[0],s[u]);var l=[];a.cubicExtrema(t[1],e[1],r[1],n[1],l);for(var c=0;c<l.length;c++)l[c]=a.cubicAt(t[1],e[1],r[1],n[1],l[c]);s.push(t[0],n[0]),l.push(t[1],n[1]);var f=Math.min.apply(null,s),p=Math.max.apply(null,s),h=Math.min.apply(null,l),y=Math.max.apply(null,l);o[0]=f,o[1]=h,i[0]=p,i[1]=y}},{key:"quadraticBezier",value:function(t,e,r,n,o){var i=new JF,a=i.quadraticExtremum(t[0],e[0],r[0]),s=i.quadraticExtremum(t[1],e[1],r[1]),u=1-(a=Math.max(Math.min(a,1),0)),l=1-(s=Math.max(Math.min(s,1),0)),c=u*u*t[0]+2*u*a*e[0]+a*a*r[0],f=u*u*t[1]+2*u*a*e[1]+a*a*r[1],p=l*l*t[0]+2*l*s*e[0]+s*s*r[0],h=l*l*t[1]+2*l*s*e[1]+s*s*r[1];n[0]=Math.min(t[0],r[0],c,p),n[1]=Math.min(t[1],r[1],f,h),o[0]=Math.max(t[0],r[0],c,p),o[1]=Math.max(t[1],r[1],f,h)}},{key:"arc",value:function(t,e,r,n,o,i,a,s){var u=new VF,l=u.create(),c=u.create(),f=u.create();if(l[0]=Math.cos(n)*r+t,l[1]=Math.sin(n)*r+e,c[0]=Math.cos(o)*r+t,c[1]=Math.sin(o)*r+e,u.min(a,l,c),u.max(s,l,c),(n%=2*Math.PI)<0&&(n+=2*Math.PI),(o%=2*Math.PI)<0&&(o+=2*Math.PI),n>o&&!i?o+=2*Math.PI:n<o&&i&&(n+=2*Math.PI),i){var p=o;o=n,n=p}for(var h=0;h<o;h+=Math.PI/2)h>n&&(f[0]=Math.cos(h)*r+t,f[1]=Math.sin(h)*r+e,u.min(a,f,a),u.max(s,f,s))}}])&&ZF(t.prototype,e),r&&ZF(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function eU(t){"@babel/helpers - typeof";return(eU="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function rU(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,nU(n.key),n)}}function nU(t){var e=function(t,e){if("object"!=eU(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=eU(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==eU(e)?e:e+""}var oU=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Env";var e,r,n,o,i,a,s,u,l,c,f,p,h,y,d,v,m,b,g,S,w,_=this;return e=navigator.userAgent,r=_.os={},n=_.browser={},o=e.match(/Web[kK]it[\/]{0,1}([\d.]+)/),i=e.match(/(Android);?[\s\/]+([\d.]+)?/),a=e.match(/(iPad).*OS\s([\d_]+)/),s=e.match(/(iPod)(.*OS\s([\d_]+))?/),u=!a&&e.match(/(iPhone\sOS)\s([\d_]+)/),l=e.match(/(webOS|hpwOS)[\s\/]([\d.]+)/),c=l&&e.match(/TouchPad/),f=e.match(/Kindle\/([\d.]+)/),p=e.match(/Silk\/([\d._]+)/),h=e.match(/(BlackBerry).*Version\/([\d.]+)/),y=e.match(/(BB10).*Version\/([\d.]+)/),d=e.match(/(RIM\sTablet\sOS)\s([\d.]+)/),v=e.match(/PlayBook/),m=e.match(/Chrome\/([\d.]+)/)||e.match(/CriOS\/([\d.]+)/),b=e.match(/Firefox\/([\d.]+)/),g=e.match(/MSIE ([\d.]+)/),S=o&&e.match(/Mobile\//)&&!m,w=e.match(/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/)&&!m,(n.webkit=!!o)&&(n.version=o[1]),i&&(r.android=!0,r.version=i[2]),u&&!s&&(r.ios=r.iphone=!0,r.version=u[2].replace(/_/g,".")),a&&(r.ios=r.ipad=!0,r.version=a[2].replace(/_/g,".")),s&&(r.ios=r.ipod=!0,r.version=s[3]?s[3].replace(/_/g,"."):null),l&&(r.webos=!0,r.version=l[2]),c&&(r.touchpad=!0),h&&(r.blackberry=!0,r.version=h[2]),y&&(r.bb10=!0,r.version=y[2]),d&&(r.rimtabletos=!0,r.version=d[2]),v&&(n.playbook=!0),f&&(r.kindle=!0,r.version=f[1]),p&&(n.silk=!0,n.version=p[1]),!p&&r.android&&e.match(/Kindle Fire/)&&(n.silk=!0),m&&(n.chrome=!0,n.version=m[1]),b&&(n.firefox=!0,n.version=b[1]),g&&(n.ie=!0,n.version=g[1]),S&&(e.match(/Safari/)||r.ios)&&(n.safari=!0),w&&(n.webview=!0),g&&(n.ie=!0,n.version=g[1]),r.tablet=!!(a||v||i&&!e.match(/Mobile/)||b&&e.match(/Tablet/)||g&&!e.match(/Phone/)&&e.match(/Touch/)),r.phone=!(r.tablet||r.ipod||!(i||u||l||h||y||m&&e.match(/Android/)||m&&e.match(/CriOS\/([\d.]+)/)||b&&e.match(/Mobile/)||g&&e.match(/Touch/))),{browser:n,os:r,canvasSupported:!!document.createElement("canvas").getContext}},(e=[{key:"destory",value:function(){return!0}}])&&rU(t.prototype,e),r&&rU(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function iU(t){"@babel/helpers - typeof";return(iU="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function aU(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,sU(n.key),n)}}function sU(t){var e=function(t,e){if("object"!=iU(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=iU(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==iU(e)?e:e+""}var uU=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.stop="function"==typeof window.addEventListener?function(t){t.preventDefault(),t.stopPropagation(),t.cancelBubble=!0}:function(t){t.returnValue=!1,t.cancelBubble=!0},this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Event"},(e=[{key:"getX",value:function(t){return void 0!==t.zrenderX&&t.zrenderX||void 0!==t.offsetX&&t.offsetX||void 0!==t.layerX&&t.layerX||void 0!==t.clientX&&t.clientX}},{key:"getY",value:function(t){return void 0!==t.zrenderY&&t.zrenderY||void 0!==t.offsetY&&t.offsetY||void 0!==t.layerY&&t.layerY||void 0!==t.clientY&&t.clientY}},{key:"getDelta",value:function(t){return void 0!==t.zrenderDelta&&t.zrenderDelta||void 0!==t.wheelDelta&&t.wheelDelta||void 0!==t.detail&&-t.detail}}])&&aU(t.prototype,e),r&&aU(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function lU(t){"@babel/helpers - typeof";return(lU="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function cU(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,fU(n.key),n)}}function fU(t){var e=function(t,e){if("object"!=lU(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=lU(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==lU(e)?e:e+""}var pU=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Http"},(e=[{key:"get",value:function(t,e,r){if("object"===lU(t)){var n=t;t=n.url,e=n.onsuccess,r=n.onerror}var o=window.XMLHttpRequest?new XMLHttpRequest:new window.ActiveXObject("Microsoft.XMLHTTP");o.open("GET",t,!0),o.onreadystatechange=function(){4==o.readyState&&(o.status>=200&&o.status<300||304===o.status?e&&e(o.responseText):r&&r(),o.onreadystatechange=new Function,o=null)},o.send(null)}}])&&cU(t.prototype,e),r&&cU(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function hU(t){"@babel/helpers - typeof";return(hU="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function yU(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,dU(n.key),n)}}function dU(t){var e=function(t,e){if("object"!=hU(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=hU(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==hU(e)?e:e+""}var vU=function(t,e,r){return e&&yU(t.prototype,e),r&&yU(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)});function mU(t){"@babel/helpers - typeof";return(mU="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function bU(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,gU(n.key),n)}}function gU(t){var e=function(t,e){if("object"!=mU(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=mU(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==mU(e)?e:e+""}vU.EVENT={RESIZE:"resize",CLICK:"click",DBLCLICK:"dblclick",MOUSEWHEEL:"mousewheel",MOUSEMOVE:"mousemove",MOUSEOVER:"mouseover",MOUSEOUT:"mouseout",MOUSEDOWN:"mousedown",MOUSEUP:"mouseup",GLOBALOUT:"globalout",DRAGSTART:"dragstart",DRAGEND:"dragend",DRAGENTER:"dragenter",DRAGOVER:"dragover",DRAGLEAVE:"dragleave",DROP:"drop",touchClickDelay:300},vU.catchBrushException=!1,vU.debugMode=0;var SU=function(){return t=function t(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Log",function(){if(0!=+vU.debugMode)if(1==+vU.debugMode)for(var t in arguments)throw new Error(arguments[t]);else if(+vU.debugMode>1)for(var e in arguments)console.log(arguments[e])}},(e=[{key:"destory",value:function(){return!0}}])&&bU(t.prototype,e),r&&bU(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function wU(t){"@babel/helpers - typeof";return(wU="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _U(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,OU(n.key),n)}}function OU(t){var e=function(t,e){if("object"!=wU(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=wU(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==wU(e)?e:e+""}var EU=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._radians=window.Math.PI/180,this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Math"},(e=[{key:"sin",value:function(t,e){return window.Math.sin(e?t*this._radians:t)}},{key:"cos",value:function(t,e){return window.Math.cos(e?t*this._radians:t)}},{key:"degreeToRadian",value:function(t){return t*this._radians}},{key:"radianToDegree",value:function(t){return t/this._radians}}])&&_U(t.prototype,e),r&&_U(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function PU(t){"@babel/helpers - typeof";return(PU="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function xU(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,TU(n.key),n)}}function TU(t){var e=function(t,e){if("object"!=PU(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=PU(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==PU(e)?e:e+""}var CU=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.ArrayCtor="undefined"==typeof Float32Array?Array:Float32Array,this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Matrix"},(e=[{key:"create",value:function(){var t=new(0,this.ArrayCtor)(6);return this.identity(t),t}},{key:"identity",value:function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}},{key:"copy",value:function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}},{key:"mul",value:function(t,e,r){return t[0]=e[0]*r[0]+e[2]*r[1],t[1]=e[1]*r[0]+e[3]*r[1],t[2]=e[0]*r[2]+e[2]*r[3],t[3]=e[1]*r[2]+e[3]*r[3],t[4]=e[0]*r[4]+e[2]*r[5]+e[4],t[5]=e[1]*r[4]+e[3]*r[5]+e[5],t}},{key:"translate",value:function(t,e,r){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4]+r[0],t[5]=e[5]+r[1],t}},{key:"rotate",value:function(t,e,r){var n=e[0],o=e[2],i=e[4],a=e[1],s=e[3],u=e[5],l=Math.sin(r),c=Math.cos(r);return t[0]=n*c+a*l,t[1]=-n*l+a*c,t[2]=o*c+s*l,t[3]=-o*l+c*s,t[4]=c*i+l*u,t[5]=c*u-l*i,t}},{key:"scale",value:function(t,e,r){var n=r[0],o=r[1];return t[0]=e[0]*n,t[1]=e[1]*o,t[2]=e[2]*n,t[3]=e[3]*o,t[4]=e[4]*n,t[5]=e[5]*o,t}},{key:"invert",value:function(t,e){var r=e[0],n=e[2],o=e[4],i=e[1],a=e[3],s=e[5],u=r*a-i*n;return u?(u=1/u,t[0]=a*u,t[1]=-i*u,t[2]=-n*u,t[3]=r*u,t[4]=(n*s-a*o)*u,t[5]=(i*o-r*s)*u,t):null}},{key:"mulVector",value:function(t,e,r){var n=e[0],o=e[2],i=e[4],a=e[1],s=e[3],u=e[5];return t[0]=r[0]*n+r[1]*o+i,t[1]=r[0]*a+r[1]*s+u,t}}])&&xU(t.prototype,e),r&&xU(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function kU(t){"@babel/helpers - typeof";return(kU="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function AU(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,jU(n.key),n)}}function jU(t){var e=function(t,e){if("object"!=kU(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=kU(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==kU(e)?e:e+""}var NU=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return e=t,n=[{key:"SUtil_smoothBezier",value:function(e,r,n,o,i){i&&2===i.length||(i=[0,0]);var a,s,u=i,l=[],c=[],f=[],p=[],h=!!o;if(h){a=[1/0,1/0],s=[-1/0,-1/0];for(var y=e.length,d=0;d<y;d++)t.Util_vector.min(a,a,[e[d][0]+u[0],e[d][1]+u[1]]),t.Util_vector.max(s,s,[e[d][0]+u[0],e[d][1]+u[1]]);t.Util_vector.min(a,a,o[0]),t.Util_vector.max(s,s,o[1])}for(var v=e.length,m=0;m<v;m++){var b=[e[m][0]+u[0],e[m][1]+u[1]],g=void 0,S=void 0;if(n)g=[e[m?m-1:v-1][0]+u[0],e[m?m-1:v-1][1]+u[1]],S=[e[(m+1)%v][0]+u[0],e[(m+1)%v][1]+u[1]];else{if(0===m||m===v-1){l.push([e[m][0]+u[0],e[m][1]+u[1]]);continue}g=[e[m-1][0]+u[0],e[m-1][1]+u[1]],S=[e[m+1][0]+u[0],e[m+1][1]+u[1]]}t.Util_vector.sub(c,S,g),t.Util_vector.scale(c,c,r);var w=t.Util_vector.distance(b,g),_=t.Util_vector.distance(b,S),O=w+_;0!==O&&(w/=O,_/=O),t.Util_vector.scale(f,c,-w),t.Util_vector.scale(p,c,_);var E=t.Util_vector.add([],b,f),P=t.Util_vector.add([],b,p);h&&(t.Util_vector.max(E,E,a),t.Util_vector.min(E,E,s),t.Util_vector.max(P,P,a),t.Util_vector.min(P,P,s)),l.push(E),l.push(P)}return n&&l.push(l.shift()),l}},{key:"SUtil_smoothSpline",value:function(e,r,n,o){o&&2===o.length||(o=[0,0]);for(var i=o,a=e.length,s=[],u=0,l=1;l<a;l++)u+=t.Util_vector.distance([e[l-1][0]+i[0],e[l-1][1]+i[1]],[e[l][0]+i[0],e[l][1]+i[1]]);var c=u/5;c=c<a?a:c;for(var f=0;f<c;f++){var p=f/(c-1)*(r?a:a-1),h=Math.floor(p),y=p-h,d=void 0,v=[e[h%a][0]+i[0],e[h%a][1]+i[1]],m=void 0,b=void 0;r?(d=[e[(h-1+a)%a][0]+i[0],e[(h-1+a)%a][1]+i[1]],m=[e[(h+1)%a][0]+i[0],e[(h+1)%a][1]+i[1]],b=[e[(h+2)%a][0]+i[0],e[(h+2)%a][1]+i[1]]):(d=[e[0===h?h:h-1][0]+i[0],e[0===h?h:h-1][1]+i[1]],m=[e[h>a-2?a-1:h+1][0]+i[0],e[h>a-2?a-1:h+1][1]+i[1]],b=[e[h>a-3?a-1:h+2][0]+i[0],e[h>a-3?a-1:h+2][1]+i[1]]);var g=y*y,S=y*g;s.push([w(d[0],v[0],m[0],b[0],y,g,S),w(d[1],v[1],m[1],b[1],y,g,S)])}return s;function w(t,e,r,n,o,i,a){var s=.5*(r-t),u=.5*(n-e);return(2*(e-r)+s+u)*a+(-3*(e-r)-2*s-u)*i+s*o+e}}},{key:"SUtil_dashedLineTo",value:function(t,e,r,n,o,i,a){var s=[5,5];if(i="number"!=typeof i?5:i,t.setLineDash)return s[0]=i,s[1]=i,a&&a instanceof Array?t.setLineDash(a):t.setLineDash(s),t.moveTo(e,r),void t.lineTo(n,o);var u=n-e,l=o-r,c=Math.floor(Math.sqrt(u*u+l*l)/i);u/=c,l/=c;for(var f=!0,p=0;p<c;++p)f?t.moveTo(e,r):t.lineTo(e,r),f=!f,e+=u,r+=l;t.lineTo(n,o)}}],(r=null)&&AU(e.prototype,r),n&&AU(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,r,n}();function IU(t){"@babel/helpers - typeof";return(IU="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function MU(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,RU(n.key),n)}}function RU(t){var e=function(t,e){if("object"!=IU(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=IU(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==IU(e)?e:e+""}NU.Util_area=new QF,NU.Util_color=new SD,NU.Util_computeBoundingBox=new tU,NU.Util_curve=new JF,NU.Util_env=new oU,NU.Util_event=new uU,NU.Util_http=new pU,NU.Util_log=new SU,NU.Util_math=new EU,NU.Util_matrix=new CU,NU.Util=new vD,NU.Util_vector=new VF;var LU=function(){return t=function t(){var e;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.position=[0,0],this.rotation=[0,0,0],this.scale=[1,1,0,0],this.needLocalTransform=!1,this.needTransform=!1,this.CLASS_NAME="SuperMap.LevelRenderer.Transformable",this.lookAt=(e=NU.Util_vector.create(),function(t){this.transform||(this.transform=NU.Util_matrix.create());var r=this.transform;function n(t){return t>-5e-5&&t<5e-5}NU.Util_vector.sub(e,t,this.position),n(e[0])&&n(e[1])||(NU.Util_vector.normalize(e,e),r[2]=e[0]*this.scale[1],r[3]=e[1]*this.scale[1],r[0]=e[1]*this.scale[0],r[1]=-e[0]*this.scale[0],r[4]=this.position[0],r[5]=this.position[1],this.decomposeTransform())})},(e=[{key:"destroy",value:function(){this.position=null,this.rotation=null,this.scale=null,this.needLocalTransform=null,this.needTransform=null}},{key:"updateNeedTransform",value:function(){function t(t){return t>5e-5||t<-5e-5}this.needLocalTransform=t(this.rotation[0])||t(this.position[0])||t(this.position[1])||t(this.scale[0]-1)||t(this.scale[1]-1)}},{key:"updateTransform",value:function(){if(this.updateNeedTransform(),this.parent?this.needTransform=this.needLocalTransform||this.parent.needTransform:this.needTransform=this.needLocalTransform,this.needTransform){var t=[0,0],e=this.transform||NU.Util_matrix.create();if(NU.Util_matrix.identity(e),this.needLocalTransform){if(o(this.scale[0])||o(this.scale[1])){t[0]=-this.scale[2]||0,t[1]=-this.scale[3]||0;var r=o(t[0])||o(t[1]);r&&NU.Util_matrix.translate(e,e,t),NU.Util_matrix.scale(e,e,this.scale),r&&(t[0]=-t[0],t[1]=-t[1],NU.Util_matrix.translate(e,e,t))}if(this.rotation instanceof Array){if(0!==this.rotation[0]){t[0]=-this.rotation[1]||0,t[1]=-this.rotation[2]||0;var n=o(t[0])||o(t[1]);n&&NU.Util_matrix.translate(e,e,t),NU.Util_matrix.rotate(e,e,this.rotation[0]),n&&(t[0]=-t[0],t[1]=-t[1],NU.Util_matrix.translate(e,e,t))}}else 0!=+this.rotation&&NU.Util_matrix.rotate(e,e,this.rotation);(o(this.position[0])||o(this.position[1]))&&NU.Util_matrix.translate(e,e,this.position)}this.transform=e,this.parent&&this.parent.needTransform&&(this.needLocalTransform?NU.Util_matrix.mul(this.transform,this.parent.transform,this.transform):NU.Util_matrix.copy(this.transform,this.parent.transform))}function o(t){return t>5e-5||t<-5e-5}}},{key:"setTransform",value:function(t){if(this.needTransform){var e=this.transform;t.transform(e[0],e[1],e[2],e[3],e[4],e[5])}}},{key:"decomposeTransform",value:function(){if(this.transform){var t=this.transform,e=t[0]*t[0]+t[1]*t[1],r=this.position,n=this.scale,o=this.rotation;a(e-1)&&(e=Math.sqrt(e));var i=t[2]*t[2]+t[3]*t[3];a(i-1)&&(i=Math.sqrt(i)),r[0]=t[4],r[1]=t[5],n[0]=e,n[1]=i,n[2]=n[3]=0,o[0]=Math.atan2(-t[1]/i,t[0]/e),o[1]=o[2]=0}function a(t){return t>5e-5||t<-5e-5}}}])&&MU(t.prototype,e),r&&MU(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function DU(t){"@babel/helpers - typeof";return(DU="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function BU(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,FU(n.key),n)}}function FU(t){var e=function(t,e){if("object"!=DU(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=DU(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==DU(e)?e:e+""}function UU(t,e,r){return e=VU(e),function(t,e){if(e&&("object"===DU(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],VU(t).constructor):e.apply(t,r))}function GU(){return(GU="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=VU(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function VU(t){return(VU=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function zU(t,e){return(zU=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var HU=function(t){function e(t){var r,n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r=UU(this,e,[t]),t=t||{},r.id=null,r.style={},r.highlightStyle=null,r.parent=null,r.__dirty=!0,r.__clipShapes=[],r.invisible=!1,r.ignore=!1,r.zlevel=0,r.draggable=!1,r.clickable=!1,r.hoverable=!0,r.z=0,r.refOriginalPosition=[0,0],r.refDataID=null,r.isHoverByRefDataID=!1,r.refDataHoverGroup=null,r.dataInfo=null,Tt.extend(r,t),r.id=r.id||Tt.createUniqueID("smShape_"),r.CLASS_NAME="SuperMap.LevelRenderer.Shape",r.getTansform=(n=[],function(t,e){var r=[t,e];return this.needTransform&&this.transform&&(NU.Util_matrix.invert(n,this.transform),NU.Util_matrix.mulVector(r,n,[t,e,1]),t==r[0]&&e==r[1]&&this.updateNeedTransform()),r}),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&zU(t,e)}(e,it(BF,LU)),r=e,o=[{key:"_fillText",value:function(t,r,n,o,i,a,s){i&&(t.font=i),t.textAlign=a,t.textBaseline=s;var u=e._getTextRect(r,n,o,i,a,s);r=(r+"").split("\n");var l=NU.Util_area.getTextHeight("ZH",i);switch(s){case"top":o=u.y;break;case"bottom":o=u.y+l;break;default:o=u.y+l/2}for(var c=0,f=r.length;c<f;c++)t.fillText(r[c],n,o),o+=l}},{key:"_getTextRect",value:function(t,e,r,n,o,i){var a=NU.Util_area.getTextWidth(t,n),s=NU.Util_area.getTextHeight("ZH",n);switch(t=(t+"").split("\n"),o){case"end":case"right":e-=a;break;case"center":e-=a/2}switch(i){case"top":break;case"bottom":r-=s*t.length;break;default:r-=s*t.length/2}return{x:e,y:r,width:a,height:s*t.length}}}],(n=[{key:"destroy",value:function(){this.id=null,this.style=null,this.highlightStyle=null,this.parent=null,this.__dirty=null,this.__clipShapes=null,this.invisible=null,this.ignore=null,this.zlevel=null,this.draggable=null,this.clickable=null,this.hoverable=null,this.z=null,this.refOriginalPosition=null,this.refDataID=null,this.refDataHoverGroup=null,this.isHoverByRefDataID=null,this.dataInfo=null,GU(VU(e.prototype),"destroy",this).call(this)}},{key:"brush",value:function(t,e){var r=this.beforeBrush(t,e);switch(t.beginPath(),this.buildPath(t,r),r.brushType){case"both":this.setCtxGlobalAlpha(t,"fill",r),t.fill(),r.lineWidth>0&&(this.setCtxGlobalAlpha(t,"stroke",r),t.stroke()),this.setCtxGlobalAlpha(t,"reset",r);break;case"stroke":this.setCtxGlobalAlpha(t,"stroke",r),r.lineWidth>0&&t.stroke(),this.setCtxGlobalAlpha(t,"reset",r);break;default:this.setCtxGlobalAlpha(t,"fill",r),t.fill(),this.setCtxGlobalAlpha(t,"reset",r)}this.drawText(t,r,this.style),this.afterBrush(t)}},{key:"beforeBrush",value:function(t,e){var r=this.style;return this.brushTypeOnly&&(r.brushType=this.brushTypeOnly),e&&(r=this.getHighlightStyle(r,this.highlightStyle||{},this.brushTypeOnly)),"stroke"==this.brushTypeOnly&&(r.strokeColor=r.strokeColor||r.color),t.save(),this.doClip(t),this.setContext(t,r),this.setTransform(t),r}},{key:"afterBrush",value:function(t){t.restore()}},{key:"setContext",value:function(t,e){for(var r=[["color","fillStyle"],["strokeColor","strokeStyle"],["opacity","globalAlpha"],["lineCap","lineCap"],["lineJoin","lineJoin"],["miterLimit","miterLimit"],["lineWidth","lineWidth"],["shadowBlur","shadowBlur"],["shadowColor","shadowColor"],["shadowOffsetX","shadowOffsetX"],["shadowOffsetY","shadowOffsetY"]],n=0,o=r.length;n<o;n++){var i=e[r[n][0]],a=r[n][1];void 0!==i&&(t[a]=i)}}},{key:"doClip",value:function(t){var e=NU.Util_matrix.create();if(this.__clipShapes)for(var r=0;r<this.__clipShapes.length;r++){var n=this.__clipShapes[r];if(n.needTransform){var o=n.transform;NU.Util_matrix.invert(e,o),t.transform(o[0],o[1],o[2],o[3],o[4],o[5])}if(t.beginPath(),n.buildPath(t,n.style),t.clip(),n.needTransform){var i=e;t.transform(i[0],i[1],i[2],i[3],i[4],i[5])}}}},{key:"getHighlightStyle",value:function(t,e,r){var n={};for(var o in t)n[o]=t[o];var i=NU.Util_color.getHighlightColor();for(var a in"stroke"!=t.brushType?(n.strokeColor=i,n.lineWidth=t.lineWidth||1,n.brushType="both"):"stroke"!=r?(n.strokeColor=i,n.lineWidth=t.lineWidth||1):n.strokeColor=e.strokeColor||NU.Util_color.mix(t.strokeColor,NU.Util_color.toRGB(i)),e)void 0!==e[a]&&(n[a]=e[a]);return n}},{key:"getHighlightZoom",value:function(){return"text"!=this.type?6:2}},{key:"drift",value:function(t,e){this.position[0]+=t,this.position[1]+=e}},{key:"buildPath",value:function(t,e){NU.Util_log("buildPath not implemented in "+this.type)}},{key:"getRect",value:function(t){NU.Util_log("getRect not implemented in "+this.type)}},{key:"isCover",value:function(t,e){var r=this.getTansform(t,e);t=r[0],e=r[1];var n=this.style.__rect;return n||(n=this.style.__rect=this.getRect(this.style)),t>=n.x&&t<=n.x+n.width&&e>=n.y&&e<=n.y+n.height&&NU.Util_area.isInside(this,this.style,t,e)}},{key:"drawText",value:function(t,r,n){if(void 0!==r.text&&!1!==r.text){var o=r.textColor||r.color||r.strokeColor;t.fillStyle=o;var i,a,s,u,l=10,c=r.textPosition||this.textPosition||"top",f=[];switch(f=this.refOriginalPosition&&2===this.refOriginalPosition.length?this.refOriginalPosition:[0,0],c){case"inside":case"top":case"bottom":case"left":case"right":if(this.getRect){var p=(n||r).__rect||this.getRect(n||r);switch(c){case"inside":s=p.x+p.width/2,u=p.y+p.height/2,i="center",a="middle","stroke"!=r.brushType&&o==r.color&&(t.fillStyle="#fff");break;case"left":s=p.x-l,u=p.y+p.height/2,i="end",a="middle";break;case"right":s=p.x+p.width+l,u=p.y+p.height/2,i="start",a="middle";break;case"top":s=p.x+p.width/2,u=p.y-l,i="center",a="bottom";break;case"bottom":s=p.x+p.width/2,u=p.y+p.height+l,i="center",a="top"}}break;case"start":case"end":var h=0,y=0,d=0,v=0;if(void 0!==r.pointList){var m=r.pointList;if(m.length<2)return;var b=m.length;switch(c){case"start":h=m[0][0]+f[0],y=m[1][0]+f[0],d=m[0][1]+f[1],v=m[1][1]+f[1];break;case"end":h=m[b-2][0]+f[0],y=m[b-1][0]+f[0],d=m[b-2][1]+f[1],v=m[b-1][1]+f[1]}}else h=r.xStart+f[0]||0,y=r.xEnd+f[0]||0,d=r.yStart+f[1]||0,v=r.yEnd+f[1]||0;switch(c){case"start":i=h<y?"end":"start",a=d<v?"bottom":"top",s=h,u=d;break;case"end":i=h<y?"start":"end",a=d<v?"top":"bottom",s=y,u=v}l-=4,h&&y&&h!=y?s-="end"==i?l:-l:i="center",d!=v?u-="bottom"==a?l:-l:a="middle";break;case"specific":s=r.textX||0,u=r.textY||0,i="start",a="middle"}r.labelXOffset&&!isNaN(r.labelXOffset)&&(s+=r.labelXOffset),r.labelYOffset&&!isNaN(r.labelYOffset)&&(u+=r.labelYOffset),null!=s&&null!=u&&e._fillText(t,r.text,s,u,r.textFont,r.textAlign||i,r.textBaseline||a)}}},{key:"modSelf",value:function(){this.__dirty=!0,this.style&&(this.style.__rect=null),this.highlightStyle&&(this.highlightStyle.__rect=null)}},{key:"isSilent",value:function(){return!(this.hoverable||this.draggable||this.clickable||this.onmousemove||this.onmouseover||this.onmouseout||this.onmousedown||this.onmouseup||this.onclick||this.ondragenter||this.ondragover||this.ondragleave||this.ondrop)}},{key:"setCtxGlobalAlpha",value:function(t,e,r){t.globalAlpha="fill"===e?void 0===r.fillOpacity?void 0===r.opacity?1:r.opacity:r.fillOpacity:"stroke"===e?void 0===r.strokeOpacity?void 0===r.opacity?1:r.opacity:r.strokeOpacity:void 0===r.opacity?1:r.opacity}}])&&BU(r.prototype,n),o&&BU(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function qU(t){"@babel/helpers - typeof";return(qU="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function JU(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,WU(n.key),n)}}function WU(t){var e=function(t,e){if("object"!=qU(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=qU(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==qU(e)?e:e+""}function KU(t,e,r){return e=QU(e),function(t,e){if(e&&("object"===qU(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],QU(t).constructor):e.apply(t,r))}function YU(){return(YU="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=QU(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function QU(t){return(QU=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function XU(t,e){return(XU=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var ZU=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=KU(this,e,[t])).type="smicpoint",r.refOriginalPosition&&2===r.refOriginalPosition.length||(r.refOriginalPosition=[0,0]),r.CLASS_NAME="SuperMap.LevelRenderer.Shape.SmicPoint",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&XU(t,e)}(e,HU),r=e,(n=[{key:"destroy",value:function(){this.type=null,YU(QU(e.prototype),"destroy",this).call(this)}},{key:"buildPath",value:function(t,e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var r=this.refOriginalPosition;t.arc(e.x+r[0],e.y+r[1],e.r,0,2*Math.PI,!0)}},{key:"getRect",value:function(t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var e,r=this.refOriginalPosition;return t.__rect?t.__rect:(e="stroke"==t.brushType||"fill"==t.brushType?t.lineWidth||1:0,t.__rect={x:Math.round(t.x+r[0]-t.r-e/2),y:Math.round(t.y+r[1]-t.r-e/2),width:2*t.r+e,height:2*t.r+e},t.__rect)}}])&&JU(r.prototype,n),o&&JU(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function $U(t){"@babel/helpers - typeof";return($U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function tG(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,eG(n.key),n)}}function eG(t){var e=function(t,e){if("object"!=$U(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=$U(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==$U(e)?e:e+""}function rG(t,e,r){return e=oG(e),function(t,e){if(e&&("object"===$U(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],oG(t).constructor):e.apply(t,r))}function nG(){return(nG="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=oG(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function oG(t){return(oG=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function iG(t,e){return(iG=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var aG=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=rG(this,e,[t])).type="smictext",r.refOriginalPosition&&2===r.refOriginalPosition.length||(r.refOriginalPosition=[0,0]),r.CLASS_NAME="SuperMap.LevelRenderer.Shape.SmicText",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&iG(t,e)}(e,HU),r=e,(n=[{key:"destroy",value:function(){this.type=null,nG(oG(e.prototype),"destroy",this).call(this)}},{key:"brush",value:function(t,e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var r=this.refOriginalPosition,n=this.style;if(e&&(n=this.getHighlightStyle(n,this.highlightStyle||{})),void 0!==n.text&&!1!==n.text){t.save(),this.doClip(t),this.setContext(t,n),this.setTransform(t),n.textFont&&(t.font=n.textFont),t.textAlign=n.textAlign||"start",t.textBaseline=n.textBaseline||"middle";var o,i=(n.text+"").split("\n"),a=NU.Util_area.getTextHeight("ZH",n.textFont),s=this.getRectNoRotation(n),u=n.x+r[0];o="top"==n.textBaseline?s.y:"bottom"==n.textBaseline?s.y+a:s.y+a/2;for(var l=n.x+r[0],c=n.y+r[1],f=0,p=i.length;f<p;f++){switch(n.labelRect&&(t.fillRect(s.x-2,s.y,s.width+4,s.height),t.fillStyle=n.strokeColor,t.strokeRect(s.x-2,s.y,s.width+4,s.height),t.fillStyle=n.textColor),n.brushType){case"stroke":this.setCtxGlobalAlpha(t,"stroke",n),n.textRotation&&0!==n.textRotation?(t.save(),t.translate(l,c),t.rotate(n.textRotation*Math.PI/180),"top"==n.textBaseline?n.maxWidth?t.strokeText(i[f],0,a*f,n.maxWidth):t.strokeText(i[f],0,a*f):"bottom"==n.textBaseline?n.maxWidth?t.strokeText(i[f],0,a*(f+1)-s.height,n.maxWidth):t.strokeText(i[f],0,a*(f+1)-s.height):n.maxWidth?t.strokeText(i[f],0,a*(f+1)-s.height/2-a/2,n.maxWidth):t.strokeText(i[f],0,a*(f+1)-s.height/2-a/2),t.restore()):n.maxWidth?t.strokeText(i[f],u,o,n.maxWidth):t.strokeText(i[f],u,o),this.setCtxGlobalAlpha(t,"reset",n);break;case"both":n.textRotation&&0!==n.textRotation?(t.save(),t.translate(l,c),t.rotate(n.textRotation*Math.PI/180),"top"==n.textBaseline?n.maxWidth?(this.setCtxGlobalAlpha(t,"fill",n),t.fillText(i[f],0,a*f,n.maxWidth),this.setCtxGlobalAlpha(t,"reset",n),this.setCtxGlobalAlpha(t,"stroke",n),t.strokeText(i[f],0,a*f,n.maxWidth),this.setCtxGlobalAlpha(t,"reset",n)):(this.setCtxGlobalAlpha(t,"fill",n),t.fillText(i[f],0,a*f),this.setCtxGlobalAlpha(t,"reset",n),this.setCtxGlobalAlpha(t,"stroke",n),t.strokeText(i[f],0,a*f),this.setCtxGlobalAlpha(t,"reset",n)):"bottom"==n.textBaseline?n.maxWidth?(this.setCtxGlobalAlpha(t,"fill",n),t.fillText(i[f],0,a*(f+1)-s.height,n.maxWidth),this.setCtxGlobalAlpha(t,"reset",n),this.setCtxGlobalAlpha(t,"stroke",n),t.strokeText(i[f],0,a*(f+1)-s.height,n.maxWidth),this.setCtxGlobalAlpha(t,"reset",n)):(this.setCtxGlobalAlpha(t,"fill",n),t.fillText(i[f],0,a*(f+1)-s.height),this.setCtxGlobalAlpha(t,"reset",n),this.setCtxGlobalAlpha(t,"stroke",n),t.strokeText(i[f],0,a*(f+1)-s.height),this.setCtxGlobalAlpha(t,"reset",n)):n.maxWidth?(this.setCtxGlobalAlpha(t,"fill",n),t.fillText(i[f],0,a*(f+1)-s.height/2-a/2,n.maxWidth),this.setCtxGlobalAlpha(t,"reset",n),this.setCtxGlobalAlpha(t,"stroke",n),t.strokeText(i[f],0,a*(f+1)-s.height/2-a/2,n.maxWidth),this.setCtxGlobalAlpha(t,"reset",n)):(this.setCtxGlobalAlpha(t,"fill",n),t.fillText(i[f],0,a*(f+1)-s.height/2-a/2),this.setCtxGlobalAlpha(t,"reset",n),this.setCtxGlobalAlpha(t,"stroke",n),t.strokeText(i[f],0,a*(f+1)-s.height/2-a/2),this.setCtxGlobalAlpha(t,"reset",n)),t.restore()):n.maxWidth?(this.setCtxGlobalAlpha(t,"fill",n),t.fillText(i[f],u,o,n.maxWidth),this.setCtxGlobalAlpha(t,"reset",n),this.setCtxGlobalAlpha(t,"stroke",n),t.strokeText(i[f],u,o,n.maxWidth),this.setCtxGlobalAlpha(t,"reset",n)):(this.setCtxGlobalAlpha(t,"fill",n),t.fillText(i[f],u,o),this.setCtxGlobalAlpha(t,"reset",n),this.setCtxGlobalAlpha(t,"stroke",n),t.strokeText(i[f],u,o),this.setCtxGlobalAlpha(t,"reset",n));break;default:this.setCtxGlobalAlpha(t,"fill",n),n.textRotation&&0!==n.textRotation?(t.save(),t.translate(l,c),t.rotate(n.textRotation*Math.PI/180),"top"==n.textBaseline?n.maxWidth?t.fillText(i[f],0,a*f,n.maxWidth):t.fillText(i[f],0,a*f):"bottom"==n.textBaseline?n.maxWidth?t.fillText(i[f],0,a*(f+1)-s.height,n.maxWidth):t.fillText(i[f],0,a*(f+1)-s.height):n.maxWidth?t.fillText(i[f],0,a*(f+1)-s.height/2-a/2,n.maxWidth):t.fillText(i[f],0,a*(f+1)-s.height/2-a/2),t.restore()):n.maxWidth?t.fillText(i[f],u,o,n.maxWidth):t.fillText(i[f],u,o),this.setCtxGlobalAlpha(t,"reset",n)}o+=a}t.restore()}}},{key:"getRect",value:function(t){if(t.__rect)return t.__rect;for(var e,r,n,o,i=this.getTextBackground(t,!0),a=0,s=i.length;a<s;a++){var u=i[a];0==a?(e=u[0],n=u[0],r=u[1],o=u[1]):(u[0]<e&&(e=u[0]),u[0]>n&&(n=u[0]),u[1]<r&&(r=u[1]),u[1]>o&&(o=u[1]))}return t.__rect={x:e,y:r,width:n-e,height:o-r},t.__rect}},{key:"getRectNoRotation",value:function(t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var e,r=this.refOriginalPosition,n=NU.Util_area.getTextHeight("ZH",t.textFont),o=NU.Util_area.getTextWidth(t.text,t.textFont),i=NU.Util_area.getTextHeight(t.text,t.textFont),a=t.x+r[0];"end"==t.textAlign||"right"==t.textAlign?a-=o:"center"==t.textAlign&&(a-=o/2),e="top"==t.textBaseline?t.y+r[1]:"bottom"==t.textBaseline?t.y+r[1]-i:t.y+r[1]-i/2;var s,u=!1;if(t.maxWidth){var l=parseInt(t.maxWidth);l<o&&(s=o,u=!0,o=l),a=t.x+r[0],"end"==t.textAlign||"right"==t.textAlign?a-=o:"center"==t.textAlign&&(a-=o/2)}t.textFont&&(t.textFont.toLowerCase().indexOf("italic")>-1&&(o+=!0===u?n/3*(o/s):n/3));return{x:a,y:e,width:o,height:i}}},{key:"getTextBackground",value:function(t,e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var r=this.refOriginalPosition;if(!e&&t.__textBackground)return t.__textBackground;var n=this.getRectNoRotation(t),o=t.x+r[0],i=t.y+r[1],a=[];if(t.textRotation&&0!==t.textRotation){var s=t.textRotation,u=this.getRotatedLocation(n.x,n.y,o,i,s),l=this.getRotatedLocation(n.x+n.width,n.y,o,i,s),c=this.getRotatedLocation(n.x+n.width,n.y+n.height,o,i,s),f=this.getRotatedLocation(n.x,n.y+n.height,o,i,s);a.push(u),a.push(l),a.push(c),a.push(f)}else{var p=[n.x,n.y],h=[n.x+n.width,n.y],y=[n.x+n.width,n.y+n.height],d=[n.x,n.y+n.height];a.push(p),a.push(h),a.push(y),a.push(d)}return t.__textBackground=a,t.__textBackground}},{key:"getRotatedLocation",value:function(t,e,r,n,o){var i,a,s=new Array;return e=-e,n=-n,o=-o,i=(t-r)*Math.cos(o/180*Math.PI)-(e-n)*Math.sin(o/180*Math.PI)+r,a=(t-r)*Math.sin(o/180*Math.PI)+(e-n)*Math.cos(o/180*Math.PI)+n,s[0]=i,s[1]=-a,s}}])&&tG(r.prototype,n),o&&tG(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function sG(t){"@babel/helpers - typeof";return(sG="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function uG(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,lG(n.key),n)}}function lG(t){var e=function(t,e){if("object"!=sG(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=sG(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==sG(e)?e:e+""}function cG(t,e,r){return e=pG(e),function(t,e){if(e&&("object"===sG(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],pG(t).constructor):e.apply(t,r))}function fG(){return(fG="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=pG(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function pG(t){return(pG=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function hG(t,e){return(hG=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var yG=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=cG(this,e,[t])).type="smiccircle",r.refOriginalPosition&&2===r.refOriginalPosition.length||(r.refOriginalPosition=[0,0]),r.CLASS_NAME="SuperMap.LevelRenderer.Shape.SmicCircle",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&hG(t,e)}(e,HU),r=e,(n=[{key:"destroy",value:function(){this.type=null,fG(pG(e.prototype),"destroy",this).call(this)}},{key:"buildPath",value:function(t,e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var r=this.refOriginalPosition,n=e.x+r[0],o=e.y+r[1];return t.moveTo(n+e.r,o),t.arc(n,o,e.r,0,2*Math.PI,!0),!0}},{key:"getRect",value:function(t){if(t.__rect)return t.__rect;this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var e,r=this.refOriginalPosition,n=t.x+r[0],o=t.y+r[1],i=t.r;return e="stroke"==t.brushType||"fill"==t.brushType?t.lineWidth||1:0,t.__rect={x:Math.round(n-i-e/2),y:Math.round(o-i-e/2),width:2*i+e,height:2*i+e},t.__rect}}])&&uG(r.prototype,n),o&&uG(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function dG(t){"@babel/helpers - typeof";return(dG="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function vG(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,mG(n.key),n)}}function mG(t){var e=function(t,e){if("object"!=dG(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=dG(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==dG(e)?e:e+""}function bG(t,e,r){return e=SG(e),function(t,e){if(e&&("object"===dG(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],SG(t).constructor):e.apply(t,r))}function gG(){return(gG="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=SG(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function SG(t){return(SG=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function wG(t,e){return(wG=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var _G=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=bG(this,e,[t])).type="smicpolygon",r.holePolygonPointLists=null,r.refOriginalPosition&&2===r.refOriginalPosition.length||(r.refOriginalPosition=[0,0]),r.CLASS_NAME="SuperMap.LevelRenderer.Shape.SmicPolygon",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&wG(t,e)}(e,HU),r=e,(n=[{key:"destroy",value:function(){this.type=null,this.holePolygonPointLists=null,gG(SG(e.prototype),"destroy",this).call(this)}},{key:"brush",value:function(t,e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var r=this.style;e&&(r=this.getHighlightStyle(r,this.highlightStyle||{})),t.save(),this.setContext(t,r),this.setTransform(t);var n=!1;"fill"!=r.brushType&&"both"!=r.brushType&&void 0!==r.brushType||(t.beginPath(),"dashed"==r.lineType||"dotted"==r.lineType||"dot"==r.lineType||"dash"==r.lineType||"dashdot"==r.lineType||"longdash"==r.lineType||"longdashdot"==r.lineType?this.buildPath(t,{lineType:"solid",lineWidth:r.lineWidth,pointList:r.pointList}):(this.buildPath(t,r),n=!0),t.closePath(),this.setCtxGlobalAlpha(t,"fill",r),t.fill(),this.setCtxGlobalAlpha(t,"reset",r)),r.lineWidth>0&&("stroke"==r.brushType||"both"==r.brushType)&&(n||(t.beginPath(),this.buildPath(t,r)),this.setCtxGlobalAlpha(t,"stroke",r),t.stroke(),this.setCtxGlobalAlpha(t,"reset",r)),this.drawText(t,r,this.style);var o=Tt.cloneObject(r);if(o.pointList&&this.holePolygonPointLists&&this.holePolygonPointLists.length>0)for(var i=this.holePolygonPointLists,a=i.length,s=0;s<a;s++){var u=i[s];o.pointList=u,t.globalCompositeOperation="destination-out",n=!1,"fill"!=o.brushType&&"both"!=o.brushType&&void 0!==o.brushType||(t.beginPath(),"dashed"==o.lineType||"dotted"==o.lineType||"dot"==o.lineType||"dash"==o.lineType||"dashdot"==o.lineType||"longdash"==o.lineType||"longdashdot"==o.lineType?this.buildPath(t,{lineType:"solid",lineWidth:o.lineWidth,pointList:o.pointList}):(this.buildPath(t,o),n=!0),t.closePath(),this.setCtxGlobalAlpha(t,"fill",o),t.fill(),this.setCtxGlobalAlpha(t,"reset",o)),o.lineWidth>0&&("stroke"==o.brushType||"both"==o.brushType)?(n||(t.beginPath(),this.buildPath(t,o)),t.globalCompositeOperation="source-over",this.setCtxGlobalAlpha(t,"stroke",o),t.stroke(),this.setCtxGlobalAlpha(t,"reset",o)):t.globalCompositeOperation="source-over"}t.restore()}},{key:"buildPath",value:function(t,e){e.showShadow&&(t.shadowBlur=e.shadowBlur,t.shadowColor=e.shadowColor,t.shadowOffsetX=e.shadowOffsetX,t.shadowOffsetY=e.shadowOffsetY),this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var r=this.refOriginalPosition,n=e.pointList;if(!(n.length<2))if(e.smooth&&"spline"!==e.smooth){var o,i,a,s=NU.SUtil_smoothBezier(n,e.smooth,!0,e.smoothConstraint,r);t.moveTo(n[0][0]+r[0],n[0][1]+r[1]);for(var u=n.length,l=0;l<u;l++)o=s[2*l],i=s[2*l+1],a=[n[(l+1)%u][0]+r[0],n[(l+1)%u][1]+r[1]],t.bezierCurveTo(o[0],o[1],i[0],i[1],a[0],a[1])}else if("spline"===e.smooth&&(n=NU.SUtil_smoothSpline(n,!0,null,r)),e.lineType&&"solid"!=e.lineType){if("dashed"===e.lineType||"dotted"===e.lineType||"dot"===e.lineType||"dash"===e.lineType||"longdash"===e.lineType){var c=e._dashLength||(e.lineWidth||1)*("dashed"==e.lineType?5:1);e._dashLength=c;var f=e.lineWidth||1,p=f,h=f;"dashed"===e.lineType&&(p*=5,h*=5,e.lineCap&&"butt"!==e.lineCap&&(p-=f,h+=f)),"dotted"===e.lineType&&e.lineCap&&"butt"!==e.lineCap&&(p=1,h+=f),"dot"===e.lineType&&(h*=4,e.lineCap&&"butt"!==e.lineCap&&(p=1,h+=f)),"dash"===e.lineType&&(p*=4,h*=4,e.lineCap&&"butt"!==e.lineCap&&(p-=f,h+=f)),"longdash"===e.lineType&&(p*=8,h*=4,e.lineCap&&"butt"!==e.lineCap&&(p-=f,h+=f)),t.moveTo(n[0][0]+r[0],n[0][1]+r[1]);for(var y=1;y<n.length;y++)NU.SUtil_dashedLineTo(t,n[y-1][0]+r[0],n[y-1][1]+r[1],n[y][0]+r[0],n[y][1]+r[1],f,[p,h]);NU.SUtil_dashedLineTo(t,n[n.length-1][0]+r[0],n[n.length-1][1]+r[1],n[0][0]+r[0],n[0][1]+r[1],f,[p,h])}else if("dashdot"===e.lineType||"longdashdot"===e.lineType){var d=e._dashLength||(e.lineWidth||1)*("dashed"==e.lineType?5:1);e._dashLength=d;var v=e.lineWidth||1,m=v,b=v,g=v,S=v;"dashdot"===e.lineType&&(m*=4,b*=4,S*=4,e.lineCap&&"butt"!==e.lineCap&&(m-=v,b+=v,g=1,S+=v)),"longdashdot"===e.lineType&&(m*=8,b*=4,S*=4,e.lineCap&&"butt"!==e.lineCap&&(m-=v,b+=v,g=1,S+=v)),t.moveTo(n[0][0]+r[0],n[0][1]+r[1]);for(var w=1;w<n.length;w++)NU.SUtil_dashedLineTo(t,n[w-1][0]+r[0],n[w-1][1]+r[1],n[w][0]+r[0],n[w][1]+r[1],v,[m,b,g,S]);NU.SUtil_dashedLineTo(t,n[n.length-1][0]+r[0],n[n.length-1][1]+r[1],n[0][0]+r[0],n[0][1]+r[1],v,[m,b,g,S])}}else{t.moveTo(n[0][0]+r[0],n[0][1]+r[1]);for(var _=1;_<n.length;_++)t.lineTo(n[_][0]+r[0],n[_][1]+r[1]);t.lineTo(n[0][0]+r[0],n[0][1]+r[1])}}},{key:"getRect",value:function(t,e){var r;if(e?r=e:(this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]),r=this.refOriginalPosition),t.__rect)return t.__rect;for(var n,o=Number.MAX_VALUE,i=Number.MIN_VALUE,a=Number.MAX_VALUE,s=Number.MIN_VALUE,u=t.pointList,l=0,c=u.length;l<c;l++)u[l][0]+r[0]<o&&(o=u[l][0]+r[0]),u[l][0]+r[0]>i&&(i=u[l][0]+r[0]),u[l][1]+r[1]<a&&(a=u[l][1]+r[1]),u[l][1]+r[1]>s&&(s=u[l][1]+r[1]);return n="stroke"==t.brushType||"fill"==t.brushType?t.lineWidth||1:0,t.__rect={x:Math.round(o-n/2),y:Math.round(a-n/2),width:i-o+n,height:s-a+n},t.__rect}}])&&vG(r.prototype,n),o&&vG(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function OG(t){"@babel/helpers - typeof";return(OG="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function EG(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,PG(n.key),n)}}function PG(t){var e=function(t,e){if("object"!=OG(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=OG(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==OG(e)?e:e+""}function xG(t,e,r){return e=CG(e),function(t,e){if(e&&("object"===OG(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],CG(t).constructor):e.apply(t,r))}function TG(){return(TG="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=CG(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function CG(t){return(CG=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function kG(t,e){return(kG=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var AG=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=xG(this,e,[t])).brushTypeOnly="stroke",r.textPosition="end",r.type="smicbroken-line",r.refOriginalPosition&&2===r.refOriginalPosition.length||(r.refOriginalPosition=[0,0]),r.CLASS_NAME="SuperMap.LevelRenderer.Shape.SmicBrokenLine",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&kG(t,e)}(e,HU),r=e,(n=[{key:"destroy",value:function(){this.brushTypeOnly=null,this.textPosition=null,this.type=null,TG(CG(e.prototype),"destroy",this).call(this)}},{key:"buildPath",value:function(t,e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var r=this.refOriginalPosition,n=e.pointList;if(!(n.length<2)){var o=Math.min(e.pointList.length,Math.round(e.pointListLength||e.pointList.length));if(e.smooth&&"spline"!==e.smooth){var i,a,s,u=NU.SUtil_smoothBezier(n,e.smooth,!1,e.smoothConstraint,r);t.moveTo(n[0][0]+r[0],n[0][1]+r[1]);for(var l=0;l<o-1;l++)i=u[2*l],a=u[2*l+1],s=[n[l+1][0]+r[0],n[l+1][1]+r[1]],t.bezierCurveTo(i[0],i[1],a[0],a[1],s[0],s[1])}else if("spline"===e.smooth&&(o=(n=NU.SUtil_smoothSpline(n,null,null,r)).length),e.lineType&&"solid"!==e.lineType){if("dashed"===e.lineType||"dotted"===e.lineType||"dot"===e.lineType||"dash"===e.lineType||"longdash"===e.lineType){var c=e.lineWidth||1,f=c,p=c;"dashed"===e.lineType&&(f*=5,p*=5,e.lineCap&&"butt"!==e.lineCap&&(f-=c,p+=c)),"dotted"===e.lineType&&e.lineCap&&"butt"!==e.lineCap&&(f=1,p+=c),"dot"===e.lineType&&(p*=4,e.lineCap&&"butt"!==e.lineCap&&(f=1,p+=c)),"dash"===e.lineType&&(f*=4,p*=4,e.lineCap&&"butt"!==e.lineCap&&(f-=c,p+=c)),"longdash"===e.lineType&&(f*=8,p*=4,e.lineCap&&"butt"!==e.lineCap&&(f-=c,p+=c)),t.moveTo(n[0][0]+r[0],n[0][1]+r[1]);for(var h=1;h<o;h++)NU.SUtil_dashedLineTo(t,n[h-1][0]+r[0],n[h-1][1]+r[1],n[h][0]+r[0],n[h][1]+r[1],c,[f,p])}else if("dashdot"===e.lineType||"longdashdot"===e.lineType){var y=e.lineWidth||1,d=y,v=y,m=y,b=y;"dashdot"===e.lineType&&(d*=4,v*=4,b*=4,e.lineCap&&"butt"!==e.lineCap&&(d-=y,v+=y,m=1,b+=y)),"longdashdot"===e.lineType&&(d*=8,v*=4,b*=4,e.lineCap&&"butt"!==e.lineCap&&(d-=y,v+=y,m=1,b+=y)),y=(e.lineWidth||1)*("dashed"===e.lineType?5:1),t.moveTo(n[0][0]+r[0],n[0][1]+r[1]);for(var g=1;g<o;g++)NU.SUtil_dashedLineTo(t,n[g-1][0]+r[0],n[g-1][1]+r[1],n[g][0]+r[0],n[g][1]+r[1],y,[d,v,m,b])}}else{t.moveTo(n[0][0]+r[0],n[0][1]+r[1]);for(var S=1;S<o;S++)t.lineTo(n[S][0]+r[0],n[S][1]+r[1])}}}},{key:"getRect",value:function(t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var e=this.refOriginalPosition;return _G.prototype.getRect.apply(this,[t,e])}}])&&EG(r.prototype,n),o&&EG(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function jG(t){"@babel/helpers - typeof";return(jG="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function NG(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,IG(n.key),n)}}function IG(t){var e=function(t,e){if("object"!=jG(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=jG(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==jG(e)?e:e+""}function MG(t,e,r){return e=LG(e),function(t,e){if(e&&("object"===jG(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],LG(t).constructor):e.apply(t,r))}function RG(){return(RG="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=LG(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function LG(t){return(LG=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function DG(t,e){return(DG=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var BG=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=MG(this,e,[t])).type="smicimage",r._imageCache={},r.refOriginalPosition&&2===r.refOriginalPosition.length||(r.refOriginalPosition=[0,0]),r.CLASS_NAME="SuperMap.LevelRenderer.Shape.SmicImage",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&DG(t,e)}(e,HU),r=e,(n=[{key:"destroy",value:function(){this.type=null,this._imageCache=null,RG(LG(e.prototype),"destroy",this).call(this)}},{key:"brush",value:function(t,r,n){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var o=this.refOriginalPosition,i=this.style||{};r&&(i=this.getHighlightStyle(i,this.highlightStyle||{}));var a=i.image,s=this;if("string"==typeof a){var u=a;this._imageCache[u]?a=this._imageCache[u]:((a=new Image).onload=function(){a.onload=null,clearTimeout(e._refreshTimeout),e._needsRefresh.push(s),e._refreshTimeout=setTimeout(function(){n&&n(e._needsRefresh),e._needsRefresh=[]},10)},a.src=u,this._imageCache[u]=a)}if(a){if("IMG"==a.nodeName.toUpperCase())if(window.ActiveXObject){if("complete"!=a.readyState)return}else if(!a.complete)return;var l=i.width||a.width,c=i.height||a.height,f=i.x+o[0],p=i.y+o[1];if(!a.width||!a.height)return;if(t.save(),this.doClip(t),this.setContext(t,i),this.setTransform(t),i.sWidth&&i.sHeight){var h=i.sx+o[0]||0,y=i.sy+o[1]||0;t.drawImage(a,h,y,i.sWidth,i.sHeight,f,p,l,c)}else if(i.sx&&i.sy){var d=i.sx+o[0],v=i.sy+o[1],m=l-d,b=c-v;t.drawImage(a,d,v,m,b,f,p,l,c)}else t.drawImage(a,f,p,l,c);i.width||(i.width=l),i.height||(i.height=c),this.style.width||(this.style.width=l),this.style.height||(this.style.height=c),this.drawText(t,i,this.style),t.restore()}}},{key:"getRect",value:function(t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var e=this.refOriginalPosition;return{x:t.x+e[0],y:t.y+e[1],width:t.width,height:t.height}}},{key:"clearCache",value:function(){this._imageCache={}}}])&&NG(r.prototype,n),o&&NG(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function FG(t){"@babel/helpers - typeof";return(FG="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function UG(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,GG(n.key),n)}}function GG(t){var e=function(t,e){if("object"!=FG(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=FG(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==FG(e)?e:e+""}function VG(t,e,r){return e=HG(e),function(t,e){if(e&&("object"===FG(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],HG(t).constructor):e.apply(t,r))}function zG(){return(zG="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=HG(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function HG(t){return(HG=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function qG(t,e){return(qG=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}BG._needsRefresh=[],BG._refreshTimeout=null;var JG=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=VG(this,e,[t])).type="smicrectangle",r.refOriginalPosition&&2===r.refOriginalPosition.length||(r.refOriginalPosition=[0,0]),r.CLASS_NAME="SuperMap.LevelRenderer.Shape.SmicRectangle",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&qG(t,e)}(e,HU),r=e,(n=[{key:"destroy",value:function(){this.type=null,zG(HG(e.prototype),"destroy",this).call(this)}},{key:"_buildRadiusPath",value:function(t,e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var r,n,o,i,a,s=this.refOriginalPosition,u=e.x+s[0],l=e.y+s[1],c=e.width,f=e.height,p=e.radius;"number"==typeof p?r=n=o=i=p:p instanceof Array?1===p.length?r=n=o=i=p[0]:2===p.length?(r=o=p[0],n=i=p[1]):3===p.length?(r=p[0],n=i=p[1],o=p[2]):(r=p[0],n=p[1],o=p[2],i=p[3]):r=n=o=i=0,r+n>c&&(r*=c/(a=r+n),n*=c/a),o+i>c&&(o*=c/(a=o+i),i*=c/a),n+o>f&&(n*=f/(a=n+o),o*=f/a),r+i>f&&(r*=f/(a=r+i),i*=f/a),t.moveTo(u+r,l),t.lineTo(u+c-n,l),0!==n&&t.quadraticCurveTo(u+c,l,u+c,l+n),t.lineTo(u+c,l+f-o),0!==o&&t.quadraticCurveTo(u+c,l+f,u+c-o,l+f),t.lineTo(u+i,l+f),0!==i&&t.quadraticCurveTo(u,l+f,u,l+f-i),t.lineTo(u,l+r),0!==r&&t.quadraticCurveTo(u,l,u+r,l)}},{key:"buildPath",value:function(t,e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var r=this.refOriginalPosition;e.radius?this._buildRadiusPath(t,e):(t.moveTo(e.x+r[0],e.y+r[1]),t.lineTo(e.x+r[0]+e.width,e.y+r[1]),t.lineTo(e.x+r[0]+e.width,e.y+r[1]+e.height),t.lineTo(e.x+r[0],e.y+r[1]+e.height),t.lineTo(e.x+r[0],e.y+r[1])),t.closePath()}},{key:"getRect",value:function(t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var e,r=this.refOriginalPosition;return t.__rect?t.__rect:(e="stroke"==t.brushType||"fill"==t.brushType?t.lineWidth||1:0,t.__rect={x:Math.round(t.x+r[0]-e/2),y:Math.round(t.y+r[1]-e/2),width:t.width+e,height:t.height+e},t.__rect)}}])&&UG(r.prototype,n),o&&UG(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function WG(t){"@babel/helpers - typeof";return(WG="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function KG(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,YG(n.key),n)}}function YG(t){var e=function(t,e){if("object"!=WG(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=WG(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==WG(e)?e:e+""}function QG(t,e,r){return e=ZG(e),function(t,e){if(e&&("object"===WG(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],ZG(t).constructor):e.apply(t,r))}function XG(){return(XG="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ZG(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function ZG(t){return(ZG=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function $G(t,e){return($G=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var tV=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=QG(this,e,[t])).type="smicsector",r.refOriginalPosition&&2===r.refOriginalPosition.length||(r.refOriginalPosition=[0,0]),r.CLASS_NAME="SuperMap.LevelRenderer.Shape.SmicSector",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&$G(t,e)}(e,HU),r=e,(n=[{key:"destroy",value:function(){this.type=null,XG(ZG(e.prototype),"destroy",this).call(this)}},{key:"buildPath",value:function(t,e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var r=this.refOriginalPosition,n=e.x+r[0],o=e.y+r[1],i=e.r0||0,a=e.r,s=e.startAngle,u=e.endAngle,l=e.clockWise||!1;s=NU.Util_math.degreeToRadian(s),u=NU.Util_math.degreeToRadian(u),l||(s=-s,u=-u);var c=NU.Util_math.cos(s),f=NU.Util_math.sin(s);t.moveTo(c*i+n,f*i+o),t.lineTo(c*a+n,f*a+o),t.arc(n,o,a,s,u,!l),t.lineTo(NU.Util_math.cos(u)*i+n,NU.Util_math.sin(u)*i+o),0!==i&&t.arc(n,o,i,u,s,l),t.closePath()}},{key:"getRect",value:function(t){if(t.__rect)return t.__rect;this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var e=this.refOriginalPosition,r=NU.Util_vector.create(),n=NU.Util_vector.create(),o=NU.Util_vector.create(),i=NU.Util_vector.create(),a=t.x+e[0],s=t.y+e[1],u=t.r0||0,l=t.r,c=NU.Util_math.degreeToRadian(t.startAngle),f=NU.Util_math.degreeToRadian(t.endAngle),p=t.clockWise;return p||(c=-c,f=-f),u>1?NU.Util_computeBoundingBox.arc(a,s,u,c,f,!p,r,o):(r[0]=o[0]=a,r[1]=o[1]=s),NU.Util_computeBoundingBox.arc(a,s,l,c,f,!p,n,i),NU.Util_vector.min(r,r,n),NU.Util_vector.max(o,o,i),t.__rect={x:r[0],y:r[1],width:o[0]-r[0],height:o[1]-r[1]},t.__rect}}])&&KG(r.prototype,n),o&&KG(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function eV(t){"@babel/helpers - typeof";return(eV="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function rV(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,nV(n.key),n)}}function nV(t){var e=function(t,e){if("object"!=eV(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=eV(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==eV(e)?e:e+""}var oV=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.shapeParameters=e,this.CLASS_NAME="SuperMap.Feature.ShapeFactory"}return e=t,n=[{key:"transformStyle",value:function(t){var e={},r=["normal","normal","normal","12","arial,sans-serif"],n=[!0,!1];for(var o in t)switch(o){case"fill":n[0]=t[o];break;case"fillColor":e.color=t[o];break;case"stroke":n[1]=t[o];break;case"strokeWidth":e.lineWidth=t[o];break;case"strokeLinecap":e.lineCap=t[o];break;case"strokeLineJoin":e.lineJoin=t[o];break;case"strokeDashstyle":e.lineType=t[o];break;case"pointRadius":e.r=t[o];break;case"label":e.text=t[o];break;case"labelRect":e.labelRect=t[o];break;case"fontColor":e.textColor=t[o];break;case"fontStyle":r[0]=t[o];break;case"fontVariant":r[1]=t[o];break;case"fontWeight":r[2]=t[o];break;case"fontSize":var i="";t[o]&&t[o].toString().indexOf("px")<0&&(i="px"),r[3]=t[o]+i;break;case"fontFamily":r[4]=t[o];break;case"fontOpacity":e.opacity=t[o];break;case"labelPosition":e.textPosition=t[o];break;case"labelAlign":e.textAlign=t[o];break;case"labelBaseline":e.textBaseline=t[o];break;case"labelRotation":e.textRotation=t[o];break;default:e[o]=t[o]}return e.textFont=r.join(" "),!0===n[0]&&!1===n[1]?e.brushType="fill":!1===n[0]&&!0===n[1]?e.brushType="stroke":!0===n[0]&&!0===n[1]?e.brushType="both":e.brushType="fill",null==e.lineWidth&&(e.lineWidth=1),e}},{key:"Background",value:function(t,e,r){var n=r||{},o=new rF(e[0],e[3],Math.abs(e[2]-e[0]),Math.abs(e[3]-e[1]));return o.style={fillColor:"#f3f3f3"},n.backgroundStyle&&Tt.copyAttributesWithClip(o.style,n.backgroundStyle),n.backgroundRadius&&(o.style.radius=n.backgroundRadius),o.clickable=!1,o.hoverable=!1,t.createShape(o)}},{key:"GraphAxis",value:function(t,e,r,n){var o=e,i=r||{},a=[],s=[],u=!!i.useXReferenceLine&&i.useXReferenceLine,l=i.axisYTick&&!isNaN(i.axisYTick)?i.axisYTick:0,c=[],f=[];if(0==l){if(f.push([o[0],o[3]-5]),f.push([o[0],o[1]]),i.axis3DParameter&&!isNaN(i.axis3DParameter)&&i.axis3DParameter>=15){var p=parseInt(i.axis3DParameter),h=[o[0]-p,o[1]+p];i.axisUseArrow?(c.push([h[0]+1.5,h[1]-7.5]),c.push([h[0]-1,h[1]+1]),c.push([h[0]+7.5,h[1]-1.5]),f.push([h[0],h[1]])):f.push([h[0],h[1]]),f.push([o[0],o[1]])}f.push([o[2]+5,o[1]])}else{var y=Math.abs(o[1]-o[3])/l,d=o[3];f.push([o[0],d-5]);for(var v=0;v<l;v++){if(f.push([o[0],d]),f.push([o[0]-5,d]),f.push([o[0],d]),u){var m=new UB([[o[0],d],[o[2],d]]);m.style={strokeColor:"#cfcfcf",strokeLinecap:"butt",strokeLineJoin:"round",strokeWidth:1},m.clickable=!1,m.hoverable=!1,i.xReferenceLineStyle&&Tt.copyAttributesWithClip(m.style,i.xReferenceLineStyle),a.push(t.createShape(m))}d+=y}if(f.push([o[0],o[1]]),i.axis3DParameter&&!isNaN(i.axis3DParameter)&&i.axis3DParameter>=15){var b=parseInt(i.axis3DParameter),g=[o[0]-b,o[1]+b];i.axisUseArrow?(c.push([g[0]+1.5,g[1]-7.5]),c.push([g[0]-1,g[1]+1]),c.push([g[0]+7.5,g[1]-1.5]),f.push([g[0],g[1]])):f.push([g[0],g[1]]),f.push([o[0],o[1]])}f.push([o[2]+5,o[1]])}if(i.axisUseArrow){var S=[[o[2]+5,o[1]+4],[o[2]+13,o[1]],[o[2]+5,o[1]-4]],w=[[o[0]-4,o[3]-5],[o[0],o[3]-13],[o[0]+4,o[3]-5]],_=new KB(S);_.style={fillColor:"#008acd"},Tt.copyAttributesWithClip(_.style,i.axisStyle),s.push(t.createShape(_));var O=new KB(w);if(O.style={fillColor:"#008acd"},Tt.copyAttributesWithClip(O.style,i.axisStyle),s.push(t.createShape(O)),i.axis3DParameter&&!isNaN(i.axis3DParameter)&&i.axis3DParameter>=15){var E=new KB(c);E.style={fillColor:"#008acd"},Tt.copyAttributesWithClip(E.style,i.axisStyle),s.push(t.createShape(E))}}var P=new UB(f);P.style={strokeLinecap:"butt",strokeLineJoin:"round",strokeColor:"#008acd",strokeWidth:1},i.axisStyle&&Tt.copyAttributesWithClip(P.style,i.axisStyle),P.clickable=!1,P.hoverable=!1;var x=[t.createShape(P)],T=[];if(i.axisYLabels&&i.axisYLabels.length&&i.axisYLabels.length>0){var C=i.axisYLabels,k=C.length,A=[0,0];if(i.axisYLabelsOffset&&i.axisYLabelsOffset.length&&(A=i.axisYLabelsOffset),1==k){var j=new bF(o[0]-5+A[0],o[3]+A[1],C[0]);j.style={labelAlign:"right"},i.axisYLabelsStyle&&Tt.copyAttributesWithClip(j.style,i.axisYLabelsStyle),j.clickable=!1,j.hoverable=!1,T.push(t.createShape(j))}else for(var N=o[3],I=Math.abs(o[1]-o[3])/(k-1),M=0;M<k;M++){var R=new bF(o[0]-5+A[0],N+A[1],C[M]);R.style={labelAlign:"right"},i.axisYLabelsStyle&&Tt.copyAttributesWithClip(R.style,i.axisYLabelsStyle),R.clickable=!1,R.hoverable=!1,T.push(t.createShape(R)),N+=I}}var L=[];if(i.axisXLabels&&i.axisXLabels.length&&i.axisXLabels.length>0){var D=i.axisXLabels,B=D.length,F=[0,0];if(i.axisXLabelsOffset&&i.axisXLabelsOffset.length&&(F=i.axisXLabelsOffset),n&&n.xPositions&&n.xPositions.length&&n.xPositions.length==B)for(var U=n.xPositions,G=0;G<B;G++){var V=new bF(U[G]+F[0],o[1]+F[1],D[G]);V.style={labelAlign:"center",labelBaseline:"top"},i.axisXLabelsStyle&&Tt.copyAttributesWithClip(V.style,i.axisXLabelsStyle),V.clickable=!1,V.hoverable=!1,L.push(t.createShape(V))}else if(1==B){var z=new bF(o[0]-5+F[0],o[1]+F[0],D[0]);z.style={labelAlign:"center",labelBaseline:"top"},i.axisXLabelsStyle&&Tt.copyAttributesWithClip(z.style,i.axisXLabelsStyle),z.clickable=!1,z.hoverable=!1,L.push(t.createShape(z))}else for(var H=o[0],q=Math.abs(o[2]-o[0])/(B-1),J=0;J<B;J++){var W=new bF(H+F[0],o[1]+F[1],D[J]);W.style={labelAlign:"center",labelBaseline:"top"},i.axisXLabelsStyle&&Tt.copyAttributesWithClip(W.style,i.axisXLabelsStyle),W.clickable=!1,W.hoverable=!1,L.push(t.createShape(W)),H+=q}}return a.concat(x).concat(T).concat(L).concat(s)}},{key:"ShapeStyleTool",value:function(t,e,r,n,o,i){var a=t||{};if(e&&Tt.copyAttributesWithClip(a,e),r&&r.length&&void 0!==o&&!isNaN(o)&&o>=0&&r[o]&&Tt.copyAttributesWithClip(a,r[o]),n&&n.length&&void 0!==i)for(var s=n,u=s.length,l=parseFloat(i),c=0;c<u;c++)if(s[c].start<=l&&l<s[c].end){Tt.copyAttributesWithClip(a,s[c].style);break}return a}}],(r=[{key:"destroy",value:function(){this.shapeParameters=null}},{key:"createShape",value:function(e){if(e&&(this.shapeParameters=e),!this.shapeParameters)return null;var r=this.shapeParameters;if(r instanceof NB){var n=new Object;n.x=r.x,n.y=r.y,n.r=r.r,n=Tt.copyAttributesWithClip(n,r.style,["x","y"]);var o=new ZU;return o.style=t.transformStyle(n),o.highlightStyle=t.transformStyle(r.highlightStyle),Tt.copyAttributesWithClip(o,r,["x","y","style","highlightStyle"]),o}if(r instanceof UB){if(!r.pointList)return null;var i=new Object;i.pointList=r.pointList,i=Tt.copyAttributesWithClip(i,r.style,["pointList"]);var a=new AG;return a.style=t.transformStyle(i),a.highlightStyle=t.transformStyle(r.highlightStyle),Tt.copyAttributesWithClip(a,r,["pointList","style","highlightStyle"]),a}if(r instanceof KB){if(!r.pointList)return null;var s=new Object;s.pointList=r.pointList,s=Tt.copyAttributesWithClip(s,r.style,["pointList"]);var u=new _G;return u.style=t.transformStyle(s),u.highlightStyle=t.transformStyle(r.highlightStyle),Tt.copyAttributesWithClip(u,r,["pointList","style","highlightStyle"]),u}if(r instanceof rF){if(!r.x&&!r.y&!r.width&!r.height)return null;var l=new Object;l.x=r.x,l.y=r.y,l.width=r.width,l.height=r.height,l=Tt.copyAttributesWithClip(l,r.style,["x","y","width","height"]);var c=new JG;return c.style=t.transformStyle(l),c.highlightStyle=t.transformStyle(r.highlightStyle),Tt.copyAttributesWithClip(c,r,["x","y","width","height","style","highlightStyle"]),c}if(r instanceof cF){var f=new Object;f.x=r.x,f.y=r.y,f.r=r.r,f.startAngle=r.startAngle,f.endAngle=r.endAngle,r.r0&&(f.r0=r.r0),r.clockWise&&(f.clockWise=r.clockWise),f=Tt.copyAttributesWithClip(f,r.style,["x","y","r","startAngle","endAngle","r0","endAngle"]);var p=new tV;return p.style=t.transformStyle(f),p.highlightStyle=t.transformStyle(r.highlightStyle),Tt.copyAttributesWithClip(p,r,["x","y","r","startAngle","endAngle","r0","endAngle","style","highlightStyle"]),p}if(r instanceof bF){var h=new Object;h.x=r.x,h.y=r.y,h.text=r.text,h=Tt.copyAttributesWithClip(h,r.style,["x","y","text"]);var y=new aG;return y.style=t.transformStyle(h),y.highlightStyle=t.transformStyle(r.highlightStyle),Tt.copyAttributesWithClip(y,r,["x","y","text","style","highlightStyle"]),y}if(r instanceof xF){var d=new Object;d.x=r.x,d.y=r.y,r.image&&(d.image=r.image),r.width&&(d.width=r.width),r.height&&(d.height=r.height),r.sx&&(d.sx=r.sx),r.sy&&(d.sy=r.sy),r.sWidth&&(d.sWidth=r.sWidth),r.sHeight&&(d.sHeight=r.sHeight),d=Tt.copyAttributesWithClip(d,r.style,["x","y","image","width","height","sx","sy","sWidth","sHeight"]);var v=new BG;return v.style=t.transformStyle(d),v.highlightStyle=t.transformStyle(r.highlightStyle),Tt.copyAttributesWithClip(v,r,["x","y","image","width","height","style","highlightStyle"]),v}if(r instanceof MF){var m=new Object;m.x=r.x,m.r=r.r,m.y=r.y,m=Tt.copyAttributesWithClip(m,r.style,["x","y","r"]);var b=new yG;return b.style=t.transformStyle(m),b.highlightStyle=t.transformStyle(r.highlightStyle),Tt.copyAttributesWithClip(b,r,["x","y","r","style","highlightStyle","lineWidth","text","textPosition"]),b}return null}}])&&rV(e.prototype,r),n&&rV(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,r,n}();function iV(t){"@babel/helpers - typeof";return(iV="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function aV(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,sV(n.key),n)}}function sV(t){var e=function(t,e){if("object"!=iV(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=iV(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==iV(e)?e:e+""}var uV=function(){return t=function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e&&r&&r.map&&r.renderer&&(this.id=Tt.createUniqueID(this.CLASS_NAME+"_"),this.lonlat=null,this.location=[],this.data=e,this.shapes=[],this.layer=r,this.CLASS_NAME="SuperMap.Feature.Theme")},(e=[{key:"destroy",value:function(){this.data=null,this.id=null,this.lonlat=null,this.location=null,this.shapes=null,this.layer=null}},{key:"getLocalXY",value:function(t){var e=this.layer.map.getResolution(),r=this.layer.map.getExtent();return t instanceof he||t instanceof ke?[t.x/e+-r.left/e,r.top/e-t.y/e]:t instanceof It?[t.lon/e+-r.left/e,r.top/e-t.lat/e]:null}}])&&aV(t.prototype,e),r&&aV(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function lV(t){"@babel/helpers - typeof";return(lV="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function cV(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,fV(n.key),n)}}function fV(t){var e=function(t,e){if("object"!=lV(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=lV(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==lV(e)?e:e+""}function pV(t,e,r){return e=yV(e),function(t,e){if(e&&("object"===lV(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],yV(t).constructor):e.apply(t,r))}function hV(){return(hV="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=yV(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function yV(t){return(yV=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function dV(t,e){return(dV=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var vV=function(t){function e(t,r,n,o,i,a){var s;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(s=pV(this,e,[t,r,n,o,i,a])).shapeFactory=new oV,s.shapeParameters=null,s.RelativeCoordinate=!1,s.setting=null,s.origonPoint=null,s.chartBox=null,s.chartBounds=null,s.width=null,s.height=null,s.XOffset=0,s.YOffset=0,s.DVBParameter=null,s.dataViewBox=null,s.DVBCodomain=null,s.DVBCenterPoint=null,s.DVBUnitValue=null,s.DVBOrigonPoint=null,s.DVBWidth=null,s.DVBHeight=null,s.origonPointOffset=null,s.fields=n||[],s.dataValues=null,s.lonlat=i||s.data.geometry.getBounds().getCenterLonLat(),o&&o.width&&o.height&&o.codomain&&(s.setting=o),s.CLASS_NAME="SuperMap.Feature.Theme.Graph",s}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&dV(t,e)}(e,uV),r=e,(n=[{key:"destroy",value:function(){this.shapeFactory=null,this.shapeParameters=null,this.width=null,this.height=null,this.origonPoint=null,this.chartBox=null,this.dataViewBox=null,this.chartBounds=null,this.DVBParameter=null,this.DVBOrigonPoint=null,this.DVBCenterPoint=null,this.DVBWidth=null,this.DVBHeight=null,this.DVBCodomain=null,this.DVBUnitValue=null,this.origonPointOffset=null,this.XOffset=null,this.YOffset=null,this.fields=null,this.dataValues=null,this.setting=null,hV(yV(e.prototype),"destroy",this).call(this)}},{key:"initBaseParameter",value:function(){if(!this.setting)return!1;var t=this.setting;if(!(t.width&&t.height&&t.codomain))return!1;var e=void 0===t.decimalNumber||isNaN(t.decimalNumber)?-1:t.decimalNumber,r=uV.getDataValues(this.data,this.fields,e);this.dataValues=r||[],this.width=parseFloat(t.width),this.height=parseFloat(t.height),this.DVBCodomain=t.codomain,this.XOffset=t.XOffset?t.XOffset:0,this.YOffset=t.YOffset?t.YOffset:0,this.origonPoint=[],this.chartBox=[],this.dataViewBox=[],this.DVBParameter=t.dataViewBoxParameter?t.dataViewBoxParameter:[0,0,0,0],this.DVBOrigonPoint=[],this.DVBCenterPoint=[],this.origonPointOffset=[],this.resetLocation();var n=this.width,o=this.height,i=this.location;this.origonPoint=[i[0]-n/2,i[1]-o/2];var a=this.origonPoint;this.chartBox=[a[0],a[1]+o,a[0]+n,a[1]];var s=this.chartBox,u=this.DVBParameter;this.dataViewBox=[s[0]+u[0],s[1]-u[1],s[2]-u[2],s[3]+u[3]];var l=this.dataViewBox;return!(l[0]>=l[2]||l[1]<=l[3])&&(this.DVBOrigonPoint=[l[0],l[3]],this.DVBWidth=Math.abs(l[2]-l[0]),this.DVBHeight=Math.abs(l[1]-l[3]),this.DVBCenterPoint=[this.DVBOrigonPoint[0]+this.DVBWidth/2,this.DVBOrigonPoint[1]+this.DVBHeight/2],this.origonPointOffset=[this.DVBOrigonPoint[0]-a[0],this.DVBOrigonPoint[1]-a[1]],!0)}},{key:"resetLocation",value:function(t){t&&(this.lonlat=t);var e=this.getLocalXY(this.lonlat);e[0]+=this.XOffset,e[1]+=this.YOffset,this.location=e;var r=this.width,n=this.height,o=this.location;return this.chartBounds=new Dt(o[0]-r/2,o[1]+n/2,o[0]+r/2,o[1]-n/2),this.resetLinearGradient(),o}},{key:"resetLinearGradient",value:function(){}},{key:"shapesConvertToRelativeCoordinate",value:function(){for(var t=this.shapes,e=this.location,r=0,n=t.length;r<n;r++){t[r].refOriginalPosition=e;var o=t[r].style;for(var i in o)switch(i){case"pointList":for(var a=o[i],s=0,u=a.length;s<u;s++)a[s][0]-=e[0],a[s][1]-=e[1];break;case"x":o[i]-=e[0];break;case"y":o[i]-=e[1]}}this.RelativeCoordinate=!0}},{key:"assembleShapes",value:function(){}},{key:"getLocalXY",value:function(t){return this.layer.getLocalXY(t)}}])&&cV(r.prototype,n),o&&cV(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function mV(t){"@babel/helpers - typeof";return(mV="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function bV(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,gV(n.key),n)}}function gV(t){var e=function(t,e){if("object"!=mV(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=mV(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==mV(e)?e:e+""}function SV(t,e,r){return e=_V(e),function(t,e){if(e&&("object"===mV(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],_V(t).constructor):e.apply(t,r))}function wV(){return(wV="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=_V(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function _V(t){return(_V=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function OV(t,e){return(OV=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}uV.getDataValues=function(t,e,r){if(!t.attributes)return!1;for(var n=[],o=t.attributes,i=0;i<e.length;i++)for(var a in o)if(a===e[i])try{!isNaN(r)&&r>=0?n.push(parseFloat(o[a].toString()).toFixed(r)):n.push(parseFloat(o[a].toString()))}catch(t){throw new Error("not a number")}return n.length===e.length&&n};var EV=function(t){function e(t,r,n,o,i){var a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(a=SV(this,e,[t,r,n,o,i])).CLASS_NAME="SuperMap.Feature.Theme.Bar",a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&OV(t,e)}(e,vV),r=e,(n=[{key:"destroy",value:function(){wV(_V(e.prototype),"destroy",this).call(this)}},{key:"assembleShapes",value:function(){var t={showShadow:!0,shadowBlur:8,shadowColor:"rgba(100,100,100,0.8)",shadowOffsetX:2,shadowOffsetY:2},e=this.setting;if(e.barLinearGradient||(e.barLinearGradient=[["#00FF00","#00CD00"],["#00CCFF","#5E87A2"],["#00FF66","#669985"],["#CCFF00","#94A25E"],["#FF9900","#A2945E"]]),e.dataViewBoxParameter||(void 0===e.useAxis||e.useAxis?e.dataViewBoxParameter=[45,15,15,15]:e.dataViewBoxParameter=[5,5,5,5]),this.initBaseParameter()){var r=this.DVBCodomain;this.DVBUnitValue=(r[1]-r[0])/this.DVBHeight;var n=this.dataViewBox,o=this.dataValues;if(!(o.length<1)){for(var i=0,a=o.length;i<a;i++)if(o[i]<r[0]||o[i]>r[1])return;var s=this.calculateXShapeInfo();if(s){var u=s.xPositions,l=s.width;(void 0===e.useBackground||e.useBackground)&&this.shapes.push(oV.Background(this.shapeFactory,this.chartBox,e)),(void 0===e.useAxis||e.useAxis)&&(this.shapes=this.shapes.concat(oV.GraphAxis(this.shapeFactory,n,e,s)));for(var c=0;c<o.length;c++){var f=n[1]-(o[c]-r[0])/this.DVBUnitValue,p=[[u[c]-l/2,n[1]-1],[u[c]+l/2,n[1]-1],[u[c]+l/2,f],[u[c]-l/2,f]],h=new KB(p);if(void 0===e.showShadow||e.showShadow){if(e.barShadowStyle){var y=e.barShadowStyle;y.shadowBlur&&(t.shadowBlur=y.shadowBlur),y.shadowColor&&(t.shadowColor=y.shadowColor),y.shadowOffsetX&&(t.shadowOffsetX=y.shadowOffsetX),y.shadowOffsetY&&(t.shadowOffsetY=y.shadowOffsetY)}h.style={},Tt.copyAttributesWithClip(h.style,t)}h.refDataID=this.data.id,h.dataInfo={field:this.fields[c],value:o[c]},void 0!==e.barHoverAble&&(h.hoverable=e.barHoverAble),void 0!==e.barClickAble&&(h.clickable=e.barClickAble),this.shapes.push(this.shapeFactory.createShape(h))}this.shapesConvertToRelativeCoordinate()}}}}},{key:"calculateXShapeInfo",value:function(){var t,e=this.dataViewBox,r=this.setting,n=this.dataValues.length;if(n<1)return null;var o=[],i=0,a=this.DVBWidth;if(r.xShapeBlank&&r.xShapeBlank.length&&3==r.xShapeBlank.length){var s=a-((t=r.xShapeBlank)[0]+t[2]+(n-1)*t[1]);if(s<=n)return null;i=s/n}else t=[i=a/(2*n+1),i,i];for(var u=0,l=0;l<n;l++)0==l?u=t[0]+i/2:u+=i+t[1],o.push(e[0]+u);return{xPositions:o,width:i}}},{key:"resetLinearGradient",value:function(){if(this.RelativeCoordinate)for(var t=this.shapes.length,e=this.setting.barLinearGradient,r=-1,n=0;n<t;n++){var o=this.shapes[n];if("SuperMap.LevelRenderer.Shape.SmicPolygon"===o.CLASS_NAME){var i=o.style,a=this.location[0]+i.pointList[0][0],s=this.location[0]+i.pointList[1][0];++r>=e.length&&(r%=e.length);var u=e[r][0],l=e[r][1],c=(new SD).getLinearGradient(a,0,s,0,[[0,u],[1,l]]);o.style.color=c}}}}])&&bV(r.prototype,n),o&&bV(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function PV(t){"@babel/helpers - typeof";return(PV="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function xV(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,TV(n.key),n)}}function TV(t){var e=function(t,e){if("object"!=PV(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=PV(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==PV(e)?e:e+""}function CV(t,e,r){return e=AV(e),function(t,e){if(e&&("object"===PV(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],AV(t).constructor):e.apply(t,r))}function kV(){return(kV="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=AV(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function AV(t){return(AV=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function jV(t,e){return(jV=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var NV=function(t){function e(t,r,n,o,i){var a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(a=CV(this,e,[t,r,n,o,i])).CLASS_NAME="SuperMap.Feature.Theme.Bar3D",a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&jV(t,e)}(e,vV),r=e,(n=[{key:"destroy",value:function(){kV(AV(e.prototype),"destroy",this).call(this)}},{key:"assembleShapes",value:function(){var t=this.setting;if(t.dataViewBoxParameter||(void 0===t.useAxis||t.useAxis?t.dataViewBoxParameter=[45,25,20,20]:t.dataViewBoxParameter=[5,5,5,5]),t.axisUseArrow=void 0===t.axisUseArrow||t.axisUseArrow,t.axisXLabelsOffset=void 0!==t.axisXLabelsOffset?t.axisXLabelsOffset:[-10,10],this.initBaseParameter()){var e=this.DVBCodomain;this.DVBUnitValue=(e[1]-e[0])/this.DVBHeight;var r=this.dataViewBox,n=this.dataValues;if(!(n.length<1)){for(var o=0,i=n.length;o<i;o++)if(n[o]<e[0]||n[o]>e[1])return;var a=this.calculateXShapeInfo();if(a){var s=a.xPositions,u=a.width;(void 0===t.useBackground||t.useBackground)&&this.shapes.push(oV.Background(this.shapeFactory,this.chartBox,t)),(!t.axis3DParameter||isNaN(t.axis3DParameter)||t.axis3DParameter<15)&&(t.axis3DParameter=20),(void 0===t.useAxis||t.useAxis)&&(this.shapes=this.shapes.concat(oV.GraphAxis(this.shapeFactory,r,t,a)));for(var l=t.bar3DParameter&&!isNaN(t.bar3DParameter)?t.bar3DParameter:10,c=0;c<n.length;c++){var f=r[1]-(n[c]-e[0])/this.DVBUnitValue,p=s[c]-u/2,h=s[c]+u/2,y=[[p,f],[h,f],[h-l,f+l],[p-l,f+l]],d=[[h,f],[h-l,f+l],[h-l,r[1]+l],[h,r[1]]],v=[[p-l,r[1]+l],[h-l,r[1]+l],[h-l,f+l],[p-l,f+l]];l<=0&&(v=[[p,r[1]],[h,r[1]],[h,f],[p,f]]);var m=new KB(y),b=new KB(d),g=new KB(v);t.barSideStyle=t.barSideStyle?t.barSideStyle:t.barFaceStyle,t.barSideStyleByFields=t.barSideStyleByFields?t.barSideStyleByFields:t.barFaceStyleByFields,t.barSideStyleByCodomain=t.barSideStyleByCodomain?t.barSideStyleByCodomain:t.barFaceStyleByCodomain,t.barTopStyle=t.barTopStyle?t.barTopStyle:t.barFaceStyle,t.barTopStyleByFields=t.barTopStyleByFields?t.barTopStyleByFields:t.barFaceStyleByFields,t.barTopStyleByCodomain=t.barTopStyleByCodomain?t.barTopStyleByCodomain:t.barFaceStyleByCodomain,g.style=oV.ShapeStyleTool({stroke:!0,strokeColor:"#ffffff",fillColor:"#ee9900"},t.barFaceStyle,t.barFaceStyleByFields,t.barFaceStyleByCodomain,c,n[c]),b.style=oV.ShapeStyleTool({stroke:!0,strokeColor:"#ffffff",fillColor:"#ee9900"},t.barSideStyle,t.barSideStyleByFields,t.barSideStyleByCodomain,c,n[c]),m.style=oV.ShapeStyleTool({stroke:!0,strokeColor:"#ffffff",fillColor:"#ee9900"},t.barTopStyle,t.barTopStyleByFields,t.barTopStyleByCodomain,c,n[c]),t.barSideHoverStyle=t.barSideHoverStyle?t.barSideHoverStyle:t.barFaceHoverStyle,t.barTopHoverStyle=t.barTopHoverStyle?t.barTopHoverStyle:t.barFaceHoverStyle,g.highlightStyle=oV.ShapeStyleTool({stroke:!0},t.barFaceHoverStyle),b.highlightStyle=oV.ShapeStyleTool({stroke:!0},t.barSideHoverStyle),m.highlightStyle=oV.ShapeStyleTool({stroke:!0},t.barTopHoverStyle),m.refDataID=b.refDataID=g.refDataID=this.data.id,m.isHoverByRefDataID=b.isHoverByRefDataID=g.isHoverByRefDataID=!0,m.refDataHoverGroup=b.refDataHoverGroup=g.refDataHoverGroup=Tt.createUniqueID("lr_shg"),m.dataInfo=b.dataInfo=g.dataInfo={field:this.fields[c],value:n[c]},void 0!==t.barHoverAble&&(m.hoverable=b.hoverable=g.hoverable=t.barHoverAble),void 0!==t.barClickAble&&(m.clickable=b.clickable=g.clickable=t.barClickAble),this.shapes.push(this.shapeFactory.createShape(b)),this.shapes.push(this.shapeFactory.createShape(m)),this.shapes.push(this.shapeFactory.createShape(g))}this.shapesConvertToRelativeCoordinate()}}}}},{key:"calculateXShapeInfo",value:function(){var t,e=this.dataViewBox,r=this.setting,n=this.dataValues.length;if(n<1)return null;var o=[],i=0,a=this.DVBWidth;if(r.xShapeBlank&&r.xShapeBlank.length&&3==r.xShapeBlank.length){var s=a-((t=r.xShapeBlank)[0]+t[2]+(n-1)*t[1]);if(s<=n)return null;i=s/n}else t=[i=a/(2*n+1),i,i];for(var u=0,l=0;l<n;l++)0==l?u=t[0]+i/2:u+=i+t[1],o.push(e[0]+u);return{xPositions:o,width:i}}}])&&xV(r.prototype,n),o&&xV(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function IV(t){"@babel/helpers - typeof";return(IV="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function MV(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,RV(n.key),n)}}function RV(t){var e=function(t,e){if("object"!=IV(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=IV(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==IV(e)?e:e+""}function LV(t,e,r){return e=BV(e),function(t,e){if(e&&("object"===IV(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],BV(t).constructor):e.apply(t,r))}function DV(){return(DV="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=BV(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function BV(t){return(BV=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function FV(t,e){return(FV=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var UV=function(t){function e(t,r,n,o,i,a){var s;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(s=LV(this,e,[t,r,n,o,i,a])).setting=null,o&&o.codomain&&(s.setting=o,s.DVBCodomain=s.setting.codomain),s.CLASS_NAME="SuperMap.Feature.Theme.RankSymbol",s}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&FV(t,e)}(e,vV),r=e,(n=[{key:"destroy",value:function(){this.setting=null,DV(BV(e.prototype),"destroy",this).call(this)}},{key:"initBaseParameter",value:function(){if(!this.setting)return!1;var t=this.setting;t.XOffset&&(this.XOffset=t.XOffset),t.YOffset&&(this.YOffset=t.YOffset),this.XOffset=t.XOffset?t.XOffset:0,this.YOffset=t.YOffset?t.YOffset:0,this.origonPoint=[],this.chartBox=[],this.dataViewBox=[],this.DVBParameter=t.dataViewBoxParameter?t.dataViewBoxParameter:[0,0,0,0],this.DVBOrigonPoint=[],this.DVBCenterPoint=[],this.origonPointOffset=[],this.resetLocation();var e=this.width,r=this.height,n=this.location;this.origonPoint=[n[0]-e/2,n[1]-r/2];var o=this.origonPoint;this.chartBox=[o[0],o[1]+r,o[0]+e,o[1]];var i=this.chartBox,a=this.DVBParameter;this.dataViewBox=[i[0]+a[0],i[1]-a[1],i[2]-a[2],i[3]+a[3]];var s=this.dataViewBox;return!(s[0]>=s[2]||s[1]<=s[3])&&(this.DVBOrigonPoint=[s[0],s[3]],this.DVBWidth=Math.abs(s[2]-s[0]),this.DVBHeight=Math.abs(s[1]-s[3]),this.DVBCenterPoint=[this.DVBOrigonPoint[0]+this.DVBWidth/2,this.DVBOrigonPoint[1]+this.DVBHeight/2],this.origonPointOffset=[this.DVBOrigonPoint[0]-o[0],this.DVBOrigonPoint[1]-o[1]],!0)}}])&&MV(r.prototype,n),o&&MV(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function GV(t){"@babel/helpers - typeof";return(GV="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function VV(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,zV(n.key),n)}}function zV(t){var e=function(t,e){if("object"!=GV(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=GV(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==GV(e)?e:e+""}function HV(t,e,r){return e=JV(e),function(t,e){if(e&&("object"===GV(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],JV(t).constructor):e.apply(t,r))}function qV(){return(qV="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=JV(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function JV(t){return(JV=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function WV(t,e){return(WV=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var KV=function(t){function e(t,r,n,o,i){var a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(a=HV(this,e,[t,r,n,o,i])).CLASS_NAME="SuperMap.Feature.Theme.Circle",a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&WV(t,e)}(e,UV),r=e,(n=[{key:"destroy",value:function(){qV(JV(e.prototype),"destroy",this).call(this)}},{key:"assembleShapes",value:function(){if(!this.setting)return!1;var t=this.setting;if(!t.codomain)return!1;var e=void 0===t.decimalNumber||isNaN(t.decimalNumber)?-1:t.decimalNumber,r=uV.getDataValues(this.data,this.fields,e);this.dataValues=r||[];var n=this.dataValues;t.maxR||(t.maxR=100),t.minR||(t.minR=0);var o=this.DVBCodomain;o&&o[1]-o[0]>0?this.DVBUnitValue=t.maxR/(o[1]-o[0]):this.DVBUnitValue=t.maxR;var i=this.DVBUnitValue,a=n[0]*i+t.minR;if(this.width=2*a,this.height=2*a,this.initBaseParameter()&&(!o||!(n[0]<o[0]||n[0]>o[1]))){var s=this.DVBCenterPoint,u=new MF(s[0],s[1],a);u.style=oV.ShapeStyleTool(null,t.circleStyle,null,null,0),void 0!==t.fillColor?u.style.fillColor=t.fillColor:u.style.fillColor="#ff9277",u.highlightStyle=oV.ShapeStyleTool(null,t.circleHoverStyle),void 0!==t.circleHoverAble&&(u.hoverable=t.circleHoverAble),void 0!==t.circleClickAble&&(u.clickable=t.circleClickAble),u.refDataID=this.data.id,u.dataInfo={field:this.fields[0],r:a,value:n[0]},this.shapes.push(this.shapeFactory.createShape(u)),this.shapesConvertToRelativeCoordinate()}}}])&&VV(r.prototype,n),o&&VV(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function YV(t){"@babel/helpers - typeof";return(YV="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function QV(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,XV(n.key),n)}}function XV(t){var e=function(t,e){if("object"!=YV(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=YV(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==YV(e)?e:e+""}function ZV(t,e,r){return e=tz(e),function(t,e){if(e&&("object"===YV(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],tz(t).constructor):e.apply(t,r))}function $V(){return($V="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=tz(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function tz(t){return(tz=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ez(t,e){return(ez=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var rz=function(t){function e(t,r,n,o,i,a){var s;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(s=ZV(this,e,[t,r,n,o,i,a])).CLASS_NAME="SuperMap.Feature.Theme.Line",s}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ez(t,e)}(e,vV),r=e,(n=[{key:"destroy",value:function(){$V(tz(e.prototype),"destroy",this).call(this)}},{key:"assembleShapes",value:function(){var t=this.setting;if(t.dataViewBoxParameter||(void 0===t.useAxis||t.useAxis?t.dataViewBoxParameter=[45,15,15,15]:t.dataViewBoxParameter=[5,5,5,5]),this.initBaseParameter()){var e=this.dataViewBox,r=this.DVBCodomain;this.DVBUnitValue=(r[1]-r[0])/this.DVBHeight;var n=this.DVBUnitValue,o=this.dataValues;if(!(o.length<1)){var i=this.calculateXShapeInfo();if(i){var a,s,u=i.xPositions;(void 0===t.useBackground||t.useBackground)&&this.shapes.push(oV.Background(this.shapeFactory,this.chartBox,t)),this.shapes=this.shapes.concat(oV.GraphAxis(this.shapeFactory,e,t,i));for(var l=[],c=[],f=0,p=o.length;f<p;f++){if(o[f]<r[0]||o[f]>r[1])return null;a=u[f],s=e[1]-(o[f]-r[0])/n;var h=new NB(a,s);h.style=oV.ShapeStyleTool({fillColor:"#ee9900"},t.pointStyle,t.pointStyleByFields,t.pointStyleByCodomain,f,o[f]),h.highlightStyle=oV.ShapeStyleTool(null,t.pointHoverStyle),void 0!==t.pointHoverAble&&(h.hoverable=t.pointHoverAble),void 0!==t.pointClickAble&&(h.clickable=t.pointClickAble),h.refDataID=this.data.id,h.dataInfo={field:this.fields[f],value:o[f]},c.push(this.shapeFactory.createShape(h));var y=[a,s];l.push(y)}var d=new UB(l);d.style=oV.ShapeStyleTool({strokeColor:"#ee9900"},t.lineStyle),d.clickable=!1,d.hoverable=!1;var v=this.shapeFactory.createShape(d);this.shapes.push(v),this.shapes=this.shapes.concat(c),this.shapesConvertToRelativeCoordinate()}}}}},{key:"calculateXShapeInfo",value:function(){var t,e=this.dataViewBox,r=this.setting,n=this.dataValues.length;if(n<1)return null;var o=[],i=this.DVBWidth,a=0;if(r.xShapeBlank&&r.xShapeBlank.length&&2==r.xShapeBlank.length){var s=i-((t=r.xShapeBlank)[0]+t[1]);if(s<=n)return null;a=s/(n-1)}else t=[a=i/(n+1),a,a];for(var u=0,l=0;l<n;l++)0==l?u=t[0]:u+=a,o.push(e[0]+u);return{xPositions:o,width:0}}}])&&QV(r.prototype,n),o&&QV(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function nz(t){"@babel/helpers - typeof";return(nz="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function oz(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,iz(n.key),n)}}function iz(t){var e=function(t,e){if("object"!=nz(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=nz(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==nz(e)?e:e+""}function az(t,e,r){return e=uz(e),function(t,e){if(e&&("object"===nz(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],uz(t).constructor):e.apply(t,r))}function sz(){return(sz="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=uz(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function uz(t){return(uz=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function lz(t,e){return(lz=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var cz=function(t){function e(t,r,n,o,i){var a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(a=az(this,e,[t,r,n,o,i])).CLASS_NAME="SuperMap.Feature.Theme.Pie",a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&lz(t,e)}(e,vV),r=e,(n=[{key:"destroy",value:function(){sz(uz(e.prototype),"destroy",this).call(this)}},{key:"assembleShapes",value:function(){var t=this.setting,e=[{fillColor:"#ff9277"},{fillColor:"#dddd00"},{fillColor:"#ffc877"},{fillColor:"#bbe3ff"},{fillColor:"#d5ffbb"},{fillColor:"#bbbbff"},{fillColor:"#ddb000"},{fillColor:"#b0dd00"},{fillColor:"#e2bbff"},{fillColor:"#ffbbe3"},{fillColor:"#ff7777"},{fillColor:"#ff9900"},{fillColor:"#83dd00"},{fillColor:"#77e3ff"},{fillColor:"#778fff"},{fillColor:"#c877ff"},{fillColor:"#ff77ab"},{fillColor:"#ff6600"},{fillColor:"#aa8800"},{fillColor:"#77c7ff"},{fillColor:"#ad77ff"},{fillColor:"#ff77ff"},{fillColor:"#dd0083"},{fillColor:"#777700"},{fillColor:"#00aa00"},{fillColor:"#0088aa"},{fillColor:"#8400dd"},{fillColor:"#aa0088"},{fillColor:"#dd0000"},{fillColor:"#772e00"}];if(this.initBaseParameter()){t.useBackground&&this.shapes.push(oV.Background(this.shapeFactory,this.chartBox,t));var r=this.dataValues;if(!(r.length<1)){for(var n=this.DVBCodomain,o=0;o<r.length;o++)if(r[o]<n[0]||r[o]>n[1])return;for(var i=0,a=0;a<r.length;a++)i+=Math.abs(r[a]);this.DVBUnitValue=360/i;for(var s=this.DVBUnitValue,u=this.DVBCenterPoint,l=0,c=0,f=l,p=this.DVBHeight<this.DVBWidth?this.DVBHeight/2:this.DVBWidth/2,h=0;h<r.length;h++){var y=Math.abs(r[h]);(c=0===h?l+y*s:h===y.length-1?f:l+y*s)-l>=360&&(c=359.9999999);var d=new cF(u[0],u[1],p,l,c);if(void 0===t.sectorStyleByFields){var v=h%e.length;d.style=oV.ShapeStyleTool(null,t.sectorStyle,e,null,v)}else d.style=oV.ShapeStyleTool(null,t.sectorStyle,t.sectorStyleByFields,t.sectorStyleByCodomain,h,r[h]);d.highlightStyle=oV.ShapeStyleTool(null,t.sectorHoverStyle),void 0!==t.sectorHoverAble&&(d.hoverable=t.sectorHoverAble),void 0!==t.sectorClickAble&&(d.clickable=t.sectorClickAble),d.refDataID=this.data.id,d.dataInfo={field:this.fields[h],value:r[h]},this.shapes.push(this.shapeFactory.createShape(d)),l=c}this.shapesConvertToRelativeCoordinate()}}}}])&&oz(r.prototype,n),o&&oz(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function fz(t){"@babel/helpers - typeof";return(fz="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function pz(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,hz(n.key),n)}}function hz(t){var e=function(t,e){if("object"!=fz(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=fz(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==fz(e)?e:e+""}function yz(t,e,r){return e=vz(e),function(t,e){if(e&&("object"===fz(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],vz(t).constructor):e.apply(t,r))}function dz(){return(dz="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=vz(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function vz(t){return(vz=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function mz(t,e){return(mz=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var bz=function(t){function e(t,r,n,o,i,a){var s;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(s=yz(this,e,[t,r,n,o,i,a])).CLASS_NAME="SuperMap.Feature.Theme.Point",s}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&mz(t,e)}(e,vV),r=e,(n=[{key:"destroy",value:function(){dz(vz(e.prototype),"destroy",this).call(this)}},{key:"assembleShapes",value:function(){var t=this.setting;if(t.dataViewBoxParameter||(void 0===t.useAxis||t.useAxis?t.dataViewBoxParameter=[45,15,15,15]:t.dataViewBoxParameter=[5,5,5,5]),this.initBaseParameter()){var e=this.dataViewBox,r=this.DVBCodomain;this.DVBUnitValue=(r[1]-r[0])/this.DVBHeight;var n=this.DVBUnitValue,o=this.dataValues,i=this.calculateXShapeInfo();if(i){var a,s,u=i.xPositions;(void 0===t.useBackground||t.useBackground)&&this.shapes.push(oV.Background(this.shapeFactory,this.chartBox,t)),this.shapes=this.shapes.concat(oV.GraphAxis(this.shapeFactory,e,t,i));for(var l=0,c=o.length;l<c;l++){if(o[l]<r[0]||o[l]>r[1])return null;a=u[l],s=e[1]-(o[l]-r[0])/n;var f=new NB(a,s);f.style=oV.ShapeStyleTool({fillColor:"#ee9900"},t.pointStyle,t.pointStyleByFields,t.pointStyleByCodomain,l,o[l]),f.highlightStyle=oV.ShapeStyleTool(null,t.pointHoverStyle),void 0!==t.pointHoverAble&&(f.hoverable=t.pointHoverAble),void 0!==t.pointClickAble&&(f.clickable=t.pointClickAble),f.refDataID=this.data.id,f.dataInfo={field:this.fields[l],value:o[l]},this.shapes.push(this.shapeFactory.createShape(f))}this.shapesConvertToRelativeCoordinate()}}}},{key:"calculateXShapeInfo",value:function(){var t,e=this.dataViewBox,r=this.setting,n=this.dataValues.length;if(n<1)return null;var o=[],i=this.DVBWidth,a=0;if(r.xShapeBlank&&r.xShapeBlank.length&&2==r.xShapeBlank.length){var s=i-((t=r.xShapeBlank)[0]+t[1]);if(s<=n)return null;a=s/(n-1)}else t=[a=i/(n+1),a,a];for(var u=0,l=0;l<n;l++)0==l?u=t[0]:u+=a,o.push(e[0]+u);return{xPositions:o,width:0}}}])&&pz(r.prototype,n),o&&pz(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function gz(t){"@babel/helpers - typeof";return(gz="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Sz(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,wz(n.key),n)}}function wz(t){var e=function(t,e){if("object"!=gz(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=gz(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==gz(e)?e:e+""}function _z(t,e,r){return e=Ez(e),function(t,e){if(e&&("object"===gz(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Ez(t).constructor):e.apply(t,r))}function Oz(){return(Oz="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ez(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Ez(t){return(Ez=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Pz(t,e){return(Pz=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var xz=function(t){function e(t,r,n,o,i){var a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(a=_z(this,e,[t,r,n,o,i])).CLASS_NAME="SuperMap.Feature.Theme.Ring",a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Pz(t,e)}(e,vV),r=e,(n=[{key:"destroy",value:function(){Oz(Ez(e.prototype),"destroy",this).call(this)}},{key:"assembleShapes",value:function(){if(this.initBaseParameter()){var t=[{fillColor:"#ff9277"},{fillColor:"#dddd00"},{fillColor:"#ffc877"},{fillColor:"#bbe3ff"},{fillColor:"#d5ffbb"},{fillColor:"#bbbbff"},{fillColor:"#ddb000"},{fillColor:"#b0dd00"},{fillColor:"#e2bbff"},{fillColor:"#ffbbe3"},{fillColor:"#ff7777"},{fillColor:"#ff9900"},{fillColor:"#83dd00"},{fillColor:"#77e3ff"},{fillColor:"#778fff"},{fillColor:"#c877ff"},{fillColor:"#ff77ab"},{fillColor:"#ff6600"},{fillColor:"#aa8800"},{fillColor:"#77c7ff"},{fillColor:"#ad77ff"},{fillColor:"#ff77ff"},{fillColor:"#dd0083"},{fillColor:"#777700"},{fillColor:"#00aa00"},{fillColor:"#0088aa"},{fillColor:"#8400dd"},{fillColor:"#aa0088"},{fillColor:"#dd0000"},{fillColor:"#772e00"}],e=this.setting;e.useBackground&&this.shapes.push(oV.Background(this.shapeFactory,this.chartBox,e));var r=this.dataValues;if(!(r.length<1)){for(var n=this.DVBCodomain,o=0;o<r.length;o++)if(r[o]<n[0]||r[o]>n[1])return;for(var i=0,a=0;a<r.length;a++)i+=Math.abs(r[a]);this.DVBUnitValue=360/i;for(var s=this.DVBUnitValue,u=this.DVBCenterPoint,l=0,c=0,f=l,p=this.DVBHeight<this.DVBWidth?this.DVBHeight/2:this.DVBWidth/2,h=e.innerRingRadius>=0&&e.innerRingRadius<p,y=void 0!==e.innerRingRadius&&!isNaN(e.innerRingRadius)&&h?e.innerRingRadius:0,d=0;d<r.length;d++){var v=Math.abs(r[d]);c=0===d?l+v*s:d===v.length-1?f:l+v*s;var m=new cF(u[0],u[1],p,l,c,y);if(void 0===e.sectorStyleByFields){var b=d%t.length;m.style=oV.ShapeStyleTool(null,e.sectorStyle,t,null,b)}else m.style=oV.ShapeStyleTool(null,e.sectorStyle,e.sectorStyleByFields,e.sectorStyleByCodomain,d,r[d]);m.highlightStyle=oV.ShapeStyleTool(null,e.sectorHoverStyle),void 0!==e.sectorHoverAble&&(m.hoverable=e.sectorHoverAble),void 0!==e.sectorClickAble&&(m.clickable=e.sectorClickAble),m.refDataID=this.data.id,m.dataInfo={field:this.fields[d],value:r[d]},this.shapes.push(this.shapeFactory.createShape(m)),l=c}this.shapesConvertToRelativeCoordinate()}}}}])&&Sz(r.prototype,n),o&&Sz(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function Tz(t){"@babel/helpers - typeof";return(Tz="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Cz(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,kz(n.key),n)}}function kz(t){var e=function(t,e){if("object"!=Tz(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Tz(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Tz(e)?e:e+""}function Az(t,e,r){return e=Iz(e),jz(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Iz(t).constructor):e.apply(t,r))}function jz(t,e){if(e&&("object"===Tz(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Nz(){return(Nz="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Iz(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Iz(t){return(Iz=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Mz(t,e){return(Mz=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Rz=function(t){function e(t,r,n,o,i){var a;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),a=Az(this,e,[t,r]),!t.geometry)return jz(a);if(!(t.geometry instanceof ht))return jz(a);a.dataBounds=t.geometry.getBounds(),a.nodesClipPixel=2,a.isHoverAble=!0,a.isMultiHover=!0,a.isClickAble=!0,a.highlightStyle=null,a.shapeOptions={},a.style=n||{},a.CLASS_NAME="SuperMap.Feature.Theme.Vector",a.style=n||{},o&&Tt.copyAttributesWithClip(a,o,["shapeOptions","dataBounds"]),i&&Tt.copyAttributesWithClip(a.shapeOptions,i);var s=t.geometry;return a.lonlat=a.dataBounds.getCenterLonLat(),a.location=a.getLocalXY(a.lonlat),s instanceof De?a.lineToTF(s):s instanceof we?a.lineToTF(s):s instanceof ie||(s instanceof Zt?a.multiPointToTF(s):s instanceof He?a.multiLineStringToTF(s):s instanceof Xe?a.multiPolygonToTF(s):s instanceof or?a.polygonToTF(s):s instanceof qt||(s instanceof he?a.pointToTF(s):s instanceof fr?a.rectangleToTF(s):s instanceof ke&&a.geoTextToTF(s))),a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Mz(t,e)}(e,uV),r=e,(n=[{key:"destroy",value:function(){this.style=null,this.dataBounds=null,this.nodesClipPixel=null,this.isHoverAble=null,this.isMultiHover=null,this.isClickAble=null,this.highlightStyle=null,this.shapeOptions=null,Nz(Iz(e.prototype),"destroy",this).call(this)}},{key:"lineToTF",value:function(t){for(var e=t.components,r=[],n=[],o=this.location,i=[],a=this.nodesClipPixel,s=0;s<e.length;s++){var u=e[s];if(n=[],r=this.getLocalXY(u),n[0]=r[0]-o[0],n[1]=r[1]-o[1],i.length>0){var l=i[i.length-1];if(Math.abs(l[0]-n[0])<=a&&Math.abs(l[1]-n[1])<=a)continue}i.push(n)}if(i.length<2)return null;var c=new Object;(c=Tt.copyAttributesWithClip(c,this.style,["pointList"])).pointList=i;var f=new AG({style:c,clickable:this.isClickAble,hoverable:this.isHoverAble});this.highlightStyle&&(f.highlightStyle=this.highlightStyle),f.refOriginalPosition=this.location,f.refDataID=this.data.id,f.isHoverByRefDataID=this.isMultiHover,this.shapeOptions&&Tt.copyAttributesWithClip(f,this.shapeOptions),this.shapes.push(f)}},{key:"multiPointToTF",value:function(t){for(var e=t.components,r=[],n=[],o=this.location,i=[],a=this.nodesClipPixel,s=0;s<e.length;s++){var u=e[s];if(n=[],r=this.getLocalXY(u),n[0]=r[0]-o[0],n[1]=r[1]-o[1],i.length>0){var l=i[i.length-1];if(Math.abs(l[0]-n[0])<=a&&Math.abs(l[1]-n[1])<=a)continue}i.push(n);var c=new Object;c.r=6,(c=Tt.copyAttributesWithClip(c,this.style)).x=n[0],c.y=n[1];var f=new ZU({style:c,clickable:this.isClickAble,hoverable:this.isHoverAble});this.highlightStyle&&(f.highlightStyle=this.highlightStyle),f.refOriginalPosition=o,f.refDataID=this.data.id,f.isHoverByRefDataID=this.isMultiHover,this.shapeOptions&&Tt.copyAttributesWithClip(f,this.shapeOptions),this.shapes.push(f)}}},{key:"multiLineStringToTF",value:function(t){for(var e=t.components,r=0;r<e.length;r++){var n=e[r];this.lineToTF(n)}}},{key:"multiPolygonToTF",value:function(t){for(var e=t.components,r=0;r<e.length;r++){var n=e[r];this.polygonToTF(n)}}},{key:"pointToTF",value:function(t){var e=this.location,r=this.getLocalXY(t),n=new Object;n.r=6,(n=Tt.copyAttributesWithClip(n,this.style)).x=r[0]-e[0],n.y=r[1]-e[1];var o=new ZU({style:n,clickable:this.isClickAble,hoverable:this.isHoverAble});this.highlightStyle&&(o.highlightStyle=this.highlightStyle),o.refOriginalPosition=e,o.refDataID=this.data.id,o.isHoverByRefDataID=this.isMultiHover,this.shapeOptions&&Tt.copyAttributesWithClip(o,this.shapeOptions),this.shapes.push(o)}},{key:"polygonToTF",value:function(t){for(var e=t.components,r=[],n=[],o=this.location,i=[],a=[],s=[],u=this.nodesClipPixel,l=0;l<e.length;l++){var c=e[l].components;if(0===l){i=[];for(var f=0;f<c.length;f++){if(n=[],r=this.getLocalXY(c[f]),n[0]=r[0]-o[0],n[1]=r[1]-o[1],i.length>0){var p=i[i.length-1];if(Math.abs(p[0]-n[0])<=u&&Math.abs(p[1]-n[1])<=u)continue}i.push(n)}}else{a=[];for(var h=0;h<c.length;h++){if(n=[],r=this.getLocalXY(c[h]),n[0]=r[0]-o[0],n[1]=r[1]-o[1],a.length>0){var y=a[a.length-1];if(Math.abs(y[0]-n[0])<=u&&Math.abs(y[1]-n[1])<=u)continue}a.push(n)}}a.length<2||s.push(a)}if(!(i.length<2)){var d={};(d=Tt.copyAttributesWithClip(d,this.style,["pointList"])).pointList=i;var v=new _G({style:d,clickable:this.isClickAble,hoverable:this.isHoverAble});this.highlightStyle&&(v.highlightStyle=this.highlightStyle),v.refOriginalPosition=this.location,v.refDataID=this.data.id,v.isHoverByRefDataID=this.isMultiHover,s.length>0&&(v.holePolygonPointLists=s),this.shapeOptions&&Tt.copyAttributesWithClip(v,this.shapeOptions),this.shapes.push(v)}}},{key:"rectangleToTF",value:function(t){var e=this.location,r=new It(t.x,t.y),n=this.layer.map.getResolution(),o=this.getLocalXY(r),i=new Object;i.r=6,(i=Tt.copyAttributesWithClip(i,this.style)).x=o[0]-e[0],i.y=o[1]-e[1]-2*t.width/n,i.width=t.width/n,i.height=t.height/n;var a=new JG({style:i,clickable:this.isClickAble,hoverable:this.isHoverAble});this.highlightStyle&&(a.highlightStyle=this.highlightStyle),a.refOriginalPosition=e,a.refDataID=this.data.id,a.isHoverByRefDataID=this.isMultiHover,this.shapeOptions&&Tt.copyAttributesWithClip(a,this.shapeOptions),this.shapes.push(a)}},{key:"geoTextToTF",value:function(t){var e=this.location,r=this.getLocalXY(t),n=new Object;n.r=6,(n=Tt.copyAttributesWithClip(n,this.style,["x","y","text"])).x=r[0]-e[0],n.y=r[1]-e[1],n.text=t.text;var o=new aG({style:n,clickable:this.isClickAble,hoverable:this.isHoverAble});this.highlightStyle&&(o.highlightStyle=this.highlightStyle),o.refOriginalPosition=e,o.refDataID=this.data.id,o.isHoverByRefDataID=this.isMultiHover,this.shapeOptions&&Tt.copyAttributesWithClip(o,this.shapeOptions),this.shapes.push(o)}},{key:"updateAndAddShapes",value:function(){var t=this.getLocalXY(this.lonlat);this.location=t;for(var e=this.layer.renderer,r=0,n=this.shapes.length;r<n;r++){var o=this.shapes[r];o.refOriginalPosition=t,e.addShape(o)}}},{key:"getShapesCount",value:function(){return this.shapes.length}},{key:"getLocalXY",value:function(t){return this.layer.getLocalXY(t)}}])&&Cz(r.prototype,n),o&&Cz(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function Lz(t){"@babel/helpers - typeof";return(Lz="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Dz(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Bz(n.key),n)}}function Bz(t){var e=function(t,e){if("object"!=Lz(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Lz(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Lz(e)?e:e+""}function Fz(t,e,r){return e=Gz(e),function(t,e){if(e&&("object"===Lz(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Gz(t).constructor):e.apply(t,r))}function Uz(){return(Uz="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Gz(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Gz(t){return(Gz=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Vz(t,e){return(Vz=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var zz=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r=Fz(this,e,[t]),t=t||{},r.id=null,r.type="group",r.clipShape=null,r._children=[],r._storage=null,r.__dirty=!0,r.ignore=!1,Tt.extend(r,t),r.id=r.id||Tt.createUniqueID("smShapeGroup_"),r.CLASS_NAME="SuperMap.LevelRenderer.Group",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Vz(t,e)}(e,it(BF,LU)),r=e,(n=[{key:"destroy",value:function(){this.id=null,this.type=null,this.clipShape=null,this._children=null,this._storage=null,this.__dirty=null,this.ignore=null,Uz(Gz(e.prototype),"destroy",this).call(this)}},{key:"children",value:function(){return this._children.slice()}},{key:"childAt",value:function(t){return this._children[t]}},{key:"addChild",value:function(t){t!=this&&t.parent!=this&&(t.parent&&t.parent.removeChild(t),this._children.push(t),t.parent=this,this._storage&&this._storage!==t._storage&&(this._storage.addToMap(t),t instanceof e&&t.addChildrenToStorage(this._storage)))}},{key:"removeChild",value:function(t){var r=Tt.indexOf(this._children,t);this._children.splice(r,1),t.parent=null,this._storage&&(this._storage.delFromMap(t.id),t instanceof e&&t.delChildrenFromStorage(this._storage))}},{key:"eachChild",value:function(t,e){for(var r=!!e,n=0;n<this._children.length;n++){var o=this._children[n];r?t.call(e,o):t(o)}}},{key:"traverse",value:function(t,e){for(var r=!!e,n=0;n<this._children.length;n++){var o=this._children[n];r?t.call(e,o):t(o),"group"===o.type&&o.traverse(t,e)}}},{key:"addChildrenToStorage",value:function(t){for(var e=0;e<this._children.length;e++){var r=this._children[e];t.addToMap(r),"group"===r.type&&r.addChildrenToStorage(t)}}},{key:"delChildrenFromStorage",value:function(t){for(var e=0;e<this._children.length;e++){var r=this._children[e];t.delFromMap(r.id),"group"===r.type&&r.delChildrenFromStorage(t)}}},{key:"modSelf",value:function(){this.__dirty=!0}}])&&Dz(r.prototype,n),o&&Dz(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function Hz(t){"@babel/helpers - typeof";return(Hz="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function qz(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Jz(n.key),n)}}function Jz(t){var e=function(t,e){if("object"!=Hz(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Hz(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Hz(e)?e:e+""}var Wz=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._elements={},this._hoverElements=[],this._roots=[],this._shapeList=[],this._shapeListOffset=0,this.CLASS_NAME="SuperMap.LevelRenderer.Storage"}return e=t,n=[{key:"shapeCompareFunc",value:function(t,e){return t.zlevel==e.zlevel?t.z==e.z?t.__renderidx-e.__renderidx:t.z-e.z:t.zlevel-e.zlevel}}],(r=[{key:"destroy",value:function(){this.dispose(),this._shapeList=null,this._shapeListOffset=null}},{key:"iterShape",value:function(t,e){if(!e){e={hover:!1,normal:"down",update:!1}}if(e.hover)for(var r=0,n=this._hoverElements.length;r<n;r++){var o=this._hoverElements[r];if(o.updateTransform(),t(o))return this}switch(e.update&&this.updateShapeList(),e.normal){case"down":for(var i=this._shapeList.length;i--;)if(t(this._shapeList[i]))return this;break;default:for(var a=0,s=this._shapeList.length;a<s;a++)if(t(this._shapeList[a]))return this}return this}},{key:"getHoverShapes",value:function(e){for(var r=[],n=this._hoverElements.length,o=0;o<n;o++){r.push(this._hoverElements[o]);var i=this._hoverElements[o].hoverConnect;if(i)for(var a,s=0,u=(i=i instanceof Array?i:[i]).length;s<u;s++)(a=i[s].id?i[s]:this.get(i[s]))&&r.push(a)}if(r.sort(t.shapeCompareFunc),e)for(var l=0,c=r.length;l<c;l++)r[l].updateTransform();return r}},{key:"getShapeList",value:function(t){return t&&this.updateShapeList(),this._shapeList}},{key:"updateShapeList",value:function(){this._shapeListOffset=0;for(var e=this._roots.length,r=0;r<e;r++){var n=this._roots[r];this._updateAndAddShape(n)}this._shapeList.length=this._shapeListOffset;for(var o=this._shapeList.length,i=0;i<o;i++)this._shapeList[i].__renderidx=i;this._shapeList.sort(t.shapeCompareFunc)}},{key:"_updateAndAddShape",value:function(t,e){if(!t.ignore)if(t.updateTransform(),"group"==t.type){t.clipShape&&(t.clipShape.parent=t,t.clipShape.updateTransform(),e?(e=e.slice()).push(t.clipShape):e=[t.clipShape]);for(var r=0;r<t._children.length;r++){var n=t._children[r];n.__dirty=t.__dirty||n.__dirty,this._updateAndAddShape(n,e)}t.__dirty=!1}else t.__clipShapes=e,this._shapeList[this._shapeListOffset++]=t}},{key:"mod",value:function(t,e){var r=this._elements[t];if(r&&(r.modSelf(),e))if(e.parent||e._storage||e.__startClip){var n={};for(var o in e)"parent"!=o&&"_storage"!=o&&"__startClip"!=o&&e.hasOwnProperty(o)&&(n[o]=e[o]);(new vD).merge(r,n,!0)}else(new vD).merge(r,e,!0);return this}},{key:"drift",value:function(t,e,r){var n=this._elements[t];return n&&(n.needTransform=!0,"horizontal"===n.draggable?r=0:"vertical"===n.draggable&&(e=0),(!n.ondrift||n.ondrift&&!n.ondrift(e,r))&&n.drift(e,r)),this}},{key:"addHover",value:function(t){return t.updateNeedTransform(),this._hoverElements.push(t),this}},{key:"delHover",value:function(){return this._hoverElements=[],this}},{key:"hasHoverShape",value:function(){return this._hoverElements.length>0}},{key:"addRoot",value:function(t){t instanceof zz&&t.addChildrenToStorage(this),this.addToMap(t),this._roots.push(t)}},{key:"delRoot",value:function(t){if(void 0===t){for(var e=0;e<this._roots.length;e++){var r=this._roots[e];r instanceof zz&&r.delChildrenFromStorage(this)}return this._elements={},this._hoverElements=[],void(this._roots=[])}if(t instanceof Array)for(var n=t.length,o=0;o<n;o++)this.delRoot(t[o]);else{var i;i="string"==typeof t?this._elements[t]:t;var a=(new vD).indexOf(this._roots,i);a>=0&&(this.delFromMap(i.id),this._roots.splice(a,1),i instanceof zz&&i.delChildrenFromStorage(this))}}},{key:"addToMap",value:function(t){return t instanceof zz&&(t._storage=this),t.modSelf(),this._elements[t.id]=t,this}},{key:"get",value:function(t){return this._elements[t]}},{key:"delFromMap",value:function(t){var e=this._elements[t];return e&&(delete this._elements[t],e instanceof zz&&(e._storage=null)),this}},{key:"dispose",value:function(){this._elements=null,this._roots=null,this._hoverElements=null}}])&&qz(e.prototype,r),n&&qz(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,r,n}();function Kz(t){"@babel/helpers - typeof";return(Kz="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Yz(t,e,r){return e=Qz(e),function(t,e){if(e&&("object"===Kz(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Qz(t).constructor):e.apply(t,r))}function Qz(t){return(Qz=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Xz(t,e){return(Xz=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Zz(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function $z(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,eH(n.key),n)}}function tH(t,e,r){return e&&$z(t.prototype,e),r&&$z(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function eH(t){var e=function(t,e){if("object"!=Kz(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Kz(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Kz(e)?e:e+""}var rH=function(){function t(e,r){Zz(this,t),this.root=e,this.storage=r,this._domRoot=null,this._layers={},this._zlevelList=[],this._layerConfig={},this._bgDom=null,this.shapeToImage=null,t.devicePixelRatio=Math.max(window.devicePixelRatio||1,1),this.CLASS_NAME="SuperMap.LevelRenderer.Painter",this.root.innerHTML="",this._width=this._getWidth(),this._height=this._getHeight();var n=document.createElement("div");this._domRoot=n,n.style.position="relative",n.style.overflow="hidden",n.style.width=this._width+"px",n.style.height=this._height+"px",this.root.appendChild(n),this.shapeToImage=this._createShapeToImageProcessor(),this._bgDom=t.createDom(Tt.createUniqueID("SuperMap.Theme_background_"),"div",this),n.appendChild(this._bgDom),this._bgDom.onselectstart=a,this._bgDom.style["-webkit-user-select"]="none",this._bgDom.style["user-select"]="none",this._bgDom.style["-webkit-touch-callout"]="none";var o=new nH(Tt.createUniqueID("_highLightLayer_"),this);this._layers.hover=o,n.appendChild(o.dom),o.initContext(),o.dom.onselectstart=a,o.dom.style["-webkit-user-select"]="none",o.dom.style["user-select"]="none",o.dom.style["-webkit-touch-callout"]="none";var i=this;function a(){return!1}this.updatePainter=function(t,e){i.refreshShapes(t,e)}}return tH(t,[{key:"destroy",value:function(){this.dispose(),this._zlevelList=null,this._layerConfig=null,this._bgDom=null,this.shapeToImage=null}},{key:"render",value:function(t){return this.refresh(t,!0),this}},{key:"refresh",value:function(t,e){var r=this.storage.getShapeList(!0);return this._paintList(r,e),"function"==typeof t&&t(),this}},{key:"_paintList",value:function(t,e){var r,n,o;for(var i in void 0===e&&(e=!1),this._updateLayerStatus(t),this._layers)"hover"!==i&&(this._layers[i].unusedCount++,this._layers[i].updateTransform());for(var a=[],s=0,u=t.length;s<u;s++){var l=t[s];if(n!==l.zlevel&&(r&&r.needTransform&&o.restore(),o=(r=this.getLayer(l.zlevel)).ctx,n=l.zlevel,r.unusedCount=0,(r.dirty||e)&&r.clear(),r.needTransform&&(o.save(),r.setTransform(o))),o&&l.__startClip){var c=l.__startClip;if(o.save(),c.needTransform){var f=c.transform;NU.Util_matrix.invert(a,f),o.transform(f[0],f[1],f[2],f[3],f[4],f[5])}if(o.beginPath(),c.buildPath(o,c.style),o.clip(),c.needTransform){var p=a;o.transform(p[0],p[1],p[2],p[3],p[4],p[5])}}if((r&&r.dirty||e)&&!l.invisible&&(!l.onbrush||l.onbrush&&!l.onbrush(o,!1)))if(vU.catchBrushException)try{l.brush(o,!1,this.updatePainter)}catch(t){NU.Util_log(t,"brush error of "+l.type,l)}else l.brush(o,!1,this.updatePainter);o&&l.__stopClip&&o.restore(),l.__dirty=!1}for(var h in o&&r&&r.needTransform&&o.restore(),this._layers)if("hover"!==h){var y=this._layers[h];y.dirty=!1,1==y.unusedCount&&y.clear()}}},{key:"getLayer",value:function(t){var e=this._layers[t];if(!e){var r=this._zlevelList.length,n=null,o=-1;if(r>0&&t>this._zlevelList[0]){for(o=0;o<r-1&&!(this._zlevelList[o]<t&&this._zlevelList[o+1]>t);o++);n=this._layers[this._zlevelList[o]]}this._zlevelList.splice(o+1,0,t),e=new nH(Tt.createUniqueID("_levelLayer_"+t),this);var i=n?n.dom:this._bgDom;i.nextSibling?i.parentNode.insertBefore(e.dom,i.nextSibling):i.parentNode.appendChild(e.dom),e.initContext(),this._layers[t]=e,this._layerConfig[t]&&(new vD).merge(e,this._layerConfig[t],!0),e.updateTransform()}return e}},{key:"getLayers",value:function(){return this._layers}},{key:"_updateLayerStatus",value:function(t){var e=this._layers,r={};for(var n in e)"hover"!==n&&(r[n]=e[n].elCount,e[n].elCount=0);for(var o=0;o<t.length;o++){var i=t[o],a=e[i.zlevel];if(a){if(a.elCount++,a.dirty)continue;a.dirty=i.__dirty}}for(var s in e)"hover"!==s&&r[s]!==e[s].elCount&&(e[s].dirty=!0)}},{key:"refreshShapes",value:function(t,e){for(var r=0,n=t.length;r<n;r++){var o=t[r];this.storage.mod(o.id)}return this.refresh(e),this}},{key:"clear",value:function(){for(var t in this._layers)"hover"!=t&&this._layers[t].clear();return this}},{key:"modLayer",value:function(t,e){if(e){this._layerConfig[t]?(new vD).merge(this._layerConfig[t],e,!0):this._layerConfig[t]=e;var r=this._layers[t];r&&(new vD).merge(r,this._layerConfig[t],!0)}}},{key:"delLayer",value:function(t){var e=this._layers[t];e&&(this.modLayer(t,{position:e.position,rotation:e.rotation,scale:e.scale}),e.dom.parentNode.removeChild(e.dom),delete this._layers[t],this._zlevelList.splice((new vD).indexOf(this._zlevelList,t),1))}},{key:"refreshHover",value:function(){this.clearHover();for(var t=this.storage.getHoverShapes(!0),e=0,r=t.length;e<r;e++)this._brushHover(t[e]);return this.storage.delHover(),this}},{key:"clearHover",value:function(){var t=this._layers.hover;return t&&t.clear(),this}},{key:"resize",value:function(){var t=this._domRoot;t.style.display="none";var e=this._getWidth(),r=this._getHeight();if(t.style.display="",this._width!=e||r!=this._height){for(var n in this._width=e,this._height=r,t.style.width=e+"px",t.style.height=r+"px",this._layers)this._layers[n].resize(e,r);this.refresh(null,!0)}return this}},{key:"clearLayer",value:function(t){var e=this._layers[t];e&&e.clear()}},{key:"dispose",value:function(){this.root.innerHTML="",this.root=null,this.storage=null,this._domRoot=null,this._layers=null}},{key:"getDomHover",value:function(){return this._layers.hover.dom}},{key:"toDataURL",value:function(e,r,n){var o=t.createDom(Tt.createUniqueID("SuperMap.Theme.image_"),"canvas",this);this._bgDom.appendChild(o);var i=o.getContext("2d");1!=t.devicePixelRatio&&i.scale(t.devicePixelRatio,t.devicePixelRatio),i.fillStyle=r||"#fff",i.rect(0,0,this._width*t.devicePixelRatio,this._height*t.devicePixelRatio),i.fill();var a=this;this.storage.iterShape(function(t){if(!t.invisible&&(!t.onbrush||t.onbrush&&!t.onbrush(i,!1)))if(vU.catchBrushException)try{t.brush(i,!1,a.updatePainter)}catch(e){NU.Util_log(e,"brush error of "+t.type,t)}else t.brush(i,!1,a.updatePainter)},{normal:"up",update:!0});var s=o.toDataURL(e,n);return i=null,this._bgDom.removeChild(o),s}},{key:"getWidth",value:function(){return this._width}},{key:"getHeight",value:function(){return this._height}},{key:"_getWidth",value:function(){var t=this.root,e=t.currentStyle||document.defaultView.getComputedStyle(t);return((t.clientWidth||parseInt(e.width,10))-parseInt(e.paddingLeft,10)-parseInt(e.paddingRight,10)).toFixed(0)-0}},{key:"_getHeight",value:function(){var t=this.root,e=t.currentStyle||document.defaultView.getComputedStyle(t);return((t.clientHeight||parseInt(e.height,10))-parseInt(e.paddingTop,10)-parseInt(e.paddingBottom,10)).toFixed(0)-0}},{key:"_brushHover",value:function(t){var e=this._layers.hover.ctx;if(!t.onbrush||t.onbrush&&!t.onbrush(e,!0)){var r=this.getLayer(t.zlevel);if(r.needTransform&&(e.save(),r.setTransform(e)),vU.catchBrushException)try{t.brush(e,!0,this.updatePainter)}catch(e){NU.Util_log(e,"hoverBrush error of "+t.type,t)}else t.brush(e,!0,this.updatePainter);r.needTransform&&e.restore()}}},{key:"_shapeToImage",value:function(t,e,r,n,o){var i=document.createElement("canvas"),a=i.getContext("2d"),s=o||window.devicePixelRatio||1;i.style.width=r+"px",i.style.height=n+"px",i.setAttribute("width",r*s),i.setAttribute("height",n*s),a.clearRect(0,0,r*s,n*s);var u={position:e.position,rotation:e.rotation,scale:e.scale};e.position=[0,0,0],e.rotation=0,e.scale=[1,1],e&&e.brush(a,!1);var l=new BG({id:t,style:{x:0,y:0,image:i}});return null!=u.position&&(l.position=e.position=u.position),null!=u.rotation&&(l.rotation=e.rotation=u.rotation),null!=u.scale&&(l.scale=e.scale=u.scale),l}},{key:"_createShapeToImageProcessor",value:function(){var e=this;return function(r,n,o,i){return e._shapeToImage(r,n,o,i,t.devicePixelRatio)}}},{key:"updateHoverLayer",value:function(t){if(!(t instanceof Array))return this;this.clearHover(),this.storage.delHover();for(var e=0;e<t.length;e++)this.storage.addHover(t[e]),this._brushHover(t[e])}}],[{key:"createDom",value:function(e,r,n){var o=document.createElement(r),i=n._width,a=n._height;return o.style.position="absolute",o.style.left=0,o.style.top=0,o.style.width=i+"px",o.style.height=a+"px",o.setAttribute("width",i*t.devicePixelRatio),o.setAttribute("height",a*t.devicePixelRatio),o.setAttribute("id",e),o}}])}(),nH=function(t){function e(t,r){var n;return Zz(this,e),(n=Yz(this,e,[t,r])).dom=null,n.domBack=null,n.ctxBack=null,n.painter=r,n.unusedCount=0,n.config=null,n.dirty=!0,n.elCount=0,n.clearColor=0,n.motionBlur=!1,n.lastFrameAlpha=.7,n.zoomable=!1,n.panable=!1,n.maxZoom=1/0,n.minZoom=0,n.ctx=null,n.dom=rH.createDom(Tt.createUniqueID("SuperMap.Theme"+t),"canvas",r),n.dom.onselectstart=function(){return!1},n.dom.style["-webkit-user-select"]="none",n.dom.style["user-select"]="none",n.dom.style["-webkit-touch-callout"]="none",n.CLASS_NAME="SuperMap.LevelRenderer.Painter.Layer",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Xz(t,e)}(e,LU),tH(e,[{key:"destroy",value:function(){this.dom=null,this.domBack=null,this.ctxBack=null,this.painter=null,this.unusedCount=null,this.config=null,this.dirty=null,this.elCount=null,this.clearColor=null,this.motionBlur=null,this.lastFrameAlpha=null,this.zoomable=null,this.panable=null,this.maxZoom=null,this.minZoom=null,this.ctx=null,LU.destroy.apply(this,arguments)}},{key:"initContext",value:function(){this.ctx=this.dom.getContext("2d"),1!=rH.devicePixelRatio&&this.ctx.scale(rH.devicePixelRatio,rH.devicePixelRatio)}},{key:"createBackBuffer",value:function(){this.domBack=rH.createDom(Tt.createUniqueID("SuperMap.Theme.back-"+this.id),"canvas",this.painter),this.ctxBack=this.domBack.getContext("2d"),1!=rH.devicePixelRatio&&this.ctxBack.scale(rH.devicePixelRatio,rH.devicePixelRatio)}},{key:"resize",value:function(t,e){this.dom.style.width=t+"px",this.dom.style.height=e+"px",this.dom.setAttribute("width",t*rH.devicePixelRatio),this.dom.setAttribute("height",e*rH.devicePixelRatio),1!=rH.devicePixelRatio&&this.ctx.scale(rH.devicePixelRatio,rH.devicePixelRatio),this.domBack&&(this.domBack.setAttribute("width",t*rH.devicePixelRatio),this.domBack.setAttribute("height",e*rH.devicePixelRatio),1!=rH.devicePixelRatio&&this.ctxBack.scale(rH.devicePixelRatio,rH.devicePixelRatio))}},{key:"clear",value:function(){var t=this.dom,e=this.ctx,r=t.width,n=t.height,o=this.clearColor,i=this.motionBlur,a=this.lastFrameAlpha;if(i&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(t,0,0,r/rH.devicePixelRatio,n/rH.devicePixelRatio)),o?(e.save(),e.fillStyle=this.config.clearColor,e.fillRect(0,0,r/rH.devicePixelRatio,n/rH.devicePixelRatio),e.restore()):e.clearRect(0,0,r/rH.devicePixelRatio,n/rH.devicePixelRatio),i){var s=this.domBack;e.save(),e.globalAlpha=a,e.drawImage(s,0,0,r/rH.devicePixelRatio,n/rH.devicePixelRatio),e.restore()}}}])}();function oH(t){"@babel/helpers - typeof";return(oH="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function iH(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,aH(n.key),n)}}function aH(t){var e=function(t,e){if("object"!=oH(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=oH(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==oH(e)?e:e+""}function sH(t,e,r){return e=uH(e),function(t,e){if(e&&("object"===oH(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],uH(t).constructor):e.apply(t,r))}function uH(t){return(uH=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function lH(t,e){return(lH=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var cH=function(t){function e(t,r,n){var o,i,a;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(o=sH(this,e,[t,r,n])).root=t,o.storage=r,o.painter=n,o._lastX=0,o._lastY=0,o._mouseX=0,o._mouseY=0,o._findHover=null,o._domHover=null,o._findHover=(i=function(t,e,r){var n=this;if(n._draggingTarget&&n._draggingTarget.id==t.id||t.isSilent())return!1;var o=n._event;if(t.isCover(e,r)){if(t.hoverable)if(t.isHoverByRefDataID&&!0===t.isHoverByRefDataID){if(t.refDataID){var i=t.refDataID,a=null;t.refDataHoverGroup&&(a=t.refDataHoverGroup);for(var s=n.storage._shapeList,u=0,l=s.length;u<l;u++){var c=s[u];c.refDataID&&i===c.refDataID&&(a?c.refDataHoverGroup&&a===c.refDataHoverGroup&&n.storage.addHover(c):n.storage.addHover(c))}}}else n.storage.addHover(t);for(var f=t.parent;f;){if(f.clipShape&&!f.clipShape.isCover(n._mouseX,n._mouseY))return!1;f=f.parent}return n._lastHover!=t&&(n._processOutShape(o),n._processDragLeave(o),n._lastHover=t,n._processDragEnter(o)),n._processOverShape(o),n._processDragOver(o),n._hasfound=1,!0}return!1},a=o,function(t,e,r){return i.call(a,t,e,r)}),o._domHover=n.getDomHover(),o.CLASS_NAME="SuperMap.LevelRenderer.Handler";var s={resize:function(t){t=t||window.event,this._lastHover=null,this._isMouseDown=0,this.dispatch(vU.EVENT.RESIZE,t)},click:function(t){t=this._zrenderEventFixed(t);var e=this._lastHover;(e&&e.clickable||!e)&&this._clickThreshold<10&&this._dispatchAgency(e,vU.EVENT.CLICK,t),this._mousemoveHandler(t)},dblclick:function(t){t=t||window.event,t=this._zrenderEventFixed(t);var e=this._lastHover;(e&&e.clickable||!e)&&this._clickThreshold<5&&this._dispatchAgency(e,vU.EVENT.DBLCLICK,t),this._mousemoveHandler(t)},mousewheel:function(t){var e=((t=this._zrenderEventFixed(t)).wheelDelta||-t.detail)>0?1.1:1/1.1,r=this.painter.getLayers(),n=!1;for(var o in r)if("hover"!==o){var i=r[o],a=i.position;if(i.zoomable){i.__zoom=i.__zoom||1;var s=i.__zoom;s*=e,e=(s=Math.max(Math.min(i.maxZoom,s),i.minZoom))/i.__zoom,i.__zoom=s,a[0]-=(this._mouseX-a[0])*(e-1),a[1]-=(this._mouseY-a[1])*(e-1),i.scale[0]*=e,i.scale[1]*=e,i.dirty=!0,n=!0}}n&&this.painter.refresh(),this._dispatchAgency(this._lastHover,vU.EVENT.MOUSEWHEEL,t),this._mousemoveHandler(t)},mousemove:function(t){this._clickThreshold++,t=this._zrenderEventFixed(t),this._lastX=this._mouseX,this._lastY=this._mouseY,this._mouseX=NU.Util_event.getX(t),this._mouseY=NU.Util_event.getY(t);var e=this._mouseX-this._lastX,r=this._mouseY-this._lastY;this._processDragStart(t),this._hasfound=0,this._event=t,this._iterateAndFindHover(),this._hasfound||((!this._draggingTarget||this._lastHover&&this._lastHover!=this._draggingTarget)&&(this._processOutShape(t),this._processDragLeave(t)),this._lastHover=null,this.storage.delHover(),this.painter.clearHover());var n="";if(this._draggingTarget)this.storage.drift(this._draggingTarget.id,e,r),this._draggingTarget.modSelf(),this.storage.addHover(this._draggingTarget);else if(this._isMouseDown){var o=this.painter.getLayers(),i=!1;for(var a in o)if("hover"!==a){var s=o[a];s.panable&&(n="move",s.position[0]+=e,s.position[1]+=r,i=!0,s.dirty=!0)}i&&this.painter.refresh()}this._draggingTarget||this._hasfound&&this._lastHover.draggable?n="move":this._hasfound&&this._lastHover.clickable&&(n="pointer"),this.root.style.cursor=n,this._dispatchAgency(this._lastHover,vU.EVENT.MOUSEMOVE,t),(this._draggingTarget||this._hasfound||this.storage.hasHoverShape())&&this.painter.refreshHover()},mouseout:function(t){var e=(t=this._zrenderEventFixed(t)).toElement||t.relatedTarget;if(e!=this.root)for(;e&&9!=e.nodeType;){if(e==this.root)return void this._mousemoveHandler(t);e=e.parentNode}t.zrenderX=this._lastX,t.zrenderY=this._lastY,this.root.style.cursor="",this._isMouseDown=0,this._processOutShape(t),this._processDrop(t),this._processDragEnd(t),this.painter.refreshHover(),this.dispatch(vU.EVENT.GLOBALOUT,t)},mousedown:function(t){if(this._clickThreshold=0,2==this._lastDownButton)return this._lastDownButton=t.button,void(this._mouseDownTarget=null);this._lastMouseDownMoment=new Date,t=this._zrenderEventFixed(t),this._isMouseDown=1,this._mouseDownTarget=this._lastHover,this._dispatchAgency(this._lastHover,vU.EVENT.MOUSEDOWN,t),this._lastDownButton=t.button},mouseup:function(t){t=this._zrenderEventFixed(t),this.root.style.cursor="",this._isMouseDown=0,this._mouseDownTarget=null,this._dispatchAgency(this._lastHover,vU.EVENT.MOUSEUP,t),this._processDrop(t),this._processDragEnd(t)},touchstart:function(t){t=this._zrenderEventFixed(t,!0),this._lastTouchMoment=new Date,this._mobildFindFixed(t),this._mousedownHandler(t)},touchmove:function(t){t=this._zrenderEventFixed(t,!0),this._mousemoveHandler(t),this._isDragging&&NU.Util_event.stop(t)},touchend:function(t){t=this._zrenderEventFixed(t,!0),this._mouseupHandler(t);var e=new Date;e-this._lastTouchMoment<vU.EVENT.touchClickDelay&&(this._mobildFindFixed(t),this._clickHandler(t),e-this._lastClickMoment<vU.EVENT.touchClickDelay/2&&(this._dblclickHandler(t),this._lastHover&&this._lastHover.clickable&&NU.Util_event.stop(t)),this._lastClickMoment=e),this.painter.clearHover()}};function u(t,e){return function(r){return t.call(e,r)}}return function(t){var e=["resize","click","dblclick","mousewheel","mousemove","mouseout","mouseup","mousedown","touchstart","touchend","touchmove"],r=e.length;for(;r--;){var n=e[r];t["_"+n+"Handler"]=u(s[n],t)}}(o),window.addEventListener?(window.addEventListener("resize",o._resizeHandler),NU.Util_env.os.tablet||NU.Util_env.os.phone?(t.addEventListener("touchstart",o._touchstartHandler),t.addEventListener("touchmove",o._touchmoveHandler),t.addEventListener("touchend",o._touchendHandler)):(t.addEventListener("click",o._clickHandler),t.addEventListener("dblclick",o._dblclickHandler),t.addEventListener("mousewheel",o._mousewheelHandler),t.addEventListener("mousemove",o._mousemoveHandler),t.addEventListener("mousedown",o._mousedownHandler),t.addEventListener("mouseup",o._mouseupHandler)),t.addEventListener("DOMMouseScroll",o._mousewheelHandler),t.addEventListener("mouseout",o._mouseoutHandler)):(window.attachEvent("onresize",o._resizeHandler),t.attachEvent("onclick",o._clickHandler),t.ondblclick=o._dblclickHandler,t.attachEvent("onmousewheel",o._mousewheelHandler),t.attachEvent("onmousemove",o._mousemoveHandler),t.attachEvent("onmouseout",o._mouseoutHandler),t.attachEvent("onmousedown",o._mousedownHandler),t.attachEvent("onmouseup",o._mouseupHandler)),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&lH(t,e)}(e,BF),r=e,(n=[{key:"destroy",value:function(){this.dispose(),this._lastX=null,this._lastY=null,this._mouseX=null,this._mouseY=null,this._findHover=null,BF.prototype.destroy.apply(this,arguments)}},{key:"on",value:function(t,e){return this.bind(t,e),this}},{key:"un",value:function(t,e){return this.unbind(t,e),this}},{key:"trigger",value:function(t,e){var r=vU.EVENT;switch(t){case r.RESIZE:case r.CLICK:case r.DBLCLICK:case r.MOUSEWHEEL:case r.MOUSEMOVE:case r.MOUSEDOWN:case r.MOUSEUP:case r.MOUSEOUT:this["_"+t+"Handler"](e)}}},{key:"dispose",value:function(){var t=this.root;window.removeEventListener?(window.removeEventListener("resize",this._resizeHandler),NU.Util_env.os.tablet||NU.Util_env.os.phone?(t.removeEventListener("touchstart",this._touchstartHandler),t.removeEventListener("touchmove",this._touchmoveHandler),t.removeEventListener("touchend",this._touchendHandler)):(t.removeEventListener("click",this._clickHandler),t.removeEventListener("dblclick",this._dblclickHandler),t.removeEventListener("mousewheel",this._mousewheelHandler),t.removeEventListener("mousemove",this._mousemoveHandler),t.removeEventListener("mousedown",this._mousedownHandler),t.removeEventListener("mouseup",this._mouseupHandler)),t.removeEventListener("DOMMouseScroll",this._mousewheelHandler),t.removeEventListener("mouseout",this._mouseoutHandler)):(window.detachEvent("onresize",this._resizeHandler),t.detachEvent("onclick",this._clickHandler),t.detachEvent("dblclick",this._dblclickHandler),t.detachEvent("onmousewheel",this._mousewheelHandler),t.detachEvent("onmousemove",this._mousemoveHandler),t.detachEvent("onmouseout",this._mouseoutHandler),t.detachEvent("onmousedown",this._mousedownHandler),t.detachEvent("onmouseup",this._mouseupHandler)),this.root=null,this._domHover=null,this.storage=null,this.painter=null,this.un()}},{key:"_processDragStart",value:function(t){var e=this._lastHover;if(this._isMouseDown&&e&&e.draggable&&!this._draggingTarget&&this._mouseDownTarget==e){if(e.dragEnableTime&&new Date-this._lastMouseDownMoment<e.dragEnableTime)return;var r=e;this._draggingTarget=r,this._isDragging=1,r.invisible=!0,this.storage.mod(r.id),this._dispatchAgency(r,vU.EVENT.DRAGSTART,t),this.painter.refresh()}}},{key:"_processDragEnter",value:function(t){this._draggingTarget&&this._dispatchAgency(this._lastHover,vU.EVENT.DRAGENTER,t,this._draggingTarget)}},{key:"_processDragOver",value:function(t){this._draggingTarget&&this._dispatchAgency(this._lastHover,vU.EVENT.DRAGOVER,t,this._draggingTarget)}},{key:"_processDragLeave",value:function(t){this._draggingTarget&&this._dispatchAgency(this._lastHover,vU.EVENT.DRAGLEAVE,t,this._draggingTarget)}},{key:"_processDrop",value:function(t){this._draggingTarget&&(this._draggingTarget.invisible=!1,this.storage.mod(this._draggingTarget.id),this.painter.refresh(),this._dispatchAgency(this._lastHover,vU.EVENT.DROP,t,this._draggingTarget))}},{key:"_processDragEnd",value:function(t){this._draggingTarget&&(this._dispatchAgency(this._draggingTarget,vU.EVENT.DRAGEND,t),this._lastHover=null),this._isDragging=0,this._draggingTarget=null}},{key:"_processOverShape",value:function(t){this._dispatchAgency(this._lastHover,vU.EVENT.MOUSEOVER,t)}},{key:"_processOutShape",value:function(t){this._dispatchAgency(this._lastHover,vU.EVENT.MOUSEOUT,t)}},{key:"_dispatchAgency",value:function(t,e,r,n){var o="on"+e,i={type:e,event:r,target:t,cancelBubble:!1},a=t;for(n&&(i.dragged=n);a&&(a[o]&&(i.cancelBubble=a[o](i)),a.dispatch(e,i),a=a.parent,!i.cancelBubble););t?i.cancelBubble||this.dispatch(e,i):n||this.dispatch(e,{type:e,event:r})}},{key:"_iterateAndFindHover",value:function(){for(var t,e=NU.Util_matrix.create(),r=this.storage.getShapeList(),n=[0,0],o=r.length-1;o>=0;o--){var i=r[o];if(void 0!==i.zlevel&&(t=this.painter.getLayer(i.zlevel,t),n[0]=this._mouseX,n[1]=this._mouseY,t.needTransform&&(NU.Util_matrix.invert(e,t.transform),NU.Util_vector.applyTransform(n,n,e))),this._findHover(i,n[0],n[1]))break}}},{key:"_mobildFindFixed",value:function(t){var e=[{x:10},{x:-20},{x:10,y:10},{y:-20}];this._lastHover=null,this._mouseX=t.zrenderX,this._mouseY=t.zrenderY,this._event=t,this._iterateAndFindHover();for(var r=0;!this._lastHover&&r<e.length;r++){var n=e[r];n.x&&(this._mouseX+=n.x),n.y&&(this._mouseX+=n.y),this._iterateAndFindHover()}this._lastHover&&(t.zrenderX=this._mouseX,t.zrenderY=this._mouseY)}},{key:"_zrenderEventFixed",value:function(t,e){if(t.zrenderFixed)return t;if(e){var r="touchend"!=t.type?t.targetTouches[0]:t.changedTouches[0];if(r){var n=this.root.getBoundingClientRect();t.zrenderX=r.clientX-n.left,t.zrenderY=r.clientY-n.top}}else{var o=(t=t||window.event).toElement||t.relatedTarget||t.srcElement||t.target;o&&o!=this._domHover&&(t.zrenderX=(void 0!==t.offsetX?t.offsetX:t.layerX)+o.offsetLeft,t.zrenderY=(void 0!==t.offsetY?t.offsetY:t.layerY)+o.offsetTop)}return t.zrenderFixed=1,t}},{key:"getLastHoverOne",value:function(){return this._lastHover?this._lastHover:null}}])&&iH(r.prototype,n),o&&iH(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function fH(t){"@babel/helpers - typeof";return(fH="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function pH(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,hH(n.key),n)}}function hH(t){var e=function(t,e){if("object"!=fH(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=fH(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==fH(e)?e:e+""}var yH=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.CLASS_NAME="SuperMap.LevelRenderer.Animation.easing"},(e=[{key:"destroy",value:function(){}},{key:"Linear",value:function(t){return t}},{key:"QuadraticIn",value:function(t){return t*t}},{key:"QuadraticOut",value:function(t){return t*(2-t)}},{key:"QuadraticInOut",value:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}},{key:"CubicIn",value:function(t){return t*t*t}},{key:"CubicOut",value:function(t){return--t*t*t+1}},{key:"CubicInOut",value:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}},{key:"QuarticIn",value:function(t){return t*t*t*t}},{key:"QuarticOut",value:function(t){return 1- --t*t*t*t}},{key:"QuarticInOut",value:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}},{key:"QuinticIn",value:function(t){return t*t*t*t*t}},{key:"QuinticOut",value:function(t){return--t*t*t*t*t+1}},{key:"QuinticInOut",value:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}},{key:"SinusoidalIn",value:function(t){return 1-Math.cos(t*Math.PI/2)}},{key:"SinusoidalOut",value:function(t){return Math.sin(t*Math.PI/2)}},{key:"SinusoidalInOut",value:function(t){return.5*(1-Math.cos(Math.PI*t))}},{key:"ExponentialIn",value:function(t){return 0===t?0:Math.pow(1024,t-1)}},{key:"ExponentialOut",value:function(t){return 1===t?1:1-Math.pow(2,-10*t)}},{key:"ExponentialInOut",value:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(2-Math.pow(2,-10*(t-1)))}},{key:"CircularIn",value:function(t){return 1-Math.sqrt(1-t*t)}},{key:"CircularOut",value:function(t){return Math.sqrt(1- --t*t)}},{key:"CircularInOut",value:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}},{key:"ElasticIn",value:function(t){var e,r=.1;return 0===t?0:1===t?1:(r<1?(r=1,e=.1):e=.4*Math.asin(1/r)/(2*Math.PI),-r*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/.4))}},{key:"ElasticOut",value:function(t){var e,r=.1;return 0===t?0:1===t?1:(r<1?(r=1,e=.1):e=.4*Math.asin(1/r)/(2*Math.PI),r*Math.pow(2,-10*t)*Math.sin((t-e)*(2*Math.PI)/.4)+1)}},{key:"ElasticInOut",value:function(t){var e,r=.1;return 0===t?0:1===t?1:(r<1?(r=1,e=.1):e=.4*Math.asin(1/r)/(2*Math.PI),(t*=2)<1?r*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/.4)*-.5:r*Math.pow(2,-10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/.4)*.5+1)}},{key:"BackIn",value:function(t){var e=1.70158;return t*t*((e+1)*t-e)}},{key:"BackOut",value:function(t){var e=1.70158;return--t*t*((e+1)*t+e)+1}},{key:"BackInOut",value:function(t){var e=2.5949095;return(t*=2)<1?t*t*((e+1)*t-e)*.5:.5*((t-=2)*t*((e+1)*t+e)+2)}},{key:"BounceIn",value:function(t){return 1-this.BounceOut(1-t)}},{key:"BounceOut",value:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}},{key:"BounceInOut",value:function(t){return t<.5?.5*this.BounceIn(2*t):.5*this.BounceOut(2*t-1)+.5}}])&&pH(t.prototype,e),r&&pH(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function dH(t){"@babel/helpers - typeof";return(dH="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function vH(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,mH(n.key),n)}}function mH(t){var e=function(t,e){if("object"!=dH(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=dH(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==dH(e)?e:e+""}var bH=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._targetPool=e.target||{},this._targetPool instanceof Array||(this._targetPool=[this._targetPool]),this._life=e.life||1e3,this._delay=e.delay||0,this._startTime=(new Date).getTime()+this._delay,this._endTime=this._startTime+1e3*this._life,this.loop=void 0!==e.loop&&e.loop,this.gap=e.gap||0,this.easing=e.easing||"Linear",this.onframe=e.onframe,this.ondestroy=e.ondestroy,this.onrestart=e.onrestart,this.CLASS_NAME="SuperMap.LevelRenderer.Animation.Clip"},(e=[{key:"destroy",value:function(){}},{key:"step",value:function(t){var e=new yH,r=(t-this._startTime)/this._life;if(!(r<0)){r=Math.min(r,1);var n="string"==typeof this.easing?e[this.easing]:this.easing,o="function"==typeof n?n(r):r;return this.fire("frame",o),1==r?this.loop?(this.restart(),"restart"):(this._needsRemove=!0,"destroy"):null}}},{key:"restart",value:function(){var t=((new Date).getTime()-this._startTime)%this._life;this._startTime=(new Date).getTime()-t+this.gap}},{key:"fire",value:function(t,e){for(var r=0,n=this._targetPool.length;r<n;r++)this["on"+t]&&this["on"+t](this._targetPool[r],e)}}])&&vH(t.prototype,e),r&&vH(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function gH(t){"@babel/helpers - typeof";return(gH="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function SH(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function wH(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,OH(n.key),n)}}function _H(t,e,r){return e&&wH(t.prototype,e),r&&wH(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function OH(t){var e=function(t,e){if("object"!=gH(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=gH(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==gH(e)?e:e+""}function EH(t,e,r){return e=PH(e),function(t,e){if(e&&("object"===gH(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],PH(t).constructor):e.apply(t,r))}function PH(t){return(PH=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function xH(t,e){return(xH=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var TH=function(t){function e(t){var r;return SH(this,e),r=EH(this,e,[t]),t=t||{},r.stage={},r.onframe=function(){},r._clips=[],r._running=!1,r._time=0,Tt.extend(r,t),r.CLASS_NAME="SuperMap.LevelRenderer.Animation",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&xH(t,e)}(e,BF),_H(e,[{key:"add",value:function(t){this._clips.push(t)}},{key:"remove",value:function(t){var e=(new vD).indexOf(this._clips,t);e>=0&&this._clips.splice(e,1)}},{key:"_update",value:function(){for(var t=(new Date).getTime(),e=t-this._time,r=this._clips,n=r.length,o=[],i=[],a=0;a<n;a++){var s=r[a],u=s.step(t);u&&(o.push(u),i.push(s))}this.stage.update&&this.stage.update();for(var l=0;l<n;)r[l]._needsRemove?(r[l]=r[n-1],r.pop(),n--):l++;n=o.length;for(var c=0;c<n;c++)i[c].fire(o[c]);this._time=t,this.onframe(e),this.dispatch("frame",e)}},{key:"start",value:function(){var t=window.requestAnimationFrame||window.msRequestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(t){setTimeout(t,16)},e=this;this._running=!0,this._time=(new Date).getTime(),t(function r(){e._running&&(e._update(),t(r))})}},{key:"stop",value:function(){this._running=!1}},{key:"clear",value:function(){this._clips=[]}},{key:"animate",value:function(t,e){var r=new CH(t,(e=e||{}).loop,e.getter,e.setter);return r.animation=this,r}}],[{key:"_interpolateNumber",value:function(t,e,r){return(e-t)*r+t}},{key:"_interpolateArray",value:function(t,r,n,o,i){var a=t.length;if(1==i)for(var s=0;s<a;s++)o[s]=e._interpolateNumber(t[s],r[s],n);else for(var u=t[0].length,l=0;l<a;l++)for(var c=0;c<u;c++)o[l][c]=e._interpolateNumber(t[l][c],r[l][c],n)}},{key:"_isArrayLike",value:function(t){switch(gH(t)){case"undefined":case"string":return!1}return void 0!==t.length}},{key:"_catmullRomInterpolateArray",value:function(t,r,n,o,i,a,s,u,l){var c=t.length;if(1==l)for(var f=0;f<c;f++)u[f]=e._catmullRomInterpolate(t[f],r[f],n[f],o[f],i,a,s);else for(var p=t[0].length,h=0;h<c;h++)for(var y=0;y<p;y++)u[h][y]=e._catmullRomInterpolate(t[h][y],r[h][y],n[h][y],o[h][y],i,a,s)}},{key:"_catmullRomInterpolate",value:function(t,e,r,n,o,i,a){var s=.5*(r-t),u=.5*(n-e);return(2*(e-r)+s+u)*a+(-3*(e-r)-2*s-u)*i+s*o+e}},{key:"_cloneValue",value:function(t){var r=Array.prototype.slice;if(e._isArrayLike(t)){var n=t.length;if(e._isArrayLike(t[0])){for(var o=[],i=0;i<n;i++)o.push(r.call(t[i]));return o}return r.call(t)}return t}},{key:"rgba2String",value:function(t){return t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.floor(t[2]),"rgba("+t.join(",")+")"}}])}(),CH=function(){return _H(function t(e,r,n,o){SH(this,t),this._tracks={},this._target=e,this._loop=r||!1,this._getter=n||function(t,e){return t[e]},this._setter=o||function(t,e,r){t[e]=r},this._clipCount=0,this._delay=0,this._doneList=[],this._onframeList=[],this._clipList=[],this.CLASS_NAME="SuperMap.LevelRenderer.Animation.Animator"},[{key:"when",value:function(t,e){for(var r in e)this._tracks[r]||(this._tracks[r]=[],0!==t&&this._tracks[r].push({time:0,value:TH._cloneValue(this._getter(this._target,r))})),this._tracks[r].push({time:parseInt(t,10),value:e[r]});return this}},{key:"during",value:function(t){return this._onframeList.push(t),this}},{key:"start",value:function(t){var e=this,r=this._setter,n=this._getter,o=e._onframeList.length,i="spline"===t,a=function(){if(e._clipCount--,0===e._clipCount){e._tracks={};for(var t=e._doneList.length,r=0;r<t;r++)e._doneList[r].call(e)}},s=function(s,u){var l=s.length;if(l){var c=s[0].value,f=TH._isArrayLike(c),p=!1,h=f&&TH._isArrayLike(c[0])?2:1;s.sort(function(t,e){return t.time-e.time});for(var y=s[l-1].time,d=[],v=[],m=0;m<l;m++){d.push(s[m].time/y);var b=s[m].value;"string"==typeof b&&(0===(b=NU.Util_color.toArray(b)).length&&(b[0]=b[1]=b[2]=0,b[3]=1),p=!0),v.push(b)}var g,S,w,_,O,E,P,x=0,T=0;if(p)var C=[0,0,0,0];var k=new bH({target:e._target,life:y,loop:e._loop,delay:e._delay,onframe:function(t,a){if(a<T){for(g=Math.min(x+1,l-1),S=g;S>=0&&!(d[S]<=a);S--);S=Math.min(S,l-2)}else{for(S=x;S<l&&!(d[S]>a);S++);S=Math.min(S-1,l-2)}x=S,T=a;var s=d[S+1]-d[S];if(0!==s){var c,y;for(w=(a-d[S])/s,i?(O=v[S],_=v[0===S?S:S-1],E=v[S>l-2?l-1:S+1],P=v[S>l-3?l-1:S+2],f?TH._catmullRomInterpolateArray(_,O,E,P,w,w*w,w*w*w,n(t,u),h):(c=p?TH.rgba2String(C):TH._catmullRomInterpolate(_,O,E,P,w,w*w,w*w*w),r(t,u,c))):f?TH._interpolateArray(v[S],v[S+1],w,n(t,u),h):(p?(TH._interpolateArray(v[S],v[S+1],w,C,1),y=TH.rgba2String(C)):y=TH._interpolateNumber(v[S],v[S+1],w),r(t,u,y)),S=0;S<o;S++)e._onframeList[S](t,a)}},ondestroy:a});t&&"spline"!==t&&(k.easing=t),e._clipList.push(k),e._clipCount++,e.animation.add(k)}};for(var u in this._tracks)s(this._tracks[u],u);return this}},{key:"stop",value:function(){for(var t=0;t<this._clipList.length;t++){var e=this._clipList[t];this.animation.remove(e)}this._clipList=[]}},{key:"delay",value:function(t){return this._delay=t,this}},{key:"done",value:function(t){return t&&this._doneList.push(t),this}}])}();function kH(t){"@babel/helpers - typeof";return(kH="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function AH(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,jH(n.key),n)}}function jH(t){var e=function(t,e){if("object"!=kH(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=kH(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==kH(e)?e:e+""}var NH=function(){return t=function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=e,this.storage=new Wz,this.painter=new rH(r,this.storage),this.handler=new cH(r,this.storage,this.painter),this.animatingElements=[],this.animation=new TH({stage:{update:t.getFrameCallback(this)}}),this._needsRefreshNextFrame=!1,this.animation.start(),this.CLASS_NAME="SuperMap.LevelRenderer.Render"},r=[{key:"getFrameCallback",value:function(t){return function(){var e=t.animatingElements;if(e instanceof Array){for(var r=0,n=e.length;r<n;r++)t.storage.mod(e[r].id);(e.length||t._needsRefreshNextFrame)&&t.refresh()}}}}],(e=[{key:"destroy",value:function(){this.id=null,this.storage=null,this.painter=null,this.handler=null,this.animatingElements=null,this.animation=null,this._needsRefreshNextFrame=null}},{key:"getId",value:function(){return this.id}},{key:"addShape",value:function(t){return this.storage.addRoot(t),this}},{key:"addGroup",value:function(t){return this.storage.addRoot(t),this}},{key:"delShape",value:function(t){return this.storage.delRoot(t),this}},{key:"delGroup",value:function(t){return this.storage.delRoot(t),this}},{key:"modShape",value:function(t,e){return this.storage.mod(t,e),this}},{key:"modGroup",value:function(t,e){return this.storage.mod(t,e),this}},{key:"modLayer",value:function(t,e){return this.painter.modLayer(t,e),this}},{key:"addHoverShape",value:function(t){return this.storage.addHover(t),this}},{key:"render",value:function(t){return this.painter.render(t),this._needsRefreshNextFrame=!1,this}},{key:"refresh",value:function(t){return this.painter.refresh(t),this._needsRefreshNextFrame=!1,this}},{key:"refreshNextFrame",value:function(){return this._needsRefreshNextFrame=!0,this}},{key:"refreshHover",value:function(t){return this.painter.refreshHover(t),this}},{key:"refreshShapes",value:function(t,e){return this.painter.refreshShapes(t,e),this}},{key:"resize",value:function(){return this.painter.resize(),this}},{key:"animate",value:function(t,e,r){if("string"==typeof t&&(t=this.storage.get(t)),t){var n;if(e){for(var o=e.split("."),i=t,a=0,s=o.length;a<s;a++)i&&(i=i[o[a]]);i&&(n=i)}else n=t;if(!n)return void NU.Util_log('Property "'+e+'" is not existed in element '+t.id);var u=this.animatingElements;return void 0===t.__aniCount&&(t.__aniCount=0),0===t.__aniCount&&u.push(t),t.__aniCount++,this.animation.animate(n,{loop:r}).done(function(){if(t.__aniCount--,0===t.__aniCount){var e=(new vD).indexOf(u,t);u.splice(e,1)}})}NU.Util_log("Element not existed")}},{key:"clearAnimation",value:function(){this.animation.clear()}},{key:"getWidth",value:function(){return this.painter.getWidth()}},{key:"getHeight",value:function(){return this.painter.getHeight()}},{key:"toDataURL",value:function(t,e,r){return this.painter.toDataURL(t,e,r)}},{key:"shapeToImage",value:function(t,e,r){var n=Tt.createUniqueID("SuperMap.LevelRenderer.ToImage_");return this.painter.shapeToImage(n,t,e,r)}},{key:"on",value:function(t,e){return this.handler.on(t,e),this}},{key:"un",value:function(t,e){return this.handler.un(t,e),this}},{key:"trigger",value:function(t,e){return this.handler.trigger(t,e),this.handler.dispatch(t,e),this}},{key:"clear",value:function(){return this.storage.delRoot(),this.painter.clear(),this}},{key:"dispose",value:function(){this.animation.stop(),this.clear(),this.storage.dispose(),this.painter.dispose(),this.handler.dispose(),this.animation=null,this.animatingElements=null,this.storage=null,this.painter=null,this.handler=null}},{key:"updateHoverShapes",value:function(t){return this.painter.updateHoverLayer(t),this}},{key:"getAllShapes",value:function(){return this.storage._shapeList}},{key:"clearAll",value:function(){return this.clear(),this.painter.clearHover(),this}},{key:"getHoverOne",value:function(){return this.handler.getLastHoverOne()}}])&&AH(t.prototype,e),r&&AH(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function IH(t){"@babel/helpers - typeof";return(IH="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function MH(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,RH(n.key),n)}}function RH(t){var e=function(t,e){if("object"!=IH(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=IH(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==IH(e)?e:e+""}var LH=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),t._instances={},t.Tool={},this.version="2.0.4",this.CLASS_NAME="SuperMap.LevelRenderer"}return e=t,(r=[{key:"destroy",value:function(){this.dispose(),this.version=null}},{key:"init",value:function(e){var r=new NH(Tt.createUniqueID("LRenderer_"),e);return t._instances[r.id]=r,r}},{key:"dispose",value:function(e){if(e)e.dispose(),this.delInstance(e.id);else{for(var r in t._instances)t._instances[r].dispose();t._instances={}}return this}},{key:"getInstance",value:function(e){return t._instances[e]}},{key:"delInstance",value:function(e){return delete t._instances[e],this}}])&&MH(e.prototype,r),n&&MH(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,r,n}();function DH(t,e,r){if(t===r||t===e)return t;var n=r-e;return((t-e)%n+n)%n+e}function BH(t){return t*Math.PI/180}Math.PI,Math.PI;var FH={EXCEL:"EXCEL",CSV:"CSV",ISERVER:"ISERVER",GEOJSON:"GEOJSON",JSON:"JSON"},UH={fileMaxSize:10485760};function GH(t){"@babel/helpers - typeof";return(GH="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function VH(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,zH(n.key),n)}}function zH(t){var e=function(t,e){if("object"!=GH(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=GH(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==GH(e)?e:e+""}var HH=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.FileTypes=FH,this.FileConfig=UH,this.loadFileObject=e&&e.loadFileObject?e.loadFileObject:[]},(e=[{key:"set",value:function(t,e){this[t]=e}},{key:"get",value:function(t){return this[t]}}])&&VH(t.prototype,e),r&&VH(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function qH(t){"@babel/helpers - typeof";return(qH="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function JH(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,WH(n.key),n)}}function WH(t){var e=function(t,e){if("object"!=qH(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=qH(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==qH(e)?e:e+""}var KH=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._initView()},(e=[{key:"_initView",value:function(){var t=document.createElement("div");t.hidden=!0,t.setAttribute("class","component-messageboxcontainer component-border-bottom-orange");var e=document.createElement("div");e.setAttribute("class","icon"),this.icon=document.createElement("span"),this.icon.setAttribute("class","supermapol-icons-message-warning"),e.appendChild(this.icon),t.appendChild(e);var r=document.createElement("div");r.setAttribute("class","component-messagebox"),r.innerHTML="",t.appendChild(r),this.messageBox=r;var n=document.createElement("div");n.setAttribute("class","component-messagebox__cancelbtncontainer");var o=document.createElement("button");o.setAttribute("class","component-messagebox__cancelBtn"),o.innerHTML="x",o.onclick=this.closeView.bind(this),n.appendChild(o),t.appendChild(n),this.messageBoxContainer=t,document.body.appendChild(this.messageBoxContainer)}},{key:"closeView",value:function(){this.messageBoxContainer.hidden=!0}},{key:"showView",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"warring";"success"===e?(this.icon.setAttribute("class","supermapol-icons-message-success"),this.messageBoxContainer.setAttribute("class","component-messageboxcontainer component-border-bottom-green")):"failure"===e?(this.icon.setAttribute("class","supermapol-icons-message-failure"),this.messageBoxContainer.setAttribute("class","component-messageboxcontainer component-border-bottom-red")):"warring"===e&&(this.icon.setAttribute("class","supermapol-icons-message-warning"),this.messageBoxContainer.setAttribute("class","component-messageboxcontainer component-border-bottom-orange")),this.messageBox.innerHTML=t,this.messageBoxContainer.hidden=!1}}])&&JH(t.prototype,e),r&&JH(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}(),YH=function(){try{return echarts}catch(t){return{}}}(),QH={"en-US":{title_dataFlowService:"Data Flow Service",title_distributedAnalysis:"Distributed Analysis",title_clientComputing:"Client Computing",title_dataServiceQuery:"Data Service Query",title_searchCity:"Search city",title_searchLayer:" Search layer",text_input_value_inputDataFlowUrl:"Please enter the data stream service address such as: ws://{serviceRoot}/{dataFlowName}/dataflow/subscribe",text_displayFeaturesInfo:"Display feature information",text_subscribe:"subscribe",text_cancelSubscribe:"unsubscribe",text_densityAnalysis:"Density Analysis",text_CalculateTheValuePerUnitArea:"Calculate the value per unit area within the neighborhood shape",text_option_selectDataset:"Please select a dataset",text_label_dataset:"Dataset",text_option_simplePointDensityAnalysis:"Simple point density analysis",text_option_nuclearDensityAnalysis:"Nuclear density analysis",text_label_analyticalMethod:"Analytical method",text_option_quadrilateral:"Quadrilateral",text_option_hexagon:"hexagon",text_label_meshType:"Mesh type",text_option_notSet:"Not set",text_label_weightField:"Weight field",text_label_gridSizeInMeters:"Grid size",text_label_searchRadius:"Search radius",text_label_queryRange:"Scope of analysis",text_label_areaUnit:"Area unit",text_option_equidistantSegmentation:"Equidistant segmentation",text_option_logarithm:"Logarithm",text_option_equalCountingSegment:"Equal counting segment",text_option_squareRootSegmentation:"Square root segmentation",text_label_thematicMapSegmentationMode:"Thematic map segmentation mode",text_label_thematicMapSegmentationParameters:"Thematic map segmentation parameters",text_option_greenOrangePurpleGradient:"Green orange purple gradient",text_option_greenOrangeRedGradient:"Green orange red gradient",text_option_rainbowGradient:"Rainbow gradient",text_option_spectralGradient:"Spectral gradient",text_option_terrainGradient:"Terrain gradient",text_label_thematicMapColorGradientMode:"Thematic map color gradient mode",text_label_resultLayerName:"Result layer name",text_chooseFile:"Open File",text_isoline:"Isoline",text_extractDiscreteValue:"Extract discrete value generation curve",text_buffer:"Buffer",text_specifyTheDistance:"Specify the distance to create the surrounding area",text_label_analysisLayer:"Analysis layer",text_label_extractField:"Extract field",text_label_extractedValue:"Extracted value",text_label_distanceAttenuation:"Distance attenuation",text_label_gridSize:"gridSize",text_label_bufferRadius:"Buffer radius",text_label_defaultkilometers:"Default 10 kilometers",text_label_kilometer:"kilometer",text_label_unit:"unit",text_retainOriginal:"Retain original object field",text_mergeBuffer:"Merge buffer",text_label_color:"Color",text_label_buffer:"[Buffer]",text_label_isolines:"[Isolines]",text_label_queryRangeTips:"The default is the full range of input data. Example: -74.050, 40.650, -73.850, 40.850",text_label_queryModel:"Query mode",text_label_IDArrayOfFeatures:"ID array of features",text_label_maxFeatures:"The maximum number of features that can be returned",text_label_bufferDistance:"Buffer distance",text_label_queryRange1:"Query range",text_label_spatialQueryMode:"Spatial query mode",text_label_featureFilter:"Feature filter",text_label_geometricObject:"Geometric object",text_label_queryMode:"Query mode",text_label_searchTips:"Search for city locations or layer features",text_label_chooseSearchLayers:"Select a query layer",text_loadSearchCriteria:"Load search criteria",text_saveSearchCriteria:"Save search criteria",btn_analyze:"Analyze",btn_analyzing:"Analyzing",btn_emptyTheAnalysisLayer:"Empty the analysis layer",btn_cancelAnalysis:"Cancel",btn_query:"Query",btn_querying:"Querying",btn_emptyTheRresultLayer:"Clear all result layers","msg_dataReturnedIsEmpty.":"The request is successful and the data returned by the query is empty.",msg_dataFlowServiceHasBeenSubscribed:"The data stream service has been subscribed to.",msg_inputDataFlowUrlFirst:"Please enter the data stream service address first.",msg_datasetOrMethodUnsupport:"This dataset does not support this analysis type. Please reselect the dataset.",msg_selectDataset:"Please select a data set!",msg_setTheWeightField:"Please set the weight field!",msg_theFieldNotSupportAnalysis:"The field you currently select does not support analysis!",msg_resultIsEmpty:"The result of the analysis is empty!",msg_openFileFail:"Failed to open file!",msg_fileTypeUnsupported:"File format is not supported!",msg_fileSizeExceeded:"File size exceeded! The file size should not exceed 10M!",msg_dataInWrongGeoJSONFormat:"Wrong data format! Non standard GEOJSON format data!",msg_dataInWrongFormat:"Wrong data format! Non standard EXCEL, CSV or GEOJSON format data!",msg_searchKeywords:"Search keywords cannot be empty. Please enter your search criteria.",msg_searchGeocodeField:"Did not match the address matching service data!",msg_cityGeocodeField:"The address matching service of the current city is not configured.",msg_getFeatureField:"No related vector features found!",msg_dataflowservicesubscribed:"The data stream service has been subscribed to.",msg_subscribesucceeded:"The data stream service subscription was successful.",msg_crsunsupport:"Does not support the coordinate system of the current map",msg_tilematrixsetunsupport:"Incoming TileMatrixSet is not supported",msg_jsonResolveFiled:"JSON format parsing failure！",msg_requestContentFiled:"Failed to request data through iportal!",msg_getdatafailed:"Failed to get data!"},"zh-CN":{title_dataFlowService:"数据流服务",title_distributedAnalysis:"分布式分析",title_clientComputing:"客户端计算",title_dataServiceQuery:"数据服务查询",title_searchCity:"搜索城市",title_searchLayer:"搜索图层",text_input_value_inputDataFlowUrl:"请输入数据流服务地址如:ws://{serviceRoot}/{dataFlowName}/dataflow/subscribe",text_displayFeaturesInfo:"显示要素信息",text_subscribe:"订阅",text_cancelSubscribe:"取消订阅",text_densityAnalysis:"密度分析",text_CalculateTheValuePerUnitArea:"计算点指定邻域形状内的每单位面积量值",text_option_selectDataset:"请选择数据集",text_label_dataset:"数据集",text_option_simplePointDensityAnalysis:"简单点密度分析",text_option_nuclearDensityAnalysis:"核密度分析",text_label_analyticalMethod:"分析方法",text_option_quadrilateral:"四边形",text_option_hexagon:"六边形",text_label_meshType:"网格面类型",text_option_notSet:"未设置",text_label_weightField:"权重字段",text_label_gridSizeInMeters:"网格大小",text_label_searchRadius:"搜索半径",text_label_queryRange:"分析范围",text_label_areaUnit:"面积单位",text_option_equidistantSegmentation:"等距离分段",text_option_logarithm:"对数",text_option_equalCountingSegment:"等计数分段",text_option_squareRootSegmentation:"平方根分段",text_label_thematicMapSegmentationMode:"专题图分段模式",text_label_thematicMapSegmentationParameters:"专题图分段参数",text_option_greenOrangePurpleGradient:"绿橙紫渐变",text_option_greenOrangeRedGradient:"绿橙红渐变",text_option_rainbowGradient:"彩虹渐变",text_option_spectralGradient:"光谱渐变",text_option_terrainGradient:"地形渐变",text_label_thematicMapColorGradientMode:"专题图颜色渐变模式",text_label_resultLayerName:"结果图层名称",text_chooseFile:"选择文件",text_isoline:"等值线",text_extractDiscreteValue:"提取离散值生成曲线",text_buffer:"缓冲区",text_specifyTheDistance:"指定距离创建周边区域",text_label_analysisLayer:"分析图层",text_label_extractField:"提取字段",text_label_extractedValue:"提取值",text_label_distanceAttenuation:"距离衰减",text_label_gridSize:"栅格大小",text_label_bufferRadius:"缓冲半径",text_label_defaultkilometers:"默认10千米",text_option_kilometer:"千米",text_label_unit:"单位",text_retainOriginal:"保留原对象字段属性",text_mergeBuffer:"合并缓冲区",text_label_color:"颜色",text_label_buffer:"[缓冲区]",text_label_isolines:"[等值线]",text_label_queryRangeTips:"默认为输入数据的全幅范围。范例：-74.050,40.650,-73.850,40.850",text_label_IDArrayOfFeatures:"要素 ID 数组",text_label_maxFeatures:"最多可返回的要素数量",text_label_bufferDistance:"缓冲区距离",text_label_queryRange1:"查询范围",text_label_spatialQueryMode:"空间查询模式",text_label_featureFilter:"要素过滤器",text_label_geometricObject:"几何对象",text_label_queryMode:"查询模式",text_label_searchTips:"搜索城市地点或图层要素",text_label_chooseSearchLayers:"选择查询图层",text_loadSearchCriteria:"加载搜索条件",text_saveSearchCriteria:"保存搜索条件",btn_analyze:"分析",btn_analyzing:"分析中",btn_emptyTheAnalysisLayer:"清空分析图层",btn_cancelAnalysis:"取消",btn_query:"查询",btn_querying:"查询中",btn_emptyTheRresultLayer:"清除所有结果图层",msg_dataFlowServiceHasBeenSubscribed:"已订阅该数据流服务。",msg_inputDataFlowUrlFirst:"请先输入数据流服务地址。",msg_datasetOrMethodUnsupport:"该数据集不支持本分析类型，请重新选择数据集",msg_selectDataset:"请选择数据集！",msg_setTheWeightField:"请设置权重字段！",msg_theFieldNotSupportAnalysis:"您当前选择的字段不支持分析！",msg_resultIsEmpty:"分析的结果为空！",msg_dataReturnedIsEmpty:"请求成功，查询返回的数据为空。",msg_openFileFail:"打开文件失败！",msg_fileTypeUnsupported:"不支持该文件格式！",msg_fileSizeExceeded:"文件大小超限！文件大小不得超过 10M！",msg_dataInWrongGeoJSONFormat:"数据格式错误！非标准的 GEOJSON 格式数据！",msg_dataInWrongFormat:"数据格式错误！非标准的 EXCEL, CSV 或 GEOJSON 格式数据！",msg_searchKeywords:"搜索关键字不能为空，请输入搜索条件。",msg_searchGeocodeField:"未匹配到地址匹配服务数据！",msg_cityGeocodeField:"未配置当前城市的地址匹配服务。",msg_getFeatureField:"未查找到相关矢量要素！",msg_dataflowservicesubscribed:"已订阅该数据流服务。",msg_subscribesucceeded:"数据流服务订阅成功。",msg_crsunsupport:"不支持当前地图的坐标系",msg_tilematrixsetunsupport:"不支持传入的TileMatrixSet",msg_jsonResolveFiled:"json格式解析失败！",msg_requestContentFiled:"通过iportal请求数据失败！",msg_getdatafailed:"获取数据失败！"},code:null,defaultCode:"en-US",getCode:function(){return QH.code||QH.setCode(),QH.code},setCode:function(){var t=this.getLanguageFromCookie();t||(t=QH.defaultCode,t="Netscape"===navigator.appName?navigator.language:navigator.browserLanguage),0===t.indexOf("zh")&&(t="zh-CN"),0===t.indexOf("en")&&(t="en-US"),QH.code=t},getLanguageFromCookie:function(){for(var t=document.cookie.split(";"),e=0;e<t.length;e++){for(var r=t[e];" "===r.charAt(0);)r=r.substring(1);if(-1!==r.indexOf("language="))return r.substring("language=".length,r.length)}return""},i18n:function(t){var e=QH[QH.getCode()],r=e&&e[t];return r||(r=t),r}},XH=function(){try{return XLSX}catch(t){return{}}}(),ZH={rABS:"undefined"!=typeof FileReader&&FileReader.prototype&&FileReader.prototype.readAsBinaryString,rABF:"undefined"!=typeof FileReader&&FileReader.prototype&&FileReader.prototype.readAsArrayBuffer,rAT:"undefined"!=typeof FileReader&&FileReader.prototype&&FileReader.prototype.readAsText,readFile:function(t,e,r,n,o){FH.JSON===t||FH.GEOJSON===t?this.readTextFile(e,r,n,o):FH.EXCEL!==t&&FH.CSV!==t||this.readXLSXFile(e,r,n,o)},readTextFile:function(t,e,r,n){var o=new FileReader;o.onloadend=function(t){e&&e.call(n,t.target.result)},o.onerror=function(t){r&&r.call(n,t)},this.rAT?o.readAsText(t.file,"utf-8"):o.readAsBinaryString(t.file)},readXLSXFile:function(t,e,r,n){var o=new FileReader;o.onloadend=function(t){var o=new Uint8Array(t.target.result),i=XH.read(o,{type:"array"});try{if(i&&i.SheetNames&&i.SheetNames.length>0){var a=i.SheetNames[0],s=XH.utils.sheet_to_csv(i.Sheets[a]);e&&e.call(n,s)}}catch(t){r&&r.call(n,t)}},o.onerror=function(t){r&&r.call(n,t)},this.rABF&&o.readAsArrayBuffer(t.file)},processDataToGeoJson:function(t,e,r,n,o){var i=null;if("EXCEL"===t||"CSV"===t)i=this.processExcelDataToGeoJson(e),r&&r.call(o,i);else if("JSON"===t||"GEOJSON"===t){var a=e;"string"==typeof a&&(a=JSON.parse(a)),"ISERVER"===a.type?i=a.data.recordsets[0].features:"FeatureCollection"===a.type?i=a:n&&n.call(o,QH.i18n("msg_dataInWrongGeoJSONFormat")),r&&r.call(o,i)}else n&&n.call(o,QH.i18n("msg_dataInWrongFormat"))},processExcelDataToGeoJson:function(t){for(var e=this.string2Csv(t),r=e.colTitles,n=-1,o=-1,i=0,a=r.length;i<a;i++)this.isXField(r[i])&&(n=i),this.isYField(r[i])&&(o=i);for(var s=[],u=0,l=e.rows.length;u<l;u++){var c=e.rows[u],f=Number(c[n]),p=Number(c[o]),h={};for(var y in e.colTitles){h[e.colTitles[y]]=e.rows[u][y]}var d={type:"Feature",geometry:{type:"Point",coordinates:[f,p]},properties:h};s.push(d)}return s},isXField:function(t){var e=t.toLowerCase();return"x"===e||"smx"===e||"jd"===e||"经度"===e||"东经"===e||"longitude"===e||"lot"===e||"lon"===e||"lng"===e||"x坐标"===e},isYField:function(t){var e=t.toLowerCase();return"y"===e||"smy"===e||"wd"===e||"纬度"===e||"北纬"===e||"latitude"===e||"lat"===e||"y坐标"===e},string2Csv:function(t,e){var r=t.split("\n"),n={};n.colTitles=e?[]:r[0].split(","),n.rows=[];for(var o=e?0:1;o<r.length;o++)r[o]&&n.rows.push(r[o].split(","));return n}};function $H(t){"@babel/helpers - typeof";return($H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function tq(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,eq(n.key),n)}}function eq(t){var e=function(t,e){if("object"!=$H(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=$H(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==$H(e)?e:e+""}var rq=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.datasets=e,this.EVENT_TYPES=["getdatafailed"],this.events=new wr(this,null,this.EVENT_TYPES)},(e=[{key:"getDatasetInfo",value:function(t){var e=this.datasets.url,r=this;co.get(e).then(function(t){return t.json()}).then(function(e){if(e.datasetInfo){var n=e.datasetInfo;r.datasetsInfo={dataSourceName:n.dataSourceName,datasetName:n.name,mapName:e.name},t({result:r.datasetsInfo})}}).catch(function(t){console.log(t),r._fireFailedEvent(t)})}},{key:"getDataFeatures",value:function(t,e){var r,n,o=t.result,i={name:o.datasetName+"@"+o.dataSourceName};Object.assign(i,this.datasets.queryInfo),r=new gs(i),n=new fb({queryParameter:r,datasetNames:[o.dataSourceName+":"+o.datasetName],fromIndex:0,toIndex:1e5}),new gb(o.dataUrl).processAsync(n,e)}},{key:"getLayerFeatures",value:function(t,e){var r,n,o=t.result,i={name:o.mapName};Object.assign(i,this.datasets.queryInfo),r=new gs(i),n=new VP({queryParams:[r],expectCount:1e5}),new QP(o.dataUrl).processAsync(n,e)}},{key:"getDataInfoByIptl",value:function(t){this.getServiceInfo(this.datasets.url,t)}},{key:"getServiceInfo",value:function(t,e){var r=this;co.get(t,null,{withCredentials:this.datasets.withCredentials}).then(function(t){return t.json()}).then(function(n){var o;!1!==n.succeed?n.dataItemServices&&n.dataItemServices.length>0?(n.dataItemServices.forEach(function(n){if("RESTDATA"===n.serviceType&&"PUBLISHED"===n.serviceStatus)o=n;else{if("RESTMAP"!==n.serviceType||"PUBLISHED"!==n.serviceStatus)return void r.getDatafromContent(t,e);o=n}}),o&&r.getDatafromRest(o.serviceType,o.address,e)):r.getDatafromContent(t,e):r._fireFailedEvent(n)}).catch(function(t){console.log(t),r._fireFailedEvent(t)})}},{key:"getDatafromContent",value:function(t,e){var r=this,n={result:{}},o=this;t+="/content.json?pageSize=9999999&currentPage=1",co.get(t,null,{withCredentials:this.datasets.withCredentials}).then(function(t){return t.json()}).then(function(t){if(!1!==t.succeed){if(t.type){if("JSON"===t.type||"GEOJSON"===t.type){if(t.content=JSON.parse(t.content.trim()),!t.content.features)return void console.log(QH.i18n("msg_jsonResolveFiled"));var i=r._formatGeoJSON(t.content);n.result.features={type:t.content.type,features:i}}else if("EXCEL"===t.type||"CSV"===t.type){var a=r._excelData2Feature(t.content);n.result.features={type:"FeatureCollection",features:a}}e(n,"content")}}else o._fireFailedEvent(t)},this).catch(function(t){console.log(t),o._fireFailedEvent(t)})}},{key:"getDatafromRest",value:function(t,e,r){var n=this,o=this.datasets.withCredentials;if("RESTDATA"===t){var i,a,s="".concat(e,"/data/datasources");co.get(s,null,{withCredentials:o}).then(function(t){return t.json()}).then(function(t){i=t.datasourceNames[0],s="".concat(e,"/data/datasources/").concat(i,"/datasets"),co.get(s,null,{withCredentials:o}).then(function(t){return t.json()}).then(function(t){return a=t.datasetNames[0],n.getDatafromRestData("".concat(e,"/data"),[i+":"+a],r),[i+":"+a]}).catch(function(t){n._fireFailedEvent(t)})}).catch(function(t){n._fireFailedEvent(t)})}else{var u,l,c,f="".concat(e,"/maps");co.get(f,null,{withCredentials:o}).then(function(t){return t.json()}).then(function(t){u=t[0].name,c=t[0].path,f=f="".concat(e,"/maps/").concat(u,"/layers"),co.get(f,null,{withCredentials:o}).then(function(t){return t.json()}).then(function(t){return l=t[0].subLayers.layers[0].caption,n.getDatafromRestMap(l,c,r),l}).catch(function(t){n._fireFailedEvent(t)})}).catch(function(t){n._fireFailedEvent(t)})}}},{key:"getDatafromRestData",value:function(t,e,r){var n=this;this.datasets.queryInfo.attributeFilter=this.datasets.queryInfo.attributeFilter||"SmID>0",this._getFeatureBySQL(t,e,this.datasets.queryInfo,function(t){r(t,"RESTDATA")},function(t){console.log(t),n._fireFailedEvent(t)})}},{key:"getDatafromRestMap",value:function(t,e,r){var n=this;this.datasets.queryInfo.attributeFilter=this.datasets.queryInfo.attributeFilter||"smid=1",this._queryFeatureBySQL(e,t,this.datasets.queryInfo,null,null,function(t){r(t,"RESTMAP")},function(t){console.log(t),n._fireFailedEvent(t)})}},{key:"_getFeatureBySQL",value:function(t,e,r,n,o){var i,a,s={name:e.join().replace(":","@")};Object.assign(s,r),i=new gs(s),a=new fb({queryParameter:i,datasetNames:e,fromIndex:0,toIndex:1e5,returnContent:!0}),new gb(t).processAsync(a,function(t){"processCompleted"===t.type?n&&n(t):o&&o(t)})}},{key:"_queryFeatureBySQL",value:function(t,e,r,n,o,i,a,u,l,c){var f,p,h={name:e};Object.assign(h,r),f=new gs(h),n&&(f.fields=n);var y={queryParams:[f]};c&&(y.queryOption=s.ATTRIBUTE),u&&(y.startRecord=u),l&&(y.expectCount=l),o&&(y.prjCoordSys={epsgCode:o}),p=new VP(y),this._queryBySQL(t,p,function(t){"processCompleted"===t.type?i(t):a(t)})}},{key:"_queryBySQL",value:function(t,e,r,n){new QP(t,{format:this._processFormat(n)}).processAsync(e,r)}},{key:"_processFormat",value:function(t){return t||o.GEOJSON}},{key:"_formatGeoJSON",value:function(t){var e=t.features;return e.forEach(function(t,e){t.properties.index=e}),e}},{key:"_excelData2Feature",value:function(t){for(var e=t.colTitles,r=-1,n=-1,o=0,i=e.length;o<i;o++)ZH.isXField(e[o])&&(r=o),ZH.isYField(e[o])&&(n=o);for(var a=[],s=0,u=t.rows.length;s<u;s++){var l=t.rows[s],c=Number(l[r]),f=Number(l[n]),p={};for(var h in t.colTitles){p[t.colTitles[h]]=t.rows[s][h]}p.index=s+"";var y={type:"Feature",geometry:{type:"Point",coordinates:[c,f]},properties:p};a.push(y)}return a}},{key:"_fireFailedEvent",value:function(t){var e=t?{error:t,message:QH.i18n("msg_getdatafailed")}:{message:QH.i18n("msg_getdatafailed")};this.events.triggerEvent("getdatafailed",e)}}])&&tq(t.prototype,e),r&&tq(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function nq(t){"@babel/helpers - typeof";return(nq="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function oq(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return iq(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return iq(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){s=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function iq(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function aq(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,sq(n.key),n)}}function sq(t){var e=function(t,e){if("object"!=nq(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=nq(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==nq(e)?e:e+""}var uq=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.datasets=e.datasets,this.xField=[],this.yField=[],this.grid={top:"50px",bottom:"50px",left:"50px",right:"60px"},this.chartType=e.type||"bar",this._initXYField(e.chartOptions),this.EVENT_TYPES=["getdatafailed"],this.events=new wr(this,null,this.EVENT_TYPES)},(e=[{key:"_initXYField",value:function(t){var e=this;t&&t.length>0&&t.forEach(function(t){t.xAxis&&e.xField.push({field:t.xAxis.field,name:t.xAxis.name}),t.yAxis&&e.yField.push({field:t.yAxis.field,name:t.yAxis.name})})}},{key:"getDatasetInfo",value:function(t){var e=this;this.createChart=t,this.datasets&&this._checkUrl(this.datasets.url)&&(this.chartModel=new rq(this.datasets),"iServer"===this.datasets.type?this.chartModel.getDatasetInfo(this._getDatasetInfoSuccess.bind(this)):"iPortal"===this.datasets.type&&this.chartModel.getDataInfoByIptl(this._getDataInfoSuccess.bind(this)),this.chartModel.events.on({getdatafailed:function(t){e.events.triggerEvent("getdatafailed",t)}}))}},{key:"_getDatasetInfoSuccess",value:function(t){var e=this.datasets.url,r=e.indexOf("rest");if(r>0){var n=e.indexOf("/",r+5),o=e.substring(r+5,n),i=e.substring(0,r+4)+"/data";if("maps"===o){var a=e.indexOf("/",n+1),s=e.substring(n+1,a);i=e.substring(0,r+4)+"/maps/"+s,t.result.dataUrl=i,this._getLayerFeatures(t)}else"data"===o&&(t.result.dataUrl=i,this._getDataFeatures(t))}}},{key:"_getDataInfoSuccess",value:function(t,e){"RESTMAP"===e?this._getChartDatasFromLayer(t):this._getChartDatas(t)}},{key:"_getDataFeatures",value:function(t){this.chartModel.getDataFeatures(t,this._getChartDatas.bind(this))}},{key:"_getLayerFeatures",value:function(t){this.chartModel.getLayerFeatures(t,this._getChartDatasFromLayer.bind(this))}},{key:"_getChartDatas",value:function(t){if(t){this.features=t.result.features;var e=this.features.features,r={};if(e.length){var n=e[0],o=[],i=[];for(var a in n.properties)o.push(a),i.push(this._getDataType(n.properties[a]));for(var s in r={features:e,fieldCaptions:o,fieldTypes:i,fieldValues:[]},i){var u=[];for(var l in e){var c=e[l],f=r.fieldCaptions[s],p=c.properties[f];u.push(p)}r.fieldValues.push(u)}this.createChart(r)}}}},{key:"_getChartDatasFromLayer",value:function(t){if(t.result.recordsets){var e=t.result.recordsets[0],r=e.features.features;this.features=e.features;var n={};if(r.length){for(var o in(n={features:e.features,fieldCaptions:e.fieldCaptions,fieldTypes:e.fieldTypes,fieldValues:[]}).fieldCaptions){var i=[];for(var a in r){var s=r[a],u=n.fieldCaptions[o],l=s.properties[u];i.push(l)}n.fieldValues.push(i)}this.createChart(n)}}}},{key:"_createChartOptions",value:function(t){return this.calculatedData=this._createChartDatas(t),this.updateChartOptions(this.chartType)}},{key:"changeType",value:function(t){if(t!==this.chartType)return this.chartType=t,this.updateChartOptions(this.chartType)}},{key:"updateData",value:function(t,e,r){this.updateChart=r,this.xField=[],this.yField=[],this._initXYField(e),t.type=t.type||"iServer",t.withCredentials=t.withCredentials||!1,this.datasets=t,this.getDatasetInfo(this._updateDataSuccess.bind(this))}},{key:"_updateDataSuccess",value:function(t){var e=this._createChartOptions(t);this.updateChart(e)}},{key:"updateChartOptions",value:function(t,e){if(this.calculatedData){var r=this.grid,n=this._createChartSeries(this.calculatedData,t),o=[];for(var i in this.calculatedData.XData)o.push({value:this.calculatedData.XData[i].fieldsData});var a={type:"category",name:this.xField[0].name||"X",data:o,nameTextStyle:{color:"#fff",fontSize:14},splitLine:{show:!1},axisLine:{lineStyle:{color:"#eee"}}},s={type:"value",name:this.yFieldName||"Y",data:{},nameTextStyle:{color:"#fff",fontSize:14},splitLine:{show:!1},axisLine:{lineStyle:{color:"#eee"}}},u={formatter:"{b0}: {c0}"},l="#404a59";return e&&(e.grid&&(r=e.grid),e.tooltip&&(u=e.tooltip),e.backgroundColor&&(l=e.backgroundColor)),{backgroundColor:l,grid:r,series:n,xAxis:a,yAxis:s,tooltip:u}}}},{key:"_createChartDatas",value:function(t){var e=0,r=[],n=t.fieldCaptions,o=this;n.forEach(function(t,r){o.xField[0]&&t===o.xField[0].field&&(e=r)}),this.yFieldName="",this.yField.forEach(function(t,e){0!==e&&(o.yFieldName=o.yFieldName+","),o.yFieldName=o.yFieldName+t.name,n.forEach(function(e,n){e===t.field&&r.push(n)})});var i=this._getAttrData(t,e),a=[];if(r.length>0)r.forEach(function(e){var r=[];for(var n in t.fieldValues[e])r.push({value:t.fieldValues[e][n]});a.push(r)});else{for(var s=[],u=[],l=i.length,c=0;c<l;c++){for(var f=!1,p=0,h=u.length;p<h;p++)if(i[c].fieldsData===u[p].fieldsData){s[p].value++,u[p].recordIndexs.push(c),f=!0;break}f||i[c].fieldsData&&(u.push({fieldsData:i[c].fieldsData,recordIndexs:[c]}),s.push({value:1}))}i=u,a=[s]}return{XData:i,YData:a}}},{key:"_getAttrData",value:function(t,e){0===e&&(this.xField=[{field:t.fieldCaptions[e],name:t.fieldCaptions[e]}]);for(var r=[],n=0,o=t.fieldValues[e].length;n<o;n++){var i=t.fieldValues[e][n];r.push({recordIndexs:n,fieldsData:i})}return r}},{key:"_createChartSeries",value:function(t,e){var r=[];return t.YData.forEach(function(t){var n,o=0,i=[],a=oq(t);try{for(a.s();!(n=a.n()).done;){o=n.value.value,i.push({value:o})}}catch(t){a.e(t)}finally{a.f()}var s={type:e,data:i,name:"y"};r.push(s)}),r}},{key:"_isDate",value:function(t){return/((^((1[8-9]\d{2})|([2-9]\d{3}))([-\/\._])(10|12|0?[13578])([-\/\._])(3[01]|[12][0-9]|0?[1-9])$)|(^((1[8-9]\d{2})|([2-9]\d{3}))([-\/\._])(11|0?[469])([-\/\._])(30|[12][0-9]|0?[1-9])$)|(^((1[8-9]\d{2})|([2-9]\d{3}))([-\/\._])(0?2)([-\/\._])(2[0-8]|1[0-9]|0?[1-9])$)|(^([2468][048]00)([-\/\._])(0?2)([-\/\._])(29)$)|(^([3579][26]00)([-\/\._])(0?2)([-\/\._])(29)$)|(^([1][89][0][48])([-\/\._])(0?2)([-\/\._])(29)$)|(^([2-9][0-9][0][48])([-\/\._])(0?2)([-\/\._])(29)$)|(^([1][89][2468][048])([-\/\._])(0?2)([-\/\._])(29)$)|(^([2-9][0-9][2468][048])([-\/\._])(0?2)([-\/\._])(29)$)|(^([1][89][13579][26])([-\/\._])(0?2)([-\/\._])(29)$)|(^([2-9][0-9][13579][26])([-\/\._])(0?2)([-\/\._])(29)$))/gi.test(t)}},{key:"_isNumber",value:function(t){var e=Number(t);return 0===e||!isNaN(e)}},{key:"_getDataType",value:function(t){if(null!==t&&void 0!==t&&""!==t){if(this._isDate(t))return"DATE";if(this._isNumber(t))return"NUMBER"}return"STRING"}},{key:"_checkUrl",value:function(t){return!(""===t||!this._isMatchUrl(t))&&(!/^http[s]?:\/\/localhost/.test(t)&&!/^http[s]?:\/\/127.0.0.1/.test(t))}},{key:"_isMatchUrl",value:function(t){return new RegExp("(https?|http|file|ftp)://[-A-Za-z0-9+&@#/%?=~_|!:,.;]+[-A-Za-z0-9+&@#/%=~_|]").test(t)}},{key:"getStyle",value:function(){return{grid:this.grid,tooltip:this.tooltip,backgroundColor:this.backgroundColor}}},{key:"getFeatures",value:function(){return this.features}},{key:"setStyle",value:function(t){return this.updateChartOptions(this.chartType,t)}}])&&aq(t.prototype,e),r&&aq(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function lq(t){"@babel/helpers - typeof";return(lq="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function cq(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,fq(n.key),n)}}function fq(t){var e=function(t,e){if("object"!=lq(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=lq(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==lq(e)?e:e+""}var pq=function(){return t=function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.domID=e,this.chartType=r.type||"bar",r.datasets.type=r.datasets.type||"iServer",r.datasets.withCredentials=r.datasets.withCredentials||!1,this.viewModel=new uq(r),this._fillDataToView()},(e=[{key:"onAdd",value:function(t){this.addChart=t}},{key:"_fillDataToView",value:function(){var t=new KH;this.viewModel.getDatasetInfo(this._createChart.bind(this)),this.viewModel.events.on({getdatafailed:function(e){t.showView(e.message)}})}},{key:"getStyle",value:function(){return this.viewModel.getStyle()}},{key:"getFeatures",value:function(){return this.viewModel.getFeatures()}},{key:"setStyle",value:function(t){var e=this.viewModel.setStyle(t);this._updateChart(e)}},{key:"changeType",value:function(t){if(this.chartType!==t){this.chartType=t;var e=this.viewModel.changeType(t);this._updateChart(e)}}},{key:"updateData",value:function(t,e){var r=this;this.viewModel.updateData(t,e,function(t){r._updateChart(t),r.addChart&&r.addChart()})}},{key:"_createChart",value:function(t){this.echart=YH.init(document.getElementById(this.domID),null,{renderer:"canvas"});var e=this.viewModel._createChartOptions(t);this.echart.setOption(e),this.addChart&&this.addChart()}},{key:"_updateChart",value:function(t){this.echart&&(this.echart.clear(),this.echart.setOption(t))}}])&&cq(t.prototype,e),r&&cq(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function hq(t){"@babel/helpers - typeof";return(hq="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function yq(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,dq(n.key),n)}}function dq(t){var e=function(t,e){if("object"!=hq(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=hq(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==hq(e)?e:e+""}var vq=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},this.id=e.id?e.id:null,this.rootContainer=null},(e=[{key:"getElement",value:function(){return this.id&&(this.rootContainer.id=this.id),this.rootContainer}},{key:"_initView",value:function(){}},{key:"showView",value:function(){this.rootContainer.hidden=!1}},{key:"closeView",value:function(){this.rootContainer.hidden=!0}}])&&yq(t.prototype,e),r&&yq(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function mq(t){"@babel/helpers - typeof";return(mq="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function bq(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,gq(n.key),n)}}function gq(t){var e=function(t,e){if("object"!=mq(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=mq(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==mq(e)?e:e+""}function Sq(t,e,r){return e=wq(e),function(t,e){if(e&&("object"===mq(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],wq(t).constructor):e.apply(t,r))}function wq(t){return(wq=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _q(t,e){return(_q=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Oq=function(t){function e(t){var r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r=Sq(this,e,[t]);var n=t.title?t.title:"";return r._initView(n),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_q(t,e)}(e,vq),r=e,(n=[{key:"_initView",value:function(t){var e=document.createElement("div");e.setAttribute("class","component-container");var r=document.createElement("div");r.setAttribute("class","component-title");var n=document.createElement("div");n.innerHTML=t,r.appendChild(n),e.appendChild(r);var o=document.createElement("div");return o.setAttribute("class","component-content"),e.appendChild(o),this.content=o,this.rootContainer=e,e}},{key:"getContentElement",value:function(){return this.content}},{key:"appendContent",value:function(t){this.content.appendChild(t)}}])&&bq(r.prototype,n),o&&bq(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function Eq(t){"@babel/helpers - typeof";return(Eq="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Pq(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,xq(n.key),n)}}function xq(t){var e=function(t,e){if("object"!=Eq(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Eq(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Eq(e)?e:e+""}function Tq(t,e,r){return e=Cq(e),function(t,e){if(e&&("object"===Eq(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Cq(t).constructor):e.apply(t,r))}function Cq(t){return(Cq=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function kq(t,e){return(kq=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Aq=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=Tq(this,e,[t]))._initView(t),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&kq(t,e)}(e,vq),r=e,(n=[{key:"_initView",value:function(t){var e=this._createElement("div","component-selecttool");t.labelName&&(this._createElement("label","component-selecttool__lable--describe",e).innerHTML=t.labelName);var r=this._createElement("div","component-selecttool--chart",e);r.setAttribute("tabindex","1");var n=this._createElement("div","component-selecttool__name",r);n.title=t.optionsArr[0],n.innerHTML=t.optionsArr[0];var o=this._createElement("div","component-selecttool__trianglebtn--chart",r),i=this._createElement("div","component-triangle-down-img",o),a=this._createElement("div","component-selecttool__content",r),s=this._createElement("div","component-selecttool__content--chart",a),u=this._createElement("div","component-selecttool__scrollarea__content",s);u.setAttribute("tabindex","1"),this.createOptions(u,t.optionsArr),this.optionClickEvent(u,n,t.optionsClickCb),this._selectClickEvent(r,a,i),this.rootContainer=e}},{key:"createOptions",value:function(t,e){for(var r in e){var n=this._createElement("div","component-selecttool__option",t);n.title=e[r],n.innerHTML=e[r]}}},{key:"_selectClickEvent",value:function(t,e,r){t.onclick=function(t){"block"===e.style.display?(e.style.display="none",r.className="component-triangle-down-img"):(e.style.display="block",r.className="triangle-up-img"),t.preventDefault(),t.stopPropagation()},t.onmousedown=function(t){t.target!==this&&(this.focus(),t.preventDefault(),t.stopPropagation())},t.onblur=function(){e.style.display="none",r.className="component-triangle-down-img"}}},{key:"_createElement",value:function(t,e,r){var n=document.createElement(t||"div");return e&&(n.className=e),r&&r.appendChild(n),n}},{key:"optionClickEvent",value:function(t,e,r){for(var n=function(){var n=t.children[o];n.onclick=function(){e.innerHTML=n.innerHTML,e.title=n.title,n.getAttribute("data-value")&&e.setAttribute("data-value",n.getAttribute("data-value")),r&&r(n)}},o=0;o<t.children.length;o++)n()}}])&&Pq(r.prototype,n),o&&Pq(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function jq(t){"@babel/helpers - typeof";return(jq="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Nq(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Iq(n.key),n)}}function Iq(t){var e=function(t,e){if("object"!=jq(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=jq(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==jq(e)?e:e+""}function Mq(t,e,r){return e=Rq(e),function(t,e){if(e&&("object"===jq(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Rq(t).constructor):e.apply(t,r))}function Rq(t){return(Rq=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Lq(t,e){return(Lq=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Dq=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=Mq(this,e,[t]))._initView(t),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Lq(t,e)}(e,vq),r=e,(n=[{key:"_initView",value:function(t){var e=document.createElement("div");e.className="component-dropdownbox--container";var r=document.createElement("div");r.setAttribute("tabindex","1"),r.className="component-dropdownbox",e.appendChild(r);var n=document.createElement("div");r.appendChild(n),this._createDropDownOption(t[0],n);var o=document.createElement("div");o.className="component-dropdownbox__triangle-btn",r.appendChild(o);var i=document.createElement("div");i.className="component-triangle-down-img",o.appendChild(i);var a={parentEle:r,dropDownContent:["component-dropdownbox__content component-dropdownbox__content--chart","dropDownContent"],scrollareaContent:"component-selecttool__scrollarea__content",optionsArr:t,triangleBtn:i,dropDownTopContainer:n};this._createDropDownBox(a),this.rootContainer=e}},{key:"_createDropDownBox",value:function(t){var e=t.parentEle,r=t.dropDownTopContainer,n=document.createElement("div");n.className=t.dropDownContent[0],e.appendChild(n);var o=document.createElement("div");o.className=t.scrollareaContent,n.appendChild(o);for(var i=t.optionsArr,a=0;a<i.length;a++)this._createDropDownOption(i[a],o);var s=t.triangleBtn;this._dropDownClickEvent(e,n,s),this._eleOnblur(e,n,s);for(var u=o.children,l=function(t){u[t].onclick=function(){r.innerHTML=u[t].outerHTML}},c=0;c<u.length;c++)l(c)}},{key:"_createDropDownOption",value:function(t,e){var r=document.createElement("div");r.className="component-dropdownbox__item";var n=t;n.dataValue&&r.setAttribute("data-value",n.dataValue),e.appendChild(r);var o=document.createElement("div");o.className="component-dropdownbox__item__img",r.appendChild(o);var i=document.createElement("div");n.icon.className&&(i.className=n.icon.className),n.icon.background&&(i.style.background=n.icon.background),o.appendChild(i);var a=document.createElement("div");a.className="component-dropdownbox__item__title",a.title=n.title,a.innerHTML=n.title,r.appendChild(a);var s=document.createElement("div");s.className="component-dropdownbox__item__remark",s.title=n.remark,s.innerHTML=n.remark,r.appendChild(s)}},{key:"_dropDownClickEvent",value:function(t,e,r){t.onclick=function(t){"block"===e.style.display?(e.style.display="none",r.className="component-triangle-down-img"):(e.style.display="block",r.className="triangle-up-img"),t.preventDefault(),t.stopPropagation()},t.onmousedown=function(t){t.target!==this&&(this.focus(),t.preventDefault(),t.stopPropagation())}}},{key:"_eleOnblur",value:function(t,e,r){t.onblur=function(){e.style.display="none",r.className="component-triangle-down-img"}}},{key:"_createElement",value:function(t,e,r){var n=document.createElement(t||"div");return e&&(n.className=e),r&&r.appendChild(n),n}}])&&Nq(r.prototype,n),o&&Nq(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function Bq(t){"@babel/helpers - typeof";return(Bq="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Fq(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Uq(n.key),n)}}function Uq(t){var e=function(t,e){if("object"!=Bq(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Bq(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Bq(e)?e:e+""}function Gq(t,e,r){return e=Vq(e),function(t,e){if(e&&("object"===Bq(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Vq(t).constructor):e.apply(t,r))}function Vq(t){return(Vq=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function zq(t,e){return(zq=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Hq=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r=Gq(this,e,[t=t||{}]),t.title=t.title?t.title:"",r._initView(t.title),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&zq(t,e)}(e,vq),r=e,(n=[{key:"_initView",value:function(t){var e=document.createElement("div");e.setAttribute("class","component-popcontainer");var r=document.createElement("div");r.setAttribute("class","component-popcontainer__header");var n=document.createElement("label");n.setAttribute("class","component-popcontainer__header__title"),n.innerHTML=t,r.appendChild(n);var o=document.createElement("span");o.setAttribute("class","supermapol-icons-clear component-popcontainer__header__close"),o.onclick=this.closeView.bind(this),e.appendChild(o),e.appendChild(r);var i=document.createElement("div");i.setAttribute("class","component-popcontainer__content"),this.content=i,e.appendChild(i),this.rootContainer=e}},{key:"appendContent",value:function(t){this.content.appendChild(t)}}])&&Fq(r.prototype,n),o&&Fq(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function qq(t){"@babel/helpers - typeof";return(qq="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Jq(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Wq(n.key),n)}}function Wq(t){var e=function(t,e){if("object"!=qq(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=qq(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==qq(e)?e:e+""}function Kq(t,e,r){return e=Yq(e),function(t,e){if(e&&("object"===qq(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Yq(t).constructor):e.apply(t,r))}function Yq(t){return(Yq=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Qq(t,e){return(Qq=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Xq=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t.title=t.title?t.title:"属性",(r=Kq(this,e,[t])).rootContainer.firstChild.hidden=!0,t.attributes=t.attributes?t.attributes:[],r._createAttributesTable(t.attributes),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Qq(t,e)}(e,Hq),r=e,(n=[{key:"_createAttributesTable",value:function(t){var e=document.createElement("table");e.setAttribute("class","component-popcontainer__content__table");var r=document.createElement("tbody"),n=!0;for(var o in t){var i=document.createElement("tr");n&&i.setAttribute("class","component-popcontainer__content__td--color");var a=document.createElement("td"),s=document.createElement("Span");s.innerHTML=o,a.appendChild(s);var u=document.createElement("td");u.innerHTML=t[o],i.appendChild(a),i.appendChild(u),r.appendChild(i),n=!n}e.appendChild(r),this.appendContent(e)}}])&&Jq(r.prototype,n),o&&Jq(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function Zq(t){"@babel/helpers - typeof";return(Zq="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function $q(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,tJ(n.key),n)}}function tJ(t){var e=function(t,e){if("object"!=Zq(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Zq(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Zq(e)?e:e+""}function eJ(t,e,r){return e=rJ(e),function(t,e){if(e&&("object"===Zq(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],rJ(t).constructor):e.apply(t,r))}function rJ(t){return(rJ=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function nJ(t,e){return(nJ=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var oJ=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=eJ(this,e,[t]))._initView(),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&nJ(t,e)}(e,vq),r=e,(n=[{key:"_initView",value:function(){var t=document.createElement("div");t.setAttribute("class","component-tabpage");var e=document.createElement("ul");this.header=e;var r=document.createElement("div");r.setAttribute("class","component-tabpage__content"),this.content=r,t.appendChild(e),t.appendChild(r),this.rootContainer=t}},{key:"setTabs",value:function(t){this.removeAllTabs(),this.appendTabs(t)}},{key:"appendTabs",value:function(t){for(var e=0;e<t.length;e++){var r=document.createElement("span");r.index=e,r.appendChild(document.createTextNode(t[e].title)),r.onclick=this._changeTabsPage.bind(this);var n=t[e].content;n.index=e,n.hidden=!0,this.header.appendChild(r),this.content.appendChild(n)}this.header.firstChild.setAttribute("class","on"),this.content.firstChild.hidden=!1}},{key:"removeTab",value:function(t){this.header.removeChild(this.header.children[t]),this.content.removeChild(this.content.children[t])}},{key:"removeAllTabs",value:function(){for(var t=this.header.children.length;t>0;t--)this.header.removeChild(this.header.children[t]),this.content.removeChild(this.content.children[t])}},{key:"_changeTabsPage",value:function(t){for(var e=t.target.index,r=0;r<this.header.children.length;r++)this.header.children[r].setAttribute("class",""),this.content.children[r].hidden=!0,r===e&&(this.header.children[r].setAttribute("class","on"),this.content.children[r].hidden=!1)}}])&&$q(r.prototype,n),o&&$q(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function iJ(t){"@babel/helpers - typeof";return(iJ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function aJ(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,sJ(n.key),n)}}function sJ(t){var e=function(t,e){if("object"!=iJ(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=iJ(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==iJ(e)?e:e+""}function uJ(t,e,r){return e=lJ(e),function(t,e){if(e&&("object"===iJ(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],lJ(t).constructor):e.apply(t,r))}function lJ(t){return(lJ=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function cJ(t,e){return(cJ=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var fJ=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=uJ(this,e,[t])).rootContainer.classList.add("component-citytabpage--noneBoxShadow"),r.config=t.config,Tt.isArray(r.config)?(r.header.hidden=!0,r._createCityItem("城市",r.config),r.content.style.border="none"):(r._createTabs(),r.header.onclick=function(t){for(var e=0;e<r.header.children.length;e++)r.header.children[e].setAttribute("class","");t.target.setAttribute("class","on"),r._createCityContent(t.target.innerHTML)}),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&cJ(t,e)}(e,oJ),r=e,(n=[{key:"_createTabs",value:function(){if(Tt.isArray(this.config))for(var t=0;t<this.config.length;t++){var e="";for(var r in this.config[t])e+=r;var n=document.createElement("li");n.innerHTML=e,this.header.appendChild(n)}else for(var o in this.config){var i=document.createElement("li");i.innerHTML=o,this.header.appendChild(i)}this.header.firstChild.setAttribute("class","on"),this._createCityContent(this.header.firstChild.innerHTML)}},{key:"_createCityContent",value:function(t){for(var e=this.content.children.length;e>0;e--)this.content.removeChild(this.content.children[e-1]);var r=this.config[t];for(var n in r)this._createCityItem(n,r[n])}},{key:"_createCityItem",value:function(t,e){var r=document.createElement("div"),n=document.createElement("div");n.setAttribute("class","component-citytabpag__py-key"),n.innerHTML=t,r.appendChild(n);var o=document.createElement("div");o.setAttribute("class","component-citytabpag__content");for(var i=0;i<e.length;i++){var a=document.createElement("span");a.innerHTML=e[i],o.appendChild(a)}"HOT"===t&&(o.style.width="428px"),r.appendChild(o),this.content.appendChild(r)}}])&&aJ(r.prototype,n),o&&aJ(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function pJ(t){"@babel/helpers - typeof";return(pJ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function hJ(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,yJ(n.key),n)}}function yJ(t){var e=function(t,e){if("object"!=pJ(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=pJ(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==pJ(e)?e:e+""}function dJ(t,e,r){return e=vJ(e),function(t,e){if(e&&("object"===pJ(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],vJ(t).constructor):e.apply(t,r))}function vJ(t){return(vJ=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function mJ(t,e){return(mJ=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var bJ=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=dJ(this,e,[t])).navTabsTitle=null,r.navTabsContent=null,t.tabs=t.tabs?t.tabs:[],r._initView(t.tabs),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&mJ(t,e)}(e,vq),r=e,(n=[{key:"_initView",value:function(t){var e=document.createElement("div");e.setAttribute("class","component-navtabspage");var r=document.createElement("span");r.setAttribute("class","supermapol-icons-close"),r.onclick=this.closeView.bind(this),e.appendChild(r);var n=document.createElement("div");this.navTabsTitle=n,n.setAttribute("class","component-navtabspage__title"),e.appendChild(n);var o=document.createElement("div");this.navTabsContent=o,o.setAttribute("class","component-navtabspage__content"),e.appendChild(o),t.length>0&&this.appendTabs(t),this.rootContainer=e}},{key:"setTabs",value:function(t){this.removeAllTabs(),this.appendTabs(t)}},{key:"appendTabs",value:function(t){for(var e=0;e<t.length;e++){var r=document.createElement("span");r.index=e,r.appendChild(document.createTextNode(t[e].title)),r.onclick=this._changeTabsPage.bind(this);var n=t[e].content;n.index=e,n.hidden=!0,this.navTabsTitle.appendChild(r),this.navTabsContent.appendChild(n)}this.navTabsTitle.firstChild.setAttribute("class","component-navtabspage__tabs--select"),this.navTabsContent.firstChild.hidden=!1}},{key:"removeTab",value:function(t){this.navTabsTitle.removeChild(this.navTabsTitle.children[t]),this.navTabsContent.removeChild(this.navTabsContent.children[t])}},{key:"removeAllTabs",value:function(){for(var t=this.navTabsTitle.children.length;t>0;t--)this.navTabsTitle.removeChild(this.navTabsTitle.children[t]),this.navTabsContent.removeChild(this.navTabsContent.children[t])}},{key:"_changeTabsPage",value:function(t){for(var e=t.target.index,r=0;r<this.navTabsTitle.children.length;r++)this.navTabsTitle.children[r].setAttribute("class",""),this.navTabsContent.children[r].hidden=!0,r===e&&(this.navTabsTitle.children[r].setAttribute("class","component-navtabspage__tabs--select"),this.navTabsContent.children[r].hidden=!1)}}])&&hJ(r.prototype,n),o&&hJ(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function gJ(t){"@babel/helpers - typeof";return(gJ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function SJ(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,wJ(n.key),n)}}function wJ(t){var e=function(t,e){if("object"!=gJ(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=gJ(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==gJ(e)?e:e+""}function _J(t,e,r){return e=OJ(e),function(t,e){if(e&&("object"===gJ(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],OJ(t).constructor):e.apply(t,r))}function OJ(t){return(OJ=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function EJ(t,e){return(EJ=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var PJ=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=_J(this,e,[t=t||{}])).currentPage=0,r.pageNumberLis=[],r.currentPageNumberLis=[],r.linkageEvent=null,t.contents=t.contents?t.contents:null,t.pageCounts=t.pageCounts?t.pageCounts:0,r._initView(t.contents,t.pageCounts),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&EJ(t,e)}(e,vq),r=e,(n=[{key:"setLinkageEvent",value:function(t){this.linkageEvent=t}},{key:"_initView",value:function(t,e){var r=document.createElement("div");r.setAttribute("class","component-pagination");var n=document.createElement("div");n.setAttribute("class","component-pagination__content"),r.appendChild(n),this.content=n;var o=document.createElement("ul");o.setAttribute("class","component-pagination__link"),o.onclick=this._changePageEvent.bind(this),r.appendChild(o),this._createLink(o),this.link=o,t&&this.setContent(t),0!==e&&this.setPageLink(e),this.rootContainer=r}},{key:"setContent",value:function(t){this.clearContent(),this.appendContent(t)}},{key:"appendContent",value:function(t){this.content.appendChild(t)}},{key:"clearContent",value:function(){for(var t=this.content.children.length-1;t>=0;t--)this.content.removeChild(this.content.children[t])}},{key:"setPageLink",value:function(t){this.pageNumberLis=[],this.currentPageNumberLis=[],this.clearPageLink(),this._createPageLi(t),this._appendPageLink()}},{key:"_createPageLi",value:function(t){for(var e=0;e<t;e++){var r=document.createElement("li");r.innerHTML=e+1,this.pageNumberLis.push(r)}if(this.pageNumberLis[0].setAttribute("class","active"),this.currentPage=1,t<5)this.currentPageNumberLis=this.pageNumberLis;else for(var n=0;n<5;n++)this.currentPageNumberLis.push(this.pageNumberLis[n])}},{key:"_appendPageLink",value:function(){for(var t=0;t<this.currentPageNumberLis.length;t++)this.link.insertBefore(this.currentPageNumberLis[t],this.link.childNodes[this.link.children.length-2]);for(var e=0;e<this.currentPageNumberLis.length;e++)this.currentPageNumberLis[e].setAttribute("class",""),Number(this.currentPageNumberLis[e].innerHTML)===this.currentPage&&this.currentPageNumberLis[e].setAttribute("class","active");this._changeDisableState(),this.linkageEvent&&this.linkageEvent(this.currentPage)}},{key:"clearPageLink",value:function(){for(var t=this.link.children.length-3;t>1;t--)this.link.removeChild(this.link.children[t])}},{key:"_createLink",value:function(t){for(var e=0;e<4;e++){var r=document.createElement("li");r.setAttribute("class","disable");var n=document.createElement("span");r.appendChild(n),0===e?(n.id="first",n.setAttribute("class","supermapol-icons-first")):1===e?(n.id="prev",n.setAttribute("class","supermapol-icons-prev")):2===e?(n.id="next",n.setAttribute("class","supermapol-icons-next")):3===e&&(n.id="last",n.setAttribute("class","supermapol-icons-last")),t.appendChild(r)}}},{key:"_changePageEvent",value:function(t){var e=t.target;if("disable"!==e.parentElement.classList[0]){var r;if(e.id)r=e.id;else{if(!Number(e.innerHTML))return;r=Number(e.innerHTML)}this._prePageNum(r),this.clearPageLink(),this._appendPageLink()}}},{key:"_changeDisableState",value:function(){this.link.children[0].setAttribute("class",""),this.link.children[1].setAttribute("class",""),this.link.children[this.link.children.length-1].setAttribute("class",""),this.link.children[this.link.children.length-2].setAttribute("class",""),1===this.currentPage&&(this.link.children[0].setAttribute("class","disable"),this.link.children[1].setAttribute("class","disable")),this.currentPage===this.pageNumberLis.length&&(this.link.children[this.link.children.length-1].setAttribute("class","disable"),this.link.children[this.link.children.length-2].setAttribute("class","disable"))}},{key:"_prePageNum",value:function(t){var e=[];if(this.currentPage="first"===t?1:"last"===t?this.pageNumberLis.length:"prev"===t?this.currentPage-1:"next"===t?this.currentPage+1:t,this.pageNumberLis.length<=5)for(var r=0;r<this.pageNumberLis.length;r++)e.push(this.pageNumberLis[r]);else if(this.currentPage<=3)for(var n=0;n<5;n++)e.push(this.pageNumberLis[n]);else if(this.currentPage>=this.pageNumberLis.length-3)for(var o=this.pageNumberLis.length-5;o<this.pageNumberLis.length;o++)e.push(this.pageNumberLis[o]);else for(var i=this.currentPage-3;i<=this.currentPage+1;i++)e.push(this.pageNumberLis[i]);e.length>0&&(this.currentPageNumberLis=e)}}])&&SJ(r.prototype,n),o&&SJ(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}(),xJ=function(t){return/^.*\.(?:xls|xlsx)$/i.test(t)?FH.EXCEL:/^.*\.(?:csv)$/i.test(t)?FH.CSV:/^.*\.(?:geojson|json)$/i.test(t)?FH.GEOJSON:null},TJ=r(44),CJ=r.n(TJ);function kJ(t){"@babel/helpers - typeof";return(kJ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function AJ(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function jJ(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?AJ(Object(r),!0).forEach(function(e){NJ(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):AJ(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function NJ(t,e,r){var n;return(e="symbol"==kJ(n=function(t,e){if("object"!=kJ(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=kJ(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"))?n:n+"")in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function IJ(t){return function(t){if(Array.isArray(t))return MJ(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return MJ(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return MJ(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function MJ(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function RJ(t,e){var r=(e=e||{}).styles&&e.styles.style,n=e.captionFields&&e.captionFields.captionField,o=e.showRelationTypes,i={nodes:[],edges:[]};return t.forEach(function(t){var e=t.path;if(e){var a,s,u=function(t,e,r,n){var o={nodes:[],edges:[]};return t.forEach(function(t){if(DJ(t)){var i=FJ(t,e,n);o.edges.push(i)}else{var a=BJ(t,e,r);o.nodes.push(a)}}),o}(e,r,n,o),l=u.nodes,c=u.edges;(a=i.nodes).push.apply(a,IJ(l)),(s=i.edges).push.apply(s,IJ(c))}else if(DJ(t)){var f=FJ(t,r,o);i.edges.push(f)}else{var p=BJ(t,r,n);i.nodes.push(p)}}),{nodes:LJ(i.nodes),edges:LJ(i.edges,"edgeId")}}function LJ(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"id";return CJ()(t,e)}function DJ(t){return t.hasOwnProperty("start")&&t.hasOwnProperty("end")}function BJ(t,e,r){var n=t.id,o=t.properties,i=t.lables,a=e?function(t,e){if(!e)return{};for(var r=t.id,n=t.labels,o=e.filter(function(t){return"entity"===t.type}),i=0;i<o.length;i++){var a=o[i],s=a.color,u=a.textColor,l=a.font,c=a.size,f=a.entityTypes,p=a.entityIds,h=JSON.parse(p||"[]"),y=JSON.parse(f||"[]");if(h.includes(r)||y.includes(n[0]))return jJ(jJ({fillColor:s,fontSize:l.fontSize,fill:u,size:c},GJ(l.fontName)),UJ(l.fontStyle))}return{}}(t,e):{},s=function(t,e){var r=t.id,n=t.labels,o=t.properties;if(e)for(var i=e instanceof Array?e:[e],a=0;a<i.length;a++){var s=i[a],u=s.name,l=s.entityTypes,c=s.entityIds,f=JSON.parse(c||"[]"),p=JSON.parse(l||"[]"),h=n&&n.join("&");if(f.includes(r)||p.includes(h))return o[u]}return o[o._labelfieldname]}(t,r),u=a.fillColor||"",l={id:n+"",label:void 0===s?"":s+"",properties:o,lables:i};return a.size&&(l.size=a.size,delete a.size),a.fillColor&&(l.style={fill:u,stroke:u},delete a.fillColor),0!==Object.keys(a).length&&(l.labelCfg={style:a}),l}function FJ(t,e,r){var n=t.start,o=t.end,i=t.id,a=t.type,s=t.properties,u=e?function(t,e){if(!e)return{};for(var r=t.id,n=t.type,o=e.filter(function(t){return"relationShip"===t.type}),i=0;i<o.length;i++){var a=o[i],s=a.color,u=a.width,l=a.textColor,c=a.font,f=a.relationTypes,p=a.relationIds,h=JSON.parse(p||"[]"),y=JSON.parse(f||"[]");if(h.includes(r)||y.includes(n))return jJ(jJ({stroke:s,lineWidth:1.4*Number(u),fontSize:c.fontSize,fill:l},GJ(c.fontName)),UJ(c.fontStyle))}return{}}(t,e):{},l={source:n+"",target:o+"",edgeId:i+"",label:a,style:{},labelCfg:{},properties:s};return!1===r&&delete l.label,u.stroke&&(l.style.stroke=u.stroke,l.style.endArrow={path:"M 0,0 L 4,2 L 4,-2 Z",fill:u.stroke},delete u.stroke),u.lineWidth&&(l.style.lineWidth=u.lineWidth,delete u.lineWidth),l.labelCfg={style:u},l}function UJ(t){return 1===t||"bold"===t?{fontWeight:"bold"}:2===t||"italic"===t?{fontStyle:"italic"}:"bolditalic"===t?{fontWeight:"bold",fontStyle:"italic"}:{}}function GJ(t){if(!t)return{};var e=t.split(".");return jJ({fontFamily:e[0]},UJ(e[1]))}var VJ=function(){try{return G6}catch(t){return{}}}(),zJ=r.n(VJ),HJ=r(3448),qJ=r.n(HJ);function JJ(t){"@babel/helpers - typeof";return(JJ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function WJ(t){return function(t){if(Array.isArray(t))return KJ(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return KJ(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return KJ(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function KJ(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function YJ(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function QJ(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?YJ(Object(r),!0).forEach(function(e){XJ(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):YJ(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function XJ(t,e,r){return(e=$J(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ZJ(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,$J(n.key),n)}}function $J(t){var e=function(t,e){if("object"!=JJ(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=JJ(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==JJ(e)?e:e+""}var tW=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.config=null,this.graph=null,this.data=null,this.collpasedData={},this.importG6(),this.hoverColor="#b4d6ff",this.CLASS_NAME="SuperMap.G6Render"},(e=[{key:"importG6",value:function(){zJ()||console.log("please import g6, eg：https://gw.alipayobjects.com/os/lib/antv/g6/4.3.2/dist/g6.min.js")}},{key:"initGraph",value:function(t){var e=new(zJ().Graph)(t);return this.graph=e,t&&!1===t.highlightNode||this.highlightNode(e),t&&!1===t.highlightEdge||this.highlightEdge(e),!1===t.dragCanvas&&!1===t.dragNode||this.stopDefaultEventPropagation(),e}},{key:"_getDefaultEdgeHighlightStyle",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.hoverColor;return{stroke:t,shadowColor:t,shadowBlur:5,endArrow:{path:"M 0,0 L 4,2 L 4,-2 Z",fill:t}}}},{key:"_getDefaultNodeHighlightStyle",value:function(){return{lineWidth:3,stroke:arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.hoverColor}}},{key:"_getContextMenu",value:function(){var t=this;return new(zJ().Menu)({shouldBegin:function(t){return!!(t.target&&t.target.isCanvas&&t.target.isCanvas())||!!t.item},getContent:function(e){var r=e.item;if(!(e.target&&e.target.isCanvas&&e.target.isCanvas())&&r){var n=r.getType(),o=r.getModel();return n&&o&&"node"===n?t.isCollpased(o.id)?"<ul>\n              <li id='expand'>展开</li>\n            </ul>":"<ul>\n              <li id='collapse'>折叠</li>\n            </ul>":void 0}},handleMenuClick:function(e,r){switch(e.id.split("-")[0]){case"hide":t.hideItem(r);break;case"expand":t.expandNode(r);break;case"collapse":t.collapseNode(r);break;case"show":t.showItem(r)}},offsetX:26,offsetY:0,itemTypes:["node","edge","canvas"]})}},{key:"_getGraphConfig",value:function(t){var e=this,r={speed:120,maxIteration:83,tick:function(){e.refreshPositions()}},n={type:"fruchterman",gravity:5},o={},i={type:"line",style:{endArrow:{path:"M 0,0 L 4,2 L 4,-2 Z",fill:"#e0e0e0"},lineWidth:.5},labelCfg:{autoRotate:!0,style:{fontSize:4,fill:"#333"}}},a={default:["drag-canvas","zoom-canvas","drag-node"]},s=this._getContextMenu(),u=[new(zJ().ToolBar),s];if(!t)return this._setToolBarStyle(),function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"knowledgeGraph",s=document.querySelector("#".concat(t));return{container:t,width:s.scrollWidth,height:s.scrollHeight,plugins:u,modes:a,layout:QJ(QJ({},n),r),defaultNode:o,defaultEdge:i,nodeStateStyles:{hover:e._getDefaultNodeHighlightStyle(),actived:e._getDefaultNodeHighlightStyle()},edgeStateStyles:{hover:e._getDefaultEdgeHighlightStyle(),actived:e._getDefaultEdgeHighlightStyle()}}}();t.container=t.container||"knowledgeGraph";var l="string"==typeof t.container?document.querySelector("#".concat(t.container)):t.container;t.width=t.width||l.scrollWidth,t.height=t.height||l.scrollHeight,t.layout=QJ(QJ(QJ({},n),t.layout||{}),!1!==t.animate?r:{}),t.defaultNode=QJ(QJ({},o),t.defaultNode||{}),t.defaultEdge=QJ(QJ({},i),t.defaultEdge||{}),t.modes={default:[]},!1!==t.dragCanvas&&t.modes.default.push("drag-canvas"),!1!==t.zoomCanvas&&t.modes.default.push("zoom-canvas"),!1!==t.dragNode&&t.modes.default.push("drag-node");var c=QJ(QJ({},this._getDefaultNodeHighlightStyle()),t.nodeHighlightStyle||{}),f=QJ(QJ({},this._getDefaultEdgeHighlightStyle()),t.edgeHighlightStyle||{});return t.nodeStateStyles={hover:c,actived:c},t.edgeStateStyles={hover:f,actived:f},!1!==t.showToolBar&&(t.plugins=[new(zJ().ToolBar)],this._setToolBarStyle()),!1!==t.showContextMenu&&(t.plugins=[].concat(WJ(t.plugins||[]),[s]),this._setToolBarStyle()),t}},{key:"changeSize",value:function(t,e){return this.graph.changeSize(t,e)}},{key:"autoResize",value:function(){var t=this,e=this.getContainer();window.addEventListener("resize",function(){var r=e.scrollWidth,n=e.scrollHeight;t.graph.changeSize(r,n),t.graph.refresh()})}},{key:"zoom",value:function(t,e,r,n){this.graph.zoom(t,e,r,n)}},{key:"zoomTo",value:function(t,e,r,n){this.graph.zoomTo(t,e,r,n)}},{key:"fitView",value:function(t,e,r,n){this.graph.fitView(t,e,r,n)}},{key:"fitCenter",value:function(t,e){this.graph.fitCenter(t,e)}},{key:"getGraphCenterPoint",value:function(){return this.graph.getGraphCenterPoint()}},{key:"getViewPortCenterPoint",value:function(){return this.graph.getViewPortCenterPoint()}},{key:"getZoom",value:function(){return this.graph.getZoom()}},{key:"getMinZoom",value:function(){return this.graph.getMinZoom()}},{key:"setMinZoom",value:function(t){this.graph.setMinZoom(t)}},{key:"getMaxZoom",value:function(){return this.graph.getMaxZoom()}},{key:"setMaxZoom",value:function(t){this.graph.setMaxZoom(t)}},{key:"getWidth",value:function(){return this.graph.getWidth()}},{key:"getHeight",value:function(){return this.graph.getHeight()}},{key:"setCenter",value:function(t){var e=this.graph.getWidth()/2,r=this.graph.getHeight()/2,n=this.graph.getCanvasByPoint(t.x,t.y);this.graph.translate(e-n.x,r-n.y)}},{key:"_setToolBarStyle",value:function(){qJ()("\n      .g6-component-toolbar li[code='redo'],\n      .g6-component-toolbar li[code='undo'],\n      .g6-component-toolbar li[code='realZoom'] {\n        display: none;\n      }\n      .g6-component-contextmenu {\n        position: absolute;\n        z-index: 2;\n        list-style-type: none;\n        border-radius: 6px;\n        font-size: 14px;\n        width: fit-content;\n        transition: opacity .2s;\n        text-align: center;\n        box-shadow: 0 5px 18px 0 rgba(0, 0, 0, 0.6);\n        border: 0px;\n      }\n      .g6-component-contextmenu ul {\n        padding-left: 0px;\n        margin: 0;\n      }\n      .g6-component-contextmenu li {\n        cursor: pointer;\n        list-style-type: none;\n        list-style: none;\n        margin-left: 0;\n        line-height: 38px;\n        padding: 0px 35px;\n      }\n      .g6-component-contextmenu li:hover {\n        color: #333;\n        background: #aaaaaa45;\n      }\n    ")}},{key:"highlightNode",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.graph,e=null;t.on("node:mouseenter",function(r){var n=r.item;t.setAutoPaint(!1),e&&t.clearItemStates(e,"hover"),t.setItemState(n,"hover",!0),e=n,t.paint(),t.setAutoPaint(!0)}),t.on("node:mouseleave",function(){t.setAutoPaint(!1),e&&(t.clearItemStates(e,"hover"),e=null),t.paint(),t.setAutoPaint(!0)})}},{key:"highlightEdge",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.graph,e=null;t.on("edge:mouseenter",function(r){var n=r.item;t.setAutoPaint(!1),e&&t.clearItemStates(e,"hover"),t.setItemState(n,"hover",!0),e=n,t.paint(),t.setAutoPaint(!0)}),t.on("edge:mouseleave",function(){t.setAutoPaint(!1),e&&(t.clearItemStates(e,"hover"),e=null),t.paint(),t.setAutoPaint(!0)})}},{key:"setData",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.graph;this.data?e.changeData(t):e.data(t),this.data=t}},{key:"render",value:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.graph).render()}},{key:"updateGraph",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.graph;this.data=t,e.changeData(t)}},{key:"refresh",value:function(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.graph).refresh()}},{key:"getContainer",value:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.graph).getContainer()}},{key:"getCanvas",value:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.graph).get("canvas")}},{key:"getNodes",value:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.graph).getNodes()}},{key:"getEdges",value:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.graph).getEdges()}},{key:"getNeighbors",value:function(t,e){return(arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.graph).getNeighbors(t,e)}},{key:"findById",value:function(t){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.graph).findById(t)}},{key:"find",value:function(t,e){return(arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.graph).find(t,e)}},{key:"findAll",value:function(t,e){return(arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.graph).findAll(t,e)}},{key:"getEdgesByNode",value:function(t){return t.getEdges()}},{key:"getInEdges",value:function(t){return t.getInEdges()}},{key:"getOutEdges",value:function(t){return t.getOutEdges()}},{key:"getSourceByEdge",value:function(t){return t.getSource()}},{key:"getTargetByEdge",value:function(t){return t.getTarget()}},{key:"expandNode",value:function(t){var e=t.getModel().id;this._expandCollapseNode(this.collpasedData[e],"show"),delete this.collpasedData[e]}},{key:"collapseNode",value:function(t){var e=t.getModel().id,r=[];this._collapseFunc(t,r),this.collpasedData[e]=r,this._expandCollapseNode(r)}},{key:"isCollpased",value:function(t){return!!this.collpasedData[t]}},{key:"_collapseFunc",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=this.getNeighbors(t,"target"),n=this.getNeighbors(t,"source"),o=0;o<r.length;o++){var i=r[o],a=i.getModel();1===this.getNeighbors(i).length&&e.push({id:a.id})}for(var s=0;s<n.length;s++){var u=n[s],l=u.getModel(),c=this.getNeighbors(u),f=this.getNeighbors(u,"source");if(1===c.length||0===f.length)e.push({id:l.id});else{var p=[];this._collapseFunc(u,p),e.push({id:l.id,children:p})}}return e}},{key:"_expandCollapseNode",value:function(t){var e=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"hide";t&&t.forEach(function(t){"hide"===r?e.hideItem(t.id):(e.showItem(t.id),e.isCollpased(t.id)&&delete e.collpasedData[t.id]),t.children&&e._expandCollapseNode(t.children,r)})}},{key:"showItem",value:function(t,e){(arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.graph).showItem(t,e)}},{key:"hideItem",value:function(t,e){(arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.graph).hideItem(t,e)}},{key:"show",value:function(t){t.show()}},{key:"hide",value:function(t){t.hide()}},{key:"changeVisibility",value:function(t,e){t.changeVisibility(e)}},{key:"isVisible",value:function(t){return t.isVisible()}},{key:"getModel",value:function(t){return t.getModel()}},{key:"addItem",value:function(t,e){(arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.graph).addItem(t,e)}},{key:"removeItem",value:function(t){(arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.graph).removeItem(t)}},{key:"updateItem",value:function(t,e){(arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.graph).updateItem(t,e)}},{key:"refreshItem",value:function(t){(arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.graph).refreshItem(t)}},{key:"refreshPositions",value:function(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.graph).refreshPositions()}},{key:"on",value:function(t,e){(arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.graph).on(t,e)}},{key:"off",value:function(t,e){(arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.graph).off(t,e)}},{key:"toDataURL",value:function(t,e){(arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.graph).toDataURL(t,e)}},{key:"bindNodeDefaultDragEvent",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.graph;t.on("node:dragstart",function(t){eW(t)}),t.on("node:drag",function(t){eW(t)}),t.on("node:dragend",function(t){t.item.get("model").fx=null,t.item.get("model").fy=null})}},{key:"stopDefaultEventPropagation",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.graph;t.on("click",function(t){t.stopPropagation()}),t.on("mousedown",function(t){t.stopPropagation()}),t.on("mouseover",function(t){t.stopPropagation()}),t.on("mouseout",function(t){t.stopPropagation()})}},{key:"clear",value:function(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.graph).clear()}},{key:"destroy",value:function(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.graph).destroy()}}])&&ZJ(t.prototype,e),r&&ZJ(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function eW(t){var e=t.item.get("model");return e.fx=t.x,e.fy=t.y,e.x=t.x,e.y=t.y,e}var rW=r(5611),nW=r.n(rW);function oW(t){"@babel/helpers - typeof";return(oW="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function iW(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,aW(n.key),n)}}function aW(t){var e=function(t,e){if("object"!=oW(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=oW(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==oW(e)?e:e+""}var sW=function(){return t=function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"G6";!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.graph=null,this.config=nW()(e),this.graphRender=null,this.type=r,this.createGraphRender(this.type),this.config=this.graphRender._getGraphConfig(this.config),this.createGraph(this.config),this.CLASS_NAME="SuperMap.KnowledgeGraph"},r=[{key:"dataFromGraphMap",value:function(t,e){return RJ(t,e)}},{key:"dataFromKnowledgeGraphQuery",value:function(t){return RJ(t)}}],(e=[{key:"_handleNodes",value:function(t,e){var r=this;t.filter(function(t){return""!==t}).forEach(function(t){var n=r.findById(t);e(n,"node")})}},{key:"_handleEdges",value:function(t,e){var r=this;t.filter(function(t){return""!==t}).forEach(function(t){var n=r.find("edge",function(e){return e.get("model").edgeId==t});e(n,"edge")})}},{key:"highlight",value:function(t){var e=t.nodeIDs,r=void 0===e?[]:e,n=t.edgeIDs,o=void 0===n?[]:n,i=this.graph,a=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"node";if(e){var n=t[r+"StateStyles"];n&&i.updateItem(e,{style:e.style,stateStyles:{actived:n}}),i.setItemState(e,"actived",!0),i.paint(),i.setAutoPaint(!0)}};this._handleNodes(r,a),this._handleEdges(o,a)}},{key:"clearHighlight",value:function(t){var e=this.graph,r=function(t){t&&(e.clearItemStates(t,"actived"),e.paint(),e.setAutoPaint(!0))};if(e.setAutoPaint(!1),!t)return e.getNodes().forEach(function(t){r(t)}),void e.getEdges().forEach(function(t){r(t)});var n=t.nodeIDs,o=void 0===n?[]:n,i=t.edgeIDs,a=void 0===i?[]:i;this._handleNodes(o,r),this._handleEdges(a,r)}},{key:"handleNodeStatus",value:function(t){var e=t.expand,r=t.collapse,n=t.hidden;this.expandNodes(e),this.collapseNodes(r),this.hideNodes(n)}},{key:"expandNodes",value:function(t){var e=this;t&&t.forEach(function(t){e.expandNode(t+"")})}},{key:"collapseNodes",value:function(t){var e=this;t&&t.forEach(function(t){e.collapseNode(t+"")})}},{key:"hideNodes",value:function(t){var e=this;t&&t.forEach(function(t){e.hideItem(t+"")})}},{key:"createGraphRender",value:function(t){"G6"===t&&(this.graphRender=new tW)}},{key:"createGraph",value:function(t){var e=this.initGraph(t);return this.graph=e,this.autoResize(),e}},{key:"getGraph",value:function(){return this.graph}},{key:"autoResize",value:function(){this.config&&!1!==this.config.autoResize&&this.graphRender.autoResize()}},{key:"zoom",value:function(t,e,r,n){this.graphRender.zoom(t,e,r,n)}},{key:"zoomTo",value:function(t,e,r,n){this.graphRender.zoomTo(t,e,r,n)}},{key:"fitView",value:function(t,e,r,n){this.graphRender.fitView(t,e,r,n)}},{key:"fitCenter",value:function(t,e){this.graphRender.fitCenter(t,e)}},{key:"getGraphCenterPoint",value:function(){return this.graphRender.getGraphCenterPoint()}},{key:"getViewPortCenterPoint",value:function(){return this.graphRender.getViewPortCenterPoint()}},{key:"getZoom",value:function(){return this.graphRender.getZoom()}},{key:"getMinZoom",value:function(){return this.graphRender.getMinZoom()}},{key:"setMinZoom",value:function(t){this.graphRender.setMinZoom(t)}},{key:"getMaxZoom",value:function(){return this.graphRender.getMaxZoom()}},{key:"setMaxZoom",value:function(t){this.graphRender.setMaxZoom(t)}},{key:"getWidth",value:function(){return this.graphRender.getWidth()}},{key:"getHeight",value:function(){return this.graphRender.getHeight()}},{key:"initGraph",value:function(t){var e=this,r=this.graphRender.initGraph(t);this.graph=r;return this.graph.on("afterlayout",function(){void 0!==e.config.zoom&&e.zoom(e.config.zoom),void 0!==e.config.center&&e.graphRender.setCenter({x:e.config.center[0],y:e.config.center[1]})}),r}},{key:"setData",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.graph;t=t||{nodes:[],edges:[]},this.config&&this.config.nodeLabelMaxWidth&&(t.nodes=this.nodeLabelOpenEllipsis(this.config.nodeLabelMaxWidth,t.nodes)),this.graphRender.setData(t,e),this.render(e),this.data=t}},{key:"render",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.graph;t&&this.graphRender.render(t)}},{key:"updateGraph",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.graph;e&&this.graphRender.updateGraph(t,e)}},{key:"refresh",value:function(){return this.graphRender.refresh()}},{key:"changeSize",value:function(t,e){return this.graphRender.changeSize(t,e)}},{key:"resize",value:function(t,e){this.graphRender.changeSize(t,e),this.graphRender.refresh()}},{key:"getContainer",value:function(){return this.graphRender.getContainer()}},{key:"getCanvas",value:function(){return this.graphRender.getCanvas()}},{key:"getNodes",value:function(){return this.graphRender.getNodes()}},{key:"getEdges",value:function(){return this.graphRender.getEdges()}},{key:"getNeighbors",value:function(t,e){return this.graphRender.getNeighbors(t,e)}},{key:"findById",value:function(t){return this.graphRender.findById(t)}},{key:"find",value:function(t,e){return this.graphRender.find(t,e)}},{key:"findAll",value:function(t,e){return this.graphRender.findAll(t,e)}},{key:"getEdgesByNode",value:function(t){return this.graphRender.getEdgesByNode(t)}},{key:"getInEdges",value:function(t){return this.graphRender.getInEdges(t)}},{key:"getOutEdges",value:function(t){return this.graphRender.getOutEdges(t)}},{key:"getSourceByEdge",value:function(t){return this.graphRender.getSourceByEdge(t)}},{key:"getTargetByEdge",value:function(t){return this.graphRender.getTargetByEdge(t)}},{key:"expandNode",value:function(t){var e=this.findById(t);e&&this.graphRender.expandNode(e)}},{key:"collapseNode",value:function(t){var e=this.findById(t);e&&this.graphRender.collapseNode(e)}},{key:"showItem",value:function(t,e){this.graphRender.showItem(t,e)}},{key:"hideItem",value:function(t,e){this.graphRender.hideItem(t,e)}},{key:"show",value:function(t){this.graphRender.show(t)}},{key:"hide",value:function(t){this.graphRender.hide(t)}},{key:"changeVisibility",value:function(t,e){this.graphRender.changeVisibility(t,e)}},{key:"isVisible",value:function(t){return this.graphRender.isVisible(t)}},{key:"getModel",value:function(t){return this.graphRender.getModel(t)}},{key:"addItem",value:function(t,e){return this.graphRender.addItem(t,e)}},{key:"removeItem",value:function(t){return this.graphRender.removeItem(t)}},{key:"updateItem",value:function(t,e){return this.graphRender.updateItem(t,e)}},{key:"refreshItem",value:function(t){return this.graphRender.refreshItem(t)}},{key:"refreshPositions",value:function(){return this.graphRender.refreshPositions()}},{key:"on",value:function(t,e){this.graphRender.on(t,e)}},{key:"off",value:function(t,e){this.graphRender.off(t,e)}},{key:"toDataURL",value:function(t,e){this.graphRender.toDataURL(t,e)}},{key:"nodeLabelOpenEllipsis",value:function(t,e){var r=this;return e?t?e.map(function(e){var n=e.labelCfg&&e.labelCfg.fontSize||r.defaultNode&&r.defaultNode.labelCfg&&r.defaultNode.labelCfg.fontSize||14;return e.label=function(t,e,r){var n=1*r;e*=1.6;if(function(t){for(var e=0,r=0;r<t.length;r++)t.charCodeAt(r)>0&&t.charCodeAt(r)<128?e++:e+=2;return e}(t)*n>e){var o=Math.floor((e-20)/n),i=t.substring(0,o);return(t.substring(o).length+"…".length)*n>e?i+"\n"+t.substring(o,o+o-2)+"…":0==t.substring(o).length?i:i+"\n"+t.substring(o)}return t}(e.label,t,n),e}):e:[]}},{key:"clear",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.graph;t&&t.clear()}},{key:"destroy",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.graph;t&&t.destroy()}}])&&iW(t.prototype,e),r&&iW(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();r(3688);function uW(t,e,r,n,o,i,a){try{var s=t[i](a),u=s.value}catch(t){return void r(t)}s.done?e(u):Promise.resolve(u).then(n,o)}function lW(t){return function(){var e=this,r=arguments;return new Promise(function(n,o){var i=t.apply(e,r);function a(t){uW(i,n,o,a,s,"next",t)}function s(t){uW(i,n,o,a,s,"throw",t)}a(void 0)})}}r(7671),r(2826),r(5730),r(6678),r(2971);function cW(t){"@babel/helpers - typeof";return(cW="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function fW(t){var e=function(t,e){if("object"!=cW(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=cW(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==cW(e)?e:e+""}function pW(t,e,r){return(e=fW(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}r(3658),r(9207),r(7982);var hW=r(368),yW=(r(9484),r(9973));r(2114),r(5242),r(888);function dW(t){"@babel/helpers - typeof";return(dW="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var vW=function(t,e){return(vW=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)};function mW(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}vW(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}function bW(t,e){var r=t[0],n=t[1];return[r*Math.cos(e)-n*Math.sin(e),r*Math.sin(e)+n*Math.cos(e)]}function gW(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var r=0;r<t.length;r++)if("number"!=typeof t[r])throw new Error("assertNumbers arguments["+r+"] is not a number. "+dW(t[r])+" == typeof "+t[r]);return!0}var SW=Math.PI;function wW(t,e,r){t.lArcFlag=0===t.lArcFlag?0:1,t.sweepFlag=0===t.sweepFlag?0:1;var n=t.rX,o=t.rY,i=t.x,a=t.y;n=Math.abs(t.rX),o=Math.abs(t.rY);var s=bW([(e-i)/2,(r-a)/2],-t.xRot/180*SW),u=s[0],l=s[1],c=Math.pow(u,2)/Math.pow(n,2)+Math.pow(l,2)/Math.pow(o,2);1<c&&(n*=Math.sqrt(c),o*=Math.sqrt(c)),t.rX=n,t.rY=o;var f=Math.pow(n,2)*Math.pow(l,2)+Math.pow(o,2)*Math.pow(u,2),p=(t.lArcFlag!==t.sweepFlag?1:-1)*Math.sqrt(Math.max(0,(Math.pow(n,2)*Math.pow(o,2)-f)/f)),h=n*l/o*p,y=-o*u/n*p,d=bW([h,y],t.xRot/180*SW);t.cX=d[0]+(e+i)/2,t.cY=d[1]+(r+a)/2,t.phi1=Math.atan2((l-y)/o,(u-h)/n),t.phi2=Math.atan2((-l-y)/o,(-u-h)/n),0===t.sweepFlag&&t.phi2>t.phi1&&(t.phi2-=2*SW),1===t.sweepFlag&&t.phi2<t.phi1&&(t.phi2+=2*SW),t.phi1*=180/SW,t.phi2*=180/SW}function _W(t,e,r){gW(t,e,r);var n=t*t+e*e-r*r;if(0>n)return[];if(0===n)return[[t*r/(t*t+e*e),e*r/(t*t+e*e)]];var o=Math.sqrt(n);return[[(t*r+e*o)/(t*t+e*e),(e*r-t*o)/(t*t+e*e)],[(t*r-e*o)/(t*t+e*e),(e*r+t*o)/(t*t+e*e)]]}var OW,EW=Math.PI/180;function PW(t,e,r){return(1-r)*t+r*e}function xW(t,e,r,n){return t+Math.cos(n/180*SW)*e+Math.sin(n/180*SW)*r}function TW(t,e,r,n){var o=e-t,i=r-e,a=3*o+3*(n-r)-6*i,s=6*(i-o),u=3*o;return Math.abs(a)<1e-6?[-u/s]:function(t,e,r){void 0===r&&(r=1e-6);var n=t*t/4-u/a;if(n<-r)return[];if(n<=r)return[-t/2];var o=Math.sqrt(n);return[-t/2-o,-t/2+o]}(s/a,0,1e-6)}function CW(t,e,r,n,o){var i=1-o;return t*(i*i*i)+e*(3*i*i*o)+r*(3*i*o*o)+n*(o*o*o)}!function(t){function e(){return o(function(t,e,r){return t.relative&&(void 0!==t.x1&&(t.x1+=e),void 0!==t.y1&&(t.y1+=r),void 0!==t.x2&&(t.x2+=e),void 0!==t.y2&&(t.y2+=r),void 0!==t.x&&(t.x+=e),void 0!==t.y&&(t.y+=r),t.relative=!1),t})}function r(){var t=NaN,e=NaN,r=NaN,n=NaN;return o(function(o,i,a){return o.type&MW.SMOOTH_CURVE_TO&&(o.type=MW.CURVE_TO,t=isNaN(t)?i:t,e=isNaN(e)?a:e,o.x1=o.relative?i-t:2*i-t,o.y1=o.relative?a-e:2*a-e),o.type&MW.CURVE_TO?(t=o.relative?i+o.x2:o.x2,e=o.relative?a+o.y2:o.y2):(t=NaN,e=NaN),o.type&MW.SMOOTH_QUAD_TO&&(o.type=MW.QUAD_TO,r=isNaN(r)?i:r,n=isNaN(n)?a:n,o.x1=o.relative?i-r:2*i-r,o.y1=o.relative?a-n:2*a-n),o.type&MW.QUAD_TO?(r=o.relative?i+o.x1:o.x1,n=o.relative?a+o.y1:o.y1):(r=NaN,n=NaN),o})}function n(){var t=NaN,e=NaN;return o(function(r,n,o){if(r.type&MW.SMOOTH_QUAD_TO&&(r.type=MW.QUAD_TO,t=isNaN(t)?n:t,e=isNaN(e)?o:e,r.x1=r.relative?n-t:2*n-t,r.y1=r.relative?o-e:2*o-e),r.type&MW.QUAD_TO){t=r.relative?n+r.x1:r.x1,e=r.relative?o+r.y1:r.y1;var i=r.x1,a=r.y1;r.type=MW.CURVE_TO,r.x1=((r.relative?0:n)+2*i)/3,r.y1=((r.relative?0:o)+2*a)/3,r.x2=(r.x+2*i)/3,r.y2=(r.y+2*a)/3}else t=NaN,e=NaN;return r})}function o(t){var e=0,r=0,n=NaN,o=NaN;return function(i){if(isNaN(n)&&!(i.type&MW.MOVE_TO))throw new Error("path must start with moveto");var a=t(i,e,r,n,o);return i.type&MW.CLOSE_PATH&&(e=n,r=o),void 0!==i.x&&(e=i.relative?e+i.x:i.x),void 0!==i.y&&(r=i.relative?r+i.y:i.y),i.type&MW.MOVE_TO&&(n=e,o=r),a}}function i(t,e,r,n,i,a){return gW(t,e,r,n,i,a),o(function(o,s,u,l){var c=o.x1,f=o.x2,p=o.relative&&!isNaN(l),h=void 0!==o.x?o.x:p?0:s,y=void 0!==o.y?o.y:p?0:u;function d(t){return t*t}o.type&MW.HORIZ_LINE_TO&&0!==e&&(o.type=MW.LINE_TO,o.y=o.relative?0:u),o.type&MW.VERT_LINE_TO&&0!==r&&(o.type=MW.LINE_TO,o.x=o.relative?0:s),void 0!==o.x&&(o.x=o.x*t+y*r+(p?0:i)),void 0!==o.y&&(o.y=h*e+o.y*n+(p?0:a)),void 0!==o.x1&&(o.x1=o.x1*t+o.y1*r+(p?0:i)),void 0!==o.y1&&(o.y1=c*e+o.y1*n+(p?0:a)),void 0!==o.x2&&(o.x2=o.x2*t+o.y2*r+(p?0:i)),void 0!==o.y2&&(o.y2=f*e+o.y2*n+(p?0:a));var v=t*n-e*r;if(void 0!==o.xRot&&(1!==t||0!==e||0!==r||1!==n))if(0===v)delete o.rX,delete o.rY,delete o.xRot,delete o.lArcFlag,delete o.sweepFlag,o.type=MW.LINE_TO;else{var m=o.xRot*Math.PI/180,b=Math.sin(m),g=Math.cos(m),S=1/d(o.rX),w=1/d(o.rY),_=d(g)*S+d(b)*w,O=2*b*g*(S-w),E=d(b)*S+d(g)*w,P=_*n*n-O*e*n+E*e*e,x=O*(t*n+e*r)-2*(_*r*n+E*t*e),T=_*r*r-O*t*r+E*t*t,C=(Math.atan2(x,P-T)+Math.PI)%Math.PI/2,k=Math.sin(C),A=Math.cos(C);o.rX=Math.abs(v)/Math.sqrt(P*d(A)+x*k*A+T*d(k)),o.rY=Math.abs(v)/Math.sqrt(P*d(k)-x*k*A+T*d(A)),o.xRot=180*C/Math.PI}return void 0!==o.sweepFlag&&0>v&&(o.sweepFlag=+!o.sweepFlag),o})}t.ROUND=function(t){function e(e){return Math.round(e*t)/t}return void 0===t&&(t=1e13),gW(t),function(t){return void 0!==t.x1&&(t.x1=e(t.x1)),void 0!==t.y1&&(t.y1=e(t.y1)),void 0!==t.x2&&(t.x2=e(t.x2)),void 0!==t.y2&&(t.y2=e(t.y2)),void 0!==t.x&&(t.x=e(t.x)),void 0!==t.y&&(t.y=e(t.y)),void 0!==t.rX&&(t.rX=e(t.rX)),void 0!==t.rY&&(t.rY=e(t.rY)),t}},t.TO_ABS=e,t.TO_REL=function(){return o(function(t,e,r){return t.relative||(void 0!==t.x1&&(t.x1-=e),void 0!==t.y1&&(t.y1-=r),void 0!==t.x2&&(t.x2-=e),void 0!==t.y2&&(t.y2-=r),void 0!==t.x&&(t.x-=e),void 0!==t.y&&(t.y-=r),t.relative=!0),t})},t.NORMALIZE_HVZ=function(t,e,r){return void 0===t&&(t=!0),void 0===e&&(e=!0),void 0===r&&(r=!0),o(function(n,o,i,a,s){if(isNaN(a)&&!(n.type&MW.MOVE_TO))throw new Error("path must start with moveto");return e&&n.type&MW.HORIZ_LINE_TO&&(n.type=MW.LINE_TO,n.y=n.relative?0:i),r&&n.type&MW.VERT_LINE_TO&&(n.type=MW.LINE_TO,n.x=n.relative?0:o),t&&n.type&MW.CLOSE_PATH&&(n.type=MW.LINE_TO,n.x=n.relative?a-o:a,n.y=n.relative?s-i:s),n.type&MW.ARC&&(0===n.rX||0===n.rY)&&(n.type=MW.LINE_TO,delete n.rX,delete n.rY,delete n.xRot,delete n.lArcFlag,delete n.sweepFlag),n})},t.NORMALIZE_ST=r,t.QT_TO_C=n,t.INFO=o,t.SANITIZE=function(t){void 0===t&&(t=0),gW(t);var e=NaN,r=NaN,n=NaN,i=NaN;return o(function(o,a,s,u,l){var c=Math.abs,f=!1,p=0,h=0;if(o.type&MW.SMOOTH_CURVE_TO&&(p=isNaN(e)?0:a-e,h=isNaN(r)?0:s-r),o.type&(MW.CURVE_TO|MW.SMOOTH_CURVE_TO)?(e=o.relative?a+o.x2:o.x2,r=o.relative?s+o.y2:o.y2):(e=NaN,r=NaN),o.type&MW.SMOOTH_QUAD_TO?(n=isNaN(n)?a:2*a-n,i=isNaN(i)?s:2*s-i):o.type&MW.QUAD_TO?(n=o.relative?a+o.x1:o.x1,i=o.relative?s+o.y1:o.y2):(n=NaN,i=NaN),o.type&MW.LINE_COMMANDS||o.type&MW.ARC&&(0===o.rX||0===o.rY||!o.lArcFlag)||o.type&MW.CURVE_TO||o.type&MW.SMOOTH_CURVE_TO||o.type&MW.QUAD_TO||o.type&MW.SMOOTH_QUAD_TO){var y=void 0===o.x?0:o.relative?o.x:o.x-a,d=void 0===o.y?0:o.relative?o.y:o.y-s;p=isNaN(n)?void 0===o.x1?p:o.relative?o.x:o.x1-a:n-a,h=isNaN(i)?void 0===o.y1?h:o.relative?o.y:o.y1-s:i-s;var v=void 0===o.x2?0:o.relative?o.x:o.x2-a,m=void 0===o.y2?0:o.relative?o.y:o.y2-s;c(y)<=t&&c(d)<=t&&c(p)<=t&&c(h)<=t&&c(v)<=t&&c(m)<=t&&(f=!0)}return o.type&MW.CLOSE_PATH&&c(a-u)<=t&&c(s-l)<=t&&(f=!0),f?[]:o})},t.MATRIX=i,t.ROTATE=function(t,e,r){void 0===e&&(e=0),void 0===r&&(r=0),gW(t,e,r);var n=Math.sin(t),o=Math.cos(t);return i(o,n,-n,o,e-e*o+r*n,r-e*n-r*o)},t.TRANSLATE=function(t,e){return void 0===e&&(e=0),gW(t,e),i(1,0,0,1,t,e)},t.SCALE=function(t,e){return void 0===e&&(e=t),gW(t,e),i(t,0,0,e,0,0)},t.SKEW_X=function(t){return gW(t),i(1,0,Math.atan(t),1,0,0)},t.SKEW_Y=function(t){return gW(t),i(1,Math.atan(t),0,1,0,0)},t.X_AXIS_SYMMETRY=function(t){return void 0===t&&(t=0),gW(t),i(-1,0,0,1,t,0)},t.Y_AXIS_SYMMETRY=function(t){return void 0===t&&(t=0),gW(t),i(1,0,0,-1,0,t)},t.A_TO_C=function(){return o(function(t,e,r){return MW.ARC===t.type?function(t,e,r){var n,o,i,a;t.cX||wW(t,e,r);for(var s=Math.min(t.phi1,t.phi2),u=Math.max(t.phi1,t.phi2)-s,l=Math.ceil(u/90),c=new Array(l),f=e,p=r,h=0;h<l;h++){var y=PW(t.phi1,t.phi2,h/l),d=PW(t.phi1,t.phi2,(h+1)/l),v=d-y,m=4/3*Math.tan(v*EW/4),b=[Math.cos(y*EW)-m*Math.sin(y*EW),Math.sin(y*EW)+m*Math.cos(y*EW)],g=b[0],S=b[1],w=[Math.cos(d*EW),Math.sin(d*EW)],_=w[0],O=w[1],E=[_+m*Math.sin(d*EW),O-m*Math.cos(d*EW)],P=E[0],x=E[1];c[h]={relative:t.relative,type:MW.CURVE_TO};var T=function(e,r){var n=bW([e*t.rX,r*t.rY],t.xRot),o=n[0],i=n[1];return[t.cX+o,t.cY+i]};n=T(g,S),c[h].x1=n[0],c[h].y1=n[1],o=T(P,x),c[h].x2=o[0],c[h].y2=o[1],i=T(_,O),c[h].x=i[0],c[h].y=i[1],t.relative&&(c[h].x1-=f,c[h].y1-=p,c[h].x2-=f,c[h].y2-=p,c[h].x-=f,c[h].y-=p),f=(a=[c[h].x,c[h].y])[0],p=a[1]}return c}(t,t.relative?0:e,t.relative?0:r):t})},t.ANNOTATE_ARCS=function(){return o(function(t,e,r){return t.relative&&(e=0,r=0),MW.ARC===t.type&&wW(t,e,r),t})},t.CLONE=function(){return function(t){var e={};for(var r in t)e[r]=t[r];return e}},t.CALCULATE_BOUNDS=function(){var t=e(),i=n(),a=r(),s=o(function(e,r,n){var o=a(i(t(function(t){var e={};for(var r in t)e[r]=t[r];return e}(e))));function u(t){t>s.maxX&&(s.maxX=t),t<s.minX&&(s.minX=t)}function l(t){t>s.maxY&&(s.maxY=t),t<s.minY&&(s.minY=t)}if(o.type&MW.DRAWING_COMMANDS&&(u(r),l(n)),o.type&MW.HORIZ_LINE_TO&&u(o.x),o.type&MW.VERT_LINE_TO&&l(o.y),o.type&MW.LINE_TO&&(u(o.x),l(o.y)),o.type&MW.CURVE_TO){u(o.x),l(o.y);for(var c=0,f=TW(r,o.x1,o.x2,o.x);c<f.length;c++)0<(T=f[c])&&1>T&&u(CW(r,o.x1,o.x2,o.x,T));for(var p=0,h=TW(n,o.y1,o.y2,o.y);p<h.length;p++)0<(T=h[p])&&1>T&&l(CW(n,o.y1,o.y2,o.y,T))}if(o.type&MW.ARC){u(o.x),l(o.y),wW(o,r,n);for(var y=o.xRot/180*Math.PI,d=Math.cos(y)*o.rX,v=Math.sin(y)*o.rX,m=-Math.sin(y)*o.rY,b=Math.cos(y)*o.rY,g=o.phi1<o.phi2?[o.phi1,o.phi2]:-180>o.phi2?[o.phi2+360,o.phi1+360]:[o.phi2,o.phi1],S=g[0],w=g[1],_=function(t){var e=t[0],r=t[1],n=180*Math.atan2(r,e)/Math.PI;return n<S?n+360:n},O=0,E=_W(m,-d,0).map(_);O<E.length;O++)(T=E[O])>S&&T<w&&u(xW(o.cX,d,m,T));for(var P=0,x=_W(b,-v,0).map(_);P<x.length;P++){var T;(T=x[P])>S&&T<w&&l(xW(o.cY,v,b,T))}}return e});return s.minX=1/0,s.maxX=-1/0,s.minY=1/0,s.maxY=-1/0,s}}(OW||(OW={}));var kW,AW=function(){function t(){}return t.prototype.round=function(t){return this.transform(OW.ROUND(t))},t.prototype.toAbs=function(){return this.transform(OW.TO_ABS())},t.prototype.toRel=function(){return this.transform(OW.TO_REL())},t.prototype.normalizeHVZ=function(t,e,r){return this.transform(OW.NORMALIZE_HVZ(t,e,r))},t.prototype.normalizeST=function(){return this.transform(OW.NORMALIZE_ST())},t.prototype.qtToC=function(){return this.transform(OW.QT_TO_C())},t.prototype.aToC=function(){return this.transform(OW.A_TO_C())},t.prototype.sanitize=function(t){return this.transform(OW.SANITIZE(t))},t.prototype.translate=function(t,e){return this.transform(OW.TRANSLATE(t,e))},t.prototype.scale=function(t,e){return this.transform(OW.SCALE(t,e))},t.prototype.rotate=function(t,e,r){return this.transform(OW.ROTATE(t,e,r))},t.prototype.matrix=function(t,e,r,n,o,i){return this.transform(OW.MATRIX(t,e,r,n,o,i))},t.prototype.skewX=function(t){return this.transform(OW.SKEW_X(t))},t.prototype.skewY=function(t){return this.transform(OW.SKEW_Y(t))},t.prototype.xSymmetry=function(t){return this.transform(OW.X_AXIS_SYMMETRY(t))},t.prototype.ySymmetry=function(t){return this.transform(OW.Y_AXIS_SYMMETRY(t))},t.prototype.annotateArcs=function(){return this.transform(OW.ANNOTATE_ARCS())},t}(),jW=function(t){return" "===t||"\t"===t||"\r"===t||"\n"===t},NW=function(t){return"0".charCodeAt(0)<=t.charCodeAt(0)&&t.charCodeAt(0)<="9".charCodeAt(0)},IW=function(t){function e(){var e=t.call(this)||this;return e.curNumber="",e.curCommandType=-1,e.curCommandRelative=!1,e.canParseCommandOrComma=!0,e.curNumberHasExp=!1,e.curNumberHasExpDigits=!1,e.curNumberHasDecimal=!1,e.curArgs=[],e}return mW(e,t),e.prototype.finish=function(t){if(void 0===t&&(t=[]),this.parse(" ",t),0!==this.curArgs.length||!this.canParseCommandOrComma)throw new SyntaxError("Unterminated command at the path end.");return t},e.prototype.parse=function(t,e){var r=this;void 0===e&&(e=[]);for(var n=function(t){e.push(t),r.curArgs.length=0,r.canParseCommandOrComma=!0},o=0;o<t.length;o++){var i=t[o],a=!(this.curCommandType!==MW.ARC||3!==this.curArgs.length&&4!==this.curArgs.length||1!==this.curNumber.length||"0"!==this.curNumber&&"1"!==this.curNumber),s=NW(i)&&("0"===this.curNumber&&"0"===i||a);if(!NW(i)||s)if("e"!==i&&"E"!==i)if("-"!==i&&"+"!==i||!this.curNumberHasExp||this.curNumberHasExpDigits)if("."!==i||this.curNumberHasExp||this.curNumberHasDecimal||a){if(this.curNumber&&-1!==this.curCommandType){var u=Number(this.curNumber);if(isNaN(u))throw new SyntaxError("Invalid number ending at "+o);if(this.curCommandType===MW.ARC)if(0===this.curArgs.length||1===this.curArgs.length){if(0>u)throw new SyntaxError('Expected positive number, got "'+u+'" at index "'+o+'"')}else if((3===this.curArgs.length||4===this.curArgs.length)&&"0"!==this.curNumber&&"1"!==this.curNumber)throw new SyntaxError('Expected a flag, got "'+this.curNumber+'" at index "'+o+'"');this.curArgs.push(u),this.curArgs.length===RW[this.curCommandType]&&(MW.HORIZ_LINE_TO===this.curCommandType?n({type:MW.HORIZ_LINE_TO,relative:this.curCommandRelative,x:u}):MW.VERT_LINE_TO===this.curCommandType?n({type:MW.VERT_LINE_TO,relative:this.curCommandRelative,y:u}):this.curCommandType===MW.MOVE_TO||this.curCommandType===MW.LINE_TO||this.curCommandType===MW.SMOOTH_QUAD_TO?(n({type:this.curCommandType,relative:this.curCommandRelative,x:this.curArgs[0],y:this.curArgs[1]}),MW.MOVE_TO===this.curCommandType&&(this.curCommandType=MW.LINE_TO)):this.curCommandType===MW.CURVE_TO?n({type:MW.CURVE_TO,relative:this.curCommandRelative,x1:this.curArgs[0],y1:this.curArgs[1],x2:this.curArgs[2],y2:this.curArgs[3],x:this.curArgs[4],y:this.curArgs[5]}):this.curCommandType===MW.SMOOTH_CURVE_TO?n({type:MW.SMOOTH_CURVE_TO,relative:this.curCommandRelative,x2:this.curArgs[0],y2:this.curArgs[1],x:this.curArgs[2],y:this.curArgs[3]}):this.curCommandType===MW.QUAD_TO?n({type:MW.QUAD_TO,relative:this.curCommandRelative,x1:this.curArgs[0],y1:this.curArgs[1],x:this.curArgs[2],y:this.curArgs[3]}):this.curCommandType===MW.ARC&&n({type:MW.ARC,relative:this.curCommandRelative,rX:this.curArgs[0],rY:this.curArgs[1],xRot:this.curArgs[2],lArcFlag:this.curArgs[3],sweepFlag:this.curArgs[4],x:this.curArgs[5],y:this.curArgs[6]})),this.curNumber="",this.curNumberHasExpDigits=!1,this.curNumberHasExp=!1,this.curNumberHasDecimal=!1,this.canParseCommandOrComma=!0}if(!jW(i))if(","===i&&this.canParseCommandOrComma)this.canParseCommandOrComma=!1;else if("+"!==i&&"-"!==i&&"."!==i)if(s)this.curNumber=i,this.curNumberHasDecimal=!1;else{if(0!==this.curArgs.length)throw new SyntaxError("Unterminated command at index "+o+".");if(!this.canParseCommandOrComma)throw new SyntaxError('Unexpected character "'+i+'" at index '+o+". Command cannot follow comma");if(this.canParseCommandOrComma=!1,"z"!==i&&"Z"!==i)if("h"===i||"H"===i)this.curCommandType=MW.HORIZ_LINE_TO,this.curCommandRelative="h"===i;else if("v"===i||"V"===i)this.curCommandType=MW.VERT_LINE_TO,this.curCommandRelative="v"===i;else if("m"===i||"M"===i)this.curCommandType=MW.MOVE_TO,this.curCommandRelative="m"===i;else if("l"===i||"L"===i)this.curCommandType=MW.LINE_TO,this.curCommandRelative="l"===i;else if("c"===i||"C"===i)this.curCommandType=MW.CURVE_TO,this.curCommandRelative="c"===i;else if("s"===i||"S"===i)this.curCommandType=MW.SMOOTH_CURVE_TO,this.curCommandRelative="s"===i;else if("q"===i||"Q"===i)this.curCommandType=MW.QUAD_TO,this.curCommandRelative="q"===i;else if("t"===i||"T"===i)this.curCommandType=MW.SMOOTH_QUAD_TO,this.curCommandRelative="t"===i;else{if("a"!==i&&"A"!==i)throw new SyntaxError('Unexpected character "'+i+'" at index '+o+".");this.curCommandType=MW.ARC,this.curCommandRelative="a"===i}else e.push({type:MW.CLOSE_PATH}),this.canParseCommandOrComma=!0,this.curCommandType=-1}else this.curNumber=i,this.curNumberHasDecimal="."===i}else this.curNumber+=i,this.curNumberHasDecimal=!0;else this.curNumber+=i;else this.curNumber+=i,this.curNumberHasExp=!0;else this.curNumber+=i,this.curNumberHasExpDigits=this.curNumberHasExp}return e},e.prototype.transform=function(t){return Object.create(this,{parse:{value:function(e,r){void 0===r&&(r=[]);for(var n=0,o=Object.getPrototypeOf(this).parse.call(this,e);n<o.length;n++){var i=o[n],a=t(i);Array.isArray(a)?r.push.apply(r,a):r.push(a)}return r}}})},e}(AW),MW=function(t){function e(r){var n=t.call(this)||this;return n.commands="string"==typeof r?e.parse(r):r,n}return mW(e,t),e.prototype.encode=function(){return e.encode(this.commands)},e.prototype.getBounds=function(){var t=OW.CALCULATE_BOUNDS();return this.transform(t),t},e.prototype.transform=function(t){for(var e=[],r=0,n=this.commands;r<n.length;r++){var o=t(n[r]);Array.isArray(o)?e.push.apply(e,o):e.push(o)}return this.commands=e,this},e.encode=function(t){return function(t){var e="";Array.isArray(t)||(t=[t]);for(var r=0;r<t.length;r++){var n=t[r];if(n.type===MW.CLOSE_PATH)e+="z";else if(n.type===MW.HORIZ_LINE_TO)e+=(n.relative?"h":"H")+n.x;else if(n.type===MW.VERT_LINE_TO)e+=(n.relative?"v":"V")+n.y;else if(n.type===MW.MOVE_TO)e+=(n.relative?"m":"M")+n.x+" "+n.y;else if(n.type===MW.LINE_TO)e+=(n.relative?"l":"L")+n.x+" "+n.y;else if(n.type===MW.CURVE_TO)e+=(n.relative?"c":"C")+n.x1+" "+n.y1+" "+n.x2+" "+n.y2+" "+n.x+" "+n.y;else if(n.type===MW.SMOOTH_CURVE_TO)e+=(n.relative?"s":"S")+n.x2+" "+n.y2+" "+n.x+" "+n.y;else if(n.type===MW.QUAD_TO)e+=(n.relative?"q":"Q")+n.x1+" "+n.y1+" "+n.x+" "+n.y;else if(n.type===MW.SMOOTH_QUAD_TO)e+=(n.relative?"t":"T")+n.x+" "+n.y;else{if(n.type!==MW.ARC)throw new Error('Unexpected command type "'+n.type+'" at index '+r+".");e+=(n.relative?"a":"A")+n.rX+" "+n.rY+" "+n.xRot+" "+ +n.lArcFlag+" "+ +n.sweepFlag+" "+n.x+" "+n.y}}return e}(t)},e.parse=function(t){var e=new IW,r=[];return e.parse(t,r),e.finish(r),r},e.CLOSE_PATH=1,e.MOVE_TO=2,e.HORIZ_LINE_TO=4,e.VERT_LINE_TO=8,e.LINE_TO=16,e.CURVE_TO=32,e.SMOOTH_CURVE_TO=64,e.QUAD_TO=128,e.SMOOTH_QUAD_TO=256,e.ARC=512,e.LINE_COMMANDS=e.LINE_TO|e.HORIZ_LINE_TO|e.VERT_LINE_TO,e.DRAWING_COMMANDS=e.HORIZ_LINE_TO|e.VERT_LINE_TO|e.LINE_TO|e.CURVE_TO|e.SMOOTH_CURVE_TO|e.QUAD_TO|e.SMOOTH_QUAD_TO|e.ARC,e}(AW),RW=((kW={})[MW.MOVE_TO]=2,kW[MW.LINE_TO]=2,kW[MW.HORIZ_LINE_TO]=1,kW[MW.VERT_LINE_TO]=1,kW[MW.CLOSE_PATH]=0,kW[MW.QUAD_TO]=4,kW[MW.SMOOTH_QUAD_TO]=2,kW[MW.CURVE_TO]=6,kW[MW.SMOOTH_CURVE_TO]=4,kW[MW.ARC]=7,kW);r(2611);function LW(t){"@babel/helpers - typeof";return(LW="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var DW=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],BW=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function FW(t,e,r,n,o){if("string"==typeof t&&(t=document.getElementById(t)),!(t&&"object"===LW(t)&&"getContext"in t))throw new TypeError("Expecting canvas with `getContext` method in processCanvasRGB(A) calls!");var i=t.getContext("2d");try{return i.getImageData(e,r,n,o)}catch(t){throw new Error("unable to access image data: "+t)}}function UW(t,e,r,n,o,i){if(!(isNaN(i)||i<1)){i|=0;var a=FW(t,e,r,n,o);a=function(t,e,r,n,o,i){for(var a,s=t.data,u=2*i+1,l=n-1,c=o-1,f=i+1,p=f*(f+1)/2,h=new GW,y=h,d=1;d<u;d++)y=y.next=new GW,d===f&&(a=y);y.next=h;for(var v=null,m=null,b=0,g=0,S=DW[i],w=BW[i],_=0;_<o;_++){y=h;for(var O=s[g],E=s[g+1],P=s[g+2],x=s[g+3],T=0;T<f;T++)y.r=O,y.g=E,y.b=P,y.a=x,y=y.next;for(var C=0,k=0,A=0,j=0,N=f*O,I=f*E,M=f*P,R=f*x,L=p*O,D=p*E,B=p*P,F=p*x,U=1;U<f;U++){var G=g+((l<U?l:U)<<2),V=s[G],z=s[G+1],H=s[G+2],q=s[G+3],J=f-U;L+=(y.r=V)*J,D+=(y.g=z)*J,B+=(y.b=H)*J,F+=(y.a=q)*J,C+=V,k+=z,A+=H,j+=q,y=y.next}v=h,m=a;for(var W=0;W<n;W++){var K=F*S>>>w;if(s[g+3]=K,0!==K){var Y=255/K;s[g]=(L*S>>>w)*Y,s[g+1]=(D*S>>>w)*Y,s[g+2]=(B*S>>>w)*Y}else s[g]=s[g+1]=s[g+2]=0;L-=N,D-=I,B-=M,F-=R,N-=v.r,I-=v.g,M-=v.b,R-=v.a;var Q=W+i+1;Q=b+(Q<l?Q:l)<<2,C+=v.r=s[Q],k+=v.g=s[Q+1],A+=v.b=s[Q+2],j+=v.a=s[Q+3],L+=C,D+=k,B+=A,F+=j,v=v.next;var X=m,Z=X.r,$=X.g,tt=X.b,et=X.a;N+=Z,I+=$,M+=tt,R+=et,C-=Z,k-=$,A-=tt,j-=et,m=m.next,g+=4}b+=n}for(var rt=0;rt<n;rt++){var nt=s[g=rt<<2],ot=s[g+1],it=s[g+2],at=s[g+3],st=f*nt,ut=f*ot,lt=f*it,ct=f*at,ft=p*nt,pt=p*ot,ht=p*it,yt=p*at;y=h;for(var dt=0;dt<f;dt++)y.r=nt,y.g=ot,y.b=it,y.a=at,y=y.next;for(var vt=n,mt=0,bt=0,gt=0,St=0,wt=1;wt<=i;wt++){g=vt+rt<<2;var _t=f-wt;ft+=(y.r=nt=s[g])*_t,pt+=(y.g=ot=s[g+1])*_t,ht+=(y.b=it=s[g+2])*_t,yt+=(y.a=at=s[g+3])*_t,St+=nt,mt+=ot,bt+=it,gt+=at,y=y.next,wt<c&&(vt+=n)}g=rt,v=h,m=a;for(var Ot=0;Ot<o;Ot++){var Et=g<<2;s[Et+3]=at=yt*S>>>w,at>0?(at=255/at,s[Et]=(ft*S>>>w)*at,s[Et+1]=(pt*S>>>w)*at,s[Et+2]=(ht*S>>>w)*at):s[Et]=s[Et+1]=s[Et+2]=0,ft-=st,pt-=ut,ht-=lt,yt-=ct,st-=v.r,ut-=v.g,lt-=v.b,ct-=v.a,Et=rt+((Et=Ot+f)<c?Et:c)*n<<2,ft+=St+=v.r=s[Et],pt+=mt+=v.g=s[Et+1],ht+=bt+=v.b=s[Et+2],yt+=gt+=v.a=s[Et+3],v=v.next,st+=nt=m.r,ut+=ot=m.g,lt+=it=m.b,ct+=at=m.a,St-=nt,mt-=ot,bt-=it,gt-=at,m=m.next,g+=n}}return t}(a,0,0,n,o,i),t.getContext("2d").putImageData(a,e,r)}}var GW=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.r=0,this.g=0,this.b=0,this.a=0,this.next=null};function VW(t){"@babel/helpers - typeof";return(VW="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function zW(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=rK(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){s=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function HW(){return(HW="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=KW(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function qW(t){return function(t){if(Array.isArray(t))return nK(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||rK(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function JW(t,e,r){return e=KW(e),WW(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],KW(t).constructor):e.apply(t,r))}function WW(t,e){if(e&&("object"===VW(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function KW(t){return(KW=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function YW(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&QW(t,e)}function QW(t,e){return(QW=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function XW(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ZW(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,tK(n.key),n)}}function $W(t,e,r){return e&&ZW(t.prototype,e),r&&ZW(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function tK(t){var e=function(t,e){if("object"!=VW(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=VW(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==VW(e)?e:e+""}function eK(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,s=[],u=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(s.push(n.value),s.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(t,e)||rK(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rK(t,e){if(t){if("string"==typeof t)return nK(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?nK(t,e):void 0}}function nK(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function oK(){oK=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),s=new A(n||[]);return o(a,"_invoke",{value:x(t,r,s)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var p="suspendedStart",h="suspendedYield",y="executing",d="completed",v={};function m(){}function b(){}function g(){}var S={};l(S,a,function(){return this});var w=Object.getPrototypeOf,_=w&&w(w(j([])));_&&_!==r&&n.call(_,a)&&(S=_);var O=g.prototype=m.prototype=Object.create(S);function E(t){["next","throw","return"].forEach(function(e){l(t,e,function(t){return this._invoke(e,t)})})}function P(t,e){function r(o,i,a,s){var u=f(t[o],t,i);if("throw"!==u.type){var l=u.arg,c=l.value;return c&&"object"==VW(c)&&n.call(c,"__await")?e.resolve(c.__await).then(function(t){r("next",t,a,s)},function(t){r("throw",t,a,s)}):e.resolve(c).then(function(t){l.value=t,a(l)},function(t){return r("throw",t,a,s)})}s(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e(function(e,o){r(t,n,e,o)})}return i=i?i.then(o,o):o()}})}function x(e,r,n){var o=p;return function(i,a){if(o===y)throw Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var u=T(s,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var l=f(e,r,n);if("normal"===l.type){if(o=n.done?d:h,l.arg===v)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=d,n.method="throw",n.arg=l.arg)}}}function T(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,T(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function A(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function j(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(VW(e)+" is not iterable")}return b.prototype=g,o(O,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=l(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,l(t,u,"GeneratorFunction")),t.prototype=Object.create(O),t},e.awrap=function(t){return{__await:t}},E(P.prototype),l(P.prototype,s,function(){return this}),e.AsyncIterator=P,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new P(c(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next()})},E(O),l(O,u,"Generator"),l(O,a,function(){return this}),l(O,"toString",function(){return"[object Generator]"}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=j,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(k),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),k(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;k(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:j(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function iK(t){return t.replace(/(?!\u3000)\s+/gm," ")}function aK(t){return((t||"").match(/-?(\d+(?:\.\d*(?:[eE][+-]?\d+)?)?|\.\d+)(?=\D|$)/gm)||[]).map(parseFloat)}var sK=/^[A-Z-]+$/;function uK(t){var e=/url\(('([^']+)'|"([^"]+)"|([^'")]+))\)/.exec(t)||[];return e[2]||e[3]||e[4]}var lK=/(\[[^\]]+\])/g,cK=/(#[^\s+>~.[:]+)/g,fK=/(\.[^\s+>~.[:]+)/g,pK=/(::[^\s+>~.[:]+|:first-line|:first-letter|:before|:after)/gi,hK=/(:[\w-]+\([^)]*\))/gi,yK=/(:[^\s+>~.[:]+)/g,dK=/([^\s+>~.[:]+)/g;function vK(t,e){var r=e.exec(t);return r?[t.replace(e," "),r.length]:[t,0]}var mK=1e-8;function bK(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2))}function gK(t,e){return(t[0]*e[0]+t[1]*e[1])/(bK(t)*bK(e))}function SK(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(gK(t,e))}function wK(t){return t*t*t}function _K(t){return 3*t*t*(1-t)}function OK(t){return 3*t*(1-t)*(1-t)}function EK(t){return(1-t)*(1-t)*(1-t)}function PK(t){return t*t}function xK(t){return 2*t*(1-t)}function TK(t){return(1-t)*(1-t)}var CK=function(){function t(e,r,n){XW(this,t),this.document=e,this.name=r,this.value=n,this.isNormalizedColor=!1}return $W(t,[{key:"split",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:" ",r=this.document,n=this.name;return iK(this.getString()).trim().split(e).map(function(e){return new t(r,n,e)})}},{key:"hasValue",value:function(t){var e=this.value;return null!==e&&""!==e&&(t||0!==e)&&void 0!==e}},{key:"isString",value:function(t){var e=this.value,r="string"==typeof e;return r&&t?t.test(e):r}},{key:"isUrlDefinition",value:function(){return this.isString(/^url\(/)}},{key:"isPixels",value:function(){if(!this.hasValue())return!1;var t=this.getString();switch(!0){case t.endsWith("px"):case/^[0-9]+$/.test(t):return!0;default:return!1}}},{key:"setValue",value:function(t){return this.value=t,this}},{key:"getValue",value:function(t){return void 0===t||this.hasValue()?this.value:t}},{key:"getNumber",value:function(t){if(!this.hasValue())return void 0===t?0:parseFloat(t);var e=this.value,r=parseFloat(e);return this.isString(/%$/)&&(r/=100),r}},{key:"getString",value:function(t){return void 0===t||this.hasValue()?void 0===this.value?"":String(this.value):String(t)}},{key:"getColor",value:function(t){var e=this.getString(t);return this.isNormalizedColor?e:(this.isNormalizedColor=!0,e=function(t){if(!t.startsWith("rgb"))return t;var e=3;return t.replace(/\d+(\.\d+)?/g,function(t,r){return e--&&r?String(Math.round(parseFloat(t))):t})}(e),this.value=e,e)}},{key:"getDpi",value:function(){return 96}},{key:"getRem",value:function(){return this.document.rootEmSize}},{key:"getEm",value:function(){return this.document.emSize}},{key:"getUnits",value:function(){return this.getString().replace(/[0-9.-]/g,"")}},{key:"getPixels",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this.hasValue())return 0;var r=eK("boolean"==typeof t?[void 0,t]:[t],2),n=r[0],o=r[1],i=this.document.screen.viewPort;switch(!0){case this.isString(/vmin$/):return this.getNumber()/100*Math.min(i.computeSize("x"),i.computeSize("y"));case this.isString(/vmax$/):return this.getNumber()/100*Math.max(i.computeSize("x"),i.computeSize("y"));case this.isString(/vw$/):return this.getNumber()/100*i.computeSize("x");case this.isString(/vh$/):return this.getNumber()/100*i.computeSize("y");case this.isString(/rem$/):return this.getNumber()*this.getRem();case this.isString(/em$/):return this.getNumber()*this.getEm();case this.isString(/ex$/):return this.getNumber()*this.getEm()/2;case this.isString(/px$/):return this.getNumber();case this.isString(/pt$/):return this.getNumber()*this.getDpi()*(1/72);case this.isString(/pc$/):return 15*this.getNumber();case this.isString(/cm$/):return this.getNumber()*this.getDpi()/2.54;case this.isString(/mm$/):return this.getNumber()*this.getDpi()/25.4;case this.isString(/in$/):return this.getNumber()*this.getDpi();case this.isString(/%$/)&&o:return this.getNumber()*this.getEm();case this.isString(/%$/):return this.getNumber()*i.computeSize(n);default:var a=this.getNumber();return e&&a<1?a*i.computeSize(n):a}}},{key:"getMilliseconds",value:function(){return this.hasValue()?this.isString(/ms$/)?this.getNumber():1e3*this.getNumber():0}},{key:"getRadians",value:function(){if(!this.hasValue())return 0;switch(!0){case this.isString(/deg$/):return this.getNumber()*(Math.PI/180);case this.isString(/grad$/):return this.getNumber()*(Math.PI/200);case this.isString(/rad$/):return this.getNumber();default:return this.getNumber()*(Math.PI/180)}}},{key:"getDefinition",value:function(){var t=this.getString(),e=/#([^)'"]+)/.exec(t);return e&&(e=e[1]),e||(e=t),this.document.definitions[e]}},{key:"getFillStyleDefinition",value:function(t,e){var r=this.getDefinition();if(!r)return null;if("function"==typeof r.createGradient)return r.createGradient(this.document.ctx,t,e);if("function"==typeof r.createPattern){if(r.getHrefAttribute().hasValue()){var n=r.getAttribute("patternTransform");r=r.getHrefAttribute().getDefinition(),n.hasValue()&&r.getAttribute("patternTransform",!0).setValue(n.value)}return r.createPattern(this.document.ctx,t,e)}return null}},{key:"getTextBaseline",value:function(){return this.hasValue()?t.textBaselineMapping[this.getString()]:null}},{key:"addOpacity",value:function(e){for(var r=this.getColor(),n=r.length,o=0,i=0;i<n&&(","===r[i]&&o++,3!==o);i++);if(e.hasValue()&&this.isString()&&3!==o){var a=new yW(r);a.ok&&(a.alpha=e.getNumber(),r=a.toRGBA())}return new t(this.document,this.name,r)}}],[{key:"empty",value:function(e){return new t(e,"EMPTY","")}}])}();CK.textBaselineMapping={baseline:"alphabetic","before-edge":"top","text-before-edge":"top",middle:"middle",central:"middle","after-edge":"bottom","text-after-edge":"bottom",ideographic:"ideographic",alphabetic:"alphabetic",hanging:"hanging",mathematical:"alphabetic"};var kK=function(){return $W(function t(){XW(this,t),this.viewPorts=[]},[{key:"clear",value:function(){this.viewPorts=[]}},{key:"setCurrent",value:function(t,e){this.viewPorts.push({width:t,height:e})}},{key:"removeCurrent",value:function(){this.viewPorts.pop()}},{key:"getCurrent",value:function(){var t=this.viewPorts;return t[t.length-1]}},{key:"width",get:function(){return this.getCurrent().width}},{key:"height",get:function(){return this.getCurrent().height}},{key:"computeSize",value:function(t){return"number"==typeof t?t:"x"===t?this.width:"y"===t?this.height:Math.sqrt(Math.pow(this.width,2)+Math.pow(this.height,2))/Math.sqrt(2)}}])}(),AK=function(){function t(e,r){XW(this,t),this.x=e,this.y=r}return $W(t,[{key:"angleTo",value:function(t){return Math.atan2(t.y-this.y,t.x-this.x)}},{key:"applyTransform",value:function(t){var e=this.x,r=this.y,n=e*t[0]+r*t[2]+t[4],o=e*t[1]+r*t[3]+t[5];this.x=n,this.y=o}}],[{key:"parse",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=eK(aK(e),2),o=n[0],i=void 0===o?r:o,a=n[1];return new t(i,void 0===a?r:a)}},{key:"parseScale",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=eK(aK(e),2),o=n[0],i=void 0===o?r:o,a=n[1];return new t(i,void 0===a?i:a)}},{key:"parsePath",value:function(e){for(var r=aK(e),n=r.length,o=[],i=0;i<n;i+=2)o.push(new t(r[i],r[i+1]));return o}}])}(),jK=function(){return $W(function t(e){XW(this,t),this.screen=e,this.working=!1,this.events=[],this.eventElements=[],this.onClick=this.onClick.bind(this),this.onMouseMove=this.onMouseMove.bind(this)},[{key:"isWorking",value:function(){return this.working}},{key:"start",value:function(){if(!this.working){var t=this.screen,e=this.onClick,r=this.onMouseMove,n=t.ctx.canvas;n.onclick=e,n.onmousemove=r,this.working=!0}}},{key:"stop",value:function(){if(this.working){var t=this.screen.ctx.canvas;this.working=!1,t.onclick=null,t.onmousemove=null}}},{key:"hasEvents",value:function(){return this.working&&this.events.length>0}},{key:"runEvents",value:function(){if(this.working){var t=this.screen,e=this.events,r=this.eventElements,n=t.ctx.canvas.style;n&&(n.cursor=""),e.forEach(function(t,e){for(var n=t.run,o=r[e];o;)n(o),o=o.parent}),this.events=[],this.eventElements=[]}}},{key:"checkPath",value:function(t,e){if(this.working&&e){var r=this.events,n=this.eventElements;r.forEach(function(r,o){var i=r.x,a=r.y;!n[o]&&e.isPointInPath&&e.isPointInPath(i,a)&&(n[o]=t)})}}},{key:"checkBoundingBox",value:function(t,e){if(this.working&&e){var r=this.events,n=this.eventElements;r.forEach(function(r,o){var i=r.x,a=r.y;!n[o]&&e.isPointInBox(i,a)&&(n[o]=t)})}}},{key:"mapXY",value:function(t,e){for(var r=this.screen,n=r.window,o=r.ctx,i=new AK(t,e),a=o.canvas;a;)i.x-=a.offsetLeft,i.y-=a.offsetTop,a=a.offsetParent;return n.scrollX&&(i.x+=n.scrollX),n.scrollY&&(i.y+=n.scrollY),i}},{key:"onClick",value:function(t){var e=this.mapXY(t.clientX,t.clientY),r=e.x,n=e.y;this.events.push({type:"onclick",x:r,y:n,run:function(t){t.onClick&&t.onClick()}})}},{key:"onMouseMove",value:function(t){var e=this.mapXY(t.clientX,t.clientY),r=e.x,n=e.y;this.events.push({type:"onmousemove",x:r,y:n,run:function(t){t.onMouseMove&&t.onMouseMove()}})}}])}(),NK="undefined"!=typeof window?window:null,IK="undefined"!=typeof fetch?fetch.bind(void 0):null,MK=function(){return $W(function t(e){XW(this,t);var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.fetch,o=void 0===n?IK:n,i=r.window,a=void 0===i?NK:i;this.ctx=e,this.FRAMERATE=30,this.MAX_VIRTUAL_PIXELS=3e4,this.CLIENT_WIDTH=800,this.CLIENT_HEIGHT=600,this.viewPort=new kK,this.mouse=new jK(this),this.animations=[],this.waits=[],this.frameDuration=0,this.isReadyLock=!1,this.isFirstRender=!0,this.intervalId=null,this.window=a,this.fetch=o},[{key:"wait",value:function(t){this.waits.push(t)}},{key:"ready",value:function(){return this.readyPromise?this.readyPromise:Promise.resolve()}},{key:"isReady",value:function(){if(this.isReadyLock)return!0;var t=this.waits.every(function(t){return t()});return t&&(this.waits=[],this.resolveReady&&this.resolveReady()),this.isReadyLock=t,t}},{key:"setDefaults",value:function(t){t.strokeStyle="rgba(0,0,0,0)",t.lineCap="butt",t.lineJoin="miter",t.miterLimit=4}},{key:"setViewBox",value:function(t){var e=t.document,r=t.ctx,n=t.aspectRatio,o=t.width,i=t.desiredWidth,a=t.height,s=t.desiredHeight,u=t.minX,l=void 0===u?0:u,c=t.minY,f=void 0===c?0:c,p=t.refX,h=t.refY,y=t.clip,d=void 0!==y&&y,v=t.clipX,m=void 0===v?0:v,b=t.clipY,g=void 0===b?0:b,S=eK(iK(n).replace(/^defer\s/,"").split(" "),2),w=S[0],_=S[1],O=w||"xMidYMid",E=_||"meet",P=o/i,x=a/s,T=Math.min(P,x),C=Math.max(P,x),k=i,A=s;"meet"===E&&(k*=T,A*=T),"slice"===E&&(k*=C,A*=C);var j=new CK(e,"refX",p),N=new CK(e,"refY",h),I=j.hasValue()&&N.hasValue();if(I&&r.translate(-T*j.getPixels("x"),-T*N.getPixels("y")),d){var M=T*m,R=T*g;r.beginPath(),r.moveTo(M,R),r.lineTo(o,R),r.lineTo(o,a),r.lineTo(M,a),r.closePath(),r.clip()}if(!I){var L="meet"===E&&T===x,D="slice"===E&&C===x,B="meet"===E&&T===P,F="slice"===E&&C===P;O.startsWith("xMid")&&(L||D)&&r.translate(o/2-k/2,0),O.endsWith("YMid")&&(B||F)&&r.translate(0,a/2-A/2),O.startsWith("xMax")&&(L||D)&&r.translate(o-k,0),O.endsWith("YMax")&&(B||F)&&r.translate(0,a-A)}switch(!0){case"none"===O:r.scale(P,x);break;case"meet"===E:r.scale(T,T);break;case"slice"===E:r.scale(C,C)}r.translate(-l,-f)}},{key:"start",value:function(t){var e=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.enableRedraw,o=void 0!==n&&n,i=r.ignoreMouse,a=void 0!==i&&i,s=r.ignoreAnimation,u=void 0!==s&&s,l=r.ignoreDimensions,c=void 0!==l&&l,f=r.ignoreClear,p=void 0!==f&&f,h=r.forceRedraw,y=r.scaleWidth,d=r.scaleHeight,v=r.offsetX,m=r.offsetY,b=this.FRAMERATE,g=this.mouse,S=1e3/b;if(this.frameDuration=S,this.readyPromise=new Promise(function(t){e.resolveReady=t}),this.isReady()&&this.render(t,c,p,y,d,v,m),o){var w=Date.now(),_=w,O=0;a||g.start(),this.intervalId=hW(function r(){w=Date.now(),(O=w-_)>=S&&(_=w-O%S,e.shouldUpdate(u,h)&&(e.render(t,c,p,y,d,v,m),g.runEvents())),e.intervalId=hW(r)})}}},{key:"stop",value:function(){this.intervalId&&(hW.cancel(this.intervalId),this.intervalId=null),this.mouse.stop()}},{key:"shouldUpdate",value:function(t,e){if(!t){var r=this.frameDuration,n=this.animations.reduce(function(t,e){return e.update(r)||t},!1);if(n)return!0}return!("function"!=typeof e||!e())||(!(this.isReadyLock||!this.isReady())||!!this.mouse.hasEvents())}},{key:"render",value:function(t,e,r,n,o,i,a){var s=this.CLIENT_WIDTH,u=this.CLIENT_HEIGHT,l=this.viewPort,c=this.ctx,f=this.isFirstRender,p=c.canvas;l.clear(),p.width&&p.height?l.setCurrent(p.width,p.height):l.setCurrent(s,u);var h=t.getStyle("width"),y=t.getStyle("height");!e&&(f||"number"!=typeof n&&"number"!=typeof o)&&(h.hasValue()&&(p.width=h.getPixels("x"),p.style&&(p.style.width="".concat(p.width,"px"))),y.hasValue()&&(p.height=y.getPixels("y"),p.style&&(p.style.height="".concat(p.height,"px"))));var d=p.clientWidth||p.width,v=p.clientHeight||p.height;if(e&&h.hasValue()&&y.hasValue()&&(d=h.getPixels("x"),v=y.getPixels("y")),l.setCurrent(d,v),"number"==typeof i&&t.getAttribute("x",!0).setValue(i),"number"==typeof a&&t.getAttribute("y",!0).setValue(a),"number"==typeof n||"number"==typeof o){var m=aK(t.getAttribute("viewBox").getString()),b=0,g=0;if("number"==typeof n){var S=t.getStyle("width");S.hasValue()?b=S.getPixels("x")/n:isNaN(m[2])||(b=m[2]/n)}if("number"==typeof o){var w=t.getStyle("height");w.hasValue()?g=w.getPixels("y")/o:isNaN(m[3])||(g=m[3]/o)}b||(b=g),g||(g=b),t.getAttribute("width",!0).setValue(n),t.getAttribute("height",!0).setValue(o);var _=t.getStyle("transform",!0,!0);_.setValue("".concat(_.getString()," scale(").concat(1/b,", ").concat(1/g,")"))}r||c.clearRect(0,0,d,v),t.render(c),f&&(this.isFirstRender=!1)}}])}();MK.defaultWindow=NK,MK.defaultFetch=IK;var RK=MK.defaultFetch,LK="undefined"!=typeof DOMParser?DOMParser:null,DK=function(){return $W(function t(){XW(this,t);var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.fetch,n=void 0===r?RK:r,o=e.DOMParser,i=void 0===o?LK:o;this.fetch=n,this.DOMParser=i},[{key:"parse",value:function(t){var e=this;return lW(oK().mark(function r(){return oK().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(!t.startsWith("<")){r.next=2;break}return r.abrupt("return",e.parseFromString(t));case 2:return r.abrupt("return",e.load(t));case 3:case"end":return r.stop()}},r)}))()}},{key:"parseFromString",value:function(t){var e=new this.DOMParser;try{return this.checkDocument(e.parseFromString(t,"image/svg+xml"))}catch(r){return this.checkDocument(e.parseFromString(t,"text/xml"))}}},{key:"checkDocument",value:function(t){var e=t.getElementsByTagName("parsererror")[0];if(e)throw new Error(e.textContent);return t}},{key:"load",value:function(t){var e=this;return lW(oK().mark(function r(){var n,o;return oK().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,e.fetch(t);case 2:return n=r.sent,r.next=5,n.text();case 5:return o=r.sent,r.abrupt("return",e.parseFromString(o));case 7:case"end":return r.stop()}},r)}))()}}])}(),BK=function(){return $W(function t(e,r){XW(this,t),this.type="translate",this.point=null,this.point=AK.parse(r)},[{key:"apply",value:function(t){var e=this.point,r=e.x,n=e.y;t.translate(r||0,n||0)}},{key:"unapply",value:function(t){var e=this.point,r=e.x,n=e.y;t.translate(-1*r||0,-1*n||0)}},{key:"applyToPoint",value:function(t){var e=this.point,r=e.x,n=e.y;t.applyTransform([1,0,0,1,r||0,n||0])}}])}(),FK=function(){return $W(function t(e,r,n){XW(this,t),this.type="rotate",this.angle=null,this.originX=null,this.originY=null,this.cx=0,this.cy=0;var o=aK(r);this.angle=new CK(e,"angle",o[0]),this.originX=n[0],this.originY=n[1],this.cx=o[1]||0,this.cy=o[2]||0},[{key:"apply",value:function(t){var e=this.cx,r=this.cy,n=this.originX,o=this.originY,i=this.angle,a=e+n.getPixels("x"),s=r+o.getPixels("y");t.translate(a,s),t.rotate(i.getRadians()),t.translate(-a,-s)}},{key:"unapply",value:function(t){var e=this.cx,r=this.cy,n=this.originX,o=this.originY,i=this.angle,a=e+n.getPixels("x"),s=r+o.getPixels("y");t.translate(a,s),t.rotate(-1*i.getRadians()),t.translate(-a,-s)}},{key:"applyToPoint",value:function(t){var e=this.cx,r=this.cy,n=this.angle.getRadians();t.applyTransform([1,0,0,1,e||0,r||0]),t.applyTransform([Math.cos(n),Math.sin(n),-Math.sin(n),Math.cos(n),0,0]),t.applyTransform([1,0,0,1,-e||0,-r||0])}}])}(),UK=function(){return $W(function t(e,r,n){XW(this,t),this.type="scale",this.scale=null,this.originX=null,this.originY=null;var o=AK.parseScale(r);0!==o.x&&0!==o.y||(o.x=mK,o.y=mK),this.scale=o,this.originX=n[0],this.originY=n[1]},[{key:"apply",value:function(t){var e=this.scale,r=e.x,n=e.y,o=this.originX,i=this.originY,a=o.getPixels("x"),s=i.getPixels("y");t.translate(a,s),t.scale(r,n||r),t.translate(-a,-s)}},{key:"unapply",value:function(t){var e=this.scale,r=e.x,n=e.y,o=this.originX,i=this.originY,a=o.getPixels("x"),s=i.getPixels("y");t.translate(a,s),t.scale(1/r,1/n||r),t.translate(-a,-s)}},{key:"applyToPoint",value:function(t){var e=this.scale,r=e.x,n=e.y;t.applyTransform([r||0,0,0,n||0,0,0])}}])}(),GK=function(){return $W(function t(e,r,n){XW(this,t),this.type="matrix",this.matrix=[],this.originX=null,this.originY=null,this.matrix=aK(r),this.originX=n[0],this.originY=n[1]},[{key:"apply",value:function(t){var e=this.originX,r=this.originY,n=this.matrix,o=e.getPixels("x"),i=r.getPixels("y");t.translate(o,i),t.transform(n[0],n[1],n[2],n[3],n[4],n[5]),t.translate(-o,-i)}},{key:"unapply",value:function(t){var e=this.originX,r=this.originY,n=this.matrix,o=n[0],i=n[2],a=n[4],s=n[1],u=n[3],l=n[5],c=1/(o*(1*u-0*l)-i*(1*s-0*l)+a*(0*s-0*u)),f=e.getPixels("x"),p=r.getPixels("y");t.translate(f,p),t.transform(c*(1*u-0*l),c*(0*l-1*s),c*(0*a-1*i),c*(1*o-0*a),c*(i*l-a*u),c*(a*s-o*l)),t.translate(-f,-p)}},{key:"applyToPoint",value:function(t){t.applyTransform(this.matrix)}}])}(),VK=function(t){function e(t,r,n){var o;return XW(this,e),(o=JW(this,e,[t,r,n])).type="skew",o.angle=null,o.angle=new CK(t,"angle",r),o}return YW(e,GK),$W(e)}(),zK=function(t){function e(t,r,n){var o;return XW(this,e),(o=JW(this,e,[t,r,n])).type="skewX",o.matrix=[1,0,Math.tan(o.angle.getRadians()),1,0,0],o}return YW(e,VK),$W(e)}(),HK=function(t){function e(t,r,n){var o;return XW(this,e),(o=JW(this,e,[t,r,n])).type="skewY",o.matrix=[1,Math.tan(o.angle.getRadians()),0,1,0,0],o}return YW(e,VK),$W(e)}();var qK=function(){function t(e,r,n){var o=this;XW(this,t),this.document=e,this.transforms=[],function(t){return iK(t).trim().replace(/\)([a-zA-Z])/g,") $1").replace(/\)(\s?,\s?)/g,") ").split(/\s(?=[a-z])/)}(r).forEach(function(e){if("none"!==e){var r=eK(function(t){var e=eK(t.split("("),2),r=e[0],n=e[1];return[r.trim(),n.trim().replace(")","")]}(e),2),i=r[0],a=r[1],s=t.transformTypes[i];void 0!==s&&o.transforms.push(new s(o.document,a,n))}})}return $W(t,[{key:"apply",value:function(t){for(var e=this.transforms,r=e.length,n=0;n<r;n++)e[n].apply(t)}},{key:"unapply",value:function(t){for(var e=this.transforms,r=e.length-1;r>=0;r--)e[r].unapply(t)}},{key:"applyToPoint",value:function(t){for(var e=this.transforms,r=e.length,n=0;n<r;n++)e[n].applyToPoint(t)}}],[{key:"fromElement",value:function(e,r){var n=r.getStyle("transform",!1,!0),o=eK(r.getStyle("transform-origin",!1,!0).split(),2),i=o[0],a=o[1],s=[i,void 0===a?i:a];return n.hasValue()?new t(e,n.getString(),s):null}}])}();qK.transformTypes={translate:BK,rotate:FK,scale:UK,matrix:GK,skewX:zK,skewY:HK};var JK=function(){function t(e,r){var n=this;XW(this,t);var o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(this.document=e,this.node=r,this.captureTextNodes=o,this.attributes={},this.styles={},this.stylesSpecificity={},this.animationFrozen=!1,this.animationFrozenValue="",this.parent=null,this.children=[],r&&1===r.nodeType){if(Array.from(r.attributes).forEach(function(t){var r,o=(r=t.nodeName,sK.test(r)?r.toLowerCase():r);n.attributes[o]=new CK(e,o,t.value)}),this.addStylesFromStyleDefinition(),this.getAttribute("style").hasValue())this.getAttribute("style").getString().split(";").map(function(t){return t.trim()}).forEach(function(t){if(t){var r=eK(t.split(":").map(function(t){return t.trim()}),2),o=r[0],i=r[1];n.styles[o]=new CK(e,o,i)}});var i=e.definitions,a=this.getAttribute("id");a.hasValue()&&(i[a.getString()]||(i[a.getString()]=this)),Array.from(r.childNodes).forEach(function(t){if(1===t.nodeType)n.addChild(t);else if(o&&(3===t.nodeType||4===t.nodeType)){var r=e.createTextNode(t);r.getText().length>0&&n.addChild(r)}})}}return $W(t,[{key:"getAttribute",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=this.attributes[t];if(!r&&e){var n=new CK(this.document,t,"");return this.attributes[t]=n,n}return r||CK.empty(this.document)}},{key:"getHrefAttribute",value:function(){for(var t in this.attributes)if("href"===t||t.endsWith(":href"))return this.attributes[t];return CK.empty(this.document)}},{key:"getStyle",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=this.styles[t];if(n)return n;var o=this.getAttribute(t);if(null!==o&&void 0!==o&&o.hasValue())return this.styles[t]=o,o;if(!r){var i=this.parent;if(i){var a=i.getStyle(t);if(null!==a&&void 0!==a&&a.hasValue())return a}}if(e){var s=new CK(this.document,t,"");return this.styles[t]=s,s}return n||CK.empty(this.document)}},{key:"render",value:function(t){if("none"!==this.getStyle("display").getString()&&"hidden"!==this.getStyle("visibility").getString()){if(t.save(),this.getStyle("mask").hasValue()){var e=this.getStyle("mask").getDefinition();e&&(this.applyEffects(t),e.apply(t,this))}else if("none"!==this.getStyle("filter").getValue("none")){var r=this.getStyle("filter").getDefinition();r&&(this.applyEffects(t),r.apply(t,this))}else this.setContext(t),this.renderChildren(t),this.clearContext(t);t.restore()}}},{key:"setContext",value:function(t){}},{key:"applyEffects",value:function(t){var e=qK.fromElement(this.document,this);e&&e.apply(t);var r=this.getStyle("clip-path",!1,!0);if(r.hasValue()){var n=r.getDefinition();n&&n.apply(t)}}},{key:"clearContext",value:function(t){}},{key:"renderChildren",value:function(t){this.children.forEach(function(e){e.render(t)})}},{key:"addChild",value:function(e){var r=e instanceof t?e:this.document.createElement(e);r.parent=this,t.ignoreChildTypes.includes(r.type)||this.children.push(r)}},{key:"matchesSelector",value:function(t){var e,r=this.node;if("function"==typeof r.matches)return r.matches(t);var n=null===(e=r.getAttribute)||void 0===e?void 0:e.call(r,"class");return!(!n||""===n)&&n.split(" ").some(function(e){return".".concat(e)===t})}},{key:"addStylesFromStyleDefinition",value:function(){var t=this.document,e=t.styles,r=t.stylesSpecificity;for(var n in e)if(!n.startsWith("@")&&this.matchesSelector(n)){var o=e[n],i=r[n];if(o)for(var a in o){var s=this.stylesSpecificity[a];void 0===s&&(s="000"),i>=s&&(this.styles[a]=o[a],this.stylesSpecificity[a]=i)}}}},{key:"removeStyles",value:function(t,e){return e.reduce(function(e,r){var n=t.getStyle(r);if(!n.hasValue())return e;var o=n.getString();return n.setValue(""),[].concat(qW(e),[[r,o]])},[])}},{key:"restoreStyles",value:function(t,e){e.forEach(function(e){var r=eK(e,2),n=r[0],o=r[1];t.getStyle(n,!0).setValue(o)})}},{key:"isFirstChild",value:function(){var t;return 0===(null===(t=this.parent)||void 0===t?void 0:t.children.indexOf(this))}}])}();JK.ignoreChildTypes=["title"];var WK=function(t){function e(t,r,n){return XW(this,e),JW(this,e,[t,r,n])}return YW(e,JK),$W(e)}();function KK(t){var e=t.trim();return/^('|")/.test(e)?e:'"'.concat(e,'"')}var YK=function(){function t(e,r,n,o,i,a){XW(this,t);var s=a?"string"==typeof a?t.parse(a):a:{};this.fontFamily=i||s.fontFamily,this.fontSize=o||s.fontSize,this.fontStyle=e||s.fontStyle,this.fontWeight=n||s.fontWeight,this.fontVariant=r||s.fontVariant}return $W(t,[{key:"toString",value:function(){return[function(t){if(!t)return"";var e=t.trim().toLowerCase();switch(e){case"normal":case"italic":case"oblique":case"inherit":case"initial":case"unset":return e;default:return/^oblique\s+(-|)\d+deg$/.test(e)?e:""}}(this.fontStyle),this.fontVariant,function(t){if(!t)return"";var e=t.trim().toLowerCase();switch(e){case"normal":case"bold":case"lighter":case"bolder":case"inherit":case"initial":case"unset":return e;default:return/^[\d.]+$/.test(e)?e:""}}(this.fontWeight),this.fontSize,(t=this.fontFamily,"undefined"==typeof process?t:t.trim().split(",").map(KK).join(","))].join(" ").trim();var t}}],[{key:"parse",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1?arguments[1]:void 0,n="",o="",i="",a="",s="",u={fontSize:!1,fontStyle:!1,fontWeight:!1,fontVariant:!1};return iK(e).trim().split(" ").forEach(function(e){switch(!0){case!u.fontStyle&&t.styles.includes(e):"inherit"!==e&&(n=e),u.fontStyle=!0;break;case!u.fontVariant&&t.variants.includes(e):"inherit"!==e&&(o=e),u.fontStyle=!0,u.fontVariant=!0;break;case!u.fontWeight&&t.weights.includes(e):"inherit"!==e&&(i=e),u.fontStyle=!0,u.fontVariant=!0,u.fontWeight=!0;break;case!u.fontSize:if("inherit"!==e){var r=eK(e.split("/"),1);a=r[0]}u.fontStyle=!0,u.fontVariant=!0,u.fontWeight=!0,u.fontSize=!0;break;default:"inherit"!==e&&(s+=e)}}),new t(n,o,i,a,s,r)}}])}();YK.styles="normal|italic|oblique|inherit",YK.variants="normal|small-caps|inherit",YK.weights="normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900|inherit";var QK=function(){return $W(function t(){XW(this,t);var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Number.NaN,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.NaN,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.NaN,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Number.NaN;this.x1=e,this.y1=r,this.x2=n,this.y2=o,this.addPoint(e,r),this.addPoint(n,o)},[{key:"x",get:function(){return this.x1}},{key:"y",get:function(){return this.y1}},{key:"width",get:function(){return this.x2-this.x1}},{key:"height",get:function(){return this.y2-this.y1}},{key:"addPoint",value:function(t,e){void 0!==t&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=t,this.x2=t),t<this.x1&&(this.x1=t),t>this.x2&&(this.x2=t)),void 0!==e&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=e,this.y2=e),e<this.y1&&(this.y1=e),e>this.y2&&(this.y2=e))}},{key:"addX",value:function(t){this.addPoint(t,null)}},{key:"addY",value:function(t){this.addPoint(null,t)}},{key:"addBoundingBox",value:function(t){if(t){var e=t.x1,r=t.y1,n=t.x2,o=t.y2;this.addPoint(e,r),this.addPoint(n,o)}}},{key:"sumCubic",value:function(t,e,r,n,o){return Math.pow(1-t,3)*e+3*Math.pow(1-t,2)*t*r+3*(1-t)*Math.pow(t,2)*n+Math.pow(t,3)*o}},{key:"bezierCurveAdd",value:function(t,e,r,n,o){var i=6*e-12*r+6*n,a=-3*e+9*r-9*n+3*o,s=3*r-3*e;if(0!==a){var u=Math.pow(i,2)-4*s*a;if(!(u<0)){var l=(-i+Math.sqrt(u))/(2*a);0<l&&l<1&&(t?this.addX(this.sumCubic(l,e,r,n,o)):this.addY(this.sumCubic(l,e,r,n,o)));var c=(-i-Math.sqrt(u))/(2*a);0<c&&c<1&&(t?this.addX(this.sumCubic(c,e,r,n,o)):this.addY(this.sumCubic(c,e,r,n,o)))}}else{if(0===i)return;var f=-s/i;0<f&&f<1&&(t?this.addX(this.sumCubic(f,e,r,n,o)):this.addY(this.sumCubic(f,e,r,n,o)))}}},{key:"addBezierCurve",value:function(t,e,r,n,o,i,a,s){this.addPoint(t,e),this.addPoint(a,s),this.bezierCurveAdd(!0,t,r,o,a),this.bezierCurveAdd(!1,e,n,i,s)}},{key:"addQuadraticCurve",value:function(t,e,r,n,o,i){var a=t+2/3*(r-t),s=e+2/3*(n-e),u=a+1/3*(o-t),l=s+1/3*(i-e);this.addBezierCurve(t,e,a,u,s,l,o,i)}},{key:"isPointInBox",value:function(t,e){var r=this.x1,n=this.y1,o=this.x2,i=this.y2;return r<=t&&t<=o&&n<=e&&e<=i}}])}(),XK=function(t){function e(t){var r;return XW(this,e),(r=JW(this,e,[t.replace(/([+\-.])\s+/gm,"$1").replace(/[^MmZzLlHhVvCcSsQqTtAae\d\s.,+-].*/g,"")])).control=null,r.start=null,r.current=null,r.command=null,r.commands=r.commands,r.i=-1,r.previousCommand=null,r.points=[],r.angles=[],r}return YW(e,MW),$W(e,[{key:"reset",value:function(){this.i=-1,this.command=null,this.previousCommand=null,this.start=new AK(0,0),this.control=new AK(0,0),this.current=new AK(0,0),this.points=[],this.angles=[]}},{key:"isEnd",value:function(){return this.i>=this.commands.length-1}},{key:"next",value:function(){var t=this.commands[++this.i];return this.previousCommand=this.command,this.command=t,t}},{key:"getPoint",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"x",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"y",r=new AK(this.command[t],this.command[e]);return this.makeAbsolute(r)}},{key:"getAsControlPoint",value:function(t,e){var r=this.getPoint(t,e);return this.control=r,r}},{key:"getAsCurrentPoint",value:function(t,e){var r=this.getPoint(t,e);return this.current=r,r}},{key:"getReflectedControlPoint",value:function(){var t=this.previousCommand.type;if(t!==MW.CURVE_TO&&t!==MW.SMOOTH_CURVE_TO&&t!==MW.QUAD_TO&&t!==MW.SMOOTH_QUAD_TO)return this.current;var e=this.current,r=e.x,n=e.y,o=this.control,i=o.x,a=o.y;return new AK(2*r-i,2*n-a)}},{key:"makeAbsolute",value:function(t){if(this.command.relative){var e=this.current,r=e.x,n=e.y;t.x+=r,t.y+=n}return t}},{key:"addMarker",value:function(t,e,r){var n=this.points,o=this.angles;r&&o.length>0&&!o[o.length-1]&&(o[o.length-1]=n[n.length-1].angleTo(r)),this.addMarkerAngle(t,e?e.angleTo(t):null)}},{key:"addMarkerAngle",value:function(t,e){this.points.push(t),this.angles.push(e)}},{key:"getMarkerPoints",value:function(){return this.points}},{key:"getMarkerAngles",value:function(){for(var t=this.angles,e=t.length,r=0;r<e;r++)if(!t[r])for(var n=r+1;n<e;n++)if(t[n]){t[r]=t[n];break}return t}}])}(),ZK=function(t){function e(){var t;return XW(this,e),(t=JW(this,e,arguments)).modifiedEmSizeStack=!1,t}return YW(e,JK),$W(e,[{key:"calculateOpacity",value:function(){for(var t=1,e=this;e;){var r=e.getStyle("opacity",!1,!0);r.hasValue(!0)&&(t*=r.getNumber()),e=e.parent}return t}},{key:"setContext",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e){var r=this.getStyle("fill"),n=this.getStyle("fill-opacity"),o=this.getStyle("stroke"),i=this.getStyle("stroke-opacity");if(r.isUrlDefinition()){var a=r.getFillStyleDefinition(this,n);a&&(t.fillStyle=a)}else if(r.hasValue()){"currentColor"===r.getString()&&r.setValue(this.getStyle("color").getColor());var s=r.getColor();"inherit"!==s&&(t.fillStyle="none"===s?"rgba(0,0,0,0)":s)}if(n.hasValue()){var u=new CK(this.document,"fill",t.fillStyle).addOpacity(n).getColor();t.fillStyle=u}if(o.isUrlDefinition()){var l=o.getFillStyleDefinition(this,i);l&&(t.strokeStyle=l)}else if(o.hasValue()){"currentColor"===o.getString()&&o.setValue(this.getStyle("color").getColor());var c=o.getString();"inherit"!==c&&(t.strokeStyle="none"===c?"rgba(0,0,0,0)":c)}if(i.hasValue()){var f=new CK(this.document,"stroke",t.strokeStyle).addOpacity(i).getString();t.strokeStyle=f}var p=this.getStyle("stroke-width");if(p.hasValue()){var h=p.getPixels();t.lineWidth=h||mK}var y=this.getStyle("stroke-linecap"),d=this.getStyle("stroke-linejoin"),v=this.getStyle("stroke-miterlimit"),m=this.getStyle("stroke-dasharray"),b=this.getStyle("stroke-dashoffset");if(y.hasValue()&&(t.lineCap=y.getString()),d.hasValue()&&(t.lineJoin=d.getString()),v.hasValue()&&(t.miterLimit=v.getNumber()),m.hasValue()&&"none"!==m.getString()){var g=aK(m.getString());void 0!==t.setLineDash?t.setLineDash(g):void 0!==t.webkitLineDash?t.webkitLineDash=g:void 0===t.mozDash||1===g.length&&0===g[0]||(t.mozDash=g);var S=b.getPixels();void 0!==t.lineDashOffset?t.lineDashOffset=S:void 0!==t.webkitLineDashOffset?t.webkitLineDashOffset=S:void 0!==t.mozDashOffset&&(t.mozDashOffset=S)}}if(this.modifiedEmSizeStack=!1,void 0!==t.font){var w=this.getStyle("font"),_=this.getStyle("font-style"),O=this.getStyle("font-variant"),E=this.getStyle("font-weight"),P=this.getStyle("font-size"),x=this.getStyle("font-family"),T=new YK(_.getString(),O.getString(),E.getString(),P.hasValue()?"".concat(P.getPixels(!0),"px"):"",x.getString(),YK.parse(w.getString(),t.font));_.setValue(T.fontStyle),O.setValue(T.fontVariant),E.setValue(T.fontWeight),P.setValue(T.fontSize),x.setValue(T.fontFamily),t.font=T.toString(),P.isPixels()&&(this.document.emSize=P.getPixels(),this.modifiedEmSizeStack=!0)}e||(this.applyEffects(t),t.globalAlpha=this.calculateOpacity())}},{key:"clearContext",value:function(t){HW(KW(e.prototype),"clearContext",this).call(this,t),this.modifiedEmSizeStack&&this.document.popEmSize()}}])}(),$K=function(t){function e(t,r,n){var o;return XW(this,e),(o=JW(this,e,[t,r,n])).type="path",o.pathParser=null,o.pathParser=new XK(o.getAttribute("d").getString()),o}return YW(e,ZK),$W(e,[{key:"path",value:function(t){var e=this.pathParser,r=new QK;for(e.reset(),t&&t.beginPath();!e.isEnd();)switch(e.next().type){case XK.MOVE_TO:this.pathM(t,r);break;case XK.LINE_TO:this.pathL(t,r);break;case XK.HORIZ_LINE_TO:this.pathH(t,r);break;case XK.VERT_LINE_TO:this.pathV(t,r);break;case XK.CURVE_TO:this.pathC(t,r);break;case XK.SMOOTH_CURVE_TO:this.pathS(t,r);break;case XK.QUAD_TO:this.pathQ(t,r);break;case XK.SMOOTH_QUAD_TO:this.pathT(t,r);break;case XK.ARC:this.pathA(t,r);break;case XK.CLOSE_PATH:this.pathZ(t,r)}return r}},{key:"getBoundingBox",value:function(t){return this.path()}},{key:"getMarkers",value:function(){var t=this.pathParser,e=t.getMarkerPoints(),r=t.getMarkerAngles();return e.map(function(t,e){return[t,r[e]]})}},{key:"renderChildren",value:function(t){this.path(t),this.document.screen.mouse.checkPath(this,t);var e=this.getStyle("fill-rule");""!==t.fillStyle&&("inherit"!==e.getString("inherit")?t.fill(e.getString()):t.fill()),""!==t.strokeStyle&&("non-scaling-stroke"===this.getAttribute("vector-effect").getString()?(t.save(),t.setTransform(1,0,0,1,0,0),t.stroke(),t.restore()):t.stroke());var r=this.getMarkers();if(r){var n=r.length-1,o=this.getStyle("marker-start"),i=this.getStyle("marker-mid"),a=this.getStyle("marker-end");if(o.isUrlDefinition()){var s=o.getDefinition(),u=eK(r[0],2),l=u[0],c=u[1];s.render(t,l,c)}if(i.isUrlDefinition())for(var f=i.getDefinition(),p=1;p<n;p++){var h=eK(r[p],2),y=h[0],d=h[1];f.render(t,y,d)}if(a.isUrlDefinition()){var v=a.getDefinition(),m=eK(r[n],2),b=m[0],g=m[1];v.render(t,b,g)}}}},{key:"pathM",value:function(t,r){var n=this.pathParser,o=e.pathM(n).point,i=o.x,a=o.y;n.addMarker(o),r.addPoint(i,a),t&&t.moveTo(i,a)}},{key:"pathL",value:function(t,r){var n=this.pathParser,o=e.pathL(n),i=o.current,a=o.point,s=a.x,u=a.y;n.addMarker(a,i),r.addPoint(s,u),t&&t.lineTo(s,u)}},{key:"pathH",value:function(t,r){var n=this.pathParser,o=e.pathH(n),i=o.current,a=o.point,s=a.x,u=a.y;n.addMarker(a,i),r.addPoint(s,u),t&&t.lineTo(s,u)}},{key:"pathV",value:function(t,r){var n=this.pathParser,o=e.pathV(n),i=o.current,a=o.point,s=a.x,u=a.y;n.addMarker(a,i),r.addPoint(s,u),t&&t.lineTo(s,u)}},{key:"pathC",value:function(t,r){var n=this.pathParser,o=e.pathC(n),i=o.current,a=o.point,s=o.controlPoint,u=o.currentPoint;n.addMarker(u,s,a),r.addBezierCurve(i.x,i.y,a.x,a.y,s.x,s.y,u.x,u.y),t&&t.bezierCurveTo(a.x,a.y,s.x,s.y,u.x,u.y)}},{key:"pathS",value:function(t,r){var n=this.pathParser,o=e.pathS(n),i=o.current,a=o.point,s=o.controlPoint,u=o.currentPoint;n.addMarker(u,s,a),r.addBezierCurve(i.x,i.y,a.x,a.y,s.x,s.y,u.x,u.y),t&&t.bezierCurveTo(a.x,a.y,s.x,s.y,u.x,u.y)}},{key:"pathQ",value:function(t,r){var n=this.pathParser,o=e.pathQ(n),i=o.current,a=o.controlPoint,s=o.currentPoint;n.addMarker(s,a,a),r.addQuadraticCurve(i.x,i.y,a.x,a.y,s.x,s.y),t&&t.quadraticCurveTo(a.x,a.y,s.x,s.y)}},{key:"pathT",value:function(t,r){var n=this.pathParser,o=e.pathT(n),i=o.current,a=o.controlPoint,s=o.currentPoint;n.addMarker(s,a,a),r.addQuadraticCurve(i.x,i.y,a.x,a.y,s.x,s.y),t&&t.quadraticCurveTo(a.x,a.y,s.x,s.y)}},{key:"pathA",value:function(t,r){var n=this.pathParser,o=e.pathA(n),i=o.currentPoint,a=o.rX,s=o.rY,u=o.sweepFlag,l=o.xAxisRotation,c=o.centp,f=o.a1,p=o.ad,h=1-u?1:-1,y=f+h*(p/2),d=new AK(c.x+a*Math.cos(y),c.y+s*Math.sin(y));if(n.addMarkerAngle(d,y-h*Math.PI/2),n.addMarkerAngle(i,y-h*Math.PI),r.addPoint(i.x,i.y),t&&!isNaN(f)&&!isNaN(p)){var v=a>s?a:s,m=a>s?1:a/s,b=a>s?s/a:1;t.translate(c.x,c.y),t.rotate(l),t.scale(m,b),t.arc(0,0,v,f,f+p,Boolean(1-u)),t.scale(1/m,1/b),t.rotate(-l),t.translate(-c.x,-c.y)}}},{key:"pathZ",value:function(t,r){e.pathZ(this.pathParser),t&&r.x1!==r.x2&&r.y1!==r.y2&&t.closePath()}}],[{key:"pathM",value:function(t){var e=t.getAsCurrentPoint();return t.start=t.current,{point:e}}},{key:"pathL",value:function(t){return{current:t.current,point:t.getAsCurrentPoint()}}},{key:"pathH",value:function(t){var e=t.current,r=t.command,n=new AK((r.relative?e.x:0)+r.x,e.y);return t.current=n,{current:e,point:n}}},{key:"pathV",value:function(t){var e=t.current,r=t.command,n=new AK(e.x,(r.relative?e.y:0)+r.y);return t.current=n,{current:e,point:n}}},{key:"pathC",value:function(t){return{current:t.current,point:t.getPoint("x1","y1"),controlPoint:t.getAsControlPoint("x2","y2"),currentPoint:t.getAsCurrentPoint()}}},{key:"pathS",value:function(t){return{current:t.current,point:t.getReflectedControlPoint(),controlPoint:t.getAsControlPoint("x2","y2"),currentPoint:t.getAsCurrentPoint()}}},{key:"pathQ",value:function(t){return{current:t.current,controlPoint:t.getAsControlPoint("x1","y1"),currentPoint:t.getAsCurrentPoint()}}},{key:"pathT",value:function(t){var e=t.current,r=t.getReflectedControlPoint();return t.control=r,{current:e,controlPoint:r,currentPoint:t.getAsCurrentPoint()}}},{key:"pathA",value:function(t){var e=t.current,r=t.command,n=r.rX,o=r.rY,i=r.xRot,a=r.lArcFlag,s=r.sweepFlag,u=i*(Math.PI/180),l=t.getAsCurrentPoint(),c=new AK(Math.cos(u)*(e.x-l.x)/2+Math.sin(u)*(e.y-l.y)/2,-Math.sin(u)*(e.x-l.x)/2+Math.cos(u)*(e.y-l.y)/2),f=Math.pow(c.x,2)/Math.pow(n,2)+Math.pow(c.y,2)/Math.pow(o,2);f>1&&(n*=Math.sqrt(f),o*=Math.sqrt(f));var p=(a===s?-1:1)*Math.sqrt((Math.pow(n,2)*Math.pow(o,2)-Math.pow(n,2)*Math.pow(c.y,2)-Math.pow(o,2)*Math.pow(c.x,2))/(Math.pow(n,2)*Math.pow(c.y,2)+Math.pow(o,2)*Math.pow(c.x,2)));isNaN(p)&&(p=0);var h=new AK(p*n*c.y/o,p*-o*c.x/n),y=new AK((e.x+l.x)/2+Math.cos(u)*h.x-Math.sin(u)*h.y,(e.y+l.y)/2+Math.sin(u)*h.x+Math.cos(u)*h.y),d=SK([1,0],[(c.x-h.x)/n,(c.y-h.y)/o]),v=[(c.x-h.x)/n,(c.y-h.y)/o],m=[(-c.x-h.x)/n,(-c.y-h.y)/o],b=SK(v,m);return gK(v,m)<=-1&&(b=Math.PI),gK(v,m)>=1&&(b=0),{currentPoint:l,rX:n,rY:o,sweepFlag:s,xAxisRotation:u,centp:y,a1:d,ad:b}}},{key:"pathZ",value:function(t){t.current=t.start}}])}(),tY=function(t){function e(t,r,n){var o;return XW(this,e),(o=JW(this,e,[t,r,n])).type="glyph",o.horizAdvX=o.getAttribute("horiz-adv-x").getNumber(),o.unicode=o.getAttribute("unicode").getString(),o.arabicForm=o.getAttribute("arabic-form").getString(),o}return YW(e,$K),$W(e)}(),eY=function(t){function e(t,r,n){var o;return XW(this,e),(o=JW(this,e,[t,r,(this instanceof e?this.constructor:void 0)===e||n])).type="text",o.x=0,o.y=0,o.measureCache=-1,o}return YW(e,ZK),$W(e,[{key:"setContext",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];HW(KW(e.prototype),"setContext",this).call(this,t,r);var n=this.getStyle("dominant-baseline").getTextBaseline()||this.getStyle("alignment-baseline").getTextBaseline();n&&(t.textBaseline=n)}},{key:"initializeCoordinates",value:function(){this.x=0,this.y=0,this.leafTexts=[],this.textChunkStart=0,this.minX=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY}},{key:"getBoundingBox",value:function(t){var e=this;if("text"!==this.type)return this.getTElementBoundingBox(t);this.initializeCoordinates(),this.adjustChildCoordinatesRecursive(t);var r=null;return this.children.forEach(function(n,o){var i=e.getChildBoundingBox(t,e,e,o);r?r.addBoundingBox(i):r=i}),r}},{key:"getFontSize",value:function(){var t=this.document,e=this.parent,r=YK.parse(t.ctx.font).fontSize;return e.getStyle("font-size").getNumber(r)}},{key:"getTElementBoundingBox",value:function(t){var e=this.getFontSize();return new QK(this.x,this.y-e,this.x+this.measureText(t),this.y)}},{key:"getGlyph",value:function(t,e,r){var n=e[r],o=null;if(t.isArabic){var i=e.length,a=e[r-1],s=e[r+1],u="isolated";if((0===r||" "===a)&&r<i-1&&" "!==s&&(u="terminal"),r>0&&" "!==a&&r<i-1&&" "!==s&&(u="medial"),r>0&&" "!==a&&(r===i-1||" "===s)&&(u="initial"),void 0!==t.glyphs[n]){var l=t.glyphs[n];o=l instanceof tY?l:l[u]}}else o=t.glyphs[n];return o||(o=t.missingGlyph),o}},{key:"getText",value:function(){return""}},{key:"getTextFromNode",value:function(t){var e=t||this.node,r=Array.from(e.parentNode.childNodes),n=r.indexOf(e),o=r.length-1,i=iK(e.textContent||"");return 0===n&&(i=i.replace(/^[\n \t]+/,"")),n===o&&(i=function(t){return t.replace(/[\n \t]+$/,"")}(i)),i}},{key:"renderChildren",value:function(t){var e=this;if("text"===this.type){this.initializeCoordinates(),this.adjustChildCoordinatesRecursive(t),this.children.forEach(function(r,n){e.renderChild(t,e,e,n)});var r=this.document.screen.mouse;r.isWorking()&&r.checkBoundingBox(this,this.getBoundingBox(t))}else this.renderTElementChildren(t)}},{key:"renderTElementChildren",value:function(t){var e=this.document,r=this.parent,n=this.getText(),o=r.getStyle("font-family").getDefinition();if(o)for(var i=o.fontFace.unitsPerEm,a=YK.parse(e.ctx.font),s=r.getStyle("font-size").getNumber(a.fontSize),u=r.getStyle("font-style").getString(a.fontStyle),l=s/i,c=o.isRTL?n.split("").reverse().join(""):n,f=aK(r.getAttribute("dx").getString()),p=c.length,h=0;h<p;h++){var y=this.getGlyph(o,c,h);t.translate(this.x,this.y),t.scale(l,-l);var d=t.lineWidth;t.lineWidth=t.lineWidth*i/s,"italic"===u&&t.transform(1,0,.4,1,0,0),y.render(t),"italic"===u&&t.transform(1,0,-.4,1,0,0),t.lineWidth=d,t.scale(1/l,-1/l),t.translate(-this.x,-this.y),this.x+=s*(y.horizAdvX||o.horizAdvX)/i,void 0===f[h]||isNaN(f[h])||(this.x+=f[h])}else{var v=this.x,m=this.y;t.fillStyle&&t.fillText(n,v,m),t.strokeStyle&&t.strokeText(n,v,m)}}},{key:"applyAnchoring",value:function(){if(!(this.textChunkStart>=this.leafTexts.length)){var t=this.leafTexts[this.textChunkStart],e=t.getStyle("text-anchor").getString("start"),r=0;r="start"===e?t.x-this.minX:"end"===e?t.x-this.maxX:t.x-(this.minX+this.maxX)/2;for(var n=this.textChunkStart;n<this.leafTexts.length;n++)this.leafTexts[n].x+=r;this.minX=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.textChunkStart=this.leafTexts.length}}},{key:"adjustChildCoordinatesRecursive",value:function(t){var e=this;this.children.forEach(function(r,n){e.adjustChildCoordinatesRecursiveCore(t,e,e,n)}),this.applyAnchoring()}},{key:"adjustChildCoordinatesRecursiveCore",value:function(t,e,r,n){var o=r.children[n];o.children.length>0?o.children.forEach(function(r,n){e.adjustChildCoordinatesRecursiveCore(t,e,o,n)}):this.adjustChildCoordinates(t,e,r,n)}},{key:"adjustChildCoordinates",value:function(t,e,r,n){var o=r.children[n];if("function"!=typeof o.measureText)return o;t.save(),o.setContext(t,!0);var i=o.getAttribute("x"),a=o.getAttribute("y"),s=o.getAttribute("dx"),u=o.getAttribute("dy"),l=o.getStyle("font-family").getDefinition(),c=Boolean(l)&&l.isRTL;0===n&&(i.hasValue()||i.setValue(o.getInheritedAttribute("x")),a.hasValue()||a.setValue(o.getInheritedAttribute("y")),s.hasValue()||s.setValue(o.getInheritedAttribute("dx")),u.hasValue()||u.setValue(o.getInheritedAttribute("dy")));var f=o.measureText(t);return c&&(e.x-=f),i.hasValue()?(e.applyAnchoring(),o.x=i.getPixels("x"),s.hasValue()&&(o.x+=s.getPixels("x"))):(s.hasValue()&&(e.x+=s.getPixels("x")),o.x=e.x),e.x=o.x,c||(e.x+=f),a.hasValue()?(o.y=a.getPixels("y"),u.hasValue()&&(o.y+=u.getPixels("y"))):(u.hasValue()&&(e.y+=u.getPixels("y")),o.y=e.y),e.y=o.y,e.leafTexts.push(o),e.minX=Math.min(e.minX,o.x,o.x+f),e.maxX=Math.max(e.maxX,o.x,o.x+f),o.clearContext(t),t.restore(),o}},{key:"getChildBoundingBox",value:function(t,e,r,n){var o=r.children[n];if("function"!=typeof o.getBoundingBox)return null;var i=o.getBoundingBox(t);return i?(o.children.forEach(function(r,n){var a=e.getChildBoundingBox(t,e,o,n);i.addBoundingBox(a)}),i):null}},{key:"renderChild",value:function(t,e,r,n){var o=r.children[n];o.render(t),o.children.forEach(function(r,n){e.renderChild(t,e,o,n)})}},{key:"measureText",value:function(t){var e=this.measureCache;if(~e)return e;var r=this.getText(),n=this.measureTargetText(t,r);return this.measureCache=n,n}},{key:"measureTargetText",value:function(t,e){if(!e.length)return 0;var r=this.parent,n=r.getStyle("font-family").getDefinition();if(n){for(var o=this.getFontSize(),i=n.isRTL?e.split("").reverse().join(""):e,a=aK(r.getAttribute("dx").getString()),s=i.length,u=0,l=0;l<s;l++){u+=(this.getGlyph(n,i,l).horizAdvX||n.horizAdvX)*o/n.fontFace.unitsPerEm,void 0===a[l]||isNaN(a[l])||(u+=a[l])}return u}if(!t.measureText)return 10*e.length;t.save(),this.setContext(t,!0);var c=t.measureText(e).width;return this.clearContext(t),t.restore(),c}},{key:"getInheritedAttribute",value:function(t){for(var r=this;r instanceof e&&r.isFirstChild();){var n=r.parent.getAttribute(t);if(n.hasValue(!0))return n.getValue("0");r=r.parent}return null}}])}(),rY=function(t){function e(t,r,n){var o;return XW(this,e),(o=JW(this,e,[t,r,(this instanceof e?this.constructor:void 0)===e||n])).type="tspan",o.text=o.children.length>0?"":o.getTextFromNode(),o}return YW(e,eY),$W(e,[{key:"getText",value:function(){return this.text}}])}(),nY=function(t){function e(){var t;return XW(this,e),(t=JW(this,e,arguments)).type="textNode",t}return YW(e,rY),$W(e)}(),oY=function(t){function e(){var t;return XW(this,e),(t=JW(this,e,arguments)).type="svg",t.root=!1,t}return YW(e,ZK),$W(e,[{key:"setContext",value:function(t){var r,n=this.document,o=n.screen,i=n.window,a=t.canvas;if(o.setDefaults(t),a.style&&void 0!==t.font&&i&&void 0!==i.getComputedStyle){t.font=i.getComputedStyle(a).getPropertyValue("font");var s=new CK(n,"fontSize",YK.parse(t.font).fontSize);s.hasValue()&&(n.rootEmSize=s.getPixels("y"),n.emSize=n.rootEmSize)}this.getAttribute("x").hasValue()||this.getAttribute("x",!0).setValue(0),this.getAttribute("y").hasValue()||this.getAttribute("y",!0).setValue(0);var u=o.viewPort,l=u.width,c=u.height;this.getStyle("width").hasValue()||this.getStyle("width",!0).setValue("100%"),this.getStyle("height").hasValue()||this.getStyle("height",!0).setValue("100%"),this.getStyle("color").hasValue()||this.getStyle("color",!0).setValue("black");var f=this.getAttribute("refX"),p=this.getAttribute("refY"),h=this.getAttribute("viewBox"),y=h.hasValue()?aK(h.getString()):null,d=!this.root&&"visible"!==this.getStyle("overflow").getValue("hidden"),v=0,m=0,b=0,g=0;y&&(v=y[0],m=y[1]),this.root||(l=this.getStyle("width").getPixels("x"),c=this.getStyle("height").getPixels("y"),"marker"===this.type&&(b=v,g=m,v=0,m=0)),o.viewPort.setCurrent(l,c),!this.node||this.parent&&"foreignObject"!==(null===(r=this.node.parentNode)||void 0===r?void 0:r.nodeName)||!this.getStyle("transform",!1,!0).hasValue()||this.getStyle("transform-origin",!1,!0).hasValue()||this.getStyle("transform-origin",!0,!0).setValue("50% 50%"),HW(KW(e.prototype),"setContext",this).call(this,t),t.translate(this.getAttribute("x").getPixels("x"),this.getAttribute("y").getPixels("y")),y&&(l=y[2],c=y[3]),n.setViewBox({ctx:t,aspectRatio:this.getAttribute("preserveAspectRatio").getString(),width:o.viewPort.width,desiredWidth:l,height:o.viewPort.height,desiredHeight:c,minX:v,minY:m,refX:f.getValue(),refY:p.getValue(),clip:d,clipX:b,clipY:g}),y&&(o.viewPort.removeCurrent(),o.viewPort.setCurrent(l,c))}},{key:"clearContext",value:function(t){HW(KW(e.prototype),"clearContext",this).call(this,t),this.document.screen.viewPort.removeCurrent()}},{key:"resize",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=this.getAttribute("width",!0),o=this.getAttribute("height",!0),i=this.getAttribute("viewBox"),a=this.getAttribute("style"),s=n.getNumber(0),u=o.getNumber(0);if(r)if("string"==typeof r)this.getAttribute("preserveAspectRatio",!0).setValue(r);else{var l=this.getAttribute("preserveAspectRatio");l.hasValue()&&l.setValue(l.getString().replace(/^\s*(\S.*\S)\s*$/,"$1"))}if(n.setValue(t),o.setValue(e),i.hasValue()||i.setValue("0 0 ".concat(s||t," ").concat(u||e)),a.hasValue()){var c=this.getStyle("width"),f=this.getStyle("height");c.hasValue()&&c.setValue("".concat(t,"px")),f.hasValue()&&f.setValue("".concat(e,"px"))}}}])}(),iY=function(t){function e(){var t;return XW(this,e),(t=JW(this,e,arguments)).type="rect",t}return YW(e,$K),$W(e,[{key:"path",value:function(t){var e=this.getAttribute("x").getPixels("x"),r=this.getAttribute("y").getPixels("y"),n=this.getStyle("width",!1,!0).getPixels("x"),o=this.getStyle("height",!1,!0).getPixels("y"),i=this.getAttribute("rx"),a=this.getAttribute("ry"),s=i.getPixels("x"),u=a.getPixels("y");if(i.hasValue()&&!a.hasValue()&&(u=s),a.hasValue()&&!i.hasValue()&&(s=u),s=Math.min(s,n/2),u=Math.min(u,o/2),t){var l=(Math.sqrt(2)-1)/3*4;t.beginPath(),o>0&&n>0&&(t.moveTo(e+s,r),t.lineTo(e+n-s,r),t.bezierCurveTo(e+n-s+l*s,r,e+n,r+u-l*u,e+n,r+u),t.lineTo(e+n,r+o-u),t.bezierCurveTo(e+n,r+o-u+l*u,e+n-s+l*s,r+o,e+n-s,r+o),t.lineTo(e+s,r+o),t.bezierCurveTo(e+s-l*s,r+o,e,r+o-u+l*u,e,r+o-u),t.lineTo(e,r+u),t.bezierCurveTo(e,r+u-l*u,e+s-l*s,r,e+s,r),t.closePath())}return new QK(e,r,e+n,r+o)}},{key:"getMarkers",value:function(){return null}}])}(),aY=function(t){function e(){var t;return XW(this,e),(t=JW(this,e,arguments)).type="circle",t}return YW(e,$K),$W(e,[{key:"path",value:function(t){var e=this.getAttribute("cx").getPixels("x"),r=this.getAttribute("cy").getPixels("y"),n=this.getAttribute("r").getPixels();return t&&n>0&&(t.beginPath(),t.arc(e,r,n,0,2*Math.PI,!1),t.closePath()),new QK(e-n,r-n,e+n,r+n)}},{key:"getMarkers",value:function(){return null}}])}(),sY=function(t){function e(){var t;return XW(this,e),(t=JW(this,e,arguments)).type="ellipse",t}return YW(e,$K),$W(e,[{key:"path",value:function(t){var e=(Math.sqrt(2)-1)/3*4,r=this.getAttribute("rx").getPixels("x"),n=this.getAttribute("ry").getPixels("y"),o=this.getAttribute("cx").getPixels("x"),i=this.getAttribute("cy").getPixels("y");return t&&r>0&&n>0&&(t.beginPath(),t.moveTo(o+r,i),t.bezierCurveTo(o+r,i+e*n,o+e*r,i+n,o,i+n),t.bezierCurveTo(o-e*r,i+n,o-r,i+e*n,o-r,i),t.bezierCurveTo(o-r,i-e*n,o-e*r,i-n,o,i-n),t.bezierCurveTo(o+e*r,i-n,o+r,i-e*n,o+r,i),t.closePath()),new QK(o-r,i-n,o+r,i+n)}},{key:"getMarkers",value:function(){return null}}])}(),uY=function(t){function e(){var t;return XW(this,e),(t=JW(this,e,arguments)).type="line",t}return YW(e,$K),$W(e,[{key:"getPoints",value:function(){return[new AK(this.getAttribute("x1").getPixels("x"),this.getAttribute("y1").getPixels("y")),new AK(this.getAttribute("x2").getPixels("x"),this.getAttribute("y2").getPixels("y"))]}},{key:"path",value:function(t){var e=eK(this.getPoints(),2),r=e[0],n=r.x,o=r.y,i=e[1],a=i.x,s=i.y;return t&&(t.beginPath(),t.moveTo(n,o),t.lineTo(a,s)),new QK(n,o,a,s)}},{key:"getMarkers",value:function(){var t=eK(this.getPoints(),2),e=t[0],r=t[1],n=e.angleTo(r);return[[e,n],[r,n]]}}])}(),lY=function(t){function e(t,r,n){var o;return XW(this,e),(o=JW(this,e,[t,r,n])).type="polyline",o.points=[],o.points=AK.parsePath(o.getAttribute("points").getString()),o}return YW(e,$K),$W(e,[{key:"path",value:function(t){var e=this.points,r=eK(e,1)[0],n=r.x,o=r.y,i=new QK(n,o);return t&&(t.beginPath(),t.moveTo(n,o)),e.forEach(function(e){var r=e.x,n=e.y;i.addPoint(r,n),t&&t.lineTo(r,n)}),i}},{key:"getMarkers",value:function(){var t=this.points,e=t.length-1,r=[];return t.forEach(function(n,o){o!==e&&r.push([n,n.angleTo(t[o+1])])}),r.length>0&&r.push([t[t.length-1],r[r.length-1][1]]),r}}])}(),cY=function(t){function e(){var t;return XW(this,e),(t=JW(this,e,arguments)).type="polygon",t}return YW(e,lY),$W(e,[{key:"path",value:function(t){var r=HW(KW(e.prototype),"path",this).call(this,t),n=eK(this.points,1)[0],o=n.x,i=n.y;return t&&(t.lineTo(o,i),t.closePath()),r}}])}(),fY=function(t){function e(){var t;return XW(this,e),(t=JW(this,e,arguments)).type="pattern",t}return YW(e,JK),$W(e,[{key:"createPattern",value:function(t,e,r){var n=this.getStyle("width").getPixels("x",!0),o=this.getStyle("height").getPixels("y",!0),i=new oY(this.document,null);i.attributes.viewBox=new CK(this.document,"viewBox",this.getAttribute("viewBox").getValue()),i.attributes.width=new CK(this.document,"width","".concat(n,"px")),i.attributes.height=new CK(this.document,"height","".concat(o,"px")),i.attributes.transform=new CK(this.document,"transform",this.getAttribute("patternTransform").getValue()),i.children=this.children;var a=this.document.createCanvas(n,o),s=a.getContext("2d"),u=this.getAttribute("x"),l=this.getAttribute("y");u.hasValue()&&l.hasValue()&&s.translate(u.getPixels("x",!0),l.getPixels("y",!0)),r.hasValue()?this.styles["fill-opacity"]=r:Reflect.deleteProperty(this.styles,"fill-opacity");for(var c=-1;c<=1;c++)for(var f=-1;f<=1;f++)s.save(),i.attributes.x=new CK(this.document,"x",c*a.width),i.attributes.y=new CK(this.document,"y",f*a.height),i.render(s),s.restore();return t.createPattern(a,"repeat")}}])}(),pY=function(t){function e(){var t;return XW(this,e),(t=JW(this,e,arguments)).type="marker",t}return YW(e,JK),$W(e,[{key:"render",value:function(t,e,r){if(e){var n=e.x,o=e.y,i=this.getAttribute("orient").getString("auto"),a=this.getAttribute("markerUnits").getString("strokeWidth");t.translate(n,o),"auto"===i&&t.rotate(r),"strokeWidth"===a&&t.scale(t.lineWidth,t.lineWidth),t.save();var s=new oY(this.document,null);s.type=this.type,s.attributes.viewBox=new CK(this.document,"viewBox",this.getAttribute("viewBox").getValue()),s.attributes.refX=new CK(this.document,"refX",this.getAttribute("refX").getValue()),s.attributes.refY=new CK(this.document,"refY",this.getAttribute("refY").getValue()),s.attributes.width=new CK(this.document,"width",this.getAttribute("markerWidth").getValue()),s.attributes.height=new CK(this.document,"height",this.getAttribute("markerHeight").getValue()),s.attributes.overflow=new CK(this.document,"overflow",this.getAttribute("overflow").getValue()),s.attributes.fill=new CK(this.document,"fill",this.getAttribute("fill").getColor("black")),s.attributes.stroke=new CK(this.document,"stroke",this.getAttribute("stroke").getValue("none")),s.children=this.children,s.render(t),t.restore(),"strokeWidth"===a&&t.scale(1/t.lineWidth,1/t.lineWidth),"auto"===i&&t.rotate(-r),t.translate(-n,-o)}}}])}(),hY=function(t){function e(){var t;return XW(this,e),(t=JW(this,e,arguments)).type="defs",t}return YW(e,JK),$W(e,[{key:"render",value:function(){}}])}(),yY=function(t){function e(){var t;return XW(this,e),(t=JW(this,e,arguments)).type="g",t}return YW(e,ZK),$W(e,[{key:"getBoundingBox",value:function(t){var e=new QK;return this.children.forEach(function(r){e.addBoundingBox(r.getBoundingBox(t))}),e}}])}(),dY=function(t){function e(t,r,n){var o;XW(this,e),(o=JW(this,e,[t,r,n])).attributesToInherit=["gradientUnits"],o.stops=[];var i=o,a=i.stops;return i.children.forEach(function(t){"stop"===t.type&&a.push(t)}),o}return YW(e,JK),$W(e,[{key:"getGradientUnits",value:function(){return this.getAttribute("gradientUnits").getString("objectBoundingBox")}},{key:"createGradient",value:function(t,e,r){var n=this,o=this;this.getHrefAttribute().hasValue()&&(o=this.getHrefAttribute().getDefinition(),this.inheritStopContainer(o));var i=o.stops,a=this.getGradient(t,e);if(!a)return this.addParentOpacity(r,i[i.length-1].color);if(i.forEach(function(t){a.addColorStop(t.offset,n.addParentOpacity(r,t.color))}),this.getAttribute("gradientTransform").hasValue()){var s=this.document,u=s.screen,l=u.MAX_VIRTUAL_PIXELS,c=eK(u.viewPort.viewPorts,1)[0],f=new iY(s,null);f.attributes.x=new CK(s,"x",-l/3),f.attributes.y=new CK(s,"y",-l/3),f.attributes.width=new CK(s,"width",l),f.attributes.height=new CK(s,"height",l);var p=new yY(s,null);p.attributes.transform=new CK(s,"transform",this.getAttribute("gradientTransform").getValue()),p.children=[f];var h=new oY(s,null);h.attributes.x=new CK(s,"x",0),h.attributes.y=new CK(s,"y",0),h.attributes.width=new CK(s,"width",c.width),h.attributes.height=new CK(s,"height",c.height),h.children=[p];var y=s.createCanvas(c.width,c.height),d=y.getContext("2d");return d.fillStyle=a,h.render(d),d.createPattern(y,"no-repeat")}return a}},{key:"inheritStopContainer",value:function(t){var e=this;this.attributesToInherit.forEach(function(r){!e.getAttribute(r).hasValue()&&t.getAttribute(r).hasValue()&&e.getAttribute(r,!0).setValue(t.getAttribute(r).getValue())})}},{key:"addParentOpacity",value:function(t,e){return t.hasValue()?new CK(this.document,"color",e).addOpacity(t).getColor():e}}])}(),vY=function(t){function e(t,r,n){var o;return XW(this,e),(o=JW(this,e,[t,r,n])).type="linearGradient",o.attributesToInherit.push("x1","y1","x2","y2"),o}return YW(e,dY),$W(e,[{key:"getGradient",value:function(t,e){var r="objectBoundingBox"===this.getGradientUnits(),n=r?e.getBoundingBox(t):null;if(r&&!n)return null;this.getAttribute("x1").hasValue()||this.getAttribute("y1").hasValue()||this.getAttribute("x2").hasValue()||this.getAttribute("y2").hasValue()||(this.getAttribute("x1",!0).setValue(0),this.getAttribute("y1",!0).setValue(0),this.getAttribute("x2",!0).setValue(1),this.getAttribute("y2",!0).setValue(0));var o=r?n.x+n.width*this.getAttribute("x1").getNumber():this.getAttribute("x1").getPixels("x"),i=r?n.y+n.height*this.getAttribute("y1").getNumber():this.getAttribute("y1").getPixels("y"),a=r?n.x+n.width*this.getAttribute("x2").getNumber():this.getAttribute("x2").getPixels("x"),s=r?n.y+n.height*this.getAttribute("y2").getNumber():this.getAttribute("y2").getPixels("y");return o===a&&i===s?null:t.createLinearGradient(o,i,a,s)}}])}(),mY=function(t){function e(t,r,n){var o;return XW(this,e),(o=JW(this,e,[t,r,n])).type="radialGradient",o.attributesToInherit.push("cx","cy","r","fx","fy","fr"),o}return YW(e,dY),$W(e,[{key:"getGradient",value:function(t,e){var r="objectBoundingBox"===this.getGradientUnits(),n=e.getBoundingBox(t);if(r&&!n)return null;this.getAttribute("cx").hasValue()||this.getAttribute("cx",!0).setValue("50%"),this.getAttribute("cy").hasValue()||this.getAttribute("cy",!0).setValue("50%"),this.getAttribute("r").hasValue()||this.getAttribute("r",!0).setValue("50%");var o=r?n.x+n.width*this.getAttribute("cx").getNumber():this.getAttribute("cx").getPixels("x"),i=r?n.y+n.height*this.getAttribute("cy").getNumber():this.getAttribute("cy").getPixels("y"),a=o,s=i;this.getAttribute("fx").hasValue()&&(a=r?n.x+n.width*this.getAttribute("fx").getNumber():this.getAttribute("fx").getPixels("x")),this.getAttribute("fy").hasValue()&&(s=r?n.y+n.height*this.getAttribute("fy").getNumber():this.getAttribute("fy").getPixels("y"));var u=r?(n.width+n.height)/2*this.getAttribute("r").getNumber():this.getAttribute("r").getPixels(),l=this.getAttribute("fr").getPixels();return t.createRadialGradient(a,s,l,o,i,u)}}])}(),bY=function(t){function e(t,r,n){var o;XW(this,e),(o=JW(this,e,[t,r,n])).type="stop";var i=Math.max(0,Math.min(1,o.getAttribute("offset").getNumber())),a=o.getStyle("stop-opacity"),s=o.getStyle("stop-color",!0);return""===s.getString()&&s.setValue("#000"),a.hasValue()&&(s=s.addOpacity(a)),o.offset=i,o.color=s.getColor(),o}return YW(e,JK),$W(e)}(),gY=function(t){function e(t,r,n){var o;XW(this,e),(o=JW(this,e,[t,r,n])).type="animate",o.duration=0,o.initialValue=null,o.initialUnits="",o.removed=!1,o.frozen=!1,t.screen.animations.push(o),o.begin=o.getAttribute("begin").getMilliseconds(),o.maxDuration=o.begin+o.getAttribute("dur").getMilliseconds(),o.from=o.getAttribute("from"),o.to=o.getAttribute("to"),o.values=new CK(t,"values",null);var i=o.getAttribute("values");return i.hasValue()&&o.values.setValue(i.getString().split(";")),o}return YW(e,JK),$W(e,[{key:"getProperty",value:function(){var t=this.getAttribute("attributeType").getString(),e=this.getAttribute("attributeName").getString();return"CSS"===t?this.parent.getStyle(e,!0):this.parent.getAttribute(e,!0)}},{key:"calcValue",value:function(){var t=this.initialUnits,e=this.getProgress(),r=e.progress,n=e.from,o=e.to,i=n.getNumber()+(o.getNumber()-n.getNumber())*r;return"%"===t&&(i*=100),"".concat(i).concat(t)}},{key:"update",value:function(t){var e=this.parent,r=this.getProperty();if(this.initialValue||(this.initialValue=r.getString(),this.initialUnits=r.getUnits()),this.duration>this.maxDuration){var n=this.getAttribute("fill").getString("remove");if("indefinite"===this.getAttribute("repeatCount").getString()||"indefinite"===this.getAttribute("repeatDur").getString())this.duration=0;else if("freeze"!==n||this.frozen){if("remove"===n&&!this.removed)return this.removed=!0,r.setValue(e.animationFrozen?e.animationFrozenValue:this.initialValue),!0}else this.frozen=!0,e.animationFrozen=!0,e.animationFrozenValue=r.getString();return!1}this.duration+=t;var o=!1;if(this.begin<this.duration){var i=this.calcValue(),a=this.getAttribute("type");if(a.hasValue()){var s=a.getString();i="".concat(s,"(").concat(i,")")}r.setValue(i),o=!0}return o}},{key:"getProgress",value:function(){var t=this.document,e=this.values,r={progress:(this.duration-this.begin)/(this.maxDuration-this.begin)};if(e.hasValue()){var n=r.progress*(e.getValue().length-1),o=Math.floor(n),i=Math.ceil(n);r.from=new CK(t,"from",parseFloat(e.getValue()[o])),r.to=new CK(t,"to",parseFloat(e.getValue()[i])),r.progress=(n-o)/(i-o)}else r.from=this.from,r.to=this.to;return r}}])}(),SY=function(t){function e(){var t;return XW(this,e),(t=JW(this,e,arguments)).type="animateColor",t}return YW(e,gY),$W(e,[{key:"calcValue",value:function(){var t=this.getProgress(),e=t.progress,r=t.from,n=t.to,o=new yW(r.getColor()),i=new yW(n.getColor());if(o.ok&&i.ok){var a=o.r+(i.r-o.r)*e,s=o.g+(i.g-o.g)*e,u=o.b+(i.b-o.b)*e;return"rgb(".concat(Math.floor(a),", ").concat(Math.floor(s),", ").concat(Math.floor(u),")")}return this.getAttribute("from").getColor()}}])}(),wY=function(t){function e(){var t;return XW(this,e),(t=JW(this,e,arguments)).type="animateTransform",t}return YW(e,gY),$W(e,[{key:"calcValue",value:function(){var t=this.getProgress(),e=t.progress,r=t.from,n=t.to,o=aK(r.getString()),i=aK(n.getString());return o.map(function(t,r){return t+(i[r]-t)*e}).join(" ")}}])}(),_Y=function(t){function e(t,r,n){var o;XW(this,e),(o=JW(this,e,[t,r,n])).type="font",o.glyphs={},o.horizAdvX=o.getAttribute("horiz-adv-x").getNumber();var i,a=t.definitions,s=zW(o.children);try{for(s.s();!(i=s.n()).done;){var u=i.value;switch(u.type){case"font-face":o.fontFace=u;var l=u.getStyle("font-family");l.hasValue()&&(a[l.getString()]=o);break;case"missing-glyph":o.missingGlyph=u;break;case"glyph":var c=u;c.arabicForm?(o.isRTL=!0,o.isArabic=!0,void 0===o.glyphs[c.unicode]&&(o.glyphs[c.unicode]={}),o.glyphs[c.unicode][c.arabicForm]=c):o.glyphs[c.unicode]=c}}}catch(t){s.e(t)}finally{s.f()}return o}return YW(e,JK),$W(e,[{key:"render",value:function(){}}])}(),OY=function(t){function e(t,r,n){var o;return XW(this,e),(o=JW(this,e,[t,r,n])).type="font-face",o.ascent=o.getAttribute("ascent").getNumber(),o.descent=o.getAttribute("descent").getNumber(),o.unitsPerEm=o.getAttribute("units-per-em").getNumber(),o}return YW(e,JK),$W(e)}(),EY=function(t){function e(){var t;return XW(this,e),(t=JW(this,e,arguments)).type="missing-glyph",t.horizAdvX=0,t}return YW(e,$K),$W(e)}(),PY=function(t){function e(){var t;return XW(this,e),(t=JW(this,e,arguments)).type="tref",t}return YW(e,eY),$W(e,[{key:"getText",value:function(){var t=this.getHrefAttribute().getDefinition();if(t){var e=t.children[0];if(e)return e.getText()}return""}}])}(),xY=function(t){function e(t,r,n){var o;XW(this,e),(o=JW(this,e,[t,r,n])).type="a";var i=r.childNodes,a=i[0],s=i.length>0&&Array.from(i).every(function(t){return 3===t.nodeType});return o.hasText=s,o.text=s?o.getTextFromNode(a):"",o}return YW(e,eY),$W(e,[{key:"getText",value:function(){return this.text}},{key:"renderChildren",value:function(t){if(this.hasText){HW(KW(e.prototype),"renderChildren",this).call(this,t);var r=this.document,n=this.x,o=this.y,i=r.screen.mouse,a=new CK(r,"fontSize",YK.parse(r.ctx.font).fontSize);i.isWorking()&&i.checkBoundingBox(this,new QK(n,o-a.getPixels("y"),n+this.measureText(t),o))}else if(this.children.length>0){var s=new yY(this.document,null);s.children=this.children,s.parent=this,s.render(t)}}},{key:"onClick",value:function(){var t=this.document.window;t&&t.open(this.getHrefAttribute().getString())}},{key:"onMouseMove",value:function(){this.document.ctx.canvas.style.cursor="pointer"}}])}();function TY(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function CY(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?TY(Object(r),!0).forEach(function(e){pW(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):TY(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}var kY=function(t){function e(t,r,n){var o;XW(this,e),(o=JW(this,e,[t,r,n])).type="textPath",o.textWidth=0,o.textHeight=0,o.pathLength=-1,o.glyphInfo=null,o.letterSpacingCache=[],o.measuresCache=new Map([["",0]]);var i=o.getHrefAttribute().getDefinition();return o.text=o.getTextFromNode(),o.dataArray=o.parsePathData(i),o}return YW(e,eY),$W(e,[{key:"getText",value:function(){return this.text}},{key:"path",value:function(t){var e=this.dataArray;t&&t.beginPath(),e.forEach(function(e){var r=e.type,n=e.points;switch(r){case XK.LINE_TO:t&&t.lineTo(n[0],n[1]);break;case XK.MOVE_TO:t&&t.moveTo(n[0],n[1]);break;case XK.CURVE_TO:t&&t.bezierCurveTo(n[0],n[1],n[2],n[3],n[4],n[5]);break;case XK.QUAD_TO:t&&t.quadraticCurveTo(n[0],n[1],n[2],n[3]);break;case XK.ARC:var o=eK(n,8),i=o[0],a=o[1],s=o[2],u=o[3],l=o[4],c=o[5],f=o[6],p=o[7],h=s>u?s:u,y=s>u?1:s/u,d=s>u?u/s:1;t&&(t.translate(i,a),t.rotate(f),t.scale(y,d),t.arc(0,0,h,l,l+c,Boolean(1-p)),t.scale(1/y,1/d),t.rotate(-f),t.translate(-i,-a));break;case XK.CLOSE_PATH:t&&t.closePath()}})}},{key:"renderChildren",value:function(t){this.setTextData(t),t.save();var e=this.parent.getStyle("text-decoration").getString(),r=this.getFontSize(),n=this.glyphInfo,o=t.fillStyle;"underline"===e&&t.beginPath(),n.forEach(function(n,o){var i=n.p0,a=n.p1,s=n.rotation,u=n.text;t.save(),t.translate(i.x,i.y),t.rotate(s),t.fillStyle&&t.fillText(u,0,0),t.strokeStyle&&t.strokeText(u,0,0),t.restore(),"underline"===e&&(0===o&&t.moveTo(i.x,i.y+r/8),t.lineTo(a.x,a.y+r/5))}),"underline"===e&&(t.lineWidth=r/20,t.strokeStyle=o,t.stroke(),t.closePath()),t.restore()}},{key:"getLetterSpacingAt",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.letterSpacingCache[t]||0}},{key:"findSegmentToFitChar",value:function(t,e,r,n,o,i,a,s,u){var l=i,c=this.measureText(t,s);" "===s&&"justify"===e&&r<n&&(c+=(n-r)/o),u>-1&&(l+=this.getLetterSpacingAt(u));var f=this.textHeight/20,p=this.getEquidistantPointOnPath(l,f,0),h=this.getEquidistantPointOnPath(l+c,f,0),y={p0:p,p1:h},d=p&&h?Math.atan2(h.y-p.y,h.x-p.x):0;if(a){var v=Math.cos(Math.PI/2+d)*a,m=Math.cos(-d)*a;y.p0=CY(CY({},p),{},{x:p.x+v,y:p.y+m}),y.p1=CY(CY({},h),{},{x:h.x+v,y:h.y+m})}return{offset:l+=c,segment:y,rotation:d}}},{key:"measureText",value:function(t,e){var r=this.measuresCache,n=e||this.getText();if(r.has(n))return r.get(n);var o=this.measureTargetText(t,n);return r.set(n,o),o}},{key:"setTextData",value:function(t){var e=this;if(!this.glyphInfo){var r=this.getText(),n=r.split(""),o=r.split(" ").length-1,i=this.parent.getAttribute("dx").split().map(function(t){return t.getPixels("x")}),a=this.parent.getAttribute("dy").getPixels("y"),s=this.parent.getStyle("text-anchor").getString("start"),u=this.getStyle("letter-spacing"),l=this.parent.getStyle("letter-spacing"),c=0;u.hasValue()&&"inherit"!==u.getValue()?u.hasValue()&&"initial"!==u.getValue()&&"unset"!==u.getValue()&&(c=u.getPixels()):c=l.getPixels();var f=[],p=r.length;this.letterSpacingCache=f;for(var h=0;h<p;h++)f.push(void 0!==i[h]?i[h]:c);var y=f.reduce(function(t,e,r){return 0===r?0:t+e||0},0),d=this.measureText(t),v=Math.max(d+y,0);this.textWidth=d,this.textHeight=this.getFontSize(),this.glyphInfo=[];var m=this.getPathLength(),b=this.getStyle("startOffset").getNumber(0)*m,g=0;"middle"!==s&&"center"!==s||(g=-v/2),"end"!==s&&"right"!==s||(g=-v),g+=b,n.forEach(function(r,i){var u=e.findSegmentToFitChar(t,s,v,m,o,g,a,r,i),l=u.offset,c=u.segment,f=u.rotation;g=l,c.p0&&c.p1&&e.glyphInfo.push({text:n[i],p0:c.p0,p1:c.p1,rotation:f})})}}},{key:"parsePathData",value:function(t){if(this.pathLength=-1,!t)return[];var e=[],r=t.pathParser;for(r.reset();!r.isEnd();){var n=r.current,o=n?n.x:0,i=n?n.y:0,a=r.next(),s=a.type,u=[];switch(a.type){case XK.MOVE_TO:this.pathM(r,u);break;case XK.LINE_TO:s=this.pathL(r,u);break;case XK.HORIZ_LINE_TO:s=this.pathH(r,u);break;case XK.VERT_LINE_TO:s=this.pathV(r,u);break;case XK.CURVE_TO:this.pathC(r,u);break;case XK.SMOOTH_CURVE_TO:s=this.pathS(r,u);break;case XK.QUAD_TO:this.pathQ(r,u);break;case XK.SMOOTH_QUAD_TO:s=this.pathT(r,u);break;case XK.ARC:u=this.pathA(r);break;case XK.CLOSE_PATH:$K.pathZ(r)}a.type!==XK.CLOSE_PATH?e.push({type:s,points:u,start:{x:o,y:i},pathLength:this.calcLength(o,i,s,u)}):e.push({type:XK.CLOSE_PATH,points:[],pathLength:0})}return e}},{key:"pathM",value:function(t,e){var r=$K.pathM(t).point,n=r.x,o=r.y;e.push(n,o)}},{key:"pathL",value:function(t,e){var r=$K.pathL(t).point,n=r.x,o=r.y;return e.push(n,o),XK.LINE_TO}},{key:"pathH",value:function(t,e){var r=$K.pathH(t).point,n=r.x,o=r.y;return e.push(n,o),XK.LINE_TO}},{key:"pathV",value:function(t,e){var r=$K.pathV(t).point,n=r.x,o=r.y;return e.push(n,o),XK.LINE_TO}},{key:"pathC",value:function(t,e){var r=$K.pathC(t),n=r.point,o=r.controlPoint,i=r.currentPoint;e.push(n.x,n.y,o.x,o.y,i.x,i.y)}},{key:"pathS",value:function(t,e){var r=$K.pathS(t),n=r.point,o=r.controlPoint,i=r.currentPoint;return e.push(n.x,n.y,o.x,o.y,i.x,i.y),XK.CURVE_TO}},{key:"pathQ",value:function(t,e){var r=$K.pathQ(t),n=r.controlPoint,o=r.currentPoint;e.push(n.x,n.y,o.x,o.y)}},{key:"pathT",value:function(t,e){var r=$K.pathT(t),n=r.controlPoint,o=r.currentPoint;return e.push(n.x,n.y,o.x,o.y),XK.QUAD_TO}},{key:"pathA",value:function(t){var e=$K.pathA(t),r=e.rX,n=e.rY,o=e.sweepFlag,i=e.xAxisRotation,a=e.centp,s=e.a1,u=e.ad;return 0===o&&u>0&&(u-=2*Math.PI),1===o&&u<0&&(u+=2*Math.PI),[a.x,a.y,r,n,s,u,i,o]}},{key:"calcLength",value:function(t,e,r,n){var o=0,i=null,a=null,s=0;switch(r){case XK.LINE_TO:return this.getLineLength(t,e,n[0],n[1]);case XK.CURVE_TO:for(o=0,i=this.getPointOnCubicBezier(0,t,e,n[0],n[1],n[2],n[3],n[4],n[5]),s=.01;s<=1;s+=.01)a=this.getPointOnCubicBezier(s,t,e,n[0],n[1],n[2],n[3],n[4],n[5]),o+=this.getLineLength(i.x,i.y,a.x,a.y),i=a;return o;case XK.QUAD_TO:for(o=0,i=this.getPointOnQuadraticBezier(0,t,e,n[0],n[1],n[2],n[3]),s=.01;s<=1;s+=.01)a=this.getPointOnQuadraticBezier(s,t,e,n[0],n[1],n[2],n[3]),o+=this.getLineLength(i.x,i.y,a.x,a.y),i=a;return o;case XK.ARC:o=0;var u=n[4],l=n[5],c=n[4]+l,f=Math.PI/180;if(Math.abs(u-c)<f&&(f=Math.abs(u-c)),i=this.getPointOnEllipticalArc(n[0],n[1],n[2],n[3],u,0),l<0)for(s=u-f;s>c;s-=f)a=this.getPointOnEllipticalArc(n[0],n[1],n[2],n[3],s,0),o+=this.getLineLength(i.x,i.y,a.x,a.y),i=a;else for(s=u+f;s<c;s+=f)a=this.getPointOnEllipticalArc(n[0],n[1],n[2],n[3],s,0),o+=this.getLineLength(i.x,i.y,a.x,a.y),i=a;return a=this.getPointOnEllipticalArc(n[0],n[1],n[2],n[3],c,0),o+=this.getLineLength(i.x,i.y,a.x,a.y)}return 0}},{key:"getPointOnLine",value:function(t,e,r,n,o){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:e,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:r,s=(o-r)/(n-e+mK),u=Math.sqrt(t*t/(1+s*s));n<e&&(u*=-1);var l=s*u,c=null;if(n===e)c={x:i,y:a+l};else if((a-r)/(i-e+mK)===s)c={x:i+u,y:a+l};else{var f,p,h=this.getLineLength(e,r,n,o);if(h<mK)return null;var y=(i-e)*(n-e)+(a-r)*(o-r);f=e+(y/=h*h)*(n-e),p=r+y*(o-r);var d=this.getLineLength(i,a,f,p),v=Math.sqrt(t*t-d*d);u=Math.sqrt(v*v/(1+s*s)),n<e&&(u*=-1),c={x:f+u,y:p+(l=s*u)}}return c}},{key:"getPointOnPath",value:function(t){var e=this.getPathLength(),r=0,n=null;if(t<-5e-5||t-5e-5>e)return null;var o,i=zW(this.dataArray);try{for(i.s();!(o=i.n()).done;){var a=o.value;if(!a||!(a.pathLength<5e-5||r+a.pathLength+5e-5<t)){var s=t-r,u=0;switch(a.type){case XK.LINE_TO:n=this.getPointOnLine(s,a.start.x,a.start.y,a.points[0],a.points[1],a.start.x,a.start.y);break;case XK.ARC:var l=a.points[4],c=a.points[5],f=a.points[4]+c;if(u=l+s/a.pathLength*c,c<0&&u<f||c>=0&&u>f)break;n=this.getPointOnEllipticalArc(a.points[0],a.points[1],a.points[2],a.points[3],u,a.points[6]);break;case XK.CURVE_TO:(u=s/a.pathLength)>1&&(u=1),n=this.getPointOnCubicBezier(u,a.start.x,a.start.y,a.points[0],a.points[1],a.points[2],a.points[3],a.points[4],a.points[5]);break;case XK.QUAD_TO:(u=s/a.pathLength)>1&&(u=1),n=this.getPointOnQuadraticBezier(u,a.start.x,a.start.y,a.points[0],a.points[1],a.points[2],a.points[3])}if(n)return n;break}r+=a.pathLength}}catch(t){i.e(t)}finally{i.f()}return null}},{key:"getLineLength",value:function(t,e,r,n){return Math.sqrt((r-t)*(r-t)+(n-e)*(n-e))}},{key:"getPathLength",value:function(){return-1===this.pathLength&&(this.pathLength=this.dataArray.reduce(function(t,e){return e.pathLength>0?t+e.pathLength:t},0)),this.pathLength}},{key:"getPointOnCubicBezier",value:function(t,e,r,n,o,i,a,s,u){return{x:s*wK(t)+i*_K(t)+n*OK(t)+e*EK(t),y:u*wK(t)+a*_K(t)+o*OK(t)+r*EK(t)}}},{key:"getPointOnQuadraticBezier",value:function(t,e,r,n,o,i,a){return{x:i*PK(t)+n*xK(t)+e*TK(t),y:a*PK(t)+o*xK(t)+r*TK(t)}}},{key:"getPointOnEllipticalArc",value:function(t,e,r,n,o,i){var a=Math.cos(i),s=Math.sin(i),u=r*Math.cos(o),l=n*Math.sin(o);return{x:t+(u*a-l*s),y:e+(u*s+l*a)}}},{key:"buildEquidistantCache",value:function(t,e){var r=this.getPathLength(),n=e||.25,o=t||r/100;if(!this.equidistantCache||this.equidistantCache.step!==o||this.equidistantCache.precision!==n){this.equidistantCache={step:o,precision:n,points:[]};for(var i=0,a=0;a<=r;a+=n){var s=this.getPointOnPath(a),u=this.getPointOnPath(a+n);s&&u&&((i+=this.getLineLength(s.x,s.y,u.x,u.y))>=o&&(this.equidistantCache.points.push({x:s.x,y:s.y,distance:a}),i-=o))}}}},{key:"getEquidistantPointOnPath",value:function(t,e,r){if(this.buildEquidistantCache(e,r),t<0||t-this.getPathLength()>5e-5)return null;var n=Math.round(t/this.getPathLength()*(this.equidistantCache.points.length-1));return this.equidistantCache.points[n]||null}}])}(),AY=/^\s*data:(([^/,;]+\/[^/,;]+)(?:;([^,;=]+=[^,;=]+))?)?(?:;(base64))?,(.*)$/i,jY=function(t){function e(t,r,n){var o;XW(this,e),(o=JW(this,e,[t,r,n])).type="image",o.loaded=!1;var i=o.getHrefAttribute().getString();if(!i)return WW(o);var a=i.endsWith(".svg")||/^\s*data:image\/svg\+xml/i.test(i);return t.images.push(o),a?o.loadSvg(i):o.loadImage(i),o.isSvg=a,o}return YW(e,ZK),$W(e,[{key:"loadImage",value:function(t){var e=this;return lW(oK().mark(function r(){var n;return oK().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,e.document.createImage(t);case 3:n=r.sent,e.image=n,r.next=10;break;case 7:r.prev=7,r.t0=r.catch(0),console.error('Error while loading image "'.concat(t,'":'),r.t0);case 10:e.loaded=!0;case 11:case"end":return r.stop()}},r,null,[[0,7]])}))()}},{key:"loadSvg",value:function(t){var e=this;return lW(oK().mark(function r(){var n,o,i,a;return oK().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n=AY.exec(t))){r.next=6;break}o=n[5],"base64"===n[4]?e.image=atob(o):e.image=decodeURIComponent(o),r.next=19;break;case 6:return r.prev=6,r.next=9,e.document.fetch(t);case 9:return i=r.sent,r.next=12,i.text();case 12:a=r.sent,e.image=a,r.next=19;break;case 16:r.prev=16,r.t0=r.catch(6),console.error('Error while loading image "'.concat(t,'":'),r.t0);case 19:e.loaded=!0;case 20:case"end":return r.stop()}},r,null,[[6,16]])}))()}},{key:"renderChildren",value:function(t){var e=this.document,r=this.image,n=this.loaded,o=this.getAttribute("x").getPixels("x"),i=this.getAttribute("y").getPixels("y"),a=this.getStyle("width").getPixels("x"),s=this.getStyle("height").getPixels("y");if(n&&r&&a&&s){if(t.save(),t.translate(o,i),this.isSvg){var u=e.canvg.forkString(t,this.image,{ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0,ignoreClear:!0,offsetX:0,offsetY:0,scaleWidth:a,scaleHeight:s});u.document.documentElement.parent=this,u.render()}else{var l=this.image;e.setViewBox({ctx:t,aspectRatio:this.getAttribute("preserveAspectRatio").getString(),width:a,desiredWidth:l.width,height:s,desiredHeight:l.height}),this.loaded&&(void 0===l.complete||l.complete)&&t.drawImage(l,0,0)}t.restore()}}},{key:"getBoundingBox",value:function(){var t=this.getAttribute("x").getPixels("x"),e=this.getAttribute("y").getPixels("y"),r=this.getStyle("width").getPixels("x"),n=this.getStyle("height").getPixels("y");return new QK(t,e,t+r,e+n)}}])}(),NY=function(t){function e(){var t;return XW(this,e),(t=JW(this,e,arguments)).type="symbol",t}return YW(e,ZK),$W(e,[{key:"render",value:function(t){}}])}(),IY=function(){return $W(function t(e){XW(this,t),this.document=e,this.loaded=!1,e.fonts.push(this)},[{key:"load",value:function(t,e){var r=this;return lW(oK().mark(function n(){var o,i,a;return oK().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,o=r.document,n.next=4,o.canvg.parser.load(e);case 4:i=n.sent,a=i.getElementsByTagName("font"),Array.from(a).forEach(function(e){var r=o.createElement(e);o.definitions[t]=r}),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(0),console.error('Error while loading font "'.concat(e,'":'),n.t0);case 12:r.loaded=!0;case 13:case"end":return n.stop()}},n,null,[[0,9]])}))()}}])}(),MY=function(t){function e(t,r,n){var o;return XW(this,e),(o=JW(this,e,[t,r,n])).type="style",iK(Array.from(r.childNodes).map(function(t){return t.textContent}).join("").replace(/(\/\*([^*]|[\r\n]|(\*+([^*/]|[\r\n])))*\*+\/)|(^[\s]*\/\/.*)/gm,"").replace(/@import.*;/g,"")).split("}").forEach(function(e){var r=e.trim();if(r){var n=r.split("{"),o=n[0].split(","),i=n[1].split(";");o.forEach(function(e){var r=e.trim();if(r){var n=t.styles[r]||{};if(i.forEach(function(e){var r=e.indexOf(":"),o=e.substr(0,r).trim(),i=e.substr(r+1,e.length-r).trim();o&&i&&(n[o]=new CK(t,o,i))}),t.styles[r]=n,t.stylesSpecificity[r]=function(t){var e=[0,0,0],r=t.replace(/:not\(([^)]*)\)/g,"     $1 ").replace(/{[\s\S]*/gm," "),n=0,o=eK(vK(r,lK),2);r=o[0],n=o[1],e[1]+=n;var i=eK(vK(r,cK),2);r=i[0],n=i[1],e[0]+=n;var a=eK(vK(r,fK),2);r=a[0],n=a[1],e[1]+=n;var s=eK(vK(r,pK),2);r=s[0],n=s[1],e[2]+=n;var u=eK(vK(r,hK),2);r=u[0],n=u[1],e[1]+=n;var l=eK(vK(r,yK),2);r=l[0],n=l[1],e[1]+=n;var c=eK(vK(r=r.replace(/[*\s+>~]/g," ").replace(/[#.]/g," "),dK),2);return r=c[0],n=c[1],e[2]+=n,e.join("")}(r),"@font-face"===r){var o=n["font-family"].getString().replace(/"|'/g,"");n.src.getString().split(",").forEach(function(e){if(e.indexOf('format("svg")')>0){var r=uK(e);r&&new IY(t).load(o,r)}})}}})}}),o}return YW(e,JK),$W(e)}();MY.parseExternalUrl=uK;var RY=function(t){function e(){var t;return XW(this,e),(t=JW(this,e,arguments)).type="use",t}return YW(e,ZK),$W(e,[{key:"setContext",value:function(t){HW(KW(e.prototype),"setContext",this).call(this,t);var r=this.getAttribute("x"),n=this.getAttribute("y");r.hasValue()&&t.translate(r.getPixels("x"),0),n.hasValue()&&t.translate(0,n.getPixels("y"))}},{key:"path",value:function(t){var e=this.element;e&&e.path(t)}},{key:"renderChildren",value:function(t){var e=this.document,r=this.element;if(r){var n=r;if("symbol"===r.type&&((n=new oY(e,null)).attributes.viewBox=new CK(e,"viewBox",r.getAttribute("viewBox").getString()),n.attributes.preserveAspectRatio=new CK(e,"preserveAspectRatio",r.getAttribute("preserveAspectRatio").getString()),n.attributes.overflow=new CK(e,"overflow",r.getAttribute("overflow").getString()),n.children=r.children,r.styles.opacity=new CK(e,"opacity",this.calculateOpacity())),"svg"===n.type){var o=this.getStyle("width",!1,!0),i=this.getStyle("height",!1,!0);o.hasValue()&&(n.attributes.width=new CK(e,"width",o.getString())),i.hasValue()&&(n.attributes.height=new CK(e,"height",i.getString()))}var a=n.parent;n.parent=this,n.render(t),n.parent=a}}},{key:"getBoundingBox",value:function(t){var e=this.element;return e?e.getBoundingBox(t):null}},{key:"elementTransform",value:function(){var t=this.document,e=this.element;return qK.fromElement(t,e)}},{key:"element",get:function(){return this.cachedElement||(this.cachedElement=this.getHrefAttribute().getDefinition()),this.cachedElement}}])}();function LY(t,e,r,n,o,i){return t[r*n*4+4*e+i]}function DY(t,e,r,n,o,i,a){t[r*n*4+4*e+i]=a}function BY(t,e,r){return t[e]*r}function FY(t,e,r,n){return e+Math.cos(t)*r+Math.sin(t)*n}var UY=function(t){function e(t,r,n){var o;XW(this,e),(o=JW(this,e,[t,r,n])).type="feColorMatrix";var i=aK(o.getAttribute("values").getString());switch(o.getAttribute("type").getString("matrix")){case"saturate":var a=i[0];i=[.213+.787*a,.715-.715*a,.072-.072*a,0,0,.213-.213*a,.715+.285*a,.072-.072*a,0,0,.213-.213*a,.715-.715*a,.072+.928*a,0,0,0,0,0,1,0,0,0,0,0,1];break;case"hueRotate":var s=i[0]*Math.PI/180;i=[FY(s,.213,.787,-.213),FY(s,.715,-.715,-.715),FY(s,.072,-.072,.928),0,0,FY(s,.213,-.213,.143),FY(s,.715,.285,.14),FY(s,.072,-.072,-.283),0,0,FY(s,.213,-.213,-.787),FY(s,.715,-.715,.715),FY(s,.072,.928,.072),0,0,0,0,0,1,0,0,0,0,0,1];break;case"luminanceToAlpha":i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.2125,.7154,.0721,0,0,0,0,0,0,1]}return o.matrix=i,o.includeOpacity=o.getAttribute("includeOpacity").hasValue(),o}return YW(e,JK),$W(e,[{key:"apply",value:function(t,e,r,n,o){for(var i=this.includeOpacity,a=this.matrix,s=t.getImageData(0,0,n,o),u=0;u<o;u++)for(var l=0;l<n;l++){var c=LY(s.data,l,u,n,0,0),f=LY(s.data,l,u,n,0,1),p=LY(s.data,l,u,n,0,2),h=LY(s.data,l,u,n,0,3),y=BY(a,0,c)+BY(a,1,f)+BY(a,2,p)+BY(a,3,h)+BY(a,4,1),d=BY(a,5,c)+BY(a,6,f)+BY(a,7,p)+BY(a,8,h)+BY(a,9,1),v=BY(a,10,c)+BY(a,11,f)+BY(a,12,p)+BY(a,13,h)+BY(a,14,1),m=BY(a,15,c)+BY(a,16,f)+BY(a,17,p)+BY(a,18,h)+BY(a,19,1);i&&(y=0,d=0,v=0,m*=h/255),DY(s.data,l,u,n,0,0,y),DY(s.data,l,u,n,0,1,d),DY(s.data,l,u,n,0,2,v),DY(s.data,l,u,n,0,3,m)}t.clearRect(0,0,n,o),t.putImageData(s,0,0)}}])}(),GY=function(t){function e(){var t;return XW(this,e),(t=JW(this,e,arguments)).type="mask",t}return YW(e,JK),$W(e,[{key:"apply",value:function(t,r){var n=this.document,o=this.getAttribute("x").getPixels("x"),i=this.getAttribute("y").getPixels("y"),a=this.getStyle("width").getPixels("x"),s=this.getStyle("height").getPixels("y");if(!a&&!s){var u=new QK;this.children.forEach(function(e){u.addBoundingBox(e.getBoundingBox(t))}),o=Math.floor(u.x1),i=Math.floor(u.y1),a=Math.floor(u.width),s=Math.floor(u.height)}var l=this.removeStyles(r,e.ignoreStyles),c=n.createCanvas(o+a,i+s),f=c.getContext("2d");n.screen.setDefaults(f),this.renderChildren(f),new UY(n,{nodeType:1,childNodes:[],attributes:[{nodeName:"type",value:"luminanceToAlpha"},{nodeName:"includeOpacity",value:"true"}]}).apply(f,0,0,o+a,i+s);var p=n.createCanvas(o+a,i+s),h=p.getContext("2d");n.screen.setDefaults(h),r.render(h),h.globalCompositeOperation="destination-in",h.fillStyle=f.createPattern(c,"no-repeat"),h.fillRect(0,0,o+a,i+s),t.fillStyle=h.createPattern(p,"no-repeat"),t.fillRect(0,0,o+a,i+s),this.restoreStyles(r,l)}},{key:"render",value:function(t){}}])}();GY.ignoreStyles=["mask","transform","clip-path"];var VY=function(){},zY=function(t){function e(){var t;return XW(this,e),(t=JW(this,e,arguments)).type="clipPath",t}return YW(e,JK),$W(e,[{key:"apply",value:function(t){var e=this.document,r=Reflect.getPrototypeOf(t),n=t.beginPath,o=t.closePath;r&&(r.beginPath=VY,r.closePath=VY),Reflect.apply(n,t,[]),this.children.forEach(function(n){if(void 0!==n.path){var i=void 0!==n.elementTransform?n.elementTransform():null;i||(i=qK.fromElement(e,n)),i&&i.apply(t),n.path(t),r&&(r.closePath=o),i&&i.unapply(t)}}),Reflect.apply(o,t,[]),t.clip(),r&&(r.beginPath=n,r.closePath=o)}},{key:"render",value:function(t){}}])}(),HY=function(t){function e(){var t;return XW(this,e),(t=JW(this,e,arguments)).type="filter",t}return YW(e,JK),$W(e,[{key:"apply",value:function(t,r){var n=this.document,o=this.children,i=r.getBoundingBox(t);if(i){var a=0,s=0;o.forEach(function(t){var e=t.extraFilterDistance||0;a=Math.max(a,e),s=Math.max(s,e)});var u=Math.floor(i.width),l=Math.floor(i.height),c=u+2*a,f=l+2*s;if(!(c<1||f<1)){var p=Math.floor(i.x),h=Math.floor(i.y),y=this.removeStyles(r,e.ignoreStyles),d=n.createCanvas(c,f),v=d.getContext("2d");n.screen.setDefaults(v),v.translate(-p+a,-h+s),r.render(v),o.forEach(function(t){"function"==typeof t.apply&&t.apply(v,0,0,c,f)}),t.drawImage(d,0,0,c,f,p-a,h-s,c,f),this.restoreStyles(r,y)}}}},{key:"render",value:function(t){}}])}();HY.ignoreStyles=["filter","transform","clip-path"];var qY={svg:oY,rect:iY,circle:aY,ellipse:sY,line:uY,polyline:lY,polygon:cY,path:$K,pattern:fY,marker:pY,defs:hY,linearGradient:vY,radialGradient:mY,stop:bY,animate:gY,animateColor:SY,animateTransform:wY,font:_Y,"font-face":OY,"missing-glyph":EY,glyph:tY,text:eY,tspan:rY,tref:PY,a:xY,textPath:kY,image:jY,g:yY,symbol:NY,style:MY,use:RY,mask:GY,clipPath:zY,filter:HY,feDropShadow:function(t){function e(t,r,n){var o;return XW(this,e),(o=JW(this,e,[t,r,n])).type="feDropShadow",o.addStylesFromStyleDefinition(),o}return YW(e,JK),$W(e,[{key:"apply",value:function(t,e,r,n,o){}}])}(),feMorphology:function(t){function e(){var t;return XW(this,e),(t=JW(this,e,arguments)).type="feMorphology",t}return YW(e,JK),$W(e,[{key:"apply",value:function(t,e,r,n,o){}}])}(),feComposite:function(t){function e(){var t;return XW(this,e),(t=JW(this,e,arguments)).type="feComposite",t}return YW(e,JK),$W(e,[{key:"apply",value:function(t,e,r,n,o){}}])}(),feColorMatrix:UY,feGaussianBlur:function(t){function e(t,r,n){var o;return XW(this,e),(o=JW(this,e,[t,r,n])).type="feGaussianBlur",o.blurRadius=Math.floor(o.getAttribute("stdDeviation").getNumber()),o.extraFilterDistance=o.blurRadius,o}return YW(e,JK),$W(e,[{key:"apply",value:function(t,e,r,n,o){var i=this.document,a=this.blurRadius,s=i.window?i.window.document.body:null,u=t.canvas;u.id=i.getUniqueId(),s&&(u.style.display="none",s.appendChild(u)),UW(u,e,r,n,o,a),s&&s.removeChild(u)}}])}(),title:function(t){function e(){var t;return XW(this,e),(t=JW(this,e,arguments)).type="title",t}return YW(e,JK),$W(e)}(),desc:function(t){function e(){var t;return XW(this,e),(t=JW(this,e,arguments)).type="desc",t}return YW(e,JK),$W(e)}()};function JY(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function WY(){return(WY=lW(oK().mark(function t(e){var r,n,o=arguments;return oK().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=o.length>1&&void 0!==o[1]&&o[1],n=document.createElement("img"),r&&(n.crossOrigin="Anonymous"),t.abrupt("return",new Promise(function(t,r){n.onload=function(){t(n)},n.onerror=function(t,e,n,o,i){r(i)},n.src=e}));case 4:case"end":return t.stop()}},t)}))).apply(this,arguments)}var KY=function(){function t(e){XW(this,t);var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.rootEmSize,o=void 0===n?12:n,i=r.emSize,a=void 0===i?12:i,s=r.createCanvas,u=void 0===s?t.createCanvas:s,l=r.createImage,c=void 0===l?t.createImage:l,f=r.anonymousCrossOrigin;this.canvg=e,this.definitions={},this.styles={},this.stylesSpecificity={},this.images=[],this.fonts=[],this.emSizeStack=[],this.uniqueId=0,this.screen=e.screen,this.rootEmSize=o,this.emSize=a,this.createCanvas=u,this.createImage=this.bindCreateImage(c,f),this.screen.wait(this.isImagesLoaded.bind(this)),this.screen.wait(this.isFontsLoaded.bind(this))}return $W(t,[{key:"bindCreateImage",value:function(t,e){return"boolean"==typeof e?function(r,n){return t(r,"boolean"==typeof n?n:e)}:t}},{key:"window",get:function(){return this.screen.window}},{key:"fetch",get:function(){return this.screen.fetch}},{key:"ctx",get:function(){return this.screen.ctx}},{key:"emSize",get:function(){var t=this.emSizeStack;return t[t.length-1]},set:function(t){this.emSizeStack.push(t)}},{key:"popEmSize",value:function(){this.emSizeStack.pop()}},{key:"getUniqueId",value:function(){return"canvg".concat(++this.uniqueId)}},{key:"isImagesLoaded",value:function(){return this.images.every(function(t){return t.loaded})}},{key:"isFontsLoaded",value:function(){return this.fonts.every(function(t){return t.loaded})}},{key:"createDocumentElement",value:function(t){var e=this.createElement(t.documentElement);return e.root=!0,e.addStylesFromStyleDefinition(),this.documentElement=e,e}},{key:"createElement",value:function(e){var r=e.nodeName.replace(/^[^:]+:/,""),n=t.elementTypes[r];return void 0!==n?new n(this,e):new WK(this,e)}},{key:"createTextNode",value:function(t){return new nY(this,t)}},{key:"setViewBox",value:function(t){this.screen.setViewBox(function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?JY(Object(r),!0).forEach(function(e){pW(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):JY(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}({document:this},t))}}])}();function YY(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function QY(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?YY(Object(r),!0).forEach(function(e){pW(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):YY(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}KY.createCanvas=function(t,e){var r=document.createElement("canvas");return r.width=t,r.height=e,r},KY.createImage=function(t){return WY.apply(this,arguments)},KY.elementTypes=qY;var XY=function(){function t(e,r){XW(this,t);var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.parser=new DK(n),this.screen=new MK(e,n),this.options=n;var o=new KY(this,n),i=o.createDocumentElement(r);this.document=o,this.documentElement=i}return $W(t,[{key:"fork",value:function(e,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return t.from(e,r,QY(QY({},this.options),n))}},{key:"forkString",value:function(e,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return t.fromString(e,r,QY(QY({},this.options),n))}},{key:"ready",value:function(){return this.screen.ready()}},{key:"isReady",value:function(){return this.screen.isReady()}},{key:"render",value:function(){var t=arguments,e=this;return lW(oK().mark(function r(){var n;return oK().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return n=t.length>0&&void 0!==t[0]?t[0]:{},e.start(QY({enableRedraw:!0,ignoreAnimation:!0,ignoreMouse:!0},n)),r.next=4,e.ready();case 4:e.stop();case 5:case"end":return r.stop()}},r)}))()}},{key:"start",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.documentElement,r=this.screen,n=this.options;r.start(e,QY(QY({enableRedraw:!0},n),t))}},{key:"stop",value:function(){this.screen.stop()}},{key:"resize",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.documentElement.resize(t,e,r)}}],[{key:"from",value:function(e,r){var n=arguments;return lW(oK().mark(function o(){var i,a,s;return oK().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return i=n.length>2&&void 0!==n[2]?n[2]:{},a=new DK(i),o.next=4,a.parse(r);case 4:return s=o.sent,o.abrupt("return",new t(e,s,i));case 6:case"end":return o.stop()}},o)}))()}},{key:"fromString",value:function(e,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new t(e,new DK(n).parseFromString(r),n)}}])}();function ZY(t,e,r){if(null!==t)for(var n,o,i,a,s,u,l,c,f=0,p=0,h=t.type,y="FeatureCollection"===h,d="Feature"===h,v=y?t.features.length:1,m=0;m<v;m++){s=(c=!!(l=y?t.features[m].geometry:d?t.geometry:t)&&"GeometryCollection"===l.type)?l.geometries.length:1;for(var b=0;b<s;b++){var g=0,S=0;if(null!==(a=c?l.geometries[b]:l)){u=a.coordinates;var w=a.type;switch(f=!r||"Polygon"!==w&&"MultiPolygon"!==w?0:1,w){case null:break;case"Point":if(!1===e(u,p,m,g,S))return!1;p++,g++;break;case"LineString":case"MultiPoint":for(n=0;n<u.length;n++){if(!1===e(u[n],p,m,g,S))return!1;p++,"MultiPoint"===w&&g++}"LineString"===w&&g++;break;case"Polygon":case"MultiLineString":for(n=0;n<u.length;n++){for(o=0;o<u[n].length-f;o++){if(!1===e(u[n][o],p,m,g,S))return!1;p++}"MultiLineString"===w&&g++,"Polygon"===w&&S++}"Polygon"===w&&g++;break;case"MultiPolygon":for(n=0;n<u.length;n++){for(S=0,o=0;o<u[n].length;o++){for(i=0;i<u[n][o].length-f;i++){if(!1===e(u[n][o][i],p,m,g,S))return!1;p++}S++}g++}break;case"GeometryCollection":for(n=0;n<a.geometries.length;n++)if(!1===ZY(a.geometries[n],e,r))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}var $Y=r(311),tQ=r.n($Y),eQ=r(304);var rQ=JSON.parse('[{"name":"克拉玛依市","coord":[85.01486759299489,45.406422237230046]},{"name":"昌吉回族自治州","coord":[88.7154624754753,44.26991024636568]},{"name":"石河子市","coord":[86.0208600035924,44.239045558096805]},{"name":"霍林郭勒市","coord":[114.73479243733115,44.16058374713977]},{"name":"本溪市","coord":[124.64357865201586,41.177197783134275]},{"name":"嘉峪关市","coord":[98.16891560537093,39.76279786284264]},{"name":"莱芜市","coord":[117.65723565456207,36.27916499211527]},{"name":"神农架林区","coord":[110.48296222218153,31.581260143666697]},{"name":"天门市","coord":[113.00615321481195,30.64105781887143]},{"name":"鄂州市","coord":[114.94764081970385,30.325634953844585]},{"name":"潜江市","coord":[112.70703817700621,30.349210666019893]},{"name":"仙桃市","coord":[113.34688900729822,30.315951161935402]},{"name":"萍乡市","coord":[113.88072263074415,27.47193090553213]},{"name":"台湾省","coord":[120.14338943402045,23.596002465926095]},{"name":"东莞市","coord":[113.89443658529342,22.897826158636448]},{"name":"中山市","coord":[113.37118387764659,22.501478858616522]},{"name":"珠海市","coord":[113.21799258934986,22.23782602992192]},{"name":"北海市","coord":[109.18248083043899,21.695773689750148]},{"name":"香港","coord":[114.20689279508653,22.36016760139811]},{"name":"舟山市","coord":[122.22514712841459,30.338633120695956]},{"name":"克孜勒苏柯尔克孜","coord":[74.62910472637343,39.59886016069875]},{"name":"喀什地区","coord":[77.19899922143753,37.85462871211595]},{"name":"阿克苏地区","coord":[81.43930290016381,41.067304799230456]},{"name":"和田地区","coord":[80.69780509160952,36.95287032287055]},{"name":"阿里地区","coord":[82.536487505389,32.69566569631762]},{"name":"日喀则地区","coord":[86.5996831353606,29.54861754814263]},{"name":"那曲地区","coord":[88.32523292667608,33.20600450932715]},{"name":"玉树藏族自治州","coord":[95.2107128446203,33.90320387919257]},{"name":"迪庆藏族自治州","coord":[99.42465312188943,28.052797714348895]},{"name":"怒江傈傈族自治州","coord":[98.85737910439825,26.98345757528851]},{"name":"大理白族自治州","coord":[99.93934374816013,25.684737357453045]},{"name":"德宏傣族景颇族自","coord":[98.13830877778075,24.593421919561205]},{"name":"保山市","coord":[99.19031013453166,24.979380341662]},{"name":"临沧市","coord":[99.62483778975081,24.058807858948214]},{"name":"普洱市","coord":[100.94440267992684,23.44121660743221]},{"name":"西双版纳傣族自治","coord":[100.86105801845994,21.882475641324206]},{"name":"拉萨市","coord":[91.3684790613129,30.14176592960237]},{"name":"山南地区","coord":[92.11665242621062,28.33000201578789]},{"name":"林芝地区","coord":[94.9307847458166,29.125110156601963]},{"name":"昌都地区","coord":[97.33912235873476,30.48520825551814]},{"name":"丽江市","coord":[100.65713436205135,26.96190318191959]},{"name":"攀枝花市","coord":[101.73355913301131,26.714486678752795]},{"name":"凉山彝族自治州","coord":[102.08678551422615,27.683020519860396]},{"name":"楚雄彝族自治州","coord":[101.68264761198458,25.369603845264024]},{"name":"红河哈尼族彝族自","coord":[102.95101719613119,23.624860095239875]},{"name":"文山壮族苗族自治","coord":[104.8708359910614,23.579587266862504]},{"name":"百色市","coord":[106.69546907589859,23.98220841166522]},{"name":"崇左市","coord":[107.3277087317123,22.49769755349952]},{"name":"防城港市","coord":[107.88939931155171,21.94550204069006]},{"name":"南宁市","coord":[108.67078983716917,23.12207641861882]},{"name":"钦州市","coord":[108.8532307305186,22.157690108421384]},{"name":"玉林市","coord":[110.26918466489103,22.391823643610415]},{"name":"湛江市","coord":[109.93033457863683,21.086751055633457]},{"name":"茂名市","coord":[110.80336192333934,22.069184739040775]},{"name":"阳江市","coord":[111.70471342186183,22.108751366417575]},{"name":"江门市","coord":[112.53715618649149,22.297368082806777]},{"name":"广州市","coord":[113.4949302208309,23.28359314707863]},{"name":"清远市","coord":[113.10957368131268,24.334444053233856]},{"name":"肇庆市","coord":[112.11117530204233,23.60241158796112]},{"name":"梧州市","coord":[111.01709510772797,23.518132876753846]},{"name":"贺州市","coord":[111.50423061842756,24.4095096817199]},{"name":"桂林市","coord":[110.44046163393094,25.353966673735407]},{"name":"柳州市","coord":[109.34854449214147,24.972408051485047]},{"name":"河池市","coord":[107.81191841865586,24.649291651298164]},{"name":"黔东南苗族侗族自","coord":[108.39952601614591,26.429286420465576]},{"name":"贵阳市","coord":[106.59784062851153,26.797907456479816]},{"name":"安顺市","coord":[105.76161265300635,25.988644902171018]},{"name":"黔西南布依族苗族","coord":[105.5954078788574,25.404850939549405]},{"name":"曲靖市","coord":[103.9164335632742,25.697243690315265]},{"name":"六盘水市","coord":[104.77723228072432,26.15402255629164]},{"name":"毕节地区","coord":[105.03867422931839,27.077913968069666]},{"name":"昭通市","coord":[104.29730513046874,27.62418247971078]},{"name":"宜宾市","coord":[104.76748901448207,28.553501804266475]},{"name":"乐山市","coord":[103.56027669102787,29.160754519210577]},{"name":"自贡市","coord":[104.63272827056402,29.273152614922402]},{"name":"内江市","coord":[104.82644562304716,29.61272653799929]},{"name":"遵义市","coord":[106.82413636302059,28.191847588570702]},{"name":"达州市","coord":[107.59704170009518,31.32138258839703]},{"name":"遂宁市","coord":[105.48979445433736,30.677687821242678]},{"name":"广安市","coord":[106.56708164098042,30.43500706741521]},{"name":"泸州市","coord":[105.42591761727707,28.50277238478137]},{"name":"资阳市","coord":[104.97995126874034,30.154251886139654]},{"name":"雅安市","coord":[102.69931299964517,29.892630706195035]},{"name":"眉山市","coord":[104.07052881858888,29.894202166560405]},{"name":"甘孜藏族自治州","coord":[100.50721042614238,30.975216556269658]},{"name":"果洛藏族自治州","coord":[99.30775565051923,34.03539865224808]},{"name":"海南藏族自治州","coord":[100.39969108016373,35.90048272566899]},{"name":"黄南藏族自治州","coord":[101.5360706381689,35.10286360841902]},{"name":"赣南藏族自治州","coord":[102.97083885806067,34.326752803339026]},{"name":"陇南市","coord":[105.24780098912132,33.57031117443431]},{"name":"天水市","coord":[105.53503634660417,34.62320421368087]},{"name":"定西市","coord":[104.58787768541339,35.08900966621695]},{"name":"临夏回族自治州","coord":[103.2612870434902,35.591577124455235]},{"name":"西宁市","coord":[101.57680657999033,36.84800271717157]},{"name":"海东地区","coord":[102.30909850729282,36.287400615025646]},{"name":"海北藏族自治州","coord":[100.27122484450717,37.892557516083826]},{"name":"金昌市","coord":[102.02244049169511,38.497330414886164]},{"name":"酒泉市","coord":[95.94486678270127,40.56891536586272]},{"name":"海西蒙古族藏族自","coord":[94.67143298050689,36.022725148503724]},{"name":"巴音郭楞蒙古自治","coord":[88.18116214759745,39.556478810319916]},{"name":"哈密地区","coord":[93.84302392518026,42.95015211178875]},{"name":"叶鲁番地区","coord":[89.82035217277885,42.399368632283505]},{"name":"乌鲁木齐市","coord":[88.00048109561487,43.549986370786]},{"name":"阿勒泰地区","coord":[88.11213933257655,47.05593413019629]},{"name":"博尔塔拉蒙古自治","coord":[82.26402238163408,44.671135542630864]},{"name":"伊犁哈萨克自治州","coord":[82.80778717477179,43.53783381365267]},{"name":"阿拉善盟","coord":[103.29923966842289,40.10955801781495]},{"name":"武威市","coord":[102.73362058791429,37.94211141321436]},{"name":"兰州市","coord":[103.73793563506032,36.27379827886003]},{"name":"中卫市","coord":[105.6943786030716,37.20654236148948]},{"name":"银川市","coord":[106.20022174140034,38.52103167597483]},{"name":"石嘴山市","coord":[106.41544011793628,38.84054137571417]},{"name":"乌海市","coord":[106.8984175998405,39.54616572239788]},{"name":"鄂尔多斯市","coord":[108.43285571424619,39.24036799350715]},{"name":"巴彦淖尔市","coord":[107.45840392808307,41.30159860424196]},{"name":"包头市","coord":[110.46472193224272,41.48017783644221]},{"name":"呼和浩特市","coord":[111.48365173603975,40.498363056149884]},{"name":"乌兰察布市","coord":[112.61568977597707,41.75789561273154]},{"name":"大同市","coord":[113.7107192749083,39.898956799744184]},{"name":"朔州市","coord":[112.65428748167508,39.681772914701924]},{"name":"忻州市","coord":[112.36127575589583,38.88990233614568]},{"name":"榆林市","coord":[109.68473112169593,38.19921027134876]},{"name":"延安市","coord":[109.52425222161318,36.406522726136814]},{"name":"庆阳市","coord":[107.73052193155061,36.183821532624464]},{"name":"固原市","coord":[106.20191575442442,36.11634909496382]},{"name":"白银市","coord":[104.68634478137065,36.51582865625868]},{"name":"宝鸡市","coord":[107.33534779230747,34.3387216485855]},{"name":"汉中市","coord":[107.03534754266246,33.00142998064871]},{"name":"广元市","coord":[105.92928137563939,32.21872447205537]},{"name":"巴中市","coord":[107.03422410306194,31.99874720836291]},{"name":"南充市","coord":[106.32964805032347,31.156657700184095]},{"name":"绵阳市","coord":[104.58949560201106,31.88628780630976]},{"name":"德阳市","coord":[104.41542984932845,31.110558133718676]},{"name":"成都市","coord":[103.8852290010473,30.777258040348634]},{"name":"阿坝藏族羌族自治","coord":[102.26209319552814,32.45725845387284]},{"name":"安康市","coord":[109.14236501848015,32.77467694678074]},{"name":"十堰市","coord":[110.39934083416314,32.376209039347906]},{"name":"襄阳市","coord":[111.97539147094662,31.93399822417465]},{"name":"宜昌市","coord":[111.22204852395754,30.772457669035354]},{"name":"恩施市","coord":[109.42158366502872,30.260366574390105]},{"name":"张家界市","coord":[110.59760006538717,29.330107409240718]},{"name":"吉首市","coord":[109.72176899848378,28.681903937242495]},{"name":"铜仁地区","coord":[108.54247523485463,28.11736237519646]},{"name":"重庆市","coord":[107.86007108564992,30.186253395053196]},{"name":"怀化市","coord":[109.94325166787243,27.43919084801186]},{"name":"益阳市","coord":[112.43060358108062,28.75127294553697]},{"name":"娄底市","coord":[111.41891416951897,27.696312460064604]},{"name":"常德市","coord":[111.72571610131646,29.27189463838195]},{"name":"荆州市","coord":[112.65896596965268,30.05161542755362]},{"name":"荆门市","coord":[112.6586855902184,31.01267124474617]},{"name":"岳阳市","coord":[113.2595036144316,29.106247116930163]},{"name":"长沙市","coord":[113.15415586456598,28.222934680488425]},{"name":"湘潭市","coord":[112.51092596317824,27.69881544105668]},{"name":"株州市","coord":[113.49665538546823,27.03993794610501]},{"name":"衡阳市","coord":[112.48849636578527,26.783613569970782]},{"name":"邵阳市","coord":[110.6723832117475,26.81652287086792]},{"name":"永州市","coord":[111.8565364154186,25.768488267811968]},{"name":"韶关市","coord":[113.53420325850979,24.69848878771937]},{"name":"惠州市","coord":[114.32029589634925,23.25504544231892]},{"name":"佛山市","coord":[112.95925897403649,23.10116677189257]},{"name":"云浮市","coord":[111.78042514904234,22.840400494105687]},{"name":"深圳市","coord":[114.13138648919008,22.649563063468342]},{"name":"汕尾市","coord":[115.57412892884373,23.06989642104901]},{"name":"河源市","coord":[114.89746229844398,23.97971937124767]},{"name":"揭阳市","coord":[116.04290004239446,23.304802704715357]},{"name":"汕头市","coord":[116.7008461897183,23.35898625947344]},{"name":"潮州市","coord":[116.75405548481658,23.854381508863064]},{"name":"梅州市","coord":[116.13719397345734,24.15633544812716]},{"name":"漳州市","coord":[117.38279760543345,24.41111215459575]},{"name":"厦门市","coord":[118.04275971554665,24.675908246507944]},{"name":"龙岩市","coord":[116.69341144552507,25.20284542644492]},{"name":"泉州市","coord":[118.12035864630246,25.22984144365049]},{"name":"莆田市","coord":[118.82439690138142,25.439653480972687]},{"name":"福州市","coord":[119.1608285845262,25.99117532466728]},{"name":"三明市","coord":[117.51188176216434,26.318292906961602]},{"name":"南平市","coord":[118.16153136678187,27.306303151805437]},{"name":"抚州市","coord":[116.3455359885574,27.487043655935366]},{"name":"鹰潭市","coord":[117.01082360702333,28.241253742969946]},{"name":"吉安市","coord":[114.91377151807418,26.957486660664525]},{"name":"赣州市","coord":[115.046455717572,25.81565075681663]},{"name":"郴州市","coord":[113.1544526703492,25.871927095452524]},{"name":"新余市","coord":[114.94161795877827,27.79044654578371]},{"name":"宜春市","coord":[115.04574494880995,28.306428044943356]},{"name":"南昌市","coord":[115.9963824234495,28.664803351584705]},{"name":"九江市","coord":[115.53225905704193,29.362905920276297]},{"name":"上饶市","coord":[117.8595355766598,28.765755150094634]},{"name":"景德镇市","coord":[117.25387030721845,29.33426823662448]},{"name":"黄山市","coord":[117.85476357809696,29.969632034273722]},{"name":"池州市","coord":[117.34517113140791,30.208089337922335]},{"name":"铜陵市","coord":[117.93160431300694,30.926442655001676]},{"name":"安庆市","coord":[116.54307680610799,30.524265461641296]},{"name":"黄石市","coord":[115.02354597728443,29.924060229331015]},{"name":"咸宁市","coord":[114.26967602231792,29.652174021136048]},{"name":"黄冈市","coord":[115.2859016705373,30.65856897065683]},{"name":"武汉市","coord":[114.34552076948799,30.68836237966767]},{"name":"随州市","coord":[113.3850627838818,31.87891659924412]},{"name":"信阳市","coord":[114.81374730587638,32.0309685135914]},{"name":"驻马店市","coord":[114.07756451509235,32.896720987266114]},{"name":"商洛市","coord":[109.82044421310393,33.77403373563189]},{"name":"西安市","coord":[109.11839808451401,34.225257215515896]},{"name":"渭南市","coord":[109.75732444226935,35.025913644359306]},{"name":"铜川市","coord":[108.98695328111377,35.19235092947735]},{"name":"咸阳市","coord":[108.36398776446165,34.84311348287181]},{"name":"三门峡市","coord":[110.80049688104964,34.31818709571671]},{"name":"运城市","coord":[111.1736679525165,35.19010372283576]},{"name":"洛阳市","coord":[111.87577573098216,34.33379926109848]},{"name":"平顶山市","coord":[112.80931281928427,33.759895800153096]},{"name":"漯河市","coord":[113.83505724178012,33.70034266174508]},{"name":"许昌市","coord":[113.78762484088509,34.051835688452435]},{"name":"郑州市","coord":[113.49619951867594,34.61181797865449]},{"name":"焦作市","coord":[113.13404280173008,35.134167097471625]},{"name":"晋城市","coord":[112.7495732073233,35.63186423091449]},{"name":"长治市","coord":[112.85900842873183,36.45872910742828]},{"name":"临汾市","coord":[111.49379787924448,36.22810800777857]},{"name":"太原市","coord":[112.15628804033796,37.91704444063036]},{"name":"吕梁市","coord":[111.31901105774872,37.712740463356496]},{"name":"晋中市","coord":[113.08199599739676,37.36532613794343]},{"name":"邯郸市","coord":[114.41824047234618,36.530119932543315]},{"name":"安阳市","coord":[113.88883283163116,35.7797611183252]},{"name":"鹤壁市","coord":[114.3654094911545,35.75770487428472]},{"name":"新乡市","coord":[113.9184107718167,35.348471214026716]},{"name":"开封市","coord":[114.52801677500626,34.61371216679872]},{"name":"周口市","coord":[114.88509782391864,33.69999759722657]},{"name":"阜阳市","coord":[115.44595951398213,32.98060371610532]},{"name":"淮南市","coord":[116.68941991880993,32.79972275772595]},{"name":"蚌埠市","coord":[117.38594715783302,33.106729536033896]},{"name":"淮北市","coord":[116.69651711889378,33.69527529383458]},{"name":"宿州市","coord":[117.30175405886838,33.943330421260015]},{"name":"亳州市","coord":[116.12410804185097,33.46769392946132]},{"name":"商丘市","coord":[115.59575176872548,34.28339840831147]},{"name":"菏泽市","coord":[115.53631974831816,35.197319393220624]},{"name":"濮阳市","coord":[115.3070485514902,35.775883510964334]},{"name":"聊城市","coord":[115.8870069012884,36.40529594548765]},{"name":"邢台市","coord":[114.74259008644859,37.251396750084155]},{"name":"石家庄市","coord":[114.56923838363613,38.13141710980106]},{"name":"阳泉市","coord":[113.39216149668508,38.09075470547468]},{"name":"保定市","coord":[115.261524468934,39.09118520781398]},{"name":"衡水市","coord":[115.8182936677897,37.715661598187154]},{"name":"德州市","coord":[116.4582273790399,37.19372347888644]},{"name":"沧州市","coord":[116.76192710911863,38.20240042039232]},{"name":"廊坊市","coord":[116.50410772133856,39.27896741763884]},{"name":"天津市","coord":[117.31988934444873,39.37154482470619]},{"name":"北京市","coord":[116.59734730757869,40.237112944270976]},{"name":"张家口市","coord":[115.1823606483226,40.83732566607167]},{"name":"唐山市","coord":[117.8693184261954,39.71862889477249]},{"name":"秦皇岛市","coord":[119.30467355367742,39.990574652162564]},{"name":"承德市","coord":[117.16275671911026,41.36623845548547]},{"name":"葫芦岛市","coord":[119.9342336210531,40.5628822626519]},{"name":"朝阳市","coord":[120.11853493535794,41.471852354885755]},{"name":"赤峰市","coord":[118.50943546234379,43.25452976059767]},{"name":"锦州市","coord":[121.5167549323861,41.45933087433065]},{"name":"营口市","coord":[122.58571915054674,40.42093503997384]},{"name":"丹东市","coord":[124.33549382902183,40.46369290272115]},{"name":"辽阳市","coord":[123.34064798039414,41.152331397771356]},{"name":"盘锦市","coord":[122.06718005354679,41.05573599862555]},{"name":"阜新市","coord":[121.93889757908204,42.27641773244204]},{"name":"鞍山市","coord":[122.78904432242356,40.77781183142038]},{"name":"沈阳市","coord":[122.99508899709724,42.1162195010079]},{"name":"铁岭市","coord":[124.23100515588399,42.72666083611828]},{"name":"扶顺市","coord":[124.46027188217573,41.82955407638859]},{"name":"通辽市","coord":[122.0729370657937,43.90889130864869]},{"name":"兴安盟","coord":[120.79456431092532,45.92003249442161]},{"name":"白城市","coord":[123.10619907715235,45.25475749267784]},{"name":"齐齐哈尔市","coord":[124.5462214659102,47.55395009317394]},{"name":"大兴安岭地区","coord":[124.50992855161529,52.18438447846694]},{"name":"黑河市","coord":[127.14721400335922,49.25080134026901]},{"name":"大庆市","coord":[124.40329830095243,46.401048760966745]},{"name":"绥化市","coord":[126.5214484055605,46.76992452194825]},{"name":"松原市","coord":[124.21244334807682,44.75779381338502]},{"name":"四平市","coord":[124.27839350328821,43.52139065090318]},{"name":"通化市","coord":[125.67392830706305,41.91771808663852]},{"name":"辽源市","coord":[125.33529527643432,42.758340204944986]},{"name":"吉林市","coord":[126.83350281902375,43.60730120049175]},{"name":"长春市","coord":[125.53597875970374,44.24624314701737]},{"name":"白山市","coord":[127.16780160322108,42.093893880305075]},{"name":"哈尔滨市","coord":[127.39125008786029,45.36200668820575]},{"name":"鹤岗市","coord":[130.4703811258197,47.66520688940109]},{"name":"伊春市","coord":[128.91240831703635,47.93833794565277]},{"name":"七台河市","coord":[131.2677920224311,45.945099776108584]},{"name":"鸡西市","coord":[132.38059153660274,45.722934218318535]},{"name":"双鸭山市","coord":[132.3184817002743,46.65813679030265]},{"name":"佳木斯市","coord":[132.26174446608726,47.17569713691394]},{"name":"呼伦贝尔市","coord":[122.3210739998419,50.18176996070858]},{"name":"孝感市","coord":[113.83749892135485,31.11757234692128]},{"name":"贵港市","coord":[110.07354588052804,23.380735604767374]},{"name":"黔南布依族苗族自","coord":[107.30931767543106,26.2976919432269]},{"name":"宁德市","coord":[119.52482556634342,27.013151692716413]},{"name":"温州市","coord":[120.30037042732202,27.8699145504001]},{"name":"台州市","coord":[120.88886782713843,28.670799172772313]},{"name":"丽水市","coord":[119.56796851966463,28.170268394477755]},{"name":"衢州市","coord":[118.79479802644406,28.865874397158763]},{"name":"金华市","coord":[119.99381920686633,29.093455548185744]},{"name":"绍兴市","coord":[120.46546691682343,29.69382513836818]},{"name":"宁波市","coord":[121.42142987830871,29.70001162878972]},{"name":"杭州市","coord":[119.4405685790891,29.87218307296989]},{"name":"宣城市","coord":[118.68748382914703,30.628143499626418]},{"name":"湖州市","coord":[119.98261306633574,30.7945175862809]},{"name":"嘉兴市","coord":[120.83889215988998,30.67538495499343]},{"name":"上海市","coord":[121.37534147322967,31.25628247908459]},{"name":"苏州市","coord":[120.6906182622391,31.381280695137775]},{"name":"无锡市","coord":[120.32182300914366,31.54113306724517]},{"name":"常州市","coord":[119.61953292830165,31.611878565375576]},{"name":"南京市","coord":[118.71890548838064,31.910863187910323]},{"name":"镇江市","coord":[119.42349332902813,31.97942313430778]},{"name":"合肥市","coord":[117.30651975617157,31.79407863049138]},{"name":"六安市","coord":[116.24668220575353,31.820846193819513]},{"name":"滁州市","coord":[117.88422385307969,32.51792621904418]},{"name":"泰州市","coord":[120.03124303305091,32.56503102346783]},{"name":"南通市","coord":[120.85599446760912,32.18496706099728]},{"name":"盐城市","coord":[120.01812490612667,33.54219948734023]},{"name":"淮安市","coord":[119.0749424205415,33.39203631772854]},{"name":"宿迁市","coord":[118.45404943216346,33.666258719120265]},{"name":"徐州市","coord":[117.77482249295966,34.30847766157078]},{"name":"济宁市","coord":[116.74147276546373,35.27488504351119]},{"name":"枣庄市","coord":[117.43359942491492,34.884162021736]},{"name":"连云港市","coord":[119.01553213785074,34.54316517587849]},{"name":"临沂市","coord":[118.31478835349617,35.28173079028279]},{"name":"日照市","coord":[119.14265350444272,35.54479073199592]},{"name":"青岛市","coord":[120.27779044405756,36.3464117375903]},{"name":"威海市","coord":[122.12963327195605,37.13879077904251]},{"name":"烟台市","coord":[120.7689567423966,37.19772002195597]},{"name":"潍坊市","coord":[119.02178548592039,36.49292234053931]},{"name":"淄博市","coord":[117.92936024367185,36.60871347163638]},{"name":"泰安市","coord":[116.93810893944303,36.0423330118612]},{"name":"济南市","coord":[117.34560282551296,36.769574973846304]},{"name":"东营市","coord":[118.4915054457184,37.52194690335787]},{"name":"滨州市","coord":[117.67610299757533,37.4439597758601]},{"name":"昆明市","coord":[102.93100245594789,25.481300763922075]},{"name":"玉溪市","coord":[102.23080854291823,24.156168324611663]},{"name":"塔城地区","coord":[83.60908162840168,45.3721852373893]},{"name":"张掖市","coord":[100.47710030600572,38.704239320458385]},{"name":"南阳市","coord":[112.1400670951149,33.03033276715801]},{"name":"扬州市","coord":[119.48949608990988,32.80956776339646]},{"name":"延边朝鲜族自治州","coord":[129.3577692895626,43.24968794080283]},{"name":"牡丹江市","coord":[129.87240796405672,44.7073040108322]},{"name":"澳门","coord":[113.56289691515346,22.14602596262204]},{"name":"吴忠市","coord":[106.76894508116403,37.72566765880316]},{"name":"来宾市","coord":[109.25592217010114,23.86346274681084]},{"name":"平凉市","coord":[107.0708132782897,35.30329631658711]},{"name":"马鞍山市","coord":[118.27245878467022,31.657727937739004]},{"name":"芜湖市","coord":[118.32992684415504,31.081688223101658]},{"name":"澄迈县","coord":[110.04198076060266,19.694955078668105]},{"name":"保亭黎族苗族自治","coord":[109.6055304964257,18.6101488675304]},{"name":"乐东黎族自治县","coord":[109.04051999525574,18.643137437909203]},{"name":"儋州市","coord":[109.3431358337404,19.550974957403195]},{"name":"定安县","coord":[110.38744429685676,19.47557074114284]},{"name":"屯昌县","coord":[110.00574767630334,19.367175093044388]},{"name":"白沙黎族自治县","coord":[109.36860737761768,19.214416393082217]},{"name":"琼中黎族苗族自治","coord":[109.86691465937548,19.073671135862682]},{"name":"东方市","coord":[108.86903802405428,19.017352815445214]},{"name":"昌江黎族自治县","coord":[108.9686431884767,19.182594167127824]},{"name":"海口市","coord":[110.420654296875,19.806565564640795]},{"name":"济源市","coord":[112.38051465474433,35.07958362422394]},{"name":"五指山市","coord":[109.53595187364496,18.832908264613966]},{"name":"大连市","coord":[121.96662235866603,39.444150542439914]},{"name":"文昌市三沙市","coord":[110.81828537536748,19.756501444162936]},{"name":"三亚市","coord":[109.38424600793707,18.39186315877128]},{"name":"万宁市","coord":[110.28485046979574,18.860240588635115]},{"name":"陵水黎族自治县","coord":[109.95577603229562,18.594712684620465]},{"name":"临高县","coord":[109.71915395436967,19.79420403032508]},{"name":"琼海市","coord":[110.41650700703043,19.22315873149372]}]'),nQ=JSON.parse('[{"name":"黑龙江省","coord":[127.64559817675396,48.48668098449708]},{"name":"内蒙古自治区","coord":[118.34519572208615,45.370218276977525]},{"name":"新疆维吾尔自治区","coord":[87.13479065593184,41.75497055053711]},{"name":"吉林省","coord":[126.12985278813787,43.57983207702637]},{"name":"辽宁省","coord":[124.02494773936439,41.105743408203125]},{"name":"甘肃省","coord":[102.87785725633012,37.69582366943361]},{"name":"河北省","coord":[115.66327227481898,39.33383178710938]},{"name":"北京市","coord":[116.62199343603638,40.25053787231445]},{"name":"山西省","coord":[112.45180235808988,37.666561126708984]},{"name":"天津市","coord":[117.35711842642581,39.406789779663086]},{"name":"陕西省","coord":[109.56294003056632,35.64754199981689]},{"name":"宁夏回族自治区","coord":[105.96110877640074,37.3081169128418]},{"name":"青海省","coord":[96.07301048277901,35.44417190551758]},{"name":"山东省","coord":[118.03833752951093,36.29800605773925]},{"name":"西藏自治区","coord":[87.47361520439412,31.6703872680664]},{"name":"河南省","coord":[113.07832397097275,33.87751102447509]},{"name":"江苏省","coord":[119.93926538201052,32.945452690124505]},{"name":"安徽省","coord":[117.15146765881019,32.024482727050774]},{"name":"四川省","coord":[102.28998890142759,30.182161331176758]},{"name":"湖北省","coord":[112.87798261431585,31.157071113586426]},{"name":"重庆市","coord":[107.870126637831,30.188085556030266]},{"name":"上海市","coord":[121.42561166015514,31.276043891906745]},{"name":"浙江省","coord":[119.75337092707514,29.175934791564945]},{"name":"湖南省","coord":[111.52770282777405,27.38110256195069]},{"name":"江西省","coord":[115.51091280655628,27.283511161804206]},{"name":"云南省","coord":[101.27053825991308,25.19783210754396]},{"name":"贵州省","coord":[106.49672346773299,26.92267990112305]},{"name":"福建省","coord":[117.9976766946587,25.939599990844727]},{"name":"广西壮族自治区","coord":[108.98706831086302,23.891559600830078]},{"name":"台湾省","coord":[120.82468432537434,23.602651596069336]},{"name":"香港特别行政区","coord":[114.21036850371561,22.374858856201172]},{"name":"海南省","coord":[109.62792940960824,19.163116455078125]},{"name":"广东省","coord":[113.32127888266032,22.873867034912106]},{"name":"澳门特别行政区","coord":[113.56819996291901,22.160347992976]}]');function oQ(t,e){if("string"==typeof(n=e)&&n.constructor===String){var r=t.substr(0,2);return"张家"===r&&(r=t.substr(0,3)),!!e.match(new RegExp(r))}var n;return!1}function iQ(t){return function(t){if(Array.isArray(t))return aQ(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return aQ(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return aQ(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function aQ(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function sQ(){sQ=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),s=new A(n||[]);return o(a,"_invoke",{value:x(t,r,s)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var p="suspendedStart",h="suspendedYield",y="executing",d="completed",v={};function m(){}function b(){}function g(){}var S={};l(S,a,function(){return this});var w=Object.getPrototypeOf,_=w&&w(w(j([])));_&&_!==r&&n.call(_,a)&&(S=_);var O=g.prototype=m.prototype=Object.create(S);function E(t){["next","throw","return"].forEach(function(e){l(t,e,function(t){return this._invoke(e,t)})})}function P(t,e){function r(o,i,a,s){var u=f(t[o],t,i);if("throw"!==u.type){var l=u.arg,c=l.value;return c&&"object"==cQ(c)&&n.call(c,"__await")?e.resolve(c.__await).then(function(t){r("next",t,a,s)},function(t){r("throw",t,a,s)}):e.resolve(c).then(function(t){l.value=t,a(l)},function(t){return r("throw",t,a,s)})}s(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e(function(e,o){r(t,n,e,o)})}return i=i?i.then(o,o):o()}})}function x(e,r,n){var o=p;return function(i,a){if(o===y)throw Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var u=T(s,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var l=f(e,r,n);if("normal"===l.type){if(o=n.done?d:h,l.arg===v)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=d,n.method="throw",n.arg=l.arg)}}}function T(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,T(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function A(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function j(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(cQ(e)+" is not iterable")}return b.prototype=g,o(O,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=l(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,l(t,u,"GeneratorFunction")),t.prototype=Object.create(O),t},e.awrap=function(t){return{__await:t}},E(P.prototype),l(P.prototype,s,function(){return this}),e.AsyncIterator=P,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new P(c(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next()})},E(O),l(O,u,"Generator"),l(O,a,function(){return this}),l(O,"toString",function(){return"[object Generator]"}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=j,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(k),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),k(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;k(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:j(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function uQ(t,e,r,n,o,i,a){try{var s=t[i](a),u=s.value}catch(t){return void r(t)}s.done?e(u):Promise.resolve(u).then(n,o)}function lQ(t){return function(){var e=this,r=arguments;return new Promise(function(n,o){var i=t.apply(e,r);function a(t){uQ(i,n,o,a,s,"next",t)}function s(t){uQ(i,n,o,a,s,"throw",t)}a(void 0)})}}function cQ(t){"@babel/helpers - typeof";return(cQ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function fQ(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,pQ(n.key),n)}}function pQ(t){var e=function(t,e){if("object"!=cQ(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=cQ(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==cQ(e)?e:e+""}var hQ=["GoogleCRS84Quad","GoogleMapsCompatible","urn:ogc:def:wkss:OGC:1.0:GoogleMapsCompatible","urn:ogc:def:wkss:OGC:1.0:GoogleCRS84Quad"],yQ=[559082264.0287178,279541132.0143589,139770566.00717944,69885283.00358972,34942641.50179486,17471320.75089743,8735660.375448715,4367830.1877243575,2183915.0938621787,1091957.5469310894,545978.7734655447,272989.38673277234,136494.69336638617,68247.34668319309,34123.67334159654,17061.83667079827,8530.918335399136,4265.459167699568,2132.729583849784,1066.364791924892,533.182395962446,266.591197981223,133.2955989906115],dQ=[559082264.0287176,279541132.0143588,139770566.0071794,69885283.0035897,34942641.50179485,17471320.750897426,8735660.375448713,4367830.187724357,2183915.0938621783,1091957.5469310891,545978.7734655446,272989.3867327723,136494.69336638614,68247.34668319307,34123.673341596535,17061.836670798268,8530.918335399134,4265.459167699567,2132.7295838497835,1066.3647919248917,533.1823959624459,266.59119798122293,133.29559899061147],vQ=function(){return t=function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),"string"==typeof e||"number"==typeof e?this.mapId=e:null!==e&&"object"===cQ(e)&&(this.mapInfo=e),this.serverUrl=r.serverUrl||"https://www.supermapol.com",this.accessToken=r.accessToken,this.accessKey=r.accessKey,this.credentialKey=r.credentialKey,this.credentialValue=r.credentialValue,this.tiandituKey=r.tiandituKey||"",this.withCredentials=r.withCredentials||!1,this.excludePortalProxyUrl=r.excludePortalProxyUrl,this.iportalServiceProxyUrl=r.iportalServiceProxyUrlPrefix,this.proxy=r.proxy,this.proxyOptions={data:"apps/viewer/getUrlResource.json?url=",image:"apps/viewer/getUrlResource.png?url="}},(e=[{key:"setMapId",value:function(t){"string"==typeof t||"number"==typeof t?(this.mapId=t,this.mapInfo=null):null!==t&&"object"===cQ(t)&&(this.mapInfo=t,this.mapId="")}},{key:"setServerUrl",value:function(t){this.serverUrl=t}},{key:"setWithCredentials",value:function(t){this.withCredentials=t}},{key:"setProxy",value:function(t){this.proxy=t}},{key:"handleServerUrl",value:function(t){var e=function(t){var e=t.split("");return"/"!==e[e.length-1]&&(t+="/"),t}(t);return this.serverUrl=e,e}},{key:"getMapInfo",value:function(){var t=lQ(sQ().mark(function t(){var e,r=this;return sQ().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.mapId||!this.mapInfo){t.next=2;break}return t.abrupt("return",new Promise(function(t){t(r.mapInfo)}));case 2:return e=this._handleMapUrl(),t.prev=3,t.next=6,this.getiPortalServiceProxy();case 6:return t.abrupt("return",new Promise(function(t,n){co.get(e,null,{withCredentials:r.withCredentials}).then(function(t){return t.json()}).then(function(e){if(e&&!1===e.succeed){var r={message:e&&e.error&&e.error.errorMsg};n(r)}else e.mapParams={title:e.title,description:e.description},t(e)}).catch(function(t){n(t)})}));case 9:return t.prev=9,t.t0=t.catch(3),t.abrupt("return",Promise.reject(t.t0));case 12:case"end":return t.stop()}},t,this,[[3,9]])}));return function(){return t.apply(this,arguments)}}()},{key:"getiPortalServiceProxy",value:function(){var t=this;return new Promise(function(e,r){co.get("".concat(t.serverUrl,"web/config/portal.json"),{scope:["serviceProxy"]}).then(function(t){return t.json()}).then(function(n){if(n&&n.serviceProxy){var o=n.serviceProxy;o.enable&&(o.proxyServerRootUrl?t.iportalServiceProxyUrl=o.proxyServerRootUrl:o.port&&o.rootUrlPostfix&&(t.iportalServiceProxyUrl="".concat(o.port,"/").concat(o.rootUrlPostfix)),t.serverUrl.indexOf(t.iportalServiceProxyUrl)>-1&&(t.iportalServiceProxyUrl="")),e(o)}else r("serviceProxyFailed")}).catch(function(t){r(t)})})}},{key:"getLayerFeatures",value:function(t,e,r){var n;switch(t){case"hosted":n=this._getFeaturesFromHosted(e,r);break;case"rest_data":n=this._getFeaturesFromRestData(e,r);break;case"rest_map":n=this._getFeaturesFromRestMap(e);break;case"dataflow":n=this._getFeaturesFromDataflow(e);break;case"user_data":n=this._getFeaturesFromUserData(e)}return n}},{key:"getWmsInfo",value:function(t){var e=this;return new Promise(function(r){var n=e.handleProxy(),o=Tt.urlAppend(t.url,"REQUEST=GetCapabilities&SERVICE=WMS");co.get(o,null,{withCredentials:e.handleWithCredentials(n,t.url,!1),withoutFormatSuffix:!0,proxy:n}).then(function(t){return t.text()}).then(function(t){var e=(new eQ.XMLParser).parse(t),n=e.WMT_MS_Capabilities||e.WMS_Capabilities;r({version:n._attributes.version})})})}},{key:"getMapBoxStyle",value:function(t){return new Promise(function(e,r){co.get(t).then(function(t){return t.json()}).then(function(t){e(t)}).catch(function(t){r(t)})})}},{key:"getWmtsInfo",value:function(t,e){var r=this;return new Promise(function(n,o){var i,a=!1,s=22,u=0,l="",c="",f="",p=r.handleProxy(),h=Tt.urlAppend(t.url,"REQUEST=GetCapabilities&SERVICE=WMTS&VERSION=1.0.0");h=r.handleParentRes(h),co.get(h,null,{withCredentials:r.handleWithCredentials(p,t.url,!1),withoutFormatSuffix:!0,proxy:p}).then(function(t){return t.text()}).then(function(o){var p=["Layer","TileMatrixSet","ows:Operation","ows:Get","ResourceURL","Style"],h=new eQ.XMLParser({isArray:function(t){if(-1!==p.indexOf(t))return!0}}).parse(o).Capabilities,y=h.Contents,d=h["ows:OperationsMetadata"];if(d){var v=d["ows:Operation"];Array.isArray(v)||(v=[v]);var m=v.find(function(t){return"GetTile"===t._attributes.name});if(m){var b=m["ows:DCP"]["ows:HTTP"]["ows:Get"];Array.isArray(b)||(b=[b]);var g=b.find(function(t){return"KVP"===t["ows:Constraint"]["ows:AllowedValues"]["ows:Value"]._text});g&&(f=g._attributes["xlink:href"])}}for(var S=y.TileMatrixSet,w=0;w<S.length;w++)if(S[w]["ows:Identifier"]&&S[w]["ows:Identifier"]._text+""===t.tileMatrixSet){if(S[w].WellKnownScaleSet&&hQ.includes(S[w].WellKnownScaleSet._text))a=!0;else{for(var _={},O="EPSG:3857"===e?yQ:dQ,E="EPSG:3857"===e?[-20037508.342789248,20037508.342789087]:[-180,90],P=0;P<S[w].TileMatrix.length;P++){var x=S[w].TileMatrix[P],T=x["ows:Identifier"]._text,C=iQ(x.TopLeftCorner._text.split(" "));if(!(r.numberEqual(C[0],E[0])&&r.numberEqual(C[1],E[1])||r.numberEqual(C[0],E[1])&&r.numberEqual(C[1],E[0])))break;var k=O[+T];if(!k)break;var A=parseFloat(S[w].TileMatrix[P].ScaleDenominator._text);if(r.numberEqual(k,A))_[+T]=A;else if(Object.keys(_).length>0)break}var j=Object.keys(_).map(function(t){return+t});if(s=j.length>0?Math.max.apply(Math,iQ(j)):void 0,u=j.length>0?Math.min.apply(Math,iQ(j)):void 0,0===j.length)throw Error("TileMatrixSetNotSuppport");a=!0}break}var N=y.Layer.find(function(e){return e["ows:Identifier"]._text===t.layer});if(N){var I=N.Style;if(l=Array.isArray(N.Style)?I[0]["ows:Identifier"]?I[0]["ows:Identifier"]._text:"":I["ows:Identifier"]?I["ows:Identifier"]._text:"",N["ows:WGS84BoundingBox"]){var M=N["ows:WGS84BoundingBox"]["ows:LowerCorner"]._text.split(" "),R=N["ows:WGS84BoundingBox"]["ows:UpperCorner"]._text.split(" ");i=[parseFloat(M[0]),parseFloat(M[1]),parseFloat(R[0]),parseFloat(R[1])]}var L=N.ResourceURL;Array.isArray(L)||(L=[L]);var D=L.find(function(t){return"tile"===t._attributes.resourceType});D&&(c=D._attributes.template)}n({isMatched:a,matchMaxZoom:s,matchMinZoom:u,style:l,bounds:i,restResourceURL:c,kvpResourceUrl:f})}).catch(function(t){o(t)})})}},{key:"_getFeaturesFromHosted",value:function(t,e){var r=t.dataSource,n=t.layerType,o=r?r.serverId:t.serverId;return o?"MARKER"===n||r&&(!r.accessType||"DIRECT"===r.accessType)?this._getDataFromIportal(o,t):this._getDataFromHosted({layer:t,serverId:o,baseProjection:e}):new Promise(function(t){t({type:"noServerId"})})}},{key:"_getFeaturesFromRestData",value:function(t,e){var r,n=this,o=t.dataSource;return new Promise(function(i,a){n._getFeatureBySQL(o.url,[decodeURIComponent(o.dataSourceName)||t.name],function(t){r=n.parseGeoJsonData2Feature({allDatas:{features:t.result.features.features}}),i({type:"feature",features:r})},function(t){a(t)},e)})}},{key:"_getFeaturesFromRestMap",value:function(t){var e=this;return new Promise(function(r,n){e._queryFeatureBySQL(t.dataSource.url,t.dataSource.layerName,function(o){var i=o&&o.result.recordsets,a=i&&i[0],s=a.fields;if(a&&s){var u=[];for(var l in s){var c=s[l];0===c.indexOf("Sm")&&"SmID"!==c||u.push(c)}e._getFeatures(u,t,function(t){r({type:"feature",features:t})},function(t){n(t)})}},function(t){n(t)},"smid=1")})}},{key:"_getFeaturesFromUserData",value:function(t){var e=this,r=t.dataSource;return new Promise(function(t,n){var o=e.handleProxy(),i=e.handleParentRes(r.url);co.get(i,null,{withCredentials:e.handleWithCredentials(o,i,e.withCredentials),proxy:o,withoutFormatSuffix:!0}).then(function(t){return t.json()}).then(function(r){var n;n=r&&r instanceof Object&&"FeatureCollection"===r.type?r.features:r,n=e.parseGeoJsonData2Feature({allDatas:{features:n}}),t({type:"feature",features:n})}).catch(function(t){n(t)})})}},{key:"_queryFeatureBySQL",value:function(t,e,r,n,o,i,a,s,u,l){var c=this._getQueryFeaturesParam(e,o,i,a,s,u,l),f=this.handleProxy(),p=this.handleParentRes(t);new QP(p,{proxy:f,withCredentials:this.handleWithCredentials(f,t,!1),eventListeners:{processCompleted:function(t){r&&r(t)},processFailed:function(t){n&&n(t)}}}).processAsync(c)}},{key:"_getFeatures",value:function(t,e,r,n){var o=this,i=e.dataSource;this._queryFeatureBySQL(i.url,i.layerName,function(t){var e=t.result.recordsets[0].features.features,n=o.parseGeoJsonData2Feature({allDatas:{features:e}});r(n)},function(t){n(t)},null,t)}},{key:"_getQueryFeaturesParam",value:function(t,e,r,n,o,i,a){var u=new gs({name:t,attributeFilter:e});r&&(u.fields=r);var l={queryParams:[u]};return a&&(l.queryOption=s.ATTRIBUTE),o&&(l.startRecord=o),i&&(l.expectCount=i),n&&(l.prjCoordSys={epsgCode:n}),new VP(l)}},{key:"_getFeaturesFromDataflow",value:function(t){var e=this;return new Promise(function(r,n){e._getDataflowInfo(t,function(){r({type:"dataflow"})},function(t){n(t)})})}},{key:"_getDataflowInfo",value:function(t,e,r){var n,o=t.url,i="".concat(o,".json");t.credential&&t.credential.token&&(n=t.credential.token,i+="?token=".concat(n));var a=this.handleProxy();i=this.handleParentRes(i),co.get(i,null,{proxy:a,withCredentials:this.handleWithCredentials(a,i,!1)}).then(function(t){return t.json()}).then(function(n){n?(n.featureMetaData&&(t.featureType=n.featureMetaData.featureType.toUpperCase(),t.dataSource={dataTypes:{}},n.featureMetaData.fieldInfos&&n.featureMetaData.fieldInfos.length>0&&n.featureMetaData.fieldInfos.forEach(function(e){var r=e.name.trim();"TEXT"===e.type?t.dataSource.dataTypes[r]="STRING":["DOUBLE","INT","FLOAT","LONG","SHORT"].includes(e.type)?t.dataSource.dataTypes[r]="NUMBER":t.dataSource.dataTypes[r]="UNKNOWN"})),t.wsUrl=n.urls[0].url,t.name=n.urls[0].url.split("iserver/services/")[1].split("/dataflow")[0],e()):r()}).catch(function(){r()})}},{key:"getDatasourceType",value:function(t){var e,r=t.dataSource,n=t.layerType;return r&&"SAMPLE_DATA"===r.type?r.type:(r&&r.serverId||"MARKER"===n||"HOSTED_TILE"===n?e="hosted":"SUPERMAP_REST"===n||"TILE"===n||"WMS"===n||"WMTS"===n||"MAPBOXSTYLE"===n?e="tile":r&&"REST_DATA"===r.type?e="rest_data":r&&"REST_MAP"===r.type&&r.url?e="rest_map":"DATAFLOW_POINT_TRACK"===n||"DATAFLOW_HEAT"===n?e="dataflow":r&&"USER_DATA"===r.type&&(e="user_data"),e)}},{key:"getFeatureProperties",value:function(t){var e=[];return t&&t.length&&t.forEach(function(t){var r=t.properties;r&&e.push(r)}),e}},{key:"parseGeoJsonData2Feature",value:function(t){for(var e=t.allDatas.features,r=[],n=0,o=e.length;n<o;n++){var i=e[n],a=i.geometry.coordinates;"Point"===e[n].geometry.type&&e[n].properties&&(e[n].properties.lon=a[0],e[n].properties.lat=a[1]),i.properties.index=n+"",r.push(i)}return r}},{key:"_getDataFromIportal",value:function(t,e){var r,n=this,o="".concat(this.serverUrl,"web/datas/").concat(t,"/content.json?pageSize=9999999&currentPage=1"),i=this.credentialKey||this.accessKey,a=this.credentialValue||this.accessToken;return a&&(o="".concat(o,"&").concat(i,"=").concat(a)),new Promise(function(t,i){o=n.handleParentRes(o);var a=n.handleProxy();co.get(o,null,{withCredentials:n.handleWithCredentials(a,o,n.withCredentials),proxy:a}).then(function(t){return t.json()}).then(function(){var o=lQ(sQ().mark(function o(a){var s,u,l,c;return sQ().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(!1===a.succeed&&i(a.error),!a||!a.type){o.next=22;break}if("JSON"!==a.type&&"GEOJSON"!==a.type){o.next=7;break}a.content=JSON.parse(a.content.trim()),r=n._formatGeoJSON(a.content),o.next=21;break;case 7:if("EXCEL"!==a.type&&"CSV"!==a.type){o.next=20;break}if(!e.dataSource||!e.dataSource.administrativeInfo){o.next=17;break}return a.content.rows.unshift(a.content.colTitles),s=e.dataSource.administrativeInfo,u=s.divisionType,l=s.divisionField,o.next=13,n._excelData2FeatureByDivision(a.content,u,l);case 13:c=o.sent,r=n._formatGeoJSON(c),o.next=18;break;case 17:r=n._excelData2Feature(a.content,e&&e.xyField||{});case 18:o.next=21;break;case 20:"SHP"===a.type&&(a.content=JSON.parse(a.content.trim()),r=n._formatGeoJSON(a.content.layers[0]));case 21:t({type:"feature",features:r});case 22:case"end":return o.stop()}},o)}));return function(t){return o.apply(this,arguments)}}()).catch(function(t){i(t)})})}},{key:"_getDataFromHosted",value:function(t){var e=this,r=t.layer,n=t.serverId,o=t.baseProjection,i="HOSTED_TILE"===r.layerType;return new Promise(function(t,a){e._checkUploadToRelationship(n).then(function(s){if(s&&s.length>0){var u=s[0].name,l=s[0].type.toUpperCase();e._getDataService(n,u).then(function(n){var s=n.dataItemServices;0===s.length&&a("noDataServices");var c={layer:r,dataItemServices:s,datasetName:u,featureType:l,resolve:t,reject:a,baseProjection:o};if(i){var f=s.filter(function(t){return t&&"RESTDATA"===t.serviceType})[0];e._isMvt(f.address,u,o).then(function(t){e._getServiceInfoFromLayer(c,t)}).catch(function(){e._getServiceInfoFromLayer(c)})}else e._getServiceInfoFromLayer(c)})}else a("resultIsEmpty")}).catch(function(t){a(t)})})}},{key:"_isMvt",value:function(t,e,r){return this._getDatasetsInfo(t,e).then(function(t){return t.epsgCode==r.split("EPSG:")[1]?co.get("".concat(t.url,"/tilefeature.mvt")).then(function(t){return t.json()}).then(function(e){return t.isMvt=e.error&&400===e.error.code,t}).catch(function(){return t}):t})}},{key:"_getServiceInfoFromLayer",value:function(t,e){var r=this,n=t.layer,o=t.dataItemServices,i=t.datasetName,a=t.featureType,s=t.resolve,u=t.reject,l=t.baseProjection,c=e?!e.isMvt:"HOSTED_TILE"===n.layerType,f=!1;o.forEach(function(t){f||(t&&c&&"RESTMAP"===t.serviceType?(f=!0,r._getTileLayerInfo(t.address,l).then(function(t){s({type:"restMap",restMaps:t})})):t&&!c&&"RESTDATA"===t.serviceType&&(e&&e.isMvt?s({type:"mvt",info:e,featureType:a}):(f=!0,r._getDatasources(t.address).then(function(e){n.dataSource.dataSourceName=e+":"+i,n.dataSource.url="".concat(t.address,"/data"),r._getFeatureBySQL(n.dataSource.url,[n.dataSource.dataSourceName||n.name],function(t){var e=r.parseGeoJsonData2Feature({allDatas:{features:t.result.features.features}});s({type:"feature",features:e})},function(t){u(t)})},function(t){u(t)}))))},this),f||u("noService")}},{key:"_getDatasetsInfo",value:function(t,e){var r=this;return this._getDatasources(t).then(function(n){var o="".concat(t,"/data/datasources/").concat(n,"/datasets/").concat(e),i=r.handleProxy();return o=r.handleParentRes(o),co.get(o,null,{withCredentials:r.handleWithCredentials(i,o,!1),proxy:i}).then(function(t){return t.json()}).then(function(t){return{epsgCode:t.datasetInfo.prjCoordSys.epsgCode,bounds:t.datasetInfo.bounds,datasourceName:n,datasetName:e,url:o}})})}},{key:"_getDatasources",value:function(t){var e=this.handleProxy(),r="".concat(t,"/data/datasources.json");return r=this.handleParentRes(r),co.get(r,null,{withCredentials:this.handleWithCredentials(e,r,!1),proxy:e}).then(function(t){return t.json()}).then(function(t){if(401===t.code)throw Error(t.errorMsg);return t.datasourceNames[0]})}},{key:"_getDataService",value:function(t,e){var r=this.handleProxy(),n="".concat(this.serverUrl,"web/datas/").concat(t,".json");return n=this.handleParentRes(n),co.get(n,null,{withCredentials:this.handleWithCredentials(r,n,this.withCredentials),proxy:r}).then(function(t){return t.json()}).then(function(r){return r.fileId=t,r.datasetName=e,r})}},{key:"_checkUploadToRelationship",value:function(t){var e=this.handleProxy(),r="".concat(this.serverUrl,"web/datas/").concat(t,"/datasets.json");return r=this.handleParentRes(r),co.get(r,null,{withCredentials:this.handleWithCredentials(e,r,this.withCredentials),proxy:e}).then(function(t){return t.json()}).then(function(t){return t})}},{key:"_handleMapUrl",value:function(){var t=this.serverUrl+"web/maps/"+this.mapId+"/map";this.accessToken||this.accessKey?t+=(this.accessToken&&this.accessKey,"token="+this.accessToken):this.credentialValue&&this.credentialKey&&(t+="?"+this.credentialKey+"="+this.credentialValue);var e="getUrlResource.json?url=";if(this.excludePortalProxyUrl&&this.serverUrl.indexOf(e)>-1){var r=this.serverUrl.split(e);r.length>1&&(t=r[0]+e+this.serverUrl+"web/maps/"+this.mapId+"/map.json")}return t=-1===t.indexOf(".json")?"".concat(t,".json"):t}},{key:"handleProxy",value:function(t){if(!this.proxy)return null;var e=this.proxyOptions[t||"data"],r=this.serverUrl+e;return"string"==typeof this.proxy&&(r=this.proxy),r}},{key:"handleWithCredentials",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.withCredentials;return e&&e.includes("https://www.supermapol.com")?"":!(!t||!t.startsWith(this.serverUrl)||e&&!e.startsWith(t))||(!!(e&&this.iportalServiceProxyUrl&&e.indexOf(this.iportalServiceProxyUrl)>=0)||r)}},{key:"isIportalResourceUrl",value:function(t){return t.startsWith(this.serverUrl)||this.iportalServiceProxyUrl&&t.indexOf(this.iportalServiceProxyUrl)>=0}},{key:"handleParentRes",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.mapId,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"MAP";return this.isIportalResourceUrl(t)?Tt.urlAppend(t,"parentResType=".concat(r,"&parentResId=").concat(e)):t}},{key:"_formatGeoJSON",value:function(t){var e=t.features;return e.forEach(function(t,e){t.properties.index=e}),e}},{key:"_excelData2Feature",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.colTitles,n=r.indexOf(e.xField),o=r.indexOf(e.yField);if(o<0||n<0)for(var i=0,a=r.length;i<a;i++)ZH.isXField(r[i])&&(n=i),ZH.isYField(r[i])&&(o=i);for(var s=[],u=0,l=t.rows.length;u<l;u++){var c=t.rows[u],f=Number(c[n]),p=Number(c[o]);if(!isNaN(f)&&!isNaN(p)){for(var h={},y=0;y<t.colTitles.length;y++){h[t.colTitles[y].trim()]=t.rows[u][y]}h.index=u+"";var d={type:"Feature",geometry:{type:"Point",coordinates:[f,p]},properties:h};s.push(d)}}return s}},{key:"_excelData2FeatureByDivision",value:function(t,e,r){var n=this,o=["城市","City"].includes(e)?"MunicipalData":"ProvinceData";if(window[o]&&window[o].features)return new Promise(function(e){e(n._combineFeature(t,window[o],r))});var i=["城市","City"].includes(e)?"MunicipalData.js":"ProvincialData.js",a=this.handleProxy(),s="".concat(this.serverUrl,"apps/dataviz/libs/administrative_data/").concat(i);return co.get(s,null,{withCredentials:!1,proxy:a,withoutFormatSuffix:!0}).then(function(t){return t.text()}).then(function(e){return new Function(e)(),n._combineFeature(t,window[o],r)})}},{key:"_combineFeature",value:function(t,e,r){var n=this,o={type:"FeatureCollection",features:[]};if(t.length<2)return o;var i=t.colTitles,a=t.rows,s=i.findIndex(function(t){return t===r});return a.forEach(function(t){var r=e.features.find(function(e){return n._isMatchAdministrativeName(e.properties.Name,t[s])});if(r){var a=r.properties.Province,u={properties:{},geometry:r.geometry,type:"Feature"};t.forEach(function(t,e){u.properties[i[e]]=t}),a&&(u.properties.Province=a),o.features.push(u)}}),o}},{key:"_isMatchAdministrativeName",value:function(t,e){if(t&&"string"==typeof e&&e.constructor===String){var r=t.trim().substr(0,2);return"张家"===r&&(r=t.trim().substr(0,3)),"阿拉"===r&&(r=t.trim().substr(0,3)),!!e.match(new RegExp(r))}return!1}},{key:"_getTileLayerInfo",value:function(t,e){var r=this,n=this.handleProxy(),o=e.split("EPSG:")[1],i="".concat(t,"/maps.json");return i=this.handleParentRes(i),co.get(i,null,{withCredentials:this.handleWithCredentials(n,i,this.withCredentials),proxy:n}).then(function(t){return t.json()}).then(function(t){var e=[];return t&&t.forEach(function(t){var i=co.get("".concat(t.path,".json?prjCoordSys=").concat(JSON.stringify({epsgCode:o})),null,{withCredentials:r.withCredentials,proxy:n}).then(function(t){return t.json()}).then(function(e){return e.url=t.path,e});e.push(i)}),Promise.all(e).then(function(t){return t})})}},{key:"_getFeatureBySQL",value:function(t,e,r,n,o){var i,a,s=this;i=new SuperMap.FilterParameter({name:e.join().replace(":","@"),attributeFilter:null}),a=new SuperMap.GetFeaturesBySQLParameters({queryParameter:i,datasetNames:e,fromIndex:0,toIndex:-1,maxFeatures:-1,returnContent:!0}),o&&(a.targetEpsgCode="EPSG:3857"===o||"EPSG:-1000"===o?4326:+o.split(":")[1]);var u=this.handleProxy(),l={proxy:u,withCredentials:this.handleWithCredentials(u,t,!1),eventListeners:{processCompleted:function(t){var e=t.result;if(e&&e.datasetInfos){var n=[],o=[],i=[];e.datasetInfos[0].fieldInfos.forEach(function(t){t.name&&(n.push(t.name.toUpperCase()),o.push(t.caption.toUpperCase()),i.push(t.type))});var a=s.statisticsFeatures(e.features.features,n,o,i);t.result.features.features=a.features}r&&r(t)},processFailed:function(t){n&&n(t)}}},c=this.handleParentRes(t);new SuperMap.GetFeaturesBySQLService(c,l).processAsync(a)}},{key:"getEpsgCodeInfo",value:function(){var t=lQ(sQ().mark(function t(e,r){var n,o,i;return sQ().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n="/"===r.slice(-1)?r:"".concat(r,"/"),o="".concat(n,"epsgcodes/").concat(e,".json"),t.next=4,co.get(o,null).then(function(t){return t.json()}).then(function(t){return t.wkt}).catch(function(t){console.error(t)});case 4:return i=t.sent,t.abrupt("return",i);case 6:case"end":return t.stop()}},t)}));return function(e,r){return t.apply(this,arguments)}}()},{key:"statisticsFeatures",value:function(t,e,r,n){var o={features:t,fields:e||[],fieldValues:[],fieldTypes:n};if(t&&t.length){r&&r.length&&t.forEach(function(t){var n={};for(var o in t.properties){var i=e.indexOf(o);n[r[i]||o]=t.properties[o]}t.properties=n});var i=Object.assign({},t[0].properties,t[t.length-1].properties);o.fields=Object.keys(i)}for(var a in o.fields){var s=[];for(var u in t){var l=t[u],c=o.fields[a],f=l.properties[c];s.push(f)}o.fieldValues.push(s)}return o}},{key:"numberEqual",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e-5;return Math.abs(+t-+e)<=r}}])&&fQ(t.prototype,e),r&&fQ(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}(),mQ={epsgCodes:{"EPSG:3857":'PROJCS["WGS 84 / Pseudo-Mercator",GEOGCS["WGS 84",DATUM["WGS_1984",SPHEROID["WGS 84",6378137,298.257223563,AUTHORITY["EPSG","7030"]],AUTHORITY["EPSG","6326"]],PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901"]],UNIT["degree",0.0174532925199433,AUTHORITY["EPSG","9122"]],AUTHORITY["EPSG","4326"]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["central_meridian",0],PARAMETER["scale_factor",1],PARAMETER["false_easting",0],PARAMETER["false_northing",0],UNIT["metre",1,AUTHORITY["EPSG","9001"]],AXIS["X",EAST],AXIS["Y",NORTH],EXTENSION["PROJ4","+proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +wktext  +no_defs"],AUTHORITY["EPSG","3857"]]',"EPSG:4326":'GEOGCS["WGS 84",DATUM["WGS_1984",SPHEROID["WGS 84",6378137,298.257223563,AUTHORITY["EPSG","7030"]],AUTHORITY["EPSG","6326"]],PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901"]],AXIS["Easting", "EAST"],AXIS["Northing", "NORTH"],UNIT["degree",0.0174532925199433,AUTHORITY["EPSG","9122"]],AUTHORITY["EPSG","4326"]]',"EPSG:4490":'GEOGCS["China Geodetic Coordinate System 2000", DATUM["China 2000", SPHEROID["CGCS2000", 6378137.0, 298.257222101, AUTHORITY["EPSG","1024"]], AUTHORITY["EPSG","1043"]], PRIMEM["Greenwich", 0.0, AUTHORITY["EPSG","8901"]], UNIT["degree", 0.017453292519943295], AXIS["Geodetic latitude", NORTH], AXIS["Geodetic longitude", EAST], AUTHORITY["EPSG","4490"]]'},registerProjection:function(t,e){"[object Object]"===Object.prototype.toString.call(arguments[0])&&1===arguments.length?this.epsgCodes=Object.assign({},this.epsgCodes,arguments[0]):t&&e&&(this.epsgCodes[t]=e)},getProjection:function(t){return this.epsgCodes[t]},getAllProjections:function(){return this.epsgCodes}};function bQ(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function gQ(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?bQ(Object(r),!0).forEach(function(e){SQ(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):bQ(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function SQ(t,e,r){return(e=PQ(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function wQ(){wQ=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),s=new A(n||[]);return o(a,"_invoke",{value:x(t,r,s)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var p="suspendedStart",h="suspendedYield",y="executing",d="completed",v={};function m(){}function b(){}function g(){}var S={};l(S,a,function(){return this});var w=Object.getPrototypeOf,_=w&&w(w(j([])));_&&_!==r&&n.call(_,a)&&(S=_);var O=g.prototype=m.prototype=Object.create(S);function E(t){["next","throw","return"].forEach(function(e){l(t,e,function(t){return this._invoke(e,t)})})}function P(t,e){function r(o,i,a,s){var u=f(t[o],t,i);if("throw"!==u.type){var l=u.arg,c=l.value;return c&&"object"==OQ(c)&&n.call(c,"__await")?e.resolve(c.__await).then(function(t){r("next",t,a,s)},function(t){r("throw",t,a,s)}):e.resolve(c).then(function(t){l.value=t,a(l)},function(t){return r("throw",t,a,s)})}s(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e(function(e,o){r(t,n,e,o)})}return i=i?i.then(o,o):o()}})}function x(e,r,n){var o=p;return function(i,a){if(o===y)throw Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var u=T(s,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var l=f(e,r,n);if("normal"===l.type){if(o=n.done?d:h,l.arg===v)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=d,n.method="throw",n.arg=l.arg)}}}function T(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,T(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function A(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function j(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(OQ(e)+" is not iterable")}return b.prototype=g,o(O,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=l(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,l(t,u,"GeneratorFunction")),t.prototype=Object.create(O),t},e.awrap=function(t){return{__await:t}},E(P.prototype),l(P.prototype,s,function(){return this}),e.AsyncIterator=P,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new P(c(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next()})},E(O),l(O,u,"Generator"),l(O,a,function(){return this}),l(O,"toString",function(){return"[object Generator]"}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=j,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(k),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),k(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;k(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:j(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function _Q(t,e,r,n,o,i,a){try{var s=t[i](a),u=s.value}catch(t){return void r(t)}s.done?e(u):Promise.resolve(u).then(n,o)}function OQ(t){"@babel/helpers - typeof";return(OQ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function EQ(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,PQ(n.key),n)}}function PQ(t){var e=function(t,e){if("object"!=OQ(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=OQ(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==OQ(e)?e:e+""}function xQ(t,e,r){return e=TQ(e),function(t,e){if(e&&("object"===OQ(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],TQ(t).constructor):e.apply(t,r))}function TQ(t){return(TQ=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function CQ(t,e){return(CQ=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var kQ=1e3;function AQ(t){"@babel/helpers - typeof";return(AQ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function jQ(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function NQ(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?jQ(Object(r),!0).forEach(function(e){IQ(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):jQ(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function IQ(t,e,r){var n;return(e="symbol"==AQ(n=function(t,e){if("object"!=AQ(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=AQ(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"))?n:n+"")in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}n.Lang=QH,n.i18n=n.Lang.i18n,n.Util=NQ(NQ({},n.Util),Tt),n.Browser=Et,n.INCHES_PER_UNIT=Ct,n.METERS_PER_INCH=kt,n.DOTS_PER_INCH=96,n.IS_GECKO=xt,n.setCORS=function(t){eo=t},n.isCORS=uo,n.setRequestTimeout=function(t){return ro=t},n.getRequestTimeout=lo,n.FetchRequest=co,n.EncryptRequest=BD,n.getServiceKey=function(t){return FD.apply(this,arguments)},n.GeometryAnalysis=sB,n.inherit=function(t,e){var r,n,o,i=function(){};for(i.prototype=e.prototype,t.prototype=new i,r=2,n=arguments.length;r<n;r++)"function"==typeof(o=arguments[r])&&(o=o.prototype),Tt.extend(t.prototype,o)},n.mixin=it,n.String=at,n.Number=st,n.Function=ut,n.Array=lt,n.Date=vr,n.Event=mr,n.Bounds=Dt,n.Credential=dr,n.Events=wr,n.Feature=Pr,n.Geometry=ht,n.Geometry3D=on,n.Pixel=et,n.Size=X,n.Feature.Vector=mn,n.Geometry.Collection=qt,n.Geometry.Curve=ie,n.Geometry.GeoText=ke,n.Geometry.LinearRing=De,n.Geometry.LineString=we,n.Geometry.MultiLineString=He,n.Geometry.MultiPoint=Zt,n.Geometry.MultiPolygon=Xe,n.Geometry.Point=he,n.Geometry.Polygon=or,n.Geometry.Rectangle=fr,n.Components.Chart=pq,n.Components.ChartViewModel=uq,n.Components.MessageBox=KH,n.Components.AttributesPopContainer=Xq,n.Components.CityTabsPage=fJ,n.Components.CommonContainer=Oq,n.Components.DropDownBox=Dq,n.Components.IndexTabsPageContainer=oJ,n.Components.NavTabsPage=bJ,n.Components.PaginationContainer=PJ,n.Components.PopContainer=Hq,n.Components.Select=Aq,n.Components.TemplateBase=vq,n.Components.FileReaderUtil=ZH,n.TimeControlBase=Wn,n.TimeFlowControl=no,n.Format=n.Format||wn,n.Format.GeoJSON=Ln,n.Format.JSON=Cn,n.Format.WKT=zn,n.iManager=Ao,n.iManagerCreateNodeParam=Oo,n.iManagerServiceBase=go,n.iPortal=ai,n.iPortalAddDataParam=_i,n.iPortalAddResourceParam=yi,n.iPortalDataConnectionInfoParam=Mi,n.iPortalDataMetaInfoParam=xi,n.iPortalDataStoreInfoParam=Ai,n.iPortalQueryParam=Bo,n.iPortalQueryResult=Vo,n.iPortalRegisterServiceParam=bi,n.iPortalResource=Yo,n.iPortalServiceBase=Mo,n.iPortalShareEntity=ci,n.iPortalShareParam=$o,n.iPortalUser=Gi,n.AddressMatchService=ca,n.AggregationParameter=ya,n.AreaSolarRadiationParameters=Da,n.AreaSolarRadiationService=$a,n.AttachmentsParameters=ba,n.BucketAggParameter=Pa,n.BufferAnalystParameters=fs,n.BufferAnalystService=zs,n.BufferDistance=ns,n.BuffersAnalystJobsParameter=iu,n.BuffersAnalystJobsService=wu,n.BufferSetting=ss,n.BurstPipelineAnalystParameters=Pu,n.BurstPipelineAnalystService=Gu,n.ChartFeatureInfoSpecsService=Yu,n.ChartAcronymClassifyService=nl,n.ChartQueryFilterParameter=sl,n.ChartQueryParameters=fl,n.ChartQueryService=El,n.ChartSetting=Cl,n.ClipParameter=Nl,n.ColorDictionary=Ll,n.CommonServiceBase=Ki,n.ComputeWeightMatrixParameters=Kl,n.ComputeWeightMatrixService=rc,n.CreateDatasetParameters=cI,n.DataFlowService=lc,n.DataReturnOption=ds,n.DatasetBufferAnalystParameters=Ts,n.DatasetInfo=hc,n.DatasetOverlayAnalystParameters=Pc,n.DatasetService=Rv,n.DatasetSurfaceAnalystParameters=Gc,n.DatasetThiessenAnalystParameters=$c,n.DatasourceConnectionInfo=Ws,n.DatasourceService=uf,n.DensityAnalystService=Sf,n.DensityKernelAnalystParameters=pf,n.EditAttachmentsParameters=Ff,n.FeatureAttachmentsService=Mh,n.EditFeaturesParameters=Ef,n.EditFeaturesService=Nf,n.FacilityAnalyst3DParameters=zf,n.FacilityAnalystSinks3DParameters=Xf,n.FacilityAnalystSinks3DService=op,n.FacilityAnalystSources3DParameters=pp,n.FacilityAnalystSources3DService=Sp,n.FacilityAnalystStreamParameters=Ep,n.FacilityAnalystStreamService=Np,n.FacilityAnalystTracedown3DParameters=Up,n.FacilityAnalystTracedown3DService=Kp,n.FacilityAnalystTraceup3DParameters=rh,n.FacilityAnalystTraceup3DService=ch,n.FacilityAnalystUpstream3DParameters=bh,n.FacilityAnalystUpstream3DService=xh,n.FieldParameters=Bh,n.FieldsFilter=RR,n.FieldStatisticService=$h,n.FieldStatisticsParameters=qh,n.FilterParameter=gs,n.FindClosestFacilitiesParameters=ny,n.FindClosestFacilitiesService=fy,n.FindLocationParameters=dy,n.FindLocationService=Oy,n.FindMTSPPathsParameters=Ty,n.FindMTSPPathsService=Ry,n.FindPathParameters=Fy,n.FindPathService=Wy,n.FindServiceAreasParameters=Xy,n.FindServiceAreasService=id,n.FindTSPPathsParameters=ld,n.FindTSPPathsService=md,n.GenerateSpatialDataParameters=wd,n.GenerateSpatialDataService=kd,n.GeoCodingParameter=Zi,n.GeoDecodingParameter=ra,n.GeoHashGridAggParameter=Dd,n.GeometryBatchAnalystService=uN,n.GeometryBufferAnalystParameters=Rs,n.GeometryOverlayAnalystParameters=qd,n.GeometrySurfaceAnalystParameters=$d,n.GeometryThiessenAnalystParameters=sv,n.GeoprocessingService=yv,n.GeoRelationAnalystParameters=bv,n.GeoRelationAnalystService=xv,n.GetFeaturesByBoundsParameters=Wv,n.GetFeaturesByBoundsService=lm,n.GetFeaturesByBufferParameters=mm,n.GetFeaturesByBufferService=Pm,n.GetFeaturesByGeometryParameters=Im,n.GetFeaturesByGeometryService=Gm,n.GetFeaturesByIDsParameters=Ym,n.GetFeaturesByIDsService=nb,n.GetFeaturesBySQLParameters=fb,n.GetFeaturesBySQLService=gb,n.GetFeaturesParametersBase=Fv,n.GetFeaturesServiceBase=em,n.GetFieldsService=Tb,n.GetGridCellInfosParameters=jb,n.GetGridCellInfosService=Fb,n.GetLayersInfoService=Kw,n.Grid=Ew,n.HillshadeParameter=pM,n.Image=Nw,n.ImageCollectionService=_R,n.ImageGFAspect=iL,n.ImageGFHillShade=eL,n.ImageGFOrtho=lL,n.ImageGFSlope=hL,n.ImageRenderingRule=XR,n.ImageSearchParameter=zR,n.ImageService=jR,n.ImageStretchOption=WR,n.InterpolationAnalystParameters=Zw,n.InterpolationAnalystService=B_,n.InterpolationDensityAnalystParameters=y_,n.InterpolationIDWAnalystParameters=__,n.InterpolationKrigingAnalystParameters=A_,n.InterpolationRBFAnalystParameters=a_,n.JoinItem=tw,n.KernelDensityJobParameter=V_,n.KernelDensityJobsService=Q_,n.LabelImageCell=sO,n.LabelMatrixCell=tO,n.LabelMixedTextStyle=lg,n.LabelSymbolCell=yO,n.LabelThemeCell=wO,n.LayerStatus=PO,n.LinkItem=kO,n.MappingParameters=eu,n.MapService=DO,n.MathExpressionAnalysisParameters=GO,n.MathExpressionAnalysisService=YO,n.MeasureParameters=$O,n.MeasureService=sE,n.MetricsAggParameter=Ia,n.NDVIParameter=oM,n.NetworkAnalystServiceBase=Iu,n.OutputSetting=Xs,n.OverlapDisplayedOptions=fE,n.OverlayAnalystParameters=mc,n.OverlayAnalystService=gE,n.OverlayGeoJobParameter=OE,n.OverlayGeoJobsService=jE,n.PointWithMeasure=Ur,n.ProcessingServiceBase=hu,n.QueryByBoundsParameters=FE,n.QueryByBoundsService=rP,n.QueryByDistanceParameters=cP,n.QueryByDistanceService=bP,n.QueryByGeometryParameters=xP,n.QueryByGeometryService=MP,n.QueryBySQLParameters=VP,n.QueryBySQLService=QP,n.DatasetMinDistanceAnalystParameters=ux,n.MinDistanceAnalystService=Ex,n.TerrainCutFillCalculationParameters=Cx,n.TerrainCutFillCalculationService=Lx,n.terrainAnalystSetting=NA,n.TerrainAspectCalculationParameters=Ux,n.TerrainAspectCalculationService=Kx,n.TerrainSlopeCalculationParameters=Zx,n.TerrainSlopeCalculationService=aT,n.GeometryMinDistanceAnalystParameters=vx,n.ConvexHullAnalystParameters=cT,n.ConvexHullAnalystService=bT,n.TraceAnalystParameters=_T,n.TraceAnalystService=AT,n.ConnectedEdgesAnalystParameters=MT,n.ConnectedEdgesAnalystService=VT,n.GetLayersLegendInfoParameters=JT,n.GetLayersLegendInfoService=tC,n.QueryParameters=dl,n.QueryService=oC,n.RasterFunctionParameter=QI,n.Route=Wr,n.RouteCalculateMeasureParameters=uC,n.RouteCalculateMeasureService=vC,n.RouteLocatorParameters=SC,n.RouteLocatorService=CC,n.ServerColor=kr,n.ServerFeature=NC,n.ServerGeometry=Xr,n.ServerStyle=Ir,n.ServerTextStyle=Wb,n.ServerTheme=vw,n.SetDatasourceParameters=LC,n.SetLayerInfoParameters=UC,n.SetLayerInfoService=KC,n.SetLayersInfoParameters=ZC,n.SetLayersInfoService=ak,n.SetLayerStatusParameters=ck,n.SetLayerStatusService=bk,n.SingleObjectQueryJobsParameter=_k,n.SingleObjectQueryJobsService=Ak,n.Sortby=FR,n.SpatialAnalystBase=qa,n.StopQueryParameters=Mk,n.StopQueryService=Vk,n.SummaryAttributesJobsParameter=Jk,n.SummaryAttributesJobsService=tA,n.SummaryMeshJobParameter=oA,n.SummaryMeshJobsService=pA,n.SummaryRegionJobParameter=vA,n.SummaryRegionJobsService=EA,n.SupplyCenter=CA,n.SurfaceAnalystParameters=Ic,n.SurfaceAnalystParametersSetting=kc,n.SurfaceAnalystService=UA,n.TerrainCurvatureCalculationParameters=HA,n.TerrainCurvatureCalculationService=ZA,n.Theme=zb,n.ThemeDotDensity=yS,n.ThemeFlow=rj,n.ThemeGraduatedSymbol=xS,n.ThemeGraduatedSymbolStyle=bS,n.ThemeGraph=sS,n.ThemeGraphAxes=Gg,n.ThemeGraphItem=$g,n.ThemeGraphSize=qg,n.ThemeGraphText=Yg,n.ThemeGridRange=yj,n.ThemeGridRangeItem=aj,n.ThemeGridUnique=xj,n.ThemeGridUniqueItem=bj,n.ThemeLabel=kg,n.ThemeLabelAlongLine=mg,n.ThemeLabelBackground=wg,n.ThemeLabelItem=Xb,n.ThemeLabelText=hg,n.ThemeLabelUniqueItem=Aj,n.ThemeMemoryData=Mj,n.ThemeOffset=ig,n.ThemeParameters=Bj,n.ThemeRange=BS,n.ThemeRangeItem=AS,n.ThemeService=Jj,n.ThemeUnique=Dg,n.ThemeUniqueItem=eg,n.ThiessenAnalystParameters=qc,n.ThiessenAnalystService=tN,n.TilesetsService=vN,n.TopologyValidatorJobsParameter=SN,n.TopologyValidatorJobsService=CN,n.TransferLine=NN,n.TransferPathParameters=LN,n.TransferPathService=HN,n.TransferSolutionParameters=KN,n.TransferSolutionService=rI,n.TransportationAnalystParameter=Hl,n.TransportationAnalystResultSetting=Ul,n.UGCLayer=VS,n.UGCMapLayer=QS,n.UGCSubLayer=uw,n.UpdateDatasetParameters=MI,n.UpdateEdgeWeightParameters=aI,n.UpdateEdgeWeightService=bI,n.UpdateTurnNodeWeightParameters=_I,n.UpdateTurnNodeWeightService=AI,n.Vector=Uw,n.VectorClipJobsParameter=BI,n.VectorClipJobsService=JI,n.WebPrintingJobContent=HM,n.WebPrintingJobCustomItems=vM,n.WebPrintingJobExportOptions=ZM,n.WebPrintingJobImage=SM,n.WebPrintingJobLayers=EM,n.WebPrintingJobLayoutOptions=KM,n.WebPrintingJobLegendOptions=CM,n.WebPrintingJobLittleMapOptions=NM,n.WebPrintingJobNorthArrowOptions=LM,n.WebPrintingJobParameters=rR,n.WebPrintingJobScaleBarOptions=UM,n.WebPrintingService=yR,n.Online=HL,n.OnlineData=UL,n.OnlineQueryDatasParameter=KL,n.ServiceStatus={DOES_NOT_INVOLVE:"DOES_NOT_INVOLVE",PUBLISH_FAILED:"PUBLISH_FAILED",PUBLISHED:"PUBLISHED",PUBLISHING:"PUBLISHING",UNPUBLISHED:"UNPUBLISHED",UNPUBLISHED_FAILED:"UNPUBLISHED_FAILED"},n.DataItemType={GEOJSON:"GEOJSON",UGCV5_MVT:"UGCV5_MVT",JSON:"JSON",AUDIO:"AUDIO",COLOR:"COLOR",COLORSCHEME:"COLORSCHEME",CSV:"CSV",EXCEL:"EXCEL",FILLSYMBOL:"FILLSYMBOL",IMAGE:"IMAGE",LAYERTEMPLATE:"LAYERTEMPLATE",LAYOUTTEMPLATE:"LAYOUTTEMPLATE",LINESYMBOL:"LINESYMBOL",MAPTEMPLATE:"MAPTEMPLATE",MARKERSYMBOL:"MARKERSYMBOL",MBTILES:"MBTILES",PHOTOS:"PHOTOS",SHP:"SHP",SMTILES:"SMTILES",SVTILES:"SVTILES",THEMETEMPLATE:"THEMETEMPLATE",TPK:"TPK",UDB:"UDB",UGCV5:"UGCV5",UNKNOWN:"UNKNOWN",VIDEO:"VIDEO",WORKENVIRONMENT:"WORKENVIRONMENT",WORKSPACE:"WORKSPACE"},n.DataItemOrderBy={FILENAME:"FILENAME",ID:"ID",LASTMODIFIEDTIME:"LASTMODIFIEDTIME",NICKNAME:"NICKNAME",SERVICESTATUS:"SERVICESTATUS",SIZE:"SIZE",STATUS:"STATUS",TYPE:"TYPE",UPDATETIME:"UPDATETIME",USERNAME:"USERNAME"},n.FilterField={LINKPAGE:"LINKPAGE",MAPTITLE:"MAPTITLE",NICKNAME:"NICKNAME",RESTITLE:"RESTITLE",USERNAME:"USERNAME"},n.OnlineServiceBase=IL,n.Feature=n.Feature||{},n.Feature.Theme=uV,n.Feature.Theme.Bar=EV,n.Feature.Theme.Bar3D=NV,n.Feature.Theme.Circle=KV,n.Feature.Theme.Graph=vV,n.Feature.Theme.Line=rz,n.Feature.Theme.Pie=cz,n.Feature.Theme.Point=bz,n.Feature.Theme.RankSymbol=UV,n.Feature.Theme.Ring=xz,n.Feature.Theme.ThemeVector=Rz,n.Feature.ShapeParameters=EB,n.Feature.ShapeParameters.Circle=MF,n.Feature.ShapeParameters.Image=xF,n.Feature.ShapeParameters.Label=bF,n.Feature.ShapeParameters.Line=UB,n.Feature.ShapeParameters.Point=NB,n.Feature.ShapeParameters.Polygon=KB,n.Feature.ShapeParameters.Rectangle=rF,n.Feature.ShapeParameters.Sector=cF,n.Feature.ShapeFactory=oV,n.LevelRenderer=LH,n.KeyServiceParameter=ZL,n.SecurityManager=yo,n.ServerInfo=rD,n.TokenServiceParameter=aD,n.ThemeStyle=SB,n.CartoCSS=dB,n.ElasticSearch=pD,n.ArrayStatistic=zD,n.ColorsPickerUtil=PD,n.DataFormat=o,n.ServerType=i,n.GeometryType=a,n.QueryOption=s,n.JoinType={INNERJOIN:"INNERJOIN",LEFTJOIN:"LEFTJOIN"},n.SpatialQueryMode=u,n.SpatialRelationType={CONTAIN:"CONTAIN",INTERSECT:"INTERSECT",WITHIN:"WITHIN"},n.MeasureMode=l,n.Unit=c,n.BufferRadiusUnit=f,n.EngineType={IMAGEPLUGINS:"IMAGEPLUGINS",OGC:"OGC",ORACLEPLUS:"ORACLEPLUS",SDBPLUS:"SDBPLUS",SQLPLUS:"SQLPLUS",UDB:"UDB"},n.ThemeGraphTextFormat=p,n.ThemeGraphType=h,n.GraphAxesTextDisplayMode=y,n.GraduatedMode=d,n.RangeMode=v,n.ThemeType={DOTDENSITY:"DOTDENSITY",GRADUATEDSYMBOL:"GRADUATEDSYMBOL",GRAPH:"GRAPH",LABEL:"LABEL",RANGE:"RANGE",UNIQUE:"UNIQUE"},n.ColorGradientType=m,n.TextAlignment=b,n.FillGradientMode={NONE:"NONE",LINEAR:"LINEAR",RADIAL:"RADIAL",CONICAL:"CONICAL",SQUARE:"SQUARE"},n.AlongLineDirection=g,n.LabelBackShape=S,n.LabelOverLengthMode=w,n.DirectionType={EAST:"EAST",NONE:"NONE",NORTH:"NORTH",SOURTH:"SOURTH",WEST:"WEST"},n.OverlayOperationType=O,n.OutputType=E,n.SideType={LEFT:"LEFT",MIDDLE:"MIDDLE",NONE:"NONE",RIGHT:"RIGHT"},n.SupplyCenterType={FIXEDCENTER:"FIXEDCENTER",NULL:"NULL",OPTIONALCENTER:"OPTIONALCENTER"},n.TurnType={AHEAD:"AHEAD",BACK:"BACK",END:"END",LEFT:"LEFT",NONE:"NONE",RIGHT:"RIGHT"},n.BufferEndType=_,n.SmoothMethod=P,n.SurfaceAnalystMethod=x,n.DataReturnMode=T,n.EditType=C,n.TransferTactic=k,n.TransferPreference=A,n.GridType={CROSS:"CROSS",GRID:"GRID",POINT:"POINT"},n.ColorSpaceType={CMYK:"CMYK",RGB:"RGB"},n.LayerType={UGC:"UGC",WMS:"WMS",WFS:"WFS",CUSTOM:"CUSTOM"},n.UGCLayerType={THEME:"THEME",VECTOR:"VECTOR",GRID:"GRID",IMAGE:"IMAGE"},n.StatisticMode={AVERAGE:"AVERAGE",MAX:"MAX",MIN:"MIN",STDDEVIATION:"STDDEVIATION",SUM:"SUM",VARIANCE:"VARIANCE"},n.PixelFormat={BIT16:"BIT16",BIT32:"BIT32",BIT64:"BIT64",SINGLE:"SINGLE",DOUBLE:"DOUBLE",UBIT1:"UBIT1",UBIT4:"UBIT4",UBIT8:"UBIT8",UBIT24:"UBIT24",UBIT32:"UBIT32"},n.SearchMode={KDTREE_FIXED_COUNT:"KDTREE_FIXED_COUNT",KDTREE_FIXED_RADIUS:"KDTREE_FIXED_RADIUS",NONE:"NONE",QUADTREE:"QUADTREE"},n.InterpolationAlgorithmType={KRIGING:"KRIGING",SimpleKriging:"SimpleKriging",UniversalKriging:"UniversalKriging"},n.VariogramMode=j,n.Exponent=N,n.ClientType=I,n.ChartType={BAR:"Bar",BAR3D:"Bar3D",CIRCLE:"Circle",PIE:"Pie",POINT:"Point",LINE:"Line",RING:"Ring"},n.ClipAnalystMode=M,n.AnalystAreaUnit=R,n.AnalystSizeUnit=D,n.StatisticAnalystMode=B,n.SummaryType=F,n.TopologyValidatorRule=U,n.BucketAggType=G,n.MetricsAggType=V,n.GetFeatureMode={BOUNDS:"BOUNDS",BUFFER:"BUFFER",ID:"ID",SPATIAL:"SPATIAL",SQL:"SQL"},n.RasterFunctionType=z,n.ResourceType={MAP:"MAP",SERVICE:"SERVICE",SCENE:"SCENE",DATA:"DATA",INSIGHTS_WORKSPACE:"INSIGHTS_WORKSPACE",MAP_DASHBOARD:"MAP_DASHBOARD"},n.OrderBy={UPDATETIME:"UPDATETIME",HEATLEVEL:"HEATLEVEL",RELEVANCE:"RELEVANCE"},n.OrderType={ASC:"ASC",DESC:"DESC"},n.SearchType={PUBLIC:"PUBLIC",MY_RES:"MY_RES",MYGROUP_RES:"MYGROUP_RES",MYDEPARTMENT_RES:"MYDEPARTMENT_RES",SHARETOME_RES:"SHARETOME_RES"},n.AggregationTypes={TAG:"TAG",TYPE:"TYPE"},n.PermissionType={SEARCH:"SEARCH",READ:"READ",READWRITE:"READWRITE",DELETE:"DELETE",DOWNLOAD:"DOWNLOAD"},n.EntityType={DEPARTMENT:"DEPARTMENT",GROUP:"GROUP",IPORTALGROUP:"IPORTALGROUP",ROLE:"ROLE",USER:"USER"},n.WebExportFormatType={PNG:"PNG",PDF:"PDF"},n.WebScaleOrientationType={HORIZONTALLABELSBELOW:"HORIZONTALLABELSBELOW",HORIZONTALLABELSABOVE:"HORIZONTALLABELSABOVE",VERTICALLABELSLEFT:"VERTICALLABELSLEFT",VERTICALLABELSRIGHT:"VERTICALLABELSRIGHT"},n.WebScaleType={LINE:"LINE",BAR:"BAR",BAR_SUB:"BAR_SUB"},n.WebScaleUnit={METER:"METER",FOOT:"FOOT",DEGREES:"DEGREES"},n.KnowledgeGraph=sW,n.BoundsType=H,n.CellSizeType=q,n.ColourModeChart=J,n.DisplayModeChart=W,n.VideoFeature=kL,n.createWebMapBaseExtending=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wr,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"triggerEvent";return function(r){function n(t,e,r){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),(o=xQ(this,n)).serverUrl=e.serverUrl||"https://www.supermapol.com",o.accessToken=e.accessToken,o.accessKey=e.accessKey,o.tiandituKey=e.tiandituKey||"",o.googleMapsAPIKey=e.googleMapsAPIKey||"",o.bingMapsKey=e.bingMapsKey||"",o.googleMapsLanguage=e.googleMapsLanguage||"zh-CN",o.withCredentials=e.withCredentials||!1,o.proxy=e.proxy,o.target=e.target||"map",o.excludePortalProxyUrl=e.excludePortalProxyUrl,o.isSuperMapOnline=e.isSuperMapOnline,o.ignoreBaseProjection=e.ignoreBaseProjection,o.echartslayer=[],o.canvgsV=[],o.webMapService=new vQ(t,e),o.mapOptions=r,o.eventTypes=["getmapinfofailed","getlayerdatasourcefailed"],o.mapId=t,o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&CQ(t,e)}(n,t),o=n,(i=[{key:"_initWebMap",value:function(){throw new Error("_initWebMap is not implemented")}},{key:"_getMapInfo",value:function(){throw new Error("_getMapInfo is not implemented")}},{key:"_createMap",value:function(){throw new Error("_createMap is not implemented")}},{key:"_initBaseLayer",value:function(){throw new Error("_initBaseLayer is not implemented")}},{key:"_initOverlayLayer",value:function(){throw new Error("_initOverlayLayer is not implemented")}},{key:"_addLayerSucceeded",value:function(){throw new Error("_addLayerSucceeded is not implemented")}},{key:"_unproject",value:function(){throw new Error("_unproject is not implemented")}},{key:"clean",value:function(){throw new Error("clean is not implemented")}},{key:"echartsLayerResize",value:function(){this.echartslayer.forEach(function(t){t.chart.resize()})}},{key:"setMapId",value:function(t){var e=this;"string"==typeof t||"number"==typeof t?(this.mapId=t,this.webMapInfo=null):null!==t&&"object"===OQ(t)&&(this.webMapInfo=t),this.webMapService.setMapId(t),t&&setTimeout(function(){e._initWebMap()},0)}},{key:"setServerUrl",value:function(t){this.serverUrl=t,this.webMapService.setServerUrl(t)}},{key:"setWithCredentials",value:function(t){this.withCredentials=t,this.webMapService.setWithCredentials(t)}},{key:"setProxy",value:function(t){this.proxy=t,this.webMapService.setProxy(t)}},{key:"setZoom",value:function(t){this.map&&(this.mapOptions.zoom=t,t!==+this.map.getZoom().toFixed(2)&&(t||0===t)&&this.map.setZoom(t,{from:"setZoom"}))}},{key:"setMaxBounds",value:function(t){this.map&&(this.mapOptions.maxBounds=t,t&&this.map.setMaxBounds(t))}},{key:"setMinZoom",value:function(t){this.map&&(this.mapOptions.minZoom=t,(t||0===t)&&this.map.setMinZoom(t))}},{key:"setMaxZoom",value:function(t){this.map&&(this.mapOptions.maxZoom=t,(t||0===t)&&this.map.setMaxZoom(t))}},{key:"initWebMap",value:function(){if(this.clean(),this.serverUrl=this.serverUrl&&this.webMapService.handleServerUrl(this.serverUrl),this.webMapInfo){var t=this.webMapInfo;return t.mapParams={title:this.webMapInfo.title,description:this.webMapInfo.description},this.mapParams=t.mapParams,void this._getMapInfo(t)}this.mapId&&this.serverUrl?(this._taskID=new Date,this.getMapInfo(this._taskID)):this._createMap()}},{key:"getMapInfo",value:function(t){var e=this;this.serverUrl=this.serverUrl&&this.webMapService.handleServerUrl(this.serverUrl),this.webMapService.getMapInfo().then(function(r){e._taskID===t&&(e.mapParams=r.mapParams,e._getMapInfo(r,t))},function(t){throw t}).catch(function(t){e._fire("getmapinfofailed",{error:t}),console.log(t)})}},{key:"getBaseLayerType",value:function(t){var e=t.layerType;switch((e.indexOf("TIANDITU_VEC")>-1||e.indexOf("TIANDITU_IMG")>-1||e.indexOf("TIANDITU_TER")>-1)&&(e="TIANDITU"),e){case"TILE":case"SUPERMAP_REST":return"TILE";case"CLOUD":case"CLOUD_BLACK":return"CLOUD";case"OSM":case"JAPAN_ORT":case"JAPAN_RELIEF":case"JAPAN_PALE":case"JAPAN_STD":case"GOOGLE_CN":case"GOOGLE":return"XYZ";default:return e}}},{key:"getMapurls",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{CLOUD:t.CLOUD||"http://t2.dituhui.com/FileService/image?map=quanguo&type=web&x={x}&y={y}&z={z}",CLOUD_BLACK:t.CLOUD_BLACK||"http://t3.dituhui.com/MapService/getGdp?x={x}&y={y}&z={z}",OSM:t.OSM||"https://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png",GOOGLE:"https://maps.googleapis.com/maps/vt?pb=!1m5!1m4!1i{z}!2i{x}!3i{y}!4i256!2m3!1e0!2sm!3i540264686!3m12!2s{googleMapsLanguage}!3sUS!5e18!12m4!1e68!2m2!1sset!2sRoadmap!12m3!1e37!2m1!1ssmartmaps!4e0&key={googleMapsAPIKey}",GOOGLE_CN:"https://mt{0-3}.google.com/vt/lyrs=m&hl=zh-CN&gl=cn&x={x}&y={y}&z={z}",JAPAN_STD:"https://cyberjapandata.gsi.go.jp/xyz/std/{z}/{x}/{y}.png",JAPAN_PALE:"https://cyberjapandata.gsi.go.jp/xyz/pale/{z}/{x}/{y}.png",JAPAN_RELIEF:"https://cyberjapandata.gsi.go.jp/xyz/relief/{z}/{x}/{y}.png",JAPAN_ORT:"https://cyberjapandata.gsi.go.jp/xyz/ort/{z}/{x}/{y}.jpg"}}},{key:"getLayerFeatures",value:function(t,e,r){var n,o,i=this,a=this.webMapService.getLayerFeatures(r,t,this.baseProjection);a&&a.then((n=wQ().mark(function r(n){var o;return wQ().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(!i.mapId||i._taskID===e){r.next=2;break}return r.abrupt("return");case 2:if(!n||!t.projection){r.next=8;break}if(mQ.getProjection(t.projection)){r.next=8;break}return r.next=6,i.webMapService.getEpsgCodeInfo(t.projection.split(":")[1],i.serverUrl);case 6:(o=r.sent)&&mQ.registerProjection(t.projection,o);case 8:i._getLayerFeaturesSucceeded(n,t);case 9:case"end":return r.stop()}},r)}),o=function(){var t=this,e=arguments;return new Promise(function(r,o){var i=n.apply(t,e);function a(t){_Q(i,r,o,a,s,"next",t)}function s(t){_Q(i,r,o,a,s,"throw",t)}a(void 0)})},function(t){return o.apply(this,arguments)}),function(t){throw new Error(t)}).catch(function(e){i._addLayerSucceeded(),i._fire("getlayerdatasourcefailed",{error:e,layer:t,map:i.map}),console.log(e)})}},{key:"setFeatureInfo",value:function(t){var e,r=t.dv_v5_markerInfo;if(!r||!r.dataViz_title)return r;e=r;var n=t.properties;for(var o in e)n[o]&&(e[o]=n[o],delete n[o]);return e}},{key:"getRankStyleGroup",value:function(t,e,r){var n=[],o=[],i=r.style,a=r.themeSetting,s=a.segmentMethod,u=a.segmentCount,l=a.customSettings,c=r.themeSetting.minRadius,f=r.themeSetting.maxRadius,p=a.colors,h=i.fillColor;e.forEach(function(e){var r=e.properties[t];null==r||""===r||isNaN(+r)||n.push(Number(r))});try{o=zD.getArraySegments(n,s,u)}catch(t){console.log(t)}for(var y=0;y<u;y++)if(y in l){var d=l[y].segment.start,v=l[y].segment.end;null!=d&&(o[y]=d),null!=v&&(o[y+1]=v)}var m=[];if(o&&o.length){for(var b,g,S=o.length,w=(f-c)/(S-1),_=Number(((f+c)/2).toFixed(2)),O="",E=p?PD.getGradientColors(p,S,"RANGE"):[],P=0;P<S-1;P++)_=(b=Number(o[P].toFixed(2)))===(g=Number(o[P+1].toFixed(2)))?_:c+Math.round(w*P),g=P===S-2?g+.01:g,_=l[P]&&l[P].radius?l[P].radius:_,i.radius=_,p&&p.length>0&&(O=l[P]&&l[P].color?l[P].color:E[P]||h,i.fillColor=O),m.push({radius:_,color:O,start:b,end:g,style:i});return m}return!1}},{key:"createRankStyleSource",value:function(t,e){var r=t.themeSetting.themeField,n=this.getRankStyleGroup(r,e,t);return!!n&&{parameters:t,styleGroups:n}}},{key:"getRestMapLayerInfo",value:function(t,e){var r=t.bounds,n=t.coordUnit,o=t.visibleScales,i=t.url;return e.layerType="TILE",e.orginEpsgCode=this.baseProjection,e.units=n&&n.toLowerCase(),e.extent=[r.left,r.bottom,r.right,r.top],e.visibleScales=o,e.url=i,e.sourceType="TILE",e}},{key:"handleLayerFeatures",value:function(t,e){var r=e.layerType,n=e.style,o=e.themeSetting,i=e.filterCondition;return(n||o)&&i&&"RANGE"!==r&&"UNIQUE"!==r&&"RANK_SYMBOL"!==r&&(t=this.getFilterFeatures(i,t)),t}},{key:"mergeFeatures",value:function(t,e,r){if(!(e instanceof Array))return e;if(!(e=e.map(function(t,e){return Object.prototype.hasOwnProperty.call(t.properties,"index")||(t.properties.index=e),t})).length||!r&&e[0].geometry)return e;var n=this.map.getSource(t);if((!n||!n._data.features)&&e[0].geometry)return e;var o=n&&n._data&&n._data.features,i=[];return!r&&o?o:(e.forEach(function(t){var e=o.find(function(e){return isNaN(+e.properties[r])&&isNaN(+t.properties[r])?JSON.stringify(e.properties[r]||"")===JSON.stringify(t.properties[r]||""):+e.properties[r]==+t.properties[r]});e?i.push(gQ(gQ({},e),t)):t.geometry&&i.push(t)}),i)}},{key:"getFilterFeatures",value:function(t,e){if(!t)return e;for(var r=this.replaceFilterCharacter(t),n=[],o=0;o<e.length;o++){var i=e[o],a=void 0,s=i.properties;try{r=this.parseCondition(r,Object.keys(s));var u=this.parseConditionFeature(s),l="select * from json where ("+r+")";a=window.jsonsql.query(l,{attributes:u})}catch(t){continue}a&&a.length>0&&n.push(i)}return n}},{key:"replaceFilterCharacter",value:function(t){return t=t.replace(/=/g,"==").replace(/AND|and/g,"&&").replace(/or|OR/g,"||").replace(/<==/g,"<=").replace(/>==/g,">=")}},{key:"getParseSpecialCharacter",value:function(){var t={};return["(",")","（","）",",","，"].forEach(function(e,r){t[e]="$".concat(r)}),t}},{key:"parseSpecialCharacter",value:function(t){var e=this.getParseSpecialCharacter();for(var r in e)for(var n=e[r],o=new RegExp("\\".concat(r),"g");o.test(t);)t=t.replace(o,n);return t}},{key:"parseCondition",value:function(t,e){var r=this,n=t;return t.replace(/&|\||>|<|=|!/g," ").split(" ").filter(function(t){return t}).forEach(function(t){var o=e.find(function(e){return e===t});if(r.startsWithNumber(t)&&o&&(n=n.replace(o,"$"+o)),o){var i=r.parseSpecialCharacter(o);n=n.replace(o,i)}}),n}},{key:"parseConditionFeature",value:function(t){var e={};for(var r in t){var n=r;this.startsWithNumber(r)&&(n="$"+r),e[n=this.parseSpecialCharacter(n)]=t[r]}return e}},{key:"startsWithNumber",value:function(t){return/^\d/.test(t)}},{key:"getEchartsLayerOptions",value:function(t,e,r){var n=this.webMapService.getFeatureProperties(e),o=function(t,e){var r=[];if(e&&e.length){var n,o,i=t.from,a=t.to;if("XY_FIELD"===i.type&&i.xField&&i.yField&&a.xField&&a.yField)e.forEach(function(t){var e=t[i.xField],s=t[i.yField],u=t[a.xField],l=t[a.yField];e&&s&&u&&l&&(n=[t[i.xField],t[i.yField]],o=[t[a.xField],t[a.yField]],r.push({coords:[n,o]}))});else if("PLACE_FIELD"===i.type&&i.field&&a.field){var s=nQ.concat(rQ);e.forEach(function(t){var e=t[i.field],u=t[a.field];n=s.find(function(t){return oQ(t.name,e)}),o=s.find(function(t){return oQ(t.name,u)}),n&&o&&r.push({coords:[n.coord,o.coord]})})}}return r}(t,n),i=this._createPointsData(o,t,n);return this._createOptions(t,o,i,r)}},{key:"getDashStyle",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"array";if(!t)return"array"===r?[]:"";var n,o=e;switch(t){case"solid":n=[];break;case"dot":n=[1,4*o];break;case"dash":n=[4*o,4*o];break;case"dashrailway":n=[8*o,12*o];break;case"dashdot":n=[4*o,4*o,1*o,4*o];break;case"longdash":n=[8*o,4*o];break;case"longdashdot":n=[8*o,4*o,1,4*o];break;default:Tt.isArray(t)&&(n=t),n=(t=at.trim(t).replace(/\s+/g,",")).replace(/\[|\]/gi,"").split(",")}return n="array"===r?n:n.join(",")}},{key:"getCanvasFromSVG",value:function(t,e,r){var n=this,o=document.createElement("canvas");if(o.id="dataviz-canvas-".concat((new Date).getTime()),o.style.display="none",e.appendChild(o),t){var i=(window.canvg||{}).default?window.canvg.default:XY,a=o.getContext("2d");i.from(a,t,{ignoreMouse:!0,ignoreAnimation:!0,forceRedraw:function(){return!1}}).then(function(t){t.start(),n.canvgsV.push(t),o.width>300||o.height>300||r(o)})}else r(o)}},{key:"stopCanvg",value:function(){this.canvgsV.forEach(function(t){return t.stop()}),this.canvgsV=[]}},{key:"getRangeStyleGroup",value:function(t,e){var r,n=t.featureType,o=t.style,i=t.themeSetting,a=i.customSettings,s=i.themeField,u=i.segmentCount,l=i.segmentMethod,c=i.colors,f=[];e.forEach(function(t){if(r=t.properties){var e=r[s];(e||0===e)&&!isNaN(+e)&&f.push(parseFloat(e))}},this);var p=f&&f.length&&zD.getArraySegments(f,l,u);if(p){var h=u;r&&p[0]===p[r.length-1]&&(h=1,p.length=2);for(var y=0;y<p.length;y++){var d=p[y];d=0===y?Math.floor(100*d)/100:Math.ceil(100*d)/100+.1,p[y]=Number(d.toFixed(2))}var v=c;v=PD.getGradientColors(v,h,"RANGE");for(var m=0;m<h;m++)m in a&&(a[m].segment.start&&(p[m]=a[m].segment.start),a[m].segment.end&&(p[m+1]=a[m].segment.end));for(var b=[],g=0;g<h;g++){var S=v[g];g in a&&a[g].color&&(S=a[g].color),"LINE"===n?o.strokeColor=S:o.fillColor=S;var w=p[g],_=p[g+1],O=JSON.parse(JSON.stringify(o));b.push({style:O,color:S,start:w,end:_})}return b}}},{key:"getCustomSettingColors",value:function(t,e){var r=[];return Object.keys(t).forEach(function(n){"LINE"===e?r.push(t[n].strokeColor):r.push(t[n].fillColor)}),r}},{key:"getUniqueStyleGroup",value:function(t,e){var r=t.featureType,n=t.style,o=t.themeSetting,i=o.colors,a=o.customSettings,s=o.themeField,u=e&&e[0]&&e[0].properties||{};Object.keys(u).forEach(function(t){t.toLocaleUpperCase()===s.toLocaleUpperCase()&&(s=t)});var l=[];for(var c in e){var f=e[c].properties[s],p=!1;for(var h in l)if(l[h]===f){p=!0;break}p||l.push(f)}var y=i;y=PD.getGradientColors(y,l.length);var d=this.getCustomSettingColors(a,r).map(function(t){return t&&t.toLowerCase()}),v=PD.getGradientColors(i,l.length+Object.keys(a).length).map(function(t){return t.toLowerCase()}),m=tQ()(v,d),b=[];return l.forEach(function(t,e){var o=y[e],i=gQ({},n),u=a[t];"object"===OQ(u)?o=(i=Object.assign(i,u)).fillColor||i.strokeColor:("string"==typeof u&&(o=a[t]),u||(o=m.shift()),"LINE"===r?i.strokeColor=o:i.fillColor=o),b.push({color:o,style:i,value:t,themeField:s})},this),b}},{key:"transformFeatures",value:function(t){var e=this;return t&&t.forEach(function(r,n){var o=r.geometry&&r.geometry.coordinates;o&&0!==o.length&&(ZY(r,function(t){var r=e._unproject(t);t[0]=r[0],t[1]=r[1]}),t[n]=r)}),t}},{key:"_drawTextRectAndGetSize",value:function(t){var e,r=t.context,n=t.style,o=t.textArray,i=t.lineHeight,a=t.doublePadding,s=t.canvas,u=n.backgroundFill,l=n.maxWidth-a,c=0,f=0,p=[];o.forEach(function(t){var e="",n=!1;f++;for(var o=0;o<t.length;o++){var i=e+t[o],a=r.measureText(i).width;a>l&&o>0||"\n"===t[o]?(e=t[o],f++,n=!0):(e=i,c=a)}n?p.push(l):p.push(c)},this);for(var h=0;h<p.length;h++){var y=p[h];if(y>=l){c=l;break}y>c&&(c=y)}return c+=a,e=f*i+a-6,s.width=c,s.height=e,r.fillStyle=u,r.fillRect(0,0,c,e),r.lineWidth=n.borderWidth,r.strokeStyle=n.borderColor,r.strokeRect(0,0,c,e),{width:c,height:e}}},{key:"_drawTextWithCanvas",value:function(t){var e=t.context,r=t.canvas,n=t.style,o=Number(n.font.replace(/[^0-9]/gi,""))+3,i=n.text.split("\r\n");e.font=n.font;var a=this._drawTextRectAndGetSize({context:e,style:n,textArray:i,lineHeight:o,doublePadding:16,canvas:r}),s=8;i.forEach(function(t,r){0!==r&&(s+=o),e.font=n.font;var i,u=n.textAlign,l=a.width-16;switch(u){case"center":i=l/2;break;case"right":i=l;break;default:i=8}for(var c=t.split(""),f="",p=n.fillColor,h=n.maxWidth-16,y=0;y<c.length;y++){var d=f+c[y];e.measureText(d).width>h&&y>0||"\n"===c[y]?(e.fillStyle=p,e.textAlign=u,e.textBaseline="top",e.fillText(f,i,s),f=c[y],s+=o):f=d}e.fillStyle=p,e.textAlign=u,e.textBaseline="top",e.fillText(f,i,s)},this)}},{key:"handleSvgColor",value:function(t,e){var r=t.fillColor,n=t.fillOpacity,o=t.strokeColor,i=t.strokeOpacity,a=t.strokeWidth,s=e.getContext("2d");t.text?this._drawTextWithCanvas({context:s,canvas:e,style:t}):(r&&(s.fillStyle=PD.getColorWithOpacity(r,n),s.fill()),(o||a)&&(s.strokeStyle=PD.getColorWithOpacity(o,i),s.lineWidth=a,s.stroke()))}},{key:"_createPointsData",value:function(t,e,r){var n=[],o=e.labelSetting;if(!o.show||!t.length)return n;var i=[],a=[];return t.forEach(function(t,e){var n=t.coords,s=n[0],u=n[1],l=r[e][o.from],c=r[e][o.to];!i.find(function(t){return t.value[0]===s[0]&&t.value[1]===s[1]})&&i.push({name:l,value:s}),!a.find(function(t){return t.value[0]===u[0]&&t.value[1]===u[1]})&&a.push({name:c,value:u})}),n=i.concat(a)}},{key:"_createOptions",value:function(t,e,r,n){var o,i=this._createLineSeries(t,e,n);if(r&&r.length){var a=this._createPointSeries(t,r,n);o=i.concat(a)}else o=i.slice();return{series:o,animation:!1}}},{key:"_createPointSeries",value:function(t,e,r){var n=t.lineSetting,o=t.animationSetting,i=t.labelSetting,a=[{name:"point-series",coordinateSystem:r,zlevel:2,label:{normal:{show:i.show,position:"right",formatter:"{b}",color:i.color,fontFamily:i.fontFamily}},itemStyle:{normal:{color:n.color||i.color}},data:e}];return o.show?(a[0].type="effectScatter",a[0].rippleEffect={brushType:"stroke"}):a[0].type="scatter",a}},{key:"_createLineSeries",value:function(t,e,r){var n=t.lineSetting,o=t.animationSetting,i=[{name:"line-series",coordinateSystem:r,type:"lines",zlevel:1,effect:{show:o.show,constantSpeed:o.constantSpeed,trailLength:0,symbol:o.symbol,symbolSize:o.symbolSize},lineStyle:{normal:{color:n.color,type:n.type,width:n.width,opacity:n.opacity,curveness:n.curveness}},data:e}];return e.length>=kQ&&(i[0].large=!0,i[0].largeThreshold=100,i[0].blendMode="lighter"),i}},{key:"_getLayerFeaturesSucceeded",value:function(t,e){switch(t.type){case"feature":this._initOverlayLayer(e,t.features);break;case"restMap":e.layerType="restMap",this._initOverlayLayer(e,t.restMaps);break;case"mvt":e.layerType="mvt",this._initOverlayLayer(e,t);break;case"dataflow":case"noServerId":this._initOverlayLayer(e)}}},{key:"_fire",value:function(t,r){this[e]&&this[e](t,r)}}])&&EQ(o.prototype,i),a&&EQ(o,a),Object.defineProperty(o,"prototype",{writable:!1}),o;var o,i,a}()},n.WebMapService=vQ,n.epsgDefine=mQ,n.toEpsgCode=function(t){if("string"!=typeof t)return"";if(0===t.indexOf("EPSG"))return t;var e=t.lastIndexOf("AUTHORITY")+10,r=t.indexOf("]",e)-1;return e>0&&r>0?"EPSG:".concat(t.substring(e,r).split(",")[1].substr(1)):""};var MQ=L,RQ=r.n(MQ);var LQ=1,DQ=2,BQ=3,FQ=4,UQ=5,GQ=6378137,VQ=6356752.314,zQ=.0066943799901413165,HQ=484813681109536e-20,qQ=Math.PI/2,JQ=.16666666666666666,WQ=.04722222222222222,KQ=.022156084656084655,YQ=1e-10,QQ=.017453292519943295,XQ=57.29577951308232,ZQ=Math.PI/4,$Q=2*Math.PI,tX=3.14159265359,eX={greenwich:0,lisbon:-9.131906111111,paris:2.337229166667,bogota:-74.080916666667,madrid:-3.687938888889,rome:12.452333333333,bern:7.439583333333,jakarta:106.807719444444,ferro:-17.666666666667,brussels:4.367975,stockholm:18.058277777778,athens:23.7163375,oslo:10.722916666667},rX={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}},nX=/[\s_\-\/\(\)]/g;function oX(t,e){if(t[e])return t[e];for(var r,n=Object.keys(t),o=e.toLowerCase().replace(nX,""),i=-1;++i<n.length;)if((r=n[i]).toLowerCase().replace(nX,"")===o)return t[r]}function iX(t){var e,r,n,o={},i=t.split("+").map(function(t){return t.trim()}).filter(function(t){return t}).reduce(function(t,e){var r=e.split("=");return r.push(!0),t[r[0].toLowerCase()]=r[1],t},{}),a={proj:"projName",datum:"datumCode",rf:function(t){o.rf=parseFloat(t)},lat_0:function(t){o.lat0=t*QQ},lat_1:function(t){o.lat1=t*QQ},lat_2:function(t){o.lat2=t*QQ},lat_ts:function(t){o.lat_ts=t*QQ},lon_0:function(t){o.long0=t*QQ},lon_1:function(t){o.long1=t*QQ},lon_2:function(t){o.long2=t*QQ},alpha:function(t){o.alpha=parseFloat(t)*QQ},gamma:function(t){o.rectified_grid_angle=parseFloat(t)},lonc:function(t){o.longc=t*QQ},x_0:function(t){o.x0=parseFloat(t)},y_0:function(t){o.y0=parseFloat(t)},k_0:function(t){o.k0=parseFloat(t)},k:function(t){o.k0=parseFloat(t)},a:function(t){o.a=parseFloat(t)},b:function(t){o.b=parseFloat(t)},r:function(t){o.a=o.b=parseFloat(t)},r_a:function(){o.R_A=!0},zone:function(t){o.zone=parseInt(t,10)},south:function(){o.utmSouth=!0},towgs84:function(t){o.datum_params=t.split(",").map(function(t){return parseFloat(t)})},to_meter:function(t){o.to_meter=parseFloat(t)},units:function(t){o.units=t;var e=oX(rX,t);e&&(o.to_meter=e.to_meter)},from_greenwich:function(t){o.from_greenwich=t*QQ},pm:function(t){var e=oX(eX,t);o.from_greenwich=(e||parseFloat(t))*QQ},nadgrids:function(t){"@null"===t?o.datumCode="none":o.nadgrids=t},axis:function(t){3===t.length&&-1!=="ewnsud".indexOf(t.substr(0,1))&&-1!=="ewnsud".indexOf(t.substr(1,1))&&-1!=="ewnsud".indexOf(t.substr(2,1))&&(o.axis=t)},approx:function(){o.approx=!0}};for(e in i)r=i[e],e in a?"function"==typeof(n=a[e])?n(r):o[n]=r:o[e]=r;return"string"==typeof o.datumCode&&"WGS84"!==o.datumCode&&(o.datumCode=o.datumCode.toLowerCase()),o}var aX=function(t){return new hX(t).output()},sX=1,uX=/\s/,lX=/[A-Za-z]/,cX=/[A-Za-z84_]/,fX=/[,\]]/,pX=/[\d\.E\-\+]/;function hX(t){if("string"!=typeof t)throw new Error("not a string");this.text=t.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=sX}function yX(t,e,r){Array.isArray(e)&&(r.unshift(e),e=null);var n=e?{}:t,o=r.reduce(function(t,e){return dX(e,t),t},n);e&&(t[e]=o)}function dX(t,e){if(Array.isArray(t)){var r=t.shift();if("PARAMETER"===r&&(r=t.shift()),1===t.length)return Array.isArray(t[0])?(e[r]={},void dX(t[0],e[r])):void(e[r]=t[0]);if(t.length)if("TOWGS84"!==r){if("AXIS"===r)return r in e||(e[r]=[]),void e[r].push(t);var n;switch(Array.isArray(r)||(e[r]={}),r){case"UNIT":case"PRIMEM":case"VERT_DATUM":return e[r]={name:t[0].toLowerCase(),convert:t[1]},void(3===t.length&&dX(t[2],e[r]));case"SPHEROID":case"ELLIPSOID":return e[r]={name:t[0],a:t[1],rf:t[2]},void(4===t.length&&dX(t[3],e[r]));case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":return t[0]=["name",t[0]],void yX(e,r,t);default:for(n=-1;++n<t.length;)if(!Array.isArray(t[n]))return dX(t,e[r]);return yX(e,r,t)}}else e[r]=t;else e[r]=!0}else e[t]=!0}function vX(t){"@babel/helpers - typeof";return(vX="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}hX.prototype.readCharicter=function(){var t=this.text[this.place++];if(4!==this.state)for(;uX.test(t);){if(this.place>=this.text.length)return;t=this.text[this.place++]}switch(this.state){case sX:return this.neutral(t);case 2:return this.keyword(t);case 4:return this.quoted(t);case 5:return this.afterquote(t);case 3:return this.number(t);case-1:return}},hX.prototype.afterquote=function(t){if('"'===t)return this.word+='"',void(this.state=4);if(fX.test(t))return this.word=this.word.trim(),void this.afterItem(t);throw new Error("havn't handled \""+t+'" in afterquote yet, index '+this.place)},hX.prototype.afterItem=function(t){return","===t?(null!==this.word&&this.currentObject.push(this.word),this.word=null,void(this.state=sX)):"]"===t?(this.level--,null!==this.word&&(this.currentObject.push(this.word),this.word=null),this.state=sX,this.currentObject=this.stack.pop(),void(this.currentObject||(this.state=-1))):void 0},hX.prototype.number=function(t){if(!pX.test(t)){if(fX.test(t))return this.word=parseFloat(this.word),void this.afterItem(t);throw new Error("havn't handled \""+t+'" in number yet, index '+this.place)}this.word+=t},hX.prototype.quoted=function(t){'"'!==t?this.word+=t:this.state=5},hX.prototype.keyword=function(t){if(cX.test(t))this.word+=t;else{if("["===t){var e=[];return e.push(this.word),this.level++,null===this.root?this.root=e:this.currentObject.push(e),this.stack.push(this.currentObject),this.currentObject=e,void(this.state=sX)}if(!fX.test(t))throw new Error("havn't handled \""+t+'" in keyword yet, index '+this.place);this.afterItem(t)}},hX.prototype.neutral=function(t){if(lX.test(t))return this.word=t,void(this.state=2);if('"'===t)return this.word="",void(this.state=4);if(pX.test(t))return this.word=t,void(this.state=3);if(!fX.test(t))throw new Error("havn't handled \""+t+'" in neutral yet, index '+this.place);this.afterItem(t)},hX.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(-1===this.state)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};var mX=.017453292519943295;function bX(t){return t*mX}function gX(t){var e=aX(t),r=e.shift(),n=e.shift();e.unshift(["name",n]),e.unshift(["type",r]);var o={};return dX(e,o),function(t){if("GEOGCS"===t.type?t.projName="longlat":"LOCAL_CS"===t.type?(t.projName="identity",t.local=!0):"object"===vX(t.PROJECTION)?t.projName=Object.keys(t.PROJECTION)[0]:t.projName=t.PROJECTION,t.AXIS){for(var e="",r=0,n=t.AXIS.length;r<n;++r){var o=[t.AXIS[r][0].toLowerCase(),t.AXIS[r][1].toLowerCase()];-1!==o[0].indexOf("north")||("y"===o[0]||"lat"===o[0])&&"north"===o[1]?e+="n":-1!==o[0].indexOf("south")||("y"===o[0]||"lat"===o[0])&&"south"===o[1]?e+="s":-1!==o[0].indexOf("east")||("x"===o[0]||"lon"===o[0])&&"east"===o[1]?e+="e":-1===o[0].indexOf("west")&&("x"!==o[0]&&"lon"!==o[0]||"west"!==o[1])||(e+="w")}2===e.length&&(e+="u"),3===e.length&&(t.axis=e)}t.UNIT&&(t.units=t.UNIT.name.toLowerCase(),"metre"===t.units&&(t.units="meter"),t.UNIT.convert&&("GEOGCS"===t.type?t.DATUM&&t.DATUM.SPHEROID&&(t.to_meter=t.UNIT.convert*t.DATUM.SPHEROID.a):t.to_meter=t.UNIT.convert));var i=t.GEOGCS;function a(e){return e*(t.to_meter||1)}"GEOGCS"===t.type&&(i=t),i&&(i.DATUM?t.datumCode=i.DATUM.name.toLowerCase():t.datumCode=i.name.toLowerCase(),"d_"===t.datumCode.slice(0,2)&&(t.datumCode=t.datumCode.slice(2)),"new_zealand_geodetic_datum_1949"!==t.datumCode&&"new_zealand_1949"!==t.datumCode||(t.datumCode="nzgd49"),"wgs_1984"!==t.datumCode&&"world_geodetic_system_1984"!==t.datumCode||("Mercator_Auxiliary_Sphere"===t.PROJECTION&&(t.sphere=!0),t.datumCode="wgs84"),"_ferro"===t.datumCode.slice(-6)&&(t.datumCode=t.datumCode.slice(0,-6)),"_jakarta"===t.datumCode.slice(-8)&&(t.datumCode=t.datumCode.slice(0,-8)),~t.datumCode.indexOf("belge")&&(t.datumCode="rnb72"),i.DATUM&&i.DATUM.SPHEROID&&(t.ellps=i.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),"international"===t.ellps.toLowerCase().slice(0,13)&&(t.ellps="intl"),t.a=i.DATUM.SPHEROID.a,t.rf=parseFloat(i.DATUM.SPHEROID.rf,10)),i.DATUM&&i.DATUM.TOWGS84&&(t.datum_params=i.DATUM.TOWGS84),~t.datumCode.indexOf("osgb_1936")&&(t.datumCode="osgb36"),~t.datumCode.indexOf("osni_1952")&&(t.datumCode="osni52"),(~t.datumCode.indexOf("tm65")||~t.datumCode.indexOf("geodetic_datum_of_1965"))&&(t.datumCode="ire65"),"ch1903+"===t.datumCode&&(t.datumCode="ch1903"),~t.datumCode.indexOf("israel")&&(t.datumCode="isr93")),t.b&&!isFinite(t.b)&&(t.b=t.a),[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",bX],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",bX],["x0","false_easting",a],["y0","false_northing",a],["long0","central_meridian",bX],["lat0","latitude_of_origin",bX],["lat0","standard_parallel_1",bX],["lat1","standard_parallel_1",bX],["lat2","standard_parallel_2",bX],["azimuth","Azimuth"],["alpha","azimuth",bX],["srsCode","name"]].forEach(function(e){return r=t,o=(n=e)[0],i=n[1],void(!(o in r)&&i in r&&(r[o]=r[i],3===n.length&&(r[o]=n[2](r[o]))));var r,n,o,i}),t.long0||!t.longc||"Albers_Conic_Equal_Area"!==t.projName&&"Lambert_Azimuthal_Equal_Area"!==t.projName||(t.long0=t.longc),t.lat_ts||!t.lat1||"Stereographic_South_Pole"!==t.projName&&"Polar Stereographic (variant B)"!==t.projName?!t.lat_ts&&t.lat0&&"Polar_Stereographic"===t.projName&&(t.lat_ts=t.lat0,t.lat0=bX(t.lat0>0?90:-90)):(t.lat0=bX(t.lat1>0?90:-90),t.lat_ts=t.lat1)}(o),o}function SX(t){var e=this;if(2===arguments.length){var r=arguments[1];"string"==typeof r?"+"===r.charAt(0)?SX[t]=iX(arguments[1]):SX[t]=gX(arguments[1]):SX[t]=r}else if(1===arguments.length){if(Array.isArray(t))return t.map(function(t){Array.isArray(t)?SX.apply(e,t):SX(t)});if("string"==typeof t){if(t in SX)return SX[t]}else"EPSG"in t?SX["EPSG:"+t.EPSG]=t:"ESRI"in t?SX["ESRI:"+t.ESRI]=t:"IAU2000"in t?SX["IAU2000:"+t.IAU2000]=t:console.log(t);return}}!function(t){t("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),t("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),t("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),t.WGS84=t["EPSG:4326"],t["EPSG:3785"]=t["EPSG:3857"],t.GOOGLE=t["EPSG:3857"],t["EPSG:900913"]=t["EPSG:3857"],t["EPSG:102113"]=t["EPSG:3857"]}(SX);var wX=SX;var _X=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];var OX=["3857","900913","3785","102113"];var EX=function(t){if(!function(t){return"string"==typeof t}(t))return t;if(function(t){return t in wX}(t))return wX[t];if(function(t){return _X.some(function(e){return t.indexOf(e)>-1})}(t)){var e=gX(t);if(function(t){var e=oX(t,"authority");if(e){var r=oX(e,"epsg");return r&&OX.indexOf(r)>-1}}(e))return wX["EPSG:3857"];var r=function(t){var e=oX(t,"extension");if(e)return oX(e,"proj4")}(e);return r?iX(r):e}return function(t){return"+"===t[0]}(t)?iX(t):void 0};function PX(t,e){var r,n;if(t=t||{},!e)return t;for(n in e)void 0!==(r=e[n])&&(t[n]=r);return t}function xX(t,e,r){var n=t*e;return r/Math.sqrt(1-n*n)}function TX(t){return t<0?-1:1}function CX(t){return Math.abs(t)<=tX?t:t-TX(t)*$Q}function kX(t,e,r){var n=t*r,o=.5*t;return n=Math.pow((1-n)/(1+n),o),Math.tan(.5*(qQ-e))/n}function AX(t,e){for(var r,n,o=.5*t,i=qQ-2*Math.atan(e),a=0;a<=15;a++)if(r=t*Math.sin(i),i+=n=qQ-2*Math.atan(e*Math.pow((1-r)/(1+r),o))-i,Math.abs(n)<=1e-10)return i;return-9999}function jX(t){return t}var NX=[{init:function(){var t=this.b/this.a;this.es=1-t*t,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=xX(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)},forward:function(t){var e,r,n=t.x,o=t.y;if(o*XQ>90&&o*XQ<-90&&n*XQ>180&&n*XQ<-180)return null;if(Math.abs(Math.abs(o)-qQ)<=YQ)return null;if(this.sphere)e=this.x0+this.a*this.k0*CX(n-this.long0),r=this.y0+this.a*this.k0*Math.log(Math.tan(ZQ+.5*o));else{var i=Math.sin(o),a=kX(this.e,o,i);e=this.x0+this.a*this.k0*CX(n-this.long0),r=this.y0-this.a*this.k0*Math.log(a)}return t.x=e,t.y=r,t},inverse:function(t){var e,r,n=t.x-this.x0,o=t.y-this.y0;if(this.sphere)r=qQ-2*Math.atan(Math.exp(-o/(this.a*this.k0)));else{var i=Math.exp(-o/(this.a*this.k0));if(-9999===(r=AX(this.e,i)))return null}return e=CX(this.long0+n/(this.a*this.k0)),t.x=e,t.y=r,t},names:["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"]},{init:function(){},forward:jX,inverse:jX,names:["longlat","identity"]}],IX={},MX=[];function RX(t,e){var r=MX.length;return t.names?(MX[r]=t,t.names.forEach(function(t){IX[t.toLowerCase()]=r}),this):(console.log(e),!0)}var LX={start:function(){NX.forEach(RX)},add:RX,get:function(t){if(!t)return!1;var e=t.toLowerCase();return void 0!==IX[e]&&MX[IX[e]]?MX[IX[e]]:void 0}},DX={MERIT:{a:6378137,rf:298.257,ellipseName:"MERIT 1983"},SGS85:{a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},GRS80:{a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},IAU76:{a:6378140,rf:298.257,ellipseName:"IAU 1976"},airy:{a:6377563.396,b:6356256.91,ellipseName:"Airy 1830"},APL4:{a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},NWL9D:{a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},mod_airy:{a:6377340.189,b:6356034.446,ellipseName:"Modified Airy"},andrae:{a:6377104.43,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},aust_SA:{a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},GRS67:{a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},bessel:{a:6377397.155,rf:299.1528128,ellipseName:"Bessel 1841"},bess_nam:{a:6377483.865,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},clrk66:{a:6378206.4,b:6356583.8,ellipseName:"Clarke 1866"},clrk80:{a:6378249.145,rf:293.4663,ellipseName:"Clarke 1880 mod."},clrk80ign:{a:6378249.2,b:6356515,rf:293.4660213,ellipseName:"Clarke 1880 (IGN)"},clrk58:{a:6378293.645208759,rf:294.2606763692654,ellipseName:"Clarke 1858"},CPM:{a:6375738.7,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},delmbr:{a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},engelis:{a:6378136.05,rf:298.2566,ellipseName:"Engelis 1985"},evrst30:{a:6377276.345,rf:300.8017,ellipseName:"Everest 1830"},evrst48:{a:6377304.063,rf:300.8017,ellipseName:"Everest 1948"},evrst56:{a:6377301.243,rf:300.8017,ellipseName:"Everest 1956"},evrst69:{a:6377295.664,rf:300.8017,ellipseName:"Everest 1969"},evrstSS:{a:6377298.556,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},fschr60:{a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},fschr60m:{a:6378155,rf:298.3,ellipseName:"Fischer 1960"},fschr68:{a:6378150,rf:298.3,ellipseName:"Fischer 1968"},helmert:{a:6378200,rf:298.3,ellipseName:"Helmert 1906"},hough:{a:6378270,rf:297,ellipseName:"Hough"},intl:{a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},kaula:{a:6378163,rf:298.24,ellipseName:"Kaula 1961"},lerch:{a:6378139,rf:298.257,ellipseName:"Lerch 1979"},mprts:{a:6397300,rf:191,ellipseName:"Maupertius 1738"},new_intl:{a:6378157.5,b:6356772.2,ellipseName:"New International 1967"},plessis:{a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},krass:{a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},SEasia:{a:6378155,b:6356773.3205,ellipseName:"Southeast Asia"},walbeck:{a:6376896,b:6355834.8467,ellipseName:"Walbeck"},WGS60:{a:6378165,rf:298.3,ellipseName:"WGS 60"},WGS66:{a:6378145,rf:298.25,ellipseName:"WGS 66"},WGS7:{a:6378135,rf:298.26,ellipseName:"WGS 72"}},BX=DX.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};DX.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};var FX={};FX.wgs84={towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},FX.ch1903={towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},FX.ggrs87={towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},FX.nad83={towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},FX.nad27={nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},FX.potsdam={towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},FX.carthage={towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},FX.hermannskogel={towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"},FX.militargeographische_institut={towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Militar-Geographische Institut"},FX.osni52={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},FX.ire65={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},FX.rassadiran={towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},FX.nzgd49={towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},FX.osgb36={towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"},FX.s_jtsk={towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},FX.beduaram={towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},FX.gunung_segara={towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},FX.rnb72={towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"};var UX=function(t,e,r,n,o,i,a){var s={};return s.datum_type=void 0===t||"none"===t?UQ:FQ,e&&(s.datum_params=e.map(parseFloat),0===s.datum_params[0]&&0===s.datum_params[1]&&0===s.datum_params[2]||(s.datum_type=LQ),s.datum_params.length>3&&(0===s.datum_params[3]&&0===s.datum_params[4]&&0===s.datum_params[5]&&0===s.datum_params[6]||(s.datum_type=DQ,s.datum_params[3]*=HQ,s.datum_params[4]*=HQ,s.datum_params[5]*=HQ,s.datum_params[6]=s.datum_params[6]/1e6+1))),a&&(s.datum_type=BQ,s.grids=a),s.a=r,s.b=n,s.es=o,s.ep2=i,s},GX={};function VX(t){if(0===t.length)return null;var e="@"===t[0];return e&&(t=t.slice(1)),"null"===t?{name:"null",mandatory:!e,grid:null,isNull:!0}:{name:t,mandatory:!e,grid:GX[t]||null,isNull:!1}}function zX(t){return t/3600*Math.PI/180}function HX(t,e,r){return String.fromCharCode.apply(null,new Uint8Array(t.buffer.slice(e,r)))}function qX(t){return t.map(function(t){return[zX(t.longitudeShift),zX(t.latitudeShift)]})}function JX(t,e,r){return{name:HX(t,e+8,e+16).trim(),parent:HX(t,e+24,e+24+8).trim(),lowerLatitude:t.getFloat64(e+72,r),upperLatitude:t.getFloat64(e+88,r),lowerLongitude:t.getFloat64(e+104,r),upperLongitude:t.getFloat64(e+120,r),latitudeInterval:t.getFloat64(e+136,r),longitudeInterval:t.getFloat64(e+152,r),gridNodeCount:t.getInt32(e+168,r)}}function WX(t,e,r,n){for(var o=e+176,i=[],a=0;a<r.gridNodeCount;a++){var s={latitudeShift:t.getFloat32(o+16*a,n),longitudeShift:t.getFloat32(o+16*a+4,n),latitudeAccuracy:t.getFloat32(o+16*a+8,n),longitudeAccuracy:t.getFloat32(o+16*a+12,n)};i.push(s)}return i}function KX(t){"@babel/helpers - typeof";return(KX="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function YX(t,e){if(!(this instanceof YX))return new YX(t);e=e||function(t){if(t)throw t};var r=EX(t);if("object"===KX(r)){var n=YX.projections.get(r.projName);if(n){if(r.datumCode&&"none"!==r.datumCode){var o=oX(FX,r.datumCode);o&&(r.datum_params=r.datum_params||(o.towgs84?o.towgs84.split(","):null),r.ellps=o.ellipse,r.datumName=o.datumName?o.datumName:r.datumCode)}r.k0=r.k0||1,r.axis=r.axis||"enu",r.ellps=r.ellps||"wgs84",r.lat1=r.lat1||r.lat0;var i,a,s,u,l,c,f,p=function(t,e,r,n,o){if(!t){var i=oX(DX,n);i||(i=BX),t=i.a,e=i.b,r=i.rf}return r&&!e&&(e=(1-1/r)*t),(0===r||Math.abs(t-e)<YQ)&&(o=!0,e=t),{a:t,b:e,rf:r,sphere:o}}(r.a,r.b,r.rf,r.ellps,r.sphere),h=(i=p.a,a=p.b,p.rf,s=r.R_A,c=((u=i*i)-(l=a*a))/u,f=0,s?(u=(i*=1-c*(JQ+c*(WQ+c*KQ)))*i,c=0):f=Math.sqrt(c),{es:c,e:f,ep2:(u-l)/l}),y=function(t){return void 0===t?null:t.split(",").map(VX)}(r.nadgrids),d=r.datum||UX(r.datumCode,r.datum_params,p.a,p.b,h.es,h.ep2,y);PX(this,r),PX(this,n),this.a=p.a,this.b=p.b,this.rf=p.rf,this.sphere=p.sphere,this.es=h.es,this.e=h.e,this.ep2=h.ep2,this.datum=d,this.init(),e(null,this)}else e(t)}else e(t)}YX.projections=LX,YX.projections.start();var QX=YX;function XX(t,e,r){var n,o,i,a,s=t.x,u=t.y,l=t.z?t.z:0;if(u<-qQ&&u>-1.001*qQ)u=-qQ;else if(u>qQ&&u<1.001*qQ)u=qQ;else{if(u<-qQ)return{x:-1/0,y:-1/0,z:t.z};if(u>qQ)return{x:1/0,y:1/0,z:t.z}}return s>Math.PI&&(s-=2*Math.PI),o=Math.sin(u),a=Math.cos(u),i=o*o,{x:((n=r/Math.sqrt(1-e*i))+l)*a*Math.cos(s),y:(n+l)*a*Math.sin(s),z:(n*(1-e)+l)*o}}function ZX(t,e,r,n){var o,i,a,s,u,l,c,f,p,h,y,d,v,m,b,g=t.x,S=t.y,w=t.z?t.z:0;if(o=Math.sqrt(g*g+S*S),i=Math.sqrt(g*g+S*S+w*w),o/r<1e-12){if(m=0,i/r<1e-12)return qQ,b=-n,{x:t.x,y:t.y,z:t.z}}else m=Math.atan2(S,g);a=w/i,f=(s=o/i)*(1-e)*(u=1/Math.sqrt(1-e*(2-e)*s*s)),p=a*u,v=0;do{v++,l=e*(c=r/Math.sqrt(1-e*p*p))/(c+(b=o*f+w*p-c*(1-e*p*p))),d=(y=a*(u=1/Math.sqrt(1-l*(2-l)*s*s)))*f-(h=s*(1-l)*u)*p,f=h,p=y}while(d*d>1e-24&&v<30);return{x:m,y:Math.atan(y/Math.abs(h)),z:b}}function $X(t){return t===LQ||t===DQ}function tZ(t,e,r){if(function(t,e){return t.datum_type===e.datum_type&&!(t.a!==e.a||Math.abs(t.es-e.es)>5e-11)&&(t.datum_type===LQ?t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]:t.datum_type!==DQ||t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]&&t.datum_params[3]===e.datum_params[3]&&t.datum_params[4]===e.datum_params[4]&&t.datum_params[5]===e.datum_params[5]&&t.datum_params[6]===e.datum_params[6])}(t,e))return r;if(t.datum_type===UQ||e.datum_type===UQ)return r;var n=t.a,o=t.es;if(t.datum_type===BQ){if(0!==eZ(t,!1,r))return;n=GQ,o=zQ}var i=e.a,a=e.b,s=e.es;if(e.datum_type===BQ&&(i=GQ,a=VQ,s=zQ),o===s&&n===i&&!$X(t.datum_type)&&!$X(e.datum_type))return r;if((r=XX(r,o,n),$X(t.datum_type)&&(r=function(t,e,r){if(e===LQ)return{x:t.x+r[0],y:t.y+r[1],z:t.z+r[2]};if(e===DQ){var n=r[0],o=r[1],i=r[2],a=r[3],s=r[4],u=r[5],l=r[6];return{x:l*(t.x-u*t.y+s*t.z)+n,y:l*(u*t.x+t.y-a*t.z)+o,z:l*(-s*t.x+a*t.y+t.z)+i}}}(r,t.datum_type,t.datum_params)),$X(e.datum_type)&&(r=function(t,e,r){if(e===LQ)return{x:t.x-r[0],y:t.y-r[1],z:t.z-r[2]};if(e===DQ){var n=r[0],o=r[1],i=r[2],a=r[3],s=r[4],u=r[5],l=r[6],c=(t.x-n)/l,f=(t.y-o)/l,p=(t.z-i)/l;return{x:c+u*f-s*p,y:-u*c+f+a*p,z:s*c-a*f+p}}}(r,e.datum_type,e.datum_params)),r=ZX(r,s,i,a),e.datum_type===BQ)&&0!==eZ(e,!0,r))return;return r}function eZ(t,e,r){if(null===t.grids||0===t.grids.length)return console.log("Grid shift grids not found"),-1;var n={x:-r.x,y:r.y},o={x:Number.NaN,y:Number.NaN},i=[];t:for(var a=0;a<t.grids.length;a++){var s=t.grids[a];if(i.push(s.name),s.isNull){o=n;break}if(s.mandatory,null!==s.grid)for(var u=s.grid.subgrids,l=0,c=u.length;l<c;l++){var f=u[l],p=(Math.abs(f.del[1])+Math.abs(f.del[0]))/1e4,h=f.ll[0]-p,y=f.ll[1]-p,d=f.ll[0]+(f.lim[0]-1)*f.del[0]+p,v=f.ll[1]+(f.lim[1]-1)*f.del[1]+p;if(!(y>n.y||h>n.x||v<n.y||d<n.x)&&(o=rZ(n,e,f),!isNaN(o.x)))break t}else if(s.mandatory)return console.log("Unable to find mandatory grid '"+s.name+"'"),-1}return isNaN(o.x)?(console.log("Failed to find a grid shift table for location '"+-n.x*XQ+" "+n.y*XQ+" tried: '"+i+"'"),-1):(r.x=-o.x,r.y=o.y,0)}function rZ(t,e,r){var n={x:Number.NaN,y:Number.NaN};if(isNaN(t.x))return n;var o={x:t.x,y:t.y};o.x-=r.ll[0],o.y-=r.ll[1],o.x=CX(o.x-Math.PI)+Math.PI;var i=nZ(o,r);if(e){if(isNaN(i.x))return n;i.x=o.x-i.x,i.y=o.y-i.y;var a,s,u=9;do{if(s=nZ(i,r),isNaN(s.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}a={x:o.x-(s.x+i.x),y:o.y-(s.y+i.y)},i.x+=a.x,i.y+=a.y}while(u--&&Math.abs(a.x)>1e-12&&Math.abs(a.y)>1e-12);if(u<0)return console.log("Inverse grid shift iterator failed to converge."),n;n.x=CX(i.x+r.ll[0]),n.y=i.y+r.ll[1]}else isNaN(i.x)||(n.x=t.x+i.x,n.y=t.y+i.y);return n}function nZ(t,e){var r,n={x:t.x/e.del[0],y:t.y/e.del[1]},o=Math.floor(n.x),i=Math.floor(n.y),a=n.x-1*o,s=n.y-1*i,u={x:Number.NaN,y:Number.NaN};if(o<0||o>=e.lim[0])return u;if(i<0||i>=e.lim[1])return u;r=i*e.lim[0]+o;var l=e.cvs[r][0],c=e.cvs[r][1];r++;var f=e.cvs[r][0],p=e.cvs[r][1];r+=e.lim[0];var h=e.cvs[r][0],y=e.cvs[r][1];r--;var d=e.cvs[r][0],v=e.cvs[r][1],m=a*s,b=a*(1-s),g=(1-a)*(1-s),S=(1-a)*s;return u.x=g*l+b*f+S*d+m*h,u.y=g*c+b*p+S*v+m*y,u}function oZ(t,e,r){var n,o,i,a=r.x,s=r.y,u=r.z||0,l={};for(i=0;i<3;i++)if(!e||2!==i||void 0!==r.z)switch(0===i?(n=a,o=-1!=="ew".indexOf(t.axis[i])?"x":"y"):1===i?(n=s,o=-1!=="ns".indexOf(t.axis[i])?"y":"x"):(n=u,o="z"),t.axis[i]){case"e":l[o]=n;break;case"w":l[o]=-n;break;case"n":l[o]=n;break;case"s":l[o]=-n;break;case"u":void 0!==r[o]&&(l.z=n);break;case"d":void 0!==r[o]&&(l.z=-n);break;default:return null}return l}function iZ(t){var e={x:t[0],y:t[1]};return t.length>2&&(e.z=t[2]),t.length>3&&(e.m=t[3]),e}function aZ(t){if("function"==typeof Number.isFinite){if(Number.isFinite(t))return;throw new TypeError("coordinates must be finite numbers")}if("number"!=typeof t||t!=t||!isFinite(t))throw new TypeError("coordinates must be finite numbers")}function sZ(t,e,r,n){var o,i=void 0!==(r=Array.isArray(r)?iZ(r):{x:r.x,y:r.y,z:r.z,m:r.m}).z;if(function(t){aZ(t.x),aZ(t.y)}(r),t.datum&&e.datum&&function(t,e){return(t.datum.datum_type===LQ||t.datum.datum_type===DQ||t.datum.datum_type===BQ)&&"WGS84"!==e.datumCode||(e.datum.datum_type===LQ||e.datum.datum_type===DQ||e.datum.datum_type===BQ)&&"WGS84"!==t.datumCode}(t,e)&&(r=sZ(t,o=new QX("WGS84"),r,n),t=o),n&&"enu"!==t.axis&&(r=oZ(t,!1,r)),"longlat"===t.projName)r={x:r.x*QQ,y:r.y*QQ,z:r.z||0};else if(t.to_meter&&(r={x:r.x*t.to_meter,y:r.y*t.to_meter,z:r.z||0}),!(r=t.inverse(r)))return;if(t.from_greenwich&&(r.x+=t.from_greenwich),r=tZ(t.datum,e.datum,r))return e.from_greenwich&&(r={x:r.x-e.from_greenwich,y:r.y,z:r.z||0}),"longlat"===e.projName?r={x:r.x*XQ,y:r.y*XQ,z:r.z||0}:(r=e.forward(r),e.to_meter&&(r={x:r.x/e.to_meter,y:r.y/e.to_meter,z:r.z||0})),n&&"enu"!==e.axis?oZ(e,!0,r):(r&&!i&&delete r.z,r)}var uZ=QX("WGS84");function lZ(t,e,r,n){var o,i,a;return Array.isArray(r)?(o=sZ(t,e,r,n)||{x:NaN,y:NaN},r.length>2?void 0!==t.name&&"geocent"===t.name||void 0!==e.name&&"geocent"===e.name?"number"==typeof o.z?[o.x,o.y,o.z].concat(r.splice(3)):[o.x,o.y,r[2]].concat(r.splice(3)):[o.x,o.y].concat(r.splice(2)):[o.x,o.y]):(i=sZ(t,e,r,n),2===(a=Object.keys(r)).length?i:(a.forEach(function(n){if(void 0!==t.name&&"geocent"===t.name||void 0!==e.name&&"geocent"===e.name){if("x"===n||"y"===n||"z"===n)return}else if("x"===n||"y"===n)return;i[n]=r[n]}),i))}function cZ(t){return t instanceof QX?t:t.oProj?t.oProj:QX(t)}var fZ=function(t,e,r){t=cZ(t);var n,o=!1;return void 0===e?(e=t,t=uZ,o=!0):(void 0!==e.x||Array.isArray(e))&&(r=e,e=t,t=uZ,o=!0),e=cZ(e),r?lZ(t,e,r):(n={forward:function(r,n){return lZ(t,e,r,n)},inverse:function(r,n){return lZ(e,t,r,n)}},o&&(n.oProj=e),n)},pZ=6,hZ="AJSAJS",yZ="AFAFAF",dZ=65,vZ=73,mZ=79,bZ=86,gZ=90,SZ={forward:wZ,inverse:function(t){var e=PZ(TZ(t.toUpperCase()));if(e.lat&&e.lon)return[e.lon,e.lat,e.lon,e.lat];return[e.left,e.bottom,e.right,e.top]},toPoint:_Z};function wZ(t,e){return e=e||5,function(t,e){var r="00000"+t.easting,n="00000"+t.northing;return t.zoneNumber+t.zoneLetter+(h=t.easting,y=t.northing,d=t.zoneNumber,v=xZ(d),m=Math.floor(h/1e5),b=Math.floor(y/1e5)%20,o=m,i=b,a=v,s=a-1,u=hZ.charCodeAt(s),l=yZ.charCodeAt(s),c=u+o-1,f=l+i,p=!1,c>gZ&&(c=c-gZ+dZ-1,p=!0),(c===vZ||u<vZ&&c>vZ||(c>vZ||u<vZ)&&p)&&c++,(c===mZ||u<mZ&&c>mZ||(c>mZ||u<mZ)&&p)&&++c===vZ&&c++,c>gZ&&(c=c-gZ+dZ-1),f>bZ?(f=f-bZ+dZ-1,p=!0):p=!1,(f===vZ||l<vZ&&f>vZ||(f>vZ||l<vZ)&&p)&&f++,(f===mZ||l<mZ&&f>mZ||(f>mZ||l<mZ)&&p)&&++f===vZ&&f++,f>bZ&&(f=f-bZ+dZ-1),String.fromCharCode(c)+String.fromCharCode(f))+r.substr(r.length-5,e)+n.substr(n.length-5,e);var o,i,a,s,u,l,c,f,p;var h,y,d,v,m,b}(function(t){var e,r,n,o,i,a,s,u=t.lat,l=t.lon,c=6378137,f=OZ(u),p=OZ(l);s=Math.floor((l+180)/6)+1,180===l&&(s=60);u>=56&&u<64&&l>=3&&l<12&&(s=32);u>=72&&u<84&&(l>=0&&l<9?s=31:l>=9&&l<21?s=33:l>=21&&l<33?s=35:l>=33&&l<42&&(s=37));a=OZ(6*(s-1)-180+3),.006739496752268451,e=c/Math.sqrt(1-.00669438*Math.sin(f)*Math.sin(f)),r=Math.tan(f)*Math.tan(f),n=.006739496752268451*Math.cos(f)*Math.cos(f),o=Math.cos(f)*(p-a),i=c*(.9983242984503243*f-.002514607064228144*Math.sin(2*f)+2639046602129982e-21*Math.sin(4*f)-3.418046101696858e-9*Math.sin(6*f));var h=.9996*e*(o+(1-r+n)*o*o*o/6+(5-18*r+r*r+72*n-.39089081163157013)*o*o*o*o*o/120)+5e5,y=.9996*(i+e*Math.tan(f)*(o*o/2+(5-r+9*n+4*n*n)*o*o*o*o/24+(61-58*r+r*r+600*n-2.2240339282485886)*o*o*o*o*o*o/720));u<0&&(y+=1e7);return{northing:Math.round(y),easting:Math.round(h),zoneNumber:s,zoneLetter:function(t){var e="Z";84>=t&&t>=72?e="X":72>t&&t>=64?e="W":64>t&&t>=56?e="V":56>t&&t>=48?e="U":48>t&&t>=40?e="T":40>t&&t>=32?e="S":32>t&&t>=24?e="R":24>t&&t>=16?e="Q":16>t&&t>=8?e="P":8>t&&t>=0?e="N":0>t&&t>=-8?e="M":-8>t&&t>=-16?e="L":-16>t&&t>=-24?e="K":-24>t&&t>=-32?e="J":-32>t&&t>=-40?e="H":-40>t&&t>=-48?e="G":-48>t&&t>=-56?e="F":-56>t&&t>=-64?e="E":-64>t&&t>=-72?e="D":-72>t&&t>=-80&&(e="C");return e}(u)}}({lat:t[1],lon:t[0]}),e)}function _Z(t){var e=PZ(TZ(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat]:[(e.left+e.right)/2,(e.top+e.bottom)/2]}function OZ(t){return t*(Math.PI/180)}function EZ(t){return t/Math.PI*180}function PZ(t){var e=t.northing,r=t.easting,n=t.zoneLetter,o=t.zoneNumber;if(o<0||o>60)return null;var i,a,s,u,l,c,f,p,h=6378137,y=(1-Math.sqrt(.99330562))/(1+Math.sqrt(.99330562)),d=r-5e5,v=e;n<"N"&&(v-=1e7),c=6*(o-1)-180+3,p=(f=v/.9996/6367449.145945056)+(3*y/2-27*y*y*y/32)*Math.sin(2*f)+(21*y*y/16-55*y*y*y*y/32)*Math.sin(4*f)+151*y*y*y/96*Math.sin(6*f),i=h/Math.sqrt(1-.00669438*Math.sin(p)*Math.sin(p)),a=Math.tan(p)*Math.tan(p),s=.006739496752268451*Math.cos(p)*Math.cos(p),u=.99330562*h/Math.pow(1-.00669438*Math.sin(p)*Math.sin(p),1.5),l=d/(.9996*i);var m=p-i*Math.tan(p)/u*(l*l/2-(5+3*a+10*s-4*s*s-.06065547077041606)*l*l*l*l/24+(61+90*a+298*s+45*a*a-1.6983531815716497-3*s*s)*l*l*l*l*l*l/720);m=EZ(m);var b,g=(l-(1+2*a+s)*l*l*l/6+(5-2*s+28*a-3*s*s+.05391597401814761+24*a*a)*l*l*l*l*l/120)/Math.cos(p);if(g=c+EZ(g),t.accuracy){var S=PZ({northing:t.northing+t.accuracy,easting:t.easting+t.accuracy,zoneLetter:t.zoneLetter,zoneNumber:t.zoneNumber});b={top:S.lat,right:S.lon,bottom:m,left:g}}else b={lat:m,lon:g};return b}function xZ(t){var e=t%pZ;return 0===e&&(e=pZ),e}function TZ(t){if(t&&0===t.length)throw"MGRSPoint coverting from nothing";for(var e,r=t.length,n=null,o="",i=0;!/[A-Z]/.test(e=t.charAt(i));){if(i>=2)throw"MGRSPoint bad conversion from: "+t;o+=e,i++}var a=parseInt(o,10);if(0===i||i+3>r)throw"MGRSPoint bad conversion from: "+t;var s=t.charAt(i++);if(s<="A"||"B"===s||"Y"===s||s>="Z"||"I"===s||"O"===s)throw"MGRSPoint zone letter "+s+" not handled: "+t;n=t.substring(i,i+=2);for(var u=xZ(a),l=function(t,e){var r=hZ.charCodeAt(e-1),n=1e5,o=!1;for(;r!==t.charCodeAt(0);){if(++r===vZ&&r++,r===mZ&&r++,r>gZ){if(o)throw"Bad character: "+t;r=dZ,o=!0}n+=1e5}return n}(n.charAt(0),u),c=function(t,e){if(t>"V")throw"MGRSPoint given invalid Northing "+t;var r=yZ.charCodeAt(e-1),n=0,o=!1;for(;r!==t.charCodeAt(0);){if(++r===vZ&&r++,r===mZ&&r++,r>bZ){if(o)throw"Bad character: "+t;r=dZ,o=!0}n+=1e5}return n}(n.charAt(1),u);c<CZ(s);)c+=2e6;var f=r-i;if(f%2!=0)throw"MGRSPoint has to have an even number \nof digits after the zone letter and two 100km letters - front \nhalf for easting meters, second half for \nnorthing meters"+t;var p,h,y,d=f/2,v=0,m=0;return d>0&&(p=1e5/Math.pow(10,d),h=t.substring(i,i+d),v=parseFloat(h)*p,y=t.substring(i+d),m=parseFloat(y)*p),{easting:v+l,northing:m+c,zoneLetter:s,zoneNumber:a,accuracy:p}}function CZ(t){var e;switch(t){case"C":e=11e5;break;case"D":e=2e6;break;case"E":e=28e5;break;case"F":e=37e5;break;case"G":e=46e5;break;case"H":e=55e5;break;case"J":e=64e5;break;case"K":e=73e5;break;case"L":e=82e5;break;case"M":e=91e5;break;case"N":e=0;break;case"P":e=8e5;break;case"Q":e=17e5;break;case"R":e=26e5;break;case"S":e=35e5;break;case"T":e=44e5;break;case"U":e=53e5;break;case"V":e=62e5;break;case"W":e=7e6;break;case"X":e=79e5;break;default:e=-1}if(e>=0)return e;throw"Invalid zone letter: "+t}function kZ(t){"@babel/helpers - typeof";return(kZ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function AZ(t,e,r){if(!(this instanceof AZ))return new AZ(t,e,r);if(Array.isArray(t))this.x=t[0],this.y=t[1],this.z=t[2]||0;else if("object"===kZ(t))this.x=t.x,this.y=t.y,this.z=t.z||0;else if("string"==typeof t&&void 0===e){var n=t.split(",");this.x=parseFloat(n[0],10),this.y=parseFloat(n[1],10),this.z=parseFloat(n[2],10)||0}else this.x=t,this.y=e,this.z=r||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}AZ.fromMGRS=function(t){return new AZ(_Z(t))},AZ.prototype.toMGRS=function(t){return wZ([this.x,this.y],t)};var jZ=AZ,NZ=1,IZ=.25,MZ=.046875,RZ=.01953125,LZ=.01068115234375,DZ=.75,BZ=.46875,FZ=.013020833333333334,UZ=.007120768229166667,GZ=.3645833333333333,VZ=.005696614583333333,zZ=.3076171875;function HZ(t){var e=[];e[0]=NZ-t*(IZ+t*(MZ+t*(RZ+t*LZ))),e[1]=t*(DZ-t*(MZ+t*(RZ+t*LZ)));var r=t*t;return e[2]=r*(BZ-t*(FZ+t*UZ)),r*=t,e[3]=r*(GZ-t*VZ),e[4]=r*t*zZ,e}function qZ(t,e,r,n){return r*=e,e*=e,n[0]*t-r*(n[1]+e*(n[2]+e*(n[3]+e*n[4])))}var JZ=20;function WZ(t,e,r){for(var n=1/(1-e),o=t,i=JZ;i;--i){var a=Math.sin(o),s=1-e*a*a;if(o-=s=(qZ(o,a,Math.cos(o),r)-t)*(s*Math.sqrt(s))*n,Math.abs(s)<YQ)return o}return o}var KZ={init:function(){this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.es&&(this.en=HZ(this.es),this.ml0=qZ(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))},forward:function(t){var e,r,n,o=t.x,i=t.y,a=CX(o-this.long0),s=Math.sin(i),u=Math.cos(i);if(this.es){var l=u*a,c=Math.pow(l,2),f=this.ep2*Math.pow(u,2),p=Math.pow(f,2),h=Math.abs(u)>YQ?Math.tan(i):0,y=Math.pow(h,2),d=Math.pow(y,2);e=1-this.es*Math.pow(s,2),l/=Math.sqrt(e);var v=qZ(i,s,u,this.en);r=this.a*(this.k0*l*(1+c/6*(1-y+f+c/20*(5-18*y+d+14*f-58*y*f+c/42*(61+179*d-d*y-479*y)))))+this.x0,n=this.a*(this.k0*(v-this.ml0+s*a*l/2*(1+c/12*(5-y+9*f+4*p+c/30*(61+d-58*y+270*f-330*y*f+c/56*(1385+543*d-d*y-3111*y))))))+this.y0}else{var m=u*Math.sin(a);if(Math.abs(Math.abs(m)-1)<YQ)return 93;if(r=.5*this.a*this.k0*Math.log((1+m)/(1-m))+this.x0,n=u*Math.cos(a)/Math.sqrt(1-Math.pow(m,2)),(m=Math.abs(n))>=1){if(m-1>YQ)return 93;n=0}else n=Math.acos(n);i<0&&(n=-n),n=this.a*this.k0*(n-this.lat0)+this.y0}return t.x=r,t.y=n,t},inverse:function(t){var e,r,n,o,i=(t.x-this.x0)*(1/this.a),a=(t.y-this.y0)*(1/this.a);if(this.es)if(r=WZ(e=this.ml0+a/this.k0,this.es,this.en),Math.abs(r)<qQ){var s=Math.sin(r),u=Math.cos(r),l=Math.abs(u)>YQ?Math.tan(r):0,c=this.ep2*Math.pow(u,2),f=Math.pow(c,2),p=Math.pow(l,2),h=Math.pow(p,2);e=1-this.es*Math.pow(s,2);var y=i*Math.sqrt(e)/this.k0,d=Math.pow(y,2);n=r-(e*=l)*d/(1-this.es)*.5*(1-d/12*(5+3*p-9*c*p+c-4*f-d/30*(61+90*p-252*c*p+45*h+46*c-d/56*(1385+3633*p+4095*h+1574*h*p)))),o=CX(this.long0+y*(1-d/6*(1+2*p+c-d/20*(5+28*p+24*h+8*c*p+6*c-d/42*(61+662*p+1320*h+720*h*p))))/u)}else n=qQ*TX(a),o=0;else{var v=Math.exp(i/this.k0),m=.5*(v-1/v),b=this.lat0+a/this.k0,g=Math.cos(b);e=Math.sqrt((1-Math.pow(g,2))/(1+Math.pow(m,2))),n=Math.asin(e),a<0&&(n=-n),o=0===m&&0===g?0:CX(Math.atan2(m,g)+this.long0)}return t.x=o,t.y=n,t},names:["Fast_Transverse_Mercator","Fast Transverse Mercator"]};function YZ(t){var e=Math.exp(t);return e=(e-1/e)/2}function QZ(t,e){t=Math.abs(t),e=Math.abs(e);var r=Math.max(t,e),n=Math.min(t,e)/(r||1);return r*Math.sqrt(1+Math.pow(n,2))}function XZ(t){var e=Math.abs(t);return e=function(t){var e=1+t,r=e-1;return 0===r?t:t*Math.log(e)/r}(e*(1+e/(QZ(1,e)+1))),t<0?-e:e}function ZZ(t,e){for(var r,n=2*Math.cos(2*e),o=t.length-1,i=t[o],a=0;--o>=0;)r=n*i-a+t[o],a=i,i=r;return e+r*Math.sin(2*e)}function $Z(t,e,r){for(var n,o,i=Math.sin(e),a=Math.cos(e),s=YZ(r),u=function(t){var e=Math.exp(t);return e=(e+1/e)/2}(r),l=2*a*u,c=-2*i*s,f=t.length-1,p=t[f],h=0,y=0,d=0;--f>=0;)n=y,o=h,p=l*(y=p)-n-c*(h=d)+t[f],d=c*y-o+l*h;return[(l=i*u)*p-(c=a*s)*d,l*d+c*p]}var t$={init:function(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(KZ.init.apply(this),this.forward=KZ.forward,this.inverse=KZ.inverse),this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var t=this.es/(1+Math.sqrt(1-this.es)),e=t/(2-t),r=e;this.cgb[0]=e*(2+e*(-2/3+e*(e*(116/45+e*(26/45+e*(-2854/675)))-2))),this.cbg[0]=e*(e*(2/3+e*(4/3+e*(-82/45+e*(32/45+e*(4642/4725)))))-2),r*=e,this.cgb[1]=r*(7/3+e*(e*(-227/45+e*(2704/315+e*(2323/945)))-1.6)),this.cbg[1]=r*(5/3+e*(-16/15+e*(-13/9+e*(904/315+e*(-1522/945))))),r*=e,this.cgb[2]=r*(56/15+e*(-136/35+e*(-1262/105+e*(73814/2835)))),this.cbg[2]=r*(-26/15+e*(34/21+e*(1.6+e*(-12686/2835)))),r*=e,this.cgb[3]=r*(4279/630+e*(-332/35+e*(-399572/14175))),this.cbg[3]=r*(1237/630+e*(e*(-24832/14175)-2.4)),r*=e,this.cgb[4]=r*(4174/315+e*(-144838/6237)),this.cbg[4]=r*(-734/315+e*(109598/31185)),r*=e,this.cgb[5]=r*(601676/22275),this.cbg[5]=r*(444337/155925),r=Math.pow(e,2),this.Qn=this.k0/(1+e)*(1+r*(.25+r*(1/64+r/256))),this.utg[0]=e*(e*(2/3+e*(-37/96+e*(1/360+e*(81/512+e*(-96199/604800)))))-.5),this.gtu[0]=e*(.5+e*(-2/3+e*(5/16+e*(41/180+e*(-127/288+e*(7891/37800)))))),this.utg[1]=r*(-1/48+e*(-1/15+e*(437/1440+e*(-46/105+e*(1118711/3870720))))),this.gtu[1]=r*(13/48+e*(e*(557/1440+e*(281/630+e*(-1983433/1935360)))-.6)),r*=e,this.utg[2]=r*(-17/480+e*(37/840+e*(209/4480+e*(-5569/90720)))),this.gtu[2]=r*(61/240+e*(-103/140+e*(15061/26880+e*(167603/181440)))),r*=e,this.utg[3]=r*(-4397/161280+e*(11/504+e*(830251/7257600))),this.gtu[3]=r*(49561/161280+e*(-179/168+e*(6601661/7257600))),r*=e,this.utg[4]=r*(-4583/161280+e*(108847/3991680)),this.gtu[4]=r*(34729/80640+e*(-3418889/1995840)),r*=e,this.utg[5]=-.03233083094085698*r,this.gtu[5]=.6650675310896665*r;var n=ZZ(this.cbg,this.lat0);this.Zb=-this.Qn*(n+function(t,e){for(var r,n=2*Math.cos(e),o=t.length-1,i=t[o],a=0;--o>=0;)r=n*i-a+t[o],a=i,i=r;return Math.sin(e)*r}(this.gtu,2*n))},forward:function(t){var e=CX(t.x-this.long0),r=t.y;r=ZZ(this.cbg,r);var n=Math.sin(r),o=Math.cos(r),i=Math.sin(e),a=Math.cos(e);r=Math.atan2(n,a*o),e=Math.atan2(i*o,QZ(n,o*a)),e=XZ(Math.tan(e));var s,u,l=$Z(this.gtu,2*r,2*e);return r+=l[0],e+=l[1],Math.abs(e)<=2.623395162778?(s=this.a*(this.Qn*e)+this.x0,u=this.a*(this.Qn*r+this.Zb)+this.y0):(s=1/0,u=1/0),t.x=s,t.y=u,t},inverse:function(t){var e,r,n=(t.x-this.x0)*(1/this.a),o=(t.y-this.y0)*(1/this.a);if(o=(o-this.Zb)/this.Qn,n/=this.Qn,Math.abs(n)<=2.623395162778){var i=$Z(this.utg,2*o,2*n);o+=i[0],n+=i[1],n=Math.atan(YZ(n));var a=Math.sin(o),s=Math.cos(o),u=Math.sin(n),l=Math.cos(n);o=Math.atan2(a*l,QZ(u,l*s)),e=CX((n=Math.atan2(u,l*s))+this.long0),r=ZZ(this.cgb,o)}else e=1/0,r=1/0;return t.x=e,t.y=r,t},names:["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","Gauss Kruger","Gauss_Kruger","tmerc"]};var e$={init:function(){var t=function(t,e){if(void 0===t){if((t=Math.floor(30*(CX(e)+Math.PI)/Math.PI)+1)<0)return 0;if(t>60)return 60}return t}(this.zone,this.long0);if(void 0===t)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(t)-183)*QQ,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,t$.init.apply(this),this.forward=t$.forward,this.inverse=t$.inverse},names:["Universal Transverse Mercator System","utm"],dependsOn:"etmerc"};function r$(t,e){return Math.pow((1-t)/(1+t),e)}var n$=20;var o$={init:function(){var t=Math.sin(this.lat0),e=Math.cos(this.lat0);e*=e,this.rc=Math.sqrt(1-this.es)/(1-this.es*t*t),this.C=Math.sqrt(1+this.es*e*e/(1-this.es)),this.phic0=Math.asin(t/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+ZQ)/(Math.pow(Math.tan(.5*this.lat0+ZQ),this.C)*r$(this.e*t,this.ratexp))},forward:function(t){var e=t.x,r=t.y;return t.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*r+ZQ),this.C)*r$(this.e*Math.sin(r),this.ratexp))-qQ,t.x=this.C*e,t},inverse:function(t){for(var e=t.x/this.C,r=t.y,n=Math.pow(Math.tan(.5*r+ZQ)/this.K,1/this.C),o=n$;o>0&&(r=2*Math.atan(n*r$(this.e*Math.sin(t.y),-.5*this.e))-qQ,!(Math.abs(r-t.y)<1e-14));--o)t.y=r;return o?(t.x=e,t.y=r,t):null},names:["gauss"]};var i$={init:function(){o$.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))},forward:function(t){var e,r,n,o;return t.x=CX(t.x-this.long0),o$.forward.apply(this,[t]),e=Math.sin(t.y),r=Math.cos(t.y),n=Math.cos(t.x),o=this.k0*this.R2/(1+this.sinc0*e+this.cosc0*r*n),t.x=o*r*Math.sin(t.x),t.y=o*(this.cosc0*e-this.sinc0*r*n),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t},inverse:function(t){var e,r,n,o,i;if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,i=QZ(t.x,t.y)){var a=2*Math.atan2(i,this.R2);e=Math.sin(a),r=Math.cos(a),o=Math.asin(r*this.sinc0+t.y*e*this.cosc0/i),n=Math.atan2(t.x*e,i*this.cosc0*r-t.y*this.sinc0*e)}else o=this.phic0,n=0;return t.x=n,t.y=o,o$.inverse.apply(this,[t]),t.x=CX(t.x+this.long0),t},names:["Stereographic_North_Pole","Oblique_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"]};var a$={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=YQ&&(this.k0=.5*(1+TX(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=YQ&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=YQ&&Math.abs(Math.cos(this.lat_ts))>YQ&&(this.k0=.5*this.cons*xX(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/kX(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=xX(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-qQ,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))},forward:function(t){var e,r,n,o,i,a,s=t.x,u=t.y,l=Math.sin(u),c=Math.cos(u),f=CX(s-this.long0);return Math.abs(Math.abs(s-this.long0)-Math.PI)<=YQ&&Math.abs(u+this.lat0)<=YQ?(t.x=NaN,t.y=NaN,t):this.sphere?(e=2*this.k0/(1+this.sinlat0*l+this.coslat0*c*Math.cos(f)),t.x=this.a*e*c*Math.sin(f)+this.x0,t.y=this.a*e*(this.coslat0*l-this.sinlat0*c*Math.cos(f))+this.y0,t):(r=2*Math.atan(this.ssfn_(u,l,this.e))-qQ,o=Math.cos(r),n=Math.sin(r),Math.abs(this.coslat0)<=YQ?(i=kX(this.e,u*this.con,this.con*l),a=2*this.a*this.k0*i/this.cons,t.x=this.x0+a*Math.sin(s-this.long0),t.y=this.y0-this.con*a*Math.cos(s-this.long0),t):(Math.abs(this.sinlat0)<YQ?(e=2*this.a*this.k0/(1+o*Math.cos(f)),t.y=e*n):(e=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*n+this.cosX0*o*Math.cos(f))),t.y=e*(this.cosX0*n-this.sinX0*o*Math.cos(f))+this.y0),t.x=e*o*Math.sin(f)+this.x0,t))},inverse:function(t){var e,r,n,o,i;t.x-=this.x0,t.y-=this.y0;var a=Math.sqrt(t.x*t.x+t.y*t.y);if(this.sphere){var s=2*Math.atan(a/(2*this.a*this.k0));return e=this.long0,r=this.lat0,a<=YQ?(t.x=e,t.y=r,t):(r=Math.asin(Math.cos(s)*this.sinlat0+t.y*Math.sin(s)*this.coslat0/a),e=Math.abs(this.coslat0)<YQ?this.lat0>0?CX(this.long0+Math.atan2(t.x,-1*t.y)):CX(this.long0+Math.atan2(t.x,t.y)):CX(this.long0+Math.atan2(t.x*Math.sin(s),a*this.coslat0*Math.cos(s)-t.y*this.sinlat0*Math.sin(s))),t.x=e,t.y=r,t)}if(Math.abs(this.coslat0)<=YQ){if(a<=YQ)return r=this.lat0,e=this.long0,t.x=e,t.y=r,t;t.x*=this.con,t.y*=this.con,n=a*this.cons/(2*this.a*this.k0),r=this.con*AX(this.e,n),e=this.con*CX(this.con*this.long0+Math.atan2(t.x,-1*t.y))}else o=2*Math.atan(a*this.cosX0/(2*this.a*this.k0*this.ms1)),e=this.long0,a<=YQ?i=this.X0:(i=Math.asin(Math.cos(o)*this.sinX0+t.y*Math.sin(o)*this.cosX0/a),e=CX(this.long0+Math.atan2(t.x*Math.sin(o),a*this.cosX0*Math.cos(o)-t.y*this.sinX0*Math.sin(o)))),r=-1*AX(this.e,Math.tan(.5*(qQ+i)));return t.x=e,t.y=r,t},names:["stere","Stereographic_South_Pole","Polar Stereographic (variant B)","Polar_Stereographic"],ssfn_:function(t,e,r){return e*=r,Math.tan(.5*(qQ+t))*Math.pow((1-e)/(1+e),.5*r)}};var s$={init:function(){var t=this.lat0;this.lambda0=this.long0;var e=Math.sin(t),r=this.a,n=1/this.rf,o=2*n-Math.pow(n,2),i=this.e=Math.sqrt(o);this.R=this.k0*r*Math.sqrt(1-o)/(1-o*Math.pow(e,2)),this.alpha=Math.sqrt(1+o/(1-o)*Math.pow(Math.cos(t),4)),this.b0=Math.asin(e/this.alpha);var a=Math.log(Math.tan(Math.PI/4+this.b0/2)),s=Math.log(Math.tan(Math.PI/4+t/2)),u=Math.log((1+i*e)/(1-i*e));this.K=a-this.alpha*s+this.alpha*i/2*u},forward:function(t){var e=Math.log(Math.tan(Math.PI/4-t.y/2)),r=this.e/2*Math.log((1+this.e*Math.sin(t.y))/(1-this.e*Math.sin(t.y))),n=-this.alpha*(e+r)+this.K,o=2*(Math.atan(Math.exp(n))-Math.PI/4),i=this.alpha*(t.x-this.lambda0),a=Math.atan(Math.sin(i)/(Math.sin(this.b0)*Math.tan(o)+Math.cos(this.b0)*Math.cos(i))),s=Math.asin(Math.cos(this.b0)*Math.sin(o)-Math.sin(this.b0)*Math.cos(o)*Math.cos(i));return t.y=this.R/2*Math.log((1+Math.sin(s))/(1-Math.sin(s)))+this.y0,t.x=this.R*a+this.x0,t},inverse:function(t){for(var e=t.x-this.x0,r=t.y-this.y0,n=e/this.R,o=2*(Math.atan(Math.exp(r/this.R))-Math.PI/4),i=Math.asin(Math.cos(this.b0)*Math.sin(o)+Math.sin(this.b0)*Math.cos(o)*Math.cos(n)),a=Math.atan(Math.sin(n)/(Math.cos(this.b0)*Math.cos(n)-Math.sin(this.b0)*Math.tan(o))),s=this.lambda0+a/this.alpha,u=0,l=i,c=-1e3,f=0;Math.abs(l-c)>1e-7;){if(++f>20)return;u=1/this.alpha*(Math.log(Math.tan(Math.PI/4+i/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(l))/2)),c=l,l=2*Math.atan(Math.exp(u))-Math.PI/2}return t.x=s,t.y=l,t},names:["somerc"]};function u$(t){"@babel/helpers - typeof";return(u$="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var l$=1e-7;var c$={init:function(){var t,e,r,n,o,i,a,s,u,l,c,f,p,h=0,y=0,d=0,v=0,m=0,b=0,g=0;this.no_off=(p="object"===u$((f=this).PROJECTION)?Object.keys(f.PROJECTION)[0]:f.PROJECTION,"no_uoff"in f||"no_off"in f||-1!==["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"].indexOf(p)),this.no_rot="no_rot"in this;var S=!1;"alpha"in this&&(S=!0);var w=!1;if("rectified_grid_angle"in this&&(w=!0),S&&(g=this.alpha),w&&(h=this.rectified_grid_angle*QQ),S||w)y=this.longc;else if(d=this.long1,m=this.lat1,v=this.long2,b=this.lat2,Math.abs(m-b)<=l$||(t=Math.abs(m))<=l$||Math.abs(t-qQ)<=l$||Math.abs(Math.abs(this.lat0)-qQ)<=l$||Math.abs(Math.abs(b)-qQ)<=l$)throw new Error;var _=1-this.es;e=Math.sqrt(_),Math.abs(this.lat0)>YQ?(s=Math.sin(this.lat0),r=Math.cos(this.lat0),t=1-this.es*s*s,this.B=r*r,this.B=Math.sqrt(1+this.es*this.B*this.B/_),this.A=this.B*this.k0*e/t,(o=(n=this.B*e/(r*Math.sqrt(t)))*n-1)<=0?o=0:(o=Math.sqrt(o),this.lat0<0&&(o=-o)),this.E=o+=n,this.E*=Math.pow(kX(this.e,this.lat0,s),this.B)):(this.B=1/e,this.A=this.k0,this.E=n=o=1),S||w?(S?(c=Math.asin(Math.sin(g)/n),w||(h=g)):(c=h,g=Math.asin(n*Math.sin(c))),this.lam0=y-Math.asin(.5*(o-1/o)*Math.tan(c))/this.B):(i=Math.pow(kX(this.e,m,Math.sin(m)),this.B),a=Math.pow(kX(this.e,b,Math.sin(b)),this.B),o=this.E/i,u=(a-i)/(a+i),l=((l=this.E*this.E)-a*i)/(l+a*i),(t=d-v)<-Math.pi?v-=$Q:t>Math.pi&&(v+=$Q),this.lam0=CX(.5*(d+v)-Math.atan(l*Math.tan(.5*this.B*(d-v))/u)/this.B),c=Math.atan(2*Math.sin(this.B*CX(d-this.lam0))/(o-1/o)),h=g=Math.asin(n*Math.sin(c))),this.singam=Math.sin(c),this.cosgam=Math.cos(c),this.sinrot=Math.sin(h),this.cosrot=Math.cos(h),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.A,this.B,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(n*n-1)/Math.cos(g))),this.lat0<0&&(this.u_0=-this.u_0)),o=.5*c,this.v_pole_n=this.ArB*Math.log(Math.tan(ZQ-o)),this.v_pole_s=this.ArB*Math.log(Math.tan(ZQ+o))},forward:function(t){var e,r,n,o,i,a,s,u,l={};if(t.x=t.x-this.lam0,Math.abs(Math.abs(t.y)-qQ)>YQ){if(e=.5*((i=this.E/Math.pow(kX(this.e,t.y,Math.sin(t.y)),this.B))-(a=1/i)),r=.5*(i+a),o=Math.sin(this.B*t.x),n=(e*this.singam-o*this.cosgam)/r,Math.abs(Math.abs(n)-1)<YQ)throw new Error;u=.5*this.ArB*Math.log((1-n)/(1+n)),a=Math.cos(this.B*t.x),s=Math.abs(a)<l$?this.A*t.x:this.ArB*Math.atan2(e*this.cosgam+o*this.singam,a)}else u=t.y>0?this.v_pole_n:this.v_pole_s,s=this.ArB*t.y;return this.no_rot?(l.x=s,l.y=u):(s-=this.u_0,l.x=u*this.cosrot+s*this.sinrot,l.y=s*this.cosrot-u*this.sinrot),l.x=this.a*l.x+this.x0,l.y=this.a*l.y+this.y0,l},inverse:function(t){var e,r,n,o,i,a,s,u={};if(t.x=(t.x-this.x0)*(1/this.a),t.y=(t.y-this.y0)*(1/this.a),this.no_rot?(r=t.y,e=t.x):(r=t.x*this.cosrot-t.y*this.sinrot,e=t.y*this.cosrot+t.x*this.sinrot+this.u_0),o=.5*((n=Math.exp(-this.BrA*r))-1/n),i=.5*(n+1/n),s=((a=Math.sin(this.BrA*e))*this.cosgam+o*this.singam)/i,Math.abs(Math.abs(s)-1)<YQ)u.x=0,u.y=s<0?-qQ:qQ;else{if(u.y=this.E/Math.sqrt((1+s)/(1-s)),u.y=AX(this.e,Math.pow(u.y,1/this.B)),u.y===1/0)throw new Error;u.x=-this.rB*Math.atan2(o*this.cosgam-a*this.singam,Math.cos(this.BrA*e))}return u.x+=this.lam0,u},names:["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"]};var f$={init:function(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<YQ)){var t=this.b/this.a;this.e=Math.sqrt(1-t*t);var e=Math.sin(this.lat1),r=Math.cos(this.lat1),n=xX(this.e,e,r),o=kX(this.e,this.lat1,e),i=Math.sin(this.lat2),a=Math.cos(this.lat2),s=xX(this.e,i,a),u=kX(this.e,this.lat2,i),l=kX(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>YQ?this.ns=Math.log(n/s)/Math.log(o/u):this.ns=e,isNaN(this.ns)&&(this.ns=e),this.f0=n/(this.ns*Math.pow(o,this.ns)),this.rh=this.a*this.f0*Math.pow(l,this.ns),this.title||(this.title="Lambert Conformal Conic")}},forward:function(t){var e=t.x,r=t.y;Math.abs(2*Math.abs(r)-Math.PI)<=YQ&&(r=TX(r)*(qQ-2*YQ));var n,o,i=Math.abs(Math.abs(r)-qQ);if(i>YQ)n=kX(this.e,r,Math.sin(r)),o=this.a*this.f0*Math.pow(n,this.ns);else{if((i=r*this.ns)<=0)return null;o=0}var a=this.ns*CX(e-this.long0);return t.x=this.k0*(o*Math.sin(a))+this.x0,t.y=this.k0*(this.rh-o*Math.cos(a))+this.y0,t},inverse:function(t){var e,r,n,o,i,a=(t.x-this.x0)/this.k0,s=this.rh-(t.y-this.y0)/this.k0;this.ns>0?(e=Math.sqrt(a*a+s*s),r=1):(e=-Math.sqrt(a*a+s*s),r=-1);var u=0;if(0!==e&&(u=Math.atan2(r*a,r*s)),0!==e||this.ns>0){if(r=1/this.ns,n=Math.pow(e/(this.a*this.f0),r),-9999===(o=AX(this.e,n)))return null}else o=-qQ;return i=CX(u/this.ns+this.long0),t.x=i,t.y=o,t},names:["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"]};var p$={init:function(){this.a=6377397.155,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.4334234309119251),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq},forward:function(t){var e,r,n,o,i,a,s,u=t.x,l=t.y,c=CX(u-this.long0);return e=Math.pow((1+this.e*Math.sin(l))/(1-this.e*Math.sin(l)),this.alfa*this.e/2),r=2*(Math.atan(this.k*Math.pow(Math.tan(l/2+this.s45),this.alfa)/e)-this.s45),n=-c*this.alfa,o=Math.asin(Math.cos(this.ad)*Math.sin(r)+Math.sin(this.ad)*Math.cos(r)*Math.cos(n)),i=Math.asin(Math.cos(r)*Math.sin(n)/Math.cos(o)),a=this.n*i,s=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(o/2+this.s45),this.n),t.y=s*Math.cos(a)/1,t.x=s*Math.sin(a)/1,this.czech||(t.y*=-1,t.x*=-1),t},inverse:function(t){var e,r,n,o,i,a,s,u=t.x;t.x=t.y,t.y=u,this.czech||(t.y*=-1,t.x*=-1),i=Math.sqrt(t.x*t.x+t.y*t.y),o=Math.atan2(t.y,t.x)/Math.sin(this.s0),n=2*(Math.atan(Math.pow(this.ro0/i,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),e=Math.asin(Math.cos(this.ad)*Math.sin(n)-Math.sin(this.ad)*Math.cos(n)*Math.cos(o)),r=Math.asin(Math.cos(n)*Math.sin(o)/Math.cos(e)),t.x=this.long0-r/this.alfa,a=e,s=0;var l=0;do{t.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(e/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(a))/(1-this.e*Math.sin(a)),this.e/2))-this.s45),Math.abs(a-t.y)<1e-10&&(s=1),a=t.y,l+=1}while(0===s&&l<15);return l>=15?null:t},names:["Krovak","krovak"]};function h$(t,e,r,n,o){return t*o-e*Math.sin(2*o)+r*Math.sin(4*o)-n*Math.sin(6*o)}function y$(t){return 1-.25*t*(1+t/16*(3+1.25*t))}function d$(t){return.375*t*(1+.25*t*(1+.46875*t))}function v$(t){return.05859375*t*t*(1+.75*t)}function m$(t){return t*t*t*(35/3072)}function b$(t,e,r){var n=e*r;return t/Math.sqrt(1-n*n)}function g$(t){return Math.abs(t)<qQ?t:t-TX(t)*Math.PI}function S$(t,e,r,n,o){var i,a;i=t/e;for(var s=0;s<15;s++)if(i+=a=(t-(e*i-r*Math.sin(2*i)+n*Math.sin(4*i)-o*Math.sin(6*i)))/(e-2*r*Math.cos(2*i)+4*n*Math.cos(4*i)-6*o*Math.cos(6*i)),Math.abs(a)<=1e-10)return i;return NaN}var w$={init:function(){this.sphere||(this.e0=y$(this.es),this.e1=d$(this.es),this.e2=v$(this.es),this.e3=m$(this.es),this.ml0=this.a*h$(this.e0,this.e1,this.e2,this.e3,this.lat0))},forward:function(t){var e,r,n=t.x,o=t.y;if(n=CX(n-this.long0),this.sphere)e=this.a*Math.asin(Math.cos(o)*Math.sin(n)),r=this.a*(Math.atan2(Math.tan(o),Math.cos(n))-this.lat0);else{var i=Math.sin(o),a=Math.cos(o),s=b$(this.a,this.e,i),u=Math.tan(o)*Math.tan(o),l=n*Math.cos(o),c=l*l,f=this.es*a*a/(1-this.es);e=s*l*(1-c*u*(1/6-(8-u+8*f)*c/120)),r=this.a*h$(this.e0,this.e1,this.e2,this.e3,o)-this.ml0+s*i/a*c*(.5+(5-u+6*f)*c/24)}return t.x=e+this.x0,t.y=r+this.y0,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e,r,n=t.x/this.a,o=t.y/this.a;if(this.sphere){var i=o+this.lat0;e=Math.asin(Math.sin(i)*Math.cos(n)),r=Math.atan2(Math.tan(n),Math.cos(i))}else{var a=S$(this.ml0/this.a+o,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(a)-qQ)<=YQ)return t.x=this.long0,t.y=qQ,o<0&&(t.y*=-1),t;var s=b$(this.a,this.e,Math.sin(a)),u=s*s*s/this.a/this.a*(1-this.es),l=Math.pow(Math.tan(a),2),c=n*this.a/s,f=c*c;e=a-s*Math.tan(a)/u*c*c*(.5-(1+3*l)*c*c/24),r=c*(1-f*(l/3+(1+3*l)*l*f/15))/Math.cos(a)}return t.x=CX(r+this.long0),t.y=g$(e),t},names:["Cassini","Cassini_Soldner","cass"]};function _$(t,e){var r;return t>1e-7?(1-t*t)*(e/(1-(r=t*e)*r)-.5/t*Math.log((1-r)/(1+r))):2*e}var O$=.3333333333333333,E$=.17222222222222222,P$=.10257936507936508,x$=.06388888888888888,T$=.0664021164021164,C$=.016415012942191543;var k$={init:function(){var t,e=Math.abs(this.lat0);if(Math.abs(e-qQ)<YQ?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(e)<YQ?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0)switch(this.qp=_$(this.e,1),this.mmf=.5/(1-this.es),this.apa=function(t){var e,r=[];return r[0]=t*O$,e=t*t,r[0]+=e*E$,r[1]=e*x$,e*=t,r[0]+=e*P$,r[1]+=e*T$,r[2]=e*C$,r}(this.es),this.mode){case this.N_POLE:case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),t=Math.sin(this.lat0),this.sinb1=_$(this.e,t)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*t*t)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))},forward:function(t){var e,r,n,o,i,a,s,u,l,c,f=t.x,p=t.y;if(f=CX(f-this.long0),this.sphere){if(i=Math.sin(p),c=Math.cos(p),n=Math.cos(f),this.mode===this.OBLIQ||this.mode===this.EQUIT){if((r=this.mode===this.EQUIT?1+c*n:1+this.sinph0*i+this.cosph0*c*n)<=YQ)return null;e=(r=Math.sqrt(2/r))*c*Math.sin(f),r*=this.mode===this.EQUIT?i:this.cosph0*i-this.sinph0*c*n}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(n=-n),Math.abs(p+this.lat0)<YQ)return null;r=ZQ-.5*p,e=(r=2*(this.mode===this.S_POLE?Math.cos(r):Math.sin(r)))*Math.sin(f),r*=n}}else{switch(s=0,u=0,l=0,n=Math.cos(f),o=Math.sin(f),i=Math.sin(p),a=_$(this.e,i),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(s=a/this.qp,u=Math.sqrt(1-s*s)),this.mode){case this.OBLIQ:l=1+this.sinb1*s+this.cosb1*u*n;break;case this.EQUIT:l=1+u*n;break;case this.N_POLE:l=qQ+p,a=this.qp-a;break;case this.S_POLE:l=p-qQ,a=this.qp+a}if(Math.abs(l)<YQ)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:l=Math.sqrt(2/l),r=this.mode===this.OBLIQ?this.ymf*l*(this.cosb1*s-this.sinb1*u*n):(l=Math.sqrt(2/(1+u*n)))*s*this.ymf,e=this.xmf*l*u*o;break;case this.N_POLE:case this.S_POLE:a>=0?(e=(l=Math.sqrt(a))*o,r=n*(this.mode===this.S_POLE?l:-l)):e=r=0}}return t.x=this.a*e+this.x0,t.y=this.a*r+this.y0,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e,r,n,o,i,a,s,u,l,c,f=t.x/this.a,p=t.y/this.a;if(this.sphere){var h,y=0,d=0;if((r=.5*(h=Math.sqrt(f*f+p*p)))>1)return null;switch(r=2*Math.asin(r),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(d=Math.sin(r),y=Math.cos(r)),this.mode){case this.EQUIT:r=Math.abs(h)<=YQ?0:Math.asin(p*d/h),f*=d,p=y*h;break;case this.OBLIQ:r=Math.abs(h)<=YQ?this.lat0:Math.asin(y*this.sinph0+p*d*this.cosph0/h),f*=d*this.cosph0,p=(y-Math.sin(r)*this.sinph0)*h;break;case this.N_POLE:p=-p,r=qQ-r;break;case this.S_POLE:r-=qQ}e=0!==p||this.mode!==this.EQUIT&&this.mode!==this.OBLIQ?Math.atan2(f,p):0}else{if(s=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(f/=this.dd,p*=this.dd,(a=Math.sqrt(f*f+p*p))<YQ)return t.x=this.long0,t.y=this.lat0,t;o=2*Math.asin(.5*a/this.rq),n=Math.cos(o),f*=o=Math.sin(o),this.mode===this.OBLIQ?(s=n*this.sinb1+p*o*this.cosb1/a,i=this.qp*s,p=a*this.cosb1*n-p*this.sinb1*o):(s=p*o/a,i=this.qp*s,p=a*n)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(p=-p),!(i=f*f+p*p))return t.x=this.long0,t.y=this.lat0,t;s=1-i/this.qp,this.mode===this.S_POLE&&(s=-s)}e=Math.atan2(f,p),u=Math.asin(s),l=this.apa,c=u+u,r=u+l[0]*Math.sin(c)+l[1]*Math.sin(c+c)+l[2]*Math.sin(c+c+c)}return t.x=CX(this.long0+e),t.y=r,t},names:["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"],S_POLE:1,N_POLE:2,EQUIT:3,OBLIQ:4};function A$(t){return Math.abs(t)>1&&(t=t>1?1:-1),Math.asin(t)}var j$={init:function(){Math.abs(this.lat1+this.lat2)<YQ||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=xX(this.e3,this.sin_po,this.cos_po),this.qs1=_$(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=xX(this.e3,this.sin_po,this.cos_po),this.qs2=_$(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=_$(this.e3,this.sin_po),Math.abs(this.lat1-this.lat2)>YQ?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)},forward:function(t){var e=t.x,r=t.y;this.sin_phi=Math.sin(r),this.cos_phi=Math.cos(r);var n=_$(this.e3,this.sin_phi),o=this.a*Math.sqrt(this.c-this.ns0*n)/this.ns0,i=this.ns0*CX(e-this.long0),a=o*Math.sin(i)+this.x0,s=this.rh-o*Math.cos(i)+this.y0;return t.x=a,t.y=s,t},inverse:function(t){var e,r,n,o,i,a;return t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns0>=0?(e=Math.sqrt(t.x*t.x+t.y*t.y),n=1):(e=-Math.sqrt(t.x*t.x+t.y*t.y),n=-1),o=0,0!==e&&(o=Math.atan2(n*t.x,n*t.y)),n=e*this.ns0/this.a,this.sphere?a=Math.asin((this.c-n*n)/(2*this.ns0)):(r=(this.c-n*n)/this.ns0,a=this.phi1z(this.e3,r)),i=CX(o/this.ns0+this.long0),t.x=i,t.y=a,t},names:["Albers_Conic_Equal_Area","Albers","aea"],phi1z:function(t,e){var r,n,o,i,a,s=A$(.5*e);if(t<YQ)return s;for(var u=t*t,l=1;l<=25;l++)if(r=Math.sin(s),n=Math.cos(s),s+=a=.5*(i=1-(o=t*r)*o)*i/n*(e/(1-u)-r/i+.5/t*Math.log((1-o)/(1+o))),Math.abs(a)<=1e-7)return s;return null}};var N$={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1},forward:function(t){var e,r,n,o,i,a,s,u=t.x,l=t.y;return n=CX(u-this.long0),e=Math.sin(l),r=Math.cos(l),o=Math.cos(n),(i=this.sin_p14*e+this.cos_p14*r*o)>0||Math.abs(i)<=YQ?(a=this.x0+1*this.a*r*Math.sin(n)/i,s=this.y0+1*this.a*(this.cos_p14*e-this.sin_p14*r*o)/i):(a=this.x0+this.infinity_dist*r*Math.sin(n),s=this.y0+this.infinity_dist*(this.cos_p14*e-this.sin_p14*r*o)),t.x=a,t.y=s,t},inverse:function(t){var e,r,n,o,i,a;return t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,(e=Math.sqrt(t.x*t.x+t.y*t.y))?(o=Math.atan2(e,this.rc),r=Math.sin(o),a=A$((n=Math.cos(o))*this.sin_p14+t.y*r*this.cos_p14/e),i=Math.atan2(t.x*r,e*this.cos_p14*n-t.y*this.sin_p14*r),i=CX(this.long0+i)):(a=this.phic0,i=0),t.x=i,t.y=a,t},names:["gnom"]};var I$={init:function(){this.sphere||(this.k0=xX(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))},forward:function(t){var e,r,n=t.x,o=t.y,i=CX(n-this.long0);if(this.sphere)e=this.x0+this.a*i*Math.cos(this.lat_ts),r=this.y0+this.a*Math.sin(o)/Math.cos(this.lat_ts);else{var a=_$(this.e,Math.sin(o));e=this.x0+this.a*this.k0*i,r=this.y0+this.a*a*.5/this.k0}return t.x=e,t.y=r,t},inverse:function(t){var e,r;return t.x-=this.x0,t.y-=this.y0,this.sphere?(e=CX(this.long0+t.x/this.a/Math.cos(this.lat_ts)),r=Math.asin(t.y/this.a*Math.cos(this.lat_ts))):(r=function(t,e){var r=1-(1-t*t)/(2*t)*Math.log((1-t)/(1+t));if(Math.abs(Math.abs(e)-r)<1e-6)return e<0?-1*qQ:qQ;for(var n,o,i,a,s=Math.asin(.5*e),u=0;u<30;u++)if(o=Math.sin(s),i=Math.cos(s),a=t*o,s+=n=Math.pow(1-a*a,2)/(2*i)*(e/(1-t*t)-o/(1-a*a)+.5/t*Math.log((1-a)/(1+a))),Math.abs(n)<=1e-10)return s;return NaN}(this.e,2*t.y*this.k0/this.a),e=CX(this.long0+t.x/(this.a*this.k0))),t.x=e,t.y=r,t},names:["cea"]};var M$={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)},forward:function(t){var e=t.x,r=t.y,n=CX(e-this.long0),o=g$(r-this.lat0);return t.x=this.x0+this.a*n*this.rc,t.y=this.y0+this.a*o,t},inverse:function(t){var e=t.x,r=t.y;return t.x=CX(this.long0+(e-this.x0)/(this.a*this.rc)),t.y=g$(this.lat0+(r-this.y0)/this.a),t},names:["Equirectangular","Equidistant_Cylindrical","eqc"]},R$=20;var L$={init:function(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=y$(this.es),this.e1=d$(this.es),this.e2=v$(this.es),this.e3=m$(this.es),this.ml0=this.a*h$(this.e0,this.e1,this.e2,this.e3,this.lat0)},forward:function(t){var e,r,n,o=t.x,i=t.y,a=CX(o-this.long0);if(n=a*Math.sin(i),this.sphere)Math.abs(i)<=YQ?(e=this.a*a,r=-1*this.a*this.lat0):(e=this.a*Math.sin(n)/Math.tan(i),r=this.a*(g$(i-this.lat0)+(1-Math.cos(n))/Math.tan(i)));else if(Math.abs(i)<=YQ)e=this.a*a,r=-1*this.ml0;else{var s=b$(this.a,this.e,Math.sin(i))/Math.tan(i);e=s*Math.sin(n),r=this.a*h$(this.e0,this.e1,this.e2,this.e3,i)-this.ml0+s*(1-Math.cos(n))}return t.x=e+this.x0,t.y=r+this.y0,t},inverse:function(t){var e,r,n,o,i,a,s,u,l;if(n=t.x-this.x0,o=t.y-this.y0,this.sphere)if(Math.abs(o+this.a*this.lat0)<=YQ)e=CX(n/this.a+this.long0),r=0;else{var c;for(a=this.lat0+o/this.a,s=n*n/this.a/this.a+a*a,u=a,i=R$;i;--i)if(u+=l=-1*(a*(u*(c=Math.tan(u))+1)-u-.5*(u*u+s)*c)/((u-a)/c-1),Math.abs(l)<=YQ){r=u;break}e=CX(this.long0+Math.asin(n*Math.tan(u)/this.a)/Math.sin(r))}else if(Math.abs(o+this.ml0)<=YQ)r=0,e=CX(this.long0+n/this.a);else{var f,p,h,y,d;for(a=(this.ml0+o)/this.a,s=n*n/this.a/this.a+a*a,u=a,i=R$;i;--i)if(d=this.e*Math.sin(u),f=Math.sqrt(1-d*d)*Math.tan(u),p=this.a*h$(this.e0,this.e1,this.e2,this.e3,u),h=this.e0-2*this.e1*Math.cos(2*u)+4*this.e2*Math.cos(4*u)-6*this.e3*Math.cos(6*u),u-=l=(a*(f*(y=p/this.a)+1)-y-.5*f*(y*y+s))/(this.es*Math.sin(2*u)*(y*y+s-2*a*y)/(4*f)+(a-y)*(f*h-2/Math.sin(2*u))-h),Math.abs(l)<=YQ){r=u;break}f=Math.sqrt(1-this.es*Math.pow(Math.sin(r),2))*Math.tan(r),e=CX(this.long0+Math.asin(n*f/this.a)/Math.sin(r))}return t.x=e,t.y=r,t},names:["Polyconic","poly"]};var D$={init:function(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013},forward:function(t){var e,r=t.x,n=t.y-this.lat0,o=r-this.long0,i=n/HQ*1e-5,a=o,s=1,u=0;for(e=1;e<=10;e++)s*=i,u+=this.A[e]*s;var l,c=u,f=a,p=1,h=0,y=0,d=0;for(e=1;e<=6;e++)l=h*c+p*f,p=p*c-h*f,h=l,y=y+this.B_re[e]*p-this.B_im[e]*h,d=d+this.B_im[e]*p+this.B_re[e]*h;return t.x=d*this.a+this.x0,t.y=y*this.a+this.y0,t},inverse:function(t){var e,r,n=t.x,o=t.y,i=n-this.x0,a=(o-this.y0)/this.a,s=i/this.a,u=1,l=0,c=0,f=0;for(e=1;e<=6;e++)r=l*a+u*s,u=u*a-l*s,l=r,c=c+this.C_re[e]*u-this.C_im[e]*l,f=f+this.C_im[e]*u+this.C_re[e]*l;for(var p=0;p<this.iterations;p++){var h,y=c,d=f,v=a,m=s;for(e=2;e<=6;e++)h=d*c+y*f,y=y*c-d*f,d=h,v+=(e-1)*(this.B_re[e]*y-this.B_im[e]*d),m+=(e-1)*(this.B_im[e]*y+this.B_re[e]*d);y=1,d=0;var b=this.B_re[1],g=this.B_im[1];for(e=2;e<=6;e++)h=d*c+y*f,y=y*c-d*f,d=h,b+=e*(this.B_re[e]*y-this.B_im[e]*d),g+=e*(this.B_im[e]*y+this.B_re[e]*d);var S=b*b+g*g;c=(v*b+m*g)/S,f=(m*b-v*g)/S}var w=c,_=f,O=1,E=0;for(e=1;e<=9;e++)O*=w,E+=this.D[e]*O;var P=this.lat0+E*HQ*1e5,x=this.long0+_;return t.x=x,t.y=P,t},names:["New_Zealand_Map_Grid","nzmg"]};var B$={init:function(){},forward:function(t){var e=t.x,r=t.y,n=CX(e-this.long0),o=this.x0+this.a*n,i=this.y0+this.a*Math.log(Math.tan(Math.PI/4+r/2.5))*1.25;return t.x=o,t.y=i,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e=CX(this.long0+t.x/this.a),r=2.5*(Math.atan(Math.exp(.8*t.y/this.a))-Math.PI/4);return t.x=e,t.y=r,t},names:["Miller_Cylindrical","mill"]},F$=20;var U$={init:function(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=HZ(this.es)},forward:function(t){var e,r,n=t.x,o=t.y;if(n=CX(n-this.long0),this.sphere){if(this.m)for(var i=this.n*Math.sin(o),a=F$;a;--a){var s=(this.m*o+Math.sin(o)-i)/(this.m+Math.cos(o));if(o-=s,Math.abs(s)<YQ)break}else o=1!==this.n?Math.asin(this.n*Math.sin(o)):o;e=this.a*this.C_x*n*(this.m+Math.cos(o)),r=this.a*this.C_y*o}else{var u=Math.sin(o),l=Math.cos(o);r=this.a*qZ(o,u,l,this.en),e=this.a*n*l/Math.sqrt(1-this.es*u*u)}return t.x=e,t.y=r,t},inverse:function(t){var e,r,n;return t.x-=this.x0,r=t.x/this.a,t.y-=this.y0,e=t.y/this.a,this.sphere?(e/=this.C_y,r/=this.C_x*(this.m+Math.cos(e)),this.m?e=A$((this.m*e+Math.sin(e))/this.n):1!==this.n&&(e=A$(Math.sin(e)/this.n)),r=CX(r+this.long0),e=g$(e)):(e=WZ(t.y/this.a,this.es,this.en),(n=Math.abs(e))<qQ?(n=Math.sin(e),r=CX(this.long0+t.x*Math.sqrt(1-this.es*n*n)/(this.a*Math.cos(e)))):n-YQ<qQ&&(r=this.long0)),t.x=r,t.y=e,t},names:["Sinusoidal","sinu"]};var G$={init:function(){},forward:function(t){for(var e=t.x,r=t.y,n=CX(e-this.long0),o=r,i=Math.PI*Math.sin(r);;){var a=-(o+Math.sin(o)-i)/(1+Math.cos(o));if(o+=a,Math.abs(a)<YQ)break}o/=2,Math.PI/2-Math.abs(r)<YQ&&(n=0);var s=.900316316158*this.a*n*Math.cos(o)+this.x0,u=1.4142135623731*this.a*Math.sin(o)+this.y0;return t.x=s,t.y=u,t},inverse:function(t){var e,r;t.x-=this.x0,t.y-=this.y0,r=t.y/(1.4142135623731*this.a),Math.abs(r)>.999999999999&&(r=.999999999999),e=Math.asin(r);var n=CX(this.long0+t.x/(.900316316158*this.a*Math.cos(e)));n<-Math.PI&&(n=-Math.PI),n>Math.PI&&(n=Math.PI),r=(2*e+Math.sin(2*e))/Math.PI,Math.abs(r)>1&&(r=1);var o=Math.asin(r);return t.x=n,t.y=o,t},names:["Mollweide","moll"]};var V$={init:function(){Math.abs(this.lat1+this.lat2)<YQ||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=y$(this.es),this.e1=d$(this.es),this.e2=v$(this.es),this.e3=m$(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=xX(this.e,this.sinphi,this.cosphi),this.ml1=h$(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<YQ?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=xX(this.e,this.sinphi,this.cosphi),this.ml2=h$(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=h$(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))},forward:function(t){var e,r=t.x,n=t.y;if(this.sphere)e=this.a*(this.g-n);else{var o=h$(this.e0,this.e1,this.e2,this.e3,n);e=this.a*(this.g-o)}var i=this.ns*CX(r-this.long0),a=this.x0+e*Math.sin(i),s=this.y0+this.rh-e*Math.cos(i);return t.x=a,t.y=s,t},inverse:function(t){var e,r,n,o;t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns>=0?(r=Math.sqrt(t.x*t.x+t.y*t.y),e=1):(r=-Math.sqrt(t.x*t.x+t.y*t.y),e=-1);var i=0;return 0!==r&&(i=Math.atan2(e*t.x,e*t.y)),this.sphere?(o=CX(this.long0+i/this.ns),n=g$(this.g-r/this.a),t.x=o,t.y=n,t):(n=S$(this.g-r/this.a,this.e0,this.e1,this.e2,this.e3),o=CX(this.long0+i/this.ns),t.x=o,t.y=n,t)},names:["Equidistant_Conic","eqdc"]};var z$={init:function(){this.R=this.a},forward:function(t){var e,r,n=t.x,o=t.y,i=CX(n-this.long0);Math.abs(o)<=YQ&&(e=this.x0+this.R*i,r=this.y0);var a=A$(2*Math.abs(o/Math.PI));(Math.abs(i)<=YQ||Math.abs(Math.abs(o)-qQ)<=YQ)&&(e=this.x0,r=o>=0?this.y0+Math.PI*this.R*Math.tan(.5*a):this.y0+Math.PI*this.R*-Math.tan(.5*a));var s=.5*Math.abs(Math.PI/i-i/Math.PI),u=s*s,l=Math.sin(a),c=Math.cos(a),f=c/(l+c-1),p=f*f,h=f*(2/l-1),y=h*h,d=Math.PI*this.R*(s*(f-y)+Math.sqrt(u*(f-y)*(f-y)-(y+u)*(p-y)))/(y+u);i<0&&(d=-d),e=this.x0+d;var v=u+f;return d=Math.PI*this.R*(h*v-s*Math.sqrt((y+u)*(u+1)-v*v))/(y+u),r=o>=0?this.y0+d:this.y0-d,t.x=e,t.y=r,t},inverse:function(t){var e,r,n,o,i,a,s,u,l,c,f,p;return t.x-=this.x0,t.y-=this.y0,f=Math.PI*this.R,i=(n=t.x/f)*n+(o=t.y/f)*o,f=3*(o*o/(u=-2*(a=-Math.abs(o)*(1+i))+1+2*o*o+i*i)+(2*(s=a-2*o*o+n*n)*s*s/u/u/u-9*a*s/u/u)/27)/(l=(a-s*s/3/u)/u)/(c=2*Math.sqrt(-l/3)),Math.abs(f)>1&&(f=f>=0?1:-1),p=Math.acos(f)/3,r=t.y>=0?(-c*Math.cos(p+Math.PI/3)-s/3/u)*Math.PI:-(-c*Math.cos(p+Math.PI/3)-s/3/u)*Math.PI,e=Math.abs(n)<YQ?this.long0:CX(this.long0+Math.PI*(i-1+Math.sqrt(1+2*(n*n-o*o)+i*i))/2/n),t.x=e,t.y=r,t},names:["Van_der_Grinten_I","VanDerGrinten","vandg"]};var H$={init:function(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)},forward:function(t){var e,r,n,o,i,a,s,u,l,c,f,p,h,y,d,v,m,b,g,S,w,_,O=t.x,E=t.y,P=Math.sin(t.y),x=Math.cos(t.y),T=CX(O-this.long0);return this.sphere?Math.abs(this.sin_p12-1)<=YQ?(t.x=this.x0+this.a*(qQ-E)*Math.sin(T),t.y=this.y0-this.a*(qQ-E)*Math.cos(T),t):Math.abs(this.sin_p12+1)<=YQ?(t.x=this.x0+this.a*(qQ+E)*Math.sin(T),t.y=this.y0+this.a*(qQ+E)*Math.cos(T),t):(b=this.sin_p12*P+this.cos_p12*x*Math.cos(T),m=(v=Math.acos(b))?v/Math.sin(v):1,t.x=this.x0+this.a*m*x*Math.sin(T),t.y=this.y0+this.a*m*(this.cos_p12*P-this.sin_p12*x*Math.cos(T)),t):(e=y$(this.es),r=d$(this.es),n=v$(this.es),o=m$(this.es),Math.abs(this.sin_p12-1)<=YQ?(i=this.a*h$(e,r,n,o,qQ),a=this.a*h$(e,r,n,o,E),t.x=this.x0+(i-a)*Math.sin(T),t.y=this.y0-(i-a)*Math.cos(T),t):Math.abs(this.sin_p12+1)<=YQ?(i=this.a*h$(e,r,n,o,qQ),a=this.a*h$(e,r,n,o,E),t.x=this.x0+(i+a)*Math.sin(T),t.y=this.y0+(i+a)*Math.cos(T),t):(s=P/x,u=b$(this.a,this.e,this.sin_p12),l=b$(this.a,this.e,P),c=Math.atan((1-this.es)*s+this.es*u*this.sin_p12/(l*x)),g=0===(f=Math.atan2(Math.sin(T),this.cos_p12*Math.tan(c)-this.sin_p12*Math.cos(T)))?Math.asin(this.cos_p12*Math.sin(c)-this.sin_p12*Math.cos(c)):Math.abs(Math.abs(f)-Math.PI)<=YQ?-Math.asin(this.cos_p12*Math.sin(c)-this.sin_p12*Math.cos(c)):Math.asin(Math.sin(T)*Math.cos(c)/Math.sin(f)),p=this.e*this.sin_p12/Math.sqrt(1-this.es),v=u*g*(1-(S=g*g)*(d=(h=this.e*this.cos_p12*Math.cos(f)/Math.sqrt(1-this.es))*h)*(1-d)/6+(w=S*g)/8*(y=p*h)*(1-2*d)+(_=w*g)/120*(d*(4-7*d)-3*p*p*(1-7*d))-_*g/48*y),t.x=this.x0+v*Math.sin(f),t.y=this.y0+v*Math.cos(f),t))},inverse:function(t){var e,r,n,o,i,a,s,u,l,c,f,p,h,y,d,v,m,b,g,S,w,_,O;if(t.x-=this.x0,t.y-=this.y0,this.sphere){if((e=Math.sqrt(t.x*t.x+t.y*t.y))>2*qQ*this.a)return;return r=e/this.a,n=Math.sin(r),o=Math.cos(r),i=this.long0,Math.abs(e)<=YQ?a=this.lat0:(a=A$(o*this.sin_p12+t.y*n*this.cos_p12/e),s=Math.abs(this.lat0)-qQ,i=Math.abs(s)<=YQ?this.lat0>=0?CX(this.long0+Math.atan2(t.x,-t.y)):CX(this.long0-Math.atan2(-t.x,t.y)):CX(this.long0+Math.atan2(t.x*n,e*this.cos_p12*o-t.y*this.sin_p12*n))),t.x=i,t.y=a,t}return u=y$(this.es),l=d$(this.es),c=v$(this.es),f=m$(this.es),Math.abs(this.sin_p12-1)<=YQ?(a=S$(((p=this.a*h$(u,l,c,f,qQ))-(e=Math.sqrt(t.x*t.x+t.y*t.y)))/this.a,u,l,c,f),i=CX(this.long0+Math.atan2(t.x,-1*t.y)),t.x=i,t.y=a,t):Math.abs(this.sin_p12+1)<=YQ?(p=this.a*h$(u,l,c,f,qQ),a=S$(((e=Math.sqrt(t.x*t.x+t.y*t.y))-p)/this.a,u,l,c,f),i=CX(this.long0+Math.atan2(t.x,t.y)),t.x=i,t.y=a,t):(e=Math.sqrt(t.x*t.x+t.y*t.y),d=Math.atan2(t.x,t.y),h=b$(this.a,this.e,this.sin_p12),v=Math.cos(d),b=-(m=this.e*this.cos_p12*v)*m/(1-this.es),g=3*this.es*(1-b)*this.sin_p12*this.cos_p12*v/(1-this.es),_=1-b*(w=(S=e/h)-b*(1+b)*Math.pow(S,3)/6-g*(1+3*b)*Math.pow(S,4)/24)*w/2-S*w*w*w/6,y=Math.asin(this.sin_p12*Math.cos(w)+this.cos_p12*Math.sin(w)*v),i=CX(this.long0+Math.asin(Math.sin(d)*Math.sin(w)/Math.cos(y))),O=Math.sin(y),a=Math.atan2((O-this.es*_*this.sin_p12)*Math.tan(y),O*(1-this.es)),t.x=i,t.y=a,t)},names:["Azimuthal_Equidistant","aeqd"]};var q$={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)},forward:function(t){var e,r,n,o,i,a,s,u=t.x,l=t.y;return n=CX(u-this.long0),e=Math.sin(l),r=Math.cos(l),o=Math.cos(n),((i=this.sin_p14*e+this.cos_p14*r*o)>0||Math.abs(i)<=YQ)&&(a=1*this.a*r*Math.sin(n),s=this.y0+1*this.a*(this.cos_p14*e-this.sin_p14*r*o)),t.x=a,t.y=s,t},inverse:function(t){var e,r,n,o,i,a,s;return t.x-=this.x0,t.y-=this.y0,r=A$((e=Math.sqrt(t.x*t.x+t.y*t.y))/this.a),n=Math.sin(r),o=Math.cos(r),a=this.long0,Math.abs(e)<=YQ?(s=this.lat0,t.x=a,t.y=s,t):(s=A$(o*this.sin_p14+t.y*n*this.cos_p14/e),i=Math.abs(this.lat0)-qQ,Math.abs(i)<=YQ?(a=this.lat0>=0?CX(this.long0+Math.atan2(t.x,-t.y)):CX(this.long0-Math.atan2(-t.x,t.y)),t.x=a,t.y=s,t):(a=CX(this.long0+Math.atan2(t.x*n,e*this.cos_p14*o-t.y*this.sin_p14*n)),t.x=a,t.y=s,t))},names:["ortho"]},J$={FRONT:1,RIGHT:2,BACK:3,LEFT:4,TOP:5,BOTTOM:6},W$={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4};function K$(t,e,r,n){var o;return t<YQ?(n.value=W$.AREA_0,o=0):(o=Math.atan2(e,r),Math.abs(o)<=ZQ?n.value=W$.AREA_0:o>ZQ&&o<=qQ+ZQ?(n.value=W$.AREA_1,o-=qQ):o>qQ+ZQ||o<=-(qQ+ZQ)?(n.value=W$.AREA_2,o=o>=0?o-tX:o+tX):(n.value=W$.AREA_3,o+=qQ)),o}function Y$(t,e){var r=t+e;return r<-tX?r+=$Q:r>+tX&&(r-=$Q),r}var Q$={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=qQ-ZQ/2?this.face=J$.TOP:this.lat0<=-(qQ-ZQ/2)?this.face=J$.BOTTOM:Math.abs(this.long0)<=ZQ?this.face=J$.FRONT:Math.abs(this.long0)<=qQ+ZQ?this.face=this.long0>0?J$.RIGHT:J$.LEFT:this.face=J$.BACK,0!==this.es&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)},forward:function(t){var e,r,n,o,i,a,s={x:0,y:0},u={value:0};if(t.x-=this.long0,e=0!==this.es?Math.atan(this.one_minus_f_squared*Math.tan(t.y)):t.y,r=t.x,this.face===J$.TOP)o=qQ-e,r>=ZQ&&r<=qQ+ZQ?(u.value=W$.AREA_0,n=r-qQ):r>qQ+ZQ||r<=-(qQ+ZQ)?(u.value=W$.AREA_1,n=r>0?r-tX:r+tX):r>-(qQ+ZQ)&&r<=-ZQ?(u.value=W$.AREA_2,n=r+qQ):(u.value=W$.AREA_3,n=r);else if(this.face===J$.BOTTOM)o=qQ+e,r>=ZQ&&r<=qQ+ZQ?(u.value=W$.AREA_0,n=-r+qQ):r<ZQ&&r>=-ZQ?(u.value=W$.AREA_1,n=-r):r<-ZQ&&r>=-(qQ+ZQ)?(u.value=W$.AREA_2,n=-r-qQ):(u.value=W$.AREA_3,n=r>0?-r+tX:-r-tX);else{var l,c,f,p,h,y;this.face===J$.RIGHT?r=Y$(r,+qQ):this.face===J$.BACK?r=Y$(r,+tX):this.face===J$.LEFT&&(r=Y$(r,-qQ)),p=Math.sin(e),h=Math.cos(e),y=Math.sin(r),l=h*Math.cos(r),c=h*y,f=p,this.face===J$.FRONT?n=K$(o=Math.acos(l),f,c,u):this.face===J$.RIGHT?n=K$(o=Math.acos(c),f,-l,u):this.face===J$.BACK?n=K$(o=Math.acos(-l),f,-c,u):this.face===J$.LEFT?n=K$(o=Math.acos(-c),f,l,u):(o=n=0,u.value=W$.AREA_0)}return a=Math.atan(12/tX*(n+Math.acos(Math.sin(n)*Math.cos(ZQ))-qQ)),i=Math.sqrt((1-Math.cos(o))/(Math.cos(a)*Math.cos(a))/(1-Math.cos(Math.atan(1/Math.cos(n))))),u.value===W$.AREA_1?a+=qQ:u.value===W$.AREA_2?a+=tX:u.value===W$.AREA_3&&(a+=1.5*tX),s.x=i*Math.cos(a),s.y=i*Math.sin(a),s.x=s.x*this.a+this.x0,s.y=s.y*this.a+this.y0,t.x=s.x,t.y=s.y,t},inverse:function(t){var e,r,n,o,i,a,s,u,l,c,f,p,h={lam:0,phi:0},y={value:0};if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,r=Math.atan(Math.sqrt(t.x*t.x+t.y*t.y)),e=Math.atan2(t.y,t.x),t.x>=0&&t.x>=Math.abs(t.y)?y.value=W$.AREA_0:t.y>=0&&t.y>=Math.abs(t.x)?(y.value=W$.AREA_1,e-=qQ):t.x<0&&-t.x>=Math.abs(t.y)?(y.value=W$.AREA_2,e=e<0?e+tX:e-tX):(y.value=W$.AREA_3,e+=qQ),l=tX/12*Math.tan(e),i=Math.sin(l)/(Math.cos(l)-1/Math.sqrt(2)),a=Math.atan(i),(s=1-(n=Math.cos(e))*n*(o=Math.tan(r))*o*(1-Math.cos(Math.atan(1/Math.cos(a)))))<-1?s=-1:s>1&&(s=1),this.face===J$.TOP)u=Math.acos(s),h.phi=qQ-u,y.value===W$.AREA_0?h.lam=a+qQ:y.value===W$.AREA_1?h.lam=a<0?a+tX:a-tX:y.value===W$.AREA_2?h.lam=a-qQ:h.lam=a;else if(this.face===J$.BOTTOM)u=Math.acos(s),h.phi=u-qQ,y.value===W$.AREA_0?h.lam=-a+qQ:y.value===W$.AREA_1?h.lam=-a:y.value===W$.AREA_2?h.lam=-a-qQ:h.lam=a<0?-a-tX:-a+tX;else{var d,v,m;l=(d=s)*d,v=(l+=(m=l>=1?0:Math.sqrt(1-l)*Math.sin(a))*m)>=1?0:Math.sqrt(1-l),y.value===W$.AREA_1?(l=v,v=-m,m=l):y.value===W$.AREA_2?(v=-v,m=-m):y.value===W$.AREA_3&&(l=v,v=m,m=-l),this.face===J$.RIGHT?(l=d,d=-v,v=l):this.face===J$.BACK?(d=-d,v=-v):this.face===J$.LEFT&&(l=d,d=v,v=-l),h.phi=Math.acos(-m)-qQ,h.lam=Math.atan2(v,d),this.face===J$.RIGHT?h.lam=Y$(h.lam,-qQ):this.face===J$.BACK?h.lam=Y$(h.lam,-tX):this.face===J$.LEFT&&(h.lam=Y$(h.lam,+qQ))}return 0!==this.es&&(c=h.phi<0?1:0,f=Math.tan(h.phi),p=this.b/Math.sqrt(f*f+this.one_minus_f_squared),h.phi=Math.atan(Math.sqrt(this.a*this.a-p*p)/(this.one_minus_f*p)),c&&(h.phi=-h.phi)),h.lam+=this.long0,t.x=h.lam,t.y=h.phi,t},names:["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"]},X$=[[1,2.2199e-17,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-9.86701e-7],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,1.8736e-8],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,9.34959e-7],[.7986,-.00755338,-500009e-10,9.35324e-7],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],Z$=[[-5.20417e-18,.0124,1.21431e-18,-8.45284e-11],[.062,.0124,-1.26793e-9,4.22642e-10],[.124,.0124,5.07171e-9,-1.60604e-9],[.186,.0123999,-1.90189e-8,6.00152e-9],[.248,.0124002,7.10039e-8,-2.24e-8],[.31,.0123992,-2.64997e-7,8.35986e-8],[.372,.0124029,9.88983e-7,-3.11994e-7],[.434,.0123893,-369093e-11,-4.35621e-7],[.4958,.0123198,-102252e-10,-3.45523e-7],[.5571,.0121916,-154081e-10,-5.82288e-7],[.6176,.0119938,-241424e-10,-5.25327e-7],[.6769,.011713,-320223e-10,-5.16405e-7],[.7346,.0113541,-397684e-10,-6.09052e-7],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-1.40374e-9],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],$$=.8487,t0=1.3523,e0=XQ/5,r0=1/e0,n0=18,o0=function(t,e){return t[0]+e*(t[1]+e*(t[2]+e*t[3]))},i0=function(t,e){return t[1]+e*(2*t[2]+3*e*t[3])};var a0={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"},forward:function(t){var e=CX(t.x-this.long0),r=Math.abs(t.y),n=Math.floor(r*e0);n<0?n=0:n>=n0&&(n=n0-1),r=XQ*(r-r0*n);var o={x:o0(X$[n],r)*e,y:o0(Z$[n],r)};return t.y<0&&(o.y=-o.y),o.x=o.x*this.a*$$+this.x0,o.y=o.y*this.a*t0+this.y0,o},inverse:function(t){var e={x:(t.x-this.x0)/(this.a*$$),y:Math.abs(t.y-this.y0)/(this.a*t0)};if(e.y>=1)e.x/=X$[n0][0],e.y=t.y<0?-qQ:qQ;else{var r=Math.floor(e.y*n0);for(r<0?r=0:r>=n0&&(r=n0-1);;)if(Z$[r][0]>e.y)--r;else{if(!(Z$[r+1][0]<=e.y))break;++r}var n=Z$[r],o=5*(e.y-n[0])/(Z$[r+1][0]-n[0]);o=function(t,e,r,n){for(var o=e;n;--n){var i=t(o);if(o-=i,Math.abs(i)<r)break}return o}(function(t){return(o0(n,t)-e.y)/i0(n,t)},o,YQ,100),e.x/=o0(X$[r],o),e.y=(5*r+o)*QQ,t.y<0&&(e.y=-e.y)}return e.x=CX(e.x+this.long0),e},names:["Robinson","robin"]};var s0={init:function(){this.name="geocent"},forward:function(t){return XX(t,this.es,this.a)},inverse:function(t){return ZX(t,this.es,this.a,this.b)},names:["Geocentric","geocentric","geocent","Geocent"]},u0={N_POLE:0,S_POLE:1,EQUIT:2,OBLIQ:3},l0={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};var c0={init:function(){if(Object.keys(l0).forEach(function(t){if(void 0===this[t])this[t]=l0[t].def;else{if(l0[t].num&&isNaN(this[t]))throw new Error("Invalid parameter value, must be numeric "+t+" = "+this[t]);l0[t].num&&(this[t]=parseFloat(this[t]))}l0[t].degrees&&(this[t]=this[t]*QQ)}.bind(this)),Math.abs(Math.abs(this.lat0)-qQ)<YQ?this.mode=this.lat0<0?u0.S_POLE:u0.N_POLE:Math.abs(this.lat0)<YQ?this.mode=u0.EQUIT:(this.mode=u0.OBLIQ,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var t=this.tilt,e=this.azi;this.cg=Math.cos(e),this.sg=Math.sin(e),this.cw=Math.cos(t),this.sw=Math.sin(t)},forward:function(t){t.x-=this.long0;var e,r,n,o,i=Math.sin(t.y),a=Math.cos(t.y),s=Math.cos(t.x);switch(this.mode){case u0.OBLIQ:r=this.sinph0*i+this.cosph0*a*s;break;case u0.EQUIT:r=a*s;break;case u0.S_POLE:r=-i;break;case u0.N_POLE:r=i}switch(e=(r=this.pn1/(this.p-r))*a*Math.sin(t.x),this.mode){case u0.OBLIQ:r*=this.cosph0*i-this.sinph0*a*s;break;case u0.EQUIT:r*=i;break;case u0.N_POLE:r*=-a*s;break;case u0.S_POLE:r*=a*s}return o=1/((n=r*this.cg+e*this.sg)*this.sw*this.h1+this.cw),e=(e*this.cg-r*this.sg)*this.cw*o,r=n*o,t.x=e*this.a,t.y=r*this.a,t},inverse:function(t){t.x/=this.a,t.y/=this.a;var e,r,n,o={x:t.x,y:t.y};n=1/(this.pn1-t.y*this.sw),e=this.pn1*t.x*n,r=this.pn1*t.y*this.cw*n,t.x=e*this.cg+r*this.sg,t.y=r*this.cg-e*this.sg;var i=QZ(t.x,t.y);if(Math.abs(i)<YQ)o.x=0,o.y=t.y;else{var a,s;switch(s=1-i*i*this.pfact,s=(this.p-Math.sqrt(s))/(this.pn1/i+i/this.pn1),a=Math.sqrt(1-s*s),this.mode){case u0.OBLIQ:o.y=Math.asin(a*this.sinph0+t.y*s*this.cosph0/i),t.y=(a-this.sinph0*Math.sin(o.y))*i,t.x*=s*this.cosph0;break;case u0.EQUIT:o.y=Math.asin(t.y*s/i),t.y=a*i,t.x*=s;break;case u0.N_POLE:o.y=Math.asin(a),t.y=-t.y;break;case u0.S_POLE:o.y=-Math.asin(a)}o.x=Math.atan2(t.x,t.y)}return t.x=o.x+this.long0,t.y=o.y,t},names:["Tilted_Perspective","tpers"]};var f0={init:function(){if(this.flip_axis="x"===this.sweep?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw new Error;if(this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,0!==this.es){var t=1-this.es,e=1/t;this.radius_p=Math.sqrt(t),this.radius_p2=t,this.radius_p_inv2=e,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";this.title||(this.title="Geostationary Satellite View")},forward:function(t){var e,r,n,o,i=t.x,a=t.y;if(i-=this.long0,"ellipse"===this.shape){a=Math.atan(this.radius_p2*Math.tan(a));var s=this.radius_p/QZ(this.radius_p*Math.cos(a),Math.sin(a));if(r=s*Math.cos(i)*Math.cos(a),n=s*Math.sin(i)*Math.cos(a),o=s*Math.sin(a),(this.radius_g-r)*r-n*n-o*o*this.radius_p_inv2<0)return t.x=Number.NaN,t.y=Number.NaN,t;e=this.radius_g-r,this.flip_axis?(t.x=this.radius_g_1*Math.atan(n/QZ(o,e)),t.y=this.radius_g_1*Math.atan(o/e)):(t.x=this.radius_g_1*Math.atan(n/e),t.y=this.radius_g_1*Math.atan(o/QZ(n,e)))}else"sphere"===this.shape&&(e=Math.cos(a),r=Math.cos(i)*e,n=Math.sin(i)*e,o=Math.sin(a),e=this.radius_g-r,this.flip_axis?(t.x=this.radius_g_1*Math.atan(n/QZ(o,e)),t.y=this.radius_g_1*Math.atan(o/e)):(t.x=this.radius_g_1*Math.atan(n/e),t.y=this.radius_g_1*Math.atan(o/QZ(n,e))));return t.x=t.x*this.a,t.y=t.y*this.a,t},inverse:function(t){var e,r,n,o,i=-1,a=0,s=0;if(t.x=t.x/this.a,t.y=t.y/this.a,"ellipse"===this.shape){this.flip_axis?(s=Math.tan(t.y/this.radius_g_1),a=Math.tan(t.x/this.radius_g_1)*QZ(1,s)):(a=Math.tan(t.x/this.radius_g_1),s=Math.tan(t.y/this.radius_g_1)*QZ(1,a));var u=s/this.radius_p;if(e=a*a+u*u+i*i,(n=(r=2*this.radius_g*i)*r-4*e*this.C)<0)return t.x=Number.NaN,t.y=Number.NaN,t;o=(-r-Math.sqrt(n))/(2*e),i=this.radius_g+o*i,a*=o,s*=o,t.x=Math.atan2(a,i),t.y=Math.atan(s*Math.cos(t.x)/i),t.y=Math.atan(this.radius_p_inv2*Math.tan(t.y))}else if("sphere"===this.shape){if(this.flip_axis?(s=Math.tan(t.y/this.radius_g_1),a=Math.tan(t.x/this.radius_g_1)*Math.sqrt(1+s*s)):(a=Math.tan(t.x/this.radius_g_1),s=Math.tan(t.y/this.radius_g_1)*Math.sqrt(1+a*a)),e=a*a+s*s+i*i,(n=(r=2*this.radius_g*i)*r-4*e*this.C)<0)return t.x=Number.NaN,t.y=Number.NaN,t;o=(-r-Math.sqrt(n))/(2*e),i=this.radius_g+o*i,a*=o,s*=o,t.x=Math.atan2(a,i),t.y=Math.atan(s*Math.cos(t.x)/i)}return t.x=t.x+this.long0,t},names:["Geostationary Satellite View","Geostationary_Satellite","geos"]},p0=1.340264,h0=-.081106,y0=893e-6,d0=.003796,v0=Math.sqrt(3)/2;var m0={init:function(){this.es=0,this.long0=void 0!==this.long0?this.long0:0},forward:function(t){var e=CX(t.x-this.long0),r=t.y,n=Math.asin(v0*Math.sin(r)),o=n*n,i=o*o*o;return t.x=e*Math.cos(n)/(v0*(p0+3*h0*o+i*(7*y0+9*d0*o))),t.y=n*(p0+h0*o+i*(y0+d0*o)),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t},inverse:function(t){t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a;var e,r,n,o,i=t.y;for(o=0;o<12&&(i-=n=(i*(p0+h0*(e=i*i)+(r=e*e*e)*(y0+d0*e))-t.y)/(p0+3*h0*e+r*(7*y0+9*d0*e)),!(Math.abs(n)<1e-9));++o);return r=(e=i*i)*e*e,t.x=v0*t.x*(p0+3*h0*e+r*(7*y0+9*d0*e))/Math.cos(i),t.y=Math.asin(Math.sin(i)/v0),t.x=CX(t.x+this.long0),t},names:["eqearth","Equal Earth","Equal_Earth"]};fZ.defaultDatum="WGS84",fZ.Proj=QX,fZ.WGS84=new fZ.Proj("WGS84"),fZ.Point=jZ,fZ.toPoint=iZ,fZ.defs=wX,fZ.nadgrid=function(t,e){var r=new DataView(e),n=function(t){var e=t.getInt32(8,!1);return 11!==e&&(11!==(e=t.getInt32(8,!0))&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian"),!0)}(r),o=function(t,e){return{nFields:t.getInt32(8,e),nSubgridFields:t.getInt32(24,e),nSubgrids:t.getInt32(40,e),shiftType:HX(t,56,64).trim(),fromSemiMajorAxis:t.getFloat64(120,e),fromSemiMinorAxis:t.getFloat64(136,e),toSemiMajorAxis:t.getFloat64(152,e),toSemiMinorAxis:t.getFloat64(168,e)}}(r,n),i={header:o,subgrids:function(t,e,r){for(var n=176,o=[],i=0;i<e.nSubgrids;i++){var a=JX(t,n,r),s=WX(t,n,a,r),u=Math.round(1+(a.upperLongitude-a.lowerLongitude)/a.longitudeInterval),l=Math.round(1+(a.upperLatitude-a.lowerLatitude)/a.latitudeInterval);o.push({ll:[zX(a.lowerLongitude),zX(a.lowerLatitude)],del:[zX(a.longitudeInterval),zX(a.latitudeInterval)],lim:[u,l],count:a.gridNodeCount,cvs:qX(s)}),n+=176+16*a.gridNodeCount}return o}(r,o,n)};return GX[t]=i,i},fZ.transform=sZ,fZ.mgrs=SZ,fZ.version="__VERSION__",function(t){t.Proj.projections.add(KZ),t.Proj.projections.add(t$),t.Proj.projections.add(e$),t.Proj.projections.add(i$),t.Proj.projections.add(a$),t.Proj.projections.add(s$),t.Proj.projections.add(c$),t.Proj.projections.add(f$),t.Proj.projections.add(p$),t.Proj.projections.add(w$),t.Proj.projections.add(k$),t.Proj.projections.add(j$),t.Proj.projections.add(N$),t.Proj.projections.add(I$),t.Proj.projections.add(M$),t.Proj.projections.add(L$),t.Proj.projections.add(D$),t.Proj.projections.add(B$),t.Proj.projections.add(U$),t.Proj.projections.add(G$),t.Proj.projections.add(V$),t.Proj.projections.add(z$),t.Proj.projections.add(H$),t.Proj.projections.add(q$),t.Proj.projections.add(Q$),t.Proj.projections.add(a0),t.Proj.projections.add(s0),t.Proj.projections.add(c0),t.Proj.projections.add(f0),t.Proj.projections.add(m0)}(fZ);var b0=fZ;function g0(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,s=[],u=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(s.push(n.value),s.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return S0(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return S0(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S0(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}window.proj4=b0,window.Proj4js=b0,RQ().Proj=RQ().Proj||{},RQ().Proj._isProj4Obj=function(t){return void 0!==t.inverse&&void 0!==t.forward},RQ().Proj.Projection=RQ().Class.extend({initialize:function(t,e,r,n){var o=RQ().Proj._isProj4Obj(t);this._proj=o?t:this._projFromCodeDef(t,e);var i=r;RQ().Util.isArray(r)&&(i=RQ().bounds(r)),this.bounds=o?e:i,this.wrapLng=n},project:function(t){var e=this._proj.forward([t.lng,t.lat]);return new(RQ().Point)(e[0],e[1])},unproject:function(t,e){this.bounds&&!this.wrapLng&&(t.x=t.x<this.bounds.min.x?this.bounds.min.x:t.x>this.bounds.max.x?this.bounds.max.x:t.x,t.y=t.y<this.bounds.min.y?this.bounds.min.y:t.y>this.bounds.max.y?this.bounds.max.y:t.y);var r=this._proj.inverse([t.x,t.y]);return new(RQ().LatLng)(r[1],r[0],e)},_projFromCodeDef:function(t,e){if(e)b0.defs(t,e);else if(void 0===b0.defs[t]){var r=t.split(":");if(r.length>3&&(t=r[r.length-3]+":"+r[r.length-1]),void 0===b0.defs[t])throw"No projection definition for code "+t}return b0(t)},getUnits:function(){return this._proj.oProj.units||"degrees"}});var w0=RQ().Class.extend({includes:RQ().CRS,options:{transformation:new(RQ().Transformation)(1,0,-1,0)},initialize:function(t,e){var r,n,o;if(e.bounds&&4===e.bounds.length){var i=g0(e.bounds,4),a=i[0],s=i[1],u=i[2],l=i[3];e.bounds=[[a,s],[u,l]]}if(RQ().Proj._isProj4Obj(t)?(r=(n=t).srsCode,e=e||{},this.projection=new(RQ().Proj.Projection)(n,e.bounds,e.wrapLng)):(r=t,o=(e=e||{}).def||"",this.projection=new(RQ().Proj.Projection)(r,o,e.bounds,e.wrapLng)),RQ().Util.setOptions(this,e),this.options.wrapLng&&(this.wrapLng=this.options.wrapLng),this.code=r,this.transformation=this.options.transformation,this.options.dpi=this.options.dpi||96,this.options.bounds&&(this.options.bounds=RQ().bounds(this.options.bounds)),!this.options.origin&&this.options.bounds&&(this.options.origin=[this.options.bounds.min.x,this.options.bounds.max.y]),this.options.origin&&(this.options.origin instanceof RQ().Point&&(this.options.origin=[this.options.origin.x,this.options.origin.y]),this.transformation=new(RQ().Transformation)(1,-this.options.origin[0],-1,this.options.origin[1])),this.options.scales&&this.options.scales.length>0)this.scales=this.options.scales,this._scales=this._toProj4Scales(this.options.scales,this.options.dpi);else if(this.options.scaleDenominators&&this.options.scaleDenominators.length>0){this.scales=[];for(var c=0;c<this.options.scaleDenominators.length;c++)this.scales[c]=1/this.options.scaleDenominators[c];this._scales=this._toProj4Scales(this.scales,this.options.dpi)}else if(this.options.resolutions&&this.options.resolutions.length>0){this._scales=[];for(var f=this.options.resolutions.length-1;f>=0;f--)this.options.resolutions[f]&&(this._scales[f]=1/this.options.resolutions[f])}else this.options.bounds&&(this._scales=this._getDefaultProj4ScalesByBounds(this.options.bounds));this._rectify(),this.infinite=!this.options.bounds},_rectify:function(){if(this._scales&&(this.resolutions||(this.resolutions=[],this.resolutions=this._proj4ScalesToResolutions(this._scales)),!this.scales)){this.scales=[];for(var t=0;t<this.resolutions.length;t++){var e=this.resolutions[t]*this.options.dpi*(1/.0254)*this._getMeterPerMapUnit(this.projection.getUnits());this.scales[t]=1/e}}},scale:function(t){var e,r=Math.floor(t);return t===r?this._scales[t]:(e=this._scales[r])+(this._scales[r+1]-e)*(t-r)},zoom:function(t){var e,r,n=this._closestElement(this._scales,t),o=this._scales.indexOf(n);return n?t===n?o:(r=o+1,void 0===(e=this._scales[r])?o:(t-n)/(e-n)+o):0},distance:RQ().CRS.Earth.distance,R:RQ().CRS.Earth.R,_closestElement:function(t,e){for(var r,n=t.length;n--;)t[n]<=e&&(void 0===r||r<t[n])&&(r=t[n]);return r},_proj4ScalesToResolutions:function(t){var e=[];if(!t)return e;for(var r=0;r<t.length;r++)e[r]=1/t[r];return e},_toProj4Scales:function(t,e){var r=[];if(!t)return r;for(var n=0;n<t.length;n++){var o=this.projection?this._getMeterPerMapUnit(this.projection.getUnits()):1;r[n]=1/(.0254/((e||96)*t[n])/o)}return r},_getMeterPerMapUnit:function(t){var e=1;return"meter"===t?e=1:"degrees"===t||"degree"===t?e=2*Math.PI*6378137/360:"kilometer"===t?e=.001:"inch"===t?e=1/.025399999918:"feet"===t&&(e=.3048),e},_getDefaultProj4ScalesByBounds:function(t){if(!t)return[];for(var e=t.getSize(),r=Math.max(e.x,e.y)/256,n=[],o=0;o<23;o++)n[o]=Math.pow(2,o)/r;return n}}),_0=function(t,e){return new w0(t,e)},O0={Prefix:"Leaflet with <span>© <a href='https://iclient.supermap.io' title='SuperMap iClient' target='_blank'>SuperMap iClient</a></span>",Common:{attribution:"Map Data <span>© <a href='http://support.supermap.com.cn/product/iServer.aspx' title='SuperMap iServer' target='_blank'>SuperMap iServer</a></span>"},Online:{attribution:"Map Data <span>© <a href='https://www.supermapol.com' title='SuperMap Online' target='_blank'>SuperMap Online</a></span>"},ECharts:{attribution:"© 2018 百度 ECharts"},MapV:{attribution:"© 2018 百度 MapV "},Turf:{attribution:"<span>© <a href='https://turfjs.org/' title='turfjs' target='_blank'>turfjs</a></span>"},Baidu:{attribution:"Map Data © 2018 Baidu - GS(2016)2089号 - Data © 长地万方"},Cloud:{attribution:"Map Data ©2014 SuperMap - GS(2014)6070号-data©Navinfo"},Tianditu:{attribution:"Map Data <a href='https://www.tianditu.gov.cn' target='_blank'><img style='background-color:transparent;bottom:2px;opacity:1;' src='https://api.tianditu.gov.cn/img/map/logo.png' width='53px' height='22px' opacity='0'></a>"}};RQ().Control.Attribution.include({options:{position:"bottomright",prefix:O0.Prefix}}),RQ().Map.include({latLngToAccurateContainerPoint:function(t){var e=this.project(RQ().latLng(t))._subtract(this.getPixelOrigin());return RQ().point(e).add(this._getMapPanePos())}}),[RQ().Polyline,RQ().Polygon,RQ().Marker,RQ().CircleMarker,RQ().Circle,RQ().LayerGroup].map(function(t){return t.defaultFunction=t.prototype.toGeoJSON,t.include({toGeoJSON:function(e){return t.defaultFunction.call(this,e||RQ().toGeoJSONPrecision||15)}}),t});var E0=RQ().Evented.extend({options:{url:null,proxy:null,withCredentials:!1,crossOrigin:null},initialize:function(t,e){t&&(t=t.indexOf("/")!==t.length-1?t:t.substr(0,t.length-1)),this.url=t,RQ().setOptions(this,e),this.fire("initialized",this)},destroy:function(){this.fire("destroy",this)}}),P0=E0.extend({options:{projection:null},initialize:function(t,e){e=e||{},RQ().setOptions(this,e),e.projection&&(this.options.projection=e.projection),E0.prototype.initialize.call(this,t,e)},getMapInfo:function(t){var e=this;return new DO(e.url,{proxy:e.options.proxy,withCredentials:e.options.withCredentials,crossOrigin:e.options.crossOrigin,headers:e.options.headers,projection:e.options.projection}).processAsync(t)},getWKT:function(t){var e=this;return new DO(Tt.urlPathAppend(e.url,"prjCoordSys.wkt"),{proxy:e.options.proxy,withCredentials:e.options.withCredentials,withoutFormatSuffix:!0,crossOrigin:e.options.crossOrigin,headers:e.options.headers,projection:e.options.projection}).processAsync(t)},getTilesets:function(t){var e=this;return new vN(e.url,{proxy:e.options.proxy,withCredentials:e.options.withCredentials,crossOrigin:e.options.crossOrigin,headers:e.options.headers}).processAsync(t)}}),x0=RQ().Control.extend({options:{layer:null,position:"topleft",title:"switch tile version",tooltip:"top",collapsed:!0,nextText:"+",lastText:"-",ico:"V",orientation:"horizontal",switch:!0},onAdd:function(){"vertical"!==this.options.orientation&&(this.options.orientation="horizontal");var t=this._initLayout();return this.options.layer&&this.setLayer(this.options.layer),t},setContent:function(t){var e=RQ().Util.extend({},t);this.setVersionName(e.desc).setToolTip(e.desc)},setVersionName:function(t){var e=t;return t||(e=this.getValue()),this._sliderValue.innerHTML=e,this},setToolTip:function(t){return this.tooltip.innerHTML=t,this},updateLength:function(t){t>0&&(this.length=t,this.max=this.length-1,this.slider.setAttribute("max",this.max))},setLayer:function(t){t&&(this.options.layer=t);var e=this,r=e.options.layer;r.on("tilesetsinfoloaded",function(t){var r=t&&t.tileVersions;e.update(r)}),r.on("tileversionschanged",function(t){var r=t&&t.tileVersion;e.setContent(r)}),e.getTileSetsInfo()},update:function(t){this.tileVersions=t||[],this.updateLength(this.tileVersions.length)},getTileSetsInfo:function(){var t=this;t.options.layer&&new P0(t.options.layer._url).getTilesets(function(e){t.options.layer.setTileSetsInfo(e.result)})},removeLayer:function(){this.options.layer=null},nextTilesVersion:function(){return this.firstLoad?(this.options.layer.nextTilesVersion(),this.firstLoad=!1,this):parseInt(this.slider.value)>this.max-1?this:(this.slider.value=parseInt(this.slider.value)+1,this.options.layer.nextTilesVersion(),this)},lastTilesVersion:function(){return parseInt(this.slider.value)<this.min+1?this:(this.slider.value=parseInt(this.slider.value)-1,this.options.layer.lastTilesVersion(),this)},tilesVersion:function(t){for(var e=this.options.layer,r=this.tileVersions,n=r.length,o=0;o<n;o++)if(r[o].name==t){e.updateCurrentTileSetsIndex(o),e.changeTilesVersion();break}},getValue:function(){return this.slider.value},getVersion:function(){var t=this.tileVersions[this.getValue()];return t&&t.name},_initLayout:function(){var t="leaflet-control-ctv";this._container=RQ().DomUtil.create("div",t+" "+t+"-"+this.options.orientation),this._sliderBtn=RQ().DomUtil.create("a",t+"-toggle",this._container),this._sliderBtn.setAttribute("title",this.options.title),this._sliderBtn.innerHTML=this.options.ico,this._sliderValue=RQ().DomUtil.create("p",t+"-value",this._container),this._sliderValue.innerHTML=this.options.ico;return this._sliderContent=RQ().DomUtil.create("div","leaflet-ctv-slider-main  tooltip",this._container),this.tooltip=RQ().DomUtil.create("span","tooltip-text  tooltip-"+this.options.tooltip,this._sliderContent),this.tooltip.innerHTML=this.options.ico,this.options.switch&&(this._next=RQ().DomUtil.create("a","leaflet-ctv-slider-incdec leaflet-ctv-slider-next",this._sliderContent),this._next.innerHTML=this.options.nextText,RQ().DomEvent.on(this._next,"click",this.nextTilesVersion,this),RQ().DomUtil.addClass(this._container,t+"-incdec")),this._sliderContainer=RQ().DomUtil.create("div","leaflet-ctv-slider-container",this._sliderContent),this.slider=RQ().DomUtil.create("input","leaflet-ctv-slider",this._sliderContainer),this.min=null==this.min||isNaN(this.min)?0:parseInt(this.min),this.slider.setAttribute("title",this.options.title),this.slider.setAttribute("id","slider"),this.slider.setAttribute("type","range"),this.slider.setAttribute("min",this.min),this.slider.setAttribute("max",0),this.slider.setAttribute("step",1),this.slider.setAttribute("value",0),this.firstLoad=!0,"oninput"in this.slider||"onchange"in this.slider?RQ().DomEvent.on(this.slider,"change",this._tilesVersion,this):this.slider.onpropertychange=this._tilesVersion,this.options.switch&&(this._last=RQ().DomUtil.create("a","leaflet-ctv-slider-incdec leaflet-ctv-slider-last",this._sliderContent),this._last.innerHTML=this.options.lastText,RQ().DomEvent.on(this._last,"click",this.lastTilesVersion,this)),"vertical"===this.options.orientation?(this.slider.style.width="170px",this._sliderContainer.style.height="170px"):this._sliderContainer.style.width="150px",RQ().DomEvent.disableClickPropagation(this._container),this.options.collapsed?(RQ().Browser.android||RQ().DomEvent.on(this._container,"mouseenter",this._expand,this).on(this._container,"mouseleave",this._collapse,this),RQ().Browser.touch?RQ().DomEvent.on(this._sliderBtn,"click",RQ().DomEvent.stop).on(this._sliderBtn,"click",this._expand,this):RQ().DomEvent.on(this._sliderBtn,"focus",this._expand,this)):this._expand(),this._container},_expand:function(){RQ().DomUtil.addClass(this._container,"leaflet-control-ctv-expanded")},_collapse:function(){RQ().DomUtil.removeClass(this._container,"leaflet-control-ctv-expanded")},_tilesVersion:function(){var t=this.getVersion();this.tilesVersion(t)}});RQ().Map.mergeOptions({changeTileVersionControl:!1}),RQ().Map.addInitHook(function(){this.options.changeTileVersionControl&&(this.changeTileVersionControl=new x0,this.addControl(this.changeTileVersionControl))});var T0=RQ().Control.extend({options:{position:"bottomright",imageUrl:null,link:null,width:null,height:null,alt:"SuperMap iClient"},onAdd:function(){var t=RQ().DomUtil.create("div","iclient-leaflet-logo");t.style.marginTop=0,t.style.marginBottom=0,t.style.marginLeft=0,t.style.marginRight=0;var e="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAF4AAAAdCAYAAAAjHtusAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA4ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDY3IDc5LjE1Nzc0NywgMjAxNS8wMy8zMC0yMzo0MDo0MiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDozYWZlOGIwMi01MWE3LTRiZjYtYWVkYS05MGQ2ZTQ4YjZiMmUiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6ODg0NkFBQUE3RjEzMTFFNzhFRjJFQkY4RjcxQjc1NjIiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6ODg0NkFBQTk3RjEzMTFFNzhFRjJFQkY4RjcxQjc1NjIiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUgKE1hY2ludG9zaCkiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo4MWI3NzdhNC1lZmEyLTQ1MzUtOGQzNi03MmRjNDkyODMzN2UiIHN0UmVmOmRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDpjYTYzODVjMi1jNDQ1LTExN2EtYTc0ZC1lM2I5MzJlMGE4Y2QiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5q1HM0AAAF/ElEQVR42tSabYhUVRjHZ7W01C1uaCRW4F3oi9SXCUnwQ9gsGUFvOEtQH1bLu5VS9sbYh5KicjYt29qiGQwVg2xWWKgocob91AvC+CWsoJqB3qHMSdTMpZyeU/+Df07n3pk7997Z6cBv99z7nHvOvf/z/pxJNZvNVI/jCKXmv6EquAmVkxPSlvtp2GItr0/96fFQForChJAWDiVYTkMYMu4XBFcYjLOwWS3sNwmn8NGzZ0h4Flv/zwIdchAnh/slCGmmKUNIBzYPaXOUr0vPuEjD71JAPh7l61embzinhV3V8nnCGmGT8LwlzSL8/yUh4Tfjo9T/CgnCIYNKycA2Qq21AcHU/VHE80Idoo3Qs0W6p0UtUnkZvEMDeVcCyqxEafF7hL8Qf0oYsIj+lfC9cH1CwhchWAGCtZO+AooQOkdC1Km1VtCb63StW73uFSzgKFUkNwBbmZGGmqowhvg8ZNpH9oXChcIcYRdeNomgxLkaH+S1SGubAxyIpFv+Zp+0DYjrAS00j/dem2VGEl6FJ4Qa4quEu8j2hTCJ+GJhe4JjfQMf6JCYPPbysMPxBlp0BUKOogEF9Rg9/heNvNKYfM0KsZUZaYxX4STGrzJa+zbhPeFH2DcK10KItcI+pI0rVElwXl1ULaKnIJhDw0oRQpTQc1zcbwRU8ATy4DR6yMlTzwkqMziEWHvubJ4Nk4ZtHdnqwvwY17xq3Z4FjrG+z2Kdrdf2ZSGD+xlLPh6t1R0jP9fI22ZzKI92yvQl7EbmBxI4S7Y+vIAOL87QZqsc5uNnssxZIcfYjXT9snCR7jjobidp+FkxA2v+Cq1QervMDmp4P7Xs3YZtE9kOC3P/By6JGaETl8ElwueYTNTDq4UDsKnd7YfCNbT239LF1udS72xYJt1UWxNfN4IIP4bWuTpEja01JtMFZFsm/AHbtHBlDE6yasA4moYTrUbvdBTXHqUrAH4uSadbyzF+vbBM2IsNkS3MNa5305JxqfA02T4TnkX8XOH1mPw8ruVejpxbI9hZD2Cz1U7LdrrUvjP/WfZinNZhr6V27hP+FPZh9aLvLxVO4DllX0G2OcKnlO/DCblxaz6uXBtmi+8mBaP3/SP8IuEIiTRoPPQm2TaEmEyXo0JU+F0YiPFD0hhOsiE/vqeEVwyTgF8L51OilcIZ2I4Ll5NttvAJPfukUeB2sk0ZPSbKIUUJpCII7+DasWy08uhNNazT0wGHI7mAtB7KqMKm38HhDdAUibTVKGicbB8YAqrJ9DRsp43JdB4qUof1HQrPE6XTQWu3Ce/inVzjXhXpMiTwUYugNVQ+p80jrUsV5EH0POKeuXO9QjhFq5GryNYvfEMCDhsftYVsB9ETtG0V9ZjfhCURhbcJFpfwVZ9jvhxsLHwTYtp2svlWQw3vXL8UnqHVSIG8l8ex+tHhBXgjddgqHEZ8ufAA2aaEnYgrF/KrPXrEmMUqZ9THLW06xhoBaVueQpkug+ewOUphE3Qv2Q5gGamXYa+QbVq4O+DQ5FHyZqrjxNt7UHh9uuRa0F7HjCF8o9PCTOGnscM7g2u1Hl9C9oeEnxC/1ajZg8JLiM9Hj9GHJseMShwL2DO0G5yEWn3Zh1QUods5CPkIoqlwAZxhXMsb6HrcEPBxchhdJ6wj29vCW4hfLOzo8J3rltYX50nXQAATSf/K4DEaGlTLvplsk/QCpoD60EQ7gLYZc8H9wq+I3yncEOEcNhuz6HWf3XEiwU/4Y8YEqVp2P10rt+8REvBGw026i4aDcbL9jF8r8Blmf4fCOzhViiscskygXRdehf3CO4hfigmTBXyQrl8TFtD1IzQX3CbcQrY3hPcRv4z8OmHPXwchVNln2MmE7BX6VwIFi/he6uxvb6JM3m0fdqvx/ATidxg2JeC7VDErAw5NzGfvwRJVheEIQ8Mg/pdwIM+UOmi9Q8ivCsrIy0tF+wVbEcLrd3Pb2XisEb4Tdlhsi4WP4RBbaLGrHfC3PrvMIezy9rTpGm5lz9LOMG15xvFxD/j5gjzjjDbMOzk+9zzt3v5bgAEAibzFeFHVgYkAAAAASUVORK5CYII=";this.options.imageUrl&&(e=this.options.imageUrl);var r=this.options.alt,n="94px",o="29px",i="width:"+n+";height:"+o+";";this.options.imageUrl&&(i="width:"+(n=this.options.width)+";height:"+(o=this.options.height)+";",n&&o||(i=""));var a=this.options.link,s="<img src="+e+" alt='"+r+"' style='border: none;"+i+"margin-right:5px;margin-bottom:2px;white-space: nowrap'>";return t.innerHTML=a?"<a href='"+a+"' target='_blank' style='border: none;display: block;'>"+s+"</a>":s,t}});RQ().Map.mergeOptions({logoControl:!0}),RQ().Map.addInitHook(function(){!this._logoAdded&&this.options.logoControl&&(!0===this.options.logoControl?this.logoControl=new T0:this.options.logoControl instanceof RQ().Control&&(this.logoControl=this.options.logoControl),this.logoControl&&(this.addControl(this.logoControl),this._logoAdded=!0))});for(var C0,k0=function(t){return"[object Array]"==Object.prototype.toString.call(t)},A0={toSuperMapBounds:function(t){return t&&-1!==["FeatureCollection","Feature"].indexOf(t.type)&&(t=RQ().geoJSON(t).getBounds()),t instanceof RQ().LatLngBounds?new Dt(t.getSouthWest().lng,t.getSouthWest().lat,t.getNorthEast().lng,t.getNorthEast().lat):t instanceof RQ().Bounds?new Dt(t.min.x,t.min.y,t.max.x,t.max.y):t instanceof Dt?t:k0(t)?new Dt(t[0],t[1],t[2],t[3]):new Dt},isArray:k0,toProcessingParam:function(t){var e={};if(t.length<1)e="";else{for(var r=[],n=0;n<t.length;n++){var o={};o.x=t[n][0],o.y=t[n][1],r.push(o)}e.type="REGION",e.points=r}return e}},j0=RQ().extend({},RQ().CRS.EPSG3857,{code:"Baidu",scale:function(t){return 6378137*Math.PI*2/Math.pow(2,18-t)},transformation:(C0=.5/(6378137*Math.PI),new(RQ().Transformation)(C0,0,-C0,0))}),N0=[],I0=1;I0<19;I0++)N0.push(1.40625/Math.pow(2,I0));for(var M0=_0("EPSG:4326",{origin:[-180,90],resolutions:N0,bounds:RQ().bounds([-180,-90],[180,90]),wrapLng:[-180,180]}),R0=2*Math.PI*6378137,L0=R0/2,D0=[],B0=1;B0<19;B0++)D0.push(R0/256/Math.pow(2,B0));var F0=_0("EPSG:3857",{origin:[-L0,L0],resolutions:D0,bounds:RQ().bounds([-L0,-L0],[L0,L0]),wrapLng:[-180,180]}),U0=RQ().Class.extend({initialize:function(t){this.bounds=t},project:function(t){return new(RQ().Point)(t.lng,t.lat)},unproject:function(t){return new(RQ().LatLng)(t.y,t.x)}}),G0=function(t){return new U0(t)},V0=RQ().Class.extend({includes:RQ().CRS,initialize:function(t){t.origin&&(this.transformation=new(RQ().Transformation)(1,-t.origin.x,-1,t.origin.y)),this.projection=G0(t.bounds),this.bounds=t.bounds,this.origin=t.origin,this.resolutions=t.resolutions},scale:function(t){return this.resolutions&&0!==this.resolutions.length?this.resolutions[t]?1/this.resolutions[t]:1/this.resolutions[0]*Math.pow(2,t):1/(Math.max(this.bounds.getSize().x,this.bounds.getSize().y)/256)*Math.pow(2,t)},zoom:function(t){var e;if(!this.resolutions||0===this.resolutions.length)return e=1/(Math.max(this.bounds.getSize().x,this.bounds.getSize().y)/256),Math.log(t/e)/Math.LN2;var r=this.resolutions.indexOf(1/t);return r>-1?r:Math.log(t/(1/this.resolutions[0]))/Math.LN2},distance:function(t,e){var r=e.lng-t.lng,n=e.lat-t.lat;return Math.sqrt(r*r+n*n)},infinite:!1}),z0=function(t){return new V0(t)},H0=function(t){return t?-1!=["FeatureCollection","Feature","Geometry"].indexOf(t.type)||t.coordinates?t:t.toGeoJSON?t.toGeoJSON():t instanceof RQ().LatLngBounds?RQ().rectangle(t).toGeoJSON():t instanceof RQ().Bounds?RQ().rectangle([[t.getTopLeft().x,t.getTopLeft().y],[t.getBottomRight().x,t.getBottomRight().y]]).toGeoJSON():(new Ln).toGeoJSON(t):t},q0=function(t){if(!t)return t;var e,r=new Ln;if(-1!=["FeatureCollection","Feature","Geometry"].indexOf(t.type))e=r.read(t,t.type);else if("function"==typeof t.toGeoJSON){var n=t.toGeoJSON();e=n?r.read(n,n.type):t}var o=e||t;return RQ().Util.isArray(e)&&(1===e.length?o=e[0]:e.length>1&&(o=[],e.map(function(t){return o.push(t.geometry),t}))),o&&o.geometry?o.geometry:o},J0=HD,W0=function(t,e,r){var n=t*e*(1/.0254)*J0(r);return n=1/n},K0=function(t,e,r){var n=t*e*(1/.0254)*J0(r);return n=1/n},Y0=function(t){return t>1?1/t:t},Q0=function(t,e,r,n){return n=n||6378137,r=r||"",t>0&&e>0?(t=Y0(t),"degree"===r.toLowerCase()||"degrees"===r.toLowerCase()||"dd"===r.toLowerCase()?254/e/t/(2*Math.PI*n/360)/1e4:254/e/t/1e4):-1},X0=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:RQ().CRS.EPSG4326,r=arguments.length>2?arguments[2]:void 0,n=null,o=null;if(-1===["FeatureCollection","Feature","Geometry"].indexOf(t.type))if(t.toGeoJSON)t=t.toGeoJSON();else if(t instanceof RQ().LatLngBounds)t=RQ().rectangle(t).toGeoJSON();else{if(!(t instanceof RQ().Bounds))throw new Error("This tool only supports data conversion in geojson format or Vector Layers of Leaflet.");t=RQ().rectangle([[t.getTopLeft().x,t.getTopLeft().y],[t.getBottomRight().x,t.getBottomRight().y]]).toGeoJSON()}var i={point:function(t){return o(t)},multipoint:function(t){return i.linestring.apply(this,[t])},linestring:function(t){for(var e=[],r=null,n=0,o=t.length;n<o;++n){try{r=i.point.apply(this,[t[n]])}catch(t){throw t}e.push(r)}return e},multilinestring:function(t){return i.polygon.apply(this,[t])},polygon:function(t){for(var e,r=[],n=0,o=t.length;n<o;++n){try{e=i.linestring.apply(this,[t[n]])}catch(t){throw t}r.push(e)}return r},multipolygon:function(t){for(var e=[],r=null,n=0,o=t.length;n<o;++n){try{r=i.polygon.apply(this,[t[n]])}catch(t){throw t}e.push(r)}return e}};return function(t,e){if(n=t,o=e,"Feature"===t.type)n=a(t);else if("FeatureCollection"===t.type){for(var r=[],i=0;i<t.features.length;++i)try{r.push(a(t.features[i]))}catch(t){r=null}n.features=r}return n}(t,function(t){var n=e.unproject({x:t[0],y:t[1]}),o=r.project(n);return[o.x,o.y]});function a(t){var e=t.geometry;if(!Tt.isArray(e.coordinates))throw"Geometry must have coordinates array: "+e;if(!i[e.type.toLowerCase()])throw"Unsupported geometry type: "+e.type;try{e.coordinates=i[e.type.toLowerCase()].apply(this,[e.coordinates])}catch(t){throw t}return t.geometry=e,t}},Z0=RQ().TileLayer.extend({url:"https://maponline{num}.bdimg.com/onlinelabel/?qt=tile&x={x}&y={y}&z={z}&styles={styles}&udt=20150815&scaler=1",options:{minZoom:3,maxZoom:19,bounds:RQ().latLngBounds(RQ().latLng(-85.0511287798,-180),RQ().latLng(85.0511287798,180)),retina:RQ().Browser.retina,attribution:O0.Baidu.attribution},initialize:function(t,e){t&&(this.url=t),RQ().setOptions(this,e),this.options.retina&&(this.options.maxZoom=18),RQ().stamp(this)},getTileUrl:function(t){var e=RQ().Util.template(this.url,{num:Math.abs((t.x+t.y)%4),x:t.x,y:-t.y-1,z:this._getZoomForUrl(),styles:this.options.retina?"ph":"pl"});return this.options.tileProxy&&(e=this.options.tileProxy+encodeURIComponent(e)),e}}),$0=function(t,e){return new Z0(t,e)},t1=RQ().TileLayer.extend({defaultURL:"http://t2.dituhui.com/FileService/image",options:{mapName:"quanguo",type:"web",minZoom:3,maxZoom:18,attribution:O0.Cloud.attribution},initialize:function(t,e){RQ().setOptions(this,e);var r=t||this.defaultURL;this._url=r+"?map="+this.options.mapName+"&type="+this.options.type,RQ().stamp(this)},getTileUrl:function(t){var e=this._url+"&x="+t.x+"&y="+t.y+"&z="+t.z;return this.options.tileProxy&&(e=this.options.tileProxy+encodeURIComponent(e)),e}}),e1=function(t,e){return new t1(t,e)},r1=MQ.Layer.extend({options:{layersID:null,redirect:!1,transparent:!0,cacheEnabled:!0,clipRegionEnabled:!1,clipRegion:null,prjCoordSys:null,overlapDisplayed:!1,overlapDisplayedOptions:null,opacity:1,alt:"",pane:"tilePane",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:"",attribution:O0.Common.attribution,updateInterval:150,tileProxy:null,format:"png"},initialize:function(t,e){this._url=t,MQ.Util.setOptions(this,e)},onAdd:function(t){this.update=MQ.Util.throttle(this.update,this.options.updateInterval,this),t.on("moveend",this.update,this),this._currentImage&&this._currentImage._bounds.equals(this._map.getBounds())?t.addLayer(this._currentImage):this._currentImage&&(this._map.removeLayer(this._currentImage),this._currentImage=null),this.update()},onRemove:function(){this._currentImage&&this._map.removeLayer(this._currentImage),this._map.off("moveend",this.update,this)},bringToFront:function(){return this.options.position="front",this._currentImage&&this._currentImage.bringToFront(),this},bringToBack:function(){return this.options.position="back",this._currentImage&&this._currentImage.bringToBack(),this},getOpacity:function(){return this.options.opacity},setOpacity:function(t){return this.options.opacity=t,this._currentImage&&this._currentImage.setOpacity(t),this},getImageUrl:function(t){var e=Tt.urlPathAppend(this._url,"image.".concat(this.options.format)),r=e+MQ.Util.getParamString(Object.assign({},this._initAllRequestParams(),t),e);return r=yo.appendCredential(r),this.options.tileProxy&&(r=this.options.tileProxy+encodeURIComponent(r)),this.options.cacheEnabled||(r+="&_t="+(new Date).getTime()),r},_getImageParams:function(t){var e=this._calculateImageSize(t);return{viewBounds:this._compriseBounds(this._calculateBounds(t)),width:e.x,height:e.y}},_initAllRequestParams:function(){var t=this.options||{},e={},r=!0===t.redirect&&t.redirect;e.redirect=r;var n=!0===t.transparent&&t.transparent;e.transparent=n;var o=!1!==t.cacheEnabled||t.cacheEnabled;return e.cacheEnabled=o,t.prjCoordSys&&(e.prjCoordSys=JSON.stringify(t.prjCoordSys)),t.layersID&&(e.layersID=t.layersID),t.rasterfunction&&(e.rasterfunction=JSON.stringify(t.rasterfunction)),t.clipRegionEnabled&&t.clipRegion&&(e.clipRegionEnabled=t.clipRegionEnabled,e.clipRegion=JSON.stringify(Xr.fromGeometry(q0(t.clipRegion)))),!1===t.overlapDisplayed?(e.overlapDisplayed=!1,t.overlapDisplayedOptions&&(e.overlapDisplayedOptions=this.overlapDisplayedOptions.toString())):e.overlapDisplayed=!0,e},_requestImage:function(t,e){var r=this.getImageUrl(t);this._loadImage(r,e)},_loadImage:function(t,e){if(this._map){var r=new MQ.ImageOverlay(t,e,{opacity:0,alt:this.options.alt,zIndex:this.options.zIndex,className:this.options.className,errorOverlayUrl:this.options.error,crossOrigin:this.options.crossOrigin,pane:this.options.pane||this.getPane(),interactive:this.options.interactive}).addTo(this._map),n=function(t){r.off("error",o,this);var n=this._map;if(n){var i=t.target,a=this._currentImage;i._bounds&&i._bounds.equals(e)&&i._bounds.equals(n.getBounds())?(this._currentImage=i,"front"===this.options.position&&this.bringToFront(),"back"===this.options.position&&this.bringToBack(),this._currentImage._map&&this._currentImage.setOpacity(this.options.opacity),a&&n.removeLayer(a),a&&a._map&&a._map.removeLayer(a)):n.removeLayer(i),this.fire("load",{bounds:e})}},o=function(){this._map.removeLayer(r),this.fire("error"),r.off("load",n,this)};r.once("load",n,this),r.once("error",o,this),this.fire("loading",{bounds:e})}},update:function(){if(this._map){var t=this._map.getZoom(),e=this._map.getBounds();if(t>(this._map.options.maxZoom||18)||t<(this._map.options.minZoom||0))this._currentImage&&(this._currentImage._map.removeLayer(this._currentImage),this._currentImage=null);else{var r=this._getImageParams(e);r?this._requestImage(r,e):this._currentImage&&(this._currentImage._map.removeLayer(this._currentImage),this._currentImage=null)}}},_calculateBounds:function(t){var e=this._map.options.crs.project(t.getNorthEast()),r=this._map.options.crs.project(t.getSouthWest());return RQ().bounds(e,r)},_compriseBounds:function(t){var e={leftBottom:{x:t.getBottomLeft().x,y:t.getTopRight().y},rightTop:{x:t.getTopRight().x,y:t.getBottomLeft().y}};return JSON.stringify(e)},_calculateImageSize:function(t){return new(RQ().Bounds)(this._map.latLngToLayerPoint(t.getNorthWest()),this._map.latLngToLayerPoint(t.getSouthEast())).getSize()}}),n1=RQ().TileLayer.extend({options:{version:"1.0.0",style:"",tilematrixSet:"",format:"image/png",tileSize:256,matrixIds:null,layer:"",requestEncoding:"KVP",attribution:"",noWrap:!0},initialize:function(t,e){this._url=t,RQ().setOptions(this,e);var r=this.options;if("REST"===r.requestEncoding){this.formatSuffix="."+({"image/png":"png","image/png8":"png","image/png24":"png","image/png32":"png",png:"png","image/jpeg":"jpg","image/jpg":"jpg",jpeg:"jpg",jpg:"jpg"}[r.format]||r.format.split("/").pop()||"png")}else r.requestEncoding="KVP"},getTileUrl:function(t){var e=this._getZoomForUrl(),r=this.options.matrixIds?this.options.matrixIds[e].identifier:e,n=this._url.indexOf("?"),o=n>-1?this._url.substring(0,this._url.indexOf("?")):this._url,i=n>-1?this._url.substring(this._url.indexOf("?")):"";o=RQ().Util.template(o,{s:this._getSubdomain(t)});var a={service:"WMTS",request:"GetTile",version:this.options.version,style:this.options.style,tilematrixSet:this.options.tilematrixSet,format:this.options.format,width:this.options.tileSize,height:this.options.tileSize,layer:this.options.layer,tilematrix:r,tilerow:t.y,tilecol:t.x};if(this.options.tileProxy&&(o=this.options.tileProxy+o),"KVP"===this.options.requestEncoding)o+=RQ().Util.getParamString(a,o);else if("REST"===this.options.requestEncoding){o+="/"+a.layer+"/"+a.style+"/"+a.tilematrixSet+"/"+a.tilematrix+"/"+a.tilerow+"/"+a.tilecol+this.formatSuffix}return o=Tt.urlAppend(o,i),o=yo.appendCredential(o)}}),o1=function(t,e){return new n1(t,e)},i1=n1.extend({layerLabelMap:{vec:"cva",ter:"cta",img:"cia"},layerZoomMap:{vec:18,ter:14,img:18},options:{layerType:"vec",isLabel:!1,attribution:O0.Tianditu.attribution,url:"https://t{s}.tianditu.gov.cn/{layer}_{proj}/wmts?",zoomOffset:1,key:"",dpi:96,style:"default",format:"tiles",subdomains:[0,1,2,3,4,5,6,7],bounds:[[-90,-180],[90,180]],noWrap:!0},initialize:function(t){t=t||{},RQ().setOptions(this,t),this.options.layer=this.options.isLabel?this.layerLabelMap[this.options.layerType]:this.options.layerType,this.options.maxZoom=this.layerZoomMap[this.options.layerType]-1,n1.prototype.initialize.call(this,this.options.url,this.options),RQ().stamp(this),this.options.key&&(this._url="".concat(this._url,"tk=").concat(this.options.key))},onAdd:function(t){this.options.tilematrixSet="EPSG:4326"===t.options.crs.code?"c":"w",this._url=this._url.replace("{layer}",this.options.layer).replace("{proj}",this.options.tilematrixSet),n1.prototype.onAdd.call(this,t)},_isValidTile:function(t){var e=this._map.options.crs;if(!e.infinite){var r=this._globalTileRange;if((!e.wrapLng||this.options.noWrap)&&(t.x<r.min.x||t.x>r.max.x)||!e.wrapLat&&(t.y<r.min.y||t.y>r.max.y))return!1}if(!this.options.bounds)return!0;var n=this._tileCoordsToBounds(t);return RQ().latLngBounds(this.options.bounds).overlaps(n)}}),a1=RQ().TileLayer.extend({options:{layersID:null,redirect:!1,transparent:!0,cacheEnabled:!0,clipRegionEnabled:!1,clipRegion:null,prjCoordSys:null,overlapDisplayed:!1,overlapDisplayedOptions:null,tileversion:null,crs:null,format:"png",tileProxy:null,attribution:O0.Common.attribution,subdomains:null},initialize:function(t,e){this._url=t,RQ().TileLayer.prototype.initialize.apply(this,arguments),RQ().setOptions(this,e),RQ().stamp(this),this.tileSetsIndex=-1,this.tempIndex=-1},onAdd:function(t){this._crs=this.options.crs||t.options.crs,RQ().TileLayer.prototype.onAdd.call(this,t)},getTileUrl:function(t){var e=this.getScaleFromCoords(t),r=this._getLayerUrl()+"&scale="+e+"&x="+t.x+"&y="+t.y;return this.options.tileProxy&&(r=this.options.tileProxy+encodeURIComponent(r)),this.options.cacheEnabled||(r+="&_t="+(new Date).getTime()),this.options.subdomains&&(r=RQ().Util.template(r,{s:this._getSubdomain(t)})),r},getScale:function(t){var e=t||this._map.getZoom();return this.scales[e]},getScaleFromCoords:function(t){var e,r=this;return r.scales&&r.scales[t.z]?r.scales[t.z]:(r.scales=r.scales||{},e=r.getDefaultScale(t),r.scales[t.z]=e,e)},getDefaultScale:function(t){var e=this._crs;if(e.scales)return e.scales[t.z];var r=this._tileCoordsToBounds(t),n=e.project(r.getNorthEast()),o=e.project(r.getSouthWest()),i=this.options.tileSize,a=Math.max(Math.abs(n.x-o.x)/i,Math.abs(n.y-o.y)/i),s=c.METER;if(e.code){var u=e.code.split(":");if(u&&u.length>1){var l=parseInt(u[1]);s=l&&l>=4e3&&l<=5e3?c.DEGREE:c.METER}}return W0(a,96,s)},setTileSetsInfo:function(t){this.tileSets=t,RQ().Util.isArray(this.tileSets)&&(this.tileSets=this.tileSets[0]),this.tileSets&&(this.fire("tilesetsinfoloaded",{tileVersions:this.tileSets.tileVersions}),this.changeTilesVersion())},lastTilesVersion:function(){this.tempIndex=this.tileSetsIndex-1,this.changeTilesVersion()},nextTilesVersion:function(){this.tempIndex=this.tileSetsIndex+1,this.changeTilesVersion()},changeTilesVersion:function(){var t=this;if(null!=t.tileSets&&!(t.tempIndex===t.tileSetsIndex||this.tempIndex<0)){var e=t.tileSets.tileVersions;if(e&&t.tempIndex<e.length&&t.tempIndex>=0){var r=e[t.tempIndex].name;t.mergeTileVersionParam(r)&&(t.tileSetsIndex=t.tempIndex,t.fire("tileversionschanged",{tileVersion:e[t.tempIndex]}))}}},updateCurrentTileSetsIndex:function(t){this.tempIndex=t},mergeTileVersionParam:function(t){return!!t&&(this.requestParams.tileversion=t,this._paramsChanged=!0,this.redraw(),this._paramsChanged=!1,!0)},updateParams:function(t){Object.assign(this.requestParams,t),this._paramsChanged=!0,this.redraw(),this._paramsChanged=!1},_getLayerUrl:function(){return this._paramsChanged&&(this._layerUrl=this._createLayerUrl()),this._layerUrl||this._createLayerUrl()},_createLayerUrl:function(){var t=Tt.urlPathAppend(this._url,"tileImage.".concat(this.options.format));return this.requestParams=this.requestParams||this._getAllRequestParams(),t=Tt.urlAppend(t,Tt.getParameterString(this.requestParams)),t=yo.appendCredential(t),this._layerUrl=t,t},_getAllRequestParams:function(){var t=this.options||{},e={},r=this.options.tileSize;r instanceof RQ().Point||(r=RQ().point(r,r)),e.width=r.x,e.height=r.y,e.redirect=!0===t.redirect,e.transparent=!0===t.transparent,e.cacheEnabled=!(!1===t.cacheEnabled),t.prjCoordSys&&(e.prjCoordSys=JSON.stringify(t.prjCoordSys)),t.layersID&&(e.layersID=t.layersID.toString()),t.clipRegionEnabled&&t.clipRegion&&(t.clipRegion=Xr.fromGeometry(q0(t.clipRegion)),e.clipRegionEnabled=t.clipRegionEnabled,e.clipRegion=JSON.stringify(t.clipRegion));var n=this._crs;if(n.options&&n.options.origin)e.origin=JSON.stringify({x:n.options.origin[0],y:n.options.origin[1]});else if(n.projection&&n.projection.bounds){var o=n.projection.bounds,i=RQ().point(o.min.x,o.max.y);e.origin=JSON.stringify({x:i.x,y:i.y})}return!1===t.overlapDisplayed?(e.overlapDisplayed=!1,t.overlapDisplayedOptions&&(e.overlapDisplayedOptions=t.overlapDisplayedOptions)):e.overlapDisplayed=!0,!0===e.cacheEnabled&&t.tileversion&&(e.tileversion=t.tileversion.toString()),t.rasterfunction&&(e.rasterfunction=JSON.stringify(t.rasterfunction)),t.chartSetting&&(e.chartSetting=JSON.stringify(t.chartSetting)),e}}),s1=function(t,e){return new a1(t,e)},u1=r(3871),l1=r.n(u1),c1={TEXT:{fontSize:"14px",fontFamily:"Arial Unicode MS Regular,Microsoft YaHei",textAlign:"left",color:"rgba(255,255,255,0)",fillColor:"rgba(80,80,80,1)",weight:1,globalAlpha:1},POINT:{fillColor:"#ffcc00",color:"#cc3333",weight:1,radius:3,opacity:1},LINE:{color:"rgba(0,0,0,0)",weight:1,lineCap:"butt",lineJoin:"round",dashOffset:0,dashArray:[],opacity:1},REGION:{color:"rgba(0,0,0,0)",fillColor:"rgba(0,0,0,0)",weight:1,lineCap:"butt",lineJoin:"round",dashOffset:0,opacity:1,fillOpacity:1,dashArray:[]}},f1={TEXT:{"text-size":"fontSize","text-face-name":"fontFamily","text-align":"textAlign","text-name":"textName","text-weight":"fontWeight","text-halo-color":"color","text-fill":"fillColor","text-comp-op":"globalCompositeOperation"},POINT:{"point-file":"iconUrl","point-fill":"fillColor","point-radius":"radius","point-halo-color":"color","point-comp-op":"globalCompositeOperation"},LINE:{"line-color":"color","line-width":"weight","line-cap":"lineCap","line-join":"lineJoin","line-dash-offset":"dashOffset","line-opacity":"opacity","line-dasharray":"dashArray","line-comp-op":"globalCompositeOperation"},REGION:{"line-color":"color","line-width":"weight","line-cap":"lineCap","line-join":"lineJoin","line-dash-offset":"dashOffset","line-opacity":"opacity","line-dasharray":"dashArray","polygon-fill":"fillColor","polygon-opacity":"fillOpacity","polygon-comp-op":"globalCompositeOperation"}},p1={lineWidth:{leafletStyle:"weight",type:"number",unit:"mm",defaultValue:.1},fillForeColor:{leafletStyle:"fillColor",type:"color",defaultValue:"rgba(0,0,0,0)"},foreColor:{leafletStyle:"color",type:"color",defaultValue:"rgba(0,0,0,0)"},markerSize:{leafletStyle:"markerSize",type:"number",unit:"mm",defaultValue:2.4},lineColor:{leafletStyle:"color",type:"color",defaultValue:"#000000"}},h1={clear:"",src:"",dst:"","src-over":"source-over","dst-over":"destination-over","src-in":"source-in","dst-in":"destination-in","src-out":"source-out","dst-out":"destination-out","src-atop":"source-atop","dst-atop":"destination-atop",xor:"xor",plus:"lighter",minus:"",multiply:"",screen:"",overlay:"",darken:"",lighten:"lighter","color-dodge":"","color-burn":"","hard-light":"","soft-light":"",difference:"",exclusion:"",contrast:"",invert:"","invert-rgb":"","grain-merge":"","grain-extract":"",hue:"",saturation:"",color:"",value:""};function y1(t){"@babel/helpers - typeof";return(y1="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function d1(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,v1(n.key),n)}}function v1(t){var e=function(t,e){if("object"!=y1(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=y1(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==y1(e)?e:e+""}var m1=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.cartoCSS=null,this.mapUrl=e},(e=[{key:"pretreatedCartoCSS",value:function(t,e){e&&(t=this.processCharacters(t)),this.cartoCSS=this.cartoCSS||{};var r=new dB(t).getShaders();if(r)for(var n=0;n<r.length;n++){var o=r[n].elements[0],i=r[n].attachment;this.cartoCSS[o.clean]=this.cartoCSS[o.clean]||{},this.cartoCSS[o.clean][i]=this.cartoCSS[o.clean][i]||[],this.cartoCSS[o.clean][i].push(r[n])}}},{key:"processCharacters",value:function(t){var e=t;if(e){e=(e=e.replace(/[@]/gi,"___")).replace(/\\#/gi,"#");var r={};return this.layersInfo&&Object.keys(this.layersInfo).sort().forEach(function(t){for(var n=t.replace(/[@#\s]/gi,"___"),o=t,i=Object.keys(r),a=i.length;a>-1;a--)if(t.indexOf(i[a])>-1){o=t.replace(i[a],r[i[a]]);break}o=o.replace(/[#]/gi,"#"),r[t]=n,e=e.replace(new RegExp(o,"g"),n)}),e=(e=e.replace(/[#]/gi,"\n#")).replace(/\[zoom/gi,"[scale")}}},{key:"pickShader",value:function(t){if(!this.cartoCSS)return null;var e=t.replace(/[@#\s]/gi,"___");return this.cartoCSS[e]}},{key:"getDefaultStyle",value:function(t){var e={},r=c1[t];for(var n in r){var o=r[n];e[n]=o}return e}},{key:"getStyleFromiPortalMarker",value:function(t){return 0==t.indexOf("./")?null:RQ().icon({iconUrl:t,iconSize:RQ().point(48,43),iconAnchor:RQ().point(24,43),popupAnchor:RQ().point(0,-43)})}},{key:"getStyleFromiPortalStyle",value:function(t,e,r){var n=r?JSON.parse(r):null,o={};if("Point"===e||"MultiPoint"===e){var i=n||t.pointStyle;return i.externalGraphic?0==i.externalGraphic.indexOf("./")?null:RQ().icon({iconUrl:i.externalGraphic,iconSize:RQ().point(i.graphicWidth,i.graphicHeight),iconAnchor:RQ().point(-i.graphicXOffset,-i.graphicYOffset),popupAnchor:RQ().point(0,-i.graphicHeight)}):(o.radius=i.pointRadius,o.color=i.strokeColor,o.opacity=i.strokeOpacity,o.lineCap=i.strokeLineCap,o.weight=i.strokeWidth,o.fillColor=i.fillColor,o.fillOpacity=i.fillOpacity,o.dashArray=this.dashStyle(i,1),o)}if("LineString"===e||"MultiLineString"===e||"Box"===e){var a=n||t.lineStyle;return o.color=a.strokeColor,o.opacity=a.strokeOpacity,o.fillOpacity=a.fillOpacity,o.lineCap=a.strokeLineCap,o.weight=a.strokeWidth,o.dashArray=this.dashStyle(a,1),o}if("Polygon"===e||"MultiPolygon"===e){var s=n||t.polygonStyle;return o.color=s.strokeColor,o.opacity=s.strokeOpacity,o.lineCap=s.strokeLineCap,o.weight=s.strokeWidth,o.fillColor=s.fillColor,o.fillOpacity=s.fillOpacity,o.dashArray=this.dashStyle(s,1),o}}},{key:"dashStyle",value:function(t,e){if(!t)return[];var r=t.strokeWidth*e,n=t.strokeDashstyle;switch(n){case"solid":return[];case"dot":return[1,4*r];case"dash":return[4*r,4*r];case"dashdot":return[4*r,4*r,1,4*r];case"longdash":return[8*r,4*r];case"longdashdot":return[8*r,4*r,1,4*r];default:return n?Tt.isArray(n)?n:(n=at.trim(n).replace(/\s+/g,",")).replace(/\[|\]/gi,"").split(","):[]}}},{key:"getValidStyleFromCarto",value:function(t,e,r,n,o){if(!r)return null;var i=n.type,a=n.properties.attributes||{},s=this.getDefaultStyle(i);o=void 0===o||o,a.FEATUREID=n.properties.id,a.SCALE=e;for(var u,l,c=f1[i],f=0,p=r.length;f<p;f++){var h=r[f],y=c[h.property],d=h.getValue(a,t,!0);if(null!==d&&y)if("fontSize"===y)o&&(d*=.8),u=d+"px",s.fontSize=u;else if("fontName"===y)l=d,s.fontName=l;else{if("globalCompositeOperation"===y){if(!(d=h1[d]))continue}else if(o&&"iconUrl"===y){d=(d=this.mapUrl+"/tileFeature/symbols/"+d.replace(/(___)/gi,"@")).replace(/(__0__0__)/gi,"__8__8__"),s.iconUrl=d;continue}"weight"===y&&d<1&&(d=Math.ceil(d)),s[y]=d}}return s}},{key:"getValidStyleFromLayerInfo",value:function(t,e){var r=t.type,n=this.getDefaultStyle(r),o=e&&e.layerStyle;if(!o)return n;if("POINT"===r){var i=Math.ceil(96*o.markerSize*Ct.mm)||8,a={transparent:!0,resourceType:"SYMBOLMARKER",picWidth:i,picHeight:i,style:JSON.stringify(o)};return n.iconUrl=Tt.urlAppend(this.mapUrl+"/symbol.png",Tt.getParameterString(a)),n.iconSize=[i,i],n}if("TEXT"===r){if(o=t.properties.textStyle||e.layerStyle,n.fontWeight=o.bold?o.fontWeight:"normal",o.fontHeight){var s=96*o.fontHeight*Ct.mm*.85;n.fontSize=s+"px",n.textHeight=s}if(o.fontName&&(n.fontFamily=o.fontName.indexOf("@")?o.fontName.replace(/@/g,""):o.fontName),o.align){var u=o.align.replace(/TOP|MIDDLE|BASELINE|BOTTOM/,"");n.textAlign=u.toLowerCase()}return n.weight=o.outline?o.outlineWidth:0,o.backColor&&(n.color="rgba("+o.backColor.red+","+o.backColor.green+","+o.backColor.blue+",1)"),o.foreColor&&(n.fillColor="rgba("+o.foreColor.red+","+o.foreColor.green+","+o.foreColor.blue+",1)"),n.rotation=o.rotation||0,n}var l=o.fillSymbolID>7?0:o.fillSymbolID,c=o.lineSymbolID>5?0:o.lineSymbolID;for(var f in o){var p=p1[f];if(p){var h=p.leafletStyle;switch(p.type){case"number":var y=o[f];p.unit&&(y=96*y*Ct[p.unit]*2.5),n[h]=y;break;case"color":var d=o[f],v=void 0,m=1;if("fillColor"===h)0!==l&&1!==l||(m=1-l,v="rgba("+d.red+","+d.green+","+d.blue+","+m+")");else if("color"===h){if(0===c||5===c)m=0===c?1:0;else{var b=[1,0];switch(c){case 1:b=[9.7,3.7];break;case 2:b=[3.7,3.7];break;case 3:b=[9.7,3.7,2.3,3.7];break;case 4:b=[9.7,3.7,2.3,3.7,2.3,3.7]}n.lineDasharray=b}v="rgba("+d.red+","+d.green+","+d.blue+","+m+")"}n[h]=v}}}return e.textField&&(n.textAlign="LEFT"),n}}])&&d1(t.prototype,e),r&&d1(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}(),b1=RQ().Class.extend({initialize:function(t){var e=(t=t||{}).latLng||t._latLng;this._latLng=RQ().latLng(e.lat,e.lng),this._style=t.style||t._canvas,this.attributes=t.attributes,this.id=t.id?t.id:null},getId:function(){return this.id},setId:function(t){this.id=t},setLatLng:function(t){this._latLng=t},setCanvas:function(t){this._style=t},setAttributes:function(t){this.attributes=t},getLatLng:function(){return this._latLng},getCanvas:function(){return this._style},getAttributes:function(){return this.attributes},setStyle:function(t){this._style=t},getStyle:function(){return this._style}}),g1=RQ().Class.extend({initialize:function(t,e){this.geometry=t,this.attributes=e},toFeature:function(){var t=this.geometry;if(t.toGeoJSON){var e=t.toGeoJSON();return e.properties=this.attributes,(new Ln).read(e)[0]}if(3===t.length)t=new ke(t[1],t[0],t[2]);else if(2===t.length)t=new he(t[0],t[1]);else if(t instanceof RQ().LatLng)t=new he(t.lng,t.lat);else if(t instanceof RQ().Point)t=new he(t.x,t.y);else if(t instanceof RQ().CircleMarker){var r=t.getLatLng();t=new he(r.lng,r.lat)}return new mn(t,this.attributes)},reverseLatLngs:function(t){RQ().Util.isArray(t)||(t=[t]);for(var e=0;e<t.length;e++)t[e]=[t[e].lng,t[e].lat];return t}}),S1=RQ().Layer.extend({options:{alwaysMapCRS:!1,id:Tt.createUniqueID("themeLayer_"),opacity:1,TFEvents:[],attribution:O0.Common.attribution},initialize:function(t,e){RQ().Util.setOptions(this,e),this.name=t,this.features=[],this.TFEvents=this.options.TFEvents,this.levelRenderer=new LH,this.movingOffset=[0,0]},getEvents:function(){var t={zoomend:this._reset,moveend:this._reset,resize:this._resize};return this._map._zoomAnimated&&(t.zoomanim=this._zoomAnim),t},onRemove:function(t){RQ().DomUtil.remove(this.container),t.off("mousemove",this.mouseMoveHandler)},onAdd:function(t){var e=this;if(e.map=e._map=t,e._initContainer(),e.levelRenderer){var r=t.getSize();e.container.style.width=r.x+"px",e.container.style.height=r.y+"px",e._updateOpacity(),e.renderer=e.levelRenderer.init(e.container),e.renderer.clear(),e.features&&e.features.length>0&&e._reset(),e.addTFEvents(),e.mouseMoveHandler=function(t){var r=t.layerPoint;e.currentMousePosition=RQ().point(r.x+e.movingOffset[0],r.y+e.movingOffset[1])},t.on("mousemove",e.mouseMoveHandler),e.update(t.getBounds())}else t.removeLayer(e)},addFeatures:function(t){},redrawThematicFeatures:function(t){},destroyFeatures:function(t){if(void 0===t&&(t=this.features),t){this.removeFeatures(t),Array.isArray(t)||(t=[t]);for(var e=t.length-1;e>=0;e--)t[e].destroy()}},removeFeatures:function(t){var e=this;if(t){if(t===e.features)return e.removeAllFeatures();RQ().Util.isArray(t)||"function"==typeof t||(t=[t]);for(var r=[],n=0;n<e.features.length;n++){var o=e.features[n];if(t&&"function"==typeof t)t(o)&&e.features.splice(n--,1);else-1===RQ().Util.indexOf(t,o)?r.push(o):e.features.splice(n--,1)}for(var i=[],a=0,s=e.features.length;a<s;a++)o=e.features[a],i.push(o);e.features=[],e.addFeatures(i),e.renderer&&(e._map?e.redrawThematicFeatures(e._map.getBounds()):e.redrawThematicFeatures());var u=0==r.length;e.fire("featuresremoved",{features:r,succeed:u})}},removeAllFeatures:function(){this.renderer&&this.renderer.clear(),this.features=[],this.fire("featuresremoved",{features:[],succeed:!0})},getFeatures:function(t){for(var e=this.features.length,r=[],n=0;n<e;++n)(!t||t&&"function"==typeof t&&t(this.features[n]))&&r.push(this.features[n]);return r},getFeatureBy:function(t,e){var r=null;for(var n in this.features)if(this.features[n][t]===e){r=this.features[n];break}return r},getFeatureById:function(t){return this.getFeatureBy("id",t)},getFeaturesByAttribute:function(t,e){var r,n=[];for(var o in this.features)(r=this.features[o])&&r.attributes&&r.attributes[t]===e&&n.push(r);return n},update:function(t){var e=this._map.containerPointToLayerPoint([0,0]);RQ().DomUtil.setPosition(this.container,e);var r=this;r.renderer&&r.redrawThematicFeatures(t),r.currentMousePosition&&(r.currentMousePosition=RQ().point(r.currentMousePosition.x-r.movingOffset[0],r.currentMousePosition.y-r.movingOffset[1])),r.movingOffset=[0,0],r._zoom=r._map.getZoom(),r._center=r._map.getCenter()},setOpacity:function(t){t!==this.options.opacity&&(isNaN(t)||(this.options.opacity=t,this._updateOpacity()))},redraw:function(){var t=this;return!!t.renderer&&(t._map?t.redrawThematicFeatures(t._map.getBounds()):t.redrawThematicFeatures(),!0)},on:function(t,e,r){return this.renderer?this.renderer.on(t,e):RQ().Layer.prototype.on.call(this,t,e),this},off:function(t,e,r){return this.renderer?this.renderer.un(t,e):RQ().Layer.prototype.off.call(this,t,e),this},fire:function(t,e,r){return this.renderer&&this.renderer.trigger(t,e),RQ().Layer.prototype.fire.call(this,t,e,r),this},addTFEvents:function(){for(var t=this.TFEvents,e=t.length,r=0;r<e;r++)this.renderer.on(t[r][0],t[r][1])},getLocalXY:function(t){if(!this._map)return t;var e=t;RQ().Util.isArray(t)&&(e=RQ().point(t[0],t[1])),t instanceof RQ().Point||(e=t instanceof he||t instanceof ke?RQ().point(t.x,t.y):RQ().point(t.lon,t.lat));var r=this._map.latLngToAccurateContainerPoint(this.options.alwaysMapCRS?this._map.options.crs.unproject(e):RQ().latLng(e.y,e.x));return[r.x,r.y]},toiClientFeature:function(t){Tt.isArray(t)||(t=[t]);for(var e=[],r=0;r<t.length;r++)if(t[r]instanceof g1)e.push(t[r].toFeature());else if(t[r]instanceof mn)e.push(t[r]);else if(-1!=["FeatureCollection","Feature","Geometry"].indexOf(t[r].type)){var n=new Ln;e=e.concat(n.read(t[r]))}else{if(!t[r].geometry||!t[r].geometry.parts)throw new Error("features[".concat(r,"]'s type is not be supported."));e.push(NC.fromJson(t[r]).toFeature())}return e},toFeature:function(t){return this.toiClientFeature(t)},_initContainer:function(){var t=this.getPane(),e="themeLayer leaflet-layer leaflet-zoom-"+(this._map.options.zoomAnimation&&RQ().Browser.any3d?"animated":"hide");this.container=RQ().DomUtil.create("div",e,t);var r=RQ().DomUtil.testProp(["transformOrigin","WebkitTransformOrigin","msTransformOrigin"]);this.container.id=this.options.id,this.container.style[r]="50% 50%",this.container.style.position="absolute",this.container.style.zIndex=200},_zoomAnim:function(t){var e=this._map.getZoomScale(t.zoom),r=this._map._getCenterOffset(t.center)._multiplyBy(-e).subtract(this._map._getMapPanePos());RQ().DomUtil.setTransform?RQ().DomUtil.setTransform(this.container,r,e):this.container.style[RQ().DomUtil.TRANSFORM]=RQ().DomUtil.getTranslateString(r)+" scale("+e+")"},_updateOpacity:function(){var t=this;Tt.modifyDOMElement(t.container,null,null,null,null,null,null,t.options.opacity),null!==t._map&&t._map.fire("changelayer",{layer:t,property:"opacity"})},_reset:function(){var t=this,e=t._map.getBounds();t.update(e);var r=t._map.getSize(),n=this._map.containerPointToLayerPoint([0,0]);RQ().DomUtil.setPosition(this.container,n),parseFloat(t.container.width)!==parseFloat(r.x)&&(t.container.width=r.x+"px"),parseFloat(t.container.height)!==parseFloat(r.y)&&(t.container.height=r.y+"px"),t.redraw()},_resize:function(){var t=this._map.getSize();this.container.style.width=t.x+"px",this.container.style.height=t.y+"px",this.renderer.resize()}}),w1=S1.extend({options:{nodesClipPixel:2,isHoverAble:!1,isMultiHover:!1,isClickAble:!0,isAllowFeatureStyle:!1},initialize:function(t,e){S1.prototype.initialize.call(this,t,e),RQ().Util.setOptions(this,e);this.cache={},this.cacheFields=[],this.style={},this.highlightStyle={}},addFeatures:function(t){var e=this;e.fire("beforefeaturesadded",{features:t}),this.features=this.toiClientFeature(t),e.isCustomSetMaxCacheCount||(e.maxCacheCount=5*e.features.length),e.renderer&&(e._map?e.redrawThematicFeatures(e._map.getBounds()):e.redrawThematicFeatures())},removeFeatures:function(t){this.clearCache(),S1.prototype.removeFeatures.call(this,t)},removeAllFeatures:function(){this.clearCache(),S1.prototype.removeAllFeatures.call(this,arguments)},redrawThematicFeatures:function(t){var e=this,r=e.renderer.getHoverOne(),n=null;if(r&&r.refDataID&&(n=r.refDataID),this.options.alwaysMapCRS&&t&&t instanceof RQ().LatLngBounds){var o=this._map.options.crs;t=RQ().bounds(o.project(t.getSouthWest()),o.project(t.getNorthEast()))}t=A0.toSuperMapBounds(t),e.renderer.clearAll();for(var i=e.features,a=e.cache,s=e.cacheFields,u=e._map.getZoom(),l=e.maxCacheCount,c=0,f=i.length;c<f;c++){var p=i[c],h=p.geometry.getBounds();if(!t||t.intersectsBounds(h)){var y=p.id+"_zoom_"+u.toString();if(a[y])a[y].updateAndAddShapes();else{var d=e.createThematicFeature(i[c]);if(!(d.getShapesCount()<1)&&(a[y]=d,s.push(y),s.length>l)){var v=s[0];s.splice(0,1),delete a[v]}}}}if(e.renderer.render(),n&&e.options.isHoverAble&&e.options.isMultiHover){var m=this.getShapesByFeatureID(n);this.renderer.updateHoverShapes(m)}},createThematicFeature:function(t){var e=this,r=e.getStyleByData(t);t.style&&e.isAllowFeatureStyle&&(r=Tt.copyAttributesWithClip(t.style));var n={};n.nodesClipPixel=e.options.nodesClipPixel,n.isHoverAble=e.options.isHoverAble,n.isMultiHover=e.options.isMultiHover,n.isClickAble=e.options.isClickAble,n.highlightStyle=oV.transformStyle(e.highlightStyle);for(var o=new Rz(t,e,oV.transformStyle(r),n),i=0;i<o.shapes.length;i++)e.renderer.addShape(o.shapes[i]);return o},redraw:function(){return this.clearCache(),S1.prototype.redraw.apply(this,arguments)},clearCache:function(){this.cache={},this.cacheFields=[]},clear:function(){this.renderer.clearAll(),this.renderer.refresh(),this.removeAllFeatures(),this.clearCache()},getCacheCount:function(){return this.cacheFields.length},setMaxCacheCount:function(t){isNaN(t)||(this.maxCacheCount=t,this.isCustomSetMaxCacheCount=!0)},getShapesByFeatureID:function(t){var e=[],r=this.renderer.getAllShapes();if(!t)return r;for(var n=0,o=r.length;n<o;n++){var i=r[n];i.refDataID&&t===i.refDataID&&e.push(i)}return e}}),_1=w1.extend({initialize:function(t,e){w1.prototype.initialize.call(this,t,e),this.style=[],this.themeField=null,this.styleGroups=[]},getStyleByData:function(t){var e=this,r=t,n=Tt.copyAttributesWithClip({},e.style),o=e.styleGroups,i=!1,a=null,s=e.styleGroups&&e.styleGroups.length>0;if(e.themeField&&s&&r.attributes){var u=e.themeField,l=r.attributes;for(var c in l)if(u===c){i=!0,a=l[c];break}}if(i)for(var f=0,p=o.length;f<p;f++)if(a.toString()===o[f].value.toString()){var h=o[f].style;n=Tt.copyAttributesWithClip(n,h)}return n}}),O1=w1.extend({initialize:function(t,e){w1.prototype.initialize.call(this,t,e),this.style=[],this.themeField=null,this.styleGroups=[]},getStyleByData:function(t){var e=this,r=t,n=Tt.copyAttributesWithClip({},e.style),o=e.styleGroups,i=!1,a=null,s=e.styleGroups&&e.styleGroups.length>0;if(e.themeField&&s&&r.attributes){var u=e.themeField,l=r.attributes;for(var c in l)if(u===c){i=!0,a=l[c];break}}if(i)for(var f=0,p=o.length;f<p;f++){if(f===p-1?a>=o[f].start&&a<=o[f].end:a>=o[f].start&&a<o[f].end){var h=o[f].style;n=Tt.copyAttributesWithClip(n,h)}}return n}}),E1=w1.extend({options:{isOverLay:!0,isAvoid:!0},initialize:function(t,e){w1.prototype.initialize.call(this,t,e),RQ().Util.setOptions(this,e),this.style=[],this.themeField=null,this.styleGroups=[],this.defaultStyle={fontColor:"#000000",fontOpacity:1,fontSize:"12px",fontStyle:"normal",fontWeight:"normal",labelAlign:"cm",labelXOffset:0,labelYOffset:0,labelRotation:0,fill:!1,fillColor:"#ee9900",fillOpacity:.4,stroke:!1,strokeColor:"#ee9900",strokeOpacity:1,strokeWidth:1,strokeLinecap:"round",strokeDashstyle:"solid",labelRect:!0,labelSelect:!0,_isGeoTextStrategyStyle:!0},this.getPxBoundsMode=0,this.labelFeatures=[]},onAdd:function(t){w1.prototype.onAdd.call(this,t),this.container.style.zIndex=200},redrawThematicFeatures:function(t){if(this.features.length>0&&0==this.labelFeatures.length)for(var e=this.setLabelsStyle(this.features),r=0,n=e.length;r<n;r++)this.labelFeatures.push(e[r]);this.features=this.getDrawnLabels(this.labelFeatures),w1.prototype.redrawThematicFeatures.call(this,t)},removeFeatures:function(t){this.labelFeatures=[],w1.prototype.removeFeatures.call(this,t)},removeAllFeatures:function(){this.labelFeatures=[],w1.prototype.removeAllFeatures.call(this,arguments)},getDrawnLabels:function(t){for(var e,r,n,o,i=[],a=[],s={labelAlign:"cm",labelXOffset:0,labelYOffset:0},u=this._map,l=u.getSize(),c=u.getZoom(),f=0,p=t.length;f<p;f++){((r=t[f]).isStyleChange||void 0===r.isStyleChange)&&(r=this.setStyle(r));var h=this.getLabelPxLocation(r);if(h.x>=0&&h.x<=l.x&&h.y>=0&&h.y<=l.y){if(r.style.minZoomLevel>-1&&c<=r.style.minZoomLevel)continue;if(r.style.maxZoomLevel>-1&&c>r.style.maxZoomLevel)continue;var y=null;r.isStyleChange?(r.isStyleChange=null,y=this.calculateLabelBounds(r,h)):y=r.geometry.bsInfo.w&&r.geometry.bsInfo.h?this.calculateLabelBounds2(r,h):this.calculateLabelBounds(r,h);var d=new Dt(0,l.y,l.x,0),v=y.length;if(this.options.isAvoid){var m=this.getAvoidInfo(d,y);if(m){if("left"===m.aspectW){r.style.labelXOffset+=m.offsetX;for(var b=0;b<v;b++)y[b].x+=m.offsetX}else if("right"===m.aspectW){r.style.labelXOffset+=-m.offsetX;for(var g=0;g<v;g++)y[g].x+=-m.offsetX}if("top"===m.aspectH){r.style.labelYOffset+=m.offsetY;for(var S=0;S<v;S++)y[S].y+=m.offsetY}else if("bottom"===m.aspectH){r.style.labelYOffset+=-m.offsetY;for(var w=0;w<v;w++)y[w].y+=-m.offsetY}r.isStyleChange=!0}}if(this.options.isOverLay){var _=!1;if(0!=f)for(var O=0;O<a.length;O++)if(this.isQuadrilateralOverLap(y,a[O])){_=!0;break}if(_)continue;a.push(y)}for(var E=[],P=0;P<v-1;P++)E.push(u.containerPointToLatLng(y[P]));var x=E[3],T=E[1],C=new Dt(x.lng,x.lat,T.lng,T.lat).getCenterLonLat(),k=new ke(C.lon,C.lat,r.attributes[this.themeField]);k.calculateBounds(),n=Tt.cloneObject(r.style),o=Tt.cloneObject(Tt.copyAttributes(n,s)),(e=new mn(k,r.attributes,o)).id=r.id,e.fid=r.fid,i.push(e)}}return i},getStyleByData:function(t){var e=t;if(e.style=Tt.copyAttributes(e.style,this.defaultStyle),this.style&&this.style.fontSize&&parseFloat(this.style.fontSize)<12&&(this.style.fontSize="12px"),e.style=Tt.copyAttributes(e.style,this.style),this.themeField&&this.styleGroups&&e.attributes){var r=this.themeField,n=e.attributes,o=this.styleGroups,i=!1,a=null;for(var s in n)if(r===s){i=!0,a=n[s];break}if(i)for(var u=0,l=o.length;u<l;u++)if(a>=o[u].start&&a<o[u].end){var c=o[u].style;c&&c.fontSize&&parseFloat(c.fontSize)<12&&(c.fontSize="12px"),e.style=Tt.copyAttributes(e.style,c)}e.style.label=e.attributes[this.themeField]}return e.style},setLabelsStyle:function(t){for(var e,r=[],n=0,o=t.length;n<o;n++){var i=t[n];if("SuperMap.Geometry.GeoText"!==i.geometry.CLASS_NAME)return t;(i.geometry.bsInfo.w||i.geometry.bsInfo.h)&&(i.geometry.bsInfo.w=null,i.geometry.bsInfo.h=null,i.geometry.labelWTmp=null),(e=this.setStyle(i)).layer=this.layer,r.push(e)}return r},setStyle:function(t){var e=t;if(e.style=Tt.copyAttributes(e.style,this.defaultStyle),this.style&&this.style.fontSize&&parseFloat(this.style.fontSize)<12&&(this.style.fontSize="12px"),e.style=Tt.copyAttributes(e.style,this.style),this.groupField&&this.styleGroups&&e.attributes){var r=this.groupField,n=e.attributes,o=this.styleGroups,i=!1,a=null;for(var s in n)if(r===s){i=!0,a=n[s];break}if(i)for(var u=0,l=o.length;u<l;u++)if(a>=o[u].start&&a<o[u].end){var c=o[u].style;c&&c.fontSize&&parseFloat(c.fontSize)<12&&(c.fontSize="12px"),e.style=Tt.copyAttributes(e.style,c)}}return e.style.label=e.geometry.text,e},getLabelPxLocation:function(t){var e=t.geometry,r=t.style,n=e.getCentroid(),o=this._map.latLngToContainerPoint(this.options.alwaysMapCRS?this._map.options.crs.unproject(RQ().point(n.x,n.y)):RQ().latLng(n.y,n.x)),i=RQ().point(o.x,o.y);if(r.labelXOffset||r.labelYOffset){var a=isNaN(r.labelXOffset)?0:r.labelXOffset,s=isNaN(r.labelYOffset)?0:r.labelYOffset,u=i.add(RQ().point(a,-s));return RQ().point(u.x,u.y)}return RQ().point(i.x,i.y)},calculateLabelBounds:function(t,e){var r=t.geometry,n=null,o=null;if(0==this.getPxBoundsMode)n=r.getLabelPxBoundsByText(e,t.style);else{if(1!==this.getPxBoundsMode)return null;o=this.getLabelInfo(t.geometry.getCentroid(),t.style),n=r.getLabelPxBoundsByLabel(e,o.w,o.h,t.style)}var i=[];return i=t.style.labelRotation%180==0?[{x:n.left,y:n.top},{x:n.right,y:n.top},{x:n.right,y:n.bottom},{x:n.left,y:n.bottom},{x:n.left,y:n.top}]:this.rotationBounds(n,e,t.style.labelRotation),r.bounds=new Dt(i[1].x,i[3].y,i[2].x,i[4].y),i},calculateLabelBounds2:function(t,e){var r,n,o,i,a,s=t.geometry.bsInfo,u=t.style,l=Tt.cloneObject(e);if(u.labelAlign&&"cm"!==u.labelAlign)switch(u.labelAlign){case"lt":l.x+=s.w/2,l.y+=s.h/2;break;case"lm":l.x+=s.w/2;break;case"lb":l.x+=s.w/2,l.y-=s.h/2;break;case"ct":l.y+=s.h/2;break;case"cb":l.y-=s.h/2;break;case"rt":l.x-=s.w/2,l.y+=s.h/2;break;case"rm":l.x-=s.w/2;break;case"rb":l.x-=s.w/2,l.y-=s.h/2}n=l.x-s.w/2,o=l.y+s.h/2,a=u.fontStyle&&"italic"===u.fontStyle?l.x+s.w/2+parseInt(parseFloat(u.fontSize)/2):l.x+s.w/2,i=l.y-s.h/2,r=new Dt(n,o,a,i);var c=[];return c=u.labelRotation%180==0?[{x:r.left,y:r.top},{x:r.right,y:r.top},{x:r.right,y:r.bottom},{x:r.left,y:r.bottom},{x:r.left,y:r.top}]:this.rotationBounds(r,e,u.labelRotation),t.geometry.bounds=new Dt(c[1].x,c[3].y,c[2].x,c[4].y),c},getLabelInfo:function(t,e){var r={l:"left",r:"right",t:"top",b:"bottom"},n={l:0,r:-1,t:0,b:-1};e=Tt.extend({fontColor:"#000000",labelAlign:"cm"},e);var o=this.getLocalXY(t),i=0;if(e.labelXOffset||e.labelYOffset){var a=isNaN(e.labelXOffset)?0:e.labelXOffset,s=isNaN(e.labelYOffset)?0:e.labelYOffset;o[0]+=a,o[1]-=s}var u=document.createElement("canvas");u.globalAlpha=0,u.lineWidth=1;var l=u.getContext("2d");l.fillStyle=e.fontColor,l.globalAlpha=e.fontOpacity||1;var c,f,p,h=[e.fontStyle?e.fontStyle:"normal","normal",e.fontWeight?e.fontWeight:"normal",e.fontSize?e.fontSize:"1em",e.fontFamily?e.fontFamily:"sans-serif"].join(" "),y=e.label.split("\n"),d=y.length;if(l.fillText){l.font=h,l.textAlign=r[e.labelAlign[0]]||"center",l.textBaseline=r[e.labelAlign[1]]||"middle",null==(c=n[e.labelAlign[1]])&&(c=-.5),f=l.measureText("Mg").height||l.measureText("xx").width,o[1]+=f*c*(d-1);for(var v=0;v<d;v++)i<(p=l.measureText(y[v]).width)&&(i=p)}else if(l.mozDrawText){l.mozTextStyle=h,null==(c=n[e.labelAlign[1]])&&(c=-.5),f=l.mozMeasureText("xx"),o[1]+=f*(1+c*d);for(var m=0;m<d;m++)i<(p=l.measureText(y[m]).width)&&(i=p)}var b={};return i?(b.w=i,b.h=e.fontSize,b.rows=y.length,b):null},rotationBounds:function(t,e,r){var n=RQ().point(t.left,t.top),o=RQ().point(t.right,t.top),i=RQ().point(t.right,t.bottom),a=RQ().point(t.left,t.bottom),s=[];s.push(this.getRotatedLocation(n.x,n.y,e.x,e.y,r)),s.push(this.getRotatedLocation(o.x,o.y,e.x,e.y,r)),s.push(this.getRotatedLocation(i.x,i.y,e.x,e.y,r)),s.push(this.getRotatedLocation(a.x,a.y,e.x,e.y,r));for(var u=[],l=0;l<s.length;l++)u.push({x:s[l].x,y:s[l].y});return u.push({x:s[0].x,y:s[0].y}),u},getRotatedLocation:function(t,e,r,n,o){var i,a,s={};return e=-e,n=-n,o=-o,i=(t-r)*Math.cos(o/180*Math.PI)-(e-n)*Math.sin(o/180*Math.PI)+r,a=(t-r)*Math.sin(o/180*Math.PI)+(e-n)*Math.cos(o/180*Math.PI)+n,s.x=i,s.y=-a,s},getAvoidInfo:function(t,e){if(5!==e.length)return null;for(var r=[{x:t.left,y:t.top},{x:t.right,y:t.top},{x:t.right,y:t.bottom},{x:t.left,y:t.bottom},{x:t.left,y:t.top}],n=!1,o=r.length,i=e.length,a=0,s=0,u="",l="",c=0;c<o-1;c++)for(var f=0;f<i-1;f++){"SuperMap.Geometry.Point"===Tt.lineIntersection(r[c],r[c+1],e[f],e[f+1]).CLASS_NAME&&(p(e[f]),p(e[f+1]),n=!0)}return n?{aspectW:l,aspectH:u,offsetX:a,offsetY:s}:null;function p(e){if(!t.contains(e.x,e.y)){if(e.y<t.top){var r=Math.abs(t.top-e.y);r>s&&(s=r,u="top")}if(e.y>t.bottom){var n=Math.abs(e.y-t.bottom);n>s&&(s=n,u="bottom")}if(e.x<t.left){var o=Math.abs(t.left-e.x);o>a&&(a=o,l="left")}if(e.x>t.right){var i=Math.abs(e.x-t.right);i>a&&(a=i,l="right")}}}},isQuadrilateralOverLap:function(t,e){var r=t.length,n=e.length;if(5!==r||5!==n)return null;for(var o=!1,i=0;i<r;i++)if(this.isPointInPoly(t[i],e)){o=!0;break}for(var a=0;a<n;a++)if(this.isPointInPoly(e[a],t)){o=!0;break}for(var s=0;s<r-1&&!o;s++)for(var u=0;u<n-1;u++){if("SuperMap.Geometry.Point"===Tt.lineIntersection(t[s],t[s+1],e[u],e[u+1]).CLASS_NAME){o=!0;break}}return o},isPointInPoly:function(t,e){for(var r=!1,n=-1,o=e.length,i=o-1;++n<o;i=n)(e[n].y<=t.y&&t.y<e[i].y||e[i].y<=t.y&&t.y<e[n].y)&&t.x<(e[i].x-e[n].x)*(t.y-e[n].y)/(e[i].y-e[n].y)+e[n].x&&(r=!r);return r}});function P1(t){"@babel/helpers - typeof";return(P1="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function x1(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function T1(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?x1(Object(r),!0).forEach(function(e){C1(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):x1(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function C1(t,e,r){return(e=A1(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function k1(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,A1(n.key),n)}}function A1(t){var e=function(t,e){if("object"!=P1(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=P1(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==P1(e)?e:e+""}var j1={id:nb,sql:gb,bounds:lm,buffer:Pm,geometry:Gm},N1=function(){return t=function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.url=e,this.options=r||{}},(e=[{key:"getFeaturesByIDs",value:function(t,e,r){var n=this;return new nb(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:r}).processAsync(t,e)}},{key:"getFeaturesByBounds",value:function(t,e,r){var n=this;return new lm(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(t,e)}},{key:"getFeaturesByBuffer",value:function(t,e,r){var n=this;return new Pm(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(t,e)}},{key:"getFeaturesBySQL",value:function(t,e,r){var n=this;return new gb(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(t,e)}},{key:"getFeaturesByGeometry",value:function(t,e,r){var n=this;return new Gm(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(t,e)}},{key:"editFeatures",value:function(t,e){if(t&&t.dataSourceName&&t.dataSetName){var r=this,n=r.url,o=t.dataSourceName,i=t.dataSetName;return n=Tt.urlPathAppend(n,"datasources/"+o+"/datasets/"+i),new Nf(n,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers}).processAsync(t,e)}}},{key:"getMetadata",value:function(t,e){var r=this,n=r.url,o=t.dataSourceName,i=t.dataSetName;return n=Tt.urlPathAppend(n,"datasources/"+o+"/datasets/"+i),new Nf(n,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers}).getMetaData(t,e)}},{key:"getFeatureAttachments",value:function(t,e){if(t&&t.dataSourceName&&t.dataSetName&&null!=!t.featureId){var r=this,n=r.url,o=t.dataSourceName,i=t.dataSetName;return n=Tt.urlPathAppend(n,"datasources/"+o+"/datasets/"+i),new Mh(n,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers}).getAttachments(t,e)}}},{key:"editFeatureAttachments",value:function(t,e){if(t&&t.dataSourceName&&t.dataSetName&&null!=!t.featureId&&t.editType){var r=this,n=r.url,o=t.dataSourceName,i=t.dataSetName;return n=Tt.urlPathAppend(n,"datasources/"+o+"/datasets/"+i),new Mh(n,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers}).processAsync(t,e)}}},{key:"getFeaturesCount",value:function(t,e){var r=this,n=T1(T1({},t),{},{returnCountOnly:!0,returnContent:!0,returnFeaturesOnly:!1}),o=Object.keys(j1).find(function(t){return n.CLASS_NAME.toLowerCase().includes(t)});return new j1[o](r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers}).processAsync(n,e)}},{key:"getFeaturesDatasetInfo",value:function(t,e){var r=this,n=T1(T1({},t),{},{returnDatasetInfoOnly:!0,returnContent:!0,returnFeaturesOnly:!1}),o=Object.keys(j1).find(function(t){return n.CLASS_NAME.toLowerCase().includes(t)});return new j1[o](r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers}).processAsync(n,e)}},{key:"_processFormat",value:function(t){return t||o.GEOJSON}}])&&k1(t.prototype,e),r&&k1(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}(),I1=E0.extend({initialize:function(t,e){E0.prototype.initialize.call(this,t,e),this._featureService=new N1(t,e)},getFeaturesByIDs:function(t,e,r){return t=this._processParams(t),this._featureService.getFeaturesByIDs(t,e,r)},getFeaturesByBounds:function(t,e,r){return t=this._processParams(t),this._featureService.getFeaturesByBounds(t,e,r)},getFeaturesByBuffer:function(t,e,r){return t=this._processParams(t),this._featureService.getFeaturesByBuffer(t,e,r)},getFeaturesBySQL:function(t,e,r){return t=this._processParams(t),this._featureService.getFeaturesBySQL(t,e,r)},getFeaturesByGeometry:function(t,e,r){return t=this._processParams(t),this._featureService.getFeaturesByGeometry(t,e,r)},editFeatures:function(t,e){if(t&&t.dataSourceName&&t.dataSetName){var r=this,n=r.url,o=t.dataSourceName,i=t.dataSetName;return n=Tt.urlPathAppend(n,"datasources/"+o+"/datasets/"+i),new Nf(n,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers}).processAsync(r._processParams(t),e)}},getMetadata:function(t,e){return this._featureService.getMetadata(t,e)},getFeatureAttachments:function(t,e){return this._featureService.getFeatureAttachments(t,e)},editFeatureAttachments:function(t,e){return this._featureService.editFeatureAttachments(t,e)},getFeaturesCount:function(t,e){return t=this._processParams(t),this._featureService.getFeaturesCount(t,e)},getFeaturesDatasetInfo:function(t,e){return t=this._processParams(t),this._featureService.getFeaturesDatasetInfo(t,e)},_processParams:function(t){if(!t)return{};t.returnContent=null==t.returnContent||t.returnContent,t.fromIndex=t.fromIndex?t.fromIndex:0,t.toIndex=t.toIndex?t.toIndex:-1,t.isUseBatch=null!=t.isUseBatch&&t.isUseBatch,t.bounds&&(t.bounds=A0.toSuperMapBounds(t.bounds)),t.geometry&&(t.geometry=q0(t.geometry)),t.editType&&(t.editType=t.editType.toLowerCase());var e=this;if(t.features){var r=[];RQ().Util.isArray(t.features)?t.features.map(function(t){return r.push(e._createServerFeature(t)),t}):r.push(e._createServerFeature(t.features)),t.features=r}return t},_createServerFeature:function(t){var e,r={},n=[],o=[];if(t.toServerFeature)return t.toServerFeature({geometryFunction:function(t){return q0(H0(t))}});for(var i in(e=t||{}).properties)n.push(i),o.push(e.properties[i]);return r.fieldNames=n,r.fieldValues=o,e.id&&(r.id=e.id),r.geometry=q0(e),r},_processFormat:function(t){return t||o.GEOJSON}}),M1=function(t,e){return new I1(t,e)},R1=RQ().Path.extend({options:{fontStyle:"normal",fontWeight:"normal",fontSize:"1em",fontFamily:"sans-serif",textAlign:"center",textBaseline:"middle",vfactor:-.5,labelRotation:0,globalAlpha:1,label:""},initialize:function(t,e){RQ().Util.setOptions(this,e),this._latlng=t},setLatLng:function(t){return this._latlng=t,this.redraw(),this.fire("move",{latlng:this._latlng})},getLatLng:function(){return this._latlng},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._clickTolerance(),e=[t,t];this._pxBounds=new(RQ().Bounds)(this._point.subtract(e),this._point.add(e))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateUnicode(this)},_containsPoint:function(t){return t.distanceTo(this._point)<=this._clickTolerance()}});RQ().Canvas.include({_updateUnicode:function(t){if(this._drawing){var e={x:t._point.x,y:t._point.y},r=this._ctx,n=[t.options.fontStyle,"normal",t.options.fontWeight,t.options.fontSize,t.options.fontFamily].join(" "),o=t.options.label.replace(/^&#x/,""),i=(o=String.fromCharCode(parseInt(o,16))).split("\n"),a=i.length;if(r.fillStyle=t.options.fontColor,r.globalAlpha=1,t.options.fontOpacity>=0&&t.options.fontOpacity<1&&(r.globalAlpha=t.options.fontOpacity),r.fillText){r.font=n,r.textAlign=t.options.textAlign,r.textBaseline=t.options.textBaseline;var s=t.options.vfactor,u=r.measureText("Mg").height||r.measureText("xx").width;e.y+=u*s*(a-1);for(var l=0;l<a;l++)0!=t.options.labelRotation?(r.save(),r.translate(e.x,e.y),r.rotate(t.options.labelRotation*Math.PI/180),r.fillText(i[l],0,u*l),r.restore()):r.fillText(i[l],e.x,e.y)}else if(r.mozDrawText){r.mozTextStyle=n;var c=t.options.textAlign,f=t.options.vfactor,p=r.mozMeasureText("xx");e.y+=p*(1+f*a);for(var h=0;h<a;h++){var y=e.x+c*r.mozMeasureText(i[h]),d=e.y+h*p;r.translate(y,d),r.mozDrawText(i[h]),r.translate(-y,-d)}}}}});var L1=RQ().LayerGroup.extend({options:{map:"map",server:"",featureLayerPopupEnable:!0,featureLayerPopup:null,credentialValue:null,credentialKey:"key",attribution:O0.Online.attribution},defaultFeatureLayerPopup:function(t){return t.feature.properties.attributes.title+":"+t.feature.properties.attributes.description},initialize:function(t,e){(t||e)&&(this._layers={},RQ().setOptions(this,e),this.id=t,this.load(),this.cartoCSSToLeaflet=new m1)},load:function(){this.options.server.indexOf("http://")<0&&this.options.server.indexOf("https://")<0&&(this.options.server="http://"+this.options.server);var t=this.options.server+"/web/maps/"+this.id+".json";this.options.credentialValue&&(t+="?"+this.options.credentialKey+"="+this.options.credentialValue);var e=this;co.get(t).then(function(t){return t.json()}).then(function(t){if(t){var r=t.layers;e.mapInfo=t,e.createLayersByJson(r)}})},addLayerWrapper:function(t,e,r){return e&&this.createMap(r),this.addLayer(t),t.labelLayer&&this.addLayer(t.labelLayer),this},createLayersByJson:function(t){if(RQ().Util.isArray(t)&&0!==t.length){this.layers=[];for(var e=[],r=0;r<t.length;r++){var n=t[r];n._originIndex=r,"BASE_LAYER"===(n.layerType=n.layerType||"BASE_LAYER")?(n.isBaseLayer=!0,this.createLayer(n.type,n)):e.unshift(n)}for(;e.length>0;){var o=e.pop(),i=o.type,a=o.layerType=o.layerType||"BASE_LAYER";"OVERLAY_LAYER"!==a&&(i=a),this.createLayer(i,o)}this.fire("maploaded",{map:this._map})}},createCRS:function(t,e,r,n,o){return t<0?new V0({bounds:o,origin:n,resolutions:r}):910112===t||910102===t?j0:(910111===t&&(t=3857),910101===t&&(t=4326),_0("EPSG:"+t,{origin:n,resolutions:r,bounds:o}))},createMap:function(t){var e=t.crs||RQ().CRS.EPSG3857,r=RQ().latLngBounds(e.unproject(t.bounds.min),e.unproject(t.bounds.max));this._map=RQ().map(this.options.map,{center:r.getCenter(),maxZoom:t.maxZoom||22,minZoom:t.minZoom||0,zoom:t.zoom||0,crs:e,renderer:RQ().canvas()}),e instanceof V0?this._map.setZoom(t.zoom?t.zoom+2:2,{maxZoom:t.maxZoom||22}):this._map.fitBounds(r,{maxZoom:t.maxZoom||22})},getResolutionsFromScales:function(t,e,r,n){for(var o=[],i=0;i<t.length;i++)o.push(Q0(t[i],e,r,n));return o},createLayer:function(t,e){var r=e.prjCoordSys,n=r&&r.epsgCode||this.mapInfo.epsgCode,o=this.mapInfo.center||e.center,i=this.mapInfo.level||e.level,a=this.mapInfo.extent||e.bounds,s=e.scales,u=e.isBaseLayer,l=e.opacity,c=RQ().bounds([a.leftBottom.x,a.leftBottom.y],[a.rightTop.x,a.rightTop.y]),f=e.bounds?RQ().bounds([e.bounds.leftBottom.x,e.bounds.leftBottom.y],[e.bounds.rightTop.x,e.bounds.rightTop.y]):c;o||(o=f.getCenter());var p,h=RQ().point(f.min.x,f.max.y),y=s?this.getResolutionsFromScales(s,96,e.units):null,d=this.createCRS(n,r?r.type:"",y,h,f),v={bounds:c,center:RQ().point(o.x,o.y),crs:d,zoom:i};switch(t){case"SUPERMAP_REST":p=s1(e.url,{transparent:!0,opacity:l});break;case"SUPERMAP_REST_VECTOR":break;case"TIANDITU_VEC":case"TIANDITU_IMG":case"TIANDITU_TER":v.crs=4326===n?M0:F0,v.minZoom=1,v.zoom=1+v.zoom,p=this.createTiandituLayer(e);break;case"BAIDU":v.crs=j0,v.zoom=3+v.zoom,v.minZoom=3,p=$0();break;case"BING":break;case"WMS":p=this.createWmsLayer(e);break;case"WMTS":v.resolutions=this.getResolutionsFromScales(s,90.71446714322,e.units);var m=e.identifier,b=m.substring(m.indexOf("_")+1);p=o1(e.url,{layer:b,style:"default",tilematrixSet:m,format:"image/png"});break;case"CLOUD":v.crs=RQ().CRS.EPSG3857,v.zoom=3+v.zoom,v.minZoom=3,p=e1(e.url,{opacity:l});break;case"MARKER_LAYER":p=this.createMarkersLayer(e,d);break;case"FEATURE_LAYER":"ANIMATORVECTOR"==e.identifier||(p="THEME"==e.identifier?this.createThemeLayer(e):this.createVectorLayer(e,d));break;default:throw new Error("unSupported Layer Type")}p&&e.isVisible&&this.addLayerWrapper(p,u,v)},createTiandituLayer:function(t){var e=t.type.split("_")[1].toLowerCase(),r="OVERLAY_LAYER"===t.layerType;return new i1({layerType:e,isLabel:r})},createMarkersLayer:function(t,e){var r=this,n=t.markers||[],o=RQ().geoJSON(H0(n),{pointToLayer:function(t,e){var r=new(RQ().Marker)(e);return r.setStyle=function(t){t&&r.setIcon(t)},r},coordsToLatLng:function(t){var r=e.unproject(RQ().point(t[0],t[1]));return new(RQ().LatLng)(r.lat,r.lng,t[2])},style:function(t){return r.cartoCSSToLeaflet.getStyleFromiPortalMarker(t.properties.icon)}});return this.options.featureLayerPopupEnable&&o.bindPopup(this.options.featureLayerPopup||this.defaultFeatureLayerPopup),o},createWmsLayer:function(t){var e=t.url,r=t.opacity,n=t.subLayers;return n&&"undefined"!==n&&"null"!==n||(n="0"),RQ().tileLayer.wms(e,{layers:n,format:"image/png",transparent:!0,noWrap:!0,opacity:r})},createVectorLayer:function(t,e){var r=this,n=t.style,i=t.opacity,a=this,s=function(t){var r=e.unproject(RQ().point(t[0],t[1]));return new(RQ().LatLng)(r.lat,r.lng,t[2])};if(!t.url){var u=RQ().geoJSON(H0(t.features),{pointToLayer:function(t,e){var r=new(RQ().Marker)(e);return r.setStyle=function(t){t&&r.setIcon(t)},r},coordsToLatLng:s,style:function(t){var e=a.cartoCSSToLeaflet.getStyleFromiPortalStyle(n||{},t.geometry.type,t.properties.style);return e&&e.dashArray&&0==e.dashArray.length&&(e.dashArray=null),e},opacity:i});return this.options.featureLayerPopupEnable&&u.bindPopup(this.options.featureLayerPopup||this.defaultFeatureLayerPopup),u}for(var l=t.url,c=t.name,f=t.features,p=0;p<f.length;p++){var h=f[p];h.visible&&this.getFeaturesBySQL(l,c,h.name,"",o.GEOJSON,function(t){var e=RQ().geoJSON(t.result,{pointToLayer:function(t,e){var r=new(RQ().Marker)(e);return r.setStyle=function(t){t&&r.setIcon(t)},r},coordsToLatLng:s,style:function(t){return this.cartoCSSToLeaflet.getStyleFromiPortalStyle(n||{},t.geometry.type,t.properties.style)},opacity:i});r.options.featureLayerPopupEnable&&e.bindPopup(a.options.featureLayerPopup||a.defaultFeatureLayerPopup),r.addLayer(e)})}},getFeaturesBySQL:function(t,e,r,n,o,i){var a=new fb({queryParameter:{name:r+"@"+e,attributeFilter:n=n||"SMID > 0"},datasetNames:[e+":"+r],fromIndex:0,toIndex:1e5});M1(t).getFeaturesBySQL(a,i,o)},createThemeLayer:function(t){var e,r=this,n=t.themeSettings&&JSON.parse(t.themeSettings),o=n.type;if(t.themeSettings=n,(e="HEAT"===o?this.createHeatLayer(t,n):"UNIQUE"===o?this.createUniqueLayer(t,n):"RANGE"===o?this.createRangeLayer(t,n):this.createBaseThemeLayer(t,n))&&(this.addFeature2ThemeLayer(t,e),e.on("add",function(t){r.registerThemeEvent(t.target)})),n&&n.labelField){var i=this.createLabelLayer(t,n);i.on("add",function(t){r.registerThemeEvent(t.target)}),e.labelLayer=i}return e},createBaseThemeLayer:function(t,e){var r=t.style,n=t.opacity,o=e.vectorType,i=r.pointStyle;i.fill="LINE"!==o;var a={};a.radius=i.pointRadius,a.color=i.strokeColor,a.opacity=i.strokeOpacity,a.lineCap=i.strokeLineCap,a.weight=i.strokeWidth,a.fillColor=i.fillColor,a.fillOpacity=i.fillOpacity;var s=function(t,e){return RQ().circleMarker(e,a)};return i.unicode&&(s=function(t,e){return new R1(e,i)}),RQ().geoJSON({type:"GeometryCollection",geometries:[]},{pointToLayer:s,opacity:n})},createUniqueLayer:function(t,e){for(var r=t.title,n=e.field,o=[],i=e.settings,a=t.isVisible,s=t.opacity,u=e.vectorType,l=0;l<i.length;l++){var c={};c.value=i[l].value,c.style=i[l].style,o.push(c)}var f=new _1(r,{opacity:s,visibility:a});this.registerThemeEvent(f),f.style=t.style.pointStyle,f.style.fill="LINE"!==u,f.style.stroke=!0,f.themeField=n,f.styleGroups=o;var p=this;return f.on("click",function(t){if(t.target&&t.target.refDataID){var e=f.getFeatureById(t.target.refDataID);p.events.triggerEvent("uniquefeatureclicked",e,f)}}),f},createRangeLayer:function(t,e){var r=t.title,n=e.field,o=[],i=e.settings,a=t.isVisible,s=t.opacity,u=e.vectorType,l=t.style.pointStyle;l.fill="LINE"!==u;for(var c=0;c<i.length;c++){var f={};f.start=i[c].start,f.end=i[c].end,f.style=i[c].style,o.push(f)}var p=new O1(r,{visibility:a,opacity:s});return this.registerThemeEvent(p),p.style=t.style.pointStyle,p.style.stroke=!0,p.themeField=n,p.styleGroups=o,p},createLabelLayer:function(t,e){var r,n=t.title,o=e.labelField,i=e.settings,a=t.isVisible;r=!i||i.length>0?{fillColor:"#ffffff"}:i[0].style;var s=RQ().Util.extend(new SB,r);s.fontWeight="bold",s.fontSize="14px",s.labelRect=!0,s.strokeColor=s.fillColor,s.fontColor=e.labelColor,e.labelFont&&(s.fontFamily=e.labelFont);var u=new E1(n,{visibility:a,opacity:.7});return this.registerThemeEvent(u),u.style=s,u.themeField=o,u.styleGroups=[],u},createHeatLayer:function(t,e){for(var r,n=e.colors||["blue","cyan","lime","yellow","red"],o={},i=0,a=n.length,s=1;i<a;i++)o[s/a]=n[i],s++;var u=e.settings[0].radius;return"千米"!==e.heatUnit&&"km"!==e.heatUnit||(u=1e3*e.heatRadius),e.settings[0]&&e.settings[0].featureWeight&&(r=e.settings[0].featureWeight),RQ().heatLayer([],{radius:u/2,minOpacity:t.opacity,gradient:o,blur:u/2,featureWeight:r})},addFeature2ThemeLayer:function(t,e){var r=this;if("FEATURE_LAYER"===t.layerType&&"THEME"===t.identifier){var n=this,i=!!t.datasourceName,a=t.cartoCSS;if(a)var s=this.getCartoCSS2Obj(a).needTransform,u=this.getCartoCSS2Obj(a).isAddFile;var l,c,f,p=t.url,h=t.credential,y=t.themeSettings,d=y.filter;if(u){var v=JSON.parse(t.datasourceName),m=this.getSQLFromFilter(d);if(p)this.getFeatureFromFileAdded(t,function(r){var o,i=[];if("EXCEL"===r.type||"CSV"===r.type)for(var a=0,u=(o=n.parseFeatureFromEXCEL.apply(n,[r.content.rows,r.content.colTitles,!1,v])).length;a<u;a++)l1()({attr:o[a].attributes},m).length>0&&i.push(o[a]);else for(var l=0,c=(o=n.parseFeatureFromJson(r.content)).length;l<c;l++)l1()({attr:o[l].attributes},m).length>0&&i.push(o[l]);var f=t.prjCoordSys&&t.prjCoordSys.epsgCode;s?n.changeFeatureLayerEpsgCode(f,"4326",e,i,function(t){k(t)}):k(i)},function(){});else{for(var b=[],g=t.features,S=0,w=g.length;S<w;S++){var _=g[S];if(l1()({attr:_.attributes},m).length>0){var O=_.geometry.points[0].x,E=_.geometry.points[0].y,P=new he(O,E),x=new mn(P,_.attributes,_.style);b.push(x)}}k(b)}}else if(i){var T=t.datasourceName;f=(c=(l=t.subLayers&&JSON.parse(t.subLayers)).length&&l.length>0?l[0]:l)&&c.name,this.getFeaturesBySQL(t.url,T,f,y.filter,o.ISERVER,function(n){var o,i,a=n.result,u=[];if(a&&a.features){for(var l=0,c=(o=a.features).length;l<c;l++)i=NC.fromJson(o[l]).toFeature(),u.push(i);var f=t.prjCoordSys&&t.prjCoordSys.epsgCode;s?r.changeFeatureLayerEpsgCode(f,"4326",e,u,function(t){k(t)}):k(o)}})}else{f=(c=(l=t.subLayers&&JSON.parse(t.subLayers)).length&&l.length>0?l[0]:l)&&c.name;var C=t.prjCoordSys&&t.prjCoordSys.epsgCode;this.getFeaturesBySQL(p,h,f,d,o.ISERVER,function(t){s?n.changeFeatureLayerEpsgCode(C,"4326",e,t,function(t){k(t)}):k(t)})}}function k(r){if(e&&e.labelLayer instanceof E1&&n.addFeature2LabelLayer(e.labelLayer,r,t),RQ().HeatLayer&&e instanceof RQ().HeatLayer){for(var o=[],i=0,a=r.length;i<a;i++){var s=r[i].geometry;o[i]=RQ().latLng(s.y,s.x),e.options.featureWeight&&(o[i]=[o[i].lat,o[i].lng,parseFloat(r[i].attributes[e.options.featureWeight])])}e.setLatLngs(o)}else e instanceof RQ().GeoJSON?e.addData((new Ln).toGeoJSON(r)):e.addFeatures(r)}},addFeature2LabelLayer:function(t,e,r){if(e){for(var n,o,i=r.themeSettings,a=(i="string"==typeof i?JSON.parse(r.themeSettings):r.themeSettings).labelField,s=t.style,u=[],l=r.styleString&&JSON.parse(r.styleString),c=0;c<e.length;c++){o=this.getLabelLngLat(i.vectorType,e[c]),this.setLabelOffset(i.vectorType,l,e[c],s);var f=e[c].attributes;n=new g1([o.lat,o.lng,f[a]],f),u.push(n)}t.style=s,t.addFeatures(u)}},setLabelOffset:function(t,e,r,n){if("POINT"===t){var o=e.pointStyle.pointRadius||0,i=e.pointStyle.strokeWidth||0,a=parseInt(e.pointStyle.fontSize)||0;n.labelXOffset=0,n.labelYOffset=e.pointStyle.unicode?20+a:25+(o+i)}},getLabelLngLat:function(t,e){var r={};if("POINT"===t){var n=e.geometry;r.lng=n.x,r.lat=n.y}else if("LINE"===t){var o,i,a=e.geometry.components;if(a[0].x)o=a.length,i=parseInt(o/2),r.lng=a[i].x,r.lat=a[i].y;else{var s=a[0].components;o=s.length,i=parseInt(o/2),r.lng=s[i].x,r.lat=s[i].y}}else{var u=e.geometry.getCentroid();r.lng=u.x,r.lat=u.y}return r},changeFeatureLayerEpsgCode:function(t,e,r,n,o){var i,a,s=this,u=[];if(t&&e){if(n&&n.length>0){for(i=0,a=n.length;i<a;i++){var l=n[i].geometry.getVertices();u=u.concat(l)}t="EPSG:"+t,e="EPSG:"+e,s.coordsTransform(t,e,u,function(t,e){return function(t){var r=t.length;for(i=0;i<r;i++){var n=u[i],a=t[i];n.x=a.x,n.y=a.y,n.calculateBounds()}for(i=0,r=e.length;i<r;i++){var l=e[i].geometry;l.components&&s.calculateComponents(l.components),l.calculateBounds()}o&&o.call(s,e)}}(0,n))}return!0}},calculateComponents:function(t){if(t)if(t.components)this.calculateComponents(t.components);else for(var e=0,r=t.length;e<r;e++){var n=t[e];n.components&&this.calculateComponents(n.components),n.calculateBounds()}},coordsTransform:function(t,e,r,n){var o,i=this.SERVER_TYPE_MAP[t],a=this.SERVER_TYPE_MAP[e];if(t!==e&&i&&a){var s=this.SERVER_TYPE_MAP["EPSG:3857"],u=this.SERVER_TYPE_MAP["EPSG:4326"];if(i!==s&&i!==u||a!==s&&a!==u){var l=i+"_"+a;this.postTransform(l,r,n)}else this.projTransform(t,e,r,n)}else{if(r&&void 0!==r.length){o=[];for(var c=0,f=r.length;c<f;c++){var p={x:r[c].x,y:r[c].y};o.push(p)}}else o={x:r.x,y:r.y};n&&n.call(this,o)}},projTransform:function(t,e,r,n){var o;if(b0){if(r&&void 0!==r.length){o=[];for(var i=0,a=r.length;i<a;i++){var s=b0(t,e,[r[i].x,r[i].y]);o.push({x:s[0],y:s[1]})}}else o={x:(o=b0(t,e,[r.x,r.y]))[0],y:o[1]};n&&(this.fire("coordconvertsuccess",{newCoor:o}),n.call(this,o))}},postTransform:function(t,e,r){var n=this,o=[];if(!t)return r.call(this,null);if(e&&void 0!==e.length)for(var i=0,a=e.length;i<a;i++)o.push({x:e[i].x,y:e[i].y});else o=[{x:e.x,y:e.y}];if(0===o.length)return r.call(this,null);var s={convertType:t,points:o},u=this.server+"/apps/viewer/coordconvert.json";s=JSON.stringify(s);var l={};!Tt.isInTheSameDomain(u)&&this.proxy&&(l.proxy=this.proxy),co.post(u,s,l).then(function(t){return t.json()}).then(function(t){var o=t;e||void 0===e.length||(o=o[0]),n.fire("coordconvertsuccess",{newCoors:o}),r.call(n,o)}).catch(function(t){n.actived&&n.fire("coordconvertfailed",{err:t})})},getSQLFromFilter:function(t){return t?" *  where ("+(t=t.replace(/=/g,"==").replace(/and|AND/g,"&&").replace(/or|OR/g,"||").replace(/>==/g,">=").replace(/<==/g,"<="))+")":" * where (1==1||1>=0)"},getAttributesObjFromTable:function(t,e){if(0!==t.length&&0!==e.length){for(var r=[],n=0;n<t.length;n++){for(var o={},i=0;i<e.length;i++)o[e[i]]=t[n][i];r.push(o)}return r}},parseFeatureFromEXCEL:function(t,e,r,n){for(var o=this.getAttributesObjFromTable(t,e),i=[],a=0,s=o.length;a<s;a++){var u=o[a][n.lon],l=o[a][n.lat];if(u&&l){u=parseFloat(u),l=parseFloat(l);var c,f=new he(u,l);c=r?new b1(f,o[a],null):new mn(f,o[a],null),i.push(c)}}return i},parseFeatureFromJson:function(t){var e=new Ln,r=e.read(t);if(null==r){var n=JSON.parse(t.replace(/'/,'"'));(n.isAnalyseResult||"MapEditor"===n.type||"DataInsights"===n.type||"ISERVER"===n.type)&&(n=n.data.recordsets[0].features),r=(e=new Ln).read(n)}for(var o=0,i=r.length;o<i;o++)r[o].attributes=r[o].attributes.properties||r[o].attributes;return r},getFeatureFromFileAdded:function(t,e,r,n){var o=n?t.url+"?currentPage=1&&pageSize=9999999":t.url;co.get(o).then(function(t){return t.json()}).then(function(t){e&&e(t)}).catch(function(t){return r&&r(t)})},getCartoCSS2Obj:function(t){var e,r=!1;return t.indexOf("}")>-1?(r=(t=JSON.parse(t)).needTransform,e=t.isAddFile):"needTransform"===t?(r=!0,e=!1):e="true"===t,{isAddFile:e,needTransform:r}},registerThemeEvent:function(t){var e=this;t.on("click",function(r){var n;t.map&&(e.selectedFeature&&(e.fire("featureunselected",{feature:e.selectedFeature}),e.selectedFeature=null),r.target&&r.target.refDataID&&(n=t.getFeatureById(r.target.refDataID)),n&&(e.selectedFeature=n,e.fire("featureselected",{feature:n})))}),t.on("mousemove",function(r){var n;t.map&&(r.target&&r.target.refDataID&&(r.target&&r.target.refDataID&&(n=t.getFeatureById(r.target.refDataID)),n&&e.fire("featuremousemove",{feature:n})))})},SERVER_TYPE_MAP:{"EPSG:4326":"WGS84","EPSG:3857":"MERCATOR","EPSG:900913":"MERCATOR","EPSG:102113":"MERCATOR","EPSG:910101":"GCJ02","EPSG:910111":"GCJ02MERCATOR","EPSG:910102":"BD","EPSG:910112":"BDMERCATOR"}}),D1=RQ().TileLayer.extend({options:{collectionId:null,sqlFilter:null,ids:null,names:null,renderingRule:null,format:"png",zoomOffset:1,transparent:!0,cacheEnabled:!0,tileProxy:null,attribution:O0.Common.attribution,subdomains:null},initialize:function(t,e){this._url=t,RQ().TileLayer.prototype.initialize.apply(this,arguments),RQ().setOptions(this,e),RQ().stamp(this)},onAdd:function(t){RQ().TileLayer.prototype.onAdd.call(this,t)},getTileUrl:function(t){var e=this._getLayerUrl()+"&z="+this._getZoomForUrl()+"&x="+t.x+"&y="+t.y;return this.options.tileProxy&&(e=this.options.tileProxy+encodeURIComponent(e)),this.options.cacheEnabled||(e+="&_t="+(new Date).getTime()),this.options.subdomains&&(e=RQ().Util.template(e,{s:this._getSubdomain(t)})),e},_getLayerUrl:function(){return this._layerUrl||this._createLayerUrl()},_createLayerUrl:function(){var t=Tt.urlPathAppend(this._url,"/collections/".concat(this.options.collectionId,"/tile.").concat(this.options.format));return this.requestParams=this.requestParams||this._getAllRequestParams(),t=Tt.urlAppend(t,MQ.Util.getParamString(this.requestParams)),t=yo.appendCredential(t),this._layerUrl=t,t},_getAllRequestParams:function(){var t=this.options||{},e={};return e.transparent=!0===t.transparent,e.cacheEnabled=!(!1===t.cacheEnabled),t.sqlFilter&&(e.sqlFilter=t.sqlFilter),t.renderingRule&&(e.renderingRule=JSON.stringify(t.renderingRule)),t.ids&&(e.ids=t.ids.join(",")),t.names&&(e.names=t.names.join(",")),e}});function B1(t){"@babel/helpers - typeof";return(B1="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function F1(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,U1(n.key),n)}}function U1(t){var e=function(t,e){if("object"!=B1(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=B1(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==B1(e)?e:e+""}var G1=function(){return t=function t(e,r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.MapService=e,this.url=r,this.options=n,this.CLASS_NAME="SuperMap.InitMapServiceBase"},(e=[{key:"createMapService",value:function(){var t=this.MapService,e=this.url,r=this.options;return new t(e,{proxy:r.proxy,withCredentials:r.withCredentials,crossOrigin:r.crossOrigin,headers:r.headers,projection:r.projection})}},{key:"getMapInfo",value:function(t){var e=this.createMapService();return t?new Promise(function(r,n){e.getMapInfo(function(e){t(e,r,n)})}):e.getMapInfo()}},{key:"getTilesets",value:function(){return this.createMapService().getTilesets()}},{key:"getWKT",value:function(){var t=this;return new Promise(function(e,r){t.createMapService().getWKT(function(t){try{var n=t.result.data;e(n)}catch(t){r(t)}})})}}])&&F1(t.prototype,e),r&&F1(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function V1(t){return"PCS_NON_EARTH"===t}function z1(t){var e=t.type,r=t.epsgCode;return"PCS_NON_EARTH"==e?"":"EPSG:"+r}function H1(t){if(t.tileFormat){var e=t.tileFormat.toLowerCase();return["jpg_png","default","png8"].includes(e)?"png":e}return"png"}function q1(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0,r=Array.isArray(t)&&t.filter(function(t){return t.metaData.tileType===e.tileType||z1(t.metaData.prjCoordSys)===z1(e.prjCoordSys)});return r&&r[0]&&r[0].metaData}function J1(t){"@babel/helpers - typeof";return(J1="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function W1(){W1=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),s=new A(n||[]);return o(a,"_invoke",{value:x(t,r,s)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var p="suspendedStart",h="suspendedYield",y="executing",d="completed",v={};function m(){}function b(){}function g(){}var S={};l(S,a,function(){return this});var w=Object.getPrototypeOf,_=w&&w(w(j([])));_&&_!==r&&n.call(_,a)&&(S=_);var O=g.prototype=m.prototype=Object.create(S);function E(t){["next","throw","return"].forEach(function(e){l(t,e,function(t){return this._invoke(e,t)})})}function P(t,e){function r(o,i,a,s){var u=f(t[o],t,i);if("throw"!==u.type){var l=u.arg,c=l.value;return c&&"object"==J1(c)&&n.call(c,"__await")?e.resolve(c.__await).then(function(t){r("next",t,a,s)},function(t){r("throw",t,a,s)}):e.resolve(c).then(function(t){l.value=t,a(l)},function(t){return r("throw",t,a,s)})}s(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e(function(e,o){r(t,n,e,o)})}return i=i?i.then(o,o):o()}})}function x(e,r,n){var o=p;return function(i,a){if(o===y)throw Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var u=T(s,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var l=f(e,r,n);if("normal"===l.type){if(o=n.done?d:h,l.arg===v)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=d,n.method="throw",n.arg=l.arg)}}}function T(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,T(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function A(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function j(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(J1(e)+" is not iterable")}return b.prototype=g,o(O,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=l(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,l(t,u,"GeneratorFunction")),t.prototype=Object.create(O),t},e.awrap=function(t){return{__await:t}},E(P.prototype),l(P.prototype,s,function(){return this}),e.AsyncIterator=P,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new P(c(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next()})},E(O),l(O,u,"Generator"),l(O,a,function(){return this}),l(O,"toString",function(){return"[object Generator]"}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=j,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(k),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),k(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;k(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:j(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function K1(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function Y1(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?K1(Object(r),!0).forEach(function(e){Q1(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):K1(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function Q1(t,e,r){var n;return(e="symbol"==J1(n=function(t,e){if("object"!=J1(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=J1(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"))?n:n+"")in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function X1(t,e,r,n,o,i,a){try{var s=t[i](a),u=s.value}catch(t){return void r(t)}s.done?e(u):Promise.resolve(u).then(n,o)}function Z1(t){return function(){var e=this,r=arguments;return new Promise(function(n,o){var i=t.apply(e,r);function a(t){X1(i,n,o,a,s,"next",t)}function s(t){X1(i,n,o,a,s,"throw",t)}a(void 0)})}}function $1(){return($1=Z1(W1().mark(function t(e,r){var n,o,i,a,s,u,l,c,f,p,h,y,d,v,m,b,g,S,w,_,O,E,P,x,T,C,k,A,j,N;return W1().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=(r=r||{}).mapOptions||{},o=r.layerOptions||{},i=new G1(P0,e,r),t.next=6,i.getTilesets();case 6:return a=t.sent,t.next=9,i.getMapInfo();case 9:if(s=t.sent,u=s.result,l=u.prjCoordSys,c=q1(a.result,{prjCoordSys:l,tileType:"Image"}),f=u.bounds,p=u.center,h=u.scale,V1(l.type)){t.next=20;break}return y=z1(l),t.next=20,e2(y,i);case 20:return c?(b=H1(c),g=c.tileWidth||256,S=c.transparent||!0,w=[c.originalPoint.x,c.originalPoint.y],_=c.resolutions,O=c.scaleDenominators,E=u.coordUnit,m=_.length-1,d=t2({prjCoordSys:l,bounds:f,resolutions:_,origin:w,dpi:KD(1/O[0],_[0],E)},{maxZoom:m}),v=JD(1/h,O)):(b="webp",g=256,S=!0,P=u.scale,x=u.dpi,T=u.coordUnit,C=[f.left,f.top],k=qD(u.visibleScales,f,x,T,n.maxZoom,P),m=k.length-1,d=t2({prjCoordSys:l,bounds:f,resolutions:k,origin:C,dpi:x},{maxZoom:m}),v=o2({scale:P,dpi:x,coordUnit:T},k)),A={crs:d,center:i2(d,{center:p,bounds:f}),zoom:v,maxZoom:m},j=RQ().map("map",Y1(Y1({},A),n)),(N=new a1(e,Y1(Y1({},{noWrap:!0,format:b,minZoom:0,maxZoom:m,tileSize:g,bounds:a2(f,d),transparent:S}),o))).addTo(j),t.abrupt("return",{map:j,layer:N});case 26:case"end":return t.stop()}},t)}))).apply(this,arguments)}function t2(t,e){var r=(e||{}).maxZoom,n=void 0===r?22:r,o=t.bounds,i=t.prjCoordSys,a=t.dpi,s=t.visibleScales,u=t.coordUnit,l=t.origin,c=t.resolutions;if(c||(c=qD(s,o,a,u,n)),V1(i.type))return function(t,e,r){var n={bounds:RQ().bounds([t.left,t.bottom],[t.right,t.top]),origin:e?RQ().point(e):RQ().point(t.left,t.top),resolutions:r};return new V0(n)}(o,l,c);var f=z1(i);return n2(f)?function(t,e){var r=e.bounds,n=e.origin,o=e.dpi,i=e.resolutions,a=b0(t,"EPSG:4326").forward([r.left,0],!0),s=b0(t,"EPSG:4326").forward([r.right,0],!0),u={wrapLng:[parseInt(a[0]),parseInt(s[0])],bounds:RQ().bounds([r.left,r.bottom],[r.right,r.top]),origin:n||[r.left,r.top],dpi:o};i&&i.length>0&&(u.resolutions=i);return new w0(t,u)}(f,{bounds:o,dpi:a,resolutions:c,origin:l}):void 0}function e2(t,e){return r2.apply(this,arguments)}function r2(){return(r2=Z1(W1().mark(function t(e,r){var n;return W1().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n2(e,!1)){t.next=5;break}return t.next=3,r.getWKT();case 3:(n=t.sent)&&b0.defs(e,n);case 5:case"end":return t.stop()}},t)}))).apply(this,arguments)}function n2(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];try{b0(t)}catch(r){return e&&console.error("The projection of ".concat(t," is missing, please register the projection of ").concat(t," first, refer to the documentation: https://iclient.supermap.io/web/introduction/leafletDevelop.html#multiProjection")),!1}return!0}function o2(t,e){var r=t.scale,n=t.dpi,o=t.coordUnit;return JD(K0(r,n,o),e)}function i2(t,e){var r=e.center,n=e.bounds,o="string"==typeof t?t:t.code;return"number"!=typeof r.x&&"number"!=typeof r.y&&(r={lat:(n.bottom+n.top)/2,lng:(n.left+n.right)/2}),"EPSG:4326"===o?{lat:r.y,lng:r.x}:t.unproject(RQ().point(r.x,r.y))}function a2(t,e){return"EPSG:4326"===("string"==typeof e?e:e.code)?[[t.bottom,t.left],[t.top,t.right]]:RQ().latLngBounds(e.unproject(RQ().point(t.left,t.bottom)),e.unproject(RQ().point(t.right,t.top)))}var s2=E0.extend({options:{geometry:null,prjCoordSys:null,excludeField:null},initialize:function(t,e){e=e||{},RQ().setOptions(this,e),e.projection&&(this.options.prjCoordSys=e.projection),E0.prototype.initialize.call(this,t,e),this.dataFlow=new lc(t,e),this.dataFlow.events.on({broadcastSocketConnected:this._defaultEvent,broadcastSocketError:this._defaultEvent,broadcastFailed:this._defaultEvent,broadcastSucceeded:this._defaultEvent,subscribeSocketConnected:this._defaultEvent,subscribeSocketError:this._defaultEvent,messageSucceeded:this._defaultEvent,setFilterParamSucceeded:this._defaultEvent,scope:this})},initBroadcast:function(){return this.dataFlow.initBroadcast(),this},broadcast:function(t){this.dataFlow.broadcast(t)},initSubscribe:function(){return this.dataFlow.initSubscribe(),this},setExcludeField:function(t){return this.dataFlow.setExcludeField(t),this.options.excludeField=t,this},setGeometry:function(t){return this.dataFlow.setGeometry(t),this.options.geometry=t,this},unSubscribe:function(){this.dataFlow.unSubscribe()},unBroadcast:function(){this.dataFlow.unBroadcast()},_defaultEvent:function(t){this.fire(t.eventType||t.type,t)}}),u2=function(){try{return mapv}catch(t){return{}}}();function l2(t){"@babel/helpers - typeof";return(l2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c2(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,f2(n.key),n)}}function f2(t){var e=function(t,e){if("object"!=l2(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=l2(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==l2(e)?e:e+""}function p2(t,e,r){return e=d2(e),h2(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],d2(t).constructor):e.apply(t,r))}function h2(t,e){if(e&&("object"===l2(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function y2(){return(y2="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=d2(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function d2(t){return(d2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function v2(t,e){return(v2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var m2=u2.baiduMapLayer?u2.baiduMapLayer.__proto__:Function,b2=function(t){function e(t,r,n,o){var i;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),i=p2(this,e,[t,n,o]),!m2)return h2(i);var a=i;return o=o||{},a.init(o),a.argCheck(o),i.canvasLayer=r,i.clickEvent=i.clickEvent.bind(i),i.mousemoveEvent=i.mousemoveEvent.bind(i),i._moveStartEvent=i.moveStartEvent.bind(i),i._moveEndEvent=i.moveEndEvent.bind(i),i._zoomStartEvent=i.zoomStartEvent.bind(i),i.bindEvent(),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&v2(t,e)}(e,m2),r=e,(n=[{key:"clickEvent",value:function(t){var r=this.map.containerPointToLayerPoint([0,0]),n=this.devicePixelRatio=this.canvasLayer.devicePixelRatio=window.devicePixelRatio||1,o=t.layerPoint;y2(d2(e.prototype),"clickEvent",this).call(this,RQ().point((o.x-r.x)/n,(o.y-r.y)/n),t)}},{key:"mousemoveEvent",value:function(t){var r=t.layerPoint;y2(d2(e.prototype),"mousemoveEvent",this).call(this,r,t)}},{key:"bindEvent",value:function(){var t=this.map;this.options.methods&&(this.options.methods.click&&t.on("click",this.clickEvent),this.options.methods.mousemove&&t.on("mousemove",this.mousemoveEvent)),this.map.on("movestart",this._moveStartEvent),this.map.on("moveend",this._moveEndEvent),this.map.on("zoomstart",this._zoomStartEvent)}},{key:"destroy",value:function(){this.unbindEvent(),this.clearData(),this.animator&&this.animator.stop(),this.animator=null,this.canvasLayer=null}},{key:"unbindEvent",value:function(){var t=this.map;this.options.methods&&(this.options.methods.click&&t.off("click",this.clickEvent),this.options.methods.mousemove&&t.off("mousemove",this.mousemoveEvent)),this.map.off("movestart",this._moveStartEvent),this.map.off("moveend",this._moveEndEvent),this.map.off("zoomstart",this._zoomStartEvent)}},{key:"getContext",value:function(){return this.canvasLayer.getCanvas().getContext(this.context)}},{key:"addData",value:function(t,e){var r=t;t&&t.get&&(r=t.get()),this.dataSet.add(r),this.update({options:e})}},{key:"update",value:function(t){var r=t||{},n=r.data;n&&n.get&&(n=n.get()),void 0!=n&&this.dataSet.set(n),y2(d2(e.prototype),"update",this).call(this,{options:r.options})}},{key:"getData",value:function(){return this.dataSet}},{key:"removeData",value:function(t){if(this.dataSet){var e=this.dataSet.get({filter:function(e){return null==t||"function"!=typeof t||!t(e)}});this.dataSet.set(e),this.update({options:null})}}},{key:"clearData",value:function(){this.dataSet&&this.dataSet.clear(),this.update({options:null})}},{key:"_canvasUpdate",value:function(t){if(this.canvasLayer){var e=this,r=e.options.animation,n=this.getContext(),o=this.map;if(e.isEnabledTime()){if(void 0===t)return void this.clear(n);"2d"===this.context&&(n.save(),n.globalCompositeOperation="destination-out",n.fillStyle="rgba(0, 0, 0, .1)",n.fillRect(0,0,n.canvas.width,n.canvas.height),n.restore())}else this.clear(n);if("2d"===this.context)for(var i in e.options)n[i]=e.options[i];else n.clear(n.COLOR_BUFFER_BIT);if(!(e.options.minZoom&&o.getZoom()<e.options.minZoom||e.options.maxZoom&&o.getZoom()>e.options.maxZoom)){var a=o.getBounds(),s=a.getEast()-a.getWest(),u=a.getNorth()-a.getSouth(),l=o.getSize(),c=s/l.x,f=u/l.y,p=J0("DEGREE")*c,h=this.canvasLayer.getTopLeft(),y=o.latLngToAccurateContainerPoint(h),d={transferCoordinate:function(t){var r,n={x:(r="2d"===e.context?o.latLngToAccurateContainerPoint(RQ().latLng(t[1],t[0])):{x:(t[0]-h.lng)/c,y:(h.lat-t[1])/f}).x-y.x,y:r.y-y.y};return[n.x,n.y]}};void 0!==t&&(d.filter=function(e){var n=r.trails||10;return t&&e.time>t-n&&e.time<t});var v=e.dataSet.get(d);this.processData(v);var m=o.latLngToContainerPoint(RQ().latLng(0,0)),b={x:m.x-y.x,y:m.y-y.y};"m"===e.options.unit?(e.options.size&&(e.options._size=e.options.size/p),e.options.width&&(e.options._width=e.options.width/p),e.options.height&&(e.options._height=e.options.height/p)):(e.options._size=e.options.size,e.options._height=e.options.height,e.options._width=e.options.width),this.drawContext(n,v,e.options,b),e.options.updateCallback&&e.options.updateCallback(t)}}}},{key:"init",value:function(t){this.options=t,this.initDataRange(t),this.context=this.options.context||"2d",this.options.zIndex&&this.canvasLayer&&this.canvasLayer.setZIndex(this.options.zIndex),this.initAnimator()}},{key:"addAnimatorEvent",value:function(){}},{key:"moveStartEvent",value:function(){var t=this.options.animation;this.isEnabledTime()&&this.animator&&(this.steps.step=t.stepsRange.start,this._hide())}},{key:"moveEndEvent",value:function(){this.canvasLayer.draw(),this._show()}},{key:"zoomStartEvent",value:function(){this._hide()}},{key:"clear",value:function(t){t&&t.clearRect&&t.clearRect(0,0,t.canvas.width,t.canvas.height)}},{key:"_hide",value:function(){this.canvasLayer.canvas.style.display="none"}},{key:"_show",value:function(){this.canvasLayer.canvas.style.display="block"}},{key:"draw",value:function(){this.canvasLayer.draw()}}])&&c2(r.prototype,n),o&&c2(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}(),g2=RQ().Layer.extend({options:{attributionPrefix:null,attribution:O0.MapV.attribution},initialize:function(t,e,r){r=r||{},this.dataSet=t||{},this.mapVOptions=e||{},this.render=this.render.bind(this),RQ().Util.setOptions(this,r),this.options.attributionPrefix&&(this.options.attribution=this.options.attributionPrefix+this.options.attribution),this.canvas=this._createCanvas(),RQ().stamp(this)},onAdd:function(t){this._map=t;var e=this.getPane(),r=this.container=RQ().DomUtil.create("div","leaflet-layer leaflet-zoom-animated",e);r.appendChild(this.canvas);var n=t.getSize();r.style.width=n.x+"px",r.style.height=n.y+"px",this.renderer=new b2(t,this,this.dataSet,this.mapVOptions),this.draw(),this.fire("loaded")},onRemove:function(){RQ().DomUtil.remove(this.container),this.renderer.destroy()},addData:function(t,e){this.renderer.addData(t,e)},update:function(t){this.renderer.update(t)},getData:function(){return this.renderer&&(this.dataSet=this.renderer.getData()),this.dataSet},removeData:function(t){this.renderer&&this.renderer.removeData(t)},clearData:function(){this.renderer.clearData()},draw:function(){return this._reset()},setZIndex:function(t){this.canvas.style.zIndex=t},render:function(){this.renderer._canvasUpdate()},getCanvas:function(){return this.canvas},getContainer:function(){return this.container},getTopLeft:function(){var t,e=this._map;e&&(t=e.getBounds().getNorthWest());return t},_createCanvas:function(){var t=document.createElement("canvas");t.style.position="absolute",t.style.top="0px",t.style.left="0px",t.style.pointerEvents="none",t.style.zIndex=this.options.zIndex||200;var e="undefined"==typeof window?{}:window,r=this.devicePixelRatio=e.devicePixelRatio||1;return this.mapVOptions.context&&"2d"!==this.mapVOptions.context||t.getContext("2d").scale(r,r),t},_resize:function(){var t=this.canvas;if(t){var e=this._map,r=e.getSize();"heatmap"===this.mapVOptions.draw?(t.width=parseInt(r.x)*this.devicePixelRatio,t.height=parseInt(r.y)*this.devicePixelRatio):(t.width=parseInt(r.x),t.height=parseInt(r.y)),t.style.width=r.x+"px",t.style.height=r.y+"px";var n=e.getBounds(),o=e.latLngToLayerPoint(n.getNorthWest());RQ().DomUtil.setPosition(t,o)}},_reset:function(){this._resize(),this._render()},redraw:function(){this._resize(),this._render()},_render:function(){this.render()}}),S2=g2.extend({initialize:function(t,e){e=e||{},RQ().Util.setOptions(this,e),this.data=[],this.mapVOptions={draw:"simple"},g2.prototype.initialize.call(this,new window.mapv.DataSet([]),this.mapVOptions,e),this.idCache={},this.url=t,this._last=new Date,this._imageCache={}},onMessageSuccessed:function(t){var e=this,r=t.featureResult.properties.id,n=t.featureResult.geometry,o={geometry:t.featureResult.geometry};if("Point"===n.type&&this.options.pointToLayer){var i=this.options.pointToLayer(t.featureResult,RQ().latLng(n.coordinates[1],n.coordinates[0]));if(i instanceof RQ().Marker){this.mapVOptions.draw="icon";var a=i.options.icon,s=a._getIconUrl("icon"),u=a.options.iconSize?a.options.iconSize[0]:null,l=a.options.iconSize?a.options.iconSize[1]:null,c="".concat(s,"_").concat(u,"_").concat(l),f=this._imageCache[c];f||(f=a.createIcon(),this._imageCache[c]=f,f.onload=function(){e.update({data:e.data,options:e.mapVOptions})}),o.icon=f,(a.options.iconSize||f.style.height)&&(this.mapVOptions.offset={x:0,y:-(a.options.iconSize[1]||f.style.height)/2}),this.options.deg&&(o.deg=this.options.deg,"function"==typeof o.deg&&this.idCache[r]&&this.data[this.idCache[r]]&&(o.deg=o.deg(t.featureResult,RQ().latLng(n.coordinates[1],n.coordinates[0]),this.data[this.idCache[r]])))}if(i instanceof RQ().CircleMarker){this.mapVOptions.draw="simple";var p=this._toMapvStyle(i);for(var h in p)p.hasOwnProperty(h)&&(o[h]=p[h])}}else if(this.options.style){var y=this._toMapvStyle(this.options.style(t.featureResult));for(var d in y)y.hasOwnProperty(d)&&(o[d]=y[d])}void 0==this.idCache[r]?(this.data.push(o),this.idCache[r]=this.data.length-1):this.data[this.idCache[r]]=o,new Date-this._last>200&&(this._last=new Date,this.update({data:this.data,options:this.mapVOptions}))},_toMapvStyle:function(t){var e={draw:"simple"};return e.strokeStyle=t.color,e.lineWidth=t.width,e.globalAlpha=t.fillOpacity||t.opacity,e.lineCap=t.lineCap,e.lineJoin=t.lineJoin,e.fillStyle=t.fillColor,e.size=t.radius,e}}),w2=RQ().GeoJSON.extend({initialize:function(t,e){(e=e||{}).style&&!e.pointToLayer&&(e.pointToLayer=function(t,r){return RQ().circleMarker(r,e.style())}),RQ().Util.setOptions(this,e),this._layers={},RQ().stamp(this),this.url=t,this.idCache={}},onMessageSuccessed:function(t){var e=t.featureResult,r=t.featureResult.properties[this.options.idField],n=null;void 0!==r&&this.idCache[r]?(n=this.getLayer(this.idCache[r]),this._updateLayerData(n,e)):((n=RQ().GeoJSON.geometryToLayer(e,this.options)).feature=RQ().GeoJSON.asFeature(e),this.addLayer(n),void 0!==r&&(this.idCache[r]=this.getLayerId(n))),this.options.onEachFeature&&this.options.onEachFeature(e,n)},_updateLayerData:function(t,e){e.properties&&(t.feature.properties=e.properties);var r=[];switch(e.geometry.type){case"Point":r=RQ().GeoJSON.coordsToLatLng(e.geometry.coordinates),t.setLatLng(r);break;case"LineString":r=RQ().GeoJSON.coordsToLatLngs(e.geometry.coordinates,0),t.setLatLngs(r);break;case"MultiLineString":case"Polygon":r=RQ().GeoJSON.coordsToLatLngs(e.geometry.coordinates,1),t.setLatLngs(r);break;case"MultiPolygon":r=RQ().GeoJSON.coordsToLatLngs(e.geometry.coordinates,2),t.setLatLngs(r)}}}),_2=RQ().LayerGroup.extend({options:{geometry:null,prjCoordSys:null,excludeField:null,idField:"id",render:"normal"},initialize:function(t,e){e=e||{},RQ().Util.setOptions(this,e),this.url=t,this._layers={},this.dataService=new s2(this.url,{geometry:this.options.geometry,prjCoordSys:this.options.prjCoordSys,excludeField:this.options.excludeField})},onAdd:function(t){var e=this;this.dataService.initSubscribe(),this.dataService.on("subscribeSocketConnected",function(t){return e.fire("subscribesucceeded",t)}),this.dataService.on("subscribeSocketError",function(t){return e.fire("subscribefailed",t)}),this.dataService.on("messageSucceeded",function(t){return e._onMessageSuccessed(t)}),this.dataService.on("setFilterParamSucceeded",function(t){return e.fire("setfilterparamsucceeded",t)}),"mapv"===this.options.render?this.addLayer(new S2(this.url,this.options)):this.addLayer(new w2(this.url,this.options)),RQ().LayerGroup.prototype.onAdd.call(this,t)},onRemove:function(t){RQ().LayerGroup.prototype.onRemove.call(this,t),this.dataService&&this.dataService.unSubscribe()},setExcludeField:function(t){return this.dataService.setExcludeField(t),this.options.excludeField=t,this},setGeometry:function(t){return this.dataService.setGeometry(t),this.options.geometry=t,this},_onMessageSuccessed:function(t){var e=this;this.getLayers().map(function(r){return r.onMessageSuccessed&&(r.onMessageSuccessed(t),e.fire("dataupdated",{layer:r,data:t.featureResult})),r})}}),O2=RQ().Layer.extend({includes:[],_echartsContainer:null,_map:null,_ec:null,chart:null,_echartsOptions:null,options:{attribution:O0.ECharts.attribution,loadWhileAnimating:!1},initialize:function(t,e){RQ().Util.setOptions(this,e),this.setOption(t)},setOption:function(t,e,r){var n=t.baseOption||t;n.LeafletMap=n.LeafletMap||{roam:!0},n.animation=!0===n.animation,this._echartsOptions=t,this._ec&&this._ec.setOption(t,e,r)},getEcharts:function(){return this._ec},_disableEchartsContainer:function(){this._echartsContainer.style.visibility="hidden"},_enableEchartsContainer:function(){this._echartsContainer.style.visibility="visible"},onAdd:function(t){this._map=t,this._initEchartsContainer(),this._ec=YH.init(this._echartsContainer),this._ec.leafletMap=t,this.chart=this._ec;var e=this;t.on("zoomstart",function(){e._disableEchartsContainer()}),!e.options.loadWhileAnimating&&t.on("movestart",function(){e._disableEchartsContainer()}),YH.registerAction({type:"LeafletMapLayout",event:"LeafletMapLayout",update:"updateLayout"},function(t){}),YH.registerCoordinateSystem("leaflet",E2),YH.extendComponentModel({type:"LeafletMap",getBMap:function(){return this.__LeafletMap},defaultOption:{roam:!1}}),YH.extendComponentView({type:"LeafletMap",render:function(t,r,n){var o=!0,i=r.scheduler.ecInstance.leafletMap,a=n.getZr().painter.getViewportRoot(),s=i.options.zoomAnimation&&RQ().Browser.any3d;a.className=" leaflet-layer leaflet-zoom-"+(s?"animated":"hide")+" echarts-layer";var u=RQ().DomUtil.testProp(["transformOrigin","WebkitTransformOrigin","msTransformOrigin"]);a.style[u]="50% 50%";var l=t.coordinateSystem,c=n.getZr().painter.getLayers();x2(e._map,a);var f=function(){if(!o){var r,i=x2(e._map,a);if(!e.options.loadWhileAnimating){for(var s in c)c.hasOwnProperty(s)&&c[s]&&(r=c[s].ctx)&&r.clearRect&&r.clearRect(0,0,r.canvas.width,r.canvas.height);e._enableEchartsContainer()}l.setMapOffset(i),t.__mapOffset=i,n.dispatchAction({type:"LeafletMapLayout"})}};function p(){o||(n.dispatchAction({type:"LeafletMapLayout"}),e._enableEchartsContainer())}e._oldMoveHandler&&i.off(e.options.loadWhileAnimating?"move":"moveend",e._oldMoveHandler),e._oldZoomEndHandler&&i.off("zoomend",e._oldZoomEndHandler),i.on(e.options.loadWhileAnimating?"move":"moveend",f),i.on("zoomend",p),e._oldMoveHandler=f,e._oldZoomEndHandler=p,o=!1}}),this._ec.setOption(this._echartsOptions)},onRemove:function(){this._ec.clear(),this._ec.dispose(),delete this._ec,RQ().DomUtil.remove(this._echartsContainer),this._oldZoomEndHandler&&(this._map.off("zoomend",this._oldZoomEndHandler),this._oldZoomEndHandler=null),this._oldMoveHandler&&(this._map.off(this.options.loadWhileAnimating?"move":"moveend",this._oldMoveHandler),this._oldMoveHandler=null),this._resizeHandler&&(this._map.off("resize",this._resizeHandler),this._resizeHandler=null),delete this._map},_initEchartsContainer:function(){var t=this._map.getSize(),e=document.createElement("div");e.style.position="absolute",e.style.height=t.y+"px",e.style.width=t.x+"px",e.style.zIndex=200,this._echartsContainer=e,this.getPane().appendChild(this._echartsContainer);var r=this;function n(t){var e=t.newSize;r._echartsContainer.style.width=e.x+"px",r._echartsContainer.style.height=e.y+"px",r._ec.resize()}this._map.on("resize",n),this._resizeHandler=n}});function E2(t){this._LeafletMap=t,this.dimensions=["lng","lat"],this._mapOffset=P2(t)}function P2(t){var e=t.containerPointToLayerPoint([0,0]);return[e.x||0,e.y||0]}function x2(t,e){var r=P2(t);return e.style.left=r[0]+"px",e.style.top=r[1]+"px",r}E2.prototype.dimensions=["lng","lat"],E2.prototype.setMapOffset=function(t){this._mapOffset=t},E2.prototype.getBMap=function(){return this._LeafletMap},E2.prototype.prepareCustoms=function(){var t=YH.util,e=this.getViewRect();return{coordSys:{type:"leaflet",x:e.x,y:e.y,width:e.width,height:e.height},api:{coord:t.bind(this.dataToPoint,this),size:t.bind(function(e,r){return r=r||[0,0],t.map([0,1],function(t){var n=r[t],o=e[t]/2,i=[],a=[];return i[t]=n-o,a[t]=n+o,i[1-t]=a[1-t]=r[1-t],Math.abs(this.dataToPoint(i)[t]-this.dataToPoint(a)[t])},this)},this)}}},E2.prototype.dataToPoint=function(t){null===t[1]&&(t[1]=RQ().CRS.EPSG3857.projection.MAX_LATITUDE);var e=this._LeafletMap.latLngToLayerPoint([t[1],t[0]]),r=this._mapOffset;return[e.x-r[0],e.y-r[1]]},E2.prototype.fixLat=function(t){return t>=90?89.99999999999999:t<=-90?-89.99999999999999:t},E2.prototype.pointToData=function(t){var e=this._mapOffset,r=this._LeafletMap.layerPointToLatLng([t[0]+e[0],t[1]+e[1]]);return[r.lng,r.lat]},E2.prototype.getViewRect=function(){var t=this._LeafletMap.getSize();return new YH.graphic.BoundingRect(0,0,t.x,t.y)},E2.prototype.getRoamTransform=function(){return YH.matrix.create()},E2.dimensions=E2.prototype.dimensions,E2.create=function(t){var e,r=t.scheduler.ecInstance.leafletMap;t.eachComponent("LeafletMap",function(t){e||(e=new E2(r)),t.coordinateSystem=e,t.coordinateSystem.setMapOffset(t.__mapOffset||P2(r))}),t.eachSeries(function(t){"leaflet"===t.get("coordinateSystem")&&(e||(e=new E2(r)),t.coordinateSystem=e,t.animation=!0===t.animation)})};function T2(t){"@babel/helpers - typeof";return(T2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function C2(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,k2(n.key),n)}}function k2(t){var e=function(t,e){if("object"!=T2(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=T2(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==T2(e)?e:e+""}var A2=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)},r=[{key:"supportWebGL",value:function(){return j2("webgl")}},{key:"supportWebGL2",value:function(){return j2("webgl2")}},{key:"supportCanvas",value:function(){return j2("2d")}}],(e=null)&&C2(t.prototype,e),r&&C2(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function j2(t){var e=document.createElement("canvas");return e&&e.getContext(t)}var N2=RQ().Class.extend({options:{radius:10,angele:60,spaceAngle:0,count:3,fill:!1,stroke:!0,color:"#3388ff",weight:1,lineCap:"round",lineJoin:"round",fillColor:"#66ccff",fillOpacity:.2,fillRule:"evenodd",opacity:1,strokeWidth:1},initialize:function(t){t=t||{},RQ().Util.setOptions(this,t),this._canvas=document.createElement("canvas"),this._canvas.width=2*(this.options.radius+this.options.weight),this._canvas.height=2*(this.options.radius+this.options.weight),this._ctx=this._canvas.getContext("2d");var e=void 0===this.options.strokeWidth?1:this.options.strokeWidth;this.options.width=2*(this.options.radius+e)+1,this._initStyle()},getStyle:function(){return this._canvas},drawSector:function(t,e,r,n,o,i){o=o/180*Math.PI,i=i/180*Math.PI,t.moveTo(e,r),t.lineTo(e+n*Math.cos(o),r+n*Math.sin(o)),t.arc(e,r,n,o,i),t.lineTo(e,r)},_initStyle:function(){var t=0,e=this.options,r=e.angle;if(e.spaceAngle=360/e.count-e.angle,!(e.spaceAngle<0)){this._ctx.beginPath(),this.anchor=[e.width/2,e.width/2];for(var n=0;n<e.count;n++)this.drawSector(this._ctx,this.anchor[0],this.anchor[1],e.radius,t,r),r=(t=r+e.spaceAngle)+e.angle;this._fillStroke()}},_fillStroke:function(){var t=this.options;t.fill&&(this._ctx.globalAlpha=t.fillOpacity,this._ctx.fillStyle=t.fillColor||t.color,this._ctx.fill(t.fillRule||"evenodd")),t.stroke&&0!==t.weight&&(this._ctx.globalAlpha=t.opacity,this._ctx.lineWidth=t.weight,this._ctx.strokeStyle=t.color,this._ctx.lineCap=t.lineCap,this._ctx.lineJoin=t.lineJoin,this._ctx.stroke())}}),I2=RQ().Class.extend({options:{stroke:!0,color:"#3388ff",weight:1,opacity:1,lineCap:"round",lineJoin:"round",fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",radius:3},initialize:function(t){t=t||{},RQ().Util.setOptions(this,t),this._canvas=document.createElement("canvas"),this._canvas.width=2*(this.options.radius+this.options.weight),this._canvas.height=2*(this.options.radius+this.options.weight),this._ctx=this._canvas.getContext("2d"),this._initStyle()},getCanvas:function(){return this._canvas},getStyle:function(){return this._canvas},_initStyle:function(){this._ctx.beginPath(),this._ctx.arc(this._canvas.width/2,this._canvas.height/2,this.options.radius,0,2*Math.PI),this._fillStroke()},_fillStroke:function(){var t=this.options;t.fill&&(this._ctx.globalAlpha=t.fillOpacity,this._ctx.fillStyle=t.fillColor||t.color,this._ctx.fill(t.fillRule||"evenodd")),t.stroke&&0!==t.weight&&(this._ctx.globalAlpha=t.opacity,this._ctx.lineWidth=t.weight,this._ctx.strokeStyle=t.color,this._ctx.lineCap=t.lineCap,this._ctx.lineJoin=t.lineJoin,this._ctx.stroke())}}),M2=RQ().Class.extend({options:{img:null,origin:[0,0],anchor:null,size:null},initialize:function(t){t=t||{},RQ().Util.setOptions(this,t),this._canvas=document.createElement("canvas"),this._canvas.width=2*(this.options.radius+this.options.weight),this._canvas.height=2*(this.options.radius+this.options.weight),this._ctx=this._canvas.getContext("2d")},getStyle:function(){return this.options}}),R2=RQ().Util.falseFn,L2=RQ().Class.extend({initialize:function(t,e){this.layer=t,e=e||{},RQ().Util.setOptions(this,e)},getRenderer:function(){return this.options.renderer},update:function(){this.getRenderer()._clear(),this.getRenderer()._draw()},_getGraphicAtPoint:function(t){for(var e=this.layer,r=e._map,n=e._getGraphicsInBounds(),o=n.length-1;o>=0;o--){var i=void 0,a=void 0,s=r.latLngToLayerPoint(n[o].getLatLng()),u=n[o].getStyle();if(!u&&this.defaultStyle&&(u=this.defaultStyle),u.img){var l=u.img.width,c=u.img.height;u.size&&u.size[0]&&u.size[1]&&(l=u.size[0],c=u.size[1]);var f=u.anchor||[l/2,c/2];i=RQ().point(s.x-f[0],s.y-f[1]),a=RQ().point(i.x+l,i.y+c)}else i=RQ().point(s.x-u.width/2,s.y-u.height/2),a=RQ().point(s.x+u.width/2,s.y+u.height/2);if(RQ().bounds(i,a).contains(t))return n[o]}return null},containsPoint:function(t){return!!this._getGraphicAtPoint(t)},_handleClick:function(t){t.target=null;var e=this.layer,r=e._map,n=this._getGraphicAtPoint(r.latLngToLayerPoint(t.latlng));if(n)return this.layer._renderer._ctx.canvas.style.cursor="pointer",t.target=n,void("click"===t.type&&e.options.onClick&&e.options.onClick.call(e,n,t));this.layer._renderer._ctx.canvas.style.cursor="auto"},_clearBuffer:R2});RQ().Canvas.include({drawGraphics:function(t,e){var r=this;r._drawing&&t.forEach(function(t){var n=t.getStyle();!n&&e&&(n=e),n.img?r._drawImage.call(r,r._ctx,n,t.getLatLng()):r._drawCanvas.call(r,r._ctx,n,t.getLatLng())})},_drawCanvas:function(t,e,r){var n=e,o=this._map.latLngToLayerPoint(r),i=o.x-n.width/2,a=o.y-n.height/2,s=n.width,u=n.height;t.drawImage(n,i,a,s,u)},_drawImage:function(t,e,r){var n,o;if(e.size){var i=e.size;n=i[0],o=i[1]}else n=e.img.width,o=e.img.height;var a=this._coordinateToPoint(r),s=RQ().point(a),u=RQ().point(e.anchor||[n/2,o/2]);a=[s.x-u.x,s.y-u.y],t.drawImage(e.img,a[0],a[1],n,o)},_coordinateToPoint:function(t){if(!this._map)return t;var e=t;RQ().Util.isArray(t)?e=RQ().latLng(t[0],t[1]):t instanceof RQ().LatLng&&(e=RQ().latLng(t.lat,t.lng));var r=this._map.latLngToLayerPoint(e);return[r.x,r.y]}});var D2=RQ().Util.falseFn,B2=function(){for(var t=document.createElement("div"),e=["transform","WebkitTransform","MozTransform","OTransform","msTransform"],r=0;r<e.length;r++){var n=e[r];if(void 0!==t.style[n])return n}return e[0]}(),F2=RQ().Class.extend({initialize:function(t,e){this.layer=t;var r=e||{};RQ().Util.setOptions(this,r),this.options.radius=this._pixelToMeter(this.options.radius),this._initContainer()},getRenderer:function(){return this},update:function(t){t&&t.length>-1&&(this._data=t),this._renderLayer.setChangeFlags({dataChanged:!0,propsChanged:!0,viewportChanged:!0,updateTriggersChanged:!0}),this._refreshData();var e=this._getLayerState();e.data=this._data||[],this._layerDefaultStyleCache=null,this._renderLayer.setNeedsRedraw(!0),this._renderLayer.setState(e)},drawGraphics:function(t){this._clearBuffer();var e=this.layer._map.getSize();this._container.width!==e.x&&(this._container.width=e.x),this._container.height!==e.y&&(this._container.height=e.y);var r=this.layer._map.getPanes().mapPane._leaflet_pos;this._container.style[B2]="translate("+-Math.round(r.x)+"px,"+-Math.round(r.y)+"px)",this._data=t||[],this._renderLayer||this._createInnerRender(),this._draw()},_initContainer:function(){this._container=this._createCanvas(this.options.width,this.options.height),this._layerContainer=this.options.container,this._wrapper=RQ().DomUtil.create("div","deck-wrapper",this._layerContainer),this._wrapper.appendChild(this._container)},_createCanvas:function(t,e){var r=RQ().DomUtil.create("canvas","graphicLayer  leaflet-layer leaflet-zoom-hide");return r.oncontextmenu=RQ().Util.falseFn,r.width=t,r.height=e,r.style.width=t+"px",r.style.height=e+"px",r},_pixelToMeter:function(t){var e=this.layer._map.getBounds();return t*((e.getEast()-e.getWest())/this.layer._map.getSize().x*(6378137*Math.PI/180))},_createInnerRender:function(){var t=this,e=this._getLayerState(),r=e.color,n=e.radius,o=e.opacity,i=e.highlightColor,a=e.radiusScale,s=e.radiusMinPixels,u=e.radiusMaxPixels,l=e.strokeWidth,c=e.outline,f={id:"scatter-plot",data:t._data,pickable:Boolean(this.options.onClick)||Boolean(this.options.onHover),autoHighlight:!0,color:r,opacity:o,radius:n,radiusScale:a,highlightColor:i,radiusMinPixels:s,radiusMaxPixels:u,strokeWidth:l,coordinateSystem:this._isWGS84()?window.DeckGL.COORDINATE_SYSTEM.LNGLAT_OFFSETS:window.DeckGL.COORDINATE_SYSTEM.LNGLAT,isGeographicCoordinateSystem:this._isWGS84(),outline:c,getPosition:function(t){if(!t)return[0,0,0];var e=t.getLatLng();return e&&[e.lng,e.lat,0]},getColor:function(e){var r=t._getLayerDefaultStyle(),n=e&&e.options;return n&&n.color||r.color},getRadius:function(e){var r=t._getLayerDefaultStyle(),n=e&&e.getStyle();return n&&n.radius||r.radius},updateTriggers:{getColor:[r],getRadius:[n]}},p=this;this.options.onClick&&(f.onClick=function(){p._container.style.cursor="pointer",p.options.onClick.apply(p,arguments)}),this.options.onHover&&(f.onHover=function(){p._container.style.cursor="pointer",p.options.onHover.apply(p,arguments)}),t._renderLayer=new window.DeckGL.ScatterplotLayer(f)},_getLayerDefaultStyle:function(){if(this._layerDefaultStyleCache)return this._layerDefaultStyleCache;var t=this.layer.options,e=t.color,r=t.opacity,n=t.radius,o=t.radiusScale,i=t.radiusMinPixels,a=t.radiusMaxPixels,s=t.strokeWidth,u=t.outline;return n=this._pixelToMeter(n),this._layerDefaultStyleCache={color:e,opacity:r,radius:n,radiusScale:o,radiusMinPixels:i,radiusMaxPixels:a,strokeWidth:s,outline:u},this._layerDefaultStyleCache},_getLayerState:function(){var t=this.layer.getState();return t.zoom=t.zoom-1,t},_draw:function(){var t=this._getLayerState();this._refreshData(),t.data=this._data||[];var e={};for(var r in t)e[r]=t[r];this._layerDefaultStyleCache=null,this._renderLayer.setNeedsRedraw(!0),e.layers=[this._renderLayer],e.canvas=this._container,e.onBeforeRender=this._onBeforeRender.bind(this),e.onAfterRender=this._onAfterRender.bind(this),e.coordinateSystem=this._isWGS84()?window.DeckGL.COORDINATE_SYSTEM.LNGLAT_OFFSETS:window.DeckGL.COORDINATE_SYSTEM.LNGLAT,e.isGeographicCoordinateSystem=this._isWGS84(),this.deckGL?this.deckGL.setProps(e):this.deckGL=new window.DeckGL.experimental.DeckGLJS(e)},_clearBuffer:function(){if(this.deckGL){var t=this.deckGL.layerManager;t&&t.context.gl.clear(t.context.gl.COLOR_BUFFER_BIT)}return this},_refreshData:function(){var t=this._data||[],e=RQ().Util.isArray(t)?[].concat(t):[t];this._renderLayer.props.data||(this._renderLayer.props.data=[]),this._renderLayer.props.data.length=0;for(var r=0;r<e.length;r++)this._renderLayer.props.data.push(e[r]);this._data=this._renderLayer.props.data},_handleClick:D2,_onBeforeRender:D2,_onAfterRender:D2,_removePath:function(){return this._wrapper.parentElement.removeChild(this._wrapper),this._container=null,this._wrapper=null,this},_initPath:D2,_addPath:D2,containsPoint:D2,_isWGS84:function(){return"EPSG:4326"===this.layer._map.options.crs.code}}),U2=["canvas","webgl"],G2={color:[0,0,0,255],opacity:.8,radius:10,radiusScale:1,radiusMinPixels:0,radiusMaxPixels:Number.MAX_SAFE_INTEGER,strokeWidth:1,outline:!1},V2={"EPSG:4326":1.40625,"EPSG:3857":156543.03392804688},z2={"EPSG:4326":1,"EPSG:3857":0},H2=RQ().Path.extend({initialize:function(t,e){this.graphics=[].concat(t);var r=e||{};r.pane="overlayPane",RQ().Util.setOptions(this,r),this.options.render=this.options.render||U2[0],A2.supportWebGL2()||(this.options.render=U2[0]),this.options.interactive&&this.on("click mousemove dblclick mousedown mouseup mouseout contextmenu",this._handleClick,this)},getEvents:function(){return{resize:this._resize.bind(this),moveend:this._moveEnd.bind(this)}},onAdd:function(t){this._map=t,this._crs=t.options.crs,this.defaultStyle=this._getDefaultStyle(this.options),this._renderer=this._createRenderer(),this._container=this._renderer._container,RQ().Path.prototype.onAdd.call(this)},onRemove:function(){this.off("click mousemove dblclick mousedown mouseup contextmenu",this._handleClick,this),this._renderer._removePath(this)},setGraphics:function(t){this.graphics=this.graphics||[],this.graphics.length=0;var e=RQ().Util.isArray(t)?[].concat(t):[t];this.graphics=[].concat(e),this.update()},addGraphics:function(t){this.graphics=this.graphics||[];var e=RQ().Util.isArray(t)?[].concat(t):[t];this.graphics=this.graphics.concat(e),this.update()},getGraphicBy:function(t,e){var r=null;for(var n in this.graphics)if(this.graphics[n][t]===e){r=this.graphics[n];break}return r},getGraphicById:function(t){return this.getGraphicBy("id",t)},getGraphicsByAttribute:function(t,e){var r,n=[];for(var o in this.graphics)(r=this.graphics[o])&&r.attributes&&r.attributes[t]===e&&n.push(r);return n},removeGraphics:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(!t||0===t.length||t===this.graphics)return this.graphics.length=0,void this.update();Tt.isArray(t)||(t=[t]);for(var e=t.length-1;e>=0;e--){var r=t[e],n=Tt.indexOf(this.graphics,r);-1!==n&&this.graphics.splice(n,1)}this.update()},setStyle:function(t){var e=this.options,r={color:e.color,radius:e.radius,opacity:e.opacity,highlightColor:e.highlightColor,radiusScale:e.radiusScale,radiusMinPixels:e.radiusMinPixels,radiusMaxPixels:e.radiusMaxPixels,strokeWidth:e.strokeWidth,outline:e.outline};this.options=RQ().Util.extend(this.options,r,t),this.defaultStyle=this._getDefaultStyle(this.options),this.update()},update:function(){this._layerRenderer.update(this.graphics)},clear:function(){this.removeGraphics()},getRenderer:function(){return this._renderer},getState:function(){var t=this._map,e=t.getSize().x,r=t.getSize().y,n=t.getCenter(),o=n.lng,i=n.lat,a=z2[this._crs.code]||0;V2[this._crs.code]&&this._crs.resolutions&&this._crs.resolutions.length>0&&(a=Math.round(Math.log2(V2[this._crs.code]/this._crs.resolutions[0])));var s={longitude:o,latitude:i,zoom:t.getZoom()+a,maxZoom:t.getMaxZoom()+a,pitch:0,bearing:0},u={};for(var l in s)u[l]=s[l];u.width=e,u.height=r;var c=this.options;return u.color=c.color,u.radius=c.radius,u.opacity=c.opacity,u.highlightColor=c.highlightColor,u.radiusScale=c.radiusScale,u.radiusMinPixels=c.radiusMinPixels,u.radiusMaxPixels=c.radiusMaxPixels,u.strokeWidth=c.strokeWidth,u.outline=c.outline,u},_resize:function(){var t=this._map.getSize();this._container.width=t.x,this._container.height=t.y,this._container.style.width=t.x+"px",this._container.style.height=t.y+"px";var e=this._map.containerPointToLayerPoint([0,0]);RQ().DomUtil.setPosition(this._container,e),this._update()},_moveEnd:function(){this._layerRenderer instanceof F2&&this._update()},_createRenderer:function(){var t,e=this._map,r=e.getSize().x,n=e.getSize().y;if(this.options.render===U2[0])t=new L2(this,{width:r,height:n,renderer:e.getRenderer(this)});else{var o=RQ().Util.setOptions({},G2),i=RQ().Util.setOptions({options:o},this.options);(i=RQ().Util.setOptions(this,i)).container=e.getPane("overlayPane"),i.width=r,i.height=n,t=new F2(this,i)}return t.defaultStyle=this.defaultStyle,this._layerRenderer=t,this._layerRenderer.getRenderer()},_update:function(){this._map&&this._updatePath()},_updatePath:function(){var t=this._getGraphicsInBounds();this._renderer.drawGraphics(t,this.defaultStyle)},_project:function(){var t=this;t._getGraphicsInBounds().map(function(e){var r=t._map.latLngToLayerPoint(e.getLatLng()),n=t._clickTolerance(),o=[e._anchor+n,e._anchor+n];return e._pxBounds=new(RQ().Bounds)(r.subtract(o),r.add(o)),e}),t._pxBounds=RQ().bounds(RQ().point(0,0),RQ().point(this._container.width,this._container.height))},_getDefaultStyle:function(t){var e={};if(t.color){e.fill=!0;var r=this.toRGBA(t.color);e.color=r,e.fillColor=r}return t.opacity&&(e.opacity=t.opacity,e.fillOpacity=t.opacity),t.radius&&(e.radius=t.radius),t.strokeWidth&&(e.weight=t.strokeWidth),t.outline&&(e.stroke=t.outline),new I2(e).getStyle()},toRGBA:function(t){return"rgba(".concat(t[0],",").concat(t[1],",").concat(t[2],",").concat((t[3]||255)/255,")")},_getGraphicsInBounds:function(){var t=[],e=this._map.getBounds();return this.graphics.map(function(r){return e.contains(r.getLatLng())&&t.push(r),r}),t},_handleClick:function(t){this._layerRenderer._handleClick(t)},beforeAdd:RQ().Util.falseFn,_containsPoint:function(t){return this._layerRenderer.containsPoint(t)}}),q2=S1.extend({options:{isOverLay:!0},initialize:function(t,e,r){var n=[];n.push(t),n.push(r),S1.prototype.initialize.apply(this,n),this.chartsType=e,this.themeFields=r&&r.themeFields?r.themeFields:null,this.charts=r&&r.charts?r.charts:[],this.cache=r&&r.cache?r.cache:{},this.chartsSetting=r&&r.chartsSetting?r.chartsSetting:{}},setChartsType:function(t){this.chartsType=t,this.redraw()},addFeatures:function(t){var e=this;e.fire("beforefeaturesadded",{features:t}),this.features=this.toiClientFeature(t),e.renderer&&(e._map?e.redrawThematicFeatures(e._map.getBounds()):e.redrawThematicFeatures())},redrawThematicFeatures:function(t){var e=this;e.renderer.clearAll();var r=e.features;if(this.options.alwaysMapCRS&&t&&t instanceof RQ().LatLngBounds){var n=this._map.options.crs;t=RQ().bounds(n.project(t.getSouthWest()),n.project(t.getNorthEast()))}t=A0.toSuperMapBounds(t);for(var o=0,i=r.length;o<i;o++){var a=r[o],s=a.geometry.getBounds();if(!t||t.intersectsBounds(s)){var u=e.cache,l=a.id;if(!u[l]){u[l]=l;var c=e.createThematicFeature(a),f=e.overlayWeightField&&a.attributes[e.overlayWeightField]&&!isNaN(a.attributes[e.overlayWeightField]);c&&f&&(c.__overlayWeight=a.attributes[e.overlayWeightField]),c&&e.charts.push(c)}}}e.drawCharts()},createThematicFeature:function(t){var e,r=this;return uV[r.chartsType]&&r.themeFields&&r.chartsSetting&&(e=new uV[r.chartsType](t,r,r.themeFields,r.chartsSetting)),!!e&&(e.assembleShapes(),e)},drawCharts:function(){var t=this;t.renderer&&(t.overlayWeightField&&t._sortChart(),t.options&&!t.options.isOverLay?t._addOverlayShape():t._addNoOverlayShape(),t.renderer.render())},getShapesByFeatureID:function(t){var e=[],r=this.renderer.getAllShapes();if(!t)return r;for(var n=0,o=r.length;n<o;n++){var i=r[n];i.refDataID&&t===i.refDataID&&e.push(i)}return e},isQuadrilateralOverLap:function(t,e){var r=t.length,n=e.length;if(5!==r||5!==n)return null;for(var o=!1,i=0;i<r;i++)if(this.isPointInPoly(t[i],e)){o=!0;break}for(var a=0;a<n;a++)if(this.isPointInPoly(e[a],t)){o=!0;break}for(var s=0;s<r-1&&!o;s++)for(var u=0;u<n-1;u++){if("SuperMap.Geometry.Point"===Tt.lineIntersection(t[s],t[s+1],e[u],e[u+1]).CLASS_NAME){o=!0;break}}return o},isPointInPoly:function(t,e){for(var r=!1,n=-1,o=e.length,i=o-1;++n<o;i=n)(e[n].y<=t.y&&t.y<e[i].y||e[i].y<=t.y&&t.y<e[n].y)&&t.x<(e[i].x-e[n].x)*(t.y-e[n].y)/(e[i].y-e[n].y)+e[n].x&&(r=!r);return r},isChartInMap:function(t,e){for(var r=t,n=!1,o=0,i=e.length;o<i;o++){var a=e[o];if(a.x>=r.left&&a.x<=r.right&&a.y>=r.top&&a.y<=r.bottom){n=!0;break}}return n},clearCache:function(){this.cache={},this.charts=[]},removeFeatures:function(t){this.clearCache(),S1.prototype.removeFeatures.call(this,t)},removeAllFeatures:function(){this.clearCache(),S1.prototype.removeAllFeatures.apply(this,arguments)},redraw:function(){return this.clearCache(),S1.prototype.redraw.apply(this,arguments)},clear:function(){var t=this;t.renderer&&(t.renderer.clearAll(),t.renderer.refresh()),t.removeAllFeatures(),t.clearCache()},getWeightFieldValue:function(t,e,r){if((void 0===r||isNaN(r))&&(r=0),!t.attributes)return r;var n=t.attributes[e];return(void 0===n||isNaN(n))&&(n=r),n},_sortChart:function(){this.charts&&this.charts.sort(function(t,e){return void 0===t.__overlayWeight&&void 0===e.__overlayWeight?0:void 0!==t.__overlayWeight&&void 0===e.__overlayWeight?-1:void 0===t.__overlayWeight&&void 0!==e.__overlayWeight?1:void 0!==t.__overlayWeight&&void 0!==e.__overlayWeight?parseFloat(t.__overlayWeight)<parseFloat(e.__overlayWeight)?1:-1:0})},_addOverlayShape:function(){for(var t=this.charts,e=0,r=t.length;e<r;e++)for(var n=t[e],o=n.resetLocation(),i=n.shapes,a=0,s=i.length;a<s;a++)i[a].refOriginalPosition=o,this.renderer.addShape(i[a])},_addNoOverlayShape:function(){var t=this,e=t._map.getBounds(),r=this._map.options.crs;this.options.alwaysMapCRS&&(e=RQ().bounds(r.project(e.getSouthWest()),r.project(e.getNorthEast()))),e=A0.toSuperMapBounds(e);for(var n=t.charts,o=[],i=t.getLocalXY(new It(e.left,e.top)),a=t.getLocalXY(new It(e.right,e.bottom)),s=new Dt(i[0],a[1],a[0],i[1]),u=0,l=n.length;u<l;u++){var c=n[u],f=c.resetLocation(),p=c.chartBounds,h=[{x:p.left,y:p.top},{x:p.left,y:p.bottom},{x:p.right,y:p.bottom},{x:p.right,y:p.top},{x:p.left,y:p.top}];if(!s||t.isChartInMap(s,h)){for(var y=!1,d=0;d<o.length;d++)if(t.isQuadrilateralOverLap(h,o[d])){y=!0;break}if(!y){o.push(h);for(var v=c.shapes,m=0,b=v.length;m<b;m++)v[m].refOriginalPosition=f,t.renderer.addShape(v[m])}}}}}),J2=q2.extend({initialize:function(t,e,r){q2.prototype.initialize.apply(this,arguments),this.symbolType=e,this.symbolSetting={}},setSymbolType:function(t){this.symbolType=t,this.redraw()},createThematicFeature:function(t){var e,r=this;return uV[r.symbolType]&&r.themeField&&r.symbolSetting&&(e=new uV[r.symbolType](t,r,[r.themeField],r.symbolSetting)),!!e&&(e.assembleShapes(),e)}}),W2=RQ().SVG.extend({initialize:function(t,e,r){RQ().SVG.prototype.initialize.call(this,r),this._tileCoord=t,this._size=e,this._initContainer(),this._container.setAttribute("width",this._size.x),this._container.setAttribute("height",this._size.y),this._container.setAttribute("viewBox",[0,0,this._size.x,this._size.y].join(" ")),this._layers={}},getCoord:function(){return this._tileCoord},getContainer:function(){return this._container},onAdd:RQ().Util.falseFn,addTo:function(t){if(this._map=t,this.options.interactive)for(var e in this._layers){var r=this._layers[e];r._path.style.pointerEvents="auto",this._map._targets[RQ().stamp(r._path)]=r}},removeFrom:function(t){var e=t||this._map;if(this.options.interactive)for(var r in this._layers){var n=this._layers[r];delete e._targets[RQ().stamp(n._path)]}delete this._map},_addPath:function(t){this._rootGroup||this._initContainer(),this._rootGroup||(this._rootGroup=this._container),this._rootGroup.appendChild(t._path),this._layers[RQ().stamp(t)]=t},_updateIcon:function(t){var e=t._path=RQ().SVG.create("image"),r=t.options,n=r.iconUrl;if(r.iconSize){var o=RQ().point(r.iconSize),i=o&&o.divideBy(2,!0),a=t._point.subtract(i);e.setAttribute("x",a.x),e.setAttribute("y",a.y),e.setAttribute("width",o.x+"px"),e.setAttribute("height",o.y+"px")}else{var s=new Image;s.src=n,RQ().DomEvent.on(s,"load",function(){var r=RQ().point([s.width,s.height]),n=r&&r.divideBy(2,!0),o=t._point.subtract(n);e.setAttribute("x",o.x),e.setAttribute("y",o.y),e.setAttribute("width",r.x+"px"),e.setAttribute("height",r.y+"px")})}e.setAttribute("href",n)}}),K2=RQ().Canvas.extend({initialize:function(t,e,r){RQ().Canvas.prototype.initialize.call(this,r),this._tileCoord=t,this._size=e,this._initContainer(),this._container.setAttribute("width",this._size.x),this._container.setAttribute("height",this._size.y),this._layers={},this._drawnLayers={},this._drawing=!0,r.interactive&&(this._container.style.pointerEvents="auto")},getCoord:function(){return this._tileCoord},getContainer:function(){return this._container},getOffset:function(){return this._tileCoord.scaleBy(this._size).subtract(this._map.getPixelOrigin())},onAdd:RQ().Util.falseFn,addTo:function(t){this._map=t},removeFrom:function(t){delete this._map},_updateDashArray:function(t){var e=t.options.dashArray;if(e&&"string"==typeof e){var r,n=e.split(","),o=[];for(r=0;r<n.length;r++)o.push(Number(n[r]));t.options._dashArray=o}else t.options._dashArray=e},_onClick:function(t){var e,r,n=this._map.mouseEventToLayerPoint(t).subtract(this.getOffset());for(var o in this._layers)(e=this._layers[o]).options.interactive&&e._containsPoint(n)&&!this._map._draggableMoved(e)&&(r=e);r&&(RQ().DomEvent.stop(t),this._fireEvent([r],t))},_onMouseMove:function(t){if(this._map&&!this._map.dragging.moving()&&!this._map._animatingZoom){var e=this._map.mouseEventToLayerPoint(t).subtract(this.getOffset());this._handleMouseHover(t,e)}},_updateIcon:function(t){if(this._drawing){var e=t.options,r=this._ctx,n=t._getImage();if(e.iconSize&&n.complete){var o=RQ().point(e.iconSize),i=o&&o.divideBy(2,!0),a=t._point.subtract(i);r.drawImage(n,a.x,a.y,o.x,o.y)}else RQ().DomEvent.on(n,"load",function(){var e=RQ().point([n.width,n.height]),o=e&&e.divideBy(2,!0),i=t._point.subtract(o);r.drawImage(n,i.x,i.y,e.x,e.y)});this._drawnLayers[t._leaflet_id]=t}}}),Y2="LABEL",Q2="TEXT",X2="POINT",Z2="LINE",$2="REGION",t3=RQ().Class.extend({initialize:function(t){this.properties=t.properties,this.type=t.type,this.layerName=t.layerName},render:function(t,e){this._renderer=t,this._container=t._container,this.options=e,t._initPath(this),t._updateStyle(this);var r=this.getElement();r&&this.layerName&&RQ().DomUtil.addClass(r,this.layerName)},updateStyle:function(t,e){this.options=e,t._updateStyle(this)},getElement:function(){return this._path||this._renderer._container},_getPixelBounds:function(){for(var t=this._parts,e=RQ().bounds([]),r=0;r<t.length;r++)for(var n=t[r],o=0;o<n.length;o++)e.extend(n[o]);var i=this._clickTolerance(),a=new(RQ().Point)(i,i);return e.min._subtract(a),e.max._add(a),e},_clickTolerance:RQ().Path.prototype._clickTolerance});function e3(t){"@babel/helpers - typeof";return(e3="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var r3=RQ().Path.extend({includes:t3.prototype,options:{color:"white",fillColor:"black",fill:!0,fillOpacity:1,opacity:.6,weight:1,rotation:0,stroke:!0,fontFamily:"Arial Unicode MS Regular",fontSize:14,fontWeight:"normal",textAlign:"center",offsetX:1,offsetY:1},initialize:function(t,e){t3.prototype.initialize.call(this,t),this._makeFeatureParts(t,e),this.options.offsetX=e||1,this.options.offsetY=e||1},render:function(t,e){if(this.properties.texts&&(this._text=this.properties.texts[0]),!this._text){var r=this.properties.attributes;this._text=r&&this.properties.textField&&r[this.properties.textField]||""}var n=this.options;this._pxBounds=RQ().bounds(this._point,this._point),t3.prototype.render.apply(this,[t,e]),this.options=RQ().Util.extend(n,e),this._updatePath()},_makeFeatureParts:function(t,e){e=e||{x:1,y:1};var r=t.geometry[0];"object"===e3(r[0])&&"x"in r[0]?(this._point=RQ().point(r[0]).scaleBy(e),this._empty=RQ().Util.falseFn):(this._point=RQ().point(r).scaleBy(e),this._empty=RQ().Util.falseFn)},makeInteractive:function(){this._updateBounds()},updateStyle:function(t,e){return this._updateBounds(),t3.prototype.updateStyle.call(this,t,e)},_updateBounds:function(){var t=this._renderer._getTextWidth(this),e=[t/2,t/2];this._pxBounds=RQ().bounds(this._point.subtract(e),this._point.add(e))},_updatePath:function(){this._renderer._updateText(this)},_containsPoint:function(t){return!1}});function n3(t){"@babel/helpers - typeof";return(n3="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}K2.include({_getTextWidth:function(t){return this._ctx.measureText(t._text).width},_updateText:function(t){if(this._drawing&&!t._empty()){var e=this.getContainer(),r=this._map.getSize();e.width=r.x,e.height=r.y,e.style.width=r.x+"px",e.style.height=r.y+"px";var n=this._ctx,o=t.options,i=o.offsetX||1,a=o.offsetY||1,s=t._point.subtract(RQ().point(i,a));o.fill&&(this._drawnLayers[t._leaflet_id]=t,n.fillRect(0,0,r.x,r.y),n.font=[o.fontWeight?o.fontWeight:"normal",o.fontSize?o.fontSize:"14px",o.fontFamily?o.fontFamily:"Arial Unicode MS Regular,Microsoft Yahei"].join(" "),n.textAlign=o.textAlign,n.lineWidth=o.weight,n.fillStyle=o.fillColor,n.fillText(t._text,s.x,s.y),n.strokeStyle=o.color,n.strokeText(t._text,s.x,s.y),n.rotate(o.rotation))}}}),W2.include({_getTextWidth:function(t){return t._path.getComputedTextLength()||0},_initPath:function(t){var e;r3&&t instanceof r3?(e=t._path=RQ().SVG.create("text")).textContent=t._text:e=t._path=RQ().SVG.create("path"),t.options.className&&RQ().DomUtil.addClass(e,t.options.className),t.options.interactive&&RQ().DomUtil.addClass(e,"leaflet-interactive"),this._updateStyle(t),this._layers[RQ().stamp(t)]=t},_updateText:function(t){var e=t._path,r=t.options,n=r.offsetX||1,o=r.offsetY||1,i=t._point.subtract(RQ().point(n,o));e.setAttribute("x",i.x),e.setAttribute("y",i.y),r.rotation=r.rotation||0,e.setAttribute("transform","rotate("+r.rotation/Math.PI*180+" "+i.x+" "+i.y+")"),e.setAttribute("text-anchor","center"===r.textAlign?"middle":r.textAlign),e.style.fontSize=r.fontSize,e.style.fontFamily=r.fontFamily,e.style.fontWeight=r.fontWeight||"normal",e.style.glyphOrientationVertical=r.rotation||"",r.stroke?(e.setAttribute("stroke",r.color),e.setAttribute("stroke-linecap","round"),e.setAttribute("stroke-linejoin","round"),e.setAttribute("stroke-opacity",r.opacity),e.setAttribute("stroke-width",r.weight>1?r.weight/10:r.weight)):e.setAttribute("stroke","none"),r.fill?(e.setAttribute("fill",r.fillColor||r.color),e.setAttribute("fill-opacity",r.fillOpacity)):e.setAttribute("fill","none")}});var o3,i3=RQ().CircleMarker.extend({includes:t3.prototype,statics:{iconCache:{}},initialize:function(t,e){t3.prototype.initialize.call(this,t),this._makeFeatureParts(t,e)},getLatLng:void 0,render:function(t,e){t3.prototype.render.call(this,t,e),this._radius=e.radius||RQ().CircleMarker.prototype.options.radius,this._updatePath()},_makeFeatureParts:function(t,e){e=e||{x:1,y:1};var r=t.geometry[0];"object"===n3(r[0])&&"x"in r[0]?(this._point=RQ().point(r[0]).scaleBy(e),this._empty=RQ().Util.falseFn):(this._point=RQ().point(r).scaleBy(e),this._empty=RQ().Util.falseFn)},makeInteractive:function(){this._updateBounds()},updateStyle:function(t,e){return this._radius=e.radius||this._radius,this._updateBounds(),t3.prototype.updateStyle.call(this,t,e)},_updateBounds:function(){if(this.options.iconUrl&&this.options.iconSize){var t=RQ().point(this.options.iconSize),e=t&&t.divideBy(2,!0),r=this._point.subtract(e);this._pxBounds=new(RQ().Bounds)(r,r.add(t))}else RQ().CircleMarker.prototype._updateBounds.call(this)},_updatePath:function(){this.options.iconUrl?this._renderer._updateIcon(this):RQ().CircleMarker.prototype._updatePath.call(this)},_getImage:function(){if(!this.options.iconUrl)return null;var t=this.options.iconUrl,e=i3.iconCache[t];if(!e){var r=this.options.iconSize||[50,50];e=i3.iconCache[t]=this._createIcon(t,r)}return e},_createIcon:function(t,e){var r=t;if(!r)throw new Error("iconUrl not set in Icon options (see the docs).");var n=document.createElement("img");n.src=r,n.className="leaflet-marker-icon "+(this.layerName||"");var o=e;if("number"==typeof o&&(o=[o,o]),o){var i=RQ().point(o),a=RQ().point(i&&i.divideBy(2,!0));i&&(n.style.width=i.x+"px",n.style.height=i.y+"px"),a&&(n.style.marginLeft=-a.x+"px",n.style.marginTop=-a.y+"px")}return n.onload=function(){o||(n.style.width=this.width+"px",n.style.height=this.height+"px")},n},_containsPoint:function(t){return this.options.iconUrl?this._pxBounds.contains(t):RQ().CircleMarker.prototype._containsPoint.call(this,t)}}),a3={_makeFeatureParts:function(t,e){e=e||{x:1,y:1};var r,n=t.geometry;this._parts=[];for(var o=0;o<n.length;o++){for(var i=n[o],a=[],s=0;s<i.length;s++)r=i[s],a.push(RQ().point(r).scaleBy(e));this._parts.push(a)}},makeInteractive:function(){this._pxBounds=this._getPixelBounds()}},s3=RQ().Polyline.extend({includes:[t3.prototype,a3],initialize:function(t,e){t3.prototype.initialize.call(this,t),this._makeFeatureParts(t,e)},render:function(t,e){e.fill=!1,t3.prototype.render.call(this,t,e),this._updatePath()},updateStyle:function(t,e){e.fill=!1,t3.prototype.updateStyle.call(this,t,e)}}),u3=RQ().Polygon.extend({includes:[t3.prototype,a3],initialize:function(t,e){t3.prototype.initialize.call(this,t),this._makeFeatureParts(t,e)},render:function(t,e){t3.prototype.render.call(this,t,e),this._updatePath()}}),l3=r(7965),c3=r.n(l3),f3=r(779),p3=RQ().Class.extend({initialize:function(t){this.url=t},getTile:function(){var t=this;return co.get(t.url,null,{timeout:1e4}).then(function(t){return t.ok?t.blob().then(function(t){var e=new FileReader;return new Promise(function(r){e.addEventListener("loadend",function(){var t=new(c3())(e.result);return r(new f3.VectorTile(t))}),e.readAsArrayBuffer(t)})}):{layers:[]}}).then(function(e){return t._processVectorTileSpec(e)})},_processVectorTileSpec:function(t){var e=[];for(var r in t.layers){for(var n=[],o=0;o<t.layers[r].length;o++){var i=t.layers[r].feature(o);switch(i.geometry=i.loadGeometry(),i.layerName=r,i.properties={attributes:RQ().Util.extend({},i.properties),id:i.id},i.type){case 1:i.type=X2;break;case 2:i.type=Z2;break;case 3:i.type=$2}n.push(i)}var a={};a.features=n,a.layerName=r,a.extent=t.layers[r].extent,e.push(a)}return e}}),h3=RQ().Class.extend({initialize:function(t){this.url=t},getTile:function(){var t=this;return co.get(t.url,null,{timeout:1e4}).then(function(t){return t.json()}).then(function(e){return t._processRecordSets(e,t)})},_processRecordSets:function(t,e){var r=t.recordsets;if(!(r=e._convertToGeoJSON(r)))return null;for(var n=0;n<r.length;n++){for(var o=r[n],i=0;i<o.features.length;i++){var a=o.features[i];(a=e._convertToVectorLayerFeature(a,e)).layerName=o.layerName,o.features[i]=a}o.extent=256,delete o.fieldTypes,delete o.fields}return r},_convertToVectorLayerFeature:function(t,e){if(t.geometry){var r,n,o,i,a={},s=t.geometry,u=s.type,l=s.coordinates,c=t.properties,f=c.id;if("Point"===u)a=c&&c.texts?e._createFeature(f,Q2,[l],c):e._createFeature(f,X2,[l],c);else if("MultiPoint"===u)a=e._createFeature(f,X2,l,c);else if("LineString"===u)a=e._createFeature(f,Z2,[l],c);else if("MultiLineString"===u||"Polygon"===u){for(o=[],r=0;r<l.length;r++)i=l[r],"Polygon"===u&&(i.outer=0===r),o.push(i);var p="Polygon"===u?$2:Z2;a=e._createFeature(f,p,o,c)}else{if("MultiPolygon"!==u)throw new Error("Illegal GeoJSON object");for(o=[],r=0;r<l.length;r++)for(n=0;n<l[r].length;n++)(i=l[r][n]).outer=0===n,o.push(i);a=e._createFeature(f,$2,o,c)}return a}},_convertToGeoJSON:function(t){if(t){for(var e=0;e<t.length;e++){for(var r=t[e],n=0;n<r.features.length;n++){for(var o=r.features[n],i=[],a=0,s=0;s<o.geometry.parts.length;s++){for(var u=2*o.geometry.parts[s],l=0,c=a;l<u;l+=2,c+=2){var f=o.geometry.points[c],p=o.geometry.points[c+1];i.push({x:f,y:p})}a+=u}o.geometry.points=i}r.features=H0(r.features).features}return t}},_createFeature:function(t,e,r,n){return{id:t,type:e,geometry:r,properties:n}}}),y3={JSON:"JSON",MVT:"MVT",PBF:"PBF"},d3=RQ().Class.extend({initialize:function(t,e){this.layer=t.layer,this.tileSize=t.layer.getTileSize(),this.format=t.format,this.coords=t.coords,this.renderer=t.renderer,this.done=e,this.layer._textVectorTiles={}},renderTile:function(){var t=this,e=t.layer,r=t.coords,n=e._getTileUrl(r);([y3.MVT,y3.PBF].indexOf(t.format.toUpperCase())>-1?new p3(n):new h3(n)).getTile().then(function(e){t.render(e,r)})},render:function(t,e){if(t){for(var r=this,n=r.renderer,o=r.layer,i=0;i<t.length;i++){var a=t[i],s=a.layerName;o._dataLayerNames[s]=!0;for(var u=r.tileSize.divideBy(a.extent),l=o.getLayerStyleInfo(a.layerName),c=0;c<a.features.length;c++){var f=a.features[c];if(f){l&&l.type===Y2&&f.type===X2&&f.properties.attributes&&(f.type=Q2);var p=r._getStyleOptions(e,f,s,r);if(p.length){var h=r._createFeatureLayer(f,u);if(h){var y={scope:r,coords:e,renderer:n};if(!r._extractTextLayer(f,h,p,y)){for(var d=0;d<p.length;d++){var v=r._validateStyle(p[d],f.type);h.render(n,v),n._addPath(h)}o.options.interactive&&h.makeInteractive();var m=o._getFeatureKey(f.id,s);n._features[m]={layerName:s,feature:h}}}}}}}o._map&&n.addTo(o._map),RQ().Util.requestAnimFrame(r.done.bind(e,null,r.layer._vectorTiles[r.layer._tileCoordsToKey(e)]))}},_extractTextLayer:function(t,e,r,n){if(t.type!==Q2)return!1;var o=n.scope,i=n.coords,a=o.layer,s=a._tileCoordsToKey(i),u=t.id,l=t.layerName,c=a._textVectorTiles[s];return c||(c={layers:{},coords:i,renderer:n.renderer}),c.layers[u]={layer:e,style:r,layerName:l},a._textVectorTiles[s]=c,!0},_getStyleOptions:function(t,e,r,n){var o=n,i=o.layer,a=i.getVectorTileLayerStyle(t,e)||o._defaultStyle(e.type),s=e.id,u=i._getFeatureKey(s,r),l=i._overriddenStyles[u];return a=(a=(a=l||a)instanceof Function?a(e.properties,t.z):a)instanceof Array?a:[a]},_createFeatureLayer:function(t,e){var r;switch(t.type){case X2:r=new i3(t,e);break;case Z2:r=new s3(t,e);break;case $2:r=new u3(t,e);break;case Q2:r=new r3(t,e)}var n=this.layer;return r&&n.options.interactive&&r.addEventParent(n),r},_validateStyle:function(t,e){switch(RQ().Path.prototype.options.weight=1,RQ().Path.prototype.options.fillOpacity=1,e){case X2:return RQ().extend({},RQ().CircleMarker.prototype.options,t);case Z2:return RQ().extend({},RQ().Polyline.prototype.options,t);case $2:return RQ().extend({},RQ().Polygon.prototype.options,t);case Q2:return RQ().extend({},r3.prototype.options,t)}},_defaultStyle:function(t){var e=RQ().Path.prototype.options;switch(e.weight=1,e.fillOpacity=1,e.radius=3,t){case X2:return RQ().extend({},e,RQ().CircleMarker.prototype.options);case Z2:return RQ().extend({},e,RQ().Polyline.prototype.options);case $2:return RQ().extend({},e,RQ().Polygon.prototype.options);case Q2:return RQ().extend({},e,r3.prototype.options)}}}),v3=RQ().GridLayer.extend({options:{vectorTileLayerStyles:null,renderer:"SVG",format:y3.JSON,interactive:!0,maxZoom:23},initialize:function(t){var e=this;RQ().setOptions(e,t),RQ().GridLayer.prototype.initialize.call(e,t),e._vectorTiles={},e._overriddenStyles={},e.vectorTileLayerStyles=e.options.vectorTileLayerStyles,e.on("tileunload",function(t){var r=e._tileCoordsToKey(t.coords),n=e._vectorTiles[r];n&&e._map&&n.removeFrom(e._map),delete e._vectorTiles[r]},e),e.on("tileerror ",e._renderText,e),e.on("load",e._renderText,e),e._dataLayerNames={}},createTile:function(t,e){var r=this,n=r.getTileSize(),o=null;return o="Canvas"===r.options.renderer?new K2(t,n,r.options):new W2(t,n,r.options),r._vectorTiles[r._tileCoordsToKey(t)]=o,o._features={},new d3({layer:r,format:r.options.format,coords:t,renderer:o},e).renderTile(),o.getContainer()},getStyles:function(){return this.vectorTileLayerStyles},getStyle:function(t){return this.vectorTileLayerStyles&&this.vectorTileLayerStyles[t]},setFeatureStyle:function(t,e,r){var n=this._getFeatureKey(t,e);for(var o in this._overriddenStyles[n]=r,this._vectorTiles){var i=this._vectorTiles[o],a=i._features[n];if(a){var s=a.feature;this._updateStyles(s,i,r)}}return this},resetFeatureStyle:function(t,e){var r=this._getFeatureKey(t,e);for(var n in delete this._overriddenStyles[r],this._vectorTiles){var o=this._vectorTiles[n],i=o._features[r];if(i){var a=i.feature,s=this.vectorTileLayerStyles[i.layerName];this._updateStyles(a,o,s)}}return this},getDataLayerNames:function(){return Object.keys(this._dataLayerNames)},_removeAllTiles:function(){RQ().GridLayer.prototype._removeAllTiles.call(this),this._textVectorTiles={}},_renderText:function(){var t=this._textVectorTiles;for(var e in t){var r=t[e],n=r.renderer;for(var o in r.layers){for(var i=r.layers[o],a=i.style,s=i.layer,u=0;u<a.length;u++)s.render(n,a[u]),n._addPath(s);this.options.interactive&&s.makeInteractive()}}},_getFeatureKey:function(t,e){return(t=t||0)+"_"+(e=e||"null")},_updateStyles:function(t,e,r){(r=r instanceof Function?r(t.properties,e.getCoord().z):r)instanceof Array||(r=[r]);for(var n=0;n<r.length;n++){var o=this._extendStyle(r[n],t.type);t.updateStyle(e,o)}},_extendStyle:function(t,e){switch(e){case X2:return RQ().extend({},RQ().CircleMarker.prototype.options,t);case Z2:return RQ().extend({},RQ().Polyline.prototype.options,t);case $2:return RQ().extend({},RQ().Polygon.prototype.options,t);case Q2:return RQ().extend({},r3.prototype.options,t)}}}),m3=v3.extend({options:{crs:null,cartoCSS:null,layerNames:null,layersID:null,serverCartoCSSStyle:!0,processCharacters:!1,returnAttributes:!1,expands:null,cacheEnabled:!1,tileTemplate:null,subdomains:"abc",timeout:1e4,attribution:O0.Common.attribution},initialize:function(t,e){(e=e||{}).noWrap=null==e.noWrap||e.noWrap,RQ().setOptions(this,e),v3.prototype.initialize.call(this,e),RQ().stamp(this);var r=this;if(!t||t.indexOf("http")<0)return t="",this;r.url=t,t.indexOf("/")===t.length-1&&(t=t.substr(0,t.length-1),r.url=t),this.cartoCSSToLeaflet=new m1(r.url),r.initLayersInfo(),!r.options.serverCartoCSSStyle&&r.options.cartoCSS&&r.setClientCartoCSS(r.options.cartoCSS)},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._map=t,this._initLayerUrl(),!this.options.tileTemplate&&this.options.serverCartoCSSStyle||this._initGrid()},initLayersInfo:function(){var t=this,e=Tt.urlPathAppend(t.url,"layers");co.get(yo.appendCredential(e),null,{timeout:t.options.timeout}).then(function(t){return t.json()}).then(function(e){if(t.layersInfoInitialized=!0,t.layersInfo=e,t.layersInfo){for(var r={},n=0,o=t.layersInfo.length;n<o;n++)for(var i=t.layersInfo[n].subLayers.layers,a=0,s=i.length;a<s;a++)i[a].layerIndex=s-a,r[i[a].name]=i[a];t.layersInfo=r,t.cartoCSSToLeaflet.layersInfo=r,t.options.serverCartoCSSStyle&&t.getVectorStylesFromServer()}}).catch(function(t){console.error("error",t)})},getLayerStyleInfo:function(t){var e,r=this;if(r.layersStyles=r.layersStyles||{},e=r.layersStyles[t])return e;if(!r.layersInfo)return{};var n=r.layersInfo[t];if(!n)return null;switch(e={layerIndex:n.layerIndex,ugcLayerType:n.ugcLayerType},n.ugcLayerType){case"VECTOR":e.layerStyle=n.style?n.style:null;break;case"THEME":var o=n.theme;e.layerStyle=o?o.defaultStyle:null,o&&"LABEL"===o.type&&(e.type=o.type,e.textField=o.labelExpression);break;default:n.style&&(e.layerStyle=n.style)}return r.layersStyles[t]=e,e},getVectorStylesFromServer:function(){var t=this,e=Tt.urlPathAppend(t.url,"tileFeature/vectorstyles");co.get(yo.appendCredential(e),null,{timeout:t.options.timeout}).then(function(t){return t.json()}).then(function(e){if(!e||!e.style)return null;e.style&&"cartoCSS"===e.type&&t.setServerCartoCSS(e.style),t.options&&t.setClientCartoCSS(t.options.cartoCSS),t._initGrid()}).catch(function(t){console.error("error",t)})},setServerCartoCSS:function(t){this.cartoCSSToLeaflet.pretreatedCartoCSS(t,!0)},setClientCartoCSS:function(t){var e=!1;this.options.processCharacters&&(e=this.options.processCharacters),this.cartoCSSToLeaflet.pretreatedCartoCSS(t,e)},getVectorTileLayerStyle:function(t,e){if(!e)return null;var r=this,n=e.layerName,o=r.getLayerStyleInfo(n);if(o&&o.textField){var i=o.textField;if(i&&i.indexOf(".")){var a=i.split(".");i=a&&a.length>0&&a[a.length-1]}e.properties.textField=i}r.vectorTileLayerStyles=r.vectorTileLayerStyles||{};var s=r.vectorTileLayerStyles[n];if(s)return e=this._mergeFeatureTextField(e,s),s;var u=this.getScaleFromCoords(t),l=this.cartoCSSToLeaflet.pickShader(n)||[];for(var c in s=[],l)for(var f=l[c],p=0;p<f.length;p++){var h=this.cartoCSSToLeaflet.getValidStyleFromCarto(t.z,u,f[p],e,this.options.serverCartoCSSStyle);h&&s.push(h)}return"TEXT"!==(e=this._mergeFeatureTextField(e,s)).type&&0!==s.length||(s=this.cartoCSSToLeaflet.getValidStyleFromLayerInfo(e,o),"TEXT"===e.type&&(s.textName="["+e.properties.textField+"]")),r.vectorTileLayerStyles[n]=s,s},getScale:function(t){var e=t||this._map.getZoom();return this.scales[e]},getScaleFromCoords:function(t){var e,r=this;return r.scales&&r.scales[t.z]?r.scales[t.z]:(r.scales=r.scales||{},e=r.getDefaultScale(t),r.scales[t.z]=e,e)},getDefaultScale:function(t){var e=this._crs;if(e.scales)return e.scales[t.z];var r=this._tileCoordsToBounds(t),n=e.project(r.getNorthEast()),o=e.project(r.getSouthWest()),i=this.options.tileSize,a=Math.max(Math.abs(n.x-o.x)/i,Math.abs(n.y-o.y)/i),s=c.METER;if(e.code){var u=e.code.split(":");if(u&&u.length>1){var l=parseInt(u[1]);s=l&&l>=4e3&&l<=5e3?c.DEGREE:c.METER}}return W0(a,96,s)},_mergeFeatureTextField:function(t,e){if(!this.options.serverCartoCSSStyle||!e||"TEXT"!==t.type)return t;var r=e;RQ().Util.isArray(e)||(r=[e]);for(var n=0;n<r.length;n++){var o=r[n].textName;o&&t.properties&&(t.properties.textField=o.substring(1,o.length-1))}return t},_getTileUrl:function(t){return this.options.tileTemplate?this._getTileTemplateUrl(t):this._getDefaultTileUrl(t)},_getTileTemplateUrl:function(t){var e=this,r=e.options.tileTemplate,n={s:e._getSubdomain(t),x:t.x,y:t.y,z:t.z};if(e._map&&!e._map.options.crs.infinite){var o=e._globalTileRange.max.y-t.y;e.options.tms&&(n.y=o),n["-y"]=o}return RQ().Util.template(r,RQ().extend(n,e.options))},_initGrid:function(){v3.prototype.onAdd.call(this,this._map)},_getSubdomain:RQ().TileLayer.prototype._getSubdomain,_getDefaultTileUrl:function(t){var e=t.x,r=t.y,n=this._tileUrl+"&x="+e+"&y="+r;return n+="&scale="+this.getScaleFromCoords(t)},_initLayerUrl:function(){var t=this.options;if(this.url){var e=t.format.toString().toLowerCase();this._tileUrl=Tt.urlPathAppend(this.url,"tileFeature."+e),this._tileUrl=Tt.urlAppend(this._tileUrl,encodeURI(this._createURLParam(t)))}},_createURLParam:function(t){var e=[],r=this._getCredential(this._tileUrl);if(r&&e.push(r),t.layersID&&e.push("layersID="+t.layersID),t.layerNames){RQ().Util.isArray(t.layerNames)||(t.layerNames=[t.layerNames]);var n="["+t.layerNames.join(",")+"]";e.push("layerNames="+n)}var o=this._crs;if(o.options&&o.options.origin)e.push("origin="+JSON.stringify({x:o.options.origin[0],y:o.options.origin[1]}));else if(o.projection&&o.projection.bounds){var i=o.projection.bounds,a=RQ().point(i.min.x,i.max.y);e.push("origin="+JSON.stringify({x:a.x,y:a.y}))}t.expands&&e.push("expands="+t.expands),e.push("returnAttributes="+t.returnAttributes),e.push("cacheEnabled="+t.cacheEnabled);var s=this.options.tileSize;return e.push("width="+s),e.push("height="+s),e.join("&")},_getCredential:function(t){var e=yo.getToken(t),r=e?new dr(e,"token")||new dr(e,"key"):null;return r?r.getUrlParameters():null}}),b3=function(){try{return turf}catch(t){return{}}}(),g3=RQ().GeoJSON.extend({turfMap:{"Measurement.along":["line","distance","units"],"Measurement.area":["geojson"],"Measurement.bbox":["geojson"],"Measurement.bboxPolygon":["bbox"],"Measurement.bearing":["start","end","final"],"Measurement.center":["geojson","properties"],"Measurement.centerOfMass":["geojson","properties"],"Measurement.centroid":["geojson","properties"],"Measurement.destination":["origin","distance","bearing","units"],"Measurement.distance":["from","to","units"],"Measurement.envelope":["geojson"],"Measurement.length":["geojson","units"],"Measurement.midpoint":["point1","point2"],"Measurement.pointOnFeature":["geojson"],"Measurement.polygonTangents":["point","polygon"],"Measurement.rhumbBearing":["start","end","final"],"Measurement.rhumbDestination":["origin","distance","bearing","units"],"Measurement.rhumbDistance":["from","to","units"],"Measurement.square":["bbox"],"Measurement.greatCircle":["start","end","properties","npoints","offset"],"CoordinateMutation.cleanCoords":["geojson","mutate"],"CoordinateMutation.flip":["geojson","mutate"],"CoordinateMutation.rewind":["geojson","reverse","mutate"],"CoordinateMutation.round":["num","precision"],"CoordinateMutation.truncate":["geojson","precision","coordinates","mutate"],"Transformation.bboxClip":["feature","bbox"],"Transformation.bezierSpline":["line","resolution","sharpness"],"Transformation.buffer":["geojson","radius","units","steps"],"Transformation.circle":["center","radius","steps","units","properties"],"Transformation.clone":["geojson"],"Transformation.concave":["points","maxEdge","units"],"Transformation.convex":["geojson","concavity"],"Transformation.difference":["polygon1","polygon2"],"Transformation.dissolve":["featureCollection","propertyName"],"Transformation.intersect":["poly1","poly2"],"Transformation.lineOffset":["geojson","distance","units"],"Transformation.simplify":["feature","tolerance","highQuality"],"Transformation.tesselate":["poly"],"Transformation.transformRotate":["geojson","angle","pivot","mutate"],"Transformation.transformTranslate":["geojson","distance","direction","units","zTranslation","mutate"],"Transformation.transformScale":["geojson","factor","origin","mutate"],"Transformation.union":["A"],"Transformation.voronoi":["points","bbox"],"featureConversion.combine":["fc"],"featureConversion.explode":["geojson"],"featureConversion.flatten":["geojson"],"featureConversion.lineStringToPolygon":["lines","properties","autoComplete","orderCoords"],"featureConversion.polygonize":["geojson"],"featureConversion.polygonToLineString":["polygon","properties"],"Misc.kinks":["featureIn"],"Misc.lineArc":["center","radius","bearing1","bearing2","steps","units"],"Misc.lineChunk":["geojson","segmentLength","units","reverse"],"Misc.lineIntersect":["line1","line2"],"Misc.lineOverlap":["line1","line2"],"Misc.lineSegment":["geojson"],"Misc.lineSlice":["startPt","stopPt","line"],"Misc.lineSliceAlong":["line","startDist","stopDist","units"],"Misc.lineSplit":["line","splitter"],"Misc.mask":["polygon","mask"],"Misc.pointOnLine":["lines","pt","units"],"Misc.sector":["center","radius","bearing1","bearing2","steps","units"],"Misc.shortestPath":["start","end","obstacles","units","resolution"],"Misc.unkinkPolygon":["geojson"],"Helper.featureCollection":["features","bbox","id"],"Helper.feature":["geometry","properties","bbox","id"],"Helper.geometryCollection":["geometries","properties","bbox","id"],"Helper.lineString":["coordinates","properties","bbox","id"],"Helper.multiLineString":["coordinates","properties","bbox","id"],"Helper.multiPoint":["coordinates","properties","bbox","id"],"Helper.multiPolygon":["coordinates","properties","bbox","id"],"Helper.point":["coordinates","properties","bbox","id"],"Helper.polygon":["coordinates","properties","bbox","id"],"Data.sample":["featurecollection","num"],"Interpolation.interpolate":["points","cellSize","gridType","property","units","weight"],"Interpolation.isobands":["pointGrid","breaks","zProperty","commonProperties","breaksProperties"],"Interpolation.isolines":["pointGrid","breaks","zProperty","commonProperties","breaksProperties"],"Interpolation.planepoint":["point","triangle"],"Interpolation.tin":["points","z"],"Joins.pointsWithinPolygon":["points","polygons"],"Joins.tag":["points","polygons","field","outField","mask","properties"],"Grids.hexGrid":["bbox","cellSide","units","triangles"],"Grids.pointGrid":["bbox","cellSide","units","mask","properties"],"Grids.squareGrid":["bbox","cellSide","units","mask","properties"],"Grids.triangleGrid":["bbox","cellSide","units","mask","properties"],"Classification.nearestPoint":["targetPoint","points"],"Aggregation.collect":["polygons","points","inProperty","outProperty"],"Aggregation.clustersDbscan":["points","maxDistance","units","minPoints","mutate"],"Aggregation.clustersKmeans":["points","numberOfClusters","mutate"],"Meta.coordAll":["geojson"],"Meta.coordEach":["geojson","callback","excludeWrapCoord"],"Meta.coordReduce":["geojson","callback","initialValue","excludeWrapCoord"],"Meta.featureEach":["geojson","callback"],"Meta.featureReduce":["geojson","callback","initialValue"],"Meta.flattenEach":["geojson","callback"],"Meta.flattenReduce":["geojson","callback","initialValue"],"Meta.getCoord":["coord"],"Meta.getCoords":["coords"],"Meta.getGeom":["geojson"],"Meta.getGeomType":["geojson","name"],"Meta.geomEach":["geojson","callback"],"Meta.geomReduce":["geojson","callback","initialValue"],"Meta.propEach":["geojson","callback"],"Meta.propReduce":["geojson","callback","initialValue"],"Meta.segmentEach":["geojson","callback"],"Meta.segmentReduce":["geojson","callback","initialValue"],"Meta.getCluster":["geojson","filter"],"Meta.clusterEach":["geojson","property","callback"],"Meta.clusterReduce":["geojson","property","callback","initialValue"],"Assertions.collectionOf":["featureCollection","type","name"],"Assertions.containsNumber":["coordinates"],"Assertions.geojsonType":["value","type","name"],"Assertions.featureOf":["feature","type","name"],"Booleans.booleanClockwise":["line"],"Booleans.booleanContains":["feature1","feature2"],"Booleans.booleanCrosses":["feature1","feature2"],"Booleans.booleanDisjoint":["feature1","feature2"],"Booleans.booleanEqual":["feature1","feature2"],"Booleans.booleanOverlap":["feature1","feature2"],"Booleans.booleanParallel":["feature1","feature2"],"Booleans.booleanPointInPolygon":["point","polygon","ignoreBoundary"],"Booleans.booleanPointOnLine":["point","linestring","ignoreEndVertices"],"UnitConversion.bearingToAngle":["bearing"],"UnitConversion.convertArea":["area","originalUnit","finalUnit"],"UnitConversion.convertLength":["length","originalUnit","finalUnit"],"UnitConversion.degreesToradians":["degrees"],"UnitConversion.lengthToRadians":["distance","units"],"UnitConversion.lengthToDegrees":["distance","units"],"UnitConversion.radiansToLength":["radians","units"],"UnitConversion.radiansToDegrees":["radians"],"UnitConversion.toMercator":["geojson","mutate"],"UnitConversion.toWgs84":["geojson","mutate"]},options:{attribution:O0.Turf.attribution},initialize:function(t){t=t||{},RQ().Util.setOptions(this,t),RQ().stamp(this),this._layers={}},turfOptionMap:{"Measurement.along":["line","distance",{units:""}],"Measurement.bboxPolygon":["bbox",{properties:"",id:""}],"Measurement.bearing":["start","end",{final:""}],"Measurement.center":["geojson",{properties:""}],"Measurement.destination":["origin","distance","bearing",{units:"",properties:""}],"Measurement.distance":["from","to",{units:""}],"Measurement.length":["geojson",{units:""}],"Measurement.rhumbBearing":["start","end",{final:""}],"Measurement.rhumbDestination":["origin","distance","bearing",{units:"",properties:""}],"Measurement.rhumbDistance":["from","to",{units:""}],"Measurement.greatCircle":["start","end",{properties:"",npoints:"",offset:""}],"CoordinateMutation.cleanCoords":["geojson",{mutate:""}],"CoordinateMutation.flip":["geojson",{mutate:""}],"CoordinateMutation.rewind":["geojson",{mutate:"",reverse:""}],"CoordinateMutation.truncate":["geojson",{precision:"",coordinates:"",mutate:""}],"Transformation.bezierSpline":["line",{resolution:"",sharpness:""}],"Transformation.buffer":["geojson","radius",{units:"",steps:""}],"Transformation.circle":["center","radius",{units:"",steps:"",properties:""}],"Transformation.concave":["points",{maxEdge:"",units:""}],"Transformation.convex":["geojson",{concavity:""}],"Transformation.dissolve":["featureCollection",{propertyName:""}],"Transformation.lineOffset":["geojson","distance",{units:""}],"Transformation.simplify":["geojson",{tolerance:"",highQuality:""}],"Transformation.transformRotate":["geojson","angle",{pivot:"",mutate:""}],"Transformation.transformTranslate":["geojson","distance","direction",{units:"",zTranslation:"",mutate:""}],"Transformation.transformScale":["geojson","factor",{origin:"",mutate:""}],"Transformation.voronoi":["points",{bbox:""}],"featureConversion.lineStringToPolygon":["lines",{properties:"",autoComplete:"",orderCoords:""}],"featureConversion.polygonToLineString":["polygon",{properties:""}],"Misc.lineArc":["center","radius","bearing1","bearing2",{steps:"",units:""}],"Misc.lineChunk":["geojson","segmentLength",{units:"",reverse:""}],"Misc.lineOverlap":["line1","line2",{tolerance:""}],"Misc.lineSliceAlong":["line","startDist","stopDist",{units:""}],"Misc.pointOnLine":["lines","pt",{units:""}],"Misc.sector":["center","radius","bearing1","bearing2",{units:"",steps:"",properties:""}],"Misc.shortestPath":["start","end",{obstacles:"",units:"",resolution:""}],"Helper.feature":["geometry","properties",{bbox:"",id:""}],"Helper.geometryCollection":["geometries","properties",{bbox:"",id:""}],"Helper.lineString":["coordinates","properties",{bbox:"",id:""}],"Helper.multiLineString":["coordinates","properties",{bbox:"",id:""}],"Helper.multiPoint":["coordinates","properties",{bbox:"",id:""}],"Helper.multiPolygon":["coordinates","properties",{bbox:"",id:""}],"Helper.point":["coordinates","properties",{bbox:"",id:""}],"Helper.polygon":["coordinates","properties",{bbox:"",id:""}],"Interpolation.interpolate":["points","cellSize",{gridType:"",property:"",units:"",weight:""}],"Interpolation.isobands":["pointGrid","breaks",{zProperty:"",commonProperties:"",breaksProperties:""}],"Interpolation.isolines":["pointGrid","breaks",{zProperty:"",commonProperties:"",breaksProperties:""}],"Grids.hexGrid":["bbox","cellSide",{units:"",triangles:"",properties:"",mask:""}],"Grids.pointGrid":["bbox","cellSide",{units:"",mask:"",properties:""}],"Grids.squareGrid":["bbox","cellSide",{units:"",mask:"",properties:""}],"Grids.triangleGrid":["bbox","cellSide",{units:"",mask:"",properties:""}],"Aggregation.clustersDbscan":["points","maxDistance",{units:"",minPoints:"",mutate:""}],"Aggregation.clustersKmeans":["points",{numberOfClusters:"",mutate:""}],"Booleans.booleanPointInPolygon":["point","polygon",{ignoreBoundary:""}],"Booleans.booleanPointOnLine":["point","linestring",{ignoreEndVertices:""}],"UnitConversion.toMercator":["geojson",{mutate:""}],"UnitConversion.toWgs84":["geojson",{mutate:""}]},process:function(t,e,r,n){var o;try{o=b3[t.split(".")[1]].apply(this,this.parse(t,e))}catch(r){o=b3[t.split(".")[1]].apply(this,this.parseOption(t,e))}(n=null==n||n)&&this.addData([o]),r&&r(o)},parse:function(t,e){if("Transformation.union"===t)return e.A;var r=[],n=this.turfMap[t];return n&&n.map(function(t){return r.push(e[t]),e[t]}),r},parseOption:function(t,e){var r=[];return this.turfOptionMap[t].map(function(t){if(t instanceof Object){var n=t;Object.keys(n).forEach(function(t){n[t]=e[t]}),r.push(n)}else r.push(e[t]);return e}),r}}),S3=RQ().Class.extend({initialize:function(t,e){this.geometry=t,this.attributes=e},toFeature:function(){var t=this.geometry,e=[];if(t instanceof RQ().LatLng)e=[t.lng,t.lat];else if(t instanceof RQ().Point)e=[t.x,t.y];else if(t instanceof RQ().CircleMarker){var r=t.getLatLng();e=[r.lng,r.lat]}else e=t;return 2===e.length&&(t=new he(e[0],e[1])),new mn(t,this.attributes)}}),w3=RQ().Layer.extend({options:{alwaysMapCRS:!1,id:Tt.createUniqueID("heatMapLayer_"),featureWeight:null,opacity:1,colors:["blue","cyan","lime","yellow","red"],useGeoUnit:!1,radius:50,attribution:O0.Common.attribution},initialize:function(t,e){RQ().Util.setOptions(this,e),this.name=t,this.features=[],this.maxWeight=null,this.minWeight=null,this.rootCanvas=null,this.canvasContext=null,this.maxWidth=null,this.maxHeight=null,this.id=this.options.id,this.featureWeight=this.options.featureWeight,this.colors=this.options.colors,this.useGeoUnit=this.options.useGeoUnit,this.opacity=this.options.opacity,this.radius=this.options.radius,this.blur=this.options.blur,this.movingOffset=[0,0]},onRemove:function(t){RQ().DomUtil.remove(this.rootCanvas),t.off("mousemove",this.mouseMoveHandler)},onAdd:function(t){var e=this;if(e._map=t,e._createCanvasContainer(),e.rootCanvas){var r=t.getSize();e.rootCanvas.width=e.maxWidth=r.x,e.rootCanvas.height=e.maxHeight=r.y,e._updateOpacity(),e.mouseMoveHandler=function(t){var r=t.layerPoint;e.currentMousePosition=RQ().point(r.x+e.movingOffset[0],r.y+e.movingOffset[1])},t.on("mousemove",e.mouseMoveHandler),e.update()}else t.removeLayer(e)},addFeatures:function(t){this.features=this.toiClientFeature(t),this.refresh()},refresh:function(){if(0!==this.features.length&&this._map){var t=this._map.getBounds();this.updateHeatPoints(t)}},updateHeatPoints:function(t){this.features&&this.features.length>0?this.convertFastToPixelPoints(t):this.canvasContext.clearRect(0,0,this.maxWidth,this.maxWidth)},convertFastToPixelPoints:function(t){var e,r,n,o,i,a,s,u=[],l=t.getEast()-t.getWest(),c=t.getNorth()-t.getSouth(),f=this._map.getSize();o=l/f.x>c/f.y?l/f.x:c/f.y,this.useRadius=this.useGeoUnit?parseInt(this.radius/o):this.radius;for(var p=0;p<this.features.length;p++){var h=this.features[p],y=h.geometry,d=this.getLocalXY(new It(y.x,y.y));this.featureWeight?(d.weight=h.attributes[this.featureWeight],this.maxWeight||(i=i||d.weight,a=a||d.weight,i=Math.max(i,d.weight),a=Math.min(a,d.weight))):d.weight=1,e=Math.floor(d[0]),r=Math.floor(d[1]),n=d.weight,u.push([e,r,n])}this.maxWeight?this.draw(u,this.maxWeight):(s=i&&a?(i+a)/2:1,this.draw(u,s))},draw:function(t,e){if(!(this.maxHeight>0&&this.maxWidth>0))return!1;var r=this.canvasContext;this.canvasContext.clearRect(0,0,this.maxWidth,this.maxHeight),this.drawCircle(this.useRadius),this.createGradient();for(var n=0;n<t.length;n++){var o=t[n];this.canvasContext.globalAlpha=Math.max(o[2]/e,.05),this.canvasContext.drawImage(this.circle,o[0]-this.useRadius,o[1]-this.useRadius)}var i=r.getImageData(0,0,this.maxWidth,this.maxHeight);this.colorize(i.data,this.grad),r.putImageData(i,0,0)},colorize:function(t,e){for(var r,n=0;n<t.length;n+=4)(r=4*t[n+3])&&(t[n]=e[r],t[n+1]=e[r+1],t[n+2]=e[r+2])},drawCircle:function(t){var e=this.blur||t/2,r=this.circle=document.createElement("canvas"),n=r.getContext("2d");r.height=2*t,r.width=2*t,n.shadowOffsetX=n.shadowOffsetY=2*t,n.shadowBlur=e,n.shadowColor="#000000",n.beginPath(),n.arc(-t,-t,t/2,0,2*Math.PI,!0),n.closePath(),n.fill()},createGradient:function(){var t=this.colors,e=document.createElement("canvas"),r=e.getContext("2d"),n=r.createLinearGradient(0,0,0,256);e.height=256,e.width=1;for(var o=1,i=0,a=t.length;i<a;i++)n.addColorStop(o/a,t[i]),o++;r.fillStyle=n,r.fillRect(0,0,1,256),this.grad=r.getImageData(0,0,1,256).data},update:function(){var t=this._map.containerPointToLayerPoint([0,0]);RQ().DomUtil.setPosition(this.rootCanvas,t);var e=this;e.refresh(),e.currentMousePosition&&(e.currentMousePosition=RQ().point(e.currentMousePosition.x-e.movingOffset[0],e.currentMousePosition.y-e.movingOffset[1])),e.movingOffset=[0,0],e._zoom=e._map.getZoom(),e._center=e._map.getCenter()},getLocalXY:function(t){if(!this._map)return t;var e=t;RQ().Util.isArray(t)&&(e=RQ().point(t[0],t[1])),t instanceof RQ().Point||(e=t instanceof he||t instanceof ke?RQ().point(t.x,t.y):RQ().point(t.lon,t.lat));var r=this._map.latLngToContainerPoint(this.options.alwaysMapCRS?this._map.options.crs.unproject(e):RQ().latLng(e.y,e.x));return[r.x,r.y]},setOpacity:function(t){t!==this.options.opacity&&(t&&(this.options.opacity=t),this._updateOpacity())},removeFeatures:function(t){if(t&&0!==t.length&&this.features&&0!==this.features.length){if(t===this.features)return this.removeAllFeatures();Tt.isArray(t)||(t=[t]);for(var e,r,n=[],o=0,i=t.length;o<i;o++)e=t[o],-1!==(r=Tt.indexOf(this.features,e))?this.features.splice(r,1):n.push(e);var a=0==n.length;this._map.fire("featuresremoved",{features:n,succeed:a}),this.refresh()}},removeAllFeatures:function(){this.features=[],this.refresh()},_createCanvasContainer:function(){var t=this.getPane(),e="heatMapLayer leaflet-layer leaflet-zoom-"+(this._map.options.zoomAnimation&&RQ().Browser.any3d?"animated":"hide");this.rootCanvas=RQ().DomUtil.create("canvas",e,t);var r=RQ().DomUtil.testProp(["transformOrigin","WebkitTransformOrigin","msTransformOrigin"]);this.rootCanvas.id=this.id,this.rootCanvas.style[r]="50% 50%",this.rootCanvas.style.position="absolute",this.rootCanvas.style.zIndex=200,Tt.modifyDOMElement(this.rootCanvas,null,null,null,null,null,null,this.opacity),this.canvasContext=this.rootCanvas.getContext("2d")},_updateOpacity:function(){var t=this;Tt.modifyDOMElement(t.rootCanvas,null,null,null,null,null,null,t.options.opacity),null!==t._map&&t._map.fire("changelayer",{layer:t,property:"opacity"})},getEvents:function(){var t={zoomend:this._reset,moveend:this._reset,resize:this._resize};return this._map._zoomAnimated&&(t.zoomanim=this._zoomAnim),t},toiClientFeature:function(t){RQ().Util.isArray(t)||(t=[t]);for(var e=[],r=0,n=t.length;r<n;r++)if(t[r]instanceof S3)e.push(t[r].toFeature());else if(-1!=["FeatureCollection","Feature","Geometry"].indexOf(t[r].type)){var o=new Ln;e=e.concat(o.read(t[r]))}else{if(!t[r].geometry||!t[r].geometry.parts)throw new Error("Features's type does not match, please check.");e.push(NC.fromJson(t[r]).toFeature())}return e},_zoomAnim:function(t){var e=this._map.getZoomScale(t.zoom),r=this._map._getCenterOffset(t.center)._multiplyBy(-e).subtract(this._map._getMapPanePos());RQ().DomUtil.setTransform?RQ().DomUtil.setTransform(this.rootCanvas,r,e):this.rootCanvas.style[RQ().DomUtil.TRANSFORM]=RQ().DomUtil.getTranslateString(r)+" scale("+e+")"},_reset:function(){var t=this;t.update();var e=t._map.getSize(),r=this._map.containerPointToLayerPoint([0,0]);RQ().DomUtil.setPosition(this.rootCanvas,r),parseFloat(t.rootCanvas.width)!==parseFloat(e.x)&&(t.rootCanvas.width=e.x),parseFloat(t.rootCanvas.height)!==parseFloat(e.y)&&(t.rootCanvas.height=e.y),t.refresh()},_resize:function(){var t=this._map.getSize();this.maxWidth=t.x,this.maxHeight=t.y}}),_3=r(833),O3=r.n(_3);!function(t){t[t.Unknown=0]="Unknown",t[t.Point=1]="Point",t[t.LineString=2]="LineString",t[t.Polygon=3]="Polygon",t[t.MultiPoint=4]="MultiPoint",t[t.MultiLineString=5]="MultiLineString",t[t.MultiPolygon=6]="MultiPolygon",t[t.GeometryCollection=7]="GeometryCollection",t[t.CircularString=8]="CircularString",t[t.CompoundCurve=9]="CompoundCurve",t[t.CurvePolygon=10]="CurvePolygon",t[t.MultiCurve=11]="MultiCurve",t[t.MultiSurface=12]="MultiSurface",t[t.Curve=13]="Curve",t[t.Surface=14]="Surface",t[t.PolyhedralSurface=15]="PolyhedralSurface",t[t.TIN=16]="TIN",t[t.Triangle=17]="Triangle"}(o3||(o3={}));var E3,P3=new Int32Array(2),x3=new Float32Array(P3.buffer),T3=new Float64Array(P3.buffer),C3=1===new Uint16Array(new Uint8Array([1,0]).buffer)[0];function k3(t){"@babel/helpers - typeof";return(k3="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function A3(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,j3(n.key),n)}}function j3(t){var e=function(t,e){if("object"!=k3(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=k3(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==k3(e)?e:e+""}!function(t){t[t.UTF8_BYTES=1]="UTF8_BYTES",t[t.UTF16_STRING=2]="UTF16_STRING"}(E3||(E3={}));var N3=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.bytes_=e,this.position_=0,this.text_decoder_=new TextDecoder}return e=t,n=[{key:"allocate",value:function(e){return new t(new Uint8Array(e))}}],(r=[{key:"clear",value:function(){this.position_=0}},{key:"bytes",value:function(){return this.bytes_}},{key:"position",value:function(){return this.position_}},{key:"setPosition",value:function(t){this.position_=t}},{key:"capacity",value:function(){return this.bytes_.length}},{key:"readInt8",value:function(t){return this.readUint8(t)<<24>>24}},{key:"readUint8",value:function(t){return this.bytes_[t]}},{key:"readInt16",value:function(t){return this.readUint16(t)<<16>>16}},{key:"readUint16",value:function(t){return this.bytes_[t]|this.bytes_[t+1]<<8}},{key:"readInt32",value:function(t){return this.bytes_[t]|this.bytes_[t+1]<<8|this.bytes_[t+2]<<16|this.bytes_[t+3]<<24}},{key:"readUint32",value:function(t){return this.readInt32(t)>>>0}},{key:"readInt64",value:function(t){return BigInt.asIntN(64,BigInt(this.readUint32(t))+(BigInt(this.readUint32(t+4))<<BigInt(32)))}},{key:"readUint64",value:function(t){return BigInt.asUintN(64,BigInt(this.readUint32(t))+(BigInt(this.readUint32(t+4))<<BigInt(32)))}},{key:"readFloat32",value:function(t){return P3[0]=this.readInt32(t),x3[0]}},{key:"readFloat64",value:function(t){return P3[C3?0:1]=this.readInt32(t),P3[C3?1:0]=this.readInt32(t+4),T3[0]}},{key:"writeInt8",value:function(t,e){this.bytes_[t]=e}},{key:"writeUint8",value:function(t,e){this.bytes_[t]=e}},{key:"writeInt16",value:function(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8}},{key:"writeUint16",value:function(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8}},{key:"writeInt32",value:function(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8,this.bytes_[t+2]=e>>16,this.bytes_[t+3]=e>>24}},{key:"writeUint32",value:function(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8,this.bytes_[t+2]=e>>16,this.bytes_[t+3]=e>>24}},{key:"writeInt64",value:function(t,e){this.writeInt32(t,Number(BigInt.asIntN(32,e))),this.writeInt32(t+4,Number(BigInt.asIntN(32,e>>BigInt(32))))}},{key:"writeUint64",value:function(t,e){this.writeUint32(t,Number(BigInt.asUintN(32,e))),this.writeUint32(t+4,Number(BigInt.asUintN(32,e>>BigInt(32))))}},{key:"writeFloat32",value:function(t,e){x3[0]=e,this.writeInt32(t,P3[0])}},{key:"writeFloat64",value:function(t,e){T3[0]=e,this.writeInt32(t,P3[C3?0:1]),this.writeInt32(t+4,P3[C3?1:0])}},{key:"getBufferIdentifier",value:function(){if(this.bytes_.length<this.position_+4+4)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");for(var t="",e=0;e<4;e++)t+=String.fromCharCode(this.readInt8(this.position_+4+e));return t}},{key:"__offset",value:function(t,e){var r=t-this.readInt32(t);return e<this.readInt16(r)?this.readInt16(r+e):0}},{key:"__union",value:function(t,e){return t.bb_pos=e+this.readInt32(e),t.bb=this,t}},{key:"__string",value:function(t,e){t+=this.readInt32(t);var r=this.readInt32(t);t+=4;var n=this.bytes_.subarray(t,t+r);return e===E3.UTF8_BYTES?n:this.text_decoder_.decode(n)}},{key:"__union_with_string",value:function(t,e){return"string"==typeof t?this.__string(e):this.__union(t,e)}},{key:"__indirect",value:function(t){return t+this.readInt32(t)}},{key:"__vector",value:function(t){return t+this.readInt32(t)+4}},{key:"__vector_len",value:function(t){return this.readInt32(t+this.readInt32(t))}},{key:"__has_identifier",value:function(t){if(4!=t.length)throw new Error("FlatBuffers: file identifier must be length 4");for(var e=0;e<4;e++)if(t.charCodeAt(e)!=this.readInt8(this.position()+4+e))return!1;return!0}},{key:"createScalarList",value:function(t,e){for(var r=[],n=0;n<e;++n){var o=t(n);null!==o&&r.push(o)}return r}},{key:"createObjList",value:function(t,e){for(var r=[],n=0;n<e;++n){var o=t(n);null!==o&&r.push(o.unpack())}return r}}])&&A3(e.prototype,r),n&&A3(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,r,n}();function I3(t){"@babel/helpers - typeof";return(I3="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function M3(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,R3(n.key),n)}}function R3(t){var e=function(t,e){if("object"!=I3(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=I3(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==I3(e)?e:e+""}var L3,D3=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.bb=null,this.bb_pos=0}return e=t,n=[{key:"getRootAsGeometry",value:function(e,r){return(r||new t).__init(e.readInt32(e.position())+e.position(),e)}},{key:"getSizePrefixedRootAsGeometry",value:function(e,r){return e.setPosition(e.position()+4),(r||new t).__init(e.readInt32(e.position())+e.position(),e)}},{key:"startGeometry",value:function(t){t.startObject(8)}},{key:"addEnds",value:function(t,e){t.addFieldOffset(0,e,0)}},{key:"createEndsVector",value:function(t,e){t.startVector(4,e.length,4);for(var r=e.length-1;r>=0;r--)t.addInt32(e[r]);return t.endVector()}},{key:"startEndsVector",value:function(t,e){t.startVector(4,e,4)}},{key:"addXy",value:function(t,e){t.addFieldOffset(1,e,0)}},{key:"createXyVector",value:function(t,e){t.startVector(8,e.length,8);for(var r=e.length-1;r>=0;r--)t.addFloat64(e[r]);return t.endVector()}},{key:"startXyVector",value:function(t,e){t.startVector(8,e,8)}},{key:"addZ",value:function(t,e){t.addFieldOffset(2,e,0)}},{key:"createZVector",value:function(t,e){t.startVector(8,e.length,8);for(var r=e.length-1;r>=0;r--)t.addFloat64(e[r]);return t.endVector()}},{key:"startZVector",value:function(t,e){t.startVector(8,e,8)}},{key:"addM",value:function(t,e){t.addFieldOffset(3,e,0)}},{key:"createMVector",value:function(t,e){t.startVector(8,e.length,8);for(var r=e.length-1;r>=0;r--)t.addFloat64(e[r]);return t.endVector()}},{key:"startMVector",value:function(t,e){t.startVector(8,e,8)}},{key:"addT",value:function(t,e){t.addFieldOffset(4,e,0)}},{key:"createTVector",value:function(t,e){t.startVector(8,e.length,8);for(var r=e.length-1;r>=0;r--)t.addFloat64(e[r]);return t.endVector()}},{key:"startTVector",value:function(t,e){t.startVector(8,e,8)}},{key:"addTm",value:function(t,e){t.addFieldOffset(5,e,0)}},{key:"createTmVector",value:function(t,e){t.startVector(8,e.length,8);for(var r=e.length-1;r>=0;r--)t.addInt64(e[r]);return t.endVector()}},{key:"startTmVector",value:function(t,e){t.startVector(8,e,8)}},{key:"addType",value:function(t,e){t.addFieldInt8(6,e,o3.Unknown)}},{key:"addParts",value:function(t,e){t.addFieldOffset(7,e,0)}},{key:"createPartsVector",value:function(t,e){t.startVector(4,e.length,4);for(var r=e.length-1;r>=0;r--)t.addOffset(e[r]);return t.endVector()}},{key:"startPartsVector",value:function(t,e){t.startVector(4,e,4)}},{key:"endGeometry",value:function(t){return t.endObject()}},{key:"createGeometry",value:function(e,r,n,o,i,a,s,u,l){return t.startGeometry(e),t.addEnds(e,r),t.addXy(e,n),t.addZ(e,o),t.addM(e,i),t.addT(e,a),t.addTm(e,s),t.addType(e,u),t.addParts(e,l),t.endGeometry(e)}}],(r=[{key:"__init",value:function(t,e){return this.bb_pos=t,this.bb=e,this}},{key:"ends",value:function(t){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readUint32(this.bb.__vector(this.bb_pos+e)+4*t):0}},{key:"endsLength",value:function(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__vector_len(this.bb_pos+t):0}},{key:"endsArray",value:function(){var t=this.bb.__offset(this.bb_pos,4);return t?new Uint32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}},{key:"xy",value:function(t){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readFloat64(this.bb.__vector(this.bb_pos+e)+8*t):0}},{key:"xyLength",value:function(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}},{key:"xyArray",value:function(){var t=this.bb.__offset(this.bb_pos,6);return t?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}},{key:"z",value:function(t){var e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readFloat64(this.bb.__vector(this.bb_pos+e)+8*t):0}},{key:"zLength",value:function(){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}},{key:"zArray",value:function(){var t=this.bb.__offset(this.bb_pos,8);return t?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}},{key:"m",value:function(t){var e=this.bb.__offset(this.bb_pos,10);return e?this.bb.readFloat64(this.bb.__vector(this.bb_pos+e)+8*t):0}},{key:"mLength",value:function(){var t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}},{key:"mArray",value:function(){var t=this.bb.__offset(this.bb_pos,10);return t?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}},{key:"t",value:function(t){var e=this.bb.__offset(this.bb_pos,12);return e?this.bb.readFloat64(this.bb.__vector(this.bb_pos+e)+8*t):0}},{key:"tLength",value:function(){var t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}},{key:"tArray",value:function(){var t=this.bb.__offset(this.bb_pos,12);return t?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}},{key:"tm",value:function(t){var e=this.bb.__offset(this.bb_pos,14);return e?this.bb.readUint64(this.bb.__vector(this.bb_pos+e)+8*t):BigInt(0)}},{key:"tmLength",value:function(){var t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__vector_len(this.bb_pos+t):0}},{key:"type",value:function(){var t=this.bb.__offset(this.bb_pos,16);return t?this.bb.readUint8(this.bb_pos+t):o3.Unknown}},{key:"parts",value:function(e,r){var n=this.bb.__offset(this.bb_pos,18);return n?(r||new t).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*e),this.bb):null}},{key:"partsLength",value:function(){var t=this.bb.__offset(this.bb_pos,18);return t?this.bb.__vector_len(this.bb_pos+t):0}}])&&M3(e.prototype,r),n&&M3(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,r,n}();function B3(t,e){for(var r=[],n=0;n<t.length;n+=2){var o=[t[n],t[n+1]];e&&o.push(e[n>>1]),r.push(o)}return r}function F3(t,e,r){if(!r||0===r.length)return[B3(t,e)];var n,o=0,i=Array.from(r).map(function(e){return t.slice(o,o=e<<1)});return e&&(o=0,n=Array.from(r).map(function(t){return e.slice(o,o=t)})),i.map(function(t,e){return B3(t,n?n[e]:void 0)})}function U3(t,e){var r=e;if(r===o3.Unknown&&(r=t.type()),r===o3.GeometryCollection){for(var n=[],o=0;o<t.partsLength();o++){var i=t.parts(o),a=i.type();n.push(U3(i,a))}return{type:o3[r],geometries:n}}if(r===o3.MultiPolygon){for(var s=[],u=0;u<t.partsLength();u++)s.push(U3(t.parts(u),o3.Polygon));return{type:o3[r],coordinates:s.map(function(t){return t.coordinates})}}var l=function(t,e){var r=t.xyArray(),n=t.zArray();switch(e){case o3.Point:var o=Array.from(r);return n&&o.push(n[0]),o;case o3.MultiPoint:case o3.LineString:return B3(r,n);case o3.MultiLineString:case o3.Polygon:return F3(r,n,t.endsArray())}}(t,r);return{type:o3[r],coordinates:l}}function G3(t){"@babel/helpers - typeof";return(G3="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function V3(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,z3(n.key),n)}}function z3(t){var e=function(t,e){if("object"!=G3(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=G3(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==G3(e)?e:e+""}!function(t){t[t.Byte=0]="Byte",t[t.UByte=1]="UByte",t[t.Bool=2]="Bool",t[t.Short=3]="Short",t[t.UShort=4]="UShort",t[t.Int=5]="Int",t[t.UInt=6]="UInt",t[t.Long=7]="Long",t[t.ULong=8]="ULong",t[t.Float=9]="Float",t[t.Double=10]="Double",t[t.String=11]="String",t[t.Json=12]="Json",t[t.DateTime=13]="DateTime",t[t.Binary=14]="Binary"}(L3||(L3={}));var H3=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.bb=null,this.bb_pos=0}return e=t,n=[{key:"getRootAsColumn",value:function(e,r){return(r||new t).__init(e.readInt32(e.position())+e.position(),e)}},{key:"getSizePrefixedRootAsColumn",value:function(e,r){return e.setPosition(e.position()+4),(r||new t).__init(e.readInt32(e.position())+e.position(),e)}},{key:"startColumn",value:function(t){t.startObject(11)}},{key:"addName",value:function(t,e){t.addFieldOffset(0,e,0)}},{key:"addType",value:function(t,e){t.addFieldInt8(1,e,L3.Byte)}},{key:"addTitle",value:function(t,e){t.addFieldOffset(2,e,0)}},{key:"addDescription",value:function(t,e){t.addFieldOffset(3,e,0)}},{key:"addWidth",value:function(t,e){t.addFieldInt32(4,e,-1)}},{key:"addPrecision",value:function(t,e){t.addFieldInt32(5,e,-1)}},{key:"addScale",value:function(t,e){t.addFieldInt32(6,e,-1)}},{key:"addNullable",value:function(t,e){t.addFieldInt8(7,+e,1)}},{key:"addUnique",value:function(t,e){t.addFieldInt8(8,+e,0)}},{key:"addPrimaryKey",value:function(t,e){t.addFieldInt8(9,+e,0)}},{key:"addMetadata",value:function(t,e){t.addFieldOffset(10,e,0)}},{key:"endColumn",value:function(t){var e=t.endObject();return t.requiredField(e,4),e}},{key:"createColumn",value:function(e,r,n,o,i,a,s,u,l,c,f,p){return t.startColumn(e),t.addName(e,r),t.addType(e,n),t.addTitle(e,o),t.addDescription(e,i),t.addWidth(e,a),t.addPrecision(e,s),t.addScale(e,u),t.addNullable(e,l),t.addUnique(e,c),t.addPrimaryKey(e,f),t.addMetadata(e,p),t.endColumn(e)}}],(r=[{key:"__init",value:function(t,e){return this.bb_pos=t,this.bb=e,this}},{key:"name",value:function(t){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}},{key:"type",value:function(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readUint8(this.bb_pos+t):L3.Byte}},{key:"title",value:function(t){var e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__string(this.bb_pos+e,t):null}},{key:"description",value:function(t){var e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__string(this.bb_pos+e,t):null}},{key:"width",value:function(){var t=this.bb.__offset(this.bb_pos,12);return t?this.bb.readInt32(this.bb_pos+t):-1}},{key:"precision",value:function(){var t=this.bb.__offset(this.bb_pos,14);return t?this.bb.readInt32(this.bb_pos+t):-1}},{key:"scale",value:function(){var t=this.bb.__offset(this.bb_pos,16);return t?this.bb.readInt32(this.bb_pos+t):-1}},{key:"nullable",value:function(){var t=this.bb.__offset(this.bb_pos,18);return!t||!!this.bb.readInt8(this.bb_pos+t)}},{key:"unique",value:function(){var t=this.bb.__offset(this.bb_pos,20);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}},{key:"primaryKey",value:function(){var t=this.bb.__offset(this.bb_pos,22);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}},{key:"metadata",value:function(t){var e=this.bb.__offset(this.bb_pos,24);return e?this.bb.__string(this.bb_pos+e,t):null}}])&&V3(e.prototype,r),n&&V3(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,r,n}();function q3(t){"@babel/helpers - typeof";return(q3="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function J3(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,W3(n.key),n)}}function W3(t){var e=function(t,e){if("object"!=q3(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=q3(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==q3(e)?e:e+""}var K3=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.bb=null,this.bb_pos=0}return e=t,n=[{key:"getRootAsFeature",value:function(e,r){return(r||new t).__init(e.readInt32(e.position())+e.position(),e)}},{key:"getSizePrefixedRootAsFeature",value:function(e,r){return e.setPosition(e.position()+4),(r||new t).__init(e.readInt32(e.position())+e.position(),e)}},{key:"startFeature",value:function(t){t.startObject(3)}},{key:"addGeometry",value:function(t,e){t.addFieldOffset(0,e,0)}},{key:"addProperties",value:function(t,e){t.addFieldOffset(1,e,0)}},{key:"createPropertiesVector",value:function(t,e){t.startVector(1,e.length,1);for(var r=e.length-1;r>=0;r--)t.addInt8(e[r]);return t.endVector()}},{key:"startPropertiesVector",value:function(t,e){t.startVector(1,e,1)}},{key:"addColumns",value:function(t,e){t.addFieldOffset(2,e,0)}},{key:"createColumnsVector",value:function(t,e){t.startVector(4,e.length,4);for(var r=e.length-1;r>=0;r--)t.addOffset(e[r]);return t.endVector()}},{key:"startColumnsVector",value:function(t,e){t.startVector(4,e,4)}},{key:"endFeature",value:function(t){return t.endObject()}},{key:"finishFeatureBuffer",value:function(t,e){t.finish(e)}},{key:"finishSizePrefixedFeatureBuffer",value:function(t,e){t.finish(e,void 0,!0)}},{key:"createFeature",value:function(e,r,n,o){return t.startFeature(e),t.addGeometry(e,r),t.addProperties(e,n),t.addColumns(e,o),t.endFeature(e)}}],(r=[{key:"__init",value:function(t,e){return this.bb_pos=t,this.bb=e,this}},{key:"geometry",value:function(t){var e=this.bb.__offset(this.bb_pos,4);return e?(t||new D3).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}},{key:"properties",value:function(t){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readUint8(this.bb.__vector(this.bb_pos+e)+t):0}},{key:"propertiesLength",value:function(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}},{key:"propertiesArray",value:function(){var t=this.bb.__offset(this.bb_pos,6);return t?new Uint8Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}},{key:"columns",value:function(t,e){var r=this.bb.__offset(this.bb_pos,8);return r?(e||new H3).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+4*t),this.bb):null}},{key:"columnsLength",value:function(){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}}])&&J3(e.prototype,r),n&&J3(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,r,n}(),Y3=(new TextEncoder,new TextDecoder);function Q3(t,e){var r={};if(!e||0===e.length)return r;var n=t.propertiesArray();if(!n)return r;for(var o=new DataView(n.buffer,n.byteOffset),i=t.propertiesLength(),a=0;a<i;){var s=o.getUint16(a,!0);a+=2;var u=e[s],l=u.name;switch(u.type){case L3.Bool:r[l]=!!o.getUint8(a),a+=1;break;case L3.Byte:r[l]=o.getInt8(a),a+=1;break;case L3.UByte:r[l]=o.getUint8(a),a+=1;break;case L3.Short:r[l]=o.getInt16(a,!0),a+=2;break;case L3.UShort:r[l]=o.getUint16(a,!0),a+=2;break;case L3.Int:r[l]=o.getInt32(a,!0),a+=4;break;case L3.UInt:r[l]=o.getUint32(a,!0),a+=4;break;case L3.Long:r[l]=Number(o.getBigInt64(a,!0)),a+=8;break;case L3.ULong:r[l]=Number(o.getBigUint64(a,!0)),a+=8;break;case L3.Float:r[l]=o.getFloat32(a,!0),a+=4;break;case L3.Double:r[l]=o.getFloat64(a,!0),a+=8;break;case L3.DateTime:case L3.String:var c=o.getUint32(a,!0);a+=4,r[l]=Y3.decode(n.subarray(a,a+c)),a+=c;break;case L3.Json:var f=o.getUint32(a,!0);a+=4;var p=Y3.decode(n.subarray(a,a+f));r[l]=JSON.parse(p),a+=f;break;default:throw new Error("Unknown type "+u.type)}}return r}function X3(t,e){var r=e.columns;return{type:"Feature",geometry:U3(t.geometry(),e.geometryType),properties:Q3(t,r)}}var Z3=new Uint8Array(0);function $3(t){this._source=t,this._array=Z3,this._index=0}function t4(t){"@babel/helpers - typeof";return(t4="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function e4(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,r4(n.key),n)}}function r4(t){var e=function(t,e){if("object"!=t4(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=t4(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==t4(e)?e:e+""}$3.prototype.read=function(){var t=this,e=t._array.subarray(t._index);return t._source.read().then(function(r){return t._array=Z3,t._index=0,r.done?e.length>0?{done:!1,value:e}:{done:!0,value:void 0}:{done:!1,value:function(t,e){if(!t.length)return e;if(!e.length)return t;var r=new Uint8Array(t.length+e.length);return r.set(t),r.set(e,t.length),r}(e,r.value)}})},$3.prototype.slice=function(t){if((t|=0)<0)throw new Error("invalid length");var e=this,r=this._array.length-this._index;if(this._index+t<=this._array.length)return Promise.resolve(this._array.subarray(this._index,this._index+=t));var n=new Uint8Array(t);return n.set(this._array.subarray(this._index)),function o(){return e._source.read().then(function(i){return i.done?(e._array=Z3,e._index=0,r>0?n.subarray(0,r):null):r+i.value.length>=t?(e._array=i.value,e._index=t-r,n.set(i.value.subarray(0,t-r),r),n):(n.set(i.value,r),r+=i.value.length,o())})}()},$3.prototype.cancel=function(){return this._source.cancel()};var n4=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.bb=null,this.bb_pos=0}return e=t,n=[{key:"getRootAsCrs",value:function(e,r){return(r||new t).__init(e.readInt32(e.position())+e.position(),e)}},{key:"getSizePrefixedRootAsCrs",value:function(e,r){return e.setPosition(e.position()+4),(r||new t).__init(e.readInt32(e.position())+e.position(),e)}},{key:"startCrs",value:function(t){t.startObject(6)}},{key:"addOrg",value:function(t,e){t.addFieldOffset(0,e,0)}},{key:"addCode",value:function(t,e){t.addFieldInt32(1,e,0)}},{key:"addName",value:function(t,e){t.addFieldOffset(2,e,0)}},{key:"addDescription",value:function(t,e){t.addFieldOffset(3,e,0)}},{key:"addWkt",value:function(t,e){t.addFieldOffset(4,e,0)}},{key:"addCodeString",value:function(t,e){t.addFieldOffset(5,e,0)}},{key:"endCrs",value:function(t){return t.endObject()}},{key:"createCrs",value:function(e,r,n,o,i,a,s){return t.startCrs(e),t.addOrg(e,r),t.addCode(e,n),t.addName(e,o),t.addDescription(e,i),t.addWkt(e,a),t.addCodeString(e,s),t.endCrs(e)}}],(r=[{key:"__init",value:function(t,e){return this.bb_pos=t,this.bb=e,this}},{key:"org",value:function(t){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}},{key:"code",value:function(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):0}},{key:"name",value:function(t){var e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__string(this.bb_pos+e,t):null}},{key:"description",value:function(t){var e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__string(this.bb_pos+e,t):null}},{key:"wkt",value:function(t){var e=this.bb.__offset(this.bb_pos,12);return e?this.bb.__string(this.bb_pos+e,t):null}},{key:"codeString",value:function(t){var e=this.bb.__offset(this.bb_pos,14);return e?this.bb.__string(this.bb_pos+e,t):null}}])&&e4(e.prototype,r),n&&e4(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,r,n}();function o4(t){"@babel/helpers - typeof";return(o4="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i4(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,a4(n.key),n)}}function a4(t){var e=function(t,e){if("object"!=o4(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=o4(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==o4(e)?e:e+""}var s4=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.bb=null,this.bb_pos=0}return e=t,n=[{key:"getRootAsHeader",value:function(e,r){return(r||new t).__init(e.readInt32(e.position())+e.position(),e)}},{key:"getSizePrefixedRootAsHeader",value:function(e,r){return e.setPosition(e.position()+4),(r||new t).__init(e.readInt32(e.position())+e.position(),e)}},{key:"startHeader",value:function(t){t.startObject(14)}},{key:"addName",value:function(t,e){t.addFieldOffset(0,e,0)}},{key:"addEnvelope",value:function(t,e){t.addFieldOffset(1,e,0)}},{key:"createEnvelopeVector",value:function(t,e){t.startVector(8,e.length,8);for(var r=e.length-1;r>=0;r--)t.addFloat64(e[r]);return t.endVector()}},{key:"startEnvelopeVector",value:function(t,e){t.startVector(8,e,8)}},{key:"addGeometryType",value:function(t,e){t.addFieldInt8(2,e,o3.Unknown)}},{key:"addHasZ",value:function(t,e){t.addFieldInt8(3,+e,0)}},{key:"addHasM",value:function(t,e){t.addFieldInt8(4,+e,0)}},{key:"addHasT",value:function(t,e){t.addFieldInt8(5,+e,0)}},{key:"addHasTm",value:function(t,e){t.addFieldInt8(6,+e,0)}},{key:"addColumns",value:function(t,e){t.addFieldOffset(7,e,0)}},{key:"createColumnsVector",value:function(t,e){t.startVector(4,e.length,4);for(var r=e.length-1;r>=0;r--)t.addOffset(e[r]);return t.endVector()}},{key:"startColumnsVector",value:function(t,e){t.startVector(4,e,4)}},{key:"addFeaturesCount",value:function(t,e){t.addFieldInt64(8,e,BigInt("0"))}},{key:"addIndexNodeSize",value:function(t,e){t.addFieldInt16(9,e,16)}},{key:"addCrs",value:function(t,e){t.addFieldOffset(10,e,0)}},{key:"addTitle",value:function(t,e){t.addFieldOffset(11,e,0)}},{key:"addDescription",value:function(t,e){t.addFieldOffset(12,e,0)}},{key:"addMetadata",value:function(t,e){t.addFieldOffset(13,e,0)}},{key:"endHeader",value:function(t){return t.endObject()}},{key:"finishHeaderBuffer",value:function(t,e){t.finish(e)}},{key:"finishSizePrefixedHeaderBuffer",value:function(t,e){t.finish(e,void 0,!0)}}],(r=[{key:"__init",value:function(t,e){return this.bb_pos=t,this.bb=e,this}},{key:"name",value:function(t){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}},{key:"envelope",value:function(t){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readFloat64(this.bb.__vector(this.bb_pos+e)+8*t):0}},{key:"envelopeLength",value:function(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}},{key:"envelopeArray",value:function(){var t=this.bb.__offset(this.bb_pos,6);return t?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}},{key:"geometryType",value:function(){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readUint8(this.bb_pos+t):o3.Unknown}},{key:"hasZ",value:function(){var t=this.bb.__offset(this.bb_pos,10);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}},{key:"hasM",value:function(){var t=this.bb.__offset(this.bb_pos,12);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}},{key:"hasT",value:function(){var t=this.bb.__offset(this.bb_pos,14);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}},{key:"hasTm",value:function(){var t=this.bb.__offset(this.bb_pos,16);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}},{key:"columns",value:function(t,e){var r=this.bb.__offset(this.bb_pos,18);return r?(e||new H3).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+4*t),this.bb):null}},{key:"columnsLength",value:function(){var t=this.bb.__offset(this.bb_pos,18);return t?this.bb.__vector_len(this.bb_pos+t):0}},{key:"featuresCount",value:function(){var t=this.bb.__offset(this.bb_pos,20);return t?this.bb.readUint64(this.bb_pos+t):BigInt("0")}},{key:"indexNodeSize",value:function(){var t=this.bb.__offset(this.bb_pos,22);return t?this.bb.readUint16(this.bb_pos+t):16}},{key:"crs",value:function(t){var e=this.bb.__offset(this.bb_pos,24);return e?(t||new n4).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}},{key:"title",value:function(t){var e=this.bb.__offset(this.bb_pos,26);return e?this.bb.__string(this.bb_pos+e,t):null}},{key:"description",value:function(t){var e=this.bb.__offset(this.bb_pos,28);return e?this.bb.__string(this.bb_pos+e,t):null}},{key:"metadata",value:function(t){var e=this.bb.__offset(this.bb_pos,30);return e?this.bb.__string(this.bb_pos+e,t):null}}])&&i4(e.prototype,r),n&&i4(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,r,n}();function u4(t){for(var e=s4.getRootAsHeader(t),r=e.featuresCount(),n=e.indexNodeSize(),o=[],i=0;i<e.columnsLength();i++){var a=e.columns(i);if(!a)throw new Error("Column unexpectedly missing");if(!a.name())throw new Error("Column name unexpectedly missing");o.push({name:a.name(),type:a.type(),title:a.title(),description:a.description(),width:a.width(),precision:a.precision(),scale:a.scale(),nullable:a.nullable(),unique:a.unique(),primary_key:a.primaryKey()})}var s=e.crs(),u=s?{org:s.org(),code:s.code(),name:s.name(),description:s.description(),wkt:s.wkt(),code_string:s.codeString()}:null;return{geometryType:e.geometryType(),columns:o,envelope:null,featuresCount:Number(r),indexNodeSize:n,crs:u,title:e.title(),description:e.description(),metadata:e.metadata()}}var l4=function(t,e){return(l4=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};function c4(t,e,r,n){return new(r||(r=Promise))(function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function s(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r(function(t){t(e)})).then(a,s)}u((n=n.apply(t,e||[])).next())})}function f4(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}function p4(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function h4(t){return this instanceof h4?(this.v=t,this):new h4(t)}function y4(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,o=r.apply(t,e||[]),i=[];return n={},a("next"),a("throw"),a("return"),n[Symbol.asyncIterator]=function(){return this},n;function a(t){o[t]&&(n[t]=function(e){return new Promise(function(r,n){i.push([t,e,r,n])>1||s(t,e)})})}function s(t,e){try{(r=o[t](e)).value instanceof h4?Promise.resolve(r.value.v).then(u,l):c(i[0][2],r)}catch(t){c(i[0][3],t)}var r}function u(t){s("next",t)}function l(t){s("throw",t)}function c(t,e){t(e),i.shift(),i.length&&s(i[0][0],i[0][1])}}var d4=function(t){function e(e){var r=t.call(this,e)||this;return Object.defineProperty(r,"name",{value:"RepeaterOverflowError",enumerable:!1}),"function"==typeof Object.setPrototypeOf?Object.setPrototypeOf(r,r.constructor.prototype):r.__proto__=r.constructor.prototype,"function"==typeof Error.captureStackTrace&&Error.captureStackTrace(r,r.constructor),r}return function(t,e){function r(){this.constructor=t}l4(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}(e,t),e}(Error);(function(){function t(t){if(t<0)throw new RangeError("Capacity may not be less than 0");this._c=t,this._q=[]}Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this._q.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"full",{get:function(){return this._q.length>=this._c},enumerable:!1,configurable:!0}),t.prototype.add=function(t){if(this.full)throw new Error("Buffer full");this._q.push(t)},t.prototype.remove=function(){if(this.empty)throw new Error("Buffer empty");return this._q.shift()}})(),function(){function t(t){if(t<1)throw new RangeError("Capacity may not be less than 1");this._c=t,this._q=[]}Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this._q.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"full",{get:function(){return!1},enumerable:!1,configurable:!0}),t.prototype.add=function(t){for(;this._q.length>=this._c;)this._q.shift();this._q.push(t)},t.prototype.remove=function(){if(this.empty)throw new Error("Buffer empty");return this._q.shift()}}(),function(){function t(t){if(t<1)throw new RangeError("Capacity may not be less than 1");this._c=t,this._q=[]}Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this._q.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"full",{get:function(){return!1},enumerable:!1,configurable:!0}),t.prototype.add=function(t){this._q.length<this._c&&this._q.push(t)},t.prototype.remove=function(){if(this.empty)throw new Error("Buffer empty");return this._q.shift()}}();function v4(t){null!=t&&"function"==typeof t.then&&t.then(O4,O4)}var m4=0,b4=1,g4=2,S4=3,w4=4,_4=1024,O4=function(){};function E4(t){var e=t.err,r=Promise.resolve(t.execution).then(function(t){if(null!=e)throw e;return t});return t.err=void 0,t.execution=r.then(function(){},function(){}),void 0===t.pending?r:t.pending.then(function(){return r})}function P4(t,e){var r=t.state>=S4;return Promise.resolve(e).then(function(e){return!r&&t.state>=w4?E4(t).then(function(t){return{value:t,done:!0}}):{value:e,done:r}})}function x4(t,e){var r,n;if(!(t.state>=g4))if(t.state=g4,t.onnext(),t.onstop(),null==t.err&&(t.err=e),0!==t.pushes.length||void 0!==t.buffer&&!t.buffer.empty)try{for(var o=p4(t.pushes),i=o.next();!i.done;i=o.next()){i.value.resolve()}}catch(t){r={error:t}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}else T4(t)}function T4(t){var e,r;if(!(t.state>=S4)){t.state<g4&&x4(t),t.state=S4,t.buffer=void 0;try{for(var n=p4(t.nexts),o=n.next();!o.done;o=n.next()){var i=o.value,a=void 0===t.pending?E4(t):t.pending.then(function(){return E4(t)});i.resolve(P4(t,a))}}catch(t){e={error:t}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}t.pushes=[],t.nexts=[]}}function C4(t){t.state>=w4||(t.state<S4&&T4(t),t.state=w4)}function k4(t){if(!(t.state>=b4)){t.state=b4;var e=function(t,e){if(v4(e),t.pushes.length>=_4)throw new d4("No more than "+_4+" pending calls to push are allowed on a single repeater.");if(t.state>=g4)return Promise.resolve(void 0);var r,n=void 0===t.pending?Promise.resolve(e):t.pending.then(function(){return e});n=n.catch(function(e){t.state<g4&&(t.err=e),C4(t)}),t.nexts.length?(t.nexts.shift().resolve(P4(t,n)),r=t.nexts.length?Promise.resolve(t.nexts[0].value):new Promise(function(e){return t.onnext=e})):void 0===t.buffer||t.buffer.full?r=new Promise(function(e){return t.pushes.push({resolve:e,value:n})}):(t.buffer.add(n),r=Promise.resolve(void 0));var o=!0,i={},a=r.catch(function(t){if(o)throw t});return i.then=function(t,e){return o=!1,Promise.prototype.then.call(r,t,e)},i.catch=function(t){return o=!1,Promise.prototype.catch.call(r,t)},i.finally=r.finally.bind(r),t.pending=n.then(function(){return a}).catch(function(e){t.err=e,C4(t)}),i}.bind(null,t),r=function(t){var e=x4.bind(null,t),r=new Promise(function(e){return t.onstop=e});return e.then=r.then.bind(r),e.catch=r.catch.bind(r),e.finally=r.finally.bind(r),e}(t);t.execution=new Promise(function(n){return n(t.executor(e,r))}),t.execution.catch(function(){return x4(t)})}}var A4=new WeakMap,j4=function(){function t(t,e){A4.set(this,{executor:t,buffer:e,err:void 0,state:m4,pushes:[],nexts:[],pending:void 0,execution:void 0,onnext:O4,onstop:O4})}return t.prototype.next=function(t){v4(t);var e=A4.get(this);if(void 0===e)throw new Error("WeakMap error");if(e.nexts.length>=_4)throw new d4("No more than "+_4+" pending calls to next are allowed on a single repeater.");if(e.state<=m4&&k4(e),e.onnext(t),void 0!==e.buffer&&!e.buffer.empty){var r=P4(e,e.buffer.remove());if(e.pushes.length){var n=e.pushes.shift();e.buffer.add(n.value),e.onnext=n.resolve}return r}if(e.pushes.length){var o=e.pushes.shift();return e.onnext=o.resolve,P4(e,o.value)}return e.state>=g4?(T4(e),P4(e,E4(e))):new Promise(function(r){return e.nexts.push({resolve:r,value:t})})},t.prototype.return=function(t){v4(t);var e=A4.get(this);if(void 0===e)throw new Error("WeakMap error");return T4(e),e.execution=Promise.resolve(e.execution).then(function(){return t}),P4(e,E4(e))},t.prototype.throw=function(t){var e=A4.get(this);if(void 0===e)throw new Error("WeakMap error");return e.state<=m4||e.state>=g4||void 0!==e.buffer&&!e.buffer.empty?(T4(e),null==e.err&&(e.err=t),P4(e,E4(e))):this.next(Promise.reject(t))},t.prototype[Symbol.asyncIterator]=function(){return this},t.race=I4,t.merge=M4,t.zip=R4,t.latest=L4,t}();function N4(t,e){var r,n,o=[],i=function(t){null!=t&&"function"==typeof t[Symbol.asyncIterator]?o.push(t[Symbol.asyncIterator]()):null!=t&&"function"==typeof t[Symbol.iterator]?o.push(t[Symbol.iterator]()):o.push(function(){return y4(this,arguments,function(){return f4(this,function(r){switch(r.label){case 0:return e.yieldValues?[4,h4(t)]:[3,3];case 1:return[4,r.sent()];case 2:r.sent(),r.label=3;case 3:return e.returnValues?[4,h4(t)]:[3,5];case 4:return[2,r.sent()];case 5:return[2]}})})}())};try{for(var a=p4(t),s=a.next();!s.done;s=a.next()){i(s.value)}}catch(t){r={error:t}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}return o}function I4(t){var e=this,r=N4(t,{returnValues:!0});return new j4(function(t,n){return c4(e,void 0,void 0,function(){var e,o,i,a,s,u;return f4(this,function(l){switch(l.label){case 0:if(!r.length)return n(),[2];o=!1,n.then(function(){e(),o=!0}),l.label=1;case 1:l.trys.push([1,,5,7]),a=void 0,s=0,u=function(){var o,u,l,c,f,p;return f4(this,function(h){switch(h.label){case 0:o=s;try{for(f=void 0,u=p4(r),l=u.next();!l.done;l=u.next())c=l.value,Promise.resolve(c.next()).then(function(t){t.done?(n(),void 0===i&&(i=t)):s===o&&(s++,e(t))},function(t){return n(t)})}catch(t){f={error:t}}finally{try{l&&!l.done&&(p=u.return)&&p.call(u)}finally{if(f)throw f.error}}return[4,new Promise(function(t){return e=t})];case 1:return void 0===(a=h.sent())?[3,3]:[4,t(a.value)];case 2:h.sent(),h.label=3;case 3:return[2]}})},l.label=2;case 2:return o?[3,4]:[5,u()];case 3:return l.sent(),[3,2];case 4:return[2,i&&i.value];case 5:return n(),[4,Promise.race(r.map(function(t){return t.return&&t.return()}))];case 6:return l.sent(),[7];case 7:return[2]}})})})}function M4(t){var e=this,r=N4(t,{yieldValues:!0});return new j4(function(t,n){return c4(e,void 0,void 0,function(){var e,o,i,a=this;return f4(this,function(s){switch(s.label){case 0:if(!r.length)return n(),[2];e=[],o=!1,n.then(function(){var t,r;o=!0;try{for(var n=p4(e),i=n.next();!i.done;i=n.next()){(0,i.value)()}}catch(e){t={error:e}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(t)throw t.error}}}),s.label=1;case 1:return s.trys.push([1,,3,4]),[4,Promise.all(r.map(function(r,s){return c4(a,void 0,void 0,function(){var a;return f4(this,function(u){switch(u.label){case 0:u.trys.push([0,,6,9]),u.label=1;case 1:return o?[3,5]:(Promise.resolve(r.next()).then(function(t){return e[s](t)},function(t){return n(t)}),[4,new Promise(function(t){e[s]=t})]);case 2:return void 0===(a=u.sent())?[3,4]:a.done?(i=a,[2]):[4,t(a.value)];case 3:u.sent(),u.label=4;case 4:return[3,1];case 5:return[3,9];case 6:return r.return?[4,r.return()]:[3,8];case 7:u.sent(),u.label=8;case 8:return[7];case 9:return[2]}})})}))];case 2:return s.sent(),[2,i&&i.value];case 3:return n(),[7];case 4:return[2]}})})})}function R4(t){var e=this,r=N4(t,{returnValues:!0});return new j4(function(t,n){return c4(e,void 0,void 0,function(){var e,o,i,a;return f4(this,function(s){switch(s.label){case 0:if(!r.length)return n(),[2,[]];o=!1,n.then(function(){e(),o=!0}),s.label=1;case 1:s.trys.push([1,,6,8]),s.label=2;case 2:return o?[3,5]:(Promise.all(r.map(function(t){return t.next()})).then(function(t){return e(t)},function(t){return n(t)}),[4,new Promise(function(t){return e=t})]);case 3:return void 0===(i=s.sent())?[2]:(a=i.map(function(t){return t.value}),i.some(function(t){return t.done})?[2,a]:[4,t(a)]);case 4:return s.sent(),[3,2];case 5:return[3,8];case 6:return n(),[4,Promise.all(r.map(function(t){return t.return&&t.return()}))];case 7:return s.sent(),[7];case 8:return[2]}})})})}function L4(t){var e=this,r=N4(t,{yieldValues:!0,returnValues:!0});return new j4(function(t,n){return c4(e,void 0,void 0,function(){var e,o,i,a,s,u=this;return f4(this,function(l){switch(l.label){case 0:if(!r.length)return n(),[2,[]];o=[],i=!1,n.then(function(){var t,r;e();try{for(var n=p4(o),a=n.next();!a.done;a=n.next()){(0,a.value)()}}catch(e){t={error:e}}finally{try{a&&!a.done&&(r=n.return)&&r.call(n)}finally{if(t)throw t.error}}i=!0}),l.label=1;case 1:return l.trys.push([1,,5,7]),Promise.all(r.map(function(t){return t.next()})).then(function(t){return e(t)},function(t){return n(t)}),[4,new Promise(function(t){return e=t})];case 2:return void 0===(a=l.sent())?[2]:(s=a.map(function(t){return t.value}),a.every(function(t){return t.done})?[2,s]:[4,t(s.slice())]);case 3:return l.sent(),[4,Promise.all(r.map(function(e,r){return c4(u,void 0,void 0,function(){var u;return f4(this,function(l){switch(l.label){case 0:if(a[r].done)return[2,a[r].value];l.label=1;case 1:return i?[3,4]:(Promise.resolve(e.next()).then(function(t){return o[r](t)},function(t){return n(t)}),[4,new Promise(function(t){return o[r]=t})]);case 2:return void 0===(u=l.sent())?[2,a[r].value]:u.done?[2,u.value]:(s[r]=u.value,[4,t(s.slice())]);case 3:return l.sent(),[3,1];case 4:return[2]}})})}))];case 4:return[2,l.sent()];case 5:return n(),[4,Promise.all(r.map(function(t){return t.return&&t.return()}))];case 6:return l.sent(),[7];case 7:return[2]}})})})}function D4(t){"@babel/helpers - typeof";return(D4="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function B4(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,F4(n.key),n)}}function F4(t){var e=function(t,e){if("object"!=D4(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=D4(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==D4(e)?e:e+""}var U4=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._extraRequestThreshold=262144},(e=[{key:"extraRequestThreshold",value:function(){return this._extraRequestThreshold}},{key:"setExtraRequestThreshold",value:function(t){if(t<0)throw new Error("extraRequestThreshold cannot be negative");this._extraRequestThreshold=t}}])&&B4(t.prototype,e),r&&B4(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();U4.global=new U4;var G4,V4=U4;function z4(t){"@babel/helpers - typeof";return(z4="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function H4(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,q4(n.key),n)}}function q4(t){var e=function(t,e){if("object"!=z4(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=z4(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==z4(e)?e:e+""}!function(t){t[t.Debug=0]="Debug",t[t.Info=1]="Info",t[t.Warn=2]="Warn",t[t.Error=3]="Error"}(G4||(G4={}));var J4=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)},r=[{key:"debug",value:function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];this.log.apply(this,[G4.Debug].concat(e))}},{key:"info",value:function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];this.log.apply(this,[G4.Info].concat(e))}},{key:"warn",value:function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];this.log.apply(this,[G4.Warn].concat(e))}},{key:"error",value:function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];this.log.apply(this,[G4.Error].concat(e))}},{key:"log",value:function(t){if(!(this.logLevel>t)){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];switch(t){case G4.Debug:var o;(o=console).debug.apply(o,r);break;case G4.Info:var i;(i=console).info.apply(i,r);break;case G4.Warn:var a;(a=console).warn.apply(a,r);break;case G4.Error:var s;(s=console).error.apply(s,r)}}}}],(e=null)&&H4(t.prototype,e),r&&H4(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();J4.logLevel=G4.Warn;var W4=J4;function K4(t){"@babel/helpers - typeof";return(K4="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Y4(){Y4=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),s=new A(n||[]);return o(a,"_invoke",{value:x(t,r,s)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var p="suspendedStart",h="suspendedYield",y="executing",d="completed",v={};function m(){}function b(){}function g(){}var S={};l(S,a,function(){return this});var w=Object.getPrototypeOf,_=w&&w(w(j([])));_&&_!==r&&n.call(_,a)&&(S=_);var O=g.prototype=m.prototype=Object.create(S);function E(t){["next","throw","return"].forEach(function(e){l(t,e,function(t){return this._invoke(e,t)})})}function P(t,e){function r(o,i,a,s){var u=f(t[o],t,i);if("throw"!==u.type){var l=u.arg,c=l.value;return c&&"object"==K4(c)&&n.call(c,"__await")?e.resolve(c.__await).then(function(t){r("next",t,a,s)},function(t){r("throw",t,a,s)}):e.resolve(c).then(function(t){l.value=t,a(l)},function(t){return r("throw",t,a,s)})}s(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e(function(e,o){r(t,n,e,o)})}return i=i?i.then(o,o):o()}})}function x(e,r,n){var o=p;return function(i,a){if(o===y)throw Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var u=T(s,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var l=f(e,r,n);if("normal"===l.type){if(o=n.done?d:h,l.arg===v)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=d,n.method="throw",n.arg=l.arg)}}}function T(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,T(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function A(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function j(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(K4(e)+" is not iterable")}return b.prototype=g,o(O,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=l(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,l(t,u,"GeneratorFunction")),t.prototype=Object.create(O),t},e.awrap=function(t){return{__await:t}},E(P.prototype),l(P.prototype,s,function(){return this}),e.AsyncIterator=P,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new P(c(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next()})},E(O),l(O,u,"Generator"),l(O,a,function(){return this}),l(O,"toString",function(){return"[object Generator]"}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=j,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(k),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),k(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;k(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:j(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function Q4(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,s=[],u=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(s.push(n.value),s.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return X4(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return X4(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function X4(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Z4(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function $4(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,t5(n.key),n)}}function t5(t){var e=function(t,e){if("object"!=K4(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=K4(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==K4(e)?e:e+""}function e5(t){var e,r;function n(e,r){try{var i=t[e](r),a=i.value,s=a instanceof r5;Promise.resolve(s?a.v:a).then(function(r){if(s){var u="return"===e?"return":"next";if(!a.k||r.done)return n(u,r);r=t[u](r).value}o(i.done?"return":"normal",r)},function(t){n("throw",t)})}catch(t){o("throw",t)}}function o(t,o){switch(t){case"return":e.resolve({value:o,done:!0});break;case"throw":e.reject(o);break;default:e.resolve({value:o,done:!1})}(e=e.next)?n(e.key,e.arg):r=null}this._invoke=function(t,o){return new Promise(function(i,a){var s={key:t,arg:o,resolve:i,reject:a,next:null};r?r=r.next=s:(e=r=s,n(t,o))})},"function"!=typeof t.return&&(this.return=void 0)}function r5(t,e){this.v=t,this.k=e}e5.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},e5.prototype.next=function(t){return this._invoke("next",t)},e5.prototype.throw=function(t){return this._invoke("throw",t)},e5.prototype.return=function(t){return this._invoke("return",t)};var n5=40;function o5(t,e){e=Math.min(Math.max(+e,2),65535);var r=t,n=r;do{n+=r=Math.ceil(r/e)}while(1!==r);return n*n5}function i5(t,e){if(e<2)throw new Error("Node size must be at least 2");if(0===t)throw new Error("Number of items must be greater than 0");var r=t,n=r,o=[r];do{n+=r=Math.ceil(r/e),o.push(r)}while(1!==r);var i=[];r=n;for(var a=0,s=o;a<s.length;a++){var u=s[a];i.push(r-u),r-=u}for(var l=[],c=0;c<o.length;c++)l.push([i[c],i[c]+o[c]]);return l}function a5(t,e,r,n){return s5.apply(this,arguments)}function s5(){var t;return t=Y4().mark(function t(e,r,n,o){var i,a,s,u,l,c,f,p,h,y;return Y4().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:i=function(){return t=function t(e,r){Z4(this,t),this._level=r,this.nodes=e},(e=[{key:"level",value:function(){return this._level}},{key:"startNodeIdx",value:function(){return this.nodes[0]}},{key:"endNodeIdx",value:function(){return this.nodes[1]}},{key:"extendEndNodeIdx",value:function(t){console.assert(t>this.nodes[1]),this.nodes[1]=t}},{key:"toString",value:function(){return"[NodeRange level: ".concat(this._level,", nodes: ").concat(this.nodes[0],"-").concat(this.nodes[1],"]")}}])&&$4(t.prototype,e),r&&$4(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}(),a=n.minX,s=n.minY,u=n.maxX,l=n.maxY,W4.info("tree items: ".concat(e,", nodeSize: ").concat(r)),c=i5(e,r),f=c[0][0],void 0,d=c.length-1,p=new i([0,1],d),h=[p],W4.debug("starting stream search with queue: ".concat(h,", numItems: ").concat(e,", nodeSize: ").concat(r,", levelBounds: ").concat(c)),y=Y4().mark(function t(){var n,p,y,d,v,m,b,g,S;return Y4().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=h.shift(),W4.debug("popped node: ".concat(n,", queueLength: ").concat(h.length)),p=n.startNodeIdx(),y=p>=f,d=function(){var t=Q4(c[n.level()],2)[1],e=Math.min(n.endNodeIdx()+r,t);return y&&e<t?e+1:e}(),v=d-p,t.next=8,new r5(o(p*n5,v*n5),0);case 8:m=t.sent,b=new DataView(m),g=Y4().mark(function t(r){var o,c,d,v,m,g,S,w,_,O;return Y4().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(c=(o=r-p)*n5,!(u<b.getFloat64(c+0,!0))){t.next=4;break}return t.abrupt("return",0);case 4:if(!(l<b.getFloat64(c+8,!0))){t.next=6;break}return t.abrupt("return",0);case 6:if(!(a>b.getFloat64(c+16,!0))){t.next=8;break}return t.abrupt("return",0);case 8:if(!(s>b.getFloat64(c+24,!0))){t.next=10;break}return t.abrupt("return",0);case 10:if(d=b.getBigUint64(c+32,!0),!y){t.next=18;break}return v=d,m=function(){if(r<e-1){var t=(o+1)*n5;return b.getBigUint64(t+32,!0)-v}return null}(),g=r-f,t.next=17,[Number(v),g,Number(m)];case 17:return t.abrupt("return",0);case 18:if(S=d,w=V4.global.extraRequestThreshold()/n5,!(void 0!==(_=h[h.length-1])&&_.level()==n.level()-1&&S<_.endNodeIdx()+w)){t.next=25;break}return W4.debug('Merging "nodeRange" request into existing range: '.concat(_,", newEndNodeIdx: ").concat(_.endNodeIdx()," -> ").concat(S)),_.extendEndNodeIdx(Number(S)),t.abrupt("return",0);case 25:void 0,void 0,E=n.level()-1,P=[Number(S),Number(S)+1],O=new i(P,E),void 0!==_&&_.level()==O.level()?W4.info("Same level, but too far away. Pushing new request for nodeIdx: ".concat(S," rather than merging with distant ").concat(_)):W4.info("Pushing new level for ".concat(O," onto queue with nearestNodeRange: ").concat(_," since there's not already a range for this level.")),h.push(O);case 28:case"end":return t.stop()}var E,P},t)}),S=p;case 12:if(!(S<d)){t.next=20;break}return t.delegateYield(g(S),"t0",14);case 14:if(0!==t.t0){t.next=17;break}return t.abrupt("continue",17);case 17:S++,t.next=12;break;case 20:case"end":return t.stop()}},t)});case 9:if(0==h.length){t.next=13;break}return t.delegateYield(y(),"t0",11);case 11:t.next=9;break;case 13:case"end":return t.stop()}var d},t)}),(s5=function(){return new e5(t.apply(this,arguments))}).apply(this,arguments)}var u5=new Uint8Array([102,103,98,3,102,103,98,0]),l5=4;function c5(t){"@babel/helpers - typeof";return(c5="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function f5(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=h5(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){s=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function p5(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,s=[],u=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(s.push(n.value),s.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(t,e)||h5(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h5(t,e){if(t){if("string"==typeof t)return y5(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?y5(t,e):void 0}}function y5(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function d5(){d5=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),s=new A(n||[]);return o(a,"_invoke",{value:x(t,r,s)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var p="suspendedStart",h="suspendedYield",y="executing",d="completed",v={};function m(){}function b(){}function g(){}var S={};l(S,a,function(){return this});var w=Object.getPrototypeOf,_=w&&w(w(j([])));_&&_!==r&&n.call(_,a)&&(S=_);var O=g.prototype=m.prototype=Object.create(S);function E(t){["next","throw","return"].forEach(function(e){l(t,e,function(t){return this._invoke(e,t)})})}function P(t,e){function r(o,i,a,s){var u=f(t[o],t,i);if("throw"!==u.type){var l=u.arg,c=l.value;return c&&"object"==c5(c)&&n.call(c,"__await")?e.resolve(c.__await).then(function(t){r("next",t,a,s)},function(t){r("throw",t,a,s)}):e.resolve(c).then(function(t){l.value=t,a(l)},function(t){return r("throw",t,a,s)})}s(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e(function(e,o){r(t,n,e,o)})}return i=i?i.then(o,o):o()}})}function x(e,r,n){var o=p;return function(i,a){if(o===y)throw Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var u=T(s,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var l=f(e,r,n);if("normal"===l.type){if(o=n.done?d:h,l.arg===v)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=d,n.method="throw",n.arg=l.arg)}}}function T(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,T(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function A(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function j(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(c5(e)+" is not iterable")}return b.prototype=g,o(O,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=l(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,l(t,u,"GeneratorFunction")),t.prototype=Object.create(O),t},e.awrap=function(t){return{__await:t}},E(P.prototype),l(P.prototype,s,function(){return this}),e.AsyncIterator=P,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new P(c(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next()})},E(O),l(O,u,"Generator"),l(O,a,function(){return this}),l(O,"toString",function(){return"[object Generator]"}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=j,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(k),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),k(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;k(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:j(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function v5(t,e,r,n,o,i,a){try{var s=t[i](a),u=s.value}catch(t){return void r(t)}s.done?e(u):Promise.resolve(u).then(n,o)}function m5(t){return function(){var e=this,r=arguments;return new Promise(function(n,o){var i=t.apply(e,r);function a(t){v5(i,n,o,a,s,"next",t)}function s(t){v5(i,n,o,a,s,"throw",t)}a(void 0)})}}function b5(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function g5(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,w5(n.key),n)}}function S5(t,e,r){return e&&g5(t.prototype,e),r&&g5(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function w5(t){var e=function(t,e){if("object"!=c5(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=c5(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==c5(e)?e:e+""}function _5(t){return function(){return new O5(t.apply(this,arguments))}}function O5(t){var e,r;function n(e,r){try{var i=t[e](r),a=i.value,s=a instanceof x5;Promise.resolve(s?a.v:a).then(function(r){if(s){var u="return"===e?"return":"next";if(!a.k||r.done)return n(u,r);r=t[u](r).value}o(i.done?"return":"normal",r)},function(t){n("throw",t)})}catch(t){o("throw",t)}}function o(t,o){switch(t){case"return":e.resolve({value:o,done:!0});break;case"throw":e.reject(o);break;default:e.resolve({value:o,done:!1})}(e=e.next)?n(e.key,e.arg):r=null}this._invoke=function(t,o){return new Promise(function(i,a){var s={key:t,arg:o,resolve:i,reject:a,next:null};r?r=r.next=s:(e=r=s,n(t,o))})},"function"!=typeof t.return&&(this.return=void 0)}function E5(t){return new x5(t,0)}function P5(t){var e={},r=!1;function n(e,n){return r=!0,{done:!1,value:new x5(n=new Promise(function(r){r(t[e](n))}),1)}}return e["undefined"!=typeof Symbol&&Symbol.iterator||"@@iterator"]=function(){return this},e.next=function(t){return r?(r=!1,t):n("next",t)},"function"==typeof t.throw&&(e.throw=function(t){if(r)throw r=!1,t;return n("throw",t)}),"function"==typeof t.return&&(e.return=function(t){return r?(r=!1,t):n("return",t)}),e}function x5(t,e){this.v=t,this.k=e}function T5(t){var e,r,n,o=2;for("undefined"!=typeof Symbol&&(r=Symbol.asyncIterator,n=Symbol.iterator);o--;){if(r&&null!=(e=t[r]))return e.call(t);if(n&&null!=(e=t[n]))return new C5(e.call(t));r="@@asyncIterator",n="@@iterator"}throw new TypeError("Object is not async iterable")}function C5(t){function e(t){if(Object(t)!==t)return Promise.reject(new TypeError(t+" is not an object."));var e=t.done;return Promise.resolve(t.value).then(function(t){return{value:t,done:e}})}return(C5=function(t){this.s=t,this.n=t.next}).prototype={s:null,n:null,next:function(){return e(this.n.apply(this.s,arguments))},return:function(t){var r=this.s.return;return void 0===r?Promise.resolve({value:t,done:!0}):e(r.apply(this.s,arguments))},throw:function(t){var r=this.s.return;return void 0===r?Promise.reject(t):e(r.apply(this.s,arguments))}},new C5(t)}O5.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},O5.prototype.next=function(t){return this._invoke("next",t)},O5.prototype.throw=function(t){return this._invoke("throw",t)},O5.prototype.return=function(t){return this._invoke("return",t)};var k5=function(){function t(e,r,n,o,i){b5(this,t),this.headerClient=e,this.header=r,this.headerLength=n,this.indexLength=o,this.nocache=i}return S5(t,[{key:"selectBbox",value:function(t){var e=this;return _5(d5().mark(function r(){var n,o,i,a,s,u,l,c,f,p,h,y,d,v,m,b,g,S;return d5().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:n=e.lengthBeforeTree(),o=e.headerClient,i=function(){var t=m5(d5().mark(function t(e,r){var i;return d5().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i=0,t.abrupt("return",o.getRange(n+e,r,i,"index"));case 2:case"end":return t.stop()}},t)}));return function(e,r){return t.apply(this,arguments)}}(),a=[],s=[],u=!1,l=!1,r.prev=7,f=T5(a5(e.header.featuresCount,e.header.indexNodeSize,t,i));case 9:return r.next=11,E5(f.next());case 11:if(!(u=!(p=r.sent).done)){r.next=26;break}if(h=p.value,y=p5(h,2),d=y[0],v=p5(h,3),(m=v[2])||(W4.info("final feature"),m=4),0!=s.length){r.next=19;break}return s.push([d,m]),r.abrupt("continue",23);case 19:b=s[s.length-1],(g=d-(b[0]+b[1]))>V4.global.extraRequestThreshold()&&(W4.info("Pushing new feature batch, since gap ".concat(g," was too large")),a.push(s),s=[]),s.push([d,m]);case 23:u=!1,r.next=9;break;case 26:r.next=32;break;case 28:r.prev=28,r.t0=r.catch(7),l=!0,c=r.t0;case 32:if(r.prev=32,r.prev=33,!u||null==f.return){r.next=37;break}return r.next=37,E5(f.return());case 37:if(r.prev=37,!l){r.next=40;break}throw c;case 40:return r.finish(37);case 41:return r.finish(32);case 42:return e.headerClient.logUsage("header+index"),s.length>0&&a.push(s),S=a.flatMap(function(t){return e.readFeatureBatch(t,e.nocache)}),r.delegateYield(P5(T5(j4.merge(S))),"t1",46);case 46:case"end":return r.stop()}},r,null,[[7,28,32,42],[33,,37,41]])}))()}},{key:"lengthBeforeTree",value:function(){return u5.length+l5+this.headerLength}},{key:"lengthBeforeFeatures",value:function(){return this.lengthBeforeTree()+this.indexLength}},{key:"buildFeatureClient",value:function(t){return new A5(this.headerClient.httpClient,t)}},{key:"readFeatureBatch",value:function(t,e){var r=this;return _5(d5().mark(function n(){var o,i,a,s,u,l,c,f,p,h,y,d;return d5().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:o=p5(t[0],1),i=o[0],a=p5(t[t.length-1],2),s=a[0],u=a[1],l=s+u-i,c=r.buildFeatureClient(e),f=l,p=f5(t),n.prev=8,p.s();case 10:if((h=p.n()).done){n.next=19;break}return y=p5(h.value,1),d=y[0],n.next=14,E5(r.readFeature(c,d,f));case 14:return n.next=16,n.sent;case 16:f=0;case 17:n.next=10;break;case 19:n.next=24;break;case 21:n.prev=21,n.t0=n.catch(8),p.e(n.t0);case 24:return n.prev=24,p.f(),n.finish(24);case 27:c.logUsage("feature");case 28:case"end":return n.stop()}},n,null,[[8,21,24,27]])}))()}},{key:"readFeature",value:function(){var t=m5(d5().mark(function t(e,r,n){var o,i,a,s,u,l,c;return d5().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return o=r+this.lengthBeforeFeatures(),t.next=3,e.getRange(o,4,n,"feature length");case 3:return a=t.sent,i=new DataView(a).getUint32(0,!0),t.next=7,e.getRange(o+4,i,n,"feature data");case 7:return s=t.sent,u=new Uint8Array(s),(l=new Uint8Array(i+l5)).set(u,l5),(c=new N3(l)).setPosition(l5),t.abrupt("return",K3.getRootAsFeature(c));case 14:case"end":return t.stop()}},t,this)}));return function(e,r,n){return t.apply(this,arguments)}}()}],[{key:"open",value:function(){var e=m5(d5().mark(function e(r,n){var o,i,a,s,u,l,c,f,p,h,y;return d5().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=2024,i=new A5(r,n),a=function(){var t,e=0;for(t=0;t<3;t++){e+=Math.pow(16,t)*n5}return e}(),s=o+a,W4.debug("fetching header. minReqLength: ".concat(s," (assumedHeaderLength: ").concat(o,", assumedIndexLength: ").concat(a,")")),e.t0=Uint8Array,e.next=8,i.getRange(0,8,s,"header");case 8:if(e.t1=e.sent,(u=new e.t0(e.t1)).subarray(0,3).every(function(t,e){return u5[e]===t})){e.next=13;break}throw W4.error("bytes: ".concat(u," != ").concat(u5)),new Error("Not a FlatGeobuf file");case 13:return W4.debug("magic bytes look good"),e.next=16,i.getRange(8,4,s,"header");case 16:if(c=e.sent,!((l=new DataView(c).getUint32(0,!0))>10485760||l<8)){e.next=21;break}throw new Error("Invalid header size");case 21:return W4.debug("headerLength: ".concat(l)),e.next=24,i.getRange(12,l,s,"header");case 24:return f=e.sent,p=new N3(new Uint8Array(f)),h=u4(p),y=o5(h.featuresCount,h.indexNodeSize),W4.debug("completed: opening http reader"),e.abrupt("return",new t(i,h,l,y,n));case 30:case"end":return e.stop()}},e)}));return function(t,r){return e.apply(this,arguments)}}()}])}(),A5=function(){return S5(function t(e,r){if(b5(this,t),this.bytesEverUsed=0,this.bytesEverFetched=0,this.buffer=new ArrayBuffer(0),this.head=0,"string"==typeof e)this.httpClient=new j5(e,r);else{if(!(e instanceof j5))throw new Error("Unknown source ");this.httpClient=e}},[{key:"getRange",value:function(){var t=m5(d5().mark(function t(e,r,n,o){var i,a,s;return d5().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.bytesEverUsed+=r,i=e-this.head,a=i+r,!(i>=0&&a<=this.buffer.byteLength)){t.next=5;break}return t.abrupt("return",this.buffer.slice(i,a));case 5:return s=Math.max(r,n),this.bytesEverFetched+=s,W4.debug("requesting for new Range: ".concat(e,"-").concat(e+s-1)),t.next=10,this.httpClient.getRange(e,s,o);case 10:return this.buffer=t.sent,this.head=e,t.abrupt("return",this.buffer.slice(0,r));case 13:case"end":return t.stop()}},t,this)}));return function(e,r,n,o){return t.apply(this,arguments)}}()},{key:"logUsage",value:function(t){var e=t.split(" ")[0],r=this.bytesEverUsed,n=this.bytesEverFetched,o=(100*r/n).toFixed(2);W4.info("".concat(e," bytes used/requested: ").concat(r," / ").concat(n," = ").concat(o,"%"))}}])}(),j5=function(){return S5(function t(e,r){b5(this,t),this.requestsEverMade=0,this.bytesEverRequested=0,this.url=e,this.nocache=r},[{key:"getRange",value:function(){var t=m5(d5().mark(function t(e,r,n){var o,i,a;return d5().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.requestsEverMade+=1,this.bytesEverRequested+=r,o="bytes=".concat(e,"-").concat(e+r-1),W4.info("request: #".concat(this.requestsEverMade,", purpose: ").concat(n,"), bytes: (this_request: ").concat(r,", ever: ").concat(this.bytesEverRequested,"), Range: ").concat(o)),i={Range:o},this.nocache&&(i["Cache-Control"]="no-cache, no-store"),t.next=8,fetch(this.url,{headers:i});case 8:return a=t.sent,t.abrupt("return",a.arrayBuffer());case 10:case"end":return t.stop()}},t,this)}));return function(e,r,n){return t.apply(this,arguments)}}()}])}();function N5(t){"@babel/helpers - typeof";return(N5="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function I5(){I5=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),s=new A(n||[]);return o(a,"_invoke",{value:x(t,r,s)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var p="suspendedStart",h="suspendedYield",y="executing",d="completed",v={};function m(){}function b(){}function g(){}var S={};l(S,a,function(){return this});var w=Object.getPrototypeOf,_=w&&w(w(j([])));_&&_!==r&&n.call(_,a)&&(S=_);var O=g.prototype=m.prototype=Object.create(S);function E(t){["next","throw","return"].forEach(function(e){l(t,e,function(t){return this._invoke(e,t)})})}function P(t,e){function r(o,i,a,s){var u=f(t[o],t,i);if("throw"!==u.type){var l=u.arg,c=l.value;return c&&"object"==N5(c)&&n.call(c,"__await")?e.resolve(c.__await).then(function(t){r("next",t,a,s)},function(t){r("throw",t,a,s)}):e.resolve(c).then(function(t){l.value=t,a(l)},function(t){return r("throw",t,a,s)})}s(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e(function(e,o){r(t,n,e,o)})}return i=i?i.then(o,o):o()}})}function x(e,r,n){var o=p;return function(i,a){if(o===y)throw Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var u=T(s,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var l=f(e,r,n);if("normal"===l.type){if(o=n.done?d:h,l.arg===v)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=d,n.method="throw",n.arg=l.arg)}}}function T(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,T(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function A(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function j(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(N5(e)+" is not iterable")}return b.prototype=g,o(O,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=l(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,l(t,u,"GeneratorFunction")),t.prototype=Object.create(O),t},e.awrap=function(t){return{__await:t}},E(P.prototype),l(P.prototype,s,function(){return this}),e.AsyncIterator=P,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new P(c(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next()})},E(O),l(O,u,"Generator"),l(O,a,function(){return this}),l(O,"toString",function(){return"[object Generator]"}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=j,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(k),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),k(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;k(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:j(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function M5(t,e,r,n,o,i,a){try{var s=t[i](a),u=s.value}catch(t){return void r(t)}s.done?e(u):Promise.resolve(u).then(n,o)}function R5(t){return function(){var e=this,r=arguments;return new Promise(function(n,o){var i=t.apply(e,r);function a(t){M5(i,n,o,a,s,"next",t)}function s(t){M5(i,n,o,a,s,"throw",t)}a(void 0)})}}function L5(t){var e,r,n,o=2;for("undefined"!=typeof Symbol&&(r=Symbol.asyncIterator,n=Symbol.iterator);o--;){if(r&&null!=(e=t[r]))return e.call(t);if(n&&null!=(e=t[n]))return new D5(e.call(t));r="@@asyncIterator",n="@@iterator"}throw new TypeError("Object is not async iterable")}function D5(t){function e(t){if(Object(t)!==t)return Promise.reject(new TypeError(t+" is not an object."));var e=t.done;return Promise.resolve(t.value).then(function(t){return{value:t,done:e}})}return(D5=function(t){this.s=t,this.n=t.next}).prototype={s:null,n:null,next:function(){return e(this.n.apply(this.s,arguments))},return:function(t){var r=this.s.return;return void 0===r?Promise.resolve({value:t,done:!0}):e(r.apply(this.s,arguments))},throw:function(t){var r=this.s.return;return void 0===r?Promise.reject(t):e(r.apply(this.s,arguments))}},new D5(t)}function B5(t){return new G5(t,0)}function F5(t){return function(){return new U5(t.apply(this,arguments))}}function U5(t){var e,r;function n(e,r){try{var i=t[e](r),a=i.value,s=a instanceof G5;Promise.resolve(s?a.v:a).then(function(r){if(s){var u="return"===e?"return":"next";if(!a.k||r.done)return n(u,r);r=t[u](r).value}o(i.done?"return":"normal",r)},function(t){n("throw",t)})}catch(t){o("throw",t)}}function o(t,o){switch(t){case"return":e.resolve({value:o,done:!0});break;case"throw":e.reject(o);break;default:e.resolve({value:o,done:!1})}(e=e.next)?n(e.key,e.arg):r=null}this._invoke=function(t,o){return new Promise(function(i,a){var s={key:t,arg:o,resolve:i,reject:a,next:null};r?r=r.next=s:(e=r=s,n(t,o))})},"function"!=typeof t.return&&(this.return=void 0)}function G5(t,e){this.v=t,this.k=e}function V5(){return(V5=F5(I5().mark(function t(e,r,n){var o,i,a,s,u,l,c,f,p,h;return I5().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return o="function"==typeof(y=e).slice?y:new $3("function"==typeof y.read?y:y.getReader()),i=function(){var t=R5(I5().mark(function t(e){return I5().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.slice(e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),t.t0=Uint8Array,t.next=5,B5(i(8,"magic bytes"));case 5:if(t.t1=t.sent,(a=new t.t0(t.t1)).subarray(0,3).every(function(t,e){return u5[e]===t})){t.next=9;break}throw new Error("Not a FlatGeobuf file");case 9:return t.t2=Uint8Array,t.next=12,B5(i(4,"header length"));case 12:return t.t3=t.sent,a=new t.t2(t.t3),s=new N3(a),u=s.readUint32(0),t.t4=Uint8Array,t.next=19,B5(i(u,"header data"));case 19:if(t.t5=t.sent,a=new t.t4(t.t5),s=new N3(a),l=u4(s),n&&n(l),c=l.indexNodeSize,f=l.featuresCount,!(c>0)){t.next=29;break}return p=o5(f,c),t.next=29,B5(i(p,"entire index, w/o rect"));case 29:return t.next=31,B5(H5(i,l,r));case 31:if(!(h=t.sent)){t.next=36;break}return t.next=34,h;case 34:t.next=29;break;case 36:case"end":return t.stop()}var y},t)}))).apply(this,arguments)}function z5(){return(z5=F5(function(t,e,r,n){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return I5().mark(function i(){var a,s,u,l,c,f,p;return I5().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,B5(k5.open(t,o));case 2:a=i.sent,W4.debug("opened reader"),n&&n(a.header),s=!1,u=!1,i.prev=7,c=L5(a.selectBbox(e));case 9:return i.next=11,B5(c.next());case 11:if(!(s=!(f=i.sent).done)){i.next=18;break}return p=f.value,i.next=15,r(p,a.header);case 15:s=!1,i.next=9;break;case 18:i.next=24;break;case 20:i.prev=20,i.t0=i.catch(7),u=!0,l=i.t0;case 24:if(i.prev=24,i.prev=25,!s||null==c.return){i.next=29;break}return i.next=29,B5(c.return());case 29:if(i.prev=29,!u){i.next=32;break}throw l;case 32:return i.finish(29);case 33:return i.finish(24);case 34:case"end":return i.stop()}},i,null,[[7,20,24,34],[25,,29,33]])})()})).apply(this,arguments)}function H5(t,e,r){return q5.apply(this,arguments)}function q5(){return(q5=R5(I5().mark(function t(e,r,n){var o,i,a,s,u;return I5().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Uint8Array,t.next=3,e(4,"feature length");case 3:if(t.t1=t.sent,0!==(o=new t.t0(t.t1)).byteLength){t.next=7;break}return t.abrupt("return");case 7:return i=new N3(o),a=i.readUint32(0),t.t2=Uint8Array,t.next=12,e(a,"feature data");case 12:return t.t3=t.sent,o=new t.t2(t.t3),(s=new Uint8Array(a+4)).set(o,4),(i=new N3(s)).setPosition(l5),u=K3.getRootAsFeature(i),t.abrupt("return",n(u,r));case 20:case"end":return t.stop()}},t)}))).apply(this,arguments)}function J5(t,e){return{type:"FeatureCollection",features:function(t,e,r){if(!t.subarray(0,3).every(function(t,e){return u5[e]===t}))throw new Error("Not a FlatGeobuf file");var n=new N3(t),o=n.readUint32(u5.length);n.setPosition(u5.length+l5);var i=u4(n);r&&r(i);var a=u5.length+l5+o,s=i.indexNodeSize,u=i.featuresCount;s>0&&(a+=o5(u,s));for(var l=[];a<n.capacity();){var c=n.readUint32(a);n.setPosition(a+l5);var f=K3.getRootAsFeature(n);l.push(e(f,i)),a+=l5+c}return l}(t,X3,e)}}function W5(t,e){return function(t,e,r){return V5.apply(this,arguments)}(t,X3,e)}function K5(t,e,r){return function(t,e,r,n){return z5.apply(this,arguments)}(t,e,X3,r,arguments.length>3&&void 0!==arguments[3]&&arguments[3])}function Y5(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return t instanceof Uint8Array?J5(t,r):t instanceof ReadableStream?W5(t,r):K5(t,e,r,n)}function Q5(t){"@babel/helpers - typeof";return(Q5="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function X5(){X5=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),s=new A(n||[]);return o(a,"_invoke",{value:x(t,r,s)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var p="suspendedStart",h="suspendedYield",y="executing",d="completed",v={};function m(){}function b(){}function g(){}var S={};l(S,a,function(){return this});var w=Object.getPrototypeOf,_=w&&w(w(j([])));_&&_!==r&&n.call(_,a)&&(S=_);var O=g.prototype=m.prototype=Object.create(S);function E(t){["next","throw","return"].forEach(function(e){l(t,e,function(t){return this._invoke(e,t)})})}function P(t,e){function r(o,i,a,s){var u=f(t[o],t,i);if("throw"!==u.type){var l=u.arg,c=l.value;return c&&"object"==Q5(c)&&n.call(c,"__await")?e.resolve(c.__await).then(function(t){r("next",t,a,s)},function(t){r("throw",t,a,s)}):e.resolve(c).then(function(t){l.value=t,a(l)},function(t){return r("throw",t,a,s)})}s(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e(function(e,o){r(t,n,e,o)})}return i=i?i.then(o,o):o()}})}function x(e,r,n){var o=p;return function(i,a){if(o===y)throw Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var u=T(s,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var l=f(e,r,n);if("normal"===l.type){if(o=n.done?d:h,l.arg===v)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=d,n.method="throw",n.arg=l.arg)}}}function T(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,T(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function A(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function j(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(Q5(e)+" is not iterable")}return b.prototype=g,o(O,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=l(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,l(t,u,"GeneratorFunction")),t.prototype=Object.create(O),t},e.awrap=function(t){return{__await:t}},E(P.prototype),l(P.prototype,s,function(){return this}),e.AsyncIterator=P,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new P(c(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next()})},E(O),l(O,u,"Generator"),l(O,a,function(){return this}),l(O,"toString",function(){return"[object Generator]"}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=j,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(k),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),k(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;k(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:j(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function Z5(t,e,r,n,o,i,a){try{var s=t[i](a),u=s.value}catch(t){return void r(t)}s.done?e(u):Promise.resolve(u).then(n,o)}function $5(t){return function(){var e=this,r=arguments;return new Promise(function(n,o){var i=t.apply(e,r);function a(t){Z5(i,n,o,a,s,"next",t)}function s(t){Z5(i,n,o,a,s,"throw",t)}a(void 0)})}}function t6(t){var e,r,n,o=2;for("undefined"!=typeof Symbol&&(r=Symbol.asyncIterator,n=Symbol.iterator);o--;){if(r&&null!=(e=t[r]))return e.call(t);if(n&&null!=(e=t[n]))return new e6(e.call(t));r="@@asyncIterator",n="@@iterator"}throw new TypeError("Object is not async iterable")}function e6(t){function e(t){if(Object(t)!==t)return Promise.reject(new TypeError(t+" is not an object."));var e=t.done;return Promise.resolve(t.value).then(function(t){return{value:t,done:e}})}return(e6=function(t){this.s=t,this.n=t.next}).prototype={s:null,n:null,next:function(){return e(this.n.apply(this.s,arguments))},return:function(t){var r=this.s.return;return void 0===r?Promise.resolve({value:t,done:!0}):e(r.apply(this.s,arguments))},throw:function(t){var r=this.s.return;return void 0===r?Promise.reject(t):e(r.apply(this.s,arguments))}},new e6(t)}U5.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},U5.prototype.next=function(t){return this._invoke("next",t)},U5.prototype.throw=function(t){return this._invoke("throw",t)},U5.prototype.return=function(t){return this._invoke("return",t)};var r6=RQ().FeatureGroup.extend({initialize:function(t,e){this.options=e||{},this.strategy=this.options.strategy||"bbox",this._layers={},this.url=t,this.previousLayer=null,this.loadedExtentsRtree_=new(O3()),this.extent=this.options.extent,this._cacheIds=[],this._validatedId=!1,this._checked=!1,this.idField=this.options.idField||"SmID",this._updateFeaturesFn=this._updateFeatures.bind(this),RQ().Util.setOptions(this,e)},onAdd:function(t){this.map=t;var e,r,n,o=[];if("bbox"===this.strategy){var i=t.getBounds();o=[i.getWest(),i.getSouth(),i.getEast(),i.getNorth()],t.on("moveend",this._updateFeaturesFn)}if(this.extent){var a=(e=this.extent,n=[],function(t,e){return t[0]<=e[2]&&t[2]>=e[0]&&t[1]<=e[3]&&t[3]>=e[1]}(e,r=o)&&(e[0]>r[0]?n[0]=e[0]:n[0]=r[0],e[1]>r[1]?n[1]=e[1]:n[1]=r[1],e[2]<r[2]?n[2]=e[2]:n[2]=r[2],e[3]<r[3]?n[3]=e[3]:n[3]=r[3]),n);o=a&&a.length?a:this.extent}this._handleFeatures(o)},onRemove:function(t){this.loadedExtentsRtree_.clear(),this.loadedExtentsRtree_=null,"bbox"===this.strategy&&(t.off("moveend",this._updateFeaturesFn),this._cacheIds=[])},_updateFeatures:function(){var t=$5(X5().mark(function t(e){var r,n,o,i=this;return X5().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:r=e.target,n=[r.getBounds().getSouthWest(),r.getBounds().getNorthEast()],o=[n[0].lng,n[0].lat,n[1].lng,n[1].lat],this._forEachInExtent(o,function(t){return i._containsExtent(t.extent,o)})||this._handleFeatures(o);case 5:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),_handleFeatures:function(){var t=$5(X5().mark(function t(e){var r,n,o,i,a,s,u,l,c,f;return X5().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]},e.length){t.next=7;break}return t.next=4,this._getStream(this.url);case 4:r=t.sent,t.next=9;break;case 7:n.value={extent:e.slice()},this.loadedExtentsRtree_.insert(n);case 9:o=Y5(r&&r.body||this.url,n),this._validatedId||(this.curLayer=RQ().geoJSON(null,this.options),this.previousLayer&&this.removeLayer(this.previousLayer),this.previousLayer=this.curLayer,this.curLayer.addTo(this)),i=!1,a=!1,t.prev=13,u=t6(o);case 15:return t.next=17,u.next();case 17:if(!(i=!(l=t.sent).done)){t.next=31;break}if(c=l.value,"bbox"!==this.strategy){t.next=26;break}if((f=c.properties[this.idField])&&!this._validatedId&&(this._validatedId=!0,this._checked=!0),!f||!this._checked){t.next=26;break}if(!this._cacheIds.includes(f)){t.next=25;break}return t.abrupt("continue",28);case 25:this._cacheIds.push(f);case 26:this.options.featureLoader&&"function"==typeof this.options.featureLoader&&(c=this.options.featureLoader(c)),this.curLayer.addData(c);case 28:i=!1,t.next=15;break;case 31:t.next=37;break;case 33:t.prev=33,t.t0=t.catch(13),a=!0,s=t.t0;case 37:if(t.prev=37,t.prev=38,!i||null==u.return){t.next=42;break}return t.next=42,u.return();case 42:if(t.prev=42,!a){t.next=45;break}throw s;case 45:return t.finish(42);case 46:return t.finish(37);case 47:case"end":return t.stop()}},t,this,[[13,33,37,47],[38,,42,46]])}));return function(e){return t.apply(this,arguments)}}(),_getStream:function(t){return $5(X5().mark(function e(){return X5().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,co.get(t,{},{withoutFormatSuffix:!0}).then(function(t){return t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}))()},_containsExtent:function(t,e){return t[0]<=e[0]&&e[2]<=t[2]&&t[1]<=e[1]&&e[3]<=t[3]},_getInExtent:function(t){var e={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]};return this.loadedExtentsRtree_.search(e).map(function(t){return t.value})},_forEachInExtent:function(t,e){return this._forEach(this._getInExtent(t),e)},_forEach:function(t,e){for(var r,n=0,o=t.length;n<o;n++)if(r=e(t[n]))return r;return r}});function n6(t){"@babel/helpers - typeof";return(n6="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o6(){o6=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),s=new A(n||[]);return o(a,"_invoke",{value:x(t,r,s)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var p="suspendedStart",h="suspendedYield",y="executing",d="completed",v={};function m(){}function b(){}function g(){}var S={};l(S,a,function(){return this});var w=Object.getPrototypeOf,_=w&&w(w(j([])));_&&_!==r&&n.call(_,a)&&(S=_);var O=g.prototype=m.prototype=Object.create(S);function E(t){["next","throw","return"].forEach(function(e){l(t,e,function(t){return this._invoke(e,t)})})}function P(t,e){function r(o,i,a,s){var u=f(t[o],t,i);if("throw"!==u.type){var l=u.arg,c=l.value;return c&&"object"==n6(c)&&n.call(c,"__await")?e.resolve(c.__await).then(function(t){r("next",t,a,s)},function(t){r("throw",t,a,s)}):e.resolve(c).then(function(t){l.value=t,a(l)},function(t){return r("throw",t,a,s)})}s(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e(function(e,o){r(t,n,e,o)})}return i=i?i.then(o,o):o()}})}function x(e,r,n){var o=p;return function(i,a){if(o===y)throw Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var u=T(s,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var l=f(e,r,n);if("normal"===l.type){if(o=n.done?d:h,l.arg===v)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=d,n.method="throw",n.arg=l.arg)}}}function T(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,T(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function A(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function j(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(n6(e)+" is not iterable")}return b.prototype=g,o(O,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=l(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,l(t,u,"GeneratorFunction")),t.prototype=Object.create(O),t},e.awrap=function(t){return{__await:t}},E(P.prototype),l(P.prototype,s,function(){return this}),e.AsyncIterator=P,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new P(c(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next()})},E(O),l(O,u,"Generator"),l(O,a,function(){return this}),l(O,"toString",function(){return"[object Generator]"}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=j,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(k),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),k(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;k(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:j(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function i6(t,e,r,n,o,i,a){try{var s=t[i](a),u=s.value}catch(t){return void r(t)}s.done?e(u):Promise.resolve(u).then(n,o)}var a6=E0.extend({initialize:function(t,e){E0.prototype.initialize.call(this,t,e),this._knowledgeGraphService=new PL(this.url,e)},findShortestPath:function(t,e){return this._knowledgeGraphService.findShortestPath(t,e)},query:function(t,e){return this._knowledgeGraphService.query(t,e)},getGraphMaps:function(t){return this._knowledgeGraphService.getGraphMaps(t)},getGraphMap:function(t,e){return this._knowledgeGraphService.getGraphMap(t,e)},getGraphMapData:function(t){var e,r=this;return(e=o6().mark(function e(){var n;return o6().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._knowledgeGraphService.getGraphMapData(t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}},e)}),function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function a(t){i6(i,n,o,a,s,"next",t)}function s(t){i6(i,n,o,a,s,"throw",t)}a(void 0)})})()}});function s6(t){"@babel/helpers - typeof";return(s6="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u6(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function l6(){l6=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),s=new A(n||[]);return o(a,"_invoke",{value:x(t,r,s)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var p="suspendedStart",h="suspendedYield",y="executing",d="completed",v={};function m(){}function b(){}function g(){}var S={};l(S,a,function(){return this});var w=Object.getPrototypeOf,_=w&&w(w(j([])));_&&_!==r&&n.call(_,a)&&(S=_);var O=g.prototype=m.prototype=Object.create(S);function E(t){["next","throw","return"].forEach(function(e){l(t,e,function(t){return this._invoke(e,t)})})}function P(t,e){function r(o,i,a,s){var u=f(t[o],t,i);if("throw"!==u.type){var l=u.arg,c=l.value;return c&&"object"==s6(c)&&n.call(c,"__await")?e.resolve(c.__await).then(function(t){r("next",t,a,s)},function(t){r("throw",t,a,s)}):e.resolve(c).then(function(t){l.value=t,a(l)},function(t){return r("throw",t,a,s)})}s(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e(function(e,o){r(t,n,e,o)})}return i=i?i.then(o,o):o()}})}function x(e,r,n){var o=p;return function(i,a){if(o===y)throw Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var u=T(s,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var l=f(e,r,n);if("normal"===l.type){if(o=n.done?d:h,l.arg===v)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=d,n.method="throw",n.arg=l.arg)}}}function T(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,T(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function A(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function j(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(s6(e)+" is not iterable")}return b.prototype=g,o(O,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=l(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,l(t,u,"GeneratorFunction")),t.prototype=Object.create(O),t},e.awrap=function(t){return{__await:t}},E(P.prototype),l(P.prototype,s,function(){return this}),e.AsyncIterator=P,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new P(c(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next()})},E(O),l(O,u,"Generator"),l(O,a,function(){return this}),l(O,"toString",function(){return"[object Generator]"}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=j,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(k),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),k(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;k(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:j(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function c6(t,e,r,n,o,i,a){try{var s=t[i](a),u=s.value}catch(t){return void r(t)}s.done?e(u):Promise.resolve(u).then(n,o)}function f6(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,p6(n.key),n)}}function p6(t){var e=function(t,e){if("object"!=s6(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=s6(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==s6(e)?e:e+""}function h6(t,e,r){return e=y6(e),function(t,e){if(e&&("object"===s6(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],y6(t).constructor):e.apply(t,r))}function y6(t){return(y6=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function d6(t,e){return(d6=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var v6=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),h6(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&d6(t,e)}(e,RQ().Evented),r=e,(n=[{key:"initialize",value:function(t,e){if(t){this.graph=null,this.EVENT_TYPES=["loaded"];var r=t.split("/").pop();this.url=t.replace("/graphmaps/".concat(r),""),this.createGraphMap(r,e)}}},{key:"createGraphMap",value:function(){var t,e=(t=l6().mark(function t(e,r){var n,o,i=this;return l6().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.knowledgeGraphService=this.createKnowledgeGraphService(this.url,r),t.next=3,this.knowledgeGraphService.getGraphMapData(e);case 3:n=t.sent,o=sW.dataFromGraphMap(n.data,n.graphMap),this.graph=new sW(r&&r.config),this.graph.on("afterlayout",function(){i.fire(i.EVENT_TYPES[0])}),this.graph.setData(o),this.graph.handleNodeStatus((a=n.graphMap,void 0,void 0,void 0,void 0,s=a.dataContent,u=s.expand,l=s.collapse,c=s.hidden,{expand:u&&JSON.parse(u),collapse:l&&JSON.parse(l),hidden:c&&JSON.parse(c)}));case 9:case"end":return t.stop()}var a,s,u,l,c},t,this)}),function(){var e=this,r=arguments;return new Promise(function(n,o){var i=t.apply(e,r);function a(t){c6(i,n,o,a,s,"next",t)}function s(t){c6(i,n,o,a,s,"throw",t)}a(void 0)})});return function(t,r){return e.apply(this,arguments)}}()},{key:"createKnowledgeGraphService",value:function(t,e){return new a6(t,e)}},{key:"findShortestPath",value:function(t,e){var r=this,n=t.startID,o=t.endID,i=t.isHighlight,a=void 0===i||i,s=t.highlightStateStyles,u=void 0===s?{}:s;return this.knowledgeGraphService.findShortestPath({startID:n,endID:o},function(t){if(e&&e(t),a)if("processCompleted"===t.type&&t.result.succeed){var n=t.result,o=n.nodeIDs,i=n.edgeIDs;r.highlight(function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?u6(Object(r),!0).forEach(function(e){var n,o,i;n=t,o=e,i=r[e],(o=p6(o))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):u6(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}({nodeIDs:o,edgeIDs:i},u))}else alert(t.error.errorMsg,!1)})}},{key:"highlight",value:function(t){this.graph&&this.graph.highlight(t)}},{key:"clearHighlight",value:function(t){this.graph&&this.graph.clearHighlight(t)}}])&&f6(r.prototype,n),o&&f6(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}(),m6=E0.extend({initialize:function(t,e){E0.prototype.initialize.call(this,t,e);this._addressMatchService=new ca(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers})},code:function(t,e){return this._addressMatchService.code(Tt.urlPathAppend(this.url,"geocoding"),t,e)},decode:function(t,e){return this._addressMatchService.decode(Tt.urlPathAppend(this.url,"geodecoding"),t,e)}});function b6(t){"@babel/helpers - typeof";return(b6="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function g6(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,S6(n.key),n)}}function S6(t){var e=function(t,e){if("object"!=b6(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=b6(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==b6(e)?e:e+""}var w6=function(){return t=function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.url=e,this.options=r||{}},(e=[{key:"queryChart",value:function(t,e,r){var n=this,o=t,i=n._processFormat(r);return new El(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:i,fieldNameFormatter:n.options.fieldNameFormatter}).processAsync(o,e)}},{key:"getChartFeatureInfo",value:function(t){var e=this,r=Tt.urlPathAppend(e.url,"chartFeatureInfoSpecs");return new Yu(r,{proxy:e.options.proxy,withCredentials:e.options.withCredentials,crossOrigin:e.options.crossOrigin,headers:e.options.headers}).processAsync(t)}},{key:"getChartAcronymClassify",value:function(t){var e=this;return new nl(e.url,{proxy:e.options.proxy,withCredentials:e.options.withCredentials,crossOrigin:e.options.crossOrigin,headers:e.options.headers}).processAsync(t)}},{key:"_processFormat",value:function(t){return t||o.GEOJSON}}])&&g6(t.prototype,e),r&&g6(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}(),_6=E0.extend({initialize:function(t,e){E0.prototype.initialize.call(this,t,e),this._chartServiceBase=new w6(t,e)},queryChart:function(t,e,r){return t=this._processParams(t),this._chartServiceBase.queryChart(t,e,r)},getChartFeatureInfo:function(t){return this._chartServiceBase.getChartFeatureInfo(t)},getChartAcronymClassify:function(t){return this._chartServiceBase.getChartAcronymClassify(t)},_processParams:function(t){return t?(t.returnContent=null==t.returnContent||t.returnContent,t.chartQueryFilterParameters&&!RQ().Util.isArray(t.chartQueryFilterParameters)&&(t.chartQueryFilterParameters=[t.chartQueryFilterParameters]),t.bounds&&(t.bounds=A0.toSuperMapBounds(t.bounds)),t):{}},_processFormat:function(t){return t||o.GEOJSON}}),O6=E0.extend({initialize:function(t,e){E0.prototype.initialize.call(this,t,e),this._datasetService=new Rv(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers})},getDatasets:function(t,e){if(t)return this._datasetService.getDatasetsService(t,e)},getDataset:function(t,e,r){if(t&&e)return this._datasetService.getDatasetService(t,e,r)},setDataset:function(t,e){if(t instanceof cI||t instanceof MI){if(t instanceof cI)var r={datasetType:t.datasetType,datasourceName:t.datasourceName,datasetName:t.datasetName};else t instanceof MI&&(r={datasetName:t.datasetName,datasourceName:t.datasourceName,isFileCache:t.isFileCache,description:t.description,prjCoordSys:t.prjCoordSys,charset:t.charset});return this._datasetService.setDatasetService(r,e)}},deleteDataset:function(t,e,r){return this._datasetService.deleteDatasetService(t,e,r)}}),E6=E0.extend({initialize:function(t,e){E0.prototype.initialize.call(this,t,e),this._datasourceService=new uf(this.url,{proxy:this.proxy,withCredentials:this.withCredentials,crossOrigin:this.crossOrigin,headers:this.headers})},getDatasources:function(t){return this._datasourceService.getDatasourcesService(t)},getDatasource:function(t,e){if(t)return this._datasourceService.getDatasourceService(t,e)},setDatasource:function(t,e){if(t instanceof LC){var r={description:t.description,coordUnit:t.coordUnit,distanceUnit:t.distanceUnit,datasourceName:t.datasourceName};return this._datasourceService.setDatasourceService(r,e)}}});function P6(t){"@babel/helpers - typeof";return(P6="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function x6(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,T6(n.key),n)}}function T6(t){var e=function(t,e){if("object"!=P6(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=P6(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==P6(e)?e:e+""}var C6=function(){return t=function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.url=e,this.options=r||{}},(e=[{key:"getFields",value:function(t,e){var r=this;return new Tb(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,datasource:t.datasource,dataset:t.dataset}).processAsync(e)}},{key:"getFieldStatisticsInfo",value:function(t,e){if(t instanceof qh){var r=this,n=t.fieldName,o=t.statisticMode;o&&!Array.isArray(o)&&(o=[o]),r.currentStatisticResult={fieldName:n},r._statisticsCallback=e,o.forEach(function(e){r.currentStatisticResult[e]=null,r._fieldStatisticRequest(t.datasource,t.dataset,n,e)})}}},{key:"_fieldStatisticRequest",value:function(t,e,r,n){var o=this;new $h(o.url,{datasource:t,dataset:e,field:r,statisticMode:n,crossOrigin:o.options.crossOrigin,headers:o.options.headers}).processAsync(o._processCompleted.bind(o))}},{key:"_processCompleted",value:function(t){var e=this;if(t.error)e._statisticsCallback(t);else{var r=!0,n=t.result;for(var o in this.currentStatisticResult&&null==e.currentStatisticResult[n.mode]&&(this.currentStatisticResult[n.mode]=n.result),e.currentStatisticResult)if(null==e.currentStatisticResult[o]){r=!1;break}r&&e._statisticsCallback({result:e.currentStatisticResult})}}}])&&x6(t.prototype,e),r&&x6(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}(),k6=E0.extend({initialize:function(t,e){E0.prototype.initialize.call(this,t,e),this._fieldService=new C6(t,e)},getFields:function(t,e){return this._fieldService.getFields(t,e)},getFieldStatisticsInfo:function(t,e){return this._fieldService.getFieldStatisticsInfo(t,e)}}),A6=E0.extend({initialize:function(t,e){E0.prototype.initialize.call(this,t,e),this._gridCellQueryService=new Fb(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers})},getGridCellInfos:function(t,e){return t?this._gridCellQueryService.processAsync(t,e):null}}),j6=E0.extend({initialize:function(t,e){e=e||{},RQ().setOptions(this,e),E0.prototype.initialize.call(this,t,e),this.headers={},this.crossOrigin=!0,this.withCredentials=!0,this.proxy=!0,this._geoprocessingJobsService=new yv(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers})},getTools:function(t){return this._geoprocessingJobsService.getTools(t)},getTool:function(t,e){return this._geoprocessingJobsService.getTool(t,e)},execute:function(t,e,r,n){return this._geoprocessingJobsService.execute(t,e,r,n)},submitJob:function(t,e,r,n){return this._geoprocessingJobsService.submitJob(t,e,r,n)},waitForJobCompletion:function(t,e,r,n){return this._geoprocessingJobsService.waitForJobCompletion(t,e,r,n)},getJobInfo:function(t,e,r){return this._geoprocessingJobsService.getJobInfo(t,e,r)},cancelJob:function(t,e,r){return this._geoprocessingJobsService.cancelJob(t,e,r)},getJobs:function(t,e){return this._geoprocessingJobsService.getJobs(t,e)},getResults:function(t,e,r,n){return this._geoprocessingJobsService.getResults(t,e,r,n)}});function N6(t){"@babel/helpers - typeof";return(N6="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function I6(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,M6(n.key),n)}}function M6(t){var e=function(t,e){if("object"!=N6(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=N6(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==N6(e)?e:e+""}var R6=function(){return t=function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.url=e,this.options=r||{}},(e=[{key:"getLayersInfo",value:function(t){var e=this;return new Kw(e.url,{proxy:e.options.proxy,withCredentials:e.options.withCredentials,crossOrigin:e.options.crossOrigin,headers:e.options.headers}).processAsync(t)}},{key:"getLayersLegendInfo",value:function(t,e){var r=this;return new tC(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers}).processAsync(t,e)}},{key:"setLayerInfo",value:function(t,e){if(t){var r=this,n=t.resourceID,o=t.tempLayerName,i=t.layerInfo;if(n&&o){var a=Tt.urlPathAppend(r.url,"tempLayersSet/"+n+"/"+o);return new KC(a,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers}).processAsync(i,e)}}}},{key:"setLayersInfo",value:function(t,e){if(t){var r=this,n=t.resourceID,o=!!t.isTempLayers&&t.isTempLayers,i=t.layersInfo;if((!o||n)&&i)return new ak(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,resourceID:n,isTempLayers:o}).processAsync(i,e)}}},{key:"setLayerStatus",value:function(t,e){if(t){var r=this;return new bk(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers}).processAsync(t,e)}}}])&&I6(t.prototype,e),r&&I6(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}(),L6=E0.extend({initialize:function(t,e){E0.prototype.initialize.call(this,t,e),this._layerInfoService=new R6(t,e)},getLayersInfo:function(t){return this._layerInfoService.getLayersInfo(t)},getLayersLegendInfo:function(t,e){return this._layerInfoService.getLayersLegendInfo(t,e)},setLayerInfo:function(t,e){return this._layerInfoService.setLayerInfo(t,e)},setLayersInfo:function(t,e){return this._layerInfoService.setLayersInfo(t,e)},setLayerStatus:function(t,e){return this._layerInfoService.setLayerStatus(t,e)}}),D6=E0.extend({initialize:function(t,e){E0.prototype.initialize.call(this,t,e)},measureDistance:function(t,e){return this.measure(l.DISTANCE,t,e)},measureArea:function(t,e){return this.measure(l.AREA,t,e)},measure:function(t,e,r){if(e instanceof $O){var n=this;return e.geometry&&(e.geometry=q0(e.geometry)),new sE(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,measureMode:t}).processAsync(e,r)}}});function B6(t){"@babel/helpers - typeof";return(B6="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function F6(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,U6(n.key),n)}}function U6(t){var e=function(t,e){if("object"!=B6(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=B6(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==B6(e)?e:e+""}var V6=function(){return t=function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.url=e,this.options=r||{}},(e=[{key:"sinksFacilityAnalyst",value:function(t,e){var r=this;return new op(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers}).processAsync(t,e)}},{key:"sourcesFacilityAnalyst",value:function(t,e){var r=this;return new Sp(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers}).processAsync(t,e)}},{key:"traceUpFacilityAnalyst",value:function(t,e){var r=this;return new ch(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers}).processAsync(t,e)}},{key:"traceDownFacilityAnalyst",value:function(t,e){var r=this;return new Kp(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers}).processAsync(t,e)}},{key:"upstreamFacilityAnalyst",value:function(t,e){var r=this;return new xh(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers}).processAsync(t,e)}}])&&F6(t.prototype,e),r&&F6(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}(),z6=E0.extend({initialize:function(t,e){E0.prototype.initialize.call(this,t,e),this._networkAnalyst3DService=new V6(t,e)},sinksFacilityAnalyst:function(t,e){return this._networkAnalyst3DService.sinksFacilityAnalyst(t,e)},sourcesFacilityAnalyst:function(t,e){return this._networkAnalyst3DService.sourcesFacilityAnalyst(t,e)},traceUpFacilityAnalyst:function(t,e){return this._networkAnalyst3DService.traceUpFacilityAnalyst(t,e)},traceDownFacilityAnalyst:function(t,e){return this._networkAnalyst3DService.traceDownFacilityAnalyst(t,e)},upstreamFacilityAnalyst:function(t,e){return this._networkAnalyst3DService.upstreamFacilityAnalyst(t,e)}});function H6(t){"@babel/helpers - typeof";return(H6="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function q6(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,J6(n.key),n)}}function J6(t){var e=function(t,e){if("object"!=H6(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=H6(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==H6(e)?e:e+""}var W6=function(){return t=function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.url=e,this.options=r||{}},(e=[{key:"burstPipelineAnalyst",value:function(t,e){var r=this;return new Gu(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers}).processAsync(t,e)}},{key:"computeWeightMatrix",value:function(t,e){var r=this;return new rc(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers}).processAsync(t,e)}},{key:"findClosestFacilities",value:function(t,e,r){var n=this;return new fy(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(t,e)}},{key:"traceAnalyst",value:function(t,e,r){var n=this;return new AT(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(t,e)}},{key:"connectedEdgesAnalyst",value:function(t,e,r){var n=this;return new VT(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(t,e)}},{key:"streamFacilityAnalyst",value:function(t,e,r){var n=this;return new Np(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(t,e)}},{key:"findLocation",value:function(t,e,r){var n=this;return new Oy(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(t,e)}},{key:"findPath",value:function(t,e,r){var n=this;return new Wy(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(t,e)}},{key:"findTSPPaths",value:function(t,e,r){var n=this;return new md(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(t,e)}},{key:"findMTSPPaths",value:function(t,e,r){var n=this;return new Ry(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(t,e)}},{key:"findServiceAreas",value:function(t,e,r){var n=this;return new id(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(t,e)}},{key:"updateEdgeWeight",value:function(t,e){var r=this;return new bI(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers}).processAsync(t,e)}},{key:"updateTurnNodeWeight",value:function(t,e){var r=this;return new AI(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers}).processAsync(t,e)}},{key:"_processFormat",value:function(t){return t||o.GEOJSON}}])&&q6(t.prototype,e),r&&q6(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}(),K6=E0.extend({initialize:function(t,e){E0.prototype.initialize.call(this,t,e),this._networkAnalystService=new W6(t,e)},burstPipelineAnalyst:function(t,e){return t=this._processParams(t),this._networkAnalystService.burstPipelineAnalyst(t,e)},computeWeightMatrix:function(t,e){return t=this._processParams(t),this._networkAnalystService.computeWeightMatrix(t,e)},findClosestFacilities:function(t,e,r){return t=this._processParams(t),this._networkAnalystService.findClosestFacilities(t,e,r)},traceAnalyst:function(t,e,r){return t=this._processParams(t),this._networkAnalystService.traceAnalyst(t,e,r)},connectedEdgesAnalyst:function(t,e,r){return t=this._processParams(t),this._networkAnalystService.connectedEdgesAnalyst(t,e,r)},streamFacilityAnalyst:function(t,e,r){return t=this._processParams(t),this._networkAnalystService.streamFacilityAnalyst(t,e,r)},findLocation:function(t,e,r){return t=this._processParams(t),this._networkAnalystService.findLocation(t,e,r)},findPath:function(t,e,r){return t=this._processParams(t),this._networkAnalystService.findPath(t,e,r)},findTSPPaths:function(t,e,r){return t=this._processParams(t),this._networkAnalystService.findTSPPaths(t,e,r)},findMTSPPaths:function(t,e,r){return t=this._processParams(t),this._networkAnalystService.findMTSPPaths(t,e,r)},findServiceAreas:function(t,e,r){return t=this._processParams(t),this._networkAnalystService.findServiceAreas(t,e,r)},updateEdgeWeight:function(t,e){return this._networkAnalystService.updateEdgeWeight(t,e)},updateTurnNodeWeight:function(t,e){return this._networkAnalystService.updateTurnNodeWeight(t,e)},_processParams:function(t){if(!t)return{};if(t.centers&&RQ().Util.isArray(t.centers)&&t.centers.map(function(e,r){return t.centers[r]=e instanceof RQ().LatLng?{x:e.lng,y:e.lat}:e,t.centers[r]}),t.nodes&&RQ().Util.isArray(t.nodes)&&t.nodes.map(function(e,r){return t.nodes[r]=e instanceof RQ().LatLng?{x:e.lng,y:e.lat}:e,t.nodes[r]}),t.event&&t.event instanceof RQ().LatLng&&(t.event={x:t.event.lng,y:t.event.lat}),t.facilities&&RQ().Util.isArray(t.facilities)&&t.facilities.map(function(e,r){return t.facilities[r]=e instanceof RQ().LatLng?{x:e.lng,y:e.lat}:e,t.facilities[r]}),t.parameter&&t.parameter.barrierPoints){var e=t.parameter.barrierPoints;RQ().Util.isArray(e)?e.map(function(e,r){return t.parameter.barrierPoints[r]=e instanceof RQ().LatLng?{x:e.lng,y:e.lat}:e,t.parameter.barrierPoints[r]}):t.parameter.barrierPoints=[e instanceof RQ().LatLng?{x:e.lng,y:e.lat}:e]}return t},_processFormat:function(t){return t||o.GEOJSON}});function Y6(t){"@babel/helpers - typeof";return(Y6="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Q6(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,X6(n.key),n)}}function X6(t){var e=function(t,e){if("object"!=Y6(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Y6(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Y6(e)?e:e+""}var Z6=function(){return t=function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.url=e,this.options=r||{},this.kernelDensityJobs={},this.summaryMeshJobs={},this.queryJobs={},this.summaryRegionJobs={},this.vectorClipJobs={},this.overlayGeoJobs={},this.buffersJobs={},this.topologyValidatorJobs={},this.summaryAttributesJobs={}},(e=[{key:"getKernelDensityJobs",value:function(t,e){var r=this,n=r._processFormat(e);return new Q_(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,format:n}).getKernelDensityJobs(t)}},{key:"getKernelDensityJob",value:function(t,e,r){var n=this,o=n._processFormat(r);return new Q_(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:o}).getKernelDensityJob(t,e)}},{key:"addKernelDensityJob",value:function(t,e,r,n){var o=this,i=o._processFormat(n);return new Q_(o.url,{proxy:o.options.proxy,withCredentials:o.options.withCredentials,crossOrigin:o.options.crossOrigin,headers:o.options.headers,format:i}).addKernelDensityJob(t,r,e,function(t){o.kernelDensityJobs[t.id]=t.state})}},{key:"getKernelDensityJobState",value:function(t){return this.kernelDensityJobs[t]}},{key:"getSummaryMeshJobs",value:function(t,e){var r=this,n=r._processFormat(e);return new pA(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,format:n}).getSummaryMeshJobs(t)}},{key:"getSummaryMeshJob",value:function(t,e,r){var n=this,o=n._processFormat(r);return new pA(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:o}).getSummaryMeshJob(t,e)}},{key:"addSummaryMeshJob",value:function(t,e,r,n){var o=this,i=o._processFormat(n);return new pA(o.url,{proxy:o.options.proxy,withCredentials:o.options.withCredentials,crossOrigin:o.options.crossOrigin,headers:o.options.headers,format:i}).addSummaryMeshJob(t,r,e,function(t){o.summaryMeshJobs[t.id]=t.state})}},{key:"getSummaryMeshJobState",value:function(t){return this.summaryMeshJobs[t]}},{key:"getQueryJobs",value:function(t,e){var r=this,n=r._processFormat(e);return new Ak(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,format:n}).getQueryJobs(t)}},{key:"getQueryJob",value:function(t,e,r){var n=this,o=n._processFormat(r);return new Ak(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:o}).getQueryJob(t,e)}},{key:"addQueryJob",value:function(t,e,r,n){var o=this,i=o._processFormat(n);return new Ak(o.url,{proxy:o.options.proxy,withCredentials:o.options.withCredentials,crossOrigin:o.options.crossOrigin,headers:o.options.headers,format:i}).addQueryJob(t,r,e,function(t){o.queryJobs[t.id]=t.state})}},{key:"getQueryJobState",value:function(t){return this.queryJobs[t]}},{key:"getSummaryRegionJobs",value:function(t,e){var r=this,n=r._processFormat(e);return new EA(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,format:n}).getSummaryRegionJobs(t)}},{key:"getSummaryRegionJob",value:function(t,e,r){var n=this,o=n._processFormat(r);return new EA(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:o}).getSummaryRegionJob(t,e)}},{key:"addSummaryRegionJob",value:function(t,e,r,n){var o=this,i=o._processFormat(n);return new EA(o.url,{proxy:o.options.proxy,withCredentials:o.options.withCredentials,crossOrigin:o.options.crossOrigin,headers:o.options.headers,format:i}).addSummaryRegionJob(t,r,e,function(t){o.summaryRegionJobs[t.id]=t.state})}},{key:"getSummaryRegionJobState",value:function(t){return this.summaryRegionJobs[t]}},{key:"getVectorClipJobs",value:function(t,e){var r=this,n=r._processFormat(e);return new JI(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,format:n}).getVectorClipJobs(t)}},{key:"getVectorClipJob",value:function(t,e,r){var n=this,o=n._processFormat(r);return new JI(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:o}).getVectorClipJob(t,e)}},{key:"addVectorClipJob",value:function(t,e,r,n){var o=this,i=o._processFormat(n);return new JI(o.url,{proxy:o.options.proxy,withCredentials:o.options.withCredentials,crossOrigin:o.options.crossOrigin,headers:o.options.headers,format:i}).addVectorClipJob(t,r,e,function(t){o.vectorClipJobs[t.id]=t.state})}},{key:"getVectorClipJobState",value:function(t){return this.vectorClipJobs[t]}},{key:"getOverlayGeoJobs",value:function(t,e){var r=this,n=r._processFormat(e);return new jE(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,format:n}).getOverlayGeoJobs(t)}},{key:"getOverlayGeoJob",value:function(t,e,r){var n=this,o=n._processFormat(r);return new jE(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:o}).getOverlayGeoJob(t,e)}},{key:"addOverlayGeoJob",value:function(t,e,r,n){var o=this,i=o._processFormat(n);return new jE(o.url,{proxy:o.options.proxy,withCredentials:o.options.withCredentials,crossOrigin:o.options.crossOrigin,headers:o.options.headers,format:i}).addOverlayGeoJob(t,r,e,function(t){o.overlayGeoJobs[t.id]=t.state})}},{key:"getoverlayGeoJobState",value:function(t){return this.overlayGeoJobs[t]}},{key:"getBuffersJobs",value:function(t,e){var r=this,n=r._processFormat(e);return new wu(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,format:n}).getBuffersJobs(t)}},{key:"getBuffersJob",value:function(t,e,r){var n=this,o=n._processFormat(r);return new wu(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:o}).getBuffersJob(t,e)}},{key:"addBuffersJob",value:function(t,e,r,n){var o=this,i=o._processFormat(n);return new wu(o.url,{proxy:o.options.proxy,withCredentials:o.options.withCredentials,crossOrigin:o.options.crossOrigin,headers:o.options.headers,format:i}).addBuffersJob(t,r,e,function(t){o.buffersJobs[t.id]=t.state})}},{key:"getBuffersJobState",value:function(t){return this.buffersJobs[t]}},{key:"getTopologyValidatorJobs",value:function(t,e){var r=this,n=r._processFormat(e);return new CN(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,format:n}).getTopologyValidatorJobs(t)}},{key:"getTopologyValidatorJob",value:function(t,e,r){var n=this,o=n._processFormat(r);return new CN(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:o}).getTopologyValidatorJob(t,e)}},{key:"addTopologyValidatorJob",value:function(t,e,r,n){var o=this,i=o._processFormat(n);return new CN(o.url,{proxy:o.options.proxy,withCredentials:o.options.withCredentials,crossOrigin:o.options.crossOrigin,headers:o.options.headers,format:i}).addTopologyValidatorJob(t,r,e,function(t){o.topologyValidatorJobs[t.id]=t.state})}},{key:"getTopologyValidatorJobState",value:function(t){return this.topologyValidatorJobs[t]}},{key:"getSummaryAttributesJobs",value:function(t,e){var r=this,n=r._processFormat(e);return new tA(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,format:n}).getSummaryAttributesJobs(t)}},{key:"getSummaryAttributesJob",value:function(t,e,r){var n=this,o=n._processFormat(r);return new tA(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:o}).getSummaryAttributesJob(t,e)}},{key:"addSummaryAttributesJob",value:function(t,e,r,n){var o=this,i=o._processFormat(n);return new tA(o.url,{proxy:o.options.proxy,withCredentials:o.options.withCredentials,crossOrigin:o.options.crossOrigin,headers:o.options.headers,format:i}).addSummaryAttributesJob(t,r,e,function(t){o.summaryAttributesJobs[t.id]=t.state})}},{key:"getSummaryAttributesJobState",value:function(t){return this.summaryAttributesJobs[t]}},{key:"_processFormat",value:function(t){return t||o.GEOJSON}}])&&Q6(t.prototype,e),r&&Q6(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}(),$6=E0.extend({initialize:function(t,e){e=e||{},RQ().setOptions(this,e),E0.prototype.initialize.call(this,t,e),this._processingService=new Z6(t,e)},getKernelDensityJobs:function(t,e){return this._processingService.getKernelDensityJobs(t,e)},getKernelDensityJob:function(t,e,r){return this._processingService.getKernelDensityJob(t,e,r)},addKernelDensityJob:function(t,e,r,n){var o=this._processParams(t);return this._processingService.addKernelDensityJob(o,e,r,n)},getKernelDensityJobState:function(t){return this._processingService.getKernelDensityJobState(t)},getSummaryMeshJobs:function(t,e){return this._processingService.getSummaryMeshJobs(t,e)},getSummaryMeshJob:function(t,e,r){return this._processingService.getSummaryMeshJob(t,e,r)},addSummaryMeshJob:function(t,e,r,n){return t=this._processParams(t),this._processingService.addSummaryMeshJob(t,e,r,n)},getSummaryMeshJobState:function(t){return this._processingService.getSummaryMeshJobState(t)},getQueryJobs:function(t,e){return this._processingService.getQueryJobs(t,e)},getQueryJob:function(t,e,r){return this._processingService.getQueryJob(t,e,r)},addQueryJob:function(t,e,r,n){return t=this._processParams(t),this._processingService.addQueryJob(t,e,r,n)},getQueryJobState:function(t){return this._processingService.getQueryJobState(t)},getSummaryRegionJobs:function(t,e){return this._processingService.getSummaryRegionJobs(t,e)},getSummaryRegionJob:function(t,e,r){return this._processingService.getSummaryRegionJob(t,e,r)},addSummaryRegionJob:function(t,e,r,n){return t=this._processParams(t),this._processingService.addSummaryRegionJob(t,e,r,n)},getSummaryRegionJobState:function(t){return this._processingService.getSummaryRegionJobState(t)},getVectorClipJobs:function(t,e){return this._processingService.getVectorClipJobs(t,e)},getVectorClipJob:function(t,e,r){return this._processingService.getVectorClipJob(t,e,r)},addVectorClipJob:function(t,e,r,n){return t=this._processParams(t),this._processingService.addVectorClipJob(t,e,r,n)},getVectorClipJobState:function(t){return this._processingService.getVectorClipJobState(t)},getOverlayGeoJobs:function(t,e){return this._processingService.getOverlayGeoJobs(t,e)},getOverlayGeoJob:function(t,e,r){return this._processingService.getOverlayGeoJob(t,e,r)},addOverlayGeoJob:function(t,e,r,n){return t=this._processParams(t),this._processingService.addOverlayGeoJob(t,e,r,n)},getoverlayGeoJobState:function(t){return this._processingService.getoverlayGeoJobState(t)},getBuffersJobs:function(t,e){return this._processingService.getBuffersJobs(t,e)},getBuffersJob:function(t,e,r){return this._processingService.getBuffersJob(t,e,r)},addBuffersJob:function(t,e,r,n){return t=this._processParams(t),this._processingService.addBuffersJob(t,e,r,n)},getBuffersJobState:function(t){return this._processingService.getBuffersJobState(t)},getTopologyValidatorJobs:function(t,e){return this._processingService.getTopologyValidatorJobs(t,e)},getTopologyValidatorJob:function(t,e,r){return this._processingService.getTopologyValidatorJob(t,e,r)},addTopologyValidatorJob:function(t,e,r,n){return t=this._processParams(t),this._processingService.addTopologyValidatorJob(t,e,r,n)},getTopologyValidatorJobState:function(t){return this._processingService.getTopologyValidatorJobState(t)},getSummaryAttributesJobs:function(t,e){return this._processingService.getSummaryAttributesJobs(t,e)},getSummaryAttributesJob:function(t,e,r){return this._processingService.getSummaryAttributesJob(t,e,r)},addSummaryAttributesJob:function(t,e,r,n){return t=this._processParams(t),this._processingService.addSummaryAttributesJob(t,e,r,n)},getSummaryAttributesJobState:function(t){return this._processingService.getSummaryAttributesJobState(t)},_processParams:function(t){return t?(t.bounds&&(t.bounds=A0.toSuperMapBounds(t.bounds)),t.query&&(t.query=A0.toSuperMapBounds(t.query)),t.geometryQuery&&(t.geometryQuery=A0.toProcessingParam(t.geometryQuery)),t.geometryClip&&(t.geometryClip=A0.toProcessingParam(t.geometryClip)),t):{}}}),t8=E0.extend({initialize:function(t,e){E0.prototype.initialize.call(this,t,e),this._queryService=new oC(t,e)},queryByBounds:function(t,e,r){return t=this._processParams(t),this._queryService.queryByBounds(t,e,r)},queryByDistance:function(t,e,r){return t=this._processParams(t),this._queryService.queryByDistance(t,e,r)},queryBySQL:function(t,e,r){return t=this._processParams(t),this._queryService.queryBySQL(t,e,r)},queryByGeometry:function(t,e,r){return t=this._processParams(t),this._queryService.queryByGeometry(t,e,r)},_processParams:function(t){return t?(t.returnContent=null==t.returnContent||t.returnContent,t.queryParams&&!RQ().Util.isArray(t.queryParams)&&(t.queryParams=[t.queryParams]),t.bounds&&(t.bounds=A0.toSuperMapBounds(t.bounds)),t.geometry&&(t.geometry instanceof RQ().Point?t.geometry=new he(t.geometry.x,t.geometry.y):t.geometry=q0(t.geometry)),t):{}}});function e8(t){"@babel/helpers - typeof";return(e8="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r8(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n8(n.key),n)}}function n8(t){var e=function(t,e){if("object"!=e8(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=e8(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==e8(e)?e:e+""}var o8=function(){return t=function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.url=e,this.options=r||{}},(e=[{key:"getAreaSolarRadiationResult",value:function(t,e,r){var n=this;return new $a(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(t,e)}},{key:"bufferAnalysis",value:function(t,e,r){var n=this;return new zs(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(t,e)}},{key:"densityAnalysis",value:function(t,e,r){var n=this;return new Sf(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(t,e)}},{key:"generateSpatialData",value:function(t,e,r){var n=this;return new kd(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(t,e)}},{key:"geoRelationAnalysis",value:function(t,e,r){var n=this;return new xv(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(t,e)}},{key:"interpolationAnalysis",value:function(t,e,r){var n=this;return new B_(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(t,e)}},{key:"mathExpressionAnalysis",value:function(t,e,r){var n=this;return new YO(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(t,e)}},{key:"overlayAnalysis",value:function(t,e,r){var n=this;return new gE(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(t,e)}},{key:"routeCalculateMeasure",value:function(t,e,r){var n=this;return new vC(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(t,e)}},{key:"routeLocate",value:function(t,e,r){var n=this;return new CC(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(t,e)}},{key:"surfaceAnalysis",value:function(t,e,r){var n=this;return new UA(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(t,e)}},{key:"terrainCurvatureCalculate",value:function(t,e,r){var n=this;return new ZA(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(t,e)}},{key:"terrainCutFillCalculate",value:function(t,e,r){var n=this;return new Lx(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(t,e)}},{key:"terrainAspectCalculate",value:function(t,e,r){var n=this;return new Kx(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(t,e)}},{key:"terrainSlopeCalculate",value:function(t,e,r){var n=this;return new aT(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(t,e)}},{key:"thiessenAnalysis",value:function(t,e,r){var n=this;return new tN(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(t,e)}},{key:"minDistanceAnalysis",value:function(t,e,r){var n=this;return new Ex(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(t,e)}},{key:"convexHullAnalysis",value:function(t,e,r){var n=this;return new bT(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(t,e)}},{key:"geometrybatchAnalysis",value:function(t,e,r){for(var n=new uN(this.url,{format:this._processFormat(r)}),o=[],i=0;i<t.length;i++){var a=t[i];o.push({analystName:a.analystName,param:a.param})}return n.processAsync(o,e)}},{key:"_processFormat",value:function(t){return t||o.GEOJSON}}])&&r8(t.prototype,e),r&&r8(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}(),i8=E0.extend({initialize:function(t,e){E0.prototype.initialize.call(this,t,e),this._spatialAnalystService=new o8(t,e)},getAreaSolarRadiationResult:function(t,e,r){return this._spatialAnalystService.getAreaSolarRadiationResult(t,e,r)},bufferAnalysis:function(t,e,r){return t=this._processParams(t),this._spatialAnalystService.bufferAnalysis(t,e,r)},densityAnalysis:function(t,e,r){return t=this._processParams(t),this._spatialAnalystService.densityAnalysis(t,e,r)},generateSpatialData:function(t,e,r){return this._spatialAnalystService.generateSpatialData(t,e,r)},geoRelationAnalysis:function(t,e,r){return t=this._processParams(t),this._spatialAnalystService.geoRelationAnalysis(t,e,r)},interpolationAnalysis:function(t,e,r){return t=this._processParams(t),this._spatialAnalystService.interpolationAnalysis(t,e,r)},mathExpressionAnalysis:function(t,e,r){return t=this._processParams(t),this._spatialAnalystService.mathExpressionAnalysis(t,e,r)},overlayAnalysis:function(t,e,r){return t=this._processParams(t),this._spatialAnalystService.overlayAnalysis(t,e,r)},routeCalculateMeasure:function(t,e,r){return t=this._processParams(t),this._spatialAnalystService.routeCalculateMeasure(t,e,r)},routeLocate:function(t,e,r){return t=this._processParams(t),this._spatialAnalystService.routeLocate(t,e,r)},surfaceAnalysis:function(t,e,r){return t=this._processParams(t),this._spatialAnalystService.surfaceAnalysis(t,e,r)},terrainCurvatureCalculate:function(t,e,r){return this._spatialAnalystService.terrainCurvatureCalculate(t,e,r)},terrainCutFillCalculate:function(t,e,r){return t=this._processParams(t),this._spatialAnalystService.terrainCutFillCalculate(t,e,r)},terrainAspectCalculate:function(t,e,r){return t=this._processParams(t),this._spatialAnalystService.terrainAspectCalculate(t,e,r)},terrainSlopeCalculate:function(t,e,r){return t=this._processParams(t),this._spatialAnalystService.terrainSlopeCalculate(t,e,r)},thiessenAnalysis:function(t,e,r){return t=this._processParams(t),this._spatialAnalystService.thiessenAnalysis(t,e,r)},minDistanceAnalysis:function(t,e,r){return t=this._processParams(t),this._spatialAnalystService.minDistanceAnalysis(t,e,r)},convexHullAnalysis:function(t,e,r){return t=this._processParams(t),this._spatialAnalystService.convexHullAnalysis(t,e,r)},geometrybatchAnalysis:function(t,e,r){for(var n=0;n<t.length;n++)t[n].param=this._processParams(t[n].param);return this._spatialAnalystService.geometrybatchAnalysis(t,e,r)},_processParams:function(t){if(!t)return{};if(t.bounds&&(t.bounds=A0.toSuperMapBounds(t.bounds)),t.inputPoints)for(var e=0;e<t.inputPoints.length;e++){var r=t.inputPoints[e];RQ().Util.isArray(r)&&(t.inputPoints[e]={x:r[0],y:r[1],tag:r[2]})}if(t.points)for(var n=0;n<t.points.length;n++){var o=t.points[n];RQ().Util.isArray(o)?t.points[n]={x:o[0],y:o[1]}:o instanceof RQ().LatLng?t.points[n]={x:o.lng,y:o.lat}:t.points[n]={x:o.x,y:o.y}}if(t.point&&(RQ().Util.isArray(t.point)?t.point={x:t.point[0],y:t.point[1]}:t.point instanceof RQ().LatLng?t.point={x:t.point.lng,y:t.point.lat}:t.point={x:t.point.x,y:t.point.y}),t.extractRegion&&(t.extractRegion=q0(t.extractRegion)),t.extractParameter&&t.extractParameter.clipRegion&&(t.extractParameter.clipRegion=q0(t.extractParameter.clipRegion)),t.clipParam&&t.clipParam.clipRegion&&(t.clipParam.clipRegion=q0(t.clipParam.clipRegion)),t.clipRegion&&(t.clipRegion=q0(t.clipRegion)),t.sourceGeometry){var i=null;t.sourceGeometrySRID&&(i=t.sourceGeometrySRID),t.sourceGeometry=q0(t.sourceGeometry),i&&(t.sourceGeometry.SRID=i),delete t.sourceGeometry.sourceGeometrySRID}if(t.operateGeometry&&(t.operateGeometry=q0(t.operateGeometry)),t.sourceGeometries){for(var a=[],s=0;s<t.sourceGeometries.length;s++)a.push(q0(t.sourceGeometries[s]));t.sourceGeometries=a}if(t.operateGeometries){for(var u=[],l=0;l<t.operateGeometries.length;l++)u.push(q0(t.operateGeometries[l]));t.operateGeometries=u}if(t.inputGeometries){for(var c=[],f=0;f<t.inputGeometries.length;f++)c.push(q0(t.inputGeometries[f]));t.inputGeometries=c}if(t.sourceRoute&&t.sourceRoute instanceof RQ().Polyline){var p={type:"LINEM"};p.parts=[t.sourceRoute.getLatLngs().length],p.points=[];for(var h=0;h<t.sourceRoute.getLatLngs().length;h++){var y=t.sourceRoute.getLatLngs()[h];p.points=p.points.concat({x:y.lng,y:y.lat,measure:y.alt})}t.sourceRoute=p}return t.operateRegions&&RQ().Util.isArray(t.operateRegions)&&t.operateRegions.map(function(e,r){return t.operateRegions[r]=q0(e),t.operateRegions[r]}),t},_processFormat:function(t){return t||o.GEOJSON}}),a8=E0.extend({initialize:function(t,e){E0.prototype.initialize.call(this,t,e),this._themeService=new Jj(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers})},getThemeInfo:function(t,e){return this._themeService.processAsync(t,e)}});function s8(t){"@babel/helpers - typeof";return(s8="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u8(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,l8(n.key),n)}}function l8(t){var e=function(t,e){if("object"!=s8(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=s8(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==s8(e)?e:e+""}var c8=function(){return t=function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.url=e,this.options=r||{}},(e=[{key:"queryStop",value:function(t,e){var r=this;return new Vk(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers}).processAsync(t,e)}},{key:"analysisTransferPath",value:function(t,e){var r=this;return new HN(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers}).processAsync(t,e)}},{key:"analysisTransferSolution",value:function(t,e){var r=this;return new rI(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers}).processAsync(t,e)}}])&&u8(t.prototype,e),r&&u8(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}(),f8=E0.extend({initialize:function(t,e){E0.prototype.initialize.call(this,t,e),this._commonTrafficTransferAnalystService=new c8(t,e)},queryStop:function(t,e){return this._commonTrafficTransferAnalystService.queryStop(t,e)},analysisTransferPath:function(t,e){return t=this._processParams(t),this._commonTrafficTransferAnalystService.analysisTransferPath(t,e)},analysisTransferSolution:function(t,e){return t=this._processParams(t),this._commonTrafficTransferAnalystService.analysisTransferSolution(t,e)},_processParams:function(t){return t?(t.points&&RQ().Util.isArray(t.points)&&t.points.map(function(e,r){return t.points[r]=e instanceof RQ().LatLng?{x:e.lng,y:e.lat}:e,t.points[r]}),t):{}}}),p8=E0.extend({initialize:function(t,e){E0.prototype.initialize.call(this,t,e),this._webPrintingService=new yR(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers})},createWebPrintingJob:function(t,e){if(t)return this._webPrintingService.createWebPrintingJob(this._processParams(t),e)},getPrintingJob:function(t,e){this._webPrintingService.getPrintingJob(t,e)},getPrintingJobResult:function(t,e){return this._webPrintingService.getPrintingJobResult(t,e)},getLayoutTemplates:function(t){return this._webPrintingService.getLayoutTemplates(t)},_processParams:function(t){return t.layoutOptions&&t.layoutOptions.littleMapOptions&&(t.layoutOptions.littleMapOptions.center=this._toPointObject(t.layoutOptions.littleMapOptions.center)),t.exportOptions&&(t.exportOptions.center=this._toPointObject(t.exportOptions.center)),t},_toPointObject:function(t){return RQ().Util.isArray(t)?{x:t[0],y:t[1]}:t instanceof he||t instanceof RQ().Point?{x:t.x,y:t.y}:t instanceof RQ().LatLng?{x:t.lng,y:t.lat}:t}}),h8=E0.extend({initialize:function(t,e){E0.prototype.initialize.call(this,t,e),this._imageService=new jR(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers})},getCollections:function(t){return this._imageService.getCollections(t)},getCollectionByID:function(t,e){return this._imageService.getCollectionByID(t,e)},search:function(t,e){return this._imageService.search(t,e)}}),y8=E0.extend({initialize:function(t,e){E0.prototype.initialize.call(this,t,e),this._imageCollectionService=new _R(this.url,{collectionId:this.options.collectionId,proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers})},getLegend:function(t,e){return this._imageCollectionService.getLegend(t,e)},getStatistics:function(t){return this._imageCollectionService.getStatistics(t)},getTileInfo:function(t){return this._imageCollectionService.getTileInfo(t)},deleteItemByID:function(t,e){return this._imageCollectionService.deleteItemByID(t,e)},getItemByID:function(t,e){return this._imageCollectionService.getItemByID(t,e)}}),d8=RQ().Control.extend({options:{position:"topright",style:function(t,e){return e?RQ().circleMarker(e,{fillColor:"blue",weight:1,opacity:1,color:"blue",fillOpacity:.6}):{fillColor:"blue",weight:1,opacity:1,color:"blue",fillOpacity:.6}},onEachFeature:null},initialize:function(t){RQ().setOptions(this,t),this._event=new(RQ().Evented),this.rootContainer=null},onAdd:function(t){return this.map=t,this.rootContainer=this._initView(),this.rootContainer},on:function(t,e){this._event.on(t,e)},off:function(t,e){e?this._event.off(t,e):this._event.off(t)},_initView:function(){},_preventMapEvent:function(t,e){t&&e&&(t.addEventListener("mouseover",function(){e.dragging.disable(),e.scrollWheelZoom.disable(),e.doubleClickZoom.disable()}),t.addEventListener("mouseout",function(){e.dragging.enable(),e.scrollWheelZoom.enable(),e.doubleClickZoom.enable()}))}}),v8=RQ().Evented.extend({initialize:function(){this.fileModel=new HH},readFile:function(t){var e=t.target,r=e.files[0];if(r.size>this.fileModel.FileConfig.fileMaxSize)return this.fire("filesizeexceed",{messageType:"warring",message:QH.i18n("msg_fileSizeExceeded")}),!1;var n=e.value,o=r.name,i=xJ(o);if(!i)return this.fire("errorfileformat",{messageType:"failure",message:QH.i18n("msg_fileTypeUnsupported")}),!1;""!==o&&(this.fileModel.set("loadFileObject",{file:r,filePath:n,fileName:o,fileType:i}),this._readData())},_readData:function(){var t=this,e=this,r=this.fileModel.loadFileObject.fileType;ZH.readFile(r,{file:this.fileModel.loadFileObject.file,path:this.fileModel.loadFileObject.filePath},function(n){ZH.processDataToGeoJson(r,n,function(e){e&&t.fire("openfilesucceeded",{result:e,layerName:t.fileModel.loadFileObject.fileName.split(".")[0]})},function(t){e.fire("openfilefailed",{messageType:"failure",message:t})},t)},function(){e.fire("openfilefailed",{messageType:"failure",message:QH.i18n("msg_openFileFail")})},this)}}),m8=d8.extend({options:{layer:null},initialize:function(t){d8.prototype.initialize.apply(this,[t]),this.viewModel=new v8},setViewStyle:function(t,e){this.rootContainer.style[t]=e},_initView:function(){var t=this,e=RQ().DomUtil.create("div","component-openfile");return e.id="openFile",this.fileSelect=RQ().DomUtil.create("div","",e),this.label=RQ().DomUtil.create("label","component-openfile__span--select",this.fileSelect),this.label.htmlFor="input_file",RQ().DomUtil.create("div","supermapol-icons-upload",this.label),RQ().DomUtil.create("span","component-openfile__span",this.label).appendChild(document.createTextNode(QH.i18n("text_chooseFile"))),this.fileInput=RQ().DomUtil.create("input","component-openfile__input",this.fileSelect),this.fileInput.id="input_file",this.fileInput.type="file",this.fileInput.accept=".json,.geojson,.csv,.xls,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,application/vnd.ms-excel",this.fileInput.onchange=function(e){t.messageBox.closeView(),t.viewModel.readFile(e)},this.messageBox=new KH,this.viewModel.on("filesizeexceed",function(e){t.messageBox.showView(e.message,e.messageType)}),this.viewModel.on("errorfileformat",function(e){t.messageBox.showView(e.message,e.messageType)}),this.viewModel.on("openfilefailed",function(e){t.messageBox.showView(e.message,e.messageType),t._event.fire("openfilefailed",e)}),this.viewModel.on("readdatafail",function(e){t.messageBox.showView(e.message,e.messageType)}),this.viewModel.on("openfilesucceeded",function(e){t._event.fire("openfilesucceeded",e)}),this._preventMapEvent(e,this.map),e}});function b8(t){"@babel/helpers - typeof";return(b8="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function g8(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function S8(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,_8(n.key),n)}}function w8(t,e,r){return e&&S8(t.prototype,e),r&&S8(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function _8(t){var e=function(t,e){if("object"!=b8(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=b8(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==b8(e)?e:e+""}var O8=function(){return w8(function t(e){g8(this,t),this.layers=[],e&&e.length>0&&this.addLayers(e),this.currentLayerDataModel=null},[{key:"addLayers",value:function(t,e,r,n){for(var o=0;o<t.length;o++){var i=t[o].layerName;if(t[o].layer instanceof RQ().GeoJSON){var a=new E8(t[o].layer);this.layers[i]=a,e&&e.call(n,{layerName:i,layer:a})}else r&&r.call(n,"")}}},{key:"setCurrentLayerDataModel",value:function(t){this.layers[t]&&(this.currentLayerDataModel=this.layers[t])}}])}(),E8=function(){return w8(function t(e){if(g8(this,t),this.layer=e,this.features=e.getLayers(),this.attributeNames=[],this.features[0].feature.properties)for(var r in this.features[0].feature.properties)this.attributeNames.push(r);this.operatingAttributeNames=[],this.attributes={}},[{key:"setOperatingAttributeNames",value:function(t){this.operatingAttributeNames=t}},{key:"getAllAttributeNames",value:function(){return this.attributeNames}},{key:"getAttributeNamesByType",value:function(t){if(this.features[0].feature.properties){var e=this.features[0].feature.properties,r=[];if("Num"===t)for(var n in e)isNaN(e[n])||r.push(n);else r=this.attributeNames;return r}}},{key:"getAllFeatures",value:function(){return this.features}},{key:"getAttributeValueByAttributeName",value:function(t){if(this.attributes[t])return this.attributes[t];this.attributes[t]=[];for(var e=0;e<this.features.length;e++)this.attributes[t].push([this.features[e].feature.properties[t]]);return this.attributes[t]}},{key:"getFeaturesByKeyWord",value:function(t){var e=[],r=new RegExp(t.toLowerCase()),n=this;return this.features.forEach(function(t){if(!t.feature.properties)return null;for(var o,i=t.feature.properties,a=0,s=(o=n.operatingAttributeNames.length>0?n.operatingAttributeNames:n.attributeNames).length;a<s;a++)if(i[o[a]]&&r.test(i[o[a]].toString().toLowerCase())){var u=o[a],l=i[o[a]];t.filterAttribute={filterAttributeName:u,filterAttributeValue:l},e.push(t);break}}),e}}])}(),P8=RQ().Evented.extend({options:{cityGeoCodingConfig:{addressUrl:"https://www.supermapol.com/iserver/services/localsearch/rest/searchdatas/China/poiinfos",key:"fvV2osxwuZWlY0wJb8FEb2i5"}},initialize:function(t,e){if(!t)return new Error("Cannot find map, fileModel.map cannot be null.");this.map=t,RQ().Util.setOptions(this,e),this.dataModel=new O8,this.geoCodeParam={keyWords:"北京市",city:"北京市",pageSize:this.options.pageSize,pageNum:this.options.pageNum},this.searchCache={}},search:function(t,e){e?this.searchFromLayer(t,e):this.searchFromCityLocalSearchService(t)},searchFromLayer:function(t,e){if(this.dataModel.layers[e]){var r=this.dataModel.layers[e].getFeaturesByKeyWord(t);r&&r.length>0?this.fire("searchlayersucceeded",{result:r}):this.fire("searchfailed",{searchType:"searchLayersField"})}},searchFromCityLocalSearchService:function(t){if(this.searchCache[t])this.fire("geocodesucceeded",{result:this.searchCache[t]});else{this.geoCodeParam.keyWords=t||this.geoCodeParam.city;var e=this,r=this._getSearchUrl(this.geoCodeParam);co.get(r).then(function(t){return t.json()}).then(function(t){if(t.error||0===t.poiInfos.length)e.fire("searchfailed",{searchType:"searchGeocodeField"});else if(t.poiInfos){var r=e._dataToGeoJson(t.poiInfos,e.geoCodeParam);e.fire("geocodesucceeded",{result:r})}})}},addSearchLayers:function(t){var e=this;this.dataModel.addLayers(t,function(t){e.fire("newlayeradded",{layerName:t.layerName})},null,this)},panToLayer:function(t){this.dataModel.layers[t]&&this.map.flyToBounds(this.dataModel.layers[t].layer.getBounds())},panToCity:function(t){this.geoCodeParam.keyWords=t,this.geoCodeParam.city=t;var e=this,r=this._getSearchUrl(this.geoCodeParam);co.get(r).then(function(t){return t.json()}).then(function(t){if(t.poiInfos.length>0){var r=RQ().latLng(t.poiInfos[0].location.y,t.poiInfos[0].location.x);e.map.setView(r,8)}else e.fire("searchfailed",{searchType:"cityGeocodeField"})})},_dataToGeoJson:function(t,e){for(var r=[],n=0;n<t.length;n++){var o={type:"Feature",geometry:{type:"Point",coordinates:[t[n].location.x,t[n].location.y]},properties:{name:t[n].name||e.keyWords,address:t[n].formatedAddress||t[n].address}};r.push(o)}return r},_getSearchUrl:function(t){return this.options.cityGeoCodingConfig.addressUrl+".json?keywords=".concat(t.keyWords,"&city=").concat(t.city,"&pageSize=").concat(t.pageSize,"&pageNum=").concat(t.pageNum,"&key=").concat(this.options.cityGeoCodingConfig.key)}}),x8=d8.extend({options:{cityConfig:{HOT:{HOT:["北京市","上海市","广州市","深圳市","南京市","杭州市","天津市","重庆市","成都市","青岛市","苏州市","无锡市","常州市","温州市","武汉市","长沙市","南昌市","三亚市","合肥市","石家庄市"]},AB:{A:["阿拉善盟","鞍山市","安庆市","安阳市","阿坝藏族羌族自治州","安顺市","阿里地区","安康市","阿克苏地区","阿勒泰地区","阿拉尔市"],B:["北京市","保定市","包头市","巴彦淖尔市","本溪市","白山市","白城市","蚌埠市","亳州市","滨州市","北海市","百色市","白沙黎族自治县","保亭黎族苗族自治县","巴中市","毕节地区","保山市","宝鸡市","白银市","博尔塔拉蒙古自治州","巴音郭楞蒙古自治州","北区"]},CD:{C:["重庆市","成都市","常州市","长沙市","承德市","沧州市","长治市","赤峰市","朝阳市","长春市","滁州市","巢湖市","池州市","常德市","郴州市","潮州市","崇左市","澄迈县","昌江黎族自治县","楚雄彝族自治州","昌都地区","昌吉回族自治州"],D:["大同市","大连市","丹东市","大庆市","大兴安岭地区","东营市","德州市","东莞市","儋州市","东方市","定安县","德阳市","达州市","大理白族自治州","德宏傣族景颇族自治州","迪庆藏族自治州","定西市","东区","大埔区","大堂区"]},EFG:{E:["鄂尔多斯市","鄂州市","恩施土家族苗族自治州"],F:["抚顺市","阜新市","阜阳市","福州市","抚州市","佛山市","防城港市"],G:["广州市","赣州市","桂林市","贵港市","广元市","广安市","贵阳市","固原市","高雄市","高雄县","甘南藏族自治州","甘孜藏族自治州"]},H:{H:["杭州市","合肥市","邯郸市","衡水市","呼和浩特市","呼伦贝尔市","葫芦岛市","哈尔滨市","鹤岗市","黑河市","淮安市","湖州市","淮南市","淮北市","黄山市","菏泽市","鹤壁市","黄石市","黄冈市","衡阳市","怀化市","惠州市","河源市","贺州市","河池市","海口市","红河哈尼族彝族自治州","汉中市","海东地区","海北藏族自治州","黄南藏族自治州","海南藏族自治州","果洛藏族自治州","海西蒙古族藏族自治州","哈密地区","和田地区","花莲县","黄大仙区","花地玛堂区"]},J:{J:["晋城市","晋中市","锦州市","吉林市","鸡西市","佳木斯市","嘉兴市","金华市","景德镇市","九江市","吉安市","济南市","济宁市","焦作市","济源市","荆门市","荆州市","江门市","湛江市","揭阳市","嘉峪关市","金昌市","酒泉市","基隆市","嘉义市","嘉义县","九龙城区","嘉模堂区"]},KL:{K:["开封市","昆明市","克拉玛依市","克孜勒苏柯尔克孜自治州","喀什地区"],L:["廊坊市","临汾市","吕梁市","辽阳市","辽源市","连云港市","丽水市","六安市","龙岩市","莱芜市","临沂市","聊城市","洛阳市","漯河市","娄底市","柳州市","来宾市","临高县","乐东黎族自治县","陵水黎族自治县","泸州市","乐山市","凉山彝族自治州","六盘水市","丽江市","临沧市","拉萨市","林芝地区","兰州市","陇南市","临夏回族自治州"]},MNP:{M:["牡丹江市","马鞍山市","茂名市","梅州市","绵阳市","眉山市","苗栗县"],N:["南京市","南昌市","南通市","宁波市","南平市","宁德市","南阳市","南宁市","南沙群岛","内江市","南充市","怒江傈傈族自治州","那曲地区","南投县"],P:["盘锦市","莆田市","萍乡市","平顶山市","濮阳市","攀枝花市","平凉市","屏东县","澎湖县"]},QR:{Q:["青岛市","秦皇岛市","齐齐哈尔市","黔西南布依族苗族自治州","七台河市","衢州市","泉州市","潜江市","清远市","钦州市","琼海市","曲靖市","庆阳市","荃湾区","黔东南苗族侗族自治州","黔南布依族苗族自治州","琼中黎族苗族自治县"],R:["日照市","日喀则地区"]},S:{S:["上海市","深圳市","苏州市","石家庄市","三亚市","朔州市","沈阳市","四平市","松原市","双鸭山市","绥化市","宿迁市","绍兴市","宿州市","三明市","上饶市","三门峡市","商丘市","十堰市","随州市","邵阳市","韶关市","汕头市","汕尾市","三亚市","遂宁市","思茅市","山南地区","商洛市","石嘴山市","石河子市","深水埗区","沙田区","神农架林区","圣安多尼堂区","圣方济各堂区"]},T:{T:["天津市","唐山市","太原市","通辽市","铁岭市","通化市","泰州市","台州市","铜陵市","泰安市","天门市","屯昌县","铜仁地区","铜川市","天水市","吐鲁番地区","塔城地区","图木舒克市","台北市","台中市","台南市","台北县","桃园县","台中县","台南县","台东县","屯门区"]},W:{W:["无锡市","温州市","武汉市","乌海市","乌兰察布市","芜湖市","潍坊市","威海市","梧州市","五指山市","文昌市","万宁市","文山壮族苗族自治州","渭南市","武威市","吴忠市","乌鲁木齐市","五家渠市","湾仔区","望德堂区"]},X:{X:["邢台市","忻州市","兴安盟","徐州市","宣城市","厦门市","新余市","新乡市","许昌市","信阳市","襄樊市","孝感市","咸宁市","仙桃市","湘潭市","西安市","咸阳市","西宁市","新竹市","新竹县","西贡区","锡林郭勒盟","西沙群岛","湘西土家族苗族自治州","西双版纳傣族自治州"]},Y:{Y:["阳泉市","运城市","营口市","延边朝鲜族自治州","伊春市","盐城市","扬州市","鹰潭市","宜春市","烟台市","宜昌市","岳阳市","益阳市","永州市","阳江市","云浮市","玉林市","宜宾市","雅安市","玉溪市","延安市","榆林市","玉树藏族自治州","银川市","伊犁哈萨克自治州","宜兰县","云林县","油尖旺区","元朗区"]},Z:{Z:["郑州市","张家口市","镇江市","舟山市","漳州市","淄博市","枣庄市","周口市","驻马店市","株洲市","张家界市","珠海市","肇庆市","中山市","自贡市","资阳市","遵义市","昭通市","张掖市","中卫市","彰化县","中西区","中沙群岛的岛礁及其海域"]}},cityGeoCodingConfig:{addressUrl:"https://www.supermapol.com/iserver/services/localsearch/rest/searchdatas/China/poiinfos",key:"fvV2osxwuZWlY0wJb8FEb2i5"},isGeoCoding:!0,pageSize:10,pageNum:1,perPageDataNum:8},initialize:function(t){d8.prototype.initialize.apply(this,[t]),this.currentSearchLayerName="",this.isSearchLayer=!1,this.perPageDataNum=this.options.perPageDataNum},onAdd:function(t){return this.viewModel=new P8(t,this.options),d8.prototype.onAdd.apply(this,[t])},addSearchLayer:function(t){this.viewModel.addSearchLayers(t)},_initView:function(){var t=this,e=this,r=document.createElement("div");r.setAttribute("class","component-search-container");var n=document.createElement("div");n.setAttribute("class","component-search");var o=document.createElement("div");o.setAttribute("class","component-search__settings");var i=document.createElement("div");i.setAttribute("class","component-search__settings__name"),o.appendChild(i);var a=document.createElement("span");a.setAttribute("class","supermapol-icons-solid-down-triangle"),o.appendChild(a);var s=null;if(this.options.isGeoCoding){var u=new fJ({config:this.options.cityConfig});s=u.getElement(),u.content.onclick=function(e){"SPAN"===e.target.nodeName&&e.target.innerText&&(t.viewModel.panToCity(e.target.innerHTML),t.messageBox.closeView(),i.removeChild(i.firstChild),i.insertBefore(document.createTextNode(e.target.innerHTML),i.firstChild),t.isSearchLayer=!1)},i.appendChild(document.createTextNode(u.content.getElementsByTagName("span")[0].innerText))}var l=function(){var t=document.createElement("div");t.setAttribute("class","component-search__layers");var r=document.createElement("div");r.setAttribute("class","component-search-layers-content"),t.appendChild(r);var n=document.createElement("div");n.setAttribute("class","component-search__layers__header");var o=document.createElement("div");o.setAttribute("class","load-btn"),n.appendChild(o);var a=document.createElement("span");a.setAttribute("class","supermapol-icons-poi-load"),o.appendChild(a);var s=document.createElement("span");s.appendChild(document.createTextNode(QH.i18n("text_loadSearchCriteria"))),o.appendChild(s);var u=document.createElement("div");u.setAttribute("class","save-btn"),n.appendChild(u);var l=document.createElement("span");l.setAttribute("class","supermapol-icons-poi-save"),u.appendChild(l);var c=document.createElement("span");c.appendChild(document.createTextNode(QH.i18n("text_saveSearchCriteria"))),u.appendChild(c);var f=document.createElement("div");return f.setAttribute("class","component-search__layers__body"),f.onclick=function(t){e.clearSearchResult();var r=null;if("component-search__layers__itme__singleselect"===t.target.classList[0])r=t.target;else{if("component-single-default-img"!==t.target.classList[0]&&"single-label"!==t.target.classList[0])return;r=t.target.parentNode}document.getElementsByClassName("component-single-checked-img").length>0&&document.getElementsByClassName("component-single-checked-img")[0].setAttribute("class","component-single-default-img"),r.firstChild.setAttribute("class","component-single-checked-img"),e.currentSearchLayerName=r.lastChild.innerText,e.isSearchLayer=!0,i.removeChild(i.firstChild),i.insertBefore(document.createTextNode(e.currentSearchLayerName),i.firstChild),e.viewModel.panToLayer(e.currentSearchLayerName),e.messageBox.closeView()},r.appendChild(f),t}(),c=[];s&&c.push({title:QH.i18n("title_searchCity"),content:s}),c.push({title:QH.i18n("title_searchLayer"),content:l});var f=new bJ({tabs:c}),p=f.getElement();f.closeView(),n.appendChild(p),o.onclick=function(){p.hidden?f.showView():f.closeView()},n.appendChild(o),i.innerText||i.appendChild(document.createTextNode(QH.i18n("text_label_chooseSearchLayers")));var h=document.createElement("div");h.setAttribute("class","component-search__input");var y=document.createElement("input");y.type="text",y.placeholder=QH.i18n("text_label_searchTips"),h.appendChild(y),this.poiInput=y;var d=document.createElement("span");d.setAttribute("class","supermapol-icons-close"),d.hidden=!0,h.appendChild(d),n.appendChild(h);var v=document.createElement("div");v.setAttribute("class","component-search-icon supermapol-icons-search");var m=new PJ;this._resultDomObj=m,v.onclick=function(){m.closeView(),t.clearSearchResult(),t.messageBox.closeView(),f.closeView();var e=t.poiInput.value.trim();""!==e?t.isSearchLayer?t.viewModel.search(e,t.currentSearchLayerName):t.viewModel.search(e):t.messageBox.showView(QH.i18n("msg_searchKeywords"))},y.onkeypress=function(t){if(13==t.which){var e=document.createEvent("HTMLEvents");e.initEvent("click",!1,!0),v.dispatchEvent(e)}},n.appendChild(v);var b=function(){var t=m.getElement();return t.style.position="absolute",t.style.top="44px",t.style.right="0",m.closeView(),m.content.onclick=function(t){var r=null;if("component-search-result-info"===t.target.parentNode.className)r=t.target.parentNode.parentNode;else if("component-search__resultitme"===t.target.parentNode.className)r=t.target.parentNode;else{if("component-search__resultitme"!==t.target.className)return;r=t.target}document.getElementsByClassName("component-search__resultitme-selected").length>0&&document.getElementsByClassName("component-search__resultitme-selected")[0].classList.remove("component-search__resultitme-selected"),r.firstChild.classList.add("component-search__resultitme-selected");var n=r.children[1].firstChild.innerText;e._linkageFeature(n)},t}();return n.appendChild(b),d.onclick=function(e){t.clearSearchResult(),y.value="",e.target.hidden=!0,m.closeView()},y.oninput=function(){d.hidden=!1},this.messageBox=new KH,this._addViewModelListener(),r.appendChild(n),this._preventMapEvent(r,this.map),r},_createSearchLayerItem:function(t){var e=document.createElement("div");e.setAttribute("class","component-search__layers__itme");var r=document.createElement("div");r.setAttribute("class","component-search__layers__itme__singleselect");var n=document.createElement("div");n.setAttribute("class","component-single-default-img"),r.appendChild(n);var o=document.createElement("span");o.setAttribute("class","single-label"),o.innerHTML=t,r.appendChild(o),e.appendChild(r),document.getElementsByClassName("component-search__layers__body")[0].appendChild(e)},_createResultItem:function(t,e){var r=document.createElement("div");r.setAttribute("class","component-search__resultitme");var n=document.createElement("div");"Point"===t||"MultiPoint"===t?n.setAttribute("class","supermapol-icons-marker-layer component-search-result-icon"):"LineString"===t||"MultiLineString "===t?n.setAttribute("class","supermapol-icons-line-layer component-search-result-icon"):"Polygon"===t||"MultiPolygon"===t?n.setAttribute("class","supermapol-icons-polygon-layer component-search-result-icon"):n.setAttribute("class","supermapol-icons-point-layer component-search-result-icon"),r.appendChild(n);var o=document.createElement("div");o.setAttribute("class","component-search-result-info");var i=document.createElement("div");o.appendChild(i);var a=document.createElement("div");return e.name?(i.innerHTML=e.name,a.innerHTML=e.address,o.appendChild(a)):i.innerHTML=e.filterAttributeName+": "+e.filterAttributeValue,r.appendChild(o),document.createElement("div").setAttribute("class","component-checkbox component-checkbox-default-img"),r},_addViewModelListener:function(){var t=this;this.viewModel.on("searchlayerschanged",function(e){for(var r=0;r<e.length;r++)t._createSearchLayerItem(e[r])}),this.viewModel.on("newlayeradded",function(e){t._createSearchLayerItem(e.layerName)}),this.viewModel.on("searchlayersucceeded",function(e){var r=e.result;t.clearSearchResult(),t.searchResultLayer=RQ().featureGroup(r,{pointToLayer:t.options.style,style:t.options.style}).bindPopup(function(t){if(t.feature.properties)return new Xq({attributes:t.feature.properties}).getElement()}).addTo(t.map),t.searchResultLayer.eachLayer(function(e){t.options.onEachFeature?t.options.onEachFeature(e.toGeoJSON(),e):t._featureOnclickEvent.bind(t)(e.toGeoJSON(),e)}),t.searchLayersData=r,t._prepareResultData(r),t._event.fire("searchlayersucceeded",{result:t.searchResultLayer.toGeoJSON()})}),this.viewModel.on("geocodesucceeded",function(e){var r=e.result;t.clearSearchResult(),t.searchResultLayer=RQ().geoJSON(r,{pointToLayer:t.options.style,style:t.options.style,onEachFeature:t.options.onEachFeature||t._featureOnclickEvent.bind(t)}).bindPopup(function(t){if(t.feature.properties)return new Xq({attributes:t.feature.properties}).getElement()}).addTo(t.map),t.searchLayersData=r,t._prepareResultData(r),t._event.fire("geocodesucceeded",{result:r})}),this.viewModel.on("searchfailed",function(e){var r="";r="searchGeocodeField"===e.searchType?QH.i18n("msg_searchGeocodeField"):"cityGeocodeField"===e.searchType?QH.i18n("msg_cityGeocodeField"):QH.i18n("msg_getFeatureField"),t.messageBox.showView(r),t._event.fire("searchfailed",{message:r})})},_prepareResultData:function(t){this.currentResult=t;var e=Math.ceil(t.length/this.perPageDataNum);this._resultDomObj.setPageLink(e),this._createResultListByPageNum(1,t),this._resultDomObj.showView(),this._resultDomObj.setLinkageEvent(function(t){r._createResultListByPageNum(t,r.currentResult)});var r=this},_createResultListByPageNum:function(t,e){var r,n=0;1===t&&e.length<this.perPageDataNum?r=e.length-1:t*this.perPageDataNum>e.length?(n=this.perPageDataNum*(t-1),r=e.length-1):(n=this.perPageDataNum*(t-1),r=t*this.perPageDataNum-1);for(var o=document.createElement("div"),i=n;i<=r;i++){var a=void 0,s="Point";e[i].filterAttribute?(s=e[i].feature.geometry.type,a=e[i].filterAttribute):a=e[i].properties,o.appendChild(this._createResultItem(s,a))}this._resultDomObj.setContent(o),this._resultDomObj.showView(),o.firstChild.getElementsByClassName("component-search-result-icon")[0].classList.add("component-search__resultitme-selected");var u=o.firstChild.getElementsByClassName("component-search-result-info")[0].firstChild.innerText;!this._selectMarkerFeature&&this._linkageFeature(u)},_flyToBounds:function(t){var e=t.getSouthWest(),r=t.getNorthEast();e.lat===r.lat&&e.lng===r.lng?this.map.flyTo(e):this.map.fitBounds(t)},_linkageFeature:function(t){var e=this,r="";r=this.isSearchLayer?t.split(":")[1].trim():t,this._selectFeature&&this._selectFeature.addTo(this.map),this.searchResultLayer.eachLayer(function(t){(!r||t.filterAttribute&&t.filterAttribute.filterAttributeValue===r||t.feature.properties&&t.feature.properties.name===r)&&(t.remove(),e._setSelectedLayerStyle(t))})},clearSearchResult:function(){this.searchResultLayer&&(this.map.closePopup(),!this.isSearchLayer&&this.map.removeLayer(this.searchResultLayer),this._selectMarkerFeature&&this.map.removeLayer(this._selectMarkerFeature),this._selectFeaturethis&&this.map.removeLayer(this._selectFeature),this._selectMarkerFeature=null,this._selectFeature=null,this.searchResultLayer=null,this.currentResult=null)},_featureOnclickEvent:function(t,e){var r=this;e.on("click",function(){var n,o,i=document.getElementsByClassName("component-pagination__link")[0];r._resultDomObj._changePageEvent({target:i.children[0].children[0]}),r._selectFeature&&r._selectFeature.addTo(r.map),e.remove();for(var a=0;a<r.searchLayersData.length;a++){var s=r.searchLayersData[a];if(s.properties&&s.properties.name===t.properties.name||s.filterAttribute&&s.filterAttribute.filterAttributeName+": "+s.filterAttribute.filterAttributeValue==e.filterAttribute.filterAttributeName+": "+e.filterAttribute.filterAttributeValue){o=a%r.perPageDataNum,n=parseInt(a/r.perPageDataNum)+1;break}}if(n>1)for(var u=1;u<n;u++){var l;l=document.getElementsByClassName("component-pagination__link")[0],r._resultDomObj._changePageEvent({target:l.children[l.children.length-2].children[0]})}var c=document.getElementsByClassName("component-search-result-info"),f=c[o].children[0];if(f.innerHTML===t.properties.name||f.innerHTML===e.filterAttribute.filterAttributeName+": "+e.filterAttribute.filterAttributeValue){var p=c[o].parentNode;document.getElementsByClassName("component-search__resultitme-selected").length>0&&document.getElementsByClassName("component-search__resultitme-selected")[0].classList.remove("component-search__resultitme-selected"),p.firstChild.classList.add("component-search__resultitme-selected"),r._setSelectedLayerStyle(e)}},this)},_setSelectedLayerStyle:function(t){var e;this._selectMarkerFeature&&this._selectMarkerFeature.remove(),this._selectMarkerFeature=null,this._selectFeature=t,this._selectMarkerFeature=RQ().geoJSON(t.toGeoJSON(),{pointToLayer:function(t,e){return RQ().marker(e,{icon:RQ().divIcon({className:"component-select-marker-icon",iconAnchor:[15,0]})})},style:{fillColor:"red",weight:1,opacity:1,color:"red",fillOpacity:.2}}).addTo(this.map),this._selectMarkerFeature.bindPopup(function(){return new Xq({attributes:t.feature.properties}).getElement()},{closeOnClick:!1}).openPopup().addTo(this.map),this._flyToBounds(this.searchResultLayer.getBounds()),t.getLatLng?e=t.getLatLng():t.getCenter&&(e=t.getCenter()),this.map.setView(e)}}),T8=RQ().Evented.extend({options:{_defaultLayerOptions:{style:null,onEachFeature:function(t,e){var r="属性信息如下：<br>";for(var n in t.properties)r+=n+": "+t.properties[n]+"<br>";e.bindPopup(r)}}},initialize:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!t)return new Error("Cannot find map, fileModel.map cannot be null.");this.map=t,RQ().Util.extend(this.options._defaultLayerOptions,e),this.options._defaultLayerOptions.pointToLayer=this.options._defaultLayerOptions.style,this.popupsStatus=!0,this.dataFlowStatus=!1,this.dataFlowUrl="",this.currentFeatures=[],this.dataFlowLayer=null},subscribe:function(t){var e=this;if(this.dataFlowUrl===t){if(this.dataFlowStatus)return void this.fire("dataflowservicesubscribed")}else this.dataFlowUrl=t;this.dataFlowStatus=!0,this.dataFlowLayer&&(this.dataFlowLayer.remove(),this.dataFlowLayer=null);var r=new _2(t,this.options._defaultLayerOptions);r.on("subscribesucceeded",function(t){e.fire("subscribesucceeded",{result:t})}),r.on("subscribefailed",function(t){e.fire("subscribefailed",{result:t})}),r.on("dataupdated",function(t){e.fire("dataupdated",{result:t});var r=t.layer.getBounds(),n=A0.toSuperMapBounds(e.map.getBounds()),o=A0.toSuperMapBounds(r);n.intersectsBounds(o)||(o.left===o.right&&o.top===o.bottom?e.map.setView(r.getCenter()):e.map.flyToBounds(r)),e.popupsStatus&&e.openPopups()}),r.addTo(this.map),this.dataFlowLayer=r},cancelSubscribe:function(){this.dataFlowLayer&&(this.dataFlowStatus=!1,this.dataFlowLayer.dataService.unSubscribe(),this.dataFlowLayer.remove(),this.dataFlowLayer=null)},openPopups:function(){if(this.popupsStatus=!0,this.dataFlowLayer)for(var t=this.dataFlowLayer.getLayers(),e=0;e<t.length;e++)for(var r=0;r<t[e].getLayers().length;r++)t[e].getLayers()[r].openPopup()},closePopups:function(){if(this.popupsStatus=!1,this.dataFlowLayer)for(var t=this.dataFlowLayer.getLayers(),e=0;e<t.length;e++)for(var r=0;r<t[e].getLayers().length;r++)t[e].getLayers()[r].closePopup()}}),C8=d8.extend({initialize:function(t){d8.prototype.initialize.apply(this,[t])},onAdd:function(t){var e={};return this.options.style&&(e.style=this.options.style),this.options.onEachFeature&&(e.style=this.options.onEachFeature),this.viewModel=new T8(t,e),d8.prototype.onAdd.apply(this,[t])},_initView:function(){var t=this,e=new Oq({title:QH.i18n("title_dataFlowService")}),r=e.getElement(),n=e.getContentElement();n.style.padding="10px 18px";var o=document.createElement("div");o.setAttribute("class","component-dataflow__container");var i=document.createElement("div");i.setAttribute("class","component-input-default");var a=document.createElement("input");a.setAttribute("class","component-input-default"),a.type="text",a.placeholder=QH.i18n("text_input_value_inputDataFlowUrl"),a.title=QH.i18n("text_input_value_inputDataFlowUrl"),i.appendChild(a);var s=document.createElement("span");s.setAttribute("class","supermapol-icons-close"),s.hidden=!0,s.onclick=function(t){a.value="",t.target.hidden=!0},a.oninput=function(){s.hidden=!1},i.appendChild(s),o.appendChild(i),n.appendChild(o);var u=document.createElement("div");u.setAttribute("class","component-dataflow__container");var l=document.createElement("div");l.setAttribute("class","component-checkbox-container");var c=document.createElement("div");c.setAttribute("class","component-checkbox-default component-checkbox-selected-img"),c.checked=!0,l.appendChild(c);var f=document.createElement("div");f.setAttribute("class","component-label component-label-selected"),f.innerHTML=QH.i18n("text_displayFeaturesInfo"),l.appendChild(f),c.onclick=function(e){e.target.checked=!e.target.checked,e.target.checked?(f.setAttribute("class","component-label component-label-selected"),e.target.setAttribute("class","component-checkbox-default component-checkbox-selected-img"),t.viewModel.openPopups()):(f.setAttribute("class","component-label"),e.target.setAttribute("class","component-checkbox-default component-checkbox-default-img"),t.viewModel.closePopups())},u.appendChild(l),n.appendChild(u);var p=document.createElement("div");p.setAttribute("class","component-dataflow__container component-init-center");var h=document.createElement("button");h.setAttribute("class","component-button-default"),h.innerHTML=QH.i18n("text_subscribe"),h.onclick=function(){var e=a.value;""!==e?t.viewModel.subscribe(e):t.messageBox.showView(QH.i18n("msg_inputDataFlowUrlFirst"))},p.appendChild(h);var y=document.createElement("button");return y.setAttribute("class","component-button-default"),y.innerHTML=QH.i18n("text_cancelSubscribe"),y.onclick=function(){t.viewModel.cancelSubscribe()},p.appendChild(y),n.appendChild(p),this.messageBox=new KH,this.viewModel.on("dataflowservicesubscribed",function(){t.messageBox.showView(QH.i18n("msg_dataflowservicesubscribed"))}),this.viewModel.on("subscribesucceeded",function(){t.messageBox.showView(QH.i18n("msg_subscribesucceeded"))}),this.viewModel.on("dataupdated",function(e){t.messageBox.closeView(),t._event.fire("dataupdated",e)}),this._preventMapEvent(r,this.map),r}});function k8(t){"@babel/helpers - typeof";return(k8="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function A8(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,j8(n.key),n)}}function j8(t){var e=function(t,e){if("object"!=k8(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=k8(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==k8(e)?e:e+""}var N8=function(t,e,r){return e&&A8(t.prototype,e),r&&A8(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.layerName=e,this.layer=r});function I8(t){"@babel/helpers - typeof";return(I8="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function M8(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,R8(n.key),n)}}function R8(t){var e=function(t,e){if("object"!=I8(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=I8(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==I8(e)?e:e+""}function L8(t,e,r){return e=D8(e),function(t,e){if(e&&("object"===I8(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],D8(t).constructor):e.apply(t,r))}function D8(t){return(D8=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function B8(t,e){return(B8=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var F8=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),L8(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&B8(t,e)}(e,RQ().Evented),r=e,(n=[{key:"initialize",value:function(t){this.workerUrl=t,this.turfLayers=[]}},{key:"getLayersData",value:function(t){for(var e={},r={},n={},o={},i=0;i<t;i++)t[i]=new N8(t[i].layerName,t[i].layer);this.geoJsonLayersDataModel=new O8(t);for(var a=[],s=0;s<t.length;s++)a[t[s].layerName]={fields:t[s].fields,layer:t[s].layer.toGeoJSON()};for(var u in this.geoJsonLayersDataModel.layers){var l=void 0;l=a[u].fields?a[u].fields:this.geoJsonLayersDataModel.layers[u].getAttributeNamesByType("Num");for(var c=[],f=0;f<l.length;f++){c[l[f]]=this.geoJsonLayersDataModel.layers[u].getAttributeValueByAttributeName(l[f]);for(var p=c[l[f]],h=0;h<p.length;h++)""!=p[h]&&void 0!==p[h]||(p.splice(h,1),h-=1),p[h]=parseFloat(p[h]);c[l[f]]=Array.from(new Set(p.sort(function(t,e){return t-e})))}var y={layerName:u,fields:l,fieldsValue:c,features:a[u].layer},d=a[u].layer.features[0].geometry.type;"Point"===d?r[u]=y:"LineString"===d?n[u]=y:"Polygon"===d&&(o[u]=y)}return e.point=r,e.lineString=n,e.polygon=o,e}},{key:"analysis",value:function(t,e){this.geoJsonLayersDataModel.setCurrentLayerDataModel(t.analysisLayers),this.worker=new Worker(this.workerUrl);var r=this.geoJsonLayersDataModel.currentLayerDataModel.layer.toGeoJSON();if("isolines"===t.analysisMethod){for(var n=t.analysisFieldsValue.split(","),o=r,i=0;i<n.length;i++)n[i]=parseFloat(n[i]);var a=this,s={pointGrid:o,analysisMethod:t.analysisMethod,breaks:n,zProperty:t.analysisFields,analysisCellSize:t.analysisCellSize,options:{gridType:"point",property:t.analysisFields,weight:Number(t.analysisBreaks)}};this.worker.postMessage(s),this.worker.onmessage=function(r){if(0===r.data.features.length)a.fire("analysisfailed");else{a.fire("analysissucceeded",{data:r.data});var n=RQ().geoJSON(r.data,{style:{color:"#1060C2",weight:3},onEachFeature:function(t,e){t.properties&&e.bindPopup(new Xq(t.properties).getElement()),e.on({mouseover:function(){e.setStyle({color:"#ffffff",weight:5})},mouseout:function(){e.setStyle({color:"#1060C2",weight:3})},click:function(){e.setStyle({color:"#ffffff",weight:5})}})}}).addTo(e);a.turfLayers.push(n),a.fire("layerloaded",{layer:n,name:t.resultLayersName}),a.worker.terminate()}}}else if("buffer"===t.analysisMethod){var u=this,l={analysisMethod:"buffer",radius:t.radius,unit:t.unit,isSave:t.isSaveStatus,isUnion:t.isUnion,geoJson:r};this.worker.postMessage(l),this.worker.onmessage=function(r){var n=RQ().geoJSON(r.data,{style:{color:"#ffffff",fillColor:"#1060C2",fillOpacity:.5,weight:1.5},onEachFeature:function(t,e){t.properties&&e.bindPopup(new Xq(t.properties).getElement()),e.on({mouseover:function(){e.setStyle({color:"#ffffff",fillColor:"rgb(46,40,79)",fillOpacity:.5,weight:5})},mouseout:function(){e.setStyle({color:"#ffffff",fillColor:"#1060C2",fillOpacity:.5,weight:1.5})},click:function(){e.setStyle({color:"#ffffff",fillColor:"rgb(46,40,79)",fillOpacity:.5,weight:2})}})}}).addTo(e);u.turfLayers.push(n),u.fire("layerloaded",{layer:n,name:t.resultLayersName}),u.worker.terminate()}}}},{key:"clearLayers",value:function(){for(var t in this.turfLayers)this.turfLayers[t].clearLayers();this.fire("layersremoved",{layers:this.turfLayers})}},{key:"cancelAnalysis",value:function(){this.worker.terminate()}}])&&M8(r.prototype,n),o&&M8(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}(),U8=d8.extend({initialize:function(t,e){if(!t)throw new Error("workerUrl is required");this.workerUrl=t,d8.prototype.initialize.apply(this,[e])},onAdd:function(t){return this.map=t,d8.prototype.onAdd.apply(this,[t])},addLayer:function(t){this.layers=this.layers||[],this.layers.push(t);var e=this.viewModel.getLayersData(this.layers);this.fillDataToView(e)},fillDataToView:function(t){if(t){this.fillData=t;var e={};switch(document.getElementById("dropDownTop").getAttribute("data-value")){case"isolines":case"buffer":e=t.point}if("{}"!=JSON.stringify(e)){var r=[];for(var n in e)r.push(n);var o=document.getElementById("layersSelect"),i=document.getElementById("layerSelectName");o.innerHTML="",i.title=r[0],i.innerHTML=r[0],this._createOptions(o,r),this.layerSelectObj.optionClickEvent(o,i,this.layersSelectOnchange);var a=e[i.title],s=a.fields,u=a.fieldsValue;this.currentData=a,this.currentFillData=e;var l=document.getElementById("fieldsSelect");l.innerHTML="";var c=document.getElementById("fieldsSelectName");c.innerHTML=s[0],c.title=s[0],this._createOptions(l,s),this.fieldsSelectObj.optionClickEvent(l,c,this.fieldsSelectOnchange);var f=c.title,p=document.getElementById("getValueTextArea");p.value=u[f].toString().replace(/,/g,",\r\n"),p.setAttribute("data-value",u[f]);var h=document.getElementById("resultLayersName");switch(document.getElementById("dropDownTop").getAttribute("data-value")){case"isolines":h.value=QH.i18n("text_label_isolines")+i.title;break;case"buffer":h.value=QH.i18n("text_label_buffer")+i.title}}}},_initView:function(){var t=this;this.workerUrl&&(this.viewModel=new F8(this.workerUrl));var e=new Oq({title:QH.i18n("title_clientComputing")}).getElement();e.classList.add("component-analysis"),e.children[0].style.fontSize="12px";var r=[{title:QH.i18n("text_isoline"),dataValue:"isolines",remark:QH.i18n("text_extractDiscreteValue"),icon:{className:"component-analyst-isoline-img"}},{title:QH.i18n("text_buffer"),dataValue:"buffer",remark:QH.i18n("text_specifyTheDistance"),icon:{className:"component-analyst-buffer-img"}}],n=e.children[1];n.classList.add("component-content--scroll"),n.classList.add("component-content--analysis");var o=new Dq(r).getElement();n.appendChild(o);var i=o.children[0].children[0],a=o.children[0].children[2].children[0];i.children[0].id="dropDownTop";var s=RQ().DomUtil.create("div","component-analysis__container",n),u=RQ().DomUtil.create("div","component-analysis__container__analysisLayer",s),l=RQ().DomUtil.create("div","component-analysis__selecttool",u);l.id="layerSelectControl";var c={optionsArr:[""],labelName:QH.i18n("text_label_analysisLayer")},f=new Aq(c),p=f.getElement();this.layerSelectObj=f,l.appendChild(p);var h=p.children[1].children[0];h.id="layerSelectName",p.children[1].children[2].children[0].children[0].id="layersSelect";var y=RQ().DomUtil.create("div","component-analysis__container__analysistype",s),d=RQ().DomUtil.create("div","component-clientcomputation__isoline",y),v={optionsArr:[""],labelName:QH.i18n("text_label_extractField"),optionsClickCb:this.fieldsSelectOnchange},m=RQ().DomUtil.create("div","component-analysis__selecttool",d),b=new Aq(v),g=b.getElement();this.fieldsSelectObj=b;var S=g.children[1].children[0];S.id="fieldsSelectName";var w=g.children[1].children[2].children[0].children[0];w.id="fieldsSelect",m.appendChild(g);var _=RQ().DomUtil.create("div","component-analysis__container",d);RQ().DomUtil.create("span","component-textarea__name",_).innerHTML=QH.i18n("text_label_extractedValue");var O=RQ().DomUtil.create("div","component-textarea",_);O.id="getValueText";var E=RQ().DomUtil.create("div","",O),P=RQ().DomUtil.create("div","component-scrollarea-content",E);P.setAttribute("tabindex","1");var x=RQ().DomUtil.create("textarea","component-textarea__content",P);x.id="getValueTextArea",x.setAttribute("rows","20");var T=RQ().DomUtil.create("div","",d);RQ().DomUtil.create("span","",T).innerHTML=QH.i18n("text_label_distanceAttenuation");var C=RQ().DomUtil.create("input","",T);C.value="3";var k=RQ().DomUtil.create("div","",d);RQ().DomUtil.create("span","",k).innerHTML=QH.i18n("text_label_gridSize");var A=RQ().DomUtil.create("input","",k);A.value="30";var j=RQ().DomUtil.create("div","component-clientcomputation__buffer hidden",y),N=RQ().DomUtil.create("div","component-clientcomputation__buffer--radius",j);RQ().DomUtil.create("span","",N).innerHTML=QH.i18n("text_label_bufferRadius");var I=RQ().DomUtil.create("div","",N),M=RQ().DomUtil.create("input","buffer-radius-input",I);M.id="bufferRadiusInput",M.value="10",M.setAttribute("placeholder",QH.i18n("text_label_defaultkilometers"));var R=RQ().DomUtil.create("div","component-clientcomputation__buffer--unit",I);R.id="bufferUnit";var L={optionsArr:[QH.i18n("text_option_kilometer")],labelName:QH.i18n("text_label_unit")},D=new Aq(L).getElement(),B=D.children[1].children[0];B.id="bufferUnitSelectName",D.children[1].children[2].children[0].children[0].id="bufferUnitSelect",D.children[0].style.display="none",R.appendChild(D);var F=RQ().DomUtil.create("div","",N),U=RQ().DomUtil.create("div","component-clientcomputation__buffer--issaveattrs",F);U.id="saveAttrsContainer";var G=RQ().DomUtil.create("div","checkbox checkbox-fault",U);G.id="saveAttrsCheckbox";var V=RQ().DomUtil.create("div","lable",U);V.id="saveAttrsLabel",V.innerHTML=QH.i18n("text_retainOriginal");var z=RQ().DomUtil.create("div","component-clientcomputation__buffer--isunion",F);z.id="isUnionContainer";var H=RQ().DomUtil.create("div","checkbox checkbox-fault",z);H.id="isUnionCheckbox";var q=RQ().DomUtil.create("div","lable",z);q.innerHTML=QH.i18n("text_mergeBuffer"),q.id="isUnionLabel";var J=RQ().DomUtil.create("div","component-analysis__container__resultLayersName",s);RQ().DomUtil.create("span","",J).innerHTML=QH.i18n("text_label_resultLayerName");var W=RQ().DomUtil.create("input","",J);W.id="resultLayersName";var K=RQ().DomUtil.create("div","component-analysis__container__analysisbtn",s),Y=RQ().DomUtil.create("div","component-analysis__analysisbtn",K),Q=RQ().DomUtil.create("button","component-analysis__analysisbtn--analysis",Y);Q.innerHTML=QH.i18n("btn_analyze");var X=RQ().DomUtil.create("div","component-analysis__analysisbtn--analysing-container hidden",Y),Z=RQ().DomUtil.create("div","component-analysis__analysisbtn--analysising",X),$=RQ().DomUtil.create("div","component-analysis__svg-container",Z);$.id="analyse_background",$.innerHTML='<svg class="component-analysis__svg-rotate" width="16px" height="16px" version="1.1" xmlns="http://www.w3.org/2000/svg">\n            <path id="ring" fill="#FFF" transform="translate(8,8)" d="M 0 0 v -8 A 8 8 0 1 1 -8.00 0 z"></path>\n            <circle cx="8" cy="8" r="6" fill="#38ADF5"></circle>\n            <rect class="svg-top" x="8" y="0" rx="2" ry="2" width="2" height="2" style="fill: rgb(255, 255, 255); stroke-width: 0;"></rect>\n            <rect class="svg-left" x="0" y="8" rx="2" ry="2" width="2" height="2" style="fill: rgb(255, 255, 255); stroke-width: 0;"></rect>\n        </svg>',RQ().DomUtil.create("span","",Z).innerHTML=QH.i18n("btn_analyzing");var tt=RQ().DomUtil.create("button","component-analysis__analysisbtn--cancel",X);tt.innerHTML=QH.i18n("btn_cancelAnalysis");var et=RQ().DomUtil.create("button","component-analysis__analysisbtn--analysis component-analysis__analysisbtn--deletelayers",Y);et.innerHTML=QH.i18n("btn_emptyTheAnalysisLayer");for(var rt=function(e){a.children[e].onclick=function(){i.innerHTML=a.children[e].outerHTML,i.children[0].id="dropDownTop";var r=document.getElementById("layersSelect"),o=document.getElementById("layerSelectName"),s=a.children[e].getAttribute("data-value"),u={};switch(s){case"buffer":d.classList.add("hidden"),j.classList.remove("hidden"),n.style.height="422px",W.value=QH.i18n("text_label_buffer")+o.title,u=t.fillData.point;break;case"isolines":d.classList.remove("hidden"),j.classList.add("hidden"),n.style.height="712px",W.value=QH.i18n("text_label_isolines")+o.title,u=t.fillData.point}if(t.currentFillData!==u){if(r.innerHTML="","{}"==JSON.stringify(u))return W.value="",o.title="",void(o.innerHTML="");var l=[];for(var c in u)l.push(c);o.title=l[0],o.innerHTML=l[0],t._createOptions(r,l),t.layerSelectObj.optionClickEvent(r,o,t.layersSelectOnchange),"buffer"===s?W.value=QH.i18n("text_label_buffer")+l[0]:"isolines"===s&&(W.value=QH.i18n("text_label_isolines")+l[0]),t.currentData=u[o.title],t.currentFillData=u}}},nt=0;nt<a.children.length;nt++)rt(nt);this.fieldsSelectOnchange=function(t){if(this.currentData){var e=this.currentData,r=t.title;x.value=e.fieldsValue[r].toString().replace(/,/g,",\r\n"),x.setAttribute("data-value",e.fieldsValue[r])}}.bind(this),this.layersSelectOnchange=function(t){if(this.currentData){var e=t.title,r=this.currentFillData[e];this.currentData=r,w.innerHTML="",this._createOptions(w,r.fields);var n=document.getElementById("fieldsSelectName"),o=r.fields[0];n.title=o,n.innerHTML=o;var i=o;this.fieldsSelectObj.optionClickEvent(w,n,this.fieldsSelectOnchange),x.value=r.fieldsValue[i].toString().replace(/,/g,",\r\n"),x.setAttribute("data-value",r.fieldsValue[i]);var a=document.getElementById("dropDownTop").getAttribute("data-value");switch(a){case"buffer":W.value=QH.i18n("text_label_buffer")+e;break;case"isolines":W.value=QH.i18n("text_label_isolines")+e}}}.bind(this);var ot=!0,it=!1;return V.classList.add("selected"),G.classList.add("checkbox-active"),U.onclick=function(){ot?(G.classList.add("checkbox-fault"),G.classList.remove("checkbox-active"),V.classList.remove("selected"),ot=!1):(G.classList.add("checkbox-active"),G.classList.remove("checkbox-fault"),V.classList.add("selected"),ot=!0,it&&(H.classList.add("checkbox-fault"),H.classList.remove("checkbox-active"),it=!1))},z.onclick=function(){it?(H.classList.add("checkbox-fault"),H.classList.remove("checkbox-active"),q.classList.remove("selected"),it=!1):(H.classList.add("checkbox-active"),H.classList.remove("checkbox-fault"),q.classList.add("selected"),it=!0,ot&&(G.classList.add("checkbox-fault"),G.classList.remove("checkbox-active"),ot=!1))},this.messageBox=new KH,Q.onclick=function(){var e;switch(X.style.display="block",Q.style.display="none",document.getElementById("dropDownTop").getAttribute("data-value")){case"isolines":e=function(){var t=document.getElementById("dropDownTop").getAttribute("data-value"),e=document.getElementById("resultLayersName").value,r=h.title,n=S.title,o=x.value.replace(/[\r\n]/g,"").split(",").toString(),i=C.value,a=A.value;return{analysisMethod:t,analysisLayers:r,analysisFields:n,analysisFieldsValue:o,analysisBreaks:i,analysisCellSize:a,resultLayersName:e}}();break;case"buffer":e=function(){var t=document.getElementById("dropDownTop"),e=document.getElementById("resultLayersName").value,r=h.title,n=t.getAttribute("data-value"),o=M.value,i=B.title;return{analysisMethod:n,analysisLayers:r,radius:o,unit:i,resultLayersName:e,isSaveStatus:ot,isUnion:it}}()}t.viewModel.analysis(e,t.map),t.viewModel.on("layerloaded",function(e){X.style.display="none",Q.style.display="block",t._event.fire("analysissucceeded",{layer:e.layer,name:e.name})}),t.viewModel.on("analysisfailed",function(){X.style.display="none",Q.style.display="block",t.messageBox.showView(QH.i18n("msg_resultIsEmpty"),"failure"),t._event.fire("analysisfailed")})},tt.onclick=function(){X.style.display="none",Q.style.display="block",t.viewModel.cancelAnalysis()},et.onclick=function(){t.viewModel.on("layersremoved",function(e){t._event.fire("layersremoved",{layers:e.layers})}),t.viewModel.clearLayers()},this._preventMapEvent(e,this.map),e},_createOptions:function(t,e){for(var r in e){var n=document.createElement("div"),o=e[r];n.className="component-selecttool__option",n.title=o,n.innerHTML=o,n.setAttribute("data-value",o),t.appendChild(n)}}});function G8(t){"@babel/helpers - typeof";return(G8="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function V8(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,z8(n.key),n)}}function z8(t){var e=function(t,e){if("object"!=G8(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=G8(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==G8(e)?e:e+""}var H8=function(t,e,r){return e&&V8(t.prototype,e),r&&V8(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.layerName=e.layerName,this.layer=e.layer,this.fields=e.fields||null});function q8(t){"@babel/helpers - typeof";return(q8="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function J8(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,W8(n.key),n)}}function W8(t){var e=function(t,e){if("object"!=q8(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=q8(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==q8(e)?e:e+""}function K8(t,e,r){return e=Y8(e),function(t,e){if(e&&("object"===q8(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Y8(t).constructor):e.apply(t,r))}function Y8(t){return(Y8=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Q8(t,e){return(Q8=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var X8=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),K8(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Q8(t,e)}(e,RQ().Evented),r=e,(n=[{key:"initialize",value:function(t){this.processingUrl=t}},{key:"getDatasetsName",value:function(){var t=this.processingUrl;this.dataset=[],this.dataset.datasetNames=[],this.dataset.childUrl=[];var e="http://"+t.split("/")[2],r=e+"/iserver/services/datacatalog/rest/datacatalog/sharefile.json",n=e+"/iserver/services/datacatalog/rest/datacatalog/relationship/datasets.json",o=this;co.get(r).then(function(t){return t.json()}).then(function(t){o.dataset.datasetNames=o.dataset.datasetNames.concat(t.datasetNames),o.dataset.childUrl=o.dataset.childUrl.concat(t.childUriList);var e=o;co.get(n).then(function(t){return t.json()}).then(function(t){e.dataset.datasetNames=e.dataset.datasetNames.concat(t.datasetNames),e.dataset.childUrl=e.dataset.childUrl.concat(t.childUriList);var r=[];for(var n in e.dataset.datasetNames)r[e.dataset.datasetNames[n]]=e.dataset.childUrl[n];e.fire("datasetsloaded",{result:{dataset:e.dataset,datasetHash:r}})})})}},{key:"getDatasetInfo",value:function(t){var e,r=this;co.get(t).then(function(t){return t.json()}).then(function(t){var n=t.datasetInfo;"LINE"===n.datasetType||"LINE"===n.type?e="LINE":"POINT"===n.datasetType||"POINT"===n.type||"CSV"===n.type?e="POINT":"REGION"!==n.datasetType&&"REGION"!==n.type||(e="REGION");var o=[],i=n.fieldInfos||n.fieldInfo||null;if(i){for(var a in i)o.push(i[a].name);r.fire("datasetinfoloaded",{result:{type:e,fields:o}})}else{var s=t.childUriList[0].replace("//fields","/fields");co.get(s).then(function(t){return t.json()}).then(function(t){var n=t.fieldNames,o=[];for(var i in n)o.push(n[i]);r.fire("datasetinfoloaded",{result:{type:e,fields:o}})})}})}}])&&J8(r.prototype,n),o&&J8(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function Z8(t){"@babel/helpers - typeof";return(Z8="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function $8(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,t9(n.key),n)}}function t9(t){var e=function(t,e){if("object"!=Z8(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Z8(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Z8(e)?e:e+""}function e9(t,e,r){return e=r9(e),function(t,e){if(e&&("object"===Z8(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],r9(t).constructor):e.apply(t,r))}function r9(t){return(r9=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function n9(t,e){return(n9=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var o9=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),e9(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&n9(t,e)}(e,RQ().Evented),r=e,(n=[{key:"initialize",value:function(t){this.processingUrl=t}},{key:"getDatasetsName",value:function(){var t=this.processingUrl;this.resultLayers=[],this.datasetNames=[],this.distributedAnalysisModel=new X8(t),this.distributedAnalysisModel.getDatasetsName();var e=this;this.distributedAnalysisModel.on("datasetsloaded",function(t){e.fire("datasetsloaded",{result:t.result})})}},{key:"getDatasetInfo",value:function(t){this.distributedAnalysisModel.getDatasetInfo(t);var e=this;this.distributedAnalysisModel.on("datasetinfoloaded",function(t){var r=t.result.type,n=t.result.fields;e.fire("datasetinfoloaded",{result:{type:r,fields:n}})})}},{key:"analysis",value:function(t,e){var r=new $6(this.processingUrl);if(t.analysisParam instanceof V_){var n=t.analysisParam,o=this;r.addKernelDensityJob(n,function(r){r.error?o.fire("analysisfailed",{error:r.error}):r.result.setting.serviceInfo.targetServiceInfos.map(function(r){return"RESTMAP"===r.serviceType&&co.get(r.serviceAddress+"/maps").then(function(t){return t.json()}).then(function(r){var n=r[0].path;o.fire("analysissucceed",{result:r});var i=s1(n,{noWrap:!0,transparent:!0});o.resultLayers.push(i),i.addTo(e);var a=new Date,s=t.resultLayerName||a.getTime();o.fire("layerloaded",{layer:i,name:s})}),r})})}}},{key:"clearLayers",value:function(){for(var t in this.resultLayers)this.resultLayers[t].remove();this.fire("layersremoved",{layers:this.resultLayers}),this.resultLayers=[]}}])&&$8(r.prototype,n),o&&$8(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}(),i9=d8.extend({initialize:function(t,e){d8.prototype.initialize.apply(this,[e]),this.viewModel=new o9(t)},onAdd:function(t){return this._fillDataToView(),d8.prototype.onAdd.apply(this,[t])},_fillDataToView:function(){var t=this;this.viewModel.on("datasetsloaded",function(e){var r=e.result.dataset.datasetNames;t.datasetSelect.innerHTML="",t._createOptions(t.datasetSelect,r),t.datasetSelectObj.optionClickEvent(t.datasetSelect,t.datasetSelectName,t.datasetSelectOnchange),t.dataHash=e.result.datasetHash}),this.viewModel.getDatasetsName()},_initView:function(){var t=this,e=new Oq({title:QH.i18n("title_distributedAnalysis")}).getElement();e.classList.add("component-analysis"),e.children[0].style.fontSize="12px";var r=RQ().DomUtil.create("div","component-content component-content--scroll component-content--analysis",e),n=[{title:QH.i18n("text_densityAnalysis"),dataValue:"density",remark:QH.i18n("text_CalculateTheValuePerUnitArea"),icon:{className:"component-analyst-density-img"}}],o=new Dq(n).getElement();r.appendChild(o);var i=o.children[0].children[0].children[0],a=RQ().DomUtil.create("div","component-analysis__container",r),s=RQ().DomUtil.create("div","analysistype",a),u=RQ().DomUtil.create("div","component-analysis__container__analysisLayer",s),l=RQ().DomUtil.create("div","component-analysis__selecttool",u),c={optionsArr:[QH.i18n("text_option_selectDataset")],labelName:QH.i18n("text_label_dataset"),optionsClickCb:it.bind(this)},f=new Aq(c),p=f.getElement();this.datasetSelectObj=f,l.appendChild(p);var h=p.children[1].children[0];this.datasetSelectName=h;var y=p.children[1].children[2].children[0].children[0];y.children[0].style.display="none",this.datasetSelect=y;var d=RQ().DomUtil.create("div","component-analysis__idw",u),v=[{optionsArr:[QH.i18n("text_option_simplePointDensityAnalysis"),QH.i18n("text_option_nuclearDensityAnalysis")],labelName:QH.i18n("text_label_analyticalMethod")},{optionsArr:[QH.i18n("text_option_quadrilateral"),QH.i18n("text_option_hexagon")],labelName:QH.i18n("text_label_meshType")}],m=RQ().DomUtil.create("div","component-analysis__idw__selecttool",d);for(var b in v){var g=new Aq(v[b]).getElement();m.appendChild(g)}var S={optionsArr:[QH.i18n("text_option_notSet")],labelName:QH.i18n("text_label_weightField")},w=new Aq(S),_=w.getElement();m.appendChild(_),this.weightFieldsSelectObj=w;var O=m.children[0].children[1].children[0];O.setAttribute("data-value","0");var E=m.children[0].children[1].children[2].children[0].children[0];this._setEleAtribute(["0","1"],"data-value",E.children);var P=m.children[1].children[1].children[0];P.setAttribute("data-value","0");var x=m.children[1].children[1].children[2].children[0].children[0];this._setEleAtribute(["0","1"],"data-value",x.children);var T=m.children[2].children[1].children[0],C=m.children[2].children[1].children[2].children[0].children[0],k=[{spanName:QH.i18n("text_label_queryRange"),value:""}];for(var A in k)this._creatInputBox(k[A],m);var j=m.children[3].children[1];j.setAttribute("placeholder",QH.i18n("text_label_queryRangeTips")),j.title=QH.i18n("text_label_queryRangeTips");var N={labelName:QH.i18n("text_label_gridSizeInMeters"),selectOptions:{optionsArr:["Meter","Kilometer","Yard","Foot","Mile"]}},I=this._creatUnitSelectBox(N,m),M=I.children[1].children[0];M.value="1000";var R=I.children[1].children[1].children[0].children[0].children[0],L={labelName:QH.i18n("text_label_searchRadius"),selectOptions:{optionsArr:["Meter","Kilometer","Yard","Foot","Mile"]}},D=this._creatUnitSelectBox(L,m),B=D.children[1].children[0];B.value="300";var F=D.children[1].children[1].children[0].children[0].children[0],U={labelName:QH.i18n("text_label_areaUnit"),optionsArr:["SquareMile","SquareMeter","Hectare","Acre","SquareFoot","SquareYard"]},G=new Aq(U).getElement();m.appendChild(G);var V=G.children[1].children[0],z=RQ().DomUtil.create("div","range-content",s),H={optionsArr:[QH.i18n("text_option_notSet"),QH.i18n("text_option_equidistantSegmentation"),QH.i18n("text_option_logarithm"),QH.i18n("text_option_equalCountingSegment"),QH.i18n("text_option_squareRootSegmentation")],labelName:QH.i18n("text_label_thematicMapSegmentationMode"),optionsClickCb:function(t){"NOTSET"!==t.getAttribute("data-value")?(W.classList.remove("hidden"),K.classList.remove("hidden")):(W.classList.add("hidden"),K.classList.add("hidden"))}};z.appendChild(new Aq(H).getElement());var q=z.children[0].children[1].children[0];q.setAttribute("data-value","NOTSET");var J=z.children[0].children[1].children[2].children[0].children[0];this._setEleAtribute(["NOTSET","EQUALINTERVAL","LOGARITHM","QUANTILE","SQUAREROOT"],"data-value",J.children);var W=this._creatInputBox({spanName:QH.i18n("text_label_thematicMapSegmentationParameters"),value:"20"},z);W.classList.add("hidden");var K=new Aq({optionsArr:[QH.i18n("text_option_greenOrangePurpleGradient"),QH.i18n("text_option_greenOrangeRedGradient"),QH.i18n("text_option_rainbowGradient"),QH.i18n("text_option_spectralGradient"),QH.i18n("text_option_terrainGradient")],labelName:QH.i18n("text_label_thematicMapColorGradientMode")}).getElement();z.appendChild(K),K.classList.add("hidden");var Y=K.children[1].children[2].children[0].children[0],Q=K.children[1].children[0];Q.setAttribute("data-value","GREENORANGEVIOLET");this._setEleAtribute(["GREENORANGEVIOLET","GREENORANGERED","RAINBOW","SPECTRUM","TERRAIN"],"data-value",Y.children);var X=RQ().DomUtil.create("div","",s);RQ().DomUtil.create("span","",X).innerHTML=QH.i18n("text_label_resultLayerName");var Z=RQ().DomUtil.create("input","component-distributeanalysis__input",X),$=RQ().DomUtil.create("div","component-analysis__container__analysisbtn",a),tt=RQ().DomUtil.create("div","component-analysis__analysisbtn",$),et=RQ().DomUtil.create("button","component-analysis__analysisbtn--analysis",tt);et.innerHTML=QH.i18n("btn_analyze");var rt=RQ().DomUtil.create("div","component-analysis__analysisbtn--analysing-container hidden",tt),nt=RQ().DomUtil.create("div","component-analysis__analysisbtn--analysising",rt);nt.style.width="200px",RQ().DomUtil.create("div","component-analysis__svg-container",nt).innerHTML='<svg class="component-analysis__svg-rotate" width="16px" height="16px" version="1.1" xmlns="http://www.w3.org/2000/svg">\n            <path id="ring" fill="#FFF" transform="translate(8,8)" d="M 0 0 v -8 A 8 8 0 1 1 -8.00 0 z"></path>\n            <circle cx="8" cy="8" r="6" fill="#38ADF5"></circle>\n            <rect class="svg-top" x="8" y="0" rx="2" ry="2" width="2" height="2" style="fill: rgb(255, 255, 255); stroke-width: 0;"></rect>\n            <rect class="svg-left" x="0" y="8" rx="2" ry="2" width="2" height="2" style="fill: rgb(255, 255, 255); stroke-width: 0;"></rect>\n        </svg>',RQ().DomUtil.create("span","",nt).innerHTML=QH.i18n("btn_analyzing");var ot=RQ().DomUtil.create("button","component-analysis__analysisbtn--analysis component-analysis__analysisbtn--deletelayers",tt);function it(t){if(this.messageBox.closeView(),this.dataHash){C.innerHTML="";var e=this.dataHash[t.title],r=this;this.viewModel.on("datasetinfoloaded",function(t){T.title=QH.i18n("text_option_notSet"),T.innerHTML=QH.i18n("text_option_notSet"),C.innerHTML="";var e=i.getAttribute("data-value"),n=t.result.type,o=t.result.fields;"density"===e&&("REGION"===n||"LINE"===n?r.messageBox.showView(QH.i18n("msg_datasetOrMethodUnsupport"),"failure"):(r.messageBox.closeView(),r._createOptions(C,o),r.weightFieldsSelectObj.optionClickEvent(C,T)))}),this.viewModel.getDatasetInfo(e)}}return ot.id="deleteLayersBtn",ot.innerHTML=QH.i18n("btn_emptyTheAnalysisLayer"),this.messageBox=new KH,this.datasetSelectOnchange=it.bind(this),et.onclick=function(){t.messageBox.closeView();var e=function(){var t,e,r=i.getAttribute("data-value"),n=O.getAttribute("data-value"),o=P.getAttribute("data-value"),a=j.value,s=R.title,u=F.title,l=V.title,c=Q.getAttribute("data-value"),f=q.getAttribute("data-value"),p=new Date,y=Z.value||p.getTime();t="NOTSET"===f?"":{rangeMode:f,rangeCount:W.value,colorGradientType:c};"density"===r&&(e=new V_({datasetName:h.title,method:n,meshType:o,resolution:M.value,fields:T.title,radius:B.value,meshSizeUnit:s,radiusUnit:u,areaUnit:l,query:a,mappingParameters:new eu({rangeMode:t.rangeMode,rangeCount:t.rangeCount,colorGradientType:t.colorGradientType})}));return{analysisParam:e,resultLayerName:y}}();h.title===QH.i18n("text_option_selectDataset")?t.messageBox.showView(QH.i18n("msg_selectDataset"),"failure"):T.title===QH.i18n("text_option_notSet")?t.messageBox.showView(QH.i18n("msg_setTheWeightField"),"failure"):(t.messageBox.closeView(),rt.style.display="block",et.style.display="none",t.viewModel.on("layerloaded",function(e){rt.style.display="none",et.style.display="block",t._event.fire("analysissucceeded",{layer:e.layer,name:e.name})}),t.viewModel.on("analysisfailed",function(e){t.messageBox.showView(QH.i18n("msg_theFieldNotSupportAnalysis"),"failure"),rt.style.display="none",et.style.display="block",t._event.fire("analysisfailed",{error:e.error})}),t.viewModel.analysis(e,t.map))},ot.onclick=function(){t.viewModel.on("layersremoved",function(e){t._event.fire("layersremoved",{layers:e.layers})}),t.viewModel.clearLayers()},this._preventMapEvent(e,this.map),e},_createOptions:function(t,e){for(var r in e){var n=document.createElement("div");n.className="component-selecttool__option",n.title=e[r],n.innerHTML=e[r],n.setAttribute("data-value",e[r]),t.appendChild(n)}},_creatInputBox:function(t,e){var r=RQ().DomUtil.create("div","",e);RQ().DomUtil.create("span","",r).innerHTML=t.spanName;var n=RQ().DomUtil.create("input","",r);return n.value=t.value,n.className="component-distributeanalysis__input",r},_creatUnitSelectBox:function(t,e){var r=RQ().DomUtil.create("div","component-clientcomputation__buffer--radius",e);RQ().DomUtil.create("span","",r).innerHTML=t.labelName;var n=RQ().DomUtil.create("div","",r);RQ().DomUtil.create("input","buffer-radius-input",n);var o=RQ().DomUtil.create("div","component-clientcomputation__buffer--unit",n),i=t.selectOptions,a=new Aq(i).getElement();return o.appendChild(a),r},_setEleAtribute:function(t,e,r){for(var n=0;n<r.length;n++)r[n].setAttribute(e,t[n])}});function a9(t){"@babel/helpers - typeof";return(a9="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s9(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,u9(n.key),n)}}function u9(t){var e=function(t,e){if("object"!=a9(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=a9(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==a9(e)?e:e+""}function l9(t,e,r){return e=c9(e),function(t,e){if(e&&("object"===a9(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],c9(t).constructor):e.apply(t,r))}function c9(t){return(c9=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function f9(t,e){return(f9=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var p9=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),l9(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&f9(t,e)}(e,RQ().Evented),r=e,(n=[{key:"initialize",value:function(t,e){this.dataserviceUrl=t,this.resultLayers=[],this.onEachFeature=e}},{key:"getFeatures",value:function(t,e){var r=this.dataserviceUrl,n=this,o=M1(r);t instanceof Ym?o.getFeaturesByIDs(t,function(t){n._getQureyResult(t,e)}):t instanceof fb?o.getFeaturesBySQL(t,function(t){n._getQureyResult(t,e)}):t instanceof Wv?o.getFeaturesByBounds(t,function(t){n._getQureyResult(t,e)}):t instanceof mm?o.getFeaturesByBuffer(t,function(t){n._getQureyResult(t,e)}):t instanceof Im&&o.getFeaturesByGeometry(t,function(t){n._getQureyResult(t,e)})}},{key:"_getQureyResult",value:function(t,e){if(t.error)this.fire("getfeaturesfailed",{error:t.error});else{var r=RQ().geoJSON(t.result.features,{onEachFeature:this.onEachFeature,pointToLayer:function(t,e){return RQ().circleMarker(e,{radius:6})}}).addTo(e);this.resultLayers.push(r),this.fire("getfeaturessucceeded",{result:t.result.features})}}},{key:"clearLayers",value:function(){for(var t in this.resultLayers)this.resultLayers[t].remove();this.resultLayers=[]}}])&&s9(r.prototype,n),o&&s9(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}(),h9=d8.extend({initialize:function(t,e,r){if(d8.prototype.initialize.apply(this,[r]),this.dataServiceUrl=t,!e||0===e.length)throw new Error("Please configure the dataset of the query！");e instanceof Array?this.dataSetNames=e:this.dataSetNames=e.split(" ")},onAdd:function(t){return d8.prototype.onAdd.apply(this,[t])},onRemove:function(){this.map.off("pm:create")},setDataSetNames:function(t){t instanceof Array?this.dataSetNames=t:this.dataSetNames=t.split(" ")},setGetFeatureMode:function(t){this.getFeatureMode=t,this._getFeatureModeOnchange(this.getFeatureMode)},setDataServiceUrl:function(t){this.dataServiceUrl=t,this.viewModel=new p9(this.dataServiceUrl,this.options.onEachFeature)},_getFeatureModeOnchange:function(t){var e;e=t&&"{}"!=JSON.stringify(t)?t:["ID","SQL","BOUNDS","BUFFER","SPATIAL"];var r=document.getElementById("queryModelControl");r.innerHTML="",this.creatQueryModeSelect(e,r)},_initView:function(){var t=this;this.viewModel=new p9(this.dataServiceUrl,this.options.onEachFeature),this.messageBox=new KH;var e=new Oq({title:QH.i18n("title_dataServiceQuery")}).getElement();e.classList.add("component-servicequery__container"),e.children[0].classList.add("component-servicequery__title");var r=e.children[1];r.classList.add("component-content--scroll"),r.classList.add("data-services");var n,o=RQ().DomUtil.create("div","component-analysis__container",r),i=RQ().DomUtil.create("div","component-servicequery__analysistype",o),a=RQ().DomUtil.create("div","component-analysis__container__analysisLayer",i),s=this.options.getFeatureMode;n=s&&"{}"!=JSON.stringify(s)?s:["ID","SQL","BOUNDS","BUFFER","SPATIAL"];var u=RQ().DomUtil.create("div","",a);u.id="queryModelContainer";var l=RQ().DomUtil.create("div","component-analysis__selecttool",u);l.id="queryModelControl",this.creatQueryModeSelect=function(t,e){var r;if(t instanceof Array&&t.length>1){var n={optionsArr:t,labelName:QH.i18n("text_label_queryMode"),optionsClickCb:this.queryModeltOnchange},o=new Aq(n).getElement();e.appendChild(o),r=o.children[1].children[0],o.children[1].classList.add("dataservice-select");var i=o.children[1];i.classList.add("dataservice-select"),i.classList.add("querymodel-select")}else{var a=RQ().DomUtil.create("span","",u);a.innerHTML=QH.i18n("text_label_queryMode"),r=RQ().DomUtil.create("div","component-servicequery__querymode-selectname",u);var s=RQ().DomUtil.create("span","",r);t instanceof Array?s.innerHTML=t[0]:s.innerHTML=t,r.title=s.innerHTML,this.queryModeltOnchange(r)}return r.id="queryModelSelectName",r}.bind(this),this.queryModeltOnchange=W.bind(this),this.creatQueryModeSelect(n,l);var c=RQ().DomUtil.create("div","component-analysis__container component-textarea--dataservice__container",a),f=RQ().DomUtil.create("span","textarea-name",c);f.innerHTML=QH.i18n("text_label_IDArrayOfFeatures");var p=RQ().DomUtil.create("div","component-textarea component-textarea--dataservice",c);p.id="getfeaturesIdArr";var h=RQ().DomUtil.create("div","scrollarea",p),y=RQ().DomUtil.create("div","component-scrollarea-content",h);y.setAttribute("tabindex","1");var d=RQ().DomUtil.create("textarea","component-textarea__content",y);d.value="[1,2,3]",d.id="getValueTextArea";var v=RQ().DomUtil.create("div","component-servicequery__maxfeatures-container hidden",a),m={spanName:QH.i18n("text_label_maxFeatures"),value:"1000"},b=this._creatInputBox(m,v).children[1];b.classList.add("max-features-input");var g=RQ().DomUtil.create("div","component-servicequery__distance-container hidden",a),S={spanName:QH.i18n("text_label_bufferDistance"),value:"10"},w=this._creatInputBox(S,g).children[1],_=RQ().DomUtil.create("div","component-analysis__container component-textarea--dataservice__container hidden",a),O=RQ().DomUtil.create("span","textarea-name",_),E=RQ().DomUtil.create("div","",_),P=RQ().DomUtil.create("div","component-servicequery__rangeicon-container",E);O.innerHTML=QH.i18n("text_label_queryRange1");var x=RQ().DomUtil.create("div","component-servicequery__rangeicon supermapol-icons-polygon-layer bounds",P),T=RQ().DomUtil.create("div","component-servicequery__rangeicon supermapol-icons-line-layer hidden",P),C=RQ().DomUtil.create("div","component-servicequery__rangeicon supermapol-icons-point-layer hidden",P),k=RQ().DomUtil.create("div","component-textarea component-textarea--rangequery",E);k.id="getfeaturesIdArr";var A=RQ().DomUtil.create("div","",k),j=RQ().DomUtil.create("div","component-scrollarea-content",A);j.setAttribute("tabindex","1");var N=RQ().DomUtil.create("textarea","component-textarea__content component-textarea--rangequery__content",j);N.value='{"leftBottom":{"x":-5,"y":-5},"rightTop":{"x":5,"y":5}}';var I=RQ().DomUtil.create("div","component-servicequery__spatialquerymode-container hidden",a),M={optionsArr:["CONTAIN","CROSS","DISJOINT","IDENTITY","INTERSECT","NONE","OVERLAP","TOUCH","WITHIN"],labelName:QH.i18n("text_label_spatialQueryMode")},R=RQ().DomUtil.create("div","component-analysis__selecttool",I),L=new Aq(M).getElement();L.children[1].classList.add("dataservice-select"),R.appendChild(L);var D=L.children[1].children[0];D.id="spatialQueryModeSelectName",L.children[1].children[2].classList.add("component-servicequery__spatialquerymode__selectcontent");var B=RQ().DomUtil.create("div","component-analysis__container__analysisbtn",a),F=RQ().DomUtil.create("div","component-analysis__analysisbtn",B),U=RQ().DomUtil.create("button","component-analysis__analysisbtn--analysis",F);U.innerHTML=QH.i18n("btn_query");var G=RQ().DomUtil.create("div","component-analysis__analysisbtn--analysing-container hidden",F),V=RQ().DomUtil.create("div","component-analysis__analysisbtn--analysising component-servicequery__querybtn--querying",G);RQ().DomUtil.create("div","component-analysis__svg-container",V).innerHTML='<svg class="component-analysis__svg-rotate" width="16px" height="16px" version="1.1" xmlns="http://www.w3.org/2000/svg">\n             <path id="ring" fill="#FFF" transform="translate(8,8)" d="M 0 0 v -8 A 8 8 0 1 1 -8.00 0 z"></path>\n             <circle cx="8" cy="8" r="6" fill="#38ADF5"></circle>\n             <rect class="svg-top" x="8" y="0" rx="2" ry="2" width="2" height="2" style="fill: rgb(255, 255, 255); stroke-width: 0;"></rect>\n             <rect class="svg-left" x="0" y="8" rx="2" ry="2" width="2" height="2" style="fill: rgb(255, 255, 255); stroke-width: 0;"></rect>\n         </svg>',RQ().DomUtil.create("span","",V).innerHTML=QH.i18n("btn_querying");var z=RQ().DomUtil.create("button","component-analysis__analysisbtn--analysis component-analysis__analysisbtn--deletelayers",F);z.innerHTML=QH.i18n("btn_emptyTheRresultLayer"),W(n[0]);var H,q,J=this;function W(t){var e;switch(e=t.title?t.title:t,v.classList.add("hidden"),_.classList.add("hidden"),g.classList.add("hidden"),T.classList.add("hidden"),C.classList.add("hidden"),x.classList.remove("bounds"),I.classList.add("hidden"),f.innerHTML=QH.i18n("text_label_featureFilter"),d.value="SMID<10","BUFFER"!==e&&"SPATIAL"!==e||(_.classList.remove("hidden"),O.innerHTML=QH.i18n("text_label_geometricObject"),N.value='{"type":"Feature","properties":{},"geometry":{"type":"Point","coordinates":[84.90234375,40.25390625]}}',T.classList.remove("hidden"),C.classList.remove("hidden")),e){case"ID":f.innerHTML=QH.i18n("text_label_IDArrayOfFeatures"),d.value="[1,2,3]";break;case"SQL":v.classList.remove("hidden");break;case"BOUNDS":_.classList.remove("hidden"),O.innerHTML=QH.i18n("text_label_queryRange"),N.value='{"leftBottom":{"x":-5,"y":-5},"rightTop":{"x":5,"y":5}}',x.classList.add("bounds");break;case"BUFFER":g.classList.remove("hidden");break;case"SPATIAL":I.classList.remove("hidden")}}return U.onclick=function(){t.messageBox.closeView(),G.style.display="block",U.style.display="none";var e=function(){var t,e=J.dataSetNames,r=document.getElementById("queryModelSelectName").title,n=d.value;if("ID"===r){var o=d.value,i=o.substring(1,o.length-1).split(",");t=new Ym({IDs:i,datasetNames:e})}else if("SQL"===r){var a=b.value;t=new fb({queryParameter:{attributeFilter:n},datasetNames:e,maxFeatures:a})}else if("BOUNDS"===r){if(!H){var s=JSON.parse(N.value);H=RQ().bounds([s.leftBottom.x,s.leftBottom.y],[s.rightTop.x,s.rightTop.y])}t=new Wv({attributeFilter:n,datasetNames:e,bounds:H})}else if("BUFFER"===r){var u=w.value,l=JSON.parse(N.value),c=q||l;t=new mm({attributeFilter:n,datasetNames:e,bufferDistance:u,geometry:c})}else if("SPATIAL"===r){var f=D.title,p=JSON.parse(N.value),h=q||p;t=new Im({attributeFilter:n,datasetNames:e,spatialQueryMode:f,geometry:h})}return t}();t.viewModel.on("getfeaturessucceeded",function(e){G.style.display="none",U.style.display="block",0===e.result.features.length&&t.messageBox.showView(QH.i18n("msg_dataReturnedIsEmpty"),"success"),t._event.fire("getfeaturessucceeded",{result:e.result})}),t.viewModel.on("getfeaturesfailed",function(e){G.style.display="none",U.style.display="block",t.messageBox.showView(e.error.errorMsg,"failure"),t._event.fire("getfeaturesfailed",{error:e.error})}),t.viewModel.getFeatures(e,t.map)},x.onclick=function(e){var r=document.getElementById("queryModelSelectName").title;q&&q.remove(),"BOUNDS"===r?t.map.pm.enableDraw("Rectangle"):t.map.pm.enableDraw("Poly"),e.stopPropagation(),e.preventDefault()},T.onclick=function(e){q&&q.remove(),t.map.pm.enableDraw("Line"),e.stopPropagation(),e.preventDefault()},C.onclick=function(e){q&&q.remove(),t.map.pm.enableDraw("Marker"),e.stopPropagation(),e.preventDefault()},this.map.on("pm:create",function(e){if("Rectangle"===e.shape){var r=(q=e.layer).getBounds();H=RQ().bounds([r._southWest.lng,r._southWest.lat],[r._northEast.lng,r._northEast.lat]);var n={leftBottom:{x:r._southWest.lng,y:r._southWest.lat},rightTop:{x:r._northEast.lng,y:r._northEast.lat}};N.value=JSON.stringify(n)}"Marker"===e.shape&&(q=e.layer,N.value=JSON.stringify(e.layer.toGeoJSON()),t.map.pm.disableDraw("Marker")),"Line"===e.shape&&(q=e.layer,N.value=JSON.stringify(e.layer.toGeoJSON())),"Polygon"===e.shape&&(q=e.layer,N.value=JSON.stringify(e.layer.toGeoJSON()))}),z.onclick=function(){t.viewModel.clearLayers()},this._preventMapEvent(e,this.map),e},_creatInputBox:function(t,e){var r=RQ().DomUtil.create("div","",e);return RQ().DomUtil.create("span","",r).innerHTML=t.spanName,RQ().DomUtil.create("input","",r).value=t.value,r}});function y9(t){"@babel/helpers - typeof";return(y9="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function d9(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function v9(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?d9(Object(r),!0).forEach(function(e){m9(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):d9(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function m9(t,e,r){var n;return(e="symbol"==y9(n=function(t,e){if("object"!=y9(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=y9(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"))?n:n+"")in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}RQ().supermap=v9(v9({},n),{},{Components:v9({},n.Components)},RQ().supermap),RQ().supermap.components=RQ().supermap.components||{},RQ().supermap.Components=RQ().supermap.Components||{},RQ().supermap.control=RQ().supermap.control||{},RQ().supermap.Util={},RQ().Util.toGeoJSON=H0,RQ().supermap.Util.toGeoJSON=H0,RQ().Util.toSuperMapGeometry=q0,RQ().supermap.Util.toSuperMapGeometry=q0,RQ().Util.resolutionToScale=W0,RQ().supermap.Util.resolutionToScale=W0,RQ().Util.scaleToResolution=K0,RQ().supermap.Util.scaleToResolution=K0,RQ().Util.getMeterPerMapUnit=J0,RQ().supermap.Util.getMeterPerMapUnit=J0,RQ().Util.GetResolutionFromScaleDpi=Q0,RQ().supermap.Util.getResolutionFromScaleDpi=Q0,RQ().supermap.Util.GetResolutionFromScaleDpi=Q0,RQ().Util.NormalizeScale=Y0,RQ().supermap.Util.normalizeScale=Y0,RQ().supermap.Util.NormalizeScale=Y0,RQ().Util.transform=X0,RQ().supermap.Util.transform=X0,RQ().Proj=RQ().Proj||{},RQ().supermap.Proj=RQ().supermap.Proj||{},RQ().Proj.CRS=_0,RQ().supermap.Proj.crs=_0,RQ().supermap.Proj.CRS=w0,RQ().Projection={},RQ().supermap.Projection=RQ().supermap.Projection||{},RQ().Projection.NonProjection=G0,RQ().supermap.Projection.nonProjection=G0,RQ().supermap.Projection.NonProjection=U0,RQ().supermap.CRS=RQ().supermap.CRS||{},RQ().CRS.NonEarthCRS=z0,RQ().supermap.CRS.NonEarthCRS=V0,RQ().supermap.CRS.nonEarthCRS=z0,RQ().CRS.BaiduCRS=j0,RQ().supermap.CRS.BaiduCRS=j0,RQ().CRS.TianDiTu_WGS84CRS=M0,RQ().supermap.CRS.TianDiTu_WGS84CRS=M0,RQ().CRS.TianDiTu_MercatorCRS=F0,RQ().supermap.CRS.TianDiTu_MercatorCRS=F0,RQ().CRS.TianDiTu_Mercator=F0,RQ().supermap.CRS.TianDiTu_Mercator=F0,RQ().CRS.TianDiTu_WGS84=M0,RQ().supermap.CRS.TianDiTu_WGS84=M0,RQ().CRS.Baidu=j0,RQ().supermap.CRS.Baidu=j0,RQ().supermap.CommontypesConversion=A0,RQ().supermap.components.clientComputationLayer=function(t){return new H8(t)},RQ().supermap.Components.ClientComputationLayer=H8,RQ().supermap.components.clientComputation=function(t){return new U8(t)},RQ().supermap.Components.ClientComputation=U8,RQ().supermap.components.clientComputationViewModel=function(t){return new F8(t)},RQ().supermap.Components.ClientComputationViewModel=F8,RQ().supermap.components.geoJSONLayerWithName=function(t,e){return new N8(t,e)},RQ().supermap.Components.GeoJSONLayerWithName=N8,RQ().supermap.components.GeoJsonLayersDataModel=O8,RQ().supermap.Components.GeoJsonLayersDataModel=O8,RQ().supermap.components.dataFlow=function(t){return new C8(t)},RQ().supermap.Components.DataFlow=C8,RQ().supermap.components.dataFlowViewModel=function(t){return new T8(t)},RQ().supermap.Components.DataFlowViewModel=T8,RQ().supermap.components.dataServiceQuery=function(t,e,r){return new h9(t,e,r)},RQ().supermap.Components.DataServiceQuery=h9,RQ().supermap.components.dataServiceQueryViewModel=function t(e){return new t(e)},RQ().supermap.Components.DataServiceQueryViewModel=p9,RQ().supermap.components.DistributedAnalysisModel=X8,RQ().supermap.Components.DistributedAnalysisModel=X8,RQ().supermap.components.distributedAnalysis=function(t){return new i9(t)},RQ().supermap.Components.DistributedAnalysis=i9,RQ().supermap.components.distributedAnalysisViewModel=function(t){return new o9(t)},RQ().supermap.Components.DistributedAnalysisViewModel=o9,RQ().supermap.components.openFile=function(t){return new m8(t)},RQ().supermap.Components.OpenFile=m8,RQ().supermap.components.openFileViewModel=function(t){return new v8(t)},RQ().supermap.Components.OpenFileViewModel=v8,RQ().supermap.components.search=function(t){return new x8(t)},RQ().supermap.Components.Search=x8,RQ().supermap.components.searchViewModel=function(t){return new P8(t)},RQ().supermap.Components.SearchViewModel=P8,RQ().supermap.components.componentsViewBase=function(t){return new d8(t)},RQ().supermap.Components.ComponentsViewBase=d8,RQ().supermap.control.changeTileVersion=function(t){return new x0(t)},RQ().supermap.control.ChangeTileVersion=x0,RQ().supermap.control.logo=function(t){return new T0(t)},RQ().supermap.control.Logo=T0,RQ().supermap.baiduTileLayer=$0,RQ().supermap.BaiduTileLayer=Z0,RQ().supermap.cloudTileLayer=e1,RQ().supermap.CloudTileLayer=t1,RQ().supermap.imageMapLayer=function(t,e){return new r1(t,e)},RQ().supermap.ImageMapLayer=r1,RQ().supermap.imageTileLayer=function(t,e){return new D1(t,e)},RQ().supermap.ImageTileLayer=D1,RQ().supermap.tiandituTileLayer=function(t){return new i1(t)},RQ().supermap.TiandituTileLayer=i1,RQ().supermap.tiledMapLayer=s1,RQ().supermap.TiledMapLayer=a1,RQ().supermap.wmtsLayer=o1,RQ().supermap.WMTSLayer=n1,RQ().supermap.webmap=function(t,e){return new L1(t,e)},RQ().supermap.WebMap=L1,RQ().supermap.initMap=function(t,e){return $1.apply(this,arguments)},RQ().supermap.crsFromMapJSON=t2,RQ().supermap.CartoCSSToLeaflet=m1,RQ().supermap.DefaultStyle=c1,RQ().supermap.CartoStyleMap=f1,RQ().supermap.ServerStyleMap=p1,RQ().supermap.CompOpMap=h1,RQ().supermap.circleStyle=function(t){return new I2(t)},RQ().supermap.CircleStyle=I2,RQ().supermap.cloverStyle=function(t){return new N2(t)},RQ().supermap.CloverStyle=N2,RQ().supermap.graphic=function(t){return new b1(t)},RQ().supermap.Graphic=b1,RQ().supermap.imageStyle=function(t){return new M2(t)},RQ().supermap.ImageStyle=M2,RQ().supermap.themeFeature=function(t,e){return new g1(t,e)},RQ().supermap.ThemeFeature=g1,RQ().supermap.dataFlowLayer=function(t,e){return new _2(t,e)},RQ().supermap.DataFlowLayer=_2,RQ().supermap.echartsLayer=function(t,e){return new O2(t,e)},RQ().supermap.EchartsLayer=O2,RQ().supermap.graphicLayer=function(t,e){return new H2(t,e)},RQ().supermap.GraphicLayer=H2,RQ().supermap.graphThemeLayer=function(t,e,r){return new q2(t,e,r)},RQ().supermap.GraphThemeLayer=q2,RQ().supermap.heatMapFeature=function(t,e){return new S3(t,e)},RQ().supermap.HeatMapFeature=S3,RQ().supermap.heatMapLayer=function(t,e){return new w3(t,e)},RQ().supermap.HeatMapLayer=w3,RQ().supermap.labelThemeLayer=function(t,e){return new E1(t,e)},RQ().supermap.LabelThemeLayer=E1,RQ().supermap.mapVLayer=function(t,e,r){return new g2(t,e,r)},RQ().supermap.MapVLayer=g2,RQ().supermap.rangeThemeLayer=function(t,e){return new O1(t,e)},RQ().supermap.RangeThemeLayer=O1,RQ().supermap.rankSymbolThemeLayer=function(t,e,r){return new J2(t,e,r)},RQ().supermap.RankSymbolThemeLayer=J2,RQ().supermap.tiledVectorLayer=function(t,e){return new m3(t,e)},RQ().supermap.TileVectorLayer=m3,RQ().supermap.TiledVectorLayer=m3,RQ().supermap.turfLayer=function(t){return new g3(t)},RQ().supermap.TurfLayer=g3,RQ().supermap.FGBLayer=r6,RQ().supermap.FGBLayer=function(t,e){return new r6(t,e)},RQ().supermap.unicodeMarker=function(t,e){return new R1(t,e)},RQ().supermap.UnicodeMarker=R1,RQ().supermap.uniqueThemeLayer=function(t,e){return new _1(t,e)},RQ().supermap.UniqueThemeLayer=_1,RQ().supermap.VectorTileFormat=y3,RQ().supermap.addressMatchService=function(t,e){return new m6(t,e)},RQ().supermap.AddressMatchService=m6,RQ().supermap.chartService=function(t,e){return new _6(t,e)},RQ().supermap.ChartService=_6,RQ().supermap.dataFlowService=function(t,e){return new s2(t,e)},RQ().supermap.DataFlowService=s2,RQ().supermap.datasetService=function(t,e){return new O6(t,e)},RQ().supermap.DatasetService=O6,RQ().supermap.datasourceService=function(t,e){return new E6(t,e)},RQ().supermap.DatasourceService=E6,RQ().supermap.featureService=M1,RQ().supermap.FeatureService=I1,RQ().supermap.fieldService=function(t,e){return new k6(t,e)},RQ().supermap.FieldService=k6,RQ().supermap.geoprocessingService=function(t,e){return new j6(t,e)},RQ().supermap.GeoprocessingService=j6,RQ().supermap.gridCellInfosService=function(t,e){return new A6(t,e)},RQ().supermap.GridCellInfosService=A6,RQ().supermap.imageCollectionService=function(t,e){return new y8(t,e)},RQ().supermap.ImageCollectionService=y8,RQ().supermap.imageService=function(t,e){return new h8(t,e)},RQ().supermap.ImageService=h8,RQ().supermap.layerInfoService=function(t,e){return new L6(t,e)},RQ().supermap.LayerInfoService=L6,RQ().supermap.mapService=function(t,e){return new P0(t,e)},RQ().supermap.MapService=P0,RQ().supermap.measureService=function(t,e){return new D6(t,e)},RQ().supermap.MeasureService=D6,RQ().supermap.networkAnalyst3DService=function(t,e){return new z6(t,e)},RQ().supermap.NetworkAnalyst3DService=z6,RQ().supermap.networkAnalystService=function(t,e){return new K6(t,e)},RQ().supermap.NetworkAnalystService=K6,RQ().supermap.processingService=function(t,e){return new $6(t,e)},RQ().supermap.ProcessingService=$6,RQ().supermap.queryService=function(t,e){return new t8(t,e)},RQ().supermap.QueryService=t8,RQ().supermap.ServiceBase=E0,RQ().supermap.spatialAnalystService=function(t,e){return new i8(t,e)},RQ().supermap.SpatialAnalystService=i8,RQ().supermap.themeService=function(t,e){return new a8(t,e)},RQ().supermap.ThemeService=a8,RQ().supermap.trafficTransferAnalystService=function(t,e){return new f8(t,e)},RQ().supermap.TrafficTransferAnalystService=f8,RQ().supermap.webPrintingJobService=function(t,e){return new p8(t,e)},RQ().supermap.WebPrintingJobService=p8,RQ().supermap.KnowledgeGraphService=a6,RQ().supermap.GraphMap=v6,RQ().supermap.CommonUtil=Tt},961:function(t,e,r){"use strict";var n=r(3712);t.exports=n},9784:function(t,e,r){"use strict";var n=r(6433);t.exports=n},9435:function(t,e,r){"use strict";r(7851);var n=r(5329);t.exports=n.Object.assign},8142:function(t,e,r){"use strict";r(494);var n=r(9385);t.exports=n.f("asyncIterator")},7644:function(t,e,r){"use strict";var n=r(2631),o=r(4861),i=TypeError;t.exports=function(t){if(n(t))return t;throw new i(o(t)+" is not a function")}},5650:function(t,e,r){"use strict";var n=r(3779),o=r(4861),i=TypeError;t.exports=function(t){if(n(t))return t;throw new i(o(t)+" is not a constructor")}},6728:function(t,e,r){"use strict";var n=r(883),o=String,i=TypeError;t.exports=function(t){if(n(t))return t;throw new i("Can't set "+o(t)+" as a prototype")}},6091:function(t,e,r){"use strict";var n=r(7709),o=r(7766),i=r(1807).f,a=n("unscopables"),s=Array.prototype;void 0===s[a]&&i(s,a,{configurable:!0,value:o(null)}),t.exports=function(t){s[a][t]=!0}},7007:function(t,e,r){"use strict";var n=r(893).charAt;t.exports=function(t,e,r){return e+(r?n(t,e).length:1)}},7737:function(t,e,r){"use strict";var n=r(7123),o=TypeError;t.exports=function(t,e){if(n(e,t))return t;throw new o("Incorrect invocation")}},9809:function(t,e,r){"use strict";var n=r(6220),o=String,i=TypeError;t.exports=function(t){if(n(t))return t;throw new i(o(t)+" is not an object")}},7943:function(t,e,r){"use strict";var n=r(1059),o=r(7636),i=r(428),a=function(t){return function(e,r,a){var s=n(e),u=i(s);if(0===u)return!t&&-1;var l,c=o(a,u);if(t&&r!=r){for(;u>c;)if((l=s[c++])!=l)return!0}else for(;u>c;c++)if((t||c in s)&&s[c]===r)return t||c||0;return!t&&-1}};t.exports={includes:a(!0),indexOf:a(!1)}},9084:function(t,e,r){"use strict";var n=r(4877);t.exports=function(t,e){var r=[][t];return!!r&&n(function(){r.call(null,e||function(){return 1},1)})}},6072:function(t,e,r){"use strict";var n=r(7644),o=r(6079),i=r(9213),a=r(428),s=TypeError,u="Reduce of empty array with no initial value",l=function(t){return function(e,r,l,c){var f=o(e),p=i(f),h=a(f);if(n(r),0===h&&l<2)throw new s(u);var y=t?h-1:0,d=t?-1:1;if(l<2)for(;;){if(y in p){c=p[y],y+=d;break}if(y+=d,t?y<0:h<=y)throw new s(u)}for(;t?y>=0:h>y;y+=d)y in p&&(c=r(c,p[y],y,f));return c}};t.exports={left:l(!1),right:l(!0)}},7934:function(t,e,r){"use strict";var n=r(398);t.exports=n([].slice)},8113:function(t,e,r){"use strict";var n=r(7709)("iterator"),o=!1;try{var i=0,a={next:function(){return{done:!!i++}},return:function(){o=!0}};a[n]=function(){return this},Array.from(a,function(){throw 2})}catch(t){}t.exports=function(t,e){try{if(!e&&!o)return!1}catch(t){return!1}var r=!1;try{var i={};i[n]=function(){return{next:function(){return{done:r=!0}}}},t(i)}catch(t){}return r}},4538:function(t,e,r){"use strict";var n=r(398),o=n({}.toString),i=n("".slice);t.exports=function(t){return i(o(t),8,-1)}},5229:function(t,e,r){"use strict";var n=r(3774),o=r(2631),i=r(4538),a=r(7709)("toStringTag"),s=Object,u="Arguments"===i(function(){return arguments}());t.exports=n?i:function(t){var e,r,n;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(r=function(t,e){try{return t[e]}catch(t){}}(e=s(t),a))?r:u?i(e):"Object"===(n=i(e))&&o(e.callee)?"Arguments":n}},578:function(t,e,r){"use strict";var n=r(2791),o=r(7197),i=r(1805),a=r(1807);t.exports=function(t,e,r){for(var s=o(e),u=a.f,l=i.f,c=0;c<s.length;c++){var f=s[c];n(t,f)||r&&n(r,f)||u(t,f,l(e,f))}}},5166:function(t,e,r){"use strict";var n=r(7709)("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(r){try{return e[n]=!1,"/./"[t](e)}catch(t){}}return!1}},8517:function(t,e,r){"use strict";var n=r(4877);t.exports=!n(function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype})},1035:function(t){"use strict";t.exports=function(t,e){return{value:t,done:e}}},5233:function(t,e,r){"use strict";var n=r(9234),o=r(1807),i=r(1718);t.exports=n?function(t,e,r){return o.f(t,e,i(1,r))}:function(t,e,r){return t[e]=r,t}},1718:function(t){"use strict";t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},2196:function(t,e,r){"use strict";var n=r(7773),o=r(1807);t.exports=function(t,e,r){return r.get&&n(r.get,e,{getter:!0}),r.set&&n(r.set,e,{setter:!0}),o.f(t,e,r)}},5414:function(t,e,r){"use strict";var n=r(2631),o=r(1807),i=r(7773),a=r(6507);t.exports=function(t,e,r,s){s||(s={});var u=s.enumerable,l=void 0!==s.name?s.name:e;if(n(r)&&i(r,l,s),s.global)u?t[e]=r:a(e,r);else{try{s.unsafe?t[e]&&(u=!0):delete t[e]}catch(t){}u?t[e]=r:o.f(t,e,{value:r,enumerable:!1,configurable:!s.nonConfigurable,writable:!s.nonWritable})}return t}},6507:function(t,e,r){"use strict";var n=r(1697),o=Object.defineProperty;t.exports=function(t,e){try{o(n,t,{value:e,configurable:!0,writable:!0})}catch(r){n[t]=e}return e}},9234:function(t,e,r){"use strict";var n=r(4877);t.exports=!n(function(){return 7!==Object.defineProperty({},1,{get:function(){return 7}})[1]})},2533:function(t,e,r){"use strict";var n=r(1697),o=r(6220),i=n.document,a=o(i)&&o(i.createElement);t.exports=function(t){return a?i.createElement(t):{}}},46:function(t){"use strict";t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},9842:function(t,e,r){"use strict";var n=r(2533)("span").classList,o=n&&n.constructor&&n.constructor.prototype;t.exports=o===Object.prototype?void 0:o},9616:function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=r(862),i=r(7218);t.exports=!o&&!i&&"object"==("undefined"==typeof window?"undefined":n(window))&&"object"==("undefined"==typeof document?"undefined":n(document))},862:function(t){"use strict";function e(t){"@babel/helpers - typeof";return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}t.exports="object"==("undefined"==typeof Deno?"undefined":e(Deno))&&Deno&&"object"==e(Deno.version)},5262:function(t,e,r){"use strict";var n=r(8762);t.exports=/ipad|iphone|ipod/i.test(n)&&"undefined"!=typeof Pebble},3925:function(t,e,r){"use strict";var n=r(8762);t.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(n)},7218:function(t,e,r){"use strict";var n=r(1697),o=r(4538);t.exports="process"===o(n.process)},5419:function(t,e,r){"use strict";var n=r(8762);t.exports=/web0s(?!.*chrome)/i.test(n)},8762:function(t){"use strict";t.exports="undefined"!=typeof navigator&&String(navigator.userAgent)||""},5950:function(t,e,r){"use strict";var n,o,i=r(1697),a=r(8762),s=i.process,u=i.Deno,l=s&&s.versions||u&&u.version,c=l&&l.v8;c&&(o=(n=c.split("."))[0]>0&&n[0]<4?1:+(n[0]+n[1])),!o&&a&&(!(n=a.match(/Edge\/(\d+)/))||n[1]>=74)&&(n=a.match(/Chrome\/(\d+)/))&&(o=+n[1]),t.exports=o},1009:function(t){"use strict";t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},3768:function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=r(1697),i=r(1805).f,a=r(5233),s=r(5414),u=r(6507),l=r(578),c=r(3670);t.exports=function(t,e){var r,f,p,h,y,d=t.target,v=t.global,m=t.stat;if(r=v?o:m?o[d]||u(d,{}):o[d]&&o[d].prototype)for(f in e){if(h=e[f],p=t.dontCallGetSet?(y=i(r,f))&&y.value:r[f],!c(v?f:d+(m?".":"#")+f,t.forced)&&void 0!==p){if(n(h)==n(p))continue;l(h,p)}(t.sham||p&&p.sham)&&a(h,"sham",!0),s(r,f,h,t)}}},4877:function(t){"use strict";t.exports=function(t){try{return!!t()}catch(t){return!0}}},2610:function(t,e,r){"use strict";r(1569);var n=r(9707),o=r(5414),i=r(2693),a=r(4877),s=r(7709),u=r(5233),l=s("species"),c=RegExp.prototype;t.exports=function(t,e,r,f){var p=s(t),h=!a(function(){var e={};return e[p]=function(){return 7},7!==""[t](e)}),y=h&&!a(function(){var e=!1,r=/a/;return"split"===t&&((r={}).constructor={},r.constructor[l]=function(){return r},r.flags="",r[p]=/./[p]),r.exec=function(){return e=!0,null},r[p](""),!e});if(!h||!y||r){var d=/./[p],v=e(p,""[t],function(t,e,r,o,a){var s=e.exec;return s===i||s===c.exec?h&&!a?{done:!0,value:n(d,e,r,o)}:{done:!0,value:n(t,r,e,o)}:{done:!1}});o(String.prototype,t,v[0]),o(c,p,v[1])}f&&u(c[p],"sham",!0)}},2039:function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=r(8574),i=Function.prototype,a=i.apply,s=i.call;t.exports="object"==("undefined"==typeof Reflect?"undefined":n(Reflect))&&Reflect.apply||(o?s.bind(a):function(){return s.apply(a,arguments)})},3406:function(t,e,r){"use strict";var n=r(5846),o=r(7644),i=r(8574),a=n(n.bind);t.exports=function(t,e){return o(t),void 0===e?t:i?a(t,e):function(){return t.apply(e,arguments)}}},8574:function(t,e,r){"use strict";var n=r(4877);t.exports=!n(function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")})},9707:function(t,e,r){"use strict";var n=r(8574),o=Function.prototype.call;t.exports=n?o.bind(o):function(){return o.apply(o,arguments)}},2756:function(t,e,r){"use strict";var n=r(9234),o=r(2791),i=Function.prototype,a=n&&Object.getOwnPropertyDescriptor,s=o(i,"name"),u=s&&"something"===function(){}.name,l=s&&(!n||n&&a(i,"name").configurable);t.exports={EXISTS:s,PROPER:u,CONFIGURABLE:l}},6700:function(t,e,r){"use strict";var n=r(398),o=r(7644);t.exports=function(t,e,r){try{return n(o(Object.getOwnPropertyDescriptor(t,e)[r]))}catch(t){}}},5846:function(t,e,r){"use strict";var n=r(4538),o=r(398);t.exports=function(t){if("Function"===n(t))return o(t)}},398:function(t,e,r){"use strict";var n=r(8574),o=Function.prototype,i=o.call,a=n&&o.bind.bind(i,i);t.exports=n?a:function(t){return function(){return i.apply(t,arguments)}}},5189:function(t,e,r){"use strict";var n=r(1697),o=r(2631);t.exports=function(t,e){return arguments.length<2?(r=n[t],o(r)?r:void 0):n[t]&&n[t][e];var r}},5933:function(t,e,r){"use strict";var n=r(5229),o=r(2968),i=r(155),a=r(2347),s=r(7709)("iterator");t.exports=function(t){if(!i(t))return o(t,s)||o(t,"@@iterator")||a[n(t)]}},5795:function(t,e,r){"use strict";var n=r(9707),o=r(7644),i=r(9809),a=r(4861),s=r(5933),u=TypeError;t.exports=function(t,e){var r=arguments.length<2?s(t):e;if(o(r))return i(n(r,t));throw new u(a(t)+" is not iterable")}},2968:function(t,e,r){"use strict";var n=r(7644),o=r(155);t.exports=function(t,e){var r=t[e];return o(r)?void 0:n(r)}},5560:function(t,e,r){"use strict";var n=r(398),o=r(6079),i=Math.floor,a=n("".charAt),s=n("".replace),u=n("".slice),l=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,c=/\$([$&'`]|\d{1,2})/g;t.exports=function(t,e,r,n,f,p){var h=r+t.length,y=n.length,d=c;return void 0!==f&&(f=o(f),d=l),s(p,d,function(o,s){var l;switch(a(s,0)){case"$":return"$";case"&":return t;case"`":return u(e,0,r);case"'":return u(e,h);case"<":l=f[u(s,1,-1)];break;default:var c=+s;if(0===c)return o;if(c>y){var p=i(c/10);return 0===p?o:p<=y?void 0===n[p-1]?a(s,1):n[p-1]+a(s,1):o}l=n[c-1]}return void 0===l?"":l})}},1697:function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=function(t){return t&&t.Math===Math&&t};t.exports=o("object"==("undefined"==typeof globalThis?"undefined":n(globalThis))&&globalThis)||o("object"==("undefined"==typeof window?"undefined":n(window))&&window)||o("object"==("undefined"==typeof self?"undefined":n(self))&&self)||o("object"==(void 0===r.g?"undefined":n(r.g))&&r.g)||o("object"==n(this)&&this)||function(){return this}()||Function("return this")()},2791:function(t,e,r){"use strict";var n=r(398),o=r(6079),i=n({}.hasOwnProperty);t.exports=Object.hasOwn||function(t,e){return i(o(t),e)}},8551:function(t){"use strict";t.exports={}},8079:function(t){"use strict";t.exports=function(t,e){try{1===arguments.length?console.error(t):console.error(t,e)}catch(t){}}},511:function(t,e,r){"use strict";var n=r(5189);t.exports=n("document","documentElement")},107:function(t,e,r){"use strict";var n=r(9234),o=r(4877),i=r(2533);t.exports=!n&&!o(function(){return 7!==Object.defineProperty(i("div"),"a",{get:function(){return 7}}).a})},9213:function(t,e,r){"use strict";var n=r(398),o=r(4877),i=r(4538),a=Object,s=n("".split);t.exports=o(function(){return!a("z").propertyIsEnumerable(0)})?function(t){return"String"===i(t)?s(t,""):a(t)}:a},3128:function(t,e,r){"use strict";var n=r(398),o=r(2631),i=r(4243),a=n(Function.toString);o(i.inspectSource)||(i.inspectSource=function(t){return a(t)}),t.exports=i.inspectSource},7863:function(t,e,r){"use strict";var n,o,i,a=r(5032),s=r(1697),u=r(6220),l=r(5233),c=r(2791),f=r(4243),p=r(109),h=r(8551),y=s.TypeError,d=s.WeakMap;if(a||f.state){var v=f.state||(f.state=new d);v.get=v.get,v.has=v.has,v.set=v.set,n=function(t,e){if(v.has(t))throw new y("Object already initialized");return e.facade=t,v.set(t,e),e},o=function(t){return v.get(t)||{}},i=function(t){return v.has(t)}}else{var m=p("state");h[m]=!0,n=function(t,e){if(c(t,m))throw new y("Object already initialized");return e.facade=t,l(t,m,e),e},o=function(t){return c(t,m)?t[m]:{}},i=function(t){return c(t,m)}}t.exports={set:n,get:o,has:i,enforce:function(t){return i(t)?o(t):n(t,{})},getterFor:function(t){return function(e){var r;if(!u(e)||(r=o(e)).type!==t)throw new y("Incompatible receiver, "+t+" required");return r}}}},8223:function(t,e,r){"use strict";var n=r(7709),o=r(2347),i=n("iterator"),a=Array.prototype;t.exports=function(t){return void 0!==t&&(o.Array===t||a[i]===t)}},3494:function(t,e,r){"use strict";var n=r(4538);t.exports=Array.isArray||function(t){return"Array"===n(t)}},2631:function(t){"use strict";function e(t){"@babel/helpers - typeof";return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var r="object"==("undefined"==typeof document?"undefined":e(document))&&document.all;t.exports=void 0===r&&void 0!==r?function(t){return"function"==typeof t||t===r}:function(t){return"function"==typeof t}},3779:function(t,e,r){"use strict";var n=r(398),o=r(4877),i=r(2631),a=r(5229),s=r(5189),u=r(3128),l=function(){},c=s("Reflect","construct"),f=/^\s*(?:class|function)\b/,p=n(f.exec),h=!f.test(l),y=function(t){if(!i(t))return!1;try{return c(l,[],t),!0}catch(t){return!1}},d=function(t){if(!i(t))return!1;switch(a(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return h||!!p(f,u(t))}catch(t){return!0}};d.sham=!0,t.exports=!c||o(function(){var t;return y(y.call)||!y(Object)||!y(function(){t=!0})||t})?d:y},3670:function(t,e,r){"use strict";var n=r(4877),o=r(2631),i=/#|\.prototype\./,a=function(t,e){var r=u[s(t)];return r===c||r!==l&&(o(e)?n(e):!!e)},s=a.normalize=function(t){return String(t).replace(i,".").toLowerCase()},u=a.data={},l=a.NATIVE="N",c=a.POLYFILL="P";t.exports=a},155:function(t){"use strict";t.exports=function(t){return null===t||void 0===t}},6220:function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=r(2631);t.exports=function(t){return"object"==n(t)?null!==t:o(t)}},883:function(t,e,r){"use strict";var n=r(6220);t.exports=function(t){return n(t)||null===t}},497:function(t){"use strict";t.exports=!1},7078:function(t,e,r){"use strict";var n=r(6220),o=r(4538),i=r(7709)("match");t.exports=function(t){var e;return n(t)&&(void 0!==(e=t[i])?!!e:"RegExp"===o(t))}},3443:function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=r(5189),i=r(2631),a=r(7123),s=r(5970),u=Object;t.exports=s?function(t){return"symbol"==n(t)}:function(t){var e=o("Symbol");return i(e)&&a(e.prototype,u(t))}},9318:function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=r(3406),i=r(9707),a=r(9809),s=r(4861),u=r(8223),l=r(428),c=r(7123),f=r(5795),p=r(5933),h=r(2861),y=TypeError,d=function(t,e){this.stopped=t,this.result=e},v=d.prototype;t.exports=function(t,e,r){var m,b,g,S,w,_,O,E=r&&r.that,P=!(!r||!r.AS_ENTRIES),x=!(!r||!r.IS_RECORD),T=!(!r||!r.IS_ITERATOR),C=!(!r||!r.INTERRUPTED),k=o(e,E),A=function(t){return m&&h(m,"normal",t),new d(!0,t)},j=function(t){return P?(a(t),C?k(t[0],t[1],A):k(t[0],t[1])):C?k(t,A):k(t)};if(x)m=t.iterator;else if(T)m=t;else{if(!(b=p(t)))throw new y(s(t)+" is not iterable");if(u(b)){for(g=0,S=l(t);S>g;g++)if((w=j(t[g]))&&c(v,w))return w;return new d(!1)}m=f(t,b)}for(_=x?t.next:m.next;!(O=i(_,m)).done;){try{w=j(O.value)}catch(t){h(m,"throw",t)}if("object"==n(w)&&w&&c(v,w))return w}return new d(!1)}},2861:function(t,e,r){"use strict";var n=r(9707),o=r(9809),i=r(2968);t.exports=function(t,e,r){var a,s;o(t);try{if(!(a=i(t,"return"))){if("throw"===e)throw r;return r}a=n(a,t)}catch(t){s=!0,a=t}if("throw"===e)throw r;if(s)throw a;return o(a),r}},3932:function(t,e,r){"use strict";var n=r(1983).IteratorPrototype,o=r(7766),i=r(1718),a=r(7625),s=r(2347),u=function(){return this};t.exports=function(t,e,r,l){var c=e+" Iterator";return t.prototype=o(n,{next:i(+!l,r)}),a(t,c,!1,!0),s[c]=u,t}},2514:function(t,e,r){"use strict";var n=r(3768),o=r(9707),i=r(497),a=r(2756),s=r(2631),u=r(3932),l=r(4609),c=r(5949),f=r(7625),p=r(5233),h=r(5414),y=r(7709),d=r(2347),v=r(1983),m=a.PROPER,b=a.CONFIGURABLE,g=v.IteratorPrototype,S=v.BUGGY_SAFARI_ITERATORS,w=y("iterator"),_=function(){return this};t.exports=function(t,e,r,a,y,v,O){u(r,e,a);var E,P,x,T=function(t){if(t===y&&N)return N;if(!S&&t&&t in A)return A[t];switch(t){case"keys":case"values":case"entries":return function(){return new r(this,t)}}return function(){return new r(this)}},C=e+" Iterator",k=!1,A=t.prototype,j=A[w]||A["@@iterator"]||y&&A[y],N=!S&&j||T(y),I="Array"===e&&A.entries||j;if(I&&(E=l(I.call(new t)))!==Object.prototype&&E.next&&(i||l(E)===g||(c?c(E,g):s(E[w])||h(E,w,_)),f(E,C,!0,!0),i&&(d[C]=_)),m&&"values"===y&&j&&"values"!==j.name&&(!i&&b?p(A,"name","values"):(k=!0,N=function(){return o(j,this)})),y)if(P={values:T("values"),keys:v?N:T("keys"),entries:T("entries")},O)for(x in P)!S&&!k&&x in A||h(A,x,P[x]);else n({target:e,proto:!0,forced:S||k},P);return i&&!O||A[w]===N||h(A,w,N,{name:y}),d[e]=N,P}},1983:function(t,e,r){"use strict";var n,o,i,a=r(4877),s=r(2631),u=r(6220),l=r(7766),c=r(4609),f=r(5414),p=r(7709),h=r(497),y=p("iterator"),d=!1;[].keys&&("next"in(i=[].keys())?(o=c(c(i)))!==Object.prototype&&(n=o):d=!0),!u(n)||a(function(){var t={};return n[y].call(t)!==t})?n={}:h&&(n=l(n)),s(n[y])||f(n,y,function(){return this}),t.exports={IteratorPrototype:n,BUGGY_SAFARI_ITERATORS:d}},2347:function(t){"use strict";t.exports={}},428:function(t,e,r){"use strict";var n=r(9800);t.exports=function(t){return n(t.length)}},7773:function(t,e,r){"use strict";var n=r(398),o=r(4877),i=r(2631),a=r(2791),s=r(9234),u=r(2756).CONFIGURABLE,l=r(3128),c=r(7863),f=c.enforce,p=c.get,h=String,y=Object.defineProperty,d=n("".slice),v=n("".replace),m=n([].join),b=s&&!o(function(){return 8!==y(function(){},"length",{value:8}).length}),g=String(String).split("String"),S=t.exports=function(t,e,r){"Symbol("===d(h(e),0,7)&&(e="["+v(h(e),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),r&&r.getter&&(e="get "+e),r&&r.setter&&(e="set "+e),(!a(t,"name")||u&&t.name!==e)&&(s?y(t,"name",{value:e,configurable:!0}):t.name=e),b&&r&&a(r,"arity")&&t.length!==r.arity&&y(t,"length",{value:r.arity});try{r&&a(r,"constructor")&&r.constructor?s&&y(t,"prototype",{writable:!1}):t.prototype&&(t.prototype=void 0)}catch(t){}var n=f(t);return a(n,"source")||(n.source=m(g,"string"==typeof e?e:"")),t};Function.prototype.toString=S(function(){return i(this)&&p(this).source||l(this)},"toString")},7443:function(t){"use strict";var e=Math.ceil,r=Math.floor;t.exports=Math.trunc||function(t){var n=+t;return(n>0?r:e)(n)}},453:function(t,e,r){"use strict";var n,o,i,a,s,u=r(1697),l=r(4847),c=r(3406),f=r(755).set,p=r(7975),h=r(3925),y=r(5262),d=r(5419),v=r(7218),m=u.MutationObserver||u.WebKitMutationObserver,b=u.document,g=u.process,S=u.Promise,w=l("queueMicrotask");if(!w){var _=new p,O=function(){var t,e;for(v&&(t=g.domain)&&t.exit();e=_.get();)try{e()}catch(t){throw _.head&&n(),t}t&&t.enter()};h||v||d||!m||!b?!y&&S&&S.resolve?((a=S.resolve(void 0)).constructor=S,s=c(a.then,a),n=function(){s(O)}):v?n=function(){g.nextTick(O)}:(f=c(f,u),n=function(){f(O)}):(o=!0,i=b.createTextNode(""),new m(O).observe(i,{characterData:!0}),n=function(){i.data=o=!o}),w=function(t){_.head||n(),_.add(t)}}t.exports=w},3985:function(t,e,r){"use strict";var n=r(7644),o=TypeError;t.exports.f=function(t){return new function(t){var e,r;this.promise=new t(function(t,n){if(void 0!==e||void 0!==r)throw new o("Bad Promise constructor");e=t,r=n}),this.resolve=n(e),this.reject=n(r)}(t)}},4249:function(t,e,r){"use strict";var n=r(7078),o=TypeError;t.exports=function(t){if(n(t))throw new o("The method doesn't accept regular expressions");return t}},6355:function(t,e,r){"use strict";var n=r(9234),o=r(398),i=r(9707),a=r(4877),s=r(3334),u=r(791),l=r(15),c=r(6079),f=r(9213),p=Object.assign,h=Object.defineProperty,y=o([].concat);t.exports=!p||a(function(){if(n&&1!==p({b:1},p(h({},"a",{enumerable:!0,get:function(){h(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var t={},e={},r=Symbol("assign detection");return t[r]=7,"abcdefghijklmnopqrst".split("").forEach(function(t){e[t]=t}),7!==p({},t)[r]||"abcdefghijklmnopqrst"!==s(p({},e)).join("")})?function(t,e){for(var r=c(t),o=arguments.length,a=1,p=u.f,h=l.f;o>a;)for(var d,v=f(arguments[a++]),m=p?y(s(v),p(v)):s(v),b=m.length,g=0;b>g;)d=m[g++],n&&!i(h,v,d)||(r[d]=v[d]);return r}:p},7766:function(t,e,r){"use strict";var n,o=r(9809),i=r(9507),a=r(1009),s=r(8551),u=r(511),l=r(2533),c=r(109)("IE_PROTO"),f=function(){},p=function(t){return"<script>"+t+"<\/script>"},h=function(t){t.write(p("")),t.close();var e=t.parentWindow.Object;return t=null,e},y=function(){try{n=new ActiveXObject("htmlfile")}catch(t){}var t,e;y="undefined"!=typeof document?document.domain&&n?h(n):((e=l("iframe")).style.display="none",u.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(p("document.F=Object")),t.close(),t.F):h(n);for(var r=a.length;r--;)delete y.prototype[a[r]];return y()};s[c]=!0,t.exports=Object.create||function(t,e){var r;return null!==t?(f.prototype=o(t),r=new f,f.prototype=null,r[c]=t):r=y(),void 0===e?r:i.f(r,e)}},9507:function(t,e,r){"use strict";var n=r(9234),o=r(4796),i=r(1807),a=r(9809),s=r(1059),u=r(3334);e.f=n&&!o?Object.defineProperties:function(t,e){a(t);for(var r,n=s(e),o=u(e),l=o.length,c=0;l>c;)i.f(t,r=o[c++],n[r]);return t}},1807:function(t,e,r){"use strict";var n=r(9234),o=r(107),i=r(4796),a=r(9809),s=r(6779),u=TypeError,l=Object.defineProperty,c=Object.getOwnPropertyDescriptor;e.f=n?i?function(t,e,r){if(a(t),e=s(e),a(r),"function"==typeof t&&"prototype"===e&&"value"in r&&"writable"in r&&!r.writable){var n=c(t,e);n&&n.writable&&(t[e]=r.value,r={configurable:"configurable"in r?r.configurable:n.configurable,enumerable:"enumerable"in r?r.enumerable:n.enumerable,writable:!1})}return l(t,e,r)}:l:function(t,e,r){if(a(t),e=s(e),a(r),o)try{return l(t,e,r)}catch(t){}if("get"in r||"set"in r)throw new u("Accessors not supported");return"value"in r&&(t[e]=r.value),t}},1805:function(t,e,r){"use strict";var n=r(9234),o=r(9707),i=r(15),a=r(1718),s=r(1059),u=r(6779),l=r(2791),c=r(107),f=Object.getOwnPropertyDescriptor;e.f=n?f:function(t,e){if(t=s(t),e=u(e),c)try{return f(t,e)}catch(t){}if(l(t,e))return a(!o(i.f,t,e),t[e])}},3602:function(t,e,r){"use strict";var n=r(7386),o=r(1009).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return n(t,o)}},791:function(t,e){"use strict";e.f=Object.getOwnPropertySymbols},4609:function(t,e,r){"use strict";var n=r(2791),o=r(2631),i=r(6079),a=r(109),s=r(8517),u=a("IE_PROTO"),l=Object,c=l.prototype;t.exports=s?l.getPrototypeOf:function(t){var e=i(t);if(n(e,u))return e[u];var r=e.constructor;return o(r)&&e instanceof r?r.prototype:e instanceof l?c:null}},7123:function(t,e,r){"use strict";var n=r(398);t.exports=n({}.isPrototypeOf)},7386:function(t,e,r){"use strict";var n=r(398),o=r(2791),i=r(1059),a=r(7943).indexOf,s=r(8551),u=n([].push);t.exports=function(t,e){var r,n=i(t),l=0,c=[];for(r in n)!o(s,r)&&o(n,r)&&u(c,r);for(;e.length>l;)o(n,r=e[l++])&&(~a(c,r)||u(c,r));return c}},3334:function(t,e,r){"use strict";var n=r(7386),o=r(1009);t.exports=Object.keys||function(t){return n(t,o)}},15:function(t,e){"use strict";var r={}.propertyIsEnumerable,n=Object.getOwnPropertyDescriptor,o=n&&!r.call({1:2},1);e.f=o?function(t){var e=n(this,t);return!!e&&e.enumerable}:r},5949:function(t,e,r){"use strict";var n=r(6700),o=r(6220),i=r(1308),a=r(6728);t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,r={};try{(t=n(Object.prototype,"__proto__","set"))(r,[]),e=r instanceof Array}catch(t){}return function(r,n){return i(r),a(n),o(r)?(e?t(r,n):r.__proto__=n,r):r}}():void 0)},5720:function(t,e,r){"use strict";var n=r(9707),o=r(2631),i=r(6220),a=TypeError;t.exports=function(t,e){var r,s;if("string"===e&&o(r=t.toString)&&!i(s=n(r,t)))return s;if(o(r=t.valueOf)&&!i(s=n(r,t)))return s;if("string"!==e&&o(r=t.toString)&&!i(s=n(r,t)))return s;throw new a("Can't convert object to primitive value")}},7197:function(t,e,r){"use strict";var n=r(5189),o=r(398),i=r(3602),a=r(791),s=r(9809),u=o([].concat);t.exports=n("Reflect","ownKeys")||function(t){var e=i.f(s(t)),r=a.f;return r?u(e,r(t)):e}},5329:function(t,e,r){"use strict";var n=r(1697);t.exports=n},8325:function(t){"use strict";t.exports=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}}},1778:function(t,e,r){"use strict";var n=r(1697),o=r(2628),i=r(2631),a=r(3670),s=r(3128),u=r(7709),l=r(9616),c=r(862),f=r(497),p=r(5950),h=o&&o.prototype,y=u("species"),d=!1,v=i(n.PromiseRejectionEvent),m=a("Promise",function(){var t=s(o),e=t!==String(o);if(!e&&66===p)return!0;if(f&&(!h.catch||!h.finally))return!0;if(!p||p<51||!/native code/.test(t)){var r=new o(function(t){t(1)}),n=function(t){t(function(){},function(){})};if((r.constructor={})[y]=n,!(d=r.then(function(){})instanceof n))return!0}return!e&&(l||c)&&!v});t.exports={CONSTRUCTOR:m,REJECTION_EVENT:v,SUBCLASSING:d}},2628:function(t,e,r){"use strict";var n=r(1697);t.exports=n.Promise},4168:function(t,e,r){"use strict";var n=r(9809),o=r(6220),i=r(3985);t.exports=function(t,e){if(n(t),o(e)&&e.constructor===t)return e;var r=i.f(t);return(0,r.resolve)(e),r.promise}},1147:function(t,e,r){"use strict";var n=r(2628),o=r(8113),i=r(1778).CONSTRUCTOR;t.exports=i||!o(function(t){n.all(t).then(void 0,function(){})})},7975:function(t){"use strict";var e=function(){this.head=null,this.tail=null};e.prototype={add:function(t){var e={item:t,next:null},r=this.tail;r?r.next=e:this.head=e,this.tail=e},get:function(){var t=this.head;if(t)return null===(this.head=t.next)&&(this.tail=null),t.item}},t.exports=e},1872:function(t,e,r){"use strict";var n=r(9707),o=r(9809),i=r(2631),a=r(4538),s=r(2693),u=TypeError;t.exports=function(t,e){var r=t.exec;if(i(r)){var l=n(r,t,e);return null!==l&&o(l),l}if("RegExp"===a(t))return n(s,t,e);throw new u("RegExp#exec called on incompatible receiver")}},2693:function(t,e,r){"use strict";var n,o,i=r(9707),a=r(398),s=r(1673),u=r(2065),l=r(8615),c=r(4499),f=r(7766),p=r(7863).get,h=r(5753),y=r(636),d=c("native-string-replace",String.prototype.replace),v=RegExp.prototype.exec,m=v,b=a("".charAt),g=a("".indexOf),S=a("".replace),w=a("".slice),_=(o=/b*/g,i(v,n=/a/,"a"),i(v,o,"a"),0!==n.lastIndex||0!==o.lastIndex),O=l.BROKEN_CARET,E=void 0!==/()??/.exec("")[1];(_||E||O||h||y)&&(m=function(t){var e,r,n,o,a,l,c,h=this,y=p(h),P=s(t),x=y.raw;if(x)return x.lastIndex=h.lastIndex,e=i(m,x,P),h.lastIndex=x.lastIndex,e;var T=y.groups,C=O&&h.sticky,k=i(u,h),A=h.source,j=0,N=P;if(C&&(k=S(k,"y",""),-1===g(k,"g")&&(k+="g"),N=w(P,h.lastIndex),h.lastIndex>0&&(!h.multiline||h.multiline&&"\n"!==b(P,h.lastIndex-1))&&(A="(?: "+A+")",N=" "+N,j++),r=new RegExp("^(?:"+A+")",k)),E&&(r=new RegExp("^"+A+"$(?!\\s)",k)),_&&(n=h.lastIndex),o=i(v,C?r:h,N),C?o?(o.input=w(o.input,j),o[0]=w(o[0],j),o.index=h.lastIndex,h.lastIndex+=o[0].length):h.lastIndex=0:_&&o&&(h.lastIndex=h.global?o.index+o[0].length:n),E&&o&&o.length>1&&i(d,o[0],r,function(){for(a=1;a<arguments.length-2;a++)void 0===arguments[a]&&(o[a]=void 0)}),o&&T)for(o.groups=l=f(null),a=0;a<T.length;a++)l[(c=T[a])[0]]=o[c[1]];return o}),t.exports=m},2065:function(t,e,r){"use strict";var n=r(9809);t.exports=function(){var t=n(this),e="";return t.hasIndices&&(e+="d"),t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.unicodeSets&&(e+="v"),t.sticky&&(e+="y"),e}},8140:function(t,e,r){"use strict";var n=r(9707),o=r(2791),i=r(7123),a=r(2065),s=RegExp.prototype;t.exports=function(t){var e=t.flags;return void 0!==e||"flags"in s||o(t,"flags")||!i(s,t)?e:n(a,t)}},8615:function(t,e,r){"use strict";var n=r(4877),o=r(1697).RegExp,i=n(function(){var t=o("a","y");return t.lastIndex=2,null!==t.exec("abcd")}),a=i||n(function(){return!o("a","y").sticky}),s=i||n(function(){var t=o("^r","gy");return t.lastIndex=2,null!==t.exec("str")});t.exports={BROKEN_CARET:s,MISSED_STICKY:a,UNSUPPORTED_Y:i}},5753:function(t,e,r){"use strict";var n=r(4877),o=r(1697).RegExp;t.exports=n(function(){var t=o(".","s");return!(t.dotAll&&t.test("\n")&&"s"===t.flags)})},636:function(t,e,r){"use strict";var n=r(4877),o=r(1697).RegExp;t.exports=n(function(){var t=o("(?<a>b)","g");return"b"!==t.exec("b").groups.a||"bc"!=="b".replace(t,"$<a>c")})},1308:function(t,e,r){"use strict";var n=r(155),o=TypeError;t.exports=function(t){if(n(t))throw new o("Can't call method on "+t);return t}},4847:function(t,e,r){"use strict";var n=r(1697),o=r(9234),i=Object.getOwnPropertyDescriptor;t.exports=function(t){if(!o)return n[t];var e=i(n,t);return e&&e.value}},2767:function(t,e,r){"use strict";var n=r(5189),o=r(2196),i=r(7709),a=r(9234),s=i("species");t.exports=function(t){var e=n(t);a&&e&&!e[s]&&o(e,s,{configurable:!0,get:function(){return this}})}},7625:function(t,e,r){"use strict";var n=r(1807).f,o=r(2791),i=r(7709)("toStringTag");t.exports=function(t,e,r){t&&!r&&(t=t.prototype),t&&!o(t,i)&&n(t,i,{configurable:!0,value:e})}},109:function(t,e,r){"use strict";var n=r(4499),o=r(606),i=n("keys");t.exports=function(t){return i[t]||(i[t]=o(t))}},4243:function(t,e,r){"use strict";var n=r(497),o=r(1697),i=r(6507),a=t.exports=o["__core-js_shared__"]||i("__core-js_shared__",{});(a.versions||(a.versions=[])).push({version:"3.37.0",mode:n?"pure":"global",copyright:"© 2014-2024 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.37.0/LICENSE",source:"https://github.com/zloirock/core-js"})},4499:function(t,e,r){"use strict";var n=r(4243);t.exports=function(t,e){return n[t]||(n[t]=e||{})}},9535:function(t,e,r){"use strict";var n=r(9809),o=r(5650),i=r(155),a=r(7709)("species");t.exports=function(t,e){var r,s=n(t).constructor;return void 0===s||i(r=n(s)[a])?e:o(r)}},893:function(t,e,r){"use strict";var n=r(398),o=r(7105),i=r(1673),a=r(1308),s=n("".charAt),u=n("".charCodeAt),l=n("".slice),c=function(t){return function(e,r){var n,c,f=i(a(e)),p=o(r),h=f.length;return p<0||p>=h?t?"":void 0:(n=u(f,p))<55296||n>56319||p+1===h||(c=u(f,p+1))<56320||c>57343?t?s(f,p):n:t?l(f,p,p+2):c-56320+(n-55296<<10)+65536}};t.exports={codeAt:c(!1),charAt:c(!0)}},2536:function(t,e,r){"use strict";var n=r(2756).PROPER,o=r(4877),i=r(2178);t.exports=function(t){return o(function(){return!!i[t]()||"​᠎"!=="​᠎"[t]()||n&&i[t].name!==t})}},9300:function(t,e,r){"use strict";var n=r(398),o=r(1308),i=r(1673),a=r(2178),s=n("".replace),u=RegExp("^["+a+"]+"),l=RegExp("(^|[^"+a+"])["+a+"]+$"),c=function(t){return function(e){var r=i(o(e));return 1&t&&(r=s(r,u,"")),2&t&&(r=s(r,l,"$1")),r}};t.exports={start:c(1),end:c(2),trim:c(3)}},7161:function(t,e,r){"use strict";var n=r(5950),o=r(4877),i=r(1697).String;t.exports=!!Object.getOwnPropertySymbols&&!o(function(){var t=Symbol("symbol detection");return!i(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&n&&n<41})},755:function(t,e,r){"use strict";var n,o,i,a,s=r(1697),u=r(2039),l=r(3406),c=r(2631),f=r(2791),p=r(4877),h=r(511),y=r(7934),d=r(2533),v=r(934),m=r(3925),b=r(7218),g=s.setImmediate,S=s.clearImmediate,w=s.process,_=s.Dispatch,O=s.Function,E=s.MessageChannel,P=s.String,x=0,T={};p(function(){n=s.location});var C=function(t){if(f(T,t)){var e=T[t];delete T[t],e()}},k=function(t){return function(){C(t)}},A=function(t){C(t.data)},j=function(t){s.postMessage(P(t),n.protocol+"//"+n.host)};g&&S||(g=function(t){v(arguments.length,1);var e=c(t)?t:O(t),r=y(arguments,1);return T[++x]=function(){u(e,void 0,r)},o(x),x},S=function(t){delete T[t]},b?o=function(t){w.nextTick(k(t))}:_&&_.now?o=function(t){_.now(k(t))}:E&&!m?(a=(i=new E).port2,i.port1.onmessage=A,o=l(a.postMessage,a)):s.addEventListener&&c(s.postMessage)&&!s.importScripts&&n&&"file:"!==n.protocol&&!p(j)?(o=j,s.addEventListener("message",A,!1)):o="onreadystatechange"in d("script")?function(t){h.appendChild(d("script")).onreadystatechange=function(){h.removeChild(this),C(t)}}:function(t){setTimeout(k(t),0)}),t.exports={set:g,clear:S}},7636:function(t,e,r){"use strict";var n=r(7105),o=Math.max,i=Math.min;t.exports=function(t,e){var r=n(t);return r<0?o(r+e,0):i(r,e)}},1059:function(t,e,r){"use strict";var n=r(9213),o=r(1308);t.exports=function(t){return n(o(t))}},7105:function(t,e,r){"use strict";var n=r(7443);t.exports=function(t){var e=+t;return e!=e||0===e?0:n(e)}},9800:function(t,e,r){"use strict";var n=r(7105),o=Math.min;t.exports=function(t){var e=n(t);return e>0?o(e,9007199254740991):0}},6079:function(t,e,r){"use strict";var n=r(1308),o=Object;t.exports=function(t){return o(n(t))}},8167:function(t,e,r){"use strict";var n=r(9707),o=r(6220),i=r(3443),a=r(2968),s=r(5720),u=r(7709),l=TypeError,c=u("toPrimitive");t.exports=function(t,e){if(!o(t)||i(t))return t;var r,u=a(t,c);if(u){if(void 0===e&&(e="default"),r=n(u,t,e),!o(r)||i(r))return r;throw new l("Can't convert object to primitive value")}return void 0===e&&(e="number"),s(t,e)}},6779:function(t,e,r){"use strict";var n=r(8167),o=r(3443);t.exports=function(t){var e=n(t,"string");return o(e)?e:e+""}},3774:function(t,e,r){"use strict";var n={};n[r(7709)("toStringTag")]="z",t.exports="[object z]"===String(n)},1673:function(t,e,r){"use strict";var n=r(5229),o=String;t.exports=function(t){if("Symbol"===n(t))throw new TypeError("Cannot convert a Symbol value to a string");return o(t)}},4861:function(t){"use strict";var e=String;t.exports=function(t){try{return e(t)}catch(t){return"Object"}}},606:function(t,e,r){"use strict";var n=r(398),o=0,i=Math.random(),a=n(1..toString);t.exports=function(t){return"Symbol("+(void 0===t?"":t)+")_"+a(++o+i,36)}},5970:function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=r(7161);t.exports=o&&!Symbol.sham&&"symbol"==n(Symbol.iterator)},4796:function(t,e,r){"use strict";var n=r(9234),o=r(4877);t.exports=n&&o(function(){return 42!==Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype})},934:function(t){"use strict";var e=TypeError;t.exports=function(t,r){if(t<r)throw new e("Not enough arguments");return t}},5032:function(t,e,r){"use strict";var n=r(1697),o=r(2631),i=n.WeakMap;t.exports=o(i)&&/native code/.test(String(i))},2461:function(t,e,r){"use strict";var n=r(5329),o=r(2791),i=r(9385),a=r(1807).f;t.exports=function(t){var e=n.Symbol||(n.Symbol={});o(e,t)||a(e,t,{value:i.f(t)})}},9385:function(t,e,r){"use strict";var n=r(7709);e.f=n},7709:function(t,e,r){"use strict";var n=r(1697),o=r(4499),i=r(2791),a=r(606),s=r(7161),u=r(5970),l=n.Symbol,c=o("wks"),f=u?l.for||l:l&&l.withoutSetter||a;t.exports=function(t){return i(c,t)||(c[t]=s&&i(l,t)?l[t]:f("Symbol."+t)),c[t]}},2178:function(t){"use strict";t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},2114:function(t,e,r){"use strict";var n=r(3768),o=r(5846),i=r(7943).indexOf,a=r(9084),s=o([].indexOf),u=!!s&&1/s([1],1,-0)<0;n({target:"Array",proto:!0,forced:u||!a("indexOf")},{indexOf:function(t){var e=arguments.length>1?arguments[1]:void 0;return u?s(this,t,e)||0:i(this,t,e)}})},6678:function(t,e,r){"use strict";var n=r(1059),o=r(6091),i=r(2347),a=r(7863),s=r(1807).f,u=r(2514),l=r(1035),c=r(497),f=r(9234),p=a.set,h=a.getterFor("Array Iterator");t.exports=u(Array,"Array",function(t,e){p(this,{type:"Array Iterator",target:n(t),index:0,kind:e})},function(){var t=h(this),e=t.target,r=t.index++;if(!e||r>=e.length)return t.target=void 0,l(void 0,!0);switch(t.kind){case"keys":return l(r,!1);case"values":return l(e[r],!1)}return l([r,e[r]],!1)},"values");var y=i.Arguments=i.Array;if(o("keys"),o("values"),o("entries"),!c&&f&&"values"!==y.name)try{s(y,"name",{value:"values"})}catch(t){}},3658:function(t,e,r){"use strict";var n=r(3768),o=r(6072).left,i=r(9084),a=r(5950);n({target:"Array",proto:!0,forced:!r(7218)&&a>79&&a<83||!i("reduce")},{reduce:function(t){var e=arguments.length;return o(this,t,e,e>1?arguments[1]:void 0)}})},888:function(t,e,r){"use strict";var n=r(3768),o=r(398),i=r(3494),a=o([].reverse),s=[1,2];n({target:"Array",proto:!0,forced:String(s)===String(s.reverse())},{reverse:function(){return i(this)&&(this.length=this.length),a(this)}})},7851:function(t,e,r){"use strict";var n=r(3768),o=r(6355);n({target:"Object",stat:!0,arity:2,forced:Object.assign!==o},{assign:o})},6717:function(t,e,r){"use strict";var n=r(3768),o=r(9707),i=r(7644),a=r(3985),s=r(8325),u=r(9318);n({target:"Promise",stat:!0,forced:r(1147)},{all:function(t){var e=this,r=a.f(e),n=r.resolve,l=r.reject,c=s(function(){var r=i(e.resolve),a=[],s=0,c=1;u(t,function(t){var i=s++,u=!1;c++,o(r,e,t).then(function(t){u||(u=!0,a[i]=t,--c||n(a))},l)}),--c||n(a)});return c.error&&l(c.value),r.promise}})},4165:function(t,e,r){"use strict";var n=r(3768),o=r(497),i=r(1778).CONSTRUCTOR,a=r(2628),s=r(5189),u=r(2631),l=r(5414),c=a&&a.prototype;if(n({target:"Promise",proto:!0,forced:i,real:!0},{catch:function(t){return this.then(void 0,t)}}),!o&&u(a)){var f=s("Promise").prototype.catch;c.catch!==f&&l(c,"catch",f,{unsafe:!0})}},118:function(t,e,r){"use strict";var n,o,i,a=r(3768),s=r(497),u=r(7218),l=r(1697),c=r(9707),f=r(5414),p=r(5949),h=r(7625),y=r(2767),d=r(7644),v=r(2631),m=r(6220),b=r(7737),g=r(9535),S=r(755).set,w=r(453),_=r(8079),O=r(8325),E=r(7975),P=r(7863),x=r(2628),T=r(1778),C=r(3985),k=T.CONSTRUCTOR,A=T.REJECTION_EVENT,j=T.SUBCLASSING,N=P.getterFor("Promise"),I=P.set,M=x&&x.prototype,R=x,L=M,D=l.TypeError,B=l.document,F=l.process,U=C.f,G=U,V=!!(B&&B.createEvent&&l.dispatchEvent),z=function(t){var e;return!(!m(t)||!v(e=t.then))&&e},H=function(t,e){var r,n,o,i=e.value,a=1===e.state,s=a?t.ok:t.fail,u=t.resolve,l=t.reject,f=t.domain;try{s?(a||(2===e.rejection&&Y(e),e.rejection=1),!0===s?r=i:(f&&f.enter(),r=s(i),f&&(f.exit(),o=!0)),r===t.promise?l(new D("Promise-chain cycle")):(n=z(r))?c(n,r,u,l):u(r)):l(i)}catch(t){f&&!o&&f.exit(),l(t)}},q=function(t,e){t.notified||(t.notified=!0,w(function(){for(var r,n=t.reactions;r=n.get();)H(r,t);t.notified=!1,e&&!t.rejection&&W(t)}))},J=function(t,e,r){var n,o;V?((n=B.createEvent("Event")).promise=e,n.reason=r,n.initEvent(t,!1,!0),l.dispatchEvent(n)):n={promise:e,reason:r},!A&&(o=l["on"+t])?o(n):"unhandledrejection"===t&&_("Unhandled promise rejection",r)},W=function(t){c(S,l,function(){var e,r=t.facade,n=t.value;if(K(t)&&(e=O(function(){u?F.emit("unhandledRejection",n,r):J("unhandledrejection",r,n)}),t.rejection=u||K(t)?2:1,e.error))throw e.value})},K=function(t){return 1!==t.rejection&&!t.parent},Y=function(t){c(S,l,function(){var e=t.facade;u?F.emit("rejectionHandled",e):J("rejectionhandled",e,t.value)})},Q=function(t,e,r){return function(n){t(e,n,r)}},X=function(t,e,r){t.done||(t.done=!0,r&&(t=r),t.value=e,t.state=2,q(t,!0))},Z=function t(e,r,n){if(!e.done){e.done=!0,n&&(e=n);try{if(e.facade===r)throw new D("Promise can't be resolved itself");var o=z(r);o?w(function(){var n={done:!1};try{c(o,r,Q(t,n,e),Q(X,n,e))}catch(t){X(n,t,e)}}):(e.value=r,e.state=1,q(e,!1))}catch(t){X({done:!1},t,e)}}};if(k&&(L=(R=function(t){b(this,L),d(t),c(n,this);var e=N(this);try{t(Q(Z,e),Q(X,e))}catch(t){X(e,t)}}).prototype,(n=function(t){I(this,{type:"Promise",done:!1,notified:!1,parent:!1,reactions:new E,rejection:!1,state:0,value:void 0})}).prototype=f(L,"then",function(t,e){var r=N(this),n=U(g(this,R));return r.parent=!0,n.ok=!v(t)||t,n.fail=v(e)&&e,n.domain=u?F.domain:void 0,0===r.state?r.reactions.add(n):w(function(){H(n,r)}),n.promise}),o=function(){var t=new n,e=N(t);this.promise=t,this.resolve=Q(Z,e),this.reject=Q(X,e)},C.f=U=function(t){return t===R||void 0===t?new o(t):G(t)},!s&&v(x)&&M!==Object.prototype)){i=M.then,j||f(M,"then",function(t,e){var r=this;return new R(function(t,e){c(i,r,t,e)}).then(t,e)},{unsafe:!0});try{delete M.constructor}catch(t){}p&&p(M,L)}a({global:!0,constructor:!0,wrap:!0,forced:k},{Promise:R}),h(R,"Promise",!1,!0),y("Promise")},3688:function(t,e,r){"use strict";r(118),r(6717),r(4165),r(3605),r(8195),r(9978)},3605:function(t,e,r){"use strict";var n=r(3768),o=r(9707),i=r(7644),a=r(3985),s=r(8325),u=r(9318);n({target:"Promise",stat:!0,forced:r(1147)},{race:function(t){var e=this,r=a.f(e),n=r.reject,l=s(function(){var a=i(e.resolve);u(t,function(t){o(a,e,t).then(r.resolve,n)})});return l.error&&n(l.value),r.promise}})},8195:function(t,e,r){"use strict";var n=r(3768),o=r(3985);n({target:"Promise",stat:!0,forced:r(1778).CONSTRUCTOR},{reject:function(t){var e=o.f(this);return(0,e.reject)(t),e.promise}})},9978:function(t,e,r){"use strict";var n=r(3768),o=r(5189),i=r(497),a=r(2628),s=r(1778).CONSTRUCTOR,u=r(4168),l=o("Promise"),c=i&&!s;n({target:"Promise",stat:!0,forced:i||s},{resolve:function(t){return u(c&&this===l?a:this,t)}})},1569:function(t,e,r){"use strict";var n=r(3768),o=r(2693);n({target:"RegExp",proto:!0,forced:/./.exec!==o},{exec:o})},2611:function(t,e,r){"use strict";var n=r(2756).PROPER,o=r(5414),i=r(9809),a=r(1673),s=r(4877),u=r(8140),l=RegExp.prototype,c=l.toString,f=s(function(){return"/a/b"!==c.call({source:"a",flags:"b"})}),p=n&&"toString"!==c.name;(f||p)&&o(l,"toString",function(){var t=i(this);return"/"+a(t.source)+"/"+a(u(t))},{unsafe:!0})},9207:function(t,e,r){"use strict";var n,o=r(3768),i=r(5846),a=r(1805).f,s=r(9800),u=r(1673),l=r(4249),c=r(1308),f=r(5166),p=r(497),h=i("".slice),y=Math.min,d=f("endsWith");o({target:"String",proto:!0,forced:!!(p||d||(n=a(String.prototype,"endsWith"),!n||n.writable))&&!d},{endsWith:function(t){var e=u(c(this));l(t);var r=arguments.length>1?arguments[1]:void 0,n=e.length,o=void 0===r?n:y(s(r),n),i=u(t);return h(e,o-i.length,o)===i}})},5242:function(t,e,r){"use strict";var n=r(3768),o=r(398),i=r(4249),a=r(1308),s=r(1673),u=r(5166),l=o("".indexOf);n({target:"String",proto:!0,forced:!u("includes")},{includes:function(t){return!!~l(s(a(this)),s(i(t)),arguments.length>1?arguments[1]:void 0)}})},7671:function(t,e,r){"use strict";var n=r(9707),o=r(2610),i=r(9809),a=r(155),s=r(9800),u=r(1673),l=r(1308),c=r(2968),f=r(7007),p=r(1872);o("match",function(t,e,r){return[function(e){var r=l(this),o=a(e)?void 0:c(e,t);return o?n(o,e,r):new RegExp(e)[t](u(r))},function(t){var n=i(this),o=u(t),a=r(e,n,o);if(a.done)return a.value;if(!n.global)return p(n,o);var l=n.unicode;n.lastIndex=0;for(var c,h=[],y=0;null!==(c=p(n,o));){var d=u(c[0]);h[y]=d,""===d&&(n.lastIndex=f(o,s(n.lastIndex),l)),y++}return 0===y?null:h}]})},2826:function(t,e,r){"use strict";var n=r(2039),o=r(9707),i=r(398),a=r(2610),s=r(4877),u=r(9809),l=r(2631),c=r(155),f=r(7105),p=r(9800),h=r(1673),y=r(1308),d=r(7007),v=r(2968),m=r(5560),b=r(1872),g=r(7709)("replace"),S=Math.max,w=Math.min,_=i([].concat),O=i([].push),E=i("".indexOf),P=i("".slice),x="$0"==="a".replace(/./,"$0"),T=!!/./[g]&&""===/./[g]("a","$0");a("replace",function(t,e,r){var i=T?"$":"$0";return[function(t,r){var n=y(this),i=c(t)?void 0:v(t,g);return i?o(i,t,n,r):o(e,h(n),t,r)},function(t,o){var a=u(this),s=h(t);if("string"==typeof o&&-1===E(o,i)&&-1===E(o,"$<")){var c=r(e,a,s,o);if(c.done)return c.value}var y=l(o);y||(o=h(o));var v,g=a.global;g&&(v=a.unicode,a.lastIndex=0);for(var x,T=[];null!==(x=b(a,s))&&(O(T,x),g);){""===h(x[0])&&(a.lastIndex=d(s,p(a.lastIndex),v))}for(var C,k="",A=0,j=0;j<T.length;j++){for(var N,I=h((x=T[j])[0]),M=S(w(f(x.index),s.length),0),R=[],L=1;L<x.length;L++)O(R,void 0===(C=x[L])?C:String(C));var D=x.groups;if(y){var B=_([I],R,M,s);void 0!==D&&O(B,D),N=h(n(o,void 0,B))}else N=m(I,s,M,R,D,o);M>=A&&(k+=P(s,A,M)+N,A=M+I.length)}return k+P(s,A)}]},!!s(function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})||!x||T)},7982:function(t,e,r){"use strict";var n=r(9707),o=r(398),i=r(2610),a=r(9809),s=r(155),u=r(1308),l=r(9535),c=r(7007),f=r(9800),p=r(1673),h=r(2968),y=r(1872),d=r(8615),v=r(4877),m=d.UNSUPPORTED_Y,b=Math.min,g=o([].push),S=o("".slice),w=!v(function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var r="ab".split(t);return 2!==r.length||"a"!==r[0]||"b"!==r[1]}),_="c"==="abbc".split(/(b)*/)[1]||4!=="test".split(/(?:)/,-1).length||2!=="ab".split(/(?:ab)*/).length||4!==".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length;i("split",function(t,e,r){var o="0".split(void 0,0).length?function(t,r){return void 0===t&&0===r?[]:n(e,this,t,r)}:e;return[function(e,r){var i=u(this),a=s(e)?void 0:h(e,t);return a?n(a,e,i,r):n(o,p(i),e,r)},function(t,n){var i=a(this),s=p(t);if(!_){var u=r(o,i,s,n,o!==e);if(u.done)return u.value}var h=l(i,RegExp),d=i.unicode,v=(i.ignoreCase?"i":"")+(i.multiline?"m":"")+(i.unicode?"u":"")+(m?"g":"y"),w=new h(m?"^(?:"+i.source+")":i,v),O=void 0===n?4294967295:n>>>0;if(0===O)return[];if(0===s.length)return null===y(w,s)?[s]:[];for(var E=0,P=0,x=[];P<s.length;){w.lastIndex=m?0:P;var T,C=y(w,m?S(s,P):s);if(null===C||(T=b(f(w.lastIndex+(m?P:0)),s.length))===E)P=c(s,P,d);else{if(g(x,S(s,E,P)),x.length===O)return x;for(var k=1;k<=C.length-1;k++)if(g(x,C[k]),x.length===O)return x;P=E=T}}return g(x,S(s,E)),x}]},_||!w,m)},5730:function(t,e,r){"use strict";var n,o=r(3768),i=r(5846),a=r(1805).f,s=r(9800),u=r(1673),l=r(4249),c=r(1308),f=r(5166),p=r(497),h=i("".slice),y=Math.min,d=f("startsWith");o({target:"String",proto:!0,forced:!!(p||d||(n=a(String.prototype,"startsWith"),!n||n.writable))&&!d},{startsWith:function(t){var e=u(c(this));l(t);var r=s(y(arguments.length>1?arguments[1]:void 0,e.length)),n=u(t);return h(e,r,r+n.length)===n}})},9484:function(t,e,r){"use strict";var n=r(3768),o=r(9300).trim;n({target:"String",proto:!0,forced:r(2536)("trim")},{trim:function(){return o(this)}})},494:function(t,e,r){"use strict";r(2461)("asyncIterator")},2971:function(t,e,r){"use strict";var n=r(1697),o=r(46),i=r(9842),a=r(6678),s=r(5233),u=r(7625),l=r(7709)("iterator"),c=a.values,f=function(t,e){if(t){if(t[l]!==c)try{s(t,l,c)}catch(e){t[l]=c}if(u(t,e,!0),o[e])for(var r in a)if(t[r]!==a[r])try{s(t,r,a[r])}catch(e){t[r]=a[r]}}};for(var p in o)f(n[p]&&n[p].prototype,p);f(i,"DOMTokenList")},3712:function(t,e,r){"use strict";var n=r(9435);t.exports=n},6433:function(t,e,r){"use strict";var n=r(8142);t.exports=n}},e={};function r(n){var o=e[n];if(void 0!==o)return o.exports;var i=e[n]={id:n,loaded:!1,exports:{}};return t[n].call(i.exports,i,i.exports,r),i.loaded=!0,i.exports}r.amdO={},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,{a:e}),e},r.d=function(t,e){for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.nmd=function(t){return t.paths=[],t.children||(t.children=[]),t},r(9784),r(961),r(5619);r(3872)}();