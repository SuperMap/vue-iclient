
<!doctype html>
<html lang="en">

<head>
    <title>Code coverage report for src/mapboxgl/drill-map/DrillMapViewModel.ts</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="../../../prettify.css" />
    <link rel="stylesheet" href="../../../base.css" />
    <link rel="shortcut icon" type="image/x-icon" href="../../../favicon.png" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <style type='text/css'>
        .coverage-summary .sorter {
            background-image: url(../../../sort-arrow-sprite.png);
        }
    </style>
</head>
    
<body>
<div class='wrapper'>
    <div class='pad1'>
        <h1><a href="../../../index.html">All files</a> / <a href="index.html">src/mapboxgl/drill-map</a> DrillMapViewModel.ts</h1>
        <div class='clearfix'>
            
            <div class='fl pad1y space-right2'>
                <span class="strong">47.61% </span>
                <span class="quiet">Statements</span>
                <span class='fraction'>130/273</span>
            </div>
        
            
            <div class='fl pad1y space-right2'>
                <span class="strong">21.56% </span>
                <span class="quiet">Branches</span>
                <span class='fraction'>22/102</span>
            </div>
        
            
            <div class='fl pad1y space-right2'>
                <span class="strong">43.13% </span>
                <span class="quiet">Functions</span>
                <span class='fraction'>22/51</span>
            </div>
        
            
            <div class='fl pad1y space-right2'>
                <span class="strong">48.51% </span>
                <span class="quiet">Lines</span>
                <span class='fraction'>114/235</span>
            </div>
        
            
        </div>
        <p class="quiet">
            Press <em>n</em> or <em>j</em> to go to the next uncovered block, <em>b</em>, <em>p</em> or <em>k</em> for the previous block.
        </p>
        <template id="filterTemplate">
            <div class="quiet">
                Filter:
                <input oninput="onInput()" type="search" id="fileSearch">
            </div>
        </template>
    </div>
    <div class='status-line low'></div>
    <pre><table class="coverage">
<tr><td class="line-count quiet"><a name='L1'></a><a href='#L1'>1</a>
<a name='L2'></a><a href='#L2'>2</a>
<a name='L3'></a><a href='#L3'>3</a>
<a name='L4'></a><a href='#L4'>4</a>
<a name='L5'></a><a href='#L5'>5</a>
<a name='L6'></a><a href='#L6'>6</a>
<a name='L7'></a><a href='#L7'>7</a>
<a name='L8'></a><a href='#L8'>8</a>
<a name='L9'></a><a href='#L9'>9</a>
<a name='L10'></a><a href='#L10'>10</a>
<a name='L11'></a><a href='#L11'>11</a>
<a name='L12'></a><a href='#L12'>12</a>
<a name='L13'></a><a href='#L13'>13</a>
<a name='L14'></a><a href='#L14'>14</a>
<a name='L15'></a><a href='#L15'>15</a>
<a name='L16'></a><a href='#L16'>16</a>
<a name='L17'></a><a href='#L17'>17</a>
<a name='L18'></a><a href='#L18'>18</a>
<a name='L19'></a><a href='#L19'>19</a>
<a name='L20'></a><a href='#L20'>20</a>
<a name='L21'></a><a href='#L21'>21</a>
<a name='L22'></a><a href='#L22'>22</a>
<a name='L23'></a><a href='#L23'>23</a>
<a name='L24'></a><a href='#L24'>24</a>
<a name='L25'></a><a href='#L25'>25</a>
<a name='L26'></a><a href='#L26'>26</a>
<a name='L27'></a><a href='#L27'>27</a>
<a name='L28'></a><a href='#L28'>28</a>
<a name='L29'></a><a href='#L29'>29</a>
<a name='L30'></a><a href='#L30'>30</a>
<a name='L31'></a><a href='#L31'>31</a>
<a name='L32'></a><a href='#L32'>32</a>
<a name='L33'></a><a href='#L33'>33</a>
<a name='L34'></a><a href='#L34'>34</a>
<a name='L35'></a><a href='#L35'>35</a>
<a name='L36'></a><a href='#L36'>36</a>
<a name='L37'></a><a href='#L37'>37</a>
<a name='L38'></a><a href='#L38'>38</a>
<a name='L39'></a><a href='#L39'>39</a>
<a name='L40'></a><a href='#L40'>40</a>
<a name='L41'></a><a href='#L41'>41</a>
<a name='L42'></a><a href='#L42'>42</a>
<a name='L43'></a><a href='#L43'>43</a>
<a name='L44'></a><a href='#L44'>44</a>
<a name='L45'></a><a href='#L45'>45</a>
<a name='L46'></a><a href='#L46'>46</a>
<a name='L47'></a><a href='#L47'>47</a>
<a name='L48'></a><a href='#L48'>48</a>
<a name='L49'></a><a href='#L49'>49</a>
<a name='L50'></a><a href='#L50'>50</a>
<a name='L51'></a><a href='#L51'>51</a>
<a name='L52'></a><a href='#L52'>52</a>
<a name='L53'></a><a href='#L53'>53</a>
<a name='L54'></a><a href='#L54'>54</a>
<a name='L55'></a><a href='#L55'>55</a>
<a name='L56'></a><a href='#L56'>56</a>
<a name='L57'></a><a href='#L57'>57</a>
<a name='L58'></a><a href='#L58'>58</a>
<a name='L59'></a><a href='#L59'>59</a>
<a name='L60'></a><a href='#L60'>60</a>
<a name='L61'></a><a href='#L61'>61</a>
<a name='L62'></a><a href='#L62'>62</a>
<a name='L63'></a><a href='#L63'>63</a>
<a name='L64'></a><a href='#L64'>64</a>
<a name='L65'></a><a href='#L65'>65</a>
<a name='L66'></a><a href='#L66'>66</a>
<a name='L67'></a><a href='#L67'>67</a>
<a name='L68'></a><a href='#L68'>68</a>
<a name='L69'></a><a href='#L69'>69</a>
<a name='L70'></a><a href='#L70'>70</a>
<a name='L71'></a><a href='#L71'>71</a>
<a name='L72'></a><a href='#L72'>72</a>
<a name='L73'></a><a href='#L73'>73</a>
<a name='L74'></a><a href='#L74'>74</a>
<a name='L75'></a><a href='#L75'>75</a>
<a name='L76'></a><a href='#L76'>76</a>
<a name='L77'></a><a href='#L77'>77</a>
<a name='L78'></a><a href='#L78'>78</a>
<a name='L79'></a><a href='#L79'>79</a>
<a name='L80'></a><a href='#L80'>80</a>
<a name='L81'></a><a href='#L81'>81</a>
<a name='L82'></a><a href='#L82'>82</a>
<a name='L83'></a><a href='#L83'>83</a>
<a name='L84'></a><a href='#L84'>84</a>
<a name='L85'></a><a href='#L85'>85</a>
<a name='L86'></a><a href='#L86'>86</a>
<a name='L87'></a><a href='#L87'>87</a>
<a name='L88'></a><a href='#L88'>88</a>
<a name='L89'></a><a href='#L89'>89</a>
<a name='L90'></a><a href='#L90'>90</a>
<a name='L91'></a><a href='#L91'>91</a>
<a name='L92'></a><a href='#L92'>92</a>
<a name='L93'></a><a href='#L93'>93</a>
<a name='L94'></a><a href='#L94'>94</a>
<a name='L95'></a><a href='#L95'>95</a>
<a name='L96'></a><a href='#L96'>96</a>
<a name='L97'></a><a href='#L97'>97</a>
<a name='L98'></a><a href='#L98'>98</a>
<a name='L99'></a><a href='#L99'>99</a>
<a name='L100'></a><a href='#L100'>100</a>
<a name='L101'></a><a href='#L101'>101</a>
<a name='L102'></a><a href='#L102'>102</a>
<a name='L103'></a><a href='#L103'>103</a>
<a name='L104'></a><a href='#L104'>104</a>
<a name='L105'></a><a href='#L105'>105</a>
<a name='L106'></a><a href='#L106'>106</a>
<a name='L107'></a><a href='#L107'>107</a>
<a name='L108'></a><a href='#L108'>108</a>
<a name='L109'></a><a href='#L109'>109</a>
<a name='L110'></a><a href='#L110'>110</a>
<a name='L111'></a><a href='#L111'>111</a>
<a name='L112'></a><a href='#L112'>112</a>
<a name='L113'></a><a href='#L113'>113</a>
<a name='L114'></a><a href='#L114'>114</a>
<a name='L115'></a><a href='#L115'>115</a>
<a name='L116'></a><a href='#L116'>116</a>
<a name='L117'></a><a href='#L117'>117</a>
<a name='L118'></a><a href='#L118'>118</a>
<a name='L119'></a><a href='#L119'>119</a>
<a name='L120'></a><a href='#L120'>120</a>
<a name='L121'></a><a href='#L121'>121</a>
<a name='L122'></a><a href='#L122'>122</a>
<a name='L123'></a><a href='#L123'>123</a>
<a name='L124'></a><a href='#L124'>124</a>
<a name='L125'></a><a href='#L125'>125</a>
<a name='L126'></a><a href='#L126'>126</a>
<a name='L127'></a><a href='#L127'>127</a>
<a name='L128'></a><a href='#L128'>128</a>
<a name='L129'></a><a href='#L129'>129</a>
<a name='L130'></a><a href='#L130'>130</a>
<a name='L131'></a><a href='#L131'>131</a>
<a name='L132'></a><a href='#L132'>132</a>
<a name='L133'></a><a href='#L133'>133</a>
<a name='L134'></a><a href='#L134'>134</a>
<a name='L135'></a><a href='#L135'>135</a>
<a name='L136'></a><a href='#L136'>136</a>
<a name='L137'></a><a href='#L137'>137</a>
<a name='L138'></a><a href='#L138'>138</a>
<a name='L139'></a><a href='#L139'>139</a>
<a name='L140'></a><a href='#L140'>140</a>
<a name='L141'></a><a href='#L141'>141</a>
<a name='L142'></a><a href='#L142'>142</a>
<a name='L143'></a><a href='#L143'>143</a>
<a name='L144'></a><a href='#L144'>144</a>
<a name='L145'></a><a href='#L145'>145</a>
<a name='L146'></a><a href='#L146'>146</a>
<a name='L147'></a><a href='#L147'>147</a>
<a name='L148'></a><a href='#L148'>148</a>
<a name='L149'></a><a href='#L149'>149</a>
<a name='L150'></a><a href='#L150'>150</a>
<a name='L151'></a><a href='#L151'>151</a>
<a name='L152'></a><a href='#L152'>152</a>
<a name='L153'></a><a href='#L153'>153</a>
<a name='L154'></a><a href='#L154'>154</a>
<a name='L155'></a><a href='#L155'>155</a>
<a name='L156'></a><a href='#L156'>156</a>
<a name='L157'></a><a href='#L157'>157</a>
<a name='L158'></a><a href='#L158'>158</a>
<a name='L159'></a><a href='#L159'>159</a>
<a name='L160'></a><a href='#L160'>160</a>
<a name='L161'></a><a href='#L161'>161</a>
<a name='L162'></a><a href='#L162'>162</a>
<a name='L163'></a><a href='#L163'>163</a>
<a name='L164'></a><a href='#L164'>164</a>
<a name='L165'></a><a href='#L165'>165</a>
<a name='L166'></a><a href='#L166'>166</a>
<a name='L167'></a><a href='#L167'>167</a>
<a name='L168'></a><a href='#L168'>168</a>
<a name='L169'></a><a href='#L169'>169</a>
<a name='L170'></a><a href='#L170'>170</a>
<a name='L171'></a><a href='#L171'>171</a>
<a name='L172'></a><a href='#L172'>172</a>
<a name='L173'></a><a href='#L173'>173</a>
<a name='L174'></a><a href='#L174'>174</a>
<a name='L175'></a><a href='#L175'>175</a>
<a name='L176'></a><a href='#L176'>176</a>
<a name='L177'></a><a href='#L177'>177</a>
<a name='L178'></a><a href='#L178'>178</a>
<a name='L179'></a><a href='#L179'>179</a>
<a name='L180'></a><a href='#L180'>180</a>
<a name='L181'></a><a href='#L181'>181</a>
<a name='L182'></a><a href='#L182'>182</a>
<a name='L183'></a><a href='#L183'>183</a>
<a name='L184'></a><a href='#L184'>184</a>
<a name='L185'></a><a href='#L185'>185</a>
<a name='L186'></a><a href='#L186'>186</a>
<a name='L187'></a><a href='#L187'>187</a>
<a name='L188'></a><a href='#L188'>188</a>
<a name='L189'></a><a href='#L189'>189</a>
<a name='L190'></a><a href='#L190'>190</a>
<a name='L191'></a><a href='#L191'>191</a>
<a name='L192'></a><a href='#L192'>192</a>
<a name='L193'></a><a href='#L193'>193</a>
<a name='L194'></a><a href='#L194'>194</a>
<a name='L195'></a><a href='#L195'>195</a>
<a name='L196'></a><a href='#L196'>196</a>
<a name='L197'></a><a href='#L197'>197</a>
<a name='L198'></a><a href='#L198'>198</a>
<a name='L199'></a><a href='#L199'>199</a>
<a name='L200'></a><a href='#L200'>200</a>
<a name='L201'></a><a href='#L201'>201</a>
<a name='L202'></a><a href='#L202'>202</a>
<a name='L203'></a><a href='#L203'>203</a>
<a name='L204'></a><a href='#L204'>204</a>
<a name='L205'></a><a href='#L205'>205</a>
<a name='L206'></a><a href='#L206'>206</a>
<a name='L207'></a><a href='#L207'>207</a>
<a name='L208'></a><a href='#L208'>208</a>
<a name='L209'></a><a href='#L209'>209</a>
<a name='L210'></a><a href='#L210'>210</a>
<a name='L211'></a><a href='#L211'>211</a>
<a name='L212'></a><a href='#L212'>212</a>
<a name='L213'></a><a href='#L213'>213</a>
<a name='L214'></a><a href='#L214'>214</a>
<a name='L215'></a><a href='#L215'>215</a>
<a name='L216'></a><a href='#L216'>216</a>
<a name='L217'></a><a href='#L217'>217</a>
<a name='L218'></a><a href='#L218'>218</a>
<a name='L219'></a><a href='#L219'>219</a>
<a name='L220'></a><a href='#L220'>220</a>
<a name='L221'></a><a href='#L221'>221</a>
<a name='L222'></a><a href='#L222'>222</a>
<a name='L223'></a><a href='#L223'>223</a>
<a name='L224'></a><a href='#L224'>224</a>
<a name='L225'></a><a href='#L225'>225</a>
<a name='L226'></a><a href='#L226'>226</a>
<a name='L227'></a><a href='#L227'>227</a>
<a name='L228'></a><a href='#L228'>228</a>
<a name='L229'></a><a href='#L229'>229</a>
<a name='L230'></a><a href='#L230'>230</a>
<a name='L231'></a><a href='#L231'>231</a>
<a name='L232'></a><a href='#L232'>232</a>
<a name='L233'></a><a href='#L233'>233</a>
<a name='L234'></a><a href='#L234'>234</a>
<a name='L235'></a><a href='#L235'>235</a>
<a name='L236'></a><a href='#L236'>236</a>
<a name='L237'></a><a href='#L237'>237</a>
<a name='L238'></a><a href='#L238'>238</a>
<a name='L239'></a><a href='#L239'>239</a>
<a name='L240'></a><a href='#L240'>240</a>
<a name='L241'></a><a href='#L241'>241</a>
<a name='L242'></a><a href='#L242'>242</a>
<a name='L243'></a><a href='#L243'>243</a>
<a name='L244'></a><a href='#L244'>244</a>
<a name='L245'></a><a href='#L245'>245</a>
<a name='L246'></a><a href='#L246'>246</a>
<a name='L247'></a><a href='#L247'>247</a>
<a name='L248'></a><a href='#L248'>248</a>
<a name='L249'></a><a href='#L249'>249</a>
<a name='L250'></a><a href='#L250'>250</a>
<a name='L251'></a><a href='#L251'>251</a>
<a name='L252'></a><a href='#L252'>252</a>
<a name='L253'></a><a href='#L253'>253</a>
<a name='L254'></a><a href='#L254'>254</a>
<a name='L255'></a><a href='#L255'>255</a>
<a name='L256'></a><a href='#L256'>256</a>
<a name='L257'></a><a href='#L257'>257</a>
<a name='L258'></a><a href='#L258'>258</a>
<a name='L259'></a><a href='#L259'>259</a>
<a name='L260'></a><a href='#L260'>260</a>
<a name='L261'></a><a href='#L261'>261</a>
<a name='L262'></a><a href='#L262'>262</a>
<a name='L263'></a><a href='#L263'>263</a>
<a name='L264'></a><a href='#L264'>264</a>
<a name='L265'></a><a href='#L265'>265</a>
<a name='L266'></a><a href='#L266'>266</a>
<a name='L267'></a><a href='#L267'>267</a>
<a name='L268'></a><a href='#L268'>268</a>
<a name='L269'></a><a href='#L269'>269</a>
<a name='L270'></a><a href='#L270'>270</a>
<a name='L271'></a><a href='#L271'>271</a>
<a name='L272'></a><a href='#L272'>272</a>
<a name='L273'></a><a href='#L273'>273</a>
<a name='L274'></a><a href='#L274'>274</a>
<a name='L275'></a><a href='#L275'>275</a>
<a name='L276'></a><a href='#L276'>276</a>
<a name='L277'></a><a href='#L277'>277</a>
<a name='L278'></a><a href='#L278'>278</a>
<a name='L279'></a><a href='#L279'>279</a>
<a name='L280'></a><a href='#L280'>280</a>
<a name='L281'></a><a href='#L281'>281</a>
<a name='L282'></a><a href='#L282'>282</a>
<a name='L283'></a><a href='#L283'>283</a>
<a name='L284'></a><a href='#L284'>284</a>
<a name='L285'></a><a href='#L285'>285</a>
<a name='L286'></a><a href='#L286'>286</a>
<a name='L287'></a><a href='#L287'>287</a>
<a name='L288'></a><a href='#L288'>288</a>
<a name='L289'></a><a href='#L289'>289</a>
<a name='L290'></a><a href='#L290'>290</a>
<a name='L291'></a><a href='#L291'>291</a>
<a name='L292'></a><a href='#L292'>292</a>
<a name='L293'></a><a href='#L293'>293</a>
<a name='L294'></a><a href='#L294'>294</a>
<a name='L295'></a><a href='#L295'>295</a>
<a name='L296'></a><a href='#L296'>296</a>
<a name='L297'></a><a href='#L297'>297</a>
<a name='L298'></a><a href='#L298'>298</a>
<a name='L299'></a><a href='#L299'>299</a>
<a name='L300'></a><a href='#L300'>300</a>
<a name='L301'></a><a href='#L301'>301</a>
<a name='L302'></a><a href='#L302'>302</a>
<a name='L303'></a><a href='#L303'>303</a>
<a name='L304'></a><a href='#L304'>304</a>
<a name='L305'></a><a href='#L305'>305</a>
<a name='L306'></a><a href='#L306'>306</a>
<a name='L307'></a><a href='#L307'>307</a>
<a name='L308'></a><a href='#L308'>308</a>
<a name='L309'></a><a href='#L309'>309</a>
<a name='L310'></a><a href='#L310'>310</a>
<a name='L311'></a><a href='#L311'>311</a>
<a name='L312'></a><a href='#L312'>312</a>
<a name='L313'></a><a href='#L313'>313</a>
<a name='L314'></a><a href='#L314'>314</a></td><td class="line-coverage quiet"><span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">6x</span>
<span class="cline-any cline-yes">6x</span>
<span class="cline-any cline-yes">6x</span>
<span class="cline-any cline-yes">6x</span>
<span class="cline-any cline-yes">6x</span>
<span class="cline-any cline-yes">6x</span>
<span class="cline-any cline-yes">6x</span>
<span class="cline-any cline-yes">6x</span>
<span class="cline-any cline-yes">6x</span>
<span class="cline-any cline-yes">6x</span>
<span class="cline-any cline-yes">6x</span>
<span class="cline-any cline-yes">6x</span>
<span class="cline-any cline-yes">6x</span>
<span class="cline-any cline-yes">6x</span>
<span class="cline-any cline-yes">6x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">6x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">6x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">18x</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">18x</span>
<span class="cline-any cline-yes">18x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">18x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">6x</span>
<span class="cline-any cline-yes">6x</span>
<span class="cline-any cline-yes">6x</span>
<span class="cline-any cline-yes">18x</span>
<span class="cline-any cline-yes">18x</span>
<span class="cline-any cline-yes">18x</span>
<span class="cline-any cline-yes">18x</span>
<span class="cline-any cline-yes">18x</span>
<span class="cline-any cline-yes">18x</span>
<span class="cline-any cline-yes">6x</span>
<span class="cline-any cline-yes">6x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">18x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">6x</span>
<span class="cline-any cline-yes">6x</span>
<span class="cline-any cline-yes">6x</span>
<span class="cline-any cline-yes">18x</span>
<span class="cline-any cline-yes">21x</span>
<span class="cline-any cline-yes">18x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">6x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">6x</span>
<span class="cline-any cline-yes">6x</span>
<span class="cline-any cline-yes">6x</span>
<span class="cline-any cline-yes">6x</span>
<span class="cline-any cline-yes">6x</span>
<span class="cline-any cline-yes">6x</span>
<span class="cline-any cline-yes">8x</span>
<span class="cline-any cline-yes">24x</span>
<span class="cline-any cline-yes">8x</span>
<span class="cline-any cline-yes">18x</span>
<span class="cline-any cline-yes">18x</span>
<span class="cline-any cline-yes">21x</span>
<span class="cline-any cline-yes">18x</span>
<span class="cline-any cline-yes">18x</span>
<span class="cline-any cline-yes">18x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">6x</span>
<span class="cline-any cline-yes">6x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">6x</span>
<span class="cline-any cline-yes">6x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">6x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">6x</span>
<span class="cline-any cline-yes">6x</span>
<span class="cline-any cline-yes">6x</span>
<span class="cline-any cline-yes">6x</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">18x</span>
<span class="cline-any cline-yes">6x</span>
<span class="cline-any cline-yes">18x</span>
<span class="cline-any cline-yes">18x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">18x</span>
<span class="cline-any cline-yes">18x</span>
<span class="cline-any cline-yes">18x</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">18x</span>
<span class="cline-any cline-yes">18x</span>
<span class="cline-any cline-yes">18x</span>
<span class="cline-any cline-yes">18x</span>
<span class="cline-any cline-yes">18x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">18x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">6x</span>
<span class="cline-any cline-yes">6x</span>
<span class="cline-any cline-yes">6x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">18x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1x</span></td><td class="text"><pre class="prettyprint lang-js">import { Events } from 'vue-iclient/src/common/_types/event/Events';
import WebMapService from 'vue-iclient/src/common/_utils/WebMapService';
import bbox from '@turf/bbox';
import transformScale from '@turf/transform-scale';
import clonedeep from 'lodash.clonedeep';
export default class WebMapViewModel extends Events {
    constructor(data, drillAnimation) {
        super();
        this.layersOnMap = [];
        this.layerFilterList = [];
        this.boundsList = [];
        this.allLayers = [];
        this.layersInfo = [];
        this.currentIndex = 0;
        this.changeCursorGrab = <span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >() =&gt; t</span>his.changeCursor('grab');</span>
        this.changeCursorPointer = <span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >() =&gt; t</span>his.changeCursor('pointer');</span>
        this.drillNextMapFn = <span class="fstat-no" title="function not covered" >e<span class="cstat-no" title="statement not covered" > </span>=&gt; this.drillNextMap(e);</span>
        this.clickTolerance = 5;
        this.checkSameLayer = true;
        this.data = clonedeep(data);
        this.drillAnimation = drillAnimation;
        this.eventTypes = ['drillmap'];
    }
<span class="fstat-no" title="function not covered" >    setMap(</span>map) {
<span class="cstat-no" title="statement not covered" >        this.map = map;</span>
    }
<span class="fstat-no" title="function not covered" >    setData(</span>data) {
<span class="cstat-no" title="statement not covered" >        this.data = clonedeep(data);</span>
    }
    setAllLayers(layerIds) {
        this.allLayers = layerIds;
    }
    setLayersInfo(layersInfo) {
        this.layersInfo = layersInfo;
    }
<span class="fstat-no" title="function not covered" >    getIsAdministrative(</span>layerInfo, layerInfo1, primaryField, foreignField) {
        const administrativeInfo = <span class="cstat-no" title="statement not covered" >layerInfo.dataSource &amp;&amp; layerInfo.dataSource.administrativeInfo;</span>
        const { divisionType<span class="cstat-no" title="statement not covered" >, divisionField<span class="cstat-no" title="statement not covered" > } = <span class="cstat-no" title="statement not covered" >administrativeInfo || {};</span></span></span>
        const administrativeInfo1 = <span class="cstat-no" title="statement not covered" >layerInfo1.dataSource &amp;&amp; layerInfo1.dataSource.administrativeInfo;</span>
        const { divisionType: divisionType1<span class="cstat-no" title="statement not covered" > } = <span class="cstat-no" title="statement not covered" >administrativeInfo1 || {};</span></span>
<span class="cstat-no" title="statement not covered" >        <span class="missing-if-branch" title="if path not taken" >I</span>if (!administrativeInfo || !administrativeInfo1 || primaryField !== divisionField || foreignField !== 'Province') {</span>
<span class="cstat-no" title="statement not covered" >            return false;</span>
        }
<span class="cstat-no" title="statement not covered" >        return ['省份', 'Province'].includes(divisionType) &amp;&amp; ['城市', 'City'].includes(divisionType1);</span>
    }
<span class="fstat-no" title="function not covered" >    changeCurrentIndex(</span>newVal, oldVal) {
<span class="cstat-no" title="statement not covered" >        this.currentIndex = newVal;</span>
        const { foreignField } = <span class="cstat-no" title="statement not covered" >this.data[newVal];</span>
        const layerId = <span class="cstat-no" title="statement not covered" >this.allLayers[newVal];</span>
<span class="cstat-no" title="statement not covered" >        <span class="missing-if-branch" title="if path not taken" >I</span>if (newVal &gt; oldVal) {</span>
            const primaryField = <span class="cstat-no" title="statement not covered" >this.data[oldVal].primaryField;</span>
            const oldLayerId = <span class="cstat-no" title="statement not covered" >this.allLayers[oldVal];</span>
            const isAdministrative = <span class="cstat-no" title="statement not covered" >this.getIsAdministrative(this.layersInfo.find(<span class="fstat-no" title="function not covered" >item<span class="cstat-no" title="statement not covered" > </span>=&gt; item.layerID === oldLayerId),</span> this.layersInfo.find(<span class="fstat-no" title="function not covered" >item<span class="cstat-no" title="statement not covered" > </span>=&gt; item.layerID === layerId),</span> primaryField, foreignField);</span>
<span class="cstat-no" title="statement not covered" >            if (isAdministrative) {</span>
                let filter = <span class="cstat-no" title="statement not covered" >['slice', ['get', foreignField], 0, 2];</span>
                let fieldValue = <span class="cstat-no" title="statement not covered" >this.fieldValue.slice(0, 2);</span>
                // 张家口市和张家界市  阿拉善盟 阿拉尔市
<span class="cstat-no" title="statement not covered" >                <span class="missing-if-branch" title="if path not taken" >I</span>if (this.fieldValue === '张家' || this.fieldValue === '阿拉') {</span>
<span class="cstat-no" title="statement not covered" >                    filter = ['slice', ['get', foreignField], 0, 3];</span>
<span class="cstat-no" title="statement not covered" >                    fieldValue = this.fieldValue.slice(0, 3);</span>
                }
<span class="cstat-no" title="statement not covered" >                console.log(filter, fieldValue);</span>
<span class="cstat-no" title="statement not covered" >                this.setFilter(newVal, ['all', ['==', filter, fieldValue]], layerId);</span>
            }
            else {
<span class="cstat-no" title="statement not covered" >                this.setFilter(newVal, ['all', ['==', foreignField, this.fieldValue]], layerId);</span>
            }
        }
<span class="cstat-no" title="statement not covered" >        <span class="missing-if-branch" title="if path not taken" >I</span>if (newVal &lt; oldVal) {</span>
<span class="cstat-no" title="statement not covered" >            <span class="missing-if-branch" title="if path not taken" >I</span>if (this.boundsList.length &gt; 1) {</span>
<span class="cstat-no" title="statement not covered" >                this.boundsList.pop();</span>
            }
        }
<span class="cstat-no" title="statement not covered" >        this.fitToBounds(this.boundsList[newVal]);</span>
<span class="cstat-no" title="statement not covered" >        this.setVisibility(newVal);</span>
    }
<span class="fstat-no" title="function not covered" >    init(<span class="cstat-no" title="statement not covered" ></span>setLayerFilter = true) <span class="cstat-no" title="statement not covered" ><span class="cstat-no" title="statement not covered" ><span class="missing-if-branch" title="if path not taken" >I</span>{</span></span></span>
        const center = <span class="cstat-no" title="statement not covered" >this.map.getCenter();</span>
        const zoom = <span class="cstat-no" title="statement not covered" >this.map.getZoom();</span>
<span class="cstat-no" title="statement not covered" >        this.boundsList = [{ center, zoom }];</span>
<span class="cstat-no" title="statement not covered" >        this.layersOnMap = this.allLayers.filter(<span class="fstat-no" title="function not covered" >layerId<span class="cstat-no" title="statement not covered" > </span>=&gt; this.map.getLayer(layerId));</span></span>
<span class="cstat-no" title="statement not covered" >        <span class="missing-if-branch" title="if path not taken" >I</span>if (setLayerFilter) {</span>
<span class="cstat-no" title="statement not covered" >            this.layerFilterList = this.getLayerFilterList();</span>
        }
        const clickedLayers = <span class="cstat-no" title="statement not covered" >this.layersOnMap.length &gt; 1 ? this.layersOnMap.slice(0, this.layersOnMap.length - 1) : this.layersOnMap;</span>
<span class="cstat-no" title="statement not covered" >        this.setVisibility();</span>
<span class="cstat-no" title="statement not covered" >        this.changeClickedLayersCursor(clickedLayers);</span>
<span class="cstat-no" title="statement not covered" >        this.map.off('click', this.drillNextMapFn);</span>
<span class="cstat-no" title="statement not covered" >        this.map.on('click', this.drillNextMapFn);</span>
    }
<span class="fstat-no" title="function not covered" >    getLayerFilterList(<span class="cstat-no" title="statement not covered" ></span>layers = this.layersOnMap) <span class="cstat-no" title="statement not covered" ><span class="cstat-no" title="statement not covered" ><span class="missing-if-branch" title="if path not taken" >I</span>{</span></span></span>
        let layerFilterList = <span class="cstat-no" title="statement not covered" >[];</span>
<span class="cstat-no" title="statement not covered" >        layers.forEach(<span class="fstat-no" title="function not covered" >layerId </span>=&gt; {</span>
            let strokeLineFilter = <span class="cstat-no" title="statement not covered" >[];</span>
            const strokeLineLayer = <span class="cstat-no" title="statement not covered" >layerId + '-strokeLine';</span>
            const layerFilter = <span class="cstat-no" title="statement not covered" >this.map.getFilter(layerId);</span>
<span class="cstat-no" title="statement not covered" >            <span class="missing-if-branch" title="if path not taken" >I</span>if (this.map.getLayer(strokeLineLayer)) {</span>
<span class="cstat-no" title="statement not covered" >                strokeLineFilter = this.map.getFilter(strokeLineLayer);</span>
            }
<span class="cstat-no" title="statement not covered" >            layerFilterList.push({ [layerId]: layerFilter, [strokeLineLayer]: strokeLineFilter });</span>
        });
<span class="cstat-no" title="statement not covered" >        return layerFilterList;</span>
    }
<span class="fstat-no" title="function not covered" >    setFilter(</span>currentIndex, filter, layerId) {
<span class="cstat-no" title="statement not covered" >        <span class="missing-if-branch" title="if path not taken" >I</span>if (filter) {</span>
            const layerFilter = <span class="cstat-no" title="statement not covered" >this.layerFilterList[currentIndex] || {};</span>
            const strokeLineLayer = <span class="cstat-no" title="statement not covered" >layerId + '-strokeLine';</span>
<span class="cstat-no" title="statement not covered" >            <span class="missing-if-branch" title="if path not taken" >I</span>if (this.map.getLayer(layerId)) {</span>
                let originFilter = <span class="cstat-no" title="statement not covered" >layerFilter[layerId];</span>
<span class="cstat-no" title="statement not covered" >                <span class="missing-if-branch" title="if path not taken" >I</span>if (originFilter &amp;&amp; originFilter.length === 1 &amp;&amp; originFilter[0] === 'all') {</span>
<span class="cstat-no" title="statement not covered" >                    originFilter = null;</span>
                }
<span class="cstat-no" title="statement not covered" >                this.map.setFilter(layerId, originFilter ? ['all', filter, originFilter] : ['all', filter]);</span>
            }
<span class="cstat-no" title="statement not covered" >            <span class="missing-if-branch" title="if path not taken" >I</span>if (this.map.getLayer(strokeLineLayer)) {</span>
                let strokeFilter = <span class="cstat-no" title="statement not covered" >layerFilter[strokeLineLayer];</span>
<span class="cstat-no" title="statement not covered" >                <span class="missing-if-branch" title="if path not taken" >I</span>if (strokeFilter &amp;&amp; strokeFilter.length === 1 &amp;&amp; strokeFilter[0] === 'all') {</span>
<span class="cstat-no" title="statement not covered" >                    strokeFilter = null;</span>
                }
<span class="cstat-no" title="statement not covered" >                this.map.setFilter(strokeLineLayer, strokeFilter ? ['all', filter, strokeFilter] : ['all', filter]);</span>
            }
        }
    }
<span class="fstat-no" title="function not covered" >    setVisibility(<span class="cstat-no" title="statement not covered" ></span>currentIndex = 0<span class="cstat-no" title="statement not covered" ><span class="missing-if-branch" title="if path not taken" >I</span>, <span class="cstat-no" title="statement not covered" >l</span>ayers = this.layersOnMap) <span class="cstat-no" title="statement not covered" ><span class="cstat-no" title="statement not covered" ><span class="missing-if-branch" title="if path not taken" >I</span>{</span></span></span></span>
<span class="cstat-no" title="statement not covered" >        layers.forEach(<span class="fstat-no" title="function not covered" >(i</span>tem, index) =&gt; {</span>
            const visible = <span class="cstat-no" title="statement not covered" >currentIndex === index ? 'visible' : 'none';</span>
<span class="cstat-no" title="statement not covered" >            this.map.setLayoutProperty(item, 'visibility', visible);</span>
<span class="cstat-no" title="statement not covered" >            this.map.setLayoutProperty(item + '-strokeLine', 'visibility', visible);</span>
        });
    }
<span class="fstat-no" title="function not covered" >    fitToBounds(</span>bboxs, <span class="cstat-no" title="statement not covered" >drillAnimation = this.drillAnimation) <span class="cstat-no" title="statement not covered" ><span class="missing-if-branch" title="if path not taken" >I</span>{</span></span>
<span class="cstat-no" title="statement not covered" >        if (bboxs instanceof Array) {</span>
            // @ts-ignore
<span class="cstat-no" title="statement not covered" >            this.map.fitBounds(bboxs, drillAnimation);</span>
        }
        else <span class="cstat-no" title="statement not covered" ><span class="missing-if-branch" title="if path not taken" >I</span>if (bboxs instanceof Object) {</span>
            const { center, zoom } = <span class="cstat-no" title="statement not covered" ><span class="cstat-no" title="statement not covered" >bboxs;</span></span>
<span class="cstat-no" title="statement not covered" >            this.map.setCenter(center);</span>
<span class="cstat-no" title="statement not covered" >            this.map.setZoom(zoom);</span>
        }
    }
<span class="fstat-no" title="function not covered" >    drillNextMap(</span>e) {
        const feature = <span class="cstat-no" title="statement not covered" >this.bindQueryRenderedFeatures(e, [this.allLayers[this.currentIndex]]);</span>
<span class="cstat-no" title="statement not covered" >        <span class="missing-if-branch" title="if path not taken" >I</span>if (feature &amp;&amp; feature.properties) {</span>
<span class="cstat-no" title="statement not covered" >            <span class="missing-if-branch" title="if path not taken" >I</span>if (this.currentIndex + 1 &gt;= this.data.length) {</span>
<span class="cstat-no" title="statement not covered" >                return;</span>
            }
            const bboxs = <span class="cstat-no" title="statement not covered" >this.getBboxByFeature(feature);</span>
            const primaryField = <span class="cstat-no" title="statement not covered" >this.data[this.currentIndex].primaryField;</span>
<span class="cstat-no" title="statement not covered" >            this.fieldValue = feature.properties[primaryField];</span>
<span class="cstat-no" title="statement not covered" >            this.boundsList.push(bboxs);</span>
<span class="cstat-no" title="statement not covered" >            this.triggerEvent('drillmap', { index: 1 });</span>
        }
<span class="cstat-no" title="statement not covered" >        <span class="missing-if-branch" title="if path not taken" >I</span>if (!feature) {</span>
<span class="cstat-no" title="statement not covered" >            this.returnAboveLayer();</span>
        }
    }
<span class="fstat-no" title="function not covered" >    returnAboveLayer(</span>) {
<span class="cstat-no" title="statement not covered" >        <span class="missing-if-branch" title="if path not taken" >I</span>if (this.currentIndex - 1 &lt; 0) {</span>
<span class="cstat-no" title="statement not covered" >            return;</span>
        }
<span class="cstat-no" title="statement not covered" >        this.triggerEvent('drillmap', { index: -1 });</span>
    }
<span class="fstat-no" title="function not covered" >    getBboxByFeature(</span>feature) {
        const bboxs = <span class="cstat-no" title="statement not covered" >bbox(transformScale(feature, 2));</span>
<span class="cstat-no" title="statement not covered" >        return (bboxs &amp;&amp; [</span>
            [bboxs[0], bboxs[1]],
            [bboxs[2], bboxs[3]]
        ]);
    }
<span class="fstat-no" title="function not covered" >    bindQueryRenderedFeatures(</span>e, layers) {
<span class="cstat-no" title="statement not covered" >        <span class="missing-if-branch" title="if path not taken" >I</span>if (!layers) {</span>
<span class="cstat-no" title="statement not covered" >            return null;</span>
        }
        const map = <span class="cstat-no" title="statement not covered" >e.target;</span>
        const bbox = <span class="cstat-no" title="statement not covered" >[</span>
            [e.point.x - this.clickTolerance, e.point.y - this.clickTolerance],
            [e.point.x + this.clickTolerance, e.point.y + this.clickTolerance]
        ];
        const features = <span class="cstat-no" title="statement not covered" >map.queryRenderedFeatures(bbox, {</span>
            layers
        });
<span class="cstat-no" title="statement not covered" >        return features &amp;&amp; features[0];</span>
    }
<span class="fstat-no" title="function not covered" >    changeClickedLayersCursor(</span>layers) <span class="cstat-no" title="statement not covered" >{</span>
<span class="cstat-no" title="statement not covered" >        layers.forEach(<span class="fstat-no" title="function not covered" >layerId </span>=&gt; {</span>
<span class="cstat-no" title="statement not covered" >            this.map.on('mousemove', layerId, this.changeCursorPointer);</span>
<span class="cstat-no" title="statement not covered" >            this.map.on('mouseleave', layerId, this.changeCursorGrab);</span>
        });
    }
<span class="fstat-no" title="function not covered" >    changeCursor(<span class="cstat-no" title="statement not covered" ></span>cursorType = 'point') <span class="cstat-no" title="statement not covered" ><span class="missing-if-branch" title="if path not taken" >I</span>{</span></span>
<span class="cstat-no" title="statement not covered" >        <span class="missing-if-branch" title="if path not taken" >I</span>if (this.map &amp;&amp; this.map.getCanvas()) {</span>
<span class="cstat-no" title="statement not covered" >            this.map.getCanvas().style.cursor = cursorType;</span>
        }
    }
<span class="fstat-no" title="function not covered" >    removeCursorEvent(<span class="cstat-no" title="statement not covered" ></span>layers = this.layersOnMap) <span class="cstat-no" title="statement not covered" ><span class="cstat-no" title="statement not covered" ><span class="missing-if-branch" title="if path not taken" >I</span>{</span></span></span>
<span class="cstat-no" title="statement not covered" >        layers.forEach(<span class="fstat-no" title="function not covered" >layerId </span>=&gt; {</span>
<span class="cstat-no" title="statement not covered" >            this.map.off('mousemove', layerId, this.changeCursorPointer);</span>
<span class="cstat-no" title="statement not covered" >            this.map.off('mouseleave', layerId, this.changeCursorGrab);</span>
<span class="cstat-no" title="statement not covered" >            this.changeCursor('point');</span>
        });
    }
<span class="fstat-no" title="function not covered" >    removed(</span>) {
<span class="cstat-no" title="statement not covered" >        <span class="missing-if-branch" title="if path not taken" >I</span>if (!this.map) {</span>
<span class="cstat-no" title="statement not covered" >            return;</span>
        }
<span class="cstat-no" title="statement not covered" >        this.map.off('click', this.drillNextMapFn);</span>
<span class="cstat-no" title="statement not covered" >        this.removeCursorEvent();</span>
    }
    getMapInfo(mapId, serverUrl) {
        <span class="missing-if-branch" title="if path not taken" >I</span>if (!serverUrl || !mapId) {
<span class="cstat-no" title="statement not covered" >            return null;</span>
        }
        this.webMapService.handleServerUrl(serverUrl);
        return this.webMapService
            .getMapInfo()
            .then((mapInfo) =&gt; {
            return { mapId, mapInfo };
        }, <span class="fstat-no" title="function not covered" >error </span>=&gt; {
<span class="cstat-no" title="statement not covered" >            throw error;</span>
        })
            .catch(<span class="fstat-no" title="function not covered" >error </span>=&gt; {
<span class="cstat-no" title="statement not covered" >            console.log(error);</span>
        });
    }
    getAllMapLayers() {
        let promises = [];
        for (let i = 0; i &lt; this.data.length; i++) {
            const item = this.data[i];
            const { serverUrl, mapId } = item;
            this.webMapService = new WebMapService(mapId, item);
            const promise = this.getMapInfo(mapId, serverUrl);
            if (promise) {
                if (i === 0) {
                    promise.then(res =&gt; {
                        this.firstMapInfo = res.mapInfo;
                    });
                }
                promises.push(promise);
            }
        }
        return Promise.all(promises).then(res =&gt; {
            const data = [];
            res.forEach(item =&gt; {
                const { mapId, mapInfo } = item;
                const index = this.data.findIndex(item =&gt; item.mapId === mapId);
                data[index] = { mapId, layers: mapInfo &amp;&amp; mapInfo.layers ? [...mapInfo.layers] : <span class="branch-1 cbranch-no" title="branch not covered" >[] }</span>;
            });
            return data;
        });
    }
    mergeMapLayers() {
        const allLayersPromise = this.getAllMapLayers();
        return allLayersPromise.then(res =&gt; {
            let allLayers = [];
            const mapInfo = Object.assign({}, this.firstMapInfo);
            res.forEach(item =&gt; {
                const { mapId, layers } = item;
                const filterDatas = this.data.filter(item =&gt; +item.mapId === +mapId);
                filterDatas.forEach(filterData =&gt; {
                    const { layerId: filterLayer } = filterData || <span class="branch-1 cbranch-no" title="branch not covered" >{};</span>
                    if (filterLayer) {
                        const index = layers.findIndex(item =&gt; item.layerID === filterLayer || item.name === filterLayer);
                        if (index &gt; -1) {
                            allLayers.push(layers[index]);
                            layers.splice(index, 1);
                        }
                    }
                });
            });
            mapInfo.layers = allLayers;
            const result = this._dealSameLayerID(mapInfo);
            // @ts-ignore
            this.setLayersInfo(result.layers);
            return result;
        });
    }
    getMergeMapInfo() {
        return this.mergeMapLayers();
    }
    _dealSameLayerID(mapInfo) {
        const sumInfo = {};
        const { baseLayer, layers = <span class="branch-0 cbranch-no" title="branch not covered" >[] </span>} = mapInfo;
        <span class="missing-if-branch" title="if path not taken" >I</span>if (!this.checkSameLayer) {
            const baseInfo = <span class="cstat-no" title="statement not covered" >this._generateUniqueLayerId(baseLayer.name, 0);</span>
<span class="cstat-no" title="statement not covered" >            baseLayer.name = baseInfo.newId;</span>
        }
        const layerNames = layers.map(layer =&gt; layer.name);
        const _layers = layers.map((layer, index) =&gt; {
            if (!(layer.name in sumInfo)) {
                sumInfo[layer.name] = baseLayer.name === layer.name ? <span class="branch-0 cbranch-no" title="branch not covered" >1 </span>: 0;
            }
            const matchFirstIndex = layerNames.indexOf(layer.name);
            const matchLastIndex = layerNames.lastIndexOf(layer.name);
            <span class="missing-if-branch" title="if path not taken" >I</span>if (index &gt; matchFirstIndex &amp;&amp; <span class="branch-1 cbranch-no" title="branch not covered" >index &lt;= matchLastIndex)</span> {
<span class="cstat-no" title="statement not covered" >                sumInfo[layer.name] = sumInfo[layer.name] + 1;</span>
            }
            let layerID = sumInfo[layer.name] ? `${<span class="branch-0 cbranch-no" title="branch not covered" >layer.name}-${sumInfo[layer.name]}</span>` : layer.name;
            if (!this.checkSameLayer || layer.layerType !== 'raster') {
                const { newId, newIndex } = this._generateUniqueLayerId(layerID, sumInfo[layer.name]);
                sumInfo[layer.name] = newIndex;
                layerID = newId;
            }
            return Object.assign(layers[index], { layerID });
        });
        mapInfo.layers = _layers;
        mapInfo.baseLayer = baseLayer;
        return mapInfo;
    }
    _generateUniqueLayerId(newId, index) {
        return { newId, newIndex: index };
    }
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFxBZG1pbmlzdHJhdG9yXFxEZXNrdG9wXFx2dWUtaWNsaWVudFxcc3JjXFxtYXBib3hnbFxcZHJpbGwtbWFwXFxEcmlsbE1hcFZpZXdNb2RlbC50cyIsIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsTUFBTSxFQUFFLE1BQU0sNENBQTRDLENBQUM7QUFDcEUsT0FBTyxhQUFhLE1BQU0sNkNBQTZDLENBQUM7QUFDeEUsT0FBTyxJQUFJLE1BQU0sWUFBWSxDQUFDO0FBQzlCLE9BQU8sY0FBYyxNQUFNLHVCQUF1QixDQUFDO0FBQ25ELE9BQU8sU0FBUyxNQUFNLGtCQUFrQixDQUFDO0FBb0J6QyxNQUFNLENBQUMsT0FBTyxPQUFPLGVBQWdCLFNBQVEsTUFBTTtJQW9CakQsWUFBWSxJQUFJLEVBQUUsY0FBOEM7UUFDOUQsS0FBSyxFQUFFLENBQUM7UUFmVixnQkFBVyxHQUFhLEVBQUUsQ0FBQztRQUMzQixvQkFBZSxHQUFVLEVBQUUsQ0FBQztRQUU1QixlQUFVLEdBQVUsRUFBRSxDQUFDO1FBQ3ZCLGNBQVMsR0FBYSxFQUFFLENBQUM7UUFDekIsZUFBVSxHQUFVLEVBQUUsQ0FBQztRQUV2QixpQkFBWSxHQUFHLENBQUMsQ0FBQztRQUNqQixxQkFBZ0IsR0FBRyxHQUFHLEVBQUUsQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBQ25ELHdCQUFtQixHQUFHLEdBQUcsRUFBRSxDQUFDLElBQUksQ0FBQyxZQUFZLENBQUMsU0FBUyxDQUFDLENBQUM7UUFDekQsbUJBQWMsR0FBRyxDQUFDLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDM0MsbUJBQWMsR0FBRyxDQUFDLENBQUM7UUFDWCxtQkFBYyxHQUFHLElBQUksQ0FBQztRQUk1QixJQUFJLENBQUMsSUFBSSxHQUFHLFNBQVMsQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUM1QixJQUFJLENBQUMsY0FBYyxHQUFHLGNBQWMsQ0FBQztRQUNyQyxJQUFJLENB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LEtBQUssQ0FBQyxJQUFJLElBQUksT0FBTyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDO1lBQ3hGLElBQUksQ0FBQyxJQUFJLENBQUMsY0FBYyxJQUFJLEtBQUssQ0FBQyxTQUFTLEtBQUssUUFBUSxFQUFFO2dCQUN4RCxNQUFNLEVBQUUsS0FBSyxFQUFFLFFBQVEsRUFBRSxHQUFHLElBQUksQ0FBQyxzQkFBc0IsQ0FBQyxPQUFPLEVBQUUsT0FBTyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO2dCQUN0RixPQUFPLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxHQUFHLFFBQVEsQ0FBQztnQkFDL0IsT0FBTyxHQUFHLEtBQUssQ0FBQzthQUNqQjtZQUNELE9BQU8sTUFBTSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLEVBQUUsRUFBRSxPQUFPLEVBQUUsQ0FBQyxDQUFDO1FBQ25ELENBQUMsQ0FBQyxDQUFDO1FBQ0gsT0FBTyxDQUFDLE1BQU0sR0FBRyxPQUFPLENBQUM7UUFDekIsT0FBTyxDQUFDLFNBQVMsR0FBRyxTQUFTLENBQUM7UUFDOUIsT0FBTyxPQUFPLENBQUM7SUFDakIsQ0FBQztJQUVPLHNCQUFzQixDQUFDLEtBQUssRUFBRSxLQUFLO1FBQ3pDLE9BQU8sRUFBRSxLQUFLLEVBQUUsUUFBUSxFQUFFLEtBQUssRUFBRSxDQUFDO0lBQ3BDLENBQUM7Q0FDRiIsIm5hbWVzIjpbXSwic291cmNlcyI6WyJDOlxcVXNlcnNcXEFkbWluaXN0cmF0b3JcXERlc2t0b3BcXHZ1ZS1pY2xpZW50XFxzcmNcXG1hcGJveGdsXFxkcmlsbC1tYXBcXERyaWxsTWFwVmlld01vZGVsLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEV2ZW50cyB9IGZyb20gJ3Z1ZS1pY2xpZW50L3NyYy9jb21tb24vX3R5cGVzL2V2ZW50L0V2ZW50cyc7XHJcbmltcG9ydCBXZWJNYXBTZXJ2aWNlIGZyb20gJ3Z1ZS1pY2xpZW50L3NyYy9jb21tb24vX3V0aWxzL1dlYk1hcFNlcnZpY2UnO1xyXG5pbXBvcnQgYmJveCBmcm9tICdAdHVyZi9iYm94JztcclxuaW1wb3J0IHRyYW5zZm9ybVNjYWxlIGZyb20gJ0B0dXJmL3RyYW5zZm9ybS1zY2FsZSc7XHJcbmltcG9ydCBjbG9uZWRlZXAgZnJvbSAnbG9kYXNoLmNsb25lZGVlcCc7XHJcblxyXG5pbnRlcmZhY2UgRHJpbGxNYXBQYXJhbXMge1xyXG4gIGxheWVySWQ6IHN0cmluZztcclxuICBmb3JlaWduRmllbGQ/OiBzdHJpbmc7XHJcbiAgcHJpbWFyeUZpZWxkOiBzdHJpbmc7XHJcbiAgc2VydmVyVXJsOiBzdHJpbmc7XHJcbiAgbWFwSWQ6IHN0cmluZztcclxuICBhY2Nlc3NUb2tlbj86IHN0cmluZztcclxuICBhY2Nlc3NLZXk/OiBzdHJpbmc7XHJcbiAgdGlhbmRpdHVLZXk/OiBzdHJpbmc7XHJcbiAgZ29vZ2xlTWFwc0FQSUtleT86IHN0cmluZztcclxuICBnb29nbGVNYXBzTGFuZ3VhZ2U/OiBzdHJpbmc7XHJcbiAgd2l0aENyZWRlbnRpYWxzPzogYm9vbGVhbjtcclxuICBleGNsdWRlUG9ydGFsUHJveHlVcmw/OiBib29sZWFuO1xyXG4gIGlzU3VwZXJNYXBPbmxpbmU/OiBib29sZWFuO1xyXG4gIHByb3h5PzogYm9vbGVhbiB8IHN0cmluZztcclxuICBpcG9ydGFsU2VydmljZVByb3h5VXJsUHJlZml4Pzogc3RyaW5nO1xyXG4gIFtwcm9wTmFtZTogc3RyaW5nXTogYW55O1xyXG59XHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFdlYk1hcFZpZXdNb2RlbCBleHRlbmRzIEV2ZW50cyB7XHJcbiAgd2ViTWFwU2VydmljZTogV2ViTWFwU2VydmljZTtcclxuICBtYXA6IG1hcGJveGdsVHlwZXMuTWFwO1xyXG4gIGRhdGE6IERyaWxsTWFwUGFyYW1zW107XHJcbiAgZHJpbGxBbmltYXRpb246IG1hcGJveGdsVHlwZXMuRml0Qm91bmRzT3B0aW9ucztcclxuICBmaXJzdE1hcEluZm86IGFueTtcclxuICBsYXllcnNPbk1hcDogc3RyaW5nW10gPSBbXTtcclxuICBsYXllckZpbHRlckxpc3Q6IGFueVtdID0gW107XHJcbiAgZmllbGRWYWx1ZTogc3RyaW5nO1xyXG4gIGJvdW5kc0xpc3Q6IGFueVtdID0gW107XHJcbiAgYWxsTGF5ZXJzOiBzdHJpbmdbXSA9IFtdO1xyXG4gIGxheWVyc0luZm86IGFueVtdID0gW107XHJcbiAgbGF5ZXJJZDogc3RyaW5nO1xyXG4gIGN1cnJlbnRJbmRleCA9IDA7XHJcbiAgY2hhbmdlQ3Vyc29yR3JhYiA9ICgpID0+IHRoaXMuY2hhbmdlQ3Vyc29yKCdncmFiJyk7XHJcbiAgY2hhbmdlQ3Vyc29yUG9pbnRlciA9ICgpID0+IHRoaXMuY2hhbmdlQ3Vyc29yKCdwb2ludGVyJyk7XHJcbiAgZHJpbGxOZXh0TWFwRm4gPSBlID0+IHRoaXMuZHJpbGxOZXh0TWFwKGUpO1xyXG4gIGNsaWNrVG9sZXJhbmNlID0gNTtcclxuICBwcml2YXRlIGNoZWNrU2FtZUxheWVyID0gdHJ1ZTtcclxuXHJcbiAgY29uc3RydWN0b3IoZGF0YSwgZHJpbGxBbmltYXRpb246IG1hcGJveGdsVHlwZXMuRml0Qm91bmRzT3B0aW9ucykge1xyXG4gICAgc3VwZXIoKTtcclxuICAgIHRoaXMuZGF0YSA9IGNsb25lZGVlcChkYXRhKTtcclxuICAgIHRoaXMuZHJpbGxBbmltYXRpb24gPSBkcmlsbEFuaW1hdGlvbjtcclxuICAgIHRoaXMuZXZlbnRUeXBlcyA9IFsnZHJpbGxtYXAnXTtcclxuICB9XHJcblxyXG4gIHNldE1hcChtYXA6IG1hcGJveGdsVHlwZXMuTWFwKSB7XHJcbiAgICB0aGlzLm1hcCA9IG1hcDtcclxuICB9XHJcblxyXG4gIHNldERhdGEoZGF0YSk6IHZvaWQge1xyXG4gICAgdGhpcy5kYXRhID0gY2xvbmVkZWVwKGRhdGEpO1xyXG4gIH1cclxuXHJcbiAgc2V0QWxsTGF5ZXJzKGxheWVySWRzOiBzdHJpbmdbXSkge1xyXG4gICAgdGhpcy5hbGxMYXllcnMgPSBsYXllcklkcztcclxuICB9XHJcblxyXG4gIHNldExheWVyc0luZm8obGF5ZXJzSW5mbzogYW55W10pIHtcclxuICAgIHRoaXMubGF5ZXJzSW5mbyA9IGxheWVyc0luZm87XHJcbiAgfVxyXG5cclxuICBnZXRJc0FkbWluaXN0cmF0aXZlKFxyXG4gICAgbGF5ZXJJbmZvOiB7IGRhdGFTb3VyY2U/OiB7IGFkbWluaXN0cmF0aXZlSW5mbz86IHsgZGl2aXNpb25UeXBlOyBkaXZpc2lvbkZpZWxkIH0gfSB9LFxyXG4gICAgbGF5ZXJJbmZvMTogeyBkYXRhU291cmNlPzogeyBhZG1pbmlzdHJhdGl2ZUluZm8/OiB7IGRpdmlzaW9uVHlwZTsgZGl2aXNpb25GaWVsZCB9IH0gfSxcclxuICAgIHByaW1hcnlGaWVsZDogc3RyaW5nLFxyXG4gICAgZm9yZWlnbkZpZWxkOiBzdHJpbmdcclxuICApIHtcclxuICAgIGNvbnN0IGFkbWluaXN0cmF0aXZlSW5mbyA9IGxheWVySW5mby5kYXRhU291cmNlICYmIGxheWVySW5mby5kYXRhU291cmNlLmFkbWluaXN0cmF0aXZlSW5mbztcclxuICAgIGNvbnN0IHsgZGl2aXNpb25UeXBlLCBkaXZpc2lvbkZpZWxkIH0gPSBhZG1pbmlzdHJhdGl2ZUluZm8gfHwge307XHJcbiAgICBjb25zdCBhZG1pbmlzdHJhdGl2ZUluZm8xID0gbGF5ZXJJbmZvMS5kYXRhU291cmNlICYmIGxheWVySW5mbzEuZGF0YVNvdXJjZS5hZG1pbmlzdHJhdGl2ZUluZm87XHJcbiAgICBjb25zdCB7IGRpdmlzaW9uVHlwZTogZGl2aXNpb25UeXBlMSB9ID0gYWRtaW5pc3RyYXRpdmVJbmZvMSB8fCB7fTtcclxuICAgIGlmICghYWRtaW5pc3RyYXRpdmVJbmZvIHx8ICFhZG1pbmlzdHJhdGl2ZUluZm8xIHx8IHByaW1hcnlGaWVsZCAhPT0gZGl2aXNpb25GaWVsZCB8fCBmb3JlaWduRmllbGQgIT09ICdQcm92aW5jZScpIHtcclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIFsn55yB5Lu9JywgJ1Byb3ZpbmNlJ10uaW5jbHVkZXMoZGl2aXNpb25UeXBlKSAmJiBbJ+WfjuW4gicsICdDaXR5J10uaW5jbHVkZXMoZGl2aXNpb25UeXBlMSk7XHJcbiAgfVxyXG5cclxuICBjaGFuZ2VDdXJyZW50SW5kZXgobmV3VmFsLCBvbGRWYWwpIHtcclxuICAgIHRoaXMuY3VycmVudEluZGV4ID0gbmV3VmFsO1xyXG4gICAgY29uc3QgeyBmb3JlaWduRmllbGQgfSA9IHRoaXMuZGF0YVtuZXdWYWxdO1xyXG4gICAgY29uc3QgbGF5ZXJJZCA9IHRoaXMuYWxsTGF5ZXJzW25ld1ZhbF07XHJcbiAgICBpZiAobmV3VmFsID4gb2xkVmFsKSB7XHJcbiAgICAgIGNvbnN0IHByaW1hcnlGaWVsZCA9IHRoaXMuZGF0YVtvbGRWYWxdLnByaW1hcnlGaWVsZDtcclxuICAgICAgY29uc3Qgb2xkTGF5ZXJJZCA9IHRoaXMuYWxsTGF5ZXJzW29sZFZhbF07XHJcblxyXG4gICAgICBjb25zdCBpc0FkbWluaXN0cmF0aXZlID0gdGhpcy5nZXRJc0FkbWluaXN0cmF0aXZlKFxyXG4gICAgICAgIHRoaXMubGF5ZXJzSW5mby5maW5kKGl0ZW0gPT4gaXRlbS5sYXllcklEID09PSBvbGRMYXllcklkKSxcclxuICAgICAgICB0aGlzLmxheWVyc0luZm8uZmluZChpdGVtID0+IGl0ZW0ubGF5ZXJJRCA9PT0gbGF5ZXJJZCksXHJcbiAgICAgICAgcHJpbWFyeUZpZWxkLFxyXG4gICAgICAgIGZvcmVpZ25GaWVsZFxyXG4gICAgICApO1xyXG4gICAgICBpZiAoaXNBZG1pbmlzdHJhdGl2ZSkge1xyXG4gICAgICAgIGxldCBmaWx0ZXIgPSBbJ3NsaWNlJywgWydnZXQnLCBmb3JlaWduRmllbGRdLCAwLCAyXTtcclxuICAgICAgICBsZXQgZmllbGRWYWx1ZSA9IHRoaXMuZmllbGRWYWx1ZS5zbGljZSgwLCAyKTtcclxuICAgICAgICAvLyDlvKDlrrblj6PluILlkozlvKDlrrbnlYzluIIgIOmYv+aLieWWhOebnyDpmL/mi4nlsJTluIJcclxuICAgICAgICBpZiAodGhpcy5maWVsZFZhbHVlID09PSAn5byg5a62JyB8fCB0aGlzLmZpZWxkVmFsdWUgPT09ICfpmL/mi4knKSB7XHJcbiAgICAgICAgICBmaWx0ZXIgPSBbJ3NsaWNlJywgWydnZXQnLCBmb3JlaWduRmllbGRdLCAwLCAzXTtcclxuICAgICAgICAgIGZpZWxkVmFsdWUgPSB0aGlzLmZpZWxkVmFsdWUuc2xpY2UoMCwgMyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnNvbGUubG9nKGZpbHRlciwgZmllbGRWYWx1ZSk7XHJcblxyXG4gICAgICAgIHRoaXMuc2V0RmlsdGVyKG5ld1ZhbCwgWydhbGwnLCBbJz09JywgZmlsdGVyLCBmaWVsZFZhbHVlXV0sIGxheWVySWQpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRoaXMuc2V0RmlsdGVyKG5ld1ZhbCwgWydhbGwnLCBbJz09JywgZm9yZWlnbkZpZWxkLCB0aGlzLmZpZWxkVmFsdWVdXSwgbGF5ZXJJZCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGlmIChuZXdWYWwgPCBvbGRWYWwpIHtcclxuICAgICAgaWYgKHRoaXMuYm91bmRzTGlzdC5sZW5ndGggPiAxKSB7XHJcbiAgICAgICAgdGhpcy5ib3VuZHNMaXN0LnBvcCgpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICB0aGlzLmZpdFRvQm91bmRzKHRoaXMuYm91bmRzTGlzdFtuZXdWYWxdKTtcclxuICAgIHRoaXMuc2V0VmlzaWJpbGl0eShuZXdWYWwpO1xyXG4gIH1cclxuXHJcbiAgaW5pdChzZXRMYXllckZpbHRlciA9IHRydWUpOiB2b2lkIHtcclxuICAgIGNvbnN0IGNlbnRlciA9IHRoaXMubWFwLmdldENlbnRlcigpO1xyXG4gICAgY29uc3Qgem9vbSA9IHRoaXMubWFwLmdldFpvb20oKTtcclxuICAgIHRoaXMuYm91bmRzTGlzdCA9IFt7IGNlbnRlciwgem9vbSB9XTtcclxuICAgIHRoaXMubGF5ZXJzT25NYXAgPSB0aGlzLmFsbExheWVycy5maWx0ZXIobGF5ZXJJZCA9PiB0aGlzLm1hcC5nZXRMYXllcihsYXllcklkKSk7XHJcbiAgICBpZiAoc2V0TGF5ZXJGaWx0ZXIpIHtcclxuICAgICAgdGhpcy5sYXllckZpbHRlckxpc3QgPSB0aGlzLmdldExheWVyRmlsdGVyTGlzdCgpO1xyXG4gICAgfVxyXG4gICAgY29uc3QgY2xpY2tlZExheWVycyA9XHJcbiAgICAgIHRoaXMubGF5ZXJzT25NYXAubGVuZ3RoID4gMSA/IHRoaXMubGF5ZXJzT25NYXAuc2xpY2UoMCwgdGhpcy5sYXllcnNPbk1hcC5sZW5ndGggLSAxKSA6IHRoaXMubGF5ZXJzT25NYXA7XHJcbiAgICB0aGlzLnNldFZpc2liaWxpdHkoKTtcclxuICAgIHRoaXMuY2hhbmdlQ2xpY2tlZExheWVyc0N1cnNvcihjbGlja2VkTGF5ZXJzKTtcclxuICAgIHRoaXMubWFwLm9mZignY2xpY2snLCB0aGlzLmRyaWxsTmV4dE1hcEZuKTtcclxuICAgIHRoaXMubWFwLm9uKCdjbGljaycsIHRoaXMuZHJpbGxOZXh0TWFwRm4pO1xyXG4gIH1cclxuXHJcbiAgZ2V0TGF5ZXJGaWx0ZXJMaXN0KGxheWVycyA9IHRoaXMubGF5ZXJzT25NYXApOiBhbnlbXSB7XHJcbiAgICBsZXQgbGF5ZXJGaWx0ZXJMaXN0ID0gW107XHJcbiAgICBsYXllcnMuZm9yRWFjaChsYXllcklkID0+IHtcclxuICAgICAgbGV0IHN0cm9rZUxpbmVGaWx0ZXIgPSBbXTtcclxuICAgICAgY29uc3Qgc3Ryb2tlTGluZUxheWVyID0gbGF5ZXJJZCArICctc3Ryb2tlTGluZSc7XHJcbiAgICAgIGNvbnN0IGxheWVyRmlsdGVyID0gdGhpcy5tYXAuZ2V0RmlsdGVyKGxheWVySWQpO1xyXG5cclxuICAgICAgaWYgKHRoaXMubWFwLmdldExheWVyKHN0cm9rZUxpbmVMYXllcikpIHtcclxuICAgICAgICBzdHJva2VMaW5lRmlsdGVyID0gdGhpcy5tYXAuZ2V0RmlsdGVyKHN0cm9rZUxpbmVMYXllcik7XHJcbiAgICAgIH1cclxuICAgICAgbGF5ZXJGaWx0ZXJMaXN0LnB1c2goeyBbbGF5ZXJJZF06IGxheWVyRmlsdGVyLCBbc3Ryb2tlTGluZUxheWVyXTogc3Ryb2tlTGluZUZpbHRlciB9KTtcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIGxheWVyRmlsdGVyTGlzdDtcclxuICB9XHJcblxyXG4gIHNldEZpbHRlcihjdXJyZW50SW5kZXg6IG51bWJlciwgZmlsdGVyOiBhbnlbXSwgbGF5ZXJJZDogc3RyaW5nKTogdm9pZCB7XHJcbiAgICBpZiAoZmlsdGVyKSB7XHJcbiAgICAgIGNvbnN0IGxheWVyRmlsdGVyID0gdGhpcy5sYXllckZpbHRlckxpc3RbY3VycmVudEluZGV4XSB8fCB7fTtcclxuICAgICAgY29uc3Qgc3Ryb2tlTGluZUxheWVyID0gbGF5ZXJJZCArICctc3Ryb2tlTGluZSc7XHJcbiAgICAgIGlmICh0aGlzLm1hcC5nZXRMYXllcihsYXllcklkKSkge1xyXG4gICAgICAgIGxldCBvcmlnaW5GaWx0ZXIgPSBsYXllckZpbHRlcltsYXllcklkXTtcclxuICAgICAgICBpZiAob3JpZ2luRmlsdGVyICYmIG9yaWdpbkZpbHRlci5sZW5ndGggPT09IDEgJiYgb3JpZ2luRmlsdGVyWzBdID09PSAnYWxsJykge1xyXG4gICAgICAgICAgb3JpZ2luRmlsdGVyID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5tYXAuc2V0RmlsdGVyKGxheWVySWQsIG9yaWdpbkZpbHRlciA/IFsnYWxsJywgZmlsdGVyLCBvcmlnaW5GaWx0ZXJdIDogWydhbGwnLCBmaWx0ZXJdKTtcclxuICAgICAgfVxyXG4gICAgICBpZiAodGhpcy5tYXAuZ2V0TGF5ZXIoc3Ryb2tlTGluZUxheWVyKSkge1xyXG4gICAgICAgIGxldCBzdHJva2VGaWx0ZXIgPSBsYXllckZpbHRlcltzdHJva2VMaW5lTGF5ZXJdO1xyXG4gICAgICAgIGlmIChzdHJva2VGaWx0ZXIgJiYgc3Ryb2tlRmlsdGVyLmxlbmd0aCA9PT0gMSAmJiBzdHJva2VGaWx0ZXJbMF0gPT09ICdhbGwnKSB7XHJcbiAgICAgICAgICBzdHJva2VGaWx0ZXIgPSBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLm1hcC5zZXRGaWx0ZXIoc3Ryb2tlTGluZUxheWVyLCBzdHJva2VGaWx0ZXIgPyBbJ2FsbCcsIGZpbHRlciwgc3Ryb2tlRmlsdGVyXSA6IFsnYWxsJywgZmlsdGVyXSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIHNldFZpc2liaWxpdHkoY3VycmVudEluZGV4ID0gMCwgbGF5ZXJzID0gdGhpcy5sYXllcnNPbk1hcCk6IHZvaWQge1xyXG4gICAgbGF5ZXJzLmZvckVhY2goKGl0ZW0sIGluZGV4KSA9PiB7XHJcbiAgICAgIGNvbnN0IHZpc2libGUgPSBjdXJyZW50SW5kZXggPT09IGluZGV4ID8gJ3Zpc2libGUnIDogJ25vbmUnO1xyXG4gICAgICB0aGlzLm1hcC5zZXRMYXlvdXRQcm9wZXJ0eShpdGVtLCAndmlzaWJpbGl0eScsIHZpc2libGUpO1xyXG4gICAgICB0aGlzLm1hcC5zZXRMYXlvdXRQcm9wZXJ0eShpdGVtICsgJy1zdHJva2VMaW5lJywgJ3Zpc2liaWxpdHknLCB2aXNpYmxlKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZml0VG9Cb3VuZHMoXHJcbiAgICBiYm94czogYW55W10gfCB7IGNlbnRlcjogW251bWJlciwgbnVtYmVyXTsgem9vbTogbnVtYmVyIH0sXHJcbiAgICBkcmlsbEFuaW1hdGlvbiA9IHRoaXMuZHJpbGxBbmltYXRpb25cclxuICApOiB2b2lkIHtcclxuICAgIGlmIChiYm94cyBpbnN0YW5jZW9mIEFycmF5KSB7XHJcbiAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgdGhpcy5tYXAuZml0Qm91bmRzKGJib3hzLCBkcmlsbEFuaW1hdGlvbik7XHJcbiAgICB9IGVsc2UgaWYgKGJib3hzIGluc3RhbmNlb2YgT2JqZWN0KSB7XHJcbiAgICAgIGNvbnN0IHsgY2VudGVyLCB6b29tIH0gPSBiYm94cztcclxuICAgICAgdGhpcy5tYXAuc2V0Q2VudGVyKGNlbnRlcik7XHJcbiAgICAgIHRoaXMubWFwLnNldFpvb20oem9vbSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBkcmlsbE5leHRNYXAoZTogYW55KTogdm9pZCB7XHJcbiAgICBjb25zdCBmZWF0dXJlID0gdGhpcy5iaW5kUXVlcnlSZW5kZXJlZEZlYXR1cmVzKGUsIFt0aGlzLmFsbExheWVyc1t0aGlzLmN1cnJlbnRJbmRleF1dKTtcclxuICAgIGlmIChmZWF0dXJlICYmIGZlYXR1cmUucHJvcGVydGllcykge1xyXG4gICAgICBpZiAodGhpcy5jdXJyZW50SW5kZXggKyAxID49IHRoaXMuZGF0YS5sZW5ndGgpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgICAgY29uc3QgYmJveHMgPSB0aGlzLmdldEJib3hCeUZlYXR1cmUoZmVhdHVyZSk7XHJcbiAgICAgIGNvbnN0IHByaW1hcnlGaWVsZCA9IHRoaXMuZGF0YVt0aGlzLmN1cnJlbnRJbmRleF0ucHJpbWFyeUZpZWxkO1xyXG4gICAgICB0aGlzLmZpZWxkVmFsdWUgPSBmZWF0dXJlLnByb3BlcnRpZXNbcHJpbWFyeUZpZWxkXTtcclxuICAgICAgdGhpcy5ib3VuZHNMaXN0LnB1c2goYmJveHMpO1xyXG4gICAgICB0aGlzLnRyaWdnZXJFdmVudCgnZHJpbGxtYXAnLCB7IGluZGV4OiAxIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKCFmZWF0dXJlKSB7XHJcbiAgICAgIHRoaXMucmV0dXJuQWJvdmVMYXllcigpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcmV0dXJuQWJvdmVMYXllcigpIHtcclxuICAgIGlmICh0aGlzLmN1cnJlbnRJbmRleCAtIDEgPCAwKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIHRoaXMudHJpZ2dlckV2ZW50KCdkcmlsbG1hcCcsIHsgaW5kZXg6IC0xIH0pO1xyXG4gIH1cclxuXHJcbiAgZ2V0QmJveEJ5RmVhdHVyZShmZWF0dXJlKTogYW55W10ge1xyXG4gICAgY29uc3QgYmJveHMgPSBiYm94KHRyYW5zZm9ybVNjYWxlKGZlYXR1cmUsIDIpKTtcclxuICAgIHJldHVybiAoXHJcbiAgICAgIGJib3hzICYmIFtcclxuICAgICAgICBbYmJveHNbMF0sIGJib3hzWzFdXSxcclxuICAgICAgICBbYmJveHNbMl0sIGJib3hzWzNdXVxyXG4gICAgICBdXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgYmluZFF1ZXJ5UmVuZGVyZWRGZWF0dXJlcyhlOiBhbnksIGxheWVycyk6IGFueSB7XHJcbiAgICBpZiAoIWxheWVycykge1xyXG4gICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICAgIGNvbnN0IG1hcCA9IGUudGFyZ2V0O1xyXG4gICAgY29uc3QgYmJveCA9IFtcclxuICAgICAgW2UucG9pbnQueCAtIHRoaXMuY2xpY2tUb2xlcmFuY2UsIGUucG9pbnQueSAtIHRoaXMuY2xpY2tUb2xlcmFuY2VdLFxyXG4gICAgICBbZS5wb2ludC54ICsgdGhpcy5jbGlja1RvbGVyYW5jZSwgZS5wb2ludC55ICsgdGhpcy5jbGlja1RvbGVyYW5jZV1cclxuICAgIF07XHJcbiAgICBjb25zdCBmZWF0dXJlcyA9IG1hcC5xdWVyeVJlbmRlcmVkRmVhdHVyZXMoYmJveCwge1xyXG4gICAgICBsYXllcnNcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIGZlYXR1cmVzICYmIGZlYXR1cmVzWzBdO1xyXG4gIH1cclxuXHJcbiAgY2hhbmdlQ2xpY2tlZExheWVyc0N1cnNvcihsYXllcnM6IHN0cmluZ1tdKTogdm9pZCB7XHJcbiAgICBsYXllcnMuZm9yRWFjaChsYXllcklkID0+IHtcclxuICAgICAgdGhpcy5tYXAub24oJ21vdXNlbW92ZScsIGxheWVySWQsIHRoaXMuY2hhbmdlQ3Vyc29yUG9pbnRlcik7XHJcbiAgICAgIHRoaXMubWFwLm9uKCdtb3VzZWxlYXZlJywgbGF5ZXJJZCwgdGhpcy5jaGFuZ2VDdXJzb3JHcmFiKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgY2hhbmdlQ3Vyc29yKGN1cnNvclR5cGUgPSAncG9pbnQnKTogdm9pZCB7XHJcbiAgICBpZiAodGhpcy5tYXAgJiYgdGhpcy5tYXAuZ2V0Q2FudmFzKCkpIHtcclxuICAgICAgdGhpcy5tYXAuZ2V0Q2FudmFzKCkuc3R5bGUuY3Vyc29yID0gY3Vyc29yVHlwZTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHJlbW92ZUN1cnNvckV2ZW50KGxheWVycyA9IHRoaXMubGF5ZXJzT25NYXApOiB2b2lkIHtcclxuICAgIGxheWVycy5mb3JFYWNoKGxheWVySWQgPT4ge1xyXG4gICAgICB0aGlzLm1hcC5vZmYoJ21vdXNlbW92ZScsIGxheWVySWQsIHRoaXMuY2hhbmdlQ3Vyc29yUG9pbnRlcik7XHJcbiAgICAgIHRoaXMubWFwLm9mZignbW91c2VsZWF2ZScsIGxheWVySWQsIHRoaXMuY2hhbmdlQ3Vyc29yR3JhYik7XHJcbiAgICAgIHRoaXMuY2hhbmdlQ3Vyc29yKCdwb2ludCcpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICByZW1vdmVkKCkge1xyXG4gICAgaWYgKCF0aGlzLm1hcCkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICB0aGlzLm1hcC5vZmYoJ2NsaWNrJywgdGhpcy5kcmlsbE5leHRNYXBGbik7XHJcbiAgICB0aGlzLnJlbW92ZUN1cnNvckV2ZW50KCk7XHJcbiAgfVxyXG5cclxuICBnZXRNYXBJbmZvKG1hcElkOiBzdHJpbmcsIHNlcnZlclVybDogc3RyaW5nKTogUHJvbWlzZTxhbnk+IHtcclxuICAgIGlmICghc2VydmVyVXJsIHx8ICFtYXBJZCkge1xyXG4gICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICAgIHRoaXMud2ViTWFwU2VydmljZS5oYW5kbGVTZXJ2ZXJVcmwoc2VydmVyVXJsKTtcclxuICAgIHJldHVybiB0aGlzLndlYk1hcFNlcnZpY2VcclxuICAgICAgLmdldE1hcEluZm8oKVxyXG4gICAgICAudGhlbihcclxuICAgICAgICAobWFwSW5mbzogYW55KSA9PiB7XHJcbiAgICAgICAgICByZXR1cm4geyBtYXBJZCwgbWFwSW5mbyB9O1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZXJyb3IgPT4ge1xyXG4gICAgICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICAgICAgfVxyXG4gICAgICApXHJcbiAgICAgIC5jYXRjaChlcnJvciA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2coZXJyb3IpO1xyXG4gICAgICB9KTtcclxuICB9XHJcblxyXG4gIGdldEFsbE1hcExheWVycygpOiBQcm9taXNlPGFueT4ge1xyXG4gICAgbGV0IHByb21pc2VzID0gW107XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuZGF0YS5sZW5ndGg7IGkrKykge1xyXG4gICAgICBjb25zdCBpdGVtID0gdGhpcy5kYXRhW2ldO1xyXG4gICAgICBjb25zdCB7IHNlcnZlclVybCwgbWFwSWQgfSA9IGl0ZW07XHJcbiAgICAgIHRoaXMud2ViTWFwU2VydmljZSA9IG5ldyBXZWJNYXBTZXJ2aWNlKG1hcElkLCBpdGVtKTtcclxuICAgICAgY29uc3QgcHJvbWlzZSA9IHRoaXMuZ2V0TWFwSW5mbyhtYXBJZCwgc2VydmVyVXJsKTtcclxuICAgICAgaWYgKHByb21pc2UpIHtcclxuICAgICAgICBpZiAoaSA9PT0gMCkge1xyXG4gICAgICAgICAgcHJvbWlzZS50aGVuKHJlcyA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuZmlyc3RNYXBJbmZvID0gcmVzLm1hcEluZm87XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcHJvbWlzZXMucHVzaChwcm9taXNlKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIFByb21pc2UuYWxsKHByb21pc2VzKS50aGVuKHJlcyA9PiB7XHJcbiAgICAgIGNvbnN0IGRhdGEgPSBbXTtcclxuICAgICAgcmVzLmZvckVhY2goaXRlbSA9PiB7XHJcbiAgICAgICAgY29uc3QgeyBtYXBJZCwgbWFwSW5mbyB9ID0gaXRlbTtcclxuICAgICAgICBjb25zdCBpbmRleCA9IHRoaXMuZGF0YS5maW5kSW5kZXgoaXRlbSA9PiBpdGVtLm1hcElkID09PSBtYXBJZCk7XHJcbiAgICAgICAgZGF0YVtpbmRleF0gPSB7IG1hcElkLCBsYXllcnM6IG1hcEluZm8gJiYgbWFwSW5mby5sYXllcnMgPyBbLi4ubWFwSW5mby5sYXllcnNdIDogW10gfTtcclxuICAgICAgfSk7XHJcbiAgICAgIHJldHVybiBkYXRhO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBtZXJnZU1hcExheWVycygpOiBQcm9taXNlPGFueT4ge1xyXG4gICAgY29uc3QgYWxsTGF5ZXJzUHJvbWlzZSA9IHRoaXMuZ2V0QWxsTWFwTGF5ZXJzKCk7XHJcbiAgICByZXR1cm4gYWxsTGF5ZXJzUHJvbWlzZS50aGVuKHJlcyA9PiB7XHJcbiAgICAgIGxldCBhbGxMYXllcnMgPSBbXTtcclxuICAgICAgY29uc3QgbWFwSW5mbyA9IHsgLi4udGhpcy5maXJzdE1hcEluZm8gfTtcclxuICAgICAgcmVzLmZvckVhY2goaXRlbSA9PiB7XHJcbiAgICAgICAgY29uc3QgeyBtYXBJZCwgbGF5ZXJzIH0gPSBpdGVtO1xyXG4gICAgICAgIGNvbnN0IGZpbHRlckRhdGFzID0gdGhpcy5kYXRhLmZpbHRlcihpdGVtID0+ICtpdGVtLm1hcElkID09PSArbWFwSWQpO1xyXG4gICAgICAgIGZpbHRlckRhdGFzLmZvckVhY2goZmlsdGVyRGF0YSA9PiB7XHJcbiAgICAgICAgICBjb25zdCB7IGxheWVySWQ6IGZpbHRlckxheWVyIH0gPSBmaWx0ZXJEYXRhIHx8IHt9O1xyXG4gICAgICAgICAgaWYgKGZpbHRlckxheWVyKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gbGF5ZXJzLmZpbmRJbmRleChpdGVtID0+IGl0ZW0ubGF5ZXJJRCA9PT0gZmlsdGVyTGF5ZXIgfHwgaXRlbS5uYW1lID09PSBmaWx0ZXJMYXllcik7XHJcbiAgICAgICAgICAgIGlmIChpbmRleCA+IC0xKSB7XHJcbiAgICAgICAgICAgICAgYWxsTGF5ZXJzLnB1c2gobGF5ZXJzW2luZGV4XSk7XHJcbiAgICAgICAgICAgICAgbGF5ZXJzLnNwbGljZShpbmRleCwgMSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgfSk7XHJcbiAgICAgIG1hcEluZm8ubGF5ZXJzID0gYWxsTGF5ZXJzO1xyXG4gICAgICBjb25zdCByZXN1bHQgPSB0aGlzLl9kZWFsU2FtZUxheWVySUQobWFwSW5mbyk7XHJcbiAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgdGhpcy5zZXRMYXllcnNJbmZvKHJlc3VsdC5sYXllcnMpO1xyXG4gICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBnZXRNZXJnZU1hcEluZm8oKTogUHJvbWlzZTxhbnk+IHtcclxuICAgIHJldHVybiB0aGlzLm1lcmdlTWFwTGF5ZXJzKCk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIF9kZWFsU2FtZUxheWVySUQobWFwSW5mbyk6IE9iamVjdCB7XHJcbiAgICBjb25zdCBzdW1JbmZvOiBPYmplY3QgPSB7fTtcclxuICAgIGNvbnN0IHsgYmFzZUxheWVyLCBsYXllcnMgPSBbXSB9ID0gbWFwSW5mbztcclxuICAgIGlmICghdGhpcy5jaGVja1NhbWVMYXllcikge1xyXG4gICAgICBjb25zdCBiYXNlSW5mbyA9IHRoaXMuX2dlbmVyYXRlVW5pcXVlTGF5ZXJJZChiYXNlTGF5ZXIubmFtZSwgMCk7XHJcbiAgICAgIGJhc2VMYXllci5uYW1lID0gYmFzZUluZm8ubmV3SWQ7XHJcbiAgICB9XHJcbiAgICBjb25zdCBsYXllck5hbWVzID0gbGF5ZXJzLm1hcChsYXllciA9PiBsYXllci5uYW1lKTtcclxuICAgIGNvbnN0IF9sYXllcnM6IEFycmF5PE9iamVjdD4gPSBsYXllcnMubWFwKChsYXllciwgaW5kZXgpID0+IHtcclxuICAgICAgaWYgKCEobGF5ZXIubmFtZSBpbiBzdW1JbmZvKSkge1xyXG4gICAgICAgIHN1bUluZm9bbGF5ZXIubmFtZV0gPSBiYXNlTGF5ZXIubmFtZSA9PT0gbGF5ZXIubmFtZSA/IDEgOiAwO1xyXG4gICAgICB9XHJcbiAgICAgIGNvbnN0IG1hdGNoRmlyc3RJbmRleCA9IGxheWVyTmFtZXMuaW5kZXhPZihsYXllci5uYW1lKTtcclxuICAgICAgY29uc3QgbWF0Y2hMYXN0SW5kZXggPSBsYXllck5hbWVzLmxhc3RJbmRleE9mKGxheWVyLm5hbWUpO1xyXG4gICAgICBpZiAoaW5kZXggPiBtYXRjaEZpcnN0SW5kZXggJiYgaW5kZXggPD0gbWF0Y2hMYXN0SW5kZXgpIHtcclxuICAgICAgICBzdW1JbmZvW2xheWVyLm5hbWVdID0gc3VtSW5mb1tsYXllci5uYW1lXSArIDE7XHJcbiAgICAgIH1cclxuICAgICAgbGV0IGxheWVySUQgPSBzdW1JbmZvW2xheWVyLm5hbWVdID8gYCR7bGF5ZXIubmFtZX0tJHtzdW1JbmZvW2xheWVyLm5hbWVdfWAgOiBsYXllci5uYW1lO1xyXG4gICAgICBpZiAoIXRoaXMuY2hlY2tTYW1lTGF5ZXIgfHwgbGF5ZXIubGF5ZXJUeXBlICE9PSAncmFzdGVyJykge1xyXG4gICAgICAgIGNvbnN0IHsgbmV3SWQsIG5ld0luZGV4IH0gPSB0aGlzLl9nZW5lcmF0ZVVuaXF1ZUxheWVySWQobGF5ZXJJRCwgc3VtSW5mb1tsYXllci5uYW1lXSk7XHJcbiAgICAgICAgc3VtSW5mb1tsYXllci5uYW1lXSA9IG5ld0luZGV4O1xyXG4gICAgICAgIGxheWVySUQgPSBuZXdJZDtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihsYXllcnNbaW5kZXhdLCB7IGxheWVySUQgfSk7XHJcbiAgICB9KTtcclxuICAgIG1hcEluZm8ubGF5ZXJzID0gX2xheWVycztcclxuICAgIG1hcEluZm8uYmFzZUxheWVyID0gYmFzZUxheWVyO1xyXG4gICAgcmV0dXJuIG1hcEluZm87XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIF9nZW5lcmF0ZVVuaXF1ZUxheWVySWQobmV3SWQsIGluZGV4KSB7XHJcbiAgICByZXR1cm4geyBuZXdJZCwgbmV3SW5kZXg6IGluZGV4IH07XHJcbiAgfVxyXG59XHJcbiJdLCJ2ZXJzaW9uIjozfQ==</pre></td></tr></table></pre>

                <div class='push'></div><!-- for sticky footer -->
            </div><!-- /wrapper -->
            <div class='footer quiet pad2 space-top1 center small'>
                Code coverage generated by
                <a href="https://istanbul.js.org/" target="_blank" rel="noopener noreferrer">istanbul</a>
                at 2023-08-26T06:41:47.215Z
            </div>
        <script src="../../../prettify.js"></script>
        <script>
            window.onload = function () {
                prettyPrint();
            };
        </script>
        <script src="../../../sorter.js"></script>
        <script src="../../../block-navigation.js"></script>
    </body>
</html>
    